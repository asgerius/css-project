[{"tags": ["c++", "controller", "xinput"], "comments": [{"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1516234226, "post_id": 48311881, "comment_id": 83609792, "body": "A <a href=\"https://www.google.com/search?q=DS3+xinput+or+dinput&amp;oq=DS3+xinput+or+dinput&amp;aqs=chrome..69i57.7102j0j7&amp;sourceid=chrome&amp;ie=UTF-8\" rel=\"nofollow noreferrer\">quick google search</a> points to a reddit thread, but that may not be accurate for obvious reasons. The link after it may also have an answer."}, {"owner": {"reputation": 1189, "user_id": 9232218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7ced53adbb0ba08d1cea65a43b124d?s=128&d=identicon&r=PG&f=1", "display_name": "Yastanub", "link": "https://stackoverflow.com/users/9232218/yastanub"}, "reply_to_user": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1516234713, "post_id": 48311881, "comment_id": 83609905, "body": "I think there is a little bit of confusion here sry :/ The Reddit thread which i actually didn&#39;t find answers the question wether DS3 uses XInput or DInput. But by DS3 i actually mean Dark Souls 3. So is there a way to pass the button presses to the game directly?"}], "owner": {"reputation": 1189, "user_id": 9232218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7ced53adbb0ba08d1cea65a43b124d?s=128&d=identicon&r=PG&f=1", "display_name": "Yastanub", "link": "https://stackoverflow.com/users/9232218/yastanub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1516233325, "creation_date": 1516233325, "question_id": 48311881, "link": "https://stackoverflow.com/questions/48311881/send-xinput-state-to-another-controller-via-sockets-and-pass-it-to-a-program", "title": "Send Xinput state to another Controller via sockets and pass it to a program", "body": "<p>So in fact, i really love to play DS3 with friends just one game and everytime someone dies the controller passes to the next so typical couch gaming. But often we have no time to visit each other and so the only option would be online MP. Since i don't really like that and my friends mostly don't have DS3 i wanted to create a program with XInput which constantly gets the Controllers State and mirrors it to the other via WinSockets so my friends could controle my game via their controller. I already wrote some quick code for a controller Class with some basic functions to get to know XInput a littlebit better. Now my questions are: does DS3 use XInput or DInput? And either way how do i get DS3 to interpret my inputs? I hope this quisteion is specific enough.</p>\n\n<p>If neccesary here is my code so far:</p>\n\n<h1>CPad.h:</h1>\n\n<pre><code>#pragma once\n\n#include &lt;iostream&gt;\n#include &lt;Windows.h&gt;\n#include &lt;Xinput.h&gt;\n#include &lt;limits.h&gt;\n#include &lt;time.h&gt;\n\nusing namespace std;\n\nclass Ctimer\n{\nprivate:\n    clock_t cur_time;\n    clock_t last_time;\n\npublic:\n    Ctimer() {\n        cur_time = last_time = clock();\n    }\n    void update() {\n        cur_time = clock();\n    }\n    void reset() {\n        last_time = cur_time;\n    }\n    clock_t GetElapsed() {\n        return cur_time - last_time;\n    }\n};\n\n\nclass CPad\n{\nprivate:\n    int DevID = -1;\n    int dwPacketNumber_last;\n    int vibration_duration;\n    bool vibrate = 0;\n    Ctimer vibration_timer;\n    XINPUT_VIBRATION vibration;\npublic:\n    XINPUT_STATE state;\n\n    CPad();\n    bool CheckInput();\n    void SetVibration(int lMotor, int rMotor, int vibration_duration);\n    void ProcVibration();\n    void UpdateVibrationTimer();\n};\n</code></pre>\n\n<h1>CPad.cpp:</h1>\n\n<pre><code>#include \"CPad.h\"\n\nCPad::CPad()\n{\n    for (int i = 0; i &lt; XUSER_MAX_COUNT; i++)\n    {\n        XINPUT_STATE tmp;\n        ZeroMemory(&amp;tmp, sizeof(XINPUT_STATE));\n        if (XInputGetState(i, &amp;tmp) == ERROR_SUCCESS)\n        {\n            DevID = i;\n            state = tmp;\n        }\n    }\n    if (DevID == -1)\n    {\n        cerr &lt;&lt; \"Error: couldn't find Controller\" &lt;&lt; endl;\n        delete(this);\n        exit(1);\n    }\n\n    dwPacketNumber_last = state.dwPacketNumber;\n}\n\nbool CPad::CheckInput()\n{\n    dwPacketNumber_last = state.dwPacketNumber;\n    XInputGetState(DevID, &amp;state);\n\n    if (dwPacketNumber_last != state.dwPacketNumber)\n    {\n        dwPacketNumber_last = state.dwPacketNumber;\n        return true;\n    }\n    else\n    {\n        return false;\n    }\n}\n\nvoid CPad::SetVibration(int lMotor, int rMotor, int vibration_duration)\n{\n    this-&gt;vibration_duration = vibration_duration;\n    vibrate = true;\n\n    vibration.wLeftMotorSpeed = lMotor;\n    vibration.wRightMotorSpeed = rMotor;\n\n    XInputSetState(DevID, &amp;vibration);\n}\n\nvoid CPad::ProcVibration()\n{\n    if (vibrate)\n    {\n        if (vibration_timer.GetElapsed() &gt; vibration_duration)\n        {\n            vibration_timer.reset();\n            vibrate = false;\n\n            vibration.wLeftMotorSpeed = 0;\n            vibration.wRightMotorSpeed = 0;\n\n            XInputSetState(DevID, &amp;vibration);\n        }\n    }\n}\n\nvoid CPad::UpdateVibrationTimer()\n{\n    vibration_timer.update();\n}\n</code></pre>\n\n<h1>main.cpp</h1>\n\n<pre><code>#include \"CPad.h\"\n\nint main(int argc, char **argv)\n{\n    bool run = true;\n\n    CPad pad;\n\n    while (run)\n    {\n        pad.ProcVibration();\n        pad.UpdateVibrationTimer();\n\n        if (pad.CheckInput())\n        {\n            switch (pad.state.Gamepad.wButtons)\n            {\n            case(XINPUT_GAMEPAD_A):\n            {\n                cout &lt;&lt; \"Pressed A\" &lt;&lt; endl;\n                pad.SetVibration(INT_MAX, INT_MAX, 300);\n                break;\n            }\n            case(XINPUT_GAMEPAD_BACK):\n            {\n                run = false;\n                break;\n            }\n            }\n        }\n\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "cmake", "escaping"], "comments": [{"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1516232458, "post_id": 48311733, "comment_id": 83609321, "body": "Have you tried <code>-E echo \\&quot;#include Something\\&quot; &gt; \\&quot;${BUILD_INFO_CPP}\\&quot;</code>?"}, {"owner": {"reputation": 5913, "user_id": 1244932, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d2c608e688b798896e8b516855fc1ab1?s=128&d=identicon&r=PG", "display_name": "user1244932", "link": "https://stackoverflow.com/users/1244932/user1244932"}, "reply_to_user": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1516233020, "post_id": 48311733, "comment_id": 83609484, "body": "@Pablo This is not helps, <code>cmake</code> eat quotes. But looks like <code>VERBATIM</code> works."}], "answers": [{"tags": [], "owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "is_accepted": false, "score": 1, "last_activity_date": 1516233648, "creation_date": 1516233648, "answer_id": 48311925, "question_id": 48311733, "link": "https://stackoverflow.com/questions/48311733/cmake-add-custom-target-escaping/48311925#48311925", "title": "cmake add_custom_target escaping", "body": "<p>According to the official documentation for <a href=\"https://cmake.org/cmake/help/v3.0/command/add_custom_target.html\" rel=\"nofollow noreferrer\"><code>add_custom_target</code></a> (CMake 3.0):</p>\n\n<blockquote>\n  <p>If VERBATIM is given <strong>then all arguments to the commands will be escaped properly for the build tool so that the invoked command receives each argument unchanged</strong>. Note that one level of escapes is still used by the CMake language processor before add_custom_target even sees the arguments. Use of VERBATIM is recommended as it enables correct behavior. <strong>When VERBATIM is not given the behavior is platform specific because there is no protection of tool-specific special characters.</strong></p>\n</blockquote>\n\n<p>Thus, add <code>VERBATIM</code> so that the command is properly escaped in <code>add_custom_target</code>.</p>\n\n<p>The same applies for all versions onwards and CMake 2.8 as well.</p>\n"}], "owner": {"reputation": 5913, "user_id": 1244932, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d2c608e688b798896e8b516855fc1ab1?s=128&d=identicon&r=PG", "display_name": "user1244932", "link": "https://stackoverflow.com/users/1244932/user1244932"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516233812, "creation_date": 1516232272, "last_edit_date": 1516233812, "question_id": 48311733, "link": "https://stackoverflow.com/questions/48311733/cmake-add-custom-target-escaping", "title": "cmake add_custom_target escaping", "body": "<p>Here is minimal <code>CMakeLists.txt</code> to reproduce problem:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.9 FATAL_ERROR)\n\nset(BUILD_INFO_CPP \"${CMAKE_BINARY_DIR}/build_info.cpp\")\nadd_custom_target(GenerateBuildInfo ALL\n   COMMAND ${CMAKE_COMMAND} -E echo \"#include Something\" &gt; \"${BUILD_INFO_CPP}\"\n)\n</code></pre>\n\n<p>On every build I want regenerate <code>${CMAKE_BINARY_DIR}/build_info.cpp</code>,\nbut this code not create <code>build_info.cpp</code>, because of <code>cmake</code> execute it like this:</p>\n\n<pre><code>/usr/bin/cmake -E echo #include &gt; /tmp/2/build/build_info.cpp\n</code></pre>\n\n<p>and as understand shell interpret <code>#</code> as start of comments, so this is equivalent to</p>\n\n<pre><code>/usr/bin/cmake -E echo\n</code></pre>\n\n<p>I wonder is special symbols escaping not implemented in <code>cmake</code>?</p>\n\n<p>I use linux/bash and Makefile generator.</p>\n"}, {"tags": ["c++", "recursion"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 4, "creation_date": 1516230577, "post_id": 48311381, "comment_id": 83608802, "body": "Your <code>prime</code> function does <b>a terrible thing</b> when <code>n</code> is <code>0</code>."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 3, "creation_date": 1516230630, "post_id": 48311381, "comment_id": 83608822, "body": "When <code>smallest</code> is passed a prime number it returns 0.  <code>n % 0</code> is undefined."}, {"owner": {"reputation": 55, "user_id": 7269142, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e71eba352fff4768e9c4743b0a4d3008?s=128&d=identicon&r=PG&f=1", "display_name": "cowboy", "link": "https://stackoverflow.com/users/7269142/cowboy"}, "edited": false, "score": 0, "creation_date": 1516230974, "post_id": 48311381, "comment_id": 83608925, "body": "but when i pass n to be 50 shouldnt the program run?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1516231025, "post_id": 48311381, "comment_id": 83608948, "body": "Yes until <code>factor</code> becomes prime.  Single step your program, I can&#39;t at the moment as I am on a tablet."}], "answers": [{"tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": false, "score": 0, "last_activity_date": 1516231488, "creation_date": 1516231488, "answer_id": 48311626, "question_id": 48311381, "link": "https://stackoverflow.com/questions/48311381/when-i-recurse-the-following-code-on-function-prime-the-program-crashes-what-is/48311626#48311626", "title": "When i recurse the following code on function prime the program crashes what is wrong in my code?", "body": "<p>As the comments point out, when <code>small</code> returns <code>0</code>, you continue recursing when you shouldn't. This can be solved with a small update to your base case:</p>\n\n<pre><code>if (n &lt;= 1){\n    return 0 ;\n}\n</code></pre>\n\n<p>Furthermore, it's worth pointing out that as it stands, your <code>prime</code> function will <strong>never call itself more than once</strong>. When you call <code>smallest</code>, you are guaranteed to get a prime number!</p>\n"}], "owner": {"reputation": 55, "user_id": 7269142, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e71eba352fff4768e9c4743b0a4d3008?s=128&d=identicon&r=PG&f=1", "display_name": "cowboy", "link": "https://stackoverflow.com/users/7269142/cowboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516232509, "creation_date": 1516230113, "last_edit_date": 1516232509, "question_id": 48311381, "link": "https://stackoverflow.com/questions/48311381/when-i-recurse-the-following-code-on-function-prime-the-program-crashes-what-is", "title": "When i recurse the following code on function prime the program crashes what is wrong in my code?", "body": "<p>Whenever I try to recurse in the function prime, my program crashes at that step.  I think the problem is passing the function small as a recursion.  What am I doing wrong?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint smallest(int n) {\n   for( int x = 2 ; x &lt;= n/2 ;  x++){\n     if (n%x==0) {\n        return x;\n     }\n     else {\n        return 0;\n     }\n   }\n}\n\nint prime(int n, int(*small)(int)) {\n  int factor;\n  if (n == 1){\n    return 0;\n  }\n  else {\n    factor = n % small(n);\n    cout &lt;&lt; small(n) &lt;&lt; endl;\n    return prime(factor , small);\n  }\n}\n\nint main() {\n  prime(50 , &amp;smallest);\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "pointers", "pointer-arithmetic"], "comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 6, "creation_date": 1516230030, "post_id": 48311361, "comment_id": 83608622, "body": "the <code>+ 1</code> does not increment the array by any means. Learn about <i>pointer arithmetic</i>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "edited": false, "score": 7, "creation_date": 1516230049, "post_id": 48311361, "comment_id": 83608630, "body": "Lookup <i>pointer arithmetics</i>! The compiler is aware of the data size using a typed pointer."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1516230363, "post_id": 48311361, "comment_id": 83608726, "body": "Consider renaming your variable <code>pArray</code> to <code>pointer</code>.  The name seems to be confusing you into thinking that is is an array."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1516231289, "post_id": 48311361, "comment_id": 83609026, "body": "You&#39;re not adding on to a string, you&#39;re adding to a pointer to a string. Maybe it&#39;d be clearer if you wrote <code>string* pArray = Array;</code>."}, {"owner": {"reputation": 345, "user_id": 5782522, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NhYTn.jpg?s=128&g=1", "display_name": "Danny Hepple", "link": "https://stackoverflow.com/users/5782522/danny-hepple"}, "edited": false, "score": 0, "creation_date": 1516231935, "post_id": 48311361, "comment_id": 83609181, "body": "Seems like this question has already been answered. I can&#39;t believe I missed the question titled &quot;Why a pointer + 1 add 4 actually&quot;. I think someone should change the title of that question because it makes no sense at all in the context of what he wants to know. Am I okay looking at the answers for this even though the question is about C , is the pointer information transferable to c++?"}], "answers": [{"comments": [{"owner": {"reputation": 345, "user_id": 5782522, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NhYTn.jpg?s=128&g=1", "display_name": "Danny Hepple", "link": "https://stackoverflow.com/users/5782522/danny-hepple"}, "edited": false, "score": 0, "creation_date": 1516232483, "post_id": 48311740, "comment_id": 83609329, "body": "Fantastic! Perfect and concise answer. You just saved me from reading through a few pages of C pointer answers in the linked post. Cheers."}], "tags": [], "owner": {"reputation": 70, "user_id": 9231533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808bfdc2dfca3a6dc28ad21ebcbb9abf?s=128&d=identicon&r=PG&f=1", "display_name": "Simon.B", "link": "https://stackoverflow.com/users/9231533/simon-b"}, "is_accepted": true, "score": 1, "last_activity_date": 1516232324, "creation_date": 1516232324, "answer_id": 48311740, "question_id": 48311361, "link": "https://stackoverflow.com/questions/48311361/parray-parray-1-can-someone-explain-to-me-how-this-increments-the-array-in/48311740#48311740", "title": "pArray = pArray + 1; Can someone explain to me how this increments the array in C++?", "body": "<p>I think when you add \"1\" to your pointer, this \"1\" is not treated as an integer number in the process of addition. Notice that pointer is an address, now, when you add 1 to your pointer it becomes: the address it currently is+ONE COMPLETE SIZE of a string type. So for example if your string type takes 8 Bytes you're moving 8 Bytes forward in the memory and not 1 Bytes!</p>\n\n<p>As to why \"two\" printed you should know that array elements are held in continuous groups of bytes in the memory thus when you add to the address of one of the elements you can get to the other elements. Array names are nothing but pointers themselves except that they are fixed pointers(you can't change their addresses). E.g. In (int myArr[10]) the name \"myArr\" is a pointer that points to the(has the address of the) first part in the ram that holds the first element and then using pointer arithmetic just as you've done in the above example of yours you can access the rest of the elements either.</p>\n\n<p>As an ending note, these two are equal in this example array: (myArr[i]==*(myArr+i)), if you put 0 here instead of i, you get (myArr[0]==*myArr) which is exactly what I said earlier. I hope it helps.</p>\n"}], "owner": {"reputation": 345, "user_id": 5782522, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NhYTn.jpg?s=128&g=1", "display_name": "Danny Hepple", "link": "https://stackoverflow.com/users/5782522/danny-hepple"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 1, "closed_date": 1516230789, "accepted_answer_id": 48311740, "answer_count": 1, "score": 0, "last_activity_date": 1516232324, "creation_date": 1516229973, "last_edit_date": 1516230791, "question_id": 48311361, "link": "https://stackoverflow.com/questions/48311361/parray-parray-1-can-someone-explain-to-me-how-this-increments-the-array-in", "closed_reason": "Duplicate", "title": "pArray = pArray + 1; Can someone explain to me how this increments the array in C++?", "body": "<p>I have been learning about using pointers with arrays. If I was to write this simple code:</p>\n\n<pre><code>string Array[3] = {\"one\", \"two\", \"three\"};\n\nstring *pArray = Array;\n\npArray = pArray + 1;\n\nstd::cout &lt;&lt; *pArray &lt;&lt; std::endl;\n</code></pre>\n\n<p>The output is 'two'</p>\n\n<p>Can someone explain to me the workings of this? Why does the +1 change the position of the pointer to where \"two\" is in the array? I'd expect the +1 to be concatenated onto the end of the string pointer so I'd end up with something like '0x61feb01'.</p>\n\n<p>How does the compiler know to increment the array and not just add a 1 on to the end of the pointer string memory location?</p>\n\n<p>Why is adding an int to a string different here?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 172, "user_id": 6355709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b6ce6786b1f4abb994b373518a0f17b?s=128&d=identicon&r=PG&f=1", "display_name": "asantacreu", "link": "https://stackoverflow.com/users/6355709/asantacreu"}, "edited": false, "score": 1, "creation_date": 1516229324, "post_id": 48311206, "comment_id": 83608358, "body": "Why the need to declare the classes inside Bank? Just declare each class in each header."}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1516229385, "post_id": 48311206, "comment_id": 83608379, "body": "In order for you to hold a member of type <code>Departure</code> inside of <code>Bank</code>, the compiler must have a full definition of <code>Departure</code> available (in order to know the size of memory required to allocate a <code>Bank</code>."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1516229386, "post_id": 48311206, "comment_id": 83608380, "body": "&quot;And one more question.Is it possible to define 1 header file with all includes like&quot; Yes but don&#39;t, it will murder compile time and lead to all kinds of unexpected symbols popping up as defined in new .cpp files that only include the header that has a bunch of other inclusions."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1516229387, "post_id": 48311206, "comment_id": 83608381, "body": "&quot;Is it possible to define 1 header file with all includes[?]&quot; Yes, but this is generally a bad idea. It greatly increases the amount of stuff that needs to be compiled, blurs what resources are actually used by your program, and may lead to naming collisions between your code and stuff you included but aren&#39;t using."}, {"owner": {"reputation": 172, "user_id": 6355709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b6ce6786b1f4abb994b373518a0f17b?s=128&d=identicon&r=PG&f=1", "display_name": "asantacreu", "link": "https://stackoverflow.com/users/6355709/asantacreu"}, "edited": false, "score": 0, "creation_date": 1516229388, "post_id": 48311206, "comment_id": 83608383, "body": "Although not sure, a reason why this class Bank::LoginController is not working in another header, is because the class LoginController  is defined privately inside Bank. Maybe adding public: before solves this"}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 1, "creation_date": 1516229488, "post_id": 48311206, "comment_id": 83608429, "body": "<i>Even if I define LoginController &amp;&amp; Departure structure inside Bank i want separate cpp files for each class, however, header guard will close access to it after including it to one of cpp files.</i>  This is incorrect; the include guards only prevent multiple definition within a single translation unit (i.e. a single <code>cpp</code> file).  One header with 3 cpp files will work just fine."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 1, "creation_date": 1516229657, "post_id": 48311206, "comment_id": 83608487, "body": "You can&#39;t separate out declarations in the way you&#39;re describing, and tbh it seems like a pointless exercise. If you really want them in separate files, and not have the inner classes pollute any outside namespace, then just put them in their own namespace instead of nesting them in a class :)."}], "answers": [{"comments": [{"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 2, "creation_date": 1516229841, "post_id": 48311297, "comment_id": 83608567, "body": "Horrifying but effective."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 2, "last_activity_date": 1516229565, "creation_date": 1516229565, "answer_id": 48311297, "question_id": 48311206, "link": "https://stackoverflow.com/questions/48311206/class-composition-and-header-problems/48311297#48311297", "title": "class composition and header problems", "body": "<p>You can put the <code>#include</code> directives inside the <code>Bank</code> class.</p>\n\n<p><code>Bank.h</code></p>\n\n<pre><code>class Bank {\n    #include \"LoginController.h\"\n    #include \"Departure.h\"\n    // Bank implementation\n}\n</code></pre>\n\n<p><code>LoginController.h</code></p>\n\n<pre><code>class LoginController {\n    // some implementation\n}\n</code></pre>\n\n<p><code>Departure.h</code></p>\n\n<pre><code>class Departure {\n    // some implementation\n}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 8006719, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6aa504b139d1aae08fcc3c8dfa41d744?s=128&d=identicon&r=PG&f=1", "display_name": "PAPAmidNIGHT", "link": "https://stackoverflow.com/users/8006719/papamidnight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516229565, "creation_date": 1516229005, "question_id": 48311206, "link": "https://stackoverflow.com/questions/48311206/class-composition-and-header-problems", "title": "class composition and header problems", "body": "<p>Currently, I'm writing a project for fun and faced next problem.Let's suppose I'm creating <code>class Bank</code> and I want to define classes <code>LoginController</code> and <code>Departure</code> </p>\n\n<pre><code>class Bank{\n    class LoginController{\n       //some implemantation \n    }\n    class Departure{\n       //some departure \n    }\n}\n</code></pre>\n\n<p>To avoid making huge declaration of <code>Bank</code> inside <code>Bank.h</code> I want to define them in separate files</p>\n\n<pre><code>//Bank.h\n#include \"LoginController.h\"\n#include \"Departure\"\nclass Bank{\n  class LoginController;\n  class Departure;\n  LoginController controller;  \n  Departure departure;\n  ...\n}\n//LoginController.h\nclass Bank; //forward declaration\nclass Bank::LoginController{\n   bool getAccess(Bank::Departure);\n}\n//Departure.h\n//Departure depends on Bank class aswell\nclass Bank; //forward declartion\nclass Bank::Departure{...}\n</code></pre>\n\n<p>This code wont compile with huge stack trace.It can be solved with one big <code>Bank.cpp</code> and writing it all there, however, i don't want to make one huge file.\nI assume this is a bad design problem, however, i'm still interested if it possible to implement this class as I wanted.Even if I define <code>LoginController &amp;&amp; Departure</code> structure inside <code>Bank</code> i want separate cpp files for each class, however, header guard will close access to it after including it to one of cpp files.The best solution i can see is defining all in one header but not inside each other.</p>\n\n<p>And one more question.Is it possible to define 1 header file with all includes like</p>\n\n<pre><code>#ifndef HeaderFile\n#define HeaderFile\n  #include &lt;iostream&gt;\n  #include &lt;memory&gt;\n  ....\n#endif\n</code></pre>\n\n<p>From the previous question, i understand that this will open only for one file, therefore do we need to provide each file with needed headers. Including the same header to different files seems expensive. </p>\n"}, {"tags": ["c++", "winapi", "button"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1516229778, "post_id": 48310881, "comment_id": 83608540, "body": "Maybe he doesn&#39;t know how to set the button&#39;s background color to blue as well."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1516271934, "post_id": 48310881, "comment_id": 83623849, "body": "<i>&quot;Please share all the ideas&quot;</i> is not a question, and certainly not problem statement that meets the quality requirements of Stack Overflow. Please explain the issue you are trying to solve with enough detail, so that we (and future visitors) can understand it."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1516280134, "post_id": 48310881, "comment_id": 83628840, "body": "@IInspectable What do you not understand about the question? Maybe asking for <i>specific</i> details would be more helpful, so OP or &quot;we&quot; SO users who already understand it, can edit the question to improve it."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1516281293, "post_id": 48310881, "comment_id": 83629516, "body": "@zett42: Does the OP control the parent window? Is the OP&#39;s background always a solid color? If the answer to both of those questions is <i>&quot;Yes&quot;</i>, then Hans Passant has <a href=\"https://stackoverflow.com/questions/48310881/how-to-display-transparent-png-image-files-on-a-win32-button-with-color-same-as?noredirect=1#comment83608540_48310881\">offered</a> an easier solution. Without answers to those questions, we have competing solutions, and future visitors are in a pretty bad situation, trying to determine, which solution might be more appropriate."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1516281635, "post_id": 48310881, "comment_id": 83629735, "body": "@IInspectable Where does Hans Passant offer a solution?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1516281938, "post_id": 48310881, "comment_id": 83629935, "body": "@zett42: There&#39;s a hyperlink in the comment."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1516282021, "post_id": 48310881, "comment_id": 83629985, "body": "@IInspectable ...which just links to Hans&#39;s comment that doesn&#39;t offer a solution."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1516282331, "post_id": 48310881, "comment_id": 83630177, "body": "@zett42: The solution: Set the buttons background color to be the same as the parent window&#39;s background color. This can easily be deduced from that comment, no?"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1516282702, "post_id": 48310881, "comment_id": 83630410, "body": "@IInspectable It cannot be deduced from that comment, how to set a buttons background color. AFAIK there is no way to do that apart from custom draw / owner draw."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1516283694, "post_id": 48310881, "comment_id": 83631054, "body": "It offers a solution, but doesn&#39;t explain, how to implement it. The <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb761849.aspx\" rel=\"nofollow noreferrer\">WM_CTLCOLORBTN</a> message can be used to set a button&#39;s background brush. This still requires an owner-drawn button, but it&#39;s still easier than your proposed solution. But since we don&#39;t know, what the OP really needs, there is little value in providing this as an answer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9231940"}, "edited": false, "score": 0, "creation_date": 1516403351, "post_id": 48310881, "comment_id": 83688278, "body": "Maybe he doesn&#39;t know how to set the button&#39;s background color to blue as well. \u2013 Hans Passant 2  - No, I already changed background color of the button. That is the first thing we will do"}], "answers": [{"comments": [{"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1516396422, "post_id": 48312005, "comment_id": 83685589, "body": "@SabuViswamoni Sorry, no. If you have a follow-up question just ask here in comments or better yet post a new question."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9231940"}, "edited": false, "score": 0, "creation_date": 1516402889, "post_id": 48312005, "comment_id": 83688158, "body": "Yes , I have a follow up question. I am testing a different scenario. I just tried this by creating the button over another static control in the main window. An another .png file is loaded on the static control. The button should be transparent with image in the static control instead of main window color."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1516444038, "post_id": 48312005, "comment_id": 83696505, "body": "@SabuViswamoni If you just want to display a background image behind the button, I would draw the background image by the parent window (handle <code>WM_PRINTCLIENT</code> and <code>WM_PAINT</code>). Otherwise you could try to make the button a layered child window, which I explained <a href=\"https://stackoverflow.com/a/42603066/7571258\">here</a> for a static control but I don&#39;t know if this works for buttons aswell. This technique requires Win 8 at least."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9231940"}, "edited": false, "score": 0, "creation_date": 1516746211, "post_id": 48312005, "comment_id": 83813423, "body": "Hi zett42, I checked the sample( you given to solve button transparency over static control)  and it is not suitable for my application. My application is purely Win32 application and not having any resource IDs, so I cannot use SetLayeredWindowFromBitmapResource. I will load .png image files from external files.I will post a new question with my exact requirement."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9231940"}, "edited": false, "score": 0, "creation_date": 1516747968, "post_id": 48312005, "comment_id": 83814174, "body": "Pls check the question and attached image in the link - <a href=\"https://stackoverflow.com/questions/48412063/creating-transparant-buttons-over-static-control-in-win32\" title=\"creating transparant buttons over static control in win32\">stackoverflow.com/questions/48412063/&hellip;</a>"}], "tags": [], "owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "is_accepted": true, "score": 7, "last_activity_date": 1516234857, "last_edit_date": 1516234857, "creation_date": 1516234340, "answer_id": 48312005, "question_id": 48310881, "link": "https://stackoverflow.com/questions/48310881/how-to-display-transparent-png-image-files-on-a-win32-button-with-color-same-as/48312005#48312005", "title": "How to display transparent png image files on a win32 button with color same as background color", "body": "<p>AFAIK there is no simple way to make the background of a button transparent and let it only draw the icon.</p>\n\n<p>One can use <em><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb761817(v=vs.85).aspx\" rel=\"noreferrer\">custom draw</a></em> to completely control the appearance of the button. There is also \"owner draw\" but for buttons this technique is outdated as of Windows Vista. <em>Custom draw</em> has the advantage that you don't have to modify the button styles (so you can keep <code>BS_DEFPUSHBUTTON</code>, for instance) and it is also more flexible as you only need to do part of the drawing if you wish so. For our use case we need to draw everything though.</p>\n\n<p>To use <em>custom draw</em>, handle the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb761847(v=vs.85).aspx\" rel=\"noreferrer\"><code>NM_CUSTOMDRAW</code> notification</a> in the window procedure of the parent of the button. When <code>NMCUSTOMDRAW::dwDrawStage</code> equals <code>CDDS_PREERASE</code>, do your drawing and return <code>CDRF_SKIPDEFAULT</code> so Windows doesn't paint over what you have drawn.</p>\n\n<p>To achieve transparency, one can call <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb773306(v=vs.85).aspx\" rel=\"noreferrer\"><code>DrawThemeParentBackground()</code></a> to draw the background of the parent window before calling <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms648065(v=vs.85).aspx\" rel=\"noreferrer\"><code>DrawIconEx()</code></a> to draw the icon transparently over the background.</p>\n\n<h1>Example</h1>\n\n<p>Here is a complete working example program. Error handling omitted for clarity.</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;gdiplus.h&gt;\n#include &lt;uxtheme.h&gt;  // for DrawThemeParentBackground()\n\n#pragma comment(lib, \"gdiplus.lib\")\n#pragma comment(lib, \"uxtheme.lib\")\n\n// Common controls manifest entry is required for using custom draw.\n// Remove this pragma if you have already included this in the manifest of your project.\n#pragma comment(linker,\"\\\"/manifestdependency:type='win32' \\\nname='Microsoft.Windows.Common-Controls' version='6.0.0.0' \\\nprocessorArchitecture='*' publicKeyToken='6595b64144ccf1df' language='*'\\\"\")\n\nLRESULT CALLBACK WndProc(HWND, UINT, WPARAM, LPARAM);\nLRESULT CustomDrawButton( HWND hWnd, NMCUSTOMDRAW const&amp; nmc );\n\nint APIENTRY wWinMain(_In_ HINSTANCE hInstance,\n                     _In_opt_ HINSTANCE hPrevInstance,\n                     _In_ LPWSTR    lpCmdLine,\n                     _In_ int       nCmdShow)\n{\n    // Initialize GDI+\n    Gdiplus::GdiplusStartupInput gdiplusStartupInput;\n    ULONG_PTR gdiplusToken;\n    GdiplusStartup( &amp;gdiplusToken, &amp;gdiplusStartupInput, NULL );   \n\n    // Register window class for main window    \n    WNDCLASS wc{ sizeof(wc) }; // set cbSize and zero-init all other members\n    wc.lpfnWndProc    = WndProc;\n    wc.hInstance      = hInstance;\n    wc.hCursor        = LoadCursor(nullptr, IDC_ARROW);\n    wc.hbrBackground  = CreateSolidBrush( RGB( 255, 200, 127 ) );\n    wc.lpszClassName  = L\"MyWindowClass\";\n    RegisterClassW( &amp;wc );\n\n    // Create main window    \n    HWND hWnd = CreateWindowExW( 0, wc.lpszClassName, L\"Test\", WS_OVERLAPPEDWINDOW, \n        CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, NULL, NULL, hInstance, nullptr );\n    ShowWindow( hWnd, nCmdShow );\n\n    // Create button    \n    HWND hButton1 = CreateWindow( L\"BUTTON\", L\"Test button\", BS_ICON | WS_VISIBLE | WS_CHILD, 50, 50, 228, 228, hWnd, (HMENU) 1, NULL, NULL );\n\n    // Assign image to button\n    Gdiplus::Bitmap* m_pBitmap;\n    HICON hicon;\n    m_pBitmap = Gdiplus::Bitmap::FromFile(L\"test.png\");\n    m_pBitmap-&gt;GetHICON(&amp;hicon);  \n    LRESULT lr = SendMessage( hButton1, BM_SETIMAGE, IMAGE_ICON, (LPARAM)hicon );\n\n    // Standard message loop        \n    MSG msg;\n    while (GetMessage(&amp;msg, nullptr, 0, 0))\n    {\n        TranslateMessage(&amp;msg);\n        DispatchMessage(&amp;msg);\n    }\n\n    return (int) msg.wParam;\n}\n\nLRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)\n{\n    switch (message)\n    {\n        case WM_NOTIFY:\n        {\n            auto pnm = reinterpret_cast&lt;LPNMHDR&gt;( lParam );\n            if( pnm-&gt;code == NM_CUSTOMDRAW )\n            {\n                // NOTE: you should check if pnm-&gt;hwndFrom really is the button\n                // you want to draw. Not required in this example because\n                // we only have one control.\n                LRESULT res = CustomDrawButton( pnm-&gt;hwndFrom, *reinterpret_cast&lt;LPNMCUSTOMDRAW&gt;( lParam ) );\n                if( res != 0 )\n                    return res;\n            }\n            break;\n        }\n        case WM_DESTROY:\n            PostQuitMessage(0);\n            break;\n    }\n    return DefWindowProc(hWnd, message, wParam, lParam);\n}   \n\nLRESULT CustomDrawButton( HWND hWnd, NMCUSTOMDRAW const&amp; nmc )\n{\n    switch( nmc.dwDrawStage )\n    {\n        case CDDS_PREERASE:\n        {\n            RECT rc{}; GetClientRect( hWnd, &amp;rc );\n\n            // Draw the background of the parent window.\n            DrawThemeParentBackground( hWnd, nmc.hdc, &amp;rc );\n\n            // Get the icon we assigned to the button.    \n            HICON hIcon = reinterpret_cast&lt;HICON&gt;( SendMessage( hWnd, BM_GETIMAGE, IMAGE_ICON, 0 ) );\n\n            // Draw the icon transparently over the background.\n            DrawIconEx( nmc.hdc, 0, 0, hIcon, rc.right, rc.bottom, 0, NULL, DI_NORMAL );\n\n            // Tell Windows we have drawn everything by ourselfs.    \n            return CDRF_SKIPDEFAULT;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>This is my button image (\"test.png\"):</p>\n\n<p><a href=\"https://i.stack.imgur.com/1Q8xZ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/1Q8xZ.png\" alt=\"Button image\"></a></p>\n\n<p>And this is how the final result looks like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/zki0V.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/zki0V.png\" alt=\"Window screenshot\"></a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9231940"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2380, "favorite_count": 2, "accepted_answer_id": 48312005, "answer_count": 1, "score": 0, "last_activity_date": 1516922479, "creation_date": 1516227205, "last_edit_date": 1516922479, "question_id": 48310881, "link": "https://stackoverflow.com/questions/48310881/how-to-display-transparent-png-image-files-on-a-win32-button-with-color-same-as", "title": "How to display transparent png image files on a win32 button with color same as background color", "body": "<p>I have a win32 window with background color blue. I have created a button on the window using the code</p>\n\n<pre><code>// code for creating button\n\nhButton1= CreateWindow(_T(\"BUTTON\"),_T(\"Test button\"), BS_ICON  | WS_VISIBLE | WS_CHILD ,800,200,228,228,hWnd, (HMENU)1,NULL,NULL);\n</code></pre>\n\n<p>I loaded a .png transparent image as button image using the code</p>\n\n<pre><code>// code to     \n// using GDI\nGdiplusStartupInput gdiplusStartupInput;\nULONG_PTR gdiplusToken;\nGdiplusStartup(&amp;gdiplusToken, &amp;gdiplusStartupInput, NULL);   \n\nGdiplus::Bitmap* m_pBitmap;\nHICON hicon;\n    m_pBitmap = Gdiplus::Bitmap::FromFile(L\"d:\\\\gear.png\");\n    m_pBitmap-&gt;GetHICON(&amp;hicon);  \n    LRESULT lr = SendMessage(hButton1,BM_SETIMAGE,IMAGE_ICON,(LPARAM)hicon );\n\nShowWindow(hButton1,SW_SHOW);\n</code></pre>\n\n<p>Now the button is displayed with transparent .png image data with button default background color. I changed the button background color to blue. But when we load .png file , then button color changed to default color.</p>\n\n<p>I need to keep the transparent area of the button the same color as the background color of the window i.e. blue. You can refer the image of my window</p>\n\n<p><img src=\"https://i.stack.imgur.com/MtFVw.png\" alt=\"This is the window displayed\"></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 75, "user_id": 9057048, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2ab6419bdfb6402040cb2a7eb1cdd2bc?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hussein", "link": "https://stackoverflow.com/users/9057048/adam-hussein"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1516226910, "post_id": 48310746, "comment_id": 83607331, "body": "@scohe001 That&#39;s not a duplicate. My question is different."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 5, "creation_date": 1516227043, "post_id": 48310746, "comment_id": 83607397, "body": "Your question seems to be asking for a way to ensure the number of digits for Hours/Min/Sec are the same by padding 0&#39;s. Can you explain why the other question is different from yours?"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1516227446, "post_id": 48310746, "comment_id": 83607610, "body": "It&#39;s not a good idea to write your own times; instead you should use something like <a href=\"http://en.cppreference.com/w/cpp/io/manip/put_time\" rel=\"nofollow noreferrer\"><code>std::put_time</code></a> if possible. I&#39;m not sure exactly how to use that or this would be an answer, but a lot can go wrong if you try to do it yourself. See <a href=\"https://youtu.be/QCwpVtqcqNE\" rel=\"nofollow noreferrer\">youtu.be/QCwpVtqcqNE</a> for an example of when this can go wrong."}, {"owner": {"reputation": 75, "user_id": 9057048, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2ab6419bdfb6402040cb2a7eb1cdd2bc?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hussein", "link": "https://stackoverflow.com/users/9057048/adam-hussein"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1516228097, "post_id": 48310746, "comment_id": 83607853, "body": "@scohe001 Why do I get downvotes, explain please?"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1516229105, "post_id": 48310746, "comment_id": 83608260, "body": "I can&#39;t speak for everyone else, but I downvoted because you weren&#39;t able to distinguish your question from the one I posted. As such, it looks like you didn&#39;t put in the effort to research this problem before you posted (see <a href=\"http://idownvotedbecau.se/noresearch/\" rel=\"nofollow noreferrer\">idownvotedbecau.se/noresearch</a> for more info). I&#39;m always willing to change my vote if you can prove me wrong though! :)"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 9057048, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2ab6419bdfb6402040cb2a7eb1cdd2bc?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hussein", "link": "https://stackoverflow.com/users/9057048/adam-hussein"}, "edited": false, "score": 0, "creation_date": 1516227852, "post_id": 48310860, "comment_id": 83607771, "body": "@FrankS101 Can you explain why we made the value of setw(2)?"}, {"owner": {"reputation": 2024, "user_id": 1268696, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9vs4D.jpg?s=128&g=1", "display_name": "FrankS101", "link": "https://stackoverflow.com/users/1268696/franks101"}, "edited": false, "score": 0, "creation_date": 1516228101, "post_id": 48310860, "comment_id": 83607857, "body": "setw(n) sets the width parameter of the output stream exactly to n. If you provide something smaller to the output stream (like 1 or 0 in your example) it will be filled by default with spaces, but with setfill(&#39;0) is filled with 0s"}, {"owner": {"reputation": 509, "user_id": 9220448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5YtOb.jpg?s=128&g=1", "display_name": "mariusz_latarnik01", "link": "https://stackoverflow.com/users/9220448/mariusz-latarnik01"}, "edited": false, "score": 0, "creation_date": 1516233271, "post_id": 48310860, "comment_id": 83609546, "body": "it&#39;s still not working fine  for hour &gt; 99."}], "tags": [], "owner": {"reputation": 2024, "user_id": 1268696, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9vs4D.jpg?s=128&g=1", "display_name": "FrankS101", "link": "https://stackoverflow.com/users/1268696/franks101"}, "is_accepted": true, "score": 1, "last_activity_date": 1516227254, "last_edit_date": 1516227254, "creation_date": 1516227105, "answer_id": 48310860, "question_id": 48310746, "link": "https://stackoverflow.com/questions/48310746/converting-time-into-hours-minutes-and-seconds/48310860#48310860", "title": "Converting time into Hours, minutes, and seconds", "body": "<p>Include <code>&lt;iomanip&gt;</code> and use <code>std::setfill</code> and <code>std::setw</code> to define what character you want to use to fill and what is the width of the field to be printed.</p>\n\n<pre><code>std::cout &lt;&lt; std::setfill('0') &lt;&lt; std::setw(2) &lt;&lt; hour &lt;&lt; \":\"; \nstd::cout &lt;&lt; std::setfill('0') &lt;&lt; std::setw(2) &lt;&lt; min &lt;&lt; \":\" \nstd::cout &lt;&lt; std::setfill('0') &lt;&lt; std::setw(2) &lt;&lt; sec;\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 9057048, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2ab6419bdfb6402040cb2a7eb1cdd2bc?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hussein", "link": "https://stackoverflow.com/users/9057048/adam-hussein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5683, "favorite_count": 0, "closed_date": 1516729882, "accepted_answer_id": 48310860, "answer_count": 1, "score": -3, "last_activity_date": 1516227254, "creation_date": 1516226546, "question_id": 48310746, "link": "https://stackoverflow.com/questions/48310746/converting-time-into-hours-minutes-and-seconds", "closed_reason": "Duplicate", "title": "Converting time into Hours, minutes, and seconds", "body": "<p>I was writing a c++ program that converts time into: hours, minutes, and seconds. <br> \nWhat I need to do is to convert time into the form of: HH:MM:SS, anyways <br> here is my code: <br></p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n    long time, hour, min, sec;\n    cout&lt;&lt;\"Enter elapsed time: \";\n    cin&gt;&gt;time;\n    cout&lt;&lt;time;\n    hour = time/3600;\n    min = (time%3600) / 60;\n    sec = (time%3600) % 60;\n    cout&lt;&lt;\"\\nIn HH:MM:SS -&gt; \";\n    cout&lt;&lt;hour&lt;&lt;\":\"&lt;&lt;min&lt;&lt;\":\"&lt;&lt;sec;\n    return 0;\n}\n</code></pre>\n\n<p><br> When I enter time in example: 3600, it displays 1:0:0 unlike the form I'm looking forward, so I need it to be displayed as \"01:00:00\" in this form. What should I do?</p>\n"}, {"tags": ["c++", "variables", "struct", "initialization"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1516226601, "post_id": 48310726, "comment_id": 83607191, "body": "You need to pass your objects by reference: <a href=\"https://stackoverflow.com/questions/19827119/c-argument-passing-passed-by-reference\" title=\"c argument passing passed by reference\">stackoverflow.com/questions/19827119/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9231853, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-knw2rRxgaYc/AAAAAAAAAAI/AAAAAAAAABo/yrmhDryk7oU/photo.jpg?sz=128", "display_name": "Memo", "link": "https://stackoverflow.com/users/9231853/memo"}, "edited": false, "score": 0, "creation_date": 1516320766, "post_id": 48310957, "comment_id": 83650324, "body": "Thank you so much Mr Fox!! I put all the &amp; in the program and it wasn&#39;t doing anything. So that one function call was all I needed then."}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": false, "score": 0, "last_activity_date": 1516228121, "last_edit_date": 1516228121, "creation_date": 1516227645, "answer_id": 48310957, "question_id": 48310726, "link": "https://stackoverflow.com/questions/48310726/trouble-with-c-structure-variable-initializing/48310957#48310957", "title": "Trouble with C++ Structure Variable Initializing", "body": "<p>When you have a function prototype like this <code>void function(MonthlyBudget);</code> your variable is being passed by value. What this means is that a copy of your type is created and in the scope of the function you are editing a copy. It will be destroyed at the end of your function scope. </p>\n\n<p>What you need to do is <em>pass by reference</em> which will involve using the <code>&amp;</code> symbol like so:</p>\n\n<pre><code>void function(MonthlyBudget &amp;monthlyBudget)\n</code></pre>\n\n<p>A reference to the object will be used syntactically the same as the copy, but when you edit it you are editing the real object.</p>\n"}], "owner": {"reputation": 1, "user_id": 9231853, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-knw2rRxgaYc/AAAAAAAAAAI/AAAAAAAAABo/yrmhDryk7oU/photo.jpg?sz=128", "display_name": "Memo", "link": "https://stackoverflow.com/users/9231853/memo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516228121, "creation_date": 1516226465, "question_id": 48310726, "link": "https://stackoverflow.com/questions/48310726/trouble-with-c-structure-variable-initializing", "title": "Trouble with C++ Structure Variable Initializing", "body": "<p>I'm a little new to C++. I've been taking it for school reasons. I have been doing pretty good, up until Functions and classes were introduced. For some reason, every time I pass numbers through a class or function it always comes back as 0. No matter where I put numbers in the code, they always get kicked back to 0 in the end output. I have contacted my teacher she didn't offer any suggestions, I've more or less copied exactly form the book with no results. \n  I will include the full code and my output, I don't see anything wrong with the code myself, maybe I'm just missing something. </p>\n\n<p>It is showing that the two variables Budget1 and Budget2 are not initialized(Error Code C4700) but everything I am finding online for initialization is for variables that carry numbers. I did find this link,\n <a href=\"https://stackoverflow.com/questions/11516657/c-structure-initialization\">Structure Initialization</a>\n but when I tried this:</p>\n\n<pre><code>MonthlyBudget Budget1 =\n{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 };\nMonthlyBudget Budget2 =\n{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 };\n</code></pre>\n\n<p>It stilled showed the error that the variables were uninitialized. Any advice would be great, thanks! </p>\n\n<pre><code>/*\n  Display a proposed budget and actual money spent through the month\n  Compute totals in each area of the budget and display \n  if amounts spent were over or under budget.\n*/\n\n#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;windows.h&gt;\n\nusing namespace std;\n\nstruct  MonthlyBudget\n{\n     double House;      // Housing Expenses\n     double Utils;      // Utilities Expenses\n     double HouseExp;   // Houshold Expenses\n     double Trans;      // Transportation Expenses\n     double Food;       // Food Expenses\n     double Med;        // Medical Expenses\n     double Ins;        // Insurance Expenses\n     double Ent;        // Entertainment\n     double Cloth;      // Clothing Expenses\n     double Misc;       // Miscellanious Expenses\n};\n\nvoid placeCursor(HANDLE, int, int);         //function prototypes\nvoid displayPrompts(HANDLE);\nvoid getOriginalBudget(HANDLE, MonthlyBudget);\nvoid getActualBudget(HANDLE, MonthlyBudget);\nvoid displayTotals(HANDLE, MonthlyBudget, MonthlyBudget);\n\n\nint main()\n{\n    MonthlyBudget Budget1, Budget2;\n    cout &lt;&lt; fixed &lt;&lt; showpoint &lt;&lt; setprecision(2);\n\n    // Get the handle to standard output device (console)\n    HANDLE screen = GetStdHandle(STD_OUTPUT_HANDLE);\n\n    displayPrompts(screen);\n    getOriginalBudget(screen, Budget1);\n    getActualBudget(screen, Budget2);\n    displayTotals(screen, Budget1, Budget2);\n\n    return 0;\n}\n\n// Place Cursor\nvoid placeCursor(HANDLE screen, int row, int col)\n{\n    COORD position;  // holds a pair of x and y coords\n    position.Y = row;\n    position.X = col;\n    SetConsoleCursorPosition(screen, position);\n}\n\nvoid displayPrompts(HANDLE screen)\n{\n    placeCursor(screen, 3, 25);\n    cout &lt;&lt; \"******* Data Entry Form *******\" &lt;&lt; endl;\n    placeCursor(screen, 5, 25);\n    cout &lt;&lt; \"Housing: \" &lt;&lt; endl;\n    placeCursor(screen, 7, 25);\n    cout &lt;&lt; \"Utilities: \" &lt;&lt; endl;\n    placeCursor(screen, 9, 25);\n    cout &lt;&lt; \"Household Expesnse: \" &lt;&lt; endl;\n    placeCursor(screen, 11, 25);\n    cout &lt;&lt; \"Transportation: \" &lt;&lt; endl;\n    placeCursor(screen, 13, 25);\n    cout &lt;&lt; \"Food: \" &lt;&lt; endl;\n    placeCursor(screen, 15, 25);\n    cout &lt;&lt; \"Medical: \" &lt;&lt; endl;\n    placeCursor(screen, 17, 25);\n    cout &lt;&lt; \"Insurance: \" &lt;&lt; endl;\n    placeCursor(screen, 19, 25);\n    cout &lt;&lt; \"Entertainment: \" &lt;&lt; endl;\n    placeCursor(screen, 21, 25);\n    cout &lt;&lt; \"Clothing: \" &lt;&lt; endl;\n    placeCursor(screen, 23, 25);\n    cout &lt;&lt; \"Miscellaneous: \" &lt;&lt; endl;\n}\n// Get user input for original budget\nvoid getOriginalBudget(HANDLE screen, MonthlyBudget Budget1)\n{\n    placeCursor(screen, 5, 45);\n    cin &gt;&gt; Budget1.House;\n    placeCursor(screen, 7, 45);\n    cin &gt;&gt; Budget1.Utils;\n    placeCursor(screen, 9, 45);\n    cin &gt;&gt; Budget1.HouseExp;\n    placeCursor(screen, 11, 45);\n    cin &gt;&gt; Budget1.Trans;\n    placeCursor(screen, 13, 45);\n    cin &gt;&gt; Budget1.Food;\n    placeCursor(screen, 15, 45);\n    cin &gt;&gt; Budget1.Med;\n    placeCursor(screen, 17, 45);\n    cin &gt;&gt; Budget1.Ins;\n    placeCursor(screen, 19, 45);\n    cin &gt;&gt; Budget1.Ent;\n    placeCursor(screen, 21, 45);\n    cin &gt;&gt; Budget1.Cloth;\n    placeCursor(screen, 23, 45);\n    cin &gt;&gt; Budget1.Misc;\n}\n// Get final ammounts spent throughout the month\nvoid getActualBudget(HANDLE screen, MonthlyBudget Budget2)\n{\n    placeCursor(screen, 5, 55);\n    cin &gt;&gt; Budget2.House;\n    placeCursor(screen, 7, 55);\n    cin &gt;&gt; Budget2.Utils;\n    placeCursor(screen, 9, 55);\n    cin &gt;&gt; Budget2.HouseExp;\n    placeCursor(screen, 11, 55);\n    cin &gt;&gt; Budget2.Trans;\n    placeCursor(screen, 13, 55);\n    cin &gt;&gt; Budget2.Food;\n    placeCursor(screen, 15, 55);\n    cin &gt;&gt; Budget2.Med;\n    placeCursor(screen, 17, 55);\n    cin &gt;&gt; Budget2.Ins;\n    placeCursor(screen, 19, 55);\n    cin &gt;&gt; Budget2.Ent;\n    placeCursor(screen, 21, 55);\n    cin &gt;&gt; Budget2.Cloth;\n    placeCursor(screen, 23, 55);\n    cin &gt;&gt; Budget2.Misc;\n}\n// Display the difference in original budget and actual budget\nvoid displayTotals(HANDLE screen, MonthlyBudget Budget1, MonthlyBudget Budget2)\n{\n    placeCursor(screen, 28, 0);\n    cout &lt;&lt; \"Here is the differences between what you planned to spend and what you spent: \\n\";\n    cout &lt;&lt; \" Housing: $\" &lt;&lt; Budget1.House - Budget2.House &lt;&lt; endl;\n    cout &lt;&lt; \"Utilities: $\" &lt;&lt; Budget1.Utils - Budget2.Utils &lt;&lt; endl;\n    cout &lt;&lt; \"Household Expenses : $\" &lt;&lt; Budget1.HouseExp - Budget2.HouseExp &lt;&lt; endl;\n    cout &lt;&lt; \"Transportation: $\" &lt;&lt; Budget1.Trans - Budget2.Trans &lt;&lt; endl;\n    cout &lt;&lt; \"Food: $\" &lt;&lt; Budget1.Food - Budget2.Food &lt;&lt; endl;\n    cout &lt;&lt; \"Medical: $\" &lt;&lt; Budget1.Med - Budget2.Med &lt;&lt; endl;\n    cout &lt;&lt; \"Insurance: $\" &lt;&lt; Budget1.Ins - Budget2.Ins &lt;&lt; endl;\n    cout &lt;&lt; \"Entertainment: $\" &lt;&lt; Budget1.Ent - Budget2.Ent &lt;&lt; endl;\n    cout &lt;&lt; \"Clothing: $\" &lt;&lt; Budget1.Cloth - Budget2.Cloth &lt;&lt; endl;\n    cout &lt;&lt; \"Miscellaneous: $\" &lt;&lt; Budget1.Misc - Budget2.Misc &lt;&lt; endl;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/UrGwL.png\" rel=\"nofollow noreferrer\">Output_For_Code</a></p>\n"}, {"tags": ["c++", "arduino"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1516226615, "post_id": 48310713, "comment_id": 83607202, "body": "<code>timer[4]</code> is out of bounds."}, {"owner": {"reputation": 2967, "user_id": 8616205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3o2ct.png?s=128&g=1", "display_name": "frslm", "link": "https://stackoverflow.com/users/8616205/frslm"}, "edited": false, "score": 0, "creation_date": 1516226624, "post_id": 48310713, "comment_id": 83607208, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1056411/how-to-pass-variable-number-of-arguments-to-printf-sprintf\">How to pass variable number of arguments to printf/sprintf</a>"}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1516226901, "post_id": 48310713, "comment_id": 83607326, "body": "sprintf returns character count. You can move the pointer to buf accordingly and do the next value and so on. As long as you make sure the buffer is large enough. And add commas manually before second etc"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1516229476, "post_id": 48310713, "comment_id": 83608424, "body": "the arduino language is C++"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1516249606, "post_id": 48310713, "comment_id": 83613395, "body": "The question is tagged <code>c++</code>, but the code (and answers) are all in <code>c</code> instead. A <code>c++</code> solution would be to use a <code>std::ostringstream</code> to format the bytes in a loop."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1516228345, "post_id": 48310827, "comment_id": 83607944, "body": "Nice - avoiding <code>strcat()</code> which re-walks the string.  I also like to handle case when <code>nbytes == 0</code>, so recommend <code>char*       bp = buffer; *bp = &#39;\\0&#39;;</code>"}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1516228811, "post_id": 48310827, "comment_id": 83608146, "body": "@chux Perfect example of how bugs creep in. All looks good, comments mention getting the size right etc, but if you passes <code>nbytes = 0</code> the first time through <b>boom</b>. I guess the other obvious fix (left as an exercise to the reader) is null pointer check on the params."}], "tags": [], "owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "is_accepted": true, "score": 3, "last_activity_date": 1516228718, "last_edit_date": 1516228718, "creation_date": 1516226956, "answer_id": 48310827, "question_id": 48310713, "link": "https://stackoverflow.com/questions/48310713/array-of-bytes-into-a-string-of-comma-separated-int/48310827#48310827", "title": "Array of bytes into a string of comma separated int", "body": "<p>Here is the low tech way you could do it in normal C.</p>\n\n<pre><code>char* toString(byte* bytes, int nbytes)\n{\n    // Has to be static so it doesn't go out of scope at the end of the call.\n    // You could dynamically allocate memory based on nbytes.\n    // Size of 128 is arbitrary - pick something you know is big enough.\n    static char buffer[128];\n    char*       bp = buffer;\n    *bp = 0;  // means return will be valid even if nbytes is 0.\n    for(int i = 0; i &lt; nbytes; i++)\n    {\n        if (i &gt; 0) {\n            *bp = ','; bp++;\n        }\n        // sprintf can have errors, so probably want to check for a +ve\n        // result.\n        bp += sprintf(bp, \"%d\", bytes[i])\n    }\n    return buffer;\n} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 1, "last_activity_date": 1516227022, "creation_date": 1516227022, "answer_id": 48310846, "question_id": 48310713, "link": "https://stackoverflow.com/questions/48310713/array-of-bytes-into-a-string-of-comma-separated-int/48310846#48310846", "title": "Array of bytes into a string of comma separated int", "body": "<p>an implementation, assuming that <code>timer</code> is an array (else, size would have to be passed as a parameter) with the special handling of the comma.</p>\n\n<p>Basically, print the integer in a temp buffer, then concatenate to the final buffer. Pepper with commas where needed.</p>\n\n<p>The size of the output buffer isn't tested, mind.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;strings.h&gt;\n\ntypedef unsigned char byte;\n\nint main()\n{\n   byte timer[4] = {1,5,23,120};\n   int i;\n\n   char buf[30] = \"\";\n   int first_item = 1;\n\n   for (i=0;i&lt;sizeof(timer)/sizeof(timer[0]);i++)\n   {\n      char t[10];\n      if (!first_item)\n      {\n         strcat(buf,\",\");   \n      }\n      first_item = 0;\n\n      sprintf(t,\"%d\",timer[i]);\n      strcat(buf,t);\n    }\n\n   printf(buf);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 3478424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1de5f27f4c43a06aadf43de4f215c3fc?s=128&d=identicon&r=PG&f=1", "display_name": "zedragon", "link": "https://stackoverflow.com/users/3478424/zedragon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 447, "favorite_count": 0, "accepted_answer_id": 48310827, "answer_count": 2, "score": 2, "last_activity_date": 1516231674, "creation_date": 1516226417, "last_edit_date": 1516231674, "question_id": 48310713, "link": "https://stackoverflow.com/questions/48310713/array-of-bytes-into-a-string-of-comma-separated-int", "title": "Array of bytes into a string of comma separated int", "body": "<p>I have an Arduino that controls timers. The settings for timers are stored in byte arrays. I need to convert the arrays to strings to SET a string on an external Redis server.</p>\n\n<p>So, I have many arrays of bytes of different lengths that I need to convert to strings to pass as arguments to a function expecting <code>char[]</code>. I need the values to be separated by commas and terminated with '\\0'.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>byte timer[4] {1,5,23,120};\nbyte timer2[6] {0,0,0,0,0,0}\n</code></pre>\n\n<p>I have succeeded to do it manually for each array using <code>sprintf()</code> like this</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>char buf[30];\nfor (int i=0;i&lt;5;i++){ buf[i] = (int) timer[i];  }\n   sprintf(buf, \"%d,%d,%d,%d,%d\",timer[0],timer[1],timer[2],timer[3],timer[4]);\n</code></pre>\n\n<p>That gives me an output string <code>buf</code>: <code>1,5,23,120</code> \nBut I have to use a fixed number of 'placeholders' in <code>sprintf()</code>.</p>\n\n<p>I would like to come up with a function to which I could pass the name of the array (e.g. <code>timer[]</code>) and that would build a string, probably using a for loop of 'variable lengths' (depending of the particular array to to 'process') and many <code>strcat()</code> functions. I have tried a few ways to do this, none of them making sense to the compiler, nor to me!</p>\n\n<p>Which way should I go looking?</p>\n"}, {"tags": ["c++", "c", "memory", "malloc"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 7, "creation_date": 1516226387, "post_id": 48310692, "comment_id": 83607108, "body": "Are you using C or C++?  If it is the latter you shouldn&#39;t be using <code>malloc</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1516226473, "post_id": 48310692, "comment_id": 83607143, "body": "Yet another bug that would be fixed by not using <code>sizeof(type)</code> in malloc"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1516226509, "post_id": 48310692, "comment_id": 83607163, "body": "There must be dozens of duplicates of this question. Got a link @M.M?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1516226631, "post_id": 48310692, "comment_id": 83607216, "body": "<i>I was doing a simple code</i> -- It would be a lot more simpler if you used <code>std::string</code> and/or <code>std::vector</code> instead of raw pointers."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1516227743, "post_id": 48310692, "comment_id": 83607739, "body": "@PaulMcKenzie But the jury is still out on if this is <code>c++</code> or not. No indicators in the code unfortunately."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1516228549, "post_id": 48310692, "comment_id": 83608017, "body": "True enough. C with a redundant cast or C++ with obsolete reference material. But C++ is tagged, so C++ options should be considered."}], "answers": [{"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 3, "user_id": 7081781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bd0cb4731fde749347dfd9750a7af47?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Marinho", "link": "https://stackoverflow.com/users/7081781/rafael-marinho"}, "edited": false, "score": 1, "creation_date": 1516228736, "post_id": 48310719, "comment_id": 83608108, "body": "@RafaelMarinho, The argument to <code>sizeof</code> can be a type or an expression. When it is an expression, its type is used to come up with the size. When you use <code>*CM</code> as argument to <code>sizeof</code>, tit evaluates to expression of type <code>char*</code>, which is exactly what you need."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1516226789, "last_edit_date": 1516226789, "creation_date": 1516226441, "answer_id": 48310719, "question_id": 48310692, "link": "https://stackoverflow.com/questions/48310692/weird-issue-with-malloc/48310719#48310719", "title": "Weird issue with malloc", "body": "<p><code>malloc(sizeof(char)*lines)</code> allocates enough memory to hold <code>line</code> number of <code>char</code>s. You need enough memory to hold <code>line</code> number of <code>char*</code>s. Hence, you need to use <code>sizeof(char*)</code> instead of <code>sizeof(char)</code>.</p>\n\n<pre><code>CM = (char**)malloc(sizeof(char*)*lines);\nACM = (char**)malloc(sizeof(char*)*lines);\n</code></pre>\n\n<p>As a matter of good coding practice, use:</p>\n\n<pre><code>CM = (char**)malloc(sizeof(*CM)*lines);    // CM  -&gt; sizeof(*CM)\nACM = (char**)malloc(sizeof(*ACM)*lines);  // ACM -&gt; sizeof(*ACM)\n</code></pre>\n\n<p>That would prevent errors of the kind you ran into.</p>\n"}, {"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 0, "last_activity_date": 1516226457, "creation_date": 1516226457, "answer_id": 48310724, "question_id": 48310692, "link": "https://stackoverflow.com/questions/48310692/weird-issue-with-malloc/48310724#48310724", "title": "Weird issue with malloc", "body": "<p>In</p>\n\n<pre><code>ACM = (char**)malloc(sizeof(char)*lines);\n</code></pre>\n\n<p>You are allocating lines chars, not lines char*s</p>\n"}, {"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 0, "last_activity_date": 1516226641, "creation_date": 1516226641, "answer_id": 48310771, "question_id": 48310692, "link": "https://stackoverflow.com/questions/48310692/weird-issue-with-malloc/48310771#48310771", "title": "Weird issue with malloc", "body": "<p>With <code>char **CM = (char**)malloc(sizeof(char)*lines)</code> and <code>char **ACM = (char**)malloc(sizeof(char)*lines)</code>, you allocate a sequence of characters, though you should allocate a list of pointers.</p>\n\n<p>Write <code>char **CM = (char**)malloc(sizeof(char*)*lines)</code> and <code>char **ACM = (char**)malloc(sizeof(char*)*lines)</code> instead.</p>\n\n<p>As a general rule, the return type (<code>char**</code> in your case) usually has one more star than the type inside the <code>malloc</code>, i.e. (<code>char*</code> in your case).</p>\n\n<p>Note further, that in C you usually do not cast the result of malloc, whereas in C++ you have to cast. BTW: <code>malloc</code> is rarely used in C++.</p>\n"}], "owner": {"reputation": 3, "user_id": 7081781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bd0cb4731fde749347dfd9750a7af47?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Marinho", "link": "https://stackoverflow.com/users/7081781/rafael-marinho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 48310719, "answer_count": 3, "score": 0, "last_activity_date": 1516226789, "creation_date": 1516226307, "last_edit_date": 1516226560, "question_id": 48310692, "link": "https://stackoverflow.com/questions/48310692/weird-issue-with-malloc", "title": "Weird issue with malloc", "body": "<p>I was doing a simple code to open a file with a matrix but I got a weird error. Here's my code:</p>\n\n<pre><code>char** CM;\nchar** ACM;\nint lines, columns;\nint i, j;\n\n//read file\nFILE* file = fopen(\"matrix.txt\", \"r\");\nfscanf(file, \"%i %i\", &amp;lines, &amp;columns);\nCM = (char**)malloc(sizeof(char)*lines);\nACM = (char**)malloc(sizeof(char)*lines);\nfor(i=0; i&lt;lines; i++)\n{\n    CM[i] = (char*)malloc(sizeof(char)*columns+1);\n    ACM[i] = (char*)malloc(sizeof(char)*columns);\n    fscanf(file, \"%s\", CM[i]);\n    CM[i] = (char*)realloc(CM[i], sizeof(char)*columns);//don't need \\n\n    printf(\"%s\\n\", CM[i]);\n}\nprintf(\"\\n\");\nfor(i=0; i&lt;lines; i++)\n{\n    printf(\"%s\\n\", CM[i]);\n}\n</code></pre>\n\n<p>But it happens that the output is not what I expected:</p>\n\n<pre><code>00000\n01010\n01010\n01100\n00000\n\n\ufffd\ufffd6\n01010\n01010\n01100\n00000\n</code></pre>\n\n<p>If I comment <code>ACM[i] = (char*)malloc(sizeof(char)*columns);</code> it works with no no problem. I even used GDB to see what was going on and I got this :</p>\n\n<pre><code>23          ACM[i] = (char*)malloc(sizeof(char)*columns);\n2: CM[0][0] = 48 '0'\n3: CM[1][1] = 49 '1'\n4: i = 4\n(gdb) \n24          fscanf(file, \"%s\", CM[i]);\n2: CM[0][0] = -80 '\\260'\n3: CM[1][1] = 49 '1'\n4: i = 4\n</code></pre>\n\n<p>Please, could someone tell me what's going on with my code?</p>\n"}, {"tags": ["c++", "function", "pointers", "memory-address"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1516226154, "post_id": 48310589, "comment_id": 83607001, "body": "<code>cout&lt;&lt;(char*)dump-(char*)exec;</code>  in C, the <code>&lt;&lt;</code> operator does notaccept pointers as operands. Maybe you are using C++?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1516226315, "post_id": 48310589, "comment_id": 83607070, "body": "subtraction of pointers to two unrelated things is meaningless in C++"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1516226358, "post_id": 48310589, "comment_id": 83607093, "body": "Note that the compiler can put functions in any order in the output file; this subtraction might not give you the result you expect."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1516227931, "post_id": 48310589, "comment_id": 83607792, "body": "@wildplasser: <code>(char*)dump</code> is a pointer (if the cast is accepted). <code>(char*)dump-(char*)exec</code> is an integer of type <code>ptrdiff_t</code>. (BTW, the <code>&lt;&lt;</code> does accept pointers as operands. A character pointer is treated as a pointer to a string; other pointers are printed in some implementation-defined way, similar to C&#39;s <code>printf(&quot;%p&quot;, ptr)</code>)."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1516228029, "post_id": 48310589, "comment_id": 83607828, "body": "@KeithThompson  oops. You&#39;re right, of course."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1516229184, "post_id": 48310589, "comment_id": 83608297, "body": "In any case, the results you see are likely to have nothing to do with &quot;function size&quot;. In general case this method will not allow you to determine function size. Functions have no size. What you get is the distance between the entry points, which might not be correlated to the function size at all."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1516230487, "post_id": 48310589, "comment_id": 83608770, "body": "@AnT: Well, he&#39;s getting 53, which is quite plausibly the size in bytes of the generated code for the <code>exec</code> function. But the technique is horribly non-portable."}], "answers": [{"comments": [{"owner": {"reputation": 1025, "user_id": 3971417, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8de1f3c62ed8673871bcc6b770f5346c?s=128&d=identicon&r=PG&f=1", "display_name": "sergiu reznicencu", "link": "https://stackoverflow.com/users/3971417/sergiu-reznicencu"}, "edited": false, "score": 0, "creation_date": 1516226405, "post_id": 48310685, "comment_id": 83607117, "body": "Lets say there are 3 bytes. How would this translate to DWORD sized units?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 1025, "user_id": 3971417, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8de1f3c62ed8673871bcc6b770f5346c?s=128&d=identicon&r=PG&f=1", "display_name": "sergiu reznicencu", "link": "https://stackoverflow.com/users/3971417/sergiu-reznicencu"}, "edited": false, "score": 0, "creation_date": 1516226802, "post_id": 48310685, "comment_id": 83607292, "body": "@sergiureznicencu it is undefined behaviour if the two things being subtracted are not pointers to elements of the same array. And in an array of DWORD there can not be  2 elements separated by 3 bytes."}], "tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 1, "last_activity_date": 1516226284, "creation_date": 1516226284, "answer_id": 48310685, "question_id": 48310589, "link": "https://stackoverflow.com/questions/48310589/simple-function-size-understanding-pointer-pointer-difference/48310685#48310685", "title": "Simple function-size; Understanding pointer-pointer difference", "body": "<p>Pointer subtraction tells you the number of elements between the two addresses, so using DWORD * it will be in DWORD sized units.</p>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1516226772, "post_id": 48310757, "comment_id": 83607281, "body": "Not just the same type.  [expr.add]/6 states: <i>Unless both pointers point to elements of the same array object, or one past the last element of the array object, the behavior is undefined.</i>"}, {"owner": {"reputation": 26704, "user_id": 1202830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd22084046f375b15ff56ffae8237b0?s=128&d=identicon&r=PG", "display_name": "Michael Geary", "link": "https://stackoverflow.com/users/1202830/michael-geary"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1516226890, "post_id": 48310757, "comment_id": 83607322, "body": "Yup, I wrote it unclearly the first time; I was editing to fix that when you wrote your comment. Thanks for keeping me on my toes!"}], "tags": [], "owner": {"reputation": 26704, "user_id": 1202830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd22084046f375b15ff56ffae8237b0?s=128&d=identicon&r=PG", "display_name": "Michael Geary", "link": "https://stackoverflow.com/users/1202830/michael-geary"}, "is_accepted": true, "score": 3, "last_activity_date": 1516228320, "last_edit_date": 1516228320, "creation_date": 1516226588, "answer_id": 48310757, "question_id": 48310589, "link": "https://stackoverflow.com/questions/48310589/simple-function-size-understanding-pointer-pointer-difference/48310757#48310757", "title": "Simple function-size; Understanding pointer-pointer difference", "body": "<p>Pointer arithmetic in C/C++ is designed for accessing elements of an array. In fact, array indexing is merely a simpler syntax for pointer arithmetic. For example, if you have an array named <code>array</code>, <code>array[1]</code> is the same thing as <code>*(array+1)</code>, regardless of the data type of the elements in <code>array</code>.</p>\n\n<p>(I'm assuming here that no operator overloading is going on; that could change everything.)</p>\n\n<p>If you have a <code>char*</code> or <code>unsigned char*</code>, the pointer points to a single byte, and incrementing the pointer advances it to the next byte.</p>\n\n<p>In Windows, <code>DWORD</code> is a 32-bit value (four bytes), and <code>DWORD*</code> points to a 32-bit value. If you increment a <code>DWORD*</code>, the pointer is advanced by <em>four bytes</em>, just as <code>array[1]</code> gives you the second element of the array, which is four bytes (one <code>DWORD</code>) after the first element. Similarly, if you add 10 to a <code>DWORD*</code>, it advances 40 bytes, not 10 bytes.</p>\n\n<p>Either way, incrementing or adding to a pointer is only valid if the resulting pointer points into the same array as the original one, or one element past the end. Otherwise it is undefined behavior.</p>\n\n<p>Pointer subtraction works just like addition. When you subtract one pointer from another, they must be the same type, and must be pointers into the same array or one past the end.</p>\n\n<p>What you're doing is counting the number of elements between the two pointers, as if they were pointers into the same array (or one past the end). But when the two pointers <em>don't</em> point into the same array (or again, one past the end), the result is undefined behavior.</p>\n\n<p>Here is a reference from Carnegie Mellon University about this:</p>\n\n<p><a href=\"https://wiki.sei.cmu.edu/confluence/display/c/ARR36-C.+Do+not+subtract+or+compare+two+pointers+that+do+not+refer+to+the+same+array\" rel=\"nofollow noreferrer\">ARR36-C. Do not subtract or compare two pointers that do not refer to the same array - SEI CERT C Coding Standard</a></p>\n"}, {"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 0, "last_activity_date": 1516230393, "creation_date": 1516230393, "answer_id": 48311431, "question_id": 48310589, "link": "https://stackoverflow.com/questions/48310589/simple-function-size-understanding-pointer-pointer-difference/48311431#48311431", "title": "Simple function-size; Understanding pointer-pointer difference", "body": "<p>You have:</p>\n\n<pre><code>cout&lt;&lt;(char*)dump-(char*)exec;\n</code></pre>\n\n<p>where <code>dump</code> and <code>exec</code> are the names of functions. Each cast converts a function pointer to <code>char*</code>.</p>\n\n<p>I'm not sure about the status of such a conversion in C++. I think it either has undefined behavior or is illegal (making your program ill-formed). When I compile with g++ 4.8.4 with options <code>-pedantic -std=c++11</code>, it complains:</p>\n\n<pre><code>warning: ISO C++ forbids casting between pointer-to-function and pointer-to-object [-Wpedantic]\n</code></pre>\n\n<p>(There's a similar diagnostic for C, which I believe is not strictly correct, but that's another story.)</p>\n\n<p>There's no guarantee that there's any meaningful relationship between object pointers and function pointers.</p>\n\n<p>Apparently your compiler lets you get away with the casts, and presumably the result is a <code>char*</code> representation of the address of the function. Subtracting two pointers yields the distance between the two addresses <em>in units of the type the pointers point to</em>.  Subtracting two <code>char*</code> pointers yields a <code>ptrdiff_t</code> result that is the difference in bytes. Subtracting two <code>DWORD*</code> pointers yields the difference in unit of <code>sizeof (DWORD)</code> (probably 4 bytes?). That explains why you get different results. If two <code>DWORD</code> pointers don't point to addresses that aren't a whole number of <code>DWORD</code>s apart in memory, the results are unpredictable, but in your example getting 13 rather than 53 (truncating) is plausible.</p>\n\n<p><strong>However</strong>, pointer subtraction is defined only when both pointer operands point to elements of the same array object, or just past the end of it. For any other operands, the behavior is undefined.</p>\n\n<p>For an implementation that permits the casts, that uses the same representation for object pointers and for function pointers, and on which the value of a function pointer refers to a memory address in the same way that the value of an object pointer does, you can likely determine the size of a function by converting its address to <code>char*</code> and subtracting the result from the converted address of an adjacent function. But a compiler and/or linker is free to generate code for functions in any order it likes, including perhaps inserting code for other functions between two functions whose definitions are adjacent in your source code.</p>\n\n<p>If you want to determine the size in bytes, use pointers to byte-sized types such as <code>char</code>. And be aware that the method you're using is not portable and is not guaranteed to work.</p>\n\n<p>If you really need the size of a function, see if you can get your linker to generate some kind of map showing the allocated sizes and locations of your functions. There's no portable way to do it from within C++.</p>\n"}], "owner": {"reputation": 1025, "user_id": 3971417, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8de1f3c62ed8673871bcc6b770f5346c?s=128&d=identicon&r=PG&f=1", "display_name": "sergiu reznicencu", "link": "https://stackoverflow.com/users/3971417/sergiu-reznicencu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 48310757, "answer_count": 3, "score": 3, "last_activity_date": 1516230393, "creation_date": 1516225888, "last_edit_date": 1516226206, "question_id": 48310589, "link": "https://stackoverflow.com/questions/48310589/simple-function-size-understanding-pointer-pointer-difference", "title": "Simple function-size; Understanding pointer-pointer difference", "body": "<p>I'm testing some ways of calculating the size,in bytes of a function(I'm familiar with opcodes on x86). The code is quite self-explanatory:</p>\n\n<pre><code>void exec(void* addr){\n    int (WINAPI *msg)(HWND,LPCSTR,LPCSTR,UINT)=(int(WINAPI *)(HWND,LPCSTR,LPCSTR,UINT))addr;\n\n    msg(0,\"content\",\"title\",0);\n}\nvoid dump(){};\n\nint main()\n{\n\n    cout&lt;&lt;(char*)dump-(char*)exec;  // this is 53\n    return 0;\n}\n</code></pre>\n\n<p>It is supposed to substract the address of 'exec' from 'dump'. This works but I noticed the values differ when using other types of pointers like DWORD*:</p>\n\n<pre><code>void exec(void* addr){\n    int (WINAPI *msg)(HWND,LPCSTR,LPCSTR,UINT)=(int(WINAPI *)(HWND,LPCSTR,LPCSTR,UINT))addr;\n\n    msg(0,\"content\",\"title\",0);\n}\nvoid dump(){};\n\nint main()\n{\n    cout&lt;&lt;(DWORD*)dump-(DWORD*)exec;  // this is 13\n    return 0;\n}\n</code></pre>\n\n<p>From my understanding no matter the pointer type ,it is always the largest possible data type(so that it can handle large adresses),in my case of 4 bytes (x86 system). The only thing that changes between pointers is the data type it points to. </p>\n\n<p>What is the explanation?</p>\n"}, {"tags": ["c++", "qt", "qtstylesheets"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1516225647, "post_id": 48310299, "comment_id": 83606789, "body": "IMHO; Qt stylesheets suck donkeys kidneys. Don&#39;t waste time on them. They are not well implemented, they are not well maintained or supported. Just stay away from them."}, {"owner": {"reputation": 378, "user_id": 1475153, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcada15cba4bc01798681d10ef18dd3a?s=128&d=identicon&r=PG", "display_name": "Austin Witherow", "link": "https://stackoverflow.com/users/1475153/austin-witherow"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1516225809, "post_id": 48310299, "comment_id": 83606861, "body": "Great @JesperJuhl, can you give me some direction on the best way to do it? Is the QML font loader the recommended approach?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1516241430, "post_id": 48310299, "comment_id": 83611435, "body": "@AustinWitherow Where do you want to load the sources, from a .qrc, from a url?"}, {"owner": {"reputation": 378, "user_id": 1475153, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcada15cba4bc01798681d10ef18dd3a?s=128&d=identicon&r=PG", "display_name": "Austin Witherow", "link": "https://stackoverflow.com/users/1475153/austin-witherow"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1516296690, "post_id": 48310299, "comment_id": 83639665, "body": "@eyllanesc if you want to look, the current PR is here <a href=\"https://github.com/InterstellarHoldings/InterstellarHoldings/pull/3\" rel=\"nofollow noreferrer\">github.com/InterstellarHoldings/InterstellarHoldings/pull/3</a>  It is using .qrc in this project."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1516307872, "post_id": 48310299, "comment_id": 83645499, "body": "@AustinWitherow  I do not understand you, explain to me what you want to do."}, {"owner": {"reputation": 378, "user_id": 1475153, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcada15cba4bc01798681d10ef18dd3a?s=128&d=identicon&r=PG", "display_name": "Austin Witherow", "link": "https://stackoverflow.com/users/1475153/austin-witherow"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1516382573, "post_id": 48310299, "comment_id": 83678567, "body": "@eyllanesc in the .qss file I was assuming there would be something like (at)import or (at)fontfamily, but I used the FontLoader there. It did not work as expected (well of course, because it is not QML). I was wondering if there is an alternative INSIDE qss to load fonts? Because how I am doing it in the holdify.qss file is clearly not working. Is there something similar to what I am doing there that DOES work?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1516382736, "post_id": 48310299, "comment_id": 83678652, "body": "I could show the content or the location of holdify.qss, I can not find it, I also think that it has the ability to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 378, "user_id": 1475153, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcada15cba4bc01798681d10ef18dd3a?s=128&d=identicon&r=PG", "display_name": "Austin Witherow", "link": "https://stackoverflow.com/users/1475153/austin-witherow"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1517439213, "post_id": 48310299, "comment_id": 84101985, "body": "@eyllanesc sorry for the late response, got busy with some stuff :) I am updating with a sample."}], "owner": {"reputation": 378, "user_id": 1475153, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcada15cba4bc01798681d10ef18dd3a?s=128&d=identicon&r=PG", "display_name": "Austin Witherow", "link": "https://stackoverflow.com/users/1475153/austin-witherow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 626, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1537279734, "creation_date": 1516224588, "last_edit_date": 1537279734, "question_id": 48310299, "link": "https://stackoverflow.com/questions/48310299/load-fonts-into-qss-stylesheet-for-qt-applications", "title": "Load Fonts into .qss Stylesheet for Qt Applications", "body": "<p>I am using QSS to style my application written in C++.</p>\n\n<p>I would like to be able to load the fonts into the QSS stylesheet, but the documentation is very unclear how to do this. </p>\n\n<p>There is stuff about QML, but nothing about QSS.</p>\n\n<p><a href=\"https://doc.qt.io/qt-5/qml-qtquick-fontloader.html\" rel=\"nofollow noreferrer\">https://doc.qt.io/qt-5/qml-qtquick-fontloader.html</a></p>\n\n<p>Any ideas on how to load into the QSS?</p>\n\n<p>Does something like @import and @fontface from css exist?</p>\n\n<p>I improperly am using the QML imports as I had misread the documentation... But i was hoping something like this would work and the documents on the site are really not supportive of QSS at all.</p>\n\n<pre><code>FontLoader { id: QUANTICO; name: Quantico; source: \":/fonts/quantico\" }\nFontLoader { id: ROBOTO_LIGHT; name: Roboto-Light; source: \":/fonts/roboto_light\" }\nFontLoader { id: ROBOTO_REGULAR; name: Roboto-Regular; source: \":/fonts/roboto_regular\" }\n\nQWidget {\n    background: rgb(34,49,70);\n    font-family: Roboto-Light;\n}\n</code></pre>\n\n<p>I was hoping that this would work like @import in css, but apparently not. Is there anything I can do?</p>\n"}, {"tags": ["c++", "algorithm", "bit-manipulation"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1516224751, "post_id": 48310288, "comment_id": 83606403, "body": "<code>std::bitset</code> ?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1516224850, "post_id": 48310288, "comment_id": 83606438, "body": "Have you considered using <a href=\"http://en.cppreference.com/w/cpp/utility/bitset\" rel=\"nofollow noreferrer\"><code>std::bitset</code></a>? It has <a href=\"http://en.cppreference.com/w/cpp/utility/bitset/to_ullong\" rel=\"nofollow noreferrer\"><code>std::bitset::to_ullong()</code></a> to convert bits to an <code>unsigned long long</code> (an unsigned integer type with at least 64 bits)."}], "answers": [{"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 0, "last_activity_date": 1516225457, "creation_date": 1516225457, "answer_id": 48310493, "question_id": 48310288, "link": "https://stackoverflow.com/questions/48310288/copy-n-bits-from-8-bit-array-into-64-bit-integer/48310493#48310493", "title": "Copy n Bits from 8-bit Array into 64-bit Integer?", "body": "<p>I have the following</p>\n\n<pre><code>struct MyType\n{\nstd::array&lt;uint8_t, 892&gt; m_rguID;\n    uint16_t m_bitLength;\n\n\nvoid GetBits(uint16_t startBit, uint16_t nBits, uint64_t &amp; bits) const\n};\n\n\nvoid MyType::GetBits(uint16_t startBit, uint16_t nBits, uint64_t &amp; bits) const\n{\n    if(startBit + nBits &gt; m_bitLength)\n        throw std::runtime_error(\"Index is out of range\");\n    uint32_t num1 = startBit % 8U;\n    uint32_t num2 = 8U - num1;\n    uint32_t num3 = nBits &gt;= num2 ? num2 : nBits;\n    uint32_t num4 = startBit &gt;&gt; 3;\n    bits = (uint64_t)(((int64_t)((uint64_t)m_rguID[num4] &gt;&gt; (8 - num3 - num1)) &amp; (int64_t)((1 &lt;&lt; num3) - 1)) &lt;&lt; (nBits - num3));\n    uint32_t num5 = num4 + 1U;\n    int num6 = nBits - num3;\n    if(num6 &lt;= 0)\n        return;\n    int num7 = num6 - 8;\n    int num8 = 8 - num6;\n    do\n    {\n        if(num6 &gt;= 8)\n        {\n            bits |= (uint64_t)m_rguID[num5] &lt;&lt; num7;\n            ++num5;\n        }\n        else\n        {\n            bits |= (uint64_t)m_rguID[num5] &gt;&gt; num8;\n            ++num5;\n        }\n        num6 += -8;\n        num7 += -8;\n        num8 += 8;\n    } while(num6 &gt; 0);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 149, "user_id": 6278498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88ba2ff69221ff03cd3fe4c7ba535f75?s=128&d=identicon&r=PG&f=1", "display_name": "Sam G", "link": "https://stackoverflow.com/users/6278498/sam-g"}, "edited": false, "score": 0, "creation_date": 1516226151, "post_id": 48310500, "comment_id": 83606998, "body": "I tested this on the array {255, 0, 255} from position 2, with 15 bits, and got the value 111111 rather than 1111110000000"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 149, "user_id": 6278498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88ba2ff69221ff03cd3fe4c7ba535f75?s=128&d=identicon&r=PG&f=1", "display_name": "Sam G", "link": "https://stackoverflow.com/users/6278498/sam-g"}, "edited": false, "score": 0, "creation_date": 1516226181, "post_id": 48310500, "comment_id": 83607010, "body": "I probably messed with endianness, let me fix that"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 149, "user_id": 6278498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88ba2ff69221ff03cd3fe4c7ba535f75?s=128&d=identicon&r=PG&f=1", "display_name": "Sam G", "link": "https://stackoverflow.com/users/6278498/sam-g"}, "edited": false, "score": 0, "creation_date": 1516226822, "post_id": 48310500, "comment_id": 83607295, "body": "@SamG fixed, it was not simple to deduct order of bytes from your code"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 149, "user_id": 6278498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88ba2ff69221ff03cd3fe4c7ba535f75?s=128&d=identicon&r=PG&f=1", "display_name": "Sam G", "link": "https://stackoverflow.com/users/6278498/sam-g"}, "edited": false, "score": 0, "creation_date": 1516227381, "post_id": 48310500, "comment_id": 83607568, "body": "Though you need to do more testing, if you provide some test data I can add it to ideone"}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 2, "last_activity_date": 1516285666, "last_edit_date": 1516285666, "creation_date": 1516225491, "answer_id": 48310500, "question_id": 48310288, "link": "https://stackoverflow.com/questions/48310288/copy-n-bits-from-8-bit-array-into-64-bit-integer/48310500#48310500", "title": "Copy n Bits from 8-bit Array into 64-bit Integer?", "body": "<p>I think it is just simpler to copy all necessary bytes and then mask extra bits:</p>\n\n<pre><code>std::uint64_t key_reg(std::uint8_t* bytes, std::size_t n)\n{\n   std::uint64_t reg = 0;\n   std::reverse_copy( bytes, bytes + n / 8 + ( n % 8 != 0 ), \n                      reinterpret_cast&lt;char *&gt;( &amp;reg ) );\n   reg &gt;&gt;= n % 8;\n   reg &amp;= ~( -1UL &lt;&lt; n );\n   return reg;\n}\n</code></pre>\n\n<p>using <code>pos</code> would be little more complex:</p>\n\n<pre><code>std::uint64_t key_reg(std::uint8_t* bytes, std::size_t pos, std::size_t n)\n{\n   std::uint64_t reg = 0;\n   auto endpos = pos + n;\n   auto start = bytes + pos / 8;\n   auto end = bytes + endpos / 8 + ( endpos % 8 != 0 );\n   std::reverse_copy( start,  end, reinterpret_cast&lt;char *&gt;( &amp;reg ) );\n   reg &gt;&gt;= endpos % 8;\n   reg &amp;= ~( -1UL &lt;&lt; n );\n   return reg;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/MTodU3\" rel=\"nofollow noreferrer\">live example</a></p>\n"}, {"tags": [], "owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "is_accepted": true, "score": 0, "last_activity_date": 1516229209, "creation_date": 1516229209, "answer_id": 48311242, "question_id": 48310288, "link": "https://stackoverflow.com/questions/48310288/copy-n-bits-from-8-bit-array-into-64-bit-integer/48311242#48311242", "title": "Copy n Bits from 8-bit Array into 64-bit Integer?", "body": "<p>Your basic approach looks sound.  To handle bit offsets that aren't multiples of 8, you just need to first read in a single partial byte and then proceed with the rest:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>uint64_t key_reg(const uint8_t* bytes, size_t pos, size_t n) {\n    const uint8_t* ptr = bytes + pos / 8;\n    uint64_t result = 0;\n\n    if (pos % 8 &gt; 0) {\n        /* read the first partial byte, masking off unwanted bits */\n        result = *(ptr++) &amp; (0xFF &gt;&gt; (pos % 8));\n\n        if (n &lt;= 8 - pos % 8) {\n            /* we need no more bits; shift off any excess and return early */\n            return result &gt;&gt; (8 - pos % 8 - n);\n        } else {\n            /* reduce the requested bit count by the number we got from this byte */\n            n -= 8 - pos % 8;\n        }\n    }\n\n    /* read and shift in as many whole bytes as we need */\n    while (n &gt;= 8) {\n        result = (result &lt;&lt; 8) + *(ptr++);\n        n -= 8;\n    }\n\n    /* finally read and shift in the last partial byte */\n    if (n &gt; 0) {\n        result = (result &lt;&lt; n) + (*ptr &gt;&gt; (8-n));\n    }\n    return result;\n}\n</code></pre>\n\n<p><a href=\"https://tio.run/##lZVNj5swEIbv/IpRq60ggSwBNk1KkuNee2yltloRMIm1YKhtmqTV/vXSsTHka/dQDqORPfY8fmdsUm@bpu17ytKiyQgsKZPyWBMx2a2t06iQGa1wqG1wfhY9SXgmxydOtnZaMSFBDc@f5Ag2R0mEC4L@JhhUVyefOfDHAvyuVtSSw6pbB2O1Au5hHuvIIRknoikkhvmxpWdoDrYKvYM5rMHvt1bf/QjDkwzkjkBOOaaqEy5pUugcLpSJeKZsC1WeQ8P2CZMkgw2VAkb3wyZDwpGNfOOxAx/A9g@Pj7BeD5kdx9D0RAyWKwTyoA84wzJoewKMYEJWQVlxohPHIHY0l5ooYUcgh5QIgW6GHLLhDEjCi@M5X8eo5wyq4jpLjR5z4iH@BUghyC0OJ1mTEq0VJz8bIowYWKSGSVRMT7Gm3BCu2LeVhJxXJQ5ToQW9pmLgXWhwxmB11jqvkjpkd3rKIBFYHRRgv6sKYloCx3rNTKb9juIsir1eXUo8FM023nKpAsZDEU8sHWV8RZRTlhQo9C2ZUqFIrnqpB@pKf9WGr8EwBWOPVMfrcnnMcXqGm4rG1kt7cVVg0@TffuCOXRL/EE5dtJG2Dwtlg5n2Q23nyi4@ahu6Zk2g5@aRsrNAW@2H3bi2QbfmwXqJtSxlWbpQ08lkok5sIQ2WCUWxf1U068@McVguCdNPnXw@yAqmD8DoZlOoOuYSWwivXl3r28eImepVzCsOttq7IEzfdO0sYRZ13ngF0bnANcfg3H7nH@6Kr9/ZO3d4klAnF/BUuOqk7wVkYCBnkekyIVVdkSuRA3FgTnDNpxpbNY92Oj7l/Seffhpn0RuAoQEUyFR0r8QFo7qiWuEweIPP7/nCQHvqDbuFQzR4lWx62Zl9PJ7DUY35N82LZCta7wtemNbD38MqXSxaryYZPqg0bb3PwT8\" rel=\"nofollow noreferrer\" title=\"C (gcc) \u2013 Try It Online\">Here's an online demo</a> with a simple test harness, demonstrating that this code indeed works correctly in all the edge cases I could find, such as reading a full 64 bits starting from the middle of a byte or reading only part of a single byte (which is actually a non-trivial special case, handled in a separate branch with its own <code>return</code> statement in the code above).</p>\n\n<p>(Note that I wrote the code above in plain C since, like your original code, it doesn't really make use of any C++ specific features.  Feel free to \"C++ify\" it by adding <code>std::</code> where appropriate.)</p>\n\n<p>One feature that the test harness doesn't check, but which I believe this code should possess, is that it never reads more bytes from the input array than necessary.  In particular, the <code>bytes</code> array is not accessed at all if <code>n == 0</code> (although a pointer to <code>pos / 8</code> bytes after the start of the array is still calculated).</p>\n"}], "owner": {"reputation": 149, "user_id": 6278498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88ba2ff69221ff03cd3fe4c7ba535f75?s=128&d=identicon&r=PG&f=1", "display_name": "Sam G", "link": "https://stackoverflow.com/users/6278498/sam-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1226, "favorite_count": 0, "accepted_answer_id": 48311242, "answer_count": 3, "score": 1, "last_activity_date": 1516285666, "creation_date": 1516224529, "last_edit_date": 1516226181, "question_id": 48310288, "link": "https://stackoverflow.com/questions/48310288/copy-n-bits-from-8-bit-array-into-64-bit-integer", "title": "Copy n Bits from 8-bit Array into 64-bit Integer?", "body": "<p>I am trying to copy n bits from any position of an array of uint8_ts into a single 64 bit integer. Here is a working solution that can copy an arbitrary amount of bits into a 64 bit integer starting at the beginning of the array, but I want to be able to start at any position of the array. </p>\n\n<p>For example I might want to copy bits 2 through 11 of the array:\n{7, 128, 7}</p>\n\n<p>In binary that would be:\n00000111 1000000 00000111</p>\n\n<p>And I want an integer with value:\n0001111000</p>\n\n<pre><code>std::uint64_t key_reg(std::uint8_t* bytes, std::size_t n)\n{\n  std::uint64_t reg = 0;\n  // The amount of bits that fit into an entire element of an array\n  // ex, if I'm copying 17 bits, even_bytes == 2\n  std::size_t even_bytes = (n - (n % 8)) / 8;\n  // what's left over after the even bytes\n  // in this case, remainder == 1\n  std::size_t remainder = n - even_bytes * 8;\n\n  // copy each byte into the integer\n  for(std::size_t i = 0; i &lt; even_bytes; ++i)\n    if(remainder)\n      reg |= (std::uint64_t)bytes[i] &lt;&lt; (8 * (even_bytes - i));\n    else\n      reg |= (std::uint64_t)bytes[i] &lt;&lt; (8 * (even_bytes - i - 1));\n\n  // if there is an uneven number of bits, copy them in\n  if(remainder) \n    reg |= (std::uint64_t)bytes[even_bytes];\n\n  return reg;\n}\n</code></pre>\n\n<p>Do you have any idea how to implement</p>\n\n<pre><code>std::uint64_t key_reg(std::uint8_t* bytes, std::size_t pos, std::size_t n);\n</code></pre>\n\n<p>I didn't think anyone would answer so fast, so here was a solution I came up with in the same style. I found this bitfieldmask function on stackoverflow, but I'm unable to find the question to credit the author.</p>\n\n<pre><code>template&lt;typename R&gt;\nstatic constexpr R bitfieldmask(unsigned int const a, unsigned int const b)\n{\n  return ((static_cast&lt;R&gt;(-1) &gt;&gt; (((sizeof(R) * CHAR_BIT) - 1) - (b)))\n      &amp; ~((1 &lt;&lt; (a)) - 1));  \n}\n\nstd::uint64_t key_reg(std::uint8_t* bytes, std::size_t pos, std::size_t n)\n{\n  std::uint64_t reg = 0;\n  std::size_t starting_byte = (pos &lt; 8) ? 0 : ((pos - (pos % 8)) / 8);\n  std::size_t even_bytes = (n - (n % 8)) / 8;\n  std::size_t remainder = n - even_bytes * 8;\n\n  for(std::size_t i = 0; i &lt; even_bytes; ++i)\n    if(remainder)\n      reg |= (std::uint64_t)bytes[starting_byte + i] &lt;&lt; (8 * (even_bytes - i));\n    else\n      reg |= (std::uint64_t)bytes[starting_byte + i] &lt;&lt; (8 * (even_bytes - i - 1));\n\n  if(remainder) \n    reg |= (std::uint64_t)bytes[even_bytes];\n\n  // mask out anything before the first bit\n  if(pos % 8 != 0) {\n    std::size_t a = n - pos;\n    std::size_t b = n;\n    auto mask = bitfieldmask&lt;std::uint64_t&gt;(a, b);\n\n    reg = (reg &amp; ~mask);\n  }\n\n  return reg;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2017", "createprocess"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1516228505, "post_id": 48310287, "comment_id": 83607995, "body": "Suggestion: If no error <code>putc</code> returns the value written; if there is an error it returns <code>EOF</code>. You could test the return value and report the error number if it happens. see: return value here: <a href=\"https://msdn.microsoft.com/en-us/library/0c8e91sd.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/0c8e91sd.aspx</a>"}, {"owner": {"reputation": 11, "user_id": 9114045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4b3deeaf7b2fbfb9d671de87c92a05c?s=128&d=identicon&r=PG&f=1", "display_name": "D. Young", "link": "https://stackoverflow.com/users/9114045/d-young"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1516290876, "post_id": 48310287, "comment_id": 83636002, "body": "Well I&#39;m more than a little embarrassed that it didn&#39;t occur to me to check the return codes, so it&#39;s with mixed emotions that I report it all seems to work.  That is, every call to puts/fputs/putc/etc returns the values one would expect if they were successful.  Also, after each call, ferror(stdout) returns false. It seems &quot;Program 2&quot; thinks all its writes are successful. :("}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9114045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4b3deeaf7b2fbfb9d671de87c92a05c?s=128&d=identicon&r=PG&f=1", "display_name": "D. Young", "link": "https://stackoverflow.com/users/9114045/d-young"}, "edited": false, "score": 0, "creation_date": 1516290978, "post_id": 48310359, "comment_id": 83636095, "body": "Thanks for the tip.  I went through each and every property on the &quot;Properties page&quot; (both project settings and user settings).  Except the properties in 2017 that did not exist in 2010, all are the same."}], "tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 0, "last_activity_date": 1516224856, "creation_date": 1516224856, "answer_id": 48310359, "question_id": 48310287, "link": "https://stackoverflow.com/questions/48310287/what-changed-in-visual-studio-2017-regarding-pipes-and-child-processes/48310359#48310359", "title": "What changed in Visual Studio 2017 regarding pipes and child processes", "body": "<p>Check your project settings, in particular the debug page and make sure that the command line and working directory are set as you expect. That page is all user settings (meaning they won't move with a project).</p>\n\n<p>I'm not even sure that VS will import that page if you were to open the solution from the same directory in an updated version of VS (say a vs2010 project in vs2017).</p>\n"}], "owner": {"reputation": 11, "user_id": 9114045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4b3deeaf7b2fbfb9d671de87c92a05c?s=128&d=identicon&r=PG&f=1", "display_name": "D. Young", "link": "https://stackoverflow.com/users/9114045/d-young"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 301, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1516225736, "creation_date": 1516224524, "last_edit_date": 1516225736, "question_id": 48310287, "link": "https://stackoverflow.com/questions/48310287/what-changed-in-visual-studio-2017-regarding-pipes-and-child-processes", "title": "What changed in Visual Studio 2017 regarding pipes and child processes", "body": "<p>I've got a program that worked fine when compiled with Visual Studio 2010, but now that I'm using Visual Studio 2017 fgets/fputs don't seem to work correctly.\n(Yea I know how that sounds and I'm sure the problem is me, <strong>not</strong> Visual Studio...)</p>\n\n<p>It's a Visual Studio solution with 3 projects, all Visual C++ command line apps.</p>\n\n<p>Program 1 launches Program 2 and Program 3, using pipes to send stdout of Program 2 to stdin of Program 3.\nThusly</p>\n\n<pre><code>lastPipe = GetStdHandle(STD_INPUT_HANDLE);\n/* Duplicate stdin to input_desc */\nDuplicateHandle(thisProcessId, lastPipe, thisProcessId, &amp;input_desc2, 0, FALSE, DUPLICATE_SAME_ACCESS);\n\nsa_first.nLength = sizeof(sa_first);\nsa_first.lpSecurityDescriptor = NULL;\nsa_first.bInheritHandle = TRUE;\nCreatePipe(&amp;readPipe2, &amp;out_desc2, &amp;sa, 16384);\n\n/* Duplicate the input_desc handle so it can be closed */\nDuplicateHandle(thisProcessId, readPipe2, thisProcessId, &amp;lastPipe, 0, FALSE, DUPLICATE_SAME_ACCESS);\nCloseHandle(readPipe2);\n\nmemset(&amp;si2,0,sizeof(si2));\nsi2.cb = sizeof(si2);\nsi2.dwFlags = STARTF_USESTDHANDLES;\nsi2.hStdInput = input_desc2;\nsi2.hStdOutput = out_desc2;\nsi2.hStdError = GetStdHandle(STD_ERROR_HANDLE);\n\nCreateProcess(NULL, \"program 2.exe\", NULL,NULL,TRUE,0,NULL,NULL,&amp;si2,&amp;pi2);\n\n// Send Program 2 stdout to Program 3 stdin\nDuplicateHandle(cpid, lastPipe, cpid, &amp;input_desc3, 0, TRUE, DUPLICATE_SAME_ACCESS));\nCloseHandle(lastPipe);\n\nout_desc3 = GetStdHandle(STD_OUTPUT_HANDLE);\n\nmemset(&amp;si3,0,sizeof(si3));\nsi3.cb = sizeof(si3);\nsi3.dwFlags = STARTF_USESTDHANDLES;\nsi3.hStdInput = input_desc3;\nsi3.hStdOutput = out_desc3;\nsi3.hStdError = GetStdHandle(STD_ERROR_HANDLE);\n\nCreateProcess(NULL, \"program 3.exe\", NULL,NULL,TRUE,0,NULL,NULL,&amp;si3,&amp;pi3);\n</code></pre>\n\n<p>(Error checking removed for brevity)</p>\n\n<p>Now for the juicy bit.  Program 2 has this:</p>\n\n<pre><code>// Program 2\nfputs(\"Hello world\", stdout);\nputc('\\n', stdout);\nfputs(\"This should be line 2\", stdout);\nputc('\\n', stdout);\n</code></pre>\n\n<p>Lastly, Program 3 has this:</p>\n\n<pre><code>// Program 3\nchar buffer[1024];\nretval = fgets(buffer, 500, stdin);\nfprintf(stderr, \"|%s|\", buffer);\n</code></pre>\n\n<p>When compiled with Visual Studio 2017, the output from Program 3 is</p>\n\n<pre><code>|Hello worldThis should be line 2\\n|\n</code></pre>\n\n<p>(Note the lack of newline between \"world\" and \"This\", even though it's part of stdout from Program 2)</p>\n\n<p>It does not happen every time, only after a few hundred (or thousand) calls to the fputs/putc functions.</p>\n\n<p>This works without incident when compiled with Visual Studio 2010.</p>\n\n<p>I've read (and re-read, and re-read again) the VS change log (<a href=\"https://docs.microsoft.com/en-us/cpp/porting/visual-cpp-change-history-2003-2015\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/cpp/porting/visual-cpp-change-history-2003-2015</a>), though nothing in there seems related to CreatePipe, CreateProcess, fputs/putc/fgets...</p>\n\n<p>I also came across this:\n<a href=\"https://www.daniweb.com/programming/software-development/threads/502037/redirect-stdout-to-a-pipe-with-visual-studio-2015\" rel=\"nofollow noreferrer\">https://www.daniweb.com/programming/software-development/threads/502037/redirect-stdout-to-a-pipe-with-visual-studio-2015</a>\nSadly, \"I only use posix calls\" wasn't as illuminating/explicit as I seem to need.</p>\n\n<p>I've changed it to</p>\n\n<pre><code>fputs(\"Hello world\\nThis should be line 2\\n\");\nfflush(stdout);\n</code></pre>\n\n<p>And then</p>\n\n<pre><code>fputs(\"Hello world\\r\\nThis should be line 2\\r\\n\");\nfflush(stdout);\n</code></pre>\n\n<p>Neither of which worked.</p>\n\n<p>I tried opening a command prompt and doing</p>\n\n<pre><code>\"Program 2\" &gt; temp.txt\n\"Program 3\" &lt; temp.txt\n</code></pre>\n\n<p>That does work, though it's not an acceptable solution (our users will not stand for such a thing)</p>\n\n<p>What do I need to change to get this to behave as it did in VS 2010?</p>\n\n<p>Thanks very much!</p>\n"}, {"tags": ["c++", "resize", "collision", "sfml", "scaling"], "comments": [{"owner": {"reputation": 1835, "user_id": 3195314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BiMED.png?s=128&g=1", "display_name": "alseether", "link": "https://stackoverflow.com/users/3195314/alseether"}, "edited": false, "score": 0, "creation_date": 1516262676, "post_id": 48310159, "comment_id": 83618193, "body": "Not related, but you shouldn&#39;t use public attributes. It can lead into inconsistencies. Would be preferable to have a <code>setRect</code> method, or even better, <code>setPosition</code> and <code>setSize</code> methods inside <code>Player</code>. BTW, <code>sf::RectangleShape</code> has methods to obtain its bounds, like <a href=\"https://www.sfml-dev.org/documentation/2.4.2/classsf_1_1Shape.php#a5257341fe832884dbba6b9dc855e33cc\" rel=\"nofollow noreferrer\"><code>getGlobalBounds()</code></a> which returns a <a href=\"https://www.sfml-dev.org/documentation/2.4.2/classsf_1_1Rect.php\" rel=\"nofollow noreferrer\"><code>sf::FloatRect</code></a> that has a <code>contains</code> an <code>intersect</code> methods. You&#39;ll find them useful fo sure."}, {"owner": {"reputation": 85, "user_id": 9231799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a668b9d25e88b9cc169b9c6c9baf0134?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Bjergert", "link": "https://stackoverflow.com/users/9231799/peter-bjergert"}, "reply_to_user": {"reputation": 1835, "user_id": 3195314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BiMED.png?s=128&g=1", "display_name": "alseether", "link": "https://stackoverflow.com/users/3195314/alseether"}, "edited": false, "score": 0, "creation_date": 1516287985, "post_id": 48310159, "comment_id": 83633977, "body": "Thanks :) ill try to implement ur tips"}, {"owner": {"reputation": 737, "user_id": 3465437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JZdag.jpg?s=128&g=1", "display_name": "smoothware", "link": "https://stackoverflow.com/users/3465437/smoothware"}, "edited": false, "score": 0, "creation_date": 1516414033, "post_id": 48310159, "comment_id": 83690600, "body": "Collision for bounding boxes is included in SFML. Something like rect.getGlobalBounds().intersects(rect2.getGlobalBounds())"}], "owner": {"reputation": 85, "user_id": 9231799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a668b9d25e88b9cc169b9c6c9baf0134?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Bjergert", "link": "https://stackoverflow.com/users/9231799/peter-bjergert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1516360020, "creation_date": 1516223984, "last_edit_date": 1516360020, "question_id": 48310159, "link": "https://stackoverflow.com/questions/48310159/collision-is-not-working-when-resized", "title": "Collision is not working when resized", "body": "<p>It seems that when I resize the collision object the left, right, bottom, top is wrong and is pushed or something. But the drawn object is a little bit away from the \"bounding box\"</p>\n\n<p>Well I have researched collision and implementation for a few days now, I have improved but, still got those annoying problems.</p>\n\n<p>How would I be able to fix this?</p>\n\n<p>Detailed explanations will help me more, and if you can please tell me why it's behaving like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;SFML/Graphics.hpp&gt;\n\nclass Player{\n    public:\n        sf::RectangleShape rect;\n        unsigned int bottom, left, right, top;\n\n        Player(sf::Vector2f position, sf::Color color){\n            rect.setPosition(position);\n            rect.setFillColor(color);\n        }\n\n        void update(){\n            bottom = rect.getPosition().y + rect.getSize().y;\n            left = rect.getPosition().x;\n            right = rect.getPosition().x + rect.getSize().x;\n            top = rect.getPosition().y;    \n        }\n\n        bool collision(Player p){\n            if(right &lt; p.left || left &gt; p.right || top &gt; p.bottom || bottom &lt; p.top)\n                return false;\n\n            return true;\n        }\n};\n\nint main()\n{\n    sf::RenderWindow window(sf::VideoMode(800.0f, 1000.0f), \"Collision\", sf::Style::Default);\n    window.setFramerateLimit(60);\n\n    Player p1(sf::Vector2f(400.0f, 500.0f), sf::Color::Green),\n           p2(sf::Vector2f(400.0f, 380.0f), sf::Color::Red);\n\n    while(window.isOpen()){\n        system(\"clear\");\n        sf::Event evnt;\n        while(window.pollEvent(evnt)){\n            if(evnt.type == sf::Event::Closed)\n                window.close();\n        }\n        if(sf::Keyboard::isKeyPressed(sf::Keyboard::D))\n            p1.rect.move(sf::Vector2f(4.5f, 0.0f));\n\n        if(sf::Keyboard::isKeyPressed(sf::Keyboard::A))\n            p1.rect.move(sf::Vector2f(-4.5f, 0.0f));\n\n        if(sf::Keyboard::isKeyPressed(sf::Keyboard::W))\n            p1.rect.move(sf::Vector2f(0.0f, -4.5f));\n\n        if(sf::Keyboard::isKeyPressed(sf::Keyboard::S))\n            p1.rect.move(sf::Vector2f(0.0f, 4.5f));\n\n        p1.update();\n        p2.update();\n\n        std::cout &lt;&lt; -(p2.right % p1.left - p2.right) &lt;&lt; std::endl;\n\n        p1.rect.setSize(sf::Vector2f(100.0f, 100.0f));\n        p2.rect.setSize(sf::Vector2f(100.0f, 100.0f));\n\n        p1.rect.setOrigin(sf::Vector2f(p1.rect.getSize().x / 2.0f, p1.rect.getSize().y / 2.0f));\n        p2.rect.setOrigin(sf::Vector2f(p2.rect.getSize().x / 2.0f, p2.rect.getSize().y / 2.0f));\n\n        sf::Vector2f T = p2.rect.getPosition() - p1.rect.getPosition();\n\n        float penx = (p1.rect.getSize().x / 2.0f) + (p2.rect.getSize().x / 2.0f) - abs(T.x);\n\n        float peny = (p1.rect.getSize().y / 2.0f) + (p2.rect.getSize().y / 2.0f) - abs(T.y);\n\n        std::cout &lt;&lt; \"penetration is \" &lt;&lt; penx &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"penetration is \" &lt;&lt; peny &lt;&lt; std::endl;\n\n        //if(abs(T.x) &gt; (p1.rect.getSize().x / 2) + (p2.rect.getSize().x / 2) &amp;&amp; abs(T.y) &gt; (p1.rect.getSize().y / 2) + (p2.rect.getSize().y / 2)){\n        if(p1.collision(p2)){\n            std::cout &lt;&lt; \"collided\" &lt;&lt; std::endl;\n\n            if(peny &lt;= penx){\n                if(T.y &lt; 0.0f)\n                    p1.rect.setPosition(sf::Vector2f(p1.rect.getPosition().x, p1.top += peny));\n                if(T.y &gt; 0.0f)\n                    p1.rect.setPosition(sf::Vector2f(p1.rect.getPosition().x, p1.top -= peny));\n            }\n            else{\n                if(T.x &lt; 0.0f){\n                    p1.rect.setPosition(sf::Vector2f(p1.left += penx, p1.rect.getPosition().y));\n                }\n                if(T.x &gt; 0.0f)\n                    p1.rect.setPosition(sf::Vector2f(p1.left -= penx, p1.rect.getPosition().y));\n                }\n            }\n\n        std::cout &lt;&lt; p2.rect.getSize().x &lt;&lt; std::endl;\n        std::cout &lt;&lt; p2.rect.getSize().y &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"botot, \" &lt;&lt; -(p2.bottom % p1.top - p2.bottom) &lt;&lt; std::endl;\n\n        window.clear(sf::Color::Black);\n        window.draw(p1.rect);\n        window.draw(p2.rect);\n        window.display();\n\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "input", "keyboard", "mouse", "sfml"], "comments": [{"owner": {"reputation": 2490, "user_id": 3187621, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/iFIdA.jpg?s=128&g=1", "display_name": "NaCl", "link": "https://stackoverflow.com/users/3187621/nacl"}, "edited": false, "score": 0, "creation_date": 1516222502, "post_id": 48309785, "comment_id": 83605352, "body": "<i>Why</i> do you want to handle input in your entityies <code>Update()</code> function?"}, {"owner": {"reputation": 49, "user_id": 5959401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d20a67030256b8db95c0f3ff39faed8c?s=128&d=identicon&r=PG", "display_name": "wappa", "link": "https://stackoverflow.com/users/5959401/wappa"}, "reply_to_user": {"reputation": 2490, "user_id": 3187621, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/iFIdA.jpg?s=128&g=1", "display_name": "NaCl", "link": "https://stackoverflow.com/users/3187621/nacl"}, "edited": false, "score": 0, "creation_date": 1516222898, "post_id": 48309785, "comment_id": 83605544, "body": "@NaCl Maybe I didn&#39;t express myself correctly, what I mean is so that I can just say if(KeyboardCheckPressed(sf::Keyboard::aKey))//do something, inside of any object that inherits from the base Entity class."}, {"owner": {"reputation": 2490, "user_id": 3187621, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/iFIdA.jpg?s=128&g=1", "display_name": "NaCl", "link": "https://stackoverflow.com/users/3187621/nacl"}, "edited": false, "score": 2, "creation_date": 1516223076, "post_id": 48309785, "comment_id": 83605638, "body": "write a wrapper class containing a bunch of booleans that get updated exactly when you want them to be updated"}], "answers": [{"tags": [], "owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "is_accepted": false, "score": 1, "last_activity_date": 1516225730, "creation_date": 1516225730, "answer_id": 48310555, "question_id": 48309785, "link": "https://stackoverflow.com/questions/48309785/detecting-if-a-key-was-pressed-not-if-it-is-always-down/48310555#48310555", "title": "Detecting if a key was pressed, not if it is always down", "body": "<p>In general, if you have a thing which you can check the current state of, and you want to check if that state changed between frames, you simply use a variable, declared outside the application loop, to store the previous state, and compare it to the current state.</p>\n\n<pre><code>bool previousState = checkState();\nwhile (true) {\n    // your main application loop\n\n    bool newState = checkState();\n    if (newState == true &amp;&amp; previousState == false) {\n        doThingy(\"the thing went from false to true\");\n    } else if (newState == false &amp;&amp; previousState == true) {\n        doThingy(\"the thing went from true to false\");\n    } else {\n        doThingy(\"no change in the thing\");\n    }\n\n    // this is done unconditionally every frame\n    previousState = newState;\n}\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 5959401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d20a67030256b8db95c0f3ff39faed8c?s=128&d=identicon&r=PG", "display_name": "wappa", "link": "https://stackoverflow.com/users/5959401/wappa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516362351, "creation_date": 1516222284, "last_edit_date": 1516362351, "question_id": 48309785, "link": "https://stackoverflow.com/questions/48309785/detecting-if-a-key-was-pressed-not-if-it-is-always-down", "title": "Detecting if a key was pressed, not if it is always down", "body": "<p>I'm new to SFML and I have trouble finding a solution to checking if a key is pressed during one frame. The problem I've been facing is the fact that with the <code>Keyboard</code> and <code>Mouse</code> classes, it seems impossible to use a system where one first checks for the current input state before any <code>Update()</code> call of objects and then after all <code>Update()</code> you get a previous input state for the next frame so that one can do the following: </p>\n\n<pre><code>    bool Entity::KeyboardCheckPressed(sf::Keyboard::Key aKey)\n    {\n        //this part doesn't work \n        if (KeyboardState-&gt;isKeyPressed(aKey) and !PreviousKeyboardState-&gt;isKeyPressed(aKey))\n        {\n            return true;\n        }\n        return false;\n    }\n</code></pre>\n\n<p>But this doesn't seem to work with SFML, and other sources tell me that I'm suppose to use the <code>Event</code> class with its <code>type</code> and <code>key.code</code>like the following example: </p>\n\n<pre><code>bool Entity::KeyboardCheckPressed(sf::Keyboard::Key aKey)\n{\n    if (Event-&gt;type == sf::Event::KeyPressed)\n    {\n        if (Event-&gt;key.code == aKey)\n        {\n            return true;\n        }\n    }\n    return false;\n\n}\n</code></pre>\n\n<p>But this results in the <code>sf::Event::KeyPressed</code> doing the same as  <code>KeyboardState-&gt;isKeyPressed(aKey)</code>, so then I tried the method where you set key repeat to false: <code>window.setKeyRepeatEnabled(false);</code>with no results what so ever. I also found out that the <code>sf::Event::KeyPressed</code> works only as intended inside of this part in the main.cpp:</p>\n\n<pre><code>while (window.pollEvent(event))\n{\n\n}\n</code></pre>\n\n<p>The problem with this is that I want to handle Input inside of my Entity objects' <code>Update()</code>function, and I can't put the whole Update loop inside of the   <code>while (window.pollEvent(event))</code>. So here I am, struggling to find a solution. Any help is appreciated.</p>\n"}, {"tags": ["c++", "c", "linux", "networking", "multicast"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1516230678, "post_id": 48309329, "comment_id": 83608837, "body": "You have iterate over the interfaces issuing a JOIN via each interface in turn in a multi homed host."}, {"owner": {"reputation": 13, "user_id": 7770351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fac2d2a1bdf41af4394a5aa29cfa73ba?s=128&d=identicon&r=PG&f=1", "display_name": "duick", "link": "https://stackoverflow.com/users/7770351/duick"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1516737089, "post_id": 48309329, "comment_id": 83808976, "body": "@EJP thanks for the pointer.  This solved my problem!"}], "answers": [{"comments": [{"owner": {"reputation": 1432, "user_id": 214756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d98bd414e82a350321fc5cf7b1cd44c?s=128&d=identicon&r=PG", "display_name": "Mike B", "link": "https://stackoverflow.com/users/214756/mike-b"}, "edited": false, "score": 0, "creation_date": 1525266448, "post_id": 48399108, "comment_id": 87288772, "body": "Thank you! I have the same DM9601 adapter and this change has fixed the issue where the pi failed to respond to mDNS lookups."}], "tags": [], "owner": {"reputation": 11, "user_id": 4190708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa45b0e07172bfa8a3ec8fc6581839ba?s=128&d=identicon&r=PG&f=1", "display_name": "mhp", "link": "https://stackoverflow.com/users/4190708/mhp"}, "is_accepted": false, "score": 1, "last_activity_date": 1516702362, "creation_date": 1516702362, "answer_id": 48399108, "question_id": 48309329, "link": "https://stackoverflow.com/questions/48309329/receiving-multicast-on-linux-host-with-multiple-interfaces/48399108#48399108", "title": "Receiving multicast on linux host with multiple interfaces", "body": "<p>I found a similar problem (Raspberry Pi Zero with USB-to-Ethernet adaptor, fails to respond to mDNS queries).  To work out if your problem is the same, does does your app correctly receive multicast traffic whilst running tcpdump at the same time?  And does running tcpdump with <code>--no-promiscuous-mode</code> not see multicast traffic?</p>\n\n<p>If your answer is yes to both, then the workaround I've found is simply <code>ip link set eth0 promisc on</code>.  I don't know if it is a hardware bug (I'm using a Kontron DM9601 adaptor, ID 0FE6:9700) or a driver bug, but either way, enabling promiscuous mode seems to fix multicast reception for me.  Alternatively you could try a better USB-to-ethernet adaptor.</p>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 7770351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fac2d2a1bdf41af4394a5aa29cfa73ba?s=128&d=identicon&r=PG&f=1", "display_name": "duick", "link": "https://stackoverflow.com/users/7770351/duick"}, "is_accepted": true, "score": 0, "last_activity_date": 1516737186, "last_edit_date": 1516737186, "creation_date": 1516736470, "answer_id": 48409584, "question_id": 48309329, "link": "https://stackoverflow.com/questions/48309329/receiving-multicast-on-linux-host-with-multiple-interfaces/48409584#48409584", "title": "Receiving multicast on linux host with multiple interfaces", "body": "<p>The <code>ip_mreq</code> stucture is passed as the option value for the <code>IP_ADD_MEMBERSHIP</code> socket option to join a multicast group.  From the <a href=\"http://www.tldp.org/HOWTO/Multicast-HOWTO-6.html#ss6.4\" rel=\"nofollow noreferrer\">Multicast programming HOWTO</a> from the The Linux Documentation Project:</p>\n\n<blockquote>\n  <p>The first member, <code>imr_multiaddr</code>, holds the group address you want to join. Remember that memberships are also associated with interfaces, not just groups. This is the reason you have to provide a value for the second member: <code>imr_interface</code>. This way, if you are in a multihomed host, you can join the same group in several interfaces. You can always fill this last member with the wildcard address (<code>INADDR_ANY</code>) and then the kernel will deal with the task of choosing the interface.</p>\n</blockquote>\n\n<p>The <code>IP_MULTICAT_IF</code> socket option is also relevant on a multihomed host to set the outbound interface for multicast data sent via the socket.  More information on these socket options, the <code>ip_mreq</code> structure, and the newer <code>ip_mreqn</code> stucture is found <a href=\"http://man7.org/linux/man-pages/man7/ip.7.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>For those using Boost on a multihomed host, you will need to use the native handle to join the group on specific interfaces.  As of Boost 1.58 running on Ubuntu 16.04, the socket option abstraction <code>ip::multiast::join_group()</code> joins the group on an interface of the kernel's choosing and does not allow the developer to specify an interface.  The socket option abstraction <code>ip::multicast::outbound_interface()</code> controls the outbound interface but does not affect which interface the socket receives on.</p>\n\n<p>Here is a code sample to join a group on a specific interface based on the local interface IP address:</p>\n\n<pre><code>struct ip_mreq mreq;\nmreq.imr_multiaddr.s_addr = inet_addr(discovery_ip);\nmreq.imr_interface.s_addr = inet_addr(local_interface_ip);\nif(setsockopt(socket_.native_handle(), IPPROTO_IP, IP_ADD_MEMBERSHIP, &amp;mreq, sizeof(mreq))) {\n    ... handle error ...\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7770351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fac2d2a1bdf41af4394a5aa29cfa73ba?s=128&d=identicon&r=PG&f=1", "display_name": "duick", "link": "https://stackoverflow.com/users/7770351/duick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1850, "favorite_count": 0, "accepted_answer_id": 48409584, "answer_count": 2, "score": 0, "last_activity_date": 1516737186, "creation_date": 1516220326, "last_edit_date": 1516736958, "question_id": 48309329, "link": "https://stackoverflow.com/questions/48309329/receiving-multicast-on-linux-host-with-multiple-interfaces", "title": "Receiving multicast on linux host with multiple interfaces", "body": "<p>I have a host running Ubuntu 16.04 connected to one network via the primary wired network interface, and to another network via a USB-to-Ethernet adapter. Using <code>tcpdump</code>, I am able to verify incoming multicast packets on both network interfaces.  However, my application does not receive any multicast data from the secondary interface.  If I disconnect the cable to the primary interface, and then restart my application, then I do receive the data from the secondary interface.  It is only with both interfaces connected that the application does not receive from the secondary interface.</p>\n"}, {"tags": ["c++", "character-encoding", "chinese-locale"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 4, "creation_date": 1516219487, "post_id": 48309070, "comment_id": 83603792, "body": "There are TONS of questions on StackOverflow on this very topic. You are saying that you can&#39;t make <i>ANY</i> of the provided solutions work for you? What <i>EXACTLY</i> have you tried that is not working? Did you try using <code>std::wcout</code>? Did you try using <code>WriteConsoleW()</code>? Did you try putting the console into UTF-8 mode and then write the Chinese text in UTF-8 using <code>std::cout</code>? Did you try <code>imbue</code>&#39;ing <code>std::cout</code> with a UTF-8 locale? There are MANY different options available when it comes to console output, did you try <i>ANY</i> of them?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1516220606, "post_id": 48309070, "comment_id": 83604389, "body": "Maybe consider using a library like Qt which in many cases makes internationalisation easier (mainly through its QString type)."}, {"owner": {"reputation": 2024, "user_id": 1268696, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9vs4D.jpg?s=128&g=1", "display_name": "FrankS101", "link": "https://stackoverflow.com/users/1268696/franks101"}, "edited": false, "score": 0, "creation_date": 1516226222, "post_id": 48309070, "comment_id": 83607028, "body": "This can also help: <a href=\"https://stackoverflow.com/questions/48221040/why-do-character-arrays-accept-non-ascii-characters-in-c/48221666#48221666\" title=\"why do character arrays accept non ascii characters in c\">stackoverflow.com/questions/48221040/&hellip;</a>"}], "owner": {"reputation": 11, "user_id": 8957005, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-S_dOo43dXts/AAAAAAAAAAI/AAAAAAAAACo/5C_FzrJjtqc/photo.jpg?sz=128", "display_name": "Nosilil", "link": "https://stackoverflow.com/users/8957005/nosilil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2153, "favorite_count": 0, "closed_date": 1516220622, "answer_count": 0, "score": 1, "last_activity_date": 1516219456, "creation_date": 1516219165, "last_edit_date": 1516219456, "question_id": 48309070, "link": "https://stackoverflow.com/questions/48309070/displaying-chinese-character-in-c", "closed_reason": "Duplicate", "title": "Displaying Chinese character in C++", "body": "<p>I'm new to C++, and I've been having issues with displaying Chinese strings with <code>std::cout</code> in C++. The output is not showing the right characters but instead is showing question marks. I've been searching online for the solution to this problem, but there aren't many methods available, and none of the ones I found seem to work to me.</p>\n\n<p>The following screenshot shows what happens:</p>\n\n<p><a href=\"https://i.stack.imgur.com/pHjKY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pHjKY.png\" alt=\"screenshot of the problem\"></a></p>\n\n<p>My computer is running Windows 10 with system language set to English, Chinese language pack is also installed. The IDE is Visual Studio 2017.</p>\n\n<p>What could be the way to display Chinese output in C++? If C++ is not ideal for displaying non-English language output, what would be a better programming language?</p>\n"}, {"tags": ["c++", "multidimensional-array", "stack-overflow"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 6, "creation_date": 1516218835, "post_id": 48308924, "comment_id": 83603402, "body": "hint: array indexing is from 0 to size - 1"}, {"owner": {"reputation": 93, "user_id": 6508060, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/0b582718187ecf3a75f8efb12cdd7077?s=128&d=identicon&r=PG&f=1", "display_name": "Blake K Akiti", "link": "https://stackoverflow.com/users/6508060/blake-k-akiti"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1516219120, "post_id": 48308924, "comment_id": 83603589, "body": "fibCount=colCount * rowCount -1"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1516219141, "post_id": 48308924, "comment_id": 83603602, "body": "Also note that your code relies on a non-standard compiler extension, <i>variable length arrays (VLAs)</i>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 3, "creation_date": 1516219201, "post_id": 48308924, "comment_id": 83603636, "body": "@LogomonicLearning -- How is that going to fix the issue?  If <code>fibCount</code> is some number, then <code>fibArr[f]</code> where <code>f == fibCount</code> is an out-of-bounds access."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1516221421, "post_id": 48309211, "comment_id": 83604779, "body": "What&#39;s wrong with <code>std::array</code>? Why use a C-style array at all? And why heap allocate it? And if you <i>do</i> heap allocate it, why not stuff it into a smart pointer (naked <code>delete</code>&#39;s are an abomination in modern C++)?"}, {"owner": {"reputation": 101, "user_id": 7880546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e5804d5e5dc8e28e9673d48289c0787?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/7880546/tim"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1516222045, "post_id": 48309211, "comment_id": 83605103, "body": "Nothing wrong with std::array, where did I mention that? Doesn&#39;t have to be on the heap either."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1516222286, "post_id": 48309211, "comment_id": 83605229, "body": "you didn&#39;t say it was bad, just you didn&#39;t use it ;)"}, {"owner": {"reputation": 101, "user_id": 7880546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e5804d5e5dc8e28e9673d48289c0787?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/7880546/tim"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1516222958, "post_id": 48309211, "comment_id": 83605570, "body": "Usually I use a third-party library for an array. Did it like this for faster and easier jumping around the array. Should be on the stack and then take a pointer to it."}, {"owner": {"reputation": 93, "user_id": 6508060, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/0b582718187ecf3a75f8efb12cdd7077?s=128&d=identicon&r=PG&f=1", "display_name": "Blake K Akiti", "link": "https://stackoverflow.com/users/6508060/blake-k-akiti"}, "edited": false, "score": 0, "creation_date": 1516226362, "post_id": 48309211, "comment_id": 83607099, "body": "@ Tim it is always nice to see other implementations of the same code so your input is much appreciated."}, {"owner": {"reputation": 8101, "user_id": 9199167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqdLV.jpg?s=128&g=1", "display_name": "Max Vollmer", "link": "https://stackoverflow.com/users/9199167/max-vollmer"}, "reply_to_user": {"reputation": 93, "user_id": 6508060, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/0b582718187ecf3a75f8efb12cdd7077?s=128&d=identicon&r=PG&f=1", "display_name": "Blake K Akiti", "link": "https://stackoverflow.com/users/6508060/blake-k-akiti"}, "edited": false, "score": 0, "creation_date": 1516231485, "post_id": 48309211, "comment_id": 83609083, "body": "@LogomonicLearning You did think of the second <i>f = fibCount</i>, right?"}, {"owner": {"reputation": 101, "user_id": 7880546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e5804d5e5dc8e28e9673d48289c0787?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/7880546/tim"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1516348805, "post_id": 48309211, "comment_id": 83657951, "body": "@JesperJuhl ok, a smartpointer is maybe better but abomination I wouldn&#39;t say. Not using a naked pointers could be called lazy. Indeed I see the pro&#39;s of smartpointers. Don&#39;t see a real problem in naked pointers."}, {"owner": {"reputation": 101, "user_id": 7880546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e5804d5e5dc8e28e9673d48289c0787?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/7880546/tim"}, "reply_to_user": {"reputation": 93, "user_id": 6508060, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/0b582718187ecf3a75f8efb12cdd7077?s=128&d=identicon&r=PG&f=1", "display_name": "Blake K Akiti", "link": "https://stackoverflow.com/users/6508060/blake-k-akiti"}, "edited": false, "score": 0, "creation_date": 1516349126, "post_id": 48309211, "comment_id": 83658119, "body": "@LogomonicLearning Since I am not allowed to post a comment at your question: <code>if (d == DOWN) { if (grid[R+1][C] == 0) R++; else d = RIGHT; }</code>, in the while loop the conditions are always <code>else</code> resulting in all if statements calling the <code>else</code>, then substract one from <code>f</code>. Again only <code>else</code> is executed. Basically said, nothing is done."}], "tags": [], "owner": {"reputation": 101, "user_id": 7880546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e5804d5e5dc8e28e9673d48289c0787?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/7880546/tim"}, "is_accepted": false, "score": 0, "last_activity_date": 1516220671, "last_edit_date": 1516220671, "creation_date": 1516219731, "answer_id": 48309211, "question_id": 48308924, "link": "https://stackoverflow.com/questions/48308924/what-is-corrupting-the-stack-of-this-multidimensional-array/48309211#48309211", "title": "What is corrupting the stack of this multidimensional array?", "body": "<p>As juanchopanza pointed out, array indexing is from 0 to size - 1.</p>\n\n<pre><code>const int rowCount = 5, colCount = 5;\nconst int fibCount = rowCount * colCount - 1;\n</code></pre>\n\n<p>This would result in:</p>\n\n<pre><code>fibCount = 24 = ( 5 * 5 ) - 1;\n</code></pre>\n\n<p>Further down, at your while loop:</p>\n\n<pre><code>int R = 0, C = 0; //R for row, C for column\nf = fibCount;\nwhile (f &gt;= 0) {\n\n    grid[R][C] = fibArr[f]; // f = 24; size = 24;\n\n    ...\n\n}\n</code></pre>\n\n<p>Here you take a value from your array fibArray with the index of 24. Last index would be 23.</p>\n\n<hr>\n\n<p>Change this to:</p>\n\n<pre><code>const int fibCount = rowCount * colCount;\n</code></pre>\n\n<p>Then before your while loop:</p>\n\n<pre><code>f = fibCount - 1;\n</code></pre>\n\n<hr>\n\n<p>Besides that I would use a single dimensional array like this:</p>\n\n<pre><code>int rows = 5, cols = 5;\nchar* tst = new char[ rows * cols ];\n\nint select_row = 2;\nint select_col = 3;\n\ntst[ select_row * cols + select_col ] = 65;\nchar c = tst[ select_row * cols + select_col ];\n\ndelete[] tst;\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 6508060, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/0b582718187ecf3a75f8efb12cdd7077?s=128&d=identicon&r=PG&f=1", "display_name": "Blake K Akiti", "link": "https://stackoverflow.com/users/6508060/blake-k-akiti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516225732, "creation_date": 1516218670, "last_edit_date": 1516225732, "question_id": 48308924, "link": "https://stackoverflow.com/questions/48308924/what-is-corrupting-the-stack-of-this-multidimensional-array", "title": "What is corrupting the stack of this multidimensional array?", "body": "<p>This script produces a fibonacci spiral which starts off in the centre and branches outward. Although the output is correct, i get an error message saying: </p>\n\n<p>\"Run-Time Check Failure #2 - Stack around the variable 'fibArr' was corrupted.\" </p>\n\n<p>I've tried reducing fibCount by 1, but this caused the central number to be 0 which I dont want.</p>\n\n<pre><code>int fibFunc(int);\n\n\nint main() {\n    //--setting variables\n    const int rowCount = 5, colCount = 5;\n    const int fibCount = rowCount * colCount - 1;\n    static int f; \n    int i, j;\n\n\n    //--creating  grid\n    int grid[rowCount][colCount] = { 0 };\n\n    //Create fibArr\n    f = fibCount;\n    int fibArr[fibCount];\n\n    while (f &gt;= 0) {\n        fibArr[f] = fibFunc(f);\n        f--;\n    }\n\n\n    //directions settings\n    enum direction {\n        DOWN, RIGHT, UP, LEFT\n    } d = DOWN;\n\n    //spiral loop\n    int R = 0, C = 0; //R for row, C for column\n        f = fibCount;\n        while (f &gt;= 0) {\n\n            grid[R][C] = fibArr[f];\n\n            f--;\n\n\n            if (d == DOWN) {\n                if (grid[R+1][C] == 0)\n                    R++;\n                else d = RIGHT;\n            }\n\n\n            if (d == RIGHT) {\n                if (grid[R][C+1] == 0)\n                    C++;\n\n                else d = UP;\n            }\n\n            if (d == UP) {\n                if (grid[R-1][C] == 0)\n                    R--;\n                else d = LEFT;\n            }\n\n            if (d == LEFT) {\n                if (grid[R][C-1] == 0)\n                    C--;\n                else {\n                    d = DOWN;\n                    R++;\n                } \n            }\n        }\n\n    printFib(fibArr, fibCount); \n    for (i = 0; i &lt; rowCount; i++) {\n        for (j = 0; j &lt; colCount; j++) {\n            cout &lt;&lt; setw(7) &lt;&lt; grid[i][j];\n        }\n        cout &lt;&lt; endl;\n        cout &lt;&lt; endl;\n    }\n\n    system(\"pause&gt;nul\");\n}   \n\nint fibFunc(int n) {\n    if (n == 0 || n == 1)\n        return 1;\n    else\n        return fibFunc(n - 1) + fibFunc(n - 2);\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>75025     55     89    144    233\n\n46368     34      1      2    377\n\n28657     21      1      3    610\n\n17711     13      8      5    987\n\n10946   6765   4181   2584   1597\n</code></pre>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 986, "user_id": 744807, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3efb9ca6af32dbb214f1b84676f5833c?s=128&d=identicon&r=PG", "display_name": "Stephen York", "link": "https://stackoverflow.com/users/744807/stephen-york"}, "edited": false, "score": 0, "creation_date": 1516219397, "post_id": 48308921, "comment_id": 83603735, "body": "If you&#39;re typing \\n then it&#39;s not a control code, it&#39;s plain text of \\ and n. You need to search the string for instances of \\n, but not \\\\n and replace with endl. Then output"}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1516220099, "creation_date": 1516220099, "answer_id": 48309284, "question_id": 48308921, "link": "https://stackoverflow.com/questions/48308921/enter-a-new-line-programmatically/48309284#48309284", "title": "Enter a new line programmatically", "body": "<pre><code>std::string text;\n\nstd::cout &lt;&lt; \"Enter inserting text: \";\nstd::getline(std::cin &gt;&gt; std::ws, text);\n\nstd::string::size_type pos = text.find(\"\\\\n\");\nwhile (pos != std::string::npos)\n{\n    text.replace(pos, 2, \"\\n\");\n    pos = text.find(\"\\\\n\", pos+1);\n}\n\nstd::cout &lt;&lt; text;\n</code></pre>\n\n<p><a href=\"https://ideone.com/5ip5xu\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "is_accepted": false, "score": 2, "last_activity_date": 1516221055, "last_edit_date": 1516221055, "creation_date": 1516220203, "answer_id": 48309304, "question_id": 48308921, "link": "https://stackoverflow.com/questions/48308921/enter-a-new-line-programmatically/48309304#48309304", "title": "Enter a new line programmatically", "body": "<p>As mentioned in my comment, the text captured by <code>std::getline()</code> if you input </p>\n\n<pre><code>hello \\n Bye\n</code></pre>\n\n<p>is </p>\n\n<pre><code>\"hello \\\\n Bye\"\n</code></pre>\n\n<p>shown as a literal.</p>\n\n<p>To output </p>\n\n<pre><code>hello\n Bye\n</code></pre>\n\n<p>you need to replace the occurrence of <code>\"\\\\n\"</code> with <code>\"\\n\"</code>.</p>\n\n<p>@Remy already posted the code how to do that in his <a href=\"https://stackoverflow.com/a/48309284/9212993\">answer</a>.</p>\n"}], "owner": {"reputation": 158, "user_id": 8226050, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/66da411fe004c8fc634a1a336c491bca?s=128&d=identicon&r=PG&f=1", "display_name": "X21", "link": "https://stackoverflow.com/users/8226050/x21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 48309284, "answer_count": 2, "score": -2, "last_activity_date": 1516221055, "creation_date": 1516218665, "question_id": 48308921, "link": "https://stackoverflow.com/questions/48308921/enter-a-new-line-programmatically", "title": "Enter a new line programmatically", "body": "<p>I have a <code>vector of std::string</code> with a text, which have some several lines.(strings). Those lines are elements of the vector. </p>\n\n<p>I choose the number of a range, for example: <code>0 and 2</code> and the chosen range is deleted and I insert a new string, one string, in the beginning of the vector (where I have deleted).</p>\n\n<p><code>But I would like</code>, when I enter a string and type <strong>'\\n'</strong> in the same string, <code>to see in the outputting result text which will consist of two lines.</code></p>\n\n<p>For getting a string with <code>spaces</code>, I use <code>std::getline()</code>:</p>\n\n<pre><code>std::cout &lt;&lt; \"Enter insreting text: \";\nstd::getline(std::cin &gt;&gt; std::ws, text);\n</code></pre>\n\n<p><strong>In console mode:</strong></p>\n\n<blockquote>\n  <p><code>Enter insreting text:  hello \\n Bye</code></p>\n  \n  <p>My wishing result should be</p>\n  \n  <p>hello</p>\n  \n  <p>bye</p>\n</blockquote>\n\n<p>Might be I am not right using <code>std::getline()</code> for getting a string. Any hints, please?</p>\n"}, {"tags": ["c++", "macros"], "comments": [{"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 3, "creation_date": 1516218585, "post_id": 48308886, "comment_id": 83603272, "body": "remove the <code>;</code> at the end of the <code>#define...</code> line"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1516218602, "post_id": 48308886, "comment_id": 83603282, "body": "Also don&#39;t use macros."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1516218612, "post_id": 48308886, "comment_id": 83603287, "body": "I highly advise not to use 1-letter names such as <code>G</code>."}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 2, "creation_date": 1516218619, "post_id": 48308886, "comment_id": 83603289, "body": "<i><code>stray \u2018\\342\u2019 in program</code></i> did you do copy&amp;paste from a website? Sometimes characters that look the same but are different are used on websites, mostly <code>\u201d</code> is used instead of <code>&quot;</code>"}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 2, "creation_date": 1516218715, "post_id": 48308886, "comment_id": 83603332, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2340930/stray-342-in-c-program\">stray &#39;\\342&#39; in C++ program</a>"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1516218971, "post_id": 48308886, "comment_id": 83603492, "body": "@PaulMcKenzie It&#39;s a physical constant and it&#39;s <code>G</code>, so in this case it is a very good idea to do that."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1516218981, "post_id": 48308886, "comment_id": 83603498, "body": "@nwp, what? why not?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1516218982, "post_id": 48308886, "comment_id": 83603501, "body": "Apart from the <code>;</code> that is not the answer. <code>6.754e-11</code> works fine, but <code>6.754e-11.0</code> does not, trying to find why."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1516219039, "post_id": 48308886, "comment_id": 83603539, "body": "@WeatherVane Well, I don&#39;t think that you can express numeric literals with a floating point exponent."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1516219078, "post_id": 48308886, "comment_id": 83603563, "body": "@IharobAlAsimi thanks, was just arriving at that conclusion."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1516219135, "post_id": 48308886, "comment_id": 83603598, "body": "@IharobAlAsimi Because they make the program harder to read, write and optimize. Use a <code>constexpr double</code> instead."}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1516219172, "post_id": 48308886, "comment_id": 83603616, "body": "@IharobAlAsimi because if macros are use improperly, you can have very well hidden bugs. Consider <code>#define abs(x) ((x) &gt; 0 ? (x) : (-x))</code>. This looks harmless, but <code>int i = -3; abs(--x);</code> would lead to undefined behaviour."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1516219359, "post_id": 48308886, "comment_id": 83603716, "body": "@Pablo Following that reasoning then if knifes are used improperly, you can have murdering and injuries."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1516219388, "post_id": 48308886, "comment_id": 83603732, "body": "&quot;The stray <code>\\342</code>&quot; is a red herring. That line copy/pasted into a program compiles when the <code>.0;</code> is removed. Nothing to do with any minus sign encoding."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1516219457, "post_id": 48308886, "comment_id": 83603776, "body": "@nwp please note that this is c++ specific. Macros are not, and you can suggest that being more specific like &quot;<i>in c++ it&#39;s not recommended to use macros</i>&quot;. Macros as any language feature when used correctly can be very useful, writing bad macros like the example by @<a href=\"https://stackoverflow.com/questions/48308886/what-is-the-proper-way-of-declaring-a-floating-point-number-in-exponential-form#comment83603616_48308886\">Pablo</a> is possible too, but that&#39;s no reason to simple BAN macros."}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1516219519, "post_id": 48308886, "comment_id": 83603804, "body": "@IharobAlAsimi if you <b>really</b> know how to use macros and understand the ups and downs of using them, then sure, use them. And yes, if you use knifes improperly, you <b>can</b> have murdering and injuries. So if you don&#39;t know how to use a knife properly, don&#39;t use it."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1516219529, "post_id": 48308886, "comment_id": 83603809, "body": "@WeatherVane The U+2212, the <code>.0</code> in the exponent, and the semicolon are <i>all</i> problems, of equal significance to the compiler (that is, they all provoke syntax errors)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1516219550, "post_id": 48308886, "comment_id": 83603823, "body": "@zwol I see now the C++ tag, I am using a C compiler."}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1516219586, "post_id": 48308886, "comment_id": 83603839, "body": "@IharobAlAsimi I&#39;m not from banning macros, I only gave you an example of a common pitfall using macros and why you should avoid them, unless you really know what you are doing."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1516219795, "post_id": 48308886, "comment_id": 83603944, "body": "@WeatherVane C and C++ should both reject <code>#define G 6.754e\u221211</code> (provided that the macro is actually expanded as part of an arithmetic expression). I think it&#39;s more likely that somewhere along the copy-and-paste chain from OP&#39;s code to your test program the Unicode character got degraded to ASCII."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1516219985, "post_id": 48308886, "comment_id": 83604023, "body": "@zwol I guess so (about the stray) - as OP&#39;s compiler says."}], "answers": [{"tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": true, "score": 6, "last_activity_date": 1516220958, "last_edit_date": 1516220958, "creation_date": 1516219163, "answer_id": 48309069, "question_id": 48308886, "link": "https://stackoverflow.com/questions/48308886/what-is-the-proper-way-of-declaring-a-floating-point-number-in-exponential-form/48309069#48309069", "title": "What is the proper way of declaring a floating point number in exponential form as a macro in C/C++?", "body": "<p>The error message</p>\n\n<pre><code>stray \u2018\\342\u2019 in program\n</code></pre>\n\n<p>means your program contains a character which is not allowed by the syntax of C++ (technically, it is outside the \"basic source character set\").  The three-digit number is the octal encoding of the numeric value of the problem <em>byte</em>.  You got three of these in a row, so the offending byte sequence is <code>0342 0210 0222</code>, which is the UTF-8 encoding of the Unicode character U+2212 MINUS SIGN.</p>\n\n<p>That's right, you're not allowed to use minus signs in C++.  You must use U+002D HYPHEN-MINUSes instead.</p>\n\n<p>To fix that part of the problem, in your editor go to the line</p>\n\n<pre><code>#define G 6.754e-11.0;\n</code></pre>\n\n<p>backspace over the minus sign and retype it.  This probably happened because you copied and pasted the number from a web page or PDF that uses fancy (by which I mean \"not just plain ASCII\") typography.</p>\n\n<p>You will still need to fix a couple other problems.  That semicolon shouldn't be there at all, because <code>#define</code>s end at the end of the line.  And the exponent of a floating-point literal in C++ must be an integer.  So what you really should have is</p>\n\n<pre><code>#define G 6.754e-11\n</code></pre>\n\n<p>It is also arguably better to use a <code>const</code> variable for this, as you do not <em>need</em> a macro:</p>\n\n<pre><code>const double G = 6.754e-11;\n</code></pre>\n\n<p>(note that the semicolon has now returned) ... but I am old-school enough to not object to the use of macros for numeric constants.</p>\n\n<p>There is absolutely no reason to use <code>pow</code> here.</p>\n"}], "owner": {"reputation": 21, "user_id": 9209532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0fcd0bf2f425c7cedcd761871af4a67?s=128&d=identicon&r=PG&f=1", "display_name": "Aal Ver", "link": "https://stackoverflow.com/users/9209532/aal-ver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 1, "accepted_answer_id": 48309069, "answer_count": 1, "score": -1, "last_activity_date": 1516220958, "creation_date": 1516218513, "last_edit_date": 1516218549, "question_id": 48308886, "link": "https://stackoverflow.com/questions/48308886/what-is-the-proper-way-of-declaring-a-floating-point-number-in-exponential-form", "title": "What is the proper way of declaring a floating point number in exponential form as a macro in C/C++?", "body": "<p>I was trying to create a really simple program to calculate gravitational force between two objects in C++ , So I wanted to declare a macro for G whose value is equals to 6.754*10^-11 and I used this -</p>\n\n<pre><code>#define G 6.754e-11.0;\n</code></pre>\n\n<p>But it generated a lots of stray error as shown below -</p>\n\n<pre><code>aalpanigrahi@aalpanigrahi:~/Desktop/CS/C++/Other PSETS$ g++ gravity.cpp -o gravity\ngravity.cpp:5:28: error: stray \u2018\\342\u2019 in program\n #define G (6.754)*pow(10.0,\ufffd\ufffd11.0);\n                            ^\ngravity.cpp:10:52: note: in expansion of macro \u2018G\u2019\n     float gforce(float m1,float m2,float r){return G*m1*m2/(r*r);}\n                                                    ^\ngravity.cpp:5:29: error: stray \u2018\\210\u2019 in program\n #define G (6.754)*pow(10.0,\ufffd\ufffd11.0);\n                             ^\ngravity.cpp:10:52: note: in expansion of macro \u2018G\u2019\n     float gforce(float m1,float m2,float r){return G*m1*m2/(r*r);}\n                                                    ^\ngravity.cpp:5:30: error: stray \u2018\\222\u2019 in program\n #define G (6.754)*pow(10.0,\ufffd11.0);\n                              ^\ngravity.cpp:10:52: note: in expansion of macro \u2018G\u2019\n     float gforce(float m1,float m2,float r){return G*m1*m2/(r*r);}\n</code></pre>\n\n<p>So, I decided to use the math library function <code>cmath</code> for using <code>pow()</code> , but still it was of no use. What can I do to create such a macro ?</p>\n\n<p>NOTE - I am Using G++ on Ubuntu as shown below -</p>\n\n<pre><code>aalpanigrahi@aalpanigrahi:~/Desktop/CS/C++/Other PSETS$ g++ --version\ng++ (Ubuntu 7.2.0-8ubuntu3) 7.2.0\nCopyright (C) 2017 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n</code></pre>\n"}, {"tags": ["c++", "c", "assembly", "stack", "stack-overflow"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1516218689, "post_id": 48308882, "comment_id": 83603321, "body": "Why does it have to go any particular direction?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1516218773, "post_id": 48308882, "comment_id": 83603366, "body": "M\u0265\u0250\u0287 \u1d09s \u028d\u0279ou\u0183 \u028d\u1d09\u0287\u0265 nds\u1d09p\u01dd-po\u028du&#191;"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1516219125, "post_id": 48308882, "comment_id": 83603592, "body": "heap grows up stack grows down, gives you some flexibility.  if your stack started low and went high then you are going to hit it with the heap much sooner."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1516221987, "post_id": 48308882, "comment_id": 83605078, "body": "@old_timer: Depends on the memory implementation.  You could have the stack at lower memory and grow (upwards) towards the heap.  There is no requirement for a heap or a stack."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1516222173, "post_id": 48308882, "comment_id": 83605166, "body": "absolutely...this question has no answer...it is one common implementation that may make a decreasing stack make sense."}], "owner": {"reputation": 115, "user_id": 7395780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71aaeec87a5585005d3277bda8e98743?s=128&d=identicon&r=PG&f=1", "display_name": "yehuda corsia", "link": "https://stackoverflow.com/users/7395780/yehuda-corsia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "closed_date": 1516218674, "answer_count": 0, "score": 0, "last_activity_date": 1516218484, "creation_date": 1516218484, "question_id": 48308882, "link": "https://stackoverflow.com/questions/48308882/why-stack-get-backwards", "closed_reason": "Duplicate", "title": "Why stack get backwards?", "body": "<p>I was thinking why when I push something into stack esp decrease and don't increase.</p>\n\n<p>I know that this is the way that stack use in a lot of language, but I want to know why they do this and don't do this in upside down.</p>\n\n<p>I search a lot in internet and don't see a good answer. </p>\n\n<p>I was thinking about this when I was learn about stack overflow, and this is look like if stack was create upside down.. Was very hard to do stack overflow </p>\n"}, {"tags": ["c++", "qt", "qimage"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 2, "creation_date": 1516218387, "post_id": 48308777, "comment_id": 83603164, "body": "if you are going to use a relative path it must be relative to the executable, not the source code. Try placing the absolute path."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 1, "creation_date": 1516218392, "post_id": 48308777, "comment_id": 83603172, "body": "Is the image <i>definitely</i> being loaded successfully?  Check the return from <a href=\"http://doc.qt.io/qt-5/qimage.html#isNull\" rel=\"nofollow noreferrer\"><code>myImg.isNull()</code></a>."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1516218521, "post_id": 48308777, "comment_id": 83603250, "body": "If you do not want to have these problems use qresource to store images. <a href=\"http://doc.qt.io/qt-5/resources.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/resources.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "is_accepted": true, "score": 2, "last_activity_date": 1516280265, "last_edit_date": 1516280265, "creation_date": 1516222190, "answer_id": 48309761, "question_id": 48308777, "link": "https://stackoverflow.com/questions/48308777/qt-c-image-does-not-appear-on-screen/48309761#48309761", "title": "Qt/C++ image does not appear on screen", "body": "<p>The Problem comes about because of ignore policy, the label <em>seems</em> failing to expand the layout (After or because <em>topFiller</em> and <em>bottomFiller</em> expand) :</p>\n\n<pre><code>  imageLabel-&gt;setSizePolicy(QSizePolicy::Ignored, QSizePolicy::Ignored);\n</code></pre>\n\n<p>try instead a normal policy by removing setSizePolicy(), or use <em>Expanding</em>:</p>\n\n<pre><code>imageLabel-&gt;setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding);\n</code></pre>\n\n<p>Also its good to set the QLabel setScaledContents so that the image will resize when you manually resize the view:</p>\n\n<pre><code>imageLabel-&gt;setScaledContents(true);\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 6276643, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6dooC.jpg?s=128&g=1", "display_name": "ProgAndPlay", "link": "https://stackoverflow.com/users/6276643/progandplay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 48309761, "answer_count": 1, "score": 1, "last_activity_date": 1516280265, "creation_date": 1516218088, "last_edit_date": 1516233229, "question_id": 48308777, "link": "https://stackoverflow.com/questions/48308777/qt-c-image-does-not-appear-on-screen", "title": "Qt/C++ image does not appear on screen", "body": "<p>Here is the code for the MainWindow constructor where I tried to make\n an image (000.jpg) appear on the screen. What could be wrong? Are there\n alternative ways of showing an image on screen from a file? PS: The\n image file is in the same directory where the .cpp project files are.</p>\n\n<pre><code> MainWindow::MainWindow()\n {\n     QWidget *widget = new QWidget;\n     setCentralWidget(widget);\n\n     QWidget *topFiller = new QWidget;\n     topFiller-&gt;setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding);\n\n     QWidget *bottomFiller = new QWidget;\n     bottomFiller-&gt;setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding);\n\n     QVBoxLayout *layout = new QVBoxLayout;\n     layout-&gt;setMargin(5);\n     layout-&gt;addWidget(topFiller);\n\n     QImage myImg(\"000.jpg\");\n     myImageFile = myImg;\n     imageLabel = new QLabel();\n     imageLabel-&gt;setBackgroundRole(QPalette::Base);\n     imageLabel-&gt;setSizePolicy(QSizePolicy::Ignored, QSizePolicy::Ignored);\n     imageLabel-&gt;setScaledContents(true);\n     imageLabel-&gt;setPixmap(QPixmap::fromImage(myImageFile));\n     layout-&gt;addWidget(imageLabel);\n\n     layout-&gt;addWidget(bottomFiller);\n     widget-&gt;setLayout(layout);\n\n     createActions();\n     createMenus();\n\n     setWindowTitle(tr(\"Image App\"));\n     setMinimumSize(160, 160);\n     resize(480, 320);\n }\n</code></pre>\n"}, {"tags": ["java", "python", "c++", "user-interface", "custom-controls"], "answers": [{"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 0, "last_activity_date": 1516220420, "creation_date": 1516220420, "answer_id": 48309350, "question_id": 48308764, "link": "https://stackoverflow.com/questions/48308764/how-to-use-completely-custom-gui-elements-for-customize-os-design/48309350#48309350", "title": "How to use completely custom GUI-Elements for customize OS design", "body": "<p>This can be done but it is by no means easy, Plenty of frameworks already do so (implementing UI from scratch, not necessarily your particular desired look and feel). WPF and QT for instance do not rely on the API for any of their UI look (they do, of course, rely on the API for the actual drawing, there is no way around that).</p>\n\n<p>You will need to implement control placement management, drawing, hit-testing and all the other usual operations that the API normally takes care of for you.</p>\n"}], "owner": {"reputation": 45, "user_id": 5401171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d334cf1d51d2c172de30e00eeba296d8?s=128&d=identicon&r=PG&f=1", "display_name": "The5thBluesky", "link": "https://stackoverflow.com/users/5401171/the5thbluesky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1516220420, "creation_date": 1516218028, "question_id": 48308764, "link": "https://stackoverflow.com/questions/48308764/how-to-use-completely-custom-gui-elements-for-customize-os-design", "title": "How to use completely custom GUI-Elements for customize OS design", "body": "<p>the mainproject is to customize Windows-OS that it looks like OS X or Mac OS. The question is: How to create completely own Windows, Frames etc. and especially custom GUI widgets? The GUI should get drawn without the Windows API because i want to redesign the complete window, it's frame and borders etc.</p>\n\n<p>Is their any way to do something like that? Maybe with a own new Engine that draws the GUI with it's own methods?</p>\n"}, {"tags": ["c++", "cmake", "code-coverage"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1516217639, "post_id": 48308550, "comment_id": 83602754, "body": "Have you tried to build your library manually, without CMake? Is coverage OK in that case? You may check which flags are actually used when compile and link your library with <code>make VERBOSE=1</code>. Try to build manually with the same flags, and check the coverage."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1516218111, "post_id": 48308550, "comment_id": 83603015, "body": "Coverage flags should also be present in link stage."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1516222228, "post_id": 48308550, "comment_id": 83605192, "body": "Off-topic:  You can save typing keystrokes by not using the <code>this-&gt;</code> notation.  The notation is only required when the member names are the same as the parameter names; you rename the parameters to avoid having to type <code>this-&gt;</code>."}, {"owner": {"reputation": 11, "user_id": 9210356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dce6cc9e04af3a23a4fff8507ee74ce?s=128&d=identicon&r=PG&f=1", "display_name": "technicaltim", "link": "https://stackoverflow.com/users/9210356/technicaltim"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1516286218, "post_id": 48308550, "comment_id": 83632755, "body": "@Tsyvarev When I manually build the library I do get a gcno file. However the report still says there is no coverage for the library. I&#39;m curious as to why the gcno file exists when I do it manually but not with cmake. I would it has to do with a missing flag like Jarod42 is suggesting."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 9210356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dce6cc9e04af3a23a4fff8507ee74ce?s=128&d=identicon&r=PG&f=1", "display_name": "technicaltim", "link": "https://stackoverflow.com/users/9210356/technicaltim"}, "is_accepted": true, "score": 0, "last_activity_date": 1516392679, "creation_date": 1516392679, "answer_id": 48348792, "question_id": 48308550, "link": "https://stackoverflow.com/questions/48308550/why-does-the-code-coverage-report-say-my-library-isnt-being-covered/48348792#48348792", "title": "Why does the code coverage report say my library isn&#39;t being covered?", "body": "<p>I have fixed my issue. The problem was that I wasn't running lcov against the source code after running the unit test. I had the wrong directory.</p>\n\n<pre><code>lcov -c -d \"$1\"/bin/test/$component/CMakeFiles/\"$unit_test\".dir -o \"$1/Coverage/$component\"_\"$dependency\".coverage.run\n</code></pre>\n\n<p>Needed to be:</p>\n\n<pre><code>lcov -c -d \"$1\"/bin/src/$component/CMakeFiles/\"$dependency\".dir -o \"$1/Coverage/$component\"_\"$dependency\".coverage.run\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9210356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dce6cc9e04af3a23a4fff8507ee74ce?s=128&d=identicon&r=PG&f=1", "display_name": "technicaltim", "link": "https://stackoverflow.com/users/9210356/technicaltim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "accepted_answer_id": 48348792, "answer_count": 1, "score": 1, "last_activity_date": 1516392679, "creation_date": 1516217100, "question_id": 48308550, "link": "https://stackoverflow.com/questions/48308550/why-does-the-code-coverage-report-say-my-library-isnt-being-covered", "title": "Why does the code coverage report say my library isn&#39;t being covered?", "body": "<p>I am attempting to generate code coverage for a small test library. The library only consists of two files.</p>\n\n<p>calculator.cpp:</p>\n\n<pre><code>#include \"calculator.h\"\n\nCalculator::Calculator()\n{\n\n}\n\nCalculator::~Calculator()\n{\n\n}\n\nvoid Calculator::addNumbers(int x, int y)\n{\n  this-&gt;result = x + y;\n}\n</code></pre>\n\n<p>calculator.h:</p>\n\n<pre><code>#ifndef CALCULATOR_H\n#define CALCULATOR_H\nclass Calculator\n{\npublic:\n  Calculator();\n  ~Calculator();\n  void addNumbers(int x, int y);\n};\n\n#endif\n</code></pre>\n\n<p>I have a unit test for this library that is being executed. It includes the library and runs fine. I have set the cmake_cxx_flags to include -fprofile-arcs and -ftest-coverage in the top level CMakeLists.txt.</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8.11)\n\nset(CMAKE_CXX_FLAGS \"-std=c++11\")\n\ninclude_directories(\"${PROJECT_BINARY_DIR}\")\n\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -g -O0 --coverage\")\n#set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -g -O0 --coverage -ftest-coverage -fprofile-arcs\")\n\nadd_subdirectory(src)\nadd_subdirectory(test)\n</code></pre>\n\n<p>I am using a script to take the gcno and gcda files that are generated on build to generate a human readable report.</p>\n\n<pre><code>#!/bin/bash\n\nOUTPUT_DIR=\"$1/bin/ExecutableTests/Coverage\"\nmkdir -p \"$OUTPUT_DIR\"\n\ncomponent=Calculator\ndependency=calculator\nscript=test_calculator.sh\nunit_test=unit_test_calculator\n\nmkdir $OUTPUT_DIR/$component\n\ncd \"$1\"/bin/\n\nmake clean || exit 1\nmake || exit 1\n# Create baseline coverage\nlcov -c -i -d \"$1\"/bin/src/\"$component\"/CMakeFiles/\"$dependency\".dir -o \"$1/Coverage/$component\"_\"$dependency\".coverage.base\n# Run the test\n$1/scripts/$script $1\n# Create test coverage\nlcov -c -d \"$1\"/bin/test/$component/CMakeFiles/\"$unit_test\".dir -o \"$1/Coverage/$component\"_\"$dependency\".coverage.run\n\nlcov -d \"$1/test/$component\" -a \"$1/Coverage/$component\"_\"$dependency\".coverage.base -a \"$1/Coverage/$component\"_\"$dependency\".coverage.run -o \"$1/Coverage/$component\"_\"$dependency\".coverage.total\n\ngenhtml --branch-coverage -o \"$OUTPUT_DIR/$component\" \"$1/Coverage/$component\"_\"$dependency\".coverage.total\nrm -f \"$1/Coverage/$component\"_\"$dependency\".coverage.base \"$1/Coverage/$component\"_\"$dependency\".coverage.run \"$1/Coverage/$component\"_\"$dependency\".coverage.total\n</code></pre>\n\n<p>I can see that the data files are being generated for the library; however when I view the report that is generated from the script it shows that the library is never touched. This is clearly wrong as illustrated by my unit test.</p>\n\n<pre><code>#include \"lest_basic.hpp\"\n#include \"calculator.h\"\n#include &lt;memory&gt;\n#include &lt;iostream&gt;\n\nint addResult(int x, int y)\n{\n  Calculator calc1;\n  return calc1.addNumbers(x, y);\n}\n\nconst lest::test specification[] =\n{\n\n  CASE( \"Addition\" )\n  {\n    std::cout &lt;&lt; \"Starting Addition testing...\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Adding 1 and 2...\" &lt;&lt; std::endl;\n    EXPECT(addResult(1, 2) == 3);\n    std::cout &lt;&lt; \"Adding 2 and 8...\" &lt;&lt; std::endl;\n    EXPECT(addResult(2, 8) &gt; 1);\n    std::cout &lt;&lt; \"Adding 7 and 4...\" &lt;&lt; std::endl;\n    EXPECT(addResult(7, 4) &lt; 12);\n  },\n};\n\nint main(int argc, char **argv) {\n\n  return lest::run( specification );\n}\n</code></pre>\n\n<p>Here is the CMakeLists.txt for my unit test:</p>\n\n<pre><code>set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR}/bin/ExecutableTests/)\ninclude_directories(${CMAKE_SOURCE_DIR}/externalinclude/)\ninclude_directories(${CMAKE_SOURCE_DIR}/src/Calculator/)\nadd_executable (unit_test_calculator test_calculator.cpp)\ntarget_link_libraries(unit_test_calculator -Wl,--whole-archive calculator -Wl,--no-whole-archive)\n</code></pre>\n\n<p>My question is why is the report saying that the library code isn't be covered? Are the data files the problem?</p>\n"}, {"tags": ["c++", "winapi", "loadlibrary", "side-by-side", "activation-context-api"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 2, "creation_date": 1516217480, "post_id": 48308530, "comment_id": 83602661, "body": "are you activate manifest from <i>foo.dll</i> before call <code>LoadLibrary</code> ? sure that no. by default active is exe manifest. you need activate you foo.dll manifest before call <code>LoadLibrary</code> and deactivate after. exactly this is do <code>IsolationAwareLoadLibraryA</code>. so you need in fooentry point save activation context - by call <code>GetCurrentActCtx</code> and then shell <code>LoadLibrary</code> call into <code>ActivateActCtx</code> <code>DeactivateActCtx</code>"}, {"owner": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1516217697, "post_id": 48308530, "comment_id": 83602784, "body": "@RbMm, No, of course I don&#39;t touch any active context functions, because I want it to create new context implicitly, when I DelayLoad some dll (Call LoadLibraryEx)"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1516217758, "post_id": 48308530, "comment_id": 83602822, "body": "this and your error. you not need create new context but activate context from your foo.dll"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1516217832, "post_id": 48308530, "comment_id": 83602863, "body": "<i>&quot;If you call LoadLibraryEx with the name of an assembly without a path specification and the assembly is listed in the system compatible manifest, the call is automatically redirected to the side-by-side assembly.&quot;</i> <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms684179(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "edited": false, "score": 0, "creation_date": 1516217842, "post_id": 48308530, "comment_id": 83602870, "body": "And you can use sxstrace to see exactly what the loader does."}, {"owner": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1516218095, "post_id": 48308530, "comment_id": 83603008, "body": "@RichardCritten I&#39;ve seen that, I load it as LoadLibraryEx(&quot;bar.dll&quot;, NULL, 0), there is no path in first argument."}], "answers": [{"comments": [{"owner": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "edited": false, "score": 0, "creation_date": 1516221278, "post_id": 48308884, "comment_id": 83604716, "body": "But shouldn&#39;t /DELAYLOAD option of linker automatically take into account this context activation? It&#39;s weird that developers of linker didn&#39;t make such obvious feature."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "edited": false, "score": 0, "creation_date": 1516221774, "post_id": 48308884, "comment_id": 83604974, "body": "@IbraimGaniev - how <code>&#47;DELAYLOAD</code> can do this ?! try set self on linker place. he generate link code, but it have no any knowledge of os. when you call function from delay load dll - linker simply call <code>__delayLoadHelper2</code> function. you must implement it yourself, or use some lib implementation. exactly here you need load correct dll as well. but this already your task, not linker"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "edited": false, "score": 0, "creation_date": 1516222381, "post_id": 48308884, "comment_id": 83605292, "body": "@IbraimGaniev - you can for example, if use lib implementation for delayload - on <code>dliStartProcessing</code> yourself activate context by <code>ActivateActCtx</code> and on <code>dliNoteEndProcessing</code> deactivate it. or yourself implement dll load on <code>dliNotePreLoadLibrary</code>"}, {"owner": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "edited": false, "score": 0, "creation_date": 1516375177, "post_id": 48308884, "comment_id": 83674070, "body": "this works perfectly, but could you give me a link where this approach is described? I&#39;m not sure if there are any guarantees that I&#39;ll be able to save handler to context of DLL in DLL_PROCESS_ATTACH. And is there a way to get this handler in other places of my dll&#39;s code?  Thanks in advance, and thanks again for your answer."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "edited": false, "score": 1, "creation_date": 1516375962, "post_id": 48308884, "comment_id": 83674596, "body": "@IbraimGaniev - when system load dll it look for it manifest (<code>ISOLATIONAWARE_MANIFEST_RESOURCE_ID</code>) and if it present create activation context from it and save <a href=\"http://processhacker.sourceforge.net/doc/ntldr_8h_source.html#l00155\" rel=\"nofollow noreferrer\">here</a>. before call dll entry point - loader activate this context. so you can got it and save by call <code>GetCurrentActCtx</code>. also possible at any time get it by undocumented <code>LdrFindEntryForAddress</code>. also look this - <a href=\"http://simon.rozman.si/computers/wxwidgets/wxwidgets-dll-plugin\" rel=\"nofollow noreferrer\">simon.rozman.si/computers/wxwidgets/wxwidgets-dll-plugin</a>"}], "tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": true, "score": 7, "last_activity_date": 1516218499, "creation_date": 1516218499, "answer_id": 48308884, "question_id": 48308530, "link": "https://stackoverflow.com/questions/48308530/loadlibraryex-ignores-side-by-side-manifest/48308884#48308884", "title": "LoadLibraryEx ignores side-by-side manifest", "body": "<p><code>LoadLibrary</code> used active activation context of the calling thread. but which is this context ? why it must be from your <code>foo.dll</code> ? why not from <code>xyz.dll</code> or from exe ? really most time active activation context was exactly from exe. </p>\n\n<p>if dll have own manifest - system create activation context for this dll and save it (until dll will be unloaded) but not make it active. and this is obviously - we have multiple dlls in process, but active context only one - from which dll select it ? from exe. however system activate (make it current active) dll activation context before call it entry point. and deactivate it after entry point return. but say inside another dll functions - (who called it ?) the context already not from your dll.</p>\n\n<p>so solution must be next:</p>\n\n<p>define 2 global variables in dll:</p>\n\n<pre><code>BOOL gActCtx;\nHANDLE ghActCtx\n</code></pre>\n\n<p>on <code>DLL_PROCESS_ATTACH</code> save current activation context (it from your dll manifest)</p>\n\n<pre><code>gActCtx = GetCurrentActCtx(&amp;ghActCtx);\n</code></pre>\n\n<p>free it on <code>DLL_PROCESS_DETACH</code></p>\n\n<pre><code>if (gActCtx) ReleaseActCtx(ghActCtx);\n</code></pre>\n\n<p>and when you need load <code>bar.dll</code> do next:</p>\n\n<pre><code>if (gActCtx)\n{\n    ULONG_PTR Cookie;\n\n    if (ActivateActCtx(ghActCtx, &amp;Cookie))\n    {\n        LoadLibraryExW(L\"bar.dll\", NULL, 0);\n\n        DeactivateActCtx(0, Cookie);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 746, "favorite_count": 1, "accepted_answer_id": 48308884, "answer_count": 1, "score": 5, "last_activity_date": 1570789329, "creation_date": 1516217038, "last_edit_date": 1519754098, "question_id": 48308530, "link": "https://stackoverflow.com/questions/48308530/loadlibraryex-ignores-side-by-side-manifest", "title": "LoadLibraryEx ignores side-by-side manifest", "body": "<p>Does <code>LoadLibraryEx</code> function use side-by-side manifests? I have bar.dll with embedded SxS manifest, and that manifest describes version of this bar.dll, other dll file foo.dll has manifest that lists bar.dll as dependency, with specified version. But when I try to load bar.dll from foo.dll with <code>LoadLibraryEx(\"bar.dll\", NULL, 0)</code> I see (with enabled sls with gflags) that it ignores these manifests, and loads first version of bar.dll that it sees in searchpath, if I define <code>ISOLATION_AWARE_ENABLED</code> and use <code>LoadLibrary</code> it finds right version, but this <code>ISOLATION_AWARE_ENABLED</code> doesn't affect behaviour of <code>LoadLibraryEx</code>, I need to load right version with <code>LoadLibraryEx</code> because <code>LoadLibraryEx</code> is used implicitly for delayed loading of dll's. Is <code>LoadLibraryEx</code> supposed to work like this, or is it some problem in my project configuration?</p>\n\n<p>foo dll</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n&lt;assembly xmlns=\"urn:schemas-microsoft-com:asm.v1\" manifestVersion=\"1.0\"&gt;\n&lt;assemblyIdentity name=\"foo\" version=\"0.1.2.3\" type=\"win32\"/&gt;\n&lt;dependency&gt;\n    &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"bar\" version=\"0.1.2.3\" type=\"win32\" /&gt;\n    &lt;/dependentAssembly&gt;\n&lt;/dependency&gt;\n&lt;file name=\"foo.dll\"&gt;\n&lt;/file&gt;\n&lt;/assembly&gt; \n</code></pre>\n\n<p>bar.dll</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n&lt;assembly xmlns=\"urn:schemas-microsoft-com:asm.v1\" manifestVersion=\"1.0\"&gt;\n&lt;assemblyIdentity name=\"bar\" version=\"0.1.2.3\" type=\"win32\"/&gt;\n&lt;file name=\"bar.dll\"&gt;\n&lt;/file&gt;\n&lt;/assembly&gt; \n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 4, "creation_date": 1516217040, "post_id": 48308499, "comment_id": 83602446, "body": "Read about <a href=\"http://en.cppreference.com/w/cpp/string/byte/strchr\" rel=\"nofollow noreferrer\"><code>std::strchr</code></a> and then read the error message again. The problem is not that <code>std::strchr</code> takes a <code>const char *</code>, it&#39;s that it returns a <code>const char *</code> and you can&#39;t assign it to a <code>char *</code> because that would lose the <code>const</code>. Use <code>const char *q</code> instead."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1516217083, "post_id": 48308499, "comment_id": 83602470, "body": "Note that the confusion may come from how in c <a href=\"http://en.cppreference.com/w/c/string/byte/strchr\" rel=\"nofollow noreferrer\"><code>strchr</code></a> takes <code>const char*</code> and returns <code>char*</code>."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 1, "creation_date": 1516217084, "post_id": 48308499, "comment_id": 83602471, "body": "Also you need to use <code>&quot;</code> instead of <code>&#39;</code> for strings."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1516217107, "post_id": 48308499, "comment_id": 83602483, "body": "You must be getting a different error, because you&#39;re not passing anything that can be converted to <code>const char*</code> to <code>validURL</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1516217541, "post_id": 48308499, "comment_id": 83602701, "body": "To validate a URL you might need a regular expression to do it. This looks really superficial."}, {"owner": {"reputation": 3, "user_id": 9225215, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PmNm8SKD2g4/AAAAAAAAAAI/AAAAAAAAAA4/flVP0a3eIOk/photo.jpg?sz=128", "display_name": "Ron", "link": "https://stackoverflow.com/users/9225215/ron"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1516217689, "post_id": 48308499, "comment_id": 83602777, "body": "@nwp thanks this worked for me. I misunderstood the site I was reading explaining the strchr or maybe I was looking at the C version and just assumed it was the same."}, {"owner": {"reputation": 3, "user_id": 9225215, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PmNm8SKD2g4/AAAAAAAAAAI/AAAAAAAAAA4/flVP0a3eIOk/photo.jpg?sz=128", "display_name": "Ron", "link": "https://stackoverflow.com/users/9225215/ron"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1516217783, "post_id": 48308499, "comment_id": 83602835, "body": "@tadman haha yea this is just a check against existing templates I am modifying someone&#39;s existing code they did not use reg ex. Thanks tho! If I have to rebuild from stratch I will look that route."}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1516219048, "post_id": 48308499, "comment_id": 83603547, "body": "You are trying to use C function with C++, among other things. Here it is working fine when compiled in C <a href=\"https://ideone.com/IS0rhz\" rel=\"nofollow noreferrer\">ideone.com/IS0rhz</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 3, "creation_date": 1516217803, "post_id": 48308680, "comment_id": 83602849, "body": "Casting away <code>const</code> from a top-level <code>const</code> object is just asking for UB. Would not recommend."}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1516217845, "post_id": 48308680, "comment_id": 83602873, "body": "Yeah definitely, I&#39;ll add that it&#39;s not recommended."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1516217905, "post_id": 48308680, "comment_id": 83602903, "body": "&quot;Must forward declare&quot; Is a bit strong. You can also place the function definition ahead of first use. Personally I don&#39;t like unnecessary prototypes because they&#39;re more lines of code that can be wrong."}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1516218019, "post_id": 48308680, "comment_id": 83602974, "body": "@user4581301 Do you mean declaring the function without the name of the argument?"}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1516218210, "post_id": 48308680, "comment_id": 83603071, "body": "@user4581301 Is there a difference between prototyping the function and forward declaring? I thought they were the same thing. Is the difference the name of the parameter/argument?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 2, "creation_date": 1516218504, "post_id": 48308680, "comment_id": 83603237, "body": "@Zebrafish To put it concisely: A function must be delcared before calling it. Whether that declaration it was a <i>forward</i> declaration or a definition is inconsequential."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1516218518, "post_id": 48308680, "comment_id": 83603248, "body": "I mean discard the forward declaration and put the function ahead of <code>main</code>. That way when you change the function to <code>bool validURL(const string &amp; url)</code> you don&#39;t have to make the change in two places or face linker/compiler errors."}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1516218793, "post_id": 48308680, "comment_id": 83603380, "body": "@user4581301 Ah, I see."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1516218794, "post_id": 48308680, "comment_id": 83603381, "body": "@user4581301 there is a good argument for using a forward declarations for all functions: If you forward declare all functions first, and then define them, then you don&#39;t need to care about the order of declarations or about the order of definitions at all. If you define all functions in first declaration, then you need to sort them in order of dependency. Complexity of sorting is a O(N log N), while partitioning declarations and definitions is O(N), so partitioning scales better for big code bases :)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1516219230, "post_id": 48308680, "comment_id": 83603652, "body": "I have to agree with that. Someone tripped over that problem yesterday and got infinite recursion as a result. Compiler or linker error would have been easier to sort out. Manually maintaining the forward declarations is a nuisance though. If you can automatically generate them as part of the build process, do it. Kills both problems. Assuming your code generator works correctly."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1516219408, "post_id": 48308680, "comment_id": 83603743, "body": "Complexity of sorting should be mitigated by writing the functions in a nice, testable order in the first place. If you need function X to implement function Y, you should have written and tested function X first. Be nice to live in a predicable, perfect world where you could do that, wouldn&#39;t it?"}], "tags": [], "owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "is_accepted": true, "score": 0, "last_activity_date": 1516217880, "last_edit_date": 1516217880, "creation_date": 1516217670, "answer_id": 48308680, "question_id": 48308499, "link": "https://stackoverflow.com/questions/48308499/c-error-conversion-from-const-char-to-char/48308680#48308680", "title": "C++ - Error Conversion from const char* to char*", "body": "<p>The right way to this is:</p>\n\n<pre><code>#include &lt;cstring&gt;\n#include &lt;string&gt;\n#include &lt;stdio.h&gt;\n\nbool validURL(const char *url);  // Must forward declare or prototype the \n                                // function before calling\n\nint main()\n{\n    validURL(\"www.why_CPP_hates_me.com\"); // Single quotes are for single chars\n                                          // Double quotes are for string \n                                          // literals, which create a const char*\n    return 0;\n}\n\nbool validURL(const char *url)\n{\n    const char *q = strchr(url, '?'); // You have to assign to a const char*\n                                      // to maintain const correctness.\n                                      // strchr() has const char* and char* \n                                      // overloads. But you have to assign to\n                                      // the correct type.\n\n    return true;\n}\n</code></pre>\n\n<p>Or if you wanted to you could do this:</p>\n\n<pre><code>bool validURL(const char *url)\n{\n    char *q = strchr(const_cast&lt;char*&gt;(url), '?');\n    // Casting away const is not recommended generally. Should be careful.\n    return true;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9225215, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PmNm8SKD2g4/AAAAAAAAAAI/AAAAAAAAAA4/flVP0a3eIOk/photo.jpg?sz=128", "display_name": "Ron", "link": "https://stackoverflow.com/users/9225215/ron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 0, "accepted_answer_id": 48308680, "answer_count": 1, "score": -2, "last_activity_date": 1516217880, "creation_date": 1516216901, "last_edit_date": 1516217077, "question_id": 48308499, "link": "https://stackoverflow.com/questions/48308499/c-error-conversion-from-const-char-to-char", "title": "C++ - Error Conversion from const char* to char*", "body": "<p>I am having an issue receiving this error when compiling code similar to the below.\nI am getting this error: invalid conversion from 'const char*' to 'char*' [-fpermissive].</p>\n\n<p>I am unsure why as the strchr function accepts const char* ? maybe I am confused here. I have looked at other people having this same error on this site but I still don't see the solution clearly.</p>\n\n<p>People had mentioned UNION? I have no clue how to use this keyword and was wondering if I could get clarification.</p>\n\n<p>Could someone explain why this is happening or how is the safest/best method to resolving this error? I have other errors just like this in other spots in my code in the same situation.</p>\n\n<pre><code>#include &lt;strings.h&gt;\n#include &lt;cstring&gt;\n#include &lt;string&gt;\n#include &lt;stdio.h&gt;\n\nint main()\n{\n    validURL ('www.why_CPP_hates_me.com');\n    return 0;\n}\n\nbool validURL (const char *url)\n{\n    char *q = strchr (url, '?');\n    ...\n    return true;\n}\n</code></pre>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 7, "creation_date": 1516216113, "post_id": 48308235, "comment_id": 83601981, "body": "<code>new</code> is a reserved keyword word in C++: <a href=\"http://en.cppreference.com/w/cpp/keyword\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/keyword</a>"}, {"owner": {"reputation": 23, "user_id": 9231253, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMTky.jpg?s=128&g=1", "display_name": "Jakub Krysztofiak", "link": "https://stackoverflow.com/users/9231253/jakub-krysztofiak"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1516216328, "post_id": 48308235, "comment_id": 83602088, "body": "Actually I was using a different name when programming. I just wanted to make it more clear here. But I will change because I didn&#39;t know it&#39;s reserved..."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1516216607, "post_id": 48308235, "comment_id": 83602219, "body": "Ok. In <code>mirrors</code> you need to stop swapping when you reach the middle of the string."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 2, "creation_date": 1516216616, "post_id": 48308235, "comment_id": 83602223, "body": "In <code>mirrors</code>, you cant index into an empty string. call resize() first or... simply: <code>return string(word.rbegin(), word.rend());</code>"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1516216898, "post_id": 48308235, "comment_id": 83602354, "body": "Please edit your question to contain <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 23, "user_id": 9231253, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMTky.jpg?s=128&g=1", "display_name": "Jakub Krysztofiak", "link": "https://stackoverflow.com/users/9231253/jakub-krysztofiak"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1516216997, "post_id": 48308235, "comment_id": 83602428, "body": "@JohnnyMopp Why is that? I&#39;m taking the last letter from an word and putting it as a first letter of a totally new word in mirrors."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1516217026, "post_id": 48308235, "comment_id": 83602442, "body": "&quot;My idea was to make three arrays: newword[25], words[1000], mirror[25] and then go one from there.&quot; this is a bad idea. Just have <code>std::set</code> with content from &quot;new.txt&quot; and read a word from &quot;words.txt&quot; one by one and count."}, {"owner": {"reputation": 23, "user_id": 9231253, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMTky.jpg?s=128&g=1", "display_name": "Jakub Krysztofiak", "link": "https://stackoverflow.com/users/9231253/jakub-krysztofiak"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1516217090, "post_id": 48308235, "comment_id": 83602474, "body": "@Borgleader could you explain this one a bit more? It looks like you have the answer but I simply don&#39;t understand the technical side"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1516217204, "post_id": 48308235, "comment_id": 83602526, "body": "@JakubKrysztofiak he means that doing <code>mir[whatever_number]</code> for empty string is wrong, that would not change size of string as you assumed, use <code>mir +=</code> instead, or change size of <code>mir</code> before that loop properly"}, {"owner": {"reputation": 23, "user_id": 9231253, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMTky.jpg?s=128&g=1", "display_name": "Jakub Krysztofiak", "link": "https://stackoverflow.com/users/9231253/jakub-krysztofiak"}, "edited": false, "score": 0, "creation_date": 1516217608, "post_id": 48308235, "comment_id": 83602734, "body": "Ok. I think that now everything is clear :D Thanks everyone for helping"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1516217690, "post_id": 48308235, "comment_id": 83602778, "body": "Ignore my comment. I thought you were doing an in-place reversal."}, {"owner": {"reputation": 193, "user_id": 7927672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/349c309560c1a72c588d75e757b651b7?s=128&d=identicon&r=PG&f=1", "display_name": "Ian4264 ", "link": "https://stackoverflow.com/users/7927672/ian4264"}, "edited": false, "score": 0, "creation_date": 1516217779, "post_id": 48308235, "comment_id": 83602831, "body": "Also see other posts on how to reverse a string like <a href=\"https://stackoverflow.com/questions/4951796/how-to-reverse-an-stdstring\" title=\"how to reverse an stdstring\">stackoverflow.com/questions/4951796/how-to-reverse-an-stdstr&zwnj;&#8203;ing</a>"}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1516217072, "post_id": 48308521, "comment_id": 83602463, "body": "you do not have to initialize <code>std::string</code> this way it has proper default ctor"}, {"owner": {"reputation": 23, "user_id": 9231253, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMTky.jpg?s=128&g=1", "display_name": "Jakub Krysztofiak", "link": "https://stackoverflow.com/users/9231253/jakub-krysztofiak"}, "edited": false, "score": 0, "creation_date": 1516217513, "post_id": 48308521, "comment_id": 83602687, "body": "So the problem is with the fact that I&#39;m trying create an empty string, what simply is not possible. Dzi\u0119ki za pomoc :D"}, {"owner": {"reputation": 509, "user_id": 9220448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5YtOb.jpg?s=128&g=1", "display_name": "mariusz_latarnik01", "link": "https://stackoverflow.com/users/9220448/mariusz-latarnik01"}, "edited": false, "score": 0, "creation_date": 1516217670, "post_id": 48308521, "comment_id": 83602768, "body": "It is possible string mir = &quot;&quot; is an example of creating empty string. The problem is similar to the array out of bounds: int t[10] = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10}; cout &lt;&lt; t[10]; // wrong index, t has only indexes 0..9 Strings like arrays has size, string a = &quot;aaa&quot; has size 3, and you can do operations like a[0], a[1], a[2], but a[3] is not allowed"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1516217988, "post_id": 48308521, "comment_id": 83602955, "body": "You got it wrong, create and empty string is easy, you cannot access symbols through <code>operator[]</code> on empty string"}, {"owner": {"reputation": 509, "user_id": 9220448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5YtOb.jpg?s=128&g=1", "display_name": "mariusz_latarnik01", "link": "https://stackoverflow.com/users/9220448/mariusz-latarnik01"}, "edited": false, "score": 0, "creation_date": 1516218274, "post_id": 48308521, "comment_id": 83603101, "body": "You can check the size of string by calling method string_name.size(); You can reference only to indexes &lt; string_name.size()  (and &gt;= 0), and you can&#39;t reference to indexes  &gt;= string_name.size() (and &lt; 0)."}, {"owner": {"reputation": 23, "user_id": 9231253, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMTky.jpg?s=128&g=1", "display_name": "Jakub Krysztofiak", "link": "https://stackoverflow.com/users/9231253/jakub-krysztofiak"}, "edited": false, "score": 0, "creation_date": 1516218476, "post_id": 48308521, "comment_id": 83603221, "body": "Ok. Now now i understand the problem :D thanks for helping"}], "tags": [], "owner": {"reputation": 509, "user_id": 9220448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5YtOb.jpg?s=128&g=1", "display_name": "mariusz_latarnik01", "link": "https://stackoverflow.com/users/9220448/mariusz-latarnik01"}, "is_accepted": true, "score": 1, "last_activity_date": 1516217382, "last_edit_date": 1516217382, "creation_date": 1516216995, "answer_id": 48308521, "question_id": 48308235, "link": "https://stackoverflow.com/questions/48308235/c-creating-a-word-letter-after-letter-in-string-data-type/48308521#48308521", "title": "C++: Creating a word &quot;letter after letter&quot; in string data type", "body": "<pre><code>string mirrors(string word) {\n    int dl = word.length();\n    string mir; // here you declare your string, but is's an empty string.\n    for (int q = 0; q &lt; dl; q++) {\n//      by calling mir[q] you are referencing to the [0, 1 ... dl-1] char of empty string (so it's size = 0) so it's undefined bhv/error.\n//      mir[q]=word[dl-q-1]; //first letter of a new word is a last letter of the original word\n        mir = mir + word[dl - q - 1]; // you rather wanted to do smth like this\n    }\n    return mir;\n}\n</code></pre>\n\n<ul>\n<li>using new as a variable name is not a very good idea as @Johny Mop pointed</li>\n<li>Jbc to mo\u017cesz te\u017c po polsku zada\u0107 pytanko w komentarzu :).</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1516217851, "creation_date": 1516217851, "answer_id": 48308720, "question_id": 48308235, "link": "https://stackoverflow.com/questions/48308235/c-creating-a-word-letter-after-letter-in-string-data-type/48308720#48308720", "title": "C++: Creating a word &quot;letter after letter&quot; in string data type", "body": "<p>First of all you try to access symbols in empty <code>std::string</code>, which leads to UB. In practice all of that is unnessesary:</p>\n\n<pre><code>std::string mirrors( const std::string &amp;word) //function that writes the word from the back \n{\n    return std::string( word.rbegin(), word.rend() );\n}\n</code></pre>\n\n<p>is enough. As for your program, it would be much better to read content of file \"new.txt\" into memory, and <code>std::set</code> or <code>std::unordered_set</code> would be much better for lookup. Then create 2 instances <code>std::map&lt;std::string,int&gt;</code> (or <code>std::unordered_map</code> if you do not care of order) and read file \"word.txt\" one by one, count and update those maps accordingly:</p>\n\n<pre><code>std::unordered_set&lt;std::string&gt; new_words; // this should be populated from file \"new.txt\"\nstd::map&lt;std::string,int&gt; counts, mcounts;\n// reading loop of file \"words.txt\"\nstd::string word = ...;\ncounts[ word ] += new_words.count( word );\nword = mirrors( word );\nmcounts[ word ] += new_words.count( word );\n</code></pre>\n\n<p>then you would have all your counts.</p>\n"}], "owner": {"reputation": 23, "user_id": 9231253, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMTky.jpg?s=128&g=1", "display_name": "Jakub Krysztofiak", "link": "https://stackoverflow.com/users/9231253/jakub-krysztofiak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 48308521, "answer_count": 2, "score": 1, "last_activity_date": 1516217851, "creation_date": 1516215880, "last_edit_date": 1516216234, "question_id": 48308235, "link": "https://stackoverflow.com/questions/48308235/c-creating-a-word-letter-after-letter-in-string-data-type", "title": "C++: Creating a word &quot;letter after letter&quot; in string data type", "body": "<p>I'm learning C++ for my exam and one thing is bugging me.<br>\nI had a file with 25 words (let's call it \"new.txt\") and a file with 1000 words (\"words.txt\").<br>\nI had to check how many times a word from new.txt appears in words.txt. And after this I had to check how many times does a \"mirror\" of a word for new.txt appears in words.txt (mirror meaning the word from right to left => car = rac..)   </p>\n\n<p>My idea was to make three arrays: newword[25], words[1000], mirror[25] and then go one from there.   </p>\n\n<p>I know how to do this with \"char\" data type. But i wanted to try doing it with \"string\" type.  </p>\n\n<p>Here is the code: </p>\n\n<pre><code>string mirrors(string word) //function that writes the word from the back \n{\n    int dl=word.length();\n    string mir;\n\n    for (int q=0;q&lt;dl;q++)\n    {\n        mir[q]=word[dl-q-1]; //first letter of a new word is a last letter of the original word\n    }\n\n    return mir;\n}\n\n\n\n\nint main()\n{\n\n    ifstream in1 (\"words.txt\");\n    ifstream in2 (\"new.txt\");\n\n    string words[1000], newword[25], mirror[25]; //creating arrays\n\n\n    for (int x=0;x&lt;1000;x++) //filling the array with words from words.txt\n    {\n        in1&gt;&gt;words[x];\n    }\n\n    for (int y=0;y&lt;25;y++) //filling the array with words from new.txt\n    {\n        in2&gt;&gt;newword[y];\n    }\n\n    in1.close();\n    in2.close();\n\n\n    for (int z=0;z&lt;25;z++)\n    {\n        mirror[z]=mirrors(newword[z]);\n    }\n\n    out.close();\n\n    return 0;\n}\n</code></pre>\n\n<p>And here is the problem...\nWhen I'm changing the order of the letters, the string from \"mirror\" does not print using normal cout&lt;\n\n<p>So my question is... Is there something with string data types that makes it impossible to print using one command after creating a word letter after letter, or is there something I have no clue about? </p>\n\n<p>Because the word is there, it is created in this array. But cout&lt;\n\n<p>I'm sorry if the question is not clear but it's my first time posting here...</p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1516215918, "post_id": 48308217, "comment_id": 83601868, "body": "What exception is it throwing? As far as I understand it, the possibilities are that the allocation is failing with <code>std::bad_alloc</code>, one of the <code>Data</code>&#39;s constructor is throwing or you have undefined behavior."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "edited": false, "score": 3, "creation_date": 1516215918, "post_id": 48308217, "comment_id": 83601869, "body": "Why don&#39;t you simply use a <code>std::vector&lt;Data&gt;</code> instead of a raw pointer and <code>new[]</code>? Also when asking for debugging help, post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please."}, {"owner": {"reputation": 2079, "user_id": 3461617, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b551849b0da31fcb2f8ffae813f7c834?s=128&d=identicon&r=PG&f=1", "display_name": "Sandro", "link": "https://stackoverflow.com/users/3461617/sandro"}, "edited": false, "score": 0, "creation_date": 1516217792, "post_id": 48308217, "comment_id": 83602842, "body": "1)Are you sure that exception is thrown by operator &quot;new&quot; can you write the exact exception type that you get? 2) What is the actual value of variable &quot;size&quot; when you call &quot;new&quot; maybe you have an error during its calculation and the &quot;size&quot; is too big? 3) Are you sure that new operator is not overloaded?"}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1516223523, "post_id": 48309482, "comment_id": 83605859, "body": "Also <code>memcpy</code> is not suitable for use with non-trivial types (but we can&#39;t tell that from the OP)"}, {"owner": {"reputation": 1491, "user_id": 479794, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e1c6237eaa959ad4a7e3a14aef7e8082?s=128&d=identicon&r=PG", "display_name": "Narf the Mouse", "link": "https://stackoverflow.com/users/479794/narf-the-mouse"}, "edited": false, "score": 0, "creation_date": 1516224578, "post_id": 48309482, "comment_id": 83606335, "body": "The test code uses a trivial type. Also, you are correct about needing sizeof(); however, the error itself was that count was not properly incremented, and it was encountering an out-of-bounds error and calling it a new[] error, AFAICT."}], "tags": [], "owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "is_accepted": true, "score": 2, "last_activity_date": 1516222458, "last_edit_date": 1516222458, "creation_date": 1516220980, "answer_id": 48309482, "question_id": 48308217, "link": "https://stackoverflow.com/questions/48308217/my-array-resizing-code-is-throwing-an-exception-on-new-datasize-t/48309482#48309482", "title": "My array resizing code is throwing an exception on new Data[size_t]", "body": "<pre><code>memcpy(newArray, values, size);\n</code></pre>\n\n<p>This is wrong. memcpy takes the number of bytes. Size is the number of items you have. You should use </p>\n\n<pre><code>memcpy(newArray, values, size * sizeof(*newArray));\n</code></pre>\n\n<p>Without it, your array gets corrupted after the first incomplete copy. From there you probably cause an unintended write (in other code) access to data pertainning to the heap, which has the next allocation fail.</p>\n\n<p>If that doesn't fix it, please enlighten us on sizeof(Data). And add debug prints in this code.</p>\n"}], "owner": {"reputation": 1491, "user_id": 479794, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e1c6237eaa959ad4a7e3a14aef7e8082?s=128&d=identicon&r=PG", "display_name": "Narf the Mouse", "link": "https://stackoverflow.com/users/479794/narf-the-mouse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 48309482, "answer_count": 1, "score": 1, "last_activity_date": 1516222458, "creation_date": 1516215827, "question_id": 48308217, "link": "https://stackoverflow.com/questions/48308217/my-array-resizing-code-is-throwing-an-exception-on-new-datasize-t", "title": "My array resizing code is throwing an exception on new Data[size_t]", "body": "<p>I have a custom storage type, with an underlying array. However, my EnsureCapacity() method is throwing an exception in new.</p>\n\n<p>I have no explanation, nor idea of how. The new[] is only trying to allocate 136,000 bytes, and the computer has 16 GB of RAM. It's a fairly standard Windows 10 machine running Visual Studio C++, so nothing too strange should be going on. To the best of my knowledge, I haven't done anything that should affect any part of the new[] or delete[] operator.</p>\n\n<p>I've closed and restarted Visual Studio, and restarted Windows, and the error still persists. I am, frankly, baffled and clueless.</p>\n\n<p>My code:</p>\n\n<pre><code>void EnsureCapacity()\n{\n    if (count &gt;= size)\n    {\n        // The array can start empty.\n        size_t newSize = std::max(2, size * 2);\n        // The exception is thrown here, in the new operator.\n        // Proved by following the call stack, and by tracing.\n        Data* newArray = new Data[newSize];\n        // It never gets here, or below.\n        // \"values\" is a simple Data* type, that is already allocated.\n        memcpy(newArray, values, size);\n        size = newSize;\n        delete[] values;\n        values = newArray;\n    }\n}\n</code></pre>\n\n<p>I am unsure about posting the code where the exception happens, as it is MS's, not mine.</p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1516215215, "post_id": 48308029, "comment_id": 83601492, "body": "It doesn&#39;t compile."}, {"owner": {"reputation": 9, "user_id": 6831817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcd4d199cce2fc940d1c94a6b1c7c710?s=128&d=identicon&r=PG&f=1", "display_name": "Scarlett", "link": "https://stackoverflow.com/users/6831817/scarlett"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1516215266, "post_id": 48308029, "comment_id": 83601527, "body": "@Galik. It compiles. I tested that before posting.(MSVC, x86)"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1516215326, "post_id": 48308029, "comment_id": 83601568, "body": "hint: <code>mutex</code> is supposed to perform thread synchronizing, in your code only one thread uses it."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 2, "creation_date": 1516215375, "post_id": 48308029, "comment_id": 83601596, "body": "It appears your question should be &quot;how do condition variables work and when to use them&quot;, and then you can answer this question by yourself."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1516215406, "post_id": 48308029, "comment_id": 83601614, "body": "You might have spurious wake_up in <code>wait</code>."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1516215420, "post_id": 48308029, "comment_id": 83601623, "body": "It doesn&#39;t compile for me and looking at the docs I don&#39;t see why it should compile. What compiler are you using?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1516215465, "post_id": 48308029, "comment_id": 83601643, "body": "@Galik The default language extensions for Visual Studio allows binding temporaries to non-const references."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1516215492, "post_id": 48308029, "comment_id": 83601659, "body": "Ah well that&#39;s non standard...."}, {"owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "edited": false, "score": 0, "creation_date": 1516215512, "post_id": 48308029, "comment_id": 83601674, "body": "MSVC emits a warning at /w4 bit it does allow it."}, {"owner": {"reputation": 9, "user_id": 6831817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcd4d199cce2fc940d1c94a6b1c7c710?s=128&d=identicon&r=PG&f=1", "display_name": "Scarlett", "link": "https://stackoverflow.com/users/6831817/scarlett"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1516215535, "post_id": 48308029, "comment_id": 83601681, "body": "@JohannesSchaub-litb i agree with you but if you could, can you specify some possible design faults this code can create or what&#39;s bad about it? I&#39;m on my learing path and i must know should i continue listen to the guy who told me this code is a terrible practice or not."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1516215602, "post_id": 48308029, "comment_id": 83601701, "body": "Well if it compiled, the obvious problem I see is the scope of the temporary lock. It goes out of scope as soon as you obtain it"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1516215603, "post_id": 48308029, "comment_id": 83601702, "body": "What are the reasons he gave to you ?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1516215704, "post_id": 48308029, "comment_id": 83601752, "body": "Of at least its working must dependent on how <code>wait</code> is implemented."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1516215731, "post_id": 48308029, "comment_id": 83601764, "body": "The problem is that <code>condition_variable</code> is designed to work with a condition  (some variable) which is synchronized by the mutex that&#39;s locked with the lock you provide it. Without a condition, spurious wake can cause you problems. In any case, this example isn&#39;t representative of when you would use <code>condition_variable</code> as it doesn&#39;t synchronize any data. You could just use <code>std::this_thread::sleep_for</code> directly in the worker and get the desired result. Instead, you provide <code>count</code> to the worker, synchronized by <code>mtx</code>, and have the worker check the modulo. Then you&#39;d have a condition."}, {"owner": {"reputation": 9, "user_id": 6831817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcd4d199cce2fc940d1c94a6b1c7c710?s=128&d=identicon&r=PG&f=1", "display_name": "Scarlett", "link": "https://stackoverflow.com/users/6831817/scarlett"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1516215795, "post_id": 48308029, "comment_id": 83601796, "body": "@Jarod42 like none. He just pointed out that this technique is a terrible practice and it&#39;s not allowed by the C++ spec. In other words, you can&#39;t program like that in C++. I have no idea what that means."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1516215883, "post_id": 48308029, "comment_id": 83601844, "body": "Standard <code>C++</code> should not compile this because... binding to non const reference is not allowed."}, {"owner": {"reputation": 9, "user_id": 6831817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcd4d199cce2fc940d1c94a6b1c7c710?s=128&d=identicon&r=PG&f=1", "display_name": "Scarlett", "link": "https://stackoverflow.com/users/6831817/scarlett"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1516215927, "post_id": 48308029, "comment_id": 83601876, "body": "@Fran&#231;oisAndrieux in your case, the <i>sleeping</i> would become <i>busy waiting</i>, which works a bit differently. Point is, i need to implement the <i>sleeping</i> one. I hope you know the differrence at OS level."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1516215993, "post_id": 48308029, "comment_id": 83601918, "body": "<a href=\"http://en.cppreference.com/w/cpp/thread/sleep_for\" rel=\"nofollow noreferrer\"><code>std::this_thread::sleep_for</code></a> is not &quot;busy waiting&quot;. It sleeps in the sense that the thread blocks rather then spins."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1516216235, "post_id": 48308029, "comment_id": 83602045, "body": "I would say <code>std::mutex mtx; std::unique_lock&lt;std::mutex&gt; mtxl(mtx); </code> and pass <code>mtxl</code> to <code>.wait</code>. Since you only need to process some of the notifications and not all, that&#39;s enough and no counter or something is needed."}, {"owner": {"reputation": 9, "user_id": 6831817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcd4d199cce2fc940d1c94a6b1c7c710?s=128&d=identicon&r=PG&f=1", "display_name": "Scarlett", "link": "https://stackoverflow.com/users/6831817/scarlett"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1516216269, "post_id": 48308029, "comment_id": 83602063, "body": "@Fran&#231;oisAndrieux as much as i know, it doesn&#39;t really sleep. It still there, occuping the system resourses and to <i>wake up</i> this thread, you don&#39;t use wake up instructions because it doesn&#39;t sleep."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1516216329, "post_id": 48308029, "comment_id": 83602091, "body": "Just take care of spurious wakeups.. if that&#39;s relevant. Could be solved by an <code>atomic&lt;bool&gt; x;</code> that the notification thread sets before waking."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1516216508, "post_id": 48308029, "comment_id": 83602160, "body": "@Fran&#231;oisAndrieux not sure I get the proposal to call <code>sleep_for</code>. For how long should it sleep?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1516216678, "post_id": 48308029, "comment_id": 83602252, "body": "@Scarlett If anything, I would expect <code>std::conditional_variable</code> to consume more system resources (though I can&#39;t confirm that). But in both cases, the thread continues to exist and consume resources... The thread doesn&#39;t disappear while it waits for the condition. I think there may be a misunderstanding regarding terminology."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1516216746, "post_id": 48308029, "comment_id": 83602288, "body": "@JohannesSchaub-litb The point I was trying to make was that in this example there is no exchange of information between the worker and the main thread. You could just sleep 3 seconds in the worker."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1516216851, "post_id": 48308029, "comment_id": 83602335, "body": "@Fran&#231;oisAndrieux spurious wakeups should not occur very often according to my sources, so there&#39;s still substantial difference."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1516216924, "post_id": 48308029, "comment_id": 83602380, "body": "@JohannesSchaub-litb I&#39;m not sure what difference you mean."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1516217078, "post_id": 48308029, "comment_id": 83602467, "body": "@Fran&#231;oisAndrieux waiting for 3 seconds always waits for at least 3 seconds. But waiting on the condition variable will never sleep longer than till the next notification. Sometimes it may wake up earlier, but it will happen (according to my sources) rarely."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1516217210, "post_id": 48308029, "comment_id": 83602532, "body": "@JohannesSchaub-litb <code>std::conditional_variable::wait</code> may also have a delay. The language doesn&#39;t specify how and when blocked threads get scheduled by the operating system. It simply states that a notification can unblock the waiting thread. And discounting spurious wake is not portable. You can&#39;t assume the frequency."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1516217514, "post_id": 48308029, "comment_id": 83602689, "body": "@Fran&#231;oisAndrieux all CPU instructions have a delay. But like a call to <code>wait</code>, they are way below 3 seconds by any practical means and therefore my <code>wait</code> call will lead to better notification latency. For the portability issue, you can put &quot;Only supported on Linux&quot; in the README.md file."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1516217730, "post_id": 48308029, "comment_id": 83602803, "body": "@JohannesSchaub-litb In the absence of platform and compiler tags, it&#39;s assumed the question is asking for a language conforming answer. Note that using <code>sleep_for</code> is <i>not</i> a proposed answer. I used it to illustrate that the worker and main threads do not need to communicate. Finally, the delay on wake for <code>sleep_for</code> is allowed specifically <i>&quot;due to scheduling or resource contention delays.&quot;</i>. The same delays inherent to <code>conditional_variable</code>&#39; wait."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1516217911, "post_id": 48308029, "comment_id": 83602910, "body": "It&#39;s still conforming with many spurious wakeups, but just behaves less desirable. You always have this problem with unknown platforms that you haven&#39;t tested your program with. The prints with <code>cout</code> may block the program progress for long periods of time, seconds, even minutes, if the destination device lags. As you say, the scheduler may have undesirable properties aswell wrt time slices for threads. The programm will still be conforming."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1516217953, "post_id": 48308029, "comment_id": 83602934, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/163351/discussion-between-francois-andrieux-and-johannes-schaub-litb\">continue this discussion in chat</a>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1516218194, "post_id": 48308029, "comment_id": 83603063, "body": "The entire point of moving this to chat is that the comment section is not the place for a discussion. Why are you making a copy of it here?"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1516218972, "post_id": 48308029, "comment_id": 83603494, "body": "@Fran&#231;oisAndrieux I agree. Using condition_variable here seems not to be the best way. I guess I find this chat thing confusing."}], "answers": [{"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 2, "last_activity_date": 1516216616, "creation_date": 1516216616, "answer_id": 48308438, "question_id": 48308029, "link": "https://stackoverflow.com/questions/48308029/whats-the-proper-way-of-implementing-sleeping-technique-using-c/48308438#48308438", "title": "What&#39;s the proper way of implementing &#39;sleeping&#39; technique using C++?", "body": "<p>Before you call <code>wait</code>, you must check that the thing you are waiting for hasn't already happened. And before you stop calling <code>wait</code>, you must check that the thing you are waiting for <em>has</em> happened. Condition variables are stateless and have no idea what you're waiting for. It's your job to code that.</p>\n\n<p>Also, the associated mutex <em>must</em> protect the thing you're waiting for. The entire point of a condition variable is to provide an atomic \"unlock and wait\" operation to prevent this problem:</p>\n\n<ol>\n<li>You check if you need to wait under the protection of a mutex.</li>\n<li>You decide you do need to wait.</li>\n<li>You unlock the mutex so other threads can make progress.</li>\n<li>You wait.</li>\n</ol>\n\n<p>But what if the thing you're waiting for happens after you unlocked the mutex but before you waited? You'll be waiting for something that already happened.</p>\n\n<p>This is why the <code>wait</code> function takes a lock holder -- so that it can perform steps 3 and 4 atomically.</p>\n"}], "owner": {"reputation": 9, "user_id": 6831817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcd4d199cce2fc940d1c94a6b1c7c710?s=128&d=identicon&r=PG&f=1", "display_name": "Scarlett", "link": "https://stackoverflow.com/users/6831817/scarlett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1516216616, "creation_date": 1516214961, "last_edit_date": 1516215315, "question_id": 48308029, "link": "https://stackoverflow.com/questions/48308029/whats-the-proper-way-of-implementing-sleeping-technique-using-c", "title": "What&#39;s the proper way of implementing &#39;sleeping&#39; technique using C++?", "body": "<p>Two thread. Main one is constantly gathering notifications while the other one is processing some of them.\nThe way i implemet it - is not correct as i've been told. What problems is it causing and what's wrong about it?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;atomic&gt;\n#include &lt;thread&gt;\n#include &lt;mutex&gt;\n#include &lt;chrono&gt;\n\nstd::condition_variable foo;\nstd::mutex mtx;\n\nvoid secondThread()\n{\n    while (true)\n    {\n            foo.wait(std::unique_lock&lt;std::mutex&gt;(mtx));\n            std::cout &lt;&lt; \" ----------------------------\" &lt;&lt; std::endl;\n            std::cout &lt;&lt; \"|processing a notification...|\" &lt;&lt; std::endl;\n            std::cout &lt;&lt; \" ----------------------------\" &lt;&lt; std::endl;\n    }\n}\nint main()\n{\n    std::thread subThread = std::thread(&amp;secondThread);\n    int count = 0;\n    while (true)\n    {\n        if (count % 10 == 0)\n        {\n            foo.notify_one();\n        }\n        std::cout &lt;&lt; \"Main thread working on gathering notifications...\" &lt;&lt; std::endl;\n        std::this_thread::sleep_for(std::chrono::milliseconds(300));\n        count++;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I was told that this <code>foo.wait(std::unique_lock&lt;std::mutex&gt;(mtx))</code> line of code is not a good practice according to the C++ spec. This is not a proper way of solving this kind of problem. It's also called, sleeping(not busy waiting).</p>\n"}, {"tags": ["c++", "c++11", "reference"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1516214909, "post_id": 48308008, "comment_id": 83601305, "body": "You aren&#39;t checking that values of <code>obja</code> and <code>objb</code>. The reference most certainly did not rebind."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1516214930, "post_id": 48308008, "comment_id": 83601320, "body": "<code>r = objb;</code> is the same as <code>obja = objb;</code> in this context."}, {"owner": {"reputation": 3926, "user_id": 3004698, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/adc6701aaba8834c47779319be4ea252?s=128&d=identicon&r=PG&f=1", "display_name": "SLN", "link": "https://stackoverflow.com/users/3004698/sln"}, "edited": false, "score": 0, "creation_date": 1516215036, "post_id": 48308008, "comment_id": 83601385, "body": "@ ahh! I got it, it just copped the value of objb in to obja, but the r is still refers to obja"}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 1, "creation_date": 1516215064, "post_id": 48308008, "comment_id": 83601401, "body": "@SLN Well, kind of... But not quite as <code>r</code> <b>is</b> <code>obja</code>."}, {"owner": {"reputation": 3926, "user_id": 3004698, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/adc6701aaba8834c47779319be4ea252?s=128&d=identicon&r=PG&f=1", "display_name": "SLN", "link": "https://stackoverflow.com/users/3004698/sln"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1516215109, "post_id": 48308008, "comment_id": 83601427, "body": "@Ron would be very nice of you to elaborate a bit on the the not quite part"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1516215228, "post_id": 48308008, "comment_id": 83601501, "body": "Ron means that <code>r</code> and <code>obja</code> are two names for the same object. A reference is best thought of like that. Just another name. So to speak of <code>r</code> is to speak of <code>obja</code>."}, {"owner": {"reputation": 3926, "user_id": 3004698, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/adc6701aaba8834c47779319be4ea252?s=128&d=identicon&r=PG&f=1", "display_name": "SLN", "link": "https://stackoverflow.com/users/3004698/sln"}, "edited": false, "score": 0, "creation_date": 1516215292, "post_id": 48308008, "comment_id": 83601543, "body": "@all you guys are awesome, Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": true, "score": 5, "last_activity_date": 1516215370, "creation_date": 1516215370, "answer_id": 48308120, "question_id": 48308008, "link": "https://stackoverflow.com/questions/48308008/reference-is-able-to-refer-to-a-different-object-not-in-the-iteration-loop-body/48308120#48308120", "title": "Reference is able to refer to a different object (not in the iteration/loop body)", "body": "<p>You are reassigning a new value to <code>obja</code>, via <code>r</code>.<br>\nThe new value happens to be the value of <code>objb</code>.<br>\nThis does not reassociate the reference <code>r</code> to <code>objb</code>, I think you might be puzzled by what seems to be a demonstration of reassociating a reference to a new variable. That does not happen.\nYou can demonstrate what happens if you add at the end e.g.</p>\n\n<pre><code>cout &lt;&lt; obja &lt;&lt; \" \" &lt;&lt; objb &lt;&lt; endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": false, "score": 2, "last_activity_date": 1516215776, "last_edit_date": 1516215776, "creation_date": 1516215444, "answer_id": 48308140, "question_id": 48308008, "link": "https://stackoverflow.com/questions/48308008/reference-is-able-to-refer-to-a-different-object-not-in-the-iteration-loop-body/48308140#48308140", "title": "Reference is able to refer to a different object (not in the iteration/loop body)", "body": "<p><code>r = objb;</code> is not making <strong>r</strong> as a reference to <strong>objb</strong> , just value of <strong>objb</strong> is assigned to <strong>r</strong>.\n Try to print the address of both <strong>r</strong> and <strong>objb</strong>, it will have different address.</p>\n\n<pre><code>cout &lt;&lt;\"address of r = \"&lt;&lt;&amp;r&lt;&lt;endl;\ncout &lt;&lt;\"address of objb = \"&lt;&lt;&amp;objb&lt;&lt;endl;\n</code></pre>\n\n<p>If it was <strong>reference</strong> it prints same address like in <code>int &amp;r = obja;</code> because <strong>r</strong> is reference of <strong>obja</strong>  both are having the same address.</p>\n"}], "owner": {"reputation": 3926, "user_id": 3004698, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/adc6701aaba8834c47779319be4ea252?s=128&d=identicon&r=PG&f=1", "display_name": "SLN", "link": "https://stackoverflow.com/users/3004698/sln"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 48308120, "answer_count": 2, "score": 3, "last_activity_date": 1516215776, "creation_date": 1516214860, "question_id": 48308008, "link": "https://stackoverflow.com/questions/48308008/reference-is-able-to-refer-to-a-different-object-not-in-the-iteration-loop-body", "title": "Reference is able to refer to a different object (not in the iteration/loop body)", "body": "<p>There are questions about this but seems regarding the iteration scenario.  I've got a different situation here. The reference definition and \"re-assignment\" happen in the same scope.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main(void) {\n    int obja = 10, objb = 20;\n    int &amp;r = obja;\n    cout &lt;&lt; r &lt;&lt; endl; // prints the 10\n    r = objb; // ???? re-assigning worked? \n    cout &lt;&lt; r &lt;&lt; endl; // prints the 20\n    return 0;\n}\n</code></pre>\n\n<p><strong>Question:</strong> </p>\n\n<p>What I've understood wrongly? </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1516215708, "post_id": 48307977, "comment_id": 83601753, "body": "I don&#39;t get it, with A&lt;int&gt; b{{3,5}}; you pass two arguments to the constructor, but it only takes one, a T, which you&#39;ve specified to be &lt;int&gt;. So the template type of T is int, and then you create an A by passing two arguments to it when it only wants one."}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1516216367, "post_id": 48307977, "comment_id": 83602108, "body": "I believe the problem here is the the first template argument T is a type, and then the second template argument is an instance of T you initialised with T{ }. T have to be the same the thing but in the first argument it&#39;s a type and in the second argument it&#39;s a non-type, it&#39;s an object. Though I&#39;m not sure about this."}, {"owner": {"reputation": 11, "user_id": 7360284, "user_type": "registered", "profile_image": "https://graph.facebook.com/1213702852079376/picture?type=large", "display_name": "Leo Africaneus", "link": "https://stackoverflow.com/users/7360284/leo-africaneus"}, "reply_to_user": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1516216504, "post_id": 48307977, "comment_id": 83602158, "body": "It was a typo. I meant to write two_int which I corrected now. I use {3,5} for list initializing the two_int class member of A."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1516217089, "post_id": 48307977, "comment_id": 83602472, "body": "Are you using c++17?"}, {"owner": {"reputation": 11, "user_id": 7360284, "user_type": "registered", "profile_image": "https://graph.facebook.com/1213702852079376/picture?type=large", "display_name": "Leo Africaneus", "link": "https://stackoverflow.com/users/7360284/leo-africaneus"}, "edited": false, "score": 0, "creation_date": 1516217570, "post_id": 48307977, "comment_id": 83602719, "body": "I&#39;m using Xcode 9.2, Apple LLVM 9.0 and the settings shows C++ language dialect as GNU++14. But I can change it to C++17!"}], "answers": [{"comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1516215796, "post_id": 48308107, "comment_id": 83601797, "body": "Why <code>new</code>? Is there a reason for dynamic allocation?"}, {"owner": {"reputation": 642, "user_id": 6452255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a28085748c79d229dc9daba5b91d21ad?s=128&d=identicon&r=PG&f=1", "display_name": "define cindy const", "link": "https://stackoverflow.com/users/6452255/define-cindy-const"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1516215984, "post_id": 48308107, "comment_id": 83601913, "body": "Right. So we could have just made a <code>static const T</code> on the stack and returned a reference to that and be done. But given that T may not be trivially destructible, there could be a dependency on the order of the destruction of T and some other static constant. Since the order of destruction of static objects is not well defined between compilation units, it&#39;s often a good idea to either manually clean up static resources from main and/or not invoke their destructors."}, {"owner": {"reputation": 642, "user_id": 6452255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a28085748c79d229dc9daba5b91d21ad?s=128&d=identicon&r=PG&f=1", "display_name": "define cindy const", "link": "https://stackoverflow.com/users/6452255/define-cindy-const"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1516216593, "post_id": 48308107, "comment_id": 83602212, "body": "I&#39;m essentially referencing ideas presented here about static destruction: <a href=\"https://google.github.io/styleguide/cppguide.html#Static_and_Global_Variables\" rel=\"nofollow noreferrer\">google.github.io/styleguide/&hellip;</a>"}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1516216953, "post_id": 48308107, "comment_id": 83602397, "body": "The message I got when compiling his code is similar to his: &#39;two_int&#39;: illegal type for non-type template parameter &#39;default_value&#39;. I&#39;m interested in knowing if this is valid syntax or what."}, {"owner": {"reputation": 642, "user_id": 6452255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a28085748c79d229dc9daba5b91d21ad?s=128&d=identicon&r=PG&f=1", "display_name": "define cindy const", "link": "https://stackoverflow.com/users/6452255/define-cindy-const"}, "edited": false, "score": 0, "creation_date": 1516218183, "post_id": 48308107, "comment_id": 83603054, "body": "In all honesty, I was addressing removing the warning about reference of a temporary. This doesn&#39;t address the use of constructor arguments and template types in the second part of his question."}], "tags": [], "owner": {"reputation": 642, "user_id": 6452255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a28085748c79d229dc9daba5b91d21ad?s=128&d=identicon&r=PG&f=1", "display_name": "define cindy const", "link": "https://stackoverflow.com/users/6452255/define-cindy-const"}, "is_accepted": false, "score": 0, "last_activity_date": 1516215314, "creation_date": 1516215314, "answer_id": 48308107, "question_id": 48307977, "link": "https://stackoverflow.com/questions/48307977/how-to-return-a-reference-to-a-default-value-of-a-non-type-template-argument/48308107#48308107", "title": "how to return a reference to a default value of a non-type template argument", "body": "<p>Not exactly sure what you're looking for, but perhaps a static helper finishing for creating a static default T could be useful:</p>\n\n<pre><code>template &lt;typename T&gt;\nstatic const T&amp; default_value() {\n  static const T* t = new T{};\n  return *t;\n}\n</code></pre>\n\n<p>Note this will construct T at most once even across threads (in c++11), but still never destruct T. Since it's static, it's likely the lack of destruction is acceptable, but this of course depends on T.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 7360284, "user_type": "registered", "profile_image": "https://graph.facebook.com/1213702852079376/picture?type=large", "display_name": "Leo Africaneus", "link": "https://stackoverflow.com/users/7360284/leo-africaneus"}, "edited": false, "score": 0, "creation_date": 1516219279, "post_id": 48308903, "comment_id": 83603674, "body": "This is a nice solution, now A&lt;int,6&gt; makes 6 the default_value."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "reply_to_user": {"reputation": 11, "user_id": 7360284, "user_type": "registered", "profile_image": "https://graph.facebook.com/1213702852079376/picture?type=large", "display_name": "Leo Africaneus", "link": "https://stackoverflow.com/users/7360284/leo-africaneus"}, "edited": false, "score": 0, "creation_date": 1516221556, "post_id": 48308903, "comment_id": 83604839, "body": "With <code>{}</code> in the initializer of <code>default_value</code> you can do <code>A&lt;two_int, 2, 4&gt;</code> aswell. Still no way to pass floats or doubles though."}], "tags": [], "owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "is_accepted": false, "score": 0, "last_activity_date": 1516221508, "last_edit_date": 1516221508, "creation_date": 1516218587, "answer_id": 48308903, "question_id": 48307977, "link": "https://stackoverflow.com/questions/48307977/how-to-return-a-reference-to-a-default-value-of-a-non-type-template-argument/48308903#48308903", "title": "how to return a reference to a default value of a non-type template argument", "body": "<p>Here is one version that forwards arguments to the constructor of a default_value stored as <code>constexpr</code>. You are quite limited here as to what is valid to pass as arguments (not sure exactly how limited) so it will depend on your use-case.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\ntemplate &lt;class T, auto... Args&gt;\nclass A{\nprivate:\n       T inclassValue;\n       constexpr static T default_val = T{Args...}; // Changed to curly brackets here\npublic:\n       constexpr A(T icv):inclassValue{icv}{}       \n\n       const T&amp; operator[](int k){\n          if(k==1) return inclassValue;\n       return default_val; \n       }\n};\n\nstruct two_int{int x;int y;};\n\nint main(){\n    A&lt;int&gt; a{4};\n    cout &lt;&lt; \"a[0]=\" &lt;&lt; a[0] &lt;&lt; endl;\n    cout &lt;&lt; \"a[1]=\" &lt;&lt; a[1] &lt;&lt; endl;\n\n    A&lt;two_int&gt; b{{3,5}};\n    cout &lt;&lt; \"b[0]=\" &lt;&lt; b[0].x &lt;&lt; \",\" &lt;&lt; b[0].y  &lt;&lt; endl;\n    cout &lt;&lt; \"b[1]=\" &lt;&lt; b[1].x &lt;&lt; \",\" &lt;&lt; b[1].y  &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7360284, "user_type": "registered", "profile_image": "https://graph.facebook.com/1213702852079376/picture?type=large", "display_name": "Leo Africaneus", "link": "https://stackoverflow.com/users/7360284/leo-africaneus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 311, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1516221508, "creation_date": 1516214710, "last_edit_date": 1516217019, "question_id": 48307977, "link": "https://stackoverflow.com/questions/48307977/how-to-return-a-reference-to-a-default-value-of-a-non-type-template-argument", "title": "how to return a reference to a default value of a non-type template argument", "body": "<p>I have done a lot of research on this but I wasn't able to find a design pattern addressing the problem. This is a minimal description of what I'm trying to perform.  </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\ntemplate &lt;class T, T default_value=T{}&gt;\nclass A{\nprivate:\n       T inclassValue;\npublic:\n       A(T icv):inclassValue{icv}{}       \n\n       const T&amp; operator[](int k){\n          if(k==1) return inclassValue;\n       return default_value; \n       }\n};\n\nstruct two_int{int x;int y;};\n\nint main(){\n    A&lt;int&gt; a{4};\n    cout &lt;&lt; \"a[0]=\" &lt;&lt; a[0] &lt;&lt; endl;\n    cout &lt;&lt; \"a[1]=\" &lt;&lt; a[1] &lt;&lt; endl;\n    /*\n    A&lt;two_int&gt; b{{3,5}};\n    cout &lt;&lt; \"b[0]=\" &lt;&lt; b[0].x &lt;&lt; \",\" &lt;&lt; b[0].y  &lt;&lt; endl;\n    cout &lt;&lt; \"b[1]=\" &lt;&lt; b[1].x &lt;&lt; \",\" &lt;&lt; b[1].y  &lt;&lt; endl;\n    */\n    return 0;\n\n}\n</code></pre>\n\n<p>The code will compile, link and output as expected</p>\n\n<pre><code>a[0]=0\na[1]=4\n</code></pre>\n\n<p>The compiler complains though and issues a warning for the line of code where default_value is used </p>\n\n<pre><code>return default_value;//Returning reference to local temporary object\n</code></pre>\n\n<p>which makes some sense. Uncommenting the last part in main and compiling, the compiler issue this time an error while building the template</p>\n\n<pre><code>template &lt;class T,  const T default_value= T{}&gt;//A non-type template parameter cannot have type 'two_int'\n</code></pre>\n\n<p>while what I ideally hope for is</p>\n\n<pre><code>b[0]=0,0\nb[1]=3,5\n</code></pre>\n\n<p>I was able to come up with a solution by adding an extra helper class, that will provide the default_value of T (as a static member), to the template arguments. I'm not convinced by the robustness of my trick and I was wondering if there exists a design pattern addressing this. The warning for types and the error for non-types. Also, I shall add that my primary goal is to be able to provide default_value at will (6 for int for example instead of 0).</p>\n\n<p>Thanks     </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1516214185, "post_id": 48307692, "comment_id": 83600951, "body": "Add a standard flag (<code>--std=c++0x</code> or <code>--std=c++03</code>), as well as the <code>-pedantic-errors</code> flag, and you&#39;ll see it&#39;s an extension. If that doesn&#39;t help, then GCC 4.4.7 has a bug."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1516215243, "post_id": 48307692, "comment_id": 83601515, "body": "Very interesting.  All version off gcc on <a href=\"https://gcc.godbolt.org/\" rel=\"nofollow noreferrer\">godbolt</a> compile this code while all versions off clang reject it.  I suspect this is a gcc  bug/extension.  Unfortunately using <code>-pedantic</code> doesn&#39;t change anything with gcc in this case."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1516215926, "post_id": 48307692, "comment_id": 83601875, "body": "Possible dupe with maybe the related bug report in the second answer: <a href=\"https://stackoverflow.com/questions/24378882/weird-gcc-array-initialization-behavior\" title=\"weird gcc array initialization behavior\">stackoverflow.com/questions/24378882/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1516215880, "creation_date": 1516215880, "answer_id": 48308234, "question_id": 48307692, "link": "https://stackoverflow.com/questions/48307692/array-initializer-must-be-an-initializer-list-error-not-shown/48308234#48308234", "title": "Array initializer must be an initializer list error not shown", "body": "<p>It is ill-formed, and GCC has a bug. You specify GCC 4.4.7, so I'm going to base this answer on C++11. The meaning of an initializer is determined by <a href=\"https://timsong-cpp.github.io/cppwp/n3337/dcl.init#16\" rel=\"nofollow noreferrer\">[dcl.init]/16</a>:</p>\n\n<blockquote>\n  <p>The semantics of initializers are as follows. The destination type is\n  the type of the object or reference being initialized and the source\n  type is the type of the initializer expression. If the initializer is\n  not a single (possibly parenthesized) expression, the source type is\n  not defined.</p>\n  \n  <ul>\n  <li>the initializer is a (non-parenthesized) braced-init-list, the object or reference is list-initialized ([dcl.init.list]).</li>\n  <li>If the destination type is a reference type, see [dcl.init.ref].</li>\n  <li>If the destination type is an array of characters, an array of char16_t, an array of char32_t, or an array of wchar_t, and the\n  initializer is a string literal, see [dcl.init.string].</li>\n  <li>If the initializer is <code>()</code>, the object is value-initialized.</li>\n  <li><strong>Otherwise, if the destination type is an array, the program is ill-formed.</strong></li>\n  <li>[... Continued but irrelevant here ... ]</li>\n  </ul>\n</blockquote>\n\n<p>The bullets must be checked in order to determine the meaning of an initializer for a target type. Since you use <code>(other.bs)</code> as an initializer, and the target type is an array, the only applicable bullet is the one I highlighted. The program is ill-formed.</p>\n"}], "owner": {"reputation": 33, "user_id": 9231164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865266da3c694ae23d18ca1218772c9?s=128&d=identicon&r=PG&f=1", "display_name": "AA_", "link": "https://stackoverflow.com/users/9231164/aa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 715, "favorite_count": 0, "accepted_answer_id": 48308234, "answer_count": 1, "score": 3, "last_activity_date": 1516271267, "creation_date": 1516213625, "last_edit_date": 1516271267, "question_id": 48307692, "link": "https://stackoverflow.com/questions/48307692/array-initializer-must-be-an-initializer-list-error-not-shown", "title": "Array initializer must be an initializer list error not shown", "body": "<p>I am having a hard time trying to figure out why this code seems to work. Shouldn't I get an \"array initializer must be an initializer list\" error?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass B {\npublic:\n  B() { std::cout &lt;&lt; \"B Constructor \" &lt;&lt; std::endl ; }\n  B(const B&amp;) { std::cout &lt;&lt; \"B Copy Constructor \" &lt;&lt; std::endl ; }\n  ~B() { std::cout &lt;&lt; \"B Destructor \" &lt;&lt; std::endl ; }\n} ;\n\nclass A {\npublic:\n  A() { std::cout &lt;&lt; \"A Constructor \" &lt;&lt; std::endl ; }\n  A(const A&amp; other) : bs(other.bs)\n        { std::cout &lt;&lt; \"A Copy Constructor \" &lt;&lt; std::endl ;}\n  ~A() { std::cout &lt;&lt; \"A Destructor \" &lt;&lt; std::endl ; }\nprivate:\n  B bs[12] ;\n};\n\n\nint main() {\n    A a ;\n    A b(a) ;\n    return 0 ;\n}\n</code></pre>\n\n<p>The output of <code>g++ --version</code> is <code>g++ (GCC) 4.4.7 20120313 (Red Hat 4.4.7-18)</code></p>\n"}, {"tags": ["c++", "vector", "converter"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1516213646, "post_id": 48307664, "comment_id": 83600699, "body": "You should not use pow() with integers."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1516213997, "post_id": 48307664, "comment_id": 83600862, "body": "&quot;have the 1&#39;s and 0&#39;s saved in a vector&quot; looks like yo just need <code>std::bitset</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1516216018, "post_id": 48307664, "comment_id": 83601932, "body": "Unrelated extension to @drescherjm &#39;s comment: <code>pow</code> is designed for really nasty cases like e to the power of pi, and this can make using it for something relatively simple like 2 to the x grossly expensive. You are probably better off with simple multiplication, possibly in a loop, or bit shifting (<code>1 &lt;&lt; n</code>)."}, {"owner": {"reputation": 53, "user_id": 8566868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2d21e5c2ae32d06bac6a5618a63e67?s=128&d=identicon&r=PG&f=1", "display_name": "Toma", "link": "https://stackoverflow.com/users/8566868/toma"}, "edited": false, "score": 0, "creation_date": 1516216646, "post_id": 48307664, "comment_id": 83602243, "body": "How would such a loop look like? can you give me a simple example?"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 8566868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2d21e5c2ae32d06bac6a5618a63e67?s=128&d=identicon&r=PG&f=1", "display_name": "Toma", "link": "https://stackoverflow.com/users/8566868/toma"}, "edited": false, "score": 0, "creation_date": 1516220897, "post_id": 48307850, "comment_id": 83604518, "body": "Wow, thanks a lot Mariusz that really helped. I was wondering, what exactly is this (int i : vector) mean? is it inheritance? or a syntax just for for loops?"}, {"owner": {"reputation": 509, "user_id": 9220448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5YtOb.jpg?s=128&g=1", "display_name": "mariusz_latarnik01", "link": "https://stackoverflow.com/users/9220448/mariusz-latarnik01"}, "reply_to_user": {"reputation": 53, "user_id": 8566868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2d21e5c2ae32d06bac6a5618a63e67?s=128&d=identicon&r=PG&f=1", "display_name": "Toma", "link": "https://stackoverflow.com/users/8566868/toma"}, "edited": false, "score": 0, "creation_date": 1516221183, "post_id": 48307850, "comment_id": 83604673, "body": "it means for each int i from vector. In this case you can replace it by: <code>for (int i = 0; i &lt; myNumInVect.size(); ++i) {          myNumInInteger = myNumInInteger * baseOfMyNumInVector + myNumInVect[i];     }</code>  We can do for(type name : container) {} for all containers that we can iterate thought but care bcs for(type name : container) {} != for(type &amp;name : container) {}  it&#39;s called &quot;range based for&quot; if you want to know more about it"}, {"owner": {"reputation": 509, "user_id": 9220448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5YtOb.jpg?s=128&g=1", "display_name": "mariusz_latarnik01", "link": "https://stackoverflow.com/users/9220448/mariusz-latarnik01"}, "reply_to_user": {"reputation": 53, "user_id": 8566868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2d21e5c2ae32d06bac6a5618a63e67?s=128&d=identicon&r=PG&f=1", "display_name": "Toma", "link": "https://stackoverflow.com/users/8566868/toma"}, "edited": false, "score": 0, "creation_date": 1516221646, "post_id": 48307850, "comment_id": 83604900, "body": "*through ...  <a href=\"https://www.cprogramming.com/c++11/c++11-ranged-for-loop.html\" rel=\"nofollow noreferrer\">Here</a> you have a good article about it, everything explained."}], "tags": [], "owner": {"reputation": 509, "user_id": 9220448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5YtOb.jpg?s=128&g=1", "display_name": "mariusz_latarnik01", "link": "https://stackoverflow.com/users/9220448/mariusz-latarnik01"}, "is_accepted": true, "score": 1, "last_activity_date": 1516215934, "last_edit_date": 1516215934, "creation_date": 1516214215, "answer_id": 48307850, "question_id": 48307664, "link": "https://stackoverflow.com/questions/48307664/c-convert-vector-of-integers-to-an-integer/48307850#48307850", "title": "c++ convert vector of integers to an integer", "body": "<p>I wrote smth like this for you:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nint main() {\n    vector&lt;int&gt; myNumInVect = {1, 1, 0, 0, 1};\n    int myNumInInteger = 0;\n    int baseOfMyNumInVector = 2;\n    for (int i : myNumInVect) {\n        myNumInInteger = myNumInInteger * baseOfMyNumInVector + i;\n    }\n    cout &lt;&lt; myNumInInteger;\n    return 0;\n}\n</code></pre>\n\n<p>(output of this code is 25 as expected (11001(2)=25(10))</p>\n\n<p>it uses <a href=\"https://en.wikipedia.org/wiki/Horner%27s_method\" rel=\"nofollow noreferrer\">Horner's method</a>, so number of operation '*' = vector.size(). It's easy adaptable to others bases positional numeral systems vector (by changing the baseOfMyNumInVector).</p>\n\n<p>-----------@edit-----------</p>\n\n<p>I know you have it, but i want also to show you how easy can be done conversion dec2givenBase without any pow, or smth like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std;\n\nint main() {\n    int myNumInInteger = 111;\n    int baseOfMyNumInVector = 2;\n    vector&lt;int&gt; myNumInVect;\n\n    while (myNumInInteger &gt; 0) { // using Horner Scheme for switching base\n        myNumInVect.push_back(myNumInInteger % baseOfMyNumInVector);\n        myNumInInteger /= baseOfMyNumInVector;\n    }\n\n    std::reverse(myNumInVect.begin(), myNumInVect.end()); // reverse (bcs there is no push_front() method in vector)\n\n    if (myNumInVect.empty()) { // handling the 0 case\n        myNumInVect.push_back(0);\n    }\n\n    for (auto digit : myNumInVect) { // write the result\n        cout &lt;&lt; digit;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1516215649, "post_id": 48307871, "comment_id": 83601726, "body": "<code>std::bitset</code> does not have iterators."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1516216110, "post_id": 48307871, "comment_id": 83601979, "body": "If it did, would they not be <b>bit</b>erators?"}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 2, "last_activity_date": 1516216010, "last_edit_date": 1516216010, "creation_date": 1516214315, "answer_id": 48307871, "question_id": 48307664, "link": "https://stackoverflow.com/questions/48307664/c-convert-vector-of-integers-to-an-integer/48307871#48307871", "title": "c++ convert vector of integers to an integer", "body": "<p>If I understood you correctly you need to convert <code>int</code> to set of bits and vice versa. Just use <a href=\"http://en.cppreference.com/w/cpp/utility/bitset\" rel=\"nofollow noreferrer\"><code>std::bitset</code></a> which has constructor from <code>unsigned long</code> and method to convert it back (you can also convert it to/from string of 0 and 1s). </p>\n"}], "owner": {"reputation": 53, "user_id": 8566868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2d21e5c2ae32d06bac6a5618a63e67?s=128&d=identicon&r=PG&f=1", "display_name": "Toma", "link": "https://stackoverflow.com/users/8566868/toma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1416, "favorite_count": 0, "accepted_answer_id": 48307850, "answer_count": 2, "score": 0, "last_activity_date": 1516216530, "creation_date": 1516213506, "last_edit_date": 1516216530, "question_id": 48307664, "link": "https://stackoverflow.com/questions/48307664/c-convert-vector-of-integers-to-an-integer", "title": "c++ convert vector of integers to an integer", "body": "<p>was searching the web for an easy guide and couldn't find one.</p>\n\n<p>I build a converter from decimal to binary and have the 1's and 0's saved in a vector. I want now to turn that vector into one integer.\nI found all kinds of ways (that I didn't really understand) to convert to string and than to integer, can that be avoided?\nI'd like to keep it as simple as possible.</p>\n\n<p>here is my code:</p>\n\n<p>c.hpp:</p>\n\n<pre><code>#ifndef C_HPP\n#define C_HPP\n#include &lt;vector&gt;\n\n\nclass Dualrechnung{\nprivate:\n    std::vector&lt;int&gt; vec;\n    int z = 123456; //Eingegebene Zahl\n    int t_z = z; //temp Zahl\n\npublic:\n    Dualrechnung();\n    ~Dualrechnung();\n};\n\n#endif\n</code></pre>\n\n<p>c.cpp:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;cmath&gt;\n#include &lt;sstream&gt;\n#include \"c.hpp\"\n#include &lt;iostream&gt;\n\n\nDualrechnung::Dualrechnung()\n{\n    int b;\n        for (int i=0; (t_z-(pow(2,i))) &gt;= 0; i++) //finds biggest power of 2 in z\n        {\n            b= i;\n        }\n        t_z-=pow(2,b); //whats left after the biggest power \n        vec.push_back(1);\n    for(int i = b; i &gt; 0; --i) //checks for every power of 2 multiples smaller than b if they exist in z. if they are, saves 1 for that power in the vector and if not, saves 0.\n    {\n        b--;\n        if((t_z-pow(2,b)) &gt;= 0)\n            {\n                vec.push_back(1);\n                t_z-=pow(2,b);\n            }\n        else{vec.push_back(0);}\n    }\n\n// here I'd like that integer with the information from the vector\n\n    int bin; //binary value of z\n        std::cout &lt;&lt; z &lt;&lt; \" in Dual ist \" &lt;&lt; bin;\n\n}\n\n\nDualrechnung::~Dualrechnung(){}\n</code></pre>\n\n<p>c_test.cpp:</p>\n\n<pre><code>#include \"c.cpp\"\n#include &lt;iostream&gt;\n\n\nint main(){\n\n    Dualrechnung *d = new Dualrechnung();\n    delete d;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "yuv", "v4l2"], "comments": [{"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1516213851, "post_id": 48307559, "comment_id": 83600797, "body": "Planar means all the Y pixels for the whole frame are stored first, then all the U values for the whole frame, then all the V values. By contrast, in a packed format you would have the YUV values packed together for the first pixel, then all the YUV values for the second pixel etc."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1516213992, "post_id": 48307559, "comment_id": 83600861, "body": "Basically you would take a whole WxH frame of consecutive Y values, then skip over half that many UV values before starting the next frame."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1516214705, "post_id": 48307559, "comment_id": 83601192, "body": "There&#39;s a nice diagram here <a href=\"http://picamera.readthedocs.io/en/release-1.10/recipes2.html\" rel=\"nofollow noreferrer\">picamera.readthedocs.io/en/release-1.10/recipes2.html</a>. Look at <code>Position in byte stream</code> to see how all the Y values arrive first."}, {"owner": {"reputation": 174, "user_id": 8379564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e4ae48efbb18e6f1cf512f05ea8036f?s=128&d=identicon&r=PG&f=1", "display_name": "trixr4kdz", "link": "https://stackoverflow.com/users/8379564/trixr4kdz"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1516214755, "post_id": 48307559, "comment_id": 83601221, "body": "Oh I see! So I would just need to run through each cell of the Ys, and then putting them into the destination would essentially be all the Y planes on top of each other?"}, {"owner": {"reputation": 40834, "user_id": 297323, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/97e8a3c4945a8a898cbf216ce912fd46?s=128&d=identicon&r=PG", "display_name": "Fredrik Pihl", "link": "https://stackoverflow.com/users/297323/fredrik-pihl"}, "edited": false, "score": 0, "creation_date": 1528451776, "post_id": 48307559, "comment_id": 88523531, "body": "Did you solve this or do you need additional help?"}], "owner": {"reputation": 174, "user_id": 8379564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e4ae48efbb18e6f1cf512f05ea8036f?s=128&d=identicon&r=PG&f=1", "display_name": "trixr4kdz", "link": "https://stackoverflow.com/users/8379564/trixr4kdz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 796, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1516213138, "creation_date": 1516213138, "question_id": 48307559, "link": "https://stackoverflow.com/questions/48307559/yuv420-to-grayscale-in-c", "title": "YUV420 to grayscale in C++", "body": "<p>I'm trying to write a function to convert a camera stream with a YUV420 pixel format to grayscale. To my understanding, I only need to extract the Y values since these are the luminance of the image frames.</p>\n\n<p>I am using this page as a reference <a href=\"https://linuxtv.org/downloads/v4l-dvb-apis/uapi/v4l/pixfmt-yuv420.html\" rel=\"nofollow noreferrer\">https://linuxtv.org/downloads/v4l-dvb-apis/uapi/v4l/pixfmt-yuv420.html</a>, but I am having trouble understanding what a planar format is and how to essentially skip through the UV values. I think I would need to get the 2x2 Y values (e.g., Y00, Y01, Y10, Y11 in the above link) for every UV values, but I'm also not sure if I should just write them consecutively into my image frame's destination. That is, if I have a pointer to my destination and I have these for Y values, should I just write them in the order of Y00, Y01, Y10, Y11, Y02, etc?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 0, "creation_date": 1516212943, "post_id": 48307455, "comment_id": 83600330, "body": "Why are you enumerating all the possible uses <i>in either case</i>? That entirely negates the point of having template functions."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1516212954, "post_id": 48307455, "comment_id": 83600332, "body": "If the amount of specialisation is growing exponentially, then you are most likely trying to solve a problem (using templates) that requires a different solution.  This feels like an XY-problem.  What is the underlying issue that you want to solve with templates?"}, {"owner": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "edited": false, "score": 0, "creation_date": 1516213059, "post_id": 48307455, "comment_id": 83600387, "body": "If you move the implementations to the header file (or a file that is included in), no."}, {"owner": {"reputation": 331, "user_id": 8231265, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/cr6PJ.jpg?s=128&g=1", "display_name": "Hello Everyone", "link": "https://stackoverflow.com/users/8231265/hello-everyone"}, "edited": false, "score": 0, "creation_date": 1516213231, "post_id": 48307455, "comment_id": 83600464, "body": "I leave it in <code>.cpp</code> for the sake of beauty. Now you enlighten me that it sux that way. Thanks."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 3, "creation_date": 1516213383, "post_id": 48307455, "comment_id": 83600567, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file\">Why can templates only be implemented in the header file?</a>"}, {"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 0, "creation_date": 1516213883, "post_id": 48307455, "comment_id": 83600807, "body": "If you don&#39;t like having it in the <i>same</i> file as the declarations, what I usually do is put my template implementations in a <code>.tcc</code> file and include that at the bottom of the header. To the compiler, it&#39;s the same effect, but now to the developer it looks like it&#39;s in two separate files."}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1516214508, "post_id": 48307455, "comment_id": 83601085, "body": "&quot;I leave it in .cpp for the sake of beauty.&quot; What? If you split definition and declaration your optimizer has no chance to get all possible optimizations done, simply because the compiler don&#39;t see the complete picture. As a hammer on that problem you can switch on link time optimzer, ok. But it is less common to split definitions from declarations in C++ than in C! You should think again of &quot;beauty&quot; and see more the technical aspects!"}], "owner": {"reputation": 331, "user_id": 8231265, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/cr6PJ.jpg?s=128&g=1", "display_name": "Hello Everyone", "link": "https://stackoverflow.com/users/8231265/hello-everyone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1516212743, "creation_date": 1516212743, "question_id": 48307455, "link": "https://stackoverflow.com/questions/48307455/when-and-when-not-specializing-template-instances", "title": "When and when not specializing template instances", "body": "<p>I have just learn a few pages about templates and have the following problem.\n<code>A.h</code></p>\n\n<pre><code>struct A\n{\n   template&lt;class T&gt; T func();\n}; \n</code></pre>\n\n<p><code>A.cpp</code></p>\n\n<pre><code>template&lt;class T&gt;\nT func()\n{\n   //do something\n}\n\ntemplate&lt;&gt; int A::func&lt;int&gt;();\ntemplate&lt;&gt; char A::func&lt;char&gt;();\n</code></pre>\n\n<p>Now if I have this struct</p>\n\n<pre><code>template&lt;class C&gt;\nstruct B\n{\n    template&lt;typename T&gt;\n    T func();\n};\n</code></pre>\n\n<p>Will I have to write out all cases when <code>func</code> is to be used with what specific <code>class C</code> ?</p>\n\n<pre><code>e.g \ntemplate&lt;classX&gt; int func&lt;int&gt;();\ntemplate&lt;classX&gt; char func&lt;char&gt;();\ntemplate&lt;classY&gt; int func&lt;int&gt;();\n....\n</code></pre>\n"}, {"tags": ["c++", "linux", "static", "dlopen"], "comments": [{"owner": {"reputation": 216, "user_id": 3049939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/366abfa0c6dbe26f9fdea1b74192614b?s=128&d=identicon&r=PG&f=1", "display_name": "Todd Fleming", "link": "https://stackoverflow.com/users/3049939/todd-fleming"}, "edited": false, "score": 0, "creation_date": 1516216039, "post_id": 48307411, "comment_id": 83601946, "body": "You didn&#39;t include compilation and link commands for MyLibaryTest. The problem could be there."}], "answers": [{"comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1516258378, "post_id": 48308989, "comment_id": 83616145, "body": "This does not explain the phenomenon. dlopen should not normally load a second copy of a shared object, no matter how the first copy was brought in."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1516258671, "post_id": 48308989, "comment_id": 83616266, "body": "This could happen if the executable physically contains MyClass.o i.e. is linked with it staically."}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1516259710, "post_id": 48308989, "comment_id": 83616766, "body": "Yes, a second copy will not be loaded, which means if you link the library and dlopen it, only one copy is loaded. But if you change the path/name of the library and dlopen it, it&#39;s another story."}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1516261822, "post_id": 48308989, "comment_id": 83617735, "body": "It would be clearer if you look at the glibc dump, there are 2 libMyLibrary.so loaded with different paths."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1516264357, "post_id": 48308989, "comment_id": 83619037, "body": "Hmm. The dlopen man page says it should not depend on paths being used. The soname should identify the lib, not the path. I&#39;ll try to test it.."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1516265595, "post_id": 48308989, "comment_id": 83619780, "body": "OK got it. Soname doesn&#39;t matter, the file itself does (inode?) If both paths point to the same file (e.g. with symbolic links) everything works OK. If you have two separate files, even identical, it crashes as described."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1516266123, "post_id": 48308989, "comment_id": 83620096, "body": "As for why there&#39;s only one copy of the static variable: it&#39;s pretty much expected on Linux. The symbol is global and as such only one copy is being used, even though additional copies are loaded. To prevent that, one needs to link with -Bsymbolic. Perhaps this is the default on Mac OS X?"}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1516270624, "post_id": 48308989, "comment_id": 83622995, "body": "Thanks for the info about -Bsymbolic on Linux. I tested on Mac OS X, a symbol in a dynamic library is resolved within itself by default."}, {"owner": {"reputation": 69, "user_id": 9230932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc33c018cf75a13cb6e809ff7693272?s=128&d=identicon&r=PG&f=1", "display_name": "ConanLord", "link": "https://stackoverflow.com/users/9230932/conanlord"}, "edited": false, "score": 0, "creation_date": 1516624692, "post_id": 48308989, "comment_id": 83750154, "body": "Thanks. I tried -Bsymbolic on Linux. The static variable is still created twice, but this time with two different memory locations. There is no more crash, but I wonder if there could be other sneaky bugs due to this duplicate variable."}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 0, "creation_date": 1516625467, "post_id": 48308989, "comment_id": 83750680, "body": "Your library being loaded twice  has nothing to do with -Bsymbolic. Did you check the <code>ldd</code> command to see your library is <i>already</i> linked to the executable ?"}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "reply_to_user": {"reputation": 69, "user_id": 9230932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc33c018cf75a13cb6e809ff7693272?s=128&d=identicon&r=PG&f=1", "display_name": "ConanLord", "link": "https://stackoverflow.com/users/9230932/conanlord"}, "edited": false, "score": 0, "creation_date": 1516625526, "post_id": 48308989, "comment_id": 83750713, "body": "@ConanLord Look at your glibc dump carefully, there are 2 copies of your library loaded from different path."}], "tags": [], "owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "is_accepted": false, "score": 3, "last_activity_date": 1516271111, "last_edit_date": 1516271111, "creation_date": 1516218885, "answer_id": 48308989, "question_id": 48307411, "link": "https://stackoverflow.com/questions/48307411/duplicate-static-variable-initialization-in-c/48308989#48308989", "title": "Duplicate static variable initialization in C++", "body": "<p>As Todd Fleming commented, I think probably you have mistakenly linked your MyLibrary.so into your test executable when you compile the test executable.</p>\n\n<p>You can use <em>ldd</em> to check whether your executable has been linked to the library.</p>\n\n<p>I have tried your code on my ubuntu linux with exactly the same compiling options. For the test executable, that MyLibrary.so should not be linked, so I didn't link it. It turns out the bizarre behavior didn't occur.\nWhen I linked the test executable with MyLibrary.so, the result is exactly what you said (including the glibc dump). It is not too surprising, because when you install your library to another path, the loader will regard it as another totally irrelevant library, thus double-loaded.</p>\n\n<p>PS: What surprised me is that these 2 singletons are placed in the same memory location, it's somewhat unbelievable. I also tested it (the case when the executable is linked to the library) on my mac os x, it turns out that on os x, these 2 instances have different memory location. It's more reasonable to me.</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>About why these 2 instances have the same memory location, actually it's a feature of symbol resolution in Linux. Please see the comments for details. Thanks n.m. for pointing out.</p>\n"}, {"tags": [], "owner": {"reputation": 3990, "user_id": 6095394, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7e512acda63343ac20eedd20c3964911?s=128&d=identicon&r=PG&f=1", "display_name": "pschill", "link": "https://stackoverflow.com/users/6095394/pschill"}, "is_accepted": false, "score": 0, "last_activity_date": 1516271912, "creation_date": 1516271912, "answer_id": 48319267, "question_id": 48307411, "link": "https://stackoverflow.com/questions/48307411/duplicate-static-variable-initialization-in-c/48319267#48319267", "title": "Duplicate static variable initialization in C++", "body": "<p>I think the static initialization problem is solved if you hide your static variable in a static getter. So in the header you replace the static class variable</p>\n\n<pre><code>static MyClass myStaticObjOfMyClass;\n</code></pre>\n\n<p>with a static class function</p>\n\n<pre><code>static MyClass&amp; getInstance();\n</code></pre>\n\n<p>and implement it in the cpp:</p>\n\n<pre><code>static MyClass&amp; getInstance()\n{\n    static MyClass instance(\"myStaticObjOfMyClass\", true);\n    return instance;\n}\n</code></pre>\n\n<p>The static object is initialized when <code>getInstance()</code> is called for the first time.</p>\n"}, {"tags": [], "owner": {"reputation": 69, "user_id": 9230932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc33c018cf75a13cb6e809ff7693272?s=128&d=identicon&r=PG&f=1", "display_name": "ConanLord", "link": "https://stackoverflow.com/users/9230932/conanlord"}, "is_accepted": true, "score": 0, "last_activity_date": 1516624409, "creation_date": 1516624409, "answer_id": 48381728, "question_id": 48307411, "link": "https://stackoverflow.com/questions/48307411/duplicate-static-variable-initialization-in-c/48381728#48381728", "title": "Duplicate static variable initialization in C++", "body": "<p>Thank you all for your answers.\nAs Todd said, I forgot to include the link command for MyLibraryTest. Here it is :</p>\n\n<pre><code>/usr/local/bin/g++  -O3 -DNDEBUG  -rdynamic CMakeFiles/MyLibraryTest.dir/MyLibraryTest.cpp.o  -o ../bin/MyLibraryTest -Wl,-rpath,/tmp/Build/MyLibraryTest/Release/bin: ../bin/libMyLibrary.so -ldl\n</code></pre>\n\n<p>The problem was related to the RPATH. If I do not use the -Wl,-rpath option any more, the test works fine !</p>\n\n<p>I use CMake to build my projects, and found this :\n<a href=\"https://cmake.org/Wiki/CMake_RPATH_handling\" rel=\"nofollow noreferrer\">https://cmake.org/Wiki/CMake_RPATH_handling</a>. Now I use the following command in my CMakeLists.txt, which removes the -Wl,-rpath link option.</p>\n\n<pre><code>set (CMAKE_SKIP_RPATH ON)\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 9230932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc33c018cf75a13cb6e809ff7693272?s=128&d=identicon&r=PG&f=1", "display_name": "ConanLord", "link": "https://stackoverflow.com/users/9230932/conanlord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1147, "favorite_count": 1, "accepted_answer_id": 48381728, "answer_count": 3, "score": 6, "last_activity_date": 1516624409, "creation_date": 1516212598, "question_id": 48307411, "link": "https://stackoverflow.com/questions/48307411/duplicate-static-variable-initialization-in-c", "title": "Duplicate static variable initialization in C++", "body": "<p>I build a shared library \"libMyLibrary.so\" with a class \"MyClass\" that contains a static variable of type \"MyClass\".\nThen I build an executable \"MyLibraryTest\" that I link against \"libMyLibrary.so\".\nThe main program uses \"dlopen\" to load dynamically a \".so\" given as an argument.</p>\n\n<p>While building, the library and executable are generated in a directory, say, \"buildDir/bin\".\nThen I install the library into \"installDir/lib\" and the executable into \"installDir/bin\" (removing the runtime path from the executable).</p>\n\n<p>When I run \"buildDir/MyLibraryTest buildDir/MyLibrary.so\" with LD_LIBRARY_PATH=buildDir, everything is fine.</p>\n\n<p>But when I run \"buildDir/MyLibraryTest installDir/lib/MyLibrary.so\" with LD_LIBRARY_PATH=installDir/lib, a very strange thing occurs :\n- The static variable's constructor is called <em>twice</em> (once before dlopen, once during dlopen)\n- At the end of the execution, the destructor is called twice, and this results into a crash.</p>\n\n<p>Here is my code :</p>\n\n<p>MyClass.h</p>\n\n<pre><code>#ifndef _MyClass_h__\n#define _MyClass_h__\n\n#include &lt;string&gt;\n\nclass MyClass\n{\nprivate:\n    static MyClass myStaticObjOfMyClass;\npublic:\n    MyClass(const std::string&amp; name, bool trace);\n    virtual ~MyClass();\nprivate:\n    std::string myName;\n    bool myTrace;\n};\n\n#endif // _MyClass_h__\n</code></pre>\n\n<p>MyClass.cpp</p>\n\n<pre><code>#include \"MyClass.h\"\n#include &lt;iostream&gt;\n\nMyClass MyClass::myStaticObjOfMyClass(\"myStaticObjOfMyClass\", true);\n\nMyClass::MyClass(const std::string&amp; name, bool trace) : myName(name), myTrace(trace)\n{\n    if (myTrace) std::cout &lt;&lt; \"MyClass::MyClass(name=\" &lt;&lt; myName &lt;&lt; \", address=\" &lt;&lt; this &lt;&lt; \")\" &lt;&lt; std::endl;\n}\n\nMyClass::~MyClass()\n{\n    if (myTrace) std::cout &lt;&lt; \"MyClass::~MyClass(name=\" &lt;&lt; myName &lt;&lt; \", address=\" &lt;&lt; this &lt;&lt; \")\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>MyLibraryTest.cpp</p>\n\n<pre><code>#include &lt;MyClass.h&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;dlfcn.h&gt;\n\nint main(int argc, char* argv[])\n{\n    const std::string sharedLibraryFullName((const char*)argv[1]);\n\n    // std::cout &lt;&lt; \"Try to load library \" &lt;&lt; sharedLibraryFullName &lt;&lt; std::endl;\n    void* handle = NULL;\n    std::cout &lt;&lt; \"dlopen(\" &lt;&lt; sharedLibraryFullName &lt;&lt; \")\" &lt;&lt; std::endl;\n    handle = dlopen(sharedLibraryFullName.c_str(), RTLD_LAZY | RTLD_GLOBAL);\n    if (handle == NULL)\n    {\n        std::cout &lt;&lt; \"ERROR : Could not load shared library \" &lt;&lt; sharedLibraryFullName &lt;&lt; std::endl;\n    }\n    else\n    {\n        std::cout &lt;&lt; \"OK, shared library \" &lt;&lt; sharedLibraryFullName &lt;&lt; \" is now loaded\" &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>Here are the compilation and link commands :</p>\n\n<pre><code>/usr/local/bin/g++  -DMyLibrary_DEFINED -DMyLibrary_EXPORTS  -O3 -DNDEBUG -fPIC   -o CMakeFiles/MyLibrary.dir/MyClass.cpp.o -c MyClass.cpp\n/usr/local/bin/g++ -fPIC -O3 -DNDEBUG  -shared -Wl,-soname,libMyLibrary.so -o ../bin/libMyLibrary.so CMakeFiles/MyLibrary.dir/MyClass.cpp.o\n</code></pre>\n\n<p>And at last here is what happens in the second case (duplicate initialization of the static variable) :</p>\n\n<pre><code>MyClass::MyClass(name=myStaticObjOfMyClass, address=0x7fa710cabb40)\ndlopen(/tmp/Install/MyLibraryTest/lib/libMyLibrary.so)\nMyClass::MyClass(name=myStaticObjOfMyClass, address=0x7fa710cabb40)\nOK, shared library /tmp/Install/MyLibraryTest/lib/libMyLibrary.so is now loaded\nMyClass::~MyClass(name=myStaticObjOfMyClass, address=0x7fa710cabb40)\nMyClass::~MyClass(name=\u0010\ufffd\ufffdObjOfMyClass, address=0x7fa710cabb40)\n*** glibc detected *** /tmp/Build/MyLibraryTest/Release/bin/MyLibraryTest: double free or corruption (fasttop): 0x0000000000cfb330 ***\n======= Backtrace: =========\n/lib64/libc.so.6[0x322f275dee]\n/lib64/libc.so.6[0x322f278c3d]\n/lib64/libc.so.6(__cxa_finalize+0x9d)[0x322f235d2d]\n/tmp/Build/MyLibraryTest/Release/bin/libMyLibrary.so(+0x1076)[0x7fa710aab076]\n======= Memory map: ========\n00400000-00402000 r-xp 00000000 fd:00 1325638                            /tmp/Build/MyLibraryTest/Release/bin/MyLibraryTest\n00601000-00602000 rw-p 00001000 fd:00 1325638                            /tmp/Build/MyLibraryTest/Release/bin/MyLibraryTest\n00ce9000-00d1b000 rw-p 00000000 00:00 0                                  [heap]\n322ee00000-322ee20000 r-xp 00000000 fd:00 545634                         /lib64/ld-2.12.so\n322f020000-322f021000 r--p 00020000 fd:00 545634                         /lib64/ld-2.12.so\n322f021000-322f022000 rw-p 00021000 fd:00 545634                         /lib64/ld-2.12.so\n322f022000-322f023000 rw-p 00000000 00:00 0 \n322f200000-322f38a000 r-xp 00000000 fd:00 545642                         /lib64/libc-2.12.so\n322f38a000-322f58a000 ---p 0018a000 fd:00 545642                         /lib64/libc-2.12.so\n322f58a000-322f58e000 r--p 0018a000 fd:00 545642                         /lib64/libc-2.12.so\n322f58e000-322f590000 rw-p 0018e000 fd:00 545642                         /lib64/libc-2.12.so\n322f590000-322f594000 rw-p 00000000 00:00 0 \n322fa00000-322fa02000 r-xp 00000000 fd:00 545709                         /lib64/libdl-2.12.so\n322fa02000-322fc02000 ---p 00002000 fd:00 545709                         /lib64/libdl-2.12.so\n322fc02000-322fc03000 r--p 00002000 fd:00 545709                         /lib64/libdl-2.12.so\n322fc03000-322fc04000 rw-p 00003000 fd:00 545709                         /lib64/libdl-2.12.so\n3230600000-3230683000 r-xp 00000000 fd:00 545684                         /lib64/libm-2.12.so\n3230683000-3230882000 ---p 00083000 fd:00 545684                         /lib64/libm-2.12.so\n3230882000-3230883000 r--p 00082000 fd:00 545684                         /lib64/libm-2.12.so\n3230883000-3230884000 rw-p 00083000 fd:00 545684                         /lib64/libm-2.12.so\n7fa70c000000-7fa70c021000 rw-p 00000000 00:00 0 \n7fa70c021000-7fa710000000 ---p 00000000 00:00 0 \n7fa7102e7000-7fa7102e9000 r-xp 00000000 fd:00 1320668                    /tmp/Install/MyLibraryTest/lib/libMyLibrary.so\n7fa7102e9000-7fa7104e8000 ---p 00002000 fd:00 1320668                    /tmp/Install/MyLibraryTest/lib/libMyLibrary.so\n7fa7104e8000-7fa7104e9000 rw-p 00001000 fd:00 1320668                    /tmp/Install/MyLibraryTest/lib/libMyLibrary.so\n7fa7104e9000-7fa7104ed000 rw-p 00000000 00:00 0 \n7fa7104ed000-7fa710503000 r-xp 00000000 fd:00 708322                     /usr/local/lib64/libgcc_s.so.1\n7fa710503000-7fa710702000 ---p 00016000 fd:00 708322                     /usr/local/lib64/libgcc_s.so.1\n7fa710702000-7fa710703000 rw-p 00015000 fd:00 708322                     /usr/local/lib64/libgcc_s.so.1\n7fa710703000-7fa710704000 rw-p 00000000 00:00 0 \n7fa710704000-7fa710883000 r-xp 00000000 fd:00 708539                     /usr/local/lib64/libstdc++.so.6.0.21\n7fa710883000-7fa710a83000 ---p 0017f000 fd:00 708539                     /usr/local/lib64/libstdc++.so.6.0.21\n7fa710a83000-7fa710a8d000 r--p 0017f000 fd:00 708539                     /usr/local/lib64/libstdc++.so.6.0.21\n7fa710a8d000-7fa710a8f000 rw-p 00189000 fd:00 708539                     /usr/local/lib64/libstdc++.so.6.0.21\n7fa710a8f000-7fa710a94000 rw-p 00000000 00:00 0 \n7fa710aa8000-7fa710aaa000 rw-p 00000000 00:00 0 \n7fa710aaa000-7fa710aac000 r-xp 00000000 fd:00 1325633                    /tmp/Build/MyLibraryTest/Release/bin/libMyLibrary.so\n7fa710aac000-7fa710cab000 ---p 00002000 fd:00 1325633                    /tmp/Build/MyLibraryTest/Release/bin/libMyLibrary.so\n7fa710cab000-7fa710cac000 rw-p 00001000 fd:00 1325633                    /tmp/Build/MyLibraryTest/Release/bin/libMyLibrary.so\n7fa710cac000-7fa710cad000 rw-p 00000000 00:00 0 \n7fff2fc61000-7fff2fc76000 rw-p 00000000 00:00 0                          [stack]\n7fff2fde5000-7fff2fde6000 r-xp 00000000 00:00 0                          [vdso]\nffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]\n./test_dyn_libs.sh: line 21: 30880 Abandon                 (core dumped) ${BuildDir}/MyLibraryTest ${InstallDir}/lib/libMyLibrary.so\n--- End of tests\n</code></pre>\n\n<p>Any help would be greatly appreciated !!!</p>\n"}, {"tags": ["c++", "c", "c-preprocessor"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8782808"}, "edited": false, "score": 0, "creation_date": 1516212753, "post_id": 48307385, "comment_id": 83600218, "body": "Will using <code>(...)</code> and <code>__VA_ARGS__</code> work for you? I\u2019m not sure what you\u2019re asking."}, {"owner": {"reputation": 5285, "user_id": 195873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53912b2e0cc619ca6c81ab1406522c2a?s=128&d=identicon&r=PG", "display_name": "Eric Niebler", "link": "https://stackoverflow.com/users/195873/eric-niebler"}, "edited": false, "score": 0, "creation_date": 1516213579, "post_id": 48307385, "comment_id": 83600667, "body": "I updated the problem description to give my motivating use case, but all I need is to know how to do <i>something</i> for each element in a list like <code>(A)(B)(C)</code>. I can do the rest."}, {"owner": {"reputation": 815, "user_id": 1150292, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VQ2aZ.jpg?s=128&g=1", "display_name": "Mara Bos", "link": "https://stackoverflow.com/users/1150292/mara-bos"}, "edited": false, "score": 0, "creation_date": 1516294179, "post_id": 48307385, "comment_id": 83638173, "body": "How strict is your requirement on the syntax? Does it need to be <code>(A)(B)(C)</code>, or is <code>((A)(B)(C))</code> also fine?"}], "answers": [{"comments": [{"owner": {"reputation": 5285, "user_id": 195873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53912b2e0cc619ca6c81ab1406522c2a?s=128&d=identicon&r=PG", "display_name": "Eric Niebler", "link": "https://stackoverflow.com/users/195873/eric-niebler"}, "edited": false, "score": 0, "creation_date": 1516217297, "post_id": 48307889, "comment_id": 83602572, "body": "The docs claim there is no limit on the number of elements that can be processed by something like <code>BOOST_PP_SEQ_FOLD_LEFT</code> (although something like <code>SIZE</code> or <code>ELEM</code> would have a limit, I suppose). I&#39;m still left wondering how that is achieved."}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "reply_to_user": {"reputation": 5285, "user_id": 195873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53912b2e0cc619ca6c81ab1406522c2a?s=128&d=identicon&r=PG", "display_name": "Eric Niebler", "link": "https://stackoverflow.com/users/195873/eric-niebler"}, "edited": false, "score": 0, "creation_date": 1516217626, "post_id": 48307889, "comment_id": 83602745, "body": "@EricNiebler That&#39;s interesting because looking at the source code (I have v1.60) it lists out these types of repeating macros up to 257 (at which point you get an error). I looked at the docs <a href=\"http://www.boost.org/doc/libs/1_64_0/libs/preprocessor/doc/ref/seq_fold_left.html\" rel=\"nofollow noreferrer\">here</a> and didn&#39;t see any mention of <i>not</i> having a limit, which I took to mean that there is the usual limit."}, {"owner": {"reputation": 5285, "user_id": 195873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53912b2e0cc619ca6c81ab1406522c2a?s=128&d=identicon&r=PG", "display_name": "Eric Niebler", "link": "https://stackoverflow.com/users/195873/eric-niebler"}, "edited": false, "score": 0, "creation_date": 1516217895, "post_id": 48307889, "comment_id": 83602898, "body": "From <a href=\"http://www.boost.org/doc/libs/1_62_0/libs/preprocessor/doc/AppendixA-AnIntroductiontoPreprocessorMetaprogramming.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_62_0/libs/preprocessor/doc/&hellip;</a>, &quot;It&#39;s worth noting that while there is no upper limit on the length of a sequence, operations such as <code>BOOST_PP_SEQ_ELEM</code> that take numeric arguments will only work with values up to 256.&quot;"}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "reply_to_user": {"reputation": 5285, "user_id": 195873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53912b2e0cc619ca6c81ab1406522c2a?s=128&d=identicon&r=PG", "display_name": "Eric Niebler", "link": "https://stackoverflow.com/users/195873/eric-niebler"}, "edited": false, "score": 1, "creation_date": 1516218681, "post_id": 48307889, "comment_id": 83603319, "body": "@EricNiebler Well, I&#39;m sorry to say that I have just tried an example with a sequence of 275 elements and BOOST_PP_SEQ_FOLD_LEFT failed. When I cut that sequence down to about 160 elements it worked so I think there is a size limit to BOOST_PP_FOLD_LEFT."}, {"owner": {"reputation": 5285, "user_id": 195873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53912b2e0cc619ca6c81ab1406522c2a?s=128&d=identicon&r=PG", "display_name": "Eric Niebler", "link": "https://stackoverflow.com/users/195873/eric-niebler"}, "edited": false, "score": 0, "creation_date": 1516218844, "post_id": 48307889, "comment_id": 83603410, "body": "Interesting! Are you using MSVC by chance? I know Boost.PP is hobbled on that compiler."}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "reply_to_user": {"reputation": 5285, "user_id": 195873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53912b2e0cc619ca6c81ab1406522c2a?s=128&d=identicon&r=PG", "display_name": "Eric Niebler", "link": "https://stackoverflow.com/users/195873/eric-niebler"}, "edited": false, "score": 0, "creation_date": 1516219292, "post_id": 48307889, "comment_id": 83603684, "body": "@EricNiebler GCC4.8, not a recent one for sure but I think the test is still valid."}, {"owner": {"reputation": 3789, "user_id": 2434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d51d8dcc8d3785976ae21fb5e25b4520?s=128&d=identicon&r=PG", "display_name": "Daniel James", "link": "https://stackoverflow.com/users/2434/daniel-james"}, "edited": false, "score": 1, "creation_date": 1516220391, "post_id": 48307889, "comment_id": 83604255, "body": "FWIW I think Chaos could deal with longer sequences. Seems to be a copy here: <a href=\"https://github.com/ldionne/chaos-pp\" rel=\"nofollow noreferrer\">github.com/ldionne/chaos-pp</a>"}, {"owner": {"reputation": 5285, "user_id": 195873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53912b2e0cc619ca6c81ab1406522c2a?s=128&d=identicon&r=PG", "display_name": "Eric Niebler", "link": "https://stackoverflow.com/users/195873/eric-niebler"}, "edited": false, "score": 0, "creation_date": 1516222020, "post_id": 48307889, "comment_id": 83605096, "body": "I have no hope of understanding how Chaos works before the heat death of the universe. :-("}, {"owner": {"reputation": 5285, "user_id": 195873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53912b2e0cc619ca6c81ab1406522c2a?s=128&d=identicon&r=PG", "display_name": "Eric Niebler", "link": "https://stackoverflow.com/users/195873/eric-niebler"}, "edited": false, "score": 0, "creation_date": 1516226020, "post_id": 48307889, "comment_id": 83606944, "body": "It&#39;s occurring to me now that simply knowing how to implement <code>BOOST_PP_SEQ_FOLD_LEFT</code> isn&#39;t really enough given the problem I describe above. There is no one macro that receives the whole list, so I can&#39;t figure out how to apply the techniques described here."}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "reply_to_user": {"reputation": 5285, "user_id": 195873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53912b2e0cc619ca6c81ab1406522c2a?s=128&d=identicon&r=PG", "display_name": "Eric Niebler", "link": "https://stackoverflow.com/users/195873/eric-niebler"}, "edited": false, "score": 0, "creation_date": 1516228364, "post_id": 48307889, "comment_id": 83607950, "body": "@EricNiebler I&#39;m not sure what you mean in your last comment, can&#39;t you just create a macro that pops the head of the sequence and does something with that, and then passes the tail of the sequence off to the iteration macro?"}], "tags": [], "owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "is_accepted": false, "score": 2, "last_activity_date": 1516217089, "last_edit_date": 1516217089, "creation_date": 1516214343, "answer_id": 48307889, "question_id": 48307385, "link": "https://stackoverflow.com/questions/48307385/how-does-boost-pp-seq-fold-left-work/48307889#48307889", "title": "How does BOOST_PP_SEQ_FOLD_LEFT work?", "body": "<p>Alright, here's a quick and dirty thing I whipped up that I think you can use:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#define LIST (1)(2)(3)(4)\n\n#define EAT2(list)\n#define EAT(list) EAT2 list\n#define KEEP(x) x EAT2(\n#define STRINGIFY2(x) #x\n#define STRINGIFY(x) STRINGIFY2(x)\n\n#define HEAD(list) KEEP list )\n#define TAIL(list) EAT(list)\nint main()\n{\n    std::cout &lt;&lt; STRINGIFY(HEAD(LIST)) &lt;&lt; std::endl;\n    std::cout &lt;&lt; STRINGIFY(TAIL(LIST)) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Basically, you need to get tricky with how you call macros.<br>\nTake for example:  </p>\n\n<pre><code>HEAD((1)(2))\n</code></pre>\n\n<p>expands to</p>\n\n<pre><code>KEEP (1)(2) )\n</code></pre>\n\n<p>which expands to</p>\n\n<pre><code>1 EAT2 ((2))\n</code></pre>\n\n<p>which expands to</p>\n\n<pre><code>1\n</code></pre>\n\n<p>This isn't a full answer, but I think can be a starting point for what you want to to do.</p>\n\n<p><strong>EDIT</strong>  </p>\n\n<p>I have now figured out how BOOST.PP does its iterations and it's not pretty, you basically manually write out iterations up to some maximum size.  </p>\n\n<pre><code>#define CONCAT2(x, y) x##y\n#define CONCAT(x, y) CONCAT2(x, y)\n\n#define SEQ_SIZE(seq) CONCAT(SEQ_SIZE_, SEQ_SIZE_0 seq)\n\n# define SEQ_SIZE_0(_) SEQ_SIZE_1\n# define SEQ_SIZE_1(_) SEQ_SIZE_2\n# define SEQ_SIZE_2(_) SEQ_SIZE_3\n# define SEQ_SIZE_3(_) SEQ_SIZE_4\n# define SEQ_SIZE_4(_) SEQ_SIZE_5\n# define SEQ_SIZE_5(_) SEQ_SIZE_6\n# define SEQ_SIZE_6(_) SEQ_SIZE_7\n# define SEQ_SIZE_7(_) SEQ_SIZE_8\n# define SEQ_SIZE_8(_) SEQ_SIZE_9\n# define SEQ_SIZE_9(_) SEQ_SIZE_10\n# define SEQ_SIZE_10(_) SEQ_SIZE_11\n# define SEQ_SIZE_SEQ_SIZE_0 0\n# define SEQ_SIZE_SEQ_SIZE_1 1\n# define SEQ_SIZE_SEQ_SIZE_2 2\n# define SEQ_SIZE_SEQ_SIZE_3 3\n# define SEQ_SIZE_SEQ_SIZE_4 4\n# define SEQ_SIZE_SEQ_SIZE_5 5\n# define SEQ_SIZE_SEQ_SIZE_6 6\n# define SEQ_SIZE_SEQ_SIZE_7 7\n# define SEQ_SIZE_SEQ_SIZE_8 8\n# define SEQ_SIZE_SEQ_SIZE_9 9\n# define SEQ_SIZE_SEQ_SIZE_10 10\n\n#define MAKE_VAR(elem)                         \\\n    float CONCAT(var_, elem) = 0;\n\n#define MAKE_LIST_0(op, list)\n#define MAKE_LIST_1(op, list)  op (HEAD(list)) MAKE_LIST_0(op, TAIL(list))\n#define MAKE_LIST_2(op, list)  op (HEAD(list)) MAKE_LIST_1(op, TAIL(list))\n#define MAKE_LIST_3(op, list)  op (HEAD(list)) MAKE_LIST_2(op, TAIL(list))\n#define MAKE_LIST_4(op, list)  op (HEAD(list)) MAKE_LIST_3(op, TAIL(list))\n#define MAKE_LIST_5(op, list)  op (HEAD(list)) MAKE_LIST_4(op, TAIL(list))\n#define MAKE_LIST_6(op, list)  op (HEAD(list)) MAKE_LIST_5(op, TAIL(list))\n#define MAKE_LIST_7(op, list)  op (HEAD(list)) MAKE_LIST_6(op, TAIL(list))\n#define MAKE_LIST_8(op, list)  op (HEAD(list)) MAKE_LIST_7(op, TAIL(list))\n#define MAKE_LIST_9(op, list)  op (HEAD(list)) MAKE_LIST_8(op, TAIL(list))\n#define MAKE_LIST_10(op, list)  op (HEAD(list)) MAKE_LIST_9(op, TAIL(list))\n\n#define MAKE_LIST(op, list) CONCAT(MAKE_LIST_, SEQ_SIZE(list)) (op, list)\n\nint main()\n{\n    MAKE_LIST(MAKE_VAR, LIST)\n}\n</code></pre>\n\n<p>Running the preprocessor on this gives the following:</p>\n\n<pre><code>int main()\n{\n    float var_1 = 0; float var_2 = 0; float var_3 = 0; float var_4 = 0; float var_5 = 0;\n}\n</code></pre>\n\n<p>As desired. I'm sure this could be streamlined a bit, but I hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 7813, "user_id": 271781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de16842ae94ddafdf546d5b7e5e21e62?s=128&d=identicon&r=PG", "display_name": "daminetreg", "link": "https://stackoverflow.com/users/271781/daminetreg"}, "is_accepted": false, "score": 0, "last_activity_date": 1516266332, "creation_date": 1516266332, "answer_id": 48317389, "question_id": 48307385, "link": "https://stackoverflow.com/questions/48307385/how-does-boost-pp-seq-fold-left-work/48317389#48317389", "title": "How does BOOST_PP_SEQ_FOLD_LEFT work?", "body": "<p>Here are my little 2 cents:</p>\n\n<p>The problem in my remembering from the preprocessor metaprogramming techniques used in Boost.Preprocessor is that having an arbitrary long list of element is not possible when folding over a sequence.</p>\n\n<p>You need to have as much macros as maximum iteration, so it can be arbitrary but to some maximum.</p>\n\n<p>I wonder however if you could even expand commas, because typically this is based on concatenating with what comes next to either a stop condition macro or a next iteration macro. And I don't see how it's possible to expands commas from a concatenated macro as the concatenation won't work anymore.</p>\n\n<p>What I would do for this case, if you can change a bit the API is  : </p>\n\n<pre><code>#define EXPAND(...) __VA_ARGS__\n\n#define template_(X, Y)   \\\n  template&lt;EXPAND X       \\\n    , int dummy = 0       \\\n  Y                       \\\n&gt;\n\n#define requires(...) \\\n  COMMA() std::enable_if_t&lt; dummy == 0 &amp;&amp; (__VA_ARGS__) &gt; = 0  \n\n#define COMMA() ,\n</code></pre>\n\n<p>So with a slighlty changed API : </p>\n\n<pre><code>template_((class A, class B, class C),\n    requires(IsFoo&lt;A&gt; &amp;&amp; IsBar&lt;B&gt;)\n    requires(IsBaz&lt;C&gt;)\n)\nvoid frobozzle(A, B, C);\n</code></pre>\n\n<p>It outputs to what was wished :</p>\n\n<pre><code>template&lt;class A, class B, class C , \n  int dummy = 0 , \n  std::enable_if_t&lt; dummy == 0 &amp;&amp; (IsFoo&lt;A&gt; &amp;&amp; IsBar&lt;B&gt;) &gt; = 0 ,\n  std::enable_if_t&lt; dummy == 0 &amp;&amp; (IsBaz&lt;C&gt;) &gt; = 0 &gt;\nvoid frobozzle(A, B, C);\n</code></pre>\n\n<p>Is not exactly the requested API, but the advantage is that you can have requires expression with commas thanks to the requires macros which uses <strong>VA_ARGS</strong> : </p>\n\n<pre><code>template_((class A, class B, class C),\n    requires(IsBaseOf&lt;B,C&gt;)\n)\nint boo()\n</code></pre>\n\n<p>I tried hard to make an unlimited FOLD_LEFT and it doesn't looks like to be in my reach :D.</p>\n\n<p>What I didn't try is reproducing the same input syntax as you provided with expression templates, which sounds to me finally more doable.</p>\n"}, {"comments": [{"owner": {"reputation": 5285, "user_id": 195873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53912b2e0cc619ca6c81ab1406522c2a?s=128&d=identicon&r=PG", "display_name": "Eric Niebler", "link": "https://stackoverflow.com/users/195873/eric-niebler"}, "edited": false, "score": 1, "creation_date": 1516316198, "post_id": 48326119, "comment_id": 83649067, "body": "Pretty nice! :-)"}, {"owner": {"reputation": 7813, "user_id": 271781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de16842ae94ddafdf546d5b7e5e21e62?s=128&d=identicon&r=PG", "display_name": "daminetreg", "link": "https://stackoverflow.com/users/271781/daminetreg"}, "edited": false, "score": 0, "creation_date": 1516370965, "post_id": 48326119, "comment_id": 83671164, "body": "Really nice, I tried similarly but never got the <code>#define template_impl_ADD_END2(...) __VA_ARGS__ ## _END</code> working as I implemented it like <code>BOOST_PP_CAT(requiresclauses , _end)</code> and because requiresclauses where expanding comma it didn&#39;t work.It&#39;s pretty good how you solved it."}], "tags": [], "owner": {"reputation": 815, "user_id": 1150292, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VQ2aZ.jpg?s=128&g=1", "display_name": "Mara Bos", "link": "https://stackoverflow.com/users/1150292/mara-bos"}, "is_accepted": true, "score": 13, "last_activity_date": 1516296308, "last_edit_date": 1516296308, "creation_date": 1516293279, "answer_id": 48326119, "question_id": 48307385, "link": "https://stackoverflow.com/questions/48307385/how-does-boost-pp-seq-fold-left-work/48326119#48326119", "title": "How does BOOST_PP_SEQ_FOLD_LEFT work?", "body": "<p>If you add an extra set of parentheses in your syntax, it's possible without a limit on the number of 'required' clauses, with relatively few macros:</p>\n\n<pre><code>template_((class A, class B, class C)\n    (requires IsFoo&lt;A&gt; &amp;&amp; IsBar&lt;B&gt;)\n    (requires IsBaz&lt;C&gt;)\n)\nvoid frobozzle(A, B, C);\n</code></pre>\n\n<p>Macros:</p>\n\n<pre><code>#define template_(...) template_impl_ADD_END(template_impl_LIST __VA_ARGS__) &gt;\n\n#define template_impl_ADD_END(...) template_impl_ADD_END2(__VA_ARGS__)\n#define template_impl_ADD_END2(...) __VA_ARGS__ ## _END\n\n#define template_impl_LIST(...) template&lt;__VA_ARGS__, int dummy = 0 template_impl_LIST_1\n\n#define template_impl_LIST_1(...) , std::enable_if_t&lt;dummy == 0 &amp;&amp; template_impl_REQUIRES(__VA_ARGS__), int&gt; = 0 template_impl_LIST_2\n#define template_impl_LIST_2(...) , std::enable_if_t&lt;dummy == 0 &amp;&amp; template_impl_REQUIRES(__VA_ARGS__), int&gt; = 0 template_impl_LIST_1\n\n#define template_impl_REQUIRES(...) (template_impl_REQUIRES_ ## __VA_ARGS__)\n#define template_impl_REQUIRES_requires\n\n#define template_impl_LIST_END\n#define template_impl_LIST_1_END\n#define template_impl_LIST_2_END\n</code></pre>\n\n<p>With these macros, the example above expands to:</p>\n\n<pre><code>template &lt;class A, class B, class C,\n          int dummy = 0,\n          std::enable_if_t&lt;dummy == 0 &amp;&amp; (IsFoo&lt;A&gt; &amp;&amp; IsBar&lt;B&gt;), int&gt; = 0,\n          std::enable_if_t&lt;dummy == 0 &amp;&amp; (IsBaz&lt;C&gt;), int&gt; = 0&gt;\n\nvoid frobozzle(A, B, C);\n</code></pre>\n\n<h1>Explanation</h1>\n\n<p>Consider these macros:</p>\n\n<pre><code>#define a(x) [x] b\n#define b(x) [x] a\n</code></pre>\n\n<p>With these, this:</p>\n\n<pre><code>a (1) (2) (3) (4)\n</code></pre>\n\n<p>Will cause a 'chain reaction' of expansion as follows:</p>\n\n<pre><code>a (1) (2) (3) (4)\n[1] b (2) (3) (4)\n[1] [2] a (3) (4)\n[1] [2] [3] b (4)\n[1] [2] [3] [4] a\n</code></pre>\n\n<p>Recursion isn't allowed in the preprocessor, but this type of chain reaction isn't recursion since the invocation of the macro only happens after expansion of the previous one, not during, since the <code>(</code> isn't part of the expansion. (Although, see <a href=\"https://wg21.link/cwg268\" rel=\"noreferrer\">https://wg21.link/cwg268</a>)</p>\n\n<p>Unfortunately, although this will nicely loop over a sequence of <code>(A)(B)(C)</code>, it'll leave an extra token at the end: the name of one of the two used macros. The trick I used to get rid of that one, is to wrap the entire list with another macro invocation, that will append (with the concat operator <code>##</code>) <code>_END</code> after the full expansion, so it will become:</p>\n\n<pre><code>[1] [2] [3] [4] a_END\n</code></pre>\n\n<p>Then we can simply get rid of this last token by defining:</p>\n\n<pre><code>#define a_END\n#define b_END\n</code></pre>\n\n<p>If we can't wrap the entire list, there's no way to know when we've reached the last element. The only thing that happens is that the last <code>a</code> or <code>b</code> is left over without a <code>(</code> that follows it, meaning that it simply won't expand, as <code>a</code> and <code>b</code> are function-style macros. (And we can't just define <code>a</code> and <code>b</code> to expand to nothing, because <code>a</code> and <code>b</code> are already macros, although they won't expand without a <code>(</code>.)</p>\n\n<h2>Why two macros?</h2>\n\n<p>When we try to cause a chain reaction like the above, with just one macro like this:</p>\n\n<pre><code>#define a(x) [x] a\n</code></pre>\n\n<p>It won't work:</p>\n\n<pre><code>a (1) (2) (3) (4)\n[1] a (2) (3) (4) // Doesn't expand further\n</code></pre>\n\n<p>This is because of how the '(infinite) recursion protection' works: If during the expansion of a macro, a token with the name of the macro being expanded is produced, it is marked as 'unexpandable', meaning that it will never ever expand again. See <a href=\"http://eel.is/c++draft/cpp.rescan#2\" rel=\"noreferrer\">http://eel.is/c++draft/cpp.rescan#2</a></p>\n\n<p>This means that the expanded <code>a</code> is marked as 'unexpandable', and our chain reaction stops right there after the first step. We avoid this by using two macros to work around this rule: <code>a(..)</code> will not produce any token with its own name, but only with the name of the other macro <code>b</code>. The expansion of <code>a</code> ends right there, before <code>b</code> is expanded, because there is no <code>(</code> yet after b, since we're 'inside' the expansion of a. After the expansion is done, and we're no longer 'inside' <code>a</code>, the tokens get re-examined, and a proper invocation of <code>b</code> is found: <code>b(..)</code>. That one will produce a token with the name of <code>a</code> again, but since we're no longer in the expansion of the first <code>a</code>, this one will not be marked as 'unexpandable', and the chain reaction continues.</p>\n"}], "owner": {"reputation": 5285, "user_id": 195873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53912b2e0cc619ca6c81ab1406522c2a?s=128&d=identicon&r=PG", "display_name": "Eric Niebler", "link": "https://stackoverflow.com/users/195873/eric-niebler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 770, "favorite_count": 5, "accepted_answer_id": 48326119, "answer_count": 3, "score": 11, "last_activity_date": 1516296308, "creation_date": 1516212444, "last_edit_date": 1516217354, "question_id": 48307385, "link": "https://stackoverflow.com/questions/48307385/how-does-boost-pp-seq-fold-left-work", "title": "How does BOOST_PP_SEQ_FOLD_LEFT work?", "body": "<p>I need to write a macro that processes an arbitrarily long list of things like <code>(A)(B)(C)</code>. If I could take a Boost dependency, I would just use one of the <a href=\"http://www.boost.org/doc/libs/1_62_0/libs/preprocessor/doc/data/sequences.html\" rel=\"noreferrer\"><code>BOOST_PP_SEQ_</code></a> family of macros. Unfortunately, I can't so I am left trying to figure out how it works. This Stuff Is Not Obvious.</p>\n\n<p>Can anybody here write a simple, stand-alone implementation of, say, <a href=\"http://www.boost.org/doc/libs/1_62_0/libs/preprocessor/doc/ref/seq_fold_left.html\" rel=\"noreferrer\"><code>BOOST_PP_SEQ_FOLD_LEFT</code></a> for me to look at? In particular, I would like to transform:</p>\n\n<pre><code>template_(class A, class B, class C)(\n    requires IsFoo&lt;A&gt; &amp;&amp; IsBar&lt;B&gt;)(\n    requires IsBaz&lt;C&gt;)\nvoid frobozzle(A, B, C);\n</code></pre>\n\n<p>to be rewritten as:</p>\n\n<pre><code>template&lt;class A, class B, class C,\n    int dummy = 0,\n    std::enable_if_t&lt;dummy == 0 &amp;&amp; (IsFoo&lt;A&gt; &amp;&amp; IsBar&lt;B&gt;), int&gt; = 0,\n    std::enable_if_t&lt;dummy == 0 &amp;&amp; (IsBaz&lt;C&gt;), int&gt; = 0&gt;\nvoid frobozzle(A, B, C);\n</code></pre>\n\n<p>There could be an arbitrary number of <code>requires</code> clauses, and they should each get their own <code>enable_if_t</code>. I have it working with one <code>requires</code> clause, but I exhausted my C preprocessor-fu in the process.</p>\n\n<p>It's OK to assume a std-compliant preprocessor, since I don't need MSVC support.</p>\n"}, {"tags": ["c++", "visual-studio", "build", "project-properties"], "answers": [{"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": true, "score": 1, "last_activity_date": 1516212303, "creation_date": 1516212303, "answer_id": 48307358, "question_id": 48307174, "link": "https://stackoverflow.com/questions/48307174/more-than-one-conditional-compilation-symbols/48307358#48307358", "title": "More than one conditional compilation symbols?", "body": "<p>Use semi-colons, but I would think with names like new_version and old_version that you would generally only define one of them.</p>\n"}], "owner": {"reputation": 366, "user_id": 6855279, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/43315b5490866e1323c3f9240bbda572?s=128&d=identicon&r=PG&f=1", "display_name": "Mikisz", "link": "https://stackoverflow.com/users/6855279/mikisz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 614, "favorite_count": 0, "accepted_answer_id": 48307358, "answer_count": 1, "score": 0, "last_activity_date": 1516212467, "creation_date": 1516211596, "last_edit_date": 1516212467, "question_id": 48307174, "link": "https://stackoverflow.com/questions/48307174/more-than-one-conditional-compilation-symbols", "title": "More than one conditional compilation symbols?", "body": "<p>I have a question regarding conditional compilation symbols in Visual Studio (my version is 2017).</p>\n\n<p>Assuming that I have two compilation symbols, e. g.:</p>\n\n<pre><code>#if new_version\n#if old_version\n</code></pre>\n\n<p>then in what typing should I put them in Project properties ->Build ->Conditional compilations symbols:</p>\n\n<p>1) <code>new_version, old_version</code></p>\n\n<p>2) <code>new_version;old_version</code></p>\n\n<p>3) <code>new_version; old_version</code></p>\n\n<p>4) <code>new_version,old_version</code></p>\n\n<p>5) other options?</p>\n\n<p>Any suggestion which way is correct?</p>\n"}, {"tags": ["c++", "algorithm", "vector", "magnitude"], "comments": [{"owner": {"reputation": 2070, "user_id": 2091230, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/fSTHm.jpg?s=128&g=1", "display_name": "Justinas Marozas", "link": "https://stackoverflow.com/users/2091230/justinas-marozas"}, "edited": false, "score": 0, "creation_date": 1516211004, "post_id": 48306941, "comment_id": 83599266, "body": "It would be helpful if you&#39;d tag a programming language you&#39;re using as performance implications will differ based on that. If you&#39;re using Python numpy is usually a performant option for calculations. <a href=\"https://stackoverflow.com/a/9171196/2091230\">This answer</a> shows an example of how to use it to calculate vector magnitude."}, {"owner": {"reputation": 31, "user_id": 8221227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75946ad224644930333dd3891fc4981e?s=128&d=identicon&r=PG", "display_name": "Raddy", "link": "https://stackoverflow.com/users/8221227/raddy"}, "reply_to_user": {"reputation": 2070, "user_id": 2091230, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/fSTHm.jpg?s=128&g=1", "display_name": "Justinas Marozas", "link": "https://stackoverflow.com/users/2091230/justinas-marozas"}, "edited": false, "score": 0, "creation_date": 1516211625, "post_id": 48306941, "comment_id": 83599631, "body": "Its being written in C++, added that to the original post. Thanks!"}, {"owner": {"reputation": 7052, "user_id": 3854570, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d7bda3cab79b9bc5570667f8c0e24134?s=128&d=identicon&r=PG&f=1", "display_name": "Nelfeal", "link": "https://stackoverflow.com/users/3854570/nelfeal"}, "edited": false, "score": 0, "creation_date": 1516212668, "post_id": 48306941, "comment_id": 83600173, "body": "<a href=\"https://math.stackexchange.com/questions/1282435/alpha-max-plus-beta-min-algorithm-for-three-numbers\">Related on math.se.</a>"}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1516218349, "post_id": 48306941, "comment_id": 83603139, "body": "A sqrt calculation on a microcontroller <i>can</i> be expensive, but how fast do you need it to be?  How much precision are you willing to trade off?  Is there anything you know about your inputs that can be leveraged (e.g., are they floats or ints and what range will they be in?)"}, {"owner": {"reputation": 31, "user_id": 8221227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75946ad224644930333dd3891fc4981e?s=128&d=identicon&r=PG", "display_name": "Raddy", "link": "https://stackoverflow.com/users/8221227/raddy"}, "edited": false, "score": 0, "creation_date": 1516635464, "post_id": 48306941, "comment_id": 83757541, "body": "I&#39;m shooting for 100Hz sampling. I haven&#39;t had a chance to see if that&#39;s possible given the other tasks it is has to do, but since I&#39;m still somewhat in the planning stages, I thought it would be best to start optimizing efficiency now."}, {"owner": {"reputation": 31, "user_id": 8221227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75946ad224644930333dd3891fc4981e?s=128&d=identicon&r=PG", "display_name": "Raddy", "link": "https://stackoverflow.com/users/8221227/raddy"}, "edited": false, "score": 0, "creation_date": 1516636246, "post_id": 48306941, "comment_id": 83758083, "body": "Sorry, to your other questions, the range of the accelerometer is -16 to +16 gs, and I&#39;d like two decimal point precision in the final product. The input from the accelerometer is float, but only 12-bit precision per axis."}, {"owner": {"reputation": 1606, "user_id": 3393574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3aa5a506f0d7b13973169e8c5c722b54?s=128&d=identicon&r=PG", "display_name": "Herpes Free Engineer", "link": "https://stackoverflow.com/users/3393574/herpes-free-engineer"}, "edited": false, "score": 0, "creation_date": 1578140654, "post_id": 48306941, "comment_id": 105346770, "body": "Related: <a href=\"https://math.stackexchange.com/q/1282435/111897\">math.stackexchange.com/q/1282435/111897</a>"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 8221227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75946ad224644930333dd3891fc4981e?s=128&d=identicon&r=PG", "display_name": "Raddy", "link": "https://stackoverflow.com/users/8221227/raddy"}, "edited": false, "score": 0, "creation_date": 1516635196, "post_id": 48307323, "comment_id": 83757352, "body": "This is a good idea, I&#39;ll try this and see if it&#39;s faster. Thanks!"}], "tags": [], "owner": {"reputation": 63, "user_id": 8729606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd48b30e7e939febead22b205dfd8c86?s=128&d=identicon&r=PG&f=1", "display_name": "MattH", "link": "https://stackoverflow.com/users/8729606/matth"}, "is_accepted": false, "score": 1, "last_activity_date": 1516214280, "last_edit_date": 1516214280, "creation_date": 1516212176, "answer_id": 48307323, "question_id": 48306941, "link": "https://stackoverflow.com/questions/48306941/efficient-magnitude-calculation-of-3d-vector/48307323#48307323", "title": "Efficient Magnitude Calculation of 3D Vector", "body": "<p>If you have a fast way of calculating <code>two-dimensional</code> magnitude, then perhaps the <code>three-dimensional</code> magnitude can be restructured in those terms. </p>\n\n<p>The three-dimensional magnitude can be derived from the\n<a href=\"https://i.stack.imgur.com/u6qXJ.jpg\" rel=\"nofollow noreferrer\">Pythagorean theorem.</a></p>\n\n<pre><code>|a| = sqrt(sqrt(x^2 + y^2)^2 + z^2) = sqrt(x^2 + y^2 + z^2)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13534755, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EibFT3Czkvc/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucnQNibuYy7OmiE8SLM825mOGbwhXA/photo.jpg?sz=128", "display_name": "August van Casteren", "link": "https://stackoverflow.com/users/13534755/august-van-casteren"}, "is_accepted": false, "score": 0, "last_activity_date": 1589382984, "creation_date": 1589382984, "answer_id": 61778313, "question_id": 48306941, "link": "https://stackoverflow.com/questions/48306941/efficient-magnitude-calculation-of-3d-vector/61778313#61778313", "title": "Efficient Magnitude Calculation of 3D Vector", "body": "<p><a href=\"https://stackoverflow.com/questions/21010586/normalizing-spatial-vectors-without-square-root\">Normalizing Spatial Vectors without Square Root</a>\nIf you use what this guy posted to calculate the unit vector, you can then divide the x of the original vector by the calculated unit vector's x.</p>\n"}], "owner": {"reputation": 31, "user_id": 8221227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75946ad224644930333dd3891fc4981e?s=128&d=identicon&r=PG", "display_name": "Raddy", "link": "https://stackoverflow.com/users/8221227/raddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1606, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1589382984, "creation_date": 1516210691, "last_edit_date": 1516213264, "question_id": 48306941, "link": "https://stackoverflow.com/questions/48306941/efficient-magnitude-calculation-of-3d-vector", "title": "Efficient Magnitude Calculation of 3D Vector", "body": "<p>I'm working on an inertial measurement project using a 3-axis accelerometer and an Arduino. I want the Arduino to take in the x, y, and z g-values and spit out the magnitude. Since the |a| = sqrt(x^2 + y^2 + z^2) is computationally expensive, I wanted to investigate whether there was an alternative algorithm that could be used to speed it up (I'm willing to sacrifice a little accuracy).</p>\n\n<p>I read about the <a href=\"https://en.wikipedia.org/wiki/Alpha_max_plus_beta_min_algorithm\" rel=\"nofollow noreferrer\">Alpha-max,\n Beta-min method</a>, but that appears to only work for 2D vectors. Is there anything similar for 3D vectors?</p>\n\n<p>EDIT: Program language is C++</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 4, "creation_date": 1516210044, "post_id": 48306738, "comment_id": 83598713, "body": "<code>atoi</code> requires a pointer to a zero-terminated string of characters. Passing it anything else is undefined."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 5, "creation_date": 1516210134, "post_id": 48306738, "comment_id": 83598760, "body": "You can convert a text digit to a numeric digit by subtracting <code>&#39;0&#39;</code>.  No need to call a function."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1516210397, "post_id": 48306738, "comment_id": 83598911, "body": "Thomas has a better approach for this particular case, but make a note for the future: Never use <code>atoi()</code>.  The standard function <code>strtol()</code> does all the same things, better."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1516211141, "post_id": 48306738, "comment_id": 83599348, "body": "@BenVoigt: Not to mention <code>stoi</code> etc."}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1516211107, "post_id": 48306778, "comment_id": 83599328, "body": "&#39;following characters in your memory &quot;25\\0&quot;&#39; how do you know that?"}, {"owner": {"reputation": 2079, "user_id": 3461617, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b551849b0da31fcb2f8ffae813f7c834?s=128&d=identicon&r=PG&f=1", "display_name": "Sandro", "link": "https://stackoverflow.com/users/3461617/sandro"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1516211844, "post_id": 48306778, "comment_id": 83599747, "body": "actually  this is undefined behavior to pass C++ string. And there can be any result, in some cases program can crash. But author of the question was curious how he could get 25 as the result. C++ string (sss) stores data as char array with &#39;\\0&#39; (it is not standard, but all compilers do it like this)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1516211976, "post_id": 48306778, "comment_id": 83599807, "body": "<code>std::string</code> may store data whatever way but OP does not pass pointer to <code>std::string</code> content, so you cannot know what resides in memory after ch1 and ch2"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1516212163, "post_id": 48306778, "comment_id": 83599912, "body": "@Sandro Also <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/c_str\" rel=\"nofollow noreferrer\">c_str()</a> is required to return a null-terminated string."}, {"owner": {"reputation": 2079, "user_id": 3461617, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b551849b0da31fcb2f8ffae813f7c834?s=128&d=identicon&r=PG&f=1", "display_name": "Sandro", "link": "https://stackoverflow.com/users/3461617/sandro"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1516212264, "post_id": 48306778, "comment_id": 83599971, "body": "@HolyBlackCat but he just copies the char returned by method at()"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1516212963, "post_id": 48306778, "comment_id": 83600336, "body": "@Sandro Nevermind, didn&#39;t see the commented out part first."}], "tags": [], "owner": {"reputation": 2079, "user_id": 3461617, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b551849b0da31fcb2f8ffae813f7c834?s=128&d=identicon&r=PG&f=1", "display_name": "Sandro", "link": "https://stackoverflow.com/users/3461617/sandro"}, "is_accepted": false, "score": 2, "last_activity_date": 1516215073, "last_edit_date": 1516215073, "creation_date": 1516210086, "answer_id": 48306778, "question_id": 48306738, "link": "https://stackoverflow.com/questions/48306738/atoi-not-giving-correct-output/48306778#48306778", "title": "atoi not giving correct output", "body": "<p>atoi should take a zero-terminated C string as input argument\nand you pass just pointer to the character. This is undefined behavior and there can be any result (in some cases program can crash)</p>\n\n<p>But why you actually get 25?</p>\n\n<p>Probably both variables ch1 and ch2 are stored sequentially in memory and there is some non-digit character after them. atoi() treats pointer to ch1 as zero-terminated c-string and reads data from memory until it finds the first non-digit character, and then converts result to integer. That's why you get 25. But actually it is undefined behavior you may get another result or program crash with another compiler (or even another compilation params).</p>\n\n<p>I can also see one more question in the line of code that is commented out</p>\n\n<pre><code>//int ui=atoi((char*)sss.at(0))*10+atoi((char*)sss.at(1)); //can somebody tell me what's wrong in this statement(causes segmentation fault)\n</code></pre>\n\n<p>There is segmentation fault because you convert the value of char ('2' or '5') to pointer \"char*\". So ASCII code of these character treated as memory address. Of course this address is incorrect and access to the memory causes segmentation fault.</p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 2, "last_activity_date": 1516211430, "creation_date": 1516211430, "answer_id": 48307127, "question_id": 48306738, "link": "https://stackoverflow.com/questions/48306738/atoi-not-giving-correct-output/48307127#48307127", "title": "atoi not giving correct output", "body": "<p><code>atoi()</code> as stated in <a href=\"http://en.cppreference.com/w/cpp/string/byte/atoi\" rel=\"nofollow noreferrer\">documentation</a> expect a null-terminated string and tries to convert whole string to the number so trying to use it for individual digits is simply wrong, just apply it to the whole string:</p>\n\n<pre><code>int ui = std::atoi( sss.c_str() );\n</code></pre>\n"}], "owner": {"reputation": 1263, "user_id": 3938402, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3db2c7bcda762ef0a3017108b1446094?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/3938402/harry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 48307127, "answer_count": 2, "score": 0, "last_activity_date": 1516215073, "creation_date": 1516209934, "last_edit_date": 1516210431, "question_id": 48306738, "link": "https://stackoverflow.com/questions/48306738/atoi-not-giving-correct-output", "title": "atoi not giving correct output", "body": "<p>Can somebody tell me why the value of variable 'b' is 25, I was expecting a value of 2. This is my code</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;sstream&gt;\n\nusing namespace std;\n\nint main(int argc,char*argv[])\n{\n    stringstream ss;\n    string sss;\n    unsigned short rt=52;\n    ss&lt;&lt;rt;\n    sss=ss.str();\n\n    cout&lt;&lt;sss.at(0)&lt;&lt;\"     \"&lt;&lt;sss.at(1)&lt;&lt;endl;\n    char ch1=sss.at(0);\n    char ch2=sss.at(1);\n    //int ui=atoi((char*)sss.at(0))*10+atoi((char*)sss.at(1)); //can somebody tell me what's wrong in this statement(causes segmentation fault)\n    cout&lt;&lt;ch1&lt;&lt;\"     \"&lt;&lt;ch2&lt;&lt;endl;\n    int a=atoi(&amp;ch1);\n    int b=atoi(&amp;ch2); //giving output as 25\n    cout&lt;&lt;a&lt;&lt;\"    \"&lt;&lt;b&lt;&lt;endl;\n    int c=a*10+b;\n    int ui=atoi(&amp;ch1)*10+atoi(&amp;ch2);\n\n    cout&lt;&lt;ui&lt;&lt;\"     \"&lt;&lt;c&lt;&lt;endl;\n}\n</code></pre>\n\n<p>Please note my compiler doesn't support C++11 standard.</p>\n"}, {"tags": ["javascript", "c++", "audio", "webserver"], "comments": [{"owner": {"reputation": 4259, "user_id": 313414, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/wR062.jpg?s=128&g=1", "display_name": "Tom W", "link": "https://stackoverflow.com/users/313414/tom-w"}, "edited": false, "score": 0, "creation_date": 1516209949, "post_id": 48306718, "comment_id": 83598654, "body": "There is not enough detail here to answer. What <i>specific</i> problem are you having with hosting a webserver in C++?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1516210313, "post_id": 48306718, "comment_id": 83598860, "body": "Useful rules of thumb: The answer to &quot;is it possible to do X?&quot; is almost always &quot;yes&quot;. The question &quot;how do I do X&quot;? is almost always too broad."}, {"owner": {"reputation": 800, "user_id": 4520961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f792470a3a54c7bffaf9af5fd8492e39?s=128&d=identicon&r=PG", "display_name": "JCAguilera", "link": "https://stackoverflow.com/users/4520961/jcaguilera"}, "edited": false, "score": 0, "creation_date": 1516210335, "post_id": 48306718, "comment_id": 83598866, "body": "Hi, I&#39;m really a noob in this webserver thing, so please bear with me. I&#39;m trying to do a webserver so I can send audio stream from a webpage using javascript. I have worked with socket.io and once I made a webserver in java using websockets to send/recieve json (I don&#39;t really know if I can send audio stream with json, tho). Now I need to code a server in C++ but I don&#39;t know what&#39;s the best way to do it or if something like that already exists."}, {"owner": {"reputation": 1, "user_id": 2801559, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9538ef609067e6d6a842dfef189b77d2?s=128&d=identicon&r=PG", "display_name": "guest271314", "link": "https://stackoverflow.com/users/2801559/guest271314"}, "edited": false, "score": 0, "creation_date": 1516211313, "post_id": 48306718, "comment_id": 83599452, "body": "You can send the stream to the server as <code>ArrayBuffer</code>s and parse the <code>ArrayBuffer</code> at server, or pass the <code>ArrayBuffer</code> to a <code>TypedArray</code> constructor, convert the <code>TypedArray</code> to <code>JSON</code> and send <code>JSON</code> to the server."}], "answers": [{"comments": [{"owner": {"reputation": 800, "user_id": 4520961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f792470a3a54c7bffaf9af5fd8492e39?s=128&d=identicon&r=PG", "display_name": "JCAguilera", "link": "https://stackoverflow.com/users/4520961/jcaguilera"}, "edited": false, "score": 0, "creation_date": 1516213069, "post_id": 48307484, "comment_id": 83600394, "body": "Hi, thanks for the answer. I didn&#39;t understand the part where u mention a Java app. Can you explain that part? Thanks a lot."}, {"owner": {"reputation": 1168, "user_id": 1375822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6aeb6d9ee7f69ccca47ebc09212fa33?s=128&d=identicon&r=PG", "display_name": "Halcyon", "link": "https://stackoverflow.com/users/1375822/halcyon"}, "reply_to_user": {"reputation": 800, "user_id": 4520961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f792470a3a54c7bffaf9af5fd8492e39?s=128&d=identicon&r=PG", "display_name": "JCAguilera", "link": "https://stackoverflow.com/users/4520961/jcaguilera"}, "edited": false, "score": 0, "creation_date": 1516216953, "post_id": 48307484, "comment_id": 83602398, "body": "Hello, the main point of mentioning a Java app was that you can write multiple clients in various language to work with the same server-- as long as they send the correct information to the server over the network the server won&#39;t care how they are written or in what language. So any information you find in other peoples&#39; questions/answers about a Javascript WebRTC client will be valid for your problem too. That just means you have a lot more resources to choose from in other peoples&#39; questions exclusively about Javascript. I hope that helps!"}], "tags": [], "owner": {"reputation": 1168, "user_id": 1375822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6aeb6d9ee7f69ccca47ebc09212fa33?s=128&d=identicon&r=PG", "display_name": "Halcyon", "link": "https://stackoverflow.com/users/1375822/halcyon"}, "is_accepted": false, "score": 3, "last_activity_date": 1516212842, "creation_date": 1516212842, "answer_id": 48307484, "question_id": 48306718, "link": "https://stackoverflow.com/questions/48306718/how-can-i-send-an-audio-stream-from-webpage-to-a-c-server/48307484#48307484", "title": "How can I send an audio stream from webpage to a C++ server?", "body": "<p>The question (or implementation in answer to the question) really consists of two parts, which are:</p>\n\n<ul>\n<li>How to send audio stream from browser in Javascript</li>\n<li>How to receive audio stream on server in C/C++</li>\n</ul>\n\n<p>This is because sending data over the network only loosely couples the client and the server when they use the same protocol. You could write a server in C++, then write two different clients that communicate with it, one in Javascript, then also a desktop app written in Java.</p>\n\n<p><strong>Javascript on Client Side</strong></p>\n\n<p>For the client side, sending audio from the browser in Javascript should follow the normal libraries available for WebRTC; the WebRTC site has some useful information on this, including a video streaming example here (<a href=\"https://webrtc.github.io/samples/\" rel=\"nofollow noreferrer\">https://webrtc.github.io/samples/</a>)</p>\n\n<p>Some of the links which might be of interest on that page:</p>\n\n<ol>\n<li>Audio-only getUserMedia() output to local audio element</li>\n<li>Stream from a video element to a video element</li>\n</ol>\n\n<p>There are some StackOverflow answers already about WebRTC and audio in javascript, here are a couple, these (and libraries) will be more plentiful than C++ questions on the topic:</p>\n\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/31094672/sending-video-and-audio-stream-to-server\">Sending video and audio stream to server</a></li>\n<li><a href=\"https://stackoverflow.com/questions/25523289/sending-a-mediastream-to-host-server-with-webrtc-after-it-is-captured-by-getuser\">Sending a MediaStream to host Server with WebRTC after it is captured by getUserMedia</a></li>\n</ol>\n\n<p><strong>For the C++ Server:</strong></p>\n\n<p>The WebRTC site has a link to the Native API for the libraries here (<a href=\"https://webrtc.org/native-code/native-apis/\" rel=\"nofollow noreferrer\">https://webrtc.org/native-code/native-apis/</a>) and an excellent simple example of a peer connection WebRTC server using them is here (<a href=\"https://webrtc.googlesource.com/src/+/master/examples/peerconnection\" rel=\"nofollow noreferrer\">https://webrtc.googlesource.com/src/+/master/examples/peerconnection</a>). It also has an implementation of a C++ client there, which may help in testing the server to get it working first, or see the general principles. </p>\n"}], "owner": {"reputation": 800, "user_id": 4520961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f792470a3a54c7bffaf9af5fd8492e39?s=128&d=identicon&r=PG", "display_name": "JCAguilera", "link": "https://stackoverflow.com/users/4520961/jcaguilera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1401, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1516212842, "creation_date": 1516209855, "last_edit_date": 1516210535, "question_id": 48306718, "link": "https://stackoverflow.com/questions/48306718/how-can-i-send-an-audio-stream-from-webpage-to-a-c-server", "title": "How can I send an audio stream from webpage to a C++ server?", "body": "<p>I'm working on a project and I need to send an audio stream from a webpage (through javascript) to a server written in C++. Is this possible? How can I do this? I was thinking on use <a href=\"https://webrtc.org/\" rel=\"nofollow noreferrer\">WebRTC</a> and a <a href=\"https://github.com/vmolsa/libcrtc\" rel=\"nofollow noreferrer\">WebRTC library for C++</a> but I don't really know hoy to achieve this.</p>\n\n<p>In general I need some king of webserver in C++, that allows me to send/recieve audio stream and json and works with multiple web clients.</p>\n\n<p>I have worked with Socket.io and once I coded a webserver in Java EE 7, with those I was able to send/recieve json from the webpage but I don't really know if I can send audio stream via websocket or json.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 0, "creation_date": 1516210474, "post_id": 48306689, "comment_id": 83598958, "body": "Yes, Strange problem! but there is a chance that different settings for button icons is causing the issue; So how did you configure the icons?"}, {"owner": {"reputation": 786, "user_id": 6533075, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d9231d59d8dc4b15e1d1329e60928b30?s=128&d=identicon&r=PG&f=1", "display_name": "Sch&#252;tze", "link": "https://stackoverflow.com/users/6533075/sch%c3%bctze"}, "reply_to_user": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 0, "creation_date": 1516210701, "post_id": 48306689, "comment_id": 83599086, "body": "I only used the GUI. Set their sizes to all 90x90. What setting might have caused such a problem?"}, {"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 1, "creation_date": 1516211071, "post_id": 48306689, "comment_id": 83599307, "body": "I know its strange, I would give a try to compare settings for a button icon that&#39;s working and one that&#39;s not (like &quot;Normal off&quot; , &quot;Normal on&quot; ..etc)  .. and set size to 60x60 .. some debugging is needed"}, {"owner": {"reputation": 786, "user_id": 6533075, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d9231d59d8dc4b15e1d1329e60928b30?s=128&d=identicon&r=PG&f=1", "display_name": "Sch&#252;tze", "link": "https://stackoverflow.com/users/6533075/sch%c3%bctze"}, "reply_to_user": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 0, "creation_date": 1516211519, "post_id": 48306689, "comment_id": 83599563, "body": "Honestly the only different thing is their 2D positions on the form,  and those have to be different, obviously. I am baffled by this behavior of QT."}, {"owner": {"reputation": 2748, "user_id": 6165833, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b6bbdd7a7472d52c14da82af5eb6d20?s=128&d=identicon&r=PG&f=1", "display_name": "ymoreau", "link": "https://stackoverflow.com/users/6165833/ymoreau"}, "edited": false, "score": 1, "creation_date": 1516269974, "post_id": 48306689, "comment_id": 83622575, "body": "I suppose you set the icon images directly in QtDesigner ? Are the missing images always the same or is it random ? I suppose this is happening in main-window ? Do you run any code in the constructor before the <code>setupUi</code> ? And between that point and the moment you set again the icons to make it work, any particular code ?"}], "answers": [{"tags": [], "owner": {"reputation": 786, "user_id": 6533075, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d9231d59d8dc4b15e1d1329e60928b30?s=128&d=identicon&r=PG&f=1", "display_name": "Sch&#252;tze", "link": "https://stackoverflow.com/users/6533075/sch%c3%bctze"}, "is_accepted": true, "score": 1, "last_activity_date": 1516213005, "creation_date": 1516213005, "answer_id": 48307519, "question_id": 48306689, "link": "https://stackoverflow.com/questions/48306689/button-icons-are-not-showing-on-run/48307519#48307519", "title": "Button icons are not showing on Run", "body": "<p>I solved the problem by simply resetting all the button icons to default (no icons) and then reassigning the icons. I don't know what the problem was, but this solved my problem.</p>\n"}], "owner": {"reputation": 786, "user_id": 6533075, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d9231d59d8dc4b15e1d1329e60928b30?s=128&d=identicon&r=PG&f=1", "display_name": "Sch&#252;tze", "link": "https://stackoverflow.com/users/6533075/sch%c3%bctze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1214, "favorite_count": 0, "accepted_answer_id": 48307519, "answer_count": 1, "score": 3, "last_activity_date": 1537279770, "creation_date": 1516209721, "last_edit_date": 1537279770, "question_id": 48306689, "link": "https://stackoverflow.com/questions/48306689/button-icons-are-not-showing-on-run", "title": "Button icons are not showing on Run", "body": "<p>I am trying to display icons (all .png files) on my <code>QPushButton</code>s however for some strange reason, some are showing and some are not, which is why I cannot understand the problem.</p>\n\n<p>Here is my .qrc file under my project:</p>\n\n<pre><code>&lt;RCC&gt;\n    &lt;qresource prefix=\"/\"&gt;\n        &lt;file&gt;icons/auto.png&lt;/file&gt;\n        &lt;file&gt;icons/connect.png&lt;/file&gt;\n        &lt;file&gt;icons/disconnect.png&lt;/file&gt;\n        &lt;file&gt;icons/home.png&lt;/file&gt;\n        &lt;file&gt;icons/manual.png&lt;/file&gt;\n        &lt;file&gt;icons/measures.png&lt;/file&gt;\n        &lt;file&gt;icons/move_to.png&lt;/file&gt;\n        &lt;file&gt;icons/reset.png&lt;/file&gt;\n        &lt;file&gt;icons/spindle_off.png&lt;/file&gt;\n        &lt;file&gt;icons/spindle_on.png&lt;/file&gt;\n    &lt;/qresource&gt;\n&lt;/RCC&gt;\n</code></pre>\n\n<p>which I created by using the Qt Creator's menu. So I have this under my <code>.pro</code> file as well:</p>\n\n<pre><code>RESOURCES  = myresource.qrc \\\n</code></pre>\n\n<p>All the icon paths are confirmed and they load on the GUI design screen. However, when I run, I get only some of them showing, the rest are missing. They all have the same size, same extension, etc. I really cannot get what is going on.</p>\n\n<p><a href=\"https://i.stack.imgur.com/GI3aK.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GI3aK.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>P.S: I did run <code>qmake</code> after adding my resources.</p>\n\n<p><strong>EDIT:</strong> I noticed that my label (which has an image inside) also does not appear on runtime. So it is not only the buttons.</p>\n"}, {"tags": ["c++", "compilation", "c++-modules"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1516217602, "post_id": 48306676, "comment_id": 83602730, "body": "That is a complete tooling implementation detail.  Most build systems are simplistic and rely on time stamps of the files to decide what needs to be compiled.  But this can easily be improved, as demonstrated for the past 10 years in everybody&#39;s favorite <a href=\"https://blogs.msdn.microsoft.com/vcblog/2011/04/05/build-related-improvement-in-vs2010-sp1/\" rel=\"nofollow noreferrer\">C++ language extension</a>."}, {"owner": {"reputation": 1377, "user_id": 616363, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ba52fe6209405eee462a3f059316b5ba?s=128&d=identicon&r=PG", "display_name": "Alek86", "link": "https://stackoverflow.com/users/616363/alek86"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1516287844, "post_id": 48306676, "comment_id": 83633890, "body": "It would be implementation detail, but if it is influencing the whole modules proposal, then it&#39;s not.   Some time ago I was under the impression C++ modules would look like Java or C# modules - 1 file per module. I was looking forward to stop using header/source splitting, because I find it pretty annoying to always change function parameters that are duplicated in 2 places in different files."}], "answers": [{"comments": [{"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1582403471, "post_id": 48588571, "comment_id": 106768408, "body": "A content-aware build system (<i>e.g.</i>, SCons) can easily notice the same BMI being regenerated and halt the propagation of rebuilding.  But even changes to comments could easily change diagnostic/debugging information included in a BMI (absent some \u201craw\u201d option, perhaps)."}], "tags": [], "owner": {"reputation": 12425, "user_id": 1128737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b4d1c6bf38e484f66faa12dc9725f49?s=128&d=identicon&r=PG", "display_name": "Smi", "link": "https://stackoverflow.com/users/1128737/smi"}, "is_accepted": true, "score": 4, "last_activity_date": 1517595080, "creation_date": 1517595080, "answer_id": 48588571, "question_id": 48306676, "link": "https://stackoverflow.com/questions/48306676/c-modules-module-implementation-units-for-unnecessary-recompilation/48588571#48588571", "title": "C++ modules: module implementation units for unnecessary recompilation?", "body": "<p>The author of that talk later said the recompilation issue is a matter of implementation. Quoting the article <a href=\"https://build2.org/article/cxx-modules-misconceptions.xhtml#single-file\" rel=\"nofollow noreferrer\"><em>Common C++ Modules TS Misconceptions</em></a> by Boris Kolpackov:</p>\n\n<blockquote>\n  <p>It turns out a lot of people would like to get rid of the header/source split (or, in modules terms, interface/implementation split) and keep everything in a single file. You <em>can</em> do that in Modules TS: with modules (unlike headers) you <em>can</em> define non-inline functions and variables in module interface units. So if you want to keep everything in a single file, you <em>can</em>.</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>Now, keeping everything in a single file may have negative build performance implications but it appears a smart enough build system in cooperation with the compiler should be able to overcome this. See this <a href=\"https://www.reddit.com/r/cpp/comments/77fgbw/cppcon_2017_boris_kolpackov_building_c_modules/domj8be/\" rel=\"nofollow noreferrer\">discussion</a> for details.</p>\n</blockquote>\n\n<p>Quoting <a href=\"https://www.reddit.com/r/cpp/comments/77fgbw/cppcon_2017_boris_kolpackov_building_c_modules/don5vih/\" rel=\"nofollow noreferrer\">Gor Nishanov</a> (the Project Editor of Coroutines TS) from the linked thread:</p>\n\n<blockquote>\n  <p>That is up to you how to structure your code. Module TS does not impose on you how you decompose your module into individual files. If you want, you can implement your entire module in the interface file (thus you will have C# like experience), or you can partition your module into an interface and one or more implementation files.</p>\n</blockquote>\n\n<p>The Project Editor of <a href=\"https://isocpp.org/files/papers/n4720.pdf\" rel=\"nofollow noreferrer\">Modules TS</a>, Gabriel Dos Reis, <a href=\"https://www.reddit.com/r/cpp/comments/77fgbw/cppcon_2017_boris_kolpackov_building_c_modules/doo81bg/\" rel=\"nofollow noreferrer\">commented on the MSVC implementation</a>:</p>\n\n<blockquote>\n  <p>Ideally, only semantics-relevant changes should trigger recompilation keyed on the IFC.</p>\n</blockquote>\n\n<p>(As a side note, the Modules TS <a href=\"https://www.reddit.com/r/cpp/comments/7unskl/c_modules_working_draft_n4720/dtmlvcr/\" rel=\"nofollow noreferrer\">has now been approved</a> and sent to ISO for publication.)</p>\n"}], "owner": {"reputation": 1377, "user_id": 616363, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ba52fe6209405eee462a3f059316b5ba?s=128&d=identicon&r=PG", "display_name": "Alek86", "link": "https://stackoverflow.com/users/616363/alek86"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 0, "accepted_answer_id": 48588571, "answer_count": 1, "score": 3, "last_activity_date": 1517595080, "creation_date": 1516209681, "last_edit_date": 1516232378, "question_id": 48306676, "link": "https://stackoverflow.com/questions/48306676/c-modules-module-implementation-units-for-unnecessary-recompilation", "title": "C++ modules: module implementation units for unnecessary recompilation?", "body": "<p>Recently watched video from CppCon 2017: Boris Kolpackov \u201cBuilding C++ Modules\u201d\n<a href=\"https://www.youtube.com/watch?v=E8EbDcLQAoc\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=E8EbDcLQAoc</a></p>\n\n<p>Approximately at 31:35 he starts explaining that we should still use header/source splitting and shows 3 reasons. The first reason:</p>\n\n<p>If you have both declarations/definitions in the same place when you touch this module all other modules that depend on the <strong>module interface</strong> (BMI) will be recompiled.</p>\n\n<p>And that I didn't like at all. It sounded like we are still in 90s and compilers cannot be smart enough to see difference in BMI-related changes and implementation related changes. As I see it, compilers are able to quickly scan each module and generate only BMI from it. And if BMI is not changed - don't recompile other modules that depend on it.</p>\n\n<p>Or am I missing something?</p>\n"}, {"tags": ["c++", "arrays", "pointers"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1516209674, "post_id": 48306609, "comment_id": 83598489, "body": "We aren&#39;t sure either as you don&#39;t include the code for <code>getLastRow</code> etc"}, {"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "edited": false, "score": 0, "creation_date": 1516209753, "post_id": 48306609, "comment_id": 83598524, "body": "Variable <code>board</code> is not initialized to point to a properly allocated block of memory."}, {"owner": {"reputation": 448, "user_id": 3529616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdd863e0eb16833b9366024006a1b30c?s=128&d=identicon&r=PG&f=1", "display_name": "Sergei", "link": "https://stackoverflow.com/users/3529616/sergei"}, "edited": false, "score": 3, "creation_date": 1516210343, "post_id": 48306609, "comment_id": 83598870, "body": "I&#39;d suggest you stay away from char** and use simple std::vector. Address a cell by board[row_id*num_cols + col_id]"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9228036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebf37ecc9b5478c5b0160045f21575f4?s=128&d=identicon&r=PG&f=1", "display_name": "Navine", "link": "https://stackoverflow.com/users/9228036/navine"}, "edited": false, "score": 0, "creation_date": 1516210361, "post_id": 48306757, "comment_id": 83598884, "body": "I have initialized the board pointer in the constructor for class Ant to point to an array of pointers, the problem persists however."}, {"owner": {"reputation": 3, "user_id": 9228036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebf37ecc9b5478c5b0160045f21575f4?s=128&d=identicon&r=PG&f=1", "display_name": "Navine", "link": "https://stackoverflow.com/users/9228036/navine"}, "edited": false, "score": 0, "creation_date": 1516214281, "post_id": 48306757, "comment_id": 83600989, "body": "Yes, this seems to be what was causing the issue! Thank you very much, I was stumped on this for the past day"}], "tags": [], "owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "is_accepted": true, "score": 1, "last_activity_date": 1516212094, "last_edit_date": 1516212094, "creation_date": 1516210014, "answer_id": 48306757, "question_id": 48306609, "link": "https://stackoverflow.com/questions/48306609/segmentation-fault-when-passing-values-to-dynamically-allocated-array/48306757#48306757", "title": "Segmentation fault when passing values to dynamically allocated array", "body": "<p>You are invoking <a href=\"http://en.cppreference.com/w/cpp/language/ub\" rel=\"nofollow noreferrer\">undefined behavior</a> by accessing array elements out of bounds. Your <code>setLastRow(5);</code> and \n<code>setLastCol(5);</code> functions cause both of your <code>getLastRow()</code> and <code>getLastCol()</code> functions to return the value of <code>5</code> but since arrays are <strong>zero indexed</strong> that would imply you are accessing <code>6th</code> element. So with:</p>\n\n<pre><code>board[getLastRow()][getLastCol()] = '#';\n</code></pre>\n\n<p>you are effectively calling:</p>\n\n<pre><code>board[5][5] = '#'; // undefined behavior because there are no 6 X 6 elements\n</code></pre>\n\n<p>whereas you can only have a maximum index of <code>4</code>:</p>\n\n<pre><code>board[4][4] = '#'; // OK as there are 5 X 5 elements\n</code></pre>\n\n<p>One solution is to have your functions return <code>lastRow - 1</code> and <code>lastCol - 1</code> respectively.</p>\n"}, {"tags": [], "owner": {"reputation": 448, "user_id": 3529616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdd863e0eb16833b9366024006a1b30c?s=128&d=identicon&r=PG&f=1", "display_name": "Sergei", "link": "https://stackoverflow.com/users/3529616/sergei"}, "is_accepted": false, "score": 2, "last_activity_date": 1516210643, "creation_date": 1516210643, "answer_id": 48306924, "question_id": 48306609, "link": "https://stackoverflow.com/questions/48306609/segmentation-fault-when-passing-values-to-dynamically-allocated-array/48306924#48306924", "title": "Segmentation fault when passing values to dynamically allocated array", "body": "<p>Assuming board[getLastRow()][getLastCol()] translates to board[5][5], you go beyond the buffer. Your board is 0..4.</p>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 4547652, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-EwFgL5GIvcc/AAAAAAAAAAI/AAAAAAAAAVs/jDOsJJNYKFk/photo.jpg?sz=128", "display_name": "Janakiraman Kannan", "link": "https://stackoverflow.com/users/4547652/janakiraman-kannan"}, "is_accepted": false, "score": 0, "last_activity_date": 1516211241, "creation_date": 1516211241, "answer_id": 48307083, "question_id": 48306609, "link": "https://stackoverflow.com/questions/48306609/segmentation-fault-when-passing-values-to-dynamically-allocated-array/48307083#48307083", "title": "Segmentation fault when passing values to dynamically allocated array", "body": "<p>Segmentation fault usually refers that the program is accessing an unallocated address. </p>\n\n<p>board[getLastRow()][getLastCol()]</p>\n\n<p>You might want to check the starting index and ending index of the arrays.</p>\n\n<ul>\n<li>I think you might allocating the 2D array with index starting from 0</li>\n<li>getLastRow()/Col might return the size of the row / Col</li>\n<li>So when the index starts from 0, your last row index would be getLastRow()-1 and the same thing would apply for the Column</li>\n</ul>\n\n<p>which yields ==> board[getLastRow()-1][getLastCol()-1]</p>\n"}], "owner": {"reputation": 3, "user_id": 9228036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebf37ecc9b5478c5b0160045f21575f4?s=128&d=identicon&r=PG&f=1", "display_name": "Navine", "link": "https://stackoverflow.com/users/9228036/navine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 1, "accepted_answer_id": 48306757, "answer_count": 3, "score": 0, "last_activity_date": 1516212094, "creation_date": 1516209410, "last_edit_date": 1516210226, "question_id": 48306609, "link": "https://stackoverflow.com/questions/48306609/segmentation-fault-when-passing-values-to-dynamically-allocated-array", "title": "Segmentation fault when passing values to dynamically allocated array", "body": "<p>I am working on an assignment that requires me to simulate Langton's ant.  I have dynamically allocated memory for a 2D array in the constructor of class Ant. The pointer to this array is a member of class Ant. Additionally, I have defined get functions for the rows and columns which I am using to pass these values to my array.</p>\n\n<p>Ant.hpp</p>\n\n<pre><code>#ifndef ANT_HPP\n#define ANT_HPP\n\nenum Direction {UP, RIGHT, DOWN, LEFT};\n\nclass Ant\n{\nprivate:\nchar** board;\nchar spaceColor;\nDirection facing;\nint rows, cols, steps, stepNumber;\nint startRow, startCol, tempCol, tempRow;\nint lastRow, lastCol;\nint thisRow, thisCol;\n\npublic:\nAnt();\nAnt(int, int, int, int, int);\nvoid print();\nvoid makeMove();\n};\n</code></pre>\n\n<p>Ant.cpp</p>\n\n<pre><code>Ant::Ant()\n{\nrows = 5;\ncols = 5;\nsteps = 5;\nstartRow = 0;\nstartCol = 0;\nstepNumber = 0;\nfacing = LEFT;\nsetThisRow(5);\nsetThisCol(5);\nsetLastRow(5);\nsetLastCol(5);\nsetSpaceColor(' ');\nboard = new char*[rows];\nfor(int i = 0; i &lt; rows; ++i){\nboard[i] = new char[cols];\n}\nfor(int i = 0; i &lt; rows; ++i){\nfor(int i = 0; i &lt; rows; ++i){\nboard[i][j] = ' ';\n}\n}\nboard[startRow][startCol] = '*';\n}\n\nchar Ant::getSpaceColor()\n{\nreturn spaceColor;\n}\n\nvoid Ant::makeMove()\n{\nif(getSpaceColor() == ' '){\nboard[getLastRow()][getLastCol()] = '#';\n}\n}\n\nint Ant::getLastRow()\n{\nreturn lastRow;\n}\n\nint Ant::getLastCol()\n{\nreturn lastCol;\n}\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"Ant.hpp\"\n#include &lt;iostream&gt;\n\nusing std::cout;\nusing std::endl;\n\nint main()\n{\nAnt myAnt;\nmyAnt.print();\nmyAnt.makeMove();\nreturn 0;\n}\n</code></pre>\n\n<p>Gdb has reported a segmentation fault at this line of code:</p>\n\n<pre><code>board[getLastRow()][getLastCol()] = '#';\n</code></pre>\n\n<p>Gdb is able to print accurate values for getLastRow() &amp; getLastCol(), but cannot access memory for board[getLastRow()][getLastCol()].</p>\n\n<p>I am not sure what I am doing wrong, any help would be greatly appreciated</p>\n"}, {"tags": ["c++", "opencv", "meteor", "base64"], "comments": [{"owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 1, "creation_date": 1516209883, "post_id": 48306550, "comment_id": 83598600, "body": "Whats im, whats buf? you need to show a full example with the error messages."}, {"owner": {"reputation": 7126, "user_id": 3098783, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8a4af51b5552cf0aaaed3d491c2520b3?s=128&d=identicon&r=PG", "display_name": "Jankapunkt", "link": "https://stackoverflow.com/users/3098783/jankapunkt"}, "edited": false, "score": 0, "creation_date": 1516214619, "post_id": 48306550, "comment_id": 83601142, "body": "You can store images on mongodb using gridfs or collectionFS, then you would not need to convert them to base64"}, {"owner": {"reputation": 226, "user_id": 8851962, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-Dp2B0zpmHb8/AAAAAAAAAAI/AAAAAAAAABE/_eG0VVSN1Yc/photo.jpg?sz=128", "display_name": "Rahibe Meryem", "link": "https://stackoverflow.com/users/8851962/rahibe-meryem"}, "edited": false, "score": 0, "creation_date": 1516214867, "post_id": 48306550, "comment_id": 83601283, "body": "im is cv::mat  and converting to png to in buf."}, {"owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 0, "creation_date": 1516216248, "post_id": 48306550, "comment_id": 83602052, "body": "Check Nyffenegger&#39;s b64 decode/encode implementation it takes a char * (which I&#39;m assuming your buffer is), instead of streams, and returns a std::string, I did something like that to store pictures in mongodb once :)"}], "answers": [{"tags": [], "owner": {"reputation": 226, "user_id": 8851962, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-Dp2B0zpmHb8/AAAAAAAAAAI/AAAAAAAAABE/_eG0VVSN1Yc/photo.jpg?sz=128", "display_name": "Rahibe Meryem", "link": "https://stackoverflow.com/users/8851962/rahibe-meryem"}, "is_accepted": false, "score": 0, "last_activity_date": 1518022717, "creation_date": 1518022717, "answer_id": 48669305, "question_id": 48306550, "link": "https://stackoverflow.com/questions/48306550/c-convert-png-to-base64/48669305#48669305", "title": "c++ convert png to base64", "body": "<p>I found :</p>\n\n<pre><code>auto base64_png = reinterpret_cast&lt;const unsigned char*&gt;(buf.data());\n                std::string encoded_png = \"data:image/jpeg;base64,\"+base64_encode(base64_png,buf.size());\n</code></pre>\n\n<p>the headers in the: <a href=\"https://github.com/tkislan/base64\" rel=\"nofollow noreferrer\">github</a></p>\n\n<p>it is solved my problem</p>\n"}, {"tags": [], "owner": {"reputation": 165, "user_id": 7315545, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9524967eab54fe107ced17efff78d43d?s=128&d=identicon&r=PG&f=1", "display_name": "arvids", "link": "https://stackoverflow.com/users/7315545/arvids"}, "is_accepted": false, "score": 2, "last_activity_date": 1549876347, "creation_date": 1549876347, "answer_id": 54627149, "question_id": 48306550, "link": "https://stackoverflow.com/questions/48306550/c-convert-png-to-base64/54627149#54627149", "title": "c++ convert png to base64", "body": "<p>What worked for me:</p>\n\n<ul>\n<li><p>Added .cpp and .h files from <a href=\"https://github.com/ReneNyffenegger/cpp-base64\" rel=\"nofollow noreferrer\">https://github.com/ReneNyffenegger/cpp-base64</a> to my project;</p>\n\n<pre><code>string encoded_png;\nMat img; // Load an image here\n\nvector&lt;uchar&gt; buf;\ncv::imencode(\".png\", img, buf);\nauto base64_png = reinterpret_cast&lt;const unsigned char*&gt;(buf.data());\nencoded_png = \"data:image/jpeg;base64,\" + base64_encode(base64_png, buf.size());\n</code></pre></li>\n</ul>\n\n<p>And <code>encoded_png</code> now contains the base64 string, which can be decoded to get the original image.</p>\n"}], "owner": {"reputation": 226, "user_id": 8851962, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-Dp2B0zpmHb8/AAAAAAAAAAI/AAAAAAAAABE/_eG0VVSN1Yc/photo.jpg?sz=128", "display_name": "Rahibe Meryem", "link": "https://stackoverflow.com/users/8851962/rahibe-meryem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4973, "favorite_count": 2, "answer_count": 2, "score": 4, "last_activity_date": 1549876347, "creation_date": 1516209204, "last_edit_date": 1516214841, "question_id": 48306550, "link": "https://stackoverflow.com/questions/48306550/c-convert-png-to-base64", "title": "c++ convert png to base64", "body": "<p>I found conver png file to base64 but it asks to read from file stream like:</p>\n\n<pre><code>ostringstream sout;\nistringstream sin;\n\n// this is the object we will use to do the base64 encoding\nbase64 base64_coder;\n\n\n\n// now base64 encode the compressed data\nbase64_coder.encode(sin,sout);\n</code></pre>\n\n<p>I have png in opencv converted like:</p>\n\n<pre><code>                imencode(\".png\", im, buf);\n</code></pre>\n\n<p>when I want to convert </p>\n\n<pre><code>    base64_coder.encode(buf,sout);\n</code></pre>\n\n<p>it asks stream..</p>\n\n<p>My c++ knowledge is limited so any help appreciated.</p>\n\n<p>The purpose for this:</p>\n\n<p>I need to write png images to the mongodb that can be used by meteorjs . So they are asking base64 encoded . images.</p>\n\n<p>thx</p>\n\n<p>EDIT : im is Cv::Mat . obj.  I am converting it to png . buf includes the png.</p>\n"}, {"tags": ["c++", "eclipse", "mingw", "glfw"], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 4547652, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-EwFgL5GIvcc/AAAAAAAAAAI/AAAAAAAAAVs/jDOsJJNYKFk/photo.jpg?sz=128", "display_name": "Janakiraman Kannan", "link": "https://stackoverflow.com/users/4547652/janakiraman-kannan"}, "is_accepted": true, "score": 1, "last_activity_date": 1516211493, "creation_date": 1516211493, "answer_id": 48307149, "question_id": 48306529, "link": "https://stackoverflow.com/questions/48306529/linking-problems-with-glfw-static-libraries/48307149#48307149", "title": "linking problems with glfw static libraries", "body": "<p>One quick way would be to include the full path of the library files. </p>\n\n<ul>\n<li>And link either the static or the shared library. Not both of them.</li>\n<li>If the full path works, then the path variables may not be set properly</li>\n</ul>\n"}], "owner": {"reputation": 165, "user_id": 9179851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HBOKd.png?s=128&g=1", "display_name": "Sympleque", "link": "https://stackoverflow.com/users/9179851/sympleque"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 900, "favorite_count": 0, "accepted_answer_id": 48307149, "answer_count": 1, "score": 0, "last_activity_date": 1516211493, "creation_date": 1516209133, "last_edit_date": 1516209889, "question_id": 48306529, "link": "https://stackoverflow.com/questions/48306529/linking-problems-with-glfw-static-libraries", "title": "linking problems with glfw static libraries", "body": "<p>I am trying to link these <a href=\"http://www.glfw.org/download.html\" rel=\"nofollow noreferrer\">GLFW</a> static libraries to my c++ project with eclipse:</p>\n\n<ul>\n<li>libglfw3.a</li>\n<li>libglfw3dll.a</li>\n</ul>\n\n<p>But eclipse throws this error: <a href=\"https://i.stack.imgur.com/Rkwuv.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Rkwuv.jpg\" alt=\"Linking Error\"></a>\nFrom what I can tell, it seems to find them just fine. However, the linking error says that the libraries are incompatible. I am using <b>mingw 64-bit</b> to compile so it would make sense that I use the 64-bit version of the <a href=\"http://www.glfw.org/download.html\" rel=\"nofollow noreferrer\">GLFW</a> that came with the .zip file. But even then, I tried linking it with the 32-bit version of <a href=\"http://www.glfw.org/download.html\" rel=\"nofollow noreferrer\">GLFW</a> and it still throws the same error. Does anyone know why it is doing this?</p>\n\n<p>Just in case, this is how I build the file: </p>\n\n<p><i>g++ \"-LE:\\Extra\\8) Programs\\Files\\GLFW\\lib-mingw-w64\" -o OpenGL.exe \"src\\Main.o\" -lglfw3 -lglfw3dll </i></p>\n"}, {"tags": ["c++", "performance", "benchmarking", "string-concatenation", "abseil"], "comments": [{"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1516210088, "post_id": 48306486, "comment_id": 83598738, "body": "I may be wrong, but I believe variadic templates (as you&#39;ve written them) will induce a copy. You&#39;ll need to accept by <code>Strings&amp;&amp;... rest</code> and use <code>std::forward</code> like <a href=\"https://stackoverflow.com/a/31099204/6558537\">this answer</a>"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 2, "creation_date": 1516210395, "post_id": 48306486, "comment_id": 83598906, "body": "@vu1p3n0x You&#39;re right. Perfect forwarding makes it a lot faster. In this case though it seems to be as good as passing by <code>const</code> references."}], "answers": [{"comments": [{"owner": {"reputation": 411, "user_id": 6111891, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e38e4b42dfde2bf876b41a9bc3bd1ca6?s=128&d=identicon&r=PG&f=1", "display_name": "AUD_FOR_IUV", "link": "https://stackoverflow.com/users/6111891/aud-for-iuv"}, "edited": false, "score": 0, "creation_date": 1516213055, "post_id": 48306679, "comment_id": 83600384, "body": "Wow, your version is much more concise! I don&#39;t have access to C++17 features, but simply changing the <code>Strings...</code> parameter in the original code to be a const ref did indeed increase performance drastically, though I&#39;m seeing an improvement closer to <a href=\"http://quick-bench.com/3fW8eFEMHax8_D4KoDEWIycT1r0\" rel=\"nofollow noreferrer\">50%</a>"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 411, "user_id": 6111891, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e38e4b42dfde2bf876b41a9bc3bd1ca6?s=128&d=identicon&r=PG&f=1", "display_name": "AUD_FOR_IUV", "link": "https://stackoverflow.com/users/6111891/aud-for-iuv"}, "edited": false, "score": 0, "creation_date": 1516213283, "post_id": 48306679, "comment_id": 83600497, "body": "@AUD_FOR_IUV Maybe I messed up my benchmarks then; I edited the answer. Also as I said you can use dummy arrays instead of fold-expressions."}], "tags": [], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "is_accepted": true, "score": 8, "last_activity_date": 1516213154, "last_edit_date": 1516213154, "creation_date": 1516209702, "answer_id": 48306679, "question_id": 48306486, "link": "https://stackoverflow.com/questions/48306486/surprising-benchmark-result/48306679#48306679", "title": "Surprising Benchmark Result", "body": "<p>That's because of passing arguments by value.</p>\n\n<p>I changed the code to use fold-expressions instead (which looks a lot cleaner)<br>\nand got rid of unnecessary copies (<code>Strings... rest</code> should've been a reference).</p>\n\n<pre><code>int getsize(const std::string&amp; s) { return s.size(); }\nint getsize(const char* s) { return strlen(s); }\n\ntemplate &lt;typename ...P&gt;\nstd::string strcat(const P &amp;... params)\n{\n  std::string res;\n  res.reserve((getsize(params) + ...));\n  (res += ... += params);\n  return res;\n}\n</code></pre>\n\n<p><a href=\"http://quick-bench.com/-Puv0OPlxh5hsFd0lEYRBRsVkyk\" rel=\"noreferrer\"><strong>This solution beats <code>append</code> by approximately 30%.</strong></a></p>\n\n<hr>\n\n<p>There seems to be no difference between passing by <code>const</code> references and doing perfect forwarding in this case. It makes sense, because <code>std::string +=</code> won't move it's arguments even if they're rvalues.</p>\n\n<hr>\n\n<p>If you don't have access to the new fancy fold-expressions but still want the performance, use 'dummy array' trick instead (which seems to have exactly same performance in this case).</p>\n\n<pre><code>template &lt;typename ...P&gt;\nstd::string strcat(const P &amp;... params)\n{\n  using dummy_array = int[]; // This is necessary because `int[]{blah}` doesn't compile.\n  std::string res;\n  std::size_t size = 0;\n  dummy_array{(void(size += getsize(params)), 0)..., 0};\n  res.reserve(size);\n  dummy_array{(void(res += params), 0)..., 0};\n  return res;\n}\n</code></pre>\n"}], "owner": {"reputation": 411, "user_id": 6111891, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e38e4b42dfde2bf876b41a9bc3bd1ca6?s=128&d=identicon&r=PG&f=1", "display_name": "AUD_FOR_IUV", "link": "https://stackoverflow.com/users/6111891/aud-for-iuv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 394, "favorite_count": 1, "accepted_answer_id": 48306679, "answer_count": 1, "score": 5, "last_activity_date": 1516213154, "creation_date": 1516208957, "question_id": 48306486, "link": "https://stackoverflow.com/questions/48306486/surprising-benchmark-result", "title": "Surprising Benchmark Result", "body": "<p>After watching Titus Winters' <a href=\"https://www.youtube.com/watch?v=tISy7EJQPzI\" rel=\"noreferrer\">\"Live at Head\"</a> talk, where he mentions that StrCat() is one of people's favorite features, I decided to try and implement something similar to see if I could beat std::string::append (or operator+, which I figured uses append internally) in terms of runtime performance. My reasoning was that a strcat() function implemented as a variadic template would be able to determine the combined size of all its string-like arguments and make a single allocation to store the final result, rather than having to constantly reallocate in the case of operator+, which has no knowledge of the overarching context in which it's called.</p>\n\n<p>However, when I compared my custom implementation against operator+ on <a href=\"http://quick-bench.com/meo707Lel8lO3QCiEpKXT_kIRpo\" rel=\"noreferrer\">quick-bench</a>, I found that my strcat() implementation is about 4x slower than operator+ on recent versions of both clang and gcc, compiled with <code>-std=c++17 -O3</code>. I've included the quick-bench code below for reference.</p>\n\n<p>Does anyone know what could be causing the slowdown here?</p>\n\n<pre><code>#include &lt;cstring&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n// Get the size of string-like args\nint getsize(const std::string&amp; s) { return s.size(); }\nint getsize(const char* s) { return strlen(s); }\ntemplate &lt;typename S&gt;\nint strcat_size(const S&amp; s) {\n  return getsize(s);\n}\ntemplate &lt;typename S, typename... Strings&gt;\nint strcat_size(const S&amp; first, Strings... rest) {\n  if (sizeof...(Strings) == 0) {\n    return 0;\n  } else {\n    return getsize(first) + strcat_size(rest...);\n  }\n}\n\n// Populate a pre-allocated string with content from another string-like object\ntemplate &lt;typename S&gt;\nvoid strcat_fill(std::string&amp; res, const S&amp; first) {\n  res += first;\n}\ntemplate &lt;typename S, typename... Strings&gt;\nvoid strcat_fill(std::string&amp; res, const S&amp; first, Strings... rest) {\n  res += first;\n  strcat_fill(res, rest...);\n}\n\ntemplate &lt;typename S, typename... Strings&gt;\nstd::string strcat(const S&amp; first, Strings... rest) {\n  int totalsize = strcat_size(first, rest...);\n\n  std::string res;\n  res.reserve(totalsize);\n\n  strcat_fill(res, first, rest...);\n\n  return res;\n}\n\nconst char* s1 = \"Hello World! \";\nstd::string s2 = \"Here is a string to concatenate. \";\nstd::string s3 = \"Here is a longer string to concatenate that avoids small string optimization\";\nconst char* s4 = \"How about some more strings? \";\nstd::string s5 = \"And more strings? \";\nstd::string s6 = \"And even more strings to use!\";\n\nstatic void strcat_bench(benchmark::State&amp; state) {\n  // Code inside this loop is measured repeatedly\n  for (auto _ : state) {\n    std::string s = strcat(s1, s2, s3, s4, s5, s6);\n\n    benchmark::DoNotOptimize(s);\n  }\n}\nBENCHMARK(strcat_bench);\n\nstatic void append_bench(benchmark::State&amp; state) {\n  for (auto _ : state) {\n    std::string s = s1 + s2 + s3 + s4 + s5 + s6;\n\n    benchmark::DoNotOptimize(s);\n  }\n}\nBENCHMARK(append_bench);\n</code></pre>\n"}, {"tags": ["c++", "c++11", "clion"], "comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 1, "creation_date": 1516208905, "post_id": 48306424, "comment_id": 83598033, "body": "cannot reproduce on GCC 7.2.0. Compiles fine for me"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 4, "creation_date": 1516208939, "post_id": 48306424, "comment_id": 83598054, "body": "Is that what CLion says, or an actual compiler output? The two are not one and the same. Also, since you didn&#39;t include headers, your example is not a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, which makes it harder to answer."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1516208940, "post_id": 48306424, "comment_id": 83598056, "body": "do you have another homemade class called &#39;vector&#39;?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1516209032, "post_id": 48306424, "comment_id": 83598104, "body": "@Fureeish -- What was posted does not compile.  Let the OP provide the proper headers."}, {"owner": {"reputation": 474, "user_id": 3868435, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b991bfce5f73a9349b2f36412cd4108d?s=128&d=identicon&r=PG&f=1", "display_name": "peterSweter", "link": "https://stackoverflow.com/users/3868435/petersweter"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1516209099, "post_id": 48306424, "comment_id": 83598147, "body": "@StoryTeller this is what clion says. It compiles and works. I thought that if clion underlines something that means that this is wrong."}, {"owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "edited": false, "score": 2, "creation_date": 1516209176, "post_id": 48306424, "comment_id": 83598186, "body": "@peterSweter: copy and paste the <b>exact</b> error, with more context of the errors. I&#39;m sure the error is <i>not</i> that small."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1516209208, "post_id": 48306424, "comment_id": 83598200, "body": "@peterSweter - Something is indeed wrong... with CLion"}, {"owner": {"reputation": 866, "user_id": 7607594, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OyzH_J0Nigs/AAAAAAAAAAI/AAAAAAAAAFg/tWm2BVaSBwY/photo.jpg?sz=128", "display_name": "Jorge Omar Medra", "link": "https://stackoverflow.com/users/7607594/jorge-omar-medra"}, "edited": false, "score": 0, "creation_date": 1516220292, "post_id": 48306424, "comment_id": 83604189, "body": "I compiled and ran it with VS2015, on windows 2012 Server, and QT Creator, on OSX, with clang, and it ran without problem."}], "answers": [{"tags": [], "owner": {"reputation": 509, "user_id": 9220448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5YtOb.jpg?s=128&g=1", "display_name": "mariusz_latarnik01", "link": "https://stackoverflow.com/users/9220448/mariusz-latarnik01"}, "is_accepted": false, "score": 0, "last_activity_date": 1516210504, "creation_date": 1516210504, "answer_id": 48306889, "question_id": 48306424, "link": "https://stackoverflow.com/questions/48306424/2-dimensional-vector-of-class-objects-initialization/48306889#48306889", "title": "2 dimensional vector of class objects initialization", "body": "<p>I pasted your code to clion and it's working fine.\nThe only warnings found:</p>\n\n<p>1) single-argument constructors must be marked as explicit</p>\n\n<p>2) unused variables/function</p>\n\n<p>I'm running:\nCLion 2017.3.1; \nBuild #CL-173.4127.32, built on December 26, 2017;</p>\n\n<p>btw:</p>\n\n<pre><code>// auto tmp = vector&lt;T2&gt;(10, T2(1));\n// vec = vector&lt;vector&lt;T2&gt;&gt;(10, tmp);\nvec = vector&lt;vector&lt;T2&gt;&gt;(10, vector&lt;T2&gt;(10, T2(1)));\n// you don't have to use tmp vect here\n</code></pre>\n"}], "owner": {"reputation": 474, "user_id": 3868435, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b991bfce5f73a9349b2f36412cd4108d?s=128&d=identicon&r=PG&f=1", "display_name": "peterSweter", "link": "https://stackoverflow.com/users/3868435/petersweter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516210504, "creation_date": 1516208723, "last_edit_date": 1516209473, "question_id": 48306424, "link": "https://stackoverflow.com/questions/48306424/2-dimensional-vector-of-class-objects-initialization", "title": "2 dimensional vector of class objects initialization", "body": "<p>I am trying to create 2-dimensional vector inside another class and initialize it:</p>\n\n<pre><code>#include &lt;vector&gt;\nusing namespace std;\nclass T2{\npublic:\n    int a;\n    T2(int a){\n        this-&gt;a=a;\n    }\n};\n\nclass Test{\npublic:\n    vector&lt;vector&lt;T2&gt;&gt; vec;\n    Test(){\n        auto tmp = vector&lt;T2&gt;(10,T2(1));\n        vec = vector&lt;vector&lt;T2&gt;&gt;(10, tmp);\n    }\n};\n</code></pre>\n\n<p>Clion says that \"call to vector is ambiguous\"</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1516208511, "post_id": 48306321, "comment_id": 83597762, "body": "Why do you think that critics only welcome to beginners?"}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1516208562, "post_id": 48306321, "comment_id": 83597801, "body": "1) <code>char str[]</code> -&gt; <code>std::string</code> or <code>std::array&lt;char&gt;</code>. 2) I highly encourage you to learn how to use a debugger"}, {"owner": {"reputation": 105, "user_id": 8915024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f64e152e6265513defe6a9cf565ad53?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Delarge", "link": "https://stackoverflow.com/users/8915024/alex-delarge"}, "edited": false, "score": 0, "creation_date": 1516209133, "post_id": 48306321, "comment_id": 83598166, "body": "I just began to learn c++ and don&#39;t konw how to use dynamical arrays, but thanks"}, {"owner": {"reputation": 10545, "user_id": 238902, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BRFti.png?s=128&g=1", "display_name": "Default", "link": "https://stackoverflow.com/users/238902/default"}, "edited": false, "score": 2, "creation_date": 1516209698, "post_id": 48306321, "comment_id": 83598502, "body": "please don&#39;t edit your question so that the given answers becomes incorrect."}, {"owner": {"reputation": 105, "user_id": 8915024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f64e152e6265513defe6a9cf565ad53?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Delarge", "link": "https://stackoverflow.com/users/8915024/alex-delarge"}, "edited": false, "score": 0, "creation_date": 1516210005, "post_id": 48306321, "comment_id": 83598693, "body": "Sorry, didn&#39;t know"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1516211284, "post_id": 48306321, "comment_id": 83599430, "body": "learn to use your debugger"}], "answers": [{"tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": false, "score": 1, "last_activity_date": 1516219861, "last_edit_date": 1516219861, "creation_date": 1516208556, "answer_id": 48306373, "question_id": 48306321, "link": "https://stackoverflow.com/questions/48306321/converting-char-array-to-int/48306373#48306373", "title": "Converting char array to int", "body": "<p><code>return</code> leaves the current function. The only way out of your infinite loop is by leaving the entire function, meaning you always skip the output. Use <code>break</code> instead or supply an appropriate condition to your <code>for(;;)</code> loop.</p>\n\n<p>Though c++ already provides <code>std::stringstream</code> for doing just that. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    std::stringstream stream(\"12 45 1666\");\n    int result;\n\n    // Reads from the stream until it's exhausted or fails\n    while (stream &gt;&gt; result)\n    {\n        std::cout &lt;&lt; result &lt;&lt; '\\n';\n    }\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1516219885, "post_id": 48306640, "comment_id": 83603982, "body": "Good catch, but it&#39;s not the only problem."}], "tags": [], "owner": {"reputation": 105, "user_id": 8915024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f64e152e6265513defe6a9cf565ad53?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Delarge", "link": "https://stackoverflow.com/users/8915024/alex-delarge"}, "is_accepted": false, "score": 0, "last_activity_date": 1516209500, "creation_date": 1516209500, "answer_id": 48306640, "question_id": 48306321, "link": "https://stackoverflow.com/questions/48306321/converting-char-array-to-int/48306640#48306640", "title": "Converting char array to int", "body": "<pre><code>    for(int k = 0;k&lt;size;k++)\n    {\n        cout &lt;&lt;arr[k]&lt;&lt;endl;\n    }\n</code></pre>\n\n<p>problem was here just changed 'i' on 'k'.</p>\n"}], "owner": {"reputation": 105, "user_id": 8915024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f64e152e6265513defe6a9cf565ad53?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Delarge", "link": "https://stackoverflow.com/users/8915024/alex-delarge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 844, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1516219861, "creation_date": 1516208361, "last_edit_date": 1516211138, "question_id": 48306321, "link": "https://stackoverflow.com/questions/48306321/converting-char-array-to-int", "title": "Converting char array to int", "body": "<pre><code>#include &lt;QtCore/QCoreApplication&gt;\n#include&lt;iostream&gt;\n#include&lt;cmath&gt;\n#include&lt;cstdlib&gt;\n#include&lt;cstdio&gt;\n#include&lt;cctype&gt;\nusing namespace std;  \n  void test()\n    {\n        int arr[10];\n        int size = 0;\n        int i = 0;\n        char str[] = \"12 45 1666\";\n        for(;;)\n        {\n            while(str[i]!='\\0' &amp;&amp; str[i]==' ')i++;\n            if(str[i]=='\\0')return;\n            arr[size] = 0;\n            while(str[i]!='\\0' &amp;&amp; str[i]!=' ')\n            {\n                if(!isdigit(str[i]))\n                {\n                    cout &lt;&lt;str[i]&lt;&lt;\" - Not a number!\"&lt;&lt;endl;\n                    return;\n                }\n                arr[size]=arr[size]*10+(str[i]-48);\n                i++;\n            }\n            size++;\n        }\n        for(int k = 0;i&lt;size;k++)\n        {\n            cout &lt;&lt;arr[k]&lt;&lt;endl;\n        }\n\n    }\n\n    int main(int argc, char *argv[])\n    {\n        QCoreApplication a(argc, argv);\n        test();\n        return a.exec();\n    }\n</code></pre>\n\n<p>Here I'm trying to write a programm which convert string of figures and spaces to numeral array, but there is a problem it doesn't output. What could cause this problem. I'm a begginer to c++ so critics is welcome.</p>\n"}, {"tags": ["c++", "user-input"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 3, "creation_date": 1516208247, "post_id": 48306210, "comment_id": 83597603, "body": "What do you think <code>while(getline(...))</code> does?"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1516208289, "post_id": 48306210, "comment_id": 83597626, "body": "(and you&#39;re ignoring the actually extracted <code>line</code>). So you need an <code>if</code> (not really, the <code>line</code> will be empty after a failure) and a <code>std::istringstream</code>."}], "answers": [{"tags": [], "owner": {"reputation": 5867, "user_id": 9125195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75fc90d1f6de6ff28c739b85bdb82f4c?s=128&d=identicon&r=PG&f=1", "display_name": "Sid S", "link": "https://stackoverflow.com/users/9125195/sid-s"}, "is_accepted": false, "score": 3, "last_activity_date": 1516209586, "last_edit_date": 1516209586, "creation_date": 1516208652, "answer_id": 48306402, "question_id": 48306210, "link": "https://stackoverflow.com/questions/48306210/why-does-not-stdcin-recognise-enter-key/48306402#48306402", "title": "why does not std:cin recognise enter key", "body": "<p>The <code>line</code> variable contains the whole line, except the linefeed.</p>\n\n<p>To parse each line, you could replace your <code>while</code> loop with:</p>\n\n<pre><code>while (getline(cin, line))\n{\n    istringstream iss(line);\n    while (iss &gt;&gt; value)\n    {\n        vect.push_back(value);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 302, "user_id": 1343196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vtcby.jpg?s=128&g=1", "display_name": "Amaresh", "link": "https://stackoverflow.com/users/1343196/amaresh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516209586, "creation_date": 1516208017, "question_id": 48306210, "link": "https://stackoverflow.com/questions/48306210/why-does-not-stdcin-recognise-enter-key", "title": "why does not std:cin recognise enter key", "body": "<p>I am trying to take input from command prompt and put every input separated by white-space or tab to vector  until user presses \"enter\". I am not able to do do. here is my code</p>\n\n<pre><code>template &lt;typename T&gt; \nvector &lt;T&gt; process_input_stream() {\n\n    T value;\n    vector &lt;T&gt; vect;\n\n    string line;\n    //read input and populate into vect until return key is pressed\n    while (getline(cin, line, '\\n')){\n        cin &gt;&gt; value;\n        std::cin.clear();\n        std::cin.ignore(std::numeric_limits&lt;streamsize&gt;::max(), '\\n');\n        vect.push_back(value);\n    }\n\n    return vect;\n}\n</code></pre>\n\n<p>now the problem i am hitting my head to, is, when entering input, input is screen is still asking for more input even after pressing enter key.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1516208139, "post_id": 48306204, "comment_id": 83597537, "body": "Because Win32 API, as the name suggests is targeted fo Windows. While Qt is by design requirement is portable."}, {"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 2, "creation_date": 1516208141, "post_id": 48306204, "comment_id": 83597539, "body": "Win32 api is specific to the windows operating system which is different from other operating systems."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1516208190, "post_id": 48306204, "comment_id": 83597570, "body": "There is <code>wine</code> which has a goal to implement the  winapi usage on non windows systems. <a href=\"https://www.winehq.org/\" rel=\"nofollow noreferrer\">winehq.org</a>"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1516208443, "post_id": 48306204, "comment_id": 83597714, "body": "Guess what QT on Windows calls to do the native screen drawing."}], "answers": [{"tags": [], "owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "is_accepted": false, "score": 6, "last_activity_date": 1516208093, "creation_date": 1516208093, "answer_id": 48306241, "question_id": 48306204, "link": "https://stackoverflow.com/questions/48306204/why-is-win32-api-non-portable/48306241#48306241", "title": "Why is win32 API non-portable?", "body": "<p>Because WinAPI was not designed to be portable as it targets only the Windows OS while the QT framework targets multiple OS-es. The fact that WinAPI was written in C does not make a difference.</p>\n"}, {"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 2, "last_activity_date": 1516208517, "creation_date": 1516208517, "answer_id": 48306362, "question_id": 48306204, "link": "https://stackoverflow.com/questions/48306204/why-is-win32-api-non-portable/48306362#48306362", "title": "Why is win32 API non-portable?", "body": "<p>The windows API is portable in the sense of being processor agnostic (indeed, it has run on many non-Intel processors over the years). It is not portable in the sense of being OS agnostic; although even there Microsoft's is not the only implementation of the API. The wine project has done a credible job of re-implementing the API for other platforms, to the point that windows binaries will run, at least on processors that match the binary.</p>\n"}, {"comments": [{"owner": {"reputation": 13984, "user_id": 501126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/839de8a602b21abf36e020bcb32959fe?s=128&d=identicon&r=PG", "display_name": "nemequ", "link": "https://stackoverflow.com/users/501126/nemequ"}, "edited": false, "score": 0, "creation_date": 1516218439, "post_id": 48306448, "comment_id": 83603202, "body": "<a href=\"http://www.straightrunning.com/XmingNotes/\" rel=\"nofollow noreferrer\">straightrunning.com/XmingNotes</a>"}], "tags": [], "owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "is_accepted": false, "score": 0, "last_activity_date": 1516208811, "creation_date": 1516208811, "answer_id": 48306448, "question_id": 48306204, "link": "https://stackoverflow.com/questions/48306204/why-is-win32-api-non-portable/48306448#48306448", "title": "Why is win32 API non-portable?", "body": "<p>Why is a rather open question; but here's my take on it:</p>\n\n<p>Win32 API is produced by microsoft; which has commercial reasons for not being portable.</p>\n\n<p>QT is open source; which was created with the sole intention to be portable.</p>\n\n<p>Bonus:\nX11 is open source; which was created with the idea that the machine displaying the images might not be the machine running the program that wants the window.  Which makes it inherently non-portable to other APIs that don't (eg windows)</p>\n"}, {"tags": [], "owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "is_accepted": false, "score": 2, "last_activity_date": 1516210018, "last_edit_date": 1516210018, "creation_date": 1516208936, "answer_id": 48306470, "question_id": 48306204, "link": "https://stackoverflow.com/questions/48306204/why-is-win32-api-non-portable/48306470#48306470", "title": "Why is win32 API non-portable?", "body": "<p>The fact that the WinAPI is aimed at C makes no difference.  </p>\n\n<p>Just because the language is cross platform it does not mean the library (especially in the case of those like WinAPI which are <em>not</em> in the standard library) are the same.</p>\n\n<p>It's just a library that interacts with the video card/processor to make a GUI on a <strong>very</strong> low level.  At this point it is so low level the process depends more on memory locations or processor specific operations.  IE saying that certain memory locations (specific to the OS) will reference a pixel on a screen ect.</p>\n\n<p>The Win32API has been built so that it <em>only</em> \"knows\" the tasks for computers with Windows OS, libraries like QT, once again are still not truly \"cross-platform\" they have just been built to include all the relevant operations needed for each OS it covers.    </p>\n"}], "owner": {"reputation": 13, "user_id": 9012351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/375c2df9abcc5321cfc1bf8dfed7093d?s=128&d=identicon&r=PG", "display_name": "user9012351", "link": "https://stackoverflow.com/users/9012351/user9012351"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "closed_date": 1516212964, "answer_count": 4, "score": -5, "last_activity_date": 1516210018, "creation_date": 1516207980, "question_id": 48306204, "link": "https://stackoverflow.com/questions/48306204/why-is-win32-api-non-portable", "closed_reason": "Needs details or clarity", "title": "Why is win32 API non-portable?", "body": "<p>I know that win32 API is written in C language and also why Qt is portable?</p>\n\n<p>Could someone explain this to me?</p>\n"}, {"tags": ["c++", "c", "stm32", "fat32", "fatfs"], "answers": [{"comments": [{"owner": {"reputation": 353, "user_id": 9090821, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KgpAu.jpg?s=128&g=1", "display_name": "MemAllox", "link": "https://stackoverflow.com/users/9090821/memallox"}, "edited": false, "score": 0, "creation_date": 1516219098, "post_id": 48309021, "comment_id": 83603573, "body": "If this does not help you, please give additional information: show your code, which library are you using,..."}, {"owner": {"reputation": 1, "user_id": 8688286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dc2bf3f970956fa6530e1dc52a1eac3?s=128&d=identicon&r=PG&f=1", "display_name": "M.kh", "link": "https://stackoverflow.com/users/8688286/m-kh"}, "edited": false, "score": 0, "creation_date": 1516258346, "post_id": 48309021, "comment_id": 83616126, "body": "I&#39;m using FATFS_V010B, before that this program has been tested by stm32f429 discovery board and it was ok but with my board not ok, i checked the pins 100 times and it was ok and crystal has 8MHZ frequency. the initialize return is SD_OK."}], "tags": [], "owner": {"reputation": 353, "user_id": 9090821, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KgpAu.jpg?s=128&g=1", "display_name": "MemAllox", "link": "https://stackoverflow.com/users/9090821/memallox"}, "is_accepted": false, "score": 0, "last_activity_date": 1516218993, "creation_date": 1516218993, "answer_id": 48309021, "question_id": 48306098, "link": "https://stackoverflow.com/questions/48306098/fr-not-enabled-fat-fs-error-when-read-sd-card/48309021#48309021", "title": "FR_Not_Enabled Fat_fs error when read sd card?", "body": "<p>It's difficult to help you without any further information, but maybe the following thread is helpful to you:\n<a href=\"https://stackoverflow.com/q/37897576/8484720\">STM32 : FatFs Library - f_mount</a></p>\n"}], "owner": {"reputation": 1, "user_id": 8688286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dc2bf3f970956fa6530e1dc52a1eac3?s=128&d=identicon&r=PG&f=1", "display_name": "M.kh", "link": "https://stackoverflow.com/users/8688286/m-kh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1160, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516218993, "creation_date": 1516207589, "question_id": 48306098, "link": "https://stackoverflow.com/questions/48306098/fr-not-enabled-fat-fs-error-when-read-sd-card", "title": "FR_Not_Enabled Fat_fs error when read sd card?", "body": "<p>i am using stmf429 mcu,Ive designed the board by myself,</p>\n\n<p>want to read sd card and open it but the f_mount has an error(FR_Not_Enabled).the in initialize is ok. </p>\n"}, {"tags": ["c++", "mfc", "cedit"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1516208558, "post_id": 48306034, "comment_id": 83597798, "body": "Try <code>CRichEditCtrl</code> <a href=\"https://msdn.microsoft.com/en-us/library/76a787xf.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/76a787xf.aspx</a>  Or you could use the raw unwrapped control: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb787605(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 1, "creation_date": 1516211086, "post_id": 48306034, "comment_id": 83599315, "body": "You have to roll out your own solution. Get the mouse position to create an edit box on a white parent window, save the text and dimension of that edit box, then draw it manually on parent window. RichEdit deosn&#39;t help, unless you use tables which is very complicated."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 1, "creation_date": 1516220970, "post_id": 48306034, "comment_id": 83604558, "body": "Simplest idea: Assign a fixed-width font, fill the edit control with space characters, disable insertion mode (so it will always overwrite). Also prevent return key from inserting new lines and so on..."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1516225210, "post_id": 48306034, "comment_id": 83606605, "body": "The feature is commonly called <i>&quot;virtual space&quot;</i> (e.g. in Visual Studio&#39;s text editors). Using this term you may have better luck finding a solution to your problem online."}, {"owner": {"reputation": 57, "user_id": 5390555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3951a7858047e065128ed2e97ed1762a?s=128&d=identicon&r=PG&f=1", "display_name": "vg8open", "link": "https://stackoverflow.com/users/5390555/vg8open"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1516235141, "post_id": 48306034, "comment_id": 83610015, "body": "@zett42 This might be the solution I&#39;ll have to go with..."}, {"owner": {"reputation": 57, "user_id": 5390555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3951a7858047e065128ed2e97ed1762a?s=128&d=identicon&r=PG&f=1", "display_name": "vg8open", "link": "https://stackoverflow.com/users/5390555/vg8open"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1516235212, "post_id": 48306034, "comment_id": 83610034, "body": "@IInspectable I searched &quot;virtual space&quot;, but nothing useful come up.  I&#39;ll do some more googling"}], "owner": {"reputation": 57, "user_id": 5390555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3951a7858047e065128ed2e97ed1762a?s=128&d=identicon&r=PG&f=1", "display_name": "vg8open", "link": "https://stackoverflow.com/users/5390555/vg8open"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1516207346, "creation_date": 1516207346, "question_id": 48306034, "link": "https://stackoverflow.com/questions/48306034/mfc-cedit-control-type-anywhere", "title": "mfc CEdit control type anywhere", "body": "<p>I am looking for a way to implement a multi-line CEdit control that allows you to type anywhere in the text box just like the links below.  If there's already an implementation of this, please let me know.\nThanks.</p>\n\n<p>image example: <a href=\"https://i.imgur.com/8M25mND.png\" rel=\"nofollow noreferrer\">https://i.imgur.com/8M25mND.png</a></p>\n\n<p>gif example: <a href=\"https://imgur.com/XpDBQly\" rel=\"nofollow noreferrer\">https://imgur.com/XpDBQly</a></p>\n"}, {"tags": ["c++", "qt", "desktop-application", "desktop", "mapi"], "comments": [{"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1516207963, "post_id": 48305985, "comment_id": 83597398, "body": "You may find this useful instead of MAPI with Qt: <a href=\"https://github.com/bluetiger9/SmtpClient-for-Qt\" rel=\"nofollow noreferrer\">github.com/bluetiger9/SmtpClient-for-Qt</a>"}, {"owner": {"reputation": 57, "user_id": 2529962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TKSJ4.jpg?s=128&g=1", "display_name": "Oleg Brovko", "link": "https://stackoverflow.com/users/2529962/oleg-brovko"}, "edited": false, "score": 0, "creation_date": 1516367141, "post_id": 48305985, "comment_id": 83668781, "body": "AlexanderVX Thanks for the help but this is not what I actually need."}], "answers": [{"tags": [], "owner": {"reputation": 57, "user_id": 2529962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TKSJ4.jpg?s=128&g=1", "display_name": "Oleg Brovko", "link": "https://stackoverflow.com/users/2529962/oleg-brovko"}, "is_accepted": false, "score": 0, "last_activity_date": 1516367412, "creation_date": 1516367412, "answer_id": 48341895, "question_id": 48305985, "link": "https://stackoverflow.com/questions/48305985/messaging-apimapi-acces-via-qt/48341895#48341895", "title": "Messaging API(MAPI) acces via Qt", "body": "<p>Thanks all for the help! Today I found the solution. Maybe it will help someone in the future. So for sending Emails via Message Client on Desktop Machines you should use <a href=\"http://doc.qt.io/archives/qt-4.8/qdesktopservices.html#openUrl\" rel=\"nofollow noreferrer\">QDesktopServices</a> module.</p>\n"}], "owner": {"reputation": 57, "user_id": 2529962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TKSJ4.jpg?s=128&g=1", "display_name": "Oleg Brovko", "link": "https://stackoverflow.com/users/2529962/oleg-brovko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1516367412, "creation_date": 1516207194, "question_id": 48305985, "link": "https://stackoverflow.com/questions/48305985/messaging-apimapi-acces-via-qt", "title": "Messaging API(MAPI) acces via Qt", "body": "<p>Does Qt have some Messaging API(MAPI) interface?\nI have C++/Qt program and want to send email via message client (it could be Outlook or any messaging-type program \"email client\") but can't find module in Qt library to manage the process.\nCould you please help me? Thanks.</p>\n"}, {"tags": ["c++", "visual-studio", "opencv"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1516207321, "post_id": 48305936, "comment_id": 83596999, "body": "Consider stepping through with a debugger to see where it fails."}], "answers": [{"comments": [{"owner": {"reputation": 5989, "user_id": 2283946, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wvjew.png?s=128&g=1", "display_name": "GPPK", "link": "https://stackoverflow.com/users/2283946/gppk"}, "edited": false, "score": 1, "creation_date": 1516207598, "post_id": 48305953, "comment_id": 83597161, "body": "@drescherjm Not the top code section, the bottom code section where OP has integrated it into their VS project, the file path is c:lena.jpg"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1516207641, "post_id": 48305953, "comment_id": 83597195, "body": "Oh, I see now. Sorry."}, {"owner": {"reputation": 45, "user_id": 7170388, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ee60e02ee23ed843744a71a641dd2e0a?s=128&d=identicon&r=PG&f=1", "display_name": "CL plane guy", "link": "https://stackoverflow.com/users/7170388/cl-plane-guy"}, "edited": false, "score": 0, "creation_date": 1516217690, "post_id": 48305953, "comment_id": 83602780, "body": "If I change to &quot;return -2;&quot;, then the program returns &quot;-2&quot;.  So, &quot;im.empty()&quot; is TRUE and &quot;if (im.empty())&quot; is TRUE.  So, how do I get to &quot; &gt; This PC &gt; Local Disk (C:) &gt; Lena&quot; or &quot; &gt;This PC &gt; Local Disk (C:) &gt; Lena.jpg&quot;.  I now have them both.  &#39;Mat im = imread(&quot;c:\\\\lena.jpg&quot;);&#39; did not work."}, {"owner": {"reputation": 5989, "user_id": 2283946, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wvjew.png?s=128&g=1", "display_name": "GPPK", "link": "https://stackoverflow.com/users/2283946/gppk"}, "edited": false, "score": 0, "creation_date": 1516264495, "post_id": 48305953, "comment_id": 83619112, "body": "It might be permissions on the top of your C drive, try moving it to the same folder as your executable and using a full filepath"}, {"owner": {"reputation": 45, "user_id": 7170388, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ee60e02ee23ed843744a71a641dd2e0a?s=128&d=identicon&r=PG&f=1", "display_name": "CL plane guy", "link": "https://stackoverflow.com/users/7170388/cl-plane-guy"}, "edited": false, "score": 0, "creation_date": 1516280964, "post_id": 48305953, "comment_id": 83629329, "body": "OpenCV uses the forward slash to denote file path.  EXAMPLE &quot;../data/HappyFish.jpg&quot;.  OpenCV documentation states that  &quot;Of course assure the image file is near your program file.&quot;.  I cannot get the OpenCV index to work.  I have to go through Google.  OpenCV includes its own code samples.  I am trying to get them to work too/instead ."}], "tags": [], "owner": {"reputation": 5989, "user_id": 2283946, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wvjew.png?s=128&g=1", "display_name": "GPPK", "link": "https://stackoverflow.com/users/2283946/gppk"}, "is_accepted": true, "score": 1, "last_activity_date": 1516207105, "creation_date": 1516207105, "answer_id": 48305953, "question_id": 48305936, "link": "https://stackoverflow.com/questions/48305936/the-introductory-sample-program-for-opencv-in-visual-studio-exits-with-code-1/48305953#48305953", "title": "The introductory sample program for Opencv in Visual Studio exits with code -1. No reasion", "body": "<p>Your filepath is wrong</p>\n\n<pre><code>Mat im = imread(\"c:lena.jpg\");\n</code></pre>\n\n<p>You probably need some slashes, I would suggest double backslash</p>\n\n<pre><code>Mat im = imread(\"c:\\\\lena.jpg\");\n</code></pre>\n\n<p>This means OpenCV Can't find the image and returns with -1 on these lines</p>\n\n<pre><code> if (im.empty())\n    {\n        cout &lt;&lt; \"Cannot load image!\" &lt;&lt; endl;\n        return -1;\n    }\n</code></pre>\n\n<p>The reason you don't see the console out is probably because the console closes straight after returning, although that's a guess.</p>\n"}], "owner": {"reputation": 45, "user_id": 7170388, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ee60e02ee23ed843744a71a641dd2e0a?s=128&d=identicon&r=PG&f=1", "display_name": "CL plane guy", "link": "https://stackoverflow.com/users/7170388/cl-plane-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 0, "accepted_answer_id": 48305953, "answer_count": 1, "score": 0, "last_activity_date": 1516207105, "creation_date": 1516207050, "question_id": 48305936, "link": "https://stackoverflow.com/questions/48305936/the-introductory-sample-program-for-opencv-in-visual-studio-exits-with-code-1", "title": "The introductory sample program for Opencv in Visual Studio exits with code -1. No reasion", "body": "<p>I have installed Visual Studio 15.5.3</p>\n\n<p>I have installed OpenCV 3.4.0</p>\n\n<p>I am trying to get this example OpenCV program to run.</p>\n\n<pre><code>#include \u201cstdafx.h\u201d\n#include &lt;opencv2/highgui/highgui.hpp&gt;\n#include &lt;iostream&gt;\nusing namespace cv;\nusing namespace std;\nint main(){ \nMat im = imread(\"c:/full/path/to/lena.jpg\"); \nif (im.empty()){ \ncout &lt;&lt; \"Cannot load image!\" &lt;&lt; endl; return -1; \n} \nimshow(\"Image\", im);\nwaitKey(0); \n}\n</code></pre>\n\n<p>I have inserted the example code into the default Visual Studio C++ template as follows:</p>\n\n<pre><code> // Open Computer Vision Program.cpp : Defines the entry point for the application.\n    //\n\n    #include \"stdafx.h\"\n    #include \"Open Computer Vision Program.h\"\n\n    ////    Example Code\n    #include &lt;opencv2/highgui/highgui.hpp&gt;\n    #include &lt;iostream&gt;\n    using namespace cv;\n    using namespace std;\n   ////    Example Code\n\n\n    #define MAX_LOADSTRING 100\n\n    // Global Variables:\n    HINSTANCE hInst;                                // current instance\n    WCHAR szTitle[MAX_LOADSTRING];                  // The title bar text\n    WCHAR szWindowClass[MAX_LOADSTRING];            // the main window class name\n\n    // Forward declarations of functions included in this code module:\n    ATOM                MyRegisterClass(HINSTANCE hInstance);\n    BOOL                InitInstance(HINSTANCE, int);\n    LRESULT CALLBACK    WndProc(HWND, UINT, WPARAM, LPARAM);\n    INT_PTR CALLBACK    About(HWND, UINT, WPARAM, LPARAM);\n\n    int APIENTRY wWinMain(_In_ HINSTANCE hInstance,\n                         _In_opt_ HINSTANCE hPrevInstance,\n                         _In_ LPWSTR    lpCmdLine,\n                         _In_ int       nCmdShow)\n    {\n        UNREFERENCED_PARAMETER(hPrevInstance);\n        UNREFERENCED_PARAMETER(lpCmdLine);\n\n        // TODO: Place code here.\n\n        ////    Example Code\n        Mat im = imread(\"c:lena.jpg\");\n        if (im.empty())\n        {\n            cout &lt;&lt; \"Cannot load image!\" &lt;&lt; endl;\n            return -1;\n        }\n        imshow(\"Image\", im);\n        waitKey(0);\n        ////    Example Code\n\n        // Initialize global strings\n        LoadStringW(hInstance, IDS_APP_TITLE, szTitle, MAX_LOADSTRING);\n        LoadStringW(hInstance, IDC_OPENCOMPUTERVISIONPROGRAM, szWindowClass, MAX_LOADSTRING);\n        MyRegisterClass(hInstance);\n\n        // Perform application initialization:\n        if (!InitInstance (hInstance, nCmdShow))\n        {\n            return FALSE;\n        }\n\n        HACCEL hAccelTable = LoadAccelerators(hInstance, MAKEINTRESOURCE(IDC_OPENCOMPUTERVISIONPROGRAM));\n\n        MSG msg;\n\n        // Main message loop:\n        while (GetMessage(&amp;msg, nullptr, 0, 0))\n        {\n            if (!TranslateAccelerator(msg.hwnd, hAccelTable, &amp;msg))\n            {\n                TranslateMessage(&amp;msg);\n                DispatchMessage(&amp;msg);\n            }\n        }\n\n        return (int) msg.wParam;\n    }\n\n\n\n    //\n    //  FUNCTION: MyRegisterClass()\n    //\n    //  PURPOSE: Registers the window class.\n    //\n    ATOM MyRegisterClass(HINSTANCE hInstance)\n    {\n        WNDCLASSEXW wcex;\n\n        wcex.cbSize = sizeof(WNDCLASSEX);\n\n        wcex.style          = CS_HREDRAW | CS_VREDRAW;\n        wcex.lpfnWndProc    = WndProc;\n        wcex.cbClsExtra     = 0;\n        wcex.cbWndExtra     = 0;\n        wcex.hInstance      = hInstance;\n        wcex.hIcon          = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_OPENCOMPUTERVISIONPROGRAM));\n        wcex.hCursor        = LoadCursor(nullptr, IDC_ARROW);\n        wcex.hbrBackground  = (HBRUSH)(COLOR_WINDOW+1);\n        wcex.lpszMenuName   = MAKEINTRESOURCEW(IDC_OPENCOMPUTERVISIONPROGRAM);\n        wcex.lpszClassName  = szWindowClass;\n        wcex.hIconSm        = LoadIcon(wcex.hInstance, MAKEINTRESOURCE(IDI_SMALL));\n\n        return RegisterClassExW(&amp;wcex);\n    }\n\n    //\n    //   FUNCTION: InitInstance(HINSTANCE, int)\n    //\n    //   PURPOSE: Saves instance handle and creates main window\n    //\n    //   COMMENTS:\n    //\n    //        In this function, we save the instance handle in a global variable and\n    //        create and display the main program window.\n    //\n    BOOL InitInstance(HINSTANCE hInstance, int nCmdShow)\n    {\n       hInst = hInstance; // Store instance handle in our global variable\n\n       HWND hWnd = CreateWindowW(szWindowClass, szTitle, WS_OVERLAPPEDWINDOW,\n          CW_USEDEFAULT, 0, CW_USEDEFAULT, 0, nullptr, nullptr, hInstance, nullptr);\n\n       if (!hWnd)\n       {\n          return FALSE;\n       }\n\n       ShowWindow(hWnd, nCmdShow);\n       UpdateWindow(hWnd);\n\n       return TRUE;\n    }\n\n    //\n    //  FUNCTION: WndProc(HWND, UINT, WPARAM, LPARAM)\n    //\n    //  PURPOSE:  Processes messages for the main window.\n    //\n    //  WM_COMMAND  - process the application menu\n    //  WM_PAINT    - Paint the main window\n    //  WM_DESTROY  - post a quit message and return\n    //\n    //\n    LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)\n    {\n        switch (message)\n        {\n        case WM_COMMAND:\n            {\n                int wmId = LOWORD(wParam);\n                // Parse the menu selections:\n                switch (wmId)\n                {\n                case IDM_ABOUT:\n                    DialogBox(hInst, MAKEINTRESOURCE(IDD_ABOUTBOX), hWnd, About);\n                    break;\n                case IDM_EXIT:\n                    DestroyWindow(hWnd);\n                    break;\n                default:\n                    return DefWindowProc(hWnd, message, wParam, lParam);\n                }\n            }\n            break;\n        case WM_PAINT:\n            {\n                PAINTSTRUCT ps;\n                HDC hdc = BeginPaint(hWnd, &amp;ps);\n                // TODO: Add any drawing code that uses hdc here...\n                EndPaint(hWnd, &amp;ps);\n            }\n            break;\n        case WM_DESTROY:\n            PostQuitMessage(0);\n            break;\n        default:\n            return DefWindowProc(hWnd, message, wParam, lParam);\n        }\n        return 0;\n    }\n\n    // Message handler for about box.\n    INT_PTR CALLBACK About(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam)\n    {\n        UNREFERENCED_PARAMETER(lParam);\n        switch (message)\n        {\n        case WM_INITDIALOG:\n            return (INT_PTR)TRUE;\n\n        case WM_COMMAND:\n            if (LOWORD(wParam) == IDOK || LOWORD(wParam) == IDCANCEL)\n            {\n                EndDialog(hDlg, LOWORD(wParam));\n                return (INT_PTR)TRUE;\n            }\n            break;\n        }\n        return (INT_PTR)FALSE;\n    }\n</code></pre>\n\n<p>The code runs with no compile errors and no debug errors.  But, the program does not do anything and exits with a code of -1.</p>\n\n<p>I have corrected all of the installation and compile errors, but something is still wrong and I do not see it.</p>\n\n<p>Does anyone have an idea?</p>\n"}, {"tags": ["c++", "c", "linux", "root"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 5, "creation_date": 1516206900, "post_id": 48305839, "comment_id": 83596733, "body": "No. Privileges are per-process."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1516206916, "post_id": 48305839, "comment_id": 83596744, "body": "I do not think so, and that would be huge security breach. Only way I know is suid app."}, {"owner": {"reputation": 28, "user_id": 1946274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9dde31c7985c5a44b5525c23e416ea?s=128&d=identicon&r=PG", "display_name": "CDF", "link": "https://stackoverflow.com/users/1946274/cdf"}, "edited": false, "score": 0, "creation_date": 1516262911, "post_id": 48305839, "comment_id": 83618325, "body": "I agree with the security issue, but the alternative at this moment is to execute the whole program as root, with the consequent security problems (I can&#39;t check for security holes in the whole library sources)"}], "answers": [{"comments": [{"owner": {"reputation": 28, "user_id": 1946274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9dde31c7985c5a44b5525c23e416ea?s=128&d=identicon&r=PG", "display_name": "CDF", "link": "https://stackoverflow.com/users/1946274/cdf"}, "edited": false, "score": 0, "creation_date": 1516263147, "post_id": 48306035, "comment_id": 83618445, "body": "Oh, good tip, I learnt something new, thanks! At this moment I can&#39;t do this because /dev/mem is opened everytime function is called an not once at startup. But I can try to propose a modification to the function developer."}], "tags": [], "owner": {"reputation": 1056, "user_id": 4319483, "user_type": "registered", "profile_image": "https://graph.facebook.com/668992100/picture?type=large", "display_name": "Bjorn A.", "link": "https://stackoverflow.com/users/4319483/bjorn-a"}, "is_accepted": true, "score": 0, "last_activity_date": 1516207349, "creation_date": 1516207349, "answer_id": 48306035, "question_id": 48305839, "link": "https://stackoverflow.com/questions/48305839/library-so-with-root-privilege/48306035#48306035", "title": "library (.so) with root privilege", "body": "<p>Start the program as root and open /dev/mem as a file. Then change user id to something less intrusive.  The file will keep its original permissions.</p>\n"}, {"comments": [{"owner": {"reputation": 28, "user_id": 1946274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9dde31c7985c5a44b5525c23e416ea?s=128&d=identicon&r=PG", "display_name": "CDF", "link": "https://stackoverflow.com/users/1946274/cdf"}, "edited": false, "score": 0, "creation_date": 1516288314, "post_id": 48316671, "comment_id": 83634219, "body": "Thanks for your concerns, but we need to write to /dev/mem to turn on/off a device. The function wasn&#39;t written by me but by who designed the board where the device is connected on, so he know what he do. And we don&#39;t have alternatives. As suggested by other, I will try to use seteuid() function to change privileges after open /dev/mem as root."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 28, "user_id": 1946274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9dde31c7985c5a44b5525c23e416ea?s=128&d=identicon&r=PG", "display_name": "CDF", "link": "https://stackoverflow.com/users/1946274/cdf"}, "edited": false, "score": 0, "creation_date": 1516606160, "post_id": 48316671, "comment_id": 83739741, "body": "@CDF, then probably it is better to use <code>&#47;dev&#47;kmem</code> which maps to the kernel virtual memory space.  That way, you can use the kernel memory map and don&#39;t have to translate yourself.  Anyway, a simple device development would be a better solution, as the way you proceed, there&#39;s no chance to be able to block or to impede simultaneous access to the same place, and crashing the whole system.  I think you don&#39;t know what you are planning.... a device driver would be the solution for that purpose."}, {"owner": {"reputation": 28, "user_id": 1946274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9dde31c7985c5a44b5525c23e416ea?s=128&d=identicon&r=PG", "display_name": "CDF", "link": "https://stackoverflow.com/users/1946274/cdf"}, "edited": false, "score": 0, "creation_date": 1516612967, "post_id": 48316671, "comment_id": 83743033, "body": "I forward to the developer your suggestion to use /dev/kmem, thanks."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 28, "user_id": 1946274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9dde31c7985c5a44b5525c23e416ea?s=128&d=identicon&r=PG", "display_name": "CDF", "link": "https://stackoverflow.com/users/1946274/cdf"}, "edited": false, "score": 0, "creation_date": 1516616090, "post_id": 48316671, "comment_id": 83744858, "body": "No, my suggestion was not to use <code>&#47;dev&#47;kmem</code>, but to write a driver... drivers are the only things to control devices..... if you try to control it by writing to <code>&#47;dev&#47;kmem</code> you will crash the thing also.... <code>&#47;dev&#47;kmem</code> is strongly deprecated to use.  Please, never say I have recommended to use <code>&#47;dev&#47;kmem</code> to stop a device... I have never done that.  And also, why is not the developer who asks the questions.  Do you feel you are needed in between?"}, {"owner": {"reputation": 28, "user_id": 1946274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9dde31c7985c5a44b5525c23e416ea?s=128&d=identicon&r=PG", "display_name": "CDF", "link": "https://stackoverflow.com/users/1946274/cdf"}, "edited": false, "score": 0, "creation_date": 1516697980, "post_id": 48316671, "comment_id": 83783002, "body": "Long story <i>very very</i> short (because comments have a limitation of characters): hardware/library people here are good on hardware/kernel/devices stuffs but are not good about security issues. I am the &quot;last guy&quot; hired and before my arrive they usually used to executed <i>all</i> the software by root (yeah, I known: do you remember the part where I say that they aren&#39;t good on security?). So I am trying to hardening the system. Oh, and I don&#39;t mentioned other constraint that don&#39;t allow us to do it in a different way."}, {"owner": {"reputation": 28, "user_id": 1946274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9dde31c7985c5a44b5525c23e416ea?s=128&d=identicon&r=PG", "display_name": "CDF", "link": "https://stackoverflow.com/users/1946274/cdf"}, "edited": false, "score": 0, "creation_date": 1516697986, "post_id": 48316671, "comment_id": 83783008, "body": "So, please, stay on topic: the thread IS NOT about if it is a good or bad idea to write on /dev/mem, but about how to write to /dev/mem by unprivileged user. The answear is &quot;NOT directly&quot;, but as suggested by Bjorn, I can start the program as root, open the file and than change the effective user id."}], "tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 2, "last_activity_date": 1516264228, "last_edit_date": 1516264228, "creation_date": 1516263631, "answer_id": 48316671, "question_id": 48305839, "link": "https://stackoverflow.com/questions/48305839/library-so-with-root-privilege/48316671#48316671", "title": "library (.so) with root privilege", "body": "<p>The quick answer is <strong>NO</strong>.  You cannot switch userids on a per-library basis, as the user identity is a per-process property (you should know at least this, if you are trying to dig into the <code>/dev/mem</code> device).</p>\n\n<p>Runtime library loading is a library task (it is done by a shared object called the dynamic loader, <code>ld-linux-x86-64.so.2</code>, in my system) and it is done at runtime, so no privileged access can be granted to it, for security reasons.</p>\n\n<p>Anyway, the setuid property for a program allows you to switch privileges between the <em>effective</em> user (this is the setuid user) and the <em>real</em> user (the user who executes the program) and back, so in the special case of the <code>root</code> account, you can use it to access <code>/dev/mem</code>.</p>\n\n<p>Anyway, apart of the access problem, writing to <code>/dev/mem</code> is very dangerous, as it maps to the physical address space of the machine (so, it's there as physical pages, from different processes and the kernel, with no apparent order).  This has to be done with the translation table available, as pages come and go to swap in a very dynamic way.  And you are touching kernel memory anyway, so you have to extreme care when writing there.  I don't know what do you want to do, but you had better to think twice before writing there (as from your question, you don't know a process' properties well enough, it's most probable you don't know also the virtual to physical translation of pages that is being held in the kernel).</p>\n\n<p>But if you want to crash your system, this is the perfect way to do.  Anyway, if that is the target you pursue, then just make the whole program setuid root (if you know what this sentence mean) and go ahead.  Or even better, do it as the root user, so you don't need to worry about setuid or the like.</p>\n"}], "owner": {"reputation": 28, "user_id": 1946274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9dde31c7985c5a44b5525c23e416ea?s=128&d=identicon&r=PG", "display_name": "CDF", "link": "https://stackoverflow.com/users/1946274/cdf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 48306035, "answer_count": 2, "score": 0, "last_activity_date": 1516264228, "creation_date": 1516206768, "question_id": 48305839, "link": "https://stackoverflow.com/questions/48305839/library-so-with-root-privilege", "title": "library (.so) with root privilege", "body": "<p>I have a C++ program that uses some C libraries. The program is executed as an \"unprivileged\" user but one and only one function of a library (.so) loaded by the program need root privileges (it needs to write to /dev/mem).</p>\n\n<p>Do exists a way to have only that function or only that library executed as root, leaving all the rest code \"unprivileged\"?</p>\n\n<p>Thanks to all,\nCristian</p>\n"}, {"tags": ["c++", "sfml"], "comments": [{"owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 2, "creation_date": 1516205132, "post_id": 48305279, "comment_id": 83595609, "body": "You&#39;ll have to compile SFML by hand instead of using the released binaries."}, {"owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 1, "creation_date": 1516205148, "post_id": 48305279, "comment_id": 83595627, "body": "See <a href=\"https://www.sfml-dev.org/tutorials/2.4/compile-with-cmake.php\" rel=\"nofollow noreferrer\">sfml-dev.org/tutorials/2.4/compile-with-cmake.php</a>"}, {"owner": {"reputation": 61, "user_id": 8565266, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8oIqU.jpg?s=128&g=1", "display_name": "Recondito", "link": "https://stackoverflow.com/users/8565266/recondito"}, "reply_to_user": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 1, "creation_date": 1516205481, "post_id": 48305279, "comment_id": 83595864, "body": "Thank you very much. Will give it a go."}, {"owner": {"reputation": 33251, "user_id": 409744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b055a62302498782454622c61e44aa51?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/409744/mario"}, "edited": false, "score": 0, "creation_date": 1516301909, "post_id": 48305279, "comment_id": 83642499, "body": "The binaries for Visual Studio 2015 and 2017 should be directly compatible, so you should be able to just use the VS 2015 version."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 4314233, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jjdW0.jpg?s=128&g=1", "display_name": "Calculus Knight", "link": "https://stackoverflow.com/users/4314233/calculus-knight"}, "edited": false, "score": 1, "creation_date": 1550052514, "post_id": 48336607, "comment_id": 96125214, "body": "This doesn&#39;t answer the question. For the OP it might be the right advice, but not for whoever finds the question looking for an actual answer."}, {"owner": {"reputation": 5996, "user_id": 1152524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2e23f3f9bf82e6fe806261f50b2f9b6?s=128&d=identicon&r=PG&f=1", "display_name": "txtechhelp", "link": "https://stackoverflow.com/users/1152524/txtechhelp"}, "reply_to_user": {"reputation": 113, "user_id": 4314233, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jjdW0.jpg?s=128&g=1", "display_name": "Calculus Knight", "link": "https://stackoverflow.com/users/4314233/calculus-knight"}, "edited": false, "score": 0, "creation_date": 1550071541, "post_id": 48336607, "comment_id": 96137107, "body": "@CalculusKnight .. I&#39;m sorry you&#39;re having similar troubles, but given this Q&amp;A was over a year ago, and <a href=\"https://stackoverflow.com/a/52716073/1152524\">it no longer seems to be an issue</a>, if you are having a specific problem getting it set up, feel free to <a href=\"https://stackoverflow.com/questions/ask\">ask</a> a question."}], "tags": [], "owner": {"reputation": 5996, "user_id": 1152524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2e23f3f9bf82e6fe806261f50b2f9b6?s=128&d=identicon&r=PG&f=1", "display_name": "txtechhelp", "link": "https://stackoverflow.com/users/1152524/txtechhelp"}, "is_accepted": false, "score": 2, "last_activity_date": 1516349236, "last_edit_date": 1592644375, "creation_date": 1516349236, "answer_id": 48336607, "question_id": 48305279, "link": "https://stackoverflow.com/questions/48305279/how-can-i-setup-sfml-in-visual-studio-2017/48336607#48336607", "title": "How can I setup SFML in Visual Studio 2017?", "body": "<p>First, congrats on starting your journey into programming!</p>\n<p>However, as someone who has tutored many kids who have the same ambition (e.g. learning C++ to make a video game), I'd recommend you start down a simpler path.</p>\n<p>I won't go into trying to learn C# or Java or some other language, as I, and many others, actually started with C; it's not about learning the particular language, it's about understanding the system as a whole. The concept of a thread, object, loops or functions doesn't change, it's how it's utilized that changes between languages.</p>\n<blockquote>\n<p>I'm the kind of person that likes to use the latest of the latest programs.</p>\n</blockquote>\n<p>While this might typically be good for most programs, due to bug fixes or other enhancements, this is not true for development environments. When you update Visual Studio, you're typically updating your entire toolchain: compiler, linker, SDK's, etc.</p>\n<p>This means the possibility to introduce either a buggy compiler, or have code flagged as deprecated, among other issues to be considered. Especially when developing something like a game.</p>\n<blockquote>\n<p>I haven't started programming because &quot;I don't know where to start&quot;</p>\n</blockquote>\n<p>Here's a simple <a href=\"https://en.wikipedia.org/wiki/War_(card_game)\" rel=\"nofollow noreferrer\">&quot;war&quot;</a> card game that emulates 2 players; it automatically plays war until the game is won. It repeats this until an interrupt signal is received (<code>CTRL+C</code>) and it prints out the maximum number of turns during any game, as well as the minimum number of turns in any game played by our 'auto-players'.</p>\n<p>It's in C++, can be modified to take user input for a blackjack or poker game, and you can build it on any system simply enough.</p>\n<p>This code is meant for teaching, so you can take this code, modify it, build it, run it, and understand what's happening in each of those steps.</p>\n<p>From there, you can learn more, ask more questions, and eventually you'll be able to make your 2D platform game with <a href=\"https://www.sfml-dev.org/tutorials/2.4/\" rel=\"nofollow noreferrer\">SFML</a>.</p>\n<h2>war.cpp</h2>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;deque&gt;\n#include &lt;algorithm&gt;\n#include &lt;ctime&gt;\n#include &lt;cstdlib&gt;\n#include &lt;csignal&gt;\n\n#define print(v) std::cout &lt;&lt; v\n#define printl(v) std::cout &lt;&lt; v &lt;&lt; std::endl\n\nnamespace util {\n    class random {\n        public:\n            random() { std::srand(std::time(0)); }\n            int get(int max_val) { return std::rand() % max_val; }\n    };\n}\n\nnamespace battle {\n    class suit {\n        public:\n            typedef enum enum_t {\n                HEART,\n                DIAMOND,\n                CLUB,\n                SPADE,\n                END\n            } enum_t;\n\n            suit() : m_val(END) {}\n            suit(const suit&amp; cp) : m_val(cp.m_val) {}\n            explicit suit(enum_t val) : m_val(val) {}\n\n            suit&amp; operator=(const suit&amp; other)\n            {\n                this-&gt;m_val = other.m_val;\n                return *this;\n            }\n            suit&amp; operator=(const enum_t&amp; other)\n            {\n                this-&gt;m_val = other;\n                return *this;\n            }\n\n            bool operator==(const enum_t&amp; other) { return (this-&gt;m_val == other); }\n            bool operator!=(const enum_t&amp; other) { return (this-&gt;m_val != other); }\n            bool operator&lt;(const enum_t&amp; other) { return (this-&gt;m_val &lt; other); }\n            bool operator&gt;(const enum_t&amp; other) { return (this-&gt;m_val &gt; other); }\n            operator int() const { return static_cast&lt;int&gt;(this-&gt;m_val); }\n            operator enum_t() const { return this-&gt;m_val; }\n            \n            friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const battle::suit&amp; val)\n            {\n                switch (val.m_val) {\n                    case battle::suit::HEART: os &lt;&lt; &quot;\u2665&quot;; break;\n                    case battle::suit::DIAMOND: os &lt;&lt; &quot;\u2666&quot;; break;\n                    case battle::suit::CLUB: os &lt;&lt; &quot;\u2663&quot;; break;\n                    case battle::suit::SPADE: os &lt;&lt; &quot;\u2660&quot;; break;\n                    default: os &lt;&lt; '?'; break;\n                }\n                return os;\n            }\n\n        private:\n            enum_t m_val;\n    };\n    \n    class value {\n        public:\n            typedef enum enum_t {\n                ACE,\n                ONE,\n                TWO,\n                THREE,\n                FOUR,\n                FIVE,\n                SIX,\n                SEVEN,\n                EIGHT,\n                NINE,\n                JACK,\n                QUEEN,\n                KING,\n                END\n            } enum_t;\n\n            value() : m_val(END) {}\n            value(const value&amp; cp) : m_val(cp.m_val) {}\n            explicit value(enum_t val) : m_val(val) {}\n\n            value&amp; operator=(const value&amp; other)\n            {\n                this-&gt;m_val = other.m_val;\n                return *this;\n            }\n            value&amp; operator=(const enum_t&amp; other)\n            {\n                this-&gt;m_val = other;\n                return *this;\n            }\n\n            bool operator==(const enum_t&amp; other) { return (this-&gt;m_val == other); }\n            bool operator!=(const enum_t&amp; other) { return (this-&gt;m_val != other); }\n            bool operator&lt;(const enum_t&amp; other) { return (this-&gt;m_val &lt; other); }\n            bool operator&gt;(const enum_t&amp; other) { return (this-&gt;m_val &gt; other); }\n            operator int() const { return static_cast&lt;int&gt;(this-&gt;m_val); }\n            operator enum_t() const { return this-&gt;m_val; }\n\n            friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const battle::value&amp; val)\n            {\n                switch (val.m_val) {\n                    case battle::value::ACE: os &lt;&lt; 'A'; break;\n                    case battle::value::JACK: os &lt;&lt; 'J'; break;\n                    case battle::value::QUEEN: os &lt;&lt; 'Q'; break;\n                    case battle::value::KING: os &lt;&lt; 'K'; break;\n                    default: os &lt;&lt; static_cast&lt;int&gt;(val); break;\n                }\n                return os;\n            }\n\n        private:\n            enum_t m_val;\n    };\n\n    class card {\n        public:\n            card() : m_val(value::END), m_suit(suit::END) {}\n            card(const card&amp; cp) : m_val(cp.m_val), m_suit(cp.m_suit) {}\n            card(int suit, int val) : m_val(static_cast&lt;value::enum_t&gt;(val)), m_suit(static_cast&lt;suit::enum_t&gt;(suit)) {}\n            card(suit::enum_t suit, value::enum_t val) : m_val(val), m_suit(suit) {}\n            ~card() {}\n            \n            card&amp; operator=(const card&amp; other)\n            {\n                this-&gt;m_val = other.m_val;\n                this-&gt;m_suit = other.m_suit;\n                return *this;\n            }\n            \n            bool operator==(const card&amp; other)\n            {\n                return (this-&gt;m_val == other.m_val &amp;&amp; this-&gt;m_suit == other.m_suit);\n            }\n            \n            bool operator!=(const card&amp; other)\n            {\n                return !(this-&gt;m_val == other.m_val &amp;&amp; this-&gt;m_suit == other.m_suit);\n            }\n            \n            bool operator&lt;(const card&amp; other)\n            {\n                if (this-&gt;m_val == value::ACE) {\n                    return false;\n                }\n                return (this-&gt;m_val &lt; other.m_val);\n            }\n            \n            bool operator&gt;(const card&amp; other)\n            {\n                if (this-&gt;m_val == value::ACE) {\n                    return (other.m_val != value::ACE);\n                }\n                return (this-&gt;m_val &gt; other.m_val);\n            }\n            \n            bool empty() const\n            {\n                return (this-&gt;m_val == value::END ||\n                        this-&gt;m_suit == suit::END);\n            }\n            \n            friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const card&amp; obj)\n            {\n                os &lt;&lt; obj.m_val &lt;&lt; obj.m_suit;\n                return os;\n            }\n            \n            int suit() const\n            {\n                return this-&gt;m_suit;\n            }\n            \n            value::enum_t value() const\n            {\n                return this-&gt;m_val;\n            }\n            \n        private:      \n            battle::value m_val;\n            battle::suit m_suit;\n    };\n\n    class deck {\n        public:\n            static const std::size_t DECK_SIZE = 52;\n            static const std::size_t HALF_DECK = 26;\n\n            deck() : m_rand(), m_deck() {}\n            \n            ~deck() {}\n            \n            bool add(card&amp; c)\n            {\n                if (c.empty()) { return false; }\n                const std::size_t idx = static_cast&lt;std::size_t&gt;(c.suit());\n                itr_t cv = std::find(this-&gt;m_deck.begin(), this-&gt;m_deck.end(), c);\n                bool found = (cv != this-&gt;m_deck.end());\n                if (!found) {\n                    this-&gt;m_deck.insert(this-&gt;m_deck.begin(), c);\n                    return true;\n                }\n                return false;\n            }\n            \n            void add_init(card c)\n            {\n                const std::size_t idx = static_cast&lt;std::size_t&gt;(c.suit());\n                this-&gt;m_deck.push_back(c);\n            }\n\n            card deal()\n            {\n                if (!this-&gt;empty()) {\n                    std::size_t cnt = this-&gt;m_deck.size();\n                    if ((cnt == 0) || ((cnt - 1) == 0)) {\n                        card ret(this-&gt;m_deck[0]);\n                        this-&gt;m_deck.erase(this-&gt;m_deck.begin());\n                        return ret;\n                    }\n                    cnt = this-&gt;m_rand.get(cnt);\n                    card ret = this-&gt;m_deck[cnt];\n                    this-&gt;remove_it(ret);\n                    return ret;\n                }\n                return card();\n            }\n            \n            bool empty() const\n            {\n                return this-&gt;m_deck.empty();\n            }\n\n            void fill()\n            {\n                printl(&quot;Filling deck&quot;);\n                for (int s = suit::HEART; s &lt; suit::END; ++s) {\n                    for (int v = value::ACE; v &lt; value::END; ++v) {\n                        this-&gt;add_init(battle::card(s, v));\n                    }\n                }\n            }\n\n            void top_to_back()\n            {\n                card&amp; c = this-&gt;m_deck[this-&gt;m_deck.size()-1];\n                for (itr_t s = this-&gt;m_deck.begin(); s != this-&gt;m_deck.end(); ++s) {\n                    if ((*s) == c) {\n                        this-&gt;m_deck.erase(s);\n                        break;\n                    }\n                }\n                this-&gt;m_deck.insert(this-&gt;m_deck.begin(), c);\n            }\n\n            void remove(const card&amp; c)\n            {\n                if (!this-&gt;empty()) {\n                    this-&gt;remove_it(c);\n                }\n            }\n            \n            std::size_t size() const\n            {\n                return this-&gt;m_deck.size();\n            }\n\n            card operator[](std::size_t idx) const\n            {\n                return this-&gt;m_deck[idx];\n            }\n            \n        private:\n            deck(const deck&amp; cp); // = delete\n            deck&amp; operator=(const deck&amp; other); // = delete\n\n            util::random m_rand;\n            std::deque&lt;card&gt; m_deck;\n            typedef std::deque&lt;card&gt;::iterator itr_t;\n            \n            void remove_it(const card&amp; c)\n            {\n                for (itr_t s = this-&gt;m_deck.begin(); s != this-&gt;m_deck.end(); ++s) {\n                    if ((*s) == c) {\n                        this-&gt;m_deck.erase(s);\n                        break;\n                    }\n                }\n            }\n    };\n\n    class player {\n        public:\n            player() : m_hand(), m_name(&quot;NaN&quot;), m_id(), m_tot_add(0), m_tot_rem(0), m_won(0), m_other(0) {}\n            player(std::size_t id) : m_hand(), m_name(), m_id(id), m_tot_add(0), m_tot_rem(0), m_won(0), m_other(0)\n            {\n                std::stringstream ss;\n                ss &lt;&lt; &quot;Player &quot; &lt;&lt; id;\n                this-&gt;m_name = ss.str();\n            }\n        \n            void add_init(card c)\n            {\n                this-&gt;m_hand.add_init(c);\n            }\n        \n            bool add_card(card c)\n            {\n                ++this-&gt;m_tot_add;\n                return this-&gt;m_hand.add(c);\n            }\n            \n            void add_cards(const std::deque&lt;card&gt;&amp; cards)\n            {\n                std::deque&lt;card&gt;::const_iterator start = cards.begin();\n                while (start != cards.end()) {\n                    this-&gt;add_card(*start);\n                    ++start;\n                }\n            }\n            \n            bool empty() const\n            {\n                return this-&gt;m_hand.empty();\n            }\n\n            std::deque&lt;card&gt; battle_group() const\n            {\n                std::deque&lt;card&gt; ret;\n                if (!this-&gt;empty()) {\n                    std::size_t top_idx = this-&gt;m_hand.size()-1;\n                    for (std::size_t i = 0; i &lt; 4 &amp;&amp; top_idx &gt; 0; ++i) {\n                        ret.push_back(this-&gt;m_hand[--top_idx]);\n                    }\n                }\n                return ret;\n            }\n            \n            std::size_t hand_size() const\n            {\n                return this-&gt;m_hand.size();\n            }\n\n            std::size_t id() const\n            {\n                return this-&gt;m_id;\n            }\n            \n            std::string name() const\n            {\n                return this-&gt;m_name;\n            }\n            \n            void print_hand() const\n            {\n                for (std::size_t i = 0; i &lt; this-&gt;m_hand.size(); ++i) {\n                    std::cout &lt;&lt; this-&gt;m_hand[i] &lt;&lt; std::endl;\n                }\n            }\n            \n            void remove_card(card c)\n            {\n                ++this-&gt;m_tot_rem;\n                this-&gt;m_hand.remove(c);\n            }\n            \n            void remove_cards(const std::deque&lt;card&gt;&amp; cards)\n            {\n                std::deque&lt;card&gt;::const_iterator start = cards.begin();\n                while (start != cards.end()) {\n                    this-&gt;remove_card(*start);\n                    ++start;\n                }\n            }\n            \n            void print_stats()\n            {\n                printl(&quot;---&quot; &lt;&lt; this-&gt;name() &lt;&lt; &quot;---&quot;);\n                printl(&quot;Hand: &quot; &lt;&lt; this-&gt;m_hand.size());\n                printl(&quot;Wins: &quot; &lt;&lt; this-&gt;m_won);\n                printl(&quot;Took: &quot; &lt;&lt; this-&gt;m_tot_add);\n                printl(&quot;Lost: &quot; &lt;&lt; this-&gt;m_tot_rem);\n            }\n            \n            void set_other_play(player&amp; other)\n            {\n                this-&gt;m_other = &amp;other;\n            }\n\n            void takes(card&amp; c)\n            {\n                printl(this-&gt;m_name &lt;&lt; &quot; takes &quot; &lt;&lt; c);\n                this-&gt;m_hand.top_to_back();\n                this-&gt;m_other-&gt;remove_card(c);\n                this-&gt;add_card(c);\n            }\n\n            card top_card() const\n            {\n                if (this-&gt;empty()) { return card(); }\n                return this-&gt;m_hand[this-&gt;m_hand.size()-1];\n            }\n\n            void won_battle(card&amp; c)\n            {\n                printl(this-&gt;m_name &lt;&lt; &quot; won the battle!&quot;);\n                this-&gt;takes(c);\n                ++this-&gt;m_won;\n            }\n\n            void won_battle(const std::deque&lt;card&gt;&amp; cards)\n            {\n                std::deque&lt;card&gt;::const_iterator start = cards.begin();\n                this-&gt;m_hand.top_to_back();\n                print(this-&gt;m_name &lt;&lt; &quot; won the battle, takes&quot;);\n                while (start != cards.end()) {\n                    print(&quot; &quot; &lt;&lt; *start);\n                    this-&gt;m_other-&gt;remove_card(*start);\n                    this-&gt;add_card(*start);\n                    ++start;\n                }\n                printl(&quot;&quot;);\n                ++this-&gt;m_won;\n            }\n\n        private:\n            deck m_hand;\n            std::string m_name;\n            std::size_t m_id;\n            std::size_t m_tot_add;\n            std::size_t m_tot_rem;\n            std::size_t m_won;\n            player* m_other;\n    };\n\n    class game {\n        public:\n            game() : m_deck(), m_p1(1), m_p2(2), m_turns(0), m_battles(0)\n            {\n                this-&gt;m_p1.set_other_play(this-&gt;m_p2);\n                this-&gt;m_p2.set_other_play(this-&gt;m_p1);\n                this-&gt;m_deck.fill();\n                printl(&quot;Dealing cards&quot;);\n                for (std::size_t i = 0; i &lt; deck::HALF_DECK; ++i) {\n                    this-&gt;m_p1.add_init(this-&gt;m_deck.deal());\n                    this-&gt;m_p2.add_init(this-&gt;m_deck.deal());\n                }\n            }\n\n            std::size_t dobattle(battle::card&amp; c1, battle::card&amp; c2)\n            {\n                printl(&quot;BATTLE!!!!&quot;);\n                ++this-&gt;m_battles;\n                std::size_t sz1 = this-&gt;m_p1.hand_size();\n                std::size_t sz2 = this-&gt;m_p2.hand_size();\n                if (sz2 &lt;= 1 &amp;&amp; sz1 &gt; 1) {\n                    this-&gt;m_p1.won_battle(c2);\n                    return this-&gt;m_p1.id();\n                }\n                if (sz1 &lt;= 1 &amp;&amp; sz2 &gt; 1) {\n                    this-&gt;m_p2.won_battle(c1);\n                    return this-&gt;m_p2.id();\n                }\n\n                std::deque&lt;battle::card&gt; t1 = this-&gt;m_p1.battle_group();\n                std::deque&lt;battle::card&gt; t2 = this-&gt;m_p2.battle_group();\n                printl(this-&gt;m_p1.name() &lt;&lt; &quot;: &quot; &lt;&lt; t1.back() &lt;&lt; &quot;, &quot; &lt;&lt; this-&gt;m_p2.name() &lt;&lt; &quot;: &quot; &lt;&lt; t2.back());\n                if (t1.back() &gt; t2.back()) {\n                    this-&gt;m_p1.won_battle(t2);\n                    return this-&gt;m_p1.id();\n                } else if (t1.back() &lt; t2.back()) {\n                    this-&gt;m_p2.won_battle(t1);\n                    return this-&gt;m_p2.id();\n                } else { // another battle\n\n                    this-&gt;m_p1.remove_card(c1); this-&gt;m_p1.remove_cards(t1);\n                    this-&gt;m_p2.remove_card(c2); this-&gt;m_p2.remove_cards(t2);\n\n                    if (this-&gt;dobattle(t1.back(), t2.back()) == this-&gt;m_p1.id()) {\n                        this-&gt;m_p1.add_card(c1); this-&gt;m_p1.add_cards(t1);\n                        this-&gt;m_p2.add_card(c2); this-&gt;m_p2.add_cards(t2);\n\n                        this-&gt;m_p1.won_battle(t2);\n                        return this-&gt;m_p1.id();\n                    } else {\n                        this-&gt;m_p1.add_card(c1); this-&gt;m_p1.add_cards(t1);\n                        this-&gt;m_p2.add_card(c2); this-&gt;m_p2.add_cards(t2);\n\n                        this-&gt;m_p2.won_battle(t1);\n                        return this-&gt;m_p2.id();\n                    }\n                }\n                return 0;\n            }\n\n            void play()\n            {\n                battle::card c1, c2;\n                while (true) {\n                    if (this-&gt;check_win()) break;\n                    c1 = this-&gt;m_p1.top_card();\n                    c2 = this-&gt;m_p2.top_card();\n                    printl(this-&gt;m_p1.name() &lt;&lt; &quot;: &quot; &lt;&lt; c1 &lt;&lt; &quot;, &quot; &lt;&lt; this-&gt;m_p2.name() &lt;&lt; &quot;: &quot; &lt;&lt; c2);\n                    if (c1 &lt; c2) {\n                        this-&gt;m_p2.takes(c1);\n                    } else if (c1 &gt; c2) {\n                        this-&gt;m_p1.takes(c2);\n                    } else { // c1 == c2\n                        this-&gt;dobattle(c1, c2);\n                    }\n                    ++this-&gt;m_turns;\n                    if (this-&gt;check_win()) break;   \n                }\n                printl(&quot;&quot;);\n                printl(&quot;Game over!&quot;);\n                printl(&quot;&quot;);\n            }\n\n            void print_stats()\n            {\n                printl(&quot;----Stats----&quot;);\n                printl(&quot;Turns: &quot; &lt;&lt; this-&gt;m_turns);\n                printl(&quot;Battles: &quot; &lt;&lt; this-&gt;m_battles);\n                this-&gt;m_p1.print_stats();\n                this-&gt;m_p2.print_stats();\n            }\n\n            std::size_t turns() const { return this-&gt;m_turns; }\n            std::size_t battles() const { return this-&gt;m_battles; }\n\n        private:\n            deck m_deck;\n            player m_p1;\n            player m_p2;\n            std::size_t m_turns;\n            std::size_t m_battles;\n\n            bool check_win() const\n            {\n                if (this-&gt;m_p1.empty() || this-&gt;m_p2.empty()) {\n                    if (this-&gt;m_p1.empty() &amp;&amp; !this-&gt;m_p2.empty()) {\n                        printl(this-&gt;m_p2.name() &lt;&lt; &quot; WINS!&quot;);\n                    } else if (!this-&gt;m_p1.empty() &amp;&amp; this-&gt;m_p2.empty()) {\n                        printl(this-&gt;m_p1.name() &lt;&lt; &quot; WINS!&quot;);\n                    } else {\n                        printl(&quot;TIE?&quot;);\n                    }\n                    return true;\n                }\n                return false;\n            }\n    };\n}\n\nstatic volatile bool m_stop;\n\nstatic void sig_hand(int sig) {\n    if (sig == SIGINT) { m_stop = true; }\n}\n\nint main(int argc, char* argv[])\n{\n    std::size_t x = ~0;\n    std::size_t n = 0;\n    std::size_t g = 0;\n    const std::size_t MAX = 8; // 7*4 = 28\n\n    std::signal(SIGINT, sig_hand);\n\n    while ((x &gt; MAX) &amp;&amp; !m_stop) {\n        battle::game game;\n        game.play();\n        ++g;\n        game.print_stats();\n        if (game.turns() &lt; x) {\n            x = game.turns();\n            std::cerr &lt;&lt; &quot;least: &quot; &lt;&lt; x &lt;&lt; std::endl;\n        }\n        if (n &lt; game.turns()) {\n            n = game.turns();\n            std::cerr &lt;&lt; &quot;most: &quot; &lt;&lt; n &lt;&lt; std::endl;\n        }\n    }\n    //printl(&quot;Done! Games played: &quot; &lt;&lt; g &lt;&lt; &quot;, Least turns: &quot; &lt;&lt; x &lt;&lt; &quot;, Most turns: &quot; &lt;&lt; n);\n\n    std::cerr &lt;&lt; &quot;Done! Games played: &quot; &lt;&lt; g &lt;&lt; &quot;, Least turns: &quot; &lt;&lt; x &lt;&lt; &quot;, Most turns: &quot; &lt;&lt; n &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n<p>Hope that can help.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7598761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8829b390999afd7f9668b36004d65d42?s=128&d=identicon&r=PG&f=1", "display_name": "Tom P", "link": "https://stackoverflow.com/users/7598761/tom-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1539072094, "creation_date": 1539072094, "answer_id": 52716073, "question_id": 48305279, "link": "https://stackoverflow.com/questions/48305279/how-can-i-setup-sfml-in-visual-studio-2017/52716073#52716073", "title": "How can I setup SFML in Visual Studio 2017?", "body": "<p>Just a note to say SFML now works fine with VS2017.</p>\n\n<p>I have version 2.5 binaries no need to compile.</p>\n\n<p>See instructions here:</p>\n\n<p><a href=\"https://www.sfml-dev.org/tutorials/2.5/start-vc.php\" rel=\"nofollow noreferrer\">https://www.sfml-dev.org/tutorials/2.5/start-vc.php</a></p>\n"}], "owner": {"reputation": 61, "user_id": 8565266, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8oIqU.jpg?s=128&g=1", "display_name": "Recondito", "link": "https://stackoverflow.com/users/8565266/recondito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3938, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1539072094, "creation_date": 1516204981, "question_id": 48305279, "link": "https://stackoverflow.com/questions/48305279/how-can-i-setup-sfml-in-visual-studio-2017", "title": "How can I setup SFML in Visual Studio 2017?", "body": "<p>I don't know if this has happened to some of you guys. I haven't started programming because \"I don't know where to start\". I want to make a platform video game, and 8 bits one. Yeah it will take a lot of time and skill, but I always like to jump to the complicated stuff.</p>\n\n<p>I'm the kind of person that likes to use the latest of the latest programs. So I use Visual Studio 2017, however SFML is up to VS2015. Is there a way to use SFML is VS2017? What can I do?</p>\n"}, {"tags": ["c++", ".net", "profiling"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1516214506, "post_id": 48305130, "comment_id": 83601082, "body": "They were moved, getting versioned by the framework version since 4.6.  Look in C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.x.y\\Include\\um.  Not sure whose responsible for deploying, it might be the VS installer."}, {"owner": {"reputation": 219, "user_id": 3976460, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cebc29f1c43032b6723658427de5b64f?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Griffith", "link": "https://stackoverflow.com/users/3976460/christopher-griffith"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1516218546, "post_id": 48305130, "comment_id": 83603257, "body": "@HansPassant I verified that the header is located under that path on my PC. It makes sense for it to be associated with .NET framework version rather than a Windows SDK, I just wish Microsoft had documented that it moved! I don&#39;t know why my file search didn&#39;t turn it up in the first place, but oh well. If you post this comment as an answer, I can mark this question answered since it resolved my issue."}], "answers": [{"tags": [], "owner": {"reputation": 3854, "user_id": 235878, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d34f91f66d43a8981b4975431d55fa86?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/235878/patrick"}, "is_accepted": false, "score": 0, "last_activity_date": 1616612247, "creation_date": 1616612247, "answer_id": 66787597, "question_id": 48305130, "link": "https://stackoverflow.com/questions/48305130/was-the-windows-profiling-api-removed-as-of-the-windows-10-sdk/66787597#66787597", "title": "Was the Windows Profiling API removed as of the Windows 10 SDK?", "body": "<p>Even with Hans' hint, it still took me a while to figure out which package deploys the NetFxSDK, so hope below information is helpful for someone.</p>\n<ol>\n<li>Get the Win 10 SDK from <a href=\"https://developer.microsoft.com/en-US/windows/downloads/windows-10-sdk/\" rel=\"nofollow noreferrer\">https://developer.microsoft.com/en-US/windows/downloads/windows-10-sdk/</a></li>\n<li>Make sure select .NET Framework Software Development Kit</li>\n<li>The library and include files will be in C:\\Program Files (x86)\\Windows Kits\\NETFXSDK&lt;.net version&gt;\\</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/ckNc8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ckNc8.png\" alt=\"Installation menu for NetFxSDK\" /></a></p>\n"}], "owner": {"reputation": 219, "user_id": 3976460, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cebc29f1c43032b6723658427de5b64f?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Griffith", "link": "https://stackoverflow.com/users/3976460/christopher-griffith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1616612247, "creation_date": 1516204590, "last_edit_date": 1516205092, "question_id": 48305130, "link": "https://stackoverflow.com/questions/48305130/was-the-windows-profiling-api-removed-as-of-the-windows-10-sdk", "title": "Was the Windows Profiling API removed as of the Windows 10 SDK?", "body": "<p>Specifically, the one described here:\n<a href=\"https://docs.microsoft.com/en-us/dotnet/framework/unmanaged-api/profiling/\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/dotnet/framework/unmanaged-api/profiling/</a></p>\n\n<p>I can find CorProf.h under the Windows 8.1 SDK include directory but not the Windows 10 SDK include directory. </p>\n\n<p>Was the API removed in Windows 10? Was the header file renamed? Was the header file moved to a different location? Was my installation of the windows 10 SDK somehow messed up? I've been unable to track down any information as to what might be going on.</p>\n\n<p>I feel like there must be something obvious I'm missing.</p>\n\n<p>Small update: I found a blog ( <a href=\"https://naughter.wordpress.com/2017/08/06/changes-in-the-windows-v10-0-16232-sdk-compared-to-windows-v10-0-15063-sdk-part-two/\" rel=\"nofollow noreferrer\">https://naughter.wordpress.com/2017/08/06/changes-in-the-windows-v10-0-16232-sdk-compared-to-windows-v10-0-15063-sdk-part-two/</a> ) while searching around for answers that had this to say, but I'm not entirely sure of the implications:\n\"cor.h, cordebug.h/idl, CorError.h, CorHdr.h, corhlpr.h, corprof.h/idl, corpub.h/idl &amp; corsym.h/idl: All of these header files have been removed. They are all the native mode COM interface to .NET.\"</p>\n"}, {"tags": ["c++", "casting", "stl", "natvis"], "answers": [{"tags": [], "owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "is_accepted": true, "score": 0, "last_activity_date": 1518543270, "last_edit_date": 1518543270, "creation_date": 1518542904, "answer_id": 48772423, "question_id": 48305121, "link": "https://stackoverflow.com/questions/48305121/how-to-temporarily-typecast-cptrlist-entries-using-natvis/48772423#48772423", "title": "How to (temporarily) typecast CPtrList entries using natvis?", "body": "<p>You would have to use a <code>&lt;CustomListItems&gt;</code> tag (see <strong>CustomListItems expansion item</strong> in the <a href=\"https://msdn.microsoft.com/en-us/library/jj620914.aspx\" rel=\"nofollow noreferrer\">MS documentation</a> for more details).  This is the most generic specification of a displayed type which allows local variables and looping.</p>\n\n<p>The example that they use in their documentation is as follows:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Type Name=\"ATL::CAtlMap&amp;lt;*,*,*,*&amp;gt;\"&gt;  \n    &lt;AlternativeType Name=\"ATL::CMapToInterface&amp;lt;*,*,*&amp;gt;\"/&gt;  \n    &lt;AlternativeType Name=\"ATL::CMapToAutoPtr&amp;lt;*,*,*&amp;gt;\"/&gt;  \n    &lt;DisplayString&gt;{{Count = {m_nElements}}}&lt;/DisplayString&gt;  \n    &lt;Expand&gt;  \n      &lt;CustomListItems MaxItemsPerView=\"5000\" ExcludeView=\"Test\"&gt;  \n        &lt;Variable Name=\"iBucket\" InitialValue=\"-1\" /&gt;  \n        &lt;Variable Name=\"pBucket\" InitialValue=\"m_ppBins == nullptr ? nullptr : *m_ppBins\" /&gt;  \n        &lt;Variable Name=\"iBucketIncrement\" InitialValue=\"-1\" /&gt;  \n\n        &lt;Size&gt;m_nElements&lt;/Size&gt;  \n        &lt;Exec&gt;pBucket = nullptr&lt;/Exec&gt;  \n        &lt;Loop&gt;  \n          &lt;If Condition=\"pBucket == nullptr\"&gt;  \n            &lt;Exec&gt;iBucket++&lt;/Exec&gt;  \n            &lt;Exec&gt;iBucketIncrement = __findnonnull(m_ppBins + iBucket, m_nBins - iBucket)&lt;/Exec&gt;  \n            &lt;Break Condition=\"iBucketIncrement == -1\" /&gt;  \n            &lt;Exec&gt;iBucket += iBucketIncrement&lt;/Exec&gt;  \n            &lt;Exec&gt;pBucket = m_ppBins[iBucket]&lt;/Exec&gt;  \n          &lt;/If&gt;  \n          &lt;Item&gt;pBucket,na&lt;/Item&gt;  \n          &lt;Exec&gt;pBucket = pBucket-&gt;m_pNext&lt;/Exec&gt;  \n        &lt;/Loop&gt;  \n      &lt;/CustomListItems&gt;  \n    &lt;/Expand&gt;  \n&lt;/Type&gt;  \n</code></pre>\n\n<p>The only minor issue it has is that if you copy the expression that this creates from a watch window, it will look like a number casted to a pointer of the type you wanted, instead of having a nice looking array like syntax and as such will result in it not being updated if the memory location moves.  If you reference a parent containing object, this isn't a big deal, just annoying.</p>\n"}], "owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "accepted_answer_id": 48772423, "answer_count": 1, "score": 0, "last_activity_date": 1604259785, "creation_date": 1516204556, "last_edit_date": 1604259785, "question_id": 48305121, "link": "https://stackoverflow.com/questions/48305121/how-to-temporarily-typecast-cptrlist-entries-using-natvis", "title": "How to (temporarily) typecast CPtrList entries using natvis?", "body": "<p>I'm working with a C++ solution, based on STL, and I'm using CPtrList collections.</p>\n\n<p>I have here a CPtrList collection, containing <code>void *</code> entries, and I would like to typecast those automatically using a natvis file.</p>\n\n<p>Currently, my natvis looks as follows:</p>\n\n<pre><code>&lt;Type Name=\"CList&amp;lt;*,*&amp;gt;\"&gt;\n  &lt;AlternativeType Name=\"CObList\"&gt;&lt;/AlternativeType&gt;\n  &lt;AlternativeType Name=\"CPtrList\"&gt;&lt;/AlternativeType&gt;\n  &lt;AlternativeType Name=\"CStringList\"&gt;&lt;/AlternativeType&gt;\n  &lt;AlternativeType Name=\"CTypedPtrList&amp;lt;*,*&amp;gt;\"&gt;&lt;/AlternativeType&gt;\n  &lt;DisplayString&gt;{{iets anders Count = {m_nCount}}}&lt;/DisplayString&gt;\n  &lt;Expand&gt;\n    &lt;Item Name=\"Count\"&gt;m_nCount&lt;/Item&gt;\n    &lt;LinkedListItems&gt;\n      &lt;Size&gt;m_nCount&lt;/Size&gt;\n      &lt;HeadPointer&gt;m_pNodeHead&lt;/HeadPointer&gt;\n      &lt;NextPointer&gt;pNext&lt;/NextPointer&gt;\n      &lt;ValueNode&gt;data&lt;/ValueNode&gt;\n    &lt;/LinkedListItems&gt;\n  &lt;/Expand&gt;\n&lt;/Type&gt;\n</code></pre>\n\n<p>As a result the entries of my CPtrList look like the following:</p>\n\n<pre><code>0x&lt;something&gt;      void *\n0x&lt;something else&gt; void *\n...\n</code></pre>\n\n<p>I would like to have the entries typecasted into something like this:</p>\n\n<pre><code>&lt;information&gt;      CElement::SL_SET_PARAMETER*\n&lt;information else&gt; CElement::SL_SET_PARAMETER*\n</code></pre>\n\n<p>Once I know how to get this done, I can add a \"SL_SET_PARAMETER\" entry in my natvis and decide how to display this, but therefore I first need to explain to natvis that every CPtrList entry should be casted into a \"SL_SET_PARAMETER\" object.</p>\n\n<p>Does anybody know how to do this?</p>\n"}, {"tags": ["c++", "numbers", "srand", "tracker"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 6, "creation_date": 1516204494, "post_id": 48305015, "comment_id": 83595177, "body": "have you tried using a debugger? What did you learn?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1516204661, "post_id": 48305015, "comment_id": 83595285, "body": "<code>for (int c = 0; c &lt;= 10; c++)</code> generates 11 bombs."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1516204827, "post_id": 48305015, "comment_id": 83595403, "body": "You set your bomb&#39;s position with <code>GameBoard [MX] [MY] = 9;</code> but you increment the counters with <code>GameBoard [MY] [MX]</code> Notice <code>MX</code> and <code>MY</code> are inverted."}, {"owner": {"reputation": 1, "user_id": 9230330, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-D5_DeAb8lpc/AAAAAAAAAAI/AAAAAAAAAgo/zNEZCg0VGWY/photo.jpg?sz=128", "display_name": "Nina Paquette", "link": "https://stackoverflow.com/users/9230330/nina-paquette"}, "edited": false, "score": 0, "creation_date": 1516204850, "post_id": 48305015, "comment_id": 83595422, "body": "the only thing that I found in debugger appeared only on my mac in xcode (I&#39;ve been writing this mostly on a school windows computer in codeblocks) and was with the srand and doesn&#39;t relay have anything to do with the counting for the numbers."}, {"owner": {"reputation": 51, "user_id": 2993049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85a8967f5e8641585aa2bedd5a5f982?s=128&d=identicon&r=PG&f=1", "display_name": "mrjaso", "link": "https://stackoverflow.com/users/2993049/mrjaso"}, "edited": false, "score": 0, "creation_date": 1516204943, "post_id": 48305015, "comment_id": 83595481, "body": "You should add more comments.  Comments after the variables to explain how you intend to use them.  Comments for each block to explain what exactly you are trying to do in that block.  This could help find logical errors by itself, and other people reading your code will have an easier time finding any coding errors if they have the English explanation to compare them to."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1516205009, "post_id": 48305015, "comment_id": 83595527, "body": "There is also a problem with your logic regarding avoiding placing bombs where bombs are already present. If you find that a bomb is already present, you pick a new coordinate but do not check with previous bombs&#39; position. You don&#39;t even need <code>BombTracker</code>, just check if <code>GameBoard</code> is 9 or more at the prospective position."}, {"owner": {"reputation": 1, "user_id": 9230330, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-D5_DeAb8lpc/AAAAAAAAAAI/AAAAAAAAAgo/zNEZCg0VGWY/photo.jpg?sz=128", "display_name": "Nina Paquette", "link": "https://stackoverflow.com/users/9230330/nina-paquette"}, "edited": false, "score": 0, "creation_date": 1516205219, "post_id": 48305015, "comment_id": 83595679, "body": "It seems to be somewhat working now but not internally. not sure how to post a photo of it."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 2, "creation_date": 1516205313, "post_id": 48305015, "comment_id": 83595744, "body": "@nina don&#39;t! Copy/Paste the console output into your <a href=\"https://stackoverflow.com/posts/48305015/edit\">edit</a>ed answer."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1516205373, "post_id": 48305015, "comment_id": 83595786, "body": "By the way, is it intentional not to generate bombs on the last row and column? <code>rand()%8</code> gives an integer in [0;7]."}, {"owner": {"reputation": 1, "user_id": 9230330, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-D5_DeAb8lpc/AAAAAAAAAAI/AAAAAAAAAgo/zNEZCg0VGWY/photo.jpg?sz=128", "display_name": "Nina Paquette", "link": "https://stackoverflow.com/users/9230330/nina-paquette"}, "edited": false, "score": 0, "creation_date": 1516205590, "post_id": 48305015, "comment_id": 83595920, "body": "No, just changed it, thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 59, "user_id": 2690543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a55532861317c02f82a4afdcfce59198?s=128&d=identicon&r=PG&f=1", "display_name": "angelvet", "link": "https://stackoverflow.com/users/2690543/angelvet"}, "is_accepted": false, "score": 0, "last_activity_date": 1516230041, "last_edit_date": 1516230041, "creation_date": 1516227498, "answer_id": 48310938, "question_id": 48305015, "link": "https://stackoverflow.com/questions/48305015/basic-minesweeper-bomb-counter-function-not-working/48310938#48310938", "title": "Basic minesweeper. Bomb counter function not working", "body": "<p>Source code you have posted here is hard to follow, has a lot of magic numbers. It's a maintenance nightmare to support such code.</p>\n\n<p>Try to give your variables good names, that describe the entity that variable\nrepresents.</p>\n\n<p>Try to encapsulate each small task within its own routine.</p>\n\n<p>For example logic for determining adjacent cells for a target cell is pretty straightforward and can be implemented by using Compass metaphor. So here we have eight Directions - one for each cardinal direction </p>\n\n<p><a href=\"https://i.stack.imgur.com/kiHAX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kiHAX.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;random&gt;\n#include &lt;array&gt;\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n\nenum Compass\n{\n  North,\n  NorthEast,\n  East,\n  SouthEast,\n  South,\n  SouthWest,\n  West,\n  NorthWest\n};\n</code></pre>\n\n<p>Then define enumeration for each edge of minefield board, Direction class and type for indexing board cells.</p>\n\n<pre><code>enum BoardEdge\n{\n  Inside,\n  Top,\n  TopRight,\n  Right,\n  BottomRight,\n  Bottom,\n  BottomLeft,\n  Left,\n  TopLeft\n};\n\nstruct CellIndex2D;\n\nusing IndexType = std::size_t;\nusing CellIndex2DList = std::vector&lt;CellIndex2D&gt;;\nusing CellIndex1D = std::size_t;\n\nstruct CellIndex2D\n{\n  IndexType X;\n  IndexType Y;\n};\n\nstruct Direction\n{\n  explicit Direction(CellIndex2D targetCell) noexcept\n    :cell_(targetCell) {}\n\n  template &lt;Compass C&gt;\n  CellIndex2D To() const;\n\nprivate:\n  CellIndex2D cell_;\n};\n</code></pre>\n\n<p>Now we have all bits and pieces to determine index of each target cell adjacent cells. Following our Compass metaphor X coordinate for North cell is equals to target cell X coordinate and Y coordinate is less by one from target one:</p>\n\n<pre><code>template &lt;&gt;\ninline CellIndex2D Direction::To&lt;North&gt;() const\n{\n  return{ cell_.X, (cell_.Y - 1) };\n}\ntemplate &lt;&gt;\ninline CellIndex2D Direction::To&lt;NorthEast&gt;() const\n{\n  return{ (cell_.X + 1), (cell_.Y - 1) };\n}\ntemplate &lt;&gt;\ninline CellIndex2D Direction::To&lt;East&gt;() const\n{\n  return{ (cell_.X + 1), cell_.Y };\n}\ntemplate &lt;&gt;\ninline CellIndex2D Direction::To&lt;SouthEast&gt;() const\n{\n  return{ (cell_.X + 1), (cell_.Y + 1) };\n}\ntemplate &lt;&gt;\ninline CellIndex2D Direction::To&lt;South&gt;() const\n{\n  return{ cell_.X, (cell_.Y + 1) };\n}\ntemplate &lt;&gt;\ninline CellIndex2D Direction::To&lt;SouthWest&gt;() const\n{\n  return{ (cell_.X - 1), (cell_.Y + 1) };\n}\ntemplate &lt;&gt;\ninline CellIndex2D Direction::To&lt;West&gt;() const\n{\n  return{ (cell_.X - 1), cell_.Y };\n}\ntemplate &lt;&gt;\ninline CellIndex2D Direction::To&lt;NorthWest&gt;() const\n{\n  return{ (cell_.X - 1), (cell_.Y - 1) };\n}\n</code></pre>\n\n<p>Now lets describe adjacent cells for each edge type of the board, for example cell in top left corner has only three adjacent cells:</p>\n\n<pre><code>template &lt;BoardEdge BE = Inside&gt;\nstruct AdjacentCells\n{\n  static CellIndex2DList Get(CellIndex2D targetCell)\n  {\n    Direction direction{ targetCell };\n\n    return CellIndex2DList{\n      CellIndex2D(direction.To&lt;North&gt;()),\n      CellIndex2D(direction.To&lt;NorthEast&gt;()),\n      CellIndex2D(direction.To&lt;East&gt;()),\n      CellIndex2D(direction.To&lt;SouthEast&gt;()),\n      CellIndex2D(direction.To&lt;South&gt;()),\n      CellIndex2D(direction.To&lt;SouthWest&gt;()),\n      CellIndex2D(direction.To&lt;West&gt;()),\n      CellIndex2D(direction.To&lt;NorthWest&gt;())\n    };\n  }\n};\n\ntemplate &lt;&gt;\nstruct AdjacentCells&lt;Top&gt;\n{\n  static CellIndex2DList Get(CellIndex2D targetCell)\n  {\n    Direction direction{ targetCell };\n\n    return CellIndex2DList{\n      CellIndex2D(direction.To&lt;East&gt;()),\n      CellIndex2D(direction.To&lt;SouthEast&gt;()),\n      CellIndex2D(direction.To&lt;South&gt;()),\n      CellIndex2D(direction.To&lt;SouthWest&gt;()),\n      CellIndex2D(direction.To&lt;West&gt;())\n    };\n  }\n};\ntemplate &lt;&gt;\nstruct AdjacentCells&lt;TopRight&gt;\n{\n  static CellIndex2DList Get(CellIndex2D targetCell)\n  {\n    Direction direction{ targetCell };\n\n    return CellIndex2DList{\n      CellIndex2D(direction.To&lt;South&gt;()),\n      CellIndex2D(direction.To&lt;SouthWest&gt;()),\n      CellIndex2D(direction.To&lt;West&gt;())\n    };\n  }\n};\ntemplate &lt;&gt;\nstruct AdjacentCells&lt;Right&gt;\n{\n  static CellIndex2DList Get(CellIndex2D targetCell)\n  {\n    Direction direction{ targetCell };\n\n    return CellIndex2DList{\n      CellIndex2D(direction.To&lt;North&gt;()),\n      CellIndex2D(direction.To&lt;South&gt;()),\n      CellIndex2D(direction.To&lt;SouthWest&gt;()),\n      CellIndex2D(direction.To&lt;West&gt;()),\n      CellIndex2D(direction.To&lt;NorthWest&gt;())\n    };\n  }\n};\ntemplate &lt;&gt;\nstruct AdjacentCells&lt;BottomRight&gt;\n{\n  static CellIndex2DList Get(CellIndex2D targetCell)\n  {\n    Direction direction{ targetCell };\n\n    return CellIndex2DList{\n      CellIndex2D(direction.To&lt;North&gt;()),\n      CellIndex2D(direction.To&lt;West&gt;()),\n      CellIndex2D(direction.To&lt;NorthWest&gt;())\n    };\n  }\n};\ntemplate &lt;&gt;\nstruct AdjacentCells&lt;Bottom&gt;\n{\n  static CellIndex2DList Get(CellIndex2D targetCell)\n  {\n    Direction direction{ targetCell };\n\n    return CellIndex2DList{\n      CellIndex2D(direction.To&lt;North&gt;()),\n      CellIndex2D(direction.To&lt;NorthEast&gt;()),\n      CellIndex2D(direction.To&lt;East&gt;()),\n      CellIndex2D(direction.To&lt;West&gt;()),\n      CellIndex2D(direction.To&lt;NorthWest&gt;())\n    };\n  }\n};\ntemplate &lt;&gt;\nstruct AdjacentCells&lt;BottomLeft&gt;\n{\n  static CellIndex2DList Get(CellIndex2D targetCell)\n  {\n    Direction direction{ targetCell };\n\n    return CellIndex2DList{\n      CellIndex2D(direction.To&lt;North&gt;()),\n      CellIndex2D(direction.To&lt;NorthEast&gt;()),\n      CellIndex2D(direction.To&lt;East&gt;())\n    };\n  }\n};\ntemplate &lt;&gt;\nstruct AdjacentCells&lt;Left&gt;\n{\n  static CellIndex2DList Get(CellIndex2D targetCell)\n  {\n    Direction direction{ targetCell };\n\n    return CellIndex2DList{\n      CellIndex2D(direction.To&lt;North&gt;()),\n      CellIndex2D(direction.To&lt;NorthEast&gt;()),\n      CellIndex2D(direction.To&lt;East&gt;()),\n      CellIndex2D(direction.To&lt;SouthEast&gt;()),\n      CellIndex2D(direction.To&lt;South&gt;())\n    };\n  }\n};\ntemplate &lt;&gt;\nstruct AdjacentCells&lt;TopLeft&gt;\n{\n  static CellIndex2DList Get(CellIndex2D targetCell)\n  {\n    Direction direction{ targetCell };\n\n    return CellIndex2DList{\n      CellIndex2D(direction.To&lt;East&gt;()),\n      CellIndex2D(direction.To&lt;SouthEast&gt;()),\n      CellIndex2D(direction.To&lt;South&gt;())\n    };\n  }\n};\n</code></pre>\n\n<p>And we are ready to define routine that actually give us a list of adjacent cell indices for target cell:</p>\n\n<pre><code>CellIndex2DList GetAdjacentCellIndices(CellIndex2D targetCell, std::size_t mfWidth, std::size_t mfHeight)\n{\n  //TODO: check that targetCell is within minefield bounds\n\n  //Check if cell lies on one of the board edges (left, right, top, bottom)\n  bool le = targetCell.X == 0;\n  bool re = (targetCell.X + 1) == mfWidth;\n  bool te = targetCell.Y == 0;\n  bool be = (targetCell.Y + 1) == mfHeight;\n\n  bool inc = !te &amp;&amp; !be; //cell is between top and bottom edges\n  bool inr = !le &amp;&amp; !re; //cell is between left and right edges\n\n  //cell is inside board\n  if (inc &amp;&amp; inr)\n    return AdjacentCells&lt;Inside&gt;::Get(targetCell);\n\n  //left edge cell\n  if (le &amp;&amp; inc)\n    return AdjacentCells&lt;Left&gt;::Get(targetCell);\n  //right edge cell\n  if (re &amp;&amp; inc)\n    return AdjacentCells&lt;Right&gt;::Get(targetCell);\n  //top edge cell\n  if (te &amp;&amp; inr)\n    return AdjacentCells&lt;Top&gt;::Get(targetCell);\n  //bottom edge cell\n  if (be &amp;&amp; inr)\n    return AdjacentCells&lt;Bottom&gt;::Get(targetCell);\n\n  //topleft corner cell\n  if (te &amp;&amp; le)\n    return AdjacentCells&lt;TopLeft&gt;::Get(targetCell);\n  //bottomleft corner cell\n  if (be &amp;&amp; le)\n    return AdjacentCells&lt;BottomLeft&gt;::Get(targetCell);\n  //topright corner cell\n  if (te &amp;&amp; re)\n    return AdjacentCells&lt;TopRight&gt;::Get(targetCell);\n  //bottomright corner cell\n  if (be &amp;&amp; re)\n    return AdjacentCells&lt;BottomRight&gt;::Get(targetCell);\n\n  return{};\n}\n</code></pre>\n\n<p>Lets create Minefield class, Generate function will do all hard work for creating minefield. We just loop while all mines not placed. On each iteration we generate random index within board, if there is no mine already exist, put it by this index and increase weight for all neighboring cells:</p>\n\n<pre><code>class MineField\n{\npublic:\n  MineField(std::size_t width, std::size_t height)\n      :\n  width_{ width },\n  height_{ height },\n  cells_{ width *height }\n  {  }\n\n  void Generate(std::size_t mineCount)\n  {\n    using unsigned_distribution = std::uniform_int_distribution&lt;std::size_t&gt;;\n\n    std::random_device    rand;\n    std::mt19937          engine(rand());\n\n    unsigned_distribution xDist(0u, width_ - 1);\n    unsigned_distribution yDist(0u, height_ - 1);\n\n    std::uint16_t mc = 0;\n    while (mc != mineCount)\n    {\n      CellIndex2D cellIndex{ xDist(engine), yDist(engine) };\n      CellIndex1D index = convertIndex2DTo1D(cellIndex);\n\n      if (hasMine(index))\n        continue;\n\n      putMine(index);\n\n      //Increase weight for all adjacent squares around mine\n      auto&amp;&amp; adjacentCellsList = GetAdjacentCellIndices(cellIndex, width_, height_);\n      for (auto adjIndex : adjacentCellsList)\n        increaseCellWeightByOne(convertIndex2DTo1D(adjIndex));\n\n      ++mc;\n    }\n  }\n\n  void Print() const\n  {\n    std::stringstream out{};\n\n    std::size_t rowCellsCount = 0;\n    for (auto&amp;&amp; cell : cells_)\n    {\n      if (cell.HasMine)\n        out &lt;&lt; \"* \";\n      else\n        out &lt;&lt; cell.Weight &lt;&lt; \" \";\n\n      rowCellsCount++;\n      if (rowCellsCount == width_)\n      {\n        out &lt;&lt; '\\n';\n        rowCellsCount = 0;\n      }\n    }\n\n    std::cout &lt;&lt; out.str();\n  }\n\nprivate:\n  struct Cell\n  {\n    std::size_t Weight;\n    bool        HasMine;\n  };\n\n  bool hasMine(CellIndex1D cellIndex) const\n  {\n    return cells_[cellIndex].HasMine;\n  }\n\n  void putMine(CellIndex1D cellIndex)\n  {\n    cells_[cellIndex].HasMine = true;\n  }\n\n  void increaseCellWeightByOne(CellIndex1D cellIndex)\n  {\n    cells_[cellIndex].Weight = cells_[cellIndex].Weight + 1;\n  }\n\n  CellIndex1D convertIndex2DTo1D(CellIndex2D targetCell) const\n  {\n    return{ (targetCell.X + targetCell.Y * width_) };\n  }\n\nprivate:\n  std::vector&lt;Cell&gt; cells_;\n  std::size_t       width_;\n  std::size_t       height_;\n};\n</code></pre>\n\n<p>Actually main application by itself. You can define any minefield size and mine count here:</p>\n\n<pre><code>int main()\n{\n  const std::size_t MfWidth = 9;\n  const std::size_t MfHeight = 9;\n  const std::size_t MineCount = 10;\n\n  MineField mf{ MfWidth,MfHeight };\n\n  mf.Generate(MineCount);\n  mf.Print();\n\n  return 0;\n}\n</code></pre>\n\n<p>Output (mines are marked with stars):</p>\n\n<pre><code>2 * 2 1 3 * 2 0 0\n2 * 2 1 * * 2 0 0\n1 1 1 1 2 2 1 0 0\n0 0 0 0 0 0 1 1 1\n0 0 0 0 0 0 1 * 2\n0 0 0 1 1 1 1 2 *\n1 1 0 1 * 2 1 2 1\n* 1 0 1 1 2 * 1 0\n1 1 0 0 0 1 1 1 0\n</code></pre>\n\n<p>This code also not perfect and can be improved much by refactoring but on my opinion it is much more readable and can be easily debugged and tested.</p>\n"}], "owner": {"reputation": 1, "user_id": 9230330, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-D5_DeAb8lpc/AAAAAAAAAAI/AAAAAAAAAgo/zNEZCg0VGWY/photo.jpg?sz=128", "display_name": "Nina Paquette", "link": "https://stackoverflow.com/users/9230330/nina-paquette"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 298, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1543836986, "creation_date": 1516204237, "last_edit_date": 1543836986, "question_id": 48305015, "link": "https://stackoverflow.com/questions/48305015/basic-minesweeper-bomb-counter-function-not-working", "title": "Basic minesweeper. Bomb counter function not working", "body": "<p>I've been working on some code for a basic minesweeper program and at this point I'm complacently lost. The numbers around the bombs wont generate properly and there doesn't even seem to be a pattern to whats going wrong. I need help with finding a way to fix this issue without having to re-wright my enter program. my teacher cant figure out a way to help me and suggests that I use what i have to make a luck based game sense its due Tuesday. Please help.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;cstdlib&gt;\n#include &lt;conio.h&gt;\n#include &lt;windows.h&gt;\n#include &lt;ctime&gt;\nusing namespace std;\nint main()\n{\nint GameBoard [9] [9] = { };\nint BombTracker [20] = { };\nsrand(time(0));\nfor (int c = 0; c &lt;= 10; c++ ) //generates 10 bombs\n{\n    int TX;\n    int TY;\n    int MX = rand() % 8;\n    int MY = rand() % 8;\n\n    for ( TY = 1, TX = 0; TY &lt;= 19; TX+=2, TY+=2)//cycle through array \n    {\n        if (MY == BombTracker [TY] &amp;&amp; MX == BombTracker [TX])//Regenerate and restart count if found true\n            {\n              MX = rand() % 8;\n              MY = rand() % 8;\n                TY = -1;\n                TX = -2;\n            }\n    }\n    GameBoard [MX] [MY] = 9;\nif (MY == 0 &amp;&amp; MX == 0) //(0,0)\n    {\n        MX = MX + 1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //5: my,mx+1\n        MY = MY + 1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //7: my+1,mx+1\n        MX = MX - 1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //6: my+1,mx\n    }\nif (MY == 0 &amp;&amp; MX == 8) //(8,0)\n    {\n        MX = MX - 1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //1: my,mx-1\n        MY = MY -1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //2: my-1,mx-1\n        MY = MY + 2;\n        MX = MX + 1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //6: my+1,mx\n    }\nif (MY == 8 &amp;&amp; MX == 0) //(0,8)\n    {\n        MY = MY - 1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //3: my-1,mx\n        MX = MX + 1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //4: my-1,mx+1\n        MY = MY + 1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //5: my,mx+1\n    }\nif (MY == 8 &amp;&amp; MX == 8) //(8,8)\n    {\n        MX = MX - 1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //1: my,mx-1\n        MY = MY -1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //2: my-1,mx-1\n        MX = MX + 1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //3: my-1,mx\n    }\nif ((MX &gt;= 1 &amp;&amp; MX &lt; 8) &amp;&amp; (MY &gt; 7)) //  bottom row\n    {\n        MX = MX - 1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //1: my,mx-1\n        MY = MY -1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //2: my-1,mx-1\n        MX = MX + 1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //3: my-1,mx\n        MX = MX + 1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //4: my-1,mx+1\n        MY = MY + 1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //5: my,mx+1\n    }\nif ((MX &gt;= 1 &amp;&amp; MX &lt; 8) &amp;&amp; (MY &lt; 1)) // top row\n    {\n        MX = MX - 1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //1: my,mx-1\n        MX = MX + 2;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //5: my,mx+1\n        MY = MY + 1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //7: my+1,mx+1\n        MX = MX - 1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //6: my+1,mx\n        MX = MX - 1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //8: my+1,mx-1\n    }\nif ((MX &gt; 7) &amp;&amp; (MY &gt;= 1 &amp;&amp;MY &lt; 8)) // right column\n    {\n        MX = MX - 1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //1: my,mx-1\n        MY = MY -1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //2: my-1,mx-1\n        MX = MX + 1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //3: my-1,mx\n        MY = MY + 2;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //6: my+1,mx\n        MX = MX - 1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //8: my+1,mx-1\n    }\nif ((MX &gt; 7) &amp;&amp; (MY &gt;= 1 &amp;&amp;MY &lt; 8)) // left column\n    {\n        MY = MY - 1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //3: my-1,mx\n        MX = MX + 1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //4: my-1,mx+1\n        MY = MY + 1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //5: my,mx+1\n        MY = MY + 1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //7: my+1,mx+1\n        MX = MX - 1;\n        GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //6: my+1,mx\n    }\nif ((MX &gt;= 1 &amp;&amp; MX &lt; 8)&amp;&amp;(MY &gt;= 1 &amp;&amp; MY &lt; 8)) // middle of the board\n{\n    MX = MX - 1;\n    GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //1: my,mx-1\n    MY = MY -1;\n    GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //2: my-1,mx-1\n    MX = MX + 1;\n    GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //3: my-1,mx\n    MX = MX + 1;\n    GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //4: my-1,mx+1\n    MY = MY + 1;\n    GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //5: my,mx+1\n    MY = MY + 1;\n    GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //7: my+1,mx+1\n    MX = MX - 1;\n    GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //6: my+1,mx\n    MX = MX - 1;\n    GameBoard [MY] [MX] = GameBoard [MY] [MX] + 1; //8: my+1,mx-1\n}\n}\n    int width = 9;\n    int height = 9;\nfor (int i = 0; i &lt; height; ++i)\n{\n    for (int j = 0; j &lt; width; ++j)\n    {\n        cout &lt;&lt;GameBoard[i][j] &lt;&lt; \"  \";\n    }\n    cout &lt;&lt; endl;\n    }\n    }\n</code></pre>\n"}, {"tags": ["c++", "locking", "mutex"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 4, "creation_date": 1516204180, "post_id": 48304936, "comment_id": 83594944, "body": "It&#39;s for the same reason that std::condition_variable::wait is allowed to spuriously awake, even if the condition hasn&#39;t been set - it allows the OS to optimise some common cases more"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1516204470, "post_id": 48304936, "comment_id": 83595157, "body": "@YSC I don&#39;t really have time to write a full blown answer :(  but the condition_variable one is a question I know is around on SO somewhere..."}], "answers": [{"comments": [{"owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 0, "creation_date": 1516204469, "post_id": 48305054, "comment_id": 83595156, "body": "This means that part of my code &quot;randomly&quot; will/won&#39;t be executed, even if no other threads is using the lock :O"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "reply_to_user": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 6, "creation_date": 1516204535, "post_id": 48305054, "comment_id": 83595208, "body": "No, it means that your code is <i>statically incorrect and poorly-written</i> if it isn&#39;t designed to cope with this entirely normal situation."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 1, "creation_date": 1516204537, "post_id": 48305054, "comment_id": 83595210, "body": "@markzzz this is why you test the result of try, rather than assume you have it."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1516204665, "post_id": 48305054, "comment_id": 83595289, "body": "Yeah, if you just want to block until you get the lock, do it in a loop. Obviously you could just call the regular non-try variant in that case - maybe it would be better if <code>try_lock</code> distinguished between the different failure cases ..."}, {"owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 0, "creation_date": 1516204782, "post_id": 48305054, "comment_id": 83595369, "body": "I need a solution that DO somethings if nobody has a lock. Else GO AHEAD (i.e. not locking the thread, simply ignoring the if statement) otherwise. <code>try-lock</code> seems not the right way. What do you suggest?"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1516204984, "post_id": 48305054, "comment_id": 83595514, "body": "depends who else is contending for the lock, and what it protects, but it sounds like it deserves it&#39;s own question"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 2, "creation_date": 1518395744, "post_id": 48305054, "comment_id": 84475658, "body": "@markzzz: Might be worth stepping back and revisiting the root problem that you&#39;re trying to solve, because this seems like a weak strategy to solve it. Focus less on the one approach you think is the right one, and more on what some other approaches may be. Making program behaviour depend on timings and thread interactions like this just sounds like a giant abstraction leak to me. What are the threads supposed to do?"}], "tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": false, "score": 7, "last_activity_date": 1516204376, "creation_date": 1516204376, "answer_id": 48305054, "question_id": 48304936, "link": "https://stackoverflow.com/questions/48304936/stdmutextry-lock-spuriously-fail/48305054#48305054", "title": "std::mutex::try_lock spuriously fail?", "body": "<blockquote>\n  <p>This means that if no one thread has a lock of that mutex, when I try a try_lock, it could return false? </p>\n</blockquote>\n\n<p>Yes, that's exactly what it says.</p>\n\n<blockquote>\n  <p>Isn't the function of try_lock return false if its locked OR true if nobody lock it?</p>\n</blockquote>\n\n<p>No, the function of <code>try_lock</code> is to <em>try</em> to lock the mutex.</p>\n\n<p>However, there is more than one way it can fail:</p>\n\n<ol>\n<li>the mutex is already locked elsewhere (this is the one you're thinking of)</li>\n<li>some platform-specific feature interrupts or prevents the locking attempt, and control is returned to the caller who can decide whether to retry.</li>\n</ol>\n\n<p>The common case on POSIX-ish platforms, and inherited from POSIX threads, is that a signal is delivered to (and handled by a signal handler in) the current thread, interrupting the lock attempt.</p>\n\n<p>There may be other platform-specific reasons on other platforms, but the behaviour is the same.</p>\n"}, {"comments": [{"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 0, "creation_date": 1516206715, "post_id": 48305738, "comment_id": 83596625, "body": "I don&#39;t see any of your code, but you asked: <i>&quot;I need a solution that DO somethings if nobody has a lock. Else GO AHEAD (i.e. not locking the thread, simply ignoring the if statement) otherwise. try-lock seems not the right way. What do you suggest?&quot;</i>. This is what I suggest. Moreover, it uses <code>std::unique_lock</code> which is better than using mutex directly, since it support guaranteed unlocking via RAII technique. But the main message is that basically I would&#39;t care at all about spurious fail in this case."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 0, "creation_date": 1516207453, "post_id": 48305738, "comment_id": 83597070, "body": "@markzzz I updated my answer to handle spurious fails."}], "tags": [], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "is_accepted": false, "score": 1, "last_activity_date": 1516291380, "last_edit_date": 1516291380, "creation_date": 1516206473, "answer_id": 48305738, "question_id": 48304936, "link": "https://stackoverflow.com/questions/48304936/stdmutextry-lock-spuriously-fail/48305738#48305738", "title": "std::mutex::try_lock spuriously fail?", "body": "<p>Based on your comments, I would write (quoting your words):</p>\n\n<pre><code>std::unique_lock&lt;std::mutex&gt; lock(m, std::defer_lock); // m being a mutex\n...\nif (lock.try_lock()) {\n  ... // \"DO something if nobody has a lock\"\n} else {\n  ... // \"GO AHEAD\"\n}\n</code></pre>\n\n<p>Note that <code>lock.try_lock()</code> effectively calls <code>m.try_lock()</code>, therefore it is prone to spurious fail as well. But I wouldn't care much about this issue. IMO, in practice, spurious fails/wakeups are quite rare (as Useless pointed out, on Linux, they can happen when a signal is delivered).</p>\n\n<p>More about spurious issues, see e.g.: <a href=\"https://en.wikipedia.org/wiki/Spurious_wakeup\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Spurious_wakeup</a> or <a href=\"https://stackoverflow.com/questions/8594591/why-does-pthread-cond-wait-have-spurious-wakeups\">Why does pthread_cond_wait have spurious wakeups?</a>.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>If you really want to eliminate spurious fail of <code>try_lock</code>, you can use some atomic flag such as:</p>\n\n<pre><code>// shared by threads:\nstd::mutex m;  \nstd::atomic&lt;bool&gt; flag{false};\n\n// within threads:\nstd::unique_lock&lt;std::mutex&gt; lock(m, std::defer_lock); // m being a mutex\n...\nwhile (true) {\n  lock.try_lock();\n  if (lock.owns_lock()) {\n    flag = true;\n    ... // \"DO something if nobody has a lock\"    \n    flag = false;\n    break;\n  } else if (flag == true) {\n    ... // \"GO AHEAD\"\n    break;\n  }\n}\n</code></pre>\n\n<p>It may be possibly rewritten to better form, I didn't check. Also, note that <code>flag</code> is not automatically unset via RAII, some scope guard may be useful here.</p>\n\n<p><strong>UPDATE 2</strong></p>\n\n<p>If you do not need also the blocking functionality of <code>mutex</code>, use <code>std::atomic_flag</code>:</p>\n\n<pre><code>std::atomic_flag lock = ATOMIC_FLAG_INIT;\n\n// within threads:\nif (lock.test_and_set()) {\n    ... // \"DO something if nobody has a lock\"    \n    lock.clear();\n} else {\n    ... // \"GO AHEAD\"\n}\n</code></pre>\n\n<p>Just, again, clearing the flag would be better via some RAII mechanism.</p>\n"}, {"comments": [{"owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 0, "creation_date": 1516207522, "post_id": 48306024, "comment_id": 83597112, "body": "But why <code>the attempt to lock shouldn&#39;t succeed</code> if no one is locking it? Sounds like a fail on locking :D"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 1, "creation_date": 1516207736, "post_id": 48306024, "comment_id": 83597256, "body": "There are serious reasons why it is designed this way."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 0, "creation_date": 1516291471, "post_id": 48306024, "comment_id": 83636395, "body": "@markzzz There are links in my answer, which explain them. However, I came up also with another and much simpler solution, which works in case that you do not need blocking functionality of <code>mutex</code> (which seems to be your case). See 2nd update of my answer."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518395914, "post_id": 48306024, "comment_id": 84475704, "body": "It <i>does</i> seem like a big abstraction leak to me, but this is how it is"}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1516207308, "creation_date": 1516207308, "answer_id": 48306024, "question_id": 48304936, "link": "https://stackoverflow.com/questions/48304936/stdmutextry-lock-spuriously-fail/48306024#48306024", "title": "std::mutex::try_lock spuriously fail?", "body": "<p>If the call to <code>try_lock()</code> returns true the call succeeded in locking the lock. If it returns false if it did not. That's all. Yes, the function can return false when nobody else has the lock. False means <strong>only</strong> that the attempt to lock did not succeed; it does not tell you why it failed.</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518395827, "post_id": 48733152, "comment_id": 84475678, "body": "<i>&quot;such operation is non-blocking, so signals cannot really interrupt it&quot;</i> Ehm unless the operation is totally atomic then of course they can. Every operation is &quot;blocking&quot;, it&#39;s just a measure of degree"}, {"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518396097, "post_id": 48733152, "comment_id": 84475746, "body": "@LightnessRacesinOrbit If everything is blocking, then nothing is blocking. Any reasonable <code>try_lock</code> implementation in the kernel will only need to wait for few spinlocks. Those waits are not signal-interrupted. Even posix does not list <code>EINTR</code> for lock/timedlock functions."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518396162, "post_id": 48733152, "comment_id": 84475758, "body": "I related only to your claim in the quoted passage, not to <code>try_lock</code> on POSIX systems specifically"}, {"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518396512, "post_id": 48733152, "comment_id": 84475837, "body": "@LightnessRacesinOrbit Ofc you can implement <code>try_lock</code> through some message passing mechanism built on top of a socket, which is very much interruptible (and this is what Wine <i>actually</i> does), but I would consider such implementation &quot;unreasonable&quot;. There is no reason to overcomplicate programming interface. Interface should be as minimal as possible, &quot;unreasonable&quot; implementation should hide any unnecessary details."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518398291, "post_id": 48733152, "comment_id": 84476261, "body": "Unfortunately, what &quot;should be&quot; and what &quot;must be&quot; are not always in alignment."}, {"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518398608, "post_id": 48733152, "comment_id": 84476332, "body": "@LightnessRacesinOrbit Now this is just a verbal masturbation."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518427699, "post_id": 48733152, "comment_id": 84485931, "body": "No, not at all. They are completely different concepts."}], "tags": [], "owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "is_accepted": false, "score": 1, "last_activity_date": 1518437383, "last_edit_date": 1518437383, "creation_date": 1518363183, "answer_id": 48733152, "question_id": 48304936, "link": "https://stackoverflow.com/questions/48304936/stdmutextry-lock-spuriously-fail/48733152#48733152", "title": "std::mutex::try_lock spuriously fail?", "body": "<p>Unlike was said there, I don't think there is any reason for a <code>try_lock</code> function to failed due to OS-related reasons: such operation is non-blocking, so signals cannot really interrupt it. Most likely it has everything to do with how this function is implemented on CPU-level. After all, uncontested case is usually the most interesting one for a mutex.</p>\n\n<p>Mutex locking usually requires some form of atomic compare exchange \noperation. C++11 and C11 introduce <code>atomic_compare_exchange_strong</code> and <code>atomic_compare_exchange_weak</code>. The latter is allowed to fail spuriously.</p>\n\n<p>By allowing <code>try_lock</code> to fail spuriously, implementations are allowed to use <code>atomic_compare_exchange_weak</code> to maximize performance and minimize code size.</p>\n\n<p>For example on ARM64 atomic operations are usually implemented using exclusive-load (<code>LDXR</code>) and exclusive-store (<code>STRX</code>) instructions. <code>LDXR</code> fires up \"monitor\" hardware which starts tracking all accesses to a memory region. <code>STRX</code> only performs the store if no accesses to that region were made between <code>LDXR</code> and <code>STRX</code> instructions. Thus the whole sequence can fail spuriously if another thread accesses that memory region or if there was an IRQ in between the two.</p>\n\n<p>In practice, code generate for <code>try_lock</code> implemented using weak guarantee is not very different from the one implemented using strong guarantee.</p>\n\n<pre><code>bool mutex_trylock_weak(atomic_int *mtx)\n{\n    int old = 0;\n    return atomic_compare_exchange_weak(mtx, &amp;old, 1);\n}\n\nbool mutex_trylock_strong(atomic_int *mtx)\n{\n    int old = 0;\n    return atomic_compare_exchange_strong(mtx, &amp;old, 1);\n}\n</code></pre>\n\n<p>Take a look at generated assembly for ARM64:</p>\n\n<pre><code>mutex_trylock_weak:\n  sub sp, sp, #16\n  mov w1, 0\n  str wzr, [sp, 12]\n  ldaxr w3, [x0]      ; exclusive load (acquire)\n  cmp w3, w1\n  bne .L3\n  mov w2, 1\n  stlxr w4, w2, [x0]  ; exclusive store (release)\n  cmp w4, 0           ; the only difference is here\n.L3:\n  cset w0, eq\n  add sp, sp, 16\n  ret\n\nmutex_trylock_strong:\n  sub sp, sp, #16\n  mov w1, 0\n  mov w2, 1\n  str wzr, [sp, 12]\n.L8:\n  ldaxr w3, [x0]      ; exclusive load (acquire)\n  cmp w3, w1\n  bne .L9\n  stlxr w4, w2, [x0]  ; exclusive store (release)\n  cbnz w4, .L8        ; the only difference is here\n.L9:\n  cset w0, eq\n  add sp, sp, 16\n  ret\n</code></pre>\n\n<p>The only difference is that \"weak\" version eliminates conditional backward branch <code>cbnz w4, .L8</code> and replaces it with <code>cmp w4, 0</code>. Backward condition branches are predicted by CPU as \"will-be-taken\" in the absense of branch prediction information as they are assumed to be part of a loop - such assumption is wrong in this case as most of the time lock will be acquired (low contention is assumed to be the most common case).</p>\n\n<p>Imo this is the only performance difference between those functions. \"Strong\" version can basically suffer from 100% branch misprediction ratio on single instruction under some workloads.</p>\n\n<p>By the way, ARMv8.1 introduces atomic instructions, so there is no difference between the two, just like on x86_64. Code generated with <code>-march=armv8.1-a</code> flag:</p>\n\n<pre><code>  sub sp, sp, #16\n  mov w1, 0\n  mov w2, 1\n  mov w3, w1\n  str wzr, [sp, 12]\n  casal w3, w2, [x0]\n  cmp w3, w1\n  cset w0, eq\n  add sp, sp, 16\n  ret\n</code></pre>\n\n<p>Some <code>try_lock</code> functions can fail even when <code>atomic_compare_exchange_strong</code> is used, for example <code>try_lock_shared</code> of <code>shared_mutex</code> might need to increment reader counter and might fail if another reader has entered the lock. \"Strong\" variant of such function would need to generate a loop and thus can suffer from a similar branch mispredication.</p>\n\n<p>Another minor detail: if mutex is written in C, some compilers (like Clang) might align loop at 16-byte boundary to improve its performance, bloating function body with padding. This is unnecessary if loop almost always runs a single time.</p>\n\n<hr>\n\n<p>Another reason for spurious failure is a failure to acquire internal mutex lock (if mutex is implemented using a spinlock and some kernel primitive). In theory the same principle could be acquired in the kernel implementation of <code>try_lock</code>, although this does not seems reasonable.</p>\n"}, {"tags": [], "owner": {"reputation": 677, "user_id": 1290983, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/183834401387b06b8aff24f88dcd6cbd?s=128&d=identicon&r=PG", "display_name": "chain ro", "link": "https://stackoverflow.com/users/1290983/chain-ro"}, "is_accepted": false, "score": 1, "last_activity_date": 1550107099, "creation_date": 1550107099, "answer_id": 54681868, "question_id": 48304936, "link": "https://stackoverflow.com/questions/48304936/stdmutextry-lock-spuriously-fail/54681868#54681868", "title": "std::mutex::try_lock spuriously fail?", "body": "<p>In paper <a href=\"http://www.hpl.hp.com/techreports/2008/HPL-2008-56.pdf\" rel=\"nofollow noreferrer\">Foundations of the C++ Concurrency Memory Model</a> Section 3, there is already a clear explanation for why the standard allows spurious failures of <code>try_lock</code>. In short, it is specified to make the semantics of <code>try_lock</code> be consistent with the definition of race in C++ memory model.</p>\n"}], "owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2457, "favorite_count": 2, "answer_count": 5, "score": 9, "last_activity_date": 1550107099, "creation_date": 1516204009, "question_id": 48304936, "link": "https://stackoverflow.com/questions/48304936/stdmutextry-lock-spuriously-fail", "title": "std::mutex::try_lock spuriously fail?", "body": "<p>Maybe <a href=\"http://en.cppreference.com/w/cpp/thread/mutex/try_lock\" rel=\"noreferrer\">I'm misunderstanding</a> about <code>std::mutex::try_lock</code>:</p>\n\n<p><em>This function is allowed to fail spuriously and return false even if the mutex is not currently locked by any other thread.</em></p>\n\n<p>This means that if no one thread has a lock on that <code>mutex</code>, when I try a <code>try_lock</code> it <strong>could</strong> return <code>false</code>? For what purpose?</p>\n\n<p>Isn't the function of <code>try_lock</code> return <code>false</code> if its locked <strong>OR</strong> <code>true</code> if nobody lock it? Not really sure if my non-native english is fooling me...</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 1, "creation_date": 1516204059, "post_id": 48304930, "comment_id": 83594870, "body": "You haven&#39;t initialized <code>a1, a2, b1, b2, c1</code>. They hold garbage values at the time you are  incrementing them."}, {"owner": {"reputation": 3, "user_id": 9230415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b58b3d58d4ce7ae3c1450ab0636135e8?s=128&d=identicon&r=PG&f=1", "display_name": "scubnoob", "link": "https://stackoverflow.com/users/9230415/scubnoob"}, "reply_to_user": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 0, "creation_date": 1516204102, "post_id": 48304930, "comment_id": 83594893, "body": "Could you elaborate? I&#39;m pretty new at coding"}, {"owner": {"reputation": 3, "user_id": 9230415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b58b3d58d4ce7ae3c1450ab0636135e8?s=128&d=identicon&r=PG&f=1", "display_name": "scubnoob", "link": "https://stackoverflow.com/users/9230415/scubnoob"}, "reply_to_user": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 0, "creation_date": 1516204146, "post_id": 48304930, "comment_id": 83594924, "body": "Oh, so the statement int a1, a2, b1, b2, c1, c2 = 0; is not enough? Ah I see now. Thanks!"}, {"owner": {"reputation": 292, "user_id": 7132156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/431a2aee038ef8498c512c0b68e6fa89?s=128&d=identicon&r=PG&f=1", "display_name": "xEric_xD", "link": "https://stackoverflow.com/users/7132156/xeric-xd"}, "edited": false, "score": 0, "creation_date": 1516204161, "post_id": 48304930, "comment_id": 83594931, "body": "You only initialise <code>c2 = 0;</code>, all the other variables are uninitialised and will just take whatever value is in memory at the time. Initialising all your variables to <code>0</code> will solve your issue"}, {"owner": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 0, "creation_date": 1516204164, "post_id": 48304930, "comment_id": 83594933, "body": "<code>int a1, a2, b1, b2, c1, c2 = 0;</code> --&gt; <code>int a1=0, a2=0, b1=0, b2=0, c1=0, c2 = 0;</code>"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 2, "creation_date": 1516204379, "post_id": 48304930, "comment_id": 83595087, "body": "I&#39;m voting to close this question because it <i>was caused by a problem that can no longer be reproduced or a simple typographical error. While similar questions may be on-topic here, this one was resolved in a manner unlikely to help future readers.</i>"}], "answers": [{"tags": [], "owner": {"reputation": 150, "user_id": 4440740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mvPzO.jpg?s=128&g=1", "display_name": "Shumatsu", "link": "https://stackoverflow.com/users/4440740/shumatsu"}, "is_accepted": false, "score": 2, "last_activity_date": 1516204282, "creation_date": 1516204282, "answer_id": 48305030, "question_id": 48304930, "link": "https://stackoverflow.com/questions/48304930/small-input-large-output/48305030#48305030", "title": "Small input, large output?", "body": "<p>Problem lies with this line:</p>\n\n<pre><code>int a1, a2, b1, b2, c1, c2 = 0;\n</code></pre>\n\n<p>This only initializes c2 with a zero. The rest hold garbage values.\nYou need to do <code>= 0</code> for each variable.</p>\n"}], "owner": {"reputation": 3, "user_id": 9230415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b58b3d58d4ce7ae3c1450ab0636135e8?s=128&d=identicon&r=PG&f=1", "display_name": "scubnoob", "link": "https://stackoverflow.com/users/9230415/scubnoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516204282, "creation_date": 1516203996, "question_id": 48304930, "link": "https://stackoverflow.com/questions/48304930/small-input-large-output", "title": "Small input, large output?", "body": "<p>I have a question about this short code I wrote:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std;\n\nint main() {\n    ofstream fout(\"hps.out\");\n    ifstream fin(\"hps.in\");\n    int N;\n    fin &gt;&gt; N;\n    int a1, a2, b1, b2, c1, c2 = 0;\n    for (int i = 0; i &lt; N; i++) {\n        int x, y;\n        fin &gt;&gt; x;\n        fin &gt;&gt; y;\n\n        if (x == 1 &amp;&amp; y == 2) {\n            a1++;\n        }\n        if (x == 1 &amp;&amp; y == 3) {\n            a2++;\n        }\n        if (x == 2 &amp;&amp; y == 1) {\n            b1++;\n        }\n        if (x == 2 &amp;&amp; y == 3) {\n            b2++;\n        }\n        if (x == 3 &amp;&amp; y == 1) {\n            c1++;\n        }\n        if (x == 3 &amp;&amp; y == 2) {\n            c2++;\n        }\n    } \n    fout &lt;&lt; a1 &lt;&lt; \" \" &lt;&lt; a2 &lt;&lt; \" \" &lt;&lt; b1 &lt;&lt; \" \" &lt;&lt; b2 &lt;&lt; \" \" &lt;&lt; c1 &lt;&lt; \" \" &lt;&lt; \nc2 &lt;&lt; \" \" &lt;&lt; '\\n';\n    return 0;\n}\n</code></pre>\n\n<p>So here's the input:</p>\n\n<pre><code>5\n1 2\n2 2\n1 3\n1 1\n3 2\n</code></pre>\n\n<p>and here is the output:</p>\n\n<p>32768 4197767 0 616536480 0 1 </p>\n\n<p>what I want to do is count the number of pairs of (1,2), (1,3), (2,1), (2,3), (3,1) and (3,3), and store these values in the variables a1, a2, b1, b2, c1, c2. However for some reason I am getting these gigantic numbers and I don't understand why. Is something overflowing?</p>\n\n<p>The statement for this problem is actually USACO Bronze Janurary #2:</p>\n\n<p><a href=\"http://www.usaco.org/index.php?page=viewproblem2&amp;cpid=688\" rel=\"nofollow noreferrer\">http://www.usaco.org/index.php?page=viewproblem2&amp;cpid=688</a></p>\n\n<p>I would appreciate any help! </p>\n"}, {"tags": ["c++", "concurrency", "atomic", "barrier"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1516203651, "post_id": 48304781, "comment_id": 83594587, "body": "fyi: Lots for caveats here regarding older systems and <code>QueryPerformanceCounter</code> <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dn553408(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>  Could this possibly be an attempt at a fix/workaround."}], "answers": [{"tags": [], "owner": {"reputation": 4681, "user_id": 6651824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LWsU0.jpg?s=128&g=1", "display_name": "LWimsey", "link": "https://stackoverflow.com/users/6651824/lwimsey"}, "is_accepted": true, "score": 2, "last_activity_date": 1522815612, "creation_date": 1522815612, "answer_id": 49642707, "question_id": 48304781, "link": "https://stackoverflow.com/questions/48304781/why-a-atomic-signal-fence-is-used-here-when-getting-system-time/49642707#49642707", "title": "Why a `atomic_signal_fence` is used here when getting system time", "body": "<p>The code developer may have believed that it would produce more accurate results if the compiler could not reorder statements..\nFor example:</p>\n\n<pre><code>expensive1(); // takes a lot of time\n\nSystemTime t = getSystemTime();\n\nexpensive2();\n</code></pre>\n\n<p>If you want the exact timestamp (or performance count) in between both expensive calls, you don't want the compiler to reorder <code>getSystemTime()</code> with one of them\nbecause it might have impact on the value returned by <code>QueryPerformanceCounter</code>.</p>\n\n<p>Whether that is realistic, I don't know. The compiler has to know what is happening inside the function or it won't reorder anything\n(if the <code>expensive</code> calls are defined in a pre-compiled library, no reordering of statements will take place anyway).</p>\n\n<p>But at least this approach does not seem to do much harm.\n<code>std::atomic_signal_fence(std::memory_order_seq_cst)</code> prevents the compiler from reordering, but it does not produce CPU fence instructions.</p>\n"}], "owner": {"reputation": 849, "user_id": 3316009, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q0EyA.jpg?s=128&g=1", "display_name": "calvin", "link": "https://stackoverflow.com/users/3316009/calvin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "accepted_answer_id": 49642707, "answer_count": 1, "score": 2, "last_activity_date": 1522815612, "creation_date": 1516203483, "question_id": 48304781, "link": "https://stackoverflow.com/questions/48304781/why-a-atomic-signal-fence-is-used-here-when-getting-system-time", "title": "Why a `atomic_signal_fence` is used here when getting system time", "body": "<p>I found this function in a <a href=\"https://github.com/cameron314/concurrentqueue\" rel=\"nofollow noreferrer\">github repo</a> which implements a lockfree queue. This function uses the <code>QueryPerformanceCounter</code> to get accurate system time.</p>\n\n<pre><code>#define CompilerMemBar() std::atomic_signal_fence(std::memory_order_seq_cst)\nSystemTime getSystemTime()\n{\n    LARGE_INTEGER t;\n    CompilerMemBar();\n    if (!QueryPerformanceCounter(&amp;t)) {\n        return static_cast&lt;SystemTime&gt;(-1);\n    }\n    CompilerMemBar();\n\n    return static_cast&lt;SystemTime&gt;(t.QuadPart);\n}\n</code></pre>\n\n<p>I noticed there are two <code>CompilerMemBar()</code>, which I thought is intented to prevent compiler from re-ordering. However, after I searched some codes on github, I found wrapping <code>QueryPerformanceCounter</code> with compiler barriers may not be a common practice. So my question is these barriers here to handle some special situations? May be a possible reorder will affect the precision of system time we get? But I can't figure out how they will do, because I think even either the WINAPI call or the return statement is reordered, it seems to have no influence on the precision.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1516204234, "post_id": 48304730, "comment_id": 83594980, "body": "Please put some effort in formatting your code and don&#39;t post pictures of text but post text. And please write english code, any other language is confusing to us. And please show us what output you expect. You can <a href=\"https://stackoverflow.com/posts/48304730/edit\">edit</a> your question."}], "answers": [{"tags": [], "owner": {"reputation": 691, "user_id": 2565020, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/be14ec620b7fc79dcb6bebddf88fe69f?s=128&d=identicon&r=PG", "display_name": "Nighteen", "link": "https://stackoverflow.com/users/2565020/nighteen"}, "is_accepted": true, "score": 0, "last_activity_date": 1516210314, "last_edit_date": 1516210314, "creation_date": 1516209935, "answer_id": 48306739, "question_id": 48304730, "link": "https://stackoverflow.com/questions/48304730/input-data-to-a-txt-file-several-times-using-a-for-loop/48306739#48306739", "title": "Input data to a txt file several times using a for loop", "body": "<ul>\n<li><blockquote>\n  <p>It does not repeat the process the number of times I ask it to</p>\n</blockquote></li>\n</ul>\n\n<p>The chunk of code that outputs the data to \"base_de_datos_cli.txt\" should be inside the loop, since every time you get a new input, the last input is lost.</p>\n\n<ul>\n<li><blockquote>\n  <p>The input fields are mixed up</p>\n</blockquote></li>\n</ul>\n\n<p>Read <a href=\"https://stackoverflow.com/questions/12691316/getline-does-not-work-if-used-after-some-inputs\">this</a>. You can't use <code>std::getline</code> after another input without calling <code>cin.ignore()</code> to clear the extra newline character left in the input stream.</p>\n\n<p>Here is a new version of your program that works and is better organizated. I tried to keep the code in Spanish as much as possible. Please do not make a straight copy, but try to understand why your code wasn't working:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;direct.h&gt; \n#include &lt;fstream&gt; \n#include &lt;string&gt;\n\nusing namespace std;\n\nint main(void)\n{\n    _mkdir(\"C:\\\\FP\");\n    std::ofstream outfile;\n    outfile.open(\"C:\\\\FP\\\\base_de_datos_cli.txt\", std::ofstream::out | std::ofstream::app);\n\n    string Nombre_usuario;\n    int edad;\n    int cerdula;\n    int num;\n\n    std::cout &lt;&lt; \"\u00bfCu\u00e1ntos clientes desea ingresar ahora?:\";\n    std::cin &gt;&gt; num;\n\n    for (int x = 0; x &lt; num; x++) {\n        std::cout &lt;&lt; \"Ingrese su nombre y apellido:\";\n        std::cin.ignore();\n        std::getline(std::cin, Nombre_usuario);\n        std::cout &lt;&lt; \"Ingrese su edad:\";\n        std::cin &gt;&gt; edad;\n        std::cout &lt;&lt; \"Ingrese su C.I.:\";\n        std::cin &gt;&gt; cerdula;\n\n        outfile &lt;&lt; \"Nombre de usuario:\" &lt;&lt; Nombre_usuario &lt;&lt; std::endl;\n        outfile &lt;&lt; \"Edad:\" &lt;&lt; edad &lt;&lt; std::endl;\n        outfile &lt;&lt; \"C.I.:\" &lt;&lt; cerdula &lt;&lt; std::endl;\n    }\n\n    outfile.close();\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 9230295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eeDKO.jpg?s=128&g=1", "display_name": "Techie Philosopher", "link": "https://stackoverflow.com/users/9230295/techie-philosopher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "closed_date": 1516816119, "accepted_answer_id": 48306739, "answer_count": 1, "score": -1, "last_activity_date": 1516227035, "creation_date": 1516203319, "last_edit_date": 1516227035, "question_id": 48304730, "link": "https://stackoverflow.com/questions/48304730/input-data-to-a-txt-file-several-times-using-a-for-loop", "closed_reason": "Not suitable for this site", "title": "Input data to a txt file several times using a for loop", "body": "<p>I am beginning to code with C++. This is what I want my program to do:\n1. The user inputs the number of persons he wants to write into the database (a simple txt file).\n2. The user inputs the name of the fist person (Nombre_usuario), the age(edad) and the ID (C.I:).\n3. The user repeats the same process until he reach the number he input on step 1. </p>\n\n<p>This is my code:</p>\n\n<pre><code>#include&lt;iostream&gt;\n    #include&lt;windows.h&gt;\n    #include &lt;direct.h&gt; \n    #include &lt;fstream&gt; \n    using namespace std;\n\n\n\n    int main(){\n        string Nombre_usuario; \n        int edad; \n        int cerdula;\n        int num;\n    //----------LOOP----------\n        std::cout&lt;&lt;\"\u00bfCu\u00e1ntos clientes desea ingresar ahora?:\";\n        std::cin&gt;&gt;num;\n        for(int x=0; x&lt;num;x++){\n    //-------------User Interface------------\n           std::cout&lt;&lt;\"Ingrese su nombre y apellido:\";\n           std::getline(cin, Nombre_usuario);\n           std::cout&lt;&lt;\"Ingrese su edad:\";\n           std::cin&gt;&gt;edad;\n           std::cout&lt;&lt;\"Ingrese su C.I.:\";\n           std::cin&gt;&gt;cerdula;\n           }\n    //----------------Data storage on txt------------------------------- \n\n\n    _mkdir(\"C:\\\\FP\");\n        std::ofstream outfile; \n        outfile.open(\"base_de_datos_cli.txt\", std::ofstream::out, std::ofstream::app); \n        outfile&lt;&lt;\"Nombre de usuario:\"&lt;&lt;Nombre_usuario&lt;&lt;std::endl;\n        outfile&lt;&lt;\"Edad:\"&lt;&lt;edad&lt;&lt;std::endl; \n        outfile&lt;&lt;\"C.I.:\"&lt;&lt;cerdula&lt;&lt;std::endl; \n        outfile.close(); \n\n    return 0;   \n} \n</code></pre>\n\n<p>The result, however, looks like this:</p>\n\n<p>So, the input fields are mixed up, it does not repeat the process the number of times I ask it to, etc...</p>\n\n<p>Why is this happening?</p>\n\n<p>Thank you very much.</p>\n"}, {"tags": ["c++", "c++11", "templates", "inheritance", "variadic-templates"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1516202914, "post_id": 48304547, "comment_id": 83594057, "body": "Your example <a href=\"http://rextester.com/JCNVW5937\" rel=\"nofollow noreferrer\">compiles for me as written</a>, with or without deriving <code>Param&lt;&gt;</code> from <code>Base</code>. What specifically seems to be the problem?"}, {"owner": {"reputation": 1177, "user_id": 3064551, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3CW8n.jpg?s=128&g=1", "display_name": "rajenpandit", "link": "https://stackoverflow.com/users/3064551/rajenpandit"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1516202993, "post_id": 48304547, "comment_id": 83594113, "body": "I am not inheriting Base class in this example, which i need to do. I need to override setData() method and get access to Base class member variables inside class Param&lt;TFrist, TRest...&gt;"}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1516202998, "post_id": 48304547, "comment_id": 83594118, "body": "@IgorTandetnik I think he&#39;s saying that <code>Param&lt;int,int&gt;</code> fails to compile. It would be better to explicitly add it to the question though, if that&#39;s the case"}, {"owner": {"reputation": 1177, "user_id": 3064551, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3CW8n.jpg?s=128&g=1", "display_name": "rajenpandit", "link": "https://stackoverflow.com/users/3064551/rajenpandit"}, "reply_to_user": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "edited": false, "score": 0, "creation_date": 1516203220, "post_id": 48304547, "comment_id": 83594287, "body": "@SirGuy I am looking for an approach to inherit class Base to class Param."}, {"owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "reply_to_user": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "edited": false, "score": 0, "creation_date": 1516203497, "post_id": 48304547, "comment_id": 83594486, "body": "@SirGuy Param&lt;int, int&gt; compiles for me. (Inheriting in Param&lt;&gt; from Base)"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 2, "creation_date": 1516203633, "post_id": 48304547, "comment_id": 83594571, "body": "The example at the link has <code>Param&lt;&gt;</code> derived from <code>Base</code>, and instantiates <code>Param&lt;double,char,int&gt;</code> as per the question. It compiles successfully. I still fail to grasp the nature of the difficulty. Show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> together with the full and compete text of any error messages."}, {"owner": {"reputation": 1177, "user_id": 3064551, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3CW8n.jpg?s=128&g=1", "display_name": "rajenpandit", "link": "https://stackoverflow.com/users/3064551/rajenpandit"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1516203984, "post_id": 48304547, "comment_id": 83594835, "body": "@IgorTandetnik, I have edited the code. Please try with this once."}, {"owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 2, "creation_date": 1516204528, "post_id": 48304547, "comment_id": 83595198, "body": "To access a member of dependent base class (base class that depends on template parameters), use explicit qualification: <code>this-&gt;data = &quot;test data&quot;;</code> or <code>Param::data = &quot;test data&quot;;</code> or <code>Base::data = &quot;test data&quot;;</code>."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1516204529, "post_id": 48304547, "comment_id": 83595202, "body": "<code>data = &quot;test data&quot;;</code> should be <code>this-&gt;data = &quot;test data&quot;;</code>"}, {"owner": {"reputation": 1177, "user_id": 3064551, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3CW8n.jpg?s=128&g=1", "display_name": "rajenpandit", "link": "https://stackoverflow.com/users/3064551/rajenpandit"}, "edited": false, "score": 0, "creation_date": 1516205553, "post_id": 48304547, "comment_id": 83595905, "body": "this-&gt;data is working, thanks a lot for your suggestions."}], "owner": {"reputation": 1177, "user_id": 3064551, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3CW8n.jpg?s=128&g=1", "display_name": "rajenpandit", "link": "https://stackoverflow.com/users/3064551/rajenpandit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "closed_date": 1516223989, "answer_count": 0, "score": 2, "last_activity_date": 1516203931, "creation_date": 1516202767, "last_edit_date": 1516203931, "question_id": 48304547, "link": "https://stackoverflow.com/questions/48304547/inheriting-base-class-with-recursive-template-class", "closed_reason": "Duplicate", "title": "Inheriting base class with recursive template class", "body": "<p>How to inherit Base class in recursive template class?\nMy requirement is something like this</p>\n\n<pre><code>Base &lt;--- Param&lt;&gt; &lt;--- Param&lt;int&gt; &lt;---  Param&lt;char,int&gt; &lt;---- Param&lt;double,char,int&gt;\n</code></pre>\n\n<p>I tried inheriting Base class in <code>class Param&lt;&gt; : public Base\n</code> In this case it is working for single template parameter, for multiple parameter throwing error. It is unable to inherit base members.</p>\n\n<p>If it inherit in <code>class Param &lt;TFirst,TRest...&gt;: public Param&lt;TRest...&gt;, public Base</code>, then throwing ambiguity error. I think this can be avoided by using virtual keyword. But i am looking for some another approach.</p>\n\n<p>Please help me with this issue, </p>\n\n<pre><code>class Base{\npublic:\n    virtual void setData()=0;\nprotected:\n    std::string data;\n};\n\ntemplate&lt;class ...Args&gt;  // template class signature\nclass Param;\n\ntemplate&lt;&gt; //recursive template's  base class\nclass Param&lt;&gt; : public Base{\npublic:\n    void setData(){\n    }\n};\n\ntemplate&lt;class TFirst, class... TRest&gt;\nclass Param &lt;TFirst,TRest...&gt;: public Param&lt;TRest...&gt;\n{\npublic:\n    void setData(){ // base class virtual function overriding\n        data = \"test data\"; //access base class data throwing error.\n        //do some other stuff\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "rvalue-reference"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1516202739, "post_id": 48304486, "comment_id": 83593928, "body": "What would you expect instead? Both <code>int</code> and <code>int&amp;&amp;</code> would make <code>t</code> an rvalue reference, which could not be bound to <code>i</code> which is an lvalue."}, {"owner": {"reputation": 20746, "user_id": 1233251, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/cI9GF.png?s=128&g=1", "display_name": "E_net4 says don&#39;t copy that", "link": "https://stackoverflow.com/users/1233251/e-net4-says-dont-copy-that"}, "edited": false, "score": 3, "creation_date": 1516202783, "post_id": 48304486, "comment_id": 83593971, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/42145453/type-not-deduced-to-be-r-value-reference-why-not\">Type not deduced to be r-value reference: why not?</a>"}, {"owner": {"reputation": 1456, "user_id": 5432806, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/6COHz.jpg?s=128&g=1", "display_name": "expoter", "link": "https://stackoverflow.com/users/5432806/expoter"}, "reply_to_user": {"reputation": 20746, "user_id": 1233251, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/cI9GF.png?s=128&g=1", "display_name": "E_net4 says don&#39;t copy that", "link": "https://stackoverflow.com/users/1233251/e-net4-says-dont-copy-that"}, "edited": false, "score": 0, "creation_date": 1516203613, "post_id": 48304486, "comment_id": 83594560, "body": "No, it&#39;s not. See UPDATE please. @E_net4"}, {"owner": {"reputation": 13479, "user_id": 1830736, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/gwUf7.jpg?s=128&g=1", "display_name": "George Hilliard", "link": "https://stackoverflow.com/users/1830736/george-hilliard"}, "edited": false, "score": 2, "creation_date": 1516204073, "post_id": 48304486, "comment_id": 83594878, "body": "The difference is that they are different function signatures.  <code>fun1(T)</code> is always passed by value, and <code>fun2(T&amp;&amp;)</code> is deduced according to the rules explained in the linked duplicate.  They aren&#39;t related otherwise."}, {"owner": {"reputation": 1456, "user_id": 5432806, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/6COHz.jpg?s=128&g=1", "display_name": "expoter", "link": "https://stackoverflow.com/users/5432806/expoter"}, "reply_to_user": {"reputation": 13479, "user_id": 1830736, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/gwUf7.jpg?s=128&g=1", "display_name": "George Hilliard", "link": "https://stackoverflow.com/users/1830736/george-hilliard"}, "edited": false, "score": 0, "creation_date": 1516204585, "post_id": 48304486, "comment_id": 83595239, "body": "I know fun2(i) is passed by lvalue reference, but why fun1(i) is passed by value rather than lvalue reference? @thirtythreeforty"}], "answers": [{"tags": [], "owner": {"reputation": 396, "user_id": 3203817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f81efff47d429c32515d29ee4f11a02?s=128&d=identicon&r=PG", "display_name": "Immac", "link": "https://stackoverflow.com/users/3203817/immac"}, "is_accepted": false, "score": 0, "last_activity_date": 1516204627, "creation_date": 1516204627, "answer_id": 48305151, "question_id": 48304486, "link": "https://stackoverflow.com/questions/48304486/why-deduced-types-of-funt-t-and-funt-t-are-different-in-c/48305151#48305151", "title": "Why deduced types of fun(T t) and fun(T &amp;&amp; t) are different in C++?", "body": "<p>That is aperfect forward which can produce different outcomes depending on what arguments are provided to the template.</p>\n\n<blockquote>\n  <p>Perfect forwarding reduces the need for overloaded functions and helps\n  avoid the forwarding problem. The forwarding problem can occur when\n  you write a generic function that takes references as its parameters\n  and it passes (or forwards) these parameters to another function. For\n  example, if the generic function takes a parameter of type const T&amp;,\n  then the called function cannot modify the value of that parameter. If\n  the generic function takes a parameter of type T&amp;, then the function\n  cannot be called by using an rvalue (such as a temporary object or\n  integer literal).</p>\n  \n  <p>Ordinarily, to solve this problem, you must provide overloaded\n  versions of the generic function that take both T&amp; and const T&amp; for\n  each of its parameters. As a result, the number of overloaded\n  functions increases exponentially with the number of parameters.\n  Rvalue references enable you to write one version of a function that\n  accepts arbitrary arguments and forwards them to another function as\n  if the other function had been called directly.</p>\n</blockquote>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/dd293668.aspx\" rel=\"nofollow noreferrer\">Rvalue Reference</a></p>\n\n<blockquote>\n  <p>Forwarding references\n  Forwarding references are a special kind of references that preserve the value category of a function argument, making it possible to forward it by means of std::forward. Forwarding references are either:</p>\n</blockquote>\n\n<ol>\n<li>function parameter of a function template declared as rvalue reference to cv-unqualified type template parameter of that same function template:</li>\n<li>auto&amp;&amp; except when deduced from a brace-enclosed initializer list.</li>\n</ol>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/language/reference\" rel=\"nofollow noreferrer\">Forwarding Reference</a></p>\n\n<p>How it is donde is explained here:\n<a href=\"http://en.cppreference.com/w/cpp/language/template_argument_deduction#Deduction_from_a_function_call\" rel=\"nofollow noreferrer\">Template Deduction</a></p>\n"}, {"tags": [], "owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "is_accepted": false, "score": 0, "last_activity_date": 1516255512, "creation_date": 1516255512, "answer_id": 48314806, "question_id": 48304486, "link": "https://stackoverflow.com/questions/48304486/why-deduced-types-of-funt-t-and-funt-t-are-different-in-c/48314806#48314806", "title": "Why deduced types of fun(T t) and fun(T &amp;&amp; t) are different in C++?", "body": "<p>Because the type of <code>i</code> is <code>int</code>, not <code>int&amp;</code>. As <a href=\"http://www.eel.is/c++draft/temp.deduct.call#1\" rel=\"nofollow noreferrer\">[temp.deduct.call] paragraph 1</a> says</p>\n\n<blockquote>\n  <p>Template argument deduction is done by comparing each function template \n  parameter type (call it P) that contains template-parameters that participate in template argument deduction with the type of the corresponding argument of the call (call it A) as described below.</p>\n</blockquote>\n\n<p>And <a href=\"http://www.eel.is/c++draft/temp.deduct.call#4\" rel=\"nofollow noreferrer\">[temp.deduct.call] paragraph 4</a> says</p>\n\n<blockquote>\n  <p>In general, the deduction process attempts to find template argument values that will make the deduced A identical to A (after the type A is transformed as described above).</p>\n</blockquote>\n\n<p>The forwarding reference case is a special case. As <a href=\"http://www.eel.is/c++draft/temp.deduct.call#3\" rel=\"nofollow noreferrer\">[temp.deduct.call] paragraph 3</a> explicitly says</p>\n\n<blockquote>\n  <p>If P is a forwarding reference and the argument is an lvalue, the type \u201clvalue reference to A\u201d is used in place of A for type deduction.</p>\n</blockquote>\n"}], "owner": {"reputation": 1456, "user_id": 5432806, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/6COHz.jpg?s=128&g=1", "display_name": "expoter", "link": "https://stackoverflow.com/users/5432806/expoter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1516255512, "creation_date": 1516202579, "last_edit_date": 1516203514, "question_id": 48304486, "link": "https://stackoverflow.com/questions/48304486/why-deduced-types-of-funt-t-and-funt-t-are-different-in-c", "title": "Why deduced types of fun(T t) and fun(T &amp;&amp; t) are different in C++?", "body": "<pre><code>template &lt;typename T&gt;\nvoid fun1(T t) {} \n\ntemplate &lt;typename T&gt;\nvoid fun2(T &amp;&amp; t) {}\n\nint i = 1;\nfun1(i); // the deduced type of T is int\nfun2(i); // the deduced type of T is int &amp;\n</code></pre>\n\n<p>The deduced type of T in fun1(i) and fun2(i) are <code>int</code> and <code>int &amp;</code> respectively, can anyone explain the mechanism how compiler do deduction?</p>\n\n<h3>UPDATE</h3>\n\n<p>This question is not a duplicate of <a href=\"https://stackoverflow.com/questions/42145453/type-not-deduced-to-be-r-value-reference-why-not\">Type not deduced to be r-value reference: why not?</a>, because:</p>\n\n<p>The later question explained the deduction rules for :</p>\n\n<pre><code>template &lt;class T&gt;\nvoid foo(T&amp;&amp; )\n</code></pre>\n\n<p><strong>Here, I want to know the difference of deduction rules for</strong> </p>\n\n<pre><code>template &lt;class T&gt;\nvoid foo(T&amp;&amp; )\n</code></pre>\n\n<p>and</p>\n\n<pre><code>template &lt;class T&gt;\nvoid foo(T )\n</code></pre>\n"}, {"tags": ["c++", "arrays", "c++11", "vector"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1516202657, "post_id": 48304484, "comment_id": 83593863, "body": "C does not have std::vector..."}, {"owner": {"reputation": 2630, "user_id": 1983197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AwjpR.png?s=128&g=1", "display_name": "LordWilmore", "link": "https://stackoverflow.com/users/1983197/lordwilmore"}, "edited": false, "score": 0, "creation_date": 1516202847, "post_id": 48304484, "comment_id": 83594012, "body": "Your question can be reduced significantly, as you are not looking for a solution a problem that you are experiencing, you simply don&#39;t know how to use the vector class.  And if you ask this then you will be told to go off and read about how to use it on the web."}], "answers": [{"tags": [], "owner": {"reputation": 7975, "user_id": 5660517, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1iIxK.jpg?s=128&g=1", "display_name": "Ronan Boiteau", "link": "https://stackoverflow.com/users/5660517/ronan-boiteau"}, "is_accepted": true, "score": 2, "last_activity_date": 1516203033, "creation_date": 1516203033, "answer_id": 48304641, "question_id": 48304484, "link": "https://stackoverflow.com/questions/48304484/how-to-print-only-one-single-element-from-vector/48304641#48304641", "title": "How to print only one single element from vector", "body": "<p>This will print the first element from your vector (position 0) &amp; call its <code>printInfo()</code> method:</p>\n\n<pre><code>m_cities.at(0)-&gt;printInfo();\n</code></pre>\n\n<p>Same as:</p>\n\n<pre><code>m_cities[0]-&gt;printInfo();\n</code></pre>\n\n<p>The difference between <code>at()</code> &amp; the <code>[]</code> operator is that <code>at()</code> throws an <code>out_of_range</code> exception if you try to access an element outside your vector.</p>\n\n<p>If you want the second element (position 1):</p>\n\n<pre><code>m_cities.at(1)-&gt;printInfo();\nm_cities[1]-&gt;printInfo();\n</code></pre>\n\n<p>An so on...</p>\n"}], "owner": {"reputation": 163, "user_id": 9230232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/745b3df2b018dbf57e9b5052b2804891?s=128&d=identicon&r=PG&f=1", "display_name": "spammik", "link": "https://stackoverflow.com/users/9230232/spammik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 447, "favorite_count": 0, "accepted_answer_id": 48304641, "answer_count": 1, "score": 0, "last_activity_date": 1516203033, "creation_date": 1516202574, "last_edit_date": 1516202662, "question_id": 48304484, "link": "https://stackoverflow.com/questions/48304484/how-to-print-only-one-single-element-from-vector", "title": "How to print only one single element from vector", "body": "<p>I have created a few cities through the vector</p>\n\n<pre><code>    void World::vytvorMesta()\nm_cities.push_back(new City(\"Kokotkova\", 23));\nm_cities.push_back(new City(\"Kokotkovasda\", 223));\nm_cities.push_back(new City(\"Kokotkqweova\", 231));\nm_cities.push_back(new City(\"Kokotkasdova\", 243));\n</code></pre>\n\n<p>and then i need to print them so  </p>\n\n<pre><code>void World::printInfo2() {\n    m_player-&gt;printInfo();\n    if(m_cities.size()&gt;0){\n        for(unsigned int i=0; i&lt;m_cities.size(); i++){\n            m_cities.at(i)-&gt;printInfo();\n        }\n    }\n}\n</code></pre>\n\n<p>so im getting an output</p>\n\n<p><a href=\"https://i.stack.imgur.com/qq6bm.png\" rel=\"nofollow noreferrer\">output image</a></p>\n\n<p>my question is how to get only one from this vectors into output...not all of them and how can i \"travel\" between them...from vector 1 to 2 etc. and again print them. Can someone help me?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "json", "autocomplete", "visual-studio-code", "chromium"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6233369, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208269844336271/picture?type=large", "display_name": "tylerwowen", "link": "https://stackoverflow.com/users/6233369/tylerwowen"}, "is_accepted": false, "score": 1, "last_activity_date": 1535695125, "last_edit_date": 1535695125, "creation_date": 1535674467, "answer_id": 52106913, "question_id": 48304336, "link": "https://stackoverflow.com/questions/48304336/how-to-use-autocompletion-in-chromium-with-visual-studio-code/52106913#52106913", "title": "How to use autocompletion in Chromium with Visual Studio Code", "body": "<p>I spent some time try to make YCM work on Windows but had no luck. However, I am able to make IntelliSense work fairly well. First ensure you have <code>C/C++</code> extension installed. </p>\n\n<p>c_cpp_properties.json:</p>\n\n<pre><code>{\n  \"configurations\": [\n    {\n      \"name\": \"Win32\",\n      \"includePath\": [\n        \"${workspaceFolder}/**\"\n      ],\n      \"defines\": [\n        \"_DEBUG\",\n        \"UNICODE\",\n        \"_UNICODE\"\n      ],\n      \"windowsSdkVersion\": \"10.0.17134.0\",\n      \"compilerPath\": \"${workspaceFolder}/third_party/llvm-build/Release+Asserts/bin/clang-cl.exe\",\n      \"compileCommands\": \"${workspaceFolder}/out/Default/compile_commands.json\",\n      \"cStandard\": \"c11\",\n      \"cppStandard\": \"c++17\",\n      \"intelliSenseMode\": \"clang-x64\"\n    }\n  ],\n  \"version\": 4\n}\n</code></pre>\n\n<p>I use this command to generate compile_commands.json:</p>\n\n<pre><code>python tools/clang/scripts/generate_compdb.py -p out/Default -o out/Default/compile_commands.json\n</code></pre>\n\n<p>Besides, I recommend uninstall/disable YCM unless you figure out how to make it work, because it can interfere with C/C++ extension.</p>\n"}], "owner": {"reputation": 119, "user_id": 8671816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9e619f0267810eb2e6fafc549f6a650?s=128&d=identicon&r=PG&f=1", "display_name": "Long Le", "link": "https://stackoverflow.com/users/8671816/long-le"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 656, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1535695125, "creation_date": 1516202146, "question_id": 48304336, "link": "https://stackoverflow.com/questions/48304336/how-to-use-autocompletion-in-chromium-with-visual-studio-code", "title": "How to use autocompletion in Chromium with Visual Studio Code", "body": "<p>Im using Windows and trying to use autocompletion with <a href=\"https://marketplace.visualstudio.com/items?itemName=RichardHe.you-complete-me\" rel=\"nofollow noreferrer\"><strong><em>you-complete-me</em></strong></a> extension in VS Code with this guide <a href=\"https://chromium.googlesource.com/chromium/src/+/lkcr/docs/vscode.md\" rel=\"nofollow noreferrer\">Visual Studio Code Dev</a> but then i have issues like this:\n<a href=\"https://i.stack.imgur.com/MBMKw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MBMKw.png\" alt=\"enter image description here\"></a></p>\n\n<p>Followed by the <a href=\"https://chromium.googlesource.com/chromium/src/+/lkcr/docs/vscode.md\" rel=\"nofollow noreferrer\">above guide</a>, I tried setting <a href=\"https://marketplace.visualstudio.com/items?itemName=RichardHe.you-complete-me\" rel=\"nofollow noreferrer\"><strong><em>you-complete-me</em></strong></a> in my workspaces settings:</p>\n\n<pre><code>\"ycmd.path\": \"C:/Program Files/~/.ycmd\",\n\"ycmd.global_extra_config\":\"D:/chromium/depot_tools/src/tools/vim/chromium.ycm_extra_conf.py\",\n\"ycmd.confirm_extra_conf\": false, \n</code></pre>\n\n<p>Followed by the issue, i generated the compile_command.json file by the following command: </p>\n\n<pre><code>ninja -C out/Default -t compdb cc cxx objc objcxx &gt; out/Default/compile_commands.json\n</code></pre>\n\n<p>and then in <code>c_cpp_properties.json</code> file, I updated the \"includePath\", \"browse\" path and added the path of the above <code>compile_commands.json</code> file to \"compileCommands\" :</p>\n\n<pre><code>        \"name\": \"Win32\",\n        \"includePath\": [\n            \"C:/Program Files (x86)/Microsoft Visual Studio/2017/Enterprise/VC/Tools/MSVC/14.12.25827/include/*\",\n            \"C:/Program Files (x86)/Microsoft Visual Studio/2017/Enterprise/VC/Tools/MSVC/14.12.25827/atlmfc/include/*\",\n            \"C:/Program Files (x86)/Windows Kits/10/Include/10.0.16299.0/um\",\n            \"C:/Program Files (x86)/Windows Kits/10/Include/10.0.16299.0/ucrt\",\n            \"C:/Program Files (x86)/Windows Kits/10/Include/10.0.16299.0/shared\",\n            \"C:/Program Files (x86)/Windows Kits/10/Include/10.0.16299.0/winrt\",\n            \"${workSpaceRoot}\",\n            \"D:/chromium/depot_tools/src\"\n        ],\n        \"compileCommands\": \"D:/chromium/depot_tools/src/out/Default/compile_commands.json\",\n        \"defines\": [\n            \"_DEBUG\",\n            \"UNICODE\"\n        ],\n        \"intelliSenseMode\": \"msvc-x64\",\n        \"browse\": {\n            \"path\": [\n                \"C:/Program Files (x86)/Microsoft Visual Studio/2017/Enterprise/VC/Tools/MSVC/14.12.25827/include/*\",\n                \"C:/Program Files (x86)/Microsoft Visual Studio/2017/Enterprise/VC/Tools/MSVC/14.12.25827/atlmfc/include/*\",\n                \"C:/Program Files (x86)/Windows Kits/10/Include/10.0.16299.0/um\",\n                \"C:/Program Files (x86)/Windows Kits/10/Include/10.0.16299.0/ucrt\",\n                \"C:/Program Files (x86)/Windows Kits/10/Include/10.0.16299.0/shared\",\n                \"C:/Program Files (x86)/Windows Kits/10/Include/10.0.16299.0/winrt\",\n                \"${workSpaceRoot}\",\n                \"D:/chromium/depot_tools/src\"\n            ],\n            \"limitSymbolsToIncludedHeaders\": true,\n            \"databaseFilename\": \"\"\n        }\n</code></pre>\n\n<p>But nothing happens and these issues still appear. Can anyone help me to solve these issues or suggest me a clearly guide to get start with chromium in VS Code? </p>\n"}, {"tags": ["c++", "c++11", "vector", "exc-bad-access"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 5, "creation_date": 1516201638, "post_id": 48304156, "comment_id": 83593092, "body": "Please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> instead of descriptions of code."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1516202215, "post_id": 48304156, "comment_id": 83593527, "body": "What is <code>SaveGameItem</code>? What does <code>tmpData.at(&quot;saveTime&quot;)</code> return? Why are you sure that the <code>emplace_back</code> is the cause of the crash? This is not a real <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> as we cannot compile it on our own (and there&#39;s too much missing information to find the real issue)"}, {"owner": {"reputation": 47, "user_id": 4337360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428efc1050f16e73f064c1b3f5639798?s=128&d=identicon&r=PG&f=1", "display_name": "ThvD", "link": "https://stackoverflow.com/users/4337360/thvd"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1516202847, "post_id": 48304156, "comment_id": 83594013, "body": "I have added additional information @AlgirdasPreid\u017eius"}, {"owner": {"reputation": 47, "user_id": 4337360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428efc1050f16e73f064c1b3f5639798?s=128&d=identicon&r=PG&f=1", "display_name": "ThvD", "link": "https://stackoverflow.com/users/4337360/thvd"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1516202913, "post_id": 48304156, "comment_id": 83594056, "body": "Every function that gets called on <code>_saveGameItems</code> results in a <code>EXC_BAD_ACCESS</code> error @UnholySheep"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1516203037, "post_id": 48304156, "comment_id": 83594150, "body": "You aren&#39;t calling any function on <code>_saveGameItems</code> (at least not in the code you have shown), the only actual use of it is <code>_saveGameItems = saves;</code>"}, {"owner": {"reputation": 47, "user_id": 4337360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428efc1050f16e73f064c1b3f5639798?s=128&d=identicon&r=PG&f=1", "display_name": "ThvD", "link": "https://stackoverflow.com/users/4337360/thvd"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1516203118, "post_id": 48304156, "comment_id": 83594214, "body": "Oops, I meant that any use of operators (in this case the assignment operator) or function calls on <code>_saveGameItems</code> results in that error. @UnholySheep"}], "answers": [{"tags": [], "owner": {"reputation": 47, "user_id": 4337360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428efc1050f16e73f064c1b3f5639798?s=128&d=identicon&r=PG&f=1", "display_name": "ThvD", "link": "https://stackoverflow.com/users/4337360/thvd"}, "is_accepted": true, "score": 0, "last_activity_date": 1516206083, "creation_date": 1516206083, "answer_id": 48305619, "question_id": 48304156, "link": "https://stackoverflow.com/questions/48304156/stdvector-member-variable-exc-bad-access/48305619#48305619", "title": "std::vector member variable EXC_BAD_ACCESS", "body": "<p>Found the issue. <code>_saveGameItems</code> hadn't been initialised yet as the constructor of the class that called <code>getFilePathsOfSaveGames()</code> was called in the constructor of another class preventing <code>_saveGameItems</code> from being initialised.</p>\n"}], "owner": {"reputation": 47, "user_id": 4337360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428efc1050f16e73f064c1b3f5639798?s=128&d=identicon&r=PG&f=1", "display_name": "ThvD", "link": "https://stackoverflow.com/users/4337360/thvd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 473, "favorite_count": 0, "accepted_answer_id": 48305619, "answer_count": 1, "score": -3, "last_activity_date": 1516206083, "creation_date": 1516201605, "last_edit_date": 1516202362, "question_id": 48304156, "link": "https://stackoverflow.com/questions/48304156/stdvector-member-variable-exc-bad-access", "title": "std::vector member variable EXC_BAD_ACCESS", "body": "<p>My class <code>load_game_state</code> (definition) has a member variable <code>_saveGameItems</code> of type <code>vector&lt;shared_ptr&lt;SaveGameState&gt;&gt;</code> and is never initialised (which it shouldn't need to).</p>\n\n<p>Upon trying to use <code>push_back()</code> or <code>emplace_back()</code> on this vector I get a <code>EXC_BAD_ACCESS</code> error. I do not understand why I can not add objects to this vector.</p>\n\n<p>The <code>SaveGameData</code> objects that populate the vector <code>saves</code>. Get constructed correctly, each object contains three strings (namely a path, a description an a timestamp (which is actually just a string)).</p>\n\n<p>My code:</p>\n\n<p><strong>load_game_state.cpp</strong></p>\n\n<pre><code>vector&lt;std::string&gt; LoadGameState::getFilePathsOfSaveGames() {\nJSONParser jp = JSONParser {};\nvector&lt;string&gt; paths = get_all(\"assets/saves/\", \".json\");\nvector&lt;shared_ptr&lt;SaveGameItem&gt;&gt; saves;\n\n\n\n// Extract data\nfor(auto path : paths) {\n    json tmpData = jp.getSaveGame(path);\n    saves.emplace_back(make_shared&lt;SaveGameItem&gt;(SaveGameItem(path, tmpData.at(\"saveTime\"), tmpData.at(\"name\"))));\n}\n\n_saveGameItems = saves;\n\n}\n</code></pre>\n\n<p><strong>load_game_state.h</strong></p>\n\n<pre><code>#ifndef RISKY_LOAD_GAME_STATE_H\n#define RISKY_LOAD_GAME_STATE_H\n\n#include \"state.h\"\n#include \"../risky.h\"\n#include \"../scenes/load_game_scene.h\"\n#include \"load_game_controller.h\"\n#include \"../models/SaveGameItem.h\"\n\n#include &lt;boost/filesystem.hpp&gt;\n\nnamespace fs = ::boost::filesystem;\n\nclass LoadGameState : public State, public LoadGameController {\n\npublic:\n    LoadGameState(Risky&amp; context, GameEngine&amp; engine, StateManager* stateManager);\n    BaseScene&amp; getScene() override;\n    void doQuit() override;\n    void handleInput() override;\n    void update() override;\n    ~LoadGameState();\n\n    vector&lt;string&gt; get_all(const boost::filesystem::path&amp; root, const string&amp; ext);\n\n    const vector&lt;shared_ptr&lt;SaveGameItem&gt;&gt; &amp;get_saveGameItems() const;\n\n    void set_saveGameItems(const vector&lt;shared_ptr&lt;SaveGameItem&gt;&gt; &amp;_saveGameItems);\n\n    // TODO get file paths of all JSON files\n    vector&lt;std::string&gt; getFilePathsOfSaveGames() override;\n\n    // TODO parse into SaveGameItem objects\n\n    // TODO display these objects\n\n\nprivate:\n    LoadGameScene _scene;\n    Risky&amp; _riskyRef;\n    GameEngine&amp; _engineRef;\n\n    // SaveGameItems\n    vector&lt;shared_ptr&lt;SaveGameItem&gt;&gt; _saveGameItems;\n};\n\n#endif //RISKY_LOAD_GAME_STATE_H\n</code></pre>\n\n<p><strong>SaveGameItem</strong> looks as follows:</p>\n\n<pre><code>class SaveGameItem {\n    public:\n    SaveGameItem();\n\n    SaveGameItem(std::string filePath, std::string timestamp, std::string name);\n\n    const std::string &amp;get_filePath() const;\n\n    void set_filePath(const std::string &amp;_filePath);\n\n    const std::string &amp;get_timestamp() const;\n\n    void set_timestamp(const std::string &amp;_timestamp);\n\n    const std::string &amp;get_name() const;\n\n    void set_name(const std::string &amp;_name);\n\n    ~SaveGameItem();\n\nprivate:\n    std::string _filePath;\n    std::string _timestamp;\n    std::string _name;\n};\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1516201040, "post_id": 48303941, "comment_id": 83592696, "body": "Have you tried to <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\"><i>debug</i></a> it?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1516201042, "post_id": 48303941, "comment_id": 83592698, "body": "Arrays starts with index 0, not 1. Proper way <code>int coins[] = { 1, 5, 10 ... };</code>"}, {"owner": {"reputation": 3, "user_id": 9009637, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jhIIGt92Bao/AAAAAAAAAAI/AAAAAAAAN2I/o6gxnSVxw8M/photo.jpg?sz=128", "display_name": "Iren Petrosyan", "link": "https://stackoverflow.com/users/9009637/iren-petrosyan"}, "edited": false, "score": 0, "creation_date": 1516201218, "post_id": 48303941, "comment_id": 83592809, "body": "i know. but i can use it from 1 . thats ok. look. i used for(i=1; i&lt;=6; i++) from 1 to 6"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1516201300, "post_id": 48303941, "comment_id": 83592869, "body": "Of course you can then do not ask others to look into your code, deal with it by yourself."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 3, "creation_date": 1516201351, "post_id": 48303941, "comment_id": 83592894, "body": "<i>&quot;I am having issues with it&quot;</i> What&#39;s the nature of those issues? What outcome do you expect, what do you observe, and how do the two differ?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1516201448, "post_id": 48303941, "comment_id": 83592966, "body": "@IgorTandetnik nature of the issue  - &quot;I can use it that way it is ok&quot;, yea use global variable for counter in recursive function, seems not ok enough."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1516201828, "post_id": 48303941, "comment_id": 83593238, "body": "there are some obvious issues with your code (<code>a</code> vs <code>a</code>, indices starting at 1 when they should start at <code>0</code> plus some minor ones), but most likely they arent related to the problem you have in mind. To be sure you need to tell us what <b>you</b> think is the issue"}, {"owner": {"reputation": 3, "user_id": 9009637, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jhIIGt92Bao/AAAAAAAAAAI/AAAAAAAAN2I/o6gxnSVxw8M/photo.jpg?sz=128", "display_name": "Iren Petrosyan", "link": "https://stackoverflow.com/users/9009637/iren-petrosyan"}, "edited": false, "score": 0, "creation_date": 1516202466, "post_id": 48303941, "comment_id": 83593735, "body": "i changed coins[] so now it starts with 0; a is not global. and i used for(coin : coins), now there is another issue. but i think that i can figure it out(i guess)"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9009637, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jhIIGt92Bao/AAAAAAAAAAI/AAAAAAAAN2I/o6gxnSVxw8M/photo.jpg?sz=128", "display_name": "Iren Petrosyan", "link": "https://stackoverflow.com/users/9009637/iren-petrosyan"}, "edited": false, "score": 0, "creation_date": 1516203782, "post_id": 48304252, "comment_id": 83594682, "body": "that helped. but i have another mistake. look. for example i say solve(6)=solve(5)+solve(1); but its not like that. i use noth 1+5 and 5+1; so that abother problem. but thanks. you were right"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 3, "user_id": 9009637, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jhIIGt92Bao/AAAAAAAAAAI/AAAAAAAAN2I/o6gxnSVxw8M/photo.jpg?sz=128", "display_name": "Iren Petrosyan", "link": "https://stackoverflow.com/users/9009637/iren-petrosyan"}, "edited": false, "score": 0, "creation_date": 1516204667, "post_id": 48304252, "comment_id": 83595290, "body": "To fix that you can pass index to start with to your function (and call it with 0 from main)"}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 1, "last_activity_date": 1516201903, "creation_date": 1516201903, "answer_id": 48304252, "question_id": 48303941, "link": "https://stackoverflow.com/questions/48303941/coin-change-dinamic-programming-having-issues-with-it/48304252#48304252", "title": "Coin change dinamic programming: having issues with it", "body": "<blockquote>\n  <p>But can't understand where is my mistake.</p>\n</blockquote>\n\n<p>You should not use global variables unless it is really necessary, especially in recursive functions.</p>\n\n<p>Note: using arrays not the way it is designed yet another way to produce errors in your program. Create your array properly initialized:</p>\n\n<pre><code>int coins[] = { 1, 5, 10, 25, 50, 100 };\n</code></pre>\n\n<p>and you can iterate it simpler way:</p>\n\n<pre><code> for( int coin : coins )\n</code></pre>\n\n<p>and irony is it would fix your problem as well.</p>\n"}], "owner": {"reputation": 3, "user_id": 9009637, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jhIIGt92Bao/AAAAAAAAAAI/AAAAAAAAN2I/o6gxnSVxw8M/photo.jpg?sz=128", "display_name": "Iren Petrosyan", "link": "https://stackoverflow.com/users/9009637/iren-petrosyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 48304252, "answer_count": 1, "score": -1, "last_activity_date": 1516201903, "creation_date": 1516200945, "question_id": 48303941, "link": "https://stackoverflow.com/questions/48303941/coin-change-dinamic-programming-having-issues-with-it", "title": "Coin change dinamic programming: having issues with it", "body": "<p>So i am asked to write a recursive program to count all possible ways to get N with US cents (100, 50, 25, 10, 5, 1)\nI am having issues with it. But can't understand where is my mistake. please help me.</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    using namespace std;\n    int i,coins[8];\n    long long a;\n    long long solve(long long a){\n        if(a==0){\n            return 1;\n        }\n        if(a&lt;0){\n            return 0;\n        }\n        long long k=0;\n        for(i=1; i&lt;=6; i++){\n            k+=solve(a-coins[i]);\n        }\n        return k;\n    }\n    int main(){\n        coins[1]=1; \n        coins[2]=5;\n        coins[3]=10; \n        coins[4]=25;\n        coins[5]=50; \n        coins[6]=100;\n        cin&gt;&gt;a;\n        cout&lt;&lt;solve(a)&lt;&lt;endl;\n        return 0;\n    }\n</code></pre>\n"}, {"tags": ["c++", "class", "memory", "enums"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 5, "creation_date": 1516200383, "post_id": 48303764, "comment_id": 83592259, "body": "Because you declared only types in your class (no members) and the minimum size of a class is 1."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1516200389, "post_id": 48303764, "comment_id": 83592268, "body": "Because you don&#39;t have any member variables. An object still needs to take some place, to be addressable, so it still is one single byte so it could be stored in memory."}, {"owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "edited": false, "score": 0, "creation_date": 1516200398, "post_id": 48303764, "comment_id": 83592277, "body": "You are not declaring data members..."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1516200403, "post_id": 48303764, "comment_id": 83592280, "body": "Why would it be 8? It contains no data. C++ doesn&#39;t allow 0 size objects (because that would lead to various bad things like multiple objects having the same address and arrays behaving super weird), so 1 is the ideal choice."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1516203272, "post_id": 48303764, "comment_id": 83594323, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2362097/why-is-the-size-of-an-empty-class-in-c-not-zero\">Why is the size of an empty class in C++ not zero?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1516200541, "post_id": 48303820, "comment_id": 83592366, "body": "To be fair, types have a size as well. You can query the size of a type and get a meaningful answer."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1516200587, "post_id": 48303820, "comment_id": 83592397, "body": "You mean to say &quot;only data occupies storage&quot;. And even that can have exceptions."}], "tags": [], "owner": {"reputation": 68, "user_id": 9229623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ad087efc399b11bf64c035265b28e30?s=128&d=identicon&r=PG&f=1", "display_name": "Steranoid", "link": "https://stackoverflow.com/users/9229623/steranoid"}, "is_accepted": true, "score": 0, "last_activity_date": 1516202815, "last_edit_date": 1516202815, "creation_date": 1516200526, "answer_id": 48303820, "question_id": 48303764, "link": "https://stackoverflow.com/questions/48303764/why-the-size-of-the-c-class-with-enumerations-declared-is-1/48303820#48303820", "title": "why the size of the C++ class with enumerations declared is 1?", "body": "<p>Only data have size, you're not setting data in your class, you're defining types of data.</p>\n\n<p>For the second part, recently added, you're asking to display test::ONE, like in C, enums are an abstraction of unsigned integers, so when you type :</p>\n\n<pre><code>enum foo {\n    bar,\n    baz,\n    qux\n};\n</code></pre>\n\n<p>It's exactly the same as typing</p>\n\n<pre><code>enum foo {\n    bar = 0,\n    baz = 1,\n    qux = 2\n};\n</code></pre>\n\n<p>So when you type this in your main</p>\n\n<pre><code>cout &lt;&lt; \"value of enum\"&lt;&lt; test::ONE;\n</code></pre>\n\n<p>You just implicitely converting your test::ONE in its integer value.</p>\n\n<p>Note that this implicit conversion would not exist with enum class in c++11.</p>\n"}], "owner": {"reputation": 13, "user_id": 2797011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e02b104dc64b9c77241f4955b1dcc7d8?s=128&d=identicon&r=PG&f=1", "display_name": "Vignesh Rajendran", "link": "https://stackoverflow.com/users/2797011/vignesh-rajendran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 48303820, "answer_count": 1, "score": 1, "last_activity_date": 1516202815, "creation_date": 1516200312, "last_edit_date": 1516201176, "question_id": 48303764, "link": "https://stackoverflow.com/questions/48303764/why-the-size-of-the-c-class-with-enumerations-declared-is-1", "title": "why the size of the C++ class with enumerations declared is 1?", "body": "<pre><code>class test\n{\npublic:\n    enum t_number\n    {\n        ZERO,\n        ONE\n    };\n\n    enum t_test\n    {\n        TWO,\n        THREE\n    };\n};\n</code></pre>\n\n<p>Why the size of the above class is 1 and not 8?</p>\n\n<p>And when I do this in main()</p>\n\n<pre><code>cout &lt;&lt; \"value of enum\"&lt;&lt; test::ONE\n</code></pre>\n\n<p>I get output as 1.</p>\n\n<p>Does that mean memory is allocated for the enum?</p>\n"}, {"tags": ["c++", "operator-overloading"], "comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 3, "creation_date": 1516200038, "post_id": 48303651, "comment_id": 83592030, "body": "Your <code>operator[]</code> should return a reference."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 1, "creation_date": 1516200109, "post_id": 48303651, "comment_id": 83592070, "body": "Unrelated, but it sounds weird not to keep the size of the array..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1516200201, "post_id": 48303651, "comment_id": 83592129, "body": "OT: you are voilating the rule of 3/5/0."}], "answers": [{"comments": [{"owner": {"reputation": 526, "user_id": 5384689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3ilrh.jpg?s=128&g=1", "display_name": "VelocityPulse", "link": "https://stackoverflow.com/users/5384689/velocitypulse"}, "edited": false, "score": 1, "creation_date": 1516201013, "post_id": 48303679, "comment_id": 83592686, "body": "Yeah i think you speak about canonical coplien form that i just remove for this question. Thank you for the link and i will read this now ;)"}, {"owner": {"reputation": 526, "user_id": 5384689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3ilrh.jpg?s=128&g=1", "display_name": "VelocityPulse", "link": "https://stackoverflow.com/users/5384689/velocitypulse"}, "edited": false, "score": 0, "creation_date": 1516201136, "post_id": 48303679, "comment_id": 83592756, "body": "Anyway the idea to capture the size is obvious and again remove for the question"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 526, "user_id": 5384689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3ilrh.jpg?s=128&g=1", "display_name": "VelocityPulse", "link": "https://stackoverflow.com/users/5384689/velocitypulse"}, "edited": false, "score": 1, "creation_date": 1516201210, "post_id": 48303679, "comment_id": 83592804, "body": "@Cl&#233;mentChameyrat: Awesome. I&#39;ve mentioned them for the benefit of other readers, not necessarily you. And I like the term &quot;Coplien Form&quot;, although personally I don&#39;t subscribe to it (due to the explicit destructor)."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 5, "last_activity_date": 1516201465, "last_edit_date": 1516201465, "creation_date": 1516200007, "answer_id": 48303679, "question_id": 48303651, "link": "https://stackoverflow.com/questions/48303651/assignment-after-operator/48303679#48303679", "title": "Assignment after operator []", "body": "<p>Yes, to do that you need to provide a version of <code>[]</code> that returns a <em>reference</em> to an element in the container:</p>\n\n<pre><code>int&amp; operator[](int n) {\n    return this-&gt;_content[n];\n}\n</code></pre>\n\n<p>You can then modify the array element via that reference, with the exact syntax you propose at the calling site.</p>\n\n<p>Other things going forward: You'll need to define an <em>assignment operator</em> and a copy constructor too. We call this \"the rule of three\". See <a href=\"https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">What is The Rule of Three?</a>. And it might be an idea to capture the size of the container passed on construction. You could then check if the <code>n</code> passed to the <code>[]</code> overload is within the bounds of the backing array.</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1516200039, "post_id": 48303682, "comment_id": 83592032, "body": "Drop the <code>const</code> though."}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 1, "last_activity_date": 1516200049, "last_edit_date": 1516200049, "creation_date": 1516200026, "answer_id": 48303682, "question_id": 48303651, "link": "https://stackoverflow.com/questions/48303651/assignment-after-operator/48303682#48303682", "title": "Assignment after operator []", "body": "<p>Make your <code>operator[]</code> return a reference, then you can assign to the returned value:</p>\n\n<pre><code>int&amp; operator[](int n) {\n    return this-&gt;_content[n];\n}\n</code></pre>\n\n<p>then you can write</p>\n\n<pre><code>a[5] = 100;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "edited": false, "score": 0, "creation_date": 1516200674, "post_id": 48303694, "comment_id": 83592454, "body": "Why do you declare the index as <code>size_t</code> instead of <code>int</code>?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "edited": false, "score": 1, "creation_date": 1516201793, "post_id": 48303694, "comment_id": 83593206, "body": "@\u6c34\u98f2\u307f\u9ce5 By analogy with other standard containers. Moreover the array size is specified as size_t."}, {"owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "edited": false, "score": 0, "creation_date": 1516202053, "post_id": 48303694, "comment_id": 83593413, "body": "Thanks for the explanation."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 4, "last_activity_date": 1516200061, "creation_date": 1516200061, "answer_id": 48303694, "question_id": 48303651, "link": "https://stackoverflow.com/questions/48303651/assignment-after-operator/48303694#48303694", "title": "Assignment after operator []", "body": "<p>At least you can overload the operator [] the following way</p>\n\n<pre><code>const int &amp; operator[]( size_t n) const \n{\n    return this-&gt;_content[n];\n}\n\nint &amp; operator[]( size_t n) \n{\n    return this-&gt;_content[n];\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1516200895, "post_id": 48303826, "comment_id": 83592601, "body": "That <code>const</code> qualifier is misleading. Despite the semantics correctness."}], "tags": [], "owner": {"reputation": 371, "user_id": 388354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5d3ea08ff156c85535ffae482b6b41?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/388354/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1516200546, "creation_date": 1516200546, "answer_id": 48303826, "question_id": 48303651, "link": "https://stackoverflow.com/questions/48303651/assignment-after-operator/48303826#48303826", "title": "Assignment after operator []", "body": "<p>of course, its possible, just let operator[] returns <code>int&amp;</code> </p>\n\n<p>```</p>\n\n<pre><code>int&amp; operator[](int n) const {\n    return this-&gt;_content[n];\n    }\n</code></pre>\n\n<p>```</p>\n\n<p>then  </p>\n\n<pre><code>int main() {\n    Array a(10);\n    a[5]=1;\n    std::cout &lt;&lt; a[5] &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 526, "user_id": 5384689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3ilrh.jpg?s=128&g=1", "display_name": "VelocityPulse", "link": "https://stackoverflow.com/users/5384689/velocitypulse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 48303679, "answer_count": 4, "score": 0, "last_activity_date": 1516203010, "creation_date": 1516199889, "last_edit_date": 1516203010, "question_id": 48303651, "link": "https://stackoverflow.com/questions/48303651/assignment-after-operator", "title": "Assignment after operator []", "body": "<p>i'm learning c++ and i try to know if its possible to use assignment <code>=</code> operator after call of operator <code>[]</code></p>\n\n<p>I have an array class with private <code>int *_content</code> data, and the operator <code>=</code> overloaded.\nHis constructor alloc my <code>_content</code> by the size passing in parameter. </p>\n\n<p>My class looks like :</p>\n\n<pre><code>class Array {\n\nprivate:\n    int *_content;\n\npublic:    \n    Array(unsigned int n) {\n        this-&gt;_content = new int[n];\n    }\n\n    ~Array() {\n            delete[] _content;\n    }\n\n    int operator[](int n) const {\n        return this-&gt;_content[n];\n    }\n};\n</code></pre>\n\n<p>i can write the following code : </p>\n\n<pre><code>int main() {\n    Array a(10);\n\n    std::cout &lt;&lt; a[5] &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>result :</p>\n\n<pre><code>0\n</code></pre>\n\n<p>I would like to know if it's possible to assign at the case <code>n</code> of my content by any operator after using <code>[]</code> like this : </p>\n\n<pre><code>a[5] = 2000;\n</code></pre>\n\n<p>And know if there is any clean solution in my case for this situation.\nThank you for reply</p>\n"}, {"tags": ["c++", "boost", "graph", "boost-graph"], "comments": [{"owner": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "edited": false, "score": 0, "creation_date": 1516201573, "post_id": 48303546, "comment_id": 83593050, "body": "<code>examine_edge()</code> takes <code>g</code> as a <code>const</code> reference parameter, so I would be surprised if any assignment statement with <code>g</code> on the LHS would compile.  Try changing it to a non-const reference parameter."}, {"owner": {"reputation": 23, "user_id": 9230019, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-670JfpMC8wY/AAAAAAAAAAI/AAAAAAAAABU/FcH5h4QKPuA/photo.jpg?sz=128", "display_name": "\u4e95\u4e0a\u7531\u4e00", "link": "https://stackoverflow.com/users/9230019/%e4%ba%95%e4%b8%8a%e7%94%b1%e4%b8%80"}, "reply_to_user": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "edited": false, "score": 0, "creation_date": 1516201815, "post_id": 48303546, "comment_id": 83593225, "body": "The error  still exists after deleting &#39;const&#39;"}, {"owner": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "edited": false, "score": 0, "creation_date": 1516201904, "post_id": 48303546, "comment_id": 83593304, "body": "Then I can&#39;t help you sorry."}], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 9230019, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-670JfpMC8wY/AAAAAAAAAAI/AAAAAAAAABU/FcH5h4QKPuA/photo.jpg?sz=128", "display_name": "\u4e95\u4e0a\u7531\u4e00", "link": "https://stackoverflow.com/users/9230019/%e4%ba%95%e4%b8%8a%e7%94%b1%e4%b8%80"}, "is_accepted": false, "score": 1, "last_activity_date": 1516204560, "creation_date": 1516204560, "answer_id": 48305123, "question_id": 48303546, "link": "https://stackoverflow.com/questions/48303546/why-edge-properties-cant-be-changed-within-visitor-in-bgl/48305123#48305123", "title": "Why edge properties can&#39;t be changed within visitor in BGL?", "body": "<p>Finally I solved it by storing a <code>Graph</code> pointer in the visitor.</p>\n\n<pre><code>class custom_dijkstra_visitor : public boost::default_dijkstra_visitor\n{\npublic:\n    template &lt; typename Edge, typename Graph &gt;\n    void examine_edge(Edge e, Graph &amp; g)\n    {\n        (*gg)[e].weight = 1/(*gg)[e].residual_capacity;\n    }\n    Graph* gg = nullptr;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 9230019, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-670JfpMC8wY/AAAAAAAAAAI/AAAAAAAAABU/FcH5h4QKPuA/photo.jpg?sz=128", "display_name": "\u4e95\u4e0a\u7531\u4e00", "link": "https://stackoverflow.com/users/9230019/%e4%ba%95%e4%b8%8a%e7%94%b1%e4%b8%80"}, "edited": false, "score": 0, "creation_date": 1516239861, "post_id": 48305391, "comment_id": 83611087, "body": "Your idea is reasonable, but it needs to run <code>dijkstra_shortest_paths()</code> two times. Other properties e.g <code>residual_capacity</code> can&#39;t be changed either while they do not affect <code>dijkstra_shortest_paths()</code> at all."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 23, "user_id": 9230019, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-670JfpMC8wY/AAAAAAAAAAI/AAAAAAAAABU/FcH5h4QKPuA/photo.jpg?sz=128", "display_name": "\u4e95\u4e0a\u7531\u4e00", "link": "https://stackoverflow.com/users/9230019/%e4%ba%95%e4%b8%8a%e7%94%b1%e4%b8%80"}, "edited": false, "score": 0, "creation_date": 1516242136, "post_id": 48305391, "comment_id": 83611600, "body": "That&#39;s not true is it, you can change whatever you want outside the parameter passed to the visitor, as you pointed out (and I responded to that). It&#39;s just a cautionary note. If you know what you&#39;re doing (i.e. read the actual algorithm pseudo code in the docs) you&#39;re free to do whatever convenes you. That&#39;s the spirit of C++. No barriers."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 23, "user_id": 9230019, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-670JfpMC8wY/AAAAAAAAAAI/AAAAAAAAABU/FcH5h4QKPuA/photo.jpg?sz=128", "display_name": "\u4e95\u4e0a\u7531\u4e00", "link": "https://stackoverflow.com/users/9230019/%e4%ba%95%e4%b8%8a%e7%94%b1%e4%b8%80"}, "edited": false, "score": 0, "creation_date": 1516242223, "post_id": 48305391, "comment_id": 83611623, "body": "In my answer I specifically talk about data &quot;the algorithm <i>uses</i> (depends on)&quot;. So not about <code>residual_capacity</code>. There may be many ways in which it is safe to change weights (e.g. before first use, or only increasing in weight, from what I remember the algorithm doing)."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 23, "user_id": 9230019, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-670JfpMC8wY/AAAAAAAAAAI/AAAAAAAAABU/FcH5h4QKPuA/photo.jpg?sz=128", "display_name": "\u4e95\u4e0a\u7531\u4e00", "link": "https://stackoverflow.com/users/9230019/%e4%ba%95%e4%b8%8a%e7%94%b1%e4%b8%80"}, "edited": false, "score": 0, "creation_date": 1516242341, "post_id": 48305391, "comment_id": 83611652, "body": "Finally, you don&#39;t need to run the algorithm twice, since in such a weird situation you apparently don&#39;t want the algorithm to run, but you just want to update weights. That doesn&#39;t need to be done in the algorithm."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 23, "user_id": 9230019, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-670JfpMC8wY/AAAAAAAAAAI/AAAAAAAAABU/FcH5h4QKPuA/photo.jpg?sz=128", "display_name": "\u4e95\u4e0a\u7531\u4e00", "link": "https://stackoverflow.com/users/9230019/%e4%ba%95%e4%b8%8a%e7%94%b1%e4%b8%80"}, "edited": false, "score": 1, "creation_date": 1516242526, "post_id": 48305391, "comment_id": 83611693, "body": "Now, <b><i>summarizing</i></b> are you simply saying your weight is a function and it is too expensive to calculate ahead of time for any nodes (that might not be visited)? Because in that case, why not <b>ask</b> that, because the answer is <code>make_transform_value_property_map</code> (see e.g. <a href=\"https://stackoverflow.com/questions/33103659/weight-map-as-function-in-boost-graph-dijkstra-algorithm/33104513#33104513\">Weight map as a function in Boost Graph</a> and <a href=\"https://stackoverflow.com/search?q=user%3A85371+make_transform_value_property_map\">many others</a>)"}, {"owner": {"reputation": 23, "user_id": 9230019, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-670JfpMC8wY/AAAAAAAAAAI/AAAAAAAAABU/FcH5h4QKPuA/photo.jpg?sz=128", "display_name": "\u4e95\u4e0a\u7531\u4e00", "link": "https://stackoverflow.com/users/9230019/%e4%ba%95%e4%b8%8a%e7%94%b1%e4%b8%80"}, "edited": false, "score": 1, "creation_date": 1516261727, "post_id": 48305391, "comment_id": 83617706, "body": "Yes, you are right, my <code>weight</code> is a function. <b>Weight map as a function in Boost Graph</b> is exactly what I want. Thank you."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 23, "user_id": 9230019, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-670JfpMC8wY/AAAAAAAAAAI/AAAAAAAAABU/FcH5h4QKPuA/photo.jpg?sz=128", "display_name": "\u4e95\u4e0a\u7531\u4e00", "link": "https://stackoverflow.com/users/9230019/%e4%ba%95%e4%b8%8a%e7%94%b1%e4%b8%80"}, "edited": false, "score": 0, "creation_date": 1516263656, "post_id": 48305391, "comment_id": 83618659, "body": "@\u4e95\u4e0a\u7531\u4e00 Cheers and welcome to StackOverflow. Please consider <a href=\"https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\">upvoting helpful answers</a> :)"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 2, "last_activity_date": 1516205321, "creation_date": 1516205321, "answer_id": 48305391, "question_id": 48303546, "link": "https://stackoverflow.com/questions/48303546/why-edge-properties-cant-be-changed-within-visitor-in-bgl/48305391#48305391", "title": "Why edge properties can&#39;t be changed within visitor in BGL?", "body": "<blockquote>\n  <p>Finally I solved it by storing a Graph pointer in the visitor.</p>\n</blockquote>\n\n<p>Note though that presumably you pass the visitor to an algorithm. That algorithm has its own invariants. If you change the weights, e.g. <code>dijkstra_shortest_paths</code> may not terminate at all, or yield incorrect (suboptimal) results.</p>\n\n<p>If you want to change the weight according to the results of a previous algorithm and the algorithm <em>uses</em> (depends on) the weights, the safest course of action would be to store the \"updated\" weights in a separate map, and appy the changes afterwards.</p>\n"}], "owner": {"reputation": 23, "user_id": 9230019, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-670JfpMC8wY/AAAAAAAAAAI/AAAAAAAAABU/FcH5h4QKPuA/photo.jpg?sz=128", "display_name": "\u4e95\u4e0a\u7531\u4e00", "link": "https://stackoverflow.com/users/9230019/%e4%ba%95%e4%b8%8a%e7%94%b1%e4%b8%80"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 1, "accepted_answer_id": 48305391, "answer_count": 2, "score": 1, "last_activity_date": 1516205321, "creation_date": 1516199538, "last_edit_date": 1516201289, "question_id": 48303546, "link": "https://stackoverflow.com/questions/48303546/why-edge-properties-cant-be-changed-within-visitor-in-bgl", "title": "Why edge properties can&#39;t be changed within visitor in BGL?", "body": "<p>I want to change edge weight when examine an edge, but it tells</p>\n\n<pre><code>error: assignment of member \u2018EdgeProperty::weight\u2019 in read-only object g[e].weight = 1/g[e].residual_capacity;\n</code></pre>\n\n<p>If there is a way to change edge properties within a function of a custom visitor? Thanks.</p>\n\n<pre><code>struct EdgeProperty{\nfloat weight;\nfloat capacity;\nfloat residual_capacity;\n};\nclass custom_dijkstra_visitor : public boost::default_dijkstra_visitor\n{\npublic:\n    template &lt; typename Edge, typename Graph &gt;\n    void examine_edge(Edge e, Graph const &amp; g)\n    {\n        g[e].weight = 1/g[e].residual_capacity;\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "xml", "boost", "boost-propertytree"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1516199793, "post_id": 48303527, "comment_id": 83591875, "body": "<code>pt.get_child(&quot;companies&quot;)</code> looks suspicious to me. Shouldn&#39;t it be <code>v.second.get_child(&quot;companies&quot;)</code>"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1516214904, "post_id": 48303527, "comment_id": 83601300, "body": "You even didn&#39;t mention what boost library you&#39;re using."}, {"owner": {"reputation": 161, "user_id": 6699849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7f11ad557e8bd54b062c1eba3f4410cb?s=128&d=identicon&r=PG&f=1", "display_name": "coder0007", "link": "https://stackoverflow.com/users/6699849/coder0007"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1516254717, "post_id": 48303527, "comment_id": 83614909, "body": "@drescherjm : I made that change. It is now showing the same error for the next node i.e. &quot;company&quot;. Is that the wrong way to access that node?"}, {"owner": {"reputation": 161, "user_id": 6699849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7f11ad557e8bd54b062c1eba3f4410cb?s=128&d=identicon&r=PG&f=1", "display_name": "coder0007", "link": "https://stackoverflow.com/users/6699849/coder0007"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1516255868, "post_id": 48303527, "comment_id": 83615240, "body": "@drescherjm : Got it! I needed to write v2.first == &quot;companies&quot; ."}], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 6699849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7f11ad557e8bd54b062c1eba3f4410cb?s=128&d=identicon&r=PG&f=1", "display_name": "coder0007", "link": "https://stackoverflow.com/users/6699849/coder0007"}, "edited": false, "score": 0, "creation_date": 1516253828, "post_id": 48308210, "comment_id": 83614641, "body": "I am compilation error :  In function \u2018bool read_companies(const ptree&amp;, companies_t&amp;)\u2019: error: expected unqualified-id before \u2018[\u2019 token      for (auto&amp; [name,child] : pt) expected \u2018;\u2019 before \u2018:\u2019 token And similarly for read_chocos function.   Also showing &quot;\u2018name\u2019 was not declared in this scope&quot; and &quot;\u2018child\u2019 was not declared in this scope&quot;"}, {"owner": {"reputation": 161, "user_id": 6699849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7f11ad557e8bd54b062c1eba3f4410cb?s=128&d=identicon&r=PG&f=1", "display_name": "coder0007", "link": "https://stackoverflow.com/users/6699849/coder0007"}, "edited": false, "score": 0, "creation_date": 1516254166, "post_id": 48308210, "comment_id": 83614737, "body": "I have checked and I am not missing any semicolons or other needed tokens anywhere."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 0, "last_activity_date": 1516215791, "creation_date": 1516215791, "answer_id": 48308210, "question_id": 48303527, "link": "https://stackoverflow.com/questions/48303527/parsing-xml-using-boost-c-for-nested-tags/48308210#48308210", "title": "Parsing xml using Boost c++ for nested tags", "body": "<p>Structuring your code helps a lot in keeping the complexity down:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/4261d685bae8520b\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/property_tree/xml_parser.hpp&gt;\n\nstd::string const sample = R\"(&lt;root&gt; \n  &lt;chocos&gt; \n    &lt;choco&gt;\n      &lt;color&gt;1&lt;/color&gt;\n    &lt;companies&gt;\n      &lt;comapany&gt;10&lt;/company&gt;\n      &lt;comapany&gt;11&lt;/company&gt;\n    &lt;/companies&gt;\n  &lt;/choco&gt;\n  &lt;choco&gt;\n    &lt;color&gt;2&lt;/color&gt;\n    &lt;companies&gt;\n      &lt;comapany&gt;12&lt;/company&gt;\n      &lt;comapany&gt;13&lt;/company&gt;\n    &lt;/companies&gt;\n   &lt;/choco&gt;\n &lt;/chocos&gt;\n&lt;/root&gt;)\";\n\nusing boost::property_tree::ptree;\n\nusing companies_t = std::vector&lt;int&gt;;\n\nstruct choco_info {\n   int color;\n   companies_t companies;\n};\n\nusing chocos_t = std::vector&lt;choco_info&gt;;\n\nstruct root_info {\n    //some members\n    chocos_t chocos;\n};\n\nbool read_companies(ptree const&amp; pt, companies_t&amp; into) {\n    for (auto&amp; [name,child] : pt)\n        if (name == \"comapany\") // FIXME\n            into.push_back(child.get_value&lt;int&gt;());\n        else \n            return false;\n    return true;\n}\nbool read_chocos(ptree const&amp; pt, chocos_t&amp; into) {\n    for (auto&amp; [name,child] : pt) {\n        if (name == \"choco\") {\n            choco_info ci;\n            ci.color = child.get(\"color\", -1);\n            if (!read_companies(child.get_child(\"companies\"), ci.companies))\n                return false;\n\n            into.push_back(std::move(ci));\n        } else {\n            return false;\n        }\n    }\n    return true;\n}\n\n#include &lt;iostream&gt;\n\nint main() {\n    ptree pt;\n    {\n        std::istringstream iss(sample);\n        read_xml(iss, pt);\n    }\n\n    root_info result;\n\n    bool ok = true;\n    try {\n        ok = read_chocos(pt.get_child(\"root.chocos\"), result.chocos);\n    } catch(std::exception const&amp; e) {\n        std::cout &lt;&lt; \"Exception: \" &lt;&lt; e.what() &lt;&lt; \"\\n\";\n        ok = false;\n    }\n\n    if (ok) {\n        std::cout &lt;&lt; \"Parsed:\\n\";\n        for (auto&amp; choco : result.chocos) {\n            std::cout &lt;&lt; \" - color \" &lt;&lt; choco.color &lt;&lt; \"\\n\";\n            for (int company : choco.companies)\n                std::cout &lt;&lt; \"   * company \" &lt;&lt; company &lt;&lt; \"\\n\";\n        }\n    } else {\n        std::cout &lt;&lt; \"Error in input\\n\";\n    }\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>Parsed:\n - color 1\n   * company 10\n   * company 11\n - color 2\n   * company 12\n   * company 13\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 6699849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7f11ad557e8bd54b062c1eba3f4410cb?s=128&d=identicon&r=PG&f=1", "display_name": "coder0007", "link": "https://stackoverflow.com/users/6699849/coder0007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 329, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1516215858, "creation_date": 1516199489, "last_edit_date": 1516215858, "question_id": 48303527, "link": "https://stackoverflow.com/questions/48303527/parsing-xml-using-boost-c-for-nested-tags", "title": "Parsing xml using Boost c++ for nested tags", "body": "<p>I am trying to parse an xml file using boost which is of the following structure:</p>\n\n<pre><code>&lt;root&gt; \n  &lt;chocos&gt; \n    &lt;choco&gt;\n      &lt;color&gt;1&lt;/color&gt;\n    &lt;companies&gt;\n      &lt;comapany&gt;10&lt;/company&gt;\n      &lt;comapany&gt;11&lt;/company&gt;\n    &lt;/companies&gt;\n  &lt;/choco&gt;\n  &lt;choco&gt;\n    &lt;color&gt;2&lt;/color&gt;\n    &lt;companies&gt;\n      &lt;comapany&gt;12&lt;/company&gt;\n      &lt;comapany&gt;13&lt;/company&gt;\n    &lt;/companies&gt;\n   &lt;/choco&gt;\n &lt;/chocos&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>I need to store it in the following class:</p>\n\n<pre><code>class root_info\n{\n   public:\n      //some members\n      std::vector&lt;choco_info&gt; chocos;\n}\n\nclass choco_info\n{\n   int color;\n   int companies[100];\n}\n</code></pre>\n\n<p>I have written the following code, but it shows error :</p>\n\n<blockquote>\n  <p>No such node (companies)Failed to read xml file></p>\n</blockquote>\n\n<p>Code: </p>\n\n<pre><code>  for(const auto&amp; v : pt.get_child(\"root.chocos\"))\n  {\n     choco_info choco;\n     if(v.first == \"choco\")\n     {\n        choco.color = v.second.get&lt;unsigned&gt;(\"color\");\n        int i = 0;\n        for(const auto&amp; v2 : pt.get_child(\"companies\"))\n        {\n           if( v2.first == \"company\")\n           {\n              choco.company[i] = v2.second.get&lt;unsigned&gt;(\"company\");\n              i++;\n           }\n        }\n     }\n     root.chocos.push_back(choco);\n  }\n</code></pre>\n\n<p>The <strong>xml cannot be changed</strong> as it has been given to me. The main problem lies in how to <strong>iterate</strong> through \"chocos\" as well as \"companies\"</p>\n"}, {"tags": ["c++", "macos"], "comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1516199793, "post_id": 48303507, "comment_id": 83591871, "body": "You really ought to avoid <code>using namespace std</code> - it is a bad habit to get into, and <a href=\"/q/1452721\">can silently change the meaning of your program</a> when you&#39;re not expecting it.  Get used to using the namespace prefix (<code>std</code> is intentionally very short), or importing <i>just the names you need</i> into the <i>smallest reasonable scope</i>."}, {"owner": {"reputation": 1, "user_id": 8590490, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-79SI1JBttHM/AAAAAAAAAAI/AAAAAAAAAD8/Pya7lYf-Tqw/photo.jpg?sz=128", "display_name": "ADARSH A K", "link": "https://stackoverflow.com/users/8590490/adarsh-a-k"}, "edited": false, "score": 0, "creation_date": 1516199818, "post_id": 48303507, "comment_id": 83591887, "body": "sorry for that but even i correncted that the error was same"}], "answers": [{"tags": [], "owner": {"reputation": 18176, "user_id": 48660, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NJ1Lx.jpg?s=128&g=1", "display_name": "pmdj", "link": "https://stackoverflow.com/users/48660/pmdj"}, "is_accepted": false, "score": 3, "last_activity_date": 1516199934, "creation_date": 1516199934, "answer_id": 48303660, "question_id": 48303507, "link": "https://stackoverflow.com/questions/48303507/how-to-compile-c-program-in-mac-terminal/48303660#48303660", "title": "how to compile c++ program in mac terminal", "body": "<p>It sounds like you don't have the command line developer tools installed. Run this command from Terminal once:</p>\n\n<pre><code>xcode-select --install\n</code></pre>\n\n<p>This will bring up the download &amp; installation UI. Follow this through to the end. (It may take a while depending on the speed of your internet connection.)</p>\n\n<p>From then on compiling should work.</p>\n"}], "owner": {"reputation": 1, "user_id": 8590490, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-79SI1JBttHM/AAAAAAAAAAI/AAAAAAAAAD8/Pya7lYf-Tqw/photo.jpg?sz=128", "display_name": "ADARSH A K", "link": "https://stackoverflow.com/users/8590490/adarsh-a-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4194, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516199934, "creation_date": 1516199441, "last_edit_date": 1516199743, "question_id": 48303507, "link": "https://stackoverflow.com/questions/48303507/how-to-compile-c-program-in-mac-terminal", "title": "how to compile c++ program in mac terminal", "body": "<p>i wrote a program in my mac using sublime text as the plateform..</p>\n\n<pre><code>    #include&lt;iostream&gt;\n    using namespace std;\n    int main()\n        {\n        cout&lt;&lt;\"HELLOW WORLD\";\n        return 0;\n        }\n</code></pre>\n\n<p>this was my program.. \ni saved it in desktop as hellow.cpp</p>\n\n<p>while compiling on mac terminal as g++ hellow.cpp, i found an error </p>\n\n<pre><code>adarshs-MacBook-Air:Desktop adarshak$ g++ hellow.cpp\nxcrun: error: invalid active developer path \n(/Library/Developer/CommandLineTools), missing xcrun at: \n/Library/Developer/CommandLineTools/usr/bin/xcrun\n</code></pre>\n\n<p>anyone plese help me to find out the error</p>\n"}, {"tags": ["c++", "visual-studio", "libsvm"], "comments": [{"owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 0, "creation_date": 1516203056, "post_id": 48303457, "comment_id": 83594165, "body": "I&#39;m guessing the ninja make generated some dlls? you need to include those in your VS project."}, {"owner": {"reputation": 2107, "user_id": 1420429, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/654a205004c867c4d53cd7a9f2520800?s=128&d=identicon&r=PG", "display_name": "harsh", "link": "https://stackoverflow.com/users/1420429/harsh"}, "reply_to_user": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 0, "creation_date": 1516281079, "post_id": 48303457, "comment_id": 83629395, "body": "@Aram no dlls were created, only some .obj files were created. What should I do with them?"}, {"owner": {"reputation": 2107, "user_id": 1420429, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/654a205004c867c4d53cd7a9f2520800?s=128&d=identicon&r=PG", "display_name": "harsh", "link": "https://stackoverflow.com/users/1420429/harsh"}, "reply_to_user": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 0, "creation_date": 1516288895, "post_id": 48303457, "comment_id": 83634629, "body": "Yes thank you I got it now. libsvm dll is create now. How do I use it in the c++ code?"}, {"owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 0, "creation_date": 1516288961, "post_id": 48303457, "comment_id": 83634674, "body": "Google on how to include a library in visual studio.."}, {"owner": {"reputation": 2107, "user_id": 1420429, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/654a205004c867c4d53cd7a9f2520800?s=128&d=identicon&r=PG", "display_name": "harsh", "link": "https://stackoverflow.com/users/1420429/harsh"}, "reply_to_user": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 0, "creation_date": 1516289022, "post_id": 48303457, "comment_id": 83634711, "body": "I included it already. I want to know how I create the model and use it using  svm-train and svm-predict."}, {"owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 0, "creation_date": 1516289160, "post_id": 48303457, "comment_id": 83634806, "body": "I have no idea m8, I&#39;m guessing the library came with an example or something."}, {"owner": {"reputation": 2107, "user_id": 1420429, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/654a205004c867c4d53cd7a9f2520800?s=128&d=identicon&r=PG", "display_name": "harsh", "link": "https://stackoverflow.com/users/1420429/harsh"}, "reply_to_user": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 0, "creation_date": 1516289221, "post_id": 48303457, "comment_id": 83634848, "body": "The readme and the FAQ are not clear. No proper example is there."}, {"owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 0, "creation_date": 1516289875, "post_id": 48303457, "comment_id": 83635280, "body": "If you read the readme carefully.. svm-toy is what you want."}, {"owner": {"reputation": 2107, "user_id": 1420429, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/654a205004c867c4d53cd7a9f2520800?s=128&d=identicon&r=PG", "display_name": "harsh", "link": "https://stackoverflow.com/users/1420429/harsh"}, "reply_to_user": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 0, "creation_date": 1516318114, "post_id": 48303457, "comment_id": 83649646, "body": "Thank you a lot @Aram. I am going through it now. Thank you for your time. If you add all that as answer I can mark it correct. :-)"}], "answers": [{"tags": [], "owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "is_accepted": true, "score": 1, "last_activity_date": 1516321099, "creation_date": 1516321099, "answer_id": 48332372, "question_id": 48303457, "link": "https://stackoverflow.com/questions/48303457/work-with-libsvm-in-c/48332372#48332372", "title": "Work with libsvm in C++", "body": "<p>I've reread your question, clean all just seems to clean your build files, effectively if you read the guide correctly it says that after cleaning you should run </p>\n\n<pre><code>\"nmake -f Makefile.win lib\"\n</code></pre>\n"}], "owner": {"reputation": 2107, "user_id": 1420429, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/654a205004c867c4d53cd7a9f2520800?s=128&d=identicon&r=PG", "display_name": "harsh", "link": "https://stackoverflow.com/users/1420429/harsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 0, "accepted_answer_id": 48332372, "answer_count": 1, "score": 1, "last_activity_date": 1516321099, "creation_date": 1516199278, "question_id": 48303457, "link": "https://stackoverflow.com/questions/48303457/work-with-libsvm-in-c", "title": "Work with libsvm in C++", "body": "<p>I followed the steps in the readme of Libsvm to build on windows. I did the following successfully. </p>\n\n<pre><code>\"\"C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin\\amd64\\vcvars64.bat\"\"\nnmake -f Makefile.win clean all\n</code></pre>\n\n<p>But now how do I use libsvm now in Visual Studio. I need to integrate libsvm to a Visual Studio project and call svm-train and svm-predict from C++ code in Visual Studio. As the first step I would like to write a simple C++ program that can call svm-train and svm-predict. But I am lost after doing the above two steps as the documentation (readme and FAQ) are unclear afterwards. Can someone please help? </p>\n"}, {"tags": ["c++", "graphics", "raytracing"], "comments": [{"owner": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "edited": false, "score": 0, "creation_date": 1516201281, "post_id": 48303418, "comment_id": 83592853, "body": "There is too little information to understand what is your problem. What are you trying to implement, Disney &quot;principled&quot; BSDF or something else? What is this library you are using, what is this <code>Spectrum</code> type, a float or double or something else? In any case, you can also try posting this question in the <a href=\"https://computergraphics.stackexchange.com/\">Computer Graphics (beta) Stack Exchange</a> site."}, {"owner": {"reputation": 21, "user_id": 7628839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8197f79067de569b2f03e1d5a63b8577?s=128&d=identicon&r=PG&f=1", "display_name": "bin guo", "link": "https://stackoverflow.com/users/7628839/bin-guo"}, "reply_to_user": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "edited": false, "score": 0, "creation_date": 1516248062, "post_id": 48303418, "comment_id": 83612998, "body": "I posted this quesition to <a href=\"https://computergraphics.stackexchange.com/questions/6135/how-can-i-implement-this-bsdf\" title=\"how can i implement this bsdf\">computergraphics.stackexchange.com/questions/6135/&hellip;</a> ."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1516264523, "post_id": 48303418, "comment_id": 83619132, "body": "Scattering coefficients are either measured or computed by probabilistic math. Google some articles about <b>Atmospheric scattering (MIE Rayleight)</b> there you might find the equations you are looking for. Also reflectance is based on <b>Fresnells</b> so google that too. Here some stuff that might interests you: <a href=\"https://stackoverflow.com/a/29575362/2521214\">multi band rendering</a> , <a href=\"https://stackoverflow.com/a/45140313/2521214\">GLSL mesh back raytracer</a> , <a href=\"https://stackoverflow.com/a/48092685/2521214\">GLSL volimetric back raytracer</a>"}], "owner": {"reputation": 21, "user_id": 7628839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8197f79067de569b2f03e1d5a63b8577?s=128&d=identicon&r=PG&f=1", "display_name": "bin guo", "link": "https://stackoverflow.com/users/7628839/bin-guo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 224, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1584071429, "creation_date": 1516199169, "last_edit_date": 1584071429, "question_id": 48303418, "link": "https://stackoverflow.com/questions/48303418/what-is-the-bsdf-of-the-glass", "title": "What is the BSDF of the glass?", "body": "<p>I am writing a path tracer. And I am ready to add more materials.I added a mirror like this : `</p>\n\n<pre><code>Spectrum MirrorBSDF::f(const Vector3D&amp; wo, const Vector3D&amp; wi) {\n        return reflectance  * (1.0 / abs_cos_theta(wo));\n    }\n</code></pre>\n\n<p>`\nBut I do not know how to evaluate the BSDF of the glass material.Someone know? \nThanks.</p>\n\n<p>I implementd it. but something is error.My render image is this:\n<a href=\"https://i.stack.imgur.com/lFYdU.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lFYdU.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>.Why have some dark color around sphere?</p>\n"}, {"tags": ["c++", "pointers", "reference", "iterator", "auto"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1516199144, "post_id": 48303351, "comment_id": 83591420, "body": "You can probably write and adaptor but I doubt that would worse the effort"}, {"owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "edited": false, "score": 0, "creation_date": 1516199362, "post_id": 48303351, "comment_id": 83591590, "body": "you may also take a look at the <a href=\"http://www.boost.org/doc/libs/1_66_0/libs/ptr_container/doc/ptr_container.html\" rel=\"nofollow noreferrer\">boost pointer container library</a> ..."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1516199748, "post_id": 48303351, "comment_id": 83591838, "body": "Out of curiosity. What&#39;s so bad about <code>item-&gt;member</code>?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1516199870, "post_id": 48303351, "comment_id": 83591924, "body": "<code>It would just be slightly more convenient to work with references to the list&#39;s contents&#39; values than with pointers to them.</code> to be pedantic, technically the pointers are the values of the lists contents."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1516199872, "post_id": 48303351, "comment_id": 83591927, "body": "@StoryTeller I think OP did not formulate question properly. It could be usefull when container holds pointers to functors for example. So you do not have to write <code>(*pitem)();</code>"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1516199943, "post_id": 48303351, "comment_id": 83591976, "body": "@Slava - You mean function like objects, I presume? A bare function pointer doesn&#39;t require that."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1516199978, "post_id": 48303351, "comment_id": 83591993, "body": "@StoryTeller did I not say &quot;functor&quot;? I think in C++ that means function objects, but I could be wrong"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1516200014, "post_id": 48303351, "comment_id": 83592013, "body": "@Slava - Could have sworn it was &quot;functions&quot;. NVM"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1516203142, "post_id": 48303351, "comment_id": 83594228, "body": "Answer updated."}], "answers": [{"comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1516199313, "post_id": 48303422, "comment_id": 83591552, "body": "@slava Well, not with the provided syntactic sugar that for-range loop are. you&#39;ll need to write your own iterator, or an adapter of standard iterators. But, yeah, &quot;cannot&quot; is not 100% right."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1516199334, "post_id": 48303422, "comment_id": 83591568, "body": "&quot;cannot&quot; may not be 100% true, but &quot;cannot without a lot more code than this&quot; sure is."}, {"owner": {"reputation": 2853, "user_id": 626796, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4b13deba744c5599a43e06f52af13366?s=128&d=identicon&r=PG", "display_name": "Tharwen", "link": "https://stackoverflow.com/users/626796/tharwen"}, "edited": false, "score": 0, "creation_date": 1516199614, "post_id": 48303422, "comment_id": 83591737, "body": "If there&#39;s a simple language feature to do exactly what I&#39;m trying to do I&#39;d much rather know about it and make use of it than ignore it and write something longer. If there isn&#39;t then that&#39;s not a huge loss. Your version is perfectly adequate."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1516199618, "post_id": 48303422, "comment_id": 83591740, "body": "@YSC right, so please change your phrasing (you can but effect would not worse the effort or something like that)"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1516200100, "post_id": 48303422, "comment_id": 83592066, "body": "The issue is more with the wording of the question. &#39;Something like this&#39; is subjective and depending on interpretation of the question, the current wording of the answer can be 100% correct or less."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1516204793, "post_id": 48303422, "comment_id": 83595379, "body": "@YSC why what, sorry?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1516205029, "post_id": 48303422, "comment_id": 83595550, "body": "@Slava why did I spent the time to write that piece of code I&#39;m clearly not proud of... Sorry the question was more intended to me than you."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1516205095, "post_id": 48303422, "comment_id": 83595593, "body": "@YSC I definetly did not ask for that, all I wanted just woring &quot;yes it is possible, but do not do it&quot;"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1516205186, "post_id": 48303422, "comment_id": 83595657, "body": "@Slava yeah I know! Sometimes I&#39;m so obsessed with useless things... This is on me, not on you ;)"}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": true, "score": 5, "last_activity_date": 1516203048, "last_edit_date": 1516203048, "creation_date": 1516199182, "answer_id": 48303422, "question_id": 48303351, "link": "https://stackoverflow.com/questions/48303351/is-there-a-way-to-use-a-range-based-iterator-to-iterate-over-references-to-the-v/48303422#48303422", "title": "Is there a way to use a range-based iterator to iterate over references to the values of a list of pointers?", "body": "<p>No you cannot. But why would you?</p>\n\n<pre><code>for (auto pitem : list)\n{\n    auto&amp; item = *pitem;\n    item.member = something;   // no dereferencing here\n}\n</code></pre>\n\n<p>Unless you're willing to write tedious code like:</p>\n\n<pre><code>template&lt;class TPointer&gt;\nclass Adaptor\n{\n    struct Iterator\n    {\n        TPointer* _p;\n        Iterator(TPointer* p) : _p(p) {}\n\n        typename std::remove_pointer&lt;TPointer&gt;::type&amp; operator*() { return **_p; }\n        Iterator&amp; operator++() { ++_p; return *this; }\n        friend Iterator operator+(const Iterator&amp; lhs, size_t s) { return lhs._p + s; }\n        friend bool operator!=(const Iterator&amp; lhs, const Iterator&amp; rhs) { return lhs._p != rhs._p; }\n    };\n\n    std::vector&lt;TPointer&gt;&amp; _v;\npublic:\n    Adaptor(std::vector&lt;TPointer&gt;&amp; v) : _v(v) {}\n    Iterator begin() { return &amp;_v[0]; }\n    Iterator end()   { return begin() + _v.size(); }\n};\n</code></pre>\n\n<p>Only then could you write:</p>\n\n<pre><code>struct SomeData { int n; } s1{2}, s2{4};\nstd::vector&lt;SomeData*&gt; data{&amp;s1, &amp;s2};\n\nfor (auto&amp; item : Adaptor{data}) {\n    std::cout &lt;&lt; item.n &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/4313ad162d68aad0\" rel=\"nofollow noreferrer\">live demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 2853, "user_id": 626796, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4b13deba744c5599a43e06f52af13366?s=128&d=identicon&r=PG", "display_name": "Tharwen", "link": "https://stackoverflow.com/users/626796/tharwen"}, "edited": false, "score": 1, "creation_date": 1516215931, "post_id": 48304476, "comment_id": 83601878, "body": "Is there anything boost doesn&#39;t have a solution for?"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 4, "last_activity_date": 1516203752, "last_edit_date": 1516203752, "creation_date": 1516202550, "answer_id": 48304476, "question_id": 48303351, "link": "https://stackoverflow.com/questions/48303351/is-there-a-way-to-use-a-range-based-iterator-to-iterate-over-references-to-the-v/48304476#48304476", "title": "Is there a way to use a range-based iterator to iterate over references to the values of a list of pointers?", "body": "<p>Boost has a range adaptor for this: <a href=\"http://www.boost.org/doc/libs/1_66_0/libs/range/doc/html/range/reference/adaptors/reference/indirected.html\" rel=\"nofollow noreferrer\">http://www.boost.org/doc/libs/1_66_0/libs/range/doc/html/range/reference/adaptors/reference/indirected.html</a></p>\n\n<pre><code>for (auto&amp; item : list | boost::adaptors::indirected) {\n    // do whatever with your reference\n}\n</code></pre>\n\n<hr>\n\n<p>Another alternative is iterator adaptors which are more verbose for this case: <a href=\"http://www.boost.org/doc/libs/1_66_0/libs/iterator/doc/indirect_iterator.html\" rel=\"nofollow noreferrer\">http://www.boost.org/doc/libs/1_66_0/libs/iterator/doc/indirect_iterator.html</a></p>\n\n<pre><code>auto beg = boost::make_indirect_iterator(std::begin(list));\nauto end = boost::make_indirect_iterator(std::end(list));\nfor (auto&amp; item : boost::make_iterator_range(beg, end)) {\n    // do whatever with your reference\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1516207001, "post_id": 48305402, "comment_id": 83596805, "body": "@Snps the previous standard to be exact. C++17 was published in December."}], "tags": [], "owner": {"reputation": 13376, "user_id": 873025, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/d8rRW.jpg?s=128&g=1", "display_name": "Snps", "link": "https://stackoverflow.com/users/873025/snps"}, "is_accepted": false, "score": 4, "last_activity_date": 1516207201, "last_edit_date": 1516207201, "creation_date": 1516205351, "answer_id": 48305402, "question_id": 48303351, "link": "https://stackoverflow.com/questions/48303351/is-there-a-way-to-use-a-range-based-iterator-to-iterate-over-references-to-the-v/48305402#48305402", "title": "Is there a way to use a range-based iterator to iterate over references to the values of a list of pointers?", "body": "<p>Another variant using nested lambdas.</p>\n\n<pre><code>std::for_each(std::begin(list), std::end(list), [] (auto p) {[item = *p] {\n    item.member = something;\n}();});\n</code></pre>\n"}], "owner": {"reputation": 2853, "user_id": 626796, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4b13deba744c5599a43e06f52af13366?s=128&d=identicon&r=PG", "display_name": "Tharwen", "link": "https://stackoverflow.com/users/626796/tharwen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 48303422, "answer_count": 3, "score": 2, "last_activity_date": 1516207201, "creation_date": 1516198994, "question_id": 48303351, "link": "https://stackoverflow.com/questions/48303351/is-there-a-way-to-use-a-range-based-iterator-to-iterate-over-references-to-the-v", "title": "Is there a way to use a range-based iterator to iterate over references to the values of a list of pointers?", "body": "<p>So if I have the following vector with several pointers to ints in it:</p>\n\n<pre><code>std::vector&lt;MyClass*&gt; list;\n</code></pre>\n\n<p>Can I later iterate over it using something like:</p>\n\n<pre><code>for (auto &amp; (*item) : list)\n{\n    item.member = something;   //Goal is to require no dereferencing here\n}\n</code></pre>\n\n<p>It would just be slightly more convenient to work with references to the list's contents' values than with pointers to them.</p>\n"}, {"tags": ["c#", "c++", "c", "windows", "winapi"], "comments": [{"owner": {"reputation": 2565, "user_id": 4781312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lDEcJ.jpg?s=128&g=1", "display_name": "Asesh", "link": "https://stackoverflow.com/users/4781312/asesh"}, "edited": false, "score": 0, "creation_date": 1516198956, "post_id": 48303227, "comment_id": 83591278, "body": "Use this API: <code>GetGUIThreadInfo</code>: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms633506(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 11092, "user_id": 982149, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LdDoZ.png?s=128&g=1", "display_name": "Fildor", "link": "https://stackoverflow.com/users/982149/fildor"}, "edited": false, "score": 1, "creation_date": 1516199312, "post_id": 48303227, "comment_id": 83591551, "body": "x-y ... Why would you ever need that handle?"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1516199512, "post_id": 48303227, "comment_id": 83591677, "body": "Sounds like an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY problem</a>. What are you actually trying to achieve?"}, {"owner": {"reputation": 21, "user_id": 9229759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/809a2dd71d7bdb8a34da7e1ae2c2c06f?s=128&d=identicon&r=PG&f=1", "display_name": "Zbigniew R\u0119bacz", "link": "https://stackoverflow.com/users/9229759/zbigniew-r%c4%99bacz"}, "edited": false, "score": 1, "creation_date": 1516199684, "post_id": 48303227, "comment_id": 83591790, "body": "Currently I am working on screen sharing technology and I need to hide the content of that Window while sending the desktop content to other users. This is potential security issue, because we are leaking sensitive data such as private messages etc."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1516218633, "post_id": 48303227, "comment_id": 83603296, "body": "You could try <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ee684009(v=vs.85).aspx\" rel=\"nofollow noreferrer\">UI automation</a>, it might give you a way to find the window without relying on localized strings. Use the Inspect tool to check which information you get using UI automation."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1516243245, "post_id": 48303227, "comment_id": 83611853, "body": "&quot;<i>the only parameter I can base on is window name</i>&quot; - did you try looking at the window <b>class name</b> yet?"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 2, "creation_date": 1516250537, "post_id": 48303227, "comment_id": 83613616, "body": "This is not the only place where information may leaks. I think you are chasing a ghost here. Once the user shares the screen then they are making an explicit decision to let somebody else see what appears there. You can&#39;t win this battle."}, {"owner": {"reputation": 21, "user_id": 9229759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/809a2dd71d7bdb8a34da7e1ae2c2c06f?s=128&d=identicon&r=PG&f=1", "display_name": "Zbigniew R\u0119bacz", "link": "https://stackoverflow.com/users/9229759/zbigniew-r%c4%99bacz"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1516270723, "post_id": 48303227, "comment_id": 83623066, "body": "@zett42 I used <b>Spy++</b> tool to investigate the window hierarchy."}, {"owner": {"reputation": 21, "user_id": 9229759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/809a2dd71d7bdb8a34da7e1ae2c2c06f?s=128&d=identicon&r=PG&f=1", "display_name": "Zbigniew R\u0119bacz", "link": "https://stackoverflow.com/users/9229759/zbigniew-r%c4%99bacz"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1516271256, "post_id": 48303227, "comment_id": 83623427, "body": "@RemyLebeau The notification window has <b>Windows.UI.Core.CoreWindow</b> type. What is quite common in the window hierarchy and it can not be used as a a point of attachment. Moreover we can not base on the <b>Z</b> axis, because the window has got <b>TOPMOST</b> style. Moreover, the overall window style is not different than other windows."}, {"owner": {"reputation": 21, "user_id": 9229759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/809a2dd71d7bdb8a34da7e1ae2c2c06f?s=128&d=identicon&r=PG&f=1", "display_name": "Zbigniew R\u0119bacz", "link": "https://stackoverflow.com/users/9229759/zbigniew-r%c4%99bacz"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1516271453, "post_id": 48303227, "comment_id": 83623545, "body": "@David Hefferman we let user to share his/her application window. We do not want to leak any other unrelated applications. We do it quite well for UWP and regular window application, but in this certain scenario we don&#39;t have good solution."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1516273850, "post_id": 48303227, "comment_id": 83625060, "body": "OK, application sharing is different from screen sharing. So why don&#39;t you do that? Why are you sending anything other than the application window? You can capture that and nothing else. Trying to pick on one specific class of notification window is futile. What about other popup windows that aren&#39;t of this class? So your current approach is doomed to fail."}], "owner": {"reputation": 21, "user_id": 9229759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/809a2dd71d7bdb8a34da7e1ae2c2c06f?s=128&d=identicon&r=PG&f=1", "display_name": "Zbigniew R\u0119bacz", "link": "https://stackoverflow.com/users/9229759/zbigniew-r%c4%99bacz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 333, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1516198626, "creation_date": 1516198626, "question_id": 48303227, "link": "https://stackoverflow.com/questions/48303227/how-to-obtain-handle-to-notification-window-in-windows-10", "title": "How to obtain handle to notification window in Windows 10", "body": "<p>I would like to obtain handle to notification window (balloon) using WinAPI. How can I do it, correctly?</p>\n\n<p>Currently I found the solution by enumerating all windows using <strong>FindWindowEx</strong> function and then obtaining all windows that belongs to <strong>ShellExperienceHost.exe</strong> process. The operation is executed using <strong>GetWindowThreadProcessId</strong> API call.</p>\n\n<p>After that we are limited to five windows and one of that window is notification window. But, the only parameter I can base on is window name. In this certain case it is \"New notification\". However, for my native language it is \"Nowe powiadomienie\". The application I am currently working on, needs to support multiple language. So, creating set with the names is not good options. Because, the code will be difficult to maintenance and can be depend on further changes in Windows.</p>\n\n<p>I will be grateful for any help in this area.</p>\n"}, {"tags": ["c++", "ubuntu", "codelite"], "comments": [{"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 1, "creation_date": 1516198706, "post_id": 48303207, "comment_id": 83591115, "body": "<code>&#47;usr&#47;bin&#47;ld: cannot find -lgsl</code> Do you have all of the required libraries installed?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1516198859, "post_id": 48303207, "comment_id": 83591212, "body": "Please take some time to read <a href=\"http://stackoverflow.com/help\">the help pages</a>, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. Also please <a href=\"http://stackoverflow.com/tour\">take the tour</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>. Lastly please learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}], "owner": {"reputation": 1, "user_id": 9013906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3b66ef9bf056e0ddedbfbb9a0427943?s=128&d=identicon&r=PG&f=1", "display_name": "Chetan Kumar", "link": "https://stackoverflow.com/users/9013906/chetan-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1516264586, "creation_date": 1516198547, "last_edit_date": 1516264586, "question_id": 48303207, "link": "https://stackoverflow.com/questions/48303207/codelite-isn%c2%b4t-responding-when-i-run-it-after-build", "title": "Codelite isn&#180;t responding when I run it after build", "body": "<p>I am using Codelite for the first time. I can successfully build code, but Codelite remains unresponsive to the Run command (or to ctrl+F5). Below is the screenshot of the build log.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Spvmi.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>What could possibly be the cause of this issue? i can\u00b4t find any documentation on the subject.</p>\n\n<p>Codelite version : 11.0.8</p>\n\n<p>Best regards,\nChetan</p>\n"}, {"tags": ["c++", "arrays", "optimization", "boost", "compilation"], "comments": [{"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1516198710, "post_id": 48303172, "comment_id": 83591119, "body": "It&#39;s definitely not the C++ standard as the latter allows practically everything by the as-if rule."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1516199053, "post_id": 48303172, "comment_id": 83591356, "body": "they&#39;re not the same at all - one initialises the value, and then never changes it (even though it&#39;s not const; the other allocates the space, assigns a value (which wouldn&#39;t be doable if it were const).  If you give your compiler a chance and tell it they&#39;re const I&#39;m sure it&#39;ll optimise it away for you."}, {"owner": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "reply_to_user": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1516199057, "post_id": 48303172, "comment_id": 83591358, "body": "@bipll If so, then it is quite interesting why none of these three popular compilers (clang, gcc, msvc) actually apply the as-if rule in the described case in 2018."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 3, "creation_date": 1516199117, "post_id": 48303172, "comment_id": 83591399, "body": "<a href=\"https://godbolt.org/g/DDn9qm\" rel=\"nofollow noreferrer\">Godbolt link</a> to play with."}, {"owner": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "edited": false, "score": 0, "creation_date": 1516199437, "post_id": 48303172, "comment_id": 83591638, "body": "@Fran&#231;oisAndrieux I tried many versions of clang (from 3.8 to 5.0), many versions of gcc (from 4.9.2 to 7.2), with both -O2 and -O3 flags. As well as MSVC 19 2017 with /Ox."}, {"owner": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1516199700, "post_id": 48303172, "comment_id": 83591805, "body": "@UKMonkey I&#39;m sorry, I didn&#39;t understand your explanation :( For me, both functions in my original listing look like they would produce the same assembly. The only difference is that in the second version, the array and its size are wrapped in a single struct. I don&#39;t use any const qualifiers in the first version, but it gets optimized anyway."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1516199868, "post_id": 48303172, "comment_id": 83591923, "body": "@UKMonkey <a href=\"https://godbolt.org/g/FxBGoe\" rel=\"nofollow noreferrer\">Even if size is declared const</a> inside the class, the compiler does not optimize the unusefull away. So this is a weakness common to all compilers."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1516202318, "post_id": 48303172, "comment_id": 83593612, "body": "@UKMonkey <code>const</code> does not help because the compiler assumes the called function does <code>const_cast</code>. If the definition of the function is available in the same translation unit the compiler again does not need <code>const</code> because it can see what the function actually does."}], "answers": [{"comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 1, "creation_date": 1516200322, "post_id": 48303745, "comment_id": 83592214, "body": "That unfortunately drastically limits the amount of processing <code>process_value</code> can do."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516200373, "post_id": 48303745, "comment_id": 83592248, "body": "At least in c++17 you cannot get access to size from a reference to the element of the array member. I suppose compiler do not apply C++ aliasing rule but C ones"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1516200475, "post_id": 48303745, "comment_id": 83592316, "body": "@nwp I do not think so."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 1, "creation_date": 1516200743, "post_id": 48303745, "comment_id": 83592506, "body": "@Oliv The optimizer disagrees with you."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516200910, "post_id": 48303745, "comment_id": 83592614, "body": "@MaximEgorushkin In c++17 i am sure of me. I don&#39;t care if it is easier to perform optimization on a intermediate language where most of the semantic is lost."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516200978, "post_id": 48303745, "comment_id": 83592655, "body": "@Oliv That link nwp provided in the comments compiles it in C++17 mode and proves you wrong."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516201710, "post_id": 48303745, "comment_id": 83593144, "body": "@Oliv Added a longer explanation."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516205302, "post_id": 48303745, "comment_id": 83595737, "body": "@MaximEgorushkin The modification made to the standard in C++17 aim exactly at avoiding those optimization barrier. Whatsoever, think of the case where <code>size</code> member is declared const (<a href=\"https://godbolt.org/g/4W9pS6\" rel=\"nofollow noreferrer\">Compiler Explorer link</a>). The optimizer still perform a load, while it is explicitly stated that changing the value of an object declared const is UB. Compiler just fails because their over simplifly the code before performing optimization."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516205768, "post_id": 48303745, "comment_id": 83596032, "body": "@Oliv Could you provide a link to the modification you refer to?"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516205816, "post_id": 48303745, "comment_id": 83596058, "body": "@Oliv In your example you have a <code>const</code> member/sub-object of a non-const object."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 1, "creation_date": 1516206596, "post_id": 48303745, "comment_id": 83596544, "body": "<a href=\"https://timsong-cpp.github.io/cppwp/n4659/dcl.type.cv#4\" rel=\"nofollow noreferrer\">&#91;dcl.type.cv&#93;/4</a> &quot;any attempt to modify a const object during its lifetime results in undefined behavior.&quot; Notice also that a suboject is an object. There are no special rule for const subobject in the standard!! But I think you already knew that, no? So how would you qualify your last comment?"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 2, "creation_date": 1516206898, "post_id": 48303745, "comment_id": 83596732, "body": "@Oliv Since complete object <code>array_wrapper</code> is originally created as non-const, it is well defined to cast it back and forth to const and non-const. And casting an object to <code>unsigned char</code> and replacing the object representation is also well defined. Is it not?"}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516207041, "post_id": 48303745, "comment_id": 83596839, "body": "Come on! &quot;<b>any attempt</b> to modify...&quot; it can not be clearer. Why do you place so much confidence on compilers? Don&#39;t you have never seen them fail?"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516207089, "post_id": 48303745, "comment_id": 83596872, "body": "@Oliv Look at <a href=\"https://timsong-cpp.github.io/cppwp/n4659/dcl.type.cv#4\" rel=\"nofollow noreferrer\">dcl.type.cv.4</a>, <code>ip = const_cast&lt;int*&gt;(cip); &#47;&#47; cast needed to convert const int* to int*</code> and then <code>*ip = 4; &#47;&#47; defined: *ip points to i, a non-const object</code>."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516207208, "post_id": 48303745, "comment_id": 83596940, "body": "And what happen when on the next line <code>*iq = 4;                                &#47;&#47; undefined: modifies a const object</code>. Come on, you are even forbiding your self to read the next line."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 1, "creation_date": 1516207284, "post_id": 48303745, "comment_id": 83596979, "body": "@Oliv On that line it modifies the originally const object. Please read what your cite carefully."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516207359, "post_id": 48303745, "comment_id": 83597013, "body": "So you modify your example, this time you forget to read the first line where cip is defined : <code>int i; const int* cip; cip=&amp;i</code>. cip is a const pointer to a <i>non-const object</i>"}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516207426, "post_id": 48303745, "comment_id": 83597047, "body": "Incredible it is written <code>&#47;&#47; undefined: modifies a const object</code>. <b>undefined</b> don&#39;t you realy see it???"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516207561, "post_id": 48303745, "comment_id": 83597136, "body": "@Oliv In the example in question <code>array_wrapper</code> is originally a non-const object. And the compiler assumes that <code>array_wrapper</code> is modified. Post a compiler bug report if you disagree."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1516207579, "post_id": 48303745, "comment_id": 83597150, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/163342/discussion-between-oliv-and-maxim-egorushkin\">continue this discussion in chat</a>."}, {"owner": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516207849, "post_id": 48303745, "comment_id": 83597331, "body": "@Oliv That&#39;s interesting. Is a const-qualified filed of a non-const class object considered a &quot;true constant which must never be modified&quot; from the standard&#39;s point of view?"}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "edited": false, "score": 0, "creation_date": 1516207980, "post_id": 48303745, "comment_id": 83597410, "body": "@Taras honestly, I don&#39;t understand your sentence, could you rephrase it?"}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516208193, "post_id": 48303745, "comment_id": 83597572, "body": "You asked me about the change in the C++ standard, here a <a href=\"https://stackoverflow.com/questions/48062346/is-a-pointer-with-the-right-address-and-type-still-always-a-valid-pointer-since\">link</a>. Whatsoever, size was not accessible from an element of the array without implementation defined behavior in C++14 and C++11 too: simple reason , pointer arithmetic restrictions."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "edited": false, "score": 0, "creation_date": 1516208230, "post_id": 48303745, "comment_id": 83597592, "body": "@Taras Look at <a href=\"https://timsong-cpp.github.io/cppwp/n4659/intro.object#2\" rel=\"nofollow noreferrer\">intro.object/2</a>."}, {"owner": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516208422, "post_id": 48303745, "comment_id": 83597699, "body": "@Oliv &lt;code&gt;struct Object { const int x; };&lt;/code&gt; For instance, I have a non-const &lt;code&gt;Object object { 42 };&lt;/code&gt;, and then I do something like this: &lt;code&gt;const_cast&lt;int &amp;&gt;(object.x) = 100;&lt;/code&gt; The question is: is this line considered UB or not? It might be, because I attempted to modify a value initially declared as const. But on the other hand, it is not a stand-alone constant, but a member of another object - which itself is not const."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "edited": false, "score": 0, "creation_date": 1516208646, "post_id": 48303745, "comment_id": 83597860, "body": "@Taras this is UB, because you are modifying the value of a const object. The fact this object is a subobject of a non const object does not change the fact that this object is const."}, {"owner": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516209108, "post_id": 48303745, "comment_id": 83598152, "body": "@Oliv Okay, then indeed the compiler could optimize all reads of [rsp+512] in the loop, because the size could not be changed (otherwise it is UB anyway). But it could not optimize away the write to [rsp+512] before the loop, because it thinks that someone inside a call to process_value(...) might want to read from that location and get the size."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516209330, "post_id": 48303745, "comment_id": 83598271, "body": "@Oliv You keep ignoring the fact that <i>objects can contain other objects, called subobjects. A subobject can be a <b>member subobject</b>, a base class subobject, or an array element. An object that is not a subobject of any other object is called a <b>complete object</b>.</i> Here, <code>array_wrapper.size</code> is a <i>subobject</i>, not a <i>complete object</i>."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "edited": false, "score": 0, "creation_date": 1516209421, "post_id": 48303745, "comment_id": 83598338, "body": "@Taras Try to find an expression that would make possible inside the body of <code>process_value</code> to get access to <code>size</code> without UB. (Actualy their is one implementation defined behavior that could do it, and if you find it out will discuss why it is irrelevant inside the body of a function declared as <code>process_value</code>)."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516209477, "post_id": 48303745, "comment_id": 83598374, "body": "@MaximEgorushkin And then, what does it change for size subobject?"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516209578, "post_id": 48303745, "comment_id": 83598437, "body": "@Oliv It changes its storage and lifetime. <code>size</code>s storage is that of <code>array_wrapper</code>, which is non-const. There is a chance that the authors of the 3 compilers are correct, don&#39;t you think?"}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516209767, "post_id": 48303745, "comment_id": 83598532, "body": "@MaximEgorushkin Yes they both are occupying the storage associated to the complete they are a member, but does not change anything to the modifiability of the value of size, neither it actualy change the accessibility of size from an array_wrapper element."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516209835, "post_id": 48303745, "comment_id": 83598570, "body": "@Oliv Okay, whatever, post bug reports to 3 compilers."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516209932, "post_id": 48303745, "comment_id": 83598637, "body": "@MaximEgorushkin As I already said you, this is not a compiler bug since it does not change the program observable behavior, this is just a missed optimization opportunity. Compiler, clang GCC and MSVC have already so many bug that do change program compilability and observable behavior, that this kind of optimization opportunity is irrelevant. Specialy if it would oblige them  to deeply change their compiler infrastructure."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516210138, "post_id": 48303745, "comment_id": 83598761, "body": "@Oliv We agree to disagree agreeably."}, {"owner": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516210192, "post_id": 48303745, "comment_id": 83598791, "body": "@Oliv It&#39;s hard to find such expression for my array+size example. But there might be something like this: struct Baz { Foo foo; Bar bar; }; -- some function may take a reference to Foo, get that Foo&#39;s address, add sizeof(Foo) to it, and reinterpret_cast it to Bar. That&#39;s what C++ allows. And I dislike it very much, because it sacrifices performance in order to allow some coders to write ugly hacks. Or maybe I just don&#39;t completely understand something there. Why was such &quot;feature&quot; needed in the first place?.."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "edited": false, "score": 0, "creation_date": 1516210656, "post_id": 48303745, "comment_id": 83599058, "body": "@Taras With this precise class, which is a standard layout class you can get a pointer to a Baz from foo (but not from bar) so accessing bar exactly this way (and not using pointer arithmetic as you do) is allowed <code>*reinterpret_cast&lt;Baz&amp;&gt;(a_Baz.foo).bar</code>. In the case of your question this trick is not possible because you can not get a pointer to an array from one of its element: <a href=\"https://timsong-cpp.github.io/cppwp/n4659/basic.compound#4\" rel=\"nofollow noreferrer\">basic.compound/4</a>."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "edited": false, "score": 0, "creation_date": 1516210701, "post_id": 48303745, "comment_id": 83599085, "body": "@Taras But indeed before C++17 it would be allowed because of this <a href=\"https://stackoverflow.com/questions/48062346/is-a-pointer-with-the-right-address-and-type-still-always-a-valid-pointer-since\">deleted sentence</a>"}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "edited": false, "score": 0, "creation_date": 1516210851, "post_id": 48303745, "comment_id": 83599179, "body": "@Taras, So let&#39;s say that inside in a function <code>process_value(double&amp; a)</code> you have some code that try to get access to size, how would you do it, using your trick for example?"}, {"owner": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516212161, "post_id": 48303745, "comment_id": 83599910, "body": "@Oliv I wouldn&#39;t do it even if I wanted to, because I have no knowledge of current element&#39;s index, and thus cannot calculate the desired offset."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 2, "creation_date": 1516218188, "post_id": 48303745, "comment_id": 83603056, "body": "My guess is that this is a combination of these subtle aliasing concerns combined with several compiler missed optimizations. The struct is standard layout and (I believe) it is valid for <code>process_value()</code> to cast it back to the original struct if it knows the offset. Even if the index isn&#39;t passed in, <code>process_value()</code> can still &quot;know&quot; the index by other means (such as counting the # of times it&#39;s called). Yes, this would be terrible code. But semantically it&#39;s valid without UB and the compiler must respect it."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 1, "creation_date": 1516218191, "post_id": 48303745, "comment_id": 83603059, "body": "But these still aren&#39;t enough to drop the optimization. Compilers generally don&#39;t do const-ness optimizations. I&#39;m also unsure if the locally declared aspect of the struct has any semantic value in invalidating this optimization. But the optimizer probably doesn&#39;t care and assumes it&#39;s visible everywhere. In reality, the compiler is probably dropping the optimization the moment it sees <i>anything</i> inside the struct having its &quot;address taken&quot;. This suppresses the Scalar Replacement of Aggregates optimization which would be required to isolate the size member."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1516220913, "post_id": 48303745, "comment_id": 83604530, "body": "@Mystical Actualy even if one knew how many byte there were between the double and the <code>size</code> member, one could not get a pointer to the <code>size</code> member without implementation defined behavior. Due to the rule of pointer arithmetic one should reinterpret_cast the pointer to <code>intptr_t</code> then add the shift then reinterpret_cast the result to <code>size_t*</code>.<a href=\"https://timsong-cpp.github.io/cppwp/n4659/expr.reinterpret.cast#5\" rel=\"nofollow noreferrer\">&#91;expr.reinterpret.cast&#93;</a>. So, as you say, hopefully it is not enough to drop optimization because this implementation defined reinterpret_cast has the potential to do anything!"}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 1, "creation_date": 1516221481, "post_id": 48303745, "comment_id": 83604802, "body": "It is allowed if it&#39;s the first member. <a href=\"http://en.cppreference.com/w/cpp/types/is_standard_layout\" rel=\"nofollow noreferrer\">&quot;A pointer to a standard-layout class may be converted (with reinterpret_cast) to a pointer to its first non-static data member and vice versa.&quot;</a> So it&#39;s not UB for the <code>process_value()</code> to (only on the first invocation) cast the reference to the original struct and do what it wants with it. So semantically, I think the only thing that saves the optimization is the <code>const</code>. But compilers don&#39;t really use <code>const</code> for optimizations."}, {"owner": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "edited": false, "score": 0, "creation_date": 1516278236, "post_id": 48303745, "comment_id": 83627636, "body": "Btw, I don&#39;t think that this issue is related to some standardese stuff about past-the-end pointer in array. Here&#39;s a simplified example without any arrays at all: <a href=\"https://godbolt.org/g/SD1erC\" rel=\"nofollow noreferrer\">godbolt.org/g/SD1erC</a> -- the same issue is still there."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "edited": false, "score": 0, "creation_date": 1516312596, "post_id": 48303745, "comment_id": 83647728, "body": "@Taras It has nothing to do with <i>past-the-end pointer in array</i>, not sure how you inferred that."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1516368300, "post_id": 48303745, "comment_id": 83669491, "body": "I expected <code>std::for_each</code> to fix it because it removes the need to reload <code>size</code> repeatedly, <a href=\"https://godbolt.org/g/w4dYyK\" rel=\"nofollow noreferrer\">but it doesn&#39;t seem so</a>."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 6, "last_activity_date": 1516271522, "last_edit_date": 1516271522, "creation_date": 1516200246, "answer_id": 48303745, "question_id": 48303172, "link": "https://stackoverflow.com/questions/48303172/why-dont-c-compilers-optimize-away-reads-and-writes-to-struct-data-members-as/48303745#48303745", "title": "Why don&#39;t C++ compilers optimize away reads and writes to struct data members as opposed to distinct local variables?", "body": "<p>This is because <code>void process_value(double&amp; ref_value);</code> accepts the argument by reference. The compiler/optimizer assumes aliasing, i.e. that <code>process_value</code> function can change memory accessible through reference <code>ref_value</code> and hence that <code>size</code> member after the array.</p>\n\n<p>The compiler assumes that because the <code>array</code> and <code>size</code> are members of one same object <code>array_wrapper</code> function <code>process_value</code> can potentially cast the reference to the first element (on the first invocation) to the reference to the object (and store it elsewhere) and cast the object to <code>unsigned char</code> and read or replace its entire representation. So that after the function returns the state of the object must be reloaded from memory. </p>\n\n<p>When <code>size</code> is a stand-alone object on the stack the compiler/optimizer assumes that nothing else could possibly have a reference/pointer to it and caches it in a register.</p>\n\n<p>In <a href=\"https://youtu.be/eR34r7HOU14\" rel=\"nofollow noreferrer\">Chandler Carruth: Optimizing the Emergent Structures of C++</a> he explains why the optimizers have difficulty when calling functions accepting reference/pointer arguments. Use reference/pointer function arguments only when absolutely necessary.</p>\n\n<p>If you would like to change the value the more performant option is:</p>\n\n<pre><code>double process_value(double value);\n</code></pre>\n\n<p>And then:</p>\n\n<pre><code>array_wrapper.arr[i] = process_value(array_wrapper.arr[i]);\n</code></pre>\n\n<p>This change results in <a href=\"https://godbolt.org/g/2h5KYQ\" rel=\"nofollow noreferrer\">optimal assembly</a>:</p>\n\n<pre><code>.L23:\nmovsd xmm0, QWORD PTR [rbx]\nadd rbx, 8\ncall process_value2(double)\nmovsd QWORD PTR [rbx-8], xmm0\ncmp rbx, rbp\njne .L23\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>for(double&amp; val : arr)\n    val = process_value(val);\n</code></pre>\n"}], "owner": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 597, "favorite_count": 4, "accepted_answer_id": 48303745, "answer_count": 1, "score": 8, "last_activity_date": 1516271522, "creation_date": 1516198435, "question_id": 48303172, "link": "https://stackoverflow.com/questions/48303172/why-dont-c-compilers-optimize-away-reads-and-writes-to-struct-data-members-as", "title": "Why don&#39;t C++ compilers optimize away reads and writes to struct data members as opposed to distinct local variables?", "body": "<p>I'm trying to create a local array of some POD values (e.g. <code>double</code>) with fixed <code>max_size</code> that is known at compile time, then read a runtime <code>size</code> value (<code>size &lt;= max_size</code>) and process first <code>size</code> elements from that array.</p>\n\n<p>The question is, why doesn't compiler eliminate stack reads and writes when <code>arr</code> and <code>size</code> are placed into the same <code>struct</code>/<code>class</code>, as opposed to the case where <code>arr</code> and <code>size</code> are independent local variables?</p>\n\n<p>Here's my code:</p>\n\n<pre><code>#include &lt;cstddef&gt;\nconstexpr std::size_t max_size = 64;\n\nextern void process_value(double&amp; ref_value);\n\nvoid test_distinct_array_and_size(std::size_t size)\n{\n    double arr[max_size];\n    std::size_t arr_size = size;\n\n    for (std::size_t i = 0; i &lt; arr_size; ++i)\n        process_value(arr[i]);\n}\n\nvoid test_array_and_size_in_local_struct(std::size_t size)\n{\n    struct\n    {\n        double arr[max_size];\n        std::size_t size;\n    } array_wrapper;\n    array_wrapper.size = size;\n\n    for (std::size_t i = 0; i &lt; array_wrapper.size; ++i)\n        process_value(array_wrapper.arr[i]);\n}\n</code></pre>\n\n<p>Assembly output for <code>test_distinct_array_and_size</code> from Clang with -O3:</p>\n\n<pre><code>test_distinct_array_and_size(unsigned long): # @test_distinct_array_and_size(unsigned long)\n  push r14\n  push rbx\n  sub rsp, 520\n  mov r14, rdi\n  test r14, r14\n  je .LBB0_3\n  mov rbx, rsp\n.LBB0_2: # =&gt;This Inner Loop Header: Depth=1\n  mov rdi, rbx\n  call process_value(double&amp;)\n  add rbx, 8\n  dec r14\n  jne .LBB0_2\n.LBB0_3:\n  add rsp, 520\n  pop rbx\n  pop r14\n  ret\n</code></pre>\n\n<p>Assembly output for <code>test_array_and_size_in_local_struct</code>:</p>\n\n<pre><code>test_array_and_size_in_local_struct(unsigned long): # @test_array_and_size_in_local_struct(unsigned long)\n  push r14\n  push rbx\n  sub rsp, 520\n  mov qword ptr [rsp + 512], rdi\n  test rdi, rdi\n  je .LBB1_3\n  mov r14, rsp\n  xor ebx, ebx\n.LBB1_2: # =&gt;This Inner Loop Header: Depth=1\n  mov rdi, r14\n  call process_value(double&amp;)\n  inc rbx\n  add r14, 8\n  cmp rbx, qword ptr [rsp + 512]\n  jb .LBB1_2\n.LBB1_3:\n  add rsp, 520\n  pop rbx\n  pop r14\n  ret\n</code></pre>\n\n<p>Latest GCC and MSVC compilers do basically the same thing with the stack reads and writes.</p>\n\n<p>As we can see, reads and writes to the <code>array_wrapper.size</code> variable on the stack are not optimized away in the latter case. There is a write of <code>size</code> value into location <code>[rsp + 512]</code> before the beginning of the loop, and a read from that location after <i>each</i> iteration.</p>\n\n<p>So, the compiler kinda expects that we'd want to modify <code>array_wrapper.size</code> from the <code>process_value(array_wrapper.arr[i])</code> call (by taking the address of the current array element and applying some weird offsets to it?)</p>\n\n<p>But, if we tried to do so from that call, woudn't that be undefined behavior?</p>\n\n<p>When we rewrite the loop in the following manner</p>\n\n<pre><code>for (std::size_t i = 0, sz = array_wrapper.size; i &lt; sz; ++i)\n    process_value(array_wrapper.arr[i]);\n</code></pre>\n\n<p>, those unnecessary reads at the end of each iteration will be gone. But the initial write to <code>[rsp + 512]</code> will remain, meaning that compiler still expects us to be able to access the <code>array_wrapper.size</code> variable in that location from these <code>process_value</code> calls (by doing some weird offset-based magic).</p>\n\n<p>Why?</p>\n\n<p>Is that but a little shortcoming in modern compilers' implementations (that hopefully will be fixed soon)? Or does the C++ standard indeed require such behavior that leads to generation of less efficient code whenever we put an array and its size into the same class?</p>\n\n<p><i>P.S.</i></p>\n\n<p>I realize that my code example above might seem a bit contrived. But consider this: I'd like to use a lightweight <code>boost::container::static_vector</code>-like class template in my code for safer and more convenient \"C++-style\" manipulations with pseudo-dynamic arrays of POD elements. So my <code>PODVector</code> will contain an array and a <code>size_t</code> in the same class:</p>\n\n<pre><code>template&lt;typename T, std::size_t MaxSize&gt;\nclass PODVector\n{\n    static_assert(std::is_pod&lt;T&gt;::value, \"T must be a POD type\");\n\nprivate:\n    T _data[MaxSize];\n    std::size_t _size = 0;\n\npublic:\n    using iterator = T *;\n\npublic:\n    static constexpr std::size_t capacity() noexcept\n    {\n        return MaxSize;\n    }\n\n    constexpr PODVector() noexcept = default;\n\n    explicit constexpr PODVector(std::size_t initial_size)\n        : _size(initial_size)\n    {\n        assert(initial_size &lt;= capacity());\n    }\n\n    constexpr std::size_t size() const noexcept\n    {\n        return _size;\n    }\n\n    constexpr void resize(std::size_t new_size)\n    {\n        assert(new_size &lt;= capacity());\n        _size = new_size;\n    }\n\n    constexpr iterator begin() noexcept\n    {\n        return _data;\n    }\n\n    constexpr iterator end() noexcept\n    {\n        return _data + _size;\n    }\n\n    constexpr T &amp; operator[](std::size_t position)\n    {\n        assert(position &lt; _size);\n        return _data[position];\n    }\n};\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>void test_pod_vector(std::size_t size)\n{\n    PODVector&lt;double, max_size&gt; arr(size);\n\n    for (double&amp; val : arr)\n        process_value(val);\n}\n</code></pre>\n\n<p>If the issue described above is indeed forced by C++'s standard (and is not the fault of compiler writers), such <code>PODVector</code> will never be as efficient as raw usage of an array and an \"unrelated\" variable for size. And this would be quite bad for C++ as a language which wants zero-overhead abstractions.</p>\n"}, {"tags": ["c++", "sockets", "tcp", "send", "recv"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1516198273, "post_id": 48303058, "comment_id": 83590834, "body": "<code>struct UE</code> is of non-POD type (due to containing of <code>std::string</code>), hence it can&#39;t be sent by plain <code>send</code>/<code>recv</code> calls, in the manner that you attempt."}, {"owner": {"reputation": 33, "user_id": 9161134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71ece376d1b928c8be125ef78c94a960?s=128&d=identicon&r=PG&f=1", "display_name": "Purdgr8", "link": "https://stackoverflow.com/users/9161134/purdgr8"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1516198435, "post_id": 48303058, "comment_id": 83590947, "body": "Could you pls elaborate as to how it can be done? :S"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1516199133, "post_id": 48303058, "comment_id": 83591413, "body": "You really ought to avoid <code>using namespace std</code> - it is a bad habit to get into, and <a href=\"/q/1452721\">can silently change the meaning of your program</a> when you&#39;re not expecting it.  Get used to using the namespace prefix (<code>std</code> is intentionally very short), or importing <i>just the names you need</i> into the <i>smallest reasonable scope</i>."}], "answers": [{"comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1516205411, "post_id": 48303195, "comment_id": 83595815, "body": "Also, even sending POD data is problematic, in that the byte-layout of the POD data can vary depending on the architecture of the CPU the program was compiled for.  When the struct&#39;s byte-layout and endianness (as specified by the compiler of the receiving program) don&#39;t exactly match those of the program running on the sender, the data will be misinterpreted by the receiver."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 4, "last_activity_date": 1516199479, "last_edit_date": 1516199479, "creation_date": 1516198523, "answer_id": 48303195, "question_id": 48303058, "link": "https://stackoverflow.com/questions/48303058/sending-struct-over-tcp-socket-in-c/48303195#48303195", "title": "Sending struct over tcp socket in C++", "body": "<p>There are at least 2 problems in your code:</p>\n\n<ol>\n<li><p>You cannot send objects like <code>std::string</code> and anything that contains it this way (formally non-POD data), you need to marshall your data. There are plenty of libraries around (like google proto buffers) or you can write your own. This topic is too wide to cover it in the answer here.</p></li>\n<li><p>You cannot expect that you receive data from TCP stream by the same chunk you sent it, you must write code that can handle receiving data by pieces (and send it that way as well).</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 8033062, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/20c14de0d539f6720280b50b9be573a5?s=128&d=identicon&r=PG&f=1", "display_name": "Aasim", "link": "https://stackoverflow.com/users/8033062/aasim"}, "edited": false, "score": 0, "creation_date": 1592629905, "post_id": 48304519, "comment_id": 110499630, "body": "Taken from this SO answer <a href=\"https://stackoverflow.com/a/1577174/8033062\">stackoverflow.com/a/1577174/8033062</a>"}], "tags": [], "owner": {"reputation": 861, "user_id": 743414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4865c7841b624ea4f967e6d1806bbbb0?s=128&d=identicon&r=PG", "display_name": "user743414", "link": "https://stackoverflow.com/users/743414/user743414"}, "is_accepted": false, "score": 3, "last_activity_date": 1516202992, "last_edit_date": 1516202992, "creation_date": 1516202679, "answer_id": 48304519, "question_id": 48303058, "link": "https://stackoverflow.com/questions/48303058/sending-struct-over-tcp-socket-in-c/48304519#48304519", "title": "Sending struct over tcp socket in C++", "body": "<p>You should never ever write a whole struct to a file or a socket. \nAlways write each field separately, and read them the same way. \nWhen doing it this way you pay some memory overhead, but it's generally a good design for performance reasons because you don't want to do a write of each value to the socket.</p>\n\n<p>When sending binary data you should always take care for the following things:</p>\n\n<ul>\n<li>Different <a href=\"https://en.wikipedia.org/wiki/Endianness\" rel=\"nofollow noreferrer\">endianness</a></li>\n<li>Different <a href=\"https://en.wikipedia.org/wiki/Data_structure_alignment#Data_Structure_Padding\" rel=\"nofollow noreferrer\">padding</a></li>\n<li>Differences in the <a href=\"https://en.wikipedia.org/wiki/Word_(computer_architecture)#Table_of_word_sizes\" rel=\"nofollow noreferrer\">bye-sizes of intrinsic types</a></li>\n</ul>\n\n<p>You need some functions like the following:</p>\n\n<pre><code>virtual MESSAGE_BUFFER * GetMessageAsBinaryPtr()\n{\n  MESSAGE_BUFFER * binaryMsg = new MESSAGE_BUFFER;\n  UINT8 * ptrBuffer = &amp;(*binaryMsg)[0];\n  ptrBuffer = this-&gt;serializeUInt16(ptrBuffer, this-&gt;m_majorVersion);\n  ptrBuffer = this-&gt;serializeUInt16(ptrBuffer, this-&gt;m_minorVersion);\n  ptrBuffer = this-&gt;serializeUInt32(ptrBuffer,         (UINT32)this-&gt;m_messageType);\n  ptrBuffer = this-&gt;serializeUInt64(ptrBuffer, this-&gt;m_packetID);\n  ptrBuffer = this-&gt;serializeDouble(ptrBuffer, this-&gt;m_timestamp);\n  return binaryMsg;\n}\n\nvirtual void CreateFromBinary(MESSAGE_BUFFER buffer)\n{\n  UINT8 * ptrBuffer = &amp;buffer[0];\n  ptrBuffer = this-&gt;deserializeUInt16FromBuffer(ptrBuffer, &amp;this-&gt;m_majorVersion);\n  ptrBuffer = this-&gt;deserializeUInt16FromBuffer(ptrBuffer, &amp;this-&gt;m_minorVersion);\n\n  UINT32 messageType = 0;\n  ptrBuffer = this-&gt;deserializeUInt32FromBuffer(ptrBuffer, &amp;messageType);\n  this-&gt;SetMessageType((MessageTypes)messageType);\n\n  ptrBuffer = this-&gt;deserializeUInt64FromBuffer(ptrBuffer, &amp;this-&gt;m_packetID);\n  ptrBuffer = this-&gt;deserializeDoubleFromBuffer(ptrBuffer, &amp;this-&gt;m_timestamp);\n}\n\ninline UINT8 * serializeUInt16(UINT8 * buffer, UINT16 value)\n{\n  buffer[1] = value;\n  buffer[0] = value &gt;&gt; 8;\n  return buffer + 2;\n}\n\ninline UINT8 * deserializeUInt16FromBuffer(UINT8 * buffer, UINT16 *     pOutput)\n{\n  *pOutput = (*pOutput &lt;&lt; 8) + buffer[0];\n  *pOutput = (*pOutput &lt;&lt; 8) + buffer[1];\n  return buffer + 2;\n}\n</code></pre>\n\n<p>When you have such functions you can serialize and deserialize your structs to a buffer and then send this buffer over your socket.</p>\n\n<p>A few points to note:</p>\n\n<ul>\n<li>The struct to send is first serialized, field by field into a buffer</li>\n<li>MESSAGE_BUFFER is of type UINT8[1024]</li>\n<li>The serialization routine returns a pointer to the next free byte in the buffer, which we use to compute how many bytes it serialized to</li>\n<li>Theres no protection against buffer overflows in my routines</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 427, "user_id": 5384988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-MbZMS6rFr3E/AAAAAAAAAAI/AAAAAAAAANQ/y8caA_M1ei8/photo.jpg?sz=128", "display_name": "Meric Ozcan", "link": "https://stackoverflow.com/users/5384988/meric-ozcan"}, "edited": false, "score": 0, "creation_date": 1612354579, "post_id": 48304620, "comment_id": 116739427, "body": "Your code does not work too. Std::string cannot be transferred inside a struct"}], "tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": false, "score": 1, "last_activity_date": 1516202993, "creation_date": 1516202993, "answer_id": 48304620, "question_id": 48303058, "link": "https://stackoverflow.com/questions/48303058/sending-struct-over-tcp-socket-in-c/48304620#48304620", "title": "Sending struct over tcp socket in C++", "body": "<p>There are few bugs in your code.\nIn server.cpp\n<code>sockaddr_in</code>  --> <code>struct sockaddr_in</code></p>\n\n<p>Once connection request is accepted by <code>server</code> using <code>accept()</code> call, it returns <strong>new file descriptor</strong>, with that <strong>new fd</strong> you should do <code>read</code> and <code>write</code> operation not with old one. </p>\n\n<p>Replace below statement </p>\n\n<pre><code>receive = recv(sock, (void*)&amp;UE2, sizeof(UE2), NULL); /** you are receiving with old fd called sock **/\n</code></pre>\n\n<p>with</p>\n\n<pre><code>receive = recv(cli, (void*)&amp;UE2, sizeof(UE2), NULL);\n</code></pre>\n\n<p><strong>client.cpp</strong></p>\n\n<pre><code>using namespace std;\nint main(int argc, char *argv[])\n{\n        struct UE\n        {\n                string Net;\n                int imsi;\n        } ;\n        UE UE1;\n        UE1.Net = \"4G\";\n        UE1.imsi = htons(8649);\n        int sock, receive;\n        struct sockaddr_in server;\n        char mesg[200];\n        sock = socket(PF_INET, SOCK_STREAM, 0);\n        perror(\"Socket:\");\n\n        server.sin_family = AF_INET;\n        server.sin_port = htons(atoi(argv[2]));\n        server.sin_addr.s_addr = inet_addr(argv[1]);\n        memset(&amp;(server.sin_zero), '\\0', 8);\n\n        connect(sock, (struct sockaddr*)&amp;server, sizeof(server));\n        perror(\"Connect:\");\n\n        int count = 0;\n        send(sock, &amp;UE1, sizeof(UE1), 0);\n        perror(\"send\");\n        cout&lt;&lt;\"Sent \"&lt;&lt;UE1.imsi&lt;&lt;\" and \"&lt;&lt;UE1.Net&lt;&lt;\" to Server \\n\";\n        close(sock);\n}\n</code></pre>\n\n<p><strong>server.cpp</strong></p>\n\n<pre><code>using namespace std;\nint main()\n{\n        struct UE\n        {\n                string Net;\n                int imsi;\n        } ;\n        UE UE2;\n\n        int sock, cli, receive;\n        struct sockaddr_in server, client;\n        unsigned int len;\n        sock = socket(AF_INET, SOCK_STREAM, 0);\n        perror(\"Socket:\");\n\n        server.sin_family = AF_INET;\n        server.sin_port = htons(10001);\n        server.sin_addr.s_addr = INADDR_ANY;\n        memset(&amp;(server.sin_zero), '\\0', 8);\n\n        len = sizeof(server);\n        bind(sock, (struct sockaddr *)&amp;server, len);\n        perror(\"Bind:\");\n\n        listen(sock, 1);\n        perror(\"Listen:\");\n\n        cli = accept(sock,(struct sockaddr *)&amp;client, &amp;len);\n        perror(\"accept\");\n        receive = recv(cli, ( void*)&amp;UE2, sizeof(UE2), 0);\n        perror(\"recv\");\n\n        cout &lt;&lt; \"rec = \"&lt;&lt;receive&lt;&lt;endl;\n        cout&lt;&lt;UE2.imsi&lt;&lt;\"\\n\";\n        close(sock);\n        perror(\"close\");\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 9161134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71ece376d1b928c8be125ef78c94a960?s=128&d=identicon&r=PG&f=1", "display_name": "Purdgr8", "link": "https://stackoverflow.com/users/9161134/purdgr8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4209, "favorite_count": 2, "answer_count": 3, "score": 2, "last_activity_date": 1516202993, "creation_date": 1516198077, "question_id": 48303058, "link": "https://stackoverflow.com/questions/48303058/sending-struct-over-tcp-socket-in-c", "title": "Sending struct over tcp socket in C++", "body": "<p>I am trying to send struct over tcp socket. I am a newbie in socket programming, I did try the options suggested here already but those did not serve my purpose. Could someone pls help?  </p>\n\n<p>I have written Server.cpp and Client.cpp and both are compiling properly. However, when I am executing my Server to listen to the Client, I am not sure if the Server is able to recieve the structure from Client or not. Also, how can I read this structure once it is received? </p>\n\n<p>Server.cpp</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include &lt;cstring&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;sys/types.h&gt;\n#include&lt;sys/socket.h&gt;\n#include&lt;netinet/in.h&gt;\n#include&lt;string&gt;\n#include&lt;stdio.h&gt;\nusing namespace std;\nint main()\n{\n        struct UE\n        {\n        string Net;\n        int imsi;\n        } ;\n        UE UE2;\n        //cout&lt;&lt;UE1.imsi&lt;&lt;\"\\n\"&lt;&lt;UE1.Net&lt;&lt;\"\\n\";\n        int sock, cli, receive;\n        sockaddr_in server, client;\n        unsigned int len;\n\n        if((sock = socket(AF_INET, SOCK_STREAM, 0)) == -1)\n        {\n                perror(\"Socket:\");\n                exit(-1);\n        }\n        server.sin_family = AF_INET;\n        server.sin_port = htons(10000);\n        //cout&lt;&lt;htons(10000);\n        server.sin_addr.s_addr = INADDR_ANY;\n        //cout&lt;&lt;INADDR_ANY;\n        memset(&amp;(server.sin_zero), '\\0', 8);\n        len = sizeof(struct sockaddr_in);\n        if((bind(sock, (struct sockaddr *)&amp;server, len)) == -1)\n        {\n                perror(\"Bind:\");\n                exit(-1);\n\n        }\n        if((listen(sock, 5)) == -1)\n        {\n                perror(\"Listen:\");\n                exit(-1);\n        }\n        while(1)\n        {\n                cli = accept(sock,(struct sockaddr *)&amp;client, &amp;len);\n                if(cli == -1)\n                {\n                        perror(\"Accept\");\n                        exit(-1);\n                }\n                receive = recv(sock, (void*)&amp;UE2, sizeof(UE2), NULL);\n                cout&lt;&lt;UE2.imsi;\n                //cout&lt;&lt;UE2.imsi&lt;&lt;\"\\n\"&lt;&lt;UE2.Net;\n                //int sent = send(cli, (const void*)&amp;mesg, sizeof mesg, 0);\n                //cout&lt;&lt;\"Sent\"&lt;&lt;sent&lt;&lt;\" bytes to client :&lt;&lt;inet_ntoa(client.sin_addr)\";\n                close(cli);\n        }\n}\n</code></pre>\n\n<p>Client.cpp</p>\n\n<pre><code>#include &lt;arpa/inet.h&gt;\n#include&lt;iostream&gt;\n#include &lt;cstring&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;sys/types.h&gt;\n#include&lt;sys/socket.h&gt;\n#include&lt;netinet/in.h&gt;\n#include&lt;string&gt;\n#include&lt;stdio.h&gt;\nusing namespace std;\nint main(int argc, char *argv[])\n{\n        struct UE\n        {\n        string Net;\n        int imsi;\n        } ;\n        UE UE1;\n        UE1.Net = \"4G\";\n        UE1.imsi = htons(8649);\n        int sock, receive;\n        struct sockaddr_in server;\n        char mesg[200];\n        if((sock = socket(AF_INET, SOCK_STREAM, 0)) == -1)\n        {\n                perror(\"Socket:\");\n                exit(-1);\n        }\n        server.sin_family = AF_INET;\n        server.sin_port = htons(atoi(argv[2]));\n        //cout&lt;&lt;server.sin.port;\n        server.sin_addr.s_addr = inet_addr(argv[1]);\n        //cout&lt;&lt;server.sin_addr.s_addr;\n        memset(&amp;(server.sin_zero), '\\0', 8);\n        if(connect(sock, (struct sockaddr*)&amp;server, sizeof(server)) == -1)\n        {\n                perror(\"Connect:\");\n                exit(-1);\n        }\n        int count = 0;\n        while(count = 0)\n        {\n        send(sock, &amp;UE1, sizeof(UE1), 0);\n        //receive = recv(sock, (void*)&amp;mesg, sizeof mesg, NULL);\n        count++;\n        }\n        cout&lt;&lt;\"Sent \"&lt;&lt;UE1.imsi&lt;&lt;\" and \"&lt;&lt;UE1.Net&lt;&lt;\" to Server \\n\";\n        close(sock);\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1516197990, "post_id": 48303005, "comment_id": 83590631, "body": "Please take some time to read <a href=\"http://stackoverflow.com/help\">the help pages</a>, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. Also please <a href=\"http://stackoverflow.com/tour\">take the tour</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>. Lastly please learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, <b>Complete</b>, and <b>Verifiable</b> Example</a>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1516198013, "post_id": 48303005, "comment_id": 83590654, "body": "Also please read <a href=\"https://stackoverflow.com/questions/31816095/why-should-i-not-include-bits-stdc-h\">Why should I not #include &lt;bits/stdc++.h&gt;?</a>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1516198149, "post_id": 48303005, "comment_id": 83590755, "body": "Lastly, stop going to code competition sites or online judges. That won&#39;t help you learn to program C++. Instead <a href=\"https://stackoverflow.com/a/388282/440558\">get a couple of good beginners books</a> to read. Or go to school/college/university."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 1, "creation_date": 1516198226, "post_id": 48303005, "comment_id": 83590806, "body": "@AditiRawat It&#39;s not. The OP probably just pressed the <code>c</code> key and saw something pop up and selected the first tag seen."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9229888"}, "edited": false, "score": 0, "creation_date": 1516199920, "post_id": 48303515, "comment_id": 83591957, "body": "I used this but I&#39;m getting  a blank output?!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9229888"}, "edited": false, "score": 1, "creation_date": 1516199996, "post_id": 48303515, "comment_id": 83592003, "body": "I got it now! Thank you soo much!"}], "tags": [], "owner": {"reputation": 509, "user_id": 9220448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5YtOb.jpg?s=128&g=1", "display_name": "mariusz_latarnik01", "link": "https://stackoverflow.com/users/9220448/mariusz-latarnik01"}, "is_accepted": true, "score": 0, "last_activity_date": 1516199459, "creation_date": 1516199459, "answer_id": 48303515, "question_id": 48303005, "link": "https://stackoverflow.com/questions/48303005/how-to-get-the-array-input-from-the-user/48303515#48303515", "title": "How to get the array input from the user?", "body": "<p>The simplest way is to get n from user and cin arr in a loop:</p>\n\n<pre><code>int n;\ncin &gt;&gt; n;\nint arr[n];\n\nfor (int i = 0; i &lt; n; ++i) {\n    cin &gt;&gt; arr[i];\n}\n\nfindTriplets(arr, n);\n</code></pre>\n\n<p>If you don't want to pass the size of array you can use std::vector instead of array, and the push_back() method;</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9229888"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 48303515, "answer_count": 1, "score": 0, "last_activity_date": 1516200233, "creation_date": 1516197879, "last_edit_date": 1516199565, "question_id": 48303005, "link": "https://stackoverflow.com/questions/48303005/how-to-get-the-array-input-from-the-user", "title": "How to get the array input from the user?", "body": "<p>How to input array here? i.e the user has to give the 5 values for arr[] instead of arr[] = (0, -1, 2, -3, 4} . If I give arr[] it shows error. I'm a begginer so please help me.</p>\n\n<pre><code>using namespace std; // function to print triplets with 0 sum \n\nvoid findTriplets(int arr[], int n) \n{\n\nbool found = false;\n\n    for (int i=0; i&lt;n-1; i++)\n    {\n        // Find all pairs with sum equals to\n        // \"-arr[i]\"\n        unordered_set&lt;int&gt; s;\n        for (int j=i+1; j&lt;n; j++)\n        {\n            int x = -(arr[i] + arr[j]);\n            if (s.find(x) != s.end())\n            {\n                printf(\"%d %d %d\\n\", x, arr[i], arr[j]);\n                found = true;\n            }\n            else\n                s.insert(arr[j]);\n        }\n    }\n\n    if (found == false)\n        cout &lt;&lt; \" No Triplet Found\" &lt;&lt; endl; }\n\nint main()\n\n{\n\n    int arr[] = {0, -1, 2, -3, 1};\n\n    int n = sizeof(arr)/sizeof(arr[0]);\n\n    findTriplets(arr, n);\n\n    return 0; }\n</code></pre>\n"}, {"tags": ["c++", "computer-vision", "robotics"], "comments": [{"owner": {"reputation": 778, "user_id": 9185103, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A9tmeE9vNfg/AAAAAAAAAAI/AAAAAAAAFVE/OfpAKfeDE7U/photo.jpg?sz=128", "display_name": "Toby Collins", "link": "https://stackoverflow.com/users/9185103/toby-collins"}, "edited": false, "score": 0, "creation_date": 1516211775, "post_id": 48302877, "comment_id": 83599710, "body": "You should post your images, and visually show the initial solution and the final solution. This is an iterative optimization that can easily get stuck in a local minimum if your initial solution is far from the true solution."}], "owner": {"reputation": 31, "user_id": 6409227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d17f7f4d528281c4fe72f4c39ed3fae?s=128&d=identicon&r=PG&f=1", "display_name": "zskalibur", "link": "https://stackoverflow.com/users/6409227/zskalibur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1516197437, "creation_date": 1516197437, "question_id": 48302877, "link": "https://stackoverflow.com/questions/48302877/my-inverse-compositional-homograhy-image-align-cannot-converge", "title": "My inverse compositional homograhy image align cannot converge?", "body": "<p>I implement the algorithm based on <a href=\"https://github.com/albertoCrive/homographyTrackingDemo\" rel=\"nofollow noreferrer\">homographyTrackingDemo</a> and <a href=\"http://www.ncorr.com/download/publications/bakerunify.pdf\" rel=\"nofollow noreferrer\">LK-20-years</a>. It's adaption of inverse compositional LK algorithm for estimating affine transformation. There are several steps I have tried: </p>\n\n<ol>\n<li><p>Derive the derivative of template image;</p></li>\n<li><p>Derive the derivative of homography transformation on template control points at identity transformation</p></li>\n<li>Compute the Steepest Gradient Matrix and Hessian matrix</li>\n</ol>\n\n<p>These steps are precomputed before stepping into iteration and we iterate:</p>\n\n<ol>\n<li>Warp target image by homography</li>\n<li>Compute the difference between warped target image and template image</li>\n<li>Solve the linear equations and then update homography parameters</li>\n</ol>\n\n<p>I hope some guy can give me a hint about whether my understanding about this algorithm is wrong. The c++ code is as follows:</p>\n\n<pre><code>AlignmentResults ICA::GaussNewtonMinimization(const StructOfArray2di &amp; pixelsOnTemplate, const vector&lt;Mat&gt; &amp; images, const vector&lt;Mat&gt; &amp; templates, const OptimizationParameters optParam, vector&lt;float&gt; &amp; parameters)\n{\n    AlignmentResults alignmentResults;\n    alignmentResults.nIter = 0;\n    alignmentResults.exitFlag = 1e6;\n\n    //parameters must contain the initial guess. It is updated during optimization\n    uint nChannels(images.size());\n    vector&lt;vector&lt;float&gt; &gt; templatePixelIntensities(nChannels,vector&lt;float&gt;(pixelsOnTemplate.size()));//, templatePixelDx(nChannels,vector&lt;float&gt;(pixelsOnTemplate.size())), templatePixelDy(nChannels,vector&lt;float&gt;(pixelsOnTemplate.size()));\n    vector&lt;Mat&gt; imageDx(nChannels), imageDy(nChannels);\n    uint nParam = parameters.size();\n\n    //vector&lt;Eigen::Matrix&lt;float, 2, N_PARAM&gt;, Eigen::aligned_allocator&lt;Eigen::Matrix&lt;float, 2, N_PARAM&gt; &gt; &gt; warpJacobians(pixelsOnTemplate.size());\n\n    Eigen::MatrixXf sdImages(pixelsOnTemplate.size(), nParam);\n    vector&lt;float&gt;  errorImage(pixelsOnTemplate.size(), 0.0);\n\n    StructOfArray2di warpedPixels;\n    Eigen::Matrix&lt;float, N_PARAM, N_PARAM&gt; hessian;\n    Eigen::Matrix&lt;float, N_PARAM, N_PARAM&gt; hessianInv;\n    hessian.setZero();\n\n\n    std::vector&lt;Eigen::Matrix&lt;float, N_PARAM, N_PARAM&gt;, Eigen::aligned_allocator&lt;Eigen::Matrix&lt;float, N_PARAM, N_PARAM&gt;&gt;&gt; hessians(nChannels);\n    std::vector&lt;Eigen::MatrixXf&gt; JacosT(nChannels);\n    Eigen::Matrix&lt;float, N_PARAM, 1&gt; rhs;\n    Eigen::Matrix&lt;float, N_PARAM, 1&gt; deltaParam;\n\n    std::vector&lt;float&gt; zeroPara(8, 0.);\n#pragma omp parallel for\n    for(int iChannel = 0; iChannel&lt;nChannels; ++iChannel)\n    {\n        ComputeImageDerivatives(templates[iChannel], imageDx[iChannel], imageDy[iChannel]);\n        hessians[iChannel].setZero();\n        JacosT[iChannel] = Eigen::MatrixXf(N_PARAM, pixelsOnTemplate.size());\n\n        for(int iPoint = 0; iPoint &lt; pixelsOnTemplate.size(); ++iPoint)\n        {\n            int pos = templates[iChannel].cols * pixelsOnTemplate.y[iPoint] + pixelsOnTemplate.x[iPoint];\n            templatePixelIntensities[iChannel][iPoint] = ((float*)templates[iChannel].data)[pos];\n\n            float Dx = ((float*)imageDx[iChannel].data)[pos];\n            float Dy = ((float*)imageDy[iChannel].data)[pos];\n            //printf(\"%f %f\\n\", Dx, Dy);\n            Eigen::Matrix&lt;float, 2, N_PARAM&gt; warpJ;\n            Homography::ComputeWarpJacobian(pixelsOnTemplate.x[iPoint], pixelsOnTemplate.y[iPoint], zeroPara, warpJ);\n            //std::cout &lt;&lt; warpJ &lt;&lt; std::endl;\n            Eigen::Matrix&lt;float, 1, N_PARAM&gt; J2H;\n            Eigen::Matrix&lt;float, 1, 2&gt; ID;\n            ID[0] = Dx;\n            ID[1] = Dy;\n            J2H = ID*warpJ;\n\n            JacosT[iChannel].col(iPoint) = J2H.transpose();\n            hessians[iChannel] += JacosT[iChannel].col(iPoint) * J2H;\n        }\n        hessian += hessians[iChannel];\n    }\n\n    while (alignmentResults.exitFlag == 1e6)\n    {\n        rhs.setZero();\n\n        ComputeWarpedPixels(pixelsOnTemplate, parameters, warpedPixels);\n\n#pragma omp parallel for\n        for(int iChannel = 0; iChannel&lt;images.size(); ++iChannel)\n        {\n            ComputeResiduals(images[iChannel], templatePixelIntensities[iChannel], warpedPixels, errorImage);\n            for (int i = 0; i&lt;nParam; ++i)\n            {\n                for(uint iPoint(0); iPoint&lt;pixelsOnTemplate.size(); ++iPoint)\n                {\n                    float val = (errorImage[iPoint] == std::numeric_limits&lt;float&gt;::infinity() ? 0: errorImage[iPoint]); \n                    rhs(i,0) -= (JacosT[iChannel])(i, iPoint) * val;\n                }\n            }\n        }\n\n\n        deltaParam = hessian.fullPivLu().solve(rhs);\n\n        std::vector&lt;float&gt; vDelta(8, 0.), invDelta(8, 0.);\n        for(size_t i = 0; i&lt;N_PARAM; ++i)\n        {\n            vDelta[i] = deltaParamd(i,0);\n        }\n\n        Homography::InverseWarpParameters(vDelta, invDelta);\n        parameters = Homography::ParametersUpdateCompositional(parameters, invDelta);\n\n\n        alignmentResults.poseIntermediateGuess.push_back(parameters);\n        alignmentResults.residualNorm.push_back(ComputeResidualNorm(errorImage));\n        if(alignmentResults.nIter &gt; 0)\n            alignmentResults.exitFlag = CheckConvergenceOptimization(deltaParam.norm(), alignmentResults.nIter, abs(alignmentResults.residualNorm[alignmentResults.nIter] - alignmentResults.residualNorm[alignmentResults.nIter-1]), optParam);\n        alignmentResults.nIter++;\n\n    return alignmentResults;\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "c++14"], "comments": [{"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1516200604, "post_id": 48302736, "comment_id": 83592409, "body": "Is C++14 allowed or you&#39;re stuck to C++11?"}, {"owner": {"reputation": 75, "user_id": 1665245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23b73844eee9a14bbd80066db7c14c7c?s=128&d=identicon&r=PG", "display_name": "kronat", "link": "https://stackoverflow.com/users/1665245/kronat"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1516200836, "post_id": 48302736, "comment_id": 83592567, "body": "Is allowed, thanks for asking."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 1665245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23b73844eee9a14bbd80066db7c14c7c?s=128&d=identicon&r=PG", "display_name": "kronat", "link": "https://stackoverflow.com/users/1665245/kronat"}, "edited": false, "score": 0, "creation_date": 1516207233, "post_id": 48304118, "comment_id": 83596948, "body": "Wow, this opened my mind a lot. Only one comment (maybe it&#39;s a wrong one): <code>DoInvokeSelect(F&amp; function) -&gt; std::future&lt;void()&gt;</code> should be <code>DoInvokeSelect(F&amp; function) -&gt; std::future&lt;void&gt;</code>, right?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 75, "user_id": 1665245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23b73844eee9a14bbd80066db7c14c7c?s=128&d=identicon&r=PG", "display_name": "kronat", "link": "https://stackoverflow.com/users/1665245/kronat"}, "edited": false, "score": 0, "creation_date": 1516207449, "post_id": 48304118, "comment_id": 83597066, "body": "@kronat yes you are right, I&#39;ll edit my answer right away."}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 1, "last_activity_date": 1516207494, "last_edit_date": 1516207494, "creation_date": 1516201475, "answer_id": 48304118, "question_id": 48302736, "link": "https://stackoverflow.com/questions/48302736/c-templates-do-something-inside-a-function-depending-on-the-template-paramet/48304118#48304118", "title": "C++ templates: do something inside a function, depending on the template parameter", "body": "<p>You can use a mix of <code>std::conditional</code> and function overloading.</p>\n\n<p>Let us define an alias to the return type of the function:</p>\n\n<pre><code>using result = decltype(std::bind(std::declval&lt;Ts&gt;()...)());\n</code></pre>\n\n<p>Then, we can make another alias to our conditions:</p>\n\n<pre><code>template&lt;typename T&gt;\nusing is_future = std::is_convertible&lt;T, std::future&lt;void&gt;&gt;;\n</code></pre>\n\n<p>Then, with that condition, we can declare our member:</p>\n\n<pre><code>std::conditional_t&lt;is_future&lt;result&gt;::value,\n    std::function&lt;std::future&lt;void&gt;&gt;,\n    std::function&lt;void()&gt;\n&gt; m_function;\n</code></pre>\n\n<p>Then, we can overload a function to conditionally select which expression is needed. In C++17, only a constexpr if it's needed:</p>\n\n<pre><code>virtual std::future&lt;void&gt; DoInvoke () {\n    if constexpr (!is_future&lt;result&gt;::value) {\n        m_function ();\n        return std::future&lt;void&gt;();\n    } else {\n        return m_function();\n    }\n}\n</code></pre>\n\n<p>In contrast with C++14, you need to overload the function, and use sfinae:</p>\n\n<pre><code>template&lt;typename F, std::enable_if_t&lt;is_future&lt;std::result_of_t&lt;F()&gt;&gt;::value&gt;* = nullptr&gt;\nauto DoInvokeSelect(F&amp; function) -&gt; std::future&lt;void&gt; {\n    return function();\n}\n\ntemplate&lt;typename F, std::enable_if_t&lt;!is_future&lt;std::result_of_t&lt;F()&gt;&gt;::value&gt;* = nullptr&gt;\nauto DoInvokeSelect(F&amp; function) -&gt; std::future&lt;void&gt; {\n    function();\n    return std::future&lt;void&gt;();\n}\n\nvirtual std::future&lt;void&gt; DoInvoke () {\n    return DoInvokeSelect(m_function);\n}\n</code></pre>\n\n<p>The enable_if will select either functions if the result is a future or not.</p>\n"}], "owner": {"reputation": 75, "user_id": 1665245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23b73844eee9a14bbd80066db7c14c7c?s=128&d=identicon&r=PG", "display_name": "kronat", "link": "https://stackoverflow.com/users/1665245/kronat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 48304118, "answer_count": 1, "score": 2, "last_activity_date": 1516207494, "creation_date": 1516197035, "last_edit_date": 1516201498, "question_id": 48302736, "link": "https://stackoverflow.com/questions/48302736/c-templates-do-something-inside-a-function-depending-on-the-template-paramet", "title": "C++ templates: do something inside a function, depending on the template parameter", "body": "<p>Please take a look into the member function <code>virtual std::future&lt;void&gt; DoInvoke ()</code> of the class <code>EventMemberImpl</code>:</p>\n\n<pre><code>#include &lt;future&gt;\n#include &lt;functional&gt;\n\nclass EventImpl\n{\npublic:\n  virtual ~EventImpl () = default;\n  std::future&lt;void&gt; Invoke () { return DoInvoke (); }\nprivate:\n  virtual std::future&lt;void&gt; DoInvoke () = 0;\n};\n\ntemplate &lt;typename... Ts&gt;\nEventImpl * MakeEvent (Ts&amp;&amp;... args)\n{\n  class EventMemberImpl : public EventImpl\n  {\npublic:\n    EventMemberImpl (Ts&amp;&amp;... args)\n      : m_function (std::bind (std::forward&lt;Ts&gt; (args)...))\n    {\n    }\nprotected:\n    virtual ~EventMemberImpl ()\n    {\n    }\nprivate:\n    virtual std::future&lt;void&gt; DoInvoke ()\n    {\n      // MakeEvent has been called with\n      // a Callable which does not return a future\n      m_function ();\n      return std::future&lt;void&gt; ();\n      // OR\n      // MakeEvent has been called with a\n      // Callable which returns a future:\n      return m_function();\n    }\n     // In case is any function...  :\n    std::function&lt;void ()&gt; m_function;\n\n    // OR\n    // ... except when it returns a future:\n    std::function&lt;std::future&lt;void&gt; ()&gt; m_function;\n  };\n  return new EventMemberImpl (std::forward&lt;Ts&gt; (args)...);\n}\n\nint foo() { return 5; }\nstd::future&lt;int&gt; baz () { return std::future&lt;int&gt; (); }\n\nint main ()\n{\n\n  EventImpl *event1 = MakeEvent(std::forward&lt;decltype (&amp;foo)&gt; (&amp;foo));\n  EventImpl *event2 = MakeEvent(std::forward&lt;decltype (&amp;baz)&gt; (&amp;baz));\n\n  return 0;\n}\n</code></pre>\n\n<p>What I would like to do is that, when someone calls MakeEvent with a function (any callable) as a parameter that returns void (or almost anything else) then the body should behave exactly as I wrote it. On the other hand, when the MakeEvent function is called with a function as a parameter which returns a std::future, then it should do different things.</p>\n"}, {"tags": ["c++", "svg", "uwp", "c++-winrt"], "answers": [{"comments": [{"owner": {"reputation": 189, "user_id": 1891866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/49f36b6ae676b6c52dfd2125d5f64e17?s=128&d=identicon&r=PG", "display_name": "jvdh", "link": "https://stackoverflow.com/users/1891866/jvdh"}, "edited": false, "score": 0, "creation_date": 1516223916, "post_id": 48304968, "comment_id": 83606054, "body": "This was what needed to be done. I find application resources a not well documented nor easy to find topic on the Windows developer pages. This helped a lot."}, {"owner": {"reputation": 34657, "user_id": 732221, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/C5p6I.jpg?s=128&g=1", "display_name": "Martin Zikmund", "link": "https://stackoverflow.com/users/732221/martin-zikmund"}, "reply_to_user": {"reputation": 189, "user_id": 1891866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/49f36b6ae676b6c52dfd2125d5f64e17?s=128&d=identicon&r=PG", "display_name": "jvdh", "link": "https://stackoverflow.com/users/1891866/jvdh"}, "edited": false, "score": 0, "creation_date": 1516223951, "post_id": 48304968, "comment_id": 83606070, "body": "Glad it helped :-). Happy coding!"}], "tags": [], "owner": {"reputation": 34657, "user_id": 732221, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/C5p6I.jpg?s=128&g=1", "display_name": "Martin Zikmund", "link": "https://stackoverflow.com/users/732221/martin-zikmund"}, "is_accepted": true, "score": 3, "last_activity_date": 1516204114, "creation_date": 1516204114, "answer_id": 48304968, "question_id": 48302700, "link": "https://stackoverflow.com/questions/48302700/how-to-use-svg-images-in-c-winrt-uwp-application/48304968#48304968", "title": "How to use SVG images in c++/winrt UWP application?", "body": "<p>The problem is not in your code, but in the fact that the file is not copied with the app content.</p>\n\n<p>Click on the <code>sample.svg</code> file in the Solution Explorer and look into the <strong>Properties</strong> toolbar. You will see <code>Content</code> set as <code>False</code>. You need to set it to <code>True</code> so that the file is copied into the output folder along with other content files like images (those are <code>Content</code> by default, so that is why you don't have to do this).</p>\n\n<p><a href=\"https://i.stack.imgur.com/Mdyb7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Mdyb7.png\" alt=\"Content setting\"></a></p>\n"}], "owner": {"reputation": 189, "user_id": 1891866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/49f36b6ae676b6c52dfd2125d5f64e17?s=128&d=identicon&r=PG", "display_name": "jvdh", "link": "https://stackoverflow.com/users/1891866/jvdh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 493, "favorite_count": 0, "accepted_answer_id": 48304968, "answer_count": 1, "score": 1, "last_activity_date": 1516204114, "creation_date": 1516196925, "last_edit_date": 1592644375, "question_id": 48302700, "link": "https://stackoverflow.com/questions/48302700/how-to-use-svg-images-in-c-winrt-uwp-application", "title": "How to use SVG images in c++/winrt UWP application?", "body": "<p>I have been able to programmatically display bitmap images using C++/WinRT in my UWP applications, however I can't get SVG images to work.</p>\n<p>Below is the most simple example I could come up with. I create an application, I load an SVG image, I add it to the application window and activate the window. I have provided the source code and the SVG file below.</p>\n<p>A few notes:</p>\n<ul>\n<li>The application runs, it's just that no image is displayed</li>\n<li>I made sure the SVG file is compliant with <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/mt790715%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\" title=\"the Windows supported features\">supported features in Windows</a></li>\n<li>The file is in my project root folder</li>\n<li>Loading bitmaps in a similar way works without problems</li>\n<li>I have tried to troubleshoot using the OpenFailed method, but the info it gives is useless</li>\n</ul>\n<hr />\n<h3>source</h3>\n<pre><code>#include &quot;pch.h&quot;\n\n\nusing namespace winrt;\nusing namespace winrt::Windows::ApplicationModel::Activation;\nusing namespace winrt::Windows::Foundation;\nusing namespace winrt::Windows::UI::Xaml;\nusing namespace winrt::Windows::UI::Xaml::Controls;\nusing namespace winrt::Windows::UI::Xaml::Media::Imaging;\n\n\nstruct App : ApplicationT&lt;App&gt;\n{\n    Image mImage;\n\n    void OnLaunched(LaunchActivatedEventArgs const &amp;)\n    {\n        //Load PNG image - WORKS\n        //mImage.Source(BitmapImage(Uri(L&quot;ms-appx:///sample.png&quot;)));\n\n        //Load SVG image - FAILS\n        mImage.Source(SvgImageSource(Uri(L&quot;ms-appx:///sample.svg&quot;)));\n        \n        //Show image on screen\n        Window window = Window::Current();\n        window.Content(mImage);\n        window.Activate();\n    }\n\n    static void Init(ApplicationInitializationCallbackParams const &amp;)\n    {\n        make&lt;App&gt;();\n    }\n};\n\nint WINAPI wWinMain(HINSTANCE, HINSTANCE, PWSTR, int)\n{\n    Application::Start(App::Init);\n}\n</code></pre>\n<hr />\n<h3>sample.svg</h3>\n<pre><code>&lt;?xml version=&quot;1.0&quot; standalone=&quot;no&quot;?&gt;\n&lt;!DOCTYPE svg PUBLIC &quot;-//W3C//DTD SVG 1.1//EN&quot; &quot;http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd&quot;&gt;\n\n&lt;svg width=&quot;100&quot; height=&quot;100&quot; version=&quot;1.1&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;\n  &lt;circle cx=&quot;50&quot; cy=&quot;50&quot; r=&quot;50&quot;/&gt;\n&lt;/svg&gt;\n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 691, "user_id": 9102144, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/cca508351edb6d6fead84c96a336e56c?s=128&d=identicon&r=PG&f=1", "display_name": "SSteven", "link": "https://stackoverflow.com/users/9102144/ssteven"}, "is_accepted": false, "score": 0, "last_activity_date": 1516262496, "creation_date": 1516262496, "answer_id": 48316388, "question_id": 48302667, "link": "https://stackoverflow.com/questions/48302667/error-while-parsing-usd-and-amounts-using-money-get/48316388#48316388", "title": "Error while parsing USD and $ amounts using money_get&lt;&gt;", "body": "<p>I have isolated the problem further.</p>\n\n<p>It doesn't seem to be a problem of the get_money() manipulator or of the money_get&lt;> facet. </p>\n\n<p>It is an issue of string v/s cin - Input of monetary amounts specified using local currency(eg: $) works correctly from an istringstream but not from cin.</p>\n\n<p>Please note that I have modified some of the following code from cppreference.com.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/19e0fdc663c5d845\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/19e0fdc663c5d845</a></p>\n\n<p>Input of monetary amounts specified using local currency(eg: $) works correctly from an istringstream:</p>\n\n<pre><code>string str = \"$1.11 $2.22 $3.33 4.44 5.55\";\n\n\nvoid stringInput()          /// works\n{\n    cout &lt;&lt; \"string Input ... works:\\n\";\n\n    istringstream s1(str);\n    s1.imbue(locale(\"en_US.UTF-8\"));\n\n    cout &lt;&lt; fixed &lt;&lt; setprecision(2);\n    cout &lt;&lt; '\"' &lt;&lt; str &lt;&lt; \"\\\" parsed with the I/O manipulator: \";\n\n    long double val;\n\n    while(s1 &gt;&gt; get_money(val))\n        cout &lt;&lt; val/100 &lt;&lt; ' ';\n\n    cout &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>string Input ... works:\n\"$1.11 $2.22 $3.33 4.44 5.55\" parsed with the I/O manipulator: 1.11 2.22 3.33 4.44 5.55 \n</code></pre>\n\n<p>Input of monetary amounts specified using local currency(eg: $) works <em>incorrectly</em> from cin (same link):</p>\n\n<pre><code>void cinInput()             /// does not work\n{\n    cout &lt;&lt; \"cin Input ... doesn't work:\\n\";\n\n    cin.imbue(locale(\"en_US.UTF-8\"));\n\n    cout &lt;&lt; fixed &lt;&lt; setprecision(2);\n    cout &lt;&lt; '\"' &lt;&lt; str &lt;&lt; \"\\\" parsed with the I/O manipulator: \";\n\n    long double val;\n\n    while(cin &gt;&gt; get_money(val))\n        std::cout &lt;&lt; val/100 &lt;&lt; ' ';\n    cout &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>cin Input ... doesn't work:\n\"$1.11 $2.22 $3.33 4.44 5.55\" parsed with the I/O manipulator: 0.11 0.22 0.33 0.44 0.55 \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 691, "user_id": 9102144, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/cca508351edb6d6fead84c96a336e56c?s=128&d=identicon&r=PG&f=1", "display_name": "SSteven", "link": "https://stackoverflow.com/users/9102144/ssteven"}, "is_accepted": false, "score": 0, "last_activity_date": 1516274377, "creation_date": 1516274377, "answer_id": 48320071, "question_id": 48302667, "link": "https://stackoverflow.com/questions/48302667/error-while-parsing-usd-and-amounts-using-money-get/48320071#48320071", "title": "Error while parsing USD and $ amounts using money_get&lt;&gt;", "body": "<p>OK, I've finally precisely pinpointed the problem and solved it.</p>\n\n<p>The root cause of the problem is not a C++ issue at all. cin, istringstream, get_money() and money_get&lt;> all work just fine.</p>\n\n<p>It's basically an input issue.</p>\n\n<p>Consider the following input string:</p>\n\n<pre><code>$1.11 $2.22 $3.33 $4.44 $5.55\n</code></pre>\n\n<p>When entered <em>offline</em>, it is read perfectly correctly, as entered.</p>\n\n<p>However, when entered <em>online</em>, the \"$1\", \"$2\", \"$3\", etc. are not read into the input. They are treated as special characters. This is why on coliru (and possibly any other online C++ engine), the $ amounts were not getting read correctly. This may be a UNIX issue, where $ is treated as a special character.</p>\n\n<p>The solution is to escape it: instead of $, enter \\$.</p>\n\n<pre><code>\\$1.11 \\$2.22 \\$3.33 \\$4.44 \\$5.55\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/e2043935559f6d40\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/e2043935559f6d40</a></p>\n\n<p>There's some junk on that link, but you can get the gist of it. The link pinpoints only the root cause of the problem. I shall use it to develop the complete solution and post that later.</p>\n"}], "owner": {"reputation": 691, "user_id": 9102144, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/cca508351edb6d6fead84c96a336e56c?s=128&d=identicon&r=PG&f=1", "display_name": "SSteven", "link": "https://stackoverflow.com/users/9102144/ssteven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1516274377, "creation_date": 1516196828, "question_id": 48302667, "link": "https://stackoverflow.com/questions/48302667/error-while-parsing-usd-and-amounts-using-money-get", "title": "Error while parsing USD and $ amounts using money_get&lt;&gt;", "body": "<p>I am getting an error while parsing USD and $ amounts using money_get&lt;>.</p>\n\n<pre><code>#include &lt;iostream&gt;         /// cin, cout\n#include &lt;locale&gt;\n#include &lt;iterator&gt;\n\nusing namespace std;\n\n\nint main()\n{\n    cin.imbue(std::locale(\"en_US.UTF-8\"));\n\n    std::cout &lt;&lt; \"USD  1.11$2.22\"\n              &lt;&lt; \" parsed with the facet directly: \";\n\n    auto&amp; f = std::use_facet&lt;std::money_get&lt;char&gt;&gt;(cin.getloc());\n    std::ios_base::iostate err;\n    std::istreambuf_iterator&lt;char&gt; frm(cin), end;\n    long double val;\n\n    /// international currency symbol\n    frm = f.get(frm, end, true, cin, err, val);\n    std::cout &lt;&lt; \"\\n \"&lt;&lt; val/100;\n\n    string str;\n    cin &gt;&gt; str;\n    cout &lt;&lt; \"\\n remaining: \" &lt;&lt; str &lt;&lt; endl;\n\n    /// local currency symbol\n    f.get(frm, end, false, cin, err, val);\n    std::cout &lt;&lt; \"\\n \"&lt;&lt; val/100;\n}    \n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/b1f76385cbed6834\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/b1f76385cbed6834</a>  </p>\n\n<p>The input is:</p>\n\n<pre><code>USD  1.11\n$2.22\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>USD  1.11$2.22 parsed with the facet directly: \n 1.11\n remaining: .22\n 0\n</code></pre>\n\n<p>The patterns from the corresponding moneypunct&lt;> facet are:\n  for USD: sign symbol space value\n  for $: sign symbol value none</p>\n\n<p>Obviously, I'm overshooting the mark when the 1st amount is read. I can't figure out why. Thanks.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1516197016, "post_id": 48302633, "comment_id": 83589995, "body": "Can you cut this down to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1516197146, "post_id": 48302633, "comment_id": 83590082, "body": "Please <a href=\"https://stackoverflow.com/posts/48302633/edit\">edit</a> your code to reduce it to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your problem.  Your current code includes much that is peripheral to your problem - a minimal sample normally looks similar to a good unit test: only performing one task, with input values specified for reproducibility."}, {"owner": {"reputation": 31, "user_id": 5884020, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/eiGQW.jpg?s=128&g=1", "display_name": "Colossus", "link": "https://stackoverflow.com/users/5884020/colossus"}, "edited": false, "score": 0, "creation_date": 1516198376, "post_id": 48302633, "comment_id": 83590907, "body": "ok,I have tried to shorten them."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1516199288, "post_id": 48302633, "comment_id": 83591532, "body": "@Colossus As you  are a new user, I permitted myself to minimize your example for you, i. e. dropping <i>any</i> irrelevant details (such as member variables), just leaving the (yet bad) friend declaration and the other class&#39; function in question. this is all that is needed to reproduce the problem. Hope this helps you asking better questions in the future..."}], "answers": [{"comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1516199443, "post_id": 48302752, "comment_id": 83591642, "body": "Why can&#39;t you have <code>class Box;</code> + <code>class Box2 {...};</code> + <code>class Box {...{</code> + <code>void Box2::printBoxMeretek(Box box) { ... }</code> ? (all in one file)? (Hint: you can.)"}, {"owner": {"reputation": 31, "user_id": 5884020, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/eiGQW.jpg?s=128&g=1", "display_name": "Colossus", "link": "https://stackoverflow.com/users/5884020/colossus"}, "edited": false, "score": 0, "creation_date": 1516200161, "post_id": 48302752, "comment_id": 83592103, "body": "So, I forward-declared Box2 class in Box.h and forward-declared Box class in Box2.h, then I have changed to friend void Box2::printBoxMeretek(Box); in Box.h and void printBoxMeretek(Box const&amp;); in Box2.h...then I have changed the implementation in Box2.cpp to void Box2::printBoxMeretek(Box const&amp; box). Do I understand it right? Because I have got this error,yet: include\\Box.h|14|error: invalid use of incomplete type &#39;class Box2&#39;| include\\Box.h|4|error: forward declaration of &#39;class Box2&#39;|"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 31, "user_id": 5884020, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/eiGQW.jpg?s=128&g=1", "display_name": "Colossus", "link": "https://stackoverflow.com/users/5884020/colossus"}, "edited": false, "score": 1, "creation_date": 1516200297, "post_id": 48302752, "comment_id": 83592187, "body": "@Colossus You need to include Box2.h within Box.h to have the complete definition available. Pre-declaring Box in Box2.h is sufficient, though, but you have to include Box.h in Box2.cpp, too."}, {"owner": {"reputation": 31, "user_id": 5884020, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/eiGQW.jpg?s=128&g=1", "display_name": "Colossus", "link": "https://stackoverflow.com/users/5884020/colossus"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1516200418, "post_id": 48302752, "comment_id": 83592290, "body": "@MartinBonner,yes, I know that I can do it in that way, but I guess It is a clearer way of design to separate the classes. Maybe I&#39;m wrong, but anyway...I want to solve this way,too. :-)"}, {"owner": {"reputation": 31, "user_id": 5884020, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/eiGQW.jpg?s=128&g=1", "display_name": "Colossus", "link": "https://stackoverflow.com/users/5884020/colossus"}, "edited": false, "score": 0, "creation_date": 1516200943, "post_id": 48302752, "comment_id": 83592632, "body": "@Aconcagua, now it&#39;s working. :-) One more remark: I have forgotten to change the function declaration to the new, referenced one in Box.h [friend void Box2::printBoxMeretek(Box const&amp;)], it was my fault. Thank you for your help, I am going to mark your answer as the solution."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 31, "user_id": 5884020, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/eiGQW.jpg?s=128&g=1", "display_name": "Colossus", "link": "https://stackoverflow.com/users/5884020/colossus"}, "edited": false, "score": 0, "creation_date": 1516212935, "post_id": 48302752, "comment_id": 83600326, "body": "@Colossus Actually, the reference is not <i>necessary</i> - adopted my answer appropriately - still, the reference appears more correct to me for the specific use case..."}], "tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": true, "score": 3, "last_activity_date": 1516212722, "last_edit_date": 1516212722, "creation_date": 1516197085, "answer_id": 48302752, "question_id": 48302633, "link": "https://stackoverflow.com/questions/48302633/c-friend-function-does-not-work-with-multiple-header-and-source-files/48302752#48302752", "title": "C++ friend function does not work (with multiple header and source files)", "body": "<pre><code>friend void printBoxMeretek(Box);\n</code></pre>\n\n<p>This declares a <em>free</em> function being friend of Box. You want a <em>member</em> function being friend, so you should declare a such:</p>\n\n<pre><code>class Box2;\nclass Box\n{\n    friend void Box2::printBoxMeretek(Box);\n};\n</code></pre>\n\n<p>Now problem is, you need the complete class declaration available for, so:</p>\n\n<pre><code>class Box;\nclass Box2;\n{\npublic:\n    void printBoxMeretek(Box);\n};\n\nclass Box\n{\n    friend void Box2::printBoxMeretek(Box);\n};\n</code></pre>\n\n<p>It does not matter if you have this in the same header or within two of them &ndash; the problem remains (i.&nbsp;e. you need to include Box2.h from Box.h).</p>\n\n<p>Side note (thanks, Martin, for clarification): Even though a function is declared using <code>Box</code> class, the complete definition of the class only needs to be available when you either <em>define</em> or <em>call</em> the function, so this works fine as it is. You just have to make sure to include both headers wherever you do one of these (or just always Box.h, which comes with Box2.h implicitly).</p>\n\n<p>You might have preferred a reference, though. Your box classes do not look to me as if you really intended to copy them on each call to the print function:</p>\n\n<pre><code>void Box2::printBoxMeretek(Box const&amp; b);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1516199298, "post_id": 48303015, "comment_id": 83591539, "body": "@Aconcagua : No it doesn&#39;t.  It declares a member function which takes a Box (by value) as argument.  The corresponding <i>definition</i> does declare a function parameter variable ... and that needs the definition (not just declaration) of the class."}, {"owner": {"reputation": 31, "user_id": 5884020, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/eiGQW.jpg?s=128&g=1", "display_name": "Colossus", "link": "https://stackoverflow.com/users/5884020/colossus"}, "edited": false, "score": 0, "creation_date": 1516199422, "post_id": 48303015, "comment_id": 83591627, "body": "Thanks for answering, but I have received this error:...\\Box2.cpp|14|error: &#39;box&#39; has incomplete type| include\\Box2.h|8|error: forward declaration of &#39;class Box&#39;|"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1516199527, "post_id": 48303015, "comment_id": 83591687, "body": "Box2.cpp will need to include both Box2.h <i>and</i> Box.h."}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1516208100, "last_edit_date": 1516208100, "creation_date": 1516197901, "answer_id": 48303015, "question_id": 48302633, "link": "https://stackoverflow.com/questions/48302633/c-friend-function-does-not-work-with-multiple-header-and-source-files/48303015#48303015", "title": "C++ friend function does not work (with multiple header and source files)", "body": "<blockquote>\n<pre><code>   //friend function from Box2 [...]\n   friend void printBoxMeretek(Box);\n</code></pre>\n</blockquote>\n\n<p>Because that is <em>not</em> the function from <code>Box2</code>.  Instead it is the declaration of a freestanding function in the global namespace <code>::printBoxMeretek</code>.</p>\n\n<p>Instead what you need is:</p>\n\n<pre><code>    friend void Box2::printBoxMeretek(Box);\n</code></pre>\n\n<p>... but to make that work, you will need to define <code>Box2</code> first - so <code>#include \"Box2.h\"</code> at the top of Box.h.</p>\n\n<p>The final wrinkle, is that Box2.h can't include Box.h (otherwise you have a circular include).  Fortunately you don't need to.  Instead of <code>#include \"Box.h\"</code>, just use <code>class Box;</code> which declares the class (so you can use it as a function argument), but doesn't define it (so you can't create variables of type <code>Box</code>).</p>\n\n<p>So, Box2.h:</p>\n\n<pre><code>class Box;\n\nclass Box2 { \npublic:\n    void PrintBox(Box b); \n};\n</code></pre>\n\n<p>Note that I have elided include guards.  You want those.</p>\n\n<p>Box.h:</p>\n\n<pre><code>#include \"Box2.h\"\nclass Box {\n    int v;\npublic:\n    Box(int v);\n    friend void Box2::PrintBox(Box b);\n\n};\n</code></pre>\n\n<p>Box.cpp</p>\n\n<pre><code>#include \"Box.h\"\nBox::Box(int v) : v(v) {}\n</code></pre>\n\n<p>Box2.cpp</p>\n\n<pre><code>#include \"Box2.h\" // Always put \"our\" header first to check it includes everything.\n#include \"Box\"    // Needed to define member function\n#include &lt;iostream&gt;\n\nBox2::PrintBox(Box b) {\n    std::cout &lt;&lt; b.v &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"Box.h\"\nint main() {\n    Box b(42);\n    Box2 b2;\n    b2.PrintBox(b);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5884020, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/eiGQW.jpg?s=128&g=1", "display_name": "Colossus", "link": "https://stackoverflow.com/users/5884020/colossus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 344, "favorite_count": 0, "accepted_answer_id": 48302752, "answer_count": 2, "score": 0, "last_activity_date": 1516212722, "creation_date": 1516196699, "last_edit_date": 1516199151, "question_id": 48302633, "link": "https://stackoverflow.com/questions/48302633/c-friend-function-does-not-work-with-multiple-header-and-source-files", "title": "C++ friend function does not work (with multiple header and source files)", "body": "<p>I have tried to find a solution in the internet,but I have always found examples where the classes, main function,etc are written in one file, not separated. Maybe it would be enough,but I am new in C++ and I guess my problem is different,because I use different header and source files for each classes and a different source file for main().<br>So, the problem is: I have tried to make printBoxMeretek(Box) function in Box2 class to be the friend function of Box class. It doesn't work and I don't know why. When I make the whole Box2 class to be friend of Box class, everything is ok. What should I do, if I want only printBoxMeretek(Box) function to be friend,not the whole Box2 class?<br>Anyway,the error message says that the problem is that boxSzelesseg and boxMagassag variables in Box class are private. But as I know a friend function should be able to handle private variables.<br>Here are the contents of my test files:<br>Box.h<br></p>\n\n<pre><code>#ifndef BOX_H\n#define BOX_H\n\nclass Box\n{\n    //friend function from Box2 [can be written anywhere: in private, in public,etc section] =&gt;It does NOT work...why???\n    friend void printBoxMeretek(Box);\n\n    //make the whole Box2 class friend =&gt;It works well.\n//    friend class Box2;\n\n    public:\n};\n\n#endif // BOX_H\n</code></pre>\n\n<p><br>Box2.h<br></p>\n\n<pre><code>#ifndef BOX2_H\n#define BOX2_H\n\n#include &lt;iostream&gt;\n#include &lt;Box.h&gt;\n\nclass Box2\n{\n    public:\n        void printBoxMeretek(Box)\n        { }\n};\n\n#endif // BOX2_H\n</code></pre>\n\n<p><br>Thank you for your help.</p>\n"}, {"tags": ["c++", "c++11", "constructor", "move-semantics", "move-constructor"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1516196549, "post_id": 48302541, "comment_id": 83589704, "body": "There aren&#39;t any pointers in your code. It&#39;s not clear what you are asking about."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1516196835, "post_id": 48302541, "comment_id": 83589888, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3106110/what-are-move-semantics\">What are move semantics?</a>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7697718"}, "edited": false, "score": 0, "creation_date": 1516197470, "post_id": 48302588, "comment_id": 83590279, "body": "What i can&#39;t understand is how can i bind a temporary value to my object if this will be destroy. For example boVector(boVector&amp;&amp; size) temporary object start to exist with &quot;(&quot; and end his existence with &quot;)&quot;. If in my move Ctor i say something like <b>this.m_size = size</b>. After the end of the Ctor <b>size</b> dosen&#39;t exist anymore so also m_size should be empty."}, {"owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "edited": false, "score": 0, "creation_date": 1516197972, "post_id": 48302588, "comment_id": 83590611, "body": "@Adrian what will be destroyed is the <i>moved-from</i> object, the temporary (think of it as an empty object after being moved-from), and <b>not</b> the <i>moved-to</i> object."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1516198380, "post_id": 48302588, "comment_id": 83590912, "body": "@Adrian <code>this-&gt;m_size</code> is not a reference. Therefore <code>this-&gt;m_size = size</code> assignment makes a copy. After the copy, whatever happens to the object that was copied from has no effect on <code>m_size</code> because it is a separate object."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7697718"}, "edited": false, "score": 0, "creation_date": 1516198923, "post_id": 48302588, "comment_id": 83591254, "body": "So here the move Ctor is acting like a copy ctor? When i think at move i am thinking for example if i see a watch..i like it so i take it. What is the point to take it if the watch it will destroy itself. When i am thinking at copy ctor..ok i see the watch i like it so i make my own watch after yours but without auto destroying mechanism."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1516201427, "post_id": 48302588, "comment_id": 83592953, "body": "@Adrian Think of moving as moving the contents of the object, not the object itself. In a sense, the original object isn&#39;t moved per se, but disappears. (A more similar situation would be &quot;what is the point in taking the watch from the table if it&#39;s not going to be on the table any more&quot;, which I think you&#39;ll agree is a strange thing to ask yourself.)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7697718"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1516201973, "post_id": 48302588, "comment_id": 83593354, "body": "@molbdnilo maybe here is my problem. If i think to move the content and not the object itself then it will be copy constructed because i can&#39;t assign to my abject an address, i need to copy all the content. When i am thinking on a move Ctor i am thinking at some address that is assigned to my object in order to avoid recopying. I am right?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1516202621, "post_id": 48302588, "comment_id": 83593836, "body": "@Adrian You shouldn&#39;t be thinking about addresses at all - no objects are <i>physically</i> moved. The only difference between the move constructor and the copy constructor is that the move constructor&#39;s argument will be destroyed when you&#39;re finished with it - that&#39;s why you&#39;re allowed to &quot;steal&quot; its data and empty it (but you don&#39;t have to). Both objects remain in the same place, only their contents change."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7697718"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1516203069, "post_id": 48302588, "comment_id": 83594178, "body": "@molbdnilo Then what is the point of the move Ctor if in the end i need to copy the content of the temporary object, and i can&#39;t make my object just point to the new temporary one? How is this more efficient than copy ctor?:( Thanks for your patience."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1516203415, "post_id": 48302588, "comment_id": 83594431, "body": "@Adrian Consider an object with a pointer to an array with a million strings. If you copy it, you need to copy a million strings, and the other object will then free its memory, destroying a million strings with it. If you move it, you just copy the pointer and set the other object&#39;s pointer to the null pointer. Now you&#39;ve copied only one pointer and destroyed nothing."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7697718"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1516204093, "post_id": 48302588, "comment_id": 83594890, "body": "I understand. The pointer inside the object is valid because is still pointing to a valid array (is not deleted). After this we only need to set the temporary object to null. Now i understand what is the idea. Thank you very much @molbdnilo"}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 10, "last_activity_date": 1516196583, "creation_date": 1516196583, "answer_id": 48302588, "question_id": 48302541, "link": "https://stackoverflow.com/questions/48302541/how-move-constructor-works-in-c/48302588#48302588", "title": "How move constructor works in C++?", "body": "<p>A \"move constructor\" is nothing magical - it is a constructor that takes an <em>rvalue reference</em>.</p>\n\n<p><em>Rvalue references</em> bind to temporary object, and have the \"meaning\" of something that's about to expire and that won't be accessed later on in the program: this enables developers to implement moves for resource-holding classes in terms of pointer swaps or similarly fast operations.</p>\n\n<p>Your <code>boVector</code> class cannot really take any advantage from move semantics, as it just stores an <code>int</code> and doesn't hold any resource. Moving an <code>int</code> is as fast as copying one.</p>\n\n<hr>\n\n<p>In the </p>\n\n<pre><code>foo(std::move(createBoVector()));\n</code></pre>\n\n<p>expression, <code>std::move</code> is redundant as <code>createBoVector()</code> is already an <em>rvalue</em>.</p>\n\n<hr>\n\n<p>Consider:</p>\n\n<pre><code>foo(createBoVector());\n</code></pre>\n\n<p>This will invoke <code>boVector(boVector&amp;&amp;)</code> as it's a better match than <code>boVector(const boVector&amp;)</code>. </p>\n\n<p>The instance created by <code>createBoVector()</code> will live for the full duration of the expression - this means that the <em>rvalue reference</em> will be pointing to a valid object for the duration of <code>boVector(boVector&amp;&amp;)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1516200234, "post_id": 48302916, "comment_id": 83592146, "body": "@Adrian: In your case - no difference between move and copy ctor. And indeed, a &quot;shallow copying&quot; of an integer, or a structure-with-an-integer, is the same as a &quot;deep&quot; copy. Also, in your example, no temporary objects will be used at all."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7697718"}, "edited": false, "score": 0, "creation_date": 1516201736, "post_id": 48302916, "comment_id": 83593165, "body": "can you give me a more relevant example, that we can speek about?"}], "tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": false, "score": 2, "last_activity_date": 1516213058, "last_edit_date": 1516213058, "creation_date": 1516197555, "answer_id": 48302916, "question_id": 48302541, "link": "https://stackoverflow.com/questions/48302541/how-move-constructor-works-in-c/48302916#48302916", "title": "How move constructor works in C++?", "body": "<blockquote>\n  <p>All say that a move Ctor is a shallow copy copy or just a pointer assignment.</p>\n</blockquote>\n\n<p>Not all say that, as it is not true. A move constructor is what you define it to be. In your example, your move ctor does something else entirely. The point of a move ctor - as opposed to a copy ctor - is that you know that the other object is about to be destroyed, so you can cannibalize, or move, its resources.</p>\n\n<p>A move constructor <em>may</em> make a \"shallow copy\", although that term is colloquial rather than well-defined in C++. \"Just a pointer assignment\" - perhaps, possibly, sometimes.</p>\n\n<blockquote>\n  <p>But how can i initiate my object with a pointer to a temporary object (when this object will be destroy my object will point to an unknown address and this is not valid from my point of view).</p>\n</blockquote>\n\n<p>You don't (usually) initialize an object of type <code>T</code> with a pointer of type <code>T*</code>, per se. You can assign <code>my_t = *my_t_ptr</code>, or if you know you can \"cannibalize\" the <code>T</code> which <code>my_t_ptr</code> is pointing to, since it will soon be deleted, then you can assign <code>my_t = std::move(*my_t_ptr)</code>. </p>\n\n<blockquote>\n  <p>Can you give me a more relevant example [of a meaningful difference between a move constructor and a copy constructor]...?</p>\n</blockquote>\n\n<p>The \"classical\" example is when your <code>T</code> is constructed by allocating some space on the heap. When you copy-construct one <code>T</code> from another, you have no choice but to allocate a second stretch of memory; when you move-construct a <code>T</code>, you can :1. copy the pointer from the existing <code>T</code> to the <code>T</code> under construction. 2. set the existing <code>T</code>'s member pointer to <code>nullptr</code>. In this case you only ever use one <code>T</code>'s worth of stack space.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7697718"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 838, "favorite_count": 1, "accepted_answer_id": 48302588, "answer_count": 2, "score": 5, "last_activity_date": 1516276038, "creation_date": 1516196415, "last_edit_date": 1516276038, "question_id": 48302541, "link": "https://stackoverflow.com/questions/48302541/how-move-constructor-works-in-c", "title": "How move constructor works in C++?", "body": "<p>I have read many articles about move constructor (even on stack) but i didn't find anywhere an exact explanation about how this works (how is transfer pointer to a temporary object and saved if this temporary variable and its address will be destroy when meet \")\" ).</p>\n\n<p>Here is a simple example</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\nclass boVector {\nprivate:\n    int size;\npublic:\n    boVector() {};\n    boVector(const boVector&amp; rhs) { cout &lt;&lt; \"copy Ctor.\" &lt;&lt; endl; }\n    boVector(boVector&amp;&amp; rhs) { cout &lt;&lt; \"move Ctor.\" &lt;&lt; endl; }\n};\n\nvoid foo(boVector v) {}\nboVector createBoVector() { return boVector(); }\n\nint main()\n{\n    //copy\n    boVector reausable = createBoVector();\n    foo(reausable);\n    //move\n    foo(std::move(createBoVector()));\n    return 0;\n}\n</code></pre>\n\n<p>All say that a move Ctor is a shallow copy copy or just a pointer assignment. But how can i initiate my object with a pointer to a temporary object (when this object will be destroy my object will point to an unknown address and this is not valid from my point of view).</p>\n\n<p>Is not right to initiate a variable with a pointer address that will no longer exist after he meet \")\".</p>\n\n<p>Please if can somebody explain me how looks this temporary variable in memory and how is possible to assigned the address of temporary object to my current one and this operation to be a valid one.</p>\n"}, {"tags": ["c++", "templates", "metaprogramming", "forward-declaration", "default-arguments"], "comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1516196426, "post_id": 48302501, "comment_id": 83589624, "body": "I&#39;m currently doing this, but that means I&#39;m not forward typedeffing, I&#39;m making a <i>new</i> typedef: <code>template &lt;class Key, class Data, class KeyCompare&gt; class basic_ptree; typedef basic_ptree&lt;std::string, std::string, std::less&lt;std::string&gt;&gt; ptree;</code> And I don&#39;t want to make my own typedef for fear of inconsistency."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1516196474, "post_id": 48302501, "comment_id": 83589656, "body": "Ah, why add your current approach in the tight space of a comment?"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1516196558, "post_id": 48302501, "comment_id": 83589712, "body": "@StoryTeller I thought there was too much already in the question. It was getting overwhelming. Do you not think so?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1516196630, "post_id": 48302501, "comment_id": 83589753, "body": "Personally, i&#39;d rather see another 10 line segments (<code>---</code>), instead of parsing code from comments (it&#39;s groan inducing for me personally)."}, {"owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "edited": false, "score": 0, "creation_date": 1516196995, "post_id": 48302501, "comment_id": 83589984, "body": "is it really so bad to just include the &quot;<i>ptree_fwd.hpp</i>&quot; header ?"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1516197137, "post_id": 48302501, "comment_id": 83590075, "body": "@StoryTeller Alright I&#39;ve rolled it into the question, but rather than recognizing it as the mandatory C++ downvote, I&#39;m going to blame your edit for the inevitable downvote."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1516197171, "post_id": 48302501, "comment_id": 83590097, "body": "Have an advance then"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1516197235, "post_id": 48302501, "comment_id": 83590145, "body": "@StoryTeller Ha, thanks that softens the forthcoming blow :)"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "edited": false, "score": 0, "creation_date": 1516197410, "post_id": 48302501, "comment_id": 83590248, "body": "@MassimilianoJanes That&#39;s a pretty subjective answer. But suffice to say for the purposes of this question, <code>#include &lt;boost&#47;property_tree&#47;ptree.hpp&gt;</code> would not be a well received answer!"}, {"owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "edited": false, "score": 0, "creation_date": 1516198975, "post_id": 48302501, "comment_id": 83591296, "body": "My comment was not intended to be provocative, I&#39;m just trying to understand what are you asking for; you already know this is not possible in a literal way, so I guess you&#39;re looking for some kind of workaround; now, in order to suggest it (like using a template alias, or exploting ptree&#39;s include guards), we&#39;d need to know better what do you mean by &quot;<i>But I don&#39;t want to include Boost</i>&quot; and &quot;<i>I want to depend on the same defaulted forward declaration</i>&quot; ... BTW, the <i>ptree_fwd.hpp</i> header <i>is</i> the way boost devs do it, so it would be informative to know what&#39;s exactly wrong in using it ..."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "edited": false, "score": 0, "creation_date": 1516199788, "post_id": 48302501, "comment_id": 83591869, "body": "@MassimilianoJanes I&#39;m more interested in the academy of a solution. That is to say I wanted there to be a way to do this, though it seems there&#39;s not :( So in that case it is very likely that your suggestion of <code>#include &lt;boost&#47;property_tree&#47;ptree_fwd.hpp&gt;</code> is my best bet."}], "answers": [{"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1516281740, "post_id": 48303499, "comment_id": 83629807, "body": "The use of <code>ptree</code> is internal to my implementation layer&#39;s header. It is important that my interface layer does not pull in Boost."}], "tags": [], "owner": {"reputation": 930, "user_id": 8951473, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UTexO-HsNuo/AAAAAAAAAAI/AAAAAAAAAEg/tiZWCUU3W8w/photo.jpg?sz=128", "display_name": "oisyn", "link": "https://stackoverflow.com/users/8951473/oisyn"}, "is_accepted": true, "score": 2, "last_activity_date": 1516199411, "creation_date": 1516199411, "answer_id": 48303499, "question_id": 48302501, "link": "https://stackoverflow.com/questions/48302501/how-do-i-forward-declare-a-template-type-that-has-been-forward-declared-elsewher/48303499#48303499", "title": "How do I forward declare a template type that has been forward declared elsewhere with a defaulting", "body": "<p>The short answer is that you can't. You either have to guarantee somehow that the other declaration will never be included so you can specify your own default, or you need to depend on that other declaration.</p>\n\n<p>But I get the feeling this is an <a href=\"https://en.wikipedia.org/wiki/XY_problem\" rel=\"nofollow noreferrer\">XY problem</a>, for the following statement:</p>\n\n<blockquote>\n  <p>But I don't want to include Boost in my headers.</p>\n</blockquote>\n\n<p>Why not? Your code is obviously dependent on Boost's <code>ptree</code>, so anyone working with your code would have to have Boost installed anyway. If you want your declarations to also compile when Boost isn't installed, there are several options:</p>\n\n<ul>\n<li>Make sure you exclude the bits that use <code>ptree</code> using preprocessor directives (<code>#if</code>/<code>#endif</code> blocks)</li>\n<li>Use C++17's <code>__has_include()</code> to test for the existence of <code>&lt;boost/property_tree/ptree.hpp&gt;</code>, and then either include it if it exists, or declare your own <code>ptree</code> if it doesn't.</li>\n</ul>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 48303499, "answer_count": 1, "score": 2, "last_activity_date": 1568258064, "creation_date": 1516196309, "last_edit_date": 1568258064, "question_id": 48302501, "link": "https://stackoverflow.com/questions/48302501/how-do-i-forward-declare-a-template-type-that-has-been-forward-declared-elsewher", "title": "How do I forward declare a template type that has been forward declared elsewhere with a defaulting", "body": "<p>So the excellent answer to <a href=\"https://stackoverflow.com/q/48282811/2642059\">this question</a> states that you can default template types in a forward declaration, however:</p>\n\n<blockquote>\n  <p>You can specify each default template argument only once</p>\n</blockquote>\n\n<p>This is more fully specified in the linked question, but Boost's Property Tree stuff works with the <code>ptree</code> type:</p>\n\n<pre><code>typedef basic_ptree&lt;std::string, std::string&gt; ptree;\n</code></pre>\n\n<p>But the <code>basic_ptree</code> class is defined like this:</p>\n\n<pre><code>template&lt;class Key, class Data, class KeyCompare&gt;\nclass basic_ptree\n</code></pre>\n\n<p>The only reason the <code>ptree</code> <code>typedef</code> is defined with only 2 template parameters is that before it's <code>typedef</code> there is the forward declaration:</p>\n\n<pre><code>template &lt; class Key, class Data, class KeyCompare = std::less&lt;Key&gt; &gt;\nclass basic_ptree;\n</code></pre>\n\n<hr>\n\n<p>This brings me to my actual question. I need to pass around a <code>ptree</code>. But I don't want to include <code>Boost</code> in my headers. This means that I'll have to forward declare. <em>But I can't match the defaulted forward declaration because the default can only be declared once.</em></p>\n\n<p><strong>How can I write a forward declaration and forward typedef that depends upon the defaulting in another headers forward declaration?</strong></p>\n\n<p>I'm currently doing this, but that means I'm <em>not</em> forward <code>typedef</code>'ing, I'm making a <em>new</em> <code>typedef</code>:</p>\n\n<pre><code>template &lt;class Key, class Data, class KeyCompare&gt; class basic_ptree;\ntypedef basic_ptree&lt;std::string, std::string, std::less&lt;std::string&gt;&gt; ptree; \n</code></pre>\n\n<p>For the sake of consistency I want to depend on the same defaulted forward declaration of <code>basic_ptree</code> that the original <code>ptree</code> <code>typedef</code> depended upon.</p>\n"}, {"tags": ["c++", "gcc", "cmake", "linker", "yocto"], "comments": [{"owner": {"reputation": 1122, "user_id": 3218438, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XE9Rb.png?s=128&g=1", "display_name": "Nibor", "link": "https://stackoverflow.com/users/3218438/nibor"}, "edited": false, "score": 0, "creation_date": 1516472899, "post_id": 48302419, "comment_id": 83706054, "body": "Could you show your <code>target_link_libraries()</code> command for mylib? Why is <code>pthread</code> mentioned twice (once with relative, once with absolute path)?"}, {"owner": {"reputation": 741, "user_id": 6800528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f44dc5bd276f9814315ae9b5abfa9f49?s=128&d=identicon&r=PG&f=1", "display_name": "lukaszgard", "link": "https://stackoverflow.com/users/6800528/lukaszgard"}, "edited": false, "score": 0, "creation_date": 1516612696, "post_id": 48302419, "comment_id": 83742889, "body": "Please be informed that from 2.4 Yocto release, shared tmp/sysroots is not exist any more <a href=\"http://www.yoctoproject.org/docs/2.4/ref-manual/ref-manual.html#structure-build-tmp-sysroots\" rel=\"nofollow noreferrer\">docs</a>"}], "owner": {"reputation": 63, "user_id": 3458705, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d8546dfdb751a41752a43d9da2d5136e?s=128&d=identicon&r=PG&f=1", "display_name": "user3458705", "link": "https://stackoverflow.com/users/3458705/user3458705"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 445, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1516196018, "creation_date": 1516196018, "question_id": 48302419, "link": "https://stackoverflow.com/questions/48302419/cmake-cannot-generate-a-safe-linker-search-path-yocto-2-4", "title": "CMake cannot generate a safe linker search path - yocto 2.4", "body": "<p>I have 2 yocto pkgs that can be successfully compiled with gcc 5.4, cmake 3.6.1 on yocto 2.0.2 but I'm facing the following issue with: gcc 6.3, cmake 3.6.1 on yocto 2.4 .</p>\n\n<p>After some research, I observed that yocto changed the sysroot structure (sysroot per package instead of a common sysroot).\nThe error looks like this:</p>\n\n<pre><code>CMake Warning at src/mytest/CMakeLists.txt:71 (add_executable):\n  Cannot generate a safe linker search path for target mytest because\n  files in some directories may conflict with libraries in implicit\n  directories:\n\nlink library [libpthread.so] in /local/build2/tmp/work/corei7-64-poky-linux/mytest/recipe-sysroot/usr/lib may be hidden by files in:\n  /local/build2/tmp/work/corei7-64-poky-linux/mylib/recipe-sysroot/usr/lib\n\n\n  Some of these libraries may not be found correctly.\n</code></pre>\n\n<p>Leading to linking error: <code>ld: cannot find /lib/libpthread.so.0</code></p>\n\n<p>I observed in some cmake generated files that mylib package exports its libraries with hardcoded pkg name, that will be later used by test pkg:  </p>\n\n<pre><code>set_target_properties(mylib PROPERTIES\n  INTERFACE_INCLUDE_DIRECTORIES \"/usr/include/;/{_IMPORT_PREFIX}/include\"\n  INTERFACE_LINK_LIBRARIES \"-lpthread; mylib; /local/build2/tmp/work/corei7-64-poky-linux/mylib/recipe-sysroot/usr/lib/libpthread.so;\"\n)\n</code></pre>\n\n<p>Is there any way to avoid this kind of duplication? Or to remove the full paths from cmake generated files?   </p>\n"}, {"tags": ["c++", "boost", "c++17", "stdany"], "answers": [{"comments": [{"owner": {"reputation": 12134, "user_id": 100724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/28c55fab931fa7153f0625a09b441674?s=128&d=identicon&r=PG", "display_name": "Viktor Sehr", "link": "https://stackoverflow.com/users/100724/viktor-sehr"}, "edited": false, "score": 2, "creation_date": 1530899888, "post_id": 48302957, "comment_id": 89412314, "body": "I do not agree to the last statement, std::any does have use-cases such as calling the contained objects constructor or type-safe copying. Providing an unsafe cast would not break these advantages. (The lack of unsafe_cast is a reason I still stick  to boost::any)"}, {"owner": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "reply_to_user": {"reputation": 12134, "user_id": 100724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/28c55fab931fa7153f0625a09b441674?s=128&d=identicon&r=PG", "display_name": "Viktor Sehr", "link": "https://stackoverflow.com/users/100724/viktor-sehr"}, "edited": false, "score": 0, "creation_date": 1531068988, "post_id": 48302957, "comment_id": 89447386, "body": "@ViktorSehr Thanks for your comment. Please note that the last paragraph is not the main point in the answer. The main point is that the function <code>unsafe_any_cast</code> is not part of the public interface of Boost, which means it may not be available on future versions. The last paragraph adds a view from a design perspective: Having a <i>public</i> function whose sole purpose is <i>breaking the class&#39; contract</i> is not a good design decision. If you need an unsafe cast, <code>std::any</code> (Or <code>boost::any</code>, for that matter) is probably not the way to go."}], "tags": [], "owner": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "is_accepted": true, "score": 5, "last_activity_date": 1516222008, "last_edit_date": 1516222008, "creation_date": 1516197703, "answer_id": 48302957, "question_id": 48302386, "link": "https://stackoverflow.com/questions/48302386/why-is-there-no-unsafe-any-cast-for-stdany/48302957#48302957", "title": "Why is there no unsafe_any_cast for std::any?", "body": "<p><code>std::any</code> is a <strong>type-safe</strong> container for single values of any type. </p>\n\n<p>Note from the comment in the snippet you posted, that Boost's <code>unsafe_any_cast</code> is <strong>not</strong> part of the public interface. It is an implementation detail, and is not meant to be used by the end-user. That is why it is not mentioned in the documentation.</p>\n\n<p>Promoting it to the public interface would break the purpose of having a type-safe container in the first place.</p>\n"}], "owner": {"reputation": 1914, "user_id": 4841248, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ed847bb43b46b8554a32b5910383341a?s=128&d=identicon&r=PG", "display_name": "Maarten Bamelis", "link": "https://stackoverflow.com/users/4841248/maarten-bamelis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 533, "favorite_count": 1, "accepted_answer_id": 48302957, "answer_count": 1, "score": 3, "last_activity_date": 1516222286, "creation_date": 1516195923, "last_edit_date": 1516222286, "question_id": 48302386, "link": "https://stackoverflow.com/questions/48302386/why-is-there-no-unsafe-any-cast-for-stdany", "title": "Why is there no unsafe_any_cast for std::any?", "body": "<p>My local version of the Boost headers (1.56.0) has the following functions defined in <code>boost/any.hpp</code>, copied verbatim:</p>\n\n<pre><code>// Note: The \"unsafe\" versions of any_cast are not part of the\n// public interface and may be removed at any time. They are\n// required where we know what type is stored in the any and can't\n// use typeid() comparison, e.g., when our types may travel across\n// different shared libraries.\ntemplate&lt;typename ValueType&gt;\ninline ValueType * unsafe_any_cast(any * operand) BOOST_NOEXCEPT\n{\n    return &amp;static_cast&lt;any::holder&lt;ValueType&gt; *&gt;(operand-&gt;content)-&gt;held;\n}\n\ntemplate&lt;typename ValueType&gt;\ninline const ValueType * unsafe_any_cast(const any * operand) BOOST_NOEXCEPT\n{\n    return unsafe_any_cast&lt;ValueType&gt;(const_cast&lt;any *&gt;(operand));\n}\n</code></pre>\n\n<p>Even though the online documentation does not even acknowledge their existence: <a href=\"http://www.boost.org/doc/libs/1_59_0/doc/html/any/reference.html\" rel=\"nofollow noreferrer\">http://www.boost.org/doc/libs/1_59_0/doc/html/any/reference.html</a></p>\n\n<p>I noticed that <a href=\"http://en.cppreference.com/w/cpp/utility/any\" rel=\"nofollow noreferrer\"><code>std::any</code></a> also does not seem to have support for an unsafe any cast.</p>\n\n<p><strong>Why does the C++17 standard not introduce <code>std::unsafe_any_cast</code>?</strong></p>\n\n<p>If an exact reason cannot be found (or if it was simply never proposed), what would be the most compelling arguments to not provide unsafe access to the value stored in an <code>std::any</code> object?</p>\n"}, {"tags": ["c++", "arrays", "string"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1516195909, "post_id": 48302324, "comment_id": 83589261, "body": "While <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\"><code>std::getline</code></a> is commonly used to read &quot;lines&quot;, it also have an argument that lets users of it specify the &quot;line ending&quot;. Together with e.g. an <a href=\"http://en.cppreference.com/w/cpp/io/basic_istringstream\" rel=\"nofollow noreferrer\"><code>std::istringstream</code></a> it can be used to tokenize strings containing any field separator (like e.g. the comma). Then it&#39;s just a matter of <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/stol\" rel=\"nofollow noreferrer\">converting the strings to <code>int</code> values</a>."}, {"owner": {"reputation": 23, "user_id": 6307019, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/dd9c17bafff7011870f16821607090b1?s=128&d=identicon&r=PG&f=1", "display_name": "Lauren1265", "link": "https://stackoverflow.com/users/6307019/lauren1265"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1516196296, "post_id": 48302324, "comment_id": 83589545, "body": "I wanted to keep comma as separator when I will fill the array.But if I read the string char by char, how can I store the two ciphers between commas as in my example?"}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1516196964, "post_id": 48302324, "comment_id": 83589961, "body": "How you declare <code>stringArrayg</code>?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1516197558, "post_id": 48302324, "comment_id": 83590341, "body": "Please decide what you want, an int array as the title says or a string array as implied elsewhere."}], "answers": [{"tags": [], "owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "is_accepted": true, "score": 0, "last_activity_date": 1516197010, "creation_date": 1516197010, "answer_id": 48302730, "question_id": 48302324, "link": "https://stackoverflow.com/questions/48302324/how-to-put-string-elements-separated-by-commas-into-an-int-array/48302730#48302730", "title": "How to put string elements separated by commas into an int array?", "body": "<p>Here is an example that uses vectors, std::replace, and std::istringstream:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nstd::vector&lt;int&gt; convertToIntArray(std::string input)\n{\n    std::replace(input.begin(), input.end(), ',', ' ');\n\n    std::istringstream stringReader{ input };\n\n    std::vector&lt;int&gt; result;\n\n    int number;\n    while (stringReader &gt;&gt; number)\n    {\n        result.push_back(number);\n    }\n\n    return result;\n}\n\nint main()\n{\n    std::string testString = \"5,6,13,4,14,22\";\n\n    std::vector&lt;int&gt; newArray = convertToIntArray(testString);\n\n    for (int i = 0; i &lt; newArray.size(); ++i)\n    {\n        std::cout &lt;&lt; newArray[i] &lt;&lt; \" \";\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 333, "user_id": 3363979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0192641443fbb74d61843f178a852383?s=128&d=identicon&r=PG&f=1", "display_name": "Ugo Giordano", "link": "https://stackoverflow.com/users/3363979/ugo-giordano"}, "is_accepted": false, "score": 0, "last_activity_date": 1516199347, "last_edit_date": 1516199347, "creation_date": 1516198468, "answer_id": 48303182, "question_id": 48302324, "link": "https://stackoverflow.com/questions/48302324/how-to-put-string-elements-separated-by-commas-into-an-int-array/48303182#48303182", "title": "How to put string elements separated by commas into an int array?", "body": "<p>Why not using <a href=\"http://www.boost.org/doc/libs/1_66_0/libs/tokenizer/\" rel=\"nofollow noreferrer\">Boost::Tokenizer</a> as like that:</p>\n\n<pre><code>include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;boost/lexical_cast.hpp&gt;\n#include &lt;boost/tokenizer.hpp&gt;\n\nusing namespace std;\nusing namespace boost;\nint main()\n{\n    string str = \"5,6,13,4,14,22\"; /// string to parse\n    vector&lt;int&gt; nums; /// vector containing the numbers extracted from the string\n\n\n    char_separator&lt;char&gt; sep(\",\"); /// char separator for the tokenizer\n    /// extracting all the tokens separated by \",\"\n    tokenizer&lt;char_separator&lt;char&gt; &gt; tokens(str, sep); \n\n    /// looping over the tokes and storing them in the vector by\n    /// casting each token to an int\n    std::transform( tokens.begin(), tokens.end(), std::back_inserter(nums), &amp;boost::lexical_cast&lt;int,std::string&gt; );\n\n    /// printing the vector content\n    for(const auto &amp;v: nums) {\n        cout &lt;&lt; v &lt;&lt; \" \";\n    }\n    cout &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6307019, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/dd9c17bafff7011870f16821607090b1?s=128&d=identicon&r=PG&f=1", "display_name": "Lauren1265", "link": "https://stackoverflow.com/users/6307019/lauren1265"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 472, "favorite_count": 0, "accepted_answer_id": 48302730, "answer_count": 2, "score": -1, "last_activity_date": 1516199347, "creation_date": 1516195716, "question_id": 48302324, "link": "https://stackoverflow.com/questions/48302324/how-to-put-string-elements-separated-by-commas-into-an-int-array", "title": "How to put string elements separated by commas into an int array?", "body": "<p>This is the example:5,6,13,4,14,22, .\n I want to fill the array with 5 6 13 4 12 22\nAfter compilation it returns : 5 6 , 3 4 , 4 , 2 .\nWhen I introduce 2,3,5,1,6,4 the array will be the correct one. </p>\n\n<pre><code>int nr=0;\n    for(int j=0;j&lt;sizeOfString;j++){\n        if ((string[j] == ',')){\n            output &lt;&lt; j &lt;&lt;\" j  \";//comma positions\n        }else{\n            stringArrayg[nr++]= putchar(string[j-2]);\n        }\n    }\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 4, "creation_date": 1516195871, "post_id": 48302299, "comment_id": 83589232, "body": "This is why an explicit <code>if</code> is better than a &quot;clever&quot; one line statement."}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1516196108, "post_id": 48302299, "comment_id": 83589424, "body": "Welcome to the site!  Check out the <a href=\"https://stackoverflow.com/tour\">tour</a> and the <a href=\"https://stackoverflow.com/help/how-to-ask\">how-to-ask page</a> for more about asking questions that will attract quality answers to future questions --- looks like you&#39;re already set on this one :) ."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1516197253, "post_id": 48302299, "comment_id": 83590155, "body": "Is there something that sets <code>all_ok</code> to a true value?  If we compile your code as-is, then of course <code>Base::initFromXml()</code> will not be called."}], "answers": [{"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1516196080, "post_id": 48302342, "comment_id": 83589401, "body": "You can also just switch the order between the function call and <code>all_ok</code>."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1516196194, "post_id": 48302342, "comment_id": 83589482, "body": "You could also use the &amp; operator; which can&#39;t short circuit"}], "tags": [], "owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "is_accepted": true, "score": 7, "last_activity_date": 1516196881, "last_edit_date": 1516196881, "creation_date": 1516195764, "answer_id": 48302342, "question_id": 48302299, "link": "https://stackoverflow.com/questions/48302299/c-call-of-virtual-base-function-is-ignored/48302342#48302342", "title": "c++ call of virtual base function is ignored", "body": "<p>The expression:</p>\n\n<pre><code>all_ok &amp;&amp; Base::initFromXml(xml_node)\n</code></pre>\n\n<p>uses the logical operator <code>&amp;&amp;</code> which has <em>short-circuit evaluation</em>, i.e.: if <code>all_ok</code> is false <code>Base::initFromXml()</code> won't called, since the result of the whole expression can be already determined: false.</p>\n\n<hr>\n\n<p>If you really want to call <code>Base::initFromXml()</code> regardless of the value of <code>all_ok</code>, then you can either swap the order of the operands in the expression above, that is:</p>\n\n<pre><code>Base::initFromXml(xml_node) &amp;&amp; all_ok \n</code></pre>\n\n<p>or call the function in a separate statement and save its return value:</p>\n\n<pre><code>...\nbool res_init = Base::initFromXml(xml_node);\nall_ok = all_ok &amp;&amp; res_init;\n</code></pre>\n\n<p>As suggested in <a href=\"https://stackoverflow.com/questions/48302299/c-call-of-virtual-base-function-is-ignored/48302342#comment83589482_48302342\">this comment</a>, using the bitwise <em>and</em>-operator (<code>&amp;</code>) instead of the logical <em>and</em>-operator (<code>&amp;&amp;</code>) would be also a solution, since it does not short-circuit:</p>\n\n<pre><code>all_ok = all_ok &amp; Base::initFromXml(xml_node);\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 7448592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33c71c1366bfea50c774650f583320aa?s=128&d=identicon&r=PG&f=1", "display_name": "goaran", "link": "https://stackoverflow.com/users/7448592/goaran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 48302342, "answer_count": 1, "score": 2, "last_activity_date": 1516196881, "creation_date": 1516195617, "question_id": 48302299, "link": "https://stackoverflow.com/questions/48302299/c-call-of-virtual-base-function-is-ignored", "title": "c++ call of virtual base function is ignored", "body": "<p>i have a base class </p>\n\n<pre><code>class DLL_IMPORTEXPORT Base\n{\npublic:\n    explicit Base(Base *parentItem = NULL);\n    virtual ~Base();\n    virtual bool initFromXml(const pugi::xml_node &amp;xml_node);\n    //....\n};\n</code></pre>\n\n<p>as well as a derived class</p>\n\n<pre><code>class DLL_IMPORTEXPORT Derived : public Base\n{\npublic:\n    Derived(Base *parentItem = 0);\n    ~Derived();\n\n    bool initFromXml(const pugi::xml_node &amp;xml_node);\n    //...\n};\n</code></pre>\n\n<p>now i want to call the base class method</p>\n\n<pre><code>virtual bool initFromXml(const pugi::xml_node &amp;xml_node);\n</code></pre>\n\n<p>from the derived class method</p>\n\n<pre><code>bool Derived::initFromXml(const pugi::xml_node &amp;xml_node)\n{\n    bool all_ok = false;\n\n    // .... do some specific things\n\n    // then run the base class method\n    all_ok = all_ok &amp;&amp; Base::initFromXml(xml_node);\n\n    return all_ok;\n}\n</code></pre>\n\n<p>It all compiles fine, however, when i execute the code the base class methode is not executed and when i try to step into it in the debugger it does't step into it and just ignores it. I'm a bit confused. where is my brain-bug?</p>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1516195663, "post_id": 48302280, "comment_id": 83589083, "body": "I looked online, <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa383701(v=vs.85).aspx\" rel=\"nofollow noreferrer\">this msdn article</a> was the third hit."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1516195687, "post_id": 48302280, "comment_id": 83589101, "body": "Can you give an example of where it&#39;s used? Also note that symbols starting with double underscore are reserved (and private) for the compiler and standard library."}], "answers": [{"tags": [], "owner": {"reputation": 2327, "user_id": 4742570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0017a2bafead37c0b8dab5d6df77138c?s=128&d=identicon&r=PG&f=1", "display_name": "jsheeran", "link": "https://stackoverflow.com/users/4742570/jsheeran"}, "is_accepted": true, "score": 0, "last_activity_date": 1516195887, "creation_date": 1516195887, "answer_id": 48302373, "question_id": 48302280, "link": "https://stackoverflow.com/questions/48302280/meaning-of-inout-opt-given-before-function-parameter/48302373#48302373", "title": "Meaning of __inout_opt given before function parameter", "body": "<p>It's a <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa383701(v=vs.85).aspx\" rel=\"nofollow noreferrer\">header annotation</a> in the Windows API. <code>_inout</code> means the function reads from and writes to the buffer, and <code>_opt</code> means it is optional (i.e. it can be null).</p>\n"}], "owner": {"reputation": 882, "user_id": 3391982, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100000539153274/picture?type=large", "display_name": "charlotte", "link": "https://stackoverflow.com/users/3391982/charlotte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "closed_date": 1516195895, "accepted_answer_id": 48302373, "answer_count": 1, "score": 0, "last_activity_date": 1516195887, "creation_date": 1516195568, "question_id": 48302280, "link": "https://stackoverflow.com/questions/48302280/meaning-of-inout-opt-given-before-function-parameter", "closed_reason": "Duplicate", "title": "Meaning of __inout_opt given before function parameter", "body": "<p>What is the meaning of the keyword given below, when it is given before any function parameter ?</p>\n\n<ul>\n<li>__inout_opt</li>\n</ul>\n\n<p>Thanks</p>\n"}, {"tags": ["android", "c++", "audio", "android-ndk", "sample"], "comments": [{"owner": {"reputation": 116, "user_id": 1470964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0906999fc39f9703ca708b0f84aae380?s=128&d=identicon&r=PG", "display_name": "abhiroxx", "link": "https://stackoverflow.com/users/1470964/abhiroxx"}, "edited": false, "score": 0, "creation_date": 1516197090, "post_id": 48302218, "comment_id": 83590047, "body": "Can you paste your CMakeLists.txt and project skeleton"}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1516200839, "post_id": 48302218, "comment_id": 83592569, "body": "on Mac, after minimal automatic changes to <b>build.gradle</b>, this sample builds cleanly."}], "owner": {"reputation": 59, "user_id": 6547658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0393555acca758a179689cd245cdafa7?s=128&d=identicon&r=PG&f=1", "display_name": "M.Walter", "link": "https://stackoverflow.com/users/6547658/m-walter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1516199433, "creation_date": 1516195393, "last_edit_date": 1516199433, "question_id": 48302218, "link": "https://stackoverflow.com/questions/48302218/problems-importing-google-sample-aaudios-in-android-studio", "title": "Problems importing google sample &quot;AAudios&quot; in Android Studio", "body": "<p>I tried to import a Google android sample in Android Studio. AAudios (googlesamples/android-audio-high-performance ). It's a sample how to use native Audio Support if low latency is needed.</p>\n\n<p>Gradle sync gives me some errors I don't know how to deal with. </p>\n\n<p>I'm using Android Studio 3.0.1, API26, NDK 16.</p>\n\n<p>How can I fix this?</p>\n\n<pre><code>External Native Build Issues\nBuild command failed.\nError while executing process I:\\Android\\sdk_androidStudio\\cmake\\3.6.4111459\\bin\\cmake.exe with arguments {-HI:\\Android\\workspaceAndroidStudio\\AAudios\\echo\\src\\main\\cpp -BI:\\Android\\workspaceAndroidStudio\\AAudios\\echo\\.externalNativeBuild\\cmake\\debug\\armeabi-v7a -GAndroid Gradle - Ninja -DANDROID_ABI=armeabi-v7a -DANDROID_NDK=I:\\Android\\sdk_androidStudio\\ndk-bundle -DCMAKE_LIBRARY_OUTPUT_DIRECTORY=I:\\Android\\workspaceAndroidStudio\\AAudios\\echo\\build\\intermediates\\cmake\\debug\\obj\\armeabi-v7a -DCMAKE_BUILD_TYPE=Debug -DCMAKE_MAKE_PROGRAM=I:\\Android\\sdk_androidStudio\\cmake\\3.6.4111459\\bin\\ninja.exe -DCMAKE_TOOLCHAIN_FILE=I:\\Android\\sdk_androidStudio\\ndk-bundle\\build\\cmake\\android.toolchain.cmake -DANDROID_PLATFORM=android-26 -DANDROID_STL=c++_shared -DANDROID_TOOLCHAIN=clang -DANDROID_PLATFORM=android-26}\n-- Check for working C compiler: I:/Android/sdk_androidStudio/ndk-bundle/toolchains/llvm/prebuilt/windows-x86_64/bin/clang.exe\n-- Check for working C compiler: I:/Android/sdk_androidStudio/ndk-bundle/toolchains/llvm/prebuilt/windows-x86_64/bin/clang.exe -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Check for working CXX compiler: I:/Android/sdk_androidStudio/ndk-bundle/toolchains/llvm/prebuilt/windows-x86_64/bin/clang++.exe\n-- Check for working CXX compiler: I:/Android/sdk_androidStudio/ndk-bundle/toolchains/llvm/prebuilt/windows-x86_64/bin/clang++.exe -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Configuring done\nCMake Error at CMakeLists.txt:26 (add_library):\n    ../../../../../debug-utils/trace.cpp\n  Tried extensions .c .C .c++ .cc .cpp .cxx .m .M .mm .h .hh .h++ .hm .hpp\n  .hxx .in .txx\nCMake Error: CMake can not determine linker language for target: echo\n-- Generating done\n-- Build files have been written to: I:/Android/workspaceAndroidStudio/AAudios/echo/.externalNativeBuild/cmake/debug/armeabi-v7a\nBuild command failed.\nError while executing process I:\\Android\\sdk_androidStudio\\cmake\\3.6.4111459\\bin\\cmake.exe with arguments {-HI:\\Android\\workspaceAndroidStudio\\AAudios\\echo\\src\\main\\cpp -BI:\\Android\\workspaceAndroidStudio\\AAudios\\echo\\.externalNativeBuild\\cmake\\release\\armeabi-v7a -GAndroid Gradle - Ninja -DANDROID_ABI=armeabi-v7a -DANDROID_NDK=I:\\Android\\sdk_androidStudio\\ndk-bundle -DCMAKE_LIBRARY_OUTPUT_DIRECTORY=I:\\Android\\workspaceAndroidStudio\\AAudios\\echo\\build\\intermediates\\cmake\\release\\obj\\armeabi-v7a -DCMAKE_BUILD_TYPE=Release -DCMAKE_MAKE_PROGRAM=I:\\Android\\sdk_androidStudio\\cmake\\3.6.4111459\\bin\\ninja.exe -DCMAKE_TOOLCHAIN_FILE=I:\\Android\\sdk_androidStudio\\ndk-bundle\\build\\cmake\\android.toolchain.cmake -DANDROID_PLATFORM=android-26 -DANDROID_STL=c++_shared -DANDROID_TOOLCHAIN=clang -DANDROID_PLATFORM=android-26}\n-- Check for working C compiler: I:/Android/sdk_androidStudio/ndk-bundle/toolchains/llvm/prebuilt/windows-x86_64/bin/clang.exe\n-- Check for working C compiler: I:/Android/sdk_androidStudio/ndk-bundle/toolchains/llvm/prebuilt/windows-x86_64/bin/clang.exe -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Check for working CXX compiler: I:/Android/sdk_androidStudio/ndk-bundle/toolchains/llvm/prebuilt/windows-x86_64/bin/clang++.exe\n-- Check for working CXX compiler: I:/Android/sdk_androidStudio/ndk-bundle/toolchains/llvm/prebuilt/windows-x86_64/bin/clang++.exe -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Configuring done\nCMake Error at CMakeLists.txt:26 (add_library):\n    ../../../../../debug-utils/trace.cpp\n  Tried extensions .c .C .c++ .cc .cpp .cxx .m .M .mm .h .hh .h++ .hm .hpp\n  .hxx .in .txx\nCMake Error: CMake can not determine linker language for target: echo\n-- Generating done\n-- Build files have been written to: I:/Android/workspaceAndroidStudio/AAudios/echo/.externalNativeBuild/cmake/release/armeabi-v7a\nBuild command failed.\nError while executing process I:\\Android\\sdk_androidStudio\\cmake\\3.6.4111459\\bin\\cmake.exe with arguments {-HI:\\Android\\workspaceAndroidStudio\\AAudios\\hello-aaudio\\src\\main\\cpp -BI:\\Android\\workspaceAndroidStudio\\AAudios\\hello-aaudio\\.externalNativeBuild\\cmake\\release\\armeabi-v7a -GAndroid Gradle - Ninja -DANDROID_ABI=armeabi-v7a -DANDROID_NDK=I:\\Android\\sdk_androidStudio\\ndk-bundle -DCMAKE_LIBRARY_OUTPUT_DIRECTORY=I:\\Android\\workspaceAndroidStudio\\AAudios\\hello-aaudio\\build\\intermediates\\cmake\\release\\obj\\armeabi-v7a -DCMAKE_BUILD_TYPE=Release -DCMAKE_MAKE_PROGRAM=I:\\Android\\sdk_androidStudio\\cmake\\3.6.4111459\\bin\\ninja.exe -DCMAKE_TOOLCHAIN_FILE=I:\\Android\\sdk_androidStudio\\ndk-bundle\\build\\cmake\\android.toolchain.cmake -DANDROID_PLATFORM=android-26 -DANDROID_STL=c++_shared -DANDROID_TOOLCHAIN=clang -DANDROID_PLATFORM=android-26}\n-- Check for working C compiler: I:/Android/sdk_androidStudio/ndk-bundle/toolchains/llvm/prebuilt/windows-x86_64/bin/clang.exe\n-- Check for working C compiler: I:/Android/sdk_androidStudio/ndk-bundle/toolchains/llvm/prebuilt/windows-x86_64/bin/clang.exe -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Check for working CXX compiler: I:/Android/sdk_androidStudio/ndk-bundle/toolchains/llvm/prebuilt/windows-x86_64/bin/clang++.exe\n-- Check for working CXX compiler: I:/Android/sdk_androidStudio/ndk-bundle/toolchains/llvm/prebuilt/windows-x86_64/bin/clang++.exe -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Configuring done\nCMake Error at CMakeLists.txt:29 (add_library):\n    ../../../../../debug-utils/trace.cpp\n  Tried extensions .c .C .c++ .cc .cpp .cxx .m .M .mm .h .hh .h++ .hm .hpp\n  .hxx .in .txx\nCMake Error: CMake can not determine linker language for target: hello-aaudio\n-- Generating done\n-- Build files have been written to: I:/Android/workspaceAndroidStudio/AAudios/hello-aaudio/.externalNativeBuild/cmake/release/armeabi-v7a\nBuild command failed.\nError while executing process I:\\Android\\sdk_androidStudio\\cmake\\3.6.4111459\\bin\\cmake.exe with arguments {-HI:\\Android\\workspaceAndroidStudio\\AAudios\\hello-aaudio\\src\\main\\cpp -BI:\\Android\\workspaceAndroidStudio\\AAudios\\hello-aaudio\\.externalNativeBuild\\cmake\\debug\\armeabi-v7a -GAndroid Gradle - Ninja -DANDROID_ABI=armeabi-v7a -DANDROID_NDK=I:\\Android\\sdk_androidStudio\\ndk-bundle -DCMAKE_LIBRARY_OUTPUT_DIRECTORY=I:\\Android\\workspaceAndroidStudio\\AAudios\\hello-aaudio\\build\\intermediates\\cmake\\debug\\obj\\armeabi-v7a -DCMAKE_BUILD_TYPE=Debug -DCMAKE_MAKE_PROGRAM=I:\\Android\\sdk_androidStudio\\cmake\\3.6.4111459\\bin\\ninja.exe -DCMAKE_TOOLCHAIN_FILE=I:\\Android\\sdk_androidStudio\\ndk-bundle\\build\\cmake\\android.toolchain.cmake -DANDROID_PLATFORM=android-26 -DANDROID_STL=c++_shared -DANDROID_TOOLCHAIN=clang -DANDROID_PLATFORM=android-26}\n-- Check for working C compiler: I:/Android/sdk_androidStudio/ndk-bundle/toolchains/llvm/prebuilt/windows-x86_64/bin/clang.exe\n-- Check for working C compiler: I:/Android/sdk_androidStudio/ndk-bundle/toolchains/llvm/prebuilt/windows-x86_64/bin/clang.exe -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Check for working CXX compiler: I:/Android/sdk_androidStudio/ndk-bundle/toolchains/llvm/prebuilt/windows-x86_64/bin/clang++.exe\n-- Check for working CXX compiler: I:/Android/sdk_androidStudio/ndk-bundle/toolchains/llvm/prebuilt/windows-x86_64/bin/clang++.exe -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Configuring done\nCMake Error at CMakeLists.txt:29 (add_library):\n    ../../../../../debug-utils/trace.cpp\n  Tried extensions .c .C .c++ .cc .cpp .cxx .m .M .mm .h .hh .h++ .hm .hpp\n  .hxx .in .txx\nCMake Error: CMake can not determine linker language for target: hello-aaudio\n-- Generating done\n-- Build files have been written to: I:/Android/workspaceAndroidStudio/AAudios/hello-aaudio/.externalNativeBuild/cmake/debug/armeabi-v7a\nI:\\Android\\sdk_androidStudio\\ndk-bundle\\build\\cmake\\android.toolchain.cmake\nWarning:(63, 98)  (include)   CMakeLists.txt \nWarning:(63, 98)  (include)   CMakeLists.txt \nWarning:(63, 98)  (include)   CMakeLists.txt \nWarning:(63, 98)  (include)   CMakeLists.txt \nI:\\Android\\workspaceAndroidStudio\\AAudios\\echo\\build.gradle\nError:Failed to resolve: project :audio-device\n&lt;a href=\"openFile:I:/Android/workspaceAndroidStudio/AAudios/echo/build.gradle\"&gt;Open File&lt;/a&gt;\nI:\\Android\\workspaceAndroidStudio\\AAudios\\hello-aaudio\\build.gradle\nError:Failed to resolve: project :audio-device\n&lt;a href=\"openFile:I:/Android/workspaceAndroidStudio/AAudios/hello-aaudio/build.gradle\"&gt;Open File&lt;/a&gt;\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "ipc", "file-mapping"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 8, "creation_date": 1516195332, "post_id": 48302188, "comment_id": 83588843, "body": "<b><i>Access violation writing location 0x0000000000000000</i></b> Looks like you are dereferencing a null pointer."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1516195483, "post_id": 48302188, "comment_id": 83588945, "body": "Now it&#39;s time for you to <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">learn how to debug your programs</a>. With a debugger you can catch crashes &quot;in action&quot; and see when and where they happen in your code. And also examine variables and their values."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1516195491, "post_id": 48302188, "comment_id": 83588953, "body": "Press break, search the reason."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1516195516, "post_id": 48302188, "comment_id": 83588974, "body": "You should exit if the file mapping fails."}, {"owner": {"reputation": 154, "user_id": 7226634, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-02gUasotifY/AAAAAAAAAAI/AAAAAAAAHuA/-YS4fuDP9xw/photo.jpg?sz=128", "display_name": "Prabakar", "link": "https://stackoverflow.com/users/7226634/prabakar"}, "edited": false, "score": 0, "creation_date": 1516195597, "post_id": 48302188, "comment_id": 83589031, "body": "I&#39;m not an expert in visual C++. I&#39;m working on a different platform. I just want to use a shared memory to avoid time overhead.I don&#39;t know what to do now."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1516195615, "post_id": 48302188, "comment_id": 83589048, "body": "BTW, Error code <code>3</code> from <code>GetLastError()</code> means path not found: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms681382(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1516195884, "post_id": 48302188, "comment_id": 83589245, "body": "Try actually reading what is written on the console. What exactly do you expect to happen when you see these messages?"}, {"owner": {"reputation": 154, "user_id": 7226634, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-02gUasotifY/AAAAAAAAAAI/AAAAAAAAHuA/-YS4fuDP9xw/photo.jpg?sz=128", "display_name": "Prabakar", "link": "https://stackoverflow.com/users/7226634/prabakar"}, "edited": false, "score": 0, "creation_date": 1516195909, "post_id": 48302188, "comment_id": 83589262, "body": "No. There is no Folder named like that."}, {"owner": {"reputation": 154, "user_id": 7226634, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-02gUasotifY/AAAAAAAAAAI/AAAAAAAAHuA/-YS4fuDP9xw/photo.jpg?sz=128", "display_name": "Prabakar", "link": "https://stackoverflow.com/users/7226634/prabakar"}, "edited": false, "score": 0, "creation_date": 1516196048, "post_id": 48302188, "comment_id": 83589381, "body": "It&#39;s just a name. It is not a path. It&#39;s the name for the page file for memory mapping."}, {"owner": {"reputation": 154, "user_id": 7226634, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-02gUasotifY/AAAAAAAAAAI/AAAAAAAAHuA/-YS4fuDP9xw/photo.jpg?sz=128", "display_name": "Prabakar", "link": "https://stackoverflow.com/users/7226634/prabakar"}, "edited": false, "score": 0, "creation_date": 1516196558, "post_id": 48302188, "comment_id": 83589713, "body": "But actually it&#39;s not a path I think. I just named it like that. see this syntax for create file mapping function : <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366537(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1516196693, "post_id": 48302188, "comment_id": 83589798, "body": "Sorry you are correct. I have always used this as a path to an existing file for the mapping. I am not sure why local is failing in this case. <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366791(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 154, "user_id": 7226634, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-02gUasotifY/AAAAAAAAAAI/AAAAAAAAHuA/-YS4fuDP9xw/photo.jpg?sz=128", "display_name": "Prabakar", "link": "https://stackoverflow.com/users/7226634/prabakar"}, "edited": false, "score": 0, "creation_date": 1516196948, "post_id": 48302188, "comment_id": 83589953, "body": "Can anyone run the code?. I&#39;m stuck in this. And also I&#39;m not working in visual C++. I just need to use file mapping for shared memory."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1516197620, "post_id": 48302188, "comment_id": 83590380, "body": "I ran it. The error seems to be caused by capitalization. LOCAL must be Local. After fixing that it worked for me on windows 10."}, {"owner": {"reputation": 154, "user_id": 7226634, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-02gUasotifY/AAAAAAAAAAI/AAAAAAAAHuA/-YS4fuDP9xw/photo.jpg?sz=128", "display_name": "Prabakar", "link": "https://stackoverflow.com/users/7226634/prabakar"}, "edited": false, "score": 0, "creation_date": 1516197725, "post_id": 48302188, "comment_id": 83590450, "body": "Yeah It&#39;s working after changing &quot;LOCAL&quot; to &quot;Local&quot;.Thank you so much :)"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1516197741, "post_id": 48302188, "comment_id": 83590464, "body": "<code>if (hFileMap == FALSE)</code> will work but <code>if (hFileMap == NULL)</code> is more accurate."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1516197816, "post_id": 48302188, "comment_id": 83590510, "body": "I also put <code>return -1;</code> after <code>cout &lt;&lt; &quot;CreateFileMapping Failed &amp; Error Number - &quot; &lt;&lt; GetLastError() &lt;&lt; endl;</code>  to have the program exit if the mapping fails."}, {"owner": {"reputation": 154, "user_id": 7226634, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-02gUasotifY/AAAAAAAAAAI/AAAAAAAAHuA/-YS4fuDP9xw/photo.jpg?sz=128", "display_name": "Prabakar", "link": "https://stackoverflow.com/users/7226634/prabakar"}, "edited": false, "score": 0, "creation_date": 1516197968, "post_id": 48302188, "comment_id": 83590603, "body": "Thank you once again! :)"}], "answers": [{"tags": [], "owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "is_accepted": true, "score": 2, "last_activity_date": 1516209389, "last_edit_date": 1516209389, "creation_date": 1516198317, "answer_id": 48303141, "question_id": 48302188, "link": "https://stackoverflow.com/questions/48302188/exception-thrown-at-0x00007fff168e1657-vcruntime140d-dll-in-name-exe-0xc0/48303141#48303141", "title": "Exception thrown at 0x00007FFF168E1657 (vcruntime140d.dll) in &quot;&lt;name&gt;.exe&quot;: 0xC0000005: Access violation writing location 0x0000000000000000", "body": "<p>The problem is here:</p>\n\n<pre><code>hFileMap = CreateFileMapping(\n    INVALID_HANDLE_VALUE,\n    NULL,\n    PAGE_READWRITE,\n    0,\n    256,\n    L\"LOCAL\\\\MyFileMap\");\n</code></pre>\n\n<p>From the documentation of Kernel object namespaces they are case sensitive so you must change <code>LOCAL</code> to <code>Local</code> for this to work.</p>\n\n<p><strong><em>In addition to the \"Global\\\" prefix, client processes can use the \"Local\\\" prefix to explicitly create an object in their session namespace. These keywords are case sensitive.</em></strong></p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/aa382954(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/aa382954(v=vs.85).aspx</a></p>\n\n<p>While debugging this issue I also changed the code to exit if the mapping fails:</p>\n\n<pre><code>if (hFileMap == NULL)\n{\n    cout &lt;&lt; \"CreateFileMapping Failed &amp; Error Number - \" &lt;&lt; GetLastError() &lt;&lt; endl;\n    return -1;\n}\nelse\n    cout &lt;&lt; \"CreateFileMapping Success - \" &lt;&lt; endl;\n</code></pre>\n\n<p>This avoided the crash with the original \"LOCAL\" (mapping failed).</p>\n"}], "owner": {"reputation": 154, "user_id": 7226634, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-02gUasotifY/AAAAAAAAAAI/AAAAAAAAHuA/-YS4fuDP9xw/photo.jpg?sz=128", "display_name": "Prabakar", "link": "https://stackoverflow.com/users/7226634/prabakar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4851, "favorite_count": 1, "accepted_answer_id": 48303141, "answer_count": 1, "score": 1, "last_activity_date": 1516209389, "creation_date": 1516195299, "last_edit_date": 1516195706, "question_id": 48302188, "link": "https://stackoverflow.com/questions/48302188/exception-thrown-at-0x00007fff168e1657-vcruntime140d-dll-in-name-exe-0xc0", "title": "Exception thrown at 0x00007FFF168E1657 (vcruntime140d.dll) in &quot;&lt;name&gt;.exe&quot;: 0xC0000005: Access violation writing location 0x0000000000000000", "body": "<p>I tried creating two different visual c++ console applications for Inter Process Communication(IPC). The Build for both codes is successful.But,when I try to debug it, I get exception like this \"<strong>Exception thrown at 0x00007FFF168E1657 (vcruntime140d.dll) in FileMapServer_Parent.exe: 0xC0000005: Access violation writing location 0x0000000000000000</strong>\" </p>\n\n<pre><code>//PARENT PROCESS:\n\n#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;windows.h&gt;\n#include &lt;Tlhelp32.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;cstring&gt;\n#include &lt;cctype&gt;\n#include &lt;fstream&gt;\nusing namespace std\nint main()\n{\ncout &lt;&lt; \"\\t\\t.....FILEMAPPING SERVER or PARENT.....\" &lt;&lt; endl;\ncout &lt;&lt; endl;\n\n//Local Variable Definitions\n\n\n    HANDLE  hFileMap;\n    BOOL    bResult;\n    PCHAR   lpBuffer = NULL;\n    char    Buffer[256] = \"Hello From File Map Server\";\n    size_t  szBuffer = size(Buffer);\n\n\n// STEP 1 : Create File Map\n\n        hFileMap = CreateFileMapping(\n            INVALID_HANDLE_VALUE,\n            NULL,\n            PAGE_READWRITE,\n            0,\n            256,\n            L\"LOCAL\\\\MyFileMap);\n\n\nif (hFileMap == FALSE)\n{\n    cout &lt;&lt; \"CreateFileMapping Failed &amp; Error Number - \" &lt;&lt; GetLastError() &lt;&lt; endl;\n}\nelse\n    cout &lt;&lt; \"CreateFileMapping Success - \" &lt;&lt;  endl;\n\n\n// STEP 2 : Map View of File\nlpBuffer = (PCHAR)MapViewOfFile(\n    hFileMap,\n    FILE_MAP_ALL_ACCESS,\n    0,\n    0,\n    256);\n\nif (lpBuffer == NULL)\n{\n    cout &lt;&lt; \"MapViewOf File Failes &amp; Error No - \" &lt;&lt; GetLastError() &lt;&lt; endl;\n}\nelse\n    cout &lt;&lt; \"MapViewOf File Success \"  &lt;&lt; endl;\n\n\n//STEP 3 : Copy Memory Function\n\nCopyMemory(lpBuffer,Buffer,szBuffer);\n\n\n//STEP 4 : Unmap View Of File\nbResult = UnmapViewOfFile(lpBuffer);\nif (bResult == FALSE)\n{\n    cout &lt;&lt; \"UnMapViewOfFile Failed &amp; Error No - \" &lt;&lt; GetLastError() &lt;&lt; endl;\n}\nelse\n    cout &lt;&lt; \"UnMapViewOfFile FSuccess - \" &lt;&lt; endl;\n\nsystem(\"PAUSE\");\nreturn 0;\n}\n</code></pre>\n\n<p>Exception while running parent process:\n    [1]: <a href=\"https://i.stack.imgur.com/bomQB.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/bomQB.png</a></p>\n\n<pre><code>//CHILD PREOCESS:\n\n#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;windows.h&gt;\n#include &lt;Tlhelp32.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;cstring&gt;\n#include &lt;cctype&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nint main()\n{\ncout &lt;&lt; \"\\t\\t.....FILEMAPPING CLIENT or CHILD.....\" &lt;&lt; endl;\ncout &lt;&lt; endl;\n\n// Local Variable Definitions\n\nHANDLE  hFileMap;\nBOOL    bResult;\nPCHAR   lpBuffer = NULL;\n\n// STEP 1 : OpenFileMapping\n\nhFileMap = OpenFileMapping(\n    FILE_MAP_ALL_ACCESS,\n    FALSE,\n    L\"LOCAL\\\\MyFileMap\");\nif(hFileMap == NULL)\n{\n    cout &lt;&lt; \"OpenFileMap Failed &amp; error - \" &lt;&lt; GetLastError() &lt;&lt; endl;\n}\nelse\n    cout &lt;&lt; \"OpenFileMap success \" &lt;&lt; endl;\n\n\n//STEP 2 : MapViewOfFile\n\nlpBuffer = (PCHAR)MapViewOfFile(\n    hFileMap,\n    FILE_MAP_ALL_ACCESS,\n    0,\n    0,\n    256);\n\n    if (lpBuffer == NULL)\n    {\n        cout &lt;&lt; \"MapViewOf File Failes &amp; Error No - \" &lt;&lt; GetLastError() &lt;&lt; endl;\n    }\n    else\n        cout &lt;&lt; \"MapViewOf File Success \" &lt;&lt; endl;\n\n//STEP 3 : Reading the data from File Map Object\n\n    cout &lt;&lt; \"DATA READING FROM PARENT PROCESS---&gt;\" &lt;&lt;lpBuffer&lt;&lt; endl;\n\n//STEP 4 : UnMapViewOfFile\n\n    bResult = UnmapViewOfFile(lpBuffer);\n    if (bResult == FALSE)\n    {\n        cout &lt;&lt; \"UnMapViewOfFile Failed &amp; Error No - \" &lt;&lt; GetLastError() &lt;&lt; endl;\n    }\n    else\n        cout &lt;&lt; \"UnMapViewOfFile FSuccess - \" &lt;&lt; endl;\n\n//STEP 5 : Close Handle\n\n    CloseHandle(hFileMap);\n\nsystem(\"PAUSE\");\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-code", "vscode-tasks"], "answers": [{"tags": [], "owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "is_accepted": true, "score": 2, "last_activity_date": 1516196841, "last_edit_date": 1516196841, "creation_date": 1516196123, "answer_id": 48302449, "question_id": 48302130, "link": "https://stackoverflow.com/questions/48302130/g-custom-task-opens-in-external-terminal-intead-of-vs-code-internal-terminal/48302449#48302449", "title": "g++ custom task opens in external terminal intead of vs code internal terminal", "body": "<p>The integrated terminal panel behavior is controlled through a <code>presentation</code> property of a task. Add the following:</p>\n\n<pre><code>\"presentation\": {\n                \"reveal\": \"always\",\n                \"panel\": \"new\"\n}\n</code></pre>\n\n<p>It offers the <a href=\"https://code.visualstudio.com/docs/editor/tasks\" rel=\"nofollow noreferrer\">following options</a>:</p>\n\n<ul>\n<li>reveal</li>\n<li>focus</li>\n<li>echo</li>\n<li>panel</li>\n</ul>\n"}], "owner": {"reputation": 5360, "user_id": 3139545, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8c4a158119260b6a27a6bab276cac749?s=128&d=identicon&r=PG&f=1", "display_name": "user3139545", "link": "https://stackoverflow.com/users/3139545/user3139545"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 589, "favorite_count": 0, "accepted_answer_id": 48302449, "answer_count": 1, "score": 1, "last_activity_date": 1516196841, "creation_date": 1516195095, "question_id": 48302130, "link": "https://stackoverflow.com/questions/48302130/g-custom-task-opens-in-external-terminal-intead-of-vs-code-internal-terminal", "title": "g++ custom task opens in external terminal intead of vs code internal terminal", "body": "<p>I have the following task in VSCode to build C++ programs.</p>\n\n<pre><code>{\n    // See https://go.microsoft.com/fwlink/?LinkId=733558\n    // for the documentation about the tasks.json format\n    \"version\": \"2.0.0\",\n    \"tasks\": [\n        {\n            \"label\": \"build my app\",\n            \"type\": \"shell\",\n            \"command\": \"g++\",\n            \"args\": [\n                \"-std=gnu++0x\", \"-Wall\", \"-Werror\", \"-g\", \"tutorial.cpp\"\n            ],\n            \"group\": {\n                \"kind\": \"build\",\n                \"isDefault\": true\n            }\n        }\n    ]\n}\n</code></pre>\n\n<p>However each time I run this the output opens in an external terminal. I would like to run my builds and see the output in the internal terminal.\nIs this possible and if so what do I need to change?</p>\n"}, {"tags": ["javascript", "c++", "node.js", "node.js-nan"], "answers": [{"tags": [], "owner": {"reputation": 60850, "user_id": 221955, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0bc09e1bd45610fc85274cd7bb002c56?s=128&d=identicon&r=PG", "display_name": "Michael Anderson", "link": "https://stackoverflow.com/users/221955/michael-anderson"}, "is_accepted": false, "score": 3, "last_activity_date": 1516266682, "creation_date": 1516266682, "answer_id": 48317490, "question_id": 48302120, "link": "https://stackoverflow.com/questions/48302120/how-do-i-return-a-native-object-from-a-class-derived-from-nanobjectwrap/48317490#48317490", "title": "How do I return a native object from a class derived from Nan::ObjectWrap?", "body": "<p>One way to make this work is:</p>\n\n<ul>\n<li>add a constructor to BWrapper, but dont expose that function to javascript. Make this function take a pointer to a B. This will need to be stored in an <code>init_class</code> function.</li>\n<li>add a function to BWrapper to create a new instance using this constructor. This will also take a pointer to a B. </li>\n<li>make the <code>foo</code> function call the <code>BWrapper::NewInstance</code>.</li>\n</ul>\n\n<p>This amounts to the following additions</p>\n\n<pre><code>class BWrapper {\n\n  ...\n\n  static void init_class() {\n    v8::Local&lt;v8::FunctionTemplate&gt; tpl = Nan::New&lt;v8::FunctionTemplate&gt;(New);\n    tpl-&gt;SetClassName(Nan::New(\"B\").ToLocalChecked());\n    tpl-&gt;InstanceTemplate()-&gt;SetInternalFieldCount(1);\n    constructor().Reset(Nan::GetFunction(tpl).ToLocalChecked());\n  }\n\n  static NAN_METHOD(New) {\n         if (!info.IsConstructCall()) {\n      return Nan::ThrowError(\"File() must be called as a constructor\");\n    }\n\n    if (info.Length() != 1 || ! info[0]-&gt;IsExternal()) {\n        return Nan::ThrowError(\"File() can only be called internally\");\n    }\n\n    B* b = static_cast&lt;B*&gt;(info[0].As&lt;v8::External&gt;()-&gt;Value());\n    BWrapper *obj = new BWrapper(*b);\n    obj-&gt;Wrap(info.This());\n    info.GetReturnValue().Set(info.This());\n  }\n\n  static v8::Local&lt;v8::Object&gt; NewInstance(B* b) {\n    Nan::EscapableHandleScope scope;\n\n    const unsigned argc = 1;\n    v8::Local&lt;v8::Value&gt; argv[argc] = { Nan::New&lt;v8::External&gt;(b) };\n    v8::Local&lt;v8::Function&gt; cons = Nan::New&lt;v8::Function&gt;(constructor());\n    v8::Local&lt;v8::Object&gt; instance = cons-&gt;NewInstance(argc, argv);\n\n    return scope.Escape(instance);\n  }\n\n  static inline Nan::Persistent&lt;v8::Function&gt; &amp; constructor() {\n    static Nan::Persistent&lt;v8::Function&gt; my_constructor;\n    return my_constructor;\n  }\n}\n</code></pre>\n\n<p>And the changes to <code>AWrapper::foo</code> are:</p>\n\n<pre><code>   static NAN_METHOD(foo) {\n     AWrapper* obj = Nan::ObjectWrap::Unwrap&lt;AWrapper&gt;(info.Holder());\n     B b = obj-&gt;a_.foo();\n     info.GetReturnValue().Set(BWrapper::NewInstance(&amp;b));\n   }\n</code></pre>\n\n<p>And finally we need to ensure the class gets registered.</p>\n\n<pre><code> NAN_MODULE_INIT(InitModule) {\n   BWrapper::init_class();\n   AWrapper::register_class(target);\n }\n</code></pre>\n\n<p>I suspect this is not the cleanest way to do it, and I'd love to see any alternatives.  I'm particularly interested in whether exposing the constructor to BWrapper in this way has any downsides.</p>\n\n<p>Partly this was taken from reading <a href=\"https://github.com/tracelytics/node-traceview-bindings/blob/master/src/metadata.cc#L18\" rel=\"nofollow noreferrer\">https://github.com/tracelytics/node-traceview-bindings/blob/master/src/metadata.cc#L18</a> at the suggestion of another <a href=\"https://stackoverflow.com/questions/38794789/return-a-nanobjectwrap-from-another-nanobjectwrap\">question</a> and then a dash of my own experimentation.</p>\n"}], "owner": {"reputation": 60850, "user_id": 221955, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0bc09e1bd45610fc85274cd7bb002c56?s=128&d=identicon&r=PG", "display_name": "Michael Anderson", "link": "https://stackoverflow.com/users/221955/michael-anderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 703, "favorite_count": 1, "answer_count": 1, "score": 9, "last_activity_date": 1516844485, "creation_date": 1516195077, "question_id": 48302120, "link": "https://stackoverflow.com/questions/48302120/how-do-i-return-a-native-object-from-a-class-derived-from-nanobjectwrap", "title": "How do I return a native object from a class derived from Nan::ObjectWrap?", "body": "<p>I have two simple classes <code>A</code> and <code>B</code> that I'm trying to expose in a native module in node.js. <code>A</code> is directly creatable, but a <code>B</code> is only created by calling <code>A::foo()</code>. </p>\n\n<pre><code>class Internal {};\n\nclass B {\n  public:\n    Internal internal;\n    explicit B(Internal internal):internal(internal){}\n};\n\nclass A {\n  public:\n    A() : internal() {};\n    B foo() { return B(internal); }\n  private:\n    Internal internal;\n};\n</code></pre>\n\n<p>I want to be able to write:</p>\n\n<pre><code>const M = require('node_nan_minimal');\nconst a = new M.A();\nconst b = a.foo();\n</code></pre>\n\n<p>To do this I'm creating two wrapper classes deriving from <code>Nan::ObjectWrap</code></p>\n\n<pre><code>class AWrapper : public Nan::ObjectWrap { ... }\nclass BWrapper : public Nan::ObjectWrap { ... }\n</code></pre>\n\n<p>Each contains an instance of <code>A</code> or <code>B</code> respectively. With these I can create an object of type A from within javascript, but I'm having trouble with the implementation of <code>AWrapper::foo</code>.</p>\n\n<pre><code>static NAN_METHOD(foo) {\n  AWrapper* obj = Nan::ObjectWrap::Unwrap&lt;AWrapper&gt;(info.Holder());\n  B b = obj-&gt;a_.foo();\n  BWrapper * result = new BWrapper(b);\n  // Something to get a B object to javascript\n  // ...\n  // info.GetReturnValue().Set(result-&gt;Wrap());\n  // ...\n  // doesn't work - so what should it be?\n}\n</code></pre>\n\n<p><strong>What do I do to make this function work?</strong></p>\n\n<hr>\n\n<p>The complete code for the .cc file is</p>\n\n<pre><code>#include &lt;node.h&gt;\n#include &lt;nan.h&gt;\n\nclass Internal {\n};\n\nclass B {\n  public:\n    Internal internal;\n    explicit B(Internal internal):internal(internal){}\n};\n\nclass A {\n  public:\n    A() : internal() {};\n    B foo() { return B(internal); }\n  private:\n    Internal internal;\n};\n\nclass BWrapper : public Nan::ObjectWrap {\n  public:\n    B b_;\n    explicit BWrapper(B b) : b_(b) {}\n    ~BWrapper() {}\n};\n\n\nclass AWrapper : public Nan::ObjectWrap {\n  public:\n  A a_;\n  explicit AWrapper(A a) : a_(a) {}\n  ~AWrapper() {}\n\n  static void register_class(Nan::ADDON_REGISTER_FUNCTION_ARGS_TYPE target) {\n    v8::Local&lt;v8::FunctionTemplate&gt; tpl = Nan::New&lt;v8::FunctionTemplate&gt;(New);\n    tpl-&gt;SetClassName(Nan::New(\"A\").ToLocalChecked());\n    tpl-&gt;InstanceTemplate()-&gt;SetInternalFieldCount(1);\n\n    Nan::SetPrototypeMethod(tpl, \"foo\", foo);\n\n    constructor().Reset(Nan::GetFunction(tpl).ToLocalChecked());\n    Nan::Set(target, Nan::New(\"A\").ToLocalChecked(), Nan::GetFunction(tpl).ToLocalChecked());\n  }\n\n private:\n\n  static NAN_METHOD(New) {\n    if (info.IsConstructCall()) {\n      A a;\n      AWrapper *obj = new AWrapper(a);\n      obj-&gt;Wrap(info.This());\n      info.GetReturnValue().Set(info.This());\n    } else {\n      const int argc = 1;\n      v8::Local&lt;v8::Value&gt; argv[argc] = {info[0]};\n      v8::Local&lt;v8::Function&gt; cons = Nan::New(constructor());\n      info.GetReturnValue().Set(cons-&gt;NewInstance(argc, argv));\n    }\n  }\n\n  static NAN_METHOD(foo) {\n    AWrapper* obj = Nan::ObjectWrap::Unwrap&lt;AWrapper&gt;(info.Holder());\n    B b = obj-&gt;a_.foo();\n    BWrapper * result = new BWrapper(b);\n    // Something to get a B object to javascript\n    //...\n    //info.GetReturnValue().Set(result-&gt;Wrap());\n  }\n\n  static inline Nan::Persistent&lt;v8::Function&gt; &amp; constructor() {\n    static Nan::Persistent&lt;v8::Function&gt; my_constructor;\n    return my_constructor;\n  }\n\n};\n\n\nNAN_MODULE_INIT(InitModule) {\n  AWrapper::register_class(target);\n}\n\nNODE_MODULE(NODE_GYP_MODULE_NAME, InitModule);\n</code></pre>\n\n<p>And a complete repository of the example can be found at <a href=\"https://github.com/mikeando/node_nan_minimal\" rel=\"noreferrer\">https://github.com/mikeando/node_nan_minimal</a> which you should be able to clone and then build using <code>npm install</code>.</p>\n"}]