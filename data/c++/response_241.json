[{"tags": ["c++", "visual-studio", "visual-studio-2017", "gdal"], "comments": [{"owner": {"reputation": 508, "user_id": 4200473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/875b8d6ed817b2b5a07fef6f539eb7d6?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Jessop", "link": "https://stackoverflow.com/users/4200473/richard-jessop"}, "edited": false, "score": 0, "creation_date": 1580607315, "post_id": 57600419, "comment_id": 106152578, "body": "Clearly, someone at GDAL didn&#39;t think this through.  UGH!"}], "answers": [{"comments": [{"owner": {"reputation": 376, "user_id": 9377932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3jKf9.jpg?s=128&g=1", "display_name": "Roger Almengor", "link": "https://stackoverflow.com/users/9377932/roger-almengor"}, "edited": false, "score": 0, "creation_date": 1611944212, "post_id": 57600708, "comment_id": 116621779, "body": "I did it as described. It started building, but then I received the &quot;proj.h&quot; No such file or directory message."}, {"owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "reply_to_user": {"reputation": 376, "user_id": 9377932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3jKf9.jpg?s=128&g=1", "display_name": "Roger Almengor", "link": "https://stackoverflow.com/users/9377932/roger-almengor"}, "edited": false, "score": 0, "creation_date": 1611951736, "post_id": 57600708, "comment_id": 116624479, "body": "@RogerAlmengor I do not remember how I managed to compile the whole thing. What I do remember is that there were many more issues and it took me 5 hours to get it working. But check the other answer, maybe the path in mine is wrong."}, {"owner": {"reputation": 376, "user_id": 9377932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3jKf9.jpg?s=128&g=1", "display_name": "Roger Almengor", "link": "https://stackoverflow.com/users/9377932/roger-almengor"}, "edited": false, "score": 0, "creation_date": 1612097759, "post_id": 57600708, "comment_id": 116654589, "body": "thank you very much for your answer. I started building a GDAL application using VS Code (see this post: <a href=\"https://lazyadminblog.blogspot.com/2018/07/how-to-build-gdal-from-source-for.html.\" rel=\"nofollow noreferrer\">lazyadminblog.blogspot.com/2018/07/&hellip;</a>). But when I ran my application I received the following message: Th following program cannot be executed, becase gdal302_d.dll was not found (or something along this lines, I have a german version and this is a quick and dirty translation from the original message). In the message it is stated that by reinstalling gdal the problem might be solved. However it did not happen that way."}], "tags": [], "owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "is_accepted": true, "score": 9, "last_activity_date": 1566434608, "creation_date": 1566434608, "answer_id": 57600708, "question_id": 57600419, "link": "https://stackoverflow.com/questions/57600419/error-building-gdal-proj-include-should-be-defined-proj-6-is-a-required-dep/57600708#57600708", "title": "Error building GDAL: PROJ_INCLUDE should be defined. PROJ &gt;= 6 is a required dependency", "body": "<p>The error is confusing because <code>PROJ</code> sounds like shortened <em>\"project\"</em>. But it is, in fact, a dependency on the PROJ library. I installed it through OSGeo as <a href=\"https://proj.org/install.html#windows\" rel=\"noreferrer\">recommended in installation instructions</a>.</p>\n\n<p>After that, fill in the paths to installed libs into <code>nmake.opt</code>:</p>\n\n<pre><code># PROJ stuff (required dependency: PROJ &gt;= 6)\nPROJ_INCLUDE = -IC:\\OSGeo4W64\\proj\nPROJ_LIBRARY = C:\\OSGeo4W64\\lib\\proj_5_2.lib\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 8659684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd6d3058a61929519568c3bd173adf1?s=128&d=identicon&r=PG&f=1", "display_name": "Bgnr", "link": "https://stackoverflow.com/users/8659684/bgnr"}, "is_accepted": false, "score": 3, "last_activity_date": 1567430614, "creation_date": 1567430614, "answer_id": 57757758, "question_id": 57600419, "link": "https://stackoverflow.com/questions/57600419/error-building-gdal-proj-include-should-be-defined-proj-6-is-a-required-dep/57757758#57757758", "title": "Error building GDAL: PROJ_INCLUDE should be defined. PROJ &gt;= 6 is a required dependency", "body": "<p>If I could've comment, it would be one:</p>\n\n<p>I think, you gave an incorrect Include path:</p>\n\n<pre><code>PROJ_INCLUDE = -IC:\\OSGeo4W64\\include\n</code></pre>\n\n<p>would be the correct one.\nAlso it claims, it needs PROJ version >=6, but it's 5.2 if I'm not mistaken.\nDidn't you had problems with inclusion of proj_experimental.h?</p>\n"}], "owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2107, "favorite_count": 1, "accepted_answer_id": 57600708, "answer_count": 2, "score": 4, "last_activity_date": 1567430614, "creation_date": 1566431146, "question_id": 57600419, "link": "https://stackoverflow.com/questions/57600419/error-building-gdal-proj-include-should-be-defined-proj-6-is-a-required-dep", "title": "Error building GDAL: PROJ_INCLUDE should be defined. PROJ &gt;= 6 is a required dependency", "body": "<p>I am trying to get GDAL 3.0.1 to work. Generating the Visual Studio 2017 project was a piece of cake, all I needed was to run <code>generate_vcxproj.bat</code>. But now I'm getting an error on this line of <code>makefile.vc</code>:</p>\n\n<pre><code>!IF !DEFINED(PROJ_INCLUDE)\n!ERROR PROJ_INCLUDE should be defined. PROJ &gt;= 6 is a required dependency\n!ENDIF\n</code></pre>\n\n<p>What's that all about? If I am meant to define <code>PROJ_INCLUDE</code>, what value should it have? Is that even preprocessor define?</p>\n"}, {"tags": ["c++", "arrays", "function", "loops", "pointers"], "comments": [{"owner": {"reputation": 17337, "user_id": 83605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a214bcecbc04c7c42696e55cbdea3e17?s=128&d=identicon&r=PG", "display_name": "Aziz", "link": "https://stackoverflow.com/users/83605/aziz"}, "edited": false, "score": 3, "creation_date": 1566430610, "post_id": 57600342, "comment_id": 101657897, "body": "Why do you create a new <code>array</code> inside the function?"}, {"owner": {"reputation": 49, "user_id": 11544307, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eswJfTm6Mws/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc2iOtO0peVQQttRqwYo_PyMhLQxg/mo/photo.jpg?sz=128", "display_name": "hi_it&#39;sme", "link": "https://stackoverflow.com/users/11544307/hi-itsme"}, "reply_to_user": {"reputation": 17337, "user_id": 83605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a214bcecbc04c7c42696e55cbdea3e17?s=128&d=identicon&r=PG", "display_name": "Aziz", "link": "https://stackoverflow.com/users/83605/aziz"}, "edited": false, "score": 0, "creation_date": 1566430772, "post_id": 57600342, "comment_id": 101657926, "body": "@Aziz the function doesn&#39;t allow me to pass an array to it as a parameter, so I wasnt sure where to put the array"}, {"owner": {"reputation": 17337, "user_id": 83605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a214bcecbc04c7c42696e55cbdea3e17?s=128&d=identicon&r=PG", "display_name": "Aziz", "link": "https://stackoverflow.com/users/83605/aziz"}, "edited": false, "score": 0, "creation_date": 1566431110, "post_id": 57600342, "comment_id": 101657994, "body": "You are actually passing an array (as a pointer) as a parameter to the function <code>print_sevens</code>.  You don&#39;t need to create a new array inside the function."}, {"owner": {"reputation": 49, "user_id": 11544307, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eswJfTm6Mws/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc2iOtO0peVQQttRqwYo_PyMhLQxg/mo/photo.jpg?sz=128", "display_name": "hi_it&#39;sme", "link": "https://stackoverflow.com/users/11544307/hi-itsme"}, "reply_to_user": {"reputation": 17337, "user_id": 83605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a214bcecbc04c7c42696e55cbdea3e17?s=128&d=identicon&r=PG", "display_name": "Aziz", "link": "https://stackoverflow.com/users/83605/aziz"}, "edited": false, "score": 0, "creation_date": 1566431359, "post_id": 57600342, "comment_id": 101658038, "body": "@Aziz ohh okay thanks"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1566431769, "post_id": 57600342, "comment_id": 101658104, "body": "To be clear: it outputs nothing at all?"}, {"owner": {"reputation": 49, "user_id": 11544307, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eswJfTm6Mws/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc2iOtO0peVQQttRqwYo_PyMhLQxg/mo/photo.jpg?sz=128", "display_name": "hi_it&#39;sme", "link": "https://stackoverflow.com/users/11544307/hi-itsme"}, "edited": false, "score": 0, "creation_date": 1566432239, "post_id": 57600342, "comment_id": 101658166, "body": "@Chipster yes nothing at all, just compiles"}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 1, "creation_date": 1566432470, "post_id": 57600342, "comment_id": 101658206, "body": "Which question are you asking: the one about no output or the one about passing the pointer to the function?"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 11544307, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eswJfTm6Mws/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc2iOtO0peVQQttRqwYo_PyMhLQxg/mo/photo.jpg?sz=128", "display_name": "hi_it&#39;sme", "link": "https://stackoverflow.com/users/11544307/hi-itsme"}, "edited": false, "score": 0, "creation_date": 1566430846, "post_id": 57600365, "comment_id": 101657950, "body": "i tried allocating a pointer to the *num variable then incrementing and printing that out but it just prints memory addresses"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1566431322, "post_id": 57600365, "comment_id": 101658031, "body": "<code>*num++</code> is just defeference pointer, then increment pointer. Since nothing is being done to the dereferenced pointer the asker could discard the defererence and not notice a thing. All that code&#39;s doing is advancing the pointer. Demo: <a href=\"https://ideone.com/z19w0Q\" rel=\"nofollow noreferrer\">ideone.com/z19w0Q</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1566431710, "post_id": 57600365, "comment_id": 101658096, "body": "That is not causing <b>the</b> problem, but it is <b>a</b> problem."}], "tags": [], "owner": {"reputation": 155, "user_id": 618849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42f222295e171bcb70f03432d4336f7d?s=128&d=identicon&r=PG", "display_name": "ansjob", "link": "https://stackoverflow.com/users/618849/ansjob"}, "is_accepted": false, "score": -1, "last_activity_date": 1566430560, "creation_date": 1566430560, "answer_id": 57600365, "question_id": 57600342, "link": "https://stackoverflow.com/questions/57600342/using-pointer-variables-to-print-specific-array-variables/57600365#57600365", "title": "Using pointer variables to print specific array variables", "body": "<p>You are modifying the contents of your array when you do <code>*num++</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "is_accepted": true, "score": 3, "last_activity_date": 1566432093, "last_edit_date": 1566432093, "creation_date": 1566431345, "answer_id": 57600444, "question_id": 57600342, "link": "https://stackoverflow.com/questions/57600342/using-pointer-variables-to-print-specific-array-variables/57600444#57600444", "title": "Using pointer variables to print specific array variables", "body": "<p>You are creating an additional array in the <code>print_sevens</code> function, which is unnecessary as you already passed the pointer to the first element of the array created in the <code>main()</code>(i.e. <code>array</code>).</p>\n\n<p>Removing that unnecessary <code>array</code> and related codes from the function will make the program run perfectly. <strong>(<a href=\"https://wandbox.org/permlink/I33yy4upkMGePhwZ\" rel=\"nofollow noreferrer\">See online</a>)</strong></p>\n\n<pre><code>void print_sevens(int* nums, int length) \n{\n    for (int i = 0; i &lt; length; i++) \n    {\n        if (nums[i] % 7 == 0) \n            std::cout &lt;&lt; nums[i] &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>and in the <code>main</code> you only need to do the follows, as <em><a href=\"https://stackoverflow.com/questions/1461432/what-is-array-decaying\">arrays decay to the pointer pointing to its first element</a></em>.</p>\n\n<pre><code>int main() \n{\n    int array[5]{ 5,8,21,43,70 };\n    print_sevens(array, 5);\n}\n</code></pre>\n\n<hr>\n\n<p>Note that, </p>\n\n<ul>\n<li><code>num++</code> increments the pointer, not the underline element it is\npointing to (due to the higher <em><a href=\"https://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow noreferrer\">operator precedence</a></em> of <code>operator++</code> than <code>operator*</code>). If you meant to increment the element(pointee) you\nshould have <code>(*num)++</code>.</li>\n<li>Secondly, do not practice with <code>using namespace std;</code>. Read more:\n<a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">Why is &quot;using namespace std;&quot; considered bad practice?</a></li>\n</ul>\n"}], "owner": {"reputation": 49, "user_id": 11544307, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eswJfTm6Mws/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc2iOtO0peVQQttRqwYo_PyMhLQxg/mo/photo.jpg?sz=128", "display_name": "hi_it&#39;sme", "link": "https://stackoverflow.com/users/11544307/hi-itsme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 57600444, "answer_count": 2, "score": 1, "last_activity_date": 1566465211, "creation_date": 1566430351, "last_edit_date": 1566465211, "question_id": 57600342, "link": "https://stackoverflow.com/questions/57600342/using-pointer-variables-to-print-specific-array-variables", "title": "Using pointer variables to print specific array variables", "body": "<p>I am a C++ beginner and my task is as follows:</p>\n\n<blockquote>\n  <p>Define and initialise a single-dimensional integer array. Next, define a pointer that points to the first element in the array and passes the pointer to a function.</p>\n  \n  <p>Using only pointer variables (and looping constructs), print only the array values that are exact multiples of <code>7</code> from start to finish to standard output. The only program output should be the numbers, one per line with no white space.</p>\n</blockquote>\n\n<p>I have tried: </p>\n\n<pre><code>void print_sevens(int* nums, int length)\n{\n    int array[5] = { 5,8,21,43,70 };\n    int* ptr = array;\n    int* num = array;\n    for (int i = 0; i &lt; length; i++)\n    {\n        *num++;\n        if (num[i] % 7 == 0) {\n            cout &lt;&lt; num[i] &lt;&lt; endl;\n        }\n    }\n}\n\nint main()\n{\n    int array[5] = { 5,8,21,43,70 };\n    int* ptr = array;\n    print_sevens(ptr, 5);\n}\n</code></pre>\n\n<p>It compiles but does not output anything.</p>\n\n<p>I am also confused about passing the pointer to a function. Should this be done in the main file or in the function file?</p>\n"}, {"tags": ["c++", "c++17", "point-cloud-library", "ransac"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 1, "creation_date": 1566430124, "post_id": 57600265, "comment_id": 101657801, "body": "Try enabling C++17 first, and then see what happens."}, {"owner": {"reputation": 83, "user_id": 10338275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db655a5f1ff0c2742207592cbb1d841?s=128&d=identicon&r=PG&f=1", "display_name": "Reza Afra", "link": "https://stackoverflow.com/users/10338275/reza-afra"}, "edited": false, "score": 0, "creation_date": 1566432779, "post_id": 57600265, "comment_id": 101658264, "body": "That increases the error because somewhere in some added library random _shuffle is used and C++17 doesn&#39;t support that"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1566446501, "post_id": 57600265, "comment_id": 101660415, "body": "See <a href=\"https://meetingcpp.com/blog/items/stdrandom_shuffle-is-deprecated.html\" rel=\"nofollow noreferrer\">meetingcpp.com/blog/items/stdrandom_shuffle-is-deprecated.ht&zwnj;&#8203;ml</a>"}], "owner": {"reputation": 83, "user_id": 10338275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db655a5f1ff0c2742207592cbb1d841?s=128&d=identicon&r=PG&f=1", "display_name": "Reza Afra", "link": "https://stackoverflow.com/users/10338275/reza-afra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1566429879, "creation_date": 1566429520, "last_edit_date": 1566429879, "question_id": 57600265, "link": "https://stackoverflow.com/questions/57600265/stdsample-not-found-in-point-cloud-project", "title": "std::sample not found in Point Cloud Project", "body": "<p>I am trying to implement RANSAC in a PCL project. I am getting the following 3 errors. For the first error, I understand that C++17 needs to be enabled. However, I have no clue what the other 2 errors mean. </p>\n\n<p>I have tried using std::experimental::sample but that doesn't\nwork either. </p>\n\n<pre><code>#include \"../../render/render.h\"\n#include &lt;unordered_set&gt;\n#include \"../../processPointClouds.h\"\n// using templates for processPointClouds so also include .cpp to help linker\n#include \"../../processPointClouds.cpp\"\n#include &lt;random&gt;\n#include &lt;algorithm&gt;\n#include &lt;experimental/algorithm&gt;\n\nstd::unordered_set&lt;int&gt; Ransac(pcl::PointCloud&lt;pcl::PointXYZ&gt;::Ptr cloud, int maxIterations, float distanceTol)\n{\n    std::unordered_set&lt;int&gt; inliersResult;\n    srand(time(NULL));\n\n    while(maxIterations--) {\n        std::unordered_set&lt;int&gt; inliers; // store the inliers here in each iteration\n        int sample_size {2};\n        std::vector&lt;pcl::PointXYZ&gt; sample (sample_size);\n        std::sample(cloud-&gt;points.begin(), cloud-&gt;points.end(), std::back_inserter(sample),\n                sample_size, std::mt19937{std::random_device{}()});\n\n        // fit a line ax + by+ c = 0 to the points in sample using (y0\u2212y1)x+(x1\u2212x0)y+(x0\u2217y1\u2212x1\u2217y0)=0\n        double x0 {sample.at(0).x}, y0 {sample.at(0).y}, x1 {sample.at(1).x}, y1 {sample.at(1).y};\n        double a {y0 - y1};\n        double b {x1 - x0};\n        double c {x0 * y1 - x1 * y0};\n\n        // find the distance to this line for all points in the cloud. If the distance is less than\n        // distanceTol at the index of the point to inliers\n        for(auto&amp; point: cloud-&gt;points) {\n            double distance = fabs(a * point.x - b * point.y - c) / sqrt(std::pow(a, 2) + std::pow(b, 2));\n            if (distance &lt; distanceTol) {\n                // add the index of the point to inliers\n                auto index = std::find(cloud-&gt;points.begin(), cloud-&gt;points.end(), point);\n                inliers.emplace(index);\n            }\n        }\n        if (inliers.size() &gt; inliersResult.size()) { inliersResult = inliers; }\n    }\n\n    return inliersResult;\n}\n\n</code></pre>\n\n<p>Here are the errors:</p>\n\n<pre><code> error: no member named 'sample' in namespace 'std'\n            std::sample(cloud-&gt;points.begin(), cloud-&gt;points.end(), std::back_inserter(sample),\n\n/Library/Developer/CommandLineTools/usr/include/c++/v1/algorithm:999:22: error: invalid operands to binary expression ('pcl::PointXYZ' and 'const pcl::PointXYZ')\n        if (*__first == __value_)\n\n\n\n/Library/Developer/CommandLineTools/usr/include/c++/v1/memory:1825:31: error: no viable conversion from 'std::__1::__wrap_iter&lt;pcl::PointXYZ *&gt;' to 'int'\n            ::new((void*)__p) _Up(_VSTD::forward&lt;_Args&gt;(__args)...);\n</code></pre>\n"}, {"tags": ["c++", "inheritance", "design-patterns", "dependencies", "multiple-inheritance"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1566429615, "post_id": 57600136, "comment_id": 101657676, "body": "BTW, you might use <a href=\"https://en.wikipedia.org/wiki/Double_dispatch#Double_dispatch_in_C++\" rel=\"nofollow noreferrer\">double dispatch</a> to avoid <code>typeid</code>."}, {"owner": {"reputation": 620, "user_id": 8924129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbc041e5ba3467df99d37319628ed9a6?s=128&d=identicon&r=PG&f=1", "display_name": "Bar Stool", "link": "https://stackoverflow.com/users/8924129/bar-stool"}, "edited": false, "score": 0, "creation_date": 1566438006, "post_id": 57600136, "comment_id": 101659084, "body": "This questions/answer raiser the importance of header files ;) ."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11383366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/689665319197829c3e2109cf8caeaaeb?s=128&d=identicon&r=PG&f=1", "display_name": "Valentin", "link": "https://stackoverflow.com/users/11383366/valentin"}, "edited": false, "score": 0, "creation_date": 1566430562, "post_id": 57600213, "comment_id": 101657885, "body": "This work perfectly!"}], "tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": true, "score": 1, "last_activity_date": 1566428967, "creation_date": 1566428967, "answer_id": 57600213, "question_id": 57600136, "link": "https://stackoverflow.com/questions/57600136/how-to-write-a-base-class-whose-child-classes-depend-on-each-other/57600213#57600213", "title": "How to write a base class whose child classes depend on each other?", "body": "<p>Declare your classes before you define them, eg:</p>\n\n<pre><code>//--------------------------------------------------------\n//Set class\n//--------------------------------------------------------\nclass Set\n{\npublic:\n    //some virtual functions\n\nprotected:\n    //some attributes \n};\n\n//--------------------------------------------------------\n// Declare FiniteSet class\n//--------------------------------------------------------\nclass FiniteSet : public Set\n{\npublic:\n    //implements all virtual functions \n\n    //function which needs to know CountableSet:\n    Set unionWith(Set* otherSet);\n\nprivate:\n    //some attributes\n};\n\n//--------------------------------------------------------\n// Declare CountableSet class\n//--------------------------------------------------------\nclass CountableSet : public Set\n{\npublic:\n    //implements all virtual functions \n\n    //function which needs to know FiniteSets\n    Set intersectWith(Set* otherSet);\n\nprivate:\n    //some attributes\n};\n\n// Define FiniteSet::unionWith\nSet FiniteSet::unionWith(Set* otherSet);\n{\n    if(typeid(CountableSet) != typeid(*otherSet))\n    {\n        //the other set is finite. We can simply add all             \n                    //elements from otherSet to this set.\n    }\n    else\n    {\n        //create a CountableSet and return it\n    }\n}\n\n// Define CountableSet::intersectWith\nSet CountableSet::intersectWith(Set* otherSet)\n{\n    if(typeid(FiniteSet) == typeid(*otherSet))\n    {\n        //do something and return FiniteSet\n    }\n    else\n    {\n        //do something and return occasionally CountableSet\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11383366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/689665319197829c3e2109cf8caeaaeb?s=128&d=identicon&r=PG&f=1", "display_name": "Valentin", "link": "https://stackoverflow.com/users/11383366/valentin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "closed_date": 1566480937, "accepted_answer_id": 57600213, "answer_count": 1, "score": 0, "last_activity_date": 1566428967, "creation_date": 1566428489, "question_id": 57600136, "link": "https://stackoverflow.com/questions/57600136/how-to-write-a-base-class-whose-child-classes-depend-on-each-other", "closed_reason": "Duplicate", "title": "How to write a base class whose child classes depend on each other?", "body": "<p>I'm trying to write a mathematical set class. My idea was to make an base class which is called Set. Then i wrote two child classes of the Set class. Namely the FiniteSet class and the CountableSet class (which can deal with infinite Sets). My problem is now that those child classes depend on each other and I cannot solve this. I will also appreciate completely different solutions to this problem. </p>\n\n<pre><code>//--------------------------------------------------------\n//Set class\n//--------------------------------------------------------\nclass Set\n{\npublic:\n    //some virtual functions\n\nprotected:\n    //some attributes \n};\n\n//--------------------------------------------------------\n//FiniteSet class\n//--------------------------------------------------------\nclass FiniteSet : public Set\n{\npublic:\n    //implements all virtual functions \n\n    //function which needs to know CountableSet:\n    Set unionWith(Set* otherSet)\n    {\n        if(typeid(CountableSet) != typeid(*otherSet))\n        {\n            //the other set is finite. We can simply add all             \n                        //elements from otherSet to this set.\n        }\n        else\n        {\n            //create a CountableSet and return it\n        }\n    }\n\nprivate:\n    //some attributes\n}\n\n//--------------------------------------------------------\n//CountableSet class\n//--------------------------------------------------------\nclass CountableSet : public Set\n{\npublic:\n    //implements all virtual functions \n\n    //function which needs to know FiniteSets\n    Set intersectWith(Set* otherSet)\n    {\n        if(typeid(FiniteSet) == typeid(*otherSet))\n        {\n            //do something and return FiniteSet\n        }\n        else\n        {\n            //do something and return occasionally CountableSet\n        }\n    }\n\nprivate:\n    //some attributes\n}\n</code></pre>\n"}, {"tags": ["c++", "performance", "c++11"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2956272"}, "edited": false, "score": 5, "creation_date": 1566428824, "post_id": 57600104, "comment_id": 101657489, "body": "I was surprised that the compiler didn&#39;t optimize it. And indeed, with <code>-O2</code> they don&#39;t take any time at all."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 4, "creation_date": 1566428834, "post_id": 57600104, "comment_id": 101657491, "body": "Did you compile with optimizations enabled? Which compiler did you use?"}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1566428870, "post_id": 57600104, "comment_id": 101657503, "body": "What compiler? Don&#39;t know for sure, but maybe the compiler spots that <code>n</code> is never used in the latter but not in the former?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2956272"}, "edited": false, "score": 0, "creation_date": 1566429092, "post_id": 57600104, "comment_id": 101657562, "body": "I have a similar behavior with <code>g++ 7.4.0</code> (cygwin), no compiler options. I looked at decompiled code, and <code>2*i*i</code> has strictly more instructions (<code>imul    eax, eax</code> and <code>add     eax, eax</code>), so I guess some low-level stuff is happening (but I&#39;ve no idea what exactly)."}, {"owner": {"reputation": 1170, "user_id": 5302440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GKjwX.png?s=128&g=1", "display_name": "sandes", "link": "https://stackoverflow.com/users/5302440/sandes"}, "edited": false, "score": 0, "creation_date": 1566429103, "post_id": 57600104, "comment_id": 101657566, "body": "using gcc (GCC) 9.1.1 20190503 (Red Hat 9.1.1-1) on fedora 30. No compiler options."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "reply_to_user": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1566429660, "post_id": 57600104, "comment_id": 101657689, "body": "@Adrian What? <code>+=</code> is used both times and nowhere else both times."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 6, "creation_date": 1566429732, "post_id": 57600104, "comment_id": 101657707, "body": "Firstly, performance with optimization disabled is meaningless. Secondly, both programs cause undefined behaviour due to integer overflow so all results are meaningless.  (And the compiler could hoist some or all of the loop out of between the timing checks)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1566429768, "post_id": 57600104, "comment_id": 101657720, "body": "I also suspect signed overflow... so UB."}, {"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1566430157, "post_id": 57600104, "comment_id": 101657806, "body": "As pointed out, you have to optimize for meaning. I get just a little faster, one try, with /02 ms142. See <a href=\"https://pastebin.com/piDMwtGj\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1566431346, "post_id": 57600104, "comment_id": 101658037, "body": "Also, with something that runs that long, using an internal clock will be deceiving. VS comes with a tool called a profiler to clock running time. See <a href=\"https://www.cs.rutgers.edu/~pxk/416/notes/07-scheduling.html\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 7817, "user_id": 4789373, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-f_OQrxbHhFQ/AAAAAAAAAAI/AAAAAAAAABA/NY38t7ooQ5c/photo.jpg?sz=128", "display_name": "FalconUA", "link": "https://stackoverflow.com/users/4789373/falconua"}, "edited": false, "score": 0, "creation_date": 1566431715, "post_id": 57600104, "comment_id": 101658097, "body": "Can confirm on my machine (<code>gcc 7.4</code>, <code>core i5</code>). I can only suggest that this has to do with smth similar to branch prediction -- namely, at some point, your processor will predict that &quot;every calculation from now will be overflow&quot;, so it will stop doing actual calculations. The 2nd version will come to this &quot;undefined behaviour&quot; point faster."}, {"owner": {"reputation": 7817, "user_id": 4789373, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-f_OQrxbHhFQ/AAAAAAAAAAI/AAAAAAAAABA/NY38t7ooQ5c/photo.jpg?sz=128", "display_name": "FalconUA", "link": "https://stackoverflow.com/users/4789373/falconua"}, "edited": false, "score": 0, "creation_date": 1566431747, "post_id": 57600104, "comment_id": 101658099, "body": "This is interesting, might do some analysis later."}, {"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "reply_to_user": {"reputation": 7817, "user_id": 4789373, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-f_OQrxbHhFQ/AAAAAAAAAAI/AAAAAAAAABA/NY38t7ooQ5c/photo.jpg?sz=128", "display_name": "FalconUA", "link": "https://stackoverflow.com/users/4789373/falconua"}, "edited": false, "score": 2, "creation_date": 1566432137, "post_id": 57600104, "comment_id": 101658154, "body": "@FalconUA did you look at your disassembly? I posted mine and there is no such check with ms142 /02. I can&#39;t imagine there is with gcc. Then again, if the op doesn&#39;t optimize... And he is not considering the long run time. mine was ~500ms."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1566433414, "post_id": 57600104, "comment_id": 101658349, "body": "Profiling without optimizations enabled results in irrelevant data."}], "answers": [{"tags": [], "owner": {"reputation": 6746, "user_id": 8185995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02d69271095c22ec7a2f5cad43ea3ac0?s=128&d=identicon&r=PG&f=1", "display_name": "robthebloke", "link": "https://stackoverflow.com/users/8185995/robthebloke"}, "is_accepted": true, "score": 4, "last_activity_date": 1566433423, "creation_date": 1566433423, "answer_id": 57600619, "question_id": 57600104, "link": "https://stackoverflow.com/questions/57600104/why-is-n-2-i-i-faster-than-n-i-in-c/57600619#57600619", "title": "Why is (n += 2 * i * i) faster than (n+= i) in C++?", "body": "<p><a href=\"https://godbolt.org/z/B3zIsv\" rel=\"nofollow noreferrer\">https://godbolt.org/z/B3zIsv</a></p>\n\n<p>You'll notice that with -O2, the code used to calculate 'n' is removed completely. So the real questions should be:</p>\n\n<ul>\n<li>Why are you profiling code <em>without</em> -O2? </li>\n<li>Why are you profiling code that has no observable side effects? <em>('n' can be removed completely - e.g. printing the value of 'n' at the end would be more useful here)</em></li>\n<li>Why are you not profiling code in a profiler?</li>\n</ul>\n\n<p>The timing results you have, result from a deeply flawed methodology. </p>\n"}], "owner": {"reputation": 1170, "user_id": 5302440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GKjwX.png?s=128&g=1", "display_name": "sandes", "link": "https://stackoverflow.com/users/5302440/sandes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 2, "accepted_answer_id": 57600619, "answer_count": 1, "score": 0, "last_activity_date": 1566433423, "creation_date": 1566428244, "last_edit_date": 1566433305, "question_id": 57600104, "link": "https://stackoverflow.com/questions/57600104/why-is-n-2-i-i-faster-than-n-i-in-c", "title": "Why is (n += 2 * i * i) faster than (n+= i) in C++?", "body": "<p>This C++11 program takes on average between 7.42s and 7.79s to run.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;chrono&gt;\n\nusing namespace std;\nusing c = chrono::system_clock;\nusing s = chrono::duration&lt;double&gt;;\n\nvoid func(){\n\n    int n=0;\n    const auto before = c::now();\n    for(int i=0; i&lt;2000000000; i++){\n        n += i;\n    }\n    const s duration = c::now() - before;\n    cout &lt;&lt; duration.count();\n\n}\n</code></pre>\n\n<p>if I replace <code>n += i</code> with <code>n += 2 * i * i</code> it takes between 5.80s and 5.96s. how come?</p>\n\n<p>I ran each version of the program 20 times, alternating between the two. Here are the results:</p>\n\n<pre><code>n += i   |  n += 2 * i * i\n---------+----------------\n7.77047  |  5.87978\n7.69226  |  5.83551\n7.77375  |  5.84888\n7.73748  |  5.84629\n7.72988  |  5.84356\n7.69736  |  5.83784\n7.72597  |  5.84246\n7.72722  |  5.81678\n7.73291  |  5.81237\n7.71871  |  5.81016\n7.7478   |  5.80119\n7.64906  |  5.80058\n7.7253   |  5.9078\n7.42734  |  5.96399\n7.72573  |  5.84733\n7.65591  |  5.81793\n7.76619  |  5.83116\n7.76963  |  5.84424\n7.79928  |  5.87078\n7.79274  |  5.84689\n</code></pre>\n\n<p>I have compiled it with (GCC) 9.1.1 20190503 (Red Hat 9.1.1-1). No optimization levels</p>\n\n<blockquote>\n  <p>g++ -std=c++11 </p>\n</blockquote>\n\n<p>We know that the maximum integer is ~ 2 billion. So, when i ~ 32000, can we say that the compiler predicts that the calculation will overflow?</p>\n"}, {"tags": ["c++", "macos", "sdl-2", "sdl-image"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1566427743, "post_id": 57600035, "comment_id": 101657290, "body": "I can&#39;t see where you add a include path to the parent directory of <code>SDL2&#47;</code> ?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1566427797, "post_id": 57600035, "comment_id": 101657300, "body": "Ditto. There should be a -I&lt;path to SDL includes&gt;"}], "owner": {"reputation": 1, "user_id": 11959495, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SYhL33hkIIo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdZrkbenah4u8SHyQfxRQaCeS1ZWQ/photo.jpg?sz=128", "display_name": "lucy yu", "link": "https://stackoverflow.com/users/11959495/lucy-yu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 703, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1566428598, "creation_date": 1566427530, "last_edit_date": 1566428598, "question_id": 57600035, "link": "https://stackoverflow.com/questions/57600035/sdl2-sdl-image-h-file-not-found", "title": "&#39;SDL2/SDL_image.h&#39; file not found", "body": "<p>I'm programming on Xcode. I include SDL_image.h as\n<code>#include &lt;SDL2/SDL_image.h&gt;</code></p>\n\n<p>and it says 'SDL2/SDL_image.h' file not found</p>\n\n<p>I have installed and linked binary with libraries both SDL2.framework and SDL2_image.framework.</p>\n\n<p>I used a Makefile to compile and there is an error: fatal error: 'SDL2/SDL_image.h' file not found</p>\n\n<p>Here is my Makefile</p>\n\n<pre><code># set the compiler\nCC := clang\n\n# set the compiler flags\nCXXFLAGS = -std=c++14 -Wall -MMD -Werror=vla pkg-config --cflags --libs sdl2 `-L/Library/Frameworks/ sdl2-config --libs --cflags` -ggdb3 -O0 --std=c99 -Wall -l SDL2_image -lm\n\n# add source files here\nSRCS := main.cpp #file-name.c\n\n# generate names of object files\nOBJS := $(SRCS:.c=.o)\n\n# name of executable\nEXEC := sdl #name your executable file\n\n# default recipe\nall: $(EXEC)\n\nshowfont: showfont.c Makefile\n    $(CC) -o $@ $@.c $(CFLAGS) $(LIBS)\n\nglfont: glfont.c Makefile\n    $(CC) -o $@ $@.c $(CFLAGS) $(LIBS)\n\n# recipe for building the final executable\n$(EXEC): $(OBJS) $(HDRS) Makefile\n    $(CC) -o $@ $(OBJS) $(CFLAGS)\n\n# recipe for building object files\n#$(OBJS): $(@:.o=.c) $(HDRS) Makefile\n#    $(CC) -o $@ $(@:.o=.c) -c $(CFLAGS)\n\n# recipe to clean the workspace\nclean:\n    rm -f $(EXEC) $(OBJS)\n\n.PHONY: all clean\n</code></pre>\n"}, {"tags": ["c++", "linker", "g++", "ld", "linker-scripts"], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 4059914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe428c524a7e8770edcbf5d8660e57d0?s=128&d=identicon&r=PG&f=1", "display_name": "cradical", "link": "https://stackoverflow.com/users/4059914/cradical"}, "edited": false, "score": 0, "creation_date": 1566828339, "post_id": 57600253, "comment_id": 101768380, "body": "Does exposing these through shared libraries provide a way to do this? i.e place a subset of symbols in the shared library in a particular section."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 95, "user_id": 4059914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe428c524a7e8770edcbf5d8660e57d0?s=128&d=identicon&r=PG&f=1", "display_name": "cradical", "link": "https://stackoverflow.com/users/4059914/cradical"}, "edited": false, "score": 0, "creation_date": 1581718143, "post_id": 57600253, "comment_id": 106543284, "body": "I don&#39;t think putting your code in a shared library makes any difference, no.  (Sorry, just seen this)."}], "tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": true, "score": 2, "last_activity_date": 1566480879, "last_edit_date": 1566480879, "creation_date": 1566429402, "answer_id": 57600253, "question_id": 57600013, "link": "https://stackoverflow.com/questions/57600013/place-c-class-and-its-derivatives-in-specific-section/57600253#57600253", "title": "Place C++ class and its derivatives in specific section", "body": "<p>You have to apply the section attribute to each individual method in the class unfortunately, e.g.:</p>\n\n<pre><code>class Test {\npublic:\n    __attribute__ ((section (\"ss\"), aligned(0x40))) void Foo(int a) {\n        printf(\"Hello\\n\");\n    }        \n};\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 4059914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe428c524a7e8770edcbf5d8660e57d0?s=128&d=identicon&r=PG&f=1", "display_name": "cradical", "link": "https://stackoverflow.com/users/4059914/cradical"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 57600253, "answer_count": 1, "score": 1, "last_activity_date": 1566480879, "creation_date": 1566427334, "question_id": 57600013, "link": "https://stackoverflow.com/questions/57600013/place-c-class-and-its-derivatives-in-specific-section", "title": "Place C++ class and its derivatives in specific section", "body": "<p>I have a section setup in my linker script, and I want to place all code for a particular C++ class as well as all other classes that derive from it in that section. Is this possible?</p>\n\n<p>I've tried this but got a warning:</p>\n\n<pre><code>class Test __attribute__ ((section (\"ss\"), aligned(0x40)));\n\nclass Test {\npublic:\n    void Foo(int a) {\n        printf(\"Hello\\n\");\n    }        \n};\n</code></pre>\n\n<p>Warning:</p>\n\n<pre><code>test.cpp:19:7: warning: attribute ignored in declaration of \u2018class Test\u2019 [-Wattributes]\n class Test __attribute__ ((section (\"ss\"), aligned(0x40)));\n</code></pre>\n"}, {"tags": ["c++", "recursion"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 4, "creation_date": 1566426318, "post_id": 57599809, "comment_id": 101656947, "body": "&quot;<i>I&#39;m aware that some of you are going to recommend me using debugger, but I didn&#39;t find there anything which would help me understand this</i>&quot; Please explain, how stepping through your code line-by-line, wouldn&#39;t help you understand this?"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 4, "creation_date": 1566427151, "post_id": 57599809, "comment_id": 101657163, "body": "Because you make the recursive call before you print anything--simple as that."}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1566427693, "post_id": 57599809, "comment_id": 101657275, "body": "This is a  brilliant example for recursion! Us old C/C++ programmers take it as staple diet but, for newbies, it&#39;s a <b>big part</b> of the learning curve!"}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 11319279, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--e0J4KeUKgo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re1x8QB6hBuOHsZPtn3wTUHGr1WxA/mo/photo.jpg?sz=128", "display_name": "crystalsky", "link": "https://stackoverflow.com/users/11319279/crystalsky"}, "edited": false, "score": 0, "creation_date": 1566428129, "post_id": 57599841, "comment_id": 101657368, "body": "Hmm...I&#39;ve missed one break point during debugging and that is why I didn&#39;t actually see that all recur calls end first and then output is being printed in the terminal...anyway your explanation helped me so thank you :)"}], "tags": [], "owner": {"reputation": 17393, "user_id": 402022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/36WSK.png?s=128&g=1", "display_name": "Theraot", "link": "https://stackoverflow.com/users/402022/theraot"}, "is_accepted": true, "score": 4, "last_activity_date": 1566428191, "last_edit_date": 1566428191, "creation_date": 1566426066, "answer_id": 57599841, "question_id": 57599809, "link": "https://stackoverflow.com/questions/57599809/why-recursion-works-backwards/57599841#57599841", "title": "Why recursion works backwards?", "body": "<p>The first element is processed after all the others. Similarly, the second element is processed after all the elements that come after it, and so on.</p>\n\n<pre><code>void recur(const char* sth) {\n\n    if (*sth != 'D') {\n        recur(sth+1); // &lt;- Here you are processing the rest...\n        std::cout &lt;&lt; *sth &lt;&lt; std::endl; // &lt;- ... before processing the current\n   }\n}\n</code></pre>\n\n<p>Try flipping those lines. Which also makes this into a tail recursion for extra points.</p>\n\n<hr>\n\n<blockquote>\n  <p>I was convinced that even though function calls itself, the first call doesn't automatically end.</p>\n</blockquote>\n\n<p>Correct, the function has to return, then the caller continues. If it didn't, then you would not see it output anything, given that you output after the recursive call.</p>\n\n<blockquote>\n  <p>At the start, I've 'ABCD', then I'm calling recursively with 'BCD' but also in the meantime shouldn't the first call of recur function print 'A' ?</p>\n</blockquote>\n\n<p>It does \"print\" 'A'. It does after the recursive call, which is printing everything else, resulting in 'A' being the last output.</p>\n\n<hr>\n\n<p>I see you say \"meantime\". The recursive call is not waiting for the caller to complete or anything like that. Au contraire, the caller would resume after the recursive call. To be clear, after the recursive call completes, the code that comes after the call continues. <em>Stepping through the code with a debugger should have made that clear.</em></p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 10903025, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2VQufc45wg4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYpqReMbRh9BraI4c52nF1RHQe_ww/mo/photo.jpg?sz=128", "display_name": "Just a guy", "link": "https://stackoverflow.com/users/10903025/just-a-guy"}, "is_accepted": false, "score": 1, "last_activity_date": 1566426594, "creation_date": 1566426594, "answer_id": 57599909, "question_id": 57599809, "link": "https://stackoverflow.com/questions/57599809/why-recursion-works-backwards/57599909#57599909", "title": "Why recursion works backwards?", "body": "<p>The order of the executed code is always important. You are calling the recur function with \"ABCD\", so:</p>\n\n<p>if char pointer is not at 'D':\n   -> calls the function again with \"BCD\" before you get a chance to output the current \n   position.</p>\n\n<p>Just switch the output and the function call and you're good to go.</p>\n"}, {"tags": [], "owner": {"reputation": 54, "user_id": 11302416, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7Qo0.jpg?s=128&g=1", "display_name": "toobladink", "link": "https://stackoverflow.com/users/11302416/toobladink"}, "is_accepted": false, "score": 1, "last_activity_date": 1566427443, "creation_date": 1566427443, "answer_id": 57600027, "question_id": 57599809, "link": "https://stackoverflow.com/questions/57599809/why-recursion-works-backwards/57600027#57600027", "title": "Why recursion works backwards?", "body": "<p>You are calling the function again before you are getting the output you desire.</p>\n\n<p>So when you first call <code>recur(sth+1)</code>, it goes into the next \"instance\" of that function, and it will continue to evaluate until you fail the condition. When it gets to the last call (in this case, when you reach <code>'C'</code>), then the output is printed in the console. It then proceeds \"backwards\", and going back to that call where you reach <code>'B'</code>, where it then executes the next line. If that wasn't clear, perhaps this code explanation might be.</p>\n\n<pre><code>void recur(const char* sth) { // value of char* sth is \"ABCD\"\n    if (*sth != 'D'){\n        recur(sth+1); // this adjusts the pointer, and calls the function\n                      // the current function will branch to a new function\n        std::cout &lt;&lt; *sth &lt;&lt; std::endl; // this line will not execute until the\n        // last line has been fully evaluated. This remains true for all calls of recur()\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 11319279, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--e0J4KeUKgo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re1x8QB6hBuOHsZPtn3wTUHGr1WxA/mo/photo.jpg?sz=128", "display_name": "crystalsky", "link": "https://stackoverflow.com/users/11319279/crystalsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 57599841, "answer_count": 3, "score": 2, "last_activity_date": 1566428191, "creation_date": 1566425834, "question_id": 57599809, "link": "https://stackoverflow.com/questions/57599809/why-recursion-works-backwards", "title": "Why recursion works backwards?", "body": "<p>I've a problem with understanding how this recursion works.\nWhy the output shows: C B A and not A B C ?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void recur(const char* sth) {\n\n    if (*sth != 'D') {\n        recur(sth+1);\n        std::cout &lt;&lt; *sth &lt;&lt; std::endl;\n    }\n}\n\nint main(){\n\n    recur(\"ABCD\");\n}\n</code></pre>\n\n<p>At the start, I've 'ABCD',\nthen I'm calling recursively with 'BCD' but also in the meantime shouldn't the first call of recur function print 'A' ?</p>\n\n<p>In recursive calling, recur function should again call recursively with 'CD', but also second call of recur function print 'B'</p>\n\n<p>and so on...</p>\n\n<p>I was convinced that even though function calls itself, the first call doesn't automatically end.</p>\n\n<p>I'm aware that some of you are going to recommend me using debugger, but I didn't find there anything which would help me understand this and that is why I decided to ask for help here.</p>\n\n<p>Kind regards,</p>\n"}, {"tags": ["c++", "gnu-global"], "owner": {"reputation": 2362, "user_id": 257924, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/iqU0g.gif?s=128&g=1", "display_name": "bgoodr", "link": "https://stackoverflow.com/users/257924/bgoodr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1566425618, "creation_date": 1566425618, "question_id": 57599772, "link": "https://stackoverflow.com/questions/57599772/how-to-specify-environment-variables-inside-gnu-global-gtags-conf-file", "title": "How to specify environment variables inside GNU Global gtags.conf file", "body": "<p><a href=\"https://stackoverflow.com/a/26725652/257924\">https://stackoverflow.com/a/26725652/257924</a> specifies a helpful environment variable called <code>GTAGSFORCECPP</code> to force <code>.h</code> files to be treated as C++ (as otherwise, C++ class definitions are not added as symbols to the tags database).  Ideally, I would not have to set that env var in my startup scripts, but have it be somehow expressed into a centrally located gtags.conf that can be shared with other developers in a network.   The gtags manual (specifically <a href=\"https://www.gnu.org/software/global/globaldoc_toc.html#CONFIGURATION-3\" rel=\"nofollow noreferrer\">this section</a>) is worded in such a way as to lead me to be believe it is possible:</p>\n\n<pre><code>You can use the following environment variables as a string\nvariable. If these variables are set then environment variables of\nthe same name are set before command execution.\n\n    GREP_COLOR\n    GREP_COLORS\n    GTAGSBLANKENCODE\n    GTAGSCACHE\n    GTAGSFORCECPP\n    GTAGSGLOBAL\n    GTAGSGTAGS\n    GTAGSLIBPATH\n    GTAGSLOGGING\n    GTAGSTHROUGH\n    GTAGS_OPTIONS\n    HTAGS_OPTIONS\n    MAKEOBJDIR\n    MAKEOBJDIRPREFIX\n    TMPDIR\n\nThe following variables are also available as a string\nvariable. By default, each of them has a directory path given by\nthe configure script.\n\n  bindir\n  datadir\n  libdir\n  localstatedir\n  sysconfdir\n</code></pre>\n\n<p>However, I'm not sure where to express it. For instance adding it like this gives a parsing error, so this is not correct:</p>\n\n<pre><code>#\n# Built-in parsers.\n#\ngtags:\\\n    :tc=common:\\\n    :tc=builtin-parser:\\\n    :GTAGSFORCECPP=1:\n</code></pre>\n\n<p>Really what I'm after is forcing all <code>.h</code> files to be treated as C++, so there is probably a better way to go about it.</p>\n"}, {"tags": ["c++", "macros", "c++17"], "comments": [{"owner": {"reputation": 772, "user_id": 4043866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104dac269b12649d6df8386b88962745?s=128&d=identicon&r=PG", "display_name": "JulianH", "link": "https://stackoverflow.com/users/4043866/julianh"}, "edited": false, "score": 1, "creation_date": 1566425429, "post_id": 57599719, "comment_id": 101656699, "body": "I guess you have to either pass the class name or typedef it. E.g. <code>using self = A;</code>."}, {"owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "edited": false, "score": 0, "creation_date": 1566425442, "post_id": 57599719, "comment_id": 101656706, "body": "See also <a href=\"https://stackoverflow.com/questions/21143835/can-i-implement-an-autonomous-self-member-type-in-c\" title=\"can i implement an autonomous self member type in c\">stackoverflow.com/questions/21143835/&hellip;</a>"}, {"owner": {"reputation": 442, "user_id": 9932916, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tzXpqeGz2Kg/AAAAAAAAAAI/AAAAAAAAAAA/-OUONdsc09A/photo.jpg?sz=128", "display_name": "Tagger5926", "link": "https://stackoverflow.com/users/9932916/tagger5926"}, "edited": false, "score": 1, "creation_date": 1566426067, "post_id": 57599719, "comment_id": 101656884, "body": "I don&#39;t see how this makes sense? Your member variable is already int, why would you want a generic compare when its going to fail unless it can implicitly convert to int? Would it not be better just to make the whole struct templated or is there some use case that I didn&#39;t consider?"}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1566442839, "post_id": 57599719, "comment_id": 101659838, "body": "Per Artyer: possible duplicate of <a href=\"https://stackoverflow.com/questions/21143835/can-i-implement-an-autonomous-self-member-type-in-c\">Can I implement an autonomous `self` member type in C++?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "is_accepted": false, "score": 1, "last_activity_date": 1566426041, "creation_date": 1566426041, "answer_id": 57599839, "question_id": 57599719, "link": "https://stackoverflow.com/questions/57599719/resolving-the-current-type-in-a-member-function-decfined-in-a-macro/57599839#57599839", "title": "Resolving the current type in a member function decfined in a macro", "body": "<p>You can modify your template solution so that it uses SFINAE instead of a static assert:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#define EQUAL \\\ntemplate&lt;typename T&gt; \\\nauto operator==(const T&amp; b) const -&gt; std::enable_if_t&lt; \\\n        std::is_same_v&lt;T, std::decay_t&lt;decltype(*this)&gt;&gt;, bool \\\n&gt; { \\\n    return a == b.a; \\\n}\n</code></pre>\n\n<p>(You need the trailing return type otherwise <code>this</code> is not in scope)</p>\n\n<p>This way there is a chance for other overloads to be chosen.</p>\n"}], "owner": {"reputation": 1397, "user_id": 2056191, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fe75bdfda5b7b10e0a4b57da8e0fd410?s=128&d=identicon&r=PG", "display_name": "Bomaz", "link": "https://stackoverflow.com/users/2056191/bomaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1566426041, "creation_date": 1566425238, "question_id": 57599719, "link": "https://stackoverflow.com/questions/57599719/resolving-the-current-type-in-a-member-function-decfined-in-a-macro", "title": "Resolving the current type in a member function decfined in a macro", "body": "<p>I have a member function defined in a macro, that member only takes arguments of the same type as the current class. How can I get the current type in the macro?</p>\n\n<p>I'm thinking something along the lines of </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#define EQUAL() bool operator==(const decltype(*this)&amp; b)const {return a==b.a;}\n\nstruct A{\n    int a;\n    EQUAL()\n};\n</code></pre>\n\n<p>however <code>this</code> isn't allowed to be used in a top level context like that.</p>\n\n<p>Are there any other methods for deducing the current type?</p>\n\n<p>The only other idea I have is to make it a template with a static assert that it is the same but that feels hacky.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;type_traits&gt;\n\n#define EQUAL() \\\ntemplate&lt;typename T&gt;\\\nbool operator==(const T&amp; b) const { \\\n    static_assert(std::is_same_v&lt;T,std::decay_t&lt;decltype(*this)&gt;&gt;);\\\n    return a==b.a;\\\n}\n\nstruct A{\n    int a;\n    EQUAL()\n};\n</code></pre>\n"}, {"tags": ["c++", "singleton", "abstract-class", "stdvector", "template-classes"], "comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1566425879, "post_id": 57599708, "comment_id": 101656829, "body": "A template class can have a non-template base.   Beyond that, can you explain what you&#39;re trying to achieve by having a vector of pointers to singletons?    Without that description, this look like an XY problem - you&#39;re trying to achieve X, think that some Y may provide a solution to X, so you ask how to do Y.     You&#39;re more likely to get a useful options if you ask how to do X (which may have many possible solutions) rather than asking how to do Y (which may or may not have a solution)."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1566426882, "post_id": 57599708, "comment_id": 101657083, "body": "Gotta say that title raised an eyebrow. <code>vector</code> of pointers to singleton sounds very odd. Why would you have more than one of a singleton? Notes: you can&#39;t override a static variable. <code>static</code> and <code>virtual</code> don&#39;t mix. I was  imagining something CRTP-ish, so I went to look it up and... <a href=\"https://stackoverflow.com/questions/34222703/how-to-override-static-method-of-template-class-in-derived-class\">voil&#224;!</a> That said, this won&#39;t help with the <code>vector</code> part of the job."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1566427091, "post_id": 57599708, "comment_id": 101657147, "body": "Obligatory drawing of attention to <a href=\"https://stackoverflow.com/a/1008289/4581301\">Meyer&#39;s Singleton</a>."}], "answers": [{"tags": [], "owner": {"reputation": 3, "user_id": 5142232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3aea79eb15ca579cc3b75faab98eb95e?s=128&d=identicon&r=PG&f=1", "display_name": "OstGeneralen", "link": "https://stackoverflow.com/users/5142232/ostgeneralen"}, "is_accepted": false, "score": 0, "last_activity_date": 1566426954, "creation_date": 1566426954, "answer_id": 57599965, "question_id": 57599708, "link": "https://stackoverflow.com/questions/57599708/c-vector-of-pointers-to-abstract-template-singleton-class/57599965#57599965", "title": "C++ vector of pointers to abstract template singleton class?", "body": "<p>I would not use the singleton pattern for this. Assuming that we want to update the Foos that we have in the Bar object we could just have Foo derive from IFoo but with no templating. If you really want to make sure that it's only ever instanced once you could have a static bool within its constructor that you set when it's called and assert or throw an exception in the case that it's already set when running through it.</p>\n\n<p>If there's a good reason for using the singleton pattern, most likely what you want to do is to have a non template interface that the template class derives from and that interface is what you then store a pointer to within your Bar array.</p>\n\n<p>Hope this helps?</p>\n"}], "owner": {"reputation": 1, "user_id": 11959277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db97f4c94b4ea984a67e3b7b0e96fe28?s=128&d=identicon&r=PG&f=1", "display_name": "rederci939", "link": "https://stackoverflow.com/users/11959277/rederci939"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566437845, "creation_date": 1566425186, "last_edit_date": 1566437845, "question_id": 57599708, "link": "https://stackoverflow.com/questions/57599708/c-vector-of-pointers-to-abstract-template-singleton-class", "title": "C++ vector of pointers to abstract template singleton class?", "body": "<p>I wouldn't be shocked if this is just a mess and there's a way better way of doing it, but here's what I'm working with.</p>\n\n<p>I have a base class Foo, and all of the derived classes are singletons.  Rather that write instance functions for each of the derivations I want to template it in Foo since it'll always be the same thing.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename T&gt;\nclass Foo{\n  private:\n    static T single;\n\n  public:\n    static T* instance();\n\n    virtual void fun() = 0;\n};\n\ntemplate&lt;typename T&gt;\nT Foo&lt;T&gt;::single;\n\ntemplate&lt;typename T&gt;\nT* Foo&lt;T&gt;::instance(){\n    return &amp;single;\n}\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class A : public Foo&lt;A&gt;{\n  public:\n    void fun();\n};\n\nclass B...\n\nclass C...\n</code></pre>\n\n<p>The trouble happens when I'm trying to make a class Bar which would have a vector of pointers to types of Foo.  It would be treated as a stack, and would run code from the Foo on top, along with code as they're pushed or popped.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class Bar{\n  private:\n    std::vector&lt;/*types of Foo&lt;T&gt;*/&gt; fooStack;\n\n  public:\n    void init();\n    void updateFoo();\n    void pushFooStack(Foo* f);\n    void popFooStack();\n};\n\n#include \"FooA.h\"\n\nvoid Bar::init(){\n    //Run Box initializing code\n    pushFooStack(A::instance())\n    return;\n}\n\nvoid Bar::updateFooStack(){\n    if(!fooStack.empty()){\n        //Run Foo&lt;T&gt; update code.\n    }\n    return;\n}\n\nvoid Bar::pushFooStack(Foo* f){\n    if(!fooStack.empty()){\n        //Run Foo&lt;U&gt; pause code\n        fooStack.pop_back();\n    }\n    fooStack.emplace_back(f);\n    //Run Foo&lt;U&gt; push code\n    return;\n}\n\nvoid Bar::popFooStack(){\n    if(!fooStack.empty()){\n        //Run Foo&lt;T&gt; pop code\n        fooStack.pop_back();\n    }\n    if(!fooStack.empty()){\n        //Run Foo&lt;U&gt; resume code\n    }\n    return;\n}\n</code></pre>\n\n<p>I can't have a vector to a templated class, and I've seen all sorts of suggestions to similar problems like creating some class IFoo, or using std::unique_ptr or boost::variant, but each of them seems to run into its own problem, often some form of \"Undefined reference to Foo::instance or \"invalid template parameter\"/\"Type/value mismatch\".  Perhaps I'm missing something on those solutions though.</p>\n\n<p>If anyone knows how I can get this to work, or maybe just a better way entirely to set this whole thing up then I'd love to hear it.  Not having to rewrite the same instance function for each derivation of Foo would be nice, but it at least works so if getting this to work is a hassle in its own right that's also an option.</p>\n\n<p>Thank you in advance, anyone who can help me out.</p>\n"}, {"tags": ["c++", "random"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2956272"}, "edited": false, "score": 1, "creation_date": 1566424378, "post_id": 57599509, "comment_id": 101656382, "body": "I&#39;m not so familiar with C++ distributions, so I don&#39;t know one. I can tell you how to implement it yourself in <code>O(n log^2 n)</code> total time (<code>log^2 n</code> time for each sampling) using <code>uniform_distribution</code>. Does it interest you?"}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1566424955, "post_id": 57599509, "comment_id": 101656563, "body": "If they&#39;re &quot;not repeated&quot; then they&#39;re not random!"}, {"owner": {"reputation": 624, "user_id": 5941695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3338291825ed895ec010db9e6c2bb4a9?s=128&d=identicon&r=PG&f=1", "display_name": "anymous.asker", "link": "https://stackoverflow.com/users/5941695/anymous-asker"}, "edited": false, "score": 0, "creation_date": 1566425300, "post_id": 57599509, "comment_id": 101656656, "body": "@dyukha : yes, please, that&#39;d be great too. @Adrian: yes they are: imagine the following procedure: start with an empty set, than add elements sequentially with <code>p[i] = {w[i] &#47; sum(w[not taken]) if not taken, 0 otherwise}</code> - the result is random non-repeated numbers."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2956272"}, "edited": false, "score": 0, "creation_date": 1566429487, "post_id": 57599793, "comment_id": 101657647, "body": "Oh, nice one! I had kind-of similar general idea, but I didn&#39;t think about balanced trees. I wanted to use binary search + fenwick tree, which is <code>O(log^2 n)</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2956272"}, "edited": false, "score": 1, "creation_date": 1566430747, "post_id": 57599793, "comment_id": 101657919, "body": "@anymous.asker, balanced trees can be a pain, but you can avoid it: you can work with unbalanced BST and add values to the tree in random order (so shuffle first, and then add). The resulting tree will be balanced with high probability. Another option is to just construct a perfectly balanced tree from the beginning."}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1566431322, "post_id": 57599793, "comment_id": 101658032, "body": "@dyukha Oh, the idea to just use a perfectly-balanced tree from the start because you&#39;re only deleting things and therefore can&#39;t increase the height is a really good one! I&#39;ll edit the answer to include that. :-)"}, {"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "edited": false, "score": 1, "creation_date": 1566446549, "post_id": 57599793, "comment_id": 101660424, "body": "@anymous.asker In the case when you don&#39;t need to update the vector of weights, it is better to store the &quot;tree&quot; in a flattened version - as a vector. You don&#39;t remove elements but temporarily set their weight to zero (and update sum of weights of all their parents each time you pick a sample integer; in the end you ought to restore initial values)."}, {"owner": {"reputation": 28567, "user_id": 815724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a514cd424088a3ba3012f5d77f2e334?s=128&d=identicon&r=PG", "display_name": "Peter O.", "link": "https://stackoverflow.com/users/815724/peter-o"}, "edited": false, "score": 0, "creation_date": 1566478242, "post_id": 57599793, "comment_id": 101674775, "body": "Consider providing pseudocode on how this idea can be implemented.  Also, note that C++ includes  <code>std::map</code>, which is the closest in spirit to a red-black tree in standard C++."}], "tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": true, "score": 5, "last_activity_date": 1566431398, "last_edit_date": 1566431398, "creation_date": 1566425718, "answer_id": 57599793, "question_id": 57599509, "link": "https://stackoverflow.com/questions/57599509/c-random-non-repeated-integers-with-weights/57599793#57599793", "title": "C++ random non-repeated integers with weights", "body": "<p>There is a nice way to solve this problem using augmented binary search trees. It gives an O(k log n)-time algorithm for sampling k elements at random.</p>\n\n<p>The idea goes like this. Let's imagine that you stash all your elements in an array, in sorted order, with each element tagged with its weight. You could then solve this problem (inefficiently) as follows:</p>\n\n<ol>\n<li>Generate a random number between 0 and the total weight of all elements.</li>\n<li>Iterate over the array until you find an element such that the random number is in the \"range\" spanned by that element. Here, the \"range\" represents the window of weights from the start of that element to the start of the next element.</li>\n<li>Remove that element and repeat.</li>\n</ol>\n\n<p>If you implement this as mentioned above, each pass of picking a random element will take time O(n): you have to iterate over all the elements of the array, then remove a single element somewhere once you've picked it. That's not great; the overall runtime is O(kn).</p>\n\n<p>We can slightly improve upon this idea in the following way. When storing all the elements in the array, have each element store both its actual weight and the combined weight of all elements that come before it. Now, to find which element you're going to sample, you don't need to use a linear search. You can instead use a <em>binary search</em> over the array to locate your element in time O(log n). However, the overall runtime of this approach is still O(n) per iteration, since that's the cost of removing the element you picked, so we're still in O(kn) territory.</p>\n\n<p>However, if you store the elements not in a sorted <em>array</em> where each element stores the weight of <em>all elements before it</em>, but in a <em>balanced binary search tree</em> where each element stores the weight of <em>all elements in its left subtree</em>, you can simulate the above algorithm (the binary search gets replaced with a walk over the tree). Moreover, this has the advantage that removing an element from the tree can be done in time O(log n), since it's a balanced BST.</p>\n\n<p>(If you're curious how you'd do the walk to find the element that you want, do a quick search for \"<a href=\"https://en.wikipedia.org/wiki/Order_statistic_tree\" rel=\"nofollow noreferrer\">order statistics tree</a>.\" The idea here is essentially a generalization of this idea.)</p>\n\n<p>Following the advice from @dyukha, you can get O(log n) time per operation by building a perfectly-balanced tree from the items in time O(n) (the items don't actually have to be sorted for this technique to work - do you see why?), then using the standard tree deletion algorithm each time you need to remove something. This gives an overall solution runtime of O(k log n).</p>\n"}, {"tags": [], "owner": {"reputation": 624, "user_id": 5941695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3338291825ed895ec010db9e6c2bb4a9?s=128&d=identicon&r=PG&f=1", "display_name": "anymous.asker", "link": "https://stackoverflow.com/users/5941695/anymous-asker"}, "is_accepted": false, "score": 0, "last_activity_date": 1592753795, "last_edit_date": 1592753795, "creation_date": 1566507011, "answer_id": 57616877, "question_id": 57599509, "link": "https://stackoverflow.com/questions/57599509/c-random-non-repeated-integers-with-weights/57616877#57616877", "title": "C++ random non-repeated integers with weights", "body": "<p>Putting the answers into code:</p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;random&gt;\n#include &lt;cmath&gt;\n#define pow2(n) ( 1 &lt;&lt; (n) ) /* https://stackoverflow.com/questions/101439/the-most-efficient-way-to-implement-an-integer-based-power-function-powint-int */\n\n\n\nint main()\n{\n    /* random and very biased set of weights */\n    std::vector&lt;double&gt; weights{1, 1, 10000, 1, 30000, 1, 1, 500000};\n    int rnd_max = weights.size();\n    int ntake = 3;\n\n    /* initialize random sampler */\n    unsigned int seed = 12345;\n    std::mt19937 rng(seed);\n\n    /* determine smallest power of two that is larger than N */\n    int tree_levels = ceil(log2((double) rnd_max));\n\n    /* initialize vector with place-holders for perfectly-balanced tree */\n    std::vector&lt;double&gt; tree_weights(pow2(tree_levels + 1));\n\n    /* compute sums for the tree leaves at each node */\n    int offset = pow2(tree_levels) - 1;\n    for (int ix = 0; ix &lt; rnd_max; ix++) {\n        tree_weights[ix + offset] = weights[ix];\n    }\n    for (int ix = pow2(tree_levels+1) - 1; ix &gt; 0; ix--) {\n        tree_weights[(ix - 1) / 2] += tree_weights[ix];\n    }\n\n    /* sample according to uniform distribution */\n    double rnd_subrange, w_left;\n    double curr_subrange;\n    int curr_ix;\n    std::vector&lt;int&gt; sampled(ntake);\n    for (int el = 0; el &lt; ntake; el++) {\n\n        /* go down the tree by drawing a random number and\n           checking if it falls in the left or right sub-ranges */\n        curr_ix = 0;\n        curr_subrange = tree_weights[0];\n        for (int lev = 0; lev &lt; tree_levels; lev++) {\n            rnd_subrange = std::uniform_real_distribution&lt;double&gt;(0, curr_subrange)(rng);\n            w_left = tree_weights[2 * curr_ix + 1];\n            curr_ix = 2 * curr_ix + 1 + (rnd_subrange &gt;= w_left);\n            curr_subrange = tree_weights[curr_ix];\n        }\n\n        /* finally, add element from this iteration */\n        sampled[el] = curr_ix - offset;\n\n        /* now remove the weight of the chosen element */\n        tree_weights[curr_ix] = 0;\n        for (int lev = 0; lev &lt; tree_levels; lev++) {\n            curr_ix = (curr_ix - 1) / 2;\n            tree_weights[curr_ix] =   tree_weights[2 * curr_ix + 1]\n                                    + tree_weights[2 * curr_ix + 2];\n        }\n    }\n\n    std::cout &lt;&lt; &quot;sampled integers: [ &quot;;\n    for (int a : sampled) std::cout &lt;&lt; a &lt;&lt; &quot; &quot;;\n    std::cout &lt;&lt; &quot;]&quot; &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n<p>Output as expected from the biased weights:</p>\n<pre><code>sampled integers: [ 7 4 2 ]\n</code></pre>\n<p>(Note that the time complexity is <code>O(n [when building the tree with sums of nodes weights] + k * log2(n) [when sampling the elements])</code> - better than the naive <code>O(n * k)</code>)</p>\n<p>EDIT: updated answer to work also with potentially non-unique weights.</p>\n<p>EDIT2: small changes for a more numerically-robust procedure.</p>\n"}], "owner": {"reputation": 624, "user_id": 5941695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3338291825ed895ec010db9e6c2bb4a9?s=128&d=identicon&r=PG&f=1", "display_name": "anymous.asker", "link": "https://stackoverflow.com/users/5941695/anymous-asker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 407, "favorite_count": 0, "accepted_answer_id": 57599793, "answer_count": 2, "score": 4, "last_activity_date": 1592753795, "creation_date": 1566423927, "last_edit_date": 1566425109, "question_id": 57599509, "link": "https://stackoverflow.com/questions/57599509/c-random-non-repeated-integers-with-weights", "title": "C++ random non-repeated integers with weights", "body": "<p>I want to efficiently generate a random sample of unique (non-repeated) integers in a (closed) range <code>[0, rnd_max]</code>, with each number in the range being possible to choose, and each being associated with a sample weight (the more weight, the more likely it should be that the number is chosen, with probability exactly <code>weight[i] / sum(weight[not_taken])</code> to be chosen next if it's not already taken in the sample).</p>\n\n<p>I see C++ has <code>std::discrete_distribution</code> which can generate random weighted integers, but if I use it to generate random integers and discard repeated ones, when the sample to take is large relative to the length of the possible range, there will be a lot of failed samples which are already taken, resulting in a highly inefficient procedure. It's not clear to me if Floyd's algorithm has some extension to the case with sample weights (<a href=\"https://math.stackexchange.com/questions/178690/whats-the-proof-of-correctness-for-robert-floyds-algorithm-for-selecting-a-sin\">https://math.stackexchange.com/questions/178690/whats-the-proof-of-correctness-for-robert-floyds-algorithm-for-selecting-a-sin</a>) - I personally cannot think of one.</p>\n\n<p>It's also possible to e.g. use <code>std::discrete_distribution</code> dropping the weight to zero, or performing a partial weighted shuffle like in this answer: <a href=\"https://stackoverflow.com/questions/50221136/c-weighted-stdshuffle\">C++. Weighted std::shuffle</a> - but in that answer, <code>std::discrete_distribution</code> is re-generated at each iteration and thus the running time becomes quadratic (it needs to cycle through the weights that are passed to it every time).</p>\n\n<p>In wondering what could be an efficient weighted random sample for unique integers in C++, that would work well for varying sample sizes (e.g. from 1% to 90% of sampled numbers in the available range).</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;random&gt;\n#include &lt;algorithm&gt;\n\nint main()\n{\n    size_t rnd_max = 1e5;\n    size_t ntake = 1e3;\n\n    unsigned int seed = 12345;\n    std::mt19937 rng(seed);\n    std::gamma_distribution&lt;double&gt; rgamma(1.0, 1.0);\n    std::vector&lt;double&gt; weights(rnd_max);\n    for (double &amp;w : weights) w = rgamma(rng);\n\n    std::vector&lt;int&gt; chosen_sample(ntake);\n    // sampler goes here...\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "mysql", "odbc", "otl"], "answers": [{"tags": [], "owner": {"reputation": 126, "user_id": 3870948, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1K8ps.gif?s=128&g=1", "display_name": "Miguel Vieira", "link": "https://stackoverflow.com/users/3870948/miguel-vieira"}, "is_accepted": true, "score": 0, "last_activity_date": 1566952987, "creation_date": 1566952987, "answer_id": 57683722, "question_id": 57599438, "link": "https://stackoverflow.com/questions/57599438/how-to-connect-c-to-mysql-with-otl-odbc-driver/57683722#57683722", "title": "How to connect C++ to MySQL with OTL ODBC driver?", "body": "<p>I managed to do it, I asked the creator of the OTL library and he helped me what to do:</p>\n\n<p>In Windows 7, go to Control Panel > Administrative Tools > ODBC Data Sources (32-bit) or > ODBC Data Sources (64-bit)</p>\n\n<p>And then you can create an ODBC DSN there, and it's what you need to provide for the connection.</p>\n\n<p>Alternatively, you can use a connection string (He recommended me this website: <a href=\"https://www.connectionstrings.com/\" rel=\"nofollow noreferrer\">https://www.connectionstrings.com/</a>)</p>\n\n<p>Anyway, I got it to work</p>\n"}], "owner": {"reputation": 126, "user_id": 3870948, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1K8ps.gif?s=128&g=1", "display_name": "Miguel Vieira", "link": "https://stackoverflow.com/users/3870948/miguel-vieira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "accepted_answer_id": 57683722, "answer_count": 1, "score": 0, "last_activity_date": 1566952987, "creation_date": 1566423511, "question_id": 57599438, "link": "https://stackoverflow.com/questions/57599438/how-to-connect-c-to-mysql-with-otl-odbc-driver", "title": "How to connect C++ to MySQL with OTL ODBC driver?", "body": "<p>I'm having trouble connecting to my MySQL database using the OTL ODBC Driver on C++.\nI'm using Visual Studio 2019, and the problem appears to be on the connection string.\nMy MySQL database is hosted on localhost with easyPHP, but I'll need to use an online database later, this first database is just for tests.</p>\n\n<p>I tried multiple types of connection strings, but I think I didn't fully get what should I supply as the DSN</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>db.rlogon(\"root@127.0.0.1\"); // connect to the database\n</code></pre>\n\n<p>I also tried</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>db.rlogon(\"root/@mysql\"); // connect to the database\n</code></pre>\n\n<p>and</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>db.rlogon(\"root\",\"\",\"127.0.0.1:3306\",0); // connect to the database\n</code></pre>\n\n<p>I expected it to connect, but it didn't, and I got this error:</p>\n\n<pre><code>\"[Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified\"\n</code></pre>\n"}, {"tags": ["c++", "com"], "comments": [{"owner": {"reputation": 1463, "user_id": 1375025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2XsUS.png?s=128&g=1", "display_name": "Giova", "link": "https://stackoverflow.com/users/1375025/giova"}, "edited": false, "score": 0, "creation_date": 1566422973, "post_id": 57599319, "comment_id": 101655994, "body": "you are giving as argument to <code>plocation-&gt;accLocation()</code> uninitialized pointers. If they are output arguments they should be previously allocated either on heap or on stack."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1566423022, "creation_date": 1566423022, "answer_id": 57599382, "question_id": 57599319, "link": "https://stackoverflow.com/questions/57599319/how-to-initiate-the-parameters-in-accloacation-method-of-iaccessible-interface/57599382#57599382", "title": "How to initiate the parameters in accLoacation() method of Iaccessible interface?", "body": "<p>I have a feeling, you need to use:</p>\n\n<pre><code>long x;\nlong y;\nlong width;\nlong height;\n\n...\n\n// Pass the addresses of objects where the values can be stored.\nhr = plocation-&gt;accLocation(&amp;x, &amp;y, &amp;width, &amp;height, varChild);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11959266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fe9bd7f5d74a2c513ee34570d3613f7?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/11959266/jeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566423022, "creation_date": 1566422565, "question_id": 57599319, "link": "https://stackoverflow.com/questions/57599319/how-to-initiate-the-parameters-in-accloacation-method-of-iaccessible-interface", "title": "How to initiate the parameters in accLoacation() method of Iaccessible interface?", "body": "<p>I try to retrieve the screen location of a element with accLocation() method of Iaccessible interface, but have trouble to initiate the parameters of the method </p>\n\n<pre><code>IAccessible *plocation;\nlong *x;\nlong *y;\nlong *width;\nlong *height;\n\nVARIANT varChild;\nvarChild.vt = VT_I4;\nvarChild.iVal = CHILDID_SELF;\n\nhr = pIaccessible-&gt;GetIAccessible(&amp;plocation);\nhr = plocation-&gt;accLocation(x, y, width, height, varChild);\n</code></pre>\n\n<p>But when I run it, the error messages come like:</p>\n\n<pre><code>    uninitialized local variable 'x'used,\n    uninitialized local variable 'y'used,\n    uninitialized local variable 'width'used,\n    uninitialized local variable 'height'used\n</code></pre>\n"}, {"tags": ["c++", "opencv", "lambda"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10189340, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-D4ckxgGfXSk/AAAAAAAAAAI/AAAAAAAAAJc/SJG7Rrg7Jbc/photo.jpg?sz=128", "display_name": "Danyu Li", "link": "https://stackoverflow.com/users/10189340/danyu-li"}, "edited": false, "score": 0, "creation_date": 1567199302, "post_id": 57599714, "comment_id": 101906391, "body": "Thank you for your detailed and instant response! I figured this multi-thread thing out after I add another capture count pixel in lambda. After using <code>calcHist</code> as you recommended, my auto white balance runs much faster than before."}], "tags": [], "owner": {"reputation": 2528, "user_id": 4658169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b351ed2ce7ddde5ab5ac9bd96200a62d?s=128&d=identicon&r=PG&f=1", "display_name": "CuriouslyRecurringThoughts", "link": "https://stackoverflow.com/users/4658169/curiouslyrecurringthoughts"}, "is_accepted": false, "score": 1, "last_activity_date": 1566426875, "last_edit_date": 1566426875, "creation_date": 1566425207, "answer_id": 57599714, "question_id": 57599271, "link": "https://stackoverflow.com/questions/57599271/different-results-on-using-opencv-raw-pointer-and-lambda-for-histogram/57599714#57599714", "title": "Different results on using OpenCV raw pointer and lambda for histogram", "body": "<p>The issue you are experiencing is a race condition, I simplified your example and I tried to understand what type you used for <code>Pixel</code>:</p>\n\n<pre><code>int main()\n{\n    using Pixel = cv::Point3_&lt;uint8_t&gt;;\n    cv::Mat _opencvImage(120, 120, CV_8UC3, cv::Scalar(0, 0, 0));\n\n    std::vector&lt;std::vector&lt;int&gt;&gt; hist_test(3, std::vector&lt;int&gt;(256, 0));\n    _opencvImage.forEach&lt;Pixel&gt;(\n        [&amp;hist_test](Pixel&amp; pixel, const int* pos) -&gt; void {\n            hist_test[0][pixel.x]++;\n            hist_test[1][pixel.y]++;\n            hist_test[2][pixel.z]++;\n        }\n    );\n\n\n    printf(\"hist2 b255= %d\\r\\n\", hist_test[0][0]);\n    printf(\"hist2 g255= %d\\r\\n\", hist_test[1][0]);\n    printf(\"hist2 r255= %d\\r\\n\", hist_test[2][0]);\n}\n</code></pre>\n\n<p>We know that the three values I print should be 120x120=14400, yet when you run the code you'll see, most likely, different values. This is due to a race condition because <code>forEach</code> according to the <a href=\"https://docs.opencv.org/3.4.0/d3/d63/classcv_1_1Mat.html#a952ef1a85d70a510240cb645a90efc0d\" rel=\"nofollow noreferrer\">docs</a></p>\n\n<blockquote>\n  <p>Invoke with arguments functor, and runs the functor over all matrix\n  element.</p>\n  \n  <p>The methods runs <strong>operation in parallel</strong>. </p>\n</blockquote>\n\n<p>So when you have 2 threads looking a two pixels having the same value in one of the channels you have a race that generates undefined behavior corrupting your results.</p>\n\n<p>To convince yourself (this is <strong>not</strong> the solution you should use) you can rewrite the program like this:</p>\n\n<pre><code>#include &lt;mutex&gt;\nint main()\n{\n    using Pixel = cv::Point3_&lt;uint8_t&gt;;\n    cv::Mat _opencvImage(120, 120, CV_8UC3, cv::Scalar(0, 0, 0));\n\n    std::vector&lt;std::vector&lt;int&gt;&gt; hist_test(3, std::vector&lt;int&gt;(256, 0));\n    std::mutex mx;\n    _opencvImage.forEach&lt;Pixel&gt;(\n        [&amp;hist_test, &amp;mx](Pixel&amp; pixel, const int* pos) -&gt; void {\n            std::lock_guard&lt;std::mutex&gt; lck{ mx };\n            hist_test[0][pixel.x]++;\n            hist_test[1][pixel.y]++;\n            hist_test[2][pixel.z]++;\n        }\n    );\n\n\n    printf(\"hist2 b255= %d\\r\\n\", hist_test[0][0]);\n    printf(\"hist2 g255= %d\\r\\n\", hist_test[1][0]);\n    printf(\"hist2 r255= %d\\r\\n\", hist_test[2][0]);\n}\n</code></pre>\n\n<p>Serializing the access to the histogram allows you to get the correct results, but obviously nullify the performance boost coming from using more threads. </p>\n\n<p>Now, there are plenty of ways to obtain the performance you want, e.g. you can calculate histograms in disjoint areas in parallel and then sum them. But I would suggest to use the function <a href=\"https://docs.opencv.org/3.4/d6/dc7/group__imgproc__hist.html#ga4b2b5fd75503ff9e6844cc4dcdaed35d\" rel=\"nofollow noreferrer\">calcHist</a> of OpenCV that does exactly what you want and you can find an official tutorial <a href=\"https://docs.opencv.org/3.4/d8/dbc/tutorial_histogram_calculation.html\" rel=\"nofollow noreferrer\">here</a>. I skimmed the <a href=\"https://github.com/opencv/opencv/blob/master/modules/imgproc/src/histogram.cpp\" rel=\"nofollow noreferrer\">implementation</a> of <code>calcHist</code> I could see that <code>calcHist</code> leverages already acceleration (I can see calls to OpenVX and IPP implementations). So, I think it is unlikely that your code could perform better than the code shipped already with OpenCV unless you have a very peculiar use case and you are willing to invest a lot of time.</p>\n"}], "owner": {"reputation": 21, "user_id": 10189340, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-D4ckxgGfXSk/AAAAAAAAAAI/AAAAAAAAAJc/SJG7Rrg7Jbc/photo.jpg?sz=128", "display_name": "Danyu Li", "link": "https://stackoverflow.com/users/10189340/danyu-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1566426875, "creation_date": 1566422156, "question_id": 57599271, "link": "https://stackoverflow.com/questions/57599271/different-results-on-using-opencv-raw-pointer-and-lambda-for-histogram", "title": "Different results on using OpenCV raw pointer and lambda for histogram", "body": "<p>Tried to rewrite the OpenCV code using lambda since they are really fast. But the results shows the histogram values not entirely the same, which affects the calculation afterwards.</p>\n\n<p>Here are some of the logs I saw. I am expecting for the same color channel(r,g,b), their histogram value should be the same.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>hist b 255= 274163\nhist2 b255= 271049\nhist g 255= 260360\nhist2 g255= 258447\nhist r 255= 257104\nhist2 r255= 255348\nElapsed time\uff1a136759us (136.759ms)\nhist b 255= 274289\nhist2 b255= 271266\nhist g 255= 260346\nhist2 g255= 258108\nhist r 255= 257084\nhist2 r255= 255236\nElapsed time\uff1a135269us (135.269ms)\nhist b 255= 274294\nhist2 b255= 271183\nhist g 255= 260342\nhist2 g255= 258242\nhist r 255= 257099\nhist2 r255= 255197\nElapsed time\uff1a142417us (142.417ms)\nhist b 255= 274218\nhist2 b255= 271021\nhist g 255= 260375\nhist2 g255= 258768\nhist r 255= 257039\nhist2 r255= 255643\nElapsed time\uff1a138296us (138.296ms)\n</code></pre>\n\n<p>Here is my code</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// use raw pointer access\nstd::vector&lt;std::vector&lt;int&gt;&gt; hists(3,std::vector&lt;int&gt;(256,0));\nfor (int y = 0; y &lt; _opencvImage.rows; ++y)\n{\n    uchar *ptr = _opencvImage.ptr&lt;uchar&gt;(y);\n    for (int x = 0; x &lt; _opencvImage.cols; ++x) \n    {\n        for (int j = 0; j &lt; 3; ++j)\n        {\n            hists[j][ptr[x * 3 + j]] += 1;\n        }\n    }\n}\n\n// use lambda\nstd::vector&lt;std::vector&lt;int&gt;&gt; hist_test(3,std::vector&lt;int&gt;(256,0));\n_opencvImage.forEach&lt;Pixel&gt;(\n[&amp;hist_test] (Pixel &amp;pixel, const int *pos) -&gt; void {\n            hist_test[0][pixel.x]++;\n            hist_test[1][pixel.y]++;\n            hist_test[2][pixel.z]++;\n    }\n);\n\nprintf(\"hist b 255= %d\\r\\n\", hists[0][255]);\nprintf(\"hist2 b255= %d\\r\\n\", hist_test[0][255]);\nprintf(\"hist g 255= %d\\r\\n\", hists[1][255]);\nprintf(\"hist2 g255= %d\\r\\n\", hist_test[1][255]);\nprintf(\"hist r 255= %d\\r\\n\", hists[2][255]);\nprintf(\"hist2 r255= %d\\r\\n\", hist_test[2][255]);\n</code></pre>\n"}, {"tags": ["c++", "cmake", "librdkafka"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1566421750, "post_id": 57599033, "comment_id": 101655629, "body": "Did you try to do what it tells you in the first error message?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1566422159, "post_id": 57599033, "comment_id": 101655758, "body": "Do either of <code>librdkafkaConfig.cmake</code> or <code>librdkafka-config.cmake</code> exist on your system?"}, {"owner": {"reputation": 56, "user_id": 11959052, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ka67F0ENfYU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfKbLsK_E9l4RVPp-1E0jM4-TChrw/photo.jpg?sz=128", "display_name": "Andr&#233; Ferrari Moukarzel", "link": "https://stackoverflow.com/users/11959052/andr%c3%a9-ferrari-moukarzel"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1566422763, "post_id": 57599033, "comment_id": 101655922, "body": "@drescherjm those files do not exist in my system. I imagine they would be created by following the instructions in librdkafka/packaging/cmake/README.md, but those instructions fail to work..."}, {"owner": {"reputation": 56, "user_id": 11959052, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ka67F0ENfYU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfKbLsK_E9l4RVPp-1E0jM4-TChrw/photo.jpg?sz=128", "display_name": "Andr&#233; Ferrari Moukarzel", "link": "https://stackoverflow.com/users/11959052/andr%c3%a9-ferrari-moukarzel"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1566424301, "post_id": 57599033, "comment_id": 101656362, "body": "@drescherjm good point, I have updated the description. Thanks for the input."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1566425932, "post_id": 57599033, "comment_id": 101656843, "body": "Did you install <code>libzstd-dev</code>? I think you don&#39;t have the development package installed and that is causing your problem with the missing <code>zstd_errors.h</code> headers."}, {"owner": {"reputation": 56, "user_id": 11959052, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ka67F0ENfYU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfKbLsK_E9l4RVPp-1E0jM4-TChrw/photo.jpg?sz=128", "display_name": "Andr&#233; Ferrari Moukarzel", "link": "https://stackoverflow.com/users/11959052/andr%c3%a9-ferrari-moukarzel"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1566490099, "post_id": 57599033, "comment_id": 101681753, "body": "I have installed libzstd-dev with the <code>sudo apt install libzstd-dev</code> command. I have the latest version (0.5.1-1) installed.  Is it possible that I have to manually build the libzstd library?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1566490235, "post_id": 57599033, "comment_id": 101681816, "body": "Does <code>zstd_errors.h</code> exist in a standard location? like /usr/include"}, {"owner": {"reputation": 56, "user_id": 11959052, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ka67F0ENfYU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfKbLsK_E9l4RVPp-1E0jM4-TChrw/photo.jpg?sz=128", "display_name": "Andr&#233; Ferrari Moukarzel", "link": "https://stackoverflow.com/users/11959052/andr%c3%a9-ferrari-moukarzel"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1566494428, "post_id": 57599033, "comment_id": 101683587, "body": "I reinstalled the zstd library and the Cmake build of rdkafka worked! More details in <a href=\"https://github.com/edenhill/librdkafka/issues/2486\" rel=\"nofollow noreferrer\">github.com/edenhill/librdkafka/issues/2486</a>  I updated the question to keep only still relevant information, hope this is not a bad practice..."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1566494542, "post_id": 57599033, "comment_id": 101683637, "body": "You probably should have left the info and provided your own answer to the question in the Answers section. Remember that at <code>StackOverflow</code> a question must be self contained. No external links to content that may go away in the future. The main purpose of a question is to help future readers with the same problem."}], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 11959052, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ka67F0ENfYU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfKbLsK_E9l4RVPp-1E0jM4-TChrw/photo.jpg?sz=128", "display_name": "Andr&#233; Ferrari Moukarzel", "link": "https://stackoverflow.com/users/11959052/andr%c3%a9-ferrari-moukarzel"}, "is_accepted": true, "score": -1, "last_activity_date": 1582218919, "creation_date": 1582218919, "answer_id": 60325340, "question_id": 57599033, "link": "https://stackoverflow.com/questions/57599033/librdkafka-not-found-by-cmake/60325340#60325340", "title": "librdkafka not found by CMake", "body": "<p>This solved itself. Apparently, this was a bug with the CppKafka library and was already solved by the developers.</p>\n"}], "owner": {"reputation": 56, "user_id": 11959052, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ka67F0ENfYU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfKbLsK_E9l4RVPp-1E0jM4-TChrw/photo.jpg?sz=128", "display_name": "Andr&#233; Ferrari Moukarzel", "link": "https://stackoverflow.com/users/11959052/andr%c3%a9-ferrari-moukarzel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 905, "favorite_count": 0, "accepted_answer_id": 60325340, "answer_count": 1, "score": 3, "last_activity_date": 1582218919, "creation_date": 1566420678, "last_edit_date": 1566494266, "question_id": 57599033, "link": "https://stackoverflow.com/questions/57599033/librdkafka-not-found-by-cmake", "title": "librdkafka not found by CMake", "body": "<p>I'm trying to use Kafka in a project that uses CMake to be built.</p>\n\n<p>I have librdkafka-dev (version 0.8.6-1.1) installed.</p>\n\n<p>I also tried downloading the project from Git and building it manually, which seem to be successful.</p>\n\n<p>I noticed a README.md file in the librdkafka/packaging/cmake and followed its instructions, successfully creating a CMake build of librdkafka in the directory.</p>\n\n<p>Running the 'cmake' command in my project results in the following error:</p>\n\n<pre><code>CMake Error at CMakeLists.txt:8 (find_package):\n  By not providing \"Findlibrdkafka.cmake\" in CMAKE_MODULE_PATH this project\n  has asked CMake to find a package configuration file provided by\n  \"librdkafka\", but CMake did not find one.\n\n  Could not find a package configuration file provided by \"librdkafka\" with\n  any of the following names:\n\n    librdkafkaConfig.cmake\n    librdkafka-config.cmake\n\n  Add the installation prefix of \"librdkafka\" to CMAKE_PREFIX_PATH or set\n  \"librdkafka_DIR\" to a directory containing one of the above files.  If\n  \"librdkafka\" provides a separate development package or SDK, be sure it has\n  been installed.\n</code></pre>\n\n<p>It is possible that librdkafka is simply the wrong package name to look for rdkafka in a CMakeLists.txt file, but I haven't found out how to add it to CMake without using the Cppkafka wrapper.</p>\n\n<p>So I tried downloading and building Cppkafka (running the <code>cmake ..</code> inside its directory's folder), and it results in the following error:</p>\n\n<pre><code>-- Build will generate a shared library. Use CPPKAFKA_BUILD_SHARED=0 to perform a static build\n-- RdKafkaConfig.cmake not found. Attempting to find module instead...\n-- Could NOT find RDKAFKA (missing: RdKafka_LIBRARY_DIR) \n-- Found valid rdkafka version\n-- RdKafka module found.\n-- Disabling tests because submodule Catch2 isn't checked out\n-- Configuring done\nCMake Error in src/CMakeLists.txt:\n  Target \"RdKafka::rdkafka\" contains relative path in its\n  INTERFACE_LINK_DIRECTORIES:\n\n    \"RdKafka_LIBRARY_DIR-NOTFOUND\"\n</code></pre>\n\n<p>Thank you for any help!</p>\n"}, {"tags": ["c++", "mpi"], "comments": [{"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 1, "creation_date": 1566418063, "post_id": 57598517, "comment_id": 101654281, "body": "What do you mean by &quot;it prints nothing&quot;? Do you see <code>1  check is 0</code> or nothing at all? Maybe your output is redirected to a file? Or maybe you don&#39;t have 2 nodes ready? What is the value you got from <code>MPI_Comm_size</code>? Is <code>If</code> a typo while copying code here or is it present in your actual code?"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1566418136, "post_id": 57598517, "comment_id": 101654307, "body": "Since MPI doesn&#39;t support <code>bool</code>, it seems you&#39;d be better off sending a <code>char</code>, rather than trying something which isn&#39;t supported."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1566418264, "post_id": 57598517, "comment_id": 101654351, "body": "&quot;<i>there are no error messages</i>&quot; 1) Compilation error messages? That doesn&#39;t mean anything, since your code can, still, contain undefined behavior. 2) Your code doesn&#39;t even check if <code>MPI_Send</code>, and <code>MPI_Recv</code> succeeded. How do you know, that they succeeded? 3) Doesn&#39;t your program have undefined behavior, since you are trying to send 1 element of <code>bool</code> type (which has size of <code>1</code> byte), but are telling the MPI, that you are sending an <code>int</code> (which has the typical size of <code>4</code> bytes)?"}], "answers": [{"tags": [], "owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "is_accepted": true, "score": 3, "last_activity_date": 1566430312, "creation_date": 1566430312, "answer_id": 57600337, "question_id": 57598517, "link": "https://stackoverflow.com/questions/57598517/how-to-send-boolean-datatype-through-mpi-c/57600337#57600337", "title": "How to send Boolean datatype through mpi c++?", "body": "<p>The standard (MPI 3.1 table 3.4 page 27) defines <code>MPI_CXX_BOOL</code> to be used with the C++ <code>bool</code> datatype.</p>\n"}], "owner": {"reputation": 3, "user_id": 11226002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68c9f6d6ecc1703d986f54c2d5952c72?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Hady", "link": "https://stackoverflow.com/users/11226002/ahmed-hady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1114, "favorite_count": 0, "accepted_answer_id": 57600337, "answer_count": 1, "score": -1, "last_activity_date": 1566430916, "creation_date": 1566417799, "last_edit_date": 1566430916, "question_id": 57598517, "link": "https://stackoverflow.com/questions/57598517/how-to-send-boolean-datatype-through-mpi-c", "title": "How to send Boolean datatype through mpi c++?", "body": "<p>I am new with c++ and trying to send a bool datatype through MPI, but c++ does not support this data type.</p>\n\n<p>I tried to make it <code>MPI_BYTE</code> and <code>MPI_INT</code> but it prints nothing.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include \"mpi.h\"\n\nusing namespace std;\n\nint main(int argc, char **argv)\n{ \n    int R,P;\n    MPI_Status status; \n    bool check = false;\n    MPI_Init(&amp;argc, &amp;argv);\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;P);\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;R);\n    if (R == 0)\n    {\n       check = true;\n       MPI_Send(&amp;check,1,MPI_BYTE,1,1,MPI_COMM_WORLD);\n    }\n    else if (R == 1)\n    {  \n       MPI_Recv(&amp;check,1,MPI_BYTE,0,1,MPI_COMM_WORLD,&amp;status);\n       cout &lt;&lt; R &lt;&lt;\"\\t check is \\t\"&lt;&lt; check &lt;&lt; endl;\n    }\n\n    MPI_Finalize();\n    return 0;\n}\n</code></pre>\n\n<p>There are no error messages.</p>\n"}, {"tags": ["c++", "c++11", "boost", "boost-range", "boost-adaptors"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1566417882, "post_id": 57598370, "comment_id": 101654218, "body": "Try <code>auto vec = *it</code> and <code>for (auto it2 = boost::begin(vec); it2 != boost::end(vec); ++it2) { ... }</code>, or try a range based for loop: <code>for (uint32_t x : *it) { ... }</code>. I suspect that <code>*it</code> returns a vector by value, which is promptly destroyed after the call to <code>boost::begin</code>, meaning that <code>it2</code> dangles."}, {"owner": {"reputation": 432, "user_id": 681011, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/k5D9t.jpg?s=128&g=1", "display_name": "koral", "link": "https://stackoverflow.com/users/681011/koral"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1566419477, "post_id": 57598370, "comment_id": 101654814, "body": "Using <code>auto vec = *it</code> prints the expected output <code>1 2</code> (cf <a href=\"http://cpp.sh/5hw3t\" rel=\"nofollow noreferrer\">cpp.sh/5hw3t</a>)."}, {"owner": {"reputation": 432, "user_id": 681011, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/k5D9t.jpg?s=128&g=1", "display_name": "koral", "link": "https://stackoverflow.com/users/681011/koral"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1567019071, "post_id": 57598370, "comment_id": 101841188, "body": "I also suspect <code>*it</code> is promptly destroyed, the point of the question is to understand why, if this is indeed the case."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1567021991, "post_id": 57598370, "comment_id": 101842308, "body": "Look up &quot;temporary lifetime&quot; or &quot;lifetime of temporaries&quot;. In short, temporaries only live until the end of the statement (generally the next <code>;</code>). Objects are automatically destroyed at the end of their lifetime. Therefore, the temporary is destroyed after the initialization of <code>it2</code>, but before any iteration actually happens."}], "owner": {"reputation": 432, "user_id": 681011, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/k5D9t.jpg?s=128&g=1", "display_name": "koral", "link": "https://stackoverflow.com/users/681011/koral"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1566638720, "creation_date": 1566417101, "last_edit_date": 1566638720, "question_id": 57598370, "link": "https://stackoverflow.com/questions/57598370/unexpected-behavior-of-boostadaptorstransformed-when-the-transformation-func", "title": "Unexpected behavior of boost::adaptors::transformed when the transformation function returns by value", "body": "<p>Consider the following piece of C++11 code which is the smallest reproducer I could come up with:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;boost/range/adaptor/transformed.hpp&gt;\n\nstd::vector&lt;uint32_t&gt; myTransform(const std::vector&lt;uint32_t&gt;&amp; iVector) {\n  return iVector;\n}\n\nint main() {\n  const std::vector&lt;std::vector&lt;uint32_t&gt;&gt; theInput{{1, 2}};\n  const auto myRange = theInput | boost::adaptors::transformed(myTransform);\n\n  for (auto it = boost::begin(myRange); it != boost::end(myRange); ++it) {\n    for (auto it2 = boost::begin(*it); it2 != boost::end(*it); ++it2) {\n      std::cout &lt;&lt; *it2 &lt;&lt; std::endl;\n    }\n  }\n}\n</code></pre>\n\n<p>I expected it to print the following output:</p>\n\n<pre><code>1\n2\n</code></pre>\n\n<p>... but instead it prints (cf <a href=\"http://cpp.sh/8yivt\" rel=\"nofollow noreferrer\">http://cpp.sh/8yivt</a>):</p>\n\n<pre><code>0\n0\n</code></pre>\n\n<p>However, if I change <code>myTransform</code> to return a reference like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>const std::vector&lt;uint32_t&gt;&amp; myTransform(const std::vector&lt;uint32_t&gt;&amp; iVector) {\n  return iVector;\n}\n</code></pre>\n\n<p>... then I get the expected output (cf <a href=\"http://cpp.sh/5brvl\" rel=\"nofollow noreferrer\">http://cpp.sh/5brvl</a>).</p>\n\n<p>I couldn't find any explanation for this behavior from <a href=\"https://www.boost.org/doc/libs/1_70_0/libs/range/doc/html/index.html\" rel=\"nofollow noreferrer\">the Boost.Range documentation</a>. Is my code incorrect ? Are my expectations incorrect ? Is it a bug/known limitation in Boost.Range ?</p>\n\n<p>The aim of this question is first and foremost to understand why this behaves in an unexpected way, and only incidentally to find a solution.</p>\n"}, {"tags": ["c++", "polymorphism", "variant", "visitor"], "comments": [{"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1566418896, "post_id": 57598253, "comment_id": 101654589, "body": "One solution is to convert a polymorphic base class to a variant and then re-use the existing variant machinery. The signature would be something like <code>template&lt;class Base, class... Derived&gt; std::variant&lt;Derived*...&gt; polymorphic_ptr_to_variant(Base* ptr);</code>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1566419593, "post_id": 57598253, "comment_id": 101654857, "body": "Related to <a href=\"https://stackoverflow.com/questions/29286381/multiple-dispatch-solution-with-full-maintainability\">multiple-dispatch-solution-with-full-maintainability</a>"}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 5, "last_activity_date": 1566420056, "last_edit_date": 1566420056, "creation_date": 1566418933, "answer_id": 57598734, "question_id": 57598253, "link": "https://stackoverflow.com/questions/57598253/a-stdvisit-like-function-for-visiting-over-polymorphic-types/57598734#57598734", "title": "A std::visit-like function for visiting over polymorphic types", "body": "<p>You can use <code>std::variant</code> there too:</p>\n\n<pre><code>struct Foo1;\nstruct Foo2;\nstruct Foo3;\n\nusing FooVariant = std::variant&lt;Foo1*, Foo2*, Foo3*&gt;;\n\nstruct IFoo\n{\n    virtual ~IFoo() = default;\n\n    FooVariant AsVariant() = 0;\n\n    // ...\n};\n\nstruct Foo1 : IFoo\n{\n    FooVariant AsVariant() override { return this;}\n    // ...\n};\n// Same for FooX\n\nstruct Bar1;\nstruct Bar2;\nstruct Bar3;\n\nusing BarVariant = std::variant&lt;Bar1*, Bar2*, Bar3*&gt;;\n\nstruct IBar\n{\n    virtual ~IBar() = default;\n\n    BarVariant AsVariant() = 0;\n\n    // ...\n};\n\nstruct Bar1 : IBar\n{\n    BarVariant AsVariant() override { return this;}\n    // ...\n};\n// Same for BarX\n</code></pre>\n\n<p>And then</p>\n\n<pre><code>void fun(IFoo&amp; foo, IBar&amp; bar) {\n   std::visit(overloaded{\n            [](Foo1* a, Bar1* b) { /*..*/ },\n            [](Foo2* a, Bar2* b) { /*..*/ },\n            [](Foo3* a, auto* b) { /*..*/ },\n            [](auto* a, auto* b) { /*..*/ }, // &lt;&lt; default!\n        },\n        foo.AsVariant(), bar.AsVariant()\n    );\n}\n</code></pre>\n\n<p>If you don't want that virtual <code>AsVariant()</code> in interface (but use <code>dynamic_cast</code>), you might still have free function:</p>\n\n<pre><code>FooVariant AsVariant(IFoo&amp; foo)\n{\n    if (auto* p = dynamic_cast&lt;Foo1*&gt;(&amp;foo)) {\n        return p;\n    }\n    if (auto* p = dynamic_cast&lt;Foo2*&gt;(&amp;foo)) {\n        return p;\n    }\n    if (auto* p = dynamic_cast&lt;Foo3*&gt;(&amp;foo)) {\n        return p;\n    }\n    throw std::runtime_error(\"Invalid type\");\n}\n\n</code></pre>\n"}], "owner": {"reputation": 138, "user_id": 3169195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/102514556f78b52fa2cf4ff5b07d348a?s=128&d=identicon&r=PG&f=1", "display_name": "jesusbriales", "link": "https://stackoverflow.com/users/3169195/jesusbriales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 57598734, "answer_count": 1, "score": 6, "last_activity_date": 1566474592, "creation_date": 1566416518, "last_edit_date": 1566474592, "question_id": 57598253, "link": "https://stackoverflow.com/questions/57598253/a-stdvisit-like-function-for-visiting-over-polymorphic-types", "title": "A std::visit-like function for visiting over polymorphic types", "body": "<p>I've been recently trying C++17's <code>std::variant</code> and <code>std::visit</code>, and I found it quite powerful.\nI specially liked the ability to create a visitor pattern over several variant objects.\nHere is one example of what I mean:</p>\n\n<pre><code>std::variant&lt;int, float, char&gt; v1 { 's' };\nstd::variant&lt;int, float, char&gt; v2 { 10 };\n\nstd::visit(overloaded{\n        [](int a, int b) { },\n        [](int a, float b) { },\n        [](int a, char b) { },\n        [](float a, int b) { },\n        [](auto a, auto b) { }, // &lt;&lt; default!\n    }, v1, v2);\n</code></pre>\n\n<p>See <a href=\"https://www.bfilipek.com/2018/09/visit-variants.html\" rel=\"noreferrer\">https://www.bfilipek.com/2018/09/visit-variants.html</a> for full details.\nIn view of this, I was wondering if it'd be possible to write similar code based on polymorphic types rather than variant objects.</p>\n\n<p>Think about an scenario where we're using dynamic polymorphism and parent objects for writing a generic interface.\nThen we want to implement a certain functionality that depends on several polymorphic types, i.e. like</p>\n\n<pre><code>void fun(IFoo* ptr_foo, IBar* ptr_bar) {\n  {\n    Foo1* child_foo = dynamic_cast&lt;Foo1*&gt;(ptr_foo);\n    Bar1* child_bar = dynamic_cast&lt;Bar1*&gt;(ptr_bar);\n    if(child_foo &amp;&amp; child_bar) { return fun(child_foo, child_bar) }\n  }\n  // ... other cases\n  {\n    Foo1* child_foo = dynamic_cast&lt;Foo1*&gt;(ptr_foo);\n    BarN* child_bar = dynamic_cast&lt;BarN*&gt;(ptr_bar);\n    if(child_foo &amp;&amp; child_bar) { return fun(child_foo, child_bar) }\n  }\n  // ... other cases\n  {\n    FooN* child_foo = dynamic_cast&lt;FooN*&gt;(ptr_foo);\n    BarN* child_bar = dynamic_cast&lt;BarN*&gt;(ptr_bar);\n    if(child_foo &amp;&amp; child_bar) { return fun(child_foo, child_bar) }\n  }\n  throw std::runtime_error{};\n}\n</code></pre>\n\n<p>I know the above is far from optimal, but just trying to make the scenario as clear as possible.</p>\n\n<p>In this scenario, using a virtual function for <code>fun</code> does not seem straightforward, as it depends on the type of two inputs.\nBesides, we're trying to avoid virtual methods for these functionalities,\nas we prefer keeping the interface for <code>IFoo</code> or <code>IBar</code> agnostic of these external functions.</p>\n\n<p>Using a visitor pattern does not seem plausible either, for several input objects to the visiting function.</p>\n\n<p>The simplest approach seems the example implementation using <code>dynamic_cast</code> I showed above,\nbut this quickly escalates in the number of cases to write as we go from 1 to N inputs.\nThe <code>std::variant</code>+<code>std::visit</code> approach above, though, covers this scenario so cleanly and straightforwardly.</p>\n\n<p>So wrapping up, our constraints/requirements are:</p>\n\n<ul>\n<li>A visitor pattern that takes several polymorphic objects as input</li>\n<li>Non-critical runtime performance (so say using <code>dynamic_cast</code> is fine)</li>\n<li>Having minimum boilerplate, akin to the <code>std::visit</code> approach</li>\n</ul>\n\n<p>Is this possible somehow?</p>\n\n<p>I was considering writing a variadic recursive templated function, akin to <code>std::visit</code>,\nwhich would automatically generate all type cases to check for.\nAn example of use would be something like:\n<code>visitPolymorphic&lt;tuple&lt;Foo1, Foo2&gt;,tuple&lt;Bar1, Bar2, Bar3&gt;&gt;(ptr_foo, ptr_bar)</code>\nThis would if-else over the different template input types, and dispatch the right call.</p>\n\n<p>Any thoughts on this?</p>\n"}, {"tags": ["c++", "c++11", "c++17", "nullptr", "stdoptional"], "comments": [{"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 6, "creation_date": 1566416473, "post_id": 57598241, "comment_id": 101653684, "body": "What about <code>boost::optional</code>?"}, {"owner": {"reputation": 2854, "user_id": 6923555, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-N8FUb3l8l44/AAAAAAAAAAI/AAAAAAAAAio/1HlhcKxsTPo/photo.jpg?sz=128", "display_name": "rodrigocfd", "link": "https://stackoverflow.com/users/6923555/rodrigocfd"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1566416521, "post_id": 57598241, "comment_id": 101653711, "body": "@Yksisarvinen Possible, but I&#39;d rather keep the library depending only on the STL itself."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 4, "creation_date": 1566416659, "post_id": 57598241, "comment_id": 101653762, "body": "If C++11 is a requirement, you cannot use <code>std::optional</code>. Choose one."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1566416756, "post_id": 57598241, "comment_id": 101653803, "body": "You can always make your own.  AFAIK it does not rely on any C++17 features, it just wasn&#39;t added until then."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1566416800, "post_id": 57598241, "comment_id": 101653822, "body": "Another thing you can do is use <code>std::unique_ptr</code>"}, {"owner": {"reputation": 1205, "user_id": 2846068, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kHfXv.jpg?s=128&g=1", "display_name": "MasterAler", "link": "https://stackoverflow.com/users/2846068/masteraler"}, "edited": false, "score": 3, "creation_date": 1566416816, "post_id": 57598241, "comment_id": 101653831, "body": "Why, <code>std::optional</code> is not that complex. Find some reliable implementation and/or write some template code. You won&#39;t get that class from anywhere else in C++11."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1566417025, "post_id": 57598241, "comment_id": 101653909, "body": "If you have code that works correctly without <code>std::optional</code> just use it. Don\u2019t complicate things with maybe-this-way-maybe-that-way."}, {"owner": {"reputation": 592, "user_id": 3054219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/298f60961c829e570dbf0566134dd7cb?s=128&d=identicon&r=PG&f=1", "display_name": "Sonic78", "link": "https://stackoverflow.com/users/3054219/sonic78"}, "edited": false, "score": 1, "creation_date": 1566423371, "post_id": 57598241, "comment_id": 101656125, "body": "IMHO the question is if you want to return something (an object) that is on the heap or if you want to retrun a value (not created on the heap - here optional helps). If you only need to support heap objects you could mimic the optional API with a wrapper that uses <code>std::unique_ptr</code>. (<i>Note: my company used a std::optional backport to C++11, so it is possible to use it with C++11.</i>)"}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 2, "last_activity_date": 1566423948, "creation_date": 1566423948, "answer_id": 57599513, "question_id": 57598241, "link": "https://stackoverflow.com/questions/57598241/using-stdoptional-in-a-c11-context/57599513#57599513", "title": "Using std::optional in a C++11 context", "body": "<p>There is no standard way of using <code>std::optional</code> in C++11. You can either depend on C++17, or you cannot use <code>std::optional</code>.</p>\n\n<blockquote>\n  <p>Should I provide my own std::optional implementation?</p>\n</blockquote>\n\n<p>You can write your own optional implementation, but you cannot call it <code>std::optional</code>. Alternatively, you can use a pre-existing implementation such as the one in Boost.</p>\n\n<p>All that said, if you're returning a pointer anyway, then  there is probably not much point in using optional since pointers already have a representation for \"empty\" value: the null pointer. If however you need to distinguish null from empty, then optional may be useful. </p>\n"}, {"tags": [], "owner": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "is_accepted": false, "score": 1, "last_activity_date": 1603815772, "creation_date": 1603815772, "answer_id": 64558682, "question_id": 57598241, "link": "https://stackoverflow.com/questions/57598241/using-stdoptional-in-a-c11-context/64558682#64558682", "title": "Using std::optional in a C++11 context", "body": "<p>use this header: <a href=\"https://github.com/TartanLlama/optional\" rel=\"nofollow noreferrer\">https://github.com/TartanLlama/optional</a></p>\n<p>It is the equivalent of std::optional. But it works on C++11 also.\nWhen you upgrade to C++17, switch to </p>\n"}], "owner": {"reputation": 2854, "user_id": 6923555, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-N8FUb3l8l44/AAAAAAAAAAI/AAAAAAAAAio/1HlhcKxsTPo/photo.jpg?sz=128", "display_name": "rodrigocfd", "link": "https://stackoverflow.com/users/6923555/rodrigocfd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2570, "favorite_count": 0, "accepted_answer_id": 57599513, "answer_count": 2, "score": 2, "last_activity_date": 1603815772, "creation_date": 1566416419, "question_id": 57598241, "link": "https://stackoverflow.com/questions/57598241/using-stdoptional-in-a-c11-context", "title": "Using std::optional in a C++11 context", "body": "<p>I'm writing a small C++11 library in which I believe <code>std::optional</code> would be a nice addition in some functions which can return <code>nullptr</code>. However, <code>std::optional</code> is a C++17 feature. Since being C++11 is a requirement, I'm looking for ways to use <code>std::optional</code> while keeping compatibility.</p>\n\n<p>I found that <a href=\"https://en.cppreference.com/w/User:D41D8CD98F/feature_testing_macros#C.2B.2B17\" rel=\"nofollow noreferrer\">feature macros</a> can be tested. I suppose I could use it to detect whether <code>std::optional</code> is available... but what's the best approach when it isn't?</p>\n\n<p>Should I provide my own <code>std::optional</code> implementation?</p>\n\n<p>Return <code>nullptr</code> when <code>std::optional</code> isn't available? (Likely to mess my code.)</p>\n\n<p>Or give up on the idea and keep returning <code>nullptr</code> only?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1566415714, "post_id": 57598044, "comment_id": 101653329, "body": "What does <code>stack_array</code> do? Please post the code here, not via a link."}, {"owner": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "edited": false, "score": 2, "creation_date": 1566415838, "post_id": 57598044, "comment_id": 101653387, "body": "I&#39;m tempted to say that this isn&#39;t possible with the C++ stack if the callee gets to choose the VLA size, but the caller specifies the size of the stack frame. Your stack-based approach just seems like a limited allocator that&#39;s working on its own heap, and can&#39;t do allocations that aren&#39;t strictly LIFO."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1566415915, "post_id": 57598044, "comment_id": 101653417, "body": "Copy and move operations should not consider the actual <code>ptr</code> and <code>size</code> members to be part of the value of the <code>stack_array</code>. Those are intrinsically linked to the memory location of each instance. You need to copy or move the elements instead. Edit : For example the copy constructor would look like your copy assignment operator."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1566416398, "post_id": 57598044, "comment_id": 101653659, "body": "@Taylor Noted. To expand on my previous comment, since you only use trivial types, and you can&#39;t actually just move the pointers around, both move and copy operations will result in the same thing. It&#39;s just a <code>memcpy</code> to different locations in the allocated space."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 6, "creation_date": 1566416444, "post_id": 57598044, "comment_id": 101653679, "body": "You can probably still use <code>std::vector</code>, but supply a <a href=\"http://howardhinnant.github.io/stack_alloc.html\" rel=\"nofollow noreferrer\">stack based allocator, like this one</a>"}, {"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1566416942, "post_id": 57598044, "comment_id": 101653879, "body": "@PaulMcKenzie. That&#39;s a linear allocator which happens to be on a stack. Different thing, but definitely useful!"}], "answers": [{"comments": [{"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "edited": false, "score": 1, "creation_date": 1566417847, "post_id": 57598193, "comment_id": 101654207, "body": "I don&#39;t believe a general purpose allocator (satisfying <code>std::allocator</code>, say) can use a stack."}, {"owner": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "reply_to_user": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "edited": false, "score": 0, "creation_date": 1566418624, "post_id": 57598193, "comment_id": 101654501, "body": "@Taylor Yeah, after reading the spec you&#39;re right and I&#39;ll edit shortly. That said, given the requirements I&#39;m a bit confused now given the state of the question which is hindering further development of this answer--are you looking for an alternative to what you have, or a code review addressing your existing solution?"}, {"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "edited": false, "score": 0, "creation_date": 1566418876, "post_id": 57598193, "comment_id": 101654583, "body": "Thanks for your answer :). I&#39;m not looking for a code review actually. Just wondering if it&#39;s possible. I included the code to make the question more concrete."}, {"owner": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "reply_to_user": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "edited": false, "score": 0, "creation_date": 1566419950, "post_id": 57598193, "comment_id": 101654985, "body": "@Taylor As it stands, not too sure because we might have differing definitions. It looks like you&#39;re passing around (by value) a minimal wrapper around an off-stack region used as a VLA (and I&#39;m still fighting with my compilers&#39; sanitizers to validate that it does so correctly). If I were implementing something with these requirements I might consider using an arena instead, and passing lightweight references into that arena by value as much as possible."}, {"owner": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "reply_to_user": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "edited": false, "score": 0, "creation_date": 1566422623, "post_id": 57598193, "comment_id": 101655883, "body": "@Taylor After instrumenting your code with ASan, I&#39;m getting at least one memory violation regarding ctor/dtor order with <code>filter</code>: <code>r</code> (the returned value) outlives <code>b</code> and no move ctor is ever called on it (RVO I think); as a result invariants <i>are</i> broken since the order is b, r, ~b, ~r. There&#39;s a possibility of making this work, but so far this problem suggests that the current design is too complex and brittle and might want to be reworked to require less of users (i.e. using the arena as I mentioned, and reclaiming memory in one pass at the end)"}, {"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "edited": false, "score": 0, "creation_date": 1566447510, "post_id": 57598193, "comment_id": 101660578, "body": "Thanks again. I&#39;m a bit embarrassed that I didn&#39;t try Asan! (I use it all the time for my app)"}], "tags": [], "owner": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "is_accepted": true, "score": 5, "last_activity_date": 1566422882, "last_edit_date": 1566422882, "creation_date": 1566416188, "answer_id": 57598193, "question_id": 57598044, "link": "https://stackoverflow.com/questions/57598044/is-it-possible-to-create-a-memory-efficient-vla-like-type-that-can-be-returned-b/57598193#57598193", "title": "Is it possible to create a memory-efficient VLA-like type that can be returned by value?", "body": "<p>Looking briefly at your stack-based approach, it seems like nothing more than a heap-based allocator working on its own little private heap, but with a strict limitation wherein it malfunctions if allocations are not performed in strictly LIFO order. At that rate, you might consider extending this to actually support non-trivial types while keeping the same allocation mechanism.</p>\n\n<p>With that said, it also doesn't appear to maintain its preconditions under normal-seeming use: <code>filter</code> constructs <code>b</code> then <code>r</code>, but <code>r</code> seemingly outlives <code>b</code> (discovered with ASAN by manually poisoning and unpoisoning bits of your \"stack\" in the ctor and dtor). </p>\n\n<p>If memory is not too tight, you could consider using an <a href=\"https://en.wikipedia.org/wiki/Region-based_memory_management\" rel=\"nofollow noreferrer\">arena allocator</a>. You could either maintain small arenas that (as an explicit requirement to the user, or through reference-counting) outlive any allocations made into them.</p>\n\n<p>You also might want to consider more traditional methods of returning values, such as allocating stack-based arrays in the caller and passing pointers/references to them. At least for the audio application, fixed-length buffers might also be suitable.</p>\n"}], "owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 57598193, "answer_count": 1, "score": 2, "last_activity_date": 1566422882, "creation_date": 1566415431, "last_edit_date": 1566419561, "question_id": 57598044, "link": "https://stackoverflow.com/questions/57598044/is-it-possible-to-create-a-memory-efficient-vla-like-type-that-can-be-returned-b", "title": "Is it possible to create a memory-efficient VLA-like type that can be returned by value?", "body": "<p>I was wondering if it's possible in C++ to create a type that works like a VLA (stack-allocated, variable sized), can also be returned from a function, and doesn't waste memory like a linear allocator.</p>\n\n<p>Could be used like:</p>\n\n<pre><code>// Fibonacci sequence\nstack_array&lt;int&gt; fib(size_t n) {\n\n  stack_array&lt;int&gt; f(n);\n  f[0] = 0;\n  f[1] = 1;\n  for(size_t i=2;i&lt;n;++i) {\n    f[i] = f[i-1] + f[i-2];\n  }\n\n  return f;\n}\n</code></pre>\n\n<p>This is useful because I find myself returning variable sized things (usually using <code>std::vector</code>) with heap allocation. I might also like to do this in a real-time context where heap allocation isn't allowed. Functional-stye programming on audio buffers, say. But mostly, this is an intellectual exercise to see what's possible.</p>\n\n<p>I realize that I can write a <code>std::allocator</code> which would do linear allocation, thus satisfying a realtime constraint, and easily supporting nontrivial types, but this has the downside of wasting memory. I'm wondering if I can do better.</p>\n\n<p>To make this more concrete, suppose we have:</p>\n\n<pre><code>thread_local arena myArena; // I don't want to have to pass this around!\n\nstd::vector&lt;float&gt; f() {\n   return std::vector&lt;float, arena&gt;(64, myArena);\n}\n\nstd::vector&lt;float&gt; g() {\n   return std::vector&lt;float, arena&gt;(64, myArena);\n}\n\nvoid main() {\n\n   {\n       auto a = f();\n   }\n\n   {\n       auto b = g();\n   }\n\n   // At this point, we still have 128*sizeof(float) allocated.\n   // You might say to use multiple arenas, but that might not\n   // be easy.\n}\n</code></pre>\n\n<p>Now, we know that if we aren't returning things from functions, then LIFO construction/destruction order is guaranteed (this is needed for RAII). I'm wondering if constraints can be placed on the container so it can be returned from a function while still guaranteeing LIFO order.</p>\n\n<p>Here's my attempt at an implementation, using a separate <code>thread_local</code> stack, but I don't know if it's really correct, as I find ensuring the construction and destruction order maintains the invariants a bit confusing.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\n// Big stack.\nstatic size_t stackSize = 1024*1024*10;\nstatic thread_local uint8_t* start = nullptr;\nstatic thread_local uint8_t* stack = nullptr;\n\n// An array with simple stack based allocation.\n// Size is fixed on creation.\n//\n// I'm assuming this is difficult with std::vector\n// and a custom allocator because it can grow.\n// \n// T must be trivial for now\ntemplate&lt;class T&gt;\nclass stack_array {\n\n    size_t _size;\n    T* ptr;\n\npublic:\n\n    stack_array(size_t size) : _size(size) {\n        static_assert(std::is_trivial&lt;T&gt;::value);\n        if(stack == nullptr) {\n            start = stack = (uint8_t*) malloc(stackSize);\n        }\n        ptr = (T*) stack;\n        stack += size*sizeof(T);\n        assert(stack &lt; start + stackSize);\n        printf(\"ctor %p, stack %d\\n\", (void*) this, int(stack - start));\n    }\n\n    // I think the copy constructor violates our stack\n    // nesting property, since the lifetimes overlap.\n    stack_array(const stack_array&amp;) = delete;\n\n    ~stack_array() {\n        stack -= _size*sizeof(T);\n        printf(\"dtor %p, stack %d\\n\", (void*) this, int(stack - start));\n    }\n\n    stack_array&amp; operator=(const stack_array&amp; a) {\n        printf(\"assign\\n\");\n        assert(_size == a._size);\n        for(size_t i=0;i&lt;_size;++i) {\n            ptr[i] = a.ptr[i];\n        }\n        return *this;\n    }\n\n    // Is this actually correct?\n    stack_array(stack_array&amp;&amp; other) {\n        printf(\"move\\n\");\n        ptr = other.ptr;\n        _size = other._size;\n        other._size = 0;\n    }\n\n    T&amp; operator[](size_t i) { assert(i &lt; _size); return ptr[i]; }\n    const T&amp; operator[](size_t i) const { assert(i &lt; _size); return ptr[i]; }\n\n    size_t size() const { return _size; }\n};\n\n// Fibonacci sequence\nstack_array&lt;int&gt; fib(size_t n) {\n\n    stack_array&lt;int&gt; f(n);\n    f[0] = 0;\n    f[1] = 1;\n    for(size_t i=2;i&lt;n;++i) {\n        f[i] = f[i-1] + f[i-2];\n    }\n\n    return f;\n}\n\ntemplate&lt;class T, class F&gt;\nvoid foreach(const stack_array&lt;T&gt; &amp;a, F f) {\n    for(size_t i=0;i&lt;a.size();++i) {\n        f(a[i]);\n    }\n}\n\ntemplate&lt;class T, class F&gt;\nauto map(const stack_array&lt;T&gt; &amp;a, F f) {\n    stack_array&lt; decltype(f(T())) &gt; r(a.size());\n    for(size_t i=0;i&lt;a.size();++i) {\n        r[i] = f(a[i]);\n    }\n    return r;\n}\n\ntemplate&lt;class T, class F&gt;\nauto filter(const stack_array&lt;T&gt; &amp;a, F f) {\n    stack_array&lt;int&gt; b(a.size());\n    size_t n = 0;\n    for(size_t i=0;i&lt;a.size();++i) {\n        if(f(a[i])) {\n            b[n++] = i;\n        }\n    }\n    stack_array&lt;T&gt; r(n);\n    for(size_t i=0;i&lt;n;++i) {\n        r[i] = a[b[i]];\n    }\n    return r;\n}\n\ntemplate&lt;class T&gt; void printArray(const stack_array&lt;T&gt; &amp;a) {\n    foreach(a, [](T t){ std::cout &lt;&lt; t &lt;&lt; std::endl;});\n}\n\nint main(int argc, char* argv[]) {\n\n    {\n        stack_array&lt;int&gt; a = fib(20);\n        printArray(a);\n        printArray(map(a, [](int i) { return i+1; }));\n        printArray(filter(a, [](int i) { return i%2; }));\n\n        stack_array&lt;int&gt; b(a.size());\n        b = a;\n    }\n    assert(stack == start);\n\n}\n</code></pre>\n"}, {"tags": ["c++", "linux", "terminal", "posix"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 4, "creation_date": 1566411646, "post_id": 57597231, "comment_id": 101651622, "body": "Why is the terminal window important?"}, {"owner": {"reputation": 8402, "user_id": 4664415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hsfxj.jpg?s=128&g=1", "display_name": "mevets", "link": "https://stackoverflow.com/users/4664415/mevets"}, "edited": false, "score": 1, "creation_date": 1566411998, "post_id": 57597231, "comment_id": 101651755, "body": "Maybe initialize path to something?   At least you might get less snarky responses."}, {"owner": {"reputation": 49, "user_id": 9124347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67ff2ea3bf0c9784d98f1c20c381ddc0?s=128&d=identicon&r=PG&f=1", "display_name": "ltcmdtuvok", "link": "https://stackoverflow.com/users/9124347/ltcmdtuvok"}, "edited": false, "score": 0, "creation_date": 1566412014, "post_id": 57597231, "comment_id": 101651760, "body": "I would like to see the outputs of the programs while they run."}, {"owner": {"reputation": 1599, "user_id": 9948091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JANyt.png?s=128&g=1", "display_name": "HAL9000", "link": "https://stackoverflow.com/users/9948091/hal9000"}, "edited": false, "score": 4, "creation_date": 1566412968, "post_id": 57597231, "comment_id": 101652164, "body": "If you you want to start a terminal, then maybe it would be a good idea to actually start a terminal. The shell command <code>xterm vi</code> will start a new <code>xterm</code> process and display <code>vi</code> in it. How to change this to start your favorite terminal, and do it from <code>c</code>, is left as an exercise for the reader"}, {"owner": {"reputation": 796, "user_id": 1643973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/198787891419681bb0932f54a502a40c?s=128&d=identicon&r=PG", "display_name": "jjramsey", "link": "https://stackoverflow.com/users/1643973/jjramsey"}, "edited": false, "score": 1, "creation_date": 1566417336, "post_id": 57597231, "comment_id": 101654024, "body": "If you just want to see the outputs of the programs as they run, then an alternative approach may be to send the outputs of those commands to files, rather than to terminal windows. Don&#39;t get stuck on insisting a terminal window. An approach that makes sense on Windows may be suboptimal on Linux."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1566423253, "post_id": 57597231, "comment_id": 101656085, "body": "HAL9000 is right.  Your linux (probably) has several terminal emulators.  I happen to have gnome-terminal installed.  So I do &quot;man gnome-terminal&quot; and inspect the output. In this case, note that the command option  &quot;--command=STRING&quot; where STRING can identify any other executable.  Then note that the options &quot;Executes the argument to this option inside the terminal&quot;.  Try it ... Or google for tutorials.  Note that I prefer popen (and have used fork).  I recommend that you avoid any &#39;exec&#39; form of command."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1566423595, "post_id": 57597231, "comment_id": 101656201, "body": "The parameters of gnome-terminal even allow run time control of  &quot;--geometry=GEOMETRY   X geometry specification (see &quot;X&quot; man page), can be specified once per window to be opened.&quot;   The option --working-directory=DIRNAME  can set a unique working directory for each terminal you open."}], "answers": [{"comments": [{"owner": {"reputation": 796, "user_id": 1643973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/198787891419681bb0932f54a502a40c?s=128&d=identicon&r=PG", "display_name": "jjramsey", "link": "https://stackoverflow.com/users/1643973/jjramsey"}, "edited": false, "score": 0, "creation_date": 1566414495, "post_id": 57597807, "comment_id": 101652785, "body": "<code>x-terminal-emulator</code> is particular to certain Linux distributions, especially Debian-derived ones."}, {"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 3, "creation_date": 1566415294, "post_id": 57597807, "comment_id": 101653152, "body": "I don&#39;t have <code>xterm</code> on my system, only <code>konsole</code>. Truth is there is no portable way to do this, you have to let the user configure it. And the <i>alternatives</i> way (<code>x-terminal-emulator</code>) Oblivion used at first is a common way to do that, even if not ubiquitous."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1566423498, "post_id": 57597807, "comment_id": 101656177, "body": "It is trivial to find out how to install gnome-terminal or others.  i.e. sudo apt ..."}, {"owner": {"reputation": 49, "user_id": 9124347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67ff2ea3bf0c9784d98f1c20c381ddc0?s=128&d=identicon&r=PG&f=1", "display_name": "ltcmdtuvok", "link": "https://stackoverflow.com/users/9124347/ltcmdtuvok"}, "edited": false, "score": 0, "creation_date": 1566474357, "post_id": 57597807, "comment_id": 101672609, "body": "thanks Oblivion, unfortunately this way I can&#39;t get the pid for closing the application later."}], "tags": [], "owner": {"reputation": 6260, "user_id": 10933809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IR53l.jpg?s=128&g=1", "display_name": "Oblivion", "link": "https://stackoverflow.com/users/10933809/oblivion"}, "is_accepted": false, "score": 0, "last_activity_date": 1566414624, "last_edit_date": 1566414624, "creation_date": 1566414214, "answer_id": 57597807, "question_id": 57597231, "link": "https://stackoverflow.com/questions/57597231/how-to-open-and-later-close-another-program-from-c-in-another-terminal/57597807#57597807", "title": "How to open and later close another program from c++ in another terminal?", "body": "<p>You can use this:</p>\n\n<pre><code>system(\"xterm \\\"/PATH_TO_EXECUTABLE\\\"\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 9124347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67ff2ea3bf0c9784d98f1c20c381ddc0?s=128&d=identicon&r=PG&f=1", "display_name": "ltcmdtuvok", "link": "https://stackoverflow.com/users/9124347/ltcmdtuvok"}, "is_accepted": false, "score": 0, "last_activity_date": 1566476520, "last_edit_date": 1566476520, "creation_date": 1566474882, "answer_id": 57608799, "question_id": 57597231, "link": "https://stackoverflow.com/questions/57597231/how-to-open-and-later-close-another-program-from-c-in-another-terminal/57608799#57608799", "title": "How to open and later close another program from c++ in another terminal?", "body": "<p>Thank you to HAL9000. I was a little bit at loss. I now do it with</p>\n\n<pre><code>popen(\"xterm -e ...\",\"r\")\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 9124347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67ff2ea3bf0c9784d98f1c20c381ddc0?s=128&d=identicon&r=PG&f=1", "display_name": "ltcmdtuvok", "link": "https://stackoverflow.com/users/9124347/ltcmdtuvok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1566476520, "creation_date": 1566411501, "last_edit_date": 1566412081, "question_id": 57597231, "link": "https://stackoverflow.com/questions/57597231/how-to-open-and-later-close-another-program-from-c-in-another-terminal", "title": "How to open and later close another program from c++ in another terminal?", "body": "<p>I would like to open some other programs from my c++ code in linux and save the handle/pid so I can terminate them later. It is important that the programs that I start open up in a new terminal window for each application and that I can pass arguments to the programs at startup. In windows, I can do it with CreateProcess and TerminateProcess.</p>\n\n<p>In linux, tried popen() and pclose(). Currently, I try to do it with posix_spawn(). I can open another program and I get the pid, the only thing I didn't manage to do is to open the program in another terminal window.</p>\n\n<p>My current Code is :</p>\n\n<pre><code>std::string path = \"exampleProg\";\npid_t pid;\nstatus = posix_spawn(&amp;pid, path.c_str(), NULL, NULL, v, NULL);\n</code></pre>\n"}, {"tags": ["c++", "optimization", "stl", "stdvector", "avx"], "comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 4, "creation_date": 1566411470, "post_id": 57597173, "comment_id": 101651554, "body": "I think even with C++17 that should make <code>new</code> work for over-aligned types, the allocator for <code>std::vector&lt;__m256&gt;</code> doesn&#39;t allocate 32-byte-aligned storage.  There are several duplicates for this.  IDK why C++ introduced <code>alignas()</code> without requiring full support for over-aligned types in dynamic allocators; it&#39;s a big pain."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1566411743, "post_id": 57597173, "comment_id": 101651656, "body": "Normally you should just write idiomatic/readable C++ code and let the <i>compiler</i> worry about optimizing it."}, {"owner": {"reputation": 123, "user_id": 11615855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85776814ce14e81a465b3c8bb381153f?s=128&d=identicon&r=PG&f=1", "display_name": "MathGeek", "link": "https://stackoverflow.com/users/11615855/mathgeek"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1566413717, "post_id": 57597173, "comment_id": 101652458, "body": "@JesperJuhl I agree. Unfortunately, I&#39;m currently in a situation (in academia) where we are optimizing for speed as opposed to readability."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1566414131, "post_id": 57597173, "comment_id": 101652622, "body": "@MathGeek In my experience; the most readable code is often what the compiler is best at optimizing and it usually does a <i>much</i> better job at it than humans who try to handoptimize things by writing unreadable stuff. So, I&#39;d say; try just writing the idiomatic C++ version of the code and hand it to a modern compiler with optimizations turned on and see what you get. My guess is that it&#39;s going to be faster (in most cases) than your attempt at hand-optimizing it."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1566414957, "post_id": 57597173, "comment_id": 101652982, "body": "Might look into Boost.Align&#39;s <a href=\"https://www.boost.org/doc/libs/1_71_0/doc/html/align/reference.html#align.reference.classes\" rel=\"nofollow noreferrer\">aligned_allocator</a>."}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1566430032, "post_id": 57597173, "comment_id": 101657781, "body": "Also duplicates: <a href=\"https://stackoverflow.com/questions/39608172/using-stl-vector-with-simd-intrinsic-data-type\" title=\"using stl vector with simd intrinsic data type\">stackoverflow.com/questions/39608172/&hellip;</a> (as @PeterCordes said, there are probably more duplicates or related questions). However, with C++17, this should actually be solved: <a href=\"https://godbolt.org/z/o6whaw\" rel=\"nofollow noreferrer\">godbolt.org/z/o6whaw</a> (unless this is just an extension by g++/clang)"}, {"owner": {"reputation": 123, "user_id": 11615855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85776814ce14e81a465b3c8bb381153f?s=128&d=identicon&r=PG&f=1", "display_name": "MathGeek", "link": "https://stackoverflow.com/users/11615855/mathgeek"}, "reply_to_user": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1566431672, "post_id": 57597173, "comment_id": 101658089, "body": "@chtz That was it! The pre-written make file was compiling the files with an older version. I can&#39;t believe I didn&#39;t check it sooner."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1566458276, "post_id": 57597173, "comment_id": 101664093, "body": "@MathGeek: note that it&#39;s much more common to use <code>vector&lt;float&gt;</code> and use <code>_mm256_loadu_ps()</code> on top of that.  But if you want to force 32-byte alignment to allow <code>load_ps</code> instead of <code>loadu</code>, you&#39;d need to specify a custom allocator for your <code>vector&lt;T,alloc&gt;</code> type instead of C++17 doing it for you.  TL:DR: normally you only use <code>__m256</code> for a few local variables inside a specific function or loop you&#39;re manually vectorizing, so it&#39;s still easy to write scalar code that touches the same data. (Which might auto-vectorize, and/or for a portable / reference version of a func for testing)"}], "owner": {"reputation": 123, "user_id": 11615855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85776814ce14e81a465b3c8bb381153f?s=128&d=identicon&r=PG&f=1", "display_name": "MathGeek", "link": "https://stackoverflow.com/users/11615855/mathgeek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "closed_date": 1566431680, "answer_count": 0, "score": 4, "last_activity_date": 1566411276, "creation_date": 1566411276, "question_id": 57597173, "link": "https://stackoverflow.com/questions/57597173/c-using-avx-instructions-with-stl", "closed_reason": "Duplicate", "title": "C++ Using AVX instructions with STL", "body": "<p>I'm fairly new to optimization and I'm having difficulty in getting AVX instructions to work with STL. Here is an example:</p>\n\n<pre><code>std::vector&lt;__m256&gt; v1;\n__m256 avx_test_data = _mm256_set_ps(1,2,3,4,5,6,7,8);\nv1.push_back(avx_test_data);\n</code></pre>\n\n<p>This gives a segmentation fault. A similar thing happens when I use an unordered map as well. </p>\n\n<p>Am I doing something obviously incorrect? If not then is there is some way to get them to work together? Thanks in advance.</p>\n"}, {"tags": ["c++", "dynamic-cast", "reinterpret-cast"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1566411117, "post_id": 57597075, "comment_id": 101651406, "body": "Undefined behavior can do anything. That means sometimes it does what you expected, some times it does crazy things. When UB works as you expected, it&#39;s an unfortunate coincidence."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 4, "creation_date": 1566411191, "post_id": 57597075, "comment_id": 101651443, "body": "Clearly the difference is the use of multiple inheritance in the non-working case. But as already said, both are wrong, but you are incorrect to expect an error when all the standard says is undefined behaviour."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 1, "creation_date": 1566411490, "post_id": 57597075, "comment_id": 101651565, "body": "<a href=\"https://stackoverflow.com/q/35525057/1460794\">Almost a duplicate</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1566411544, "post_id": 57597075, "comment_id": 101651580, "body": "Rename the second <code>A_inst</code> and then print out the addresses of <code>fail</code>, <code>A_inst</code>, and the other <code>A_inst </code>. You&#39;ll see something magical. <code>reinterpret_cast</code> is a literal reinterpretation of the address. <code>dynamic_cast</code>s do something a little bit different and a lot smarter."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1566412097, "post_id": 57597075, "comment_id": 101651793, "body": "<code>reinterpret_cast</code> (and even C-style casts) have their place and are <i>sometimes</i> (although <i>rarely</i>) the right thing to do. <i>Most of the time</i> they are <i>bugs</i> - like in this case. See also: <a href=\"https://en.cppreference.com/w/cpp/language/ub\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/ub</a> and <a href=\"http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html\" rel=\"nofollow noreferrer\">blog.llvm.org/2011/05/what-every-c-programmer-should-know.ht&zwnj;&#8203;ml</a> and <a href=\"https://blog.regehr.org/archives/213\" rel=\"nofollow noreferrer\">blog.regehr.org/archives/213</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1566413353, "post_id": 57597075, "comment_id": 101652312, "body": "Some good reading: <a href=\"https://stackoverflow.com/questions/332030/when-should-static-cast-dynamic-cast-const-cast-and-reinterpret-cast-be-used\">When should static_cast, dynamic_cast, const_cast and reinterpret_cast be used?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 772, "user_id": 4043866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104dac269b12649d6df8386b88962745?s=128&d=identicon&r=PG", "display_name": "JulianH", "link": "https://stackoverflow.com/users/4043866/julianh"}, "is_accepted": true, "score": 6, "last_activity_date": 1566485023, "last_edit_date": 1566485023, "creation_date": 1566415928, "answer_id": 57598134, "question_id": 57597075, "link": "https://stackoverflow.com/questions/57597075/why-does-reinterpret-cast-work-in-some-cases-but-not-others/57598134#57598134", "title": "Why does reinterpret_cast work in some cases but not others?", "body": "<h2>Short Answer</h2>\n\n<p>The thing is that <code>Base* working = new D2();</code> is implicitly casting <code>D2*</code> to <code>Base*</code> (<code>static_cast</code>). </p>\n\n<p>So if you have:</p>\n\n<pre><code>D2* d2 = new D2();\nBase* b = d2;\n</code></pre>\n\n<p>You can't be sure that <code>std::addressof(d2) == std::addressof(b)</code> will be true. But <code>reinterpret_cast</code> is only working if <code>std::addressof(d2) == std::addressof(b)</code> is true. So that your code is running correctly is like in the comments mentioned just a fortunate coincidence.</p>\n\n<hr>\n\n<h2>More Detailed</h2>\n\n<p>The memory layout for class <code>D2</code> could look like:</p>\n\n<pre><code>class D2:\n0x0000 Attributes of Base\n...\n0x0010 Attirbutes of D1\n...\n0x0020 Attributes of D2\n...\n</code></pre>\n\n<p><code>Base* b = new D2()</code> will save the address of <code>Base</code> (0x0000). Since the attributes of the base classes are always stored before the attributes of the child class, the address stored in <code>b</code> (0x0000) is the same as the address returned by <code>new D2()</code> (0x0000) and <code>reinterpret_cast</code> will work.</p>\n\n<p>But on the other hand the memory layout for class <code>A</code> could look like:</p>\n\n<pre><code>class A:\n0x0000 Attributes of HoldData\n...\n0x0010 Attributes of UserData\n...\n0x0020 Attributes of Base\n...\n0x0030 Attributes of A\n...\n</code></pre>\n\n<p>Here the compiler has to store the data of either <code>UserData</code> or <code>Base</code> first. So if <code>UserData</code> gets stored first (like in the example), <code>Base* b = new A()</code> will also save the address of <code>Base</code> (0x0020), but since <code>Base</code> isn't the first stored class in <code>A</code>, the address returned by <code>new A()</code> (0x0000) does not equals the address saved in <code>b</code> (0x0020), since <code>new A()</code> (0x0000) was implicitly statically casted to <code>Base*</code>. This means <code>reinterpret_cast</code> will fail here.</p>\n\n<p>That's why case1 is working and case2 isn't.</p>\n\n<hr>\n\n<p>One last thing: You never should trust that the compiler allways uses the same memory layout. There are many things concerning the memory layout which aren't defined in the C++ standard. <strong>Using <code>reinterpret_cast</code>here leads to undefined behaviour!</strong></p>\n"}], "owner": {"reputation": 45, "user_id": 6635811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34a2853758fb2c760a039d9edcbd02b3?s=128&d=identicon&r=PG&f=1", "display_name": "swaggg_pickle", "link": "https://stackoverflow.com/users/6635811/swaggg-pickle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 1, "accepted_answer_id": 57598134, "answer_count": 1, "score": 2, "last_activity_date": 1566617679, "creation_date": 1566410840, "last_edit_date": 1566617679, "question_id": 57597075, "link": "https://stackoverflow.com/questions/57597075/why-does-reinterpret-cast-work-in-some-cases-but-not-others", "title": "Why does reinterpret_cast work in some cases but not others?", "body": "<p>I just started working with a team that is using <code>reinterpret_cast</code> when clearly it should be <code>dynamic_cast</code>. Although they are using <code>reinterpret_cast</code> the code still seems to work just fine so I decided to leave it alone until recently when it final stopped working. </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct Base {\n virtual void do_work() = 0;\n};\nstruct D1 : public Base {\n virtual void do_work();\n std::vector&lt;int&gt; i;\n};\n\nstruct D2: public D1 { \n void do_work()\n};\n\nstruct Holds_data {\n    std::vector&lt;int&gt; i;\n};\nstruct Use_data : public Holds_data {\n virtual void do_work();\n};\n\n\nstruct A : public Use_data, public Base {\n    void do_work();\n};\n\n//case 1\n// this code works\nBase* working = new D2();\nD2*   d2_inst = reinterpret_cast&lt;D2*&gt;(working);\n\n\n//case 2\nBase* fail = new A();\nA*    A_inst  = reinterpret_cast&lt;A*&gt;(fail); // fails\nA*    A_inst  = dynamic_cast&lt;A*&gt;(fail);     // works\n</code></pre>\n\n<p>in case 1 there does not seem to be a problem reinterpret cast SEEMS to work just fine. \nin case 2 i noticed the internal data of std::vector seems to be corrupted when using reinterpret cast</p>\n\n<p>My question is why does case 1 pass? Shouldn't there be data corruption within the std::vector?</p>\n"}, {"tags": ["c++", "qt", "qt5", "scons", "qttest"], "comments": [{"owner": {"reputation": 92, "user_id": 11798493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a425b012e5274492a3c8b0fff3b558?s=128&d=identicon&r=PG&f=1", "display_name": "Yeet", "link": "https://stackoverflow.com/users/11798493/yeet"}, "edited": false, "score": 0, "creation_date": 1566408948, "post_id": 57596598, "comment_id": 101650510, "body": "The post linked in duplicate is not helpful at all."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1566412013, "post_id": 57596598, "comment_id": 101651758, "body": "Then you will have to be more specific with your question. Please post the exact text of the error message. Also QCOMPARE seems to be all upper case unless I am reading the documentation wrong. <a href=\"https://doc.qt.io/qt-5/qtest.html#QCOMPARE\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qtest.html#QCOMPARE</a>"}, {"owner": {"reputation": 92, "user_id": 11798493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a425b012e5274492a3c8b0fff3b558?s=128&d=identicon&r=PG&f=1", "display_name": "Yeet", "link": "https://stackoverflow.com/users/11798493/yeet"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1566412770, "post_id": 57596598, "comment_id": 101652066, "body": "I tried both versions, no luck. It also does not appear in the eclipse auto complete"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1566412874, "post_id": 57596598, "comment_id": 101652118, "body": "<b><i>Could this be an issue with something missing in QMake?</i></b> I don&#39;t think so."}, {"owner": {"reputation": 92, "user_id": 11798493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a425b012e5274492a3c8b0fff3b558?s=128&d=identicon&r=PG&f=1", "display_name": "Yeet", "link": "https://stackoverflow.com/users/11798493/yeet"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1566412894, "post_id": 57596598, "comment_id": 101652135, "body": "It is QT 5 so it should be new enough"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 3, "creation_date": 1566412942, "post_id": 57596598, "comment_id": 101652151, "body": "Did you add <code>QT += testlib</code> to your <code>.pro</code> ?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1566412965, "post_id": 57596598, "comment_id": 101652162, "body": "@Yeet Show your .pro"}, {"owner": {"reputation": 92, "user_id": 11798493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a425b012e5274492a3c8b0fff3b558?s=128&d=identicon&r=PG&f=1", "display_name": "Yeet", "link": "https://stackoverflow.com/users/11798493/yeet"}, "edited": false, "score": 0, "creation_date": 1566418104, "post_id": 57596598, "comment_id": 101654293, "body": "I ended up having to add things to a SCONS script. It still isn&#39;t working but I&#39;m back on the right path"}, {"owner": {"reputation": 3006, "user_id": 82681, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/bsfkb.jpg?s=128&g=1", "display_name": "bdbaddog", "link": "https://stackoverflow.com/users/82681/bdbaddog"}, "edited": false, "score": 1, "creation_date": 1566426122, "post_id": 57596598, "comment_id": 101656903, "body": "You&#39;ve not indicated anything about SCons being part of this? Can you provide more info?"}], "owner": {"reputation": 92, "user_id": 11798493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a425b012e5274492a3c8b0fff3b558?s=128&d=identicon&r=PG&f=1", "display_name": "Yeet", "link": "https://stackoverflow.com/users/11798493/yeet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "closed_date": 1566408780, "answer_count": 0, "score": 0, "last_activity_date": 1566506725, "creation_date": 1566408639, "last_edit_date": 1566506725, "question_id": 57596598, "link": "https://stackoverflow.com/questions/57596598/qt-test-qcompare-could-not-be-resolved", "closed_reason": "Duplicate", "title": "QT Test, QCompare could not be resolved", "body": "<p>I am trying to create unit tests with QT Test. I am having an error that QCompare is unresolved. </p>\n\n<p>QT Test should have QCOMPARE, but it is not resolved.\nCould this be an issue with something missing in QMake?</p>\n\n<p>I am following this tutorial <a href=\"https://doc.qt.io/qt-5/qtest-overview.html\" rel=\"nofollow noreferrer\">https://doc.qt.io/qt-5/qtest-overview.html</a></p>\n\n<p>Here is what I currently have</p>\n\n<pre><code>#include &lt;QtTest/QTest&gt;\n#include &lt;QObject&gt;\n\nclass TestLaunch: public QObject {\n    Q_OBJECT\n\nprivate slots:\n    void initTestCase(){\n        qDebug(\"Called before everything else.\");\n    }\n\n    void alitiudeDefaultCheck() {\n        //this is where I get the error \n        //\"function QCompare could not be resolved\"\n        QTest::QCompare(5,5);\n    }\n\n};\n</code></pre>\n\n<p>I looking for recommendations of what else to check to get this working and have QCompare be recognized. \nThanks in advance :)</p>\n\n<p><strong>EDIT</strong>\nI have determined that part of my issue is that SCONS is part of the build. How can I get SCONS to recognize QtTest?</p>\n\n<p>I have tried adding the QtTest to the following.</p>\n\n<pre><code>if env[\"qt_version\"] == \"5\":\n    env.Tool(\"qt5\")\n    env.EnableQt5Modules([\"QtCore\", \"QtGui\", \"QtSql\", \"QtOpenGL\", \n                          \"QtPrintSupport\", \"QtTest\"])\n    env.Append(LIBS=[\"Qt5OpenGL\", \"Qt5Gui\", \"Qt5Sql\", \"Qt5Core\", \n                     \"Qt5PrintSupport\",\"Qt5Test\"])\n</code></pre>\n\n<p>This has NOT got the access to QCOMPARE and QVERIFY macros I desire.</p>\n"}, {"tags": ["c++", "algorithm", "stack", "palindrome"], "comments": [{"owner": {"reputation": 67968, "user_id": 584192, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YBSIc.png?s=128&g=1", "display_name": "Samuel Liew", "link": "https://stackoverflow.com/users/584192/samuel-liew"}, "edited": false, "score": 0, "creation_date": 1566433191, "post_id": 57596459, "comment_id": 101658317, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/198269/discussion-on-question-by-kenan-saracevic-is-it-possible-to-check-if-word-stored\">moved to chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1566416662, "post_id": 57597611, "comment_id": 101653765, "body": "quite some cheating, though I wouldnt know how to solve it without ;)"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1566414262, "last_edit_date": 1566414262, "creation_date": 1566413227, "answer_id": 57597611, "question_id": 57596459, "link": "https://stackoverflow.com/questions/57596459/is-it-possible-to-check-if-word-stored-on-stack-is-palyndrome-without-any-addito/57597611#57597611", "title": "Is it possible to check if word stored on stack is palyndrome without ANY additonal data structures in C++", "body": "<blockquote>\n  <p>Is it possible to check if word stored on stack is palyndrome without\n  ANY additonal data structures in C++</p>\n</blockquote>\n\n<p>I think that you mean by data structures some other abstract data structures or containers like list, vector and so on.</p>\n\n<p>You can do your task by enclosing in a wrapper the standard class <code>std::stack&lt;int&gt;</code>.</p>\n\n<p>For example</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;stack&gt;\n#include &lt;iterator&gt;\n#include &lt;algorithm&gt;\n\nbool is_palindrome( const std::stack&lt;int&gt; &amp;st )\n{\n    struct wrapper : std::stack&lt;int&gt;\n    {\n        wrapper( const std::stack&lt;int&gt; &amp;st ) : std::stack&lt;int&gt;( st ) {}\n\n        bool is_palindrome() const\n        {\n            return std::equal( std::begin( c ), std::next( std::begin( c ), c.size() / 2 ),\n                               std::rbegin( c ) );\n        }\n    } w( st );\n\n\n    return w.is_palindrome();\n}\n\nint main() \n{\n    std::stack&lt;int&gt; st1( std::stack&lt;int&gt;::container_type{ 1, 2, 3, 2, 1  } );\n\n    std::cout &lt;&lt; std::boolalpha &lt;&lt; is_palindrome( st1 ) &lt;&lt; '\\n';\n\n    std::stack&lt;int&gt; st2( std::stack&lt;int&gt;::container_type{ 1, 2, 3, 4, 5  } );\n\n    std::cout &lt;&lt; std::boolalpha &lt;&lt; is_palindrome( st2 ) &lt;&lt; '\\n';\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>true\nfalse\n</code></pre>\n\n<p>The class <code>wrapper</code> has an access to the protected data member <code>c</code> of the class <code>std::stack&lt;int&gt;</code> that denotes the underlying container.</p>\n"}, {"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 0, "last_activity_date": 1566419162, "creation_date": 1566419162, "answer_id": 57598772, "question_id": 57596459, "link": "https://stackoverflow.com/questions/57596459/is-it-possible-to-check-if-word-stored-on-stack-is-palyndrome-without-any-addito/57598772#57598772", "title": "Is it possible to check if word stored on stack is palyndrome without ANY additonal data structures in C++", "body": "<p>To be honest, I am pretty sure that you do not quote the task description fully correct. Several things are fishy about the task...</p>\n\n<p>For one, one could do some hairsplitting and argue that it is impossible to use a <code>std::stack</code> without using any other data structure. A <code>std::stack</code> is just a container adapter that is build upon some underlying container. The default is a <code>std::deque</code>. Strictly speaking, using a <code>std::stack</code> without using any other data structure makes no sense.</p>\n\n<p>Next, you are not allowed to modify the stack, but you are allowed to decompose it, as long as you put it back together again. This basically allows you to do anything. What I mean is, that you can for example write a function that returns you the nth element, eg:</p>\n\n<pre><code>int access(std::stack&lt;int&gt; s, size_t i) {\n    while (i--) s.pop();\n    return s.top();\n}\n</code></pre>\n\n<p>Using this it is kind of trivial to write a test for palindrome. However this is basically treating the stack as if it wasn't a stack. For a similar approach that bypasses the stackyness of the <code>std::stack</code> see <a href=\"https://stackoverflow.com/a/57597611/4117728\">this answer</a>. </p>\n\n<p>Note that for the little cheat above I had to make a copy of the stack (<code>s</code> is passed by value) and I cannot imagine a solution, even a recursive one, that would not use at least a second stack. When you decompose the stack you need to store the elements somewhere, otherwise how would you restore it afterwards? </p>\n\n<p>Let's forget about the exact task for a moment and consider how can we check if a <code>std::stack</code> contains a palindrome (without the unclear constraints), then one simple solution would be </p>\n\n<pre><code>bool check_palindrome(std::stack&lt;int&gt;&amp; s) {\n    std::stack&lt;int&gt; t;\n    while (t.size() &lt; s.size()) {\n        auto temp = s.top();\n        s.pop();\n        t.push(temp);\n    }\n    if (t.size() &gt; s.size()) t.pop();\n    return s==t;\n}\n</code></pre>\n\n<p>This could also be turned into a recursive method (to be honest I dont really get the hype about recursion), but I wouldn't know how to do it without the second stack. Also I didn't bother to reconstruct the original stack, but it would be easy to do so.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6279077"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 57597611, "answer_count": 2, "score": -1, "last_activity_date": 1566419162, "creation_date": 1566408001, "last_edit_date": 1566413461, "question_id": 57596459, "link": "https://stackoverflow.com/questions/57596459/is-it-possible-to-check-if-word-stored-on-stack-is-palyndrome-without-any-addito", "title": "Is it possible to check if word stored on stack is palyndrome without ANY additonal data structures in C++", "body": "<p>In C++ programme, let's analyse stack data structure. \nMy question is : Is it possible to check if the given stack contains palindrome or not WITHOUT ANY additional data structure and without modifying the stack? You are allowed to decompose the stack so long as you put it back together again (I mean that by modifying). </p>\n\n<p>Example 1:  s = {1, 2, 3, 2, 1}  - it's palindrome \nExample 2:  s = {1, 2, 3, 4, 5}  - it's not a palindrome </p>\n\n<ul>\n<li>My only idea is to do it with recursion:</li>\n</ul>\n\n<hr>\n\n<pre><code>void checkStack(Stack&lt;int&gt;&amp; s){\n    //Exit condition\n    if(s.numberOfElements() == 0){\n        return;\n    } \n\n    int temp = s.pop(); \n\n    checkStack(s);\n\n    s.push(temp); \n}\n</code></pre>\n"}, {"tags": ["c++", "structure"], "comments": [{"owner": {"reputation": 1080, "user_id": 11890657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e128d9b341fa1abad09bab0576aacd7f?s=128&d=identicon&r=PG&f=1", "display_name": "Chelmy88", "link": "https://stackoverflow.com/users/11890657/chelmy88"}, "edited": false, "score": 4, "creation_date": 1566408364, "post_id": 57596452, "comment_id": 101650260, "body": "Both test cases seem to be correct, no?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 5, "creation_date": 1566408470, "post_id": 57596452, "comment_id": 101650299, "body": "Sounds like a job for <a href=\"https://en.cppreference.com/w/cpp/algorithm/nth_element\" rel=\"nofollow noreferrer\">std::nth_element</a>.."}, {"owner": {"reputation": 3108, "user_id": 1556820, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cffaba688aa3f0f21ece8e09c9450e37?s=128&d=identicon&r=PG", "display_name": "mangusta", "link": "https://stackoverflow.com/users/1556820/mangusta"}, "reply_to_user": {"reputation": 1080, "user_id": 11890657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e128d9b341fa1abad09bab0576aacd7f?s=128&d=identicon&r=PG&f=1", "display_name": "Chelmy88", "link": "https://stackoverflow.com/users/11890657/chelmy88"}, "edited": false, "score": 0, "creation_date": 1566408493, "post_id": 57596452, "comment_id": 101650309, "body": "@Chelmy88 he specified the expected outputs, not the actual outputs"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1566408499, "post_id": 57596452, "comment_id": 101650316, "body": "&quot;The second is giving me the first element of the array.&quot; How so. In TEST CASE 2, the first element of the array is 19 and the test outputs 16."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 1, "creation_date": 1566408555, "post_id": 57596452, "comment_id": 101650341, "body": "For help debugging your code, read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a> for tips."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1566409280, "post_id": 57596452, "comment_id": 101650649, "body": "Is sorting the array allowed?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1566409353, "post_id": 57596452, "comment_id": 101650684, "body": "<code>cin &gt;&gt; n;int a[n];</code> -- This is not valid C++."}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1566412888, "post_id": 57596452, "comment_id": 101652131, "body": "<code>std::nth_element</code> sounds like a good thing to look at"}], "answers": [{"comments": [{"owner": {"reputation": 3108, "user_id": 1556820, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cffaba688aa3f0f21ece8e09c9450e37?s=128&d=identicon&r=PG", "display_name": "mangusta", "link": "https://stackoverflow.com/users/1556820/mangusta"}, "edited": false, "score": 0, "creation_date": 1566408935, "post_id": 57596591, "comment_id": 101650503, "body": "I don&#39;t think there is something wrong with his code. If the array starts with max, m1 will have its value all along the loop while m2 and m3 will change. what&#39;s wrong with that?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1566408962, "post_id": 57596591, "comment_id": 101650521, "body": "or <code>numerical_limits&lt;int&gt;::min</code> as initial value"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 3108, "user_id": 1556820, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cffaba688aa3f0f21ece8e09c9450e37?s=128&d=identicon&r=PG", "display_name": "mangusta", "link": "https://stackoverflow.com/users/1556820/mangusta"}, "edited": false, "score": 0, "creation_date": 1566409058, "post_id": 57596591, "comment_id": 101650559, "body": "@mangusta consider the Test case 2, none of the values is bigger than 19, so the code will never see 16 as being bigger than the initial value"}, {"owner": {"reputation": 3108, "user_id": 1556820, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cffaba688aa3f0f21ece8e09c9450e37?s=128&d=identicon&r=PG", "display_name": "mangusta", "link": "https://stackoverflow.com/users/1556820/mangusta"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1566409212, "post_id": 57596591, "comment_id": 101650626, "body": "@formerlyknownas_463035818 ah right. it should be a sorted triple initially"}], "tags": [], "owner": {"reputation": 13028, "user_id": 1401351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993d07ca1cd59dd11d96a896e7c804d0?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1401351/peter"}, "is_accepted": true, "score": 3, "last_activity_date": 1566474275, "last_edit_date": 1566474275, "creation_date": 1566408601, "answer_id": 57596591, "question_id": 57596452, "link": "https://stackoverflow.com/questions/57596452/how-to-print-third-largest-element-in-an-array/57596591#57596591", "title": "How to print third largest element in an array?", "body": "<p>Your initial condition isn't correct.  By starting with all 3 max values initialized to the first entry of the array, you will hit corner cases where none of the rest of the array will meet the conditions to alter them.</p>\n\n<p>For example, if your array starts with the max, then none of the conditions will ever trigger.  This happens because your initial condition is actually invalid for the rest of the logic.</p>\n\n<p>One approach to fix is to set your 3 values to a <em>sorted</em> version of the first three values in the array.  Another would be to initialize them to <code>numerical_limits&lt;int&gt;::min</code> (as suggested in a comment), which would only have a corner case for arrays shorter than 3.  Another would be to track the initialized state of each value-holder and check that before the comparison.</p>\n\n<p>Of course, the best answer is to use prewritten primitives.  @Jesper Juhl wisely suggests <code>std::nth_element</code> which will solve the problem directly.</p>\n\n<p>If this is a homework assignment, you might try something like <code>std::set</code> to store the 3 largest values.  You'd only have to compare against the first entry, insert if larger, then erase the new first entry to keep the size == 3.</p>\n"}], "owner": {"reputation": 13, "user_id": 10360355, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GS16YmhQuE8/AAAAAAAAAAI/AAAAAAAAAIs/rpMFbpmU0ao/photo.jpg?sz=128", "display_name": "binoy john", "link": "https://stackoverflow.com/users/10360355/binoy-john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "closed_date": 1566429867, "accepted_answer_id": 57596591, "answer_count": 1, "score": 0, "last_activity_date": 1566474275, "creation_date": 1566407969, "last_edit_date": 1566408407, "question_id": 57596452, "link": "https://stackoverflow.com/questions/57596452/how-to-print-third-largest-element-in-an-array", "closed_reason": "Not suitable for this site", "title": "How to print third largest element in an array?", "body": "<p>I have two test cases, but only one of them is giving me correct output.\nThe second is giving me the first element of the array.\nPlease tell me where am I going wrong.\nThanks.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nvoid thirdLargest(int arr[], int arr_size)\n{\n  int m1 = arr[0], m2 = arr[0], m3 = arr[0], i;\n\n  for(i = 0; i &lt; arr_size; i++)\n  {\n    if(m1 &lt; arr[i])\n    {\n      m3 = m2;\n      m2 = m1;\n      m1 = arr[i];\n    }\n    else if(m2 &lt; arr[i])\n    {\n      m3 = m2;\n      m2 = arr[i];\n    }\n    else if(m3 &lt; arr[i])\n    {\n      m3 = arr[i];\n    }\n  }\n\n  cout &lt;&lt; \"The third Largest element is \" &lt;&lt; m3;\n}\n\nint main() {\n  int n;\n  cin &gt;&gt; n;\n  int a[n];\n\n  for(int i = 0; i &lt; n; i++)\n  {\n    cin &gt;&gt; a[i];\n  }\n\n  thirdLargest(a, n);\n\n  return 0;\n}\n</code></pre>\n\n<p>Test cases:</p>\n\n<pre><code>TEST CASE 1 \n\nINPUT\n6\n1 14 2 16 10 20\nOUTPUT\nThe third Largest element is 14\n\nTEST CASE 2 \n\nINPUT\n7\n19 -10 20 14 2 16 10\nOUTPUT\nThe third Largest element is 16\n</code></pre>\n"}, {"tags": ["c++", "c++17", "function-pointers", "static-cast", "noexcept"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1566407612, "post_id": 57596276, "comment_id": 101649960, "body": "&quot;reinterpret_cast and C style cast&quot; &lt;-- Those two are, more often than not, bugs. At least in <i>my</i> experience."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1566443107, "post_id": 57596276, "comment_id": 101659878, "body": "This question would be more useful if it discarded the confusion about <code>static_cast</code> and simply asked \u201cHow can I cast this?  What\u2019s the danger?\u201d."}, {"owner": {"reputation": 1597, "user_id": 1614051, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/17863a63277ff22949e3ff33a6896050?s=128&d=identicon&r=PG", "display_name": "Filipp", "link": "https://stackoverflow.com/users/1614051/filipp"}, "edited": false, "score": 1, "creation_date": 1566558646, "post_id": 57596276, "comment_id": 101703779, "body": "I&#39;m intentionally not asking what the danger is. This should be no more dangerous than a <code>const_cast</code> where the original object is declared non <code>const</code> or a base to derived cast where I know my base reference does in fact refer to a derived object. I&#39;m only concerned that this <code>noexcept</code> cast <i>also</i> requires all the risk of <code>reinterpret_cast</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1597, "user_id": 1614051, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/17863a63277ff22949e3ff33a6896050?s=128&d=identicon&r=PG", "display_name": "Filipp", "link": "https://stackoverflow.com/users/1614051/filipp"}, "edited": false, "score": 0, "creation_date": 1566408863, "post_id": 57596387, "comment_id": 101650475, "body": "Could you comment on why that restriction was added to <code>static_cast</code>?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 1597, "user_id": 1614051, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/17863a63277ff22949e3ff33a6896050?s=128&d=identicon&r=PG", "display_name": "Filipp", "link": "https://stackoverflow.com/users/1614051/filipp"}, "edited": false, "score": 3, "creation_date": 1566409866, "post_id": 57596387, "comment_id": 101650890, "body": "@Filipp, I don&#39;t have anything more than speculation, but <code>static_cast</code> tends to stay away from more unsafe things and is usually there for when you need a value to be a different type. I picture <code>noexcept</code> similar to <code>const</code> in this regard where discarding it breaks a promise that was previously made, and this can have drastic consequences for the reader. Most of the other inverses don&#39;t make too much sense for C++. The one that has me confused is boolean conversions. Going from bool to a function pointer doesn&#39;t make much sense, but compilers allow bool to floating types in <code>static_cast</code>."}], "tags": [], "owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "is_accepted": true, "score": 7, "last_activity_date": 1566407716, "creation_date": 1566407716, "answer_id": 57596387, "question_id": 57596276, "link": "https://stackoverflow.com/questions/57596276/how-to-static-cast-throwing-function-pointer-to-noexcept-in-c17/57596387#57596387", "title": "How to static cast throwing function pointer to noexcept in C++17?", "body": "<p>You might have skipped over the important part:</p>\n\n<blockquote>\n  <p>The inverse of any standard conversion sequence <strong>not containing</strong> an lvalue-to-rvalue, array-to-pointer, function-to-pointer, null pointer, null member pointer, boolean, <strong>or function pointer conversion</strong>, can be performed explicitly using static_\u00adcast.</p>\n</blockquote>\n\n<p>Currently, a function pointer conversion includes only the conversion from <code>noexcept</code> to potentially throwing. Because you're doing the inverse of a function pointer conversion, <code>static_cast</code> will not work, just like you can't <code>static_cast</code> a pointer to an array, or any of the other conversions listed there.</p>\n\n<p>So yes, <code>reinterpret_cast</code> would be appropriate and also raises the appropriate alarm bells that should come with discarding <code>noexcept</code>.</p>\n"}], "owner": {"reputation": 1597, "user_id": 1614051, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/17863a63277ff22949e3ff33a6896050?s=128&d=identicon&r=PG", "display_name": "Filipp", "link": "https://stackoverflow.com/users/1614051/filipp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 57596387, "answer_count": 1, "score": 15, "last_activity_date": 1566407716, "creation_date": 1566407070, "question_id": 57596276, "link": "https://stackoverflow.com/questions/57596276/how-to-static-cast-throwing-function-pointer-to-noexcept-in-c17", "title": "How to static cast throwing function pointer to noexcept in C++17?", "body": "<p>C++17 makes <code>noexcept</code> part of a function's type. It also allows implicit conversions from <code>noexcept</code> function pointers to potentially throwing function pointers.</p>\n\n<pre><code>void (*ptr_to_noexcept)() noexcept = nullptr;\nvoid (*ptr_to_throwing)() = ptr_to_noexcept;  // implicit conversion\n</code></pre>\n\n<p><a href=\"http://eel.is/c++draft/expr.static.cast#7\" rel=\"noreferrer\">http://eel.is/c++draft/expr.static.cast#7</a> says that <code>static_cast</code> can perform the inverse of such a conversion.</p>\n\n<pre><code>void (*noexcept_again)() noexcept = static_cast&lt;void(*)() noexcept&gt;(ptr_to_throwing);\n</code></pre>\n\n<p>Unfortunately, both GCC and clang tell me otherwise: <a href=\"https://godbolt.org/z/TgrL7q\" rel=\"noreferrer\">https://godbolt.org/z/TgrL7q</a></p>\n\n<p>What is the correct way to do this? Are <code>reinterpret_cast</code> and C style cast my only options?</p>\n"}, {"tags": ["c++", "c++11", "boost", "clang"], "comments": [{"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 1, "creation_date": 1566406827, "post_id": 57596150, "comment_id": 101649721, "body": "<a href=\"https://godbolt.org/z/KIFjNp\" rel=\"nofollow noreferrer\">Works</a> in Clang 8.0.0 and Boost 1.70.0"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1566408749, "post_id": 57596150, "comment_id": 101650426, "body": "You say <code>transform.cpp</code> but then <code>transform_itr.cpp</code>, and your <code>max_element</code> call is not on line 23 - can we have a real <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please?"}, {"owner": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1566408927, "post_id": 57596150, "comment_id": 101650498, "body": "@LightnessRacesinOrbit I just shortened the file name to make the example more succinct - doesn&#39;t change the validity."}, {"owner": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "edited": false, "score": 1, "creation_date": 1566408996, "post_id": 57596150, "comment_id": 101650537, "body": "Additional info: macOS Mojava 10.14.6. Both LLVM and Boost installed with Homebrew."}, {"owner": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1566409612, "post_id": 57596150, "comment_id": 101650796, "body": "@LightnessRacesinOrbit Ah, and the off-by-one line number is as I added &quot;transform.cpp&quot; to the example for clarity, recompiled and updated with this in the real code."}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1566413349, "post_id": 57596150, "comment_id": 101652307, "body": "I&#39;m voting to close this question as off-topic because not reproducible"}], "answers": [{"comments": [{"owner": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "edited": false, "score": 2, "creation_date": 1566419163, "post_id": 57597009, "comment_id": 101654694, "body": "Interesting! So does this mean that all the compiler versions that are allowing this to compile are non-compliant?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "edited": false, "score": 2, "creation_date": 1566421294, "post_id": 57597009, "comment_id": 101655478, "body": "No. The implementation has no obligation to check that you actually passed a forward iterator to <code>max_element</code>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1566471047, "post_id": 57597009, "comment_id": 101670745, "body": "Blimey, that&#39;s subtle."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 8, "last_activity_date": 1566410999, "last_edit_date": 1566410999, "creation_date": 1566410507, "answer_id": 57597009, "question_id": 57596150, "link": "https://stackoverflow.com/questions/57596150/why-does-clang-not-like-boosttransform-iterator/57597009#57597009", "title": "Why does Clang not like boost::transform_iterator?", "body": "<p>The (pre-C++20) standard requires forward-or-stronger iterators:</p>\n\n<ul>\n<li>to produce a real reference when dereferenced;</li>\n<li>to produce references to the same object when two equal iterators are dereferenced (i.e., no stashing)</li>\n</ul>\n\n<p>Since your transformation returns by value, there's no way for <code>transform_iterator</code> to meet both requirements. Thus, it can only advertise itself as an input iterator.</p>\n\n<p>The fix is to change <code>XGetter</code> to return by reference, or to use <code>std::mem_fn(&amp;Foo::x)</code> which does that for you.</p>\n"}], "owner": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "accepted_answer_id": 57597009, "answer_count": 1, "score": 2, "last_activity_date": 1566410999, "creation_date": 1566406431, "last_edit_date": 1566409537, "question_id": 57596150, "link": "https://stackoverflow.com/questions/57596150/why-does-clang-not-like-boosttransform-iterator", "title": "Why does Clang not like boost::transform_iterator?", "body": "<p>With Clang 8.0.1 and Boost 1.70, the following program</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// transform.cpp\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n\n#include &lt;boost/iterator/transform_iterator.hpp&gt;\n\nstruct Foo\n{\n    int x;\n};\n\nstruct XGetter\n{\n    auto operator()(const Foo&amp; foo) const noexcept { return foo.x; }\n};\n\nint main()\n{\n    const std::vector&lt;Foo&gt; foos {{1}, {2}, {3}};\n    using boost::make_transform_iterator;\n    const auto first = make_transform_iterator(foos.cbegin(), XGetter {});\n    const auto last = make_transform_iterator(foos.cend(), XGetter {});\n    std::cout &lt;&lt; *std::max_element(first, last) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>fails to compile</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ clang++ -std=c++14 -o transform transform.cpp\n\n/usr/local/Cellar/llvm/8.0.1/bin/../include/c++/v1/algorithm:2494:5: error: static_assert failed due to requirement\n      '__is_forward_iterator&lt;boost::iterators::transform_iterator&lt;XGetter, std::__1::__wrap_iter&lt;const Foo *&gt;,\n      boost::use_default, boost::use_default&gt; &gt;::value' \"std::max_element requires a ForwardIterator\"\n    static_assert(__is_forward_iterator&lt;_ForwardIterator&gt;::value,\n    ^             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/usr/local/Cellar/llvm/8.0.1/bin/../include/c++/v1/algorithm:2512:19: note: in instantiation of function template\n      specialization 'std::__1::max_element&lt;boost::iterators::transform_iterator&lt;XGetter, std::__1::__wrap_iter&lt;const\n      Foo *&gt;, boost::use_default, boost::use_default&gt;, std::__1::__less&lt;int, int&gt; &gt;' requested here\n    return _VSTD::max_element(__first, __last,\n                  ^\ntransform.cpp:24:24: note: in instantiation of function template specialization\n      'std::__1::max_element&lt;boost::iterators::transform_iterator&lt;XGetter, std::__1::__wrap_iter&lt;const Foo *&gt;,\n      boost::use_default, boost::use_default&gt; &gt;' requested here\n    std::cout &lt;&lt; *std::max_element(first, last) &lt;&lt; std::endl;\n                       ^\n1 error generated.\n</code></pre>\n\n<p>I was under the impression that <a href=\"https://www.boost.org/doc/libs/1_71_0/libs/iterator/doc/html/iterator/specialized/transform.html\" rel=\"nofollow noreferrer\">boost::transform_iterator</a> inherited the iterator category of iterator it models. What is going wrong?</p>\n"}, {"tags": ["c++", "qt", "qt5", "data-visualization", "qwidget"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1566405900, "post_id": 57595972, "comment_id": 101649350, "body": "Have you tried looking in the Qt documentation to answer your question? That should be your first step."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 4, "creation_date": 1566406345, "post_id": 57595972, "comment_id": 101649498, "body": "Or maybe what you want to do is just not possible with the standard widget(s), so you have to write your own.."}, {"owner": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1566406506, "post_id": 57595972, "comment_id": 101649582, "body": "Appreciate if you can give some more hints on how to do that."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 4, "creation_date": 1566406712, "post_id": 57595972, "comment_id": 101649669, "body": "Designing a custom widget to do what the standard one does + what you want, would be far too much for a StackOverflow answer.. But there are consultants available who would happily write such a widget for you. Just expect a fee of $100/hr or thereabouts - or research and write it yourself.."}, {"owner": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1566434171, "post_id": 57595972, "comment_id": 101658462, "body": "research where?"}, {"owner": {"reputation": 2918, "user_id": 1035663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/138e6b64e01318f07a1c0ee4ec708b94?s=128&d=identicon&r=PG", "display_name": "Max Lambertini", "link": "https://stackoverflow.com/users/1035663/max-lambertini"}, "edited": false, "score": 1, "creation_date": 1567149832, "post_id": 57595972, "comment_id": 101885172, "body": "Start by dissecting this example: <a href=\"https://doc.qt.io/qt-5/qtdatavisualization-bars-example.html#\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qtdatavisualization-bars-example.html#</a> then study this class: <a href=\"https://doc.qt.io/qt-5/qvalue3daxis.html\" rel=\"nofollow noreferrer\">QValue3DAxis</a> and try tinkering with <code>setSegmentCount()</code> and <code>setSubSegmentCount()</code> methods. I&#39;d follow this path."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 1, "creation_date": 1567557779, "post_id": 57595972, "comment_id": 101994940, "body": "Normally I would say the same thing: check the docs, study the examples. However, after digging in the source code of Q3DBars and Q3DSurface I don&#39;t see a way to add verticle lines at all. There is a difference in the way the axes are rendered - for Q3DBars without and for Q3Dsurface with vertical lines, which seems independent of the axis type. Furthermore, I don&#39;t think QAbstract3DGraph is meant to be inherited by any user class, not belonging to the Qt library, nor there are virtual functions of Q3DBars, which could be reimplemented in a subclass to change the way the axes are rendered."}], "answers": [{"tags": [], "owner": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "is_accepted": false, "score": 0, "last_activity_date": 1569842924, "creation_date": 1569842924, "answer_id": 58167009, "question_id": 57595972, "link": "https://stackoverflow.com/questions/57595972/q3dbars-with-grid-on-vertical-walls-how/58167009#58167009", "title": "Q3DBars with grid on vertical walls, how?", "body": "<p><a href=\"https://i.stack.imgur.com/yXSJL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yXSJL.png\" alt=\"enter image description here\"></a></p>\n\n<p>Perhaps not possible with <code>Q3DBars</code> though with <code>Q3DScatter</code> maybe:</p>\n\n<pre><code>#include \"mainwindow.h\"\n\n#include &lt;Q3DScatter&gt;\n\nusing namespace QtDataVisualization;\n\nMainWindow::MainWindow(QWidget *parent) : QMainWindow(parent) {\n\n    auto chart = new Q3DScatter;\n    setCentralWidget(QWidget::createWindowContainer(chart));\n\n    auto series = new QScatter3DSeries;\n    chart-&gt;addSeries(series);\n\n    chart-&gt;axisX()-&gt;setRange(0,50);\n    chart-&gt;axisY()-&gt;setRange(0,50);\n    chart-&gt;axisZ()-&gt;setRange(0,50);\n\n    chart-&gt;setShadowQuality(QAbstract3DGraph::ShadowQualityNone);\n\n    auto add_bar = [](int x, int y, int z){\n        auto bar = new QScatterDataArray;;\n        while(z-- &gt; 0)\n            *bar &lt;&lt; QVector3D(y, z, x);\n        return bar;\n    };\n\n    QList&lt;QScatterDataArray*&gt; row;\n    for(int i = 0; i &lt; 5; i++) \n        row &lt;&lt; add_bar(0, i*10, 20);\n\n    foreach (auto bar, row)\n        series-&gt;dataProxy()-&gt;addItems(*bar);\n}\n\nMainWindow::~MainWindow() {}\n</code></pre>\n"}], "owner": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 220, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1569842924, "creation_date": 1566405497, "last_edit_date": 1569842816, "question_id": 57595972, "link": "https://stackoverflow.com/questions/57595972/q3dbars-with-grid-on-vertical-walls-how", "title": "Q3DBars with grid on vertical walls, how?", "body": "<p>This is the plot</p>\n\n<p><a href=\"https://i.stack.imgur.com/m5r2p.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/m5r2p.png\" alt=\"enter image description here\"></a></p>\n\n<p>And this is the code</p>\n\n<p>.pro</p>\n\n<pre><code>QT      += core gui widgets datavisualization\nTEMPLATE = app\nSOURCES += main.cpp mainwindow.cpp\nHEADERS += mainwindow.h\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"mainwindow.cpp\"\n#include &lt;QApplication&gt;\n\nint main(int argc, char *argv[]) {\n    QApplication a(argc, argv);\n    MainWindow w;\n    w.show();\n    return a.exec();\n}\n</code></pre>\n\n<p>mainwindow.h</p>\n\n<pre><code>#ifndef MAINWINDOW_H\n#define MAINWINDOW_H\n\n#include &lt;QMainWindow&gt;\n\nclass MainWindow : public QMainWindow {\n    Q_OBJECT\npublic:\n    MainWindow(QWidget *parent = 0);\n    ~MainWindow();\n};\n\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p>mainwindow.cpp</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include &lt;QMainWindow&gt;\n\n#include &lt;QtDataVisualization/Q3DBars&gt;\nusing namespace QtDataVisualization;\n\nMainWindow::MainWindow(QWidget *parent) : QMainWindow(parent) {\n    resize(800,600);\n    Q3DBars *graph = new Q3DBars;\n    setCentralWidget(QWidget::createWindowContainer(graph));\n    graph-&gt;scene()-&gt;activeCamera()-&gt;setCameraPosition(30,30);\n    graph-&gt;setBarSpacing(QSizeF(1,3));\n    QBar3DSeries *series = new QBar3DSeries;\n    graph-&gt;addSeries(series);\n    QStringList row_labels{\"0\", \"\", \"20\", \"\", \"40\"};\n    QStringList column_labels{\"0\", \"\", \"20\", \"\", \"40\"};\n    graph-&gt;rowAxis()-&gt;setRange(0, row_labels.count()-1);\n    graph-&gt;columnAxis()-&gt;setRange(0, column_labels.count()-1);\n    series-&gt;dataProxy()-&gt;setRowLabels(row_labels);\n    series-&gt;dataProxy()-&gt;setColumnLabels(column_labels);\n\n//    graph-&gt;activeTheme()-&gt;setGridEnabled(false);\n}\n\nMainWindow::~MainWindow(){}\n</code></pre>\n\n<p>Now to the question:</p>\n\n<p>Can I have grid lines on vertical walls? I mean vertical lines in the picture, same way as in the floor.</p>\n"}, {"tags": ["c++", "duration", "timestep"], "comments": [{"owner": {"reputation": 541, "user_id": 11949114, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-c5WYjozrWWg/AAAAAAAAAAI/AAAAAAAAAyE/Womw0zfRLvk/photo.jpg?sz=128", "display_name": "Robert Price", "link": "https://stackoverflow.com/users/11949114/robert-price"}, "edited": false, "score": 0, "creation_date": 1566404162, "post_id": 57595628, "comment_id": 101648549, "body": "The variable <code>sword_charge</code> does not appear to exist."}, {"owner": {"reputation": 351, "user_id": 10791600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7fa43ae97ba0cc237a6cda68228d3fa?s=128&d=identicon&r=PG&f=1", "display_name": "Kelsey", "link": "https://stackoverflow.com/users/10791600/kelsey"}, "edited": false, "score": 0, "creation_date": 1566404251, "post_id": 57595628, "comment_id": 101648585, "body": "Do you want the variable sword_check to =1 when sword_charge &gt;= 0.90?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1566404314, "post_id": 57595628, "comment_id": 101648619, "body": "It&#39;s a typo, you wrote <code>word_check</code> and didn&#39;t define <code>sword_charge</code> which has nothing to do with the <code>if</code>"}, {"owner": {"reputation": 13, "user_id": 11771398, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cAccWZLBsGk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcJyzWW8aqlLPbxXorAEUuUiLaakA/photo.jpg?sz=128", "display_name": "surendra kumar A M", "link": "https://stackoverflow.com/users/11771398/surendra-kumar-a-m"}, "edited": false, "score": 0, "creation_date": 1566404384, "post_id": 57595628, "comment_id": 101648663, "body": "Kelsey, yup I need sword_check to be 1 and also I need to know what is wrong in my code. I just saw one documentation and try to run the same code in python, but it is showing error now."}, {"owner": {"reputation": 3792, "user_id": 7259671, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/COi5o.jpg?s=128&g=1", "display_name": "webDev", "link": "https://stackoverflow.com/users/7259671/webdev"}, "edited": false, "score": 0, "creation_date": 1566404713, "post_id": 57595628, "comment_id": 101648803, "body": "What is <code>sword_charge</code> where did you define?"}, {"owner": {"reputation": 351, "user_id": 10791600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7fa43ae97ba0cc237a6cda68228d3fa?s=128&d=identicon&r=PG&f=1", "display_name": "Kelsey", "link": "https://stackoverflow.com/users/10791600/kelsey"}, "edited": false, "score": 0, "creation_date": 1566404850, "post_id": 57595628, "comment_id": 101648884, "body": "@surendrakumarAM I have posted an answer that should help"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11771398, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cAccWZLBsGk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcJyzWW8aqlLPbxXorAEUuUiLaakA/photo.jpg?sz=128", "display_name": "surendra kumar A M", "link": "https://stackoverflow.com/users/11771398/surendra-kumar-a-m"}, "edited": false, "score": 0, "creation_date": 1566404876, "post_id": 57595801, "comment_id": 101648901, "body": "Can you kindly explain it a bit more! How to overcome it"}, {"owner": {"reputation": 189, "user_id": 10552645, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jAZhYCHh7I8/AAAAAAAAAAI/AAAAAAAAAck/DZ_fZIM81lY/photo.jpg?sz=128", "display_name": "Chris Fowl", "link": "https://stackoverflow.com/users/10552645/chris-fowl"}, "reply_to_user": {"reputation": 13, "user_id": 11771398, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cAccWZLBsGk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcJyzWW8aqlLPbxXorAEUuUiLaakA/photo.jpg?sz=128", "display_name": "surendra kumar A M", "link": "https://stackoverflow.com/users/11771398/surendra-kumar-a-m"}, "edited": false, "score": 0, "creation_date": 1566404961, "post_id": 57595801, "comment_id": 101648939, "body": "The error states that sword_charge isn&#39;t defined. Define the variable and your code should work. The typo was edited out in the question. Also, you can read @Kelsey&#39;s answer."}], "tags": [], "owner": {"reputation": 189, "user_id": 10552645, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jAZhYCHh7I8/AAAAAAAAAAI/AAAAAAAAAck/DZ_fZIM81lY/photo.jpg?sz=128", "display_name": "Chris Fowl", "link": "https://stackoverflow.com/users/10552645/chris-fowl"}, "is_accepted": false, "score": 1, "last_activity_date": 1566404669, "creation_date": 1566404669, "answer_id": 57595801, "question_id": 57595628, "link": "https://stackoverflow.com/questions/57595628/how-to-set-the-timestep-for-execution-of-specific-code-snippet/57595801#57595801", "title": "How to set the timeStep for execution of specific code snippet?", "body": "<p>Yes, you can write an if statement like that. The error comes from your typo as mentioned in the comments.</p>\n"}, {"tags": [], "owner": {"reputation": 351, "user_id": 10791600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7fa43ae97ba0cc237a6cda68228d3fa?s=128&d=identicon&r=PG&f=1", "display_name": "Kelsey", "link": "https://stackoverflow.com/users/10791600/kelsey"}, "is_accepted": false, "score": 1, "last_activity_date": 1566405063, "last_edit_date": 1566405063, "creation_date": 1566404815, "answer_id": 57595833, "question_id": 57595628, "link": "https://stackoverflow.com/questions/57595628/how-to-set-the-timestep-for-execution-of-specific-code-snippet/57595833#57595833", "title": "How to set the timeStep for execution of specific code snippet?", "body": "<p>You want to clearly define all of your variables first, then you can do two if statements to determine if the sword_check and/or shield_check dummy variables should be equal to 1. The following code should get you started. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#Define sword_charge and shield_energy \nsword_charge = 0.90\nshield_energy = 5\n\n#Set sword_check and shield_check as 0\nsword_check = 0\nshield_check = 0\n\nif sword_charge &gt;= 0.90:\n    sword_check = True\n\nif shield_energy &gt;= 100: \n    shield_check = True\n\nif sword_check and shield_check:\n    print(\"The dragon crumples in a heap. You rescue the gorgeous princess!\") \n\nelse:\n    print(\"Your attack has no effect, the dragon fries you to a crisp!\")\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11771398, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cAccWZLBsGk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcJyzWW8aqlLPbxXorAEUuUiLaakA/photo.jpg?sz=128", "display_name": "surendra kumar A M", "link": "https://stackoverflow.com/users/11771398/surendra-kumar-a-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1566411387, "answer_count": 2, "score": -1, "last_activity_date": 1594575120, "creation_date": 1566403964, "last_edit_date": 1594575120, "question_id": 57595628, "link": "https://stackoverflow.com/questions/57595628/how-to-set-the-timestep-for-execution-of-specific-code-snippet", "closed_reason": "Not suitable for this site", "title": "How to set the timeStep for execution of specific code snippet?", "body": "<p>I need to execute certain code after certain duration/after certain timestep.</p>\n<p>For an example,\nIn ROS, we implement Service API and client can call the service request whenever needed.</p>\n<p>So When a client call a service API, first block of code should be executed without any delay and then after certain duration/timeStep second block of code should be executed (like LED blinking) and the cycle repeat until client sends stop request.</p>\n<p>Now my question is that how can I achieve this cycle?</p>\n<pre><code>uint m_tickCount{};\nuint duration {500}; // timeStep /** tick */\n\nvoid LedFlash(const Animation&amp; animation, std::unordered_map&lt;int, int&gt; ledsHandle)\n{\n    //first block\n    std::for_each(leds.begin(), leds.end(), [&amp;](int value) {\n        simSetShapeColor(ledsHandle[value], nullptr, sim_colorcomponent_ambient_diffuse,\n                         colorValue.data());\n    });\n    //second block\n    std::for_each(leds.begin(), leds.end(), [&amp;](int value) {\n        simSetShapeColor(ledsHandle[value], nullptr, sim_colorcomponent_ambient_diffuse,\n                         colorValue.data());\n    });\n}\n</code></pre>\n<p>For an example, as soon as the client call the service first block of code should be executed and after specified time step second block of code should be executed, then again after specified time step first block should be executed and cycle repeat.</p>\n<p>Any hint or suggestion?</p>\n<p>Thanks in advance</p>\n"}, {"tags": ["c++", "qt", "qt5"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1566404501, "post_id": 57595300, "comment_id": 101648710, "body": "maybe this?  <a href=\"https://stackoverflow.com/questions/33633056/undefined-reference-to-vtable-for-mainwindow\" title=\"undefined reference to vtable for mainwindow\">stackoverflow.com/questions/33633056/&hellip;</a>"}, {"owner": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1566404968, "post_id": 57595300, "comment_id": 101648944, "body": "I tried make distclean, also rm all other files and qmake then make.. still the same error"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1566411893, "post_id": 57595300, "comment_id": 101651728, "body": "@KcFnMi add <code>#include &quot;main.moc&quot;</code> at the end of the file"}, {"owner": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "edited": false, "score": 0, "creation_date": 1566698257, "post_id": 57595300, "comment_id": 101736885, "body": "You mean, <code>#include &quot;main.moc&quot;</code> at the en of <code>main.cpp</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "edited": false, "score": 0, "creation_date": 1566403428, "post_id": 57595347, "comment_id": 101648244, "body": "Good to know. Altought still having the same error."}, {"owner": {"reputation": 14998, "user_id": 212378, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/185aae2d842026d2eefa7528b00b394b?s=128&d=identicon&r=PG", "display_name": "Alexis Wilke", "link": "https://stackoverflow.com/users/212378/alexis-wilke"}, "reply_to_user": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "edited": false, "score": 0, "creation_date": 1566404029, "post_id": 57595347, "comment_id": 101648488, "body": "It may be a <code>moc</code> problem, which would add a class you have to derive from to complete the <code>Q_OBJECT</code>."}], "tags": [], "owner": {"reputation": 14998, "user_id": 212378, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/185aae2d842026d2eefa7528b00b394b?s=128&d=identicon&r=PG", "display_name": "Alexis Wilke", "link": "https://stackoverflow.com/users/212378/alexis-wilke"}, "is_accepted": false, "score": 0, "last_activity_date": 1566402849, "creation_date": 1566402849, "answer_id": 57595347, "question_id": 57595300, "link": "https://stackoverflow.com/questions/57595300/a-missing-vtable-while-implementing-mainwindow-in-main-cpp/57595347#57595347", "title": "A missing vtable while implementing MainWindow in main.cpp", "body": "<p>In most cases this is because you did not declare the destructor:</p>\n\n<pre><code>virtual ~MainWindow() override {}\n</code></pre>\n\n<p>That's the one function that will trigger the compiler code necessary to create the vtable.</p>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 1169205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4f6b30e68d1620bbafd5c113b708886?s=128&d=identicon&r=PG", "display_name": "JimmyG", "link": "https://stackoverflow.com/users/1169205/jimmyg"}, "is_accepted": true, "score": 2, "last_activity_date": 1566405169, "creation_date": 1566405169, "answer_id": 57595910, "question_id": 57595300, "link": "https://stackoverflow.com/questions/57595300/a-missing-vtable-while-implementing-mainwindow-in-main-cpp/57595910#57595910", "title": "A missing vtable while implementing MainWindow in main.cpp", "body": "<p>It is a <code>moc</code> problem.  When subclassing a QObject that uses the <code>Q_OBJECT</code> macro, you need to put it in its own file.  You can't compile it with your <code>main.cpp</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 4010, "user_id": 1812187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MRXi9.png?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/1812187/carlton"}, "is_accepted": false, "score": 1, "last_activity_date": 1566443812, "last_edit_date": 1566443812, "creation_date": 1566411009, "answer_id": 57597117, "question_id": 57595300, "link": "https://stackoverflow.com/questions/57595300/a-missing-vtable-while-implementing-mainwindow-in-main-cpp/57597117#57597117", "title": "A missing vtable while implementing MainWindow in main.cpp", "body": "<p>The meta-object compiler (moc) only processes header files (.h). The <a href=\"https://doc.qt.io/archives/qt-4.8/moc.html\" rel=\"nofollow noreferrer\">moc documentation</a> mentions this briefly. I'm guessing it's because the declaration of a QObject subclass alone is sufficient to generate the signals/slots code; i.e. the implementation that would normally be in the .cpp file is unnecessary for moc to do its thing.</p>\n"}], "owner": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "closed_date": 1566444699, "accepted_answer_id": 57595910, "answer_count": 3, "score": 0, "last_activity_date": 1566443812, "creation_date": 1566402628, "last_edit_date": 1566403546, "question_id": 57595300, "link": "https://stackoverflow.com/questions/57595300/a-missing-vtable-while-implementing-mainwindow-in-main-cpp", "closed_reason": "Duplicate", "title": "A missing vtable while implementing MainWindow in main.cpp", "body": "<p>The Qt projects on QtCreator usually keep main.cpp separated from QtMainWindow derived classes.</p>\n\n<p>I tried to move it to main.cpp but got stuck:</p>\n\n<p>myapp.pro</p>\n\n<pre><code>QT       += core gui\n\ngreaterThan(QT_MAJOR_VERSION, 4): QT += widgets\n\nTEMPLATE = app\n\nCONFIG += c++11\n\nSOURCES += main.cpp\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;QApplication&gt;\n#include &lt;QMainWindow&gt;\n\nclass MainWindow : public QMainWindow {\n    Q_OBJECT\n\npublic:\n    MainWindow(QWidget *parent=0) : QMainWindow(parent) { }\n    virtual ~MainWindow() override {}\n};\n\nint main(int argc, char *argv[]) {\n    QApplication a(argc, argv);\n    MainWindow w;\n    return a.exec();\n}\n</code></pre>\n\n<p>Then and got:</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"vtable for MainWindow\", referenced from:\n      _main in main.o\n  NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake: *** [demo1.app/Contents/MacOS/demo1] Error 1\n</code></pre>\n\n<p>Having a difficult time trying to find the mistake I made. Any comments?</p>\n"}, {"tags": ["c++", "cmake", "clion"], "comments": [{"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 2, "creation_date": 1566402892, "post_id": 57595277, "comment_id": 101647984, "body": "Usually, finding a library is done with <code>find_package</code>. What is the library you&#39;re trying to use? Maybe they exports their targets correctly and you only need a prefix path"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1566409353, "post_id": 57595277, "comment_id": 101650685, "body": "The <code>CMakeLists.txt</code> is correct, and linking with the library has been performed. It seems that your <code>F:\\Project\\header\\test.lib</code> does <b>not define</b> given function (<code>test::test</code>) or does that in <b>incompatible</b> manner. The first alternative can be checked with inspected the code of <code>test.lib</code> <b>sources</b> (add that code to the question post). As for the second alternative, how do you build you <code>test.lib</code> library? By using CLion too, or with other compiler?"}], "answers": [{"comments": [{"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 1, "creation_date": 1566403000, "post_id": 57595350, "comment_id": 101648034, "body": "With an imported library you need to set the <code>IMPORTED_LOCATION</code> and the <code>INTERFACE_INCLUDE_DIRECTORY</code>"}, {"owner": {"reputation": 25, "user_id": 8266937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b620089b26eb3380c1a16f455028aa6?s=128&d=identicon&r=PG&f=1", "display_name": "Algoliahelpmeplz", "link": "https://stackoverflow.com/users/8266937/algoliahelpmeplz"}, "edited": false, "score": 0, "creation_date": 1566403629, "post_id": 57595350, "comment_id": 101648339, "body": "I see. I have tried what you said and have moved test.lib into the folder with my cmake text file. I now get the error: <code>No rule to make target &#39;test-NOTFOUND&#39;, needed by &#39;Project.exe&#39;.  Stop.</code>"}, {"owner": {"reputation": 503, "user_id": 11530367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a63634fee3fc4db7034de06e81d6c1e?s=128&d=identicon&r=PG&f=1", "display_name": "GLJ", "link": "https://stackoverflow.com/users/11530367/glj"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1566404085, "post_id": 57595350, "comment_id": 101648511, "body": "@GuillaumeRacicot you are correct, thank you. I\u2019ll update my answer."}, {"owner": {"reputation": 25, "user_id": 8266937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b620089b26eb3380c1a16f455028aa6?s=128&d=identicon&r=PG&f=1", "display_name": "Algoliahelpmeplz", "link": "https://stackoverflow.com/users/8266937/algoliahelpmeplz"}, "edited": false, "score": 0, "creation_date": 1566408643, "post_id": 57595350, "comment_id": 101650381, "body": "I have tried what you said plus a variety of more things including moving my .lib file around. My code is the exact same as yours with the exception: <code>set_target_properties(test PROPERTIES IMPORTED_LOCATION &quot;${CMAKE_SOURCE_DIR}&#47;test.lib&quot;)</code>   The error returned is <code>cannot find -llibrary collect2.exe: error: ld returned 1 exit status</code>  Any idea why? My .lib file is in the same directory as my cmakelist.txt and I know that <code>${CMAKE_SOURCE_DIR}&#47;test.lib</code> points to it."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "reply_to_user": {"reputation": 25, "user_id": 8266937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b620089b26eb3380c1a16f455028aa6?s=128&d=identicon&r=PG&f=1", "display_name": "Algoliahelpmeplz", "link": "https://stackoverflow.com/users/8266937/algoliahelpmeplz"}, "edited": false, "score": 0, "creation_date": 1566409651, "post_id": 57595350, "comment_id": 101650811, "body": "@Algoliahelpmeplz: Looks like you use <code>library</code> (literally!) in your <code>target_link_libraries</code> call. This is wrong: you need to link with <code>test</code>, which is the name of the <b>library target</b> corresponded to <code>test.lib</code>."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1566410110, "post_id": 57595350, "comment_id": 101650974, "body": "Given answer doesn&#39;t fix the problem stated in the question: After fix all issues with this <code>CMakeLists.txt</code>, it calls the compiler and the linker with the <b>same parameters</b>, as in the question post. So it would emit the same error as the asker wants to resolve. Then, why given answer is here? If you want to show a <b>generic way</b> for link external library, you need to answer <a href=\"https://stackoverflow.com/questions/8774593/cmake-link-to-external-library\">CMake link to external library</a> question, not a given one."}], "tags": [], "owner": {"reputation": 503, "user_id": 11530367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a63634fee3fc4db7034de06e81d6c1e?s=128&d=identicon&r=PG&f=1", "display_name": "GLJ", "link": "https://stackoverflow.com/users/11530367/glj"}, "is_accepted": true, "score": 1, "last_activity_date": 1566410017, "last_edit_date": 1566410017, "creation_date": 1566402857, "answer_id": 57595350, "question_id": 57595277, "link": "https://stackoverflow.com/questions/57595277/trying-to-add-libraries-with-cmake-results-in-error/57595350#57595350", "title": "Trying to add libraries with CMake results in error", "body": "<p>You are conceptually correct, however you are not doing it in the CMake fashion. Check out the following links on how to link an external library.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/8774593/cmake-link-to-external-library\">CMake link to external library</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/15813746/cmake-doesnt-support-imported-libraries\">cmake doesn&#39;t support imported libraries?</a></p>\n\n<p><a href=\"https://gitlab.kitware.com/cmake/community/wikis/doc/tutorials/Exporting-and-Importing-Targets\" rel=\"nofollow noreferrer\">https://gitlab.kitware.com/cmake/community/wikis/doc/tutorials/Exporting-and-Importing-Targets</a></p>\n\n<p>For your case, it would be as follows):</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.14)\nproject(Project)\n\nset(CMAKE_CXX_STANDARD 14)\n\n# Import the library into the CMake build system\nADD_LIBRARY(test SHARED IMPORTED)\n\n# Specify the location of the library \nSET_TARGET_PROPERTIES(TARGET test PROPERTIES IMPORTED_LOCATION \u201c/path/to/lib/test.dll\u201d)\n\n# create the executable   \nadd_executable(Project main.cpp)\n\n# Link your exe to the library\ntarget_link_libraries(Project test)\n</code></pre>\n\n<p>The CMake documentation is very good. I recommend checking it out when you run into issues.</p>\n\n<p><a href=\"https://cmake.org/cmake/help/latest/command/add_library.html#imported-libraries\" rel=\"nofollow noreferrer\">https://cmake.org/cmake/help/latest/command/add_library.html#imported-libraries</a></p>\n"}], "owner": {"reputation": 25, "user_id": 8266937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b620089b26eb3380c1a16f455028aa6?s=128&d=identicon&r=PG&f=1", "display_name": "Algoliahelpmeplz", "link": "https://stackoverflow.com/users/8266937/algoliahelpmeplz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 57595350, "answer_count": 1, "score": 0, "last_activity_date": 1566410017, "creation_date": 1566402532, "question_id": 57595277, "link": "https://stackoverflow.com/questions/57595277/trying-to-add-libraries-with-cmake-results-in-error", "title": "Trying to add libraries with CMake results in error", "body": "<p>I am trying to add an external .lib file to my project in Clion which uses CMake. My code is very simple and is simply to test whether the library gets included:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"header/test.h\"\nint main() {\ntest a; // returns error saying undefined reference to 'test::test()'\nreturn 0;\n}\n</code></pre>\n\n<p>When running this code I get the following error:</p>\n\n<pre><code> undefined reference to `test::test()'\n</code></pre>\n\n<p>This is because I am trying to make a test object however the library for test is not included.</p>\n\n<p>The test.lib file and the test.h file are both in the \"header\" folder which is in the root of my project folder. The file path to this is F:\\Project\\header\\</p>\n\n<p>My Cmake text file is as follows:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.14)\nproject(Project)\n\nset(CMAKE_CXX_STANDARD 14)\n\nadd_executable(Project main.cpp)\ntarget_link_libraries(Project \nF:\\\\Project\\\\header\\\\test.lib)\n</code></pre>\n\n<p>In the cmake text file i use the line:\n          target_link_libraries(Project F:\\Project\\header\\test.lib)</p>\n\n<p>This should include the library file, however it doesn't seem to because I get the \"undefined reference to...\" error as mentioned above. The Cmake compiler does not give me an error.</p>\n"}, {"tags": ["c++", "opencv", "dlib"], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 2672184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab01b5312077ea5a86ebfc61e4b28de0?s=128&d=identicon&r=PG", "display_name": "supervacuus", "link": "https://stackoverflow.com/users/2672184/supervacuus"}, "is_accepted": true, "score": 2, "last_activity_date": 1566652160, "creation_date": 1566652160, "answer_id": 57638256, "question_id": 57595274, "link": "https://stackoverflow.com/questions/57595274/how-to-create-cvmat-from-dlibrectangle-on-dlibs-array2drgb-pixel-image/57638256#57638256", "title": "How to create cv::Mat from dlib::rectangle on dlib&#39;s array2d&lt;rgb_pixel&gt; image?", "body": "<p>There are two ways you can achieve this, either through the <code>extract_image_chips</code> functionality in dlib (<a href=\"http://dlib.net/imaging.html#extract_image_chips\" rel=\"nofollow noreferrer\">docs</a>) or by extracting the sub-image from a wrapping <code>cv::Mat</code> using the corresponding OpenCV API. Which one you will use depends on how convenient the choice is for the rest of your processing pipeline.</p>\n\n<p>Concluding from your sample it seems that the OpenCV path is the most convenient (but again, please review the design and API options):</p>\n\n<pre><code>// 1.) Wrap your \"sample\" dlib-image in cv::Mat\n//     dlib::toMat() is available through #include &lt;dlib/opencv.h&gt;\ncv::Mat sample_mat = dlib::toMat(sample);\n\n// 2.) Iterate through your detections\nfor (const auto&amp; rect: detects) \n{\n    // 3.) Extract the rectangle sub-image using OpenCV\n    cv::Mat rect_sub = sample_mat(\n        cv::Rect(rect.left(), rect.top(), rect.width(), rect.height()));\n\n    // 4.) Process the sub-image\n}\n</code></pre>\n"}], "owner": {"reputation": 293, "user_id": 7345868, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a3254b29a2a99f19e2de5b5ac404258c?s=128&d=identicon&r=PG&f=1", "display_name": "Iceman", "link": "https://stackoverflow.com/users/7345868/iceman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 57638256, "answer_count": 1, "score": 0, "last_activity_date": 1566652160, "creation_date": 1566402518, "question_id": 57595274, "link": "https://stackoverflow.com/questions/57595274/how-to-create-cvmat-from-dlibrectangle-on-dlibs-array2drgb-pixel-image", "title": "How to create cv::Mat from dlib::rectangle on dlib&#39;s array2d&lt;rgb_pixel&gt; image?", "body": "<p>Im using dlib's hog detector because it finds faces much better than opencv haarcascades. But it can not detect emotions on faces (or can???). I need extract a \"sub-image\" from dlib::rectangle with face, and create cv::Mat from it to call cv::detectMultiScale() with preloaded \"haarcascade_smile.xml\".</p>\n\n<p>How to perform this extraction/conversion?</p>\n\n<p>Code sample below...</p>\n\n<pre><code>int DetectionProc(void * param){ // async operation\n    auto instance =(Detector *)param;\n    const unsigned int delay = 1000 / instance-&gt;OPS;\n    std::vector&lt;dlib::rectangle&gt; detects;\n    array2d&lt;rgb_pixel&gt; sample;\n\n    while(instance-&gt;OPS){\n        unsigned int elapsed = GetTickCount();\n\n        EnterCriticalSection(&amp;instance-&gt;cs_buf);\n        assign_image(sample,instance-&gt;buffer);\n        instance-&gt;buffer.clear();\n        LeaveCriticalSection(&amp;instance-&gt;cs_buf);\n\n        if (sample.size()){\n            detects = instance-&gt;face_detector(sample);\n            if (!detects.empty()){\n                detection res(GetTickCount());\n                if (!instance-&gt;smile_detector.empty()){\n                    // TODO\n                    // extract subimage from detects.front() on sample to cv::Mat face;\n                    // instance-&gt;smile_detector.detectMultiScale(); on face\n                    // set res.smiled to true on success\n                }\n                EnterCriticalSection(&amp;instance-&gt;cs_result);\n                instance-&gt;result = res;\n                LeaveCriticalSection(&amp;instance-&gt;cs_result);\n            }\n        }\n        elapsed = GetTickCount() - elapsed;\n        Sleep((elapsed &lt; delay) ? (delay - elapsed) : 0);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "is_accepted": true, "score": 0, "last_activity_date": 1566424838, "last_edit_date": 1566424838, "creation_date": 1566405269, "answer_id": 57595927, "question_id": 57595163, "link": "https://stackoverflow.com/questions/57595163/access-violation-exception-thrown-write-access-violation-window-vertexbuffer-w/57595927#57595927", "title": "access violation Exception thrown: write access violation. window.vertexBuffer was 0x1110112", "body": "<p>You have forgotten to initialize your two buffers in the <code>initialize()</code> function! Doesn't matter, so long as you use the <code>.good</code> flag in 'clearBuffer':</p>\n\n<pre><code>void CmdGame::clearBuffer(CmdGame window)\n{\n    if (window.good) { // Has buffers already \u2026\n        delete[] window.buffer; // You need delete[] 'cos you used new []!\n        delete[] window.vertexBuffer;\n    }\n    system(\"CLS\");\n    window.buffer = new char[window.bufferSizeX * window.bufferSizeY];\n    window.vertexBuffer = new int[99 * 2];\n}\n</code></pre>\n\n<p>Then try again!</p>\n"}], "owner": {"reputation": 3, "user_id": 11957933, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GDvST.png?s=128&g=1", "display_name": "Rixu-chan", "link": "https://stackoverflow.com/users/11957933/rixu-chan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 688, "favorite_count": 0, "accepted_answer_id": 57595927, "answer_count": 1, "score": -1, "last_activity_date": 1566424838, "creation_date": 1566402094, "last_edit_date": 1566402982, "question_id": 57595163, "link": "https://stackoverflow.com/questions/57595163/access-violation-exception-thrown-write-access-violation-window-vertexbuffer-w", "title": "access violation Exception thrown: write access violation. window.vertexBuffer was 0x1110112", "body": "<p>I'm getting an access violation.</p>\n\n<p>I have tried pointing the <em>vertexBuffer</em> to an initialized int array but i got the same result.</p>\n\n<p>I have done some debugging to see whats going one but it seems that my variables are not initialized properly.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n\nclass CmdGame\n{\nprivate:\n    int bufferSizeX, bufferSizeY;\n    char *buffer;\n    bool good = false;\n    int vertexLeng = 0;\n    int *vertexBuffer;\n\npublic:\n    static CmdGame intialize(int width, int height);\n\n    static void clearBuffer(CmdGame window);\n\n    static void vetex2I(int x, int y, CmdGame window);\n\n    static void drawArrays(int type, CmdGame window);\n\n    static void shangeBuffer(CmdGame window);\n};\n\nCmdGame CmdGame::intialize(int width, int height)\n{\n    CmdGame Buffer;\n    Buffer.bufferSizeX = width;\n    Buffer.bufferSizeY = height;\n    CmdGame::clearBuffer(Buffer);\n    Buffer.good = true;\n\n    return Buffer;\n}\n\nvoid CmdGame::shangeBuffer(CmdGame window)\n{\n    printf(window.buffer);\n}\n\nvoid CmdGame::vetex2I(int x, int y, CmdGame window)\n{\n\n    window.vertexBuffer[window.vertexLeng] = y;\n    window.vertexBuffer[window.vertexLeng + 1] = x;\n\n    window.vertexLeng++;\n}\n\nvoid CmdGame::clearBuffer(CmdGame window)\n{\n    system(\"CLS\");\n    delete window.buffer;\n    window.buffer = new char[window.bufferSizeX * window.bufferSizeY];\n    delete window.vertexBuffer;\n    window.vertexBuffer = new int[99 * 2];\n}\n\nvoid CmdGame::drawArrays(int type, CmdGame window)\n{\n    if (type == 1)\n    {\n        for (int i = 0; i &lt; 99; i += 3)\n        {\n\n        }\n    }\n    if(type == 0)\n    {\n        for (int i = 0; i &lt; 99; i += 2)\n        {\n            window.buffer[window.vertexBuffer[i] * window.vertexBuffer[i + 1]] = '#';\n        }\n    }\n}\n\nint main()\n{\n    CmdGame window = CmdGame::intialize(64, 32);\n\n    while (true)\n    {\n        CmdGame::clearBuffer(window);\n\n        CmdGame::vetex2I(32, 16, window);\n\n        CmdGame::drawArrays(0,window);\n\n        CmdGame::shangeBuffer(window);\n    }\n}\n</code></pre>\n\n<p>expecting to set the the value of <code>vertexBuffer[i]</code> but it gives this:</p>\n\n<blockquote>\n  <p>Exception thrown: write access violation.\n  window.vertexBuffer was 0x1110112.</p>\n</blockquote>\n"}, {"tags": ["c++", "functional-programming", "pipe"], "comments": [{"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 1, "creation_date": 1566401527, "post_id": 57594917, "comment_id": 101647298, "body": "Sounds like you want to use a file descriptor purely for notifications. Linux has just the thing: <a href=\"http://man7.org/linux/man-pages/man2/eventfd.2.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man2/eventfd.2.html</a>"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1566401599, "post_id": 57594917, "comment_id": 101647337, "body": "You mean writing whatever the function returns when called to a socket?"}, {"owner": {"reputation": 92, "user_id": 4984168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32ce0d46dea56e360316049a8e5b8142?s=128&d=identicon&r=PG&f=1", "display_name": "Twaik Yont", "link": "https://stackoverflow.com/users/4984168/twaik-yont"}, "edited": false, "score": 0, "creation_date": 1566401733, "post_id": 57594917, "comment_id": 101647406, "body": "No. I have an application which runs it&#39;s own loop. I can insert calls in this loop using poll callback. I need to send function&lt;void()&gt; to this thread using fd to trigger function running my function&lt;void()&gt; tasks."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1566401876, "post_id": 57594917, "comment_id": 101647476, "body": "Not really clear what you actually try to do. Can you provide some code example, and at very least the function signatures of the API you are using?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1566401961, "post_id": 57594917, "comment_id": 101647519, "body": "But what exactly are you trying to write then? A function address? That makes very little sense."}, {"owner": {"reputation": 92, "user_id": 4984168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32ce0d46dea56e360316049a8e5b8142?s=128&d=identicon&r=PG&f=1", "display_name": "Twaik Yont", "link": "https://stackoverflow.com/users/4984168/twaik-yont"}, "edited": false, "score": 0, "creation_date": 1566402200, "post_id": 57594917, "comment_id": 101647641, "body": "Header: <a href=\"https://github.com/twaik/termux-x11/blob/master/app/src/main/jni/lorie/include/lorie-message-queue.hpp\" rel=\"nofollow noreferrer\">github.com/twaik/termux-x11/blob/master/app/src/main/jni/lor&zwnj;&#8203;ie/&hellip;</a>  . Source: <a href=\"https://github.com/twaik/termux-x11/blob/master/app/src/main/jni/lorie/message-queue.cpp\" rel=\"nofollow noreferrer\">github.com/twaik/termux-x11/blob/master/app/src/main/jni/lor&zwnj;&#8203;ie/&hellip;</a> . Usage: <a href=\"https://github.com/twaik/termux-x11/blob/master/app/src/main/jni/lorie/include/lorie-compositor.hpp#L42\" rel=\"nofollow noreferrer\">github.com/twaik/termux-x11/blob/master/app/src/main/jni/lor&zwnj;&#8203;ie/&hellip;</a> . Adding fd to pollfd: <a href=\"https://github.com/twaik/termux-x11/blob/master/app/src/main/jni/lorie/compositor.cpp#L49\" rel=\"nofollow noreferrer\">github.com/twaik/termux-x11/blob/master/app/src/main/jni/lor&zwnj;&#8203;ie/&hellip;</a> ."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1566402212, "post_id": 57594917, "comment_id": 101647648, "body": "Botje is correct. Use that sort of mechanism to notify your other threads of &quot;things waiting to happen&quot;. You don&#39;t &quot;use std::queue&quot; or &quot;write std::function&quot; - those are the things that then get examined once the notification has been observed."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1566402224, "post_id": 57594917, "comment_id": 101647661, "body": "We don&#39;t want to examine your whole real project. Present a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 92, "user_id": 4984168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32ce0d46dea56e360316049a8e5b8142?s=128&d=identicon&r=PG&f=1", "display_name": "Twaik Yont", "link": "https://stackoverflow.com/users/4984168/twaik-yont"}, "edited": false, "score": 0, "creation_date": 1566402255, "post_id": 57594917, "comment_id": 101647678, "body": "The main idea is to redirect function calls to the main loop."}, {"owner": {"reputation": 92, "user_id": 4984168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32ce0d46dea56e360316049a8e5b8142?s=128&d=identicon&r=PG&f=1", "display_name": "Twaik Yont", "link": "https://stackoverflow.com/users/4984168/twaik-yont"}, "edited": false, "score": 0, "creation_date": 1566402323, "post_id": 57594917, "comment_id": 101647709, "body": "Creating minimal reproducible example will be a bit complicated, because it uses libwayland."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1566402356, "post_id": 57594917, "comment_id": 101647727, "body": "Which is exactly why that&#39;s your job not ours :) You should abstract libwayland out of the problem as your first step probably."}, {"owner": {"reputation": 92, "user_id": 4984168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32ce0d46dea56e360316049a8e5b8142?s=128&d=identicon&r=PG&f=1", "display_name": "Twaik Yont", "link": "https://stackoverflow.com/users/4984168/twaik-yont"}, "edited": false, "score": 0, "creation_date": 1566402407, "post_id": 57594917, "comment_id": 101647758, "body": "I use std::function&lt;void()&gt; to store std::bind(&amp;func, args...). Everything I need it to send this function&lt;void()&gt; to my main thread."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1566402598, "post_id": 57594917, "comment_id": 101647856, "body": "No, you don&#39;t. That&#39;s what you think the solution is, not what you want to do :)"}], "answers": [{"comments": [{"owner": {"reputation": 92, "user_id": 4984168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32ce0d46dea56e360316049a8e5b8142?s=128&d=identicon&r=PG&f=1", "display_name": "Twaik Yont", "link": "https://stackoverflow.com/users/4984168/twaik-yont"}, "edited": false, "score": 0, "creation_date": 1566403025, "post_id": 57595234, "comment_id": 101648048, "body": "Does eventfd need to be wrapped to mutex lock/unlock?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 92, "user_id": 4984168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32ce0d46dea56e360316049a8e5b8142?s=128&d=identicon&r=PG&f=1", "display_name": "Twaik Yont", "link": "https://stackoverflow.com/users/4984168/twaik-yont"}, "edited": false, "score": 0, "creation_date": 1566403302, "post_id": 57595234, "comment_id": 101648179, "body": "@TwaikYont I will leave researching the usage of eventfd as an exercise to the reader. Here&#39;s something to get you started: <a href=\"https://stackoverflow.com/q/24159633/560648\">stackoverflow.com/q/24159633/560648</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 92, "user_id": 4984168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32ce0d46dea56e360316049a8e5b8142?s=128&d=identicon&r=PG&f=1", "display_name": "Twaik Yont", "link": "https://stackoverflow.com/users/4984168/twaik-yont"}, "edited": false, "score": 0, "creation_date": 1566403397, "post_id": 57595234, "comment_id": 101648226, "body": "For what it&#39;s worth, this is exactly how I implemented my framework&#39;s message-passing and timer mechanisms, and it works great right alongside I/O handling."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 1, "last_activity_date": 1566402702, "last_edit_date": 1566402702, "creation_date": 1566402345, "answer_id": 57595234, "question_id": 57594917, "link": "https://stackoverflow.com/questions/57594917/how-to-write-functionvoid-to-pipe-socketpair/57595234#57595234", "title": "How to write function&lt;void()&gt; to pipe/socketpair?", "body": "<p>You're going at it slightly backwards.</p>\n\n<p>You don't \"send\" a queue or a function to a thread. You inform the thread that there is some work to be done; the code running on that thread then proceeds to examine some shared thing (your queue) and pulls out anything it needs to work with (newly-pushed function objects, for example) after performing the appropriate synchronisation tasks (mutex!).</p>\n\n<p>If you're already using sockets (and you're on a compatible platform), <a href=\"http://man7.org/linux/man-pages/man2/eventfd.2.html\" rel=\"nofollow noreferrer\">eventfd</a> is perfect for this task, as it gives you an FD that you can watch for in your existing <code>select</code>/<code>poll</code>/<code>epoll</code> loop; then you just trigger that whenever you like from the thread that wants to create the notification.</p>\n\n<p>Otherwise, condition variables are great for signalling across threads.</p>\n\n<hr>\n\n<h3>Main thread</h3>\n\n<ul>\n<li>Poll for activity on FDs</li>\n<li>When activity found on an FD:\n\n<ul>\n<li>Is it my \"queue has new functions\" event FD?\n\n<ul>\n<li>Lock the queue</li>\n<li>Pop the new function</li>\n<li>Unlock the queue</li>\n<li>Invoke the function (or whatever you need to do)</li>\n</ul></li>\n</ul></li>\n</ul>\n\n<h3>Provider thread</h3>\n\n<ul>\n<li>Lock the queue</li>\n<li>Push the new function</li>\n<li>Unlock the queue</li>\n<li>Trigger the \"queue has new functions\" event FD?</li>\n</ul>\n\n<hr>\n\n<p>Technically, you could serialise a pointer to your function object, and send the resulting bytes across an honest-to-god socket (within the same program only!) then reinterpret the bytes on receipt into a pointer, dereference the pointer, call the function.</p>\n\n<p>But that's going to be a <em>real</em> mess, and causes complexities for lifetime management, and is just not how things are done.</p>\n"}], "owner": {"reputation": 92, "user_id": 4984168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32ce0d46dea56e360316049a8e5b8142?s=128&d=identicon&r=PG&f=1", "display_name": "Twaik Yont", "link": "https://stackoverflow.com/users/4984168/twaik-yont"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "closed_date": 1566404019, "accepted_answer_id": 57595234, "answer_count": 1, "score": 0, "last_activity_date": 1566402702, "creation_date": 1566401228, "question_id": 57594917, "link": "https://stackoverflow.com/questions/57594917/how-to-write-functionvoid-to-pipe-socketpair", "closed_reason": "Needs details or clarity", "title": "How to write function&lt;void()&gt; to pipe/socketpair?", "body": "<p>There is a need to send std::function to thread inside pipe/socket. Writing to socket is important because I am using pollfd to check if something was written to call queue. For now I am using std::queue but it cannot notify my main thread that something was written. Is there a way to trigger pollfd using std::queue? Or is there a way to write std::function to socket/pipe?</p>\n"}, {"tags": ["c++", "stl"], "comments": [{"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "edited": false, "score": 1, "creation_date": 1566401418, "post_id": 57594645, "comment_id": 101647245, "body": "The best way is to start writing some code."}, {"owner": {"reputation": 35, "user_id": 11922072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be74f0450e6fe555d3c326171e0c1fe8?s=128&d=identicon&r=PG&f=1", "display_name": "june210", "link": "https://stackoverflow.com/users/11922072/june210"}, "reply_to_user": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "edited": false, "score": 0, "creation_date": 1566405085, "post_id": 57594645, "comment_id": 101648998, "body": "@PaulEvans Looking for a cleaner way to do other than the naive method. Not sure if it can be done using std::transform as there are multiple vectors."}, {"owner": {"reputation": 1734, "user_id": 8277897, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154710977387286/picture?type=large", "display_name": "David Ledger", "link": "https://stackoverflow.com/users/8277897/david-ledger"}, "edited": false, "score": 0, "creation_date": 1566405131, "post_id": 57594645, "comment_id": 101649030, "body": "I believe std::minus&lt;float&gt; should be std::minus&lt;float&gt;{}"}, {"owner": {"reputation": 35, "user_id": 11922072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be74f0450e6fe555d3c326171e0c1fe8?s=128&d=identicon&r=PG&f=1", "display_name": "june210", "link": "https://stackoverflow.com/users/11922072/june210"}, "edited": false, "score": 0, "creation_date": 1566405312, "post_id": 57594645, "comment_id": 101649103, "body": "Typo in the question. Fixed it."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1566409215, "post_id": 57594645, "comment_id": 101650627, "body": "Your inner transform has too many parameters.  Give some additional though to what it is that transform is supposed to be doing, and then how it should be doing that - one dimension at a time."}], "answers": [{"tags": [], "owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1566419154, "last_edit_date": 1566419154, "creation_date": 1566417264, "answer_id": 57598409, "question_id": 57594645, "link": "https://stackoverflow.com/questions/57594645/3d-vectors-transform-and-minus/57598409#57598409", "title": "3d vectors - transform and minus", "body": "<p>You were on the right track, but you missed a few things.</p>\n\n<ul>\n<li><p>For binary operations, <code>std::transform</code> only takes both begin and end iterators for the first input range; it takes a begin iterator for the second range, and assumes the second range is at least as large as the first (such that for any element in the range <code>[first1, last1)</code>, there's a matching element in the range starting at <code>first2</code>).</p></li>\n<li><p>Assuming that <code>asciivec()</code> returns a temporary object (and not a reference to a cached object), the iterators <code>asciivec(inner.front()).begin()</code> and <code>asciivec(inner.front()).end()</code> will actually refer to two different ranges; this will cause runtime errors.  You'll need to cache the results of your <code>asciivec()</code> calls inside the lambda, to give them enough permanence to finish the operation.</p></li>\n<li><p><code>std::minus</code> evaluates its operands as <code>lhs - rhs</code>, and thus will return <code>-1</code> for <code>std::minus&lt;float&gt;{}('a', 'b')</code>.  As your example results are positive, I have assumed you want absolute values, and have expanded &amp; commentated my code thusly.</p></li>\n</ul>\n\n<p>So, considering that, we can make a few slight alterations...</p>\n\n<pre><code>// Renamed \"inner\" to \"in\" for convenience here.\nstd::transform (inp.cbegin(), inp.cend(), out.begin(), [&amp;](const auto&amp; in)\n    {\n        // Tying element type to asciivec() for convenience.\n        using Container = decltype(asciivec(in.front()));\n        using      Elem = typename Container::value_type;\n        //using Elem = typename decltype(asciivec(in.front()))::value_type;\n\n        // Create non-temporary vectors first, to guarantee expected results.\n        std::vector&lt;Container&gt; inner = { asciivec(in.front()), asciivec(in.back()) };\n\n        // Use either...\n        // static Container ret;\n        // ret.clear(); ret.resize(inner.front().size());\n        // Or...\n        Container ret(inner.front().size());\n\n        std::transform(inner.front().begin(),          // InputIt first1\n                       inner.front().end(),            // InputIt last1\n                       inner.back().begin(),           // InputIt first2\n                       //asciivec(inner.back()).end(), // Omit\n                       ret.begin(),                    // OutputIt d_first\n                       std::minus&lt;float&gt;{});           // BinaryOperation binary_op\n\n        // I'm positive you want absolute values. ;3\n        // Lambda provides nice, clean overload resolution, compared to a function pointer or similar.\n        std::transform(ret.begin(), ret.end(), ret.begin(), [=](const Elem&amp; e) { return std::fabs(e); });\n\n        return ret;\n    }\n);\n</code></pre>\n\n<p>If signedness is, in fact, desired, we can comment out the second <code>transform()</code> call.</p>\n\n<p>See it in action <a href=\"https://coliru.stacked-crooked.com/a/e8e3d1d60a80ea3c\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p><sup>Edited to increase genericity, it should be fine to just drop in regardless of your data's actual types.</sup></p>\n"}], "owner": {"reputation": 35, "user_id": 11922072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be74f0450e6fe555d3c326171e0c1fe8?s=128&d=identicon&r=PG&f=1", "display_name": "june210", "link": "https://stackoverflow.com/users/11922072/june210"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 57598409, "answer_count": 1, "score": 0, "last_activity_date": 1566483849, "creation_date": 1566400366, "last_edit_date": 1566483849, "question_id": 57594645, "link": "https://stackoverflow.com/questions/57594645/3d-vectors-transform-and-minus", "title": "3d vectors - transform and minus", "body": "<p>Can std::transform be used in a nested way? Tried to do this: </p>\n\n<pre><code>                    {\n                        return std::transform(asciivec(inner.front()).begin(), asciivec(inner.front()).end(), asciivec(inner.back()).begin(), asciivec(inner.back()).end(),out.begin(), std::minus&lt;float&gt;{});\n                    }\n                   );\n</code></pre>\n\n<pre><code>Error: \nstl_algo.h||In instantiation of '_OIter std::transform(_IIter, _IIter, _OIter, _UnaryOperation) [with _IIter = __gnu_cxx::__normal_iterator&lt;const std::vector&lt;std::__cxx11::basic_string&lt;char&gt; &gt;*, std::vector&lt;std::vector&lt;std::__cxx11::basic_string&lt;char&gt; &gt; &gt; &gt;; _OIter = __gnu_cxx::__normal_iterator&lt;double*, std::vector&lt;double&gt; &gt;; _UnaryOperation = main()::&lt;lambda(const auto:1&amp;)&gt;]':|\n\n\nerror: no matching function for call to 'transform(std::vector&lt;double&gt;::iterator, std::vector&lt;double&gt;::iterator, std::vector&lt;double&gt;::iterator, std::vector&lt;double&gt;::iterator, std::vector&lt;double&gt;::iterator, std::minus&lt;float&gt;)'|\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1566400794, "post_id": 57594644, "comment_id": 101646902, "body": "<code>student[0].user==&quot;Guest&quot;;</code> is a comparison. It&#39;s the same as writing <code>i == 10;</code> where <code>i</code> is an <code>int</code>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 5, "creation_date": 1566400829, "post_id": 57594644, "comment_id": 101646925, "body": "You can&#39;t assign a string literal directly. Use <code>std::string</code> instead of <code>char[]</code>s."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1566401113, "post_id": 57594644, "comment_id": 101647078, "body": "How does this even compile?"}, {"owner": {"reputation": 1, "user_id": 11738944, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Dx6MTig7W7A/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfp1itypriOt5S3jczDj3Z0LR0zsA/photo.jpg?sz=128", "display_name": "John Paolo Pancho", "link": "https://stackoverflow.com/users/11738944/john-paolo-pancho"}, "edited": false, "score": 0, "creation_date": 1566401594, "post_id": 57594644, "comment_id": 101647333, "body": "I put the errors when I compiled it"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1566401875, "post_id": 57594644, "comment_id": 101647475, "body": "@LightnessRacesinOrbit Originally, it apparently did: &quot;<i>However, when I type &quot;Guest&quot;, and then &quot;1234&quot; for the password, it says it is incorrect</i>&quot;. Moving goalposts: wonderful for everyone."}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 1, "creation_date": 1566402132, "post_id": 57594644, "comment_id": 101647607, "body": "With the (presumably pre-edit) <code>student[0].user==&quot;Guest&quot;;</code> version, it does compile (but obviously doesn&#39;t work)."}], "answers": [{"tags": [], "owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "is_accepted": true, "score": 1, "last_activity_date": 1566404785, "last_edit_date": 1566404785, "creation_date": 1566401723, "answer_id": 57595051, "question_id": 57594644, "link": "https://stackoverflow.com/questions/57594644/trying-to-make-a-login-program/57595051#57595051", "title": "Trying to make a login program", "body": "<p>You need two minor changes to your code! First, as Francois Andrieux says, you can't assign char array strings with = ...</p>\n\n<pre><code>//  student[0].user = \"Guest\";\n//  student[0].password = \"1234\";\n    strcpy(student[0].user, \"Guest\");\n    strcpy(student[0].password, \"1234\");\n</code></pre>\n\n<p>Second, your <code>for</code> loop runs once to often:</p>\n\n<pre><code>//  for (i = 0; i &lt; 11; i++)\n    for (i = 0; i &lt; 10; i++) // Note: The last element in an array of 10 is x[9]!\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11738944, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Dx6MTig7W7A/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfp1itypriOt5S3jczDj3Z0LR0zsA/photo.jpg?sz=128", "display_name": "John Paolo Pancho", "link": "https://stackoverflow.com/users/11738944/john-paolo-pancho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "closed_date": 1566402527, "accepted_answer_id": 57595051, "answer_count": 1, "score": -2, "last_activity_date": 1566404785, "creation_date": 1566400361, "last_edit_date": 1566404229, "question_id": 57594644, "link": "https://stackoverflow.com/questions/57594644/trying-to-make-a-login-program", "closed_reason": "Not suitable for this site", "title": "Trying to make a login program", "body": "<p>I'm trying to make a login page. When the program starts, the user has to type <code>Guest</code> and Password <code>1234</code> and he can edit his/her account. However, when I try to run it, it says:</p>\n\n<pre><code>Line 15 \"Error incompatible types in assignment of 'const char[6]' to 'char[20]'\nLine 16 \"Error incompatible types in assignment of 'const char[5]' to 'char[20]'\n</code></pre>\n\n<p>I think it has to do with pointers but I am still a c++ newbie so I am having a hard time to understand pointers</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\nusing namespace std;\n\nconst int LINE_LENGTH=20;\nconst int ID_LENGTH=8;\nstruct profile{char user[20];char password[20];double CGPA; int ID;};\n\n\nint main(){\nint count=0, i;\nprofile student[10];\nstudent[0].user=\"Guest\"; //Line 15\nstudent[0].password=\"1234\"; //Line 15\nchar signupName[20];\nchar signupPassword[20];\nwhile (count==0)\n{\ncout &lt;&lt; \"#############################################\\n\";\ncout &lt;&lt; \"           Welcome to my program!        \\n\";\ncout &lt;&lt; \"         Sign up to get started      \\n\\n\\n\";\ncout &lt;&lt; \"   If you are starting, use username 'Guest'        \\n\";\ncout &lt;&lt; \"            and password '1234'        \\n\\n\";\ncout &lt;&lt; \"Username: \";\ncin &gt;&gt; signupName;\ncout &lt;&lt; \"Password: \";\ncin &gt;&gt; signupPassword;\ncout &lt;&lt; \"#############################################\\n\";\nfor (i=0;i&lt;11; i++)\n{\n    if(strcmp(signupName,student[i].user)==0 &amp;&amp; strcmp(student[i].password,signupPassword)==0)\n    {\n            count++;\n    }\n\n}\n    if(count==0)\n    {\n        system(\"cls\");\n        cout&lt;&lt;\"Your username and/or password is incorrect\\n\";\n    }\n}\nsystem(\"cls\");\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "compile-time"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1566399616, "post_id": 57594382, "comment_id": 101646226, "body": "Type information is best encoded in other types. For example, <code>std::tuple&lt;Peeler1, Peeler2, ..., PeelerN&gt;</code>. But it&#39;s not as easy to use. And it doesn&#39;t work well with runtime values like <code>idx</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1566399668, "post_id": 57594382, "comment_id": 101646249, "body": "Looks like you need a <a href=\"https://en.cppreference.com/w/cpp/utility/variant\" rel=\"nofollow noreferrer\"><code>std::variant</code></a> and use the visitor pattern."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1566399671, "post_id": 57594382, "comment_id": 101646251, "body": "or simply an empty struct &#39;tag&#39; with a template type list"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1566399681, "post_id": 57594382, "comment_id": 101646259, "body": "Setting aside the issue of &quot;encoding a list of types&quot;, assuming you do, this still will not work: <code>peel&lt; myPeelers[idx++] &gt;(fruit);</code>. A fundamental property of templates is that template parameters must be known at compile time. End of story. Here, you are attempting to create a different type, via templates, at run time. Sorry, C++ does not work this way. You&#39;ll need to figure out a different way to manage your classes and types."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1566399764, "post_id": 57594382, "comment_id": 101646297, "body": "Depending on what you want to do with your <code>Peeler</code>s, there are alternative solutions. It&#39;s not clear to me if you want to instantiate them or use them as function objects."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1566401159, "post_id": 57594382, "comment_id": 101647098, "body": "Possibly a variadic template?"}, {"owner": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1566401175, "post_id": 57594382, "comment_id": 101647111, "body": "@SamVarshavchik I am well aware that does not work, that is precisely the point of the question, I am looking for a container accessible at compile time that holds a mapping/list of types."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1566401335, "post_id": 57594382, "comment_id": 101647200, "body": "So you want the peelers to be compile time constants \u2013 and the fruits as well?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1566401562, "post_id": 57594382, "comment_id": 101647316, "body": "Possibly a good idea to make the peelers templates as well? You might then have something like <code>template&lt;Fruit F&gt; void peel() { Peeler&lt;F&gt;().peel(F); }</code>."}, {"owner": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1566402018, "post_id": 57594382, "comment_id": 101647548, "body": "@Aconcagua This is a simpler and less cluttered illustration of a problem I am facing on a larger project. The <code>Peeler</code> classes are imported from other libraries and I can&#39;t change their definition. Ideally I would have a separate header with several user-defined arrays/containers and the code would loop through them using templated code (thus the need to a typelist)."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 2, "creation_date": 1566402382, "post_id": 57594382, "comment_id": 101647740, "body": "You could still provide template wrappers around the concrete types, such as <code>template&lt;&gt; class MyPeeler&lt;Fruit::Date&gt; { PeelerX m_peeler };</code>. Such an approach, together with above template function, can prevent placing a bad peeler for one of the fruits in the peelers list (such as using Peeler1 once for banana, then for apple)."}], "answers": [{"comments": [{"owner": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "edited": false, "score": 0, "creation_date": 1566504267, "post_id": 57594999, "comment_id": 101687664, "body": "Nice, clean solutions, both of them. But is there a way to do this  a) with C++11 and b) accounting for the case that Peeler classes/functions are not <code>constexpr</code>?"}, {"owner": {"reputation": 1734, "user_id": 8277897, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154710977387286/picture?type=large", "display_name": "David Ledger", "link": "https://stackoverflow.com/users/8277897/david-ledger"}, "reply_to_user": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "edited": false, "score": 1, "creation_date": 1566531368, "post_id": 57594999, "comment_id": 101693464, "body": "Added a c++ 11 version (Part 2 : Solution 3)."}, {"owner": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "edited": false, "score": 0, "creation_date": 1567121359, "post_id": 57594999, "comment_id": 101879208, "body": "Just a small observation, <code>std::tuple</code> has actually been available since <code>std::c++11</code>"}, {"owner": {"reputation": 1734, "user_id": 8277897, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154710977387286/picture?type=large", "display_name": "David Ledger", "link": "https://stackoverflow.com/users/8277897/david-ledger"}, "reply_to_user": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "edited": false, "score": 1, "creation_date": 1567294499, "post_id": 57594999, "comment_id": 101923387, "body": "True, but std::apply and std::visit were not. Thats why I did it an alternative way."}], "tags": [], "owner": {"reputation": 1734, "user_id": 8277897, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154710977387286/picture?type=large", "display_name": "David Ledger", "link": "https://stackoverflow.com/users/8277897/david-ledger"}, "is_accepted": true, "score": 3, "last_activity_date": 1566551521, "last_edit_date": 1566551521, "creation_date": 1566401558, "answer_id": 57594999, "question_id": 57594382, "link": "https://stackoverflow.com/questions/57594382/how-to-encode-a-list-of-types-to-be-used-for-template-parameters/57594999#57594999", "title": "How to encode a list of types to be used for template parameters?", "body": "<p>The first part of this answer just shows how to encode a sequence of types at compile time and iterate, part 2 shows how to use it with your example.</p>\n\n<p><strong>Part 1 : Pattern Option 1</strong></p>\n\n<p>If you need everything at compile time look at option 2, otherwise this should suffice.\nYou can use variant like shown here:</p>\n\n<pre><code>using MyPeelers = std::variant&lt;Peeler1, Peeler2, Peeler3&gt;;\n</code></pre>\n\n<p>Then use vector like this:</p>\n\n<pre><code>std::vector&lt;MyPeelers&gt; vec\n{\n    Peeler1{},\n    Peeler2{},\n    Peeler3{}\n};\n</code></pre>\n\n<p>NOTE: std::vector is not \"constexpr\" and its elements won't be added at compile time. To achieve this you can use std::array (See \"Part 2 : Implementation Option 2\").</p>\n\n<p>And iterate through elements like this:</p>\n\n<pre><code>for(auto &amp; v: vec) \n{\n    std::visit([](auto arg)\n    { \n        std::cout &lt;&lt; typeid(arg).name() &lt;&lt; \"\\n\"; \n    }, v);\n}\n</code></pre>\n\n<p>You can play around with this here: <a href=\"https://onlinegdb.com/rJlqb1sVr\" rel=\"nofollow noreferrer\">https://onlinegdb.com/rJlqb1sVr</a></p>\n\n<p><strong>Part 1 : Pattern Option 2</strong></p>\n\n<p>Note that pattern option 2 can be entirely evaluated at compile time (but not if you print to the console...). To achieve this you need to change the fruit vector to a constexpr std::array with Fruit elements. </p>\n\n<p>For the peelers you can use tuple. This method is completely compile time.</p>\n\n<pre><code>constexpr std::tuple my_peelers{ Peeler1{}, Peeler2{}, Peeler3{} };\n</code></pre>\n\n<p>The following method uses fold expressions( see <a href=\"https://en.cppreference.com/w/cpp/language/fold\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/language/fold</a> ). In this case over the comma operator. This fold expression goes through each element in the parameters of the apply functions lamba seperately. The type of each argument can be determined by using decltype on args.</p>\n\n<pre><code>std::apply([](auto ... args)\n{\n    ((std::cout &lt;&lt; typeid(args).name() &lt;&lt; \"\\n\" ), ...);\n}, \nmy_peelers);\n</code></pre>\n\n<p>You can play around with it here: <a href=\"https://onlinegdb.com/BkbTgJiES\" rel=\"nofollow noreferrer\">https://onlinegdb.com/BkbTgJiES</a></p>\n\n<p><strong>Part 2 : Implementation Option 1</strong></p>\n\n<p>First difference here, this is where the std::variant becomes involved: </p>\n\n<pre><code>using MyPeelers = std::variant&lt;Peeler1, Peeler2, Peeler3&gt;;\nstatic const std::vector&lt;MyPeelers&gt; myPeelers \n{\n    Peeler1{},\n    Peeler2{},\n    Peeler2{},\n    Peeler3{},\n    Peeler1{},\n    Peeler3{},\n    Peeler2{},\n    Peeler1{},\n    Peeler2{}\n};\n</code></pre>\n\n<p>This function is unchanged essentially, just modified to print the template arguments and the fruit.</p>\n\n<pre><code>//\n// Peeler function, takes peeler object as template parameter\ntemplate &lt;typename T&gt;\nvoid peel(const Fruit&amp; f) \n{\n    std::cout &lt;&lt; \"Pealing  \" &lt;&lt; ToString(f) &lt;&lt; \" with \" &lt;&lt; T::Name &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Iterating through all the different peelers by value is a neat way to decay the type. If you don't use the value of v there shouldn't be an overhead associated with this method.\nInside the loop use varient and he visitor pattern. The variants lambda function will be called with the value stored in v. The type of \"arg\" after calling is the type stored in v. This method results in some code generation for each unique type in variant. In this case Peeler1, Peeler2 and, Peeler3. We can get determine which type by using declval on \"arg\". Once we have the type all that is needed is to loop through the fruit.</p>\n\n<pre><code>    //\n    // All by value, no values matter, only types\n    for(auto v : myPeelers) \n    {\n        std::visit\n        (\n            [](auto arg)\n            { \n                for (auto fruit : myFruits) \n                {\n                    peel&lt;decltype(arg)&gt;(fruit);\n                }\n            }, \n        v);\n    }\n</code></pre>\n\n<p>See here : <a href=\"https://onlinegdb.com/B1rf4Ji4H\" rel=\"nofollow noreferrer\">https://onlinegdb.com/B1rf4Ji4H</a></p>\n\n<p>The output of the above program is:</p>\n\n<pre><code>Pealing  Coconut with Peeler1\nPealing  Avocado with Peeler1\nPealing  Banana with Peeler1\nPealing  Banana with Peeler1\nPealing  Elderberr with Peeler1\nPealing  Coconut with Peeler1\nPealing  Date with Peeler1\nPealing  Elderberr with Peeler1\nPealing  Date with Peeler1\nPealing  Avocado with Peeler1\nPealing  Coconut with Peeler2\nPealing  Avocado with Peeler2\nPealing  Banana with Peeler2\n...\n</code></pre>\n\n<p>It continues like that for a while...</p>\n\n<p><strong>Part 2 : Implementation Option 2</strong></p>\n\n<p>This is the implmentation I prefer, but you cannot change the size of the pealer array at runtime, so that might be annoying.</p>\n\n<p>This works the same as before except in two places:</p>\n\n<p>The pealers are now defined as a tuple:</p>\n\n<pre><code>static constexpr std::tuple myPeelers \n{\n    Peeler1{},\n    Peeler2{},\n    Peeler2{},\n    Peeler3{},\n    Peeler1{},\n    Peeler3{},\n    Peeler2{},\n    Peeler1{},\n    Peeler2{}\n};\n</code></pre>\n\n<p>And to make sure everything is defined at compile time, fruit now uses std::array:</p>\n\n<pre><code>static constexpr std::array myFruits \n{\n    Fruit::Coconut,\n    Fruit::Avocado,\n    Fruit::Banana,\n    Fruit::Banana,\n    Fruit::Elderberry,\n    Fruit::Coconut,\n    Fruit::Date,\n    Fruit::Elderberry,\n    Fruit::Date,\n    Fruit::Avocado\n};\n</code></pre>\n\n<p>The template arguments for the tuple are deduced. This is more convient I think.</p>\n\n<p>The iterating is as explained in \"Part 1: Pattern Option 2\". Using decltype on the args parameter gets the type of each element in the tuple. It uses the type as the template parameter for peel.</p>\n\n<pre><code>std::apply([](auto ... args)\n{\n    for (auto fruit : myFruits) \n    {\n        (peel&lt;decltype(args)&gt;(fruit), ...);\n    }\n}, \nmyPeelers);\n</code></pre>\n\n<p>You can run it here: <a href=\"https://onlinegdb.com/B1W4wysEB\" rel=\"nofollow noreferrer\">https://onlinegdb.com/B1W4wysEB</a>\nThe output is the same.</p>\n\n<p>The assembly shows that everything seems to be evaluated at compile time (apart from the print statements).\n<a href=\"https://godbolt.org/z/17u3v5\" rel=\"nofollow noreferrer\">https://godbolt.org/z/17u3v5</a></p>\n\n<p><strong>Part 2 : Solution Option 3 (C++11)</strong></p>\n\n<p>As requested I've adapted this for a C++11 solution.</p>\n\n<p>First difference is constexpr was removed from all the functions.</p>\n\n<p>Next difference is that I can no longer store the values in a tuple, tuple was released C++17. But that need to be a problem, just encode it in a function and you get the same template parameter type deduction.</p>\n\n<p>Third difference is that its no longer convient to use std::array, converting to Fruit[]:</p>\n\n<pre><code>static Fruit myFruits[]\n{\n    Fruit::Coconut,\n    Fruit::Avocado,\n    Fruit::Banana,\n    Fruit::Banana,\n    Fruit::Elderberry,\n    Fruit::Coconut,\n    Fruit::Date,\n    Fruit::Elderberry,\n    Fruit::Date,\n    Fruit::Avocado\n};\n</code></pre>\n\n<p>To iterate through each pealer, we use variadic template and tail end recursion. To stop the recursion we have an empty terminal case.</p>\n\n<p>This is the terminal case:</p>\n\n<pre><code>void Pealers()\n{\n}\n</code></pre>\n\n<p>This is the normal case:</p>\n\n<pre><code>template &lt;typename Front, typename ... Args&gt;\nvoid Pealers(Front, Args ... args)\n{\n    for (Fruit fruit : myFruits)\n    {\n        peel&lt;Front&gt;( fruit );\n    }\n    Pealers(args...);\n}\n</code></pre>\n\n<p>To use the above do the following:</p>\n\n<pre><code>Pealers\n(\n    Peeler1{},\n    Peeler2{},\n    Peeler2{},\n    Peeler3{},\n    Peeler1{},\n    Peeler3{},\n    Peeler2{},\n    Peeler1{},\n    Peeler2{}\n);\n</code></pre>\n\n<p>The code can be run here: <a href=\"https://onlinegdb.com/BkKapR2NS\" rel=\"nofollow noreferrer\">https://onlinegdb.com/BkKapR2NS</a>\nThe assembly can be viewed here: <a href=\"https://godbolt.org/z/1psKDk\" rel=\"nofollow noreferrer\">https://godbolt.org/z/1psKDk</a></p>\n\n<p>And a version without the print statement to show full inlining here <a href=\"https://godbolt.org/z/-2DewW\" rel=\"nofollow noreferrer\">https://godbolt.org/z/-2DewW</a></p>\n"}, {"comments": [{"owner": {"reputation": 1734, "user_id": 8277897, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154710977387286/picture?type=large", "display_name": "David Ledger", "link": "https://stackoverflow.com/users/8277897/david-ledger"}, "edited": false, "score": 1, "creation_date": 1566450349, "post_id": 57596597, "comment_id": 101661193, "body": "I prefer my tuple method, but good to see an alternative :) I wonder if our tuple methods compile to the same assembly?"}, {"owner": {"reputation": 81, "user_id": 9607529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mtFA.png?s=128&g=1", "display_name": "Michaellu", "link": "https://stackoverflow.com/users/9607529/michaellu"}, "reply_to_user": {"reputation": 1734, "user_id": 8277897, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154710977387286/picture?type=large", "display_name": "David Ledger", "link": "https://stackoverflow.com/users/8277897/david-ledger"}, "edited": false, "score": 1, "creation_date": 1566474916, "post_id": 57596597, "comment_id": 101672904, "body": "@DavidLedger Your suspicions are <a href=\"https://godbolt.org/z/3fPgjv\" rel=\"nofollow noreferrer\">correct</a> (comparing with <a href=\"https://godbolt.org/z/17u3v5\" rel=\"nofollow noreferrer\">this</a>). I also prefer your method, because I find it more readable."}, {"owner": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "edited": false, "score": 1, "creation_date": 1566505074, "post_id": 57596597, "comment_id": 101687959, "body": "I&#39;m assuming this only works as long as <code>PeelerX</code> classes are <code>constexpr</code>/literal types? Also, any alternative for C++11?"}, {"owner": {"reputation": 81, "user_id": 9607529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mtFA.png?s=128&g=1", "display_name": "Michaellu", "link": "https://stackoverflow.com/users/9607529/michaellu"}, "reply_to_user": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "edited": false, "score": 1, "creation_date": 1566544088, "post_id": 57596597, "comment_id": 101696750, "body": "@joaocandre The <code>PeelerX</code> classes are stored as data types in the <code>Types</code> tuple. Which means no <code>PeelerX</code> class is constructed (you can construct them inside the <code>peel</code> function as <code>constexpr</code> or something else). For C++11 support see edit."}], "tags": [], "owner": {"reputation": 81, "user_id": 9607529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mtFA.png?s=128&g=1", "display_name": "Michaellu", "link": "https://stackoverflow.com/users/9607529/michaellu"}, "is_accepted": false, "score": 1, "last_activity_date": 1569875549, "last_edit_date": 1569875549, "creation_date": 1566408636, "answer_id": 57596597, "question_id": 57594382, "link": "https://stackoverflow.com/questions/57594382/how-to-encode-a-list-of-types-to-be-used-for-template-parameters/57596597#57596597", "title": "How to encode a list of types to be used for template parameters?", "body": "<p>Surprisingly there is a way. <em>Note: this works with C++14 and above.</em></p>\n\n<pre><code>using Types = std::tuple\n&lt;\n    Peeler1,\n    Peeler2,\n    Peeler2,\n    Peeler3,\n    Peeler1,\n    Peeler3,\n    Peeler2,\n    Peeler1,\n    Peeler2,\n    Peeler1\n&gt;;\n</code></pre>\n\n<p>The list of types is \"stored\" in a <a href=\"https://en.cppreference.com/w/cpp/utility/tuple\" rel=\"nofollow noreferrer\"><code>std::tuple</code></a>.</p>\n\n<pre><code>void peelFruits()\n{\n    _peelFruitsDetail_(std::make_index_sequence&lt;std::tuple_size&lt;Types&gt;::value&gt;{});\n}\n</code></pre>\n\n<p>This functions purpose is to generate indices with <a href=\"https://en.cppreference.com/w/cpp/utility/integer_sequence\" rel=\"nofollow noreferrer\"><code>std::make_index_sequence</code></a> for the detail function below. The indices are represented as a <a href=\"https://en.cppreference.com/w/cpp/language/parameter_pack\" rel=\"nofollow noreferrer\">parameter pack</a> and range from 0 to N - 1 (N here is the <a href=\"https://en.cppreference.com/w/cpp/utility/tuple/tuple_size\" rel=\"nofollow noreferrer\"><code>std::tuple_size</code></a>).</p>\n\n<pre><code>template&lt;size_t... Indices&gt;\nvoid _peelFruitsDetail_(std::index_sequence&lt;Indices...&gt;)\n{\n    auto i = { (peel&lt;std::tuple_element_t&lt;Indices, Types&gt;&gt;(myFruits[Indices]), 0)... };\n}\n</code></pre>\n\n<p>Here the indices are passed as a template argument for <a href=\"https://en.cppreference.com/w/cpp/utility/tuple/tuple_element\" rel=\"nofollow noreferrer\"><code>std::tuple_element_t</code></a>. With this we deduce the type at N of the type list. The deduced type is then passed to the peel function as well as a reference of a element of the fruits list. The comma operator discards the return value of peel and returns 0. This is necessary so that the resulting <code>std::initializers_list</code> is filled with values. The <code>std::initializers_list</code> ensures that the expressions in the expanded pack are evaluated in correct order. The pack gets expanded to something like this:</p>\n\n<pre><code>auto i = { peel&lt;std::tuple_element_t&lt;0, Types&gt;&gt;(myFruits[0]), peel&lt;std::tuple_element_t&lt;1, Types&gt;&gt;(myFruits[1]), ..., peel&lt;std::tuple_element_t&lt;N - 1, Types&gt;&gt;(myFruits[N - 1]) };\n</code></pre>\n\n<p><em>Note: for the sake of clarity, I omitted the comma operator above.</em></p>\n\n<p>As such the peel function below will get called in order.</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid peel(const Fruit&amp;)\n{\n}\n</code></pre>\n\n<p>Also worth mentioning the <code>static_assert</code> in your code won't compile since a vector isn't a <a href=\"https://en.cppreference.com/w/cpp/language/constexpr\" rel=\"nofollow noreferrer\"><code>constexpr</code></a> type.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>To make this work in C++11 we will need to do the following things:</p>\n\n<ol>\n<li>Make our own indices generator.</li>\n<li>Replace the <code>std::tuple_element_t</code> and <code>std::tuple_size_v</code> with <code>std::tuple_element</code> and <code>std::tuple_size</code>.</li>\n</ol>\n\n<p><code>std::make_index_sequence</code> uses the <a href=\"http://loungecpp.wikidot.com/tips-and-tricks:indices\" rel=\"nofollow noreferrer\">indices trick</a>. Which looks like this:</p>\n\n<pre><code>template &lt;std::size_t... Is&gt;\nstruct indices {};\n\ntemplate &lt;std::size_t N, std::size_t... Is&gt;\nstruct build_indices\n    : build_indices&lt;N - 1, N - 1, Is...&gt; {};\n\ntemplate &lt;std::size_t... Is&gt;\nstruct build_indices&lt;0, Is...&gt; : indices&lt;Is...&gt; {};\n</code></pre>\n\n<p>What is happening here?</p>\n\n<p>As we call <code>build_indices</code> (which is our equivalent of <code>std::make_index_sequence</code>) it starts recursively inheriting itself. It fills itself out from right to left, until N approaches 0. At 0 it inherits <code>indices</code> so that the variadic template parameter <code>Is</code> gets \"stored\".</p>\n\n<p>Also the <code>indices</code> struct above is our equivalent of <code>std::index_sequence</code>.</p>\n\n<p>All the above together makes the code look like this:</p>\n\n<pre><code>template&lt;size_t... Indices&gt;\nvoid _peelFruitsDetail_(indices&lt;Indices...&gt;)\n{\n    auto i = { (peel&lt;typename std::tuple_element&lt;Indices, Types&gt;::type&gt;(myFruits[Indices]), 0)... };\n}\n\nvoid peelFruits()\n{\n    _peelFruitsDetail_(build_indices&lt;std::tuple_size&lt;Types&gt;::value&gt;{});\n}\n</code></pre>\n"}], "owner": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 57594999, "answer_count": 2, "score": 3, "last_activity_date": 1569875549, "creation_date": 1566399490, "question_id": 57594382, "link": "https://stackoverflow.com/questions/57594382/how-to-encode-a-list-of-types-to-be-used-for-template-parameters", "title": "How to encode a list of types to be used for template parameters?", "body": "<p>Considering the following code, where I define a strong-typed enum <code>Fruit</code>, as well as several <code>PeelerX</code> classes:</p>\n\n<pre><code>#include &lt;vector&gt;\n\nenum class Fruit {\n    Avocado,\n    Banana,\n    Coconut,\n    Date,\n    Elderberry\n}\n\nclass Peeler1 {\npublic:\n    Peeler1() {}\n    ~Peeler1() {}\n};\n\nclass Peeler2 {\npublic:\n    Peeler2() {}\n    ~Peeler2() {}\n};\n\nclass Peeler3 {\npublic:\n    Peeler3() {}\n    ~Peeler3() {}\n};\n\nstatic const std::vector&lt;Fruit&gt; myFruits {\n    Fruit::Coconut,\n    Fruit::Avocado,\n    Fruit::Banana,\n    Fruit::Banana,\n    Fruit::Elderberry,\n    Fruit::Coconut,\n    Fruit::Date,\n    Fruit::Elderberry,\n    Fruit::Date,\n    Fruit::Avocado\n}\n\nstatic const std::vector&lt;Type&gt; myPeelers {\n    // types?\n    Peeler1,\n    Peeler2,\n    Peeler2,\n    Peeler3,\n    Peeler1,\n    Peeler3,\n    Peeler2,\n    Peeler1,\n    Peeler2\n}\n\n// Peeler function, takes peeler object as template parameter\ntemplate &lt;typename T&gt;\nvoid peel(const Fruit&amp; f) {\n    // ...  \n};\n\n\nint main(int argc, char const *argv[]) {\n    static_assert(myFruits.size() == myPeelers.size(), \"\");\n    // ...\n    size_t idx = 0;\n    for (auto&amp; fruit : myFruits) {\n        peel&lt; myPeelers[idx++] &gt;(fruit);\n    }\n    // ...\n    return 0;\n}\n</code></pre>\n\n<p>Is there a way to encode a list of types on <code>myPeelers</code> accessible at compile time, that can be used as template parameters?</p>\n"}, {"tags": ["c++", "mfc", "mdi"], "comments": [{"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1566413315, "post_id": 57594252, "comment_id": 101652292, "body": "Did you want to show the user the web page or just do the download? I haven&#39;t used ChtmlView in over a decade, but. There is also <code>SetSilent()</code>, might work. But, if you just want to do a download there is boost::asio or boost::beast. I&#39;ve used both for downloads."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 2, "creation_date": 1566421783, "post_id": 57594252, "comment_id": 101655640, "body": "You can use APIs to download directly, <a href=\"https://stackoverflow.com/a/29552504/4603670\">see example</a>"}, {"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "reply_to_user": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1566433042, "post_id": 57594252, "comment_id": 101658300, "body": "Hi @Barmak Shemirani Thanks for that heads up. So unlike Microsoft to make it look not painful. And an understood cert for https!!"}, {"owner": {"reputation": 121, "user_id": 6761191, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-e9g0N-WXcoQ/AAAAAAAAAAI/AAAAAAAAAEk/GKv2ZIOeOao/photo.jpg?sz=128", "display_name": "Annabi Gihed", "link": "https://stackoverflow.com/users/6761191/annabi-gihed"}, "reply_to_user": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1566460079, "post_id": 57594252, "comment_id": 101665086, "body": "@lakeweb, yes I want to show a web page more precisely this web view  <a href=\"https://i.imgur.com/jBjokS1.png\" rel=\"nofollow noreferrer\">Example</a>  In which a Kendo UI Spread Sheet is implemented, this web page offers the user the possibility to download the Spread Sheet by Clicking the icon in the red rectangle."}, {"owner": {"reputation": 121, "user_id": 6761191, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-e9g0N-WXcoQ/AAAAAAAAAAI/AAAAAAAAAEk/GKv2ZIOeOao/photo.jpg?sz=128", "display_name": "Annabi Gihed", "link": "https://stackoverflow.com/users/6761191/annabi-gihed"}, "reply_to_user": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1566460773, "post_id": 57594252, "comment_id": 101665425, "body": "@lakeweb And using <code>SetSilent()</code>does not prevent the the download dialog box from showing up"}, {"owner": {"reputation": 121, "user_id": 6761191, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-e9g0N-WXcoQ/AAAAAAAAAAI/AAAAAAAAAEk/GKv2ZIOeOao/photo.jpg?sz=128", "display_name": "Annabi Gihed", "link": "https://stackoverflow.com/users/6761191/annabi-gihed"}, "reply_to_user": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1566460954, "post_id": 57594252, "comment_id": 101665510, "body": "@BarmakShemirani, if I can find away to intercept the message sent when the user click on the download button, I will be able to realize the download in a custom way."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1566481123, "post_id": 57594252, "comment_id": 101676627, "body": "You can override <code>OnBeforeNavigate2</code>"}], "owner": {"reputation": 121, "user_id": 6761191, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-e9g0N-WXcoQ/AAAAAAAAAAI/AAAAAAAAAEk/GKv2ZIOeOao/photo.jpg?sz=128", "display_name": "Annabi Gihed", "link": "https://stackoverflow.com/users/6761191/annabi-gihed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1566448960, "creation_date": 1566398992, "last_edit_date": 1566448960, "question_id": 57594252, "link": "https://stackoverflow.com/questions/57594252/hide-chtmlview-download-dialog-box", "title": "Hide CHtmlView Download Dialog Box", "body": "<p>I have created a basic <code>CHtmlView</code> in an MDI application, that I can use to navigate to Winrar downloading link for example (<a href=\"https://www.win-rar.com/predownload.html?&amp;L=0&amp;Version=32bit\" rel=\"nofollow noreferrer\">https://www.win-rar.com/predownload.html?&amp;L=0&amp;Version=32bit</a>).</p>\n\n<p>Once I click on download, the following two dialog box pop out : </p>\n\n<p><img src=\"https://i.imgur.com/i19kw5Y.png\" alt=\"Example\"></p>\n\n<p>What I want to achieve is making the download happen in the background without those two dialog box showing up, Is such thing is possible? and how to achieve it.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 7, "creation_date": 1566398725, "post_id": 57594158, "comment_id": 101645725, "body": "Don&#39;t use <code>qsort</code>.  Use <code>std::sort</code> instead."}, {"owner": {"reputation": 5855, "user_id": 9060223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xCtnx.png?s=128&g=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/9060223/richard"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1566398952, "post_id": 57594158, "comment_id": 101645844, "body": "@NathanOliver Why?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1566398982, "post_id": 57594158, "comment_id": 101645854, "body": "<code>&amp;x</code> is the adress of <code>x</code>. You want to get the adress of <code>graph-&gt;edge[0]</code> ... the rest I&#39;ll leave to you. In the past I became increasingly unsure about votes as typo, though I&#39;ll just vote and see who agrees or not"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1566398984, "post_id": 57594158, "comment_id": 101645858, "body": "@Richard because it is type safe and possibly more efficient"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1566399081, "post_id": 57594158, "comment_id": 101645914, "body": "First, <code>qsort</code> does not use the type system like <code>std::sort</code> does.  Second, <code>std::sort</code> can be used with functors, lambdas and functions unlike <code>qsort</code>.  Third, <code>qsort</code> has worst case <code>O(N^2)</code> comparisons while <code>std::sort</code> is <code>O(NlogN)</code>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1566399158, "post_id": 57594158, "comment_id": 101645961, "body": "Also <code>qsort</code> is not guaranteed to work if you&#39;re sorting a non-POD type.  See the <a href=\"https://en.cppreference.com/w/cpp/algorithm/qsort\" rel=\"nofollow noreferrer\">info here</a>, and read what happens if the type being sorted is not a <code>TrivialType</code>."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1566400370, "post_id": 57594158, "comment_id": 101646678, "body": "@Richard <code>qsort</code> vs <code>std::sort</code> is <i>the</i> classical example of templated code being faster than code using function pointers. <a href=\"https://martin-ueding.de/articles/qsort-vs-std-sort/index.html\" rel=\"nofollow noreferrer\">martin-ueding.de/articles/qsort-vs-std-sort/index.html</a>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1566400657, "post_id": 57594158, "comment_id": 101646832, "body": "<code>std::sort(graph-&gt;edge.begin(), graph-&gt;edge.end(), myComparatorFunction);</code>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1566402120, "post_id": 57594158, "comment_id": 101647601, "body": "@MaxLanghof <i>&quot;The main point is that the C++ version is way faster than the C version&quot;</i> Funny, that&#39;s not what his graphs look like to me. Perhaps he doesn&#39;t realise that 10^0 is 1?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1566402309, "post_id": 57594158, "comment_id": 101647705, "body": "@LightnessRacesinOrbit He is talking about the right half of the graph (beyond 10^4, where it&#39;s almost one full tick above 1 x 10^0, i.e. at 2 x 10^0). And he correctly observes that the profiling at low element counts is noise (look at the other graph and the code... He attempts to measure individual 10^-6 intervals, with a whopping 5 repetitions)."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1566402879, "post_id": 57594158, "comment_id": 101647979, "body": "@Max Not sure I&#39;d call 10^0.2 (1.584) <i>&quot;way faster&quot;</i> but okay maybe that&#39;s just me."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1566403590, "post_id": 57594158, "comment_id": 101648317, "body": "@LightnessRacesinOrbit Respectfully, that&#39;s not how log-scale plots work. The tick at 10^0 is 1x10^0, the next tick (not the green whisker from the green x=10^1 data point&#39;s error bar!) is 2x10^0, the next one is 3x10^0 etc. That&#39;s why the tick density increases as you approach the next decade: 8x10^0 and 9x10^0 are of course closer together on a log-scale axis than 1x10^0 and 2x10^0. The data points are just below 2x10^0, 1.9 is the correct reading. And &quot;twice as fast&quot; is &quot;way faster&quot; for me at least - that&#39;s not peanuts for such a fundamental algorithm."}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1566399052, "post_id": 57594254, "comment_id": 101645892, "body": "probably should be <code>graph-&gt;data()</code> instead, or even better not to use <code>qsort</code> in C++"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1566399098, "post_id": 57594254, "comment_id": 101645925, "body": "@Slava Good point re <code>data()</code> (though it is presumably <code>graph-&gt;edge.data()</code>)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1566399241, "post_id": 57594254, "comment_id": 101646019, "body": "Plus <code>std::sort</code> may inline function calls (unlike <code>qsort()</code>) which can be significant in some cases."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1566399578, "post_id": 57594254, "comment_id": 101646206, "body": "@Slava I&#39;ve stolen this too :)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1566401396, "post_id": 57594254, "comment_id": 101647233, "body": "No problem, my comments are not to criticize but make your answer better"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1566401880, "post_id": 57594254, "comment_id": 101647479, "body": "@Slava And that they do!"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1566402675, "post_id": 57594254, "comment_id": 101647889, "body": "To me &quot;it&#39;s worst-case algorithmic complexity, though, is required to be better than what <code>qsort</code>&#39;s is permitted to be&quot; is unclear in what you are trying to imply. Is that a disadvantage (does the average/best case suffer) or is it a benefit?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1566403003, "post_id": 57594254, "comment_id": 101648036, "body": "@MaxLanghof I&#39;m just saying <code>std::sort</code>&#39;s worst performance is better than <code>qsort</code>&#39;s worst performance, in terms of guarantees. Per Nathan: <i>&quot;<code>qsort</code> has worst case <code>O(N^2)</code> comparisons while <code>std::sort</code> is <code>O(NlogN)</code>.&quot;</i>"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1566403882, "post_id": 57594254, "comment_id": 101648438, "body": "Ok, the &quot;though&quot; makes it confusing. Also, I don&#39;t get the &quot;despite the name&quot;, but that might just be me."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1566406330, "post_id": 57594254, "comment_id": 101649492, "body": "@MaxLanghof &quot;qsort&quot; illicits thoughts of &quot;quicksort&quot;, but it may not be implemented as such."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1566406408, "post_id": 57594254, "comment_id": 101649532, "body": "@MaxLanghof I rephrased it a bit"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 5, "last_activity_date": 1566406401, "last_edit_date": 1566406401, "creation_date": 1566399002, "answer_id": 57594254, "question_id": 57594158, "link": "https://stackoverflow.com/questions/57594158/how-do-i-get-the-pointer-to-the-first-item-in-a-vector-for-qsorts-first-argumen/57594254#57594254", "title": "How do I get the pointer to the first item in a vector for qsort&#39;s first argument?", "body": "<p>Your syntax is wrong.</p>\n\n<p>Compose the expressions like so:</p>\n\n<ul>\n<li>The vector is <code>graph-&gt;edge</code>.</li>\n<li>Its first element is <code>graph-&gt;edge[0]</code>.</li>\n<li>The address of that is <code>&amp;graph-&gt;edge[0]</code>.</li>\n</ul>\n\n<p>(This could also be spelt <code>graph-&gt;edge.data()</code>, using vector's own interface more directly.)</p>\n\n<p>Your <code>graph-&gt;&amp;edge[0]</code> is just not meaningful.</p>\n\n<hr>\n\n<p>Also I recommend <code>std::sort</code> over <code>qsort</code> unless you <em>know</em> you need the latter for some reason. It's type-safe and it can take more \"things\" (e.g. capturing lambdas, and other inlineable functors).</p>\n\n<p>And, it will try to be the best sort it can be. The same is true of <code>qsort</code> (despite the name, which suggests it'd always use quicksort), but <code>std::sort</code>'s worst-case algorithmic complexity is required to be better than <code>qsort</code>'s is permitted to be.</p>\n"}], "owner": {"reputation": 5855, "user_id": 9060223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xCtnx.png?s=128&g=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/9060223/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "closed_date": 1566399454, "accepted_answer_id": 57594254, "answer_count": 1, "score": -2, "last_activity_date": 1566406401, "creation_date": 1566398668, "question_id": 57594158, "link": "https://stackoverflow.com/questions/57594158/how-do-i-get-the-pointer-to-the-first-item-in-a-vector-for-qsorts-first-argumen", "closed_reason": "Not suitable for this site", "title": "How do I get the pointer to the first item in a vector for qsort&#39;s first argument?", "body": "<p>I know that to get the pointer to the first element of a vector, you can do:</p>\n\n<pre><code>&amp;myvector[0];\n//or\n&amp;myvector.front();\n</code></pre>\n\n<p>I want to use the pointer above to insert it as the first argument for <a href=\"http://www.cplusplus.com/reference/cstdlib/qsort/\" rel=\"nofollow noreferrer\"><code>qsort</code></a>. The problem is, when I do this:</p>\n\n<pre><code>qsort(graph-&gt;&amp;edge[0], ..., ..., myComparatorFunction);\n</code></pre>\n\n<p>I get this error <code>expected unqualified-id before '&amp;' token</code>. The <code>graph</code> refers to an instance of a self-made class below:</p>\n\n<pre><code>class Graph {\npublic:\n    int V, E;\n    vector&lt;Edge&gt; edge;\n};\n</code></pre>\n\n<p>The instance is created using:</p>\n\n<pre><code>Graph* createGraph(vector&lt;Edge&gt; edge) {\n    Graph* graph = new Graph;\n    graph-&gt;edge = edge;\n    return graph;\n}\n</code></pre>\n\n<p>How do I get rid of the error while achieving what I want?</p>\n"}, {"tags": ["c++", "qt", "audio", "buffer"], "comments": [{"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 1, "creation_date": 1566398419, "post_id": 57593939, "comment_id": 101645552, "body": "Just an idea. I suppose you read and write synchronously, i.e. in the same thread (main). This may cause interruptions of reading/writing - thus you hear a segmented sound."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1566413541, "post_id": 57593939, "comment_id": 101652389, "body": "You are aware that you are printing raw audio as if it is text? The output is meaningless. I would recommend that you write down for yourself exactly how you think audio is represented, what the arguments to writeData are, the arguments to readData, and what you then print."}, {"owner": {"reputation": 57, "user_id": 11862409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c12e00e26344c4d0dfb108154846a5a0?s=128&d=identicon&r=PG&f=1", "display_name": "Ephesiel", "link": "https://stackoverflow.com/users/11862409/ephesiel"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1566457752, "post_id": 57593939, "comment_id": 101663810, "body": "@vahancho It is indeed on one thread. I never worked with thread yet, so I will try your solution and come back for feelings afterwards."}, {"owner": {"reputation": 57, "user_id": 11862409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c12e00e26344c4d0dfb108154846a5a0?s=128&d=identicon&r=PG&f=1", "display_name": "Ephesiel", "link": "https://stackoverflow.com/users/11862409/ephesiel"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1566458652, "post_id": 57593939, "comment_id": 101664304, "body": "@vahancho Okay, so before doing this on different thread, I wrote first, then read, and I have much less lags but still have some. Any idea ?"}, {"owner": {"reputation": 57, "user_id": 11862409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c12e00e26344c4d0dfb108154846a5a0?s=128&d=identicon&r=PG&f=1", "display_name": "Ephesiel", "link": "https://stackoverflow.com/users/11862409/ephesiel"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1566462595, "post_id": 57593939, "comment_id": 101666252, "body": "@MSalters Okay, I tried with a <code>QBuffer</code> and it works well, but for my implementation, I need more than what a <code>QBuffer</code> do. But I don&#39;t see the difference between <a href=\"https://github.com/openwebos/qt/blob/master/src/corelib/io/qbuffer.cpp#L422\" rel=\"nofollow noreferrer\">QBuffer cpp file</a> and my implementation, they are very close"}], "answers": [{"tags": [], "owner": {"reputation": 57, "user_id": 11862409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c12e00e26344c4d0dfb108154846a5a0?s=128&d=identicon&r=PG&f=1", "display_name": "Ephesiel", "link": "https://stackoverflow.com/users/11862409/ephesiel"}, "is_accepted": false, "score": 0, "last_activity_date": 1566472787, "creation_date": 1566472787, "answer_id": 57608200, "question_id": 57593939, "link": "https://stackoverflow.com/questions/57593939/qt-reimplementation-of-qiodevice-to-hear-my-own-voice-in-realtime/57608200#57608200", "title": "Qt - Reimplementation of QIODevice to hear my own voice in realtime", "body": "<p>So after some trials, It seems that using a <code>QBuffer</code> can replace my <code>AudioBuffer</code> in this case.</p>\n\n<p>Then, be careful because if you read and write at the same time in the same thread, it will cause some lags.</p>\n\n<p>But in my case, I needed to send data to a server, then the server send the audio to every clients able to hear it. So the <code>QBuffer</code> wasn't enough.</p>\n\n<p>So here is my new implementation</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// Moving in different thread\n_audioInput-&gt;moveToThread(&amp;_inputThread);\n_audioOutput-&gt;moveToThread(&amp;_outputThread);\n\n_audioInput-&gt;start(_audioBuffer);\n_audioOutput-&gt;start(_audioBuffer);\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// .cpp\nclass AudioBuffer : public QBuffer\n{\n    Q_OBJECT\n\n  public:\n    AudioBuffer(/* Whatever you need for your server connection */);\n\n  protected:\n    /// Override the QBuffer method\n    qint64 writeData(const char* data, qint64 len) override;\n\n    /// Connect this method with the signal emit when your server send new audio\n    /// This is a string but it can be whatever you want according to your server\n    void getServerAudio(const std::string&amp; audio);\n};\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// .h\nAudioBuffer::AudioBuffer(/* Whatever you need for your server connection */)\n{\n    // Connect your server with AudioBuffer::getServerAudio\n}\n\nqint64 AudioBuffer::writeData(const char* data, qint64 len)\n{\n    // Send that the client send a new audio to the server\n    std::string audio = data;\n    // This is an example\n    sendAudioToServer(audio);\n\n    return len;\n}\n\nvoid AudioBuffer::getServerAudio(const std::string&amp; audio)\n{\n    // When you get a new audio from the server, you can hear it (so you write data into the buffer)\n    QBuffer::writeData(audio.c_str(), audio.size());\n}\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 11862409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c12e00e26344c4d0dfb108154846a5a0?s=128&d=identicon&r=PG&f=1", "display_name": "Ephesiel", "link": "https://stackoverflow.com/users/11862409/ephesiel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1566472787, "creation_date": 1566397888, "question_id": 57593939, "link": "https://stackoverflow.com/questions/57593939/qt-reimplementation-of-qiodevice-to-hear-my-own-voice-in-realtime", "title": "Qt - Reimplementation of QIODevice to hear my own voice in realtime", "body": "<p>I'm subclassing the <code>QIODevice</code> class to write and read voice via a <code>QAudioInput</code>and a <code>QAudioOutput</code> instance. But when I read it in my headphone, the sound has little cuts each few milliseconds. It gives a really bad sound and if I keep the microphone open, when I close it, the sound continue for a long time.</p>\n\n<p>In other words :</p>\n\n<ul>\n<li>I say \"AAAAAA\" in the microphone</li>\n<li>I hear \"AA - AA - AA\" in my headphone</li>\n</ul>\n\n<p>I already try to use an other <code>QIODevice</code> implementation such as <code>QFile</code> and it works well, the sound was good. It means that the problem isn't in my <code>QAudioInput</code> and <code>QAudioOutput</code> instance.</p>\n\n<p>The only thing that I do when I want to hear my voice is :</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void startrecording()\n{\n    _audioInput-&gt;start(_audioBuffer);\n    _audioOutput-&gt;start(_audioBuffer);\n    // Start the output after didn't really change the sound\n    // QTimer::singleShot(500, [this] { _audioOutput-&gt;start(_audioBuffer); });\n}\n</code></pre>\n\n<p>Now here is my <code>AudioBuffer</code> class</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// .h\nclass AudioBuffer : public QIODevice\n{\n    Q_OBJECT\n\n  public:\n    AudioBuffer();\n\n  protected:\n    qint64 writeData(const char* data, qint64 len) override;\n    qint64 readData(char* data, qint64 maxlen) override;\n\n  private:\n    static const int MAXSIZE = 1024 * 1024;\n\n    std::array&lt;char, MAXSIZE&gt; _buffer;\n    qint64                    _writePosition;\n    qint64                    _readPosition;\n    qint64                    _currentBufferLength;\n};\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// .cpp\nAudioBuffer::AudioBuffer()\n{\n    _writePosition       = 0;\n    _readPosition        = 0;\n    _currentBufferLength = 0;\n}\n\nqint64 AudioBuffer::writeData(const char* data, qint64 len)\n{\n    qDebug() &lt;&lt; \"--- writing ---\" &lt;&lt; data;\n\n    std::string content = data;\n\n    if ((_writePosition + content.size()) &gt; MAXSIZE)\n    {\n        qint64 firstData = MAXSIZE - _writePosition;\n        memcpy(&amp;_buffer[_writePosition], content.data(), firstData);\n        memcpy(&amp;_buffer[0], content.data() + firstData, content.size() - firstData);\n    }\n    else\n    {\n        memcpy(&amp;_buffer[_writePosition], content.data(), content.size());\n    }\n\n    _writePosition = (_writePosition + content.size()) % MAXSIZE;\n    _currentBufferLength += content.size();\n\n    return len;\n}\n\nqint64 AudioBuffer::readData(char* data, qint64 maxlen)\n{\n    if (_currentBufferLength &lt;= 0) return 0;\n\n    qint64 writeLen = std::min(maxlen, _currentBufferLength);\n    if ((writeLen + _readPosition) &gt; MAXSIZE)\n    {\n        qint64 firstData = MAXSIZE - _readPosition;\n        memcpy(data, &amp;_buffer[_readPosition], firstData);\n        memcpy(data + firstData, &amp;_buffer[0], writeLen - firstData);\n    }\n    else\n    {\n        memcpy(data, &amp;_buffer[_readPosition], writeLen);\n    }\n\n    qDebug() &lt;&lt; \"--- reading ---\" &lt;&lt; data;\n\n    _readPosition = (_readPosition + writeLen) % MAXSIZE;\n    _currentBufferLength -= writeLen;\n\n    return writeLen;\n}\n</code></pre>\n\n<p>Both <code>qDebug</code> data return the same output, just <code>readData</code> is less called than <code>writeData</code> but the buffer is correctly read.</p>\n\n<p>The output (without the data) is the following (for 5 seconds). i don't know if it's means something but more time passed, more <code>writeData</code> is called compare to <code>readData</code></p>\n\n<pre><code>--- writing --- x1\n--- reading --- x1\n--- writing --- x1\n--- reading --- x1\n--- writing --- x2\n--- reading --- x1\n--- writing --- x1\n--- reading --- x1\n--- writing --- x1\n--- reading --- x1\n--- writing --- x1\n--- reading --- x1\n--- writing --- x1\n--- reading --- x1\n--- writing --- x3\n--- reading --- x1\n--- writing --- x1\n--- reading --- x1\n--- writing --- x6\n--- reading --- x1\n--- writing --- x9\n--- reading --- x1\n--- writing --- x13\n--- reading --- x1\n--- writing --- x1\n--- reading --- x1\n--- writing --- x20\n--- reading --- x1\n--- writing --- x1\n--- reading --- x1\n--- writing --- x26\n--- reading --- x1\n--- writing --- x26\n--- reading --- x1\n--- writing --- x4\ninput stop\n--- reading --- x2\n</code></pre>\n"}, {"tags": ["c++", "sfml", "collision", "shapes"], "comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1566399005, "post_id": 57593756, "comment_id": 101645867, "body": "Please don&#39;t typedef pointers! That&#39;s just a bad habit coming from MS and serves for nothing but information hiding..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1566399307, "post_id": 57593756, "comment_id": 101646049, "body": "If you consider <i>round</i> planets, then I wouldn&#39;t intersect rectangles, instead, you might calculate the distance of their centers, you get an intersection if this distance is smaller than the sum of the two radii..."}, {"owner": {"reputation": 25, "user_id": 11924508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c7e9c0f7744ab2f7cfb61b42f9aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "throwawayinvisible", "link": "https://stackoverflow.com/users/11924508/throwawayinvisible"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1566399324, "post_id": 57593756, "comment_id": 101646058, "body": "Our professor always does it."}, {"owner": {"reputation": 25, "user_id": 11924508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c7e9c0f7744ab2f7cfb61b42f9aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "throwawayinvisible", "link": "https://stackoverflow.com/users/11924508/throwawayinvisible"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1566399379, "post_id": 57593756, "comment_id": 101646083, "body": "I tried with the calculation of distance and doing the radius thing, but I have failed in that case too. I looked up on internet trying to find something, and I found that code but still not getting anywhere :/"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 3, "creation_date": 1566399522, "post_id": 57593756, "comment_id": 101646178, "body": "Well, it&#39;s not uncommon that professors follow bad habits. They are profess<i>or</i>s, not profess<i>ional</i>s (in sense of developers; I admit that they are professional teachers)..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1566399672, "post_id": 57593756, "comment_id": 101646252, "body": "Distance calculation is rather simple: <code>double dx = p0.x - p1.x, dy = p0.y - p1.y; double distance = sqrt(dx*dx + dy*dy);</code>"}, {"owner": {"reputation": 25, "user_id": 11924508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c7e9c0f7744ab2f7cfb61b42f9aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "throwawayinvisible", "link": "https://stackoverflow.com/users/11924508/throwawayinvisible"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1566399732, "post_id": 57593756, "comment_id": 101646283, "body": "Will try again and see if I can adjust it. Thanks for the patience."}, {"owner": {"reputation": 25, "user_id": 11924508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c7e9c0f7744ab2f7cfb61b42f9aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "throwawayinvisible", "link": "https://stackoverflow.com/users/11924508/throwawayinvisible"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1566400484, "post_id": 57593756, "comment_id": 101646744, "body": "I have tried to create just a function that prints when the shapes are overlapped but still doesn&#39;t work in the way I would like to, I have tried to use the formula you posted here :/"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1566400915, "post_id": 57593756, "comment_id": 101646968, "body": "Cannot tell much without seeing the concrete code; but at it is totally different one, you might rather post a new question (you could leave a link here in the comments to make it easier to find)."}, {"owner": {"reputation": 25, "user_id": 11924508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c7e9c0f7744ab2f7cfb61b42f9aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "throwawayinvisible", "link": "https://stackoverflow.com/users/11924508/throwawayinvisible"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1566403710, "post_id": 57593756, "comment_id": 101648380, "body": "<a href=\"https://stackoverflow.com/questions/57595557/still-struggling-with-the-detection-of-collision-of-shapes\" title=\"still struggling with the detection of collision of shapes\">stackoverflow.com/questions/57595557/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1566404658, "post_id": 57593756, "comment_id": 101648772, "body": "See my comments on your <a href=\"https://stackoverflow.com/q/57595557/5910058\">duplicate question</a>."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1566405483, "post_id": 57593756, "comment_id": 101649169, "body": "As C++, you should prefer <i>keywords</i> (<code>nullptr</code>) over old (obsolete?) C <i>macros</i> (<code>NULL</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 11924508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c7e9c0f7744ab2f7cfb61b42f9aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "throwawayinvisible", "link": "https://stackoverflow.com/users/11924508/throwawayinvisible"}, "edited": false, "score": 0, "creation_date": 1566398530, "post_id": 57593938, "comment_id": 101645613, "body": "Thank you for the response. And yes I have good reason to, because this is how I have learnt to do things in school and I don&#39;t know other ways to handle it. And I prefer working with my own data structures than handling some libraries and not understanding where I am going to. And about the getLocalrect, i have to admit I have copied those codes from a guy on youtube where he showed how to do the detection of collision. I was trying with another way but that wasn&#39;t working :/"}, {"owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "reply_to_user": {"reputation": 25, "user_id": 11924508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c7e9c0f7744ab2f7cfb61b42f9aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "throwawayinvisible", "link": "https://stackoverflow.com/users/11924508/throwawayinvisible"}, "edited": false, "score": 3, "creation_date": 1566398968, "post_id": 57593938, "comment_id": 101645849, "body": "&quot;And I prefer working with my own data structures than handling some libraries and not understanding where I am going to&quot; -- well, the point is that you <i>learn</i> how to use those libraries ;) you will notice soon that they support you massively. The STL has been thoroughly tested and is applicable to a wide range of problems, it also takes care of memory management and provides algorithms for finding, sorting, filtering and much more. Why would you reinvent the wheel for basic C++ functionality if you could spend that time on developing a game?"}], "tags": [], "owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "is_accepted": false, "score": 3, "last_activity_date": 1566397887, "creation_date": 1566397887, "answer_id": 57593938, "question_id": 57593756, "link": "https://stackoverflow.com/questions/57593756/struggling-with-collision-detection-how-do-i-detect-the-collision-correctly/57593938#57593938", "title": "Struggling with collision detection. How do I detect the collision correctly?", "body": "<p>First, you should not build your own data structures (such as <code>ptr_list</code>) unless you have a very good reason to (or, if you're writing the code explicitly to learn about pointers and data structures, but then maybe don't mix it with collision). Instead, use the <a href=\"https://en.cppreference.com/w/cpp/container\" rel=\"nofollow noreferrer\">STL</a> -- already one thing less you have to worry about. Also <a href=\"http://bromeon.ch/articles/raii.html\" rel=\"nofollow noreferrer\">avoid <code>new</code> and <code>delete</code></a>.</p>\n\n<p>Next, make sure you understand the SFML functions you're using. <code>getLocalRect()</code> and <code>getGlobalRect()</code> return you rectangles in two different coordinate systems, you can't just add/subtract them and expect a meaningful result. Consult the SFML documentation for more clarity. Plus, you should use directly <code>sf::Rect::intersects()</code> instead of building your own.</p>\n\n<p>What you need to consider is that SFML will do an intersection check of <em>axis-aligned bounding boxes</em>, and <strong>not</strong> check if the actual rectangles intersect. This is simpler and faster than correct rectangle check, however less accurate. I would start with axis-aligned rectangles and then take it from there.</p>\n\n<p>What could also help is to separate the code that checks for overlaps (<em>collision detection</em>) and the code that reacts to it (<em>collision response</em>). The first one would be a simple bool function that doesn't modify any state, and the second then performs the necessary actions.</p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 11924508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c7e9c0f7744ab2f7cfb61b42f9aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "throwawayinvisible", "link": "https://stackoverflow.com/users/11924508/throwawayinvisible"}, "edited": false, "score": 0, "creation_date": 1566406623, "post_id": 57596052, "comment_id": 101649632, "body": "thank you so much! Can&#39;t believe that for this thing:   p2 = p1-&gt;next; I was doing the code. Thank you very much! Really!"}], "tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 0, "last_activity_date": 1566405901, "creation_date": 1566405901, "answer_id": 57596052, "question_id": 57593756, "link": "https://stackoverflow.com/questions/57593756/struggling-with-collision-detection-how-do-i-detect-the-collision-correctly/57596052#57596052", "title": "Struggling with collision detection. How do I detect the collision correctly?", "body": "<pre><code>p1 = head;\np2 = head;\n\nwhile (p1)\n{\n    while (p2)\n    {\n        // ...\n        p2 = p2-&gt;next;\n    }\n    (*)\n    p1 = p1-&gt;next;\n}\n</code></pre>\n\n<p>When the code reaches <code>(*)</code> the first time, p2 was set to <code>nullptr</code> in the inner loop; but as you don't reset it within inner loop, it will remain there for all other loop runs, thus comparing second planet in the list against none of the others any more.</p>\n\n<p>Additionally, as you initially set both pointers to head, you'll compare very first planet against itself, naturally resulting in a collision.</p>\n\n<p>The fix for both issues:</p>\n\n<pre><code>p1 = head;\nwhile (p1)\n{\n    p2 = p1-&gt;next;\n    //       ^ avoid self-comparison\n    while (p2)\n    {\n        // ...\n        p2 = p2-&gt;next;\n    }\n    p1 = p1-&gt;next;\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 11924508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c7e9c0f7744ab2f7cfb61b42f9aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "throwawayinvisible", "link": "https://stackoverflow.com/users/11924508/throwawayinvisible"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1568206827, "creation_date": 1566397071, "last_edit_date": 1568206827, "question_id": 57593756, "link": "https://stackoverflow.com/questions/57593756/struggling-with-collision-detection-how-do-i-detect-the-collision-correctly", "title": "Struggling with collision detection. How do I detect the collision correctly?", "body": "<pre><code>class ShapePlanet\n{\npublic:\n    sf::CircleShape shape;\n    sf::Vector2f planetposition;\n    int radius = 45;\n    ShapePlanet()\n    {\n        float x = rand() % 1020; //invece che 1280\n        float y = rand() % 650; //invece che 720\n        this-&gt;shape.setFillColor(sf::Color::Green);\n        this-&gt;planetposition.x = x;\n        this-&gt;planetposition.y = y;\n        this-&gt;shape.setPosition(x, y);\n    }\n};\n\nstruct Node_Planet\n{\n    ShapePlanet Planet;\n    Node_Planet* next;\n};\ntypedef Node_Planet* ptr_list;\n\nclass Planet\n{\nprivate:\n    ptr_list head;\npublic:\n    ptr_list create(int n)\n    {\n        ptr_list tmp = NULL;\n        for (int i = 0; i &lt; n; i = i + 1)\n        {\n            {\n                tmp = new Node_Planet;\n                tmp-&gt;Planet = ShapePlanet();\n                tmp-&gt;next = head;\n                head = tmp;\n            }\n            return this-&gt;head;\n        }\n\n\n        void draw(sf::RenderWindow&amp; window)\n        {\n            ptr_list p = this-&gt;head;\n            while (p != NULL)\n            {\n                window.draw(p-&gt;Planet.shape);\n                p = p-&gt;next;\n            }\n        }\n\n        void IsItOverLapped()\n        {\n            ptr_list p1 = this-&gt;head;\n            ptr_list p2 = this-&gt;head;\n            // bool collision = false;\n            sf::FloatRect shape1;\n            sf::FloatRect shape2;\n            float distance;\n            float dx;\n            float dy;\n            //float distance = std::sqrt((dx * dx) + (dy * dy));\n\n            while ((p1 != NULL))\n            {\n                //float distance = std::sqrt((dx * dx) + (dy * dy));\n                while (p2 != NULL)\n                {\n                    shape1 = p1-&gt;Planet.shape.getGlobalBounds();\n                    shape2 = p2-&gt;Planet.shape.getLocalBounds();\n                    dx = (p1-&gt;Planet.shape.getPosition().x + (shape1.width / 2)) - (p2-&gt;Planet.shape.getPosition().x + (shape2.width / 2));\n                    dy = (p1-&gt;Planet.shape.getPosition().y + (shape1.height / 2)) - (p2-&gt;Planet.shape.getPosition().y + (shape2.height / 2));\n                    distance = std::sqrt((dx * dx) + (dy * dy));\n                    if (distance &lt;= (shape1.width / 2) + (shape2.width / 2))\n                    //if (p2-&gt;Planet.shape.getGlobalBounds().intersects(p1-&gt;Planet.shape.getLocalBounds()))\n                    {\n                        std::cout &lt;&lt; \"Collision Detected\" &lt;&lt; std::endl;\n                        //p2 = p2-&gt;next;\n                        //collision = true;\n                    }\n                    else\n                    {\n                        std::cout &lt;&lt; \"No Collision Detected\" &lt;&lt; std::endl;\n                        //collision = false;\n                    }\n                    /*if (p2-&gt;Planet.shape.getLocalBounds().intersects(p1-&gt;Planet.shape.getLocalBounds()))\n                        std::cout &lt;&lt; \"collision\";\n                        std::cout &lt;&lt;'\\n'; */\n                    p2 = p2-&gt;next;\n                }\n                p1 = p1-&gt;next;\n            }\n            //return collision;\n        }\n    }\n};\n</code></pre>\n\n<p>So, I would like to be able to draw the shapes on the screen. The problem is that I struggle with the detection of collision of the shapes. If I am able to detect the collision, then I can change the position of the overlapped shape. But I am struggling with it a lot. \nI have a list of objects. And they have some charateristics as the shape, the position etc. \nI have tried also to use the if(object1.getLocalBounds.intersects(object2.getLocalbounds()) {then do something} but seems the code doesn't go in the if side. I have tried a lot of times and I really don't know how to handle this thing anymore.</p>\n"}, {"tags": ["c++", "boost-spirit-x3"], "owner": {"reputation": 588, "user_id": 9759769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/103f6c140cd1a7b04c8b8d4c04a54370?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/9759769/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1566396839, "creation_date": 1566396839, "question_id": 57593688, "link": "https://stackoverflow.com/questions/57593688/boost-spirit-x3-error-handling-with-expectations", "title": "Boost spirit x3 error handling with expectations", "body": "<p>I am working on parsing <code>.csv</code> files with spirit x3. I want to use expectations to get a detailed information on the error. Further the input should be accepted if it ends with or without a new line.</p>\n\n<p>Here is my code so far:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;vector&gt;\n#include &lt;optional&gt;\n#include &lt;boost/spirit/home/x3.hpp&gt;\n#include &lt;boost/spirit/home/x3/support/utility/error_reporting.hpp&gt;\n#include &lt;boost/spirit/home/x3/support/utility/annotate_on_success.hpp&gt;\n#include &lt;boost/fusion/include/adapt_struct.hpp&gt;\n#include &lt;boost/fusion/include/io.hpp&gt;\n\nstruct Coord\n{\n    int x;\n    int y;\n    std::optional&lt;int&gt; z;\n};\nstruct Coords : std::vector&lt;Coord&gt; {};\nBOOST_FUSION_ADAPT_STRUCT(Coord, (auto, x)(auto, y)(auto, z))\nnamespace boost::fusion::detail {\n    template&lt;typename T&gt;\n    std::ostream &amp;operator&lt;&lt;(std::ostream &amp;os, const std::optional&lt;T&gt; &amp;t) {\n        if (t)\n            return os &lt;&lt; *t;\n        else\n            return os &lt;&lt; \"N.A.\";\n    }\n}\n\nnamespace Parser {\n    namespace x3 = boost::spirit::x3;\n    namespace ascii = boost::spirit::x3::ascii;\n\n    struct error_handler\n    {\n        template&lt;typename Iterator, typename Exception, typename Context&gt;\n        x3::error_handler_result on_error(\n                Iterator&amp; first, Iterator const&amp; last, Exception const&amp; x, Context const&amp; context)\n        {\n            auto&amp; error_handler = x3::get&lt;x3::error_handler_tag&gt;(context).get();\n            std::string message = \"Error! Expecting: \" + x.which() + \" here:\";\n            error_handler(x.where(), message);\n            return x3::error_handler_result::fail;\n        }\n    };\n\n    struct CSVLine;\n    struct CSVFile;\n\n    static const auto delim = x3::rule&lt;struct Delim&gt;{} = x3::char_(',');\n    static const auto lineend = &amp;(x3::eoi | x3::eol);\n    using delim_type = std::remove_cv_t&lt;decltype(delim)&gt;;\n    using lineend_type = std::remove_cv_t&lt;decltype(lineend)&gt;;\n\n    template&lt;bool expectFirstElement&gt;\n    static inline auto line_parser()\n    {\n        if constexpr (expectFirstElement)\n            return x3::rule&lt;CSVLine, Coord&gt;{\"line\"} = x3::eps &gt; x3::int_ &gt; delim &gt; x3::int_ &gt; delim &gt; -x3::int_ &gt; lineend;\n        else\n            return x3::rule&lt;CSVLine, Coord&gt;{\"line\"} = x3::int_ &gt; delim &gt; x3::int_ &gt; delim &gt; -x3::int_ &gt; lineend;\n    }\n\n    template&lt;bool expectFirstElement&gt;\n    static inline auto csv_parser()\n    {\n        const auto line = line_parser&lt;expectFirstElement&gt;();\n        return x3::rule&lt;CSVFile, Coords&gt;{\"file\"} = (line % x3::eol) &gt;&gt; -x3::eol &gt;&gt; x3::eoi;\n    }\n\n    struct CSVLine : x3::annotate_on_success {};\n    struct CSVFile : error_handler, x3::annotate_on_success {};\n}\n\nstatic int example_conter = 1;\n\ntemplate&lt;bool expectFirstElement&gt;\nbool parse(std::string const&amp; input)\n{\n    using iterator_type = std::string::const_iterator;\n\n    iterator_type iter = input.begin();\n    iterator_type const end = input.end();\n\n    using boost::spirit::x3::with;\n    using boost::spirit::x3::error_handler_tag;\n    using error_handler_type = boost::spirit::x3::error_handler&lt;iterator_type&gt;;\n\n    error_handler_type error_handler(iter, end, std::cout);\n    const auto p = Parser::csv_parser&lt;expectFirstElement&gt;();\n    auto const parser = with&lt;error_handler_tag&gt;(std::ref(error_handler))[p];\n\n    Coords coords;\n\n    if (parse(iter, end, parser, coords))\n    {\n        if (iter != end)\n            std::cout &lt;&lt; \"Remaining unparsed: \" &lt;&lt; std::quoted(std::string(iter, end)) &lt;&lt; std::endl;\n        else\n        {\n            using boost::fusion::operator&lt;&lt;;\n\n            std::cout &lt;&lt; boost::fusion::tuple_open('[');\n            std::cout &lt;&lt; boost::fusion::tuple_close(']');\n            std::cout &lt;&lt; boost::fusion::tuple_delimiter(\", \");\n\n            std::cout &lt;&lt; \"Parsing succeeded\\n\";\n            for (auto const&amp; c : coords)\n                std::cout &lt;&lt; \"Coord: \" &lt;&lt; c &lt;&lt; '\\n';\n            std::cout.flush();\n            return true;\n        }\n    }\n    std::cout &lt;&lt; \"Parsing failed\\n\";\n    return false;\n}\n\nvoid checkParse(const std::string&amp; input)\n{\n    std::cout &lt;&lt; \"====== Example \" &lt;&lt; example_conter++ &lt;&lt; \" ======\\nInput:\\n+++++++++++++++++++++++\\n\";\n    std::cout &lt;&lt; input &lt;&lt; \"\\n+++++++++++++++++++++++\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"------ Not expecting first element ------\\n\";\n    const auto r1 = parse&lt;false&gt;(input);\n    std::cout.flush();\n    std::cout &lt;&lt; \"-------- Expecting first element --------\\n\";\n    const auto r2 = parse&lt;true&gt;(input);\n    std::cout.flush();\n\n    if (r1 != r2)\n        std::cout &lt;&lt; \"\\nFailed if expectFirstElement was \" &lt;&lt; (r1 ? \"enabled\" : \"disabled\");\n    std::cout  &lt;&lt; '\\n' &lt;&lt; std::endl;\n}\nnamespace boost::spirit::x3 {\n    template &lt;&gt; struct get_info&lt;int_type&gt; {\n        typedef std::string result_type;\n        std::string operator()(int_type const&amp;) const { return \"integral number\"; }\n    };\n    template &lt;&gt; struct get_info&lt;Parser::delim_type&gt; {\n        typedef std::string result_type;\n        std::string operator()(Parser::delim_type const&amp;) const { return \"delimiter ','\"; }\n    };\n    template &lt;&gt; struct get_info&lt;Parser::lineend_type&gt; {\n        typedef std::string result_type;\n        std::string operator()(Parser::lineend_type const&amp;) const { return \"end of line or input\"; }\n    };\n}\n\nint main()\n{\n    // New line at the end. Fails if first element of line is expected is enabled\n    checkParse(\"1,2,3\\n3,4,\\n5,6,\\n\");\n    // no detailed error message if first element of line is not expected is diabled\n    checkParse(\"1,2,3\\nx,4,\\n5,6,\\n\");\n    // missing delimiter at the end\n    checkParse(\"1,2,3\\n4,5\\n,6,7,\");\n\n    return 0;\n}\n</code></pre>\n\n<p>So either I get detailed information on the error but it fails with a new line at the end or there is no detailed error information.</p>\n\n<p>Further if the last delimiter is missing on one line, the error message displays it for the next line and it is misleading:</p>\n\n<pre><code>In line 3:\nError! Expecting: delimiter ',' here:\n,6,7,\n^_\nParsing failed\n</code></pre>\n\n<p>How can I fix the expectations to avoid these issues? And is it possible to continue on the next line if an expectation failure happened? In order to display all possible errors at once and not only the next one.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 1, "creation_date": 1566396562, "post_id": 57593570, "comment_id": 101644616, "body": "no... not at a language level for plain old data... there may be some implementations where it does, but that is way below the level of C++."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 1, "creation_date": 1566396704, "post_id": 57593570, "comment_id": 101644714, "body": "It depends. For example, it might be true for strings, where check for equality may first compare string sizes and immediately return <code>false</code> if they do not match. Lexicographical comparison might involve more operations, e.g., if compared strings start with same character sequences. You should specify the type of data."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 9, "creation_date": 1566396714, "post_id": 57593570, "comment_id": 101644722, "body": "In my experience as a student, senior students are among the most unreliable sources of information you can find, regularly mistaking their beliefs for knowledge."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1566396993, "post_id": 57593570, "comment_id": 101644919, "body": "@BenVoigt Vote for reopening, since this question does not mention comparison of integers. However, OP should specify the type of data. Otherwise, I would close it as too broad."}, {"owner": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1566397109, "post_id": 57593570, "comment_id": 101644992, "body": "@DanielLangr The answer is the same, though. To this and any other similar question that could be asked."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 1, "creation_date": 1566397118, "post_id": 57593570, "comment_id": 101644997, "body": "@DanielLangr: OP needs to understand the case for integers (which includes pointers) and then if his case is different, he&#39;ll be able to edit his question into something clear about his unique situation.  With the question as it stands, no further answer than the one about integers is possible."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1566397208, "post_id": 57593570, "comment_id": 101645062, "body": "While having a lot of seniority may seem to imply that they know what they are talking about, it&#39;s important to know that this same seniority can suggest that they trained and worked with knowledge and technology that is now outdated. As much as experience matters, keeping informed and up to date is just as important. Otherwise, the relevance of that experience decays with time (and technology evolves quickly). Edit : This goes doubly for academics, whose work tends to be narrower or more theoretical."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1566412342, "post_id": 57593570, "comment_id": 101651888, "body": "In most processors, comparing is performed by subtraction.  During the subtraction process, flags are set, such as negative result, equal or zero result, etc.  The program can then use a conditional jump instruction.  Down to the assembly language, there is no difference in speed between an equality comparison and a greater than or less than comparison.  At the microcode level, there may be, but the difference would be negligible (like on the order of nanoseconds)."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1566412471, "post_id": 57593570, "comment_id": 101651953, "body": "For equality, you could use an XOR instruction, but you still have to perform a conditional branch (unless your processor has conditional execution of instructions).  Either way, you still need some type of comparison instruction or instruction to set condition flags."}], "owner": {"reputation": 127, "user_id": 11866704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6407192245d077381439448e5b17e5?s=128&d=identicon&r=PG&f=1", "display_name": "turoo", "link": "https://stackoverflow.com/users/11866704/turoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "closed_date": 1566396672, "answer_count": 0, "score": 0, "last_activity_date": 1566398603, "creation_date": 1566396448, "last_edit_date": 1566398603, "question_id": 57593570, "link": "https://stackoverflow.com/questions/57593570/does-if-compute-faster-than-if", "closed_reason": "Duplicate", "title": "Does if == compute faster than if &lt;?", "body": "<p>I was told that <code>if ==</code> computes faster than <code>if &lt;</code> or <code>if &gt;</code> by a senior student at my school during IT extra classes. Is this true?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1566395975, "post_id": 57593394, "comment_id": 101644251, "body": "The code you posted won\u2019t work?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1566396288, "post_id": 57593394, "comment_id": 101644446, "body": "@MaxLanghof I wouldn&#39;t suggest using specializations.  Overloads work, they just need SFINAE.  function template specializations are second class citizens and don&#39;t participate in overload resolution so they should be avoided if possible."}], "owner": {"reputation": 545, "user_id": 5876995, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QwJS-Spi4Kw/AAAAAAAAAAI/AAAAAAAAAD4/E3VQfOMDLIE/photo.jpg?sz=128", "display_name": "P.G.", "link": "https://stackoverflow.com/users/5876995/p-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 1, "closed_date": 1566396370, "answer_count": 0, "score": 6, "last_activity_date": 1566396255, "creation_date": 1566395872, "last_edit_date": 1566396060, "question_id": 57593394, "link": "https://stackoverflow.com/questions/57593394/how-can-i-distinguish-between-array-and-pointer-in-function-template-specializat", "closed_reason": "Duplicate", "title": "How can I distinguish between array and pointer in function template specializations", "body": "<p>Is it even possible to have different functions called for arrays with size known at compile-time than for simple pointers?\nI have tried all tricks I know of. </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename T&gt;\nint length(const T* t) {\n    return -1;\n}\n\ntemplate&lt;typename T, int N&gt;\nint length(const T (&amp;)[N]) {\n    return N;\n}\n\n\nint main() {\n    return length(\"abc\");\n}\n</code></pre>\n\n<p>gcc gives the following error:\n</p>\n\n<pre><code>source&gt;: In function 'int main()':\n\n&lt;source&gt;:13:24: error: call of overloaded 'length(const char [4])' is ambiguous\n\n     return length(\"abc\");\n\n                        ^\n\n&lt;source&gt;:13:24: note: candidates are:\n\n&lt;source&gt;:2:5: note: int length(const T*) [with T = char]\n\n int length(const T* t) {\n\n     ^\n\n&lt;source&gt;:7:5: note: int length(const T (&amp;)[N]) [with T = char; int N = 4]\n\n int length(const T (&amp;)[N]) {\n\n     ^\n</code></pre>\n"}, {"tags": ["c#", "c++", "mschart"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11895612, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-I5YAFYoB1Ts/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rciqTVe7Wjqh5JjPA79KkUzcJc8SQ/photo.jpg?sz=128", "display_name": "Embedded Sys", "link": "https://stackoverflow.com/users/11895612/embedded-sys"}, "is_accepted": false, "score": -1, "last_activity_date": 1566459988, "creation_date": 1566459988, "answer_id": 57604418, "question_id": 57593247, "link": "https://stackoverflow.com/questions/57593247/how-to-scale-grid-values-after-zooming-in-mschart-in-c-net-or-c/57604418#57604418", "title": "How to scale grid values after zooming in MSChart in C++. Net or C#", "body": "<p>ok i solved the issue of duplicated values. I did check for the values before i zoom in using Interval</p>\n\n<pre><code>int iZoomInterval = 4;\n\nif (((dXAxisMousePosition + dXToRight) - (dXAxisMousePosition - dXToLeft)) &gt; iZoomInterval)\n    xAxis-&gt;ScaleView-&gt;Zoom(dXAxisMousePosition - dXToLeft, dXAxisMousePosition + dXToRight);\n\nif (((dYAxisMousePosition + dYToRight) - (dYAxisMousePosition - dYToLeft)) &gt; (iZoomInterval - 1))\n    yAxis-&gt;ScaleView-&gt;Zoom(dYAxisMousePosition - dYToLeft, dYAxisMousePosition + dYToRight);\n</code></pre>\n\n<p>but i have the problem that the Grid values are not the same what i have plotted</p>\n\n<p><a href=\"https://i.stack.imgur.com/b544B.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>is it possible to make the Grid value the same as the plotted line? in this example the 655 should be at the red line from Crosshair but it is a little bit above it.</p>\n"}], "owner": {"reputation": 1, "user_id": 11895612, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-I5YAFYoB1Ts/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rciqTVe7Wjqh5JjPA79KkUzcJc8SQ/photo.jpg?sz=128", "display_name": "Embedded Sys", "link": "https://stackoverflow.com/users/11895612/embedded-sys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1566459988, "creation_date": 1566395456, "last_edit_date": 1566454359, "question_id": 57593247, "link": "https://stackoverflow.com/questions/57593247/how-to-scale-grid-values-after-zooming-in-mschart-in-c-net-or-c", "title": "How to scale grid values after zooming in MSChart in C++. Net or C#", "body": "<p>i am using MSChart in VC++.net and my problem is that the zooming function showing double values (the same value twice) and the grid values are not the same of the data that i plotted (the function missed some values).</p>\n\n<p>P.S: it is ok if i get some tipps using C# cuz i'm programming under the .Net enviroment</p>\n\n<p>the function that i use for zoom in:</p>\n\n<pre><code>double dZoomFactor = 1.6;\n\ntry {  \n    xAxisMousePosition = xAxis-&gt;PixelPositionToValue(e-&gt;X);\n    yAxisMousePosition = yAxis-&gt;PixelPositionToValue(e-&gt;Y);\n}\ncatch (Exception^ e) {\n    xAxisMousePosition = (xAxis-&gt;ScaleView-&gt;ViewMinimum + xAxis-&gt;ScaleView-&gt;ViewMaximum) / 2.;\n    yAxisMousePosition = (yAxis-&gt;ScaleView-&gt;ViewMinimum + yAxis-&gt;ScaleView-&gt;ViewMaximum) / 2.;\n}\n\nif (e-&gt;Delta &gt; 0) // zoom in\n{\n    double dXToLeft = (xAxisMousePosition - xAxis-&gt;ScaleView-&gt;ViewMinimum) / dZoomFactor;\n    double dXToRight = (xAxis-&gt;ScaleView-&gt;ViewMaximum - xAxisMousePosition) / dZoomFactor;\n\n    double dYToLeft = (yAxisMousePosition - yAxis-&gt;ScaleView-&gt;ViewMinimum) / dZoomFactor;\n    double dYToRight = (yAxis-&gt;ScaleView-&gt;ViewMaximum - yAxisMousePosition) / dZoomFactor;\n\n    xAxis-&gt;ScaleView-&gt;Zoom(xAxisMousePosition - dXToLeft, xAxisMousePosition + dXToRight);\n    yAxis-&gt;ScaleView-&gt;Zoom(yAxisMousePosition - dYToLeft, yAxisMousePosition + dYToRight);\n}           \nelse {\n    double dXToLeft = (xAxisMousePosition - xAxis-&gt;ScaleView-&gt;ViewMinimum) * dZoomFactor;\n    double dXToRight = (xAxis-&gt;ScaleView-&gt;ViewMaximum - xAxisMousePosition) * dZoomFactor;\n\n    double dYToLeft = (yAxisMousePosition - yAxis-&gt;ScaleView-&gt;ViewMinimum) * dZoomFactor;\n    double dYToRight = (yAxis-&gt;ScaleView-&gt;ViewMaximum - yAxisMousePosition) * dZoomFactor;\n\n    bool xZoomOutFlg = ((dXToLeft + dXToRight) &gt;= (xAxis-&gt;Maximum - xAxis-&gt;Minimum));\n    bool yZoomOutFlg = ((dYToLeft + dYToRight) &gt;= (yAxis-&gt;Maximum - yAxis-&gt;Minimum));\n\n    if (xZoomOutFlg)\n            xAxis-&gt;ScaleView-&gt;ZoomReset();\n    else\n            xAxis-&gt;ScaleView-&gt;Zoom(xAxisMousePosition - dXToLeft, xAxisMousePosition + dXToRight);\n\n    if (yZoomOutFlg)\n            yAxis-&gt;ScaleView-&gt;ZoomReset();\n    else\n            yAxis-&gt;ScaleView-&gt;Zoom(yAxisMousePosition - dYToLeft, yAxisMousePosition + dYToRight);\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/zbnsJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zbnsJ.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "c++11", "nullptr"], "comments": [{"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 7, "creation_date": 1566395699, "post_id": 57593245, "comment_id": 101644042, "body": "Did you see the example on <a href=\"https://en.cppreference.com/w/cpp/types/nullptr_t\" rel=\"nofollow noreferrer\">cppreference</a>?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1566395903, "post_id": 57593245, "comment_id": 101644191, "body": "did you ever have to use <code>NULL</code> ? the answer is basically the same"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1566396587, "post_id": 57593245, "comment_id": 101644634, "body": "@formerlyknownas_463035818 <code>NULL</code> is similar to <code>nullptr</code>, they are values. <code>nullptr_t</code> is a type. I think OP is asking if it&#39;s ever useful to instantiate a new object of type <code>nullptr_t</code> other than <code>nullptr</code>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1566396745, "post_id": 57593245, "comment_id": 101644740, "body": "@Fran&#231;oisAndrieux oh I missed the &quot;other than <code>nullptr</code>&quot;. Suddenly it perfectly makes sense. Sorry, should have read more carefully."}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1566658689, "post_id": 57593245, "comment_id": 101730124, "body": "I don&#39;t think there could be useful use of explicitly declare an object of type <code>nullptr_t</code>."}], "answers": [{"tags": [], "owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "is_accepted": false, "score": 7, "last_activity_date": 1566395793, "creation_date": 1566395793, "answer_id": 57593370, "question_id": 57593245, "link": "https://stackoverflow.com/questions/57593245/are-objects-of-type-nullptr-t-ever-needed/57593370#57593370", "title": "Are objects of type nullptr_t ever needed?", "body": "<p><code>nullptr</code> is a prvalue, so you cannot take its address.  (It is not an object.)  The note is referring to cases like this:</p>\n\n<pre><code>nullptr_t n;\n</code></pre>\n\n<p>Then, <code>n</code> is an ordinary object of type <code>nullptr_t</code> so you can take its address.  This doesn\u2019t seem to be useful whatsoever, but in generic code this feature may come in somehow. </p>\n"}, {"comments": [{"owner": {"reputation": 1305, "user_id": 10955302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d217869ed810b306ce55f8cf5b6fbbfd?s=128&d=identicon&r=PG&f=1", "display_name": "embedc", "link": "https://stackoverflow.com/users/10955302/embedc"}, "edited": false, "score": 0, "creation_date": 1566552036, "post_id": 57593734, "comment_id": 101700460, "body": "What do you mean? Mu question is about objects, not about the type associated with nullptr..."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 1305, "user_id": 10955302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d217869ed810b306ce55f8cf5b6fbbfd?s=128&d=identicon&r=PG&f=1", "display_name": "embedc", "link": "https://stackoverflow.com/users/10955302/embedc"}, "edited": false, "score": 0, "creation_date": 1566552083, "post_id": 57593734, "comment_id": 101700488, "body": "@embedc: <code>bar</code>is an object. A more elaborate example would be something based on a <code>std::variant&lt;std::nullptr_t, int&gt;</code>."}, {"owner": {"reputation": 1305, "user_id": 10955302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d217869ed810b306ce55f8cf5b6fbbfd?s=128&d=identicon&r=PG&f=1", "display_name": "embedc", "link": "https://stackoverflow.com/users/10955302/embedc"}, "edited": false, "score": 0, "creation_date": 1566555207, "post_id": 57593734, "comment_id": 101702053, "body": "But why bar is useful in your example? Why did you create it?"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 7, "last_activity_date": 1566397373, "last_edit_date": 1566397373, "creation_date": 1566396978, "answer_id": 57593734, "question_id": 57593245, "link": "https://stackoverflow.com/questions/57593245/are-objects-of-type-nullptr-t-ever-needed/57593734#57593734", "title": "Are objects of type nullptr_t ever needed?", "body": "<p>It's useful in this instance, which is good enough for me:</p>\n\n<pre><code>#include &lt;cstddef&gt;\n#include &lt;iostream&gt;\n#include &lt;limits&gt;\n\nint bonus(int){return std::numeric_limits&lt;int&gt;::max();}\nint bonus(std::nullptr_t){return 0;}\n\nint main()\n{\n    std::nullptr_t bar;\n    std::cout &lt;&lt; bonus(0) &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; bonus(nullptr) &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; bonus(bar) &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>C++ is a general purpose language and it would be annoying if the type associated with <code>nullptr</code> was not part of the overload resolution system.</p>\n"}], "owner": {"reputation": 1305, "user_id": 10955302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d217869ed810b306ce55f8cf5b6fbbfd?s=128&d=identicon&r=PG&f=1", "display_name": "embedc", "link": "https://stackoverflow.com/users/10955302/embedc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1566397373, "creation_date": 1566395450, "last_edit_date": 1566395915, "question_id": 57593245, "link": "https://stackoverflow.com/questions/57593245/are-objects-of-type-nullptr-t-ever-needed", "title": "Are objects of type nullptr_t ever needed?", "body": "<p>Quoting C++11: (18.2/9)</p>\n\n<blockquote>\n  <p><code>nullptr_t</code> is defined as follows:</p>\n\n<pre><code>namespace std { typedef decltype(nullptr) nullptr_t; }\n</code></pre>\n  \n  <p>The type for\n  which <code>nullptr_t</code> is a synonym has the characteristics described in\n  3.9.1 and 4.10. [ Note: Although <code>nullptr</code>\u2019s address cannot be taken, <strong>the address of another <code>nullptr_t</code> object</strong> that is an lvalue can be taken. \u2014end note ]</p>\n</blockquote>\n\n<p>Do we ever need objects of type <code>nullptr_t</code> (other than <code>nullptr</code>)?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 647, "user_id": 1316208, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/90df3e6a20b27c31accd954b2a0093db?s=128&d=identicon&r=PG", "display_name": "user1316208", "link": "https://stackoverflow.com/users/1316208/user1316208"}, "edited": false, "score": 0, "creation_date": 1566395276, "post_id": 57593027, "comment_id": 101643747, "body": "And this doesnt work?"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1566395396, "post_id": 57593027, "comment_id": 101643824, "body": "I assume you are getting a compilation error. What is it? Please edit the question to include this."}, {"owner": {"reputation": 647, "user_id": 1316208, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/90df3e6a20b27c31accd954b2a0093db?s=128&d=identicon&r=PG", "display_name": "user1316208", "link": "https://stackoverflow.com/users/1316208/user1316208"}, "edited": false, "score": 1, "creation_date": 1566395497, "post_id": 57593027, "comment_id": 101643899, "body": "If you want some tips:   <code>double *ptr_one=old_array;</code> <code>double *ptr_two=new_array;</code> these lines do nothing, its more readable to keep refering to your arrays as old_array and new_aray;   Also its usually best to separate functions to represent single tasks, in your case to make one function for copying array and second one for printing it."}, {"owner": {"reputation": 49, "user_id": 11544307, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eswJfTm6Mws/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc2iOtO0peVQQttRqwYo_PyMhLQxg/mo/photo.jpg?sz=128", "display_name": "hi_it&#39;sme", "link": "https://stackoverflow.com/users/11544307/hi-itsme"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1566395874, "post_id": 57593027, "comment_id": 101644168, "body": "@hyde sorry, edited now"}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1566395953, "post_id": 57593027, "comment_id": 101644231, "body": "The compiler error is because you have defined <code>new_array</code> as a (single) pointer, which can be implicitly treated as a <b>one-dimensional</b> array (not two). Move to <code>main</code> as I suggested and it will work!"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 11544307, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eswJfTm6Mws/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc2iOtO0peVQQttRqwYo_PyMhLQxg/mo/photo.jpg?sz=128", "display_name": "hi_it&#39;sme", "link": "https://stackoverflow.com/users/11544307/hi-itsme"}, "edited": false, "score": 0, "creation_date": 1566396314, "post_id": 57593237, "comment_id": 101644459, "body": "Hi, there was 1 compilation error which was fixed by writing                                 &quot;cpyda(*array_one, *array_two, 6)&quot; (writing the array parameters as pointers). Thank you!"}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "reply_to_user": {"reputation": 49, "user_id": 11544307, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eswJfTm6Mws/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc2iOtO0peVQQttRqwYo_PyMhLQxg/mo/photo.jpg?sz=128", "display_name": "hi_it&#39;sme", "link": "https://stackoverflow.com/users/11544307/hi-itsme"}, "edited": false, "score": 0, "creation_date": 1566396752, "post_id": 57593237, "comment_id": 101644744, "body": "Oops! I made the same mistake as I warned you about! Adding <code>[0]</code> subscripts to the array names fixes it! As will adding the <code>*</code> prefix, as you did!"}], "tags": [], "owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "is_accepted": true, "score": 1, "last_activity_date": 1566396656, "last_edit_date": 1566396656, "creation_date": 1566395426, "answer_id": 57593237, "question_id": 57593027, "link": "https://stackoverflow.com/questions/57593027/function-that-copies-values-of-first-2d-array-into-second-using-pointers/57593237#57593237", "title": "Function that copies values of first (2D) array into second, using pointers", "body": "<p>First, I would put the array output code in <code>main()</code>, after the call to <code>cpyda(...)</code> - after all, the function is only supposed to do the actual copying ...</p>\n\n<p>Second, if your function should \"use pointers\" then really use pointers, not variables declared as pointers that are then treated as arrays ...</p>\n\n<pre><code>void cpyda(double *old_array,double *new_array,int length){\n    double *ptr_one=old_array;\n    double *ptr_two=new_array;\n\n    for(int i=0; i&lt;length; i++) {\n    //    ptr_two[i]=ptr_one[i];\n          *ptr_two++ = *ptr_one++\n    }    \n }\n\nint main(){\n   double array_one[2][3]={{1,2,3},{4,5,6}};\n   double array_two[2][3]={};\n   cpyda(array_one[0], array_two[0], 6);\n   for (int r=0; r&lt;2; r++) {\n        for (int c=0; c&lt;3; c++) cout &lt;&lt; array_two[r][c] &lt;&lt; \" \";\n        cout &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>You could also make the <code>cpyda</code> function much more succinct by not bothering to copy the pointer arguments to locals \u2026</p>\n\n<pre><code>void cpyda(double *old_array,double *new_array,int length){\n    for (int i=0; i&lt;length; i++) *new_array++ = *old_array++;\n}\n</code></pre>\n\n<p>Does this help?</p>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 1926677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/252a6d832d79aad82bba0d79cf3035f0?s=128&d=identicon&r=PG", "display_name": "erkut", "link": "https://stackoverflow.com/users/1926677/erkut"}, "is_accepted": false, "score": 0, "last_activity_date": 1566397005, "last_edit_date": 1566397005, "creation_date": 1566396467, "answer_id": 57593576, "question_id": 57593027, "link": "https://stackoverflow.com/questions/57593027/function-that-copies-values-of-first-2d-array-into-second-using-pointers/57593576#57593576", "title": "Function that copies values of first (2D) array into second, using pointers", "body": "<p>this should do</p>\n\n<pre><code>void cpyda(double** old_array, double ** new_array, int row, int column) \n{\n    for (int r = 0; r &lt; row; r++)\n    {\n        memcpy(&amp;new_array[r][0], &amp;old_array[r][0], sizeof(double) * column);\n    }\n    for (int r = 0; r &lt; row; r++)\n    {\n        for (int c = 0; c &lt; column; c++)\n        {\n            std::cout &lt;&lt; new_array[r][c] &lt;&lt; std::endl;\n        }\n    }\n}\n\nint main() {\n\n    double** arrayOne = new double*[2];\n    double** arrayTwo = new double*[2];\n\n    for (int r = 0; r &lt; 2; r++)\n    {\n        arrayOne[r] = new double[3];\n        arrayTwo[r] = new double[3];\n    }\n\n    double value = 1;\n\n    for (int r = 0; r &lt; 2; r++)\n    {\n        for (int c = 0; c &lt; 3; c++)\n        {\n            arrayOne[r][c] = value++;\n        }\n    }\n    cpyda(arrayOne, arrayTwo, 2, 3);\n\n    for (int r = 0; r &lt; 2; r++)\n    {\n        delete[] arrayOne[r];\n        delete[] arrayTwo[r];\n    }\n    delete[] arrayOne;\n    delete[] arrayTwo;\n}\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 11544307, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eswJfTm6Mws/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc2iOtO0peVQQttRqwYo_PyMhLQxg/mo/photo.jpg?sz=128", "display_name": "hi_it&#39;sme", "link": "https://stackoverflow.com/users/11544307/hi-itsme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "closed_date": 1566429883, "accepted_answer_id": 57593237, "answer_count": 2, "score": 0, "last_activity_date": 1566413802, "creation_date": 1566394798, "last_edit_date": 1566413802, "question_id": 57593027, "link": "https://stackoverflow.com/questions/57593027/function-that-copies-values-of-first-2d-array-into-second-using-pointers", "closed_reason": "Needs more focus", "title": "Function that copies values of first (2D) array into second, using pointers", "body": "<p>My task is to: </p>\n\n<blockquote>\n  <p>In your main function, define and initialise a two-dimensional double array. Define (but do not initialize) another two-dimensional double array of the same size as the first one. Write a function that copies the values of the first array into the second, this time using pointers.</p>\n</blockquote>\n\n<p>I have tried: </p>\n\n<pre><code>void cpyda(double *old_array,double *new_array,int length){\n    double *ptr_one=old_array;\n    double *ptr_two=new_array;\n\n    for(int i=0;i&lt;length;i++){\n        ptr_two[i]=ptr_one[i];\n    }\n\n    for(int r=0;r&lt;2;r++){\n        for(int c=0;c&lt;3;c++){\n            cout&lt;&lt;new_array[r][c]&lt;&lt;\" \";\n        }\n        cout&lt;&lt;endl;\n    }\n}\n\nint main(){\n   double array_one[2][3]={{1,2,3},{4,5,6}};\n   double array_two[2][3]={};\n   cpyda(array_one,array_two, 6);\n}\n</code></pre>\n\n<p>The errors I keep getting are: </p>\n\n<pre><code> function-1-4.cpp: In function 'void cpyda(double*, double*, int)':\n function-1-4.cpp:14:33: error: invalid types 'double[int]' for array \n   subscript\n              cout&lt;&lt;new_array[r][c]&lt;&lt;\" \";\n                             ^\n main-1-4.cpp: In function 'int main()':\n main-1-4.cpp:9:11: error: cannot convert 'double (*)[3]' to 'double*'\n      cpyda(array_one,array_two, 6);\n       ^~~~~~~~~\n main-1-4.cpp:4:27: note:   initializing argument 1 of 'void \n cpyda(double*, double*, int)'\n extern void cpyda(double *old_array,double *new_array,int length);\n</code></pre>\n"}, {"tags": ["c++", "class", "variables", "scope", "elaboration"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1566395415, "post_id": 57592945, "comment_id": 101643840, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Once again, bad dupe. That one is about C. This question is about C++. The distinction is <i>literally the entire point of the question</i>. Please stop."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1566395439, "post_id": 57592945, "comment_id": 101643858, "body": "Closing this as a dupe to a C question isn&#39;t a good idea. In C this is purely a matter of style."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1566395459, "post_id": 57592945, "comment_id": 101643874, "body": "@Lundin In C++ it&#39;s a matter of style. In C it&#39;s mandatory."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1566395494, "post_id": 57592945, "comment_id": 101643898, "body": "@LightnessRacesinOrbit Not if you use typedef, which is by far the most common style in C."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1566395593, "post_id": 57592945, "comment_id": 101643975, "body": "@Lundin Well, that&#39;s cheating! This question is not about using type aliases, but about using the actual names of types and the limitations/constraints/requirements thereof. Yes, you can use a type alias to bypass said requirements in C. Yes, that&#39;s extremely common. Though, as a side note, things like <code>struct tm</code> are not given this treatment so they&#39;re extremely common too - even in C++ code lol"}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1566395353, "post_id": 57593013, "comment_id": 101643790, "body": "Do note, though, that VS in particular has a propensity to warn about keyword-switching, even though <code>foo</code> is simply &quot;a class&quot; regardless of the syntax you originally used to define it!"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1566395384, "post_id": 57593013, "comment_id": 101643814, "body": "@LightnessRacesinOrbit: Doesn&#39;t MSVC fail compilation if you forward declare with a <code>struct</code> then define with a <code>class</code>?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1566395503, "post_id": 57593013, "comment_id": 101643902, "body": "With whatever is its equivalent of <code>-Werror</code> I&#39;m sure yes :)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1566395522, "post_id": 57593013, "comment_id": 101643919, "body": "(Real answer: I don&#39;t actually know; possibly!)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1566395564, "post_id": 57593013, "comment_id": 101643948, "body": "@LightnessRacesinOrbit: It certainly used to be the case; might be fixed in later compilers."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1566395646, "post_id": 57593013, "comment_id": 101644007, "body": "@LightnessRacesinOrbit At least in VS2015 it does, even with default compiler flags. Edit : Nevermind, it&#39;s a warning : &quot;warning C4099: &#39;foo&#39;: type name first seen using &#39;struct&#39; now seen using &#39;class&#39;&quot;"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1566395812, "post_id": 57593013, "comment_id": 101644125, "body": "@Bathsheba Oh yeah, it&#39;s <a href=\"https://stackoverflow.com/questions/33483623/visual-c-2015-linker-error-when-forward-declaring-a-struct-as-class#comment54757904_33483623\">worse than I thought</a> - forgot about that!"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 7, "last_activity_date": 1566404810, "last_edit_date": 1566404810, "creation_date": 1566394743, "answer_id": 57593013, "question_id": 57592945, "link": "https://stackoverflow.com/questions/57592945/why-use-struct-keyword-in-class-pointer-declaration-in-c/57593013#57593013", "title": "Why use &#39;struct&#39; keyword in class pointer declaration in C++", "body": "<p>There's rarely a reason to do this: it's a fallover from C and in this case the programmer is simply being sentimental - perhaps it's there as a quest for readability. That said, it can be used in place of forward declarations.</p>\n\n<p>In some instances you might need to disambiguate, but that's not the case here. One example where disambiguation would be necessary is </p>\n\n<pre><code>class foo{};\n\nint main()\n{\n    int foo;\n    class foo* pf1;\n    struct foo* pf2;\n}\n</code></pre>\n\n<p>Note that you can use <code>class</code> and <code>struct</code> interchangeably. You can use <code>typename</code> too which can be important when working with templates. The following is valid C++:</p>\n\n<pre><code>class foo{};\n\nint main()\n{    \n    class foo* pf1;\n    struct foo* pf2;\n    typename foo* pf3;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 5, "last_activity_date": 1566395398, "last_edit_date": 1566395398, "creation_date": 1566395037, "answer_id": 57593106, "question_id": 57592945, "link": "https://stackoverflow.com/questions/57592945/why-use-struct-keyword-in-class-pointer-declaration-in-c/57593106#57593106", "title": "Why use &#39;struct&#39; keyword in class pointer declaration in C++", "body": "<p>There are two reasons to do this.</p>\n\n<p>The first one is if we are going to introduce a new type in the scope using an elaborated name. That is in this definition</p>\n\n<pre><code>void CBar::interesting()\n{\n    struct CFoo *pCFoo;\n\n    // Go on to do something interesting with pCFoo...\n}\n</code></pre>\n\n<p>the new type <code>struct CFoo</code> is introduced in the scope provided that it is not yet declared. The pointer may point to an incomplete type because pointers themselves are complete types.</p>\n\n<p>The second one is when a name of a class is hidden by a declaration of a function or a variable. In this case we again need to use an elaborated type name.</p>\n\n<p>Here are some examples</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvoid CFoo( const class CFoo * c ) { std::cout &lt;&lt; ( const void * )c &lt;&lt; '\\n'; }\n\nclass CFoo\n{\npublic:\n    int doStuff();\n};\n\n\nint main() \n{\n    class CFoo c1;\n\n    return 0;\n}\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass CFoo\n{\npublic:\n    int doStuff();\n};\n\nvoid CFoo( void ) { std::cout &lt;&lt; \"I am hidding the class CGoo!\\n\"; }\n\nint main() \n{\n    class CFoo c1;\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1566395744, "post_id": 57593329, "comment_id": 101644079, "body": "<i>&quot;structs are essentially classes with all members public by default&quot;</i> <a href=\"https://stackoverflow.com/a/36917400/560648\">Classes are classes are classes.</a> <a href=\"https://stackoverflow.com/a/34108140/560648\">C++ does not have structs.</a> (+1 though)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1566395938, "post_id": 57593329, "comment_id": 101644223, "body": "@LightnessRacesinOrbit There was some point in time when STL functors were encouraged to be written as structs rather than classes, for some mysterious reason. Though that might very well have been in the pre C++98 days."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1566396734, "post_id": 57593329, "comment_id": 101644736, "body": "I use <code>struct</code> to define functors, usually, because they don&#39;t <i>tend</i> to have state so I only have to write <code>private:</code> rarely (as opposed to <code>public:</code> frequently) and frankly it just &quot;looks more lightweight&quot; (even though that&#39;s a lie). But they&#39;re still classes :)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1566397522, "post_id": 57593329, "comment_id": 101645257, "body": "@LightnessRacesinOrbit I think I picked it up once upon a time from the odd little book &quot;Designing components with the C++ STL&quot;, published year 2000. The author (Breymann) gives this weird rationale for writing functors as structs: &quot;The word struct saves the public label. Everything can be public, because the class has no data to be protected.&quot; Which is true, I suppose... and he called it a class even back then."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1566398620, "post_id": 57593329, "comment_id": 101645674, "body": "Hmm, if I&#39;m reading that right, his rationale is &quot;everything can be public, so you can use a struct&quot;, as if to say &quot;everything in a struct must be public&quot;. Thing is, that&#39;s not true."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1566395694, "last_edit_date": 1566395694, "creation_date": 1566395661, "answer_id": 57593329, "question_id": 57592945, "link": "https://stackoverflow.com/questions/57592945/why-use-struct-keyword-in-class-pointer-declaration-in-c/57593329#57593329", "title": "Why use &#39;struct&#39; keyword in class pointer declaration in C++", "body": "<p>In C, two different styles are the most common:</p>\n\n<ul>\n<li><code>typedef struct { ...  } s;</code> with variables declared as <code>s name;</code>.</li>\n<li><code>struct s { ... };</code> with variables declared as <code>struct s name;</code></li>\n</ul>\n\n<p>In C++ you don't need to <code>typedef</code> to omit the <code>struct</code> keyword, so the former style is far more in line with the C++ type system and classes, making it the most common style in C++.</p>\n\n<p>But then there are not many cases in C++ when you actually want to use <code>struct</code> instead of <code>class</code> in the first place - structs are essentially classes with all members public by default.</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1566404845, "post_id": 57593546, "comment_id": 101648877, "body": "Pinched that for my answer. Have an upvote for good feelings!"}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1566396358, "creation_date": 1566396358, "answer_id": 57593546, "question_id": 57592945, "link": "https://stackoverflow.com/questions/57592945/why-use-struct-keyword-in-class-pointer-declaration-in-c/57593546#57593546", "title": "Why use &#39;struct&#39; keyword in class pointer declaration in C++", "body": "<p>The reason for this may be as simple as not having to include a header file whose contents aren't needed other than for announcing that <code>CFoo</code> names a type. That's often done with a forward declaration:</p>\n\n<pre><code>class CFoo;\nvoid f(CFoo*);\n</code></pre>\n\n<p>but it can also be done on the fly:</p>\n\n<pre><code>void f(struct CFoo*);\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 8429923, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156518032793242/picture?type=large", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/8429923/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 57593013, "answer_count": 4, "score": 3, "last_activity_date": 1566404810, "creation_date": 1566394572, "last_edit_date": 1566396613, "question_id": 57592945, "link": "https://stackoverflow.com/questions/57592945/why-use-struct-keyword-in-class-pointer-declaration-in-c", "title": "Why use &#39;struct&#39; keyword in class pointer declaration in C++", "body": "<p>When and why should we use the 'struct' keyword when declaring a class pointer variable in C++?</p>\n\n<p>I've seen this in embedded environments so I suspect that this is some kind of hold over from C. I've seen plenty of explanations on when to use the 'struct' keyword when declaring a struct object as it relates to namespaces in C (<a href=\"https://stackoverflow.com/questions/7729646/using-struct-keyword-in-variable-declaration-in-c\">here</a>), but I wasn't able to find anyone talking about why one might use it when declaring a class pointer variable.</p>\n\n<p>Example, in CFoo.h:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class CFoo\n{\npublic:\n    int doStuff();\n};\n\ninline Foo::doStuff()\n{\n    return 7;\n}\n</code></pre>\n\n<p>And later in a different class:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void CBar::interesting()\n{\n    struct CFoo *pCFoo;\n\n    // Go on to do something interesting with pCFoo...\n}\n</code></pre>\n"}, {"tags": ["c++", "logical-operators"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 3, "creation_date": 1566394582, "post_id": 57592907, "comment_id": 101643271, "body": "Be careful with operator precedence. <code>&amp;&amp;</code> has higher precedence than <code>||</code>, so you want  <code>if(s1 &amp;&amp; (s2 || s3 || s4))</code>."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1566394751, "post_id": 57592907, "comment_id": 101643379, "body": "<code>s1 &amp;&amp; s2 || s3 || s4</code>, due to rules of operator precedence, is equivalent to <code>(s1 &amp;&amp; s2) || s3 || s4</code>, not to <code>s1 &amp;&amp; (s2 || s3 || s4)</code>.    Your second lot of code tests the latter."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1566394828, "post_id": 57592982, "comment_id": 101643430, "body": "@bolov I&#39;ve added that."}, {"owner": {"reputation": 642, "user_id": 10886374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0d2a16c8c437e4ca3f23f575757d99?s=128&d=identicon&r=PG&f=1", "display_name": "Nestor", "link": "https://stackoverflow.com/users/10886374/nestor"}, "edited": false, "score": 0, "creation_date": 1566394874, "post_id": 57592982, "comment_id": 101643458, "body": "One more important thing. In <code>if (a &amp;&amp; b)</code> if <code>a</code> is falve, <code>b</code> is guaranteed not to be evaluated (the same is true for <code>if (a || b)</code>, i.e. if <code>a</code> is true, <code>b</code> wont be evaluated). This is typically used in statements like <code>if (p_node &amp;&amp; p_node-&gt;something)</code>."}, {"owner": {"reputation": 58, "user_id": 11860051, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-c7hDubgjUj0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcSbApNgnbsPqLM3fJGXVD2OhXrjg/photo.jpg?sz=128", "display_name": "Ariel Hurdle", "link": "https://stackoverflow.com/users/11860051/ariel-hurdle"}, "edited": false, "score": 0, "creation_date": 1566395502, "post_id": 57592982, "comment_id": 101643900, "body": "so for example <code>if (mode = 0 (acc.balance &lt; 0 || acc.balance &lt; change)) return 0;</code>?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 58, "user_id": 11860051, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-c7hDubgjUj0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcSbApNgnbsPqLM3fJGXVD2OhXrjg/photo.jpg?sz=128", "display_name": "Ariel Hurdle", "link": "https://stackoverflow.com/users/11860051/ariel-hurdle"}, "edited": false, "score": 0, "creation_date": 1566395599, "post_id": 57592982, "comment_id": 101643980, "body": "@ArielHurdle <code>if (mode == 0 &amp;&amp; (acc.balance &lt; 0 || acc.balance &lt; change)) return 0;</code>"}, {"owner": {"reputation": 58, "user_id": 11860051, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-c7hDubgjUj0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcSbApNgnbsPqLM3fJGXVD2OhXrjg/photo.jpg?sz=128", "display_name": "Ariel Hurdle", "link": "https://stackoverflow.com/users/11860051/ariel-hurdle"}, "edited": false, "score": 0, "creation_date": 1566395667, "post_id": 57592982, "comment_id": 101644030, "body": "@NathanOliver ah yes, typo on my behalf there :) and thanks for the great answer!"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 58, "user_id": 11860051, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-c7hDubgjUj0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcSbApNgnbsPqLM3fJGXVD2OhXrjg/photo.jpg?sz=128", "display_name": "Ariel Hurdle", "link": "https://stackoverflow.com/users/11860051/ariel-hurdle"}, "edited": false, "score": 0, "creation_date": 1566395693, "post_id": 57592982, "comment_id": 101644041, "body": "@ArielHurdle No problem.  Hope it helps."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 8, "last_activity_date": 1566394890, "last_edit_date": 1566394890, "creation_date": 1566394651, "answer_id": 57592982, "question_id": 57592907, "link": "https://stackoverflow.com/questions/57592907/do-logical-operators-affect-each-other-in-a-if-statement/57592982#57592982", "title": "Do logical operators affect each other in a if statement?", "body": "<p>Due to <a href=\"https://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow noreferrer\">operator precedence</a></p>\n\n<pre><code>if(s1 &amp;&amp; s2 || s3 || s4) \n</code></pre>\n\n<p>is the same as</p>\n\n<pre><code>if((s1 &amp;&amp; s2) || s3 || s4) \n</code></pre>\n\n<p>since <code>&amp;&amp;</code> has a higher precedence than <code>||</code>.  What you want is</p>\n\n<pre><code>if(s1 &amp;&amp; (s2 || s3 || s4)) \n</code></pre>\n\n<p>which will only be true if <code>s1</code> is true and any of <code>s2</code>, <code>s3</code>, and <code>s4</code> are true.</p>\n\n<p>You are also <a href=\"https://stackoverflow.com/questions/628526/is-short-circuiting-logical-operators-mandated-and-evaluation-order\">guaranteed to have short circuiting</a> on <code>&amp;&amp;</code> as long as that is a built in operator and that means that if <code>s1</code> is false, <code>s2</code>, <code>s3</code>, and <code>s4</code> will not be evaluated.  This also happens wth <code>||</code> for built in operators and as soon as you hit a true expression the rest won't be evaluated as true or anything is true.</p>\n"}, {"tags": [], "owner": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "is_accepted": false, "score": 1, "last_activity_date": 1566394715, "creation_date": 1566394715, "answer_id": 57593008, "question_id": 57592907, "link": "https://stackoverflow.com/questions/57592907/do-logical-operators-affect-each-other-in-a-if-statement/57593008#57593008", "title": "Do logical operators affect each other in a if statement?", "body": "<p>In C++ the logical operators <code>&amp;&amp;</code> and <code>||</code> are short-circuiting - this means that the left operand of the operator is going to be evaluated first, and if the result won't be affected by doing further evaluations then it'll stop there. For example, <code>x() &amp;&amp; y()</code> will indeed only evaluate <code>y()</code> if <code>x()</code> was true, and <code>x() || y()</code> will only evaluate <code>y()</code> if <code>x()</code> was false.</p>\n\n<p>As a recommendation, you should take care to put parentheses around things to make it more clear which order of operations you intended though:</p>\n\n<pre><code>s1 &amp;&amp; (s2 || s3 || s4)\n</code></pre>\n\n<p>rather than</p>\n\n<pre><code>s1 &amp;&amp; s2 || s3 || s4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 986, "user_id": 2443300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1abd2a8240bed4e8dc963b1004a8ada?s=128&d=identicon&r=PG", "display_name": "N Alex", "link": "https://stackoverflow.com/users/2443300/n-alex"}, "is_accepted": false, "score": 1, "last_activity_date": 1566394961, "creation_date": 1566394961, "answer_id": 57593083, "question_id": 57592907, "link": "https://stackoverflow.com/questions/57592907/do-logical-operators-affect-each-other-in-a-if-statement/57593083#57593083", "title": "Do logical operators affect each other in a if statement?", "body": "<p>You need to put parenthesis on your <code>||</code> statements. So:</p>\n\n<pre><code>if(s1 &amp;&amp; (s2 || s3 || s4)) { // &lt;&lt; note the parenthesis\n  doSomething();\n}\n</code></pre>\n\n<p>is equivalent with </p>\n\n<pre><code>if (s1) {\n  if (s2 || s3 || s4) {\n     doSomething();\n  }\n}\n</code></pre>\n\n<p>This works because of <strong>Short-circuit evaluation</strong>. Basically if s1 is false, the parenthesis won't be evaluated. You can read about it <a href=\"https://en.wikipedia.org/wiki/Short-circuit_evaluation\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 58, "user_id": 11860051, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-c7hDubgjUj0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcSbApNgnbsPqLM3fJGXVD2OhXrjg/photo.jpg?sz=128", "display_name": "Ariel Hurdle", "link": "https://stackoverflow.com/users/11860051/ariel-hurdle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 57592982, "answer_count": 3, "score": 5, "last_activity_date": 1566395922, "creation_date": 1566394436, "last_edit_date": 1566395922, "question_id": 57592907, "link": "https://stackoverflow.com/questions/57592907/do-logical-operators-affect-each-other-in-a-if-statement", "title": "Do logical operators affect each other in a if statement?", "body": "<p>I have 4 statements, I only want to check statement 2-4 if statement 1 is true\nthe following is the pseudo code of what I am trying to achieve</p>\n\n<pre><code>if (statement 1) {\n  if (statement 2 or statement 3 or statement 4){\n    do something()\n  }\n}\n</code></pre>\n\n<p>I was wondering whether the following code will do the same</p>\n\n<pre><code>if(s1 &amp;&amp; s2 || s3 || s4) {\n  doSomething();\n}\n</code></pre>\n\n<p>or if I have to do it like</p>\n\n<pre><code>if (s1) {\n  if (s2 || s3 || s4) {\n     doSomething();\n  }\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 765, "user_id": 3959871, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c458e09e6b51e4c9f8533aa20429e217?s=128&d=identicon&r=PG&f=1", "display_name": "Ventu", "link": "https://stackoverflow.com/users/3959871/ventu"}, "edited": false, "score": 0, "creation_date": 1566394467, "post_id": 57592861, "comment_id": 101643192, "body": "I would assume, it&#39;s just undefined behaviour?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1566394475, "post_id": 57592861, "comment_id": 101643196, "body": "Welcome to undefined behavior land.  You can&#39;t read from an uninitialized variable."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1566394497, "post_id": 57592861, "comment_id": 101643217, "body": "<a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>Undefined behavior</i></a>. Uninitialized variables (which the <code>e</code> members will be) will have an <i>indeterminate</i> value, and using them in almost any way (including reading their indeterminate values) lead to UB."}, {"owner": {"reputation": 125, "user_id": 5792758, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2LbAKhyMVFQ/AAAAAAAAAAI/AAAAAAAABLU/gMK1_4F9FCQ/photo.jpg?sz=128", "display_name": "MatiEzelQ", "link": "https://stackoverflow.com/users/5792758/matiezelq"}, "edited": false, "score": 0, "creation_date": 1566396015, "post_id": 57592861, "comment_id": 101644280, "body": "Thanks, I won&#39;t trouble about this so."}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 5792758, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2LbAKhyMVFQ/AAAAAAAAAAI/AAAAAAAABLU/gMK1_4F9FCQ/photo.jpg?sz=128", "display_name": "MatiEzelQ", "link": "https://stackoverflow.com/users/5792758/matiezelq"}, "edited": false, "score": 0, "creation_date": 1566395990, "post_id": 57593015, "comment_id": 101644259, "body": "The default initialisation is just grabbing a space of memory, correct?"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 125, "user_id": 5792758, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2LbAKhyMVFQ/AAAAAAAAAAI/AAAAAAAABLU/gMK1_4F9FCQ/photo.jpg?sz=128", "display_name": "MatiEzelQ", "link": "https://stackoverflow.com/users/5792758/matiezelq"}, "edited": false, "score": 1, "creation_date": 1566410122, "post_id": 57593015, "comment_id": 101650981, "body": "@MatiEzelQ The default initialization for primitive types is that, yes. For classes, the constructor is run (but if you have these primitive types as member variables, and don&#39;t initialize them, then they will still be left uninitialized by their default initialization). As if it has a space in memory yet... It might or it might not. If you never use it, the compiler might even optimize it out so that it never <i>really</i> exist. If it&#39;s a local variable it might be in a CPU register. But if you ask for its address, then it will have a space in memory so you get the right address."}], "tags": [], "owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "is_accepted": true, "score": 3, "last_activity_date": 1566394748, "creation_date": 1566394748, "answer_id": 57593015, "question_id": 57592861, "link": "https://stackoverflow.com/questions/57592861/initializing-class-with-leftovers/57593015#57593015", "title": "Initializing class with leftovers", "body": "<p>Class member variables are <em>default initialized</em> if there is no explicit initialization.</p>\n\n<p>For <em>float</em> (same as integers and pointers) this means \"not initialized\". So X and Y are in effect left uninitialized (global variables are exception but it does not apply here).</p>\n\n<p>Accessing uninitialized variables is <em>Undefined behaviour</em>, in other words anything might happen, not limited to printing of garbage values.</p>\n\n<p>We could speculate what happens at assembly level, but it is generally not useful, especially without the actual assembly code and memory dump at runtime.</p>\n"}], "owner": {"reputation": 125, "user_id": 5792758, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2LbAKhyMVFQ/AAAAAAAAAAI/AAAAAAAABLU/gMK1_4F9FCQ/photo.jpg?sz=128", "display_name": "MatiEzelQ", "link": "https://stackoverflow.com/users/5792758/matiezelq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 57593015, "answer_count": 1, "score": 2, "last_activity_date": 1566394748, "creation_date": 1566394266, "question_id": 57592861, "link": "https://stackoverflow.com/questions/57592861/initializing-class-with-leftovers", "title": "Initializing class with leftovers", "body": "<p>I'm trying to figure how this two different codes work, and where is the difference about them.\nThe problem is that in both codes I have an \n<code>Entity e</code> which has no constructor made by myself(so it uses the default one). As I presume, class members X,Y should be allocated in memory but not initialised. In example 1, both variables are set to 0 but in example 2 are just leftovers.\nSo, why is this happening?</p>\n\n<p>Example 1.</p>\n\n<pre><code>int main() {\n\n    unsigned int a = 65664;//int son 4 bytes\n    unsigned short* ptr1 = (unsigned short*)&amp;a;\n\n    LOG(\"---------------------------------------------\")\n\n    Entity e;\n    std::cout &lt;&lt; e.X &lt;&lt; std::endl;\n\n    e.print();\n\n    return 0;\n}\n</code></pre>\n\n<p>Example 2.</p>\n\n<pre><code>int main() {\n\n    LOG(\"---------------------------------------------\")\n\n    Entity e;\n    std::cout &lt;&lt; e.X &lt;&lt; std::endl;\n\n    e.print();\n\n    return 0;\n}\n</code></pre>\n\n<p>I leave header and cpp files just in case:</p>\n\n<p>Header:</p>\n\n<pre><code>#ifndef THECHERNO_ENTITY_H\n#define THECHERNO_ENTITY_H\n\n\nclass Entity {\n\npublic:\n    float X,Y;\n\n\n    //Entity();\n\n    void print();\n\n};\n\n#endif //THECHERNO_ENTITY_H\n</code></pre>\n\n<p>Cpp:</p>\n\n<pre><code>#include \"Entity.h\"\n\n\nvoid Entity::print() {\n        std::cout &lt;&lt; X &lt;&lt; \", \" &lt;&lt; Y &lt;&lt; std::endl;\n}\n\n\n/*\n  Entity::Entity() {\n    X = 1;\n    Y = 1;\n}\n */\n</code></pre>\n"}, {"tags": ["c++", "bitmask"], "comments": [{"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1566394373, "post_id": 57592827, "comment_id": 101643123, "body": "<a href=\"https://en.cppreference.com/w/cpp/utility/bitset/test\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/bitset/test</a> or for oldschool simulating a bitmask in an unsigned, typically you would use shifts (instead of pow) and bitwise and/or"}, {"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 1, "creation_date": 1566395172, "post_id": 57592827, "comment_id": 101643664, "body": "<code>foomask &amp; (1&lt;&lt;x)</code> should be enough. <code>1&lt;&lt;x</code> shift the first bit <code>x</code> times to the right position, and anding it with <code>foomask</code> will be non-0 or 0 depending if the correct bit is 1 or 0 - no need to shift again. If you want a proper true or false it is enough to compare to <code>&gt; 0</code> without shifting."}], "owner": {"reputation": 5854, "user_id": 338476, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/c28b92ae5611083c82d6cde165ab29c0?s=128&d=identicon&r=PG", "display_name": "tzippy", "link": "https://stackoverflow.com/users/338476/tzippy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "closed_date": 1566394283, "answer_count": 0, "score": 0, "last_activity_date": 1566394182, "creation_date": 1566394182, "question_id": 57592827, "link": "https://stackoverflow.com/questions/57592827/checking-single-bits-in-a-bitmask-using-stdpow", "closed_reason": "Duplicate", "title": "Checking single bits in a bitmask using std::pow", "body": "<p>I have the following define to check an unsigned int bitmask for a certain bit.\nIs there a more straightforward way (that doesn't include power of calculation) which I'm not aware of?</p>\n\n<p>This is my <a href=\"https://onlinegdb.com/r1X7v6c4r\" rel=\"nofollow noreferrer\">code</a>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n\n#define IS_BIT_SET(x) (foomask &amp; (int)std::pow(2, x-1)) &gt;&gt; x-1 == 1 \n\nusing namespace std;\n\nint main()\n{\n\n    unsigned int foomask = 0xFFFFFFFF;\n    if(IS_BIT_SET(1))\n        cout &lt;&lt; \"Bit 1  is set\" &lt;&lt; endl;\n\n    if(IS_BIT_SET(32))\n        cout &lt;&lt; \"Bit 32  is set\" &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "language-lawyer", "c++17", "template-specialization", "auto"], "comments": [{"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1566394571, "post_id": 57592700, "comment_id": 101643267, "body": "what if you add <code>{}</code> - ie. <code>template &lt;auto&gt; struct foo {};</code> ?"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1566394726, "post_id": 57592700, "comment_id": 101643363, "body": "@SanderDeDycker - Compile also g++. But this seems to me almost obvious (is the answer to the first question is &quot;yes&quot;, obviously): the <code>42l</code> case is intercepted by the generic <code>foo&lt;auto&gt;</code> version."}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 7, "last_activity_date": 1566398980, "creation_date": 1566398980, "answer_id": 57594250, "question_id": 57592700, "link": "https://stackoverflow.com/questions/57592700/g-and-clang-different-behaviour-with-template-specialization-for-auto-argume/57594250#57594250", "title": "g++ and clang++ different behaviour with template specialization for auto argument", "body": "<p>Here's a slightly different repro that doesn't rely on incomplete types:</p>\n\n<pre><code>template &lt;auto&gt; struct foo { static constexpr int value = 0; };\ntemplate &lt;int I&gt; struct foo&lt;I&gt; { static constexpr int value = 1; };\n\n// ok on gcc, fires on clang which thinks foo&lt;42L&gt;::value is 1\nstatic_assert(foo&lt;42L&gt;::value == 0);\n</code></pre>\n\n<p>This is a clang bug. <code>42L</code> clearly matches <code>auto</code>, no question there. But does it match <code>int I</code>? No, from <a href=\"http://eel.is/c++draft/temp.deduct.type#19\" rel=\"noreferrer\">[temp.deduct.type]/19</a>:</p>\n\n<blockquote>\n  <p>If <code>P</code> has a form that contains <code>&lt;i&gt;</code>, and if the type of <code>i</code> differs from the type of the corresponding template parameter of the template named by the enclosing <em>simple-template-id</em>, deduction fails. If <code>P</code> has a form that contains <code>[i]</code>, and if the type of <code>i</code> is not an integral type, deduction fails. [ <em>Example:</em></p>\n\n<pre><code>template&lt;int i&gt; class A { /* ... */ };\ntemplate&lt;short s&gt; void f(A&lt;s&gt;);\nvoid k1() {\n  A&lt;1&gt; a;\n  f(a);             // error: deduction fails for conversion from int to short\n  f&lt;1&gt;(a);          // OK\n}\n\n\ntemplate&lt;const short cs&gt; class B { };\ntemplate&lt;short s&gt; void g(B&lt;s&gt;);\nvoid k2() {\n  B&lt;1&gt; b;\n  g(b);             // OK: cv-qualifiers are ignored on template parameter types\n}\n</code></pre>\n  \n  <p>\u2014 <em>end example</em> ]</p>\n</blockquote>\n\n<p>In order to see if <code>42L</code> matches the specialization, we need to <em>deduce</em> <code>int I</code> from <code>42L</code> and that fails. Hence, we stick with the primary specialization. clang does not do this. Filed <a href=\"https://bugs.llvm.org/show_bug.cgi?id=43076\" rel=\"noreferrer\">43076</a>.</p>\n"}], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 57594250, "answer_count": 1, "score": 11, "last_activity_date": 1566398980, "creation_date": 1566393748, "last_edit_date": 1566398673, "question_id": 57592700, "link": "https://stackoverflow.com/questions/57592700/g-and-clang-different-behaviour-with-template-specialization-for-auto-argume", "title": "g++ and clang++ different behaviour with template specialization for auto argument", "body": "<p>Playing with C++17 <code>auto</code> template arguments I've encountered another g++/clang++ disagreement.</p>\n\n<p>Given the following simple code</p>\n\n<pre><code>template &lt;auto&gt;\nstruct foo;\n\ntemplate &lt;int I&gt;\nstruct foo&lt;I&gt;\n { };\n\nint main ()\n {\n   foo&lt;42l&gt; f42; // &lt;--- long constant, not int constant\n\n   (void)f42; // avoid the \"unused variable\" warning\n }\n</code></pre>\n\n<p>I see that clang++ (8.0.0, by example) compile the code where g++ (9.2.0, by example) gives the following error</p>\n\n<pre><code>prog.cc: In function 'int main()':\nprog.cc:12:13: error: aggregate 'foo&lt;42&gt; f42' has incomplete type and cannot be defined\n   12 |    foo&lt;42l&gt; f42;\n      |             ^~~\n</code></pre>\n\n<p>Both compilers compile if we use a <code>int</code> constant instead of a <code>long</code> constant</p>\n\n<pre><code>  foo&lt;42&gt;  f42;  // compile with both clang++ and g++\n</code></pre>\n\n<p>So I have two questions for C++ language layers</p>\n\n<p>(1) it's legal, in C++17, specialize a template, declared receiving an <code>auto</code> template parameter, for a value of a specific type (as the <code>foo</code> specialization in my code)?</p>\n\n<p>(2) if the answer to the preceding question is \"yes\", a template specialization can intercept a value of a different (but convertible) type?</p>\n\n<p>Question (2) is almost: is right clang++ or g++?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1566393547, "post_id": 57592613, "comment_id": 101642553, "body": "Just like a class, it&#39;s name is its type."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1566393563, "post_id": 57592613, "comment_id": 101642560, "body": "What is the actual problem you need to solve? Why do you need an enum <i>value</i> as the type?` It seems to me like <code>std::tuple</code> isn&#39;t the correct choice here."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 1, "creation_date": 1566393595, "post_id": 57592613, "comment_id": 101642578, "body": "What are you trying to do here? Are you trying to make a tuple whose second parameter can only have the value <code>MyEnum_FirstItem</code>?"}, {"owner": {"reputation": 11799, "user_id": 9259778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R157q.jpg?s=128&g=1", "display_name": "Nurbol Alpysbayev", "link": "https://stackoverflow.com/users/9259778/nurbol-alpysbayev"}, "reply_to_user": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1566393613, "post_id": 57592613, "comment_id": 101642592, "body": "@Sneftel Yes, exactly"}, {"owner": {"reputation": 11799, "user_id": 9259778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R157q.jpg?s=128&g=1", "display_name": "Nurbol Alpysbayev", "link": "https://stackoverflow.com/users/9259778/nurbol-alpysbayev"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1566393632, "post_id": 57592613, "comment_id": 101642605, "body": "@Someprogrammerdude Please see the above comment"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1566393632, "post_id": 57592613, "comment_id": 101642606, "body": "All enum values in one enum are of the same type."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 3, "creation_date": 1566393701, "post_id": 57592613, "comment_id": 101642650, "body": "If the second value in the tuple is always the same, why store it at all?"}, {"owner": {"reputation": 11799, "user_id": 9259778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R157q.jpg?s=128&g=1", "display_name": "Nurbol Alpysbayev", "link": "https://stackoverflow.com/users/9259778/nurbol-alpysbayev"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1566393791, "post_id": 57592613, "comment_id": 101642715, "body": "@PaulSanders It&#39;s for documentation purposes... I came from TypeScript and I used to do that there..."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1566393807, "post_id": 57592613, "comment_id": 101642721, "body": "Again, what is the <i>actual</i> problem you need to solve? <i>Why</i> do you need to store the value as a type? Right now this is an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a> where you ask for help with a solution to an for us unknown problem. Please ask about the <i>actual</i> problem instead, and show us the solution (this) you have tried."}, {"owner": {"reputation": 11799, "user_id": 9259778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R157q.jpg?s=128&g=1", "display_name": "Nurbol Alpysbayev", "link": "https://stackoverflow.com/users/9259778/nurbol-alpysbayev"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1566393907, "post_id": 57592613, "comment_id": 101642790, "body": "@Someprogrammerdude the X is documentation purposes, please see the updated question"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1566393967, "post_id": 57592613, "comment_id": 101642835, "body": "<i>&quot;for documentation purposes&quot;</i> is not really a good description of your goal."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1566394251, "post_id": 57592613, "comment_id": 101643034, "body": "<code>template&lt;typename Y, Y N&gt; struct foo{};</code> is an exact number type. E.g. <code>foo&lt;int, 3&gt; f;</code>. No doubt the C++ standard library has a similar abstraction."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1566394299, "post_id": 57592613, "comment_id": 101643065, "body": "@Bathsheba It does; see my answer :D"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1566394344, "post_id": 57592613, "comment_id": 101643099, "body": "@LightnessRacesinOrbit: Nice. Have an upvote. Would be even better if my attempt was a suggested implementation ;-)"}], "answers": [{"comments": [{"owner": {"reputation": 765, "user_id": 3959871, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c458e09e6b51e4c9f8533aa20429e217?s=128&d=identicon&r=PG&f=1", "display_name": "Ventu", "link": "https://stackoverflow.com/users/3959871/ventu"}, "edited": false, "score": 0, "creation_date": 1566394348, "post_id": 57592701, "comment_id": 101643102, "body": "I think this has nothing to do with the question."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1566394465, "post_id": 57592701, "comment_id": 101643190, "body": "I don&#39;t........"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 765, "user_id": 3959871, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c458e09e6b51e4c9f8533aa20429e217?s=128&d=identicon&r=PG&f=1", "display_name": "Ventu", "link": "https://stackoverflow.com/users/3959871/ventu"}, "edited": false, "score": 0, "creation_date": 1566394499, "post_id": 57592701, "comment_id": 101643218, "body": "@Ventu can you eloborate? I did realize that substantial clarification has been provided in comments, but for the question as it stands this is quite relvant (even though it does maybe not adress what OP actually had in mind)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 765, "user_id": 3959871, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c458e09e6b51e4c9f8533aa20429e217?s=128&d=identicon&r=PG&f=1", "display_name": "Ventu", "link": "https://stackoverflow.com/users/3959871/ventu"}, "edited": false, "score": 1, "creation_date": 1566394566, "post_id": 57592701, "comment_id": 101643261, "body": "@Ventu I mean I even quote from the question and directly relate to it. &quot;nothing to do with the question&quot; ... sorry I shouldnt have taken this serious..."}, {"owner": {"reputation": 11799, "user_id": 9259778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R157q.jpg?s=128&g=1", "display_name": "Nurbol Alpysbayev", "link": "https://stackoverflow.com/users/9259778/nurbol-alpysbayev"}, "edited": false, "score": 0, "creation_date": 1566395089, "post_id": 57592701, "comment_id": 101643608, "body": "Thanks for the answer, it helped me a little to fix things in my head. I realize my question lacks more explanation, but you&#39;d probably agree the other answer is just on point."}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 3, "last_activity_date": 1566393750, "creation_date": 1566393750, "answer_id": 57592701, "question_id": 57592613, "link": "https://stackoverflow.com/questions/57592613/how-to-get-type-of-enum-item/57592701#57592701", "title": "How to get type of enum item?", "body": "<p>You are confusing types with instances of that type. <code>MyEnum</code> is a type, <code>MyEnum::MyEnum_FirstItem</code> is an instance of that type. Try</p>\n\n<pre><code>typedef std::tuple&lt;int, MyEnum&gt; MyTuple; \n</code></pre>\n\n<p>Then later you can have <code>MyEnum::MyEnum_FirstItem</code> as second value in a <code>MyTuple</code>.</p>\n\n<p>Just to reiterate...</p>\n\n<blockquote>\n  <p>P.S. Googled with \"get enum item type\" but found nothing..</p>\n</blockquote>\n\n<p>The type of <code>MyEnum::MyEnum_FirstItem</code> is <code>MyEnum</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1566394087, "post_id": 57592741, "comment_id": 101642914, "body": "Prefixes on enumerators of <code>enum class</code>es seem extremely redundant. Also, will that conversion even work? <code>MyConstrainedEnum_FirstItem = MyEnum_FirstItem</code>"}, {"owner": {"reputation": 11799, "user_id": 9259778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R157q.jpg?s=128&g=1", "display_name": "Nurbol Alpysbayev", "link": "https://stackoverflow.com/users/9259778/nurbol-alpysbayev"}, "edited": false, "score": 0, "creation_date": 1566394106, "post_id": 57592741, "comment_id": 101642925, "body": "This is the answer I wanted really, I mean that you are caring of my actual question, not my reasons. However I can&#39;t say c++ has elegant solution for it :) I thought it has, unlike TypeScript..."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1566394129, "post_id": 57592741, "comment_id": 101642952, "body": "@underscore_d Regarding the prefix, I agree but that wasn&#39;t me. Regarding the conversion, I addressed that."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 11799, "user_id": 9259778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R157q.jpg?s=128&g=1", "display_name": "Nurbol Alpysbayev", "link": "https://stackoverflow.com/users/9259778/nurbol-alpysbayev"}, "edited": false, "score": 0, "creation_date": 1566394147, "post_id": 57592741, "comment_id": 101642961, "body": "@NurbolAlpysbayev Do check the update - I think what you want is possible, even if I don&#39;t really agree you should be doing it (but we don&#39;t know your goal so who knows!)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1566394452, "post_id": 57592741, "comment_id": 101643176, "body": "Actually I might just take out the middle part now - what do we think?"}, {"owner": {"reputation": 11799, "user_id": 9259778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R157q.jpg?s=128&g=1", "display_name": "Nurbol Alpysbayev", "link": "https://stackoverflow.com/users/9259778/nurbol-alpysbayev"}, "edited": false, "score": 1, "creation_date": 1566394501, "post_id": 57592741, "comment_id": 101643220, "body": "Wow... Thank you Sir, I am glad that there are people like you on SO. This is exactly what I needed (and that&#39;s a pity my question has generated so much hate, instead of something constructive like your answer)"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 11799, "user_id": 9259778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R157q.jpg?s=128&g=1", "display_name": "Nurbol Alpysbayev", "link": "https://stackoverflow.com/users/9259778/nurbol-alpysbayev"}, "edited": false, "score": 0, "creation_date": 1566394603, "post_id": 57592741, "comment_id": 101643280, "body": "@NurbolAlpysbayev Downvotes are not hate. Don&#39;t take it as such. People might&#39;ve just found your question unclear."}, {"owner": {"reputation": 11799, "user_id": 9259778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R157q.jpg?s=128&g=1", "display_name": "Nurbol Alpysbayev", "link": "https://stackoverflow.com/users/9259778/nurbol-alpysbayev"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1566394671, "post_id": 57592741, "comment_id": 101643323, "body": "@SombreroChicken There is always this problem: I can make it really clear, but no one wants to read and comprehend it. You know, bikeshedding?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 11799, "user_id": 9259778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R157q.jpg?s=128&g=1", "display_name": "Nurbol Alpysbayev", "link": "https://stackoverflow.com/users/9259778/nurbol-alpysbayev"}, "edited": false, "score": 0, "creation_date": 1566394723, "post_id": 57592741, "comment_id": 101643358, "body": "@NurbolAlpysbayev there is zero hate in this post. Comments come off as rude sometimes, but thats  just because ppl try to be to the point. And dont make the mistake to interpret too much into votes. They are rather unpredictable and rather illogical sometimes"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1566394818, "post_id": 57592741, "comment_id": 101643422, "body": "To be fair your initial question was not just an XY question but also based on a false premise, and still doesn&#39;t actually explain what you&#39;re trying to do. But with a few tidbits from edits and from the comments, we got there in the end."}, {"owner": {"reputation": 11799, "user_id": 9259778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R157q.jpg?s=128&g=1", "display_name": "Nurbol Alpysbayev", "link": "https://stackoverflow.com/users/9259778/nurbol-alpysbayev"}, "edited": false, "score": 0, "creation_date": 1566394953, "post_id": 57592741, "comment_id": 101643509, "body": "@LightnessRacesinOrbit I&#39;ll take that into account (will explain better my original problems), thank you!"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 11799, "user_id": 9259778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R157q.jpg?s=128&g=1", "display_name": "Nurbol Alpysbayev", "link": "https://stackoverflow.com/users/9259778/nurbol-alpysbayev"}, "edited": false, "score": 0, "creation_date": 1566395038, "post_id": 57592741, "comment_id": 101643573, "body": "@NurbolAlpysbayev I&#39;ve just added one final edit after a little further thought."}, {"owner": {"reputation": 11799, "user_id": 9259778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R157q.jpg?s=128&g=1", "display_name": "Nurbol Alpysbayev", "link": "https://stackoverflow.com/users/9259778/nurbol-alpysbayev"}, "edited": false, "score": 0, "creation_date": 1566395467, "post_id": 57592741, "comment_id": 101643881, "body": "@LightnessRacesinOrbit YES! Your last guess is 100% correct (my English is poor unfortunately to explain in such terms). And I like the struct approach (and I do need to put them in a namespace, though I don&#39;t know yet how). I thought structs are heavy (like objects in JS where I came from), but tested just now: they are only 1 byte? Wow, that&#39;s a surprise. Another reason to thank you!"}, {"owner": {"reputation": 11799, "user_id": 9259778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R157q.jpg?s=128&g=1", "display_name": "Nurbol Alpysbayev", "link": "https://stackoverflow.com/users/9259778/nurbol-alpysbayev"}, "edited": false, "score": 0, "creation_date": 1566396142, "post_id": 57592741, "comment_id": 101644364, "body": "Ahh, nope, I can&#39;t use structs, I forgot that the tuples I am making represent data interexchange format (with JS, I am writing a Node.js addon). But, still this technique is very helpful for other cases in the future! (sorry for bothering SO much, just documenting :-) )"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 11799, "user_id": 9259778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R157q.jpg?s=128&g=1", "display_name": "Nurbol Alpysbayev", "link": "https://stackoverflow.com/users/9259778/nurbol-alpysbayev"}, "edited": false, "score": 0, "creation_date": 1566396656, "post_id": 57592741, "comment_id": 101644677, "body": "@NurbolAlpysbayev Yes completely lightweight and probably smaller than your integral constant! It would be zero bytes if it weren&#39;t for the fact that all objects must take up <i>some</i> space (so that addresses are unique)"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 6, "last_activity_date": 1566395009, "last_edit_date": 1566395009, "creation_date": 1566393918, "answer_id": 57592741, "question_id": 57592613, "link": "https://stackoverflow.com/questions/57592613/how-to-get-type-of-enum-item/57592741#57592741", "title": "How to get type of enum item?", "body": "<blockquote>\n  <p>How to get type of enum item?</p>\n</blockquote>\n\n<p>The type of <code>MyEnum_FirstItem</code> is <code>MyEnum</code>. Enumerators don't have distinct types.</p>\n\n<p>(However, keep reading&hellip;)</p>\n\n<hr>\n\n<blockquote>\n  <p>What are you trying to do here? Are you trying to make a tuple whose second parameter can only have the value MyEnum_FirstItem? \u2013 Sneftel 3 mins ago</p>\n  \n  <p>@Sneftel Yes, exactly \u2013 Nurbol Alpysbayev 2 mins ago</p>\n</blockquote>\n\n<p>&nbsp;</p>\n\n<blockquote>\n  <p>Are there any exact number types at all in c++?</p>\n</blockquote>\n\n<p>Actually, yes.</p>\n\n<p><code>std::integral_constant&lt;int, 3&gt;</code> is a <em>type</em> representing the <code>int</code> value 3. It's used in template metaprogramming.</p>\n\n<p>Perhaps you can do something with that. Because, although <code>MyEnum_FirstItem</code> isn't <em>of</em> its own type, you can wrap it up to produce such a thing, like this:</p>\n\n<pre><code>std::integral_constant&lt;MyEnum, MyEnum::MyEnum_FirstItem&gt;\n</code></pre>\n\n<p>So perhaps:</p>\n\n<pre><code>std::tuple&lt;int, std::integral_constant&lt;MyEnum, MyEnum::MyEnum_FirstItem&gt;&gt; MyTuple;\n</code></pre>\n\n<p>(<a href=\"https://en.cppreference.com/w/cpp/types/integral_constant\" rel=\"nofollow noreferrer\">ref</a>)</p>\n\n<hr>\n\n<p>I'd guess that the purpose of this enum is as a \"tag\" to discriminate various otherwise-identical tuple types, for documentation purposes (and to prevent \"cross-contamination\" in your codebase too).</p>\n\n<p>If so, I would actually just create a bunch of empty <code>struct</code>s for the job, as we would for other tagging implementations.</p>\n\n<pre><code>struct TagA {};\nstruct TagB {};\n\nstd::tuple&lt;int, TagA&gt; MyTuple;\n</code></pre>\n\n<p>It's much easier to use and to read, and you can still bung them into a namespace if you want.</p>\n"}], "owner": {"reputation": 11799, "user_id": 9259778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R157q.jpg?s=128&g=1", "display_name": "Nurbol Alpysbayev", "link": "https://stackoverflow.com/users/9259778/nurbol-alpysbayev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "closed_date": 1566394022, "accepted_answer_id": 57592741, "answer_count": 2, "score": -2, "last_activity_date": 1566400106, "creation_date": 1566393464, "last_edit_date": 1566400106, "question_id": 57592613, "link": "https://stackoverflow.com/questions/57592613/how-to-get-type-of-enum-item", "closed_reason": "Needs details or clarity", "title": "How to get type of enum item?", "body": "<p>A newbie question here...</p>\n\n<p>How to make a tuple type where an item of the tuple is a specific item of an <code>enum</code>?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>enum class MyEnum\n{\n  MyEnum_FirstItem\n};\n\ntypedef std::tuple&lt;int, MyEnum::MyEnum_FirstItem&gt; MyTuple; // constant \"MyEnum::MyEnum_FirstItem\" is not a type name\n</code></pre>\n\n<p>How do I get a type, rather than a value of an enum item?</p>\n\n<p>P.S. Googled with \"get enum item type\" but found nothing.</p>\n\n<p>I came from TypeScript and I used to do that there for documentation purposes. Also, the real question probably should be: Are there any exact number types at all in c++?</p>\n"}, {"tags": ["c++", "class", "extend"], "comments": [{"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 3, "creation_date": 1566393306, "post_id": 57592496, "comment_id": 101642376, "body": "MovingPosition is derived from Position and you are accepting the base type therefore yes, you can use a derived class when the base class is accepted, its called PolyMorphism."}], "owner": {"reputation": 77, "user_id": 8212649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7a0d9b80ff059d7b3d32ffb8e487ae1?s=128&d=identicon&r=PG&f=1", "display_name": "Toastbot", "link": "https://stackoverflow.com/users/8212649/toastbot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "closed_date": 1566393454, "answer_count": 0, "score": 3, "last_activity_date": 1566393122, "creation_date": 1566393122, "question_id": 57592496, "link": "https://stackoverflow.com/questions/57592496/is-there-a-way-to-extend-my-class-but-still-use-the-parent-class-as-reference-fo", "closed_reason": "Duplicate", "title": "Is there a way to extend my class but still use the parent class as reference for functions in c++?", "body": "<p>I made a class Position, it has a tuple inside of it (the position) and some functions. I use this class in most of my other classes.\nNow i want to create a child class MovingPosition which shall add some functions, but no new variables.\nNow i want to use my MovingPosition class at the same occasions i used my Position class before.</p>\n\n<p>This is a theoretical question to increase my knowledge, i don't really need it for an active project of mine since i can (and in this project i currently want to) code around that problem.</p>\n\n<p>Lets say i got my two classes:</p>\n\n<pre><code>class Position{\n   public:\n      tuple&lt;int,int&gt; pos;\n   ...\n};\nclass MovingPosition : public Position{\n   ...\n};\n</code></pre>\n\n<p>and lets say i have a function:</p>\n\n<pre><code>printObj(Position pos);\n</code></pre>\n\n<p>and now i want to do this:</p>\n\n<pre><code>MovingPosition mPos;\nprintObj(mPos);\n</code></pre>\n\n<p>Can i just use my MovingPosition var at the same place i ask for a Position var? And if i can't is there a way to do just that?</p>\n"}, {"tags": ["c++", "opencv", "vector"], "comments": [{"owner": {"reputation": 765, "user_id": 3959871, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c458e09e6b51e4c9f8533aa20429e217?s=128&d=identicon&r=PG&f=1", "display_name": "Ventu", "link": "https://stackoverflow.com/users/3959871/ventu"}, "edited": false, "score": 0, "creation_date": 1566393225, "post_id": 57592294, "comment_id": 101642312, "body": "I assume it is caused by your <code>while(1)</code> loop. Before, your loop was executed only once every 25ms, because the rotation blocked the loop. But now, your loop is executed much faster, and the capture happens more often and maybe your videoCapture has no new frame available.  However, I would suggest you provide a complete example, as we can only assume what <code>videoCapture</code> is or what <code>frame</code> is."}, {"owner": {"reputation": 103, "user_id": 5306467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58xEC.jpg?s=128&g=1", "display_name": "A. Neo", "link": "https://stackoverflow.com/users/5306467/a-neo"}, "reply_to_user": {"reputation": 765, "user_id": 3959871, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c458e09e6b51e4c9f8533aa20429e217?s=128&d=identicon&r=PG&f=1", "display_name": "Ventu", "link": "https://stackoverflow.com/users/3959871/ventu"}, "edited": false, "score": 0, "creation_date": 1566395114, "post_id": 57592294, "comment_id": 101643626, "body": "@Ventu It cannot be the while(1) loop because not only I can see the stream with <code>imshow(window_name, frame)</code> and nothing is wrong but there is also the <code>Sleep(250)</code> when capturing. I don&#39;t know what you mean by a complete example; I cannot add more comments or else I&#39;ll be commenting trivialities."}, {"owner": {"reputation": 765, "user_id": 3959871, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c458e09e6b51e4c9f8533aa20429e217?s=128&d=identicon&r=PG&f=1", "display_name": "Ventu", "link": "https://stackoverflow.com/users/3959871/ventu"}, "edited": false, "score": 0, "creation_date": 1566395390, "post_id": 57592294, "comment_id": 101643819, "body": "But you only sleep when <code>capturing == 1</code>. See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a> for the minimal example. Your example can not be executed by anyone."}, {"owner": {"reputation": 103, "user_id": 5306467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58xEC.jpg?s=128&g=1", "display_name": "A. Neo", "link": "https://stackoverflow.com/users/5306467/a-neo"}, "reply_to_user": {"reputation": 765, "user_id": 3959871, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c458e09e6b51e4c9f8533aa20429e217?s=128&d=identicon&r=PG&f=1", "display_name": "Ventu", "link": "https://stackoverflow.com/users/3959871/ventu"}, "edited": false, "score": 0, "creation_date": 1566397009, "post_id": 57592294, "comment_id": 101644928, "body": "Alright, I know what you mean now; I didn&#39;t expect someone would try to run the code on his machine (since you need a cam and a moving object in front of the cam to make the experience). So I&#39;ve put everything necessary to run the code in an empty project."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1566404225, "post_id": 57592294, "comment_id": 101648571, "body": "title sounds like a shallow copy vs. deep copy problem. Make sure your used matrices are not sharing data if not wanted."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 1, "creation_date": 1566404335, "post_id": 57592294, "comment_id": 101648632, "body": "so just use capturedFrame.push_back(frame.clone());"}, {"owner": {"reputation": 103, "user_id": 5306467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58xEC.jpg?s=128&g=1", "display_name": "A. Neo", "link": "https://stackoverflow.com/users/5306467/a-neo"}, "edited": false, "score": 0, "creation_date": 1567757672, "post_id": 57592294, "comment_id": 102066906, "body": "You are right ! Sorry for the late answer but suddenly my camera didn&#39;t work so we had to add an other library. I stumbled against the same actual problem and I used your frame.clone(). It works."}], "owner": {"reputation": 103, "user_id": 5306467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58xEC.jpg?s=128&g=1", "display_name": "A. Neo", "link": "https://stackoverflow.com/users/5306467/a-neo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1566407432, "creation_date": 1566392534, "last_edit_date": 1566407432, "question_id": 57592294, "link": "https://stackoverflow.com/questions/57592294/my-code-adds-the-same-frame-to-a-vector-while-it-doesnt-when-the-frame-is-being", "title": "My code adds the same frame to a vector while it doesn&#39;t when the frame is being rotated", "body": "<p>I have an extremely strange situation in which the code adds the same frame to a vector while it doesn't when there is a rotation before the addition. Let me show you :</p>\n\n<pre><code>    #include &lt;chrono&gt;\n    #include &lt;opencv2/opencv.hpp&gt;\n    #include &lt;vector&gt;\n\n    /* Write all the images in a certain directory. All the images with the same name present\n    in the directory will be overwritten. */\n    void CameraThread::writeAllFrames(std::vector&lt;cv::Mat&gt; vectorFrame) {\n        std::string path;\n        for (size_t i = 0; i &lt; vectorFrame.size(); ++i) {\n            path = \"./Images/image\" + std::to_string(i) + \".png\";\n            imwrite(path, vectorFrame.at(i));\n        }\n        capturing = 0;\n    }\n\n    int main(){\n\n    std::string window_name = \"Left Cam\";\n    cv::VideoCapture* videoCapture = new cv::VideoCapture(0);\n    cv::namedWindow(window_name, CV_WINDOW_NORMAL); //create a window for the camera\n\n    std::vector &lt;cv::Mat&gt; capturedFrame; // Vector in which the frames are going to be saved\n\n    int i = 0; // Counts how many images are saved\n    bool capturing = 0;\n    int amountFramesCaptured = 10; \n    int periodCapture = 250; // ms\n\n    while(1){\n        bool bSuccess = videoCapture-&gt;read(frame); // It captures the frame.\n        /*The next 2 lines take around 25ms. They turn the frame 90\u00b0 to the left.*/\n        cv::transpose(frame, frame);\n        cv::flip(frame, frame, 0);\n        if (capturing == 0) {\n            /* If there is no frame capture, we just display the frames in a window.*/\n            imshow(window_name, frame);\n            } else if (capturing == 1) { // We capture the frames here.\n                capturedFrame.push_back(frame);\n                Sleep(periodCapture);\n                ++i;\n                if (i == amountFramesCaptured) {\n                    writeAllFrames(capturedFrame); // Write all frames in a directory.\n                    puts(\"Frames copied in the directory.\");\n                    capturedFrame.clear(); // Clear the vector in case we recapture an other time.\n                    i = 0;\n                    capturing = 0;\n                }\n            }\n        }\n        return 0;\n    }\n</code></pre>\n\n<p>Here, we capture a frame thanks to <code>videoCapture-&gt;read(frame)</code>. I wanted to rotate the frame so i used the next two lines. Then I tested the capture of the images and it worked well (I know it because I have a motion object in front of the camera). Lastly, I decided not to rotate the frames after some tests because the rotation takes too much resources (around 25 ms) and I needed to synchronize the capture with some blinking LEDs. So I took off the two lines that permitted the rotation and that's when suddenly, the code decided to add the same frame to the vector.</p>\n\n<p>In conclusion, the writing on the hard drive works well when there is a rotation and it doesn't when there isn't (because of the vector). It confuses me so much, tell me if you see something I don't.</p>\n"}, {"tags": ["c++", "loops", "initialization", "c-strings", "strcmp"], "comments": [{"owner": {"reputation": 136, "user_id": 6412806, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fSC3n.png?s=128&g=1", "display_name": "42LeapsOfFaith", "link": "https://stackoverflow.com/users/6412806/42leapsoffaith"}, "edited": false, "score": 0, "creation_date": 1566393112, "post_id": 57592238, "comment_id": 101642235, "body": "You also need to consider the case of the user input because &quot;a&quot; is not equal to &quot;A&quot;. Use toupper(answer)."}], "answers": [{"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1566392623, "creation_date": 1566392623, "answer_id": 57592321, "question_id": 57592238, "link": "https://stackoverflow.com/questions/57592238/using-strcmp-with-string-arrays/57592321#57592321", "title": "Using strcmp with string arrays", "body": "<p><code>answer</code> is a <em>single character</em> and not a string. You can't use it as a string when passing it to functions expecting string. The call to <code>strcmp</code> should have caused the compiler to emit a warning about this.</p>\n\n<p>Compare the character directly, as e.g. <code>answer == answer1[i][0]</code>.</p>\n\n<p>Or change the type to a string (<code>std::string</code> preferably, otherwise an array of <code>char</code>).</p>\n\n<hr>\n\n<p>On an unrelated note, you don't initialize the variable <code>score</code>. That means its value will be <em>indeterminate</em> and using it (like in <code>score++</code>) will lead to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><em>undefined behavior</em></a>.</p>\n\n<p>You need to explicitly initialize it:</p>\n\n<pre><code>int score = 0, i;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1566393209, "last_edit_date": 1566393209, "creation_date": 1566392838, "answer_id": 57592400, "question_id": 57592238, "link": "https://stackoverflow.com/questions/57592238/using-strcmp-with-string-arrays/57592400#57592400", "title": "Using strcmp with string arrays", "body": "<p>The variable <code>answer</code> is declared as a one-byte character. </p>\n\n<pre><code>char answer;\n</code></pre>\n\n<p>It can not store a string.</p>\n\n<p>So you may not use the standard function <code>strcmp</code> with an object of the type <code>char</code>.</p>\n\n<p>You could just write</p>\n\n<pre><code>if ( answer == answer1[i][0] )\n</code></pre>\n\n<p>But it is better to declare the array <code>answer1</code> as</p>\n\n<pre><code>const char answer1[] = { \"ACBAD\" };\n</code></pre>\n\n<p>or</p>\n\n<pre><code>const char *answer1 = { \"ACBAD\" };\n</code></pre>\n\n<p>and use the following if statement</p>\n\n<pre><code>if ( answer == answer1[i] )\n</code></pre>\n\n<p>Pay attention to that the variable score is not initialized</p>\n\n<pre><code>int score,i;\n</code></pre>\n\n<p>You have to initialize it. And moreover the index in the loop should start from 0.</p>\n\n<pre><code>int score = 0;\nfor( int i = 0;i &lt; 5; i++ ){\n//...\n</code></pre>\n\n<p>Also it is a bad idea to use magic numbers like <code>5</code>. You can introduce a named constant. For example</p>\n\n<pre><code>const size_t N = 5;\nchar question1[N][1000] = { /*...*/ };\n//...\nfor( size_t i = 0; i &lt; N; i++ ){\n//...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1566410762, "post_id": 57594739, "comment_id": 101651250, "body": "To &quot;use <code>at</code> for bounds checking&quot; you must handle the resulting exception. I would instead suggest a <code>static_assert</code> that questions and answers have the same size."}, {"owner": {"reputation": 659, "user_id": 10870835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlVhK.png?s=128&g=1", "display_name": "Chef Gladiator", "link": "https://stackoverflow.com/users/10870835/chef-gladiator"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1566411127, "post_id": 57594739, "comment_id": 101651410, "body": "@MSalters dully noted, I was thinking to <b>not</b>  have two structures but one, keeping both answers and questions in it, and thus avoid the need for index checking ...although I think I might have already overloaded the OP&#39;s plate with the new stuff to learn."}], "tags": [], "owner": {"reputation": 659, "user_id": 10870835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlVhK.png?s=128&g=1", "display_name": "Chef Gladiator", "link": "https://stackoverflow.com/users/10870835/chef-gladiator"}, "is_accepted": false, "score": 0, "last_activity_date": 1566413332, "last_edit_date": 1566413332, "creation_date": 1566400627, "answer_id": 57594739, "question_id": 57592238, "link": "https://stackoverflow.com/questions/57592238/using-strcmp-with-string-arrays/57594739#57594739", "title": "Using strcmp with string arrays", "body": "<p>Well dear OP allow me to be blunt. That is not C++, that is a C code with iostreams. Also first question was never printed, other errors spotted etc. </p>\n\n<p>None of which is a problem, <strong>if</strong> you are willing to learn. <a href=\"https://wandbox.org/permlink/ZkX6cigRtZPVnPPU\" rel=\"nofollow noreferrer\">Here</a> is a standard C++ working version. Please compare to your code and study it.</p>\n\n<pre><code>// clang++ prog.cc -Wall -Wextra -std=c++17\n#include &lt;iostream&gt;\n#include &lt;array&gt;\n#include &lt;string_view&gt;\n\n using namespace std;\n // required for sv literal \n using namespace std::literals;\n\n // compile time std array of string literals\n // each transformed to string_veiw's\n // by using the `sv` std defined literal\n constexpr array questions {\n  \"Question #1\\n\\nWhat is the formula for the area of a square?\\n\\nA.) Area = (Side)(Side)\\nB.) Area = Side + Side\\nC.) Area = Base + Height\\nD.) Area = (pi)(Radius)(Radius)\\nAnswer: \"sv,\n  \"Question #2\\n\\nWhat is the perimeter of a rectangle with length = 4 and width =8?\\n\\nA.) Perimeter = 4 + 8 = 12 units\\nB.) Perimeter = (4)(8) = 32 units\\nC.) Perimeter = 2(4) + 2(8) = 24 units\\nD.) Perimeter = [2(4)][2(8)] = 128 units\\nAnswer: \"sv,\n  \"Question #3\\n\\nWhat is the circumference of a Circle with Diameter = 10 units?\\n\\nA.) Circumference = (pi)(5)(5) = 78.5 units\\nB.) Circumference = 2(pi)(5) = 31.41 units\\nC.) Circumference = (pi)(10)(10) = 314 units\\nD.) Circumference = 2(pi)(10) = 62.8 units\\nAnswer:\"sv,\n  \"Question #4\\n\\nWhat is the measurement for the side of a square with Perimeter = 80?\\n\\nA.) 20 units\\nB.) 80 units\\nC.) 40 units\\nD.) 50 units\\nAnswer: \"sv,\n  \"Question #5\\n\\nWhat is the radius of a circle with area = 64pi square units?\\n\\nA.) 2pi units\\nB.) 4pi units\\nC.) 6pi units\\nD.) 8pi units\\nAnswer: \"sv\n   };\n\n   // same compile time structure as questions\n   // but for answers\n   constexpr array answers {\"A\"sv,\"C\"sv,\"B\"sv,\"A\"sv,\"D\"sv};\n\n  int main()\n {\n   char answer {};\n   int score{} ;\n   // answer counter starts from 0\n   size_t j = 0;\n    // standard C++ 'sequence' loop\n    for ( auto &amp; question : questions ) {\n      cout &lt;&lt; question;\n      cin &gt;&gt; answer;\n         if( answer == answers.at[j][0] ) score++;\n         j++ ;\n    }\n      cout &lt;&lt;\"Your score is \"&lt;&lt; score;\n      return 42 ;\n  }\n</code></pre>\n\n<p>One might even claim standard C++ is simple, looking at this. One just has to use it.</p>\n\n<p><strong>APPENDIX</strong></p>\n\n<p>Better design would be to create and operate on a single structure, that will keep both answers and questions together. Some lateral thinking always helps. </p>\n\n<pre><code>// clang++ prog.cc -Wall -Wextra -std=c++17\n#include &lt;iostream&gt;\n#include &lt;array&gt;\n#include &lt;string_view&gt;\n#include &lt;utility&gt; // std::pair\n\nusing namespace std;\nusing namespace std::literals;\n\nconstexpr std::array a_q_pairs {\n    pair{ 'A', \"Question #1\\n\\nWhat is the formula for the area of a square?\\n\\nA.) Area = (Side)(Side)\\nB.) Area = Side + Side\\nC.) Area = Base + Height\\nD.) Area = (pi)(Radius)(Radius)\\nAnswer: \"sv } ,\n    pair{ 'C', \"Question #2\\n\\nWhat is the perimeter of a rectangle with length = 4 and width =8?\\n\\nA.) Perimeter = 4 + 8 = 12 units\\nB.) Perimeter = (4)(8) = 32 units\\nC.) Perimeter = 2(4) + 2(8) = 24 units\\nD.) Perimeter = [2(4)][2(8)] = 128 units\\nAnswer: \"sv},\n    pair{ 'B', \"Question #3\\n\\nWhat is the circumference of a Circle with Diameter = 10 units?\\n\\nA.) Circumference = (pi)(5)(5) = 78.5 units\\nB.) Circumference = 2(pi)(5) = 31.41 units\\nC.) Circumference = (pi)(10)(10) = 314 units\\nD.) Circumference = 2(pi)(10) = 62.8 units\\nAnswer:\"sv},\n    pair{ 'A', \"Question #4\\n\\nWhat is the measurement for the side of a square with Perimeter = 80?\\n\\nA.) 20 units\\nB.) 80 units\\nC.) 40 units\\nD.) 50 units\\nAnswer: \"sv},\n    pair{ 'D', \"Question 5\\n\\nWhat is the radius of a circle with area = 64pi square units?\\n\\nA.) 2pi units\\nB.) 4pi units\\nC.) 6pi units\\nD.) 8pi units\\nAnswer: \"sv }\n };\n\nint main()\n{\n char user_answer {};\n int score{} ;\n\n // single loop\n // requires no change on adding/removing answers/questions pairs\n // no need to code index checking\n for ( auto &amp; a_and_q : a_q_pairs ) \n {\n    auto &amp; answer = a_and_q.first ; // char\n    auto &amp; question = a_and_q.second ; // string_view\n    cout &lt;&lt; question ;\n    cin &gt;&gt; user_answer;\n    if( user_answer == answer ) score++;\n  }\n   cout &lt;&lt;\"Your score is \"&lt;&lt; score;\n   return 42 ;\n</code></pre>\n\n<p>}</p>\n\n<p>Well designed data structure and a simple algorithm operating on it. Perhaps I will dust off that <a href=\"https://en.wikipedia.org/wiki/Algorithms_%2B_Data_Structures_%3D_Programs\" rel=\"nofollow noreferrer\">Niklaus Wirth book</a>? </p>\n\n<p>Obligatory <a href=\"https://wandbox.org/permlink/cj2aH6rFpltEF9aJ\" rel=\"nofollow noreferrer\">WandBox is here</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 11738944, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Dx6MTig7W7A/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfp1itypriOt5S3jczDj3Z0LR0zsA/photo.jpg?sz=128", "display_name": "John Paolo Pancho", "link": "https://stackoverflow.com/users/11738944/john-paolo-pancho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "closed_date": 1566413832, "accepted_answer_id": 57592321, "answer_count": 3, "score": -1, "last_activity_date": 1566413332, "creation_date": 1566392367, "last_edit_date": 1566393245, "question_id": 57592238, "link": "https://stackoverflow.com/questions/57592238/using-strcmp-with-string-arrays", "closed_reason": "Needs details or clarity", "title": "Using strcmp with string arrays", "body": "<p>I'm making a program of a quiz but I'm having a problem with arrays of strings and the function strcmp</p>\n\n<p>I think I might have to use pointers but I do not know which to assign as a pointer</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;cmath&gt;\n\nusing namespace std;\nint main(){\nchar question1[5][1000]={\"Question #1\\n\\nWhat is the formula for the area of a square?\\n\\nA.) Area = (Side)(Side)\\nB.) Area = Side + Side\\nC.) Area = Base + Height\\nD.) Area = (pi)(Radius)(Radius)\\nAnswer: \",\n\"Question #2\\n\\nWhat is the perimeter of a rectangle with length = 4 and width =8?\\n\\nA.) Perimeter = 4 + 8 = 12 units\\nB.) Perimeter = (4)(8) = 32 units\\nC.) Perimeter = 2(4) + 2(8) = 24 units\\nD.) Perimeter = [2(4)][2(8)] = 128 units\\nAnswer: \",\n\"Question #3\\n\\nWhat is the circumference of a Circle with Diameter = 10 units?\\n\\nA.) Circumference = (pi)(5)(5) = 78.5 units\\nB.) Circumference = 2(pi)(5) = 31.41 units\\nC.) Circumference = (pi)(10)(10) = 314 units\\nD.) Circumference = 2(pi)(10) = 62.8 units\\nAnswer:\",\n\"Question #4\\n\\nWhat is the measurement for the side of a square with Perimeter = 80?\\n\\nA.) 20 units\\nB.) 80 units\\nC.) 40 units\\nD.) 50 units\\nAnswer: \",\n\"Question 5\\n\\nWhat is the radius of a circle with area = 64pi square units?\\n\\nA.) 2pi units\\nB.) 4pi units\\nC.) 6pi units\\nD.) 8pi units\\nAnswer: \"};\nchar answer1[5][2]={\"A\",\"C\",\"B\",\"A\",\"D\"};\nchar answer;\nint score,i;\nfor(i=1;i&lt;5;i++){\ncout&lt;&lt;question1[i];\ncin&gt;&gt;answer;\nif(strcmp(answer,answer1[i])==0)\n{\n    score++;\n}\n}\ncout&lt;&lt;\"Your score is \"&lt;&lt;score;\n}\n</code></pre>\n"}, {"tags": ["c++", "this"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1566391418, "post_id": 57591869, "comment_id": 101641132, "body": "<code>delete this</code> is almost always a red flag of you doing something wrong. And doing it in the constructor is <i>always</i> wrong, as that destroys the object before it&#39;s even properly constructed and initialized. The object will <i>always</i> be invalid."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1566391489, "post_id": 57591869, "comment_id": 101641169, "body": "You could use a <code>shared_ptr</code> for this, but this sounds like an XY problem and might not be what you really should do."}, {"owner": {"reputation": 2364, "user_id": 8349252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/224zf.png?s=128&g=1", "display_name": "Kaldrr", "link": "https://stackoverflow.com/users/8349252/kaldrr"}, "edited": false, "score": 0, "creation_date": 1566392671, "post_id": 57591869, "comment_id": 101641968, "body": "You should have a look at <code>std::set</code> and <code>std::unordered_set</code>, if you don&#39;t want duplicates of your class objects."}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 3, "last_activity_date": 1566391351, "creation_date": 1566391351, "answer_id": 57591899, "question_id": 57591869, "link": "https://stackoverflow.com/questions/57591869/can-a-class-point-itself-to-a-different-address-using-this-pointer-or-in-other-w/57591899#57591899", "title": "Can a class point itself to a different address using this pointer or in other ways?", "body": "<p>No. The definition of \"object\" in C++ is \"a region of storage\" (ish). So your object's existence is literally tied to \"where it is\". That's why <code>this</code> cannot be modified.</p>\n\n<p>You cannot move it. You can pretend to move it (using move semantics to efficiently transfer ownership of resources/data, then letting the original object fall out of scope), but you can't do that from inside the class itself.</p>\n\n<p>Do this outside, instead, in the code that manages the object's lifetime and stuff.</p>\n"}, {"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 2, "last_activity_date": 1566392754, "last_edit_date": 1566392754, "creation_date": 1566392437, "answer_id": 57592262, "question_id": 57591869, "link": "https://stackoverflow.com/questions/57591869/can-a-class-point-itself-to-a-different-address-using-this-pointer-or-in-other-w/57592262#57592262", "title": "Can a class point itself to a different address using this pointer or in other ways?", "body": "<p>Different objects cannot live in the same storage (emphasis mine):</p>\n\n<blockquote>\n  <p>[<a href=\"http://eel.is/c++draft/basic.memobj#intro.object-9\" rel=\"nofollow noreferrer\">intro.object/9</a>]:<br>\n  Unless an object is a bit-field or a subobject of zero size, the address of that object is the address of the first byte it occupies.\n  Two objects with overlapping lifetimes that are not bit-fields may have the same address if one is nested within the other, or if at least one is a subobject of zero size and they are of different types; <strong>otherwise, they have distinct addresses and occupy disjoint bytes of storage</strong>.</p>\n</blockquote>\n\n<p>Now, what you <em>actually</em> want to do is probably not have the objects <em>themselves</em> share the same storage location, but have the objects reference the same <em>data</em> (as you said yourself). This can be accomplished in several different ways, but the underlying idea is always that the objects you (or the users) work with provide an abstraction over the data. A popular scheme that falls into this pattern is <a href=\"https://en.wikipedia.org/wiki/Copy-on-write\" rel=\"nofollow noreferrer\">\"copy on write\"</a>. Also look up the <a href=\"https://en.wikipedia.org/wiki/Flyweight_pattern\" rel=\"nofollow noreferrer\">flyweight pattern</a>.</p>\n\n<p>There is no class in the standard library that does what you want directly, so you will have to implement it yourself. (Multiple <code>std::shared_ptr</code> can refer to the same data object, but there is no inbuilt way of merging them if the data objects are equivalent, or copying the data if mutation is attempted.)</p>\n"}], "owner": {"reputation": 65, "user_id": 11898039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43438bf1fb7ede24926df05ee8acf5fa?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11898039/william"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "closed_date": 1566413847, "accepted_answer_id": 57592262, "answer_count": 2, "score": 1, "last_activity_date": 1566392754, "creation_date": 1566391254, "question_id": 57591869, "link": "https://stackoverflow.com/questions/57591869/can-a-class-point-itself-to-a-different-address-using-this-pointer-or-in-other-w", "closed_reason": "Needs details or clarity", "title": "Can a class point itself to a different address using this pointer or in other ways?", "body": "<p>Can a class point itself to a different address using, e.g. this pointer? I'm looking for a way of data sharing between two objects. For example, if one object is the same as the other object by value, I would delete one object and point both to the same data to save space. The following is an example code I found online that would address my issue cleanly, but it does not compile. </p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\nclass Test\n{\nprivate:\n  int x;\npublic:\n  Test(int x = 0) { this-&gt;x = x; delete this;}\n  void change(Test *t) { this = t; }\n  void print() { cout &lt;&lt; \"x = \" &lt;&lt; x &lt;&lt; endl; }\n};\n\nint main()\n{\n  Test obj(5);\n  Test *ptr = new Test (10);\n  obj.change(ptr);\n  obj.print();\n  return 0;\n}\n</code></pre>\n\n<p>The error message is: </p>\n\n<pre><code>//~&gt;g++ -std=c++14 mm.C -o mm \n//mm.C: In member function \u2018void Test::change(Test*)\u2019:\n//mm.C:10:33: error: lvalue required as left operand of assignment\n//void change(Test *t) { this = t; }\n</code></pre>\n"}, {"tags": ["java", "c++", "swig"], "comments": [{"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1566394222, "post_id": 57591817, "comment_id": 101643014, "body": "If you put the <code>%shared_ptr</code> directive before the <code>SWIG_JAVABODY</code> macros does that fix it?"}, {"owner": {"reputation": 299, "user_id": 11824428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccf744698ba281b5dfe5cbe0bbf6a7b0?s=128&d=identicon&r=PG&f=1", "display_name": "Fifi", "link": "https://stackoverflow.com/users/11824428/fifi"}, "reply_to_user": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1566394325, "post_id": 57591817, "comment_id": 101643086, "body": "@Flexo No, it changes nothing"}], "answers": [{"tags": [], "owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "is_accepted": true, "score": 1, "last_activity_date": 1566403370, "last_edit_date": 1566403370, "creation_date": 1566402013, "answer_id": 57595140, "question_id": 57591817, "link": "https://stackoverflow.com/questions/57591817/change-getcptr-visibility-of-a-shared-ptr/57595140#57595140", "title": "Change getCPtr() visibility of a shared_ptr", "body": "<p>The first thing we need to address is why the shared_ptr macro breaks this. The answer lies in what the shared_ptr macro itself actually does. In short it's provides a bunch of extra, specialised typemaps, including the javabody typemap which supplies the getCPtr implementation amongst other things. </p>\n\n<p>The next chunk of this answer rapidly becomes a discussion on how typemap matching logic works inside SWIG. You can safely skip it if you don't really care.</p>\n\n<p>So the initial problem is that the extra typemaps being given for foo here \"beat\" the SWIGTYPE ones, because they're more specific. (SWIGTYPE is basically a low precedence wildcard stand in for any type without anything more specific). This immediately leads to an obvious idea: change SWIGTYPE to be foo in both the modifier controlling macros. That however doesn't work, because we end up with two competing <code>%typemap(javabody) foo</code>s getting supplied. And in that scenario the last one seen wins. So if we changed the interface to be more like this:</p>\n\n<pre><code>%shared_ptr(foo)\nSWIG_JAVABODY_PROXY(public, public, foo)\nSWIG_JAVABODY_TYPEWRAPPER(public, public, public, foo)\n</code></pre>\n\n<p>Then the javabody typemap with public wins out. But that might not be what we want, because after all if the shared_ptr macro is changing the javabody typemap it's probably doing that for a reason right? We could inspect both and see, but I've not actually done that right now, because there's a better solution anyway.</p>\n\n<p>If we look inside boost_shared_ptr.i it turns out there's a way given to control the modifiers of the javabody that it provides also. If we set our module to now be this:</p>\n\n<pre><code>%module module1\n#define SWIG_SHARED_PTR_TYPEMAPS(CONST, TYPE...) SWIG_SHARED_PTR_TYPEMAPS_IMPLEMENTATION(public, public, CONST, TYPE)\n\n%include &lt;boost_shared_ptr.i&gt;\n\n%shared_ptr(foo)\n\n// ...\n</code></pre>\n\n<p>Then it works as you hoped. Note that it's really important our <code>#define</code> comes before anything else has included the shared pointer header.</p>\n"}], "owner": {"reputation": 299, "user_id": 11824428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccf744698ba281b5dfe5cbe0bbf6a7b0?s=128&d=identicon&r=PG&f=1", "display_name": "Fifi", "link": "https://stackoverflow.com/users/11824428/fifi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 57595140, "answer_count": 1, "score": 0, "last_activity_date": 1566403370, "creation_date": 1566391074, "question_id": 57591817, "link": "https://stackoverflow.com/questions/57591817/change-getcptr-visibility-of-a-shared-ptr", "title": "Change getCPtr() visibility of a shared_ptr", "body": "<p>I am currently using swig to generate Java code.</p>\n\n<p>I have two swig modules (<code>module1</code> and <code>module2</code>) that will create two packages (<code>fr.package1</code> and <code>fr.package2</code>). The generated classes of <code>fr.package2</code> needs to use the generated classes of the other package. In order to achieve that, I need to change the visibility of the <code>getCPtr()</code> method to <code>public</code>.</p>\n\n<p>As written in the <a href=\"http://www.swig.org/Doc4.0/Java.html#Java_code_typemaps\" rel=\"nofollow noreferrer\">documentation</a>, I added in my interface file :</p>\n\n<pre><code>SWIG_JAVABODY_PROXY(public, public, SWIGTYPE)\nSWIG_JAVABODY_TYPEWRAPPER(public, public, public, SWIGTYPE)\n</code></pre>\n\n<p>In <code>module1</code>, I also use a <code>shared_ptr</code> for a class, like this :</p>\n\n<pre><code>%module module1\n\n%include &lt;boost_shared_ptr.i&gt;\n%inline %{\n    #include &lt;boost/shared_ptr.hpp&gt;\n%}\n%{\n    #include \"foo.h\"\n%}\nSWIG_JAVABODY_PROXY(public, public, SWIGTYPE)\nSWIG_JAVABODY_TYPEWRAPPER(public, public, public, SWIGTYPE)\n%shared_ptr(foo)\n%include \"foo.h\"\n</code></pre>\n\n<p>When I run <code>swig</code>, the generated classes have a public visibility for <code>getCPtr()</code>, except for the class <code>foo</code>.</p>\n\n<p>Why isn't it working when I use <code>%shared_ptr</code> ? Is there a way to put the visibility of <code>getCPtr()</code> to public when using <code>%shared_ptr</code> ?</p>\n"}, {"tags": ["c++", "chroot", "execl"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1566389788, "post_id": 57591366, "comment_id": 101640055, "body": "What is in <code>test2</code>? Is it a executable? A shell script? Does it link with shared libraries? What is the output of <code>ldd test2</code> ? Does those shared libraries are copied to <code>&#47;root&#47;test1</code>?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1566389800, "post_id": 57591366, "comment_id": 101640069, "body": "Have you checked what each of your system calls return? There&#39;s no failure anywhere?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 4, "creation_date": 1566389936, "post_id": 57591366, "comment_id": 101640160, "body": "Only the root user is allowed to <code>chroot</code>. Are you running as root?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1566389940, "post_id": 57591366, "comment_id": 101640163, "body": "Also note that in Linux, <code>2</code> is the error <code>ENOENT</code> meaning that <code>execl</code> can&#39;t find the program. Use e.g. <code>strerror(errno)</code> to print a string with a short explanation of the error."}, {"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1566393056, "post_id": 57591366, "comment_id": 101642187, "body": "@Steve You need to check after every call. Some functions leave <code>errno</code> untouched on success, and some reset it to a non-error state."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1566393246, "post_id": 57591366, "comment_id": 101642326, "body": "For almost all functions, the state of <code>errno</code> is <i>undefined</i> after the call, unless there&#39;s an error. You need to check what the functions actually <i>return</i> to see if they fail or succeed. Only if a function failed you should check the value of <code>errno</code>, and you should get (and possibly store in a temporary variable) as soon as possible (before another function <i>might</i> change it)."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1566394007, "post_id": 57591366, "comment_id": 101642854, "body": "What does <code>chroot</code> <b><i>return</i></b>? You need to check that it succeeds. What happens if it fails? Right now, with the code you show, you don&#39;t check for that. You need to do something like <code>if (chroot(...) == -1) { perror(&quot;chroot&quot;); return 1; }</code>"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 2, "creation_date": 1566394366, "post_id": 57591366, "comment_id": 101643119, "body": "The error is likely due to missing libraries in the chrooted directory."}, {"owner": {"reputation": 21, "user_id": 7143898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58a09bd8e8ecf311caca6d5f3c32a5a0?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/7143898/steve"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1566394495, "post_id": 57591366, "comment_id": 101643214, "body": "@Ian Abbott So how to solve it?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1566395049, "post_id": 57591366, "comment_id": 101643582, "body": "One way is to make test2 do the chroot itself (using argv arguments to tell it where to chroot to), at which point it should have already loaded its libraries."}, {"owner": {"reputation": 21, "user_id": 7143898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58a09bd8e8ecf311caca6d5f3c32a5a0?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/7143898/steve"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1566395482, "post_id": 57591366, "comment_id": 101643890, "body": "Thanks. Lack of libraries is right. I try to copy /usr /lib /lib64 and /bin/bash to /root/test1, and it can works perfectly! @Ian Abbott"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 7143898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58a09bd8e8ecf311caca6d5f3c32a5a0?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/7143898/steve"}, "is_accepted": true, "score": 1, "last_activity_date": 1566398529, "creation_date": 1566398529, "answer_id": 57594119, "question_id": 57591366, "link": "https://stackoverflow.com/questions/57591366/why-my-code-works-without-chroot-function-but-fail-with-chroot-function/57594119#57594119", "title": "Why my code works without chroot function, but fail with chroot function?", "body": "<p>Copy /usr /lib /lib64 and /bin/bash to /root/test1</p>\n"}], "owner": {"reputation": 21, "user_id": 7143898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58a09bd8e8ecf311caca6d5f3c32a5a0?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/7143898/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 57594119, "answer_count": 1, "score": 1, "last_activity_date": 1566398739, "creation_date": 1566389555, "last_edit_date": 1566398739, "question_id": 57591366, "link": "https://stackoverflow.com/questions/57591366/why-my-code-works-without-chroot-function-but-fail-with-chroot-function", "title": "Why my code works without chroot function, but fail with chroot function?", "body": "<p>I try to make my code work under <code>chroot('/root/test1')</code>, but it doesn't work correctly.</p>\n\n<p>But when I delete <code>chroot('/root/test1')</code>, and modify <code>execl(\"/test2\", \"test2\", NULL)</code> to <code>execl(\"/root/test1/test2\", \"test2\", NULL)</code>, it will work very well as expected. Why is that?</p>\n\n<p>In addition, I would like to ask that if I set <code>fp</code> redirect to <code>stdin</code>, and then use <code>execl</code> function to work another program, the child program will get input at <code>fp</code> whether or not?</p>\n\n<p>The file in '/root/test1/':</p>\n\n<pre><code>test2\ntest2.cpp\ntest3\ntest3.cpp\n</code></pre>\n\n<p>The value return by execl funtion is -1 and errno is 2.</p>\n\n<p><strong>test3.cpp</strong></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main() {\n    FILE *fp;\n    errno = 0;\n    fp = fopen(\"log.txt\", \"r\");\n    dup2(fileno(fp), fileno(stdin));\n    cout &lt;&lt; chdir(\"/root/test1\") &lt;&lt; endl;\n    cout &lt;&lt; chroot(\"/root/test1\") &lt;&lt; endl;\n\n    DIR *dir = opendir(\"/\");\n    dirent *list;\n    while ((list = readdir(dir)) != NULL) {\n        cout &lt;&lt; list -&gt; d_name &lt;&lt; \"  \";\n    }\n    cout &lt;&lt; endl;\n    closedir(dir);\n    errno = 0;\n    cout &lt;&lt; execl(\"/test2\", \"test2\", NULL) &lt;&lt; endl;\n    cout &lt;&lt; errno &lt;&lt; endl;\n    cout &lt;&lt; strerror(errno) &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p><strong>test2.cpp</strong></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;cstdio&gt;\n#include &lt;iostream&gt;\nusing namespace std;\nint main() {\n    int a,b;\n    cin &gt;&gt; a;\n    scanf(\"%d\",&amp;b);\n    cout &lt;&lt; a+b &lt;&lt; endl;\n    printf(\"%d\",a+b);\n    return 0;\n}\n</code></pre>\n\n<p><strong>log.txt</strong></p>\n\n<pre><code>111 222\n</code></pre>\n\n<p><strong>output*</strong></p>\n\n<pre><code>0\n0\n.  test3.cpp  test3  ..  test2  test2.cpp  log.txt\n-1\n2\nNo such file or directory\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "c++17", "fold", "accumulate"], "comments": [{"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 0, "creation_date": 1566389187, "post_id": 57591199, "comment_id": 101639719, "body": "You mean somenthing like <a href=\"https://en.cppreference.com/w/cpp/algorithm/reduce\" rel=\"nofollow noreferrer\"><code>reduce</code></a>?"}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "reply_to_user": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 1, "creation_date": 1566389421, "post_id": 57591199, "comment_id": 101639854, "body": "@FedericoklezCulloca reduce has the same issue."}, {"owner": {"reputation": 720, "user_id": 10696884, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TZLhm3qAv5U/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gTJ8AUH3mkzlYyEQgF0K4AqDVXLw/mo/photo.jpg?sz=128", "display_name": "Thomas Lang", "link": "https://stackoverflow.com/users/10696884/thomas-lang"}, "edited": false, "score": 2, "creation_date": 1566389647, "post_id": 57591199, "comment_id": 101639981, "body": "You could use <code>accumulate(v.begin()+1, v.end(), v[0])</code>, but ensure that v.size() &gt;0"}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "reply_to_user": {"reputation": 720, "user_id": 10696884, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TZLhm3qAv5U/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gTJ8AUH3mkzlYyEQgF0K4AqDVXLw/mo/photo.jpg?sz=128", "display_name": "Thomas Lang", "link": "https://stackoverflow.com/users/10696884/thomas-lang"}, "edited": false, "score": 0, "creation_date": 1566389920, "post_id": 57591199, "comment_id": 101640151, "body": "@ThomasLang that would also fix it yes"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1566390027, "post_id": 57591199, "comment_id": 101640218, "body": "Indeed, this question boils down to &quot;what should it return for an empty range&quot;. <code>std::accumulate</code> sidesteps this by requiring an initial argument."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 3, "creation_date": 1566390524, "post_id": 57591199, "comment_id": 101640525, "body": "Ummm... Make the initial value 1? A.k.a. &quot;<code>int{1}</code>&quot;. Seems too obvious..."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1566390615, "post_id": 57591199, "comment_id": 101640592, "body": "imho <code>accumulate</code> is made for exactly this use case. Note that <code>*</code> is not that different from <code>+</code> in that you have to use the &quot;neutral element&quot; (not sure about the correct english term) as initial value. It just happens that the neutral element of <code>+</code> is <code>0</code> while for <code>*</code> it is <code>1.0</code>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1566390747, "post_id": 57591199, "comment_id": 101640681, "body": "@SamVarshavchik The OP literally said that."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1566390782, "post_id": 57591199, "comment_id": 101640705, "body": "@formerlyknownas_463035818 Well, using <code>1.0</code> would give you different results (potentially). Use <code>1</code> for ints ;)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1566390934, "post_id": 57591199, "comment_id": 101640802, "body": "@LightnessRacesinOrbit oh right, now I get the point. Something doesnt need the initial value would really be a different algorithm"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1566391076, "post_id": 57591199, "comment_id": 101640904, "body": "@formerlyknownas_463035818 Not really it&#39;s just a specific case (range is non-empty) of this one with some rearranged arguments"}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1566391209, "post_id": 57591199, "comment_id": 101641001, "body": "When considering string handling (or perhaps ranges in general) - an empty range is usually fine - and can just return an empty string (or empty container) - for other cases im less certain on what it would mean.."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1566392988, "post_id": 57591199, "comment_id": 101642153, "body": "@formerlyknownas_463035818 that is called <code>id</code> which is 0 for addition, 1 for multiplication and so on."}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 3, "last_activity_date": 1570209137, "last_edit_date": 1570209137, "creation_date": 1566390159, "answer_id": 57591551, "question_id": 57591199, "link": "https://stackoverflow.com/questions/57591199/is-there-a-fold-like-algorithm-in-std-or-failing-that-boost-available/57591551#57591551", "title": "Is there a fold like algorithm in std (or failing that: boost) available?", "body": "<p>What you're talking about can be reframed as a generalisation of <code>accumulate</code> over the last <em>N-1</em> elements of your range, with the 1st element being the initial value.</p>\n\n<p>So you can just write:</p>\n\n<pre><code>std::accumulate(std::next(std::begin(ints)), std::end(ints), *std::begin(ints), OP);\n</code></pre>\n\n<p>You have to assume that <code>ints</code> is non-empty, though, which raises my main point: what should a hypothetical standard function return when the range is empty? Should its results simply be undefined? Is that sensible?</p>\n\n<blockquote>\n  <p><em>(current draft)</em> <a href=\"http://eel.is/c++draft/accumulate#footnote-237\" rel=\"nofollow noreferrer\"><code>237)</code></a> <code>accumulate</code> is similar to the APL reduction operator and Common Lisp reduce function, but it avoids the difficulty of defining the result of reduction on an empty sequence by always requiring an initial value</p>\n</blockquote>\n\n<p>Accumulate sidesteps this issue <em>and</em> provides a boatload of flexibility, by doing things the way it does. I think that's a good thing.</p>\n\n<p>Combined with the ability to simply provide an appropriate initial value like <code>1</code> for your operation over the whole range, I'm not convinced there's much need for this hypothetical alternative in the standard.</p>\n\n<p>It might also be difficult to come up with <em>two</em> names for it that mirror the already-asymmetrically-named \"accumulate\" and \"reduce\".</p>\n\n<hr>\n\n<pre><code>template &lt;class InputIt, class T, class BinaryOperation&gt;\nT fold_if_you_really_want_to(InputIt first, InputIt last, BinaryOperation op)\n{\n    // UB if range is empty. Whatevs.\n    T init = *first;\n    return std::accumulate(++first, last, std::move(init), std::move(op));\n}\n</code></pre>\n\n<p>&hellip;or something like that anyway. Note that this necessarily copies the first element; you could avoid that if you weren't lazy by calling into <code>std::accumulate</code> like I did. \ud83d\ude0a</p>\n"}, {"tags": [], "owner": {"reputation": 720, "user_id": 10696884, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TZLhm3qAv5U/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gTJ8AUH3mkzlYyEQgF0K4AqDVXLw/mo/photo.jpg?sz=128", "display_name": "Thomas Lang", "link": "https://stackoverflow.com/users/10696884/thomas-lang"}, "is_accepted": false, "score": 0, "last_activity_date": 1566390372, "creation_date": 1566390372, "answer_id": 57591611, "question_id": 57591199, "link": "https://stackoverflow.com/questions/57591199/is-there-a-fold-like-algorithm-in-std-or-failing-that-boost-available/57591611#57591611", "title": "Is there a fold like algorithm in std (or failing that: boost) available?", "body": "<p>In addition to @Lightness Races in Orbit's answer, consider the case in Haskell:\nFor cases like you described it (most prominently searching the maximum element in a list), Haskell delivers the functions <code>foldl1</code> and <code>foldr1</code>, which perform the fold over the collection and implicitly taking the first value as initial value.\nYes, for the empty list this makes no sense, hence for this problem you have to provide a list with at least one element.</p>\n"}], "owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 57591551, "answer_count": 2, "score": 1, "last_activity_date": 1570209137, "creation_date": 1566389053, "question_id": 57591199, "link": "https://stackoverflow.com/questions/57591199/is-there-a-fold-like-algorithm-in-std-or-failing-that-boost-available", "title": "Is there a fold like algorithm in std (or failing that: boost) available?", "body": "<p>A very simpel example is multiplication - suppose I have a vector:</p>\n\n<pre><code>std::vector&lt;int&gt; ints = {1,2,3,4};\n</code></pre>\n\n<p>With a naive approach I can just use <code>std::accumulate</code> (or <code>std::reduce</code>) and it looks like this:</p>\n\n<pre><code>int result = std::accumulate(ints.begin(), ints.end(), int{}, [](const int &amp;a, const int &amp;b){return a*b;});\n</code></pre>\n\n<p>but since the initial value is zero - the result becomes zero as well (For this specific case, one way I could fix it is by putting a '1' as initial).</p>\n\n<p>I would rather use an algorithm that does the above but without an initial value 'side-effect' (ie. just multiply the numbers in vector).</p>\n\n<p>A similar problem is often encountered within string handling where a delimiter must be inserted <strong>between</strong> elements.</p>\n"}, {"tags": ["python", "c++", "tensorflow", "half-precision-float"], "comments": [{"owner": {"reputation": 71, "user_id": 11955260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d154f38349faed42dfbb44f24125fb8?s=128&d=identicon&r=PG&f=1", "display_name": "Di Huang", "link": "https://stackoverflow.com/users/11955260/di-huang"}, "edited": false, "score": 0, "creation_date": 1566389036, "post_id": 57591154, "comment_id": 101639635, "body": "What&#39;s more, when I set tensorflow to work on CPU instead of GPU, the results are still the same, so I think that I am using tensorflow fp16 in a wrong way."}, {"owner": {"reputation": 32458, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1566391681, "post_id": 57591154, "comment_id": 101641296, "body": "Thanks for the clarifications, now the post is complete and you have a legit concern/question."}, {"owner": {"reputation": 71, "user_id": 11955260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d154f38349faed42dfbb44f24125fb8?s=128&d=identicon&r=PG&f=1", "display_name": "Di Huang", "link": "https://stackoverflow.com/users/11955260/di-huang"}, "reply_to_user": {"reputation": 32458, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1566467958, "post_id": 57591154, "comment_id": 101669018, "body": "May be an unexpected result of small convolutions. Tested again using pytorch."}, {"owner": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "edited": false, "score": 1, "creation_date": 1566467988, "post_id": 57591154, "comment_id": 101669037, "body": "Just as a comment, <code>CUDA_VISIBLE_DEVICES</code> will only have any effect on TensorFlow if you change it <i>before</i> importing it."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 11955260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d154f38349faed42dfbb44f24125fb8?s=128&d=identicon&r=PG&f=1", "display_name": "Di Huang", "link": "https://stackoverflow.com/users/11955260/di-huang"}, "edited": false, "score": 0, "creation_date": 1567224860, "post_id": 57607008, "comment_id": 101909799, "body": "The same on pytorch. May be something about FMA in cuda fp16 implementation. Anyway, I think that cuda optimizes the calculation using fp16, and makes its intermediate results almost full precision. Thanks for answering."}, {"owner": {"reputation": 613, "user_id": 3850022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39ed841c563d3c605c63872450a32a98?s=128&d=identicon&r=PG&f=1", "display_name": "Szabolcs", "link": "https://stackoverflow.com/users/3850022/szabolcs"}, "edited": false, "score": 0, "creation_date": 1572359617, "post_id": 57607008, "comment_id": 103529713, "body": "If you construct a simple convolution example that should overflow in f16 and execute it as f16 you find that it doesn&#39;t overflow, meaning that the underlying arithmetic is indeed performed in f32 and only the result is converted to f16."}, {"owner": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "reply_to_user": {"reputation": 613, "user_id": 3850022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39ed841c563d3c605c63872450a32a98?s=128&d=identicon&r=PG&f=1", "display_name": "Szabolcs", "link": "https://stackoverflow.com/users/3850022/szabolcs"}, "edited": false, "score": 0, "creation_date": 1572435317, "post_id": 57607008, "comment_id": 103556614, "body": "@Szabolcs I see what you mean, thanks for the example. I may be wrong, but I think, however, that from the point of view of TensorFlow everything is fp16. I don&#39;t know if there is a lower level of the stack where Eigen or CUDA are switching to fp32 at some point in the calculation for some reason... For example, some GPUs do not support fp16, or are slower at it (see <a href=\"https://devtalk.nvidia.com/default/topic/1023708/gpu-accelerated-libraries/fp16-support-on-gtx-1060-and-1080/\" rel=\"nofollow noreferrer\">here</a>)."}, {"owner": {"reputation": 613, "user_id": 3850022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39ed841c563d3c605c63872450a32a98?s=128&d=identicon&r=PG&f=1", "display_name": "Szabolcs", "link": "https://stackoverflow.com/users/3850022/szabolcs"}, "edited": false, "score": 0, "creation_date": 1572529995, "post_id": 57607008, "comment_id": 103594872, "body": "@jdehesa I believe that&#39;s the case, somebody working on Tensorflow decided to silently convert to f32 for performance or compatibility reasons even when the type of both convolution inputs are f16. I don&#39;t think this was a good idea, I&#39;d like to test the accuracy of f16 convolutions and now I can&#39;t do that."}], "tags": [], "owner": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "is_accepted": false, "score": 0, "last_activity_date": 1566468852, "creation_date": 1566468852, "answer_id": 57607008, "question_id": 57591154, "link": "https://stackoverflow.com/questions/57591154/how-to-do-convolution-with-fp16eigenhalf-on-tensorflow/57607008#57607008", "title": "how to do convolution with fp16(Eigen::half) on tensorflow", "body": "<p>I think you are using the operations correctly. In your example, you can check that the convolution operations do indeed have the right type.</p>\n\n<pre><code>conv2d_op_16 = out_16.op.inputs[0].op\nprint(conv2d_op_16.name, conv2d_op_16.type, conv2d_op_16.get_attr('T'))\n# Conv2D Conv2D &lt;dtype: 'float16'&gt;\nconv2d_op_16_32 = out_16_32.op.inputs[0].op.inputs[0].op\nprint(conv2d_op_16_32.name, conv2d_op_16_32.type, conv2d_op_16_32.get_attr('T'))\n# Conv2D_1 Conv2D &lt;dtype: 'float32'&gt;\n</code></pre>\n\n<p>And TensorFlow does register kernels for fp16 <a href=\"https://github.com/tensorflow/tensorflow/blob/v1.14.0/tensorflow/core/kernels/conv_ops.cc#L555\" rel=\"nofollow noreferrer\">for CPU</a> and <a href=\"https://github.com/tensorflow/tensorflow/blob/v1.14.0/tensorflow/core/kernels/conv_ops.cc#L1051-L1053\" rel=\"nofollow noreferrer\">for GPU</a>, so there is no reason to think is doing anything else. I don't have a lot of experience with fp16, so I'm not sure if the zero difference is \"normal\", but there does not seem to be any way in which <code>conv16</code> is using anything other than a fp16 convolution.</p>\n"}, {"tags": [], "owner": {"reputation": 613, "user_id": 3850022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39ed841c563d3c605c63872450a32a98?s=128&d=identicon&r=PG&f=1", "display_name": "Szabolcs", "link": "https://stackoverflow.com/users/3850022/szabolcs"}, "is_accepted": false, "score": 0, "last_activity_date": 1584449478, "last_edit_date": 1584449478, "creation_date": 1572360063, "answer_id": 58609705, "question_id": 57591154, "link": "https://stackoverflow.com/questions/57591154/how-to-do-convolution-with-fp16eigenhalf-on-tensorflow/58609705#58609705", "title": "how to do convolution with fp16(Eigen::half) on tensorflow", "body": "<p>I'm trying to figure out the same. Here is some simple code that you can test convolutions with:</p>\n\n\n\n<pre class=\"lang-python prettyprint-override\"><code>import tensorflow as tf\ntf.enable_eager_execution()\ninput = tf.cast([[[[65519], [65519], [65519], [65519]]]], tf.float16) #BHWC\nfilter = tf.cast([[[[65519]], [[-65519]]]], tf.float16) #HWIO\ntf.print(tf.nn.conv2d(input, filter, [1,1,1,1], \"VALID\"))\n</code></pre>\n\n<p>This should overflow if the convolutions are done in fp16, but doesn't actually overflow in Tensorflow. The result I get is <code>[[[[0][0][0]]]]</code>, which suggest that convolutions are performed in fp32.</p>\n\n<p>Edit: The solution is to set the environment variable:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>TF_FP16_CONV_USE_FP32_COMPUTE=0\n</code></pre>\n\n<p>This gives the result <code>[[[[inf][inf][inf]]]]</code>, suggesting that this time the convolution is performed in fp16. It seems you need at least a 10x0 GPU for this.</p>\n"}], "owner": {"reputation": 71, "user_id": 11955260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d154f38349faed42dfbb44f24125fb8?s=128&d=identicon&r=PG&f=1", "display_name": "Di Huang", "link": "https://stackoverflow.com/users/11955260/di-huang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 691, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1584449478, "creation_date": 1566388877, "last_edit_date": 1566466671, "question_id": 57591154, "link": "https://stackoverflow.com/questions/57591154/how-to-do-convolution-with-fp16eigenhalf-on-tensorflow", "title": "how to do convolution with fp16(Eigen::half) on tensorflow", "body": "<p>How can I use tensorflow to do convolution using fp16 on GPU? (the python api using __half or Eigen::half).</p>\n\n<p>I want to test a model with fp16 on tensorflow, but I got stucked. Actually, I found that fp16 convolution in tensorflow seems like casting the fp32 convolution's result into fp16, which is not what I need. </p>\n\n<p>I tried to give the tf.nn.conv2d a fp16 input in fp16 format, and give the tf.nn.conv2d a fp16 input in fp32 format (tf.cast it into fp32) then tf.cast the result into fp16, and they gave exactly the same result.\nBut as I think, doing convolution in fp16 is different from doing it in fp32 and then cast it into fp16, am I wrong?\nPlease help me, thanks.</p>\n\n<pre><code>environment:\nubuntu 16.04\ntensorflow 1.9.0\ncuda 9.0\nTesla V100\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>import tensorflow as tf\nimport numpy as np\nimport os\n\ndef conv16_32(input, kernel): # fake fp16 convolution\n    input = tf.cast(input, tf.float16)\n    kernel = tf.cast(kernel, tf.float16)\n    input = tf.cast(input, tf.float32)\n    kernel = tf.cast(kernel, tf.float32)\n    out = tf.nn.conv2d(input, kernel, [1,1,1,1], padding='VALID')\n    out = tf.cast(out, tf.float16)\n    out = tf.cast(out, tf.float64)\n    return out\n\ndef conv16(input, kernel): # real fp16 convolution\n    input = tf.cast(input, tf.float16)\n    kernel = tf.cast(kernel, tf.float16)\n    out = tf.nn.conv2d(input, kernel, [1,1,1,1], padding='VALID')\n    out = tf.cast(out, tf.float64)\n    return out\n\nx = np.random.rand(16, 32, 32, 16).astype('float64')\nw = np.random.rand(3, 3, 16, 16).astype('float64')\nx = tf.get_variable('input', dtype=tf.float64, initializer=x)\nw = tf.get_variable('weight', dtype=tf.float64, initializer=w)\n\nout_16 = conv16(x, w)\nout_16_32 = conv16_32(x, w)\n\nos.environ['CUDA_VISIBLE_DEVICES'] = '1'\nconfig = tf.ConfigProto()\nconfig.gpu_options.allow_growth = True\nsess = tf.Session(config = config)\nsess.run(tf.global_variables_initializer())\nsess.run(tf.local_variables_initializer())\nprint(sess.run(tf.reduce_max(out_16_32 - out_16)))\n\n</code></pre>\n\n<p>The above two functions give the same result, say the final 'print' result is zero.</p>\n\n<p>The result of fp16 convolution and fp32 convolution should not be same (in my point of view).\nHow can I use tensorflow to do convolution using real fp16 on GPU? (the python api using __half or Eigen::half)</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 2, "creation_date": 1566388284, "post_id": 57590946, "comment_id": 101639240, "body": "What&#39;s <code>agencija</code>? Where&#39;s the definition of <code>RentACar</code>?"}, {"owner": {"reputation": 56338, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 2, "creation_date": 1566388486, "post_id": 57590946, "comment_id": 101639355, "body": "<code>for (int i = 0; i &lt; numcars+1; i++) { temp[i] = cars[i]; }</code> is incorrect. You have <code>numcars</code> entries used in <code>cars</code> (at positions <code>0</code>..<code>numcars-1</code>) but you attempt to copy <code>numcars+1</code> items (positions <code>0</code>..<code>numcars</code>). This can be the source of the crash because the memory at <code>cars[numcars]</code> contains garbage data that the copy constructor tries to interpret and access. If the objects of class <code>Automobile</code> contain pointers (directly or indirectly), the crash is guaranteed. It should be <code>i = 0; i &lt; numcars; i ++</code>."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 2, "creation_date": 1566388623, "post_id": 57590946, "comment_id": 101639426, "body": "When I see the requirement &quot;I must not use vectors.&quot; my first thought goes to filling in <code>namespace not_std { template &lt;typname T&gt; class not_vector{ ... }; }</code> with as many of the members of <code>std::vector</code> as seem appropriate."}, {"owner": {"reputation": 9, "user_id": 10990593, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sJrfubkJ4BI/AAAAAAAAAAI/AAAAAAAAAk8/ySDo7JCFeUc/photo.jpg?sz=128", "display_name": "kasa ssg", "link": "https://stackoverflow.com/users/10990593/kasa-ssg"}, "edited": false, "score": 0, "creation_date": 1566388828, "post_id": 57590946, "comment_id": 101639548, "body": "<a href=\"https://pastebin.com/wZNNHqqQ\" rel=\"nofollow noreferrer\">pastebin.com/wZNNHqqQ</a> Here is a link to the whole program, with the code that works inside the operator+=."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1566389525, "post_id": 57590946, "comment_id": 101639906, "body": "@Caleth I&#39;d go even one step further and use a <code>std::array</code> as backend :P the only thing left to reimplement from scratch is resizing, which becomes almost trivial"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1566389662, "post_id": 57590946, "comment_id": 101639989, "body": "@formerlyknownas_463035818 if you limit yourself to power-of-2 capacities, that&#39;s a 32(64) line <code>switch</code>. Although it probably has to be <code>not_std::not_array&lt;T, N&gt;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "is_accepted": false, "score": 2, "last_activity_date": 1566388596, "creation_date": 1566388596, "answer_id": 57591083, "question_id": 57590946, "link": "https://stackoverflow.com/questions/57590946/how-to-overload-operator-to-increase-dynamic-array-size-add-one-object-to-the/57591083#57591083", "title": "How to overload operator+= to increase dynamic array size, add one object to the end", "body": "<p>You cannot overload operators for basic types or, in this case, pointers.</p>\n\n<p>If you cannot use <code>std::vector</code> or any standard container, I think you should create your own.<br/>\nCreate a class that wraps your array. Then redefine <code>operator+=()</code> for this class in the way that it appends a new object at the end of the array member.</p>\n"}], "owner": {"reputation": 9, "user_id": 10990593, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sJrfubkJ4BI/AAAAAAAAAAI/AAAAAAAAAk8/ySDo7JCFeUc/photo.jpg?sz=128", "display_name": "kasa ssg", "link": "https://stackoverflow.com/users/10990593/kasa-ssg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 294, "favorite_count": 0, "closed_date": 1566388977, "answer_count": 1, "score": 0, "last_activity_date": 1566389006, "creation_date": 1566388072, "last_edit_date": 1566388310, "question_id": 57590946, "link": "https://stackoverflow.com/questions/57590946/how-to-overload-operator-to-increase-dynamic-array-size-add-one-object-to-the", "closed_reason": "Duplicate", "title": "How to overload operator+= to increase dynamic array size, add one object to the end", "body": "<p>I'm writing a program where I'm supposed to add and delete cars from a Rent-a-Car company.\nMy code works fine, but I'm supposed to overload the += operator to add a car to a dynamically allocated array of objects. Every time I add a car, the array size is required to increase by one. I must not use vectors.</p>\n\n<p>If I don't do any copying, set the dynamic array size to a large number and just do this in operator +=, for example:</p>\n\n<pre><code>cars[numcars] = obj;\nnumcars++;\nreturn *this;\n</code></pre>\n\n<p>the code works fine and I'm getting the output;\nhowever, if I try to:</p>\n\n<ul>\n<li>create new object array[size+1]</li>\n<li>copy old array to new array;</li>\n<li>add new object to new array;</li>\n<li>delete old array;</li>\n<li>point original array pointer to new array;</li>\n</ul>\n\n<p>It doesn't work and the program crashes after the first input. I've tried many variations but I can't seem to get where I'm going wrong.\nI have two classes, one Automobile and one RentACar (where I have the array of objects). In the car class there are 2 constructors (out of which one is copy constructor, operators =, == and &lt;&lt; are overloaded and they work fine.</p>\n\n<hr>\n\n<p>This is my latest attempt at overloading the <code>+=</code> operator. <code>numcars</code> is set to 0</p>\n\n<pre><code> RentACar&amp; operator+=(Automobile &amp;obj){\n    Automobile *temp = new Automobile[numcars+1];\n    for (int i = 0; i &lt; numcars+1; i++){\n        temp[i] = cars[i];\n    }\n    numcars++;\n    temp[numcars] = obj;\n    delete [] cars;\n    cars = temp;\n    return *this;\n}\n</code></pre>\n\n<hr>\n\n<p>and this is the part in <code>main()</code></p>\n\n<pre><code>for (int i=0;i&lt;n;i++)\n{\n    char marka[100];\n    int regisracija[5];\n    int maximumBrzina;\n\n    cin&gt;&gt;marka;\n\n    for (int i=0;i&lt;5;i++)\n        cin&gt;&gt;regisracija[i];\n\n    cin&gt;&gt;maximumBrzina;\n    Automobile nov=Automobile(marka,regisracija,maximumBrzina);\n\n    //add car\n    agencija+=nov;\n    }\n</code></pre>\n\n<p>The function is expected to make the \"cars\" array larger by one, and add the new object at the end. Instead, the program crashes after input of maximumBrzina.</p>\n"}, {"tags": ["c++", "header"], "comments": [{"owner": {"reputation": 2156, "user_id": 3476954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fb810a12cd393949bca88e4b0cdba75?s=128&d=identicon&r=PG&f=1", "display_name": "Mansoor", "link": "https://stackoverflow.com/users/3476954/mansoor"}, "edited": false, "score": 0, "creation_date": 1566387739, "post_id": 57590793, "comment_id": 101638947, "body": "The <code>#include</code> provides the implementation  (i.e. the tuple class). The <code>std::</code> is the namespace that the implementation resides in. Even if it works without the specifying the include explicitly, you should do so for clarity."}, {"owner": {"reputation": 647, "user_id": 1316208, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/90df3e6a20b27c31accd954b2a0093db?s=128&d=identicon&r=PG", "display_name": "user1316208", "link": "https://stackoverflow.com/users/1316208/user1316208"}, "edited": false, "score": 3, "creation_date": 1566387740, "post_id": 57590793, "comment_id": 101638948, "body": "The code without the <code>#include</code> only compiles because the tuple got included through some other file"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1566387763, "post_id": 57590793, "comment_id": 101638962, "body": "Always include the headers where a class or a function is defined or declared. Inter-dependencies between system headers (which system header include which other system headers) is an unknown implementation detail."}, {"owner": {"reputation": 315, "user_id": 11764098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ddef6ea6d43e97e9ae553de2d05c3d5?s=128&d=identicon&r=PG&f=1", "display_name": "jerry_fuyi", "link": "https://stackoverflow.com/users/11764098/jerry-fuyi"}, "edited": false, "score": 0, "creation_date": 1566388086, "post_id": 57590793, "comment_id": 101639135, "body": "<code>#include</code> doesn&#39;t always provides implementation. It provides interface for non-template classes or functions ( in which case the implementation is provided by libraries and handled by linker), and implementation for template ones."}], "answers": [{"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": true, "score": 10, "last_activity_date": 1566387716, "creation_date": 1566387716, "answer_id": 57590837, "question_id": 57590793, "link": "https://stackoverflow.com/questions/57590793/should-i-include-tuple/57590837#57590837", "title": "Should I include &lt;tuple&gt;?", "body": "<p>Because <code>&lt;tuple&gt;</code> is a header file which contains the <code>tuple</code> class inside the namespace <code>std</code>. Just because you're explicitliy saying <code>std::</code> doesn't mean the compiler will just be able to find it if it's not included.</p>\n\n<p>The reason it worked for you in this case is probably because another header you have included already includes <code>&lt;tuple&gt;</code> and thus your code includes <code>&lt;tuple&gt;</code> indirectly or because the compiler you're building with includes it automatically. This is <strong>not</strong> guaranteed by the standard and should not be relied upon. Always include the headers you'll need to make your code portable.</p>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 9, "last_activity_date": 1566388467, "last_edit_date": 1566388467, "creation_date": 1566387738, "answer_id": 57590843, "question_id": 57590793, "link": "https://stackoverflow.com/questions/57590793/should-i-include-tuple/57590843#57590843", "title": "Should I include &lt;tuple&gt;?", "body": "<p>You always should include the specific headers for any types that you use in your code.</p>\n\n<blockquote>\n  <p>The code compiles without that <code>#include</code> line just well...</p>\n</blockquote>\n\n<p>That your code compiles without is just by chance, because it might have been included by another standard header you use in your program, and not guaranteed by the standard, and thus not portable.</p>\n\n<blockquote>\n  <p>Especially, given the fact that we explicitly write <code>std::tuple</code>.</p>\n</blockquote>\n\n<p>The explicit use of the <code>std::</code> namespace doesn't have any significance about that rule.</p>\n\n<p>You should also always be explicit about using classes or types from the <code>std</code> namespace to prevent getting into ambiguity troubles.</p>\n\n<p>Related stuff:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">Why is \u201cusing namespace std;\u201d considered bad practice?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/31816095/why-should-i-not-include-bits-stdc-h\">Why should I not #include ?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/4103169/how-do-i-include-the-string-header\">How do I include the string header?</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1080, "user_id": 11890657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e128d9b341fa1abad09bab0576aacd7f?s=128&d=identicon&r=PG&f=1", "display_name": "Chelmy88", "link": "https://stackoverflow.com/users/11890657/chelmy88"}, "is_accepted": false, "score": 2, "last_activity_date": 1566387853, "creation_date": 1566387853, "answer_id": 57590879, "question_id": 57590793, "link": "https://stackoverflow.com/questions/57590793/should-i-include-tuple/57590879#57590879", "title": "Should I include &lt;tuple&gt;?", "body": "<p>In C++ you need to include the header for everything you use. The <code>std::</code> is about the namespace, it's completely different.\nApparently your compiler is smart enough to deal with it, but most of the compilers won't.</p>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1566388474, "creation_date": 1566388474, "answer_id": 57591042, "question_id": 57590793, "link": "https://stackoverflow.com/questions/57590793/should-i-include-tuple/57591042#57591042", "title": "Should I include &lt;tuple&gt;?", "body": "<p>Some standard headers shall include other standard headers according to the C++ Standard. For example the header <code>&lt;algorithm&gt;</code> must include the header <code>&lt;initializer_list&gt;</code>.</p>\n\n<p>However implementations are allowed to include standard headers in other standard headers at their discretion.</p>\n\n<p>You should not rely on this because your program compiled with one compiler will not compile using another compiler.</p>\n\n<p>Even if one standard header is included in another standard header according to the requirements of the C++ Standard nevertheless it is a good practice to include such a header explicitly because the user of the program (some other programmer) should bother about dependencies of the headers and will be free to include or exclude other headers.  </p>\n"}], "owner": {"reputation": 11799, "user_id": 9259778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R157q.jpg?s=128&g=1", "display_name": "Nurbol Alpysbayev", "link": "https://stackoverflow.com/users/9259778/nurbol-alpysbayev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 57590837, "answer_count": 4, "score": 2, "last_activity_date": 1566389658, "creation_date": 1566387587, "last_edit_date": 1566389658, "question_id": 57590793, "link": "https://stackoverflow.com/questions/57590793/should-i-include-tuple", "title": "Should I include &lt;tuple&gt;?", "body": "<p>I am a newbie in c++, and I suspect, that, of course the question relates not only to <code>tuple</code>. </p>\n\n<p>So, I've watched a tutorial with roughly this code:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;tuple&gt;\n\nstd::tuple&lt;...&gt; t(...)\n</code></pre>\n\n<p>Why <code>#include &lt;tuple&gt;</code>? Especially, given the fact that we explicitly write <code>std::tuple</code>. The code compiles without that <code>#include</code> line just well...</p>\n"}, {"tags": ["java", "c++", "dll", "visual-studio-2015", "java-native-interface"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 3, "creation_date": 1566388193, "post_id": 57590702, "comment_id": 101639188, "body": "try running <a href=\"https://lucasg.github.io/Dependencies/\" rel=\"nofollow noreferrer\">dependancy walker</a> on your wrapper dll to see what the dependencies are and which ones are missing."}, {"owner": {"reputation": 9545, "user_id": 5295429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XcJZr.png?s=128&g=1", "display_name": "Oo.oO", "link": "https://stackoverflow.com/users/5295429/oo-oo"}, "edited": false, "score": 1, "creation_date": 1566391829, "post_id": 57590702, "comment_id": 101641410, "body": "Make sure all the libs you are linking to are on <code>PATH</code>. They must be resolvable by system."}, {"owner": {"reputation": 1908, "user_id": 2543253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a87e0065d4c5036eb7adabe2edfd187?s=128&d=identicon&r=PG", "display_name": "user2543253", "link": "https://stackoverflow.com/users/2543253/user2543253"}, "edited": false, "score": 0, "creation_date": 1566400979, "post_id": 57590702, "comment_id": 101647005, "body": "See also: <a href=\"https://stackoverflow.com/questions/47031176/java-loadlibrary-unresolved-dependency-but-dependent-dll-is-in-same-directory/47075532#47075532\" title=\"java loadlibrary unresolved dependency but dependent dll is in same directory\">stackoverflow.com/questions/47031176/&hellip;</a>"}, {"owner": {"reputation": 3870, "user_id": 773849, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afc313492ba01cdb794a218eeeeab8ee?s=128&d=identicon&r=PG", "display_name": "Alex Barker", "link": "https://stackoverflow.com/users/773849/alex-barker"}, "edited": false, "score": 0, "creation_date": 1566581295, "post_id": 57590702, "comment_id": 101715114, "body": "The dependency walker like <a href=\"http://www.dependencywalker.com/\" rel=\"nofollow noreferrer\">depends</a> is your best bet.  I think Java is finding your dll, but the dll cannot be loaded due to another dll not being in the systems library path.  After looking at your source, I am not sure what dll that would be, maybe something related to your tool chain.  Remember that Java does <b>NOT</b> look in the <code>PATH</code> for native libraries!  It also does <b>NOT</b> use the class path.   It uses the <code>java.library.path</code> run-time property."}], "owner": {"reputation": 93, "user_id": 11926388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69cfb7c8b6a78e538a3ed75e68d15b67?s=128&d=identicon&r=PG&f=1", "display_name": "s.stkvc", "link": "https://stackoverflow.com/users/11926388/s-stkvc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1566388061, "creation_date": 1566387275, "last_edit_date": 1566388061, "question_id": 57590702, "link": "https://stackoverflow.com/questions/57590702/unsatisfiedlinkexception-at-using-jni-dll-which-includes-3rd-party-dll", "title": "UnsatisfiedLinkException at using JNI DLL which includes 3rd party dll", "body": "<p>I tried to build a native wrapper DLL, in order to access the third party DLL from java. At running my Java programs, it throws an Unsatisfied Link Exception. </p>\n\n<pre><code>Exception in thread \"main\" java.lang.UnsatisfiedLinkError: C:\\Users\\sstankov\\workspace\\CalculatorWrapper\\src\\CalculatorControllerWrapper.dll: Can't find dependent libraries\nat java.lang.ClassLoader$NativeLibrary.load(Native Method)\nat java.lang.ClassLoader.loadLibrary0(Unknown Source)\nat java.lang.ClassLoader.loadLibrary(Unknown Source)\nat java.lang.Runtime.loadLibrary0(Unknown Source)\nat java.lang.System.loadLibrary(Unknown Source)\nat CalculatorController.&lt;clinit&gt;(CalculatorController.java:9)\n</code></pre>\n\n<p>I looked already through endless SOF Posts about the same Problem, sadly nothing helped.</p>\n\n<p>Here is my Code, It should gain you some insight I think.</p>\n\n<p><strong>Header of the \"3d-party-dll\", which I created and named TestHelloWorld:</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nnamespace Calc {\n\n    class CalculatorSasa\n    {\n    public:\n        static __declspec(dllexport) int multipliziere(int a, int b);\n        static __declspec(dllexport) int addiere(int a, int b);\n        static __declspec(dllexport) int subtrahiere(int a, int b);\n    };\n\n\n}\n</code></pre>\n\n<p><strong>CPP - File of the 3rd- Party DLL</strong></p>\n\n<pre><code>#include \"TestHelloWorld.h\"\n#include &lt;iostream&gt;\nusing namespace std;\n\nnamespace Calc{\n\n    int CalculatorSasa::addiere(int a, int b) {\n        cout &lt;&lt; \"a = \" &lt;&lt; a &lt;&lt; \", b = \" &lt;&lt; b &lt;&lt; endl;\n        int c = a + b;\n        cout &lt;&lt; \"\\Ergebnis Addieren = \" &lt;&lt; c &lt;&lt; endl;\n        return c;\n    }\n\n    int CalculatorSasa::multipliziere(int a, int b) {\n        cout &lt;&lt; \"a = \" &lt;&lt; a &lt;&lt; \", b = \" &lt;&lt; b &lt;&lt; endl;\n        int c = a * b;\n        cout &lt;&lt; \"\\Ergebnis Multiplizieren = \" &lt;&lt; c &lt;&lt; endl;\n        return c;\n    }\n\n    int CalculatorSasa::subtrahiere(int a, int b) {\n        cout &lt;&lt; \"a = \" &lt;&lt; a &lt;&lt; \", b = \" &lt;&lt; b &lt;&lt; endl;\n        int c = a - b;\n        cout &lt;&lt; \"\\Ergebnis Subtrahieren = \" &lt;&lt; c &lt;&lt; endl;\n        return c;\n    }\n\n}\n\n\nint main()\n{\n    return 0;\n}\n</code></pre>\n\n<p><strong>CalculatorController.java -> Java-Code</strong></p>\n\n<pre><code>public class CalculatorController {\n\n    public static native int add(int a, int b);\n    public static native int subtract(int a, int b);\n    public static native int multipliziere(int a, int b);\n\n    static{\n        System.loadLibrary(\"CalculatorControllerWrapper\");\n    }\n\n\n    public static void main(String[] args) {\n        /* This message will help you determine whether\n        LD_LIBRARY_PATH is correctly set\n         */\n        System.out.println(\"library: \"\n                + System.getProperty(\"java.library.path\"));\n\n        CalculatorController.add(10, 20);\n        CalculatorController.subtract(50, 15);\n        CalculatorController.multipliziere(10, 10);\n\n\n    }\n\n}\n</code></pre>\n\n<p><strong>Native Header created of my Java class</strong></p>\n\n<pre><code>/* DO NOT EDIT THIS FILE - it is machine generated */\n#include &lt;jni.h&gt;\n/* Header for class CalculatorController */\n\n#ifndef _Included_CalculatorController\n#define _Included_CalculatorController\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n/*\n * Class:     CalculatorController\n * Method:    add\n * Signature: (II)I\n */\nJNIEXPORT jint JNICALL Java_CalculatorController_add\n  (JNIEnv *, jclass, jint, jint);\n\n/*\n * Class:     CalculatorController\n * Method:    subtract\n * Signature: (II)I\n */\nJNIEXPORT jint JNICALL Java_CalculatorController_subtract\n  (JNIEnv *, jclass, jint, jint);\n\n/*\n * Class:     CalculatorController\n * Method:    multipliziere\n * Signature: (II)I\n */\nJNIEXPORT jint JNICALL Java_CalculatorController_multipliziere\n  (JNIEnv *, jclass, jint, jint);\n\n#ifdef __cplusplus\n}\n#endif\n#endif\n</code></pre>\n\n<p><strong>C++ Implementation of native Header</strong></p>\n\n<pre><code>#pragma comment(lib, \"Calculator.lib\")\n\n#include \"CalculatorController.h\"\n#include \"TestHelloWorld.h\"\n#include &lt;iostream&gt;\n\n/*\n * Class:     CalculatorController\n * Method:    add\n * Signature: (II)I\n */\nJNIEXPORT jint JNICALL Java_CalculatorController_add(JNIEnv *env, jclass cls, jint num1, jint num2) {\n    int sum = Calc::CalculatorSasa::addiere(num1, num2);\n    return sum;\n}\n\n/*\n * Class:     CalculatorController\n * Method:    subtract\n * Signature: (II)I\n */\nJNIEXPORT jint JNICALL Java_CalculatorController_subtract(JNIEnv *env, jclass cls, jint num1, jint num2) {\n    int sum = Calc::CalculatorSasa::subtrahiere(num1, num2);\n    return sum;\n}\n\n/*\n * Class:     CalculatorController\n * Method:    multipliziere\n * Signature: (II)I\n */\nJNIEXPORT jint JNICALL Java_CalculatorController_multipliziere(JNIEnv *env, jclass cls, jint num1, jint num2) {\n    int sum = Calc::CalculatorSasa::multipliziere(num1, num2);\n    return sum;\n}\n</code></pre>\n\n<p>I think that maybe I have somewhere a Building and/or compilation error. I am fairly new to C++ as I am a pure Java developer and got this Task from work.</p>\n\n<p>Here is also a Picture of my src Folder, blue describes java/jni related files, red the \"3rd party dll\":\n<img src=\"https://i.stack.imgur.com/VXSBP.png\" alt=\"blue describes java/jni related files, red the &quot;3rd party dll&quot;\"></p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "cppcheck"], "comments": [{"owner": {"reputation": 768, "user_id": 10765031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19818c272f28b0be58edab2373192e34?s=128&d=identicon&r=PG&f=1", "display_name": "fdan", "link": "https://stackoverflow.com/users/10765031/fdan"}, "edited": false, "score": 2, "creation_date": 1566386521, "post_id": 57590411, "comment_id": 101638317, "body": "try adding <code>--std=c++11</code> to the command line, I don&#39;t know what cppcheck is using by default"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1566386858, "post_id": 57590411, "comment_id": 101638488, "body": "A quick look at cppcheck&#39;s forum suggests that a bug has crept in recently; there are  other reports about false syntax errors. If you have a recent version, I would try rolling back a bit."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1566389750, "post_id": 57590411, "comment_id": 101640037, "body": "What version of cppcheck?"}, {"owner": {"reputation": 1, "user_id": 11956609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59a6a6619fe9f85bef54ff2cf5234ae9?s=128&d=identicon&r=PG&f=1", "display_name": "cppart", "link": "https://stackoverflow.com/users/11956609/cppart"}, "edited": false, "score": 0, "creation_date": 1566390170, "post_id": 57590411, "comment_id": 101640317, "body": "Thanks for you reply I tried with <code>--std=c++11</code> but same behaviour. I was using cppcheck 1.88 (latest homebrew formula). I built cppcheck from sources (1.89) but same problem but with a bit more output. I then downgraded to 1.76.1 (one of their <a href=\"https://github.com/danmar/cppcheck/\" rel=\"nofollow noreferrer\">branches</a>) and problem disappeared"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11956609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59a6a6619fe9f85bef54ff2cf5234ae9?s=128&d=identicon&r=PG&f=1", "display_name": "cppart", "link": "https://stackoverflow.com/users/11956609/cppart"}, "is_accepted": false, "score": 0, "last_activity_date": 1566390891, "creation_date": 1566390891, "answer_id": 57591753, "question_id": 57590411, "link": "https://stackoverflow.com/questions/57590411/cppcheck-syntax-error-with-using-typedef/57591753#57591753", "title": "cppcheck: Syntax error with using/typedef", "body": "<p>As <em>molbdnilo</em> suggested. Problem disappeared with <a href=\"https://github.com/danmar/cppcheck/releases/tag/1.85\" rel=\"nofollow noreferrer\">cppcheck release 1.85</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 11956609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59a6a6619fe9f85bef54ff2cf5234ae9?s=128&d=identicon&r=PG&f=1", "display_name": "cppart", "link": "https://stackoverflow.com/users/11956609/cppart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 679, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566390940, "creation_date": 1566386194, "last_edit_date": 1566390940, "question_id": 57590411, "link": "https://stackoverflow.com/questions/57590411/cppcheck-syntax-error-with-using-typedef", "title": "cppcheck: Syntax error with using/typedef", "body": "<p>I have a syntax error with cppcheck and using/typedef declarations.\nI have a struct that contains </p>\n\n<pre><code>struct inferior\n{\n\n    using visitor = int;\n\n    template &lt;typename T&gt;\n    bool operator()(const T &amp;a, const T &amp;b) const\n    {\n        return a &lt; b;\n    }\n};\n\nint main() { \n    return 0; \n}\n</code></pre>\n\n<p>when I run <code>cppcheck file.cpp</code> output is </p>\n\n<p><code>[file.cpp:5]: (error) syntax error</code> with no further output. </p>\n\n<p>The error  disappeared if I remove the <code>using</code> declaration.</p>\n\n<p>I wonder if it's normal behaviour from <code>cppcheck</code>. the <code>using</code>  declaration not being used directly. (It's a reduced example with a <code>using</code> redefining int).</p>\n\n<p>Some context if needed: In my application, the <code>using</code> defines a specialisation of a visitor <code>OnlyArithmetic</code> like so: <code>using visitor = OnlyArithmetic&lt;inferior&gt;</code> that filters the non-arithmetic types using metaprogramming techniques, then I call std::visit on inferior::visitor(). I used this trick to not repeat the filtering part for all structures I need (inferior, superior, ...).</p>\n\n<p>[EDIT] Using cppcheck 1.88</p>\n"}, {"tags": ["python", "c++", "opencv", "ffmpeg", "timestamp"], "comments": [{"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1566396888, "post_id": 57590264, "comment_id": 101644848, "body": "Why are you dividing and then multiplying by <code>0x100000000</code> the seconds? That will shift the numbers to the lower bits, but If the high 32 bits are the seconds why not use shift, like <code>timestamp &gt;&gt; 32</code> . Also, If you get 2 int32 out of int64, why are you not returning int32 instead? I think you only need to remove the multiplication of <code>0x100000000</code> and leaving the shift or the division for it to work. I suggest to either use always uint64 or int64, this may generate problems.... I may be missing something else."}, {"owner": {"reputation": 174, "user_id": 11002705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab4dd154df9ca9b7a82dd7b28ef5eecd?s=128&d=identicon&r=PG&f=1", "display_name": "penguin", "link": "https://stackoverflow.com/users/11002705/penguin"}, "reply_to_user": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1566399466, "post_id": 57590264, "comment_id": 101646142, "body": "@api55 I was actually thinking about this, I am building it again without dividing and multiplying by <code>0x100000000</code>. <code>timestamp &amp; 0xFFFFFFFF00000000</code> works as well by only considering the upper bytes, because of the and sign for bitwise operations. I know this is a dumb question, do I have to make it return int32 instead of int64?"}, {"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 1, "creation_date": 1566460413, "post_id": 57590264, "comment_id": 101665241, "body": "In my opinion it should be uint32 if you have it already separated and it comes from unsigned value, also seconds since epoch is always positive, then you have less problems with signs... the division is not wrong ( after doing 0xFFFFFFFF00000000 ), it is equivalent to <code>timestamp &gt;&gt; 32</code>, but if you multiply it then you are moving it up again and makes it bigger. Also I think shifting should be faster..."}, {"owner": {"reputation": 174, "user_id": 11002705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab4dd154df9ca9b7a82dd7b28ef5eecd?s=128&d=identicon&r=PG&f=1", "display_name": "penguin", "link": "https://stackoverflow.com/users/11002705/penguin"}, "reply_to_user": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1566461008, "post_id": 57590264, "comment_id": 101665531, "body": "ahh I see. I just rebuilt it with those in mind and got some sensible values in seconds and fractions of seconds. Don&#39;t know what it is relative to though, i ended up getting around <code>9299</code> seconds and incrementing sensibly but I don&#39;t know if it is relative to when the camera is powered on (might be equivalent to the stream time of the camera). Working on just obtaining the timestamp and see if I can get anything from it. Got any other suggestions?"}, {"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1566461430, "post_id": 57590264, "comment_id": 101665713, "body": "As far as I know, RTP timestamps is not from epoch, but any other clock, like since the stream was initialized or the camera etc... It is mostly used to know which frame comes first and the time between frames (to make a video with the correct fps). Since this was the solution I will put it as an answer a little more detailed :)"}, {"owner": {"reputation": 174, "user_id": 11002705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab4dd154df9ca9b7a82dd7b28ef5eecd?s=128&d=identicon&r=PG&f=1", "display_name": "penguin", "link": "https://stackoverflow.com/users/11002705/penguin"}, "reply_to_user": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1566463294, "post_id": 57590264, "comment_id": 101666596, "body": "Yes, please do! well is it possible to obtain the epoch then? Was always thinking that the RTP timestamp (in NTP format)  would actually give me the actual time relative to 1/1/1900 00:00. Can you add a bit of information in terms of actually obtaining the absolute timestamp if possible?"}, {"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 1, "creation_date": 1566463705, "post_id": 57590264, "comment_id": 101666787, "body": "It depends on your camera/server how it does it, you can do something like get the first timestamp, get the current clock of your client and save the difference. Then add this difference to each timestamp and it will maybe more like what you seek. Or if you are the one doing the server part, make sure the timestamps are NTP. BTW Epoch should be from 1970 in normal cases"}, {"owner": {"reputation": 174, "user_id": 11002705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab4dd154df9ca9b7a82dd7b28ef5eecd?s=128&d=identicon&r=PG&f=1", "display_name": "penguin", "link": "https://stackoverflow.com/users/11002705/penguin"}, "reply_to_user": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1566464134, "post_id": 57590264, "comment_id": 101666992, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/198290/discussion-between-fr0sty-and-api55\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "is_accepted": true, "score": 1, "last_activity_date": 1566463158, "creation_date": 1566463158, "answer_id": 57605301, "question_id": 57590264, "link": "https://stackoverflow.com/questions/57590264/capturing-rtp-timestamps/57605301#57605301", "title": "Capturing RTP Timestamps", "body": "<p>As I see it, you receive a timestamp of type uint64 which contains to values uint32 in the high and low bits. I see that in a part of the code you use:</p>\n\n<pre><code>seconds = (int64)((timestamp &amp; 0xFFFFFFFF00000000) / 0x100000000);\n</code></pre>\n\n<p>Which basically removes the lower bits and shifts the high bits to be in the lower bits. Then you cast it to int64. Here I only consider that it should be unsigned first of all, since it should not be negative in any case (seconds since epoch is always positive) and it should be uint32, since it is guarantee it is not bigger (you are taking only 32 bits). Also, this can be achieved (probably faster) with bitshifts like this:</p>\n\n<pre><code>auto seconds = static_cast&lt;uint32&gt;(timestamp &gt;&gt; 32);\n</code></pre>\n\n<p>Another error I spotted was in this part:</p>\n\n<pre><code>time_shift = 0x100000000\nseconds = time_shift * k\nm = (time_shift * k) + l\n</code></pre>\n\n<p>Here you are basically reconstructing the 64 bit timestamp, instead of creating the timestamp usable in other contexts. This means, you are shifting the lower bits in seconds to higher bits and adding the fraction part as the lower bits... This will end in a really big number which may not be useful always. You can still use it for comparison, but then all the conversions done in the C++ part are not needed. I think a more normal timestamp, which you can use with python datetime would be like this:</p>\n\n<pre><code>timestamp = float(str(k) + \".\" + str(l)) # don't know if there is a better way\ndate = datetime.fromtimestamp(timestamp)\n</code></pre>\n\n<p>If you don't care of the fractional part you can just use the seconds directly.</p>\n\n<p>Another thing to consider is, that the timestamp of RTP protocols depends on the camera/server... They may use the clock timestamp or just some other clock like start of the streaming of start of the system. So it may or not be from epoch.</p>\n"}], "owner": {"reputation": 174, "user_id": 11002705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab4dd154df9ca9b7a82dd7b28ef5eecd?s=128&d=identicon&r=PG&f=1", "display_name": "penguin", "link": "https://stackoverflow.com/users/11002705/penguin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2353, "favorite_count": 0, "accepted_answer_id": 57605301, "answer_count": 1, "score": 3, "last_activity_date": 1568085805, "creation_date": 1566385681, "last_edit_date": 1568085805, "question_id": 57590264, "link": "https://stackoverflow.com/questions/57590264/capturing-rtp-timestamps", "title": "Capturing RTP Timestamps", "body": "<p>I was trying a little experiment in order to get the timestamps of the RTP packets using the VideoCapture class from Opencv's source code in python, also had to modify FFmpeg to accommodate the changes in Opencv. </p>\n\n<p>Since I read about the <a href=\"https://tools.ietf.org/html/rfc3550#section-6.4.1\" rel=\"nofollow noreferrer\">RTP packet format</a>.Wanted to fiddle around and see if I could manage to find a way to get the NTP timestamps. Was unable to find any reliable help in trying to get RTP timestamps. So tried out this little hack. </p>\n\n<p>Credits to ryantheseer on github for the modified code.</p>\n\n<p>Version of FFmpeg: 3.2.3 \nVersion of Opencv: 3.2.0</p>\n\n<p><strong>In Opencv source code:</strong>  </p>\n\n<p>modules/videoio/include/opencv2/videoio.hpp:</p>\n\n<p>Added two getters for the RTP timestamp:</p>\n\n<pre><code>.....   \n    /** @brief Gets the upper bytes of the RTP time stamp in NTP format (seconds).\n    */\n    CV_WRAP virtual int64 getRTPTimeStampSeconds() const;\n\n    /** @brief Gets the lower bytes of the RTP time stamp in NTP format (fraction of seconds).\n    */\n    CV_WRAP virtual int64 getRTPTimeStampFraction() const;\n.....\n</code></pre>\n\n<p>modules/videoio/src/cap.cpp:</p>\n\n<p>Added an import and added the implementation of the timestamp getter:</p>\n\n<pre><code>....\n#include &lt;cstdint&gt;\n....\n....\nstatic inline uint64_t icvGetRTPTimeStamp(const CvCapture* capture)\n{\n  return capture ? capture-&gt;getRTPTimeStamp() : 0;\n}\n...\n</code></pre>\n\n<p>Added the C++ timestamp getters in the VideoCapture class:</p>\n\n<pre><code> ....\n/**@brief Gets the upper bytes of the RTP time stamp in NTP format (seconds).\n*/\nint64 VideoCapture::getRTPTimeStampSeconds() const\n{\n    int64 seconds = 0;\n    uint64_t timestamp = 0;\n    //Get the time stamp from the capture object\n    if (!icap.empty())\n        timestamp = icap-&gt;getRTPTimeStamp();\n    else\n        timestamp = icvGetRTPTimeStamp(cap);\n    //Take the top 32 bytes of the time stamp\n    seconds = (int64)((timestamp &amp; 0xFFFFFFFF00000000) / 0x100000000);\n    return seconds;\n}\n\n/**@brief Gets the lower bytes of the RTP time stamp in NTP format (seconds).\n*/\nint64 VideoCapture::getRTPTimeStampFraction() const\n{\n    int64 fraction = 0;\n    uint64_t timestamp = 0;\n    //Get the time stamp from the capture object\n    if (!icap.empty())\n        timestamp = icap-&gt;getRTPTimeStamp();\n    else\n        timestamp = icvGetRTPTimeStamp(cap);\n    //Take the bottom 32 bytes of the time stamp\n    fraction = (int64)((timestamp &amp; 0xFFFFFFFF));\n    return fraction;\n}\n...\n</code></pre>\n\n<p>modules/videoio/src/cap_ffmpeg.cpp:</p>\n\n<p>Added an import:</p>\n\n<pre><code>...\n#include &lt;cstdint&gt;\n...\n</code></pre>\n\n<p>Added a method reference definition:</p>\n\n<pre><code>...\nstatic CvGetRTPTimeStamp_Plugin icvGetRTPTimeStamp_FFMPEG_p = 0;\n...\n</code></pre>\n\n<p>Added the method to the module initializer method:</p>\n\n<pre><code>...\nif( icvFFOpenCV )\n...\n...\n  icvGetRTPTimeStamp_FFMPEG_p =\n                (CvGetRTPTimeStamp_Plugin)GetProcAddress(icvFFOpenCV, \"cvGetRTPTimeStamp_FFMPEG\");\n...\n...\nicvWriteFrame_FFMPEG_p != 0 &amp;&amp;\nicvGetRTPTimeStamp_FFMPEG_p !=0)\n...\n\nicvGetRTPTimeStamp_FFMPEG_p = (CvGetRTPTimeStamp_Plugin)cvGetRTPTimeStamp_FFMPEG;\n</code></pre>\n\n<p>Implemented the getter interface:</p>\n\n<pre><code>...\nvirtual uint64_t getRTPTimeStamp() const\n    {\n        return ffmpegCapture ? icvGetRTPTimeStamp_FFMPEG_p(ffmpegCapture) : 0;\n    } \n...\n</code></pre>\n\n<p><strong>In FFmpeg's source code:</strong></p>\n\n<p>libavcodec/avcodec.h:</p>\n\n<p>Added the NTP timestamp definition to the AVPacket struct:</p>\n\n<pre><code>typedef struct AVPacket {\n...\n...\nuint64_t rtp_ntp_time_stamp;\n}\n</code></pre>\n\n<p>libavformat/rtpdec.c:</p>\n\n<p>Store the ntp time stamp in the struct in the finalize_packet method:</p>\n\n<pre><code>static void finalize_packet(RTPDemuxContext *s, AVPacket *pkt, uint32_t timestamp)\n{\n    uint64_t offsetTime = 0;\n    uint64_t rtp_ntp_time_stamp = timestamp;\n...\n...\n/*RM: Sets the RTP time stamp in the AVPacket */\n    if (!s-&gt;last_rtcp_ntp_time || !s-&gt;last_rtcp_timestamp)\n        offsetTime = 0;\n    else\n        offsetTime = s-&gt;last_rtcp_ntp_time - ((uint64_t)(s-&gt;last_rtcp_timestamp) * 65536);\n    rtp_ntp_time_stamp = ((uint64_t)(timestamp) * 65536) + offsetTime;\n    pkt-&gt;rtp_ntp_time_stamp = rtp_ntp_time_stamp;\n</code></pre>\n\n<p>libavformat/utils.c:</p>\n\n<p>Copy the ntp time stamp from the packet to the frame in the read_frame_internal method:</p>\n\n<pre><code>static int read_frame_internal(AVFormatContext *s, AVPacket *pkt)\n{\n    ...\n    uint64_t rtp_ntp_time_stamp = 0;\n...\n    while (!got_packet &amp;&amp; !s-&gt;internal-&gt;parse_queue) {\n          ...\n          //COPY OVER the RTP time stamp TODO: just create a local copy\n          rtp_ntp_time_stamp = cur_pkt.rtp_ntp_time_stamp;\n\n\n          ...\n\n\n  #if FF_API_LAVF_AVCTX\n    update_stream_avctx(s);\n  #endif\n\n  if (s-&gt;debug &amp; FF_FDEBUG_TS)\n      av_log(s, AV_LOG_DEBUG,\n           \"read_frame_internal stream=%d, pts=%s, dts=%s, \"\n           \"size=%d, duration=%\"PRId64\", flags=%d\\n\",\n           pkt-&gt;stream_index,\n           av_ts2str(pkt-&gt;pts),\n           av_ts2str(pkt-&gt;dts),\n           pkt-&gt;size, pkt-&gt;duration, pkt-&gt;flags);\npkt-&gt;rtp_ntp_time_stamp = rtp_ntp_time_stamp; #Just added this line in the if statement.\nreturn ret;\n</code></pre>\n\n<p>My python code to utilise these changes:</p>\n\n<pre><code>import cv2\n\nuri = 'rtsp://admin:password@192.168.1.67:554'\ncap = cv2.VideoCapture(uri)\n\nwhile True:\n    frame_exists, curr_frame = cap.read()\n    # if frame_exists:\n    k = cap.getRTPTimeStampSeconds()\n    l = cap.getRTPTimeStampFraction()\n    time_shift = 0x100000000\n    #because in the getRTPTimeStampSeconds() \n    #function, seconds was multiplied by 0x10000000 \n    seconds = time_shift * k\n    m = (time_shift * k) + l\n    print(\"Imagetimestamp: %i\" % m)\ncap.release()\n</code></pre>\n\n<p>What I am getting as my output:</p>\n\n<pre><code>    Imagetimestamp: 0\n    Imagetimestamp: 212041451700224\n    Imagetimestamp: 212041687629824\n    Imagetimestamp: 212041923559424\n    Imagetimestamp: 212042159489024\n    Imagetimestamp: 212042395418624\n    Imagetimestamp: 212042631348224\n    ...\n</code></pre>\n\n<p>What astounded me the most was that when i powered off the ip camera and powered it back on, timestamp would start from 0 then quickly increments. I read NTP time format is relative to January 1, 1900 00:00. Even when I tried calculating the offset, and accounting between now and 01-01-1900, I still ended up getting a crazy high number for the date. </p>\n\n<p>Don't know if I calculated it wrong. I have a feeling it's very off or what I am getting is not the timestamp. </p>\n"}, {"tags": ["c++", "rvalue", "lvalue"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1566386030, "post_id": 57590241, "comment_id": 101638033, "body": "If you return by value (like your operator function does) then making that returned value <code>const</code> is irrelevant. If the returned value is used as a source for assignment (like e.g. <code>c = a * b</code>) then the code can assign the value to a non-constant variable anyway. And if you have the temporary value be the target of an assignment (as in <code>a * b = c</code> from your example) the assignment of the temporary object will be lost anyway. <code>const</code> only makes sense if you return a <i>reference</i>."}, {"owner": {"reputation": 125, "user_id": 10972075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a6d210203bb83c808c21488e786619b?s=128&d=identicon&r=PG&f=1", "display_name": "fwd", "link": "https://stackoverflow.com/users/10972075/fwd"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1566386411, "post_id": 57590241, "comment_id": 101638260, "body": "@Someprogrammerdude so <code>a * b = c</code> returns a temporary object of the left? Why then does the compiler not complain about this like it does for primitive types?"}], "answers": [{"comments": [{"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1566389150, "post_id": 57590851, "comment_id": 101639701, "body": "A more modern way of achieving this would to reference qualify assignment (<code>T&amp; T::operator=(const T&amp;) &amp;;</code>)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1566389524, "post_id": 57590851, "comment_id": 101639905, "body": "@Caleth Yeah true"}, {"owner": {"reputation": 125, "user_id": 10972075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a6d210203bb83c808c21488e786619b?s=128&d=identicon&r=PG&f=1", "display_name": "fwd", "link": "https://stackoverflow.com/users/10972075/fwd"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1566390328, "post_id": 57590851, "comment_id": 101640415, "body": "@Caleth Is this similar to the const qualifier? I mean, is this to guarantee that the operator returns a reference?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 125, "user_id": 10972075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a6d210203bb83c808c21488e786619b?s=128&d=identicon&r=PG&f=1", "display_name": "fwd", "link": "https://stackoverflow.com/users/10972075/fwd"}, "edited": false, "score": 1, "creation_date": 1566391182, "post_id": 57590851, "comment_id": 101640982, "body": "@IbrahimSuleiman the <code>&amp;</code> on the end acts analogously to <code>const</code> in the same position (and they can be combined). It means it can only be <i>called</i> on an lvalue <code>T</code> (i.e. not <code>(a * b)</code>)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1566391268, "post_id": 57590851, "comment_id": 101641034, "body": "It gives you the same (ish) result using a different (and more appropriate) mechanism."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 3, "last_activity_date": 1566387763, "creation_date": 1566387763, "answer_id": 57590851, "question_id": 57590241, "link": "https://stackoverflow.com/questions/57590241/what-type-of-value-do-overloaded-operators-return-for-user-defined-types-rval/57590851#57590851", "title": "What type of value do overloaded operators return (for user-defined types): rvalue or lvalue?", "body": "<blockquote>\n  <p><a href=\"http://eel.is/c++draft/expr.call#14\" rel=\"nofollow noreferrer\"><code>[expr.call]/14:</code></a> A function call is an lvalue if the result type is an lvalue reference type or an rvalue reference to function type, an xvalue if the result type is an rvalue reference to object type, and a prvalue otherwise.</p>\n</blockquote>\n\n<p>This makes sense, since the result doesn't \"have a name\". If you returned a reference, the implication would be that it is a reference to some object somewhere that <em>does</em> \"have a name\" (which is, generally but not always, true).</p>\n\n<p>Then there's this:</p>\n\n<blockquote>\n  <p><a href=\"http://eel.is/c++draft/expr.ass#1\" rel=\"nofollow noreferrer\"><code>[expr.ass]/1:</code></a> The assignment operator (=) and the compound assignment operators all group right-to-left. All require a modifiable lvalue as their left operand; their result is an lvalue referring to the left operand.</p>\n</blockquote>\n\n<p>This is saying that an assignment requires an lvalue on the left hand side. So far so good; you've covered this yourself.</p>\n\n<p>How come a non-<code>const</code> function call result works then?</p>\n\n<p>By a special rule!</p>\n\n<blockquote>\n  <p><a href=\"http://eel.is/c++draft/over.oper#8\" rel=\"nofollow noreferrer\"><code>[over.oper]/8:</code></a>: <em>[..]</em> Some predefined operators, such as +=, require an operand to be an lvalue when applied to basic types; this is not required by operator functions.</p>\n</blockquote>\n\n<p>&hellip; and <code>=</code> applied to an object of class type invokes an operator <em>function</em>.</p>\n\n<p>I can't readily answer the \"why\": on the surface of it, it made sense to relax this restriction when dealing with classes, and the original (inherited) restriction on built-ins always seemed a little excessive (in my opinion) but would have had to be kept for compatibility reasons.</p>\n\n<p>But then you have people like Meyers pointing out that it now becomes <em>useful</em> (sort of) to return <code>const</code> values to effectively \"undo\" this change.</p>\n\n<p>Ultimately I wouldn't try too hard to find a strong rationale either way.</p>\n"}], "owner": {"reputation": 125, "user_id": 10972075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a6d210203bb83c808c21488e786619b?s=128&d=identicon&r=PG&f=1", "display_name": "fwd", "link": "https://stackoverflow.com/users/10972075/fwd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 57590851, "answer_count": 1, "score": 2, "last_activity_date": 1566387991, "creation_date": 1566385606, "last_edit_date": 1566387991, "question_id": 57590241, "link": "https://stackoverflow.com/questions/57590241/what-type-of-value-do-overloaded-operators-return-for-user-defined-types-rval", "title": "What type of value do overloaded operators return (for user-defined types): rvalue or lvalue?", "body": "<p>I was reading Effective C++: 55 Specific Ways to Improve Your Programs and Designs by Scott Meyers and he stated:</p>\n\n<blockquote>\n  <p>Having a function return a constant value is generally inappropriate, but sometimes doing so can reduce the incidence of client errors without giving up safety or efficiency. For example, consider the declaration of the operator* function:</p>\n</blockquote>\n\n<pre><code>class Rational { ... };\n\nconst Rational operator*(const Rational&amp; lhs, const Rational&amp; rhs);\n</code></pre>\n\n<p>According to Meyers, do this prevents \"atrocities\" like this, which would be illegal if a, b were primitive types:</p>\n\n<pre><code>Rational a, b, c;\n\n...\n\n(a * b) = c;\n</code></pre>\n\n<p>This got me confused and while trying to understand why the above assignment was illegal for primitive types but not user-defined types, I came across rvalues and lvalues</p>\n\n<p>I still feel I don't have a strong grasp of what rvalues and lvalues are after looking through some SO questions, but here's my basic understanding: an lvalue references a location in memory and thus can be assigned to (it can be on both sides of = operator as well); an rvalue however, cannot be assigned to because it does not reference a memory location(e.g. temporary values from function returns and literals)  </p>\n\n<p>My question is: why is assigning to a product of two numbers/objects legal for user-defined types (even though it does not make sense) but not primitives? Does it have to do with return types? does the overloaded * operator return an assignable value or a temporary value?</p>\n"}, {"tags": ["android", "c++", "qt"], "comments": [{"owner": {"reputation": 1731, "user_id": 5202007, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yOWfD.jpg?s=128&g=1", "display_name": "Mohammad Tauqir", "link": "https://stackoverflow.com/users/5202007/mohammad-tauqir"}, "edited": false, "score": 0, "creation_date": 1566386514, "post_id": 57590226, "comment_id": 101638311, "body": "share the code in <code>android_test.pro</code>"}, {"owner": {"reputation": 486, "user_id": 8016180, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-f-1ZzXKs7nk/AAAAAAAAAAI/AAAAAAAAAKQ/oy5pT4VpAMs/photo.jpg?sz=128", "display_name": "Rolf Winter", "link": "https://stackoverflow.com/users/8016180/rolf-winter"}, "edited": false, "score": 0, "creation_date": 1566404323, "post_id": 57590226, "comment_id": 101648625, "body": "currently, NDK 20 is not usable with the latest version of Qt. Downgrade to 19 and see if that fixes your problem (<a href=\"https://wiki.qt.io/Qt_for_Android_known_issues\" rel=\"nofollow noreferrer\">wiki.qt.io/Qt_for_Android_known_issues</a>)."}, {"owner": {"reputation": 65, "user_id": 7480386, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/imeZc.jpg?s=128&g=1", "display_name": "Aditya", "link": "https://stackoverflow.com/users/7480386/aditya"}, "reply_to_user": {"reputation": 486, "user_id": 8016180, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-f-1ZzXKs7nk/AAAAAAAAAAI/AAAAAAAAAKQ/oy5pT4VpAMs/photo.jpg?sz=128", "display_name": "Rolf Winter", "link": "https://stackoverflow.com/users/8016180/rolf-winter"}, "edited": false, "score": 0, "creation_date": 1566453454, "post_id": 57590226, "comment_id": 101662072, "body": "@RolfWinter, I tried to setup with ndk 19, but it still didn&#39;t work."}], "owner": {"reputation": 65, "user_id": 7480386, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/imeZc.jpg?s=128&g=1", "display_name": "Aditya", "link": "https://stackoverflow.com/users/7480386/aditya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 364, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1566473451, "creation_date": 1566385557, "last_edit_date": 1566473451, "question_id": 57590226, "link": "https://stackoverflow.com/questions/57590226/how-to-fix-issue-during-project-starting-for-qt-for-android", "title": "How to fix issue during project starting for Qt for Android", "body": "<p>I am trying to create Android app in Qt creator. When I try to create a sample app using the online documentation on <a href=\"https://doc.qt.io/qtcreator/qt-creator-accelbubble-example.html\" rel=\"nofollow noreferrer\">Qt's website</a>, the project never gets created properly. It gives the following error message :<br>\n<code>/bin/sh: 1: /root/Android/Sdk/ndk/20.0.5594570/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-g++: not found<br>\nProject ERROR: Cannot run target compiler '/root/Android/Sdk/ndk/20.0.5594570/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-g++'.<br>\nOutput:/bin/sh: 1: /root/Android/Sdk/ndk/20.0.5594570/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-g++: not found\nMaybe you forgot to setup the environment?<br>\nError while parsing file /home/aditya/Programs/Office_Work/android_test/android_test.pro. Giving up.</code></p>\n\n<p>For the setup I installed the latest Android SDK by installing Android Studio following <a href=\"https://doc.qt.io/qt-5/android-getting-started.html#testing-your-setup\" rel=\"nofollow noreferrer\">this</a> documentation on Qt's website. I installed multiple API versions through the SDK Manager, installed all support software like the ndk,etc. I also downloaded the latest ndk separately. During setting up Android on Qt, I added the SDK directory, the NDK directory, and jre from the Android studio directory. \n<a href=\"https://i.stack.imgur.com/RJRkH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RJRkH.png\" alt=\"Android Devices Window\"></a>\nThe setup seems to be fine.  </p>\n\n<p>The kits that I have are<br>\n<a href=\"https://i.stack.imgur.com/K8jwg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/K8jwg.png\" alt=\"enter image description here\"></a>  </p>\n\n<p>The android_test.pro  </p>\n\n<pre><code>QT += quick\nCONFIG += c++11\n\n# The following define makes your compiler emit warnings if you use\n# any Qt feature that has been marked deprecated (the exact warnings\n# depend on your compiler). Refer to the documentation for the\n# deprecated API to know how to port your code away from it.\nDEFINES += QT_DEPRECATED_WARNINGS\n\n# You can also make your code fail to compile if it uses deprecated APIs.\n# In order to do so, uncomment the following line.\n# You can also select to disable deprecated APIs only up to a certain version of Qt.\n#DEFINES += QT_DISABLE_DEPRECATED_BEFORE=0x060000    # disables all the APIs deprecated before Qt 6.0.0\n\nSOURCES += \\\n        main.cpp\n\nRESOURCES += qml.qrc\n\n# Additional import path used to resolve QML modules in Qt Creator's code model\nQML_IMPORT_PATH =\n\n# Additional import path used to resolve QML modules just for Qt Quick Designer\nQML_DESIGNER_IMPORT_PATH =\n\n# Default rules for deployment.\nqnx: target.path = /tmp/$${TARGET}/bin\nelse: unix:!android: target.path = /opt/$${TARGET}/bin\n!isEmpty(target.path): INSTALLS += target  \n</code></pre>\n\n<p><strong>@UPDATE:</strong><br>\nI managed to fix the project start up issue. After searching online I found this <a href=\"https://forum.qt.io/topic/94858/qt-android-problem\" rel=\"nofollow noreferrer\">chat</a>. According to it, I added ndk version 17. The project got created without problem.</p>\n"}, {"tags": ["c++", "outlook"], "comments": [{"owner": {"reputation": 56418, "user_id": 332059, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cSNOK.png?s=128&g=1", "display_name": "Dmitry Streblechenko", "link": "https://stackoverflow.com/users/332059/dmitry-streblechenko"}, "edited": false, "score": 0, "creation_date": 1566398541, "post_id": 57590109, "comment_id": 101645618, "body": "Of course - AddressList.GetContactsFolder returns a valid MAPIFolder only if the list of based on one of the Contacts folders on your mailbox. There is no folder in case of a GAL container."}, {"owner": {"reputation": 56418, "user_id": 332059, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cSNOK.png?s=128&g=1", "display_name": "Dmitry Streblechenko", "link": "https://stackoverflow.com/users/332059/dmitry-streblechenko"}, "edited": false, "score": 0, "creation_date": 1566398595, "post_id": 57590109, "comment_id": 101645654, "body": "To resolve a name, you can use Application.Session.CreateRecipient / Recipient.Resolve"}, {"owner": {"reputation": 176, "user_id": 4074029, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/c1a2132b5a5a054c5b7a1a852ebf9956?s=128&d=identicon&r=PG", "display_name": "Diego", "link": "https://stackoverflow.com/users/4074029/diego"}, "reply_to_user": {"reputation": 56418, "user_id": 332059, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cSNOK.png?s=128&g=1", "display_name": "Dmitry Streblechenko", "link": "https://stackoverflow.com/users/332059/dmitry-streblechenko"}, "edited": false, "score": 0, "creation_date": 1566403530, "post_id": 57590109, "comment_id": 101648293, "body": "Thanks for your help. Now this works but when there is only one recipient which matches the pattern... I also need a list of contacts when more than one matches... I have tried Find or Restrict but no success, i don&#39;t find which object i must use..."}], "answers": [{"comments": [{"owner": {"reputation": 176, "user_id": 4074029, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/c1a2132b5a5a054c5b7a1a852ebf9956?s=128&d=identicon&r=PG", "display_name": "Diego", "link": "https://stackoverflow.com/users/4074029/diego"}, "edited": false, "score": 0, "creation_date": 1566556605, "post_id": 57596008, "comment_id": 101702728, "body": "Thanks! Reading about restrictions in the documentation, I can see that:  From IMAPIContainer I get a IMAPITable: \tIMAPIContainer::GetContentsTable(ULONG ulFlags, LPMAPITABLE FAR * lppTable); And with the table I can Restrict the contents: \tIMAPITable::Restrict(LPSRestriction lpRestriction, ULONG ulFlags); I suppose that LPSRestriction has: \trt = RES_CONTENT \tres = SContentRestriction (with custom data to match)  But I don&#39;t know how to get the IMAPIContainer from my IMAPISession or my IAddrBook...  Is that correct?"}, {"owner": {"reputation": 56418, "user_id": 332059, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cSNOK.png?s=128&g=1", "display_name": "Dmitry Streblechenko", "link": "https://stackoverflow.com/users/332059/dmitry-streblechenko"}, "reply_to_user": {"reputation": 176, "user_id": 4074029, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/c1a2132b5a5a054c5b7a1a852ebf9956?s=128&d=identicon&r=PG", "display_name": "Diego", "link": "https://stackoverflow.com/users/4074029/diego"}, "edited": false, "score": 0, "creation_date": 1566577064, "post_id": 57596008, "comment_id": 101713322, "body": "You can get IMAPISession from Namespace.MAPIOBJECT in OOM, then open the address list using IAMPISession::OpenEntry() passing the address list entry id."}], "tags": [], "owner": {"reputation": 56418, "user_id": 332059, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cSNOK.png?s=128&g=1", "display_name": "Dmitry Streblechenko", "link": "https://stackoverflow.com/users/332059/dmitry-streblechenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1566405658, "creation_date": 1566405658, "answer_id": 57596008, "question_id": 57590109, "link": "https://stackoverflow.com/questions/57590109/outlook-mapi-in-c-application-find-contacts-by-name/57596008#57596008", "title": "Outlook MAPI in C++ application: Find contacts by name", "body": "<p>To resolve to a single recipient, you can use <code>Application.Session.CreateRecipient</code> / <code>Recipient.Resolve</code>.</p>\n\n<p>The only way to get multiple matches is to use Extended MAPI (C++ or Delphi) and do what Outlook does when resolving names and getting an ambiguous match -  use <a href=\"https://docs.microsoft.com/en-us/office/client-developer/outlook/mapi/address-book-restrictions\" rel=\"nofollow noreferrer\">PR_ANR</a> restriction on a particular container. MAPI address book providers do not support conmlex restrictions the way store providers do. <code>PR_ANR</code> is really your best bet.</p>\n\n<p>If using <a href=\"http://www.dimastr.com/redemption\" rel=\"nofollow noreferrer\">Redemption</a> (any language, I am its author) is an option, it exposes <a href=\"http://www.dimastr.com/redemption/rdosession.htm\" rel=\"nofollow noreferrer\">RDOSession</a>.<a href=\"http://www.dimastr.com/redemption/rdoaddressbook.htm\" rel=\"nofollow noreferrer\">AddressBook</a>.<code>ResolveNameEx</code> and <a href=\"http://www.dimastr.com/redemption/RDOAddressList.htm\" rel=\"nofollow noreferrer\">RDOAddressList</a>.<code>ResolveNameEx</code> that return a collection of matches.</p>\n"}, {"tags": [], "owner": {"reputation": 176, "user_id": 4074029, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/c1a2132b5a5a054c5b7a1a852ebf9956?s=128&d=identicon&r=PG", "display_name": "Diego", "link": "https://stackoverflow.com/users/4074029/diego"}, "is_accepted": true, "score": 0, "last_activity_date": 1566821845, "last_edit_date": 1566821845, "creation_date": 1566809770, "answer_id": 57654733, "question_id": 57590109, "link": "https://stackoverflow.com/questions/57590109/outlook-mapi-in-c-application-find-contacts-by-name/57654733#57654733", "title": "Outlook MAPI in C++ application: Find contacts by name", "body": "<p>Thanks for your help, Dmitry, I got it:</p>\n\n<p>I have my addrBook, I get the root container (IAddrBook::OpenEntry), and I get a table with all the address books (IABContainer::GetHierarchyTable)</p>\n\n<p>Then I got the container (IAddrBook::OpenEntry), got the contents table (IABContainer::GetContentsTable) and applied the PR_ANR restriction to find a string, such as \"di\" (to find 'Diego Do\u00f1ate' or 'Diana xxx').</p>\n"}], "owner": {"reputation": 176, "user_id": 4074029, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/c1a2132b5a5a054c5b7a1a852ebf9956?s=128&d=identicon&r=PG", "display_name": "Diego", "link": "https://stackoverflow.com/users/4074029/diego"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 0, "accepted_answer_id": 57654733, "answer_count": 2, "score": 1, "last_activity_date": 1566821845, "creation_date": 1566385127, "last_edit_date": 1566397462, "question_id": 57590109, "link": "https://stackoverflow.com/questions/57590109/outlook-mapi-in-c-application-find-contacts-by-name", "title": "Outlook MAPI in C++ application: Find contacts by name", "body": "<p>I have a C++ application to retrieve Outlook contacts: (local &amp; exchange) users &amp; distribution lists)</p>\n\n<p>I got an interface file 'msoutl.tlh' by using :</p>\n\n<pre><code>#import \"C:\\Program Files (x86)\\Common Files\\microsoft shared\\OFFICE15\\mso.dll\" named_guids\n\n#import \"c:\\Program Files (x86)\\Microsoft Office\\Office15\\MSOUTL.OLB\" no_namespace rename(\"Folder\", \"OlkFolder\") rename(\"CopyFile\", \"OlkCopyFile\") rename(\"GetOrganizer\", \"GetOrganizerAE\")\n</code></pre>\n\n<p>There I have all Outlook MAPI classes I can use</p>\n\n<p>With that, I can get all contacts from Outlook client(removed NULL and HRESULT checks) :</p>\n\n<pre><code>    _ApplicationPtr pApp;\n_NameSpacePtr _nsPtr = pApp-&gt;GetNamespace(_bstr_t(\"MAPI\"));\nAddressListsPtr lists = _nsPtr-&gt;GetAddressLists();\nAddressListPtr list;\nchar s[256];\n\nfor (int i = 1; i &lt;= lists-&gt;GetCount(); i++)\n{\n    list = lists-&gt;Item(i);\n    AddressEntries* pAddrEntries = nullptr;\n    AddressEntryPtr addEntryPtr = pAddrEntries-&gt;GetFirst();\n    while (addEntryPtr)\n    {\n        _ExchangeUserPtr pExchangeUser = nullptr;\n        BSTR bstrPropName = nullptr;\n        BSTR bstrPropAddr = nullptr;\n        BSTR bstrSMTPAddr = nullptr;\n        OlAddressEntryUserType userType;\n        AddressEntriesPtr pAaddrEntries = nullptr;\n\n        addEntryPtr-&gt;get_Name(&amp;bstrPropName);\n        addEntryPtr-&gt;get_Address(&amp;bstrPropAddr);\n        userType = addEntryPtr-&gt;GetAddressEntryUserType();\n\n        switch (userType)\n        {\n        case olExchangeUserAddressEntry: // 0\n        {\n            addEntryPtr-&gt;raw_GetExchangeUser(&amp;pExchangeUser);\n            pExchangeUser-&gt;get_PrimarySmtpAddress(&amp;bstrSMTPAddr);\n            sprintf(s, \"EXCHANGE USER: %S (%S) \\n\", (WCHAR*)bstrPropName, (WCHAR*)bstrSMTPAddr);\n            break;\n        }\n        case olExchangeDistributionListAddressEntry: // 1\n        {\n            if (S_OK == addEntryPtr-&gt;get_Members(&amp;pAaddrEntries))\n            {\n                _ExchangeDistributionListPtr exchangeDistrList = nullptr;\n                addEntryPtr-&gt;raw_GetExchangeDistributionList(&amp;exchangeDistrList);\n                exchangeDistrList-&gt;get_PrimarySmtpAddress(&amp;bstrSMTPAddr);\n                sprintf(s, \"EXCHANGE DISTRIBUTION LIST: %S (%S) - %d members \\n\", (WCHAR*)bstrPropName, (WCHAR*)bstrSMTPAddr, pAaddrEntries-&gt;GetCount());\n            }\n            break;\n        }\n\n        case olOutlookContactAddressEntry: // 10\n        {\n            sprintf(s, \"OUTLOOK CONTACT: %S (%S) \\n\", (WCHAR*)bstrPropName, (WCHAR*)bstrPropAddr);\n            break;\n        }\n        case olOutlookDistributionListAddressEntry: // 11\n        {\n            addEntryPtr-&gt;get_Members(&amp;pAaddrEntries);\n            sprintf(s, \"OUTLOOK DISTRIBUTION LIST: %S - %d members \\n\", (WCHAR*)bstrPropName, pAaddrEntries-&gt;GetCount());\n            break;\n        }\n        default: break;\n        }\n    }\n}\n</code></pre>\n\n<p>This works perfectly (i have all contacts retrieved from Outlook).</p>\n\n<p>My problem is to resolve names (i need to filter by text), to list only those users which match.</p>\n\n<p>I could do it loading all users &amp; looping, but with lots of contacts would be really slow</p>\n\n<p>And I can see there are methods for that, such as Find or Restrict. But I have no success.</p>\n\n<p>Once i have a list, i have:</p>\n\n<pre><code>MAPIFolderPtr mapiFolder = list-&gt;GetContactsFolder();\nif (mapiFolder)\n{\n    _ItemsPtr folderItems = mapiFolder-&gt;Items;\n    if (folderItems)\n    {\n        _Items* pItems;\n        BSTR bstrPropID = A2BSTR(\"*\");\n        HRESULT hr = folderItems-&gt;raw_Restrict(bstrPropID, &amp;pItems);\n    }\n}\n</code></pre>\n\n<p>I have 2 problems:</p>\n\n<ul>\n<li><p>Only in the Outlook Local contacts list i get a valid MAPIFolderPtr item (other lists such as exchange users returns NULL)</p></li>\n<li><p>When I have MAPIFolderPtr, mapiFolder->Items returns a valid value (number of contacts in this list), but pItems is NULL...</p></li>\n</ul>\n\n<p>I tried also with </p>\n\n<pre><code>folderItems-&gt;Restrict(\"*\")\nfolderItems-&gt;Find(bstrPropID);\n</code></pre>\n\n<p>but i got an exception ('Condition is not valid') in both cases</p>\n\n<p>And with </p>\n\n<pre><code>IDispatch * pDisp;\nfolderItems-&gt;raw_Find(bstrPropID, &amp;pDisp);\n</code></pre>\n\n<p>but pDisp is NULL;</p>\n\n<p>Any help to resolve names in Outlook Contact lists?</p>\n\n<p>Thanks,\nDiego</p>\n"}, {"tags": ["c++", "stl", "unordered-multimap"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1566384536, "post_id": 57589909, "comment_id": 101637226, "body": "<code>m_Map1</code> isn&#39;t a type, but an instance of <code>std::unordered_multimap&lt;long,long&gt;</code> hende you get a compiler error. What you probably want is <code>std::unordered_multimap&lt;CString,std::unordered_multimap&lt;long&zwnj;&#8203;,long&gt;&gt;m_Map2;</code>"}, {"owner": {"reputation": 765, "user_id": 3959871, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c458e09e6b51e4c9f8533aa20429e217?s=128&d=identicon&r=PG&f=1", "display_name": "Ventu", "link": "https://stackoverflow.com/users/3959871/ventu"}, "edited": false, "score": 0, "creation_date": 1566384550, "post_id": 57589909, "comment_id": 101637234, "body": "In the declaration in your second multimap, you have to write something like <code>std::unordered_multimap&lt;CString,std::unordered_multimap&lt;long&zwnj;&#8203;,long&gt;&gt;m_Map2</code>, not writing the name of your first multimap in the template."}, {"owner": {"reputation": 765, "user_id": 3959871, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c458e09e6b51e4c9f8533aa20429e217?s=128&d=identicon&r=PG&f=1", "display_name": "Ventu", "link": "https://stackoverflow.com/users/3959871/ventu"}, "edited": false, "score": 0, "creation_date": 1566384649, "post_id": 57589909, "comment_id": 101637290, "body": "Also, the last line is also wrong, <code>m_Map1</code> is already an object, hence you can not create a new object. I think you are messing up with types and objects here."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1566384921, "post_id": 57589909, "comment_id": 101637433, "body": "You are correct. The C++ standard does not define a hash on the non-standard <code>CString</code> type. Try using a standard <code>std::string</code>, and forget all about that non-standard class that only exists in the Microsoftverse."}, {"owner": {"reputation": 232, "user_id": 11297354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ji1Pg.jpg?s=128&g=1", "display_name": "Mori", "link": "https://stackoverflow.com/users/11297354/mori"}, "edited": false, "score": 1, "creation_date": 1566385072, "post_id": 57589909, "comment_id": 101637500, "body": "You might have wanted to write something like <code>using Map1 = std::unordered_multimap&lt;long, long&gt;; std::unordered_multimap&lt;CString,Map1&gt; m_Map2;</code>"}, {"owner": {"reputation": 37, "user_id": 6265221, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QB8YUrpDBJM/AAAAAAAAAAI/AAAAAAAAAEQ/Y2btHcVQQ3g/photo.jpg?sz=128", "display_name": "Somil", "link": "https://stackoverflow.com/users/6265221/somil"}, "edited": false, "score": 0, "creation_date": 1566388926, "post_id": 57589909, "comment_id": 101639590, "body": "@ \u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 ..Thanks it compiles now but how do I insert the m_Map1 values to the m_Map2?"}, {"owner": {"reputation": 37, "user_id": 6265221, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QB8YUrpDBJM/AAAAAAAAAAI/AAAAAAAAAEQ/Y2btHcVQQ3g/photo.jpg?sz=128", "display_name": "Somil", "link": "https://stackoverflow.com/users/6265221/somil"}, "edited": false, "score": 0, "creation_date": 1566389144, "post_id": 57589909, "comment_id": 101639697, "body": "@Ventu..Thanks a lot for the help.I could successfully compile the code.But I am really not sure how to insert elements to it.I am doing something like....       m_Map1.insert(std::pair&lt;long,long&gt;(10,20));     m_Map2.insert(std::pair&lt;CString,std::pair&lt;long,long&gt;&gt;(_T(&quot;A&quot;&zwnj;&#8203;),(m_Map1-      &gt;first,m_Map1-&gt;second));     //It says expression must have a pointer type"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 6265221, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QB8YUrpDBJM/AAAAAAAAAAI/AAAAAAAAAEQ/Y2btHcVQQ3g/photo.jpg?sz=128", "display_name": "Somil", "link": "https://stackoverflow.com/users/6265221/somil"}, "edited": false, "score": 0, "creation_date": 1566388789, "post_id": 57590409, "comment_id": 101639523, "body": "@RichardHodges..Thanks a lot but I am afraid I cant use boost at my place.But your answer has made me understand the problem in a better way."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 37, "user_id": 6265221, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QB8YUrpDBJM/AAAAAAAAAAI/AAAAAAAAAEQ/Y2btHcVQQ3g/photo.jpg?sz=128", "display_name": "Somil", "link": "https://stackoverflow.com/users/6265221/somil"}, "edited": false, "score": 0, "creation_date": 1566417897, "post_id": 57590409, "comment_id": 101654223, "body": "@Somil great. Working as intended."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 2, "last_activity_date": 1566386190, "creation_date": 1566386190, "answer_id": 57590409, "question_id": 57589909, "link": "https://stackoverflow.com/questions/57589909/how-to-have-an-unordered-multimap-of-unordered-multimaps/57590409#57590409", "title": "How to have an unordered_multimap of unordered_multimaps", "body": "<p>Your problem is that there is no specialisation of <code>std::hash</code> available for <code>CString</code></p>\n\n<p>Boiling the problem down to its simplest part, this will also not compile:</p>\n\n<pre><code>std::unordered_multimap&lt;CString , int&gt; m_Map2;    \n</code></pre>\n\n<p>Because <code>std::unordered_multimap&lt;CString, anything&gt;</code> requires that there exists a class <code>std::hash&lt;CString&gt;</code> which provides <code>std::size_t operator()(CString const&amp;) const</code> (it also requires an implementation of <code>std::equal_to&lt;CString&gt;</code> but this is automatically available if <code>CString</code> supports <code>operator==</code>.</p>\n\n<p>You can create such a class and legally inject it into the std namespace:</p>\n\n<pre><code>#include &lt;unordered_map&gt;\n#include &lt;boost/functional/hash.hpp&gt;  // for boost::hash_range, see below\n\n// for exposition\nstruct CString\n{\n    const char* data() const;\n    std::size_t length() const;\n\n    bool operator==(CString const&amp; other) const;\n};\n\nnamespace std\n{\n    // specialise std::hash for type ::CString\n    template&lt;&gt; struct hash&lt;::CString&gt;\n    {\n        std::size_t operator()(CString const&amp; arg) const\n        {\n            std::size_t seed = 0;\n\n            // perform whatever is your hashing function on arg here\n            // accumulating the hash into the variable seed\n            // in this case, we're doing it in terms of boost::hash_range\n\n            auto first = arg.data();\n            auto last = first + arg.length();\n            boost::hash_range(seed, first, last);\n\n            return seed;\n        }\n    };\n}\n\nstd::unordered_multimap&lt;CString , int&gt; m_Map2;    \n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 6265221, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QB8YUrpDBJM/AAAAAAAAAAI/AAAAAAAAAEQ/Y2btHcVQQ3g/photo.jpg?sz=128", "display_name": "Somil", "link": "https://stackoverflow.com/users/6265221/somil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 57590409, "answer_count": 1, "score": 0, "last_activity_date": 1566386190, "creation_date": 1566384330, "question_id": 57589909, "link": "https://stackoverflow.com/questions/57589909/how-to-have-an-unordered-multimap-of-unordered-multimaps", "title": "How to have an unordered_multimap of unordered_multimaps", "body": "<p>I was practicing through unordered_multimaps and I came across a problem of having an unordered_multimap containing another unordered_multimap.The compiler throws an error saying c++ standard does not provide hash of this type.I guess I have to write a hash function but my understanding is limited since I am new to STL.</p>\n\n<p>I have already tried something like inserting a struct or another multimap to the unordered_multimap but no luck so far.</p>\n\n<pre><code>std::unordered_multimap&lt;long,long&gt;m_Map1;\nstd::unordered_multimap&lt;CString,m_Map1&gt;m_Map2;    //This line throws \nerror\n//inserting to the map\nm_Map1.insert(std::pair&lt;long,long&gt;(10,20));\nm_Map2.insert(_T(\"ABC\"),m_Map1);\n//also the compiler does not let me create an object for this map\nm_Map1 m_ObjMap;    //error here as well\n</code></pre>\n\n<p>How should I implement this.What I am trying to achieve here is one person's Name associated with birthdate and date on which he dies.I was hoping of having the dates in one map and mapping it with name to the m_Map2.</p>\n"}, {"tags": ["c++", "linker"], "comments": [{"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 1, "creation_date": 1566384385, "post_id": 57589908, "comment_id": 101637143, "body": "Please provide the relevant code instead of describing it. Please <a href=\"https://stackoverflow.com/posts/57589908/edit\">edit</a> your post to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1566385245, "post_id": 57589908, "comment_id": 101637600, "body": "Note that the <code>static</code> keyword would only hide code from files compiled for c-linkage. You also can check the answer <a href=\"https://stackoverflow.com/questions/29224679/c-static-keyword-vs-c-private-scope\">here</a>"}, {"owner": {"reputation": 85, "user_id": 10633319, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Legolas", "link": "https://stackoverflow.com/users/10633319/legolas"}, "edited": false, "score": 1, "creation_date": 1566385283, "post_id": 57589908, "comment_id": 101637626, "body": "Please check freshly added code."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1566385821, "post_id": 57589908, "comment_id": 101637903, "body": "The identifiers in your code do not match the ones in your text. Please change your code to match your description of the code. Also, why does your <i>minimal</i> example define a <code>struct</code>? There is no mention of a <code>struct</code> in your text."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1566385963, "post_id": 57589908, "comment_id": 101637987, "body": "@Legolas <code>float dist(point a, point b)</code> is explicitely exported from your module and can legally call <code>float distance(point a, point b)</code> from your anonymous namespace. I don&#39;t see why you would expect a linker error for this case."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1566386009, "post_id": 57589908, "comment_id": 101638014, "body": "As for your actual question, why would you expect an error when <code>fun2</code> calls <code>fun1</code>?"}, {"owner": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "edited": false, "score": 1, "creation_date": 1566386026, "post_id": 57589908, "comment_id": 101638031, "body": "Why should it raise an error ? <code>dist()</code> is well-known. <code>distance()</code> is only used inside the <code>dist()</code> definition. When the linker tries to link <code>dist()</code> with its definition, it will find it in <i>mylib.cpp</i> and when it&#39;ll encounter the call to <code>distance()</code>, there will be no problem because the <code>distance()</code> definition was already encountered above. You just have created a file-private function. <code>distance()</code> is private in <i>mylib.cpp</i> and can be <b>used only here</b>. This is what you did, so it&#39;s fine. (I answered here because the question is still on-hold)"}, {"owner": {"reputation": 85, "user_id": 10633319, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Legolas", "link": "https://stackoverflow.com/users/10633319/legolas"}, "reply_to_user": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1566386288, "post_id": 57589908, "comment_id": 101638182, "body": "@JaMiT It says example."}, {"owner": {"reputation": 85, "user_id": 10633319, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Legolas", "link": "https://stackoverflow.com/users/10633319/legolas"}, "reply_to_user": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "edited": false, "score": 0, "creation_date": 1566386348, "post_id": 57589908, "comment_id": 101638221, "body": "@Fareanor my question is how are we able to utilize a file private function from another file."}, {"owner": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "edited": false, "score": 0, "creation_date": 1566386480, "post_id": 57589908, "comment_id": 101638302, "body": "In fact, you didn&#39;t. In another file, you only used <code>dist()</code> not <code>distance()</code> which is fine. <code>distance()</code> is only called inside the <code>dist()</code> definition which is located in the same file than <code>distance()</code> definition. To be more clear, <code>distance()</code> is private to <i>mylib.cpp</i> so you can call it only here. As you never called it outside, it works fine."}, {"owner": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "edited": false, "score": 0, "creation_date": 1566387601, "post_id": 57589908, "comment_id": 101638868, "body": "This being said, your function is file-private because it is not declared in any header. The anonymous namespace is only preventing you from breaking the one-definition-rule (if somewhere else you defined a function with the same name) by linking it internally to its translation unit."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1566593150, "post_id": 57589908, "comment_id": 101718996, "body": "@Legolas Yes, it does say &quot;example&quot;. Sorry, but I fail to see what point you are trying to make. Is it that I should have requested &quot;Please change your <i>example</i> code to match your description of the code&quot; instead of leaving out the word &quot;example&quot;?"}, {"owner": {"reputation": 85, "user_id": 10633319, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Legolas", "link": "https://stackoverflow.com/users/10633319/legolas"}, "reply_to_user": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1566681788, "post_id": 57589908, "comment_id": 101734946, "body": "@JaMiT what I&#39;m saying is that it&#39;s perfectly fine to give an example of the situation I described using different file names, albeit I get why you&#39;d like it to be that way."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1566686838, "post_id": 57589908, "comment_id": 101735693, "body": "@Legolas I disagree with &quot;perfectly&quot;. It is fine/allowable, but not perfectly fine. Case in point: when I read the first paragraph of your question I knew what you were talking about. Then I read the code you presented as an example, and I doubted myself. It wasn&#39;t until I you accepted an answer that I felt confident that my initial reading was correct. This is not a situation to describe as &quot;perfect&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": true, "score": 1, "last_activity_date": 1566399167, "creation_date": 1566399167, "answer_id": 57594304, "question_id": 57589908, "link": "https://stackoverflow.com/questions/57589908/shouldnt-using-functions-from-an-anonymous-namespace-or-static-functions-from-a/57594304#57594304", "title": "Shouldn&#39;t using functions from an anonymous namespace or static functions from another file give an error?", "body": "<blockquote>\n  <p>considering fun2 calls fun1 which is an anonymous namespace shouldn't I get an error?</p>\n</blockquote>\n\n<p>No.</p>\n\n<p>The <code>fun1</code> being in anonymous namespace means that it is usable (can be called) by any code inside <code>F1.cpp</code>, and not usable by any other code.</p>\n\n<p>Since <code>fun2</code> -- the user of <code>fun1</code> <em>is</em> in <code>F1.cpp</code>, there is no problem with <code>fun2</code> calling <code>fun1</code>.</p>\n\n<p>The <code>fun1</code> being in anonymous namespace places <em>absolutely no</em> restrictions on where <code>fun2</code> can be used.</p>\n"}], "owner": {"reputation": 85, "user_id": 10633319, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Legolas", "link": "https://stackoverflow.com/users/10633319/legolas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 57594304, "answer_count": 1, "score": -2, "last_activity_date": 1566602014, "creation_date": 1566384330, "last_edit_date": 1566602014, "question_id": 57589908, "link": "https://stackoverflow.com/questions/57589908/shouldnt-using-functions-from-an-anonymous-namespace-or-static-functions-from-a", "title": "Shouldn&#39;t using functions from an anonymous namespace or static functions from another file give an error?", "body": "<p>So, say in file <code>F1.cpp</code> I have functions <code>fun1</code> and <code>fun2</code>, with <code>fun1</code> belonging to an anonymous namespace also <code>fun2</code> makes a call to <code>fun1</code>. Now in my file <code>F2.cpp</code> I include <code>F1.h</code> which only has a signature for <code>fun2</code>, in <code>F2.cpp</code> I then make a call to <code>fun2</code>. I get no errors and the output is correct, but considering <code>fun2</code> calls <code>fun1</code> which is an anonymous namespace shouldn't I get an error?</p>\n\n<p>For example:</p>\n\n<p><strong>F1.h</strong></p>\n\n<pre><code>#ifndef F1_H\n#define F1_H\n\n// A function declaration\nfloat fun2();\n\n#endif\n</code></pre>\n\n<p><strong>F1.cpp</strong></p>\n\n<pre><code>#include \"F1.h\"\n\n// Anonymous namespace\nnamespace {\n    float fun1()\n    {\n        return 3.5f;\n    }\n}\n\n// Function that was declared in the header\nfloat fun2() {\n    return fun1();\n}\n</code></pre>\n\n<p><strong>F2.cpp</strong></p>\n\n<pre><code>#include \"F1.h\"\n\nint main()\n{\n    return static_cast&lt;int&gt;(fun2());\n}\n</code></pre>\n\n<p>Compiling these files together and then running gives no errors whatsoever.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1566383318, "post_id": 57589468, "comment_id": 101636601, "body": "<code>\\0</code> plays no special role in <code>std::string</code> and it is a mistake to add it as the end marker. <code>return &quot;\\0&quot;</code> should be <code>return &quot;&quot;</code>."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1566383462, "post_id": 57589468, "comment_id": 101636677, "body": "<code>rev</code> does not concatenate <code>char</code>s \u2013 <code>x[y - 1]</code> is a <code>char</code>, but <code>rev(x, y - 1)</code> is a <code>std::string</code>."}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 1, "creation_date": 1566383944, "post_id": 57589468, "comment_id": 101636914, "body": "Note that <code>&quot;\\0&quot;</code> is an array with <i>two</i> elements, each of which is a zero character."}, {"owner": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "edited": false, "score": 0, "creation_date": 1566384552, "post_id": 57589468, "comment_id": 101637237, "body": "<code>char</code> + <code>char</code> gives a single value which is the arithmetic sum of the <code>int</code>-converted values of the given <code>char</code>s. You need to call the <code>operator+()</code> over a <code>std::string</code> if you expects a concatenation. In the first case that you showed, it worked because the left-hand side was automatically converted into a <code>std::string</code> since you specified it as the return type."}], "answers": [{"tags": [], "owner": {"reputation": 647, "user_id": 1316208, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/90df3e6a20b27c31accd954b2a0093db?s=128&d=identicon&r=PG", "display_name": "user1316208", "link": "https://stackoverflow.com/users/1316208/user1316208"}, "is_accepted": false, "score": 1, "last_activity_date": 1566383216, "creation_date": 1566383216, "answer_id": 57589552, "question_id": 57589468, "link": "https://stackoverflow.com/questions/57589468/concatenating-char-variables/57589552#57589552", "title": "Concatenating char variables", "body": "<p>Your first example implicitly converts characters to strings and uses appropriate operator +  </p>\n\n<p>While your second example is adding up characters\n<a href=\"https://en.cppreference.com/w/cpp/string/basic_string/operator_at\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/string/basic_string/operator_at</a><br>\nreturns reference to character at position</p>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 10787773, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ydoWErjkELk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-imyh7TkyQBAZyzFwLOuanIQ5AQDQ/mo/photo.jpg?sz=128", "display_name": "tin tan", "link": "https://stackoverflow.com/users/10787773/tin-tan"}, "edited": false, "score": 0, "creation_date": 1566509779, "post_id": 57589574, "comment_id": 101689523, "body": "But, why was the &quot;+&quot; sign overloaded in my first example? Was it because I specified the return type as &quot;string&quot; as specified by user, Fareanor, in his comment above?"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1566383689, "last_edit_date": 1566383689, "creation_date": 1566383302, "answer_id": 57589574, "question_id": 57589468, "link": "https://stackoverflow.com/questions/57589468/concatenating-char-variables/57589574#57589574", "title": "Concatenating char variables", "body": "<p>Writing instead</p>\n\n<pre><code>hd = \"\"s + ah[2] + ah[1] + ah[0];\n</code></pre>\n\n<p>will, informally speaking, put <code>+</code> into a \"concatenation mode\", achieving what you want. <code>\"\"s</code> is a C++14 user-defined literal of type <code>std::string</code>, and that tells the compiler to use the overloaded <code>+</code> operator on the <code>std::string</code> class on subsequent terms in the expression. (An overloaded <code>+</code> operator is also called in the first example you present.)</p>\n\n<p>Otherwise, <code>ah[2] + ah[1] + ah[0]</code> is an arithmetic sum over <code>char</code> values (each one converted to an <code>int</code> due to implicit conversion rules), with the potential hazard of <code>signed</code> overflow on assignment to <code>hd</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "edited": false, "score": 0, "creation_date": 1566384426, "post_id": 57589769, "comment_id": 101637162, "body": "This is a much better way to achieve it :) But it does not answer the question that is not about how to make it work (since it already works) but is more about the use of the operator <code>+</code> (on which the OP seems to have misunderstood the behaviour)."}], "tags": [], "owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "is_accepted": false, "score": 0, "last_activity_date": 1566383914, "creation_date": 1566383914, "answer_id": 57589769, "question_id": 57589468, "link": "https://stackoverflow.com/questions/57589468/concatenating-char-variables/57589769#57589769", "title": "Concatenating char variables", "body": "<p>How about making use of everything that's already available?</p>\n\n<pre><code>string rev(const string &amp;x) { return string{x.rbegin(), x.rend()}; }\n</code></pre>\n\n<p>Reverse iterators allow you to reverse the string, and the constructor of string with 2 iterators, constructs an element by iterati from begin to end.</p>\n"}], "owner": {"reputation": 49, "user_id": 10787773, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ydoWErjkELk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-imyh7TkyQBAZyzFwLOuanIQ5AQDQ/mo/photo.jpg?sz=128", "display_name": "tin tan", "link": "https://stackoverflow.com/users/10787773/tin-tan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1566383914, "creation_date": 1566382899, "question_id": 57589468, "link": "https://stackoverflow.com/questions/57589468/concatenating-char-variables", "title": "Concatenating char variables", "body": "<p>I tried making a small program using the libraries \"iostream\" and \"String\" to display a given string backwardly as the output on the command prompt. I used a recursive returning-value (string) function to perform the whole process of getting the given string in backward and returning it to the main function to be displayed on screen, as you can see below: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\nstring rev(string, int); \n\nint main() {\n    string let; \n    cout &lt;&lt; \"Enter your string: \"; \n    cin &gt;&gt; let; \n    cout &lt;&lt; \"The string in reverse is: \" &lt;&lt; rev(let, let.length());\n    cout &lt;&lt; endl;\n    return 0;\n}\n\nstring rev(string x, int y) {\n    if (y != 0 )\n        return x[y - 1] + rev(x, y - 1);\n    else\n        return \"\\0\";\n}\n</code></pre>\n\n<p>What I don't get about the process, is that while the concatenation performed on the <em>rev</em> function, recursively, and with the char variables works correctly and returns the string in backward to the main function, trying to concatenate the char variables normally like this gives rubbish as the output:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main() {\n    string hd; \n    string ah = \"foo\";\n    hd = ah[2] + ah[1] + ah[0];\n    cout &lt;&lt; hd &lt;&lt; endl; \n    return 0;\n}\n</code></pre>\n\n<p>And even if I add to the \"hd\" chain \"\\0\", it still gives rubbish.</p>\n"}, {"tags": ["c++", "qt", "qt5", "qtranslator"], "answers": [{"tags": [], "owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "is_accepted": true, "score": 4, "last_activity_date": 1566382829, "creation_date": 1566382829, "answer_id": 57589449, "question_id": 57589351, "link": "https://stackoverflow.com/questions/57589351/qtranslator-not-working-when-used-in-a-if-statement/57589449#57589449", "title": "QTranslator not working when used in a if statement", "body": "<p>The problem is that the <code>translator</code> object is destroyed as soon as the program execution exits your <code>if</code> statement's body where it was defined. What you can do is:</p>\n\n<pre><code>[..]\nif (phoneLang != QLocale::Italian) {\n    QTranslator *translator = new QTranslator;\n    bool loaded = translator-&gt;load(\":/notizie_en_UK.qm\");\n    bool installed = app.installTranslator(translator);\n    qDebug() &lt;&lt; \"Adding translation\" &lt;&lt; loaded &lt;&lt; installed;\n}\n[..]\n</code></pre>\n\n<p>However you must take care off destroying <code>translator</code> object yourself when necessary.</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>You may define a parent of your translator that will clean up its child objects. For example:</p>\n\n<pre><code>// The application is translator's parent.\nQTranslator *translator = new QTranslator(app);\n</code></pre>\n"}], "owner": {"reputation": 558, "user_id": 1466885, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4f3dbc479f96b0133eb624336e7842c9?s=128&d=identicon&r=PG&f=1", "display_name": "daljit97", "link": "https://stackoverflow.com/users/1466885/daljit97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 57589449, "answer_count": 1, "score": -1, "last_activity_date": 1566382829, "creation_date": 1566382464, "last_edit_date": 1592644375, "question_id": 57589351, "link": "https://stackoverflow.com/questions/57589351/qtranslator-not-working-when-used-in-a-if-statement", "title": "QTranslator not working when used in a if statement", "body": "<p>I added a translation file using Qt Linguist. Then I proceeded to use <code>QTranslator</code> when my app is loaded:</p>\n<pre><code>    QTranslator translator;\n    bool loaded = translator.load(&quot;:/notizie_en_UK.qm&quot;);\n    bool installed = app.installTranslator(&amp;translator);\n    qDebug() &lt;&lt; &quot;Adding translation&quot; &lt;&lt; loaded &lt;&lt; installed;\n</code></pre>\n<p>This works fine.\nNow I wanted to use the translation only if the system language wasn't already the default language so I did the following:</p>\n<pre><code>QLocale::Language phoneLang = QLocale::system().language();\nqDebug() &lt;&lt; &quot;LANGUAGE&quot; &lt;&lt; phoneLang &lt;&lt; (phoneLang != QLocale::Italian);\nif(phoneLang != QLocale::Italian){\n    QTranslator translator;\n    bool loaded = translator.load(&quot;:/notizie_en_UK.qm&quot;);\n    bool installed = app.installTranslator(&amp;translator);\n    qDebug() &lt;&lt; &quot;Adding translation&quot; &lt;&lt; loaded &lt;&lt; installed;\n}\nelse{\n    qDebug() &lt;&lt; &quot;Using italian&quot;;\n}\n</code></pre>\n<p>However this doesn't work. If a system in English for example, the translator doesn't work and the default language of the app is used (in this case Italian).</p>\n<p>The output from <code>qDebug()</code> is:</p>\n<blockquote>\n<p>LANGUAGE QLocale::English true</p>\n<p>Adding translation true true</p>\n</blockquote>\n"}, {"tags": ["c++", "turbo-c++"], "comments": [{"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1566458223, "post_id": 57589217, "comment_id": 101664071, "body": "write a template class that will new/delete/realloc on demand ..."}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 4, "last_activity_date": 1566382488, "creation_date": 1566382488, "answer_id": 57589359, "question_id": 57589217, "link": "https://stackoverflow.com/questions/57589217/how-to-make-an-array-of-variable-size-in-c-in-tubo-c/57589359#57589359", "title": "how to make an array of variable size in c++ in tubo c++", "body": "<p>Yeah, you can't create a VLA in C++ (though some toolchains support it as an extension via their C functionality; not yours).</p>\n\n<p>And, since <a href=\"https://stackoverflow.com/a/29329867/560648\">your toolchain is too old to have vectors</a>, you're stuck with <code>new[]</code> and <code>delete[]</code>.</p>\n\n<p>Try to encourage your school to move on from the 1980s.</p>\n"}, {"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1566382914, "post_id": 57589441, "comment_id": 101636405, "body": "Turbo-c++ doesn&#39;t have a <code>std::vector</code> implementation."}], "tags": [], "owner": {"reputation": 5541, "user_id": 9967571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EwjwT.png?s=128&g=1", "display_name": "jignatius", "link": "https://stackoverflow.com/users/9967571/jignatius"}, "is_accepted": false, "score": 2, "last_activity_date": 1566383203, "last_edit_date": 1566383203, "creation_date": 1566382802, "answer_id": 57589441, "question_id": 57589217, "link": "https://stackoverflow.com/questions/57589217/how-to-make-an-array-of-variable-size-in-c-in-tubo-c/57589441#57589441", "title": "how to make an array of variable size in c++ in tubo c++", "body": "<p>You're trying to declare a fixed size array of size 10 here. However, the size needs to be a compile constant. So you need to do this:</p>\n\n<pre><code>const int n = 10;\nint arr[n];\n</code></pre>\n\n<p>But if you only know the size at run time, you need to dynamically allocate the array. For that you do this:</p>\n\n<pre><code>int *arr = new int[n];\n</code></pre>\n\n<p>You must remember to deallocate the array with delete [] arr.</p>\n\n<p>Better to use a std::vector, which will take care of the memory allocation and deallocation for you.</p>\n"}], "owner": {"reputation": 1, "user_id": 11956352, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dfjG7SVCF1s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reQ0NUeIMDnVU9d2ThRjjJ8NfzlnA/photo.jpg?sz=128", "display_name": "Abdullah Rashid", "link": "https://stackoverflow.com/users/11956352/abdullah-rashid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "closed_date": 1566457070, "answer_count": 2, "score": -2, "last_activity_date": 1566413987, "creation_date": 1566382045, "last_edit_date": 1566413987, "question_id": 57589217, "link": "https://stackoverflow.com/questions/57589217/how-to-make-an-array-of-variable-size-in-c-in-tubo-c", "closed_reason": "Not suitable for this site", "title": "how to make an array of variable size in c++ in tubo c++", "body": "<p>How can I write a variable sized array...for instance</p>\n\n<pre><code>int n;\nn=10;\nint arr[n];\n</code></pre>\n\n<p>now, that won't compile on my compiler (turbo c++). can anyone help me and tell me how I can create an array that is of a variable size?\nmy compiler gives the error that it cant convert int into int* (i.e, it cant convert the x into the array[x])</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 1080, "user_id": 11890657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e128d9b341fa1abad09bab0576aacd7f?s=128&d=identicon&r=PG&f=1", "display_name": "Chelmy88", "link": "https://stackoverflow.com/users/11890657/chelmy88"}, "edited": false, "score": 3, "creation_date": 1566382077, "post_id": 57589204, "comment_id": 101635931, "body": "Hello. Can we see the loop please?"}, {"owner": {"reputation": 136, "user_id": 6412806, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fSC3n.png?s=128&g=1", "display_name": "42LeapsOfFaith", "link": "https://stackoverflow.com/users/6412806/42leapsoffaith"}, "edited": false, "score": 2, "creation_date": 1566382142, "post_id": 57589204, "comment_id": 101635968, "body": "Looks like you looped 11 times,  not 10!"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 2, "creation_date": 1566382151, "post_id": 57589204, "comment_id": 101635973, "body": "<code>7</code> is missing from the output."}, {"owner": {"reputation": 2568, "user_id": 8548828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C4qkl.png?s=128&g=1", "display_name": "Tarick Welling", "link": "https://stackoverflow.com/users/8548828/tarick-welling"}, "edited": false, "score": 1, "creation_date": 1566382284, "post_id": 57589204, "comment_id": 101636043, "body": "Hello and welcome to StackOverflow. Please take some time to read the <a href=\"https://stackoverflow.com/help\">help page</a>, especially the sections named <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask</a>. You might also want to learn about <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. You didn&#39;t include the loop you are actually using and that is probably the problem in your code."}, {"owner": {"reputation": 8864, "user_id": 243925, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/94b734ac6e85d9f279ee7286f28d6145?s=128&d=identicon&r=PG", "display_name": "Tony", "link": "https://stackoverflow.com/users/243925/tony"}, "edited": false, "score": 0, "creation_date": 1566385020, "post_id": 57589204, "comment_id": 101637477, "body": "Your array only contains 10 elements (indexed 0 to 9) but your loop iterates 20 times (0 to 19). Iterating past the end of an array means you are reading undefined memory locations, that&#39;s why you get the random numbers."}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1566385074, "post_id": 57589204, "comment_id": 101637501, "body": "Read this: <a href=\"https://stackoverflow.com/questions/1239938/accessing-an-array-out-of-bounds-gives-no-error-why\" title=\"accessing an array out of bounds gives no error why\">stackoverflow.com/questions/1239938/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 363, "user_id": 11249957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6002dbfc2a513f20bbd1191118595a3c?s=128&d=identicon&r=PG&f=1", "display_name": "dodekja", "link": "https://stackoverflow.com/users/11249957/dodekja"}, "is_accepted": false, "score": -1, "last_activity_date": 1566382240, "creation_date": 1566382240, "answer_id": 57589277, "question_id": 57589204, "link": "https://stackoverflow.com/questions/57589204/unexplained-last-item-in-array/57589277#57589277", "title": "Unexplained last item in array", "body": "<p>The last element is so large, because it is not defined. Undefined <code>int</code> tends to be a random <code>int</code> which can be a pretty large number. You have defined numbers only on indexes from 0 to 9.</p>\n\n<p>However, the problem might be in the loop that outputs the numbers in array. Could you provide that too?</p>\n"}, {"tags": [], "owner": {"reputation": 8864, "user_id": 243925, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/94b734ac6e85d9f279ee7286f28d6145?s=128&d=identicon&r=PG", "display_name": "Tony", "link": "https://stackoverflow.com/users/243925/tony"}, "is_accepted": true, "score": 0, "last_activity_date": 1566472656, "creation_date": 1566472656, "answer_id": 57608163, "question_id": 57589204, "link": "https://stackoverflow.com/questions/57589204/unexplained-last-item-in-array/57608163#57608163", "title": "Unexplained last item in array", "body": "<p>Your array contains 10 elements (indexed 0 to 9)</p>\n\n<pre><code>int distances[10] = {10, 11, 14, 12, 11, 14, 9, 7, 10, 10};\n                     ^   ^   ^   ^   ^   ^   ^  ^  ^   ^\n                     0   1   2   3   4   5   6  7  8   9\n</code></pre>\n\n<p>but your loop iterates 20 times (0 to 19)</p>\n\n<pre><code>int distances[10] = {10, 11, 14, 12, 11, 14, 9, 7, 10, 10}; ?      ?\n                     ^   ^   ^   ^   ^   ^   ^  ^  ^   ^    ^      ^\n                     0   1   2   3   4   5   6  7  8   9    10 ... 19\n</code></pre>\n\n<p>Iterating past the end of an array means you are reading undefined memory locations, which is why you get the random numbers - it's data being interpreted as integers.</p>\n\n<p>You can calculate the number elements in the array using</p>\n\n<pre><code>sizeof(distances)/sizeof(distances[0])\n</code></pre>\n\n<p>but if you are using C++11 you should be able to use</p>\n\n<pre><code>for(int distance : distances)\n</code></pre>\n\n<p>Search for related questions here on stackoverflow, such as the <a href=\"https://stackoverflow.com/questions/20234898/correct-way-of-loop-through-the-c-arrays\">Correct way of loop through the C++ arrays</a> and <a href=\"https://stackoverflow.com/questions/1239938/accessing-an-array-out-of-bounds-gives-no-error-why\">Accessing an array out of bounds gives no error, why?</a></p>\n"}], "owner": {"reputation": 3, "user_id": 8679548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/547f803594442e24e2f7fe2d79105720?s=128&d=identicon&r=PG&f=1", "display_name": "gabe rau", "link": "https://stackoverflow.com/users/8679548/gabe-rau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 57608163, "answer_count": 2, "score": -4, "last_activity_date": 1566472656, "creation_date": 1566381998, "last_edit_date": 1566383503, "question_id": 57589204, "link": "https://stackoverflow.com/questions/57589204/unexplained-last-item-in-array", "title": "Unexplained last item in array", "body": "<p>I have the following array: </p>\n\n<pre><code>int distances[10] = {10, 11, 14, 12, 11, 14, 9, 7, 10, 10};\n</code></pre>\n\n<p>When I ran this array through this for loop: </p>\n\n<p><code>for (int j = 0; j &lt;= 20; j++) {\n        std::cout &lt;&lt; distances[j] &lt;&lt; \" \";\n}</code></p>\n\n<p>and printed all of the outputs, this was my output: </p>\n\n<pre><code>10, 11, 14, 12, 11, 14, 9, 7, 10, 10, 4196294, 0, -487465136, 30021, 0, 0, 0, 0, -359687355, 26470, 0  \n</code></pre>\n\n<p>Why are the last 11 elements so varied in size and not in the rest of the array?  </p>\n"}, {"tags": ["c++", "csv", "omnet++"], "answers": [{"tags": [], "owner": {"reputation": 5342, "user_id": 4653172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c894c1021e3092a98cdd62d88e69819?s=128&d=identicon&r=PG&f=1", "display_name": "Jerzy D.", "link": "https://stackoverflow.com/users/4653172/jerzy-d"}, "is_accepted": false, "score": 1, "last_activity_date": 1566388931, "creation_date": 1566388931, "answer_id": 57591172, "question_id": 57589186, "link": "https://stackoverflow.com/questions/57589186/how-can-i-integrate-a-csv-file-into-omnet-latest-version/57591172#57591172", "title": "How can I integrate a CSV-File into OMNeT++ latest Version?", "body": "<p>OMNeT++ uses C++ to define behavior of modules, so one can use any available in C++ way to open a CSV file and parse it, for example look at <a href=\"https://stackoverflow.com/questions/1120140/how-can-i-read-and-parse-csv-files-in-c\">this answer</a>.<br>\nMoreover, OMNeT++ API contains <a href=\"https://doc.omnetpp.org/omnetpp/api/classomnetpp_1_1cStringTokenizer.html\" rel=\"nofollow noreferrer\">cStringTokenizer</a> class that may be used to parse a string.</p>\n"}], "owner": {"reputation": 21, "user_id": 9948346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0914de4675b614d88d2a5f1386175c0b?s=128&d=identicon&r=PG&f=1", "display_name": "kiko", "link": "https://stackoverflow.com/users/9948346/kiko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1566388931, "creation_date": 1566381947, "question_id": 57589186, "link": "https://stackoverflow.com/questions/57589186/how-can-i-integrate-a-csv-file-into-omnet-latest-version", "title": "How can I integrate a CSV-File into OMNeT++ latest Version?", "body": "<p>I use the Version 5.4.1 and Need to add a CSV-File that contains weather datas to OMNeT++ for simulating the Dataexchange between nodes. I do not know how I can add this file to OMNeT++ and could not find anything helpful in the documentation. Thanks.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 6260, "user_id": 10933809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IR53l.jpg?s=128&g=1", "display_name": "Oblivion", "link": "https://stackoverflow.com/users/10933809/oblivion"}, "edited": false, "score": 8, "creation_date": 1566381382, "post_id": 57588918, "comment_id": 101635508, "body": "Don&#39;t use <code>using namespace std;</code>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1566381553, "post_id": 57588918, "comment_id": 101635605, "body": "No, there&#39;s no way you can prevent that but regular code reviews."}, {"owner": {"reputation": 768, "user_id": 10765031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19818c272f28b0be58edab2373192e34?s=128&d=identicon&r=PG&f=1", "display_name": "fdan", "link": "https://stackoverflow.com/users/10765031/fdan"}, "edited": false, "score": 3, "creation_date": 1566381765, "post_id": 57588918, "comment_id": 101635748, "body": "I think the only way is using static analyzers to regularly check your codebase"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 768, "user_id": 10765031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19818c272f28b0be58edab2373192e34?s=128&d=identicon&r=PG&f=1", "display_name": "fdan", "link": "https://stackoverflow.com/users/10765031/fdan"}, "edited": false, "score": 0, "creation_date": 1566381837, "post_id": 57588918, "comment_id": 101635794, "body": "@fdan That&#39;s indeed some way, but you need to do some configurable static analyzer."}, {"owner": {"reputation": 363, "user_id": 11249957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6002dbfc2a513f20bbd1191118595a3c?s=128&d=identicon&r=PG&f=1", "display_name": "dodekja", "link": "https://stackoverflow.com/users/11249957/dodekja"}, "edited": false, "score": 0, "creation_date": 1566381945, "post_id": 57588918, "comment_id": 101635855, "body": "maybe by configuring custom error in your compiler, if that&#39;s possible"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 6260, "user_id": 10933809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IR53l.jpg?s=128&g=1", "display_name": "Oblivion", "link": "https://stackoverflow.com/users/10933809/oblivion"}, "edited": false, "score": 0, "creation_date": 1566390570, "post_id": 57588918, "comment_id": 101640563, "body": "@Oblivion That is good advice but even without that <code>sort(v.begin(), v.end());</code> where <code>v</code> is a <code>std::vector</code> will still call <code>std::sort</code> because of ADL.  It is very hard stop ADL."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1566401692, "post_id": 57588918, "comment_id": 101647380, "body": "@NathanOliver: <code>std::vector&lt;T&gt;::iterator</code> is not the best example, as it might simply be <code>T*</code> (and even if it is a class, that class doesn&#39;t have to be in namespace <code>std</code>). But idea is here."}], "answers": [{"tags": [], "owner": {"reputation": 2151, "user_id": 5902079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4df4530b8e41c66ac12d17f96cd70c6c?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Gordon", "link": "https://stackoverflow.com/users/5902079/dmitry-gordon"}, "is_accepted": true, "score": 5, "last_activity_date": 1566382050, "creation_date": 1566382050, "answer_id": 57589218, "question_id": 57588918, "link": "https://stackoverflow.com/questions/57588918/prevent-certain-std-functions-from-being-called/57589218#57589218", "title": "Prevent certain std functions from being called", "body": "<p>You shouldn't try override o change functions in a standard library since in the first case you will have ODR violation and in the second case some of the thirdparties may used in your project may be affected.</p>\n\n<p>I would suggest you to create a custom check for <a href=\"https://clang.llvm.org/extra/clang-tidy/\" rel=\"noreferrer\">clang-tidy</a> and add a CI job to run it on your codebase. This will take some time but I believe this is the best option.</p>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 3, "last_activity_date": 1566382149, "creation_date": 1566382149, "answer_id": 57589251, "question_id": 57588918, "link": "https://stackoverflow.com/questions/57588918/prevent-certain-std-functions-from-being-called/57589251#57589251", "title": "Prevent certain std functions from being called", "body": "<p>There's no way you can mark any of the standard functions as unwanted in your code base.</p>\n\n<p>You can do regular code reviews, or use a configurable static analysis tool to check committed code for usage of the unwanted functions though.<br>\nThe latter only makes sense with an established CI process for your software.</p>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 10258827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e2Ucm.jpg?s=128&g=1", "display_name": "Liviu Stancu", "link": "https://stackoverflow.com/users/10258827/liviu-stancu"}, "is_accepted": false, "score": 0, "last_activity_date": 1566382360, "creation_date": 1566382360, "answer_id": 57589319, "question_id": 57588918, "link": "https://stackoverflow.com/questions/57588918/prevent-certain-std-functions-from-being-called/57589319#57589319", "title": "Prevent certain std functions from being called", "body": "<p>If you would like to prevent complete headers from being included you could use some header file inclusion static analysis tools (that you could add to your build chain. See <a href=\"https://stackoverflow.com/questions/6685457/header-file-inclusion-static-analysis-tools\">Header file inclusion static analysis tools?</a>).\nIn case you are trying to prevent from using only certain functions from the std namespace (of course, without modifying the std headers) then I don't think that's possible.</p>\n"}], "owner": {"reputation": 9266, "user_id": 87987, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1fc288013355b9cd9e16708d3babbc59?s=128&d=identicon&r=PG", "display_name": "nimcap", "link": "https://stackoverflow.com/users/87987/nimcap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 57589218, "answer_count": 3, "score": 6, "last_activity_date": 1566382360, "creation_date": 1566381063, "question_id": 57588918, "link": "https://stackoverflow.com/questions/57588918/prevent-certain-std-functions-from-being-called", "title": "Prevent certain std functions from being called", "body": "<p>For certain reasons we should not use certain std functions like <code>std::sort()</code> in our code base (we have our own implementations for those).</p>\n\n<p>Is there a way to prevent calls to those functions, preferably by raising an error at compile time?</p>\n\n<p>I looked at overriding std functions but it leads to undefined behavior. </p>\n"}, {"tags": ["c++", "std"], "answers": [{"tags": [], "owner": {"reputation": 647, "user_id": 1316208, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/90df3e6a20b27c31accd954b2a0093db?s=128&d=identicon&r=PG", "display_name": "user1316208", "link": "https://stackoverflow.com/users/1316208/user1316208"}, "is_accepted": true, "score": 6, "last_activity_date": 1566390352, "last_edit_date": 1566390352, "creation_date": 1566380694, "answer_id": 57588809, "question_id": 57588668, "link": "https://stackoverflow.com/questions/57588668/does-stdany-of-guarantee-the-order-of-iteration-when-used-with-sequencial-exec/57588809#57588809", "title": "Does std::any_of guarantee the order of iteration when used with sequencial execution policy?", "body": "<p>regarding <strong><a href=\"https://en.cppreference.com/w/cpp/algorithm/execution_policy_tag_t\" rel=\"nofollow noreferrer\"><code>std::execution::sequenced_policy</code></a></strong>:  </p>\n\n<blockquote>\n  <p>The invocations of element access functions in parallel algorithms invoked with this policy (usually specified as <code>std::execution::seq</code>) are indeterminately sequenced in the calling thread.</p>\n</blockquote>\n\n<p>regarding <strong><a href=\"https://en.cppreference.com/w/cpp/language/eval_order\" rel=\"nofollow noreferrer\">indeterminately-sequenced</a></strong>:  </p>\n\n<blockquote>\n  <p>evaluations of <code>A</code> and <code>B</code> are indeterminately sequenced: they may be performed in any order but may not overlap: either <code>A</code> will be complete before <code>B</code>, or <code>B</code> will be complete before <code>A</code>.</p>\n</blockquote>\n\n<p>To me this seems like explicit statement that you cant rely on order of things.<br>\nI didnt expect this..  </p>\n\n<p>In principle it should not matter to you though. It seems dubious to call <code>std::any_of</code> or <code>std::all_of</code> on something with side effects.  </p>\n"}, {"tags": [], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "is_accepted": false, "score": 6, "last_activity_date": 1566387048, "last_edit_date": 1566387048, "creation_date": 1566385883, "answer_id": 57590333, "question_id": 57588668, "link": "https://stackoverflow.com/questions/57588668/does-stdany-of-guarantee-the-order-of-iteration-when-used-with-sequencial-exec/57590333#57590333", "title": "Does std::any_of guarantee the order of iteration when used with sequencial execution policy?", "body": "<p>You ask about <em>sequential execution policy</em> but call an overload where no policy is specified. These may differ, since the overload that accepts an execution policy requires <code>ForwardIterator</code> while the other one requires <code>InputIterator</code>: <a href=\"http://eel.is/c++draft/alg.any.of\" rel=\"noreferrer\">http://eel.is/c++draft/alg.any.of</a>.</p>\n\n<p>The Standard then says here: <a href=\"http://eel.is/c++draft/algorithms.requirements#4.1\" rel=\"noreferrer\">http://eel.is/c++draft/algorithms.requirements#4.1</a>:</p>\n\n<blockquote>\n  <p>If an algorithm's template parameter is named <code>InputIterator</code>, <code>InputIterator1</code>, or <code>InputIterator2</code>, the template argument shall meet the <em>Cpp17InputIterator</em> requirements.</p>\n</blockquote>\n\n<p>This basically means that the implementation may only increment the input iterator and the range will be processed in order.</p>\n\n<p>On the contrary, I am not sure whether the implementation may or may not provide an additional algorithm version for some other type of iterator, such as the random-access one.</p>\n\n<p>A relevant question: <a href=\"https://stackoverflow.com/q/17356719/580083\">Why std::transform doesn&#39;t guarantee the order (but for_each guarantee the order)? Doesn&#39;t this allow trick implementation for performance?</a>. One comment there says: </p>\n\n<blockquote>\n  <p>The implementation is free to detect stronger iterator strengths and apply a different (possibly out-of-order) algorithm.</p>\n</blockquote>\n\n<p>Though there is some discussion about it. If it is true, the order is guaranteed only if the iterator is of input type. </p>\n"}], "owner": {"reputation": 123, "user_id": 8085711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d89f0d019c3b27baea2ecd5799e1bc?s=128&d=identicon&r=PG&f=1", "display_name": "Asperamanca", "link": "https://stackoverflow.com/users/8085711/asperamanca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 2, "accepted_answer_id": 57588809, "answer_count": 2, "score": 8, "last_activity_date": 1566390352, "creation_date": 1566380181, "last_edit_date": 1566382027, "question_id": 57588668, "link": "https://stackoverflow.com/questions/57588668/does-stdany-of-guarantee-the-order-of-iteration-when-used-with-sequencial-exec", "title": "Does std::any_of guarantee the order of iteration when used with sequencial execution policy?", "body": "<p>I have a list of filter functions. If any of these functions return 'true', I should not process an event further.</p>\n\n<p>std::any_of seems suitable for this use case, but I wish to guarantee that the filter functions are called in the order they have been appended to my list (because of possible side effects they may have).\nTherefore, if I use std::any_of, I need to know the order it calls the filter functions is deterministic, from begin() to end() of the list. </p>\n\n<p>I have checked the C++ standard on std::any_of and the sequential execution policy, but found no mention of order guarantees. I did not find mention about order guarantees on cppreference, and did not find an answered question similar enough on stackoverflow.</p>\n\n<p>My conclusion is that there are no order guarantees. Although most compilers will probably process the functions in my in order, I should not rely on it.</p>\n\n<pre><code>bool MyClass::event(QEvent* event)\n{\n    std::vector&lt;std::function&lt;bool(QEvent*)&gt; &gt; functionList = getCurrentEventFilters();\n\n    const auto bFilter = std::any_of(functionList .begin(),\n                                     functionList .end(),\n                                     [&amp;event](std::function&lt;bool(QEvent*)&gt; function) {return function(event);});\n    if (bFilter)\n    {\n        return true;\n    }\n\n    return Base::event(event);\n}\n</code></pre>\n"}, {"tags": ["c++", "string", "performance", "memory-management", "standards"], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1566380885, "last_edit_date": 1592644375, "creation_date": 1566380523, "answer_id": 57588761, "question_id": 57588615, "link": "https://stackoverflow.com/questions/57588615/does-the-c-standard-guarantee-that-stdstringresizenew-size-will-not-caus/57588761#57588761", "title": "Does the C++ standard guarantee that std::string::resize(new_size) will not cause allocation if the new_size is not greater than the old one?", "body": "<p>Note first that standards normally set requirements rather than guarantees.</p>\n<p><code>std::basic_string::resize</code> is not required to not reallocate the string if <code>resize</code> argument is less than its current <code>size()</code>. In fact, the C++17 standard says that the current string is replaced by a new string:</p>\n<blockquote>\n<p>If <code>n &lt;= size()</code>, the function replaces the string designated by <code>*this</code> with a string of length <code>n</code>\nwhose elements are a copy of the initial elements of the original string designated by <code>*this</code>.</p>\n</blockquote>\n<p>When small string optimization is used, resizing to a smaller size may cause the string to store the characters in-place, rather than in a dynamically allocated buffer.</p>\n<hr />\n<p>In C++20 standard <code>resize</code> is made <code>constexpr</code> and the above wording is gone, see <a href=\"http://eel.is/c++draft/string.capacity#5.1\" rel=\"nofollow noreferrer\">string.capacity</a>:</p>\n<blockquote>\n<p><code>constexpr void resize(size_type n, charT c);</code></p>\n<p>5 #Effects: Alters the value of <code>*this</code> as follows:</p>\n<p>(5.1) If <code>n &lt;= size()</code>, erases the last <code>size() - n</code> elements.</p>\n<p>(5.2) If <code>n &gt; size()</code>, appends <code>n - size()</code> copies of <code>c</code>.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 4, "last_activity_date": 1566380909, "last_edit_date": 1592644375, "creation_date": 1566380578, "answer_id": 57588779, "question_id": 57588615, "link": "https://stackoverflow.com/questions/57588615/does-the-c-standard-guarantee-that-stdstringresizenew-size-will-not-caus/57588779#57588779", "title": "Does the C++ standard guarantee that std::string::resize(new_size) will not cause allocation if the new_size is not greater than the old one?", "body": "<p>It does not guarantee validity of pointers:</p>\n<blockquote>\n<p>References, pointers, and iterators referring to the elements of a basic_\u00adstring sequence may be invalidated by the following uses of that basic_\u00adstring object:</p>\n<ul>\n<li><p>Passing as an argument to any standard library function taking a reference to non-const basic_\u00adstring as an argument.</p>\n</li>\n<li><p>Calling non-const member functions, except operator[], at, data, front, back, begin, rbegin, end, and rend.</p>\n</li>\n</ul>\n</blockquote>\n<p><code>resize</code> is a non const member function and is not in the list of member functions guaranteed to not invalidate references.</p>\n"}], "owner": {"reputation": 33107, "user_id": 508343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c7fe4b419ef78796ae89e40665c4394b?s=128&d=identicon&r=PG", "display_name": "xmllmx", "link": "https://stackoverflow.com/users/508343/xmllmx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "closed_date": 1566387273, "accepted_answer_id": 57588761, "answer_count": 2, "score": 5, "last_activity_date": 1566380909, "creation_date": 1566379996, "last_edit_date": 1566380415, "question_id": 57588615, "link": "https://stackoverflow.com/questions/57588615/does-the-c-standard-guarantee-that-stdstringresizenew-size-will-not-caus", "closed_reason": "Duplicate", "title": "Does the C++ standard guarantee that std::string::resize(new_size) will not cause allocation if the new_size is not greater than the old one?", "body": "<pre><code>#include &lt;string&gt;\n#include &lt;cassert&gt;\n\nint main()\n{\n    auto s = \"hello\"s;\n    auto p = &amp;s[0];\n\n    s.resize(3);\n    assert('h' == *p); // always ok?\n}\n</code></pre>\n\n<p><strong>Does the C++ standard guarantee that <code>std::string::resize(new_size)</code> will not cause allocation if the <code>new_size</code> is not greater than the old one?</strong></p>\n"}, {"tags": ["c++", "templates", "metaprogramming", "sizeof"], "comments": [{"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 1, "creation_date": 1566379709, "post_id": 57588506, "comment_id": 101634452, "body": "In the final code snippet, do you mean something other than <code>char</code>?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1566379809, "post_id": 57588506, "comment_id": 101634516, "body": "Did you mean non-type template parameter?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1566380425, "post_id": 57588506, "comment_id": 101634944, "body": "Is <code>foo</code> supposed to be a <code>constexpr char *</code> or a <code>constexpr char []</code>?"}, {"owner": {"reputation": 656, "user_id": 569046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa7e9ca1d9249db03849e44977e3cc5f?s=128&d=identicon&r=PG", "display_name": "Alex Meiburg", "link": "https://stackoverflow.com/users/569046/alex-meiburg"}, "edited": false, "score": 0, "creation_date": 1566385457, "post_id": 57588506, "comment_id": 101637717, "body": "Sorry, I meant a <code>[]</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2151, "user_id": 5902079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4df4530b8e41c66ac12d17f96cd70c6c?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Gordon", "link": "https://stackoverflow.com/users/5902079/dmitry-gordon"}, "is_accepted": true, "score": 2, "last_activity_date": 1566380741, "creation_date": 1566380741, "answer_id": 57588823, "question_id": 57588506, "link": "https://stackoverflow.com/questions/57588506/capture-size-of-array-template-parameter/57588823#57588823", "title": "Capture size of array template parameter", "body": "<p>You can use global string literals as a template parameter to match <code>const char[]</code> and calculate length via constexpr function:</p>\n\n<pre><code>constexpr size_t GetSize(const char str[])\n{\n    for (size_t i = 0; ; ++i)\n    {\n        if (str[i] == '\\0')\n        {\n            return i;\n        }\n    }\n}\n\ntemplate &lt;const char str[]&gt;\nstruct X\n{\n    constexpr static auto Size = GetSize(str);\n};\n\nconstexpr const char string[] = \"42\";\n\nvoid foo()\n{\n    X&lt;string&gt; x;\n    static_assert(X&lt;string&gt;::Size == 2, \"\");\n}\n</code></pre>\n"}], "owner": {"reputation": 656, "user_id": 569046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa7e9ca1d9249db03849e44977e3cc5f?s=128&d=identicon&r=PG", "display_name": "Alex Meiburg", "link": "https://stackoverflow.com/users/569046/alex-meiburg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 57588823, "answer_count": 1, "score": 2, "last_activity_date": 1566385444, "creation_date": 1566379631, "last_edit_date": 1566385444, "question_id": 57588506, "link": "https://stackoverflow.com/questions/57588506/capture-size-of-array-template-parameter", "title": "Capture size of array template parameter", "body": "<p>When using an array non-template type parameter, it seems that size information is basically impossible to recover without passing it separately. For example, in a template</p>\n\n<pre><code>template&lt;const char CStr[]&gt;\nstruct ToTemp {\n ...\n}\n</code></pre>\n\n<p>any references to <code>sizeof(CStr)</code> will return 8 (or 4, depending on your system), because it's actually a <code>const char *</code>. You can declare</p>\n\n<pre><code>template&lt;const char CStr[5]&gt;\nstruct ToTemp {\n ...\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>template&lt;int N, const char CStr[N]&gt;\nstruct ToTemp {\n ...\n}\n</code></pre>\n\n<p>but the first one requires knowing the actual size when you're writing the class (not very useful), and the second one requires passing in the size separately anyway (not useful here -- could be useful for enforcing size constraints). Ideally I would have something like</p>\n\n<pre><code>template&lt;const char CStr[int N]&gt; //Let the compiler infer N based on the type\nstruct ToTemp {\n ...\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>template&lt;int N = -1, const char CStr[N]&gt; //Declare N but let it be forced to a given value, so that I don't have to pass it in \nstruct ToTemp {\n ...\n}\n</code></pre>\n\n<p>... but of course neither of those work. In the end, I want to be able to write</p>\n\n<pre><code>const char foo[] = \"abcd\";\nToTemp&lt;foo&gt; bar;\n</code></pre>\n\n<p>and have <code>bar</code> correctly understand that <code>sizeof(foo)</code> is 5, without having to pass in a separate <code>sizeof(foo)</code> template argument.</p>\n"}, {"tags": ["c++", "qt-creator", "qbs"], "comments": [{"owner": {"reputation": 179, "user_id": 5669101, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-J_nz5nd54gI/AAAAAAAAAAI/AAAAAAAAAQk/cxUWytcSxCA/photo.jpg?sz=128", "display_name": "Xavier Bigand", "link": "https://stackoverflow.com/users/5669101/xavier-bigand"}, "edited": false, "score": 0, "creation_date": 1566822575, "post_id": 57588456, "comment_id": 101765361, "body": "Thank you a lot, it works. I now have to figure out how to do something similar to make projects that depends on the generated_code waiting for all header generation. My code_generator also output a txt file that indicate that the generation ends, so I should be able to make a rule on this txt file."}], "answers": [{"tags": [], "owner": {"reputation": 701, "user_id": 8172668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4b78cf943703d618fbfa91461c7688?s=128&d=identicon&r=PG", "display_name": "Christian Kandeler", "link": "https://stackoverflow.com/users/8172668/christian-kandeler"}, "is_accepted": false, "score": 2, "last_activity_date": 1566386809, "creation_date": 1566386809, "answer_id": 57590597, "question_id": 57588456, "link": "https://stackoverflow.com/questions/57588456/how-to-force-synchronisation-between-qbs-products-with-dependencies/57590597#57590597", "title": "How to force synchronisation between qbs products with dependencies?", "body": "<p>Product dependencies just make the product's artifacts available in the depending product's rules. They do <em>not</em> cause synchronization by themselves. Synchronization happens on the artifact level; otherwise, parallelization would be hindered. Your problem is that your rule does not state that it depends on the code generator executable. \nHere's what it should look like (untested):</p>\n\n<pre><code>Rule {\n    multiplex: true\n    inputsFromDependencies: \"application\" // These are tags, not paths!\n    Artifact { \n        filePath: \"generated/common/directx/driver_call_table.cpp\"\n        fileTags: \"cpp\" \n    }\n    Artifact { \n      filePath: \"generated/common/directx/driver_call_table.hpp\"\n      fileTags: \"hpp\" \n    }\n    Artifact { \n      filePath: \"generated/common/directx/d3d11.def\"\n      fileTags: \"def\" \n    }\n    Artifact { \n        filePath: \"generated/common/directx/uuid_helpers.cpp\"\n        fileTags: \"cpp\" \n    }\n    Artifact { \n        filePath: \"generated/common/directx/uuid_helpers.hpp\"\n        fileTags: \"hpp\" \n    }\n    prepare: {\n        var code_generator_path = inputs.application[0].filePath;\n        var args = [\n            \"DirectX\", \"Outdir=${GENERATED_SOURCES_PATH}\", \n            \"Indir=${CMAKE_SOURCE_DIR}/lib/specs\", \n            CompilerPath=${CMAKE_CXX_COMPILER}\", \"--preprocess\"\n        ];\n        var cmd = new Command(code_generator_path, args);\n        cmd.description = \"generating sources\";\n        return cmd;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 179, "user_id": 5669101, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-J_nz5nd54gI/AAAAAAAAAAI/AAAAAAAAAQk/cxUWytcSxCA/photo.jpg?sz=128", "display_name": "Xavier Bigand", "link": "https://stackoverflow.com/users/5669101/xavier-bigand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1566386809, "creation_date": 1566379446, "question_id": 57588456, "link": "https://stackoverflow.com/questions/57588456/how-to-force-synchronisation-between-qbs-products-with-dependencies", "title": "How to force synchronisation between qbs products with dependencies?", "body": "<p>I have a Project with multiple products, some of them are depending about generated code (cpp and hpp files). This generated code is it self depending about the code_generator product that is a CppApplication.</p>\n\n<p>I want that the code_generator to be rebuilt if his sources changed, and then always run. It will modify the output files only if they change (it internally generate them in a temporary folder and check changes with checksum before moving them to the right place).\nThen once files are generated the compilation of other products can start.</p>\n\n<p>My issue is that the StaticLibrary in which I put the generated files start to be build before the code_generator.exe is built. And other products that are depending on the StaticLibrary can also start to be build before the .hpp files are generated.</p>\n\n<p>So my question is: is there some mechanisms that can be used to make a product waiting until a particular dependency is completely built?</p>\n\n<p>I am open to any kind of solution, the generated code can be in any kind of Module, I just tried with a StaticLibrary as it seems more convenient.</p>\n\n<p>PS: The code_generator product generated a lot of files and take few inputs that I didn't precise in the qbs as it can always run and it can be considered as an input itself as it can change. This is why I am not sure that using Rule is really interesting for me.</p>\n\n<p>Here is an extract of my qbs file:</p>\n\n<pre><code>    CppApplication\n    {\n        name: \"code_generator\"\n\n        consoleApplication: true\n\n        files: [\n            \"../sources/code_generator/code_generator.cpp\",\n            \"../sources/code_generator/code_generator.hpp\",\n            ...\n        ]\n\n        Depends { name: \"default-cpp-configuration\" }\n        Depends { name: \"tinyxml2\" }\n\n        destinationDirectory: \"../\" // @Warning we move the binary to ease his usage by the \"generated_code\" module\n    }\n\n    StaticLibrary    // @Warning as static library to build those sources only once\n    {\n        name: \"generated_code\"\n\n        Depends { name: \"default-cpp-configuration\" }\n        Depends { name: \"code_generator\" }\n\n        Rule {\n            multiplex: true\n            alwaysRun: true\n//            inputs: [project.buildDirectory + \"/../code_generator.exe\"]\n\n            Artifact { filePath: \"generated/common/directx/driver_call_table.cpp\"; fileTags: \"cpp\" }\n            Artifact { filePath: \"generated/common/directx/driver_call_table.hpp\"; fileTags: \"hpp\" }\n            Artifact { filePath: \"generated/common/directx/d3d11.def\"; fileTags: \"def\" }\n            Artifact { filePath: \"generated/common/directx/uuid_helpers.cpp\"; fileTags: \"cpp\" }\n            Artifact { filePath: \"generated/common/directx/uuid_helpers.hpp\"; fileTags: \"hpp\" }\n\n\n            prepare: {\n                var code_generator_path = project.buildDirectory + \"/../code_generator.exe\";\n\n                var cmd = new Command(code_generator_path, [\"DirectX\", \"Outdir=${GENERATED_SOURCES_PATH}\", \"Indir=${CMAKE_SOURCE_DIR}/lib/specs\", \"CompilerPath=${CMAKE_CXX_COMPILER}\", \"--preprocess\"]);\n                cmd.description = \"generating sources\";\n                return cmd;\n            }\n        }\n    }\n\n    CppApplication\n    {\n        name: \"client\"\n\n        consoleApplication: true\n\n        files: [\n            \"../sources/client/main.cpp\",\n        ]\n\n        Depends { name: \"default-cpp-configuration\" }\n        Depends { name: \"generated_code\" }\n        Depends { name: \"openssl\" }\n    }\n</code></pre>\n"}, {"tags": ["c++", "boost", "swap"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1566378269, "post_id": 57588039, "comment_id": 101633577, "body": "Would be a <i>much</i> better question if it was posed with <code>std::swap</code>."}, {"owner": {"reputation": 1128, "user_id": 4010950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/baHFy.jpg?s=128&g=1", "display_name": "Wololo", "link": "https://stackoverflow.com/users/4010950/wololo"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1566378404, "post_id": 57588039, "comment_id": 101633668, "body": "@Bathsheba .. noted. I will edit then, but I will really be using boost."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1566378458, "post_id": 57588039, "comment_id": 101633697, "body": "The reason of course is that Boost is not standardised, so it makes the question difficult to answer. Out of interest, why can&#39;t you use <code>std::swap</code>? Whilst I love Boost, whenever features make it to standard C++, I always migrate."}, {"owner": {"reputation": 1128, "user_id": 4010950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/baHFy.jpg?s=128&g=1", "display_name": "Wololo", "link": "https://stackoverflow.com/users/4010950/wololo"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1566378825, "post_id": 57588039, "comment_id": 101633911, "body": "Because I&#39;m working on old code which is not written by me. I&#39;m not about to cast all my boost pointers to std. But I will edit the question: I agree that std-questions are better for SO."}, {"owner": {"reputation": 7679, "user_id": 896012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/05779413dbb3915fa5b2f3ed82d66007?s=128&d=identicon&r=PG", "display_name": "Gupta", "link": "https://stackoverflow.com/users/896012/gupta"}, "edited": false, "score": 1, "creation_date": 1566379155, "post_id": 57588039, "comment_id": 101634102, "body": "No, as far as the object is not out of scope, the reference a_ref will be valid."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 1, "creation_date": 1566379203, "post_id": 57588039, "comment_id": 101634141, "body": "Don&#39;t use <code>auto_ptr</code> ... It doesn&#39;t exist anymore in C++17."}, {"owner": {"reputation": 1128, "user_id": 4010950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/baHFy.jpg?s=128&g=1", "display_name": "Wololo", "link": "https://stackoverflow.com/users/4010950/wololo"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1566379360, "post_id": 57588039, "comment_id": 101634222, "body": "@L.F. Please read the entire question .. I don&#39;t use <code>std::auto_ptr</code> .. I use <code>boost::scoped_ptr</code> , but som other guy wanted the question to be for std and not boost.. I write older than C++11, and don&#39;t have <code>std::unique_ptr</code> available."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1566384884, "post_id": 57588039, "comment_id": 101637414, "body": "Both <code>std::unique_ptr</code> and <code>std::shared_ptr</code> have a member function <code>swap</code> which <code>std::swap</code> is specialised to use (delegate to)."}], "answers": [{"comments": [{"owner": {"reputation": 1128, "user_id": 4010950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/baHFy.jpg?s=128&g=1", "display_name": "Wololo", "link": "https://stackoverflow.com/users/4010950/wololo"}, "edited": false, "score": 0, "creation_date": 1566380013, "post_id": 57588352, "comment_id": 101634657, "body": "Thanks for commenting on the boost member swap. I did not think of that. I agree that it is highly unlikely to do anything dubvious, however, it is nice to keep in mind, and I will check its implementation."}], "tags": [], "owner": {"reputation": 647, "user_id": 1316208, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/90df3e6a20b27c31accd954b2a0093db?s=128&d=identicon&r=PG", "display_name": "user1316208", "link": "https://stackoverflow.com/users/1316208/user1316208"}, "is_accepted": true, "score": 2, "last_activity_date": 1566379537, "last_edit_date": 1566379537, "creation_date": 1566379147, "answer_id": 57588352, "question_id": 57588039, "link": "https://stackoverflow.com/questions/57588039/does-stdswap-of-smart-pointers-guarantee-the-references-to-be-unchanged/57588352#57588352", "title": "Does std::swap of smart pointers guarantee the references to be unchanged?", "body": "<p>You are swapping pointers, not the objects themselves, the swap() function cannot change the address of the objects as it doesnt even know about the objects.\nIf you are looking for guarantee then you should ask for a guarantee that destroying and moving/copying the smart pointer doesnt affect the object.  </p>\n\n<p>edit: This is relevant to <code>std::swap(b_ptr, a_ptr);</code> , in boost there is a member function swap on the smart pointers so in theory it could do anything, but i highly doubt that it would change the address of the object when swapping pointers.</p>\n"}], "owner": {"reputation": 1128, "user_id": 4010950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/baHFy.jpg?s=128&g=1", "display_name": "Wololo", "link": "https://stackoverflow.com/users/4010950/wololo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 57588352, "answer_count": 1, "score": 2, "last_activity_date": 1566383278, "creation_date": 1566378087, "last_edit_date": 1566383278, "question_id": 57588039, "link": "https://stackoverflow.com/questions/57588039/does-stdswap-of-smart-pointers-guarantee-the-references-to-be-unchanged", "title": "Does std::swap of smart pointers guarantee the references to be unchanged?", "body": "<p><strong>Does std::swap of smart pointers guarantee the references (address in memory) to be unchanged?</strong></p>\n\n<p>The <em>std</em> documentation states that one (of several) qualifying traits for letting <code>class T</code> be swap-able, is that,</p>\n\n<blockquote>\n  <p>T must be assignable and T must be copy and/or move constructible</p>\n</blockquote>\n\n<p>If swaping was conducted by the use of copy construction, I would suspect that the memory addresses might change. However, I also suspect that swapping by copy construction is not relevant when swapping specifically (smart) pointers.</p>\n\n<p>The below code compiles (GCC) and runs smoothly without changing the address upon swapping, but do I have a guarantee for this to be so?</p>\n\n<p><strong>Note:</strong> Example is using <code>std::auto_ptr</code> because it was pointed out in comments that <em>std</em> code is preferable over boost. I work on old C++ and do not have <code>std::unique_ptr</code> available (which nevertheless have its copy constructor deleted). Original post applied <code>boost::scoped_ptr</code>.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;boost/scoped_ptr&gt;\n#include &lt;iostream&gt;\n\nclass Awesome\n{\npublic:\n    Awesome(int a=0) : Value(a) {}\n    Awesome(const Awesome&amp; T) : Value(T.Value) {}\n    int Value;\n};\n\nint main()\n{\n    std::auto_ptr&lt;Awesome&gt; a_ptr(new Awesome(2));\n    Awesome&amp; a_ref = *a_ptr.get();\n\n    std::cout &lt;&lt; \"a_ptr's addr : \" &lt;&lt; a_ptr.get() &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"a_ref's addr : \" &lt;&lt; &amp;a_ref &lt;&lt; std::endl;\n\n    std::auto_ptr&lt;Awesome&gt; b_ptr;\n    std::swap(b_ptr, a_ptr); // &lt;&lt;------------------ Does this (possibly) break 'a_ref' ?\n\n    std::cout &lt;&lt; \"b_ptr's addr : \"&lt;&lt; b_ptr.get() &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "c++17", "typetraits"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1566392350, "post_id": 57587666, "comment_id": 101641760, "body": "What specifically do you mean by &quot;T is of a basic_string&lt;&gt; type&quot;? In a comment you said you want to include <code>char const*</code>, which doesn&#39;t to me sound like &quot;a basic_string&lt;&gt; type&quot;."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1566413005, "post_id": 57587666, "comment_id": 101652186, "body": "The <code>basic_string&lt;Ch&gt;</code> seems misplaced, because in all other types you use <code>Ch=char</code> . Or are you unaware that <code>std::string</code> is really <code>std::basic_string&lt;char&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1566377542, "post_id": 57587765, "comment_id": 101633149, "body": "Brilliant - with &quot;string-like&quot; i also include <code>const char*</code> for example - but im guessing that easy enough (just use a template to strip <code>cv-stuff</code> ?)"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1566377909, "post_id": 57587765, "comment_id": 101633373, "body": "@darune yeah, something like that"}], "tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": false, "score": 3, "last_activity_date": 1566377201, "creation_date": 1566377201, "answer_id": 57587765, "question_id": 57587666, "link": "https://stackoverflow.com/questions/57587666/type-traits-style-to-test-if-t-is-a-basic-string-or-printable-string-like-type/57587765#57587765", "title": "Type traits style to test if T is a basic_string&lt;&gt; or printable string-like type?", "body": "<p>You can write a custom trait:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;type_traits&gt;\n\ntemplate\n&lt;\n    typename x_MaybeString\n&gt; struct\nis_basic_string: public ::std::false_type {};\n\ntemplate\n&lt;\n    typename x_Char\n,   typename x_Traits\n,   typename x_Allocator\n&gt; struct\nis_basic_string&lt;::std::basic_string&lt;x_Char, x_Traits, x_Allocator&gt;&gt;: public ::std::true_type {};\n</code></pre>\n\n<p>I guess you can write similar traits for 'string-like' types. <code>std::string_view</code> is probably a good candidate.</p>\n"}, {"tags": [], "owner": {"reputation": 5201, "user_id": 11638718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/359a4a973e6a1f850f94f71bf09a47f6?s=128&d=identicon&r=PG&f=1", "display_name": "\u5eb7\u6853\u744b", "link": "https://stackoverflow.com/users/11638718/%e5%ba%b7%e6%a1%93%e7%91%8b"}, "is_accepted": true, "score": 1, "last_activity_date": 1566400269, "last_edit_date": 1566400269, "creation_date": 1566385717, "answer_id": 57590276, "question_id": 57587666, "link": "https://stackoverflow.com/questions/57587666/type-traits-style-to-test-if-t-is-a-basic-string-or-printable-string-like-type/57590276#57590276", "title": "Type traits style to test if T is a basic_string&lt;&gt; or printable string-like type?", "body": "<p>You can just using this one line trait:</p>\n\n<pre><code>template &lt;typename T&gt;\ninline constexpr bool is_string_type_v = std::is_convertible_v&lt;T, std::string_view&gt;;\n</code></pre>\n\n<p>It works fine for several 'string-like' types:</p>\n\n<pre><code>static_assert(is_string_type_v&lt;std::string&gt;);\nstatic_assert(is_string_type_v&lt;std::string_view&gt;);\nstatic_assert(is_string_type_v&lt;const char*&gt;);\nstatic_assert(is_string_type_v&lt;char*&gt;);\nstatic_assert(is_string_type_v&lt;char* const&gt;);\nstatic_assert(is_string_type_v&lt;const char* const&gt;);\nstatic_assert(is_string_type_v&lt;char (&amp;)[5]&gt;);\nstatic_assert(is_string_type_v&lt;const char (&amp;)[5]&gt;);\n</code></pre>\n\n<p>I steal this trait from <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/basic_string\" rel=\"nofollow noreferrer\"><code>std::string</code>'s c++17 constructor</a>, since the type which can implicitly converts to a <code>std::string_view</code> can be considered as a 'string-like' type.</p>\n"}], "owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 1, "accepted_answer_id": 57590276, "answer_count": 2, "score": 2, "last_activity_date": 1566400269, "creation_date": 1566376873, "last_edit_date": 1566377189, "question_id": 57587666, "link": "https://stackoverflow.com/questions/57587666/type-traits-style-to-test-if-t-is-a-basic-string-or-printable-string-like-type", "title": "Type traits style to test if T is a basic_string&lt;&gt; or printable string-like type?", "body": "<p>Im writing a <a href=\"/questions/tagged/template\" class=\"post-tag\" title=\"show questions tagged &#39;template&#39;\" rel=\"tag\">template</a> that can print ranges using ostream's :</p>\n\n<pre><code>template&lt;class T&gt;\nstruct range_out {  \n  range_out(T&amp; range) : r_(range) {\n  }\n  T&amp; r_;\n\n  //static_assert(std::is_same&lt;T::); //check that T is not std::string (std::string, etc. should just use &lt;&lt; operator directly instead)\n};\n\ntemplate &lt;typename T&gt;\nstd::ostream&amp; operator&lt;&lt; (std::ostream&amp; out, range_out&lt;T&gt;&amp; range) {\n  constexpr std::string_view sep{ std::is_arithmetic&lt;T&gt;::value ? \", \" : \"', '\" }; //&lt;&lt;-- better way to check for string-like type ?\n\n  if (!range.r_.empty()) {\n    out &lt;&lt; '[';\n    for (auto&amp; e : range.r_) {\n      out &lt;&lt; e &lt;&lt; sep;\n    }\n    out &lt;&lt; std::string(sep.size(), '\\b') &lt;&lt; \"]\";\n  }\n  return out;\n}\n</code></pre>\n\n<p>Is there some 'easy' way to check that T is of a basic_string&lt;> type ? (I do have <a href=\"/questions/tagged/boost\" class=\"post-tag\" title=\"show questions tagged &#39;boost&#39;\" rel=\"tag\">boost</a> if that will help)</p>\n\n<p>My second minor issue is that i would like to put in qoutes around 'string-like' types, but again, is there some 'easy' way to test this im overlooking ?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1566376368, "post_id": 57587409, "comment_id": 101632567, "body": "What you&#39;re referring to as the &quot;full font name&quot; is the name of the font family and the name of one of its available styles. See <a href=\"https://doc.qt.io/qt-5/qfontdatabase.html#styles\" rel=\"nofollow noreferrer\">QFontDatabase::styles</a>."}, {"owner": {"reputation": 43, "user_id": 7473623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4392c4ca063f0e77b721e8dbd15f95e4?s=128&d=identicon&r=PG&f=1", "display_name": "Crowther43", "link": "https://stackoverflow.com/users/7473623/crowther43"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1566387195, "post_id": 57587409, "comment_id": 101638658, "body": "@molbdnilo Unfortunately, there&#39;s no way way to determine which style is associated with a font that has been added with QFontDatabase::addApplicationFont().  None of the other QFontDatabase functions take the font ID as a parameter, so Qt doesn&#39;t seem to offer any way to determine the full font name (family+style) from the opened font file."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1566395525, "post_id": 57587409, "comment_id": 101643923, "body": "For any given font family you can get a list of the available styles with <a href=\"https://doc.qt.io/qt-5/qfontdatabase.html#styles\" rel=\"nofollow noreferrer\"><code>QFontDatabase::styles</code></a>."}], "owner": {"reputation": 43, "user_id": 7473623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4392c4ca063f0e77b721e8dbd15f95e4?s=128&d=identicon&r=PG&f=1", "display_name": "Crowther43", "link": "https://stackoverflow.com/users/7473623/crowther43"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1566375960, "creation_date": 1566375960, "question_id": 57587409, "link": "https://stackoverflow.com/questions/57587409/reading-font-names-from-font-files-on-windows-linux-and-mac", "title": "Reading font names from font files on Windows, Linux and Mac?", "body": "<p>I'm using C++ and Qt and I want to find a cross-platform solution for reading font names from font files.  Looking through the Qt font classes, I can't see any solution.  The closest I could get is the below code which reads the font family, but not the full font name, so \"Arno Pro Regular\" just returns \"Arno Pro\", \"Blogger Sans Bold\" just returns \"Blogger Sans\", and so forth.</p>\n\n<pre><code>int id = QFontDatabase::addApplicationFont(fileName);\nif (id != -1)\n{\n    QStringList fontFamily = QFontDatabase::applicationFontFamilies(id);\n    QFontDatabase::removeApplicationFont(id);\n}\n</code></pre>\n\n<p>I've searched around for a solution, but can only find solutions in Java, .net and other languages, but nothing I can use in C++.</p>\n\n<p>Is there any cross-platform way of reading font names from font files in C++?</p>\n"}, {"tags": ["c++", "enums", "c++14"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 11, "creation_date": 1566375224, "post_id": 57587203, "comment_id": 101632026, "body": "I don&#39;t understand the question. <code>enum</code> (without <code>class</code>) does <i>not</i> provide type safety, while <code>enum class</code> does. You have always been able to <i>explicitly</i> cast to the underlying type, but <code>std::underlying_type_t</code> doesn&#39;t suddenly reintroduce <i>implicit</i> casts (which <code>enum class</code> is designed to prevent)..."}, {"owner": {"reputation": 99, "user_id": 2158436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db3c421397cf75b80e996ff92c39fb18?s=128&d=identicon&r=PG", "display_name": "yakoda", "link": "https://stackoverflow.com/users/2158436/yakoda"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1566399197, "post_id": 57587203, "comment_id": 101645986, "body": "Your question is the answer... <i>explicitly</i> is the point. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 2151, "user_id": 5902079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4df4530b8e41c66ac12d17f96cd70c6c?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Gordon", "link": "https://stackoverflow.com/users/5902079/dmitry-gordon"}, "is_accepted": false, "score": 7, "last_activity_date": 1566375811, "last_edit_date": 1566375811, "creation_date": 1566375671, "answer_id": 57587332, "question_id": 57587203, "link": "https://stackoverflow.com/questions/57587203/what-are-the-advantages-of-enum-class-over-simple-enum-once-there-is-stdun/57587332#57587332", "title": "What are the advantages of &quot;enum class&quot; over simple &quot;enum&quot; once there is std::underlying_type_t?", "body": "<p>The are two major differences between <code>enum</code> and <code>enum class</code>:</p>\n\n<ol>\n<li><p><code>enum class</code> doesn't allow implicit conversion between <code>enum class</code> value and underlying type. Yes, you can do an explicit conversion but it won't happen automatically.</p></li>\n<li><p><code>enum class</code> introduces a new scope.</p></li>\n</ol>\n\n<pre><code>enum Enum\n{\n    Value1,\n    Value2 // &lt;- both values are accessible without `Enum::`\n}\n\nenum class EnumClass\n{\n    Value1,\n    Value2 // &lt;- values are accessible only with `EnumClass::` prefix\n}\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 2158436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db3c421397cf75b80e996ff92c39fb18?s=128&d=identicon&r=PG", "display_name": "yakoda", "link": "https://stackoverflow.com/users/2158436/yakoda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "closed_date": 1566394019, "answer_count": 1, "score": 0, "last_activity_date": 1566384543, "creation_date": 1566375154, "last_edit_date": 1566375321, "question_id": 57587203, "link": "https://stackoverflow.com/questions/57587203/what-are-the-advantages-of-enum-class-over-simple-enum-once-there-is-stdun", "closed_reason": "Needs details or clarity", "title": "What are the advantages of &quot;enum class&quot; over simple &quot;enum&quot; once there is std::underlying_type_t?", "body": "<p><code>enum class</code> is aiming to provide type safety, thus eliminating implicit conversion to integer by integral promotion, but once we have <code>std::underlying_type_t</code> the advantage of <code>enum class</code> is not clear to me.</p>\n"}, {"tags": ["c++", "singly-linked-list"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1566372661, "post_id": 57586565, "comment_id": 101630847, "body": "where is <code>Node</code> defined? Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 1, "creation_date": 1566372680, "post_id": 57586565, "comment_id": 101630852, "body": "<code>Insert(t,0,89);</code> what is <code>t</code>?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1566372722, "post_id": 57586565, "comment_id": 101630874, "body": "&quot;But the Actual Output I get is 4,6,&quot; no. Please make sure the code you post is actually doing what you claim"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1566372726, "post_id": 57586565, "comment_id": 101630875, "body": "You&#39;ve got the details wrong, but you&#39;ve omitted the details from your posted code. The details matter, please post <b>complete</b> code."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1566374365, "post_id": 57586565, "comment_id": 101631664, "body": "The most important thing to learn about pointers is that there is nothing special about pointers. Assigning to a <code>Node*</code> is no different from assigning to an <code>int</code>."}, {"owner": {"reputation": 81, "user_id": 1676751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474f2066b334a43a9433b6560f2225b?s=128&d=identicon&r=PG&f=1", "display_name": "chinmaya", "link": "https://stackoverflow.com/users/1676751/chinmaya"}, "edited": false, "score": 0, "creation_date": 1566459064, "post_id": 57586565, "comment_id": 101664524, "body": "The scope of the pointer t (Node* t) is limited to the function Insert(). Hence your pointer does not exist beyond Insert() function and you are not able to track your allocated memory as well."}], "answers": [{"comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1566372784, "post_id": 57586593, "comment_id": 101630894, "body": "You don&#39;t <b>need</b> to do that. In fact it would arguably be better to rewrite as <code>t = Insert(t,0,89);</code>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 2, "creation_date": 1566372839, "post_id": 57586593, "comment_id": 101630922, "body": "@john &quot;better&quot; without explanation is the little brother of &quot;you need to&quot; without explanation ;)"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1566373075, "post_id": 57586593, "comment_id": 101631030, "body": "@formerlyknownas_463035818 Nicely put, I&#39;ve modifed my comment (slightly)"}, {"owner": {"reputation": 710, "user_id": 7352626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/366cb7815b127a1a732f61ca7508a927?s=128&d=identicon&r=PG&f=1", "display_name": "Deven", "link": "https://stackoverflow.com/users/7352626/deven"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1566373444, "post_id": 57586593, "comment_id": 101631215, "body": "@formerlyknownas_463035818 sometimes :P"}, {"owner": {"reputation": 710, "user_id": 7352626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/366cb7815b127a1a732f61ca7508a927?s=128&d=identicon&r=PG&f=1", "display_name": "Deven", "link": "https://stackoverflow.com/users/7352626/deven"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1566374699, "post_id": 57586593, "comment_id": 101631793, "body": "@john also since the return type is void."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1566380249, "post_id": 57586593, "comment_id": 101634827, "body": "@DevendraSwami Well obviously I&#39;m suggesting that the return type could be changed."}, {"owner": {"reputation": 81, "user_id": 1676751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474f2066b334a43a9433b6560f2225b?s=128&d=identicon&r=PG&f=1", "display_name": "chinmaya", "link": "https://stackoverflow.com/users/1676751/chinmaya"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1566459165, "post_id": 57586593, "comment_id": 101664593, "body": "@john you are right. But the reason is the scope of the Node *t which is with in the Insert function"}], "tags": [], "owner": {"reputation": 710, "user_id": 7352626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/366cb7815b127a1a732f61ca7508a927?s=128&d=identicon&r=PG&f=1", "display_name": "Deven", "link": "https://stackoverflow.com/users/7352626/deven"}, "is_accepted": true, "score": 1, "last_activity_date": 1566373135, "last_edit_date": 1566373135, "creation_date": 1566372710, "answer_id": 57586593, "question_id": 57586565, "link": "https://stackoverflow.com/questions/57586565/how-to-insert-at-beginning-of-singly-linked-list/57586593#57586593", "title": "How to Insert at beginning of Singly Linked List", "body": "<p>You need to pass pointer by reference to Insert:</p>\n\n<pre><code>void Insert(Node* &amp;t, int pos, int x)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6374047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6325170580ea0a5284d66248fa09e7fa?s=128&d=identicon&r=PG&f=1", "display_name": "Praveen Sharma", "link": "https://stackoverflow.com/users/6374047/praveen-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "closed_date": 1566372864, "accepted_answer_id": 57586593, "answer_count": 1, "score": -2, "last_activity_date": 1566373135, "creation_date": 1566372566, "last_edit_date": 1566372788, "question_id": 57586565, "link": "https://stackoverflow.com/questions/57586565/how-to-insert-at-beginning-of-singly-linked-list", "closed_reason": "Not suitable for this site", "title": "How to Insert at beginning of Singly Linked List", "body": "<p>Im trying to insert Node at beginning of list , but unable to , the logic for insert seem to be correct in my opinion</p>\n\n<pre><code>void display(Node *t)\n{\n    Node *p = t;\n    while (p != 0)\n    {\n        cout &lt;&lt; p-&gt;data &lt;&lt; \",\";\n        p = p-&gt;next;\n    }\n}\nvoid Insert(Node *t,int pos,int x)\n{\n    Node *temp=NULL;\n    if(pos==0)\n    {\n       temp=new Node;\n       temp-&gt;data=x;\n       temp-&gt;next=t;\n       t=temp;\n    }\n}\nint main()\n{\n     Node *p = new Node;\n     Node *q = new Node;\n\n     p-&gt;data = 4;\n     p-&gt;next = q;\n\n     q-&gt;data=6;\n     q-&gt;next=NULL;\n\n     Insert(p,0,89);\n     Insert(p,0,80);\n\n     display(p);\n}\n</code></pre>\n\n<p>I expect output of <b> 80,89,4,6,</b></p>\n\n<p>But the Actual Output I get is <b>4,6,</b></p>\n"}, {"tags": ["c++", "while-loop", "ifstream"], "comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1566374393, "post_id": 57586519, "comment_id": 101631673, "body": "Offtopic: you are doing double work, if the file couldn&#39;t be opened, then <code>good</code> will fail as well. Actually, there&#39;s a conversion operator to bool, returning same value as <code>good</code>, so you can simply check: <code>if(studentFile)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": false, "score": 0, "last_activity_date": 1566374182, "last_edit_date": 1566374182, "creation_date": 1566373451, "answer_id": 57586774, "question_id": 57586519, "link": "https://stackoverflow.com/questions/57586519/reading-from-text-file-to-struct-vector-but-text-file-lines-are-of-different-le/57586774#57586774", "title": "reading from text file to struct vector, but text file lines are of different length", "body": "<p>You need another loop, and an string stream to read from, like this</p>\n\n<pre><code>#include &lt;sstream&gt;\n\nstring subjectList;\ngetline(studentFile, subjectList); // read all the subjects\nistringstream iss(subjectList);     // put into a string stream for parsing\nstring subject;\nwhile (getline(iss, subject, ','))  // read from string stream, spliting on commas\n{\n    newStudent.subjectList.push_back(stoi(subject)); // add to subject list\n}\n</code></pre>\n\n<p>Untested code.</p>\n"}, {"comments": [{"owner": {"reputation": 129, "user_id": 10399222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21ffe361cb50c3aca16f54aded17f646?s=128&d=identicon&r=PG&f=1", "display_name": "awyeanah2", "link": "https://stackoverflow.com/users/10399222/awyeanah2"}, "edited": false, "score": 0, "creation_date": 1566428866, "post_id": 57586936, "comment_id": 101657502, "body": "hey mate, this seems to almost work perfectly but for some reason it keep collecting all of the subjectlists for each student into that tempStr in the new while loop. The value of temp str is: 1253, which is both average andy and brilliant bisons subject lists combined."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 129, "user_id": 10399222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21ffe361cb50c3aca16f54aded17f646?s=128&d=identicon&r=PG&f=1", "display_name": "awyeanah2", "link": "https://stackoverflow.com/users/10399222/awyeanah2"}, "edited": false, "score": 0, "creation_date": 1566429313, "post_id": 57586936, "comment_id": 101657611, "body": "@awyeanah2 <code>std::getline()</code> always clears the <code>std::string</code> it reads into. But, your code is reusing the same <code>Student</code> variable in the outer loop and not clearing its <code>subjectList</code> on each iteration. So in that regard, the <code>newStudent.subjectList</code> would accumulate subjects for multiple students. On each iteration of the outer loop, you need to either 1) call <code>subjectList.clear()</code>, or 2) use a new <code>Student</code> object. I have updated my answer to show the latter case."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1566429528, "last_edit_date": 1566429528, "creation_date": 1566374154, "answer_id": 57586936, "question_id": 57586519, "link": "https://stackoverflow.com/questions/57586519/reading-from-text-file-to-struct-vector-but-text-file-lines-are-of-different-le/57586936#57586936", "title": "reading from text file to struct vector, but text file lines are of different length", "body": "<p>In your main loop, read an entire line into a <code>std::string</code>, then use a <code>std::istringstream</code> to parse each line, using an inner loop to read the subject ints, eg :</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;fstream&gt;\n#include &lt;vector&gt;\n\nstruct Student\n{\n    std::string name;\n    int code;\n    int ability;\n    int consistency;\n    std::string programName;\n    std::vector&lt;int&gt; subjectList;\n}; \n\nstd::vector&lt;Student&gt; studentList;\n\nvoid createStudents(std::string fileName)\n{\n    std::string tempLine;\n\n    //temp variable to then use to convert them to int.\n    std::string tempStr;\n\n    std::ifstream studentFile(fileName);\n\n    if (studentFile.is_open())\n    {\n        std::cout &lt;&lt; \" \" &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"---Reading from Students---\" &lt;&lt; std::endl;\n\n        while (std::getline(studentFile, tempLine))\n        {\n            std::istringstream iss(tempLine);\n\n            //A new student data member is created\n            Student newStudent;\n\n            //we go get each value which is delimited by a comma and one by a colon\n\n            std::getline(iss, newStudent.name, ',');\n\n            //To convert the strings to an int, the string is given to a temporary variable\n            //Then the temporary variable is parsed to an int using stoi and the code datamember from the struct is assign to that new int\n            std::getline(iss, tempStr, ',');\n            newStudent.code = std::stoi(tempStr);\n\n            std::getline(iss, tempStr, ',');\n            newStudent.ability = std::stoi(tempStr);\n\n            std::getline(iss, tempStr, ',');\n            newStudent.consistency = std::stoi(tempStr);\n\n            std::getline(iss, newStudent.programName, ':');\n\n            // push ints into subject list\n            while (std::getline(iss, tempStr, ',')) {\n                newStudent.subjectList.push_back(std::stoi(tempStr));\n            } \n\n            //The new struct data member is added to the vector and returned for further use.\n            studentList.push_back(std::move(newStudent));\n        }\n\n        //file is then closed\n        studentFile.close();\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 371, "user_id": 8596999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/595f98020f985780afcce080519abfd6?s=128&d=identicon&r=PG&f=1", "display_name": "ChauhanTs", "link": "https://stackoverflow.com/users/8596999/chauhants"}, "is_accepted": false, "score": 0, "last_activity_date": 1566375824, "creation_date": 1566375824, "answer_id": 57587371, "question_id": 57586519, "link": "https://stackoverflow.com/questions/57586519/reading-from-text-file-to-struct-vector-but-text-file-lines-are-of-different-le/57587371#57587371", "title": "reading from text file to struct vector, but text file lines are of different length", "body": "<p>Here is modified code you can try, [not tested]</p>\n\n<pre><code>struct Student\n{\n    string name;\n    int code;\n    int ability;\n    int consistency;\n    string programName;\n    vector&lt;int&gt; subjectList;\n};\n\nvoid createStudents(string fileName)\n\n{\n    string tempSubjectId;\n    int subjectId;\n//temp variable to then use to convert them to int.\nstring codeTemp, abilityTemp, consistencyTemp;\n\nstd::ifstream studentFile(fileName);\n\n//A new student data member is created\nStudent newStudent;\n\n\nif(studentFile.is_open() &amp;&amp; studentFile.good())\n{\n    cout &lt;&lt; \" \" &lt;&lt; endl;\n    cout &lt;&lt; \"---Reading from Students---\" &lt;&lt; endl;\n    while(getline(studentFile,newStudent.name, ','))\n    {\n\n        //we go get each value which is delimited by a comma and one by a colon\n        //getline(studentFile, newStudent.name, ',');\n\n        //To convert the strings to an int, the string is given to a temporary variable\n        //Then the temporary variable is parsed to an int using stoi and the code datamember from the struct is assign to that new int\n        getline(studentFile, codeTemp, ',');\n        newStudent.code = stoi(codeTemp);\n\n        getline(studentFile, abilityTemp, ',');\n        newStudent.ability = stoi(abilityTemp);\n\n        getline(studentFile, consistencyTemp, ',');\n        newStudent.consistency = stoi(consistencyTemp);\n\n        getline(studentFile, newStudent.programName, ':')\n        std::string line;\n        std::vector &lt;int&gt; arr;\n        getline(studentFile, line);\n        boost::split(arr, line, [](char c) {return (c==',');})\n\n        newStudent.subjectList = arr;\n\n\n    }\n    //file is then closed\n    studentFile.close();```\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1334, "user_id": 969968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5821e6e6e5740184c507fa045e963f0?s=128&d=identicon&r=PG&f=1", "display_name": "DannyK", "link": "https://stackoverflow.com/users/969968/dannyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1567438608, "creation_date": 1567438608, "answer_id": 57759618, "question_id": 57586519, "link": "https://stackoverflow.com/questions/57586519/reading-from-text-file-to-struct-vector-but-text-file-lines-are-of-different-le/57759618#57759618", "title": "reading from text file to struct vector, but text file lines are of different length", "body": "<p>I am big proponent of Arash Partow's <a href=\"https://www.partow.net/programming/strtk/index.html\" rel=\"nofollow noreferrer\">String Toolkit Library</a>.  It can actually handle reading and parsing text almost magically.  You could setup a lamba that parses line by line and a great deal of other stuff based on your structure.  Here is a crude example.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;strtk.hpp&gt;  // String Toolkit Library\n\n\nstruct Student_t\n{\n    string name;\n    int code;\n    int ability;\n    int consistency;\n    string programName;\n    vector&lt;int&gt; subjectList;\n};\n\n\nconst char *whitespace  = \" \\t\\r\\n\\f\";\n\n// in case you wanted to parse on stuff with comma or whitespace\n// it is just a matter of choosing what you want to parse\n// by\n/// const char *whitespace_and_punctuation  = \" \\t\\r\\n\\f;,=\";\n\nconst char *comma_and_colon = \",:\";\n\nint main()\n{\n   std::fstream input(\"file.txt\", std::ios::in );\n   std::string line;\n   std::vector&lt;Student_t&gt; students;\n   while(getline(input_strm, line) ) \n   {\n\n       // clean up the string (precaution)\n       strtk::remove_leading_and_trailing(whitespace, line);\n\n       Student_t s;  // declare an instance\n\n       // The parse function will fill in &amp; convert the values into the variables\n       // Since the last element is a vector, all the remaining integers will  \n       // be converted.\n\n       // the example does assume that a colon is used only once\n       if(!strtk::parse( line, comma_and_colon,  s.name, s.code, \n                   s.ability, s.consistency, s.programName, s.subjectList ) ) {\n           continue;\n           // you may want to handle the parse error differently\n        }\n\n        students.push_back(s);\n\n   }\n\n}\n</code></pre>\n\n<p>I've answered a number of questions using the String Toolkit library and others have too.\nThe library is C++, header only and fast.  The Library have tons of examples, good documentation.</p>\n"}], "owner": {"reputation": 129, "user_id": 10399222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21ffe361cb50c3aca16f54aded17f646?s=128&d=identicon&r=PG&f=1", "display_name": "awyeanah2", "link": "https://stackoverflow.com/users/10399222/awyeanah2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 0, "accepted_answer_id": 57586936, "answer_count": 4, "score": 0, "last_activity_date": 1567438608, "creation_date": 1566372396, "last_edit_date": 1566374061, "question_id": 57586519, "link": "https://stackoverflow.com/questions/57586519/reading-from-text-file-to-struct-vector-but-text-file-lines-are-of-different-le", "title": "reading from text file to struct vector, but text file lines are of different length", "body": "<p>I am trying to read from a text file of students and assign each line to a struct data member.</p>\n\n<p>The text file structure is as follows:</p>\n\n<pre><code>Name,Student code, Ability,Consistency,Program name:Subject list\n</code></pre>\n\n<p>Two students in the file:</p>\n\n<pre><code>Average Ant,204932,50,5,Short course:1\nBrilliant Bison,234543,80,3,Bachelor of Bounciness:2,5,3\n</code></pre>\n\n<p>I can read all of the information to a struct no problem except for the last part(subject list),that are of varying length between students.\nHow can I write code so that if a student only has 1 subject like average ant I can push it into the subjectList vector but if they have 3 like brilliant bison I can still push them all in no problem?</p>\n\n<p>My code:</p>\n\n<pre><code>struct Student\n{\n    string name;\n    int code;\n    int ability;\n    int consistency;\n    string programName;\n    vector&lt;int&gt; subjectList;\n};\n\nvoid createStudents(string fileName)\n{\n    string tempSubjectId;\n    int subjectId;\n\n    //temp variable to then use to convert them to int.\n    string codeTemp, abilityTemp, consistencyTemp;\n\n    std::ifstream studentFile(fileName);\n\n    //A new student data member is created\n    Student newStudent;\n\n\n    if(studentFile.is_open() &amp;&amp; studentFile.good())\n    {\n        cout &lt;&lt; \" \" &lt;&lt; endl;\n        cout &lt;&lt; \"---Reading from Students---\" &lt;&lt; endl;\n        while(getline(studentFile,newStudent.name, ','))\n        {\n\n            //we go get each value which is delimited by a comma and one by a colon\n            //getline(studentFile, newStudent.name, ',');\n\n            //To convert the strings to an int, the string is given to a temporary variable\n            //Then the temporary variable is parsed to an int using stoi and the code datamember from the struct is assign to that new int\n            getline(studentFile, codeTemp, ',');\n            newStudent.code = stoi(codeTemp);\n\n            getline(studentFile, abilityTemp, ',');\n            newStudent.ability = stoi(abilityTemp);\n\n            getline(studentFile, consistencyTemp, ',');\n            newStudent.consistency = stoi(consistencyTemp);\n\n            getline(studentFile, newStudent.programName, ':');\n\n//want to push ints into subject list here.\n\n\n            //The new struct data member is added to the vector and returned for further use.\n            studentList.push_back(newStudent);\n        }\n        //file is then closed\n        studentFile.close();```\n</code></pre>\n"}, {"tags": ["c++", "winapi", "showwindow"], "comments": [{"owner": {"reputation": 2324, "user_id": 832220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/474e24012185034fd5c116ee32037c5e?s=128&d=identicon&r=PG", "display_name": "Norbert Willhelm", "link": "https://stackoverflow.com/users/832220/norbert-willhelm"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1566397076, "post_id": 57586488, "comment_id": 101644968, "body": "I didn&#39;t perceive any deadlock."}], "answers": [{"comments": [{"owner": {"reputation": 2324, "user_id": 832220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/474e24012185034fd5c116ee32037c5e?s=128&d=identicon&r=PG", "display_name": "Norbert Willhelm", "link": "https://stackoverflow.com/users/832220/norbert-willhelm"}, "edited": false, "score": 0, "creation_date": 1566374243, "post_id": 57586877, "comment_id": 101631614, "body": "I mean, that ShowWindow(hDialog,SW_HIDE) does not work."}, {"owner": {"reputation": 2324, "user_id": 832220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/474e24012185034fd5c116ee32037c5e?s=128&d=identicon&r=PG", "display_name": "Norbert Willhelm", "link": "https://stackoverflow.com/users/832220/norbert-willhelm"}, "edited": false, "score": 0, "creation_date": 1566374723, "post_id": 57586877, "comment_id": 101631804, "body": "Look at the definition of WM_SYSCOMMAND."}], "tags": [], "owner": {"reputation": 87, "user_id": 11220832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6aa6499e2a606bcfcf934f6ae9f927fc?s=128&d=identicon&r=PG&f=1", "display_name": "user11220832", "link": "https://stackoverflow.com/users/11220832/user11220832"}, "is_accepted": false, "score": -1, "last_activity_date": 1566373935, "creation_date": 1566373935, "answer_id": 57586877, "question_id": 57586488, "link": "https://stackoverflow.com/questions/57586488/which-problem-prevents-showwindow-from-working/57586877#57586877", "title": "Which problem prevents ShowWindow from working?", "body": "<p>Do you mean: ShowWindow(hDialog,SW_SHOWNORMAL) ? Then you would need to change SW_SHOWNORMAL to some other value like SW_MINIMIZE. </p>\n\n<p>EDIT: (found it!)--Also i cant see where you initialized the HWND hDialog variable!?</p>\n\n<p>The method youre using to register the window is not to be used to create/register windows or something like that.\nSee: \n<a href=\"https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-registershellhookwindow\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-registershellhookwindow</a></p>\n\n<p>[This function is not intended for general use. It may be altered or unavailable in subsequent versions of Windows.]</p>\n\n<p>To create a window you should first create a windows system class to register your message handling and the window procedure.</p>\n\n<pre><code>HINSTANCE hinstance = GetModuleHandle(NULL); // NULL will give you the main\n                                             // applications module handle.\n\nWNDCLASSEX wc;\n\nwc.style = CS_HREDRAW | CS_VREDRAW | CS_OWNDC;\nwc.lpfnWndProc = wndProc; // window procedure\nwc.cbClsExtra = 0;\nwc.cbWndExtra = 0;\nwc.hInstance = hinstance;\nwc.hIcon = LoadIcon(NULL, IDI_WINLOGO);\nwc.hIconSm = wc.hIcon;\nwc.hCursor = LoadCursor(NULL, IDC_ARROW);\nwc.hbrBackground = (HBRUSH)GetStockObject(BLACK_BRUSH);\nwc.lpszMenuName = NULL;\nwc.lpszClassName = \"YourSystemClassNameHere(not the window title)\";\nwc.cbSize = sizeof(WNDCLASSEX);\n\nRegisterClassEx(&amp;wc);\n</code></pre>\n\n<p>Then you can create HWNDs.</p>\n\n<pre><code>HWND hwnd = CreateWindowEx(\n        WS_EX_APPWINDOW | WS_EX_PALETTEWINDOW,\n        \"YourSystemClassNameHere(not the window title)\",\n        title,\n        WS_CLIPSIBLINGS | WS_CLIPCHILDREN | WS_POPUP | WS_CAPTION,\n        positionX, positionX, width, height, NULL, NULL, hinstance, NULL);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1566485299, "post_id": 57591912, "comment_id": 101679217, "body": "<code>ShowWindowAsync</code> changes window state without waiting for the function to finish. Next, default procedure minimizes the window, next, window is hidden. This may work in your case but it&#39;s not reliable, you need to return <code>TRUE</code> to stop the default action."}], "tags": [], "owner": {"reputation": 2324, "user_id": 832220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/474e24012185034fd5c116ee32037c5e?s=128&d=identicon&r=PG", "display_name": "Norbert Willhelm", "link": "https://stackoverflow.com/users/832220/norbert-willhelm"}, "is_accepted": false, "score": 0, "last_activity_date": 1567088476, "last_edit_date": 1567088476, "creation_date": 1566391375, "answer_id": 57591912, "question_id": 57586488, "link": "https://stackoverflow.com/questions/57586488/which-problem-prevents-showwindow-from-working/57591912#57591912", "title": "Which problem prevents ShowWindow from working?", "body": "<p>Using ShowWindow and returning TRUE in Func if wParam equals SC_MINIMIZE or SC_RESTORE (with SW_HIDE or SW_RESTORE as nCmdShow)  works.</p>\n"}, {"comments": [{"owner": {"reputation": 2324, "user_id": 832220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/474e24012185034fd5c116ee32037c5e?s=128&d=identicon&r=PG", "display_name": "Norbert Willhelm", "link": "https://stackoverflow.com/users/832220/norbert-willhelm"}, "edited": false, "score": 0, "creation_date": 1566585899, "post_id": 57610532, "comment_id": 101716684, "body": "And how should I handle SC_RESTORE?"}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "reply_to_user": {"reputation": 2324, "user_id": 832220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/474e24012185034fd5c116ee32037c5e?s=128&d=identicon&r=PG", "display_name": "Norbert Willhelm", "link": "https://stackoverflow.com/users/832220/norbert-willhelm"}, "edited": false, "score": 0, "creation_date": 1566607609, "post_id": 57610532, "comment_id": 101721687, "body": "I don&#39;t know how you receive <code>SC_RESTORE</code> message. How does your program work? You hide the program, but then how do you show it again, and close it properly? Do you use Tray icons or something? Please edit your question with relative info."}, {"owner": {"reputation": 2324, "user_id": 832220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/474e24012185034fd5c116ee32037c5e?s=128&d=identicon&r=PG", "display_name": "Norbert Willhelm", "link": "https://stackoverflow.com/users/832220/norbert-willhelm"}, "edited": false, "score": 0, "creation_date": 1566634789, "post_id": 57610532, "comment_id": 101725184, "body": "I&#39;ll update my question tomorrow when I&#39;ll regain access to my development computer."}], "tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": false, "score": 1, "last_activity_date": 1566499635, "last_edit_date": 1566499635, "creation_date": 1566480610, "answer_id": 57610532, "question_id": 57586488, "link": "https://stackoverflow.com/questions/57586488/which-problem-prevents-showwindow-from-working/57610532#57610532", "title": "Which problem prevents ShowWindow from working?", "body": "<p>Your dialog procedure is returning <code>FALSE</code> after responding to <code>WM_SYSCOMMAND</code>. Change it so that it returns <code>TRUE</code>, this way it won't run the default action, it won't minimize the window. </p>\n\n<p><code>wParam</code> in this case should be bitwised AND against <code>0xFFF0</code></p>\n\n<pre><code>if((wParam &amp; 0xFFF0) == SC_MINIMIZE) {\n    ShowWindow(hwnd, SW_HIDE);\n    return TRUE; //&lt;- add this\n}\nbreak; //&lt;- return false...\n</code></pre>\n\n<p>See documentation:</p>\n\n<blockquote>\n  <p><a href=\"https://docs.microsoft.com/en-us/windows/win32/api/winuser/nc-winuser-dlgproc\" rel=\"nofollow noreferrer\">DLGPROC callback function</a><br>\n  Typically, the dialog box procedure should return TRUE if it processed\n  the message, and FALSE if it did not. If the dialog box procedure\n  returns FALSE, the dialog manager performs the default dialog\n  operation in response to the message.</p>\n  \n  <p><a href=\"https://docs.microsoft.com/en-us/windows/win32/menurc/wm-syscommand\" rel=\"nofollow noreferrer\">WM_SYSCOMMAND</a><br>\n  In WM_SYSCOMMAND messages, the four low-order bits of the wParam\n  parameter are used internally by the system. To obtain the correct\n  result when testing the value of wParam, an application must combine\n  the value 0xFFF0 with the wParam value by using the bitwise AND\n  operator.</p>\n</blockquote>\n\n<p>Note that <code>DialogBox</code> is better for this example (it won't need a message loop). If you must use <code>CreateDialog</code>, then change the message loop as follows:</p>\n\n<pre><code>INT_PTR CALLBACK Func(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM) \n{\n    switch(uMsg)\n    {\n    case WM_SYSCOMMAND:\n        if((wParam &amp; 0xFFF0) == SC_MINIMIZE)\n        {\n            ShowWindow(hwnd, SW_HIDE);\n            return TRUE;\n        }\n        break;\n\n    case WM_CLOSE:\n        DestroyWindow(hwnd);\n        return TRUE;\n    }\n    return FALSE;\n}\n\nint WINAPI WinMain(HINSTANCE hInstance, HINSTANCE, LPSTR, int) \n{\n    HWND hDialog = CreateDialog(hInstance, MAKEINTRESOURCE(IDD_DIALOG1), NULL, Func);\n    ...\n    while(GetMessage(&amp;msg, NULL, 0, 0) &amp;&amp; IsWindow(hDialog))\n    {\n        if(!IsDialogMessage(hDialog, &amp;msg))\n        {\n            TranslateMessage(&amp;msg);\n            DispatchMessage(&amp;msg);\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 2324, "user_id": 832220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/474e24012185034fd5c116ee32037c5e?s=128&d=identicon&r=PG", "display_name": "Norbert Willhelm", "link": "https://stackoverflow.com/users/832220/norbert-willhelm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1567088476, "creation_date": 1566372281, "last_edit_date": 1566480625, "question_id": 57586488, "link": "https://stackoverflow.com/questions/57586488/which-problem-prevents-showwindow-from-working", "title": "Which problem prevents ShowWindow from working?", "body": "<p>I try to create a window, which is hidden when it is minimized. The Window should be hidden, when it's minimized. Where is my problem? What prevents ShowWindow from working?</p>\n\n<pre><code>#define _WIN32_WINNT 0x0600\n\n#include &lt;Windows.h&gt;\n#include &lt;CommCtrl.h&gt;\n#pragma comment(lib,\"ComCtl32.lib\")\n#include &lt;tchar.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string&gt;\n#include \"resource.h\"\n#pragma comment(linker, \\\n  \"\\\"/manifestdependency:type='Win32' \"\\\n  \"name='Microsoft.Windows.Common-Controls' \"\\\n  \"version='6.0.0.0' \"\\\n  \"processorArchitecture='*' \"\\\n  \"publicKeyToken='6595b64144ccf1df' \"\\\n  \"language='*'\\\"\")\n\n//Fenster des Dialogs\nHWND hDialog;\n\nINT_PTR CALLBACK Func(HWND hwndDlg,UINT uMsg,WPARAM wParam,LPARAM lParam) {\n    switch(uMsg) {\n        case WM_SYSCOMMAND:\n            if(wParam==SC_MINIMIZE) {\n                ShowWindow(hDialog,SW_HIDE);\n            }\n            break;\n        case WM_CLOSE:\n            DestroyWindow(hwndDlg);\n            return TRUE;\n        case WM_DESTROY:\n            DeregisterShellHookWindow(hDialog);\n            PostQuitMessage(0);\n            return TRUE;\n    }\n    return FALSE;\n}\n\nint WINAPI WinMain(HINSTANCE hInstance,HINSTANCE hPrevInstance,LPSTR lpCmdLine,int nCmdShow) {\n    InitCommonControls();\n    hDialog=CreateDialog(hInstance,MAKEINTRESOURCE(IDD_DIALOG1),NULL,Func);\n    SendMessage(hDialog,WM_SETICON,ICON_BIG,(LPARAM)LoadIcon(NULL,(LPCWSTR)IDI_APPLICATION));\n    RegisterShellHookWindow(hDialog);\n    ShowWindow(hDialog,SW_SHOWNORMAL);\n    MSG msg={0};\n    BOOL ret=0;\n    while((ret = GetMessage(&amp;msg, 0, 0, 0)) != 0) {\n        if(ret==-1) {\n            break;\n        }\n        if(!IsDialogMessage(hDialog,&amp;msg)) {\n            TranslateMessage(&amp;msg);\n            DispatchMessage(&amp;msg);\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "video", "frame"], "comments": [{"owner": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "edited": false, "score": 0, "creation_date": 1566373243, "post_id": 57586404, "comment_id": 101631114, "body": "I&#39;m not really aware of video processing but since <code>QMediaPlayer::setPosition(int)</code> expects a value in milliseconds and if your frame rate is constant, I think you could get the frame duration once and for all at the beginning of the process and then divide the position value by the frame duration to know the frame number. Of course, if the frame rate is not guaranteed to be constant, this will not work."}, {"owner": {"reputation": 816, "user_id": 2307414, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/32069f4f72bac79afc55befd7b775a58?s=128&d=identicon&r=PG", "display_name": "Amazonasmann", "link": "https://stackoverflow.com/users/2307414/amazonasmann"}, "reply_to_user": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "edited": false, "score": 0, "creation_date": 1566374067, "post_id": 57586404, "comment_id": 101631521, "body": "It seems like QMediaplayer is moving forward while the QAbstractVideoSurface::present() is still trying to show older frames. I could recalculate the time, but I do not know at which time of the QMediaplayer this frame was processed and &quot;sent out&quot; to being processed..."}, {"owner": {"reputation": 87362, "user_id": 176769, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PckCW.png?s=128&g=1", "display_name": "karlphillip", "link": "https://stackoverflow.com/users/176769/karlphillip"}, "edited": false, "score": 0, "creation_date": 1606951806, "post_id": 57586404, "comment_id": 115122899, "body": "@Amazonasmann Did you solve this? Would you care to share with the group?"}], "owner": {"reputation": 816, "user_id": 2307414, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/32069f4f72bac79afc55befd7b775a58?s=128&d=identicon&r=PG", "display_name": "Amazonasmann", "link": "https://stackoverflow.com/users/2307414/amazonasmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 397, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1566371959, "creation_date": 1566371959, "question_id": 57586404, "link": "https://stackoverflow.com/questions/57586404/get-accurate-frame-number-from-qmediaplayer", "title": "Get accurate frame Number from QMediaplayer", "body": "<p>I want to process frames with Qt. I use QMediaplayer to load a video. \nI used the implmentation I found <a href=\"https://stackoverflow.com/questions/37724602/how-to-save-a-frame-using-qmediaplayer\">here</a>. I have additional data stored as \"frame by frame values\" in a .csv file.</p>\n\n<p>For this I want to get the exact frame number of the current frame which is processed in the \"present\" function of my <a href=\"https://doc.qt.io/qt-5/qabstractvideosurface.html\" rel=\"nofollow noreferrer\">QAbstractVideoSurface</a> implementation. It works while playing/stopping and pausing the video, but not when I attach a slider to the video...it seems that the QMediaplayer is out of sync with the data which is displayed. I tried getting the current time of the QMediaplayer while being in the <code>QAbstractVideoSurface::present()</code> function but it just won't work. Setting the time from outside while the slider is being moved was also no success for me.</p>\n\n<p><strong>My main problem is that <code>QVideoFrame::startTime()</code> and <code>QVideoFrame::stopTime()</code> does not deliver correct results after <code>QMediaPlayer::setPosition(int)</code> was called!</strong></p>\n\n<p>Does anyone have ideas how I get the current frame number for a QVideoFrame?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2565, "user_id": 4781312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lDEcJ.jpg?s=128&g=1", "display_name": "Asesh", "link": "https://stackoverflow.com/users/4781312/asesh"}, "edited": false, "score": 1, "creation_date": 1566371297, "post_id": 57586221, "comment_id": 101630202, "body": "<code>&amp;</code> here denotes reference to that variable"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1566371317, "post_id": 57586221, "comment_id": 101630215, "body": "It&#39;s the same as the difference between e.g. <code>int</code> and <code>int&amp;</code> or <code>MyClass</code> and <code>MyClass&amp;</code>."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1566371442, "post_id": 57586221, "comment_id": 101630275, "body": "Why are you using <code>&lt;stdio.h&gt;</code> and <code>printf</code> in a C++11 program? <code>std::cout &lt;&lt; &quot;\\n&quot;;</code> works just as well."}], "answers": [{"tags": [], "owner": {"reputation": 156, "user_id": 11872892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097a1964eeb59445181a721534b5a004?s=128&d=identicon&r=PG&f=1", "display_name": "Suarez Zhou", "link": "https://stackoverflow.com/users/11872892/suarez-zhou"}, "is_accepted": true, "score": 4, "last_activity_date": 1566372241, "last_edit_date": 1566372241, "creation_date": 1566371720, "answer_id": 57586345, "question_id": 57586221, "link": "https://stackoverflow.com/questions/57586221/what-is-the-difference-between-auto-and-auto/57586345#57586345", "title": "What is the difference between auto and auto&amp;?", "body": "<p>Auto, <code>for(auto x : range)</code>: This usage will create a copy of each element of the range.<br>\nAuto &amp;, <code>for(auto&amp; x : range)</code>: when you want to modify the elements in range (without proxy class reference processing), use auto&amp;.</p>\n\n<p><code>ii</code> is a reference, so in the loop body, if <code>ii</code> is modified, the corresponding element in <code>a</code> will also be modified.</p>\n\n<p><code>jj</code> is not a reference. In each loop, it is a copy of the corresponding element. Its modification will not affect the corresponding element in <code>a</code>. Since each loop creates a copy, it will bring system overhead. </p>\n\n<p>If you want to ensure that the data in <code>a</code> is not modified and you want to improve the efficiency, you can use the form <code>const auto &amp; ii : a</code>.</p>\n"}], "owner": {"reputation": 1233, "user_id": 11872808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29d7b759b09573f7750c178d99015eca?s=128&d=identicon&r=PG&f=1", "display_name": "Jeaninez - MSFT", "link": "https://stackoverflow.com/users/11872808/jeaninez-msft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 1, "closed_date": 1566371432, "accepted_answer_id": 57586345, "answer_count": 1, "score": 0, "last_activity_date": 1566372241, "creation_date": 1566371213, "last_edit_date": 1566371258, "question_id": 57586221, "link": "https://stackoverflow.com/questions/57586221/what-is-the-difference-between-auto-and-auto", "closed_reason": "Duplicate", "title": "What is the difference between auto and auto&amp;?", "body": "<p>Here is my code. According to the print results, there is no difference, then what does the &amp; symbol play here?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n#include &lt;Windows.h&gt;\n\nint main(void)\n{\n    std::cout &lt;&lt; \"Print test data\\n\" &lt;&lt; std::endl;\n    int a[5] = { 23,443,16,49,66 };\n\n    for (auto &amp;ii : a)\n    {\n        std::cout &lt;&lt; \"auto ii: \" &lt;&lt; ii &lt;&lt; std::endl;\n    }\n\n    printf(\"\\n\");\n\n    for (auto jj : a)\n    {\n        std::cout &lt;&lt; \"auto jj: \" &lt;&lt; jj &lt;&lt; std::endl;\n    }\n    system(\"pause\");\n\n}\n</code></pre>\n"}, {"tags": ["c++", "makefile", "archive", "unix-ar"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 1, "creation_date": 1566370493, "post_id": 57585823, "comment_id": 101629855, "body": "yes you can, you&#39;ll have to ask the author of your makefile why they did that"}, {"owner": {"reputation": 694, "user_id": 6528719, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jyH70.jpg?s=128&g=1", "display_name": "Dinesh Gowda", "link": "https://stackoverflow.com/users/6528719/dinesh-gowda"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1566372062, "post_id": 57585823, "comment_id": 101630571, "body": "Its a very old code author is not there. So we can do it in both ways right?"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1566375489, "post_id": 57585823, "comment_id": 101632139, "body": "I can&#39;t think of a good reason not to just link straight to the <code>.a</code> files"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1566401301, "post_id": 57585823, "comment_id": 101647184, "body": "The term &#39;stripped&#39; has specific (but largely obsolete) connotations \u2014 see the <code>strip</code> program.  I think you mean &#39;extracted&#39; (because <code>ar x</code> extracts files from an archive), so I&#39;ve edited the text to match that."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1566401460, "post_id": 57585823, "comment_id": 101647267, "body": "Using <code>ar</code> to build <code>libapi.so</code> does not make <code>libapi.so</code> into a shared library; it is still a static archive library, but it is one that has a misleading name.  The linker will probably accept the file, but it will be using it as a static archive, not as a shared library."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1566401652, "post_id": 57585823, "comment_id": 101647360, "body": "The <code>-I &#47;home&#47;boost</code> option at the end of the proposed linker command is unlikely to be useful or used (though it does no harm beyond puzzling the onlookers).  The <code>-I</code> option affects the preprocessor, and there&#39;s no preprocessing done in that command line.  Using <code>-L &#47;home&#47;boost</code> before the libraries would permit you to use <code>-L &#47;home&#47;boost -lboost_datetime -lboost_filesystem -lboost_system</code> to specify the libraries."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1566402028, "post_id": 57585823, "comment_id": 101647552, "body": "The &#39;advantage&#39; to including the Boost library object files in the <code>libapi.a</code> library is that you only need to link with <code>-L &#47;home&#47;for&#47;libapi -lapi</code> (or <code>&#47;home&#47;for&#47;libapi&#47;libapi.a</code>) and all the necessary other code is found without needing to worry about where it is installed.  The disadvantage is that updating the Boost libraries means you need to rebuild the <code>libapi.a</code> file and then relink your executables (whereas if the Boost libraries are separate, then you only need to relink your executables).  It also makes the build (link) lines more complex \u2014 more verbiage on them."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1566402120, "post_id": 57585823, "comment_id": 101647599, "body": "If you used shared libraries for the Boost libraries, you would not even need to relink your executables when the Boost libraries are updated (unless there was a breaking change in the Boost libraries, which is rare though probably not impossible)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1566402577, "post_id": 57585823, "comment_id": 101647842, "body": "The <code>-static -o libapi.a \u2026</code> part would create an &#39;executable&#39; (or attempt to create one) called <code>libapi.a</code>; it would not be either a shared object or a static library.  The linker does not produce static libraries \u2014 it only consumes them.  The &#39;attempt&#39; would likely fail because there&#39;d be no <code>main()</code> function in the libraries.  Although there are libraries that include a <code>main()</code> function (Lex and Yacc libraries did, in times past), they&#39;re rare.  If you want a static library to automatically reference other libraries, you probably need <a href=\"https://www.gnu.org/software/libtool/\" rel=\"nofollow noreferrer\"><code>libtool</code></a>."}, {"owner": {"reputation": 694, "user_id": 6528719, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jyH70.jpg?s=128&g=1", "display_name": "Dinesh Gowda", "link": "https://stackoverflow.com/users/6528719/dinesh-gowda"}, "edited": false, "score": 0, "creation_date": 1566447913, "post_id": 57585823, "comment_id": 101660650, "body": "So inorder to generate an archive, we need to use <code>ar</code> utility itself? But in case of shared object no need of <code>ar</code> the <code>linker</code> will do the job? Please correct me if i am wrong."}, {"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 2, "creation_date": 1566508406, "post_id": 57585823, "comment_id": 101689082, "body": "A shared library is NOT the same thing is a static library.  They look kind of similar on the surface but they are <i>totally</i> different things and are created in totally different ways.  Static libraries are created with ar: they&#39;re simply a concatenated list of object files (kind of like a glorified tar file).  Shared libraries are actual executable entities that are created with the linker, like a program would be.  Symbols are resolved, optimizations are applied, etc. etc.  They have to be created with the linker, as a result of that."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1566593330, "post_id": 57585823, "comment_id": 101719058, "body": "Yes; static libraries are created with <code>ar</code> but shared objects are created via the linker."}], "owner": {"reputation": 694, "user_id": 6528719, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jyH70.jpg?s=128&g=1", "display_name": "Dinesh Gowda", "link": "https://stackoverflow.com/users/6528719/dinesh-gowda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1566401205, "creation_date": 1566369775, "last_edit_date": 1566401205, "question_id": 57585823, "link": "https://stackoverflow.com/questions/57585823/different-ways-of-linking-archive", "title": "Different ways of linking archive", "body": "<p>I have an archive named <code>libapi.a</code> which is being generated by <code>makefile</code>.\nThis libapi.a depends on some of the boost libraries like <code>libboost_system.a</code>, <code>libboost_filesystem.a</code> and <code>libboost_datetime.a</code>\nNow in my makefile what is happening is the objects of the Boost libraries are extracted using <code>ar x</code> command.\nThe objects are copied to build directory and <code>libapi.a</code> is generated using</p>\n\n<pre><code>ar rcs ../build/libapi.so ../build/*.o\n</code></pre>\n\n<p>My question is why are the objects of libboost libraries being extracted?\nCan't we generate archive just like we generate shared library using the below command with out extracting out any objects of boost library?</p>\n\n<pre><code>g++ $(CPPFLAGS) $(OBJS) -static -o libapi.a \\\n    /home/boost/libboost_datetime.a /home/boost/libboost_filesystem.a \\\n    /home/boost/libboost_system.a -I/home/boost/\n</code></pre>\n"}, {"tags": ["c++", "cross-compiling", "sfml", "static-linking"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1566369127, "post_id": 57585655, "comment_id": 101629255, "body": "Do SFML even <i>have</i> static libraries to link with?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1566369210, "post_id": 57585655, "comment_id": 101629295, "body": "As for the 0xc000007b error, I suggest you read e.g. <a href=\"https://www.diskgenius.com/how-to/fix-error-code-0xc000007b.php\" rel=\"nofollow noreferrer\">diskgenius.com/how-to/fix-error-code-0xc000007b.php</a> (found very easily when searching for <i>0xc000007b windows error</i>)."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1566369305, "post_id": 57585655, "comment_id": 101629332, "body": "Your problem is here: &quot;The application was unable to start correctly (0xc000007b).&quot;. No idea what that means -- so find it out, it&#39;s pretty easy! Also, there&#39;s a tool called dependencywalker that I&#39;d highly recommend. That said, you should extract a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, e.g. whether SFML is relevant at all is still at question. Lastly, as a new user here, take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 21, "user_id": 11955063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05969eb55f5cc2a044a3a1ce7416808a?s=128&d=identicon&r=PG&f=1", "display_name": "0wzk", "link": "https://stackoverflow.com/users/11955063/0wzk"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1566369338, "post_id": 57585655, "comment_id": 101629347, "body": "@Someprogrammerdude Yeah I just checked, they do. For example, &quot;libsfml-system-s.a&quot; is included with the SFML download. the &#39;-s&#39; is to indicate &quot;static&quot;."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1566369535, "post_id": 57585655, "comment_id": 101629443, "body": "I don&#39;t see anything about it in <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Link-Options.html#Link-Options\" rel=\"nofollow noreferrer\">the link options documentation</a> but the libraries themselves are sensitive to ordering, perhaps it&#39;s the same with the <code>-static</code> flag? What happens if you place it before the libraries?"}, {"owner": {"reputation": 21, "user_id": 11955063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05969eb55f5cc2a044a3a1ce7416808a?s=128&d=identicon&r=PG&f=1", "display_name": "0wzk", "link": "https://stackoverflow.com/users/11955063/0wzk"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1566369865, "post_id": 57585655, "comment_id": 101629587, "body": "@Someprogrammerdude I tried placing the <code>-static</code> flag before the library linking. It didn&#39;t seem to change anything, unfortunately. I also had the idea to pass <code>-DSFML_STATIC</code> because I remember having to define that on Windows, but it also made no difference."}, {"owner": {"reputation": 768, "user_id": 10765031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19818c272f28b0be58edab2373192e34?s=128&d=identicon&r=PG&f=1", "display_name": "fdan", "link": "https://stackoverflow.com/users/10765031/fdan"}, "edited": false, "score": 0, "creation_date": 1566383768, "post_id": 57585655, "comment_id": 101636831, "body": "you should link static libraries (postfix <code>-s</code>) if you want to statically link the libraries :) either build sfml on your own using <code>-DSFML_STATIC</code> or use the static libraries provided by the package you downloaded."}, {"owner": {"reputation": 402, "user_id": 13427153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BFzJA.jpg?s=128&g=1", "display_name": "Dynamic Squid", "link": "https://stackoverflow.com/users/13427153/dynamic-squid"}, "edited": false, "score": 0, "creation_date": 1604200048, "post_id": 57585655, "comment_id": 114272791, "body": "I have the same problem. I can compile perfectly fine, however when I run the <code>exe</code> on another computer, it shows the same errors..."}], "owner": {"reputation": 21, "user_id": 11955063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05969eb55f5cc2a044a3a1ce7416808a?s=128&d=identicon&r=PG&f=1", "display_name": "0wzk", "link": "https://stackoverflow.com/users/11955063/0wzk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 372, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1566369041, "creation_date": 1566369041, "question_id": 57585655, "link": "https://stackoverflow.com/questions/57585655/sfml-static-linking-problem-sfml-system-2-dll-not-found", "title": "SFML static linking problem: sfml-system-2.dll not found", "body": "<h2>Quick Summary</h2>\n\n<p>I have a very simple SFML application that I'm trying to <strong>cross-compile to Windows, from Linux</strong>. I am trying to <strong>statically link the SFML libraries</strong> with the application.</p>\n\n<p>However, when I run the compiled application in a Windows 10 Virtual Machine, I get DLL import errors: <em>\"The code execution cannot proceed because *.dll was not found. Reinstalling the program may fix this issue.\"</em></p>\n\n<p>Some of the .dll files that were missing are: sfml-system-2.dll, sfml-window-2.dll etc.</p>\n\n<h2>Source Code</h2>\n\n<p>Here is the program I am trying to statically link:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// main.cpp\n#include &lt;SFML/Graphics.hpp&gt;\n\nint main(void) {\n    sf::RenderWindow window(sf::VideoMode(800, 600), \"Hello World!\");\n    sf::CircleShape circle(600.f / 2.f, 60);\n\n    window.setFramerateLimit(60);\n\n    while (window.isOpen()) {\n        sf::Event event;\n        while (window.pollEvent(event)) {\n            switch (event.type) {\n                case sf::Event::Closed:\n                    window.close();\n                    break;\n            }\n        }\n\n        window.clear();\n        window.draw(circle);\n        window.display();\n    }\n\n    return 0;\n}\n\n</code></pre>\n\n<h2>How I compiled</h2>\n\n<pre class=\"lang-sh prettyprint-override\"><code>x86_64-w64-mingw32-g++ ./main.cpp -lsfml-system -lsfml-window -lsfml-graphics -static -static-libgcc -static-libstdc++\n</code></pre>\n\n<p>The compilation succeeds, and outputs a file: \"a.exe\"</p>\n\n<p>As you can see, I'm using Mingw32, and I'm passing the <code>-static</code> parameter, which usually works on my other C++ programs, but it seems like SFML isn't successfully being statically linked.</p>\n\n<h2>My Environment</h2>\n\n<p>I'm thinking I might have the wrong environment for cross compiling SFML?\nI downloaded SFML 2.5.1 <em>(GCC 7.3.0 MinGW (SEH) - 64-bit)</em> from <a href=\"https://www.sfml-dev.org/download/sfml/2.5.1/\" rel=\"nofollow noreferrer\">sfml-dev.org</a>, placed the shared-object files into /usr/x86_64-w64-ming32/lib/, and then placed the include files into /usr/x86_64-w64-mingw32/include/.</p>\n\n<h2>What I tried</h2>\n\n<p>I tried taking the Windows SFML binaries (sfml-system-2.dll, sfml-window-2.dll, etc.) and placing them in the same directory as the application. They were successfully found &amp; imported <strong>but</strong> then, I got an execution error: <em>\"The application was unable to start correctly (0xc000007b).\"</em>. No idea what that means, but I assume it can be fixed by statically linking SFML.</p>\n\n<p>I apologize if this is a nooby question, or if I'm doing something obviously wrong! I'm quite inexperienced with cross-compilation. Cheers!</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1566366703, "post_id": 57585070, "comment_id": 101628381, "body": "Have you tried a 2nd call of <code>qApp.exec()</code> after first? On Windows, it&#39;s not a problem at all to put code after <code>qApp.exec()</code> - we do this in our production code. About other platforms - I did not yet try this. Btw. <code>qApp</code> is an unlucky name. I once realized that there is a macro <code>qApp</code>. I fixed this with <code>#undef qApp</code> but got complaints from the (real) experts and ended up with something else... ;-)"}, {"owner": {"reputation": 89, "user_id": 9668099, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "elams", "link": "https://stackoverflow.com/users/9668099/elams"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1566366919, "post_id": 57585070, "comment_id": 101628461, "body": "@Scheff My application is being developed on Linux as of now. But do you suggest trying it anyways?"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1566366988, "post_id": 57585070, "comment_id": 101628480, "body": "To try in a minimal example cannot hurt, can it? ;-) I remember roughly that I already answered something similar. If I only could find this answer... (Will keep on searching.)"}, {"owner": {"reputation": 89, "user_id": 9668099, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "elams", "link": "https://stackoverflow.com/users/9668099/elams"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1566367358, "post_id": 57585070, "comment_id": 101628607, "body": "I tried but it didn&#39;t work. It closed even after doing that:("}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1566367679, "post_id": 57585070, "comment_id": 101628725, "body": "Found it. You could try this sample on your side: <a href=\"https://stackoverflow.com/a/48237532/7478597\">SO: Qt exit application and show another window</a> for a start. If I understood you right, you don&#39;t want a 2nd window. I&#39;m not quite sure how to run <code>QGUIApplication</code> without a window. However, a detached child process might be an alternative solution. In another answer I showed that it can outlive the process where it was started from <a href=\"https://stackoverflow.com/a/52226367/7478597\">SO: QProcess that will outlive the parent for updating</a>"}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 9668099, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "elams", "link": "https://stackoverflow.com/users/9668099/elams"}, "edited": false, "score": 0, "creation_date": 1566369289, "post_id": 57585370, "comment_id": 101629325, "body": "Yes. I used tray icon for getting back the application instance but I used close at the end of the click event function. I tried this and now it works fine."}], "tags": [], "owner": {"reputation": 101, "user_id": 11955092, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDjnj1XK-tXVRStvFvman_5Y4XiQ3V8CgICmKcg=k-s128", "display_name": "Danil Karpov", "link": "https://stackoverflow.com/users/11955092/danil-karpov"}, "is_accepted": true, "score": 5, "last_activity_date": 1566367613, "creation_date": 1566367613, "answer_id": 57585370, "question_id": 57585070, "link": "https://stackoverflow.com/questions/57585070/make-application-not-quit-even-if-main-window-is-closed/57585370#57585370", "title": "Make application not quit even if Main window is closed", "body": "<p>I think it's better for you to just try hiding main QWidget of your application using <code>setVisible(false)</code></p>\n\n<p>After that you'll need some way to open your main window back again(tray menu is first option I can come up with) with <code>setVisible(true)</code></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11818134, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oV5NyT1eW0I/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfTpfUKg0WJI8XPaHKOgXgfsG1qKw/photo.jpg?sz=128", "display_name": "user11818134", "link": "https://stackoverflow.com/users/11818134/user11818134"}, "is_accepted": false, "score": 0, "last_activity_date": 1566367832, "creation_date": 1566367832, "answer_id": 57585417, "question_id": 57585070, "link": "https://stackoverflow.com/questions/57585070/make-application-not-quit-even-if-main-window-is-closed/57585417#57585417", "title": "Make application not quit even if Main window is closed", "body": "<p>Use the concept of Daemon thread of multi-threading for the same. The thread continues to run even when the program is executed or exited.</p>\n"}], "owner": {"reputation": 89, "user_id": 9668099, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "elams", "link": "https://stackoverflow.com/users/9668099/elams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 1, "accepted_answer_id": 57585370, "answer_count": 2, "score": 4, "last_activity_date": 1566367832, "creation_date": 1566365891, "question_id": 57585070, "link": "https://stackoverflow.com/questions/57585070/make-application-not-quit-even-if-main-window-is-closed", "title": "Make application not quit even if Main window is closed", "body": "<p>I want the application to run in background even if the main window is closed.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/19811141/make-qt-application-not-to-quit-when-last-window-is-closed\">I checked this one</a> out and tried it but the application exits when I explicitly press exit button. I want the application to run in background even if I press exit explicitly.</p>\n\n<p>I tried this</p>\n\n<pre><code>QApplication qApp;\nqApp.setQuitOnLastWindowClosed(false);\n</code></pre>\n"}, {"tags": ["c++", "macos", "cython"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1566366231, "post_id": 57584909, "comment_id": 101628245, "body": "Apple used to provide an ancient version of the C++ runtime that pretends to be C++11. What version of OS X, and what version of Clang? You should probably supply <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 1, "creation_date": 1566369252, "post_id": 57584909, "comment_id": 101629313, "body": "Yeah try compiling with <code>-lc++</code> instead of <code>-lstdc++</code> (which might be the default depending on your deployment target).  The newer C++ runtime is 10.7+ so you might need to consider that when building."}, {"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1566369611, "post_id": 57584909, "comment_id": 101629480, "body": "You probably just need it on the linker step then."}, {"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 1, "creation_date": 1566370039, "post_id": 57584909, "comment_id": 101629662, "body": "Try using <code>-stdlib=libc++</code> ... and instead of <code>gcc</code> try <code>g++</code>..."}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 2, "creation_date": 1566370155, "post_id": 57584909, "comment_id": 101629711, "body": "I wonder if the problem is that Cython insists on telling it the template arguments. Instead of cimporting sort, can you try: <code>cdef extern from \u201d&lt;algorithm&gt;&quot; namespace &quot;std&quot;: void stdsort(...) &quot;sort&quot;</code>. Essentially the difference is that Cython will let C++ figure out the template arguments."}, {"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 1, "creation_date": 1566370435, "post_id": 57584909, "comment_id": 101629827, "body": "I&#39;L&#39;I has the option I was thinking of."}, {"owner": {"reputation": 22825, "user_id": 992687, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/0Da71.png?s=128&g=1", "display_name": "The Unfun Cat", "link": "https://stackoverflow.com/users/992687/the-unfun-cat"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1566371093, "post_id": 57584909, "comment_id": 101630113, "body": "@DavidW If I remove the <code>cimport</code> of <code>sort</code> and reduce your suggestion to <code>cdef extern from &quot;&lt;algorithm&gt;&quot; namespace &quot;std&quot;:     void sort(...)</code> it seems to work on both linux and macOS. Perhaps you could add it as an answer with an explanation?"}, {"owner": {"reputation": 22825, "user_id": 992687, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/0Da71.png?s=128&g=1", "display_name": "The Unfun Cat", "link": "https://stackoverflow.com/users/992687/the-unfun-cat"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1566371466, "post_id": 57584909, "comment_id": 101630284, "body": "@DavidW I have the same problem with unique from <code>&lt;algorithm&gt;</code>. What should the type be imported as here? It cannot be void and I cannot find an import for the iterator C++ type..."}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1566371613, "post_id": 57584909, "comment_id": 101630369, "body": "@TheUnfunCat Will do... I&#39;m not sure about unique, but I&#39;ll see if I can figure it out"}, {"owner": {"reputation": 22825, "user_id": 992687, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/0Da71.png?s=128&g=1", "display_name": "The Unfun Cat", "link": "https://stackoverflow.com/users/992687/the-unfun-cat"}, "edited": false, "score": 0, "creation_date": 1566371662, "post_id": 57584909, "comment_id": 101630398, "body": "I&#39;ll create a new question for that. That one will be about how to use iterator as a type in Cython :)"}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1566371669, "post_id": 57584909, "comment_id": 101630407, "body": "Are you trying to do the 3 argument version of unique?"}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1566371704, "post_id": 57584909, "comment_id": 101630417, "body": "It&#39;s OK - it isn&#39;t a huge extension to the question. If I can answer it I&#39;ll just tack it on here"}, {"owner": {"reputation": 22825, "user_id": 992687, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/0Da71.png?s=128&g=1", "display_name": "The Unfun Cat", "link": "https://stackoverflow.com/users/992687/the-unfun-cat"}, "edited": false, "score": 0, "creation_date": 1566371730, "post_id": 57584909, "comment_id": 101630430, "body": "Yes, I am actually sorting just to remove duplicates. And I need the three arg version for it to understand and know how to compare my intervals :)"}], "answers": [{"tags": [], "owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "is_accepted": true, "score": 4, "last_activity_date": 1566373530, "creation_date": 1566373530, "answer_id": 57586789, "question_id": 57584909, "link": "https://stackoverflow.com/questions/57584909/unable-to-use-cdef-function-in-stdsort-as-comparison-function/57586789#57586789", "title": "Unable to use cdef function in std::sort as comparison function", "body": "<p>The basic problem is that Cython insists on specifying the template arguments. Instead of generating C code that looks like:</p>\n\n<pre><code>std::sort(__pyx_v_intervals.begin(), __pyx_v_intervals.end(), __pyx_f_5epic2_3src_8read_bam_compare_start_end);\n</code></pre>\n\n<p>it generates</p>\n\n<pre><code>std::sort&lt;std::vector&lt;__pyx_t_5epic2_3src_8read_bam_interval&gt; ::iterator,uint32_t (__pyx_t_5epic2_3src_8read_bam_interval, __pyx_t_5epic2_3src_8read_bam_interval)&gt;(__pyx_v_intervals.begin(), __pyx_v_intervals.end(), __pyx_f_5epic2_3src_8read_bam_compare_start_end);\n</code></pre>\n\n<p>Generally in C++ it's better to let C++ figure out the template arguments. In this case I think Cython has probably messed up the function pointer argument.</p>\n\n<p>The solution is to not tell Cython that you have a template function. The involves re-wrapping the functions yourself rather than using Cython's libcpp wrappers. One option is to just specify all the types - the types don't have to match <em>exactly</em> but have to be close enough that Cython thinks it can pass the right arguments:</p>\n\n<pre><code>cdef extern from \"&lt;algorithn&gt;\" namespace \"std\":\n    # code is untested because this isn't the solution I used...\n    void sort(vector[interval].iterator, vector[interval].iterator,\n              uint32_t (*)(interval, interval))\n</code></pre>\n\n<p>I prefer just using <code>...</code>. This was designed to wrap C varargs functions like <code>printf</code> where you can pass anything but it works perfectly well here too:</p>\n\n<pre><code>cdef extern from \"&lt;algorithm&gt;\" namespace \"std\":\n    void sort(...)\n    # to rename to stdsort do\n    void stdsort \"sort\"(...)\n</code></pre>\n\n<p>The end result is that Cython stops trying to tell C++ what the template arguments should be.</p>\n\n<hr>\n\n<p><code>std::unique</code> is a little more complicated since it has a return type. Therefore Cython needs to know at least one template argument. Fortunately I'm pretty sure that only the last argument is causing problems, so you can safely tell Cython about the first argument being a template:</p>\n\n<pre><code>cdef extern from \"&lt;algorithm&gt;\" namespace \"std\":\n    Iter unique[Iter](Iter, Iter, ...)\n</code></pre>\n"}], "owner": {"reputation": 22825, "user_id": 992687, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/0Da71.png?s=128&g=1", "display_name": "The Unfun Cat", "link": "https://stackoverflow.com/users/992687/the-unfun-cat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 1, "accepted_answer_id": 57586789, "answer_count": 1, "score": 1, "last_activity_date": 1566373530, "creation_date": 1566364915, "last_edit_date": 1566370695, "question_id": 57584909, "link": "https://stackoverflow.com/questions/57584909/unable-to-use-cdef-function-in-stdsort-as-comparison-function", "title": "Unable to use cdef function in std::sort as comparison function", "body": "<p>The code below is from <a href=\"https://github.com/biocore-ntnu/epic2/blob/ffd75cd4ef52b040e133d00c87053bb4c30b5c0a/epic2/src/read_bam.pyx\" rel=\"nofollow noreferrer\">this file</a>. It compiles correctly on Linux, but fails to compile on OS X.</p>\n\n<p>I want to sort a vector of self-defined intervals:</p>\n\n<pre><code>stdsort(intervals.begin(), intervals.end(), compare_start_end)\n</code></pre>\n\n<p>My comparison function is the following:</p>\n\n<pre><code>cdef uint32_t compare_start_end(interval lhs, interval rhs):\n  if (lhs.start &lt; rhs.start):\n    return &lt;uint32_t&gt; 1\n  elif (rhs.start &lt; lhs.start):\n      return &lt;uint32_t&gt; 0\n  elif (lhs.end &lt; rhs.end):\n      return &lt;uint32_t&gt; 1\n  else:\n    return &lt;uint32_t&gt; 0\n</code></pre>\n\n<p>The error I get is the following:</p>\n\n<pre><code>In file included from epic2/src/read_bam.cpp:651:\n/Library/Developer/CommandLineTools/usr/include/c++/v1/algorithm:4117:5: error: no matching function for call to '__sort'\n    __sort&lt;_Comp_ref&gt;(__first, __last, __comp);\n    ^~~~~~~~~~~~~~~~~\nepic2/src/read_bam.cpp:3305:12: note: in instantiation of function template specialization 'std::__1::sort&lt;std::__1::__wrap_iter&lt;__pyx_t_5epic2_3src_8read_bam_interval *&gt;, unsigned int (__pyx_t_5epic2_3src_8read_bam_interval, __pyx_t_5epic2_3src_8read_bam_interval)&gt;'\n      requested here\n      std::sort&lt;std::vector&lt;__pyx_t_5epic2_3src_8read_bam_interval&gt; ::iterator,uint32_t (__pyx_t_5epic2_3src_8read_bam_interval, __pyx_t_5epic2_3src_8read_bam_interval)&gt;(__pyx_v_intervals.begin(), __pyx_v_intervals.end(), __pyx_f_5epic2_3src_8read_bam_compare_start_end);\n           ^\n/Library/Developer/CommandLineTools/usr/include/c++/v1/algorithm:3914:1: note: candidate function template not viable: no known conversion from 'unsigned int (*)(__pyx_t_5epic2_3src_8read_bam_interval, __pyx_t_5epic2_3src_8read_bam_interval)' to 'unsigned int\n      (&amp;)(__pyx_t_5epic2_3src_8read_bam_interval, __pyx_t_5epic2_3src_8read_bam_interval)' for 3rd argument; dereference the argument with *\n__sort(_RandomAccessIterator __first, _RandomAccessIterator __last, _Compare __comp)\n^\n1 warning and 1 error generated.\n</code></pre>\n\n<p>The problem seems to be one of types.</p>\n\n<p>I have</p>\n\n<pre><code>'unsigned int (*)(__pyx_t_5epic2_3src_8read_bam_interval, __pyx_t_5epic2_3src_8read_bam_interval)' \n</code></pre>\n\n<p>but my function expects</p>\n\n<pre><code>unsigned int (&amp;)(__pyx_t_5epic2_3src_8read_bam_interval, __pyx_t_5epic2_3src_8read_bam_interval)\n</code></pre>\n\n<p>The hint is to try to dereference the third argument, but this does not work.</p>\n\n<pre><code>stdsort(intervals.begin(), intervals.end(), dereference(compare_start_end))\n</code></pre>\n\n<p>Instead, it errors with</p>\n\n<pre><code>Compiling epic2/src/read_bam.pyx because it changed.\n[1/1] Cythonizing epic2/src/read_bam.pyx\n\nError compiling Cython file:\n------------------------------------------------------------\n...\n        intervals = dereference(it).second\n        five_ends = intvec()\n\n        if drop_duplicates:\n\n            stdsort(intervals.begin(), intervals.end(), dereference(compare_start_end))\n                                                       ^\n</code></pre>\n\n<p>Do you have any advice? Ps. the above compiles on linux, but not on macOS, so the code is brittle.</p>\n\n<hr>\n\n<h1>System info</h1>\n\n<p>macOS Mojave, 10.14.6 (18G87)</p>\n\n<pre><code>gcc --version\nConfigured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/usr/include/c++/4.2.1\nApple LLVM version 10.0.1 (clang-1001.0.46.4)\nTarget: x86_64-apple-darwin18.7.0\nThread model: posix\nInstalledDir: /Library/Developer/CommandLineTools/usr/bin\n</code></pre>\n\n<h1>Minimal reproducible example</h1>\n\n<pre><code># minimal_example.pyx\nfrom libc.stdint cimport uint32_t\nfrom libcpp.algorithm cimport sort as stdsort\nfrom libcpp.vector cimport vector\n\nctypedef struct interval:\n    uint32_t start\n    uint32_t end\n\nctypedef vector[uint32_t] intvec\nctypedef vector[interval] interval_vector\n\n\ncdef uint32_t compare_start_end(interval lhs, interval rhs):\n  if (lhs.start &lt; rhs.start):\n    return &lt;uint32_t&gt; 1\n  elif (rhs.start &lt; lhs.start):\n      return &lt;uint32_t&gt; 0\n  elif (lhs.end &lt; rhs.end):\n      return &lt;uint32_t&gt; 1\n  else:\n    return &lt;uint32_t&gt; 0\n\n\ncdef test(interval_vector intervals):\n    stdsort(intervals.begin(), intervals.end(), compare_start_end)\n</code></pre>\n\n<p>Compile with:</p>\n\n<pre><code>folder_with_Python_h=\"/mnt/work/endrebak/software/anaconda/include/python3.7m/\"\ncython --cplus minimal_example.pyx\ngcc -I $folder_with_Python_h  -c minimal_example.cpp -o minimal_example.o -Ofast -Wall -std=c++11\n</code></pre>\n\n<p>Same error message pops up on macOS, but not linux.</p>\n\n<p>Other commands I have tried, giving the same results:</p>\n\n<pre><code>g++  -I /Users/endrebakkenstovner/anaconda3/include/python3.6m/ -stdlib=libc++  -c minimal_example.cpp -o minimal_example.o -Ofast -Wall\ngcc  -I /Users/endrebakkenstovner/anaconda3/include/python3.6m/  -c minimal_example.cpp -o minimal_example.o -Ofast -Wall -lc++\n</code></pre>\n\n<h1>Attempts to change the Cython code</h1>\n\n<p>Adding these lines before cdef test </p>\n\n<pre><code>cdef extern from \"&lt;algorithm&gt;\" namespace \"std\":\n    void stdsort(...)\n</code></pre>\n\n<p>results in (on both linux and macOS) </p>\n\n<pre><code>Error compiling Cython file:\n------------------------------------------------------------\n...\ncdef extern from \"&lt;algorithm&gt;\" namespace \"std\":\n    void stdsort(...)\n\n\ncdef test(interval_vector intervals):\n    stdsort(intervals.begin(), intervals.end(), compare_start_end)\n          ^\n------------------------------------------------------------\n\nminimal_example.pyx:30:11: ambiguous overloaded method\n</code></pre>\n\n<p>Adding \"sort\" at the end of stdsort(...) as per the comment results in (both linux and macOS):</p>\n\n<pre><code>Error compiling Cython file:\n------------------------------------------------------------\n...\n  else:\n    return &lt;uint32_t&gt; 0\n\n\ncdef extern from \"&lt;algorithm&gt;\" namespace \"std\":\n    void stdsort(...) \"sort\"\n                     ^\n------------------------------------------------------------\n</code></pre>\n"}, {"tags": ["c++", "function", "object", "constants"], "comments": [{"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1566364829, "post_id": 57584860, "comment_id": 101627817, "body": "What line is this error on; what is it pointing to? Can you make a simplified version of your code where you can show us the <i>whole</i> thing?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1566364873, "post_id": 57584860, "comment_id": 101627833, "body": "Sorry, but you omitted too much. Please read up on how one creates a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. It should be something we can tinker with without needing to fill in any blanks."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1566364991, "post_id": 57584860, "comment_id": 101627872, "body": "Although... I&#39;d wager that <code>const board</code> is the issue. It should probably be <code>board</code>."}, {"owner": {"reputation": 276, "user_id": 11910197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pan5a.jpg?s=128&g=1", "display_name": "thisisbenmanley", "link": "https://stackoverflow.com/users/11910197/thisisbenmanley"}, "edited": false, "score": 0, "creation_date": 1566365329, "post_id": 57584860, "comment_id": 101627955, "body": "Also, unrelated, but you should probably follow standard naming convention and capitalize types (e.g. rename <code>player</code> into <code>Player</code>)"}, {"owner": {"reputation": 1778, "user_id": 9063139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bze7O.png?s=128&g=1", "display_name": "Martin Morterol", "link": "https://stackoverflow.com/users/9063139/martin-morterol"}, "edited": false, "score": 0, "creation_date": 1566368309, "post_id": 57584860, "comment_id": 101628965, "body": "Unrelated, but you use dynamic polymorphism without virtual destructor, and probably <code>getMove</code> should be virtual too."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1566371279, "post_id": 57584860, "comment_id": 101630194, "body": "please include the full error message and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, especially <code>board</code> is not declared and your <code>main</code> as posted here will produce other errors than the one you mention in the question (missing <code>;</code> and <code>Board</code> not defined). Others can guess, but not providing real code makes it difficult to answer and decreases the chances that this question will be useful to future readers to close to zero"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 10347312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f63933ca1e67b671ed5f0ae18caa22bf?s=128&d=identicon&r=PG&f=1", "display_name": "lowy95", "link": "https://stackoverflow.com/users/10347312/lowy95"}, "edited": false, "score": 0, "creation_date": 1566365515, "post_id": 57584921, "comment_id": 101628015, "body": "&quot;Reference to type &#39;const Board&#39; could not bind to an lvalue of type &#39;Board *&#39;&quot;  it throws the error above, does it have something to do with the board object being declared dynamically?"}, {"owner": {"reputation": 1478, "user_id": 5557309, "user_type": "registered", "profile_image": "https://graph.facebook.com/1621133335/picture?type=large", "display_name": "James Picone", "link": "https://stackoverflow.com/users/5557309/james-picone"}, "reply_to_user": {"reputation": 49, "user_id": 10347312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f63933ca1e67b671ed5f0ae18caa22bf?s=128&d=identicon&r=PG&f=1", "display_name": "lowy95", "link": "https://stackoverflow.com/users/10347312/lowy95"}, "edited": false, "score": 0, "creation_date": 1566365977, "post_id": 57584921, "comment_id": 101628166, "body": "That&#39;s a type mismatch; you&#39;re trying to pass an object of type <code>Board *</code> (i.e., pointer to Board) to something that wants a <code>const Board&amp;</code>, i.e. a reference to a Board or a reference to a const Board. You need to dereference the pointer to get the actual object."}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 1, "creation_date": 1566366813, "post_id": 57584921, "comment_id": 101628416, "body": "Where is board defined, I don&#39;t see it in the question"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1566372495, "post_id": 57584921, "comment_id": 101630768, "body": "There&#39;s no such thing as <i>declared dynamically</i>. An object can be allocated dynamically. I&#39;m not trying to be a pedant, it&#39;s just that to gain understanding of C++ you have to get the basic concepts straight."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1566372636, "post_id": 57584921, "comment_id": 101630829, "body": "I guess by declared dynamically you need declared as a pointer. If that&#39;s the case then yes, that&#39;s the problem, simple answer is <code>player[0]-&gt;getMove(*board);</code>, use <code>*</code> to dereference the pointer to get the object."}], "tags": [], "owner": {"reputation": 1478, "user_id": 5557309, "user_type": "registered", "profile_image": "https://graph.facebook.com/1621133335/picture?type=large", "display_name": "James Picone", "link": "https://stackoverflow.com/users/5557309/james-picone"}, "is_accepted": false, "score": 4, "last_activity_date": 1566365001, "creation_date": 1566365001, "answer_id": 57584921, "question_id": 57584860, "link": "https://stackoverflow.com/questions/57584860/passing-a-const-object-in-a-function/57584921#57584921", "title": "Passing a const object in a function", "body": "<p>These lines are the problem:</p>\n\n<pre><code>p0Move = player[0]-&gt;getMove(const board);\np1Move = player[1]-&gt;getMove(const board);\n</code></pre>\n\n<p>you don't need the 'const' here. What you want is:</p>\n\n<pre><code>p0Move = player[0]-&gt;getMove(board);\np1Move = player[1]-&gt;getMove(board);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1566510095, "post_id": 57590313, "comment_id": 101689610, "body": "And ... ? This still does not define board."}], "tags": [], "owner": {"reputation": 124, "user_id": 11322525, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4l3liclV_qg/AAAAAAAAAAI/AAAAAAAAEyA/O1gj0hbVhGw/photo.jpg?sz=128", "display_name": "Alireza Abbasi", "link": "https://stackoverflow.com/users/11322525/alireza-abbasi"}, "is_accepted": false, "score": 0, "last_activity_date": 1566386146, "last_edit_date": 1566386146, "creation_date": 1566385820, "answer_id": 57590313, "question_id": 57584860, "link": "https://stackoverflow.com/questions/57584860/passing-a-const-object-in-a-function/57590313#57590313", "title": "Passing a const object in a function", "body": "<p>I executed your code in Visual studio 2017:</p>\n\n<p>1) add public Specifier</p>\n\n<pre><code>class Player {\npublic:\n    char getMove(const Board&amp; board) {\n\n        char answer = 'a';\n        // ...\n        return answer;\n    }\n};\n\nclass Computer : public Player {\npublic:\n    char getMove(const Board&amp; board) {\n        char answer = 'a';\n        // ...\n        return answer;\n    }\n};\n</code></pre>\n\n<ol start=\"2\">\n<li><p>Remove Const</p>\n\n<p>p0Move = player[0]->getMove( board);</p>\n\n<p>p1Move = player[1]->getMove( board);</p></li>\n</ol>\n"}], "owner": {"reputation": 49, "user_id": 10347312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f63933ca1e67b671ed5f0ae18caa22bf?s=128&d=identicon&r=PG&f=1", "display_name": "lowy95", "link": "https://stackoverflow.com/users/10347312/lowy95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1566386146, "creation_date": 1566364699, "last_edit_date": 1566370935, "question_id": 57584860, "link": "https://stackoverflow.com/questions/57584860/passing-a-const-object-in-a-function", "title": "Passing a const object in a function", "body": "<p>I am trying to pass an object into a function, but declare it as const so it can only be read and not changed. An error is being thrown that an expression is required and i'm not sure why or how to fix it. </p>\n\n<p>I have a parent class and its child both with the same function signature, but doing different things and they both need to object to complete their task.</p>\n\n<p>I am still quiet new to c++ and have looked through other questions on this website but not found any answers;</p>\n\n<p>thanks.</p>\n\n<pre><code> class Player{\n   char getMove(const Board&amp; board){\n\n     char answer ='a';\n     // ...\n     return answer;\n   }\n };\n class Computer : public Player  {\n   char getMove (const Board&amp; board){\n      char answer = 'a';\n      // ...\n      return answer;\n   }\n };\n</code></pre>\n\n<p>function calls</p>\n\n<pre><code> int main(){ \n\n    Player* player[2];\n    player[0] = new Player;\n    player[1] = new Computer;\n    char p0Move, p1Move\n\n    p0Move = player[0]-&gt;getMove(const board); \n    p1Move = player[1]-&gt;getMove(const board);\n\n }\n</code></pre>\n\n<p>Errors:\n\"expression expected\" which are at the player[0]->getMove and player[1]->getMove</p>\n"}, {"tags": ["c++", "windows", "winapi", "visual-c++", "keyevent"], "comments": [{"owner": {"reputation": 381, "user_id": 11737733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jPKyG.jpg?s=128&g=1", "display_name": "Jeffreys", "link": "https://stackoverflow.com/users/11737733/jeffreys"}, "edited": false, "score": 0, "creation_date": 1566373052, "post_id": 57584444, "comment_id": 101631022, "body": "What is your situation when the arrow does not work? When I press CRTL+q, it will implement a series of <code>keybd_event()</code> operation, and my arrow still work.And, <code>keybd_event</code> function has been superseded. you should use <code>SendInput</code> instead."}, {"owner": {"reputation": 154, "user_id": 11954575, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDtTpZUfX4hS0JEjHMrgDtzIzKq0R828bA8Jurv=k-s128", "display_name": "Skiv Hisink", "link": "https://stackoverflow.com/users/11954575/skiv-hisink"}, "reply_to_user": {"reputation": 381, "user_id": 11737733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jPKyG.jpg?s=128&g=1", "display_name": "Jeffreys", "link": "https://stackoverflow.com/users/11737733/jeffreys"}, "edited": false, "score": 0, "creation_date": 1566399764, "post_id": 57584444, "comment_id": 101646296, "body": "Only ESC button works with this function in my program..."}, {"owner": {"reputation": 154, "user_id": 11954575, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDtTpZUfX4hS0JEjHMrgDtzIzKq0R828bA8Jurv=k-s128", "display_name": "Skiv Hisink", "link": "https://stackoverflow.com/users/11954575/skiv-hisink"}, "reply_to_user": {"reputation": 381, "user_id": 11737733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jPKyG.jpg?s=128&g=1", "display_name": "Jeffreys", "link": "https://stackoverflow.com/users/11737733/jeffreys"}, "edited": false, "score": 0, "creation_date": 1566399901, "post_id": 57584444, "comment_id": 101646381, "body": "I assume that the problem is with the function of catching keys. Probably it somehow blocks the key input through the function. I think so, because when I didn\u2019t catch the keys, everything worked successfully."}], "answers": [{"tags": [], "owner": {"reputation": 154, "user_id": 11954575, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDtTpZUfX4hS0JEjHMrgDtzIzKq0R828bA8Jurv=k-s128", "display_name": "Skiv Hisink", "link": "https://stackoverflow.com/users/11954575/skiv-hisink"}, "is_accepted": true, "score": 1, "last_activity_date": 1566401877, "creation_date": 1566401877, "answer_id": 57595096, "question_id": 57584444, "link": "https://stackoverflow.com/questions/57584444/how-to-fixignored-keystrokes/57595096#57595096", "title": "How to fix&quot;Ignored keystrokes&quot;", "body": "<p>The solution was simple. In the function, when you clicked the arrows, another parameter was needed.</p>\n\n<pre><code>                    keybd_event(VK_UP, 0x26, KEYEVENTF_EXTENDEDKEY, 0);\n                    Sleep(50);\n                    keybd_event(VK_UP, 0x26, KEYEVENTF_EXTENDEDKEY | KEYEVENTF_KEYUP, 0);\n</code></pre>\n"}], "owner": {"reputation": 154, "user_id": 11954575, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDtTpZUfX4hS0JEjHMrgDtzIzKq0R828bA8Jurv=k-s128", "display_name": "Skiv Hisink", "link": "https://stackoverflow.com/users/11954575/skiv-hisink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 57595096, "answer_count": 1, "score": 1, "last_activity_date": 1566401877, "creation_date": 1566361733, "question_id": 57584444, "link": "https://stackoverflow.com/questions/57584444/how-to-fixignored-keystrokes", "title": "How to fix&quot;Ignored keystrokes&quot;", "body": "<h2>My problem is that after adding catching keys, my code began to work not quite correctly.</h2>\n\n<p>In more detail: The task of a program after pressing a key combination (in my case it is CTRL + q and CTRL + e) is to simulate a keystroke in some program. Everything worked if you use the button in the program, but after adding the catch, the arrows stopped working (Enter and Esc work, I did not check the rest of the keys).</p>\n\n<p>I need this for fast serch in some programms, where you must press arrows on your keyboard a lot of times.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>__declspec(dllexport) LRESULT CALLBACK KeyboardEvent(int nCode, WPARAM wParam, LPARAM lParam)\n{\n    DWORD CTRL_key = 0;\n\n    if ((nCode == HC_ACTION) &amp;&amp; ((wParam == WM_SYSKEYDOWN) || (wParam == WM_KEYDOWN)))\n    {\n        KBDLLHOOKSTRUCT hooked_key = *((KBDLLHOOKSTRUCT*)lParam);\n        DWORD dwMsg = 1;\n        dwMsg += hooked_key.scanCode &lt;&lt; 16;\n        dwMsg += hooked_key.flags &lt;&lt; 24;\n        char lpszKeyName[1024] = { 0 };\n\n        int i = GetKeyNameText(dwMsg, (lpszKeyName + 1), 0xFF) + 1;\n\n        int key = hooked_key.vkCode;\n\n        CTRL_key = GetAsyncKeyState(VK_CONTROL);\n\n        if (key &gt;= 'A' &amp;&amp; key &lt;= 'Z')\n        {\n\n            if (CTRL_key != 0 &amp;&amp; key == 'q')\n            {\n                //MessageBox(NULL, \"Pressed\", \"H O T K E Y\", MB_OK);\n                CTRL_key = 0;\n                //\n                Sleep(1000);\n                keybd_event(VK_RETURN, 0x9C, 0, 0);\n                Sleep(50);\n                keybd_event(VK_RETURN, 0x9C, KEYEVENTF_KEYUP, 0);\n                Sleep(100);\n                for (int i = 0; i &lt; 6; i++) {\n                    keybd_event(VK_UP, 0x26, 0, 0);\n                    Sleep(50);\n                    keybd_event(VK_UP, 0x26, KEYEVENTF_KEYUP, 0);\n                    Sleep(50);\n                }\n                for (int i = 0; i &lt; 5; i++) {\n                    keybd_event(VK_RIGHT, 0x27, 0, 0);\n                    Sleep(50);\n                    keybd_event(VK_RIGHT, 0x27, KEYEVENTF_KEYUP, 0);\n                    Sleep(50);\n                }\n                keybd_event(VK_DOWN, 0x28, 0, 0);\n                Sleep(50);\n                keybd_event(VK_DOWN, 0x28, KEYEVENTF_KEYUP, 0);\n                keybd_event(VK_RETURN, 0x9C, 0, 0);\n                Sleep(50);\n                keybd_event(VK_RETURN, 0x9C, KEYEVENTF_KEYUP, 0);\n                Sleep(50);\n                Sleep(6000);\n                keybd_event(VK_ESCAPE, 0x1B, 0, 0);\n                Sleep(500);\n                keybd_event(VK_ESCAPE, 0x1B, KEYEVENTF_KEYUP, 0);\n                Sleep(1000);\n            }\n\n            if (CTRL_key != 0 &amp;&amp; key == 'e')\n            {\n                MessageBox(NULL, \"Shutting down\", \"H O T K E Y\", MB_OK);\n                PostQuitMessage(0);\n            }\n\n            CTRL_key = 0;\n        }\n\n    }\n    return CallNextHookEx(hKeyboardHook, nCode, wParam, lParam);\n}\n</code></pre>\n\n<p>Click <a href=\"https://drive.google.com/file/d/1xbcJeH-aOnHgMugQY76WRLqlgfWRsmUC/view?usp=sharing\" rel=\"nofollow noreferrer\" title=\"this text appears when you mouse over\">here</a> if you want to see the whole code!\nThank you in advance!</p>\n"}, {"tags": ["c++", "sockets", "file-descriptor", "epoll"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1566361248, "post_id": 57584103, "comment_id": 101627112, "body": "What happened instead? End of stream? EAGAIN? Another error? NB You need to call <code>perror()</code> immediately, not after doing more system calls that could disturb <code>errno</code>."}, {"owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "edited": false, "score": 0, "creation_date": 1566362526, "post_id": 57584103, "comment_id": 101627354, "body": "Somehow mixing TCP and UDP. So setting up the connection with DGRAM, not listening and not accepting, OK. But then using read and not recvfrom. I am wondering that it reads at all. And, although the socket has been set to non blocking mode, I would guess that read blocks. Is only a guess. Too much mixing up modes. Does read really return with EAGAIN or EWOULDBLOCK in the 2nd loop run? Sorry, Your code is hard to read . . ."}, {"owner": {"reputation": 149, "user_id": 2208988, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/96d336a47e0b865345dfa5fcfba1c1b5?s=128&d=identicon&r=PG", "display_name": "cynric4sure", "link": "https://stackoverflow.com/users/2208988/cynric4sure"}, "edited": false, "score": 0, "creation_date": 1566399911, "post_id": 57584103, "comment_id": 101646388, "body": "the second read get EAGAIN, then it returns"}, {"owner": {"reputation": 149, "user_id": 2208988, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/96d336a47e0b865345dfa5fcfba1c1b5?s=128&d=identicon&r=PG", "display_name": "cynric4sure", "link": "https://stackoverflow.com/users/2208988/cynric4sure"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1566399953, "post_id": 57584103, "comment_id": 101646413, "body": "@user207421 it was EAGAIN, I get the log &quot;nothing to read&quot;"}, {"owner": {"reputation": 149, "user_id": 2208988, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/96d336a47e0b865345dfa5fcfba1c1b5?s=128&d=identicon&r=PG", "display_name": "cynric4sure", "link": "https://stackoverflow.com/users/2208988/cynric4sure"}, "reply_to_user": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "edited": false, "score": 0, "creation_date": 1566400031, "post_id": 57584103, "comment_id": 101646464, "body": "@ArminMontigny it was non blocking, when the client does not send anything the read get EAGAIN all the time, just spinning there because of the epoll_wait using 0 timeout"}], "owner": {"reputation": 149, "user_id": 2208988, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/96d336a47e0b865345dfa5fcfba1c1b5?s=128&d=identicon&r=PG", "display_name": "cynric4sure", "link": "https://stackoverflow.com/users/2208988/cynric4sure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1566358341, "creation_date": 1566358341, "question_id": 57584103, "link": "https://stackoverflow.com/questions/57584103/socket-read-not-returning-more-data", "title": "socket read not returning more data", "body": "<p>I am learning epoll, I did a udp server application and client application just for demonstration. everything seems ok, however when the client tries to send a large packet, the server's read call can only gets the receive buffer full once but not the second time, \nto be precise, client sent 2090 bytes, server has a receive buffer of 1600 (I deliberately set it a little bigger than common MTU), and I only received once 1599 bytes, with the once extra bytes I kept as '\\0'. but when the loop comes back, the next read does not get anything, hence the server only gets 1599 bytes, instead of the full 2090 bytes.</p>\n\n<p>both server and client were running on the same host, going thru the only ethernet interface.</p>\n\n<p>I also checked wireshark, captured the interface I am using, and there is indeed a udp packet of payload size 2090, not fragmented.</p>\n\n<p>server side</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;spdlog/sinks/basic_file_sink.h&gt;\n#include &lt;spdlog/sinks/stdout_sinks.h&gt;\n#include &lt;spdlog/spdlog.h&gt;\n#include &lt;spdlog/async.h&gt;\n\n#include &lt;base/argument_parser.hpp&gt;\n#include &lt;string&gt;\n\n#include &lt;sys/epoll.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;netinet/in.h&gt;\n\nusing pull_cb_t = std::function&lt;void(const char*, size_t)&gt;;\n\nstruct input_channel {\npublic:\n    pull_cb_t cb;\n    int fd;\n    std::string name;\n    input_channel(pull_cb_t cb_, int _fd, std::string _name)\n        : cb(cb_), fd(_fd), name(_name) {}\n\n    void pull() {\n        spdlog::info(\"{}\", __func__);\n        char buf[1600];\n        //int pull_count = 0;\n        while (true) {\n            auto count = read(fd, buf, sizeof(buf) - 1);\n            if (count == -1) {\n                if (errno == EAGAIN) {\n                    spdlog::info(\"nothing to read, return\");\n                    return;\n                }\n                spdlog::info(\"error reading data from fd {}\", errno);\n                perror(\"read\");\n                return;\n            }\n            if (count == 0) {\n                spdlog::info(\"read returns zero\");\n                return;\n            }\n            cb(buf, count);\n            pull_count++;\n        }\n    }\n};\n\nstatic int make_socket_non_block(int sfd) {\n    int flags;\n    flags = fcntl(sfd, F_GETFL, 0);\n    if (flags == -1)\n        EXIT_ERR(\"error geting flag %d\", flags);\n\n    flags |= O_NONBLOCK;\n    if (fcntl(sfd, F_SETFL, flags) == -1) {\n        EXIT_ERR(\"error setting non blocking %d\", flags);\n    }\n    return 0;\n}\n\nint main(int argc, const char** argv) {\n    std::string log_file;\n    uint16_t listening_port = 5678;\n    uint16_t max_event = 1024;\n\n    dark::argument_parser ag;\n    ASSERT_SUCCESS(ag.add_option([&amp;](std::string input) { log_file = input; },\n                                 'l', \"log\", \"log file\", false));\n\n    ASSERT_SUCCESS(ag.parse(argc, argv));\n\n\n    if (!log_file.empty()) {\n        spdlog::init_thread_pool(8096, 1);\n        auto sync = spdlog::basic_logger_mt&lt;spdlog::async_factory&gt;(\n            \"file\", log_file, true);\n        spdlog::set_default_logger(sync);\n    }\n\n    spdlog::info(\"creating a udp socket\");\n\n    int domain = AF_INET;\n    int type = SOCK_DGRAM;\n    int protocol = 0;\n    auto udp_fd = socket(domain, type, protocol);\n    if (udp_fd == -1)\n        EXIT_ERR(\"failed to create udp fd %d\", errno);\n\n    struct sockaddr_in server_addr, client_addr;\n\n    memset(&amp;server_addr, 0, sizeof(server_addr));\n    memset(&amp;client_addr, 0, sizeof(client_addr));\n\n    server_addr.sin_family = AF_INET;\n    server_addr.sin_addr.s_addr = inet_addr(\"192.168.2.222\");\n    server_addr.sin_port = htons(listening_port);\n\n    if (bind(udp_fd, (const struct sockaddr*)&amp;server_addr,\n             sizeof(server_addr)) == -1)\n        EXIT_ERR(\"failed to bind addr %d\", errno);\n\n    spdlog::info(\"created udp fd and bind with port={}\", listening_port);\n    make_socket_non_block(udp_fd);\n    spdlog::info(\"fd is set to be non blocking\");\n    auto channel =\n        std::make_unique&lt;input_channel&gt;([&amp;](const char* data, size_t len) {\n                                            std::string s(data, len);\n                                            spdlog::info(\"received: len={}bytes [{}]\",\n                                                         len, s.c_str());\n                                        },\n                                        udp_fd, \"udp_channel\");\n\n\n    spdlog::info(\"creating epoll obj\");\n    auto epoll_fd = epoll_create1(0);\n    if (epoll_fd == -1)\n        EXIT_ERR(\"failed to create epoll %d\", errno);\n\n    struct epoll_event event;\n    event.data.ptr = reinterpret_cast&lt;void*&gt;(channel.get());\n    event.events = EPOLLIN | EPOLLET;\n\n    if (epoll_ctl(epoll_fd, EPOLL_CTL_ADD, udp_fd, &amp;event) == -1)\n        EXIT_ERR(\"failed to add fd=%d to epoll_fd %d\", udp_fd, errno);\n\n    struct epoll_event* events =\n        reinterpret_cast&lt;epoll_event*&gt;(calloc(max_event, sizeof(event)));\n\n    while (true) {\n        int n, i;\n        n = epoll_wait(epoll_fd, events, max_event, 0);\n        if (n == -1)\n            EXIT_ERR(\"epoll error\");\n        for (i = 0; i &lt; n; i++) {\n            if (events[i].events &amp; EPOLLERR || events[i].events &amp; EPOLLHUP) {\n                spdlog::info(\"events error or hangup\");\n            } else if (events[i].events &amp; EPOLLIN) {\n                spdlog::info(\"ready to read\");\n                auto c = reinterpret_cast&lt;input_channel*&gt;(events[i].data.ptr);\n                c-&gt;pull();\n            } else {\n                spdlog::info(\"pulled something else\");\n            }\n        }\n\n        // spdlog::info(\"pulled nothing\");\n    }\n\n    free(events);\n    close(udp_fd);\n\n    return 0;\n}\n</code></pre>\n\n<p>client side</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;string&gt;\n\n#include &lt;base/argument_parser.hpp&gt;\n\nint main(int argc, const char **argv) {\n\n    uint16_t port;\n    bool jumbo_mode = false;\n\n    dark::argument_parser ag;\n    ASSERT_SUCCESS(\n        ag.add_option([&amp;](std::string input) { port = std::stoi(input); }, 'p',\n                      \"port\", \"port to use\", true));\n    ASSERT_SUCCESS(\n        ag.add_flag(&amp;jumbo_mode, 'j', \"jumbo\", \"send jumbo packets\", false));\n\n    ASSERT_SUCCESS(ag.parse(argc, argv));\n\n    int sockfd;\n    char buffer[MAXLINE];\n    std::string s = \"Hello from client\";\n    struct sockaddr_in servaddr;\n\n    if ((sockfd = socket(AF_INET, SOCK_DGRAM, 0)) &lt; 0) {\n        perror(\"socket creation failed\");\n        exit(EXIT_FAILURE);\n    }\n\n    memset(&amp;servaddr, 0, sizeof(servaddr));\n\n    servaddr.sin_family = AF_INET;\n    servaddr.sin_port = htons(port);\n    servaddr.sin_addr.s_addr = inet_addr(\"192.168.2.222\");\n\n    int n;\n    unsigned int len;\n\n    size_t total_bytes = 0;\n    std::string new_s;\n    int i = 0;\n    if (!jumbo_mode) {\n        while (true) {\n            new_s = s + \"-\" + std::to_string(i);\n            total_bytes += new_s.size();\n            auto ret =\n                sendto(sockfd, new_s.c_str(), new_s.size(), MSG_CONFIRM,\n                       (const struct sockaddr *)&amp;servaddr, sizeof(servaddr));\n            printf(\"Hello message sent [%s] total_bytes=%lu.\\n\", new_s.c_str(),\n                   total_bytes);\n            if (ret &lt; 0)\n                printf(\"error in sendto\");\n            i++;\n        }\n    } else {\n        for (int j = 0; j &lt; 100; j++) {\n            new_s += s + \"-\" + std::to_string(j);\n            new_s += \" \";\n        }\n        total_bytes = new_s.size();\n        auto ret = sendto(sockfd, new_s.c_str(), new_s.size(), MSG_CONFIRM,\n                          (const struct sockaddr *)&amp;servaddr, sizeof(servaddr));\n        printf(\"send msg ret=%ld total len=%lu [%s]\\n\", ret, total_bytes,\n               new_s.c_str());\n        if (ret &lt; 0)\n            printf(\"error in sendto\");\n    }\n\n    n = recvfrom(sockfd, (char *)buffer, MAXLINE, MSG_WAITALL,\n                 (struct sockaddr *)&amp;servaddr, &amp;len);\n    buffer[n] = '\\0';\n    printf(\"Server : %s\\n\", buffer);\n\n    close(sockfd);\n    return 0;\n}\n</code></pre>\n\n<p>I would like to see the read returns another 490 bytes when called the next time.</p>\n"}, {"tags": ["c++", "compiler-errors", "filesystems"], "comments": [{"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 1, "creation_date": 1566358324, "post_id": 57584084, "comment_id": 101626678, "body": "How are you compiling the program?"}, {"owner": {"reputation": 21, "user_id": 11893979, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--2mjYASq5-s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcorI8-Ykc-e3MnNi7qttf7RGZaAw/photo.jpg?sz=128", "display_name": "Dwi Novitasari", "link": "https://stackoverflow.com/users/11893979/dwi-novitasari"}, "reply_to_user": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1566358724, "post_id": 57584084, "comment_id": 101626722, "body": "@user202729 i&#39;m using gnu gcc compiler and codeblocks to compile"}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "reply_to_user": {"reputation": 1256, "user_id": 10769406, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--CP3Kf7GaZU/AAAAAAAAAAI/AAAAAAAAAJA/RjKQ-u11ogk/photo.jpg?sz=128", "display_name": "Zhubei Federer", "link": "https://stackoverflow.com/users/10769406/zhubei-federer"}, "edited": false, "score": 0, "creation_date": 1566358731, "post_id": 57584084, "comment_id": 101626723, "body": "@Zhub Code blocks can either be indented or wrapped in code fences. Not both."}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1566358763, "post_id": 57584084, "comment_id": 101626728, "body": "What&#39;s GCC version and used c++ standard?"}, {"owner": {"reputation": 21, "user_id": 11893979, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--2mjYASq5-s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcorI8-Ykc-e3MnNi7qttf7RGZaAw/photo.jpg?sz=128", "display_name": "Dwi Novitasari", "link": "https://stackoverflow.com/users/11893979/dwi-novitasari"}, "reply_to_user": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1566359662, "post_id": 57584084, "comment_id": 101626861, "body": "@user202729 gcc version is 8.2.0"}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1566360150, "post_id": 57584084, "comment_id": 101626923, "body": "Do you have <code>-std=c++17</code> passed?"}, {"owner": {"reputation": 442, "user_id": 9932916, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tzXpqeGz2Kg/AAAAAAAAAAI/AAAAAAAAAAA/-OUONdsc09A/photo.jpg?sz=128", "display_name": "Tagger5926", "link": "https://stackoverflow.com/users/9932916/tagger5926"}, "edited": false, "score": 1, "creation_date": 1566360937, "post_id": 57584084, "comment_id": 101627057, "body": "Did you try the flag -lstdc++fs"}, {"owner": {"reputation": 21, "user_id": 11893979, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--2mjYASq5-s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcorI8-Ykc-e3MnNi7qttf7RGZaAw/photo.jpg?sz=128", "display_name": "Dwi Novitasari", "link": "https://stackoverflow.com/users/11893979/dwi-novitasari"}, "reply_to_user": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1566361153, "post_id": 57584084, "comment_id": 101627091, "body": "@user202729 can you please elaborate?"}, {"owner": {"reputation": 21, "user_id": 11893979, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--2mjYASq5-s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcorI8-Ykc-e3MnNi7qttf7RGZaAw/photo.jpg?sz=128", "display_name": "Dwi Novitasari", "link": "https://stackoverflow.com/users/11893979/dwi-novitasari"}, "reply_to_user": {"reputation": 442, "user_id": 9932916, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tzXpqeGz2Kg/AAAAAAAAAAI/AAAAAAAAAAA/-OUONdsc09A/photo.jpg?sz=128", "display_name": "Tagger5926", "link": "https://stackoverflow.com/users/9932916/tagger5926"}, "edited": false, "score": 0, "creation_date": 1566361195, "post_id": 57584084, "comment_id": 101627103, "body": "@Tagger5926 can you elaborate please how to do it?"}, {"owner": {"reputation": 442, "user_id": 9932916, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tzXpqeGz2Kg/AAAAAAAAAAI/AAAAAAAAAAA/-OUONdsc09A/photo.jpg?sz=128", "display_name": "Tagger5926", "link": "https://stackoverflow.com/users/9932916/tagger5926"}, "edited": false, "score": 0, "creation_date": 1566361571, "post_id": 57584084, "comment_id": 101627179, "body": "Sorry not too familiar with codeblocks. Also, that library not exist for Windows."}, {"owner": {"reputation": 21, "user_id": 11893979, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--2mjYASq5-s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcorI8-Ykc-e3MnNi7qttf7RGZaAw/photo.jpg?sz=128", "display_name": "Dwi Novitasari", "link": "https://stackoverflow.com/users/11893979/dwi-novitasari"}, "reply_to_user": {"reputation": 442, "user_id": 9932916, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tzXpqeGz2Kg/AAAAAAAAAAI/AAAAAAAAAAA/-OUONdsc09A/photo.jpg?sz=128", "display_name": "Tagger5926", "link": "https://stackoverflow.com/users/9932916/tagger5926"}, "edited": false, "score": 0, "creation_date": 1566362114, "post_id": 57584084, "comment_id": 101627266, "body": "@Tagger5926 do you know any alternative to set permission using c++ and windows?"}, {"owner": {"reputation": 442, "user_id": 9932916, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tzXpqeGz2Kg/AAAAAAAAAAI/AAAAAAAAAAA/-OUONdsc09A/photo.jpg?sz=128", "display_name": "Tagger5926", "link": "https://stackoverflow.com/users/9932916/tagger5926"}, "edited": false, "score": 0, "creation_date": 1566424969, "post_id": 57584084, "comment_id": 101656566, "body": "Have you looked at: <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/fileapi/nf-fileapi-setfileattributesa\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/win32/api/fileapi/&hellip;</a> APIs to look at: <a href=\"https://caiorss.github.io/C-Cpp-Notes/WindowsAPI-cpp.html\" rel=\"nofollow noreferrer\">caiorss.github.io/C-Cpp-Notes/WindowsAPI-cpp.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11893979, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--2mjYASq5-s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcorI8-Ykc-e3MnNi7qttf7RGZaAw/photo.jpg?sz=128", "display_name": "Dwi Novitasari", "link": "https://stackoverflow.com/users/11893979/dwi-novitasari"}, "edited": false, "score": 0, "creation_date": 1566442308, "post_id": 57589519, "comment_id": 101659751, "body": "hello thank you for answering, but i dont know how to compile code with terminal from codeblocks, also can you give me example what should be the path for output?"}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "reply_to_user": {"reputation": 21, "user_id": 11893979, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--2mjYASq5-s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcorI8-Ykc-e3MnNi7qttf7RGZaAw/photo.jpg?sz=128", "display_name": "Dwi Novitasari", "link": "https://stackoverflow.com/users/11893979/dwi-novitasari"}, "edited": false, "score": 0, "creation_date": 1566456033, "post_id": 57589519, "comment_id": 101663057, "body": "I don&#39;t mean the terminal in code blocks. I mean e.g. Powershell. The output path is optional and declares the path and the name of the compiled executable. It can be relative to your current working directory. If you never compiled in the terminal I recommend to learn it. Later you will link more libraries or set more compiler flags. The easiest way to find problems in your configuration is to test the configuration in the terminal."}, {"owner": {"reputation": 21, "user_id": 11893979, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--2mjYASq5-s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcorI8-Ykc-e3MnNi7qttf7RGZaAw/photo.jpg?sz=128", "display_name": "Dwi Novitasari", "link": "https://stackoverflow.com/users/11893979/dwi-novitasari"}, "edited": false, "score": 0, "creation_date": 1566460456, "post_id": 57589519, "comment_id": 101665268, "body": "i&#39;ve tried compiling using terminal but i still got the same error"}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "reply_to_user": {"reputation": 21, "user_id": 11893979, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--2mjYASq5-s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcorI8-Ykc-e3MnNi7qttf7RGZaAw/photo.jpg?sz=128", "display_name": "Dwi Novitasari", "link": "https://stackoverflow.com/users/11893979/dwi-novitasari"}, "edited": false, "score": 0, "creation_date": 1566464175, "post_id": 57589519, "comment_id": 101667010, "body": "@DwiNovitasari This seems to be a bug in Mingw if you work on Windows: <a href=\"https://sourceforge.net/p/mingw-w64/bugs/737/\" rel=\"nofollow noreferrer\">sourceforge.net/p/mingw-w64/bugs/737</a>. You could try the MSVC compiler, use another library or switch to Linux if you want to use gcc."}], "tags": [], "owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "is_accepted": false, "score": 0, "last_activity_date": 1566456107, "last_edit_date": 1566456107, "creation_date": 1566383096, "answer_id": 57589519, "question_id": 57584084, "link": "https://stackoverflow.com/questions/57584084/why-does-compiling-filesystem-code-with-c-return-me-this-error/57589519#57589519", "title": "Why does compiling filesystem code with c++ return me this error?", "body": "<p>You are using C++17 features in your code and therefore you have to pass the appropriate parameter to the compiler. For gcc and clang the parameter is <code>-std=c++17</code>. You can compile your code in terminal with</p>\n\n<pre><code>/path/to/g++ -std=c++17 /path/to/your/source.cpp -o /path/to/output\n</code></pre>\n\n<p>If the compiler path is listed in the environment variable <code>PATH</code> you can use  <code>g++</code> without its path. Otherwise the compiler path probably is c:\\mingw\\mingw\\bin\\g++ or c:\\mingw\\bin\\g++.</p>\n\n<p>In code::blocks you have to set the same parameter as compiler flag. Go to Project > Build Options > Compiler Settings and put \"-std=c++17\" in the Other Options. Do the same in Project > Build Options > Linker Settings.</p>\n\n<p>It's possible that you also need to link to <code>stdc++fs</code> with the linker flag <code>-lstdc++fs</code>. I tried it with gcc 9.2 and it worked without <code>-lstdc++fs</code>.</p>\n\n<p>EDIT:\nI tried gcc:8.2 with docker and the linker flag is necessary. The command line is </p>\n\n<pre><code>/path/to/g++ -std=c++17 /path/to/your/source.cpp -o /path/to/output -lstdc++fs\n</code></pre>\n\n<p>It's important that <code>-lstdc++fs</code> comes after <code>/path/to/your/source.cpp</code>. I assume that code::blocks will correctly position the flags.</p>\n\n<p>You can read about these compiler and linker flags in <a href=\"https://gcc.gnu.org/projects/cxx-status.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/projects/cxx-status.html</a> </p>\n\n<blockquote>\n  <p>GCC supports different dialects of C++, corresponding to the multiple\n  published ISO standards. Which standard it implements can be selected\n  using the -std= command-line option.</p>\n  \n  <ul>\n  <li>C++98</li>\n  <li>C++11</li>\n  <li>C++14</li>\n  <li>C++17</li>\n  <li>C++2a</li>\n  <li>Technical Specifications</li>\n  </ul>\n</blockquote>\n\n<p>and <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Link-Options.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc/Link-Options.html</a></p>\n\n<blockquote>\n  <p>-l library</p>\n  \n  <p>Search the library named library when linking. (The second alternative with the library as a separate argument is only for POSIX\n  compliance and is not recommended.)</p>\n  \n  <p>The -l option is passed directly to the linker by GCC. Refer to your linker documentation for exact details. The general description\n  below applies to the GNU linker.</p>\n  \n  <p>The linker searches a standard list of directories for the library. The directories searched include several standard system\n  directories plus any that you specify with -L.</p>\n  \n  <p>Static libraries are archives of object files, and have file names like liblibrary.a. Some targets also support shared libraries, which\n  typically have names like liblibrary.so. If both static and shared\n  libraries are found, the linker gives preference to linking with the\n  shared library unless the -static option is used.</p>\n  \n  <p>It makes a difference where in the command you write this option; the linker searches and processes libraries and object files in the\n  order they are specified. Thus, \u2018foo.o -lz bar.o\u2019 searches library \u2018z\u2019\n  after file foo.o but before bar.o. If bar.o refers to functions in\n  \u2018z\u2019, those functions may not be loaded.</p>\n</blockquote>\n"}], "owner": {"reputation": 21, "user_id": 11893979, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--2mjYASq5-s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcorI8-Ykc-e3MnNi7qttf7RGZaAw/photo.jpg?sz=128", "display_name": "Dwi Novitasari", "link": "https://stackoverflow.com/users/11893979/dwi-novitasari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1337, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1566456107, "creation_date": 1566358168, "last_edit_date": 1566368869, "question_id": 57584084, "link": "https://stackoverflow.com/questions/57584084/why-does-compiling-filesystem-code-with-c-return-me-this-error", "title": "Why does compiling filesystem code with c++ return me this error?", "body": "<p>I'm trying to create a new directory and using the filesystem to set the permission, but when trying to build the project I got an error instead</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;filesystem&gt;\nusing namespace std;\nnamespace fs = std::filesystem;\n\nint main()\n{\n    fs::path dir = \"C:/newscan\";\n    fs::create_directory(dir);\n    fs::permissions(dir, fs::perms::all);\n}\n</code></pre>\n\n<p>it should be creating new directory but i got this error instead</p>\n\n<blockquote>\n  <p>c:\\mingw\\mingw\\include\\c++\\8.2.0\\bits\\fs_path.h|237|error: no match for 'operator!=' (operand types are 'std::filesystem::__cxx11::path' and 'std::filesystem::__cxx11::path')|</p>\n</blockquote>\n"}]