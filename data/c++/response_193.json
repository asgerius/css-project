[{"tags": ["c++", "c++14"], "comments": [{"owner": {"reputation": 4046, "user_id": 2178238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WOJwa.png?s=128&g=1", "display_name": "Alberto Miola", "link": "https://stackoverflow.com/users/2178238/alberto-miola"}, "edited": false, "score": 1, "creation_date": 1537401531, "post_id": 52415681, "comment_id": 91774847, "body": "Simply you could use std::to_string() to convert the number to a string, check the length, call reverse and the job is done!"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 2, "creation_date": 1537401992, "post_id": 52415681, "comment_id": 91774921, "body": "<code>while (loopControl=true){</code> This condition is always true, the loop never terminates. Check your favorite C++ reference for the difference between assignment <code>=</code> and equality comparison <code>==</code>. All iterations except the first run with <code>n == 0</code>, that&#39;s why <code>n&gt;0</code> check makes a difference."}, {"owner": {"reputation": 1813, "user_id": 2449857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jxnCm.jpg?s=128&g=1", "display_name": "Jack Deeth", "link": "https://stackoverflow.com/users/2449857/jack-deeth"}, "edited": false, "score": 2, "creation_date": 1537402199, "post_id": 52415681, "comment_id": 91774959, "body": "Or better yet, use a compiler which warns you if you&#39;ve used <code>=</code> when you probably meant <code>==</code>."}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 1, "creation_date": 1537402735, "post_id": 52415681, "comment_id": 91775060, "body": "Ensure you compile with a sufficiently high warning level and you get a compilation warning like &quot;warning: suggest parentheses around assignment used as truth value [-Wparentheses]    while (loopControl=true){&quot;. I use <code>-Wall -Wextra -pedantic</code> for gcc/clang. Not sure what you&#39;d use on MSVC."}], "answers": [{"tags": [], "owner": {"reputation": 4046, "user_id": 2178238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WOJwa.png?s=128&g=1", "display_name": "Alberto Miola", "link": "https://stackoverflow.com/users/2178238/alberto-miola"}, "is_accepted": false, "score": 4, "last_activity_date": 1537402171, "creation_date": 1537402171, "answer_id": 52415746, "question_id": 52415681, "link": "https://stackoverflow.com/questions/52415681/reversing-a-number-c/52415746#52415746", "title": "Reversing a number (C++)", "body": "<p>You can try this:</p>\n\n<pre><code>int number = 1874 //or whatever you need\nauto str = std::to_string(number);\n\nif (str.length() == 4) {\n    std::reverse(str.begin(), str.end());\n    std::cout &lt;&lt; str &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I suggest you to give a look at the <code>algorithm</code> header that contains a lot of useful methods that can help you while developing programs.</p>\n"}, {"tags": [], "owner": {"reputation": 12572, "user_id": 8534008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8f2af9937cac66f08b6ee6e4219cc0d?s=128&d=identicon&r=PG&f=1", "display_name": "GBlodgett", "link": "https://stackoverflow.com/users/8534008/gblodgett"}, "is_accepted": true, "score": 0, "last_activity_date": 1537402590, "last_edit_date": 1537402590, "creation_date": 1537402453, "answer_id": 52415774, "question_id": 52415681, "link": "https://stackoverflow.com/questions/52415681/reversing-a-number-c/52415774#52415774", "title": "Reversing a number (C++)", "body": "<p>According to the <a href=\"http://www.cplusplus.com/doc/oldtutorial/operators/\" rel=\"nofollow noreferrer\"><code>cpp tutorials</code></a> <code>=</code> is the assignment operator, not the comparison operator. Because of this your <code>while</code> loop will never terminate. You can simply initialize <code>loopControl</code> to true, and then set it to false when it's okay to exit:</p>\n\n<pre><code>int n, reversedNumber, remainder;\nbool loopControl = true;  //Initialize to true\nchar userFinalResponse;\nreversedNumber = 0;\n\ncout &lt;&lt; \"Input a 4 digit integer and press Return\\n\" &lt;&lt; endl;\ncin &gt;&gt; n;\nwhile (loopControl) {\n    //if ((n&gt;9999)||(n&lt;1000))\n    if ((n&gt;9999) || ((n&lt;1000) &amp;&amp; (n&gt;0)))\n    {\n        cout &lt;&lt; \"Your number is too short or too long. Please try again.\\n\" &lt;&lt; endl;\n        cin &gt;&gt; n;\n        loopControl = true;  //need to keep on looping\n    }\n    else {\n        while (n &gt; 0)\n        {\n            remainder = n % 10;\n            reversedNumber = reversedNumber * 10 + remainder;\n            n /= 10;\n            loopControl = false; //Ok to exit\n        }//closing brace for reversal loop\n        cout &lt;&lt; \"Your reversed number is \" &lt;&lt; reversedNumber &lt;&lt; \"\\n\" &lt;&lt; endl;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10388424, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--oZe830mVkc/AAAAAAAAAAI/AAAAAAAAAD8/B4-rYub1R6o/photo.jpg?sz=128", "display_name": "Sejin Kim", "link": "https://stackoverflow.com/users/10388424/sejin-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 52415774, "answer_count": 2, "score": -3, "last_activity_date": 1537403416, "creation_date": 1537401418, "last_edit_date": 1537403416, "question_id": 52415681, "link": "https://stackoverflow.com/questions/52415681/reversing-a-number-c", "title": "Reversing a number (C++)", "body": "<p>I am brand new to C++, and am trying to make a simple program to determine if a user-entered integer is four digits, and if so, to reverse the order of said digits and print that output. </p>\n\n<p>I have a (mostly) working program, but when I try, one of two things happens: </p>\n\n<p>a) if line 16 is commented out and line 17 is active, then the program prints out an infinite number of reversed numbers and the IDE (in this case, repl.it) crashes; or </p>\n\n<p>b) if line 17 is commented out and line 16 is active, then the program prints out one correct line, but the next line is \"Your number is too short...again\" (look at code below)</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing std::string;\nusing std::cin;\nusing std::cout;\nusing std::endl;\n\nint main() {\n  int n, reversedNumber, remainder;\n  bool loopControl;\n  char userFinalResponse;\n  reversedNumber=0;\n\n  cout&lt;&lt;\"Input a 4 digit integer and press Return\\n\"&lt;&lt;endl;\n  cin&gt;&gt;n;\n  while (loopControl=true){\n    //if ((n&gt;9999)||(n&lt;1000))\n    if ((n&gt;9999)||((n&lt;1000)&amp;&amp;(n&gt;0)))\n    {\n      cout&lt;&lt;\"Your number is too short or too long. Please try again.\\n\"&lt;&lt;endl;\n      cin&gt;&gt;n;\n      loopControl=false;\n    } else {\n      while(n != 0)\n      {\n        remainder = n%10;\n        reversedNumber=reversedNumber*10+remainder;\n        n /= 10;\n        loopControl=true;\n      }//closing brace for reversal loop\n      cout&lt;&lt;\"Your reversed number is \"&lt;&lt;reversedNumber&lt;&lt;\"\\n\"&lt;&lt;endl;\n    }//closing brace for else\n  }//closing brace for \"while (loopControl&gt;0){\"\n  return 0;\n}//closing brace for \"int main() {\"\n</code></pre>\n"}, {"tags": ["c++", "hfile"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1537401709, "post_id": 52415669, "comment_id": 91774870, "body": "Header files (<code>.h</code>) are usually not passed to the compiler directly, but referred to from translation units (<code>.cpp</code>) using <code>#include</code> statements. You can let the compiler automatically generate dependency lists for them (<code>-MMD</code>), which can be used in your makefile. Other than that, I have absolutely no clue what you&#39;re asking about."}, {"owner": {"reputation": 27, "user_id": 5500635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0575b6044305d23ced7b4056c3732e64?s=128&d=identicon&r=PG&f=1", "display_name": "critopadolf", "link": "https://stackoverflow.com/users/5500635/critopadolf"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1537401917, "post_id": 52415669, "comment_id": 91774904, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 idk either, man."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1537402055, "post_id": 52415669, "comment_id": 91774929, "body": "Maybe <a href=\"https://stackoverflow.com/questions/8025766/makefile-auto-dependency-generation\">this</a> helps."}], "answers": [{"tags": [], "owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "is_accepted": false, "score": 0, "last_activity_date": 1537403178, "last_edit_date": 1537403178, "creation_date": 1537402766, "answer_id": 52415806, "question_id": 52415669, "link": "https://stackoverflow.com/questions/52415669/compiling-h-file-doesnt-always-show-errors/52415806#52415806", "title": "compiling h file doesn&#39;t always show errors", "body": "<p>As \u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 says, it's not normal to compile header files directly.  They are incorporated into the compile when they are included into the cpp source.</p>\n\n<p>Your makefile also does not link with the library stdc++ (libstdc++.a). I don't know if this is a problem when linking with g++, but it always is for me with gcc.  </p>\n\n<p>Oh, and <code>rm -rf</code> to cleanup!  That's fairly aggressive, maybe just <code>rm -f</code> would be better, just in case someone accidentally puts <code>/</code> or <code>..</code> as the target.</p>\n\n<p>I think you should compile on the command line first, and then sort out the problems with your makefile.  It might be worth posting copies of your code.</p>\n\n<p>Generally I will compile simple code with:</p>\n\n<pre><code>gcc -g -Wall -o assignment01 assignment01.cpp -lstdc++\n</code></pre>\n\n<p>This gives: an exe named \"assignment01\", with debug info, all warnings, and links with c++ std libs.</p>\n"}], "owner": {"reputation": 27, "user_id": 5500635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0575b6044305d23ced7b4056c3732e64?s=128&d=identicon&r=PG&f=1", "display_name": "critopadolf", "link": "https://stackoverflow.com/users/5500635/critopadolf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1537403178, "creation_date": 1537401353, "question_id": 52415669, "link": "https://stackoverflow.com/questions/52415669/compiling-h-file-doesnt-always-show-errors", "title": "compiling h file doesn&#39;t always show errors", "body": "<p>If I have an error on line 1, and I comment out the entirety of the H file, it doesn't always.. update?</p>\n\n<p>It seems to be compiling a past version of the .h file, but if i intentionally put an error in the main.cpp file, then it realizes there are errors in the h file. Also it DOES sometimes show the errors that are just in the h file, but idk if it is after a certain period of time has elapsed </p>\n\n<p>I would just try to put my code in a cpp file attached to the header, but the issue with that is the ugliest error i've ever seen and I'd rather it all stay in the header anyways since it'll only be like 15 lines of code.</p>\n\n<p>Here's the makefile i'm using in case there is some weird thing in this causing the delay.. but I've had this issue just using raw \"g++ *.h *.cpp\" commands before, so that is probably not the issue. I've struggled with this issue for a long time now and had to put my last HW assignment all in one file because of it</p>\n\n<pre><code>MAINPROG=assignment01\nCC=gcc\nCXX=g++\nCPPFLAGS=-g -std=c++11\nLFLAGS=\nCFLAGS=-g\nTARGET=$(MAINPROG)\nCPPS=$(wildcard *.cpp)\nLINK=g++ $(CPPFLAGS)\nOBJS=$(CPPS:%.cpp=%.o)\n\n%.o: %.cpp\n    $(CXX) $(CPPFLAGS) -MMD -o $@ -c $*.cpp\n\n\nall: $(TARGET)  \n\n\n\n$(TARGET): $(OBJS)\n    $(LINK) $(FLAGS) -o $(TARGET) $^ $(LFLAGS)\n\nclean:\n    -/bin/rm -rf *.d *.o $(TARGET)\n</code></pre>\n"}, {"tags": ["c++", "move", "stdvector", "unique-ptr", "emplace"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1537400663, "post_id": 52415574, "comment_id": 91774666, "body": "That&#39;s not a move constructor, and in no way is it <code>noexcept</code>."}, {"owner": {"reputation": 4802, "user_id": 921070, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f584b200a79f438d9092d7f76da7ede6?s=128&d=identicon&r=PG", "display_name": "Dean Seo", "link": "https://stackoverflow.com/users/921070/dean-seo"}, "edited": false, "score": 0, "creation_date": 1537401078, "post_id": 52415574, "comment_id": 91774764, "body": "<code>SomeClass</code> has default constructors."}, {"owner": {"reputation": 1111, "user_id": 7119460, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7c9dc795a95074aa66c6cd3e80f25704?s=128&d=identicon&r=PG&f=1", "display_name": "user7119460", "link": "https://stackoverflow.com/users/7119460/user7119460"}, "edited": false, "score": 0, "creation_date": 1537401089, "post_id": 52415574, "comment_id": 91774768, "body": "It isn&#39;t a move constructor in the sense that it doesn&#39;t construct a new instance by moving another pre-existing one, but it moves the given arguments during the constructor. I haven&#39;t seen any warnings regarding the noexcept."}, {"owner": {"reputation": 1111, "user_id": 7119460, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7c9dc795a95074aa66c6cd3e80f25704?s=128&d=identicon&r=PG&f=1", "display_name": "user7119460", "link": "https://stackoverflow.com/users/7119460/user7119460"}, "reply_to_user": {"reputation": 4802, "user_id": 921070, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f584b200a79f438d9092d7f76da7ede6?s=128&d=identicon&r=PG", "display_name": "Dean Seo", "link": "https://stackoverflow.com/users/921070/dean-seo"}, "edited": false, "score": 0, "creation_date": 1537401130, "post_id": 52415574, "comment_id": 91774777, "body": "@DeanSeo Does the presence of default constructors prevent emplace in some way?"}, {"owner": {"reputation": 1111, "user_id": 7119460, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7c9dc795a95074aa66c6cd3e80f25704?s=128&d=identicon&r=PG&f=1", "display_name": "user7119460", "link": "https://stackoverflow.com/users/7119460/user7119460"}, "reply_to_user": {"reputation": 4802, "user_id": 921070, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f584b200a79f438d9092d7f76da7ede6?s=128&d=identicon&r=PG", "display_name": "Dean Seo", "link": "https://stackoverflow.com/users/921070/dean-seo"}, "edited": false, "score": 0, "creation_date": 1537401309, "post_id": 52415574, "comment_id": 91774811, "body": "@DeanSeo Marking special constructor methods as delete does not seem to change anything, but I&#39;m not sure why it would?"}, {"owner": {"reputation": 4802, "user_id": 921070, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f584b200a79f438d9092d7f76da7ede6?s=128&d=identicon&r=PG", "display_name": "Dean Seo", "link": "https://stackoverflow.com/users/921070/dean-seo"}, "edited": false, "score": 1, "creation_date": 1537401685, "post_id": 52415574, "comment_id": 91774865, "body": "So now re-looking at it, I figured out that you renamed <code>Detector</code> with <code>SomeClass</code> but forgot to do it on the name of the constructor which looks like a member function. But still, it takes a <i>forwarding</i> reference, which is not a move constructor."}, {"owner": {"reputation": 1111, "user_id": 7119460, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7c9dc795a95074aa66c6cd3e80f25704?s=128&d=identicon&r=PG&f=1", "display_name": "user7119460", "link": "https://stackoverflow.com/users/7119460/user7119460"}, "edited": false, "score": 1, "creation_date": 1537401797, "post_id": 52415574, "comment_id": 91774881, "body": "Thanks, I&#39;ve edited to fix the typo and to clarify what I mean by &#39;only move constructor&#39;."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1537401800, "post_id": 52415574, "comment_id": 91774884, "body": "You need to also remove the <code>const</code> from the input parameter.  You can&#39;t <i>move</i> data using an rvalue reference to a <b>const</b> object, that would prevent you from being able to modify that object to make it relinquish ownership of its data"}, {"owner": {"reputation": 1111, "user_id": 7119460, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7c9dc795a95074aa66c6cd3e80f25704?s=128&d=identicon&r=PG&f=1", "display_name": "user7119460", "link": "https://stackoverflow.com/users/7119460/user7119460"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1537401899, "post_id": 52415574, "comment_id": 91774901, "body": "@RemyLebeau, thanks for the catch and explaining it."}], "answers": [{"comments": [{"owner": {"reputation": 1111, "user_id": 7119460, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7c9dc795a95074aa66c6cd3e80f25704?s=128&d=identicon&r=PG&f=1", "display_name": "user7119460", "link": "https://stackoverflow.com/users/7119460/user7119460"}, "edited": false, "score": 0, "creation_date": 1537405789, "post_id": 52415923, "comment_id": 91775697, "body": "Thank you. The error message regarding not being move-insertable because of const is usually more obvious, but I guess the templating messages obscured it. Thanks for the tip about using std::forward too!"}], "tags": [], "owner": {"reputation": 4026, "user_id": 8414561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa61454588bc140dada53391e1eb3c7f?s=128&d=identicon&r=PG&f=1", "display_name": "Dev Null", "link": "https://stackoverflow.com/users/8414561/dev-null"}, "is_accepted": true, "score": 2, "last_activity_date": 1537420704, "last_edit_date": 1537420704, "creation_date": 1537404128, "answer_id": 52415923, "question_id": 52415574, "link": "https://stackoverflow.com/questions/52415574/creating-vector-of-move-constructed-objects/52415923#52415923", "title": "Creating vector of move-constructed objects", "body": "<p><a href=\"https://en.cppreference.com/w/cpp/container/vector/emplace_back\" rel=\"nofollow noreferrer\"><code>std::vector::emplace_back</code></a> imposes the following requirements on <code>value_type</code>:</p>\n\n<blockquote>\n  <p><strong>Type requirements</strong></p>\n  \n  <p>-<code>T</code> (the container's element type) must meet the requirements of <code>MoveInsertable</code> and <code>EmplaceConstructible</code>.</p>\n</blockquote>\n\n<p>A <code>const</code> member of a class implicitly deletes move constructor, i.e. <code>SomeClass</code> is not <code>MoveInsertable</code> because of <code>const std::unique_ptr&lt;Base&gt; foo</code>.</p>\n\n<p>Solution: remove <code>const</code> from <code>foo</code>.</p>\n\n<pre><code>struct Base {};\nstruct Derived : public Base {};\n\nclass SomeClass\n{\nprivate:\n    std::unique_ptr&lt;Base&gt; foo;\n\npublic:\n    template &lt;typename T&gt;\n    inline explicit SomeClass(T&amp;&amp; derived)\n        noexcept(std::is_nothrow_constructible_v&lt;decltype(foo), T&amp;&amp;&gt;) // (1)\n     : foo(std::make_unique&lt;T&gt;(std::forward&lt;T&gt;(derived))) // (2)\n    {\n        static_assert(std::is_base_of&lt;Base, T&gt;::value);\n    }\n};\n\nint main()\n{\n    std::vector&lt;SomeClass&gt; vec;\n\n    Derived bar{};\n    vec.emplace_back(std::move(bar));\n\n    vec.emplace_back(Derived{}); \n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/84c6b762f7607878\" rel=\"nofollow noreferrer\">Live example</a>.</p>\n\n<p>As a side note, I would suggest to make <code>noexcept</code> conditional depending on <code>std::is_nothrow_constructible</code> (1) and pass <code>std::forward&lt;T&gt;(derived)</code> to <code>std::make_unique</code> to utilise forwarding reference (2).</p>\n"}], "owner": {"reputation": 1111, "user_id": 7119460, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7c9dc795a95074aa66c6cd3e80f25704?s=128&d=identicon&r=PG&f=1", "display_name": "user7119460", "link": "https://stackoverflow.com/users/7119460/user7119460"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 52415923, "answer_count": 1, "score": 1, "last_activity_date": 1537420704, "creation_date": 1537400443, "last_edit_date": 1537401873, "question_id": 52415574, "link": "https://stackoverflow.com/questions/52415574/creating-vector-of-move-constructed-objects", "title": "Creating vector of move-constructed objects", "body": "<p>I have a class which contains a constructor which moves an object during its construction:</p>\n\n<pre><code>class SomeClass\n{\nprivate:\n    const std::unique_ptr&lt;Base&gt; foo;\n\npublic:\n    template &lt;typename T&gt;\n    inline explicit SomeClass(T&amp;&amp; derived) noexcept\n     : foo(std::make_unique&lt;T&gt;(derived))\n    {\n        static_assert(std::is_base_of&lt;Base, T&gt;::value);\n    }\n};\n</code></pre>\n\n<p>The an object of the class can be constructed without issue when I require only a single instance:</p>\n\n<pre><code>class Derived : public Base\n{\n    // ...\n};\n\nDerived bar(...);\nSomeClass baz(std::move(bar));\n\n// Or\n\nSomeClass baz(Derived(...));\n</code></pre>\n\n<p>However I am unable to emplace (or push) any objects of type SomeClass to a <code>std::vector&lt;SomeClass&gt;</code>.</p>\n\n<pre><code>std::vector&lt;SomeClass&gt; vec;\n\nDerived bar(...);\nvec.emplace_back(std::move(bar)); // Does not work.\n\nvec.emplace_back(Derived(...));   // Does not work.\n</code></pre>\n\n<p>Please could you explain why objects can not be emplaced? I thought that the perfect forwarding that <code>emplace_back</code> used would allow construction of an instance of <code>SomeClass</code> inplace in the same way that a single instance could be constructed.</p>\n\n<p>Please could you also explain how things might be modified to allow construction of a <code>std::vector&lt;SomeClass&gt;</code>?</p>\n\n<p>My guess is that as constructor arguments are passed by move, then they are not being forwarded all the way to the constructor within the <code>emplace_back</code> method.</p>\n"}, {"tags": ["c++", "multithreading", "matlab", "c++11", "openmp"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1537400841, "post_id": 52415500, "comment_id": 91774709, "body": "No, that function doesn&#39;t know beans about threading.  Just like almost any function it assumes that the caller will take care of thread-safety, ensuring that the region data cannot change while the function is executing.  Which the #pragma omp takes care of.  That the client programmer of a function is always responsible for thread-safety, usually the person least qualified to know the implications, is the basic reason why writing threaded code is difficult."}, {"owner": {"reputation": 1661, "user_id": 1877002, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8a1c3de36e3fb239c77f4439d1866894?s=128&d=identicon&r=PG", "display_name": "Benny K", "link": "https://stackoverflow.com/users/1877002/benny-k"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1537401612, "post_id": 52415500, "comment_id": 91774858, "body": "@HansPassant what do you mean by &quot;ensuring that the region data cannot change while the function is executing&quot;? how can I ensure that?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1537402923, "post_id": 52415500, "comment_id": 91775112, "body": "Don&#39;t let another thread write to it.  Which the #pragma omp takes care of"}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 1, "last_activity_date": 1537400453, "creation_date": 1537400453, "answer_id": 52415576, "question_id": 52415500, "link": "https://stackoverflow.com/questions/52415500/are-thread-safe-functions-parallelization-framework-dependent/52415576#52415576", "title": "Are &quot;thread-safe&quot; functions parallelization framework dependent?", "body": "<p>Yes and no.</p>\n\n<p>No, because next to nobody writes out good guarantees for this kind of thing.  <a href=\"http://cppcast.com/2017/09/olivier-giroux/\" rel=\"nofollow noreferrer\">This is a wonderful podcast about NVidia using C++'s threading model</a> to finally formalize a threading system, with the complaint that prior to C++'s attempts most abstract threading/memory models out there where crap.  At best you'd get very arcane and specific information about a specific set of hardware, or claims that you worked like some other (usually more ancient) hardware.</p>\n\n<p>Except yes, because in practice, the kinds of mutexes and synchronization and the like they are using are going to be compatible on pretty much every desktop system.  Maybe less so on mobile computing CPUs and other more obscure systems.</p>\n"}], "owner": {"reputation": 1661, "user_id": 1877002, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8a1c3de36e3fb239c77f4439d1866894?s=128&d=identicon&r=PG", "display_name": "Benny K", "link": "https://stackoverflow.com/users/1877002/benny-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 1, "accepted_answer_id": 52415576, "answer_count": 1, "score": 0, "last_activity_date": 1537400857, "creation_date": 1537399939, "last_edit_date": 1537400857, "question_id": 52415500, "link": "https://stackoverflow.com/questions/52415500/are-thread-safe-functions-parallelization-framework-dependent", "title": "Are &quot;thread-safe&quot; functions parallelization framework dependent?", "body": "<p>I have this simple MATLAB code which calls <code>imregionalmax</code> in a parallel loop \nover 256 pathces of 16X16 pixels.</p>\n\n<pre><code>function y = Parimregionalmax(x)\n   assert(isa(x,'uint8'));\n   assert( all(size(x)==[16 16 256]) );\n   y = zeros(size(x));\n   parfor k = 1:size(x,3)  \n     y(:,:,k) = imregionalmax(x(:,:,k));\n   end\nend\n</code></pre>\n\n<p>Giving this code to MATLAB's Coder gives the following C code:</p>\n\n<pre><code>/*\n * Parimregionalmax.c\n *\n * Code generation for function 'Parimregionalmax'\n *\n */\n\n/* Include files */\n#include \"rt_nonfinite.h\"\n#include \"Parimregionalmax.h\"\n#include \"libmwimregionalmax.h\"\n\n/* Function Definitions */\nvoid Parimregionalmax(const unsigned char x[65536], double y[65536])\n{\n  int k;\n  int i0;\n  int i1;\n  double imSize[2];\n  unsigned char varargin_1[256];\n  boolean_T conn[9];//unsigned char \n  double connSize[2];\n  boolean_T BW[256];\n\n#pragma omp parallel for \\\n num_threads(omp_get_max_threads()) \\\n private(i0,i1) \\\n firstprivate(varargin_1,imSize,conn,connSize,BW)\n\n  for (k = 0; k &lt; 256; k++) {\n    for (i0 = 0; i0 &lt; 16; i0++) {\n      for (i1 = 0; i1 &lt; 16; i1++) {\n        varargin_1[i1 + (i0 &lt;&lt; 4)] = x[(i1 + (i0 &lt;&lt; 4)) + (k &lt;&lt; 8)];\n      }\n    }\n\n    for (i0 = 0; i0 &lt; 2; i0++) {\n      imSize[i0] = 16.0;\n    }\n\n    for (i0 = 0; i0 &lt; 9; i0++) {\n      conn[i0] = true;\n    }\n\n    for (i0 = 0; i0 &lt; 2; i0++) {\n      connSize[i0] = 3.0;\n    }\n\n    imregionalmax_uint8(varargin_1, BW, 2.0, imSize, conn, 2.0, connSize);\n    for (i0 = 0; i0 &lt; 16; i0++) {\n      for (i1 = 0; i1 &lt; 16; i1++) {\n        y[(i1 + (i0 &lt;&lt; 4)) + (k &lt;&lt; 8)] = BW[i1 + (i0 &lt;&lt; 4)];\n      }\n    }\n  }\n}\n\n/* End of code generation (Parimregionalmax.c) */\n</code></pre>\n\n<p>As you can see, the generated code (which works perfectly) uses openmp parallelization framework and calls the function <code>imregionalmax_uint8</code> which is implemented in a separate \"black-box\" dll (with corresponding header and lib files). </p>\n\n<p>Can I assume that this fuction is always thread safe no matter which parallelization framework I use?</p>\n\n<p><strong>Examples:</strong></p>\n\n<p>1.Is it OK to define two threads using C++ <code>&lt;thread&gt;</code> library in a console \n  application (a.k.a exe file in VS) and call from  each thread to \n  <code>imregionalmax_uint8</code>?</p>\n\n<ol start=\"2\">\n<li>Do two separate dlls (loaded by exe file) can call this function \nsimultaneously?</li>\n</ol>\n"}, {"tags": ["c++", "visual-studio-2015"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6531253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23d3c266fe35966d444609d21e6ad4f?s=128&d=identicon&r=PG&f=1", "display_name": "Eagleheart", "link": "https://stackoverflow.com/users/6531253/eagleheart"}, "edited": false, "score": 0, "creation_date": 1537400381, "post_id": 52415441, "comment_id": 91774609, "body": "Hmm, I see the shortcuts there now. But something must control the name of the shortcut that is generated when you pin something. For example, if I drag &quot;Steam.exe&quot; to the taskbar and create the pin...the shortcut that is generated in that folder is titled &quot;Steam Client Bootstrapper&quot;."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 21, "user_id": 6531253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23d3c266fe35966d444609d21e6ad4f?s=128&d=identicon&r=PG&f=1", "display_name": "Eagleheart", "link": "https://stackoverflow.com/users/6531253/eagleheart"}, "edited": false, "score": 0, "creation_date": 1537401254, "post_id": 52415441, "comment_id": 91774802, "body": "The initial name of the shortcut comes from the app&#39;s version resource (verified with my own apps, using the fields you ruled out in your question), or if there is no name present there, maybe the OS will be smart enough to use the <code>&lt;description&gt;</code> from the app&#39;s manifest if one is present (speculating)."}, {"owner": {"reputation": 21, "user_id": 6531253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23d3c266fe35966d444609d21e6ad4f?s=128&d=identicon&r=PG&f=1", "display_name": "Eagleheart", "link": "https://stackoverflow.com/users/6531253/eagleheart"}, "edited": false, "score": 0, "creation_date": 1537403004, "post_id": 52415441, "comment_id": 91775122, "body": "I found if I change the data for the registry key C:\\Program Files (x86)\\Steam\\Steam.exe.FriendlyAppName in the registry location Computer\\HKEY_CLASSES_ROOT\\Local Settings\\Software\\Microsoft\\Windows\\Shell\\MuiCache then it will change the shortcut name on generation to whatever I set.  However, that only seems to work for Steam and not other executables...I guess something else is referencing that key to determine the name but only for Steam?"}, {"owner": {"reputation": 21, "user_id": 6531253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23d3c266fe35966d444609d21e6ad4f?s=128&d=identicon&r=PG&f=1", "display_name": "Eagleheart", "link": "https://stackoverflow.com/users/6531253/eagleheart"}, "edited": false, "score": 0, "creation_date": 1537460427, "post_id": 52415441, "comment_id": 91802272, "body": "That is very odd that you say it comes from the fields I ruled out. I have all of that information set properly and it even shows when I look at the executable properties, but when I pin it then the link is still titled after the executable name instead."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 21, "user_id": 6531253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23d3c266fe35966d444609d21e6ad4f?s=128&d=identicon&r=PG&f=1", "display_name": "Eagleheart", "link": "https://stackoverflow.com/users/6531253/eagleheart"}, "edited": false, "score": 1, "creation_date": 1537464179, "post_id": 52415441, "comment_id": 91804044, "body": "As a test, I have an app that contains a version resource and a manifest with no description in it. When I run the app, whether I pin it or not, the title being displayed is the value in the version resource&#39;s <code>FileDescription</code> field."}, {"owner": {"reputation": 21, "user_id": 6531253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23d3c266fe35966d444609d21e6ad4f?s=128&d=identicon&r=PG&f=1", "display_name": "Eagleheart", "link": "https://stackoverflow.com/users/6531253/eagleheart"}, "edited": false, "score": 0, "creation_date": 1537576011, "post_id": 52415441, "comment_id": 91848212, "body": "Thank you so much! The issue was that there was a colon in the FileDescription field since the game has a colon in its name, which is not valid for the filename when it tried to generate the shortcut, so it was defaulting back to the executable name... &gt;_&gt;"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1537400857, "last_edit_date": 1537400857, "creation_date": 1537399465, "answer_id": 52415441, "question_id": 52415406, "link": "https://stackoverflow.com/questions/52415406/change-title-in-right-click-menu-of-taskbar-icon/52415441#52415441", "title": "Change Title In Right-Click Menu of Taskbar Icon", "body": "<p>When an app is pinned to the Taskbar, its title is just the filename (minus the extension) of the shortcut to the app that is stored in the following folder:</p>\n\n<pre><code>%AppData%\\Microsoft\\Internet Explorer\\Quick Launch\\User Pinned\\TaskBar\n</code></pre>\n\n<p>So, in your example, there would be a shortcut named <code>Google Chrome.lnk</code>.</p>\n\n<p>Renaming a shortcut in that folder updates the displayed Title accordingly.  Unpinning an app from the Taskbar deletes its corresponding shortcut from that folder.</p>\n"}], "owner": {"reputation": 21, "user_id": 6531253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23d3c266fe35966d444609d21e6ad4f?s=128&d=identicon&r=PG&f=1", "display_name": "Eagleheart", "link": "https://stackoverflow.com/users/6531253/eagleheart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 190, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1537400857, "creation_date": 1537399200, "question_id": 52415406, "link": "https://stackoverflow.com/questions/52415406/change-title-in-right-click-menu-of-taskbar-icon", "title": "Change Title In Right-Click Menu of Taskbar Icon", "body": "<p>I have searched for hours and cannot figure out how to set the title listed in this menu of a pinned executable that I am creating in VS 2015:</p>\n\n<p><a href=\"https://i.stack.imgur.com/jUBhL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jUBhL.png\" alt=\"Right-click menu of taskbar icon\"></a></p>\n\n<p>I assumed it is something you must set in the .rc resource file, but it is not tied to FileDescription, InternalName, OriginalFilename, or ProductName. </p>\n\n<p>Does anyone know how to set it?</p>\n\n<p>It seems to default to the name of the executable, but I know you can change it since some programs (like Steam and Chrome) have one that differs from the executable name.</p>\n"}, {"tags": ["c++", "c++17", "template-meta-programming", "variant"], "answers": [{"comments": [{"owner": {"reputation": 557, "user_id": 3180151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xeh1I.jpg?s=128&g=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/3180151/sebastian"}, "edited": false, "score": 0, "creation_date": 1537401276, "post_id": 52415582, "comment_id": 91774808, "body": "Excellent. Thank you! That&#39;s exactly what I needed to do."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 3, "last_activity_date": 1537400496, "creation_date": 1537400496, "answer_id": 52415582, "question_id": 52415279, "link": "https://stackoverflow.com/questions/52415279/c-is-it-possible-to-write-a-function-that-appends-a-differently-typed-element/52415582#52415582", "title": "C++: Is it possible to write a function that appends a differently typed element to an array of variant?", "body": "<p>The call to the visitor must yield the same type and value category for all possible arguments. Explicitly specify your lambda's return type to be the new variant, i.e., <code>typename Variant_Monoid::concatenate&lt;T, S&gt;::type</code>.</p>\n"}], "owner": {"reputation": 557, "user_id": 3180151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xeh1I.jpg?s=128&g=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/3180151/sebastian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 52415582, "answer_count": 1, "score": 1, "last_activity_date": 1537400496, "creation_date": 1537398264, "question_id": 52415279, "link": "https://stackoverflow.com/questions/52415279/c-is-it-possible-to-write-a-function-that-appends-a-differently-typed-element", "title": "C++: Is it possible to write a function that appends a differently typed element to an array of variant?", "body": "<p>I'm trying to write a function, that will, for example, take an:</p>\n\n<p><code>std::array&lt;std::variant&lt;int, std::string_view&gt;, 4&gt;</code></p>\n\n<p>and a <code>double d</code>, and return:</p>\n\n<p><code>std::array&lt;std::variant&lt;int, std::string_view, double&gt;, 5&gt;</code></p>\n\n<p>with <code>d</code> appended to the end of the array, but I'm running into some very strange behaviour in my implementation thus far.</p>\n\n<p>Right now, I have a <code>Variant_Monoid</code> (with binary operation <code>concatenate</code>) to handle expanding <code>std::variant</code> types, which seems to be working fine:</p>\n\n<pre><code>struct Variant_Monoid {\n    using zero = std::monostate;\n\n    template &lt;typename T, typename... Args&gt;\n    struct [[maybe_unused]] concatenate;\n\n    template &lt;typename... Args0, typename... Args1&gt;\n    struct concatenate&lt;std::variant&lt;Args0...&gt;, std::variant&lt;Args1...&gt;&gt; {\n        using type = std::variant&lt;Args0..., Args1...&gt;;\n    };\n\n    // Convenience method to concatenate types without having to wrap them into a variant first.\n    template&lt;typename... Args0, typename... Args1&gt;\n    struct concatenate&lt;std::variant&lt;Args0...&gt;, Args1...&gt; {\n        using type = std::variant&lt;Args0..., Args1...&gt;;\n    };\n};\n</code></pre>\n\n<p>Then I have this, where the idea is to go through the existing array, try to expand the types from the old variant to the new variant, and then append the new element:</p>\n\n<pre><code>template&lt;size_t N, typename T, typename S&gt;\nconstexpr std::array&lt;typename Variant_Monoid::concatenate&lt;T, S&gt;::type, N + 1&gt; append_element_with_type(const std::array&lt;T, N&gt; &amp;a, const S &amp;s) {\n    return append_element_with_type_aux(a, s, std::make_index_sequence&lt;N&gt;{});\n}\n</code></pre>\n\n<p>delegating to this function:</p>\n\n<pre><code>template&lt;size_t N, typename T, typename S, size_t... Indices&gt;\nconstexpr std::array&lt;typename Variant_Monoid::concatenate&lt;T, S&gt;::type, N + 1&gt;\nappend_element_with_type_aux(const std::array&lt;T, N&gt; &amp;a,\n                             const S &amp;s, std::index_sequence&lt;Indices...&gt;) noexcept {\n    return {{std::visit([](auto &amp;&amp;t) { return t; }, a[Indices])..., s}};\n}\n</code></pre>\n\n<p>The behaviour of this function, though, is all over the place. In some cases (usually the first call in a series of calls), it appears to work fine. For example:</p>\n\n<pre><code>constexpr std::array&lt;std::variant&lt;Variant_Monoid::zero&gt;, 0&gt; s0{};\nconstexpr std::array&lt;std::variant&lt;Variant_Monoid::zero, int&gt;, 1&gt; s1 = append_element_with_type(s0, 1);\n</code></pre>\n\n<p>However, if I try this next, not only does the compiler complain that the expression is not <code>constexpr</code>, but it fails entirely to compile with a barrage of undecipherable STL messages:</p>\n\n<pre><code>auto s2 = append_element_with_type(s1, 3.14159);\n</code></pre>\n\n<p>Similarly, this seems to work without issue:</p>\n\n<pre><code>constexpr std::array&lt;std::variant&lt;std::string_view&gt;, 3&gt; to_extend = {{\"Hello\", \"there\", \"world\"}};\nconstexpr std::array&lt;std::variant&lt;std::string_view, int&gt;, 4&gt; extended = append_element_with_type(to_extend, 5);\n</code></pre>\n\n<p>and then again, this fails with similar compilation errors and again with the claim that the expression is not <code>constexpr</code>:</p>\n\n<pre><code>constexpr std::array&lt;std::variant&lt;std::string_view, int, double&gt;, 5&gt; prepended = append_element_with_type(extended, 3.14);\n</code></pre>\n\n<p>Any suggestions / help would be very much appreciated. I'm still fairly new to template metaprogramming and just playing around to learn more.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1537397879, "post_id": 52415196, "comment_id": 91774151, "body": "Fyi,<code>std::multimap</code> has a <a href=\"https://en.cppreference.com/w/cpp/container/multimap/erase\" rel=\"nofollow noreferrer\">iterator-range-based erase method</a>."}, {"owner": {"reputation": 4728, "user_id": 2457733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/LG30R.png?s=128&g=1", "display_name": "It&#39;sPete", "link": "https://stackoverflow.com/users/2457733/itspete"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1537398292, "post_id": 52415196, "comment_id": 91774232, "body": "@WhozCraig Right, but I have to already loop over all the elements anyways, so I would prefer to use the <code>erase()</code> method which just takes the iterator position and does the operation in amortized constant time, instead of later calling the iterator-range based method which takes <code>log(c.size()) + std::distance(first, last)</code> time and hoping that my compiler combines the loops when optimizing."}, {"owner": {"reputation": 1449, "user_id": 984986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2113da6f02cd6428b92291c26ba11727?s=128&d=identicon&r=PG", "display_name": "Zrax", "link": "https://stackoverflow.com/users/984986/zrax"}, "edited": false, "score": 2, "creation_date": 1537398639, "post_id": 52415196, "comment_id": 91774315, "body": "A safer way to do <code>session_map_.erase(it++)</code> would be <code>it = session_map_.erase(it)</code> -- <code>erase()</code> returns the next iterator after the erased one for exactly this purpose."}], "answers": [{"tags": [], "owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "is_accepted": true, "score": 2, "last_activity_date": 1537398334, "creation_date": 1537398334, "answer_id": 52415292, "question_id": 52415196, "link": "https://stackoverflow.com/questions/52415196/stdmultimaperase-while-iterating/52415292#52415292", "title": "std::multimap::erase() while iterating", "body": "<p>The documentation says </p>\n\n<blockquote>\n  <p>Other references and iterators are not affected</p>\n</blockquote>\n\n<p>So your loop runs as expected and <code>erase</code> works as expected.</p>\n\n<p>Suppose you have 4 elements, in your case the loop runs 4 times without any problem.</p>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/container/multimap/erase\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/container/multimap/erase</a></p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1537401111, "creation_date": 1537401111, "answer_id": 52415650, "question_id": 52415196, "link": "https://stackoverflow.com/questions/52415196/stdmultimaperase-while-iterating/52415650#52415650", "title": "std::multimap::erase() while iterating", "body": "<p>What you are doing is perfectly safe.</p>\n\n<p>I, however, am leery of complex control flow in business logic.  It is too hard to understand at a glance, and comments have a risk of becoming out of sync.</p>\n\n<p>As such I write verbs.</p>\n\n<pre><code>template&lt;class C, class It, class F&gt;\nvoid erase_remove_if( C&amp; c, It b, It e, F&amp;&amp; f) {\n  auto it = b;\n  while (it != e) {\n    if (f(*it))\n      it = c.erase(it);\n    else\n      ++it\n  }\n}\ntemplate&lt;class C, class F&gt;\nvoid erase_remove_if( C&amp; c, F&amp;&amp; f) {\n  using std::begin; using std::end;\n  return erase_remove_if( c, begin(c), end(c), std::forward&lt;F&gt;(f) );\n}\n</code></pre>\n\n<p>now your code reads like:</p>\n\n<pre><code>void MyClass::end_session(const int session_id) {\n  // session_map_ is a member variable of MyClass\n  const auto range = session_map_.equal_range(session_id);\n\n  // remove said elements after doing some processing:\n  erase_remove_if( session_map_, range.first, range.second, [&amp;](auto&amp; kv) {\n    auto&amp;&amp; [key, elem] = kv;\n    // do cleanup for the hardware pointed to by elem\n    return true; // erase element\n  });\n}\n</code></pre>\n\n<p>basically fenceposting errors are so common and hard to prevent that I'd rather have my relatively complex loop control code in one spot.</p>\n"}], "owner": {"reputation": 4728, "user_id": 2457733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/LG30R.png?s=128&g=1", "display_name": "It&#39;sPete", "link": "https://stackoverflow.com/users/2457733/itspete"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 52415292, "answer_count": 2, "score": 2, "last_activity_date": 1537401111, "creation_date": 1537397501, "question_id": 52415196, "link": "https://stackoverflow.com/questions/52415196/stdmultimaperase-while-iterating", "title": "std::multimap::erase() while iterating", "body": "<p>I have a <code>std::multimap</code> that maps session IDs (<code>int</code>s) to the pieces of hardware used in that session (the hardware is described by a <code>struct</code> that contains some hardware specific info).</p>\n\n<p>I have a cleanup function that has to do specific cleanup stuff for each piece of hardware. After the cleanup is done, I need to erase that element from the map, since the hardware is no longer used in that session.</p>\n\n<p>Note that I don't just want to remove a single piece of hardware from a session. Instead the whole session gets torn down, so I want to search the map for the session ID, cleanup the hardware, and remove all those entries from the map.</p>\n\n<p>Here's some code which shows what I am trying to explain:</p>\n\n<pre><code>void MyClass::end_session(const int session_id) {\n  // session_map_ is a member variable of MyClass\n  const auto range = session_map_.equal_range(session_id);\n  for (auto it = range.first; it != range.second; session_map_.erase(it++)) {\n    // do cleanup for the hardware pointed to by it-&gt;second\n  }\n}\n</code></pre>\n\n<p>Is the loop legal? I know that the iterator passed in to <code>erase()</code> gets invalidated, but this doesn't invalidate <code>range.first</code> or <code>range.second</code>, correct? Also, does <code>session_map_.erase(it++)</code> work like I would expect it to? That is, I'm assuming that <code>it</code> gets saved as the argument for <code>erase()</code>, gets incremented to its new value, and then <code>erase()</code> is called for the old value (thus invalidating the iterator before the increment). Is that correct?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 16677, "user_id": 1092820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc78da24118b403595f62fa7856e1b6c?s=128&d=identicon&r=PG", "display_name": "Ruzihm", "link": "https://stackoverflow.com/users/1092820/ruzihm"}, "edited": false, "score": 1, "creation_date": 1537395794, "post_id": 52414945, "comment_id": 91773628, "body": "What language is this? Please edit your question to include the language"}, {"owner": {"reputation": 8101, "user_id": 9199167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqdLV.jpg?s=128&g=1", "display_name": "Max Vollmer", "link": "https://stackoverflow.com/users/9199167/max-vollmer"}, "edited": false, "score": 1, "creation_date": 1537397146, "post_id": 52414945, "comment_id": 91773975, "body": "<code>Down+8</code> and <code>Right+8</code> need to be <code>Down+=8</code> and <code>Right+=8</code>. Voting to close as typo."}, {"owner": {"reputation": 33, "user_id": 8766777, "user_type": "registered", "profile_image": "https://graph.facebook.com/1542563249123862/picture?type=large", "display_name": "Charles", "link": "https://stackoverflow.com/users/8766777/charles"}, "edited": false, "score": 0, "creation_date": 1537398596, "post_id": 52414945, "comment_id": 91774303, "body": "Ok It&#39;s working now. This &quot;Down+8 and Right+8 need to be Down+=8 and Right+=8.&quot; helped and I&#39;ve changed Right++ and Down++ to Right8++ and Down8++"}], "owner": {"reputation": 33, "user_id": 8766777, "user_type": "registered", "profile_image": "https://graph.facebook.com/1542563249123862/picture?type=large", "display_name": "Charles", "link": "https://stackoverflow.com/users/8766777/charles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1537396964, "creation_date": 1537395707, "last_edit_date": 1537396964, "question_id": 52414945, "link": "https://stackoverflow.com/questions/52414945/working-with-small-2d-parts-of-big-2d-array-and-moving-around-it", "title": "Working with small 2D parts of big 2D array and moving around it", "body": "<p>I have one big 2D array and I want change values in smaller 2D. I can't just get some results.\nI have something like that (for 16x16 array f.e.)</p>\n\n<pre><code>int Down8 = 0;\nint Right8 = 0;\n\n        for (int Down = 0; Down &lt; 16; Down+8)\n        {\n            for (int Right = 0; Right &lt; 16; Right+8)\n            {\n                Right8 = Right;\n                Down8 = Down;\n                for (int i = 0; i &lt; 8; i++)\n                {\n                    for (int j = 0; j &lt; 8; j++)\n                    {\n                        matrixZ[j][i] = TEST[Right8][Down8];\n                        Right++;\n                    }\n                    Down++;\n                    Right8 = Right;\n                }\n                dctTransform(matrixZ);\n                for (int i = 0; i &lt; 8; i++)\n                {\n                    for (int j = 0; j &lt; 8; j++)\n                    {\n                        matrixZ[j][i] = matrixZ[j][i] / Quant50[j][i];\n                    }\n                }\n                zigZagMatrix(matrixZ, 8, 8);\n            }\n        }\n</code></pre>\n\n<p>For 2D 16x16 my function zigZagMatrix should return 4 lines into file (because 16x16 array has 4 8x8 arrays) but only returns 2. 640x480 array should return 4800 lines ( 640/8*480/8 ), returns 60.\nWhere am I blind/wrong?\nAll functions I have works with 8x8 array so all of it is loops problem.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1537395962, "post_id": 52414826, "comment_id": 91773672, "body": "If those indexes are really integers <b>and</b> you don&#39;t care about ordering as much as access time, <code>std::unordered_map</code> will probably give you better performance. Just saying."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1537593410, "post_id": 52414826, "comment_id": 91850373, "body": "@WhozCraig Yep, <code>unordered_map</code> is faster. I&#39;d also create a wrapper class, tack u and v in two 32 bit words to make a 64 bit word then use a single unordered_map&lt;int64_t, bool&gt; About twice as fast since there is only one hash per lookup"}], "answers": [{"tags": [], "owner": {"reputation": 98, "user_id": 10291736, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-l4mX7Bx9AWg/AAAAAAAAAAI/AAAAAAAAAZQ/AbwRY4ZcsXk/photo.jpg?sz=128", "display_name": "Tim Johnsen", "link": "https://stackoverflow.com/users/10291736/tim-johnsen"}, "is_accepted": false, "score": 4, "last_activity_date": 1537396306, "last_edit_date": 1537396306, "creation_date": 1537395076, "answer_id": 52414861, "question_id": 52414826, "link": "https://stackoverflow.com/questions/52414826/how-can-i-assign-values-to-a-map-mapint-int-bool/52414861#52414861", "title": "How can I assign values to a map &lt; map&lt;int,int&gt; , bool &gt;?", "body": "<p>what you want is:</p>\n\n<pre><code>std::map&lt;int, std::map&lt;int, bool&gt; &gt; myMap;\n</code></pre>\n\n<p>Then you can set/get values by:</p>\n\n<pre><code>bool myBool;\nmyMap[u][v] = myBool;\nmyBool = myMap[u][v];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "is_accepted": false, "score": 0, "last_activity_date": 1537631002, "creation_date": 1537631002, "answer_id": 52458259, "question_id": 52414826, "link": "https://stackoverflow.com/questions/52414826/how-can-i-assign-values-to-a-map-mapint-int-bool/52458259#52458259", "title": "How can I assign values to a map &lt; map&lt;int,int&gt; , bool &gt;?", "body": "<p>If there is no need for the ordering behavior of <code>map</code> as @WhozCraig noted in a comment then <code>unordered_map</code> is a much faster choice.</p>\n\n<pre><code>std::unordered_map&lt;int, std::unordered_map&lt;int, bool&gt; &gt; myMap;\n</code></pre>\n\n<p>However, wrapping a single <code>unordered_map</code> with a helper class will typically halve the execution time since only one hash needs to be done to look up the two integers.</p>\n\n<pre><code>class Map2ints\n{\n    class Map2Helper {\n        int u;\n        std::unordered_map&lt;int64_t, bool&gt; &amp;vmap;\n    public:\n        bool&amp; operator[](int v) { return vmap[u | (static_cast&lt;int64_t&gt;(v) &lt;&lt; 32)]; }\n        Map2Helper(int u, std::unordered_map&lt;int64_t, bool&gt; &amp;vmap) :u(u), vmap(vmap) {}\n    };\n    std::unordered_map&lt;int64_t, bool&gt; vmap;\n    bool contains(int u, int v) { return vmap.find(u | (static_cast&lt;int64_t&gt;(v) &lt;&lt; 32))!=vmap.end(); }\npublic:\n    Map2Helper operator[](int u) { return Map2Helper{ u, vmap }; }\n};\n</code></pre>\n\n<p>Then the usage would be the same. For instance:</p>\n\n<pre><code>Map2ints myMap;\nmyMap[70000][151] = true;\nbool a = myMap[70000][151];  // which sets a to true\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 9589256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UUU8o.jpg?s=128&g=1", "display_name": "Indrojit Mondal", "link": "https://stackoverflow.com/users/9589256/indrojit-mondal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1537631002, "creation_date": 1537394843, "last_edit_date": 1537510555, "question_id": 52414826, "link": "https://stackoverflow.com/questions/52414826/how-can-i-assign-values-to-a-map-mapint-int-bool", "title": "How can I assign values to a map &lt; map&lt;int,int&gt; , bool &gt;?", "body": "<p>How can I assign values to a map declaring like this?</p>\n\n<pre><code>map &lt; map&lt;int,int&gt; , bool &gt; Map;\n</code></pre>\n\n<p>I want code to look like this:</p>\n\n<pre><code>Map[u][v]=true;\n</code></pre>\n\n<p>Where <code>u</code> or <code>v</code> can be maximum <code>10^5</code>.</p>\n\n<p>How can I code this?</p>\n"}, {"tags": ["c++", "qt", "qt5", "qstring"], "answers": [{"comments": [{"owner": {"reputation": 3504, "user_id": 224982, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e7b4b96492f8648f4e9372a9f3db752f?s=128&d=identicon&r=PG", "display_name": "ilya1725", "link": "https://stackoverflow.com/users/224982/ilya1725"}, "edited": false, "score": 0, "creation_date": 1537466116, "post_id": 52429090, "comment_id": 91805020, "body": "I don&#39;t use <code>__attribute__((packed))</code>. It comes out from the autogenerator. In addition, <code>gcc</code> ignores it saying it is not valid for non-POD type. I&#39;ll try to make a standalone case, but working with QT isn&#39;t exactly easy."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1537459390, "creation_date": 1537459390, "answer_id": 52429090, "question_id": 52414822, "link": "https://stackoverflow.com/questions/52414822/qt-autogenerated-code-fails-when-updating-qstring/52429090#52429090", "title": "Qt: Autogenerated code fails when updating QString", "body": "<p>The fact that the code is autogenerated has no bearing on the question. What you're saying is that you have a very short code fragment that supposedly fails: move it to a separate <code>main.cpp</code> as a test case! My bet is that you have other problems in the code, and that's why it fails. One of the problems you have is that <code>__attribute__((packed))</code> is essentially you kindly asking the compiler to give you some undefined behavior - you don't need that attribute, because the way it works is not the way you think it works. Correct implementation of this attribute shouldn't generate records with insufficiently aligned members, and thus there may still be platform-specific padding added - you just assume it won't be. And anyway: <code>QString</code> isn't something that you can dump to disk, so packing this struct makes no sense. Gcc has, in some cases, implemented this attribute incorrectly and that may lead to the behavior you observe, although not in the specific case of the struct you show. Probably some other packed struct ended up corrupting the program state and caused the crash you see. First of all: make a stand-alone test case. Then we can figure out what went wrong. But, above all: <strong>Do not use <code>__attribute__((packed)</code>. It's useless for its typical use: serialization.</strong> If you want to serialize/deserialize binary data, use <code>QDataStream</code> or a similar mechanism.</p>\n"}], "owner": {"reputation": 3504, "user_id": 224982, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e7b4b96492f8648f4e9372a9f3db752f?s=128&d=identicon&r=PG", "display_name": "ilya1725", "link": "https://stackoverflow.com/users/224982/ilya1725"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1537459390, "creation_date": 1537394813, "last_edit_date": 1537397742, "question_id": 52414822, "link": "https://stackoverflow.com/questions/52414822/qt-autogenerated-code-fails-when-updating-qstring", "title": "Qt: Autogenerated code fails when updating QString", "body": "<p>I'm modifying the GUI code written in Qt (<a href=\"https://www.librepilot.org/site/index.html\" rel=\"nofollow noreferrer\">LibrePilot</a>). There is a way there to add user classes. They are generated automatically from an XML description.</p>\n\n<p>So this class:</p>\n\n<pre><code>&lt;xml&gt;\n&lt;object name=\"RecorderService_RecordDescription\" singleinstance=\"true\" settings=\"false\" category=\"State\"&gt;\n    &lt;description&gt;For Recorder gadget&lt;/description&gt;\n\n    &lt;field name=\"text\"      units=\"char\"   type=\"string\"  elements=\"1\"/&gt;\n\n    &lt;access gcs=\"readwrite\" flight=\"readwrite\"/&gt;\n    &lt;telemetrygcs    acked=\"false\" updatemode=\"manual\"   period=\"0\"/&gt;\n    &lt;telemetryflight acked=\"false\" updatemode=\"periodic\" period=\"1000\"/&gt;\n    &lt;logging                       updatemode=\"periodic\" period=\"100\"/&gt;\n&lt;/object&gt;\n&lt;/xml&gt;\n</code></pre>\n\n<p>Will be autogenerated into a class that has a one data element contained inside a structure with methods to access it.</p>\n\n<pre><code>// Field structure\ntypedef struct {\n    QString text;\n\n} __attribute__((packed)) DataFields;\n</code></pre>\n\n<p>When I try to set the <code>text</code> with a new value using <code>setText</code> method:</p>\n\n<pre><code>void RecorderService_RecordDescription::setText(const QString value)\n{\n   mutex-&gt;lock();\n   bool changed = (data_.text != static_cast&lt;QString&gt;(value));\n   data_.text = static_cast&lt;QString&gt;(value);\n   mutex-&gt;unlock();\n   if (changed) { emit textChanged(value); }\n}\n</code></pre>\n\n<p>I get <code>SIGABRT</code> exception.</p>\n\n<pre><code>#0  0x00007ffff509ce97 in __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51\n#1  0x00007ffff509e801 in __GI_abort () at abort.c:79\n#2  0x00007ffff50e7897 in __libc_message (action=action@entry=do_abort, fmt=fmt@entry=0x7ffff5214b9a \"%s\\n\") at ../sysdeps/posix/libc_fatal.c:181\n#3  0x00007ffff50ee90a in malloc_printerr (str=str@entry=0x7ffff5212d88 \"free(): invalid pointer\") at malloc.c:5350\n#4  0x00007ffff50f5e1c in _int_free (have_lock=0, p=0x7ffff5f8c5f0, av=0x7ffff5449c40 &lt;main_arena&gt;) at malloc.c:4157\n#5  0x00007ffff50f5e1c in __GI___libc_free (mem=0x7ffff5f8c600) at malloc.c:3124\n#6  0x00007fffc798671e in RecorderService_RecordDescription::setText(QString) () at /usr/lib/librepilot-gcs/plugins/LibrePilot/libUAVObjects.so\n</code></pre>\n\n<p>One solution I found is that if I add another field to the <code>RecorderService_RecordDescription</code>. I.e. the XML is like this:</p>\n\n<pre><code>&lt;xml&gt;\n&lt;object name=\"RecorderService_RecordDescription\" singleinstance=\"true\" settings=\"false\" category=\"State\"&gt;\n    &lt;description&gt;For Recorder gadget&lt;/description&gt;\n\n    &lt;field name=\"text\"      units=\"char\"   type=\"string\"  elements=\"1\"/&gt;\n    &lt;field name=\"seconds\"   units=\"sec\"    type=\"uint32\"  elements=\"1\"/&gt;\n\n    &lt;access gcs=\"readwrite\" flight=\"readwrite\"/&gt;\n    &lt;telemetrygcs    acked=\"false\" updatemode=\"manual\"   period=\"0\"/&gt;\n    &lt;telemetryflight acked=\"false\" updatemode=\"periodic\" period=\"1000\"/&gt;\n    &lt;logging                       updatemode=\"periodic\" period=\"100\"/&gt;\n&lt;/object&gt;\n&lt;/xml&gt;\n</code></pre>\n\n<p>The error goes away. The autogenerated class has this data structure:</p>\n\n<pre><code>// Field structure\ntypedef struct {\n    quint32 seconds;\n    QString text;\n\n} __attribute__((packed)) DataFields;\n</code></pre>\n\n<p>The code for <code>setText</code> is the same.\nThis error didn't happen before when we used an older version of gcc. Current version is 7.2.</p>\n\n<p>Anyone has ideas why the error is happening and how to fix it elegantly.\nThank you.</p>\n"}, {"tags": ["c++", "compiler-errors", "dynamic-memory-allocation", "template-function"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1537394930, "post_id": 52414811, "comment_id": 91773386, "body": "Why are you using <code>new</code> and raw pointers / arrays at all?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537395042, "post_id": 52414811, "comment_id": 91773416, "body": "You have to decide what <code>S</code> is in <code>sortArray</code>. If it&#39;s the type of element in your container then <code>S &amp; array</code> is not correct. If <code>S</code> is your container type then <code>S keyl</code> is not right."}, {"owner": {"reputation": 5, "user_id": 10388172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07190ad339f293e38584b1b3a50c2f63?s=128&d=identicon&r=PG&f=1", "display_name": "Bolt123", "link": "https://stackoverflow.com/users/10388172/bolt123"}, "edited": false, "score": 0, "creation_date": 1537447527, "post_id": 52414811, "comment_id": 91793788, "body": "We have to use new because the teacher told is. It is part of the assigmnent. The array has to be every type as possible and that is why key has to be the same type as the array. Otherwise you can loose data."}], "answers": [{"comments": [{"owner": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "edited": false, "score": 0, "creation_date": 1537409772, "post_id": 52414878, "comment_id": 91776582, "body": "It is correct but misleading to say that <code>S</code> is deduced as <code>int*</code>. It is simply a pointer because <code>sortArray</code> is called with a pointer. Had <code>nums</code> of <code>sortArray(nums, n1);</code> been an array, so S would have been an array type. Someone reading your answer may get the impression that when passing an array to <code>sortArray</code> it decays to a pointer, which is not the case since this is a reference parameter."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "edited": false, "score": 0, "creation_date": 1537409970, "post_id": 52414878, "comment_id": 91776615, "body": "@MichaelVeksler, In the posted code, <code>nums</code> is a <code>int*</code>. I took the liberty of using that information."}, {"owner": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "edited": false, "score": 1, "creation_date": 1537410321, "post_id": 52414878, "comment_id": 91776704, "body": "Yes, this is what I wrote in my comment. I also wrote that the wording may confuse someone. I think that you should also write that the caller passes a pointer, which is not strictly required, but it makes things clearer"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "edited": false, "score": 1, "creation_date": 1537410493, "post_id": 52414878, "comment_id": 91776747, "body": "@MichaelVeksler, I updated the answer just a bit to clarify that point. Thanks for bringing it up."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1537410038, "last_edit_date": 1537410038, "creation_date": 1537395268, "answer_id": 52414878, "question_id": 52414811, "link": "https://stackoverflow.com/questions/52414811/function-templates-in-c/52414878#52414878", "title": "Function templates in c++?", "body": "<p>The compiler is definitely not wrong.</p>\n\n<p>There is some miscommunication.</p>\n\n<p>When you declare</p>\n\n<pre><code>template &lt;class S&gt;  \nvoid sortArray(S &amp;array, int n);\n</code></pre>\n\n<p>and ust it as</p>\n\n<pre><code>sortArray(nums, n1);\n</code></pre>\n\n<p><code>S</code> is deduced as <code>int*</code> given the definition of <code>nums</code> in your posted code. Hence, you may not use</p>\n\n<pre><code>S key;\nfor(i = 1; i &lt; n; i++){\n    key = array[i];\n</code></pre>\n\n<p>since <code>key</code> is of type <code>int*</code> while <code>array[i]</code> is of type <code>int</code>.</p>\n\n<p>You can fix the problem by using one of the following two options.</p>\n\n<ol>\n<li><p>Change the function declaration to </p>\n\n<pre><code>template &lt;class S&gt;  \nvoid sortArray(S* array, int n);\n</code></pre></li>\n<li><p>Change the type of <code>key</code>.</p>\n\n<pre><code>typename std::remove_reference&lt;decltype(*array)&gt;::type key;\n</code></pre>\n\n<p>or let the compiler deduce it using <code>auto</code>.</p>\n\n<pre><code>auto key = array[0];\n</code></pre>\n\n<p>The downside of using the second method is that the program will have undefined behavior if <code>array</code> is empty.</p></li>\n</ol>\n\n<p>You'll have to change <code>reverseArray</code> similarly.</p>\n"}, {"tags": [], "owner": {"reputation": 5, "user_id": 10388172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07190ad339f293e38584b1b3a50c2f63?s=128&d=identicon&r=PG&f=1", "display_name": "Bolt123", "link": "https://stackoverflow.com/users/10388172/bolt123"}, "is_accepted": false, "score": 0, "last_activity_date": 1537447846, "creation_date": 1537447846, "answer_id": 52425594, "question_id": 52414811, "link": "https://stackoverflow.com/questions/52414811/function-templates-in-c/52425594#52425594", "title": "Function templates in c++?", "body": "<p>Thank you for all the information. My teacher wouldn't help me because he was convinced it was my compiler. <br>So all I had to do was chancing my function declaration to <code>void sortArray(S *array, int n);</code> and now it works perfectly. </p>\n"}], "owner": {"reputation": 5, "user_id": 10388172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07190ad339f293e38584b1b3a50c2f63?s=128&d=identicon&r=PG&f=1", "display_name": "Bolt123", "link": "https://stackoverflow.com/users/10388172/bolt123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 52414878, "answer_count": 2, "score": 0, "last_activity_date": 1537447846, "creation_date": 1537394758, "last_edit_date": 1537410719, "question_id": 52414811, "link": "https://stackoverflow.com/questions/52414811/function-templates-in-c", "title": "Function templates in c++?", "body": "<p>For school, I have an assignment to create a function template and use the users input for dynamic memory. My code is not working, but my teacher says it is correct and it is just my compiler that does not work. This is the error I get from the compiler:</p>\n\n<blockquote>\n  <p>error: invalid conversion from 'int' to 'int*' [-fpermissive]\n           key = array[I];</p>\n</blockquote>\n\n<p>I use the compiler MinGW64. Is there anyone with the same problem who has a solution?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;ctime&gt;\n\nusing namespace std;\n\ntemplate &lt;class S&gt;  \nvoid sortArray(S &amp;array, int n);\n\ntemplate &lt;class R&gt;\nvoid reverseArray(R &amp;array, int n);\n\ntemplate &lt;class P&gt;\nvoid printArray(P array, int n);\n\nint main() {\n    int n1, n2, i;\n\n    srand(time(0));\n\n    cout &lt;&lt; \"insert how many numbers:\";\n    cin &gt;&gt; n1;\n    int *nums = new int[n1];\n    if(nums == 0){\n        cout &lt;&lt; \"No memory allocated\";\n        exit(1);\n    }\n    for(i = 0; i &lt; n1; i++){\n        nums[i] = rand() % 100 + 1;\n    }\n    printArray(nums, n1);\n    sortArray(nums, n1);\n    printArray(nums, n1);\n    reverseArray(nums, n1);\n    printArray(nums, n1);\n    delete []nums;\n\n    cout &lt;&lt; \"insert how many characters:\";\n    cin &gt;&gt; n2;\n    char *nums2 = new char[n2];\n    if(nums2 == 0){\n        cout &lt;&lt; \"No memory allocated\";\n        exit(1);\n    }\n    for(i = 0; i &lt; n2; i++){\n        nums2[i] =  rand() % 25 + 97; // rand() % 93 + 33\n    }\n    printArray(nums2, n2);\n    sortArray(nums2, n2);\n    printArray(nums2, n2);\n    reverseArray(nums2, n2);\n    printArray(nums2, n2);\n    delete []nums2;\n\n    return 0;\n}\n\ntemplate &lt;class S&gt;\nvoid sortArray(S &amp;array, int n){\n    int i, j;\n    S key;\n    for(i = 1; i &lt; n; i++){\n        key = array[i];\n        for(j = i-1; (j&gt;=0) &amp;&amp; (array[j] &gt; key); j--){\n             array[j+1] = array[j];\n        }\n        array[j+1] = key;\n    }\n}\n\ntemplate &lt;class R&gt;\nvoid reverseArray(R &amp;array, int n){\n    int start = 0, end = n-1;\n    R temp;\n    while(start &lt; end){\n        temp = array[start];\n        array[start] = array[end];\n        array[end] = temp;\n        start++;\n        end--;\n    }\n}\n\ntemplate &lt;class P&gt;\nvoid printArray(P array, int n){\n    int i;\n    for (i = 0; i &lt; n; ++i) {\n         cout &lt;&lt; \"[\" &lt;&lt;i &lt;&lt; \"] =&gt; \" &lt;&lt; array[i] &lt;&lt; \", \";\n    }\n    cout &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1537412815, "post_id": 52414713, "comment_id": 91777205, "body": "read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, review the <a href=\"https://stackoverflow.com/tour\">tour</a> and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1537419248, "post_id": 52414713, "comment_id": 91778706, "body": "Does the frameless window really need to be inside the QGraphicsScene?  If you only need a window to float over the top, you could just have your widget inherit from QWidget instead, and maybe set the WindowStaysOnTopHint|FramelessWindowHint flags for good measure."}], "owner": {"reputation": 1, "user_id": 10388166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7905a32d888437c1c2fc3ee040f2d775?s=128&d=identicon&r=PG&f=1", "display_name": "jimjames", "link": "https://stackoverflow.com/users/10388166/jimjames"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1537394149, "creation_date": 1537394149, "question_id": 52414713, "link": "https://stackoverflow.com/questions/52414713/framelesswindowhint-in-qgraphicswidget", "title": "FramelessWindowHint in QGraphicsWidget?", "body": "<p>I have a subclassed QGraphicsWidget and in the constructor I can make it into a dialog window, like so</p>\n\n<pre><code>myClass::myClass(QGraphicsScene *myScene,\n                   QGraphicsWidget *parent) : QGraphicsWidget(parent, Qt::Window)\n{\n\n}\n</code></pre>\n\n<p>This will give me a full Qt Dialog window that I can resize with a blue top bar, a Qt Icon, and a close button.</p>\n\n<p>I want a frameless window though. Whenever I initialize with </p>\n\n<pre><code>myClass::myClass(QGraphicsScene *myScene,\n                   QGraphicsWidget *parent) : QGraphicsWidget(parent, Qt::Window | Qt::FramelessWindowHint)\n{\n\n}\n</code></pre>\n\n<p>or do </p>\n\n<pre><code>setWindowFlags(Qt::Window | Qt::FramelessWindowHint);\n</code></pre>\n\n<p>or </p>\n\n<pre><code>setWindowFlags(Qt::FramelessWindowHint)\n</code></pre>\n\n<p>I found this technique in the basicgraphicslayout.pro in the Qt Creator examples. </p>\n\n<p>The window disappears and my QGraphicsWidget continues on as normal as if I never passed the Qt::Window flag.</p>\n\n<p>My question is how do I make a frameless window in a QGraphicsScene? How do I edit the Dialog window attributes when it is inside a QGraphicsScene/Widget? </p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c#", "c++", "callback", "dllimport", "dllexport"], "comments": [{"owner": {"reputation": 1758, "user_id": 866670, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XTDPx.png?s=128&g=1", "display_name": "Soundararajan", "link": "https://stackoverflow.com/users/866670/soundararajan"}, "edited": false, "score": 1, "creation_date": 1537394312, "post_id": 52414671, "comment_id": 91773199, "body": "Technically the function should be generic and should not act based on which process is calling it. But if you have 3 different ways of doing stuff, then you should have 3 different functions exported and from each C# application call the respective ones."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2819245"}, "edited": false, "score": 0, "creation_date": 1537394427, "post_id": 52414671, "comment_id": 91773240, "body": "It is technically possible to get information about the process (i.e, the calling exe) in which the library function is called and executed, but then again, i very much agree with Soundararajan here..."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1537394490, "post_id": 52414671, "comment_id": 91773255, "body": "Take a look at the <code>Assembly</code> class. IIRC there&#39;s a function provided to do that."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1537395058, "post_id": 52414671, "comment_id": 91773419, "body": "Guys, we should be asking the OP why he wants to do it, rather than telling him that he shouldn&#39;t.  For all we know, he might want to log the name of the calling app for some reason."}, {"owner": {"reputation": 43407, "user_id": 2791540, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/bbd133916bdbabcde7c31ab28f4b4e6b?s=128&d=identicon&r=PG&f=1", "display_name": "John Wu", "link": "https://stackoverflow.com/users/2791540/john-wu"}, "edited": false, "score": 0, "creation_date": 1537396367, "post_id": 52414671, "comment_id": 91773762, "body": "A DLL runs in the same process as the caller. So you just need an API call to <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/processthreadsapi/nf-processthreadsapi-getcurrentprocessid\" rel=\"nofollow noreferrer\">get the current process ID</a>"}, {"owner": {"reputation": 77, "user_id": 10373199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/haCVn.jpg?s=128&g=1", "display_name": "charley manson", "link": "https://stackoverflow.com/users/10373199/charley-manson"}, "reply_to_user": {"reputation": 1758, "user_id": 866670, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XTDPx.png?s=128&g=1", "display_name": "Soundararajan", "link": "https://stackoverflow.com/users/866670/soundararajan"}, "edited": false, "score": 0, "creation_date": 1537396669, "post_id": 52414671, "comment_id": 91773838, "body": "@Soundararajan  I need the calling exe filename for some security reasons and my blockchain , thanks."}, {"owner": {"reputation": 77, "user_id": 10373199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/haCVn.jpg?s=128&g=1", "display_name": "charley manson", "link": "https://stackoverflow.com/users/10373199/charley-manson"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1537396806, "post_id": 52414671, "comment_id": 91773875, "body": "@PaulSanders yeah exactly ! I need it for log and blockchain system."}, {"owner": {"reputation": 169, "user_id": 3890169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cZ7bY.jpg?s=128&g=1", "display_name": "diogoslima", "link": "https://stackoverflow.com/users/3890169/diogoslima"}, "edited": false, "score": 0, "creation_date": 1537490147, "post_id": 52414671, "comment_id": 91813567, "body": "Hi @charley manson, hope I don\u2019t start a debate on security here, and I know it seems your question was already replied, but If you are using the calling application (name, token, etc) for security reasons, beware of <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/processthreadsapi/nf-processthreadsapi-createremotethreadex\" rel=\"nofollow noreferrer\">RemoteThreads</a> and <a href=\"https://docs.microsoft.com/en-us/windows/desktop/winmsg/about-hooks\" rel=\"nofollow noreferrer\">Hooks</a>."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 10373199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/haCVn.jpg?s=128&g=1", "display_name": "charley manson", "link": "https://stackoverflow.com/users/10373199/charley-manson"}, "edited": false, "score": 0, "creation_date": 1537396848, "post_id": 52414850, "comment_id": 91773887, "body": "thank you a lot Paul , I&#39;m checking it I will back and accept your answer if it works for me"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1537417562, "post_id": 52414850, "comment_id": 91778233, "body": "You need to check for errors also, and I don&#39;t really understand the <code>+ 1</code>"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1537436045, "post_id": 52414850, "comment_id": 91786866, "body": "@DavidHeffernan Can there be any errors?  And 1 for luck :) (or end of string marker)"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1537436316, "post_id": 52414850, "comment_id": 91787039, "body": "<code>MAX_PATH</code> includes space for terminator when using standard paths. So the <code>+ 1</code> is pointless. When long file names are enabled (greater than <code>MAX_PATH</code>), then the call can fail if the path is too long. You can find this out by reading the documentation."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1537487976, "post_id": 52414850, "comment_id": 91813146, "body": "@David Fine, edited. Perhaps you&#39;d like to reverse your downvote. Overly long filenames play havoc with Explorer so these are unlikely to be an issue but I changed the code anyway."}], "tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": true, "score": -1, "last_activity_date": 1537487945, "last_edit_date": 1537487945, "creation_date": 1537394968, "answer_id": 52414850, "question_id": 52414671, "link": "https://stackoverflow.com/questions/52414671/dllimport-how-to-get-which-application-called-function-in-unmanaged-dll/52414850#52414850", "title": "dllimport how to get which application called function in unmanaged dll", "body": "<p>This should work:</p>\n\n<pre><code>constexpr DWORD bufsize = 32768;\nWCHAR *calling_application = new WCHAR [bufsize];\nDWORD nSize = GetModuleFileNameW (NULL, calling_application, bufsize);\n\nif (nSize == 0 || nSize == bufsize)\n{\n    // panic, should never happen\n}\n\n// ...\n\ndelete [] calling_application;\n</code></pre>\n\n<p>Documentation here:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683197%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms683197%28v=vs.85%29.aspx</a></p>\n"}], "owner": {"reputation": 77, "user_id": 10373199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/haCVn.jpg?s=128&g=1", "display_name": "charley manson", "link": "https://stackoverflow.com/users/10373199/charley-manson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 52414850, "answer_count": 1, "score": 0, "last_activity_date": 1537487945, "creation_date": 1537393938, "question_id": 52414671, "link": "https://stackoverflow.com/questions/52414671/dllimport-how-to-get-which-application-called-function-in-unmanaged-dll", "title": "dllimport how to get which application called function in unmanaged dll", "body": "<p>I have <strong>1 unmanaged C++ dll</strong> with <strong>dllexport</strong> functions and <strong>3 managed C# application</strong> that use unmanaged dll functions with <strong>dllimport</strong> , okay everything works fine.</p>\n\n<p>I need to know in C++ dll , How can I get a value that tells me which C# application called it from outside.</p>\n\n<p><strong>please look at image below :</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/nsQn6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nsQn6.png\" alt=\"dll image\"></a></p>\n\n<blockquote>\n  <ul>\n  <li>now,when <strong>client.exe</strong> calls <strong>function1</strong> from unmanaged dll , a message    shows up <strong>\"client.exe called me!\"</strong></li>\n  <li>now,when <strong>console.exe</strong> calls <strong>function1</strong> from unmanaged dll , a message    shows up <strong>\"console.exe called me!\"</strong></li>\n  <li>now,when <strong>pure.exe</strong> calls <strong>function1</strong> from unmanaged dll , a message    shows up <strong>\"pure.exe called me!\"</strong></li>\n  </ul>\n</blockquote>\n\n<p>I need unmanaged library finds out it by its own, I don't want send anything extra from C# application like getting C# file path and send it to function.</p>\n\n<p><strong>Can it be possible? if yes , How can I do it?</strong> </p>\n"}, {"tags": ["c++", "multithreading", "image", "imagemagick"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1537393426, "post_id": 52414506, "comment_id": 91772925, "body": "Recommend only using the language tag for the compiler you&#39;re using. Tagging C for a question full of code that won&#39;t compile in C annoys people who are here to answer C questions. Maybe they can help you and maybe they&#39;ll simply downvote and move on. Hard to say which you&#39;ll get."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1537393595, "post_id": 52414506, "comment_id": 91772976, "body": "You posted absolutely no information on the compiler you&#39;re using, compiler optimization switches used to build the code, etc.  This information is just as, if not more important than what you are doing with the image itself."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 2, "creation_date": 1537393867, "post_id": 52414506, "comment_id": 91773051, "body": "It would help if you gave some indication of the dimensions of your images, the number of frames, whether there are many colours in the images, what OS, what CPU/RAM you have."}, {"owner": {"reputation": 21, "user_id": 10018911, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RTsvUL9RN-Y/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3dCJVYDA2nt5z7xuGZ0syas-XjxQ/mo/photo.jpg?sz=128", "display_name": "Giovanni Lucaroni", "link": "https://stackoverflow.com/users/10018911/giovanni-lucaroni"}, "edited": false, "score": 0, "creation_date": 1537393880, "post_id": 52414506, "comment_id": 91773056, "body": "thanks now I add it"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 1, "creation_date": 1537395332, "post_id": 52414506, "comment_id": 91773505, "body": "Can you profile this?  15 seconds is an eon on modern hardware."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1537433763, "post_id": 52414506, "comment_id": 91785461, "body": "It&#39;s rather difficult to help when your code has all the GDAL stuff in it and we don&#39;t have all your images. I think you might get on better if you started much more simply with, say 24, separate <b>representative</b> images and focus on making a GIF out of them as fast as possible. Failing that, I have seen issues with OpenMP slowing IM down, so you could try disabling that in your build. You could also try compiling with <code>-O3 -march=native</code> and running with <code>&#47;usr&#47;bin&#47;time -l YourProgram</code> to check the RAM usage."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1537433803, "post_id": 52414506, "comment_id": 91785493, "body": "Also, check you have no restrictions on the resources you can use with <code>identify -list resource</code> in <b>Terminal</b>."}, {"owner": {"reputation": 20869, "user_id": 438117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dec2e8d45b1a0210065d1a4e3800f151?s=128&d=identicon&r=PG", "display_name": "emcconville", "link": "https://stackoverflow.com/users/438117/emcconville"}, "edited": false, "score": 0, "creation_date": 1537447072, "post_id": 52414506, "comment_id": 91793507, "body": "A lot of the code in your <code>for</code> loop can be optimized. You can also use <code>OpenMP</code> distribute the work across multiple CPUs."}, {"owner": {"reputation": 21, "user_id": 10018911, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RTsvUL9RN-Y/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3dCJVYDA2nt5z7xuGZ0syas-XjxQ/mo/photo.jpg?sz=128", "display_name": "Giovanni Lucaroni", "link": "https://stackoverflow.com/users/10018911/giovanni-lucaroni"}, "edited": false, "score": 0, "creation_date": 1537456555, "post_id": 52414506, "comment_id": 91800038, "body": "Thanks, the question is how optimize It."}], "owner": {"reputation": 21, "user_id": 10018911, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RTsvUL9RN-Y/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3dCJVYDA2nt5z7xuGZ0syas-XjxQ/mo/photo.jpg?sz=128", "display_name": "Giovanni Lucaroni", "link": "https://stackoverflow.com/users/10018911/giovanni-lucaroni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 342, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1537465839, "creation_date": 1537392896, "last_edit_date": 1537465839, "question_id": 52414506, "link": "https://stackoverflow.com/questions/52414506/imagemagick-magick-is-really-slow-to-write-gif", "title": "ImageMagick Magick++ is really slow to write gif", "body": "<p>I wrote a simple C++ app using gdal and Magick++.\nThe program takes the tiff elaborated from Gdal and add it to a Magick gif.\nThe process is really slow and use around 800 MB of ram (with only 24 frames)... and takes 15 seconds\nI tried to optimize the input files according to this <a href=\"http://im.snibgo.com/spdsiz.htm\" rel=\"nofollow noreferrer\">http://im.snibgo.com/spdsiz.htm</a> but the process still slow \nIm working for a part of a web service, so 15 second is really too much</p>\n\n<pre><code>int main(int argc, char *argv[]) {\n    //timing for bench\n    high_resolution_clock::time_point t1 = high_resolution_clock::now();\n\n    char dirName[12];\n    char timestamp[22];\n\n    //takes the args and convert them to tm struct\n    tm startDate = toTime(std::stringstream(argv[1]));\n    tm endDate = toTime(std::stringstream(argv[2]));\n    //calc the time differenze\n    int diffHours = (int) std::difftime(timegm(&amp;endDate), timegm(&amp;startDate)) / 3600;\n    //register gdal driver and create the datasets\n    GDALAllRegister();\n    GDALDataset *originalDataset;\n    GDALDataset *newDataset;\n    //option for the apply color to the tif file and set the alpha\n    char *optionForDEM[] = {const_cast&lt;char *&gt;(\"-alpha\"), nullptr};\n    GDALDEMProcessingOptions *options = GDALDEMProcessingOptionsNew(optionForDEM, nullptr);\n\n    //read the background and the \"alert zones\" (za)\n    Magick::Image background;\n    Magick::Image za;\n    background.read(\"/home/giovanni/CLionProjects/MappeIRPI-CNR/sfondo2.mpc\");\n    za.read(\"/home/giovanni/CLionProjects/MappeIRPI-CNR/ZA.mpc\");\n    //create a vector for create the gif\n    //i suspect that this method is really slow\n    std::vector&lt;Magick::Image&gt; frames;\n\n\n    int g;\n    time_t date;\n    for (int i = 0; i &lt; diffHours; ++i) {\n        //start of gdal processing block\n        date = timegm(&amp;startDate);\n        strftime(dirName, 12, DIR_FORMAT.c_str(), gmtime(&amp;date));\n        fs::create_directory(fs::path(TEMP_PATH + dirName));\n\n        originalDataset = (GDALDataset *) GDALOpen((BASE_PATH + dirName + PREVISTE).c_str(), GA_ReadOnly);\n        newDataset = (GDALDataset *) GDALDEMProcessing((TEMP_PATH + dirName + PREVISTE).c_str(),\n                                                   originalDataset,\n                                                   \"color-relief\",\n                                                   COLORI.c_str(), options, &amp;g);\n        GDALClose(newDataset); //write the processed tif to ramdisk\n\n        //start of the Magick++ block\n        Magick::Image tif;\n        //read the block\n        tif.read(TEMP_PATH + dirName + PREVISTE);\n        tif.scale(Magick::Geometry(1083, 1166));\n        //add the background and the za\n        //i want to apply that to the final gif, not to every single photo\n        tif.composite(background, 0, 0, Magick::DstOverCompositeOp);\n        tif.composite(za, 0, 0, Magick::OverCompositeOp);\n        //options for annotate the frame\n        tif.font(\"/usr/share/fonts/OTF/SFMono-Bold.otf\");\n        tif.fillColor(\"White\");\n        tif.fontPointsize(37);\n        tif.boxColor(\"Black\");\n        strftime(timestamp, 22, DATE_FORMAT.c_str(), gmtime(&amp;date));\n        tif.annotate(timestamp, Magick::NorthEastGravity);\n        //add the frame to the vector add set the animation delay\n        frames.push_back(tif);\n        tif.animationDelay(3000);\n\n        startDate.tm_hour += 1;\n    }\n\n    //write the gif to disk, this takes a very long time\n    Magick::writeImages(frames.begin(), frames.end(), TEMP_PATH + \"sss.gif\");\n\n    GDALClose(originalDataset);\n    GDALDEMProcessingOptionsFree(options);\n\n    high_resolution_clock::time_point t2 = high_resolution_clock::now();\n    auto duration = duration_cast&lt;seconds&gt;(t2 - t1).count();\n    std::cout &lt;&lt; duration;\n\nreturn 0;\n}\n</code></pre>\n\n<p>This is the workflow: </p>\n\n<ul>\n<li>get the tifs</li>\n<li>do some work with gdal</li>\n<li>write the files as png (any faster format?)</li>\n<li>read the PNGs with .read      </li>\n<li>annotate the images with the timestamp</li>\n<li>add the background and the ZA over the map *</li>\n<li>add the frame to the image vector </li>\n<li>write the vector</li>\n</ul>\n\n<p>*i tryed to do this operation after collecting all images, avoiding doing it for each image, but I could not do it.</p>\n\n<p>i tried to convert the background to a 2 colors png, and then to a miff file, and then to a mpc+cache one\nthe za.png uses alpha and 1 color, i did the same process</p>\n\n<p>What are the fastest formats for the situation? I also need the gif to take as little as possible (it now occupies 5.4 MB !!)</p>\n\n<p>As said the operation must be very fast so I can also consider other libraries simpler ... just fixed these basic problems will resort to multithread (any optimal method?) but from my tests the longest phase is the one that writes the gif on the disk (ramdisk above) </p>\n\n<p>Sample of the result:\n<a href=\"https://photos.app.goo.gl/6YVkqSMuoXwMYuE57\" rel=\"nofollow noreferrer\">https://photos.app.goo.gl/6YVkqSMuoXwMYuE57</a></p>\n\n<p>Google photo album:\n<a href=\"https://photos.app.goo.gl/QDNCAK4i9PCGQW3VA\" rel=\"nofollow noreferrer\">https://photos.app.goo.gl/QDNCAK4i9PCGQW3VA</a></p>\n\n<p><strong>EDIT</strong>\nThanks for the quick comments</p>\n\n<p>I'm on lates Arch linux, but the final program will run a web server not that powerfull\nDebian 9.5, 4 virtual cores and 8 GB of ram (if necessary I can ask for an improvement, but not too much</p>\n\n<p>have to manage a minimum of 24 frames but I could even get to 700 ...\nthe images initially take up 130KB but adding the arrival colors to 400KB\nThis before adding the background and dividing the zones (see the images in the google album)</p>\n\n<p>i compile with G++ 8.2.1\nthis is the cmake file</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.12)\nproject(MappeIrpi)\nSET(CMAKE_CXX_STANDARD 17)\nset(CMAKE_CXX_STANDARD_REQUIRED ON)\nset(SOURCE_FILES main.cpp vips.cpp)\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -fopenmp -lstdc++fs\")\nadd_executable(MappeIrpi ${SOURCE_FILES})\nFIND_PACKAGE(GDAL COMPONENTS REQUIRED)\nadd_definitions(-DMAGICKCORE_QUANTUM_DEPTH=8)\nadd_definitions( -DMAGICKCORE_HDRI_ENABLE=0 )\nadd_definitions(-fopenmp -pthread)\nfind_package(ImageMagick COMPONENTS Magick++)\ninclude_directories(${ImageMagick_INCLUDE_DIRS})\ntarget_link_libraries(MappeIrpi ${ImageMagick_LIBRARIES} gdal stdc++fs \"/usr/lib/libMagickCore-7.Q16HDRI.so.6\")\n</code></pre>\n\n<p>Currently I have not set optimization flags, but even setting -O3 or -Ofast does not change anything</p>\n\n<p>resouce limits:</p>\n\n<pre><code>$ identify -list resource\n Resource limits:\n  Width: 107.374MP\n  Height: 107.374MP\n  List length: -1\n  Area: 33.4532GP\n  Memory: 15.5779GiB\n  Map: 31.1558GiB\n  Disk: unlimited\n  File: 15000\n  Thread: 8\n  Throttle: 0\n  Time: unlimited\n</code></pre>\n\n<p>I will be grateful to anyone who helps me</p>\n"}, {"tags": ["c#", "c++", ".net", "winforms", "arduino"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1537392665, "post_id": 52414408, "comment_id": 91772652, "body": "A <i>serial</i> port writes one byte at a time."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1537392906, "post_id": 52414408, "comment_id": 91772730, "body": "<i>I&#39;m assuming it sends all the bytes at the same time and not individually</i> The write goes into a buffer somewhere and from that buffer into the hardware maybe in a small block or maybe byte by byte depending on the hardware. The hardware then writes the data to the wire one byte at a time along with some extra control bits."}, {"owner": {"reputation": 65, "user_id": 5632120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d800113ac23f22d24781a11963292a2?s=128&d=identicon&r=PG&f=1", "display_name": "j.yang94", "link": "https://stackoverflow.com/users/5632120/j-yang94"}, "edited": false, "score": 0, "creation_date": 1537393065, "post_id": 52414408, "comment_id": 91772781, "body": "At the bottom of the MS page it says &quot;By default, SerialPort uses ASCIIEncoding to encode the characters. ASCIIEncoding encodes all characters greater than 127 as (char)63 or &#39;?&#39;. To support additional characters in that range, set Encoding to UTF8Encoding, UTF32Encoding, or UnicodeEncoding.&quot; So I&#39;m assuming that&#39;s why it&#39;s char. going to look at the other support information"}, {"owner": {"reputation": 65, "user_id": 5632120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d800113ac23f22d24781a11963292a2?s=128&d=identicon&r=PG&f=1", "display_name": "j.yang94", "link": "https://stackoverflow.com/users/5632120/j-yang94"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1537393467, "post_id": 52414408, "comment_id": 91772942, "body": "@user4581301 when you say &quot;the write goes into a buffer somewhere&quot; I&#39;m assuming you do mean that the write function doesn&#39;t necessarily always start at the beginning of the buffer? Do you happen to know where I could read more about the control bits? I&#39;m assuming that&#39;s what I&#39;m after. What do you mean by hardware? Isn&#39;t the write technically in the buffer in the software so it could be written to the hardware?"}, {"owner": {"reputation": 65, "user_id": 5632120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d800113ac23f22d24781a11963292a2?s=128&d=identicon&r=PG&f=1", "display_name": "j.yang94", "link": "https://stackoverflow.com/users/5632120/j-yang94"}, "edited": false, "score": 0, "creation_date": 1537393599, "post_id": 52414408, "comment_id": 91772981, "body": "When I use the default Serial Monitor, I enter the data followed by new line, so I&#39;m assuming the new line is the control bit? How exactly are each bytes separated when being written?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1537394043, "post_id": 52414408, "comment_id": 91773109, "body": "I was trying to say that somewhere in memory there is likely a buffer containing all of the data the program wrote but has not yet been sent by the serial hardware. Say you have two large writes in close proximity in the code. You write in a block of data and only part of it can be sent by the time the second write hits. The new data will be added to the end of the buffer or placed in another buffer that is chained to the first. There are many strategies to handle the fact that the computer can queue up data possibly millions of times faster than the serial hardware can send the data."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1537394218, "post_id": 52414408, "comment_id": 91773161, "body": "The control bits... When you set up the port you may have had to set stop bits and parity bits parameters. this is what I mean by control bits. You send a 7-bit ASCII character and you will actually send those 7 bits, one or more stop bits and a possibly a parity bit."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1537394327, "post_id": 52414408, "comment_id": 91773205, "body": "If you send a wide character, that wide character is going to hacked up into bytes and sent byte by byte, however big a byte is to your comm hardware."}, {"owner": {"reputation": 65, "user_id": 5632120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d800113ac23f22d24781a11963292a2?s=128&d=identicon&r=PG&f=1", "display_name": "j.yang94", "link": "https://stackoverflow.com/users/5632120/j-yang94"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1537403575, "post_id": 52414408, "comment_id": 91775249, "body": "@user4581301 I see. That&#39;s an issue I had earlier, Since I was sending the whole array at once, there was too much data in the buffer and the code wasn&#39;t executing properly. When I send the data element by element with a newline in-between, the code ran smoothly.   Correct, I set start and end marker. I didn&#39;t set up a parity bit though (Parity.None) I don&#39;t think I need one since for my application. With the stop bit VS says Serialport doesn&#39;t support no stop bits so I said 1 because I had to. With the wide char I assume you mean if i send a char outside 0-127?"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1537449054, "post_id": 52414408, "comment_id": 91794879, "body": "You should probably find some good articles. You won&#39;t get an in-depth explanation here - that&#39;s not how SO works. Maybe this: <a href=\"https://learn.sparkfun.com/tutorials/serial-communication\" rel=\"nofollow noreferrer\">Serial Communication</a>. Or <a href=\"https://en.wikipedia.org/wiki/Universal_asynchronous_receiver-transmitter\" rel=\"nofollow noreferrer\">Universal asynchronous receiver-transmitter</a>"}, {"owner": {"reputation": 65, "user_id": 5632120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d800113ac23f22d24781a11963292a2?s=128&d=identicon&r=PG&f=1", "display_name": "j.yang94", "link": "https://stackoverflow.com/users/5632120/j-yang94"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1537463865, "post_id": 52414408, "comment_id": 91803870, "body": "@JohnnyMopp Thanks for the first article. I know that but I was looking for clarification.  I am really interested in understanding how the data is being transmitted. The article helped with understanding how the frame was constructed. I was really just confused on the wide character. My goal is to not be sending ASCII characters but to send numeric values. the issue is that I might need to use int16 which needs 2 bytes which would then affect my array I think? If I have 8 int16 elements in my array, my array is should now be 16 bytes. My worry is that the stream is too large like a wide char"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1537466494, "post_id": 52414408, "comment_id": 91805211, "body": "If you want to send 16-bit values, you need to split  into 2 8-bit values, send those, then reassemble as 16-bit on the receiving side....Or convert to string, send the string, and convert back to int on rcv side. The benefit of the 2nd way is you don&#39;t need to worry about endianess."}, {"owner": {"reputation": 65, "user_id": 5632120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d800113ac23f22d24781a11963292a2?s=128&d=identicon&r=PG&f=1", "display_name": "j.yang94", "link": "https://stackoverflow.com/users/5632120/j-yang94"}, "edited": false, "score": 0, "creation_date": 1537466810, "post_id": 52414408, "comment_id": 91805332, "body": "I think I might be in a catch 22 with what I&#39;m trying to do. Since all I wanted to do was to see information from the Serial so that I was sure the data is being sent correctly. I chose to try and display the byte so I can see what&#39;s I&#39;m receiving. Since my data is being stored in as a byte, &#39;Serial.print()&#39; is defined to print bytes as a single character. So my data being sent over the Serial could be correct, but it would be impossible to display it since &#39;print()&#39; prints bytes as characters and not as the numeric value?"}, {"owner": {"reputation": 65, "user_id": 5632120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d800113ac23f22d24781a11963292a2?s=128&d=identicon&r=PG&f=1", "display_name": "j.yang94", "link": "https://stackoverflow.com/users/5632120/j-yang94"}, "edited": false, "score": 0, "creation_date": 1537466901, "post_id": 52414408, "comment_id": 91805375, "body": "Since I can type store {1,1,1,1,1,1,1,1} into the array so the elements in the array are {1,1,1,1,1,1,1,1}, so when I use the &#39;print&#39; function it displays (49,49,49,49,49,49,49,49) which means it&#39;s displaying the char for the associated byte. The only thing that doesnt make sense is  about this theory is, if the array is of byte 1, isn&#39;t the value techinally (LSB)10000000 and therefore it should be displaying null? I do remember reading somewhere the Serial Monitor is defaulted to read ASCII so When I use the serial monitor, I&#39;m really sending in the char 1 and it&#39;s displaying the ASCII#"}, {"owner": {"reputation": 65, "user_id": 5632120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d800113ac23f22d24781a11963292a2?s=128&d=identicon&r=PG&f=1", "display_name": "j.yang94", "link": "https://stackoverflow.com/users/5632120/j-yang94"}, "edited": false, "score": 0, "creation_date": 1537467949, "post_id": 52414408, "comment_id": 91805870, "body": "I definitely think that storing it as a string would be much simpler. Because I originally planned to use a byte for each number, I would be able to do what your first article mentioned, include a start, the data, and end bit, to create a 10 bit block to send. This seemed like the easiest way to do it. This way I could just use my array prototype (marker, data, marker). Since I do need numeric values from 1-1000 the byte method won&#39;t work since it&#39;ll be &gt;255. So using strings may be the way I have to do it? The only thing about this is I need to understand if I need encoding."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 5632120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d800113ac23f22d24781a11963292a2?s=128&d=identicon&r=PG&f=1", "display_name": "j.yang94", "link": "https://stackoverflow.com/users/5632120/j-yang94"}, "edited": false, "score": 0, "creation_date": 1537402045, "post_id": 52414614, "comment_id": 91774926, "body": "1. I know the Serial communication between The Arduino and GUI is much slower than the computing speed. So the write command will send data, and the processor is running the data much faster than it is receiving it. How come I wouldn&#39;t be guaranteed to read the same number of bytes in each loop?  Is it due to the timeout?  i.e GUI will send the bytes over, and the Arduino will process the data quicker than the data is incoming. but since I have both start and end markers, Isn&#39;t it guaranteed to read all the data?  It&#39;ll keep reading data until both markers are received."}, {"owner": {"reputation": 65, "user_id": 5632120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d800113ac23f22d24781a11963292a2?s=128&d=identicon&r=PG&f=1", "display_name": "j.yang94", "link": "https://stackoverflow.com/users/5632120/j-yang94"}, "edited": false, "score": 0, "creation_date": 1537402463, "post_id": 52414614, "comment_id": 91775012, "body": "2. So If I sent {1,1,1} the data being sent is still 000000010000000100000001 but the program is still only reading 8 bits at a time? 3. Yeah, I was thinking I would like to not cast it into a string and then recast back to the numeric value since I&#39;m actually interested in the numeric value. I.e bit 1 could represent number of times a loop is run. Converting it to &quot;1&quot; and then having the Arduino cast it back into a byte/int seems like it makes it more difficult."}, {"owner": {"reputation": 65, "user_id": 5632120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d800113ac23f22d24781a11963292a2?s=128&d=identicon&r=PG&f=1", "display_name": "j.yang94", "link": "https://stackoverflow.com/users/5632120/j-yang94"}, "edited": false, "score": 0, "creation_date": 1537402801, "post_id": 52414614, "comment_id": 91775083, "body": "4. It gives me error CS0212 <a href=\"https://docs.microsoft.com/en-us/dotnet/csharp/misc/cs0212\" rel=\"nofollow noreferrer\">link</a> I enabled allow unsafe code. I never used a fixed statement, other than declaring the array to be a fixed number of elements. The byte array is not fixed (since there is no size in the []) and since the sendbye[x] is not fixed, aren&#39;t i trying to take the address of an unfixed expression inside of a fixed statement?"}, {"owner": {"reputation": 196, "user_id": 7517688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/702ed33e853d743c00538347959ab018?s=128&d=identicon&r=PG", "display_name": "klanmiko", "link": "https://stackoverflow.com/users/7517688/klanmiko"}, "reply_to_user": {"reputation": 65, "user_id": 5632120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d800113ac23f22d24781a11963292a2?s=128&d=identicon&r=PG&f=1", "display_name": "j.yang94", "link": "https://stackoverflow.com/users/5632120/j-yang94"}, "edited": false, "score": 0, "creation_date": 1537458091, "post_id": 52414614, "comment_id": 91800974, "body": "1. I meant that as a general rule. But you solved this problem using delimiters. 2. Yes because you call Serial.read() to read one at a time. 3. That&#39;s normal 4. Sorry can&#39;t help you with this one."}, {"owner": {"reputation": 65, "user_id": 5632120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d800113ac23f22d24781a11963292a2?s=128&d=identicon&r=PG&f=1", "display_name": "j.yang94", "link": "https://stackoverflow.com/users/5632120/j-yang94"}, "edited": false, "score": 1, "creation_date": 1537478693, "post_id": 52414614, "comment_id": 91810757, "body": "I&#39;m a little confused about the delimiter. This is my understanding When I run the Serial Monitor and input data,The Serial Monitor is designed to interpret ASCII Char so I enter a char and press send/enter. It is writes what I typed to the Arduino. The read function then reads the 8bit ASCII I sent, and writes it into the array and then runs the rest of the code.  and then prints the DEC of the char 1. Pressing the send/enter does nothing to add to the array? My input is the 8 bit char that is sent, and it doesn&#39;t read the next byte until I enter something else and send it via the Serial?"}, {"owner": {"reputation": 65, "user_id": 5632120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d800113ac23f22d24781a11963292a2?s=128&d=identicon&r=PG&f=1", "display_name": "j.yang94", "link": "https://stackoverflow.com/users/5632120/j-yang94"}, "edited": false, "score": 1, "creation_date": 1537478788, "post_id": 52414614, "comment_id": 91810792, "body": "So If I enter A [SEND] A [SEND]  It&#39;s really only reading &#39;A&#39; &#39;A&#39; and not &#39;A&#39; &#39;/0&#39; &#39;A&#39; &#39;/0&#39;?"}], "tags": [], "owner": {"reputation": 196, "user_id": 7517688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/702ed33e853d743c00538347959ab018?s=128&d=identicon&r=PG", "display_name": "klanmiko", "link": "https://stackoverflow.com/users/7517688/klanmiko"}, "is_accepted": true, "score": 2, "last_activity_date": 1537393628, "creation_date": 1537393628, "answer_id": 52414614, "question_id": 52414408, "link": "https://stackoverflow.com/questions/52414408/how-exactly-does-serial-port-write-actually-write-the-data-from-the-buffer/52414614#52414614", "title": "How exactly does Serial port write actually write the data from the buffer?", "body": "<ol>\n<li><p>Serial ports are usually buffered, but the Microsoft documentation leads me to believe it writes the entire buffer all at once to the wire, as it can throw a timeout exception. However, if you write 1000 bytes from the windows at a time, you are not guaranteed to read the same number of bytes in each loop on the arduino.</p></li>\n<li><p>No delimiter between individual bytes. The comma that separates array bytes is really only the syntax of your programming language, ie. it only exists in your code file. Bytes are always laid out sequentially in memory.</p></li>\n<li><p>Not unless you cast a byte array to a string value. <a href=\"https://stackoverflow.com/questions/11654562/how-convert-byte-array-to-string\">How convert byte array to string</a></p></li>\n<li><p>try port.Write( &amp;sendByte[x], 0, 1 );</p></li>\n</ol>\n"}], "owner": {"reputation": 65, "user_id": 5632120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d800113ac23f22d24781a11963292a2?s=128&d=identicon&r=PG&f=1", "display_name": "j.yang94", "link": "https://stackoverflow.com/users/5632120/j-yang94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 987, "favorite_count": 0, "accepted_answer_id": 52414614, "answer_count": 1, "score": 0, "last_activity_date": 1537448009, "creation_date": 1537392356, "last_edit_date": 1592644375, "question_id": 52414408, "link": "https://stackoverflow.com/questions/52414408/how-exactly-does-serial-port-write-actually-write-the-data-from-the-buffer", "title": "How exactly does Serial port write actually write the data from the buffer?", "body": "<p>So I'm using a Visual Studios Windows form to create a GUI in order to send data to an Arduino. I've been testing how to receive data on the Arduino side, and I can't seem to find an explanation on how the data is being sent. I've been using <code>port.Write()</code> to send the buffer.</p>\n<p><code>port.Write</code> <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.io.ports.serialport.write?view=netframework-4.7.2#System_IO_Ports_SerialPort_Write_System_Byte___System_Int32_System_Int32_\" rel=\"nofollow noreferrer\">Information from the Microsoft page</a></p>\n<p>The Arduino Serial Monitor reads ASCII Characters but since I'm using the GUI to communicate to the Arduino I'm not exactly sure how the data is being transmitted. In the Arduino Serial Monitor, I enter the data and press enter. This means if I input all my data and press enter, it's reading all the data as 1 byte. By entering the the data individually followed by enter it's a byte being read and the terminated by a newline.</p>\n<ol>\n<li><p>How exactly is the data being transferred? From the MS page since it says that it &quot;writes a specified number of bytes to the serial port using data from a buffer&quot;, I'm assuming it sends all the bytes at the same time and not individually.</p>\n<p>i.e If I send the data as <code>port.Write(new byte[] { b0, b1, b2, b3, b4, b5, b6, b7}, 0, 8);</code> is it basically sending all 8 bytes at once, or is it sending each element individually,if so what is the termination between bytes? I would assume it's the first since it asks for the number of bytes to write(count) so its sending 8 bytes from the array.</p>\n</li>\n<li><p>What terminates between bytes during transmission? The comma separates the array data but in transmission, does it even send the commas to terminate or is it just a stream of data?</p>\n<p>ie. In my Serial Monitor with the code runs, I enter each byte individually, followed by the newline character. The Arduino then reads the byte until it encounters the newline character</p>\n</li>\n<li><p>On the Arduino in C++ you can use Serial.print or Serial.println to have it automatically apply a new line. On the MS page, WriteLine method only writes a string and doesn't have any overloads, so I assume that means there's no way to use byte with this command?</p>\n</li>\n<li><p>If I try to use a for loop to print an individual array, it says cannot convert from <code>byte</code> to <code>char[]</code>. Why is it saying it's a char array when I defined it as a byte array?\nI was previously using the //<code>port.Write(sendbyte, 0, 8);</code> to send the whole array and was getting some of the data.</p>\n</li>\n</ol>\n<p>Code to send from Windows Form GUI:</p>\n<pre><code>//bytes declared and data stored earlier\nbyte[] sendbyte = new byte[] { b1, b2, b3, b4, b5, b6, b7, b8};\n            \nport = new SerialPort(&quot;COM3&quot;, 9600, Parity.None, 8, StopBits.One);\nport.Open();\n//port.Write(sendbyte, 0, 8);\n\nport.Write(new byte[] { b1, b2, b3, b4, b5, b6, b7, b8}, 0, 8);\n/*for( int x = 0; x &lt;=7; x ++)\n{\n    port.Write( sendbyte[x], 0, 1);\n} \n*/\nport.Close();\n</code></pre>\n<p>Code to read the incoming bytes</p>\n<pre><code>void recvBytesWithStartEndMarkers() {\n    static boolean recvInProgress = false;\n    static byte ndx = 0;\n    byte startMarker = 42;\n    byte endMarker = 24;\n    byte rb;\n    byte comp;\n\n    while (Serial.available() &gt; 0 &amp;&amp; newData == false) \n    {\n        rb = Serial.read();\n        if (recvInProgress == true) \n        {\n            if (rb != endMarker)\n            {\n                receivedBytes[ndx] = rb;\n                ndx++;\n                if (ndx &gt;= numBytes) \n                {\n                    ndx = numBytes - 1;\n                }\n            }\n            else \n            {\n                receivedBytes[ndx] = ','; // terminate the string\n                recvInProgress = false;\n                numReceived = ndx;  // save the number for use when printing\n                ndx = 0;\n                newData = true;\n            }\n        }\n        else if (rb == startMarker) \n        {\n            recvInProgress = true;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["python", "c++", "python-3.x", "numpy", "boost"], "comments": [{"owner": {"reputation": 640, "user_id": 3793674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62a5746c9da4b2293984258875ce00e1?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/3793674/chrisd"}, "edited": false, "score": 1, "creation_date": 1537394479, "post_id": 52414348, "comment_id": 91773252, "body": "Numpy routines are built into a separate library e.g. <code>libboost_numpy.so</code>. Check if that has actually been built, i believe it&#39;s built automatically if it (and the development headers etc) are installed in your python environment."}, {"owner": {"reputation": 643, "user_id": 6833140, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10153860199292562/picture?type=large", "display_name": "Lucas", "link": "https://stackoverflow.com/users/6833140/lucas"}, "reply_to_user": {"reputation": 640, "user_id": 3793674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62a5746c9da4b2293984258875ce00e1?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/3793674/chrisd"}, "edited": false, "score": 0, "creation_date": 1537396600, "post_id": 52414348, "comment_id": 91773826, "body": "Do you know what headers are supposed to be present? No libboost_numpy.so has been built in my case, and I didn\u2019t find any option or documentation in b2."}], "answers": [{"tags": [], "owner": {"reputation": 643, "user_id": 6833140, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10153860199292562/picture?type=large", "display_name": "Lucas", "link": "https://stackoverflow.com/users/6833140/lucas"}, "is_accepted": true, "score": 2, "last_activity_date": 1537422757, "creation_date": 1537422757, "answer_id": 52418440, "question_id": 52414348, "link": "https://stackoverflow.com/questions/52414348/boost-python-numpy-undefined-reference-to-initialize/52418440#52418440", "title": "Boost Python Numpy - Undefined reference to initialize", "body": "<p>The solution was to install the <code>python3-numpy</code> package first,\notherwise <code>libboost_numpy.so</code> does not get generated.</p>\n\n<p>End of the story!</p>\n"}], "owner": {"reputation": 643, "user_id": 6833140, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10153860199292562/picture?type=large", "display_name": "Lucas", "link": "https://stackoverflow.com/users/6833140/lucas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 780, "favorite_count": 0, "accepted_answer_id": 52418440, "answer_count": 1, "score": 1, "last_activity_date": 1537422757, "creation_date": 1537391965, "last_edit_date": 1537392576, "question_id": 52414348, "link": "https://stackoverflow.com/questions/52414348/boost-python-numpy-undefined-reference-to-initialize", "title": "Boost Python Numpy - Undefined reference to initialize", "body": "<p>I am having problems when linking the following code:</p>\n\n<pre><code>#include &lt;boost/python.hpp&gt;\n#include &lt;boost/python/numpy.hpp&gt;\n\nBOOST_PYTHON_MODULE (MyLibrary)\n{\n\n    Py_Initialize() ;\n    boost::python::numpy::initialize() ;\n\n    ...\n\n}\n</code></pre>\n\n<p>which returns:</p>\n\n<pre><code>undefined reference to `boost::python::numpy::initialize(bool)'\n</code></pre>\n\n<p>I am using Boost 1.68 with Python 3.6, compiled as follows:</p>\n\n<pre><code>./bootstrap.sh --with-python=/usr/bin/python3 --with-python-version=3.6 --with-python-root=/usr/lib/python3.6\n./b2 --with-python link=shared install\n</code></pre>\n\n<p>And I am linking using:</p>\n\n<pre><code>/usr/bin/c++ -shared\n-o MyLibrary.so\nMyLibrary.cpp.o\n-L/usr/local/lib\n-lpython3.6m\n/usr/local/lib/libboost_python36.so\n</code></pre>\n\n<p>Any idea...?</p>\n"}, {"tags": ["c++", "com", "visual-studio-2017", "iunknown"], "comments": [{"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 1, "creation_date": 1537392129, "post_id": 52414342, "comment_id": 91772477, "body": "The build log command line output is usually helpful, and often includes a list of useful list of footnotes when an error is encountered (in the Output window with Build selected, not the Error List)"}], "answers": [{"comments": [{"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1537392730, "post_id": 52414390, "comment_id": 91772675, "body": "Also, familiarise yourself with the <code>override</code> keyword and use it in your derived class. That will catch any typos."}], "tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": true, "score": 1, "last_activity_date": 1537392260, "creation_date": 1537392260, "answer_id": 52414390, "question_id": 52414342, "link": "https://stackoverflow.com/questions/52414342/how-to-know-which-method-is-not-implemented-for-c2259-vs-2017-error/52414390#52414390", "title": "How to know which method is not implemented for C2259 VS 2017 error?", "body": "<p>Look in the output window (View->Output)rather than the error list and any unimplemented members will be part of the diagnostic.</p>\n\n<p>This works so long as you have the setting in Tools->Options, Projects and Solutions->Build and Run for MSBuild verbosity set to at least 'Minimal', I'm not sure about 'Quiet'.</p>\n"}], "owner": {"reputation": 725, "user_id": 1135237, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/22b63d609b1cbbefc2720bf906697157?s=128&d=identicon&r=PG", "display_name": "qqqqq", "link": "https://stackoverflow.com/users/1135237/qqqqq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 52414390, "answer_count": 1, "score": -1, "last_activity_date": 1537392354, "creation_date": 1537391924, "question_id": 52414342, "link": "https://stackoverflow.com/questions/52414342/how-to-know-which-method-is-not-implemented-for-c2259-vs-2017-error", "title": "How to know which method is not implemented for C2259 VS 2017 error?", "body": "<p>I am defining a new interface and a class that implements it. I have added my class(XXX) and interface(IXXX) in idl file (I generated two uuids). My interface has two simple methods. I have implemented them( files XXX.h and XXX.cpp). I included the following line in InprocServer.cpp. </p>\n\n<pre><code>UNKNOWN_OBJECT(XXX) \n</code></pre>\n\n<p>I am getting the following error:\nError   C2259   'XXX': cannot instantiate abstract class (compiling source file InprocServer.cpp)\nclicking on error takes me to the following line in </p>\n\n<pre><code>Unknown.h\n      try\n      {\n        **p = new T(pUnkOuter);  // refcount is already 1**\n        if (!p)\n          return E_OUTOFMEMORY;\n      } \n</code></pre>\n\n<p>How do I know which method is not implemented?</p>\n"}, {"tags": ["c#", "c++", "marshalling"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1537395016, "post_id": 52414217, "comment_id": 91773410, "body": "This code is almost impossible to use correctly in a C++ program, it doesn&#39;t get better when you pinvoke it.  Arrays are very primitive, you can get a pointer to it but you don&#39;t know how many elements it contains.  SizeParamIndex = 0 does not make sense, parameter 0 does not return the size.  The pinvoke marshaller choked on that one.  Fixing it will cause a crash when it tries to release the memory for the array.  Consider int CSharp_Get_data(const Matrix* obj, float* data, size_t maxdata), now the C++ code simply fills the array you pass."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1537395240, "post_id": 52414217, "comment_id": 91773477, "body": "<a href=\"https://docs.microsoft.com/en-us/dotnet/framework/interop/default-marshaling-for-arrays\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/dotnet/framework/interop/&hellip;</a>"}, {"owner": {"reputation": 30828, "user_id": 239916, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/950ab2797f3012eeed28559fcdde8e1f?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Eding", "link": "https://stackoverflow.com/users/239916/thomas-eding"}, "edited": false, "score": 0, "creation_date": 1537395914, "post_id": 52414217, "comment_id": 91773665, "body": "The OP linked the same URL in his question explaining that it doesn&#39;t apply to his use case..."}, {"owner": {"reputation": 2903, "user_id": 2105497, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/053b0a25336ff63cdaccec0316ed8b84?s=128&d=identicon&r=PG", "display_name": "Sir Digby Chicken Caesar", "link": "https://stackoverflow.com/users/2105497/sir-digby-chicken-caesar"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1537396439, "post_id": 52414217, "comment_id": 91773787, "body": "@HansPassant It does seem I was using SizeParamIndex in an incorrect manner so I&#39;ll remove that from the original post. However, the alternative you suggested still won&#39;t work as underlying memory for the <code>data</code> member in C# will be different than the  C++ object (i.e. still a copy, so if a user modifies <code>data[0]</code> in the C# object it will not be reflected in the C++ object&#39;s <code>data[0]</code> element)."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1537396697, "post_id": 52414217, "comment_id": 91773845, "body": "Sure, the C++ array is not anything like a C# array, so copying is required.  If you want to live dangerously then that is easy to do, simply declare the return type as <code>float*</code> in the pinvoke declaration.  The <code>unsafe</code> keyword is required, it is."}, {"owner": {"reputation": 2903, "user_id": 2105497, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/053b0a25336ff63cdaccec0316ed8b84?s=128&d=identicon&r=PG", "display_name": "Sir Digby Chicken Caesar", "link": "https://stackoverflow.com/users/2105497/sir-digby-chicken-caesar"}, "edited": false, "score": 0, "creation_date": 1537397176, "post_id": 52414217, "comment_id": 91773985, "body": "Well, I know for a fact that you can directly marshal c++ arrays (of primitive types) to C# as I am doing it  in other structures(where I use <code>[StructLayout(LayoutKind.Sequential)]</code>). As the marshaller can expose the C++ array memory as a c# array in those cases, I assume it can also do it for memory returned from a function. Unless what I&#39;m doing with <code>[StructLayout(LayoutKind.Sequential)]</code> is non-standard and just happens to work"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1537397786, "post_id": 52414217, "comment_id": 91774132, "body": "The data flow is important, C# to C++ is easy, but C++ to C# is not.  C++ already assumes that arrays are primitive and you can corrupt memory as you please.  Do be sure to read the msdn article I linked."}, {"owner": {"reputation": 2903, "user_id": 2105497, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/053b0a25336ff63cdaccec0316ed8b84?s=128&d=identicon&r=PG", "display_name": "Sir Digby Chicken Caesar", "link": "https://stackoverflow.com/users/2105497/sir-digby-chicken-caesar"}, "edited": false, "score": 0, "creation_date": 1537398002, "post_id": 52414217, "comment_id": 91774176, "body": "As another user commented, I did read the link as its the <i>exact</i> article I posted in the prompt. Nothing in that article states you can&#39;t directly marshall arrays of primitive types."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1537415701, "post_id": 52414217, "comment_id": 91777808, "body": "@SirDigbyChickenCaesar: p/invoke is making a lot more copies than you think."}], "answers": [{"comments": [{"owner": {"reputation": 2903, "user_id": 2105497, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/053b0a25336ff63cdaccec0316ed8b84?s=128&d=identicon&r=PG", "display_name": "Sir Digby Chicken Caesar", "link": "https://stackoverflow.com/users/2105497/sir-digby-chicken-caesar"}, "edited": false, "score": 0, "creation_date": 1537462216, "post_id": 52417394, "comment_id": 91803148, "body": "Very interesting, this seems exactly like what I need! Sadly, I can&#39;t use C# 7+ but if no one comes a long and posts a more generic solution I will mark this answer as accepted."}], "tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": true, "score": 2, "last_activity_date": 1537416079, "creation_date": 1537416079, "answer_id": 52417394, "question_id": 52414217, "link": "https://stackoverflow.com/questions/52414217/marshalling-a-c-float-array-member-to-c-directly-without-copying/52417394#52417394", "title": "Marshalling a C++ float array member to c# directly without copying", "body": "<p>You can't get a <code>float[]</code> unless .NET allocates the memory.  That's true of <code>StructLayout(Sequential)</code>, too -- fixed-size buffers such as <code>float[16]</code> are not compatible with <code>float[]</code>.</p>\n\n<p>What you can do, though, if you want convenience and efficiency more than you want <code>float[]</code>, is to use the new zero-copy buffering types.  You can construct a <code>System.Span&lt;float&gt;</code> from a pointer to the first element plus the number of elements, and subscripting that span will give you direct access to the memory.  Some refactoring will need to be done, but since <code>Span&lt;T&gt;</code> can access .NET arrays equally well, once you rewrite your code to use <code>Span</code>, it can live in both worlds (C# and C++-allocated data).</p>\n"}], "owner": {"reputation": 2903, "user_id": 2105497, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/053b0a25336ff63cdaccec0316ed8b84?s=128&d=identicon&r=PG", "display_name": "Sir Digby Chicken Caesar", "link": "https://stackoverflow.com/users/2105497/sir-digby-chicken-caesar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 1, "accepted_answer_id": 52417394, "answer_count": 1, "score": 3, "last_activity_date": 1537416079, "creation_date": 1537391162, "last_edit_date": 1537396460, "question_id": 52414217, "link": "https://stackoverflow.com/questions/52414217/marshalling-a-c-float-array-member-to-c-directly-without-copying", "title": "Marshalling a C++ float array member to c# directly without copying", "body": "<p>I have a matrix class which contains a fixed size float array that I want to expose directly in the C# wrapper class:</p>\n\n<pre><code>class Matrix\n{\npublic:\n    float data[16];\n    ...\n};\n</code></pre>\n\n<p>Normally, when wrapping this structure in C# I would define the wrapped type as a POD struct that would utilize <code>[StructLayout(LayoutKind.Sequential)]</code> and would allow me to directly marshall the class to and from C++ / C#. However, the c++ class exposes other types (via members or functions) which can't be marshalled in this way so I instead have to use a PIMPL mechanism where my C# class contains an opaque pointer (IntPtr) to the underlying C++ structure. However, I would still like to <strong>directly</strong> expose the underlying <code>data</code> member of the c++ structure to the C# object. By directly, I mean that modifications to the elements of <code>data</code> in C# will be directly mirrored in the underlying C++ structure (i.e. the C# member can not be a copy of the C++ member). My idea was to expose the <code>data</code> member in C# like this:</p>\n\n<pre><code>public class Matrix\n{\n    protected HandleRef cptr; // opaque reference to equivalent C++ instance\n    public float [] data\n    {\n        get\n        {\n            return Get_data(cptr);\n        }\n    }\n\n    [DllImport(MY_CPP_DLL, EntryPoint = \"CSharp_Get_data\", CharSet = CHARSET)]\n    [return: MarshalAs(UnmanagedType.LPArray, SizeConst = 16, ArraySubType = UnmanagedType.R4)]\n    private static extern float [] Get_Data(HandleRef in_object);\n};\n</code></pre>\n\n<p>Where my C++ dll contains the function <code>CSharp_Get_data</code> which looks like this:</p>\n\n<pre><code>DLLEXPORT float * STDCALL CSharp_Get_data(Matrix *obj)\n{\n    return obj-&gt;data;\n}\n</code></pre>\n\n<p>This compiles fine in both C++ and C#, but when I try and do something like this in c#:</p>\n\n<pre><code>Matrix asdf = new Matrix();\nasdf.data[0] = 2.0f;\n</code></pre>\n\n<p>I receive a System.Runtime.InteropServices.MarshalDirectiveException which states <code>Additional information: Cannot marshal 'return value': Invalid managed/unmanaged type combination.</code></p>\n\n<p>Is there a way I can use this approach but not encounter this error? I know this is a pretty odd use case but I feel as if the approach does not violate any of the marshalling standards described by MS here: <a href=\"https://docs.microsoft.com/en-us/dotnet/framework/interop/default-marshaling-for-arrays\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/dotnet/framework/interop/default-marshaling-for-arrays</a>.</p>\n\n<p>Thanks for any help.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1537389229, "post_id": 52413728, "comment_id": 91771347, "body": "Forget about your linked list template. Start by fixing <code>Node</code>&#39;s copy constructor. It&#39;s broken. Before even getting around to the main linked list structure, you need to make sure that your <code>Node</code> template works correctly, otherwise it&#39;s a waste of time. You&#39;re not going to accomplish much with the approach of &quot;write a massive pile of code and only then try to make it work&quot;. Professional C++ developers don&#39;t write code like that. They write a few lines of code, or a small part of a class first. Test it. Makes sure it works. Then write more code. You should fix your <code>Node</code>, first."}, {"owner": {"reputation": 2631, "user_id": 7551257, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/cb65191d421d20322e2cc7b64daa8531?s=128&d=identicon&r=PG&f=1", "display_name": "Melissa Stewart", "link": "https://stackoverflow.com/users/7551257/melissa-stewart"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1537389908, "post_id": 52413728, "comment_id": 91771635, "body": "@SamVarshavchik I&#39;ve edited the code to provide a slightly better implementation of the Node. The code compiles in my system, but as I said I&#39;m new to C++ and not sure how to test the copy constructor and the assignment operator for the node and linked_list class. A little help here might get me going in the right direction."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1537390649, "post_id": 52413728, "comment_id": 91771942, "body": "Just use a <code>std::vector</code> already. Or a <code>std::list</code> or <code>std::forward_list</code> if you <i>really have to</i> (and don&#39;t care about the crappy performance of lists on modern computers). Don&#39;t reinvent the wheel."}, {"owner": {"reputation": 2631, "user_id": 7551257, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/cb65191d421d20322e2cc7b64daa8531?s=128&d=identicon&r=PG&f=1", "display_name": "Melissa Stewart", "link": "https://stackoverflow.com/users/7551257/melissa-stewart"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1537390951, "post_id": 52413728, "comment_id": 91772046, "body": "@JesperJuhl learning data structures in a language isn&#39;t actually reinventing the wheel, but yet something people new to a language do everyday. A constructive help might be more useful here."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1537390992, "post_id": 52413728, "comment_id": 91772063, "body": "The copy constructor still looks wrong. A typical copy constructor just copies a single object. This one also allocates its <code>next</code> pointer, for some reason, and assigns it. What if this is the last node in the singly linked list. Its <code>next</code> pointer will be null, Hello null pointer dereference, and an immediate crash! I think the best course of action here is to step back, take a blank sheet of paper, and write down a clear plan of action, specifying what each class, and each class method should be doing, and how it fits all together, before attempting to write even one more line of code."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1537391142, "post_id": 52413728, "comment_id": 91772126, "body": "<i>&quot;not sure how to test the copy constructor and the assignment operator for the node&quot;</i> You could start with something like this: <a href=\"https://wandbox.org/permlink/ChyPpIggt4dPHH8N\" rel=\"nofollow noreferrer\">wandbox.org/permlink/ChyPpIggt4dPHH8N</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1537391265, "post_id": 52413728, "comment_id": 91772173, "body": "@Melissa Stewart - and I <i>might</i> provide more in an actual answer (or not), but the above was just a <i>comment</i>."}], "answers": [{"tags": [], "owner": {"reputation": 2808, "user_id": 779446, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0b7824b872e7c61d94b262cced5f5da4?s=128&d=identicon&r=PG", "display_name": "opetroch", "link": "https://stackoverflow.com/users/779446/opetroch"}, "is_accepted": false, "score": 2, "last_activity_date": 1537397694, "last_edit_date": 1537397694, "creation_date": 1537396747, "answer_id": 52415092, "question_id": 52413728, "link": "https://stackoverflow.com/questions/52413728/singlylinkedlist-implementation-with-rule-of-3/52415092#52415092", "title": "SinglyLinkedList implementation with rule of 3", "body": "<p>One issue that introduces complexity is that it is not well defined what the copy constructor of a node should do? Should the <code>next</code> field of the copy point to the next of the original, or it should create a copy of the next and point to that? The former is inadequate and error-prone, the latter would recursively create a copy of the whole list, one node at a time. This will work for lists of small size but will cause stack overflow for lists with many elements due to the depth of the recursive calls. </p>\n\n<p>So to keep things simple, I wouldn't bother with copy constructor of a node. </p>\n\n<pre><code>template &lt;typename T&gt;\nclass Node {\npublic:\n    T data;\n    Node* next = nullptr;\n\n    Node() = default;\n    Node(const Node&amp;) = delete; // since copying is not well defined, make it impossible to copy a node.\n};\n</code></pre>\n\n<p>Copying a list is a well defined operation, so implementing the copy constructor makes sense. A mistake with your current implementation is that you allocate a new node, only to leak it later (nothing keeps track of the newly allocated node p). What you need looks more like this:</p>\n\n<pre><code>template &lt;typename T&gt;\nSinglyLinkedList&lt;T&gt;::SinglyLinkedList(const SinglyLinkedList&lt;T&gt;&amp; source)\n    : head(nullptr)\n    , count(0)\n{\n    // deal with the trivial case of empty list\n    if (source.head == nullptr)\n        return;\n\n    // deal with the case where count &gt;= 1\n    head = new Node&lt;T&gt;;\n    head-&gt;data = source.head-&gt;data;\n    head-&gt;next = nullptr;\n    count = 1;\n\n    Node&lt;T&gt;* lastCopied = source.head;  // last node to be copied\n    Node&lt;T&gt;* lastAdded = head;         // last node to be added to the current list\n    while (lastCopied-&gt;next != nullptr)\n    {\n        // create new node\n        Node&lt;T&gt;* p = new Node&lt;T&gt;;\n        p-&gt;data = lastCopied-&gt;next-&gt;data;\n        p-&gt;next = nullptr;\n\n        // link the newly created node to the last of the current list\n        lastAdded-&gt;next = p;\n        lastAdded = p;\n\n        // advance lastCopied\n        lastCopied = lastCopied-&gt;next;\n        count++;\n    }\n}\n</code></pre>\n\n<p>Now regarding the assignment operator, luckily you can use the 'copy and swap' idiom that greatly simplifies things.</p>\n\n<pre><code>template &lt;typename T&gt;\nSinglyLinkedList&lt;T&gt;&amp; SinglyLinkedList&lt;T&gt;::operator =(SinglyLinkedList&lt;T&gt; source)  // note that you pass by value.\n{\n    std::swap(head, source.head);\n    std::swap(count, source.count);\n    return *this;\n}\n</code></pre>\n\n<p>My answer would become too long if I tried to explain the copy and swap technique. It is a clever trick to write exception safe code and avoid duplication (implements assignment by using the copy ctor) at the same time. It is worth reading about it <a href=\"https://stackoverflow.com/q/3279543/77944\">here</a>.</p>\n\n<p>Btw, the declaration of your class should look like this</p>\n\n<pre><code>template &lt;typename T&gt;\nclass SinglyLinkedList \n{\n\nprivate:\n    Node&lt;T&gt;* head = nullptr;\n    std::size_t count = 0;\n\npublic:\n    SinglyLinkedList(const SinglyLinkedList&amp; source);\n    SinglyLinkedList&amp; operator=(SinglyLinkedList source);\n    // other members here...\n};\n</code></pre>\n\n<p>PS. My code assumes you are using c++11 or a later standard.</p>\n"}, {"comments": [{"owner": {"reputation": 2808, "user_id": 779446, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0b7824b872e7c61d94b262cced5f5da4?s=128&d=identicon&r=PG", "display_name": "opetroch", "link": "https://stackoverflow.com/users/779446/opetroch"}, "edited": false, "score": 0, "creation_date": 1537399640, "post_id": 52415296, "comment_id": 91774495, "body": "Indeed your copy constructor is neat and more efficient. I didn&#39;t want to make things complex for the OP since she is new to c++ so I went for something naive but readable. Nice one anyway."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 2808, "user_id": 779446, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0b7824b872e7c61d94b262cced5f5da4?s=128&d=identicon&r=PG", "display_name": "opetroch", "link": "https://stackoverflow.com/users/779446/opetroch"}, "edited": false, "score": 0, "creation_date": 1537401441, "post_id": 52415296, "comment_id": 91774831, "body": "@opetroch Go with readable, you got that right. That&#39;s why I wnt through the recursive approach. It doesn&#39;t get easier than that. But if you hand the iterative version into a marker for an intro to data structures class and you probably get crapped on for copying. Which has me pitying the couple people in the class who know or figured out this trick already.  That said, once you work it out and start thinking in abstractions and indirection, the rest of the course gets a lot easier."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 1, "last_activity_date": 1537398382, "creation_date": 1537398382, "answer_id": 52415296, "question_id": 52413728, "link": "https://stackoverflow.com/questions/52413728/singlylinkedlist-implementation-with-rule-of-3/52415296#52415296", "title": "SinglyLinkedList implementation with rule of 3", "body": "<p>I don't like the direction this is headed. I'm going to explain how to do this approach right because it is an excellent lesson on recursion, but because it's recursion it can run the program out of Automatic storage (march off the end of the stack, most likely) with a sufficiently large list. Not cool.</p>\n\n<p>The logic:</p>\n\n<p>Copying a node copies the next node if there is one. This looks something like</p>\n\n<pre><code>template &lt;typename T&gt;\nNode&lt;T&gt;::Node(const Node&lt;T&gt;&amp; source) : data(source.data)\n{\n    if (source.next) // if there is a next, clone it\n    {\n        next = new Node&lt;T&gt;(*source.next);\n    }\n    else\n    {\n        next = nullptr;\n    }\n}\n</code></pre>\n\n<p>This reduces the linked list copy constructor to </p>\n\n<pre><code>template &lt;typename T&gt;\nSinglyLinkedList&lt;T&gt;::SinglyLinkedList(const SinglyLinkedList&amp; source){\n\n    head = new Node&lt;T&gt;(*source.head); //clone the head. Cloning the head will clone everything after\n    count = source.count;\n}\n</code></pre>\n\n<p>A helper function may, uh... help here to make the <code>Node</code> copy constructor a bit more idiomatic</p>\n\n<pre><code>template &lt;typename T&gt;\nNode&lt;T&gt; * initnext(const Node&lt;T&gt; &amp; source)\n{\n    if (source.next)\n    {\n        return new Node&lt;T&gt;(*source.next);\n    }\n    else\n    {\n        return nullptr;\n    }\n}\n\ntemplate &lt;typename T&gt;\nNode&lt;T&gt;::Node(const Node&lt;T&gt;&amp; source) : data(source.data),\n                         next(initnext(source))\n{\n}\n</code></pre>\n\n<p>but I don't think you gain much.</p>\n\n<p>So... I don't like the above. What would I do instead? Something a lot like opetroch's solution above, but different enough that I'll write this up.</p>\n\n<p>The node stays brutally stupid. As far as I'm concerned all a <code>Node</code> should ever know is how to store the payload and find other <code>Node</code>s. This means the linked list should do all of the heavy lifting.</p>\n\n<p>Concept 1: <code>head</code> is nothing but a next pointer. Once you abstract away its differences, unimportant here, you can use it exactly the same way you would <code>next</code>.</p>\n\n<p>Concept 2: If you only know where <code>next</code> points, you have to do a bunch of extra book-keeping to track the previous node to update it's next. But if you take advantage of the previous's <code>next</code> pointing to the current node, you can throw out even more code. By tracking the previous node's <code>next</code> you have all of the information you need.</p>\n\n<p>Concept 3: If you keep a pointer to the previous node's <code>next</code>, you can update that previous node's <code>next</code> any time you want by dereferencing it.</p>\n\n<pre><code>template &lt;typename T&gt;\nSinglyLinkedList&lt;T&gt;::SinglyLinkedList(const SinglyLinkedList&amp; obj)\n{\n    Node&lt;T&gt;* tocopy = obj.head;  \n    Node&lt;T&gt;** nextpp = &amp;head; // head is a next. We are now pointing to a pointer to next\n    while (tocopy) // keep looping until there is no next node to copy\n    {\n        *nextpp = new Node&lt;T&gt;(tocopy-&gt;data); // copy source and update destination's next\n        nextpp = &amp;(*nextpp)-&gt;next; // advance to point at the next of the node we just added\n        tocopy= tocopy-&gt;next; // get next node to copy\n    }\n    count = obj.count;\n}\n</code></pre>\n\n<p>Because this iterates rather than recurses it doesn't eat up Automatic storage (probably the stack) and can keep going until the cows come home.</p>\n\n<p>This logic can also be applied to <code>remove</code></p>\n\n<pre><code>template &lt;typename T&gt;\nvoid SinglyLinkedList&lt;T&gt;::remove(T item) {\n    Node&lt;T&gt;** temp = &amp;head; //head is nothing but a next pointer.\n                            // by pointing to where the next is, we don't\n                            // need to track a previous or have special handling\n                            // for the head node\n    while (*temp){ // because we now have a pointer to a pointer, we need an\n                   // extra dereference\n        if ((*temp)-&gt;data == item){\n            Node&lt;T&gt;* removable = *temp;\n            *temp = (*temp)-&gt;next;\n            delete(removable);\n            count -= 1;\n            return; // no need for any special magic. Just get out.\n        } else{\n            temp = &amp;(*temp)-&gt;next; // update the pointer to the next\n        }\n    }\n    // if we got here the node was not found.\n    throw std::invalid_argument(\"item not present in list\");\n}\n</code></pre>\n\n<p>And following through on <code>head</code> is just a <code>next</code>, we can also gut the destructor:</p>\n\n<pre><code>template &lt;typename T&gt;\nSinglyLinkedList&lt;T&gt;::~SinglyLinkedList() {\n    while(head){ // if head null, list empty\n        Node&lt;T&gt;* temp = head; // cache so we can delete\n        head = head-&gt;next; // move head\n        delete temp; //delete removed node\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 2631, "user_id": 7551257, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/cb65191d421d20322e2cc7b64daa8531?s=128&d=identicon&r=PG&f=1", "display_name": "Melissa Stewart", "link": "https://stackoverflow.com/users/7551257/melissa-stewart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 0, "accepted_answer_id": 52415296, "answer_count": 2, "score": 1, "last_activity_date": 1556445981, "creation_date": 1537388843, "last_edit_date": 1556445981, "question_id": 52413728, "link": "https://stackoverflow.com/questions/52413728/singlylinkedlist-implementation-with-rule-of-3", "title": "SinglyLinkedList implementation with rule of 3", "body": "<p>I'm new to C++ and have been trying to implement a Singly Linked List, that provides an implementation the destructor, copy constructor and assignment operator. I'm running into compilation issues when trying to implement the copy constructor and the assignment operator. </p>\n\n<p>Here's <strong>node.hpp</strong></p>\n\n<pre><code>#ifndef LINKED_LIST_NODE_HPP\n#define LINKED_LIST_NODE_HPP\n\ntemplate &lt;typename T&gt;\nclass Node{\npublic:\n    T data;\n    Node* next;\n    Node();\n    Node(T);\n    Node(const Node&amp;);\n    ~Node();\n\n};\n\ntemplate &lt;typename T&gt;\nNode&lt;T&gt;::Node(){}\n\ntemplate &lt;typename T&gt;\nNode&lt;T&gt;:: Node(const T data): data(data), next(nullptr){}\n\ntemplate &lt;typename T&gt;\nNode&lt;T&gt;::Node(const Node&lt;T&gt;&amp; source) : data(source.data),\n                         next(new Node)\n{\n  (*next) = *(source.next) ;\n}\n\ntemplate &lt;typename T&gt;\nNode&lt;T&gt;::~Node(){}\n\n\n#endif //LINKED_LIST_NODE_HPP\n</code></pre>\n\n<p>This is <strong>singly_linked_list.hpp</strong></p>\n\n<pre><code>#ifndef LINKED_LIST_SINGLYLINKEDLIST_HPP\n#define LINKED_LIST_SINGLYLINKEDLIST_HPP\n\n#include &lt;iostream&gt;\n#include \"node.hpp\"\n\ntemplate &lt;typename T&gt;\nclass SinglyLinkedList {\n\nprivate:\n    Node&lt;T&gt;* head;\n    std::size_t count;\n\npublic:\n    SinglyLinkedList();\n    SinglyLinkedList(const SinglyLinkedList&amp; source);\n    SinglyLinkedList&amp; operator=(const SinglyLinkedList&amp; source);\n    ~SinglyLinkedList();\n    void insert(T);\n    void remove(T);\n    bool isEmpty();\n    int length();\n    void print();\n\n};\n\ntemplate &lt;typename T&gt;\nSinglyLinkedList&lt;T&gt;::SinglyLinkedList() : head(nullptr), count(0){}\n\ntemplate &lt;typename T&gt;\ntemplate &lt;typename T&gt;\nSinglyLinkedList&lt;T&gt;::SinglyLinkedList(const SinglyLinkedList&amp; source){\n\n    Node&lt;T&gt;* curr = source.head;\n\n    while(curr != nullptr){\n        Node&lt;T&gt;* p = new Node&lt;T&gt;;\n        p-&gt;data = curr-&gt;data;\n        curr = curr-&gt;next;\n\n    }\n\n}\n\n//template &lt;typename T&gt;\n//SinglyLinkedList&lt;T&gt;::SinglyLinkedList&amp; operator=(const SinglyLinkedList&lt;T&gt;&amp; source){\n//    //not sure how to implment this.\n//}\n\ntemplate &lt;typename T&gt;\nSinglyLinkedList&lt;T&gt;::~SinglyLinkedList() {\n    if(!isEmpty()){\n        Node&lt;T&gt;* temp = head;\n        Node&lt;T&gt;* prev = nullptr;\n        while(temp-&gt;next != nullptr){\n            prev = temp;\n            temp = temp-&gt;next;\n            delete prev;\n        }\n        delete temp;\n    }\n}\n\ntemplate &lt;typename T&gt;\nbool SinglyLinkedList&lt;T&gt;::isEmpty() {\n    return head == nullptr;\n}\n\ntemplate &lt;typename T&gt;\nvoid SinglyLinkedList&lt;T&gt;::insert(T item) {\n    Node&lt;T&gt;* p = new Node&lt;T&gt;(item);\n    p-&gt;next = head;\n    head = p;\n    count += 1;\n\n}\n\ntemplate &lt;typename T&gt;\nvoid SinglyLinkedList&lt;T&gt;::remove(T item) {\n    bool present = false;\n    if (head-&gt;data == item){\n        Node&lt;T&gt;* temp = head;\n        head = head-&gt;next;\n        delete(temp);\n        count -= 1;\n        return;\n    }\n    Node&lt;T&gt;* temp = head;\n    while (temp-&gt;next != nullptr){\n        if (temp-&gt;next-&gt;data == item){\n            Node&lt;T&gt;* removable = temp-&gt;next;\n            temp-&gt;next = temp-&gt;next-&gt;next;\n            delete(removable);\n            present = true;\n            count -= 1;\n            break;\n        } else{\n            temp = temp-&gt;next;\n        }\n    }\n    if(!present){\n        throw std::invalid_argument(\"item not present in list\");\n    }\n}\n\ntemplate &lt;typename T&gt;\nint SinglyLinkedList&lt;T&gt;::length() {\n    return count;\n}\n\ntemplate &lt;typename T&gt;\nvoid SinglyLinkedList&lt;T&gt;::print() {\n    if(isEmpty()){\n        throw std::invalid_argument(\"Can't print an empty list!\");\n    }\n    Node&lt;T&gt;* temp = head;\n    while(temp != nullptr){\n        if(temp-&gt;next != nullptr){\n            std::cout&lt;&lt;temp-&gt;data;\n            std::cout&lt;&lt;\"-&gt;\";\n        }else{\n            std::cout&lt;&lt;temp-&gt;data;\n        }\n        temp = temp-&gt;next;\n    }\n    std::cout&lt;&lt;std::endl;\n\n}\n\n#endif //LINKED_LIST_SINGLYLINKEDLIST_HPP\n</code></pre>\n\n<p>I've commented out the copy constructor code to make this compile. What is the correct way of doing this? I'm just learning C++.</p>\n"}, {"tags": ["c++", "boost", "c++17", "clang++"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1537389109, "post_id": 52413643, "comment_id": 91771289, "body": "If you have a source file which is just <code>#include &lt;optional&gt;</code> with an empty main, does it compile?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1537389415, "post_id": 52413643, "comment_id": 91771423, "body": "I believe that Apple LLVM 9.1.0 simply doesn&#39;t properly support C++17, so you may just have to wait for them to do so, or else build a more recent clang yourself (unsure how to do this on apple computers)"}, {"owner": {"reputation": 409, "user_id": 5789637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpNau.jpg?s=128&g=1", "display_name": "Martin Cook", "link": "https://stackoverflow.com/users/5789637/martin-cook"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1537389533, "post_id": 52413643, "comment_id": 91771470, "body": "@Justin Indeed, <code>&lt;optional&gt;</code> also yields errors."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1537389767, "post_id": 52413643, "comment_id": 91771583, "body": "Apple&#39;s Xcode clang++ C++17 support is incomplete.  Stick with C++14, or maybe install <code>brew install llvm</code> to use a more current clang that has better C++17 support."}, {"owner": {"reputation": 409, "user_id": 5789637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpNau.jpg?s=128&g=1", "display_name": "Martin Cook", "link": "https://stackoverflow.com/users/5789637/martin-cook"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1537390006, "post_id": 52413643, "comment_id": 91771677, "body": "@Eljay Thanks... I think I&#39;ll have to stick with c++14. As much as I want to play with the latest and greatest, others also need to run my code, and probably won&#39;t appreciate needing to install a new compiler."}], "owner": {"reputation": 409, "user_id": 5789637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpNau.jpg?s=128&g=1", "display_name": "Martin Cook", "link": "https://stackoverflow.com/users/5789637/martin-cook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 478, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1537388348, "creation_date": 1537388348, "question_id": 52413643, "link": "https://stackoverflow.com/questions/52413643/why-does-boost-string-give-an-error-with-clang-and-c17", "title": "Why does boost string give an error with clang and c++17?", "body": "<p>How do I make c++17 work with <code>boost/algorithm/string.hpp</code> and clang?</p>\n\n<p>This program <code>test.cc</code>:</p>\n\n<pre><code>#include &lt;boost/algorithm/string.hpp&gt;\n#include &lt;iostream&gt;\n\nint main() {\n    std::cout &lt;&lt; \"hello\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>when compiled with <code>clang++ -std=c++17 test.cc</code>, gives this error: </p>\n\n<blockquote>\n  <p>In file included from test.cc:1:\n  In file included from\n  /usr/local/include/boost/algorithm/string.hpp:23: In file included\n  from /usr/local/include/boost/algorithm/string/split.hpp:16: In file\n  included from\n  /usr/local/include/boost/algorithm/string/iter_find.hpp:27: In file\n  included from\n  /usr/local/include/boost/algorithm/string/find_iterator.hpp:24: In\n  file included from\n  /usr/local/include/boost/algorithm/string/detail/find_iterator.hpp:18:\n  In file included from /usr/local/include/boost/function.hpp:30: In\n  file included from\n  /usr/local/include/boost/function/detail/prologue.hpp:17: In file\n  included from /usr/local/include/boost/function/function_base.hpp:21:\n  In file included from /usr/local/include/boost/type_index.hpp:29: In\n  file included from\n  /usr/local/include/boost/type_index/stl_type_index.hpp:43: In file\n  included from /usr/local/include/boost/container_hash/hash.hpp:110:\n  /Library/Developer/CommandLineTools/usr/include/c++/v1/optional:184:1:\n  error: unknown type name\n        '_LIBCPP_AVAILABILITY_THROW_BAD_OPTIONAL_ACCESS'\n  _LIBCPP_AVAILABILITY_THROW_BAD_OPTIONAL_ACCESS</p>\n</blockquote>\n\n<p>etc.</p>\n\n<p>I am running on Mac, with the latest <code>clang++</code> from <code>xcode-select --install</code>, and the latest boost version from homebrew.</p>\n\n<p>My boost version is 1.67, and <code>clang++</code> version is:</p>\n\n<blockquote>\n  <p>Apple LLVM version 9.1.0 (clang-902.0.39.2)</p>\n</blockquote>\n\n<p>If I change to <code>-std=c++14</code>, or if I take out <code>algorithm/string.hpp</code> and put in something else, like <code>boost/lambda/lambda.hpp</code> all is fine. <code>c++1z</code> gives the same error.</p>\n"}, {"tags": ["c++", "input", "io"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1537388172, "post_id": 52413556, "comment_id": 91770897, "body": "C and C++ have entirely different solutions here. Which one do you want?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1537388180, "post_id": 52413556, "comment_id": 91770900, "body": "What&#39;s wrong with writing a function to do it?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1537388430, "post_id": 52413556, "comment_id": 91770999, "body": "There are two such functions in C++, <code>getc</code> and <code>fgetc</code>. They are designed to read <code>char</code> input. There are no other standard functions that behave this way. It is a good little exercise to figure out why."}, {"owner": {"reputation": 1192, "user_id": 7023187, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/321015561587503/picture?type=large", "display_name": "Rares Dima", "link": "https://stackoverflow.com/users/7023187/rares-dima"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1537388723, "post_id": 52413556, "comment_id": 91771125, "body": "@tadman Umm... both please?"}, {"owner": {"reputation": 1192, "user_id": 7023187, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/321015561587503/picture?type=large", "display_name": "Rares Dima", "link": "https://stackoverflow.com/users/7023187/rares-dima"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1537388798, "post_id": 52413556, "comment_id": 91771146, "body": "@JesperJuhl nothing, I was simply asking about a way to do it with only the standard library because it is possible in other languages and I was curious if it is possible in C++ too :)"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1537388822, "post_id": 52413556, "comment_id": 91771163, "body": "C++ is not Python. One could certainly write the code that implements a function that takes <code>std::cin</code>, performs a formatted extraction on it, and returns the resulting <code>int</code> value, so you can write <code>std::cout &lt;&lt; i_would_like_an_int_please(std::cin) + 5 &lt;&lt; std::endl;</code>. Nothing stops you from doing this, but you will have to do it yourself."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1537388872, "post_id": 52413556, "comment_id": 91771182, "body": "Oh and also <code>getchar</code>, sorry. Three of them."}, {"owner": {"reputation": 1192, "user_id": 7023187, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/321015561587503/picture?type=large", "display_name": "Rares Dima", "link": "https://stackoverflow.com/users/7023187/rares-dima"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1537389027, "post_id": 52413556, "comment_id": 91771249, "body": "@n.m. Thanks! Not exactly what I wanted but close. I thought a bit about the why part. What came to mind is that obviously you cant return a character array, a <code>char[]</code> or <code>char*</code> as it would get deallocated but why not return a <code>std::string</code> or something similar?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1537389374, "post_id": 52413556, "comment_id": 91771405, "body": "@Rares Dima - Stackoverflow is not a forum for general discussion like that. It&#39;s a question/answer site for <i>specific</i> problems. Your question would fit better if you had actually <i>tried</i> to solve the problem and then asked about the <i>specific</i> problem you encountered with your code."}, {"owner": {"reputation": 1192, "user_id": 7023187, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/321015561587503/picture?type=large", "display_name": "Rares Dima", "link": "https://stackoverflow.com/users/7023187/rares-dima"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1537389858, "post_id": 52413556, "comment_id": 91771618, "body": "@JesperJuhl I did try and I have said so in the first line of my question. Research and my own knowledge of C++ led to the  more traditional ways of getting input that I have mentioned in my question. I have a very specific question and I have done my best to make it clear about the specific case I would like information about. What part of my question did you not consider specific? I would be happy to make edits."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1537390296, "post_id": 52413556, "comment_id": 91771806, "body": "@Rares Dima - Why is writing a function to read the input and return it not acceptable? The standard library does not provide what you seem to want, so you have to do some leg work yourself.  Note: I didn&#39;t downvote your question (quite the opposite actually), I just posted a comment. I would have liked to see a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of what you had tried so far and an explanation of why that is not good enough, is all. \ud83d\ude00"}, {"owner": {"reputation": 1192, "user_id": 7023187, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/321015561587503/picture?type=large", "display_name": "Rares Dima", "link": "https://stackoverflow.com/users/7023187/rares-dima"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1537391365, "post_id": 52413556, "comment_id": 91772202, "body": "@JesperJuhl acceptable or not is not the question here. Obviously you <i>can</i> write a function like that yourself or just stick to what the standard library offers and everything will be okay, but as I have answered to someone above when they asked the exact same question: I was simply asking about a way to do it with only the standard library because it is possible in other languages and I was curious if it is possible in C++ too because it is one of the languages I like quite a lot and I would like to know more about it :) This is purely an educational question about a specific functionality."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1537391598, "post_id": 52413556, "comment_id": 91772287, "body": "If the Standard Library does not provide the specific functionality you want, which it doesn&#39;t in this case, then the usual procedure is to <i>write a function</i>. Please consult <a href=\"https://en.cppreference.com/w/\" rel=\"nofollow noreferrer\">the documentation</a> whenever you have questions like this as all the options you have are listed there exhaustively. Any time you&#39;re working on non-trivial code you&#39;ll probably need to check the documentation as many functions have subtle caveats and limitations that you must keep in mind when using them."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1537392894, "post_id": 52413556, "comment_id": 91772724, "body": "Oh and of course I forgot <code>std::istream::get</code>. Another one to read a <code>char</code>, not inherited from C this time. That makes 4. You probably want to read their documentation <i>carefully</i>."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1537393383, "post_id": 52413556, "comment_id": 91772908, "body": "@tadman This question is not about a <i>procedure</i>, but about a <i>design</i>. It is blindingly obvious what to do if one wants such a function. The fact that the standard library doesn&#39;t provide one, despite its apparent usefulness, suggest that it may not be such a good idea."}], "answers": [{"tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": false, "score": 0, "last_activity_date": 1537395640, "creation_date": 1537395640, "answer_id": 52414938, "question_id": 52413556, "link": "https://stackoverflow.com/questions/52413556/c-how-to-get-user-input-using-an-expression/52414938#52414938", "title": "C++ how to get user input using an expression?", "body": "<p>This is hardly onerous.  What's wrong with something like this (if you like classic C api's)?  Declare it inline if you want to put it in a header file:</p>\n\n<pre><code>int get_int ()\n{\n    char buf [80];\n    fgets (buf, sizeof (buf), stdin);\n    return atoi (buf);\n}\n</code></pre>\n\n<p>You can do something similar using C++ api's (exercise for the reader).</p>\n"}], "owner": {"reputation": 1192, "user_id": 7023187, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/321015561587503/picture?type=large", "display_name": "Rares Dima", "link": "https://stackoverflow.com/users/7023187/rares-dima"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 458, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1537395640, "creation_date": 1537388027, "last_edit_date": 1537388212, "question_id": 52413556, "link": "https://stackoverflow.com/questions/52413556/c-how-to-get-user-input-using-an-expression", "title": "C++ how to get user input using an expression?", "body": "<p>Obviously this is not a question about how to use <code>cin</code>, <code>scanf</code> or <code>getline</code>. </p>\n\n<p>All of these methods of getting user inputs do not return something, they mutate a variable. </p>\n\n<p>What I want to do is to gave a way to get input and return it so the input getting can be embedded into an expression. </p>\n\n<p>I'm sorry if I'm not explaining this very well. But for example in Python you have the function <code>input()</code> which takes one line of text from stdin and returns it as a string so you could do:</p>\n\n<pre><code>print( int(input()) + 5 )\n</code></pre>\n\n<p>This takes the user input, returns it, then it is parsed into an int directly and processed, without the need for an extra variable. I want something of this sort in C++ too. </p>\n\n<p>Obviously I can create a function that does this, but I am asking about any way to do this using only the standard library.</p>\n"}, {"tags": ["c++", "class", "object", "linked-list", "reference"], "comments": [{"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1537386422, "post_id": 52413198, "comment_id": 91770140, "body": "That isn&#39;t all of your test code. There&#39;s nothing that creates <code>a</code> and <code>b</code>. Please consider providing a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 4, "creation_date": 1537386488, "post_id": 52413198, "comment_id": 91770176, "body": "You are not using references at all. And this <code>buddy = &amp;buddy2;</code> sets the pointer  to point to a local copy which disappears when the function exits."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1537386550, "post_id": 52413198, "comment_id": 91770201, "body": "and if the member pointer <code>buddy</code> is invalid, <code>getBuddyName()</code> will dereference a null pointer"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1537386693, "post_id": 52413198, "comment_id": 91770281, "body": "You really ought to use your constructors initialization list to initialize member variables rather than using the ctor body. The way you are doing it now is inefficient and also won&#39;t work for types that are not assignable (including <code>const</code> members of otherwise assignable types)."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1537387446, "post_id": 52413198, "comment_id": 91770623, "body": "Interesting follow-up question: If <code>a</code> is buddies with <code>b</code>, shouldn&#39;t <code>b</code> be buddies with <code>a</code> by definition? Can the code be modified to take care of that automatically? (Without infinite recursion)"}], "answers": [{"tags": [], "owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "is_accepted": true, "score": 0, "last_activity_date": 1537387321, "last_edit_date": 1537387321, "creation_date": 1537386684, "answer_id": 52413289, "question_id": 52413198, "link": "https://stackoverflow.com/questions/52413198/how-to-properly-return-data-from-an-object-through-a-command-in-another-object/52413289#52413289", "title": "How to properly return data from an object through a command in another object", "body": "<p>Try these fixes:</p>\n\n<pre><code>void setBuddy(Buddy&amp; buddy2) { // an actual reference, not a copy of the original\n    buddy = &amp;buddy2;\n}\nstring getBuddyName() {\n    return buddy ? buddy-&gt;getName() : string(\"\");\n}\n</code></pre>\n\n<p>The problem with <code>setBuddy</code> is that it stored the address of its parameter, a temporary object (copied when the function was called) that won't be valid after the function returns. And <code>getBuddyName</code> didn't check for a null <code>buddy</code> pointer before dereferencing it.</p>\n"}], "owner": {"reputation": 23, "user_id": 9183124, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tOu-jBWMMdA/AAAAAAAAAAI/AAAAAAAAAww/jEBYiTck7Yk/photo.jpg?sz=128", "display_name": "Gage Brush", "link": "https://stackoverflow.com/users/9183124/gage-brush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 52413289, "answer_count": 1, "score": -2, "last_activity_date": 1537387321, "creation_date": 1537386256, "question_id": 52413198, "link": "https://stackoverflow.com/questions/52413198/how-to-properly-return-data-from-an-object-through-a-command-in-another-object", "title": "How to properly return data from an object through a command in another object", "body": "<p>I'm practicing coding, and created a \"Buddy\" program where an object can have a name and a buddy which holds the address of another object called \"Buddies\".</p>\n\n<p>Here's my class:</p>\n\n<pre><code>    class Buddy {\npublic:\n    Buddy() {\n        name = \"NoName\";\n    }\n    Buddy(string newName) {\n        name = newName;\n    }\n    void setName(string newName) {\n        name = newName;\n    }\n    string getName() {\n        return name;\n    }\n    void setBuddy(Buddy buddy2) {\n        buddy = &amp;buddy2;\n    }\n    string getBuddyName() {\n        return buddy-&gt;getName();\n    }\nprivate:\n    string name;\n    Buddy *buddy = NULL;\n};\n</code></pre>\n\n<p>In my main file, I'm assigning Buddy \"a\" a buddy named \"b\":</p>\n\n<pre><code>a.setBuddy(b);\nb.setBuddy(a);\n</code></pre>\n\n<p>Then I want to cout the names of the individual objects through their assigned buddies, but I crash on this part. Here's the code:</p>\n\n<pre><code>cout &lt;&lt; \"A's Buddy: \" &lt;&lt; a.getBuddyName() &lt;&lt; endl;\ncout &lt;&lt; \"B's Buddy: \" &lt;&lt; b.getBuddyName() &lt;&lt; endl;\n</code></pre>\n\n<p>Shouldn't this work? I am passing reference properly, I thought. Could you help me spot any bugs?</p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1537386404, "post_id": 52413060, "comment_id": 91770129, "body": "Trying to impose your will on processes from the outside isn&#39;t very likely to work well. Cooperation is more likely to be effective. That said, what you describe doesn&#39;t sound much like the solution to any problem."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1537386467, "post_id": 52413060, "comment_id": 91770166, "body": "Why are you using multiple sub-processes instead of simply using multiple threads in a single process?  In any case, supending/resuming threads is a very bad design. Use <a href=\"https://docs.microsoft.com/en-us/windows/desktop/sync/about-synchronization\" rel=\"nofollow noreferrer\">synchronization objects</a> instead, such as <a href=\"https://docs.microsoft.com/en-us/windows/desktop/sync/event-objects\" rel=\"nofollow noreferrer\">Waitable Events</a>, etc."}, {"owner": {"reputation": 3139, "user_id": 2842896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/47c505a841930132ae7cf80e3f38a9f4?s=128&d=identicon&r=PG", "display_name": "tolgayilmaz", "link": "https://stackoverflow.com/users/2842896/tolgayilmaz"}, "edited": false, "score": 0, "creation_date": 1537387525, "post_id": 52413060, "comment_id": 91770660, "body": "I need processes because of their nature which threads does not serve like, own protected memory space etc."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1537387647, "post_id": 52413060, "comment_id": 91770699, "body": "<a href=\"https://en.cppreference.com/w/cpp/chrono/high_resolution_clock\" rel=\"nofollow noreferrer\">std::chrono::high_resolution_clock</a> may be of interest as far as the &quot;High precision time&quot; part goes.."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1537387966, "post_id": 52413060, "comment_id": 91770812, "body": "Switching between processes implies (at least) a context switch from the current process to the kernel, some work there, a context switch from the kernel back to user space of the new process - with all that implies in terms of setting up page tables for the new process, clearing caches, maybe paging things in from swap,  etc etc. It&#39;s a (relatively) expensive thing to do."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1537387981, "post_id": 52413060, "comment_id": 91770823, "body": "As you&#39;ve found out though, process synchronisation is very heavy. So perhaps you should reconsider the design because it really doesn&#39;t sound like a solution to any problem."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1537397644, "post_id": 52413060, "comment_id": 91774096, "body": "@David I&#39;m not sure that switching process is much heavier than switching thread actually, although I have to confess I&#39;ve never measured it.  Both take a few hundred microseconds, I believe, depending on the hardware of course."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1537432818, "post_id": 52413060, "comment_id": 91784922, "body": "This is an <a href=\"http://xyproblem.info\" rel=\"nofollow noreferrer\">XY Problem</a>. Please ask about the problem you are trying to solve, rather than your proposed solution. As was pointed out already, your proposed solution is not a solution to any problem."}], "answers": [{"comments": [{"owner": {"reputation": 3139, "user_id": 2842896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/47c505a841930132ae7cf80e3f38a9f4?s=128&d=identicon&r=PG", "display_name": "tolgayilmaz", "link": "https://stackoverflow.com/users/2842896/tolgayilmaz"}, "edited": false, "score": 1, "creation_date": 1537415573, "post_id": 52415204, "comment_id": 91777772, "body": "The problem with this approach is that the context switch I want to do is done only with the main process and only when a specified time finished, regardless of the sub processes finished their job or not(yeah an rtos like logic). However I will give it a try to make suitable for my approach."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 3139, "user_id": 2842896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/47c505a841930132ae7cf80e3f38a9f4?s=128&d=identicon&r=PG", "display_name": "tolgayilmaz", "link": "https://stackoverflow.com/users/2842896/tolgayilmaz"}, "edited": false, "score": 0, "creation_date": 1537566925, "post_id": 52415204, "comment_id": 91846309, "body": "Well, whatever logic you might want, in terms of scheduling, this is the the correct basic approach - i.e. having each dependent process waiting on a waitable object until it is called upon to do something.  Sleeping or spinning is not the way."}, {"owner": {"reputation": 3139, "user_id": 2842896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/47c505a841930132ae7cf80e3f38a9f4?s=128&d=identicon&r=PG", "display_name": "tolgayilmaz", "link": "https://stackoverflow.com/users/2842896/tolgayilmaz"}, "edited": false, "score": 0, "creation_date": 1537726496, "post_id": 52415204, "comment_id": 91879760, "body": "Ok I got taht. The problem resides before me is The msdn specifies \u201cThe handle must have the SYNCHRONIZE access right. For more information, see Standard Access Rights.\u201d where in the Code I should specify this flag. I couldn\u2019t Find That on Google ?"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 3139, "user_id": 2842896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/47c505a841930132ae7cf80e3f38a9f4?s=128&d=identicon&r=PG", "display_name": "tolgayilmaz", "link": "https://stackoverflow.com/users/2842896/tolgayilmaz"}, "edited": false, "score": 0, "creation_date": 1537801206, "post_id": 52415204, "comment_id": 91905704, "body": "I thought I covered that in my example.  Did I miss something?  SYNCHRONIZE access is needed to wait on the handle and you specify that when you call <code>OpenEvent</code>.  As far as I know, that&#39;s all you need to do."}, {"owner": {"reputation": 3139, "user_id": 2842896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/47c505a841930132ae7cf80e3f38a9f4?s=128&d=identicon&r=PG", "display_name": "tolgayilmaz", "link": "https://stackoverflow.com/users/2842896/tolgayilmaz"}, "edited": false, "score": 0, "creation_date": 1537889416, "post_id": 52415204, "comment_id": 91944208, "body": "WaitableTimers and objects need a parameter which is in milliseconds and very low resolution for me."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 3139, "user_id": 2842896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/47c505a841930132ae7cf80e3f38a9f4?s=128&d=identicon&r=PG", "display_name": "tolgayilmaz", "link": "https://stackoverflow.com/users/2842896/tolgayilmaz"}, "edited": false, "score": 0, "creation_date": 1537969741, "post_id": 52415204, "comment_id": 91978158, "body": "That shouldn&#39;t matter - it&#39;s just a timeout if the event isn&#39;t signalled.  If process A calls SetEvent then process B will be scheduled immediately.  You&#39;re making very heavy weather of this...  Can I have my 15 points back please?  The solution I posted is eminently workable."}], "tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": false, "score": 1, "last_activity_date": 1537801324, "last_edit_date": 1537801324, "creation_date": 1537397587, "answer_id": 52415204, "question_id": 52413060, "link": "https://stackoverflow.com/questions/52413060/high-precision-timed-operations-with-multiprocess-application-on-windows-c/52415204#52415204", "title": "High precision timed operations with multiprocess application on windows/c++", "body": "<p>As Remy says, you should be doing this with synchronisation objects - that's what they're for.  Let's suppose that process A executes first and wants to 'hand over' to process B at some point.  It can then do this:</p>\n\n<pre><code>SECURITY_ATTRIBUTES sa = { sizeof (SECURITY_ATTRIBUTES), NULL, TRUE };\nHANDLE hHandOffToA = CreateEventW (&amp;sa, TRUE, FALSE, L\"HandOffToA\");\nHANDLE hHandOffToB = CreateEventW (&amp;sa, TRUE, FALSE, L\"HandOffToB\");\n\n// Start process B\nCreateProcess (...);\n\nwhile (!quit)\n{\n    // Do work, and then:\n    SetEvent (hHandOffToB);\n    WaitForSingleObject (hHandOffToA, INFINITE);\n}\n\nCloseHandle (hHandOffToA);\nCloseHandle (hHandOffToB);\n</code></pre>\n\n<p>And process B can then do:</p>\n\n<pre><code>HANDLE hHandOffToA = OpenEventW (EVENT_MODIFY_STATE, FALSE, L\"HandoffToA\");\nHANDLE hHandOffToB = OpenEventW (SYNCHRONIZE, FALSE, L\"HandoffToB\");\n\nwhile (!quit)    \n{\n    WaitForSingleObject (hHandOffToB, INFINITE);\n    // Do work, and then:\n    SetEvent (hHandOffToA);\n}\n\nCloseHandle (hHandOffToA);\nCloseHandle (hHandOffToB);\n</code></pre>\n\n<p>You should, of course, include proper error checking and I've left it up to you to decide how process A should tell process B to shut down (I guess it could just kill it).  Remember also that event names are system-wide so choose them more carefully than I have done.</p>\n"}, {"tags": [], "owner": {"reputation": 3139, "user_id": 2842896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/47c505a841930132ae7cf80e3f38a9f4?s=128&d=identicon&r=PG", "display_name": "tolgayilmaz", "link": "https://stackoverflow.com/users/2842896/tolgayilmaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1538932218, "creation_date": 1538932218, "answer_id": 52690919, "question_id": 52413060, "link": "https://stackoverflow.com/questions/52413060/high-precision-timed-operations-with-multiprocess-application-on-windows-c/52690919#52690919", "title": "High precision timed operations with multiprocess application on windows/c++", "body": "<p>For very high precision one can use the funciton below:</p>\n\n<pre><code>void get_clock(LONGLONG* SYSTEM_TIME)\n{\n    static REAL64 multiplier = 1.0;\n    static BOOL alreadyCalculated = FALSE;\n\n    if (alreadyCalculated == FALSE)\n    {\n        LARGE_INTEGER frequency;\n        BOOL result = QueryPerformanceFrequency(&amp;frequency);\n        if (result == TRUE)\n        {\n            multiplier = 1000000000.0 / frequency.QuadPart;\n        }\n        else\n        {\n            DWORD error = GetLastError();\n        }\n        alreadyCalculated = TRUE;\n   }\n\n    LARGE_INTEGER time;\n    QueryPerformanceCounter(&amp;time);\n\n    *SYSTEM_TIME = static_cast&lt;SYSTEM_TIME_TYPE&gt;(time.QuadPart * multiplier);\n}\n</code></pre>\n\n<p>In my case sync objects didn't fit very well(however I have used them where time is not critical), instead I have redesigned my logic to put place holders where my thread need to take action and calculated the time using function above.</p>\n\n<p>But still not sure if higher priority task arrives how long does it take windows to take it into cpu and preempt running one.</p>\n"}], "owner": {"reputation": 3139, "user_id": 2842896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/47c505a841930132ae7cf80e3f38a9f4?s=128&d=identicon&r=PG", "display_name": "tolgayilmaz", "link": "https://stackoverflow.com/users/2842896/tolgayilmaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 1, "answer_count": 2, "score": -4, "last_activity_date": 1538932218, "creation_date": 1537385640, "last_edit_date": 1537891340, "question_id": 52413060, "link": "https://stackoverflow.com/questions/52413060/high-precision-timed-operations-with-multiprocess-application-on-windows-c", "title": "High precision timed operations with multiprocess application on windows/c++", "body": "<p>I have multiple processes(which are in different exe files generated by subprojects) created by my main program. </p>\n\n<p>What I want to do is running each process for about 1-2 milliseconds within every 40-50 milliseconds major frame. When I use suspend/resume thread to suspend one process(by suspending all threads it have, but each have only one.) and resuming next, only one switch context(suspend old and resume new) lasts about 60 milliseconds. Which is longer even my major frame. By the way I know that using Sleep is not advised within this manner since the only sleep/wake operation lasts 15-30 ms and I dont use any. </p>\n\n<p>If I change the priority of the running process to lower and next process to higher; is it guaranteed context switch to occur by windows within microseconds?\nor what should I consider to achieve an only microsecond sensitive process switch?\nAnd I wonder how long a simple Suspend/ResumeThread operation normally takes?</p>\n\n<p>Currently I can't use threads insted of processes since I need the memory isolation of a process and my processes may spawn and terminate their own threads. Does Waithandlers like syncronization methods give me the high precised time?</p>\n\n<p><strong>Edit</strong>: The proposed sync objcets are in the resolution maximum to milliseconds (Like waitable timers, multimedia timers etc. all get parameter as ms and gives you ms). I need to use QueryPerformanceCounter and other ways to achieve high resolution as I mentioned.</p>\n"}, {"tags": ["c++", "windows", "path", "mingw", "atom-editor"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1537386168, "post_id": 52413032, "comment_id": 91770011, "body": "Typing <code>gcc</code> (Note: use <code>g++</code> to compile C++ code) on the command line should spit out a message something like <i>fatal error: no input</i>. If you aren&#39;t getting an error, something is wrong very low down. type <code>gcc -v</code> this should spit out a nice long string of information about the compiler. If you get nothing here, you aren&#39;t getting the <code>gcc</code> you think you are, and I&#39;ll be smurfed if I know what you&#39;re getting instead."}, {"owner": {"reputation": 69, "user_id": 9583362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ccd93c538095fb8e3e04f8c88b024b8?s=128&d=identicon&r=PG&f=1", "display_name": "tiffanie", "link": "https://stackoverflow.com/users/9583362/tiffanie"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1537395204, "post_id": 52413032, "comment_id": 91773465, "body": "@user4581301 Typing gcc -v does the same as gcc, where nothing happens and there&#39;s just a blank space. Is this a problem reinstalling might help?"}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 9583362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ccd93c538095fb8e3e04f8c88b024b8?s=128&d=identicon&r=PG&f=1", "display_name": "tiffanie", "link": "https://stackoverflow.com/users/9583362/tiffanie"}, "edited": false, "score": 0, "creation_date": 1537498400, "post_id": 52429190, "comment_id": 91815132, "body": "I did what you said, but I don&#39;t know what I am seeing. What am I looking for in the output?"}, {"owner": {"reputation": 36869, "user_id": 102371, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/262d914b9ff3f5b7f599de600cf463a8?s=128&d=identicon&r=PG", "display_name": "John Weldon", "link": "https://stackoverflow.com/users/102371/john-weldon"}, "reply_to_user": {"reputation": 69, "user_id": 9583362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ccd93c538095fb8e3e04f8c88b024b8?s=128&d=identicon&r=PG&f=1", "display_name": "tiffanie", "link": "https://stackoverflow.com/users/9583362/tiffanie"}, "edited": false, "score": 0, "creation_date": 1537509714, "post_id": 52429190, "comment_id": 91817882, "body": "What is the output of <code>where gcc</code>?"}, {"owner": {"reputation": 69, "user_id": 9583362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ccd93c538095fb8e3e04f8c88b024b8?s=128&d=identicon&r=PG&f=1", "display_name": "tiffanie", "link": "https://stackoverflow.com/users/9583362/tiffanie"}, "edited": false, "score": 0, "creation_date": 1537574875, "post_id": 52429190, "comment_id": 91848015, "body": "C:\\MinGW\\bin\\gcc.exe. C:\\MinGW\\bin\\ is what I added to my PATH."}, {"owner": {"reputation": 36869, "user_id": 102371, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/262d914b9ff3f5b7f599de600cf463a8?s=128&d=identicon&r=PG", "display_name": "John Weldon", "link": "https://stackoverflow.com/users/102371/john-weldon"}, "reply_to_user": {"reputation": 69, "user_id": 9583362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ccd93c538095fb8e3e04f8c88b024b8?s=128&d=identicon&r=PG&f=1", "display_name": "tiffanie", "link": "https://stackoverflow.com/users/9583362/tiffanie"}, "edited": false, "score": 0, "creation_date": 1537575579, "post_id": 52429190, "comment_id": 91848156, "body": "Okay, (remember to be as specific as possible in your responses to help the person answering):  The next step is to run the sysinternal tool procmon.exe.  Try following these steps and see what you find: <a href=\"https://www.mztools.com/articles/2008/MZ2008024.aspx\" rel=\"nofollow noreferrer\">mztools.com/articles/2008/MZ2008024.aspx</a>"}, {"owner": {"reputation": 69, "user_id": 9583362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ccd93c538095fb8e3e04f8c88b024b8?s=128&d=identicon&r=PG&f=1", "display_name": "tiffanie", "link": "https://stackoverflow.com/users/9583362/tiffanie"}, "edited": false, "score": 0, "creation_date": 1537577896, "post_id": 52429190, "comment_id": 91848489, "body": "Sorry, I thought I was being specific. When wasn&#39;t I? I followed the instructions in that link last night, but, like I said, I do not know how to interpret the output. No errors are jumping out at me, but I&#39;ve never used this tool before, so maybe they&#39;re there and I just don&#39;t know what to look for. Thanks so much for your assistance!"}, {"owner": {"reputation": 36869, "user_id": 102371, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/262d914b9ff3f5b7f599de600cf463a8?s=128&d=identicon&r=PG", "display_name": "John Weldon", "link": "https://stackoverflow.com/users/102371/john-weldon"}, "reply_to_user": {"reputation": 69, "user_id": 9583362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ccd93c538095fb8e3e04f8c88b024b8?s=128&d=identicon&r=PG&f=1", "display_name": "tiffanie", "link": "https://stackoverflow.com/users/9583362/tiffanie"}, "edited": false, "score": 0, "creation_date": 1537579571, "post_id": 52429190, "comment_id": 91848674, "body": "No problem @tiffanie - you could be more specific by saying exactly what you tried and didn&#39;t work... I couldn&#39;t tell whether your first comment was a response to the <code>where gcc</code> suggestion, or the <code>sysinternals</code> suggestion.   If nothing is jumping out at you with the sysinternals tool then you&#39;ll probably need someone to review it with you who&#39;s familiar with debugging this.  I&#39;d look for errors loading files, or dlls, or messages about architecture etc."}], "tags": [], "owner": {"reputation": 36869, "user_id": 102371, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/262d914b9ff3f5b7f599de600cf463a8?s=128&d=identicon&r=PG", "display_name": "John Weldon", "link": "https://stackoverflow.com/users/102371/john-weldon"}, "is_accepted": false, "score": 1, "last_activity_date": 1537459810, "creation_date": 1537459810, "answer_id": 52429190, "question_id": 52413032, "link": "https://stackoverflow.com/questions/52413032/windows-cannot-find-mingw/52429190#52429190", "title": "Windows cannot find MinGW", "body": "<p>It sounds like your system is resolving <code>gcc</code> to a different executable than expected.</p>\n\n<p>From a cmd prompt, try <code>where gcc</code> and if the path doesn't look right, then that is a good place to start.  If it does look right, then I suggest using a tool like sysinternals procmon.exe.  Set the filter to just <code>gcc.exe</code> and then run the <code>gcc</code> command from the cmd prompt and see what the procmon output is.</p>\n"}], "owner": {"reputation": 69, "user_id": 9583362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ccd93c538095fb8e3e04f8c88b024b8?s=128&d=identicon&r=PG&f=1", "display_name": "tiffanie", "link": "https://stackoverflow.com/users/9583362/tiffanie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1083, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1537459810, "creation_date": 1537385497, "question_id": 52413032, "link": "https://stackoverflow.com/questions/52413032/windows-cannot-find-mingw", "title": "Windows cannot find MinGW", "body": "<p>I am trying to install MinGW and add it to my PATH on my Windows 10 computer (I need to be able to compile C++ in Atom, in case this is relevant to the answer). As far as I can tell, it is successfully installed and added to my PATH. I know it is added because when I change it to make it wrong, I get an error in Atom. Also, every tutorial I can find on adding it to my PATH says the things that I did. In cmd, when I type gcc, nothing happens. No output, no error message. Only a space, like hitting return twice in a text editor. However, in Atom, when I try to compile and run, nothing happens. No output or error message. <a href=\"https://i.stack.imgur.com/pMqf9.png\" rel=\"nofollow noreferrer\">compile/run result</a> The picture is of what happens when I try to compile and run.</p>\n\n<p>Can someone tell what I am doing wrong? Thanks!</p>\n\n<p>Note: I am not a beginner, so my lack of output is not user error. Also, I can run the same program without a problem on a Mac.</p>\n"}, {"tags": ["c++", "c++17", "structured-bindings"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1537385684, "post_id": 52413013, "comment_id": 91769778, "body": "gcc clean compile, live: <a href=\"https://godbolt.org/z/2FI1Dk\" rel=\"nofollow noreferrer\">godbolt.org/z/2FI1Dk</a>"}, {"owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 2, "creation_date": 1537385846, "post_id": 52413013, "comment_id": 91769849, "body": "See <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=85889\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=85889</a>"}, {"owner": {"reputation": 10521, "user_id": 1316462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de3149d5f602449f41083ca17a5ceab?s=128&d=identicon&r=PG&f=1", "display_name": "Jans", "link": "https://stackoverflow.com/users/1316462/jans"}, "reply_to_user": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 0, "creation_date": 1537385860, "post_id": 52413013, "comment_id": 91769851, "body": "Sorry, is <code>clang</code> that don&#39;t accept the code, I fixed the wording, @cpplearner I see, in that case <code>clang</code> is wrong in rejecting the code and cppreference also in tagging the behavior as part of C++17."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1537386321, "post_id": 52413013, "comment_id": 91770083, "body": "To sum-up cpplearner&#39;s link, Clang applies a rule that has not been merged in the c++17 standard."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1537387004, "post_id": 52413013, "comment_id": 91770431, "body": "@Oliv No. Clang applies a rule that was a defect applied to C++17, gcc does not yet implement that defect."}], "owner": {"reputation": 10521, "user_id": 1316462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de3149d5f602449f41083ca17a5ceab?s=128&d=identicon&r=PG&f=1", "display_name": "Jans", "link": "https://stackoverflow.com/users/1316462/jans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 756, "favorite_count": 0, "closed_date": 1537386340, "answer_count": 0, "score": 5, "last_activity_date": 1537385794, "creation_date": 1537385411, "last_edit_date": 1537385794, "question_id": 52413013, "link": "https://stackoverflow.com/questions/52413013/lambda-capturing-structured-bindings", "closed_reason": "Duplicate", "title": "lambda capturing structured bindings", "body": "<p>As my understanding C++17 don't forbid lambda expressions from capturing structured bindings. the below is accepted by <code>gcc</code> but rejected by <code>clang</code>, yet <a href=\"https://en.cppreference.com/w/cpp/language/lambda#Explanation\" rel=\"nofollow noreferrer\">cppreference</a> claim that lambdas can't capture structured bindings.</p>\n\n<pre><code>int arr[] {0, 1};\nauto&amp; [a, b] = arr;\nauto foo = [&amp;] { b = 9; }; // capturing structured bindings\n</code></pre>\n\n<ol>\n<li><p>Is either <code>clang</code> or <code>gcc</code> non-conformant?</p></li>\n<li><p>Is cppreference wrong in tagging the behavior as part of C++17 ?</p></li>\n</ol>\n"}, {"tags": ["c++", "c++11", "valgrind"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 3, "creation_date": 1537385253, "post_id": 52412886, "comment_id": 91769565, "body": "change <code>delete &amp;val;</code> to <code>delete val;</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1537385291, "post_id": 52412886, "comment_id": 91769584, "body": "You call <code>delete</code> with the name of the pointer, not the address of the pointer."}, {"owner": {"reputation": 697, "user_id": 1160404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/431cd02524d6ee187fcd1b3d9658498c?s=128&d=identicon&r=PG", "display_name": "Maddy", "link": "https://stackoverflow.com/users/1160404/maddy"}, "edited": false, "score": 0, "creation_date": 1537385305, "post_id": 52412886, "comment_id": 91769589, "body": "you should be calling delete with just the variable name <code>val</code> instead of <code>&amp;val</code>"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1537389223, "post_id": 52412886, "comment_id": 91771344, "body": "@NathanOliver: The operand should be an expression with pointer type.  Whether it was once a variable name, pointer arithmetic, result of a function call, or whatever, does not matter."}], "answers": [{"tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": true, "score": 5, "last_activity_date": 1537388413, "last_edit_date": 1537388413, "creation_date": 1537385395, "answer_id": 52413004, "question_id": 52412886, "link": "https://stackoverflow.com/questions/52412886/confused-about-valgrind-errors-after-deleting-off-heap/52413004#52413004", "title": "Confused about Valgrind errors after deleting off heap", "body": "<p>You get <code>invalid free()</code> error if you try to free invalid memory.</p>\n\n<pre><code>delete &amp;val;\n</code></pre>\n\n<p>here you are trying to delete address of <code>val</code>, rather than the memory <code>val</code> points to, which is wrong.\nTry as below instead.</p>\n\n<pre><code>delete val;\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 1481440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb9335755c0940d99415b4fc05f9355c?s=128&d=identicon&r=PG", "display_name": "cjmaria", "link": "https://stackoverflow.com/users/1481440/cjmaria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 52413004, "answer_count": 1, "score": 0, "last_activity_date": 1537388413, "creation_date": 1537384798, "question_id": 52412886, "link": "https://stackoverflow.com/questions/52412886/confused-about-valgrind-errors-after-deleting-off-heap", "title": "Confused about Valgrind errors after deleting off heap", "body": "<p>I have a very simple piece of code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    int *val = new int;\n    *val = 12;\n    std::cout &lt;&lt; *val &lt;&lt; std::endl;\n    delete &amp;val;\n    return 0;\n}\n</code></pre>\n\n<p>When I run Valgrind on this, I get the following error:</p>\n\n<pre><code>SUMMARY: 3 errors from 3 contexts (suppressed: 8 from 8)\n\n1 errors in context 1 of 3:\nInvalid free() / delete / delete[] / realloc()\n    at 0x1000ABB6D: free (vg_replace_malloc.c:533)\n    by 0x100000D1E: main (pointers.cpp:8)\n  Address 0x1048a09f0 is on thread 1's stack\n  in frame #1, created by main (pointers.cpp:4)\n</code></pre>\n\n<p>What is wrong with how I am deleting <code>val</code>? </p>\n"}, {"tags": ["c++", "windows", "winapi", "service", "com"], "owner": {"reputation": 143, "user_id": 3475689, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/756190719/picture?type=large", "display_name": "GreatCentralSun", "link": "https://stackoverflow.com/users/3475689/greatcentralsun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1537384262, "creation_date": 1537384262, "question_id": 52412755, "link": "https://stackoverflow.com/questions/52412755/correct-way-to-receive-com-events-from-localserver-in-a-c-win32-windows-servi", "title": "Correct way to receive COM Events from LocalServer, in a C++ Win32 Windows Service", "body": "<p>Context: Windows 7 64-bit with a 3rd party vendor-provided COM Server running as LocalServer(.exe). It has some interfaces, methods, and also fires some events, in response to some hardware events. The Sample SDK applications provided work perfectly fine.</p>\n\n<p>There is a need now, for a Windows Service written in C/C++, to receive these events.</p>\n\n<p>Given that Windows Services run in Session_0 and the LocalServer is out of process, and hence runs in Logged-in User's Session_x session, how would one enable the processing of these COM Events, from within the Service?</p>\n\n<p>Is it even possible, given Windows's strict security restrictions and goals behind session_0 based Windows Services?</p>\n\n<p>If so, any ideas?</p>\n"}, {"tags": ["c++", "qt", "qicon"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1537384441, "post_id": 52412743, "comment_id": 91769179, "body": "show the complete class <code>MyItem</code>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1537384470, "post_id": 52412743, "comment_id": 91769196, "body": "what is <code>Str()</code>"}, {"owner": {"reputation": 48, "user_id": 10387285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b14d1a66ae19a36accd0634f0014eb40?s=128&d=identicon&r=PG&f=1", "display_name": "AlexanderFS", "link": "https://stackoverflow.com/users/10387285/alexanderfs"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1537384950, "post_id": 52412743, "comment_id": 91769414, "body": "edited the question"}, {"owner": {"reputation": 934, "user_id": 2795046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c549cb388ef1a0027659242d347efab?s=128&d=identicon&r=PG&f=1", "display_name": "nicolai", "link": "https://stackoverflow.com/users/2795046/nicolai"}, "edited": false, "score": 0, "creation_date": 1537387963, "post_id": 52412743, "comment_id": 91770811, "body": "The <code>MyIconEngine::paint</code> accepts <code>rect</code> as argument. All painting should be done within the <code>rect</code>. And you ignore it. You draw in local coordinates of the icon (<code>painter-&gt;drawRect(boundingRect());</code>). As an option, you could adjust the coordinate system of the <code>painter</code> before you pass it to the <code>myItem-&gt;paint(painter,nullptr,nullptr);</code>. Use <code>painter-&gt;translate(rect.topLeft());</code>."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 934, "user_id": 2795046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c549cb388ef1a0027659242d347efab?s=128&d=identicon&r=PG&f=1", "display_name": "nicolai", "link": "https://stackoverflow.com/users/2795046/nicolai"}, "edited": false, "score": 0, "creation_date": 1537395537, "post_id": 52412743, "comment_id": 91773564, "body": "@nicolai, you are partially right. The problem is indeed in <code>painter-&gt;drawRect(boundingRect());</code>. But the solution is to use <code>QStyleOptionGraphicsItem</code> instead of modifying the painter."}, {"owner": {"reputation": 934, "user_id": 2795046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c549cb388ef1a0027659242d347efab?s=128&d=identicon&r=PG&f=1", "display_name": "nicolai", "link": "https://stackoverflow.com/users/2795046/nicolai"}, "reply_to_user": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 1, "creation_date": 1537432769, "post_id": 52412743, "comment_id": 91784886, "body": "@scopchanov you are totally right."}], "answers": [{"tags": [], "owner": {"reputation": 137, "user_id": 8155481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb54b1f2beff74493261980024fe87fd?s=128&d=identicon&r=PG&f=1", "display_name": "Apexdev", "link": "https://stackoverflow.com/users/8155481/apexdev"}, "is_accepted": false, "score": 1, "last_activity_date": 1555524624, "last_edit_date": 1555524624, "creation_date": 1537386622, "answer_id": 52413270, "question_id": 52412743, "link": "https://stackoverflow.com/questions/52412743/why-the-icon-in-qlistwidget-is-displayed-only-for-the-first-element/52413270#52413270", "title": "Why the icon in QListWidget is displayed only for the first element?", "body": "<pre><code>QRectF MyItem::boundingRect() const\n{\n  return QRectF(0,0,w,h);\n}\n</code></pre>\n\n<p>I believe you're painting all your blocks in the same upper left corner.</p>\n"}, {"comments": [{"owner": {"reputation": 48, "user_id": 10387285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b14d1a66ae19a36accd0634f0014eb40?s=128&d=identicon&r=PG&f=1", "display_name": "AlexanderFS", "link": "https://stackoverflow.com/users/10387285/alexanderfs"}, "edited": false, "score": 1, "creation_date": 1537453445, "post_id": 52414847, "comment_id": 91798028, "body": "Thank you very much"}], "tags": [], "owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "is_accepted": true, "score": 0, "last_activity_date": 1538657111, "last_edit_date": 1538657111, "creation_date": 1537394951, "answer_id": 52414847, "question_id": 52412743, "link": "https://stackoverflow.com/questions/52412743/why-the-icon-in-qlistwidget-is-displayed-only-for-the-first-element/52414847#52414847", "title": "Why the icon in QListWidget is displayed only for the first element?", "body": "<h1>Cause</h1>\n\n<p>You draw the rectangle and the text in the wrong place:</p>\n\n<pre><code>painter-&gt;drawRect(boundingRect());\npainter-&gt;drawText(QPointF(w / 2,h / 2),mySrt);\n</code></pre>\n\n<p>since you do not have information where to draw them.</p>\n\n<p>And you do not have this information, because <a href=\"http://doc.qt.io/qt-5/qgraphicsitem.html#paint\" rel=\"nofollow noreferrer\">QGraphicsItem::paint</a> accepts a <a href=\"http://doc.qt.io/qt-5/qstyleoptiongraphicsitem.html\" rel=\"nofollow noreferrer\">QStyleOptionGraphicsItem</a> as a second argument, but you pass a <code>nullptr</code> in your call:</p>\n\n<pre><code>myItem-&gt;paint(painter,nullptr,nullptr);\n</code></pre>\n\n<h1>Solution</h1>\n\n<p>Create an object of type <code>QStyleOptionGraphicsItem</code>, set it up and pass it to the <code>paint</code> method. Then use the passed information to draw with the <code>painter</code> in the correct places.</p>\n\n<p>This will allow you to make further adjustments of how the decoration looks like, depending on the <a href=\"http://doc.qt.io/qt-5/qicon.html#Mode-enum\" rel=\"nofollow noreferrer\">QIcon::Mode</a> and <a href=\"http://doc.qt.io/qt-5/qicon.html#State-enum\" rel=\"nofollow noreferrer\">QIcon::State</a>.</p>\n\n<h1>Example</h1>\n\n<p>Here is a minimal example I have created for you in order to demonstrate how you could implement the proposed solution:</p>\n\n<ol>\n<li><p>Change your implementation of <code>MyIconEngine::paint</code> like this:</p>\n\n<pre><code>void MyIconEngine::paint(QPainter *painter, const QRect &amp;rect, QIcon::Mode mode, QIcon::State state)\n{\n    QStyleOptionGraphicsItem option;\n\n    option.rect = rect;\n\n    if (mode == QIcon::Selected)\n        option.state = QStyle::State_Selected;\n\n    myItem-&gt;paint(painter, &amp;option, nullptr);\n}\n</code></pre></li>\n<li><p>Change your implementation of <code>MyItem::paint</code> like this:</p>\n\n<pre><code>void MyItem::paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget)\n{\n    Q_UNUSED(option);\n    Q_UNUSED(widget);\n\n    painter-&gt;setBrush(myColor);\n    painter-&gt;setPen(option-&gt;state == QStyle::State_Selected ? Qt::yellow : Qt::black);\n\n    painter-&gt;drawRect(option-&gt;rect);\n    painter-&gt;drawText(option-&gt;rect, mySrt, QTextOption(Qt::AlignCenter));\n}\n</code></pre></li>\n</ol>\n\n<p>I took the liberty to extend the example a bit further than what you have asked in order to show you why using <code>QStyleOptionGraphicsItem</code> is the right solution and how you can utilize it to achieve more.</p>\n\n<p>This, i.e. <code>painter-&gt;drawText(option-&gt;rect, mySrt, QTextOption(Qt::AlignCenter));</code>, will fix the problem with the text positioning as well.</p>\n\n<p><strong>Note:</strong> This example is created for demonstration purposes. You might want to make further adjustments to <code>QStyleOptionGraphicsItem option</code> in order to make it suit the specific needs of your application.</p>\n\n<h1>Result</h1>\n\n<p>As written, the given example produces the following result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/w7IE7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/w7IE7.png\" alt=\"Window with QListWidget with three custom decorated items\"></a></p>\n"}], "owner": {"reputation": 48, "user_id": 10387285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b14d1a66ae19a36accd0634f0014eb40?s=128&d=identicon&r=PG&f=1", "display_name": "AlexanderFS", "link": "https://stackoverflow.com/users/10387285/alexanderfs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 1, "accepted_answer_id": 52414847, "answer_count": 2, "score": 2, "last_activity_date": 1555524624, "creation_date": 1537384211, "last_edit_date": 1537396159, "question_id": 52412743, "link": "https://stackoverflow.com/questions/52412743/why-the-icon-in-qlistwidget-is-displayed-only-for-the-first-element", "title": "Why the icon in QListWidget is displayed only for the first element?", "body": "<p><strong>Target:</strong> I want the class object inherited from QGraphicsItem to be displayed as an icon in QListWidget.</p>\n\n<p><strong>Issue:</strong> In the list, the icon is displayed only for the first item.</p>\n\n<p>how it looks</p>\n\n<p><img src=\"https://i.stack.imgur.com/rCgGk.png\" alt=\"\"></p>\n\n<p>Tried to redefine the function QIconEngine:: pixmap, put a breakpoint on it, but the program does not go into it</p>\n\n\n\n<p>Draw so  </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void MyItem::paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget)\n{\n    painter-&gt;setBrush(myColor);\n    painter-&gt;setPen(Qt::black);\n\n    painter-&gt;drawRect(boundingRect());\n\n    painter-&gt;drawText(QPointF(w / 2,h / 2),myStr);\n}\n</code></pre>\n\n<p>For this I inherit from QIconEngine</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class MyIconEngine : public QIconEngine\n{\npublic:\n    MyIconEngine(MyItem* item);\n\n    // QIconEngine interface\npublic:\n    void paint(QPainter *painter, const QRect &amp;rect, QIcon::Mode mode, QIcon::State state) override;\n    QIconEngine *clone() const override;\n\nprivate:\n    MyItem* myItem;\n};\n</code></pre>\n\n<p>Its implementation</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>MyIconEngine::MyIconEngine(MyItem* item): myItem(item)\n{}\n\nvoid MyIconEngine::paint(QPainter *painter, const QRect &amp;rect, QIcon::Mode mode, QIcon::State state)\n{\n    myItem-&gt;paint(painter,nullptr,nullptr);\n}\n\nQIconEngine *MyIconEngine::clone() const\n{\n    return new MyIconEngine(myItem);\n}\n</code></pre>\n\n<p>Use thus</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n\n    QListWidget* lw = new QListWidget();\n    int w = 45;\n    int h = 45;\n    lw-&gt;setIconSize(QSize(w,h));\n\n    MyItem* i1 = new MyItem(w,h,Qt::red,\"red\");\n    MyItem* i2 = new MyItem(w,h,Qt::green,\"green\");\n    MyItem* i3 = new MyItem(w,h,Qt::blue,\"blue\");\n\n    MyIconEngine* ie1 = new MyIconEngine(i1);\n    MyIconEngine* ie2 = new MyIconEngine(i2);\n    MyIconEngine* ie3 = new MyIconEngine(i3);\n\n    QIcon* icon1 = new QIcon(ie1);\n    QIcon* icon2 = new QIcon(ie2);\n    QIcon* icon3 = new QIcon(ie3);\n\n    QListWidgetItem* lwi1 = new QListWidgetItem(*icon1,i1-&gt;Str(),lw);\n    QListWidgetItem* lwi2 = new QListWidgetItem(*icon2,i2-&gt;Str(),lw);\n    QListWidgetItem* lwi3 = new QListWidgetItem(*icon3,i3-&gt;Str(),lw);\n\n    lw-&gt;show();\n\n    return a.exec();\n}\n</code></pre>\n\n<p>MyItem.h</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class MyItem : public QGraphicsItem\n{\npublic:\n    MyItem(int width,int height, const QColor&amp; color,const QString&amp; text);\n\n    const QString&amp; Str() const\n    {\n        return mySrt;\n    }\n\n    // QGraphicsItem interface\npublic:\n    QRectF boundingRect() const override;\n    void paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget) override;\n\nprivate:\n\n    QColor myColor;\n    int w;\n    int h;\n    QString mySrt;\n};\n</code></pre>\n\n<p>MyItem.cpp</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>MyItem::MyItem(int width, int height, const QColor &amp;color,const QString&amp; text):w(width),h(height),myColor(color),mySrt(text)\n{}\n\nQRectF MyItem::boundingRect() const\n{\n    return QRectF(0,0,w,h);\n}\n\nvoid MyItem::paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget)\n{\n    Q_UNUSED(option);\n    Q_UNUSED(widget);\n\n    painter-&gt;setBrush(myColor);\n    painter-&gt;setPen(Qt::black);\n\n    painter-&gt;drawRect(boundingRect());\n\n    painter-&gt;drawText(QPointF(w / 2,h / 2),mySrt);\n}\n</code></pre>\n"}, {"tags": ["c++", "go", "benchmarking"], "comments": [{"owner": {"reputation": 5044, "user_id": 1276480, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8UB8.jpg?s=128&g=1", "display_name": "RayfenWindspear", "link": "https://stackoverflow.com/users/1276480/rayfenwindspear"}, "edited": false, "score": 1, "creation_date": 1537382843, "post_id": 52412334, "comment_id": 91768473, "body": "Any reason you are using Go 1.7.1 instead of a more recent version (and not even the patched version of 1.7)? 1.11 was released about a month ago. <a href=\"https://golang.org/doc/devel/release.html\" rel=\"nofollow noreferrer\">golang.org/doc/devel/release.html</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1537383074, "post_id": 52412334, "comment_id": 91768588, "body": "What happens if you change the for loop in the C++ code to <code>Node a(d); c += a.Check();</code>?"}, {"owner": {"reputation": 1034, "user_id": 2089648, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b29d87d89de9c1abac217464e57b191?s=128&d=identicon&r=PG", "display_name": "user2089648", "link": "https://stackoverflow.com/users/2089648/user2089648"}, "edited": false, "score": 0, "creation_date": 1537383133, "post_id": 52412334, "comment_id": 91768608, "body": "None other than being lazy. The test was performed on my laptop, usually not coding much here - hence never updated."}, {"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1537383413, "post_id": 52412334, "comment_id": 91768726, "body": "or do not delete &#39;a&#39; at all."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1537383727, "post_id": 52412334, "comment_id": 91768862, "body": "It shouldn&#39;t make a huge difference, but why did you let go make a 64-bit executable (more registers available, native <code>uint64_t</code>) while you used MinGW-32 to make a 32-bit executable (<code>uint64_t</code> takes multiple instructions, fewer registers and less-efficient stack-args calling conventions, but smaller pointers = smaller cache footprint)?  At least you enabled <code>-O2</code> optimization for MinGW.  <code>-O3 -march=native</code> might be interesting but probably won&#39;t make a difference.  <code>uint64_t</code> math is probably not a major bottleneck, but store/reload might be adding latency in a critical dependency chain."}, {"owner": {"reputation": 1381, "user_id": 4381807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i4GHo.gif?s=128&g=1", "display_name": "Anty", "link": "https://stackoverflow.com/users/4381807/anty"}, "edited": false, "score": 0, "creation_date": 1537386011, "post_id": 52412334, "comment_id": 91769919, "body": "Out of curiosity - on what CPU it was tested?"}], "answers": [{"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1552003068, "post_id": 55041746, "comment_id": 96858889, "body": "Are you timing a debug build with C++?  Or was <code>cmake-build-debug&#47;main</code> actually built with <code>-O3</code>?  Also note that your Go benchmark kept 2 CPU cores busy for the whole run time.  That seems surprising."}, {"owner": {"reputation": 5149, "user_id": 1689770, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/78b5dcbdd9f67f569c6102e091faafeb?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/1689770/jonathan"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1552011359, "post_id": 55041746, "comment_id": 96860694, "body": "@PeterCordes it was a debug build, but once I saw it was exceptionally faster I didn&#39;t bother to optimize further. I just wanted to verify it was possible"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1552019842, "post_id": 55041746, "comment_id": 96862449, "body": "Timing debug builds is meaningless.  We have no idea how much faster a normal build of either the C++ or the Go versions would be."}], "tags": [], "owner": {"reputation": 5149, "user_id": 1689770, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/78b5dcbdd9f67f569c6102e091faafeb?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/1689770/jonathan"}, "is_accepted": false, "score": 0, "last_activity_date": 1551955110, "creation_date": 1551955110, "answer_id": 55041746, "question_id": 52412334, "link": "https://stackoverflow.com/questions/52412334/binary-tree-benchmark-results/55041746#55041746", "title": "Binary tree benchmark results", "body": "<p>It's something with your computer your ran on, because I'm getting the expected result where C++ is twice as fast as go.</p>\n\n<p>C++</p>\n\n<pre><code>time cmake-build-debug/main\n2097152 trees of depth 4 check: 65011681\n524288 trees of depth 6 check: 66584449\n131072 trees of depth 8 check: 66977281\n32768 trees of depth 10 check: 67074049\n8192 trees of depth 12 check: 67092481\n2048 trees of depth 14 check: 67074049\n512 trees of depth 16 check: 66977281\n128 trees of depth 18 check: 66584449\n32 trees of depth 20 check: 65011681\ncmake-build-debug/main  21.09s user 0.02s system 99% cpu 21.113 total\n</code></pre>\n\n<p>GO</p>\n\n<pre><code> jonny@skyhawk \ue0b0 ~/Projects/benchmark \ue0b0 time ./main           \ue0b2 \u2714 \ue0b2 2604 \ue0b2 02:34:29 \n2097152  trees of depth  4  check:  65011681\n524288  trees of depth  6  check:  66584449\n131072  trees of depth  8  check:  66977281\n32768  trees of depth  10  check:  67074049\n8192  trees of depth  12  check:  67092481\n2048  trees of depth  14  check:  67074049\n512  trees of depth  16  check:  66977281\n128  trees of depth  18  check:  66584449\n32  trees of depth  20  check:  65011681\n./main  48.72s user 0.52s system 197% cpu 24.905 total\n</code></pre>\n\n<p>I built the C++ main.cpp with CLion's mose basic / default settings (this CMakeLists.txt that will build a <code>main.cpp</code>)</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.3)\nproject(test_build)\n\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++11\")\n\nset(BUILD_1 main)\nset(SOURCE_FILES_1 main.cpp)\nadd_executable(${BUILD_1} ${SOURCE_FILES_1})\n</code></pre>\n"}], "owner": {"reputation": 1034, "user_id": 2089648, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b29d87d89de9c1abac217464e57b191?s=128&d=identicon&r=PG", "display_name": "user2089648", "link": "https://stackoverflow.com/users/2089648/user2089648"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 433, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1551955110, "creation_date": 1537382529, "question_id": 52412334, "link": "https://stackoverflow.com/questions/52412334/binary-tree-benchmark-results", "title": "Binary tree benchmark results", "body": "<p>I stumbled upon <a href=\"https://benchmarksgame-team.pages.debian.net/benchmarksgame/faster/go-gpp.html\" rel=\"nofollow noreferrer\">a website making benchmakrs</a>.\nIn this case Golang vs C++, binary trees.</p>\n\n<p>The C++ solution does A LOT better than golang using allocation of a memory pool. \nI can get behind that but wondered how an implementation without that would fare. So I modified it to look more like the Golang-Code and removed concurrency for both.</p>\n\n<p>In this example and on my machine the golang code runs in around 24 seconds.\nThe C++ code takes an average of 126 seconds. I did not expect this result at all. I expected C++ to still be faster or maybe be a bit slower but not by a factor of 5.</p>\n\n<p>Did I make some huge mistake? Or do you know the reason for this? Code for both programs is below:</p>\n\n<p>Built with: </p>\n\n<blockquote>\n  <p>mingw32-g++.exe -Wall -fexceptions -O2  -c D:\\TMP\\Test\\main.cpp -o\n  obj\\Release\\main.o\n  mingw32-g++.exe  -o bin\\Release\\Test.exe obj\\Release\\main.o  -s</p>\n</blockquote>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Node {\npublic:\n    Node(uint64_t d);\n    ~Node();\n    int Check();\nprivate:\n    Node* l;\n    Node* r;\n};\n\nNode::Node(uint64_t d){\n    if (d &gt; 0){\n        l = new Node(d - 1);\n        r = new Node(d - 1);\n    } else {\n        l = 0;\n        r = 0;\n    }\n}\n\nNode::~Node(){\n    if(l){\n        delete l;\n        delete r;\n    }\n}\n\nint Node::Check(){\n    if (l) {\n        return l-&gt;Check() + 1 + r-&gt;Check();\n    } else {\n        return 1;\n    }\n}\n\nint main()\n{\n    uint64_t min_depth = 4;\n    uint64_t max_depth = 21;\n    for (uint64_t d = min_depth; d &lt;= max_depth; d += 2) {\n        uint64_t iterations = 1 &lt;&lt; (max_depth - d + min_depth);\n        uint64_t c = 0;\n        for (uint64_t i = 1; i &lt; iterations; i++) {\n            Node* a = new Node(d);\n            c += a-&gt;Check();\n            delete a; // I tried commenting this line but it made no big impact\n        }\n        cout &lt;&lt; iterations &lt;&lt; \" trees of depth \" &lt;&lt; d &lt;&lt; \" check: \" &lt;&lt; c &lt;&lt; \"\\n\";\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Golang:</p>\n\n<blockquote>\n  <p>go version go1.7.1 windows/amd64</p>\n</blockquote>\n\n<pre><code>package main\n\nimport(\n    \"fmt\"\n)\n\ntype Node struct {\n    l *Node\n    r *Node\n}\n\nfunc (n *Node) check() int {\n    if n.l != nil {\n        return n.l.check() + 1 + n.r.check()\n    } else {\n        return 1\n    }\n}\n\nfunc make(d uint) *Node {\n    root := new(Node)\n    if d &gt; 0 {\n        root.l = make(d-1)\n        root.r = make(d-1)\n    }\n    return root\n}\n\nfunc main(){\n    min_depth := uint(4)\n    max_depth := uint(21)\n    for d := min_depth; d &lt;= max_depth; d += 2 {\n        iterations := 1 &lt;&lt; (max_depth - d + min_depth)\n        c := 0\n        for i := 1; i &lt; iterations; i++ {\n            a := make(d)\n            c += a.check()\n        }\n        fmt.Println(iterations, \" trees of depth \", d, \" check: \", c)\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "memory", "memory-management"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1537381959, "post_id": 52412161, "comment_id": 91768061, "body": "Sounds like you&#39;re looking for <a href=\"https://linux.die.net/man/2/mlock\" rel=\"nofollow noreferrer\"><code>mlock</code></a>. Edit : For Windows it looks like there&#39;s <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366895(v=vs.85).aspx\" rel=\"nofollow noreferrer\">VirtualLock</a>."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1537383570, "post_id": 52412237, "comment_id": 91768796, "body": "<code>mlock</code> requires special privilege, so that random users can&#39;t cause the problems you describe in the last paragraph."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 5, "last_activity_date": 1537382118, "creation_date": 1537382118, "answer_id": 52412237, "question_id": 52412161, "link": "https://stackoverflow.com/questions/52412161/how-to-hint-the-os-which-blocks-of-memory-should-not-be-swapped-to-disk/52412237#52412237", "title": "How to hint the OS which blocks of memory should not be swapped to disk?", "body": "<p>On POSIX systems, <a href=\"https://linux.die.net/man/3/posix_madvise\" rel=\"noreferrer\"><code>posix_madvise</code></a> with the <code>POSIX_MADV_WILLNEED</code> flag provides this sort of advice. It's only <em>advice</em>, so it's up to the OS how it interprets it, but in my experience, it typically behaves as:</p>\n\n<ol>\n<li>Page in the memory range in bulk if it's currently paged out</li>\n<li>Don't page it out unless operating under severe memory pressure</li>\n</ol>\n\n<p><a href=\"https://linux.die.net/man/2/mlock\" rel=\"noreferrer\"><code>mlock</code></a> can be used to say \"never swap\", but it's no longer advice at that point; you've told the OS to <em>never</em> swap it out, even under severe memory pressure (if too many processes do this, you can trigger out of memory errors or broad performance degradation as less important memory is forced to stay resident at the expense of more important memory).</p>\n"}], "owner": {"reputation": 1741, "user_id": 2042587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xX3xO.jpg?s=128&g=1", "display_name": "Heavy", "link": "https://stackoverflow.com/users/2042587/heavy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 52412237, "answer_count": 1, "score": 3, "last_activity_date": 1537382118, "creation_date": 1537381865, "question_id": 52412161, "link": "https://stackoverflow.com/questions/52412161/how-to-hint-the-os-which-blocks-of-memory-should-not-be-swapped-to-disk", "title": "How to hint the OS which blocks of memory should not be swapped to disk?", "body": "<p>When the system memory is being exhausted, OS begins to swap unused memory regions to disk. I'm wondering if a developer could control this process.</p>\n\n<p>For example, I have 2 blocks of memory, both are not being used for some time. But I don't want the first block to be swapped to disk, because application is waiting for something, and this block should be processed as soon as possible. The other block is not that important, so it could be swapped to disk without a doubt.</p>\n\n<p>There might be no cross-platform way, but maybe there are OS-specific (Windows, Linux, etc) ways or hacky tricks to prioritize swapping and \"mark\" certain blocks of memory that should be swapped last?</p>\n"}, {"tags": ["c++", "string", "sorting", "distinct"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 5, "creation_date": 1537381158, "post_id": 52411966, "comment_id": 91767679, "body": "<code>input[++i]</code> modifies your counter variable <code>i</code>, meaning you skip half of the string"}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1537381244, "post_id": 52411966, "comment_id": 91767733, "body": "I would recommend <a href=\"https://en.cppreference.com/w/cpp/algorithm/unique\" rel=\"nofollow noreferrer\"><code>std::unique</code></a> (requires grouped range - sorted range is grouped, for example) paired with <a href=\"https://en.cppreference.com/w/cpp/iterator/distance\" rel=\"nofollow noreferrer\"><code>std::distance</code></a>. It is a one-liner that solves your problem"}, {"owner": {"reputation": 41, "user_id": 10387364, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AFVgjKz3h5k/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOn-iOYfRlsoNQkqLiWz_mHLHp67w/mo/photo.jpg?sz=128", "display_name": "Viktor Ilievski", "link": "https://stackoverflow.com/users/10387364/viktor-ilievski"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1537381284, "post_id": 52411966, "comment_id": 91767754, "body": "Thank you sir, I managed to solve the issue. @UnholySheep"}, {"owner": {"reputation": 41, "user_id": 10387364, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AFVgjKz3h5k/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOn-iOYfRlsoNQkqLiWz_mHLHp67w/mo/photo.jpg?sz=128", "display_name": "Viktor Ilievski", "link": "https://stackoverflow.com/users/10387364/viktor-ilievski"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1537381557, "post_id": 52411966, "comment_id": 91767882, "body": "@n.m. Thank you for the response. That&#39;s how I solved the issue, I really didn&#39;t think about modifying my counter of the loop."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1537382163, "post_id": 52411966, "comment_id": 91768143, "body": "I think the problem is that you&#39;re confusing &quot;duplicate&quot; with &quot;two characters that are the same&quot;"}, {"owner": {"reputation": 41, "user_id": 10387364, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AFVgjKz3h5k/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOn-iOYfRlsoNQkqLiWz_mHLHp67w/mo/photo.jpg?sz=128", "display_name": "Viktor Ilievski", "link": "https://stackoverflow.com/users/10387364/viktor-ilievski"}, "edited": false, "score": 0, "creation_date": 1537384703, "post_id": 52411966, "comment_id": 91769299, "body": "Yeah I meant of &quot;two characters that are the same&quot;.  EDIT: You got the idea however."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 1, "last_activity_date": 1537386517, "last_edit_date": 1537386517, "creation_date": 1537385310, "answer_id": 52412988, "question_id": 52411966, "link": "https://stackoverflow.com/questions/52411966/c-find-duplicate-characters-in-a-sorted-string/52412988#52412988", "title": "C++ Find duplicate characters in a sorted string", "body": "<p>\"I need to count how many DISTINCT characters are in my string\"</p>\n\n<p>If, as you mention, your string is sorted, then it's fairly trivial. Use <a href=\"https://en.cppreference.com/w/cpp/algorithm/unique\" rel=\"nofollow noreferrer\">std::unique</a> in combination with <code>erase</code> to remove all duplicates. After that, your string holds only unique characters, so its <code>.size()</code> will be the count of unique characters.</p>\n"}], "owner": {"reputation": 41, "user_id": 10387364, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AFVgjKz3h5k/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOn-iOYfRlsoNQkqLiWz_mHLHp67w/mo/photo.jpg?sz=128", "display_name": "Viktor Ilievski", "link": "https://stackoverflow.com/users/10387364/viktor-ilievski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 750, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1537386517, "creation_date": 1537380999, "question_id": 52411966, "link": "https://stackoverflow.com/questions/52411966/c-find-duplicate-characters-in-a-sorted-string", "title": "C++ Find duplicate characters in a sorted string", "body": "<p>I have a problem that I really don't know how to solve.\nI need to count how many DISTINCT characters are in my string.</p>\n\n<p>For example.</p>\n\n<p>/</p>\n\n<p>INPUT: wjmzbmr</p>\n\n<p>OUTPUT: 6</p>\n\n<p>/</p>\n\n<p>Since the 'm' is showed twice, it should count it once.</p>\n\n<p>My main thought is to sort the string before checking the characters and then count the DUPLICATES. When I finish counting how many duplicates are there, I just subtract the string length with my counter of duplicates.</p>\n\n<p>Here's the code.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main()\n{\n    string input;\n    char temp;\n    cin &gt;&gt; input;\n\n    for(int i=0;i&lt;input.length();i++)\n    {\n        for(int j=i;j&lt;input.length();j++)\n        {\n            if(input[i] &gt; input[j])\n            {\n                temp = input[i];\n                input[i] = input[j];\n                input[j] = temp;\n            }\n        }\n    }\n    //SORTED STRING PRINT HERE\n    cout&lt;&lt;input&lt;&lt;endl;\n\n    int counter=0;\n    for(int i=0;i&lt;input.length()-1;i++)\n    {\n        if(input[i]==input[++i])\n        {\n            counter++;\n        }\n    }\n    int new_length = input.length() - counter;\n    cout&lt;&lt;\"DUPLICATES: \"&lt;&lt;counter&lt;&lt;endl;\n    cout&lt;&lt;\"STRING LENGTH: \"&lt;&lt;input.length()&lt;&lt;endl;\n    cout&lt;&lt;\"WITHOUT DUPLICATES: \"&lt;&lt;new_length&lt;&lt;endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>For some reasons this thing won't work on any string.\nLet's say I have a string like this.</p>\n\n<p>/</p>\n\n<p>INPUT: pppppp</p>\n\n<p>OUTPUT: 3</p>\n\n<p>/</p>\n\n<p>P.S. I've provided multiple outputs just to check where is the issue. I couldn't find it so I am writing here. Thank you guys in advance.</p>\n"}, {"tags": ["c++", "stdvector", "stdstring"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1537380968, "post_id": 52411929, "comment_id": 91767595, "body": "And once you fix the build error you have to consider the possibility of your program crashing, as you index the vector <i>out of bounds</i>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1537381074, "post_id": 52411929, "comment_id": 91767647, "body": "a <code>char</code> is not a <code>std::string</code>. Why do you want to do that? Do you want to push a string of length 1 ?"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1537381235, "post_id": 52411929, "comment_id": 91767723, "body": "<code>instruction</code> is a vector of strings.  <code>instruction[0]</code> is the first string in the vector. You want to add strings to the vector, not to another string."}, {"owner": {"reputation": 353, "user_id": 10371713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/694c2931a10b1a8d65f148d274a10d82?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/10371713/john"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1537381575, "post_id": 52411929, "comment_id": 91767890, "body": "Adding the &lt;string&gt; library didn&#39;t change anything.Also, @Ripi2, instruction[0] is the first string of the vector and I want to add a character to that string."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1537381772, "post_id": 52411929, "comment_id": 91767981, "body": "OK, the <code>push_back</code> method is well used. But... add to the vector first a string to which append a character!!!"}, {"owner": {"reputation": 353, "user_id": 10371713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/694c2931a10b1a8d65f148d274a10d82?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/10371713/john"}, "edited": false, "score": 0, "creation_date": 1537382070, "post_id": 52411929, "comment_id": 91768107, "body": "Oh yeah you are correct. But is there a way to add a character to an empty vector of strings?"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "reply_to_user": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1537382519, "post_id": 52411929, "comment_id": 91768322, "body": "@Fureeish, Nope. I think you mean <code>instruction.push_back(&quot;A&quot;)</code>, with no [0] thing."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1537382618, "post_id": 52411929, "comment_id": 91768352, "body": "Yeah, my bad. I glanced at the question and immediately saw <code>&#39;A&#39;</code> and completely overlooked the incorrectly used <code>operator[]</code>."}, {"owner": {"reputation": 353, "user_id": 10371713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/694c2931a10b1a8d65f148d274a10d82?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/10371713/john"}, "edited": false, "score": 0, "creation_date": 1537382661, "post_id": 52411929, "comment_id": 91768372, "body": "But that won&#39;t work because I will then add more chars next to A."}, {"owner": {"reputation": 697, "user_id": 1160404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/431cd02524d6ee187fcd1b3d9658498c?s=128&d=identicon&r=PG", "display_name": "Maddy", "link": "https://stackoverflow.com/users/1160404/maddy"}, "edited": false, "score": 0, "creation_date": 1537382693, "post_id": 52411929, "comment_id": 91768392, "body": "Hi John, one option that can be done to push a char to a vector of string is converting char value to string <code>instruction.push_back( to_string(&#39;A&#39;) )</code>"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1537382726, "post_id": 52411929, "comment_id": 91768405, "body": "Once you have a first string, then <code>instruction[0].push_back(anotherchar)</code> will work"}], "answers": [{"tags": [], "owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "is_accepted": true, "score": 0, "last_activity_date": 1537384417, "last_edit_date": 1537384417, "creation_date": 1537382736, "answer_id": 52412382, "question_id": 52411929, "link": "https://stackoverflow.com/questions/52411929/how-to-insert-a-char-to-a-vector-of-strings/52412382#52412382", "title": "How to insert a char to a vector of strings", "body": "<p>As you declared a vector with template type as <code>std::string</code> you can not insert <code>char</code> to it, instead you can only have a string inside.</p>\n\n<p>If you want to have a single character string as vector element, do simply:</p>\n\n<pre><code>std::vector &lt;std::string&gt; instruction;\n// instruction.reserve(/*some memory, if you know already the no. of strings*/);\ninstruction.push_back(\"A\");\n</code></pre>\n\n<p>Regarding your usage of <a href=\"https://en.cppreference.com/w/cpp/container/vector/operator_at\" rel=\"nofollow noreferrer\">std::vector::operator[]</a>: that is wrong, because, it returns the reference to the element at the index you requested. The moment when you use it(in your code), there is no element available and hence it's usage leads you <em><a href=\"https://en.cppreference.com/w/cpp/language/ub\" rel=\"nofollow noreferrer\">undefind behavior</a></em></p>\n\n<hr>\n\n<p>In the comments you mentioned that:</p>\n\n<blockquote>\n  <p>I will then add more chars next to A</p>\n</blockquote>\n\n<p>If you meant to concatenate characters to the vector elements(which is string type), you can either use <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/operator%2B%3D\" rel=\"nofollow noreferrer\">operator+=</a> of string to add a new character to the <strong>already existing string</strong> element(s).</p>\n\n<pre><code>std::vector &lt;std::string&gt; instruction;\n\ninstruction.push_back(\"\");  // create an empty string first\ninstruction[0] += 'A';      // add a character\ninstruction[0] += 'B';      // add another character\n</code></pre>\n\n<p>or simply <code>push_back</code> as you tried. But in the latter case also you need to have a string(empty or non-empty) element existing in the vector.</p>\n"}, {"tags": [], "owner": {"reputation": 3331, "user_id": 8038186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72ac0cc4d0f1414caf2172751b2ded50?s=128&d=identicon&r=PG&f=1", "display_name": "KoralK", "link": "https://stackoverflow.com/users/8038186/koralk"}, "is_accepted": false, "score": 0, "last_activity_date": 1537383586, "last_edit_date": 1537383586, "creation_date": 1537382829, "answer_id": 52412411, "question_id": 52411929, "link": "https://stackoverflow.com/questions/52411929/how-to-insert-a-char-to-a-vector-of-strings/52412411#52412411", "title": "How to insert a char to a vector of strings", "body": "<p>You have to add the first string into the vector at first to use the string object's method <code>push_back</code>.</p>\n\n<pre><code>int main()\n{\n    vector &lt;string&gt; instruction;\n\n    instruction.push_back(\"\");\n    instruction[0].push_back('A');\n    return 0;\n}\n</code></pre>\n\n<p>But keep in mind that you can simply use <code>+=</code> operator of <code>string</code> class to get the same results:</p>\n\n<pre><code>instruction[0] += 'A';\n</code></pre>\n"}], "owner": {"reputation": 353, "user_id": 10371713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/694c2931a10b1a8d65f148d274a10d82?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/10371713/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6870, "favorite_count": 0, "accepted_answer_id": 52412382, "answer_count": 2, "score": -1, "last_activity_date": 1537419287, "creation_date": 1537380865, "last_edit_date": 1537419287, "question_id": 52411929, "link": "https://stackoverflow.com/questions/52411929/how-to-insert-a-char-to-a-vector-of-strings", "title": "How to insert a char to a vector of strings", "body": "<p>Isn't this the correct way to insert a character into a vector of strings?</p>\n\n<p>The compiler returns <code>-1073741819</code> when I run it.</p>\n\n<p>Following is the code, in which I want to add more chars next to <code>'A'</code> later.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main()\n{\n    vector &lt;string&gt; instruction;\n\n    instruction[0].push_back( 'A' );\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1537380597, "post_id": 52411851, "comment_id": 91767407, "body": "What is the output you get? What is the output you want?"}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1537397941, "post_id": 52411851, "comment_id": 91774163, "body": "Do you want the <code>5</code> in the second line to align with the <code>-16.4</code> on the third line?"}, {"owner": {"reputation": 1, "user_id": 10387334, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eGGBIfJw54Y/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVmOe57_ktw3a7k2o0pMGJoO3VRyg/mo/photo.jpg?sz=128", "display_name": "Rick Grimes", "link": "https://stackoverflow.com/users/10387334/rick-grimes"}, "edited": false, "score": 0, "creation_date": 1537409090, "post_id": 52411851, "comment_id": 91776416, "body": "I want the 5 to align with the -16.4, please."}], "answers": [{"tags": [], "owner": {"reputation": 3791, "user_id": 1820553, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZb6uZzo4Gg/AAAAAAAAAAI/AAAAAAAAAo0/xTr6RvgMTRw/photo.jpg?sz=128", "display_name": "kelalaka", "link": "https://stackoverflow.com/users/1820553/kelalaka"}, "is_accepted": true, "score": 0, "last_activity_date": 1537468660, "creation_date": 1537468660, "answer_id": 52431283, "question_id": 52411851, "link": "https://stackoverflow.com/questions/52411851/how-to-set-the-width-with-no-value-before-the-5/52431283#52431283", "title": "How to set the width with no value before the 5", "body": "<pre><code>#include &lt;iostream&gt;\n    #include &lt;iomanip&gt;\n    #include &lt;cmath&gt;\n\n    using namespace std;\n\n    int main() { \n\n        cout&lt;&lt; \"Temp | -------------- Wind Speed --------------\" &lt;&lt;endl;\n\n        cout &lt;&lt; \"     \";\n\n        for( int w=5; w&lt;=45; w=w+5) {\n            cout &lt;&lt; setw(10) &lt;&lt; right &lt;&lt; w;\n\n        }\n        cout&lt;&lt; endl;\n\n        for (int t=-5; t&lt;=50; t=t+5) {\n            cout &lt;&lt; setw(5)&lt;&lt; right &lt;&lt; t;\n            for(int w=5; w&lt;=45; w=w+5){\n              cout &lt;&lt; setw(10) &lt;&lt; right &lt;&lt; fixed&lt;&lt; setprecision(1)&lt;&lt; 35.74+(0.6215*t)-35.75*pow(w,0.16)+(0.4275*t*pow(w,0.16)); \n            }\n            cout&lt;&lt;endl;\n            }\n\n        }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10387334, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eGGBIfJw54Y/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVmOe57_ktw3a7k2o0pMGJoO3VRyg/mo/photo.jpg?sz=128", "display_name": "Rick Grimes", "link": "https://stackoverflow.com/users/10387334/rick-grimes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 52431283, "answer_count": 1, "score": -3, "last_activity_date": 1537468660, "creation_date": 1537380489, "question_id": 52411851, "link": "https://stackoverflow.com/questions/52411851/how-to-set-the-width-with-no-value-before-the-5", "title": "How to set the width with no value before the 5", "body": "<p>How do I make the entire second line of the output right aligned in the output? I believe it is set to right align, but I feel like a need a variable to represent a blank space before it outputs the five. If someone can try to run this program to see the output display I am talking about it would make a lot more sense to whoever reads this.</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    #include &lt;iomanip&gt;\n    #include &lt;cmath&gt;\n\n    using namespace std;\n\n    int main() { \n\n        cout&lt;&lt; \"Temp | -------------- Wind Speed --------------\" &lt;&lt;endl;\n\n        for( int w=5; w&lt;=45; w=w+5) {\n            cout &lt;&lt; setw(10) &lt;&lt; right &lt;&lt; w;\n\n        }\n        cout&lt;&lt; endl;\n\n        for (int t=-5; t&lt;=50; t=t+5) {\n            cout &lt;&lt; setw(5)&lt;&lt; right &lt;&lt; t;\n            for(int w=5; w&lt;=45; w=w+5){\n              cout &lt;&lt; setw(10) &lt;&lt; right &lt;&lt; fixed&lt;&lt; setprecision(1)&lt;&lt; 35.74+(0.6215*t)-35.75*pow(w,0.16)+(0.4275*t*pow(w,0.16)); \n            }\n            cout&lt;&lt;endl;\n            }\n\n        }\n</code></pre>\n"}, {"tags": ["c++", "global-variables", "googletest", "auto"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1537380897, "post_id": 52411845, "comment_id": 91767564, "body": "How should the compiler deduce the type of that class member variable? What about using a template?"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1537381005, "post_id": 52411845, "comment_id": 91767613, "body": "I think the problem is that the compiler doesn&#39;t have any way of knowing what type of data should be contained in your class member <code>type</code>. If you don&#39;t know what type of variable to use, you might want to write a <b>template</b> or if the type is one of a small set of possibilities you might want to use a <code>std::variant</code>. But <code>auto</code> isn&#39;t going to work here, because it&#39;s intended for cases where the compiler can deduce the actual type of the object from the context, and you haven&#39;t provided any."}, {"owner": {"reputation": 1, "user_id": 10332084, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BSw8LLprM04/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNtN6HIpuzX9YL5Os7XPETRZvjeGA/mo/photo.jpg?sz=128", "display_name": "Mona S", "link": "https://stackoverflow.com/users/10332084/mona-s"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1537381662, "post_id": 52411845, "comment_id": 91767937, "body": "@TimRandall sounds good. Thank you explaining"}, {"owner": {"reputation": 1758, "user_id": 8724882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d88f8198fb4ae68267aced911e3533f9?s=128&d=identicon&r=PG&f=1", "display_name": "sandwood", "link": "https://stackoverflow.com/users/8724882/sandwood"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1537427180, "post_id": 52411845, "comment_id": 91781980, "body": "@TimRandall : you should post your comment as answer"}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1537435860, "post_id": 52411845, "comment_id": 91786756, "body": "It&#39;s unclear what you&#39;re asking. How is <code>TYPE</code> to be determined? Edit your question to explain this."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10332084, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BSw8LLprM04/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNtN6HIpuzX9YL5Os7XPETRZvjeGA/mo/photo.jpg?sz=128", "display_name": "Mona S", "link": "https://stackoverflow.com/users/10332084/mona-s"}, "edited": false, "score": 0, "creation_date": 1537450947, "post_id": 52425774, "comment_id": 91796269, "body": "I understand the issue with auto. Proceeding with that, I have been trying to find how I can create a global variable such that the same variable can be shared among files. I read it somewhere that it can be done by setting variable in AddGlobalTestEnvironment(Environment * env);  Do you have any information related to this?"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "reply_to_user": {"reputation": 1, "user_id": 10332084, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BSw8LLprM04/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNtN6HIpuzX9YL5Os7XPETRZvjeGA/mo/photo.jpg?sz=128", "display_name": "Mona S", "link": "https://stackoverflow.com/users/10332084/mona-s"}, "edited": false, "score": 0, "creation_date": 1537451075, "post_id": 52425774, "comment_id": 91796359, "body": "@MonaS That sounds like it should be in a separate question. Feel free to ask another one, although I imagine it has already been asked and answered. In the meanwhile, if you&#39;re happy with this answer, please accept it. If not, please ask for improvements or clarifications and I&#39;ll do my best."}, {"owner": {"reputation": 1, "user_id": 10332084, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BSw8LLprM04/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNtN6HIpuzX9YL5Os7XPETRZvjeGA/mo/photo.jpg?sz=128", "display_name": "Mona S", "link": "https://stackoverflow.com/users/10332084/mona-s"}, "edited": false, "score": 0, "creation_date": 1537451298, "post_id": 52425774, "comment_id": 91796535, "body": "I have asked this question above as well. Just because it did not get answered, I clearly restated it here again"}], "tags": [], "owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "is_accepted": false, "score": 1, "last_activity_date": 1537454297, "last_edit_date": 1537454297, "creation_date": 1537448471, "answer_id": 52425774, "question_id": 52411845, "link": "https://stackoverflow.com/questions/52411845/gtest-access-auto-variable-globally-across-multiple-tests/52425774#52425774", "title": "Gtest: Access auto variable globally across multiple tests", "body": "<p>I think the problem is that the compiler doesn't have any way of knowing what type of data should be contained in your class member <code>type</code>. I'm afraid <code>auto</code> isn't going to work here, because it's intended for cases where the compiler can deduce the actual type of the object from the context, and you haven't provided any. (We the readers can look elsewhere in the class and find <code>type = new TYPE();</code> and infer something from that, but as far as I know <code>auto</code> can only look at the statement initializing its object.)</p>\n\n<p>How to proceed, then? If you don't know what type of variable to use, you might want to write a <strong>template</strong>, or if the type is one of a small set of possibilities, you might want to use a <code>std::variant</code>.</p>\n\n<p>As for making it available as a global variable: I don't think you need to do anything special, beyond what you'd normally do for a global: declare it in a header file, define it in a source file, and include the header wherever needed. The usual considerations apply. Think about whether it truly needs to be global. Put it in an appropriate namespace so as not to pollute the global namespace. And so on.</p>\n"}], "owner": {"reputation": 1, "user_id": 10332084, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BSw8LLprM04/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNtN6HIpuzX9YL5Os7XPETRZvjeGA/mo/photo.jpg?sz=128", "display_name": "Mona S", "link": "https://stackoverflow.com/users/10332084/mona-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1537454297, "creation_date": 1537380463, "question_id": 52411845, "link": "https://stackoverflow.com/questions/52411845/gtest-access-auto-variable-globally-across-multiple-tests", "title": "Gtest: Access auto variable globally across multiple tests", "body": "<p>I need to set global variable <code>type</code> that can be used by multiple tests and ideally by all tests in multiple test files. </p>\n\n<p>Please find my script below because of which I am getting the following error: <code>error: non-static data member declared 'auto'</code>. </p>\n\n<p>Ideally I would like to know how I can declare this global variable such that it can be used across multiple <code>.cpp</code> files. Any help would be highly appreciated! </p>\n\n<p>Thanks</p>\n\n<p><strong>customerTest.cpp:</strong></p>\n\n<pre><code>namespace {\n    class custTest : public ::testing::Test {\n    protected:\n        custTest() {\n            type = new TYPE();\n        }\n        virtual ~custTest() {\n            delete type;\n            type = nullptr;\n        }\n        auto type; //this is the global variable that I would like to use across multiple tests\n    };\n\n    TEST_F(custTest, openPort) {\n        type-&gt;defineMap();\n        ...\n    }   \n\n} \n</code></pre>\n"}, {"tags": ["c++", "xcode", "vector"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1537380252, "post_id": 52411763, "comment_id": 91767230, "body": "In <code>vector&lt;department&gt; deptVec; cout &lt;&lt; &quot;Vector output: &quot; &lt;&lt; deptVec[0].budget;</code> How many elements are in the vector?"}, {"owner": {"reputation": 846, "user_id": 9572393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z7AXs.png?s=128&g=1", "display_name": "GKE", "link": "https://stackoverflow.com/users/9572393/gke"}, "edited": false, "score": 0, "creation_date": 1537383205, "post_id": 52411763, "comment_id": 91768634, "body": "Post your <code>department</code> function please."}, {"owner": {"reputation": 846, "user_id": 9572393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z7AXs.png?s=128&g=1", "display_name": "GKE", "link": "https://stackoverflow.com/users/9572393/gke"}, "edited": false, "score": 0, "creation_date": 1537383284, "post_id": 52411763, "comment_id": 91768667, "body": "And why are you calling <code>.budget</code> on <code>deptVec</code>?"}, {"owner": {"reputation": 1, "user_id": 9358202, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cb3pR8W6TTo/AAAAAAAAAAI/AAAAAAAAB1o/Mhqi0MxOkhI/photo.jpg?sz=128", "display_name": "Josh", "link": "https://stackoverflow.com/users/9358202/josh"}, "edited": false, "score": 0, "creation_date": 1537388830, "post_id": 52411763, "comment_id": 91771166, "body": "After the program runs, there are 3 elements in <code>deptVec[0]</code> and <code>deptVec</code> goes up to <code>deptVec[3]</code>. 3 elments per struct. Here is the department struct.      <code>struct department {     string dept;     string building;     int budget; };</code>"}, {"owner": {"reputation": 1, "user_id": 9358202, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cb3pR8W6TTo/AAAAAAAAAAI/AAAAAAAAB1o/Mhqi0MxOkhI/photo.jpg?sz=128", "display_name": "Josh", "link": "https://stackoverflow.com/users/9358202/josh"}, "reply_to_user": {"reputation": 846, "user_id": 9572393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z7AXs.png?s=128&g=1", "display_name": "GKE", "link": "https://stackoverflow.com/users/9572393/gke"}, "edited": false, "score": 0, "creation_date": 1537390316, "post_id": 52411763, "comment_id": 91771819, "body": "@GKE i think that might be my problem, not sure where I came up with that or why."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9358202, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cb3pR8W6TTo/AAAAAAAAAAI/AAAAAAAAB1o/Mhqi0MxOkhI/photo.jpg?sz=128", "display_name": "Josh", "link": "https://stackoverflow.com/users/9358202/josh"}, "edited": false, "score": 0, "creation_date": 1537389820, "post_id": 52411881, "comment_id": 91771601, "body": "Aren&#39;t they already pushed if I can see the variables listed and established in the vector? This is how the vector looks when I use a break right before the lines that break the program.  <code>depart\tstd::__1::vector&lt;department, std::__1::allocator&lt;department&gt; &gt;\tsize=5\t  [0]\tdepartment\t dept\tstd::__1::string\t&quot;BIOL&quot;\t building\tstd::__1::string\t&quot;LEO&quot;\t budget\tint\t60000</code>"}], "tags": [], "owner": {"reputation": 1, "user_id": 6537643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f0e8942a457ad644c56284f4fb28d25?s=128&d=identicon&r=PG&f=1", "display_name": "Chirag Satish", "link": "https://stackoverflow.com/users/6537643/chirag-satish"}, "is_accepted": false, "score": 0, "last_activity_date": 1537380618, "creation_date": 1537380618, "answer_id": 52411881, "question_id": 52411763, "link": "https://stackoverflow.com/questions/52411763/c-how-to-cout-a-vector-of-struts-exc-bad-access-error/52411881#52411881", "title": "C++ How to cout a vector of struts, EXC_BAD_ACCESS error", "body": "<p>The deptVec vector is empty and you are trying to access an element from it. Try pushing values to deptVec before cout. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9358202, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cb3pR8W6TTo/AAAAAAAAAAI/AAAAAAAAB1o/Mhqi0MxOkhI/photo.jpg?sz=128", "display_name": "Josh", "link": "https://stackoverflow.com/users/9358202/josh"}, "is_accepted": false, "score": 0, "last_activity_date": 1537390647, "creation_date": 1537390647, "answer_id": 52414115, "question_id": 52411763, "link": "https://stackoverflow.com/questions/52411763/c-how-to-cout-a-vector-of-struts-exc-bad-access-error/52414115#52414115", "title": "C++ How to cout a vector of struts, EXC_BAD_ACCESS error", "body": "<p>I fixed the problem. For whatever reason, I was trying to create a new vector after the while loop instead of using the one being used in the while loop.</p>\n\n<p>This is before:\n        <code>vector&lt;department&gt; deptVec;\n    cout &lt;&lt; \"Vector output: \" &lt;&lt; deptVec[0].budget;</code></p>\n\n<p>After(what it should be): <code>cout &lt;&lt; \"Vector output: \" &lt;&lt; depart[0].dept;</code></p>\n"}], "owner": {"reputation": 1, "user_id": 9358202, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cb3pR8W6TTo/AAAAAAAAAAI/AAAAAAAAB1o/Mhqi0MxOkhI/photo.jpg?sz=128", "display_name": "Josh", "link": "https://stackoverflow.com/users/9358202/josh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1537531081, "creation_date": 1537380187, "last_edit_date": 1537531081, "question_id": 52411763, "link": "https://stackoverflow.com/questions/52411763/c-how-to-cout-a-vector-of-struts-exc-bad-access-error", "title": "C++ How to cout a vector of struts, EXC_BAD_ACCESS error", "body": "<p>Can someone help me with this error. I've been up all night trying to get this code to work, can't seem to figure it out.</p>\n\n<p>I am trying to COUT a single value from my vector strut but I keep getting this EXC_BAD_ACCESS error. I used breaks to see if variables are as they should be and they are but the error continues. Can you help me?</p>\n\n<pre><code>        vector&lt;department&gt; depart;\n        depart.push_back(department());\n\n        while(lineNum &lt;= lineCount)  \n        {\n            lineNum = lineNum;\n            depart[lineNum].dept = sTemp1;\n            depart[lineNum].building = sTemp2;\n            depart[lineNum].budget = sTempToInt;\n            depart.push_back(department());  \n            lineNum++;\n        }\n        vector&lt;department&gt; deptVec;\n        cout &lt;&lt; \"Vector output: \" &lt;&lt; deptVec[0].budget;\n    }\n        else\n        {\n            sTemp1.erase (remove (sTemp1.begin(), sTemp1.end(), ' '), sTemp1.end()); //clean up\n            //sTemp2.erase (remove (sTemp2.begin(), sTemp2.end(), ' '), sTemp2.end()); //clean up\n            sTemp2.erase(find_if(sTemp2.rbegin(), sTemp2.rend(), bind1st(std::not_equal_to&lt;char&gt;(), ' ')).base(), sTemp2.end());\n            sTemp3.erase (remove (sTemp3.begin(), sTemp3.end(), ' '), sTemp3.end()); //clean up\n            sTempToInt = stoi(sTemp1);//file is instructor\n\n            vector&lt;intructor&gt; intruct;\n            intruct.push_back(intructor()); //Push back new subject created with default constructor.\n\n            for(int lineNum = 0; lineNum&gt;= lineCount; lineNum++) //Will create a set of vectors for each line.\n            {\n                intruct[lineNum].id = sTempToInt;\n                intruct[lineNum].name = sTemp2;\n                intruct[lineNum].dept = sTemp3;\n\n                intruct.push_back(intructor());  //Adds a new element:\n            }\n\n            cout &lt;&lt; sTempToInt &lt;&lt; \"\\n\" &lt;&lt; sTemp2 &lt;&lt; \"\\n\" &lt;&lt; sTemp3 &lt;&lt; \"\\n\";\n        }\n</code></pre>\n\n<p>The part that is giving me the error is </p>\n\n<pre><code>vector&lt;department&gt; deptVec;\n    cout &lt;&lt; \"Vector output: \" &lt;&lt; deptVec[0].budget;\n</code></pre>\n\n<p>It is suppose to output a int but throughs an error.\nI checked that department.budget is holding the int. Not sure what to try.</p>\n"}, {"tags": ["c++", "cin"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1537378622, "post_id": 52411397, "comment_id": 91766454, "body": "Pretty much all input operations block.  What you can do to work around that is spin up a thread, get the input in the thread, and then in your main thread you can check and see if that thread is ready (has read in data)"}, {"owner": {"reputation": 22156, "user_id": 406592, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/c5f4Q.jpg?s=128&g=1", "display_name": "Matt Parkins", "link": "https://stackoverflow.com/users/406592/matt-parkins"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1537378624, "post_id": 52411397, "comment_id": 91766455, "body": "Please instruct me how this post could be improved if you&#39;re going to DV."}, {"owner": {"reputation": 22156, "user_id": 406592, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/c5f4Q.jpg?s=128&g=1", "display_name": "Matt Parkins", "link": "https://stackoverflow.com/users/406592/matt-parkins"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1537378669, "post_id": 52411397, "comment_id": 91766480, "body": "@NathanOliver That may well be the only solution."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1537378740, "post_id": 52411397, "comment_id": 91766511, "body": "You could go down to a lower level, and check if the file-descriptor <code>STDIN_FILENO</code> is readable with e.g. the <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/select.html\" rel=\"nofollow noreferrer\"><code>select</code></a> function. With a zero timeout it can be used to poll without blocking."}], "answers": [{"tags": [], "owner": {"reputation": 22156, "user_id": 406592, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/c5f4Q.jpg?s=128&g=1", "display_name": "Matt Parkins", "link": "https://stackoverflow.com/users/406592/matt-parkins"}, "is_accepted": false, "score": 0, "last_activity_date": 1537443570, "creation_date": 1537443570, "answer_id": 52424327, "question_id": 52411397, "link": "https://stackoverflow.com/questions/52411397/check-cin-from-another-program-without-waiting-in-osx/52424327#52424327", "title": "Check cin from another program without waiting in OSX", "body": "<p>To fill out the idea mentioned in a comment, the easiest way since C++11 is simply to start a thread that waits for input and, when it is received, add it to a shared queue container.  Doing so requires use of mutex locking &amp; unlocking.  This container then can be used to check if empty and, if it has something in it, the data can just be read and popped off of the front of the queue.  Something like the following:</p>\n\n<pre><code>#include &lt;thread&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nstd::mutex qmutex;\nstd::queue&lt;std::string&gt; queue;\n\nvoid listen() {\n    std::string sin;\n    while (true) {\n        std::cin &gt;&gt; sin;     // Thread will wait here for stdin to arrive\n        qmutex.lock();\n        queue.push(sin);\n        qmutex.unlock();\n    }\n}\n\nvoid mainstuff() {\n    std::thread t1(listen);\n    while (true) {\n        qmutex.lock();\n        if (!queue.empty()) {\n           //There's something in the queue, read it/take a copy\n           queue.pop();\n        }\n        qmutex.unlock();\n\n        // Respond to input\n        // Continue work\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": false, "score": 0, "last_activity_date": 1537454494, "creation_date": 1537454494, "answer_id": 52427734, "question_id": 52411397, "link": "https://stackoverflow.com/questions/52411397/check-cin-from-another-program-without-waiting-in-osx/52427734#52427734", "title": "Check cin from another program without waiting in OSX", "body": "<p>I don't believe <code>cin</code> supports non-blocking I/O operations or timeouts.</p>\n\n<p>Here's an example of the lower-level way to accomplish the task, using <code>select()</code> and file descriptors.  This program will immediately print to <code>stdout</code> any text it receives from <code>stdin</code>, and also wake up every 5 seconds (even if no text is received from <code>stdin</code>) just to print a fixed message.  You can modify the wakeup timeout to whatever you like (including zero for an instantaneous-poll behavior), and/or add more file descriptors for it to react to if you prefer a more event-driven approach.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/select.h&gt;\n\nstatic void RegisterFileDescriptor(int fd, int &amp; maxFD, fd_set &amp; fdset)\n{\n   FD_SET(fd, &amp;fdset);\n   if (fd &gt; maxFD) maxFD = fd;\n}\n\nint main()\n{\n    const int stdinFileno = fileno(stdin);\n\n    // This call is just here so that our parent process will immediately see any\n    // text lines that we print to stdout.  If you're only reading from stdin and never\n    // writing responses back to stdout, then it's not really necessary.\n    (void) setlinebuf(stdout);\n\n    fd_set readSet;\n    while(true)\n    {\n       int maxFD = -1;\n\n       FD_ZERO(&amp;readSet);\n       RegisterFileDescriptor(stdinFileno, maxFD, readSet);\n\n       // If you want to react to incoming data on any other\n       // file descriptors as well, you could call\n       // RegisterFileDescriptor on them here\n\n       struct timeval timeoutDelay = {5, 0};  // let's force a wakeup every 5 seconds\n\n       if (select(maxFD+1, &amp;readSet, NULL, NULL, &amp;timeoutDelay) &lt; 0)\n       {\n          perror(\"select\");\n          break;\n       }\n\n       printf(\"select() returned!\\n\");\n\n       if (FD_ISSET(stdinFileno, &amp;readSet))\n       {\n          char buf[512];\n          if (fgets(buf, sizeof(buf), stdin)) printf(\"Read from stdin: [%s]\\n\", buf);\n       }\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 22156, "user_id": 406592, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/c5f4Q.jpg?s=128&g=1", "display_name": "Matt Parkins", "link": "https://stackoverflow.com/users/406592/matt-parkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "closed_date": 1537454520, "answer_count": 2, "score": 0, "last_activity_date": 1537454494, "creation_date": 1537378506, "last_edit_date": 1537378636, "question_id": 52411397, "link": "https://stackoverflow.com/questions/52411397/check-cin-from-another-program-without-waiting-in-osx", "closed_reason": "Duplicate", "title": "Check cin from another program without waiting in OSX", "body": "<p>In C++ on OSX, how do we check std::cin for data without waiting?</p>\n\n<p>The expected data is not coming from a keyboard or human, but from a program that has started my executable and talks to my executable via stdin.  This 'parent' program will tell me to start a long process, may interrupt, and I may periodically send data back to it via stdout, therefore the checking of stdin must not block.  I'm using XCode.</p>\n\n<p>So far I have attempted to test via the following, neither of which seem to work:</p>\n\n<pre><code>//Return true if there is data waiting version 1\nreturn (std::cin.peek() != EOF);\n</code></pre>\n\n<hr>\n\n<pre><code>//Return true if there is data waiting version 2\nreturn (std::cin.rdbuf() &amp;&amp; std::cin.rdbuf()-&gt;in_avail() &gt;= 0);\n</code></pre>\n"}, {"tags": ["c++", "smart-pointers"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 9, "creation_date": 1537378065, "post_id": 52411203, "comment_id": 91766183, "body": "The big problem is your design choice to use recursion and have the <code>insert</code> function handled by the <code>Node</code> instead of entirely in the <code>List</code>. That leads to your current need to use <code>std::shared_ptr</code> instead of <code>std::unique_ptr</code>. Instead of thinking about these &quot;smart pointers&quot; as simply self-deleting pointers, think about them in terms of <i>ownership</i>. Who <i>owns</i> the nodes? Do the nodes own themselves? Do the <code>List</code> own the nodes? Can that ownership be shared?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1537378458, "post_id": 52411203, "comment_id": 91766387, "body": "It can make sense. In a singly linked list the node is a reasonable place to put ownership  of the next node. In a doubly linked list, <code>next</code> and <code>prev</code> as <code>unique_ptr</code>s makes no sense because one node&#39;s <code>next</code> is another&#39;s <code>prev</code> and so much for unique. But if you pick one and leave the other raw (or, if you&#39;re posh, <code>unique_ptr</code> with a custom deleter that does nothing)."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1537378770, "post_id": 52411203, "comment_id": 91766520, "body": "<code>shared_ptr</code> makes no sense for a singly linked list because who is the node shared with? No one. In a doubly linked list it looks like it makes sense, <code>next</code> and <code>prev</code> both point to the same thing, but then you have to consider that the node is either in the list or out of it, so it&#39;s not really being shared."}, {"owner": {"reputation": 994, "user_id": 2044454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EsRrT.jpg?s=128&g=1", "display_name": "Victor Eijkhout", "link": "https://stackoverflow.com/users/2044454/victor-eijkhout"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1537379092, "post_id": 52411203, "comment_id": 91766667, "body": "@user4581301: indeed, so that&#39;s why I was trying the replace shared with unique."}, {"owner": {"reputation": 994, "user_id": 2044454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EsRrT.jpg?s=128&g=1", "display_name": "Victor Eijkhout", "link": "https://stackoverflow.com/users/2044454/victor-eijkhout"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1537379376, "post_id": 52411203, "comment_id": 91766792, "body": "@Some programmer dude: A node owns its next, because maybe I want to transplant that tail onto something else. Clearly the tail is then not owned by anyone but the node that directly points at it. Likewise the list only owns the head node. So there is no shared ownership. I do see that the design of Node::insert is problematic. Maybe I should replace it with a function that can only update the tail. But then I get code replication because that function needs to be both in the Node and List class."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1537379379, "post_id": 52411203, "comment_id": 91766793, "body": "Why does insert return a node pointer? If you want it unique, then you can&#39;t keep it in the list and return it, but what if you return void?"}, {"owner": {"reputation": 994, "user_id": 2044454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EsRrT.jpg?s=128&g=1", "display_name": "Victor Eijkhout", "link": "https://stackoverflow.com/users/2044454/victor-eijkhout"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1537379493, "post_id": 52411203, "comment_id": 91766837, "body": "@Kenny Ostrom : when would inserting a node, given a node, ever return void? I&#39;m not sure what you&#39;re getting at here."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1537379558, "post_id": 52411203, "comment_id": 91766871, "body": "Take care when deleting the list when using unique pointers for next.  The delete will go recursive and with a long list may exceed the default stack size"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1537379756, "post_id": 52411203, "comment_id": 91766970, "body": "No. Use raw pointers. Better yet, don&#39;t use a linked list."}], "owner": {"reputation": 994, "user_id": 2044454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EsRrT.jpg?s=128&g=1", "display_name": "Victor Eijkhout", "link": "https://stackoverflow.com/users/2044454/victor-eijkhout"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1537378970, "creation_date": 1537377737, "last_edit_date": 1537378970, "question_id": 52411203, "link": "https://stackoverflow.com/questions/52411203/does-it-make-sense-to-use-unique-pointers-in-a-linked-list", "title": "Does it make sense to use unique pointers in a linked list?", "body": "<p>I have the following design for a <code>List</code> and <code>Node</code> class. I don't particularly care about execution efficiency here, so I'm using a recursive function rather than a simple loop.</p>\n\n<pre><code>shared_ptr&lt;Node&gt; Node::insert(int value) {\n  if (value == this-&gt;datavalue) {\n    // we have already seen this value: just count\n    datacount++;\n    return shared_from_this();\n  } else if (value &lt; this-&gt;datavalue) {\n    // insert before current\n    auto newhead = shared_ptr&lt;Node&gt;( new Node(value) );\n    newhead-&gt;next = this-&gt;shared_from_this();\n    return newhead;\n  } else if (next == nullptr) {\n    // insert after current, and current is the tail\n    this-&gt;next = shared_ptr&lt;Node&gt;( new Node(value) );\n    return shared_from_this();\n  } else {\n    // insert after current, which is not the tail\n    auto newtail = next-&gt;insert(value);\n    this-&gt;next = newtail;\n    return shared_from_this();\n  }\n};\nvoid List::insert(int value) {\n  if (head == nullptr) // list is empty; make first node\n    head = shared_ptr&lt;Node&gt;( new Node(value) );\n  else // insert this value somewhere\n    head = head-&gt;insert(value);\n};\n</code></pre>\n\n<p>I can not figure out how to use unique pointers here. The <code>Node::insert</code> routine returns <code>shared_from_this</code> in one case, or a new node in another case. So I would sort of need <code>unique_from_this</code>, which I know doesn't exist.</p>\n\n<p>Can I maintain this design, or should I just write a big while loop over the list?</p>\n\n<p>PS I should really use <code>make_shared</code> in the above.</p>\n"}, {"tags": ["c++", "qt", "pointers", "hex"], "comments": [{"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 2, "creation_date": 1537376841, "post_id": 52410960, "comment_id": 91765603, "body": "Is this the real code?  What&#39;s <code>j</code> in <code>tmpString[j]</code>?"}, {"owner": {"reputation": 155, "user_id": 5527743, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/358625ddba0ce3c9ce45c5068742290d?s=128&d=identicon&r=PG&f=1", "display_name": "Som", "link": "https://stackoverflow.com/users/5527743/som"}, "reply_to_user": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1537377032, "post_id": 52410960, "comment_id": 91765694, "body": "@G.M. Sorry, I have edited the question."}, {"owner": {"reputation": 99, "user_id": 10354561, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2iT7vjOnduE/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNJ0VHmjIjKAUYXrsgos7nxWSe0UA/mo/photo.jpg?sz=128", "display_name": "FrozenM", "link": "https://stackoverflow.com/users/10354561/frozenm"}, "edited": false, "score": 1, "creation_date": 1537377467, "post_id": 52410960, "comment_id": 91765873, "body": "48 is the code of &#39;0&#39; ;)  your first char of &#39;0x254&#39; string. And this is not crc16 function."}, {"owner": {"reputation": 155, "user_id": 5527743, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/358625ddba0ce3c9ce45c5068742290d?s=128&d=identicon&r=PG&f=1", "display_name": "Som", "link": "https://stackoverflow.com/users/5527743/som"}, "edited": false, "score": 0, "creation_date": 1537377508, "post_id": 52410960, "comment_id": 91765898, "body": "Yes, I removed some lines from the code. The program contains many functions."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1537377733, "post_id": 52410960, "comment_id": 91766006, "body": "BTW, Qt has a CRC 16  already: <a href=\"http://doc.qt.io/archives/qt-4.8/qbytearray.html#qChecksum\" rel=\"nofollow noreferrer\">doc.qt.io/archives/qt-4.8/qbytearray.html#qChecksum</a>"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1537377982, "post_id": 52410960, "comment_id": 91766132, "body": "&quot;the entire value of ptr&quot;, as used at  <code>cc = 0xff &amp; *ptr;</code> is an <code>unsigned char</code>, not a sequence of chars."}, {"owner": {"reputation": 155, "user_id": 5527743, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/358625ddba0ce3c9ce45c5068742290d?s=128&d=identicon&r=PG&f=1", "display_name": "Som", "link": "https://stackoverflow.com/users/5527743/som"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1537378137, "post_id": 52410960, "comment_id": 91766223, "body": "@drescherjm I have added included the full CRC calculations."}, {"owner": {"reputation": 155, "user_id": 5527743, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/358625ddba0ce3c9ce45c5068742290d?s=128&d=identicon&r=PG&f=1", "display_name": "Som", "link": "https://stackoverflow.com/users/5527743/som"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1537378182, "post_id": 52410960, "comment_id": 91766252, "body": "@Ripi2 Yes, I get it. Is there a way I can achieve it."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 1, "creation_date": 1537378278, "post_id": 52410960, "comment_id": 91766298, "body": "@Som If you know the length of the sequence, then it&#39;s a matter of several <code>&amp;</code> and <code>&lt;&lt;</code> operations"}], "owner": {"reputation": 155, "user_id": 5527743, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/358625ddba0ce3c9ce45c5068742290d?s=128&d=identicon&r=PG&f=1", "display_name": "Som", "link": "https://stackoverflow.com/users/5527743/som"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1537378073, "creation_date": 1537376719, "last_edit_date": 1537378073, "question_id": 52410960, "link": "https://stackoverflow.com/questions/52410960/qt-passing-hex-value-as-an-pointer-and-accessing-it", "title": "Qt passing hex value as an pointer and accessing it", "body": "<p>In the below program, I am trying to pass hexadecimal value to CRC16 function and do some calculations on it. But in the line (cc = 0xff &amp; *ptr;) instead of ANDing the entire value of ptr only the first value is used. Can any one point out the mistake I am making here.\nThanks.</p>\n\n<pre><code>unsigned int crcValues[256];\n\nunsigned int CRC16(unsigned int crc ,unsigned char *ptr)\n{\n    unsigned char tmp;\n    unsigned char cc;\n    cc = 0xff &amp; ((unsigned int)*ptr);\n    tmp = ((crc &gt;&gt; 8) ^ cc);\n\n    crc = (crc &lt;&lt; 8) ^ crcValues[tmp &amp; 0xff];\n    crc = crc &amp; 0xffff;\n    return crc;\n\n}\n\nvoid CRCCorrectionCode()\n{\n    unsigned int crc;\n    int i = 0;\n    int j;\n\n    for(int c = 0;c &lt; 256; c++)\n    {\n        crc = 0;\n        j = c;\n        c = c &lt;&lt; 8;\n        for(int j = 0;j &lt; 8;j++){\n            if((crc ^ c) &amp; 0x8000)\n                crc = (crc &lt;&lt; 1) ^ poly;\n            else\n                crc = crc &lt;&lt; 1;\n            c = c &lt;&lt; 1;\n        }\n        c = j;\n        crcValues[i] = crc;\n        i++;\n    }\n}\n\nint main(int argc, char *argv[])\n{\n    QCoreApplication a(argc, argv);\n    CRCCorrectionCode();\n    QString tmpString = QString(\"0x%1\").arg(254, 2, 16, QLatin1Char('0'));;\n    int crc = 0;\n    CRC16(crc,(unsigned char* )tmpString.toLatin1().data());\n}\n</code></pre>\n"}, {"tags": ["c++", "gcc", "floating-point", "clang", "iostream"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 4, "creation_date": 1537376768, "post_id": 52410931, "comment_id": 91765570, "body": "Unrelated, but variable names <code>iss</code> for output and <code>oss</code> for input are a weird and confusing choice."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1537376890, "post_id": 52410931, "comment_id": 91765621, "body": "fyi 1e-320 is in the sub-normal range: <a href=\"https://en.cppreference.com/w/cpp/language/type\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/type</a>"}, {"owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1537412273, "post_id": 52410931, "comment_id": 91777107, "body": "@ShafikYaghmour Well <code>1e-320</code> is obviously within the range <code>[-DBL_MAX, DBL_MAX]</code>, even if it cannot be represented exactly."}, {"owner": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "edited": false, "score": 0, "creation_date": 1537430693, "post_id": 52410931, "comment_id": 91783830, "body": "I&#39;ve reported a <a href=\"https://bugs.llvm.org/show_bug.cgi?id=39012\" rel=\"nofollow noreferrer\">libc++ bug</a>."}], "answers": [{"comments": [{"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "edited": false, "score": 2, "creation_date": 1537402462, "post_id": 52414829, "comment_id": 91775011, "body": "@Daniel: It is a bug. It is not a violation of the C++ standard, but it is bad design. It ought to be reported as a bug, and the failure of an input stream to read the output stream is a good example to supply with the bug report, and it ought to be fixed."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1537414490, "post_id": 52414829, "comment_id": 91777536, "body": "That <code>strtod</code> may report <code>ERANGE</code> on this input says nothing about whether <code>do_get</code> is permitted to set <code>failbit</code>."}], "tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": false, "score": 4, "last_activity_date": 1537399273, "last_edit_date": 1592644375, "creation_date": 1537394861, "answer_id": 52414829, "question_id": 52410931, "link": "https://stackoverflow.com/questions/52410931/why-does-clang-stdostream-write-a-double-that-stdistream-cant-read/52414829#52414829", "title": "Why does Clang std::ostream write a double that std::istream can&#39;t read?", "body": "<p>I believe clang is conformant here, if we read the answer to <a href=\"https://stackoverflow.com/a/48087390/1708801\">std::stod throws out_of_range error for a string that should be valid</a> it says:</p>\n<blockquote>\n<p>The C++ standard allows conversions of strings to <code>double</code> to report underflow if the result is in the subnormal range even though it is representable.</p>\n<p>7.63918\u202210<sup>-313</sup> is within the range of <code>double</code>, but it is in the subnormal range. The C++ standard says <code>stod</code> calls <code>strtod</code> and then defers to the C standard to define <code>strtod</code>. The C standard indicates that <code>strtod</code> may underflow, about which it says \u201cThe result underflows if the magnitude of the mathematical result is so small that the mathematical result cannot be represented, without extraordinary roundoff error, in an object of the specified type.\u201d That is awkward phrasing, but it refers to the rounding errors that occur when subnormal values are encountered. (Subnormal values are subject to larger relative errors than normal values, so their rounding errors might be said to be extraordinary.)</p>\n<p><strong>Thus, a C++ implementation is allowed by the C++ standard to underflow for subnormal values even though they are representable.</strong></p>\n</blockquote>\n<p>We can confirm we are relying on <a href=\"http://eel.is/c++draft/facet.num.get.virtuals#3.3.4\" rel=\"nofollow noreferrer\">strtod from [facet.num.get.virtuals]p3.3.4</a>:</p>\n<blockquote>\n<ul>\n<li>For a double value, the function strtod.</li>\n</ul>\n</blockquote>\n<p>We can test this with this small program (see it live):</p>\n<pre><code>void check(const char* p) \n{\n  std::string str{p};\n \n    printf( &quot;errno before: %d\\n&quot;, errno ) ;\n    double val = std::strtod(str.c_str(), nullptr);\n    printf( &quot;val: %g\\n&quot;, val ) ;\n    printf( &quot;errno after: %d\\n&quot;, errno ) ;\n    printf( &quot;ERANGE value: %d\\n&quot;, ERANGE ) ;\n \n}\n\nint main()\n{\n check(&quot;9.99989e-321&quot;) ;\n}\n</code></pre>\n<p>which the following result:</p>\n<pre><code>errno before: 0\nval: 9.99989e-321\nerrno after: 34\nERANGE value: 34\n</code></pre>\n<p>C11 in <a href=\"https://port70.net/%7Ensz/c/c11/n1570.html#7.22.1.3p10\" rel=\"nofollow noreferrer\">7.22.1.3p10</a> tells us:</p>\n<blockquote>\n<p>The functions return the converted value, if any. If no conversion could be performed, zero is returned. If the correct value overflows and default rounding is in effect (7.12.1), plus or minus HUGE_VAL, HUGE_VALF, or HUGE_VALL is returned (according to the return type and sign of the value), and the value of the macro ERANGE is stored in errno. <strong>If the result underflows (7.12.1), the functions return a value whose magnitude is no greater than the smallest normalized positive number in the return type; whether errno acquires the value ERANGE is implementation-defined.</strong></p>\n</blockquote>\n<p>POSIX uses <a href=\"http://pubs.opengroup.org/onlinepubs/7908799/xsh/strtod.html\" rel=\"nofollow noreferrer\">that convention</a>:</p>\n<blockquote>\n<p>[ERANGE]<br />\nThe value to be returned would cause overflow or underflow.</p>\n</blockquote>\n<p>We can verify it is subnormal via <a href=\"https://en.cppreference.com/w/cpp/numeric/math/fpclassify\" rel=\"nofollow noreferrer\">fpclassify</a> (<a href=\"https://wandbox.org/permlink/PN1UtQXSsvVCDsbr\" rel=\"nofollow noreferrer\">see it live</a>).</p>\n"}], "owner": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 512, "favorite_count": 0, "answer_count": 1, "score": 13, "last_activity_date": 1537399273, "creation_date": 1537376613, "last_edit_date": 1537376915, "question_id": 52410931, "link": "https://stackoverflow.com/questions/52410931/why-does-clang-stdostream-write-a-double-that-stdistream-cant-read", "title": "Why does Clang std::ostream write a double that std::istream can&#39;t read?", "body": "<p>I am using an application that uses <code>std::stringstream</code> to read a matrix of space separated <code>double</code>s from a text file. The application uses code a little like:</p>\n\n<pre><code>std::ifstream file {\"data.dat\"};\nconst auto header = read_header(file);\nconst auto num_columns = header.size();\nstd::string line;\nwhile (std::getline(file, line)) {\n    std::istringstream ss {line}; \n    double val;\n    std::size_t tokens {0};\n    while (ss &gt;&gt; val) {\n        // do stuff\n        ++tokens;\n    }\n    if (tokens &lt; num_columns) throw std::runtime_error {\"Bad data matrix...\"};\n}\n</code></pre>\n\n<p>Pretty standard stuff. I diligently wrote some code to make the data matrix (<code>data.dat</code>), using the following method for each data line:</p>\n\n<pre><code>void write_line(const std::vector&lt;double&gt;&amp; data, std::ostream&amp; out)\n{\n    std::copy(std::cbegin(data), std::prev(std::cend(data)),\n              std::ostream_iterator&lt;T&gt; {out, \" \"});\n    out &lt;&lt; data.back() &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>i.e. using <code>std::ostream</code>. However, I found the application was failing to read my data file using this method (throwing the exception above), in particular it was failing to read <code>7.0552574226130007e-321</code>.</p>\n\n<p>I wrote the following minimal test case which shows the behaviour:</p>\n\n<pre><code>// iostream_test.cpp\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n\nint main()\n{\n    constexpr double x {1e-320};\n    std::ostringstream oss {};\n    oss &lt;&lt; x;\n    const auto str_x = oss.str();\n    std::istringstream iss {str_x};\n    double y;\n    if (iss &gt;&gt; y) {\n        std::cout &lt;&lt; y &lt;&lt; std::endl;\n    } else {\n        std::cout &lt;&lt; \"Nope\" &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>I tested this code on LLVM 10.0.0 (clang-1000.11.45.2):</p>\n\n<pre><code>$ clang++ --version\nApple LLVM version 10.0.0 (clang-1000.11.45.2)\nTarget: x86_64-apple-darwin17.7.0 \n$ clang++ -std=c++14 -o iostream_test iostream_test.cpp\n$ ./iostream_test\nNope\n</code></pre>\n\n<p>I also tried compiling with Clang 6.0.1, 6.0.0, 5.0.1, 5.0.0, 4.0.1, and 4.0.0, but got the same result.</p>\n\n<p>Compiling with GCC 8.2.0, the code works as I would expect:</p>\n\n<pre><code>$ g++-8 -std=c++14 -o iostream_test iostream_test.cpp\n$ ./iostream_test.cpp\n9.99989e-321\n</code></pre>\n\n<p>Why is there a difference between Clang and GCC? Is this a clang bug, and if not, how should one use C++ streams to write portable floating-point IO?</p>\n"}, {"tags": ["c++", "casting", "operator-precedence", "static-cast"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1537375610, "post_id": 52410646, "comment_id": 91765009, "body": "See <a href=\"https://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow noreferrer\">operator precendence</a>. Casting has one of the highest precedent, higher than division and other arithmetic operations."}, {"owner": {"reputation": 1651, "user_id": 1548052, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8b9a9309ea3ed901b3118852bfe57cbc?s=128&d=identicon&r=PG", "display_name": "Denis Rouzaud", "link": "https://stackoverflow.com/users/1548052/denis-rouzaud"}, "edited": false, "score": 0, "creation_date": 1537375705, "post_id": 52410646, "comment_id": 91765056, "body": "sorry, will reformulate"}, {"owner": {"reputation": 1651, "user_id": 1548052, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8b9a9309ea3ed901b3118852bfe57cbc?s=128&d=identicon&r=PG", "display_name": "Denis Rouzaud", "link": "https://stackoverflow.com/users/1548052/denis-rouzaud"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537375802, "post_id": 52410646, "comment_id": 91765106, "body": "@Fran&#231;oisAndrieux can you detail?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1537375953, "post_id": 52410646, "comment_id": 91765178, "body": "<a href=\"https://en.cppreference.com/w/cpp/language/explicit_cast\" rel=\"nofollow noreferrer\">explicit type conversion</a> resolves to a series of cast <i>as needed</i>. If <code>myValueA()</code> returns a value for which <code>static_cast&lt;double&gt;</code> would be sufficient, it&#39;s correct to view the <code>(double)</code> as one. It would only be a <code>reinterpret_cast</code> if the cast wasn&#39;t possible with <code>static_cast</code>. Also note that explicit type conversion can remove <code>const</code> which neither <code>reinterpret_cast</code> nor <code>static_cast</code> can do. So some explicit type conversions may also require a <code>const_cast</code> as part of the series."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537381334, "post_id": 52410646, "comment_id": 91767774, "body": "Also note that <i>function call</i> operator has higher precedence than <i>C-style cast</i> operator. (BTW, its kind-of misleading that we say &quot;higher precedence&quot;, but in the table referenced by @Fran&#231;oisAndrieux, the precedence has actually lower number)."}, {"owner": {"reputation": 4530, "user_id": 94687, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/ef249e4381c9d55297cddc4bd5b5c3c2?s=128&d=identicon&r=PG", "display_name": "imz -- Ivan Zakharyaschev", "link": "https://stackoverflow.com/users/94687/imz-ivan-zakharyaschev"}, "edited": false, "score": 0, "creation_date": 1568512069, "post_id": 52410646, "comment_id": 102296101, "body": "Same question (for plain C): <a href=\"https://stackoverflow.com/q/3354446/94687\">stackoverflow.com/q/3354446/94687</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5788, "user_id": 4757, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/35f9815e64399a4e81e2e379b6560957?s=128&d=identicon&r=PG", "display_name": "Parker Coates", "link": "https://stackoverflow.com/users/4757/parker-coates"}, "is_accepted": false, "score": 6, "last_activity_date": 1537376000, "last_edit_date": 1537376000, "creation_date": 1537375716, "answer_id": 52410706, "question_id": 52410646, "link": "https://stackoverflow.com/questions/52410646/old-style-simple-cast-precedence-in-c/52410706#52410706", "title": "old-style simple cast precedence in c++", "body": "<p>The cast has higher precendence, so it is equivalent to</p>\n\n<pre><code>static_cast&lt;double&gt;(myValueA()) / myValueB()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 9, "last_activity_date": 1537375752, "creation_date": 1537375752, "answer_id": 52410719, "question_id": 52410646, "link": "https://stackoverflow.com/questions/52410646/old-style-simple-cast-precedence-in-c/52410719#52410719", "title": "old-style simple cast precedence in c++", "body": "<p>In</p>\n\n<pre><code>( double ) myValueA() / myValueB()\n</code></pre>\n\n<p><code>( double )</code> is a c-style cast.  If we look at the <a href=\"https://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"noreferrer\">operator precedence table</a> we will see that it has a higher precedence than the arithmetic operators so</p>\n\n<pre><code>( double ) myValueA() / myValueB()\n</code></pre>\n\n<p>is the same as</p>\n\n<pre><code>static_cast&lt;double&gt;(myValueA()) / myValueB()\n</code></pre>\n"}], "owner": {"reputation": 1651, "user_id": 1548052, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8b9a9309ea3ed901b3118852bfe57cbc?s=128&d=identicon&r=PG", "display_name": "Denis Rouzaud", "link": "https://stackoverflow.com/users/1548052/denis-rouzaud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 691, "favorite_count": 0, "accepted_answer_id": 52410719, "answer_count": 2, "score": 5, "last_activity_date": 1537376132, "creation_date": 1537375514, "last_edit_date": 1537376132, "question_id": 52410646, "link": "https://stackoverflow.com/questions/52410646/old-style-simple-cast-precedence-in-c", "title": "old-style simple cast precedence in c++", "body": "<p>I have some old-style casting in some c++ code which I would like to convert to new-style. I had a look to precedence and associativity operators <a href=\"https://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"noreferrer\">documentation</a>, but I failed to understand it.</p>\n\n<pre><code>( double ) myValueA() / myValueB()\n</code></pre>\n\n<p>is equivalent to </p>\n\n<pre><code>static_cast&lt;double&gt;( myValueA() ) / myValueB()\n</code></pre>\n\n<p>or to </p>\n\n<pre><code>static_cast&lt;double&gt;( myValueA() / myValueB() )\n</code></pre>\n\n<p>I suppose the answer will the same for other numerical operators (*/+-)</p>\n"}, {"tags": ["c++", "function", "computational-geometry"], "comments": [{"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 2, "creation_date": 1537375590, "post_id": 52410598, "comment_id": 91765002, "body": "Sorry. I don&#39;t understand what do you mean by &quot;<i>set up the parameters in either the header or source file</i>&quot; Can you explain?"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1537375617, "post_id": 52410598, "comment_id": 91765012, "body": "It sounds like you should review &#39;formal parameters&#39; and &#39;actual parameters&#39;"}, {"owner": {"reputation": 23279, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "edited": false, "score": 0, "creation_date": 1537375652, "post_id": 52410598, "comment_id": 91765028, "body": "You need to give name to the arguments to the function so you can use them to create the result and return that result(where now you have placeholder return 0;)."}, {"owner": {"reputation": 11, "user_id": 10386191, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sLZL99RFn-s/AAAAAAAAAAI/AAAAAAAACpA/-gc1uLtoVLA/photo.jpg?sz=128", "display_name": "Corey Brown", "link": "https://stackoverflow.com/users/10386191/corey-brown"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1537375793, "post_id": 52410598, "comment_id": 91765101, "body": "@Ripi2 I don&#39;t know where to declare the variables. Do I declare in both header and source file?"}, {"owner": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "edited": false, "score": 0, "creation_date": 1537375999, "post_id": 52410598, "comment_id": 91765199, "body": "It looks to me like between what you have listed and what you were provided there should be no questions...maybe read your textbook regarding separate compilation.  What goes in the header file and what goes in the implementation file?  Just do it.  You can overload those methods to do area versus volume, squares versus circles, etc."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10386191, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sLZL99RFn-s/AAAAAAAAAAI/AAAAAAAACpA/-gc1uLtoVLA/photo.jpg?sz=128", "display_name": "Corey Brown", "link": "https://stackoverflow.com/users/10386191/corey-brown"}, "edited": false, "score": 0, "creation_date": 1537379341, "post_id": 52410816, "comment_id": 91766773, "body": "I&#39;ve updated my code, is there a better way to calculate the circumference? I feel like I took the long way."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "reply_to_user": {"reputation": 11, "user_id": 10386191, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sLZL99RFn-s/AAAAAAAAAAI/AAAAAAAACpA/-gc1uLtoVLA/photo.jpg?sz=128", "display_name": "Corey Brown", "link": "https://stackoverflow.com/users/10386191/corey-brown"}, "edited": false, "score": 0, "creation_date": 1537379543, "post_id": 52410816, "comment_id": 91766866, "body": "@CoreyBrown That&#39;s another question, not a comment in this answer. Anyhow, your approach is right, just that for squared calculation <code>x*x</code> is preferred to <code>pow(x, 2)</code>."}], "tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": true, "score": 2, "last_activity_date": 1537376081, "creation_date": 1537376081, "answer_id": 52410816, "question_id": 52410598, "link": "https://stackoverflow.com/questions/52410598/how-to-find-the-computational-geometry-of-circles-and-rectangles-using-x-and-y-v/52410816#52410816", "title": "How to find the computational geometry of circles and rectangles using x and y values in c++?", "body": "<p>In a header:</p>\n\n<pre><code>someType MyFunc(someType1 var1, someType2 var2); //notice the \";\" at end\n</code></pre>\n\n<p><code>someType</code> is the type of what the function returns, for example <code>double</code>. Same goes for parameters. For example <code>double MyFunc(int var1, double var2)</code></p>\n\n<p>In the source</p>\n\n<pre><code>someType MyFunc(someType1 var1, someType2 var2)\n{\n    do something with var1, var2\n    return something of type 'someType'\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10386191, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sLZL99RFn-s/AAAAAAAAAAI/AAAAAAAACpA/-gc1uLtoVLA/photo.jpg?sz=128", "display_name": "Corey Brown", "link": "https://stackoverflow.com/users/10386191/corey-brown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "closed_date": 1537378411, "accepted_answer_id": 52410816, "answer_count": 1, "score": -5, "last_activity_date": 1537379279, "creation_date": 1537375291, "last_edit_date": 1537379279, "question_id": 52410598, "link": "https://stackoverflow.com/questions/52410598/how-to-find-the-computational-geometry-of-circles-and-rectangles-using-x-and-y-v", "closed_reason": "Needs details or clarity", "title": "How to find the computational geometry of circles and rectangles using x and y values in c++?", "body": "<p>I'm a beginner in c++ and I've been tasked with finding certain geometries of circles and rectangles in c++. My issue is I don't know how to set up the parameters in either the header or source file, I don't want the solution, I want to better understand how to set up the functions.</p>\n\n<p>Each function with its parameters are as follows:</p>\n\n<ul>\n<li><p>GetCircumference(xc: double, yc: double, xe: double, ye: double): double</p></li>\n<li><p>parameters:</p>\n\n<p>xc: double, x-value of circle\u2019s center,</p>\n\n<p>yc: double, y-value of circle\u2019s center,</p>\n\n<p>xe: double, x-value of point on circle\u2019s edge, and</p>\n\n<p>ye: double, y-value of point on circle\u2019s edge</p></li>\n</ul>\n\n<p>\u2013 returns: the floating point value representing the circumference of a circle centered at (xc, yc)\nwith a second point on the edge (xe, ye).</p>\n\n<ul>\n<li>GetVolume(xc: double, yc: double, xe: double, ye: double): double</li>\n<li><p>parameters:</p>\n\n<p>xc: double, x-value of circle\u2019s center,</p>\n\n<p>yc: double, y-value of circle\u2019s center,</p>\n\n<p>xe: double, x-value of point on circle\u2019s edge, and</p>\n\n<p>ye: double, y-value of point on circle\u2019s edge</p></li>\n</ul>\n\n<p>\u2013 returns: the floating point value representing the volume of the circle centered at (xc, yc) with a second point on the edge (xe, ye).</p>\n\n<ul>\n<li><p>GetPerimeter(xll: double, yll: double, xur: double, yur: double): double</p></li>\n<li><p>parameters:</p>\n\n<p>xll: double, x-value of lower-left point of rectangle,</p>\n\n<p>yll: double, y-value of lower-left point of rectangle,</p>\n\n<p>xur: double, x-value of upper-right point of rectangle, and</p>\n\n<p>yur: double, y-value of upper-right point of rectangle</p></li>\n</ul>\n\n<p>\u2013 returns: the floating point value representing the perimeter of the rectangle</p>\n\n<ul>\n<li><p>GetDistanceSquared(x1: double, y1: double, x2: double, y2: double): double</p></li>\n<li><p>parameters:</p>\n\n<p>x1: double, x-value of point 1,</p>\n\n<p>y1: double, y-value of point 1,</p>\n\n<p>x2: double, x-value of point 2, and</p>\n\n<p>y2: double, y-value of point 2</p></li>\n</ul>\n\n<p>\u2013 returns: the floating point value representing the squared distance between points 1 and 2.</p>\n\n<ul>\n<li><p>GetDistance(x1: double, y1: double, x2: double, y2: double): double</p></li>\n<li><p>parameters:</p>\n\n<p>x1: double, x-value of point 1,</p>\n\n<p>y1: double, y-value of point 1,</p>\n\n<p>x2: double, x-value of point 2, and</p>\n\n<p>y2: double, y-value of point 2</p></li>\n</ul>\n\n<p>\u2013 returns: the floating point value representing the distance between points 1 and 2.</p>\n\n<p>comp_geo.h:</p>\n\n<pre><code>/*comp_geo.h*/\ndouble GetCircumference(double xc, double yc, double xe, double ye);\n\ndouble GetVolume(double, double, double, double);\n\ndouble GetPerimeter(double, double, double, double);\n\ndouble GetDistanceSquared(double, double, double, double);\n\ndouble GetDistance(double, double, double, double);\n</code></pre>\n\n<p>comp_geo.cc:</p>\n\n<pre><code>/*comp_geo.cc*/\n#include &lt;cmath&gt;\n\n#include \"comp_geo.h\"\n\ndouble GetCircumference(double xc, double yc, double xe, double ye) {\n  double pi = 3.14159265358;\n  double r = sqrt(pow((xe - xc), 2) + pow((ye - yc), 2));\n  double c = 2 * pi * r;\n  return c;\n}\n\ndouble GetVolume(double, double, double, double) {\n  return 0.0;\n}\n\ndouble GetPerimeter(double, double, double, double) {\n  return 0.0;\n}\n\ndouble GetDistanceSquared(double, double, double, double) {\n  return 0.0;\n}\n\ndouble GetDistance(double, double, double, double) {\n  return 0.0;\n}\n</code></pre>\n\n<p>This is the test file that we were given to complete this assignment:</p>\n\n<p>test.cc:</p>\n\n<pre><code>/*test.cc*/\n#include &lt;iostream&gt;\nusing std::cout;\nusing std::endl;\n\n#include \"comp_geo.h\"\n\nbool TestGetCircumference() {\n  const double expected = 0.0;\n  double actual = GetCircumference(0.0, 0.0, 0.0, 0.0);\n  if(actual != expected) {\n    cout &lt;&lt; \"Expected: \" &lt;&lt; expected &lt;&lt; \", Actual: \" &lt;&lt; actual &lt;&lt; endl;\n    return false;\n  }\n\n  return true;\n}\nbool TestGetPerimeter() {\n  const double expected = 0.0;\n  double actual = GetPerimeter(0.0, 0.0, 0.0, 0.0);\n  if(actual != expected) {\n    cout &lt;&lt; \"Expected: \" &lt;&lt; expected &lt;&lt; \", Actual: \" &lt;&lt; actual &lt;&lt; endl;\n    return false;\n  }\n\n  return true;\n}\n\nbool TestGetDistanceSquared() {\n  const double expected = 0.0;\n  double actual = GetDistanceSquared(0.0, 0.0, 0.0, 0.0);\n  if(actual != expected) {\n    cout &lt;&lt; \"Expected: \" &lt;&lt; expected &lt;&lt; \", Actual: \" &lt;&lt; actual &lt;&lt; endl;\n    return false;\n  }\n\n  return true;\n}\n\nbool TestGetDistance() {\n  const double expected = 0.0;\n  double actual = GetDistance(0.0, 0.0, 0.0, 0.0);\n  if(actual != expected) {\n    cout &lt;&lt; \"Expected: \" &lt;&lt; expected &lt;&lt; \", Actual: \" &lt;&lt; actual &lt;&lt; endl;\n    return false;\n  }\n\n  return true;\n}\n\nint main(int argc, char* argv[]) {\n  cout &lt;&lt; \"TestGetCircumference\" &lt;&lt; endl;\n  if (!TestGetCircumference())\n    return 1;\n  cout &lt;&lt; \"TestGetPerimeter\" &lt;&lt; endl;\n  if (!TestGetPerimeter())\n    return 1;\n  cout &lt;&lt; \"TestGetDistanceSquared\" &lt;&lt; endl;\n  if (!TestGetDistanceSquared())\n    return 1;\n  cout &lt;&lt; \"TestGetDistance\" &lt;&lt; endl;\n  if (!TestGetDistance())\n    return 1;\n\n  return 0;\n}\n</code></pre>\n\n<p>and the makefile:</p>\n\n<p>makefile:</p>\n\n<pre><code>CC = g++  # use the g++ compiler\n\nFLAGS = -std=c++11  # compile with C++ 11 standard\nFLAGS += -Wall      # compile with all warnings\n\nLINK = $(CC) $(FLAGS) -o  # final linked build to binary executable\n\nCOMPILE = $(CC) $(FLAGS) -c  # compilation to intermediary .o files\n\ntest : comp_geo.o test.cc\n  $(LINK) $@ $^\n\ncomp_geo.o : comp_geo.cc comp_geo.h\n  $(COMPILE) $&lt;\n\nclean:\n  @rm test comp_geo.o\n</code></pre>\n\n<p>Also, the way the grader is set up it will look for <code>GetVolume</code> but a circle does not have a volume so the professor suggested that we write a second function <code>GetArea</code> that calls and returns the value of the function <code>GetVolume</code>. </p>\n"}, {"tags": ["c++", "windows", "winapi", "gdi"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 5, "creation_date": 1537375079, "post_id": 52410504, "comment_id": 91764798, "body": "We need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Where perhaps we will see your message loop. If you have one."}, {"owner": {"reputation": 9211, "user_id": 695246, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f26b07b35ea0202401bec9dff5f1fb50?s=128&d=identicon&r=PG&f=1", "display_name": "Dabbler", "link": "https://stackoverflow.com/users/695246/dabbler"}, "edited": false, "score": 1, "creation_date": 1537375139, "post_id": 52410504, "comment_id": 91764819, "body": "Are you calling InvalidateRect(hWnd, nullptr, FALSE); and UpdateWindow(hWnd); ? That&#39;s how one usually triggers WM_PAINT."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1537375194, "post_id": 52410504, "comment_id": 91764844, "body": "Do you know that you have actually been sent a WM_PAINT message?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1537375471, "post_id": 52410504, "comment_id": 91764953, "body": "<a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/winuser/nf-winuser-redrawwindow\" rel=\"nofollow noreferrer\">According to the docs</a>, you could have tried at least 3 flags other than <code>RDW_INTERNALPAINT</code>.  Did you do that, and if you did, did you get the same results?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1537377285, "post_id": 52410504, "comment_id": 91765788, "body": "<code>WM_PAINT</code> is triggered only when the window needs to be repainted. Simply updating the <code>counter</code> variable is not enough, you have to explicitly signal the window to then repaint itself so it can draw the new <code>counter</code> value. Using <code>InvalidateRect()</code> is usually preferred, as it allows the OS to decide when to trigger <code>WM_PAINT</code>. However, using <code>UpdateWindow()</code> or <code>RedrawWindow()</code> can force an immediate repaint, if needed."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 10386877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33703009572c8956c23df24d64e38af3?s=128&d=identicon&r=PG&f=1", "display_name": "A0lian", "link": "https://stackoverflow.com/users/10386877/a0lian"}, "is_accepted": false, "score": -1, "last_activity_date": 1537376069, "creation_date": 1537376069, "answer_id": 52410808, "question_id": 52410504, "link": "https://stackoverflow.com/questions/52410504/why-doesnt-drawing-onto-the-hdc-immediately-update-the-window/52410808#52410808", "title": "Why doesn&#39;t drawing onto the hdc immediately update the window?", "body": "<p>Calling RedrawWindow with different flags solved the problem.\nSpecifically <code>RedrawWindow(hWnd, 0, 0, RDW_FRAME | RDW_INVALIDATE);</code> after <code>counter++;</code></p>\n"}], "owner": {"reputation": 11, "user_id": 10386877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33703009572c8956c23df24d64e38af3?s=128&d=identicon&r=PG&f=1", "display_name": "A0lian", "link": "https://stackoverflow.com/users/10386877/a0lian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1537376069, "creation_date": 1537374859, "last_edit_date": 1537375549, "question_id": 52410504, "link": "https://stackoverflow.com/questions/52410504/why-doesnt-drawing-onto-the-hdc-immediately-update-the-window", "title": "Why doesn&#39;t drawing onto the hdc immediately update the window?", "body": "<p>According to <a href=\"http://www.winprog.org/tutorial/bitmaps.html\" rel=\"nofollow noreferrer\">this website</a>, any drawing operation performed on the HDC returned by BeginPaint will immediately display on the screen. However, the number printed by the following code only updates when the window is resized:</p>\n\n<pre><code>int counter = 0;\nLRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)\n{\n    switch (message)\n    {\n    case WM_COMMAND:\n        {\n            int wmId = LOWORD(wParam);\n            // Parse the menu selections:\n            switch (wmId)\n            {\n            case IDM_ABOUT:\n                DialogBox(hInst, MAKEINTRESOURCE(IDD_ABOUTBOX), hWnd, About);\n                break;\n            case IDM_EXIT:\n                DestroyWindow(hWnd);\n                break;\n            default:\n                return DefWindowProc(hWnd, message, wParam, lParam);\n            }\n        }\n        break;\n    case WM_PAINT:\n        {\n            PAINTSTRUCT ps;\n            HDC hdc = BeginPaint(hWnd, &amp;ps);\n            std::string s = std::to_string(counter).c_str();\n            TextOutA(hdc, 0, 0, s.c_str(), s.length());\n            EndPaint(hWnd, &amp;ps);\n        }\n        break;\n    case WM_KEYDOWN:\n        counter++;\n        break;\n    case WM_DESTROY:\n        PostQuitMessage(0);\n        break;\n    default:\n        return DefWindowProc(hWnd, message, wParam, lParam);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Even when continuously sending WM_PAINT to the window with</p>\n\n<pre><code>RedrawWindow(hwndMain, 0, 0, RDW_INTERNALPAINT);\n</code></pre>\n\n<p>after EndPaint, the number only updates when the window is resized. How can I get the number to update without manually resizing the window?</p>\n"}, {"tags": ["c++", "string", "templates", "stl", "operator-overloading"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1537375085, "post_id": 52410319, "comment_id": 91764800, "body": "<code>#include &lt;bits&#47;stdc++.h&gt;</code> -- Use the proper <code>#include</code> files, not this one."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1537375244, "post_id": 52410319, "comment_id": 91764863, "body": "You probably can use <code>std::enable_if</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1537375545, "post_id": 52410319, "comment_id": 91764983, "body": "Expanding on Paul&#39;s comment, <code>#include &lt;bits&#47;stdc++.h&gt;</code> should not be used (<a href=\"https://stackoverflow.com/questions/31816095/why-should-i-not-include-bits-stdc-h\">why</a>) and <code>using namespace std;</code> should be avoided (<a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">why</a>). Together they reinforce some of the other&#39;s worst behaviours, resulting in some very hard to understand errors. Do not do this."}, {"owner": {"reputation": 21, "user_id": 4580269, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-C9lijNVAxMg/AAAAAAAAAAI/AAAAAAAAABw/zkSDInBlfUk/photo.jpg?sz=128", "display_name": "vlatkosh", "link": "https://stackoverflow.com/users/4580269/vlatkosh"}, "edited": false, "score": 0, "creation_date": 1537382409, "post_id": 52410319, "comment_id": 91768276, "body": "It doesn&#39;t matter if I use bits/stdc++.h because it&#39;s in a competitive programming setting."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1537385633, "post_id": 52410319, "comment_id": 91769756, "body": "It matters when you have a naming collision between one of your identifiers and something you didn&#39;t even know existed in the standard library eating away at all of your time. Plus bad habits tend to leak into other aspects of one&#39;s life."}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1537374628, "post_id": 52410403, "comment_id": 91764569, "body": "That#s exactly why the OP shouldn&#39;t <code>#include &lt;bits&#47;stdc++.h&gt; using namespace std;</code> in 1st place."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1537374723, "post_id": 52410403, "comment_id": 91764614, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: Happens even with <code>#include &lt;iostream&gt;</code> (needed to allow <code>out &lt;&lt; &quot;{&quot;</code>). (that&#39;s why I removed duplicate Btw). (But I agree that OP should not <code>#include &lt;bits&#47;stdc++.h&gt;</code>)."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 4, "last_activity_date": 1537375241, "last_edit_date": 1537375241, "creation_date": 1537374470, "answer_id": 52410403, "question_id": 52410319, "link": "https://stackoverflow.com/questions/52410319/ostream-operator-overloaded-for-taking-stl-containers-passing-stdstring-bre/52410403#52410403", "title": "ostream operator&lt;&lt; overloaded for taking STL containers, passing std::string breaks it?", "body": "<p><code>std::string</code> is a template class (alias of <code>std::basic_string&lt;char&gt;</code>)</p>\n\n<p>so <code>std::cout &lt;&lt; s</code> match your overload and the one for <code>std::basic_string&lt;T&gt;</code>.</p>\n\n<p>And none overload  is more specialized than the other.</p>\n\n<p>Possible workaround is to add additional overload for <code>std::string</code>:</p>\n\n<pre><code>std::ostream&amp; operator &lt;&lt; (std::ostream&amp; out, const std::string&amp; s)\n{\n    return operator &lt;&lt; &lt;char&gt;(out, s);\n    // Select template &lt;class CharT, class Traits, class Allocator&gt;\n    // std::basic_ostream&lt;CharT, Traits&gt;&amp; \n    // operator&lt;&lt;(std::basic_ostream&lt;CharT, Traits&gt;&amp; os,\n    //            const std::basic_string&lt;CharT, Traits, Allocator&gt;&amp; str);\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/3851f7ec2a71d3a3\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "is_accepted": false, "score": 0, "last_activity_date": 1537375257, "creation_date": 1537375257, "answer_id": 52410586, "question_id": 52410319, "link": "https://stackoverflow.com/questions/52410319/ostream-operator-overloaded-for-taking-stl-containers-passing-stdstring-bre/52410586#52410586", "title": "ostream operator&lt;&lt; overloaded for taking STL containers, passing std::string breaks it?", "body": "<p>Make your <code>ostream</code> parameter more general so that your overload is more general than the standard one for <code>std::string</code>.</p>\n\n<pre><code>template&lt;typename CharT, typename Traits, typename T&gt;\nostream&amp; _containerprint(std::basic_ostream&lt;CharT, Traits&gt; &amp;out, T const &amp;val) {\n  return (out &lt;&lt; val &lt;&lt; \" \");\n}\n\ntemplate&lt;typename CharT, typename Traits, typename T1, typename T2&gt;\nostream&amp; _containerprint(std::basic_ostream&lt;CharT, Traits&gt; &amp;out, pair&lt;T1, T2&gt; const &amp;val) {\n  return (out &lt;&lt; \"{\" &lt;&lt; val.first &lt;&lt; \" \" &lt;&lt; val.second &lt;&lt; \"} \");\n}\n\ntemplate&lt;typename CharT, typename Traits, template&lt;typename, typename...&gt; class TT, typename... Args&gt;\nostream&amp; operator&lt;&lt;(std::basic_ostream&lt;CharT, Traits&gt; &amp;out, TT&lt;Args...&gt; const &amp;cont) {\n  for(auto&amp;&amp; elem : cont) {\n    _containerprint(out, elem);\n  }\n  return out;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4580269, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-C9lijNVAxMg/AAAAAAAAAAI/AAAAAAAAABw/zkSDInBlfUk/photo.jpg?sz=128", "display_name": "vlatkosh", "link": "https://stackoverflow.com/users/4580269/vlatkosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 52410403, "answer_count": 2, "score": 0, "last_activity_date": 1537382572, "creation_date": 1537374130, "last_edit_date": 1537382572, "question_id": 52410319, "link": "https://stackoverflow.com/questions/52410319/ostream-operator-overloaded-for-taking-stl-containers-passing-stdstring-bre", "title": "ostream operator&lt;&lt; overloaded for taking STL containers, passing std::string breaks it?", "body": "<p>So I overloaded the ostream &lt;&lt; operator so it can take most STL containers and print them. However, it doesn't work for passing strings (the error is \"ambiguous overload\" for the line \"cout &lt;&lt; s;\"). How do I make it so it works on strings <strong>as if it weren't overloaded</strong>?</p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\n\ntemplate&lt;typename T&gt;\nostream&amp; _containerprint(ostream &amp;out, T const &amp;val) {\n  return (out &lt;&lt; val &lt;&lt; \" \");\n}\n\ntemplate&lt;typename T1, typename T2&gt;\nostream&amp; _containerprint(ostream &amp;out, pair&lt;T1, T2&gt; const &amp;val) {\n  return (out &lt;&lt; \"{\" &lt;&lt; val.first &lt;&lt; \" \" &lt;&lt; val.second &lt;&lt; \"} \");\n}\n\ntemplate&lt;template&lt;typename, typename...&gt; class TT, typename... Args&gt;\nostream&amp; operator&lt;&lt;(ostream &amp;out, TT&lt;Args...&gt; const &amp;cont) {\n  for(auto&amp;&amp; elem : cont) {\n    _containerprint(out, elem);\n  }\n  return out;\n}\n\nint main() {\n  string s = \"help me\";\n  cout &lt;&lt; s;\n}\n</code></pre>\n\n<p>Edit: please stop freaking out, the <code>#include &lt;bits/stdc++.h&gt;</code> is because it's for a programming contest setting; it really doesn't matter!</p>\n"}, {"tags": ["c++", "arrays", "malloc"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 6, "creation_date": 1537374330, "post_id": 52410315, "comment_id": 91764377, "body": "FWIW you really aren&#39;t using C++.  You&#39;re basically using C in C++."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 4, "creation_date": 1537374729, "post_id": 52410315, "comment_id": 91764617, "body": "Note: The name &quot;__array_buffer&quot; is not a valid one for you to use. Names containing double underscore (and several others; like names using &quot;leading underscore followed by capital letter&quot; and names ending in &quot;_t&quot;, and more) are <i>reserved for the implementation</i> and should <i>not</i> be used in user code."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1537374967, "post_id": 52410315, "comment_id": 91764749, "body": "<code>bool * blist = (bool*)malloc(size);</code> -- This seems incorrect.  <code>malloc</code> does not allocate the number of <code>bool</code> values -- it allocates the number of <i>bytes</i>.  Second, why not write C++ and use <code>std::vector&lt;char&gt;</code>, <code>std::vector&lt;bool&gt;</code>, <code>std::string</code>, or some combination of those?  What&#39;s all of this stuff with <code>malloc</code> about?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1537375062, "post_id": 52410315, "comment_id": 91764787, "body": "Seems like a perfect opportunity to learn how to use a debugger."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1537375104, "post_id": 52410315, "comment_id": 91764805, "body": "@JesperJuhl C++ Standard makes <code>_t</code> suffix reserved for implementation?"}, {"owner": {"reputation": 3, "user_id": 9529971, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zqJRoLTBJLg/AAAAAAAAAAI/AAAAAAAAAQQ/QX40V9O-G5U/photo.jpg?sz=128", "display_name": "Zeglo vrk", "link": "https://stackoverflow.com/users/9529971/zeglo-vrk"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1537375295, "post_id": 52410315, "comment_id": 91764880, "body": "@ NathanOliver  like i said, this is only the code I&#39;m concerned with. i have classes that are not part of the problem. @Jesper Juhl no problem has arises as a result( proof of this is that the name change does not solve the problem)"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1537375377, "post_id": 52410315, "comment_id": 91764915, "body": "<code>update_typeArray</code> does <i>nothing</i> to the caller&#39;s provided arguments on the caller side. I hope you understand that. Specifically, <code>char_array = ....</code> in that function means nothing to the caller, ultimately leaking memory and leaving the caller with a dangling pointer of what was originally passed in. <code>char_array</code> is passed-by-value pointer. Changing its value means nothing to the caller; only changing what it being pointed to is realized caller-side, and in this case, that change is destroying the buffer and leaving the caller hung out to dry. Any dereference of that pointer after is UB."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 2, "creation_date": 1537375977, "post_id": 52410315, "comment_id": 91765186, "body": "@DanielLangr IIRC the standard doesn&#39;t. POSIX does."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1537376061, "post_id": 52410315, "comment_id": 91765232, "body": "@Zeglovrk Why you don&#39;t want to use the standard containers?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1537376130, "post_id": 52410315, "comment_id": 91765268, "body": "Be really careful with names like <code>__array_buffer</code>. For more on that read <a href=\"https://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier\">What are the rules about using an underscore in a C++ identifier?</a>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1537376303, "post_id": 52410315, "comment_id": 91765343, "body": "@Zeglovrk The absence of evidence of a problem (in this case &quot;no problem so far&quot;) is not proof of correctness. Undefined behavior can do anything, including appearing to work as intended for now. It&#39;s unquestionably undefined behavior to have an identifier with two consecutive underscores in c++. Even if fixing it doesn&#39;t solve this specific problem, it doesn&#39;t mean that it&#39;s not <i>also</i> a necessary fix to your code. At the very least, when diagnosing a problem, all sources of undefined behavior must be eliminated before anyone can think rationally about the code in question."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1537376480, "post_id": 52410315, "comment_id": 91765428, "body": "What did Terry Davis say about c++ that is apparently right about?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1537376938, "post_id": 52410315, "comment_id": 91765639, "body": "@Zeglovrk - what Fran&#231;ois said."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1537380280, "post_id": 52410315, "comment_id": 91767252, "body": "@HolyBlackCat Does it mean that I should not compile/run a C++ Standard compliant code with an identifier having <code>_t</code> suffix on POSIX-based system (e.g., Linux)? What is the problem? Undefined behavior?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1537380448, "post_id": 52410315, "comment_id": 91767330, "body": "@DanielLangr I don&#39;t know the details."}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1537398323, "post_id": 52410315, "comment_id": 91774237, "body": "What will happen if you drive without a license? You probably won&#39;t get caught, but this obviously doesn&#39;t prove that driving without a license is OK. Especially in a language like C++, doing something wrong doesn&#39;t necessarily mean you will get an error."}, {"owner": {"reputation": 3, "user_id": 9529971, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zqJRoLTBJLg/AAAAAAAAAAI/AAAAAAAAAQQ/QX40V9O-G5U/photo.jpg?sz=128", "display_name": "Zeglo vrk", "link": "https://stackoverflow.com/users/9529971/zeglo-vrk"}, "reply_to_user": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1537438995, "post_id": 52410315, "comment_id": 91788670, "body": "@FeiXiang i understand, but once i change the name to arrayBuffer, the problem persists, so even if the __ is causing an error, it is not the current error Im concerned with. but I thankyou"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9529971, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zqJRoLTBJLg/AAAAAAAAAAI/AAAAAAAAAQQ/QX40V9O-G5U/photo.jpg?sz=128", "display_name": "Zeglo vrk", "link": "https://stackoverflow.com/users/9529971/zeglo-vrk"}, "edited": false, "score": 0, "creation_date": 1537375825, "post_id": 52410659, "comment_id": 91765117, "body": "char_array = (char*)malloc(sizeof(char)*(index + 1));//+1 cause string -- so does this malloc not work after free? because it works some times? how wold you do this?"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 3, "user_id": 9529971, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zqJRoLTBJLg/AAAAAAAAAAI/AAAAAAAAAQQ/QX40V9O-G5U/photo.jpg?sz=128", "display_name": "Zeglo vrk", "link": "https://stackoverflow.com/users/9529971/zeglo-vrk"}, "edited": false, "score": 0, "creation_date": 1537375925, "post_id": 52410659, "comment_id": 91765164, "body": "No, <code>char_array</code> is local variable."}, {"owner": {"reputation": 3, "user_id": 9529971, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zqJRoLTBJLg/AAAAAAAAAAI/AAAAAAAAAQQ/QX40V9O-G5U/photo.jpg?sz=128", "display_name": "Zeglo vrk", "link": "https://stackoverflow.com/users/9529971/zeglo-vrk"}, "edited": false, "score": 0, "creation_date": 1537376399, "post_id": 52410659, "comment_id": 91765394, "body": "sounds grate but the new_array and input? must i add ptr operator to them too?"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 3, "user_id": 9529971, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zqJRoLTBJLg/AAAAAAAAAAI/AAAAAAAAAQQ/QX40V9O-G5U/photo.jpg?sz=128", "display_name": "Zeglo vrk", "link": "https://stackoverflow.com/users/9529971/zeglo-vrk"}, "edited": false, "score": 0, "creation_date": 1537377460, "post_id": 52410659, "comment_id": 91765868, "body": "No need for new_array"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 3, "user_id": 9529971, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zqJRoLTBJLg/AAAAAAAAAAI/AAAAAAAAAQQ/QX40V9O-G5U/photo.jpg?sz=128", "display_name": "Zeglo vrk", "link": "https://stackoverflow.com/users/9529971/zeglo-vrk"}, "edited": false, "score": 0, "creation_date": 1537377870, "post_id": 52410659, "comment_id": 91766084, "body": "How are you accessing <code>char_array</code> in <code>update_typeArray</code> function"}, {"owner": {"reputation": 3, "user_id": 9529971, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zqJRoLTBJLg/AAAAAAAAAAI/AAAAAAAAAQQ/QX40V9O-G5U/photo.jpg?sz=128", "display_name": "Zeglo vrk", "link": "https://stackoverflow.com/users/9529971/zeglo-vrk"}, "edited": false, "score": 0, "creation_date": 1537378280, "post_id": 52410659, "comment_id": 91766299, "body": "via ptr now. but it made no difference."}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 3, "user_id": 9529971, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zqJRoLTBJLg/AAAAAAAAAAI/AAAAAAAAAQQ/QX40V9O-G5U/photo.jpg?sz=128", "display_name": "Zeglo vrk", "link": "https://stackoverflow.com/users/9529971/zeglo-vrk"}, "edited": false, "score": 0, "creation_date": 1537379846, "post_id": 52410659, "comment_id": 91767020, "body": "What does <code>compare_typeArray</code> does?"}, {"owner": {"reputation": 3, "user_id": 9529971, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zqJRoLTBJLg/AAAAAAAAAAI/AAAAAAAAAQQ/QX40V9O-G5U/photo.jpg?sz=128", "display_name": "Zeglo vrk", "link": "https://stackoverflow.com/users/9529971/zeglo-vrk"}, "edited": false, "score": 0, "creation_date": 1537455370, "post_id": 52410659, "comment_id": 91799302, "body": "how do i change the code in update_typeArray to make this work?"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 3, "user_id": 9529971, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zqJRoLTBJLg/AAAAAAAAAAI/AAAAAAAAAQQ/QX40V9O-G5U/photo.jpg?sz=128", "display_name": "Zeglo vrk", "link": "https://stackoverflow.com/users/9529971/zeglo-vrk"}, "edited": false, "score": 0, "creation_date": 1537455699, "post_id": 52410659, "comment_id": 91799531, "body": "Don&#39;t free and allocate new  memory. Just remove those lines from update_typeArray"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 3, "user_id": 9529971, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zqJRoLTBJLg/AAAAAAAAAAI/AAAAAAAAAQQ/QX40V9O-G5U/photo.jpg?sz=128", "display_name": "Zeglo vrk", "link": "https://stackoverflow.com/users/9529971/zeglo-vrk"}, "edited": false, "score": 0, "creation_date": 1537459462, "post_id": 52410659, "comment_id": 91801776, "body": "@Zeglovrk Sorry I mistook it, yes should update. for that you need to use pointer to pointer as i suggested in my answer."}, {"owner": {"reputation": 3, "user_id": 9529971, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zqJRoLTBJLg/AAAAAAAAAAI/AAAAAAAAAQQ/QX40V9O-G5U/photo.jpg?sz=128", "display_name": "Zeglo vrk", "link": "https://stackoverflow.com/users/9529971/zeglo-vrk"}, "edited": false, "score": 0, "creation_date": 1537460848, "post_id": 52410659, "comment_id": 91802492, "body": "That is what i dont understand, there is alot of  referance for this but the pointer to pointer specifically regarding this case is where it falls short, how to implement it i don&#39;t know, and i suspect i may have not done it right the first time. thank you for your help"}, {"owner": {"reputation": 3, "user_id": 9529971, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zqJRoLTBJLg/AAAAAAAAAAI/AAAAAAAAAQQ/QX40V9O-G5U/photo.jpg?sz=128", "display_name": "Zeglo vrk", "link": "https://stackoverflow.com/users/9529971/zeglo-vrk"}, "edited": false, "score": 0, "creation_date": 1537462312, "post_id": 52410659, "comment_id": 91803190, "body": "i did something similar except i had used (*char_array) = malloc, and it didn&#39;t work, but this seems fine"}, {"owner": {"reputation": 3, "user_id": 9529971, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zqJRoLTBJLg/AAAAAAAAAAI/AAAAAAAAAQQ/QX40V9O-G5U/photo.jpg?sz=128", "display_name": "Zeglo vrk", "link": "https://stackoverflow.com/users/9529971/zeglo-vrk"}, "edited": false, "score": 1, "creation_date": 1537462535, "post_id": 52410659, "comment_id": 91803293, "body": "thank you for your time and effort, and thanx for helping me achieve what i wanted, not what C++ can offer as an alternative, because if c++ is a super set of C then this is still applicable. \ud83d\udc4d"}], "tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": true, "score": 0, "last_activity_date": 1537462914, "last_edit_date": 1537462914, "creation_date": 1537375563, "answer_id": 52410659, "question_id": 52410315, "link": "https://stackoverflow.com/questions/52410315/malloc-void-return-char-array-somtimes-not-working-terry-davis-was-right-about/52410659#52410659", "title": "malloc void return char array somtimes not working (terry davis was right about C++);", "body": "<p>One of the problem to cause undefined behavior is</p>\n\n<p>In <code>void update_typeArray(char * char_array, int index, char input)</code>\nyou free the memory pointed by the <code>__array_buffer</code> using  <code>char_array</code>.</p>\n\n<pre><code> update_typeArray(__array_buffer, index, __char_buffer);\n\n free(char_array);\n</code></pre>\n\n<p>and you allocate the new memory to <code>char_array</code></p>\n\n<pre><code>char_array = (char*)malloc(sizeof(char)*(index + 1));//+1 cause string\n</code></pre>\n\n<p>but your <code>__array_buffer</code> will be still pointing to freed memory.</p>\n\n<p>and you continue to use the <code>__array_buffer</code> in <code>main</code> after freeing</p>\n\n<p><code>compare_typeArray(__array_buffer,\"a\",size,blist);</code></p>\n\n<p><code>free(__array_buffer)</code> </p>\n\n<p><strong>To understand easily consider below pictures.</strong></p>\n\n<pre><code> ----------------             -------\n| __array_buffer |  -------&gt; | memory| \n  ---------------             -------\n</code></pre>\n\n<p>after call <code>update_typeArray(__array_buffer, index, __char_buffer);</code></p>\n\n<pre><code>     ----------------             -------\n    | __array_buffer |  -------&gt; | memory| \n      ---------------             -------\n                                   ^\n                                   |\n                            ----------------\n                           |    char_array |   \n                             ---------------  \n</code></pre>\n\n<p>after     <code>free(char_array);</code></p>\n\n<pre><code> ----------------             \n| __array_buffer |  -------&gt;   X \n  ---------------             \n                               ^\n                               |\n                        ----------------\n                       |   char_array   |   \n                         ---------------  \n</code></pre>\n\n<p>After <code>char_array = (char*)malloc(sizeof(char)*(index + 1));//+1 cause string\n</code></p>\n\n<pre><code>     ----------------             \n    | __array_buffer |  -------&gt;   X \n      ---------------             \n\n\n  ----------------           -------\n |  char_array    | -----&gt; | memory| \n   ---------------           -------\n</code></pre>\n\n<p><strong>Solution:</strong></p>\n\n<p>If you want to <code>__array_buffer</code> to point to new memory you got use pointer to pointer as below.</p>\n\n<p><code>void update_typeArray(char ** char_array, int index, char input)</code></p>\n\n<p>and you call the update_type.</p>\n\n<p><code>update_typeArray(&amp;__array_buffer, index, __char_buffer);</code></p>\n\n<p>your update_typeArray may look like below.</p>\n\n<pre><code>void update_typeArray(char **char_array, int index, char input)\n{\n\n\n    char * new_array = (char*)malloc(sizeof(char)*(index + 1));//+1 cause string\n\n\n    for (int i = 0; i &lt;= index; i++)\n    {\n        if (i &lt; index)\n        {\n            new_array[i] = (*char_array)[i];\n        }\n        if (i == index)\n        {\n            new_array[i] = '\\0';//'\\000' cause string\n        }\n    }\n\n    free(*char_array);\n    new_array[index - 1] = input;\n    *char_array = (char*)malloc(sizeof(char)*(index + 1));//+1 cause string\n\n    for (int i = 0; i &lt;= index; i++)\n    {\n        if (i &lt; index)\n        {\n            (*char_array)[i] = new_array[i];\n        }\n        if (i == index)\n        {\n            (*char_array)[i] = '\\0';//'\\000' cause string\n        }\n    }\n\n\n    free(new_array);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9529971, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zqJRoLTBJLg/AAAAAAAAAAI/AAAAAAAAAQQ/QX40V9O-G5U/photo.jpg?sz=128", "display_name": "Zeglo vrk", "link": "https://stackoverflow.com/users/9529971/zeglo-vrk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 52410659, "answer_count": 1, "score": -4, "last_activity_date": 1537462914, "creation_date": 1537374118, "question_id": 52410315, "link": "https://stackoverflow.com/questions/52410315/malloc-void-return-char-array-somtimes-not-working-terry-davis-was-right-about", "title": "malloc void return char array somtimes not working (terry davis was right about C++);", "body": "<p>why does this cause a break in VS, I assume its because the pointer __array_buffer seems to be dealloc after update_typeArray finishes round about the third call but not always.\nI have no clue why. pleas help me\n(this is not the entire file, but the rest is mostly commented out and has no affect)\nthis does not happen if I make update_typeArray a char * and __array_buffer = the return(return would be the pointer of __array_buffer passed in param).\nI would do that but I was hoping for overloading. \u4f55\u3067\u306a\u306e\u3002please someone help me.</p>\n\n<hr>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;Windows.h&gt;\n#include &lt;thread&gt;\n#include &lt;chrono&gt;\n#include &lt;cmath&gt;\n#include &lt;GL/glew.h&gt;\n#include &lt;GLFW/glfw3.h&gt;\n#include &lt;conio.h&gt;\n\n//winigga stuff\n# define VT100_WinAPI \\\nHANDLE hOut = GetStdHandle(STD_OUTPUT_HANDLE);\\\nDWORD dwMode = 0;\\\nGetConsoleMode(hOut, &amp;dwMode);\\\ndwMode |= ENABLE_VIRTUAL_TERMINAL_PROCESSING;\\\nSetConsoleMode(hOut, dwMode);\n\n//////////////////////////////////////////////////////////////////\n\n/*\nIncrement before use if index is 0 from init, (Char)array must contain a single value, and will recive '/0'.\nSize of array is calculated by overloads input type and index (with null terminater taken in to account).\n*/\nvoid update_typeArray(char * char_array, int index, char input)\n{\n\n\n    char * new_array = (char*)malloc(sizeof(char)*(index + 1));//+1 cause string\n\n\n    for (int i = 0; i &lt;= index; i++)\n    {\n        if (i &lt; index)\n        {\n            new_array[i] = char_array[i];\n        }\n        if (i == index)\n        {\n            new_array[i] = '\\0';//'\\000' cause string\n        }\n    }\n\n    free(char_array);\n    new_array[index - 1] = input;\n    char_array = (char*)malloc(sizeof(char)*(index + 1));//+1 cause string\n\n    for (int i = 0; i &lt;= index; i++)\n    {\n        if (i &lt; index)\n        {\n            char_array[i] = new_array[i];\n        }\n        if (i == index)\n        {\n            char_array[i] = '\\0';//'\\000' cause string\n        }\n    }\n\n\n    free(new_array);\n\n}\n/*\nIncrement before use if index is 0 from init, (Int)array must contain a single value.\nSize of array is calculated by overloads input type and index.\n*/\n//Debug\n/*\nvoid update_typeArray(int * int_array, int index, int input)\n{\n\n    int * new_array = (int*)malloc(sizeof(int)*(index));\n\n    for (int i = 0; i &lt; index; i++)\n    {\n\n        new_array[i] = int_array[i];\n\n    }\n\n    free(int_array);\n    new_array[index - 1] = input;\n    int_array = (int*)malloc(sizeof(int)*(index));\n\n    for (int i = 0; i &lt; index; i++)\n    {\n\n        int_array[i] = new_array[i];\n\n    }\n\n    free(new_array);\n\n}\n*/\n\nint main()\n{\n\n    VT100_WinAPI\n\n    while (!(GetKeyState(0x1B) &amp; 0x8000))\n    {\n\n        if (_kbhit()||true)\n        {\n\n            char * __array_buffer = (char*)malloc(sizeof(char)); __array_buffer[0] = '\\0';\n            int index = 0;\n            bool chbuff_cyc = true;\n            int size;\n\n            while (chbuff_cyc)\n            {\n                char j[] = \"reta\";\n\n                char __char_buffer = j[index];//_getch();\n\n                if (__char_buffer == '\\0')\n                {\n                    chbuff_cyc = false;\n                    size = index;\n                }\n                else\n                {\n                    ++index;\n                    update_typeArray(__array_buffer, index, __char_buffer);\n\n                }\n            }\n\n            if (size &gt; 0)\n            {\n                bool * blist = (bool*)malloc(size);\n                //-----------|searchCommand (Start)|------------\n\n\n\n\n                if (size == StringSize(\"a\"))\n                {\n                    compare_typeArray(__array_buffer,\"a\",size,blist);\n                    if(checkem(blist,size,and))\n                    {\n                        _putch('a');\n                    }\n                }\n\n\n                //-----------|searchCommand (End)|------------\n                free(blist);    \n            }\n\n            free(__array_buffer);\n        }\n\n\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/sBZnB.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/sBZnB.jpg</a></p>\n"}, {"tags": ["c++", "c++11", "pointers"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1537374173, "post_id": 52410302, "comment_id": 91764282, "body": "Have a look at <a href=\"https://en.cppreference.com/w/c/string/byte/atof\" rel=\"nofollow noreferrer\"><code>atof()</code>/ <code>atod</code></a>."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1537374356, "post_id": 52410302, "comment_id": 91764396, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: Nope, his data is stored as binary, those functions operate on text."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1537374417, "post_id": 52410302, "comment_id": 91764434, "body": "<code>memcpy</code> is the solution to your problem if the byte order from <code>readData</code> matches your processor native byte order.  If not, you can swap the bytes around and then <code>memcpy</code>."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1537374477, "post_id": 52410302, "comment_id": 91764473, "body": "@BenVoigt Just make <code>net_to_host_memcpy</code> function for that and apply it member-wise. Forget about swapping bytes."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1537374514, "post_id": 52410302, "comment_id": 91764491, "body": "@MaximEgorushkin: No can do, since you don&#39;t know how many bytes are in reversed order.  (Hence the reason there are separate <code>htons</code> and <code>htonl</code> functions and not just a generic &quot;swap them all&quot;)"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1537374542, "post_id": 52410302, "comment_id": 91764516, "body": "@BenVoigt You apply that function member-wise."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1537374652, "post_id": 52410302, "comment_id": 91764580, "body": "@MaximEgorushkin: So you propose pointer versions of <code>htons</code> and <code>htonl</code>.  Good enough, but not to be confused with <code>memcpy</code> that can make a binary image of a whole object at once."}], "answers": [{"comments": [{"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1537374614, "post_id": 52410425, "comment_id": 91764561, "body": "You do not explain how to apply <code>memcpy</code> correctly. Since the <code>sizeof(Position) == 16</code> and <code>dataSize</code> is 12. There is padding in <code>Position</code>"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1537374748, "post_id": 52410425, "comment_id": 91764629, "body": "@MaximEgorushkin: There might or might not be padding, the <code>sizeof</code> might or might not be <code>16</code>.  For portability, best to properly handle padding.  But best not to make assumptions about the size."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1537374816, "post_id": 52410425, "comment_id": 91764663, "body": "@MaximEgorushkin I added an example."}, {"owner": {"reputation": 517, "user_id": 7340306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd32b68e03c772583ca2fe0f524c3825?s=128&d=identicon&r=PG&f=1", "display_name": "Gaetan", "link": "https://stackoverflow.com/users/7340306/gaetan"}, "edited": false, "score": 0, "creation_date": 1537521450, "post_id": 52410425, "comment_id": 91823656, "body": "@user2079303 thanks a lot. i wish it were possible to accept more than one answer. Because you answer is also very nice"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 3, "last_activity_date": 1537374799, "last_edit_date": 1537374799, "creation_date": 1537374541, "answer_id": 52410425, "question_id": 52410302, "link": "https://stackoverflow.com/questions/52410302/convert-n-first-bytes-of-unsigned-char-pointer-to-float-and-double-c/52410425#52410425", "title": "convert (n first bytes of) unsigned char pointer to float and double c++", "body": "<p>One thing that you can do is to copy the data byte-by byte. There is a standard function to do that: <code>std::memcpy</code>. Example usage:</p>\n\n<pre><code>assert(sizeof pos.pos_x == 4);\nstd::memcpy(&amp;pos.pos_x, data, 4);\nassert(sizeof pos.pos_y == 8);\nstd::memcpy(&amp;pos.pos_y, data + 4, 8);\n</code></pre>\n\n<p>Note that simply copying the data only works if the data is in the same representation as the CPU uses. Understand that different processors use different representations. Therefore, if your <code>readData</code> receives the data over the network for example, a simple copy is not a good idea. The least that you would have to do in such case is to possibly convert the endianness of the data to the native endianness (probably from big endian, which is conventionally used as the network endianness). Converting from one floating point representation to another is much trickier, but luckily IEE-754 is fairly ubiquitous.</p>\n"}, {"comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1537376268, "post_id": 52410682, "comment_id": 91765329, "body": "A pedantic note: <code>memcpy</code> is not guaranteed to be declared in the global namespace unless you include <code>&lt;string.h&gt;</code>. <code>&lt;cstring&gt;</code> only guarantees declaration of <code>std::memcpy</code>."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1537376303, "post_id": 52410682, "comment_id": 91765342, "body": "@user2079303 Point taken."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1537385022, "post_id": 52410682, "comment_id": 91769453, "body": "Your use of the conversion operator is more than a bit dangerous.  It really doesn&#39;t &quot;convert&quot; a reader into data.  I <i>might</i> do that on a temporary object returned from a function with a name with <code>&amp;&amp;</code> restriction, but on some perminant object?  Also, you should static_assert the object being copied is legal to create via memcpy like that."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1537385247, "post_id": 52410682, "comment_id": 91769560, "body": "<code>static_assert( std::is_trivially_copyable&lt;T&gt;::value, &quot;The type you are using cannot be safely copied from bytes.&quot; )</code>"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1537388070, "post_id": 52410682, "comment_id": 91770867, "body": "@Yakk-AdamNevraumont Nice one."}, {"owner": {"reputation": 517, "user_id": 7340306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd32b68e03c772583ca2fe0f524c3825?s=128&d=identicon&r=PG&f=1", "display_name": "Gaetan", "link": "https://stackoverflow.com/users/7340306/gaetan"}, "edited": false, "score": 0, "creation_date": 1537432115, "post_id": 52410682, "comment_id": 91784559, "body": "@MaximEgorushkin nice thanks, I&#39;m trying to undestand your code. when you do <code>ByteStreamReader reader{data, data + dataSize};</code> it seem like <code>data</code> becomes <code>begin</code>  and <code>data + dataSize</code> becomes <code>end</code>  But where in your <code>ByteStreamReader </code> does that happen? I don&#39;t see any constructor initializing <code>begin</code> and <code>end</code>"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 517, "user_id": 7340306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd32b68e03c772583ca2fe0f524c3825?s=128&d=identicon&r=PG&f=1", "display_name": "Gaetan", "link": "https://stackoverflow.com/users/7340306/gaetan"}, "edited": false, "score": 0, "creation_date": 1537434635, "post_id": 52410682, "comment_id": 91785956, "body": "@Gaetan It uses <a href=\"https://en.cppreference.com/w/cpp/language/aggregate_initialization\" rel=\"nofollow noreferrer\">aggregate initialization</a>."}, {"owner": {"reputation": 517, "user_id": 7340306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd32b68e03c772583ca2fe0f524c3825?s=128&d=identicon&r=PG&f=1", "display_name": "Gaetan", "link": "https://stackoverflow.com/users/7340306/gaetan"}, "edited": false, "score": 0, "creation_date": 1537436961, "post_id": 52410682, "comment_id": 91787460, "body": "@MaximEgorushkin thanks I got it. Another question, let say in your main() function I have <code>data1</code> and <code>data2</code> as well as <code>p1</code> and <code>p2</code>. <code>p1</code> is to be fill with <code>data1</code> and <code>p2</code> with <code>data2</code>. After filling <code>p1</code> with <code>data1</code> (as you done it for <code>p</code>), should I clear <code>begin</code> and <code>end</code> pointer (set them to nullptr for example) because I want to reinitialize them with <code>data2</code>. Or can I simply create another  <code>ByteStreamReader</code> object (<code>reader2</code>) ? [In my real case senario I have a <code>switch</code> statement and for each <code>case</code> (of the switch) the data are read. So new data comes in  for each <code>case</code>]"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 517, "user_id": 7340306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd32b68e03c772583ca2fe0f524c3825?s=128&d=identicon&r=PG&f=1", "display_name": "Gaetan", "link": "https://stackoverflow.com/users/7340306/gaetan"}, "edited": false, "score": 0, "creation_date": 1537437354, "post_id": 52410682, "comment_id": 91787691, "body": "@Gaetan You can create a new <code>ByteStreamReader</code> object. To be able to re-initialize existing one remove that <code>const</code> from <code>ByteStreamReader::end</code> and then do <code>reader = {data2, data2 + data2size};</code>. There is no performance difference between the two methods though, since each of these are just 2 pointer assignments."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1537436032, "last_edit_date": 1537436032, "creation_date": 1537375638, "answer_id": 52410682, "question_id": 52410302, "link": "https://stackoverflow.com/questions/52410302/convert-n-first-bytes-of-unsigned-char-pointer-to-float-and-double-c/52410682#52410682", "title": "convert (n first bytes of) unsigned char pointer to float and double c++", "body": "<p>You can use plain <code>memcpy</code> as another answer advises. I suggest packing <code>memcpy</code> into a function that also does error checking for you for most convenient and type-safe usage.</p>\n\n<p>Example:</p>\n\n<pre><code>#include &lt;cstring&gt;\n#include &lt;stdexcept&gt;\n#include &lt;type_traits&gt;\n\nstruct ByteStreamReader {\n    unsigned char const* begin;\n    unsigned char const* const end;\n\n    template&lt;class T&gt;\n    operator T() {\n        static_assert(std::is_trivially_copyable&lt;T&gt;::value, \n            \"The type you are using cannot be safely copied from bytes.\");\n        if(end - begin &lt; static_cast&lt;decltype(end - begin)&gt;(sizeof(T)))\n            throw std::runtime_error(\"ByteStreamReader\");\n        T t;\n        std::memcpy(&amp;t, begin, sizeof t);\n        begin += sizeof t;\n        return t;\n    }\n};\n\nstruct Position {\n   float pos_x;\n   double pos_y;\n};\n\nint main() {\n    unsigned char data[12] = {};\n    unsigned dataSize = sizeof data;\n\n    ByteStreamReader reader{data, data + dataSize};\n\n    Position p;\n    p.pos_x = reader;\n    p.pos_y = reader;\n}\n</code></pre>\n"}], "owner": {"reputation": 517, "user_id": 7340306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd32b68e03c772583ca2fe0f524c3825?s=128&d=identicon&r=PG&f=1", "display_name": "Gaetan", "link": "https://stackoverflow.com/users/7340306/gaetan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 561, "favorite_count": 0, "accepted_answer_id": 52410682, "answer_count": 2, "score": 1, "last_activity_date": 1537436032, "creation_date": 1537374055, "question_id": 52410302, "link": "https://stackoverflow.com/questions/52410302/convert-n-first-bytes-of-unsigned-char-pointer-to-float-and-double-c", "title": "convert (n first bytes of) unsigned char pointer to float and double c++", "body": "<p>Consider the following c++ code: </p>\n\n<pre><code>unsigned char* data = readData(..);        //Let say data consist of 12 characters\nunsigned int dataSize = getDataSize(...);  //the size in byte of the data is also known (let say 12 bytes)\n\nstruct Position \n{\n   float pos_x;    //remember that float is 4 bytes\n   double pos_y;   //remember that double is 8 bytes\n}\n</code></pre>\n\n<p>Now I want to fill a Position variable/instance with data. </p>\n\n<pre><code>Position pos;\npos.pos_x = ?   //data[0:4[ The first 4 bytes of data should be set to pos_x, since pos_x is of type float which is 4 bytes\npos.pos_x = ?   //data[4:12[ The remaining 8 bytes of data should be set to pos_y which is of type double (8 bytes)\n</code></pre>\n\n<p>I know that in <code>data</code>, the first bytes correspond to <code>pos_x</code> and the rest to <code>pos_y</code>. That means the 4 first byte/character of data should be used to fill pos_x and the 8 remaining byte fill <code>pos_y</code> but I don't know how to do that. \nAny idea?  Thanks. Ps: I'm limited to c++11</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 1, "creation_date": 1537373620, "post_id": 52410159, "comment_id": 91763988, "body": "Can you show how are you referring ?"}, {"owner": {"reputation": 13, "user_id": 9710993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc22e36227127cd27b822ecfd025a1f?s=128&d=identicon&r=PG&f=1", "display_name": "olibear", "link": "https://stackoverflow.com/users/9710993/olibear"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1537374105, "post_id": 52410159, "comment_id": 91764241, "body": "I first set the reference of another variable to a constant like this: &quot;mLetterGrade = a;.&quot; I then say convGPA[mLetterGrade] and it does not return 4.0, it returns nothing."}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1537374216, "post_id": 52410159, "comment_id": 91764305, "body": "Like this <code>string mLetterGrade = a;</code>?"}, {"owner": {"reputation": 13, "user_id": 9710993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc22e36227127cd27b822ecfd025a1f?s=128&d=identicon&r=PG&f=1", "display_name": "olibear", "link": "https://stackoverflow.com/users/9710993/olibear"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1537374347, "post_id": 52410159, "comment_id": 91764393, "body": "string mLetterGrade; is declared above the code. This variable reference is added to an array (letterGrades[]) where I then say letterGrades[0] = a;. This is the full assignment of mLetterGrade to the constant &quot;a.&quot;"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 4, "creation_date": 1537374410, "post_id": 52410159, "comment_id": 91764430, "body": "Still no luck reproducing the issue. Please provide  minimal, complete and verifiable example  <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 13, "user_id": 9710993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc22e36227127cd27b822ecfd025a1f?s=128&d=identicon&r=PG&f=1", "display_name": "olibear", "link": "https://stackoverflow.com/users/9710993/olibear"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1537374540, "post_id": 52410159, "comment_id": 91764513, "body": "I have edited my comment from before"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 1, "creation_date": 1537374847, "post_id": 52410159, "comment_id": 91764684, "body": "Please provide the complete code to reproduce the issue."}, {"owner": {"reputation": 3960, "user_id": 654614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fc0d43eb99234ed9702badb191b7d96?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Boyne", "link": "https://stackoverflow.com/users/654614/frank-boyne"}, "edited": false, "score": 0, "creation_date": 1537388075, "post_id": 52410159, "comment_id": 91770871, "body": "It would be really helpful if you edited your question to provide a complete working program that demonstrates your problem - a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  I attempted to assemble a program from the hints you&#39;ve given so far, but <a href=\"https://ideone.com/TP1HFI\" rel=\"nofollow noreferrer\">that program</a> seems to work correctly."}], "owner": {"reputation": 13, "user_id": 9710993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc22e36227127cd27b822ecfd025a1f?s=128&d=identicon&r=PG&f=1", "display_name": "olibear", "link": "https://stackoverflow.com/users/9710993/olibear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1537373510, "creation_date": 1537373510, "question_id": 52410159, "link": "https://stackoverflow.com/questions/52410159/c-mapping-constants-to-values", "title": "C++ Mapping Constants to Values", "body": "<p>I am working in CodeBlocks with a header file containing constants such as \"const string a = \"A\";\" and \"const string bm = \"B-\";.\" I am trying to map constants like these to other values using the map below, but when i return map[reference to constant] it does not output anything. What is going on?</p>\n\n<pre><code>map&lt;string, double&gt; convGPA;\nconvGPA[a] = 4.0;\nconvGPA[am] = 3.7;\nconvGPA[bp] = 3.3;\nconvGPA[b] = 3.0;\nconvGPA[bm] = 2.7;\nconvGPA[cp] = 2.3;\nconvGPA[c] = 2.0;\nconvGPA[cm] = 1.7;\nconvGPA[dp] = 1.3;\nconvGPA[d] = 1.0;\nconvGPA[dm] = 0.7;\nconvGPA[f] = 0.0;\n</code></pre>\n"}, {"tags": ["c++", "methods", "struct"], "comments": [{"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1537373633, "post_id": 52410149, "comment_id": 91763997, "body": "Please use <a href=\"https://en.cppreference.com/w/cpp/string/basic_string\" rel=\"nofollow noreferrer\"><code>std::string</code></a> rather than <code>char *</code>."}, {"owner": {"reputation": 189, "user_id": 5041850, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-PvUhkzNDxLc/AAAAAAAAAAI/AAAAAAAAAQU/5VB8J7lydx0/photo.jpg?sz=128", "display_name": "Umut &#199;&#246;mlek&#231;io\u011flu", "link": "https://stackoverflow.com/users/5041850/umut-%c3%87%c3%b6mlek%c3%a7io%c4%9flu"}, "edited": false, "score": 0, "creation_date": 1537373822, "post_id": 52410149, "comment_id": 91764102, "body": "I think, you must look at the C++ Data Structures. I recommend read <a href=\"http://www.cplusplus.com/doc/tutorial/structures/\" rel=\"nofollow noreferrer\">this</a> blog"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1544359379, "post_id": 52410149, "comment_id": 94240406, "body": "@G.M.: Sometimes an <a href=\"https://en.cppreference.com/w/cpp/string/basic_string_view\" rel=\"nofollow noreferrer\"><code>std::string_view</code></a> is more appropriate."}], "answers": [{"comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1537373656, "post_id": 52410194, "comment_id": 91764010, "body": "name is not defined in SetName. Needs to be a member function"}, {"owner": {"reputation": 67, "user_id": 10013692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07cf5820d9f8786e0289d3b3a3268aab?s=128&d=identicon&r=PG&f=1", "display_name": "A.Dimitrov", "link": "https://stackoverflow.com/users/10013692/a-dimitrov"}, "edited": false, "score": 0, "creation_date": 1537373691, "post_id": 52410194, "comment_id": 91764026, "body": "However it says identifier name (from the structure) is not defined? I want to change the name field of the declared strucuture"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 67, "user_id": 10013692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07cf5820d9f8786e0289d3b3a3268aab?s=128&d=identicon&r=PG&f=1", "display_name": "A.Dimitrov", "link": "https://stackoverflow.com/users/10013692/a-dimitrov"}, "edited": false, "score": 0, "creation_date": 1537373993, "post_id": 52410194, "comment_id": 91764181, "body": "@A.Dimitrov You need to pass <code>Person</code> object into the function."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1537373694, "last_edit_date": 1537373694, "creation_date": 1537373615, "answer_id": 52410194, "question_id": 52410149, "link": "https://stackoverflow.com/questions/52410149/method-to-change-elements-inside-struct-in-c/52410194#52410194", "title": "Method to change elements inside struct in C++?", "body": "<p>Something like:</p>\n\n<pre><code>void SetName(CPerson&amp; p, const char* szName) {\n    p.name = szName;\n}\n</code></pre>\n\n<p>Be careful though, <code>szName</code> argument may be pointing to an array whose lifetime may end before the lifetime of <code>CPerson::name</code> ends. That makes <code>CPerson::name</code> an invalid pointer.</p>\n"}, {"comments": [{"owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "edited": false, "score": 0, "creation_date": 1544360340, "post_id": 52410229, "comment_id": 94240640, "body": "i&#39;m not the downvoter but I think trying to change a const pointer once it has been initialized may not work so well."}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 0, "last_activity_date": 1537373756, "creation_date": 1537373756, "answer_id": 52410229, "question_id": 52410149, "link": "https://stackoverflow.com/questions/52410149/method-to-change-elements-inside-struct-in-c/52410229#52410229", "title": "Method to change elements inside struct in C++?", "body": "<p>you need to make it a member function</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nstruct CPerson {\n    const char* name = \"Ivan\";\n    const char* gender = \"Male\";\n\n\n   void SetName(const char* szName) {\n    //what to write here?\n    name = szname;\n}\n};\n</code></pre>\n\n<p>that code is still wrong as its just juggling pointers. You should use std::string to store strings. But at least the code will compile;</p>\n"}, {"tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": false, "score": 0, "last_activity_date": 1544360130, "creation_date": 1544360130, "answer_id": 53692523, "question_id": 52410149, "link": "https://stackoverflow.com/questions/52410149/method-to-change-elements-inside-struct-in-c/53692523#53692523", "title": "Method to change elements inside struct in C++?", "body": "<blockquote>\n  <p>I would like to implement a method that changes the values of the fields.</p>\n</blockquote>\n\n<p>I wouldn't be so certain you should do that.</p>\n\n<p>You see, the fields of a struct are, by default, publicly-accessible - which means anyone can change them, method or no method. Why bother writing such a method? Isn't it redundant?</p>\n\n<p>If you had a <em>class</em> instead of a struct, or if you had set your field access to <code>protected</code> or <code>private</code>, then it makes sense to have a method for setting field value, e.g.:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;string_view&gt;\n\nstruct Person {\nprotected:\n    std::string name = \"Ivan\";\n    std::string gender = \"Male\";\n\npublic:\n   void changeName(std::string_view new_name) {\n       name = new_name;\n   }\n};\n</code></pre>\n\n<p>(<code>string_view</code> is new in C++17; before that, you could use  <code>const std::string&amp;</code>).</p>\n\n<p>But even then it's not always a good idea to have that. Also, in this struct of yours, there's a default name and gender, without a good reason. Instead of both these things, you might make the struct immutable:</p>\n\n<pre><code>#include &lt;string&gt;\n\nstruct Person {\n    const std::string name;\n    const std::string gender;\n};\n</code></pre>\n\n<p>which, for many applications, makes sense (e.g. if you get this from some database, rather than tracking a person's name and gender throughout their lives).</p>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 9833773, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBMUn.png?s=128&g=1", "display_name": "EloyBG", "link": "https://stackoverflow.com/users/9833773/eloybg"}, "is_accepted": false, "score": 1, "last_activity_date": 1544362586, "creation_date": 1544362586, "answer_id": 53692875, "question_id": 52410149, "link": "https://stackoverflow.com/questions/52410149/method-to-change-elements-inside-struct-in-c/53692875#53692875", "title": "Method to change elements inside struct in C++?", "body": "<p>A struct works like a class, the only difference is that all inside the struct is public by default.</p>\n\n<p>So you can (and in this case you have to) declare setName inside the struct</p>\n"}], "owner": {"reputation": 67, "user_id": 10013692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07cf5820d9f8786e0289d3b3a3268aab?s=128&d=identicon&r=PG&f=1", "display_name": "A.Dimitrov", "link": "https://stackoverflow.com/users/10013692/a-dimitrov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1544362586, "creation_date": 1537373491, "last_edit_date": 1544359087, "question_id": 52410149, "link": "https://stackoverflow.com/questions/52410149/method-to-change-elements-inside-struct-in-c", "title": "Method to change elements inside struct in C++?", "body": "<p>I have a structure with 2 fields which have a value. I would like to implement a method that changes the values of the fields. I did this with the following code, but it is not correct. I would like to ask how can I fix this?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nstruct CPerson {\n    const char* name = \"Ivan\";\n    const char* gender = \"Male\";\n\n};\nvoid SetName(const char* szName) {\n    //what to write here?\n    *name = *szname;\n}\n</code></pre>\n"}, {"tags": ["c++", "docker", "dockerfile"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1537373611, "post_id": 52410006, "comment_id": 91763979, "body": "<code>std::cout&lt;&lt;&quot;HostName:&quot;&lt;&lt;argv[1]&lt;&lt;std::endl; std::cout&lt;&lt;&quot;Port:&quot;&lt;&lt;std::stoi(argv[2])&lt;&lt;std::endl;</code> You try to access commandline parameters while I can&#39;t see that your program is started with any. That will probably give you a segmentation fault, and the program immediately stops."}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1537373769, "post_id": 52410183, "comment_id": 91764072, "body": "I don&#39;t believe that&#39;s the primary problem."}, {"owner": {"reputation": 23608, "user_id": 2915097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91318014af3b3d389901d50d5f9276d5?s=128&d=identicon&r=PG&f=1", "display_name": "user2915097", "link": "https://stackoverflow.com/users/2915097/user2915097"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1537374296, "post_id": 52410183, "comment_id": 91764352, "body": "I do not know if the C++ program is correct, but I am sure the <code>RUN cd...</code> line is useless"}, {"owner": {"reputation": 6267, "user_id": 1913744, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5bAQS.jpg?s=128&g=1", "display_name": "Bercovici Adrian", "link": "https://stackoverflow.com/users/1913744/bercovici-adrian"}, "edited": false, "score": 0, "creation_date": 1537421066, "post_id": 52410183, "comment_id": 91779293, "body": "But what command you use to run a shell script?If my application is named <code>main.exe</code> and i am <b>already</b> in the working directory how should <code>ENTRYPOINT</code> be used?  <code>ENTRYPOINT [&quot;.&#47;main&quot;]</code> ?"}, {"owner": {"reputation": 23608, "user_id": 2915097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91318014af3b3d389901d50d5f9276d5?s=128&d=identicon&r=PG&f=1", "display_name": "user2915097", "link": "https://stackoverflow.com/users/2915097/user2915097"}, "edited": false, "score": 1, "creation_date": 1537421967, "post_id": 52410183, "comment_id": 91779629, "body": "the simplest is what Amedeo said, you can also use WORKDIR, or <code>RUN cd the_correct_directory ampersandampersand .&#47;main</code>  sorry on my phone I do not find the symbol for ampersand"}, {"owner": {"reputation": 23608, "user_id": 2915097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91318014af3b3d389901d50d5f9276d5?s=128&d=identicon&r=PG&f=1", "display_name": "user2915097", "link": "https://stackoverflow.com/users/2915097/user2915097"}, "edited": false, "score": 0, "creation_date": 1537422122, "post_id": 52410183, "comment_id": 91779704, "body": "yes if you are already in  the correct directory, you are correct"}, {"owner": {"reputation": 6267, "user_id": 1913744, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5bAQS.jpg?s=128&g=1", "display_name": "Bercovici Adrian", "link": "https://stackoverflow.com/users/1913744/bercovici-adrian"}, "edited": false, "score": 0, "creation_date": 1537423870, "post_id": 52410183, "comment_id": 91780380, "body": "I have tried both with <code>WORKDIR</code> and <code>ENTRYPOINT</code> and it just does nothing ...it just waits forever."}, {"owner": {"reputation": 23608, "user_id": 2915097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91318014af3b3d389901d50d5f9276d5?s=128&d=identicon&r=PG&f=1", "display_name": "user2915097", "link": "https://stackoverflow.com/users/2915097/user2915097"}, "edited": false, "score": 0, "creation_date": 1537424486, "post_id": 52410183, "comment_id": 91780648, "body": "you can also <code>docker run -it ubuntu:latest bash</code> and then you type the commands of the Dockerfile (not the directives like RUN) and see what works , well you will need <code>docker cp</code> which is not user friendly"}, {"owner": {"reputation": 6267, "user_id": 1913744, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5bAQS.jpg?s=128&g=1", "display_name": "Bercovici Adrian", "link": "https://stackoverflow.com/users/1913744/bercovici-adrian"}, "edited": false, "score": 0, "creation_date": 1537432107, "post_id": 52410183, "comment_id": 91784556, "body": "So i got an error after waiting it out <code>Error response from daemon ; container [id] encountered an error during CreateProcess:failure in a Windows system call: The compute system exited unexpectedly</code>"}, {"owner": {"reputation": 6267, "user_id": 1913744, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5bAQS.jpg?s=128&g=1", "display_name": "Bercovici Adrian", "link": "https://stackoverflow.com/users/1913744/bercovici-adrian"}, "reply_to_user": {"reputation": 23608, "user_id": 2915097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91318014af3b3d389901d50d5f9276d5?s=128&d=identicon&r=PG&f=1", "display_name": "user2915097", "link": "https://stackoverflow.com/users/2915097/user2915097"}, "edited": false, "score": 0, "creation_date": 1537435754, "post_id": 52410183, "comment_id": 91786686, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/180430/discussion-between-bercovici-adrian-and-user2915097\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 23608, "user_id": 2915097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91318014af3b3d389901d50d5f9276d5?s=128&d=identicon&r=PG&f=1", "display_name": "user2915097", "link": "https://stackoverflow.com/users/2915097/user2915097"}, "is_accepted": false, "score": 1, "last_activity_date": 1537373588, "creation_date": 1537373588, "answer_id": 52410183, "question_id": 52410006, "link": "https://stackoverflow.com/questions/52410006/docker-does-not-start-cpp-application/52410183#52410183", "title": "Docker does not start cpp application", "body": "<p>replace your <code>RUN cd...</code> by a <code>WORKDIR ...</code></p>\n\n<p>your cd does not what you expect in this context, and is forgotten at the next line </p>\n\n<p>you can  also remove the <code>RUN cd...</code> line and put the whole path in the</p>\n\n<p>ENTRYPOINT</p>\n\n<p>line</p>\n"}, {"comments": [{"owner": {"reputation": 6267, "user_id": 1913744, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5bAQS.jpg?s=128&g=1", "display_name": "Bercovici Adrian", "link": "https://stackoverflow.com/users/1913744/bercovici-adrian"}, "edited": false, "score": 0, "creation_date": 1537422556, "post_id": 52410515, "comment_id": 91779885, "body": "I have used this dockerfile but when i run <code>docker run [appname] .</code> it just does nothing ."}, {"owner": {"reputation": 828, "user_id": 4227687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8636f232a295774e9fec619e0169dbab?s=128&d=identicon&r=PG", "display_name": "Amedeo", "link": "https://stackoverflow.com/users/4227687/amedeo"}, "reply_to_user": {"reputation": 6267, "user_id": 1913744, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5bAQS.jpg?s=128&g=1", "display_name": "Bercovici Adrian", "link": "https://stackoverflow.com/users/1913744/bercovici-adrian"}, "edited": false, "score": 0, "creation_date": 1537428416, "post_id": 52410515, "comment_id": 91782662, "body": "See my updated answer. Note that the port in the Dockerfile must be an integer. If it still does not work, it would be better to add an image of your bash or a description of the error that you see."}, {"owner": {"reputation": 6267, "user_id": 1913744, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5bAQS.jpg?s=128&g=1", "display_name": "Bercovici Adrian", "link": "https://stackoverflow.com/users/1913744/bercovici-adrian"}, "edited": false, "score": 0, "creation_date": 1537429127, "post_id": 52410515, "comment_id": 91783028, "body": "I updated my dockerfile and added an image as to what happens when i use <code>docker run </code>"}], "tags": [], "owner": {"reputation": 828, "user_id": 4227687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8636f232a295774e9fec619e0169dbab?s=128&d=identicon&r=PG", "display_name": "Amedeo", "link": "https://stackoverflow.com/users/4227687/amedeo"}, "is_accepted": false, "score": 2, "last_activity_date": 1537438061, "last_edit_date": 1537438061, "creation_date": 1537374919, "answer_id": 52410515, "question_id": 52410006, "link": "https://stackoverflow.com/questions/52410006/docker-does-not-start-cpp-application/52410515#52410515", "title": "Docker does not start cpp application", "body": "<p>You should put the complete path in the <code>ENTRYPOINT</code> and add the parameters to your program.</p>\n\n<p>This Dockerfile does the job:</p>\n\n<pre><code>FROM  ubuntu:latest\nRUN mkdir -p /home/dockerc\nCOPY . /home/dockerc\nENTRYPOINT [\"/home/dockerc/main\", \"hostname\", \"8000\"]\n</code></pre>\n\n<p>replacing <code>hostname</code> and <code>8000</code> with the hostname and port that you need.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>I tested your program in Linux, and to make it run I had to:</p>\n\n<p>1) compile for c++11 (because of <code>chrono</code>)</p>\n\n<p>2) add <code>-t</code> to build the docker app</p>\n\n<p>This is the complete list of commands to run:</p>\n\n<pre><code>g++ -o main main.cpp -std=c++11\ndocker build -t app .\ndocker run app\n</code></pre>\n\n<p>and this is the output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/wvaHD.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wvaHD.jpg\" alt=\"bash output\"></a></p>\n"}], "owner": {"reputation": 6267, "user_id": 1913744, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5bAQS.jpg?s=128&g=1", "display_name": "Bercovici Adrian", "link": "https://stackoverflow.com/users/1913744/bercovici-adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 395, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1537438061, "creation_date": 1537372949, "last_edit_date": 1537432056, "question_id": 52410006, "link": "https://stackoverflow.com/questions/52410006/docker-does-not-start-cpp-application", "title": "Docker does not start cpp application", "body": "<p>i am trying to run a <code>cpp</code> application within docker.After i have built the <code>executable</code> and created the <code>Dockerfile</code> , i can not run it inside docker for some reason:</p>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;chrono&gt;\n#include&lt;thread&gt;\n#include&lt;string&gt;\n#include &lt;unistd.h&gt;\n\nint main(int argc,char *argv[])\n{\n    std::cout&lt;&lt;\"Started daemon...\"&lt;&lt;std::endl;\n    std::string hostString(argv[1]);\n    std::cout&lt;&lt;\"HostName:\"&lt;&lt;hostString&lt;&lt;std::endl; \n    std::cout&lt;&lt;\"Port:\"&lt;&lt;std::stoi(argv[2])&lt;&lt;std::endl;\n    int i=0;\n    while(true){\n      std::cout&lt;&lt;\"Iterations:\"&lt;&lt;i++&lt;&lt;std::endl;\n      std::this_thread::sleep_for (std::chrono::seconds(1));\n      if(i++&gt;10000) i=0;\n    }\n    return 0; \n}\n</code></pre>\n\n<p><strong>Dockerfile</strong></p>\n\n<pre><code>FROM  ubuntu:latest\nRUN mkdir -p /home/dockerc\nCOPY . /home/dockerc\nENTRYPOINT [\"/home/dockerc/main\",\"127.0.0.1\",\"8350\"]\n</code></pre>\n\n<p><strong>dockerc folder</strong></p>\n\n<ul>\n<li><strong>main.cpp</strong></li>\n<li><strong>main.exe</strong></li>\n<li><strong>Dockerfile</strong></li>\n</ul>\n\n<p>I run the following:<Br>\n<code>g++ main main.cpp</code><br>\n <code>docker build app .</code> <br>\n <code>docker images</code>  (it shows that <code>app</code>  image is created)<br>\n <code>docker run app</code> </p>\n\n<p>The build is succesfull but when i hit the <code>run</code> it looks like it blocks.It just does not continue.</p>\n\n<p><a href=\"https://i.stack.imgur.com/si4eh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/si4eh.png\" alt=\"enter image description here\"></a></p>\n\n<p>What is wrong?Could someone help me ?I am new to docker.</p>\n\n<p><strong>P.S</strong> After waiting out for like 10 minutes i get long error message that begins  with the following:</p>\n\n<pre><code>$ docker run cpapp\nC:\\Program Files\\Docker\\Docker\\Resources\\bin\\docker.exe: Error response from daemon: container a575e463f193dbc475aab78c1810486e23981a50c                                                           0b731f9c891c4143d0ed5b3 encountered an error during CreateProcess: failure in a Windows system call: The compute system exited unexpecte                                                                                                                                       dly. (0xc0370106)\n</code></pre>\n"}, {"tags": ["c++", "turing-machines"], "comments": [{"owner": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "edited": false, "score": 0, "creation_date": 1537372988, "post_id": 52409962, "comment_id": 91763637, "body": "Using fgets() ?"}, {"owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 2, "creation_date": 1537373002, "post_id": 52409962, "comment_id": 91763648, "body": "To make it easier for people to help you, you really should post your actual C++ code here (or rather a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>) - otherwise we can only guess!"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1537373055, "post_id": 52409962, "comment_id": 91763677, "body": "Maybe the file has the wrong line endings for windows. What I am talking about is this: <a href=\"https://stackoverflow.com/questions/6089231/getting-std-ifstream-to-handle-lf-cr-and-crlf\" title=\"getting std ifstream to handle lf cr and crlf\">stackoverflow.com/questions/6089231/&hellip;</a>"}, {"owner": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "edited": false, "score": 0, "creation_date": 1537373179, "post_id": 52409962, "comment_id": 91763751, "body": "<a href=\"http://www.cplusplus.com/reference/string/string/getline/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/string/string/getline</a> - I believe <code>getline</code> is what you are looking for; just look closer. It reads a line, which you can process, then it reads the next line, which you can process, and so on. It stops when it gets to end of file."}], "owner": {"reputation": 11, "user_id": 10386752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e95279476c98be882b2ad038a4d305a6?s=128&d=identicon&r=PG&f=1", "display_name": "Zymantas", "link": "https://stackoverflow.com/users/10386752/zymantas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "closed_date": 1537373063, "answer_count": 0, "score": 0, "last_activity_date": 1541892598, "creation_date": 1537372831, "last_edit_date": 1541892598, "question_id": 52409962, "link": "https://stackoverflow.com/questions/52409962/universal-turing-machine-programming-in-c-reading-from-file", "closed_reason": "Duplicate", "title": "Universal Turing machine programming in C++. Reading from file", "body": "<p>I am getting only one line at the time from reading from a file in C++. I have a code like this.</p>\n\n<pre><code>1 //starting point\n00V0000000001111*A000000000001111*B000000000000000000000000ZR000000000H000000 //line\n\n0 0 0 R 0   //commands to do in turing machine\n0 1 1 R 0\n0 V V R 0 \n0 * * L 1\n\n1 0 * R 2\n1 1 * R 3\n1 V V R 20\n1 V V R 20\n\n2 * 0 R 4\n3 * 1 R 5\n\n4 A A R 4\n4 0 0 R 4\n4 1 1 R 4\n5 A A R 5\n5 0 0 R 5\n5 1 1 R 5\n\n4 * * L 6\n5 * * L 7\n\n6 0 * R 8\n6 1 * R 9\n7 0 * R 10\n7 1 * R 11\n6 A A R 20\n7 A A R 20\n\n8 * 0 R 12\n9 * 1 R 13\n10 * 0 R 14\n11 * 1 R 15\n\n12 B B R 12\n12 0 0 R 12\n12 1 1 R 12\n13 B B R 13\n13 0 0 R 13\n13 1 1 R 13\n14 B B R 14\n14 0 0 R 14\n14 1 1 R 14\n15 B B R 15\n15 0 0 R 15\n15 1 1 R 15\n\n12 Z 0 L 16\n13 Z 1 L 16\n14 Z 1 L 16\n15 Z 0 L 17\n\n12 C 1 L 16\n13 C 0 L 17\n14 C 0 L 17\n15 C 1 L 17\n\n16 0 Z L 18\n17 0 C L 18\n\n18 A A L 18\n18 B B L 18\n18 * * L 18\n18 0 0 L 18\n18 1 1 L 18\n18 V V R 0\n\n20 A A R 20\n20 B B R 20\n20 * * R 20\n20 0 0 R 20\n20 1 1 R 20\n20 Z 0 R 21\n20 C 1 R 21\n\n21 0 0 R X\n21 1 1 R X\n</code></pre>\n\n<p>How can I read one line at the time? Because if I do <code>while (getline (in,line))</code> I get all the text. </p>\n"}, {"tags": ["c++", "iterator"], "comments": [{"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 0, "creation_date": 1537372867, "post_id": 52409892, "comment_id": 91763568, "body": "you dont need <code>ForwardIterator(const ForwardIterator&amp; right)</code>, it will be implicitly declared by the compiler. Which means you don&#39;t need to care about the rule of three (of 5 actually), which comes for free in your case."}, {"owner": {"reputation": 39, "user_id": 8684286, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Q_1JporOFEU/AAAAAAAAAAI/AAAAAAAAmvY/LvaBgzLmTbQ/photo.jpg?sz=128", "display_name": "Osama Asif C Infinitum", "link": "https://stackoverflow.com/users/8684286/osama-asif-c-infinitum"}, "reply_to_user": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 0, "creation_date": 1537373082, "post_id": 52409892, "comment_id": 91763695, "body": "@UmNyobe Yep, that is the case, but I forgot to mention(updating post now), that since this a university assignment, I am asked to write a copy constructor no matter what the case."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1537373910, "post_id": 52409892, "comment_id": 91764141, "body": "@OsamaAsifCInfinitum I don&#39;t suppose <code>YouClass(YourClass const&amp;) = default;</code> counts as writing your own?"}, {"owner": {"reputation": 39, "user_id": 8684286, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Q_1JporOFEU/AAAAAAAAAAI/AAAAAAAAmvY/LvaBgzLmTbQ/photo.jpg?sz=128", "display_name": "Osama Asif C Infinitum", "link": "https://stackoverflow.com/users/8684286/osama-asif-c-infinitum"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1537374111, "post_id": 52409892, "comment_id": 91764244, "body": "@WhozCraig I doubt they will accept that, their mindset is way too weird, trust me I don&#39;t like writing things that don&#39;t need to be written, but what can you do..."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1537374203, "post_id": 52409892, "comment_id": 91764300, "body": "@OsamaAsifCInfinitum Something to leave in the course comments, I suppose. Good luck with that."}, {"owner": {"reputation": 39, "user_id": 8684286, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Q_1JporOFEU/AAAAAAAAAAI/AAAAAAAAmvY/LvaBgzLmTbQ/photo.jpg?sz=128", "display_name": "Osama Asif C Infinitum", "link": "https://stackoverflow.com/users/8684286/osama-asif-c-infinitum"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1537374314, "post_id": 52409892, "comment_id": 91764363, "body": "@WhozCraig haha will do, let&#39;s hope they improve their standard"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 8684286, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Q_1JporOFEU/AAAAAAAAAAI/AAAAAAAAmvY/LvaBgzLmTbQ/photo.jpg?sz=128", "display_name": "Osama Asif C Infinitum", "link": "https://stackoverflow.com/users/8684286/osama-asif-c-infinitum"}, "edited": false, "score": 0, "creation_date": 1537373441, "post_id": 52410050, "comment_id": 91763893, "body": "I agree with you, but keeping in mind it&#39;s a university assignment, which I have added in the question, they have asked to write it anyway. So keeping this in mind, do you think my approach of copy-swap-idiom is right? And do iterators in general ever need to have a destructor? Thanks!"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 39, "user_id": 8684286, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Q_1JporOFEU/AAAAAAAAAAI/AAAAAAAAmvY/LvaBgzLmTbQ/photo.jpg?sz=128", "display_name": "Osama Asif C Infinitum", "link": "https://stackoverflow.com/users/8684286/osama-asif-c-infinitum"}, "edited": false, "score": 0, "creation_date": 1537373514, "post_id": 52410050, "comment_id": 91763920, "body": "@OsamaAsifCInfinitum Your copy and swap is fine.  Generally iterators don&#39;t need destructors is all they do is point to an element."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 2, "last_activity_date": 1537373669, "last_edit_date": 1537373669, "creation_date": 1537373105, "answer_id": 52410050, "question_id": 52409892, "link": "https://stackoverflow.com/questions/52409892/copy-and-swap-idiom-and-iterators/52410050#52410050", "title": "Copy and Swap Idiom and Iterators", "body": "<p>What you have is correct and will work, but it is not needed.</p>\n\n<p>Since your iterator isn't responsible for the node it is holding a pointer to it is fine to have a do nothing destuctor.  Because you have a do nothing destructor you don't need to do anything special for any of the copy/move constructors or copy/move assignment operators.  This means you don't need to define any of them and you can follow the rule of zero.</p>\n\n<p>Remember, you only need to implement the rule of 3/rule of 5 when your class is actually responsible for acquiring and releasing a resource.  If all you are doing is dealing with POD/RAII types then the compiler defaults will \"do the right thing\".</p>\n"}], "owner": {"reputation": 39, "user_id": 8684286, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Q_1JporOFEU/AAAAAAAAAAI/AAAAAAAAmvY/LvaBgzLmTbQ/photo.jpg?sz=128", "display_name": "Osama Asif C Infinitum", "link": "https://stackoverflow.com/users/8684286/osama-asif-c-infinitum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1537382856, "creation_date": 1537372559, "last_edit_date": 1537382856, "question_id": 52409892, "link": "https://stackoverflow.com/questions/52409892/copy-and-swap-idiom-and-iterators", "title": "Copy and Swap Idiom and Iterators", "body": "<p>I have been writing a doubly linked list with nested iterators. When I was working on copy constructor and operator= overloading, I came across Copy-swap-idiom. But from what I realize, it uses the RULE OF THREE (and a Half, if you want). But  iterators don't have a destructor, because the \"node\" they point to isn't their \"property\", its doubly lists.</p>\n\n<p>This is a university assignment and I am asked to write a copy constructor and operator no matter what the case, wether it's the same as implicit definition or not.</p>\n\n<p>My question is does copy-swap-idiom always need to have a destuctor? If so in Iterators case, would this work or should I use normal \"dirty\" assignment? Below is relevant part of my iterator class:</p>\n\n<pre><code>template&lt;class T&gt;\nclass List&lt;T&gt;::ForwardIterator {\nprivate:\n    Node&lt;T&gt; *current;\n\npublic:\n    ForwardIterator(Node&lt;T&gt; *curr = nullptr) : current(curr) {}\n    ForwardIterator(const ForwardIterator&amp; right) : current(right.current) {}\n...\n...\n</code></pre>\n\n<p>Above part shows the constructors and private data of iterator. Below part shows it's assignment and swap function.</p>\n\n<pre><code>friend void swap(ForwardIterator&amp; first, ForwardIterator&amp; second) {\n    using std::swap;\n    swap(first.current, second.current);\n}\n\nForwardIterator&amp; operator=(ForwardIterator right) {\n    swap(*this, right);\n    return *this;\n}\n</code></pre>\n\n<p>This is my implementation, and I wanted to know is it wise to use here? (My iterator doesn't have a destructor, hence my question).</p>\n"}, {"tags": ["c++", "scope", "header"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1537371935, "post_id": 52409620, "comment_id": 91763036, "body": "Voting to close as a typo.  static functions are still scoped to the class name so you need <code>VoterDB::cmd_new</code>, <code>VoterDB::cmd_update</code> and <code>VoterDB::cmd_view</code> for your function calls"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1537372052, "post_id": 52409620, "comment_id": 91763096, "body": "<code>cmd_new</code> was not declared in the global scope. It was declared in the scope of <code>VoterDB</code>, hence invocation should be <code>VoterDB::cmd_new</code>. If such class contains only <code>static</code> methods, and no data, why do you even need a <code>class</code>, since it seems that you wanted to declare them as free functions."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1537372167, "post_id": 52409620, "comment_id": 91763156, "body": "adding to Algirdas comment: given that they are all static you&#39;d rather put the methods inside a namespace instead of inside a class"}, {"owner": {"reputation": 11, "user_id": 8901271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/136cf0492987425f7b272c2104bb70b5?s=128&d=identicon&r=PG&f=1", "display_name": "mschultz", "link": "https://stackoverflow.com/users/8901271/mschultz"}, "edited": false, "score": 0, "creation_date": 1537372757, "post_id": 52409620, "comment_id": 91763506, "body": "I edited the post, any more help would be greatly appreciated"}], "answers": [{"tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": false, "score": 0, "last_activity_date": 1537379120, "creation_date": 1537379120, "answer_id": 52411526, "question_id": 52409620, "link": "https://stackoverflow.com/questions/52409620/functions-declared-in-header-file-gives-not-in-scope-error/52411526#52411526", "title": "Functions declared in header file gives not in scope error", "body": "<p>This answer should be deleted as a typo, as NathanOliver said. I'm writting it just to clarify you because you requested it.</p>\n\n<hr>\n\n<p>To call a static member function of a class you must provide the name of the class.</p>\n\n<p>So, in main(), instead of</p>\n\n<pre><code>cmd_new(lastname,firstname,age,stnum,street,town,zip,amtdonated);\n</code></pre>\n\n<p>use</p>\n\n<pre><code>VoterDB::cmd_new(lastname,firstname,age,stnum,street,town,zip,amtdonated);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8901271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/136cf0492987425f7b272c2104bb70b5?s=128&d=identicon&r=PG&f=1", "display_name": "mschultz", "link": "https://stackoverflow.com/users/8901271/mschultz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1537379120, "creation_date": 1537371671, "last_edit_date": 1537378695, "question_id": 52409620, "link": "https://stackoverflow.com/questions/52409620/functions-declared-in-header-file-gives-not-in-scope-error", "title": "Functions declared in header file gives not in scope error", "body": "<p>I am working on a project which has no globally defined variables, or class objects or structs in it. I have a bunch of variables defined in the main of Voter.cpp and have different databse functions defined in VoterDB.cpp with the declarations made in VoterDB.h</p>\n\n<p>VoterDB.h ---> VoterDB.cpp\n|\n|\n|\nVoter.cpp</p>\n\n<p>Voter.cpp</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    #include &lt;stdlib.h&gt;\n    #include \"VoterDB.h\"\n    using namespace std;\n\n    class Voter {\n       public:\n\n       private:\n\n    };\n\n    int main(int argc, char *argv[])\n    {\n       string lastname=\"\";\n       string firstname=\"\";\n       int age=0;\n       int stnum=0;\n       string street=\"\";\n       string town=\"\";\n       string zip=\"\";\n       float amtdonated=0;\n       cout &lt;&lt; \"&gt;: \";\n       string command;\n       getline (cin, command);\n       while(command != \"Quit\"){\n       if(command==\"New\"){\n        cmd_new(lastname,firstname,age,stnum,street,town,zip,amtdonated);\n       } else if(command==\"Update\"){\n           cmd_update(lastname, firstname, age, stnum,street,town,zip);\n       } else if(command==\"View\"){\n        cmd_view(lastname,firstname,age,stnum,street,town,zip,amtdonated)\n        } else if(command==\"Donate\"){\n\n        } else if(command==\"Report\"){\n\n        }\n       }\n\n\n     }\n</code></pre>\n\n<p>VoterDB.cpp</p>\n\n<pre><code>       #\n    include &lt; iostream &gt; #include &lt; stdlib.h &gt; #include &lt; string &gt; #include \"VoterDB.h\"\n    using namespace std;\n\n    void cmd_new(string &amp; lastname, string &amp; firstname, int &amp; age, int &amp; stnum, string &amp; streetname, string &amp; town, string &amp; zip, float &amp; amtdonated) {\n        cout &lt;&lt; \"\\nEnter First Name\\n\";\n        cout &lt;&lt; \"&gt;: \";\n        getline(cin, firstname);\n        cout &lt;&lt; \"\\nEnter Last Name\\n\";\n        cout &lt;&lt; \"&gt;: \";\n        getline(cin, lastname);\n        cout &lt;&lt; \"\\nEnter Age\\n\";\n        cout &lt;&lt; \"&gt;: \";\n        stringstream(cin, age);\n        cout &lt;&lt; \"\\nEnter Street Number\\n\";\n        cout &lt;&lt; \"&gt;: \";\n        stringstream(cin, stnum);\n        cout &lt;&lt; \"\\nEnter Street Name\\n\";\n        cout &lt;&lt; \"&gt;: \";\n        getline(cin, streetname);\n        cout &lt;&lt; \"\\nEnter Town\\n\";\n        cout &lt;&lt; \"&gt;: \";\n        getline(cin, town);\n        cout &lt;&lt; \"\\nEnter Zipcode\\n\";\n        cout &lt;&lt; \"&gt;: \";\n        getline(cin, zip);\n        amtdonated = 0.0;\n\n        return;\n    }\n\n    void cmd_update(string &amp; lastname, string &amp; firstname, int &amp; age, int &amp; stnum, string &amp; streetname, string &amp; town, string &amp; zip) {\n        string input = \"\";\n        cout &lt;&lt; \"\\nEnter Y or N\\n\";\n        cout &lt;&lt; \"Change First Name? (\" &lt;&lt; firstname &lt;&lt; \")\\n\";\n        cout &lt;&lt; \"&gt;: \";\n        if (getline(cin, input) == \"Y\" || getline(cin, input) == \"y\") {\n            cout &lt;&lt; \"\\n&gt;: \";\n            getline(cin, firstname);\n            input = \"\";\n        }\n        cout &lt;&lt; \"\\nChange Last Name? (\" &lt;&lt; lastname &lt;&lt; \")\\n\";\n        cout &lt;&lt; \"&gt;: \";\n        if (getline(cin, input) == \"Y\" || getline(cin, input) == \"y\") {\n            cout &lt;&lt; \"\\n&gt;: \";\n            getline(cin, lastname);\n            input = \"\";\n        }\n        cout &lt;&lt; \"\\nChange Age? (\" &lt;&lt; age &lt;&lt; \")\\n\";\n        cout &lt;&lt; \"&gt;: \";\n        if (getline(cin, input) == \"Y\" || getline(cin, input) == \"y\") {\n            cout &lt;&lt; \"\\n&gt;: \";\n            stringstream(cin, age);\n            input = \"\";\n        }\n        cout &lt;&lt; \"\\nChange Street Number? (\" &lt;&lt; stnum &lt;&lt; \")\\n\";\n        cout &lt;&lt; \"&gt;: \";\n        if (getline(cin, input) == \"Y\" || getline(cin, input) == \"y\") {\n            cout &lt;&lt; \"\\n&gt;: \";\n            stringstream(cin, stnum);\n            input = \"\";\n        }\n        cout &lt;&lt; \"\\nChange Street Name? (\" &lt;&lt; streetname &lt;&lt; \")\\n\";\n        cout &lt;&lt; \"&gt;: \";\n        if (getline(cin, input) == \"Y\" || getline(cin, input) == \"y\") {\n            cout &lt;&lt; \"\\n&gt;: \";\n            getline(cin, streetname);\n            input = \"\";\n        }\n        cout &lt;&lt; \"\\nChange Town? (\" &lt;&lt; town &lt;&lt; \")\\n\";\n        cout &lt;&lt; \"&gt;: \";\n        if (getline(cin, input) == \"Y\" || getline(cin, input) == \"y\") {\n            cout &lt;&lt; \"\\n&gt;: \";\n            getline(cin, town);\n            input = \"\";\n        }\n        cout &lt;&lt; \"\\nChange Zipcode? (\" &lt;&lt; zip &lt;&lt; \")\\n\";\n        cout &lt;&lt; \"&gt;: \";\n        if (getline(cin, input) == \"Y\" || getline(cin, input) == \"y\") {\n            cout &lt;&lt; \"\\n&gt;: \";\n            getline(cin, zip);\n            input = \"\";\n        }\n\n        return;\n    }\n\n    void cmd_view(string &amp; lastname, string &amp; firstname, int &amp; age, int &amp; stnum, string &amp; streetname, string &amp; town, string &amp; zip, float &amp; amtdonated) {\n        cout &lt;&lt; firstname &lt;&lt; \" \" &lt;&lt; lastname &lt;&lt; \", \" &lt;&lt; age &lt;&lt; \"\\n\"\n        cout &lt;&lt; stnum &lt;&lt; \" \" &lt;&lt; streetname &lt;&lt; \"\\n\"\n        cout &lt;&lt; town &lt;&lt; \" \" &lt;&lt; zip &lt;&lt; \"\\n\"\n        cout &lt;&lt; \"Amount Donated: $\" &lt;&lt; amtdonated;\n\n        return;\n    }\n</code></pre>\n\n<p>VoterDB.h</p>\n\n<pre><code>    #ifndef VOTERDB_H\n    # define VOTERDB_H\n    # include &lt; iostream &gt; #include &lt; stdlib.h &gt; #include &lt; string &gt;\n    using namespace std;\n    class VoterDB {\n        public:\n            static void cmd_new(string lastname, string firstname, int age, int stnum, string streetname, string town, string zip, float amtdonated);\n            static void cmd_update(string lastname, string firstname, int age, int stnum, string streetname, string town, string zip);\n            static void cmd_view(string lastname, string firstname, int age, int stnum, string streetname, string town, string zip, float amtdonated);\n\n        private:\n\n    };\n    #endif\n</code></pre>\n\n<p>makefile</p>\n\n<pre><code>    ##\n    Specifiy the target\n    all: Voter\n\n    # Specify the object files that the target depends on# Also specify the object files needed to create the executable\n    Voter: Voter.o VoterDB.o\n            g++Voter.o VoterDB.o - o Voter.exe\n\n    # Specify how the object files should be created from source files\n    VoterDB.o: VoterDB.cpp\n            g++ - c VoterDB.cpp\n\n    Voter.o: Voter.cpp\n            g++ - c Voter.cpp\n\n    # Specify the object files and executables that are generated# and need to be removed to re - compile the whole thing\n    clean:\n            rm - f * .o Voter.exe\n</code></pre>\n\n<p>My issue is that whenever I attempt to compile this i get the error </p>\n\n<pre><code>    $ make\n    g++ -c Voter.cpp\n    Voter.cpp: In function \u2018int main(int, char**)\u2019:\n    Voter.cpp:28:66: error: \u2018cmd_new\u2019 was not declared in this scope\n        cmd_new(lastname,firstname,age,stnum,street,town,zip,amtdonated);\n                                                                       ^\n    Voter.cpp:30:61: error: \u2018cmd_update\u2019 was not declared in this scope\n        cmd_update(lastname, firstname, age, stnum,street,town,zip);\n                                                                  ^\n    Voter.cpp:32:67: error: \u2018cmd_view\u2019 was not declared in this scope\n        cmd_view(lastname,firstname,age,stnum,street,town,zip,amtdonated)\n                                                                        ^\n    makefile:15: recipe for target 'Voter.o' failed\n    make: *** [Voter.o] Error 1\n</code></pre>\n\n<p>I have tried different combinations of declaring the different cmd_* functions as static, and as VoterDB::cmd_* but none of these have fixed the issue so far.</p>\n\n<p>edit: i changed the function calls to VoterDB::cmd_* and switched the functions from static void to void. but I now get an error message </p>\n\n<pre><code>    Voter.cpp:32:76: error: cannot call member function \u2018void VoterDB::cmd_view(std::__cxx11::string, std::__cxx11::string, int, int, std::__cxx11::string, std::__cxx11::string, std::__cxx11::string, float)\u2019 without object\n    VoterDB::cmd_view(lastname,firstname,age,stnum,street,town,zip,amtdonated)\n</code></pre>\n"}, {"tags": ["c++", "arrays", "c++11", "dimension"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 5, "creation_date": 1537370721, "post_id": 52409278, "comment_id": 91762317, "body": "Most compilers accept some non-conforming code by default (that&#39;s called <i>extensions</i>). If you use GCC or Clang, add <code>-std=c++?? -pedantic-errors</code> flags to disable that behaviour. (Replace <code>??</code> with language version: <code>17</code>, <code>14</code>, <code>11</code>, ...)"}, {"owner": {"reputation": 144, "user_id": 9153443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a851333a9ec10d92ea818d7514a0735b?s=128&d=identicon&r=PG&f=1", "display_name": "RSSB", "link": "https://stackoverflow.com/users/9153443/rssb"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1537370795, "post_id": 52409278, "comment_id": 91762366, "body": "I am following the gnu gcc compiler in codeblocks"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1537370809, "post_id": 52409278, "comment_id": 91762377, "body": "See the edited comment then."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1537370847, "post_id": 52409278, "comment_id": 91762394, "body": "My wish is that gcc or whatever compiler you&#39;re using would turn this option <b>off</b> by default.  Then less questions like this (and less posts with this code code) would occur."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1537370925, "post_id": 52409278, "comment_id": 91762444, "body": "Also, <code>constexpr int a = bufsize;</code> doesn&#39;t work because you can&#39;t initialize a <code>constexpr</code> variable with non-<code>constexpr</code> expression. Try <code>constexpr int a = 10;</code> instead."}, {"owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1537370995, "post_id": 52409278, "comment_id": 91762481, "body": "@PaulMcKenzie An understandable wish, but then gcc would fail to compile <i>lots</i> of existing software packages that use those extensions (without build modifications to re-enable the extensions). Balancing compatibility with strict standard compliance is a delicate art..."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 0, "creation_date": 1537371089, "post_id": 52409278, "comment_id": 91762539, "body": "@TypeIA how about a compromise and issue a warning by default (which is after all mandatory for standard compliance)?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1537371190, "post_id": 52409278, "comment_id": 91762603, "body": "Yes, but I put most of the blame on <code>gcc</code> for this.  We now have coding websites where they show samples of supposed C++ code that uses these extensions.  Then either the newbie C++ programmer believes the code they&#39;re writing is valid, or worse, the newbie C++ programmer takes their code to Visual Studio, and are stumped why their code doesn&#39;t compile.  Then we get the plethora of questions asked here on why the code doesn&#39;t compile on Visual Studio.  The gcc engineers should have seen this, and just put a cutoff date on the extension being &quot;on&quot; by default."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1537371192, "post_id": 52409278, "comment_id": 91762607, "body": "@user2079303 You would not expect a warning when using a documented extension. As long as the default mode is GnuC++, we are stuck."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1537371297, "post_id": 52409278, "comment_id": 91762663, "body": "@BaummitAugen my non-explicit suggestion is to use a standard compliant mode by default (allow extensions but warn), and require an option to explicitly enable GNU extensions."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1537371424, "post_id": 52409278, "comment_id": 91762737, "body": "@user2079303 Ah ok. I misunderstood."}], "owner": {"reputation": 144, "user_id": 9153443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a851333a9ec10d92ea818d7514a0735b?s=128&d=identicon&r=PG&f=1", "display_name": "RSSB", "link": "https://stackoverflow.com/users/9153443/rssb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 1, "closed_date": 1537370821, "answer_count": 0, "score": 2, "last_activity_date": 1537370651, "creation_date": 1537370568, "last_edit_date": 1537370651, "question_id": 52409278, "link": "https://stackoverflow.com/questions/52409278/array-dimension-in-c-11", "closed_reason": "Duplicate", "title": "Array dimension in c++ 11", "body": "<p>I have studied in C++ Primer that the dimension of an array should be a const expression but the following code compiles and gives the desired result. Why?</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nint main()\n{\nunsigned int bufsize = 10;\nint h[bufsize]={};\nfor(int i=0; i&lt;=9; i++)\n    cout&lt;&lt;h[i]&lt;&lt;endl;\n}\n</code></pre>\n\n<p>But if I add the following:</p>\n\n<pre><code>constexpr int a = bufsize;\n</code></pre>\n\n<p>Then the compiler shows error meaning that bufsize is not a constant expression then why is the program compiling correctly otherwise if the dimension of the array should be constant expression</p>\n"}, {"tags": ["c++", "oop"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1537370204, "post_id": 52409156, "comment_id": 91761986, "body": "It means <code>creature</code> must have at least one virtual function. It should be at least destructor in your case."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 4, "creation_date": 1537370212, "post_id": 52409156, "comment_id": 91761994, "body": "please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. You say <code>dragon</code> inherits from <code>creature</code> ? code or it didnt happen :P"}, {"owner": {"reputation": 3, "user_id": 9544747, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "abdo okasha", "link": "https://stackoverflow.com/users/9544747/abdo-okasha"}, "edited": false, "score": 0, "creation_date": 1537371720, "post_id": 52409156, "comment_id": 91762908, "body": "it works after I make the virtual function"}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1537370347, "post_id": 52409204, "comment_id": 91762072, "body": "Please flag/vote to close obvious duplicates."}, {"owner": {"reputation": 3, "user_id": 9544747, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "abdo okasha", "link": "https://stackoverflow.com/users/9544747/abdo-okasha"}, "edited": false, "score": 0, "creation_date": 1537371676, "post_id": 52409204, "comment_id": 91762891, "body": "thx bro it works now"}], "tags": [], "owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "is_accepted": false, "score": 1, "last_activity_date": 1537370280, "creation_date": 1537370280, "answer_id": 52409204, "question_id": 52409156, "link": "https://stackoverflow.com/questions/52409156/dynamic-cast-from-father-to-child/52409204#52409204", "title": "dynamic cast from father to child", "body": "<p><code>dynamic_cast</code> generally <a href=\"http://eel.is/c++draft/expr.dynamic.cast#6\" rel=\"nofollow noreferrer\">requires polymorphic types</a>. That means the types involved must have at least one virtual member function (can be a destructor).</p>\n"}], "owner": {"reputation": 3, "user_id": 9544747, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "abdo okasha", "link": "https://stackoverflow.com/users/9544747/abdo-okasha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1537370313, "answer_count": 1, "score": 0, "last_activity_date": 1537370327, "creation_date": 1537370123, "question_id": 52409156, "link": "https://stackoverflow.com/questions/52409156/dynamic-cast-from-father-to-child", "closed_reason": "Duplicate", "title": "dynamic cast from father to child", "body": "<p>I have created three classes (creature , dragon , wizard) dragon and wizard inherit from the creature class when I do a dynamic cast like this </p>\n\n<pre><code>void dragon::atk(creature *creat){\nif(dynamic_cast&lt;dragon*&gt;(creat))\n    //\n</code></pre>\n\n<p>cannot dynamic_cast 'creat' (of type 'class creature*') to type 'class dragon*' (source type is not polymorphic)|</p>\n\n<p>I've searched a lot but don't know why this error occur </p>\n"}, {"tags": ["c++", "include", "static-methods"], "comments": [{"owner": {"reputation": 25, "user_id": 9635013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74c90912e3eddd38fe58d591b96446bf?s=128&d=identicon&r=PG&f=1", "display_name": "danfper", "link": "https://stackoverflow.com/users/9635013/danfper"}, "edited": false, "score": 0, "creation_date": 1537369692, "post_id": 52408962, "comment_id": 91761636, "body": "error: expected constructor, destructor, or type conversion before \u2018(\u2019 token  A::myMethod(4,5);"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1537369708, "post_id": 52408962, "comment_id": 91761649, "body": "you want something to be printed on the screen when a header is included?!?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1537369934, "post_id": 52408962, "comment_id": 91761806, "body": "can you please explain what you actually want to achieve by doing that? What you want to do isnt possible exactly like you wrote it, but there might be a different way to get what you want. See also <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">what is the xy problem</a>"}, {"owner": {"reputation": 25, "user_id": 9635013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74c90912e3eddd38fe58d591b96446bf?s=128&d=identicon&r=PG&f=1", "display_name": "danfper", "link": "https://stackoverflow.com/users/9635013/danfper"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1537371586, "post_id": 52408962, "comment_id": 91762828, "body": "Thanks @user463035818 for the remark, I just added an edit to the original answer"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1537372401, "post_id": 52408962, "comment_id": 91763300, "body": "You cannot execute code outside of a function or a member-function or a global/static initialization. If you want to add a &quot;new child&quot; you need to call it explicity or create an instance of an object that has a method to add that child."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 9635013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74c90912e3eddd38fe58d591b96446bf?s=128&d=identicon&r=PG&f=1", "display_name": "danfper", "link": "https://stackoverflow.com/users/9635013/danfper"}, "edited": false, "score": 1, "creation_date": 1537373633, "post_id": 52410001, "comment_id": 91763998, "body": "This solved my problem! Thank you very much I spent days on this!"}], "tags": [], "owner": {"reputation": 3805, "user_id": 4165552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18b32c5e142791fca01cbf252f663ac?s=128&d=identicon&r=PG&f=1", "display_name": "pptaszni", "link": "https://stackoverflow.com/users/4165552/pptaszni"}, "is_accepted": true, "score": 0, "last_activity_date": 1537373545, "last_edit_date": 1537373545, "creation_date": 1537372933, "answer_id": 52410001, "question_id": 52408962, "link": "https://stackoverflow.com/questions/52408962/call-static-method-from-a-header-inside-another-header/52410001#52410001", "title": "Call static method from a header inside another header", "body": "<p>No, you cannot call the static C++ method when you include the header (your question is ill-formed), simply because <code>#include</code> statement is processed by C preprocessor, before the actual executable is created. What you can do is to force a call to some static methods before entering the main function by creating <code>static const</code> initializers:</p>\n\n<pre><code>//  some header with BaseClass\nclass BaseClass {\n\n};\n\n//  A.hpp\nclass A\n{\npublic:\n    static bool addNewChild(const std::string&amp; name, std::shared_ptr&lt;BaseClass&gt; input_ptr) {\n        myHashMap.insert({name, input_ptr});\n    }\n    static size_t getSize() {\n        return myHashMap.size();\n    }\n    /* other stuff */\nprivate: \n    static std::unordered_map&lt; std::string, std::shared_ptr&lt;BaseClass&gt; &gt; myHashMap;\n};\n\n// A.cpp\n\nstd::unordered_map&lt; std::string, std::shared_ptr&lt;BaseClass&gt; &gt; A::myHashMap;\n\n//  B.hpp\n\nstruct BInitializer {\n    BInitializer();\n};\n\nclass B: public BaseClass\n{\nprivate:\n    static const BInitializer initializer_;\n};\n\n// B.cpp\n\nBInitializer::BInitializer() {\n    std::cout &lt;&lt; \"BInitializer\" &lt;&lt; std::endl;\n    A::addNewChild(\"Child_B\", std::make_shared&lt;B&gt;());\n}\n\nconst BInitializer B::initializer_ = BInitializer();\n\n// some test written with googletest\nTEST(xxx, yyy) {\n    std::cout &lt;&lt; \"main start\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"map size: \" &lt;&lt; A::getSize() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I used the gtest framework to demonstrate that <code>BInitializer</code> constructor is called before environment setup. Possible output:</p>\n\n<pre><code>BInitializer\nNote: Google Test filter = xxx.yyy\n[==========] Running 1 test from 1 test case.\n[----------] Global test environment set-up.\n[----------] 1 test from xxx\n[ RUN      ] xxx.yyy\nmain start\nmap size: 1\n[       OK ] xxx.yyy (0 ms)\n[----------] 1 test from xxx (0 ms total)\n\n[----------] Global test environment tear-down\n[==========] 1 test from 1 test case ran. (0 ms total)\n[  PASSED  ] 1 test.\n</code></pre>\n\n<p>If you do like this, every executable linked against <code>B.cpp</code> (you need to include <code>B.hpp</code> as well of course) will call the constructor of <code>BInitializer</code> before entering the <code>main</code> function.</p>\n\n<p>It is kind of hacky solution, but I hope it serves your purpose. If you can avoid using it, I recommend you not to use it.</p>\n"}], "owner": {"reputation": 25, "user_id": 9635013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74c90912e3eddd38fe58d591b96446bf?s=128&d=identicon&r=PG&f=1", "display_name": "danfper", "link": "https://stackoverflow.com/users/9635013/danfper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 52410001, "answer_count": 1, "score": 1, "last_activity_date": 1537373545, "creation_date": 1537369563, "last_edit_date": 1537372508, "question_id": 52408962, "link": "https://stackoverflow.com/questions/52408962/call-static-method-from-a-header-inside-another-header", "title": "Call static method from a header inside another header", "body": "<p>I was wondering if there is a way in C++ to call a static method from a class when including the header from another class?\nMy implementation is more complex than the example below but I hope this can explain it better:</p>\n\n<h3><code>A.h</code>:</h3>\n\n<pre><code>class A\n{\npublic:\n    static void myMethod(int a, int b){std::cout &lt;&lt; a+b &lt;&lt; std::endl;}\n    /* other stuff */\n}\n</code></pre>\n\n<h3><code>B.h</code>:</h3>\n\n<pre><code>#include \"A.h\"\nclass B\n{\n    /* class definition  */\n}\nA::myMethod(4,5);\n</code></pre>\n\n<p>So that in <code>main</code>, when I include <code>B.h</code>, the method from class <code>A</code> is called: </p>\n\n<h3><code>main.cpp</code>:</h3>\n\n<pre><code>#include \"B.h\"\nint main(void)\n{\n    /* value \"4+5\" should already be in console output */\n    /* do other stuff */\n}\n</code></pre>\n\n<p>Thanks a lot in advance!</p>\n\n<p>In order to avoid the xy-problem, here is a more detailed explanation: \nI'm developing a library which has one base class and many child classes derived from this. \nThis child classes get mapped with a string as key and a <code>std::shared_ptr&lt;BaseClass&gt;()</code> as values.</p>\n\n<p>Now I have the situation that the user should be able to define its own child-classes (as headers) but not change the source code of the library. \nSo when the user creates a new .h file and it gets included, I'm trying to add the new child-class to the <code>unordered_map&lt;string, child-class&gt;</code> directly when including the child-class header.</p>\n\n<h3><code>A.h</code>:</h3>\n\n<pre><code>class A\n{\npublic:\n    static bool addNewChild(const std::string name, std::shared_ptr&lt;BaseClass&gt; input_ptr);\n    /* other stuff */\nprivate: \n    static std::unordered_map&lt; std::string, std::shared_ptr&lt;BaseClass&gt; &gt; myHashMap;\n}\n/*initialize pointer with library child-classes */\nstd::unordered_map&lt; std::string, std::shared_ptr&lt;BaseClass&gt;&gt; A::myHashMap\n({\n    {child_1, std::make_shared&lt;ChildClass_1&gt;()},\n    {child_2, std::make_shared&lt;ChildClass_2&gt;()},\n    /*...*/\n})\n\nbool A::addNewChild(const std::string name, std::shared_ptr&lt;BaseClass&gt; input_ptr)\n{\n    /* check if name already in map */\n    /* ... */\n    /* perform mapping */\n    myHashMap[name] = input_ptr\n};\n</code></pre>\n\n<h3><code>B.h</code>:</h3>\n\n<pre><code>#include \"A.h\"\nclass B\n{\n    /* class definition  */\n}\nA::addNewChild(\"Child_B\", std::make_shared&lt;B&gt;());\n</code></pre>\n\n<p>So that in <code>main</code>, when I include <code>B.h</code>, the method from class <code>A</code> is called: </p>\n\n<h3><code>main.cpp</code>:</h3>\n\n<pre><code>#include \"B.h\"\nint main(void)\n{\n    /* at this point, child class B should have already be added to myHashMap */ \n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "templates"], "comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1537370164, "post_id": 52408932, "comment_id": 91761961, "body": "Would the type of <code>BarManager</code> and <code>Bar</code> requested by the <code>Foo</code> objects be consistent? Or does <code>Foo</code> need a <code>BarManager</code> that is unspecified at construction?"}, {"owner": {"reputation": 933, "user_id": 724157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/U92M5.jpg?s=128&g=1", "display_name": "Jim Clay", "link": "https://stackoverflow.com/users/724157/jim-clay"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1537370369, "post_id": 52408932, "comment_id": 91762090, "body": "@JonathanMee They are all templated consistently- i.e. <code>Foo&lt;T&gt;</code> would use <code>BarManager&lt;T&gt;</code> and <code>Bar&lt;T&gt;</code>."}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 2, "creation_date": 1537371320, "post_id": 52408932, "comment_id": 91762675, "body": "What exactly speaks against injection of the BarManager? From an organic point of view, I see it somewhat like a librarian. He manages the books and you can ask him to give you access to one of the books based on criteria you give him. However, there can be several librarians in the world (thus not a global variable or singleton), so you need to have the address to the library (injected as a pointer to BarManager)."}, {"owner": {"reputation": 933, "user_id": 724157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/U92M5.jpg?s=128&g=1", "display_name": "Jim Clay", "link": "https://stackoverflow.com/users/724157/jim-clay"}, "reply_to_user": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 0, "creation_date": 1537371788, "post_id": 52408932, "comment_id": 91762952, "body": "@Aziuth I don&#39;t know what you mean by &quot;injection of the BarManager&quot;.  And it seems like having multiple BarManagers with a singleton &quot;library&quot; still has the same problem- how do I do the templated library?"}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 0, "creation_date": 1537441567, "post_id": 52408932, "comment_id": 91790215, "body": "What I meant was that you simple pass down (&quot;inject&quot;) a pointer or reference of BarManager to any place where Foo needs it. Like your main creating an instance of BarManager and the constructor of Foo gets a pointer to it. Simple as that."}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1537370818, "creation_date": 1537370818, "answer_id": 52409363, "question_id": 52408932, "link": "https://stackoverflow.com/questions/52408932/shared-subservient-object/52409363#52409363", "title": "Shared subservient object", "body": "<p>There are two alternatives on how to refer to <code>BarManager</code>:</p>\n\n<ol>\n<li>Have it as a global object / global pointer to a local object in <code>main()</code> / singleton / monostate. The advantage is easy access to it.</li>\n<li>Pass a pointer/reference to an instance of <code>BarManager</code> explicitly. The advantage is that you can have many <code>BarManager</code> objects. The disadvantage is having to pass the extra parameter to calls, especially if the call chains are deep and/or having to store a reference/pointer to it as a member variable.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 933, "user_id": 724157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/U92M5.jpg?s=128&g=1", "display_name": "Jim Clay", "link": "https://stackoverflow.com/users/724157/jim-clay"}, "edited": false, "score": 0, "creation_date": 1537373609, "post_id": 52409920, "comment_id": 91763976, "body": "I agree that that is workable, but I would prefer a solution where the details are completely hidden from the user of Foo.  Is there such a solution?"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1537374816, "post_id": 52409920, "comment_id": 91764664, "body": "If you structure object lifetimes hierarchically (which you should), there won&#39;t be any need for <code>shared_ptr</code>. I would say that most of the time <code>shared_ptr</code> leads to poor designs."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1537377470, "post_id": 52409920, "comment_id": 91765877, "body": "@MaximEgorushkin While your suggestion is good, after consideration, I realized that the hierarchical solution leaves <code>Bar</code>s and <code>BarManager</code>s around after the destruction of <code>Foo</code> object, which I didn&#39;t like. Knowing a little more about the usage may help me to decide how this could be handled... Though perhaps you have some suggestions of how we could ensure <code>Bar</code> and <code>BarManager</code> cleanup while structuring according to &quot;object lifetime hierarchy&quot;?"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 933, "user_id": 724157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/U92M5.jpg?s=128&g=1", "display_name": "Jim Clay", "link": "https://stackoverflow.com/users/724157/jim-clay"}, "edited": false, "score": 0, "creation_date": 1537377561, "post_id": 52409920, "comment_id": 91765927, "body": "@JimClay Sadly your class <code>Foo</code> is a template class, thus anything pertaining to <code>T</code> will have to be exposed in the header :("}], "tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 0, "last_activity_date": 1537372665, "creation_date": 1537372665, "answer_id": 52409920, "question_id": 52408932, "link": "https://stackoverflow.com/questions/52408932/shared-subservient-object/52409920#52409920", "title": "Shared subservient object", "body": "<p>So you'd need whatever was responsible for constructing <code>Foo</code>s to first have constructed all <code>BarManager</code>s and then pass them into the <code>Foo</code> on construction. Since I don't really know the specifics I'll have to leave that to you, but given a simple: <code>template&lt;typename T&gt; struct Bar { using value_type = T; const T _val; };</code> your <code>BarManager</code> skeleton could look like this:</p>\n\n<pre><code>template&lt;typename T&gt;\nclass BarManager {\n    vector&lt;shared_ptr&lt;Bar&lt;T&gt;&gt;&gt; _bars;\npublic:\n    using value_type = T;\n    size_t size() { size(_bars); }\n    shared_ptr&lt;Bar&lt;T&gt;&gt;&amp; get_bar(const T target) {\n        const auto it = find_if(begin(_bars), end(_bars), [&amp;](const shared_ptr&lt;Bar&lt;T&gt;&gt;&amp; i) { return i-&gt;_val == target; });\n\n        if(it == end(_bars)) {\n            _bars.push_back(make_shared&lt;Bar&lt;T&gt;&gt;(target));\n            return _bars.back();\n        } else {\n            return *it;\n        }\n    }\n};\n</code></pre>\n\n<p>From there your <code>Foo</code> can look like this:</p>\n\n<pre><code>template&lt;typename T&gt;\nclass Foo {\n    shared_ptr&lt;BarManager&lt;T&gt;&gt; _my_manager;\n    shared_ptr&lt;Bar&lt;T&gt;&gt; _my_bar;\npublic:\n    using value_type = T;\n    Foo(shared_ptr&lt;BarManager&lt;T&gt;&gt;&amp; my_manager) : _my_manager(my_manager) {}\n    void request_bar(const T&amp; target) { _my_bar = _my_manager-&gt;get_bar(target); }\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 933, "user_id": 724157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/U92M5.jpg?s=128&g=1", "display_name": "Jim Clay", "link": "https://stackoverflow.com/users/724157/jim-clay"}, "edited": false, "score": 0, "creation_date": 1537376286, "post_id": 52410738, "comment_id": 91765335, "body": "Clever use of static!  I like it."}, {"owner": {"reputation": 933, "user_id": 724157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/U92M5.jpg?s=128&g=1", "display_name": "Jim Clay", "link": "https://stackoverflow.com/users/724157/jim-clay"}, "edited": false, "score": 0, "creation_date": 1537376525, "post_id": 52410738, "comment_id": 91765450, "body": "One question- could I do this without the base class and the inheritance?  If the inheritance is to hide BarManager I don&#39;t need to go that far, I just didn&#39;t want the user to have to instantiate BarManager themself and pass in the reference to Foo."}, {"owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "reply_to_user": {"reputation": 933, "user_id": 724157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/U92M5.jpg?s=128&g=1", "display_name": "Jim Clay", "link": "https://stackoverflow.com/users/724157/jim-clay"}, "edited": false, "score": 0, "creation_date": 1537376862, "post_id": 52410738, "comment_id": 91765607, "body": "Answer is a direct yes and I&#39;ll edit accordingly. Just wasn&#39;t sure how far you wanted to go for hiding this detail."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 933, "user_id": 724157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/U92M5.jpg?s=128&g=1", "display_name": "Jim Clay", "link": "https://stackoverflow.com/users/724157/jim-clay"}, "edited": false, "score": 0, "creation_date": 1537377158, "post_id": 52410738, "comment_id": 91765738, "body": "@JimClay The problem with those function scope static singletons is that you cannot pass parameters to its constructor. Also, there is en extra atomic variable check when accessing it, which may be extremely cheap, but it is not free. Thirdly, you don&#39;t know exactly when it is going to destroy."}, {"owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 1, "creation_date": 1537377490, "post_id": 52410738, "comment_id": 91765886, "body": "@MaximEgorushkin The first problem is solved easily by having it stored as a static member of the class itself (<code>unique_ptr</code> could be an option) and having it initialized explicitly, parameters passed freely, at a certain early enough point in the pipeline. If the second problem is an issue for the OP then he should have specified this pretty extreme performance consideration."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 1, "creation_date": 1537378618, "post_id": 52410738, "comment_id": 91766453, "body": "I also got a downvote for another perfectly viable solution :/ Though in the end I do like yours better with the <code>static BarManager</code> so I&#39;ve graced it with an upvote. It&#39;s just really easy to use. Though depending upon the weight of <code>Bar</code> (or even worse the potential of multiple <code>Bar</code>s that I assumed) the <code>static</code> may not be the most ideal solution? Either way this really clever +1"}, {"owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "reply_to_user": {"reputation": 933, "user_id": 724157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/U92M5.jpg?s=128&g=1", "display_name": "Jim Clay", "link": "https://stackoverflow.com/users/724157/jim-clay"}, "edited": false, "score": 0, "creation_date": 1537386563, "post_id": 52410738, "comment_id": 91770208, "body": "@JimClay Perhaps it would be wise to edit the question to add that you didn&#39;t want the user of <code>Foo</code> to have to instantiate BarManager themself/pass in the reference? Otherwise people will keep asking themselves why not pass it..."}], "tags": [], "owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "is_accepted": true, "score": 3, "last_activity_date": 1537380410, "last_edit_date": 1537380410, "creation_date": 1537375844, "answer_id": 52410738, "question_id": 52408932, "link": "https://stackoverflow.com/questions/52408932/shared-subservient-object/52410738#52410738", "title": "Shared subservient object", "body": "<p>If you:</p>\n\n<ol>\n<li>Know concrete type of <code>BarManager</code> in compile time.</li>\n<li>Don't want any user of Foo knowing about this internal mechanism.</li>\n</ol>\n\n<p>Then you can have all <code>Foo</code> classes holds this <code>BarManager</code> as a <code>static</code> (definitely not a global var)</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Bar{};\n\ntemplate &lt;typename T&gt;\nclass BarManager;\n\ntemplate &lt;typename T&gt;\nclass Foo\n{\nprivate:\n    static BarManager&lt;T&gt;&amp; GetBarManager()\n    {\n        static BarManager&lt;T&gt; managerInstance;\n        return managerInstance;\n    }\n\npublic:\n    void barMethod()\n    {\n        auto&amp; bar = GetBarManager().GetBarInstance();\n\n        // Do something with `bar`\n    }\n};\n\ntemplate &lt;typename T&gt;\nclass BarManager\n{\npublic:\n    Bar&lt;T&gt;&amp; GetBarInstance()\n    {\n        // Replace with cacher implementation:\n        static Bar&lt;T&gt; dud;\n        return dud; \n    }\n};\n\nint main()\n{\n    Foo&lt;int&gt; foo;\n    foo.barMethod();\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 933, "user_id": 724157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/U92M5.jpg?s=128&g=1", "display_name": "Jim Clay", "link": "https://stackoverflow.com/users/724157/jim-clay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 52410738, "answer_count": 3, "score": 3, "last_activity_date": 1537386907, "creation_date": 1537369496, "last_edit_date": 1537386907, "question_id": 52408932, "link": "https://stackoverflow.com/questions/52408932/shared-subservient-object", "title": "Shared subservient object", "body": "<p>I have a template class <code>Foo</code> that has a method, <code>barMethod</code>, that requires a <code>Bar</code> object.  I could have each individual <code>Foo</code> object create <code>Bar</code> objects as needed, but I don't want to do that because it will be slow, and  there is a good chance that different <code>Foo</code> objects could use the same <code>Bar</code> object.</p>\n\n<p>Given that, I would like to have a <code>BarManager</code> object that has the existing set of <code>Bar</code> objects.  The <code>Foo</code> objects could then ask it for <code>Bar</code> objects, and if an appropriate one already exists, the manager would simply return it.  If it doesn't the manager would create a new one and return it.</p>\n\n<p>It seems to me that there are two problems with implementing the \"manager\" approach.</p>\n\n<ol>\n<li>The manager would have to be a global variable, which I would prefer not to do.</li>\n<li><code>BarManager</code> and <code>Bar</code> are both template classes, so even if I were to make the manager a global variable/object, I'm not sure how that would work.  I guess I could make the global variable a void * and cast it whenever it is de-referenced to the appropriate templated class, but that seems really ugly.</li>\n</ol>\n\n<p>There has to be a way to do this that isn't so ugly (perhaps using an <code>auto</code> pointer?).  What is it?</p>\n\n<p>EDIT: This software is part of a library that I (and perhaps others) will use later, which is why the classes are templated and the template type is not known <i>a priori</i>.  Also, I want to keep things as simple as possible for the user of <code>Foo</code>, so I do not want the caller to have to do anything with <code>BarManager</code> or <code>Bar</code> (e.g. instantiating <code>BarManager</code> and giving the reference to each <code>Foo</code>).</p>\n"}, {"tags": ["c++", "command-line", "thread-sleep"], "answers": [{"comments": [{"owner": {"reputation": 6267, "user_id": 1913744, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5bAQS.jpg?s=128&g=1", "display_name": "Bercovici Adrian", "link": "https://stackoverflow.com/users/1913744/bercovici-adrian"}, "edited": false, "score": 0, "creation_date": 1537369806, "post_id": 52408988, "comment_id": 91761713, "body": "But i have used <code>std::endl</code> is it not the same thing?"}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "reply_to_user": {"reputation": 6267, "user_id": 1913744, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5bAQS.jpg?s=128&g=1", "display_name": "Bercovici Adrian", "link": "https://stackoverflow.com/users/1913744/bercovici-adrian"}, "edited": false, "score": 0, "creation_date": 1537369900, "post_id": 52408988, "comment_id": 91761790, "body": "But you haven&#39;t used <code>std::endl</code> for the output within the <code>while</code> loop."}], "tags": [], "owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1537369623, "creation_date": 1537369623, "answer_id": 52408988, "question_id": 52408898, "link": "https://stackoverflow.com/questions/52408898/thread-sleep-does-not-continue-execution-after-timeout/52408988#52408988", "title": "Thread sleep does not continue execution after timeout", "body": "<p>Output to <code>std::cout</code> is, generally speaking, line buffered meaning nothing will appear at the console until either a newline is written or the buffered data reaches a certain size.  Try...</p>\n\n<pre><code>std::cout &lt;&lt; \"Iterations: \"&lt;&lt; i &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>Or, force a flush with...</p>\n\n<pre><code>std::cout &lt;&lt; \"Iterations: \"&lt;&lt; i &lt;&lt; std::flush;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 4, "last_activity_date": 1537369650, "creation_date": 1537369650, "answer_id": 52408999, "question_id": 52408898, "link": "https://stackoverflow.com/questions/52408898/thread-sleep-does-not-continue-execution-after-timeout/52408999#52408999", "title": "Thread sleep does not continue execution after timeout", "body": "<p>Many output operations are buffered.  That is they will wait to actually write to the string until they fill up the buffer.  This means that there can be a delay between when you tell it o print and when it actually does.</p>\n\n<p>To fix this you can use the <code>flush</code> stream manipulator to force the contents to be written.  That would make your code look like</p>\n\n<pre><code>while(true){\n    std::cout&lt;&lt;\"Iterations:\"&lt;&lt;i &lt;&lt; std::flush;\n    std::this_thread::sleep_for (std::chrono::seconds(1));\n    if(i++&gt;10000) i=0;\n}\n</code></pre>\n\n<p>If your stream is line buffered then you could also just print a newline like</p>\n\n<pre><code>while(true){\n    std::cout&lt;&lt;\"Iterations:\"&lt;&lt;i &lt;&lt; \"\\n\";\n    std::this_thread::sleep_for (std::chrono::seconds(1));\n    if(i++&gt;10000) i=0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "is_accepted": false, "score": 2, "last_activity_date": 1537369811, "creation_date": 1537369811, "answer_id": 52409044, "question_id": 52408898, "link": "https://stackoverflow.com/questions/52408898/thread-sleep-does-not-continue-execution-after-timeout/52409044#52409044", "title": "Thread sleep does not continue execution after timeout", "body": "<p><code>std::cout</code> is a buffered stream. That means whatever you write to that stream first goes into an internal buffer. That buffer is only emptied out (\"flushed\") when the runtime/system decides to do so. This is done mainly for performance reasons. It allows the runtime/system to not do tons of tiny I/O operations all the time, which would incur quite some overhead, but wait until enough output has accumulated so that expensive I/O can be done in larger batches.</p>\n\n<p>You can call the <code>flush()</code> method to explicitly force the stream to be flushed or \"output\" <code>std::flush</code> to the stream:</p>\n\n<pre><code>std::cout &lt;&lt; \"bla\" &lt;&lt; std::flush\n</code></pre>\n\n<p>If you want to flush after each line, use <code>std::endl</code>, which outputs a newline character and also flushes.</p>\n"}], "owner": {"reputation": 6267, "user_id": 1913744, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5bAQS.jpg?s=128&g=1", "display_name": "Bercovici Adrian", "link": "https://stackoverflow.com/users/1913744/bercovici-adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 52408999, "answer_count": 3, "score": 1, "last_activity_date": 1537369811, "creation_date": 1537369367, "question_id": 52408898, "link": "https://stackoverflow.com/questions/52408898/thread-sleep-does-not-continue-execution-after-timeout", "title": "Thread sleep does not continue execution after timeout", "body": "<p>Why does thread block?</p>\n\n<p>Hello i am trying to pause a thread for a given number of seconds.I am running the program from the command line.\nThe program enters the \"sleep\" but does not print anything , until i press <code>CTRL+C</code> at which point it prints everything it had to print in bulk.Why does it work in the background ?Why does it not print to the console after each <code>sleep_for</code>?</p>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include&lt;iostream&gt;\n\n#include&lt;chrono&gt;\n\n#include&lt;thread&gt;\n\n#include&lt;string&gt;\n\n#include &lt;unistd.h&gt;\n\nint main(int argc,char *argv[])\n{\n\n    std::cout&lt;&lt;\"Started daemon...\"&lt;&lt;std::endl;\n\n    std::string hostString(argv[1]);\n    std::cout&lt;&lt;\"HostName:\"&lt;&lt;hostString&lt;&lt;std::endl;\n        std::cout&lt;&lt;\"Port:\"&lt;&lt;atoi(argv[2]);\n    int i=0;\n\n    while(true){\n        std::cout&lt;&lt;\"Iterations:\"&lt;&lt;i;\n        std::this_thread::sleep_for (std::chrono::seconds(1));\n    if(i++&gt;10000) i=0;\n\n    }\n\n    return 0; \n\n}\n</code></pre>\n"}, {"tags": ["c++", "list", "double", "readfile", "getline"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1537369400, "post_id": 52408847, "comment_id": 91761445, "body": "Why not read in all the data into a <code>std::vector</code> and then pass the vector around?  Disks are slow so if you are treating the file as an array you&#39;ll spend a lot of time waiting for the drive."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 2, "creation_date": 1537369439, "post_id": 52408847, "comment_id": 91761465, "body": "If performance is such an issue shouldn&#39;t you store your doubles as binary? There would be no need for an index then, you could just jump to the correct offset."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1537369455, "post_id": 52408847, "comment_id": 91761475, "body": "Opening, closing, and reopening the file again is going to be slow. Do it once, read all data you need, and then don&#39;t touch the file again."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1537369558, "post_id": 52408847, "comment_id": 91761542, "body": "And please don&#39;t use type-aliases for primitive types, like <code>Doub</code> for <code>double</code>. That actually makes the code harder to read, understand and maintain."}, {"owner": {"reputation": 11, "user_id": 8643398, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1lytAbflMlw/AAAAAAAAAAI/AAAAAAAAAAA/X9oZScPfdU8/photo.jpg?sz=128", "display_name": "Chico", "link": "https://stackoverflow.com/users/8643398/chico"}, "edited": false, "score": 0, "creation_date": 1537370476, "post_id": 52408847, "comment_id": 91762162, "body": "Ok, I have thought about that. But then, I have the problem of the passing the vector as function. What seems to be hard on c++. Maybe I am wrong."}, {"owner": {"reputation": 11, "user_id": 8643398, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1lytAbflMlw/AAAAAAAAAAI/AAAAAAAAAAA/X9oZScPfdU8/photo.jpg?sz=128", "display_name": "Chico", "link": "https://stackoverflow.com/users/8643398/chico"}, "edited": false, "score": 0, "creation_date": 1537370539, "post_id": 52408847, "comment_id": 91762199, "body": "I have to access thoses values a lot of times as arguments of other functions, if I can have they stored as a vector fixed structure it would be a nice solution."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1537371630, "post_id": 52408847, "comment_id": 91762856, "body": "If you want higher performance, read the file, verbatim, into a buffer then extract the data out of the buffer."}, {"owner": {"reputation": 11, "user_id": 8643398, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1lytAbflMlw/AAAAAAAAAAI/AAAAAAAAAAA/X9oZScPfdU8/photo.jpg?sz=128", "display_name": "Chico", "link": "https://stackoverflow.com/users/8643398/chico"}, "edited": false, "score": 0, "creation_date": 1537372950, "post_id": 52408847, "comment_id": 91763608, "body": "Any sugestion on the specifics of doing that? I have to pass the arrays to classes/structures to access them from the different functions before I go into the main part of the file. How can that be done efficiently?"}], "owner": {"reputation": 11, "user_id": 8643398, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1lytAbflMlw/AAAAAAAAAAI/AAAAAAAAAAA/X9oZScPfdU8/photo.jpg?sz=128", "display_name": "Chico", "link": "https://stackoverflow.com/users/8643398/chico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1537369234, "creation_date": 1537369234, "question_id": 52408847, "link": "https://stackoverflow.com/questions/52408847/ways-to-read-one-indexed-line-from-a-list-of-doubles-on-a-txt-file-with-c", "title": "Ways to read one indexed line from a list of doubles on a .txt file with c++", "body": "<p>I have been experimenting different ways to write and read double numbers from a list of files. I've discovered that for extremely big data c++ has dificulties doing that, but my files have maximum 1000000 numbers and I always know the size of the list (how many numbers in it). I want to access this list from a program as they were elements of an array in a fast way. Until now, I haven't got the improvement I would expect in time performance. </p>\n\n<p>My last version is something like this, a function that reads some number from the file:</p>\n\n<pre><code>Doub tret_1(int i){ \nDoub d;\nstd::ifstream read(\"tret1.txt\");\nstd:: string sLine;\nint line_no = 0;\n\n\nwhile (line_no != i+1 &amp;&amp; getline(read, sLine)) {\n++line_no;\n}\n\nstd::string my_string = sLine; // string\nstd::istringstream iss(my_string);\n\nif (line_no == i+1) {\niss &gt;&gt; d;\n} else {\ncout &lt;&lt; \"error\" &lt;&lt; '\\n';\n}\nread.close();\n\nreturn d;\n}\n</code></pre>\n\n<p>The numbers on the file are something like this: 1.216176826351508e+01. It does the job, but if I have 6 functions like that, that are called 100000 times by other functions it ends up taking more time/power then I have access.\nSo, my question is, what are the best ways to do that? To read an indexed value from a list file (that does not have to be a .txt) of doubles. </p>\n"}, {"tags": ["c++", "openmp", "shared-memory", "race-condition"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1537369240, "post_id": 52408813, "comment_id": 91761326, "body": "Please post code as text, not images."}, {"owner": {"reputation": 318, "user_id": 5746969, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/45b6c134f6dc38664f7894e9ee055de8?s=128&d=identicon&r=PG&f=1", "display_name": "seb007", "link": "https://stackoverflow.com/users/5746969/seb007"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1537369511, "post_id": 52408813, "comment_id": 91761503, "body": "This is Intel Inspector output, with graphical information such as thread number and location. As I specifically question Intel Inspector output, I thought it would be more appropriate."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1537372006, "post_id": 52408813, "comment_id": 91763071, "body": "basically no - but you could have undefined behavior anywhere in the code suddenly anything is possible. Try reproducing the Intel Inspector output with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Then we can properly discuss it here."}, {"owner": {"reputation": 318, "user_id": 5746969, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/45b6c134f6dc38664f7894e9ee055de8?s=128&d=identicon&r=PG&f=1", "display_name": "seb007", "link": "https://stackoverflow.com/users/5746969/seb007"}, "edited": false, "score": 0, "creation_date": 1537427412, "post_id": 52408813, "comment_id": 91782090, "body": "Thanks Zulan, this answers my question. Then false positive OR undefined behavior due to a bug somewhere in my code. Unfortunately, this is a big code and I was not able to reproduce it in a minimal example, so I guess there should be something wrong somewhere in my code."}], "owner": {"reputation": 318, "user_id": 5746969, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/45b6c134f6dc38664f7894e9ee055de8?s=128&d=identicon&r=PG&f=1", "display_name": "seb007", "link": "https://stackoverflow.com/users/5746969/seb007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1537427793, "creation_date": 1537369120, "last_edit_date": 1537427793, "question_id": 52408813, "link": "https://stackoverflow.com/questions/52408813/openmp-race-condition-within-single-region-between-barriers", "title": "OpenMP: Race condition within single region between barriers", "body": "<p>Consider the following code extract, part of a larger code:</p>\n\n<pre><code>201     for (int iMesh = _meshByThread[iThread][0]; iMesh &lt;= _meshByThread[iThread][1]; iMesh++){\n202         _eq[iMesh]-&gt;updateDataPreBC(*_sol[iMesh], t);\n203     }\n204 #pragma omp barrier\n205 #pragma omp single\n206     {\n207         for (size_t iBC = 0; iBC &lt; _bndConditions.size(); iBC++)\n208             _bndConditions[iBC]-&gt;apply(_sol, t);\n209     }\n</code></pre>\n\n<p>Intel Inspector reports a data race, with the following output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/VFsLD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VFsLD.png\" alt=\"Intel Inspector Output\"></a></p>\n\n<p>You may want a complete example, but I do not think that it is needed given my simple question:</p>\n\n<p>As there is an explicit barrier before the single region and an implicit barrier at the end of the single region, if a thread is inside the single region, all the other threads should be between these two barriers, right?</p>\n\n<p>In other words, is it possible that one thread is on line 208 (inside the single region), while the other thread is on line 202 (outside of the single region) as Intel Inspector says? If not, it is a false positive (or undefined behavior to fix, occurring somewhere else in the code).</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 1, "last_activity_date": 1537369064, "creation_date": 1537369064, "answer_id": 52408792, "question_id": 52408507, "link": "https://stackoverflow.com/questions/52408507/what-is-the-actual-effect-of-variable-bitmask-in-the-function-ceillog2/52408792#52408792", "title": "What is the actual effect of variable BitMask in the function CeilLog2?", "body": "<blockquote>\n  <p>Since the left hand side of operator <code>&gt;&gt;</code> is signed number, the result of <code>&gt;&gt; 32</code> would be <code>1111,1111,....,1111,1111</code>. When <code>Val</code> is not equal to 0, the <code>BitMask</code> would always be <code>0000,0000,....,0000,0000</code>.</p>\n</blockquote>\n\n<p>Your analysis is absolutely correct: <code>BitMask</code> is either all ones when <code>Val</code> is non-zero; otherwise it is all zeros. You can eliminate <code>BitMask</code> with a simple conditional:</p>\n\n<pre><code>return Val ? (32 - CountLeadingZeros(Val - 1)) : 0;\n</code></pre>\n\n<p>This does not create new branching, because the conditional replaces the <code>if</code> of <code>CountLeadingZeros</code>.</p>\n\n<blockquote>\n  <p>But the question is that when I pass an -1 to this function, it would be cast to 4294967295, result in the output become 32.</p>\n</blockquote>\n\n<p>Function takes an unsigned number, so you should pass 0xFFFFFFFF, not -1 (representation of negatives is implementation-defined). In this case the return value should be 32, the correct value of log<sub>2</sub> ceiling for this value.</p>\n"}], "owner": {"reputation": 35, "user_id": 8076334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rjS7y.jpg?s=128&g=1", "display_name": "BlauHimmel", "link": "https://stackoverflow.com/users/8076334/blauhimmel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 52408792, "answer_count": 1, "score": 1, "last_activity_date": 1537369064, "creation_date": 1537368149, "question_id": 52408507, "link": "https://stackoverflow.com/questions/52408507/what-is-the-actual-effect-of-variable-bitmask-in-the-function-ceillog2", "title": "What is the actual effect of variable BitMask in the function CeilLog2?", "body": "<p>Here is the definition of the function:</p>\n\n<pre><code>inline uint32_t CountLeadingZeros(uint32_t Val)\n{\n    // Use BSR to return the log2 of the integer\n    unsigned long Log2;\n    if (_BitScanReverse(&amp;Log2, Val) != 0)\n    {\n        return 31 - Log2;\n    }\n    return 32;\n}\n\ninline uint32_t CeilLog2(uint32_t Val)\n{\n    int BitMask = ((int)(CountLeadingZeros(Val) &lt;&lt; 26)) &gt;&gt; 31;\n    return (32 - CountLeadingZeros(Val - 1)) &amp; (~BitMask);\n}\n</code></pre>\n\n<p>Here is my hypothesis:</p>\n\n<p>The range of the return value of the function CountLeadingZeros is [0, 32]. When the input Val is equal to 0, CountLeadingZeros(Val) &lt;&lt; 26 should be 1000,0000,....,0000,0000. </p>\n\n<p>Since the left hand side of operator >> is signed number, the result of >> 32 would be 1111,1111,....,1111,1111. When Val is not equal to 0, the BitMask would always be 0000,0000,....,0000,0000.</p>\n\n<p>So I guess that the utility of variable BitMask is to let the function return 0 when the input Val is zero.</p>\n\n<p>But the question is that when I pass an -1 to this function, it would be cast to 4294967295, result in the output become 32.</p>\n\n<p>Is my hypothesis right? </p>\n\n<p>I have seen this implementation many times in the RayTracing renderer on the github.</p>\n\n<p>What is actual effect of BitMask here? Confused :(</p>\n"}, {"tags": ["c++", "c++11", "iterator"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537367746, "post_id": 52408348, "comment_id": 91760415, "body": "Not unless the container has a known end-of-container value like a null terminator in a c string."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1537367770, "post_id": 52408348, "comment_id": 91760426, "body": "Ever wonder why you always see these things in pairs ?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1537367771, "post_id": 52408348, "comment_id": 91760427, "body": "No there&#39;s no such possibility using standard iterators. That&#39;s why all standard functions takes two iterators to define the range. Which of course also allows you to use a sub-range of the full container."}, {"owner": {"reputation": 882, "user_id": 3097454, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/2V4D2.jpg?s=128&g=1", "display_name": "Nick Gallimore", "link": "https://stackoverflow.com/users/3097454/nick-gallimore"}, "edited": false, "score": 0, "creation_date": 1537367831, "post_id": 52408348, "comment_id": 91760460, "body": "Thanks. I didn&#39;t realize there was supposed to be a global vector in the file. I guess I&#39;ll keep the question listed here anyways"}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 3, "last_activity_date": 1537368149, "last_edit_date": 1537368149, "creation_date": 1537367819, "answer_id": 52408394, "question_id": 52408348, "link": "https://stackoverflow.com/questions/52408348/find-end-of-iterator-without-access-to-vector/52408394#52408394", "title": "Find end of iterator without access to vector", "body": "<p>You can't.  This is like getting a pointer to an array without getting its size.  Unless there is a sentinel element (like a null character in a c-string) there is no way to know where the container stops.</p>\n\n<p>You need to either take a reference to the vector so you can iterate it or have a end iterator passed to the function as well so you have a bound for the loop.</p>\n"}], "owner": {"reputation": 882, "user_id": 3097454, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/2V4D2.jpg?s=128&g=1", "display_name": "Nick Gallimore", "link": "https://stackoverflow.com/users/3097454/nick-gallimore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 52408394, "answer_count": 1, "score": 2, "last_activity_date": 1537368149, "creation_date": 1537367678, "question_id": 52408348, "link": "https://stackoverflow.com/questions/52408348/find-end-of-iterator-without-access-to-vector", "title": "Find end of iterator without access to vector", "body": "<p>Without having access to the vector, is there a way to determine if the iterator is reaching the end of the vector by using just the iterator?</p>\n\n<p>For example with the following function how do I loop through iter:</p>\n\n<pre><code>list&lt;int&gt;::iterator foo(vector&lt;list&lt;int&gt;&gt;::iterator iter, int value)\n{\n\n\n}\n</code></pre>\n"}, {"tags": ["c++", "linux", "opengl", "glfw", "glew"], "comments": [{"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1537370359, "post_id": 52408231, "comment_id": 91762083, "body": "Which Linux? Do you have another card (likely Intel) in your hardware? Does <i>bumblebee</i> helps you?"}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1537374470, "post_id": 52408231, "comment_id": 91764465, "body": "Major props for the revision-1 <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "is_accepted": true, "score": 3, "last_activity_date": 1537370461, "last_edit_date": 1537370461, "creation_date": 1537370369, "answer_id": 52409227, "question_id": 52408231, "link": "https://stackoverflow.com/questions/52408231/black-screen-on-linux-but-not-on-windows/52409227#52409227", "title": "Black screen on Linux but not on Windows", "body": "<p>Core contexts require a <a href=\"https://www.khronos.org/opengl/wiki/Vertex_Specification#Vertex_Array_Object\" rel=\"nofollow noreferrer\">Vertex Array Object (VAO)</a> to be bound before rendering anything.</p>\n\n<p>You can create a VAO at the beginning of your program and leave it bound if you don't want to get fancy:</p>\n\n<pre><code>GLuint vao = 0;\nglCreateVertexArrays( 1, &amp;vao );\nglBindVertexArray( vao );\n...\nglDrawArrays(GL_TRIANGLES, 0, 3);\n</code></pre>\n\n<p>All together:</p>\n\n<pre><code>#include &lt;GL/glew.h&gt;\n#include &lt;GLFW/glfw3.h&gt;\n\n#include &lt;iostream&gt;\n\nstatic unsigned int CompileShader(unsigned int type, const std::string &amp;source) {\n    unsigned int id = glCreateShader(type);\n    const char *src = source.c_str();\n    glShaderSource(id, 1, &amp;src, nullptr);\n    glCompileShader(id);\n\n    int result;\n    glGetShaderiv(id, GL_COMPILE_STATUS, &amp;result);\n    if (result == GL_FALSE) {\n        int length;\n        glGetShaderiv(id, GL_INFO_LOG_LENGTH, &amp;length);\n        char *message = (char*)alloca(length * sizeof(char));\n        glGetShaderInfoLog(id, length, &amp;length, message);\n        std::cout &lt;&lt; \"Failed to compile \" &lt;&lt; (type == GL_VERTEX_SHADER ? \"vertex\" : \"fragment\") &lt;&lt; \"shader\" &lt;&lt; std::endl;\n        std::cout &lt;&lt; message &lt;&lt; std::endl;\n        glDeleteShader(id);\n        return 0;\n    }\n\n    return id;\n}\n\nstatic unsigned int CreateShader(const std::string &amp;vertexShader, const std::string &amp;fragmentShader) {\n    unsigned int program = glCreateProgram();\n    unsigned int vs = CompileShader(GL_VERTEX_SHADER, vertexShader);\n    unsigned int fs = CompileShader(GL_FRAGMENT_SHADER, fragmentShader);\n\n    glAttachShader(program, vs);\n    glAttachShader(program, fs);\n    glLinkProgram(program);\n    glValidateProgram(program);\n\n    glDeleteShader(vs);\n    glDeleteShader(fs);\n\n    return program;\n}\n\nint main(void)\n{\n    GLFWwindow *window;\n\n    /* Initialize the library */\n    if (!glfwInit()) {\n        std::cout &lt;&lt; \"Error initialising glfw3!\" &lt;&lt; std::endl;\n        return -1;\n    }\n\n    glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 3);\n    glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 3);\n    glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);\n\n    window = glfwCreateWindow(640, 480, \"Hello World\", NULL, NULL);\n    if (!window)\n    {\n        std::cout &lt;&lt; \"Error initialising a window!\" &lt;&lt; std::endl;\n        glfwTerminate();\n        return -1;\n    }\n\n    glfwMakeContextCurrent(window);\n\n    if (glewInit() != GLEW_OK) {\n        std::cout &lt;&lt; \"Error initialising GLEW!\" &lt;&lt; std::endl;\n        return -1;\n    }\n\n    std::cout &lt;&lt; glGetString(GL_VERSION) &lt;&lt; std::endl;\n\n    float positions[6] = {\n        -0.5f, -0.5f,\n         0.0f,  0.5f,\n         0.5f, -0.5f\n    };\n\n    GLuint vao = 0;\n    glCreateVertexArrays( 1, &amp;vao );\n    glBindVertexArray( vao );\n\n    unsigned int buffer;\n    glGenBuffers(1, &amp;buffer);\n    glBindBuffer(GL_ARRAY_BUFFER, buffer);\n    glBufferData(GL_ARRAY_BUFFER, 6 * sizeof(float), positions, GL_STATIC_DRAW);\n    glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 2 * sizeof(float), 0);\n    glEnableVertexAttribArray(0);\n\n    std::string vertexShader =\n        \"#version 330 core\\n\"\n        \"\\n\"\n        \"layout(location = 0) in vec4 position;\\n\"\n        \"\\n\"\n        \"void main()\\n\"\n        \"{\\n\"\n        \"   gl_Position = position;\\n\"\n        \"}\\n\";\n\n    std::string fragmentShader =\n        \"#version 330 core\\n\"\n        \"\\n\"\n        \"layout(location = 0) out vec4 color;\\n\"\n        \"\\n\"\n        \"void main()\\n\"\n        \"{\\n\"\n        \"   color = vec4(1.0, 0.0, 0.0, 1.0);\\n\"\n        \"}\\n\";\n\n    unsigned int shader = CreateShader(vertexShader, fragmentShader);\n    glUseProgram(shader);\n\n    /* Loop until the user closes the window */\n    while (!glfwWindowShouldClose(window))\n    {\n        glClear(GL_COLOR_BUFFER_BIT);\n\n        glDrawArrays(GL_TRIANGLES, 0, 3);\n\n        glfwSwapBuffers(window);\n\n        glfwPollEvents();\n    }\n\n    glDeleteProgram(shader);\n    glfwTerminate();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 64, "user_id": 7793603, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/fn3dn.jpg?s=128&g=1", "display_name": "Venoox", "link": "https://stackoverflow.com/users/7793603/venoox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 52409227, "answer_count": 1, "score": 1, "last_activity_date": 1602843248, "creation_date": 1537367317, "last_edit_date": 1602843248, "question_id": 52408231, "link": "https://stackoverflow.com/questions/52408231/black-screen-on-linux-but-not-on-windows", "title": "Black screen on Linux but not on Windows", "body": "<p>I've written a program in C++ using OpenGL (GLEW and GLFW libary) that renders a red triangle to the window.\nI tested it on Windows 10 but when I tried on Linux (Ubuntu), it opens a window with just black and no triangle. During compile/link stage, I didn't get any errors. I'm using NVIDIA's proprietary drivers. What could be the problem?</p>\n<p>This is my code:</p>\n<pre><code>#include &lt;GL/glew.h&gt;\n#include &lt;GLFW/glfw3.h&gt;\n \n#include &lt;iostream&gt;\n \nstatic unsigned int CompileShader(unsigned int type, const std::string &amp;source) {\n    unsigned int id = glCreateShader(type);\n    const char *src = source.c_str();\n    glShaderSource(id, 1, &amp;src, nullptr);\n    glCompileShader(id);\n \n    int result;\n    glGetShaderiv(id, GL_COMPILE_STATUS, &amp;result);\n    if (result == GL_FALSE) {\n        int length;\n        glGetShaderiv(id, GL_INFO_LOG_LENGTH, &amp;length);\n        char *message = (char*)alloca(length * sizeof(char));\n        glGetShaderInfoLog(id, length, &amp;length, message);\n        std::cout &lt;&lt; &quot;Failed to compile &quot; &lt;&lt; (type == GL_VERTEX_SHADER ? &quot;vertex&quot; : &quot;fragment&quot;) &lt;&lt; &quot;shader&quot; &lt;&lt; std::endl;\n        std::cout &lt;&lt; message &lt;&lt; std::endl;\n        glDeleteShader(id);\n        return 0;\n    }\n \n    return id;\n}\n \nstatic unsigned int CreateShader(const std::string &amp;vertexShader, const std::string &amp;fragmentShader) {\n    unsigned int program = glCreateProgram();\n    unsigned int vs = CompileShader(GL_VERTEX_SHADER, vertexShader);\n    unsigned int fs = CompileShader(GL_FRAGMENT_SHADER, fragmentShader);\n \n    glAttachShader(program, vs);\n    glAttachShader(program, fs);\n    glLinkProgram(program);\n    glValidateProgram(program);\n \n    glDeleteShader(vs);\n    glDeleteShader(fs);\n \n    return program;\n}\n \nint main(void)\n{\n    GLFWwindow *window;\n \n    /* Initialize the library */\n    if (!glfwInit()) {\n        std::cout &lt;&lt; &quot;Error initialising glfw3!&quot; &lt;&lt; std::endl;\n        return -1;\n    }\n \n    glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 3);\n    glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 3);\n    glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);\n \n    window = glfwCreateWindow(640, 480, &quot;Hello World&quot;, NULL, NULL);\n    if (!window)\n    {\n        std::cout &lt;&lt; &quot;Error initialising a window!&quot; &lt;&lt; std::endl;\n        glfwTerminate();\n        return -1;\n    }\n \n    glfwMakeContextCurrent(window);\n \n    if (glewInit() != GLEW_OK) {\n        std::cout &lt;&lt; &quot;Error initialising GLEW!&quot; &lt;&lt; std::endl;\n        return -1;\n    }\n \n    std::cout &lt;&lt; glGetString(GL_VERSION) &lt;&lt; std::endl;\n \n    float positions[6] = {\n        -0.5f, -0.5f,\n         0.0f,  0.5f,\n         0.5f, -0.5f\n    };\n \n    unsigned int buffer;\n    glGenBuffers(1, &amp;buffer);\n    glBindBuffer(GL_ARRAY_BUFFER, buffer);\n    glBufferData(GL_ARRAY_BUFFER, 6 * sizeof(float), positions, GL_STATIC_DRAW);\n    glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 2 * sizeof(float), 0);\n    glEnableVertexAttribArray(0);\n \n    std::string vertexShader =\n        &quot;#version 330 core\\n&quot;\n        &quot;\\n&quot;\n        &quot;layout(location = 0) in vec4 position;\\n&quot;\n        &quot;\\n&quot;\n        &quot;void main()\\n&quot;\n        &quot;{\\n&quot;\n        &quot;   gl_Position = position;\\n&quot;\n        &quot;}\\n&quot;;\n \n    std::string fragmentShader =\n        &quot;#version 330 core\\n&quot;\n        &quot;\\n&quot;\n        &quot;layout(location = 0) out vec4 color;\\n&quot;\n        &quot;\\n&quot;\n        &quot;void main()\\n&quot;\n        &quot;{\\n&quot;\n        &quot;   color = vec4(1.0, 0.0, 0.0, 1.0);\\n&quot;\n        &quot;}\\n&quot;;\n \n    unsigned int shader = CreateShader(vertexShader, fragmentShader);\n    glUseProgram(shader);\n \n    /* Loop until the user closes the window */\n    while (!glfwWindowShouldClose(window))\n    {\n        glClear(GL_COLOR_BUFFER_BIT);\n \n        glDrawArrays(GL_TRIANGLES, 0, 3);\n \n        glfwSwapBuffers(window);\n \n        glfwPollEvents();\n    }\n \n    glDeleteProgram(shader);\n    glfwTerminate();\n    return 0;\n}\n</code></pre>\n<p>Compile code:</p>\n<pre><code>g++ -std=c++17 main.cpp -Wall  -lGL -lGLU -lGLEW -lglfw3 -lX11 -lXxf86vm -lXrandr -lpthread -lXi -ldl -lXinerama -lXcursor -o main\n</code></pre>\n"}, {"tags": ["c++", "qt", "qt5"], "comments": [{"owner": {"reputation": 3713, "user_id": 855844, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9x4Iu.jpg?s=128&g=1", "display_name": "Stefano", "link": "https://stackoverflow.com/users/855844/stefano"}, "edited": false, "score": 0, "creation_date": 1537368620, "post_id": 52408161, "comment_id": 91760927, "body": "I think you can have a look at the following answer: <a href=\"https://stackoverflow.com/a/177557/855844\">stackoverflow.com/a/177557/855844</a>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1537368890, "post_id": 52408161, "comment_id": 91761108, "body": "add &quot;main.moc&quot; on first code and run qmake."}], "owner": {"reputation": 9, "user_id": 10385879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb7198c9f5d91b96883108c5ddc4282?s=128&d=identicon&r=PG&f=1", "display_name": "C Younger Brother", "link": "https://stackoverflow.com/users/10385879/c-younger-brother"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "closed_date": 1537368950, "answer_count": 0, "score": 0, "last_activity_date": 1537367130, "creation_date": 1537367096, "last_edit_date": 1537367130, "question_id": 52408161, "link": "https://stackoverflow.com/questions/52408161/why-the-class-in-cpp-file-didnt-generate-moc-file", "closed_reason": "Duplicate", "title": "Why the class in .cpp file didn&#39;t generate moc file", "body": "<p>I have a question for you that I put a define of the class in .cpp file. When I want to create an object and start compling. The compiler prompts an error, as shown below:\n<img src=\"https://i.stack.imgur.com/BWh7q.png\" alt=\"enter image description here\"></p>\n\n<p>The following code:</p>\n\n<pre><code>#include &lt;QApplication&gt;\n#include &lt;QObject&gt;\n\nclass MyObject:public QObject{\n    Q_OBJECT\npublic:\n    MyObject(QObject *parent=0):QObject(0){}\n\n};\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n\n    MyObject *myObject=new MyObject;\n\n    return a.exec();\n}\n</code></pre>\n\n<p>and didn't generate moc file. However, the define of the class in .h file. It's well be fine\nThe following code:\nobject.h</p>\n\n<pre><code>#ifndef OBJECT_H\n#define OBJECT_H\n\n#include &lt;QObject&gt;\n\nclass MyObject:public QObject{\n    Q_OBJECT\npublic:\n    MyObject(QObject *parent=0):QObject(0){}\n\n};\n\n\n#endif // OBJECT_H\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;QApplication&gt;\n#include &lt;QObject&gt;\n#include \"object.h\"\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n\n    MyObject *myObject=new MyObject;\n\n    return a.exec();\n}\n</code></pre>\n\n<p>The question is why the class in .cpp file didn't generate moc file??????\nThanks for your reading.</p>\n"}, {"tags": ["c++", "generalization"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 6, "creation_date": 1537366797, "post_id": 52408035, "comment_id": 91759772, "body": "Sounds like you could use a <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>.  This is not proper syntax for C++."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1537366798, "post_id": 52408035, "comment_id": 91759774, "body": "One cannot have array of references."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1537366824, "post_id": 52408035, "comment_id": 91759791, "body": "<code>std::vector</code>, <code>std::array</code> might help."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1537366874, "post_id": 52408035, "comment_id": 91759831, "body": "If you are trying to take an array by reference, see <a href=\"https://stackoverflow.com/questions/10007986/c-pass-an-array-by-reference\">this question</a>."}, {"owner": {"reputation": 37, "user_id": 7971490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd6eaa96312b6ec2cf425d78db901081?s=128&d=identicon&r=PG&f=1", "display_name": "alroithmhelp", "link": "https://stackoverflow.com/users/7971490/alroithmhelp"}, "edited": false, "score": 0, "creation_date": 1537366963, "post_id": 52408035, "comment_id": 91759883, "body": "Wow I can&#39;t belive I had wrong syntax, and I see the now , so you cant pass arrays by reference?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1537367014, "post_id": 52408035, "comment_id": 91759920, "body": "To quote a wise master: You must unlearn what you have learned. Learning a new language usually requires you to basically start from scratch, there&#39;s seldom much you can bring with you from your old language (even if some syntax is still similar, there might be semantic differences)."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1537367111, "post_id": 52408035, "comment_id": 91760010, "body": "@alroithmhelp You can but you should probably be using a <code>std::vector</code> instead of arrays to make life easy."}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 0, "creation_date": 1537367112, "post_id": 52408035, "comment_id": 91760011, "body": "You can degenerate arrays into pointers and use pointer arithmetics, but the better solution here is to use a container class, like those that Jarod42 mentioned."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1537367291, "post_id": 52408035, "comment_id": 91760123, "body": "Oh and you <i>can</i> pass a reference to an array, but it&#39;s seldom really needed. For completeness: <code>Book (&amp;books)[MAX_ARRAY_SIZE]</code>."}], "owner": {"reputation": 37, "user_id": 7971490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd6eaa96312b6ec2cf425d78db901081?s=128&d=identicon&r=PG&f=1", "display_name": "alroithmhelp", "link": "https://stackoverflow.com/users/7971490/alroithmhelp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1537366728, "creation_date": 1537366728, "question_id": 52408035, "link": "https://stackoverflow.com/questions/52408035/i-dont-understand-this-error-when-passing-paramters-by-reference", "title": "I don&#39;t understand this error when passing paramters by reference", "body": "<p>I'm trying to run this program in another file(main.cc) but I get an error on this class, where this is the error.</p>\n\n<p><strong>ERROR</strong></p>\n\n<pre><code>./Library.h:15:24: error: expected ')'\n    Library(Book[] &amp;book, int &amp;currentNumOfBooks);\n                   ^\n./Library.h:15:16: note: to match this '('\n        Library(Book[] &amp;book, int &amp;currentNumOfBooks);\n               ^\n</code></pre>\n\n<p><strong>CODE SOURCE:</strong></p>\n\n<pre><code>class Library{\n\npublic:\n\n    Book booksLibrary[MAX_ARR_SIZE];\n    int currentNumOfBooksLibrary;\n    Library();\n    Library(Book[] &amp;book, int &amp;currentNumOfBooks);\n    void addBook(Book &amp;book);\n    void print();\nprivate:\n}:\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 1794, "user_id": 5657229, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4ef6009bedf09c1d9e1bc9aebee04f9c?s=128&d=identicon&r=PG&f=1", "display_name": "Sid Go", "link": "https://stackoverflow.com/users/5657229/sid-go"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537366113, "post_id": 52407805, "comment_id": 91759307, "body": "@Fran&#231;oisAndrieux QSqlQueryModel courses;"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537366150, "post_id": 52407805, "comment_id": 91759327, "body": "Please show the complete error message. It would be helpful to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1537366171, "post_id": 52407805, "comment_id": 91759343, "body": "<code>this-&gt;courses = *(dbHelper-&gt;getCourses()); </code> and <code>QSqlQueryModel* q = dbHelper-&gt;getCourses(); this-&gt;courses = *q;</code> should be doing the exact same thing.  Can we get a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1537366184, "post_id": 52407805, "comment_id": 91759352, "body": "&quot;Of course I can do this instead:&quot; no you cannot for the same reason"}, {"owner": {"reputation": 1794, "user_id": 5657229, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4ef6009bedf09c1d9e1bc9aebee04f9c?s=128&d=identicon&r=PG&f=1", "display_name": "Sid Go", "link": "https://stackoverflow.com/users/5657229/sid-go"}, "edited": false, "score": 0, "creation_date": 1537366500, "post_id": 52407805, "comment_id": 91759564, "body": "Oh. Just verified it with VS and it turned out I really can&#39;t. My mind really just got messed up in studying pointers and references the entire afternoon. Thank you very much."}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537366367, "post_id": 52407899, "comment_id": 91759477, "body": "The question states that <code>this-&gt;courses = *q;</code> works."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1537366387, "post_id": 52407899, "comment_id": 91759490, "body": "@Fran&#231;oisAndrieux: Which, with respect to the OP, is a figment of their imagination. (And the OP has just confirmed that in a comment.)"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1537366545, "post_id": 52407899, "comment_id": 91759598, "body": "Then the question should be closed for not being reproducible."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537366603, "post_id": 52407899, "comment_id": 91759653, "body": "@Fran&#231;oisAndrieux: This is one of those instances where if the question were perfect then the answer would already be known to the OP. It&#39;s not the crux of the question, and can stay open in my opinion."}, {"owner": {"reputation": 1794, "user_id": 5657229, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4ef6009bedf09c1d9e1bc9aebee04f9c?s=128&d=identicon&r=PG&f=1", "display_name": "Sid Go", "link": "https://stackoverflow.com/users/5657229/sid-go"}, "edited": false, "score": 0, "creation_date": 1537367235, "post_id": 52407899, "comment_id": 91760095, "body": "@Bathsheba. Thanks. But may I ask how did you know that? That is, how do I know if instances of a class cannot be copied? Are there keywords involved or is it found only in the docs (I read it but found nothing)? Thanks again."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 1794, "user_id": 5657229, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4ef6009bedf09c1d9e1bc9aebee04f9c?s=128&d=identicon&r=PG&f=1", "display_name": "Sid Go", "link": "https://stackoverflow.com/users/5657229/sid-go"}, "edited": false, "score": 1, "creation_date": 1537367517, "post_id": 52407899, "comment_id": 91760265, "body": "@SidGo: If you want to &quot;go to source&quot;, you could search for something like <code>QSqlQueryModel operator=(const QSqlQueryModel&amp;)  = delete;</code>. That is the canonical way of deleting the assignment operator. C++11 onwards. And the compiler error you cite spells it out nicely. You&#39;ll find that the copy constructor is deleted too. We call this the &quot;noncopyable idiom&quot;, and we used to achieve it by making the methods <code>private</code>, and not supplying an implementation."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1537367912, "post_id": 52407899, "comment_id": 91760500, "body": "That&#39;s what VS means when it says &quot;it is a deleted function&quot;"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 5, "last_activity_date": 1537366306, "creation_date": 1537366306, "answer_id": 52407899, "question_id": 52407805, "link": "https://stackoverflow.com/questions/52407805/how-do-i-dereference-the-return-value-of-a-function-returning-a-pointer-without/52407899#52407899", "title": "How do I dereference the return value of a function returning a pointer without using a temporary variable?", "body": "<p>The authors of the <code>QSqlQueryModel</code> class are being cute and are cleverly forbidding the copying of instances of that object.</p>\n\n<p>The class member should be a pointer type:</p>\n\n<pre><code>QSqlQueryModel* courses;\n</code></pre>\n\n<p>as the documentation states that you don't own the memory associated with the pointer. Then you set trivially</p>\n\n<pre><code>this-&gt;courses = dbHelper-&gt;getCourses(); \n</code></pre>\n"}], "owner": {"reputation": 1794, "user_id": 5657229, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4ef6009bedf09c1d9e1bc9aebee04f9c?s=128&d=identicon&r=PG&f=1", "display_name": "Sid Go", "link": "https://stackoverflow.com/users/5657229/sid-go"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 885, "favorite_count": 0, "accepted_answer_id": 52407899, "answer_count": 1, "score": 2, "last_activity_date": 1537366645, "creation_date": 1537365982, "last_edit_date": 1537366645, "question_id": 52407805, "link": "https://stackoverflow.com/questions/52407805/how-do-i-dereference-the-return-value-of-a-function-returning-a-pointer-without", "title": "How do I dereference the return value of a function returning a pointer without using a temporary variable?", "body": "<p>C++ noob here. </p>\n\n<p>So, this is a member function of my <code>class DbHelper</code>:</p>\n\n<pre><code>QSqlQueryModel* getCourses();\n</code></pre>\n\n<p>Now, whenever I do this in <code>class MyModel</code> where <code>QSqlQueryModel courses</code> is a member:</p>\n\n<pre><code>this-&gt;courses = *(dbHelper-&gt;getCourses()); // problem here ... this is inside a member function of MyModel\n</code></pre>\n\n<p>Visual Studio says that </p>\n\n<blockquote>\n  <p>function ... operator= cannot be referenced ... it is a deleted\n  function</p>\n</blockquote>\n\n<p>Of course I can do this instead:</p>\n\n<pre><code>QSqlQueryModel* q = dbHelper-&gt;getCourses();\nthis-&gt;courses = *q;\n</code></pre>\n\n<p>But I'm thinking that declaring another variable just to dereference it is possibly redundant. So is there a shorter way?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Just verified it with VS and it turned out I really can't. My mind really just got messed up in studying pointers and references the entire afternoon. Thanks people.</p>\n"}, {"tags": ["c++", "garrys-mod"], "comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1537365655, "post_id": 52407502, "comment_id": 91759012, "body": "It really depends on how the game gets input.   A fair few games use some low-level mechanism (e.g. a &quot;hardware one&quot; to use your words) to grab input, to improve responsiveness or some other characteristic.   If a game installs a dedicated kernel mode driver, for example, the means of interacting with that driver will be whatever the game developer chose it to be - that is just one tactic to make it harder for people to cheat in the game.   Without knowing how your particular game grabs keystrokes, nobody can help you."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1537366912, "post_id": 52407502, "comment_id": 91759846, "body": "Please edit post to define <code>INPUT</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1537366928, "post_id": 52407502, "comment_id": 91759859, "body": "Why do you have an array of 1 element?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1537367004, "post_id": 52407502, "comment_id": 91759905, "body": "You should call <code>check_mouse()</code> once before the <code>if</code> statements.  There is a possibility that each call could return a different value."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1537367084, "post_id": 52407502, "comment_id": 91759988, "body": "You may want to prefer using a <code>switch</code> statement in the <code>while</code> instead of <code>if</code>.  Or replace the <code>if</code>s with an <code>std::map</code>, since you are associating a letter with key up and key down values."}, {"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1537369353, "post_id": 52407502, "comment_id": 91761402, "body": "@ThomasMatthews INPUT should be <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/winuser/ns-winuser-taginput\" rel=\"nofollow noreferrer\">this one</a>"}, {"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1537369783, "post_id": 52407502, "comment_id": 91761699, "body": "See also <a href=\"https://stackoverflow.com/questions/18647053/sendinput-not-equal-to-pressing-key-manually-on-keyboard-in-c\">this question</a>"}], "owner": {"reputation": 15, "user_id": 9664991, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jP8r_FxEaSk/AAAAAAAAAAI/AAAAAAAAAcM/U12Cnj6H5Jo/photo.jpg?sz=128", "display_name": "Lucas Knook", "link": "https://stackoverflow.com/users/9664991/lucas-knook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1537365082, "creation_date": 1537365082, "question_id": 52407502, "link": "https://stackoverflow.com/questions/52407502/how-to-make-virtual-input-hardware-input", "title": "How to make virtual input hardware input?", "body": "<p>I wanted to make a strafe bot for garry's mod, and I came up with this:</p>\n\n<pre><code>#define WIN32_LEAN_AND_MEAN\n#define _WIN32_WINNT 0x0500\n#include &lt;windows.h&gt;\n#include \"stdafx.h\"\n\nclass KeyBot\n{\nprivate:\n    INPUT _buffer[1];\n\npublic:\n    KeyBot();\n    void KeyUp(char key);\n    void KeyDown(char key);\n    void KeyClick(char key);\n};\n\nKeyBot::KeyBot()\n{\n    _buffer-&gt;type = INPUT_KEYBOARD;\n    _buffer-&gt;ki.wScan = 0;\n    _buffer-&gt;ki.time = 0;\n    _buffer-&gt;ki.dwExtraInfo = 0;\n}\n\nvoid KeyBot::KeyUp(char key)\n{\n    _buffer-&gt;ki.wVk = key;\n    _buffer-&gt;ki.dwFlags = KEYEVENTF_KEYUP;\n    SendInput(1, _buffer, sizeof(INPUT));\n}\n\nvoid KeyBot::KeyDown(char key)\n{\n    _buffer-&gt;ki.wVk = key;\n    _buffer-&gt;ki.dwFlags = 0;\n    SendInput(1, _buffer, sizeof(INPUT));\n}\n\nvoid KeyBot::KeyClick(char key)\n{\n    KeyDown(key);\n    Sleep(10);\n    KeyUp(key);\n}\n\nchar check_mouse(POINT xOne, POINT xTwo)\n{\n    GetCursorPos(&amp;xOne);\n    Sleep(1);\n    GetCursorPos(&amp;xTwo);\n    if ((xTwo.x - xOne.x) &gt; 0) {\n        return 'D';\n    }\n    else {\n        if ((xTwo.x - xOne.x) &lt; 0) {\n            return 'A';\n        }\n        else {\n            if ((xTwo.x - xOne.x) == 0) {\n                return 'N';\n            }\n        }\n    }\n}\n\nint main()\n{\n    KeyBot bot;\n    POINT xOne;\n    POINT xTwo;\n\n    while (1) {\n        if (check_mouse(xOne, xTwo) == 'A') {\n            bot.KeyUp(0x44);\n            bot.KeyDown(0x41);\n        }\n        if (check_mouse(xOne, xTwo) == 'D') {\n            bot.KeyUp(0x41);\n            bot.KeyDown(0x44);\n        }\n        if (check_mouse(xOne, xTwo) == 'N') {\n            bot.KeyUp(0x44);\n            bot.KeyUp(0x41);\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>This works fine, when opening notepad or game chat, it holds a when I move my mouse left, and it holds d when I move my mouse to the right. The problem is, that, when I am in game, it doesn't move my character at all. I think the problem is that this is a virtual key press and not a hardware one, and I don't know how to change this. \ncan someone modify my code in order for this to work?</p>\n"}, {"tags": ["c++", "qt", "qt5", "qtcharts"], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": false, "score": 1, "last_activity_date": 1537371605, "creation_date": 1537371605, "answer_id": 52409601, "question_id": 52407267, "link": "https://stackoverflow.com/questions/52407267/qchart-log-axis-data-not-shown/52409601#52409601", "title": "QChart log axis data not shown", "body": "<p>The range does not refer to the scaled values, but to the actual values, for example in your case it should be from epsilon to 100. On the other hand the values that are shown in the logarithmic scale must be positive, in your case I see that there is zeros so a possible solution is to add an epsilon:</p>\n\n<pre><code>void WidgetHistogramm::setData(const std::vector&lt;int&gt; data)\n{\n    if (data.size() &lt;= 0){\n        LOG_DEBUG() &lt;&lt; \"Histogram Data empty\";\n        return;\n    }\n\n    auto max = *max_element(std::begin(data), std::end(data));\n\n    QVector&lt;QPointF&gt; points(data.size());\n\n    for(std::vector&lt;int&gt;::size_type i = 0; i != data.size(); ++i) {\n        points[i] = QPointF(i, data[i]*100.0/max + std::numeric_limits&lt;qreal&gt;::epsilon());\n    }\n\n    series-&gt;replace(points);\n    serieslog-&gt;replace(points);\n\n    chart-&gt;axisX(series)-&gt;setRange(0, points.size());\n    chart-&gt;axisY(series)-&gt;setRange(0, 100);\n    chart-&gt;axisX(serieslog)-&gt;setRange(0, points.size());\n    chart-&gt;axisY(serieslog)-&gt;setRange( std::numeric_limits&lt;qreal&gt;::epsilon(), 100);\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/VwH5x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VwH5x.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 2714, "user_id": 843458, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e600bfa3509ddea2d693514cbe11bbdb?s=128&d=identicon&r=PG", "display_name": "Matthias Pospiech", "link": "https://stackoverflow.com/users/843458/matthias-pospiech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 689, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1543201053, "creation_date": 1537364360, "last_edit_date": 1543201053, "question_id": 52407267, "link": "https://stackoverflow.com/questions/52407267/qchart-log-axis-data-not-shown", "title": "QChart log axis data not shown", "body": "<p>I have a 2Y Axis plo with a <code>QValueAxis</code>on the y1 and <code>QLogValueAxis</code> on y2.</p>\n\n<p>The linear plot is shown, the log plot is not shown. The data for both is the same.\n<a href=\"https://i.stack.imgur.com/yGqAg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yGqAg.png\" alt=\"enter image description here\"></a></p>\n\n<p>I wonder how to set up the ticks and limits for the log axis?</p>\n\n<p>This is the code:</p>\n\n<pre><code>chart = new QChart();\nchart-&gt;legend()-&gt;hide();\nchart-&gt;setTitle(\"Histogramm\");\n\naxisX = new QValueAxis;\naxisX-&gt;setLabelFormat(\"%g\");\nchart-&gt;addAxis(axisX, Qt::AlignBottom);\n\nseries = new QLineSeries;\nchart-&gt;addSeries(series);\n\naxisY = new QValueAxis;\naxisY-&gt;setTitleText(\"linear scale\");\naxisY-&gt;setLinePenColor(series-&gt;pen().color());\n\nchart-&gt;addAxis(axisY, Qt::AlignLeft);\nseries-&gt;attachAxis(axisX);\nseries-&gt;attachAxis(axisY);\n\nserieslog = new QLineSeries;\nchart-&gt;addSeries(serieslog);\n\n\naxisY3 = new QLogValueAxis();\naxisY3-&gt;setTitleText(\"logarithmic scale\");\naxisY3-&gt;setBase(10.0);\naxisY3-&gt;setLinePenColor(serieslog-&gt;pen().color());\n\nchart-&gt;addAxis(axisY3, Qt::AlignRight);\nserieslog-&gt;attachAxis(axisX);\nserieslog-&gt;attachAxis(axisY3);\n\nchartView = new QChartView(chart);\nchartView-&gt;setRenderHint(QPainter::Antialiasing);\n\n// Create a layout and add Chart\nQGridLayout *layout = new QGridLayout(this);\nlayout-&gt;addWidget(chartView);\n\nvoid WidgetHistogramm::setData(const std::vector&lt;int&gt; data)\n{\n    if (data.size() &lt;= 0)\n    {\n        LOG_DEBUG() &lt;&lt; \"Histogram Data empty\";\n        return;\n    }\n\n    auto max = *max_element(std::begin(data), std::end(data));\n\n    QVector&lt;QPointF&gt; points(data.size());\n\n    for(std::vector&lt;int&gt;::size_type i = 0; i != data.size(); ++i) {\n      points[i] = QPointF(i, data[i]*100/max);\n    }\n\n    series-&gt;replace(points);\n    serieslog-&gt;replace(points);\n\n    chart-&gt;axisX(series)-&gt;setRange(0, data.size());\n    chart-&gt;axisY(series)-&gt;setRange(0, 100);\n    chart-&gt;axisX(serieslog)-&gt;setRange(0, data.size());\n    chart-&gt;axisY(serieslog)-&gt;setRange(-1000, 1);\n}\n</code></pre>\n"}, {"tags": ["python", "c++"], "comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1537364770, "post_id": 52406950, "comment_id": 91758419, "body": "Is this a windows DLL or as Posix shared object you have created?  Do you have all the DLLs that pylib.so references available (on the path basically) - check with depends.exe (if you don&#39;t know what that is, search for it and download it <b>now</b> - it&#39;s a vital tool in a Windows developer&#39;s armoury)."}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1537364889, "post_id": 52406950, "comment_id": 91758503, "body": "What platform are you on? For Window&#39;s Id advise Microsoft Visual Studio Community (free), or at least some tool rather than manual command lines, and you certainly want a DLL, not an so."}, {"owner": {"reputation": 43, "user_id": 5722643, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4Co-iQC8hgs/AAAAAAAAAAI/AAAAAAAAAzY/MPAw8h18kqc/photo.jpg?sz=128", "display_name": "Roy", "link": "https://stackoverflow.com/users/5722643/roy"}, "edited": false, "score": 0, "creation_date": 1537365345, "post_id": 52406950, "comment_id": 91758805, "body": "If <b>pylib.so</b> is a C share library which is build by <b>gcc</b> command, then cdll.LoadLibrary(&#39;pylib.so&#39;) work. So it&#39;s seem to not require .dll."}, {"owner": {"reputation": 43, "user_id": 5722643, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4Co-iQC8hgs/AAAAAAAAAAI/AAAAAAAAAzY/MPAw8h18kqc/photo.jpg?sz=128", "display_name": "Roy", "link": "https://stackoverflow.com/users/5722643/roy"}, "edited": false, "score": 0, "creation_date": 1537365525, "post_id": 52406950, "comment_id": 91758922, "body": "I survey a lot of ctypes usages, they all use command line. Not using any certain IDE like Visual Studio."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5722643, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4Co-iQC8hgs/AAAAAAAAAAI/AAAAAAAAAzY/MPAw8h18kqc/photo.jpg?sz=128", "display_name": "Roy", "link": "https://stackoverflow.com/users/5722643/roy"}, "edited": false, "score": 0, "creation_date": 1537367508, "post_id": 52408118, "comment_id": 91760261, "body": "I use g++ to compile."}, {"owner": {"reputation": 3990, "user_id": 6095394, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7e512acda63343ac20eedd20c3964911?s=128&d=identicon&r=PG&f=1", "display_name": "pschill", "link": "https://stackoverflow.com/users/6095394/pschill"}, "reply_to_user": {"reputation": 43, "user_id": 5722643, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4Co-iQC8hgs/AAAAAAAAAAI/AAAAAAAAAzY/MPAw8h18kqc/photo.jpg?sz=128", "display_name": "Roy", "link": "https://stackoverflow.com/users/5722643/roy"}, "edited": false, "score": 0, "creation_date": 1537367550, "post_id": 52408118, "comment_id": 91760290, "body": "Yes, using g++ is correct. <i>gcc</i> stands for GNU Compiler Collection and the C++ compiler of gcc is g++."}, {"owner": {"reputation": 43, "user_id": 5722643, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4Co-iQC8hgs/AAAAAAAAAAI/AAAAAAAAAzY/MPAw8h18kqc/photo.jpg?sz=128", "display_name": "Roy", "link": "https://stackoverflow.com/users/5722643/roy"}, "edited": false, "score": 0, "creation_date": 1537367561, "post_id": 52408118, "comment_id": 91760298, "body": "I will get error when I use gcc to compile the .cpp code."}, {"owner": {"reputation": 43, "user_id": 5722643, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4Co-iQC8hgs/AAAAAAAAAAI/AAAAAAAAAzY/MPAw8h18kqc/photo.jpg?sz=128", "display_name": "Roy", "link": "https://stackoverflow.com/users/5722643/roy"}, "edited": false, "score": 0, "creation_date": 1537367678, "post_id": 52408118, "comment_id": 91760374, "body": "Oh! So I need to find and copy libstdc++-6.dll into the directory that the .so file locate? I think it is the working directory you talk about."}, {"owner": {"reputation": 3990, "user_id": 6095394, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7e512acda63343ac20eedd20c3964911?s=128&d=identicon&r=PG&f=1", "display_name": "pschill", "link": "https://stackoverflow.com/users/6095394/pschill"}, "reply_to_user": {"reputation": 43, "user_id": 5722643, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4Co-iQC8hgs/AAAAAAAAAAI/AAAAAAAAAzY/MPAw8h18kqc/photo.jpg?sz=128", "display_name": "Roy", "link": "https://stackoverflow.com/users/5722643/roy"}, "edited": false, "score": 0, "creation_date": 1537367929, "post_id": 52408118, "comment_id": 91760507, "body": "You need to copy <code>libstdc++-6.dll</code> into the <i>working directory</i>. Since you are using <code>cdll.LoadLibrary(&#39;pylib.so&#39;)</code> to load the library, the working directory also seems to be the directory that contains the .so file. The .dll is probably located in a bin/ directory somewhere near g++.exe."}, {"owner": {"reputation": 43, "user_id": 5722643, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4Co-iQC8hgs/AAAAAAAAAAI/AAAAAAAAAzY/MPAw8h18kqc/photo.jpg?sz=128", "display_name": "Roy", "link": "https://stackoverflow.com/users/5722643/roy"}, "edited": false, "score": 0, "creation_date": 1537369665, "post_id": 52408118, "comment_id": 91761626, "body": "I copy all the .dll in the <code>TDM-GCC-64\\bin</code> to the working directory. But I get the same dll error again..."}, {"owner": {"reputation": 43, "user_id": 5722643, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4Co-iQC8hgs/AAAAAAAAAAI/AAAAAAAAAzY/MPAw8h18kqc/photo.jpg?sz=128", "display_name": "Roy", "link": "https://stackoverflow.com/users/5722643/roy"}, "edited": false, "score": 0, "creation_date": 1537369834, "post_id": 52408118, "comment_id": 91761733, "body": "I use <code>os.path.dirname(os.path.realpath(__file__))</code> to locate working directory. I find the dir is <code>C:\\Users\\Jack\\PycharmProjects\\dip_hw1</code>. I put all the .dll into <code>dip_hw1</code>."}, {"owner": {"reputation": 3990, "user_id": 6095394, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7e512acda63343ac20eedd20c3964911?s=128&d=identicon&r=PG&f=1", "display_name": "pschill", "link": "https://stackoverflow.com/users/6095394/pschill"}, "reply_to_user": {"reputation": 43, "user_id": 5722643, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4Co-iQC8hgs/AAAAAAAAAAI/AAAAAAAAAzY/MPAw8h18kqc/photo.jpg?sz=128", "display_name": "Roy", "link": "https://stackoverflow.com/users/5722643/roy"}, "edited": false, "score": 0, "creation_date": 1537419368, "post_id": 52408118, "comment_id": 91778747, "body": "The working directory can be seen with <code>os.getcwd()</code>. What does this function return for you?"}, {"owner": {"reputation": 43, "user_id": 5722643, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4Co-iQC8hgs/AAAAAAAAAAI/AAAAAAAAAzY/MPAw8h18kqc/photo.jpg?sz=128", "display_name": "Roy", "link": "https://stackoverflow.com/users/5722643/roy"}, "edited": false, "score": 0, "creation_date": 1537428431, "post_id": 52408118, "comment_id": 91782668, "body": "The same <code>C:\\Users\\Jack\\PycharmProjects\\dip_hw1</code>"}, {"owner": {"reputation": 3990, "user_id": 6095394, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7e512acda63343ac20eedd20c3964911?s=128&d=identicon&r=PG&f=1", "display_name": "pschill", "link": "https://stackoverflow.com/users/6095394/pschill"}, "reply_to_user": {"reputation": 43, "user_id": 5722643, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4Co-iQC8hgs/AAAAAAAAAAI/AAAAAAAAAzY/MPAw8h18kqc/photo.jpg?sz=128", "display_name": "Roy", "link": "https://stackoverflow.com/users/5722643/roy"}, "edited": false, "score": 0, "creation_date": 1537436794, "post_id": 52408118, "comment_id": 91787355, "body": "Strange that it didnt work. I could reproduce the exact same error (except for the chinese translation) and copying the dll fixed it for me."}, {"owner": {"reputation": 43, "user_id": 5722643, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4Co-iQC8hgs/AAAAAAAAAAI/AAAAAAAAAzY/MPAw8h18kqc/photo.jpg?sz=128", "display_name": "Roy", "link": "https://stackoverflow.com/users/5722643/roy"}, "edited": false, "score": 0, "creation_date": 1537455620, "post_id": 52408118, "comment_id": 91799457, "body": "I write the command example up to main question. You could check that for whether I do some mistakes."}], "tags": [], "owner": {"reputation": 3990, "user_id": 6095394, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7e512acda63343ac20eedd20c3964911?s=128&d=identicon&r=PG&f=1", "display_name": "pschill", "link": "https://stackoverflow.com/users/6095394/pschill"}, "is_accepted": true, "score": 0, "last_activity_date": 1537367358, "last_edit_date": 1537367358, "creation_date": 1537366945, "answer_id": 52408118, "question_id": 52406950, "link": "https://stackoverflow.com/questions/52406950/cannot-use-python-ctypes-to-load-c-share-library/52408118#52408118", "title": "Cannot use python ctypes to load C++ share library", "body": "<p>You are using gcc from MinGW to compile and link the code. Since the code uses the C++ standard library (<code>#include &lt;iostream&gt;</code> resp. <code>std::cout</code>), you need to make the <code>libstdc++-6.dll</code> file available which ships with gcc. Copy the .dll into the working directory, then it should work.</p>\n"}, {"comments": [{"owner": {"reputation": 358, "user_id": 7390688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/46PaJ.jpg?s=128&g=1", "display_name": "pullmyteeth", "link": "https://stackoverflow.com/users/7390688/pullmyteeth"}, "edited": false, "score": 0, "creation_date": 1593443987, "post_id": 52454253, "comment_id": 110776880, "body": "I had to use <code>lib = cdll.LoadLibrary(&#39;.&#47;pylib.dll&#39;)</code> to convince ctypes I wasn&#39;t looking for a system library."}], "tags": [], "owner": {"reputation": 43, "user_id": 5722643, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4Co-iQC8hgs/AAAAAAAAAAI/AAAAAAAAAzY/MPAw8h18kqc/photo.jpg?sz=128", "display_name": "Roy", "link": "https://stackoverflow.com/users/5722643/roy"}, "is_accepted": false, "score": 2, "last_activity_date": 1537599678, "last_edit_date": 1537599678, "creation_date": 1537599009, "answer_id": 52454253, "question_id": 52406950, "link": "https://stackoverflow.com/questions/52406950/cannot-use-python-ctypes-to-load-c-share-library/52454253#52454253", "title": "Cannot use python ctypes to load C++ share library", "body": "<p>I find the solution by myself. The solution is:</p>\n\n<ol>\n<li>Using <a href=\"https://sourceforge.net/projects/mingw-w64/\" rel=\"nofollow noreferrer\">MinGW</a> comipler or Microsoft C/C++ compiler.</li>\n<li>Using Python 32 bit interpreter.</li>\n<li>It is not necessary to copy dll from compiler bin folder.</li>\n</ol>\n\n<p>First, I used the <a href=\"https://sourceforge.net/projects/tdm-gcc/\" rel=\"nofollow noreferrer\">TDM-GCC MinGW Compiler</a> as C/C++ compiler before. Then I try \nanother compiler: <a href=\"https://sourceforge.net/projects/mingw-w64/\" rel=\"nofollow noreferrer\">MinGW</a>. I can't tell you what different between them, I'm not a pro guy. But they produce different error message when I use <code>ctypes</code> to load the two different dll library which compile by both in the <code>Python 3.6.6 64 bit</code> interpreter. They all failed on <code>Python 3.6.6 64 bit</code> interpreter.</p>\n\n<p>I try 32-bit python to load dll library. It successes to load library.<br>\nThe <strong>pylib.cpp</strong> code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass Foo {\npublic:\n    void bar() {\n        cout &lt;&lt; \"Hello\" &lt;&lt; endl;\n    }\n};\n\nextern \"C\" {\n    Foo* Foo_new() { return new Foo(); }\n    void Foo_bar(Foo* foo) { foo-&gt;bar(); }\n}\n</code></pre>\n\n<p>Compile command:</p>\n\n<pre><code>g++ -shared -o pylib.dll pylib.cpp\n</code></pre>\n\n<p>The <strong>pylib.py</strong> code:</p>\n\n<pre><code>from ctypes import *\n\nlib = cdll.LoadLibrary('pylib.dll')\nf = lib.Foo_new()\nlib.Foo_bar(f)\n</code></pre>\n\n<p>The ouput:</p>\n\n<pre><code>Hello\n</code></pre>\n\n<p>Thanks for pschill and others propose new methods.</p>\n"}], "owner": {"reputation": 43, "user_id": 5722643, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4Co-iQC8hgs/AAAAAAAAAAI/AAAAAAAAAzY/MPAw8h18kqc/photo.jpg?sz=128", "display_name": "Roy", "link": "https://stackoverflow.com/users/5722643/roy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 814, "favorite_count": 1, "accepted_answer_id": 52408118, "answer_count": 2, "score": 2, "last_activity_date": 1537599678, "creation_date": 1537363489, "last_edit_date": 1537455449, "question_id": 52406950, "link": "https://stackoverflow.com/questions/52406950/cannot-use-python-ctypes-to-load-c-share-library", "title": "Cannot use python ctypes to load C++ share library", "body": "<p>I follow instructions of this page to try to call C++ functions.<br>\n<a href=\"https://stackoverflow.com/questions/145270/calling-c-c-from-python\">Calling C/C++ from Python?</a></p>\n\n<p>I write a <strong>pylib.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Foo {\npublic:\n    void bar() {\n        std::cout &lt;&lt; \"Hello\" &lt;&lt; std::endl;\n    }\n};\n\nextern \"C\" {\n    Foo* Foo_new() { return new Foo(); }\n    void Foo_bar(Foo* foo) { foo-&gt;bar(); }\n}\n</code></pre>\n\n<p>and then use these commands on Win 10 terminal:</p>\n\n<pre><code>g++ -c -fPIC pylib.cpp -o pylib.o\ng++ -shared -Wl,-soname,pylib.so -o pylib.so  pylib.o\n</code></pre>\n\n<p>I get the message in the terminal. Just a warning. The <strong>pylib.so</strong> still be maked by g++. </p>\n\n<pre><code>pylib.cpp:1:0: warning: -fPIC ignored for target (all code is position independent)\n #include &lt;iostream&gt;\n ^\n</code></pre>\n\n<p>I write a <strong>pylib.py</strong>:</p>\n\n<pre><code>from ctypes import *\n\nlib = cdll.LoadLibrary('pylib.so')\nf = lib.Foo()\nf.bar()\n</code></pre>\n\n<p>I got the error message:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/Jack/PycharmProjects/dip_hw1/pylib.py\", line 3, in &lt;module&gt;\n    lib = cdll.LoadLibrary('pylib.so')\n  File \"C:\\Python\\lib\\ctypes\\__init__.py\", line 426, in LoadLibrary\n    return self._dlltype(name)\n  File \"C:\\Python\\lib\\ctypes\\__init__.py\", line 348, in __init__\n    self._handle = _dlopen(self._name, mode)\nOSError: [WinError 1114] \u52d5\u614b\u9023\u7d50\u7a0b\u5f0f\u5eab (DLL) \u521d\u59cb\u5316\u4f8b\u884c\u7a0b\u5e8f\u5931\u6557\u3002\n</code></pre>\n\n<p>OSError: [WinError 1114] <strong>\u52d5\u614b\u9023\u7d50\u7a0b\u5f0f\u5eab (DLL) \u521d\u59cb\u5316\u4f8b\u884c\u7a0b\u5e8f\u5931\u6557\u3002</strong><br>\nthis meaning likes<br>\nOSError: [WinError 1114] <strong>Dynamic-link library (DLL) initialization routine failed</strong></p>\n\n<p>My environment is</p>\n\n<pre><code>Python: Python 3.6.6 (v3.6.6:4cf1f54eb7, Jun 27 2018, 03:37:03) [MSC v.1900 64 bit (AMD64)] on win32\nC/C++ Compiler: TDM-GCC MinGW\nOS: Win 10\n</code></pre>\n\n<p>I can load C library well. but I continue get <strong>dll error</strong> after trying a lot of various methods to write the C++ code, or to make share library with different way.</p>\n\n<hr>\n\n<p><strong>Note that:</strong> the name of cpp library changes to <code>pylib2.dll</code>. whatever I use <code>.so</code> for <code>.dll</code> for dll file name, I get the same error.</p>\n\n<p>This is the command example</p>\n\n<pre><code>C:\\Users\\Jack\\PycharmProjects\\dip_hw1&gt;dir\n \u78c1\u789f\u5340 C \u4e2d\u7684\u78c1\u789f\u6c92\u6709\u6a19\u7c64\u3002\n \u78c1\u789f\u5340\u5e8f\u865f:  1AB4-8568\n\n C:\\Users\\Jack\\PycharmProjects\\dip_hw1 \u7684\u76ee\u9304\n\n2018/09/20  \u4e0b\u5348 03:26    &lt;DIR&gt;          .\n2018/09/20  \u4e0b\u5348 03:26    &lt;DIR&gt;          ..\n2018/09/20  \u4e0b\u5348 10:49    &lt;DIR&gt;          .idea\n2018/09/18  \u4e0a\u5348 11:12    &lt;DIR&gt;          image\n2015/06/28  \u4e0b\u5348 02:28            58,880 libatomic-1.dll\n2015/06/28  \u4e0b\u5348 02:28            69,120 libatomic_64-1.dll\n2013/09/01  \u4e0a\u5348 09:38           149,207 libcharset-1.dll\n2015/06/28  \u4e0a\u5348 05:50           145,934 libgcc_s_dw2-1.dll\n2015/06/28  \u4e0b\u5348 02:28           114,176 libgcc_s_seh_64-1.dll\n2015/06/28  \u4e0b\u5348 02:28           120,832 libgcc_s_sjlj-1.dll\n2015/06/28  \u4e0b\u5348 02:28           934,400 libiconv-2.dll\n2014/04/27  \u4e0a\u5348 06:46           484,613 libintl-8.dll\n2015/06/28  \u4e0b\u5348 02:28           359,936 libquadmath-0.dll\n2015/06/28  \u4e0b\u5348 02:28           354,816 libquadmath_64-0.dll\n2015/06/28  \u4e0b\u5348 02:28            13,824 libssp-0.dll\n2015/06/28  \u4e0b\u5348 02:28            18,944 libssp_64-0.dll\n2015/06/28  \u4e0b\u5348 02:28         1,374,208 libstdc++-6.dll\n2015/06/28  \u4e0b\u5348 02:28         1,405,952 libstdc++_64-6.dll\n2015/06/28  \u4e0b\u5348 02:28            11,264 libvtv-0.dll\n2015/06/28  \u4e0b\u5348 02:28            15,872 libvtv_64-0.dll\n2015/06/28  \u4e0b\u5348 02:28            11,264 libvtv_stubs-0.dll\n2015/06/28  \u4e0b\u5348 02:28            15,872 libvtv_stubs_64-0.dll\n2015/06/28  \u4e0b\u5348 02:28            60,928 libwinpthread-1.dll\n2015/06/28  \u4e0b\u5348 02:28            64,512 libwinpthread_64-1.dll\n2018/09/17  \u4e0b\u5348 04:55             1,918 main.cpython-36.pyc\n2018/09/19  \u4e0b\u5348 12:14            10,587 main.py\n2018/09/19  \u4e0b\u5348 08:11           113,157 pylib.dll\n2018/09/20  \u4e0b\u5348 03:26               188 pylib.py\n2018/09/19  \u4e0b\u5348 11:02         2,695,132 pylib2.dll\n2018/09/19  \u4e0b\u5348 11:07         2,695,135 pylib2.so\n2018/09/17  \u4e0b\u5348 04:56                26 run.bat\n2018/09/19  \u4e0b\u5348 02:05               627 test.py\n2018/09/17  \u4e0b\u5348 04:55    &lt;DIR&gt;          __pycache__\n              28 \u500b\u6a94\u6848      11,301,324 \u4f4d\u5143\u7d44\n               5 \u500b\u76ee\u9304  171,916,886,016 \u4f4d\u5143\u7d44\u53ef\u7528\n\nC:\\Users\\Jack\\PycharmProjects\\dip_hw1&gt;python pylib.py\nC:\\Users\\Jack\\PycharmProjects\\dip_hw1\nC:\\Users\\Jack\\PycharmProjects\\dip_hw1\nTraceback (most recent call last):\n  File \"pylib.py\", line 7, in &lt;module&gt;\n    lib = cdll.LoadLibrary('pylib2.dll')\n  File \"C:\\Python\\lib\\ctypes\\__init__.py\", line 426, in LoadLibrary\n    return self._dlltype(name)\n  File \"C:\\Python\\lib\\ctypes\\__init__.py\", line 348, in __init__\n    self._handle = _dlopen(self._name, mode)\nOSError: [WinError 1114] \u52d5\u614b\u9023\u7d50\u7a0b\u5f0f\u5eab (DLL) \u521d\u59cb\u5316\u4f8b\u884c\u7a0b\u5e8f\u5931\u6557\u3002\n</code></pre>\n\n<p>And this is the new <strong>pylib.py</strong> code</p>\n\n<pre><code>from ctypes import *\nimport os\ndir_path = os.path.dirname(os.path.realpath(__file__))\nprint(dir_path)\nprint(os.getcwd())\n\nlib = cdll.LoadLibrary('pylib2.dll')\nf = lib.Foo()\nf.bar()\n</code></pre>\n"}, {"tags": ["c++", "linker"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1537363905, "post_id": 52406944, "comment_id": 91757846, "body": "Also see <a href=\"https://isocpp.org/wiki/faq/templates#templates-defn-vs-decl\" rel=\"nofollow noreferrer\">isocpp.org/wiki/faq/templates#templates-defn-vs-decl</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1537364238, "post_id": 52406944, "comment_id": 91758068, "body": "btw you get undefined reference from faulty linking, not from missing includes. If you forget to include something already the compiler would complain not the linker"}], "owner": {"reputation": 674, "user_id": 6911731, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6469fc87e72fcca5073e6916afafb908?s=128&d=identicon&r=PG", "display_name": "Garmekain", "link": "https://stackoverflow.com/users/6911731/garmekain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "closed_date": 1537364048, "answer_count": 0, "score": 0, "last_activity_date": 1537363461, "creation_date": 1537363461, "question_id": 52406944, "link": "https://stackoverflow.com/questions/52406944/undefined-reference-to-some-function-even-when-libraries-are-included", "closed_reason": "Duplicate", "title": "Undefined reference to some function even when libraries are included", "body": "<p>I'm making a simple program to calculate matrices. There are 3 files in total, <code>mat.h</code>, <code>mat.cpp</code> and <code>main.cpp</code>.</p>\n\n<p>Contents of <code>mat.h</code>:</p>\n\n<pre><code>#ifndef MAT_H\n#define MAT_H\n\n#include &lt;array&gt;\n\ntemplate&lt;.....&gt;\nclass Mat {\n    ...\n};\n\n#endif\n</code></pre>\n\n<p>Contents of <code>mat.cpp</code>:</p>\n\n<pre><code>#include \"mat.h\"\n\nusing std::array;\n\n// Definitions of Mat functions/constructors\n</code></pre>\n\n<p>Contents of <code>main.cpp</code>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"mat.h\"\nusing namespace std;\n\nint main() {\n    //Here I create a couple of Mat objects.\n    return 0;\n}\n</code></pre>\n\n<p>The problem is that when I compile it using <code>g++ mat.cpp main.cpp</code> it gives me a linker error, saying that all the functions defined in <code>mat.cpp</code> are not defined(undefined reference). The problem goes away if I define the main function in <code>mat.cpp</code>, but I want to have different files.</p>\n\n<p>For the sake of clarity, here is the error message:</p>\n\n<pre><code>main.o: En la funci\u00f3n `main':\nmain.cpp:(.text+0x42): referencia a `Mat&lt;double, 1ul, 2ul&gt;::Mat(std::array&lt;double, 2ul&gt; const&amp;)' sin definir\nmain.cpp:(.text+0x6e): referencia a `Mat&lt;double, 1ul, 2ul&gt;::Mat(std::array&lt;double, 2ul&gt; const&amp;)' sin definir\nmain.cpp:(.text+0x9a): referencia a `Mat&lt;double, 2ul, 1ul&gt;::Mat(std::array&lt;double, 2ul&gt; const&amp;)' sin definir\nmain.cpp:(.text+0xc6): referencia a `Mat&lt;double, 2ul, 1ul&gt;::Mat(std::array&lt;double, 2ul&gt; const&amp;)' sin definir\nmain.cpp:(.text+0x10c): referencia a `Mat&lt;Mat&lt;double, 1ul, 2ul&gt;, 1ul, 2ul&gt;::Mat(std::array&lt;Mat&lt;double, 1ul, 2ul&gt;, 2ul&gt; const&amp;)' sin definir\nmain.cpp:(.text+0x152): referencia a `Mat&lt;Mat&lt;double, 2ul, 1ul&gt;, 2ul, 1ul&gt;::Mat(std::array&lt;Mat&lt;double, 2ul, 1ul&gt;, 2ul&gt; const&amp;)' sin definir\nmain.cpp:(.text+0x190): referencia a `Mat&lt;int, 2ul, 2ul&gt;::Mat(std::array&lt;int, 4ul&gt; const&amp;)' sin definir\nmain.cpp:(.text+0x1c6): referencia a `Mat&lt;int, 2ul, 2ul&gt;::Mat(std::array&lt;int, 4ul&gt; const&amp;)' sin definir\nmain.cpp:(.text+0x1fc): referencia a `Mat&lt;int, 2ul, 2ul&gt;::Mat(std::array&lt;int, 4ul&gt; const&amp;)' sin definir\nmain.cpp:(.text+0x23e): referencia a `Mat&lt;int, 2ul, 2ul&gt;::Mat(std::array&lt;int, 4ul&gt; const&amp;)' sin definir\nmain.cpp:(.text+0x254): referencia a `Mat&lt;Mat&lt;int, 2ul, 2ul&gt;, 2ul, 2ul&gt;::Mat(std::array&lt;Mat&lt;int, 2ul, 2ul&gt;, 4ul&gt; const&amp;)' sin definir\nmain.cpp:(.text+0x2e7): referencia a `Mat&lt;Mat&lt;double, 1ul, 2ul&gt;, 1ul, 2ul&gt;::get(unsigned long, unsigned long)' sin definir\nmain.o: En la funci\u00f3n `Mat&lt;Mat&lt;double, 1ul, 2ul&gt;, 1ul, 2ul&gt; mult&lt;double, int, 1ul, 2ul, 1ul, 2ul, 2ul, 2ul&gt;(Mat&lt;Mat&lt;double, 1ul, 2ul&gt;, 1ul, 2ul&gt;, Mat&lt;Mat&lt;int, 2ul, 2ul&gt;, 2ul, 2ul&gt;)':\nmain.cpp:(.text._Z4multIdiLm1ELm2ELm1ELm2ELm2ELm2EE3MatIS0_IT_XT1_EXT6_EEXT3_EXT5_EES0_IS0_IS1_XT1_EXT2_EEXT3_EXT4_EES0_IS0_IT0_XT2_EXT6_EEXT4_EXT5_EE[_Z4multIdiLm1ELm2ELm1ELm2ELm2ELm2EE3MatIS0_IT_XT1_EXT6_EEXT3_EXT5_EES0_IS0_IS1_XT1_EXT2_EEXT3_EXT4_EES0_IS0_IT0_XT2_EXT6_EEXT4_EXT5_EE]+0x3a): referencia a `Mat&lt;Mat&lt;double, 1ul, 2ul&gt;, 1ul, 2ul&gt;::Mat()' sin definir\nmain.cpp:(.text._Z4multIdiLm1ELm2ELm1ELm2ELm2ELm2EE3MatIS0_IT_XT1_EXT6_EEXT3_EXT5_EES0_IS0_IS1_XT1_EXT2_EEXT3_EXT4_EES0_IS0_IT0_XT2_EXT6_EEXT4_EXT5_EE[_Z4multIdiLm1ELm2ELm1ELm2ELm2ELm2EE3MatIS0_IT_XT1_EXT6_EEXT3_EXT5_EES0_IS0_IS1_XT1_EXT2_EEXT3_EXT4_EES0_IS0_IT0_XT2_EXT6_EEXT4_EXT5_EE]+0x8d): referencia a `Mat&lt;Mat&lt;int, 2ul, 2ul&gt;, 2ul, 2ul&gt;::get(unsigned long, unsigned long)' sin definir\nmain.cpp:(.text._Z4multIdiLm1ELm2ELm1ELm2ELm2ELm2EE3MatIS0_IT_XT1_EXT6_EEXT3_EXT5_EES0_IS0_IS1_XT1_EXT2_EEXT3_EXT4_EES0_IS0_IT0_XT2_EXT6_EEXT4_EXT5_EE[_Z4multIdiLm1ELm2ELm1ELm2ELm2ELm2EE3MatIS0_IT_XT1_EXT6_EEXT3_EXT5_EES0_IS0_IS1_XT1_EXT2_EEXT3_EXT4_EES0_IS0_IT0_XT2_EXT6_EEXT4_EXT5_EE]+0xb9): referencia a `Mat&lt;Mat&lt;double, 1ul, 2ul&gt;, 1ul, 2ul&gt;::get(unsigned long, unsigned long)' sin definir\nmain.cpp:(.text._Z4multIdiLm1ELm2ELm1ELm2ELm2ELm2EE3MatIS0_IT_XT1_EXT6_EEXT3_EXT5_EES0_IS0_IS1_XT1_EXT2_EEXT3_EXT4_EES0_IS0_IT0_XT2_EXT6_EEXT4_EXT5_EE[_Z4multIdiLm1ELm2ELm1ELm2ELm2ELm2EE3MatIS0_IT_XT1_EXT6_EEXT3_EXT5_EES0_IS0_IS1_XT1_EXT2_EEXT3_EXT4_EES0_IS0_IT0_XT2_EXT6_EEXT4_EXT5_EE]+0xfc): referencia a `Mat&lt;Mat&lt;double, 1ul, 2ul&gt;, 1ul, 2ul&gt;::get(unsigned long, unsigned long)' sin definir\nmain.cpp:(.text._Z4multIdiLm1ELm2ELm1ELm2ELm2ELm2EE3MatIS0_IT_XT1_EXT6_EEXT3_EXT5_EES0_IS0_IS1_XT1_EXT2_EEXT3_EXT4_EES0_IS0_IT0_XT2_EXT6_EEXT4_EXT5_EE[_Z4multIdiLm1ELm2ELm1ELm2ELm2ELm2EE3MatIS0_IT_XT1_EXT6_EEXT3_EXT5_EES0_IS0_IS1_XT1_EXT2_EEXT3_EXT4_EES0_IS0_IT0_XT2_EXT6_EEXT4_EXT5_EE]+0x10e): referencia a `Mat&lt;double, 1ul, 2ul&gt;&amp; Mat&lt;double, 1ul, 2ul&gt;::operator+=&lt;double&gt;(Mat&lt;double, 1ul, 2ul&gt;)' sin definir\nmain.o: En la funci\u00f3n `Mat&lt;double, 1ul, 2ul&gt; mult&lt;double, int, 1ul, 2ul, 2ul&gt;(Mat&lt;double, 1ul, 2ul&gt;, Mat&lt;int, 2ul, 2ul&gt;)':\nmain.cpp:(.text._Z4multIdiLm1ELm2ELm2EE3MatIT_XT1_EXT3_EES0_IS1_XT1_EXT2_EES0_IT0_XT2_EXT3_EE[_Z4multIdiLm1ELm2ELm2EE3MatIT_XT1_EXT3_EES0_IS1_XT1_EXT2_EES0_IT0_XT2_EXT3_EE]+0x2b): referencia a `Mat&lt;double, 1ul, 2ul&gt;::Mat()' sin definir\nmain.cpp:(.text._Z4multIdiLm1ELm2ELm2EE3MatIT_XT1_EXT3_EES0_IS1_XT1_EXT2_EES0_IT0_XT2_EXT3_EE[_Z4multIdiLm1ELm2ELm2EE3MatIT_XT1_EXT3_EES0_IS1_XT1_EXT2_EES0_IT0_XT2_EXT3_EE]+0x77): referencia a `Mat&lt;double, 1ul, 2ul&gt;::get(unsigned long, unsigned long)' sin definir\nmain.cpp:(.text._Z4multIdiLm1ELm2ELm2EE3MatIT_XT1_EXT3_EES0_IS1_XT1_EXT2_EES0_IT0_XT2_EXT3_EE[_Z4multIdiLm1ELm2ELm2EE3MatIT_XT1_EXT3_EES0_IS1_XT1_EXT2_EES0_IT0_XT2_EXT3_EE]+0x97): referencia a `Mat&lt;int, 2ul, 2ul&gt;::get(unsigned long, unsigned long)' sin definir\nmain.cpp:(.text._Z4multIdiLm1ELm2ELm2EE3MatIT_XT1_EXT3_EES0_IS1_XT1_EXT2_EES0_IT0_XT2_EXT3_EE[_Z4multIdiLm1ELm2ELm2EE3MatIT_XT1_EXT3_EES0_IS1_XT1_EXT2_EES0_IT0_XT2_EXT3_EE]+0xbe): referencia a `Mat&lt;double, 1ul, 2ul&gt;::get(unsigned long, unsigned long)' sin definir\nmain.o:(.data.rel.ro._ZTV3MatIS_IiLm2ELm2EELm2ELm2EE[_ZTV3MatIS_IiLm2ELm2EELm2ELm2EE]+0x10): referencia a `Mat&lt;Mat&lt;int, 2ul, 2ul&gt;, 2ul, 2ul&gt;::get(unsigned long, unsigned long)' sin definir\nmain.o:(.data.rel.ro._ZTV3MatIS_IiLm2ELm2EELm2ELm2EE[_ZTV3MatIS_IiLm2ELm2EELm2ELm2EE]+0x18): referencia a `Mat&lt;Mat&lt;int, 2ul, 2ul&gt;, 2ul, 2ul&gt;::set(Mat&lt;int, 2ul, 2ul&gt; const&amp;, unsigned long, unsigned long)' sin definir\nmain.o:(.data.rel.ro._ZTV3MatIiLm2ELm2EE[_ZTV3MatIiLm2ELm2EE]+0x10): referencia a `Mat&lt;int, 2ul, 2ul&gt;::get(unsigned long, unsigned long)' sin definir\nmain.o:(.data.rel.ro._ZTV3MatIiLm2ELm2EE[_ZTV3MatIiLm2ELm2EE]+0x18): referencia a `Mat&lt;int, 2ul, 2ul&gt;::set(int const&amp;, unsigned long, unsigned long)' sin definir\nmain.o:(.data.rel.ro._ZTV3MatIS_IdLm1ELm2EELm1ELm2EE[_ZTV3MatIS_IdLm1ELm2EELm1ELm2EE]+0x10): referencia a `Mat&lt;Mat&lt;double, 1ul, 2ul&gt;, 1ul, 2ul&gt;::get(unsigned long, unsigned long)' sin definir\nmain.o:(.data.rel.ro._ZTV3MatIS_IdLm1ELm2EELm1ELm2EE[_ZTV3MatIS_IdLm1ELm2EELm1ELm2EE]+0x18): referencia a `Mat&lt;Mat&lt;double, 1ul, 2ul&gt;, 1ul, 2ul&gt;::set(Mat&lt;double, 1ul, 2ul&gt; const&amp;, unsigned long, unsigned long)' sin definir\nmain.o:(.data.rel.ro._ZTV3MatIdLm2ELm1EE[_ZTV3MatIdLm2ELm1EE]+0x10): referencia a `Mat&lt;double, 2ul, 1ul&gt;::get(unsigned long, unsigned long)' sin definir\nmain.o:(.data.rel.ro._ZTV3MatIdLm2ELm1EE[_ZTV3MatIdLm2ELm1EE]+0x18): referencia a `Mat&lt;double, 2ul, 1ul&gt;::set(double const&amp;, unsigned long, unsigned long)' sin definir\nmain.o:(.data.rel.ro._ZTV3MatIdLm1ELm2EE[_ZTV3MatIdLm1ELm2EE]+0x10): referencia a `Mat&lt;double, 1ul, 2ul&gt;::get(unsigned long, unsigned long)' sin definir\nmain.o:(.data.rel.ro._ZTV3MatIdLm1ELm2EE[_ZTV3MatIdLm1ELm2EE]+0x18): referencia a `Mat&lt;double, 1ul, 2ul&gt;::set(double const&amp;, unsigned long, unsigned long)' sin definir\ncollect2: error: ld returned 1 exit status\n</code></pre>\n"}, {"tags": ["python", "c++", "algorithm"], "comments": [{"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "edited": false, "score": 3, "creation_date": 1537363857, "post_id": 52406902, "comment_id": 91757815, "body": "It would be helpful to tell us what line of code is causing this error, but I think it would be even more useful for you to step through your python code with a debugger and see what&#39;s going on step by step"}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "edited": false, "score": 1, "creation_date": 1537363916, "post_id": 52406902, "comment_id": 91757854, "body": "I don&#39;t think this is the source of the error, but I happened to notice that you do <code>while x &lt; width:...</code> but don&#39;t set <code>x = 0</code> inside the y loop"}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 0, "creation_date": 1537364537, "post_id": 52406902, "comment_id": 91758266, "body": "Why you use while instead of for y in range(0, height)?"}, {"owner": {"reputation": 105, "user_id": 10280951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f948f4472ff6381b3b320e7597e74ee7?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/10280951/chris"}, "edited": false, "score": 0, "creation_date": 1537365071, "post_id": 52406902, "comment_id": 91758618, "body": "I added the whole error (sorry for that) and I added x = 0 inside the y loop (as you said: it wasn&#39;t the source)"}, {"owner": {"reputation": 14960, "user_id": 3214872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/NJBvG.jpg?s=128&g=1", "display_name": "GPhilo", "link": "https://stackoverflow.com/users/3214872/gphilo"}, "edited": false, "score": 0, "creation_date": 1537365594, "post_id": 52406902, "comment_id": 91758968, "body": "Is there a specific reason for you not to use some library implementation? (Googling &quot;python radial symmetry transform&quot; returns a few options)."}, {"owner": {"reputation": 105, "user_id": 10280951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f948f4472ff6381b3b320e7597e74ee7?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/10280951/chris"}, "edited": false, "score": 0, "creation_date": 1537366527, "post_id": 52406902, "comment_id": 91759582, "body": "I tried that (for example this one: <a href=\"https://github.com/ceilab/frst_python\" rel=\"nofollow noreferrer\">github.com/ceilab/frst_python</a>) but it didn&#39;t worked as the algroithm seems a little bit different (I got no real results, only a nearly black output)."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1537369054, "post_id": 52406902, "comment_id": 91761206, "body": "The linebreaks in stack traces are significant. Now that it&#39;s readable, what do the last couple of lines tell you? What are the dimensions and valid indices for <code>range</code>?"}, {"owner": {"reputation": 105, "user_id": 10280951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f948f4472ff6381b3b320e7597e74ee7?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/10280951/chris"}, "edited": false, "score": 0, "creation_date": 1537370258, "post_id": 52406902, "comment_id": 91762018, "body": "The algorithm wanted to increase a position in the array (image) that is not there. It is a 768x1024 image so from 0 to 1023. But I don&#39;t know why it&#39;s running out of bounds."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1537382350, "post_id": 52406902, "comment_id": 91768241, "body": "I&#39;d use a debugger to see <code>tx, ty</code> values. Also, shouldn&#39;t <code>result[ty, tx]</code> be <code>result[tx, ty]</code> ?"}, {"owner": {"reputation": 105, "user_id": 10280951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f948f4472ff6381b3b320e7597e74ee7?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/10280951/chris"}, "edited": false, "score": 0, "creation_date": 1537382971, "post_id": 52406902, "comment_id": 91768534, "body": "tx was 1024, ty 0. But this could be fixed with the if condition. There must be an other mistake."}, {"owner": {"reputation": 105, "user_id": 10280951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f948f4472ff6381b3b320e7597e74ee7?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/10280951/chris"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1537393183, "post_id": 52406902, "comment_id": 91772820, "body": "As the out of bound error is fixed, do you have any ideas why the code isn&#39;t giving good result? @Useless"}], "answers": [{"tags": [], "owner": {"reputation": 187, "user_id": 5316640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1623806421240340/picture?type=large", "display_name": "Janitha Prabath Madushanka", "link": "https://stackoverflow.com/users/5316640/janitha-prabath-madushanka"}, "is_accepted": false, "score": 0, "last_activity_date": 1544606009, "creation_date": 1544606009, "answer_id": 53739572, "question_id": 52406902, "link": "https://stackoverflow.com/questions/52406902/algorithm-from-c-to-python-radial-symmetry-transform/53739572#53739572", "title": "Algorithm from C++ to Python (radial symmetry transform)", "body": "<p>use can just use Fast Radial Symmetry Transformation built in library <a href=\"https://pypi.org/project/frst/\" rel=\"nofollow noreferrer\">link to the description</a></p>\n"}], "owner": {"reputation": 105, "user_id": 10280951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f948f4472ff6381b3b320e7597e74ee7?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/10280951/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 433, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544606009, "creation_date": 1537363341, "last_edit_date": 1537393033, "question_id": 52406902, "link": "https://stackoverflow.com/questions/52406902/algorithm-from-c-to-python-radial-symmetry-transform", "title": "Algorithm from C++ to Python (radial symmetry transform)", "body": "<p>I have to transform the radial symmetry transform algorithm from C++ to Python. I'm very new to python and have never used C++.</p>\n\n<pre><code>void RadSymTransform(InputArray gradx,InputArray grady,OutputArray result,int ray,double minval=0,double maxval=255)\n{\nMat gxMat=gradx.getMat();\nMat gyMat=grady.getMat();\nresult.create(gradx.size(), CV_16UC1);\nMat resMat=result.getMat();\nresMat=Mat::zeros(resMat.size(), resMat.type());\nint x,y,i,H,W;\ndouble tx,ty,gx,gy,ampl,max;\nH=gxMat.rows;W=gxMat.cols;\nfor(y=0;y&lt;H;y++)\n    for (x = 0; x &lt; W; x++)\n    {\n        gx=gxMat.at&lt;double&gt;(y,x);\n        gy=gyMat.at&lt;double&gt;(y,x);\n        ampl=sqrt(gx*gx+gy*gy);\n        if((ampl&gt;minval)&amp;&amp;(ampl&lt;maxval)){\n            max=(abs(gx)&gt;abs(gy)?abs(gx):abs(gy));\n            gx/=max;gy/=max;\n            tx=x-ray*gx;ty=y-ray*gy;\n            if(tx&lt;0||tx&gt;W||ty&lt;0||ty&gt;H)continue;\n            tx=x;ty=y;\n            for (i = 0; i &lt; ray; ++i)\n            {\n                tx-=gx;ty-=gy;\n                resMat.at&lt;ushort&gt;((int)ty,(int)tx)++;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>It takes the x and y gradients and the detection radius (ray). minval and maxval are low and high thresholds for the gradient.</p>\n\n<p>The algorithm should transform the coin image down below to the radial symmetry transform.</p>\n\n<p><a href=\"https://i.stack.imgur.com/FlKmR.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FlKmR.jpg\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/e3pv6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/e3pv6.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is my python version, but unfortunately I get an error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/Christian/PycharmProjects/symmetry_transform4/RadSymTransform.py\", line 74, in &lt;module&gt;\n    print(radSymTransform(gray, 60, 0, 255))\n  File \"C:/Users/Christian/PycharmProjects/symmetry_transform4/RadSymTransform.py\", line 64, in radSymTransform\n    result[ty, tx] = result[ty, tx] + 1\nIndexError: index 1024 is out of bounds for axis 1 with size 1024\n</code></pre>\n\n<p>code:</p>\n\n<pre><code>import cv2\nimport cv2\nimport numpy as np\nimport math\n\n\n# x gradient\ndef gradx(img):\n    img = img.astype('int')\n    rows, cols = img.shape\n    # Use hstack to add back in the columns that were dropped as zeros\n    return np.hstack((np.zeros((rows, 1)), (img[:, 2:] - img[:, :-2]) / 2.0, np.zeros((rows, 1))))\n\n\n# y gradient\ndef grady(img):\n    img = img.astype('int')\n    rows, cols = img.shape\n    # Use vstack to add back the rows that were dropped as zeros\n    return np.vstack((np.zeros((1, cols)), (img[2:, :] - img[:-2, :]) / 2.0, np.zeros((1, cols))))\n\n\n# img -&gt; gray-scale image\n# Detection radius ray\n# minVal -&gt; low threshold for the gradient\n# maxVal -&gt; low threshold for the gradient\ndef radSymTransform(img, ray, minVal, maxVal):\n    #gxMat = gradx(img)\n    #gyMat = grady(img)\n\n    gxMat = cv2.Sobel(img,cv2.CV_64F, 1, 0, ksize=5)\n    gyMat = cv2.Sobel(img,cv2.CV_64F, 0, 1, ksize=5)\n\n    gxMatShape = gradx(img).shape\n\n    result = np.zeros(img.shape)\n    # test = vGradx.getMat()\n\n    # image height = number of rows\n    # image width = number of columns\n    height = gxMatShape[0]\n    width = gxMatShape[1]\n\n    y = 0  # counter 1: y-coordinate\n    x = 0  # counter 2: x-coordinate\n\n    while y &lt; height:\n        while x &lt; width:\n            gx = gxMat[y, x]\n            gy = gyMat[y, x]\n            ampl = math.sqrt(gx * gx + gy * gy)\n\n            if ampl &gt; minVal and ampl &lt; maxVal:\n                maxXY = max(abs(gx), abs(gy))\n                gx = gx / maxXY\n                gy = gy / maxXY\n                tx = x - ray * gx\n                ty = y - ray * gy\n                if tx &lt; 0 or tx &gt; width or ty &lt; 0 or ty &gt; width:\n                    tx = x\n                    ty = y\n\n                i = 0  # counter 3\n                while i &lt; ray:\n                    tx = int(tx - gx)\n                    ty = int(ty - gy)\n                    # Increment result at position (tx,ty)\n                    if tx &lt; width and ty &lt; height:\n                        result[ty, tx] = result[ty, tx] + 1\n                    i = i + 1\n            x = x + 1\n        x = 0\n        y = y + 1\n\n    return result\n\n\nimg = cv2.imread('data/P1190263.jpg')\ngray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)\n\nresult = radSymTransform(gray, 60, 0, 255)\nprint(result)\ncv2.imshow(\"Output:\", result)\ncv2.waitKey(0)\n</code></pre>\n\n<p>I would be grateful for any advice what I did wrong.</p>\n\n<p><strong>Edit:</strong> I just added a condition that it's not allowed to run out of borders, but the output is to high, this means just a white image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/1dIK4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1dIK4.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Edit 2:</strong> I changed the parameters to <code>radSymTransform(gray, 1, 250, 255)</code> (first) and <code>radSymTransform(gray, 10, 250, 255)</code> (second) and I got this output which is also not very good: </p>\n\n<p><a href=\"https://i.stack.imgur.com/YOrLM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YOrLM.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/yi5Hk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yi5Hk.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "edited": false, "score": 0, "creation_date": 1537363591, "post_id": 52406856, "comment_id": 91757638, "body": "In your case if you constructed the map with the keys as your values and values as your keys, the minimum value would just be <code>*A.begin()</code> since <code>std::map</code> stores its elements in sorted order."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1537365221, "post_id": 52406856, "comment_id": 91758735, "body": "Using <code>double</code> as key for <code>std::map</code> is usually not a good idea"}], "answers": [{"tags": [], "owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "is_accepted": true, "score": 7, "last_activity_date": 1537363932, "last_edit_date": 1537363932, "creation_date": 1537363432, "answer_id": 52406929, "question_id": 52406856, "link": "https://stackoverflow.com/questions/52406856/cant-compile-on-stdmin-elements-return/52406929#52406929", "title": "Can&#39;t compile on std::min_element&#39;s return", "body": "<p><code>std::map::iterator::value_type</code> (ie. the type of <code>*it</code>) is <code>std::pair&lt;const double,double&gt;</code>, and there is no standard overload of <code>operator&lt;&lt;(std::ostream &amp;, std::pair&lt;const double,double&gt;)</code>.</p>\n\n<p>You could either define one, or do something like <code>std::cout &lt;&lt; it-&gt;first &lt;&lt; ' ' &lt;&lt; it-&gt;second &lt;&lt; std::endl;</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 4, "last_activity_date": 1537364733, "last_edit_date": 1537364733, "creation_date": 1537363657, "answer_id": 52407018, "question_id": 52406856, "link": "https://stackoverflow.com/questions/52406856/cant-compile-on-stdmin-elements-return/52407018#52407018", "title": "Can&#39;t compile on std::min_element&#39;s return", "body": "<p>The element type of <code>std::map</code> is a <code>std::pair&lt;const key_type, mapped_type&gt;</code>.  <code>*it</code> will give you a reference to that.  There is no output output operator defined for <code>std::pair</code> so the code fails to compile.</p>\n\n<p>You will either have to add an overload for it like</p>\n\n<pre><code>std::ostream&amp; operator &lt;&lt;(std::ostream&amp; os, const std::pair&lt;const double, double&gt;&amp; e)\n{\n    return os &lt;&lt; \"{\" &lt;&lt; e.first &lt;&lt; \", \" &lt;&lt; e.second &lt;&lt; \"}\\n\";\n}\n</code></pre>\n\n<p>or just print what you want like</p>\n\n<pre><code>std::cout &lt;&lt; it-&gt;first &lt;&lt; \" \" &lt;&lt; it-&gt;second &lt;&lt; \"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 7039, "user_id": 2251840, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/O3LmV.png?s=128&g=1", "display_name": "SmallChess", "link": "https://stackoverflow.com/users/2251840/smallchess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 52406929, "answer_count": 2, "score": 2, "last_activity_date": 1537364733, "creation_date": 1537363231, "question_id": 52406856, "link": "https://stackoverflow.com/questions/52406856/cant-compile-on-stdmin-elements-return", "title": "Can&#39;t compile on std::min_element&#39;s return", "body": "<pre><code>#include &lt;map&gt;\n#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std;\n\nint main()\n{\n    std::map&lt;double, double&gt; A;\n\n    const auto it = std::min_element(A.begin(), A.end(),\n                                [](decltype(A)::value_type&amp; l, decltype(A)::value_type&amp; r) -&gt; bool { return l.second &lt; r.second; });\n\n    std::cout &lt;&lt; *it &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I wish to compute the minimum in the map.</p>\n\n<p>This code failed to compile. I thought the way to use <code>std::min_element</code>'s returned iterator is by referencing it. No?</p>\n\n<p>The error message on the <code>std::cout</code> line is \"invalid operands to binary expression\". </p>\n"}, {"tags": ["c++", "linked-list", "segmentation-fault"], "comments": [{"owner": {"reputation": 4917, "user_id": 2320961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AdwXN.png?s=128&g=1", "display_name": "Nic3500", "link": "https://stackoverflow.com/users/2320961/nic3500"}, "edited": false, "score": 1, "creation_date": 1537369678, "post_id": 52406760, "comment_id": 91761631, "body": "Welcome to SO.  Questions here are expected to be complete and contain everything required to understand it without referencing other sites.  See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  At this point you should post the question in your question (edit it).  Then for debugging segmentation fault, read <a href=\"https://www.cprogramming.com/debugging/segfaults.html\" rel=\"nofollow noreferrer\">cprogramming.com/debugging/segfaults.html</a> or other sites and tutorials that show you how to do it.  Once you have narrowed the issue to a section of code, you can edit your question to let us know what the issue is."}], "answers": [{"tags": [], "owner": {"reputation": 168, "user_id": 10434101, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sL5oIom_PPU/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DULSUQxayevcx-LcxGNtI_OwTCg0Q/mo/photo.jpg?sz=128", "display_name": "Nivedhitha N", "link": "https://stackoverflow.com/users/10434101/nivedhitha-n"}, "is_accepted": false, "score": 0, "last_activity_date": 1538240972, "creation_date": 1538240972, "answer_id": 52570670, "question_id": 52406760, "link": "https://stackoverflow.com/questions/52406760/find-merge-point-of-two-linked-list/52570670#52570670", "title": "Find merge point of two linked list?", "body": "<p>Your method of approach is fine. but after finding length of two lists, list1 and list2 would be pointing to null. Without resetting the lists to their respective heads, you are traversing with next pointers.</p>\n\n<blockquote>\n  <p>list1 = head1; list2 = head2;</p>\n</blockquote>\n\n<p>Set them to heads before setting largest list to list2.</p>\n"}], "owner": {"reputation": 99, "user_id": 9548725, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Parag Rane", "link": "https://stackoverflow.com/users/9548725/parag-rane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 203, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1538240972, "creation_date": 1537362956, "last_edit_date": 1537378939, "question_id": 52406760, "link": "https://stackoverflow.com/questions/52406760/find-merge-point-of-two-linked-list", "title": "Find merge point of two linked list?", "body": "<p>**Hii  I am trying to solve this hackerrank question , but I am getting runtime error \"segmentation fault \".</p>\n\n<p>Please help me to fix this error .</p>\n\n<p>Question link** = <a href=\"https://www.hackerrank.com/challenges/find-the-merge-point-of-two-joined-linked-lists/problem\" rel=\"nofollow noreferrer\">https://www.hackerrank.com/challenges/find-the-merge-point-of-two-joined-linked-lists/problem</a></p>\n\n<pre><code>int findMergeNode(SinglyLinkedListNode* head1, SinglyLinkedListNode* head2) {\n\nint length1 = 0;\nint length2 = 0;\n\nSinglyLinkedListNode* list1 = head1;\nSinglyLinkedListNode* list2 = head2;\n\nwhile(list1 != nullptr)\n{\n    list1 = list1-&gt;next;\n    length1 ++;\n}\nwhile(list2 != nullptr)\n{\n    list2 = list2 -&gt; next;\n    length2 ++;\n}\n\n//I want to point list2 pointer to the largest list \nif(length1 &gt; length2)\n{\n    SinglyLinkedListNode* temp = list1;\n    list1 = list2;\n    list2 = temp;     \n}\n\nfor(int i=0 ; i&lt; abs(length1 - length2) ;i++)\n{\n    list2 =list2 -&gt; next;\n}\n\nwhile(list2 != list1)\n{\n    list1 = list1-&gt;next;\n    list2 = list2-&gt;next;\n\n}\n\nreturn list1-&gt;data;\n</code></pre>\n\n<p>Error = I am getting \"segmentation fault\" error.</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1537363132, "post_id": 52406747, "comment_id": 91757324, "body": "<code>.c_str()</code> points to the text stored in the <code>std::string</code>. All your <code>delegate</code> objects point to the same <code>std::string</code>&#39;s data."}, {"owner": {"reputation": 151, "user_id": 8997005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96419829db8a57b0989928489a07b229?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Peedah", "link": "https://stackoverflow.com/users/8997005/daniel-peedah"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537363157, "post_id": 52406747, "comment_id": 91757335, "body": "But why should this matter if the object has already been constructed and placed in the vector?Why would emplacing a new structure edit the ones placed beforehand?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1537363193, "post_id": 52406747, "comment_id": 91757354, "body": "Your members only point to a string, they do not copy it or preserve it in any way. When you change that string, all pointers to it will see the new data. This can be easily solved by making your members <code>std::string</code> instead of <code>const char*</code>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537363272, "post_id": 52406747, "comment_id": 91757409, "body": "Beware that changing a <code>std::string</code> may invalidate any previous pointer to it&#39;s data, making them unusable. It seems you got lucky (or unlucky) that the pointers were never invalidated."}, {"owner": {"reputation": 151, "user_id": 8997005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96419829db8a57b0989928489a07b229?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Peedah", "link": "https://stackoverflow.com/users/8997005/daniel-peedah"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537363344, "post_id": 52406747, "comment_id": 91757465, "body": "So the only way to fix this is to edit the structure to use strings instead?And just pass the strings instead"}, {"owner": {"reputation": 588, "user_id": 9759769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/103f6c140cd1a7b04c8b8d4c04a54370?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/9759769/max"}, "edited": false, "score": 2, "creation_date": 1537363361, "post_id": 52406747, "comment_id": 91757472, "body": "You are just storing the pointer returned by <code>c_str</code>. The underlying <code>string</code> <code>delname</code>, etc. goes out of scope and you are storing dangling pointers in your <code>vector</code>. Change the class members to <code>std::string</code> instead of <code>const char *</code>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 588, "user_id": 9759769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/103f6c140cd1a7b04c8b8d4c04a54370?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/9759769/max"}, "edited": false, "score": 0, "creation_date": 1537363408, "post_id": 52406747, "comment_id": 91757505, "body": "@Max To be fair, we don&#39;t see the declaration of the <code>del*</code> strings, we don&#39;t see them go out of scope in the given example. We at least know that they are declared outside of the <code>for</code> loop."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1537363462, "post_id": 52406747, "comment_id": 91757549, "body": "@DanielPeedah It&#39;s not the only <i>possible</i> solution, but it&#39;s by far the easiest, cleanest and simplest."}, {"owner": {"reputation": 151, "user_id": 8997005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96419829db8a57b0989928489a07b229?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Peedah", "link": "https://stackoverflow.com/users/8997005/daniel-peedah"}, "edited": false, "score": 0, "creation_date": 1537363492, "post_id": 52406747, "comment_id": 91757569, "body": "Yes they were declared above the code I gave, I completely forgot about the consequences of using char *, as I am a fairly new programmer"}, {"owner": {"reputation": 588, "user_id": 9759769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/103f6c140cd1a7b04c8b8d4c04a54370?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/9759769/max"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537363574, "post_id": 52406747, "comment_id": 91757620, "body": "@Fran&#231;ois Andrieux You are correct"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1537364948, "post_id": 52406747, "comment_id": 91758551, "body": "You could use <code>strdup</code> if you need to keep your members as <code>char*</code>, but you do need to remember to free those pointers in your destructor and you&#39;ll also need to implement a copy constructor and assignment operator to prevent the same problem you&#39;re seeing now as well as double frees. Using <code>std::string</code> eliminates all of those issues."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1537367732, "post_id": 52406747, "comment_id": 91760406, "body": "The simplest solution is to use <code>std::string</code> inside your <code>class</code>.  Otherwise, you should implement a safe copy constructor that makes new copies of your character arrays."}], "answers": [{"tags": [], "owner": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "is_accepted": true, "score": 0, "last_activity_date": 1537416105, "last_edit_date": 1592644375, "creation_date": 1537416105, "answer_id": 52417397, "question_id": 52406747, "link": "https://stackoverflow.com/questions/52406747/prevent-vector-from-making-all-instances-of-class-the-same/52417397#52417397", "title": "Prevent vector from making all instances of class the same", "body": "<p>The code in the question invokes undefined behavior.</p>\n<pre><code>    const char * delname = delName.c_str();\n    const char * delrole = delRole.c_str();\n    const char * deltitle = delTitle.c_str();\n    const char * delgroup = party.c_str();\n    delegates.emplace_back(deltitle, delname, delrole,delgroup);\n</code></pre>\n<p>Look what <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/c_str\" rel=\"nofollow noreferrer\">cppreference</a> has to say about this:</p>\n<blockquote>\n<p>The pointer obtained from c_str() may be invalidated by:</p>\n<ul>\n<li><p>Passing a non-const reference to the string to any standard library function, or</p>\n</li>\n<li><p>Calling non-const member functions on the string, excluding operator[], at(), front(), back(), begin(), rbegin(), end() and rend().</p>\n</li>\n</ul>\n</blockquote>\n<p>This means that assignment operator:</p>\n<pre><code>    delTitle = record.get(0).toString();\n</code></pre>\n<p>invalidates <code>delTitle.c_str()</code>. This means that your <code>delegates</code> contains a bunch of invalid pointers, and dereferencing them invokes undefined behavior.</p>\n<p>You don't get a crash because, most likely, the same internal buffer is reused for all string variations. This is pure luck, and with different strings this can be different. For example, if the strings become larger and larger with each iteration, then the buffer will get reallocated and your pointers will point to some junk.</p>\n<p>The correct thing is to store <code>std::string</code> instead of <code>char *</code>.</p>\n"}], "owner": {"reputation": 151, "user_id": 8997005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96419829db8a57b0989928489a07b229?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Peedah", "link": "https://stackoverflow.com/users/8997005/daniel-peedah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 52417397, "answer_count": 1, "score": 0, "last_activity_date": 1537416105, "creation_date": 1537362920, "question_id": 52406747, "link": "https://stackoverflow.com/questions/52406747/prevent-vector-from-making-all-instances-of-class-the-same", "title": "Prevent vector from making all instances of class the same", "body": "<p>Here is the struct of which I need to create a vector of:</p>\n\n<pre><code>/*\n    Structure of a delegate, many expected*/\n    struct delegate {\n        const char * title;\n        const char * name;\n        const char * role;\n        const char * group;\n\n        delegate(const char * a, const char * b, const char * c, const char * d)\n            : title(a),name(b),role(c),group(d)\n        {}\n    };\n</code></pre>\n\n<p>The issue is that in the code I will present below, even though different sets of data are correctly collected and can be constructed into objects of types delegate, the vector always ends up with all its instances being the same object, however while debugging it is made evident the data given to construct the objects in the vector are different, so why is this so?\nThe code:</p>\n\n<pre><code>    std::vector &lt;delegate&gt; delegates;\n    ss &lt;&lt; \"SELECT Title,FirstName,MiddleName,LastName,Role,PartyId FROM Attendee WHERE eventId = ?\", use(eventId), now;\n    Poco::Data::RecordSet RecordSet(ss);\n    ss.reset(*db_session);\n    for (auto&amp; record : RecordSet) {\n        std::string result;\n        delTitle = record.get(0).toString();\n        delName = record.get(1).toString();\n        delName.append(\" \");\n        delName.append(record.get(2).toString());\n        delName.append(\" \");\n        delName.append(record.get(3).toString());\n        delRole = record.get(4).toString();\n        partyId = record.get(5).toString();\n        ss &lt;&lt; \"SELECT '1' FROM Party WHERE Id = ?\", into(result), use(partyId);\n        ss.reset(*db_session);\n        if (result != \"\")\n        {\n            ss &lt;&lt; \"SELECT Name FROM Party WHERE Id = ?\", into(party), use(partyId), now;\n            ss.reset(*db_session);\n        }\n        else\n            party = \"N/A\";\n        const char * delname = delName.c_str();\n        const char * delrole = delRole.c_str();\n        const char * deltitle = delTitle.c_str();\n        const char * delgroup = party.c_str();\n        delegates.emplace_back(deltitle, delname, delrole,delgroup);\n    }\n</code></pre>\n\n<p>The vector always ends up with all instances of the object being the same as the last one emplaced onto the vector.The first value is fine, but the second addition rewrites the first and so they both become the same object, and so on.</p>\n\n<p>Any help is appreciated thanks.</p>\n"}, {"tags": ["c++", "gcc", "compilation", "clang", "pass-by-reference"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 2, "creation_date": 1537363157, "post_id": 52406743, "comment_id": 91757336, "body": "Related <a href=\"https://stackoverflow.com/q/32608458/1708801\">Is passing a C++ object into its own constructor legal?</a> and <a href=\"https://stackoverflow.com/q/23415661/1708801\">Has C++ standard changed with respect to the use of indeterminate values and undefined behavior in C++14?</a>"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 2, "creation_date": 1537363177, "post_id": 52406743, "comment_id": 91757348, "body": "The standard dictates that a reference to a value is valid even before the value has been initialised. In the same way that a pointer to it is also valid. It&#39;s only invalid to access the variable through the reference prior to definition.  Storing the reference for later use, for example, is a valid operation."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1537363227, "post_id": 52406743, "comment_id": 91757378, "body": "You&#39;re expecting a lot from the compiler.  It would have to inspect <code>recurse</code>, see if it would be valid to give <code>v2</code> to it and then warn you if it isn&#39;t.  The compiler isn&#39;t going to go through all that work.  The syntax is correct so it is going to keep going."}, {"owner": {"reputation": 301, "user_id": 4009695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b67fc2e9caf493980041447f1f3860da?s=128&d=identicon&r=PG&f=1", "display_name": "David H Parry", "link": "https://stackoverflow.com/users/4009695/david-h-parry"}, "edited": false, "score": 0, "creation_date": 1537363254, "post_id": 52406743, "comment_id": 91757397, "body": "I know you can have an undefined reference... but passing it, I thought, was checked rigorously."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 1, "creation_date": 1537363321, "post_id": 52406743, "comment_id": 91757449, "body": "@DavidHParry But <code>v2</code> is a perfectly valid argument for the parameter <code>head</code>. If <code>recurse</code> was e.g. outputting <code>&amp;head</code> instead of accessing the members of <code>head</code>, all would be well."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1537363581, "post_id": 52406743, "comment_id": 91757625, "body": "Out of curiosity, how do you create an undefined reference (short of using an invalid numerical pointer value as &quot;object&quot; address)? (Your code here is not an example, as Angew and Richard have pointed out.)"}, {"owner": {"reputation": 301, "user_id": 4009695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b67fc2e9caf493980041447f1f3860da?s=128&d=identicon&r=PG&f=1", "display_name": "David H Parry", "link": "https://stackoverflow.com/users/4009695/david-h-parry"}, "edited": false, "score": 0, "creation_date": 1537363980, "post_id": 52406743, "comment_id": 91757906, "body": "I should have said <i>uninitialized</i> instead of <i>undefined</i>. It was the <b>passing</b> of this reference that intrigued me as usually I get a warning/error. I know you can have reference that aren&#39;t specifically declared as referring to anything until, say, some constructor gets called."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1537365215, "post_id": 52406743, "comment_id": 91758731, "body": "If you use the &quot;almost always auto&quot; convention, then this <code>auto v2 = A::vectorA {recurse(v2, bar)};</code> would not compile.  Not everyone buys into that style, so it depends on your team&#39;s druthers or your own style sensibilities."}], "answers": [{"comments": [{"owner": {"reputation": 301, "user_id": 4009695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b67fc2e9caf493980041447f1f3860da?s=128&d=identicon&r=PG&f=1", "display_name": "David H Parry", "link": "https://stackoverflow.com/users/4009695/david-h-parry"}, "edited": false, "score": 0, "creation_date": 1537364622, "post_id": 52406903, "comment_id": 91758322, "body": "This is only a code snippet that reproduces the error made using CompilerExplorer and NOT the code that made the error... you&#39;d need 20MB for that..."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 301, "user_id": 4009695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b67fc2e9caf493980041447f1f3860da?s=128&d=identicon&r=PG&f=1", "display_name": "David H Parry", "link": "https://stackoverflow.com/users/4009695/david-h-parry"}, "edited": false, "score": 0, "creation_date": 1537364836, "post_id": 52406903, "comment_id": 91758465, "body": "@DavidHParry sorry I dont get your comment. I am not refering to your code in my answer... &quot;NOT the code that made the error&quot; ? We can only discuss what we see here not something that only you have, if your example is substantially different from your real code you should edit the example"}, {"owner": {"reputation": 301, "user_id": 4009695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b67fc2e9caf493980041447f1f3860da?s=128&d=identicon&r=PG&f=1", "display_name": "David H Parry", "link": "https://stackoverflow.com/users/4009695/david-h-parry"}, "edited": false, "score": 0, "creation_date": 1537365158, "post_id": 52406903, "comment_id": 91758686, "body": "The fault that gave the error is stated above. You don&#39;t need the original code to understand the problem. The original had more instructive variable names than used here in this example?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 301, "user_id": 4009695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b67fc2e9caf493980041447f1f3860da?s=128&d=identicon&r=PG&f=1", "display_name": "David H Parry", "link": "https://stackoverflow.com/users/4009695/david-h-parry"}, "edited": false, "score": 0, "creation_date": 1537365264, "post_id": 52406903, "comment_id": 91758760, "body": "@DavidHParray still dont get what you are trying to tell me. As I understood the question you ask whether passing an unitialized reference should be forbidden and I gave you an example where doing so is completely fine and forbidding to do so would be really bad. What has all this to do with &quot;20MB needed to make the error&quot; ?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 301, "user_id": 4009695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b67fc2e9caf493980041447f1f3860da?s=128&d=identicon&r=PG&f=1", "display_name": "David H Parry", "link": "https://stackoverflow.com/users/4009695/david-h-parry"}, "edited": false, "score": 0, "creation_date": 1537365417, "post_id": 52406903, "comment_id": 91758850, "body": "@DavidHParry if you are disturbed by my critisism of your variable names, why not change them? Anyhow I&#39;ll remove the PS if that makes you feel better :P"}, {"owner": {"reputation": 301, "user_id": 4009695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b67fc2e9caf493980041447f1f3860da?s=128&d=identicon&r=PG&f=1", "display_name": "David H Parry", "link": "https://stackoverflow.com/users/4009695/david-h-parry"}, "edited": false, "score": 0, "creation_date": 1537365767, "post_id": 52406903, "comment_id": 91759081, "body": "Variable names changed to less cryptic ones?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 301, "user_id": 4009695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b67fc2e9caf493980041447f1f3860da?s=128&d=identicon&r=PG&f=1", "display_name": "David H Parry", "link": "https://stackoverflow.com/users/4009695/david-h-parry"}, "edited": false, "score": 0, "creation_date": 1537366476, "post_id": 52406903, "comment_id": 91759552, "body": "@DavidHParry user463035818 is the most cryptic name i can think of"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 301, "user_id": 4009695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b67fc2e9caf493980041447f1f3860da?s=128&d=identicon&r=PG&f=1", "display_name": "David H Parry", "link": "https://stackoverflow.com/users/4009695/david-h-parry"}, "edited": false, "score": 0, "creation_date": 1537366533, "post_id": 52406903, "comment_id": 91759587, "body": "@DavidHParry not sure if you are trying to make fun of me or what. I would suggest you to got back to <code>v1</code> and <code>v2</code> and just forget the matter, because now your text in the question does not match the code"}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 6, "last_activity_date": 1537365426, "last_edit_date": 1537365426, "creation_date": 1537363343, "answer_id": 52406903, "question_id": 52406743, "link": "https://stackoverflow.com/questions/52406743/c17-shouldnt-compilers-be-spotting-pass-by-reference-to-undefined-values/52406903#52406903", "title": "C++17 Shouldn&#39;t compilers be spotting pass-by-reference to undefined values?", "body": "<p>If this would not compile then one could also not do the following, which is not too uncommon:</p>\n\n<pre><code>struct base {\n    int&amp; x;\n    base(int&amp; x) : x(x) {}\n};\n\nstruct foo : base {\n    int x;\n    foo() : base(x) {}\n};\n</code></pre>\n\n<p>At the time the <code>base</code> constructor is called, <code>x</code> is not yet initialized, yet it is completely valid to store a reference to it for later use.</p>\n\n<p>This is just one example where getting a reference to a not yet initialized object is just fine and forbidding to do this would require to write very unclear cumbersome code.</p>\n"}], "owner": {"reputation": 301, "user_id": 4009695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b67fc2e9caf493980041447f1f3860da?s=128&d=identicon&r=PG&f=1", "display_name": "David H Parry", "link": "https://stackoverflow.com/users/4009695/david-h-parry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1538127364, "creation_date": 1537362907, "last_edit_date": 1538127364, "question_id": 52406743, "link": "https://stackoverflow.com/questions/52406743/c17-shouldnt-compilers-be-spotting-pass-by-reference-to-undefined-values", "title": "C++17 Shouldn&#39;t compilers be spotting pass-by-reference to undefined values?", "body": "<p>While making a small parser for a project, I kept getting Segmentation Faults... tracked it down to a transposition typo.</p>\n\n<p>This code sample is NOT the original code but reproduces the fault.</p>\n\n<p>I was surprised that none of my compilers spotted that the reference is uninitialized.</p>\n\n<p>Both GCC and Clang appear to compile it without warning or error.</p>\n\n<p>Shouldn't they be flagging the <em>REFERENCE TO</em> v2 as uninitialized?</p>\n\n<p>I'm relatively new to C++ and am learning C++17/20. \nBut I am curious as to why, in this case, the compilers aren't spotting that v2 is undefined but passing a reference to an undefined object anyhow.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nstruct A\n{\n    using vectorA = std::vector&lt;A&gt;;\n    int     foo;\n    vectorA vA;\n\n    A() = delete; // Implicit but let's be certain!\n\n    A(int f) noexcept\n        : foo {f},\n          vA  {}\n    {}\n};\n\nA::vectorA&amp; recurse(A::vectorA&amp; head, int tail) noexcept\n{head.emplace_back(tail); return head;}\n\nint main()\n{\n    // A tree of A's\n    A::vectorA v1 {};\n\n    // Fill it using recursive fn converting bars into foos,\n    // a bar at a time\n    int bar {666};\n    A::vectorA v2 {recurse(v2, bar)};\n    //                      ^\n    // typo of 'v2' instead of 'v1' still compiles!\n    // SHOULD, of course, read; A::vector_of_A v2 {recurse(v1, bar)};\n    //\n    // But v2 is... what exactly? At the point it is passed to recurse?\n    // It is uninitialized although it has an address and (likely) space       \n    // allocated to hold it.\n    // No warning?\n\n    std::cout &lt;&lt; \"Should this compile?\\n\";\n    std::cout &lt;&lt; \"Oops! Segmentation Fault Guaranteed!\\n\";\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qthread", "qmap", "qtconcurrent"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1537362557, "post_id": 52406599, "comment_id": 91756967, "body": "Manually spawn a thread for each element of the map?"}, {"owner": {"reputation": 14632, "user_id": 399908, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/56ea829e87b7772e36a35782dde9fb94?s=128&d=identicon&r=PG", "display_name": "Martin Hennings", "link": "https://stackoverflow.com/users/399908/martin-hennings"}, "edited": false, "score": 2, "creation_date": 1537365386, "post_id": 52406599, "comment_id": 91758827, "body": "The data structure <code>QMap&lt;QList&lt;QList&lt;float&gt;&gt;&gt;</code> is invalid. Your QMap is missing either a key or value type. Could you please provide a real-world example?"}, {"owner": {"reputation": 173, "user_id": 3599412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QZ7jt.jpg?s=128&g=1", "display_name": "Komgcn", "link": "https://stackoverflow.com/users/3599412/komgcn"}, "reply_to_user": {"reputation": 14632, "user_id": 399908, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/56ea829e87b7772e36a35782dde9fb94?s=128&d=identicon&r=PG", "display_name": "Martin Hennings", "link": "https://stackoverflow.com/users/399908/martin-hennings"}, "edited": false, "score": 0, "creation_date": 1537411719, "post_id": 52406599, "comment_id": 91777003, "body": "@MartinHennings sorry I mean <code>QMap&lt;int, QList&lt;QList&lt;float&gt;&gt;&gt;</code>"}, {"owner": {"reputation": 14632, "user_id": 399908, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/56ea829e87b7772e36a35782dde9fb94?s=128&d=identicon&r=PG", "display_name": "Martin Hennings", "link": "https://stackoverflow.com/users/399908/martin-hennings"}, "edited": false, "score": 0, "creation_date": 1537432504, "post_id": 52406599, "comment_id": 91784740, "body": "Looks like you need to refine your concurrent function. Please show us what you have (or what you think should work)."}], "owner": {"reputation": 173, "user_id": 3599412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QZ7jt.jpg?s=128&g=1", "display_name": "Komgcn", "link": "https://stackoverflow.com/users/3599412/komgcn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1537362411, "creation_date": 1537362411, "question_id": 52406599, "link": "https://stackoverflow.com/questions/52406599/qtconcurrent-map-with-qmap-as-input-sequence", "title": "QtConcurrent map with QMap as input sequence", "body": "<p>I have a data structure of <code>QMap&lt;QList&lt;QList&lt;float&gt;&gt;&gt;</code>. I want to compare every single float with a threshold value using multi-threading(as the amount of float is huge, 1000*800*800). However QtConcurrent::map only accepts QList or QVector as input sequence type, but I require the QMap.key() component in my map function to perform other stuff, is there any solution to it? Thank you.</p>\n"}, {"tags": ["c++", "arrays", "multidimensional-array"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1537362170, "post_id": 52406454, "comment_id": 91756748, "body": "Try changing <code>matrix1[i][j] = i + 5;</code> -&gt; <code>matrix1[i][0] = i + 5;</code>  <code>j</code> never gets reset and second time round the <code>i</code> loop <code>j</code> will be <code>MAX</code> when the above assignment happens."}, {"owner": {"reputation": 1487, "user_id": 4954108, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/35e4ac731500b39e1284406a3e90b765?s=128&d=identicon&r=PG&f=1", "display_name": "rtpax", "link": "https://stackoverflow.com/users/4954108/rtpax"}, "edited": false, "score": 0, "creation_date": 1537362212, "post_id": 52406454, "comment_id": 91756779, "body": "move j = 0 inside the <code>i</code> loop at the beginning"}], "answers": [{"tags": [], "owner": {"reputation": 1487, "user_id": 4954108, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/35e4ac731500b39e1284406a3e90b765?s=128&d=identicon&r=PG&f=1", "display_name": "rtpax", "link": "https://stackoverflow.com/users/4954108/rtpax"}, "is_accepted": false, "score": 2, "last_activity_date": 1537362351, "creation_date": 1537362351, "answer_id": 52406572, "question_id": 52406454, "link": "https://stackoverflow.com/questions/52406454/why-is-the-2nd-row-of-my-2d-array-taking-random-values-from-ram/52406572#52406572", "title": "Why is the 2nd row of my 2d array taking random values from RAM?", "body": "<p>the problem is that <code>j</code> is not reset in time, so at the line <code>matrix1[i][j] = i + 5;</code> j is past the end of the array. Move setting <code>j</code> to zero forward a line</p>\n\n<pre><code>for (i=0; i &lt; MAX; i++){\n    j = 0;\n\n    matrix1[i][j] = i + 5;\n\n    for (j=1; j &lt; MAX; j++){\n        matrix1[i][j] = matrix1[i][j-1] + 4;\n\n        cout &lt;&lt; matrix1[i][j] &lt;&lt; \" \";\n    }\n    cout &lt;&lt; endl;\n}\n</code></pre>\n\n<p>or change <code>matrix1[i][j] = i + 5;</code> to <code>matrix1[i][0] = i + 5;</code> as Richard Critten suggested</p>\n"}, {"tags": [], "owner": {"reputation": 563, "user_id": 7707765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01c4a31d9b1f46e17036955b67c3a340?s=128&d=identicon&r=PG&f=1", "display_name": "Ketzu", "link": "https://stackoverflow.com/users/7707765/ketzu"}, "is_accepted": false, "score": 0, "last_activity_date": 1537362403, "creation_date": 1537362403, "answer_id": 52406593, "question_id": 52406454, "link": "https://stackoverflow.com/questions/52406454/why-is-the-2nd-row-of-my-2d-array-taking-random-values-from-ram/52406593#52406593", "title": "Why is the 2nd row of my 2d array taking random values from RAM?", "body": "<p>Your reset of j should be inside the loop. In the second round (i=1), j starts as MAX.</p>\n\n<pre><code>for (i=0; i &lt; MAX; i++){\n  j=0;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 4, "last_activity_date": 1537363205, "last_edit_date": 1537363205, "creation_date": 1537362593, "answer_id": 52406643, "question_id": 52406454, "link": "https://stackoverflow.com/questions/52406454/why-is-the-2nd-row-of-my-2d-array-taking-random-values-from-ram/52406643#52406643", "title": "Why is the 2nd row of my 2d array taking random values from RAM?", "body": "<p><code>j</code> is <code>0</code> only for the first \"<code>i</code> iteration\"; in all the other cases it is <code>MAX</code>.<br>\nIn the cases where it is <code>MAX</code>, <code>matrix[i][j]</code> has undefined behaviour.</p>\n\n<p>The robust solution is to use your loop variables for looping and nothing else.<br>\nDeclare everything in as small a scope as possible.</p>\n\n<pre><code>for (int i = 0; i &lt; MAX; i++){\n    matrix1[i][0] = i + 5;\n    for (int j = 1; j &lt; MAX; j++){\n        matrix1[i][j] = matrix1[i][j-1] + 4;\n        cout &lt;&lt; matrix1[i][j] &lt;&lt; \" \";\n    }\n    cout &lt;&lt; endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10385785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6a7760d39ae14e4240a1abe8e3270df?s=128&d=identicon&r=PG&f=1", "display_name": "cpp poopoo", "link": "https://stackoverflow.com/users/10385785/cpp-poopoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1537365657, "creation_date": 1537361963, "last_edit_date": 1537365657, "question_id": 52406454, "link": "https://stackoverflow.com/questions/52406454/why-is-the-2nd-row-of-my-2d-array-taking-random-values-from-ram", "title": "Why is the 2nd row of my 2d array taking random values from RAM?", "body": "<p>so I'm working on this project for class, and I'm trying to assign values to a 2d array using a for loop, but I've run into a couple problems. Here's my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nconst int MAX = 10;\n\nint main()\n{\n\n    int matrix2[MAX][MAX];\n    int matrix1[MAX][MAX];\n\n\n      int i, j;\n\n      j=0;\n    for (i=0; i &lt; MAX; i++){\n\n        matrix1[i][j] = i + 5;\n\n        for (j=1; j &lt; MAX; j++){\n            matrix1[i][j] = matrix1[i][j-1] + 4;\n\n            cout &lt;&lt; matrix1[i][j] &lt;&lt; \" \";\n        }\n        cout &lt;&lt; endl;\n    }\n\n\n\n\n}\n</code></pre>\n\n<p>And this is what it outputs: </p>\n\n<pre><code>9 13 17 21 25 29 33 37 41 \n1422620036 1422620040 1422620044 1422620048 1422620052 1422620056 1422620060 1422620064 1422620068 \n10 14 18 22 26 30 34 38 42 \n11 15 19 23 27 31 35 39 43 \n12 16 20 24 28 32 36 40 44 \n13 17 21 25 29 33 37 41 45 \n14 18 22 26 30 34 38 42 46 \n15 19 23 27 31 35 39 43 47 \n16 20 24 28 32 36 40 44 48 \n17 21 25 29 33 37 41 45 49   \n</code></pre>\n\n<p>and this is the output I'm trying to get:</p>\n\n<pre><code>5   9   13  17  21  25  29  33  37  41  \n6   10  14  18  22  26  30  34  38  42  \n7   11  15  19  23  27  31  35  39  43  \n8   12  16  20  24  28  32  36  40  44  \n9   13  17  21  25  29  33  37  41  45  \n10  14  18  22  26  30  34  38  42  46  \n11  15  19  23  27  31  35  39  43  47  \n12  16  20  24  28  32  36  40  44  48  \n13  17  21  25  29  33  37  41  45  49  \n14  18  22  26  30  34  38  42  46  50\n</code></pre>\n\n<p>I'm asking if someone what I can do to fix the second row, and also why the first column isn't printing</p>\n"}, {"tags": ["c++", "visual-studio-code", "vscode-settings"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1537361950, "post_id": 52406428, "comment_id": 91756603, "body": "Use c++11 flag (or higher) ? Before, I doubt you actually want to use the old <code>auto</code>."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 4, "creation_date": 1537362336, "post_id": 52406428, "comment_id": 91756852, "body": "You remove it by enabling C++11. Consult the documentation for your compiler and for VSCode to learn how."}], "answers": [{"tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": true, "score": 3, "last_activity_date": 1537366055, "creation_date": 1537366055, "answer_id": 52407830, "question_id": 52406428, "link": "https://stackoverflow.com/questions/52406428/how-to-remove-the-c-11-extension-warning-in-the-vscode/52407830#52407830", "title": "How to remove the C++ 11 extension warning in the vsCode", "body": "<p>You will have to edit the <code>c_cpp_properties.json</code> file. See an example of it <a href=\"https://github.com/Microsoft/vscode-cpptools/blob/master/Documentation/LanguageServer/c_cpp_properties.json.md\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>In that file an option <code>cppStandard</code>  is listed. It has to be set to <code>c++11</code>. Then <code>auto</code> will be supported.</p>\n"}], "owner": {"reputation": 75, "user_id": 8961648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zu8P7.jpg?s=128&g=1", "display_name": "lazysheep", "link": "https://stackoverflow.com/users/8961648/lazysheep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2480, "favorite_count": 0, "accepted_answer_id": 52407830, "answer_count": 1, "score": 3, "last_activity_date": 1537366414, "creation_date": 1537361875, "last_edit_date": 1537366414, "question_id": 52406428, "link": "https://stackoverflow.com/questions/52406428/how-to-remove-the-c-11-extension-warning-in-the-vscode", "title": "How to remove the C++ 11 extension warning in the vsCode", "body": "<p>When i use the <code>auto</code> type, there just have a warning in my vscode</p>\n\n<pre><code>'auto' type specifier is a C++11 extension [-Wc++11-extensions] (14, 10)\n</code></pre>\n\n<p>So how can i remove this warning</p>\n"}, {"tags": ["c++", "syntax", "alias"], "answers": [{"tags": [], "owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "is_accepted": false, "score": 0, "last_activity_date": 1537361770, "last_edit_date": 1537361770, "creation_date": 1537361393, "answer_id": 52406274, "question_id": 52406124, "link": "https://stackoverflow.com/questions/52406124/creating-and-freeing-a-temporary-dummy-variable-in-c/52406274#52406274", "title": "Creating and freeing a temporary dummy variable in C++", "body": "<p>What about using a macro ?</p>\n\n<pre><code>#define Set(argument) _spinBox_distance-&gt;set##argument\n</code></pre>\n\n<p>and</p>\n\n<pre><code>Set(Minimum(0.0));\nSet(Maximum(10.0));\nSet(SingleStep(0.5));\nSet(Suffix(\" meters\"));\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>#define Set(Argument, Value) _spinBox_distance-&gt;set##argument(Value)\n\nSet(Minimum, 0.0);\nSet(Maximum, 10.0);\nSet(SingleStep, 0.5);\nSet(Suffix, \" meters\");\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1537363962, "post_id": 52407101, "comment_id": 91757889, "body": "Remove reference - it does nothing but harm in this case. Just <code>QDoubleSpinBox* x = _spinBox_distance;</code> or even simpler <code>auto x = _spinBox_distance;</code>"}, {"owner": {"reputation": 479, "user_id": 2672160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e74b2dfafeb529ea4b2d45fd7b7d763f?s=128&d=identicon&r=PG", "display_name": "LCsa", "link": "https://stackoverflow.com/users/2672160/lcsa"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1537364208, "post_id": 52407101, "comment_id": 91758049, "body": "Yes, you were too fast, I forgot to edit in the changes discussed in the comments section! :)"}], "tags": [], "owner": {"reputation": 479, "user_id": 2672160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e74b2dfafeb529ea4b2d45fd7b7d763f?s=128&d=identicon&r=PG", "display_name": "LCsa", "link": "https://stackoverflow.com/users/2672160/lcsa"}, "is_accepted": true, "score": 0, "last_activity_date": 1537364238, "last_edit_date": 1537364238, "creation_date": 1537363876, "answer_id": 52407101, "question_id": 52406124, "link": "https://stackoverflow.com/questions/52406124/creating-and-freeing-a-temporary-dummy-variable-in-c/52407101#52407101", "title": "Creating and freeing a temporary dummy variable in C++", "body": "<p>Collecting the fundamental conceptual thoughts about the problem in question from the comments section, I may post the syntactical/technical answer to the question. This approach, without a doubt, should not be chosen in any kind of \"complex\" situation (or rather not at all).</p>\n\n<ul>\n<li>bad coding style:\n\n<ul>\n<li>same name for different things</li>\n<li>name which doesn't tell you anything about the object</li>\n</ul></li>\n<li>move repeated code to dedicated functions, which...\n\n<ul>\n<li>may specialize on several ui types</li>\n<li>are template functions</li>\n<li>...</li>\n</ul></li>\n<li>in case of Qt: Use Qt Designer.</li>\n<li>...</li>\n</ul>\n\n<hr>\n\n<pre><code>{ auto x = _spinBox_distance;\nx-&gt;setMinimum(0.0);\n//...\n}\n{ auto x = _label_someOtherWidget;\n//...\n}\n</code></pre>\n\n<p>will do the trick.</p>\n"}, {"tags": [], "owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "is_accepted": false, "score": 0, "last_activity_date": 1537365494, "creation_date": 1537365494, "answer_id": 52407646, "question_id": 52406124, "link": "https://stackoverflow.com/questions/52406124/creating-and-freeing-a-temporary-dummy-variable-in-c/52407646#52407646", "title": "Creating and freeing a temporary dummy variable in C++", "body": "<p>I think your code looks fine as it is, I find it much more useful to have the code be easy to read/understand than it is to have the code be easy to write. Remember that you write the code once, then have to read it many times afterwards.<br>\nIn cases like this I make it easier to write with good old (and oft blamed for mistakes) copy and paste. Grab <code>_spinBox_distance-&gt;set</code> and just paste, finish the line, paste, finish the line, etc...</p>\n\n<p>If, however, you find yourself writing those 4 setters in a row over and over again, then put them in 1 function that takes in the 4 parameters.</p>\n\n<pre><code>void SetParameters(QDoubleSpinBox* spinBox_distance, double min, double max, double step, std::string suffix)\n{\n    //the setters\n}\n</code></pre>\n"}], "owner": {"reputation": 479, "user_id": 2672160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e74b2dfafeb529ea4b2d45fd7b7d763f?s=128&d=identicon&r=PG", "display_name": "LCsa", "link": "https://stackoverflow.com/users/2672160/lcsa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 483, "favorite_count": 0, "accepted_answer_id": 52407101, "answer_count": 3, "score": 0, "last_activity_date": 1537365494, "creation_date": 1537360906, "last_edit_date": 1537361797, "question_id": 52406124, "link": "https://stackoverflow.com/questions/52406124/creating-and-freeing-a-temporary-dummy-variable-in-c", "title": "Creating and freeing a temporary dummy variable in C++", "body": "<p>I'm using the Qt framework to create a ui for my business logic.\nThe class responsible for building the ui provides several methods which, step by step, initialize the ui elements, layout them, group them and, finally, format (i.e. <code>void MyUi::init3_formatUiElements()</code>) them.</p>\n\n<p>Naturally, some ui elements need numerous layout settings set, so this method might look like</p>\n\n<pre><code>void MyUi::init3_formatUiElements() {\n    _spinBox_distance-&gt;setMinimum(0.0);\n    _spinBox_distance-&gt;setMaximum(10.0);\n    _spinBox_distance-&gt;setSingleStep(0.5);\n    _spinBox_distance-&gt;setSuffix(\" meters\");\n    //...\n\n    //same for other widgets\n    return;\n}\n</code></pre>\n\n<p>Objects like <code>QDoubleSpinBox* _spinBox_distance</code> are member fields of the <code>MyUi</code> class.</p>\n\n<p>I would like to have a \"temporary alias\" for <code>_spinBox_distance</code>, in that the above method body simplifies to</p>\n\n<pre><code>void MyUi::init3_formatUiElements() {\n    //create alias x for _spinBox_distance here\n    x-&gt;setMinimum(0.0);\n    x-&gt;setMaximum(10.0);\n    x-&gt;setSingleStep(0.5);\n    x-&gt;setSuffix(\" meters\");\n    //...\n    //free alias x here\n\n    //same for other widgets: create alias x for next widget\n    //...\n    //free alias x here\n\n    return;\n}\n</code></pre>\n\n<p>This would speed up the typing process and would make code fragments more copy/paste-able, especially for ui elements of a similar type.</p>\n\n<p>Apart from scoping each block in curly braces</p>\n\n<pre><code>{ QDoubleSpinBox*&amp; x = _spinBox_distance;\nx-&gt;setMinimum(0.0);\n//...\n}\n{ QLabel*&amp; x = _label_someOtherWidget;\n//...\n}\n</code></pre>\n\n<p>is there an elegant way to achieve this?</p>\n\n<p>I tried the above syntax without scoping, but destructing <code>x</code> then of course leads to destruction of the underlying widget.</p>\n\n<p>Maybe</p>\n\n<pre><code>QDoubleSpinBox** x = new QDoubleSpinBox*;\nx = &amp;_spinBox_distance;\n(*x)-&gt;setMinimum(0.0);\n//...\ndelete x;\n</code></pre>\n\n<p>but that doesn't make things much more type-easy (three extra lines, pointers to pointers, <code>(*x)</code>)... :D</p>\n\n<p>EDIT: This one does not work as after <code>delete x</code>, can't be redeclared another type.</p>\n"}, {"tags": ["c++", "string", "c++11", "casting"], "comments": [{"owner": {"reputation": 1381, "user_id": 4381807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i4GHo.gif?s=128&g=1", "display_name": "Anty", "link": "https://stackoverflow.com/users/4381807/anty"}, "edited": false, "score": 2, "creation_date": 1537361406, "post_id": 52406117, "comment_id": 91756205, "body": "You need to use atoi or stoi to convert string to integer."}, {"owner": {"reputation": 13, "user_id": 9949609, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-igCWoU95MdM/AAAAAAAAAAI/AAAAAAAADCY/iG0vIFonj8w/photo.jpg?sz=128", "display_name": "Raghuvendra Kaushik", "link": "https://stackoverflow.com/users/9949609/raghuvendra-kaushik"}, "reply_to_user": {"reputation": 1381, "user_id": 4381807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i4GHo.gif?s=128&g=1", "display_name": "Anty", "link": "https://stackoverflow.com/users/4381807/anty"}, "edited": false, "score": 0, "creation_date": 1537362876, "post_id": 52406117, "comment_id": 91757171, "body": "can u explain how??"}, {"owner": {"reputation": 4917, "user_id": 2320961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AdwXN.png?s=128&g=1", "display_name": "Nic3500", "link": "https://stackoverflow.com/users/2320961/nic3500"}, "edited": false, "score": 0, "creation_date": 1537367764, "post_id": 52406117, "comment_id": 91760420, "body": "<a href=\"http://www.cplusplus.com/reference/cstdlib/atoi/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cstdlib/atoi</a> and <a href=\"http://www.cplusplus.com/reference/cstdlib/itoa/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cstdlib/itoa</a>"}], "answers": [{"tags": [], "owner": {"reputation": 342, "user_id": 6118552, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lUPSt7R6m70/AAAAAAAAAAI/AAAAAAAAAJg/6sdSMOXeiUE/photo.jpg?sz=128", "display_name": "Kuldip Puri Tejaswi", "link": "https://stackoverflow.com/users/6118552/kuldip-puri-tejaswi"}, "is_accepted": true, "score": 2, "last_activity_date": 1537367483, "creation_date": 1537367483, "answer_id": 52408284, "question_id": 52406117, "link": "https://stackoverflow.com/questions/52406117/invalid-cast-from-basic-string-to-int-type/52408284#52408284", "title": "invalid cast from basic string to int type", "body": "<p>You can't cast a string to integer.However,You can use stoi() to get the string numeric value and then assign it to an integer:</p>\n\n<pre><code>#include &lt;iostream&gt; \n#include &lt;string&gt; \nusing namespace std; \n\nint main() \n{ \n    string str1 = \"45\"; \n    string str2 = \"3.14159\"; \n    string str3 = \"31337 geek\"; \n\n    int myint1 = stoi(str1); \n    int myint2 = stoi(str2); \n    int myint3 = stoi(str3); \n\n    cout &lt;&lt; \"stoi(\\\"\" &lt;&lt; str1 &lt;&lt; \"\\\") is \"\n         &lt;&lt; myint1 &lt;&lt; '\\n'; \n    cout &lt;&lt; \"stoi(\\\"\" &lt;&lt; str2 &lt;&lt; \"\\\") is \"\n         &lt;&lt; myint2 &lt;&lt; '\\n'; \n    cout &lt;&lt; \"stoi(\\\"\" &lt;&lt; str3 &lt;&lt; \"\\\") is \"\n         &lt;&lt; myint3 &lt;&lt; '\\n'; \n\n    return 0; \n} \n\n\n\n\nOutput:\n\nstoi(\"45\") is 45\nstoi(\"3.14159\") is 3\nstoi(\"31337 geek\") is 31337\n</code></pre>\n\n<p>There are other methods too like using stringstream which you might want to look at.Hope it helps.</p>\n"}], "owner": {"reputation": 13, "user_id": 9949609, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-igCWoU95MdM/AAAAAAAAAAI/AAAAAAAADCY/iG0vIFonj8w/photo.jpg?sz=128", "display_name": "Raghuvendra Kaushik", "link": "https://stackoverflow.com/users/9949609/raghuvendra-kaushik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1632, "favorite_count": 0, "closed_date": 1537367913, "accepted_answer_id": 52408284, "answer_count": 1, "score": -1, "last_activity_date": 1537367779, "creation_date": 1537360878, "last_edit_date": 1537367779, "question_id": 52406117, "link": "https://stackoverflow.com/questions/52406117/invalid-cast-from-basic-string-to-int-type", "closed_reason": "Duplicate", "title": "invalid cast from basic string to int type", "body": "<p>I am getting error of type casting from basic string type to integer type and I do not know how to resolve it in the case of vector string and vector of integer type.</p>\n\n<blockquote>\n  <p>below given image shows the error </p>\n</blockquote>\n\n<pre><code>s1[j]+=int(magazine[i]);\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/e1ziH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/e1ziH.png\" alt=\"this is the error\"></a></p>\n"}, {"tags": ["c++", "unit-testing", "testing", "googletest", "divide-by-zero"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537360998, "post_id": 52406110, "comment_id": 91755974, "body": "It depends what <code>div</code> does. If it does an actual arithmetic division by zero you already have undefined behavior and cannot in any way meaningfully and safely detect it after the fact."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 8, "creation_date": 1537361008, "post_id": 52406110, "comment_id": 91755975, "body": "The obvious question is what does your <code>Calc</code> class do when it sees a division by zero? What ever it does is what you should test for. A sensible thing to do would be to make your <code>Calc</code> class throw an exception, and then make your unit test check that the expected exception has been thrown. Use the EXPECT_THROW macro for that."}, {"owner": {"reputation": 99, "user_id": 10325998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b4adc02623343a1a926b7cb999a23ca?s=128&d=identicon&r=PG&f=1", "display_name": "tinkerbell", "link": "https://stackoverflow.com/users/10325998/tinkerbell"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1537361369, "post_id": 52406110, "comment_id": 91756175, "body": "at the moment my calc class doesn&#39;t have any handling for a division by zero, because I thought I could test it.  @john but your solution seems very plausible, thank you!"}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1537363131, "post_id": 52406110, "comment_id": 91757321, "body": "Or  ASSERT_DEATH if you expect and intend it to crash your program :-)"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1537363906, "post_id": 52406110, "comment_id": 91757847, "body": "If you want your code to detect a divide by zero and <code>assert</code>, then Google has an EXPECT_FATAL_FAILURE macro to verify that the assert fires as expected."}], "answers": [{"tags": [], "owner": {"reputation": 563, "user_id": 7707765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01c4a31d9b1f46e17036955b67c3a340?s=128&d=identicon&r=PG&f=1", "display_name": "Ketzu", "link": "https://stackoverflow.com/users/7707765/ketzu"}, "is_accepted": false, "score": 0, "last_activity_date": 1537362933, "creation_date": 1537362933, "answer_id": 52406755, "question_id": 52406110, "link": "https://stackoverflow.com/questions/52406110/c-google-test-division-by-zero/52406755#52406755", "title": "c++ google test division by zero", "body": "<p>Your comment </p>\n\n<blockquote>\n  <p>I thought I could test it</p>\n</blockquote>\n\n<p>suggest a misunderstanding about tests.</p>\n\n<p>Your tests only test if the behaviour of your classes is the way you want it to be. <strong>Tests are in no way error handling mechanisms!</strong></p>\n\n<p>If one of your functions is creating an application crash with certain parameters, that is not something your tests should mark as correct.</p>\n\n<p>For how to solve it (exception and suitable macro) see john's comment.</p>\n"}, {"tags": [], "owner": {"reputation": 5012, "user_id": 2416647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f471b80868ae9c93d0903127ed27e2f9?s=128&d=identicon&r=PG", "display_name": "schorsch312", "link": "https://stackoverflow.com/users/2416647/schorsch312"}, "is_accepted": false, "score": 2, "last_activity_date": 1537363492, "creation_date": 1537363492, "answer_id": 52406951, "question_id": 52406110, "link": "https://stackoverflow.com/questions/52406110/c-google-test-division-by-zero/52406951#52406951", "title": "c++ google test division by zero", "body": "<p>I don't agree with @Ketzu. You have an expectation how calculator should behave, when dividing by zero.</p>\n\n<pre><code>EXPECT_EQ(, calculate.div(27,0));\n</code></pre>\n\n<p>This expectation is perhaps not well formulated in this test.</p>\n\n<p>If <code>calculate.div(27,0)</code> throws an exception, than you can catch this exception and your test fails, if it is not thrown. You can write something like this</p>\n\n<pre><code>TEST(ExceptionTest, ExpectThrowsSpecificException) {\n    try {\n        calculate.div(27,0);\n        FAIL() &lt;&lt; \"calculate.div(27,0) should throw an error, since a     division by zero is not valid\\n\";\n    } catch (TestException&amp; exception) {\n        EXPECT_THAT(std::string(exception.what()), Eq(\"VALID_SETTING\"));\n        EXPECT_THAT(exception.errorCode, Eq(20));\n    }\n}\n</code></pre>\n\n<p>See <a href=\"https://github.com/google/googletest/issues/952\" rel=\"nofollow noreferrer\">here</a> for a detailed discussion.</p>\n\n<p>If no exception is thrown, how do you detect the abnormal usage of <code>calculate.div</code>? </p>\n"}, {"tags": [], "owner": {"reputation": 1705, "user_id": 9103250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3c613d7186c7314ee818673ea4c79fd?s=128&d=identicon&r=PG&f=1", "display_name": "CharonX", "link": "https://stackoverflow.com/users/9103250/charonx"}, "is_accepted": false, "score": 1, "last_activity_date": 1537431447, "creation_date": 1537431447, "answer_id": 52420588, "question_id": 52406110, "link": "https://stackoverflow.com/questions/52406110/c-google-test-division-by-zero/52420588#52420588", "title": "c++ google test division by zero", "body": "<blockquote>\n  <p>Is there any possibility to test it? I mean, what should I write as test result? Is there anything like \"ERROR\"? Or do I have to use exceptions?</p>\n</blockquote>\n\n<p>This is a core question you need to ask (and answer) <strong>yourself</strong> - how should your calculator (in this case the function <code>Calc::div()</code>) behave if an <strong>invalid</strong> input is given. There are several ways it can behave:</p>\n\n<ol>\n<li><strong>Crash</strong>. This (usually) is the behavior you get if you divide by zero in C++ (technically the behaviour is undefined, so the compiler may do <em>ANYTHING</em>. Fortunately (for us) most compilers agree that terminating the entire process is the \"correct\" <em>ANYTHING</em> to do here)</li>\n<li><strong>Return some value</strong>. You could return (in the case of division by zero) <a href=\"https://en.cppreference.com/w/cpp/types/numeric_limits/infinity\" rel=\"nofollow noreferrer\">infinity</a>. Or possibly <a href=\"http://www.cplusplus.com/reference/cmath/nan-function/\" rel=\"nofollow noreferrer\">NaN</a>. Or any other value that makes sense in your context. This approach however mixes the <strong>result</strong> with <strong>error handling</strong>, which is discouraged nowadays (as it would force you to check each and every invokation of the function for \"error results\" - and if you forget a single check you get nasty bugs as you continue operations with invalid/bogus values.)</li>\n<li><strong>Throw an exception</strong>. You can throw an exception, signalling that something went wrong. This is the usually used method nowadays (except for extremly performance sensitve stuff, where every microsecond counts), as it neatly separates the normal path (return result value) from the error path (exception) (and if you forget to handle the exception you will notice <strong>at once</strong> instead of using bad value like in option 2)</li>\n</ol>\n\n<p>Once you have decided on what your behaviour should be you <strong>can</strong> test it.</p>\n\n<p>For <strong>Option 1</strong> gtest provides <a href=\"https://github.com/google/googletest/blob/master/googletest/docs/advanced.md#death-tests\" rel=\"nofollow noreferrer\">death tests</a>.<br>\nFor <strong>Option 2</strong> you can simply validate that you get your expected result.<br>\nFor <strong>Option 3</strong> you can catch and evalute the exception, either via <a href=\"https://github.com/google/googletest/blob/master/googletest/docs/advanced.md#exception-assertions\" rel=\"nofollow noreferrer\">exception assertions</a> or a homemade <code>try { } catch { }</code> with a <code>FAIL()</code> at the end of the <code>try</code> block (so you notice if the function fails to throw an exception when you expect it to)</p>\n"}], "owner": {"reputation": 99, "user_id": 10325998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b4adc02623343a1a926b7cb999a23ca?s=128&d=identicon&r=PG&f=1", "display_name": "tinkerbell", "link": "https://stackoverflow.com/users/10325998/tinkerbell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 813, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1537611479, "creation_date": 1537360852, "last_edit_date": 1537611479, "question_id": 52406110, "link": "https://stackoverflow.com/questions/52406110/c-google-test-division-by-zero", "title": "c++ google test division by zero", "body": "<p>I'm learning to write unit tests, and have started with an easy \"Calculator\"-class that I wanted to test. \nI figured out how to use the EXPECT/ASSERT functions, and what test cases etc. are, but I got a problem when I wanted to test the division by zero. Is there any possibility to test it? I mean, what should I write as test result? Is there anything like \"ERROR\"? Or do I have to use exceptions?</p>\n\n<p>These are my tests so far:</p>\n\n<pre><code>TEST(TestCalc, TestPos) \n{\n    Calc calculate;\n    EXPECT_EQ(10.0, calculate.add(5.0, 5.0));\n    EXPECT_EQ(9, calculate.mul(3, 3));\n    EXPECT_EQ(9, calculate.div(27, 3));\n    EXPECT_EQ(9, calculate.sub(12, 3));\n}\nTEST(TestCalc, TestNeg)\n{\n    Calc calculate;\n    EXPECT_EQ(-1.0, calculate.add(5.0, -6.0));\n    EXPECT_EQ(-9, calculate.mul(3, -3));\n    EXPECT_EQ(-9, calculate.div(27, -3));\n    EXPECT_EQ(15, calculate.sub(12, -3));\n}\n\nTEST(TestCalc, TestZero)\n{\n    Calc calculate;\n    EXPECT_EQ(10.0, calculate.add(5.0, 0));\n    EXPECT_EQ(9, calculate.mul(3, 0));\n    EXPECT_EQ(, calculate.div(27,0));\n    EXPECT_EQ(12, calculate.sub(12,0));\n}\n</code></pre>\n"}, {"tags": ["c++", "oop", "downcast", "upcasting"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537360763, "post_id": 52406047, "comment_id": 91755843, "body": "You don&#39;t need any <code>&amp;</code> operators in the second case. You are already dealing with pointers."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1537360820, "post_id": 52406047, "comment_id": 91755875, "body": "In the first case, assigning <code>d</code> to <code>b</code> will cause <a href=\"https://stackoverflow.com/questions/274626/what-is-object-slicing\">object slicing</a> and assigning from <code>b</code> to <code>d</code> doesn&#39;t make sense."}, {"owner": {"reputation": 1008, "user_id": 5562737, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/1096635253687967/picture?type=large", "display_name": "Amine", "link": "https://stackoverflow.com/users/5562737/amine"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537361012, "post_id": 52406047, "comment_id": 91755977, "body": "Haven&#39;t used C++ since 2 years, trying to refresh my memory. If you can downcast and upcast in the second case, how can you do it in the first case? (Some friend told me we need to overload the = operator?)"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537361067, "post_id": 52406047, "comment_id": 91756000, "body": "You can&#39;t with value semantics (the first case). A <code>base</code> can never represent a <code>derived</code> (maybe for a limited number of cases of <code>base</code> designed specifically for it). Only a <code>base</code> <i>pointer</i> or <i>reference</i> can refer to a <code>derived</code>."}, {"owner": {"reputation": 1008, "user_id": 5562737, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/1096635253687967/picture?type=large", "display_name": "Amine", "link": "https://stackoverflow.com/users/5562737/amine"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537361140, "post_id": 52406047, "comment_id": 91756034, "body": "So we need to make a copy constructor?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537361186, "post_id": 52406047, "comment_id": 91756065, "body": "Sorry, I don&#39;t understand how your last comment relates to the questions. Could you please elaborate or rephrase?"}, {"owner": {"reputation": 1008, "user_id": 5562737, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/1096635253687967/picture?type=large", "display_name": "Amine", "link": "https://stackoverflow.com/users/5562737/amine"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537361511, "post_id": 52406047, "comment_id": 91756268, "body": "The way I understand, is what you said in your previous comment. You can only represent a derived class using a base class pointer or reference, that&#39;s why downcasting and upcasting are allowed when we declare the objects of the classes as pointers (I think we called them dynamic objects),"}, {"owner": {"reputation": 1008, "user_id": 5562737, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/1096635253687967/picture?type=large", "display_name": "Amine", "link": "https://stackoverflow.com/users/5562737/amine"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537361515, "post_id": 52406047, "comment_id": 91756271, "body": "but since the first case aren&#39;t pointers (technically) (we called them static objects), we can&#39;t do any upcasting or downcasting, but in order to do so, we could use a copy constructor that creates a copy of the same object but with a pointer to that object, this way we can represent derived as a base. That&#39;s how I remember it, I might be mistaken"}, {"owner": {"reputation": 1008, "user_id": 5562737, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/1096635253687967/picture?type=large", "display_name": "Amine", "link": "https://stackoverflow.com/users/5562737/amine"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537361551, "post_id": 52406047, "comment_id": 91756304, "body": "A friend also told me we can make the assignment by overloading the &quot;=&quot; operator, which I don&#39;t quite understand how yet."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 1008, "user_id": 5562737, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/1096635253687967/picture?type=large", "display_name": "Amine", "link": "https://stackoverflow.com/users/5562737/amine"}, "edited": false, "score": 0, "creation_date": 1537361556, "post_id": 52406047, "comment_id": 91756308, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/180349/discussion-between-francois-andrieux-and-amine\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1008, "user_id": 5562737, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/1096635253687967/picture?type=large", "display_name": "Amine", "link": "https://stackoverflow.com/users/5562737/amine"}, "edited": false, "score": 0, "creation_date": 1537365935, "post_id": 52407087, "comment_id": 91759201, "body": "This problem is actually stated in an admission exam to a master&#39;s degree. The question says that considering <b>static</b> objects of base and derived, what can you say regarding the assignment d = b, with the possible answers being: 1. impossible, 2. can be done using a downcast d = (Derived) b, 3. can be done by overloading the = operator."}, {"owner": {"reputation": 563, "user_id": 7707765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01c4a31d9b1f46e17036955b67c3a340?s=128&d=identicon&r=PG&f=1", "display_name": "Ketzu", "link": "https://stackoverflow.com/users/7707765/ketzu"}, "reply_to_user": {"reputation": 1008, "user_id": 5562737, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/1096635253687967/picture?type=large", "display_name": "Amine", "link": "https://stackoverflow.com/users/5562737/amine"}, "edited": false, "score": 0, "creation_date": 1537367251, "post_id": 52407087, "comment_id": 91760102, "body": "As you can overload the = operator, you can of course implement it as <code>Derived::Derived operator=(Base obj)</code> and have a statement <code>d = b</code> be valid and compile. <code>d = (Derived)b</code> should only compile if there exists a constructor <code>Derived::Derived(Base obj)</code>. Making the assignment <code>d=b</code> compile is by no means impossible."}], "tags": [], "owner": {"reputation": 563, "user_id": 7707765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01c4a31d9b1f46e17036955b67c3a340?s=128&d=identicon&r=PG&f=1", "display_name": "Ketzu", "link": "https://stackoverflow.com/users/7707765/ketzu"}, "is_accepted": false, "score": 1, "last_activity_date": 1537363827, "creation_date": 1537363827, "answer_id": 52407087, "question_id": 52406047, "link": "https://stackoverflow.com/questions/52406047/assigning-base-class-to-derived-and-vice-versa-in-c-and-difference-between-sta/52407087#52407087", "title": "Assigning base class to derived and vice versa in C++ and difference between static and dynamic objects", "body": "<p>Parts of this answer is lifted from <a href=\"https://stackoverflow.com/questions/11718070/dynamic-binding-in-c-on-copied-object\">this stack overflow question</a>.</p>\n\n<p>Pointer and references allow for late binding/runtime polymorphism, while objects will cause object slicing (see @Fran\u00e7ois Andrieux Comment).</p>\n\n<p>What does this object slicing result in: If you use the objects directly you will lose information and maybe get the wrong methods called, even if you use virtual methods.</p>\n\n<p>Here is an example:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass A\n   {\n      public : virtual  void print(void)\n           {\n              cout&lt;&lt; \"A::print()\"&lt;&lt;endl;\n           }\n    };\n class B : public A\n    {\n      public : virtual void print(void)\n           {\n               cout&lt;&lt;\"B::print()\"&lt;&lt;endl;\n           }\n    };\n\nint main(void)\n{\n    A a;\n    B b;\n    A&amp; ref = b;\n\n    a=b;\n    a.print();\n    ref.print();\n    return 0;\n}\n</code></pre>\n\n<p>Class B derives from A. <code>A a = b;</code> will lead to Class As print method being called, while using a reference (or pointer) would lead to Class Bs method being called (correct class is evaluated at runtime).</p>\n\n<p>Your comments \"how to make this\" indicate to me that you are trying to solve a concrete problem. Could you state your exact problem instead of this? Making this work might not be the correct solution to your problem.</p>\n\n<p>Concerning downcasting: As far as I know, you should only ever downcast if you have a base class pointer to a derived class object and you need to perform derived class methods on this and then the answer is dynamic_cast.</p>\n"}], "owner": {"reputation": 1008, "user_id": 5562737, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/1096635253687967/picture?type=large", "display_name": "Amine", "link": "https://stackoverflow.com/users/5562737/amine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1537363827, "creation_date": 1537360632, "question_id": 52406047, "link": "https://stackoverflow.com/questions/52406047/assigning-base-class-to-derived-and-vice-versa-in-c-and-difference-between-sta", "title": "Assigning base class to derived and vice versa in C++ and difference between static and dynamic objects", "body": "<p>Considering</p>\n\n<pre><code>class base { }\n</code></pre>\n\n<p>And</p>\n\n<pre><code>class derived: public base {}\n</code></pre>\n\n<p>What's the difference between:</p>\n\n<p><strong>FIRST CASE:</strong></p>\n\n<pre><code>int main() {\n  base b;\n  derived d;\n}\n</code></pre>\n\n<p>And</p>\n\n<p><strong>SECOND CASE:</strong></p>\n\n<pre><code>int main() {\n  base *b;\n  derived *d;\n}\n</code></pre>\n\n<p>And if we downcast and upcast in the second case like this:</p>\n\n<pre><code>  // upcast - implicit type cast allowed\n  Base *b= &amp;d; \n\n  // downcast - explicit type case required \n  Derived *d=  (Dervied *) &amp;b;\n</code></pre>\n\n<p>How can we do it in the first case?</p>\n"}, {"tags": ["c++", "ios", "objective-c", "xcode"], "answers": [{"tags": [], "owner": {"reputation": 398, "user_id": 8330474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b4e5a7cf16cf7556971f6198496fa95?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Ferraiolo", "link": "https://stackoverflow.com/users/8330474/louis-ferraiolo"}, "is_accepted": true, "score": 0, "last_activity_date": 1545229008, "last_edit_date": 1545229008, "creation_date": 1545228622, "answer_id": 53853009, "question_id": 52405979, "link": "https://stackoverflow.com/questions/52405979/since-updating-to-xcode-10-file-not-found-error-deriveddata/53853009#53853009", "title": "Since updating to Xcode 10 file not found error / deriveddata", "body": "<p>I have managed to successfully compile the project with the \"Legacy Build System\" (by activating it under File->Project/Workspace Settings), so this confirms that this is a problem with the \"New Build System\" which is enabled by default in Xcode 10</p>\n\n<p><strong>EDIT:</strong> Make sure to remove all folders found in DerivedData, to do this go to Xcode->Preferences->Locations and open the external link to DerivedData folder. Then go back into Xcode and clean build and rebuild</p>\n"}], "owner": {"reputation": 398, "user_id": 8330474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b4e5a7cf16cf7556971f6198496fa95?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Ferraiolo", "link": "https://stackoverflow.com/users/8330474/louis-ferraiolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "accepted_answer_id": 53853009, "answer_count": 1, "score": 3, "last_activity_date": 1545279370, "creation_date": 1537360405, "last_edit_date": 1545279370, "question_id": 52405979, "link": "https://stackoverflow.com/questions/52405979/since-updating-to-xcode-10-file-not-found-error-deriveddata", "title": "Since updating to Xcode 10 file not found error / deriveddata", "body": "<p>When trying to compile my project all previously working classes are flagging up as having errors. One of the errors is 'string not found' when in the class it is included.</p>\n\n<pre class=\"lang-objc prettyprint-override\"><code>#include &lt;string&gt;\n</code></pre>\n\n<p>I have tried changing the 'Compile source as' in the Build settings to Objective-C++ but this hasn't helped</p>\n\n<p>Also gives an error when compiling about derived data.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1537360306, "post_id": 52405926, "comment_id": 91755543, "body": "Just write a single <code>operator==</code> where both operands are <code>const</code> references. A <code>const</code> reference can refer to a non-<code>const</code> instance."}], "answers": [{"comments": [{"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1537364298, "post_id": 52405951, "comment_id": 91758107, "body": "Arguably, it&#39;s incorrect to provide a non-<code>const</code> version, because <code>operator==</code> should never modify its operands."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 4, "last_activity_date": 1537360332, "creation_date": 1537360332, "answer_id": 52405951, "question_id": 52405926, "link": "https://stackoverflow.com/questions/52405926/c-how-to-use-const-objects-and-non-const-objects-in-comparison/52405951#52405951", "title": "C++, How to use const Objects and non-const Objects in comparison?", "body": "<p>If your overload takes the objects by <code>const</code> reference, then a non-const object will bind automatically to it.</p>\n\n<p>In other words, there's no need to provide a non-<code>const</code> version.</p>\n"}], "owner": {"reputation": 13, "user_id": 3616987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c2f29e088137e42ea5453278ba3612d?s=128&d=identicon&r=PG&f=1", "display_name": "user3616987", "link": "https://stackoverflow.com/users/3616987/user3616987"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1537360332, "creation_date": 1537360255, "question_id": 52405926, "link": "https://stackoverflow.com/questions/52405926/c-how-to-use-const-objects-and-non-const-objects-in-comparison", "title": "C++, How to use const Objects and non-const Objects in comparison?", "body": "<p>I overloaded the operator== to compare two objects of the same class and it works perfectly. </p>\n\n<p>But if want to use the comparison for const objects I can not compile. </p>\n\n<p>I know that I can just write an additional operator== with a const parameter, but is there a way to use the same method for const and non-const objects?</p>\n"}, {"tags": ["c++", "qt", "qtestlib"], "answers": [{"tags": [], "owner": {"reputation": 4096, "user_id": 3601321, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/02ba00dbea1724976753357b4470760b?s=128&d=identicon&r=PG&f=1", "display_name": "Corristo", "link": "https://stackoverflow.com/users/3601321/corristo"}, "is_accepted": true, "score": 1, "last_activity_date": 1537364997, "last_edit_date": 1537364997, "creation_date": 1537364263, "answer_id": 52407232, "question_id": 52405841, "link": "https://stackoverflow.com/questions/52405841/qobjectdeletelater-is-not-called-as-expected-in-my-qt-test/52407232#52407232", "title": "QObject::deleteLater is not called as expected in my Qt Test", "body": "<p>Yes, you're correct. Since the <code>QSignalSpy</code> and <code>Foo</code> live in the same thread, the signal <code>mySignal</code> is not delivered through the event loop but via a direct connection. Therefore, the event loop stops immediately after the signal is emitted in <code>myslot</code>. However, since <code>myslot</code> was called by the same event loop, control only returns to it when <code>myslot</code> returns. So by the time the event loop could potentially perform the cleanup requested by <code>deleteLater</code> it has already been stopped. </p>\n\n<p>If you want to test that <code>m_obj</code> is cleaned up correctly you could instead create an additional <code>QSignalSpy</code> and connect it to the <code>QObject::destroyed</code> signal that every <code>QObject</code> emits when it gets destroyed.</p>\n\n<p>You would, however, need to pass in <code>m_obj</code> as a dependency to <code>Foo</code> either in the constructor or through a setter instead of constructing it in <code>Foo</code> itself.</p>\n\n<p>The test could then look something like this:</p>\n\n<pre><code>void test1()\n{\n    auto obj = new Obj{}; // will be assigned to `Foo::m_obj`\n    Foo foo{obj};\n\n    QSignalSpy deletion_spy(obj, &amp;QObject::destroyed);\n    QSignalSpy mysignal_spy(&amp;Foo, &amp;Foo::mySignal);\n\n    QVERIFY(deletion_spy.wait(10000));\n    QCOMPARE(deletion_spy.count(), 1); // verify that `obj` got deleted\n\n    QCOMPARE(mysignal_spy.count(), 1);\n    QList&lt;QVariant&gt; sig = spy.takeFirst();\n    Foo::Status status = qvariant_cast&lt;Foo::Status&gt;(sig.at(0));\n\n    QVERIFY2(status == Foo:Ok, \"Failed\");\n}\n</code></pre>\n"}], "owner": {"reputation": 1544, "user_id": 6475652, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/8d783a89da27c7d36c0935fc2af7b38e?s=128&d=identicon&r=PG&f=1", "display_name": "Fryz", "link": "https://stackoverflow.com/users/6475652/fryz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "accepted_answer_id": 52407232, "answer_count": 1, "score": 0, "last_activity_date": 1537364997, "creation_date": 1537359966, "question_id": 52405841, "link": "https://stackoverflow.com/questions/52405841/qobjectdeletelater-is-not-called-as-expected-in-my-qt-test", "title": "QObject::deleteLater is not called as expected in my Qt Test", "body": "<p>I am testing a shared lib that contains a call to <code>deleteLater</code> internally.\nThere is no event loop running inside the library so a requirement for the application is to have a event loop running, so that all memory is properly released.</p>\n\n<p>But in the test, the object dtor is not called as expected.</p>\n\n<p>For example : </p>\n\n<pre><code>void test1() \n{\n    Foo foo;\n    QSignalSpy spy(&amp;foo, SIGNAL(mySignal(Status)));\n\n    foo.do(); // should trigger mySignal \n\n    QVERIFY(spy.wait(10000)); // event loop started for 10 s max\n    QCOMPARE(spy.count(), 1);\n    QList&lt;QVariant&gt; sig = spy.takeFirst();\n    Foo::Status status = qvariant_cast&lt;Foo::Status&gt;(sig.at(0));\n\n    QVERIFY2(status == Foo:Ok, \"Failed\");\n}\n</code></pre>\n\n<p>The class <code>Foo</code> looks like this :</p>\n\n<pre><code>class Foo : public QObject\n{\nQ_OBJECT\n\n// ... methods, signals, slots..\n\nprivate slots:\n // this call is asynchronous (depends on a network reply)\n void myslot() {\n     //..\n     m_obj-&gt;deleteLater();\n     emit mySignal(Foo:Ok);\n  }\n};\n</code></pre>\n\n<p>I have added some debug print in the dtor of m_obj and it is not called when the test1 is executed.</p>\n\n<p>However, if i execute the test twice (by adding a test2 slot that is copy of test1), then it is called once.</p>\n\n<p>My understanding is that when the signal is emitted it stops the spy event loop and then <code>deleteLater</code> is never called. \nAnd after that the second event loop starts  in test2, it process the pending deletion from the previous test1. </p>\n\n<p>Is it correct ?\nThank you.</p>\n"}, {"tags": ["c#", "c++", "arrays", "dll", "marshalling"], "comments": [{"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1537359752, "post_id": 52405679, "comment_id": 91755239, "body": "You must allocate the size of the array before calling the c++ code and pass the size of the array of use Windows Allocate to allocate the memory.  When you call a method the data is put on the stack and the stack is not valid after returning from the method.  You can use Windows allocate in c++ and then return the pointer to the allocate memory."}, {"owner": {"reputation": 326, "user_id": 7457695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b95b64c02a46f913768af384d4414bfd?s=128&d=identicon&r=PG&f=1", "display_name": "agrom", "link": "https://stackoverflow.com/users/7457695/agrom"}, "reply_to_user": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1537360053, "post_id": 52405679, "comment_id": 91755413, "body": "Maybe I dont understand you correctly, but how can I allocate the size of the array before calling the C++ code, when it is the C++ that desides the size of the array?"}, {"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1537362064, "post_id": 52405679, "comment_id": 91756671, "body": "Good question.  Call c++ twice.  First time return size.  Or make size large enough to handle any case.  Another option is to get 100 rows at a time and return value will return actual number of row returned.  So if you get less than 100 than you know it is the end of data.   That is why some people use the Windows Allocate and then return the allocated buffer."}, {"owner": {"reputation": 326, "user_id": 7457695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b95b64c02a46f913768af384d4414bfd?s=128&d=identicon&r=PG&f=1", "display_name": "agrom", "link": "https://stackoverflow.com/users/7457695/agrom"}, "reply_to_user": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1537366854, "post_id": 52405679, "comment_id": 91759813, "body": "Thanks for the input. I will try to make size large enough since it will not be a option to call it twice. Do you have an example of how to use Windows Allocate for my example? I have been looking into it, but I cant seen to get it to work for my example of 2D arrays."}, {"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 1, "creation_date": 1537372643, "post_id": 52405679, "comment_id": 91763441, "body": "Only c++ would use Windows Allocate.  In c# you use Marshal.AllocHGlobal"}, {"owner": {"reputation": 326, "user_id": 7457695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b95b64c02a46f913768af384d4414bfd?s=128&d=identicon&r=PG&f=1", "display_name": "agrom", "link": "https://stackoverflow.com/users/7457695/agrom"}, "reply_to_user": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1537440561, "post_id": 52405679, "comment_id": 91789597, "body": "Can you please show me a working example of this for 2D array? Got it working on a 1D array with Windows Allocate and Marshaling, but same problem now, cant get it to work for 2D array :/"}, {"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 1, "creation_date": 1537448181, "post_id": 52405679, "comment_id": 91794261, "body": "Best way is to create a structure with the array inside the structure.  Then you can use Marshal.PtrToStructure.  The start of the array and the start of the structure will be the same memory address.  So you won&#39;t have a casting issue."}], "owner": {"reputation": 326, "user_id": 7457695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b95b64c02a46f913768af384d4414bfd?s=128&d=identicon&r=PG&f=1", "display_name": "agrom", "link": "https://stackoverflow.com/users/7457695/agrom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 684, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1537359389, "creation_date": 1537359389, "question_id": 52405679, "link": "https://stackoverflow.com/questions/52405679/passing-a-2d-array-matrix-from-c-dll-to-c", "title": "Passing a 2D array/matrix from C++ dll to C#", "body": "<p>I would like to pass a 2D array/matrix from a C++ dll to a C# program.\nThe number of rows is dynamic, while the number of columns is always 5. </p>\n\n<p>I tried this with a 1D array first, and this works:</p>\n\n<p>In C++:</p>\n\n<pre><code>extern \"C\" __declspec(dllexport) int *test()\n{\n    int Dynamically_changing_rows = rand() &amp; 10 + 5;\n    int * oneD_array= new int[Dynamically_changing_rows];\n    for (int i =0; i &lt; Dynamically_changing_rows; i++)\n    {\n        oneD_array[i] = i;\n    }\n\n    return oneD_array;\n}\n</code></pre>\n\n<p>In C#: </p>\n\n<pre><code>[DllImport(\"myDll.dll\"), CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]\npublic static extern IntPtr test();\n\nstatic void Main()\n{\n    IntPtr ptr = test();\n    int arrayLength = Marshal.ReadInt32(Ptr);\n    int[] result = new int[arrayLength];\n    Marshal.Copy(ptr, result, 0, arrayLength);\n    //Now I have the array in result array. \n\n    ReleaseMemory(ptr); // function to delete pointer in C++.\n}\n</code></pre>\n\n<p>The problem comes when I want to do something similar with a 2D array. </p>\n\n<p>In C++: </p>\n\n<pre><code>extern \"C\" __declspec(dllexport) int **test()\n{\n    int **TwoD_array;\n    int Dynamically_changing_rows = rand() &amp; 10 + 5;\n    TwoD_array = new int*[Dynamically_changing_rows +1];\n    int columns = 5;\n\n    // Adding some array values:\n    for (int i = 0; i &lt; (Dynamically_changing_rows +1); i++)\n    {\n        TwoD_array[i] = new int[columns];\n        for (int j = 0; j &lt;= columns; j++)\n        {\n            TwoD_array[i][j] = i*j;\n        }\n    }\n    // Save the number of rows as the first value: \n    TwoD_array[0][0] = Dynamically_changing_rows; \n}\n</code></pre>\n\n<p>In C#:</p>\n\n<pre><code>[DllImport(\"myDll.dll\"), CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]\npublic static extern IntPtr test();\n\nstatic void main()\n{\n    intPtr ptr = test();\n    IntPtr ptrToPtr = Marshal.ReadIntPtr(ptr);\n</code></pre>\n\n<p>This gives me the correct length of the array (pointer to the first value): </p>\n\n<pre><code>    int arrayLength= Marshal.ReadIntPtr(ptrToPtr); \n</code></pre>\n\n<p>This doesn't work: </p>\n\n<pre><code>    int [,] result2D = new int[arrayLength, 5];\n    Marshal.Copy(ptrToPtr, result2D, 0,arrayLength);\n</code></pre>\n\n<p>Because Marshal.Copy description says: \"<em>copies data from a one dimensional array..</em>\"</p>\n\n<p>How can I get the 2D array into <code>result2D[arrayLength, 5]</code> in C#?</p>\n\n<p>I read the <a href=\"https://docs.microsoft.com/en-us/dotnet/framework/interop/default-marshaling-for-arrays\" rel=\"nofollow noreferrer\">documentation</a> on marshaling arrays, but I dident get any wiser on dynamically changing arrays. </p>\n\n<p>Any help is much appreciated! </p>\n"}, {"tags": ["c++", "string", "function", "vector"], "comments": [{"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 2, "creation_date": 1537359434, "post_id": 52405656, "comment_id": 91755062, "body": "What&#39;s python tag doing here?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1537359587, "post_id": 52405656, "comment_id": 91755157, "body": "There&#39;s a tool on your computer called a &quot;debugger&quot;. Using this tool you can run your program one line at a time and examine the values of all variables. This debugger will tell you exactly why your function returns garbage. The reason is quite obvious, but the real answer to your question is: learn how to use a debugger. This is what it&#39;s there for. Knowing how to use a debugger is a required skill for every C++ developer, no exceptions."}, {"owner": {"reputation": 412, "user_id": 2394602, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Id1e2.png?s=128&g=1", "display_name": "One Man Monkey Squad", "link": "https://stackoverflow.com/users/2394602/one-man-monkey-squad"}, "edited": false, "score": 2, "creation_date": 1537359631, "post_id": 52405656, "comment_id": 91755180, "body": "Your inner loop while(s[i]!=&#39; &#39;) ... does not check for the end of the string. Try while(s[i]!=&#39; &#39;&amp;&amp;i&lt;s.size())"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1537359722, "post_id": 52405656, "comment_id": 91755222, "body": "That won&#39;t work unless your input string ends with a space, which isn&#39;t very likely."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1537359781, "post_id": 52405656, "comment_id": 91755259, "body": "consider using subranges defined by iterator pairs to work on substrings. Its seems a bit backwards to use c++ instead of python for performance and then do all this uneccesary stuff (copying, creating a vector, creating several strings etc)"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 2, "creation_date": 1537360015, "post_id": 52405656, "comment_id": 91755397, "body": "One question per question, please. Your second question is a duplicate of <a href=\"https://stackoverflow.com/q/236129/3002139\">stackoverflow.com/q/236129/3002139</a>. Please consider removing it."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 8, "last_activity_date": 1537359800, "creation_date": 1537359800, "answer_id": 52405803, "question_id": 52405656, "link": "https://stackoverflow.com/questions/52405656/getting-some-junk-returned-by-a-function/52405803#52405803", "title": "Getting some junk returned by a function", "body": "<p>In this loop:</p>\n\n<pre><code>    while(s[i]!=' '){\n        str+=s[i];\n        i++;\n    }\n</code></pre>\n\n<p>You never check whether <code>i</code> is outside the bounds of <code>s</code> and as long as there isn't a <code>' '</code> there, <code>i</code> will be incremented beyond the boundary, and the string will be accessed outside of bounds. The behaviour of accessing the string outside of bounds is undefined.</p>\n"}, {"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 2, "last_activity_date": 1537360229, "creation_date": 1537360229, "answer_id": 52405917, "question_id": 52405656, "link": "https://stackoverflow.com/questions/52405656/getting-some-junk-returned-by-a-function/52405917#52405917", "title": "Getting some junk returned by a function", "body": "<p>Your inner loop doesn't stop at the end of the string, only when it encounters a space character.<br>\nThus, if your input doesn't end with a space, you're going to index outside the string and have undefined behaviour.<br>\n(And when it works, contiguous space characters will result in empty strings, which you probably don't want.)</p>\n\n<p>The most straightforward way to split on whitespace is to use a stream:</p>\n\n<pre><code>#include &lt;sstream&gt;\n\nvector&lt;string&gt; split(string s){\n    vector&lt;string&gt; ans;\n    istringstream ss(s);\n    string word;\n    while (ss &gt;&gt; word)\n        ans.push_back(word);\n    return ans;\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n#include &lt;sstream&gt;\n\nvector&lt;string&gt; split(string s){\n    vector&lt;string&gt; ans;\n    istringstream ss(s);\n    copy(istream_iterator&lt;string&gt;(ss), istream_iterator&lt;string&gt;(), back_inserter(ans));\n    return ans;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 461, "user_id": 2760267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be631e7cf9b1178d71e69ba0ebef82c8?s=128&d=identicon&r=PG&f=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/2760267/destructor"}, "is_accepted": false, "score": 2, "last_activity_date": 1537360251, "creation_date": 1537360251, "answer_id": 52405924, "question_id": 52405656, "link": "https://stackoverflow.com/questions/52405656/getting-some-junk-returned-by-a-function/52405924#52405924", "title": "Getting some junk returned by a function", "body": "<pre><code>while(s[i]!=' '){\n        str+=s[i];\n        i++;\n}\n</code></pre>\n\n<p>The above code part doesn't check for the boundary of s. While doing <code>i++</code> you might go over the boundary of the string. So check if <code>i == s.size()</code> and break from the loop.</p>\n"}, {"tags": [], "owner": {"reputation": 563, "user_id": 7707765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01c4a31d9b1f46e17036955b67c3a340?s=128&d=identicon&r=PG&f=1", "display_name": "Ketzu", "link": "https://stackoverflow.com/users/7707765/ketzu"}, "is_accepted": false, "score": 0, "last_activity_date": 1537361794, "creation_date": 1537361794, "answer_id": 52406404, "question_id": 52405656, "link": "https://stackoverflow.com/questions/52405656/getting-some-junk-returned-by-a-function/52406404#52406404", "title": "Getting some junk returned by a function", "body": "<p>Your while loop does not check for the end of the string, so if you reach the last space in your string, it will not stop at the last character.</p>\n\n<pre><code>while(s[i]!=' ' &amp;&amp; i&lt;s.size()){\n</code></pre>\n\n<p>It is probably smarter to use the solution using streams from the other answer, or use the find method of the string class and the substring method. Example:</p>\n\n<pre><code>vector&lt;string&gt; splt(string s){\n    vector&lt;string&gt; ans={};\n    size_t found = s.find_first_of(' ');\n    size_t last = 0;\n    while(found!=string::npos){\n        ans.push_back(s.substr(last,found));\n        last = found+1;\n        found = s.find_first_of(' ',found+1);\n    }\n    ans.push_back(s.substr(last,s.size()));\n    return ans;\n}\n</code></pre>\n"}], "owner": {"reputation": 78, "user_id": 10385582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62c56ff89161f488b018018406ef2a73?s=128&d=identicon&r=PG&f=1", "display_name": "LukaSsS", "link": "https://stackoverflow.com/users/10385582/lukasss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 1, "accepted_answer_id": 52405803, "answer_count": 4, "score": 4, "last_activity_date": 1537361794, "creation_date": 1537359317, "last_edit_date": 1537359514, "question_id": 52405656, "link": "https://stackoverflow.com/questions/52405656/getting-some-junk-returned-by-a-function", "title": "Getting some junk returned by a function", "body": "<p>I participated in different coding contests and therefore cant use python cause it's too slow on execution time, but i really like the input.split() thing, so i tried to implement my own split.\nHere is what i came up with:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;stack&gt;\n\nusing namespace std;\n\nvector&lt;string&gt; splt(string s){\n    vector&lt;string&gt; ans={};\n    for(int i=0;i&lt;s.size();i++){\n        string str=\"\";\n        while(s[i]!=' '){\n            str+=s[i];\n            i++;\n        }\n        ans.push_back(str);\n    }\n    return ans;\n}\n\nint main(){\n    string s;\n    getline(cin, s);\n    vector&lt;string&gt; ans=splt(s);\n    for(auto i:ans)\n        cout&lt;&lt;i&lt;&lt;\", \";\n}\n</code></pre>\n\n<p>But the vector returned by the function often(but no always) has some junk at the end. Would appreciate any help with correcting my code, as well as some other impementation of splitting a string into an array.</p>\n\n<p>P.S. Sorry if my English is bad, im from Russia and haven't even finished school :)</p>\n"}, {"tags": ["c++", "visual-c++", "visual-studio-2013", "stl"], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 4915140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d718ad0c0b336384bf81e0b87b3b447?s=128&d=identicon&r=PG&f=1", "display_name": "marcbf", "link": "https://stackoverflow.com/users/4915140/marcbf"}, "edited": false, "score": 0, "creation_date": 1537357714, "post_id": 52405122, "comment_id": 91754073, "body": "Yes, I understand that insert() invalidates the iterators (well, the ones following the inserted object anyway), but how/why can begin() be called before insert()?"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 119, "user_id": 4915140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d718ad0c0b336384bf81e0b87b3b447?s=128&d=identicon&r=PG&f=1", "display_name": "marcbf", "link": "https://stackoverflow.com/users/4915140/marcbf"}, "edited": false, "score": 0, "creation_date": 1537357832, "post_id": 52405122, "comment_id": 91754150, "body": "@azrael Updated the answer for you."}, {"owner": {"reputation": 119, "user_id": 4915140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d718ad0c0b336384bf81e0b87b3b447?s=128&d=identicon&r=PG&f=1", "display_name": "marcbf", "link": "https://stackoverflow.com/users/4915140/marcbf"}, "edited": false, "score": 0, "creation_date": 1537358462, "post_id": 52405122, "comment_id": 91754511, "body": "&quot;@Maxim Egorushkin&quot; Thanks for that. Will have to properly check out that link you&#39;ve provided."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 6, "last_activity_date": 1537357822, "last_edit_date": 1537357822, "creation_date": 1537357519, "answer_id": 52405122, "question_id": 52405053, "link": "https://stackoverflow.com/questions/52405053/vector-iterators-incompatible-when-calculating-distance-between-two-iterators/52405122#52405122", "title": "&quot;Vector Iterators Incompatible&quot; when calculating distance between two iterators", "body": "<p><code>vector::insert</code> invalidates the iterators. In expression <code>insert(object) - begin()</code> <code>begin()</code> can be called before or after <code>insert</code>. If it is called before than it is invalidated by <code>insert()</code>. <a href=\"https://en.cppreference.com/w/cpp/language/eval_order\" rel=\"noreferrer\">Order of evaluation</a>:</p>\n\n<blockquote>\n  <p>Order of evaluation of the operands of almost all C++ operators (including the order of evaluation of function arguments in a function-call expression and the order of evaluation of the subexpressions within any expression) is unspecified. The compiler can evaluate operands in any order, and may choose another order when the same expression is evaluated again.</p>\n</blockquote>\n\n<p>Whereas when you do:</p>\n\n<pre><code>const_iterator (or auto) it = insert(object);\nreturn it - begin();\n</code></pre>\n\n<p><code>begin()</code> is called after <code>insert()</code> and hence returns a valid iterator.</p>\n"}], "owner": {"reputation": 119, "user_id": 4915140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d718ad0c0b336384bf81e0b87b3b447?s=128&d=identicon&r=PG&f=1", "display_name": "marcbf", "link": "https://stackoverflow.com/users/4915140/marcbf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 52405122, "answer_count": 1, "score": 3, "last_activity_date": 1537358890, "creation_date": 1537357225, "last_edit_date": 1537358890, "question_id": 52405053, "link": "https://stackoverflow.com/questions/52405053/vector-iterators-incompatible-when-calculating-distance-between-two-iterators", "title": "&quot;Vector Iterators Incompatible&quot; when calculating distance between two iterators", "body": "<p>I'm having an issue which I cannot quite find the cause of.</p>\n\n<p>At a certain point in my code I'm returning the distance between two std::vector iterators, one being the result of an insert operation on a vector and the other pointing to the beginning of the vector. The idea is to return the index of the newly inserted object.</p>\n\n<p>Everything works perfectly when I phrase the code like this</p>\n\n<pre><code>const_iterator (or auto) it = insert(object);\nreturn it - begin();\n</code></pre>\n\n<p>However, if I try to make a one liner out of it</p>\n\n<pre><code>return insert(object) - begin();\n</code></pre>\n\n<p>I get the aforementioned \"Vector Iterators Incompatible\" assertion.</p>\n\n<p>begin() is implemented as:</p>\n\n<pre><code>MyClass::iterator MyClass::begin()\n{\n  return m_container.begin();\n}\n</code></pre>\n\n<p>and insert() is implemented as:</p>\n\n<pre><code>MyClass::iterator MyClass::insert(MyObject *object)\n{\n  if (object)\n  {\n    const_iterator it = std::lower_bound(begin(), end(), object, DereferencedLess&lt;MyObject &gt;());\n\n    if (it == end() || *(*it) != *object)\n      return m_container.insert(it, object);\n  }\n\n  return end();\n}\n</code></pre>\n\n<p>Brief outline of the class:</p>\n\n<pre><code>MyClass {\n  ...\n  iterator  begin();\n  const_iterator begin() const;\n  iterator  insert(MyObject*);\n\n  ...\n  protected:\n  std::vector&lt;MyObject*&gt; m_container;\n}\n</code></pre>\n\n<p>and for completeness' sake</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct DereferencedLess\n{ inline bool operator()(const T *p1, const T *p2) const { return *p1 &lt; *p2; } };\n</code></pre>\n\n<p>I would very much like to understand why the assertion happens. From what I can see the iterators are of the same type and both insert() and begin() are working on the same vector. All the necessary typedefs are in place as well.</p>\n"}, {"tags": ["c++", "floating-point", "gdb"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1537357144, "post_id": 52404938, "comment_id": 91753717, "body": "it doesnt make much sense to print more digits than the number actually has significant digits"}, {"owner": {"reputation": 97, "user_id": 3439352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc125b3a28f6d2bf9b5125de3640847?s=128&d=identicon&r=PG&f=1", "display_name": "Absolute Zero", "link": "https://stackoverflow.com/users/3439352/absolute-zero"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1537357237, "post_id": 52404938, "comment_id": 91753777, "body": "That is the problem. The variable has many more significant digits and I want GDB to show them to me."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1537357276, "post_id": 52404938, "comment_id": 91753801, "body": "many more than 16?? What data type is that?"}, {"owner": {"reputation": 97, "user_id": 3439352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc125b3a28f6d2bf9b5125de3640847?s=128&d=identicon&r=PG&f=1", "display_name": "Absolute Zero", "link": "https://stackoverflow.com/users/3439352/absolute-zero"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1537357537, "post_id": 52404938, "comment_id": 91753962, "body": "Physics related data and extreme precision is important in my particular use case. My example numbers might not have been ideal as I am often looking at very small numbers (below 1)."}, {"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "edited": false, "score": 0, "creation_date": 1537357596, "post_id": 52404938, "comment_id": 91754003, "body": "Are you using an external library for this data type?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1537357665, "post_id": 52404938, "comment_id": 91754049, "body": "is it a <code>double</code>? You wont get much more than 16 digits out of that...."}, {"owner": {"reputation": 97, "user_id": 3439352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc125b3a28f6d2bf9b5125de3640847?s=128&d=identicon&r=PG&f=1", "display_name": "Absolute Zero", "link": "https://stackoverflow.com/users/3439352/absolute-zero"}, "edited": false, "score": 0, "creation_date": 1537357669, "post_id": 52404938, "comment_id": 91754051, "body": "No external libraries (none available). C++ double variables."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1537357770, "post_id": 52404938, "comment_id": 91754113, "body": "&quot;I am often looking at very small numbers&quot; dont confuse number of significant digits with very small/big numbers. Eg <code>1.23e30</code> and <code>5.4e-20</code> arent a problem on their own, but if you want to add them you are out of luck concerning precision with <code>double</code>s"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1537357889, "post_id": 52404938, "comment_id": 91754185, "body": "btw GDB is likely already showing you <b>all</b> the significant digits. If you really need more you need to use some high/arbitrary precision data type (which <code>double</code> is not really)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1537358035, "post_id": 52404938, "comment_id": 91754259, "body": "...are you comparing two floating points with <code>==</code> and now try to find out why two equal values arent equal?"}, {"owner": {"reputation": 97, "user_id": 3439352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc125b3a28f6d2bf9b5125de3640847?s=128&d=identicon&r=PG&f=1", "display_name": "Absolute Zero", "link": "https://stackoverflow.com/users/3439352/absolute-zero"}, "edited": false, "score": 0, "creation_date": 1537358176, "post_id": 52404938, "comment_id": 91754331, "body": "Interesting, I am just confused as to why I can see the difference using printf (see my edit). Eventually the small difference in the variable ripples up to a bigger difference in another variable which is obvious in GDB."}, {"owner": {"reputation": 97, "user_id": 3439352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc125b3a28f6d2bf9b5125de3640847?s=128&d=identicon&r=PG&f=1", "display_name": "Absolute Zero", "link": "https://stackoverflow.com/users/3439352/absolute-zero"}, "edited": false, "score": 0, "creation_date": 1537358329, "post_id": 52404938, "comment_id": 91754430, "body": "I am not comparing floating points using <code>==</code>. Comparing two separate applications with common code trying to determine why they yield nearly identical (but not exactly the same) results."}, {"owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "edited": false, "score": 0, "creation_date": 1537358551, "post_id": 52404938, "comment_id": 91754557, "body": "gdb does display more decimal places, you can test it yourself: <code>(gdb) p .035449094393 $1 = 0.035449094393000001</code>."}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1537358094, "creation_date": 1537358094, "answer_id": 52405304, "question_id": 52404938, "link": "https://stackoverflow.com/questions/52404938/specify-floating-point-precision-in-gdb/52405304#52405304", "title": "Specify floating point precision in GDB", "body": "<p>You can do <code>call printf(\"%.10f\\n\", d)</code> in <code>gdb</code> and it will print it in <code>stdout</code> with the desired format.</p>\n"}, {"comments": [{"owner": {"reputation": 97, "user_id": 3439352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc125b3a28f6d2bf9b5125de3640847?s=128&d=identicon&r=PG&f=1", "display_name": "Absolute Zero", "link": "https://stackoverflow.com/users/3439352/absolute-zero"}, "edited": false, "score": 0, "creation_date": 1537363284, "post_id": 52405309, "comment_id": 91757417, "body": "It is shame that the built-in print function has limited precision, but this solved my problem!"}], "tags": [], "owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "is_accepted": true, "score": 6, "last_activity_date": 1537358103, "creation_date": 1537358103, "answer_id": 52405309, "question_id": 52404938, "link": "https://stackoverflow.com/questions/52404938/specify-floating-point-precision-in-gdb/52405309#52405309", "title": "Specify floating point precision in GDB", "body": "<p>By default, GDB's <code>p/f &lt;variable&gt;</code> has limited precision.</p>\n\n<p>You can use <code>printf</code> to show more decimal places:</p>\n\n<pre><code>(gdb) printf \"%1.20f\\n\", &lt;variable&gt;\n</code></pre>\n\n<p><sup>However, it is very likely that at this point you will start running into the limitations of your data type (there may be rounding errors and other small deviations from what you might expect as a value).</sup></p>\n"}], "owner": {"reputation": 97, "user_id": 3439352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc125b3a28f6d2bf9b5125de3640847?s=128&d=identicon&r=PG&f=1", "display_name": "Absolute Zero", "link": "https://stackoverflow.com/users/3439352/absolute-zero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1628, "favorite_count": 0, "accepted_answer_id": 52405309, "answer_count": 2, "score": 4, "last_activity_date": 1537358578, "creation_date": 1537356866, "last_edit_date": 1537358578, "question_id": 52404938, "link": "https://stackoverflow.com/questions/52404938/specify-floating-point-precision-in-gdb", "title": "Specify floating point precision in GDB", "body": "<p>I am debugging a C++ application and when I display a double-precision floating point number in GDB I get a result like:<code>.035449094393</code></p>\n\n<p>How do I display more decimal places? Ideally I would be able to specificy the precision and get a result like: <code>.0354490943927692</code></p>\n\n<p>Basically, I am attempting to find the reason for a very minor difference between 2 variables. If I use printf with a format specifier like <code>%1.20f</code> I can see the difference in the variables but not using GDB.</p>\n"}, {"tags": ["c++", "qt", "curl", "static-libraries"], "comments": [{"owner": {"reputation": 4096, "user_id": 3601321, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/02ba00dbea1724976753357b4470760b?s=128&d=identicon&r=PG&f=1", "display_name": "Corristo", "link": "https://stackoverflow.com/users/3601321/corristo"}, "edited": false, "score": 2, "creation_date": 1537356595, "post_id": 52404822, "comment_id": 91753384, "body": "Shouldn&#39;t the <code>LIBS</code> part be <code>LIBS += -L&#47;tmp&#47;curl&#47;lib -lcurl</code>?"}, {"owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 0, "creation_date": 1537356688, "post_id": 52404822, "comment_id": 91753446, "body": "<code>-L</code> specifies a <i>directory</i> to look for libraries in. If you want to link statically, just add the path to the library to the LIBS."}], "owner": {"reputation": 2341, "user_id": 727366, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/15362554dff032d3d6a3f52921115d3f?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Mesquita Alfaiate", "link": "https://stackoverflow.com/users/727366/miguel-mesquita-alfaiate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 237, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1537356477, "creation_date": 1537356477, "question_id": 52404822, "link": "https://stackoverflow.com/questions/52404822/cant-compile-qt-project-with-static-lib-curl", "title": "Can&#39;t compile qt project with static lib curl", "body": "<p>I am trying to compile a qt project with qtcurl using a statically built curl.</p>\n\n<p>I am using the following to build a minimalist curl static library:</p>\n\n<pre><code>./configure --disable-shared --enable-static --prefix=/tmp/curl --disable-ldap --disable-sspi --without-librtmp --disable-ftp --disable-file --disable-dict --disable-telnet --disable-tftp --disable-rtsp --disable-pop3 --disable-imap --disable-smtp --disable-gopher --disable-smb --without-libidn --enable-ares\n</code></pre>\n\n<p>I am including\n<code>-L/tmp/curl/lib/libcurl.a</code>\nin the LIBS of the project, and \n<code>/tmp/curl/include</code>\nin the INCLUDEPATH</p>\n\n<p>This is the output that I am getting:</p>\n\n<pre><code>QtCUrl.o: In function `QtCUrl::QtCUrl()':\nQtCUrl.cpp:(.text+0x10d): undefined reference to `curl_easy_init'\nQtCUrl.o: In function `QtCUrl::~QtCUrl()':\nQtCUrl.cpp:(.text+0x32e): undefined reference to `curl_slist_free_all'\nQtCUrl.cpp:(.text+0x355): undefined reference to `curl_easy_cleanup'\nQtCUrl.o: In function `QtCUrl::setOptions(QHash&lt;CURLoption, QVariant&gt;&amp;)':\nQtCUrl.cpp:(.text+0xcee): undefined reference to `curl_easy_setopt'\nQtCUrl.cpp:(.text+0xdac): undefined reference to `curl_easy_setopt'\nQtCUrl.cpp:(.text+0xee9): undefined reference to `curl_slist_append'\nQtCUrl.cpp:(.text+0xfe5): undefined reference to `curl_easy_setopt'\nQtCUrl.cpp:(.text+0x1078): undefined reference to `curl_easy_setopt'\nQtCUrl.cpp:(.text+0x109f): undefined reference to `curl_easy_setopt'\nQtCUrl.cpp:(.text+0x1155): undefined reference to `curl_easy_setopt'\nQtCUrl.cpp:(.text+0x1290): undefined reference to `curl_easy_setopt'\nQtCUrl.o: In function `QtCUrl::exec(QHash&lt;CURLoption, QVariant&gt;&amp;)':\nQtCUrl.cpp:(.text+0x1f27): undefined reference to `curl_easy_perform'\nQtCUrl.o: In function `curlGlobalInit()':\nQtCUrl.cpp:(.text+0xa6): undefined reference to `curl_global_init'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["c++", "git", "visual-studio", "visual-c++", "clone"], "comments": [{"owner": {"reputation": 4513, "user_id": 1810087, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/T2x51.jpg?s=128&g=1", "display_name": "user1810087", "link": "https://stackoverflow.com/users/1810087/user1810087"}, "edited": false, "score": 1, "creation_date": 1537355954, "post_id": 52404570, "comment_id": 91752952, "body": "What&#39;s the error you get?"}, {"owner": {"reputation": 3, "user_id": 10367190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb17a0d643405bc3384b8e23b143a6ea?s=128&d=identicon&r=PG&f=1", "display_name": "the_nolanator", "link": "https://stackoverflow.com/users/10367190/the-nolanator"}, "reply_to_user": {"reputation": 4513, "user_id": 1810087, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/T2x51.jpg?s=128&g=1", "display_name": "user1810087", "link": "https://stackoverflow.com/users/1810087/user1810087"}, "edited": false, "score": 0, "creation_date": 1537361295, "post_id": 52404570, "comment_id": 91756129, "body": "I don&#39;t get a build option so unfortunately I can&#39;t get as far as an error."}], "answers": [{"tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 0, "last_activity_date": 1537359074, "creation_date": 1537359074, "answer_id": 52405579, "question_id": 52404570, "link": "https://stackoverflow.com/questions/52404570/cloning-a-github-repo-to-create-a-buildable-visual-studio-2017-project/52405579#52405579", "title": "Cloning a GitHub repo to create a buildable Visual Studio 2017 project", "body": "<p>A source repo is generally two things : the actual sources and their build system. You need to figure out what is the build system of the repo you're cloning (usually: <a href=\"https://www.gnu.org/software/make/\" rel=\"nofollow noreferrer\">GNUMake</a>, <a href=\"https://cmake.org/overview/\" rel=\"nofollow noreferrer\">CMake</a>, <a href=\"https://www.gnu.org/software/automake/manual/html_node/Autotools-Introduction.html\" rel=\"nofollow noreferrer\">autotools</a>, VS project, etc.) and use it.</p>\n\n<p>Some build systems (like CMake) can <a href=\"https://stackoverflow.com/q/395169/5470596\">generate project files for various IDE like microsoft studio</a>.</p>\n"}], "owner": {"reputation": 3, "user_id": 10367190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb17a0d643405bc3384b8e23b143a6ea?s=128&d=identicon&r=PG&f=1", "display_name": "the_nolanator", "link": "https://stackoverflow.com/users/10367190/the-nolanator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1537359074, "creation_date": 1537355621, "question_id": 52404570, "link": "https://stackoverflow.com/questions/52404570/cloning-a-github-repo-to-create-a-buildable-visual-studio-2017-project", "title": "Cloning a GitHub repo to create a buildable Visual Studio 2017 project", "body": "<p>I know how to use Team Explorer to clone a repo from GitHub but my problem is that when I do this, I can't build and debug the resulting code (I'm using C++ and I have the C/C++ add-on for VS) the way I can if I create a project from scratch in VS (by hitting the green \"play\" button). This seems to be because I'm missing some of the many extra VS-specific files that are created when you I create a VS project from scratch. Can anyone help me out please? </p>\n\n<p>I've searched SO and Youtube for answers but all that ever seems to be covered is clicking the cloning in Team Explorer - nobody seems to mention building and debugging once you have cloned. </p>\n"}, {"tags": ["c++", "fstream", "ofstream"], "comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1537356868, "post_id": 52404459, "comment_id": 91753554, "body": "I still don&#39;t get why it should be necessary to set <code>eof</code> bit in <code>std::ofstream</code>. If you <code>close()</code> the <code>std::ofsteam</code> and it doesn&#39;t fail I would assume that output was successfully. Though, I somewhere read that this is true &quot;above&quot; OS level only. To grant this for the harddisk may take even more effort (beyond std C++) e.g. doing an <code>fsync()</code>. (My stomache was right - found:) <a href=\"https://stackoverflow.com/a/7522650/7478597\">SO: How do I ensure data is written to disk before closing fstream?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 263, "user_id": 7819621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ba1be3bd81a07562784ff4ba1def7f1?s=128&d=identicon&r=PG", "display_name": "TStancek", "link": "https://stackoverflow.com/users/7819621/tstancek"}, "edited": false, "score": 3, "creation_date": 1537357736, "post_id": 52405034, "comment_id": 91754089, "body": "I&#39;ve been thinking that for instance on a FAT32 filesystem, when reaching the 4GB marker, there might be enforced EOF. But that seems unlikely, I am just thinking &quot;out loud&quot;."}, {"owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "reply_to_user": {"reputation": 263, "user_id": 7819621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ba1be3bd81a07562784ff4ba1def7f1?s=128&d=identicon&r=PG", "display_name": "TStancek", "link": "https://stackoverflow.com/users/7819621/tstancek"}, "edited": false, "score": 1, "creation_date": 1537358796, "post_id": 52405034, "comment_id": 91754715, "body": "On that note, there is an <code>errno</code> of EFBIG for when this happens with POSIX <code>write</code>. I imagine that that would map to <code>failbit</code> or <code>badbit</code> though, because usually that is an error (as opposed to EOF, which is normal and expected behavior)"}], "tags": [], "owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "is_accepted": true, "score": 5, "last_activity_date": 1537365379, "last_edit_date": 1592644375, "creation_date": 1537357147, "answer_id": 52405034, "question_id": 52404459, "link": "https://stackoverflow.com/questions/52404459/can-eof-be-set-in-ofstream/52405034#52405034", "title": "Can &quot;eof&quot; be set in ofstream?", "body": "<p><strong>No.</strong> <code>eof()</code> returns the <code>eofbit</code>, which has no real meaning for an output stream with no associated input stream.</p>\n<blockquote>\n<p><code>eofbit</code> indicates that an input operation reached the end of an input sequence</p>\n<p><a href=\"http://eel.is/c++draft/ios::iostate\" rel=\"nofollow noreferrer\"><strong>[ios.types]</strong> / 3.1</a>, Table 107</p>\n</blockquote>\n<p>The actions that set <code>eofbit</code> are enumerated <a href=\"https://en.cppreference.com/w/cpp/io/ios_base/iostate\" rel=\"nofollow noreferrer\">here</a>, and they all act on input streams only.</p>\n<p>We could imagine some weird implementation-specific scenario in which EOF (as opposed to some other error condition) would be hit while writing to a file - maybe there is a fixed-size file buffer we are writing to through some OS functions - but as far as I know the standard library abstractions do not deal with that case, and I have never seen or heard of such an API in the first place.</p>\n"}], "owner": {"reputation": 263, "user_id": 7819621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ba1be3bd81a07562784ff4ba1def7f1?s=128&d=identicon&r=PG", "display_name": "TStancek", "link": "https://stackoverflow.com/users/7819621/tstancek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 482, "favorite_count": 0, "accepted_answer_id": 52405034, "answer_count": 1, "score": 3, "last_activity_date": 1537365379, "creation_date": 1537355212, "question_id": 52404459, "link": "https://stackoverflow.com/questions/52404459/can-eof-be-set-in-ofstream", "title": "Can &quot;eof&quot; be set in ofstream?", "body": "<p>I could not find pretty much any information on this. Whether and if so, under what circumstances, can eofbit be set (meaning ofstream_instance.eof() is true )?</p>\n\n<p>I am more interested in an independent ofstream, one that is not associated with an ifstream within some fstream, so that the \"shared\" eofbit can't be set by the ifstream (if something like that is possible).  </p>\n\n<p>If I simply write to a file and there is no space on disk or operation system does not provide another space for the writing, then I'd expect just only either failbit  or badbit to be set, but reaching end of file while writing to it does not make sense to me. However no discussion on this I was able to find.</p>\n"}, {"tags": ["c++", "string", "operator-overloading", "return-value"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1537354725, "post_id": 52404286, "comment_id": 91752282, "body": "This is C++. We only speak <code>std::string</code>ish around here. <code>char *</code> is so C-ish."}, {"owner": {"reputation": 1012, "user_id": 3919121, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b623e00f7668e7d6e74fa445d899d525?s=128&d=identicon&r=PG&f=1", "display_name": "diego.martinez", "link": "https://stackoverflow.com/users/3919121/diego-martinez"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1537354856, "post_id": 52404286, "comment_id": 91752352, "body": "I need it to modify a framework, and I can&#39;t use std::string."}, {"owner": {"reputation": 1012, "user_id": 3919121, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b623e00f7668e7d6e74fa445d899d525?s=128&d=identicon&r=PG&f=1", "display_name": "diego.martinez", "link": "https://stackoverflow.com/users/3919121/diego-martinez"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1537354888, "post_id": 52404286, "comment_id": 91752380, "body": "btw, if it where a std::string the problem would persist."}, {"owner": {"reputation": 412, "user_id": 2394602, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Id1e2.png?s=128&g=1", "display_name": "One Man Monkey Squad", "link": "https://stackoverflow.com/users/2394602/one-man-monkey-squad"}, "edited": false, "score": 0, "creation_date": 1537355362, "post_id": 52404286, "comment_id": 91752601, "body": "If you can&#39;t change the return type, use a buffer member, copy the formatted string there and return a pointer to the buffer, or, if you are the dirty type, use a global static buffer and do the same."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1537357074, "post_id": 52404286, "comment_id": 91753676, "body": "Implicit conversion is treacherous, so I would first reconsider the whole idea of the conversion operator. Is it <i>really</i> necessary, or is explicit conversion the way forward?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1537358332, "post_id": 52404286, "comment_id": 91754433, "body": "No, the problem will would not &quot;persist&quot;. That&#39;s a 100% money-back guarantee. std::string manages itself completely. Returning it will give the caller a fully constructed object, representing a string, and the object will exist as long as the caller needs it for. This is what std::string is for."}], "answers": [{"tags": [], "owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "is_accepted": true, "score": 0, "last_activity_date": 1537354935, "creation_date": 1537354935, "answer_id": 52404384, "question_id": 52404286, "link": "https://stackoverflow.com/questions/52404286/how-to-properly-overload-operator-cast-char-in-c/52404384#52404384", "title": "how to properly overload operator cast char* in C++?", "body": "<p>You cannot do that unless you require that caller should call <code>delete[]</code> on the pointer returned. </p>\n\n<pre><code>VAR::operator char*()\n{\n  char* test = new char[required_bytes];\n  // Fill 'test'\n  return test;\n}\n</code></pre>\n\n<p>It's better and more sensible to just return a <code>std::string</code> (or <code>std::wstring</code>) object. When the caller wants a C-string out of it, they can call <code>c_str()</code> method of <code>w/string</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "is_accepted": false, "score": 1, "last_activity_date": 1537355154, "creation_date": 1537355154, "answer_id": 52404441, "question_id": 52404286, "link": "https://stackoverflow.com/questions/52404286/how-to-properly-overload-operator-cast-char-in-c/52404441#52404441", "title": "how to properly overload operator cast char* in C++?", "body": "<blockquote>\n  <p>Any idea?</p>\n</blockquote>\n\n<ol>\n<li><p>Use strings rather than char pointers.</p>\n\n<p>VAR::operator STRING();</p></li>\n<li><p>If not 1. then return a fresh copy of string.</p></li>\n</ol>\n\n<p><code>char const *retVal = new char[test.size() + 1];\nstd::strncpy(retVal, test.Get(), test.size());\nretVal[test.size()] = '\\0';\nreturn retVal;</code>.</p>\n\n<p>(Don't forget to <code>delete[]</code> it later.)</p>\n\n<ol start=\"3\">\n<li>Finally, you can make <code>test</code> your class's member and return its contents; then it will survive past the function's end.</li>\n</ol>\n"}], "owner": {"reputation": 1012, "user_id": 3919121, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b623e00f7668e7d6e74fa445d899d525?s=128&d=identicon&r=PG&f=1", "display_name": "diego.martinez", "link": "https://stackoverflow.com/users/3919121/diego-martinez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 52404384, "answer_count": 2, "score": -3, "last_activity_date": 1537357553, "creation_date": 1537354636, "question_id": 52404286, "link": "https://stackoverflow.com/questions/52404286/how-to-properly-overload-operator-cast-char-in-c", "title": "how to properly overload operator cast char* in C++?", "body": "<p>I have a class with a numeric value. \nI need to add a operator overload that , when cast to char* (or wchar*) returns a string with the readable value. </p>\n\n<p>I tried with</p>\n\n<pre><code>VAR::operator char*()\n{\n  STRING test;\n  test.format(\"%d\",value); //fills string with \"readable\" data\n  return test.Get() //returns the char* content of the test;\n}\n</code></pre>\n\n<p>but the call of the destructor of STRING deletes the value and it returns random data. </p>\n\n<p>Any idea?</p>\n"}, {"tags": ["c++", "graphics", "console", "game-engine"], "comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 3, "creation_date": 1537354916, "post_id": 52404162, "comment_id": 91752398, "body": "Sorry, your question is too broad for this community. There is a <a href=\"https://en.wikipedia.org/wiki/List_of_game_engines\" rel=\"nofollow noreferrer\">List of game engines</a> on Wikipedia. May be, you have a look onto <a href=\"https://en.wikipedia.org/wiki/Simple_DirectMedia_Layer\" rel=\"nofollow noreferrer\">SDL</a> which I&#39;ve never used myself but read some Q/As about it here. For graphics programming in general, I would recommend <a href=\"https://en.wikipedia.org/wiki/Qt_(software)\" rel=\"nofollow noreferrer\">Qt</a> which I use personally in professional work and just for fun to learn (by solving SO questions)."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1537355007, "post_id": 52404162, "comment_id": 91752448, "body": "Concerning <i>too broad for this community</i>: Please, take the <a href=\"https://stackoverflow.com/tour\">Tour</a> and read <a href=\"https://stackoverflow.com/help/how-to-ask\">How to ask</a>."}], "answers": [{"tags": [], "owner": {"reputation": 2564, "user_id": 2754510, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OMF8A.jpg?s=128&g=1", "display_name": "Constantinos Glynos", "link": "https://stackoverflow.com/users/2754510/constantinos-glynos"}, "is_accepted": false, "score": 2, "last_activity_date": 1537356543, "creation_date": 1537356543, "answer_id": 52404852, "question_id": 52404162, "link": "https://stackoverflow.com/questions/52404162/beginner-c-graphics-moving-past-the-console/52404852#52404852", "title": "Beginner C++ Graphics (moving past the console)?", "body": "<p>Welcome to Stack Overflow (SO). Just a friendly advice, SO is a programming blog meant to be used to ask specific questions and only when you cannot find the answer elsewhere. Broad and opinion-based questions should be avoided. It'll take you some time to get used to it - just look at other people's posts as examples. :-)</p>\n\n<p>Anyway, the most commonly used library for Graphics is <a href=\"http://openglbook.com/chapter-0-preface-what-is-opengl.html\" rel=\"nofollow noreferrer\">OpenGL</a>. You can look into <a href=\"http://www.libsdl.org/\" rel=\"nofollow noreferrer\">SDL</a> which a much simpler library, but soon enough you'll end up using OpenGL for your stuff. </p>\n\n<p>If I where you, I'd start by looking at some <a href=\"https://www.khronos.org/opengl/wiki/Legacy_OpenGL\" rel=\"nofollow noreferrer\">Legacy OpenGL</a> examples because it's easier to understand and it's a lot more C++ friendly than Modern OpenGL. NeHe has some nice tutorials <a href=\"http://users.polytech.unice.fr/~buffa/cours/synthese_image/DOCS/Tutoriaux/Nehe/opengl.htm\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>To get you started with Modern OpenGL, I'd recommend you look at the following links:</p>\n\n<ul>\n<li><a href=\"https://learnopengl.com/\" rel=\"nofollow noreferrer\">https://learnopengl.com/</a></li>\n<li><a href=\"http://ogldev.atspace.co.uk/\" rel=\"nofollow noreferrer\">http://ogldev.atspace.co.uk/</a></li>\n<li><a href=\"http://openglbook.com/\" rel=\"nofollow noreferrer\">http://openglbook.com/</a></li>\n<li><a href=\"https://nccastaff.bournemouth.ac.uk/jmacey/OpenGL/lecture1/slides.html?home=/jmacey/ASE#/\" rel=\"nofollow noreferrer\">Introduction to Modern OpenGL - Jon Macey, National Centre for Computer Animation</a></li>\n<li><a href=\"http://www.libsdl.org/\" rel=\"nofollow noreferrer\">http://www.libsdl.org/</a></li>\n<li><a href=\"http://lazyfoo.net/tutorials/SDL/\" rel=\"nofollow noreferrer\">http://lazyfoo.net/tutorials/SDL/</a></li>\n</ul>\n\n<p>I'd also get the <a href=\"https://www.amazon.co.uk/OpenGL-Superbible-Comprehensive-Tutorial-Reference-ebook/dp/B01248FA0U/ref=sr_1_fkmr1_1?ie=UTF8&amp;qid=1537355423&amp;sr=8-1-fkmr1&amp;keywords=OpenGL%20SuperBible%2C%20Seventh%20Edition\" rel=\"nofollow noreferrer\">OpenGL SuperBible</a>, Seventh edition which is a complete tutorial and reference guide for the latest OpenGL version. You can also get the <a href=\"https://www.amazon.co.uk/OpenGL-Shading-Language-Cookbook-Second/dp/1782167021/ref=dp_ob_title_bk\" rel=\"nofollow noreferrer\">OpenGL Shading Language (GLSL) Cookbook</a>, Second Edition which is a helpful guide for GLSL.</p>\n\n<p>Hopefully the above will be enough to get you started. </p>\n"}], "owner": {"reputation": 1, "user_id": 10384508, "user_type": "registered", "profile_image": "https://graph.facebook.com/1003439406452424/picture?type=large", "display_name": "Robert Hamm", "link": "https://stackoverflow.com/users/10384508/robert-hamm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "closed_date": 1537356123, "answer_count": 1, "score": -7, "last_activity_date": 1537356543, "creation_date": 1537354221, "question_id": 52404162, "link": "https://stackoverflow.com/questions/52404162/beginner-c-graphics-moving-past-the-console", "closed_reason": "Not suitable for this site", "title": "Beginner C++ Graphics (moving past the console)?", "body": "<p>I have been using console for a while now. I would like to move on past the words_on_the_screen. \nI read about visual C++, I read about graphic engines .. I am confused on this topic .. I know not where to go next but I do want to learn graphic programming....</p>\n"}, {"tags": ["c++", "mqtt", "mosquitto"], "comments": [{"owner": {"reputation": 8101, "user_id": 9199167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqdLV.jpg?s=128&g=1", "display_name": "Max Vollmer", "link": "https://stackoverflow.com/users/9199167/max-vollmer"}, "edited": false, "score": 0, "creation_date": 1537355530, "post_id": 52404126, "comment_id": 91752677, "body": "The type <code>mosquitto</code> is not defined at this point. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, so we can give proper help."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 1, "creation_date": 1537418801, "post_id": 52404126, "comment_id": 91778573, "body": "I believe your inability to access members of that struct is intentional -- the designers of the API don&#39;t want you to access them, because if you do, your code will break if/when they decide to change the contents of that struct in a future release.  (the fact that the struct is defined inside a header file with the string &quot;internal&quot; in its filename is a strong hint that you should not be using any of the contents of that file directly)"}], "answers": [{"comments": [{"owner": {"reputation": 9633, "user_id": 429431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76ee7eb6c9044a977de255270ea1125c?s=128&d=identicon&r=PG", "display_name": "ralight", "link": "https://stackoverflow.com/users/429431/ralight"}, "edited": false, "score": 1, "creation_date": 1537457322, "post_id": 52417708, "comment_id": 91800508, "body": "Please don&#39;t do this, as noted the contents of that struct are considered internal to the broker and not yours to look at."}], "tags": [], "owner": {"reputation": 1, "user_id": 8601958, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MhKZFfOXMEk/AAAAAAAAAAI/AAAAAAAAAHs/mHg11bar-kk/photo.jpg?sz=128", "display_name": "Phuc Le Minh", "link": "https://stackoverflow.com/users/8601958/phuc-le-minh"}, "is_accepted": false, "score": 0, "last_activity_date": 1537418329, "creation_date": 1537418329, "answer_id": 52417708, "question_id": 52404126, "link": "https://stackoverflow.com/questions/52404126/cannot-access-elements-of-struct-mosquitto-at-mosquitto-mqtt-broker-plugin/52417708#52417708", "title": "Cannot access elements of struct mosquitto at Mosquitto MQTT Broker plugin", "body": "<p>let download source code, include needed header file in your plugin implement and using this Makefile</p>\n\n<blockquote>\n  <p>NAME      = mosquitto_auth_plugin_http</p>\n  \n  <p>MOSQUITTO = ./mosquitto-1.5.2</p>\n  \n  <p>INC       = -I. -I$(MOSQUITTO)/ -I$(MOSQUITTO)/lib -I$(MOSQUITTO)/src</p>\n  \n  <p>CFLAGS    = -Wall -Werror -fPIC</p>\n  \n  <p>DEBUG     = -DMQAP_DEBUG</p>\n  \n  <p>LIBS      = -lcurl</p>\n  \n  <p>all: $(NAME).so</p>\n  \n  <p>$(NAME).so: $(NAME).o\n    $(CC) $(CFLAGS) $(INC) -shared $^ -o $@ $(LIBS)</p>\n  \n  <p>%.o : %.c\n    $(CC) -c $(CFLAGS) $(DEBUG) $(INC) $&lt; -o $@</p>\n  \n  <p>clean:\n    rm -f *.o *.so</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 9633, "user_id": 429431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76ee7eb6c9044a977de255270ea1125c?s=128&d=identicon&r=PG", "display_name": "ralight", "link": "https://stackoverflow.com/users/429431/ralight"}, "is_accepted": true, "score": 1, "last_activity_date": 1537457592, "creation_date": 1537457592, "answer_id": 52428620, "question_id": 52404126, "link": "https://stackoverflow.com/questions/52404126/cannot-access-elements-of-struct-mosquitto-at-mosquitto-mqtt-broker-plugin/52428620#52428620", "title": "Cannot access elements of struct mosquitto at Mosquitto MQTT Broker plugin", "body": "<p>Please use the accessor functions provided in <code>mosquitto_broker.h</code>, e.g.</p>\n\n<pre><code>const char *mosquitto_client_id(const struct mosquitto *client);\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5346976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d00be86aa090751ddfdd9704bb7b05?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/5346976/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 502, "favorite_count": 1, "accepted_answer_id": 52428620, "answer_count": 2, "score": 0, "last_activity_date": 1537457592, "creation_date": 1537354124, "last_edit_date": 1537357333, "question_id": 52404126, "link": "https://stackoverflow.com/questions/52404126/cannot-access-elements-of-struct-mosquitto-at-mosquitto-mqtt-broker-plugin", "title": "Cannot access elements of struct mosquitto at Mosquitto MQTT Broker plugin", "body": "<p>I'm implementing a plugin for the mosquitto MQTT broker (version 1.5) and I'm struggling at accessing some elements of the pointer to the struct of mosquitto client inside of my plugin implementation:</p>\n\n<pre><code>#include &lt;mosquitto_plugin.h&gt;\n...\nint mosquitto_auth_acl_check(void *userdata, int access, const struct mosquitto *client, const struct mosquitto_acl_msg *msg)\n{\n     const char *clientid = client-&gt;id;\n     const char *username = client-&gt;username;\n     ...\n}\n</code></pre>\n\n<p>At compile time I retrieve the error:  </p>\n\n<blockquote>\n  <p>error: dereferencing pointer to incomplete type\n    const char *clientid = client->id;</p>\n</blockquote>\n\n<p>Can anybody give me some advice how to access the client data?</p>\n\n<p><strong>Edit:</strong> struct mosquitto is defined inside of the mosquitto source code (mosquitto_internal.h):</p>\n\n<pre><code>struct mosquitto {\n      ...\n      char *id;\n      char *username;\n      ...\n }\n</code></pre>\n\n<p>But mosquitto_internal.h is just for internal usage at mosquitto and cannot be accessed by my plugin (At least I think so...)</p>\n\n<p>Inside of mosquitto_plugin.h (which is provided by the mosquitto and included by my plugin) there is just a \"reference\" to the mosquitto struct:</p>\n\n<pre><code>struct mosquitto;\n</code></pre>\n\n<p>Thus, as long as I'm not accessing any data of the mosquitto struct it compiles successfully, but if I try to access some data like the id it crashes.</p>\n"}, {"tags": ["c++", "linked-list"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1537354031, "post_id": 52403819, "comment_id": 91751848, "body": "Why is <code>flag</code> static? Once you have deleted one node, the function will always return <code>true</code>."}, {"owner": {"reputation": 43, "user_id": 9782866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2ad6a0c2f8768f628164344b8745dd4?s=128&d=identicon&r=PG&f=1", "display_name": "L&#234; Tr&#226;m", "link": "https://stackoverflow.com/users/9782866/l%c3%aa-tr%c3%a2m"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1537354306, "post_id": 52403819, "comment_id": 91752035, "body": "@molbdnilo cause after every recursive loop flag will be 0 although there&#39;s deleted node"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1537354375, "post_id": 52403819, "comment_id": 91752072, "body": "It&#39;s <code>static</code>, so it&#39;s only initialised once, which is the first time the function is called."}, {"owner": {"reputation": 1844, "user_id": 8238512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8ouYe.jpg?s=128&g=1", "display_name": "Rizwan", "link": "https://stackoverflow.com/users/8238512/rizwan"}, "edited": false, "score": 0, "creation_date": 1537354419, "post_id": 52403819, "comment_id": 91752103, "body": "What made you use recursion here. Removing elements in LList is always O(n). Just traverse the list and delete that matches the delete condition."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1537354716, "post_id": 52403819, "comment_id": 91752277, "body": "To debug it, sit down with a pad of paper and a pencil and draw your list and all the pointers. This is the best method for debugging pointer-oriented algorithms and structures."}, {"owner": {"reputation": 43, "user_id": 9782866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2ad6a0c2f8768f628164344b8745dd4?s=128&d=identicon&r=PG&f=1", "display_name": "L&#234; Tr&#226;m", "link": "https://stackoverflow.com/users/9782866/l%c3%aa-tr%c3%a2m"}, "edited": false, "score": 0, "creation_date": 1537354913, "post_id": 52403819, "comment_id": 91752394, "body": "Thank you you guys so much, I will try another way !"}], "answers": [{"tags": [], "owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "is_accepted": false, "score": 0, "last_activity_date": 1537354403, "last_edit_date": 1537354403, "creation_date": 1537354082, "answer_id": 52404113, "question_id": 52403819, "link": "https://stackoverflow.com/questions/52403819/delete-specific-node-in-linked-list/52404113#52404113", "title": "Delete specific Node in Linked list", "body": "<p>Your starting state short-circuits list onto <code>pHead</code>, setting local <code>prev</code> to address of pHead. Why not use <code>pHead -&gt;prev</code>  or <code>nullptr</code>?</p>\n\n<p>And removing elements from doubly linked  list is operation with time compexity O(n) operation. You have to walk through list and collapse those records that match your criteria.</p>\n"}, {"tags": [], "owner": {"reputation": 1694, "user_id": 1538258, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e2c17f9d54320c341a0d7b0b39bff036?s=128&d=identicon&r=PG", "display_name": "Praneeth Peiris", "link": "https://stackoverflow.com/users/1538258/praneeth-peiris"}, "is_accepted": true, "score": 1, "last_activity_date": 1537356456, "last_edit_date": 1537356456, "creation_date": 1537356149, "answer_id": 52404730, "question_id": 52403819, "link": "https://stackoverflow.com/questions/52403819/delete-specific-node-in-linked-list/52404730#52404730", "title": "Delete specific Node in Linked list", "body": "<p>Your approach has several issues.</p>\n\n<ol>\n<li>You're using a static <code>flag</code>. (See the other comments to know why it's bad.)</li>\n<li>You're using recursion. \nSince you're using a static flag, it screws up the recursion.</li>\n<li>You can delete the element while iterating itself, then the runtime would be O(n).</li>\n<li>You can use a doubly linked-list to avoid using the <code>pPrev</code> in the loop.</li>\n</ol>\n\n<p>Here is the proper solution I came up with.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\ntypedef struct product {\n    string ID;\n    double quantity;\n    product* next = NULL;\n} product;\n\nproduct* deleteProducts(product*&amp; pHead, double quantity) {\n    product* pTemp = pHead;\n    product* pPrev = pHead;\n\n    while (pTemp != NULL) {\n        if ( pTemp-&gt;quantity &gt; quantity ){\n            if ( pTemp == pHead ){\n                cout &lt;&lt; \"Deleteing Current Head \" &lt;&lt;  pTemp-&gt;quantity &lt;&lt; endl;\n                product* pTmp = pHead;\n                pTemp = pTemp-&gt;next;\n                pHead = pPrev = pTemp;\n                delete pTmp;\n            }\n            else{\n                cout &lt;&lt; \"Deleteing Node\" &lt;&lt;  pTemp-&gt;quantity &lt;&lt; endl;\n                product* pNext = pTemp-&gt;next;\n                delete pTemp;\n                pTemp = pNext;\n                pPrev-&gt;next = pTemp;\n            }\n        }\n        else{        \n            pPrev = pTemp;\n            pTemp = pTemp-&gt;next;\n        }\n    }\n\n    return pHead;\n}\n\nbool printProducts(product*&amp; pHead) {\n    product* pTemp = pHead;\n\n    while (pTemp != NULL) {\n        cout &lt;&lt; pTemp-&gt;quantity &lt;&lt; \" \";\n        pTemp = pTemp-&gt;next;\n    }\n\n    cout &lt;&lt; endl;\n}\n\nint main()\n{\n   product* p1 = new product{\"1\", 7};\n   product* p2 = new product{\"2\", 7.5};\n   product* p3 = new product{\"3\", 2};\n   product* p4 = new product{\"4\", 5};\n   product* p5 = new product{\"5\", 6};\n\n   p1-&gt;next = p2;\n   p2-&gt;next = p3;\n   p3-&gt;next = p4;\n   p4-&gt;next = p5;\n\n   if ( deleteProducts(p1, 10) ){\n       cout &lt;&lt; \"Done\" &lt;&lt; endl;\n   }\n\n   printProducts(p1);\n\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 9782866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2ad6a0c2f8768f628164344b8745dd4?s=128&d=identicon&r=PG&f=1", "display_name": "L&#234; Tr&#226;m", "link": "https://stackoverflow.com/users/9782866/l%c3%aa-tr%c3%a2m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 52404730, "answer_count": 2, "score": 1, "last_activity_date": 1537356456, "creation_date": 1537353183, "question_id": 52403819, "link": "https://stackoverflow.com/questions/52403819/delete-specific-node-in-linked-list", "title": "Delete specific Node in Linked list", "body": "<p>I have a linked list like this</p>\n\n<pre><code>struct product {\nstring ID;\ndouble quantity;\nproduct* next = NULL;\n};\n</code></pre>\n\n<p>And I want to delete all products with quantity less than a number.\nThis function returns true if at least one product are deleted, otherwise returns false. Here is my code</p>\n\n<pre><code>bool deleteProducts(product*&amp; pHead, double quantity) {\n    static int flag = 0;\n    product* pTemp = pHead;\n    product* prev = pHead;\n    if (pTemp != NULL &amp;&amp; pTemp-&gt;quantity &lt;= quantity) pHead = pTemp-&gt;next;\n    while (pTemp != NULL &amp;&amp; pTemp-&gt;quantity &gt; quantity) {\n        prev = pTemp;\n        pTemp = pTemp-&gt;next;\n    }\n    if (pTemp == NULL) return flag;\n    flag = 1;\n    prev-&gt;next = pTemp-&gt;next;\n    deleteProducts(prev-&gt;next, quantity);\n}\n</code></pre>\n\n<p>But when I have a list (quantities only) like this: </p>\n\n<pre><code>7 -&gt; 7.5 -&gt; 2 -&gt; 5 -&gt; 6\n</code></pre>\n\n<p>And I run the function with quantity = 10, it return:</p>\n\n<pre><code>7.5 -&gt; 5\n</code></pre>\n\n<p>It's not true, can anybody explain for me. Thanks in advance!</p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 0, "creation_date": 1537373899, "post_id": 52403809, "comment_id": 91764134, "body": "Are you sure this example compiles? In the <code>my_thread</code> constructor, you use <code>par-&gt;f</code>, but <code>par</code> isn&#39;t a pointer, nor does it have a custom <code>operator-&gt;</code>"}, {"owner": {"reputation": 1156, "user_id": 3121568, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ZzUrW.jpg?s=128&g=1", "display_name": "meguli", "link": "https://stackoverflow.com/users/3121568/meguli"}, "reply_to_user": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 0, "creation_date": 1537382445, "post_id": 52403809, "comment_id": 91768294, "body": "It was definitely compiling and running, maybe I changed the code while playing with it. That should be dot operator and I am editing the question as such."}], "answers": [{"comments": [{"owner": {"reputation": 1156, "user_id": 3121568, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ZzUrW.jpg?s=128&g=1", "display_name": "meguli", "link": "https://stackoverflow.com/users/3121568/meguli"}, "edited": false, "score": 0, "creation_date": 1537425667, "post_id": 52412420, "comment_id": 91781220, "body": "But why, shouldn&#39;t <code>chops::my_thread&lt;chops::log&gt; t3();</code> call the default constructor as well? I did as you said and it works fine but I still don&#39;t get why above line does not call the default constructor."}, {"owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "reply_to_user": {"reputation": 1156, "user_id": 3121568, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ZzUrW.jpg?s=128&g=1", "display_name": "meguli", "link": "https://stackoverflow.com/users/3121568/meguli"}, "edited": false, "score": 0, "creation_date": 1537425838, "post_id": 52412420, "comment_id": 91781306, "body": "@meguli Explanation of this issue you have here - <a href=\"https://en.wikipedia.org/wiki/Most_vexing_parse\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Most_vexing_parse</a>. Try <code>chops::my_thread&lt;chops::log&gt; t3{};</code> to instance object."}], "tags": [], "owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "is_accepted": true, "score": 2, "last_activity_date": 1537382880, "creation_date": 1537382880, "answer_id": 52412420, "question_id": 52403809, "link": "https://stackoverflow.com/questions/52403809/why-thread-function-is-not-called-here-in-tinythread/52412420#52412420", "title": "Why thread function is not called here in TinyThread++", "body": "<p>After this line</p>\n\n<pre><code>chops::my_thread&lt;chops::log&gt; t3();\n</code></pre>\n\n<p>try invoke </p>\n\n<pre><code>t3();\n</code></pre>\n\n<p>and you will get <code>function t3 is undefined</code> - <em>boom</em>, surprise. </p>\n\n<p>You have declared function which doesn't take any arguments and returns <code>my_thread</code> object. If you want to create instance of my_thread write:</p>\n\n<pre><code>chops::my_thread&lt;chops::log&gt; t3;\n</code></pre>\n"}], "owner": {"reputation": 1156, "user_id": 3121568, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ZzUrW.jpg?s=128&g=1", "display_name": "meguli", "link": "https://stackoverflow.com/users/3121568/meguli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 52412420, "answer_count": 1, "score": 0, "last_activity_date": 1537382880, "creation_date": 1537353142, "last_edit_date": 1537382458, "question_id": 52403809, "link": "https://stackoverflow.com/questions/52403809/why-thread-function-is-not-called-here-in-tinythread", "title": "Why thread function is not called here in TinyThread++", "body": "<p>I have a program where I can't use C++11 and I am using TinyThread++ for threading support since it follows the standard C++ API as much as possible. I have extracted a minimal working example from my program, though I am not sure if I have captured the problem exactly. No matter, here is the code:</p>\n\n<pre><code>namespace chops {\n    template &lt;typename Fun&gt;\n    struct my_thread_par {\n        Fun f;\n    };\n\n    template &lt;typename Fun&gt;\n    void my_call(void* args) {\n        std::cout &lt;&lt; \"here2\\n\";\n        my_thread_par&lt;Fun&gt; *par = (my_thread_par&lt;Fun&gt;*) args;\n        par-&gt;f();\n    }\n\n\n    template &lt;typename Fun&gt;\n    struct my_thread {\n        my_thread() {\n            std::cout &lt;&lt; \"here1\\n\";\n            Fun f;\n            my_thread_par&lt;Fun&gt; par;\n            par.f = f;\n            tthread::thread t(my_call&lt;Fun&gt;, (void *) &amp;par);\n            t.join();\n        }\n    };\n\n    struct log {\n        void operator()() {\n            std::cout &lt;&lt; \"log\\n\";\n        }\n    };\n}\n\nint main() {\n    chops::my_thread&lt;chops::log&gt; t3();\n} \n</code></pre>\n\n<p>In TinyThread++, you need to pack your thread arguments into a struct-like thing and pass it as <code>void *</code> , as in pthread API. In this minimal example, the line <code>std::cout &lt;&lt; \"here2\\n\";</code> is not called, which I am thinking due to thread function is not being called. This is strange because I am waiting for thread to join. In fact, debug print <code>here1</code> is also not printed which means <code>my_thread</code> constructor is not being called either.</p>\n\n<p>In my actual program, I can see that thread runs just fine if I wait for them to join but if I do <code>t.detach()</code> instead of joining, It also does not print anything. So with all that in mind, and by the minimal example, what can cause a thread to work fine when I wait for join but can't even enter the thread function when detached?</p>\n\n<p>Note: TinyThread++ is a small library, you can just work with the example yourself. I could not share an online link with wandbox since things are multiple file. </p>\n"}, {"tags": ["c++", "qt", "qt5", "qtreeview"], "comments": [{"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1537359383, "post_id": 52403771, "comment_id": 91755030, "body": "<b>Note:</b> This question and its answer are posted as suggested in <a href=\"https://meta.stackoverflow.com/questions/374267/what-is-the-correct-action-when-a-question-has-been-deleted-right-after-the-op-h/374271#374271\">this discussion</a> in order to help anyone who would like to know how to achieve this."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 3602, "user_id": 469983, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a26iy.png?s=128&g=1", "display_name": "Adinia", "link": "https://stackoverflow.com/users/469983/adinia"}, "edited": false, "score": 0, "creation_date": 1537359450, "post_id": 52403771, "comment_id": 91755079, "body": "@Adinia, I do not mind the edit. However, this info is important, so l will put it as a comment."}], "answers": [{"tags": [], "owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "is_accepted": true, "score": 1, "last_activity_date": 1537353024, "creation_date": 1537353024, "answer_id": 52403772, "question_id": 52403771, "link": "https://stackoverflow.com/questions/52403771/how-to-disable-the-default-copy-behavior-in-qtreeview/52403772#52403772", "title": "How to disable the default copy behavior in QTreeView?", "body": "<p>To disable the default copy behavior of <code>QTreeView</code> reimplement <code>QTreeView::keyPressEvent</code> in a subclass, e.g. <code>TreeView</code>, like that:</p>\n\n<pre><code>void TreeView::keyPressEvent(QKeyEvent *event)\n{\n    if (!(event == QKeySequence::Copy))\n        QTreeView::keyPressEvent(event);\n}\n</code></pre>\n\n<p>Then in your code instead of <code>QTreeView</code>:</p>\n\n<pre><code>auto *treeView = new QTreeView(this);\n</code></pre>\n\n<p>instantiate <code>TreeView</code>:</p>\n\n<pre><code>auto *treeView = new TreeView(this);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 65, "user_id": 889044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad94fbecacffe377ab50f0307ae10045?s=128&d=identicon&r=PG", "display_name": "Tony Rietwyk", "link": "https://stackoverflow.com/users/889044/tony-rietwyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1538031906, "creation_date": 1538031906, "answer_id": 52531310, "question_id": 52403771, "link": "https://stackoverflow.com/questions/52403771/how-to-disable-the-default-copy-behavior-in-qtreeview/52531310#52531310", "title": "How to disable the default copy behavior in QTreeView?", "body": "<p>Alternatively, you can use installEventFilter to trap the keystroke events with having to subclass. </p>\n"}], "owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 52403772, "answer_count": 2, "score": 2, "last_activity_date": 1538037464, "creation_date": 1537353024, "last_edit_date": 1538037464, "question_id": 52403771, "link": "https://stackoverflow.com/questions/52403771/how-to-disable-the-default-copy-behavior-in-qtreeview", "title": "How to disable the default copy behavior in QTreeView?", "body": "<p>I have a <code>QTreeView</code> with a <code>QStandardItemModel</code> and I would like to be able to prevent the user from copying the text of the items.</p>\n\n<pre><code>#include &lt;QMainWindow&gt;\n#include &lt;QStandardItemModel&gt;\n#include &lt;QTreeView&gt;\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\npublic:\n    explicit MainWindow(QWidget *parent = nullptr) :\n        QMainWindow(parent)\n    {\n        auto *treeView = new QTreeView(this);\n        auto *model = new QStandardItemModel(this);\n\n        for (int n = 0; n &lt; 5; n++)\n            model-&gt;appendRow(createItem(QString::number(n)));\n\n        treeView-&gt;setModel(model);\n        treeView-&gt;setContextMenuPolicy(Qt::NoContextMenu);\n\n        setCentralWidget(treeView);\n    }\n\nprivate:\n    QStandardItem *createItem(const QString &amp;name)\n    {\n        auto *item = new QStandardItem(name);\n\n        item-&gt;setFlags(Qt::ItemIsEnabled);\n\n        return item;\n    }\n};\n</code></pre>\n\n<p>I have already made the items not editable and disabled the context menu. However, it is still possible for the user to click on an item and copy the text by pressing <code>Ctrl+C</code>. I can use <code>Qt::NoItemFlags</code>, but I want the items to be enabled.</p>\n\n<p>How to accomplish that?</p>\n"}, {"tags": ["c++", "qt", "qwidget", "qscrollarea"], "comments": [{"owner": {"reputation": 467, "user_id": 8106002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e477ad83a0db8ad842418b2a4ee15fa?s=128&d=identicon&r=PG&f=1", "display_name": "pat", "link": "https://stackoverflow.com/users/8106002/pat"}, "edited": false, "score": 0, "creation_date": 1537353244, "post_id": 52403547, "comment_id": 91751360, "body": "You have an <code>Absolute</code> widget which contains 2 <code>QTextEdit</code>: <code>ledit</code>, <code>lledit</code>. You want to show scrollbar in the <code>Absolute</code> widget when only <code>lledit</code> overflows<code>Absolute</code>&#39;s width?"}], "answers": [{"comments": [{"owner": {"reputation": 329, "user_id": 5830044, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/735fb94ed89c7decca648b0ebb096f4e?s=128&d=identicon&r=PG&f=1", "display_name": "george", "link": "https://stackoverflow.com/users/5830044/george"}, "edited": false, "score": 1, "creation_date": 1537379187, "post_id": 52404881, "comment_id": 91766701, "body": "Apologies for the delayed reply..Thanks @scopchanov..it is working!!Could you brief me the significance of creating a new widget and QVBoxLayout(this)?"}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 329, "user_id": 5830044, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/735fb94ed89c7decca648b0ebb096f4e?s=128&d=identicon&r=PG&f=1", "display_name": "george", "link": "https://stackoverflow.com/users/5830044/george"}, "edited": false, "score": 0, "creation_date": 1537379436, "post_id": 52404881, "comment_id": 91766820, "body": "@george, about <i>the significance of creating a new widget</i>: <code>QScrollArea</code> needs a widget to operete on. <code>Absolute</code> is a widget, which contains <code>QScrollArea</code>, which contains widget. Sounds complicated, but it is not - just a proper widget nesting (parenting). The same is with the layout. <code>Absolute</code> needs a layout in order to resize the <code>QScrollArea</code> when it is resized itself."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 329, "user_id": 5830044, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/735fb94ed89c7decca648b0ebb096f4e?s=128&d=identicon&r=PG&f=1", "display_name": "george", "link": "https://stackoverflow.com/users/5830044/george"}, "edited": false, "score": 0, "creation_date": 1537379683, "post_id": 52404881, "comment_id": 91766930, "body": "@george, in general the following is done: you add a widget. Then you set a layout to it (depending on how you want to arrange the subwidgets it contains) and then you add those subwidgets to this layout. If a subwidget has a sub-subwidget you repeat the process, but one level lower."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 329, "user_id": 5830044, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/735fb94ed89c7decca648b0ebb096f4e?s=128&d=identicon&r=PG&f=1", "display_name": "george", "link": "https://stackoverflow.com/users/5830044/george"}, "edited": false, "score": 0, "creation_date": 1537379859, "post_id": 52404881, "comment_id": 91767029, "body": "@george, in this case consider <code>Absolute</code> as the widget, <code>sa</code> as the sub-widget and <code>widget</code> as the sub-sub-widget."}, {"owner": {"reputation": 329, "user_id": 5830044, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/735fb94ed89c7decca648b0ebb096f4e?s=128&d=identicon&r=PG&f=1", "display_name": "george", "link": "https://stackoverflow.com/users/5830044/george"}, "edited": false, "score": 0, "creation_date": 1537381153, "post_id": 52404881, "comment_id": 91767676, "body": "@Thanks for the explanation!! Does it mean, ledit and lledit are not the direct children of Absolute?  and are direct children of the newly created widget? is the new widget an imaginary sort of one?"}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 329, "user_id": 5830044, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/735fb94ed89c7decca648b0ebb096f4e?s=128&d=identicon&r=PG&f=1", "display_name": "george", "link": "https://stackoverflow.com/users/5830044/george"}, "edited": false, "score": 0, "creation_date": 1537381697, "post_id": 52404881, "comment_id": 91767957, "body": "@george, yes: <code>ledit</code> and <code>lledit</code> are not direct children of <code>Absolute</code>. They are children of <code>widget</code>, which is a child of <code>Absolute</code>. <code>widget</code> is not imaginery, it is just not rendered on the screen. But if you set its background to an appropriate color, you will see it."}, {"owner": {"reputation": 329, "user_id": 5830044, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/735fb94ed89c7decca648b0ebb096f4e?s=128&d=identicon&r=PG&f=1", "display_name": "george", "link": "https://stackoverflow.com/users/5830044/george"}, "edited": false, "score": 0, "creation_date": 1537382767, "post_id": 52404881, "comment_id": 91768423, "body": "::Thanks for the reply again..the code works without passing this to <b>new ScrollArea</b>..is it not mandatory?Could u suggest me some tutorials/links from where I can understand this layouting/parent-child hierarchy!!"}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 329, "user_id": 5830044, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/735fb94ed89c7decca648b0ebb096f4e?s=128&d=identicon&r=PG&f=1", "display_name": "george", "link": "https://stackoverflow.com/users/5830044/george"}, "edited": false, "score": 0, "creation_date": 1537383114, "post_id": 52404881, "comment_id": 91768604, "body": "@george, it could be that the parent is set when you add it to the layout. I don&#39;t remember exactly. Anyway, take a look at <a href=\"https://www.youtube.com/watch?v=6KtOzh0StTc&amp;list=PL7C604D492F9E0E0B\" rel=\"nofollow noreferrer\">these episodes</a>. They are already a bit old, but definitely a good start into Qt and GUI programming."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 329, "user_id": 5830044, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/735fb94ed89c7decca648b0ebb096f4e?s=128&d=identicon&r=PG&f=1", "display_name": "george", "link": "https://stackoverflow.com/users/5830044/george"}, "edited": false, "score": 0, "creation_date": 1537383183, "post_id": 52404881, "comment_id": 91768627, "body": "@george and most importantly - don&#39;t stop having fun with it. If you have other questions in this regard, you are very welcome to ask them here."}], "tags": [], "owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "is_accepted": true, "score": 1, "last_activity_date": 1537357651, "last_edit_date": 1592644375, "creation_date": 1537356649, "answer_id": 52404881, "question_id": 52403547, "link": "https://stackoverflow.com/questions/52403547/qtunable-to-directly-add-scrollbar-to-a-widget-with-children/52404881#52404881", "title": "Qt:Unable to directly add scrollbar to a widget with children", "body": "<h1>Cause</h1>\n<p>The way you set the parents when you create the widgets and layouts is not correct.</p>\n<h1>Solution</h1>\n<p>Create the correct parent/child hierarchy and set the desired size of the <code>QScrollArea</code>'s widget. There is no need to set a layout to this widget.</p>\n<h1>Example</h1>\n<p>Here is an example I have prepared for you in order to demonstrate how you could fix <code>Absolute</code>:</p>\n<pre><code>class Absolute : public QWidget {\npublic:\n    Absolute::Absolute(QWidget *parent = nullptr)\n        : QWidget(parent)\n    {\n        auto *sa = new QScrollArea(this);\n        auto *l = new QVBoxLayout(this);\n        auto *widget = new QWidget();\n        auto *ledit = new QTextEdit(widget);\n        auto *lledit = new QTextEdit(widget);\n\n        sa-&gt;setWidgetResizable(true);\n        sa-&gt;setWidget(widget);\n        sa-&gt;setAlignment(Qt::AlignLeft | Qt::AlignTop);\n\n        ledit-&gt;setGeometry(5, 5, 500, 550);\n        lledit-&gt;setGeometry(510, 5, 250, 550);\n\n        widget-&gt;setFixedSize(lledit-&gt;geometry().right(), lledit-&gt;geometry().bottom());\n\n        l-&gt;setMargin(0);\n        l-&gt;addWidget(sa);\n    }\n};\n</code></pre>\n<p><strong>Note:</strong> For demonstration purposes the size of <code>widget</code> is set to <code>(lledit-&gt;geometry().right(), lledit-&gt;geometry().bottom())</code>. You might consider adjusting it according to your specific needs.</p>\n"}], "owner": {"reputation": 329, "user_id": 5830044, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/735fb94ed89c7decca648b0ebb096f4e?s=128&d=identicon&r=PG&f=1", "display_name": "george", "link": "https://stackoverflow.com/users/5830044/george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 0, "accepted_answer_id": 52404881, "answer_count": 1, "score": 2, "last_activity_date": 1540715464, "creation_date": 1537352213, "last_edit_date": 1540715464, "question_id": 52403547, "link": "https://stackoverflow.com/questions/52403547/qtunable-to-directly-add-scrollbar-to-a-widget-with-children", "title": "Qt:Unable to directly add scrollbar to a widget with children", "body": "<p>Im new to Qt programming and I want to add a scrollbar to a widget which is having child widgets within it.I have seen several questions/posts about this like:</p>\n\n<p>1.<a href=\"https://stackoverflow.com/questions/31965772/insert-a-scrollbar-in-a-qt-widget-using-qtcreator\">How to add a scrollbar to parent QWidget</a></p>\n\n<p>2.<a href=\"https://stackoverflow.com/questions/31965772/insert-a-scrollbar-in-a-qt-widget-using-qtcreator\">Insert a scrollbar in a qt widget using qtcreator</a></p>\n\n<p>3.<a href=\"https://stackoverflow.com/questions/37710266/adding-scroll-bar-to-a-qwidget\">Adding scroll bar to a Qwidget</a></p>\n\n<p>4.<a href=\"https://stackoverflow.com/a/18704271/1329652\">QScrollArea missing Scrollbar</a></p>\n\n<p>But most of the answers set a layout to the widget for which we add the scrollbar.</p>\n\n<p><strong>My Problem:</strong></p>\n\n<p>The widget for which I need scrollbar has many child widgets within it.But I haven't added any layout to it.The geometry of the child widgets are  modifiable and so I haven't added any layout to the parent widget.</p>\n\n<p>Below is my code:</p>\n\n<pre><code>class Absolute : public QWidget {\n\npublic:\n Absolute(QWidget *parent = 0);\n};\n\nAbsolute::Absolute(QWidget *parent)\n : QWidget(parent) {\n\nQTextEdit *ledit = new QTextEdit(this);\nledit-&gt;setGeometry(5, 5, 500, 550);\n\nQTextEdit *lledit = new QTextEdit(this);\nlledit-&gt;setGeometry(510, 5, 250, 550);\n\n/*QScrollArea* sa = new QScrollArea();\nsa-&gt;setVerticalScrollBarPolicy(Qt::ScrollBarAlwaysOn);\nsa-&gt;setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOn);\nauto *widget = new QWidget(this);\nsa-&gt;setWidget(widget);\n\nauto *l = new QVBoxLayout(this);\nl-&gt;setMargin(0);\nl-&gt;addWidget(sa);*/\n}\n\nint main(int argc, char *argv[]) {\n\nQApplication app(argc, argv);\n\nAbsolute window;\nwindow.setWindowTitle(\"Absolute\");\nwindow.setGeometry(500,500,1500,1000);\nwindow.show();\n\nreturn app.exec();\n}\n</code></pre>\n\n<p>However without the scrollbar code(commented portion),the UI has those textedits in the given position as set in the setGeometry.</p>\n\n<p>All I need is to bring a scrollbar if the 2nd textedits width is more.</p>\n\n<p>So I tried adding the scrollbar(the commented portion).However I can see only the scrollbar and not the textedits.</p>\n\n<p>Any suggestion/inputs will be really helpful.Thanks in advance!!</p>\n"}, {"tags": ["python", "c++", "windows", "ldap"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7375424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4694df4d9251988101a9d1f61ef3c165?s=128&d=identicon&r=PG&f=1", "display_name": "hkoko", "link": "https://stackoverflow.com/users/7375424/hkoko"}, "edited": false, "score": 0, "creation_date": 1537523369, "post_id": 52435906, "comment_id": 91824768, "body": "I have Python 3.7. I tried to do it through MingW32 according to this: <a href=\"https://github.com/valtron/llvm-stuff/wiki/Building-Python-3.4--extension-modules-with-MinGW\" rel=\"nofollow noreferrer\">github.com/valtron/llvm-stuff/wiki/&hellip;</a> Now I have this error in &quot;running build_ext&quot;     File &quot;c:\\python37\\lib\\distutils\\cygwinccompiler.py&quot;, line 129, in <b>init</b>       if self.ld_version &gt;= &quot;2.10.90&quot;:   TypeError: &#39;&gt;=&#39; not supported between instances of &#39;NoneType&#39; and &#39;str&#39;"}, {"owner": {"reputation": 33, "user_id": 7375424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4694df4d9251988101a9d1f61ef3c165?s=128&d=identicon&r=PG&f=1", "display_name": "hkoko", "link": "https://stackoverflow.com/users/7375424/hkoko"}, "edited": false, "score": 0, "creation_date": 1537525993, "post_id": 52435906, "comment_id": 91826270, "body": "I have also tried with Python 2.7 with Visual C++ for Python 2.7 installed:     c:\\users\\myuser\\appdata\\local\\temp\\2\\pip-build-dbr9yw\\python&zwnj;&#8203;-ldap\\modules\\con stants.h(7) : fatal error C1083: Cannot open include file: &#39;lber.h&#39;: No such fil e or directory     error: command &#39;C:\\\\Users\\\\myuser\\\\AppData\\\\Local\\\\Programs\\\\Common\\\\Micros&zwnj;&#8203;of t\\\\Visual C++ for Python\\\\9.0\\\\VC\\\\Bin\\\\cl.exe&#39; failed with exit status 2"}, {"owner": {"reputation": 199, "user_id": 6000421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e94zR.jpg?s=128&g=1", "display_name": "Alvin", "link": "https://stackoverflow.com/users/6000421/alvin"}, "reply_to_user": {"reputation": 33, "user_id": 7375424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4694df4d9251988101a9d1f61ef3c165?s=128&d=identicon&r=PG&f=1", "display_name": "hkoko", "link": "https://stackoverflow.com/users/7375424/hkoko"}, "edited": false, "score": 0, "creation_date": 1538137817, "post_id": 52435906, "comment_id": 92049280, "body": "@hkoko try to install it by wheel <a href=\"http://www.lfd.uci.edu/~gohlke/pythonlibs/#pyldap\" rel=\"nofollow noreferrer\">lfd.uci.edu/~gohlke/pythonlibs/#pyldap</a>"}], "tags": [], "owner": {"reputation": 199, "user_id": 6000421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e94zR.jpg?s=128&g=1", "display_name": "Alvin", "link": "https://stackoverflow.com/users/6000421/alvin"}, "is_accepted": false, "score": 0, "last_activity_date": 1537497879, "creation_date": 1537497879, "answer_id": 52435906, "question_id": 52403507, "link": "https://stackoverflow.com/questions/52403507/python-ldap-authentication-on-windows-7/52435906#52435906", "title": "Python-LDAP authentication on Windows 7", "body": "<p>You have no <code>C++ Compiler for Python</code>, try to install it in windows:</p>\n\n<p>this is <a href=\"https://www.microsoft.com/en-us/download/confirmation.aspx?id=44266\" rel=\"nofollow noreferrer\">Microsoft Visual C++ Compiler for Python 2.7</a>, if your python version is 2.7, you can install <code>python-ldap</code> successfully after install vc compiler in windows</p>\n"}], "owner": {"reputation": 33, "user_id": 7375424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4694df4d9251988101a9d1f61ef3c165?s=128&d=identicon&r=PG&f=1", "display_name": "hkoko", "link": "https://stackoverflow.com/users/7375424/hkoko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 431, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1537497879, "creation_date": 1537352059, "last_edit_date": 1537369650, "question_id": 52403507, "link": "https://stackoverflow.com/questions/52403507/python-ldap-authentication-on-windows-7", "title": "Python-LDAP authentication on Windows 7", "body": "<p>I would like to install Flask-LDAP to my computer (Windows 7) which has a prerequisite called python-ldap.</p>\n\n<p>I tried to install according to this one:</p>\n\n<p><a href=\"https://pypi.org/project/python-ldap/3.1.0/\" rel=\"nofollow noreferrer\">https://pypi.org/project/python-ldap/3.1.0/</a></p>\n\n<p>Error message on pip install:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17134.0\\ucrt\\corecrt.h(10) : fatal error C1083: Cannot open include file: 'vcruntime.h': No such file or directory\nerror: command 'C:\\\\Users\\\\...\\\\AppData\\\\Local\\\\Programs\\\\Common\\\\Microsoft\\\\Visual C++ for Python\\\\9.0\\\\VC\\\\bin\\\\x86_amd64\\\\cl.exe' failed with exit status 2\n</code></pre>\n\n<p>Windows SDK 7,10 installed.</p>\n\n<p>Also I am not sure what is going to happen after, because OpenLDAP setup executable asks for serial. I couldn<code>t find a version which can be installed on Windows. Visual C++ is also installed, I didn</code>t find anything related to missing vcruntime.h. There is no file like this on my whole machine.</p>\n\n<p>Could someone help me with a guide how to proceed?</p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["c++", "gnuradio"], "owner": {"reputation": 29, "user_id": 9425581, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jeeMxdr0hKg/AAAAAAAAAAI/AAAAAAAAABI/b2_rFF0ogK0/photo.jpg?sz=128", "display_name": "Kot Leapold", "link": "https://stackoverflow.com/users/9425581/kot-leapold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1537351986, "creation_date": 1537351986, "question_id": 52403482, "link": "https://stackoverflow.com/questions/52403482/gnuradio-c-analog-python-block-rational-resampler-fff", "title": "Gnuradio C++ analog python block rational_resampler_fff", "body": "<p>In gnuradio-companion I use filter block  rational_resampler_fff.\nThis block written using Python. I test grc and I want use flowgraph in C++ app.\nHow I can use python block in C++?</p>\n"}, {"tags": ["c++", "c", "windows", "winapi", "stack"], "comments": [{"owner": {"reputation": 335, "user_id": 4917303, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-tQ6JhO6s9qg/AAAAAAAAAAI/AAAAAAAAAHg/m5MVLqdIDvs/photo.jpg?sz=128", "display_name": "Oriel Cochavi", "link": "https://stackoverflow.com/users/4917303/oriel-cochavi"}, "edited": false, "score": 0, "creation_date": 1537448164, "post_id": 52403473, "comment_id": 91794250, "body": "The question is somewhat unclear, for me at least. if you what to check the stack size of a process in win7 @RbMm answered it. if you want to write an emulator, why don&#39;t create a large stack (let&#39;s say 2MB or larger) and, create some sort of page guard to detect stack overflow, and if you do reach the stack limit either statically make it larger or do it dynamically (it will impact performance, but it&#39;s your choice of stack implementation)."}, {"owner": {"reputation": 335, "user_id": 4917303, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-tQ6JhO6s9qg/AAAAAAAAAAI/AAAAAAAAAHg/m5MVLqdIDvs/photo.jpg?sz=128", "display_name": "Oriel Cochavi", "link": "https://stackoverflow.com/users/4917303/oriel-cochavi"}, "edited": false, "score": 0, "creation_date": 1537448979, "post_id": 52403473, "comment_id": 91794817, "body": "In order to find the maximum stack size on stm32, you must calculate the maximum number of nested functions called by the stm32 application. you have to add the interrupted functions call (like timer \\ watchdog) if exists to the calculation."}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1537356105, "post_id": 52404641, "comment_id": 91753059, "body": "The code is supposed to run on the <a href=\"https://en.wikipedia.org/wiki/STM32\" rel=\"nofollow noreferrer\">STM32</a> architecture. This proposed answer doesn&#39;t acknowledge that."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1537356180, "post_id": 52404641, "comment_id": 91753100, "body": "@IInspectable - how this related to <code>stm32</code> ? and main what is wrong in my code ? concrete what is not correct ?"}, {"owner": {"reputation": 39, "user_id": 5472647, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e90721e71d24b3aa23c3c7ed65ae67fb?s=128&d=identicon&r=PG", "display_name": "charly_b", "link": "https://stackoverflow.com/users/5472647/charly-b"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1537358916, "post_id": 52404641, "comment_id": 91754769, "body": "@IInspectable: The app is for stm, but i am talking about the pc simulation for the app which runs on win32...."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 39, "user_id": 5472647, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e90721e71d24b3aa23c3c7ed65ae67fb?s=128&d=identicon&r=PG", "display_name": "charly_b", "link": "https://stackoverflow.com/users/5472647/charly-b"}, "edited": false, "score": 0, "creation_date": 1537359080, "post_id": 52404641, "comment_id": 91754856, "body": "@charly_b - how i understand you need windows generic code. and i paste it - which will be work on every windows and platform."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 39, "user_id": 5472647, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e90721e71d24b3aa23c3c7ed65ae67fb?s=128&d=identicon&r=PG", "display_name": "charly_b", "link": "https://stackoverflow.com/users/5472647/charly-b"}, "edited": false, "score": 0, "creation_date": 1537361953, "post_id": 52404641, "comment_id": 91756605, "body": "@cha: <i>&quot;i just wanted to make the pc simulation working too&quot;</i> - That doesn&#39;t read like you <b>only</b> want this to run on a PC."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1537362805, "post_id": 52404641, "comment_id": 91757116, "body": "@IInspectable - how the answer must acknowledge of stm32 ? what is wrong here ?"}], "tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": false, "score": 0, "last_activity_date": 1537357187, "last_edit_date": 1537357187, "creation_date": 1537355879, "answer_id": 52404641, "question_id": 52403473, "link": "https://stackoverflow.com/questions/52403473/get-current-used-stack-size-for-win7/52404641#52404641", "title": "Get current used stack size for win7", "body": "<blockquote>\n  <p>I need to find the current threads used stack size. (usedstacksize !=\n  maximumstacksize)</p>\n</blockquote>\n\n<p>in this case the <code>GetCurrentThreadStackLimits</code> wrong function for you at all, because it return <em>allocated</em> stack size. so <em>maximumstacksize</em> possible stack size. but usual most memory is reserved, yet not allocated. if you want exactly used stack size - you need read it from <code>NT_TIB</code> </p>\n\n<pre><code>void GetCurrentThreadUsedStackLimits(PULONG_PTR LowLimit,  PULONG_PTR HighLimit )\n{\n    NT_TIB* tib = (NT_TIB*)NtCurrentTeb();\n    *HighLimit = (ULONG_PTR)tib-&gt;StackBase;\n    *LowLimit = (ULONG_PTR)tib-&gt;StackLimit;\n}\n</code></pre>\n\n<p>the <code>HighLimit</code> will be the same which return <code>GetCurrentThreadStackLimits</code>, but <code>LowLimit</code> will be usual different - the <code>GetCurrentThreadStackLimits</code> return allocation base of stack (so it possible maximum size, when <code>NT_TIB.StackLimit</code> is currently allocated stack limit (which can grow down)</p>\n\n<hr>\n\n<p>if you want implement functionality of <code>GetCurrentThreadStackLimits</code> (but note - it not return <em>maximum</em> stack size. you can do next:</p>\n\n<pre><code>ULONG GetCurrentThreadStackLimits_old( _Out_ PULONG_PTR LowLimit, _Out_ PULONG_PTR HighLimit )\n{\n    static void (WINAPI* GetCurrentThreadStackLimits)(PULONG_PTR , PULONG_PTR);\n\n    if (!GetCurrentThreadStackLimits)\n    {\n        *(void**)&amp;GetCurrentThreadStackLimits = GetProcAddress(GetModuleHandle(L\"kernel32\"), \"GetCurrentThreadStackLimits\");\n\n        if (!GetCurrentThreadStackLimits)\n        {\n            NT_TIB* tib = (NT_TIB*)NtCurrentTeb();\n            *HighLimit = (ULONG_PTR)tib-&gt;StackBase;\n\n            MEMORY_BASIC_INFORMATION mbi;\n            if (VirtualQuery(tib-&gt;StackLimit, &amp;mbi, sizeof(mbi)))\n            {\n                *LowLimit = (ULONG_PTR)mbi.AllocationBase;\n                return 0;\n            }\n\n            return GetLastError();\n        }\n    }\n\n    GetCurrentThreadStackLimits(LowLimit, HighLimit);\n    return 0;\n}\n</code></pre>\n\n<p>so we first try get address of <code>GetCurrentThreadStackLimits</code> from <code>\"kernel32\"</code>. possible and use <a href=\"https://docs.microsoft.com/en-us/windows/desktop/apiindex/windows-8-api-sets\" rel=\"nofollow noreferrer\"><code>\"api-ms-win-core-processthreads-l1-1-1\"</code></a> here instead <code>\"kernel32\"</code>. if we got system suplied function pointer - use it. if no (win7 -) - yourself query this limits</p>\n\n<hr>\n"}, {"comments": [{"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1537568388, "post_id": 52405612, "comment_id": 91846733, "body": "Why the downvotes, if this does what the OP wants?  If you want to downvote, downvote the <i>question</i> for lack of clarity.  Also, this code will not work for 64 bit apps - return INT_PTR or similar."}], "tags": [], "owner": {"reputation": 39, "user_id": 5472647, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e90721e71d24b3aa23c3c7ed65ae67fb?s=128&d=identicon&r=PG", "display_name": "charly_b", "link": "https://stackoverflow.com/users/5472647/charly-b"}, "is_accepted": false, "score": -4, "last_activity_date": 1537359152, "creation_date": 1537359152, "answer_id": 52405612, "question_id": 52403473, "link": "https://stackoverflow.com/questions/52403473/get-current-used-stack-size-for-win7/52405612#52405612", "title": "Get current used stack size for win7", "body": "<p>i found a suprisingly easy 'quick and dirty' solution. (which is quite obvious)</p>\n\n<p>It's just declaring a local variable in a function and getting the adress of that variable:</p>\n\n<pre><code>uint GetCurrentStackAdress()\n{\n  uint aDummy;\n  return reinterpret_cast&lt;uint&gt;(&amp;aDummy);\n}\n</code></pre>\n\n<p>That should work on most systems i guess and for my diagnostic purpose its dirty enough ;-).</p>\n"}], "owner": {"reputation": 39, "user_id": 5472647, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e90721e71d24b3aa23c3c7ed65ae67fb?s=128&d=identicon&r=PG", "display_name": "charly_b", "link": "https://stackoverflow.com/users/5472647/charly-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 590, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1537363004, "creation_date": 1537351975, "last_edit_date": 1537363004, "question_id": 52403473, "link": "https://stackoverflow.com/questions/52403473/get-current-used-stack-size-for-win7", "title": "Get current used stack size for win7", "body": "<p>is there a windows7 function for GetCurrentThreadStackLimits which seems to work only on windows >= 8 ? [1] and - if not - how can i achieve this info on win 7?</p>\n\n<p>I need to find the current threads used stack size. (usedstacksize != maximumstacksize)</p>\n\n<p>Thank you!</p>\n\n<p>PS: It is for diagnostic purpose. We need to find the stack size to reserve for a stm32 application and i just wanted to make the pc simulation working too.</p>\n\n<p>[1]: When calling the function the program compiles but at runtime a messagebox pops up that says \"function entry point can not be found in kernel32.dll\" The documentation states windows8 is required for this function:\n<a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/processthreadsapi/nf-processthreadsapi-getcurrentthreadstacklimits\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/desktop/api/processthreadsapi/nf-processthreadsapi-getcurrentthreadstacklimits</a></p>\n"}]