[{"tags": ["c++", "loops", "for-loop", "coding-style"], "comments": [{"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "edited": false, "score": 3, "creation_date": 1451520658, "post_id": 34539123, "comment_id": 56820657, "body": "<code>for(double i = ...</code> While the question itself has been answered, I&#39;ll just note that having a <code>double</code> as the control variable of a <code>for</code> loop is ill advised (except in very special cases, which shouldn&#39;t be a concern when you start learning C++). Due to the limited floating point precision, neither loop is guaranteed to always run exactly 10 times."}], "answers": [{"tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 1, "last_activity_date": 1451520249, "creation_date": 1451520249, "answer_id": 34539167, "question_id": 34539123, "link": "https://stackoverflow.com/questions/34539123/is-it-acceptable-in-c-to-have-a-non-incremented-variable-in-a-for-loop/34539167#34539167", "title": "Is it acceptable in C++ to have a non incremented variable in a For Loop?", "body": "<p>Both are valid, the second one is more explicit and readable. Since <code>i</code> is not modified in the <code>for</code> loop block, one could instantly say how many times the loop will iterate.</p>\n"}, {"tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 1, "last_activity_date": 1451521033, "last_edit_date": 1451521033, "creation_date": 1451520298, "answer_id": 34539173, "question_id": 34539123, "link": "https://stackoverflow.com/questions/34539123/is-it-acceptable-in-c-to-have-a-non-incremented-variable-in-a-for-loop/34539173#34539173", "title": "Is it acceptable in C++ to have a non incremented variable in a For Loop?", "body": "<p>The <code>for</code> statement defined in the C++ standard as:</p>\n\n<pre><code>for ( for-init-statement; optional condition; optional expression) statement\n</code></pre>\n\n<p>and is equivalent to</p>\n\n<pre><code>{\n    for-init-statement\n    while ( condition ) {\n        statement\n        expression ;\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>except that names declared in the for-init-statement are in the same declarative-region as those declared in the condition, and except that a <code>continue</code> in statement (not enclosed in another iteration statement) will\n  execute expression before re-evaluating condition.</p>\n</blockquote>\n\n<p>So both are valid.  But the second has more of a C++ style since the <em>expression</em> part is supposed to give you an idea of how the loop is controlled.</p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 2, "last_activity_date": 1451520365, "creation_date": 1451520365, "answer_id": 34539185, "question_id": 34539123, "link": "https://stackoverflow.com/questions/34539123/is-it-acceptable-in-c-to-have-a-non-incremented-variable-in-a-for-loop/34539185#34539185", "title": "Is it acceptable in C++ to have a non incremented variable in a For Loop?", "body": "<p>The bad style of first snippet is to have unused statement <code>i</code>.\nPrefer in this case:</p>\n\n<pre><code>for(int i = userNumber; i &lt; userNumber + 10; /*empty*/)\n{\n    cout &lt;&lt; ++i &lt;&lt; endl;\n}\n</code></pre>\n\n<p>For trivial case, the second snippet is better as clearer. </p>\n"}], "owner": {"reputation": 89, "user_id": 5732456, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6b769017e61a7fa6332cb84f50a06076?s=128&d=identicon&r=PG&f=1", "display_name": "KrissyMichaelsson", "link": "https://stackoverflow.com/users/5732456/krissymichaelsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 34539185, "answer_count": 3, "score": 0, "last_activity_date": 1451521033, "creation_date": 1451519978, "question_id": 34539123, "link": "https://stackoverflow.com/questions/34539123/is-it-acceptable-in-c-to-have-a-non-incremented-variable-in-a-for-loop", "title": "Is it acceptable in C++ to have a non incremented variable in a For Loop?", "body": "<p>So I'm trying to learn C++ and I have this loop:</p>\n\n<pre><code>if (userNumber &gt;= 0) \n{\n     for(double i = userNumber; i &lt; userNumber + 10; i)\n     {\n         cout &lt;&lt; ++i &lt;&lt; endl;\n     }\n}\n</code></pre>\n\n<p>This has the same output as:</p>\n\n<pre><code>if (userNumber &gt;= 0) \n{\n     for(double i = userNumber; i &lt; userNumber + 10; i++)\n     {\n         cout &lt;&lt; i + 1 &lt;&lt; endl;\n     }\n}\n</code></pre>\n\n<p>Is the first form acceptable, or is it bad style?</p>\n"}, {"tags": ["c++", "templates", "function-object"], "comments": [{"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1451520091, "post_id": 34539116, "comment_id": 56820492, "body": "which version of g++ did you use? Did you specify <code>std=c++14</code> ?"}, {"owner": {"reputation": 901, "user_id": 2628157, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RzfG.jpg?s=128&g=1", "display_name": "fYre", "link": "https://stackoverflow.com/users/2628157/fyre"}, "reply_to_user": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1451520330, "post_id": 34539116, "comment_id": 56820554, "body": "No, it was c++11, it was 5.1.0"}], "answers": [{"tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 1, "last_activity_date": 1451520409, "creation_date": 1451520409, "answer_id": 34539195, "question_id": 34539116, "link": "https://stackoverflow.com/questions/34539116/having-function-objects-auto-detect-type-in-c/34539195#34539195", "title": "Having Function Objects Auto Detect Type in c++", "body": "<p>There is a specialization of <a href=\"http://en.cppreference.com/w/cpp/utility/functional/greater\" rel=\"nofollow\"><code>std::greater&lt;void&gt;</code></a>, <code>void</code> being the default template argument of <code>std::greater&lt;class T&gt;</code> since C++14.</p>\n\n<p>This specialization simply implements <code>x &gt; y</code>, deducing argument and return types .</p>\n"}, {"tags": [], "owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "is_accepted": true, "score": 2, "last_activity_date": 1451520983, "last_edit_date": 1451520983, "creation_date": 1451520439, "answer_id": 34539201, "question_id": 34539116, "link": "https://stackoverflow.com/questions/34539116/having-function-objects-auto-detect-type-in-c/34539201#34539201", "title": "Having Function Objects Auto Detect Type in c++", "body": "<p>This is a feature that was introduced by c++14 (which is supported by g++5.1 and can be activated by passing the <code>-std=c++14</code> flag). </p>\n\n<p>If you don't specify a type, the compiler takes the default one (<code>void</code>) for which there exists <a href=\"http://en.cppreference.com/w/cpp/utility/functional/greater_void\" rel=\"nofollow\">a specialization</a>. This specialization has a templated <code>operator()</code> member function for which the parameter types are then deduced by the compiler according to the iterator's value type.</p>\n"}], "owner": {"reputation": 901, "user_id": 2628157, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RzfG.jpg?s=128&g=1", "display_name": "fYre", "link": "https://stackoverflow.com/users/2628157/fyre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 34539201, "answer_count": 2, "score": 2, "last_activity_date": 1451520983, "creation_date": 1451519956, "question_id": 34539116, "link": "https://stackoverflow.com/questions/34539116/having-function-objects-auto-detect-type-in-c", "title": "Having Function Objects Auto Detect Type in c++", "body": "<p>I wanted to sort a vector containing ints in reverse order, but since I had gotten so used to type deduction in c++ I had passed the function object <strong>greater&lt;>()</strong> without specifying int, since what else could it be? This did not work using g++, but did work with the visual studio compiler, however I noticed that void was used by visual studio (not sure if this is ok). Is it possible for a function object to auto deduce types, why or why not? If not is there some workaround, as types can get long to type?</p>\n"}, {"tags": ["c++", "caching"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1451519463, "post_id": 34539006, "comment_id": 56820344, "body": "Can we have a <code>main()</code>?"}, {"owner": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 0, "creation_date": 1451519516, "post_id": 34539006, "comment_id": 56820358, "body": "<a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 9, "user_id": 5732418, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ntf3r4s_qNk/AAAAAAAAAAI/AAAAAAAAACw/UWQ7pFm_6dQ/photo.jpg?sz=128", "display_name": "Audrey Cole", "link": "https://stackoverflow.com/users/5732418/audrey-cole"}, "edited": false, "score": 0, "creation_date": 1451694311, "post_id": 34539006, "comment_id": 56866512, "body": "sadly not, Leetcode has their own testcode which I&#39;m assuming uses this class."}], "owner": {"reputation": 9, "user_id": 5732418, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ntf3r4s_qNk/AAAAAAAAAAI/AAAAAAAAACw/UWQ7pFm_6dQ/photo.jpg?sz=128", "display_name": "Audrey Cole", "link": "https://stackoverflow.com/users/5732418/audrey-cole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1451519193, "creation_date": 1451519193, "question_id": 34539006, "link": "https://stackoverflow.com/questions/34539006/runtime-error-c-on-lru-cache-practice", "title": "Runtime Error (C++) on LRU Cache Practice", "body": "<p>So I was working on the LRU cache problem on Leetcode and in attempting to submit my solution on their site, got a runtime error with the following message:</p>\n\n<p>Runtime Error\nLast executed input:\n1101,[set(253,668),set(202,206),set(1231,3177),get(465),get(1333),set(651,3249),set(453,2472),get(1050),set(145,881),set(1256,1320),set(342,1528),get(37),.......</p>\n\n<p>The problem statement is:\nDesign and implement a data structure for Least Recently Used (LRU) cache. It should support the following operations: get and set.</p>\n\n<p>get(key) - Get the value (will always be positive) of the key if the key exists in the cache, otherwise return -1.\nset(key, value) - Set or insert the value if the key is not already present. When the cache reached its capacity, it should invalidate the least recently used item before inserting a new item.</p>\n\n<p>I've used Xcode in order to test out my code using a LRU capacity of 3 and it gave me the expected behavior and I did not have this runtime error. I would really appreciate it if you could help me understand where I'm going wrong. Thank you so much in advance!</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nclass listNode {\npublic:\n    listNode *prev;\n    listNode *next;\n    int key;\n    int data;\n};\n\nclass LRUCache{\npublic:\n    LRUCache(int capacity) {\n       this-&gt;capacity = capacity;\n       this-&gt;currentSize = 0;\n       tail = NULL;\n       head = NULL;\n    }\n\n    int get(int key) {\n        // If you can find the key\n        if(cache.find(key) != cache.end()) {\n            // Mark it as most recently used\n            head-&gt;prev = cache[key];\n            head = cache[key];\n            cache[key]-&gt;prev = NULL;\n\n            return cache[key]-&gt;data;\n\n        }\n        else {\n             return -1;\n        }\n     }\n\n     void set(int key, int value) {\n     // If you can find the key\n     if(cache.find(key) != cache.end()) {\n         // Change the value\n         cache[key]-&gt;data = value;\n         return;\n     }\n     else {\n         currentSize ++;\n\n         // Create a new node and insert at the tail\n         if (currentSize == 1) {\n             listNode *node = new listNode();\n             node-&gt;key = key;\n             node-&gt;data = value;\n             cache[key] = node;\n             head = node;\n             head-&gt;prev = NULL;\n             head-&gt;next = NULL;\n             tail = head;\n\n             // No point in having a LRU cache with a maxSize of 0 so we're OK\n         }\n         else {\n\n             listNode *node = new listNode();\n             node-&gt;data = value;\n             node-&gt;key = key;\n             node-&gt;prev = tail;\n             tail-&gt;next = node;\n             node-&gt;next = NULL;\n             tail = node;\n             cache[key] = node;\n\n\n             // Remove the most recently used item if we are at capacity\n             if(currentSize &gt; capacity) {\n                 listNode *trash = head;\n                 head = head-&gt;next;\n\n                 cache.erase(trash-&gt;key);\n                 delete trash;\n             }\n         }\n         return;\n     }\n }\nprivate:\n    int capacity;\n    int currentSize;\n    map&lt;int, listNode*&gt; cache;\n    int mostRecentlyUsedKey;\n    listNode *head; // Head is the most recently used\n    listNode *tail;\n};\n</code></pre>\n"}, {"tags": ["c++", "templates", "c++11", "vector"], "comments": [{"owner": {"reputation": 1306, "user_id": 1628919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd5cdad968abf48f8911fac02719bce?s=128&d=identicon&r=PG", "display_name": "Untitled123", "link": "https://stackoverflow.com/users/1628919/untitled123"}, "edited": false, "score": 1, "creation_date": 1451518796, "post_id": 34538933, "comment_id": 56820168, "body": "why was this downvoted?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1451519065, "post_id": 34538933, "comment_id": 56820239, "body": "Are you sure that with the <code>friend</code>version, <code>assert(v1 == e);</code> would compile?"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1451519619, "post_id": 34538933, "comment_id": 56820386, "body": "@YSC Yes, I have added a link to Coliru, let me know if it addresses your question fully."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1451519813, "post_id": 34538933, "comment_id": 56820427, "body": "Ok It does. THank you for the mcve."}, {"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 1, "creation_date": 1451519863, "post_id": 34538933, "comment_id": 56820438, "body": "Not an answer because this is just a guess, but I believe the definition of vector and its associated functions is older than this particular application of the friend feature."}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 0, "creation_date": 1451520179, "post_id": 34538933, "comment_id": 56820514, "body": "That&#39;s not an MCVE, as it compiles and runs as expected, it doesn&#39;t demonstrate the problem. How is <code>StrongTypedef</code> actually defined? In your example even <code>e.size()</code> won&#39;t compile."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 0, "creation_date": 1451520179, "post_id": 34538933, "comment_id": 56820515, "body": "@SebastianRedl A pretty interesting guess, although honestly I&#39;d be a bit surprised it that were the case. Are you saying that in C++98, the second approach would fail to compile, or have different semantics?"}, {"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 0, "creation_date": 1451520281, "post_id": 34538933, "comment_id": 56820541, "body": "@NirFriedman No, I&#39;m saying that in the evolution of leading up to C++98, the definition of vector was fixed before friend functions defined in the class worked the way they do now, and the committee didn&#39;t think of changing vector, or didn&#39;t think it was worth the time."}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "reply_to_user": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 0, "creation_date": 1451520308, "post_id": 34538933, "comment_id": 56820547, "body": "@SebastianRedl This use of <code>friend</code> is presented in Barton &amp; Nackman (1994) <i>Scientific and Engineering C++</i>, so pretty much contemporaneous with the standardization of STL"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 0, "creation_date": 1451520370, "post_id": 34538933, "comment_id": 56820571, "body": "@Oktalist I edited the coliru link to show what happens with the first approach. I&#39;m not going to get into the entire definition of StrongTypedef, it&#39;s way too involved. I don&#39;t understand what e.size() has to do with anything, an implicit conversion cannot occur on an object when you are calling its member function."}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 0, "creation_date": 1451520653, "post_id": 34538933, "comment_id": 56820653, "body": "@NirFriedman The reason I ask is because it works if <code>StrongTypedef&lt;T&gt;</code> inherits from <code>T</code>, which is how I would implement <code>StrongTypedef</code> anyway: <a href=\"http://coliru.stacked-crooked.com/a/52bd27347984cbb4\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/52bd27347984cbb4</a> You even get the implicit conversion for free"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1451520821, "post_id": 34538933, "comment_id": 56820698, "body": "Personally, I&#39;d be less than happy if <code>v1 == e</code> converted <code>e</code> to a vector (so I wouldn&#39;t define an implicit conversion from <code>EmployeeScores</code> to a <code>vector&lt;int&gt;</code>).   If you really want to do such comparisons, provide appropriate overloaded operators for the <code>EmployeeScores</code> class - the implementation of those is trivial."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 0, "creation_date": 1451520912, "post_id": 34538933, "comment_id": 56820719, "body": "@Oktalist: You cannot inherit from <code>int</code> though."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 0, "creation_date": 1451521461, "post_id": 34538933, "comment_id": 56820866, "body": "@Oktalist This is a fair point, but there&#39;s a lot more to StrongTypedef than just that, it has traits which can expose or not expose various functionality like comparison, concatenation, etc. This is probably doable as well with inheritance but a different approach will be necessary, and since inheritance doesn&#39;t work for primitives (as Jarod noted), I will need to implement and maintain both. As you can see, these traits inject a lot more complexity, which is why I didn&#39;t really want to get into it :-)."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1451521538, "post_id": 34538933, "comment_id": 56820886, "body": "@Jarod42 I wonder though if it would be possible to work around this by inheriting from a class that can be implicitly converted to and from int."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1451521735, "post_id": 34538933, "comment_id": 56820933, "body": "@Peter The decision to implicitly convert back, as well as the presence of other overloaded operators is controlled by traits. That way one implementation provides typedefs that are suitable in a range of situations. The implementation is trivial, but it&#39;s kind of a pain: 6 relational operators, x2 for asymmetry, that&#39;s 12 operators. In addition to the 6 that I already provide between the typdef&#39;ed class, that&#39;s 18 relational operators."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1451522646, "post_id": 34538933, "comment_id": 56821159, "body": "But, philosophically, isn&#39;t the whole point of a <code>StrongTypedef</code> class to explicitly exercise control over how variables/types behave and interact?   Wanting the compiler to be permissive with implicit type conversions seems at odds with that.  Yeah, okay, it may be less convenient but declaring and defining that range of operators is the mechanism by which you control such behaviour."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1451523712, "post_id": 34538933, "comment_id": 56821426, "body": "@Peter well, there&#39;s obviously two directions of implicit conversion: base type to type def, and vice versa. I&#39;d take the position that allowing implicit base type to type def is flat out wrong. But the reverse conversion is a matter of taste and context; I think your view is entirely valid but don&#39;t personally agree it&#39;s always correct."}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1451526408, "post_id": 34539805, "comment_id": 56822043, "body": "<code>A</code> claims to be implicitly convertable-to from <code>B</code>.  A better version has <code>B</code> that has <code>operator A</code>, but in both cases invariants being violated mostly mean the conversion code is bad.  A bigger concern to me would be cost, but even then expensive implicit conversions are also code smell."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1451526447, "post_id": 34539805, "comment_id": 56822050, "body": "By giving A a non explicit constructor from B, you have agreed that everything that accepts an A will also accept a B. There&#39;s nothing special about the comparison operator here. Also, in terms of the standard, A is taking the role of vector, and vector has no such constructors."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1451526756, "post_id": 34539805, "comment_id": 56822103, "body": "The visibility issue is present, but it can only ever make a difference if you actually call with the syntax operator==(...). So changing this would be backwards incompatible. But nobody really wants to do this, so it doesn&#39;t explain why it is like this in the first place."}], "tags": [], "owner": {"reputation": 3852, "user_id": 155191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a7azq.jpg?s=128&g=1", "display_name": "Leandro T. C. Melo", "link": "https://stackoverflow.com/users/155191/leandro-t-c-melo"}, "is_accepted": false, "score": 0, "last_activity_date": 1451529457, "last_edit_date": 1451529457, "creation_date": 1451525309, "answer_id": 34539805, "question_id": 34538933, "link": "https://stackoverflow.com/questions/34538933/why-are-stdvector-and-stdstrings-comparison-operators-defined-as-template-f/34539805#34539805", "title": "Why are std::vector and std::string&#39;s comparison operators defined as template functions?", "body": "<p>EDIT: After I re-read my explanation and influenced by a few comments around, I'm convinced my original reasoning is not compelling indeed. My answer essentially attempted to argue that although a value <code>x</code> could be implicitly converted to a value <code>y</code> of a different type, an \"automagically\" equality comparison between the two might not necessarily be expected. For contextualization, I'm still leaving here the code I used as an example.</p>\n\n<pre><code>struct B {};\n\ntemplate &lt;class T&gt;\nstruct A {\n  A() {}\n  A(B) {}\n  friend bool operator==(const A&lt;T&gt;&amp;, const A&lt;T&gt;&amp;) { return false; }\n};\n\n// The template version wouldn't allow this to happen.\n// template &lt;class T&gt;\n// bool operator==(const A&lt;T&gt;&amp;, const A&lt;T&gt;&amp;) { return false; }\n\nint main() {\n  A&lt;B&gt; x;\n  B y;\n  if (x == y) {} //compiles fine\n  return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1451527338, "post_id": 34539952, "comment_id": 56822229, "body": "&quot;As a guess, today Koenig operators would be used in place of template operators.&quot; I doubt it. <code>basic_string_view</code> added a &quot;sufficient additional overloads&quot; rule instead to handle implicit conversions."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 2, "last_activity_date": 1451526567, "creation_date": 1451526567, "answer_id": 34539952, "question_id": 34538933, "link": "https://stackoverflow.com/questions/34538933/why-are-stdvector-and-stdstrings-comparison-operators-defined-as-template-f/34539952#34539952", "title": "Why are std::vector and std::string&#39;s comparison operators defined as template functions?", "body": "<p>The techique you describe (what I call Koenig operators) was not known, at least not widely, at the point <code>vector</code> was designed and originally specified.</p>\n\n<p>Changing it now would require more care than using it originally, and more justification.</p>\n\n<p>As a guess, today Koenig operators would be used in place of template operators.</p>\n"}], "owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 921, "favorite_count": 2, "answer_count": 2, "score": 18, "last_activity_date": 1464116082, "creation_date": 1451518612, "last_edit_date": 1451520000, "question_id": 34538933, "link": "https://stackoverflow.com/questions/34538933/why-are-stdvector-and-stdstrings-comparison-operators-defined-as-template-f", "title": "Why are std::vector and std::string&#39;s comparison operators defined as template functions?", "body": "<p>A little overview. I'm writing a class template that provides a strong typedef; by strong typedef I am contrasting with a regular typedef which just declares an alias. To give an idea:</p>\n\n<pre><code>using EmployeeId = StrongTypedef&lt;int&gt;;\n</code></pre>\n\n<p>Now, there are different schools of thought on strong typedefs and implicit conversions. One of these schools says: not every integer is an EmployeeId, but every EmployeeId is an integer, so you should allow implicit conversions from EmployeeId to integer. And you can implement this, and write things like:</p>\n\n<pre><code>EmployeeId x(4);\nassert(x == 4);\n</code></pre>\n\n<p>This works because <code>x</code> gets implicitly converted to an integer, and then integer equality comparison is used. So far, so good. Now, I want to do this with a vector of integers:</p>\n\n<pre><code>using EmployeeScores = StrongTypedef&lt;std::vector&lt;int&gt;&gt;;\n</code></pre>\n\n<p>So I can do things like this:</p>\n\n<pre><code>std::vector&lt;int&gt; v1{1,2};\nEmployeeScores e(v1);\nstd::vector&lt;int&gt; v2(e); // implicit conversion\nassert(v1 == v2);\n</code></pre>\n\n<p>But I still can't do this:</p>\n\n<pre><code>assert(v1 == e);\n</code></pre>\n\n<p>The reason this doesn't work is because of how <code>std::vector</code> defines its equality check, basically (modulo standardese):</p>\n\n<pre><code>template &lt;class T, class A&gt;\nbool operator==(const vector&lt;T,A&gt; &amp; v1, const vector&lt;T,A&gt; &amp; v2) {\n...\n}\n</code></pre>\n\n<p>This is a function template; because it gets discarded in an earlier phase of lookup it will not allow a type that converts implicitly to vector to be compared.</p>\n\n<p>A different way to define equality would be like this:</p>\n\n<pre><code>template &lt;class T, class A = std::allocator&lt;T&gt;&gt;\nclass vector {\n... // body\n\n  friend bool operator==(const vector &amp; v1, const vector &amp; v2) {\n  ...\n}\n\n} // end of class vector\n</code></pre>\n\n<p>In this second case, the equality operator is not a function template, it's just a regular function that's generated along with the class, similar to a member function. This is an unusual case enabled by the friend keyword.</p>\n\n<p>The question (sorry the background was so long), is why doesn't <code>std::vector</code> use the second form instead of the first? This makes <code>vector</code> behave more like primitive types, and as you can clearly see it helps with my use case. This behavior is even more surprising with <code>string</code> since it's easy to forget that <code>string</code> is just a typedef of a class template.</p>\n\n<p>Two things I've considered: first, some may think that because the friend function gets generated with the class, this will cause a hard failure if the contained type of the vector does not support equality comparison. This is not the case; like member functions of template classes, they aren't generated if unused. Second, in the more general case, free functions have the advantage that they don't need to be defined in the same header as the class, which can have advantages. But this clearly isn't utilized here.</p>\n\n<p>So, what gives? Is there a good reason for this, or was it just a sub-optimal choice?</p>\n\n<p>Edit: I wrote a quick example that demonstrates two things: both that implicit conversion works as desired with the friend approach, and that no hard failures are caused if the templated type doesn't meet the requirements of the equality operator (obviously, assuming the equality operator is not used in that case). Edit: improved to contrast with the first approach: <a href=\"http://coliru.stacked-crooked.com/a/6f8910945f4ed346\">http://coliru.stacked-crooked.com/a/6f8910945f4ed346</a>.</p>\n"}, {"tags": ["c++", "arrays", "templates"], "comments": [{"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1451523448, "post_id": 34538914, "comment_id": 56821346, "body": "The compiler will probably unroll the non-templated version if it&#39;s in the same translation unit as the caller.  If not, possibly <a href=\"https://en.wikipedia.org/wiki/Duff&#39;s_device\" rel=\"nofollow noreferrer\">duff&#39;s device</a> might help."}, {"owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "reply_to_user": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1451565412, "post_id": 34538914, "comment_id": 56834767, "body": "The non templated version has an array bound check in it so if that does not get optimized away performance is lost. The templated Version has no need for that since it can just implement different specializations for the relevant cases."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1451580216, "post_id": 34538914, "comment_id": 56840529, "body": "If the compiler can automatically unroll the recursive calls, it should eliminate the bounds check.  It might be worth checking <code>-S</code> or <code>objdump -d</code>."}], "answers": [{"tags": [], "owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "is_accepted": false, "score": 1, "last_activity_date": 1451521227, "last_edit_date": 1451521227, "creation_date": 1451520841, "answer_id": 34539257, "question_id": 34538914, "link": "https://stackoverflow.com/questions/34538914/casting-array-type-for-recursive-template-evaluation/34539257#34539257", "title": "casting array type for recursive template evaluation", "body": "<p>The error should be pretty clear. For one, <code>len</code> is not a compile time constant, and you cannot have a variable-length array (or cast to a pointer to it). Secondly, how is <code>arrLen</code> supposed to instantiate at compile time, without knowing what <code>len</code> is?</p>\n\n<p>Go with your non-template version.</p>\n"}, {"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 1, "last_activity_date": 1451520947, "creation_date": 1451520947, "answer_id": 34539273, "question_id": 34538914, "link": "https://stackoverflow.com/questions/34538914/casting-array-type-for-recursive-template-evaluation/34539273#34539273", "title": "casting array type for recursive template evaluation", "body": "<p>If <code>len</code> is not a compile time constant integral expression, there is no way you can achieve this. And it would mean nothing, either.\u00b9</p>\n\n<p>You would really just need to pass an <code>array_view</code> or similar. See the CppCoreGuidelines: <a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#Ri-array\" rel=\"nofollow\">https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#Ri-array</a></p>\n\n<h2>\u00b9 Evil Twisted Workaround</h2>\n\n<p>You could always switch on <code>len</code> and do casts:</p>\n\n<pre><code>#include &lt;cstddef&gt;\n#include &lt;string&gt;\n#include &lt;stdexcept&gt;\n\ntemplate &lt;size_t N&gt;\nconstexpr size_t arrLen(int(&amp;)[N]) { return N; }\n\ntemplate &lt;typename T, size_t N&gt; using Array = T[N];\n\nint main(int argc, char** argv)\n{\n    Array&lt;int, 6&gt; arr = { 1, 2, 3, 4, 5, 6 };\n\n    arrLen(arr);\n\n    int * p = &amp;arr[1];\n    size_t len = argc&gt;1? std::stoul(argv[1]) : 3ul;\n\n    size_t result;\n    switch (len) {\n        case 1:  result = arrLen(reinterpret_cast&lt;Array&lt;int, 1&gt;&amp;  &gt;(*p)); break;\n        case 2:  result = arrLen(reinterpret_cast&lt;Array&lt;int, 2&gt;&amp;  &gt;(*p)); break;\n        case 3:  result = arrLen(reinterpret_cast&lt;Array&lt;int, 3&gt;&amp;  &gt;(*p)); break;\n        case 4:  result = arrLen(reinterpret_cast&lt;Array&lt;int, 4&gt;&amp;  &gt;(*p)); break;\n        case 5:  result = arrLen(reinterpret_cast&lt;Array&lt;int, 5&gt;&amp;  &gt;(*p)); break;\n        case 6:  result = arrLen(reinterpret_cast&lt;Array&lt;int, 6&gt;&amp;  &gt;(*p)); break;\n        case 7:  result = arrLen(reinterpret_cast&lt;Array&lt;int, 7&gt;&amp;  &gt;(*p)); break;\n        case 8:  result = arrLen(reinterpret_cast&lt;Array&lt;int, 8&gt;&amp;  &gt;(*p)); break;\n        case 9:  result = arrLen(reinterpret_cast&lt;Array&lt;int, 9&gt;&amp;  &gt;(*p)); break;\n        case 10: result = arrLen(reinterpret_cast&lt;Array&lt;int, 10&gt;&amp; &gt;(*p)); break;\n        case 11: result = arrLen(reinterpret_cast&lt;Array&lt;int, 11&gt;&amp; &gt;(*p)); break;\n        default: throw std::range_error(\"len\");\n    }\n\n    return result;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "edited": false, "score": 0, "creation_date": 1451546014, "post_id": 34540094, "comment_id": 56827010, "body": "yes actually you are correct. When reducing my problem to a minimum i removed the fact that N is constant from my thoughts."}], "tags": [], "owner": {"reputation": 26, "user_id": 2889887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a2c28b0a473cd1083daf0883e90dbc7?s=128&d=identicon&r=PG&f=1", "display_name": "user2889887", "link": "https://stackoverflow.com/users/2889887/user2889887"}, "is_accepted": true, "score": 1, "last_activity_date": 1451546266, "last_edit_date": 1451546266, "creation_date": 1451527836, "answer_id": 34540094, "question_id": 34538914, "link": "https://stackoverflow.com/questions/34538914/casting-array-type-for-recursive-template-evaluation/34540094#34540094", "title": "casting array type for recursive template evaluation", "body": "<p>can't you just replace len in the commented lines with N/2 and N-N/2.\nSomething like this:</p>\n\n<pre><code>template &lt;size_t N&gt;\nint getpeak1D_templated(int(&amp;data)[N])\n{\n    size_t ret = 0;\n    size_t offset = N / 2;\n    if (data[offset] &lt; data[offset - 1])\n    {\n        int * p = data;\n        ret = getpeak1D_templated(*(int(*)[N/2])p);\n    }\n    else if (data[offset] &lt; data[offset + 1])\n    {\n        int * p = &amp;data[offset];\n        ret =  offset + getpeak1D_templated(*(int(*)[N - N/2])p);\n    }\n    else\n    {\n        ret =  offset;\n    }\n    return ret;\n}\n\nint getpeak1D_templated(int(&amp;data)[1])\n{\n    return 0;\n}\n\nint getpeak1D_templated(int(&amp;data)[2])\n{\n    if(data[0] &lt; data[1]) return 1;\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 34540094, "answer_count": 3, "score": 0, "last_activity_date": 1451546266, "creation_date": 1451518456, "last_edit_date": 1451546067, "question_id": 34538914, "link": "https://stackoverflow.com/questions/34538914/casting-array-type-for-recursive-template-evaluation", "title": "casting array type for recursive template evaluation", "body": "<p>I would have loved to include a minimal example, but due to the nature of my question I can not provide one.</p>\n\n<p>I reduce my problem to not being able to typecast an array. Here is a code snippet that shows what I would want to write:</p>\n\n<pre><code>template &lt;size_t N&gt;\nsize_t arrLen(int(&amp;data)[N])\n{\n    return N;\n}\n\nint main(int argc, char** argv)\n{\n    int arr[] = { 1, 2, 3, 4, 5, 6 };\n\n    size_t working = arrLen(arr);\n\n    int * p = &amp;arr[1];\n    size_t len = 3;\n\n    size_t len_is_not_a_constant_value = arrLen(*(int(*)[len])p);\n}\n</code></pre>\n\n<p>My playground algorithm is find any peak in a 1D array where peak is defined as bigger or equal to the peaks neighbors. The algorithm itself is not too important to me. The following code has commented out the lines that i would like to include but can not since it would not compile. The algorithm is incorrect without those lines.</p>\n\n<pre><code>template &lt;size_t N&gt;\nint getpeak1D_templated(int(&amp;data)[N])\n{\n    size_t offset = N / 2;\n\n    if (data[offset] &lt; data[offset - 1])\n    {\n        int * p = data;\n        size_t len = offset;\n        //return getpeak1D_templated(*(int(*)[len])p);\n        return 0;\n    }\n    else if (data[offset] &lt; data[offset + 1])\n    {\n        int * p = &amp;data[offset];\n        size_t len = N - offset;\n        //return offset + getpeak1D_templated(*(int(*)[len])p);\n        return 0;\n    }\n    else\n    {\n        return offset;\n    }\n}\n\nint getpeak1D_templated(int(&amp;data)[1])\n{\n    return 0;\n}\n\nint getpeak1D_templated(int(&amp;data)[2])\n{\n    if(data[0] &lt; data[1]) return 1;\n    return 0;\n}\n</code></pre>\n\n<p>This is the not templated version. This would compile and should be correct.</p>\n\n<pre><code>int getpeak1D(int * data, size_t N)\n{\n    size_t offset = N / 2;\n\n    size_t offset_m1 = offset - 1;\n    size_t offset_p1 = offset + 1;\n\n    if (N &gt;= offset_m1 &amp;&amp; data[offset] &lt; data[offset_m1])\n    {\n        return getpeak1D(data, offset);\n    }\n    else if (N &gt;= offset_p1 &amp;&amp; data[offset] &lt; data[offset_p1])\n    {\n        return offset + getpeak1D(data + offset, N - offset);\n    }\n    else\n    {\n        return offset;\n    }\n}\n</code></pre>\n\n<p>I can see why this <code>*(int(*)[len])p</code> is invalid. </p>\n\n<p>It feels like there is something that I am missing. This recursion terminates and I would be able to write all specializations out by hand (for reasonable starting array sizes). I am assuming that I am doing something wrong here. Somehow this recursion should be possible using templates. </p>\n\n<p>Is there an array casting version that I am missing?</p>\n\n<p>Is there something completely different that I missed?</p>\n\n<p>EDIT: \nI actually <em>can</em> see why this is invalid. My point is N is constant and all operations are so well defined that they could be resolved at compile time. So for an array of size N all branches of the recursion could be unrolled. I am looking for a way of getting there. The cast is incorrect and will never be correct.</p>\n"}, {"tags": ["c++", "qt", "webkit", "qtwebkit"], "comments": [{"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1451519427, "post_id": 34538690, "comment_id": 56820334, "body": "Please include the exact error message in your question"}, {"owner": {"reputation": 1792, "user_id": 592636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dd147c7ef1b6b39fdd37b12ec186f79?s=128&d=identicon&r=PG", "display_name": "kfunk", "link": "https://stackoverflow.com/users/592636/kfunk"}, "edited": false, "score": 0, "creation_date": 1451848413, "post_id": 34538690, "comment_id": 56905997, "body": "&quot;... my version of Qt ...&quot; -- are you mixing Qt versions maybe? <code>libqtwebkit-dev</code> contains the webkit headers, so if you use the <i>distro-provided</i> qmake, you should not be getting these errors."}], "owner": {"reputation": 123, "user_id": 2896292, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/72781d47803cba48b842256e6751a5aa?s=128&d=identicon&r=PG&f=1", "display_name": "eh_whatever", "link": "https://stackoverflow.com/users/2896292/eh-whatever"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1869, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1451576812, "creation_date": 1451517053, "last_edit_date": 1451576812, "question_id": 34538690, "link": "https://stackoverflow.com/questions/34538690/qtwebkit-qwebview-no-such-file-or-directory", "title": "QtWebKit/QWebView: No such file or directory", "body": "<p>I am trying to build a an example that I found at <a href=\"https://github.com/tranter/qt-google-calendar/\" rel=\"nofollow\">https://github.com/tranter/qt-google-calendar/</a>. When I go to build I get an error stating that there is no such directory for QtWebKit/QWebView. I am on Qt 4.8.6 and have confirmed that <code>QT += webkit</code> is in the *.pro file. I can confirm that my version of Qt was compiled with the <code>-webkit</code> option configured. I am using Ubuntu 14.04 and <code>libqtwebkit-dev</code> is installed. Any ideas what else could be causing this?</p>\n\n<p>To clarify, the exact error is <code>QtWebKit/QWebView: No such file or directory</code> it points to the instance of <code>include &lt;QtWebKit/QWebView&gt;</code> in <code>ui_logindialog.h</code></p>\n"}, {"tags": ["c++", "namespaces", "argument-dependent-lookup"], "comments": [{"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "edited": false, "score": 1, "creation_date": 1451516386, "post_id": 34538430, "comment_id": 56819370, "body": "DON&#39;T USE CAPS - THEY&#39;RE UGLY!"}, {"owner": {"reputation": 20650, "user_id": 1335865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3eBZC.png?s=128&g=1", "display_name": "Ralph Tandetzky", "link": "https://stackoverflow.com/users/1335865/ralph-tandetzky"}, "edited": false, "score": 0, "creation_date": 1451517027, "post_id": 34538430, "comment_id": 56819572, "body": "What problem are you trying to overcome? In other words: what&#39;s your actual problem?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1451527468, "post_id": 34538430, "comment_id": 56822251, "body": "Wait, does <code>invert</code> have a different <b>meaning</b> in the two namespaces?  Or is it just efficiency?"}, {"owner": {"reputation": 273, "user_id": 4884156, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/992478580762224/picture?type=large", "display_name": "Cevik", "link": "https://stackoverflow.com/users/4884156/cevik"}, "edited": false, "score": 0, "creation_date": 1451552077, "post_id": 34538430, "comment_id": 56829007, "body": "It&#39;s efficiency in this case. But i&#39;ve defined non template versions in MATH because i can&#39;t do it with N &gt; 3 and a template version in GEOM because the transpose is known at any dimension."}], "answers": [{"comments": [{"owner": {"reputation": 20650, "user_id": 1335865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3eBZC.png?s=128&g=1", "display_name": "Ralph Tandetzky", "link": "https://stackoverflow.com/users/1335865/ralph-tandetzky"}, "edited": false, "score": 0, "creation_date": 1451517129, "post_id": 34538689, "comment_id": 56819607, "body": "Wouldn&#39;t public inheritance be more adequate?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1451517202, "post_id": 34538689, "comment_id": 56819637, "body": "demo with simplified example: <a href=\"http://coliru.stacked-crooked.com/a/3385311075d2e1d4\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/3385311075d2e1d4</a>"}, {"owner": {"reputation": 273, "user_id": 4884156, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/992478580762224/picture?type=large", "display_name": "Cevik", "link": "https://stackoverflow.com/users/4884156/cevik"}, "edited": false, "score": 0, "creation_date": 1451517463, "post_id": 34538689, "comment_id": 56819734, "body": "I have think to this solution a lot.. But i don&#39;t want to fall into the inheritance category because i prefer to keep the liberty to mix MATH::Matrix and GEOM::Matrix without any cast. It&#39;s the same problem with GEOM::Vector and GEOM::Point. They are both vectors and can be used in the same contexts."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1451517541, "post_id": 34538689, "comment_id": 56819765, "body": "ADL still applies though... It is just that now, the template method is an exact match (in this case)."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 273, "user_id": 4884156, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/992478580762224/picture?type=large", "display_name": "Cevik", "link": "https://stackoverflow.com/users/4884156/cevik"}, "edited": false, "score": 0, "creation_date": 1451517992, "post_id": 34538689, "comment_id": 56819932, "body": "@Cevik you can still mix as you want: you can for example perfectly add to your code snippet  something like: <code>MATH::invert(m);</code>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 273, "user_id": 4884156, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/992478580762224/picture?type=large", "display_name": "Cevik", "link": "https://stackoverflow.com/users/4884156/cevik"}, "edited": false, "score": 0, "creation_date": 1451518024, "post_id": 34538689, "comment_id": 56819941, "body": "@Cevik: <a href=\"http://coliru.stacked-crooked.com/a/2dfbbd8d1b084c76\" rel=\"nofollow noreferrer\">Demo</a> where there is still ambiguity. As ADL takes into account base class too."}, {"owner": {"reputation": 273, "user_id": 4884156, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/992478580762224/picture?type=large", "display_name": "Cevik", "link": "https://stackoverflow.com/users/4884156/cevik"}, "edited": false, "score": 0, "creation_date": 1451518340, "post_id": 34538689, "comment_id": 56820045, "body": "@Christophe : if i define MATH::Matrix foo(const MATH::Matrix&amp; m), with inheritance, i must implement GEOM::Matrix foo(const GEOM::Matrix&amp; m) because a value is returned..."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 273, "user_id": 4884156, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/992478580762224/picture?type=large", "display_name": "Cevik", "link": "https://stackoverflow.com/users/4884156/cevik"}, "edited": false, "score": 1, "creation_date": 1451518805, "post_id": 34538689, "comment_id": 56820171, "body": "@Cevik yes.  You have to decide in your design whether you want to have GEOM specific matrixes (and use this deifference in name lookup, at the cost of some extra work) or if you prefer to use only one type of Matrixes but have to be more explicit in the function calls."}, {"owner": {"reputation": 273, "user_id": 4884156, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/992478580762224/picture?type=large", "display_name": "Cevik", "link": "https://stackoverflow.com/users/4884156/cevik"}, "edited": false, "score": 0, "creation_date": 1451518944, "post_id": 34538689, "comment_id": 56820209, "body": "This make sense indeed."}, {"owner": {"reputation": 20650, "user_id": 1335865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3eBZC.png?s=128&g=1", "display_name": "Ralph Tandetzky", "link": "https://stackoverflow.com/users/1335865/ralph-tandetzky"}, "edited": false, "score": 0, "creation_date": 1451519307, "post_id": 34538689, "comment_id": 56820304, "body": "I don&#39;t think that inheritance is a proper design to solve the problem. It leads to all kinds of problems including weird asymmetries. It violates Liskov&#39;s substitution principle."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 20650, "user_id": 1335865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3eBZC.png?s=128&g=1", "display_name": "Ralph Tandetzky", "link": "https://stackoverflow.com/users/1335865/ralph-tandetzky"}, "edited": false, "score": 0, "creation_date": 1451519491, "post_id": 34538689, "comment_id": 56820353, "body": "@RalphTandetzky: Moreover, it doesn&#39;t solve completely the problem (see demo link above)."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 20650, "user_id": 1335865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3eBZC.png?s=128&g=1", "display_name": "Ralph Tandetzky", "link": "https://stackoverflow.com/users/1335865/ralph-tandetzky"}, "edited": false, "score": 0, "creation_date": 1451520891, "post_id": 34538689, "comment_id": 56820716, "body": "@RalphTandetzky I&#39;ve edited my answer to make clear my personal position which would not use this inheritance approach. Nevertheless, if OP want to handle geometric matrixes as a distinct type, there are not so many different solutions."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1451521242, "post_id": 34538689, "comment_id": 56820807, "body": "@Jarod42 your demo is very interesting ! I&#39;m aware that my solution will not solve all ambiguities. I edited my answer to clarify my position about the intended design, beyond the OP&#39;s specific question."}, {"owner": {"reputation": 273, "user_id": 4884156, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/992478580762224/picture?type=large", "display_name": "Cevik", "link": "https://stackoverflow.com/users/4884156/cevik"}, "edited": false, "score": 1, "creation_date": 1451522023, "post_id": 34538689, "comment_id": 56821008, "body": "With the second option, it would be interesting to define what is an &quot;orthogonal&quot; matrix inside MATH namespace in order to define invert and its specialization only one time :) In fact, i&#39;ve read this topic that explain (particulary the Nawaz comment) how ADL should be used. In my case, i don&#39;t need ADL because i define GEOM as a more specialized code and not as a &quot;generic overload&quot; code. <a href=\"http://stackoverflow.com/questions/2958648/what-are-the-pitfalls-of-adl\" title=\"what are the pitfalls of adl\">stackoverflow.com/questions/2958648/&hellip;</a>"}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 1, "last_activity_date": 1451520740, "last_edit_date": 1451520740, "creation_date": 1451517053, "answer_id": 34538689, "question_id": 34538430, "link": "https://stackoverflow.com/questions/34538430/best-practice-with-argument-dependent-name-lookup/34538689#34538689", "title": "Best practice with argument dependent name lookup", "body": "<p>The problem is that your <code>GEOM::Matrix</code> is only a synonym of <code>MATH::Matrix</code>, and not a new type in <code>GEOM</code>.  This is the intended effect of a <code>using</code> statement, and therefore the argument dependent name lookup finds the <code>MATH::invert()</code> as the best match.  </p>\n\n<p>If you want to fix this, define a real <code>GEOM::Matrix</code> this way: </p>\n\n<pre><code>    template &lt;std::size_t N&gt;\n    class Matrix : public MATH::Matrix&lt;N, N, double&gt; {};// orthonormal set of vectors\n</code></pre>\n\n<p><a href=\"http://ideone.com/dHoEG4\" rel=\"nofollow\">Here an online demo</a>.    </p>\n\n<p><strong>Edit:</strong></p>\n\n<p>There's a fundamental design issue that you have to decide on:</p>\n\n<ul>\n<li>Either you want to have distinct (yet somewhat interchangeable) Matrix types and benefit from ADL.  In this case you manage two types and can have of course to manage some conversions (from GEOM to MATH).  </li>\n<li>Or you want to have one single Matrix type (defined in one namespace) with specialisation for some parameters (in the same namespace, i.e. the  transposition inversion would migrate to MATH).  </li>\n</ul>\n\n<p>Boh have their advantages and inconvenience.  The choice is yours.  Personally I'd prefer the second option:  all the matrix specific operations would then better isolated.  And as you say, a matrix is a matrix.  But apparently, you've choosen the second option, and my answer tries to provide you some solutions for that.  </p>\n"}, {"comments": [{"owner": {"reputation": 273, "user_id": 4884156, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/992478580762224/picture?type=large", "display_name": "Cevik", "link": "https://stackoverflow.com/users/4884156/cevik"}, "edited": false, "score": 0, "creation_date": 1451518721, "post_id": 34538895, "comment_id": 56820148, "body": "It is too bad that we have to do concessions with namespaces."}, {"owner": {"reputation": 20650, "user_id": 1335865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3eBZC.png?s=128&g=1", "display_name": "Ralph Tandetzky", "link": "https://stackoverflow.com/users/1335865/ralph-tandetzky"}, "reply_to_user": {"reputation": 273, "user_id": 4884156, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/992478580762224/picture?type=large", "display_name": "Cevik", "link": "https://stackoverflow.com/users/4884156/cevik"}, "edited": false, "score": 0, "creation_date": 1451519021, "post_id": 34538895, "comment_id": 56820229, "body": "Namespaces are a pretty cool thing. And one can create great theories and all about them. But at the end it&#39;s important what is practical. I tried to give some proven practical advice."}, {"owner": {"reputation": 273, "user_id": 4884156, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/992478580762224/picture?type=large", "display_name": "Cevik", "link": "https://stackoverflow.com/users/4884156/cevik"}, "edited": false, "score": 0, "creation_date": 1451519241, "post_id": 34538895, "comment_id": 56820288, "body": "Thank you ! But i don&#39;t understand how the libraries can take &quot;responsibility to avoid internal name clashes&quot; without explicitly using the namespace prefix every time (that&#39;s not the goal of the ADL right) ?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1451519263, "post_id": 34538895, "comment_id": 56820294, "body": "@RalphTandetzky: When using third part library (or writing template), you have to take care to not introduce name clash with ADL though :-/"}, {"owner": {"reputation": 20650, "user_id": 1335865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3eBZC.png?s=128&g=1", "display_name": "Ralph Tandetzky", "link": "https://stackoverflow.com/users/1335865/ralph-tandetzky"}, "reply_to_user": {"reputation": 273, "user_id": 4884156, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/992478580762224/picture?type=large", "display_name": "Cevik", "link": "https://stackoverflow.com/users/4884156/cevik"}, "edited": false, "score": 0, "creation_date": 1451519606, "post_id": 34538895, "comment_id": 56820382, "body": "@Cevik Yep. That&#39;s a problem. Libraries assume that the global namespace is not littered, or alternatively, they have to prefix everything with their namespace. This is done for STL implementations, but for other libraries it is not common usage since it defeats the pupose of creating the namespace."}], "tags": [], "owner": {"reputation": 20650, "user_id": 1335865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3eBZC.png?s=128&g=1", "display_name": "Ralph Tandetzky", "link": "https://stackoverflow.com/users/1335865/ralph-tandetzky"}, "is_accepted": false, "score": 0, "last_activity_date": 1451560336, "last_edit_date": 1451560336, "creation_date": 1451518329, "answer_id": 34538895, "question_id": 34538430, "link": "https://stackoverflow.com/questions/34538430/best-practice-with-argument-dependent-name-lookup/34538895#34538895", "title": "Best practice with argument dependent name lookup", "body": "<h2>General advice</h2>\n\n<p>It is best practice to keep classes and functions that are designed to work together in one namespace to enable ADL. (See Item #57 in C++ Coding Standards: <em>Keep a type and its nonmember function interface in the same namespace</em>.) Sometimes it is recommended to keep unrelated classes and functions in separate namespaces. (See Item #58 in the same book.) I find this too restrictive, because it creates a huge namespace jungle very quickly. </p>\n\n<h2>Common practice</h2>\n\n<p>It is more common practice to put all stuff that belongs logically to one library into one namespace. It's the libraries responsibility to avoid internal name clashes. Users of the library should usually not add new stuff to a libraries namespace. That's pretty much how the standard library, boost, OpenCV and a host of other libraries work. That's what I recommend. Don't try to overseparate. It just hurts your head and is not necessary. </p>\n\n<h2>Namespace usage</h2>\n\n<p>These common libraries use nested namespaces for some purposes, like <code>boost::detail</code> for implementation details, that should not be of interest to the user of the library. Other examples where more namespaces are necessary are </p>\n\n<ul>\n<li>inline namespaces for versioning and </li>\n<li>namespaces to select a set of user-defined literals and</li>\n<li>possibly some others.</li>\n</ul>\n\n<p><strong>EDIT:</strong></p>\n\n<h2>Advice for your situation</h2>\n\n<p>If I understand correctly, your <code>GEOM::Matrix</code> is supposed to be an orthogonal matrix. (I just noticed that very late and would suggest a clearer name for it.) That should be a different type, this type has to <a href=\"https://en.wikipedia.org/wiki/Design_by_contract\" rel=\"nofollow\">ensure the internal invariant</a> of being orthogonal. Using <code>using</code> or <code>typedef</code> just does aliasing and there's no way for you to guarantee, that the invariant if broken through some <code>MATH::Matrix</code> functions. Therefore, I would suggest composition as the means to solve the problem:</p>\n\n<pre><code>namespace GEOM\n{\n\ntemplate &lt;std::size_t N, typename T&gt;\nclass OrthogonalMatrix\n{\nprivate:\n    MATH::Matrix&lt;N,N,T&gt; mat;\n\npublic:\n    // Enable use of const interface of MATH::Matrix&lt;N,N,T&gt;. \n    operator const MATH::Matrix&lt;N,N,T&gt; &amp;() const { return mat; }\n\n    // ... here goes the implementation ensuring \n    // orthogonality at all times.\n};\n\n} // end of namespace GEOM\n</code></pre>\n\n<p>An alternative would be private inheritance, which enables you to make <code>MATH::Matrix</code> methods public selectively with the keyword <code>using</code> like this:</p>\n\n<pre><code>namespace GEOM\n{\n\ntemplate &lt;std::size_t N, typename T&gt;\nclass OrthogonalMatrix : private MATH::Matrix&lt;N,N,T&gt;;\n{\npublic:\n    // Make `MATH::Matrix&lt;N,N,T&gt;::transposeInPlace` publicly accessible\n    using MATH::Matrix&lt;N,N,T&gt;::transposeInPlace;\n\n    // Enable use of const interface of MATH::Matrix&lt;N,N,T&gt;. \n    operator const MATH::Matrix&lt;N,N,T&gt; &amp;() const { return *this; }\n\n    // ... here goes the implementation ensuring \n    // orthogonality at all times.\n};\n\n} // end of namespace GEOM\n</code></pre>\n\n<p>You should not do that with the constructor or entry access functions, since they would enable the user of the class to break invariants which can easily lead to a lot of confusion. Also public inheritance plus <code>using</code> in the private section would be wrong, because the user of the class would still be able to break invariants by converting to <code>MATH::Matrix&lt;N,N,T&gt; &amp;</code> and messing up the matrix then. </p>\n"}], "owner": {"reputation": 273, "user_id": 4884156, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/992478580762224/picture?type=large", "display_name": "Cevik", "link": "https://stackoverflow.com/users/4884156/cevik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1451560336, "creation_date": 1451515595, "question_id": 34538430, "link": "https://stackoverflow.com/questions/34538430/best-practice-with-argument-dependent-name-lookup", "title": "Best practice with argument dependent name lookup", "body": "<p>today i face a problem that hurts my peace of mind. I have resumed my problem in a very smart and meaningfull example where the expected result is not met although no error is generated.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n\nnamespace MATH {\n\n\ntemplate &lt;std::size_t M, std::size_t N, class T&gt;\nclass Matrix\n{\n\n};\n\nvoid invert(Matrix&lt;2, 2, double&gt;&amp; m)\n{\n    std::cout &lt;&lt; \"DIM 2 : MATH version (use of the determinant)\" &lt;&lt; std::endl;\n}\n\nvoid invert(Matrix&lt;3, 3, double&gt;&amp; m)\n{\n    std::cout &lt;&lt; \"DIM 3 : MATH version (use of the determinant)\" &lt;&lt; std::endl;\n}\n\n\n}\n\n\nnamespace GEOM {\n\n\ntemplate &lt;std::size_t N&gt;\nusing Matrix = MATH::Matrix&lt;N, N, double&gt;;// orthonormal set of vectors\n\ntemplate &lt;std::size_t N&gt;\nvoid invert(Matrix&lt;N&gt;&amp; m)\n{\n    std::cout &lt;&lt; \"DIM \" &lt;&lt; N &lt;&lt; \" : GEOM version (use of the transpose)\" &lt;&lt; std::endl;\n}\n\nvoid geom_foo_purpose(Matrix&lt;3&gt;&amp; m)\n{\n    invert(m);\n}\n\n\n}\n\n\nint main(int argc, char **argv)\n{\n    GEOM::Matrix&lt;3&gt; m;\n    GEOM::geom_foo_purpose(m);\n\n    return 0;\n}\n\noutput : std::cout &lt;&lt; \"DIM 3 : MATH version (use of the determinant)\" &lt;&lt; std::endl;\n</code></pre>\n\n<p>In geom_foo_purpose definition, the call to invert results in an unqualified id because a template deduction is requested. So, the ADL is able to say : ok, let's look at the MATH namespace. The fact that allows MATH::invert to be prefered to the GEOM::invert version because the non template version has priority is inadmissible in this case i think.</p>\n\n<p>For example, i want to develop the GEOM content first, by defining the Matrix class as a GEOM type. GEOM::invert is called. No problem.\nOne day, i want to generalize my Matrix class in another namespace MATH and i could think : ok, i keep the same methods and i don't break the code. Just put a using MATH::Matrix... And i become unable to understand where is the performance overhead nor why some sensitive measures change.</p>\n\n<p>So i actually think about three solutions :</p>\n\n<ul>\n<li>verify each namespaces when i add a function or when i change a using</li>\n<li>specify the namespace for each call</li>\n<li>rely on ambiguous call compiler errors, when detected</li>\n</ul>\n\n<p>Is there a decent way to overcome this ?</p>\n"}, {"tags": ["c++", "windows", "glut", "freeglut", "scrollwheel"], "comments": [{"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1451519674, "post_id": 34538406, "comment_id": 56820399, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/14378/using-the-mouse-scrollwheel-in-glut\">Using the mouse scrollwheel in GLUT</a>"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 1, "creation_date": 1451529440, "post_id": 34538406, "comment_id": 56822646, "body": "@BDL: How exactly is this a duplicate? He&#39;s not asking how to do it; he&#39;s saying that he did that and it didn&#39;t work."}, {"owner": {"reputation": 87, "user_id": 5544555, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e072d981f36211633c0ec1d7075b9a28?s=128&d=identicon&r=PG&f=1", "display_name": "Fotis", "link": "https://stackoverflow.com/users/5544555/fotis"}, "reply_to_user": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1451560702, "post_id": 34538406, "comment_id": 56832839, "body": "Sorry for not responding earlier...tough day (making preparations for new Years eve ) @BDL yes i had already read that article and tried both ways but i still didn&#39;t got any callback from the mouse wheel ( according the if&#39;s and the printf that i have on my function ) Also a friend of mine that has a mac has the same issue as me...no callback from the mouse wheel...only on ubuntu the mouse wheel was working as it supposed to. :/"}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 5544555, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e072d981f36211633c0ec1d7075b9a28?s=128&d=identicon&r=PG&f=1", "display_name": "Fotis", "link": "https://stackoverflow.com/users/5544555/fotis"}, "edited": false, "score": 0, "creation_date": 1451780557, "post_id": 34546621, "comment_id": 56889147, "body": "I did use the freeglut library but without any luck. Still no response when i use the mouse wheel. I believe it has something to do with the operating system and not with the libraries. Thanks though"}], "tags": [], "owner": {"reputation": 154, "user_id": 1113279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76d960e17fa64fa0a6edb9df48be27ce?s=128&d=identicon&r=PG", "display_name": "Marek Kijo", "link": "https://stackoverflow.com/users/1113279/marek-kijo"}, "is_accepted": false, "score": 0, "last_activity_date": 1451565335, "creation_date": 1451565335, "answer_id": 34546621, "question_id": 34538406, "link": "https://stackoverflow.com/questions/34538406/no-scroll-wheel-callback-on-glutmousefunc/34546621#34546621", "title": "No scroll wheel callback on glutMouseFunc", "body": "<p>Unfortunately it is not guaranteed that glutMouseFunc will emit callback for wheel action, check GLUT spec, the fact that it's working on Linux is out of GLUT specification. I think that previously there was something like glutMouseWheelFunc, now there is no option to get any callback about wheel which is not implementation specific.\nYou can still try to use FreeGLUT library, it is newer and also cross-platform, for sure wheel actions are implemented.\nGood luck. </p>\n"}], "owner": {"reputation": 87, "user_id": 5544555, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e072d981f36211633c0ec1d7075b9a28?s=128&d=identicon&r=PG&f=1", "display_name": "Fotis", "link": "https://stackoverflow.com/users/5544555/fotis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 645, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1451565335, "creation_date": 1451515484, "last_edit_date": 1451529506, "question_id": 34538406, "link": "https://stackoverflow.com/questions/34538406/no-scroll-wheel-callback-on-glutmousefunc", "title": "No scroll wheel callback on glutMouseFunc", "body": "<p>recently i have been programming a simple program on C++ and GLUT and i wanted to use the scroll wheel for some rotation speed increase/decrease. I have found out that scroll wheel generates 3/4 callback ( 3 for scroll up 4 for scroll down ). My problem is that on windows i get no callback at all! left right and middle mouse click generate 0,1 and 2 but scroll wheel nothing. ( I work on Visual Studio 2015 and Windows 10) On my Ubuntu system with the same libraries scroll wheel generates the callbacks just fine but on windows nothing. here is the code that i use on glutMouseFunc()</p>\n\n<pre><code>void setRotationSpeed(int button, int dir, int x, int y)\n{\n    printf(\"button is %d\\n\", button);\n    if (button == 3)\n    {\n        rotationSpeed += 0.1;\n    }\n    if (button == 4)\n    {\n        if (rotationSpeed &gt; 0.0)\n            rotationSpeed -= 0.1;\n    }\n}\n</code></pre>\n\n<p>I have searched without any luck. At first i thought that maybe the libraries i use had problem but then i took the ones that i used on Ubuntu and i had the same problem so if anyone has something to suggest i would be very gratefull!</p>\n"}, {"tags": ["c++", "delegates", "polymorphism"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 1, "creation_date": 1451515345, "post_id": 34538349, "comment_id": 56819027, "body": "std::function. Delegates are so last decade!"}], "answers": [{"comments": [{"owner": {"reputation": 21174, "user_id": 972202, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/k5Gxr.png?s=128&g=1", "display_name": "sazr", "link": "https://stackoverflow.com/users/972202/sazr"}, "edited": false, "score": 0, "creation_date": 1451515496, "post_id": 34538386, "comment_id": 56819073, "body": "thanks for the answer. This is a hobby project, so it would be nice to tackle the problem without using <code>std::function</code> if possible."}, {"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "reply_to_user": {"reputation": 21174, "user_id": 972202, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/k5Gxr.png?s=128&g=1", "display_name": "sazr", "link": "https://stackoverflow.com/users/972202/sazr"}, "edited": false, "score": 2, "creation_date": 1451515557, "post_id": 34538386, "comment_id": 56819093, "body": "That would be pretty darn silly.  Being a hobby project I&#39;d expect you&#39;d want to use all the tools at your disposal.  Why learn the way we DON&#39;T do it anymore?"}], "tags": [], "owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "is_accepted": false, "score": 6, "last_activity_date": 1451515516, "last_edit_date": 1451515516, "creation_date": 1451515390, "answer_id": 34538386, "question_id": 34538349, "link": "https://stackoverflow.com/questions/34538349/polymorphic-callback-implementation/34538386#34538386", "title": "Polymorphic Callback Implementation", "body": "<pre><code>using EventDeligate = std::function&lt;void()&gt;;\n\nauto cp = std::make_shared&lt;MoveComponent&gt;();\nauto ed = EventDeligate([cp](){ cp.moveToXY(); });\n</code></pre>\n\n<p>To do it your way, <code>Component</code> must have a (possibly pure) virtual function <code>moveToXY</code>.</p>\n"}], "owner": {"reputation": 21174, "user_id": 972202, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/k5Gxr.png?s=128&g=1", "display_name": "sazr", "link": "https://stackoverflow.com/users/972202/sazr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1451515516, "creation_date": 1451515163, "last_edit_date": 1451515374, "question_id": 34538349, "link": "https://stackoverflow.com/questions/34538349/polymorphic-callback-implementation", "title": "Polymorphic Callback Implementation", "body": "<p>I am using Component Based Architecture in my application. I'm at the stage where I need to allow a <code>Component</code> to specify a callback that will be executed upon an event.</p>\n\n<pre><code>typedef void(Component::*EventCallback) ();\ntypedef std::pair&lt;Component*, EventCallback&gt; EventDelegate;\n</code></pre>\n\n<p>The problem with the above type definition is that all components inherit from <code>Component</code> but will never be a direct <code>Component</code>. So the following line of code is not valid:</p>\n\n<pre><code>MoveComponent* mc = new MoveComponent(); // inherits from Component\nEventDelegate ed(mc , &amp;MoveComponent::moveToXY); // Compiler error here: expects Component* not MoveComponent*, and same for EventCallback.\n</code></pre>\n\n<p>Any ideas how I can achieve a 'Polymorphic' callback? Or any other design/implementation advice?</p>\n\n<p>Example usage:</p>\n\n<pre><code>typedef void(Component::*EventCallback) ();\ntypedef std::pair&lt;Component*, EventCallback&gt; EventDelegate;\n\nclass Component {\n    // ...\n};\n\nclass MoveComponent : public Component {\npublic:\n    MoveComponent() {\n\n        EventDelegate ed(this, &amp;MoveComponent::moveToXY);\n        ComponentManager::registerEvent(ed);\n    }\n\n    void moveToXY() { }\n};\n\nclass ComponentManager {\npublic:\n\n    static void registerEvent(EventDelegate ed) {\n        evtRegistry.push_back(ed);\n    }\n\n    static void runEvent(EventDelegate ed) {\n        for (int i=0; i&lt;evtRegistry.size(); i++) {\n            Component* context = evtRegistry.at(i).first;\n            EventCallback ec = evtRegistry.at(i).second;\n            context-&gt;*ec();\n        }\n    }\n\nprivate:\n    static std::vector &lt;EventDelegate&gt; evtRegistry;\n};\n</code></pre>\n"}, {"tags": ["c++", "opengl", "shader", "compute-shader"], "answers": [{"tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 1, "last_activity_date": 1451529334, "creation_date": 1451529334, "answer_id": 34540250, "question_id": 34538281, "link": "https://stackoverflow.com/questions/34538281/only-first-compute-shader-array-element-appears-updated/34540250#34540250", "title": "Only first Compute Shader array element appears updated", "body": "<pre><code>glMemoryBarrier(GL_VERTEX_ATTRIB_ARRAY_BARRIER_BIT);\n\n//Gets a pointer to the returned data\nint* returnArray = (int *)glMapBuffer(GL_SHADER_STORAGE_BUFFER, GL_READ_WRITE);\n</code></pre>\n\n<p>The bit you use for <a href=\"https://www.opengl.org/wiki/GLAPI/glMemoryBarrier\" rel=\"nofollow\"><code>glMemoryBarrier</code></a> represents the way you <em>want</em> to read the data written by the shader. <code>GL_VERTEX_ATTRIB_ARRAY_BARRIER_BIT</code> says \"I'm going to read this written data by using the buffer for vertex attribute arrays\". In reality, you are going to read the buffer by <em>mapping</em> it.</p>\n\n<p>So you should use the proper barrier bit:</p>\n\n<pre><code>glMemoryBarrier(GL_BUFFER_UPDATE_BARRIER_BIT);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11523627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/187968089f68a1e599e4d9c8695ab676?s=128&d=identicon&r=PG&f=1", "display_name": "classview", "link": "https://stackoverflow.com/users/11523627/classview"}, "is_accepted": false, "score": 0, "last_activity_date": 1566118552, "creation_date": 1566118552, "answer_id": 57543069, "question_id": 34538281, "link": "https://stackoverflow.com/questions/34538281/only-first-compute-shader-array-element-appears-updated/57543069#57543069", "title": "Only first Compute Shader array element appears updated", "body": "<p>Ok i had this problem as well\ni changed:</p>\n\n<pre><code>layout(binding = 0) buffer SSBO{\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>layout(binding = 0, std430) buffer SSBO{\n</code></pre>\n"}], "owner": {"reputation": 513, "user_id": 3455715, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/vdJ4y.jpg?s=128&g=1", "display_name": "Pavarine", "link": "https://stackoverflow.com/users/3455715/pavarine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1566118552, "creation_date": 1451514741, "last_edit_date": 1451529010, "question_id": 34538281, "link": "https://stackoverflow.com/questions/34538281/only-first-compute-shader-array-element-appears-updated", "title": "Only first Compute Shader array element appears updated", "body": "<p>Trying to send an array of integer to a compute shader, sets an arbitrary value to each integer and then reads back on CPU/HOST. The problem is that only the first element of my array gets updated. My array is initialized with all elements = 5 in the CPU, then I try to sets all the values to 2 in the Compute Shader:</p>\n\n<p>C++ Code:</p>\n\n<pre><code>   this-&gt;numOfElements = std::vector&lt;int&gt; numOfElements; //num of elements for each voxel\n\n   //Set the reset grid program as current program\n    glUseProgram(this-&gt;resetGridProgHandle);\n\n    //Binds and fill the buffer \n    glBindBuffer(GL_SHADER_STORAGE_BUFFER, this-&gt;counterBufferHandle);\n    glBufferData(GL_SHADER_STORAGE_BUFFER, sizeof(int) * numOfVoxels, this-&gt;numOfElements.data(), GL_DYNAMIC_DRAW);\n    glBindBufferBase(GL_SHADER_STORAGE_BUFFER, 0, this-&gt;counterBufferHandle);\n\n    //Flag used in the buffer map function\n    GLint bufMask = GL_MAP_WRITE_BIT | GL_MAP_INVALIDATE_BUFFER_BIT;\n\n    //calc maximum size for workgroups\n    //glGetIntegerv(GL_MAX_COMPUTE_WORK_GROUP_SIZE, &amp;result);\n\n    //Executes the compute shader\n    glDispatchCompute(32, 1, 1); // \n    glMemoryBarrier(GL_VERTEX_ATTRIB_ARRAY_BARRIER_BIT);\n\n    //Gets a pointer to the returned data\n    int* returnArray = (int *)glMapBuffer(GL_SHADER_STORAGE_BUFFER, GL_READ_WRITE);\n\n    //Free the buffer mapping\n    glUnmapBuffer(GL_SHADER_STORAGE_BUFFER);\n</code></pre>\n\n<p>Shader:</p>\n\n<pre><code>#version 430\nlayout (local_size_x = 32) in;\nlayout(binding = 0) buffer SSBO{\n    int counter[];\n};\n\nvoid main(){\n    counter[gl_WorkGroupID.x * gl_WorkGroupSize.x + gl_LocalInvocationID.x] = 2;\n}\n</code></pre>\n\n<p>If I print returnArray[0] it's 2 (correct), but any index > 0 gives me 5, which is the initial value initialized in host.</p>\n"}, {"tags": ["c++", "sockets", "c++11", "networking", "tcp"], "comments": [{"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 1, "creation_date": 1451514573, "post_id": 34538179, "comment_id": 56818714, "body": "For 3, see <a href=\"http://stackoverflow.com/questions/589928/socket-programming-how-do-i-handle-out-of-band-data\" title=\"socket programming how do i handle out of band data\">stackoverflow.com/questions/589928/&hellip;</a>. Essentially, if one socket side sends normal data and <i>then</i> OOB data, the client gets the OOB data as quickly as possible, possibly <i>before</i> the other data. [well, it depends how the client calls recv, and on some other things, and that&#39;s not the whole story ... see the link]"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1451514625, "post_id": 34538179, "comment_id": 56818740, "body": "Thank you so much! I will look into that :)"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1451514925, "post_id": 34538179, "comment_id": 56818882, "body": "@deviantfan From what I read in the answers to that question. I will be ignoring all OOB data in my current use case. I have one followup question though. If there is indeed some OOB data that has been sent, and I am ignoring it, i.e. just calling recv() regulary. Will that data be ignored? Or will it be injected into the current stream of bytes that I am reading (or recv()-ing)?"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 1, "creation_date": 1451515722, "post_id": 34538179, "comment_id": 56819157, "body": "It depends. Either you can use <code>MSB_OOB</code> in <code>recv</code> to query OOB data and no such option to query normal data, or you can use <code>setsockopt</code> with <code>SO_OOBINLINE</code> to receive everything without special <code>recv</code> options."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1451515793, "post_id": 34538179, "comment_id": 56819179, "body": "@deviantfan Thank you! So I will just ignore OOB data as something that doesn&#39;t exist entirely. I guess I will remove the third part of the question soon. I will wait just a little bit to make sure someone else wasn&#39;t already typing something."}], "answers": [{"comments": [{"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1451522356, "post_id": 34539424, "comment_id": 56821087, "body": "Thank you for your answer! Could you share some references to it though? Just so I know where to look when I have similar questions"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1451522810, "post_id": 34539424, "comment_id": 56821199, "body": "The <code>poll</code> function is a status reporting function. It does not come with any future guarantees. Assuming that an indication from <code>poll</code> or <code>select</code> will guarantee that a future read or recv will not block <i>under any circumstances</i> is a mistake and it is one that has caused bugs with security implications in the past."}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 0, "last_activity_date": 1451523535, "last_edit_date": 1451523535, "creation_date": 1451522184, "answer_id": 34539424, "question_id": 34538179, "link": "https://stackoverflow.com/questions/34538179/behavior-of-the-poll-system-call-and-receiving-or-sending-data-afterwards/34539424#34539424", "title": "Behavior of the poll() system call and receiving or sending data afterwards", "body": "<blockquote>\n  <p>If the call to <code>poll()</code> returns neither -1 nor 0 and sets the <code>POLLIN</code> flag in the bitmap revents for the first entry in the <code>file_descriptors</code> array, then will the call to <code>recv()</code> block?</p>\n</blockquote>\n\n<p>It shouldn't, unless another thread has read all the data presently available from the socket.</p>\n\n<blockquote>\n  <p>If no, then will the data be read in instantaneously?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<blockquote>\n  <p>Assuming the call to <code>poll()</code> goes the same way as mentioned above. How much data is going to be read in?</p>\n</blockquote>\n\n<p>As much data as has already arrived.</p>\n\n<blockquote>\n  <p>Is it just going to be the same as a regular call to <code>recv()</code>? i.e. an arbitrary (to the programmer) amount less than or equal to 1024 in the above case.</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<blockquote>\n  <p>Then if I want to <code>poll()</code> before reading again, do I just repeat from the first invocation of <code>poll()</code> until all data has been read in completely (i.e. in a client server scenario this would correspond to the request being completed)?</p>\n</blockquote>\n\n<p>Yes.</p>\n"}, {"comments": [{"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1451522682, "post_id": 34539479, "comment_id": 56821170, "body": "Thank you! Could you share some references for your answer?"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1451522705, "post_id": 34539479, "comment_id": 56821176, "body": "Also what is the point of having <code>MSG_DONTWAIT</code> when you have polled before calling <code>recv()</code>?"}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1451523000, "post_id": 34539479, "comment_id": 56821240, "body": "@Curious this last remark is a general information, as OP seemed to be worried about blocking or not.  As said above, after a succesful poll() there will be no block."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1451523113, "post_id": 34539479, "comment_id": 56821267, "body": "@Christophe That is not guaranteed. The <code>poll</code> function reports current status and cannot predict the future. The assumption that a read hit from <code>poll</code> assures that a future read operation will not block is a mistake that has caused serious bugs with security implications in the past. If you don&#39;t want to block, you must either set the socket non-blocking or use read/write operations with flags that request that they do not block."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1451523730, "post_id": 34539479, "comment_id": 56821433, "body": "@DavidSchwartz Point taken: if something goes wrong or if the data is read elesewhere, there would be a blocking situation."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1451523819, "post_id": 34539479, "comment_id": 56821458, "body": "Or if you&#39;re using UDP and the datagram gets dropped, which can be a real disaster if that causes a security-critical process to hang. (Yes, that really happened.)"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1451524533, "post_id": 34539479, "comment_id": 56821649, "body": "@DavidSchwartz In the case where there is an error and I have already set the socket to non blocking using <code>fcntl()</code>. What will the call to <code>recv()</code> return? Will it return -1 and set <code>errno</code> to <code>EAGAIN</code> or <code>EWOULDBLOCK</code>? If yes then how do I distinguish between needing to call <code>poll()</code> or <code>select()</code> again and throwing an exception to say that the connection is closed?"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1451524678, "post_id": 34539479, "comment_id": 56821681, "body": "@DavidSchwartz In other words, does a return value of -1 and <code>errno</code> set to either <code>EAGAIN</code> or <code>EWOULDBLOCK</code> imply that I should call poll() again? Something going wrong would not set <code>errno</code> to these values right?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1451524804, "post_id": 34539479, "comment_id": 56821708, "body": "@Curious Correct. Those are &quot;would block&quot; indications that indicate that you should retry the operation later. You use <code>poll</code> to know when it&#39;s later. The connection is closed if zero is returned or a fatal error occurs. Errors like &quot;would block&quot; or &quot;interrupted&quot; are not fatal."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1451525188, "post_id": 34539479, "comment_id": 56821800, "body": "@DavidSchwartz Thank you! So the approach I will follow for <code>recv()</code>ing is <code>poll()</code> followed by <code>recv()</code> as many times as it does not return <code>-1</code> and set <code>errno</code> to either <code>EAGAIN</code> or <code>EWOULDBLOCK</code>, if any other <code>errno</code> is returned then I will throw an exception"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1451526408, "post_id": 34539479, "comment_id": 56822044, "body": "@Curious That sounds good. If you&#39;re only using TCP, you can add a small optimization -- if <code>recv</code> gives you fewer bytes than you asked for, there&#39;s no need to call <code>recv</code> again. It&#39;s near certain to give you a &quot;would block&quot; indication and you&#39;re better off just assuming that it will and waiting for <code>poll</code> again. (But you don&#39;t have to do that if you don&#39;t want to.)"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1451527268, "post_id": 34539479, "comment_id": 56822207, "body": "@DavidSchwartz Thank you for that! Could you suggest some place for me to read up on things like this myself? Just so I can know more :)"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1451527753, "post_id": 34539479, "comment_id": 56822303, "body": "In the case where the data is lost due to a reset the call will not block."}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 1, "last_activity_date": 1451524064, "last_edit_date": 1451524064, "creation_date": 1451522629, "answer_id": 34539479, "question_id": 34538179, "link": "https://stackoverflow.com/questions/34538179/behavior-of-the-poll-system-call-and-receiving-or-sending-data-afterwards/34539479#34539479", "title": "Behavior of the poll() system call and receiving or sending data afterwards", "body": "<p>If the <a href=\"http://man7.org/linux/man-pages/man2/poll.2.html\" rel=\"nofollow\"><code>poll()</code></a> returns a strictly positive value, it means that at least one of your descriptors has some data to return.  </p>\n\n<p>The <a href=\"http://man7.org/linux/man-pages/man2/recv.2.html\" rel=\"nofollow\"><code>recv()</code></a> SHOULD therefore not be blocking:  as there is data it SHOULD return something.    In any case, it is not guaranteed that all the 1024 bytes will be returned by the call.  </p>\n\n<p>You must therefore check the number of bytes returned by <code>recv()</code>. Eventually, you have to loop on your polling/receiving until you got all the expected data.   </p>\n\n<p>You can control the blocking/non-blocking behaviour either by call with the flag parameter <code>MSG_DONTWAIT</code>,  or via <code>fcntl()</code> on a more durable fashion. </p>\n\n<p><strong>Edit:</strong> Note that if something goes wrong on the socket (<a href=\"http://stefan.buettcher.org/cs/conn_closed.html\" rel=\"nofollow\">for example a loss of connection</a>) the available data promised by the poll MIGHT be lost and block the <code>recv()</code> against all expectations.  It is hence safer to explicitely use the non-blocking flag (and consider that <code>recv()</code> might return an error code instead of a number of bytes read).   </p>\n"}, {"comments": [{"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1451523128, "post_id": 34539529, "comment_id": 56821270, "body": "Thank you so much! But do you think my logic seems right? <code>poll()</code> and then <code>recv()</code> followed by <code>poll()</code> and then <code>recv()</code> and so on... And this is in order to get a non blocking read from the network. Basically what I mean to ask is, if the POLLIN flag is set in the <code>revents</code> structure then the immediate <code>recv()</code> that follows will not block correct?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1451523208, "post_id": 34539529, "comment_id": 56821290, "body": "@Curious If you want non-blocking reads, you have to set the socket non-blocking. Then you can use <code>poll</code> to know when to perform read and write operations. You can use <code>poll</code> before the operation every time or you can call <code>poll</code> only as a way to wait when you get a &quot;would block&quot; indication. Both methods work. It is common to <code>poll</code> first before reading but to write first and fall back to <code>poll</code> only if a write gets a &quot;would block&quot; indication. But you can do it however you want."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1451523333, "post_id": 34539529, "comment_id": 56821322, "body": "Ok, so the following steps are correct? 1. Set the socket to be non blocking, 2. Call <code>poll()</code>, 3. If <code>poll()</code> indicated there is data to be read then call <code>recv()</code>, 4. If all the required data has been read in break, 5. repeat from (2)"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1451523371, "post_id": 34539529, "comment_id": 56821332, "body": "Also is what I mentioned above the most efficient way to go about such a non blocking scheme? If not what can I change?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1451523396, "post_id": 34539529, "comment_id": 56821336, "body": "That&#39;s a common way to handle reads. I&#39;ll update my answer to explain the three different basic I/O strategies."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1451523453, "post_id": 34539529, "comment_id": 56821349, "body": "Thank you! Your answer and comments have been helpful"}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 2, "last_activity_date": 1451523588, "last_edit_date": 1451523588, "creation_date": 1451523014, "answer_id": 34539529, "question_id": 34538179, "link": "https://stackoverflow.com/questions/34538179/behavior-of-the-poll-system-call-and-receiving-or-sending-data-afterwards/34539529#34539529", "title": "Behavior of the poll() system call and receiving or sending data afterwards", "body": "<blockquote>\n  <p>If the call to poll() returns neither -1 nor 0 and sets the POLLIN flag in the bitmap revents for the first entry in the file_descriptors array, then will the call to recv() block? If no, then will the data be read in instantaneously?</p>\n</blockquote>\n\n<p>The call to <code>poll</code> has no effect on the call to <code>recv</code>. Whether or not <code>recv</code> blocks depends on what data is available at the time you call <code>recv</code> and whether the socket is in blocking or non-blocking mode.</p>\n\n<blockquote>\n  <p>Assuming the call to poll() goes the same way as mentioned above. How much data is going to be read in? Is it just going to be the same as a regular call to recv()? i.e. an arbitrary (to the programmer) amount less than or equal to 1024 in the above case. Then if I want to poll() before reading again, do I just repeat from the first invocation of poll() until all data has been read in completely (i.e. in a client server scenario this would correspond to the request being completed)?</p>\n</blockquote>\n\n<p>Assuming you don't want to block, you should set the socket non-blocking. You have two basic choices. You can call the receive function once and then <code>poll</code> again. Or you can keep calling receive until you get a \"would block\" indication. If the socket is a TCP connection, you can keep calling the receive function until you either get a \"would block\" indication or receive fewer bytes than you asked for.</p>\n\n<p>There are three common, non-blocking I/O strategies that you can base around <code>poll</code> or <code>select</code>. All require that the socket be set non-blocking.</p>\n\n<p>1) You can always call <code>poll</code> or <code>select</code> before you perform an I/O operation. You then attempt a single read or write operation only if you get a read or write hit from <code>poll</code> or <code>select</code>.</p>\n\n<p>2) You can attempt the <code>read</code> or <code>write</code> operation first. If it succeeds immediately, great. If not, wait for a <code>poll</code> or <code>select</code> hit before retrying the operation.</p>\n\n<p>3) You can call <code>poll</code> or <code>select</code> before you perform an I/O operation. You then attempt multiple <code>read</code>s or <code>write</code>s until you either finish everything you need to do or get a \"would block\" indication. When you get a \"would block\" indication, you wait until <code>select</code> or <code>poll</code> tells you before you attempt another operation in that direction on that socket.</p>\n\n<p>Method 3 is probably the most common for reads. Method 2 is probably the most common for writes.</p>\n\n<p>It is very important to keep in mind that <code>poll</code> is a status reporting function that tells you current information. It does not come with any future guarantees. The assumption that a read indication from <code>poll</code> means that a future read operation will not block is a mistake and it has caused serious bugs with significant security implications in the past. The only way to guarantee that a socket operation will not block is to set the socket non-blocking.</p>\n"}], "owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1410, "favorite_count": 2, "accepted_answer_id": 34539529, "answer_count": 3, "score": 7, "last_activity_date": 1451524064, "creation_date": 1451514164, "last_edit_date": 1451522749, "question_id": 34538179, "link": "https://stackoverflow.com/questions/34538179/behavior-of-the-poll-system-call-and-receiving-or-sending-data-afterwards", "title": "Behavior of the poll() system call and receiving or sending data afterwards", "body": "<p>Lets consider following piece of code</p>\n\n<pre><code>pollfd file_descriptors[1];\nfile_descriptors[0].fd = sock_fd;\nfile_descriptors[0].events = POLLIN;\n\nint return_value = poll(file_descriptors, 1, 0);\n\nif (return_value == -1) { cerr &lt;&lt; strerror(errno); }\nelse if (return_value == 0) { cerr &lt;&lt; \"No data available to be read\"; }\nelse { \n    if (file_descriptors[0].revents &amp; POLLIN) {\n        recv(sock_fd, buff, 1024, 0); \n    }\n}\n</code></pre>\n\n<p>Now I have two questions regarding the above code.</p>\n\n<ol>\n<li>If the call to poll() returns neither <code>-1</code> nor <code>0</code> and sets the <code>POLLIN</code> flag in the bitmap <code>revents</code> for the first entry in the <code>file_descriptors</code> array, then will the call to <code>recv()</code> block? If no, then will the data be read in instantaneously?</li>\n<li>Assuming the call to <code>poll()</code> goes the same way as mentioned above. How much data is going to be read in? Is it just going to be the same as a regular call to <code>recv()</code>? i.e. an arbitrary (to the programmer) amount less than or equal to <code>1024</code> in the above case. Then if I want to <code>poll()</code> before reading again, do I just repeat from the first invocation of <code>poll()</code> until all data has been read in completely (i.e. in a client server scenario this would correspond to the request being completed)?</li>\n</ol>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "geometry"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1451514582, "post_id": 34538153, "comment_id": 56818719, "body": "Have you the input which give wrong ouput ? Are you sure that <code>ClipToPanel</code> is correct ?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1451514866, "post_id": 34538153, "comment_id": 56818855, "body": "Are you sure of the format <code>panel[p][y][x]</code> (seems used coherency)"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1451515707, "post_id": 34538153, "comment_id": 56819149, "body": "A good starting point: <a href=\"http://math.stackexchange.com\">math.stackexchange.com</a>"}, {"owner": {"reputation": 91, "user_id": 3542154, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4d0c23e9daf093e9b82d9ca0ebabb40c?s=128&d=identicon&r=PG&f=1", "display_name": "user3542154", "link": "https://stackoverflow.com/users/3542154/user3542154"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1451557142, "post_id": 34538153, "comment_id": 56831264, "body": "@Jarod42 yes I have other functions such as drawRectangle, drawPolygon which use drawline to perform operations and they pass the test. only the drawline test fails.  im sure of panel[p][y][x] format. p is the index of a panel (there can be multiple panels) y is the row (since +Y axis is downwards) and x is column (+X axis is rightwards)"}], "answers": [{"tags": [], "owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": false, "score": 0, "last_activity_date": 1451568338, "last_edit_date": 1451568338, "creation_date": 1451567965, "answer_id": 34547082, "question_id": 34538153, "link": "https://stackoverflow.com/questions/34538153/plotting-a-line-with-slope-45-degrees/34547082#34547082", "title": "Plotting a line with slope 45 degrees", "body": "<p>This would be a comment, but since it contains some code I'll post it as an answer. I think that you can consider the fact of simplifying the diagonals output function, considering that there are basically only two of them:</p>\n\n<pre><code>if ( x1 &gt; x2 ) swap(x1,x2);\nif ( y2 &gt; y1 ) {\n    for(int i = y1, j = x1; j &lt;= x2; i++, j++ )\n        panel[p][i][j] = 'x';\n} else {\n    for(int i = y2, j = x1; j &lt;= x2; i++, j-- )\n        panel[p][i][j] = 'x';\n}\n</code></pre>\n\n<p>It could be usefull to know what values do you get for your variables.</p>\n"}], "owner": {"reputation": 91, "user_id": 3542154, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4d0c23e9daf093e9b82d9ca0ebabb40c?s=128&d=identicon&r=PG&f=1", "display_name": "user3542154", "link": "https://stackoverflow.com/users/3542154/user3542154"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1451568338, "creation_date": 1451514051, "last_edit_date": 1451559322, "question_id": 34538153, "link": "https://stackoverflow.com/questions/34538153/plotting-a-line-with-slope-45-degrees", "title": "Plotting a line with slope 45 degrees", "body": "<p>This is a homework assignment. I am given the coordinates of my viewport, and the coordinates of a line that is given to be either horizontal, vertical or at 45 degrees.  </p>\n\n<p>This is my function to draw the line  </p>\n\n<pre><code>void DrawLine(int p, int x1, int y1, int x2, int y2)\n{\nint row,col;\n\n\nif( x1 == x2) //vertical\n{\n    ClipToPanel(panel_top[p][0], panel_top[p][1], panel_bot[p][0], panel_bot[p][1], x1, y1, x2, y2);\n //   cout&lt;&lt;tmpx1&lt;&lt;\",\"&lt;&lt;tmpy1&lt;&lt;\" \"&lt;&lt;tmpx2&lt;&lt;\",\"&lt;&lt;tmpy2&lt;&lt;endl;\n\n    if(tmpx1==NINF)\n        return;\n    if(tmpy1 &gt; tmpy2)\n        swap(tmpy1,tmpy2);\n\n    col = tmpx1 - panel_top[p][0];\n    for(int i = tmpy1 - panel_top[p][1] ; i &lt;= tmpy2 - panel_top[p][1] ; i++)\n        panel[p][i][col] = 'x';\n}\nelse if( y1 == y2) //horizontal\n{\n    ClipToPanel(panel_top[p][0], panel_top[p][1], panel_bot[p][0], panel_bot[p][1], x1, y1, x2, y2);\n   // cout&lt;&lt;tmpx1&lt;&lt;\",\"&lt;&lt;tmpy1&lt;&lt;\" \"&lt;&lt;tmpx2&lt;&lt;\",\"&lt;&lt;tmpy2&lt;&lt;endl;\n    if(tmpx1==NINF)\n        return;\n    if(tmpx1 &gt; tmpx2)\n        swap(tmpx1, tmpx2);\n\n    row = tmpy2 - panel_top[p][1];\n    for(int j = tmpx1 - panel_top[p][0] ; j &lt;= tmpx2 - panel_top[p][0] ; j++)\n        panel[p][row][j] = 'x';\n}\n\nelse if(abs(x2-x1) == abs(y2-y1)) //45degree line\n{\n    ClipToPanel(panel_top[p][0], panel_top[p][1], panel_bot[p][0], panel_bot[p][1], x1, y1, x2, y2);\n //   cout&lt;&lt;tmpx1&lt;&lt;\",\"&lt;&lt;tmpy1&lt;&lt;\" \"&lt;&lt;tmpx2&lt;&lt;\",\"&lt;&lt;tmpy2&lt;&lt;endl;\n    if(tmpx1 == NINF)\n        return;\n\n    x1 = tmpx1 - panel_top[p][0];\n    x2 = tmpx2 - panel_top[p][0];\n    y1 = tmpy1 - panel_top[p][1];\n    y2 = tmpy2 - panel_top[p][1];\n    if(y2 &gt; y1)\n    {\n        if(x2 &gt; x1)\n        {\n            for(int i = y1, j = x1 ; i&lt;=y2 ;i++,j++)\n                panel[p][i][j] = 'x';\n        }\n        else\n        {\n            for(int i = y1, j = x1 ; i &lt;= y2; j--, i++)\n                panel[p][i][j] = 'x';\n        }\n    }\n    else\n    {\n        if(x2&gt;x1)\n        {\n            for(int i = y1, j = x1 ; i &gt;= y2 ; i--, j++)\n                panel[p][i][j] = 'x';\n        }\n        else\n        {\n            for(int i = y1, j = x1 ; i &gt;= y2 ; i--, j--)\n                panel[p][i][j] = 'x';\n        }\n    }\n}\n}\n</code></pre>\n\n<p>The axes are +Y downwards +X towards right.<br>\nThe viewport and line coordinates can range from -10000 to 10000. I subtract the lower corner to get them in range [0,n] and store in a matrix.<br>\n<code>ClipToPanel()</code> is the implementation of cohen-sutherland algorithm to clip the line and get the endpoints inside the viewport.<br>\nIt sets the values if <code>tmpx1</code>, <code>tmpy1</code>, <code>tmpx2</code>, <code>tmpy2</code> as the end points of the clipped line.  </p>\n\n<pre><code>panel_top[p][0] is upper x-coordinate of viewport (xmin)\npanel_top[p][1] is upper y-coordinate of viewport (ymin)  \npanel_bot[p][0] is lower x-coordinate of viewport (xmax)\npanel_bot[p][1] is lower y-coordinate of viewport (ymax)  \n</code></pre>\n\n<p>If the line is not in the viewport coords i set <code>tmpx1</code>, <code>tmpx2</code>, <code>tmpy2</code>, <code>tmpy1</code> to <code>NINF</code>.  </p>\n\n<p>I can't seem to find the error. My online judge keeps giving me a wrong answer.</p>\n"}, {"tags": ["c++", "vb.net", "pointers", "visual-c++", "dll"], "comments": [{"owner": {"reputation": 1020, "user_id": 4304120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc7c00d9ea3a92baac5b6927343dba?s=128&d=identicon&r=PG&f=1", "display_name": "Marian Spanik", "link": "https://stackoverflow.com/users/4304120/marian-spanik"}, "edited": false, "score": 0, "creation_date": 1451512538, "post_id": 34537772, "comment_id": 56817820, "body": "Does the VB.NET support native pointers?"}, {"owner": {"reputation": 21, "user_id": 5732193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5bxlK.jpg?s=128&g=1", "display_name": "chimi007", "link": "https://stackoverflow.com/users/5732193/chimi007"}, "reply_to_user": {"reputation": 1020, "user_id": 4304120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc7c00d9ea3a92baac5b6927343dba?s=128&d=identicon&r=PG&f=1", "display_name": "Marian Spanik", "link": "https://stackoverflow.com/users/4304120/marian-spanik"}, "edited": false, "score": 0, "creation_date": 1451513461, "post_id": 34537772, "comment_id": 56818226, "body": "Yes I believe so. C++ pointers are equivalent to variable passed &quot;ByRef&quot; in VB.NET."}, {"owner": {"reputation": 1020, "user_id": 4304120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc7c00d9ea3a92baac5b6927343dba?s=128&d=identicon&r=PG&f=1", "display_name": "Marian Spanik", "link": "https://stackoverflow.com/users/4304120/marian-spanik"}, "edited": false, "score": 1, "creation_date": 1451514257, "post_id": 34537772, "comment_id": 56818595, "body": "Isn&#39;t the ByRef a managed reference, the same as <code>double %a</code> in C++/CLI? I am asking because I don&#39;t know anything about programming in VB.NET, I am just guessing, it might be an answer..."}, {"owner": {"reputation": 21, "user_id": 5732193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5bxlK.jpg?s=128&g=1", "display_name": "chimi007", "link": "https://stackoverflow.com/users/5732193/chimi007"}, "reply_to_user": {"reputation": 1020, "user_id": 4304120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc7c00d9ea3a92baac5b6927343dba?s=128&d=identicon&r=PG&f=1", "display_name": "Marian Spanik", "link": "https://stackoverflow.com/users/4304120/marian-spanik"}, "edited": false, "score": 0, "creation_date": 1451515469, "post_id": 34537772, "comment_id": 56819061, "body": "I too am not an expert. A double passed ByRef in VB.NET is the same as a double* in C++/CLI. I don&#39;t think it is a type issue because Visual Studio assigns VB.NET equivalent types when the c++ dll is referenced."}], "answers": [{"tags": [], "owner": {"reputation": 12860, "user_id": 361899, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c16354d30a3d1531f8a7fa053b95716c?s=128&d=identicon&r=PG", "display_name": "aybe", "link": "https://stackoverflow.com/users/361899/aybe"}, "is_accepted": false, "score": 1, "last_activity_date": 1451517381, "creation_date": 1451517381, "answer_id": 34538729, "question_id": 34537772, "link": "https://stackoverflow.com/questions/34537772/unable-to-use-functions-with-pointer-arguments-from-visual-c-dll-in-vb-net/34538729#34538729", "title": "Unable to use functions with pointer arguments from Visual C++ DLL in VB.NET", "body": "<p>Change your definition to :</p>\n\n<pre><code>    double Add(double % a, double b)\n    {\n        return a + b;\n    }\n</code></pre>\n\n<p>This compiles as <code>ByRef</code> and works:</p>\n\n<p><a href=\"https://i.stack.imgur.com/DyeHi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DyeHi.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 21, "user_id": 5732193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5bxlK.jpg?s=128&g=1", "display_name": "chimi007", "link": "https://stackoverflow.com/users/5732193/chimi007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1451517381, "creation_date": 1451512159, "last_edit_date": 1451513650, "question_id": 34537772, "link": "https://stackoverflow.com/questions/34537772/unable-to-use-functions-with-pointer-arguments-from-visual-c-dll-in-vb-net", "title": "Unable to use functions with pointer arguments from Visual C++ DLL in VB.NET", "body": "<p>I am trying to use a Visual C++ dll in a VB.NET windows application, both created in VS2010. In the Windows project I can successfully add the dll to my references but only functions without pointer arguments are usable in the program and visible in the object browser. I borrowed a simple example I found and changed one of the function arguments to be a pointer.\nheader file:</p>\n\n<pre><code>// TestDLL.h\n\nusing namespace System;\nnamespace MathFuncs\n{\n    public ref class MyMathFuncs\n    {\n        public: \n            static double Add(double *a, double B);\n            static double Subtract(double a, double B);\n            static double Multiply(double a, double B);\n            static double Divide(double a, double B);\n    };\n}\n</code></pre>\n\n<p>cpp file </p>\n\n<pre><code>// TestDLL.cpp\n// compile with: /clr /LD\n\n#include \"TestDLL.h\"\n\nnamespace MathFuncs\n{\n    double MyMathFuncs::Add(double *a, double B)\n    {\n        return *a + b;\n    }\n\n    double MyMathFuncs::Subtract(double a, double B)\n    {\n        return a - b;\n    }\n\n    double MyMathFuncs::Multiply(double a, double B)\n    {\n        return a * b;\n    }\n\n    double MyMathFuncs::Divide(double a, double B)\n    {\n        if (b == 0)\n        {\n            throw gcnew DivideByZeroException(\"b cannot be zero!\");\n        }\n\n        return a / b;\n    }\n}\n</code></pre>\n\n<p>The dll compiles successfully with no warnings. When I reference the dll in a simple windows form I get the error:</p>\n\n<p>\"Error 1 'Add' has a return type that is not supported or parameter types that are not supported.\" </p>\n\n<p>If I remove the pointer the dll works fine. From other forums I thought the calling convention might be a problem and tried using <strong>__stdcall</strong> but I got another error saying reference classes can't use <strong>__stdcall</strong>. </p>\n\n<p>I also tried not referencing the dll and instead declaring the dll functions from a module in the windows application. I got an error saying \"entry point not found\" which I think is because C++ decorates the function name. I tried <strong>dumpbin.exe/EXPORTS \"<em>dll PATH</em>\"</strong>  but it would not show the decorated function names. I have also tried creating an module definition file and using extern \"c\" although I most likely didn't use them properly. All solutions I have found to these problems have been for unmanaged C++ but do not work for managed Visual C++.</p>\n\n<p>I would rather be able to reference the dll because it seems simpler. Any insight would be greatly appreciated. </p>\n"}, {"tags": ["c++", "c++11", "hashtable", "time-complexity", "unordered-map"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 2, "creation_date": 1451511390, "post_id": 34537567, "comment_id": 56817300, "body": "If you have a lot of hash collisions your hash map degenerates into a linked list, maybe thats what happened."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1451511415, "post_id": 34537567, "comment_id": 56817307, "body": "Try adding some padding to your type so that it occupies an entire cache line. At small sizes, cache locality may be the dominating factor."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1451511450, "post_id": 34537567, "comment_id": 56817320, "body": "@nwp: Excellent point; the OP should also output a histogram of all hash values and see if there are any collisions."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1451511610, "post_id": 34537567, "comment_id": 56817384, "body": "The hash function does not seem to be so great, btw."}, {"owner": {"reputation": 65, "user_id": 3366520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/837ec54012ce8afe7491138568afbf3d?s=128&d=identicon&r=PG&f=1", "display_name": "aqww", "link": "https://stackoverflow.com/users/3366520/aqww"}, "edited": false, "score": 0, "creation_date": 1451512258, "post_id": 34537567, "comment_id": 56817678, "body": "I have count 256 collisions with the 100 loop, 2048 collisions with the 1000 loop"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1451512332, "post_id": 34537567, "comment_id": 56817719, "body": "@aqww Which is almost a 10-fold increase in the number of collisions... So the time increase for finding is not so surprising anymore, especially if you happen to &quot;hit&quot; one of the elements that have a lot of collisions."}, {"owner": {"reputation": 65, "user_id": 3366520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/837ec54012ce8afe7491138568afbf3d?s=128&d=identicon&r=PG&f=1", "display_name": "aqww", "link": "https://stackoverflow.com/users/3366520/aqww"}, "edited": false, "score": 0, "creation_date": 1451512398, "post_id": 34537567, "comment_id": 56817750, "body": "I see, so I need a better hash function I guess"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 1, "creation_date": 1451512425, "post_id": 34537567, "comment_id": 56817766, "body": "@aqww Yes, which is an art by itself ;) <a href=\"http://stackoverflow.com/questions/8513911/how-to-create-a-good-hash-combine-with-64-bit-output-inspired-by-boosthash-co\">This (and links within)</a> may be useful."}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 1, "creation_date": 1451547353, "post_id": 34537567, "comment_id": 56827483, "body": "Which compiler are you using?  Visual C++ uses power-of-2 bucket counts which will be worse with such a weak hash function, while GCC uses primes.  The number of buckets with collisions is not the most meaningful thing to count - how deep those collision chains get is very important.  And, you&#39;re only timing a single lookup, so for your current benchmark it&#39;s only the <code>bucket_size</code> for <code>m.bucket(Vector2i(0,5))</code> that&#39;s relevant.  Anyway, try <code>boost::hash_combine</code> or the <a href=\"http://stackoverflow.com/questions/29883840/boosthash-combine-vs-simple-xoring?lq=1\">algo therefrom</a> - it&#39;ll help."}, {"owner": {"reputation": 65, "user_id": 3366520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/837ec54012ce8afe7491138568afbf3d?s=128&d=identicon&r=PG&f=1", "display_name": "aqww", "link": "https://stackoverflow.com/users/3366520/aqww"}, "reply_to_user": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 1, "creation_date": 1451610101, "post_id": 34537567, "comment_id": 56848324, "body": "@TonyD I use GCC compiler. And you&#39;re right my collision counting is not good, a better way would be collisions += bucket_size - 1 for every bucket. hash_combine as suggested by the answer fixed my problem. (now I have almost a constant time)"}], "answers": [{"comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 2, "creation_date": 1451512722, "post_id": 34537619, "comment_id": 56817900, "body": "also 2 and 56 microseconds can&#39;t be used as a reliable measure. At this order magnitude of timing, the noise in the OS and hw will be dominant."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1451512801, "post_id": 34537619, "comment_id": 56817936, "body": "@bolov True, one should test for relatively larger times/number of elements, and scale them appropriately. Although if may give you a hint that something may be fishy."}, {"owner": {"reputation": 65, "user_id": 3366520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/837ec54012ce8afe7491138568afbf3d?s=128&d=identicon&r=PG&f=1", "display_name": "aqww", "link": "https://stackoverflow.com/users/3366520/aqww"}, "edited": false, "score": 0, "creation_date": 1451515378, "post_id": 34537619, "comment_id": 56819034, "body": "I implemented the hash_combine thing, now I have 1 microsecond with 100*100 elements, 3 microseconds with 1000*1000. But something is wrong with the collision number ... It outputs me 258409 collisions for the 1000 loop,  2192 for the 100 loop.. I think I am not counting them as it should .."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 65, "user_id": 3366520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/837ec54012ce8afe7491138568afbf3d?s=128&d=identicon&r=PG&f=1", "display_name": "aqww", "link": "https://stackoverflow.com/users/3366520/aqww"}, "edited": false, "score": 0, "creation_date": 1451515530, "post_id": 34537619, "comment_id": 56819084, "body": "@aqww The timing scaling looks much better, although cannot draw a clear conclusion for those super small times, see bolov&#39;s comment. Try to increase the number of elements 1000 times and test for a much larger time. Try to use <a href=\"http://en.cppreference.com/w/cpp/container/unordered_map/bucket_size\" rel=\"nofollow noreferrer\"><code>std::unordered_map::bucket_size</code></a> to see how many elements per bucket you have (i.e. collisions)."}, {"owner": {"reputation": 65, "user_id": 3366520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/837ec54012ce8afe7491138568afbf3d?s=128&d=identicon&r=PG&f=1", "display_name": "aqww", "link": "https://stackoverflow.com/users/3366520/aqww"}, "edited": false, "score": 0, "creation_date": 1451516025, "post_id": 34537619, "comment_id": 56819254, "body": "3 microseconds for 10000*10000, 21612599 collisions. Yes I used bucket_size, see my edit I posted the code."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 65, "user_id": 3366520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/837ec54012ce8afe7491138568afbf3d?s=128&d=identicon&r=PG&f=1", "display_name": "aqww", "link": "https://stackoverflow.com/users/3366520/aqww"}, "edited": false, "score": 0, "creation_date": 1451516123, "post_id": 34537619, "comment_id": 56819292, "body": "@aqww Well... then I&#39;d say try to find a <i>random</i> element in both cases. Because you may end up searching for an element that lives in a very short bucket, so the accessing time is small, even though the collision rate is high. One thing to learn from all of this is that there is no perfect data structure. Every one is good in some particular case, and bad in some others."}, {"owner": {"reputation": 941, "user_id": 3143654, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006006133514/picture?type=large", "display_name": "Anthony Akentiev", "link": "https://stackoverflow.com/users/3143654/anthony-akentiev"}, "reply_to_user": {"reputation": 65, "user_id": 3366520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/837ec54012ce8afe7491138568afbf3d?s=128&d=identicon&r=PG&f=1", "display_name": "aqww", "link": "https://stackoverflow.com/users/3366520/aqww"}, "edited": false, "score": 0, "creation_date": 1451516451, "post_id": 34537619, "comment_id": 56819389, "body": "@aqww see unordered_map::load_factor() method for counting collisions"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 941, "user_id": 3143654, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006006133514/picture?type=large", "display_name": "Anthony Akentiev", "link": "https://stackoverflow.com/users/3143654/anthony-akentiev"}, "edited": false, "score": 0, "creation_date": 1451516496, "post_id": 34537619, "comment_id": 56819402, "body": "@AnthonyAkentiev I first thought the same also. Although <code>load_factor</code> may trick you. E.g., you may have a load factor of 1, but everything be distributed into one bucket. <code>load_factor</code> just counts the sum of bucket counts then divides it by the size of the storage array. I am curious if there is any &quot;good&quot; function (or proposal) to properly count the number of collisions."}, {"owner": {"reputation": 941, "user_id": 3143654, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006006133514/picture?type=large", "display_name": "Anthony Akentiev", "link": "https://stackoverflow.com/users/3143654/anthony-akentiev"}, "edited": false, "score": 0, "creation_date": 1451516627, "post_id": 34537619, "comment_id": 56819449, "body": "@vsoftco how come? <i>load_factor = size / bucket_count</i>"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 941, "user_id": 3143654, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006006133514/picture?type=large", "display_name": "Anthony Akentiev", "link": "https://stackoverflow.com/users/3143654/anthony-akentiev"}, "edited": false, "score": 0, "creation_date": 1451516767, "post_id": 34537619, "comment_id": 56819484, "body": "@AnthonyAkentiev Yes, but what if you have <code>n</code> buckets, on an <code>n</code> size hash, but only the first bucket is loaded like crazy? Or 1 single bucket, with <code>n</code> entries? I may be wrong though, am not super familiar with hash tables. The wikipedia article is quite nice also: <a href=\"https://en.wikipedia.org/wiki/Hash_table#Key_statistics\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Hash_table#Key_statistics</a>."}, {"owner": {"reputation": 65, "user_id": 3366520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/837ec54012ce8afe7491138568afbf3d?s=128&d=identicon&r=PG&f=1", "display_name": "aqww", "link": "https://stackoverflow.com/users/3366520/aqww"}, "reply_to_user": {"reputation": 941, "user_id": 3143654, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006006133514/picture?type=large", "display_name": "Anthony Akentiev", "link": "https://stackoverflow.com/users/3143654/anthony-akentiev"}, "edited": false, "score": 0, "creation_date": 1451516803, "post_id": 34537619, "comment_id": 56819493, "body": "@AnthonyAkentiev load factor is 0.94668 ( for 1000*1000 elements)"}, {"owner": {"reputation": 65, "user_id": 3366520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/837ec54012ce8afe7491138568afbf3d?s=128&d=identicon&r=PG&f=1", "display_name": "aqww", "link": "https://stackoverflow.com/users/3366520/aqww"}, "edited": false, "score": 0, "creation_date": 1451517060, "post_id": 34537619, "comment_id": 56819581, "body": "@vsoftco I changed the value of element to find several times, output stays same."}, {"owner": {"reputation": 941, "user_id": 3143654, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006006133514/picture?type=large", "display_name": "Anthony Akentiev", "link": "https://stackoverflow.com/users/3143654/anthony-akentiev"}, "edited": false, "score": 0, "creation_date": 1451517140, "post_id": 34537619, "comment_id": 56819614, "body": "@vsoftco &quot;The load factor is the ratio between the number of elements in the container (its size) and the number of buckets (bucket_count)&quot; i.e. <i>load_factor = size / bucket_count</i>. You will get high load_factor if some of your buckets will be &quot;loaded like a crazy&quot;.   For example: total items=100. bucket_count=2. First bucket contains 99 items, second only 1. load_factor = 100 /2 = 50. Very high. You can&#39;t get &quot;empty&quot; buckets. bucket_count is only about occupied. AFAIK"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 941, "user_id": 3143654, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006006133514/picture?type=large", "display_name": "Anthony Akentiev", "link": "https://stackoverflow.com/users/3143654/anthony-akentiev"}, "edited": false, "score": 1, "creation_date": 1451517195, "post_id": 34537619, "comment_id": 56819634, "body": "@AnthonyAkentiev Sorry, I meant buckets with only 1 element, not empty. Although I agree with you (and also mentioned the load factor in my answer), that in general is a pretty good indicator."}, {"owner": {"reputation": 65, "user_id": 3366520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/837ec54012ce8afe7491138568afbf3d?s=128&d=identicon&r=PG&f=1", "display_name": "aqww", "link": "https://stackoverflow.com/users/3366520/aqww"}, "edited": false, "score": 0, "creation_date": 1451518395, "post_id": 34537619, "comment_id": 56820059, "body": "My load factor returns exactly the same value(0.94668) for my first hash function (with 1000*1000 elements), but the number of collisions are different. weird..."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 65, "user_id": 3366520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/837ec54012ce8afe7491138568afbf3d?s=128&d=identicon&r=PG&f=1", "display_name": "aqww", "link": "https://stackoverflow.com/users/3366520/aqww"}, "edited": false, "score": 0, "creation_date": 1451518501, "post_id": 34537619, "comment_id": 56820092, "body": "@aqww That&#39;s because load factor is not 100% in agreement with collision number. But I&#39;d say this is a very good opportunity to learn how those hash maps work, and what their limitations are. Try testing, plotting, then drawing conclusions. You may even try to contribute a self-answered question on StackOverflow if you feel you get the testing right, it will be probably quite useful."}], "tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": true, "score": 4, "last_activity_date": 1451512573, "last_edit_date": 1495541748, "creation_date": 1451511411, "answer_id": 34537619, "question_id": 34537567, "link": "https://stackoverflow.com/questions/34537567/why-is-my-stdunordered-map-access-time-not-constant/34537619#34537619", "title": "Why is my std::unordered_map access time not constant", "body": "<p>A hash table guarantees <a href=\"https://stackoverflow.com/questions/200384/constant-amortized-time\">constant <strong>amortized</strong> time</a>. If the hash table is well balanced (i.e., the hash function is good), then most elements will be evenly distributed. However, if the hash function is not so good, you may have lots of collisions, in which case to access an element you'd need to traverse usually a linked list (where you store the elements that collided). So make sure first the <a href=\"http://en.cppreference.com/w/cpp/container/unordered_map/load_factor\" rel=\"nofollow noreferrer\">load factor</a> and hash function are OK in your case. Lastly, make sure you compiler your code in release mode, with optimizations turned on (e.g. <code>-O3</code> for g++/clang++).</p>\n\n<p>This question may be useful also: <a href=\"https://stackoverflow.com/q/8513911/3093378\">How to create a good hash_combine with 64 bit output (inspired by boost::hash_combine)</a>.</p>\n"}], "owner": {"reputation": 65, "user_id": 3366520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/837ec54012ce8afe7491138568afbf3d?s=128&d=identicon&r=PG&f=1", "display_name": "aqww", "link": "https://stackoverflow.com/users/3366520/aqww"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1029, "favorite_count": 0, "accepted_answer_id": 34537619, "answer_count": 1, "score": 1, "last_activity_date": 1451516257, "creation_date": 1451511156, "last_edit_date": 1451516257, "question_id": 34537567, "link": "https://stackoverflow.com/questions/34537567/why-is-my-stdunordered-map-access-time-not-constant", "title": "Why is my std::unordered_map access time not constant", "body": "<p>I wrote some code to test my unordered map performance with a 2 component vector as a key.</p>\n\n<pre><code>std::unordered_map&lt;Vector2i, int&gt; m;                                                                      \n\nfor(int i = 0; i &lt; 1000; ++i)                                                                             \n    for(int j = 0; j &lt; 1000; ++j)                                                                         \n        m[Vector2i(i,j)] = i*j+27*j;                                                                      \n\nclock.restart();                                                                                          \n\nauto found = m.find(Vector2i(0,5));                                                                                                                                                            \n\nstd::cout &lt;&lt; clock.getElapsedTime().asMicroseconds() &lt;&lt; std::endl;                                         \n</code></pre>\n\n<p>output for the code above: 56 (microseconds)\nWhen I replace 1000 in the for loops by 100 the outputs is 2 (microseconds)\nIsn't the time supposed to be constant ?</p>\n\n<p>hash function for my Vector2i:</p>\n\n<pre><code>namespace std                                                                                                    \n{\n\n   template&lt;&gt;                                                                                                   \n    struct hash&lt;Vector2i&gt;                                                                                        \n    {                                                                                                            \n        std::size_t operator()(const Vector2i&amp; k) const                                                          \n        {                                                                                                        \n            using std::size_t;                                                                                   \n            using std::hash;                                                                                     \n            using std::string;                                                                                   \n\n            return (hash&lt;int&gt;()(k.x)) ^ (hash&lt;int&gt;()(k.y) &lt;&lt; 1);                                                 \n        }                                                                                                        \n\n    };                                                                                                           \n\n\n}                                                                             \n</code></pre>\n\n<p><strong>EDIT:</strong> \nI added this code to count the collisions after the for loop:</p>\n\n<pre><code>for (size_t bucket = 0; bucket != m.bucket_count(); ++bucket)                                             \n    if (m.bucket_size(bucket) &gt; 1)                                                                        \n         ++collisions; \n</code></pre>\n\n<p>With 100*100 elements: collisions = 256</p>\n\n<p>1000*1000 elements: collisions = 2048</p>\n"}, {"tags": ["c++", "module", "compiler-construction", "llvm"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user395760"}, "edited": false, "score": 0, "creation_date": 1451515944, "post_id": 34537555, "comment_id": 56819224, "body": "Even if you managed to shoe-horn all this information into LLVM bitcode, why would you? What do you gain from the module file format being an unmodiefied <code>.bc</code> file? It seems much simpler and sensible to create a new file format that <i>includes</i> bitcode alongside other, non-LLVM data."}, {"owner": {"reputation": 4347, "user_id": 2105636, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/A8kiD.jpg?s=128&g=1", "display_name": "Matthew Sanders", "link": "https://stackoverflow.com/users/2105636/matthew-sanders"}, "edited": false, "score": 0, "creation_date": 1451525655, "post_id": 34537555, "comment_id": 56821889, "body": "Your comment is actually very close to the answer given.  You are correct in that there really isn&#39;t much of a need to include the extra data in a vanilla <code>.bc</code> file."}], "answers": [{"comments": [{"owner": {"reputation": 4347, "user_id": 2105636, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/A8kiD.jpg?s=128&g=1", "display_name": "Matthew Sanders", "link": "https://stackoverflow.com/users/2105636/matthew-sanders"}, "edited": false, "score": 0, "creation_date": 1451525172, "post_id": 34537857, "comment_id": 56821797, "body": "I was already planning on supporting serialization of the AST and already debug print it with a command line option.  I&#39;m not sure why I didn&#39;t just consider using that as &quot;library&quot; build option.  Thanks for the suggestion.  You also don&#39;t have to worry about platform specifics so you can build libraries that are just as portable as the language you construct."}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 3, "last_activity_date": 1451512563, "creation_date": 1451512563, "answer_id": 34537857, "question_id": 34537555, "link": "https://stackoverflow.com/questions/34537555/creating-a-modular-language-in-llvm/34537857#34537857", "title": "Creating a modular language in LLVM?", "body": "<p>This is probably not QUITE an answer... Or at least not a complete answer. </p>\n\n<p>I like this question, as I'm going to need a solution in the future too (some time in the next few months or years) for my Pascal compiler. It supports \"units\" which is meant to be a separately compiled object, but currently what I do is simply drag in the source file and compile it into the main <code>llvm::Module</code> - that's neither efficient nor flexible (can't use the linker to choose between the \"Linux\" and \"Windows\" version of some code, for example - not that I think there is 5% chance that my compiler will work on Windows without modification anyway...)</p>\n\n<p>However, I'm not sure storing the \"object\" file as LLVM IR would be the right thing to do. I was thinking that a better way would be to store your AST in some serialized form - then</p>\n\n<ol>\n<li>you don't depend on LLVM versions changing the IR format.</li>\n<li>You can add whatever metadata you like. There won't be much\ndifference in generating LLVM-IR from this during your link phase or\nbuilding the IR at compile and then reading the IR to figure out if\nthe metadata is correct. [The slow part, as you may have already found out, is the optimisation and MC generation, and you'd still have to do that either way]</li>\n</ol>\n\n<p>Like I started out, I'm not sure this is an answer, but it's my thoughts so far on the subject. Now I'll go back to adding debug symbol stuff to my Pascal compiler... Before Christmas, I couldn't see the source in GDB. Now I can step, but no viewing of variables yet...</p>\n"}], "owner": {"reputation": 4347, "user_id": 2105636, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/A8kiD.jpg?s=128&g=1", "display_name": "Matthew Sanders", "link": "https://stackoverflow.com/users/2105636/matthew-sanders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 0, "accepted_answer_id": 34537857, "answer_count": 1, "score": 3, "last_activity_date": 1451512563, "creation_date": 1451511101, "last_edit_date": 1592644375, "question_id": 34537555, "link": "https://stackoverflow.com/questions/34537555/creating-a-modular-language-in-llvm", "title": "Creating a modular language in LLVM?", "body": "<p>I'm developing a new language in <a href=\"http://llvm.org/\" rel=\"nofollow noreferrer\">LLVM</a> using the C++ API which compiles down to target the C ABI.</p>\n<p>I would like to support modular compilation by allowing end users to build what are effectively static libraries.  I noticed the LLVM C++ API has a <a href=\"http://llvm.org/docs/doxygen/html/classllvm_1_1Linker.html\" rel=\"nofollow noreferrer\">llvm::Linker</a> class that I can use during compilation to combine source files (<a href=\"http://llvm.org/docs/doxygen/html/classllvm_1_1Module.html\" rel=\"nofollow noreferrer\">llvm::Module</a>), however I wanted to guarantee library compatibility via metadata version numbers or at least the publicly exposed interface between separate compilation runs.</p>\n<p>Much of the information available on <a href=\"http://llvm.org/docs/LangRef.html#metadata\" rel=\"nofollow noreferrer\">metadata</a> in LLVM suggest that it should only be used for extended information that would not break correctness when silently removed.</p>\n<ol>\n<li><a href=\"http://blog.llvm.org/2010/04/extensible-metadata-in-llvm-ir.html\" rel=\"nofollow noreferrer\">llvm\nblog</a></li>\n<li><a href=\"http://llvm.org/devmtg/2014-10/Slides/Finkel-IntrinsicsMetadataAttributes.pdf\" rel=\"nofollow noreferrer\">IntrinsicsMetadataAttributes\npdf</a></li>\n</ol>\n<p>I wouldn't think this would be a deal breaker as it could be global metadata, but it would be good to get a second opinion on that point.</p>\n<p>I also know there is a method in <a href=\"http://llvm.org/docs/doxygen/html/IRReader_2IRReader_8h.html\" rel=\"nofollow noreferrer\">IRReader to parseIRFile</a> so I can load some previously built bc files.  I would be curious if it would be reasonable practice to include size and CRC information for comparison when loading these files.</p>\n<p>My language has concepts similar to C# including interfaces.  I figure I could allow modular compilation by importing/exporting an interface type along with external functions (Much like C++, I don't restrict the language to only methods of classes).</p>\n<p>This approach allows me to include language specific information in the interface without needing to encode it in the IR as both the library and the calling code would be required to build with the interface.  This again requires the interfaces to be compatible.</p>\n<p>One language feature that would require extended information would be named parameters in functions.</p>\n<p>My language is very type-safe and also mandates named parameters so there is no predetermined function parameter order.  This allows call sites to be more explicit, the compiler to catch erroneous parameter usage, and authors have more liberty in determining default parameters as they are not restricted to the last parameters to the function.</p>\n<p>The compiler will need to know names, modifiers, defaults, etc. of these parameters to correctly map calls at compile time, so I figure the interface approach would work well here.</p>\n<h1><em><strong>TL;DR</strong></em></h1>\n<ol>\n<li>Does LLVM have any predefined facilities for building static libraries?</li>\n<li>Is version number, size, and CRC information reasonable use cases for LLVM's metadata?</li>\n</ol>\n"}, {"tags": ["c++", "linux", "oracle12c"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1451512377, "post_id": 34537552, "comment_id": 56817741, "body": "Where does the &#39;<code>Invalid argument - errno 22</code>&#39; get generated in that code?  It isn&#39;t obvious which line(s) produces that message."}, {"owner": {"reputation": 21, "user_id": 5705263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7d589281cae9e80a575b5d682d37e09?s=128&d=identicon&r=PG&f=1", "display_name": "Efrain", "link": "https://stackoverflow.com/users/5705263/efrain"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1451512972, "post_id": 34537552, "comment_id": 56818015, "body": "The error happens in the following lines:      if (aio_read(&amp;cb) == -1)     {         cout &lt;&lt; &quot;Unable to create request!&quot; &lt;&lt; endl;         close(file);     }"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1451513245, "post_id": 34537552, "comment_id": 56818132, "body": "The output you show doesn&#39;t say &#39;Unable to create request!&#39;; it says &#39;Invalid argument - errno 22&#39;.  So, the code you show is not the code you execute, which makes it hard for us to guess what the problem actually is.  Please sort things out so at least the code and the error message are self-evidently self-consistent.  It isn&#39;t clear why that code is linked with the Oracle libraries; it looks like regular POSIX calls throughout.  Why is that necessary? Are you building this on the same machine with the two different versions of Oracle, or on two different machines?"}, {"owner": {"reputation": 21, "user_id": 5705263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7d589281cae9e80a575b5d682d37e09?s=128&d=identicon&r=PG&f=1", "display_name": "Efrain", "link": "https://stackoverflow.com/users/5705263/efrain"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1451514736, "post_id": 34537552, "comment_id": 56818791, "body": "I just modified the error according to my code. I had put down the previous error because that is the actual error after investigation.  I have two different versions of oracle on the same machine, and I am only changing the ICLIBHOME variable. So when I point to Oracle 11g it work correctly but with Oracle 12c it gives me the error."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1451515973, "post_id": 34537552, "comment_id": 56819237, "body": "What happens if you don&#39;t link with the Oracle libraries at all?  The sample code doesn&#39;t seem to need them."}, {"owner": {"reputation": 21, "user_id": 5705263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7d589281cae9e80a575b5d682d37e09?s=128&d=identicon&r=PG&f=1", "display_name": "Efrain", "link": "https://stackoverflow.com/users/5705263/efrain"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1451579340, "post_id": 34537552, "comment_id": 56840166, "body": "If I don&#39;t link with Oracle libraries it works fine, but this code is going to be modified and used to connect to the Database so first we need to make sure that it works with oracle libraries."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1451579614, "post_id": 34537552, "comment_id": 56840268, "body": "That is extremely weird.  You may need to take a look at the Oracle libraries and see whether they define dummy <code>aio_*()</code> functions that fail, or something outlandish like that.  Adding an &#39;unused&#39; library to the linking process should not affect the behaviour of the program.  You&#39;ll probably need to use <code>nm</code> with appropriate options to find out what symbols are defined in the Oracle library.  If you do find something in the 12c library, check whether it is in the 11g library too.  If not, then you know what&#39;s going on \u2014 but not why. <i>[\u2026continued\u2026]</i>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1451579806, "post_id": 34537552, "comment_id": 56840346, "body": "<i>[\u2026continuation\u2026]</i> If (and I still consider it extremely improbable) they&#39;re defined in the Oracle 12c library and not the 11g library, then presumably, Oracle considers that its library cannot be used safely by programs that use the AIO functions. However, there should be discussion of such issues somewhere in the release notes, especially as it would be a change from 11c. I re-emphasize, I consider this to be a far-fetched, improbable source of the trouble.  But there&#39;s something in the Oracle 12c library that was not in 11g that causes trouble. Careful analysis of <code>nm</code> output may show what."}], "owner": {"reputation": 21, "user_id": 5705263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7d589281cae9e80a575b5d682d37e09?s=128&d=identicon&r=PG&f=1", "display_name": "Efrain", "link": "https://stackoverflow.com/users/5705263/efrain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1451514494, "creation_date": 1451511096, "last_edit_date": 1451514494, "question_id": 34537552, "link": "https://stackoverflow.com/questions/34537552/how-to-read-asynchronous-file-i-o-on-linux-linking-with-oracle-client-12c-librar", "title": "How to read asynchronous file I/O on Linux linking with Oracle Client 12c libraries?", "body": "<p>The following code works just fine when linking with Oracle client 11g but if I compile the same linking with Oracle 12c libraries I receive the error EINVAL Invalid argument - errno 22.</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;aio.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nconst int SIZE_TO_READ = 100;\n\nint main()\n{\n    // open the file\n    int file = open(\"blah.txt\", O_RDONLY, 0);\n\n    if (file == -1)\n    {\n        cout &lt;&lt; \"Unable to open file!\" &lt;&lt; endl;\n        return 1;\n    }\n\n    // create the buffer\n    char* buffer = new char[SIZE_TO_READ];\n\n    // create the control block structure\n    aiocb cb;\n\n    memset(&amp;cb, 0, sizeof(aiocb));\n    cb.aio_nbytes = SIZE_TO_READ;\n    cb.aio_fildes = file;\n    cb.aio_offset = 0;\n    cb.aio_buf = buffer;\n\n    // read!\n    if (aio_read(&amp;cb) == -1)\n    {\n        cout &lt;&lt; \"Unable to create request!\" &lt;&lt; endl;\n        close(file);\n    }\n\n    cout &lt;&lt; \"Request enqueued!\" &lt;&lt; endl;\n\n    // wait until the request has finished\n    while(aio_error(&amp;cb) == EINPROGRESS)\n    {\n        cout &lt;&lt; \"Working...\" &lt;&lt; endl;\n    }\n\n    // success?\n    int numBytes = aio_return(&amp;cb);\n\n    if (numBytes != -1)\n        cout &lt;&lt; \"Success!\" &lt;&lt; endl;\n    else\n        cout &lt;&lt; \"Error!\" &lt;&lt; endl;\n\n    // now clean up\n    delete[] buffer;\n    close(file);\n\n    return 0;\n}\n</code></pre>\n\n<p>Then to compile I first set the env variables</p>\n\n<pre><code>export ICLIBHOME=/u01/oracle/product/Linux/2.6/x86_64/clients/12.1.0.2/64bit/client/lib\nexport LD_LIBRARY_PATH=${ICLIBHOME}\n</code></pre>\n\n<p>Afterwards I compile and execute my compiled file but I get the error</p>\n\n<pre><code>g++ myaio.cpp -o myaio -lrt -L${ICLIBHOME} -lclntsh\n./myaio\nUnable to create request 22\n</code></pre>\n"}, {"tags": ["c++", "class"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1451511151, "post_id": 34537539, "comment_id": 56817197, "body": "Perhaps code that is indented correctly and can compile might be a good start"}, {"owner": {"reputation": 61, "user_id": 5721493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c075a540502333dffdfcce69f0b206a4?s=128&d=identicon&r=PG&f=1", "display_name": "Macta Man", "link": "https://stackoverflow.com/users/5721493/macta-man"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1451511212, "post_id": 34537539, "comment_id": 56817226, "body": "@EdHeal the code isn&#39;t important, It&#39;s just an example."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1451511279, "post_id": 34537539, "comment_id": 56817257, "body": "If &quot;the code&quot; isn&#39;t important, you might want to reconsider your choice of a career. Because &quot;the code&quot; is very important in computer science."}, {"owner": {"reputation": 61, "user_id": 5721493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c075a540502333dffdfcce69f0b206a4?s=128&d=identicon&r=PG&f=1", "display_name": "Macta Man", "link": "https://stackoverflow.com/users/5721493/macta-man"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1451511385, "post_id": 34537539, "comment_id": 56817295, "body": "@SamVarshavchik Sorry, I meant that the code that I displayed was not very important to my question, I was just meant to aid the explanation of my question that I had."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1451511558, "post_id": 34537539, "comment_id": 56817364, "body": "@CarterCall So you didn&#39;t store all of your Tiles in some kind of a container?  Not even a simple array of Tiles?  This is the information that you left out, code or no code."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1451513719, "post_id": 34537539, "comment_id": 56818343, "body": "What are the range of x, y ? Could you create a matrix of Tile ? Can several Tile may have same position ?"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 5721493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c075a540502333dffdfcce69f0b206a4?s=128&d=identicon&r=PG&f=1", "display_name": "Macta Man", "link": "https://stackoverflow.com/users/5721493/macta-man"}, "edited": false, "score": 0, "creation_date": 1451511440, "post_id": 34537569, "comment_id": 56817314, "body": "That sounds great. I don&#39;t have any experience with vectors so if you could supply me with an example page or explain yourself that would help a lot."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1451511732, "post_id": 34537569, "comment_id": 56817441, "body": "@Even though it sounds great, you don&#39;t even need vectors for this.  An array of Tiles still would work."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1451511784, "post_id": 34537569, "comment_id": 56817458, "body": "@PaulMcKenzie, good point, as the size of the array has to be known at compile time."}, {"owner": {"reputation": 61, "user_id": 5721493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c075a540502333dffdfcce69f0b206a4?s=128&d=identicon&r=PG&f=1", "display_name": "Macta Man", "link": "https://stackoverflow.com/users/5721493/macta-man"}, "edited": false, "score": 0, "creation_date": 1451512464, "post_id": 34537569, "comment_id": 56817786, "body": "@SergeyA is there anyway to make an array index number be negative? This is just so I can have a center point. If not, I can live without it."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 1, "last_activity_date": 1451511793, "last_edit_date": 1451511793, "creation_date": 1451511174, "answer_id": 34537569, "question_id": 34537539, "link": "https://stackoverflow.com/questions/34537539/returning-a-class-object-based-on-two-variables-c/34537569#34537569", "title": "Returning a class object based on two variables C++", "body": "<p>There are multiple ways to achieve this. The easiest seems to be (given the question) is by putting all Tile objects into the array, and returning the one with corresponding index.</p>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 5721493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c075a540502333dffdfcce69f0b206a4?s=128&d=identicon&r=PG&f=1", "display_name": "Macta Man", "link": "https://stackoverflow.com/users/5721493/macta-man"}, "edited": false, "score": 0, "creation_date": 1451511653, "post_id": 34537627, "comment_id": 56817407, "body": "How would I do this? Sorry, I&#39;m pretty new at programming and c++."}, {"owner": {"reputation": 4561, "user_id": 3936440, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Ylq1J.jpg?s=128&g=1", "display_name": "ViRuSTriNiTy", "link": "https://stackoverflow.com/users/3936440/virustrinity"}, "reply_to_user": {"reputation": 61, "user_id": 5721493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c075a540502333dffdfcce69f0b206a4?s=128&d=identicon&r=PG&f=1", "display_name": "Macta Man", "link": "https://stackoverflow.com/users/5721493/macta-man"}, "edited": false, "score": 0, "creation_date": 1451511866, "post_id": 34537627, "comment_id": 56817492, "body": "@CarterCall See my edit, i posted some code, feel free to ask when something is unclear."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1451511870, "post_id": 34537627, "comment_id": 56817494, "body": "What a terrible idea to use a key type as a comparator."}, {"owner": {"reputation": 4561, "user_id": 3936440, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Ylq1J.jpg?s=128&g=1", "display_name": "ViRuSTriNiTy", "link": "https://stackoverflow.com/users/3936440/virustrinity"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1451511917, "post_id": 34537627, "comment_id": 56817519, "body": "@SergeyA because of?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1451512046, "post_id": 34537627, "comment_id": 56817578, "body": "Because a key is a key, and a comparator is a comparator. They have different responsibilities and should not be mixed."}, {"owner": {"reputation": 1113, "user_id": 4092381, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-iUd348W6B_A/AAAAAAAAAAI/AAAAAAAAAjs/0d8MLWyOoFo/photo.jpg?sz=128", "display_name": "Jordan Melo", "link": "https://stackoverflow.com/users/4092381/jordan-melo"}, "edited": false, "score": 2, "creation_date": 1451513013, "post_id": 34537627, "comment_id": 56818034, "body": "@ViRuSTriNiTy It&#39;s not a fact which can be proven. A link isn&#39;t helpful. What SergyA is saying is that the key and the comparator are different concepts. One performs operations on the other. It doesn&#39;t make sense to use one key to compare two completely separate keys. That&#39;s not a model that makes any real-world sense."}, {"owner": {"reputation": 4561, "user_id": 3936440, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Ylq1J.jpg?s=128&g=1", "display_name": "ViRuSTriNiTy", "link": "https://stackoverflow.com/users/3936440/virustrinity"}, "reply_to_user": {"reputation": 1113, "user_id": 4092381, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-iUd348W6B_A/AAAAAAAAAAI/AAAAAAAAAjs/0d8MLWyOoFo/photo.jpg?sz=128", "display_name": "Jordan Melo", "link": "https://stackoverflow.com/users/4092381/jordan-melo"}, "edited": false, "score": 0, "creation_date": 1451513201, "post_id": 34537627, "comment_id": 56818111, "body": "@JordanMelo True but i still doubt that the implementation would be much nicer when seperating these 2 concepts here. My code is based on the following sentence from the std::map docs and i think it&#39;s ok as is: <code>The expression comp(a,b), where comp is an object of this type and a and b are key values, shall return true if a is considered to go before b in the strict weak ordering the function defines.</code>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1451513240, "post_id": 34537627, "comment_id": 56818131, "body": "@ViRuSTriNiTy: It would make more sense to have <code>bool operator &lt;(const CSectorCoordinate&amp;lhs, const CSectorCoordinate&amp; rhs)</code> (that you could implement <code>return std::tie(lhs.mX, lhs.mY) &lt; std::tie(rhs.mX, rhs.mY)</code> btw)"}, {"owner": {"reputation": 1113, "user_id": 4092381, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-iUd348W6B_A/AAAAAAAAAAI/AAAAAAAAAjs/0d8MLWyOoFo/photo.jpg?sz=128", "display_name": "Jordan Melo", "link": "https://stackoverflow.com/users/4092381/jordan-melo"}, "edited": false, "score": 1, "creation_date": 1451513403, "post_id": 34537627, "comment_id": 56818204, "body": "@ViRuSTriNiTy The implementation would be much nicer because it would make logical sense. Just because it works doesn&#39;t mean you should roll with it. Your implementation would not pass a modest code review."}, {"owner": {"reputation": 1113, "user_id": 4092381, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-iUd348W6B_A/AAAAAAAAAAI/AAAAAAAAAjs/0d8MLWyOoFo/photo.jpg?sz=128", "display_name": "Jordan Melo", "link": "https://stackoverflow.com/users/4092381/jordan-melo"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1451513696, "post_id": 34537627, "comment_id": 56818333, "body": "@Jarod42 Yes. Define <code>CSectorCoordinate::operator&lt;</code> and then you don&#39;t even have to specify a comparator in the template parameters of <code>std::map</code>, as the default comparator type is <code>std::less&lt;KeyType&gt;</code>, which will invoke the <code>operator&lt;</code> defined for your key type. Write idiomatic code and things will just work."}, {"owner": {"reputation": 4561, "user_id": 3936440, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Ylq1J.jpg?s=128&g=1", "display_name": "ViRuSTriNiTy", "link": "https://stackoverflow.com/users/3936440/virustrinity"}, "reply_to_user": {"reputation": 1113, "user_id": 4092381, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-iUd348W6B_A/AAAAAAAAAAI/AAAAAAAAAjs/0d8MLWyOoFo/photo.jpg?sz=128", "display_name": "Jordan Melo", "link": "https://stackoverflow.com/users/4092381/jordan-melo"}, "edited": false, "score": 1, "creation_date": 1451515412, "post_id": 34537627, "comment_id": 56819043, "body": "@JordanMelo I found a <a href=\"http://stackoverflow.com/a/183678/3936440\">link</a> that supports the claim of SergeyA but it also states a style guide which is against the <code>operator&lt;</code> approach. Therefore I consider my approach still as valid as it is one of the 3 possible ways to use a class as key. Nonetheless I have to admit that I think using the <code>operator&lt;</code> approach is a bit cleaner."}, {"owner": {"reputation": 1113, "user_id": 4092381, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-iUd348W6B_A/AAAAAAAAAAI/AAAAAAAAAjs/0d8MLWyOoFo/photo.jpg?sz=128", "display_name": "Jordan Melo", "link": "https://stackoverflow.com/users/4092381/jordan-melo"}, "edited": false, "score": 1, "creation_date": 1451516017, "post_id": 34537627, "comment_id": 56819252, "body": "@ViRuSTriNiTy Google&#39;s style guide is purposely restrictive for their own internal political reasons. Google&#39;s style guide does not allow for idiomatic C++ code. You should not, in general, code using Google&#39;s C++ style guide unless you work for Google."}, {"owner": {"reputation": 1113, "user_id": 4092381, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-iUd348W6B_A/AAAAAAAAAAI/AAAAAAAAAjs/0d8MLWyOoFo/photo.jpg?sz=128", "display_name": "Jordan Melo", "link": "https://stackoverflow.com/users/4092381/jordan-melo"}, "edited": false, "score": 1, "creation_date": 1451517189, "post_id": 34537627, "comment_id": 56819628, "body": "@ViRuSTriNiTy I don&#39;t mean to be harsh. The issue is that a code reviewer would be startled. Let me give you a new perspective: You see an <code>operator()</code> defined on a key type. Strange. What does this do? You can&#39;t tell from the class name. You can&#39;t tell by looking at the header file. You go into the implementation file and you find that it does a comparison. But why? Then you poke around the code to see where this class is used and only then do you find that this class is both a key and a comparator. You can see how this is confusing and unclear to those reading your code (reviewers)"}, {"owner": {"reputation": 4561, "user_id": 3936440, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Ylq1J.jpg?s=128&g=1", "display_name": "ViRuSTriNiTy", "link": "https://stackoverflow.com/users/3936440/virustrinity"}, "reply_to_user": {"reputation": 1113, "user_id": 4092381, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-iUd348W6B_A/AAAAAAAAAAI/AAAAAAAAAjs/0d8MLWyOoFo/photo.jpg?sz=128", "display_name": "Jordan Melo", "link": "https://stackoverflow.com/users/4092381/jordan-melo"}, "edited": false, "score": 0, "creation_date": 1451522316, "post_id": 34537627, "comment_id": 56821072, "body": "@JordanMelo Yes, valid reasoning, that&#39;s why I already admitted that <code>operator&lt;</code> is the cleaner solution. Harsh was perhaps the wrong word, I was referring to a StackOverflow user that immediately responds with <code>this is bad</code> because he / she does things in a different way."}], "tags": [], "owner": {"reputation": 4561, "user_id": 3936440, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Ylq1J.jpg?s=128&g=1", "display_name": "ViRuSTriNiTy", "link": "https://stackoverflow.com/users/3936440/virustrinity"}, "is_accepted": false, "score": 0, "last_activity_date": 1451511810, "last_edit_date": 1451511810, "creation_date": 1451511443, "answer_id": 34537627, "question_id": 34537539, "link": "https://stackoverflow.com/questions/34537539/returning-a-class-object-based-on-two-variables-c/34537627#34537627", "title": "Returning a class object based on two variables C++", "body": "<p>Use a map with custom keys providing x and y values. This way you have direct access to the tile without the need to compare each tile with the player position (see <code>getSectorByCoordinate()</code> in the following code taken from a project of mine).</p>\n\n<pre><code>struct CSectorCoordinate\n{\n  private:\n    int mX;\n    int mY;\n\n  public:\n    CSectorCoordinate();\n    CSectorCoordinate(int aX, int aY);\n\n    bool operator() (const CSectorCoordinate &amp; a, const CSectorCoordinate &amp; b) const;\n\n    int getX();\n    int getY();\n};\n\n...\n\nbool CSectorCoordinate::operator() (const CSectorCoordinate &amp; a, const CSectorCoordinate &amp; b) const\n{\n  // note: the following conditions ensure a strict weak ordering (see documentation of std::map)\n  if (a.mX &lt; b.mX)\n    return true;\n\n  if (b.mX &lt; a.mX)\n    return false;\n\n  return a.mY &lt; b.mY;\n}\n\n...\n\ntypedef std::map&lt;CSectorCoordinate, Configuration::CSectorEntity *, CSectorCoordinate&gt; CSectorCoordinateMap;\n\nCSectorCoordinateMap mSectorCoordinateMap;\n\n...\n\nbool CSectorEntityConfigurationBunch::getSectorByCoordinate(int aX, int aY, Configuration::CSectorEntity * &amp; prSector)\n{\n  CSectorCoordinateMap::const_iterator i(mSectorCoordinateMap.find(CSectorCoordinate(aX, aY)));\n\n  if (i != mSectorCoordinateMap.end())\n    prSector = i-&gt;second;\n  else\n    prSector = 0;\n\n  return prSector;\n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 5721493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c075a540502333dffdfcce69f0b206a4?s=128&d=identicon&r=PG&f=1", "display_name": "Macta Man", "link": "https://stackoverflow.com/users/5721493/macta-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 1, "accepted_answer_id": 34537569, "answer_count": 2, "score": 3, "last_activity_date": 1451636409, "creation_date": 1451511045, "last_edit_date": 1451636409, "question_id": 34537539, "link": "https://stackoverflow.com/questions/34537539/returning-a-class-object-based-on-two-variables-c", "title": "Returning a class object based on two variables C++", "body": "<p>I need help with a problem pertaining to classes. I know how to solve it but I am wondering if there is a better solution than my current idea. </p>\n\n<p>Each <strong><code>Class Tile Object</code></strong> and <strong><code>Class Player Object</code></strong> has an <strong>x</strong> and <strong>y</strong> position. I would like to know if there is a way to expedite things. My current idea is <code>if-else</code> statements like this:</p>\n\n<pre><code>if(x==1) {\n    if(y==1) {\n\n       return tileone1;\n\n    } else if(y==2) {  \n\n       return tileone2;\n\n    } else if(y==3) {  \n\n       return tileone3;\n\n    } else if(y==4) {  \n\n       return tileone4;\n\n    } else if(y==5) {  \n\n       return tileone5;\n\n    } //......\n\n} else if(x==2) { \n      if(y==1) {\n\n       return tiletwo1;\n\n    } else if(y==2) {  \n\n       return tiletwo2;\n\n    } else if(y==3) {  \n\n       return tiletwo3;\n\n    } else if(y==4) {  \n\n       return tiletwo4;\n\n    } else if(y==5) {  \n\n       return tiletwo5;\n\n    } //......\n} //......\n</code></pre>\n\n<p>The problem is it would take way too long to write this for every tile.</p>\n\n<p><strong>I need a function that will return a Tile object based on the x and y input of the <code>Object Player</code>. Any other solution would be great as well.</strong></p>\n\n<pre><code>Tile getTileBasedOnCoords(int x, int y){\n\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "pointers", "template-specialization"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1451510545, "post_id": 34537388, "comment_id": 56816926, "body": "No. Even the relaxed rules for template non-type arguments in C++17 still don&#39;t allow pointers to subobjects."}], "answers": [{"tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": true, "score": 2, "last_activity_date": 1451513741, "creation_date": 1451513741, "answer_id": 34538102, "question_id": 34537388, "link": "https://stackoverflow.com/questions/34537388/specialization-of-template-class-with-pointer-template-argument/34538102#34538102", "title": "Specialization of template class with pointer template argument", "body": "<p>It is possible if you are willing to change the template parameters a bit:</p>\n\n<pre><code>struct Base {} b;\nstruct Derived : Base {} d;\nstruct A {} a;\n\ntemplate &lt;class T, T *B,\n          class = std::enable_if_t&lt;std::is_base_of&lt;Base, T&gt;::value&gt;&gt;\nstruct Test {};\n\ntemplate &lt;&gt; struct Test&lt;Base, &amp;b&gt; {};     // OK\ntemplate &lt;&gt; struct Test&lt;Derived, &amp;d&gt; {};  // OK\n\ntemplate &lt;&gt; struct Test&lt;A, &amp;a&gt; {};        // compile error\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1451514674, "post_id": 34538243, "comment_id": 56818757, "body": "the template parameter in his example is a non-type template parameter"}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 0, "last_activity_date": 1451514471, "creation_date": 1451514471, "answer_id": 34538243, "question_id": 34537388, "link": "https://stackoverflow.com/questions/34537388/specialization-of-template-class-with-pointer-template-argument/34538243#34538243", "title": "Specialization of template class with pointer template argument", "body": "<p>You could define the generic template for all types (if relevant) and a partial specialisation for pointer types:   </p>\n\n<pre><code>template &lt;typename T&gt;  \nstruct MyTest {   // generic implementation for all types \n    MyTest() {    // here I make it unrelevant\n        static_assert(is_pointer&lt;T&gt;::value , \"this class must be used with a pointer\");\n    }\n};\n\ntemplate &lt;typename T&gt;\nstruct MyTest&lt;T*&gt; { // partial specialisation for pointer types\n    MyTest() {\n        cout &lt;&lt;\"generic implementation\"&lt;&lt;endl;\n    }\n};\n</code></pre>\n\n<p>You can define more specialisations as needed: </p>\n\n<pre><code>struct Base {}; \nstruct Derived : Base {};\n\ntemplate &lt;&gt;\nstruct MyTest&lt;Base*&gt; {  // specialisation for Base\n    MyTest() {\n        cout &lt;&lt;\"specialized implementation for Base\"&lt;&lt;endl;\n    }\n};\n\ntemplate &lt;&gt;\nstruct MyTest&lt;Derived*&gt; {  // specialisation for Derived\n    MyTest() {\n        cout &lt;&lt;\"specialized implementation for Derived\"&lt;&lt;endl;\n    }\n};\n</code></pre>\n\n<p>And here how you can use it:  </p>\n\n<pre><code>MyTest&lt;Base&gt; mt1;   //&lt;== faills because Base is not a poiner\nMyTest&lt;int*&gt; mt0;   // generic template\nMyTest&lt;Base*&gt; mt2;  // Base specialisation \nMyTest&lt;Derived*&gt; mt3; // derived specialisation \n</code></pre>\n\n<p>Here an <a href=\"http://ideone.com/cRMbZJ\" rel=\"nofollow\">online demo</a>. </p>\n"}], "owner": {"reputation": 1122, "user_id": 1157045, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/7K8WL.png?s=128&g=1", "display_name": "tly", "link": "https://stackoverflow.com/users/1157045/tly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 34538102, "answer_count": 2, "score": 2, "last_activity_date": 1451514471, "creation_date": 1451510302, "last_edit_date": 1451513854, "question_id": 34537388, "link": "https://stackoverflow.com/questions/34537388/specialization-of-template-class-with-pointer-template-argument", "title": "Specialization of template class with pointer template argument", "body": "<p>I would like to specialize a template class for several pointers to different objects. This works as expected for normal pointers:</p>\n\n<pre><code>struct Base{} b;\n\ntemplate&lt;Base* B&gt; struct Test{};\n\ntemplate&lt;&gt; struct Test&lt;&amp;b&gt;{};\n</code></pre>\n\n<p>But not for pointers to <code>Derived</code> objects:</p>\n\n<pre><code>struct Derived : Base{} d;\n\ntemplate&lt;&gt; struct Test&lt;&amp;d&gt;{};\n</code></pre>\n\n<p>the coliru compiler (i think its <code>gcc 5.2</code>) shows the following error:</p>\n\n<pre><code>main.cpp:14:26: error: could not convert template argument '&amp; d' to 'Base*'\n template&lt;&gt; struct Test&lt;&amp;d&gt;{};\n</code></pre>\n\n<p>I dont know, why this is not allowed and would like to know if there is any workaround for the problem...</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/cd9e18068f9497c3\" rel=\"nofollow\">Here</a> is a link to the code in coliru.</p>\n"}, {"tags": ["c++", "vector", "initialization"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1451510108, "post_id": 34537320, "comment_id": 56816730, "body": "What compiler and what options are you using?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1451510159, "post_id": 34537320, "comment_id": 56816752, "body": "You&#39;re implicitly calling the constructor of <code>Temp</code> 10 times by creating a vector of 10 items.  Also, if you really want to track object creation, you need to write a user-defined copy constructor."}, {"owner": {"reputation": 3, "user_id": 4642331, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ehT-kXi8wGg/AAAAAAAAAAI/AAAAAAAAAs8/TdFsC3tc_3k/photo.jpg?sz=128", "display_name": "hmenn", "link": "https://stackoverflow.com/users/4642331/hmenn"}, "edited": false, "score": 0, "creation_date": 1451510225, "post_id": 34537320, "comment_id": 56816777, "body": "I compiled on netbeans 8.1 for windows.I didn&#39;t change any option on compiler. Everythings standart."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1451510233, "post_id": 34537320, "comment_id": 56816785, "body": "<code>int Temp::b=9;</code> Could you make this example more confusing please?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1451510315, "post_id": 34537320, "comment_id": 56816817, "body": "NetBeans is an IDE, not a compiler."}, {"owner": {"reputation": 3, "user_id": 4642331, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ehT-kXi8wGg/AAAAAAAAAAI/AAAAAAAAAs8/TdFsC3tc_3k/photo.jpg?sz=128", "display_name": "hmenn", "link": "https://stackoverflow.com/users/4642331/hmenn"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1451510353, "post_id": 34537320, "comment_id": 56816835, "body": "@PaulMcKenzie I think static b should increase 10 times and final b should be 19."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1451510719, "post_id": 34537320, "comment_id": 56817006, "body": "@HaSaNMen  Creating objects are not only done by default constructor.  You have copy construction, and again, you didn&#39;t write a user-defined copy constructor to discover where those 9 other objects are coming from."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1451511141, "post_id": 34537320, "comment_id": 56817194, "body": "@HaSaNMen See here: <a href=\"http://ideone.com/NuyJeF\" rel=\"nofollow noreferrer\">ideone.com/NuyJeF</a>  and here: <a href=\"http://ideone.com/Fxo619\" rel=\"nofollow noreferrer\">ideone.com/Fxo619</a>  I used a C++ 03 standard compiler to show you what you&#39;re missing in your tests."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4642331, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ehT-kXi8wGg/AAAAAAAAAAI/AAAAAAAAAs8/TdFsC3tc_3k/photo.jpg?sz=128", "display_name": "hmenn", "link": "https://stackoverflow.com/users/4642331/hmenn"}, "edited": false, "score": 0, "creation_date": 1451511108, "post_id": 34537364, "comment_id": 56817180, "body": "You&#39;re right. I add copy constructer and now working fine. I undestand the problem. Thank&#39;s."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 4, "last_activity_date": 1451510184, "creation_date": 1451510184, "answer_id": 34537364, "question_id": 34537320, "link": "https://stackoverflow.com/questions/34537320/initialize-vectortemp-myvector10/34537364#34537364", "title": "Initialize vector&lt;Temp&gt; myVector(10);", "body": "<p>That <code>vector</code> constructor behaves differently in C++03 and C++11 (and later).</p>\n\n<p>In C++03, it inserts 10 copies of a default-constructed <code>Temp</code> object: the default constructor is called once and the copy constructor (which you didn't instrument) is called 10 times.</p>\n\n<p>In C++11, it inserts 10 default-constructed <code>Temp</code> objects.</p>\n"}], "owner": {"reputation": 3, "user_id": 4642331, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ehT-kXi8wGg/AAAAAAAAAAI/AAAAAAAAAs8/TdFsC3tc_3k/photo.jpg?sz=128", "display_name": "hmenn", "link": "https://stackoverflow.com/users/4642331/hmenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 34537364, "answer_count": 1, "score": 0, "last_activity_date": 1451510184, "creation_date": 1451509966, "last_edit_date": 1451510060, "question_id": 34537320, "link": "https://stackoverflow.com/questions/34537320/initialize-vectortemp-myvector10", "title": "Initialize vector&lt;Temp&gt; myVector(10);", "body": "<p>According to Absolute c++ books: </p>\n\n<blockquote>\n<pre><code>vector&lt;AClass&gt; records(20); // vector consctructer uses the\n                             // default constructor for AClass to initialize 20 elements.\n</code></pre>\n</blockquote>\n\n<p>temp.h</p>\n\n<pre><code>#ifndef TEMP_H\n#define TEMP_H\n\nclass Temp {\npublic:\n    Temp();\n    static int b;\n};\n#endif /* TEMP_H */\n</code></pre>\n\n<p>temp.cpp </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"temp.h\"\n\nusing namespace std;\n\nint Temp::b=9; // static value for control \n\nTemp::Temp(){\n    cout&lt;&lt;\"Initialize\";\n    ++b;\n}\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include \"temp.h\"\n\nusing namespace std;\n\nint main(int argc, char** argv) {\n\n    vector&lt;Temp&gt; a(10); // 10 elements\n\n    cout&lt;&lt;Temp::b;\n\n    return 0;\n}\n</code></pre>\n\n<p>And my result's : \n   <code>Initialize10;</code> </p>\n\n<p>As you can see just one times constuctor called. Why its happened? I'm confused. </p>\n"}, {"tags": ["c++", "file", "stream", "scanf"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5732117, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q__BmAzuk98/AAAAAAAAAAI/AAAAAAAAAr4/JpMCMC4xt4s/photo.jpg?sz=128", "display_name": "phil _", "link": "https://stackoverflow.com/users/5732117/phil"}, "edited": false, "score": 0, "creation_date": 1451648787, "post_id": 34537309, "comment_id": 56854374, "body": "this helped me a lot. Thank you!"}, {"owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "reply_to_user": {"reputation": 1, "user_id": 5732117, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q__BmAzuk98/AAAAAAAAAAI/AAAAAAAAAr4/JpMCMC4xt4s/photo.jpg?sz=128", "display_name": "phil _", "link": "https://stackoverflow.com/users/5732117/phil"}, "edited": false, "score": 0, "creation_date": 1451701442, "post_id": 34537309, "comment_id": 56867683, "body": "@phil_ If your question is answered, please mark it answered.  Thanks!"}], "tags": [], "owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "is_accepted": false, "score": 1, "last_activity_date": 1451509919, "creation_date": 1451509919, "answer_id": 34537309, "question_id": 34537241, "link": "https://stackoverflow.com/questions/34537241/using-fscanf-or-equivalent-for-scanning-strings/34537309#34537309", "title": "using fscanf or equivalent for scanning strings", "body": "<p>You want the sscanf() function.</p>\n\n<pre><code>sscanf(sub, \"%d/%d/%d %d/%d/%d %d/%d/%d\\n\", &amp;a, &amp;b, &amp;c, &amp;d, &amp;e, &amp;f, &amp;g, &amp;h, &amp;i);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5732117, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q__BmAzuk98/AAAAAAAAAAI/AAAAAAAAAr4/JpMCMC4xt4s/photo.jpg?sz=128", "display_name": "phil _", "link": "https://stackoverflow.com/users/5732117/phil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1451509919, "creation_date": 1451509552, "question_id": 34537241, "link": "https://stackoverflow.com/questions/34537241/using-fscanf-or-equivalent-for-scanning-strings", "title": "using fscanf or equivalent for scanning strings", "body": "<p>i already have a \"complex\" program, so i want to use following code if possible:</p>\n\n<pre><code>const char* path = filename.c_str();\nFILE * file = fopen(path, \"r\");\nif( file == NULL ) {\n   printf(\"Obj File was not found\");\n   return 0;\n} else {\n   std::ifstream input(path);\n   std::string line;\n   while( std::getline( input, line ) ) {\n      string sub;\n      iss &gt;&gt; sub;\n      // here i read in a lot of lines which are in sub\n   }\n}\n</code></pre>\n\n<p>now i need to seperate a line like this:</p>\n\n<pre><code>f 2/3/1 3/4/1 4/6/1\n</code></pre>\n\n<p>and found fscanf which should work like</p>\n\n<pre><code>fscanf(file, \"%d/%d/%d %d/%d/%d %d/%d/%d\\n\", &amp;a, &amp;b, &amp;c, &amp;d, &amp;e, &amp;f, &amp;g, &amp;h, &amp;i);\n</code></pre>\n\n<p>but \"file\" must be a file. how can i input a string (sub in this case) into fscanf or is there another easy solution to read this line as short as possible. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1451509495, "post_id": 34537198, "comment_id": 56816416, "body": "Aside from whatever problem you&#39;re having <code>Sum += va_arg(Numbers, int);</code> is wrong. You&#39;re reinterpreting a <code>float</code> as <code>int</code> and that&#39;s not going to work at all."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1451510849, "post_id": 34537198, "comment_id": 56817064, "body": "@CaptainObvlious: I think it&#39;s meant to return the average of 10 integers."}], "answers": [{"tags": [], "owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "is_accepted": false, "score": 1, "last_activity_date": 1451509466, "creation_date": 1451509466, "answer_id": 34537214, "question_id": 34537198, "link": "https://stackoverflow.com/questions/34537198/why-does-this-code-print-out-a-4/34537214#34537214", "title": "Why does this code print out a 4?", "body": "<p>Your Sum is an int; when you are returning, you are dividing Sum by Count, which truncates it to the decimal portion, and <em>then</em> converting it to a float to return it.</p>\n\n<p>To get the right answer, you should first convert it to float, then divide and return it: e.g.</p>\n\n<pre><code>return ((float) Sum) / Count;\n</code></pre>\n\n<p>Or, you could declare Sum as a float, and that would get rid of this problem.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1451509579, "creation_date": 1451509579, "answer_id": 34537249, "question_id": 34537198, "link": "https://stackoverflow.com/questions/34537198/why-does-this-code-print-out-a-4/34537249#34537249", "title": "Why does this code print out a 4?", "body": "<p>Your code truncates <code>45/10</code> to <code>4</code> since <code>45/10</code> is an integer division.</p>\n\n<p>If you want to preserve the decimal portion, change the expression slightly to make it a floating point division.</p>\n\n<pre><code>return (1.0*Sum/Count);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5732129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d483e622068b752a084b7cbe5e34489?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Drury", "link": "https://stackoverflow.com/users/5732129/sarah-drury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "closed_date": 1451511153, "answer_count": 2, "score": -5, "last_activity_date": 1451511700, "creation_date": 1451509382, "last_edit_date": 1451511700, "question_id": 34537198, "link": "https://stackoverflow.com/questions/34537198/why-does-this-code-print-out-a-4", "closed_reason": "Not suitable for this site", "title": "Why does this code print out a 4?", "body": "<p>I don't understand why this program uses floats but I get a 4 outputted. \nI thought floats only output decimals. Any help would be appreciated, I have been starring at this code for a while now.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdarg.h&gt;\n\nusing namespace std;\n\nfloat avg( int Count, ... )\n{\n    va_list Numbers;\n    va_start(Numbers, Count);\n\n    int Sum = 0;\n    for (int i = 0; i &lt; Count; ++i)\n        Sum += va_arg(Numbers, int);\n\n    va_end(Numbers);\n    return (Sum/Count);\n}\n\nint main()\n{\n    float Average = avg(10, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9);\n\n    cout &lt;&lt; Average;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "sockets", "tcp", "bytestream"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1451509836, "post_id": 34537163, "comment_id": 56816605, "body": "It looks like this question is ambiguous and that&#39;s leading to conflicting answers. It&#39;s not clear what you want to actually read. Do you want to read all the bytes until the other side closes the connection? Or what?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1451510000, "post_id": 34537163, "comment_id": 56816687, "body": "I believe, the question is perfectly clear, and OP is asking how to generally deal with the case when the size of the transmission is not known beforehand."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1451510189, "post_id": 34537163, "comment_id": 56816766, "body": "Then my answer was precisely correct. You just call <code>read</code> without a loop that waits for some particular number of bytes. (His question was about how to modify low-level receiving code, not how to write high-level protocol code.)"}], "answers": [{"comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 1, "creation_date": 1451509518, "post_id": 34537195, "comment_id": 56816433, "body": "<code>read</code> is not guaranteed to return all the data - only calling it once is not a complete solution."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1451509547, "post_id": 34537195, "comment_id": 56816456, "body": "@user2864740 I don&#39;t know what you mean by &quot;all the data&quot;. All <i>what</i> data?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1451509556, "post_id": 34537195, "comment_id": 56816465, "body": "@David, if it won&#39;t be you, I&#39;d downvote immediately. For you, I&#39;d give you a second chance to explain yourself."}, {"owner": {"reputation": 43, "user_id": 5732119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1714f2f7463b83c30f0f10312660bad9?s=128&d=identicon&r=PG&f=1", "display_name": "J.kol", "link": "https://stackoverflow.com/users/5732119/j-kol"}, "edited": false, "score": 0, "creation_date": 1451509584, "post_id": 34537195, "comment_id": 56816482, "body": "the &quot;read&quot; function does not read all data, I send something like 1gigabits and if I do not put the read inside a while loop it reads only just &quot;few&quot; bytes"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 43, "user_id": 5732119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1714f2f7463b83c30f0f10312660bad9?s=128&d=identicon&r=PG&f=1", "display_name": "J.kol", "link": "https://stackoverflow.com/users/5732119/j-kol"}, "edited": false, "score": 0, "creation_date": 1451509628, "post_id": 34537195, "comment_id": 56816508, "body": "@J.kol That&#39;s what you asked how to do. You asked how to read just a few bytes in a case where you don&#39;t know how many you want. Or did I misunderstand your question?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1451509694, "post_id": 34537195, "comment_id": 56816539, "body": "@David, I believe, you did."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 43, "user_id": 5732119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1714f2f7463b83c30f0f10312660bad9?s=128&d=identicon&r=PG&f=1", "display_name": "J.kol", "link": "https://stackoverflow.com/users/5732119/j-kol"}, "edited": false, "score": 0, "creation_date": 1451509721, "post_id": 34537195, "comment_id": 56816554, "body": "@J.kol All <i>what</i> bytes? All the bytes until the other side closes the connection?"}, {"owner": {"reputation": 43, "user_id": 5732119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1714f2f7463b83c30f0f10312660bad9?s=128&d=identicon&r=PG&f=1", "display_name": "J.kol", "link": "https://stackoverflow.com/users/5732119/j-kol"}, "edited": false, "score": 0, "creation_date": 1451509818, "post_id": 34537195, "comment_id": 56816596, "body": "@DavidSchwartz . All bytes until a specific byte that says &quot;stop&quot;"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 43, "user_id": 5732119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1714f2f7463b83c30f0f10312660bad9?s=128&d=identicon&r=PG&f=1", "display_name": "J.kol", "link": "https://stackoverflow.com/users/5732119/j-kol"}, "edited": false, "score": 0, "creation_date": 1451509871, "post_id": 34537195, "comment_id": 56816628, "body": "@J.kol Then my answer is correct. I added some extra information to help clarify."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 3, "last_activity_date": 1451511747, "last_edit_date": 1451511747, "creation_date": 1451509360, "answer_id": 34537195, "question_id": 34537163, "link": "https://stackoverflow.com/questions/34537163/c-read-unknow-amount-of-data-from-socket/34537195#34537195", "title": "c++ read unknow amount of data from socket", "body": "<p>You asked how to fix your low-level receiving code. That's simple -- just call <code>read</code> once and don't use a <code>while</code> loop. The call to <code>read</code> will return as soon as at least one byte of data can be read. For the number of bytes to read, just pass in the size of your buffer (or the space left in it if there's already some leftover in it from a prior call).</p>\n\n<p>You will also need high-level protocol code, just as you do if you know the number of bytes. That code will probably need to be a bit different. If the chunk of bytes you got includes your stop indication, then process all the bytes up to the stop indication and keep the extra in the buffer for next time. If not, just call <code>read</code> again and get a bunch more bytes.</p>\n\n<p>Your protocol handling code should look sort of like this:</p>\n\n<ol>\n<li>Call <code>read</code> and add however many bytes you got to the buffer. (Handle an error or normal close here.)</li>\n<li>If the data in the buffer does not include the stop indication, go to step 1.</li>\n<li>Process all the bytes up to the stop indication.</li>\n<li>Remove the processed bytes from the buffer, leaving any unprocessed bytes.</li>\n<li>Go to step 2.</li>\n</ol>\n\n<p>Also, the code you gave in the question will spin forever if the other side closes the connection. In this case, <code>read</code> will return zero and you will never be able to read any more data from the connection. You should break out of the loop if <code>read</code> returns zero.</p>\n"}, {"comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1451509690, "post_id": 34537218, "comment_id": 56816537, "body": "This answer doesn&#39;t seem to address the question the OP asked. He asked how to call <code>read</code> when he doesn&#39;t know how many bytes he needs to read."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1451509724, "post_id": 34537218, "comment_id": 56816555, "body": "@David, NO. You misunderstood the question, and now you are dowvoting me for the thing I understood properly."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1451509755, "post_id": 34537218, "comment_id": 56816567, "body": "He asked how to modify his code to handle the case where he doesn&#39;t know how many bytes he wants to read. That is very simple -- just don&#39;t keep looping until you get some particular number of bytes."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 2, "last_activity_date": 1451509477, "creation_date": 1451509477, "answer_id": 34537218, "question_id": 34537163, "link": "https://stackoverflow.com/questions/34537163/c-read-unknow-amount-of-data-from-socket/34537218#34537218", "title": "c++ read unknow amount of data from socket", "body": "<p>First of all, get rid of all <code>bzero</code> calls. I do not know why this keeps creeping into good people's code. There is zero, nada, nicht need for this.</p>\n\n<p>Second of all, you'd need to either somehow communicate the size of transmission beforehand - for example, HTTP 1.1 provides for this information in the header - or simply state that connection is closed once all the data has been transferred - this would be HTTP 1.0 model.</p>\n"}], "owner": {"reputation": 43, "user_id": 5732119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1714f2f7463b83c30f0f10312660bad9?s=128&d=identicon&r=PG&f=1", "display_name": "J.kol", "link": "https://stackoverflow.com/users/5732119/j-kol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2534, "favorite_count": 0, "accepted_answer_id": 34537195, "answer_count": 2, "score": 1, "last_activity_date": 1451511747, "creation_date": 1451509187, "question_id": 34537163, "link": "https://stackoverflow.com/questions/34537163/c-read-unknow-amount-of-data-from-socket", "title": "c++ read unknow amount of data from socket", "body": "<p>I wrote a simple <code>tcp/ip</code> connection <code>client-server</code> in <code>c++</code>.</p>\n\n<p>This is the part of the server that handles the connection</p>\n\n<pre><code>int sockfd, newsockfd;\nsocklen_t clilen;\nstruct sockaddr_in serv_addr, cli_addr;\nint n = 0;\n\nsockfd = socket(AF_INET,SOCK_STREAM,0);\nif(sockfd &lt; 0){\n    cout &lt;&lt; \"Error opening socket\" &lt;&lt; endl;\n    exit(1);\n}\n\nbzero((char*)&amp;serv_addr, sizeof(serv_addr));\n\nserv_addr.sin_family = AF_INET;\nserv_addr.sin_addr.s_addr = INADDR_ANY;\nserv_addr.sin_port = htons(portno);\n\nif(bind(sockfd,(struct sockaddr *) &amp;serv_addr,sizeof(serv_addr))&lt;0){\n    cout &lt;&lt; \"Error binding\" &lt;&lt; endl;\n    exit(1);\n}\n\nlisten(sockfd,1);\nclilen = sizeof(cli_addr);\n\nnewsockfd = accept(sockfd,(struct  sockaddr *)&amp;cli_addr, &amp;clilen );\n\nif(newsockfd &lt; 0){\n    cout &lt;&lt; \"Error accepting\" &lt;&lt; endl;\n    exit(1);\n}\n\nbzero(bytes,size_tot);\nuint64_t total_bytes_read = 0;\nuint64_t total_bytes_to_read = size_tot;\nwhile(total_bytes_read &lt; total_bytes_to_read){\n    int bytes_read = read(newsockfd,bytes + total_bytes_read,total_bytes_to_read - total_bytes_read);\n    if(bytes_read == -1){\n        cout &lt;&lt; \"error reading \"&lt;&lt; endl;\n        n = -1;\n        break;\n    }\n    total_bytes_read += bytes_read;\n}\n</code></pre>\n\n<p>but this works if I know the total amount of bytes to be read. What if the total amount of data to be read is unknown? How I can modify this piece of code?</p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 62852, "user_id": 1737, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9152c282382ec3b1f0cd18dc8ba7a5ab?s=128&d=identicon&r=PG", "display_name": "Roddy", "link": "https://stackoverflow.com/users/1737/roddy"}, "edited": false, "score": 0, "creation_date": 1451511576, "post_id": 34537146, "comment_id": 56817370, "body": "Show a sample of the input that causes the crash, please."}, {"owner": {"reputation": 29, "user_id": 5684174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ffab2c84aa99dc1711f97be4025260?s=128&d=identicon&r=PG&f=1", "display_name": "Mars", "link": "https://stackoverflow.com/users/5684174/mars"}, "reply_to_user": {"reputation": 62852, "user_id": 1737, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9152c282382ec3b1f0cd18dc8ba7a5ab?s=128&d=identicon&r=PG", "display_name": "Roddy", "link": "https://stackoverflow.com/users/1737/roddy"}, "edited": false, "score": 0, "creation_date": 1451533187, "post_id": 34537146, "comment_id": 56823398, "body": "@Roddy This is the error it gives me when I enter &quot;2 4 +&quot;: This application has requested the Runtime to terminate it in an unusual way. Please contact the application&#39;s support team for more information. terminate called after throwing an instance of &#39;std::invalid_argument&#39;   what():  stod"}, {"owner": {"reputation": 29, "user_id": 5684174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ffab2c84aa99dc1711f97be4025260?s=128&d=identicon&r=PG&f=1", "display_name": "Mars", "link": "https://stackoverflow.com/users/5684174/mars"}, "reply_to_user": {"reputation": 62852, "user_id": 1737, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9152c282382ec3b1f0cd18dc8ba7a5ab?s=128&d=identicon&r=PG", "display_name": "Roddy", "link": "https://stackoverflow.com/users/1737/roddy"}, "edited": false, "score": 0, "creation_date": 1451533386, "post_id": 34537146, "comment_id": 56823443, "body": "It should also be noted that I&#39;ve made it so that it tells me when something has been pushed to the stack and what has been pushed to the stack, and it does that just fine with the numbers, but as soon as it hits the operator, it tells me that &quot;&quot; has been pushed to the stack and crashes."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 5684174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ffab2c84aa99dc1711f97be4025260?s=128&d=identicon&r=PG&f=1", "display_name": "Mars", "link": "https://stackoverflow.com/users/5684174/mars"}, "edited": false, "score": 0, "creation_date": 1451536322, "post_id": 34537858, "comment_id": 56824056, "body": "Huh, never would have guessed that was the root of my issue. I&#39;ve got it working now. Now to repeatedly break and fix it again in the process of preparing it for invalid responses, lol. Thanks a bunch for the help."}], "tags": [], "owner": {"reputation": 62852, "user_id": 1737, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9152c282382ec3b1f0cd18dc8ba7a5ab?s=128&d=identicon&r=PG", "display_name": "Roddy", "link": "https://stackoverflow.com/users/1737/roddy"}, "is_accepted": false, "score": 1, "last_activity_date": 1451512568, "creation_date": 1451512568, "answer_id": 34537858, "question_id": 34537146, "link": "https://stackoverflow.com/questions/34537146/math-operators-not-registering-as-input/34537858#34537858", "title": "Math operators not registering as input?", "body": "<p>The problem is not exactly in the string you're passing to <code>stod</code>, but in the array indexing. Look carefully at where you do (and don't) decrement <code>inputTokens</code>.</p>\n"}], "owner": {"reputation": 29, "user_id": 5684174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ffab2c84aa99dc1711f97be4025260?s=128&d=identicon&r=PG&f=1", "display_name": "Mars", "link": "https://stackoverflow.com/users/5684174/mars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1451514269, "creation_date": 1451509108, "last_edit_date": 1451514269, "question_id": 34537146, "link": "https://stackoverflow.com/questions/34537146/math-operators-not-registering-as-input", "title": "Math operators not registering as input?", "body": "<p>I'm currently writing my first RPN calculator in C++, and I've encountered a serious dilemma. When the program encounters a mathematical operator as input from the user, it can't seem to understand what it's looking at, and takes it as something that could be converted into a number; I know that this is the largest part of the issue because the runtime error I'm getting tells me that the string in question can't be converted to a decimal via stod.</p>\n\n<p>I've tried using <code>isdigit()</code> on the first character in the string (i.e. the only one, <code>string.at(0)</code>) to no avail; it still returns true and the computer tries to turn the string into a decimal, causing a crash.\nI'll post the function where calculation is taking place, the method I'm using to truncate the user's input into a vector of strings, and the method I'm using to check if the string in question can be converted to a double using stod below:</p>\n\n<p>CALCULATION:</p>\n\n<pre><code>double calculate(string inputTemp)\n{\n    double result;\n\n    //Truncate input into a digestible format via the truncation method\n    vector&lt;string&gt; input = truncate(inputTemp);\n    int inputTokens = input.size();\n    stack&lt;double&gt; stk;\n    double num1;\n    double num2;\n    int i = 0;\n\n    while(inputTokens &gt; 1)\n    {\n        if(isNum(input[i]))\n        {\n            cout &lt;&lt; input[i] &lt;&lt; \" pushed to stack\" &lt;&lt; endl;\n            stk.push(stod(input[i]));\n            i++;\n        }\n        else\n        {\n            switch(input[i].at(0))\n            {\n                case '+':\n                    num2 = stk.top();\n                    stk.pop();\n                    num1 = stk.top();\n                    stk.pop();\n                    stk.push(num1 + num2);\n                    inputTokens--;\n                    i++;\n                    break;\n                case '-':\n                    num2 = stk.top();\n                    stk.pop();\n                    num1 = stk.top();\n                    stk.pop();\n                    stk.push(num1 - num2);\n                    inputTokens--;\n                    i++;\n                    break;\n                case '*': case 'x': case 'X':\n                    num2 = stk.top();\n                    stk.pop();\n                    num1 = stk.top();\n                    stk.pop();\n                    stk.push(num1 * num2);\n                    inputTokens--;\n                    i++;\n                    break;\n                case '/':\n                    num2 = stk.top();\n                    stk.pop();\n                    num1 = stk.top();\n                    stk.pop();\n                    stk.push(num1 / num2);\n                    inputTokens--;\n                    i++;\n                    break;\n                case '^':\n                    num2 = stk.top();\n                    stk.pop();\n                    num1 = stk.top();\n                    stk.pop();\n                    stk.push(pow(num1, num2));\n                    inputTokens--;\n                    i++;\n                    break;\n                default: \n                    cout &lt;&lt; \"ERROR: invalid operator entered\" &lt;&lt; endl;\n                    i++;\n                    break;\n            }\n        }\n    }\n\n    result = stk.top();\n    return result;\n}\n</code></pre>\n\n<p>TRUNCATING STRINGS:</p>\n\n<pre><code>vector&lt;string&gt; truncate(string input)\n{\n    vector&lt;string&gt; output(input.length());\n\n    for(int i = 0, j = 0; i &lt; input.length(); i++)\n    {\n        char c = input.at(i);\n\n        switch(c)\n        {\n            case ' ': j++; break;\n            default: output[j] += c; break;\n        }\n    }\n\n    while(output.back() == \"\")\n    {\n        output.pop_back();\n    }\n\n    return output;\n}\n</code></pre>\n\n<p>CHECK IF NUMBER (Wrote this instead of using <code>isdigit</code> so that users could enter decimals and users couldn't enter something like 3AJ)</p>\n\n<pre><code>bool isNum(string input)\n{\n    int numDecimals = 0;\n    int nonNumChars = 0;\n\n    for(int i = 0; i &lt; input.length(); i++)\n    {\n        char c = input.at(i);\n\n        if(!isdigit(c))\n        {\n            switch(c)\n            {\n                case '.': numDecimals++; break;\n                default: nonNumChars++; break;\n            }\n        }\n    }\n\n    if(numDecimals &lt; 2 &amp;&amp; nonNumChars == 0)\n    {\n        return true;\n    }\n    else\n    {\n        return false;\n    }\n}\n</code></pre>\n\n<p>I apologize for the lengthiness of this post, just wanted to give as much info up front as possible. I'm stumped. Please refrain from posting actual code in place of regular advice and pointing out what I'm doing wrong if you can help it, I like to avoid copying other peoples' code when possible. There's less fun and learning stretch if you copy.</p>\n"}, {"tags": ["c++", "int", "long-long"], "comments": [{"owner": {"reputation": 30265, "user_id": 3246555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziIu9.png?s=128&g=1", "display_name": "AlexD", "link": "https://stackoverflow.com/users/3246555/alexd"}, "edited": false, "score": 4, "creation_date": 1451508290, "post_id": 34536961, "comment_id": 56815830, "body": "<code>pow</code> returns <code>double</code>, you cannot apply <code>%</code> to <code>long long</code> and <code>double</code>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1451508340, "post_id": 34536961, "comment_id": 56815853, "body": "You need to read the <i>whole</i> error message, not just half of it."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1451508369, "post_id": 34536961, "comment_id": 56815867, "body": "(pow also exists for float and long double, but yes, no integer return type)"}, {"owner": {"reputation": 37, "user_id": 3894819, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/a55eff83b4772413eb84b8cb081c5630?s=128&d=identicon&r=PG&f=1", "display_name": "user3894819", "link": "https://stackoverflow.com/users/3894819/user3894819"}, "edited": false, "score": 0, "creation_date": 1451508449, "post_id": 34536961, "comment_id": 56815901, "body": "The problema is that I need to get every digit of a number of 12 digits. That is why I use the long long. Do you know another method to do it?"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1451508487, "post_id": 34536961, "comment_id": 56815919, "body": "@user3894819 As said already by multiple people, the problem is not <code>long long</code>, but <code>double</code> (<code>pow</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1451508805, "post_id": 34537025, "comment_id": 56816073, "body": "Actually, I think your clearer line is less clear than your better line -- extra redundant parenthesis generally make things harder to read IMO."}, {"owner": {"reputation": 30265, "user_id": 3246555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziIu9.png?s=128&g=1", "display_name": "AlexD", "link": "https://stackoverflow.com/users/3246555/alexd"}, "edited": false, "score": 2, "creation_date": 1451509107, "post_id": 34537025, "comment_id": 56816222, "body": "It is a bad idea, since you can easily get unexpected result due to cutting of the floating part. <code>(int)9.9999</code> is <code>9</code>, not <code>10</code>. In general, as <b>@Mats</b> said, do not use <code>pow</code> in such scenarios."}], "tags": [], "owner": {"reputation": 413, "user_id": 5683109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62c83659808b54d9596183ee00c4eb9b?s=128&d=identicon&r=PG&f=1", "display_name": "I3ck", "link": "https://stackoverflow.com/users/5683109/i3ck"}, "is_accepted": false, "score": 0, "last_activity_date": 1451508502, "creation_date": 1451508502, "answer_id": 34537025, "question_id": 34536961, "link": "https://stackoverflow.com/questions/34536961/invalid-operand-of-types-long-long-int-to-binary-operator/34537025#34537025", "title": "Invalid operand of types &#39;long long int&#39; to binary &#39;operator%&#39;", "body": "<p>you have to cast to int first<br>\n<code>suma_senars = suma_senars + num % (int)pow(10,j);</code><br>\nbetter:\n<code>suma_senars += num % (int)pow(10,j);</code><br>\nclearer:\n<code>suma_senars += num % ( (int)pow(10,j) );</code> </p>\n"}, {"tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 1, "last_activity_date": 1451508985, "creation_date": 1451508985, "answer_id": 34537123, "question_id": 34536961, "link": "https://stackoverflow.com/questions/34536961/invalid-operand-of-types-long-long-int-to-binary-operator/34537123#34537123", "title": "Invalid operand of types &#39;long long int&#39; to binary &#39;operator%&#39;", "body": "<p>Don't use <code>pow</code> for this sort of thing. </p>\n\n<pre><code>long long pow_ten = 10;\nfor(int j=1; j&lt;12; j=j+2)\n{\n   suma_senars=suma_senars+num%pow_ten;\n   pow_ten *= 100;\n}\n</code></pre>\n\n<p>Not only will this be faster, it will also calculate correctly, rather than <code>pow</code> which may well use something like <code>exp(log(x) * y)</code> to calculate <code>x ** y</code> - and thus not always come up with precisely the number you wanted - particularly if you cast it back to integer.</p>\n"}], "owner": {"reputation": 37, "user_id": 3894819, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/a55eff83b4772413eb84b8cb081c5630?s=128&d=identicon&r=PG&f=1", "display_name": "user3894819", "link": "https://stackoverflow.com/users/3894819/user3894819"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1562, "favorite_count": 0, "accepted_answer_id": 34537123, "answer_count": 2, "score": 0, "last_activity_date": 1451508985, "creation_date": 1451508189, "question_id": 34536961, "link": "https://stackoverflow.com/questions/34536961/invalid-operand-of-types-long-long-int-to-binary-operator", "title": "Invalid operand of types &#39;long long int&#39; to binary &#39;operator%&#39;", "body": "<p>i am in C++ and I get this error:</p>\n\n<pre><code>bool comprovarCodi(long long num, int DC){\nbool codi_correcte;\nint i=0, suma_senars=0, suma_parells=0, suma_total=0, desena_superior, DC_calculat, cont=0;\nwhile(num!=0){\n    num=num/10;\n    cont++;\n    i++;    \n}\nif(cont==12){\n    for(int j=1; j&lt;12; j=j+2){\n        suma_senars=suma_senars+num%pow(10,j);\n</code></pre>\n\n<p>I don't know why, I believe \"num\" is an integer so I can use the operator \"%\".</p>\n\n<p>Somebody knows why it fails?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "oop", "abstraction"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 1, "creation_date": 1451508266, "post_id": 34536928, "comment_id": 56815817, "body": "You can store the return value of <code>create_new_mouth()</code> and create a wapper for that, as for the other functions just making them helper functions would be a good approach ( perhaps making them static in the same wrapper class)"}, {"owner": {"reputation": 169, "user_id": 5357235, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/40143abf6904787af3e9d22ea5c757bd?s=128&d=identicon&r=PG&f=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/5357235/jon"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1451508561, "post_id": 34536928, "comment_id": 56815954, "body": "@JameyD can you please elaborate a bit more on what you mean by creating a wrapper for create_new_mouth()?"}], "answers": [{"tags": [], "owner": {"reputation": 413, "user_id": 5683109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62c83659808b54d9596183ee00c4eb9b?s=128&d=identicon&r=PG&f=1", "display_name": "I3ck", "link": "https://stackoverflow.com/users/5683109/i3ck"}, "is_accepted": false, "score": 0, "last_activity_date": 1451508295, "creation_date": 1451508295, "answer_id": 34536986, "question_id": 34536928, "link": "https://stackoverflow.com/questions/34536928/separating-helper-functions-into-a-separate-c-header-source-file/34536986#34536986", "title": "Separating helper functions into a separate C++ header/source file", "body": "<p>Create both the .cpp and .h file and make sure to wrap everything in a <code>namespace</code>.<br>\nYou may also consider defining a static class as helper which has these functions as methods</p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1451508582, "creation_date": 1451508582, "answer_id": 34537036, "question_id": 34536928, "link": "https://stackoverflow.com/questions/34536928/separating-helper-functions-into-a-separate-c-header-source-file/34537036#34537036", "title": "Separating helper functions into a separate C++ header/source file", "body": "<blockquote>\n  <p>But since mouth.cpp won't have a class, and will just contain my helper functions, is this legal or even good practice to do? </p>\n</blockquote>\n\n<p>You can put every function and/or global object into separate .cpp file. That still would be \"legal\" but most probably unpractical. Good practice is a matter of taste so it is subjective. You probably should put that functions to separate namespace or class or both, but even if you would not do that for small or medium project it could be perfectly fine.</p>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1451509117, "post_id": 34537064, "comment_id": 56816228, "body": "Even better if you delete copy-constructor and assignment to respect rule of 3."}], "tags": [], "owner": {"reputation": 4569, "user_id": 1282773, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GFxGD.jpg?s=128&g=1", "display_name": "ivaigult", "link": "https://stackoverflow.com/users/1282773/ivaigult"}, "is_accepted": false, "score": 2, "last_activity_date": 1451509474, "last_edit_date": 1451509474, "creation_date": 1451508726, "answer_id": 34537064, "question_id": 34536928, "link": "https://stackoverflow.com/questions/34536928/separating-helper-functions-into-a-separate-c-header-source-file/34537064#34537064", "title": "Separating helper functions into a separate C++ header/source file", "body": "<p>Having only functions in header/cpp files is totally Ok for C++. But, IMO, it would be more elegant to use a simple class for library initialization and de-initialization.</p>\n\n<pre><code>struct MouthLibHolder\n{\n    MouthLibHolder(const MouthLibHolder&amp;) = delete;\n    MouthLibHolder&amp; operator=(const MouthLibHolder&amp;) = delete;\n\n    MouthLibHolder() \n    { \n        if (!mouth_init())\n            throw std::runtime_error(\"Failed to init Mouth library\");\n    }\n    ~MouthLibHolder()\n    {\n        clean_up_mouth();\n    }\n};\n</code></pre>\n\n<p>Then you may use this code in your main function like:</p>\n\n<pre><code>main() \n{\n    try {\n        MouthLibHolder mouthLib;\n        ...\n    }\n    ...\n}\n</code></pre>\n\n<p>The holder might be implemented in separate h/cpp files.</p>\n"}, {"tags": [], "owner": {"reputation": 878, "user_id": 4247443, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sfQeY.jpg?s=128&g=1", "display_name": "Pustovalov Dmitry", "link": "https://stackoverflow.com/users/4247443/pustovalov-dmitry"}, "is_accepted": false, "score": 0, "last_activity_date": 1451508803, "creation_date": 1451508803, "answer_id": 34537078, "question_id": 34536928, "link": "https://stackoverflow.com/questions/34536928/separating-helper-functions-into-a-separate-c-header-source-file/34537078#34537078", "title": "Separating helper functions into a separate C++ header/source file", "body": "<p>Yes, it is legal and good practice also. Write helper functions declarations in header file and their definitions in source file.</p>\n"}], "owner": {"reputation": 169, "user_id": 5357235, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/40143abf6904787af3e9d22ea5c757bd?s=128&d=identicon&r=PG&f=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/5357235/jon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1347, "favorite_count": 1, "answer_count": 4, "score": 2, "last_activity_date": 1451509474, "creation_date": 1451508009, "last_edit_date": 1451508488, "question_id": 34536928, "link": "https://stackoverflow.com/questions/34536928/separating-helper-functions-into-a-separate-c-header-source-file", "title": "Separating helper functions into a separate C++ header/source file", "body": "<p>So in my current project, I have main.cpp, fruit.h, and fruit.cpp.</p>\n\n<p>In main.cpp, it current looks like this:</p>\n\n<pre><code>#include \"fruit.h\"\n#include &lt;Mouth.h&gt;\n\nint main() {\n  Fruit orange;\n  orange.wash(); //wash is a method of the Fruit class\n\n  Mouth mouth = NULL; //Mouth is a library I am using\n  if(mouth_init() != 0) {\n    return 1;\n  }\n\n  mouth = create_new_mouth();\n\n  if (mouth == NULL) {\n    return 1;\n  }\n\n  mouth_eat(orange);\n\n  clean_up_mouth();\n  mouth = NULL;\n}\n</code></pre>\n\n<p>Obviously this is an overly simplified example, as my actual library init and exit functions are more complex. But I was thinking of taking out the initialization and clean up code from main, and create helper functions. Now I could place these helper functions within main.cpp, but I was thinking of creating a new C++ file called mouth.cpp, and putting the functions in there. But since mouth.cpp won't have a class, and will just contain my helper functions, is this legal or even good practice to do? If it is allowed, should I create a mouth.h file containing the function declarations as well?</p>\n"}, {"tags": ["c++", "firemonkey", "c++builder-xe8", "tgrid"], "owner": {"reputation": 2790, "user_id": 3298987, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Xxzcp.png?s=128&g=1", "display_name": "James Hogle", "link": "https://stackoverflow.com/users/3298987/james-hogle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1451507646, "creation_date": 1451507646, "question_id": 34536847, "link": "https://stackoverflow.com/questions/34536847/firemonkey-tgrid-formatting-dates", "title": "Firemonkey TGrid formatting dates", "body": "<p>I have a firemonkey <code>TGrid</code> control that seems to be detecting that the text inside of a cell is a datetime, and then applying its own formatting to the cell.  For example, I have three strings that are generated and put into a row on the grid.</p>\n\n<pre><code>FSch_Text  = StdDate( FOrd_Evt-&gt;SCH_DATE ) + \" PM\";\nFGive_Text = StdDate( FOrd_Evt-&gt;GIVE_DATE)  + \" PM\";\nFPost_Text = StdDate( FOrd_Evt-&gt;POST_DATE ) + \" \" + StdTime( FOrd_Evt-&gt;POST_TIME );\n</code></pre>\n\n<p>When these strings are placed into cells on the grid, one would expect the results would look something like this:</p>\n\n<p><code>12/30/2015 PM | 12/30/2015 PM | 12/30/2015 1:00PM</code></p>\n\n<p>However, the actual results I get are:</p>\n\n<p><code>PM 12/30/2015 | PM 12/30/2015 |  1:00PM 12/30/2015</code></p>\n\n<p>(note that in the third string, date comes first when the string is made, however the time comes first once its in the grid cell)</p>\n\n<p>I deduced that the grid was detecting dates and applying its own formatting by modifying the creation of my strings like so:</p>\n\n<pre><code>FSch_Text  = \"Foo \" + StdDate( FOrd_Evt-&gt;SCH_DATE ) + \" PM\";\nFGive_Text = \"Bar \" + StdDate( FOrd_Evt-&gt;GIVE_DATE)  + \" PM\";\nFPost_Text = \"Foobar \" + StdDate( FOrd_Evt-&gt;POST_DATE ) + \" \" + StdTime( FOrd_Evt-&gt;POST_TIME );\n</code></pre>\n\n<p>After doing this, the strings show up in their cells just like how one would expect:</p>\n\n<p><code>Foo 12/30/2015 PM | Bar 12/30/2015 PM | Foobar 12/30/2015 1:00PM</code></p>\n\n<p>Therefore, it looks like the <code>TGrid</code> control is automatically applying a date format where time comes first, followed by the date.</p>\n\n<p>I looked through the list of properties / options for the <code>TGrid</code> control, and could find nothing about setting the format of dates.  </p>\n\n<p>Is what I am seeing documented behaviour that I have missed somehow?  How can I control the format of a date inside of a cell?</p>\n"}, {"tags": ["c++", "c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 6, "creation_date": 1451507556, "post_id": 34536797, "comment_id": 56815401, "body": "&quot;&quot;my_array&quot; is effectively a char pointer&quot; this is incorrect"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1451507592, "post_id": 34536797, "comment_id": 56815420, "body": "What do you get if you compiler C code with a Java compiler? Please read the C-tag info page. C and C++ are different languages. A simple search for &quot;C C++ differences&quot; will answer your question. And there is a good reason an array is called &quot;array&quot; and not &quot;pointer&quot; (and vice-versa)."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1451507627, "post_id": 34536797, "comment_id": 56815439, "body": "@Slava Well, that depends on the context since it can decay to a <code>char*</code> but it can also just be a <code>char[5]</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 4, "creation_date": 1451507657, "post_id": 34536797, "comment_id": 56815470, "body": "@cad: Yes, it <b>decays</b> (i.e. is automatically converto to a point er to ist first element). But is <b>is</b> not the same as a pointer."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1451507827, "post_id": 34536797, "comment_id": 56815568, "body": "@cad literal <code>0</code> can decay to <code>nullptr</code> but you cannot say 0 is effectively a <code>nullptr</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1451507829, "post_id": 34536797, "comment_id": 56815571, "body": "And casting a function pointer to/from an object pointer is undefined behaviour in C."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1451507948, "post_id": 34536797, "comment_id": 56815656, "body": "@Slava: IIRC, it is some C legacy that C++ also treats <code>0</code> assigned to a pointer as a <i>null pointer constant</i>. C++11 added the <code>nullptr</code> keyword to get eventually (within the next 2-3 decades:-( rid of this nonsense. I wish C11 had followed that."}, {"owner": {"reputation": 1147, "user_id": 3137789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b65ef8041f0b9d2a25d50ba550cb9fe9?s=128&d=identicon&r=PG&f=1", "display_name": "MyUsername112358", "link": "https://stackoverflow.com/users/3137789/myusername112358"}, "edited": false, "score": 0, "creation_date": 1451508033, "post_id": 34536797, "comment_id": 56815695, "body": "So in my code when it compiles in c, but not in c++, it&#39;s because c++ flat out says I can&#39;t do that, while c just didn&#39;t define the behavior of my code? Also, why would I have to put a &quot;&amp;&quot; operator to convert my_array from char[5] to function pointer?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1451508113, "post_id": 34536797, "comment_id": 56815736, "body": "The need to use a cast should be a clear indicator you did something wrong. Do not use a cast unless you <b>fully</b> understand all implications! There is a reason your compiler warns about type missmatches. And enable warnings; your C compiler should complain, too."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1451508480, "post_id": 34536797, "comment_id": 56815915, "body": "And just because your code compiles does not mean it is correct. Please informs us if you found a tool/language which can proof that for every non-trivial program and terminates properly within - say - some months (preferably less)."}], "answers": [{"comments": [{"owner": {"reputation": 1147, "user_id": 3137789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b65ef8041f0b9d2a25d50ba550cb9fe9?s=128&d=identicon&r=PG&f=1", "display_name": "MyUsername112358", "link": "https://stackoverflow.com/users/3137789/myusername112358"}, "edited": false, "score": 0, "creation_date": 1451508154, "post_id": 34536887, "comment_id": 56815760, "body": "That answers most of it, but I still don&#39;t understand why &quot;pFunc pFunc2 = (pFunc)my_array;&quot; would not work?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1147, "user_id": 3137789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b65ef8041f0b9d2a25d50ba550cb9fe9?s=128&d=identicon&r=PG&f=1", "display_name": "MyUsername112358", "link": "https://stackoverflow.com/users/3137789/myusername112358"}, "edited": false, "score": 0, "creation_date": 1451508312, "post_id": 34536887, "comment_id": 56815840, "body": "@MyUsername112358: As I already commented on your question: Think about the meaning of the word &quot;undefined&quot;, as in <i>undefined behaviour</i>."}, {"owner": {"reputation": 1147, "user_id": 3137789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b65ef8041f0b9d2a25d50ba550cb9fe9?s=128&d=identicon&r=PG&f=1", "display_name": "MyUsername112358", "link": "https://stackoverflow.com/users/3137789/myusername112358"}, "edited": false, "score": 0, "creation_date": 1451508560, "post_id": 34536887, "comment_id": 56815953, "body": "I thought the undefined behavior was casting &amp;my_array to char*? What I don&#39;t understand is why is &quot;char* b = &amp;my_array;&quot; undefined behavior, yet the only way I can cast my_array to function pointer is by using &amp;my_array that way: &quot;pFunc pFunc1 = (pFunc)&amp;my_array;&quot;, and yet this doesn&#39;t work: pFunc pFunc2 = (pFunc)my_array;."}, {"owner": {"reputation": 2629, "user_id": 1051292, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/89cce8b59e351225f874e8d24c9215f4?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1051292/kevin"}, "reply_to_user": {"reputation": 1147, "user_id": 3137789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b65ef8041f0b9d2a25d50ba550cb9fe9?s=128&d=identicon&r=PG&f=1", "display_name": "MyUsername112358", "link": "https://stackoverflow.com/users/3137789/myusername112358"}, "edited": false, "score": 0, "creation_date": 1451509367, "post_id": 34536887, "comment_id": 56816338, "body": "@MyUsername112358 Have you ever thought for a second about what you were trying to do? &quot;only way I can cast my_array to function pointer&quot;, I mean, what? Why would you ever want to cast a char array to a function pointer? I can not imagine <b>any</b> use case for that..."}, {"owner": {"reputation": 1147, "user_id": 3137789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b65ef8041f0b9d2a25d50ba550cb9fe9?s=128&d=identicon&r=PG&f=1", "display_name": "MyUsername112358", "link": "https://stackoverflow.com/users/3137789/myusername112358"}, "edited": false, "score": 0, "creation_date": 1451509559, "post_id": 34536887, "comment_id": 56816469, "body": "So that I can execute those arrays at runtime, as I said in my original post... I&#39;m injecting code in a running executable, I replace 5 bytes of the executable by a jump to my own function in the code I injected. I store those 5 bytes in a char array. My function do it&#39;s thing, then executes the 5 bytes at the end before returning to the executable. That way I can execute my function without modifying in any way the targeted executable. Not sure why you thought that was relevant to ask, but here you go."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 1, "last_activity_date": 1451508986, "last_edit_date": 1451508986, "creation_date": 1451507800, "answer_id": 34536887, "question_id": 34536797, "link": "https://stackoverflow.com/questions/34536797/questions-about-address-of-operator-and-arrays-in-c-and-c/34536887#34536887", "title": "Questions about &quot;Address-of operator&quot; (&amp;) and arrays in c and c++", "body": "<p>When an array is defined then space is allocated for its element in memory. The whole space, in your case <code>5</code> bytes, is allocated for array. Therefore, space is allocated for arrays elements as well as array itself.  </p>\n\n<p>It should be noted that an array is not a pointer and vice-versa. <code>my_array</code> is an array and not a pointer. In most cases an array convert to a pointer to its first element, but it does not imply that arrays are pointers.</p>\n\n<p>The address of array <code>my_array</code> is of type <code>char (*)[5]</code>, a pointer to an array of 5 <code>char</code>s. It is incompatible with type <code>char **</code> and <code>pFunct</code>. Assigning incompatible pointer types causes error.</p>\n"}, {"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1451509993, "post_id": 34537199, "comment_id": 56816683, "body": "&quot;because C allows implicit conversion between unrelated pointer types&quot; - it doesn&#39;t. It&#39;s a constraint violation that requires a diagnostic. GCC just happens to issue a warning rather than an error."}, {"owner": {"reputation": 5541, "user_id": 4367864, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mIepQ.png?s=128&g=1", "display_name": "PC Luddite", "link": "https://stackoverflow.com/users/4367864/pc-luddite"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1451510318, "post_id": 34537199, "comment_id": 56816820, "body": "@T.C. It requires a diagnostic, but GCC is still &quot;allowed&quot; to let the code compile."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 5541, "user_id": 4367864, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mIepQ.png?s=128&g=1", "display_name": "PC Luddite", "link": "https://stackoverflow.com/users/4367864/pc-luddite"}, "edited": false, "score": 0, "creation_date": 1451510367, "post_id": 34537199, "comment_id": 56816844, "body": "@PCLuddite By that logic, C &quot;allows&quot; everything under the sun."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1451510487, "post_id": 34537199, "comment_id": 56816902, "body": "Updated to mention that a warning is required to be emitted in C."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1451511293, "post_id": 34537199, "comment_id": 56817265, "body": "Best answer so far. However, on the function pointers, you are a bit incorrect: Casts to/from function pointers from/to other types are not guaranteed to work in any way, since a function pointer can be a fundamentally different beast than a data pointer. I remember that on PPC Macs, a function pointer actually consisted of <i>two</i> pointers, one to point to the global data table (TOC), the other to point to the code. You cannot cast a <code>char*</code> to such a function pointer. I guess, <code>gcc</code> allows that because the linux people need and use it (take a look at libdl)."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1451512384, "post_id": 34537199, "comment_id": 56817744, "body": "Yes, GCC and MSVC both allow such conversions, but I edited to note that it is not required to work."}, {"owner": {"reputation": 1147, "user_id": 3137789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b65ef8041f0b9d2a25d50ba550cb9fe9?s=128&d=identicon&r=PG&f=1", "display_name": "MyUsername112358", "link": "https://stackoverflow.com/users/3137789/myusername112358"}, "edited": false, "score": 0, "creation_date": 1451512836, "post_id": 34537199, "comment_id": 56817953, "body": "&quot;but either way the result is unlikely to be anything useful.&quot;. In my case I have to execute variable bytes at runtime, I&#39;m not sure how I could do that any other way?"}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1451513438, "post_id": 34537199, "comment_id": 56818218, "body": "If you&#39;re trying to attack some sort of code injection vulnerability then you&#39;ve moved out of the realm of &quot;how does C++ work?&quot; and into the realm of &quot;how does this particular implementation happen to implement the constructs required by C++?&quot;.  Unless this is to learn about application security, I can&#39;t think of any legitimate reason to create a something like that."}, {"owner": {"reputation": 1147, "user_id": 3137789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b65ef8041f0b9d2a25d50ba550cb9fe9?s=128&d=identicon&r=PG&f=1", "display_name": "MyUsername112358", "link": "https://stackoverflow.com/users/3137789/myusername112358"}, "edited": false, "score": 0, "creation_date": 1451514266, "post_id": 34537199, "comment_id": 56818598, "body": "I&#39;m adding capabilities to a specific program I don&#39;t have the source code of (not for commercial use, just for me). I inject my code in it at runtime, replace 5 bytes (which I save in a char array) by a jump to my own function, my function does it&#39;s thing (mainly intercept some data and do stuff) then at the end of my function I simply execute the 5 bytes previously saved. That way, the program works exactly as if I didn&#39;t modify anything."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1451518538, "post_id": 34537199, "comment_id": 56820102, "body": "This is still not right. Neither the C nor the C++ standard distinguishes between &quot;warnings&quot; and &quot;errors&quot;. The requirement is simply &quot;a diagnostic&quot;, which can be anything the implementation says is one, including, say, the character <code>a</code>. It&#39;s up to the implementation to decide which problems result in errors and which in warnings (the one exception: in C, a source file containing an unskipped <code>#error</code> directive must not be successfully translated)."}], "tags": [], "owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "is_accepted": true, "score": 4, "last_activity_date": 1451511939, "last_edit_date": 1451511939, "creation_date": 1451509389, "answer_id": 34537199, "question_id": 34536797, "link": "https://stackoverflow.com/questions/34536797/questions-about-address-of-operator-and-arrays-in-c-and-c/34537199#34537199", "title": "Questions about &quot;Address-of operator&quot; (&amp;) and arrays in c and c++", "body": "<p>An array in C++ is not a pointer.  When a pointer of the appropriate type is initialized using the array's name (such as when the array is passed to a function argument of the appropriate pointer type), it will decay into a pointer, but it is not itself a pointer.</p>\n\n<p>When you declare <code>char my_array[5]</code>, you are creating an array of 5 <code>char</code>s; no pointer is created, but a <code>char[5]</code> exists and can be pointed to by other pointers.</p>\n\n<p>If you do <code>char* a = my_array;</code>, <code>my_array</code> will decay into a pointer; a new <code>char*</code> is created pointing to the first element of <code>my_array</code>.<br>\n<code>char* b = &amp;my_array;</code> fails because <code>my_array</code> isn't a <code>char</code>, and thus <code>&amp;my_array</code> isn't a <code>char*</code>.  <code>char** d = &amp;my_array;</code> fails since <code>my_array</code> isn't a <code>char*</code>, and thus <code>&amp;my_array</code> isn't a <code>char**</code>.  <code>&amp;my_array</code> is a <code>char (*)[5]</code> (pointer to an array of 5 <code>char</code>s).  These \"work\" in C because C only requires the compiler issue a warning for implicit conversion between unrelated pointer types, but C++ does not allow these implicit conversions at all; they result in a compilation error.  You need an explicit cast in C++, but even then the behavior is undefined if you dereference the resulting pointer.</p>\n\n<p>Finally, <code>pFunc pFunc1 = (pFunc)&amp;my_array;</code> \"works\" on platforms that represent function pointers and object pointers similarly (most modern systems), but it isn't required to work on all platforms.  Again, using the resulting pointer will invoke undefined behavior.<br>\n<code>pFunc pFunc2 = (pFunc)my_array;</code> actually compiles as well using GCC, but fails to compile under MSVC.  I'm not actually sure which compiler's behavior is correct, but either way the result is unlikely to be anything useful.</p>\n"}], "owner": {"reputation": 1147, "user_id": 3137789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b65ef8041f0b9d2a25d50ba550cb9fe9?s=128&d=identicon&r=PG&f=1", "display_name": "MyUsername112358", "link": "https://stackoverflow.com/users/3137789/myusername112358"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 0, "accepted_answer_id": 34537199, "answer_count": 2, "score": 1, "last_activity_date": 1451511939, "creation_date": 1451507433, "question_id": 34536797, "link": "https://stackoverflow.com/questions/34536797/questions-about-address-of-operator-and-arrays-in-c-and-c", "title": "Questions about &quot;Address-of operator&quot; (&amp;) and arrays in c and c++", "body": "<p>I found a difference when compiling in c versus when I compile in c++ that I don't fully understand... Let's say I declare an array of char of size 5:</p>\n\n<pre><code>char my_array[5];\n</code></pre>\n\n<p>From my understanding, \"my_array\" is effectively a char pointer, which allows me to do this:</p>\n\n<pre><code>char* a = my_array;\n</code></pre>\n\n<p>Now, I understand that when I declared my array, I allocated 5 bytes only (one for each values in it), which means that \"&amp;my_array\" should not exist, because there is no allocated memory for a pointer to my_array. To prove that, I did this:</p>\n\n<pre><code>char* b = &amp;my_array; // compiler error in c++, not in c\nchar** c = &amp;my_array; // compiler error in c++, not in c\n</code></pre>\n\n<p>I don't get the difference, why would c allow that? Still, let's say I want to convert my char[5] to char*, without using the method for a, I found that I can also do:</p>\n\n<pre><code>char* c = (char*)&amp;my_array; // works both in c and c++\n</code></pre>\n\n<p>That one I really don't understand. Have I not determined that \"&amp;my_array\" doesn't exist? More alarmingly, these 2 lines returns the same exact value:</p>\n\n<pre><code>// a and c have the same value (both in c and c++)\nchar* a = my_array;\nchar* c = (char*)&amp;my_array;\n</code></pre>\n\n<p>Next, let's say I want to execute those 5 bytes at run-time, so I declare a new type:</p>\n\n<pre><code>// pFunc is a pointer to function returning void\ntypedef void (*pFunc)();\n</code></pre>\n\n<p>Then I tried declaring a pointer to function that would execute my array of bytes:</p>\n\n<pre><code>pFunc pFunc1 = (pFunc)&amp;my_array; // works, but I don't really understand why\npFunc pFunc2 = (pFunc)my_array;  // compiler error in c++, not in c\n</code></pre>\n\n<p>Suddenly, not only is &amp;my_array compiling without problem, but it's also the only way to make this works in c++ (that I know of). Anyone mind explaining to me what is going on? Here is the full code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef void (*pFunc)();\n\nint main()\n{\n    char my_array[5];\n\n    char* a = my_array;\n    char* b = &amp;my_array; // compiler error in c++, not in c\n    char* c = (char*)&amp;my_array;\n    char** d = &amp;my_array; // compiler error in c++, not in c\n    char** e = (char**)&amp;my_array;\n\n    pFunc pFunc1 = (pFunc)&amp;my_array; // works, but I don't really understand why\n    pFunc pFunc2 = (pFunc)my_array;  // compiler error in c++, not in c\n\n    printf(\"char*:\\n\");\n    printf(\"0x%X\\n\", a);\n    printf(\"0x%X\\n\", b);\n    printf(\"0x%X\\n\", c);\n    printf(\"0x%X\\n\", d);\n    printf(\"0x%X\\n\", e);\n    printf(\"\\n\");\n\n    while(1);\n\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["c++", "rest", "http", "casablanca"], "comments": [{"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1451507561, "post_id": 34536728, "comment_id": 56815404, "body": "There are a lot of things that can go wrong.  No DNS?  Port not open?  I don&#39;t even know what library you&#39;re using."}, {"owner": {"reputation": 45, "user_id": 5732023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a22bf4affcecf86d2647a71a3917885?s=128&d=identicon&r=PG&f=1", "display_name": "T. Meads", "link": "https://stackoverflow.com/users/5732023/t-meads"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 1, "creation_date": 1451507856, "post_id": 34536728, "comment_id": 56815592, "body": "C++ REST SDK is the library. I&#39;m purposefully using a server I know won&#39;t work so I know what will happen when the end user accidentally tells it to use the wrong server or failed to set it up correctly -- the program works perfectly fine if it&#39;s fed the IP address to a server that works. I simply need to know if there is any way to check if a given server is accessible before I read the response from it using REST SDK."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1451508558, "post_id": 34536728, "comment_id": 56815952, "body": "That&#39;s an incredibly confusing name for a library."}, {"owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "edited": false, "score": 0, "creation_date": 1451509185, "post_id": 34536728, "comment_id": 56816254, "body": "Does it crash right after the <code>request()</code> line? Is there a check on <code>response</code> to see if the returned value was valid?"}, {"owner": {"reputation": 45, "user_id": 5732023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a22bf4affcecf86d2647a71a3917885?s=128&d=identicon&r=PG&f=1", "display_name": "T. Meads", "link": "https://stackoverflow.com/users/5732023/t-meads"}, "edited": false, "score": 0, "creation_date": 1451509387, "post_id": 34536728, "comment_id": 56816350, "body": "Yes, it crashes while its processing the request line. I put a cout right after it , and it never printed anything to the console before it crashed so the problem must be with that line."}, {"owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "edited": false, "score": 0, "creation_date": 1451509682, "post_id": 34536728, "comment_id": 56816532, "body": "Might be in the <code>.get()</code> then. Try to call this only, to see where the problem is: <code>newClient.request(web::http::methods::GET)</code>"}, {"owner": {"reputation": 45, "user_id": 5732023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a22bf4affcecf86d2647a71a3917885?s=128&d=identicon&r=PG&f=1", "display_name": "T. Meads", "link": "https://stackoverflow.com/users/5732023/t-meads"}, "edited": false, "score": 0, "creation_date": 1451510163, "post_id": 34536728, "comment_id": 56816754, "body": "It seems like the .get() is necessary, the library uses task-based programming classes and without the .get(), you just return a task object which I can&#39;t get any meaningful data out of."}, {"owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "edited": false, "score": 0, "creation_date": 1451510543, "post_id": 34536728, "comment_id": 56816924, "body": "Yes, it sure is needed, but you could split the calls to finetune your problem. For example: <code>_some_type_ request_result = newClient.request(web::http::methods::GET);</code> and then <code>request_reult.get();</code>."}, {"owner": {"reputation": 45, "user_id": 5732023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a22bf4affcecf86d2647a71a3917885?s=128&d=identicon&r=PG&f=1", "display_name": "T. Meads", "link": "https://stackoverflow.com/users/5732023/t-meads"}, "edited": false, "score": 0, "creation_date": 1451511730, "post_id": 34536728, "comment_id": 56817439, "body": "Ok, I did that and the problem does seem to be with the .get() function. It must not know how to handle the case where it gets no data from the server, or maybe it&#39;s timing out because it keeps trying to reach the server and can&#39;t."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 5732023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a22bf4affcecf86d2647a71a3917885?s=128&d=identicon&r=PG&f=1", "display_name": "T. Meads", "link": "https://stackoverflow.com/users/5732023/t-meads"}, "edited": false, "score": 0, "creation_date": 1451513198, "post_id": 34537843, "comment_id": 56818109, "body": "Great, that fixed it! Thank you for your help and clear answer!"}], "tags": [], "owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "is_accepted": true, "score": 1, "last_activity_date": 1451523417, "last_edit_date": 1451523417, "creation_date": 1451512503, "answer_id": 34537843, "question_id": 34536728, "link": "https://stackoverflow.com/questions/34536728/c-rest-sdk-how-to-check-if-http-address-is-invalid/34537843#34537843", "title": "C++ REST SDK How to check if http address is invalid", "body": "<pre><code>web::http::http_response response = newClient.request(web::http::methods::GET).get();\n</code></pre>\n\n<p>-> You are calling <code>.get()</code> on a retrun value from <code>request()</code> which is probably invalid. So you might try to split up as follows:</p>\n\n<pre><code>_some_type_ request_result = newClient.request(web::http::methods::GET);\n</code></pre>\n\n<p>(you'll have to look up what <code>_some_type_</code> needs to be)</p>\n\n<p>Check <code>request_result</code>, and if it's ok call:</p>\n\n<pre><code>request_result.get();\n</code></pre>\n\n<p>Else, provide a error message.</p>\n"}], "owner": {"reputation": 45, "user_id": 5732023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a22bf4affcecf86d2647a71a3917885?s=128&d=identicon&r=PG&f=1", "display_name": "T. Meads", "link": "https://stackoverflow.com/users/5732023/t-meads"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1051, "favorite_count": 0, "accepted_answer_id": 34537843, "answer_count": 1, "score": 3, "last_activity_date": 1451523417, "creation_date": 1451507130, "question_id": 34536728, "link": "https://stackoverflow.com/questions/34536728/c-rest-sdk-how-to-check-if-http-address-is-invalid", "title": "C++ REST SDK How to check if http address is invalid", "body": "<p>I am using the C++ REST SDK for a small console application to test a server with a variety of http queries. Everything works fine, except for if the server is invalid (as in it doesn't exist), the program stalls for 10 seconds and then crashes. I can't find anything in the documentation that clues me into what is going on.  Every other case I can handle just fine, but I can't figure out how to check if the server is valid beforehand so I can handle this error. Here's the part of the code where it always hangs up: </p>\n\n<pre><code>web::http::client::http_client newClient(queries[index], config);\nweb::http::http_response response = newClient.request(web::http::methods::GET).get();\n</code></pre>\n\n<p>I think that if the server is invalid, the .get() doesn't know what to return and that's why the program shuts down, but I'm not sure. Please point me in the right direction on how to fix this.</p>\n"}, {"tags": ["c++", "list"], "comments": [{"owner": {"reputation": 8643, "user_id": 1718554, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n3jD1.jpg?s=128&g=1", "display_name": "Luke Joshua Park", "link": "https://stackoverflow.com/users/1718554/luke-joshua-park"}, "edited": false, "score": 0, "creation_date": 1451507079, "post_id": 34536709, "comment_id": 56815138, "body": "<b>Minimal, complete example</b>"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5731981, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--xhazXHGLRI/AAAAAAAAAAI/AAAAAAAAAF8/NvR8S2izE68/photo.jpg?sz=128", "display_name": "Jakub Ko\u0142ecki", "link": "https://stackoverflow.com/users/5731981/jakub-ko%c5%82ecki"}, "edited": false, "score": 0, "creation_date": 1451512723, "post_id": 34537733, "comment_id": 56817901, "body": "I`m get inside, becouse  method printing cout &lt;&lt; startVertex &lt;&lt; &quot; &quot; &lt;&lt; i &lt;&lt; endl; and  cout &lt;&lt; startVertex &lt;&lt; &quot;+++ &quot; &lt;&lt; i &lt;&lt; endl;"}, {"owner": {"reputation": 260, "user_id": 4724401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ZAtt9.png?s=128&g=1", "display_name": "SnG", "link": "https://stackoverflow.com/users/4724401/sng"}, "reply_to_user": {"reputation": 23, "user_id": 5731981, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--xhazXHGLRI/AAAAAAAAAAI/AAAAAAAAAF8/NvR8S2izE68/photo.jpg?sz=128", "display_name": "Jakub Ko\u0142ecki", "link": "https://stackoverflow.com/users/5731981/jakub-ko%c5%82ecki"}, "edited": false, "score": 0, "creation_date": 1451512822, "post_id": 34537733, "comment_id": 56817943, "body": "Thats from allpathfinding"}, {"owner": {"reputation": 260, "user_id": 4724401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ZAtt9.png?s=128&g=1", "display_name": "SnG", "link": "https://stackoverflow.com/users/4724401/sng"}, "reply_to_user": {"reputation": 23, "user_id": 5731981, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--xhazXHGLRI/AAAAAAAAAAI/AAAAAAAAAF8/NvR8S2izE68/photo.jpg?sz=128", "display_name": "Jakub Ko\u0142ecki", "link": "https://stackoverflow.com/users/5731981/jakub-ko%c5%82ecki"}, "edited": false, "score": 0, "creation_date": 1451513109, "post_id": 34537733, "comment_id": 56818074, "body": "thats not true. I just ran your code and added pushback into relations in your constructor, made relations public, and tested the size of relations before and after creating an object."}], "tags": [], "owner": {"reputation": 260, "user_id": 4724401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ZAtt9.png?s=128&g=1", "display_name": "SnG", "link": "https://stackoverflow.com/users/4724401/sng"}, "is_accepted": true, "score": 1, "last_activity_date": 1451511984, "creation_date": 1451511984, "answer_id": 34537733, "question_id": 34536709, "link": "https://stackoverflow.com/questions/34536709/why-i-cant-push-back-to-list-c/34537733#34537733", "title": "Why I cant push back to list c++", "body": "<p>When you call <code>AllFlowFinding</code>, you never get inside the condition of <code>(this-&gt;adjacencyMatrix[i][startVertex] != 2)</code>, so you are never actually pushing into the list.</p>\n"}], "owner": {"reputation": 23, "user_id": 5731981, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--xhazXHGLRI/AAAAAAAAAAI/AAAAAAAAAF8/NvR8S2izE68/photo.jpg?sz=128", "display_name": "Jakub Ko\u0142ecki", "link": "https://stackoverflow.com/users/5731981/jakub-ko%c5%82ecki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 34537733, "answer_count": 1, "score": 0, "last_activity_date": 1451511984, "creation_date": 1451507006, "last_edit_date": 1451510400, "question_id": 34536709, "link": "https://stackoverflow.com/questions/34536709/why-i-cant-push-back-to-list-c", "title": "Why I cant push back to list c++", "body": "<p>I am writing program that must generate hyperCoube and I must find max flow value. Why can't I push int to my list \"relations\" in class HyperCoube. \nFor example I push int in HyperCoube.AllFlowFinding method.</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    #include &lt;list&gt;\n    #include &lt;math.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;time.h&gt;\n    #include &lt;climits&gt;\n    #include &lt;iomanip&gt;\n    #include &lt;string&gt;\n    #include &lt;list&gt;\n\n    using namespace std;\n\n    class HyperCoube {\n        int vertex;\n        int traces;\n        double ** adjacencyMatrix;\n        list&lt;int&gt; relations;\n    public:\n\n        HyperCoube(int k) {\n            this-&gt;traces = 0;\n            this-&gt;vertex = (int) pow(2.0, (double) k);\n            CreateDefaultAdjacencyMatrix();\n            CreateAdjacencyMatrix();\n        }\n\n        void PrintMatrix() {\n            for (int i = 0; i&lt;this-&gt;vertex; i++) {\n                for (int j = 0; j&lt;this-&gt;vertex; j++) {\n                    cout &lt;&lt; this-&gt;adjacencyMatrix[i][j] &lt;&lt; \" \";\n                }\n                cout &lt;&lt; endl;\n            }\n        }\n\n        void PrintDagonalMatrix() {\n            for (int i = 0; i&lt;this-&gt;vertex; i++) {\n                for (int j = 0; j&lt;this-&gt;vertex; j++) {\n                    if (this-&gt;adjacencyMatrix[i][j] == 2) {\n                        cout &lt;&lt; 0 &lt;&lt; \" \";\n                    } else {\n                        cout &lt;&lt; 1 &lt;&lt; \" \";\n                    }\n                }\n                cout &lt;&lt; endl;\n            }\n        }\n\n        void printQuantityTraces() {\n            cout &lt;&lt; this-&gt;traces &lt;&lt; endl;\n        }\n\n        void AllPathFinding(int startVertex, int exitVertex) {\n            for (int i = 0; i&lt;this-&gt;vertex; i++) {\n                if (exitVertex != i) {\n                    if (this-&gt;adjacencyMatrix[i][startVertex] != 2) {\n                        cout &lt;&lt; startVertex &lt;&lt; \" \" &lt;&lt; i &lt;&lt; endl;\n\n                        AllPathFinding(i, exitVertex);\n                    }\n                } else {\n                    if (this-&gt;adjacencyMatrix[i][startVertex] != 2) {\n                        this-&gt;traces++;\n                        cout &lt;&lt; startVertex &lt;&lt; \"+++\" &lt;&lt; i &lt;&lt; endl;\n                        break;\n                    }\n                }\n\n            }\n        }\n\n        void PrintList() {\n            list&lt;int&gt;::iterator iter;\n            for (iter = this-&gt;relations.begin(); iter != this-&gt;relations.end(); ++iter) {\n                int rel = *iter;\n                cout &lt;&lt; rel&lt;&lt; \"; \";\n            }\n        }\n\n        /* ~HyperCoube() {\n             for (int i = 0; i&lt;this-&gt;vertex; i++)\n                 delete [] this-&gt;adjacencyMatrix[i];\n             delete [] * this-&gt;adjacencyMatrix;\n         }*/\n    private:\n\n        void AllFlowFinding(int startVertex, int exitVertex) {\n            for (int i = 0; i&lt;this-&gt;vertex; i++) {\n                if (exitVertex != i) {\n                    if (this-&gt;adjacencyMatrix[i][startVertex] != 2) {\n                        cout &lt;&lt; startVertex &lt;&lt; \" \" &lt;&lt; i &lt;&lt; endl;\n                        this-&gt;relations.push_back(startVertex);\n                        this-&gt;relations.push_back(i);\n                        AllPathFinding(i, exitVertex);\n                    }\n                } else {\n                    if (this-&gt;adjacencyMatrix[i][startVertex] != 2) {\n                        this-&gt;traces++;\n                        cout &lt;&lt; startVertex &lt;&lt; \"+++\" &lt;&lt; i &lt;&lt; endl;\n                        this-&gt;relations.push_back(startVertex);\n                        this-&gt;relations.push_back(i);\n                        break;\n                    }\n                }\n\n            }\n        }\n\n        void CreateDefaultAdjacencyMatrix() {\n            this-&gt;adjacencyMatrix = new double *[this-&gt;vertex];\n            for (int i = 0; i&lt;this-&gt;vertex; i++) {\n                this-&gt;adjacencyMatrix[i] = new double [this-&gt;vertex];\n            }\n            for (int i = 0; i&lt;this-&gt;vertex; i++) {\n                for (int j = 0; j&lt;this-&gt;vertex; j++) {\n                    this-&gt;adjacencyMatrix[i][j] = 2.0;\n                }\n            }\n        }\n\n        void CreateAdjacencyMatrix() {\n            for (int i = 0; i &lt; this-&gt;vertex; i++) {\n                for (int j = 0; j &lt; i; j++) {\n                    int u = i ^ j;\n                    int k = u - 1;\n                    k |= k &gt;&gt; 1;\n                    k |= k &gt;&gt; 2;\n                    k |= k &gt;&gt; 4;\n                    k |= k &gt;&gt; 8;\n                    k |= k &gt;&gt; 16;\n                    if (k + 1 == u) {\n                        this-&gt;adjacencyMatrix[i][j] = rand() / (double) RAND_MAX;\n                    }\n                }\n            }\n        }    \n    };\n\n    int main() {\n        srand(time(NULL));\n        HyperCoube x(4);\n        x.PrintDagonalMatrix();\n        x.AllPathFinding(0, 2);\n        //x.printQuantityTraces();\n        x.PrintList();\n        return 0;\n    }\n</code></pre>\n\n<p>When I print size of list it always prints zero.</p>\n"}, {"tags": ["c++", "struct", "types", "g++", "incomplete-type"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1451507246, "post_id": 34536698, "comment_id": 56815226, "body": "In C++, you don&#39;t need <code>struct</code> when declaring variables.  For example, <code>Node * root;</code> will work fine."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1451507317, "post_id": 34536698, "comment_id": 56815271, "body": "Please add the <i>exact error message, verbatim</i>, to your question."}, {"owner": {"reputation": 3, "user_id": 4416922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e58748c9e167e899376c9af0f2fec58?s=128&d=identicon&r=PG&f=1", "display_name": "arttp2", "link": "https://stackoverflow.com/users/4416922/arttp2"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1451507336, "post_id": 34536698, "comment_id": 56815279, "body": "I will edit the question. I have commented the Node * root definition."}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1451507381, "post_id": 34536765, "comment_id": 56815309, "body": "In other words, the lines should be in a method."}, {"owner": {"reputation": 3, "user_id": 4416922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e58748c9e167e899376c9af0f2fec58?s=128&d=identicon&r=PG&f=1", "display_name": "arttp2", "link": "https://stackoverflow.com/users/4416922/arttp2"}, "edited": false, "score": 0, "creation_date": 1451507622, "post_id": 34536765, "comment_id": 56815437, "body": "I want to define the structure of the tree and not create it dynamically using methods. eg. nTree *tree = new nTree; should create the Tree and printf(&quot;%d&quot;, tree-&gt;root-&gt;key); should print &quot;1&quot;"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 3, "user_id": 4416922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e58748c9e167e899376c9af0f2fec58?s=128&d=identicon&r=PG&f=1", "display_name": "arttp2", "link": "https://stackoverflow.com/users/4416922/arttp2"}, "edited": false, "score": 0, "creation_date": 1451507843, "post_id": 34536765, "comment_id": 56815583, "body": "@arttp2, that is vague. you need more precise information. how may nodes do you want to create? what&#39;s the structure of the nodes? how deep do you want the tree to be? Once you have those answers, create a non-member function to create such a tree and fill up the tree as you see fit in that function."}, {"owner": {"reputation": 3, "user_id": 4416922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e58748c9e167e899376c9af0f2fec58?s=128&d=identicon&r=PG&f=1", "display_name": "arttp2", "link": "https://stackoverflow.com/users/4416922/arttp2"}, "edited": false, "score": 0, "creation_date": 1451508026, "post_id": 34536765, "comment_id": 56815692, "body": "I am replacing the code snippet with the intended tree structure."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 3, "user_id": 4416922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e58748c9e167e899376c9af0f2fec58?s=128&d=identicon&r=PG&f=1", "display_name": "arttp2", "link": "https://stackoverflow.com/users/4416922/arttp2"}, "edited": false, "score": 0, "creation_date": 1451508950, "post_id": 34536765, "comment_id": 56816137, "body": "@arttp2 first of all it is not clear how existence of class/struct methods related to dynamical creation of tree instances. Second, code in c++ must be in a function (except data declaration/definition), either standalone or that belong to classes (aka methods)"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 3, "user_id": 4416922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e58748c9e167e899376c9af0f2fec58?s=128&d=identicon&r=PG&f=1", "display_name": "arttp2", "link": "https://stackoverflow.com/users/4416922/arttp2"}, "edited": false, "score": 0, "creation_date": 1451509408, "post_id": 34536765, "comment_id": 56816366, "body": "@arttp2, create a non-member function. Let&#39;s call it <code>construct_tree</code>. In the function, create a tree with just one node, the root node. Make sure it works. Then update the function to add another layer of nodes. Make sure it works. Keep updating the function until you have the desired structure."}, {"owner": {"reputation": 3, "user_id": 4416922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e58748c9e167e899376c9af0f2fec58?s=128&d=identicon&r=PG&f=1", "display_name": "arttp2", "link": "https://stackoverflow.com/users/4416922/arttp2"}, "edited": false, "score": 0, "creation_date": 1451509661, "post_id": 34536765, "comment_id": 56816523, "body": "@R Sahu, please check if the cpp should work that i have added to the original question. Also I created this &quot;rigid&quot; tree as opposed to a dynamically growing tree because I am focused on traversing rather than creating a tree, hence to avoid creating a tree repeatedly, I wrote the above header file."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 3, "user_id": 4416922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e58748c9e167e899376c9af0f2fec58?s=128&d=identicon&r=PG&f=1", "display_name": "arttp2", "link": "https://stackoverflow.com/users/4416922/arttp2"}, "edited": false, "score": 0, "creation_date": 1451509751, "post_id": 34536765, "comment_id": 56816564, "body": "@arttp2, no it won&#39;t work even if you move all of that code to a function. You are not allocating memory for any of the nodes."}, {"owner": {"reputation": 3, "user_id": 4416922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e58748c9e167e899376c9af0f2fec58?s=128&d=identicon&r=PG&f=1", "display_name": "arttp2", "link": "https://stackoverflow.com/users/4416922/arttp2"}, "edited": false, "score": 0, "creation_date": 1451510395, "post_id": 34536765, "comment_id": 56816859, "body": "@RSahu, the compiler should know the size of each node, hence allocate memory for the tree (hence all nodes)"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 3, "user_id": 4416922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e58748c9e167e899376c9af0f2fec58?s=128&d=identicon&r=PG&f=1", "display_name": "arttp2", "link": "https://stackoverflow.com/users/4416922/arttp2"}, "edited": false, "score": 0, "creation_date": 1451510668, "post_id": 34536765, "comment_id": 56816979, "body": "@arttp2, <code>root</code> is a pointer to a node. You can use <code>root = new Node[10];</code> to allocate memory for ten root nodes, or you can use <code>root = new Node;</code> to allocate memory for one root node. How is the compiler supposed to know how you wish to allocate memory for that node?"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 4, "last_activity_date": 1451507296, "creation_date": 1451507296, "answer_id": 34536765, "question_id": 34536698, "link": "https://stackoverflow.com/questions/34536698/error-root-does-not-name-a-type/34536765#34536765", "title": "error: \u2018root\u2019 does not name a type", "body": "<p>The lines:</p>\n\n<pre><code>root-&gt;parent = NULL;\nroot-&gt;left_child = node1_1;\nroot-&gt;right_sibling = NULL;\nroot-&gt;key = 1;\n</code></pre>\n\n<p>are not legal.</p>\n\n<p>I am hesitant to suggest a solution because it's not clear from your code how you are intending to use <code>nTree</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 4416922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e58748c9e167e899376c9af0f2fec58?s=128&d=identicon&r=PG&f=1", "display_name": "arttp2", "link": "https://stackoverflow.com/users/4416922/arttp2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "accepted_answer_id": 34536765, "answer_count": 1, "score": 0, "last_activity_date": 1451509436, "creation_date": 1451506925, "last_edit_date": 1451509436, "question_id": 34536698, "link": "https://stackoverflow.com/questions/34536698/error-root-does-not-name-a-type", "title": "error: \u2018root\u2019 does not name a type", "body": "<p>I get the following error for all attributes of a node, and for all nodes.</p>\n\n<pre><code>n-tree.h:35:2: error: \u2018root\u2019 does not name a type\n  root-&gt;parent = NULL;\n  ^\n</code></pre>\n\n<p>I want to create a tree with arbitrary number of child nodes. I created a header file for the tree definition.</p>\n\n<p>I first defined a node as a struct.\nThen using the definition of the Node, I created a Tree.</p>\n\n<p>I tried many ways to resolve the error, example, by defining the Node struct inside the nTree struct, defining the nodes in other common implementations.</p>\n\n<p>Here is n-tree.h</p>\n\n<pre><code>#ifndef N_TREE\n#define N_TREE\n#include &lt;cstdio&gt;\n\nstruct Node\n{\n    Node* parent;\n    Node* left_child;\n    Node* right_sibling;\n    double key;\n};\n\nstruct nTree\n{\n\n// Nodes - attributes of the tree\nNode* root;\nNode* node1_1;\n    Node* node1_1_1;\n    Node* node1_1_2;\n\nNode* node1_2;\n    Node* node1_2_1;\n    Node* node1_2_2;\n    Node* node1_2_3;\n\nNode* node1_3;\n    Node* node1_3_1;\n\n\n\n// Root level\nroot-&gt;parent = NULL;\nroot-&gt;left_child = node1_1;\nroot-&gt;right_sibling = NULL;\nroot-&gt;key = 1;\n\n// Level 1_1\nnode1_1-&gt;parent = root;\nnode1_1-&gt;left_child = node1_1_1;\nnode1_1-&gt;right_sibling = node1_2;\nnode1_1-&gt;key = 2;\n\n// Level 1_2\nnode1_2-&gt;parent = root;\nnode1_2-&gt;left_child = node1_2_1;\nnode1_2-&gt;right_sibling = node1_3;\nnode1_2-&gt;key = 3;\n\n// Level 1_3\nnode1_3-&gt;parent = root;\nnode1_3-&gt;left_child = node1_3_1;\nnode1_3-&gt;right_sibling = NULL;\nnode1_3-&gt;key = 4;\n\n\n// Level 1_1_1\nnode1_1_1-&gt;parent = node1_1;\nnode1_1_1-&gt;left_child = NULL;\nnode1_1_1-&gt;right_sibling = node1_1_2;\nnode1_1_1-&gt;key = 5;\n\n // Level 1_1_2\nnode1_1_2-&gt;parent = node1_1;\nnode1_1_2-&gt;left_child = NULL;\nnode1_1_2-&gt;right_sibling = NULL;\nnode1_1_2-&gt;key = 6;\n\n// Level 1_2_1\nnode1_2_1-&gt;parent = node1_2;\nnode1_2_1-&gt;left_child = NULL;\nnode1_2_1-&gt;right_sibling = node1_2_2;\nnode1_2_1-&gt;key = 7;\n\n// Level 1_2_2\nnode1_2_2-&gt;parent = node1_2;\nnode1_2_2-&gt;left_child = NULL;\nnode1_2_2-&gt;right_sibling = node1_2_3;\nnode1_2_2-&gt;key = 8;\n\n// Level 1_2_3\nnode1_2_3-&gt;parent = node1_2;\nnode1_2_3-&gt;left_child = NULL;\nnode1_2_3-&gt;right_sibling = NULL;\nnode1_2_3-&gt;key = 9;\n\n// Level 1_3_1\nnode1_3_1-&gt;parent = node1_3;\nnode1_3_1-&gt;left_child = NULL;\nnode1_3_1-&gt;right_sibling = NULL;\nnode1_3_1-&gt;key = 10;\n\n};\n#endif\n</code></pre>\n\n<hr>\n\n<p>Here is n-tree_implement.cpp</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include \"n-tree.h\"\n\nint main()\n{\n    nTree* tree = new nTree;\n    printf(\"%d\\n\", tree-&gt;root-&gt;key);\n    delete tree;\n}\n</code></pre>\n\n<p>The above header file when included gives the following error for all nodes within the nTree.</p>\n"}, {"tags": ["c++", "arrays", "sorting"], "comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 3, "creation_date": 1451506932, "post_id": 34536677, "comment_id": 56815060, "body": "Copy the contents of the array that you would like to count the number of swaps for into another array, and perform the bubble sort on that array."}, {"owner": {"reputation": 97941, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 3, "creation_date": 1451507029, "post_id": 34536677, "comment_id": 56815111, "body": "Whatever you do, I really recommend you do not try to write multi-language source files. Stick to one of C or C++. Writing multi-language source files is hard work and any advantage that offers (if any) is minimal."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1451507473, "post_id": 34536677, "comment_id": 56815352, "body": "Since you are programming in C++, I suggest you use <code>std::swap</code>.  The C language doesn&#39;t have this feature."}, {"owner": {"reputation": 4604, "user_id": 3821804, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d837f426da3935510c8c43f2a2c07f8d?s=128&d=identicon&r=PG&f=1", "display_name": "GingerPlusPlus", "link": "https://stackoverflow.com/users/3821804/gingerplusplus"}, "edited": false, "score": 0, "creation_date": 1451510467, "post_id": 34536677, "comment_id": 56816895, "body": "In <code>n</code>element array, in the worst case it&#39;s <code>n*n&#47;2</code>."}, {"owner": {"reputation": 4604, "user_id": 3821804, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d837f426da3935510c8c43f2a2c07f8d?s=128&d=identicon&r=PG&f=1", "display_name": "GingerPlusPlus", "link": "https://stackoverflow.com/users/3821804/gingerplusplus"}, "edited": false, "score": 1, "creation_date": 1451510792, "post_id": 34536677, "comment_id": 56817040, "body": "@Tomas: why you don&#39;t want to perform a bouble sort? To not destroy your data, or for performance reasons?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1451511129, "post_id": 34536677, "comment_id": 56817190, "body": "C and C++ are different languages. Pick one!"}, {"owner": {"reputation": 1096, "user_id": 4971803, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YqsMc.png?s=128&g=1", "display_name": "dudeman", "link": "https://stackoverflow.com/users/4971803/dudeman"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1451522004, "post_id": 34536677, "comment_id": 56820998, "body": "@Olaf and pmg: Isn&#39;t C++ a superset of C?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1096, "user_id": 4971803, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YqsMc.png?s=128&g=1", "display_name": "dudeman", "link": "https://stackoverflow.com/users/4971803/dudeman"}, "edited": false, "score": 0, "creation_date": 1451528622, "post_id": 34536677, "comment_id": 56822487, "body": "@MikeAtNobel: Whoever told you does not know at least one of them. They have different features and different semantics for some constructs with the same syntax. I will not have this discussion again, as this pops up at least once a day. Just do some research on your own."}, {"owner": {"reputation": 121, "user_id": 5483998, "user_type": "registered", "profile_image": "https://graph.facebook.com/910956402324109/picture?type=large", "display_name": "Abhijeet Kumar Srivastava", "link": "https://stackoverflow.com/users/5483998/abhijeet-kumar-srivastava"}, "edited": false, "score": 0, "creation_date": 1451565033, "post_id": 34536677, "comment_id": 56834620, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/11331314/number-of-swaps-in-bubble-sort\">Number of swaps in Bubble Sort</a>"}, {"owner": {"reputation": 1096, "user_id": 4971803, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YqsMc.png?s=128&g=1", "display_name": "dudeman", "link": "https://stackoverflow.com/users/4971803/dudeman"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1451582294, "post_id": 34536677, "comment_id": 56841285, "body": "@Olaf: Could you recommend any good sources?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1096, "user_id": 4971803, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YqsMc.png?s=128&g=1", "display_name": "dudeman", "link": "https://stackoverflow.com/users/4971803/dudeman"}, "edited": false, "score": 0, "creation_date": 1451587366, "post_id": 34536677, "comment_id": 56843136, "body": "@MikeAtNobel: Please read my comment carefully again! If in doubt read the C and C++ standards. They are not that complicated."}], "answers": [{"tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 0, "last_activity_date": 1451512673, "last_edit_date": 1451512673, "creation_date": 1451507898, "answer_id": 34536902, "question_id": 34536677, "link": "https://stackoverflow.com/questions/34536677/count-number-of-bubble-sort-swaps-in-array-without-doing-bubble-sort/34536902#34536902", "title": "Count number of bubble sort swaps in array without doing bubble sort", "body": "<p>You can follow three simple steps. Make a copy of the input array, then increment a counter every time you swap and return that count.  Some thing like:</p>\n\n<pre><code>int bubbleSort(int * array, int size){\n    std::vector&lt;int&gt; temp_array(array, array + size);\n    int count{0};\n    for(int i = 0; i &lt; size - 1; i++){\n        for(int j = 0; j &lt; size - i - 1; j++){\n            if(temp_array[j+1] &lt; temp_array[j]){\n                int tmp = temp_array[j + 1];\n                temp_array[j + 1] = temp_array[j];\n                temp_array[j] = tmp;\n                count++;\n            }\n        }\n    }\n    return count;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 5483998, "user_type": "registered", "profile_image": "https://graph.facebook.com/910956402324109/picture?type=large", "display_name": "Abhijeet Kumar Srivastava", "link": "https://stackoverflow.com/users/5483998/abhijeet-kumar-srivastava"}, "edited": false, "score": 0, "creation_date": 1451565130, "post_id": 34537258, "comment_id": 56834667, "body": "This will not give the number of swaps, but number of comparisons. Array is after first iteration changes in bubble sort. But in your case it will not change."}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "reply_to_user": {"reputation": 121, "user_id": 5483998, "user_type": "registered", "profile_image": "https://graph.facebook.com/910956402324109/picture?type=large", "display_name": "Abhijeet Kumar Srivastava", "link": "https://stackoverflow.com/users/5483998/abhijeet-kumar-srivastava"}, "edited": false, "score": 0, "creation_date": 1451570407, "post_id": 34537258, "comment_id": 56836552, "body": "@AbhijeetKumarSrivastava This <b>will give</b> the number of swaps. We don&#39;t need to change initial array to find the answer. It&#39;s easy to see if you sort manually a little array with paper and pencil."}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "reply_to_user": {"reputation": 121, "user_id": 5483998, "user_type": "registered", "profile_image": "https://graph.facebook.com/910956402324109/picture?type=large", "display_name": "Abhijeet Kumar Srivastava", "link": "https://stackoverflow.com/users/5483998/abhijeet-kumar-srivastava"}, "edited": false, "score": 0, "creation_date": 1451571366, "post_id": 34537258, "comment_id": 56836919, "body": "@AbhijeetKumarSrivastava I edited my answer to make it more explanatory."}], "tags": [], "owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "is_accepted": false, "score": 3, "last_activity_date": 1451571265, "last_edit_date": 1451571265, "creation_date": 1451509621, "answer_id": 34537258, "question_id": 34536677, "link": "https://stackoverflow.com/questions/34536677/count-number-of-bubble-sort-swaps-in-array-without-doing-bubble-sort/34537258#34537258", "title": "Count number of bubble sort swaps in array without doing bubble sort", "body": "<p>Seems that you can use the following function to calculate the total number of swaps:</p>\n\n<pre><code>int calcSwaps(int *array, int size) {\n    int cnt = 0;\n\n    for (int i = 0; i + 1 &lt; size; ++i) {\n        for (int j = i + 1; j &lt; size; ++j) {\n            if (array[j] &lt; array[i]) {\n                ++cnt;\n            }\n        }\n    }\n\n    return cnt;\n}\n</code></pre>\n\n<p>The main idea is that in this type of sorting every element <code>array[i]</code> will be swapped with all elements <code>array[j]</code>, <code>j &gt; i</code>, <code>array[j] &lt; array[i]</code>.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I'll try to explain it more carefully to avoid misunderstanding. Solution is rather simple. Consider the bubble sort algorithm. Let's look at the initial unsorted array. If we have <code>array[i]</code> element, how many times will it be swapped? Okay, we swap elements <code>array[j]</code> and <code>array[j + 1]</code> if <code>array[j] &gt; array[j + 1]</code>. Every two elements can be swapped at most one time according to the chosen sorting algorithm. Also if <code>array[i] &gt; array[j], i &lt; j</code> they will be swapped because we want to get a sorted array in the end. It's easy to see that in this case we just need to get every element <code>array[i]</code>, calculate the number of <code>array[j], array[j] &lt; array[i], j &gt; i</code> (it'll be the number of elements that will be swapped with <code>array[i]</code> in the process of sorting), and finally sum all these numbers for every <code>array[i]</code> to get the answer.</p>\n"}, {"comments": [{"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1451513252, "post_id": 34537757, "comment_id": 56818136, "body": "Why do you use vector of <code>double</code>s instead of <code>int</code>s?"}, {"owner": {"reputation": 4604, "user_id": 3821804, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d837f426da3935510c8c43f2a2c07f8d?s=128&d=identicon&r=PG&f=1", "display_name": "GingerPlusPlus", "link": "https://stackoverflow.com/users/3821804/gingerplusplus"}, "reply_to_user": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1451513494, "post_id": 34537757, "comment_id": 56818244, "body": "@Edgar: Because... well, my C++ teacher uses arrays of doubles. The type doesn&#39;t matter here, though."}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1451513755, "post_id": 34537757, "comment_id": 56818362, "body": "Does your teacher use <code>double</code> to represent <code>int</code>? It&#39;s weird.  Also, type is always important, really."}, {"owner": {"reputation": 4604, "user_id": 3821804, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d837f426da3935510c8c43f2a2c07f8d?s=128&d=identicon&r=PG&f=1", "display_name": "GingerPlusPlus", "link": "https://stackoverflow.com/users/3821804/gingerplusplus"}, "reply_to_user": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1451514084, "post_id": 34537757, "comment_id": 56818508, "body": "We&#39;re working on numerical analysis recently, so we use arrays of doubles, but often use integers in example input anyway, for simplicity. I can&#39;t get your point that <i>type is always important</i>, how it&#39;s important here?"}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 1, "creation_date": 1451514482, "post_id": 34537757, "comment_id": 56818681, "body": "Okay, strictly saying to show your algorithm you can use doubles. But in this case, for example, you spend probably twice more memory that we really need storing ints like doubles. I&#39;m sure, that the usage of C/C++ implies writing optimal code, so it&#39;s not true C/C++ way doing that."}, {"owner": {"reputation": 4604, "user_id": 3821804, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d837f426da3935510c8c43f2a2c07f8d?s=128&d=identicon&r=PG&f=1", "display_name": "GingerPlusPlus", "link": "https://stackoverflow.com/users/3821804/gingerplusplus"}, "reply_to_user": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1451514736, "post_id": 34537757, "comment_id": 56818790, "body": "Thanks for explanation, I&#39;ll have that in mind when writing new code."}], "tags": [], "owner": {"reputation": 4604, "user_id": 3821804, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d837f426da3935510c8c43f2a2c07f8d?s=128&d=identicon&r=PG&f=1", "display_name": "GingerPlusPlus", "link": "https://stackoverflow.com/users/3821804/gingerplusplus"}, "is_accepted": false, "score": 1, "last_activity_date": 1451512079, "creation_date": 1451512079, "answer_id": 34537757, "question_id": 34536677, "link": "https://stackoverflow.com/questions/34536677/count-number-of-bubble-sort-swaps-in-array-without-doing-bubble-sort/34537757#34537757", "title": "Count number of bubble sort swaps in array without doing bubble sort", "body": "<p>NOTE: <a href=\"http://rextester.com/ZMGUN31656\" rel=\"nofollow\">It seems to work</a>, but I'm not certain that my approach is correct!</p>\n\n<p>Let's have an example array:</p>\n\n<pre><code>{3, 5, 1, 4, 2}\n</code></pre>\n\n<p>Find the smallest element's <code>index</code>. To move it to the beggining of the array, you need <code>index</code> swaps. In my example, <code>1</code> is the smallest element, <code>1</code>, with <code>index</code> <code>2</code>, is smallest element, so 2 swaps will be needed to place it on right place. After that, we have:</p>\n\n<pre><code>{1, 3, 5, 4, 2}\n</code></pre>\n\n<p><code>1</code> is now in the correct place, so we can focus on the rest of the array to keep things simple:</p>\n\n<pre><code>{3, 5, 4, 2}\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n\nunsigned swaps(std::vector&lt;double&gt;&amp; data) {\n    unsigned result = 0;\n    while (!data.empty()) {\n        auto smallest = std::min_element(data.begin(), data.end());\n        result += smallest - data.begin();\n        data.erase(smallest);\n    }\n    return result;\n}\n</code></pre>\n\n<p><a href=\"http://rextester.com/ZMGUN31656\" rel=\"nofollow\">See it working (hopefully correctly) online</a></p>\n"}, {"comments": [{"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1451583606, "post_id": 34537894, "comment_id": 56841795, "body": "A bottom up merge sort could be used for the same purpose, using the same Merge() function. The main difference would be cnt would be initialized = 0, then during the iterations (no recursion), the code would be cnt += Merge(... ) for each call to Merge()."}], "tags": [], "owner": {"reputation": 121, "user_id": 5483998, "user_type": "registered", "profile_image": "https://graph.facebook.com/910956402324109/picture?type=large", "display_name": "Abhijeet Kumar Srivastava", "link": "https://stackoverflow.com/users/5483998/abhijeet-kumar-srivastava"}, "is_accepted": false, "score": 2, "last_activity_date": 1451513342, "last_edit_date": 1451513342, "creation_date": 1451512850, "answer_id": 34537894, "question_id": 34536677, "link": "https://stackoverflow.com/questions/34536677/count-number-of-bubble-sort-swaps-in-array-without-doing-bubble-sort/34537894#34537894", "title": "Count number of bubble sort swaps in array without doing bubble sort", "body": "<p>Modify merge sort so that in addition to sorting its input, count the number of inversions that were in that array. Let's prove it by induction.</p>\n\n<p><strong>Base Case:</strong>\nEasy - return 0 inversion if the array size is less than or equal to 1</p>\n\n<p><strong>General Case:</strong>\nLet's analyze the problem step by step.</p>\n\n<p>We have two arrays to be merged. What kind of inversion could be there? An inversion(i, j) could be in the same half (left or right half), or i could be in the left half and j could be in the right half (i cannot be in the right half because we have the constraint i &lt; j). However, by the inductive hypothesis, the number of inversions within the left and right half of the array would be returned by the respective recursive calls to each half of the array, so we only need to count the number of inversions across the two halves (i in left and j in right).</p>\n\n<p>How do we count the number of inversions across left and right array? In the merge step of the merge sort, we are given a two sorted array (left and right). For each element left[i] in the left array we want to know how many element right[j] in the right array is strictly smaller than  left[i]\n.Note that when we insert left[i] into the merged array, we know that every element to the left of j is less than left[i] (since they are inserted to merged array before left[i] ). So, each time left[i] is inserted into the merged array increment the counter by j.  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nlong long int MS(int a[],int temp[],int left,int right);\nlong long int Merge(int a[],int temp[],int left,int mid,int right);\n\nlong long int MS(int a[],int temp[],int left,int right)\n{\n    long long int cnt=0;\n    int mid;\n    if(right&gt;left)\n    {\n        mid=(right+left)/2;\n        cnt=MS(a,temp,left,mid);\n        cnt+=MS(a,temp,mid+1,right);\n        cnt+=Merge(a,temp,left,mid+1,right);\n    }\n    return cnt;\n}\n\nlong long int Merge(int a[],int temp[],int left,int mid,int right)\n{\n    int i,j,k;\n    long long int cnt=0;\n    i=left;\n    j=mid;\n    k=left;\n    while(i&lt;=mid-1 &amp;&amp; j&lt;=right)\n    {\n        if(a[i]&lt;=a[j])\n            temp[k++] = a[i++];\n        else\n        {\n            temp[k++] = a[j++];\n            cnt+=(mid-i);\n        }\n    }\n    while (i&lt;=mid-1)\n        temp[k++]=a[i++];\n    while(j&lt;=right)\n        temp[k++]=a[j++];\n    for(i=left;i&lt;=right;i++)\n        a[i]=temp[i];\n    return cnt;\n}\n\nint main()\n{\n    int *a,*tmp,t,n;\n    scanf(\"%d\",&amp;t);\n    for(int i=0;i&lt;t;i++)\n    {\n        scanf(\"%d\",&amp;n);\n        a=new int [n];\n        tmp=new int [n];\n        for(int j=0;j&lt;n;j++)\n            scanf(\"%d\",&amp;a[j]);\n        printf(\"%lld\\n\",MS(a,tmp,0,n-1));\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5216702"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4761, "favorite_count": 0, "answer_count": 4, "score": 6, "last_activity_date": 1451571265, "creation_date": 1451506835, "last_edit_date": 1451528721, "question_id": 34536677, "link": "https://stackoverflow.com/questions/34536677/count-number-of-bubble-sort-swaps-in-array-without-doing-bubble-sort", "title": "Count number of bubble sort swaps in array without doing bubble sort", "body": "<p>hello i am trying to count the number of bubblesort swaps in array of size N but i would like to do it without doing the bubblesort , i have heard about merge sort and someone already told me that its some kind of merge sort modification ... i dont want to use this basic algorithm ></p>\n\n<pre><code>void bubbleSort(int * array, int size){\n    for(int i = 0; i &lt; size - 1; i++){\n        for(int j = 0; j &lt; size - i - 1; j++){\n            if(array[j+1] &lt; array[j]){\n                int tmp = array[j + 1];\n                array[j + 1] = array[j];\n                array[j] = tmp;\n            }   \n        }   \n    }   \n}  \n</code></pre>\n\n<p>does anyone of you guys have an idea?</p>\n"}, {"tags": ["c++", "inheritance", "polymorphism"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1451505713, "post_id": 34536307, "comment_id": 56814487, "body": "Perhaps this may help <a href=\"http://stackoverflow.com/questions/274626/what-is-object-slicing\">stackoverflow.com/questions/274626/what-is-object-slicing</a>"}, {"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "edited": false, "score": 0, "creation_date": 1451506421, "post_id": 34536307, "comment_id": 56814803, "body": "What do you expect to happen if <code>pBaseB</code> actually points to a <code>Base</code> object (or any other derived type - except <code>Derived</code> - for that matter...)?"}, {"owner": {"reputation": 366, "user_id": 2025319, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/db662306a7237c0f0b2869d317e8b2cb?s=128&d=identicon&r=PG", "display_name": "Msegade", "link": "https://stackoverflow.com/users/2025319/msegade"}, "reply_to_user": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "edited": false, "score": 0, "creation_date": 1451506944, "post_id": 34536307, "comment_id": 56815065, "body": "@Amit I think the best solution will be to throw an exception if the type pointed by pBaseB isn&#39;t  Derived."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1451506949, "post_id": 34536307, "comment_id": 56815068, "body": "So, essentially, you want an <code>operator+</code> that is virtual? [And <code>operator=</code> as well, which is a lot harder]"}, {"owner": {"reputation": 366, "user_id": 2025319, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/db662306a7237c0f0b2869d317e8b2cb?s=128&d=identicon&r=PG", "display_name": "Msegade", "link": "https://stackoverflow.com/users/2025319/msegade"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1451507109, "post_id": 34536307, "comment_id": 56815160, "body": "@MatsPetersson Yes, but the arguments and the return type are different in the Derived class, and that gives problems. I was thinking using casts but I don&#39;t know how to do it."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1451507882, "post_id": 34536307, "comment_id": 56815611, "body": "Right, so you basically can&#39;t do what you want to do. There are ways to do an <code>operator+</code> that adds various types, but you can&#39;t make a <code>operator=</code> that works for &quot;any&quot; type. You will need to think of some other way to achieve that at the fundamental level. Can you perhaps describe the underlying problem you are trying to solve, and we can probably find a different solution that works? [One thought that comes to mind is a pimpl pattern]"}, {"owner": {"reputation": 366, "user_id": 2025319, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/db662306a7237c0f0b2869d317e8b2cb?s=128&d=identicon&r=PG", "display_name": "Msegade", "link": "https://stackoverflow.com/users/2025319/msegade"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1451508931, "post_id": 34536307, "comment_id": 56816128, "body": "@MatsPetersson The problem that I&#39;m trying to solve involves sparse matrices which are a special case of a Matrix. There are a lot of types of storage schemes for sparse matrices: csr,csc cco...  which I intend of having one class for each one and all of them inherit from the class Matrix. Every submatrix class has the same operations but different implementations and for example the operator+ is intenden to work like the example above. Also each submatrix has different private members, like the example above."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1451509091, "post_id": 34536307, "comment_id": 56816216, "body": "So a pimpl pattern sounds like the perfect solution for this. I&#39;ll write up a simple example."}], "answers": [{"comments": [{"owner": {"reputation": 366, "user_id": 2025319, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/db662306a7237c0f0b2869d317e8b2cb?s=128&d=identicon&r=PG", "display_name": "Msegade", "link": "https://stackoverflow.com/users/2025319/msegade"}, "edited": false, "score": 0, "creation_date": 1451508341, "post_id": 34536782, "comment_id": 56815854, "body": "Ok, that works. But that doesn&#39;t solve the problem of polymorphism. I can&#39;t use a Base class pointer in any place where a Derived class can be."}, {"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 0, "creation_date": 1451508411, "post_id": 34536782, "comment_id": 56815884, "body": "The result of <code>dynamic_cast</code> is not guaranteed to be a valid pointer- it may be nullptr, which you are cheerily dereferencing without a care in the world here."}, {"owner": {"reputation": 181, "user_id": 1203737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c80f1479c270cb678adc4ed79e28fad?s=128&d=identicon&r=PG", "display_name": "Nick Ligerakis", "link": "https://stackoverflow.com/users/1203737/nick-ligerakis"}, "reply_to_user": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 0, "creation_date": 1451508760, "post_id": 34536782, "comment_id": 56816057, "body": "@Puppy Yes, of course you&#39;re right. But I wasn&#39;t trying to answer a question on the semantics of dynamic_cast, as that would be another question altogether. In the context of this question, the solution compiles and runs as expected."}, {"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 0, "creation_date": 1451509260, "post_id": 34536782, "comment_id": 56816292, "body": "The semantics of dynamic_cast are not another question altogether, they are the essence of your answer, which is cripplingly flawed as a result of their fundamental mis-fit to this situation. The fact that it happens to work in this trivial case bears no meaning on the suitability of the answer in the general case."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1451509665, "post_id": 34536782, "comment_id": 56816527, "body": "Correct - but not a solution for OP"}], "tags": [], "owner": {"reputation": 181, "user_id": 1203737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c80f1479c270cb678adc4ed79e28fad?s=128&d=identicon&r=PG", "display_name": "Nick Ligerakis", "link": "https://stackoverflow.com/users/1203737/nick-ligerakis"}, "is_accepted": false, "score": -1, "last_activity_date": 1451507371, "creation_date": 1451507371, "answer_id": 34536782, "question_id": 34536307, "link": "https://stackoverflow.com/questions/34536307/derived-class-with-extra-private-attributes/34536782#34536782", "title": "Derived class with extra private attributes", "body": "<p>To make the problem line work, you may use a dynamic cast:</p>\n\n<pre><code>Derived DobjectC = *(dynamic_cast&lt;Derived*&gt;(pBaseA)) + *(dynamic_cast&lt;Derived*&gt;(pBaseB));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1451510917, "post_id": 34537414, "comment_id": 56817104, "body": "Nice.. but as you point out yourself, the meaning of <code>TypeA + TypeB</code> is a problem. It makes no sense. Trying to gather incompatible types with operations as <code>+</code>/<code>Add</code>is a design mistake."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1451511426, "post_id": 34537414, "comment_id": 56817311, "body": "No, it&#39;s not a design mistake - it&#39;s a problem that someone with domain knowledge (in other words, knows how to best figure out sparse matrices). The <code>Add</code> function will either have to convert the <code>rhs</code> to one that is compatible with itself, or use a virtual function to get the data into the relevant format for a row, column or cell, depending on what complexity on getting the data vs. time overhead is best."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1451512012, "post_id": 34537414, "comment_id": 56817563, "body": "Hmm... Okay.. Well, I must admit that it is a long time ago I took my master which included studies of sparse matrices for electrical engineering so things may have changed since then. Still, I&#39;m convinced that OP is on the wrong track."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1451513044, "post_id": 34537414, "comment_id": 56818043, "body": "Well, the above is the standard solution for &quot;I have several kinds of objects that are kind of similar, but not exactly compatible in all aspects&quot;. Whether it is actually right for this case or not, I&#39;m not sure. I know what a sparse matrix is, but I don&#39;t know enough to implement one effectively."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1451513098, "post_id": 34537414, "comment_id": 56818071, "body": "Of course, it&#39;s not a problem if both types are always the same, just that the whole thing supports several variants."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1451514157, "post_id": 34537414, "comment_id": 56818554, "body": "I won&#39;t claim that there are no situation where incompatible types may be well-formed for polymorphism. I still have to see it though - but then again, I still have a lot to learn :-)  And I do like your approach for it (+1). Anyway, let&#39;s leave it here before we use comments for something that should be in a chat."}, {"owner": {"reputation": 366, "user_id": 2025319, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/db662306a7237c0f0b2869d317e8b2cb?s=128&d=identicon&r=PG", "display_name": "Msegade", "link": "https://stackoverflow.com/users/2025319/msegade"}, "edited": false, "score": 0, "creation_date": 1451518524, "post_id": 34537414, "comment_id": 56820097, "body": "Thanks, I think this is the correct approach, but I&#39;m having trouble understanding it. I get that the implementation is separated from the interface, but do I declare the common private variables in ThingInterface and the particular ones in ThingTypeA, ThingTypeB?"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 1, "creation_date": 1451518716, "post_id": 34537414, "comment_id": 56820147, "body": "Personally, I think interfaces should be &quot;pure&quot;, but you can have interfaces with member common variables. You could also have a <code>ThingBase : public ThingInterface</code> and then derive <code>ThingTypeA</code> and <code>ThingTypeB</code> from <code>ThingBase</code>."}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 2, "last_activity_date": 1451518170, "last_edit_date": 1451518170, "creation_date": 1451510440, "answer_id": 34537414, "question_id": 34536307, "link": "https://stackoverflow.com/questions/34536307/derived-class-with-extra-private-attributes/34537414#34537414", "title": "Derived class with extra private attributes", "body": "<p>The key here is to hide the type of actual object behind the scenes, such that it can be operated on in a meaningful way without knowin the actual type. </p>\n\n<p>We need some way to identify what type of \"thing\" we actually have:</p>\n\n<pre><code>enum ThingType { TypeA, TypeB } ;\n</code></pre>\n\n<p>We need a class that is an interface:</p>\n\n<pre><code>class ThingInterface\n{\npublic:\n   /* Type of the object */\n   virtual ThingType Type() = 0;\n   /* Make a copy of ourselves */\n   virtual ThingInterface* Clone() = 0;\n   /* Add rhs to this */\n   virtual void Add(ThingInterface *rhs) = 0;\n   virtual ~ThingInterface();\n};\n</code></pre>\n\n<p>Then we need a class that supports our actual operations:</p>\n\n<pre><code>class Thing\n{\npublic:\n   /* Create empty object */\n   Thing(ThingType type) { ... }\n   /* Create copy of existing object */\n   Thing(ThingInterface* rhs)\n   {\n       pImpl = rhs-&gt;Clone();\n   }\n\n   Thing operator+(const Thing&amp; rhs)\n   {\n       Thing result(pImpl);\n       result.pImpl-&gt;Add(rhs.pImpl);\n       return result;\n   }\nprivate:\n   ThingInterface *pImpl;\n};\n</code></pre>\n\n<p>And now we can implement some class to do the different types of thing:</p>\n\n<pre><code>class ThingTypeA: public ThingInterface\n{\npublic:\n    ThingTypeA() { ... };\n    ThingType Type() { return TypeA; }\n    void Clone(ThingInterface *rhs) { ... }\n    void Add(ThingInterface *rhs) { ... }\n};\n\n\nclass ThingTypeB: public ThingInterface\n{\npublic:\n    ThingTypeA() { ... };\n    ThingType Type() { return TypeB; }\n    void Clone(ThingInterface *rhs) { ... }\n    void Add(ThingInterface *rhs) { ... }\n};\n</code></pre>\n\n<p>Obviously, for a matrix implementation, you would need to have some general purpose \"get me content of cell X, Y\" that is implemented in both <code>ThingTypeA</code> and <code>ThingTypeB</code> - and maybe also something more clever when it comes to figuring out what type the result matrix should be for <code>TypeA + TypeB</code>, etc.</p>\n"}], "owner": {"reputation": 366, "user_id": 2025319, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/db662306a7237c0f0b2869d317e8b2cb?s=128&d=identicon&r=PG", "display_name": "Msegade", "link": "https://stackoverflow.com/users/2025319/msegade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 1, "accepted_answer_id": 34537414, "answer_count": 2, "score": 1, "last_activity_date": 1451518170, "creation_date": 1451505232, "question_id": 34536307, "link": "https://stackoverflow.com/questions/34536307/derived-class-with-extra-private-attributes", "title": "Derived class with extra private attributes", "body": "<p>I want to implement some hierarchy of classes with polymorphism and I can't make it to work.\nI have two problems:</p>\n\n<ol>\n<li>The Derived class has extra private variables</li>\n<li>The methods of the derived class take as argument an object of the derived class and return an object of the derived class.</li>\n</ol>\n\n<p>I can make this code work, but in a non-polymorphic way. This is the simplified version:</p>\n\n<pre><code>class Base\n{\nprotected:\n    int mInt;\npublic: \n    Base(int iValue) : mInt(iValue) {}\n    virtual Base operator+(const Base otherBase)\n    {\n        Base result( otherBase.mInt + mInt);\n        return result;\n    }\n\n};\n\nclass Derived : public Base\n{\nprivate:\n    double mDouble;\npublic:\n    Derived(int iValue, double dValue) : Base(iValue) \n   {\n        mDouble = dValue;\n   }\n   Derived operator+(const Derived otherDerived)\n   {\n        Derived result(otherDerived.mInt + mInt,\n                       otherDerived.mDouble + mDouble);\n        return result;\n   }\n\n};\n\nint main()\n{\n\n    Derived DobjectA(2,6.3);\n    Derived DobjectB(5,3.1);\n    Base* pBaseA = &amp;DobjectA;\n    Base* pBaseB = &amp;DobjectB;\n    // This does not work\n    Derived DobjectC = (*pBaseA)+(*pBaseB);\n\n}\n</code></pre>\n\n<p>How can I design the classes to make this work?</p>\n"}, {"tags": ["c++", "pointers", "casting", "constants", "nullptr"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1451505095, "post_id": 34536203, "comment_id": 56814182, "body": "And then, I call <code>doSomething(&quot;hello&quot;, &quot;world!&quot;)[0] = &#39;X&#39;;</code> and boom! SIGSEGV. (the answer is no, you&#39;ll have to <code>strncpy()</code> those strings."}, {"owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "edited": false, "score": 0, "creation_date": 1451505252, "post_id": 34536203, "comment_id": 56814254, "body": "If you don&#39;t want to allow someone using this function to manipulate the value that the constant parameters are pointing to return by <code>const char* </code> or return <i>by value</i>. The function performs implicit <code>const_cast</code> conversion."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1451505816, "post_id": 34536203, "comment_id": 56814530, "body": "Do you mean that you want to return a mutable copy of the string? Otherwise, why don&#39;t you just return a <code>const char*</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1451549856, "post_id": 34536287, "comment_id": 56828327, "body": "I&#39;d contend that not only <i>normally</i> but <i>always</i> the <code>const_cast</code> is just fine. It never results in UB. <i>Writing to the object</i> (not reading!) through the resulting pointer may result in UB under certain circumstances. One of them (the only one?) is that the object is in read-only memory, like a character string literal in modern implementations. But that&#39;s rather rare; the more common case is that a parameter has been declared const to indicate the function&#39;s intent not to change it, but that function calls another one which didn&#39;t declare its param const so that it must be cast."}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1451550576, "post_id": 34536287, "comment_id": 56828543, "body": "@PeterA.Schneider Sure, but in the general case you can&#39;t tell whether or not that now non-<code>const</code> will be written to or not.  And UB is UB regardless of read-only memory or otherwise."}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1451553892, "post_id": 34536287, "comment_id": 56829758, "body": "@PeterA.Schneider Except for modifying a const object through a non-const access path and referring to a volatile object through a non-volatile glvalue results in undefined behavior.   But I get your point.  I should have emphasized run time errors instead.  And the function is returning this value so where is the guarantee that there&#39;s only read only behavior?"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1451555987, "post_id": 34536287, "comment_id": 56830703, "body": "You say &quot;casts away const to the area of memory you declared to be immutable. Which normally results  in the dreaded Undefined Behavior&quot;. That is plain wrong. The casting (and read access) is fine. Writing may be UB, or not."}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1451557017, "post_id": 34536287, "comment_id": 56831205, "body": "@PeterA.Schneider The &quot;normally results in&quot; bit was not meant to mean as an &quot;immediate consequence&quot; but as a &quot;subsequent consequence&quot;. You&#39;re might just be starting to be a tad pedantic here.  You. Are. Totally.  Correct.  Casting isn&#39;t a problem. Returning what was once a <code>const</code> as a non-<code>const</code> into the wild <i>is</i>."}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": true, "score": 6, "last_activity_date": 1451512160, "last_edit_date": 1451512160, "creation_date": 1451505134, "answer_id": 34536287, "question_id": 34536203, "link": "https://stackoverflow.com/questions/34536203/c-const-char-to-char/34536287#34536287", "title": "c++ const char* to char*", "body": "<p>No it doesn't make any new object it simple casts away <code>const</code> to the area of memory you declared to be immutable.  Which <em>normally</em> results in the dreaded Undefined Behavior but if they come from non-<code>const</code> pointer you'll be ok (EDIT - thanks to @anatolyg).</p>\n"}, {"comments": [{"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1451556699, "post_id": 34536328, "comment_id": 56831043, "body": "To be nitpicking here, too: The behaviour on casting away the const is <i>never</i> undefined. It always results in a valid pointer to the original object. &quot;Valid&quot; means that e.g. that address value will not trap if put in a register. Since it points to the original object, that object can always be read from without UB. The only thing which is UB is <i>writing</i> to such an object if it is indeed in read-only memory (like a string literal in modern implementations). Reading from such a literal through a non-const pointer is perfectly fine though."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1451556820, "post_id": 34536328, "comment_id": 56831098, "body": "@PeterA.Schneider: Very true, I&#39;ve amended."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1451556807, "last_edit_date": 1451556807, "creation_date": 1451505313, "answer_id": 34536328, "question_id": 34536203, "link": "https://stackoverflow.com/questions/34536203/c-const-char-to-char/34536328#34536328", "title": "c++ const char* to char*", "body": "<p>No data copy is taken automatically.</p>\n\n<p>You must return a <code>const char*</code> too. The behaviour on casting away the <code>const</code> and attempting to modify the original character string through that pointer is undefined if the original data were originally <code>const</code>: such as a string literal.</p>\n\n<p>Take a deep copy outside the function if you need a <code>char*</code> pointer.</p>\n\n<p>Better still, bin all this and pass <code>std::string</code> either by <code>const</code> pointer if <code>nullptr</code> is still allowed or by <code>const</code> reference if it isn't.</p>\n"}, {"tags": [], "owner": {"reputation": 878, "user_id": 4247443, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sfQeY.jpg?s=128&g=1", "display_name": "Pustovalov Dmitry", "link": "https://stackoverflow.com/users/4247443/pustovalov-dmitry"}, "is_accepted": false, "score": 0, "last_activity_date": 1451505351, "creation_date": 1451505351, "answer_id": 34536336, "question_id": 34536203, "link": "https://stackoverflow.com/questions/34536203/c-const-char-to-char/34536336#34536336", "title": "c++ const char* to char*", "body": "<p>You are possibly returning pointer to first or second param so the caller of your function can modify the data which it points to. You are technically returning new pointer (copy of it) but because of pointer nature caller can modify data with it. </p>\n\n<p>If it is bad for you can return const char *, so caller can't modify it or don't return it at all.</p>\n\n<p>Boolean variable can make your code more clear and avoid code duplication.</p>\n"}, {"tags": [], "owner": {"reputation": 1432, "user_id": 3376221, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HtLLX.jpg?s=128&g=1", "display_name": "Luke Melaia", "link": "https://stackoverflow.com/users/3376221/luke-melaia"}, "is_accepted": false, "score": 0, "last_activity_date": 1451505717, "creation_date": 1451505717, "answer_id": 34536421, "question_id": 34536203, "link": "https://stackoverflow.com/questions/34536203/c-const-char-to-char/34536421#34536421", "title": "c++ const char* to char*", "body": "<p>Casting a value will not copy it. If you want to copy it you will have to pass by value, passing by pointer or reference will allow the user to manipulate the returned value (unless it's <code>const</code>).</p>\n\n<p>I don't see why you're worried about the user manipulating the parameters as they are effectively constant.</p>\n\n<p>And as for the null checks, using a <code>bool</code> is unnecessary. Null checks are cheap to use (performance wise).</p>\n"}, {"tags": [], "owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1451843021, "last_edit_date": 1451843021, "creation_date": 1451506160, "answer_id": 34536531, "question_id": 34536203, "link": "https://stackoverflow.com/questions/34536203/c-const-char-to-char/34536531#34536531", "title": "c++ const char* to char*", "body": "<p>The 2011 standard says (5.2.11/3):</p>\n\n<blockquote>\n  <p>The result of a pointer const_cast refers to the original object.</p>\n</blockquote>\n\n<p>That is pretty straightforward and answers your original question.</p>\n\n<p>It also says (5.2.11/7):</p>\n\n<blockquote>\n  <p>[ Note: Depending on the type of the object, a write operation through\n  the pointer, lvalue or pointer to data member resulting from a\n  const_cast that casts away a const-qualifier may produce undefined\n  behavior (7.1.6.1). \u2014end note ]</p>\n</blockquote>\n\n<p>This means that it is sometimes ok to even write to the object through the new pointer. Examples where it isn't ok are pointers to objects which reside in read-only memory. This has bitten people using pointers to string literals, and happens frequently with constants in embedded systems. The cast itself is, as far as I can see, never undefined behaviour.</p>\n\n<p>Concerning your code review question: </p>\n\n<ul>\n<li>As the others said, by all means return a const char.</li>\n<li>Does the caller do anything with the result? If not, return a bool indicating success or failure, or an int for several failure modes.</li>\n<li>If the caller uses the returned char pointer, what do you return to indicate success? The three possible error cases use up the immediately available return values. Consider returning an error code and passing the actual char pointer result in an \"out parameter\" (a pointer to a char pointer).</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1451506740, "last_edit_date": 1451506740, "creation_date": 1451506325, "answer_id": 34536567, "question_id": 34536203, "link": "https://stackoverflow.com/questions/34536203/c-const-char-to-char/34536567#34536567", "title": "c++ const char* to char*", "body": "<p>I would use one boolean flag to avoid code duplicate and make it less prone:</p>\n\n<pre><code>bool secondIsEmpty = second == nullptr || *second == '\\0';\nif( first == nullptr || *first == '\\0' )\n    return secondIsEmpty ? nullptr : second;\nelse\n    if( secondIsEmpty )\n        return first;\n</code></pre>\n\n<p>For <code>char *</code>, you should change return type to <code>const char *</code> and remove C cast from your code (you should use const_cast&lt;> instead anyway). If you do need to return mutable string from that function that makes it more complicated. You either have to accept mutable strings as parameters, or create buffer somewhere. In that case you probably should return smart pointer to string, allocated by <code>new</code> or even better use <code>std::string</code> and return it by value.</p>\n"}, {"tags": [], "owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "is_accepted": false, "score": 0, "last_activity_date": 1451511999, "creation_date": 1451511999, "answer_id": 34537736, "question_id": 34536203, "link": "https://stackoverflow.com/questions/34536203/c-const-char-to-char/34537736#34537736", "title": "c++ const char* to char*", "body": "<p>(This answer is mainly about a side-question on how to make the code better)</p>\n\n<p>As people here noted, you probably want to return <code>const char*</code>:</p>\n\n<pre><code>const char *doSomething(const char* first, const char* second)\n{\n    ...\n}\n</code></pre>\n\n<p>This will let you get rid of casts:</p>\n\n<pre><code>const char *doSomething(const char* first, const char* second)\n{\n    if (...)\n    {\n        return nullptr;\n    }\n    else if (...)\n    {\n        return second;\n    }\n    else if (...)\n    {\n        return first;\n    }\n}\n</code></pre>\n\n<p>Your code's idea is roughly:</p>\n\n<blockquote>\n  <p>Find and return the non-empty string, with preference to <code>second</code> one; if there is none, return <code>nullptr</code>.</p>\n</blockquote>\n\n<p>It may be more easily represented like this:</p>\n\n<pre><code>const char *FindNonEmpty(const char* first, const char* second)\n{\n    if (second &amp;&amp; *second)\n        return second;\n    else if (first &amp;&amp; *first)\n        return first;\n    else\n        return nullptr;\n}\n</code></pre>\n\n<p>I used pointers and bytes here in boolean context. This is a matter of taste; you probably want to use explicit comparisons; however, some people argue that using a pointer as a boolean is more readable than comparing it to <code>nullptr</code>.</p>\n"}], "owner": {"reputation": 1068, "user_id": 1553248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8054563157b7034019f5d882023dd2f6?s=128&d=identicon&r=PG", "display_name": "user1553248", "link": "https://stackoverflow.com/users/1553248/user1553248"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2870, "favorite_count": 0, "accepted_answer_id": 34536287, "answer_count": 7, "score": 3, "last_activity_date": 1451843021, "creation_date": 1451504870, "last_edit_date": 1451505094, "question_id": 34536203, "link": "https://stackoverflow.com/questions/34536203/c-const-char-to-char", "title": "c++ const char* to char*", "body": "<p>I have the following function which initially performs some validation on function parameters.</p>\n\n<pre><code>char *doSomething(const char* first, const char* second) {\n\n    if((first == nullptr || *first == '\\0') &amp;&amp; (second == nullptr || *second == '\\0')) {\n        return nullptr;\n    } else if (first == nullptr || *first == '\\0') {\n        return (char *) second;\n    } else if (second == nullptr || *second == '\\0') {\n        return (char *) first;\n    }\n    //doSomething\n}\n</code></pre>\n\n<p>Does casting the function parameter return a new <code>char*</code> that points to a different area in memory? I don't want to allow someone using this function to manipulate the value that the constant parameters are pointing to. I would like a new <code>char*</code> to be returned with the same value as one of the parameters if one is <code>nullptr</code> or empty.</p>\n\n<p>Follow-up: Would a boolean variable be better here? I realize I'm performing the same check for each variable twice, but I wouldn't be utilizing this boolean anywhere else in this function's code.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 2533, "user_id": 2925287, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/821554321/picture?type=large", "display_name": "Pierre Emmanuel Lallemant", "link": "https://stackoverflow.com/users/2925287/pierre-emmanuel-lallemant"}, "edited": false, "score": 0, "creation_date": 1451504681, "post_id": 34536130, "comment_id": 56813982, "body": "We need more details: what do we do when we have &#39;13:31:31&#39; ? we do &#39;26:62:62&#39; ?"}, {"owner": {"reputation": 3, "user_id": 5731929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f253474b98e59b6944f17a36c4107b0c?s=128&d=identicon&r=PG&f=1", "display_name": "John Alexandropoulos", "link": "https://stackoverflow.com/users/5731929/john-alexandropoulos"}, "reply_to_user": {"reputation": 2533, "user_id": 2925287, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/821554321/picture?type=large", "display_name": "Pierre Emmanuel Lallemant", "link": "https://stackoverflow.com/users/2925287/pierre-emmanuel-lallemant"}, "edited": false, "score": 0, "creation_date": 1451504823, "post_id": 34536130, "comment_id": 56814048, "body": "I already have that part sorted out (it works the way I want with iostream), my only issue is the input from txt."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1451504985, "post_id": 34536130, "comment_id": 56814121, "body": "<code>stream::get</code> perhaps?"}, {"owner": {"reputation": 2533, "user_id": 2925287, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/821554321/picture?type=large", "display_name": "Pierre Emmanuel Lallemant", "link": "https://stackoverflow.com/users/2925287/pierre-emmanuel-lallemant"}, "edited": false, "score": 0, "creation_date": 1451505032, "post_id": 34536130, "comment_id": 56814139, "body": "You open 2 times the file with 2 different ways. If you use FILE * fin, you could do <code>fread(&#39;%2d:%2d:%2d&#39;, &amp;hour, &amp;min, &amp;sec);</code>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1451505034, "post_id": 34536130, "comment_id": 56814142, "body": "What does it even mean to &quot;double a time&quot;? Are you sure you want this?"}, {"owner": {"reputation": 3, "user_id": 5731929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f253474b98e59b6944f17a36c4107b0c?s=128&d=identicon&r=PG&f=1", "display_name": "John Alexandropoulos", "link": "https://stackoverflow.com/users/5731929/john-alexandropoulos"}, "edited": false, "score": 0, "creation_date": 1451505060, "post_id": 34536130, "comment_id": 56814157, "body": "Basically we are talking about a time duration, not a time of the day. So in your case 13:31:31 would become 27:03:02. However, that part is not problematic in my code, I am only perplexed by the input not working properly."}, {"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 0, "creation_date": 1451505124, "post_id": 34536130, "comment_id": 56814199, "body": "If your problem isn&#39;t about some calculation, you should leave the calculation out and give your question a more accurate description and title."}, {"owner": {"reputation": 3, "user_id": 5731929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f253474b98e59b6944f17a36c4107b0c?s=128&d=identicon&r=PG&f=1", "display_name": "John Alexandropoulos", "link": "https://stackoverflow.com/users/5731929/john-alexandropoulos"}, "reply_to_user": {"reputation": 2533, "user_id": 2925287, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/821554321/picture?type=large", "display_name": "Pierre Emmanuel Lallemant", "link": "https://stackoverflow.com/users/2925287/pierre-emmanuel-lallemant"}, "edited": false, "score": 0, "creation_date": 1451505172, "post_id": 34536130, "comment_id": 56814219, "body": "@PierreEmmanuelLallemant Could you please elaborate? Should I erase lines 14 - 21 and replace them with what you suggested?"}, {"owner": {"reputation": 3, "user_id": 5731929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f253474b98e59b6944f17a36c4107b0c?s=128&d=identicon&r=PG&f=1", "display_name": "John Alexandropoulos", "link": "https://stackoverflow.com/users/5731929/john-alexandropoulos"}, "reply_to_user": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 0, "creation_date": 1451505265, "post_id": 34536130, "comment_id": 56814264, "body": "@stefan the task is what I wrote in the description. When I said in the comment that that was not my problem, I meant that I have that part of the problem sorted out, and the reason why it&#39;s not working properly is because there is a problem with the input from a file."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1451505309, "post_id": 34536130, "comment_id": 56814284, "body": "You want an output like <code>24:44:06</code> for an input of <code>12:22:03</code>? Or should we constrain times to valid times on Earth?"}, {"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 0, "creation_date": 1451505349, "post_id": 34536130, "comment_id": 56814312, "body": "@JohnAlexandropoulos On stackoverflow, you should not post your task/assignment but rather the specific problem you have. Your problem, as you say, is with input. So please, make a question about input, not about calculation."}, {"owner": {"reputation": 3, "user_id": 5731929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f253474b98e59b6944f17a36c4107b0c?s=128&d=identicon&r=PG&f=1", "display_name": "John Alexandropoulos", "link": "https://stackoverflow.com/users/5731929/john-alexandropoulos"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1451505457, "post_id": 34536130, "comment_id": 56814368, "body": "@AndyG As I said, we are talking about a time duration and not a time of the day (a.k.a. what a clock would indicate). Still, that is not what is not working in my code. The multiplication works just fine. What I want to know is how to skip the &quot;:&quot; character."}, {"owner": {"reputation": 3, "user_id": 5731929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f253474b98e59b6944f17a36c4107b0c?s=128&d=identicon&r=PG&f=1", "display_name": "John Alexandropoulos", "link": "https://stackoverflow.com/users/5731929/john-alexandropoulos"}, "reply_to_user": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 3, "creation_date": 1451505523, "post_id": 34536130, "comment_id": 56814398, "body": "@Stefan Perhaps I should make a new and more clear question, then. Thanks for the feedback."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1451506173, "post_id": 34536130, "comment_id": 56814686, "body": "Time is not a vector. You cannot &quot;double&quot; it. Only the <i>differences</i> of times, i.e. <i>durations</i> are vectors."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1451506650, "post_id": 34536130, "comment_id": 56814922, "body": "@KerrekSB:  However, time and duration can be modeled in the same way.  Both have hours, minutes and seconds.  Maybe this is where some of the confusion is."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1451507004, "post_id": 34536130, "comment_id": 56815097, "body": "@ThomasMatthews: Time is an affine space modeled on durations. Time isn&#39;t hours and minutes -- it&#39;s hours and minutes <i>since</i> some reference point (e.g. midnight)."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5731929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f253474b98e59b6944f17a36c4107b0c?s=128&d=identicon&r=PG&f=1", "display_name": "John Alexandropoulos", "link": "https://stackoverflow.com/users/5731929/john-alexandropoulos"}, "edited": false, "score": 0, "creation_date": 1451506708, "post_id": 34536404, "comment_id": 56814955, "body": "Thank you! This fixed it!"}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 0, "last_activity_date": 1451505656, "creation_date": 1451505656, "answer_id": 34536404, "question_id": 34536130, "link": "https://stackoverflow.com/questions/34536130/how-can-i-double-a-time-value-in-c/34536404#34536404", "title": "How can I double a time value in C++", "body": "<p>Use ONE of the file-handling routines in C++ or C. Mixing <code>FILE</code> and <code>ifstream</code> is certain to cause problems.</p>\n\n<pre><code>ifstream input;\ninput.open(\"time.in\");\ninput&gt;&gt; hrs;\ninput.get();\n...\n</code></pre>\n\n<p>should do the trick. \nIf you want to be picky:</p>\n\n<pre><code>if (input.get() != ':') ... complain about bad input ... \n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5731929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f253474b98e59b6944f17a36c4107b0c?s=128&d=identicon&r=PG&f=1", "display_name": "John Alexandropoulos", "link": "https://stackoverflow.com/users/5731929/john-alexandropoulos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "closed_date": 1451529693, "accepted_answer_id": 34536404, "answer_count": 1, "score": -5, "last_activity_date": 1451505656, "creation_date": 1451504582, "last_edit_date": 1451504694, "question_id": 34536130, "link": "https://stackoverflow.com/questions/34536130/how-can-i-double-a-time-value-in-c", "closed_reason": "Needs details or clarity", "title": "How can I double a time value in C++", "body": "<p>The task is to double a time from the txt file \"time.in\" in the format of HH:MM:SS (e.g. 12:22:03) and to output it in the same format (e.g. 24:44:06) in \"time.out\". I am having trouble skipping the \":\" character in the input. Here's my code:</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;cmath&gt;\n#include &lt;stdio.h&gt;\nusing namespace std;\n\nint main() {\nFILE *fin = fopen(\"time.in\", \"r\");\nFILE *fout = fopen(\"time.out\", \"w\");\nchar c;\ndouble hrs, mins, secs;\ndouble fhrs = 0, fmins = 0, fsecs = 0;\n\nifstream input;\ninput.open(\"time.in\");\ninput&gt;&gt; hrs;\nc = fgetc(fin); //what should this be? I can't get it to work properly.\ninput&gt;&gt; mins;\nc = fgetc(fin);\ninput&gt;&gt; secs;\ninput.close();\n\nfhrs = hrs * 2;\nif (secs &lt; 30) {\n    fsecs = secs * 2;\n    if (mins &lt; 30)\n        fmins = mins * 2;\n    else {\n        fmins = abs(60 - (mins * 2));\n        fhrs++;\n    }\n} else {\n    fsecs = abs(60 - (secs * 2));\n    fmins++;\n    if (mins &lt; 30)\n        fmins += mins * 2;\n    else {\n        fmins += abs(60 - (mins * 2));\n        fhrs++;\n    }\n}\n\nofstream output;\noutput.open(\"time.out\");\noutput &lt;&lt; fhrs &lt;&lt;\":\"&lt;&lt; fmins &lt;&lt;\":\"&lt;&lt; fsecs &lt;&lt;endl;\noutput.close();\n\nreturn 0;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "opencv", "image-processing", "computer-vision"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 1, "creation_date": 1451507360, "post_id": 34536124, "comment_id": 56815297, "body": "Please post an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, because this snippet works ok. Also note that is in general a bad idea to use pointers to <code>Mat</code>, since you&#39;re likely to broke internal reference counting system"}, {"owner": {"reputation": 57, "user_id": 5634963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcba2e3aeb17d159c186491f0260d4c0?s=128&d=identicon&r=PG&f=1", "display_name": "D4KU", "link": "https://stackoverflow.com/users/5634963/d4ku"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1451510204, "post_id": 34536124, "comment_id": 56816773, "body": "Since I have absolutely no idea where this error comes from, it&#39;s hard for me to post just the code snippets that matter, but I added some that might help. When using pointer is a bad idea, how would you implement a similar structure?"}, {"owner": {"reputation": 35699, "user_id": 2056772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/574eff69e66401997eecd2ac405053c1?s=128&d=identicon&r=PG", "display_name": "berak", "link": "https://stackoverflow.com/users/2056772/berak"}, "edited": false, "score": 1, "creation_date": 1451533152, "post_id": 34536124, "comment_id": 56823389, "body": "welcome to row,col land !! <code>new Mat_&lt;float&gt;(height, width);</code>"}], "owner": {"reputation": 57, "user_id": 5634963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcba2e3aeb17d159c186491f0260d4c0?s=128&d=identicon&r=PG&f=1", "display_name": "D4KU", "link": "https://stackoverflow.com/users/5634963/d4ku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 788, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1451509860, "creation_date": 1451504540, "last_edit_date": 1495542683, "question_id": 34536124, "link": "https://stackoverflow.com/questions/34536124/opencv-cv-elem-size1datatype-tpdepth-elemsize1", "title": "OpenCV CV_ELEM_SIZE1(DataType&lt;_Tp&gt;::depth) == elemSize1()", "body": "<p>Similar to <a href=\"https://stackoverflow.com/questions/20217044/opencv-error-assertion-failed-mat-cpp-line-537\">this question</a>, my program has a pointer structure to store a 2D array of images as follows </p>\n\n<pre><code>Mat*** scaleSpace;\nscaleSpace = new Mat**[numOctaves];\nscaleSpace[i] = new Mat*[numIntervals];\nscaleSpace[i][j] = new Mat_&lt;float&gt;(width, height);\nMat* middle = scaleSpace[i][j];\nfloat currentPixel = middle-&gt;at&lt;float&gt;(yi, xi);\n</code></pre>\n\n<p>openCV fires this assert when running the last code line from above.</p>\n\n<pre><code>CV_DbgAssert( dims &lt;= 2 &amp;&amp; data &amp;&amp; (unsigned)i0 &lt; (unsigned)size.p[0] &amp;&amp;\n        (unsigned)(i1 * DataType&lt;_Tp&gt;::channels) &lt; (unsigned)(size.p[1] * channels()) &amp;&amp;\n        CV_ELEM_SIZE1(DataType&lt;_Tp&gt;::depth) == elemSize1());\n</code></pre>\n\n<p>I found out that the problem is the last expression. All others are <code>true</code>.</p>\n\n<p><code>CV_ELEM_SIZE1(DataType&lt;_Tp&gt;::depth)</code> is 4</p>\n\n<p><code>elemSize1()</code> is 1</p>\n\n<p>What are these two values and how do I have to change my program so that both have the same value? Is it a problem that I use float images with only a single channel? Writing this image works perfectly.</p>\n\n<pre><code>imwrite(filename, *middle);\n</code></pre>\n"}, {"tags": ["python", "c++", "pointers", "boost-python", "ros"], "answers": [{"tags": [], "owner": {"reputation": 1411, "user_id": 5805330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26778c360fbb08f6d7d1b10ebaabd015?s=128&d=identicon&r=PG&f=1", "display_name": "cromod", "link": "https://stackoverflow.com/users/5805330/cromod"}, "is_accepted": false, "score": 0, "last_activity_date": 1454239549, "creation_date": 1454239549, "answer_id": 35113288, "question_id": 34536076, "link": "https://stackoverflow.com/questions/34536076/how-to-send-pointer-input-to-c-program-using-python/35113288#35113288", "title": "How to send pointer input to c++ program using python?", "body": "<p>In your case, you try a wrong conversion between an <code>int</code> to a <code>shared_ptr</code>:</p>\n\n<pre><code>EnvironmentBasePtr penv = reinterpret_cast&lt;int *&gt;(i); // wrong conversion\n// where EnvironmentBasePtr is boost::shared_ptr&lt;EnvironmentBase&gt;\n</code></pre>\n\n<p>For this conversion I suggest using a constructor of <code>shared_ptr</code> and <code>a null deleter</code>. I see 3 possible solutions.</p>\n\n<p>You can define your <strong>own null deleter</strong> <code>void deleter(void* ptr) {}</code> then  :</p>\n\n<pre><code>boost::shared_ptr&lt;EnvironmentBase&gt; penv(reinterpret_cast&lt;EnvironmentBase *&gt;(i),&amp;deleter);\n</code></pre>\n\n<p>If your <strong>boost is 1.55 or less</strong>, you can include <code>&lt;boost/serialization/shared_ptr.hpp&gt;</code> then :</p>\n\n<pre><code>boost::shared_ptr&lt;EnvironmentBase&gt; penv(reinterpret_cast&lt;EnvironmentBase *&gt;(i),boost::serialization::null_deleter());\n</code></pre>\n\n<p>If your <strong>boost is 1.56 or more</strong>, you can include <code>&lt;boost/core/null_deleter.hpp&gt;</code> then :</p>\n\n<pre><code>boost::shared_ptr&lt;EnvironmentBase&gt; penv(reinterpret_cast&lt;EnvironmentBase *&gt;(i),boost:null_deleter());\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4298033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/951526e4c339a63c560ff33394e77b02?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Milind Dixit", "link": "https://stackoverflow.com/users/4298033/saurabh-milind-dixit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1454239549, "creation_date": 1451504295, "question_id": 34536076, "link": "https://stackoverflow.com/questions/34536076/how-to-send-pointer-input-to-c-program-using-python", "title": "How to send pointer input to c++ program using python?", "body": "<p>I have a function in c++ that returns vector. I am using BOOST_PYTHON_MODULE to call it from python. I want to send a pointer as input to the c++ function. I was trying to send the pointer as string. I know this is the worst method but some people are using it and it is working fine. For my case it isn't working. I am new in c++.</p>\n\n<p>Working case:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string.h&gt;\n#include &lt;sstream&gt;\nusing namespace std;\n\nint main(){\n    string s1 = \"0x7fff3e8aee1c\";\n    stringstream ss;\n    ss &lt;&lt; s1;\n    cout &lt;&lt; \"ss : \" &lt;&lt; ss &lt;&lt; endl;\n    long long unsigned int i;\n    ss &gt;&gt; hex &gt;&gt; i;\n    cout &lt;&lt; \"i : \" &lt;&lt; i &lt;&lt; endl;\n    int *i_ptr=reinterpret_cast&lt;int *&gt;(i);\n    cout &lt;&lt; \"pointer: \" &lt;&lt; i_ptr &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>My case:</p>\n\n<pre><code>#include \"openrave-core.h\"\n#include \"ros/ros.h\"\n#include \"std_msgs/String.h\"\n#include \"valid_grasp_generator/GraspSnapshot.h\"\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;boost/python.hpp&gt;\n#include &lt;sstream&gt;\nusing namespace OpenRAVE;\nusing namespace std;\n\nboost::python::list get_penetration_depth(string env)\n{\n    vector&lt;double&gt; vec(9,0);\n    stringstream ss(env);\n    long long unsigned int i;\n    ss &gt;&gt; hex &gt;&gt; i;\n    EnvironmentBasePtr penv = reinterpret_cast&lt;int *&gt;(i);\n\n\n    //code for getting penetration value from the openrave\n\n    typename std::vector&lt;double&gt;::iterator iter;\n    boost::python::list list;\n    for (iter = vec.begin(); iter != vec.end(); ++iter) {\n        list.append(*iter);\n    }\n    return list;\n}\n\nBOOST_PYTHON_MODULE(libdepth_penetration){\n    using namespace boost::python;\n    def(\"get_penetration\", get_penetration_depth);\n}\n</code></pre>\n\n<p>Error during catkin_make:</p>\n\n<pre><code>/home/saurabh/catkin_ws/src/valid_grasp_generator/src/depth_penetration.cpp: In function \u2018boost::python::list get_penetration_depth(std::string)\u2019:\n/home/saurabh/catkin_ws/src/valid_grasp_generator/src/depth_penetration.cpp:37:56: error: conversion from \u2018int*\u2019 to non-scalar type \u2018OpenRAVE::EnvironmentBasePtr {aka boost::shared_ptr&lt;OpenRAVE::EnvironmentBase&gt;}\u2019 requested\n     EnvironmentBasePtr penv = reinterpret_cast&lt;int *&gt;(i);\n                                                        ^\nmake[2]: *** [valid_grasp_generator/CMakeFiles/depth_penetration.dir/src/depth_penetration.cpp.o] Error 1\nmake[1]: *** [valid_grasp_generator/CMakeFiles/depth_penetration.dir/all] Error 2\nmake: *** [all] Error 2\nInvoking \"make -j8 -l8\" failed\n</code></pre>\n"}, {"tags": ["c++", "vector", "shared-ptr"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 4, "creation_date": 1451504107, "post_id": 34536004, "comment_id": 56813724, "body": "You erase <i>iterators</i>, not the value itself."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1451506734, "post_id": 34536004, "comment_id": 56814974, "body": "Using a vector for your registry could get expensive; as written, registering N items takes <code>O(N^2)</code> time. On the other hand, the inner loop is fast and the storage overhead minimal. Still, if you expected <code>N</code> to be big, you might want to think about a <code>std::unordered_set</code> instead."}], "answers": [{"tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": false, "score": 2, "last_activity_date": 1451504140, "creation_date": 1451504140, "answer_id": 34536040, "question_id": 34536004, "link": "https://stackoverflow.com/questions/34536004/how-to-erase-an-element-from-a-vectorshared-ptr/34536040#34536040", "title": "How to erase an element from a vector&lt;shared_ptr&gt;", "body": "<p>There are two declarations available. <a href=\"http://www.cplusplus.com/reference/vector/vector/erase/\" rel=\"nofollow\">From cppreference</a>:</p>\n\n<pre><code>iterator erase (const_iterator position);\niterator erase (const_iterator first, const_iterator last);\n</code></pre>\n\n<p>You try to <code>std::vector::erase</code> the item itsself instead of the iterator. Use</p>\n\n<pre><code>items.erase(position);\n</code></pre>\n\n<p>instead.</p>\n"}, {"comments": [{"owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "edited": false, "score": 0, "creation_date": 1451504290, "post_id": 34536057, "comment_id": 56813822, "body": "Thanks. This is my first time on erase."}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": true, "score": 6, "last_activity_date": 1451504190, "creation_date": 1451504190, "answer_id": 34536057, "question_id": 34536004, "link": "https://stackoverflow.com/questions/34536004/how-to-erase-an-element-from-a-vectorshared-ptr/34536057#34536057", "title": "How to erase an element from a vector&lt;shared_ptr&gt;", "body": "<p>Because you want to use an iterator into <code>items</code> (<em>i.e.</em> <code>position</code>), so:</p>\n\n<pre><code>items.erase(position);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 413, "user_id": 5683109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62c83659808b54d9596183ee00c4eb9b?s=128&d=identicon&r=PG&f=1", "display_name": "I3ck", "link": "https://stackoverflow.com/users/5683109/i3ck"}, "is_accepted": false, "score": 1, "last_activity_date": 1451504193, "creation_date": 1451504193, "answer_id": 34536059, "question_id": 34536004, "link": "https://stackoverflow.com/questions/34536004/how-to-erase-an-element-from-a-vectorshared-ptr/34536059#34536059", "title": "How to erase an element from a vector&lt;shared_ptr&gt;", "body": "<p>You have to call <code>erase</code> on <code>position</code>, not <code>item</code><br>\nsince erase is used on iterators</p>\n"}, {"tags": [], "owner": {"reputation": 878, "user_id": 4247443, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sfQeY.jpg?s=128&g=1", "display_name": "Pustovalov Dmitry", "link": "https://stackoverflow.com/users/4247443/pustovalov-dmitry"}, "is_accepted": false, "score": 0, "last_activity_date": 1451504353, "creation_date": 1451504353, "answer_id": 34536084, "question_id": 34536004, "link": "https://stackoverflow.com/questions/34536004/how-to-erase-an-element-from-a-vectorshared-ptr/34536084#34536084", "title": "How to erase an element from a vector&lt;shared_ptr&gt;", "body": "<p>You should pass  to erase iterator not a value, there is nothing special with deleting std::shared_ptr. Also you have mistype in code: you register item twice instead of unregister it in the second call.</p>\n"}], "owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2408, "favorite_count": 0, "accepted_answer_id": 34536057, "answer_count": 4, "score": 1, "last_activity_date": 1451504353, "creation_date": 1451503991, "last_edit_date": 1451504195, "question_id": 34536004, "link": "https://stackoverflow.com/questions/34536004/how-to-erase-an-element-from-a-vectorshared-ptr", "title": "How to erase an element from a vector&lt;shared_ptr&gt;", "body": "<p>I\u00b4m buiding a sort of a registry class using the following code:</p>\n\n<pre><code>class MyClass \n{\n    public:\n       int a;\n       std::string b;\n};\n\nclass Register\n{\n    public:\n        std::vector&lt;std::shared_ptr&lt;MyClass&gt;&gt; items;\n\n        bool registerItem(std::shared_ptr&lt;MyClass&gt; item)\n        {\n            /*\n             * Check if item exists\n             */\n            auto position = std::find(items.begin(), items.end(), item);\n\n            if (position != items.end())\n                return false;\n\n            items.push_back(item);\n\n            return true;\n        }\n\n         bool unregisterItem(std::shared_ptr&lt;MyClass&gt; item)\n        {\n            auto position = std::find(items.begin(), items.end(), item);\n\n            if (position == items.end())\n               return false;\n\n            items.erase(item);\n\n            return true;\n        }\n};\n\n\nint main()\n{\n    std::shared_ptr&lt;MyClass&gt; item1 = new MyClass;\n\n    Register registry;\n\n    if (!registry.registerItem(item1))\n        std::cout &lt;&lt; \"Error registering item1\" &lt;&lt; std::endl;\n    else\n        std::cout &lt;&lt; \"Success registering item1\" &lt;&lt; std::endl;\n\n    if (!registry.registerItem(item1))\n        std::cout &lt;&lt; \"Error unregistering item1\" &lt;&lt; std::endl;\n    else\n        std::cout &lt;&lt; \"Success unregistering item1\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I can\u00b4t compile this code, as <code>items.erase(item)</code> complains about <code>error: no matching member function for call to 'erase'</code>.</p>\n\n<p>Why I can\u00b4t erase the object I\u00b4ve added. What is the correct way to remove a <code>std::shared_ptr</code> from a <code>std::vector</code> ? </p>\n"}, {"tags": ["c++", "c++11", "makefile"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1451504472, "post_id": 34535871, "comment_id": 56813906, "body": "<code>*.o</code> doesn&#39;t match anything before you create any object files (the first time you compile) so your <code>program.exe</code> target doesn&#39;t work correctly. This makefile isn&#39;t properly written. You want to construct the list of <code>.o</code> files from the list of source files and use that variable/list in the prerequisite of the <code>program.exe</code> target. There are examples of this <b>all</b> over this site and the internet. That said you don&#39;t even need that as the built-in make rules will do what you need if you define the flags and prerequisites correctly."}, {"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 0, "creation_date": 1451505045, "post_id": 34535871, "comment_id": 56814148, "body": "CC is the compiler for C.  At a guess probably need to set CXX for C++.  You also probably need the .cpp.o rule."}], "answers": [{"comments": [{"owner": {"reputation": 1507, "user_id": 4296244, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e8c0940effc84e18a8541145ef2dfbfe?s=128&d=identicon&r=PG&f=1", "display_name": "Natjo", "link": "https://stackoverflow.com/users/4296244/natjo"}, "edited": false, "score": 0, "creation_date": 1451504199, "post_id": 34536020, "comment_id": 56813775, "body": "but I want to use clang++. What exactely do you mean by automatically?"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 1, "creation_date": 1451504379, "post_id": 34536020, "comment_id": 56813868, "body": "The compilers don&#39;t pay any attention to that variable. <code>make</code> does. This answer is, somewhat, correct but misses the major point which is that the recipes in the makefile aren&#39;t being used at all."}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1451504561, "post_id": 34536020, "comment_id": 56813942, "body": "@EtanReisner Thanks, quite right.  Edited answer accordingly."}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1451505575, "post_id": 34536020, "comment_id": 56814420, "body": "@LightnessRacesinOrbit Yes, shouldn&#39;t have used the <code>S</code> word.  <i>convention</i> would&#39;ve been more accurate."}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 3, "last_activity_date": 1451504523, "last_edit_date": 1451504523, "creation_date": 1451504061, "answer_id": 34536020, "question_id": 34535871, "link": "https://stackoverflow.com/questions/34535871/how-do-i-set-compilingflags-in-a-makefile/34536020#34536020", "title": "how do I set compilingflags in a makefile?", "body": "<p>You want to set <code>CXXFLAGS</code>, that gets picked up automatically by <code>make</code> (and sent to your compiler  (<em>eg</em> <code>g++</code>, <code>clang++</code>, <em>etc</em>).</p>\n"}, {"tags": [], "owner": {"reputation": 404, "user_id": 5660344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d721885d6a520f30f2209e26e81f0990?s=128&d=identicon&r=PG", "display_name": "Anton Gorev", "link": "https://stackoverflow.com/users/5660344/anton-gorev"}, "is_accepted": true, "score": 1, "last_activity_date": 1451504722, "creation_date": 1451504722, "answer_id": 34536175, "question_id": 34535871, "link": "https://stackoverflow.com/questions/34535871/how-do-i-set-compilingflags-in-a-makefile/34536175#34536175", "title": "how do I set compilingflags in a makefile?", "body": "<p><code>make</code> tried to make target '*.o'.</p>\n\n<p>So, instead of that, you can specify sources list explicitly:</p>\n\n<pre><code>CC = clang++\n\n#compiler flags\nCFLAGS = -O3 -Wall -Werror -std=c++11\nCFLAGS_SFML = -lsfml-graphics -lsfml-window -lsfml-system\nSRCS = getInput.cpp createOutput.cpp main.cpp\nOBJS = $(SRCS:.cpp=.o)\n\nall: program.exe\n\nprogram.exe: $(OBJS)\n        $(CC) -o program.exe *.o $(CFLAGS) $(CFLAGS_SFML)\n\ngetInput.o: getInput.cpp\n        $(CC) -c getInput.cpp $(CFLAGS)\n\ncreateOutput.o: createOutput.cpp\n        $(CC) -c createOutput.cpp $(CFLAGS)\n\nmain.o: main.cpp\n        $(CC) -c main.cpp $(CFLAGS)\n\n.PHONY : clean\nclean:\n        rm *.o\n        @echo clean done\n</code></pre>\n\n<p>Note definition of variables <code>OBJS</code> and <code>SRCS</code>.</p>\n"}], "owner": {"reputation": 1507, "user_id": 4296244, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e8c0940effc84e18a8541145ef2dfbfe?s=128&d=identicon&r=PG&f=1", "display_name": "Natjo", "link": "https://stackoverflow.com/users/4296244/natjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 34536175, "answer_count": 2, "score": 1, "last_activity_date": 1451504722, "creation_date": 1451503491, "question_id": 34535871, "link": "https://stackoverflow.com/questions/34535871/how-do-i-set-compilingflags-in-a-makefile", "title": "how do I set compilingflags in a makefile?", "body": "<p>I'm used to program in IDEs, but switched to vim and plugins recently. Now I try to write a makefile for a c++ project, but somehow if I run <code>make</code> I always get the error</p>\n\n<pre><code>g++    -c -o *.o createOutput.cpp\nIn file included from /usr/include/c++/4.8/thread:35:0,\n                 from createOutput.cpp:5:\n/usr/include/c++/4.8/bits/c++0x_warning.h:32:2: error: #error This file requires compiler and library support for the ISO C++ 2011 standard. This support is currently experimental, and must be enabled with the -std=c++11 or -std=gnu++11 compiler options.\n #error This file requires compiler and library support for the \\\n  ^\n</code></pre>\n\n<p>This is my makefile:</p>\n\n<pre><code>CC = clang++\n\n# compiler flags\nCFLAGS = -O3 -Wall -Werror -std=c++11\nCFLAGS_SFML = -lsfml-graphics -lsfml-window -lsfml-system\n\nall: program.exe clean\n\nprogram.exe: *.o\n    $(CC) -o program.exe *.o $(CFLAGS) $(CFLAGS_SFML) \n\ngetInput.o: getInput.cpp\n    $(CC) -c getInput.cpp $(CFLAGS) \n\ncreateOutput.o: createOutput.cpp\n    $(CC) -c createOutput.cpp $(CFLAGS) \n\nmain.o: main.cpp\n    $(CC) -c main.cpp $(CFLAGS)\n\n.PHONY: clean\nclean:\n    rm *.o\n    @echo clean done\n</code></pre>\n\n<p>Where is my error? Why is it using <code>g++</code> instead of <code>clang</code>? And why isn't it using the <code>-std=c++11</code> parameter? Sorry for the beginner questions, I unfortunately can't find a solution with google.</p>\n"}, {"tags": ["c++", "unordered-map", "stdmap"], "comments": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1451503933, "post_id": 34535846, "comment_id": 56813623, "body": "Sounds like a std::set instead of std::map. Your definition of &quot;the first element&quot; may impact whether it shall be unordered or not."}], "answers": [{"comments": [{"owner": {"reputation": 1467, "user_id": 2947765, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0d8d16ae594d383e8066324d96cf15f8?s=128&d=identicon&r=PG&f=1", "display_name": "Aminos", "link": "https://stackoverflow.com/users/2947765/aminos"}, "edited": false, "score": 0, "creation_date": 1451506817, "post_id": 34536031, "comment_id": 56815010, "body": "In the XML Sax parser, the parsing of attributes AND values between two element tags are not in the same &quot;handler&quot; and I chose to not differentiate between element paths and attribute paths in my &quot;generic&quot; XML parser, so std::set is not enough, I need a boolean flag. There is another solution which consists of using std::set and a string value containing the path of the authorized element, but it&#39;s more complex to code in my case trust me. I really want to understand how string keys are managed in std::map :\\"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 1467, "user_id": 2947765, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0d8d16ae594d383e8066324d96cf15f8?s=128&d=identicon&r=PG&f=1", "display_name": "Aminos", "link": "https://stackoverflow.com/users/2947765/aminos"}, "edited": false, "score": 1, "creation_date": 1451507278, "post_id": 34536031, "comment_id": 56815247, "body": "@Aminos: then read the chapter from Sedgewick, it will give you an idea. (The Gnu C++ library uses parent links, which I think Sedgewick doesn&#39;t like, but the basic principles are all the same.) In essence, it&#39;s just a binary search tree, so there&#39;s not a lot to understand to see how <code>find</code> works. The red-black annotation allows the insert operation to modify the tree (by rotating the root) in order to keep the tree more or less balanced, thereby guaranteeing log N search time. By the way, why do you feel it necessary to understand the details? Is there some question you have in particular?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 1467, "user_id": 2947765, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0d8d16ae594d383e8066324d96cf15f8?s=128&d=identicon&r=PG&f=1", "display_name": "Aminos", "link": "https://stackoverflow.com/users/2947765/aminos"}, "edited": false, "score": 1, "creation_date": 1451507640, "post_id": 34536031, "comment_id": 56815450, "body": "...The important thing about all std:: associative containers is that every value (the key-val pair) is a separate dynamically allocated object. That allows the standard library to guarantee that once a key-val pair is inserted into the container, any reference/pointer to that value will remain valid until the value is removed from the container. The internal object is <i>derived from</i> the std::pair, allowing the library to hand you a pointer or reference to the std::pair itself while keeping the metadata private (child/parent or bucket-chain pointers, colour in the case of red-black, etc.)"}, {"owner": {"reputation": 1467, "user_id": 2947765, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0d8d16ae594d383e8066324d96cf15f8?s=128&d=identicon&r=PG&f=1", "display_name": "Aminos", "link": "https://stackoverflow.com/users/2947765/aminos"}, "edited": false, "score": 0, "creation_date": 1451507923, "post_id": 34536031, "comment_id": 56815638, "body": "it&#39;s just for my own culture ;)"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 1467, "user_id": 2947765, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0d8d16ae594d383e8066324d96cf15f8?s=128&d=identicon&r=PG&f=1", "display_name": "Aminos", "link": "https://stackoverflow.com/users/2947765/aminos"}, "edited": false, "score": 1, "creation_date": 1451507933, "post_id": 34536031, "comment_id": 56815643, "body": "@Aminos: I edited the advice in the post to deal with the use of <code>bool</code> to represent what should be a two-valued enumeration."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 3, "last_activity_date": 1451507904, "last_edit_date": 1451507904, "creation_date": 1451504099, "answer_id": 34536031, "question_id": 34535846, "link": "https://stackoverflow.com/questions/34535846/which-container-from-stdmap-or-stdunordered-map-is-suitable-for-my-case/34536031#34536031", "title": "which container from std::map or std::unordered_map is suitable for my case", "body": "<p>You shouldn't need to understand how red-black trees work in order to understand how to use a <code>std::map</code>. It's simply an associative array where the keys are in order (lexicographical order, in the case of string keys, at least with the default comparison function). That means that you can not only look keys up in a <code>std::map</code>, you can also make queries which depend on order. For example, you can find the largest key in the map which is not greater than the key you have. You can find the next larger key. Or (again in the case of strings) you can find all keys which start with the same prefix.</p>\n\n<p>If you iterate over all the key-value pairs in a <code>std::map</code>, you will see them in order by key. That can be very useful, sometimes.</p>\n\n<p>The extra functionality comes at a price. <code>std::map</code> is usually slower than <code>std::unordered_map</code> (though not always; for large string keys, the overhead of computing the hash function might be noticeable), and the underlying data structure has a certain amount of overhead, so they may occupy more space. The usual advice is to use a <code>std::map</code> if you find the fact that the keys are ordered to be essential or even useful.</p>\n\n<p>But if you've benchmarked and concluded that for your application, a <code>std::map</code> is also faster, then go ahead and use it :)</p>\n\n<hr>\n\n<p>It is occasionally useful to have a map whose mapped type is <code>bool</code>, but only if you need to distinguish between keys whose corresponding value is <code>false</code> and keys which are not present in the map at all. In effect, a <code>std::map&lt;T, bool&gt;</code> (or <code>std::unordered_map&lt;T, bool&gt;</code>) provides a ternary choice for each possible key.</p>\n\n<p>If you don't need to distinguish between the two <code>false</code> cases, and you don't frequently change a key's value, then you may well be better off with a <code>std::set</code> (or <code>std::unordered_set</code>), which is exactly the same datastructure but without the overhead of the <code>bool</code> in each element. (Although only one bit of the <code>bool</code> is useful, alignment considerations may end up using 8 additional bytes for each entry.) Other than storage space, there won't be much (if any) performance difference, though.</p>\n\n<p>If you do really need a ternary case, then you would be well-advised to make the value an <code>enum</code> rather than a <code>bool</code>. What do <code>true</code> and <code>false</code> mean in the context of your usage? My guess is that they don't mean \"true\" and \"false\". Instead, they mean something like \"is an attribute path\" and \"is an element path\". That distinction could be made much clearer (and therefore less accident-prone) by using <code>enum PathType {ATTRIBUTE_PATH, ELEMENT_PATH};</code>. That will not involve any additional resources, since the <code>bool</code> is occupying eight bytes of storage in any case (because of alignment).</p>\n\n<hr>\n\n<p>By the way, there is no guarantee that the underlying data structure is precisely a red-black tree, although the performance guarantees would be difficult to achieve without some kind of self-balancing tree. I don't know of such an implementation, but it would be possible to use k-ary trees (for some small k) to take advantage of SIMD vector comparison operations, for example. Of course, that would need to be customized for appropriate key types.</p>\n\n<p>If you do want to understand red-black trees, you could do worse than Robert Sedgewick's standard textbook on Algorithms. On the book's website, you'll find a brief illustrated explanation in the <a href=\"http://algs4.cs.princeton.edu/33balanced/\" rel=\"nofollow\">chapter on balanced trees</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 1467, "user_id": 2947765, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0d8d16ae594d383e8066324d96cf15f8?s=128&d=identicon&r=PG&f=1", "display_name": "Aminos", "link": "https://stackoverflow.com/users/2947765/aminos"}, "edited": false, "score": 0, "creation_date": 1451507043, "post_id": 34536600, "comment_id": 56815120, "body": "in my case with the algorithm I wrote, I need the boolean flag because parsing occur in 2 or 3 Xerces-C++ handlers and I don&#39;t differentiate between attributes and element values in the XML paths."}, {"owner": {"reputation": 878, "user_id": 4247443, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sfQeY.jpg?s=128&g=1", "display_name": "Pustovalov Dmitry", "link": "https://stackoverflow.com/users/4247443/pustovalov-dmitry"}, "reply_to_user": {"reputation": 1467, "user_id": 2947765, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0d8d16ae594d383e8066324d96cf15f8?s=128&d=identicon&r=PG&f=1", "display_name": "Aminos", "link": "https://stackoverflow.com/users/2947765/aminos"}, "edited": false, "score": 0, "creation_date": 1451507231, "post_id": 34536600, "comment_id": 56815218, "body": "@Aminos std::unordered_map then. Inserts and lookups should work faster on it, you are usually use map when you need sorting."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 1467, "user_id": 2947765, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0d8d16ae594d383e8066324d96cf15f8?s=128&d=identicon&r=PG&f=1", "display_name": "Aminos", "link": "https://stackoverflow.com/users/2947765/aminos"}, "edited": false, "score": 0, "creation_date": 1451507358, "post_id": 34536600, "comment_id": 56815294, "body": "@Aminos: it seems that only one bool is at <code>true</code> at a time, using an iterator on the given element seems more appropriate."}, {"owner": {"reputation": 1467, "user_id": 2947765, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0d8d16ae594d383e8066324d96cf15f8?s=128&d=identicon&r=PG&f=1", "display_name": "Aminos", "link": "https://stackoverflow.com/users/2947765/aminos"}, "edited": false, "score": 0, "creation_date": 1451507621, "post_id": 34536600, "comment_id": 56815436, "body": "Yes, I use iterators."}, {"owner": {"reputation": 1467, "user_id": 2947765, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0d8d16ae594d383e8066324d96cf15f8?s=128&d=identicon&r=PG&f=1", "display_name": "Aminos", "link": "https://stackoverflow.com/users/2947765/aminos"}, "edited": false, "score": 0, "creation_date": 1451507742, "post_id": 34536600, "comment_id": 56815524, "body": "Well, I insert elements only once, that&#39;s why I asked the question, I only do &quot;look ups&quot; and I wanted to know which is theoretically is fast in that field with that condition (a map builded only once)"}], "tags": [], "owner": {"reputation": 878, "user_id": 4247443, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sfQeY.jpg?s=128&g=1", "display_name": "Pustovalov Dmitry", "link": "https://stackoverflow.com/users/4247443/pustovalov-dmitry"}, "is_accepted": false, "score": 1, "last_activity_date": 1451506456, "creation_date": 1451506456, "answer_id": 34536600, "question_id": 34535846, "link": "https://stackoverflow.com/questions/34535846/which-container-from-stdmap-or-stdunordered-map-is-suitable-for-my-case/34536600#34536600", "title": "which container from std::map or std::unordered_map is suitable for my case", "body": "<p>I would recommend you to use std::unordered_set because you really  don't need to store this boolean flag and you also don't need to keep these xml tags in sorted order so  std::unordered_set seems to me as logical and the most efficient choice.</p>\n"}], "owner": {"reputation": 1467, "user_id": 2947765, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0d8d16ae594d383e8066324d96cf15f8?s=128&d=identicon&r=PG&f=1", "display_name": "Aminos", "link": "https://stackoverflow.com/users/2947765/aminos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 631, "favorite_count": 0, "accepted_answer_id": 34536031, "answer_count": 2, "score": -1, "last_activity_date": 1451507904, "creation_date": 1451503372, "question_id": 34535846, "link": "https://stackoverflow.com/questions/34535846/which-container-from-stdmap-or-stdunordered-map-is-suitable-for-my-case", "title": "which container from std::map or std::unordered_map is suitable for my case", "body": "<p>I don't know how a red black tree works with string keys. I've already seen it with numbers on youtube and it baffled me a lot. However I know very well how unoredred_map work (the internal of hash maps). std::map stays esoterical for me, but I read and tested that if we don't have many changes in the std::map, it could beat hash maps.</p>\n\n<p>My case is simple, I have a std::map of <code>&lt;std::string,bool&gt;</code>. Keys contains paths to XML elements (example of a key: \"Instrument_Roots/Instrument_Root/Rating_Type\"), and I use the boolean value in my SAX parser to know if we reached a particular element.</p>\n\n<p>I build this map \"only once\"; and then all I do is using std::find to search if a particular \"key\" (\"path\") exists in order to set its Boolean value to true, or search the first element who has \"true\" as associated value and use its corresponded \"key\", and finally I set all the boolean values to false to guarantee that only a single \"key\" has a \"true\" boolean value.</p>\n"}, {"tags": ["c++", "templates", "c++11", "metaprogramming", "template-meta-programming"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1451504884, "post_id": 34535795, "comment_id": 56814078, "body": "[OT]: prefer <code>std::forward&lt;Lambda&gt;</code> over <code>static_cast&lt;Lambda&amp;&amp;&gt;</code>"}, {"owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1451505115, "post_id": 34535795, "comment_id": 56814191, "body": "@Jarod42: No, I hate std::forward for multiple reasons. 1: actually it performs a cast, but it&#39;s name doesn&#39;t reflect that. 2: some compilers (like MSVC 14) generate additional instructions and/or won&#39;t be able to perform optimizations on the lambda if std::forward is used instead of the plain cast. It can cause serious performance problems. Maybe it&#39;s a bug maybe not, the plain cast is more clear and secure to me. I also made a custom C++11-like forward_cast function for it."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1451505665, "post_id": 34535795, "comment_id": 56814466, "body": "In your example you may linearise your index from <code>0..10*10*10</code> and recompute with modulo each part. See <a href=\"http://stackoverflow.com/a/30964361/2684539\">Completely enumerate indices of D-dimensional array at compile time</a>"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 1, "creation_date": 1451505872, "post_id": 34535795, "comment_id": 56814551, "body": "Well I guess it&#39;s not a duplicate but anyways I did something very similar to this with &quot;metaloops&quot; once, I think my template code was fairly clean: <a href=\"http://stackoverflow.com/questions/32320753/initializing-an-array-of-unknown-dimensionality/32322422#32322422\" title=\"initializing an array of unknown dimensionality\">stackoverflow.com/questions/32320753/&hellip;</a>"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1451507021, "post_id": 34535795, "comment_id": 56815105, "body": "So, for some explanation, the idea was, instead of trying to mimic exactly the semantics of <code>N</code> nested loops, I just implement cartesian product of an arbitrary number of type lists, and then have a single loop over the cartesian product result. For run-time code, this will require a lot more memory, and it&#39;s not a great idea. But for compile-time code, I think it&#39;s not asymptotically different since at compile-time, you need to instantiate a new type / function / something for each iteration of any looping computation anyways. And here, you are outputting a structure of that size anyways."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1451507185, "post_id": 34535795, "comment_id": 56815197, "body": "Maybe in your case you really want to use meta-loops and not cartesian product though? I guess your example is not initialization but output. Hard to say. FWIW the cartesian product is really simple and natural in functional programming so at least IMO it is an attractive approach for TMP."}, {"owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1451507847, "post_id": 34535795, "comment_id": 56815587, "body": "@ChrisBeck The good ol&#39; Cartesian product. Nice approach. No, it&#39;s not Cartesian product or initialization, it&#39;s a computation."}], "answers": [{"comments": [{"owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 0, "creation_date": 1452098936, "post_id": 34601545, "comment_id": 57021849, "body": "the only thing I don&#39;t get is why the length of a... depends on the first template parameter of the class. you never pass actual values to the variadic template parameter. is this standard behavior? usually std::integer_sequence is used for these purposes. an excellent answer by the way."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 0, "creation_date": 1452099582, "post_id": 34601545, "comment_id": 57022303, "body": "@plasmacel: I don&#39;t fully understand what you&#39;re asking, however I&#39;ll wager a guess and try to be thorough. The parameter pack expansion <code>a...</code> expands into a comma separated list of arguments. Initially the pack is empty, but as the templates are recursively instantiated, this parameter pack grows to include current loop indices <code>a..., S</code> becomes an <code>a...</code> at the next level of recursion, all the way down to <code>a..., B</code>. Effectively recursion causes the pack to expand first as <code>(&lt;none&gt;)</code>, then <code>(S)</code>, <code>(S, S+1)</code>, ..., <code>(S, S+1, ..., E-1)</code>, or concretely <code>(0)</code>, <code>(0, 1)</code>,  ..., <code>(0, 1, ..., 9)</code>"}, {"owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 0, "creation_date": 1452100491, "post_id": 34601545, "comment_id": 57022952, "body": "you pass the same number of template arguments at every recursion so I don&#39;t see how it grows.  I have never seen a template parameter pack expansion like this, however it works."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 0, "creation_date": 1452103844, "post_id": 34601545, "comment_id": 57025008, "body": "@plasmacel: Ah, now I understand what you&#39;re saying. It may <i>appear</i> that I&#39;m passing the same number of template arguments, but actually that is not the case! As I mentioned in my previous comment, the parameter pack is growing by a single value each time it enters a lower level of recursion. When I call <code>iterate&lt;Dim-1, B, B, E&gt;::apply (func, a..., S);</code> we enter a lower level of recursion on iterate. At <i>that</i> point, <code>a</code> refers to the <i>previous</i> level of recursion&#39;s <code>(a..., S)</code>, which is now effectively <code>(S-1)</code>. Then we recurse <i>again</i>, and <code>a</code> takes on <code>(S-1, S-2, S)</code> Make sense?"}], "tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": true, "score": 5, "last_activity_date": 1452002232, "last_edit_date": 1452002232, "creation_date": 1451948929, "answer_id": 34601545, "question_id": 34535795, "link": "https://stackoverflow.com/questions/34535795/n-dimensionally-nested-metaloops-with-templates/34601545#34601545", "title": "N-dimensionally nested metaloops with templates", "body": "<p>Someone better versed in this stuff can improve my answer.</p>\n\n<h2><a href=\"http://coliru.stacked-crooked.com/a/6296ca143b93fa10\" rel=\"nofollow\">Live Demo</a></h2>\n\n<p>The gist of my solution is that you declare N dimensions, with a start and an end.</p>\n\n<p>It recurses on N-1 dimensions with the same start and end.</p>\n\n<p>When it reaches the 1st dimension, it will actually begin incrementing the start, calling the passed function.</p>\n\n<p>It will always attempt to pass a number of arguments identical to the number of dimensions (their indices).</p>\n\n<p>So a call like this:</p>\n\n<pre><code>meta_for&lt;2, 0, 2&gt;::loop(\n    [](size_t i, size_t j)\n    {\n        std::cout &lt;&lt; i &lt;&lt; \" \" &lt;&lt; j &lt;&lt; std::endl;\n    });\n</code></pre>\n\n<p>Will result in output like this:</p>\n\n<blockquote>\n  <p>0 0</p>\n  \n  <p>0 1</p>\n  \n  <p>1 0</p>\n  \n  <p>1 1</p>\n</blockquote>\n\n<p>Here's the <code>meta_for</code> structure, which uses a helper, <code>iterate</code>:</p>\n\n<pre><code>template&lt;size_t D, size_t B, size_t E&gt;\nstruct meta_for\n{\n    template&lt;typename Func&gt;\n    static void loop(Func&amp;&amp; func)\n    {\n        iterate&lt;D, B, B, E&gt;::apply(std::forward&lt;Func&gt;(func));\n    }\n};\n</code></pre>\n\n<p>And the helpers:</p>\n\n<pre><code>// a helper macro to avoid repeating myself too much\n#define FN template&lt;typename Func, typename... Args&gt; \\\n             static void apply(Func&amp;&amp; func, Args&amp;&amp;... a)\n\n\n// Outer loop. S=\"Self\" or \"Start\". Indicating current index of outer loop. Intent is to iterate until S == E\ntemplate&lt;int Dim, size_t S, size_t B, size_t E&gt;\nstruct iterate\n{\n    static_assert(S &lt; E &amp;&amp; B &lt; E, \"Indices are wrong\");\n    FN\n    {\n        // outer loop recursive case. Recurse on lower Dimension (Dim-1), and then increment outer loop (S+1)\n        iterate&lt;Dim-1, B, B, E&gt;::apply (func, a..., S);\n        iterate&lt;Dim, S+1, B, E&gt;::apply (func, a...);\n    }\n};\n\n// Outer loop base case\ntemplate&lt;int Dim, size_t B, size_t E&gt; \nstruct iterate&lt;Dim, E, B, E&gt;\n{\n    FN\n    {\n        // outer loop base case, End == End. Terminate loop\n    }\n};\n\n// innter loop. \"S\" is outer loop's current index, which we need to pass on to function\n// \"B\" is inner loop's (this loop) current index, which needs to iterate until B == E\ntemplate&lt;size_t S, size_t B, size_t E&gt;\nstruct iterate&lt;1, S, B, E&gt;\n{\n    static_assert(S &lt; E &amp;&amp; B &lt; E, \"Indices are wrong\");\n    FN\n    {\n        // inner loop recursive case. Perform work, and then recurse on next index (B+1)\n        func(a..., B);\n        iterate&lt;1, S, B+1, E&gt;::apply(func, a...);\n    }\n};\n\n// inner loop base case\ntemplate&lt;size_t S, size_t E&gt;\nstruct iterate&lt;1, S, E, E&gt;\n{\n    FN\n    {\n        // inner loop base case, End == End. Terminate loop\n    }\n};\n\n// case where zero dimensions (no loop)\ntemplate&lt;size_t S, size_t B, size_t E&gt;\nstruct iterate&lt;0, S, B, E&gt;\n{\n    static_assert(sizeof(S) == 0, \"Need more than 0 dimensions!\");\n};\n</code></pre>\n\n<hr>\n\n<h2>More explanation</h2>\n\n<p>This solution, like any other involving variadic templates, relies on recursion.</p>\n\n<p>I wanted to express recursion on an outer loop, so I started with a base case; the end of the loop. This is the case where the start is the same as the end :</p>\n\n<pre><code>template&lt;int Dim, size_t B, size_t E&gt; \nstruct iterate&lt;Dim, E, B, E&gt;\n{ /*..*/};\n</code></pre>\n\n<p>Notice here that this is a specialization for <code>&lt;Dim, E, B, E&gt;</code>. The second position indicates the outer loop's current index, and the last position indicates the index to iterate up to (but not including). So in this case, the current index is the same as the last, indicating we are finished looping (and hence a \"do nothing\" function).</p>\n\n<p>The recursive case for the outer loop involves the scenario where the loop index is less than the index to iterate to. In template terms, the second position is less than the fourth position:</p>\n\n<pre><code>template&lt;int Dim, size_t S, size_t B, size_t E&gt;\nstruct iterate\n{/*...*/}\n</code></pre>\n\n<p>Notice this is NOT a specialization.</p>\n\n<p>The logic of this function is that an outer loop should signal an inner loop to begin executing from its start, and then the outer loop continues and starts the process all over again for inner loops:</p>\n\n<pre><code>iterate&lt;Dim-1, B, B, E&gt;::apply (func, a..., S);\niterate&lt;Dim, S+1, B, E&gt;::apply (func, a...);\n</code></pre>\n\n<p>Notice in the first line that the second template argument is again <code>B</code>, indicating to start at the beginning again. This is necessary because the other recursive case on the second line increments <code>S</code> (incrementing outer loop index).</p>\n\n<p>The entire time, we are also accumulating arguments to pass to the function:</p>\n\n<pre><code>::apply(func, a..., S)\n</code></pre>\n\n<p>is passing the function on, along with indices of higher dimension loops, and then appending the current loop's index (<code>S</code>). <code>a</code> here is a variadic template.</p>\n\n<h3>The inner loop</h3>\n\n<p>When I say \"inner loop\", I mean the innermost loop. This loop needs to simply increment until the start index reaches the end index, and not attempt to recurse on any lower dimension. In our case, this is when our <code>Dim</code> (Dimension) parameter is 1:</p>\n\n<pre><code>template&lt;size_t S, size_t B, size_t E&gt;\nstruct iterate&lt;1, S, B, E&gt;\n{/*...*/};\n</code></pre>\n\n<p>At this point, we finally want to call our passed function, along with all arguments we've accumulated thus far (the indices of the outer loops) PLUS, the index of the innermost loop:</p>\n\n<pre><code>func(a..., B);\n</code></pre>\n\n<p>And then recurse (increment index)</p>\n\n<pre><code>iterate&lt;1, S, B+1, E&gt;::apply(func, a...);\n</code></pre>\n\n<p>The base case here is when the innermost loop's index is the same as the end index (AND the dimension is 1):</p>\n\n<pre><code>template&lt;size_t S, size_t E&gt;\nstruct iterate&lt;1, S, E, E&gt;\n{/*...*/};\n</code></pre>\n\n<p>Hence the \"do nothing\" function here; there shouldn't be any work performed because the loop is terminating.</p>\n\n<p>Finally, I included one last specialization to catch a user error where they didn't specify any dimensions:</p>\n\n<pre><code>template&lt;size_t S, size_t B, size_t E&gt;\nstruct iterate&lt;0, S, B, E&gt;\n</code></pre>\n\n<p>Which uses <code>static_assert</code> to always fail because <code>sizeof(size_t)</code> is not zero:</p>\n\n<pre><code>static_assert(sizeof(S) == 0, \"Need more than 0 dimensions!\");\n</code></pre>\n\n<h2>Conclusion</h2>\n\n<p>This is a specific use case template meta-program. Where we essentially generate N nested for loops that all have the same start and end indices AND we want to pass those indices to a function. We could do a little more work to make it such that the <code>iterate</code> structure could stand on its own without making the assumption that the outer loop's start and end indices are the same as an inner loop's.</p>\n\n<p>My favorite application of this code is that we can use it to make an N-dimensional counter. For example, a binary counter for N-bits (found in the live demo).</p>\n"}, {"comments": [{"owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 1, "creation_date": 1549233588, "post_id": 54508163, "comment_id": 95820160, "body": "Thanks, this is awesome."}], "tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": false, "score": 6, "last_activity_date": 1549232413, "creation_date": 1549232413, "answer_id": 54508163, "question_id": 34535795, "link": "https://stackoverflow.com/questions/34535795/n-dimensionally-nested-metaloops-with-templates/54508163#54508163", "title": "N-dimensionally nested metaloops with templates", "body": "<p>Since this question appears to still be getting traffic, I thought it would be a good idea to show how much easier this is to do in C++17. First, the full code </p>\n\n<h2><a href=\"https://wandbox.org/permlink/YVU8ehBqck6a0K8m\" rel=\"noreferrer\">Demo</a></h2>\n\n<pre><code>template&lt;size_t Dimensions, class Callable&gt;\nconstexpr void meta_for_loop(size_t begin, size_t end, Callable&amp;&amp; c)\n{\n    static_assert(Dimensions &gt; 0);\n    for(size_t i = begin; i != end; ++i)\n    {\n        if constexpr(Dimensions == 1)\n        {\n            c(i);\n        }\n        else\n        {\n            auto bind_an_argument = [i, &amp;c](auto... args)\n            {\n                c(i, args...);\n            };\n            meta_for_loop&lt;Dimensions-1&gt;(begin, end, bind_an_argument);\n        }\n    }\n}\n</code></pre>\n\n<hr>\n\n<h2>Explanation:</h2>\n\n<ol>\n<li>If the Dimensions is 1, we simply call the provided-lambda with the next index in a loop</li>\n<li>Else, we create a new callable from the provided one, except that we bind the loop index to one of the callable arguments. Then we recurse on our meta for loop with 1 fewer dimension.</li>\n</ol>\n\n<p>If you're familiar at all with functional programming, this is a bit easier to understand, as it's an application of <a href=\"https://en.wikipedia.org/wiki/Currying\" rel=\"noreferrer\">currying</a>.</p>\n\n<h3>How it works in more concrete terms:</h3>\n\n<p>You want a binary counter that goes</p>\n\n<blockquote>\n  <p>0 0 <br/>\n  0 1<br/>\n  1 0<br/>\n  1 1<br/></p>\n</blockquote>\n\n<p>So you create a callable that can print two integers like so:</p>\n\n<pre><code>auto callable = [](size_t i, size_t j)\n{\n   std::cout &lt;&lt; i &lt;&lt; \" \" &lt;&lt; j &lt;&lt; std::endl;\n};\n</code></pre>\n\n<p>And since we have two columns, we have two dimensions, so D = 2.</p>\n\n<p>We call our meta for loop defined above like so:</p>\n\n<pre><code>meta_for_loop&lt;2&gt;(0, 2, callable);\n</code></pre>\n\n<p>The <code>end</code> argument to <code>meta_for_loop</code> is 2 instead of 1 because we are modeling a half-closed interval [start, end), which is common in programming because people often want the first index to be included in their loop, and then they want to iterate (end - start) times. </p>\n\n<p>Let's step through the algorithm:</p>\n\n<ol>\n<li>Dimensions == 2, so we don't fail our static assert</li>\n<li>We begin to iterate, <code>i = 0</code> </li>\n<li>Dimensions == 2, so we enter the \"else\" branch of our <a href=\"https://en.cppreference.com/w/cpp/language/if\" rel=\"noreferrer\"><code>constexpr if</code></a> statement\n\n<ul>\n<li>We create a new callable that captures the passed in callable and name it <code>bind_an_argument</code> to reflect that we're binding one argument of the provided callable <code>c</code>. </li>\n</ul></li>\n</ol>\n\n<p>So, <code>bind_an_argument</code> effectively looks like this:</p>\n\n<pre><code>void bind_an_argument(size_t j)\n{\n    c(i, j);\n}\n</code></pre>\n\n<p>Note that <code>i</code> stays the same, but <code>j</code> is variable. This is useful in our meta for loop because we want to model the fact that an outer loop stays at the same index while an inner loop iterates over its whole range.\nFor example</p>\n\n<pre><code>for(int i = 0; i &lt; N; ++i)\n{\n    for (int j = 0; j &lt; M; ++j)\n    {\n       /*...*/\n    }\n}\n</code></pre>\n\n<p>when <code>i == 0</code> we iterate over all values of <code>j</code> from <code>0</code> to <code>M</code>, and then we repeat for <code>i == 1</code>, <code>i == 2</code>, etc.</p>\n\n<ol start=\"4\">\n<li>We call <code>meta_for_loop</code> again, except that <code>Dimensions</code> is now <code>1</code> instead of <code>2</code>, and our <code>Callable</code> is now <code>bind_an_argument</code> instead of <code>c</code></li>\n<li><code>Dimensions == 1</code> so our <code>static_assert</code> passes</li>\n<li>We begin to loop <code>for(size_t i = 0; i &lt; 2; ++i)</code></li>\n<li><code>Dimensions == 1</code> so we enter the <code>if</code> branch of our <code>constexpr if</code></li>\n<li>We call <code>bind_an_argument</code> with <code>i = 1</code>, which calls our <code>callable</code> from above with arguments <code>(0, 0)</code>, the first of which was bound from the previous call to <code>meta_for_loop</code>. This produces output \n\n<blockquote>\n  <p>0 0</p>\n</blockquote></li>\n<li>We call <code>bind_an_argument</code> with <code>i == 1</code>, which calls our <code>callable</code> from above with arguments <code>(0, 1)</code>, the first argument of which was bound during our previous call to <code>meta_for_loop</code>. This produces output\n\n<blockquote>\n  <p>0 1</p>\n</blockquote></li>\n<li>We finish iterating, so the stack unwinds to the parent calling function</li>\n<li>We're back in our call to <code>meta_for_loop</code> with <code>Dimensions == 2</code> and <code>Callable == callable</code>. We finish our first loop iteration and then increment <code>i</code> to <code>1</code></li>\n<li>Since <code>Dimensions == 2</code>, we enter the <code>else</code> branch again</li>\n<li>Repeat steps 4 through 10, except that the first argument to <code>callable</code> is bound to <code>1</code> instead of <code>0</code>. This produces output\n\n<blockquote>\n  <p>1 0 <br/>\n  1 1</p>\n</blockquote></li>\n</ol>\n"}], "owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1062, "favorite_count": 2, "accepted_answer_id": 34601545, "answer_count": 2, "score": 9, "last_activity_date": 1549232413, "creation_date": 1451503188, "last_edit_date": 1451504565, "question_id": 34535795, "link": "https://stackoverflow.com/questions/34535795/n-dimensionally-nested-metaloops-with-templates", "title": "N-dimensionally nested metaloops with templates", "body": "<p>I am trying to do N-dimensionally nested metaloops with template metaprogramming.\nThe nesting part is trivial, however passing all the arbitrary number of iteration indices as template parameters to the most-inner loop seems problematic.</p>\n\n<p>A simple unnested metaloop looks like:</p>\n\n<pre><code>template &lt;size_t I, size_t N&gt;\nstruct meta_for\n{\n    template &lt;typename Lambda&gt;\n    inline meta_for(Lambda &amp;&amp;iteration)\n    {\n        iteration(I);\n        meta_for&lt;I+1, N&gt; next(static_cast&lt;Lambda&amp;&amp;&gt;(iteration));\n    }\n};\n\ntemplate &lt;size_t N&gt;\nstruct meta_for&lt;N, N&gt;\n{\n    template &lt;typename Lambda&gt;\n    inline meta_for(Lambda &amp;&amp;iteration)\n    {\n        return;\n    }\n};\n\n#include &lt;iostream&gt;\n\nint main()\n{\n    meta_for&lt;0, 10&gt;([&amp;](size_t i) // perform 10 iterations\n    {\n        std::cout &lt;&lt; i &lt;&lt; '\\n';\n    });\n\n    return 0;\n}\n</code></pre>\n\n<p>Now, I want to make a metaloop, which accepts an N parameter denoting the dimensionality (the level of nesting), using like:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    // perform 3 dimensionally nested iterations\n    // each index goes from 0 to 10\n    // so 10x10x10 iterations performed\n    meta_for&lt;3, 0, 10&gt;([&amp;](size_t i, size_t j, size_t k)\n    {\n        std::cout &lt;&lt; i &lt;&lt; ' ' &lt;&lt; j &lt;&lt; ' ' &lt;&lt; k &lt;&lt; '\\n';\n    });\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "openmp"], "comments": [{"owner": {"reputation": 389, "user_id": 4585201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cab6e9e5524e6a3394f4ac92c1adb7ad?s=128&d=identicon&r=PG&f=1", "display_name": "Rajnish", "link": "https://stackoverflow.com/users/4585201/rajnish"}, "edited": false, "score": 0, "creation_date": 1451504807, "post_id": 34535765, "comment_id": 56814040, "body": "Why do u wanna compile it?"}, {"owner": {"reputation": 1, "user_id": 5669086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cee52c2740f5dc22f74befd63e17f541?s=128&d=identicon&r=PG&f=1", "display_name": "lftr", "link": "https://stackoverflow.com/users/5669086/lftr"}, "reply_to_user": {"reputation": 389, "user_id": 4585201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cab6e9e5524e6a3394f4ac92c1adb7ad?s=128&d=identicon&r=PG&f=1", "display_name": "Rajnish", "link": "https://stackoverflow.com/users/4585201/rajnish"}, "edited": false, "score": 0, "creation_date": 1451509547, "post_id": 34535765, "comment_id": 56816457, "body": "Cause i wanna run it for academic purpose."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5717600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c9de84e5a2b772dc18f4f7fe34e2e36?s=128&d=identicon&r=PG&f=1", "display_name": "Kuldeep S", "link": "https://stackoverflow.com/users/5717600/kuldeep-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1451514518, "last_edit_date": 1451514518, "creation_date": 1451513313, "answer_id": 34537996, "question_id": 34535765, "link": "https://stackoverflow.com/questions/34535765/multithreading-openmp-c/34537996#34537996", "title": "Multithreading, OpenMP,C", "body": "<p>Remove the <code>#pragma omp master</code> statement from your code. That will fix the compilation issue. You probably don't want to run that block 'only' in the master thread, because then you will not get any performance benefit of using Open MP.</p>\n"}, {"comments": [{"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1451553059, "post_id": 34541340, "comment_id": 56829403, "body": "Nice answer. You could remove the first set of brackets (I mean the first <code>{</code> after <code>#pragma omp parallel private (t,i,j)</code> as well as one indention level.  But that&#39;s just style."}, {"owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1451628374, "post_id": 34541340, "comment_id": 56850684, "body": "@Zboson You&#39;re right. I kept it there just because I was copying the OP."}], "tags": [], "owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "is_accepted": false, "score": 1, "last_activity_date": 1451538614, "creation_date": 1451538614, "answer_id": 34541340, "question_id": 34535765, "link": "https://stackoverflow.com/questions/34535765/multithreading-openmp-c/34541340#34541340", "title": "Multithreading, OpenMP,C", "body": "<p>Honestly, this is pretty poor OpenMP code. It does not consider data usage throughout the algorithm. What you probably want is:</p>\n\n<pre><code>int t, i, j;\n#pragma omp parallel private (t,i,j)\n{\n    for (t = 0; t &lt; _PB_TMAX; t++)\n    {\n        #pragma omp for nowait\n        for (j = 0; j &lt; _PB_NY; j++)\n            ey[0][j] = _fict_[t];\n\n        #pragma omp for collapse(2) nowait schedule(static)\n        for (i = 1; i &lt; _PB_NX; i++)\n             for (j = 0; j &lt; _PB_NY; j++)\n                 ey[i][j] = ey[i][j] - 0.5*(hz[i][j]-hz[i-1][j]);\n\n        #pragma omp for collapse(2) schedule(static)\n        for (i = 0; i &lt; _PB_NX; i++)\n            for (j = 1; j &lt; _PB_NY; j++)\n                 ex[i][j] = ex[i][j] - 0.5*(hz[i][j]-hz[i][j-1]);\n\n        // #pragma omp barrier &lt;- Implicit if nowait not specified\n\n        #pragma omp for collapse(2) schedule(static)\n        for (i = 0; i &lt; _PB_NX - 1; i++)\n            for (j = 0; j &lt; _PB_NY - 1; j++)\n                hz[i][j] = hz[i][j] - 0.7*(ex[i][j+1] - ex[i][j] + ey[i+1][j] - ey[i][j]);\n\n        // #pragma omp barrier &lt;- Implicit if nowait not specified\n    }\n}\n</code></pre>\n\n<p>The barriers should be removed because they are implicit after the for loop ends without a <code>nowait</code> specified. </p>\n\n<p>Furthermore, I believe the first two barriers should be entirely removed because there is no thread dependence between the first three loops -- if a thread finishes its portion of the loop and immediately starts a portion of the next loop, there is no chance of a race condition. You can add the <code>nowait</code> clause to override the implicit barrier at the end of the <code>omp for</code> directive.</p>\n\n<p>Finally, if <code>_PB_NX</code> and <code>_PB_NY</code> are large-ish, then you are very unlikely to gain any benefit by collapsing the nested loops. I would imagine that removing the <code>collapse(2)</code> could slightly improve the performance of the overall function.</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 1, "user_id": 5669086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cee52c2740f5dc22f74befd63e17f541?s=128&d=identicon&r=PG&f=1", "display_name": "lftr", "link": "https://stackoverflow.com/users/5669086/lftr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1451538614, "creation_date": 1451503066, "last_edit_date": 1451505178, "question_id": 34535765, "link": "https://stackoverflow.com/questions/34535765/multithreading-openmp-c", "title": "Multithreading, OpenMP,C", "body": "<p>I saw that piece of some code below in a forum but when i started to compile it i get some errors.. I want to parallel the area from <code>#pragma scop</code> up to <code>#pragma endscop</code>. </p>\n\n<pre><code>/* Main computational kernel. The whole function will be timed,\nincluding the call and return. */\nstatic\nvoid kernel_fdtd_2d(int tmax,\n        int nx,\n        int ny,\n        DATA_TYPE POLYBENCH_2D(ex,NX,NY,nx,ny),\n        DATA_TYPE POLYBENCH_2D(ey,NX,NY,nx,ny),\n        DATA_TYPE POLYBENCH_2D(hz,NX,NY,nx,ny),\n        DATA_TYPE POLYBENCH_1D(_fict_,TMAX,tmax))\n{\nint t, i, j;\n#pragma scop\n#pragma omp parallel private (t,i,j)\n{\n #pragma omp master\n {\n  for (t = 0; t &lt; _PB_TMAX; t++)\n  {\n   #pragma omp for\n   for (j = 0; j &lt; _PB_NY; j++)\n      ey[0][j] = _fict_[t];\n    #pragma omp barrier\n    #pragma omp for collapse(2) schedule(static)\n    for (i = 1; i &lt; _PB_NX; i++)\n      for (j = 0; j &lt; _PB_NY; j++)\n        ey[i][j] = ey[i][j] - 0.5*(hz[i][j]-hz[i-1][j]);\n    #pragma omp barrier\n    #pragma omp for collapse(2) schedule(static)\n    for (i = 0; i &lt; _PB_NX; i++)\n      for (j = 1; j &lt; _PB_NY; j++)\n        ex[i][j] = ex[i][j] - 0.5*(hz[i][j]-hz[i][j-1]);\n    #pragma omp barrier\n    #pragma omp for collapse(2) schedule(static)\n    for (i = 0; i &lt; _PB_NX - 1; i++)\n      for (j = 0; j &lt; _PB_NY - 1; j++)\n        hz[i][j] = hz[i][j] - 0.7*  (ex[i][j+1] - ex[i][j] + ey[i+1][j] - ey[i][j]);\n    #pragma omp barrier\n  }\n}\n}\n#pragma endscop\n}\n\n\nint main(int argc, char** argv)\n {\n /* Retrieve problem size. */\n int tmax = TMAX;\n int nx = NX;\n int ny = NY;\n\n /* Variable declaration/allocation. */\n POLYBENCH_2D_ARRAY_DECL(ex,DATA_TYPE,NX,NY,nx,ny);\n POLYBENCH_2D_ARRAY_DECL(ey,DATA_TYPE,NX,NY,nx,ny);\n POLYBENCH_2D_ARRAY_DECL(hz,DATA_TYPE,NX,NY,nx,ny);\n POLYBENCH_1D_ARRAY_DECL(_fict_,DATA_TYPE,TMAX,tmax);\n\n /* Initialize array(s). */\n init_array (tmax, nx, ny,\n      POLYBENCH_ARRAY(ex),\n      POLYBENCH_ARRAY(ey),\n      POLYBENCH_ARRAY(hz),\n      POLYBENCH_ARRAY(_fict_));\n\n /* Start timer. */\n polybench_start_instruments;\n\n /* Run kernel. */\n kernel_fdtd_2d (tmax, nx, ny,\n      POLYBENCH_ARRAY(ex),\n      POLYBENCH_ARRAY(ey),\n      POLYBENCH_ARRAY(hz),\n      POLYBENCH_ARRAY(_fict_));\n\n\n  /* Stop and print timer. */\n  polybench_stop_instruments;\n  polybench_print_instruments;\n\n  /* Prevent dead-code elimination. All live-out data must be printed\n  by the function call in argument. */\n   polybench_prevent_dce(print_array(nx, ny, POLYBENCH_ARRAY(ex),\n                POLYBENCH_ARRAY(ey),\n                POLYBENCH_ARRAY(hz)));\n\n   /* Be clean. */\n   POLYBENCH_FREE_ARRAY(ex);\n   POLYBENCH_FREE_ARRAY(ey);\n   POLYBENCH_FREE_ARRAY(hz);\n   POLYBENCH_FREE_ARRAY(_fict_);\n\n   return 0;\n   }\n</code></pre>\n\n<p>The errors are like:</p>\n\n<p><code>stencils/fdtd-2d/fdtd-2dp.c:80:9: error: work-sharing region may not be closely nested inside of work-sharing, critical, ordered, master or explicit task region\n #pragma omp for\n         ^</code></p>\n\n<p><code>stencils/fdtd-2d/fdtd-2dp.c:83:9: error: barrier region may not be closely nested inside of work-sharing, critical, ordered, master or explicit task region\n #pragma omp barrier\n         ^</code></p>\n\n<p><code>stencils/fdtd-2d/fdtd-2dp.c:84:9: error: work-sharing region may not be closely nested inside of work-sharing, critical, ordered, master or explicit task region\n #pragma omp for collapse(2) schedule(static)\n         ^</code></p>\n\n<p><code>stencils/fdtd-2d/fdtd-2dp.c:88:9: error: barrier region may not be closely nested inside of work-sharing, critical, ordered, master or explicit task region\n #pragma omp barrier\n         ^</code></p>\n\n<p><code>stencils/fdtd-2d/fdtd-2dp.c:89:9: error: work-sharing region may not be closely nested inside of work-sharing, critical, ordered, master or explicit task region\n #pragma omp for collapse(2) schedule(static)\n         ^</code></p>\n\n<p><code>stencils/fdtd-2d/fdtd-2dp.c:93:9: error: barrier region may not be closely nested inside of work-sharing, critical, ordered, master or explicit task region\n #pragma omp barrier\n         ^</code></p>\n\n<p><code>stencils/fdtd-2d/fdtd-2dp.c:94:9: error: work-sharing region may not be closely nested inside of work-sharing, critical, ordered, master or explicit task region\n #pragma omp for collapse(2) schedule(static)\n         ^</code></p>\n\n<p><code>stencils/fdtd-2d/fdtd-2dp.c:98:9: error: barrier region may not be closely nested inside of work-sharing, critical, ordered, master or explicit task region\n #pragma omp barrier\n         ^</code></p>\n\n<p>Any help appreciated in how may i compile this.. </p>\n"}, {"tags": ["c++", "libcurl", "c++14"], "answers": [{"comments": [{"owner": {"reputation": 507, "user_id": 3541309, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/18fVp.jpg?s=128&g=1", "display_name": "Czarek", "link": "https://stackoverflow.com/users/3541309/czarek"}, "edited": false, "score": 0, "creation_date": 1451502966, "post_id": 34535718, "comment_id": 56813147, "body": "Alright, I am just starting off with C++ so I am not completely sure what to do here. Since the example in the readme shows that this is the proper way to do it. So how would I go ahead and do it properly?"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1451502869, "creation_date": 1451502869, "answer_id": 34535718, "question_id": 34535634, "link": "https://stackoverflow.com/questions/34535634/c14-curlcpp-submitting-a-form/34535718#34535718", "title": "C++14 cURLcpp Submitting a form", "body": "<p>It is clear that <code>curl_easy</code> class does not have any version of <code>add()</code> which accepts <code>curl_form</code>. Looks like only add() variants it has are for CURLOption.</p>\n"}, {"tags": [], "owner": {"reputation": 507, "user_id": 3541309, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/18fVp.jpg?s=128&g=1", "display_name": "Czarek", "link": "https://stackoverflow.com/users/3541309/czarek"}, "is_accepted": true, "score": 0, "last_activity_date": 1451664731, "creation_date": 1451664731, "answer_id": 34557719, "question_id": 34535634, "link": "https://stackoverflow.com/questions/34535634/c14-curlcpp-submitting-a-form/34557719#34557719", "title": "C++14 cURLcpp Submitting a form", "body": "<p>I figured it out. Turns out that the tutorial on the website is a little bit wrong. The <code>easy.add&lt;OPT&gt;(value)</code> function accepts a curl_httpost variable. To get it from the <code>curl_form</code> you have to do <code>form.get()</code>. But to pass it to the <code>easy.add()</code> function you have to remove the const with <code>const_cast</code>. I believe this is just a bug in the library.   </p>\n"}], "owner": {"reputation": 507, "user_id": 3541309, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/18fVp.jpg?s=128&g=1", "display_name": "Czarek", "link": "https://stackoverflow.com/users/3541309/czarek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 34557719, "answer_count": 2, "score": 1, "last_activity_date": 1451664731, "creation_date": 1451502495, "question_id": 34535634, "link": "https://stackoverflow.com/questions/34535634/c14-curlcpp-submitting-a-form", "title": "C++14 cURLcpp Submitting a form", "body": "<p>I am trying to use <a href=\"https://github.com/JosephP91/curlcpp\" rel=\"nofollow\">cURLcpp (not cURLpp)</a> to submit a form. In the readme there is an example of how to send a form request. Here is my code:</p>\n\n<pre><code>const std::string authenticityToken = stringMatch.substr(7, stringMatch.length());\n\ncurl::curl_form form;\ncurl::curl_easy easy;\n// Forms creation\ncurl::curl_pair&lt;CURLformoption,std::string&gt; nameForm(CURLFORM_COPYNAME, \"username\");\ncurl::curl_pair&lt;CURLformoption,std::string&gt; nameCont(CURLFORM_COPYCONTENTS, \"the username\");\n\ncurl::curl_pair&lt;CURLformoption,std::string&gt; passForm(CURLFORM_COPYNAME, \"password\");\ncurl::curl_pair&lt;CURLformoption,std::string&gt; passCont(CURLFORM_COPYCONTENTS, \"the password\");\n\ncurl::curl_pair&lt;CURLformoption,std::string&gt; authForm(CURLFORM_COPYNAME,\"authenticityToken\");\ncurl::curl_pair&lt;CURLformoption,std::string&gt; authCont(CURLFORM_COPYCONTENTS, authenticityToken);\n\ntry {\n    // Form adding\n    form.add(nameForm, nameCont);\n    form.add(passForm, passCont);\n    form.add(authForm, authCont);\n\n    // Add some options to our request\n    easy.add&lt;CURLOPT_URL&gt;(\"https://account.mojang.com/login\");\n    easy.add&lt;CURLOPT_SSL_VERIFYPEER&gt;(false);\n    easy.add&lt;CURLOPT_FOLLOWLOCATION&gt;(1L);\n    easy.add&lt;CURLOPT_HTTPPOST&gt;(form);\n    // Execute the request.\n    easy.perform();\n} catch (curl::curl_easy_exception error) {\n    // If you want to get the entire error stack we can do:\n    curl::curlcpp_traceback errors = error.get_traceback();\n    // Otherwise we could print the stack like this:\n    error.print_traceback();\n    // Note that the printing the stack will erase it\n}\n</code></pre>\n\n<p>I get this error when compiling:</p>\n\n<pre><code>C:\\Users\\Czarek\\ClionProjects\\Learning\\main.cpp: In function 'int main(int, const char**)':\nC:\\Users\\Czarek\\ClionProjects\\Learning\\main.cpp:40:40: error: no matching function for call to 'curl::curl_easy::add(curl::curl_form&amp;)'\n         easy.add&lt;CURLOPT_HTTPPOST&gt;(form);\n</code></pre>\n\n<p>Now, I followed the example like it was outlined on github? What am I doing wrong?</p>\n"}, {"tags": ["c++", "templates", "overloading", "operator-keyword"], "comments": [{"owner": {"reputation": 453, "user_id": 2986286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22f447e2c717fa3423629550a2d7b743?s=128&d=identicon&r=PG&f=1", "display_name": "0kcats", "link": "https://stackoverflow.com/users/2986286/0kcats"}, "edited": false, "score": 2, "creation_date": 1451501204, "post_id": 34535292, "comment_id": 56812264, "body": "Double check that you are comparing instances, not pointers, that is"}, {"owner": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "edited": false, "score": 0, "creation_date": 1451501265, "post_id": 34535292, "comment_id": 56812290, "body": "provide the piece of code in which you are comparing the instances"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1451501515, "post_id": 34535292, "comment_id": 56812433, "body": "What&#39;s your question?"}, {"owner": {"reputation": 4579, "user_id": 459565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cc92778353971733be88d04c26603ec7?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/459565/eugene"}, "edited": false, "score": 1, "creation_date": 1451501553, "post_id": 34535292, "comment_id": 56812454, "body": "You are comparing pointerd, for which you can&#39;t overload operators"}, {"owner": {"reputation": 13, "user_id": 5731767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/439c1d2ab2638c7c5aa1559a5f2cc388?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio S&#225;nchez Marcos", "link": "https://stackoverflow.com/users/5731767/antonio-s%c3%a1nchez-marcos"}, "edited": false, "score": 0, "creation_date": 1451501665, "post_id": 34535292, "comment_id": 56812513, "body": "How should i compare this?    &#191;  *(par_node-&gt;value) &lt; (par_T)  ?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5731767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/439c1d2ab2638c7c5aa1559a5f2cc388?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio S&#225;nchez Marcos", "link": "https://stackoverflow.com/users/5731767/antonio-s%c3%a1nchez-marcos"}, "edited": false, "score": 0, "creation_date": 1451502813, "post_id": 34535474, "comment_id": 56813073, "body": "It&#39;s working. Didn&#39;t notice I was comparing pointers. I use T* because I feel more comfortable working with pointers and this way the function do not create new copies of the Node"}], "tags": [], "owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "is_accepted": true, "score": 3, "last_activity_date": 1451502399, "last_edit_date": 1451502399, "creation_date": 1451501832, "answer_id": 34535474, "question_id": 34535292, "link": "https://stackoverflow.com/questions/34535292/overloading-operator-in-template/34535474#34535474", "title": "Overloading &lt; operator in template", "body": "<p>Why does a node have a <code>T*</code> instead of a <code>T</code>?</p>\n\n<p>If you have a good reason to do that, then compare with:</p>\n\n<p><code>*par_T &lt; *(par_node-&gt;value)</code>  </p>\n\n<p>and</p>\n\n<p><code>*(par_node-&gt;value) &lt; *par_T</code>  </p>\n\n<p>Notice the use of <code>*</code> and notice I switched the sides rather than misuse <code>&gt;</code></p>\n\n<p>If you didn't have a good reason to have a node contain a <code>T*</code> then get rid of the <code>*</code>s in this code (and correspondingly elsewhere) but still remember not to use <code>&gt;</code>, <code>==</code>, <code>!=</code> etc.  They all can be inferred by results of <code>&lt;</code> ( <code>a</code> is \"equal to\" <code>b</code> when both <code>a&lt;b</code> and <code>b&lt;a</code> are <code>false</code>)  </p>\n\n<p>You also need to fix more things than you asked about.  You seem generally confused about the nature of pointers.  An extreme example from your code:</p>\n\n<pre><code>  if (par_node == nullptr) {\n    par_node-&gt;left = nullptr;\n    par_node-&gt;value = par_T;\n    par_node-&gt;right = nullptr;\n  }\n</code></pre>\n\n<p>Think about what that code is doing!</p>\n"}], "owner": {"reputation": 13, "user_id": 5731767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/439c1d2ab2638c7c5aa1559a5f2cc388?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio S&#225;nchez Marcos", "link": "https://stackoverflow.com/users/5731767/antonio-s%c3%a1nchez-marcos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 34535474, "answer_count": 1, "score": 1, "last_activity_date": 1451502399, "creation_date": 1451500991, "last_edit_date": 1451501564, "question_id": 34535292, "link": "https://stackoverflow.com/questions/34535292/overloading-operator-in-template", "title": "Overloading &lt; operator in template", "body": "<p>I'm programming a binary tree class template. When I add a new node I check if the new one is less or greater than current. </p>\n\n<p>I overloaded &lt; and > operator in the class type (Object) and works properly but the template doesn't call the overloaded operator, instead uses the generated by the compiler.</p>\n\n<blockquote>\n  <p>object.cc - Comparison between objects works outside the template</p>\n</blockquote>\n\n<pre><code>bool Object::operator&lt;(const Object&amp; par_other) const \n{\n  printf(\"\\n    &lt;\");\n  return id_ &lt; par_other.id_;  //assume that you compare the record based on a\n}\n</code></pre>\n\n<p>EDIT 1: Added some requested code. Thx for the help :)</p>\n\n<pre><code>struct Node {\n    T* value;\n    Node* left;\n    Node* right;\n  };\n\ntemplate &lt;class T&gt; \nvoid BinaryTree&lt;T&gt;::add(T* par_T, Node* par_node) {\n  if (par_node == nullptr) {\n    par_node-&gt;left = nullptr;\n    par_node-&gt;value = par_T;\n    par_node-&gt;right = nullptr;\n\n  } else {\n    if (par_node-&gt;value == nullptr) {\n      par_node-&gt;value = par_T;\n\n    } else if (par_node-&gt;value &gt; par_T) {\n      if (!par_node-&gt;right) {\n        par_node-&gt;right = createNode();\n      }\n      add(par_T, par_node-&gt;right);\n\n    } else if (par_node-&gt;value &lt; par_T) {\n      if (!par_node-&gt;left) {\n        par_node-&gt;left = createNode();\n      }\n      add(par_T, par_node-&gt;left);\n    }\n  }\n</code></pre>\n"}, {"tags": ["c++", "object", "scope"], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1451500392, "post_id": 34535007, "comment_id": 56811892, "body": "@BenjaminLindley: I don&#39;t know what you&#39;re talking about! Ahem."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1451500584, "post_id": 34535007, "comment_id": 56811982, "body": "@BenjaminLindley: Gah! Shush! This new-fangled monstrosiceeplusplus!"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 3, "last_activity_date": 1451500555, "last_edit_date": 1451500555, "creation_date": 1451499853, "answer_id": 34535007, "question_id": 34534975, "link": "https://stackoverflow.com/questions/34534975/how-can-i-choose-just-one-object/34535007#34535007", "title": "How can i choose just one object?", "body": "<p>This is what <em>interfaces</em> are for!</p>\n\n<p>Do this:</p>\n\n<ul>\n<li>Declare an abstract class called <code>Vocabulario</code></li>\n<li>Make <code>VocabolarioRB</code> inherit from <code>Vocabulario</code></li>\n<li>Make <code>VocabolarioHT</code> inherit from <code>Vocabulario</code><br>\n<sup>(this is what you're calling <code>Vocabulario</code> at the moment)</sup></li>\n</ul>\n\n<p>Each of these types should have the same member functions. Then, in your <code>main</code>, it doesn't really matter which implementation you've chosen, because you just call the functions you need through a <code>Vocabulario*</code> pointer.</p>\n\n<pre><code>const bool use_hash = false;\nstd::unique_ptr&lt;Vocabulario&gt; ptr(\n   use_hash\n   ? new VocabularioRB()\n   : new VocabularioHT()\n);\n\nptr-&gt;foo();\nptr-&gt;bar();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5731667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfdce9e33d0d788722925493cca6c9ec?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/5731667/john"}, "edited": false, "score": 0, "creation_date": 1451502483, "post_id": 34535476, "comment_id": 56812928, "body": "Actually, I am using &quot;new&quot; so why if I declare an object into the IF then occurs scope errors? I am using dynamic allocation :s"}], "tags": [], "owner": {"reputation": 11, "user_id": 5731667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfdce9e33d0d788722925493cca6c9ec?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/5731667/john"}, "is_accepted": false, "score": 0, "last_activity_date": 1451501844, "creation_date": 1451501844, "answer_id": 34535476, "question_id": 34534975, "link": "https://stackoverflow.com/questions/34534975/how-can-i-choose-just-one-object/34535476#34535476", "title": "How can i choose just one object?", "body": "<p>thank you for replace!\nI used Abstract_dictionary as abstract class and then VocabolarioRB inherit from abstract_dictionary and also VocabolarioHT inherit from abstract_dictionary.\nInto the main i used \"istanza_vocabolario\" that can be related to VocabolarioRB if users chooses 1 or VocabolarioHT if user chooses 2.\nIn the abrasct class i have just variables and methods both common. There are virtual methods that I overrid with specifical class.\nI don't understand your function. I am working on c++\nI have to return VocabolarioRB pointer OR VocabolarioHT pointer. So i can write:\nVocabolarioRB * istanza_vocabolario= new VocabolarioRB;\nor\nVocabolarioHT * istanza_vocabolario= new VocabolarioHT;</p>\n\n<p>and use in my main istanza_vocabolario->Insert/Delete/Find</p>\n\n<p>Thank you!</p>\n"}], "owner": {"reputation": 11, "user_id": 5731667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfdce9e33d0d788722925493cca6c9ec?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/5731667/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1451502045, "creation_date": 1451499720, "last_edit_date": 1451502045, "question_id": 34534975, "link": "https://stackoverflow.com/questions/34534975/how-can-i-choose-just-one-object", "title": "How can i choose just one object?", "body": "<p>Hi I have created two dictionaries with a different implementation (Red Black Trees and Hash Table)\nI have to create just one object of my dictionary named istanza_vocabolario.</p>\n\n<p>Inside <code>main</code> I use for example <code>istanza_vocabolario-&gt;Cancella(parola_new)</code>\nAccording to my choose, <code>istanza_vocabolario</code> has to be <code>VocabolarioRB*</code> type or <code>Vocabolario*</code> .</p>\n\n<p>I can't create a function because I can't know if I have to return a <code>Vocabolario</code> pointer or <code>VocabolarioRB</code> pointer. If I declare the object into the IF, then occurs scope errors.\nHow can I do?\nSorry for bad English, thank you!</p>\n\n<pre><code>#include \"abstract_Vocabolario.h\"\n#include \"abstract_Vocabolario.cpp\"\n\n#include \"VocabolarioRB.h\"\n#include \"Vocabolario.h\"\n#include \"Vocabolario.cpp\"\n\nusing namespace std;\n\nchar Menu();\n\nint main()\n{\n\n\n         VocabolarioRB* istanza_vocabolario = new VocabolarioRB;\n\n        int scelta_vocabolario;\n        cout&lt;&lt;\"Quale vocabolario vuoi utilizzare (1 per RedBlack o 2 per HashTable) ?\"&lt;&lt;endl;\n        cin&gt;&gt;scelta_vocabolario;\n\n\n        if (scelta_vocabolario == 2 )\n        {\n            delete istanza_vocabolario;\n            Vocabolario* istanza_vocabolario = new Vocabolario;\n        }\n\n\n        while(true)\n        {\n            char scelta=Menu();\n            switch(scelta)\n            {\n            case '1':\n                    {\n                    cout&lt;&lt;\" 1)Inserimento parola\"&lt;&lt;endl;\n                    string parola_new;\n                    cout&lt;&lt;endl&lt;&lt;\" Inserisci parola da immettere nel vocabolario:\\n \";\n                    cin&gt;&gt;parola_new;\n                    if (istanza_vocabolario-&gt;Inserisci(parola_new) != 0 )\n                        cout &lt;&lt; \"Inserito con successo\" &lt;&lt; endl;\n                    else\n                        cout &lt;&lt; \"Inserimento non avvenuto\" &lt;&lt; endl;\n                    }\n                    break;\n            case '2':\n                {\n                cout&lt;&lt;\" 3)Ricerca parola\"&lt;&lt;endl;\n                string parola_ricercata;\n                cout&lt;&lt;endl&lt;&lt;\" Inserisci parola da RICERCARE nel vocabolario:\\n \";\n                cin&gt;&gt;parola_ricercata;\n                istanza_vocabolario-&gt;Ricerca(parola_ricercata);\n                }\n                break;\n\n            //case '3':\n                //istanza_vocabolario-&gt;Visita_Albero();       //MOMENTANEAMENTE VALE SOLO PER IL DIZIONARIO 2\n                //break;\n\n            case '4':\n\n                {\n                cout&lt;&lt;\" 4)Eliminazione parola\"&lt;&lt;endl;\n                string parola_new;\n                cout&lt;&lt;endl&lt;&lt;\" Inserisci parola da eliminare nel vocabolario: \";\n                cin&gt;&gt;parola_new;\n                if (istanza_vocabolario-&gt;Cancella(parola_new) != 0)\n                    cout&lt;&lt; \"Eliminato con successo\" &lt;&lt; endl;\n                else\n                cout &lt;&lt;\"Eliminazione NON avvenuta\" &lt;&lt; endl;\n                }\n\n\n                break;\n\n            case 'E':\n                delete istanza_vocabolario;\n                return 0;\n\n            default:\n                cout&lt;&lt;\" ATTENZIONE\";\n                cout&lt;&lt;\" valore inserito non valido.\"&lt;&lt;endl;\n            }\n        }\n\n\nreturn 0;\n}\n\nchar Menu()\n{\n    cout&lt;&lt;endl&lt;&lt;endl&lt;&lt;\" Menu Vocabolario\"&lt;&lt;endl&lt;&lt;endl;;\n    cout&lt;&lt;\" Scegli l'operazione da compiere:\"&lt;&lt;endl&lt;&lt;endl;\n    cout&lt;&lt;\" 1\";\n    cout&lt;&lt;\" - Inserisci nuova parola;\"&lt;&lt;endl;\n    cout&lt;&lt;\" 2\";\n    cout&lt;&lt;\" - Ricerca parola;\"&lt;&lt;endl;\n    cout&lt;&lt;\" 3\";\n    cout&lt;&lt;\" - Visualizza albero;\"&lt;&lt;endl;\n    cout&lt;&lt;\" 4\";\n    cout&lt;&lt;\" - Elimina parola;\"&lt;&lt;endl;\n    cout&lt;&lt;\" E\";\n    cout&lt;&lt;\" - Esci dal programma.\"&lt;&lt;endl&lt;&lt;\" \";;\n    cout&lt;&lt;endl&lt;&lt;\" Digita il numero dell'operazione: \";\n    char valore;\n    cin&gt;&gt;valore;\n    cout&lt;&lt;endl;\n    return valore;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qimage"], "answers": [{"comments": [{"owner": {"reputation": 2178, "user_id": 2050745, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/2B5fs.jpg?s=128&g=1", "display_name": "Nejc Galof", "link": "https://stackoverflow.com/users/2050745/nejc-galof"}, "edited": false, "score": 0, "creation_date": 1451501040, "post_id": 34535064, "comment_id": 56812182, "body": "I don&#39;t have indexed format, soo I need solution for saving pixels in file. Here I got index-  out of range."}, {"owner": {"reputation": 2537, "user_id": 4149835, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh6.googleusercontent.com/-n_QVH3KiURQ/AAAAAAAAAAI/AAAAAAAAAFM/RomdbXIW1hU/photo.jpg?sz=128", "display_name": "Vladimir Bershov", "link": "https://stackoverflow.com/users/4149835/vladimir-bershov"}, "reply_to_user": {"reputation": 2178, "user_id": 2050745, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/2B5fs.jpg?s=128&g=1", "display_name": "Nejc Galof", "link": "https://stackoverflow.com/users/2050745/nejc-galof"}, "edited": false, "score": 2, "creation_date": 1451502863, "post_id": 34535064, "comment_id": 56813096, "body": "You have problems with save/load, not with setPixel. So you need to read about saving/loading images and formats"}, {"owner": {"reputation": 2178, "user_id": 2050745, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/2B5fs.jpg?s=128&g=1", "display_name": "Nejc Galof", "link": "https://stackoverflow.com/users/2050745/nejc-galof"}, "edited": false, "score": 0, "creation_date": 1451518782, "post_id": 34535064, "comment_id": 56820164, "body": "I found a problem. I put in answer."}], "tags": [], "owner": {"reputation": 2537, "user_id": 4149835, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh6.googleusercontent.com/-n_QVH3KiURQ/AAAAAAAAAAI/AAAAAAAAAFM/RomdbXIW1hU/photo.jpg?sz=128", "display_name": "Vladimir Bershov", "link": "https://stackoverflow.com/users/4149835/vladimir-bershov"}, "is_accepted": false, "score": 2, "last_activity_date": 1451503625, "last_edit_date": 1451503625, "creation_date": 1451500101, "answer_id": 34535064, "question_id": 34534963, "link": "https://stackoverflow.com/questions/34534963/how-to-set-pixels-in-qimage-and-save-changes/34535064#34535064", "title": "How to set pixels in Qimage and save changes", "body": "<p>You have problems with save/load, not with setPixel. May be you need to specify a format while saving, for example:</p>\n\n<pre><code>image.save(\"somefile.jpg\", \"JPG\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2178, "user_id": 2050745, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/2B5fs.jpg?s=128&g=1", "display_name": "Nejc Galof", "link": "https://stackoverflow.com/users/2050745/nejc-galof"}, "is_accepted": true, "score": 0, "last_activity_date": 1451518742, "creation_date": 1451518742, "answer_id": 34538953, "question_id": 34534963, "link": "https://stackoverflow.com/questions/34534963/how-to-set-pixels-in-qimage-and-save-changes/34538953#34538953", "title": "How to set pixels in Qimage and save changes", "body": "<p>Problem is saving in JPG. Somehow this format change values and try making file smaller. I saving in PNG and my values stay like I want.</p>\n\n<pre><code>image.save(\"somefile.png\", \"PNG\");\n</code></pre>\n"}], "owner": {"reputation": 2178, "user_id": 2050745, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/2B5fs.jpg?s=128&g=1", "display_name": "Nejc Galof", "link": "https://stackoverflow.com/users/2050745/nejc-galof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 955, "favorite_count": 0, "accepted_answer_id": 34538953, "answer_count": 2, "score": 0, "last_activity_date": 1451518742, "creation_date": 1451499656, "question_id": 34534963, "link": "https://stackoverflow.com/questions/34534963/how-to-set-pixels-in-qimage-and-save-changes", "title": "How to set pixels in Qimage and save changes", "body": "<p>I want change some colors of pixels and save changes, but not working. \nI have this loop. First I print on screen true value: like 255,173..., and second cout print on screen zeros. Until here is good. </p>\n\n<pre><code>for (int i = 0; i &lt; image-&gt;width(); i++) {\n            for (int j = 0; j &lt; image-&gt;height(); j++) {\n\n                QRgb pixelData = image-&gt;pixel(i,j);\n                int red = qRed(pixelData);\n                cout&lt;&lt;red&lt;&lt;endl;\n                image-&gt;setPixel(i, j, qRgb(0, 0, 0));\n                pixelData = image-&gt;pixel(i,j);\n                int red2 = qRed(pixelData);\n                 cout&lt;&lt;red2&lt;&lt;endl;\n            }\n        }\n</code></pre>\n\n<p>After this loop I saved image. When I reopen or read this image. I got default values.</p>\n\n<pre><code>if (image-&gt;save(out.c_str())) {\n            std::cout &lt;&lt; \"save successful!\" &lt;&lt;out&lt;&lt;std::endl;\n}\n</code></pre>\n\n<p>Path is good. So I think setPixel not work for save function?\nHow can I fix that?</p>\n"}, {"tags": ["c++", "c++11", "global-variables", "smart-pointers"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1451499829, "post_id": 34534927, "comment_id": 56811645, "body": "Is there a reason you need to use a pointer rather than just a plain variable?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1451499921, "post_id": 34534927, "comment_id": 56811695, "body": "It&#39;s generally not a good idea to have global variables, no matter the type. As for your use of smart pointers, you should not really think of them as simply self-deleting pointers, instead think of them from a resource <i>ownership</i> perspective: Can a resource have a single owner at a time, or multiple simultaneous owners. Also, due to the semantics of <code>std::unique_ptr</code> it really doesn&#39;t make much sense to have it as a global variable type, it&#39;s meant to be passed around as an argument."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4241033"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1451499944, "post_id": 34534927, "comment_id": 56811708, "body": "@Galik no. but I could not figure how to initialize my variable without using dynamic allocation"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1451500570, "post_id": 34534927, "comment_id": 56811976, "body": "@EladMaimoni If you don&#39;t need dynamic allocation then I would avoid it, just figure out the syntax how to initialize (most references/tutorials should cover that).."}], "answers": [{"tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 7, "last_activity_date": 1451499852, "creation_date": 1451499852, "answer_id": 34535006, "question_id": 34534927, "link": "https://stackoverflow.com/questions/34534927/using-smart-pointers-as-global-variables/34535006#34535006", "title": "Using smart pointers as global variables", "body": "<p>You want either:</p>\n\n<pre><code>globalCommandBuffer.reset(new CommandBuffer());\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>globalCommandBuffer = std::make_unique&lt;CommandBuffer&gt;();\n</code></pre>\n\n<p>Global variables are very rarely a good idea.</p>\n"}, {"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 6, "last_activity_date": 1451499957, "creation_date": 1451499957, "answer_id": 34535025, "question_id": 34534927, "link": "https://stackoverflow.com/questions/34534927/using-smart-pointers-as-global-variables/34535025#34535025", "title": "Using smart pointers as global variables", "body": "<p>If you want a global (you probably don't, but just in case you do), just create a global. The whole point of a smart pointer is to manage ownership and lifetime. In the case of a global, those are generally quite trivial--you want them to exist before anything else happens, and continue existing until everything else quits happening.</p>\n\n<p>Unless you need something different from that, just create your object as a global object, not a smart pointer to a dynamically allocated object.</p>\n"}, {"comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1451501023, "post_id": 34535048, "comment_id": 56812173, "body": "The header in the OP does not contain any definitions."}], "tags": [], "owner": {"reputation": 545, "user_id": 760365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a609e2719e17ddaf2ae99133b1447b7?s=128&d=identicon&r=PG&f=1", "display_name": "Pravar Jawalekar", "link": "https://stackoverflow.com/users/760365/pravar-jawalekar"}, "is_accepted": false, "score": -3, "last_activity_date": 1451500054, "creation_date": 1451500054, "answer_id": 34535048, "question_id": 34534927, "link": "https://stackoverflow.com/questions/34534927/using-smart-pointers-as-global-variables/34535048#34535048", "title": "Using smart pointers as global variables", "body": "<p>Problem is not with global variable which is some smart_ptr but problem is the fact that you are defining it once in header file - and again in main.cpp. Double definitions would definitely be problematic. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4241033"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6891, "favorite_count": 1, "accepted_answer_id": 34535006, "answer_count": 3, "score": 4, "last_activity_date": 1455020083, "creation_date": 1451499498, "last_edit_date": 1455020083, "question_id": 34534927, "link": "https://stackoverflow.com/questions/34534927/using-smart-pointers-as-global-variables", "title": "Using smart pointers as global variables", "body": "<p>Let's say I have a program in which I must use a global variable (of some class type).</p>\n\n<p>I would like to be able to use smart pointers so I won't have to worry about deleting it.</p>\n\n<p>in some file <code>Common.hpp</code> file I have the declaration:</p>\n\n<pre><code>extern unique_ptr&lt;CommandBuffer&gt; globalCommandBuffer;\n</code></pre>\n\n<p>and in my main.cpp:</p>\n\n<pre><code>#include \"Common.hpp\"\n\nint main(int argc, char* argv[]) {   \n   globalCommandBuffer(new CommandBuffer());\n}\n</code></pre>\n\n<p>this creates many compilation errors. so obviously I'm doing it wrong.</p>\n\n<p>my questions are:</p>\n\n<ul>\n<li>is it a good design choice to use smart pointers for global variables?</li>\n<li>if so, what is the correct way of doing so?</li>\n<li>which smart pointer is preferable?</li>\n</ul>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1451499499, "post_id": 34534885, "comment_id": 56811510, "body": "You never make the pointer <code>Point::x</code> point anywhere, so each time you attempt to dereference it you will have <i>undefined behavior</i>. Also, <code>0</code> is the <i>null pointer</i> and is not a valid address, attempting to dereference a null pointer also leads to undefined behavior."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 3, "last_activity_date": 1451499508, "creation_date": 1451499508, "answer_id": 34534930, "question_id": 34534885, "link": "https://stackoverflow.com/questions/34534885/is-it-possible-to-use-deferenced-pointers-in-initalization-list/34534930#34534930", "title": "Is it possible to use deferenced pointers in initalization list", "body": "<p><code>Point(int x1, int y1):*x(x1),y(y1) {}</code> is not allowed syntax. You can only initialize <strong>members</strong> in the initialization lists, and <code>*x</code> is not a member. Btw, even if the compiler would allow it, it would produce undefined behaviour - you would be dereferencing an un-initialized pointer. </p>\n\n<p>One way (at least, syntaxically correct and not leading to undefined behaviour in this very line) would be</p>\n\n<pre><code> Point(int x1, int y1): x(new int(x1)), y(y1) {}\n</code></pre>\n\n<p>The second question actually is the same as the first. In the second example, you would be accessing the pointer without initializing it first, which would end up in undefined behaviour.</p>\n"}, {"tags": [], "owner": {"reputation": 2533, "user_id": 2925287, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/821554321/picture?type=large", "display_name": "Pierre Emmanuel Lallemant", "link": "https://stackoverflow.com/users/2925287/pierre-emmanuel-lallemant"}, "is_accepted": false, "score": 0, "last_activity_date": 1451499550, "creation_date": 1451499550, "answer_id": 34534939, "question_id": 34534885, "link": "https://stackoverflow.com/questions/34534885/is-it-possible-to-use-deferenced-pointers-in-initalization-list/34534939#34534939", "title": "Is it possible to use deferenced pointers in initalization list", "body": "<p>When the constructor is called <code>Point(int x1, int y1):*x(x1)</code> , your x adress is not correct (not assigned), because it was not initialized so it can point anywhere in your RAM.</p>\n\n<p>When you do <code>*x(x1)</code>, if it is allowed, you will:</p>\n\n<ul>\n<li>either corrupt your current memory</li>\n<li>either segfault</li>\n</ul>\n"}], "owner": {"reputation": 241, "user_id": 3489200, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ce5042dcfae8edb0cf80813a2ea8a97c?s=128&d=identicon&r=PG&f=1", "display_name": "Wolf", "link": "https://stackoverflow.com/users/3489200/wolf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 34534930, "answer_count": 2, "score": 0, "last_activity_date": 1451499636, "creation_date": 1451499343, "question_id": 34534885, "link": "https://stackoverflow.com/questions/34534885/is-it-possible-to-use-deferenced-pointers-in-initalization-list", "title": "Is it possible to use deferenced pointers in initalization list", "body": "<p>I'm trying to get my head around pointers/destruction and such. I'm using the code below to use pointer for x instead of a standard int; however if I use an initialization list in the constructor it won't compile, while if I just assign it normally in the constructor method it's works fine.</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\nclass Point\n{\nprivate:\n    int *x;\n    int y;\npublic:\n    Point(int x1, int y1):*x(x1),y(y1) {}\n\n    // Copy constructor\n    Point(const Point &amp;p2) {*x = *p2.x; y = p2.y; }\n   // ~Point(){delete x;}\n\n    int getX()            {  return *x; }\n    int getY()            {  return y; }\n    void setX(int x1){*x=x1;}\n};\n\nint main()\n{\n    Point p1(10, 15); // Normal constructor is called here\n    Point p2 = p1; // Copy constructor is called here\n    p2.setX(35);\n\n    // Let us access values assigned by constructors\n    cout &lt;&lt; \"p1.x = \" &lt;&lt; p1.getX() &lt;&lt; \", p1.y = \" &lt;&lt; p1.getY();\n    cout &lt;&lt; \"\\np2.x = \" &lt;&lt; p2.getX() &lt;&lt; \", p2.y = \" &lt;&lt; p2.getY();\n\n    return 0;\n}\n</code></pre>\n\n<p>I also have a second question, which is the correct way to initize a int pointer like this: </p>\n\n<pre><code>int *p = new int;\n*p = 3;\n</code></pre>\n\n<p>or like this:</p>\n\n<pre><code>int *p;\n*p = 3;\n</code></pre>\n\n<p>I noticed if I assign nullptr or 0 and try to display the pointer it doesn't output anything is there a reason for this? eg:</p>\n\n<pre><code>int *p = 0;\n*p = 3;\ncout &lt;&lt; *p;\n</code></pre>\n"}, {"tags": ["c++", "matlab", "dll", "visual-studio-2015"], "comments": [{"owner": {"reputation": 9232, "user_id": 501663, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c18dd4411e66f4350569b90f181c279e?s=128&d=identicon&r=PG", "display_name": "Itamar Katz", "link": "https://stackoverflow.com/users/501663/itamar-katz"}, "edited": false, "score": 0, "creation_date": 1451501673, "post_id": 34534785, "comment_id": 56812520, "body": "You don&#39;t give enough details about your setup. Assuming you talk about visual-studio,  you need to set it inside visual-studio, under project properties"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1451504611, "post_id": 34534785, "comment_id": 56813962, "body": "If you changed the PATH variable in windows you will have to restart Visual Studio for the change to happen. A program&#39;s environment variables are not dynamic."}, {"owner": {"reputation": 35, "user_id": 2070148, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fc5c355a01e94f927ef95531ff522814?s=128&d=identicon&r=PG", "display_name": "user2070148", "link": "https://stackoverflow.com/users/2070148/user2070148"}, "edited": false, "score": 0, "creation_date": 1451552286, "post_id": 34534785, "comment_id": 56829090, "body": "I restarted my PC... Still can&#39;t find it.."}, {"owner": {"reputation": 35, "user_id": 2070148, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fc5c355a01e94f927ef95531ff522814?s=128&d=identicon&r=PG", "display_name": "user2070148", "link": "https://stackoverflow.com/users/2070148/user2070148"}, "edited": false, "score": 0, "creation_date": 1451555969, "post_id": 34534785, "comment_id": 56830691, "body": "I added the path to the dll on the properties debugging, PATH= my_dll_dir;%PATH% and from some reason there was no error. It&#39;s strange because this directory exists in the %PATH% too.."}], "owner": {"reputation": 35, "user_id": 2070148, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fc5c355a01e94f927ef95531ff522814?s=128&d=identicon&r=PG", "display_name": "user2070148", "link": "https://stackoverflow.com/users/2070148/user2070148"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1049, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1451498820, "creation_date": 1451498820, "question_id": 34534785, "link": "https://stackoverflow.com/questions/34534785/libmx-dll-is-not-found-though-exists-in-the-path", "title": "libmx.dll is not found though exists in the PATH", "body": "<p>For some reason though I added to the PATH environmental variable while running the project, there's an error message that libmx.dll is missing</p>\n"}, {"tags": ["c++", "eclipse", "c++11", "eclipse-cdt"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1451498742, "post_id": 34534706, "comment_id": 56811167, "body": "Why are you using <code>typedef</code> in C++ to define a type-name of a class? The actual class-name <code>tal</code> is already a type-name."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1451498924, "post_id": 34534706, "comment_id": 56811257, "body": "<code>typedef class tal</code>  Reading too many <code>C</code> books?"}], "answers": [{"comments": [{"owner": {"reputation": 545, "user_id": 760365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a609e2719e17ddaf2ae99133b1447b7?s=128&d=identicon&r=PG&f=1", "display_name": "Pravar Jawalekar", "link": "https://stackoverflow.com/users/760365/pravar-jawalekar"}, "reply_to_user": {"reputation": 905, "user_id": 550384, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/04065e48cca87d7aaea9af3ace1ad781?s=128&d=identicon&r=PG", "display_name": "Tal", "link": "https://stackoverflow.com/users/550384/tal"}, "edited": false, "score": 0, "creation_date": 1451499394, "post_id": 34534818, "comment_id": 56811456, "body": "Then its problem with eclipse that why it is flagging for a valid statement - given that you have made all members public in above code"}, {"owner": {"reputation": 905, "user_id": 550384, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/04065e48cca87d7aaea9af3ace1ad781?s=128&d=identicon&r=PG", "display_name": "Tal", "link": "https://stackoverflow.com/users/550384/tal"}, "edited": false, "score": 0, "creation_date": 1451499454, "post_id": 34534818, "comment_id": 56811488, "body": "I know the problem on eclipse. I need a solution for eclipse CDT built in compiler."}], "tags": [], "owner": {"reputation": 545, "user_id": 760365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a609e2719e17ddaf2ae99133b1447b7?s=128&d=identicon&r=PG&f=1", "display_name": "Pravar Jawalekar", "link": "https://stackoverflow.com/users/760365/pravar-jawalekar"}, "is_accepted": false, "score": 0, "last_activity_date": 1451499141, "last_edit_date": 1451499141, "creation_date": 1451498990, "answer_id": 34534818, "question_id": 34534706, "link": "https://stackoverflow.com/questions/34534706/std-vector-at-could-not-resolve-on-eclipse-cdt-gcc-builtin-compiler/34534818#34534818", "title": "std vector at could not resolve on eclipse CDT GCC Builtin Compiler", "body": "<p>I doubt that code you posted will even compile - it is because including <code>tal's</code> constructor, everything else is <code>private</code> in this class. You can't even create a single object of class <code>tal</code> according to above situation. </p>\n\n<p>I run above code in ideone and following are compiler errors,</p>\n\n<pre><code>prog.cpp: In function 'int main()':\nprog.cpp:4: error: 'tal::tal()' is private\nprog.cpp:13: error: within this context\nprog.cpp:7: error: 'int tal::a' is private\nprog.cpp:16: error: within this context\nprog.cpp:7: error: 'int tal::a' is private\nprog.cpp:18: error: within this context\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 905, "user_id": 550384, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/04065e48cca87d7aaea9af3ace1ad781?s=128&d=identicon&r=PG", "display_name": "Tal", "link": "https://stackoverflow.com/users/550384/tal"}, "edited": false, "score": 0, "creation_date": 1451499354, "post_id": 34534844, "comment_id": 56811438, "body": "I change the code example. The code is compile, but eclipse show unresolved in Eclipse. The problem it on Eclipse. please help."}, {"owner": {"reputation": 389, "user_id": 4585201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cab6e9e5524e6a3394f4ac92c1adb7ad?s=128&d=identicon&r=PG&f=1", "display_name": "Rajnish", "link": "https://stackoverflow.com/users/4585201/rajnish"}, "reply_to_user": {"reputation": 905, "user_id": 550384, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/04065e48cca87d7aaea9af3ace1ad781?s=128&d=identicon&r=PG", "display_name": "Tal", "link": "https://stackoverflow.com/users/550384/tal"}, "edited": false, "score": 0, "creation_date": 1451499747, "post_id": 34534844, "comment_id": 56811607, "body": "Haven&#39;t tested in Eclipse. Let me Check"}], "tags": [], "owner": {"reputation": 389, "user_id": 4585201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cab6e9e5524e6a3394f4ac92c1adb7ad?s=128&d=identicon&r=PG&f=1", "display_name": "Rajnish", "link": "https://stackoverflow.com/users/4585201/rajnish"}, "is_accepted": false, "score": 0, "last_activity_date": 1451499132, "creation_date": 1451499132, "answer_id": 34534844, "question_id": 34534706, "link": "https://stackoverflow.com/questions/34534706/std-vector-at-could-not-resolve-on-eclipse-cdt-gcc-builtin-compiler/34534844#34534844", "title": "std vector at could not resolve on eclipse CDT GCC Builtin Compiler", "body": "<p>Simply make it <code>public</code>.</p>\n\n<pre><code>#include &lt;vector&gt;\n\ntypedef class tal{\npublic:\n    tal()\n    :a(0), b(0)\n    {};\n    int a;\n    int b;\n} Tal;\n\nint main() {\n    std::vector&lt;Tal&gt; tal_vec;\n    Tal tt;\n    tal_vec.push_back(tt);\n    Tal tt2 = tal_vec.at(0);\n    tt2.a;\n\n    int c = tal_vec.at(0).a;\n}\n</code></pre>\n\n<p>Worked fine in <strong>Code::BLocks 13.12</strong></p>\n"}, {"tags": [], "owner": {"reputation": 634, "user_id": 4450986, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/NFN4Q.png?s=128&g=1", "display_name": "Pierre-Antoine Guillaume", "link": "https://stackoverflow.com/users/4450986/pierre-antoine-guillaume"}, "is_accepted": false, "score": 0, "last_activity_date": 1451499296, "creation_date": 1451499296, "answer_id": 34534872, "question_id": 34534706, "link": "https://stackoverflow.com/questions/34534706/std-vector-at-could-not-resolve-on-eclipse-cdt-gcc-builtin-compiler/34534872#34534872", "title": "std vector at could not resolve on eclipse CDT GCC Builtin Compiler", "body": "<p>in C++, interior of class is private by default :</p>\n\n<pre><code>class T\n{\n    int a;\n    int b;\nprivate:\n    int c;\npublic:\n    int d;\nprotected:\n    int e;\n}\n</code></pre>\n\n<p>Here, a, b and c, are \"private\", therefore you cannot access it outside the class.</p>\n\n<p>However, you can access d from everywhere, just by telling variable.d = ...;</p>\n\n<p>For e, only what inherits from T can use it.</p>\n\n<p>This is true for variables, functions etc.</p>\n"}], "owner": {"reputation": 905, "user_id": 550384, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/04065e48cca87d7aaea9af3ace1ad781?s=128&d=identicon&r=PG", "display_name": "Tal", "link": "https://stackoverflow.com/users/550384/tal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 292, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1451849023, "creation_date": 1451498498, "last_edit_date": 1592644375, "question_id": 34534706, "link": "https://stackoverflow.com/questions/34534706/std-vector-at-could-not-resolve-on-eclipse-cdt-gcc-builtin-compiler", "title": "std vector at could not resolve on eclipse CDT GCC Builtin Compiler", "body": "<p>I have problem with <strong>CDT GCC Builtin Compiler</strong> (not with the code).<br />\nHere is a small example that this issue is happen.<br />\nI have this code in eclipse:</p>\n<pre><code>#include &lt;vector&gt;\n\ntypedef struct tal{\n    tal()\n    :a(0), b(0)\n    {};\n    int a;\n    int b;\n} Tal;\n\nint main() {\n    std::vector&lt;Tal&gt; tal_vec;\n    Tal tt;\n    tal_vec.push_back(tt);\n    Tal tt2 = tal_vec.at(0);\n    tt2.a;\n    \n    int c = tal_vec.at(0).a;\n}\n</code></pre>\n<p>At the last statement: <code>int c = tal_vec.at(0).a;</code><br />\nEclipse tell me: <code>Field 'a' could not be resolved</code>.</p>\n<p>Already tell CDT GCC Builtin Compiler add this: <code>-std=c++11</code> flag like <a href=\"https://stackoverflow.com/questions/22074724/c11-full-support-on-eclipse\">here</a></p>\n<p>In the other statement you can see that there is no error if i tell eclipse to go <code>Tal tt2 = tal_vec.at(0);</code> the after that to get filed a value.</p>\n<p>can anyone suggest a solution?</p>\n"}, {"tags": ["c++", "pointers", "vector", "constructor"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1451499497, "post_id": 34534702, "comment_id": 56811509, "body": "&quot;I just can&#39;t&quot; isn&#39;t a scientific problem statement. Please try again."}], "answers": [{"tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": true, "score": 1, "last_activity_date": 1451498843, "creation_date": 1451498843, "answer_id": 34534789, "question_id": 34534702, "link": "https://stackoverflow.com/questions/34534702/switch-vectors-of-a-pointer-to-a-object-c/34534789#34534789", "title": "switch vectors of a pointer to a object c++", "body": "<p>Assuming that we're talking about a <code>std::vector&lt;Person*&gt;</code> then you just need to erase the correct iterator and add the item to another vector, there is no need to copy the actual person through dynamic allocation and copy constructor. Eg:</p>\n\n<pre><code>std::vector&lt;Person*&gt; from, to;\n\nint id;\nauto it = std::find_if(from.begin(), from.end(), [id](const Person&amp; p) { return p-&gt;getID() == id; });\nif (it != from.end())\n{\n  to.push_back(*it);\n  from.erase(it);\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 5704390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e1d9005f3c4f6ca1383953fafee0947e?s=128&d=identicon&r=PG&f=1", "display_name": "daniel hernandez", "link": "https://stackoverflow.com/users/5704390/daniel-hernandez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 34534789, "answer_count": 1, "score": -1, "last_activity_date": 1451498843, "creation_date": 1451498483, "question_id": 34534702, "link": "https://stackoverflow.com/questions/34534702/switch-vectors-of-a-pointer-to-a-object-c", "title": "switch vectors of a pointer to a object c++", "body": "<p>I want to move a certain pointer to an object from one vector to another, here's a bit of my current code:</p>\n\n<pre><code>person * room::remove_person(const int &amp;id) {\n\n person* new_person;\n for (auto p = ppl_room.begin(); p != ppl_room.end(); p++) {\n     if ((*p)-&gt;getID() == id) {\n         new_person = new person(*p); \n     }\n\n }\n return new_person;\n</code></pre>\n\n<p>}</p>\n\n<p>I have a copy constructor but I just can't retrieve the pointer to the object from the vector to then create a new one and return it...\nAny tips on how to make this code work? </p>\n\n<p>note: the vector is a vector of pointers of person</p>\n"}, {"tags": ["c++", "opencv", "imread"], "comments": [{"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "edited": false, "score": 0, "creation_date": 1451500589, "post_id": 34534665, "comment_id": 56811985, "body": "I assume you are on Windows and you have flipped it using &quot;right click-&gt; rotate&quot;, right?"}, {"owner": {"reputation": 1720, "user_id": 4319615, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/52d7052ff26d3708873442a5aba19dd8?s=128&d=identicon&r=PG&f=1", "display_name": "zakjma", "link": "https://stackoverflow.com/users/4319615/zakjma"}, "reply_to_user": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "edited": false, "score": 0, "creation_date": 1451501269, "post_id": 34534665, "comment_id": 56812293, "body": "No, I haven&#39;t. The photo was taken from my smart phone. I use windows."}, {"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "edited": false, "score": 0, "creation_date": 1451501373, "post_id": 34534665, "comment_id": 56812357, "body": "mmm then I do not know.. I mentioned that because I had similar problem that if I flipped it from windows the image will shown as flipped in windows but it actually does not ( Ithink windows makes some change to the metadata not the actual data) good luck!"}], "answers": [{"comments": [{"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "edited": false, "score": 0, "creation_date": 1451501649, "post_id": 34535358, "comment_id": 56812504, "body": "Same issue for Windows built-in flipping.. So annoying -_-"}], "tags": [], "owner": {"reputation": 1222, "user_id": 302951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e12fc799c2b4cba0282f773851cf204?s=128&d=identicon&r=PG", "display_name": "morotspaj", "link": "https://stackoverflow.com/users/302951/morotspaj"}, "is_accepted": false, "score": 2, "last_activity_date": 1451502006, "last_edit_date": 1451502006, "creation_date": 1451501322, "answer_id": 34535358, "question_id": 34534665, "link": "https://stackoverflow.com/questions/34534665/opencv-imread-returns-false-size/34535358#34535358", "title": "opencv - imread returns false size", "body": "<p>The image is probably encoded that way. Smartphones typically encode images the same direction every time regardless of how it is held but will add meta data to the image so that the viewing program can show it the intended way. OpenCV does not take this meta data into account. You can rotate the image yourself though. (Use 1 instead of 0 if the image becomes upside down).</p>\n\n<pre><code>cv::transpose(image, image);\ncv::flip(image, image, 0);\n</code></pre>\n\n<p>If you prefer to modify the image on disk instead you can use <a href=\"https://www.gimp.org/\" rel=\"nofollow\">gimp</a>. Simply open the image and save/export it. Gimp will use the meta data when opening the image but re-encode the image without it.</p>\n"}], "owner": {"reputation": 1720, "user_id": 4319615, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/52d7052ff26d3708873442a5aba19dd8?s=128&d=identicon&r=PG&f=1", "display_name": "zakjma", "link": "https://stackoverflow.com/users/4319615/zakjma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 370, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1451502006, "creation_date": 1451498324, "question_id": 34534665, "link": "https://stackoverflow.com/questions/34534665/opencv-imread-returns-false-size", "title": "opencv - imread returns false size", "body": "<p>I have a 720x1280 image. I try to load ans show it. But I see 90 degree rotated image(1280x720). </p>\n\n<p>My simple code is : </p>\n\n<pre><code>cout &lt;&lt; \"Size = \" &lt;&lt; imread(fileName).size() &lt;&lt; endl;\n</code></pre>\n\n<p>The result is :   </p>\n\n<pre><code>Size = [1280x720]\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/zQzvh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zQzvh.png\" alt=\"enter image description here\"></a></p>\n\n<p>How can I load and show big size image using opencv? I use opencv 2.4.10.</p>\n"}, {"tags": ["c++", "matrix", "boost", "xeon-phi", "binary-matrix"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1451499250, "post_id": 34534606, "comment_id": 56811394, "body": "You forgot the most important information -- Did you build your program with optimizations turned on?  If not, then this whole post becomes moot."}, {"owner": {"reputation": 208848, "user_id": 46642, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/wjb79.jpg?s=128&g=1", "display_name": "R. Martinho Fernandes", "link": "https://stackoverflow.com/users/46642/r-martinho-fernandes"}, "edited": false, "score": 2, "creation_date": 1451520752, "post_id": 34534606, "comment_id": 56820681, "body": "Bill Gosper&#39;s* paper <a href=\"https://www.lri.fr/~filliatr/m1/gol/gosper-84.pdf\" rel=\"nofollow noreferrer\">Exploiting regularities in large cellular spaces</a> may be of interest to you."}, {"owner": {"reputation": 208848, "user_id": 46642, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/wjb79.jpg?s=128&g=1", "display_name": "R. Martinho Fernandes", "link": "https://stackoverflow.com/users/46642/r-martinho-fernandes"}, "edited": false, "score": 0, "creation_date": 1451520788, "post_id": 34534606, "comment_id": 56820690, "body": "*Yes, that&#39;s the same Gosper of glider gun fame."}], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1451517886, "post_id": 34535139, "comment_id": 56819893, "body": "I think there are vastly faster ways optimize Conway&#39;s game of life using memoized/precalculated cell configurations."}, {"owner": {"reputation": 208848, "user_id": 46642, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/wjb79.jpg?s=128&g=1", "display_name": "R. Martinho Fernandes", "link": "https://stackoverflow.com/users/46642/r-martinho-fernandes"}, "edited": false, "score": 2, "creation_date": 1451520326, "post_id": 34535139, "comment_id": 56820553, "body": "If you care about performance of Life you may want to do this. But if you care with all-caps bold &quot;really&quot;, you&#39;ll probably want to skip on the micro-optimisation and use Gosper&#39;s HashLife algorithm which is likely to make this micro-optimization pointless. HashLife is just at an entirely different scale here."}], "tags": [], "owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "is_accepted": false, "score": 1, "last_activity_date": 1451500860, "last_edit_date": 1451500860, "creation_date": 1451500394, "answer_id": 34535139, "question_id": 34534606, "link": "https://stackoverflow.com/questions/34534606/most-efficient-way-to-work-with-huge-binary-matrix/34535139#34535139", "title": "Most efficient way to work with HUGE binary matrix?", "body": "<p>If you <strong>REALLY</strong> care about performance in Conway's game of life, you should switch to a purely bit parallel boolean math design.  The simple task of counting 8 neighbors is annoyingly hard as a parallel boolean operation, but worth the trouble.  The 64-way direct parallelism alone pays back a multiple of the cost of bitwise.  </p>\n\n<p>You might have some 128-bit or higher direct parallelism possible on some CPUs with the same basic design.  </p>\n\n<p>Once you are using 64-bit or bigger integers instead of bools, all issues of efficiently storing bools become irrelevant.</p>\n\n<p>When I did this in assembler decades ago, I found one important optimization was to share information between successive rows.  When doing that, it became easier to look at the total of a block of nine cells rather than eight neighbors.  So it may help to realize the rules can be compatibly restated:<br>\nWhen there are 3 in its set of 9, a cell turns on (whether it was on before or not).<br>\nWhen there are 4 in its set of 9, a cell is unchanged.<br>\nOtherwise it turns off.  </p>\n\n<p>The way info was shared across rows heavily depended on the asm language and register set of that machine decades ago.  So you might or might not find looking at the full 9 (instead of 8 neighbors) helps you.</p>\n"}], "owner": {"reputation": 310, "user_id": 4060069, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7320320fe89989b900f684dcab0846a7?s=128&d=identicon&r=PG&f=1", "display_name": "Draxent", "link": "https://stackoverflow.com/users/4060069/draxent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 697, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1451579052, "creation_date": 1451498104, "last_edit_date": 1451579052, "question_id": 34534606, "link": "https://stackoverflow.com/questions/34534606/most-efficient-way-to-work-with-huge-binary-matrix", "title": "Most efficient way to work with HUGE binary matrix?", "body": "<p>I have a huge binary matrix, like <strong>100000 x 100000</strong>.</p>\n\n<p>Reading this article <a href=\"http://www.cs.up.ac.za/cs/vpieterse/pub/PieterseEtAl_SAICSIT2010.pdf\" rel=\"nofollow\">http://www.cs.up.ac.za/cs/vpieterse/pub/PieterseEtAl_SAICSIT2010.pdf</a>, I seemed to understand that the best tradeoff to memorize and work with a binary matrix is using <strong>boost::dynamic_bitsets</strong>.</p>\n\n<p>Since in <strong><em>\"Table 2: Relative time performance of the programs that implemented the data structures\"</em></strong> :\n<strong>std::vector&lt;bool&gt;</strong> is in last position, while <strong>boost::dynamic_bitset</strong> is in first position.</p>\n\n<p>And in <strong><em>\"Table 3: Relative memory usage of the programs that implemented the data structures\"</em></strong>:\n<strong>std::vector&lt;bool&gt;</strong> is in first position, but <strong>boost::dynamic_bitset</strong> is in second position.</p>\n\n<p>Besides, in the paper, at page 7th, there is the following \nstatement:</p>\n\n<blockquote>\n  <p>\"Despite the impressive memory performance of std::vector, its dismal time performance renders it unusable in large-scale applications.\"</p>\n</blockquote>\n\n<p>And in the conclusions:</p>\n\n<blockquote>\n  <p>\"We have shown that boost::dynamic_bitset is considerably more efficient than most of the other implementations in terms of execution speed, while the implementation using std::vector&lt;char&gt; outperformed the other implementations in terms of memory efficiency.\"</p>\n</blockquote>\n\n<p>Now in my case, my target machine is a <strong>XEON PHI</strong>.<br />\nMy target application is <a href=\"https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life\" rel=\"nofollow\">Game Of Life</a>.<br />\nI have rappresented the binary matrix as a binary array of ROWS x COLS cells.</p>\n\n<p>I have tried the code with 3 different configurations, bulding them with -the <strong>icpc</strong> compiler with <strong>-O3</strong> optimization flag:</p>\n\n<ol>\n<li><strong>Array of booleans</strong></li>\n<li><strong>Array of booleans + vectorization</strong>, i.e. changing the code using the <strong>Array Notation</strong> as described <a href=\"https://software.intel.com/sites/default/files/managed/f0/24/4.1-cilkplus-vectorization.pdf\" rel=\"nofollow\">here</a></li>\n<li><p><strong>boost::dynamic_bitsets</strong>. In this case, I could not change the code using the Array Notation since, when I try, I get the following error:</p>\n\n<pre><code>error: base of array section must be pointer or array type\n</code></pre>\n\n<p>same error when using <strong>std::vector&lt;bool&gt;</strong>.</p></li>\n</ol>\n\n<p>Looking to the performance of just one iteration of the game main loop for a matrix of 100000 x 100000 size, I have found that: <strong>solution 2</strong> works almost six times faster than <strong>solution 1</strong>, but unexpectedly <strong>solution 1</strong> works twice faster than <strong>solution 3</strong>.</p>\n\n<p>In conclusion, I have the following questions to make:</p>\n\n<ol>\n<li>What is, in general, the most efficient data structure to store/work with an <strong>HUGE MATRIX</strong> ?</li>\n<li>Can I do better than <em>\"answer 1\"</em> knowing that my target machine is a <strong>XEON PHI</strong> ?</li>\n<li>Is it possible to apply <strong>vectorization</strong> to <strong>vector&lt;bool&gt;</strong> or <strong>boost::dynamic_bitsets</strong> ?</li>\n</ol>\n\n<p>Thanks for the answer about the specific target application: Game Of Life.<br />\nBut what about working with a <strong>huge binary matrix in other context</strong> ?</p>\n"}, {"tags": ["c++", "class", "pointers"], "comments": [{"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1451498029, "post_id": 34534462, "comment_id": 56810780, "body": "Right. because it would be unsafe to blindly downcast an <code>A*</code> to a <code>B*</code>"}, {"owner": {"reputation": 141, "user_id": 2864439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d08d0ac7b93bd7e028973b028e727bf?s=128&d=identicon&r=PG&f=1", "display_name": "tetorea", "link": "https://stackoverflow.com/users/2864439/tetorea"}, "edited": false, "score": 0, "creation_date": 1451498195, "post_id": 34534462, "comment_id": 56810858, "body": "what about getting rid of valueB and valueC and just have an int value; in ClassA?"}, {"owner": {"reputation": 1775, "user_id": 5066895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bHw56.png?s=128&g=1", "display_name": "Dieter Meemken", "link": "https://stackoverflow.com/users/5066895/dieter-meemken"}, "edited": false, "score": 0, "creation_date": 1451498616, "post_id": 34534462, "comment_id": 56811098, "body": "You would use the forward declaration of class ClassB in the header of another class and the include in cpp-File. Together with the Sentinel, as described down, it will avoid the loop..."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5731291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f0e05d58882263969ebb47a1236c9b?s=128&d=identicon&r=PG&f=1", "display_name": "nabacc001", "link": "https://stackoverflow.com/users/5731291/nabacc001"}, "edited": false, "score": 0, "creation_date": 1451499420, "post_id": 34534541, "comment_id": 56811468, "body": "I just tested this solution and it works really well. The only difference is that I included ClassB.h in ClassC.cpp instead of ClassA.cpp. Your solution resulted in the same error (incomplete type). I&#39;m not sure why, but could it be because ClassC.h has ClassA.h included (where the forward declaration is) but has no knowledge about ClassA.cpp (where the actual definitione is)?"}], "tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": true, "score": 2, "last_activity_date": 1451497794, "creation_date": 1451497794, "answer_id": 34534541, "question_id": 34534462, "link": "https://stackoverflow.com/questions/34534462/passing-a-pointer-to-one-derived-class-to-another/34534541#34534541", "title": "Passing a pointer to one derived class to another", "body": "<p>When you need to forward declare something it is because you can't include the whole definition of the class. In this situation if you forward declare <code>ClassB</code> the compiler doesn't know about its member attribute <code>valueB</code>, that's why you get an incomplete type error. To solve this problem you have to factor code something like:</p>\n\n<pre><code>//ClassA.h\nclass ClassB;\n\nclass ClassA\n{\n  virtual void action(ClassB* ptr);\n}\n\n//ClassA.cpp\n#include \"ClassB.h\"\nvoid ClassA::action(ClassB* ptr) { ... }\n</code></pre>\n\n<p>So you are basically using the header to declare the virtual method and forward declare <code>ClassB</code>, but you define it in <code>ClassA.cpp</code>, so that in the source file you can include <code>ClassB.h</code> with no problems and no risks of circular dependencies.</p>\n"}, {"comments": [{"owner": {"reputation": 3448, "user_id": 5466118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5af41e2f2230c199ad274d363eda32?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zabel", "link": "https://stackoverflow.com/users/5466118/martin-zabel"}, "edited": false, "score": 0, "creation_date": 1451497946, "post_id": 34534548, "comment_id": 56810731, "body": "Not sure, but I think the OP requested a parameter of type <code>ClassB *</code>."}, {"owner": {"reputation": 3448, "user_id": 5466118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5af41e2f2230c199ad274d363eda32?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zabel", "link": "https://stackoverflow.com/users/5466118/martin-zabel"}, "edited": false, "score": 0, "creation_date": 1451498533, "post_id": 34534548, "comment_id": 56811056, "body": "You edited it in between. <code>ClassB *</code> cannot be used in the parameter list without a forward declaration."}, {"owner": {"reputation": 1775, "user_id": 5066895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bHw56.png?s=128&g=1", "display_name": "Dieter Meemken", "link": "https://stackoverflow.com/users/5066895/dieter-meemken"}, "reply_to_user": {"reputation": 3448, "user_id": 5466118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5af41e2f2230c199ad274d363eda32?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zabel", "link": "https://stackoverflow.com/users/5466118/martin-zabel"}, "edited": false, "score": 0, "creation_date": 1451498775, "post_id": 34534548, "comment_id": 56811185, "body": "You are right. If you want to use ClassB, you would use the forward declaration of class ClassB in the header of another class and the include in cpp-File. Together with the Sentinel it will avoid the loop."}], "tags": [], "owner": {"reputation": 1775, "user_id": 5066895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bHw56.png?s=128&g=1", "display_name": "Dieter Meemken", "link": "https://stackoverflow.com/users/5066895/dieter-meemken"}, "is_accepted": false, "score": 0, "last_activity_date": 1451498319, "last_edit_date": 1451498319, "creation_date": 1451497828, "answer_id": 34534548, "question_id": 34534462, "link": "https://stackoverflow.com/questions/34534462/passing-a-pointer-to-one-derived-class-to-another/34534548#34534548", "title": "Passing a pointer to one derived class to another", "body": "<p>You could define <code>action</code> (in all classes) as:</p>\n\n<pre><code>virtual void action(ClassA * ptr); // or ClassB *\n</code></pre>\n\n<p>Then you can pass any instance of ClassA or derived from ClassA.\nAll derived classes can include ClassA with <code>#include \"ClassA.h\"</code>, if you provide the Sentinel in the header-File as it is common in c++ :</p>\n\n<pre><code>#ifndef ClassAH\n#define ClassAH\n\n...\n\n#endif\n</code></pre>\n\n<p>So, the header will be included only once...</p>\n"}, {"comments": [{"owner": {"reputation": 3448, "user_id": 5466118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5af41e2f2230c199ad274d363eda32?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zabel", "link": "https://stackoverflow.com/users/5466118/martin-zabel"}, "edited": false, "score": 1, "creation_date": 1451499010, "post_id": 34534766, "comment_id": 56811291, "body": "The answer is not bad. But, how should the reader know where to insert the forward declaration? Please take into account, that the OP still learns the basics of C++."}, {"owner": {"reputation": 324, "user_id": 5731639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LMnt2.png?s=128&g=1", "display_name": "Adam J Richardson", "link": "https://stackoverflow.com/users/5731639/adam-j-richardson"}, "reply_to_user": {"reputation": 3448, "user_id": 5466118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5af41e2f2230c199ad274d363eda32?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zabel", "link": "https://stackoverflow.com/users/5466118/martin-zabel"}, "edited": false, "score": 0, "creation_date": 1451500539, "post_id": 34534766, "comment_id": 56811957, "body": "Edited to suggest a place to put the forward declaration. Thanks for the assistance. :)"}], "tags": [], "owner": {"reputation": 324, "user_id": 5731639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LMnt2.png?s=128&g=1", "display_name": "Adam J Richardson", "link": "https://stackoverflow.com/users/5731639/adam-j-richardson"}, "is_accepted": false, "score": 1, "last_activity_date": 1451500401, "last_edit_date": 1451500401, "creation_date": 1451498750, "answer_id": 34534766, "question_id": 34534462, "link": "https://stackoverflow.com/questions/34534462/passing-a-pointer-to-one-derived-class-to-another/34534766#34534766", "title": "Passing a pointer to one derived class to another", "body": "<p>I notice your ClassC virtual function is declared as taking no parameters:</p>\n\n<pre><code>virtual void action();\n</code></pre>\n\n<p>but you define your derived class function with a parameter.</p>\n\n<pre><code>void ClassC::action(ClassB * ptr)\n</code></pre>\n\n<p>The declaration and definition must match. Change the declaration to:</p>\n\n<pre><code>virtual void action(ClassB *);\n</code></pre>\n\n<p>Hmm. But then you must either include ClassB before the ClassC declaration...</p>\n\n<pre><code>#include \"ClassB.h\"\n</code></pre>\n\n<p>or forward declare ClassB. This is a promise to the compiler to properly declare and define the class later. A good place to insert this line would be just before the ClassC declaration.</p>\n\n<pre><code>class ClassB;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5731291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f0e05d58882263969ebb47a1236c9b?s=128&d=identicon&r=PG&f=1", "display_name": "nabacc001", "link": "https://stackoverflow.com/users/5731291/nabacc001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 1, "accepted_answer_id": 34534541, "answer_count": 3, "score": 1, "last_activity_date": 1451500401, "creation_date": 1451497427, "last_edit_date": 1451497501, "question_id": 34534462, "link": "https://stackoverflow.com/questions/34534462/passing-a-pointer-to-one-derived-class-to-another", "title": "Passing a pointer to one derived class to another", "body": "<p>I'm still learning basics of c++, but I'm currently working on a project using derived classes and virtual methods. So the situation is:\nI have a ClassA</p>\n\n<pre><code>class ClassA\n{\npublic:\n    virtual void action();\n};\n</code></pre>\n\n<p>And there are two derived classes B and C:</p>\n\n<pre><code>#include \"ClassA.h\" \n\nclass ClassB: public ClassA\n{\npublic:\n    virtual void action();\n    int valueB;\n};\n</code></pre>\n\n<p>-</p>\n\n<pre><code>#include \"ClassA.h\"\n\nclass ClassC: public ClassA\n{\npublic:\n    virtual void action();\n    int valueC;\n};\n</code></pre>\n\n<p>I want to pass a pointer to an object of ClassB as a parameter of action() in ClassC, so I can do something like this:</p>\n\n<pre><code>void ClassC::action(ClassB * ptr)\n{\ncout &lt;&lt; \"The value is: \" &lt;&lt; ptr-&gt;valueB;\n}\n</code></pre>\n\n<p>However I cannot find a working way to do it. All of the object pointers are stored in a</p>\n\n<pre><code>vector&lt;ClassA *&gt; objects\n</code></pre>\n\n<p>where</p>\n\n<pre><code>objects[0]=new ClassC();\nobjects[1]=new ClassB();\n</code></pre>\n\n<p>if I try something like</p>\n\n<pre><code>objects[0]-&gt;action(object[1])\n</code></pre>\n\n<p>then I need my virtual method in ClassA to have a parameter ClassB *. And then for a program to recognise the type I tried either including entire ClassB.h (bad idea, it creates a \"loop\" of includes or something) or using a forward declaration class ClassB; (I get an error about invalid use of incomplete type). And so I'm currently stuck. I hope that everything is clear, but I can of course provide more datails if needed.</p>\n"}, {"tags": ["c++", "email"], "comments": [{"owner": {"reputation": 3448, "user_id": 5466118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5af41e2f2230c199ad274d363eda32?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zabel", "link": "https://stackoverflow.com/users/5466118/martin-zabel"}, "edited": false, "score": 0, "creation_date": 1451497412, "post_id": 34534372, "comment_id": 56810442, "body": "So, what is your question?"}, {"owner": {"reputation": 13, "user_id": 5376113, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/44e494d2cb364da53e4d8443650c5f63?s=128&d=identicon&r=PG&f=1", "display_name": "Rick Towers", "link": "https://stackoverflow.com/users/5376113/rick-towers"}, "reply_to_user": {"reputation": 3448, "user_id": 5466118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5af41e2f2230c199ad274d363eda32?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zabel", "link": "https://stackoverflow.com/users/5466118/martin-zabel"}, "edited": false, "score": 0, "creation_date": 1451497859, "post_id": 34534372, "comment_id": 56810671, "body": "My question is how can i send email using gmail with gmail smtp and enable TLS ? It should connect to gmail server (smtp.gmail.com) on port 587 with username and password and send email"}, {"owner": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "edited": false, "score": 0, "creation_date": 1451499079, "post_id": 34534372, "comment_id": 56811321, "body": "You can achieve this by following <code>STARTTLS</code> spec and implementing TLS channel with encryption and decryption of the data. You send the same SMTP commands, same syntax, just over secured channel."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1451507453, "last_edit_date": 1451507453, "creation_date": 1451506474, "answer_id": 34536608, "question_id": 34534372, "link": "https://stackoverflow.com/questions/34534372/using-wsock32-to-send-email-with-gmail-and-starttls/34536608#34536608", "title": "using wsock32 to send email with gmail and startTLS", "body": "<p>After connecting to the server and issuing a <code>EHLO</code> (not <code>HELO</code>) command, if the server's reply includes the <code>STARTTLS</code> capability then you can issue a <code>STARTTLS</code> command at any time to create a secure session with the server.  Upon receiving a successful <code>STARTTLS</code> reply, you need to send and complete an SSL/TLS handshake.  Once the session has been created, you can continue sending your SMTP commands and receiving SMTP replies, starting with a new <code>EHLO</code> command (as the server's capabilities can change after the connection is secured).  You have to encrypt your commands and decrypt the replies as you go.  The communication would look like this (this example assumes an Application-Specific password has been configured in GMail if two-step verification is enabled):</p>\n\n<pre>\nS:    220 smtp.gmail.com ESMTP dg12sm55710335pac.47 - gsmtp\nC:    EHLO &lt;hostname>\nS:    250-smtp.gmail.com at your service, [&lt;ip address>]\nS:    250-SIZE 35882577\nS:    250-8BITMIME\nS:    250-STARTTLS\nS:    250-ENHANCEDSTATUSCODES\nS:    250-PIPELINING\nS:    250-CHUNKING\nS:    250 SMTPUTF8\nC:    STARTTLS\nS:    220 2.0.0 Ready to start TLS\nC/S:  (Exchange SSL/TLS handshake)\nC/S:  (Everything from here on is now encrypted)\nC:    EHLO &lt;hostname>\nS:    250-smtp.gmail.com at your service, [&lt;ip address>]\nS:    250-SIZE 35882577\nS:    250-8BITMIME\nS:    250-AUTH LOGIN PLAIN XOAUTH2 PLAIN-CLIENTTOKEN OAUTHBEARER XOAUTH\nS:    250-ENHANCEDSTATUSCODES\nS:    250-PIPELINING\nS:    250-CHUNKING\nS:    250 SMTPUTF8\nC:    AUTH LOGIN\nS:    334 VXNlcm5hbWU6\nC:    (Send base64 encoded username)\nS:    334 UGFzc3dvcmQ6\nC:    (Send base64 encoded password)\nS:    235 2.7.0 Accepted\nC:    (Send email as needed)\nC:    QUIT\nS:    221 2.0.0 closing connection m1sm91929700pfi.27 - gsmtp\n</pre>\n\n<p>Now, how you actually handle the encryption is up to you.  You can use a library like OpenSSL, or you can use Microsoft's Crypto/SChannel API.  There are plenty of online tutorials and books on how to use them with sockets.</p>\n"}], "owner": {"reputation": 13, "user_id": 5376113, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/44e494d2cb364da53e4d8443650c5f63?s=128&d=identicon&r=PG&f=1", "display_name": "Rick Towers", "link": "https://stackoverflow.com/users/5376113/rick-towers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 722, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1451507453, "creation_date": 1451497152, "question_id": 34534372, "link": "https://stackoverflow.com/questions/34534372/using-wsock32-to-send-email-with-gmail-and-starttls", "title": "using wsock32 to send email with gmail and startTLS", "body": "<p>Hello and good evening to you,</p>\n\n<p>This topic has been sort of a trouble to me and to many, suppose i want to send EMail in a C++ program to use smtp and StartTLS , what do i do, i culled a simple source code from google and i saw this code from here</p>\n\n<p><a href=\"http://www.drdobbs.com/sending-e-mail-using-smtp-and-winsock/184416591\" rel=\"nofollow\">http://www.drdobbs.com/sending-e-mail-using-smtp-and-winsock/184416591</a></p>\n\n<p>now i want to use google mail and it uses authentication for smtp and also startTLS how do i do this </p>\n\n<p>the sourcecode i saw looks like this </p>\n\n<pre><code>#pragma comment(lib, \"wsock32.lib\")\n\n#include &lt;windows.h&gt;\n#include \"MailMessage.h\"\n\nint main(int argc, char **argv)\n{\n  MailMessage mail(\"A Sender\",\n    \"someone@someplace.com\",\n    \"mail.someplace.com\");\n  mail.To(\"A Recipient\",\n    \"you@yourplace.com\");\n  mail.Subject(\"Sample message\");\n\n  mail.Body(\"Plain text body\",\n    \"&lt;HTML&gt;&lt;BODY&gt;\\r\\n\"\n    \" &lt;H2&gt;HTML Body&lt;/H2&gt;\\r\\n\"\n    \"&lt;/BODY&gt;&lt;/HTML&gt;\"\"\\r\\n\");\n\n  mail.Attach(\"C:\\\\Attach.txt\");\n\n  const char *result =\n    mail.Send().data();\n\n  if (result[0] == '\\0')\n    result = \"Success\";\n\n  MessageBox(NULL, result, \"Result\",\n    MB_ICONINFORMATION|MB_OK);\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 389, "user_id": 4585201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cab6e9e5524e6a3394f4ac92c1adb7ad?s=128&d=identicon&r=PG&f=1", "display_name": "Rajnish", "link": "https://stackoverflow.com/users/4585201/rajnish"}, "edited": false, "score": 0, "creation_date": 1451497865, "post_id": 34534336, "comment_id": 56810673, "body": "Can u elaborate what you are trying? Your Question is not clear to me."}, {"owner": {"reputation": 2537, "user_id": 4149835, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh6.googleusercontent.com/-n_QVH3KiURQ/AAAAAAAAAAI/AAAAAAAAAFM/RomdbXIW1hU/photo.jpg?sz=128", "display_name": "Vladimir Bershov", "link": "https://stackoverflow.com/users/4149835/vladimir-bershov"}, "edited": false, "score": 0, "creation_date": 1451505198, "post_id": 34534336, "comment_id": 56814233, "body": "QPalette::Highlight - A color to indicate a selected item or the current item. By default, the highlight color is Qt::darkBlue...  QPalette pal = ui.menu-&gt;palette();  QColor clr = pal.color(QPalette::Highlight); ?"}, {"owner": {"reputation": 21, "user_id": 5728751, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-M2YwRG96E20/AAAAAAAAAAI/AAAAAAAAHvM/fUH79tHsbCg/photo.jpg?sz=128", "display_name": "\u0421\u0442\u0430\u0441 \u041c\u0438\u043d\u0430\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/5728751/%d0%a1%d1%82%d0%b0%d1%81-%d0%9c%d0%b8%d0%bd%d0%b0%d0%ba%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1451506113, "post_id": 34534336, "comment_id": 56814653, "body": "I have tried this already: QMenu menu; color = menu.palette().color(QPalette::Highlight). It returns a wrong color. It&#39;s too dark."}, {"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 0, "creation_date": 1451508645, "post_id": 34534336, "comment_id": 56816001, "body": "Have you tried to simply make your widget have a transparent background?"}, {"owner": {"reputation": 6147, "user_id": 3767076, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/64707b213de57fb785081ba23aaea2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3767076/felix"}, "edited": false, "score": 1, "creation_date": 1451514730, "post_id": 34534336, "comment_id": 56818785, "body": "You can check how it&#39;s done in QWindowsStyle. Thats an internal class of qt. Walk through the source and look for <code>drawControl</code>"}, {"owner": {"reputation": 480, "user_id": 5395762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UcDfi.jpg?s=128&g=1", "display_name": "Devopia", "link": "https://stackoverflow.com/users/5395762/devopia"}, "edited": false, "score": 0, "creation_date": 1451532234, "post_id": 34534336, "comment_id": 56823198, "body": "Some styles do not use the palette, if they make use of native theme engines."}], "owner": {"reputation": 21, "user_id": 5728751, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-M2YwRG96E20/AAAAAAAAAAI/AAAAAAAAHvM/fUH79tHsbCg/photo.jpg?sz=128", "display_name": "\u0421\u0442\u0430\u0441 \u041c\u0438\u043d\u0430\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/5728751/%d0%a1%d1%82%d0%b0%d1%81-%d0%9c%d0%b8%d0%bd%d0%b0%d0%ba%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 704, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1451504862, "creation_date": 1451497010, "last_edit_date": 1451504534, "question_id": 34534336, "link": "https://stackoverflow.com/questions/34534336/get-color-of-highlighted-menu-item", "title": "Get color of highlighted menu item", "body": "<p>How can I get default color of a <a href=\"http://i.stack.imgur.com/VdskO.png\" rel=\"nofollow\">highlighted menu item</a> in qt?\nI want to add a multiline menu item such as <a href=\"http://i.stack.imgur.com/z6PvY.png\" rel=\"nofollow\">this</a>. So I created a custom class inherited from QWidgetAction. I want to emulate native look&amp;feel for this menu item. When the widget is under mouse, I need to change it's background color to default background of a highlighted menu item.</p>\n"}, {"tags": ["c++", "while-loop"], "comments": [{"owner": {"reputation": 21, "user_id": 5650898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1629fa2e5794b36c340aa5f2e8478eb3?s=128&d=identicon&r=PG&f=1", "display_name": "Wenge Xu", "link": "https://stackoverflow.com/users/5650898/wenge-xu"}, "edited": false, "score": 0, "creation_date": 1451496495, "post_id": 34534190, "comment_id": 56809967, "body": "Sorry it looks terrible, it&#39;s my first time to post the answer."}, {"owner": {"reputation": 21, "user_id": 5650898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1629fa2e5794b36c340aa5f2e8478eb3?s=128&d=identicon&r=PG&f=1", "display_name": "Wenge Xu", "link": "https://stackoverflow.com/users/5650898/wenge-xu"}, "edited": false, "score": 0, "creation_date": 1451496529, "post_id": 34534190, "comment_id": 56809989, "body": "Same background as <a href=\"http://stackoverflow.com/questions/14574394/c-sorting-algorithm\">stackoverflow.com/questions/14574394/c-sorting-algorithm</a> but not same issue"}, {"owner": {"reputation": 1306, "user_id": 1628919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd5cdad968abf48f8911fac02719bce?s=128&d=identicon&r=PG", "display_name": "Untitled123", "link": "https://stackoverflow.com/users/1628919/untitled123"}, "edited": false, "score": 0, "creation_date": 1451498211, "post_id": 34534190, "comment_id": 56810870, "body": "Could the names have been repeated?"}, {"owner": {"reputation": 21, "user_id": 5650898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1629fa2e5794b36c340aa5f2e8478eb3?s=128&d=identicon&r=PG&f=1", "display_name": "Wenge Xu", "link": "https://stackoverflow.com/users/5650898/wenge-xu"}, "reply_to_user": {"reputation": 1306, "user_id": 1628919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd5cdad968abf48f8911fac02719bce?s=128&d=identicon&r=PG", "display_name": "Untitled123", "link": "https://stackoverflow.com/users/1628919/untitled123"}, "edited": false, "score": 0, "creation_date": 1451506058, "post_id": 34534190, "comment_id": 56814627, "body": "@Untitled123  I don&#39;t think so, because other student also have the same file, if the file is wrong, they should have already told the tutor, if you need a file, I can send you one."}, {"owner": {"reputation": 21, "user_id": 5650898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1629fa2e5794b36c340aa5f2e8478eb3?s=128&d=identicon&r=PG&f=1", "display_name": "Wenge Xu", "link": "https://stackoverflow.com/users/5650898/wenge-xu"}, "edited": false, "score": 0, "creation_date": 1451506089, "post_id": 34534190, "comment_id": 56814642, "body": "@ Lightness Races in Orbit sorry what do you mean?"}, {"owner": {"reputation": 1306, "user_id": 1628919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd5cdad968abf48f8911fac02719bce?s=128&d=identicon&r=PG", "display_name": "Untitled123", "link": "https://stackoverflow.com/users/1628919/untitled123"}, "edited": false, "score": 0, "creation_date": 1451512652, "post_id": 34534190, "comment_id": 56817863, "body": "Manually create a list of around 10 members, and print out intermediate results to ensure things are going right."}, {"owner": {"reputation": 21, "user_id": 5650898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1629fa2e5794b36c340aa5f2e8478eb3?s=128&d=identicon&r=PG&f=1", "display_name": "Wenge Xu", "link": "https://stackoverflow.com/users/5650898/wenge-xu"}, "reply_to_user": {"reputation": 1306, "user_id": 1628919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd5cdad968abf48f8911fac02719bce?s=128&d=identicon&r=PG", "display_name": "Untitled123", "link": "https://stackoverflow.com/users/1628919/untitled123"}, "edited": false, "score": 0, "creation_date": 1451514672, "post_id": 34534190, "comment_id": 56818755, "body": "@Untitled123 yes I have do this, and things are going right, but when it becomes to 3M names, it&#39;s wrong"}, {"owner": {"reputation": 1306, "user_id": 1628919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd5cdad968abf48f8911fac02719bce?s=128&d=identicon&r=PG", "display_name": "Untitled123", "link": "https://stackoverflow.com/users/1628919/untitled123"}, "edited": false, "score": 0, "creation_date": 1451514769, "post_id": 34534190, "comment_id": 56818809, "body": "by 3M do you mean 3 million? Just find a case of 10 ish that goes wrong, try random selecting with every possible case. A big part of finding where things go wrong is reducing the problem but keeping the error."}, {"owner": {"reputation": 1306, "user_id": 1628919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd5cdad968abf48f8911fac02719bce?s=128&d=identicon&r=PG", "display_name": "Untitled123", "link": "https://stackoverflow.com/users/1628919/untitled123"}, "edited": false, "score": 0, "creation_date": 1451514819, "post_id": 34534190, "comment_id": 56818832, "body": ", but after I check the 3M.txt file, I find out the last name still have a westerly neighbour, and is the first name of the list(which is Xc), this seems to indicate there is a loop in our 3M.txt file... Are you meant to handle these"}, {"owner": {"reputation": 21, "user_id": 5650898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1629fa2e5794b36c340aa5f2e8478eb3?s=128&d=identicon&r=PG&f=1", "display_name": "Wenge Xu", "link": "https://stackoverflow.com/users/5650898/wenge-xu"}, "reply_to_user": {"reputation": 1306, "user_id": 1628919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd5cdad968abf48f8911fac02719bce?s=128&d=identicon&r=PG", "display_name": "Untitled123", "link": "https://stackoverflow.com/users/1628919/untitled123"}, "edited": false, "score": 0, "creation_date": 1451516529, "post_id": 34534190, "comment_id": 56819416, "body": "@Untitled123 Thanks for your reply, 3M means 3 millions names in my case, sorry my question not clearly, I wanna know how to reduce error when this loop handle 3 million names, because I do find out there is something wrong in the code when I handle 3 million names, both loops are wrong. But when I using a small number of names, it shows me the right answer."}, {"owner": {"reputation": 1306, "user_id": 1628919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd5cdad968abf48f8911fac02719bce?s=128&d=identicon&r=PG", "display_name": "Untitled123", "link": "https://stackoverflow.com/users/1628919/untitled123"}, "edited": false, "score": 0, "creation_date": 1451517944, "post_id": 34534190, "comment_id": 56819909, "body": "Did you test every single possible initial choice for 10 people? for 100 people?"}, {"owner": {"reputation": 21, "user_id": 5650898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1629fa2e5794b36c340aa5f2e8478eb3?s=128&d=identicon&r=PG&f=1", "display_name": "Wenge Xu", "link": "https://stackoverflow.com/users/5650898/wenge-xu"}, "reply_to_user": {"reputation": 1306, "user_id": 1628919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd5cdad968abf48f8911fac02719bce?s=128&d=identicon&r=PG", "display_name": "Untitled123", "link": "https://stackoverflow.com/users/1628919/untitled123"}, "edited": false, "score": 0, "creation_date": 1451523041, "post_id": 34534190, "comment_id": 56821254, "body": "@Untitled123 yes I have try 100 names, maybe the 3M.txt have some error, I&#39;m testing it now. Thx"}, {"owner": {"reputation": 21, "user_id": 5650898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1629fa2e5794b36c340aa5f2e8478eb3?s=128&d=identicon&r=PG&f=1", "display_name": "Wenge Xu", "link": "https://stackoverflow.com/users/5650898/wenge-xu"}, "reply_to_user": {"reputation": 1306, "user_id": 1628919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd5cdad968abf48f8911fac02719bce?s=128&d=identicon&r=PG", "display_name": "Untitled123", "link": "https://stackoverflow.com/users/1628919/untitled123"}, "edited": false, "score": 0, "creation_date": 1451845016, "post_id": 34534190, "comment_id": 56904689, "body": "@Untitled123 hah My tutor have changed the file, he siad there are error in the file, thanks anyway"}], "owner": {"reputation": 21, "user_id": 5650898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1629fa2e5794b36c340aa5f2e8478eb3?s=128&d=identicon&r=PG&f=1", "display_name": "Wenge Xu", "link": "https://stackoverflow.com/users/5650898/wenge-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1451496953, "creation_date": 1451496445, "last_edit_date": 1451496953, "question_id": 34534190, "link": "https://stackoverflow.com/questions/34534190/sorting-not-working-for-a-large-file", "title": "sorting not working for a large file", "body": "<p>This is the background:</p>\n\n<blockquote>\n  <p>Three million men with distinct names were laid end-to-end, reaching from New York to California. Each participant was given a slip of paper on which he wrote down his own name and the name of the person immediately west of him in the line. The man at the extreme western end of the line didn't understand what to do, so he threw his paper away; the remaining 2,999,999 slips of paper were put in a huge basket and taken to the National Archives in Washington, D.C. Here the contents of the basket were shuffled completely and transferred to magnetic tapes.</p>\n</blockquote>\n\n<p>I'm doing the naive solution provide by tutor, which random find a <code>Xc</code>, then use it search in the unordered_map, if it have this <code>Xc</code> as key, get the value of that key, which is the west name for <code>nameMap1(shows below)</code>, or east name for <code>nameMap2</code> search until can't find the westerly name or easterly name.</p>\n\n<p>According to this, I have following code.</p>\n\n<pre><code>unique_ptr&lt;string&gt; temXc;\n\nnameList1.push_back(*westName);\n\ntemXc.reset(new string);\n\ntemXc = move(westName);\n\nbool isRunning = true;\n\nwhile (isRunning==true)\n{\n    unordered_map&lt;string, string&gt;::const_iterator gotWest = nameMap1.find(*temXc);\n\n    if (gotWest == nameMap1.end())\n    {\n        nameMap1.clear();\n        isRunning = false;\n    }\n    else\n    {\n        temWN.reset(new string);\n        *temWN = gotWest-&gt;second;\n\n        nameList1.push_back(*temWN);\n        nameMap1.erase(*temXc);\n\n        temXc.reset(new string);\n        temXc = move(temWN);\n    }\n}\n</code></pre>\n\n<p>The while loop should help me to find the most westerly name, but it didn't.</p>\n\n<p>For example as the background said, the name should shows like this:</p>\n\n<ul>\n<li>e,f</li>\n<li>a,b</li>\n<li>b,c</li>\n<li>c,d</li>\n<li>d,e</li>\n</ul>\n\n<p>the first name should be the east name, another is west name.</p>\n\n<p>If I randomly choose <code>b</code> as <code>Xc</code>, this while loop can give the list which is <code>b, c, d, e, f</code> which works fine, but if I change to <code>3M.txt</code> which have 3M names, it's not working, the answer do give me a list, but after I check the <code>3M.txt</code> file, I find out the last name still have a westerly neighbour, and is the first name of the list(which is <code>Xc</code>).</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 11, "user_id": 5731498, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9mjN8yIpOAo/AAAAAAAAAAI/AAAAAAAAQjM/OeUz8tyXWug/photo.jpg?sz=128", "display_name": "jmorgie7", "link": "https://stackoverflow.com/users/5731498/jmorgie7"}, "edited": false, "score": 0, "creation_date": 1451496432, "post_id": 34534167, "comment_id": 56809938, "body": "i forgot to add that the answers coming back from matchTemplate are correct -- the matching is correct.  And the memory fault occurs ONLY on the very first call, not on any of the subsequent frames."}, {"owner": {"reputation": 3448, "user_id": 5466118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5af41e2f2230c199ad274d363eda32?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zabel", "link": "https://stackoverflow.com/users/5466118/martin-zabel"}, "edited": false, "score": 0, "creation_date": 1451497034, "post_id": 34534167, "comment_id": 56810268, "body": "You can edit you own question."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5731498, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9mjN8yIpOAo/AAAAAAAAAAI/AAAAAAAAQjM/OeUz8tyXWug/photo.jpg?sz=128", "display_name": "jmorgie7", "link": "https://stackoverflow.com/users/5731498/jmorgie7"}, "is_accepted": false, "score": 0, "last_activity_date": 1452009841, "creation_date": 1452009841, "answer_id": 34616042, "question_id": 34534167, "link": "https://stackoverflow.com/questions/34534167/opencv-matchtemplate-throws-memory-fault-but-only-first-time/34616042#34616042", "title": "OpenCV matchTemplate throws memory fault but only first time", "body": "<p>A sort of answer:</p>\n\n<p>I modified my call to matchTemplate to use a try ... catch block.  but it wouldnt catch the exception.</p>\n\n<p>Then I went into Debug | Windows | Exception Settings and turned <em>off</em> the checkbox for cv::Exception.</p>\n\n<p>Now the program runs without stopping with a memory exception.  It would seem that i have now enabled OpenCV to catch the exception and deal with it.  So the underlying issue still exists but OpenCV is taking care of it.  i would still like to understand why the exception is being thrown in the first place, though.</p>\n"}], "owner": {"reputation": 11, "user_id": 5731498, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9mjN8yIpOAo/AAAAAAAAAAI/AAAAAAAAQjM/OeUz8tyXWug/photo.jpg?sz=128", "display_name": "jmorgie7", "link": "https://stackoverflow.com/users/5731498/jmorgie7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 325, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1452009841, "creation_date": 1451496353, "last_edit_date": 1451765165, "question_id": 34534167, "link": "https://stackoverflow.com/questions/34534167/opencv-matchtemplate-throws-memory-fault-but-only-first-time", "title": "OpenCV matchTemplate throws memory fault but only first time", "body": "<p>I am processing a set of >3000 images of same size changing template every 300 images.</p>\n\n<p>code snippet:</p>\n\n<pre><code>cv::Mat inTplate, cFrame, Cresult;\nCresult.create(resultH, resultW, IPL_DEPTH_32F);\ncFrame(rect).copyTo(inTplate);\n...\n// this part executed for every frame\nmatchTemplate(cFrame, inTplate, Cresult, CV_TM_CCORR_NORMED); \nminMaxLoc(Cresult, &amp;minVal, &amp;maxVal, &amp;minLoc, &amp;maxLoc, Mat());\n</code></pre>\n\n<p>rect = ( 250, 20, 1420, 1040); and resultH = 41; resultW = 501;</p>\n\n<p>the very first time thru the code, the call to matchTemplate throws a memory fault that i believe comes from combase.dll and references an address that is not in the space for any of the three matrices:  cFrame, inTplate or Cresult. </p>\n\n<p>Also the sizes for the three matrices are consistent:  cFrame 1080 rows X 1920 cols, inTplate 1040 rows X 1420 cols; Cresult is 41 rows X 501 cols.  yes the first time inTplate is a region of cFrame; thereafter cFrame is the next image read in.</p>\n\n<p>i verified that the answsers coming back from matchTemplate are correct -- the matching is correct. And the memory fault occurs ONLY on the very first call, not on any of the subsequent frames. </p>\n\n<p>Am I doing something wrong or am i looking at a bug in OpenCV ?</p>\n\n<p>thanks for taking the time.</p>\n"}, {"tags": ["c++", "cuda"], "comments": [{"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 6, "creation_date": 1451496659, "post_id": 34534130, "comment_id": 56810048, "body": "Are we supposed to guess where the syntax error occurs in the 234 lines of code you posted?"}], "answers": [{"tags": [], "owner": {"reputation": 18827, "user_id": 1413133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hqUmk.jpg?s=128&g=1", "display_name": "Manos Nikolaidis", "link": "https://stackoverflow.com/users/1413133/manos-nikolaidis"}, "is_accepted": false, "score": 1, "last_activity_date": 1451497028, "last_edit_date": 1495542185, "creation_date": 1451497028, "answer_id": 34534343, "question_id": 34534130, "link": "https://stackoverflow.com/questions/34534130/cuda-a-new-initializer-may-not-be-specified-for-an-array/34534343#34534343", "title": "CUDA, a new initializer may not be specified for an array", "body": "<p>There is a problem in this line :</p>\n\n<pre><code>list&lt;char[1024]&gt; passwords;\n</code></pre>\n\n<p>Arrays cannot be used in STL containers because it requires the type to be copy constructible and assignable. More details <a href=\"https://stackoverflow.com/a/11044525/1413133\">here</a>. Try using a <code>std::string</code> for each password. Or even an <code>array&lt;char, 1024&gt;</code>.</p>\n\n<p>You are actually using <code>new</code> to create an array here</p>\n\n<pre><code>indvPasswords* pointerToPass = new indvPasswords[totalNumThreads];\n</code></pre>\n\n<p>but I don't see anything wrong with that</p>\n"}, {"tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 1, "last_activity_date": 1451530770, "last_edit_date": 1495542681, "creation_date": 1451521179, "answer_id": 34539309, "question_id": 34534130, "link": "https://stackoverflow.com/questions/34534130/cuda-a-new-initializer-may-not-be-specified-for-an-array/34539309#34539309", "title": "CUDA, a new initializer may not be specified for an array", "body": "<ol>\n<li><p>When I compile your code on linux with the <code>-std=c+=11</code> compiler switch for <code>nvcc</code>, I get a warning on this line:</p>\n\n<pre><code>for (int i = 0; i &lt; (int)totalThreads; i++) {\n</code></pre>\n\n<p>in your <code>comparison</code> function.  Given that <code>totalThreads</code> is a pointer passed to the function:</p>\n\n<pre><code>__device__ bool comparison(indvPasswords *collection, char *password, int *totalThreads)\n</code></pre>\n\n<p>that usage seems almost certainly broken.  I'm pretty sure that warning should not be ignored and what you really want is:</p>\n\n<pre><code>for (int i = 0; i &lt; *totalThreads; i++) {\n</code></pre></li>\n<li><p>The only error I get is on this line:</p>\n\n<pre><code>pointerToPass[i].passwords.push_back(charTmp);\n</code></pre>\n\n<p>but it doesn't seem to be exactly the error you are reporting:</p>\n\n<pre><code>$ nvcc -std=c++11 -o t1016 t1016.cu\n/usr/include/c++/4.8.3/bits/stl_list.h(114): error: a value of type \"const char *\" cannot be used to initialize an entity of type \"char [1024]\"\n      detected during:\n        instantiation of \"std::_List_node&lt;_Tp&gt;::_List_node(_Args &amp;&amp;...) [with _Tp=char [1024], _Args=&lt;const std::list&lt;char [1024], std::allocator&lt;char [1024]&gt;&gt;::value_type &amp;&gt;]\"\n/usr/include/c++/4.8.3/ext/new_allocator.h(120): here\n        instantiation of \"void __gnu_cxx::new_allocator&lt;_Tp&gt;::construct(_Up *, _Args &amp;&amp;...) [with _Tp=std::_List_node&lt;char [1024]&gt;, _Up=std::_List_node&lt;char [1024]&gt;, _Args=&lt;const std::list&lt;char [1024], std::allocator&lt;char [1024]&gt;&gt;::value_type &amp;&gt;]\"\n(506): here\n        instantiation of \"std::list&lt;_Tp, _Alloc&gt;::_Node *std::list&lt;_Tp, _Alloc&gt;::_M_create_node(_Args &amp;&amp;...) [with _Tp=char [1024], _Alloc=std::allocator&lt;char [1024]&gt;, _Args=&lt;const std::list&lt;char [1024], std::allocator&lt;char [1024]&gt;&gt;::value_type &amp;&gt;]\"\n(1561): here\n        instantiation of \"void std::list&lt;_Tp, _Alloc&gt;::_M_insert(std::list&lt;_Tp, _Alloc&gt;::iterator, _Args &amp;&amp;...) [with _Tp=char [1024], _Alloc=std::allocator&lt;char [1024]&gt;, _Args=&lt;const std::list&lt;char [1024], std::allocator&lt;char [1024]&gt;&gt;::value_type &amp;&gt;]\"\n(1016): here\n        instantiation of \"void std::list&lt;_Tp, _Alloc&gt;::push_back(const std::list&lt;_Tp, _Alloc&gt;::value_type &amp;) [with _Tp=char [1024], _Alloc=std::allocator&lt;char [1024]&gt;]\"\nt1016.cu(108): here\n\n1 error detected in the compilation of \"/tmp/tmpxft_0000182c_00000000-8_t1016.cpp1.ii\".\n</code></pre>\n\n<p>The solution to that issue is probably to <a href=\"https://stackoverflow.com/questions/2392308/c-vector-of-char-array\">not use an array as the list element type</a>, as @ManosNikolaidis has already suggested.</p></li>\n<li><p>However a bigger issue I see in your code is that you are attempting to use items from the c++ standard library in <code>__device__</code> functions, and that won't work:</p>\n\n<pre><code>struct indvPasswords\n{\n    int blockId;\n    int threadId;\n    list&lt;char[1024]&gt; passwords;  // using std::list\n};\n...\n__global__ void kernelComp(indvPasswords *collection, char *password, int *totalThreads)\n                           ^^^^^^^^^^^^^\n            // can't use std::list in device code\n</code></pre>\n\n<p>You should re-write your data structures used by the device to only depend on built-in types, or types derived from those built-in types.</p></li>\n</ol>\n"}], "owner": {"reputation": 21, "user_id": 5731540, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d653528a2726b4a51e6eeda8360bd72e?s=128&d=identicon&r=PG&f=1", "display_name": "shorty", "link": "https://stackoverflow.com/users/5731540/shorty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 844, "favorite_count": 0, "accepted_answer_id": 34539309, "answer_count": 2, "score": -3, "last_activity_date": 1451530770, "creation_date": 1451496188, "question_id": 34534130, "link": "https://stackoverflow.com/questions/34534130/cuda-a-new-initializer-may-not-be-specified-for-an-array", "title": "CUDA, a new initializer may not be specified for an array", "body": "<p>So I currently have this code, but i get an error when compiling which is \"a new initializer may not be specified for an array\" but no where in my code am i declaring a NEW array. So i'm unsure where and how this problem is occurring. Here's the section of code where i think the problem is....</p>\n\n<pre><code>struct indvPasswords\n{\n    int blockId;\n    int threadId;\n    list&lt;char[1024]&gt; passwords;\n};\n//22,500 individual blocks\nint gridSize = 150;\n//1024 threads contained within each block\nint blockSize = 32;\nint totalNumThreads = (gridSize*gridSize)*(blockSize*blockSize);\n\nindvPasswords* pointerToPass = new indvPasswords[totalNumThreads];\n</code></pre>\n\n<p>Here is all the source code. It currently uses cuda for dictionary password look ups...</p>\n\n<pre><code>#include \"cuda_runtime.h\"\n#include \"device_launch_parameters.h\"\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;list&gt;\nusing namespace std;\n\n//////////////////////////////\n//          Constants       //\n//////////////////////////////\nstring password = \"C:\\\\Users\\\\james\\\\Desktop\\\\password.txt\";\nstring passwordListFile = \"C:\\\\Users\\\\james\\\\Desktop\\\\10millionpasswordlist.txt\";\n\nstruct indvPasswords\n{\n    int blockId;\n    int threadId;\n    list&lt;char[1024]&gt; passwords;\n};\n//22,500 individual blocks\nint gridSize = 150;\n//1024 threads contained within each block\nint blockSize = 32;\nint totalNumThreads = (gridSize*gridSize)*(blockSize*blockSize);\n\nindvPasswords* pointerToPass = new indvPasswords[totalNumThreads];\n\n\n//Some serial setup first\n\nstring passwordFile()\n{\n    string pwd = \"\";\n    ifstream fileStream(password);\n    if (fileStream.is_open()) {\n        getline(fileStream, pwd);\n        if (pwd != \"\") {\n            //Found a password\n            fileStream.close();\n        }\n        else {\n            cout &lt;&lt; \"No password found in file\" &lt;&lt; '\\n';\n        }\n    }\n    else {\n        cout &lt;&lt; \"Cannot open password file\" &lt;&lt; '\\n';\n    }\n    return pwd;\n}\nlist&lt;string&gt; readPasswordList()\n{\n    //open password list\n    string line = \"\";\n    ifstream fileStream(passwordListFile);\n    list&lt;string&gt; passwordList;\n    if (fileStream.is_open()) {\n        while (getline(fileStream, line)) {\n            passwordList.push_back(line);\n        }\n    }\n    else {\n        cout &lt;&lt; \"Cannot open password file\" &lt;&lt; '\\n';\n    }\n    return passwordList;\n}\nvoid indexing()\n{\n    list&lt;string&gt; passwords = readPasswordList();\n    int sizeOfList = passwords.size();\n    int modulus = sizeOfList%gridSize;\n    int runFlag = 0;\n    if (modulus != 0) {\n        //not evenly divided, pass overflow to first block\n        //Take the modulus off the size of password list, i.e. \n        //take a number of passwords from the top of the list.\n        //Temporarily store the passwords removed and give them \n        //as additional work to the first block.\n        list&lt;string&gt; temp;\n        for (int i = 0; i &lt; modulus; i++) {\n            temp.push_back(passwords.front());\n            passwords.pop_front();\n        }\n        //Now evenly divide up the passwords amoungst the blocks\n        int numEach = passwords.size();\n        //The first for loop, iterates through each BLOCK within the GRID\n        for (int i = 0; i &lt; (gridSize*gridSize); i++) {\n            //Set flag, for single run of first block list\n            if (i == 0) {\n                runFlag = 1;\n            }\n            //The second loop, iterates through each THREAD within the current BLOCK\n            for (int j = 0; j &lt; (blockSize*blockSize); j++){\n                //setup the indexes\n                pointerToPass[i].blockId = i;\n                pointerToPass[i].threadId = j;\n                //The third loop, copies over a collection of passwords for each THREAD \n                //within the current BLOCK\n                for (int l = 0; l &lt; numEach; l++) {\n                    //Add the temporary passwords to the first block\n                    if (runFlag == 1) {\n                        for (int x = 0; x &lt; temp.size(); x++){\n                            //Convert\n                            string tmp = temp.front();\n                            char charTmp[1024];\n                            strcpy(charTmp, tmp.c_str());\n                            pointerToPass[i].passwords.push_back(charTmp);\n                            temp.pop_front();\n                        }\n                        //Now never block run again\n                        runFlag = 0;\n                    }\n\n                    //convert the passwords from string to char[] before adding\n                    string tmp = passwords.front();\n                    char charTmp[1024];\n                    strcpy(charTmp, tmp.c_str());\n                    pointerToPass[i].passwords.push_back(charTmp);\n                    //now delete the item from passwords that has just been transfered\n                    //over to the other list\n                    passwords.pop_front();\n                }\n            }\n        }\n    }\n    else {  \n        //Start to transfer passwords\n        //First calculate how many passwords each thread will be given to check\n        int numEach = sizeOfList / totalNumThreads;\n\n        //The first for loop, iterates through each BLOCK within the GRID\n        for (int i = 0; i &lt; (gridSize*gridSize); i++) {\n            //The second loop, iterates through each THREAD within the current BLOCK\n            for (int j = 0; j &lt; (blockSize*blockSize); j++){\n                //setup the indexes\n                pointerToPass[i].blockId = i;\n                pointerToPass[i].threadId = j;\n                //The third loop, copies over a collection of passwords for each THREAD \n                //within the current BLOCK\n                for (int l = 0; l &lt; numEach; l++) {\n                    //convert the passwords from string to char[] before adding\n                    string tmp = passwords.front();\n                    char charTmp[1024];\n                    strcpy(charTmp, tmp.c_str());\n                    pointerToPass[i].passwords.push_back(charTmp);\n                    //now delete the item from passwords that has just been transfered\n                    //over to the other list\n                    passwords.pop_front();\n                }\n            }\n        }\n    }\n\n}\n//Now onto the parallel\n__device__ bool comparison(indvPasswords *collection, char *password, int *totalThreads)\n{\n    //return value\n    bool val = false;\n    //first calculate the block ID\n    int currentBlockId = blockIdx.y * gridDim.x + blockIdx.x;\n    //calculate the thread ID\n    int currentThreadId = currentBlockId * blockDim.y * blockDim.x + threadIdx.y * blockDim.x + threadIdx.x;\n    //Now go and find the data required for this thread\n    //Get the block\n    for (int i = 0; i &lt; (int)totalThreads; i++) {\n        if (collection[i].blockId == currentBlockId) {\n            //Now check the thread id\n            if (collection[i].threadId == currentThreadId) {\n                //Now begin comparison\n                for (int j = 0; j &lt; collection[i].passwords.size(); j++)\n                {\n                    if (password == collection[i].passwords.front()) {\n                        //password found!\n                        val = true;\n                        break;\n                    }\n\n                    //delete the recently compared password\n                    collection[i].passwords.pop_front();\n                }\n            }\n        }\n    }\n    return val;\n}\n__global__ void kernelComp(indvPasswords *collection, char *password, int *totalThreads)\n{\n    comparison(collection, password, totalThreads);\n}\nint main()\n{\n    int size = totalNumThreads;\n    //grid and block sizes\n    dim3 gridDim(gridSize, gridSize, 1);\n    dim3 blockDim(blockSize, blockSize, 1);\n\n    //Get the password\n    string tmp = passwordFile();\n    //convert \n    char pwd[1024];\n    strcpy(pwd, tmp.c_str());\n    indexing();\n\n    //device memory pointers\n    indvPasswords* array_d;\n    char *pwd_d;\n\n    int *threadSize_d;\n    int *threads = &amp;totalNumThreads;\n\n    //allocate host memory\n    pwd_d = (char*)malloc(1024);\n\n\n\n\n    //allocate memory\n    cudaMalloc((void**)&amp;array_d, size);\n    cudaMalloc((void**)&amp;pwd_d, 1024);\n    cudaMalloc((void**)&amp;threadSize_d, sizeof(int));\n\n    //copy the data to the device\n    cudaMemcpy(array_d, pointerToPass, size, cudaMemcpyHostToDevice);\n    cudaMemcpy(pwd_d, pwd, 1024, cudaMemcpyHostToDevice);\n    cudaMemcpy(threadSize_d, threads, sizeof(int), cudaMemcpyHostToDevice);\n\n    //call the kernel\n    kernelComp &lt;&lt; &lt;gridDim, blockDim&gt;&gt; &gt;(array_d,pwd_d,threadSize_d);\n    //copy results over\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "eclipse", "debugging"], "comments": [{"owner": {"reputation": 1010, "user_id": 2473607, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jX9jW.jpg?s=128&g=1", "display_name": "YasserAsmi", "link": "https://stackoverflow.com/users/2473607/yasserasmi"}, "edited": false, "score": 0, "creation_date": 1451496574, "post_id": 34534109, "comment_id": 56810014, "body": "Can you add some specific code in your program which detects the input and stops the debugger? ie an if statement which, when satisfied, will do ask the debugger to break.  In windows I used to use &#39;asm int 3&#39; or DebugBreak() api."}], "answers": [{"comments": [{"owner": {"reputation": 395, "user_id": 3233754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3efbc4f3d993b7169db76d5f9cb2d33?s=128&d=identicon&r=PG&f=1", "display_name": "Technophile", "link": "https://stackoverflow.com/users/3233754/technophile"}, "edited": false, "score": 0, "creation_date": 1451497066, "post_id": 34534198, "comment_id": 56810281, "body": "Might need to turn optimization off to preserve the &quot;int x =&quot; line."}], "tags": [], "owner": {"reputation": 120111, "user_id": 469935, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/14lYV.jpg?s=128&g=1", "display_name": "Armen Tsirunyan", "link": "https://stackoverflow.com/users/469935/armen-tsirunyan"}, "is_accepted": false, "score": 0, "last_activity_date": 1451496482, "creation_date": 1451496482, "answer_id": 34534198, "question_id": 34534109, "link": "https://stackoverflow.com/questions/34534109/debugging-big-input-in-eclipse/34534198#34534198", "title": "Debugging big input in eclipse", "body": "<p>Well, eclipse may well have advanced debugging features, and to tell the truth I do not know the first thing about eclipse, but FWIW you can easily simulate what you want.</p>\n\n<p>What you have is:</p>\n\n<pre><code>for(i = 0; i &lt; lineCount; ++i)\n   process one line\n</code></pre>\n\n<p>Add a condition to check the line number and place a breakpoint inside it!:</p>\n\n<pre><code>for(i = 0; i &lt; lineCount; ++i)\n   if(i == 2000)\n   {\n       int x = i*i; //random line, just add your breakpoint here!\n   }\n   process one line\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1451496490, "creation_date": 1451496490, "answer_id": 34534200, "question_id": 34534109, "link": "https://stackoverflow.com/questions/34534109/debugging-big-input-in-eclipse/34534200#34534200", "title": "Debugging big input in eclipse", "body": "<p>Since you know exactly what line is problematic, just a dummy <code>if</code> statement which would check the contents of the line, and if mathces your problem line, do nothing - and put a breakoint at this line.</p>\n"}, {"tags": [], "owner": {"reputation": 9937, "user_id": 3710490, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/FFDsr.png?s=128&g=1", "display_name": "Valijon", "link": "https://stackoverflow.com/users/3710490/valijon"}, "is_accepted": true, "score": 0, "last_activity_date": 1451497996, "last_edit_date": 1451497996, "creation_date": 1451497278, "answer_id": 34534415, "question_id": 34534109, "link": "https://stackoverflow.com/questions/34534109/debugging-big-input-in-eclipse/34534415#34534415", "title": "Debugging big input in eclipse", "body": "<p>Don't reinvent the wheel! </p>\n\n<p>Eclipse has powerfull feature <code>Enable condition</code> for breakpoint.</p>\n\n<ul>\n<li>Set breakpoint in your code</li>\n<li>Right-click on breakpoint - \"Breakpoint properties\"</li>\n<li>Check \"Conditional\"</li>\n<li>Write your condition when breakpoint should be stopped (you have access to scope and global variables)</li>\n</ul>\n\n<p>Here is Eclipse help page. <a href=\"http://help.eclipse.org/mars/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fbreakpoints%2Fref-condition_option.htm\" rel=\"nofollow\">Breakpoint Enable Condition</a>\n (with <a href=\"https://wiki.eclipse.org/FAQ_How_do_I_set_a_conditional_breakpoint%3F\" rel=\"nofollow\">screenshot</a>)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4794392"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 34534415, "answer_count": 3, "score": 1, "last_activity_date": 1451497996, "creation_date": 1451496099, "question_id": 34534109, "link": "https://stackoverflow.com/questions/34534109/debugging-big-input-in-eclipse", "title": "Debugging big input in eclipse", "body": "<p>Unfortunately a program I wrote in C++ has a bug (or bugs), yet I can't deduce what it is since only a single output line doesn't match the expected output (the input file has 3K lines of input). I know which input line is the problematic, yet it's over 2K lines into the input file so debugging it manually isn't very efficient.<br>\nIs there any way to let the debugger run \"alone\" with the first 2K lines and stop exactly before trying to execute the problematic input line? I use Windows and eclipse but don't mind switching the IDE or switch to Linux if necessary.<br>\nThanks in advance!</p>\n"}, {"tags": ["c++", "eclipse", "multithreading", "c++11"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1451496396, "post_id": 34534087, "comment_id": 56809925, "body": "The first suspicion is that version of g++ called by Eclipse is not the same as the one used when you call g++ from command line."}, {"owner": {"reputation": 23, "user_id": 2898876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7388d9505c65d09e3fc39eabaa63044a?s=128&d=identicon&r=PG&f=1", "display_name": "CyberDork34", "link": "https://stackoverflow.com/users/2898876/cyberdork34"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1451496771, "post_id": 34534087, "comment_id": 56810102, "body": "How would you verify that the gcc versions are the same? In the terminal you can do <code>g++ --version</code>, but what about in Eclipse?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1451496935, "post_id": 34534087, "comment_id": 56810204, "body": "Check your toolchain settings."}, {"owner": {"reputation": 23, "user_id": 2898876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7388d9505c65d09e3fc39eabaa63044a?s=128&d=identicon&r=PG&f=1", "display_name": "CyberDork34", "link": "https://stackoverflow.com/users/2898876/cyberdork34"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1451497780, "post_id": 34534087, "comment_id": 56810636, "body": "The Tool Chain Editor only mentions that it is using &quot;Linux GCC&quot;"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1451498154, "post_id": 34534087, "comment_id": 56810842, "body": "But what does that mean? ;) What are the executables used?"}, {"owner": {"reputation": 23, "user_id": 2898876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7388d9505c65d09e3fc39eabaa63044a?s=128&d=identicon&r=PG&f=1", "display_name": "CyberDork34", "link": "https://stackoverflow.com/users/2898876/cyberdork34"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1451498533, "post_id": 34534087, "comment_id": 56811055, "body": "The executable uses files from gcc 4.8, so while it may not be the exact same version, but the terminal and Eclipse use 4.8.*"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1451501753, "post_id": 34534087, "comment_id": 56812564, "body": "Are you sure all .o files are compiled with <code>-pthread</code>? Can you remove -std=c++0x -D__GXX_EXPERIMENTAL_CXX0X__?"}, {"owner": {"reputation": 23, "user_id": 2898876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7388d9505c65d09e3fc39eabaa63044a?s=128&d=identicon&r=PG&f=1", "display_name": "CyberDork34", "link": "https://stackoverflow.com/users/2898876/cyberdork34"}, "edited": false, "score": 0, "creation_date": 1451508118, "post_id": 34534087, "comment_id": 56815739, "body": "I did, but the outcome is the same. And as far as I can tell, all the .o files compile with -pthread."}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 0, "creation_date": 1558669316, "post_id": 34534087, "comment_id": 99184356, "body": "Did you ever solve this? An answer would be useful, if so. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "is_accepted": false, "score": 0, "last_activity_date": 1558670430, "last_edit_date": 1558670430, "creation_date": 1558670106, "answer_id": 56285649, "question_id": 34534087, "link": "https://stackoverflow.com/questions/34534087/enable-multithreading-eclipse-c/56285649#56285649", "title": "Enable multithreading Eclipse C++", "body": "<p>Solved. Using <strong>Eclipse IDE for C/C++ Developers v4.7.3a</strong> in <strong>Ubuntu 14.04</strong>.</p>\n\n<h1>1/2. Problem description</h1>\n\n<p>Just trying to run this sample code:  </p>\n\n<p><strong>mutex.cpp</strong>:</p>\n\n<pre><code>// mutex example\n#include &lt;iostream&gt;       // std::cout\n#include &lt;thread&gt;         // std::thread\n#include &lt;mutex&gt;          // std::mutex\n\nstd::mutex mtx;           // mutex for critical section\n\nvoid print_block (int n, char c) {\n  // critical section (exclusive access to std::cout signaled by locking mtx):\n  mtx.lock();\n  for (int i=0; i&lt;n; ++i) { std::cout &lt;&lt; c; }\n  std::cout &lt;&lt; '\\n';\n  mtx.unlock();\n}\n\nint main ()\n{\n  std::thread th1 (print_block,50,'*');\n  std::thread th2 (print_block,50,'$');\n\n  th1.join();\n  th2.join();\n\n  return 0;\n}\n</code></pre>\n\n<p>From: <a href=\"http://www.cplusplus.com/reference/mutex/mutex/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/mutex/mutex/</a></p>\n\n<p>It builds and runs just fine on the command line with the following command, but <strong>will not run in Eclipse!</strong></p>\n\n<p>Command-line command that builds and runs in a terminal just fine:</p>\n\n<pre><code>g++ -Wall -std=c++11 -save-temps=obj mutex.cpp -o ./bin/mutex -pthread &amp;&amp; ./bin/mutex\n</code></pre>\n\n<p>Eclipse error when I try to run it in Eclipse:</p>\n\n<blockquote>\n<pre><code>terminate called after throwing an instance of 'std::system_error'  \n  what():  Enable multithreading to use std::thread: Operation not permitted\n</code></pre>\n</blockquote>\n\n<h1>2/2. The solution to make it build and run in Eclipse is as follows:</h1>\n\n<h2>A. Enable pthread for compiler:</h2>\n\n<p>Project --> Properties --> C/C++ Build --> Settings --> GCC C++ Compiler --> Miscellaneious --> type in <code>-std=c++11</code> to the \"Other flags\" box, and check the box for \"Support for pthread (-pthread)\". See yellow highlighting here:</p>\n\n<p><a href=\"https://i.stack.imgur.com/9rVMr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9rVMr.png\" alt=\"enter image description here\"></a></p>\n\n<h2>B. Enable pthread for Linker:</h2>\n\n<p>Then, withOUT closing this window, also set this setting for the Linker:\nin center pane: GCC C++ Linker --> General --> check the box for \"Support for pthread (-pthread)\", as shown here:</p>\n\n<p><a href=\"https://i.stack.imgur.com/aGWlx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aGWlx.png\" alt=\"enter image description here\"></a></p>\n\n<p>Click \"Apply and Close\". It will now build and run.</p>\n"}], "owner": {"reputation": 23, "user_id": 2898876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7388d9505c65d09e3fc39eabaa63044a?s=128&d=identicon&r=PG&f=1", "display_name": "CyberDork34", "link": "https://stackoverflow.com/users/2898876/cyberdork34"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1158, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1558670430, "creation_date": 1451495985, "last_edit_date": 1451500677, "question_id": 34534087, "link": "https://stackoverflow.com/questions/34534087/enable-multithreading-eclipse-c", "title": "Enable multithreading Eclipse C++", "body": "<p>I have been trying to get a program working in Eclipse C++. One of the functions uses multithreading from std. Here is the function in the code:</p>\n\n<pre><code>void PrimeCheck::checkFull(long long int number)\n{\n    std::thread t1(&amp;PrimeCheck::checkFirstHalf, this, number);\n    std::thread t2(&amp;PrimeCheck::checkSecondHalf, this, number);\n\n    t1.join();\n    t2.join();\n}\n</code></pre>\n\n<p>When searching for a solution, I came across many solutions, all of which stating to either add a -pthread flag or a -std=c++11 in addition to changing the dialect to C++11. All of which I have done. This is what the compile command looks like in eclipse so you can see exactly which modifications I have already added:</p>\n\n<pre><code>Building file: ../src/Prime Checker.cpp\nInvoking: GCC C++ Compiler\ng++ -std=c++0x -D__GXX_EXPERIMENTAL_CXX0X__ -O2 -g -Wall -c -fmessage-length=0 -std=c++11  -pthread -Wl,--whole-archive -lpthread -Wl,--no-whole-archive -MMD -MP -MF\"src/Prime Checker.d\" -MT\"src/Prime\\ Checker.d\" -o \"src/Prime Checker.o\" \"../src/Prime Checker.cpp\"\nFinished building: ../src/Prime Checker.cpp\n</code></pre>\n\n<p>And this is the linker command as it appears in eclipse:</p>\n\n<pre><code>Invoking: GCC C++ Linker\ng++ -Wl,--no-as-needed -pthread -shared -o [A bunch of .o files]\n</code></pre>\n\n<p>The code compiles correctly, and eclipse content assist recognizes thread as a member of std. Yet, when I run the program I still this error:</p>\n\n<pre><code>terminate called after throwing an instance of 'std::system_error'\n  what():  Enable multithreading to use std::thread: Operation not permitted\n</code></pre>\n\n<p>To test this, I wrote a simple program outside of Eclipse which looked like this:</p>\n\n<pre><code>#include &lt;thread&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nvoid func1(int x){\n    for(int i=0; i&lt;x; i++){\n        cout &lt;&lt; \" \" &lt;&lt; 1 + i;\n    }\n}\n\nvoid func2(){\n    for(int j=0; j&lt;5; j++){\n        cout &lt;&lt; \"Standard message! \";\n    }\n}\n\nint main(){\n    int input;\n    cout &lt;&lt; \"Give me a number:\" &lt;&lt; endl;\n    cin &gt;&gt; input;\n\n    thread t1(func1, input);\n    thread t2(func2);\n    t1.join();\n    t2.join();\n\n\n    return 0;\n}\n</code></pre>\n\n<p>And compiled it in the terminal with this:</p>\n\n<pre><code>g++ ThreadTest.cpp -o Program.o -std=c++11 -pthread\n</code></pre>\n\n<p>And the program ran without error. I think this means that there's something wrong with Eclipse, but I'm not sure. </p>\n\n<p>As a note, I'm doing this on Ubuntu 14.04 with gcc version 4.8.4. Also, I know that similar questions have been asked, but as far as I can tell, I've implemented those solutions with little success.</p>\n\n<p>Help would be appreciated. Thanks!</p>\n"}, {"tags": ["c++", "excel", "vba"], "comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1451495509, "post_id": 34533897, "comment_id": 56809431, "body": "Shouldn&#39;t <code>Dim obj As T</code> be <code>Dim i As T</code> ?"}, {"owner": {"reputation": 77, "user_id": 5124151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48d7ddb9ce42450499893043513fe150?s=128&d=identicon&r=PG&f=1", "display_name": "TuDa", "link": "https://stackoverflow.com/users/5124151/tuda"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1451497988, "post_id": 34533897, "comment_id": 56810750, "body": "Yes! Sorry, I edited, thank you."}], "answers": [{"tags": [], "owner": {"reputation": 77, "user_id": 5124151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48d7ddb9ce42450499893043513fe150?s=128&d=identicon&r=PG&f=1", "display_name": "TuDa", "link": "https://stackoverflow.com/users/5124151/tuda"}, "is_accepted": true, "score": 0, "last_activity_date": 1452161913, "creation_date": 1452161913, "answer_id": 34652572, "question_id": 34533897, "link": "https://stackoverflow.com/questions/34533897/crash-on-udt-with-string-and-another-udt-between-vba-and-c/34652572#34652572", "title": "Crash on UDT with string and another UDT between VBA and C++", "body": "<p>I don't know why the memory is corrupted but I found a workaround. \nWe don't need to change anything in C++. On VBA, the aim is to pass the address of the User Defined Type ByVal like this:</p>\n\n<pre><code>Call Cpp_D2(VarPtr(i))\n</code></pre>\n\n<p>And, it's important to change the declaration of the C++ function like this:</p>\n\n<pre><code>Private Declare PtrSafe Function Cpp_D2 Lib \"MyDLL.dll\" (ByVal i As Long) As Long\n</code></pre>\n\n<p>Now, it's work when I have the both declaration in C++ and VBA of the User Defined Type without MIDL.</p>\n"}], "owner": {"reputation": 77, "user_id": 5124151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48d7ddb9ce42450499893043513fe150?s=128&d=identicon&r=PG&f=1", "display_name": "TuDa", "link": "https://stackoverflow.com/users/5124151/tuda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 34652572, "answer_count": 1, "score": 0, "last_activity_date": 1452161913, "creation_date": 1451495220, "last_edit_date": 1451497973, "question_id": 34533897, "link": "https://stackoverflow.com/questions/34533897/crash-on-udt-with-string-and-another-udt-between-vba-and-c", "title": "Crash on UDT with string and another UDT between VBA and C++", "body": "<p>I have a problem between the VBA and the C++.\nWhen I want to redim my X array, it's crash with my release dll. \nIf I compile in debug, it's work sometimes but when I look my X array, I have an error \"application-defined or object-defined error\".</p>\n\n<p>If I don't redim the X array or if I remove the s string, it's work well.</p>\n\n<p>VBA:</p>\n\n<pre><code>Private Declare PtrSafe Function Cpp_D2 Lib \"MyDLL.dll\" (i As T) As Long\n\nPrivate Type XData\n    X() As Double\n    Count As Long\nEnd Type\n\nPrivate Type T\n    s As String\n    data_T As XData\nEnd Type\n\nSub Test()\n    Dim i As T\n    ReDim i.data_T.X(5)\n    i.s = \"ok\"\n    Call Cpp_D2(i)\nEnd Sub\n</code></pre>\n\n<p>C++:</p>\n\n<pre><code>__declspec(align(4)) typedef struct XData\n{\n    LPSAFEARRAY X;\n    int Count;\n}   XData;\n\n__declspec(align(4)) typedef struct T\n{\n    BSTR s;\n    XData X;\n} T;\n\n__declspec(dllexport) int __stdcall  Cpp_D2(T *p)\n{\n    double *x = NULL;\n    HRESULT hr = SafeArrayAccessData(p-&gt;X.X, reinterpret_cast&lt;void**&gt;(&amp;x));\n    SafeArrayUnaccessData(p-&gt;X.X);\n    return 0;\n}\n</code></pre>\n\n<p>I use an 32 bit version of Excel and Visual Studio 2010 to compile the c++ dll.</p>\n\n<p>On Mac, I have one message before the crash: \"Internal error (Error 51)\" The information on the official documentation about this error is:</p>\n\n<p>\"An internal malfunction has occurred in Visual Basic. Unless this call was generated by the Error statement or Raise method, contact Microsoft Product Support Services to report the conditions under which the message appeared.\"</p>\n\n<p>I used this example to do the job: <a href=\"https://support.microsoft.com/en-us/kb/171583\" rel=\"nofollow\">https://support.microsoft.com/en-us/kb/171583</a> and this example works fine.</p>\n"}, {"tags": ["c++", "multithreading", "locking", "c++14"], "comments": [{"owner": {"reputation": 27317, "user_id": 893693, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/yHFyJ.jpg?s=128&g=1", "display_name": "Stephan Dollberg", "link": "https://stackoverflow.com/users/893693/stephan-dollberg"}, "edited": false, "score": 1, "creation_date": 1451517006, "post_id": 34533764, "comment_id": 56819567, "body": "Make sure that you use clang or a recent gcc build from homebrew and not the standard gcc which maps to clang with a weird stdlib config."}, {"owner": {"reputation": 267, "user_id": 3632641, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cb2f0d3123a7d93854d945f1b1516766?s=128&d=identicon&r=PG&f=1", "display_name": "Patze", "link": "https://stackoverflow.com/users/3632641/patze"}, "reply_to_user": {"reputation": 27317, "user_id": 893693, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/yHFyJ.jpg?s=128&g=1", "display_name": "Stephan Dollberg", "link": "https://stackoverflow.com/users/893693/stephan-dollberg"}, "edited": false, "score": 0, "creation_date": 1451568566, "post_id": 34533764, "comment_id": 56835882, "body": "You were right, downloading the latest gcc via homebrew did the job. I downloaded version 5 via <code>brew install gcc5</code>. After changing the tool settings in eclipse for compiler and linker to g++-5, my code compiled including <code>shared_timed_mutex</code>. Now there&#180;s only one problem left. Eclipse  still does not find the symbols for <code>std::shared_timed_mutex</code>, even though I added the 5.2.0 include folder to the include paths of my project. Any ideas regarding that one? Thanks a lot!"}], "answers": [{"tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": false, "score": 2, "last_activity_date": 1460417214, "creation_date": 1460417214, "answer_id": 36561015, "question_id": 34533764, "link": "https://stackoverflow.com/questions/34533764/shared-timed-mutex-not-available-on-os-x-10-11-2/36561015#36561015", "title": "shared_timed_mutex not available on OS X 10.11.2?", "body": "<p>For the past two years (as I write this) Apple has updated the libc++ headers for their tools releases, but not the libc++ sources.  And libc++ implements <code>std::shared_time_mutex</code> both in <code>&lt;shared_mutex&gt;</code> and in shared_mutex.cpp.</p>\n"}, {"tags": [], "owner": {"reputation": 3563, "user_id": 836097, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2e0fa7cc4752b302df71ac7fa7de9188?s=128&d=identicon&r=PG", "display_name": "Vlad Didenko", "link": "https://stackoverflow.com/users/836097/vlad-didenko"}, "is_accepted": false, "score": 2, "last_activity_date": 1469641826, "creation_date": 1469641826, "answer_id": 38619964, "question_id": 34533764, "link": "https://stackoverflow.com/questions/34533764/shared-timed-mutex-not-available-on-os-x-10-11-2/38619964#38619964", "title": "shared_timed_mutex not available on OS X 10.11.2?", "body": "<p>According to <a href=\"http://devstreaming.apple.com/videos/wwdc/2016/405i2ilotov3bazyei1/405/405_whats_new_in_llvm.pdf\" rel=\"nofollow\">Apple dev presentation</a> the <code>shared_timed_mutex</code> will be available starting with macOS 10.12. See page 52</p>\n"}], "owner": {"reputation": 267, "user_id": 3632641, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cb2f0d3123a7d93854d945f1b1516766?s=128&d=identicon&r=PG&f=1", "display_name": "Patze", "link": "https://stackoverflow.com/users/3632641/patze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1227, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1469641826, "creation_date": 1451494748, "last_edit_date": 1460742600, "question_id": 34533764, "link": "https://stackoverflow.com/questions/34533764/shared-timed-mutex-not-available-on-os-x-10-11-2", "title": "shared_timed_mutex not available on OS X 10.11.2?", "body": "<p>I'm trying to play around with the new <code>shared_timed_mutex</code> structures from C++ 14 on OS X 10.11.2 using Eclipse CDT 4.5.0. Xcode is 7.2. I'm using GCC C++ with the following options: </p>\n\n<pre><code>-O0 -g3 -Wall -c -fmessage-length=0 -std=c++14\n</code></pre>\n\n<p>Her's what I get:</p>\n\n<pre><code>Invoking: MacOS X C++ Linker\ng++  -o \"MyProject\" ./src/main.o  \nUndefined symbols for architecture x86_64:\n  \"std::__1::shared_timed_mutex::shared_timed_mutex()\", referenced from:\n  HashMap&lt;int, std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;,         std::__1::allocator&lt;char&gt; &gt;, std::__1::hash&lt;int&gt; &gt;::HashMap() in main.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>Here's my clang version info:</p>\n\n<pre><code> Apple LLVM version 7.0.2 (clang-700.1.81)\n Target: x86_64-apple-darwin15.2.0\n Thread model: posix\n</code></pre>\n\n<p>I've searched my way through the web and found a couple of recommendations, for example this one on Reddit:</p>\n\n<p><a href=\"https://www.reddit.com/r/cpp_questions/comments/3ejfkr/is_c14s_stdshared_timed_mutex_available_on_os_x/\" rel=\"nofollow\">https://www.reddit.com/r/cpp_questions/comments/3ejfkr/is_c14s_stdshared_timed_mutex_available_on_os_x/</a>?</p>\n\n<p>This is very close to my problem, I've tried the suggestions, but I\u00b4m hoping, that I won\u00b4t have to do the manual libc++ download, but could stick with the standard libs shipped with my system.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"comments": [{"owner": {"reputation": 739, "user_id": 4421382, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/cf1169dc3198dc684ba30b4b08d0bff9?s=128&d=identicon&r=PG&f=1", "display_name": "Engo", "link": "https://stackoverflow.com/users/4421382/engo"}, "edited": false, "score": 0, "creation_date": 1451496919, "post_id": 34533910, "comment_id": 56810196, "body": "I don&#39;t have problems yet, but I am not sure if my approach is right. Thats the reason I asked 3 things"}, {"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "reply_to_user": {"reputation": 739, "user_id": 4421382, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/cf1169dc3198dc684ba30b4b08d0bff9?s=128&d=identicon&r=PG&f=1", "display_name": "Engo", "link": "https://stackoverflow.com/users/4421382/engo"}, "edited": false, "score": 0, "creation_date": 1451509003, "post_id": 34533910, "comment_id": 56816167, "body": "Your approach is rigth, only you misunderstand the connect parameters. See edited answer for more details."}], "tags": [], "owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "is_accepted": false, "score": 1, "last_activity_date": 1451497922, "last_edit_date": 1451497922, "creation_date": 1451495257, "answer_id": 34533910, "question_id": 34533689, "link": "https://stackoverflow.com/questions/34533689/how-do-i-get-ui-from-a-widget-in-order-to-connect-it-in-another-class/34533910#34533910", "title": "How do I get ui from a widget in order to connect it in another class?", "body": "<p>It's unclear if you have and then what is your problem.</p>\n\n<p>The only thing I doubt would work is the first parameter of your call to <code>connect</code>:</p>\n\n<p><code>m_viewController.getStartWindow()-&gt;getStartListeningPushButton</code> should actually be <code>m_viewController.getStartWindow()-&gt;getStartListeningPushButton()</code> (to have the function be called so that you get the pointer to expected <code>QPushButton</code> and pass it to the <code>connect</code> function).</p>\n\n<p>In the <a href=\"http://doc.qt.io/qt-5/qobject.html#connect\" rel=\"nofollow\"><code>connect</code></a> function:</p>\n\n<ul>\n<li>First and third parameter must be of type <code>QObject*</code>. So this can either be <code>this</code> pointer (if current class is derived from <code>QObject</code>), or any class attribute of type <code>QObject*</code> (<code>ui-&gt;fStartListeningPushButton</code>) or a function call returning <code>QObject*</code> (<code>m_viewController.getStartWindow()-&gt;getStartListeningPushButton()</code>). But <code>m_viewController.getStartWindow()-&gt;getStartListeningPushButton</code> (with no <code>()</code>) does not make sense here).</li>\n<li>Second parameter must be a <code>signal</code> (declared in header file class using <code>signals:</code> keyword. You don't need implement any code here, you just declare the signal and Qt MOC mechanism implements it silently). Valid syntax for this parameter is <code>&amp;QPushButton::clicked</code> or <code>SIGNAL(clicked())</code> (Qt4 syntax, still valid in Qt5).</li>\n<li>Fourth parameter must be a <code>slot</code> (declared in header file class using <code>slots:</code> keyword, and implemented by you). Valid syntax for this parameter is <code>&amp;MainController::bla</code> or <code>SLOT(bla())</code> (Qt4 syntax, still valid in Qt5).</li>\n<li>There's actually a fifth optional parameter to use when you'll start dealing with threads.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 878, "user_id": 4247443, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sfQeY.jpg?s=128&g=1", "display_name": "Pustovalov Dmitry", "link": "https://stackoverflow.com/users/4247443/pustovalov-dmitry"}, "is_accepted": true, "score": 1, "last_activity_date": 1451499168, "last_edit_date": 1451499168, "creation_date": 1451498701, "answer_id": 34534755, "question_id": 34533689, "link": "https://stackoverflow.com/questions/34533689/how-do-i-get-ui-from-a-widget-in-order-to-connect-it-in-another-class/34534755#34534755", "title": "How do I get ui from a widget in order to connect it in another class?", "body": "<ol>\n<li><p>If you are using Qt Designer and Qt IDE generated such code that it's object not a pointer I don't think that you should make it pointer.</p></li>\n<li><p>Yeah, returning a pointer to QWidget (StartWindow in your case) is pretty OK.</p></li>\n<li>Your getter is OK.</li>\n</ol>\n\n<p>Seems like you have mistype in your connect, it should look like this:</p>\n\n<pre><code>QObject::connect(m_viewController.getStartWindow()-&gt;getStartListeningPushButton(), SIGNAL(clicked()),\n                 this, SLOT(bla()));\n</code></pre>\n"}], "owner": {"reputation": 739, "user_id": 4421382, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/cf1169dc3198dc684ba30b4b08d0bff9?s=128&d=identicon&r=PG&f=1", "display_name": "Engo", "link": "https://stackoverflow.com/users/4421382/engo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 34534755, "answer_count": 2, "score": 1, "last_activity_date": 1451499168, "creation_date": 1451494467, "question_id": 34533689, "link": "https://stackoverflow.com/questions/34533689/how-do-i-get-ui-from-a-widget-in-order-to-connect-it-in-another-class", "title": "How do I get ui from a widget in order to connect it in another class?", "body": "<p>I need to connect a QPushButton (startListeningPushButton) from my StartWindow to a slot in my MainController. I still have a few questions:</p>\n\n<ol>\n<li><p>Should I make a pointer of <code>Ui::startWidget ui</code>, because by default Qt created it as a normal variable?</p></li>\n<li><p>Is <code>getStartWindow()</code> the right way to get the <code>StartWindow</code> from <code>ViewController</code>?</p></li>\n<li><p>What would be the right way to get <code>startListeningPushButton</code> from <code>StartWindow</code> (is my getter right)?</p></li>\n</ol>\n\n<p>This is my code:</p>\n\n<p><strong>MainController.cpp:</strong></p>\n\n<pre><code>MainController::MainController()\n{\n    connect(m_viewController.getStartWindow()-&gt;getStartListeningPushButton, &amp;QPushButton::clicked, this, &amp;MainController::bla)\n\n}\n</code></pre>\n\n<p><strong>ViewController.cpp:</strong></p>\n\n<pre><code>StartWindow* ViewController::getStartWindow()\n{\n    return &amp;startWindow;\n}\n</code></pre>\n\n<p><strong>StartWindow.cpp:</strong></p>\n\n<pre><code>QPushButton* StartWindow::getStartListeningPushButton()\n{\n    return ui-&gt;fStartListeningPushButton;\n}\n</code></pre>\n\n<p><strong>StartWindow.h:</strong></p>\n\n<pre><code>#ifndef STARTWINDOW_H\n#define STARTWINDOW_H\n\n#include \"ui_startwindow.h\"\n\nclass StartWindow : public QWidget\n{\n    Q_OBJECT\npublic:\n    StartWindow(QWidget *parent = 0);\n    ~StartWindow();\n    QPushButton* getStartListeningPushButton();\n\nprivate:\n    Ui::startWidget *ui;\n};\n\n#endif // STARTWINDOW_H\n</code></pre>\n"}, {"tags": ["c++", "animation", "directx", "sprite"], "comments": [{"owner": {"reputation": 3448, "user_id": 5466118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5af41e2f2230c199ad274d363eda32?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zabel", "link": "https://stackoverflow.com/users/5466118/martin-zabel"}, "edited": false, "score": 0, "creation_date": 1451496282, "post_id": 34533567, "comment_id": 56809851, "body": "So where do you need help? Only some arithmetic seems to be required here."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2917521"}, "reply_to_user": {"reputation": 3448, "user_id": 5466118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5af41e2f2230c199ad274d363eda32?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zabel", "link": "https://stackoverflow.com/users/5466118/martin-zabel"}, "edited": false, "score": 0, "creation_date": 1451514152, "post_id": 34533567, "comment_id": 56818551, "body": "I don&#39;t need screen width, so could declaring a new position work. I have an idea of how to change it but not sure which bits to correct."}], "owner": {"user_type": "does_not_exist", "display_name": "user2917521"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1451493995, "creation_date": 1451493995, "question_id": 34533567, "link": "https://stackoverflow.com/questions/34533567/directx-c-disc-animation", "title": "DirectX C++ Disc animation", "body": "<p>So here is my problem I need a sprite to move at specific locations: - </p>\n\n<p>When the bottom of the sprite is 600 pixels from the top of the screen change the vertical direction of motion from down-screen to up-screen.</p>\n\n<p>When the right-edge of the sprite is 200 pixels from the left of the screen change the horizontal direction of motion from right-to-left, to left-to-right </p>\n\n<p>When the top edge of the sprite is 400 pixels from the top of the screen change the vertical motion from up-screen to down-screen. </p>\n\n<p>When the left edge of the sprite is 0 pixels from the left side of the screen change the horizontal direction of motion from right-to-left to left-to-right.</p>\n\n<p>So here is what i have got its currently using the sides of the screen, any help would be appreciated thanks.</p>\n\n<pre><code>void Disc::Update(double totalTime, double timeDelta)\n{\n// function for calculating displacement is time * velocity\n// timeDelta is how much time has passed since the last update call\nDirectX::SimpleMath::Vector2 toMove = this-&gt;discVelocity * timeDelta;\n\nthis-&gt;spritePosition = this-&gt;spritePosition + toMove;\n\nif (this-&gt;spritePosition.x &gt;= (screenWidth - this-&gt;spriteWidth))\n{\n    // reverse velocity ( set negative)\n    this-&gt;discVelocity.x = this-&gt;discVelocity.x * -1;\n    //this-&gt;spriteEffect =       D  DirectX::SpriteEffects::SpriteEffects_FlipHorizontally;\n}\nelse if (this-&gt;spritePosition.x &lt; 0)\n{\n    // reverse velocity\n    this-&gt;discVelocity.x = this-&gt;discVelocity.x * -1;\n    //this-&gt;spriteEffect = DirectX::SpriteEffects::SpriteEffects_None;\n}\nelse if (this-&gt;spritePosition.y &gt;= screenHeight - 100)\n{\n    this-&gt;discVelocity.y = this-&gt;discVelocity.y * -1;\n}\nelse if (this-&gt;spritePosition.y &lt;= 0)\n{\n    this-&gt;discVelocity.y = this-&gt;discVelocity.y * -1;\n}\n}\n</code></pre>\n"}, {"tags": ["c++", "debugging", "memory-management", "linked-list"], "comments": [{"owner": {"reputation": 1757, "user_id": 2831867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de10f124d2cfc473327e8ba971ce3e0a?s=128&d=identicon&r=PG&f=1", "display_name": "Some Guy", "link": "https://stackoverflow.com/users/2831867/some-guy"}, "edited": false, "score": 0, "creation_date": 1451493504, "post_id": 34533326, "comment_id": 56808319, "body": "You wanted to pass your list by reference ? Like :  <code>void myFunction(List&lt;std::string&gt; &amp; myList, int n, std::string starter, int leftParens, int rightParens)</code>   myFunction just took a copy of the list, worked on it and returned without making any change to <code>myList</code> in main()"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 5, "last_activity_date": 1451493360, "creation_date": 1451493360, "answer_id": 34533393, "question_id": 34533326, "link": "https://stackoverflow.com/questions/34533326/why-is-my-linked-list-deleting-after-a-function-call/34533393#34533393", "title": "Why is my linked list deleting after a function call?", "body": "<p>You are passing <code>myList</code> to <code>myFunction</code> by value. Any changes made to <code>myList</code> in the function are changes to the copy, not the original <code>myList</code> in <code>main</code>.</p>\n\n<p>Change <code>myFunction</code> so that it accepts its argument by reference. Then, any changes made to it in <code>myFunction</code> will also be visible in <code>main</code>.</p>\n\n<pre><code>void myFunction(List&lt;std::string&gt;&amp; myList, int n,\n                             //  ^^\n                std::string starter, int leftParens, int rightParens){\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 209, "user_id": 5540398, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a2079ed0478a3c1c07a380dcaefd4917?s=128&d=identicon&r=PG&f=1", "display_name": "ABD", "link": "https://stackoverflow.com/users/5540398/abd"}, "edited": false, "score": 0, "creation_date": 1451494130, "post_id": 34533420, "comment_id": 56808671, "body": "Thanks Mats. I&#39;m not sure I understand your comment though. Are you saying something different than R Sahu above? Even if I had a constructor, copy-constructor and copy-assignment operator, wouldn&#39;t I still be in trouble as myFunction is working with a copy of myList?"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 209, "user_id": 5540398, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a2079ed0478a3c1c07a380dcaefd4917?s=128&d=identicon&r=PG&f=1", "display_name": "ABD", "link": "https://stackoverflow.com/users/5540398/abd"}, "edited": false, "score": 0, "creation_date": 1451494500, "post_id": 34533420, "comment_id": 56808874, "body": "To make your code immediately work, you need to use reference to pass the list to <code>myFunction</code>. But if you EVER need to make a copy of the list [For example call some function that does some changes the list, but don&#39;t want to make the changes to the actual list], you need rule of three."}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": false, "score": 2, "last_activity_date": 1451493463, "creation_date": 1451493463, "answer_id": 34533420, "question_id": 34533326, "link": "https://stackoverflow.com/questions/34533326/why-is-my-linked-list-deleting-after-a-function-call/34533420#34533420", "title": "Why is my linked list deleting after a function call?", "body": "<ol>\n<li>You need to use reference if you want to update the variable in the caller context (in other words, if you want to change the variable in <code>main</code>).</li>\n<li>Whenever a class allocates memory, you probably need to follow the \"rule of three\" (constructor, copy-constructor, copy-assignment operator). If you don't, you'll get into trouble if you ever make a copy of the original class [like your call to <code>myFunction</code> as it currently stands]</li>\n</ol>\n"}], "owner": {"reputation": 209, "user_id": 5540398, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a2079ed0478a3c1c07a380dcaefd4917?s=128&d=identicon&r=PG&f=1", "display_name": "ABD", "link": "https://stackoverflow.com/users/5540398/abd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 34533393, "answer_count": 2, "score": 1, "last_activity_date": 1451493463, "creation_date": 1451493105, "question_id": 34533326, "link": "https://stackoverflow.com/questions/34533326/why-is-my-linked-list-deleting-after-a-function-call", "title": "Why is my linked list deleting after a function call?", "body": "<p>In the code below I attempt to create a linked list of strings. I then use the linked list to store output generated by a function (named myFunction) which calls itself recursively. When testing/debugging the code, I noticed that if I print the contents of the linked list after executing the function (which should add items to the linked list) nothing prints out. However, if I attempt to print the linked list after adding items from inside the function it works fine.  </p>\n\n<p>It appears that the entire linked list is deleted after the call to myFunction. On the other hand, I'm using dynamic memory allocation when I add elements to the linked list so I don't see the issue.</p>\n\n<p>Please help!</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n\ntemplate &lt;class T&gt;\nclass node{\n    public:\n    node *next;\n    T data;\n    node(){next=0;};\n    void print();\n};\n\ntemplate &lt;class T&gt;\nvoid node&lt;T&gt;::print(){\n    std::cout &lt;&lt; data;\n}\n\n\ntemplate &lt;class T&gt;\nclass List{\npublic:\n    node&lt;T&gt; *head;\n    List(){head=0;};\n    void add(T data);\n    void print();\n    int len();\n};\n\ntemplate &lt;class T&gt;\nint List&lt;T&gt;::len(){\n    int i=0;\n    node&lt;T&gt; *current=head;\n\n    while(current!= 0){\n        i++;\n        current=current-&gt;next;\n    }\n    return i;\n};\n\ntemplate &lt;class T&gt;\nvoid List&lt;T&gt;::add(T myData){\n    node&lt;T&gt; *current=head;\n    if(head==0){\n        head= new node&lt;T&gt;;\n        head-&gt;data=myData;\n    }\n    else{\n\n        while(current-&gt;next!=0){\n            current=current-&gt;next;\n        }\n\n        current-&gt;next = new node&lt;T&gt;; \n        current-&gt;next-&gt;data=myData;\n    }\n}\n\ntemplate &lt;class T&gt;\nvoid List&lt;T&gt;::print(void){\n    node&lt;T&gt; *current=head;\n    if(head==0){\n        return;\n    }\n    else{\n        do{\n            std::cout &lt;&lt; current-&gt;data &lt;&lt; \" \";   \n            current=current-&gt;next;\n        }while(current!=0);\n    }\n}\n\nvoid myFunction(List&lt;std::string&gt; myList, int n, std::string starter, int leftParens, int rightParens){\n    int remainingLength = leftParens+rightParens;\n    if(remainingLength==0){\n        myList.add(starter);\n        std::cout &lt;&lt;myList.len() &lt;&lt; std::endl;\n\n    } \n    if(leftParens &gt;0){\n        myFunction(myList, n, starter+\"(\", leftParens-1, rightParens);\n    }\n    if(leftParens==0 and rightParens &gt;0){\n        myFunction(myList, n, starter+\")\", leftParens, rightParens-1);\n    }\n\n}\n\n\nint main(int argc, char** argv) {\n\n   List&lt;std::string&gt; myList;\n\n   myFunction(myList, 5, \"\", 5, 5);\n   std::cout &lt;&lt;myList.len();\n\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1306, "user_id": 1628919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd5cdad968abf48f8911fac02719bce?s=128&d=identicon&r=PG", "display_name": "Untitled123", "link": "https://stackoverflow.com/users/1628919/untitled123"}, "edited": false, "score": 4, "creation_date": 1451492352, "post_id": 34533116, "comment_id": 56807664, "body": "Why do you want to do this?"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 3, "creation_date": 1451492376, "post_id": 34533116, "comment_id": 56807681, "body": "Use a macro? Compiled code in C++ doesn&#39;t really know the names of things [at least not in a way that is understandable by the code - debug symbols don&#39;t really count]"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1451492376, "post_id": 34533116, "comment_id": 56807682, "body": "Not possible (but perhaps some C++ preprocessor tricks might help)"}, {"owner": {"reputation": 1356, "user_id": 4358137, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/bfsy9.jpg?s=128&g=1", "display_name": "Seth Kitchen", "link": "https://stackoverflow.com/users/4358137/seth-kitchen"}, "edited": false, "score": 0, "creation_date": 1451492534, "post_id": 34533116, "comment_id": 56807765, "body": "Not sure how to do this is c++ but I wrote a similar question here: <a href=\"http://stackoverflow.com/questions/32148060/get-a-parameters-old-name\" title=\"get a parameters old name\">stackoverflow.com/questions/32148060/get-a-parameters-old-na&zwnj;&#8203;me</a> for c#. If it&#39;s possible in c# I bet it&#39;s possible in c++"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 1306, "user_id": 1628919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd5cdad968abf48f8911fac02719bce?s=128&d=identicon&r=PG", "display_name": "Untitled123", "link": "https://stackoverflow.com/users/1628919/untitled123"}, "edited": false, "score": 0, "creation_date": 1451492612, "post_id": 34533116, "comment_id": 56807810, "body": "@Untitled123 I&#39;m writing a &quot;Code Builder&quot; where a person can write, in C++, the code they want translated into the scripting language of my choosing. For example, if I write <code>named_int my_var = 5;</code> I want a way that I could call, say, <code>my_var.to_code()</code> and get a plaintext string representation that looks like <code>int my_var = 5;</code>."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1451493152, "post_id": 34533116, "comment_id": 56808108, "body": "how about not using this kind of feature? doing so is opposed to the C++ philosophy. c++ is not yet to support reflection, so try not mimic it"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1451493301, "post_id": 34533116, "comment_id": 56808216, "body": "@DavidHaim The thing is, what I&#39;m trying to do involves <i>compile-time</i> analysis of the code, not <i>run-time</i> analysis. So it feels like it&#39;s more likely that the concept is possible."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 1, "creation_date": 1451493851, "post_id": 34533116, "comment_id": 56808509, "body": "What name would you expect for a dynamically allocated <code>my_named_int</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 413, "user_id": 5683109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62c83659808b54d9596183ee00c4eb9b?s=128&d=identicon&r=PG&f=1", "display_name": "I3ck", "link": "https://stackoverflow.com/users/5683109/i3ck"}, "is_accepted": false, "score": 0, "last_activity_date": 1451492583, "creation_date": 1451492583, "answer_id": 34533210, "question_id": 34533116, "link": "https://stackoverflow.com/questions/34533116/how-to-write-a-class-that-will-know-its-own-variable-name/34533210#34533210", "title": "How to Write a Class that will &quot;Know&quot; its own variable name", "body": "<p>Maybe this is what you can use: <a href=\"https://github.com/I3ck/cppDbg\" rel=\"nofollow\">https://github.com/I3ck/cppDbg</a><br>\nOtherwise use a constructor which also takes a string as name or do something similar as in cppDbg yourself</p>\n"}, {"comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1451492754, "post_id": 34533229, "comment_id": 56807893, "body": "This is probably closer to what I&#39;m actually trying to do. A lot of what I&#39;m doing involves inspecting the code at compile-time, not necessarily at run-time."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1451492839, "post_id": 34533229, "comment_id": 56807937, "body": "What do you mean by &quot;Not idiomatic C++&quot;? Are there significant design conventions I&#39;d be violating by doing this?"}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1451493811, "post_id": 34533229, "comment_id": 56808494, "body": "@Xirema Stroustrup himself said in &quot;The C++ Programming Language&quot; he wishes macros had been removed already. This is roughly what the &quot;not idiomatic&quot; stands for here, I guess. :-)"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1451506449, "post_id": 34533229, "comment_id": 56814816, "body": "@cad: On the other hand, using macros is the <i>only</i> way of doing it. Usually you say things are not idiomatic when there is some idiom which is the preferred way of doing it -- for instance GOTO is not idiomatic in C++ because you can always use other control structures which are better behaved wrt scopes and object lifetimes and such. But in this case there is <i>no</i> way to do it that doesn&#39;t use macros."}], "tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": false, "score": 9, "last_activity_date": 1451506722, "last_edit_date": 1451506722, "creation_date": 1451492660, "answer_id": 34533229, "question_id": 34533116, "link": "https://stackoverflow.com/questions/34533116/how-to-write-a-class-that-will-know-its-own-variable-name/34533229#34533229", "title": "How to Write a Class that will &quot;Know&quot; its own variable name", "body": "<p>In C++ variables do not know their own name.</p>\n\n<p>The best you can do is use the preprocessor:</p>\n\n<pre><code>#define DECLARE_NAMED_INT(value, name) my_named_int name((value), #name);\n</code></pre>\n\n<p>That said this is not idiomatic C++ so you might consider looking at the real problem you're trying to solve and ask <em>that</em> as another question. Specifically I mean that reflection (Which seems to be what this question is about) is not a C++ feature and as such problems are typically solved in alternate ways.</p>\n"}, {"comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 1, "creation_date": 1451493080, "post_id": 34533302, "comment_id": 56808070, "body": "A map will get used at some point in the actual final code, but this doesn&#39;t solve the problem of having to &quot;double-write&quot; the variable name to make the code work."}, {"owner": {"reputation": 1306, "user_id": 1628919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd5cdad968abf48f8911fac02719bce?s=128&d=identicon&r=PG", "display_name": "Untitled123", "link": "https://stackoverflow.com/users/1628919/untitled123"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1451493241, "post_id": 34533302, "comment_id": 56808161, "body": "At the same time, you don&#39;t have to use a variable name anymore if you only access from the map, so there is no double write :)"}], "tags": [], "owner": {"reputation": 1306, "user_id": 1628919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd5cdad968abf48f8911fac02719bce?s=128&d=identicon&r=PG", "display_name": "Untitled123", "link": "https://stackoverflow.com/users/1628919/untitled123"}, "is_accepted": false, "score": 0, "last_activity_date": 1451493005, "creation_date": 1451493005, "answer_id": 34533302, "question_id": 34533116, "link": "https://stackoverflow.com/questions/34533116/how-to-write-a-class-that-will-know-its-own-variable-name/34533302#34533302", "title": "How to Write a Class that will &quot;Know&quot; its own variable name", "body": "<p>One idea that comes up is to bind all variables to what they represent using a HashMap (or unorderedmap in C++). For example, let's say you have     my_named_int my_name(5);</p>\n\n<p>You would have to write this to translate this to </p>\n\n<pre><code>myMap.insert(std::make_pair&lt;std::string,my_named_int&gt;(\"my_name\",my_name(5));\n</code></pre>\n\n<p>and retrieve it with </p>\n\n<pre><code>myMap['my_name]\n</code></pre>\n\n<p>With iterators, you can loop through all variables you have stored. This might come in handy for code builder purposes (As you can easily show all values for all stored variables)</p>\n"}, {"tags": [], "owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "is_accepted": false, "score": 2, "last_activity_date": 1451676712, "last_edit_date": 1495540745, "creation_date": 1451500781, "answer_id": 34535246, "question_id": 34533116, "link": "https://stackoverflow.com/questions/34533116/how-to-write-a-class-that-will-know-its-own-variable-name/34535246#34535246", "title": "How to Write a Class that will &quot;Know&quot; its own variable name", "body": "<p>It's true that C++ does not support reflection as a language feature, but there are many ways that people implement reflection-like properties.</p>\n\n<p>For one thing you can look at <code>boost::fusion</code> -- in fusion, you can do things like, iterate over all the variables of a struct in order. Fusion has some templates and macros that allow you to take an arbitrary struct declared in one part of your program, and then do metaprogramming things with it as though it were a <code>std::tuple</code> of its member variable types. There are some useful practical examples of doing this in the <code>boost::spirit</code> documentation and examples.</p>\n\n<p>Fusion however doesn't track the names of variables, just their types and their order.</p>\n\n<p>If you want to be able to iterate over the list of type-and-name pairs over the variables in your struct at compile time, it can be done but as far as I know there is no library for it and you'll have to roll your own thing. (If there is a lib that does it I would like to know!)</p>\n\n<p>In another project, I basically did this (in C++11) as follows:</p>\n\n<ul>\n<li>I make a type called <code>serial_struct_field</code>. This is a compile-time data structure, it is just a type with no members, which contains a <code>typedef</code> called <code>type</code> and a <code>static constexpr</code> function of no arguments which returns a string literal called <code>name</code>. You also should have a <code>static constexpr</code> member pointer corresponding to the member variable. The purpose of this is to represent all the compile-time metadata you want to have about a member variable in some <code>struct</code>.<br>\n(Actually <code>serial_struct_field</code> is a concept rather than an actual type, there's no need for inheritance or anything here, as you see.)</li>\n<li>I make a type trait called \"serial_struct\". A serial struct (constructed using certain macros in my system) is one that can provide, via this trait, a typelist of <code>serial_struct_field</code> types. There are some template functions that check the trait and then can apply a visitor to each struct member if desired, so you can do reading / writing in many different ways as appropriate.  \n\n<ul>\n<li>For instance, you could make something like \"lua_state_visitor\" that can read or write primitive things like <code>int, double, std::string, std::vector&lt;std::string&gt;</code> to a <code>lua_State</code>, and then you would use the visitor pattern like <code>lua_state_visitor my_visitor{get_lua_state()}; my_serial_struct.write(my_visitor);</code> or something like this.  </li>\n<li>Then you could have a different visitor for reading and writing json, etc.  </li>\n<li>If you define it properly then you can have <code>serial_struct</code> inside your <code>serial_struct</code>'s and it will work fine. :)  </li>\n</ul></li>\n<li><p>To make a serial struct, I provide three macros <code>BEGIN_SERIAL_STRUCT</code>, <code>SERIAL_FIELD</code> and <code>END_SERIAL_STRUCT</code>. In code it looks like this:  </p>\n\n<pre><code>struct foo {\n  BEGIN_SERIAL_STRUCT(foo);\n  SERIAL_FIELD(std::string, id);\n  SERIAL_FIELD(int, my_int);\n  SERIAL_FIELD(double, my_double);\n  SERIAL_FIELD(std::vector&lt;std::string&gt;, my_vector);\n  END_SERIAL_STRUCT;\n\n  std::unique_ptr&lt;bar&gt; something_that_cant_really_be_serialized;\n  std::shared_ptr&lt;foo_context&gt; more_such_things;\n};\n</code></pre>\n\n<p>The resulting structure is essentially the same as</p>\n\n<pre><code>struct foo {\n  std::string, id;\n  int my_int;\n  double my_double;\n  std::vector&lt;std::string&gt; my_vector;\n\n  std::unique_ptr&lt;bar&gt; something_that_cant_really_be_serialized;\n  std::shared_ptr&lt;foo_context&gt; more_such_things;\n};\n</code></pre>\n\n<p>as far as run-time characteristics are concerned, but the macros and such set up some types and functions so that you can do the \"generic serialization\".</p></li>\n<li><p>To implement the macros themselves as illustrated, you need to be able to accumulate a list of compile time information. That's a bit tricky but there are some tricks to do it without too much complication in C++11.<br>\nIf you are willing to change the macro to look like this:</p>\n\n<pre><code>  SERIAL_FIELDS(\n    (std::string, id),\n    (int, my_int),\n    (double, my_double),\n    (std::vector&lt;std::string&gt;, my_vector));\n</code></pre>\n\n<p>or something, then it is a lot simpler to implement, and you can basically do the code generation using only macros and not having to use helper templates.<br>\n(But, it's also a design consideration, templates are usually a bit more robust than macros and they don't always play well together. For instance if your types in your serial fields have multiple template parameters (and thus commas) that can confuse your macros and give you mind-numbing problems, so for a complicated / potentially going to become complicated application you might be better off with using the templates under the hood as much as possible...)  </p></li>\n</ul>\n\n<p>For the first version I used a technique sort of like what is described <a href=\"https://stackoverflow.com/questions/4790721/c-type-registration-at-compile-time-trick\">here</a>, but changed so that it can all take place inside the definition of a <code>struct</code>. For the second version, if you just want to iterate over a list within a macro, you can use known techniques like described <a href=\"https://stackoverflow.com/questions/6707148/foreach-macro-on-macros-arguments\">here</a>. Either version will be only a few hundred lines, and self-contained.</p>\n\n<p>Basically you can have reflection if you really want in C++11, if you are willing to put up with a few hundred lines of boiler-plate hidden behind some macros for each structure that you want to use it in... YMMV</p>\n"}], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "answer_count": 4, "score": 4, "last_activity_date": 1451676712, "creation_date": 1451492269, "question_id": 34533116, "link": "https://stackoverflow.com/questions/34533116/how-to-write-a-class-that-will-know-its-own-variable-name", "title": "How to Write a Class that will &quot;Know&quot; its own variable name", "body": "<p>So let's suppose I have the following class definition:</p>\n\n<pre><code>class my_named_int {\npublic:\n    int value;\n    const string name;\n    my_named_int(int _value, /*...Does Something Go Here...?*/);\n};\n</code></pre>\n\n<p>What I would like, is if I write the following code:</p>\n\n<pre><code>int main() {\n    my_named_int my_name(5);\n    std::cout &lt;&lt; my_name.name &lt;&lt; \":\" &lt;&lt; my_name.value &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I would like the output to be:</p>\n\n<pre><code>my_name:5\n</code></pre>\n\n<p>Obviously, the easiest way to resolve this would be to write code that looks like this:</p>\n\n<pre><code>class my_named_int {\npublic:\n    int value;\n    const string name;\n    my_named_int(int _value, const string &amp; _name);\n};\n\nint main() {\n    my_named_int my_name(5, \"my_name\");\n    std::cout &lt;&lt; my_name.name &lt;&lt; \":\" &lt;&lt; my_name.value &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>But of course, this adds repetitiveness to my code. Is there a way to do this in C++ without the \"double-writing\" of the variable name, and if so, how would I go about it?</p>\n"}, {"tags": ["c++", "multithreading", "server", "client"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1451496816, "post_id": 34533028, "comment_id": 56810131, "body": "<code>memset(&amp;buffer, 0, sizeof(buffer));</code> just warms up the universe. Remove it from there and fight global warming!"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1451496889, "post_id": 34533028, "comment_id": 56810174, "body": "Also, consider swithing to std::thread."}], "answers": [{"tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": 1, "last_activity_date": 1451496064, "creation_date": 1451496064, "answer_id": 34534099, "question_id": 34533028, "link": "https://stackoverflow.com/questions/34533028/server-multithreading-cant-save-last-socket-descriptor/34534099#34534099", "title": "server multithreading can&#39;t save last socket descriptor", "body": "<p>The bug in your code is as follows (I have removed the irrelevant lines of code, and cleaned up the indentation):</p>\n\n<pre><code>while((sockFd = accept(this-&gt;sock,  (struct sockaddr *) &amp;client_sin, &amp;addr_len)) &gt;= 0)\n{\n     struct arg_struct args;\n     args.client_sock = sockFd;\n     args.server = this;\n\n     pthread_create(&amp;threads[numOfThreads],NULL,\n                    &amp;ServerTcp::recieveAndSend, &amp;args);\n     numOfThreads++;\n}\n</code></pre>\n\n<p>You are instantiating <code>arg_struct</code> in local scope, on the stack. You are then passing a pointer to the <code>arg_struct</code> to the new thread.</p>\n\n<p>The problem here is that after pthread_create() returns in the parent thread, the loop terminates (well, the current iteration of the loop terminates, and it starts again), and the <code>arg_struct</code> is no longer valid.</p>\n\n<p>However, the child thread will attempt to access it independently, via the pointer it received from pthread_create(), which will result in undefined behavior.</p>\n\n<p>The behavior you've observed is the result of this undefined behavior (the parent thread will instantiate a new <code>arg_struct</code> on the stack, in the same raw memory location, for the second thread, but the first thread will still look in the same location, when it wakes up).</p>\n\n<p>What you need to do is construct <code>arg_struct</code> on the heap, using the <code>new</code> operator. This way, the instantiated <code>arg_struct</code> will continue to exist, for the new thread. Of course, the new thread is responsible for <code>delete</code>ing the <code>arg_struct</code>, when its done, to avoid leaking memory.</p>\n"}], "owner": {"reputation": 143, "user_id": 5585119, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/55328b73f431c485a479b1e6d382238b?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar Argov", "link": "https://stackoverflow.com/users/5585119/zohar-argov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1451496064, "creation_date": 1451491899, "question_id": 34533028, "link": "https://stackoverflow.com/questions/34533028/server-multithreading-cant-save-last-socket-descriptor", "title": "server multithreading can&#39;t save last socket descriptor", "body": "<p>I have a project in which we are using threads. \nProblem is, every time a specific client sends a message, it saves only the LAST client_sock that was made, and that way I can't save the previous thread's call because every message I send from any client it answers me the answer of the last client that was created, means previous clients are ran over.</p>\n\n<pre><code>class ServerTcp {\nprivate:\npthread_t threads[50];\n</code></pre>\n\n<p>This is the function creating the threads, which is sending to recieveAndSend:</p>\n\n<pre><code>void ServerTcp:: acceptTheReaquest(){\nstruct sockaddr_in client_sin;\nunsigned int addr_len = sizeof(client_sin);\nint sockFd;\nwhile((sockFd = accept(this-&gt;sock,  (struct sockaddr *) &amp;client_sin,  \n&amp;addr_len)) &gt;= 0){\n     struct arg_struct args; //has only 2 values, initialized in next lines\n     args.client_sock = sockFd;\n     args.server = this;\n     cout &lt;&lt; \"created \" &lt;&lt; sockFd &lt;&lt; endl;\n    pthread_create(&amp;threads[numOfThreads],NULL,\n    &amp;ServerTcp::recieveAndSend, &amp;args);\n    numOfThreads++;\n}\n}\n</code></pre>\n\n<p>this is the function receiveAndSend:</p>\n\n<pre><code>static void* ServerTcp:: recieveAndSend(void * args){\narg_struct* arguments = static_cast&lt;arg_struct*&gt;(args);\nchar buffer[4096];\nwhile (true){\n    memset(&amp;buffer, 0, sizeof(buffer));\n    int bytes = arguments-&gt;server-&gt;recieveFromClient(buffer,\n     arguments-&gt;client_sock);\n    if (bytes &gt;0){\n        string message = arguments-&gt;server-&gt;reciveOutput(buffer);\n        arguments-&gt;server-&gt;sendTO(message, arguments-&gt;client_sock);\n    }\n}\nreturn (void*)NULL;\n}\n</code></pre>\n\n<p>this is the function sendTo:</p>\n\n<pre><code>void ServerTcp:: sendTO(string answer, int client_sock){\ncout &lt;&lt; \"sending to \" &lt;&lt; client_sock &lt;&lt; endl;\nchar buffer[4096];\nstrcpy(buffer, answer.c_str());\nthis-&gt;sent_bytes = send(client_sock, buffer, sizeof(buffer), 0);\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>created 4\nreceived from 4\ncreated 5\nreceived from 5\n</code></pre>\n\n<p>this means I've created a thread for client_sock 4 , and wait to receive from client_sock 4, and same for client_sock 5. now I want the server to print sending to 4, received from 4 - because I used the client with client_sock 4 which is the first one created, and the one I sent the message from, but it still holds client_sock 5, and output is:</p>\n\n<pre><code>sending to 5\nreceived from 5\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>sending to 4\nreceived from 4\n</code></pre>\n\n<p>.....HELP??</p>\n"}, {"tags": ["c++", "containers", "std"], "comments": [{"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 2, "creation_date": 1451491781, "post_id": 34532961, "comment_id": 56807371, "body": "I could. But you haven&#39;t made it clear what you are actually stuck on."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1451491932, "post_id": 34532961, "comment_id": 56807450, "body": "Look up what <code>delete</code> does. The code is built on superstition and prejudice. Then learn the lesson. Programming is not an act of faith."}, {"owner": {"reputation": 19, "user_id": 5592430, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7c67ffff9f7b72b390c84daf1a7f13f?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kazmin", "link": "https://stackoverflow.com/users/5592430/roman-kazmin"}, "edited": false, "score": 0, "creation_date": 1451492085, "post_id": 34532961, "comment_id": 56807532, "body": "That is codes from my project. I found that element of this vector can be used after its deleting - and it produces crash of my system"}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1451493356, "post_id": 34532961, "comment_id": 56808244, "body": "Surely it might still crash if you try to dereference null. What are you trying to do? Take the pointers of of the vector so the vector has fewer elements afterwards, or leave them it so they blow up/other UB if you dereference them? You might be confusing deleting what a pointer in a vector points to, and erasing that element from a vector."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1451493602, "post_id": 34532961, "comment_id": 56808375, "body": "@doctorlove - there are situation where it makes sense to leave a <code>nullptr</code> in a vector instead of erasing the vector element. That doesn&#39;t lead to a blow up/UB by itself."}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1451493810, "post_id": 34532961, "comment_id": 56808493, "body": "True - that&#39;s why I said &quot;if you dereference them&quot; which I said because of the OP&#39;s comment &quot; I found that element of this vector can be used after its deleting - and it produces crash of my system &quot; I suspect the same will happen with a nullptr."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1451494255, "post_id": 34532961, "comment_id": 56808738, "body": "@doctorlove - you could be right - you could be wrong! It depends...  If all uses of elements from the vector includes a check for <code>nullptr</code> there would be no problem at all."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 5592430, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7c67ffff9f7b72b390c84daf1a7f13f?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kazmin", "link": "https://stackoverflow.com/users/5592430/roman-kazmin"}, "edited": false, "score": 0, "creation_date": 1451492739, "post_id": 34533165, "comment_id": 56807880, "body": "Yes I agree - but what is about iterator? Does it valid after deleting? And what is about c++11? What are the other options?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 19, "user_id": 5592430, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7c67ffff9f7b72b390c84daf1a7f13f?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kazmin", "link": "https://stackoverflow.com/users/5592430/roman-kazmin"}, "edited": false, "score": 2, "creation_date": 1451492828, "post_id": 34533165, "comment_id": 56807933, "body": "Yes - the iterator is valid because you didn&#39;t erase any elements in the vector. Delete is calling the destructor of T but not changing the vector."}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 2, "last_activity_date": 1451494959, "last_edit_date": 1451494959, "creation_date": 1451492437, "answer_id": 34533165, "question_id": 34532961, "link": "https://stackoverflow.com/questions/34532961/safety-deleting-elements-of-the-container/34533165#34533165", "title": "Safety deleting elements of the container", "body": "<p>You don't remove the element from the vector. So the vector element is pointing to the location as before, i.e. the same T. However, since you have deleted that T you can not dereference the pointer anymore - that would be UB and may crash your program.</p>\n\n<p><code>delete</code> is calling the destructor of T (great, it's something you shall do) but <code>delete</code>is not changing the vector. Consequently the iterator is valid all the time.</p>\n\n<p>Either you should remove the element for which you have called delete or at least set the vector element to nullptr.</p>\n\n<pre><code>typename std::vector&lt;T*&gt;::iterator it;\nfor (it=std::vector&lt;T*&gt;::begin();it!=std::vector&lt;T*&gt;::end();it++)\n{\n    delete *it;\n    *it = nullptr;  // Only needed when you don't erase the vector element\n}\n</code></pre>\n\n<p><b>That solution requires that you always check for nullptr before using any element of the vector.</b></p>\n\n<p>In most cases the best solution is however to remove the element from the vector.</p>\n\n<p>In the case where you destroy all elements by calling <code>delete</code> on every element, simply call <code>clear</code> on the vector after the loop.</p>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1451497105, "post_id": 34533188, "comment_id": 56810298, "body": "Downvote for awfully performant hand-written remove_if idiom."}], "tags": [], "owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "is_accepted": false, "score": 1, "last_activity_date": 1451498029, "last_edit_date": 1451498029, "creation_date": 1451492512, "answer_id": 34533188, "question_id": 34532961, "link": "https://stackoverflow.com/questions/34532961/safety-deleting-elements-of-the-container/34533188#34533188", "title": "Safety deleting elements of the container", "body": "<p>For example, for you first two questions which appeared to regard clearing a vector</p>\n\n<pre><code>std::vector&lt;int&gt; v;//maybe have elements or not...\n</code></pre>\n\n<ol>\n<li><p>Clear the vector by calling <code>clear</code></p>\n\n<pre><code>v.clear();\n</code></pre></li>\n<li><p>If you wish to remove elements while you walk over the vector which satisfy a condition (i.e. a predicate) using <code>v.erase(it)</code> you need to be careful. Fortunately, <code>erase</code> returns the iterator after the removed position,  so something like</p>\n\n<pre><code>for (auto it=v.begin();it!=v.end();)\n{\n     if (predicate(it))\n         it = v.erase(it);\n     else\n         ++it;\n}\n</code></pre>\n\n<p>Obviously you can use <code>std::remove_if</code> instead (with <code>std::erase</code>) if you want to shrink your vector slightly, avoiding a \"awfully performant hand-written remove_if\" as a commenter described this. <br> </p></li>\n</ol>\n\n<p>If you want to delete things as you loop round, you can either hand-do a loop yourself or use an algorithm - but smart pointers make far more sense. I suspect you <em>are</em> wanting to delete the items possibly in addition to shrinking the vector since you said \" I found that element of this vector can be used after its deleting\". If you do want to store raw pointers in a container, just <code>delete</code> the items, you don't the the <code>if</code> in your suggested code. You need to consider when you plan on doing this. <br>\nNote: changing the contents of an iterator doesn't invalidate an iterator. </p>\n\n<p>You should consider using smart pointers, for exception safety etc.</p>\n"}], "owner": {"reputation": 19, "user_id": 5592430, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7c67ffff9f7b72b390c84daf1a7f13f?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kazmin", "link": "https://stackoverflow.com/users/5592430/roman-kazmin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1451498029, "creation_date": 1451491646, "last_edit_date": 1451491814, "question_id": 34532961, "link": "https://stackoverflow.com/questions/34532961/safety-deleting-elements-of-the-container", "title": "Safety deleting elements of the container", "body": "<p>Could you suggest safety deleting of element of std::vector in to cases:\n1. Clear all elements of the vector;\n2. Erase one element depending on condition.</p>\n\n<p>What are the dangers of this code:</p>\n\n<pre><code>    typename std::vector&lt;T*&gt;::iterator it;\n    for (it=std::vector&lt;T*&gt;::begin();it!=std::vector&lt;T*&gt;::end();it++)\n    {\n        if (*it) delete *it;\n    }\n</code></pre>\n\n<p>Thank's.</p>\n"}, {"tags": ["c++", "c", "arduino"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1451492090, "post_id": 34532941, "comment_id": 56807537, "body": "Please post the code.  What does the documentation say about the delay limitations?  This seems to be a runtime question.  You have indicated the expected and actual output.  The next (and major) requirement for stackoverflow,com, is the source code."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1451492167, "post_id": 34532941, "comment_id": 56807577, "body": "Are you calling it as <code>delay(60000)</code> or something like <code>delay(60*1000)</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 5718798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35910f3397a131358716839170d8aa0f?s=128&d=identicon&r=PG&f=1", "display_name": "Mufaro Shumba", "link": "https://stackoverflow.com/users/5718798/mufaro-shumba"}, "edited": false, "score": 0, "creation_date": 1451492466, "post_id": 34533050, "comment_id": 56807730, "body": "Then it should work, but what I have decided to do was to split up my values and look through and that seems to work perfectly. But thank you for the response."}], "tags": [], "owner": {"reputation": 131, "user_id": 3957251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R8YPS.png?s=128&g=1", "display_name": "William Schaller", "link": "https://stackoverflow.com/users/3957251/william-schaller"}, "is_accepted": false, "score": 3, "last_activity_date": 1451581360, "last_edit_date": 1495541256, "creation_date": 1451492012, "answer_id": 34533050, "question_id": 34532941, "link": "https://stackoverflow.com/questions/34532941/in-arduino-is-there-a-maximum-delay-time-when-using-the-fuctiondelay/34533050#34533050", "title": "In Arduino is there a Maximum delay time when using the fuction(Delay)", "body": "<p>From the <a href=\"https://www.arduino.cc/en/Reference/Delay\" rel=\"nofollow noreferrer\">arduino reference page for delay</a> the parameter for <em>delay</em> is an <em>unsigned long</em></p>\n\n<p>Unsigned longs <a href=\"https://www.arduino.cc/en/Reference/UnsignedLong\" rel=\"nofollow noreferrer\">on the arduino</a> can reach from 0 to 4,294,967,295.</p>\n\n<p>It is likely that the number being passed to 'delay' is being interpreted as an int. This would mean the delay is limited to a max of 32,767.</p>\n\n<p>You should explicitly declare your delay value as an unsigned long <a href=\"https://stackoverflow.com/questions/19167272/my-arduino-stops-after-1-minute-wait\">like the solution in this post</a>. </p>\n\n<pre><code>unsigned long seconds = 1000L; //Notice the L \nunsigned long minutes = seconds * 60;\n\ndelay(minutes); //for 60,000 milliseconds\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 1, "last_activity_date": 1451492571, "creation_date": 1451492571, "answer_id": 34533207, "question_id": 34532941, "link": "https://stackoverflow.com/questions/34532941/in-arduino-is-there-a-maximum-delay-time-when-using-the-fuctiondelay/34533207#34533207", "title": "In Arduino is there a Maximum delay time when using the fuction(Delay)", "body": "<p>given this link: <a href=\"https://www.arduino.cc/en/Reference/DelayMicroseconds\" rel=\"nofollow\">https://www.arduino.cc/en/Reference/DelayMicroseconds</a></p>\n\n<p>Currently, the largest value that will produce an accurate delay is 16383. This could change in future Arduino releases. For delays longer than a few thousand microseconds, you should use delay() instead. </p>\n\n<p>all of which seems to indicate that the function is only paying attention to the lower 14 bits.</p>\n\n<p>So even in the longer delay function: <code>delay()</code>  it is likely that only the lower 14 bits are being utilized.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10582960, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/143563ead7699466dfd0ea16f16c243c?s=128&d=identicon&r=PG", "display_name": "Shamsher Raja", "link": "https://stackoverflow.com/users/10582960/shamsher-raja"}, "is_accepted": false, "score": 0, "last_activity_date": 1540937688, "creation_date": 1540937688, "answer_id": 53073651, "question_id": 34532941, "link": "https://stackoverflow.com/questions/34532941/in-arduino-is-there-a-maximum-delay-time-when-using-the-fuctiondelay/53073651#53073651", "title": "In Arduino is there a Maximum delay time when using the fuction(Delay)", "body": "<p>Why not use certain delay like 10000 (10 sec) and increase a dummy variable by 1, and then when dummy varable reaches your desired delay period do your thing. Like dummy variable is 1 is 10 sec, when it's 20 that will be 20x10= 200 secs and so on. this  can go long way.</p>\n"}, {"tags": [], "owner": {"reputation": 48, "user_id": 3837914, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dd422dc623db0cdbf4e8fa779daf66fb?s=128&d=identicon&r=PG&f=1", "display_name": "Dr. Azzy", "link": "https://stackoverflow.com/users/3837914/dr-azzy"}, "is_accepted": false, "score": 1, "last_activity_date": 1595051110, "creation_date": 1595051110, "answer_id": 62965111, "question_id": 34532941, "link": "https://stackoverflow.com/questions/34532941/in-arduino-is-there-a-maximum-delay-time-when-using-the-fuctiondelay/62965111#62965111", "title": "In Arduino is there a Maximum delay time when using the fuction(Delay)", "body": "<p>Yeesh... someone cited this thread elsewhere, here is the correct explanation:</p>\n<p>delay() takes an unsigned long (32-bit number between 0 and 2^32-1, or about 4.2 billion). And delay(60000) works fine.\nThere are two ways that one could get into trouble trying to pass numbers larger than those used in blink, but smaller than 4.2 billion to\ndelay()</p>\n<p>First,  if you generate the number on the spot by multiplying numbers together, for example delay(60*1000);</p>\n<p>Both of these numbers will default to int (16-bit signed integer from -32768 to 32767), so that multiplication will overflow that\u2026 leaving you with -5536 if my math serves me\u2026 Then, that gets converted to an unsigned long, leaving you with 2^32-5536, or, well, approximately 4.2 billion.</p>\n<p>Solution is simple - explicitly tell the compiler that you intend for that literal to be an unsigned long, by putting UL after one of the numbers (the other will be automatically promoted to unsigned long to match):</p>\n<p>delay(60UL*1000);</p>\n<p>The other way an arduino user could get in trouble here (really, the same way, only through a different route) would be if they assigned the delay to a data type that couldn\u2019t fit it, for example:</p>\n<p>int time=60000; //this ends up as -5536 too...</p>\n<p>\u2026</p>\n<p>delay(time); //same result!</p>\n<p>Solution is also quite simple - just declare time as an unsigned long, instead of int.</p>\n<p>Note that the first case (but not the second), where the constant expression generates an overflow, would actually generate a compiler warning\u2026. Except, arduino turns off compiler warnings by default. You can turn them back on in File -&gt; preferences. Sometimes it will warn about things that are fine, but when you see warnings, and it\u2019s not doing what you want, the warnings are a good place to start looking.</p>\n<p>Background on delayMicroseconds()</p>\n<p>The issue with delayMicroseconds() having the maximum length of 16383 is unrelated - that limitation is because delayMicroseconds is, under the hood, implemented completely differently from delay(). delay() is based on micros() and the millis timer system (a hardware timer is configured prior to setup() being called, with the overflow interrupt incrementing a global count of milliseconds; millis() uses that count, and micros uses that plus the current count on the timer). delayMicroseconds, however, needs much higher accuracy than that method could achieve (micros takes something like 7-8us to return, and has resolution of 4us, since the timer in question runs off the 16MHz clock with /64 prescale); it's implemented by counting clock cycles. It takes an unsigned int (16-bit) instead of unsigned long, first off. It multiplies the requested delay by 4 (for 16MHz clock, at least), converting it into the number of iterations of a loop written in inline assembler that takes 4 clock cycles per iteration. So that's where the apparent 14-bit limit comes from: the number of 4-cycle loops has to fit in 16 bits, so the number of microseconds is 1/4th that (assuming 16 MHz system clock - so an 8 MHz pro mini, for example, you could specify twice as long of a delay to delayMicroseconds()!). On an (admittedly rare) 20 MHz one, the longest delay would be around 13000 ((2^16-1)/(20/4=5)) Long before that, though, you're better off just doing a while loop that checks micros()...</p>\n"}], "owner": {"reputation": 61, "user_id": 5718798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35910f3397a131358716839170d8aa0f?s=128&d=identicon&r=PG&f=1", "display_name": "Mufaro Shumba", "link": "https://stackoverflow.com/users/5718798/mufaro-shumba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11098, "favorite_count": 0, "answer_count": 4, "score": 6, "last_activity_date": 1595051110, "creation_date": 1451491589, "last_edit_date": 1451491994, "question_id": 34532941, "link": "https://stackoverflow.com/questions/34532941/in-arduino-is-there-a-maximum-delay-time-when-using-the-fuctiondelay", "title": "In Arduino is there a Maximum delay time when using the fuction(Delay)", "body": "<pre><code>{\n    digitalWrite(13, HIGH);   // turn the LED on (HIGH is the voltage level)\n    delay(1000);              // wait for a second\n    digitalWrite(13, LOW);    // turn the LED off by making the voltage LOW\n    delay(1000);              // wait for a second\n}\n</code></pre>\n\n<p>I am trying to set the Delay to 60,000 but when outputting it to the Arduino after 1 minute passes the light does not switch on.</p>\n"}, {"tags": ["c++", "language-lawyer"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1451491727, "post_id": 34532892, "comment_id": 56807336, "body": "The member definition could be in a different file? Maybe <a href=\"http://pastebin.com/BWqSkVVc\" rel=\"nofollow noreferrer\">like this</a>?"}, {"owner": {"reputation": 4152, "user_id": 967501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/7fQPN.jpg?s=128&g=1", "display_name": "P&#233;tur Ingi Egilsson", "link": "https://stackoverflow.com/users/967501/p%c3%a9tur-ingi-egilsson"}, "edited": false, "score": 0, "creation_date": 1451491761, "post_id": 34532892, "comment_id": 56807354, "body": "<code>#include members.c</code>"}, {"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1451492508, "post_id": 34532892, "comment_id": 56807753, "body": "@KerrekSB I don&#39;t think that&#39;s possible because the maximum declarative region is a translation unit. In fact, that gives me an error."}, {"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "reply_to_user": {"reputation": 4152, "user_id": 967501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/7fQPN.jpg?s=128&g=1", "display_name": "P&#233;tur Ingi Egilsson", "link": "https://stackoverflow.com/users/967501/p%c3%a9tur-ingi-egilsson"}, "edited": false, "score": 0, "creation_date": 1451492665, "post_id": 34532892, "comment_id": 56807836, "body": "@P&#233;tur That inclusion, if successful, ultimately results in the precedence of the declaration relative to the member definition."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1451496313, "post_id": 34532892, "comment_id": 56809864, "body": "Personally, I don&#39;t know of a case (offhand) where the potential scope of a declaration of a member extends past the end of a class definition. Perhaps when the class is unnamed and the ember-name is an enumerator (?). In the other cases, the potential scope of a member only extends till the end of the class definition, since afterwards you need to qualify the member name with the class name such as <code>classname::membername</code>. As such, the clarification is necessary, I would say."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 2, "creation_date": 1451496659, "post_id": 34532892, "comment_id": 56810047, "body": "Also consider <code>namespace A { int i = 0; struct B { void f(); }; } void A::B::f() { int x = i; &#47;* visible! *&#47; }</code>. The <code>i</code> is visible, even if the definition of <code>A::B::f</code> isn&#39;t nested within <code>A</code>. Although, these rules feels kind-of duplicative with the &quot;shall be declared in...&quot; rules of 3.4.1 (unqualified name lookup), which defines the potential scope aswell. The very definition of potential scope is based on the success of unqualified name lookup, more or less (unless I&#39;m missing something)."}, {"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1451666209, "post_id": 34532892, "comment_id": 56858910, "body": "@JohannesSchaub-litb Forgive me for taking so long to reply your comments. First of all, the example you just gave me clearly suggests that there is a case where a member definition resides in outer scope of the declaration in question. That means my hypothesis was wrong and my question is nicely answered by you!"}, {"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1451666245, "post_id": 34532892, "comment_id": 56858919, "body": "@JohannesSchaub-litb However, I really want to ask you about what you meant by your first comment. The point of my question was not about the potential scope of a member\u2014it&#39;s more of whether the potential scope of the declaration in question reaches out to the outer member definition. Can you elaborate on how that&#39;s related to my question?"}, {"owner": {"reputation": 438, "user_id": 5181494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMGNT.png?s=128&g=1", "display_name": "Eugene Zavidovsky", "link": "https://stackoverflow.com/users/5181494/eugene-zavidovsky"}, "edited": false, "score": 0, "creation_date": 1451674859, "post_id": 34532892, "comment_id": 56861626, "body": "@Il-seobBae Let me intrude my thoughts here. I suppose, he implied these words in 3.3.7\\1: &quot;rules describe the scope of names declared <b>in classes</b>&quot;. But the words &quot;past the end&quot; in 3.3.7\\1.4, 1.5 imply, I think, not names declared in classes, but names declared in a some enclosing declarative region (namespace A in his example) of a class. So potential scopes of such names indeed may extend past the end of the class definition and they extend to the end of their declarative region (namespace A). So..."}, {"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1451707466, "post_id": 34532892, "comment_id": 56868648, "body": "@KerrekSB In addition, they don&#39;t belong to the same type, I suppose."}, {"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "reply_to_user": {"reputation": 438, "user_id": 5181494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMGNT.png?s=128&g=1", "display_name": "Eugene Zavidovsky", "link": "https://stackoverflow.com/users/5181494/eugene-zavidovsky"}, "edited": false, "score": 1, "creation_date": 1451708459, "post_id": 34532892, "comment_id": 56868815, "body": "@EugeneZavidovsky I don&#39;t know what you&#39;re talking about. That&#39;s exactly all I said before. The intention of my comments is to ask him about why he did ever mention the potential scope of <b>a member</b>."}], "owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 2, "answer_count": 0, "score": 3, "last_activity_date": 1451491408, "creation_date": 1451491408, "question_id": 34532892, "link": "https://stackoverflow.com/questions/34532892/is-3-3-7-4-from-n4567-redundant", "title": "Is &#167;3.3.7/4 from N4567 redundant?", "body": "<p>According to N4567, 3.3.7 paragraph 4 says,</p>\n\n<blockquote>\n  <p>The potential scope of a declaration that extends to or past the end of a class definition also extends to the regions defined by its member definitions, <strong>even if the members are defined lexically outside the class</strong>...</p>\n</blockquote>\n\n<p>However, I don't see a need for making it clear because such a member definition must be in the scope of that declaration regardless of its lexical positioning. In other words, it seems there is no case where such a member definition dwells outside the scope of the declaration. See the following example:</p>\n\n<pre><code>int always_visible=10;\n\nclass some {\n    int foo(void);\n};\n\nint some::foo(void) {\n    // no ambiguity occurs because its member definition\n    // is always in the scope of always_visible.\n    return always_visible;\n}\n</code></pre>\n\n<p>I don't think it's possible for its member definition to precede the declaration of always_visible, in which case the wording above might be useful. Then, why is that clarification needed?</p>\n"}, {"tags": ["c++", "casting", "stdvector"], "answers": [{"comments": [{"owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "edited": false, "score": 0, "creation_date": 1451491777, "post_id": 34532926, "comment_id": 56807369, "body": "&quot;but you need to be carefull with this approach.&quot; -- why?"}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "reply_to_user": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "edited": false, "score": 0, "creation_date": 1451491963, "post_id": 34532926, "comment_id": 56807475, "body": "because C has no idea of objects , constructors or destructors. so because the expression &amp;vec[x] is mutable, extra care should be taken when dealing with C API&#39;s - the library might even try to <code>realloc</code> the whole data structure!"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "edited": false, "score": 0, "creation_date": 1451492036, "post_id": 34532926, "comment_id": 56807509, "body": "@TheOperator: For the same reasons as <code>data</code> (reallocation on the vector can invalidate it), and because unlike <code>data</code>, <code>&amp;vec[0]</code> is often legitimate code for non-<code>vector</code> types with non-contiguous storage, but if you tried to use it like a pointer to array (legal with <code>vector</code>) and accessed neighboring memory, it would be undefined behavior. Also, not sure on this, but I suspect a <code>vector</code> of references might behave &quot;interestingly&quot; (getting the address of the element referenced, not the reference itself; am I right on that?)"}, {"owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1451492870, "post_id": 34532926, "comment_id": 56807957, "body": "The answer sounds as if <code>&amp;vec[0]</code> were more dangerous than <code>data()</code>, but there&#39;s no reason given (&quot;you need to be careful&quot; is not too helpful). @ShadowRanger STL containers cannot hold references."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "edited": false, "score": 0, "creation_date": 1451493261, "post_id": 34532926, "comment_id": 56808183, "body": "@TheOperator: Thanks, wasn&#39;t sure. Never felt the need to try (I&#39;d consider an attempt to do it to be code smell by people who don&#39;t understand automatic/stack variables). But yeah, I suspect the main reason to prefer <code>data</code> is that stuff like <code>std::deque</code> would allow you to take <code>&amp;seq[0]</code> and use it as a <code>char**</code>, but using it as a C-style array would be undefined behavior. Using <code>data</code> lets the compiler verify easily that you&#39;re using a <code>vector</code> (or something else with <code>data</code>), not just a sequence that offers <code>operator[]</code>."}], "tags": [], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "is_accepted": false, "score": 4, "last_activity_date": 1451491779, "last_edit_date": 1451491779, "creation_date": 1451491514, "answer_id": 34532926, "question_id": 34532886, "link": "https://stackoverflow.com/questions/34532886/c-cast-stdvectorchar-to-char/34532926#34532926", "title": "C++ cast std::vector&lt;char*&gt; to char**", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/container/vector/data\" rel=\"nofollow\"><code>std::vector::data</code></a> will produce <code>char**</code> , although this pointer can get invalidated if reallocation happens on the vector.</p>\n\n<p>Also, <code>&amp;vec[0]</code> is another technique for producing a mutable pointer, but you need to be careful with this approach.</p>\n"}, {"tags": [], "owner": {"reputation": 413, "user_id": 5683109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62c83659808b54d9596183ee00c4eb9b?s=128&d=identicon&r=PG&f=1", "display_name": "I3ck", "link": "https://stackoverflow.com/users/5683109/i3ck"}, "is_accepted": false, "score": 1, "last_activity_date": 1451491609, "creation_date": 1451491609, "answer_id": 34532948, "question_id": 34532886, "link": "https://stackoverflow.com/questions/34532886/c-cast-stdvectorchar-to-char/34532948#34532948", "title": "C++ cast std::vector&lt;char*&gt; to char**", "body": "<p>Use the data method for this : \n<a href=\"http://en.cppreference.com/w/cpp/container/vector/data\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/container/vector/data</a><br>\nwhich will return a pointer to the vectors data</p>\n"}], "owner": {"reputation": 15, "user_id": 3061631, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a169b7c924832cf6f273040850b38b6c?s=128&d=identicon&r=PG&f=1", "display_name": "user3061631", "link": "https://stackoverflow.com/users/3061631/user3061631"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1240, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1451491779, "creation_date": 1451491395, "question_id": 34532886, "link": "https://stackoverflow.com/questions/34532886/c-cast-stdvectorchar-to-char", "title": "C++ cast std::vector&lt;char*&gt; to char**", "body": "<p>How can I cast <em>or convert</em> a std::vector to char** in C++?</p>\n\n<p>I'm using std::vector because I need to push_back some strings inside a loop, but then I have to call a C function that requires a char**.</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"comments": [{"owner": {"reputation": 2123, "user_id": 2135363, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/PXld6.jpg?s=128&g=1", "display_name": "McLan", "link": "https://stackoverflow.com/users/2135363/mclan"}, "edited": false, "score": 0, "creation_date": 1451493430, "post_id": 34533120, "comment_id": 56808284, "body": "Thanks for your answer. In my question I meant that whenever the app starts, whether on Windows or Mac, it should load the app icon regardless of the OS. I think I need to check the OS first and upon that the system should assign the corresponding icon format, right ?"}, {"owner": {"reputation": 11418, "user_id": 741595, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a7a0996d629052539c4f7e05e844ed16?s=128&d=identicon&r=PG", "display_name": "Nicholas Smith", "link": "https://stackoverflow.com/users/741595/nicholas-smith"}, "reply_to_user": {"reputation": 2123, "user_id": 2135363, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/PXld6.jpg?s=128&g=1", "display_name": "McLan", "link": "https://stackoverflow.com/users/2135363/mclan"}, "edited": false, "score": 0, "creation_date": 1451494044, "post_id": 34533120, "comment_id": 56808624, "body": "If you follow the instructions in that link it&#39;ll explain the differences, how you set the application icon differs per platform so you don&#39;t need to do any OS checks."}], "tags": [], "owner": {"reputation": 11418, "user_id": 741595, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a7a0996d629052539c4f7e05e844ed16?s=128&d=identicon&r=PG", "display_name": "Nicholas Smith", "link": "https://stackoverflow.com/users/741595/nicholas-smith"}, "is_accepted": false, "score": 1, "last_activity_date": 1451492279, "creation_date": 1451492279, "answer_id": 34533120, "question_id": 34532759, "link": "https://stackoverflow.com/questions/34532759/qt-c-how-to-set-platform-independent-application-icon/34533120#34533120", "title": "Qt/c++: How to set platform independent application icon?", "body": "<p>Setting application icons is already independent, Windows and OS X require different icon formats: <a href=\"http://doc.qt.io/qt-5/appicon.html\" rel=\"nofollow\">http://doc.qt.io/qt-5/appicon.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "is_accepted": false, "score": 0, "last_activity_date": 1451493669, "creation_date": 1451493669, "answer_id": 34533476, "question_id": 34532759, "link": "https://stackoverflow.com/questions/34532759/qt-c-how-to-set-platform-independent-application-icon/34533476#34533476", "title": "Qt/c++: How to set platform independent application icon?", "body": "<blockquote>\n  <p>the application might run in both Windows and Mac Systems</p>\n</blockquote>\n\n<p>Right, but not the same executable (binary), you'll compile two versions, one for Windows and one for Mac. Executable icon could be displayed by the OS (when aplication icon is shown on desktop, task bar...) before the application is actually started. So this icon cannot be set programmatically, it must be set at compilation time. And, you must refer to <a href=\"http://doc.qt.io/qt-5/appicon.html\" rel=\"nofollow\">this post</a> to know how to set the application icon for binaries on each different platform.</p>\n"}], "owner": {"reputation": 2123, "user_id": 2135363, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/PXld6.jpg?s=128&g=1", "display_name": "McLan", "link": "https://stackoverflow.com/users/2135363/mclan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1451493669, "creation_date": 1451490923, "question_id": 34532759, "link": "https://stackoverflow.com/questions/34532759/qt-c-how-to-set-platform-independent-application-icon", "title": "Qt/c++: How to set platform independent application icon?", "body": "<p>I am developing my Qt (c++) application on MacBook. However, the application might run in both Windows and Mac Systems.</p>\n\n<p>Is there is a way to set platform independent application icon ?!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2912, "user_id": 1274223, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/uGq26.jpg?s=128&g=1", "display_name": "Alejandro", "link": "https://stackoverflow.com/users/1274223/alejandro"}, "edited": false, "score": 1, "creation_date": 1451491749, "post_id": 34532752, "comment_id": 56807350, "body": "It&#39;s has to do with <a href=\"http://thbecker.net/articles/rvalue_references/section_08.html\" rel=\"nofollow noreferrer\">reference collapsing</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2912, "user_id": 1274223, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/uGq26.jpg?s=128&g=1", "display_name": "Alejandro", "link": "https://stackoverflow.com/users/1274223/alejandro"}, "edited": false, "score": 1, "creation_date": 1451491710, "post_id": 34532916, "comment_id": 56807325, "body": "Perhaps you&#39;re talking about <a href=\"http://thbecker.net/articles/rvalue_references/section_08.html\" rel=\"nofollow noreferrer\">reference collapsing?</a>"}, {"owner": {"reputation": 321, "user_id": 5628107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f93cb979443202ee5441d1346af4b8ff?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan McCleary", "link": "https://stackoverflow.com/users/5628107/ryan-mccleary"}, "edited": false, "score": 0, "creation_date": 1451491960, "post_id": 34532916, "comment_id": 56807469, "body": "string&amp; &amp;&amp; collapses to string&amp;, but why is it string&amp; &amp;&amp; in the first place?  What is the meaning of T&amp; &amp;&amp; ?"}, {"owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 0, "creation_date": 1451493276, "post_id": 34532916, "comment_id": 56808193, "body": "<code>string&amp; &amp;&amp;</code> is invalid syntax. There is no such type-id in reality."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 321, "user_id": 5628107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f93cb979443202ee5441d1346af4b8ff?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan McCleary", "link": "https://stackoverflow.com/users/5628107/ryan-mccleary"}, "edited": false, "score": 1, "creation_date": 1451495742, "post_id": 34532916, "comment_id": 56809572, "body": "@RyanMcCleary <code>T&amp;&amp;</code> with <code>T</code> resolving as <code>string&amp;</code> gives <code>string&amp;</code>."}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 1, "last_activity_date": 1451491865, "last_edit_date": 1495540324, "creation_date": 1451491470, "answer_id": 34532916, "question_id": 34532752, "link": "https://stackoverflow.com/questions/34532752/when-do-template-parameters-resolve-to-rvalue-references-to-lvalue-references-o/34532916#34532916", "title": "When do template parameters resolve to rvalue references to lvalue references, or the other way around?", "body": "<p>The reference collapsing rule make <code>print_type_and_value&lt;string&amp;&gt;(string&amp; &amp;&amp;t)</code> equivalent to <code>print_type_and_value&lt;string&amp;&gt;(string&amp; t)</code>: there are no reference to reference.</p>\n\n<p>Here is an <a href=\"https://stackoverflow.com/questions/13725747/concise-explanation-of-reference-collapsing-rules-requested-1-a-a-2\">excellent question/answer on SO regarding this rule</a>.</p>\n"}], "owner": {"reputation": 321, "user_id": 5628107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f93cb979443202ee5441d1346af4b8ff?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan McCleary", "link": "https://stackoverflow.com/users/5628107/ryan-mccleary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1451499142, "creation_date": 1451490909, "last_edit_date": 1451499142, "question_id": 34532752, "link": "https://stackoverflow.com/questions/34532752/when-do-template-parameters-resolve-to-rvalue-references-to-lvalue-references-o", "title": "When do template parameters resolve to rvalue references to lvalue references, or the other way around?", "body": "<p>I was reading about rvalue references and perfect forwarding when I came across this article on MSDN: <a href=\"https://msdn.microsoft.com/en-us/library/dd293668.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/dd293668.aspx</a></p>\n\n<p>My question is about this example from the article:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\ntemplate&lt;typename T&gt; struct S;\n\n// The following structures specialize S by \n// lvalue reference (T&amp;), const lvalue reference (const T&amp;), \n// rvalue reference (T&amp;&amp;), and const rvalue reference (const T&amp;&amp;).\n// Each structure provides a print method that prints the type of \n// the structure and its parameter.\n\ntemplate&lt;typename T&gt; struct S&lt;T&amp;&gt; {\n   static void print(T&amp; t)\n   {\n      cout &lt;&lt; \"print&lt;T&amp;&gt;: \" &lt;&lt; t &lt;&lt; endl;\n   }\n};\n\ntemplate&lt;typename T&gt; struct S&lt;const T&amp;&gt; {\n   static void print(const T&amp; t)\n   {\n      cout &lt;&lt; \"print&lt;const T&amp;&gt;: \" &lt;&lt; t &lt;&lt; endl;\n   }\n};\n\ntemplate&lt;typename T&gt; struct S&lt;T&amp;&amp;&gt; {\n   static void print(T&amp;&amp; t)\n   {\n      cout &lt;&lt; \"print&lt;T&amp;&amp;&gt;: \" &lt;&lt; t &lt;&lt; endl;\n   }\n};\n\ntemplate&lt;typename T&gt; struct S&lt;const T&amp;&amp;&gt; {\n   static void print(const T&amp;&amp; t)\n   {\n      cout &lt;&lt; \"print&lt;const T&amp;&amp;&gt;: \" &lt;&lt; t &lt;&lt; endl;\n   }\n};\n\n// This function forwards its parameter to a specialized\n// version of the S type.\ntemplate &lt;typename T&gt; void print_type_and_value(T&amp;&amp; t) \n{\n   S&lt;T&amp;&amp;&gt;::print(std::forward&lt;T&gt;(t));\n}\n\n// This function returns the constant string \"fourth\".\nconst string fourth() { return string(\"fourth\"); }\n\nint main()\n{\n   // The following call resolves to:\n   // print_type_and_value&lt;string&amp;&gt;(string&amp; &amp;&amp; t)\n   // Which collapses to:\n   // print_type_and_value&lt;string&amp;&gt;(string&amp; t)\n   string s1(\"first\");\n   print_type_and_value(s1); \n\n   // The following call resolves to:\n   // print_type_and_value&lt;const string&amp;&gt;(const string&amp; &amp;&amp; t)\n   // Which collapses to:\n   // print_type_and_value&lt;const string&amp;&gt;(const string&amp; t)\n   const string s2(\"second\");\n   print_type_and_value(s2);\n\n   // The following call resolves to:\n   // print_type_and_value&lt;string&amp;&amp;&gt;(string&amp;&amp; t)\n   print_type_and_value(string(\"third\"));\n\n   // The following call resolves to:\n   // print_type_and_value&lt;const string&amp;&amp;&gt;(const string&amp;&amp; t)\n   print_type_and_value(fourth());\n</code></pre>\n\n<p>}</p>\n\n<p>My question is, why does this call:</p>\n\n<pre><code>print_type_and_value(s1);\n</code></pre>\n\n<p>resolve to:</p>\n\n<pre><code>print_type_and_value&lt;string&amp;&gt;(string&amp; &amp;&amp;t)\n</code></pre>\n\n<p>If my understanding is correct, string&amp; &amp;&amp; is an rvalue reference to an lvalue reference.  Why is this?  The variable s1 is an lvalue (it is not temporary, it is addressable, and it can be accessed from multiple parts of the program), so shouldn't the call resolve to string&amp; (a simple lvalue reference)?  I don't see where the double reference came from.  s1 is a value, not a reference, isn't it?  Why does this call involve rvalues at all?</p>\n\n<p>In more general terms, I am a bit confused as to when template parameters resolve to T&amp; &amp;&amp; (an rvalue reference to an lvalue reference?) or T&amp;&amp; &amp; (an lvalue reference to an rvalue reference?).</p>\n\n<p>So, could someone please explain the following:</p>\n\n<ol>\n<li>Why did the call to print_type_and_value(s1) resolve to print_type_and_value(string&amp; &amp;&amp;t) ?</li>\n<li>In general, when does f(var) resolve to f(T&amp; &amp;&amp;x) or f(T&amp;&amp; &amp;x) ?</li>\n<li>I've seen examples in which template parameters resolve to T&amp;&amp; &amp;&amp;, which looks to me like an rvalue reference to an rvalue reference.  When does this happen?</li>\n</ol>\n\n<p>Of course, I am aware of the reference collapsing rules, and I understand that T&amp; &amp; is collapsed to T&amp;, but I'm wondering why the call in this example resolved to T&amp; &amp;&amp; in the first place.</p>\n\n<p>Thanks in advance for your help!</p>\n\n<p>Edit:</p>\n\n<p>I understand the basics of reference collapsing, but one thing that I'd like to know is why this specific example behaved in the way it did.  </p>\n\n<p>Why did print_type_and_value(s1) resolve to print_type_and_value(string&amp; &amp;&amp;t) and then collapse to print_type_and_value(string&amp; t) ?</p>\n\n<p>Edit 2:</p>\n\n<p>Thanks a lot for your links!  I'm starting to understand it.  </p>\n\n<p>I just have one more question.  Why does the template type evaluate to string&amp; when a variable of type string is passed?</p>\n\n<p>Edit 3:</p>\n\n<p>I've re-read the links you've posted, and I 100% get It now.  Thanks again!</p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 14077, "user_id": 1462337, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/gTJTP.png?s=128&g=1", "display_name": "rhashimoto", "link": "https://stackoverflow.com/users/1462337/rhashimoto"}, "edited": false, "score": 0, "creation_date": 1451490964, "post_id": 34532709, "comment_id": 56806916, "body": "What compiler, what error message, what boost version?"}, {"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 0, "creation_date": 1451490974, "post_id": 34532709, "comment_id": 56806919, "body": "Do you have <code>using namespace std</code> or <code>using std::makes_shared</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 555, "user_id": 5071598, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-32mDN1SXPKI/AAAAAAAAAAI/AAAAAAAAAAA/FQIq7RpsTQk/photo.jpg?sz=128", "display_name": "Gary Jackson", "link": "https://stackoverflow.com/users/5071598/gary-jackson"}, "edited": false, "score": 0, "creation_date": 1451493011, "post_id": 34533035, "comment_id": 56808027, "body": "Thanks. I have one lingering question. The following works: &quot;shared_ptr&lt;std::tuple&lt;int&gt;&gt; k = make_shared&lt;std::tuple&lt;int&gt;&gt;(0);&quot;. I wonder why ADL doesn&#39;t kick in here, but it does for other things in std (like std::string)."}, {"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "reply_to_user": {"reputation": 555, "user_id": 5071598, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-32mDN1SXPKI/AAAAAAAAAAI/AAAAAAAAAAA/FQIq7RpsTQk/photo.jpg?sz=128", "display_name": "Gary Jackson", "link": "https://stackoverflow.com/users/5071598/gary-jackson"}, "edited": false, "score": 0, "creation_date": 1451493541, "post_id": 34533035, "comment_id": 56808336, "body": "@GaryJackson ADL works for function arguments. In your example, argument is <code>0</code> which is <code>int</code> and do not trigger ADL."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 2, "creation_date": 1451493568, "post_id": 34533035, "comment_id": 56808349, "body": "Amusingly, ADL will <i>only</i> kick in here when it finds a function template with that name without ADL, as explained <a href=\"http://stackoverflow.com/questions/2953684/why-doesnt-adl-find-function-templates\">here</a>. You can test this yourself--removing the using statements for <code>boost::make_shared</code> will prevent a conforming compiler from finding <code>std::make_shared</code> as well."}], "tags": [], "owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "is_accepted": true, "score": 13, "last_activity_date": 1451491937, "creation_date": 1451491937, "answer_id": 34533035, "question_id": 34532709, "link": "https://stackoverflow.com/questions/34532709/make-shared-is-ambiguous/34533035#34533035", "title": "&#39;make_shared&#39; is ambiguous", "body": "<p>The type of <code>my_fn</code> is <code>std::function&lt;void()&gt;;</code>, residing in namespace <code>std</code>.</p>\n\n<p>When you try to call <code>make_shared&lt;my_fn&gt;(fn);</code> it sees both boost version (because you wrote <code>using boost::make_shared;</code>) and std version by virtue of ADL.</p>\n\n<p><code>int</code> does not belong to <code>std</code> namespace and std version of <code>make_shared</code> is not considered.</p>\n\n<p>Prefer to use qualified names instead when possible to avoid such problems.</p>\n"}], "owner": {"reputation": 555, "user_id": 5071598, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-32mDN1SXPKI/AAAAAAAAAAI/AAAAAAAAAAA/FQIq7RpsTQk/photo.jpg?sz=128", "display_name": "Gary Jackson", "link": "https://stackoverflow.com/users/5071598/gary-jackson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1260, "favorite_count": 0, "accepted_answer_id": 34533035, "answer_count": 1, "score": 5, "last_activity_date": 1451491937, "creation_date": 1451490726, "last_edit_date": 1451491288, "question_id": 34532709, "link": "https://stackoverflow.com/questions/34532709/make-shared-is-ambiguous", "title": "&#39;make_shared&#39; is ambiguous", "body": "<p>The following compiles unless B0RKEN is defined (like with -DB0RKEN on the command line):</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;boost/shared_ptr.hpp&gt;\n#include &lt;boost/make_shared.hpp&gt;\n\nusing boost::shared_ptr;\nusing boost::make_shared;\n\nusing my_fn = std::function&lt;void()&gt;;\n\nvoid foo()\n{\n        my_fn fn = [](){};\n\n#ifdef B0RKEN\n        shared_ptr&lt;my_fn&gt; k = make_shared&lt;my_fn&gt;(fn);\n#else\n        shared_ptr&lt;int&gt; k = make_shared&lt;int&gt;(0);\n#endif\n}\n</code></pre>\n\n<p>It seems like boost is playing some funny games, which may be why this code fragment has this issue. What I don't understand is why it works with <code>shared_ptr&lt;int&gt;</code> but not <code>shared_ptr&lt;my_fn&gt;</code>.</p>\n\n<p>I am not interested in debating whether I should be using boost or std shared pointers.</p>\n\n<p>I get the following error from clang++:</p>\n\n<pre><code>foo.cpp:15:24: error: call to 'make_shared' is ambiguous\n        shared_ptr&lt;my_fn&gt; k = make_shared&lt;my_fn&gt;(fn);\n                              ^~~~~~~~~~~~~~~~~~\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/memory:4670:1: note: candidate function [with _Tp =\n      std::__1::function&lt;void ()&gt;, _Args = &lt;std::__1::function&lt;void ()&gt; &amp;&gt;]\nmake_shared(_Args&amp;&amp; ...__args)\n^\n/opt/local/include/boost/smart_ptr/make_shared_object.hpp:246:87: note: candidate function [with T = std::__1::function&lt;void ()&gt;, Args =\n      &lt;std::__1::function&lt;void ()&gt; &amp;&gt;]\ntemplate&lt; class T, class... Args &gt; typename boost::detail::sp_if_not_array&lt; T &gt;::type make_shared( Args &amp;&amp; ... args )\n                                                                                      ^\n1 error generated.\n</code></pre>\n\n<p>And from g++:</p>\n\n<pre><code>foo.cpp: In function \u2018void foo()\u2019:\nfoo.cpp:15:45: error: call of overloaded \u2018make_shared(my_fn&amp;)\u2019 is ambiguous\n  shared_ptr&lt;my_fn&gt; k = make_shared&lt;my_fn&gt;(fn);\n                                             ^\nfoo.cpp:15:45: note: candidates are:\nIn file included from PATH_TO_TOOLCHAIN/boost-1.59.0/include/boost/smart_ptr/make_shared.hpp:15:0,\n                 from PATH_TO_TOOLCHAIN/boost-1.59.0/include/boost/make_shared.hpp:15,\n                 from foo.cpp:3:\nPATH_TO_TOOLCHAIN/boost-1.59.0/include/boost/smart_ptr/make_shared_object.hpp:246:87: note: typename boost::detail::sp_if_not_array&lt;T&gt;::type boost::make_shared(Args&amp;&amp; ...) [with T = std::function&lt;void()&gt;; Args = {std::function&lt;void()&gt;&amp;}; typename boost::detail::sp_if_not_array&lt;T&gt;::type = boost::shared_ptr&lt;std::function&lt;void()&gt; &gt;]\n template&lt; class T, class... Args &gt; typename boost::detail::sp_if_not_array&lt; T &gt;::type make_shared( Args &amp;&amp; ... args )\n                                                                                       ^\nIn file included from PATH_TO_TOOLCHAIN/gcc-4.9.3/include/c++/4.9.3/memory:82:0,\n                 from PATH_TO_TOOLCHAIN/boost-1.59.0/include/boost/config/no_tr1/memory.hpp:21,\n                 from PATH_TO_TOOLCHAIN/boost-1.59.0/include/boost/smart_ptr/shared_ptr.hpp:23,\n                 from PATH_TO_TOOLCHAIN/boost-1.59.0/include/boost/shared_ptr.hpp:17,\n                 from foo.cpp:2:\nPATH_TO_TOOLCHAIN/gcc-4.9.3/include/c++/4.9.3/bits/shared_ptr.h:600:5: note: std::shared_ptr&lt;_Tp1&gt; std::make_shared(_Args&amp;&amp; ...) [with _Tp = std::function&lt;void()&gt;; _Args = {std::function&lt;void()&gt;&amp;}]\n     make_shared(_Args&amp;&amp;... __args)\n     ^\n</code></pre>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 35699, "user_id": 2056772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/574eff69e66401997eecd2ac405053c1?s=128&d=identicon&r=PG", "display_name": "berak", "link": "https://stackoverflow.com/users/2056772/berak"}, "edited": false, "score": 1, "creation_date": 1451490629, "post_id": 34532660, "comment_id": 56806716, "body": "do <b>not</b> use IplImages for anything. the c-api is deadbeef"}, {"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "edited": false, "score": 0, "creation_date": 1451491076, "post_id": 34532660, "comment_id": 56806970, "body": "see second answer <a href=\"http://stackoverflow.com/questions/4664187/converting-cvmat-to-iplimage\" title=\"converting cvmat to iplimage\">stackoverflow.com/questions/4664187/&hellip;</a>"}, {"owner": {"reputation": 153, "user_id": 2332862, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61a6a9dc9e27bd3c244b604085963bff?s=128&d=identicon&r=PG&f=1", "display_name": "schirrel", "link": "https://stackoverflow.com/users/2332862/schirrel"}, "edited": false, "score": 0, "creation_date": 1451491217, "post_id": 34532660, "comment_id": 56807058, "body": "i was using as my professor lead me saind IPlImages were faster than mat and my work would be real time"}, {"owner": {"reputation": 35699, "user_id": 2056772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/574eff69e66401997eecd2ac405053c1?s=128&d=identicon&r=PG", "display_name": "berak", "link": "https://stackoverflow.com/users/2056772/berak"}, "edited": false, "score": 2, "creation_date": 1451491697, "post_id": 34532660, "comment_id": 56807313, "body": "your professor is wrong."}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 1, "creation_date": 1451508003, "post_id": 34532660, "comment_id": 56815682, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/33840229/how-to-enhance-the-contrast-using-convertto\">How to enhance the contrast using convertTo?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 786, "user_id": 5022365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec8cb396d26f840b7b772382d8e3ff70?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Patel", "link": "https://stackoverflow.com/users/5022365/sagar-patel"}, "is_accepted": false, "score": -2, "last_activity_date": 1451561236, "creation_date": 1451561236, "answer_id": 34545798, "question_id": 34532660, "link": "https://stackoverflow.com/questions/34532660/method-that-does-the-same-as-mat-convertto-with-iplimage-opencv/34545798#34545798", "title": "Method that does the same as Mat.convertTo with IplImage? OpenCV", "body": "<p>You can simply use </p>\n\n<pre><code>IplImage* img = new IplImage(srcImage);//where srcImage is cv::Mat.\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 2332862, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61a6a9dc9e27bd3c244b604085963bff?s=128&d=identicon&r=PG&f=1", "display_name": "schirrel", "link": "https://stackoverflow.com/users/2332862/schirrel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 242, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1451561236, "creation_date": 1451490577, "last_edit_date": 1592644375, "question_id": 34532660, "link": "https://stackoverflow.com/questions/34532660/method-that-does-the-same-as-mat-convertto-with-iplimage-opencv", "title": "Method that does the same as Mat.convertTo with IplImage? OpenCV", "body": "<p>I'm applying contrast with opencv.\nI follow <a href=\"http://docs.opencv.org/2.4/doc/tutorials/core/basic_linear_transform/basic_linear_transform.html\" rel=\"nofollow noreferrer\">the docs</a> to make contrast transformation with:</p>\n<pre><code>for(int y = 0; y &lt; image.rows; y++) { \n  for(int x = 0; x &lt; image.cols; x++) { \n    for(int c = 0; c &lt; 3; c++) {\n      new_image.at&lt;Vec3b&gt;(y,x)[c] =\n         saturate_cast&lt;uchar&gt;(alpha*(image.at&lt;Vec3b&gt;(y,x)[c]) + beta);\n    }\n  }\n}\n</code></pre>\n<p>But the contrast this method apply was not the one i want.\nSo then i found <a href=\"http://opencv-srf.blogspot.com.br/2011/11/track-bars.html\" rel=\"nofollow noreferrer\">this tutorial</a> which uses:</p>\n<pre><code>Mat dst;\nint iBrightness  = iSliderValue1 - 50;\ndouble dContrast = iSliderValue2 / 50.0;\nsrc.convertTo(dst, -1, dContrast, iBrightness); \n</code></pre>\n<p>but this uses Mat and for m work i'm doind IplImage.\nHow could i made it with IplImage? I tried cvConvert but it seems to not do this.</p>\n"}, {"tags": ["c++", "optimization", "wrapper"], "comments": [{"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 4, "creation_date": 1451490857, "post_id": 34532600, "comment_id": 56806854, "body": "Wrappers are so common any optimizer that failed to optimize away the overhead you are asking about could hardly be called an &quot;optimizer&quot;.  Unless I misunderstood what you are saying with &quot;defined separately&quot;:  If the optimizer can&#39;t see that the definition is a trivial wrapper, it can&#39;t optimize it.  &quot;Explicitly inlined&quot; doesn&#39;t matter.  If the optimizer can see the definition, it can inline the function."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1451491264, "post_id": 34532600, "comment_id": 56807084, "body": "1. Download a modern compiler. 2. See for yourself. 3. There&#39;s no step 3."}], "answers": [{"comments": [{"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1451491441, "post_id": 34532853, "comment_id": 56807175, "body": "I don&#39;t agree with 2. gcc and msvc++ will inline them even if they are exist in a seperate file."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 1, "creation_date": 1451491472, "post_id": 34532853, "comment_id": 56807186, "body": "Only with LTO, which in my experience isn&#39;t used as much as it possibly could."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1451493200, "post_id": 34532853, "comment_id": 56808138, "body": "<code>-funit-at-a-time </code> in gcc, when used with multiple files, allows the optimizer to get information from all the translation units while optimizing. Wouldn&#39;t that allow inline expansion across translation units even without LTO, as long as all units (the one where the function is defined, and all where it&#39;s used) are compiled at the same time? Or am I mistaken?"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1451493597, "post_id": 34532853, "comment_id": 56808372, "body": "Seems like <code>-funit-at-a-time</code> does nothing in modern versions of gcc?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1451493755, "post_id": 34532853, "comment_id": 56808460, "body": "@MatsPetersson ah, apparently the option does nothing now. But perhaps the effects that it had are now always enabled?"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1451494155, "post_id": 34532853, "comment_id": 56808685, "body": "It DID &quot;parse the entire compilation unit&quot; (in other words, one .c or .cpp file) before beginning code-generation. Which may well be enabled by default now. It doesn&#39;t help for inlining if the function is in a separate .c or .cpp file tho&#39;. It MAY help if you declare the function later than the call to it."}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": false, "score": 1, "last_activity_date": 1451491625, "last_edit_date": 1451491625, "creation_date": 1451491266, "answer_id": 34532853, "question_id": 34532600, "link": "https://stackoverflow.com/questions/34532600/c-optimizations-made-on-wrapped-methods-that-are-trivial/34532853#34532853", "title": "C++: Optimizations made on wrapped methods that are trivial", "body": "<p>These functions will get inlined by the compiler as long as some simple rules are followed:</p>\n\n<ol>\n<li>They are not virtual (they aren't in your case, but could be in some other place) - compiler often can't inline virtual functions - because it would render the whole idea of virtual functions useless.</li>\n<li>The actual implementation of the function is available to the compiler during the compilation of the source calling <code>getPos</code>. Again, it would not be possible to compile the example code, but you could declare <code>getPos</code> and <code>setPos</code> as member functions without giving them a body in the class, in which case the compiler won't (necessarily) be able to inline them. [1]</li>\n</ol>\n\n<p>[1] Compilers that support Link Time Optimisation (LTO) or Whole Program Optimisation as some compiler vendors like to call it can inline functions even if the source is not available - this is because final code-generation isn't done until later, so a half-compiled version of the source is stored in the object file. In my experience, LTO is not used for most projects.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 2, "last_activity_date": 1451493347, "last_edit_date": 1451493347, "creation_date": 1451491407, "answer_id": 34532891, "question_id": 34532600, "link": "https://stackoverflow.com/questions/34532600/c-optimizations-made-on-wrapped-methods-that-are-trivial/34532891#34532891", "title": "C++: Optimizations made on wrapped methods that are trivial", "body": "<p>An optimizer <em>can</em> expand the call inline in which case there is no overhead for the extra call.</p>\n\n<p>A wrapper like that <em>can</em> incur overhead if the call is not expanded inline.</p>\n\n<p>Optimizers of modern compilers do inline expansion.</p>\n\n<blockquote>\n  <p>assume they are not explicitly inlined and defined separately</p>\n</blockquote>\n\n<p>There <em>will</em> be (small) overhead unless the optimizer can expand the call inline. You can guarantee the ability to inline by calling the function in the same translation unit where it was defined. Defining the function inline - like you did in your example - enables and enforces this for all translation units because inline functions are defined in all of them. Another way to allow inline expansion across translation units is <a href=\"https://en.wikipedia.org/wiki/Interprocedural_optimization\" rel=\"nofollow\">LTO</a>.</p>\n\n<p>A function is not required to be inline in order for it to be expandable inline and an optimizer is not required to inline-expand all calls to inline functions. A function that is inline will always be expandable inline. A function that is not inline may be expandable in some case, but not always.</p>\n"}], "owner": {"reputation": 10784, "user_id": 620863, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-Mqgo9PO_taA/AAAAAAAAAAI/AAAAAAAAABM/8h3wY8pcFbg/photo.jpg?sz=128", "display_name": "Anne Quinn", "link": "https://stackoverflow.com/users/620863/anne-quinn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 1, "accepted_answer_id": 34532891, "answer_count": 2, "score": 1, "last_activity_date": 1451493347, "creation_date": 1451490283, "question_id": 34532600, "link": "https://stackoverflow.com/questions/34532600/c-optimizations-made-on-wrapped-methods-that-are-trivial", "title": "C++: Optimizations made on wrapped methods that are trivial", "body": "<p>When I write wrapper classes, a lot of the methods take the following form:</p>\n\n<pre><code>class Wrapper{\n    public:\n        vec3 getPos(){          return m_position.get();  }\n        void setPos(vec3 pos){  m_position.set(pos);      }\n    private:\n        ThingGettingWrapped m_position;\n    }\n}\n</code></pre>\n\n<p>I was curious however, will <code>getPos()</code> and <code>setPos()</code> incur overhead, or are modern compilers smart enough to optimize the delegation away so <code>wrapper.set/get()</code> is equivalent to <code>wrapper.m_thingWrapped.set/get()</code>?  </p>\n\n<p>(I know the methods are inlined in my example, but assume they are not explicitly inlined and defined separately)</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 7, "creation_date": 1451490094, "post_id": 34532503, "comment_id": 56806397, "body": "<code>new char[strlen(str)];</code> should be <code>new char[strlen(str)+1];</code> to allow for the null character"}, {"owner": {"reputation": 1691, "user_id": 4355012, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cc9e7a6a654cb5f9d877dae44f90b948?s=128&d=identicon&r=PG&f=1", "display_name": "Kamajii", "link": "https://stackoverflow.com/users/4355012/kamajii"}, "edited": false, "score": 0, "creation_date": 1451490240, "post_id": 34532503, "comment_id": 56806477, "body": "What is your concept of &#39;empty&#39;? All you actually do is replace one single character in the allocated memory by a nil byte. Also mind you&#39;re allocating to little memory as pointed out by Ed Heal."}, {"owner": {"reputation": 1199, "user_id": 3168770, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8lafT.jpg?s=128&g=1", "display_name": "Paulo", "link": "https://stackoverflow.com/users/3168770/paulo"}, "edited": false, "score": 3, "creation_date": 1451490240, "post_id": 34532503, "comment_id": 56806479, "body": "I don&#39;t really agree with people negativating this question. This guy&#39;s trying to understand the concepts and people are not estimulating him to do that. I think the problem are people who asks for homework done."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 1199, "user_id": 3168770, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8lafT.jpg?s=128&g=1", "display_name": "Paulo", "link": "https://stackoverflow.com/users/3168770/paulo"}, "edited": false, "score": 1, "creation_date": 1451490326, "post_id": 34532503, "comment_id": 56806528, "body": "@Paulo I aggree, there are too many people on stack now that downvote for whatever reason and do not even bother to explain why."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1451490364, "post_id": 34532503, "comment_id": 56806555, "body": "The very first <code>strlen</code> call is undefined behaviour. str is not a nul-terminated string."}, {"owner": {"reputation": 1691, "user_id": 4355012, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cc9e7a6a654cb5f9d877dae44f90b948?s=128&d=identicon&r=PG&f=1", "display_name": "Kamajii", "link": "https://stackoverflow.com/users/4355012/kamajii"}, "edited": false, "score": 1, "creation_date": 1451490367, "post_id": 34532503, "comment_id": 56806558, "body": "Surely, but there is plenty of excellent literature on these beginner&#39;s topics. Also, there is so few information given in his question that each and every single answer can only be a guess, imho."}, {"owner": {"reputation": 1199, "user_id": 3168770, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8lafT.jpg?s=128&g=1", "display_name": "Paulo", "link": "https://stackoverflow.com/users/3168770/paulo"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1451490463, "post_id": 34532503, "comment_id": 56806620, "body": "I think we should warn him here at the comments what he should do, instead of down voting him. OR, we could down vote him and explain the reason as @Slava said."}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1451490503, "post_id": 34532503, "comment_id": 56806652, "body": "the string that <code>cstr</code> holds is now 5 chars long, but the memory allocated of <code>cstr</code> isn&#39;t. That block was allocated, and is never freed by you (it will probably be deallocated when your program terminates though). for that, you need to <code>delete</code> the variable"}, {"owner": {"reputation": 1691, "user_id": 4355012, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cc9e7a6a654cb5f9d877dae44f90b948?s=128&d=identicon&r=PG&f=1", "display_name": "Kamajii", "link": "https://stackoverflow.com/users/4355012/kamajii"}, "edited": false, "score": 0, "creation_date": 1451490564, "post_id": 34532503, "comment_id": 56806684, "body": "Not delete[] but delete, that was not allocated using the array allocator. Yes, the memory is released at program termination by standard."}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1451490228, "post_id": 34532536, "comment_id": 56806466, "body": "Looks like he did not think that <code>strlen()</code> releases memory, but <code>cstr[5] = &#39;\\0&#39;;</code>"}, {"owner": {"reputation": 134, "user_id": 4530614, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-SO4XjeaHqCE/AAAAAAAAAAI/AAAAAAAAACQ/HFEYERVln4w/photo.jpg?sz=128", "display_name": "alphaplus", "link": "https://stackoverflow.com/users/4530614/alphaplus"}, "edited": false, "score": 0, "creation_date": 1451584939, "post_id": 34532536, "comment_id": 56842295, "body": "Thanks everybody, I understand memory in C/C++ more. Also thanks John Bode and Pravar Jawalekar for your answer"}], "tags": [], "owner": {"reputation": 555, "user_id": 5071598, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-32mDN1SXPKI/AAAAAAAAAAI/AAAAAAAAAAA/FQIq7RpsTQk/photo.jpg?sz=128", "display_name": "Gary Jackson", "link": "https://stackoverflow.com/users/5071598/gary-jackson"}, "is_accepted": true, "score": 15, "last_activity_date": 1451490088, "creation_date": 1451490088, "answer_id": 34532536, "question_id": 34532503, "link": "https://stackoverflow.com/questions/34532503/does-the-below-code-really-free-memory-in-c-c/34532536#34532536", "title": "Does the below code really free memory in C/C++?", "body": "<p>No. All strlen() does is look for the first null character ('\\0') in the string. It doesn't free memory. It doesn't even care if the memory it examines is properly allocated. It will happily walk past the end of allocated memory in search of a null character if none is found starting from the pointer you give it.</p>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1451493352, "post_id": 34532560, "comment_id": 56808240, "body": "&quot;<i>allocated a char array of length 22 char</i>&quot; - more like 22+*RandomNumber*, since <code>str</code> is not null-terminated, thus <code>strlen(str)</code> is undefined behavior. Also, your answer starts out talking about behavior related to <code>cstr</code> but then ends with talking about behavior related to <code>str</code> instead.  Your answer is misleading as worded.  <code>cstr</code> is indeed leaked, as it is allocated on the heap and not freed before <code>main()</code> exits. Only <code>str</code> is freed when it goes out of scope."}], "tags": [], "owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "is_accepted": false, "score": 2, "last_activity_date": 1451494277, "last_edit_date": 1451494277, "creation_date": 1451490152, "answer_id": 34532560, "question_id": 34532503, "link": "https://stackoverflow.com/questions/34532503/does-the-below-code-really-free-memory-in-c-c/34532560#34532560", "title": "Does the below code really free memory in C/C++?", "body": "<p>No, it does not mean that <em>remain memory area of str is free</em>.</p>\n\n<hr>\n\n<p><code>strlen(cstr)</code> calculates the length of the string upto a point when a <code>NUL</code> <code>\\0</code> character is encountered.</p>\n\n<p>In the beginning you allocated a char array of length <code>22</code> char. Replacing a <code>char</code> in between with a <code>NUL</code> <code>\\0</code> is only going to make <code>strlen</code> believe that the string is upto <code>5</code> char long. It will not free the other <code>17</code> char that were allocated for the local char array after that replaced char.</p>\n\n<p>The memory for <code>char</code> array <code>str</code> will get get unallocated once the function <code>main()</code> exits (since it is a local array).</p>\n"}, {"tags": [], "owner": {"reputation": 545, "user_id": 760365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a609e2719e17ddaf2ae99133b1447b7?s=128&d=identicon&r=PG&f=1", "display_name": "Pravar Jawalekar", "link": "https://stackoverflow.com/users/760365/pravar-jawalekar"}, "is_accepted": false, "score": 5, "last_activity_date": 1451490225, "creation_date": 1451490225, "answer_id": 34532581, "question_id": 34532503, "link": "https://stackoverflow.com/questions/34532503/does-the-below-code-really-free-memory-in-c-c/34532581#34532581", "title": "Does the below code really free memory in C/C++?", "body": "<blockquote>\n  <p>As you see the Len of cstr changed. It mean that remain memory area of\n  cstr is free. Is it right?</p>\n</blockquote>\n\n<p>No. It's not. You allocated memory for array on heap and then inserted <code>\\0</code> at place between array. Because of this, <code>strlen</code> is reporting length of array equals to 5 (because it computes length of char array by looking \\0 character) but memory past that index still exists on heap. To free memory, You need to call <code>delete [] cstr</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 4, "last_activity_date": 1451490313, "creation_date": 1451490313, "answer_id": 34532607, "question_id": 34532503, "link": "https://stackoverflow.com/questions/34532503/does-the-below-code-really-free-memory-in-c-c/34532607#34532607", "title": "Does the below code really free memory in C/C++?", "body": "<p>No. <code>new</code> just allocates a chunk of memory of the size you specified. The only way to release it is to call <code>delete</code> on it.</p>\n\n<p><code>strlen</code> is a function that parses memory from a starting address and counts the number of non NUL bytes, such a thing is called a C-string.</p>\n\n<p>Putting a NUL byte somewhere in memory is no different from putting any other value for the memory management.</p>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 7, "last_activity_date": 1451490486, "creation_date": 1451490486, "answer_id": 34532639, "question_id": 34532503, "link": "https://stackoverflow.com/questions/34532503/does-the-below-code-really-free-memory-in-c-c/34532639#34532639", "title": "Does the below code really free memory in C/C++?", "body": "<p>The code is broken from the starts. <code>str</code> is not a nul-terminated string, and as such can't be used with functions expecting those strings, such as <code>strlen</code> or <code>strcpy</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 4, "last_activity_date": 1451492617, "creation_date": 1451492617, "answer_id": 34533217, "question_id": 34532503, "link": "https://stackoverflow.com/questions/34532503/does-the-below-code-really-free-memory-in-c-c/34533217#34533217", "title": "Does the below code really free memory in C/C++?", "body": "<blockquote>\n  <p>As you see the Len of cstr changed. It mean that remain memory area of cstr is free. Is it right?</p>\n</blockquote>\n\n<p>No.  <code>strlen</code> only returns the length of the string stored within the array, not the size of the array itself.  The length of the string may be anywhere from 0 to <code>strlen(str)</code> - 1, but the size of <code>cstr</code> is always going to be <code>strlen(str)</code>.  </p>\n\n<p>The size of the array does not change just because you stored a smaller string to it, any more than a glass gets smaller if you only fill it half way.  The <em>only</em> way to release the memory pointed to by <code>cstr</code> is to use the <code>delete</code> operator.  </p>\n"}], "owner": {"reputation": 134, "user_id": 4530614, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-SO4XjeaHqCE/AAAAAAAAAAI/AAAAAAAAACQ/HFEYERVln4w/photo.jpg?sz=128", "display_name": "alphaplus", "link": "https://stackoverflow.com/users/4530614/alphaplus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 34532536, "answer_count": 6, "score": 4, "last_activity_date": 1451494277, "creation_date": 1451489964, "last_edit_date": 1451491267, "question_id": 34532503, "link": "https://stackoverflow.com/questions/34532503/does-the-below-code-really-free-memory-in-c-c", "title": "Does the below code really free memory in C/C++?", "body": "<p>Here is the code:</p>\n\n<pre><code>int main()\n{   \n   char str[] = {'a','b','c',' ','d','e',' ',' ','f',' ',' ',' ','g','h','i',' ',' ',' ',' ','j','k'};\n   cout &lt;&lt; \"Len = \" &lt;&lt; strlen(str) &lt;&lt; endl;\n\n   char* cstr = new char[strlen(str)];\n   strcpy(cstr, str); \n\n   cstr[5] = '\\0';\n\n   cout &lt;&lt; \"Len= \" &lt;&lt; strlen(cstr) &lt;&lt; endl;\n\n   return 0;\n}\n\n//---------------\nResult console:\nLen = 21                                                                                                                                                                        \nLen= 5\n</code></pre>\n\n<p>As you see the Len of cstr changed. It mean that remain memory area of cstr is free. Is it right?</p>\n"}, {"tags": ["c++", "inheritance", "c++builder"], "answers": [{"comments": [{"owner": {"reputation": 518, "user_id": 4546246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/749ed907604951e69bf6cd551cc91e0e?s=128&d=identicon&r=PG", "display_name": "Fatih", "link": "https://stackoverflow.com/users/4546246/fatih"}, "edited": false, "score": 1, "creation_date": 1451551609, "post_id": 34543210, "comment_id": 56828859, "body": "It always happens because of semicolon"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1451600552, "post_id": 34543210, "comment_id": 56846664, "body": "Also, the <code>#endif</code> is in the wrong place.  It should be at the end of the file, after the class declaration (otherwise the header guard is meaningless).  Also, the <code>#include &lt;ADODB.hpp&gt;</code> should be inside the <code>#ifndef ... #endif</code> block as well.  Everything in the header should be inside the guard. The whole point of a header guard is so everything is ignored on subsequent includes after the header has already been included one time, otherwise you end up with &quot;multiple declaration&quot; errors and such."}], "tags": [], "owner": {"reputation": 1074, "user_id": 1140967, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/de34a0c7a49dd6750ce8775b59eb5cb9?s=128&d=identicon&r=PG&f=1", "display_name": "\u0130smail Kocacan", "link": "https://stackoverflow.com/users/1140967/%c4%b0smail-kocacan"}, "is_accepted": true, "score": 1, "last_activity_date": 1451549143, "creation_date": 1451549143, "answer_id": 34543210, "question_id": 34532380, "link": "https://stackoverflow.com/questions/34532380/how-to-extend-a-class-from-tadoquery-in-c-builder/34543210#34543210", "title": "How to extend a class from TADOQuery in C++ Builder?", "body": "<p>I've forgot semicolon. </p>\n\n<pre><code>class TExTADOQuery : public TADOQuery\n{\n   typedef TADOQuery inherited;\n  public:\n    __fastcall virtual TExTADOQuery(Classes::TComponent* AOwner);\n    __fastcall virtual ~TExTADOQuery(void);\n};\n</code></pre>\n"}], "owner": {"reputation": 1074, "user_id": 1140967, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/de34a0c7a49dd6750ce8775b59eb5cb9?s=128&d=identicon&r=PG&f=1", "display_name": "\u0130smail Kocacan", "link": "https://stackoverflow.com/users/1140967/%c4%b0smail-kocacan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 0, "accepted_answer_id": 34543210, "answer_count": 1, "score": 2, "last_activity_date": 1451549143, "creation_date": 1451489471, "last_edit_date": 1451515004, "question_id": 34532380, "link": "https://stackoverflow.com/questions/34532380/how-to-extend-a-class-from-tadoquery-in-c-builder", "title": "How to extend a class from TADOQuery in C++ Builder?", "body": "<p>I'm trying to create extended class from TADOQuery below like.</p>\n\n<p>I've added new unit to project.</p>\n\n<p>Unit2.h</p>\n\n<pre><code>#include &lt;ADODB.hpp&gt;\n\n#ifndef Unit2H\n#define Unit2H\n#endif\n\n\nclass TExTADOQuery : public TADOQuery\n{\n   typedef TADOQuery inherited;\n  public:\n    __fastcall virtual TExTADOQuery(Classes::TComponent* AOwner);\n    __fastcall virtual ~TExTADOQuery(void);\n}\n</code></pre>\n\n<p>Unit2.cpp</p>\n\n<pre><code>#pragma hdrstop\n\n#include \"Unit2.h\"\n\n#pragma package(smart_init)\n</code></pre>\n\n<p>when I compiling getting that error message.</p>\n\n<blockquote>\n  <p>[C++ Error] Unit2.cpp(12): E2040 Declaration terminated incorrectly</p>\n</blockquote>\n\n<p>ADODB.hpp</p>\n\n<pre><code>class DELPHICLASS TADOQuery;\nclass PASCALIMPLEMENTATION TADOQuery : public TCustomADODataSet \n{\n    typedef TCustomADODataSet inherited;\n\nprivate:\n    Classes::TStrings* FSQL;\n    int FRowsAffected;\n    Classes::TStrings* __fastcall GetSQL(void);\n    void __fastcall SetSQL(const Classes::TStrings* Value);\n\nprotected:\n    void __fastcall QueryChanged(System::TObject* Sender);\n\npublic:\n    __fastcall virtual TADOQuery(Classes::TComponent* AOwner);\n    __fastcall virtual ~TADOQuery(void);\n    int __fastcall ExecSQL(void);\n    __property int RowsAffected = {read=FRowsAffected, nodefault};\n\n__published:\n    __property CommandTimeout  = {default=30};\n    __property DataSource ;\n    __property EnableBCD  = {default=1};\n    __property ParamCheck  = {default=1};\n    __property Parameters ;\n    __property Prepared  = {default=0};\n    __property Classes::TStrings* SQL = {read=GetSQL, write=SetSQL};\n};\n</code></pre>\n\n<p>I don't undertand that PASCALIMPLEMENTATION.</p>\n\n<p>How can I declare correctly ?</p>\n"}, {"tags": ["c++", "gcc", "attributes", "alias", "abi"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1451489598, "post_id": 34532301, "comment_id": 56806115, "body": "I&#39;d say, do not expect C++ library build on RHEL6 to interoperate with RHEL7. It might (and if memory serves, it does) have different libstdc++. I&#39;d say, use libraries built for specific platform."}, {"owner": {"reputation": 165, "user_id": 854133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/459edb66453c0c9bc454432a8df86a18?s=128&d=identicon&r=PG", "display_name": "Colorado.Rob", "link": "https://stackoverflow.com/users/854133/colorado-rob"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1451490986, "post_id": 34532301, "comment_id": 56806925, "body": "@SergeyA I have been doing C++ development for a long time on RHEL and they do a fantastic job of maintaining backwards compatibility.  In this case, I am using Red Hat&#39;s devtoolset-4 which is compatible across these RHEL releases.  I am building ACE rpms across both versions to deal with this one compatibility issue.  I have a strong understanding on what it takes to maintain C++ ABI compatibility across RHEL releases.  I know how to make it work.  I am looking for advice on better ways to do it.  Note the question -- &quot;Is there a more elegant way to accomplish this?&quot;"}, {"owner": {"reputation": 9718, "user_id": 13136, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c3c9382cd2ccf2796d48d94737bc4c6b?s=128&d=identicon&r=PG", "display_name": "INS", "link": "https://stackoverflow.com/users/13136/ins"}, "edited": false, "score": 0, "creation_date": 1590064890, "post_id": 34532301, "comment_id": 109542431, "body": "I have exactly the same problem between SLES11 and SLES15. I am porting an application to SLES15 and I have seen this error. I believe I will compile the library for SLES15, not using the old one though."}], "owner": {"reputation": 165, "user_id": 854133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/459edb66453c0c9bc454432a8df86a18?s=128&d=identicon&r=PG", "display_name": "Colorado.Rob", "link": "https://stackoverflow.com/users/854133/colorado-rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1519, "favorite_count": 0, "answer_count": 0, "score": 5, "last_activity_date": 1451576761, "creation_date": 1451489158, "last_edit_date": 1451576761, "question_id": 34532301, "link": "https://stackoverflow.com/questions/34532301/gcc-alias-attribute-for-c-member-functions", "title": "GCC alias attribute for C++ member functions", "body": "<p>I am running into a portability issue on Linux due to a type change in a system header.  The siginfo_t type was changed from a named struct (struct siginfo) to an unnamed struct.  For me this changed between RHEL6 and RHEL7.</p>\n\n<p>We use <a href=\"http://www.cs.wustl.edu/~schmidt/ACE.html\" rel=\"nofollow\">ACE</a> in a few places and they have siginfo_t in a few publicly exposed interfaces.  The result is that code compiled on RHEL7 will not link against a library that was built on RHEL6.  For the time being, I need to support this.</p>\n\n<p>In RHEL6, one problem function is typed as:</p>\n\n<pre><code>ACE_Event_Handler::handle_signal(int, siginfo*, ucontext*) \n</code></pre>\n\n<p>In RHEL7, it looks like this:</p>\n\n<pre><code>ACE_Event_Handler::handle_signal(int, siginfo_t*, ucontext*) \n</code></pre>\n\n<p>These get mangled into different symbols resulting in either a failure during linking or a symbol lookup failure at runtime.</p>\n\n<p>A relatively simple solution is to use a function alias.  However, I do not want to modify the header file.  I'm struggling a bit because this is a virtual member function.</p>\n\n<p>I tried doing this in Event_Handler.cpp on a version of ACE built on RHEL7:</p>\n\n<pre><code>struct siginfo;\nACE_Event_Handler::handle_signal(int, siginfo*, ucontext*)\n__attribute__((\n  alias(\"_ZN17ACE_Event_Handler13handle_signalEiP9siginfo_tP8ucontext\")\n));\n</code></pre>\n\n<p>With this, GCC complains that the function was not declared.  I was ultimately able to make this work, but only with this ugly hack:</p>\n\n<pre><code>extern \"C\" int _ZN17ACE_Event_Handler13handle_signalEiP7siginfoP8ucontext()\n__attribute__((\n  alias(\"_ZN17ACE_Event_Handler13handle_signalEiP9siginfo_tP8ucontext\")\n));\n</code></pre>\n\n<p>The 'extern \"C\"' is needed to prevent re-mangling the mangled name.</p>\n\n<p>Is there a more elegant way to accomplish this without running into compiler complaints?</p>\n"}, {"tags": ["c++", "mysql"], "comments": [{"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1451488772, "post_id": 34532145, "comment_id": 56805727, "body": "You don&#39;t with <code>strcpy</code>, it is guaranteed to copy the null-terminator anyway. (assuming the destination is large enough, which you are supposed to guarantee)."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1451488865, "post_id": 34532145, "comment_id": 56805774, "body": "Because your teacher doesn&#39;t know what he or she is doing."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1451489081, "post_id": 34532145, "comment_id": 56805877, "body": "First of all you can bind <code>s.c_str()</code> (assuming <code>s</code> lives long enough) directly, instead of copying into buffer and binding that."}], "answers": [{"tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": false, "score": 2, "last_activity_date": 1451489220, "last_edit_date": 1451489220, "creation_date": 1451488757, "answer_id": 34532182, "question_id": 34532145, "link": "https://stackoverflow.com/questions/34532145/please-explain-me-the-need-for-appending-0-while-converting-string-to-char/34532182#34532182", "title": "Please explain me the need for appending &#39;\\0&#39; while converting string to char", "body": "<p>Your teacher is deluded. </p>\n\n<p><code>c_str()</code> in itself appends a zero [or rather, <code>std::string</code> reserves space for an extra character when creating the string, and makes sure this is zero at least at the point of <code>c_str()</code> returning - in C++11, it is guaranteed that there is an extra character space filled with zero at the end of the string, always]. </p>\n\n<p>You DO need a zero at the end of a string to mark the end of the string in a C-style string, such as those used by <code>strcpy</code>.</p>\n\n<p>[As others have pointed out, you should also check that the string fits before copying, and I would suggest reject if it won't fit, as truncating it will lead to other problems - as well as checking that there isn't any sql-injection attacks and a multitude of other things required for \"good pracice in an SQL environment\"]</p>\n"}, {"comments": [{"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1451489014, "post_id": 34532221, "comment_id": 56805843, "body": "If <code>s.c_str()</code> is longer than <code>c</code>, you are already in a whole heap of trouble. Truncating the string in <code>c</code> doesn&#39;t save you because it&#39;s already too late."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1451489182, "post_id": 34532221, "comment_id": 56805916, "body": "@BoBTFish I agree. I also kind of understand that the teacher is following old habits."}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": -1, "last_activity_date": 1451488907, "creation_date": 1451488907, "answer_id": 34532221, "question_id": 34532145, "link": "https://stackoverflow.com/questions/34532145/please-explain-me-the-need-for-appending-0-while-converting-string-to-char/34532221#34532221", "title": "Please explain me the need for appending &#39;\\0&#39; while converting string to char", "body": "<p>Just guessing, it's a protection against buffer overflow. If <code>c</code> is only <code>N</code> bytes long and <code>s.c_str()</code> returns a pointer to a <code>N+k</code> length string, you'd write <code>k</code> bytes after <code>c</code>, which is bad.</p>\n\n<p>Now let's say (if you didn't SEGFAULT already) you pass this <code>c</code> NUL-terminated string to a C function, you have no guarantee that the <code>\\0</code> you wrote after <code>c</code> is still there. This C function will then read an undefined amount of bytes after <code>c</code>, which is <s>badder</s> worse.</p>\n\n<p>Anyway, use <code>::strncpy()</code>:</p>\n\n<pre><code>char c[64];\n::strncpy(c, s.c_str(), sizeof(c));\nc[sizeof(c)-1] = '\\0';\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1451498521, "post_id": 34532247, "comment_id": 56811043, "body": "<code>strncpy</code> produces more problems than it solves. It&#39;s a very specialized function, and is not a substitute for careful programming and <code>strcpy</code>."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1451498655, "post_id": 34532247, "comment_id": 56811120, "body": "@PeteBecker, I was already ready to upvote the comment (I am well aware of strncpy issues...) but than I have read &#39;careful programming and strcpy&#39; and all upvoting desire vanished. Couldn&#39;t disagree more."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1451588627, "post_id": 34532247, "comment_id": 56843554, "body": "Have you looked at the amount of beginners&#39; code on this site that uses <code>strncpy</code> in ways that will be disastrous? It&#39;s not designed to be a &quot;safe&quot; <code>strcpy</code>."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1451588788, "post_id": 34532247, "comment_id": 56843601, "body": "@PeteBecker, and I never said it was. However, this is the only standartized way to overcome buffer overrun issues associated with strcpy, so absent <code>strlcpy</code> in standard we have to deal with what we have."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1451588934, "post_id": 34532247, "comment_id": 56843647, "body": "Nonsense. &lt;g&gt; The way to overcome buffer overrun issues associated with <code>strcpy</code> is to know how long your source is and how long your target is. Granted, I&#39;m not a big fan of so-called &quot;safe&quot; versions of string functions, but, really, it&#39;s not that hard to make appropriate checks when you create or read a source string and when you create the target buffer. Pushing those sensible checks into an after-the-fact test of whether you did those things right is an admission of failure."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1451589177, "post_id": 34532247, "comment_id": 56843715, "body": "@PeteBecker, I am not sure what is your background, but let me tell you this much - in many places I&#39;ve worked (and you know those companies from the news on their technical leadership) a use of strcpy would automatically cause a review rejection. Plain and simple. And I fully concur."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1451589485, "post_id": 34532247, "comment_id": 56843796, "body": "I&#39;m sure you&#39;re right that companies design review systems to try to compensate for design errors with procrustean rules. &lt;g&gt;"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1451589874, "post_id": 34532247, "comment_id": 56843906, "body": "@PeteBecker, are you one of the original developers of OpenSSL? With such an attitude I won&#39;t be surprised."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1451589919, "post_id": 34532247, "comment_id": 56843916, "body": "In his book &quot;Quality is Free&quot;, Philip Crosby makes an analogy between software development and automobile manufacturing. If cars are coming off the assembly line without their headlights, the manufacturer adds the headlights, <b>and</b> looks at the station where the headlights are supposed to be added and figures out why they&#39;re not getting put on. Software development systems should do the same thing: if the system produces buggy code, figure out why, and fix the underlying problem rather than patching up the errors after they&#39;re made."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1451590045, "post_id": 34532247, "comment_id": 56843953, "body": "Re: OpenSSL. Please don&#39;t stoop to insults when people say things you don&#39;t want to accept."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1451590163, "post_id": 34532247, "comment_id": 56843979, "body": "@PeteBecker, I did not mean to insult. But does it insult you when the real-life cataclisims caused by viewes similar to yours are pointed out?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1451590236, "post_id": 34532247, "comment_id": 56843993, "body": "&quot;I did not mean to insult.&quot; Of course you did. And you&#39;ve mischaracterized what I said to make that fit. This thread is over."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1451590309, "post_id": 34532247, "comment_id": 56844013, "body": "Of course it is. There is nothing else to add here."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1451488968, "creation_date": 1451488968, "answer_id": 34532247, "question_id": 34532145, "link": "https://stackoverflow.com/questions/34532145/please-explain-me-the-need-for-appending-0-while-converting-string-to-char/34532247#34532247", "title": "Please explain me the need for appending &#39;\\0&#39; while converting string to char", "body": "<p>While the teacher is deluded on the appending '\\0' to the string, your code exhibits another very bad bug.</p>\n\n<p>You should <strong>never</strong> use strcpy in such a fashion. You should always use some routine which controls the nubmer of characters copied, like <code>strncpy()</code>, or other alternatives, and provide it with the size of receiving variable. Otherwise you are just asking for troubles.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4324729"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1619041144, "creation_date": 1451488567, "last_edit_date": 1451488820, "question_id": 34532145, "link": "https://stackoverflow.com/questions/34532145/please-explain-me-the-need-for-appending-0-while-converting-string-to-char", "title": "Please explain me the need for appending &#39;\\0&#39; while converting string to char", "body": "<p>While using proc/mysql for c++ I have taken string as user input and converted into char via <code>strcpy(c,s.c_str());</code> function, where <code>c</code> is the binding variable through which I'll add value in the database table and <code>s</code> is the string (user input),  it is working fine but my teacher is asking me append <code>'\\0'</code> at the end - I can't understand the reason why I need to?</p>\n"}, {"tags": ["c++", "multithreading", "visual-studio-2010", "mfc"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1451488220, "post_id": 34532023, "comment_id": 56805430, "body": "What do you mean by the &#39;same&#39; thread? What is distinct property of the thread in question?"}, {"owner": {"reputation": 149, "user_id": 2528884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e97151b54905a16de821b750036da9f?s=128&d=identicon&r=PG", "display_name": "taha", "link": "https://stackoverflow.com/users/2528884/taha"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1451488308, "post_id": 34532023, "comment_id": 56805481, "body": "Sorry, I mean the same thread id not the same thread."}, {"owner": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "edited": false, "score": 0, "creation_date": 1451488363, "post_id": 34532023, "comment_id": 56805506, "body": "try finding thread <code>pid</code>. it may help to find thread origin."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1451488368, "post_id": 34532023, "comment_id": 56805509, "body": "@taha, sorry, I do not get it. There is only one thread with a given thread id, it can&#39;t be &#39;spawned too many times&#39;."}, {"owner": {"reputation": 149, "user_id": 2528884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e97151b54905a16de821b750036da9f?s=128&d=identicon&r=PG", "display_name": "taha", "link": "https://stackoverflow.com/users/2528884/taha"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1451488519, "post_id": 34532023, "comment_id": 56805599, "body": "@SergeyA, Yes, there is only one thread actually. But there are many thread calls which is not respectively and I can not track the threads. I only need to find which code line created the current thread function."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1451488895, "post_id": 34532023, "comment_id": 56805789, "body": "Maybe something like this: <a href=\"http://stackoverflow.com/questions/617554/override-a-function-call-in-c\">Override a function call in C</a>."}, {"owner": {"reputation": 149, "user_id": 2528884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e97151b54905a16de821b750036da9f?s=128&d=identicon&r=PG", "display_name": "taha", "link": "https://stackoverflow.com/users/2528884/taha"}, "edited": false, "score": 0, "creation_date": 1451488930, "post_id": 34532023, "comment_id": 56805802, "body": "Edit: There many code lines which creates this thread and these code lines are called many times in the run time."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "edited": false, "score": 0, "creation_date": 1451490357, "post_id": 34532023, "comment_id": 56806550, "body": "@rkm_Hodor_king: The OP is well aware of the <b>process</b> that spawns this particular thread, just not the specific location in code that does. taha: If you can change the code that creates threads you could assign a name to the thread, containing <code>__FILE__</code> and <code>__LINE__</code> (see <a href=\"https://msdn.microsoft.com/en-us/library/xcb2z8hs.aspx\" rel=\"nofollow noreferrer\">How to: Set a Thread Name in Native Code</a> for details). The thread name is displayed in Visual Studio&#39;s <i>Threads</i> window."}], "answers": [{"tags": [], "owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "is_accepted": false, "score": 0, "last_activity_date": 1451489045, "creation_date": 1451489045, "answer_id": 34532273, "question_id": 34532023, "link": "https://stackoverflow.com/questions/34532023/c-how-can-i-find-out-where-the-current-thread-was-created/34532273#34532273", "title": "C++ - How can I find out where the current thread was created?", "body": "<p>If you are allowed to change the code a bit, you could replace the thread-launching calls by a macro that would also log the <code>__FILE__</code>, <code>__LINE__</code> and thread id, so that you can track the launches.</p>\n"}, {"tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": false, "score": 1, "last_activity_date": 1451495087, "creation_date": 1451495087, "answer_id": 34533850, "question_id": 34532023, "link": "https://stackoverflow.com/questions/34532023/c-how-can-i-find-out-where-the-current-thread-was-created/34533850#34533850", "title": "C++ - How can I find out where the current thread was created?", "body": "<p>If its possible then make a macro definition for a function which is used for creating threads, then once it is created store thread id/handle in some map which will contain pairs of type: [ThreadID] -> [<code>__FILE__+__LINE__</code>] . This will allow you to check inside your thread where it was created.</p>\n\n<p>a more advanced aproach is to use api hooks, but thats a lot of coding. So you can make use of api hooking with <a href=\"http://codefromthe70s.org/mhook22.aspx\" rel=\"nofollow\">http://codefromthe70s.org/mhook22.aspx</a> and hook CreateThread. When your custom CreateThread function gets executed then you can execute original CreateThread and using its returned handle update a map as in first paragraph. The problem is that you will have to store callstack data to find where this call was executed. You could use <a href=\"http://www.codeproject.com/Articles/11132/Walking-the-callstack\" rel=\"nofollow\">http://www.codeproject.com/Articles/11132/Walking-the-callstack</a> for that. </p>\n\n<p>Even with first solution, you might find that <code>__FILE__+__LINE__</code> does not give you enough information, and a callstack is a must.</p>\n\n<hr>\n\n<p>I made a small test app with mhook - below is some code that might be useful:</p>\n\n<pre><code>typedef HANDLE(WINAPI *CreateThread_t)(LPSECURITY_ATTRIBUTES, SIZE_T, LPTHREAD_START_ROUTINE, LPVOID, DWORD, LPDWORD);\nCreateThread_t fCreateThread = (CreateThread_t)GetProcAddress(LoadLibrary(L\"Kernel32.dll\"), \"CreateThread\");\n\nHANDLE\nWINAPI\nMyCreateThread(\n  _In_opt_ LPSECURITY_ATTRIBUTES lpThreadAttributes,\n  _In_ SIZE_T dwStackSize,\n  _In_ LPTHREAD_START_ROUTINE lpStartAddress,\n  _In_opt_ __drv_aliasesMem LPVOID lpParameter,\n  _In_ DWORD dwCreationFlags,\n  _Out_opt_ LPDWORD lpThreadId\n  )\n{\n  HANDLE hret = fCreateThread(lpThreadAttributes, dwStackSize, lpStartAddress, lpParameter, dwCreationFlags, lpThreadId);\n  // Here you can add thread entry for hret with current callstack.\n  // You will probably want to create this thread suspended, to make\n  // sure it wont get executed before map gets updated. Resume it after\n  // map update.\n  //if (lpStartAddress == MyThreadProcToMonitor) {\n    // log things\n  //}\n  return hret;\n}\n\nint main() {\n// This will hook create thread\n  Mhook_SetHook((PVOID*)&amp;fCreateThread, MyCreateThread);\n\n  // App logic here\n\n  Mhook_Unhook((PVOID*)&amp;fCreateThread);\n}\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 2528884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e97151b54905a16de821b750036da9f?s=128&d=identicon&r=PG", "display_name": "taha", "link": "https://stackoverflow.com/users/2528884/taha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1019, "favorite_count": 3, "answer_count": 2, "score": 2, "last_activity_date": 1451495087, "creation_date": 1451488106, "question_id": 34532023, "link": "https://stackoverflow.com/questions/34532023/c-how-can-i-find-out-where-the-current-thread-was-created", "title": "C++ - How can I find out where the current thread was created?", "body": "<p>I'm working on a huge C++ MFC GUI app using Visual Studio 2010 that's got tons of code the I'm unfamiliar with.</p>\n\n<p>There's a thread that's being spawned way too many times, and I'm not sure where it's being spawned as there's lots of code that spawns this thread. Also, there are many creating points in the code for the same thread. I need to find which creating point started the current thread function.</p>\n\n<p>How can I find where the thread was created in Visual Studio?</p>\n\n<p>Note: I couldn't see where the thread was created in call stack window.</p>\n"}, {"tags": ["c#", "c++", "c", "compact-framework", "pinvoke"], "comments": [{"owner": {"reputation": 64987, "user_id": 13154, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/13587943fa82922af31198ddd875d77f?s=128&d=identicon&r=PG", "display_name": "ctacke", "link": "https://stackoverflow.com/users/13154/ctacke"}, "edited": false, "score": 0, "creation_date": 1451495297, "post_id": 34531974, "comment_id": 56809319, "body": "How is the C++ binary loading the C# assembly?  Is this from a callback and the process itself is managed code?"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1451501512, "post_id": 34531974, "comment_id": 56812430, "body": "I&#39;d use a COM BSTR. That said, allocating on the C++ side is a good option. You should not be saying that&#39;s no good without a deeper understanding of this topic."}, {"owner": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "edited": false, "score": 0, "creation_date": 1451550711, "post_id": 34531974, "comment_id": 56828578, "body": "@ctake Actually it&#39;s a Windows Forms application. The C# handles the GUI, but all the rest of the work is done by the native code."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1451679790, "post_id": 34531974, "comment_id": 56862886, "body": "You still have not explained the mechanism by which your C++ code is called, and the mechanism by which the C# code is called from your C++ code. These are crucial details in an interop question."}], "answers": [{"tags": [], "owner": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "is_accepted": true, "score": -1, "last_activity_date": 1451561466, "creation_date": 1451561466, "answer_id": 34545850, "question_id": 34531974, "link": "https://stackoverflow.com/questions/34531974/call-c-from-native-to-retrieve-a-string/34545850#34545850", "title": "Call C# from native to retrieve a String", "body": "<p>Actually it seems that no C# function can return something when called from C++.\n<strong>Any return type oher than void</strong> will cause a NotSupportedException to be thrown.</p>\n\n<p>I did not find evidence of this in the MSDN documentation, but after lots of testing it seems that it's how it works, at least with the <strong>compact framework</strong>.</p>\n"}, {"tags": [], "owner": {"reputation": 5853, "user_id": 1479943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d518018828cbe7c98d450f69faac65b6?s=128&d=identicon&r=PG", "display_name": "josef", "link": "https://stackoverflow.com/users/1479943/josef"}, "is_accepted": false, "score": 0, "last_activity_date": 1451630957, "last_edit_date": 1495539961, "creation_date": 1451630957, "answer_id": 34554166, "question_id": 34531974, "link": "https://stackoverflow.com/questions/34531974/call-c-from-native-to-retrieve-a-string/34554166#34554166", "title": "Call C# from native to retrieve a String", "body": "<p>The question was asked already at stackoverflow and other sides. </p>\n\n<p>One stackoverflow post is at <a href=\"https://stackoverflow.com/questions/9552498/calling-a-c-sharp-function-from-a-c-dll\">Calling a C# function from a C++ DLL</a>. </p>\n\n<p>The linked solutions use CallingConvention.StdCall which is available in CF but you can use CallingConvention.WinApi instead which translates to CallingConvention.StdCall according to this site \n<a href=\"https://msdn.microsoft.com/en-us/library/system.runtime.interopservices.callingconvention%28v=vs.90%29.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/system.runtime.interopservices.callingconvention%28v=vs.90%29.aspx</a></p>\n\n<p>You can also use other interop techniques like custom messages (SendMessage) between the windows and forms handles.</p>\n\n<p>To expose managed components to C++ use COM (see <a href=\"https://msdn.microsoft.com/en-us/library/zsfww439%28v=vs.80%29.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/zsfww439%28v=vs.80%29.aspx</a>)</p>\n"}], "owner": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "accepted_answer_id": 34545850, "answer_count": 2, "score": 0, "last_activity_date": 1482631219, "creation_date": 1451487933, "last_edit_date": 1482631219, "question_id": 34531974, "link": "https://stackoverflow.com/questions/34531974/call-c-from-native-to-retrieve-a-string", "title": "Call C# from native to retrieve a String", "body": "<p>I've been stuck on this all day, but it seems like it is not possible, at least using the <strong>compact framework</strong>, to call from the native code a C# method that <strong>returns</strong> a String.</p>\n\n<p>I've seen several exemples about passing data from and to native code, but none of the examples were using return values.</p>\n\n<p>What I would like to do is have a C# function that <strong>returns a string</strong>, so that i can pull that from C# back into C++, i.e call C# from C++ and not the other way.</p>\n\n<pre><code>String GetSomeString() { return \"foo\"; } // C#\n</code></pre>\n\n<p>And call this function from native code which would have a signature like :</p>\n\n<pre><code>typedef const wchar_t * (__stdcall * native_func_t)();\n</code></pre>\n\n<p>The problem with this is that it just doesn't work. A NotSupportedException is thrown when I pass my delegate to the native code. However if I replace the String return type by void it works perfectly.</p>\n\n<p>The other solutions would be :</p>\n\n<ul>\n<li><p>Call C# from C++ to get the string length, allocate that string on C++, pass it to the C# and make it fill the buffer using unsafe code. But this is dirty and unpractical, so I won't do that.</p></li>\n<li><p>Make the C# function call a C++ that will store the result somewhere, and, in the native code, retrieve that result where it was stored once the call to the C# has returned. But this is also very ugly and unpractical.</p></li>\n</ul>\n\n<p>Do you see another way to do that please ?</p>\n"}, {"tags": ["c++", "winforms", "showdialog"], "comments": [{"owner": {"reputation": 1436, "user_id": 2316913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/437000ec8b08ec25f03352ecdebfb724?s=128&d=identicon&r=PG", "display_name": "Leandro", "link": "https://stackoverflow.com/users/2316913/leandro"}, "edited": false, "score": 0, "creation_date": 1451487320, "post_id": 34531676, "comment_id": 56804961, "body": "Are you properly setting the <a href=\"https://msdn.microsoft.com/en-us/library/system.windows.forms.form.owner.aspx\" rel=\"nofollow noreferrer\">Owner</a> property for the dialogs being shown? This property should be set to reference the parent window for every dialog."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1451493496, "post_id": 34531676, "comment_id": 56808316, "body": "Works just fine when I try it, never heard this complaint before.  Repro code is required."}, {"owner": {"reputation": 29, "user_id": 5731062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dde9d449a63cc8c84c98b7466a543dd1?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/5731062/ben"}, "edited": false, "score": 0, "creation_date": 1451579154, "post_id": 34531676, "comment_id": 56840084, "body": "Some more information:  * this only happens when our main window is maximized * I cannot reproduce this in a sample application (using C++/CLI or C#). * Can&#39;t post our real application of course."}], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 5731062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dde9d449a63cc8c84c98b7466a543dd1?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/5731062/ben"}, "is_accepted": false, "score": 0, "last_activity_date": 1452824643, "creation_date": 1452824643, "answer_id": 34803398, "question_id": 34531676, "link": "https://stackoverflow.com/questions/34531676/windows-forms-showdialog-with-a-parent-why-doesnt-clicking-on-the-parent-ac/34803398#34803398", "title": "Windows Forms - ShowDialog with a parent - why doesn&#39;t clicking on the parent activate the dialog when main window is maximized", "body": "<p>It turns out that is caused by our use of the Syncfusion UI libraries. They will be fixing the bug.</p>\n"}], "owner": {"reputation": 29, "user_id": 5731062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dde9d449a63cc8c84c98b7466a543dd1?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/5731062/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 202, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452824643, "creation_date": 1451486739, "last_edit_date": 1451579336, "question_id": 34531676, "link": "https://stackoverflow.com/questions/34531676/windows-forms-showdialog-with-a-parent-why-doesnt-clicking-on-the-parent-ac", "title": "Windows Forms - ShowDialog with a parent - why doesn&#39;t clicking on the parent activate the dialog when main window is maximized", "body": "<p>I'm seeing non-standard behavior (as compared to tools like Word and Visual Studio 2013) in my C++ Windows Forms application.  We use Application::Run and then ShowDialog to show various modal dialogs.  When one of the modal dialogs is up and I place another application window partially in front of the modal dialog, I can click on part of the modal dialog and it brings it back into the foreground as I expect.</p>\n\n<p>However, if I instead click on part of the main window (shown with Application::Run) the modal dialog isn't brought to the foreground.  This makes it hard to bring my application back so I can work on it.  Ideas? </p>\n\n<p>A simple MFC app created in VS2013 works as it should too.  You can witness this with the About box which is shown with DoModal.  I would have expected ShowDialog and DoModal to be equivalents.  A simple C++/CLI or C# winforms application acts fine.</p>\n\n<p>And this only happens in out application when our main window is maximized.</p>\n"}, {"tags": ["c++", "class", "matrix", "polymorphism", "virtual"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4957171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/083e2c7113292f2809efee073a98e11f?s=128&d=identicon&r=PG&f=1", "display_name": "USER95D", "link": "https://stackoverflow.com/users/4957171/user95d"}, "edited": false, "score": 0, "creation_date": 1451487538, "post_id": 34531732, "comment_id": 56805098, "body": "sorry you right , i meant i did an array of pointers - Piece** _board..i still have problems the compiler gives me an error"}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 33, "user_id": 4957171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/083e2c7113292f2809efee073a98e11f?s=128&d=identicon&r=PG&f=1", "display_name": "USER95D", "link": "https://stackoverflow.com/users/4957171/user95d"}, "edited": false, "score": 0, "creation_date": 1451488439, "post_id": 34531732, "comment_id": 56805549, "body": "If it can help <b><a href=\"http://ideone.com/Utu5eR\" rel=\"nofollow noreferrer\">here your update compilable code snippet</a></b>  with Pointer*** and some minimal adjustments to make it work"}, {"owner": {"reputation": 2352, "user_id": 5711725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cfaab398800db4fd0e9b0aae6621bda?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Mart&#237;n", "link": "https://stackoverflow.com/users/5711725/javier-mart%c3%adn"}, "edited": false, "score": 1, "creation_date": 1451489943, "post_id": 34531732, "comment_id": 56806296, "body": "OP, as ugly as the declaration of a vector of vector of smart pointers looks like, try to go down that route (even though I&#39;d suggest <code>unique_ptr</code> first). The very presence of <code>T***</code> in a piece of code I&#39;m reading raises goosebumps... You really don&#39;t want to be known as &quot;the three star programmer&quot; by future maintainers of your code."}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 2, "last_activity_date": 1451487331, "last_edit_date": 1451487331, "creation_date": 1451486956, "answer_id": 34531732, "question_id": 34531624, "link": "https://stackoverflow.com/questions/34531624/how-can-i-create-with-polymorphy-2d-array-of-abstract-class/34531732#34531732", "title": "how can I create with Polymorphy 2D-Array of abstract class?", "body": "<p>You can't use polymorphism for arrays. </p>\n\n<p>An array contains contiguous elements of the same size.  But polymorphic elements could be of different size, so that the compiler would not be able to generate code to properly indexing the elements.  </p>\n\n<p>You can eventually consider an array of pointers to polymorphic elements: </p>\n\n<pre><code>Piece*** _board;  // store pointers to polyorphic elements \n</code></pre>\n\n<p>But it would be more practical and safer to use vectors:  </p>\n\n<pre><code>vector&lt;vector&lt;Piece*&gt;&gt; _board;  // Vector of vector of poitners to polymorphic elements\n</code></pre>\n\n<p>You could also consider even safer smart pointers:  </p>\n\n<pre><code>vector&lt;vector&lt;shared_ptr&lt;Piece&gt;&gt;&gt; _board;    // assuming that several boards or cells could share the same Piece.  \n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4957171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/083e2c7113292f2809efee073a98e11f?s=128&d=identicon&r=PG&f=1", "display_name": "USER95D", "link": "https://stackoverflow.com/users/4957171/user95d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "accepted_answer_id": 34531732, "answer_count": 1, "score": 0, "last_activity_date": 1451487637, "creation_date": 1451486547, "last_edit_date": 1451487637, "question_id": 34531624, "link": "https://stackoverflow.com/questions/34531624/how-can-i-create-with-polymorphy-2d-array-of-abstract-class", "title": "how can I create with Polymorphy 2D-Array of abstract class?", "body": "<p>I want to have a 2D array of pointers that contains abstract classes called Piece. So I made a pointer to a 2D array of Piece in a class called Board that have private field of board -Piece** _board. </p>\n\n<p>I tried to use vector or wrap the board field with class but apperently something went wrong..</p>\n\n<pre><code>class Piece\n{\npublic:\nPiece(bool, string);\nPiece(){};\nbool isChass(bool, Board*);\nvirtual int move(int x_src, int y_src, int x_dst, int y_dst, Board*   board)=0;\nvirtual ~Piece();\nbool get_isWhite();\nstring get_type();\nPiece(Piece &amp; other);\nPiece&amp; operator= (const Piece &amp; other);\nbool inRange(int, int);\n\nprotected:\nbool _isWhite;\nstring _type;\n};\n\n\nclass Board\n{\npublic:\nBoard();\nBoard(const Board&amp; other);\n~Board();\nBoard&amp; operator=(const Board &amp;other);\nPiece&amp; getPiece(int i, int j){ return _board[i][j]; }\nvoid game();\nvoid deletePiece(int x, int y) { delete &amp;_board[x][y]; }\nvoid allocateBlankPiece(int x, int y) { _board[x][y] = *new Blank(); }\n\nprivate:\nPiece** _board;\nbool _isWhiteTurn;\n\n\nfriend class Piece;\nfriend class Rock;\nfriend class Bishop;\nfriend class Queen;\nfriend class Knight;\nfriend class King;\nfriend class Pawn;\n};\n</code></pre>\n"}, {"tags": ["c++", "heap-memory"], "comments": [{"owner": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "edited": false, "score": 0, "creation_date": 1451486863, "post_id": 34531620, "comment_id": 56804736, "body": "Which compiler and platform are you on? Also, I think you mean 16 bytes, not bits..."}, {"owner": {"reputation": 56338, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1451486941, "post_id": 34531620, "comment_id": 56804771, "body": "You are concerned about an implementation detail. It may change anytime. In particular, there could be several reasons for the extra space: memory alignment, internal bookkeeping of the code that manages the heap etc."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 3, "creation_date": 1451486975, "post_id": 34531620, "comment_id": 56804784, "body": "Why should the <code>X</code>&#39;s be allocated in a contiguous manner? You&#39;re creating them on the heap with <code>new</code>, their address could be anything."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1451487005, "post_id": 34531620, "comment_id": 56804801, "body": "C or C++?  You&#39;ve tagged your question with C, but you&#39;ve written C++ code."}, {"owner": {"reputation": 1368, "user_id": 3878405, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd7fbf1b3f55fad1bb62300c97593fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Poriferous", "link": "https://stackoverflow.com/users/3878405/poriferous"}, "edited": false, "score": 0, "creation_date": 1451487074, "post_id": 34531620, "comment_id": 56804838, "body": "My guess is that your struct technically is 32 bytes because you have a recursive pointer which points to a 16-byte integer. You also dereference that second integer which could be the reason that the objects are created 32 bits apart. Have you tried creating the object without the pointer? Comment it out and code pertaining to it and see what the result is!"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1451487098, "post_id": 34531620, "comment_id": 56804851, "body": "@AndrewHenle, that&#39;s my bad. I failed to see cout and new in the end, and just seen the list implementation in C, so I edited the tags. I take full responsibility for this."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1368, "user_id": 3878405, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd7fbf1b3f55fad1bb62300c97593fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Poriferous", "link": "https://stackoverflow.com/users/3878405/poriferous"}, "edited": false, "score": 4, "creation_date": 1451487133, "post_id": 34531620, "comment_id": 56804867, "body": "@Poriferous, what a nonsese..."}], "answers": [{"comments": [{"owner": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "edited": false, "score": 0, "creation_date": 1451487868, "post_id": 34531811, "comment_id": 56805262, "body": "So are we seeing 32-byte boundaries in the question?  Or is it 16 byte boundaries with some record keeping in the memory manager?"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "edited": false, "score": 1, "creation_date": 1451488159, "post_id": 34531811, "comment_id": 56805399, "body": "@ebyrob The OP hasn&#39;t specified the platform in question, so any answer would just be a guess.  But I&#39;d guess it&#39;s 16-byte boundaries with 16-byte overhead, or perhaps 8-byte boundaries that show up at 16-byte boundaries because of 16 bytes of overhead."}], "tags": [], "owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 7, "last_activity_date": 1451487348, "creation_date": 1451487348, "answer_id": 34531811, "question_id": 34531620, "link": "https://stackoverflow.com/questions/34531620/why-are-dynamically-created-objects-twice-as-many-bits-apart-as-the-objects-siz/34531811#34531811", "title": "Why are dynamically created objects twice as many bits apart as the object&#39;s size?", "body": "<p>The reason is stated in <strong>7.22.3 Memory management functions</strong> of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\">C Standard</a>:</p>\n\n<blockquote>\n  <p>The order and contiguity of storage allocated by successive calls to\n  the <code>aligned_alloc</code>, <code>calloc</code>, <code>malloc</code>,  and <code>realloc</code> functions is\n  unspecified.   The pointer returned if the allocation succeeds is\n  suitably aligned so that it may be assigned to a pointer to any type\n  of object with a fundamental alignment requirement and then used to\n  access such an object or an array of such objects in the space\n  allocated</p>\n</blockquote>\n\n<p>Since the memory must be \"suitably aligned so that it may be assigned to a pointer to any type of object with a fundamental alignment requirement\", memory returned by <code>malloc</code> <em>et al</em> tends to start on distinct, platform-dependent multiples - usually 8- or 16-byte boundaries.</p>\n\n<p>And because <code>new</code> is usually implemented with <code>malloc</code>, this applies to C++ <code>new</code> also.</p>\n"}, {"tags": [], "owner": {"reputation": 7695, "user_id": 1881196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474cd12efa0089277b12d6e6dc43eea?s=128&d=identicon&r=PG", "display_name": "dlask", "link": "https://stackoverflow.com/users/1881196/dlask"}, "is_accepted": false, "score": 3, "last_activity_date": 1451487356, "creation_date": 1451487356, "answer_id": 34531813, "question_id": 34531620, "link": "https://stackoverflow.com/questions/34531620/why-are-dynamically-created-objects-twice-as-many-bits-apart-as-the-objects-siz/34531813#34531813", "title": "Why are dynamically created objects twice as many bits apart as the object&#39;s size?", "body": "<p>Addresses of allocated memory blocks are controlled by the heap manager. Only the heap manager's interface is defined (<code>new</code>/<code>delete</code>, <code>malloc</code>/<code>free</code>), not its implementation. The application has to accept the provided addresses and work with them.</p>\n\n<p>In other words, it is theoretically possible to implement a heap manager that allocates memory blocks at random-like addresses. The application, however, has to work equally well also in this case.</p>\n"}, {"comments": [{"owner": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "edited": false, "score": 0, "creation_date": 1451487562, "post_id": 34531837, "comment_id": 56805107, "body": "So are you saying a 32-byte alignment is common on 64-bit CPU?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "edited": false, "score": 0, "creation_date": 1451487652, "post_id": 34531837, "comment_id": 56805147, "body": "No i&#39;m not. The way <code>new</code> allocates memory is completely unspecified. I&#39;m just showing a more <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> example. I was about to quote the standard but Andrew Henle was faster and earned my upvote."}, {"owner": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "edited": false, "score": 0, "creation_date": 1451487768, "post_id": 34531837, "comment_id": 56805202, "body": "The example seems to counter what you&#39;re saying.  It does indeed allocate memory consistently and predictably.  (for this simple test)"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "edited": false, "score": 1, "creation_date": 1451487817, "post_id": 34531837, "comment_id": 56805229, "body": "@ebyrob but not contiguously. <code>sizeof(int)</code> is not <code>0x20</code>."}, {"owner": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "edited": false, "score": 0, "creation_date": 1451488192, "post_id": 34531837, "comment_id": 56805413, "body": "0x20 is 32 bytes.  If that&#39;s the alignment then the heap may never be able to use the pointers in-between these values.  In which case they are contiguous.  Just larger than requested."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "edited": false, "score": 0, "creation_date": 1451488397, "post_id": 34531837, "comment_id": 56805526, "body": "@ebyrob Contiguous generally means that you can play with pointer arithmetic. Imagine <code>int* a = new int(); int* b = new int();</code>. If <code>new</code> allocated memory like <code>new[]</code> does, <code>a + 1 == b</code> would be true. This is not the case here. The memory is <b>not</b> allocated contiguously."}, {"owner": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1451488941, "post_id": 34531837, "comment_id": 56805808, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/99316/discussion-between-ebyrob-and-ysc\">continue this discussion in chat</a>."}, {"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "reply_to_user": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "edited": false, "score": 1, "creation_date": 1451489326, "post_id": 34531837, "comment_id": 56805990, "body": "@ebyrob I think you&#39;ll find that program demonstrated a 32-byte minimum allocation (including overhead) <b>NOT</b> 32-byte alignment.  Try declaring <code>struct foo { int b[10]; };</code> and then using <code>new foo</code> instead.  I expect you&#39;ll see 48 byte total (40 byte content, 8 byte overhead, 16 byte alignment)."}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 2, "last_activity_date": 1451487429, "creation_date": 1451487429, "answer_id": 34531837, "question_id": 34531620, "link": "https://stackoverflow.com/questions/34531620/why-are-dynamically-created-objects-twice-as-many-bits-apart-as-the-objects-siz/34531837#34531837", "title": "Why are dynamically created objects twice as many bits apart as the object&#39;s size?", "body": "<p>The <a href=\"http://en.cppreference.com/w/cpp/memory/new/operator_new\" rel=\"nofollow\"><code>new</code> operator</a> does not guarantee contiguous allocation. Here is a more convincing example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    for (int i = 0 ; i &lt; 32 ; ++i)\n        std::cout &lt;&lt; std::hex &lt;&lt; new int() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Output on a 64bit CPU:</p>\n\n<pre><code>0x22cac20\n0x22cac40\n0x22cac60\n0x22cac80\n...\n0x22cafe0\n0x22cb000\n</code></pre>\n\n<p><kbd><a href=\"http://coliru.stacked-crooked.com/a/6fe96d5c1f6383ca\" rel=\"nofollow\">Demo</a></kbd></p>\n"}, {"tags": [], "owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "is_accepted": false, "score": 1, "last_activity_date": 1451490019, "last_edit_date": 1451490019, "creation_date": 1451488488, "answer_id": 34532119, "question_id": 34531620, "link": "https://stackoverflow.com/questions/34531620/why-are-dynamically-created-objects-twice-as-many-bits-apart-as-the-objects-siz/34532119#34532119", "title": "Why are dynamically created objects twice as many bits apart as the object&#39;s size?", "body": "<p>You are working in an environment with 8 bytes of allocation overhead and minimum dynamic memory alignment of 16 bytes.  So each 16 byte allocation has 8 bytes of allocation overhead and 8 bytes of alignment padding.  </p>\n\n<p>If you try again with a 24 byte object (making sure <code>sizeof</code> really is 24 not 32) you will find only 8 bytes of overhead and not an additional 8 bytes of alignment padding.  </p>\n\n<p>There is a minimum size (including overhead) of 32 bytes.  So if you try with a tiny object, you get a total of 32, not 16.  If you try with a 40 byte object, you get a total of 48 demonstrating the lack of 32 byte alignment.  </p>\n\n<p>That is all specific to the environment in which you are running.  The C++ standard allows for a much wider range of possible behavior.</p>\n\n<p>The 8 bytes immediately preceding the 16-byte aligned chunk returned by the allocator must hold the size of the allocation plus at least one status bit indicating whether the <strong>previous</strong> chunk is free.  That is the minimum overhead a 64-bit allocator needs and while the chunk is in use it is all the overhead needed.  But once a chunk is free, there is significant overhead at the beginning of the chunk to support consolidating adjacent free chunks and to support quickly finding a good size free chunk for new allocations.  That overhead wouldn't fit if the total were just 16 bytes.</p>\n"}], "owner": {"reputation": 47, "user_id": 5731015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3a49481e5111f1214ba9ff2bc299165?s=128&d=identicon&r=PG&f=1", "display_name": "user5731015", "link": "https://stackoverflow.com/users/5731015/user5731015"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 4, "score": 3, "last_activity_date": 1451490019, "creation_date": 1451486530, "last_edit_date": 1451487032, "question_id": 34531620, "link": "https://stackoverflow.com/questions/34531620/why-are-dynamically-created-objects-twice-as-many-bits-apart-as-the-objects-siz", "title": "Why are dynamically created objects twice as many bits apart as the object&#39;s size?", "body": "<p>I have code written to create a linked list of dynamically created objects:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nstruct X {\n  int i;\n  X* x;\n};\n\nvoid birth(X* head, int quant){\n  X* x = head;\n  for(int i=0;i&lt;quant-1;i++){\n    x-&gt;i = i+1;\n    x-&gt;x = new X;\n    x = x-&gt;x;\n  }\n  x-&gt;i = quant;\n  x-&gt;x = 0;\n}\n\nvoid kill(X* x){\n  X* next;\n  while(1==1){\n    cout &lt;&lt; x-&gt;i &lt;&lt; endl;\n    cout &lt;&lt; (long)x &lt;&lt; endl;\n    next = x-&gt;x;\n    delete x;\n    if(next == 0){\n      break;\n    } else {\n      x = next;\n    }\n  }\n}\n\nint main(){\n  cout &lt;&lt; (long)sizeof(X) &lt;&lt; endl;\n  X* x = new X;\n  birth(x, 10);\n  kill(x);\n  return 0;\n}\n</code></pre>\n\n<p>Which seems to be working, except for the fact that when you look at the addresses of each of the objects...</p>\n\n<pre><code>16\n1\n38768656\n2\n38768688\n3\n38768720\n4\n38768752\n5\n38768784\n6\n38768816\n7\n38768848\n8\n38768880\n9\n38768912\n10\n38768944\n</code></pre>\n\n<p>They seem to be created 32 bits apart despite the size of X being only 16 bits. Is there an issue with how I am creating the objects, or is this just a consequence of how dynamic allocation works?</p>\n"}, {"tags": ["c++", "visual-studio-2010", "file", "getline"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1451486970, "post_id": 34531594, "comment_id": 56804781, "body": "your calls to <code>std::ifsteam::open()</code> is completely redundant and unnesessary"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1451487180, "post_id": 34531594, "comment_id": 56804886, "body": "&quot;it returns the file stream &#39;00000000&#39;&quot; what does it mean? What actually did you print?"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1451487642, "post_id": 34531594, "comment_id": 56805140, "body": "@Slava In fact, that&#39;s what the whole problem is about. The second <code>open</code> sets <code>failbit</code> to <code>true</code>."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1451487886, "post_id": 34531594, "comment_id": 56805270, "body": "If you want to know why, check error code. If you need your program to work remove it at all. Why did you put it there first place? And you can compare <code>std::string</code> like <code>if( s1 == s2 )</code> you do not need convoluted way with <code>strcmp</code>. And you should read one file into <code>std::set</code> or <code>std::map</code> and then compare rather than read the same file again and again."}, {"owner": {"reputation": 9, "user_id": 5730932, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-S94FGFlkXHs/AAAAAAAAAAI/AAAAAAAAADk/Ycofakd2T-U/photo.jpg?sz=128", "display_name": "Debanjan Sadhya", "link": "https://stackoverflow.com/users/5730932/debanjan-sadhya"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1451489581, "post_id": 34531594, "comment_id": 56806105, "body": "@Slava thanks a lot. It solved the problem."}], "owner": {"reputation": 9, "user_id": 5730932, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-S94FGFlkXHs/AAAAAAAAAAI/AAAAAAAAADk/Ycofakd2T-U/photo.jpg?sz=128", "display_name": "Debanjan Sadhya", "link": "https://stackoverflow.com/users/5730932/debanjan-sadhya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 414, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1504950777, "creation_date": 1451486420, "last_edit_date": 1504950777, "question_id": 34531594, "link": "https://stackoverflow.com/questions/34531594/reading-strings-from-text-files-using-getline-in-c", "title": "Reading strings from text files using getline() in c++", "body": "<p>I am working on the simple problem of finding the number of similar strings in two separate text (.txt) files which are named \"4_1.txt\" and \"4_2.txt\". However the getline() function in my code does not read the files as it returns the file stream '00000000' (I have checked it using 'cout'). Both the text files have been successfully opened using the ifstream.open() function. Why the getline() function is not working, and what is required for it's debugging? (I am using Visual C++ 2010). The code is-</p>\n\n<pre><code># include &lt;iostream&gt;\n# include &lt;fstream&gt;\n# include &lt;string&gt;\n# include &lt;vector&gt;\n\n\nusing namespace std;\n\nint main ()\n{\n    int match = 0,individual_match=0;\n    vector&lt;int&gt; arr_match;\n\n    string file_name_1 = \"Database/4_1.txt\";\n    string file_name_2 = \"Database/4_2.txt\";\n    string s1,s2;\n\n    ifstream ifs1(file_name_1);\n    if (!ifs1)\n    {\n        cout&lt;&lt;\"File 1 read error :\"&lt;&lt;endl;\n        exit(0);\n    }\n\n    ifs1.open(file_name_1, ios::in);\n    cout&lt;&lt;\"File No. \"&lt;&lt;file_name_1&lt;&lt;\" succesfully opened\"&lt;&lt;endl;\n    ifstream ifs2(file_name_2);\n    if (!ifs2)\n    {\n        std::cout&lt;&lt;\"File 2 read error :\"&lt;&lt;endl;\n        exit(0);\n    }\n    ifs2.open(file_name_2, ios::in);\n    cout&lt;&lt;\"File No. \"&lt;&lt;file_name_2&lt;&lt;\" succesfully opened\"&lt;&lt;endl;\n\n\n    // Matching Begins\n    cout&lt;&lt;\"Matching Between: \"&lt;&lt;file_name_1&lt;&lt;\" and \"&lt;&lt;file_name_2&lt;&lt;endl;\n    while (getline(ifs1,s1))\n    {\n        while (getline(ifs2,s2))\n        {\n            if (strcmp(s1.c_str(),s2.c_str()) == 0)\n                match++;          \n        }\n        ifs2.clear();\n        ifs2.seekg(0,ios::beg);\n\n    }\n    cout&lt;&lt;\"No. of Matching Minutiae between \"&lt;&lt;file_name_1&lt;&lt;\" and \"&lt;&lt;file_name_2&lt;&lt;\" is : \"&lt;&lt;match&lt;&lt;endl;\n    arr_match.push_back(match);\n    ifs2.close();\n\n    cout&lt;&lt;\"Printing the contents of the Vector: \"&lt;&lt;endl;\n\n    for (std::vector&lt;int&gt;::iterator i = arr_match.begin(); i != arr_match.end(); ++i)\n        cout &lt;&lt; *i &lt;&lt; ' ';\n\n    system(\"pause\");\n    return (0);\n}\n</code></pre>\n\n<p>The contents of \"4_1.txt\" and \"4_2.txt\" are given below. Both contain 20 strings (each string contains 64 HEX characters).</p>\n\n<p><strong>4_1.txt</strong></p>\n\n<p>f789909693b3898605450349b35d0218bc556c51f960f944e50ae242dc3446a3\nb780f20d75afc6afe44ccc270ba7e499c070a95e6535bcc71de8aa36ced3b5b6\n12269c796b58fb51020e17da59733d060552b37f7916e2f97df9f9bdc0e235a0\n94ca7771bcbfb3a51a6feb57e67955bf57e7655c4e38f23c42f2cb8f26bed543\n290a0b92873bdf4e47986dc5208037bad7527653bff700dc53c1e57eb98103c1\n5b7267c26cc279fdbe97b434c889c0ec3831f2294b19e4b8a9228de154551503\n8a835b9bf9c1f8976256bf02427710f8ecf85f55aa59e5084421be8793752362\n3b37ef6a1be31e06efd2f3cfa7e70d2b25d95efec97e5b71503a95e249d13250\nc6fab63609e8a0b0dad162a533ce5da4d8f4d40b652c8af06c6a542f4eba74b5\n61aad04aa9341a27da25994e4e72be78828a848291b781d8c19a5192b860f033\n92b18972560ad2bbd2800ccd28c975279ef95f74abb8cf37298def1cb681af9e\n900f7b407b5aa1f1759d248ae30e80a9e9f6d835d5d630c57330271264edc4ab\n4a081bff0bf93d06ee54ff45353e8b65bce23522ae6a45769f5968ff5956356e\n058b346de9b51add4eca9aec2ab0ed11aed227590421e2a05070ae1236954094\nbe1dfca7b57921df356fe39227da629c8ce9d04ea37b7dc109639a2cd99b127a\n6ef3dcb7be11f8c49ebcf27b2bd215629cebe39577cd7a29e6005ffffb4a883d\n9e3b6232cb7bd60ef9c5088e1c6dac834ddc05d916e88e2aacf84bb18c8d707a\nef13ebc3a57a1b51c17b45fcfef8eef761deab8371cc9e4eca14962d5763123d\n4459b2909cef1e99ddfb4be233208753a4ed2f43343df6d5b4561c5e9ead51c9\n059abcdaf2f2d2fbd6d40a18ff9e7d23db83e8ea1662b1b8d96f7ff3a189dbd0</p>\n\n<p><strong>4_2.txt</strong> </p>\n\n<p>be1dfca7b57921df356fe39227da629c8ce9d04ea37b7dc109639a2cd99b127a\n6ef3dcb7be11f8c49ebcf27b2bd215629cebe39577cd7a29e6005ffffb4a883d\n1788c74b1c9262866c2071b65df7bfcb7911c2b064c931b580515c2d9d2cd7f8\nef13ebc3a57a1b51c17b45fcfef8eef761deab8371cc9e4eca14962d5763123d\nca35d6668c8ef049df346e4fb2c18f50dac07bdf0b8d96a493c4df2b4143fe34\n07915fe7c4d1b930ab31e4807dcaa0b2f5ce124030ce6d365283fc38fce478cd\n4a081bff0bf93d06ee54ff45353e8b65bce23522ae6a45769f5968ff5956356e\nd65112fe4b7673c7e4677845ab91b4a6686e4543ea7b1c2420f89481f7d1b965\n9ae8f17cfc8ba7fd8fb34b2a194ef965a3b36a40839a46eeab1350e916692ac9\ne94e063888d213e0839a3c52bb8c0c1c9b9d4dbf67e5a3420a27b0efdf551853\n567c38161a125f1d049703d0e67e1062fdd9b975ecf00688cc61415c997e71c6\n143cf2c38c63401ee6c6d4514733c832f013c5647b03c92edae973e7a1c440a7\n59279341ea59fbf34025024596b670b6df2c9f80e71b9ad19aea71ba43b083fc\nccd5e4c20eae9e4ada72b6a93cbf14bff6e15d0a525c7b01e74a2eb0edfbc510\na89d6642c31c33525be583f4333b37d260d14903319a846e4f1e9e091a978592\na5ca6c0335a3860b31a64f43bf3021207ac91133c82bbc1736ab4f4e2922afed\ne32df00f65acc1db0a8264012e7074dbc58bd6f47b8c52004e0ab59244740cd5\n68fb74e20a2f319724f156afdb0a5f9470feb0bcbacfa1f2ca998fa86adda627\nf789909693b3898605450349b35d0218bc556c51f960f944e50ae242dc3446a3\n4459b2909cef1e99ddfb4be233208753a4ed2f43343df6d5b4561c5e9ead51c9</p>\n"}, {"tags": ["c++", "dll", "code-injection"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 3, "creation_date": 1451485883, "post_id": 34531449, "comment_id": 56804197, "body": "This is extremely dodgy. You can sort of hack it for simple, built-in types, but a <code>std::string</code> is no such thing. It contains pointers to data and you&#39;re not handling that. What on earth are you actually trying to accomplish?"}, {"owner": {"reputation": 17, "user_id": 5730985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35f5c751236c08d03f363d64858d63b2?s=128&d=identicon&r=PG&f=1", "display_name": "nice", "link": "https://stackoverflow.com/users/5730985/nice"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1451486001, "post_id": 34531449, "comment_id": 56804252, "body": "change the string stored at the address."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1451486004, "post_id": 34531449, "comment_id": 56804254, "body": "Where do you get that address from? Why do you think there is properly constructed object at that address?"}, {"owner": {"reputation": 17, "user_id": 5730985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35f5c751236c08d03f363d64858d63b2?s=128&d=identicon&r=PG&f=1", "display_name": "nice", "link": "https://stackoverflow.com/users/5730985/nice"}, "edited": false, "score": 0, "creation_date": 1451486096, "post_id": 34531449, "comment_id": 56804296, "body": "I read it before to check."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1451486099, "post_id": 34531449, "comment_id": 56804298, "body": "No, that&#39;s <i>how</i> you&#39;re trying to accomplish it. <i>What</i> are you trying to accomplish?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1451486108, "post_id": 34531449, "comment_id": 56804303, "body": "<i>&quot;I read it before to check&quot;</i> That is not a valid check. Where did the address come from?"}, {"owner": {"reputation": 17, "user_id": 5730985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35f5c751236c08d03f363d64858d63b2?s=128&d=identicon&r=PG&f=1", "display_name": "nice", "link": "https://stackoverflow.com/users/5730985/nice"}, "edited": false, "score": 0, "creation_date": 1451486166, "post_id": 34531449, "comment_id": 56804341, "body": "It displays the right string if I use <code>sprintf();</code> I try to hack a game (change player name)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1451486289, "post_id": 34531449, "comment_id": 56804417, "body": "You have a null terminated C string there, don&#39;t you?"}, {"owner": {"reputation": 17, "user_id": 5730985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35f5c751236c08d03f363d64858d63b2?s=128&d=identicon&r=PG&f=1", "display_name": "nice", "link": "https://stackoverflow.com/users/5730985/nice"}, "edited": false, "score": 0, "creation_date": 1451486375, "post_id": 34531449, "comment_id": 56804467, "body": "I don&#39;t really know what you mean... I&#39;m a C# boy."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1451486453, "post_id": 34531449, "comment_id": 56804508, "body": "I mean you have to basically use poor C, no C++ objects for such hacks. <code>std::string</code> is an object."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 5730985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35f5c751236c08d03f363d64858d63b2?s=128&d=identicon&r=PG&f=1", "display_name": "nice", "link": "https://stackoverflow.com/users/5730985/nice"}, "edited": false, "score": 0, "creation_date": 1451486816, "post_id": 34531601, "comment_id": 56804711, "body": "some source I could leech?"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 0, "last_activity_date": 1451486453, "creation_date": 1451486453, "answer_id": 34531601, "question_id": 34531449, "link": "https://stackoverflow.com/questions/34531449/write-string-to-pointer-c/34531601#34531601", "title": "write string to pointer C++", "body": "<p>You have not shown how you guarantee that the memory at the address <code>0x????????</code> is allocated properly or that the string object is initialized. </p>\n\n<p>If the pointer does not point to allocated memory, or if the string is not initialized when you copy-assign it, then you get undefined behaviour. Possible undefined behaviour include:</p>\n\n<blockquote>\n  <p>But changing the string crashes the process.</p>\n</blockquote>\n\n<p>To fix it, allocate and initialize a string object and use the address of that string.</p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 0, "last_activity_date": 1451486675, "last_edit_date": 1495541042, "creation_date": 1451486675, "answer_id": 34531654, "question_id": 34531449, "link": "https://stackoverflow.com/questions/34531449/write-string-to-pointer-c/34531654#34531654", "title": "write string to pointer C++", "body": "<p>You cannot use <code>std::string</code> or any other non <a href=\"https://stackoverflow.com/questions/146452/what-are-pod-types-in-c\">POD</a> data type this way. What you need to do instead:</p>\n\n<pre><code> char* variable = (char*) 0x????????;\n strcpy( variable, \"hello world\" );\n</code></pre>\n\n<p>or other, maybe MS specific functions to manipulate C strings.</p>\n"}], "owner": {"reputation": 17, "user_id": 5730985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35f5c751236c08d03f363d64858d63b2?s=128&d=identicon&r=PG&f=1", "display_name": "nice", "link": "https://stackoverflow.com/users/5730985/nice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1067, "favorite_count": 0, "accepted_answer_id": 34531654, "answer_count": 2, "score": 1, "last_activity_date": 1451486675, "creation_date": 1451485804, "question_id": 34531449, "link": "https://stackoverflow.com/questions/34531449/write-string-to-pointer-c", "title": "write string to pointer C++", "body": "<p>I have a Dll which I inject into my target process.\nThis Dll changes some variables at give memory addresses.\nNormaly I do it like:</p>\n\n<pre><code>  int* variable = (int*)0x????????;\n  *variable = 1;\n</code></pre>\n\n<p>Now I want to do the same thing with a string.\nReading the string works.</p>\n\n<pre><code>string* variable = (string*) 0x????????;\n</code></pre>\n\n<p>But changing the string crashes the process.</p>\n\n<pre><code>*variable = \"hello world\"; //crash\n</code></pre>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["c++", "parsing", "boost", "text"], "comments": [{"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1451488027, "post_id": 34531441, "comment_id": 56805337, "body": "So what is your actual question?"}, {"owner": {"reputation": 11, "user_id": 5730900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55b39d077fad740fcc44884135847f0c?s=128&d=identicon&r=PG&f=1", "display_name": "user5730900", "link": "https://stackoverflow.com/users/5730900/user5730900"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1451488826, "post_id": 34531441, "comment_id": 56805757, "body": "How to get multiple values (or one value separated with spaces) assigned to the single key from property tree object?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5730900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55b39d077fad740fcc44884135847f0c?s=128&d=identicon&r=PG&f=1", "display_name": "user5730900", "link": "https://stackoverflow.com/users/5730900/user5730900"}, "edited": false, "score": 0, "creation_date": 1451554026, "post_id": 34538555, "comment_id": 56829827, "body": "Thank you, by writing it to property tree and then again to the text file i can see that the second value is just treated like a next key. Unfortunately I do not generate this file and i cant change the format to add additional quotes. So do i have then give up this idea and just read this file line by line using getline() ? is it the only way?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 11, "user_id": 5730900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55b39d077fad740fcc44884135847f0c?s=128&d=identicon&r=PG&f=1", "display_name": "user5730900", "link": "https://stackoverflow.com/users/5730900/user5730900"}, "edited": false, "score": 0, "creation_date": 1451561441, "post_id": 34538555, "comment_id": 56833138, "body": "Yes. The could be better ways if there was a known grammar that the input satisfies. I&#39;d probably use Boost Spirit"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 1, "last_activity_date": 1451516341, "creation_date": 1451516341, "answer_id": 34538555, "question_id": 34531441, "link": "https://stackoverflow.com/questions/34531441/info-parser-property-tree-how-can-i-gather-all-values-according-to-the-single/34538555#34538555", "title": "INFO parser, property tree - how can I gather all values according to the single key", "body": "<p>That's not how the format works. Your example </p>\n\n<pre><code>    key8 value2 value3\n</code></pre>\n\n<p>is parsed as</p>\n\n<pre><code>    key8 value2\n    value3 \"\"\n</code></pre>\n\n<p>This implies that you can fix it like so:</p>\n\n<pre><code>key1\n{\n    key2\n    {\n        key8 \"value2 value3\"\n        key9 \"value3 value3\"\n        key3\n        {\n            key5 \"value1\"\n            key6 \"value2\"\n            key7 \"value3\"\n        }\n    }\n}\n</code></pre>\n\n<p>See it <strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/c8e0b153687002a5\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/property_tree/info_parser.hpp&gt;\n#include &lt;iostream&gt;\n\nint main() {\n    boost::property_tree::ptree pt;\n\n    read_info(std::cin, pt);\n    write_info(std::cout, pt);\n}\n</code></pre>\n\n<p>Prints the roundtripped form:</p>\n\n<pre><code>key1\n{\n    key2\n    {\n        key8 \"value2 value3\"\n        key9 \"value3 value3\"\n        key3\n        {\n            key5 value1\n            key6 value2\n            key7 value3\n        }\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>The \"a website\" you link to is the boost documentation site. See the current version here: <a href=\"http://www.boost.org/doc/libs/release/doc/html/property_tree/parsers.html#property_tree.parsers.info_parser\" rel=\"nofollow\">http://www.boost.org/doc/libs/release/doc/html/property_tree/parsers.html#property_tree.parsers.info_parser</a>. And note how the sample shows exactly how to use double quotes</p>\n</blockquote>\n"}], "owner": {"reputation": 11, "user_id": 5730900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55b39d077fad740fcc44884135847f0c?s=128&d=identicon&r=PG&f=1", "display_name": "user5730900", "link": "https://stackoverflow.com/users/5730900/user5730900"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1451516341, "creation_date": 1451485789, "last_edit_date": 1451486567, "question_id": 34531441, "link": "https://stackoverflow.com/questions/34531441/info-parser-property-tree-how-can-i-gather-all-values-according-to-the-single", "title": "INFO parser, property tree - how can I gather all values according to the single key", "body": "<p>I have <code>*.txt</code> file and I want to parse it to the string.</p>\n\n<pre><code>key1\n{\n    key2\n    {\n        key8 value2 value3\n        key9 value3 value3\n        key3\n        {\n            key5 value1\n            key6 value2\n            key7 value3\n        }\n    }\n}\n</code></pre>\n\n<p>The problem is there are more then one value assigned to the one key.\nand when i am trying to get value it just returns me the first one.</p>\n\n<pre><code>boost::property_tree::ptree pt;\nboost::property_tree::read_info(\"C:\\\\NewFolder\\\\file.txt\", pt);\nstring padShape = pt.get&lt;std::string&gt;(\"key1.key2.key8\");\n</code></pre>\n\n<p>I will be pleased just with having all values in one string object and I will split it by myself. </p>\n\n<p><a href=\"http://www.boost.org/doc/libs/1_42_0/doc/html/boost_propertytree/parsers.html#boost_propertytree.parsers.info_parser\" rel=\"nofollow\">Here</a> is website with INFO parser file example where the value is actually separated with white spaces, but I can't find and method that would allow me to read it.</p>\n"}, {"tags": ["c++", "algorithm", "recursion", "big-o", "time-complexity"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1451485772, "post_id": 34531418, "comment_id": 56804140, "body": "Looks to me that it is brute force recursive search in all directions, and worst case should be <code>O(N^2)</code>. The reason I say that is if you consider instead of a maze, rather an open grid, it will search in all directions recursively until finally reaching the destination, but does no caching of grid cells it already looked in, nor is it an &quot;informed&quot; search (e.g. Dijkstra, A*, etc)."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1451485857, "post_id": 34531418, "comment_id": 56804183, "body": "@CoryKramer: no, <i>O(2^N)</i>."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1451485905, "post_id": 34531418, "comment_id": 56804210, "body": "@WillemVanOnsem My mistake, you are correct,"}, {"owner": {"reputation": 171, "user_id": 4690466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da0d4efddfb1aa518a77e505d808b190?s=128&d=identicon&r=PG", "display_name": "\u0633\u06cc\u0641 \u062e\u0627\u0646", "link": "https://stackoverflow.com/users/4690466/%d8%b3%db%8c%d9%81-%d8%ae%d8%a7%d9%86"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1451486002, "post_id": 34531418, "comment_id": 56804253, "body": "Can you explain how this is exponential? @WillemVanOnsem"}, {"owner": {"reputation": 171, "user_id": 4690466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da0d4efddfb1aa518a77e505d808b190?s=128&d=identicon&r=PG", "display_name": "\u0633\u06cc\u0641 \u062e\u0627\u0646", "link": "https://stackoverflow.com/users/4690466/%d8%b3%db%8c%d9%81-%d8%ae%d8%a7%d9%86"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1451486114, "post_id": 34531418, "comment_id": 56804306, "body": "@CoryKramer &#39;does no caching of grid cells it already looked in&#39; It marks already visited cells so that they are not visited from another direction, if that is what you mean."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1451486144, "post_id": 34531418, "comment_id": 56804323, "body": "@\u0633\u06cc\u0641\u062e\u0627\u0646: but you unmark them again after visiting."}, {"owner": {"reputation": 171, "user_id": 4690466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da0d4efddfb1aa518a77e505d808b190?s=128&d=identicon&r=PG", "display_name": "\u0633\u06cc\u0641 \u062e\u0627\u0646", "link": "https://stackoverflow.com/users/4690466/%d8%b3%db%8c%d9%81-%d8%ae%d8%a7%d9%86"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1451486316, "post_id": 34531418, "comment_id": 56804432, "body": "Right! If I wanted to somehow be able to calculate its big-O formally, is there a way to do that? I need to be sure what you are saying is correct. @WillemVanOnsem"}, {"owner": {"reputation": 171, "user_id": 4690466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da0d4efddfb1aa518a77e505d808b190?s=128&d=identicon&r=PG", "display_name": "\u0633\u06cc\u0641 \u062e\u0627\u0646", "link": "https://stackoverflow.com/users/4690466/%d8%b3%db%8c%d9%81-%d8%ae%d8%a7%d9%86"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1451488243, "post_id": 34531418, "comment_id": 56805439, "body": "@WillemVanOnsem if you look at the algorithm again, you&#39;d notice that a cell is unmarked only if there was no path leading away from that cell. In cases where a valid path is exists from current cell, the function <b>always returns before</b> unmarking the cell. Wouldn&#39;t that equate to &#39;<i>caching of grid cells it already looked in</i>&#39;? Since it would never look into a cell that was previously visited and hath leading away from it again."}, {"owner": {"reputation": 171, "user_id": 4690466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da0d4efddfb1aa518a77e505d808b190?s=128&d=identicon&r=PG", "display_name": "\u0633\u06cc\u0641 \u062e\u0627\u0646", "link": "https://stackoverflow.com/users/4690466/%d8%b3%db%8c%d9%81-%d8%ae%d8%a7%d9%86"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1451488282, "post_id": 34531418, "comment_id": 56805463, "body": "@CoryKramer can you explain why this algorithm is exponential?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1451488321, "post_id": 34531418, "comment_id": 56805487, "body": "@\u0633\u06cc\u0641\u062e\u0627\u0646: yes, but it can fail, and this will create an exponential search tree."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1451492500, "post_id": 34531418, "comment_id": 56807752, "body": "It looks linear in number of cells to me."}, {"owner": {"reputation": 171, "user_id": 4690466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da0d4efddfb1aa518a77e505d808b190?s=128&d=identicon&r=PG", "display_name": "\u0633\u06cc\u0641 \u062e\u0627\u0646", "link": "https://stackoverflow.com/users/4690466/%d8%b3%db%8c%d9%81-%d8%ae%d8%a7%d9%86"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1451492551, "post_id": 34531418, "comment_id": 56807778, "body": "@n.m. you mean O(n) where n=number of cells?"}], "owner": {"reputation": 171, "user_id": 4690466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da0d4efddfb1aa518a77e505d808b190?s=128&d=identicon&r=PG", "display_name": "\u0633\u06cc\u0641 \u062e\u0627\u0646", "link": "https://stackoverflow.com/users/4690466/%d8%b3%db%8c%d9%81-%d8%ae%d8%a7%d9%86"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1994, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1451546290, "creation_date": 1451485693, "last_edit_date": 1451491972, "question_id": 34531418, "link": "https://stackoverflow.com/questions/34531418/maze-solving-with-recursive-backtracking-algorithm", "title": "Maze solving with recursive backtracking algorithm", "body": "<p>I have implemented <a href=\"https://www.cs.bu.edu/teaching/alg/maze/\" rel=\"nofollow noreferrer\">this</a> recursive backtracking algorithm in C++ to create a maze solver program.</p>\n\n<pre><code>FIND-PATH(x, y)\nif (x,y outside maze) return false\nif (x,y is goal) return true\nif (x,y not open) return false\nmark x,y as part of solution path\nif (FIND-PATH(North of x,y) == true) return true\nif (FIND-PATH(East of x,y) == true) return true\nif (FIND-PATH(South of x,y) == true) return true\nif (FIND-PATH(West of x,y) == true) return true\nunmark x,y as part of solution path\nreturn false\n</code></pre>\n\n<p><strong>I am having trouble analyzing this algorithm's time complexity.</strong></p>\n\n<p>Here's my implementation (<em>which I have simplified for the sake of this question, actual implementation uses some extra checks to determine which of the four directions to try first</em>):</p>\n\n<pre><code>bool Maze::FindPath(int x, int y)\n{\n    if (isOutsideMaze(x, y)) return false;\n\n    if (maze[x][y].isBad) return false;\n\n    if (x == goalX &amp;&amp; y == goalY)\n    {\n        maze[x][y].isBad = false;\n        return true;\n    }\n\n    if (maze[x][y].isBlocked)\n    {\n        maze[x][y].isBad = true;\n        return false;\n    }\n\n    maze[x][y].isBad = true;\n\n    if (FindPath(x, y + 1) == true) return true;\n    if (FindPath(x - 1, y) == true) return true;\n    if (FindPath(x + 1, y) == true) return true;\n    if (FindPath(x, y - 1) == true) return true;\n\n    maze[x][y].isBad = false;\n    return false;\n}\n</code></pre>\n\n<p>So, the question is, <em>what is time-complexity (big-O) of this algorithm in worst and average cases, <strong>and</strong> how do I calculate it</em>? I have tried looking for an explanation in other stackoverflow questions and on Google, but haven't found what I was looking for. Would appreciate any help.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Is there a formal way to determine time-complexity of a recursive algorithm? Can the recurrence relation be used to calculate time-complexity?</p>\n\n<p>Also, am I correct in assuming that recurrence relation of this algorithm would be something like <code>T(n) = 4T(n/4) + 1</code>?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>The worst-case would be where Start and Goal cell are maximum distance apart, and there are maximum number of 'open' cells in between the two. Something like the picture below. From what I have observed, the algorithm behaves as illustrated in the picture. Isn't this O(n)? If not, how do you explain that?\n<a href=\"https://i.stack.imgur.com/2tjgW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2tjgW.png\" alt=\"Image depicting worst-case behaviour of the algorithm. Isn&#39;t it O(n)? If not, how do you explain that?\"></a></p>\n"}, {"tags": ["c++", "c", "sockets", "network-programming", "tcpsocket"], "comments": [{"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 1, "creation_date": 1451485888, "post_id": 34531332, "comment_id": 56804199, "body": "What exactly are you trying to solve? What will you do if there is a time-out? Start polling again? Or exit? Or something else? What do you expect to do if there is some other error? What do you want to have happen if the receiving side is really on a &quot;go slow&quot; and the message is getting there, but very slowly (someone replaced a fast link with a much slower one, for example)?"}, {"owner": {"reputation": 1775, "user_id": 5066895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bHw56.png?s=128&g=1", "display_name": "Dieter Meemken", "link": "https://stackoverflow.com/users/5066895/dieter-meemken"}, "edited": false, "score": 1, "creation_date": 1451485946, "post_id": 34531332, "comment_id": 56804228, "body": "Can you provide some code?"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1451486202, "post_id": 34531332, "comment_id": 56804362, "body": "DOS attacks are typically &quot;lots of traffic&quot;, not &quot;no traffic&quot;, which is what gives a timeout..."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1451486253, "post_id": 34531332, "comment_id": 56804397, "body": "I edited my question above! Sorry for not being clear enough the first time.."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1451486617, "post_id": 34531332, "comment_id": 56804597, "body": "@MatsPetersson Yep you are correct! But the type of attack I had in mind was when I wait on recv() when I should logically be getting more data because the request so far is incomplete and the attacker just sits there not sending any data."}], "answers": [{"comments": [{"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1451485952, "post_id": 34531433, "comment_id": 56804232, "body": "Assuming I poll in the same thread right before I call recv() or send(). And the call to poll() is statically well formatted, i.e. The parameters dont change dynamically besides how they do based on the invocation of the wrapped recv() or send()/"}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 0, "last_activity_date": 1451485761, "creation_date": 1451485761, "answer_id": 34531433, "question_id": 34531332, "link": "https://stackoverflow.com/questions/34531332/using-timeouts-on-socket-send-and-recv/34531433#34531433", "title": "Using timeouts on socket send() and recv()", "body": "<p>Answer to question beginning by \"Is is a good idea to ALWAYS\" are often \"no.\" Here, the answer depends on the way you <code>poll()</code>, so no it's no always a good idea.</p>\n\n<p>If you <code>poll()</code> in a separate thread whose goal is <em>only</em> to wait for data, a timeout won't do anything.</p>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1451485949, "post_id": 34531467, "comment_id": 56804230, "body": "Generally bad answer. In many cases there is absolultely no need to perform socket operation in separate thread."}], "tags": [], "owner": {"reputation": 1775, "user_id": 5066895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bHw56.png?s=128&g=1", "display_name": "Dieter Meemken", "link": "https://stackoverflow.com/users/5066895/dieter-meemken"}, "is_accepted": false, "score": -1, "last_activity_date": 1451485898, "creation_date": 1451485898, "answer_id": 34531467, "question_id": 34531332, "link": "https://stackoverflow.com/questions/34531332/using-timeouts-on-socket-send-and-recv/34531467#34531467", "title": "Using timeouts on socket send() and recv()", "body": "<p>I you use the sockets in a syncron aproach, then you have to use timeouts. But a better but harder way would be to use them asyncron. So, running in their own thread, they can block and will use least resoures...</p>\n"}, {"comments": [{"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1451501909, "post_id": 34531468, "comment_id": 56812642, "body": "If I am planning on throwing an exception saying that a timeout has happened is it a good idea?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1451502245, "post_id": 34531468, "comment_id": 56812823, "body": "@Curious, I have no idea. Is it a good idea in your application? Is timeout an exceptional case where you absolutely can&#39;t tolerate it at the call site, nor you can sanely propagate the error upstream?"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1451506912, "post_id": 34531468, "comment_id": 56815050, "body": "I don&#39;t have any application in mind yet but I just feel like every recv call should have some sort of timeout when it is used in real scenarios right?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1451508133, "post_id": 34531468, "comment_id": 56815748, "body": "@Curious, there are many application which do not deal with any timeouts, and are just waiting for data or connection break."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1451509838, "post_id": 34531468, "comment_id": 56816608, "body": "How about a regular HTTP server? A recv() call in such a server should be with such a timeout correct?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1451510108, "post_id": 34531468, "comment_id": 56816729, "body": "@Curious, yes, HTTP servers (like many other servers) are the kind of applications which will close connection which doesn&#39;t seem to be alive anymore."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 1, "last_activity_date": 1451485903, "creation_date": 1451485903, "answer_id": 34531468, "question_id": 34531332, "link": "https://stackoverflow.com/questions/34531332/using-timeouts-on-socket-send-and-recv/34531468#34531468", "title": "Using timeouts on socket send() and recv()", "body": "<p>What are you going to do after timeout lapses? If you are going to start waiting again, than timeout gives you nothing.</p>\n\n<p>If you will close the connection and brand it dead, than timeout is very useful. </p>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1451486146, "post_id": 34531478, "comment_id": 56804325, "body": "poll has a benefit over SO_RCVTIMEO in that timeout is site configurable. However, this answer is a good one."}], "tags": [], "owner": {"reputation": 139, "user_id": 2947118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/02b14e8507965ace10f79dce3698af29?s=128&d=identicon&r=PG&f=1", "display_name": "samt1903", "link": "https://stackoverflow.com/users/2947118/samt1903"}, "is_accepted": false, "score": 1, "last_activity_date": 1451485931, "last_edit_date": 1495535301, "creation_date": 1451485931, "answer_id": 34531478, "question_id": 34531332, "link": "https://stackoverflow.com/questions/34531332/using-timeouts-on-socket-send-and-recv/34531478#34531478", "title": "Using timeouts on socket send() and recv()", "body": "<p>select() and poll() just tell you which file descriptors are ready to read from. Once you know which file descriptors are ready you can still call recv() on them so you will get the same return values/error checking either way. </p>\n\n<p>You really only need to use select() or poll() if you have multiple sockets/file descriptors to read from. If all you need is a timeout on a single socket then you can use setsockopt() with the SO_RCVTIMEO option to allow a recv() call to time out. See <a href=\"https://stackoverflow.com/questions/2876024/linux-is-there-a-read-or-recv-from-socket-with-timeout%20%22this%20answer%22.\">this answer</a>.</p>\n"}], "owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2165, "favorite_count": 0, "closed_date": 1451493303, "accepted_answer_id": 34531468, "answer_count": 4, "score": -1, "last_activity_date": 1451486687, "creation_date": 1451485292, "last_edit_date": 1451486687, "question_id": 34531332, "link": "https://stackoverflow.com/questions/34531332/using-timeouts-on-socket-send-and-recv", "closed_reason": "Opinion-based", "title": "Using timeouts on socket send() and recv()", "body": "<p>Is it a good idea to ALWAYS use either select() or poll() and impose say a 10 second timeout on both send() and recv() calls? Or should I just allow them to block indefinitely?</p>\n\n<p>Does imposing this sort of timeout (using select() or poll()) lead me to lose some sort of error reporting or functionality (in the form of return values) that I can get when just using send() and recv()?</p>\n\n<p>NOTE : Assuming I poll in the same thread right before I call recv() or send(). And the call to poll() is statically well formatted, i.e. The parameters dont change dynamically besides how they do based on the invocation of the wrapped recv() or send()</p>\n\n<p>ANOTHER NOTE : If there is a timeout, then I will throw an exception and let the programmer catch it. I was hoping this would lead to protection against a DOS attack. If there is indeed a timeout. I will throw an exception and not get to calling either recv() or send()</p>\n\n<p>YET ANOTHER NOTE : Source code related to what I am talking about can be found here <a href=\"https://beej.us/guide/bgnet/output/html/singlepage/bgnet.html#faq\" rel=\"nofollow\">https://beej.us/guide/bgnet/output/html/singlepage/bgnet.html#faq</a> under a similar FAQ</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "encryption", "private-key"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 4, "creation_date": 1451485485, "post_id": 34531316, "comment_id": 56803984, "body": "You&#39;re redesigning PGP/GPG. So yes, such systems already exist and you shouldn&#39;t try to rewrite them and expect them to be secure ;)"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1451485640, "post_id": 34531316, "comment_id": 56804075, "body": "The concise, but full answer is: Yes. The verbous answer is: There are libraries that provide a function or several for encrypting text."}, {"owner": {"reputation": 875, "user_id": 4834380, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ef7f7dbad0ce977617913961efa3e25b?s=128&d=identicon&r=PG&f=1", "display_name": "little_planet", "link": "https://stackoverflow.com/users/4834380/little-planet"}, "edited": false, "score": 0, "creation_date": 1451485819, "post_id": 34531316, "comment_id": 56804166, "body": "let&#39;s assume it wouldn&#39;t be such a trivial application. Is it possible to integrate PGP in my own applications?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 2, "creation_date": 1451486273, "post_id": 34531316, "comment_id": 56804412, "body": "@YSC, not only OP is redesigning GPG, they are copy-pasting the examples from GPG manual ;)"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1451488706, "post_id": 34531316, "comment_id": 56805698, "body": "@SergeyA OP could very well be quoting an assignment given by a teacher who copy-pasted the example from GPG manual :)"}], "answers": [{"tags": [], "owner": {"reputation": 1862, "user_id": 4658000, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/0Sw3Y.jpg?s=128&g=1", "display_name": "Le\u015bny Rumcajs", "link": "https://stackoverflow.com/users/4658000/le%c5%9bny-rumcajs"}, "is_accepted": false, "score": 3, "last_activity_date": 1451485797, "creation_date": 1451485797, "answer_id": 34531442, "question_id": 34531316, "link": "https://stackoverflow.com/questions/34531316/using-a-password-to-protect-private-key-in-c/34531442#34531442", "title": "Using a password to protect private key in c++", "body": "<p>Using <code>OpenSSL</code> you can save your key in a protected form (<code>BEGIN RSA ENCRYPTED...</code>). An exemplary function you may want to use (I'm omiting all the operations required beforehand, but they're pretty elementary).</p>\n\n<pre><code>PEM_write_PKCS8PrivateKey(pFile, m_pKey, cipher, sPass, iPassLen, 0, NULL)\n</code></pre>\n\n<p>where <code>cipher</code> is your encryption algorithm, of appropriate type. More (with examples!) here: <a href=\"https://www.openssl.org/docs/manmaster/crypto/pem.html\" rel=\"nofollow\">https://www.openssl.org/docs/manmaster/crypto/pem.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1451486342, "post_id": 34531488, "comment_id": 56804450, "body": "And OP should be very well aware of this, since the question is a copy-paste from GPG manual."}, {"owner": {"reputation": 875, "user_id": 4834380, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ef7f7dbad0ce977617913961efa3e25b?s=128&d=identicon&r=PG&f=1", "display_name": "little_planet", "link": "https://stackoverflow.com/users/4834380/little-planet"}, "edited": false, "score": 0, "creation_date": 1451486470, "post_id": 34531488, "comment_id": 56804522, "body": "It isn&#39;t and I wasn&#39;t. The answer of YSC and DevSolar where very helpfull because they preserved me from running into one of the most common &#39;newbe&#39; problems in cryptography. I guess this is a case of &#39;never implement your own ...&#39;"}], "tags": [], "owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "is_accepted": true, "score": 4, "last_activity_date": 1451485987, "creation_date": 1451485987, "answer_id": 34531488, "question_id": 34531316, "link": "https://stackoverflow.com/questions/34531316/using-a-password-to-protect-private-key-in-c/34531488#34531488", "title": "Using a password to protect private key in c++", "body": "<blockquote>\n  <p>Is it possible to integrate PGP in my own applications?</p>\n</blockquote>\n\n<p><a href=\"https://www.gnupg.org/related_software/gpgme/\" rel=\"nofollow\"><em>GnuPG Made Easy</em> (GPGME)</a> \"is a library designed to make access to GnuPG easier for applications. It provides a High-Level Crypto API for encryption, decryption, signing, signature verification and key management.\"</p>\n"}], "owner": {"reputation": 875, "user_id": 4834380, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ef7f7dbad0ce977617913961efa3e25b?s=128&d=identicon&r=PG&f=1", "display_name": "little_planet", "link": "https://stackoverflow.com/users/4834380/little-planet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1000, "favorite_count": 1, "accepted_answer_id": 34531488, "answer_count": 2, "score": 1, "last_activity_date": 1451486182, "creation_date": 1451485251, "last_edit_date": 1451486182, "question_id": 34531316, "link": "https://stackoverflow.com/questions/34531316/using-a-password-to-protect-private-key-in-c", "title": "Using a password to protect private key in c++", "body": "<p>I'm planning to write a little application with the basic idea that users are able to share encrypted information with each other. A little scenario: Alice writes a memo (data format is known), the application encrypts this memo and saves the memo on the application server. Now Alice wants to share this memo with Bob. Alice opens the application, searches for user \"Bob\" and receives the public key of Bob. The application encrypts the memo with Alice and Bob's key and saves the memo on the server. Now Bob is also able to read the memo.</p>\n\n<p>The private key of the user only belongs to the device where the application is installed. It is never transferred over network. Nevertheless I would like to 'encrypt' the private key with the password of the user, so it can be stored in a (relative) secure way on the device and only be 'decrypted' if the correct password is entered. The key itself should not be altered if the password of the user changes, because this would cause that all data will have to be encrypted again with this new key. Instead the user will have to enter the old passphrase, the key is decrypted and encrypted again with the new passphrase.</p>\n\n<p>Is there any function (maybe in OpenSSL?) to 'encrypt' or protect a key with a passphrase?</p>\n\n<p>Note: the private key may or may not be stored in a keystore. because the application will run on many plattforms it is not clear in advance which keystore is available.</p>\n"}, {"tags": ["c++", "compression", "bit", "huffman-code"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1451485215, "post_id": 34531245, "comment_id": 56803854, "body": "Have you tried anything? If not, do it straightforward: write the bits to some data type and then write it to a file. If it doesn&#39;t work, consult Stack Overflow."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1451485809, "post_id": 34531245, "comment_id": 56804162, "body": "@cad No, if it doesn&#39;t work, <i>do some research</i>. Some <i>learning</i>. <i>Study it for a while</i>. Consult Stack Overflow as a last resort."}, {"owner": {"reputation": 3, "user_id": 5709028, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-13D2wSgSb2E/AAAAAAAAAAI/AAAAAAAAABE/_lGIRUl3bI0/photo.jpg?sz=128", "display_name": "Stoler", "link": "https://stackoverflow.com/users/5709028/stoler"}, "edited": false, "score": 0, "creation_date": 1451485977, "post_id": 34531245, "comment_id": 56804243, "body": "\u0131 searched 2 days in a row and my english is not too good to understand everything about these.I tried to find something that \u0131 can understand that&#39;s why \u0131 ask here"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1454011150, "post_id": 34531245, "comment_id": 57864640, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your code and accurately describe the problem.   StackOverflow is not a coding or tutorial service."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1451485838, "post_id": 34531340, "comment_id": 56804176, "body": "There is no bitwise file access in modern file systems period"}], "tags": [], "owner": {"reputation": 548, "user_id": 2229835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nXQjN.jpg?s=128&g=1", "display_name": "Kellerspeicher", "link": "https://stackoverflow.com/users/2229835/kellerspeicher"}, "is_accepted": false, "score": 2, "last_activity_date": 1451488013, "last_edit_date": 1495541442, "creation_date": 1451485316, "answer_id": 34531340, "question_id": 34531245, "link": "https://stackoverflow.com/questions/34531245/how-can-i-write-bits-to-file-as-a-bit-in-c/34531340#34531340", "title": "How can i write bits to file as a bit in c++?", "body": "<p><strong>Blockwise</strong>: Append your bitsets to a buffer and write bytes, words or even larger portions from the buffer to the file. There is no bitwise file access in C++.</p>\n\n<p>Have a look at <a href=\"http://en.cppreference.com/w/cpp/utility/bitset\" rel=\"nofollow noreferrer\">bitset</a> and <a href=\"https://stackoverflow.com/questions/5754742\">this question</a>.</p>\n"}], "owner": {"reputation": 3, "user_id": 5709028, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-13D2wSgSb2E/AAAAAAAAAAI/AAAAAAAAABE/_lGIRUl3bI0/photo.jpg?sz=128", "display_name": "Stoler", "link": "https://stackoverflow.com/users/5709028/stoler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "closed_date": 1451486753, "answer_count": 1, "score": -7, "last_activity_date": 1451488013, "creation_date": 1451484951, "last_edit_date": 1451485584, "question_id": 34531245, "link": "https://stackoverflow.com/questions/34531245/how-can-i-write-bits-to-file-as-a-bit-in-c", "closed_reason": "Needs details or clarity", "title": "How can i write bits to file as a bit in c++?", "body": "<p>I'm working on Huffman compression and \u0131 need to write a file as a bit and it must include my bits in program.How can \u0131 do this in c++ ?</p>\n\n<p>By the way \u0131 tried every solutions in the web and asked lots of form but \u0131 couldnt fine anything</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "edited": false, "score": 2, "creation_date": 1451484534, "post_id": 34531096, "comment_id": 56803501, "body": "You must delete (clean up) it yourself. In this example, you forgot to clean up 9 <code>SClass</code>. Why do you use <code>queue&lt;SClass*&gt;</code>? Why don&#39;t just <code>queue&lt;SClass&gt;</code>"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1451484678, "post_id": 34531096, "comment_id": 56803569, "body": "Destroying a pointer does not have any effects on what it points to. Now, all containers are just containers for their actual type, they don&#39;t care if the type is a pointer and behave differently for them. This follows the principle of least surprise."}, {"owner": {"reputation": 1276, "user_id": 1888726, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1ac112090fe6828a5a9349b30c6af593?s=128&d=identicon&r=PG", "display_name": "xcorat", "link": "https://stackoverflow.com/users/1888726/xcorat"}, "edited": false, "score": 0, "creation_date": 1451484921, "post_id": 34531096, "comment_id": 56803695, "body": "Duh! sorry..! this is a stupid question :)"}], "answers": [{"comments": [{"owner": {"reputation": 1276, "user_id": 1888726, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1ac112090fe6828a5a9349b30c6af593?s=128&d=identicon&r=PG", "display_name": "xcorat", "link": "https://stackoverflow.com/users/1888726/xcorat"}, "edited": false, "score": 0, "creation_date": 1451485552, "post_id": 34531201, "comment_id": 56804020, "body": "Is it supposed to be  <code>sq.push(i);</code> or  <code>sq.push(SClass(i));</code> ?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 1276, "user_id": 1888726, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1ac112090fe6828a5a9349b30c6af593?s=128&d=identicon&r=PG", "display_name": "xcorat", "link": "https://stackoverflow.com/users/1888726/xcorat"}, "edited": false, "score": 1, "creation_date": 1451485606, "post_id": 34531201, "comment_id": 56804054, "body": "<code>sq.push(i);</code> implicitly creates a <code>SClass(i)</code> and <code>push</code>es it. The two writings are equivalent here."}, {"owner": {"reputation": 1276, "user_id": 1888726, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1ac112090fe6828a5a9349b30c6af593?s=128&d=identicon&r=PG", "display_name": "xcorat", "link": "https://stackoverflow.com/users/1888726/xcorat"}, "edited": false, "score": 0, "creation_date": 1451485877, "post_id": 34531201, "comment_id": 56804195, "body": "Also, the reason I was reluctant to use objects is that they can be pretty big. But I assume in this case you are using only a temporary object and it is not really &quot;copied&quot; Is that right? And what about when it&#39;s retrieved? Would the compiler optimize it given that I call <code>pop()</code> right after <code>front()</code>?"}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": true, "score": 5, "last_activity_date": 1451486468, "last_edit_date": 1451486468, "creation_date": 1451484786, "answer_id": 34531201, "question_id": 34531096, "link": "https://stackoverflow.com/questions/34531096/destroying-class-pointers-with-stl-queue-pop/34531201#34531201", "title": "Destroying Class pointers with STL Queue pop()", "body": "<p>In your case, the <code>queue</code> only manage the pointers themselves, it does not do anything with the memory it points to. In your example, you leak the nine first <code>SClass</code> and only delete the last one.</p>\n\n<p>You shouldn't dynamically allocate your objects if you don't <em>explicitly</em> need it. Try this:</p>\n\n<pre><code>int main()\n{\n   cout &lt;&lt; \"Hello World\" &lt;&lt; endl; \n   queue&lt;SClass&gt; sq;\n   for(int i = 0; i &lt; 10; i++){\n       sq.push(i);\n   }\n\n   while(!sq.empty()){\n       SClass&amp; s2 = sq.front();\n       cout &lt;&lt; s2.getSInt() &lt;&lt; endl;\n       sq.pop();\n   }\n   return 0;\n}\n</code></pre>\n\n<p>In this case, the objects are created when <code>push</code>ed to the queue, and destroyed when <code>pop</code>ed. If we ignore the possible performance hiccup (a temporary <code>SClass</code> is created as an argument to <code>queue.push()</code> and the copied to the queue internal buffer; this can be optimized but it's another topic), this is a way more clean, readable approach.</p>\n\n<hr>\n\n<p>If your objects are big and you want to be sure they are not uselessly copied, you should either use a <code>std::queue&lt;std::unique_ptr&lt;SClass&gt;&gt;</code> or provide a move constructor for <code>SClass</code>. This is a bit out of scope here, so I'll let you ask another question if need be.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 3, "last_activity_date": 1451484809, "creation_date": 1451484809, "answer_id": 34531203, "question_id": 34531096, "link": "https://stackoverflow.com/questions/34531096/destroying-class-pointers-with-stl-queue-pop/34531203#34531203", "title": "Destroying Class pointers with STL Queue pop()", "body": "<blockquote>\n  <p>What happen when you get a pointer through some_queue.front(), assign it to another variable, and then call some_queue.pop()?</p>\n</blockquote>\n\n<p>A copy of the object is stored in the <em>another variable</em> and it's removed from the top of the queue.</p>\n\n<blockquote>\n  <p>Who is supposed to cleanup the memory?</p>\n</blockquote>\n\n<p>Whoever allocated the memory.</p>\n\n<blockquote>\n  <p>Why does this work?</p>\n</blockquote>\n\n<p>At a quick glance, there doesn't seem any reason why it wouldn't <em>work</em>. You do leak most of the allocated <code>SClass</code> objects however (all except the bottom one). To fix the leak, delete the pointer that you got from the queue before it is reassigned to another value (at the end of the loop). Better yet, don't allocate memory manually and use a queue of objects instead of queue of pointers.</p>\n"}, {"tags": [], "owner": {"reputation": 545, "user_id": 760365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a609e2719e17ddaf2ae99133b1447b7?s=128&d=identicon&r=PG&f=1", "display_name": "Pravar Jawalekar", "link": "https://stackoverflow.com/users/760365/pravar-jawalekar"}, "is_accepted": false, "score": 3, "last_activity_date": 1451484859, "creation_date": 1451484859, "answer_id": 34531222, "question_id": 34531096, "link": "https://stackoverflow.com/questions/34531096/destroying-class-pointers-with-stl-queue-pop/34531222#34531222", "title": "Destroying Class pointers with STL Queue pop()", "body": "<p><code>std::queue::pop()</code> would not release memory if contained element type is of pointer. User must ensure to free memory owned by raw-pointers in case of all standard containers.</p>\n\n<pre><code>while(!sq.empty()){\n       s2 = sq.front();\n       sq.pop();\n       cout &lt;&lt; s2-&gt;getSInt() &lt;&lt; endl;\n\n       // memory should be freed here\n       delete s2;\n   }\n</code></pre>\n"}], "owner": {"reputation": 1276, "user_id": 1888726, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1ac112090fe6828a5a9349b30c6af593?s=128&d=identicon&r=PG", "display_name": "xcorat", "link": "https://stackoverflow.com/users/1888726/xcorat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1055, "favorite_count": 0, "accepted_answer_id": 34531201, "answer_count": 3, "score": 0, "last_activity_date": 1451486468, "creation_date": 1451484363, "last_edit_date": 1451485752, "question_id": 34531096, "link": "https://stackoverflow.com/questions/34531096/destroying-class-pointers-with-stl-queue-pop", "title": "Destroying Class pointers with STL Queue pop()", "body": "<p>What happen when you get a pointer through <code>some_queue.front()</code>, assign it to another variable, and then call <code>some_queue.pop()</code>? Who is supposed to cleanup the memory? (I am using c++98, I can use boost smart pointers if really needed)</p>\n\n<p>Ex: (Why does this work? or is it not supposed to?)</p>\n\n<pre><code>class SClass {\npublic:\n    SClass(int si): sInt(si){}\n    int getSInt(){ return sInt; }\n\nprivate:\n    int sInt;\n    ... // bunch of other complicated data types so copy might be slow\n};\n\nint main()\n{\n   cout &lt;&lt; \"Hello World\" &lt;&lt; endl; \n   queue&lt;SClass *&gt; sq;\n   for(int i = 0; i &lt; 10; i++){\n       SClass *sc = new SClass(i);\n       sq.push(sc);\n   }\n   SClass *s2 = NULL;\n   while(!sq.empty()){\n       s2 = sq.front();\n       sq.pop();\n       cout &lt;&lt; s2-&gt;getSInt() &lt;&lt; endl;\n   }\n   delete s2;\n   return 0;\n}\n</code></pre>\n\n<p>Working test code here: <a href=\"http://cpp.sh/6z7ke\" rel=\"nofollow\">http://cpp.sh/6z7ke</a></p>\n"}, {"tags": ["c++", "windows", "compilation", "64-bit", "clang"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1451484390, "post_id": 34531071, "comment_id": 56803426, "body": "<code>char16_t</code> and <code>char32_t</code> are an addition of C++11, did you compile with the relevant flags?"}, {"owner": {"reputation": 160, "user_id": 2554080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44c62bceb087042ea7026b156b7ba0bb?s=128&d=identicon&r=PG", "display_name": "user2554080", "link": "https://stackoverflow.com/users/2554080/user2554080"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1451484776, "post_id": 34531071, "comment_id": 56803626, "body": "what flags? I don&#39;t think so..."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1451484868, "post_id": 34531071, "comment_id": 56803668, "body": "my bad <a href=\"http://stackoverflow.com/questions/25992401/how-to-add-std-c11-flag-to-clang-cl\" title=\"how to add std c11 flag to clang cl\">stackoverflow.com/questions/25992401/&hellip;</a> (clang defaults to C++11 on Windows)."}, {"owner": {"reputation": 160, "user_id": 2554080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44c62bceb087042ea7026b156b7ba0bb?s=128&d=identicon&r=PG", "display_name": "user2554080", "link": "https://stackoverflow.com/users/2554080/user2554080"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1451509182, "post_id": 34531071, "comment_id": 56816251, "body": "I added <code>-Xclang -std=c++11</code> and <code>-Xclang -std=c++14</code> to the command, but that didn&#39;t help! :("}], "answers": [{"comments": [{"owner": {"reputation": 7982, "user_id": 2679626, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ae2587956371769336745ff9ef4dab0?s=128&d=identicon&r=PG", "display_name": "Denilson Amorim", "link": "https://stackoverflow.com/users/2679626/denilson-amorim"}, "edited": false, "score": 0, "creation_date": 1488392110, "post_id": 34537520, "comment_id": 72213789, "body": "It seems that since this reply, they added means of automatically setting <code>-fms-compatibility-version</code> based on your environment variables (actually by checking <code>cl.exe</code> version number). So, make sure you have <code>cl.exe</code> visible to clang, and this option will be set automatically."}, {"owner": {"reputation": 32492, "user_id": 31516, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/SOucS.jpg?s=128&g=1", "display_name": "David Brown", "link": "https://stackoverflow.com/users/31516/david-brown"}, "reply_to_user": {"reputation": 7982, "user_id": 2679626, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ae2587956371769336745ff9ef4dab0?s=128&d=identicon&r=PG", "display_name": "Denilson Amorim", "link": "https://stackoverflow.com/users/2679626/denilson-amorim"}, "edited": false, "score": 0, "creation_date": 1492052802, "post_id": 34537520, "comment_id": 73827577, "body": "@thelink2012 Is that supposed to be in Clang 4.0? Using the prebuilt binaries on Windows 10 with MSVC 2017 (cl.exe 19.10), the compatibility setting still defaults to 18."}, {"owner": {"reputation": 7982, "user_id": 2679626, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ae2587956371769336745ff9ef4dab0?s=128&d=identicon&r=PG", "display_name": "Denilson Amorim", "link": "https://stackoverflow.com/users/2679626/denilson-amorim"}, "reply_to_user": {"reputation": 32492, "user_id": 31516, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/SOucS.jpg?s=128&g=1", "display_name": "David Brown", "link": "https://stackoverflow.com/users/31516/david-brown"}, "edited": false, "score": 0, "creation_date": 1492097597, "post_id": 34537520, "comment_id": 73853669, "body": "@DavidBrown I found this behaviour on Clang 3.9.1, not sure if they changed it on 4.0."}], "tags": [], "owner": {"reputation": 160, "user_id": 2554080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44c62bceb087042ea7026b156b7ba0bb?s=128&d=identicon&r=PG", "display_name": "user2554080", "link": "https://stackoverflow.com/users/2554080/user2554080"}, "is_accepted": true, "score": 7, "last_activity_date": 1467448492, "last_edit_date": 1467448492, "creation_date": 1451510944, "answer_id": 34537520, "question_id": 34531071, "link": "https://stackoverflow.com/questions/34531071/clang-cl-on-windows-8-1-compiling-error/34537520#34537520", "title": "clang-cl on Windows 8.1 compiling error", "body": "<p>I finally found that I need to add the following to the command line: </p>\n\n<pre><code>-fms-compatibility-version=19.00\n</code></pre>\n\n<p>In a reply to <a href=\"https://llvm.org/bugs/show_bug.cgi?id=24231\" rel=\"nofollow\">Clang bug report #24231</a>, Reid Klecker explained why this is necessary:</p>\n\n<blockquote>\n  <p>\"In [Visual Studio] 2015, <code>char16_t</code> became a builtin type. Previously, it could not be builtin because 2013 defines it in their headers. By default, Clang tries to be compatible with 2013. To target 2015, pass [<code>-fms-compatibility-version=19</code>] to <code>clang-cl</code>. The argument can be the whole version number that <code>cl /?</code> spits out.\"</p>\n</blockquote>\n\n<p>So my final command is (including general libs):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>clang-cl.exe \"C:\\test\\Source.cpp\" -fms-compatibility-version=19.00 ^\n   -Fe\"C:\\test\\Source.exe\" \"kernel32.lib\" \"user32.lib\" \"gdi32.lib\" \"winspool.lib\" ^\n   \"comdlg32.lib\" \"advapi32.lib\" \"shell32.lib\" \"ole32.lib\" \"oleaut32.lib\" \"uuid.lib\" ^\n   \"odbc32.lib\" \"odbccp32.lib\"\n</code></pre>\n"}], "owner": {"reputation": 160, "user_id": 2554080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44c62bceb087042ea7026b156b7ba0bb?s=128&d=identicon&r=PG", "display_name": "user2554080", "link": "https://stackoverflow.com/users/2554080/user2554080"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2350, "favorite_count": 1, "accepted_answer_id": 34537520, "answer_count": 1, "score": 2, "last_activity_date": 1523778117, "creation_date": 1451484245, "last_edit_date": 1523778117, "question_id": 34531071, "link": "https://stackoverflow.com/questions/34531071/clang-cl-on-windows-8-1-compiling-error", "title": "clang-cl on Windows 8.1 compiling error", "body": "<p>I just started using clang-cl 3.7 on Windows.\nI tried to compile my code on my WIN8.1 machine through Visual studio 2015, and trough command line. Needless to say that before that, in the same cmd, I ran <code>vsvarsall</code> with the <code>amd64</code> option.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#define UNICODE\n#include &lt;Windows.h&gt;\n#include &lt;iostream&gt;\n\n int main() {\n\n int a = 0;\n if(0)\n__asm _emit 0xE8\nelse\na=3;\n\nif (IsDebuggerPresent())\nMessageBox(\n    NULL,\n    (LPCWSTR)L\"Debugger detected!!\",\n    (LPCWSTR)L\"!!!!!\",\n    MB_ICONWARNING | MB_CANCELTRYCONTINUE | MB_DEFBUTTON2\n    );\n return 0;\n }\n</code></pre>\n\n<p>Here is what I put in the command line:</p>\n\n<pre><code>C:\\Program Files\\LLVM\\bin&gt;\"C:\\Program Files\\LLVM\\bin\\clang-cl.exe\"     \"C:\\Users\\Dav\n id\\Source\\Repos\\DY Obfuscator 2015-20162\\DY Obfuscator\\Source.cpp\"\n</code></pre>\n\n<p>Compiling in VS2015 worked ok, but I cant compile on the command line because I get this error:</p>\n\n<pre><code>C:\\Program Files\\LLVM\\bin&gt;\"C:\\Program Files\\LLVM\\bin\\clang-cl.exe\"    C:\\test\\Sourc\ne.cpp\nIn file included from C:\\test\\Source.cpp:3:\nIn file included from C:\\Program Files (x86)\\Microsoft Visual Studio  14.0\\VC\\INC\nLUDE\\iostream:6:\nIn file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\nLUDE\\istream:6:\nIn file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\nLUDE\\ostream:6:\nIn file included from C:\\Program Files (x86)\\Microsoft Visual Studio   14.0\\VC\\INC\nLUDE\\ios:6:\nIn file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\nLUDE\\xlocnum:7:\nIn file included from C:\\Program Files (x86)\\Microsoft Visual Studio   14.0\\VC\\INC\nLUDE\\cmath:656:\nIn file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\nLUDE\\xtgmath.h:8:\nC:\\Program Files (x86)\\Microsoft Visual Studio     14.0\\VC\\INCLUDE\\xtr1common(207,22\n) :  error:\n  use of undeclared identifier 'char16_t'\n    struct _Is_integral&lt;char16_t&gt;\n                        ^\nC:\\Program Files (x86)\\Microsoft Visual Studio   14.0\\VC\\INCLUDE\\xtr1common(213,22\n) :  error:\n  use of undeclared identifier 'char32_t'\n    struct _Is_integral&lt;char32_t&gt;\n                        ^\nIn file included from C:\\test\\Source.cpp:3:\nIn file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\nLUDE\\iostream:6:\nIn file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\nLUDE\\istream:6:\nIn file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\nLUDE\\ostream:6:\nIn file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\ios:6:\nIn file included from C:\\Program Files (x86)\\Microsoft Visual Studio    14.0\\VC\\INC\n LUDE\\xlocnum:10:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\nLUDE\\streambuf:6:\nIn file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\nLUDE\\xiosbase:6:\nIn file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\nLUDE\\xlocale:8:\nIn file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\nLUDE\\stdexcept:6:\nIn file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\nLUDE\\exception:7:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\type_traits:6:\n C:\\Program Files (x86)\\Microsoft Visual Studio   14.0\\VC\\INCLUDE\\xstddef(405,14) :\n  error:\n  use of undeclared identifier 'char16_t'\n    struct hash&lt;char16_t&gt;\n                ^\n C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE\\xstddef(411,14) :\n   error:\n  use of undeclared identifier 'char32_t'\n    struct hash&lt;char32_t&gt;\n                ^\n In file included from C:\\test\\Source.cpp:3:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\iostream:6:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\istream:6:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n  LUDE\\ostream:6:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\ios:6:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\xlocnum:10:\nIn file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\streambuf:6:\nIn file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\xiosbase:6:\nIn file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\xlocale:8:\nIn file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\stdexcept:7:\nIn file included from C:\\Program Files (x86)\\Microsoft Visual Studio  14.0\\VC\\INC\nLUDE\\xstring:6:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\xmemory0:8:\n C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE\\limits(611,33) :\n  error:\n  use of undeclared identifier 'char16_t'\n template&lt;&gt; class numeric_limits&lt;char16_t&gt;\n                            ^\n C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE\\limits(901,33) :\n  error:\n  use of undeclared identifier 'char32_t'\n template&lt;&gt; class numeric_limits&lt;char32_t&gt;\n                            ^\n In file included from C:\\test\\Source.cpp:3:\nIn file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n  LUDE\\iostream:6:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\istream:6:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\ostream:6:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\ios:6:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\xlocnum:10:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\streambuf:6:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\xiosbase:6:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\xlocale:8:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\stdexcept:7:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\xstring:6:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\xmemory0:10:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\xutility:8:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\utility:7:\n C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE\\iosfwd(267,21) :\n  error:\n  use of undeclared identifier 'char16_t'\n    struct char_traits&lt;char16_t&gt;\n                       ^\n  C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE\\iosfwd(276,21) :\n   error:\n   use of undeclared identifier 'char32_t'\n    struct char_traits&lt;char32_t&gt;\n                       ^\n In file included from C:\\test\\Source.cpp:3:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\iostream:6:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n  LUDE\\istream:6:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n  LUDE\\ostream:6:\n  In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\ios:6:\n  In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\nLUDE\\xlocnum:10:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\streambuf:6:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\xiosbase:6:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\xlocale:8:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\stdexcept:7:\n C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE\\xstring(2623,22)\n  :  error:\n  use of undeclared identifier 'char16_t'\n typedef basic_string&lt;char16_t, char_traits&lt;char16_t&gt;, allocator&lt;char16_t&gt; &gt;\n                 ^\n  C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE\\xstring(2623,53)\n  :  error:\n  expected unqualified-id\n typedef basic_string&lt;char16_t, char_traits&lt;char16_t&gt;, allocator&lt;char16_t&gt; &gt;\n                                                ^\n C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE\\xstring(2625,22)\n :  error:\n  use of undeclared identifier 'char32_t'\ntypedef basic_string&lt;char32_t, char_traits&lt;char32_t&gt;, allocator&lt;char32_t&gt; &gt;\n                 ^\nC:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE\\xstring(2625,53)\n :  error:\n  expected unqualified-id\n typedef basic_string&lt;char32_t, char_traits&lt;char32_t&gt;, allocator&lt;char32_t&gt; &gt;\n                                                ^\nIn file included from C:\\test\\Source.cpp:3:\nIn file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\nLUDE\\iostream:6:\nIn file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\istream:6:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\ostream:6:\n  In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\ios:6:\n  In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\xlocnum:10:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\streambuf:6:\n In file included from C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INC\n LUDE\\xiosbase:6:\n  C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE\\xlocale(1004,30)\n  :  error:\n  use of undeclared identifier 'char16_t'\n    class _CRTIMP2_PURE codecvt&lt;char16_t, char, _Mbstatet&gt;\n                                ^\n  C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE\\xlocale(1328,30)\n :  error:\n  use of undeclared identifier 'char32_t'\n    class _CRTIMP2_PURE codecvt&lt;char32_t, char, _Mbstatet&gt;\n                                ^\n 14 errors generated.\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "c++11", "private-members"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1451483856, "post_id": 34530905, "comment_id": 56803099, "body": "I would be quite surprised if you got the second case to compile in VS2010 as <a href=\"http://en.cppreference.com/w/cpp/language/auto\" rel=\"nofollow noreferrer\"><code>auto</code></a> was introduced in C++11 which is (mostly sorta) supported starting as of VS2013."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1451483898, "post_id": 34530905, "comment_id": 56803124, "body": "Confirmed behaviour with gcc 5.2 <a href=\"http://coliru.stacked-crooked.com/a/db691f65c9c806d0\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/db691f65c9c806d0</a>"}, {"owner": {"reputation": 545, "user_id": 760365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a609e2719e17ddaf2ae99133b1447b7?s=128&d=identicon&r=PG&f=1", "display_name": "Pravar Jawalekar", "link": "https://stackoverflow.com/users/760365/pravar-jawalekar"}, "edited": false, "score": 0, "creation_date": 1451484055, "post_id": 34530905, "comment_id": 56803224, "body": "I confirmed this behaviour with C++14 compiler. Here is code link, <a href=\"https://ideone.com/ef7HMO\" rel=\"nofollow noreferrer\">ideone.com/ef7HMO</a> (call to DoSomething() is successful)"}, {"owner": {"reputation": 545, "user_id": 760365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a609e2719e17ddaf2ae99133b1447b7?s=128&d=identicon&r=PG&f=1", "display_name": "Pravar Jawalekar", "link": "https://stackoverflow.com/users/760365/pravar-jawalekar"}, "edited": false, "score": 0, "creation_date": 1451484148, "post_id": 34530905, "comment_id": 56803280, "body": "This link explains a few things about this behavior <a href=\"http://stackoverflow.com/questions/13532784/why-can-i-use-auto-on-a-private-type\" title=\"why can i use auto on a private type\">stackoverflow.com/questions/13532784/&hellip;</a>"}, {"owner": {"reputation": 17, "user_id": 4409207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/124c68263c1ac6bd172a653d17b0078a?s=128&d=identicon&r=PG&f=1", "display_name": "AlphaP8", "link": "https://stackoverflow.com/users/4409207/alphap8"}, "edited": false, "score": 0, "creation_date": 1451485696, "post_id": 34530905, "comment_id": 56804103, "body": "It does compile in Visual Studio 2010, because, although it is prior to C++11, VS2010 included the &#39;auto&#39; keyword along with other C++0x features (as it was called prior to C++11) . See here: <a href=\"https://visualstudiomagazine.com/Articles/2010/04/01/The-Evolution-of-Visual-C-in-Visual-Studio-2010.aspx\" rel=\"nofollow noreferrer\">visualstudiomagazine.com/Articles/2010/04/01/&hellip;</a>"}], "owner": {"reputation": 17, "user_id": 4409207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/124c68263c1ac6bd172a653d17b0078a?s=128&d=identicon&r=PG&f=1", "display_name": "AlphaP8", "link": "https://stackoverflow.com/users/4409207/alphap8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "closed_date": 1451483952, "answer_count": 0, "score": 0, "last_activity_date": 1451488229, "creation_date": 1451483604, "last_edit_date": 1451488229, "question_id": 34530905, "link": "https://stackoverflow.com/questions/34530905/private-nested-classes-c11-compiler-misbehavior-or-as-designed", "closed_reason": "Duplicate", "title": "Private nested classes - C++11 compiler misbehavior? Or as designed?", "body": "<p>Consider the following code:</p>\n\n<pre><code>class Main\n{\n  private:\n      class Inner\n      {\n        public:\n          void DoSomething() {}\n      };\n\n  public:\n    static Inner* CreateInner() { return new Inner(); }\n };\n</code></pre>\n\n<p>It is impossible to compile the following:</p>\n\n<pre><code>Main::Inner* pInner = Main::CreateInner();\npInner-&gt;DoSomething();\n</code></pre>\n\n<p>Because we'll get a compiler error 'C2248: cannot access private class decalred in class Main'</p>\n\n<p>However, using the following syntax <b>will compile</b> and execute smoothly:</p>\n\n<pre><code>auto pInner = Main::CreateInner();\npInner-&gt;DoSomething();\n</code></pre>\n\n<p>Suddenly, (to my surprise, anyway...), the inner private class is 'visible' to the outside world...</p>\n\n<p>Does anyone aware to this compiler behavior?\nIs it considered 'valid' to use the auto keyword according to the C++11 standard in this case, or is it some kind of a bug?</p>\n\n<p>It behaves as described on both:</p>\n\n<ol>\n<li>Visual Studio 2010 - platform toolset v100\n<li>Visual Studio 2013 - platform toolset v120\n</ol>\n\n<p>Any thoughts?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "casting", "initialization", "default-arguments"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1451483189, "post_id": 34530748, "comment_id": 56802759, "body": "What exactly do you expect casting from <code>0</code> to a <code>MyStruct</code> to do? Initialize all the members to <code>0</code>? What if the argument was passed in as <code>5</code>? From what I gather (including you specifying sizes of members), I think you&#39;d be better off using a <a href=\"http://en.cppreference.com/w/cpp/utility/bitset/bitset\" rel=\"nofollow noreferrer\"><code>std::bitset</code></a>."}], "answers": [{"tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 1, "last_activity_date": 1451483376, "creation_date": 1451483376, "answer_id": 34530834, "question_id": 34530748, "link": "https://stackoverflow.com/questions/34530748/how-can-i-pass-a-default-argument-of-other-type-to-a-parameter/34530834#34530834", "title": "How can I pass a default argument of other type to a parameter?", "body": "<p>Just add a conversion constructor to your <code>MyStruct</code>:</p>\n\n<pre><code>struct MyStruct\n{\n  unsigned int X : 2;\n  unsigned int Y : 2;\n  unsigned int Spare : 28;\n  MyStruct(int n) : X(n&amp;3), Y(n&amp;12), Spare(0) {}\n};\n</code></pre>\n\n<p>It's implementation depends on your semantics, but you get the technical point. Enclosing your struct in an union could be a good solution too if you want to make it convertible from/to an <code>int</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 7, "last_activity_date": 1451484792, "last_edit_date": 1451484792, "creation_date": 1451483487, "answer_id": 34530870, "question_id": 34530748, "link": "https://stackoverflow.com/questions/34530748/how-can-i-pass-a-default-argument-of-other-type-to-a-parameter/34530870#34530870", "title": "How can I pass a default argument of other type to a parameter?", "body": "<p>You can default-initialise PODs, so:</p>\n\n<pre><code>void MyFunc (int x, MyStruct myStruct = MyStruct());\n</code></pre>\n\n<p>I guess you're trying to use <code>0</code> because, as well as being an integer, that's a null pointer constant. But you're not using pointers here. The use of <code>0</code> is the wrong approach.</p>\n"}], "owner": {"reputation": 407, "user_id": 2406262, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ad6b994c9344226cd0c12d143249100f?s=128&d=identicon&r=PG", "display_name": "Bak Itzik", "link": "https://stackoverflow.com/users/2406262/bak-itzik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1451484792, "creation_date": 1451483054, "last_edit_date": 1592644375, "question_id": 34530748, "link": "https://stackoverflow.com/questions/34530748/how-can-i-pass-a-default-argument-of-other-type-to-a-parameter", "title": "How can I pass a default argument of other type to a parameter?", "body": "<p>Lets say I have this prog.cc file:</p>\n<pre><code>struct MyStruct\n{\n  unsigned int X : 2;\n  unsigned int Y : 2;\n  unsigned int Spare : 28;\n};\n\nvoid MyFunc (int x, MyStruct myStruct = 0);\n\n\nint main ()\n{\n    MyStruct myStr;\n    myStr.X = 1;\n    myStr.Y = 0;\n    MyFunc(6);\n}\n\nvoid MyFunc (int x, MyStruct myStruct)\n{\n    x += 10;\n}\n</code></pre>\n<p>When compiled with GCC 4.4.7, I got this error:</p>\n<blockquote>\n<p>prog.cc:7: error: default argument for 'MyStruct myStruct' has type 'int'</p>\n</blockquote>\n<p>Now, I understand the error, but still - how can I resolve this?\nI know I need somehow to cast from <code>int</code> to <code>MyStruct</code>, but both</p>\n<pre><code>MyStruct myStruct = (MyStruct)0\n</code></pre>\n<p>and</p>\n<pre><code>MyStruct myStruct = static_cast&lt;MyStruct&gt;0\n</code></pre>\n<p>has failed with:</p>\n<blockquote>\n<p>prog.cc:7: error: no matching function for call to 'MyStruct::MyStruct(int)'</p>\n<p>prog.cc:1: note: candidates are: MyStruct::MyStruct()</p>\n<p>prog.cc:1: note:                 MyStruct::MyStruct(const MyStruct&amp;)</p>\n</blockquote>\n<p>How can I simply initialize my user-defined struct, passed as default argument on function parameter?</p>\n<p>(Here is the sample code:\n<a href=\"http://melpon.org/wandbox/permlink/izWCnBXl9PGnmm0l\" rel=\"nofollow noreferrer\">http://melpon.org/wandbox/permlink/izWCnBXl9PGnmm0l</a>)</p>\n"}, {"tags": ["c++", "winapi", "casting", "size-t"], "comments": [{"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1451483177, "post_id": 34530671, "comment_id": 56802751, "body": "Yes, C++ is case-sensitive, so <code>SIZE_T</code> is at least as a symbol not the same as <code>size_t</code>. What the right solution is depends really on what your <code>SIZE_T</code> is defined as. Show us what <code>SIZE_T</code> is."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1451483719, "post_id": 34530671, "comment_id": 56803012, "body": "&quot;How to cast?&quot; is the wrong question, use the correct types instead."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1451483841, "post_id": 34530671, "comment_id": 56803083, "body": "@UlrichEckhardt: I take it you have never had to program in an environment that uses one type, and have to pass it to something else that requires a different type. Yes, it would be possible to do <code>size_t temp = my_SIZE_T_var; ... my_SIZE_T_var = temp;</code>, but I think that&#39;s just as unportable and more work than using a cast."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1451484213, "post_id": 34530671, "comment_id": 56803320, "body": "Picking the correct type is the first thing to do, converting should always be considered a workaround. Up to now, I haven&#39;t seen any indication that this can&#39;t be performed without any conversion. Also, @Mats, rest assured that I have worked in such mixed environments, between standard C++ and win32 API even, so I know what I&#39;m talking about."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1451500142, "post_id": 34530671, "comment_id": 56811789, "body": "This question could be improved by giving a concrete example of where you&#39;re forced into using mismatching types.  Where are you getting the <code>std::size_t</code> and what API are you trying to call?  Do you actually need pointers or are you just getting tangled up trying to convert a <code>std::size_t</code> to a <code>SIZE_T</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1451483637, "post_id": 34530892, "comment_id": 56802963, "body": "There&#39;s no such thing as &quot;x86-32&quot;."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1451483846, "post_id": 34530892, "comment_id": 56803090, "body": "There&#39;s the option of doing it right and not casting at all."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1451483865, "post_id": 34530892, "comment_id": 56803102, "body": "@ixSci: If you&#39;ve invented it then you should define it, or stick to already-accepted terminology."}, {"owner": {"reputation": 10552, "user_id": 643393, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a2cb19c975ede804712de8fcc0435f6e?s=128&d=identicon&r=PG", "display_name": "ixSci", "link": "https://stackoverflow.com/users/643393/ixsci"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1451484113, "post_id": 34530892, "comment_id": 56803259, "body": "@UlrichEckhardt, what if the author has different parts of his program, one is Windows specific and the other is not? He has to use SIZE_T because of the API and it is proper to use size_t on the crossplatform part. So you can&#39;t use one type everywhere."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1451484291, "post_id": 34530892, "comment_id": 56803367, "body": "@ixSci: You&#39;re naming an architecture that doesn&#39;t exist. It is impossible to unambiguously interpret what you&#39;ve written."}, {"owner": {"reputation": 10552, "user_id": 643393, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a2cb19c975ede804712de8fcc0435f6e?s=128&d=identicon&r=PG", "display_name": "ixSci", "link": "https://stackoverflow.com/users/643393/ixsci"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1451484333, "post_id": 34530892, "comment_id": 56803389, "body": "@LightnessRacesinOrbit, well since it seems so &quot;important&quot;, I&#39;ve changed it."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1451484524, "post_id": 34530892, "comment_id": 56803495, "body": "I&#39;m aware that such glue code may be impossible to write cleanly, @ixSci. However, writing it cleanly should be the goal and not applying casts to shut up the compiler."}], "tags": [], "owner": {"reputation": 10552, "user_id": 643393, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a2cb19c975ede804712de8fcc0435f6e?s=128&d=identicon&r=PG", "display_name": "ixSci", "link": "https://stackoverflow.com/users/643393/ixsci"}, "is_accepted": false, "score": 0, "last_activity_date": 1451484453, "last_edit_date": 1451484453, "creation_date": 1451483574, "answer_id": 34530892, "question_id": 34530671, "link": "https://stackoverflow.com/questions/34530671/cannot-convert-parameter-from-size-t-to-size-t-how-to-cast/34530892#34530892", "title": "cannot convert parameter from &#39;SIZE_T *&#39; to &#39;size_t *&#39; - how to cast?", "body": "<p>They are the same types on x86-64, but on x86(32 bits) they are not. <code>SIZE_T</code> is <code>unsigned long</code> and <code>size_t</code> is <code>unsigned int</code> on x86 so you have to use either <code>reinterpret_cast</code> or C-style cast: <code>(SIZE_T*)&amp;my_size_t_var</code>.\nAlternatively you can switch to x86-64. I'm afraid these are the only options you have in this case.</p>\n"}, {"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1451510326, "post_id": 34530933, "comment_id": 56816822, "body": "The types cannot be automatically converted due to different signed-ness, not different sizes. <code>size_t</code> and <code>SIZE_T</code> are the same size on Windows; the <code>static_assert</code> - while not wrong - doesn&#39;t really buy you anything either."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1451510507, "post_id": 34530933, "comment_id": 56816910, "body": "It does show that they are not different size - and one may assume that a <code>size_t</code> isn&#39;t validly going to be a negative value (I hope!)"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1451512259, "post_id": 34530933, "comment_id": 56817679, "body": "Seems to me that if <code>size_t</code> and <code>SIZE_T</code> are different sizes, something is <i>very</i> wrong with your build environment.  (But OK, it doesn&#39;t hurt to be paranoid.)"}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 2, "last_activity_date": 1451484316, "last_edit_date": 1451484316, "creation_date": 1451483711, "answer_id": 34530933, "question_id": 34530671, "link": "https://stackoverflow.com/questions/34530671/cannot-convert-parameter-from-size-t-to-size-t-how-to-cast/34530933#34530933", "title": "cannot convert parameter from &#39;SIZE_T *&#39; to &#39;size_t *&#39; - how to cast?", "body": "<p>I would do this:</p>\n\n<pre><code>static_assert(sizeof(size_t) == sizeof(SIZE_T), \"Expect size_t to be same size as SIZE_T\");\n</code></pre>\n\n<p>somewhere near your <code>reinterpret_cast&lt;SIZE_T*&gt;(&amp;my_size_t_var)</code>. </p>\n\n<p>This will ensure that they are compatible in size, which is the key point.</p>\n"}], "owner": {"reputation": 5805, "user_id": 552510, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6d2b3012b1fb808ce61d8f1366e75c1c?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/552510/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1173, "favorite_count": 0, "accepted_answer_id": 34530933, "answer_count": 2, "score": 0, "last_activity_date": 1451563679, "creation_date": 1451482783, "last_edit_date": 1495542185, "question_id": 34530671, "link": "https://stackoverflow.com/questions/34530671/cannot-convert-parameter-from-size-t-to-size-t-how-to-cast", "title": "cannot convert parameter from &#39;SIZE_T *&#39; to &#39;size_t *&#39; - how to cast?", "body": "<p>On some Windows API call, I get: <code>cannot convert argument 6 from 'size_t *' to 'SIZE_T *'</code>.</p>\n\n<p><a href=\"https://stackoverflow.com/a/5215243/552510\">This answer</a> tells me that <code>SIZE_T</code> and <code>std::size_t</code> are different types. I know that both describe the same thing, just by different SDKs (C compiler vs. Windows SDK), so I want to cast</p>\n\n<pre><code>reinterpret_cast&lt;SIZE_T *&gt;(&amp;my_size_t_var)`\n</code></pre>\n\n<p>Is there a less-ugly way to do it?</p>\n\n<p><strong>Edit:</strong> <code>SIZE_T</code> is (when compiling for 64-bit targets, at least):</p>\n\n<pre><code>typedef ULONG_PTR SIZE_T, *PSIZE_T; \ntypedef unsigned __int64 ULONG_PTR, *PULONG_PTR; \n</code></pre>\n\n<p><strong>Edit2:</strong> I'm using Win32 compressions API, specifically <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/hh437548(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>Compress</code></a>, which has a parameter <code>_In_  SIZE_T UncompressedDataSize</code>, which I want to call with some <code>std::vector&lt;byte&gt;.size()</code>.</p>\n"}, {"tags": ["c++", "arrays", "class", "pointers", "segmentation-fault"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1451482662, "post_id": 34530612, "comment_id": 56802474, "body": "Are you opposed to <code>std::vector&lt;creature*&gt;</code>? It will make your life a lot easier."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 3, "creation_date": 1451482700, "post_id": 34530612, "comment_id": 56802498, "body": "@CoryKramer: Ew, why storage of raw pointers??"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1451482745, "post_id": 34530612, "comment_id": 56802528, "body": "@LightnessRacesinOrbit Okay fine, even better would be <code>std::vector&lt;std::unique_ptr&lt;creature&gt;&gt;</code>. Baby steps :)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1451482767, "post_id": 34530612, "comment_id": 56802540, "body": "@CoryKramer: Let&#39;s not give the super-sharp axe to a baby, eh? :)"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1451483920, "post_id": 34530612, "comment_id": 56803139, "body": "@LightnessRacesinOrbit surely a raw pointer is the sharpest axe in the toolshed? Used only for the very hardest trees?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1451484320, "post_id": 34530612, "comment_id": 56803380, "body": "Post a complete buildable runnable program."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1451484503, "post_id": 34530612, "comment_id": 56803480, "body": "You also forgot to define a virtual destructor in <code>creature</code>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1451484627, "post_id": 34530612, "comment_id": 56803544, "body": "@RichardHodges: Yes, exactly."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1451485172, "post_id": 34530612, "comment_id": 56803831, "body": "Eh, why any ptr? std::vector&lt;creature&gt; is the way to do it. Since there is no virtual destructor in creature, there is no need for the pointer."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1451488354, "post_id": 34530612, "comment_id": 56805503, "body": "@SergeyA You&#39;ll notice they say <code>new good_creature</code> and <code>new bad_creature</code> later in the code. They&#39;ll <a href=\"https://stackoverflow.com/questions/274626/what-is-object-slicing\">slice</a> if they store them that way."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1451488446, "post_id": 34530612, "comment_id": 56805554, "body": "@CoryKramer, and they will have a memory leak if they store it as a pointer to base..."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1451488491, "post_id": 34530612, "comment_id": 56805585, "body": "@SergeyA Not if they use <code>std::unique_ptr</code> and the base class has a <code>virtual</code> destructor."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1451488664, "post_id": 34530612, "comment_id": 56805672, "body": "@CoryKramer, but there is none. I am talking about the code as written."}], "answers": [{"tags": [], "owner": {"reputation": 545, "user_id": 760365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a609e2719e17ddaf2ae99133b1447b7?s=128&d=identicon&r=PG&f=1", "display_name": "Pravar Jawalekar", "link": "https://stackoverflow.com/users/760365/pravar-jawalekar"}, "is_accepted": false, "score": 0, "last_activity_date": 1451483606, "creation_date": 1451483606, "answer_id": 34530906, "question_id": 34530612, "link": "https://stackoverflow.com/questions/34530612/making-an-array-of-pointer-to-classes/34530906#34530906", "title": "Making an array of pointer to classes", "body": "<p>I think you can simply do,</p>\n\n<pre><code>for (int j=0 ; j &lt; N; ++j)\n{\n   temp = cs1.get_A()[j]-&gt;get_crt_name();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 328, "user_id": 4768463, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/02e9b7b066da2e7d2373ea09fcb63e33?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv", "link": "https://stackoverflow.com/users/4768463/aviv"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1451484713, "post_id": 34531084, "comment_id": 56803587, "body": "@CoryKramer I will edit my answer accordingly, though I really hate to encounter classes definitions starting with lowercase letters.. (unless they are from std of course)"}, {"owner": {"reputation": 147, "user_id": 5647546, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1062202783812089/picture?type=large", "display_name": "Social Programmer", "link": "https://stackoverflow.com/users/5647546/social-programmer"}, "edited": false, "score": 0, "creation_date": 1451504744, "post_id": 34531084, "comment_id": 56814011, "body": "I encounter a weird problem guys ,"}, {"owner": {"reputation": 328, "user_id": 4768463, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/02e9b7b066da2e7d2373ea09fcb63e33?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv", "link": "https://stackoverflow.com/users/4768463/aviv"}, "reply_to_user": {"reputation": 147, "user_id": 5647546, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1062202783812089/picture?type=large", "display_name": "Social Programmer", "link": "https://stackoverflow.com/users/5647546/social-programmer"}, "edited": false, "score": 0, "creation_date": 1451516278, "post_id": 34531084, "comment_id": 56819331, "body": "@Social Programmer well, can&#39;t help if you don&#39;t write them down"}], "tags": [], "owner": {"reputation": 328, "user_id": 4768463, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/02e9b7b066da2e7d2373ea09fcb63e33?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv", "link": "https://stackoverflow.com/users/4768463/aviv"}, "is_accepted": false, "score": 0, "last_activity_date": 1451484789, "last_edit_date": 1451484789, "creation_date": 1451484311, "answer_id": 34531084, "question_id": 34530612, "link": "https://stackoverflow.com/questions/34530612/making-an-array-of-pointer-to-classes/34531084#34531084", "title": "Making an array of pointer to classes", "body": "<p>You don't mention here the classes of <code>bad_creature</code> and <code>good_creature</code>.\nI assume they inherit creature as a base a class and therefore you should define <code>get_crt_name</code> as a virtual function.</p>\n\n<p>Maybe something went wrong with your <code>get_unique_name</code> function as well.\nI executed your code in VC2015 and no faulty was found (I replaced ofcourse <code>good creature</code> and <code>bad creature</code> classes with <code>creature</code> and that I replaced <code>get_unique_name</code> with a const string).</p>\n\n<p>Please:</p>\n\n<p>1.Check with your core dump where did your program crash.\n2.What output it emitted before the segmentation fault.</p>\n\n<p>For future, class names should always begin with uppercase letters as it is a very common style convention.</p>\n"}], "owner": {"reputation": 147, "user_id": 5647546, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1062202783812089/picture?type=large", "display_name": "Social Programmer", "link": "https://stackoverflow.com/users/5647546/social-programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1451484789, "creation_date": 1451482583, "question_id": 34530612, "link": "https://stackoverflow.com/questions/34530612/making-an-array-of-pointer-to-classes", "title": "Making an array of pointer to classes", "body": "<p>I am trying to make an Array which will contain pointer to a class.\nThe size of the array will be given from keyboard , so i tried to create the array with the following way :</p>\n\n<pre><code> class creature\n {\n    protected:\n      string crt_name ;\n      int L ;   \n    public:\n       creature( int Life = -1 , string Name = \"\")\n        : L(Life) , crt_name(Name){} \n\n       string get_crt_name ( void )\n       { \n          return crt_name ;\n       }\n }; \n\n class creature_society\n {\n    private:\n       creature* *A ;\n       int noc ;\n    public:\n       creature_society( int , int ) ;\n       ~creature_society() ;\n       creature** get_A ( void ){return A ;}\n };\n</code></pre>\n\n<p>The constructor of creature society will fill the array with creatures made randomly</p>\n\n<pre><code>creature_society::creature_society( int life , int number_of_creatures )\n{\n   noc =  number_of_creatures ;\n   A = new creature*[noc] ;\n\n   creature* temporary ;\n\n   for( int  i = 0 ; i&lt;= number_of_creatures -1 ; i++)\n   {\n     if ( rand()%100 &lt;= 50) \n        {\n            temporary = new good_creature( life , get_unique_name( 3 ) );\n            A[i] = temporary ;\n        }\n        else\n        {\n            temporary = new bad_creature( life , get_unique_name( 3 ) );\n            A[i] = temporary ;\n        }\n  }\n}\n</code></pre>\n\n<p>Then I try to print the array</p>\n\n<pre><code>    cout &lt;&lt; endl &lt;&lt; \"Printing Society:\" &lt;&lt; endl ;\n    for ( j = 0 ; j &lt;= N -1 ; j++)\n    {\n       temp = (*( cs1.get_A() + j ))-&gt;get_crt_name() ;\n    }\n</code></pre>\n\n<p>The problem is that when i am getting segmentation faults when running on linux , while working fine on Dev C++  ( most of the time )!\nAny mistakes you pointed out ?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 3, "creation_date": 1451483002, "post_id": 34530576, "comment_id": 56802651, "body": "What if you have two versions of the icon and set the grayed one along with disabling the label?"}, {"owner": {"reputation": 1356, "user_id": 1643114, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bbb8f29233139e416dbc06fc17438c29?s=128&d=identicon&r=PG", "display_name": "MokaT", "link": "https://stackoverflow.com/users/1643114/mokat"}, "edited": false, "score": 0, "creation_date": 1451483662, "post_id": 34530576, "comment_id": 56802974, "body": "Yhea, I don&#39;t think you can and vahancho id&#233;e is the best workaround here."}, {"owner": {"reputation": 21, "user_id": 4284335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d11232f2fe8e483392f27749a7a7b4?s=128&d=identicon&r=PG&f=1", "display_name": "willard", "link": "https://stackoverflow.com/users/4284335/willard"}, "edited": false, "score": 0, "creation_date": 1451485867, "post_id": 34530576, "comment_id": 56804192, "body": "Changing the image does work, though I had hoped for a generic solution. Added an edit to the question."}, {"owner": {"reputation": 5161, "user_id": 3065406, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6697e5c2ff5cfdf8f196fe42a309598?s=128&d=identicon&r=PG", "display_name": "deW1", "link": "https://stackoverflow.com/users/3065406/dew1"}, "edited": false, "score": 0, "creation_date": 1451489318, "post_id": 34530576, "comment_id": 56805986, "body": "Overlay the whole thing with a rectangle and set the background-color with the rgba opacity"}, {"owner": {"reputation": 1076, "user_id": 1888160, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c5609133091f0f0ebedfc01deedd56d8?s=128&d=identicon&r=PG", "display_name": "KFox", "link": "https://stackoverflow.com/users/1888160/kfox"}, "edited": false, "score": 0, "creation_date": 1453039900, "post_id": 34530576, "comment_id": 57419246, "body": "Are you able to use two QLabels, one with an image loaded and one with the accompanying text? You could then use setPixmap and have a QImage that is <a href=\"http://stackoverflow.com/questions/27949569/convert-a-qimage-to-grayscale\">greyed out by your program at runtime</a> for whatever images you need. The other QLabel could be greyed out using the normal setEnabled(false);"}, {"owner": {"reputation": 21, "user_id": 4284335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d11232f2fe8e483392f27749a7a7b4?s=128&d=identicon&r=PG&f=1", "display_name": "willard", "link": "https://stackoverflow.com/users/4284335/willard"}, "edited": false, "score": 0, "creation_date": 1453131477, "post_id": 34530576, "comment_id": 57456333, "body": "Eventually I ended up doing exactly that. Back when I asked the question I wanted to avoid that, because I wanted the layout of the picture/text mixture to be managed by Qt automagically. Think about a long text with occasional icons inbetween. Getting a correct layout with line breaks, etc affords some extra work, but it&#39;s what I&#39;m doing now."}], "owner": {"reputation": 21, "user_id": 4284335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d11232f2fe8e483392f27749a7a7b4?s=128&d=identicon&r=PG&f=1", "display_name": "willard", "link": "https://stackoverflow.com/users/4284335/willard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 369, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1451502821, "creation_date": 1451482403, "last_edit_date": 1495540321, "question_id": 34530576, "link": "https://stackoverflow.com/questions/34530576/gray-out-an-image-in-rich-text", "title": "Gray out an image in rich text", "body": "<p>In Qt you can use rich text in QLabels:</p>\n\n<pre><code>QLabel* label = new QLabel(\"&lt;img src=C:/img.png&gt; In front of this text, theres an image\");\nlabel-&gt;show();\n</code></pre>\n\n<p>As expected, drawing the QLabel will show the image in front of the text.</p>\n\n<p>Now I would like to gray out the image + text.\nNormally in Qt this is rather easy, because all you have to do is disable the widget:</p>\n\n<pre><code>label-&gt;setEnabled(false);\n</code></pre>\n\n<p>The problem now is that only the text gets grayed out by disabling, the image stays the same.</p>\n\n<p>How to gray out an image included in a rich text?</p>\n\n<hr>\n\n<p>EDIT to answer to comments below:</p>\n\n<p>Exchanging the image with another gray version of it does work, though I had hoped for a generic solution.\nTaken from <a href=\"https://stackoverflow.com/questions/286275/gray-out-image-with-css\">link</a>:</p>\n\n<pre><code>&lt;style&gt;\n#color\n{\n   background-color: red;\n}\n#grayscale1\n{\n   filter: grayscale(100%);\n}\n#grayscale2\n{\n   opacity: 0.4;\n   filter: alpha(opacity=40);\n}\n&lt;/style&gt;\n\n&lt;div id=\"color\"&gt;\n  &lt;div id=\"grayscale1\"&gt;\n    &lt;img src=\"C:/img.png\" /&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The red background color works (just as a test).\nThe grayscale1/grayscale2 dont. :(</p>\n"}, {"tags": ["c++", "opencv", "image-processing"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1451485144, "post_id": 34530290, "comment_id": 56803809, "body": "Check <a href=\"http://stackoverflow.com/a/33068453/5008845\">this</a>"}, {"owner": {"reputation": 14828, "user_id": 1377097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFG0R.png?s=128&g=1", "display_name": "beaker", "link": "https://stackoverflow.com/users/1377097/beaker"}, "edited": false, "score": 0, "creation_date": 1451495047, "post_id": 34530290, "comment_id": 56809179, "body": "Are you applying Prewitt to the RGB image <code>src</code>?"}, {"owner": {"reputation": 23, "user_id": 2251987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c5e06a8332eb45638a210ccc79724f?s=128&d=identicon&r=PG", "display_name": "Azurium", "link": "https://stackoverflow.com/users/2251987/azurium"}, "reply_to_user": {"reputation": 14828, "user_id": 1377097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFG0R.png?s=128&g=1", "display_name": "beaker", "link": "https://stackoverflow.com/users/1377097/beaker"}, "edited": false, "score": 0, "creation_date": 1451522904, "post_id": 34530290, "comment_id": 56821218, "body": "Miki, that code is so weird! This initialization method especially is... weird: kernel = (Mat1s(3, 3) &lt;&lt; -1, -2, -1, 0, 0, 0, +1, +2, +1); @beaker: Haha! Thanks for the heads up, I totally missed that part. I modified a bit of the code and I think it kinda works now. On of the problems was that at the end of the loop I never re-initialized tempPixel to 0 so its value kept growing. This is the code at the end of the loop now:  magTempPixel = sqrt(xtempPixel*xtempPixel + ytempPixel *ytempPixel); HprewittMat.at&lt;Vec3b&gt;(j, i)[0] = magTempPixel;  Should I answer my own question with the solution?"}, {"owner": {"reputation": 14828, "user_id": 1377097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFG0R.png?s=128&g=1", "display_name": "beaker", "link": "https://stackoverflow.com/users/1377097/beaker"}, "edited": false, "score": 0, "creation_date": 1451523722, "post_id": 34530290, "comment_id": 56821429, "body": "Sure, if your code is working now, go ahead and answer."}], "owner": {"reputation": 23, "user_id": 2251987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c5e06a8332eb45638a210ccc79724f?s=128&d=identicon&r=PG", "display_name": "Azurium", "link": "https://stackoverflow.com/users/2251987/azurium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2844, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1451481280, "creation_date": 1451481280, "question_id": 34530290, "link": "https://stackoverflow.com/questions/34530290/opencv-prewitt-from-scratch-weirdness", "title": "OpenCV Prewitt from scratch weirdness", "body": "<p>Because this is a project for an image processing class, I have to implement a couple of linear filters from scratch( I'm not supposed to use already implemented features of OpenCV like Sobel, not even the 2D filter function). The code is at the end of the question.</p>\n\n<p>Since images processed with the Sobel operator give similar results with the Prewitt ones, I used as a test a window where I display a Sobel-processed image.\nI only got to the point where I applied an operator on the horizontal direction, but I'm already getting weird results. Images speak for themselves:</p>\n\n<p>Original image:\n<a href=\"http://i.stack.imgur.com/yQuH3.png\" rel=\"nofollow\">Original image</a></p>\n\n<p>My result using the Prewitt operator on the horizontal direction:\n<a href=\"http://i.stack.imgur.com/LSOtw.jpg\" rel=\"nofollow\">My processed image</a></p>\n\n<p>I get a weird blue-beige pattern instead of a black-and-white horizontal lines. What is happening?</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#include \"opencv2/imgproc/imgproc.hpp\"\n#include \"opencv2/highgui/highgui.hpp\"\n#include \"opencv2/opencv.hpp\"\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\nusing namespace cv;\nusing namespace std;\nint main(int, char** argv)\n{\n\n\n    int Hprewitt[3][3] = { { -1, 0, 1 }, { -1, 0, 1 }, { -1, 0, 1 } };\n    int Vprewitt[3][3] = { { -1, -1, -1 }, { 0, 0, 0 }, { 1, 1, 1 } };\n    int tempInput[3][3];\n    int tempPixel=0;\n\n    Mat src, src_gray;\n    Mat grad;\n    const char* window_name = \"Sobel Edge Detector\";\n    const char* window_name2 = \"Prewitt\";\n    int scale = 1;\n    int delta = 0;\n    int ddepth = CV_16S;\n    int computedIntensity;\n    src = imread(argv[1]);\n    if (src.empty())\n    {\n        return -1;\n    }\n\n        namedWindow(window_name2, WINDOW_AUTOSIZE);\n        Mat HprewittMat(src.rows, src.cols, CV_8UC3, Scalar(0, 0, 0));\n        GaussianBlur(src, src, Size(3, 3), 0, 0, BORDER_DEFAULT);\n        cvtColor(src, src_gray, COLOR_RGB2GRAY);\n        namedWindow(window_name, WINDOW_AUTOSIZE);\n        Scalar intensity = src.at&lt;uchar&gt;(Point(50, 50)); // this is how to access intensity at a certain pixel\n        Vec3b scalarTempPixel = src.at&lt;Vec3b&gt;(Point(1, 1));\n\n        cout &lt;&lt; \"Pixel (50,50) has intensity: \" &lt;&lt; intensity.val[0] &lt;&lt; endl;\n\n\n        // applying horizontal prewitt operator\n        cout &lt;&lt; \"\\n Image has resolution: \" &lt;&lt; src.cols &lt;&lt; \"x\" &lt;&lt; src.rows &lt;&lt; \"\\n\";\n\n            for (int i = 2; i &lt; src.cols-1; i++){ // currently going from column 2 to n-2, same for row\n                for (int j = 2; j &lt; src.rows-1; j++){\n        // storing a temporary 3x3 input matrix centered on the current pixel\n                //  cout &lt;&lt; \"Matrix centered on pixel: [\" &lt;&lt; i &lt;&lt; \",\" &lt;&lt; j &lt;&lt; \"] \\n\";\n                    for (int k = -1; k &lt; 2; k++){\n                        for (int l = -1; l &lt; 2; l++){\n                            intensity = src.at&lt;uchar&gt;(Point(i + k, j + l));\n                            tempInput[k+1][l+1] = intensity.val[0];\n                        //  cout &lt;&lt; \"[\" &lt;&lt; intensity.val[0] &lt;&lt; \"]\";\n                        }\n                //      cout &lt;&lt; \" \\n\";\n                    }\n// convolution of horizontal prewitt kernel with current 3x3 matrix\n                    for (int x = 0; x &lt; 3; x++){\n                        for (int y = 0; y &lt; 3; y++){\n                            tempPixel = tempPixel + tempInput[x][y] * Hprewitt[x][y];\n                        }\n                    }\n\n                    scalarTempPixel[0] = tempPixel;\n                    HprewittMat.at&lt;Vec3b&gt;(Point(i, j)) = scalarTempPixel;\n                }\n            }\n\n\n        Mat grad_x, grad_y;\n        Mat abs_grad_x, abs_grad_y;\n        Sobel(src_gray, grad_x, ddepth, 1, 0, 3, scale, delta, BORDER_DEFAULT);\n        convertScaleAbs(grad_x, abs_grad_x);\n        Sobel(src_gray, grad_y, ddepth, 0, 1, 3, scale, delta, BORDER_DEFAULT);\n        convertScaleAbs(grad_y, abs_grad_y);\n        addWeighted(abs_grad_x, 0.5, abs_grad_y, 0.5, 0, grad);\n        imshow(window_name, grad);\n        imshow(window_name2, HprewittMat);\n\n        waitKey(0);\n        return 0;\n    }\n</code></pre>\n\n<p>So at this point I'm doing the following:\nI'm reading an image in \"src\", then I create the HprewittMat which I initialize it with the number of rows and cols of the original image, but with black pixels. I then convert the src image to a gray one. Then I iterate through each pixel of the original image, and for each pixel I'm doing a convolution mask with the the surrounding pixels and the horizontal prewitt kernel. Then I store that value in \"tempPixel\" and put it in the HprewittMat image.\nThe next step would be to do the same but with the vertical kernel, and then calculate the gradient kernel.</p>\n\n<p>I'm asking this question because I've found similar questions on how to manipulate individual pixels but usually for python or java. This might also be some flaw in the logic I'm using.</p>\n"}]