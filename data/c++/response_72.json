[{"tags": ["c++", "c++11", "vector", "lambda"], "comments": [{"owner": {"reputation": 2600, "user_id": 876438, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ee459f598ec33dfdb43468c0f48dde10?s=128&d=identicon&r=PG", "display_name": "Ravi Sankar Raju", "link": "https://stackoverflow.com/users/876438/ravi-sankar-raju"}, "edited": false, "score": 0, "creation_date": 1464220070, "post_id": 37449312, "comment_id": 62400435, "body": "what is the expected output and what is it that you get ? how much displacement are we talking about here ?"}, {"owner": {"reputation": 41, "user_id": 6261961, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lt3LCosS6qk/AAAAAAAAAAI/AAAAAAAAAFM/8UGo8tw-5nQ/photo.jpg?sz=128", "display_name": "JSalaun", "link": "https://stackoverflow.com/users/6261961/jsalaun"}, "reply_to_user": {"reputation": 2600, "user_id": 876438, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ee459f598ec33dfdb43468c0f48dde10?s=128&d=identicon&r=PG", "display_name": "Ravi Sankar Raju", "link": "https://stackoverflow.com/users/876438/ravi-sankar-raju"}, "edited": false, "score": 0, "creation_date": 1464221414, "post_id": 37449312, "comment_id": 62400778, "body": "Let&#39;s say i have a vector of size 100 composed by sets of data with a size 10 (so 10 sets). I wish to remove the 9th and 10th element of each set. But as you can see it removes the 10th and 11th then 10th and 22nd instead of 20th and 21st as I expected, I don&#39;t know what&#39;s happening here. <a href=\"http://imgur.com/TbVmLo4\" rel=\"nofollow noreferrer\">imgur.com/TbVmLo4</a>"}, {"owner": {"reputation": 2600, "user_id": 876438, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ee459f598ec33dfdb43468c0f48dde10?s=128&d=identicon&r=PG", "display_name": "Ravi Sankar Raju", "link": "https://stackoverflow.com/users/876438/ravi-sankar-raju"}, "edited": false, "score": 0, "creation_date": 1464221602, "post_id": 37449312, "comment_id": 62400815, "body": "And what happens instead ? What&#39;s the output that you print ?"}, {"owner": {"reputation": 41, "user_id": 6261961, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lt3LCosS6qk/AAAAAAAAAAI/AAAAAAAAAFM/8UGo8tw-5nQ/photo.jpg?sz=128", "display_name": "JSalaun", "link": "https://stackoverflow.com/users/6261961/jsalaun"}, "reply_to_user": {"reputation": 2600, "user_id": 876438, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ee459f598ec33dfdb43468c0f48dde10?s=128&d=identicon&r=PG", "display_name": "Ravi Sankar Raju", "link": "https://stackoverflow.com/users/876438/ravi-sankar-raju"}, "edited": false, "score": 0, "creation_date": 1464222170, "post_id": 37449312, "comment_id": 62400944, "body": "I print what&#39;s on the screenshot"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 6261961, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lt3LCosS6qk/AAAAAAAAAAI/AAAAAAAAAFM/8UGo8tw-5nQ/photo.jpg?sz=128", "display_name": "JSalaun", "link": "https://stackoverflow.com/users/6261961/jsalaun"}, "edited": false, "score": 0, "creation_date": 1464223403, "post_id": 37449756, "comment_id": 62401245, "body": "thanks a lot, i didn&#39;t expect the problem to be from the print function at all."}], "tags": [], "owner": {"reputation": 8173, "user_id": 3299580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5442c85b57162abfc606d86c0083e1d?s=128&d=identicon&r=PG&f=1", "display_name": "The Dark", "link": "https://stackoverflow.com/users/3299580/the-dark"}, "is_accepted": false, "score": 2, "last_activity_date": 1464222954, "creation_date": 1464222954, "answer_id": 37449756, "question_id": 37449312, "link": "https://stackoverflow.com/questions/37449312/removing-specific-chunks-from-stdvector-using-a-lambda-function/37449756#37449756", "title": "Removing specific chunks from std::vector using a lambda function", "body": "<p>The problem is in this line:</p>\n\n<pre><code>for(int i : v)std::cout &lt;&lt;v[i]&lt;&lt;\": \";\n</code></pre>\n\n<p>When this line runs, <code>i</code> is given the value of the <em>contents</em> of each element of the vector. You are treating this as an <em>index</em> into the vector, rather than the value.</p>\n\n<p>Instead use:</p>\n\n<pre><code>for(int i : v)\n   std::cout &lt;&lt;i&lt;&lt;\": \";\n</code></pre>\n\n<p>Note: you still won't get quite the output you are after, but this should give you enough to work that out for yourself.</p>\n"}], "owner": {"reputation": 41, "user_id": 6261961, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lt3LCosS6qk/AAAAAAAAAAI/AAAAAAAAAFM/8UGo8tw-5nQ/photo.jpg?sz=128", "display_name": "JSalaun", "link": "https://stackoverflow.com/users/6261961/jsalaun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1464277400, "creation_date": 1464219488, "last_edit_date": 1464277400, "question_id": 37449312, "link": "https://stackoverflow.com/questions/37449312/removing-specific-chunks-from-stdvector-using-a-lambda-function", "title": "Removing specific chunks from std::vector using a lambda function", "body": "<p>EDIT: Sorry, i didn't put any result. I expected to remove the (10th, 11th), then the (20th, 21st), then the (30th, 31st) and so forth but instead I get this <a href=\"http://imgur.com/TbVmLo4\" rel=\"nofollow\">http://imgur.com/TbVmLo4</a>  </p>\n\n<p>I have a vector composed by several vectors of the same size and i want to get rid of part of their end using <em>remove if</em> and a <em>lambda function</em> but there seems to be a displacement in the removal. Here is the code that I am running:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;numeric&gt;\n#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;cctype&gt;\n#include &lt;cmath&gt;\n#include &lt;typeinfo&gt;\n\n\nint main()\n{\n   int sizeOfSpectrum=10;\n   int desiredSizeOfSpectrum=8;\n   int count=-1;\n   std::vector&lt;int&gt; v(100);\n   std::iota (std::begin(v), std::end(v), 0);\n   auto newend=std::remove_if(v.begin(),v.end(),[&amp;](int i)-&gt;bool{\n                   count++;\n                   int temp=count%sizeOfSpectrum;\n                   bool test=(temp) &gt; desiredSizeOfSpectrum;\n                   return ( test);\n               });\n   v.erase(newend, v.end());\n   std::cout &lt;&lt; \"\\n\";\n   std::cout &lt;&lt; \"v[i]: \\n\";\n   for(int i : v)std::cout &lt;&lt;v[i]&lt;&lt;\": \";\n   std::cout &lt;&lt; \"\\n\";\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "c++11", "thread-safety"], "answers": [{"comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1464220666, "post_id": 37449329, "comment_id": 62400598, "body": "How could multiple threads alter <code>i</code> at the same time? The only function that can be legally called concurrently is <code>const_method</code>, and it acquires a lock. (Code that calls <code>non_const_method</code> concurrently wouldn&#39;t be thread safe, but there is no such code in the class.)"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1464221889, "post_id": 37449329, "comment_id": 62400871, "body": "@DavidSchwartz: &quot;<i>The only function that can be legally called concurrently is const_method,</i>&quot; And that&#39;s why the class is not thread safe. The point Herb is making is that <code>const</code> methods should always be thread safe. Non-const methods may or may not be thread safe, depending on the whims of the class implementer. Making <code>const</code> methods thread-safe doesn&#39;t mean that the entire type is thread-safe (unless the only uses of it use <code>const</code> methods)."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1464224261, "post_id": 37449329, "comment_id": 62401458, "body": "@NicolBolas It does mean the entire type is thread-safe, so long as no two non-const methods of the same instance of the class are called at the same time. But then it would be the code that called the two non-const methods at the same time that wasn&#39;t thread-safe, not the class. A class is thread safe if it provides predictable behavior when used in multi-threaded code that doesn&#39;t violate its interface contract. The usual interface contract is &quot;no concurrent accesses to non-const methods on the same instance&quot;. Every class does bad stuff if you violate its interface contract."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1464227269, "post_id": 37449329, "comment_id": 62402080, "body": "@DavidSchwartz: &quot;<i>A class is thread safe if it provides predictable behavior when used in multi-threaded code that doesn&#39;t violate its interface contract.</i>&quot; I don&#39;t think I&#39;ve ever heard that definition of &quot;thread-safe&quot; before. I&#39;m not sure it&#39;s a particularly useful definition, since it basically includes any class which actually has a contract that specifies threading behavior."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1464229337, "post_id": 37449329, "comment_id": 62402536, "body": "@NicolBolas It&#39;s just different words to express the same concept -- adjusted to highlight a relevant point often unstated. Even if you prefer &quot;code that only manipulates shared data structures in a manner that guarantees safe execution by multiple threads at the same time&quot;, it&#39;s still understood that that is only so long as its interface contract isn&#39;t violated. No class ever has to provide &quot;safe execution&quot; if its interface contract is violated, that&#39;s the point of interface contracts."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1464229761, "post_id": 37449329, "comment_id": 62402625, "body": "@DavidSchwartz IMHO a class that is thread safe needs no external synchronization on any of its mutable methods(<code>std::atomic</code> comes to mind).  This class is exactly like a <code>std::vector</code> where only the <code>const</code> member function is thread safe.  I think most people would agree that a <code>std::vector</code> is not thread safe in and of itself."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1464229773, "post_id": 37449329, "comment_id": 62402629, "body": "@DavidSchwartz: To me, something is &quot;X-safe&quot; if you can use it for X without having to read its interface contract. So a type would be thread safe if you can use it in your threading code and not have to read which functions can or cannot be concurrently called. A class that only provides &quot;safety&quot; if you are very careful with how you use it is not very safe. As an analogy, C4 is a safe explosive because it only blows up when you want it to. Nitro glycerine by contrast is not considered safe, even though it won&#39;t blow up if you are very careful about handling it."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1464230226, "post_id": 37449329, "comment_id": 62402721, "body": "@NicolBolas Every class will fail if you don&#39;t follow its interface contract. You can&#39;t use any class for anything safely without understanding its interface contract. Your proposed definition of thread safe is not good one. For example, consider a queue that provides an <code>isEmpty</code> function and a <code>get</code> function that crashes if you call it on an empty queue (and no other query/get type functions). If there are no restrictions on concurrent invocation, is that class thread safe? (Perhaps a more accurate definition is that a class is thread safe if it provides useful concurrency?)"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1464232504, "post_id": 37449329, "comment_id": 62403254, "body": "@DavidSchwartz: &quot;<i>Every class will fail if you don&#39;t follow its interface contract.</i>&quot; And a safe class is one where the contract <i>cannot</i> be broken (without employing perfidy). Your example fails because <code>get</code> is not a safe function; it crashes for reasons that you cannot control or prevent. In a thread-safe class, it would throw or otherwise error on failure, not crash."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1464248907, "post_id": 37449329, "comment_id": 62409619, "body": "@NicolBolas Almost every class of any significance is not &quot;safe&quot; by this definition, and most such classes would be impractically clunky. Is a container thread-safe if modifications invalidate iterators? Would you argue that a thread-safe container that owns its objects cannot return a reference to an object in it?"}, {"owner": {"reputation": 7974, "user_id": 4928, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3688dea735adb802ada72577f4897898?s=128&d=identicon&r=PG", "display_name": "SCFrench", "link": "https://stackoverflow.com/users/4928/scfrench"}, "edited": false, "score": 0, "creation_date": 1464272666, "post_id": 37449329, "comment_id": 62426108, "body": "I think my &quot;put another way&quot; didn&#39;t actually rephrase my question, it asked a different one, so I&#39;m going to edit the question for clarity. I did find another Sutter article that was helpful: <a href=\"https://herbsutter.com/2014/01/13/gotw-95-solution-thread-safety-and-synchronization/\" rel=\"nofollow noreferrer\">herbsutter.com/2014/01/13/&hellip;</a>. In different parts of it, he effectively defines &quot;thread-safe type&quot; to mean the same as a fully internally synchronized type, like a message queue. Elsewhere, he defines &quot;basic thread safety guarantee&quot; to mean &quot;concurrent operations on different objects is safe; concurrent const operations on the same object is safe&quot;."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 7974, "user_id": 4928, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3688dea735adb802ada72577f4897898?s=128&d=identicon&r=PG", "display_name": "SCFrench", "link": "https://stackoverflow.com/users/4928/scfrench"}, "edited": false, "score": 0, "creation_date": 1464273576, "post_id": 37449329, "comment_id": 62426884, "body": "@SCFrench Yes I was not understanding exactly what you were asking.  I have updated my answer."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 4, "last_activity_date": 1464273522, "last_edit_date": 1464273522, "creation_date": 1464219624, "answer_id": 37449329, "question_id": 37449248, "link": "https://stackoverflow.com/questions/37449248/when-c-const-methods-synchronize-mutable-state-do-non-const-methods-have-to-d/37449329#37449329", "title": "When C++ const methods synchronize mutable state, do non-const methods have to do so too?", "body": "<p>No, your class is not in and of itself thread safe.</p>\n\n<pre><code>void non_const_method()\n{\n    // std::lock_guard&lt;std::mutex&gt; g(m); // &lt;-- is this needed?\n    i = 1;\n}\n</code></pre>\n\n<p>The above is not thread safe as multiple threads could call the function thus altering <code>i</code> at the same time.</p>\n\n<p>So to answer:</p>\n\n<blockquote>\n  <p>does the following class provide Sutter's \"basic thread safety guarantee\"</p>\n</blockquote>\n\n<p>Then yes, the class provides a \"basic thread safety guarantee\".  You cannot modify one instance from another instance and the <code>const</code> methods of the class are thread safe.</p>\n\n<p>You will have to use some sort of external synchronization in order to use the mutable functions of the class on the same instance in multiple threads but your non-mutable function will not require external synchronization.</p>\n"}, {"tags": [], "owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "is_accepted": false, "score": 0, "last_activity_date": 1464250869, "creation_date": 1464250869, "answer_id": 37455328, "question_id": 37449248, "link": "https://stackoverflow.com/questions/37449248/when-c-const-methods-synchronize-mutable-state-do-non-const-methods-have-to-d/37455328#37455328", "title": "When C++ const methods synchronize mutable state, do non-const methods have to do so too?", "body": "<p>Ideally, a <em>writer</em> needs to obtain more strict lock than a <em>reader</em> would. You might have argued if reader need to obtain a lock or not (but you asked the other way). Writers are more of the cause to produce data inconsistency.</p>\n\n<p>By strict lock, I mean in a locking-protocol where reader-lock and writer-lock are possible - then writer-lock would be more strict. In most implementations, a thread which obtained a writer-lock would stall all other threads from obtaining any kind of lock, but reader-locks can be taken simultaneously. So, a non-const function would ideally take a writer-lock, but <code>const</code> function may simply take a reader-lock - thus allowing parallel execution of same function (or similar <code>const</code> functions of same object).</p>\n\n<p>Yes, it is possible that a locking-protocol won't give preference to <em>writer</em> threads waiting, over <em>reader</em> thread waiting. But, that's implementation detail.</p>\n"}], "owner": {"reputation": 7974, "user_id": 4928, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3688dea735adb802ada72577f4897898?s=128&d=identicon&r=PG", "display_name": "SCFrench", "link": "https://stackoverflow.com/users/4928/scfrench"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 594, "favorite_count": 0, "accepted_answer_id": 37449329, "answer_count": 2, "score": 1, "last_activity_date": 1464273522, "creation_date": 1464219002, "last_edit_date": 1464272869, "question_id": 37449248, "link": "https://stackoverflow.com/questions/37449248/when-c-const-methods-synchronize-mutable-state-do-non-const-methods-have-to-d", "title": "When C++ const methods synchronize mutable state, do non-const methods have to do so too?", "body": "<p>According to Herb Sutter (<a href=\"http://isocpp.org/blog/2012/12/you-dont-know-const-and-mutable-herb-sutter\" rel=\"nofollow\">http://isocpp.org/blog/2012/12/you-dont-know-const-and-mutable-herb-sutter</a>), in C++11 const methods must not alter the object bit-wise, or must perform internal synchronization (e.g. using a mutex) if they have mutable data members.</p>\n\n<p>My question is, do non-const methods have to acquire the mutex too? Or can they rely on the external synchronization their user will have to perform if the user wants to mix const and non-const methods on the same object concurrently?</p>\n\n<p>EDIT: Put another way, <strike> is the following class thread-safe?</strike> does the following class provide Sutter's \"basic thread safety guarantee\" (from <a href=\"https://herbsutter.com/2014/01/13/gotw-95-solution-thread-safety-and-synchronization/\" rel=\"nofollow\">part 4b of GOTW #95</a>)?</p>\n\n<pre><code>#include &lt;thread&gt;\n\nclass C {\n  public:\n  void const_method() const\n  {\n    std::lock_guard&lt;std::mutex&gt; g(m);\n    i = 2;\n  }\n\n  void non_const_method()\n  {\n    // std::lock_guard&lt;std::mutex&gt; g(m); // &lt;-- is this needed?\n    i = 1;\n  }\n\n  private:\n  mutable int i;\n  mutable std::mutex m;\n};\n</code></pre>\n"}, {"tags": ["c++", "polymorphism"], "comments": [{"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1464219388, "post_id": 37449246, "comment_id": 62400273, "body": "I feel like there&#39;s two questions here: one to do with overload resolution and inheritance chaining."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1464220888, "post_id": 37449246, "comment_id": 62400658, "body": "do you understand why it prints <code>E</code>?"}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1464223575, "post_id": 37449246, "comment_id": 62401291, "body": "Having mutiple overloads of global f function would generally not be a good idea as the selection depend on the declared type and not the actual type."}], "answers": [{"tags": [], "owner": {"reputation": 1096, "user_id": 3160610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XUIaj.jpg?s=128&g=1", "display_name": "Andrew L", "link": "https://stackoverflow.com/users/3160610/andrew-l"}, "is_accepted": true, "score": 0, "last_activity_date": 1464225044, "creation_date": 1464225044, "answer_id": 37449990, "question_id": 37449246, "link": "https://stackoverflow.com/questions/37449246/c-polymorphism-function-matching/37449990#37449990", "title": "C++ polymorphism function matching", "body": "<p>I will try to break down your example as best as I can:</p>\n\n<pre><code>int main() {\n    E e;    // declare object of Class E\n    f(&amp;e);  // run f() function and pass it the address of E\n}\n</code></pre>\n\n<p>Ok simple enough - you declared an object of Class E and then ran a function on it. Now the global f() function has been overloaded three times to accept pointers to the address of a D object, B object, or A object. Since all of these take objects higher up on the inheritance tree, any will work for a class E object. The compiler will choose the function for the most derived class. In this case, the void f(D *sth) function gets selected. </p>\n\n<pre><code>void f(D *sth) {\n    cout&lt;&lt;\"D ptr\"&lt;&lt;endl; // \"D ptr\" printed to screen\n    sth-&gt;f();            // Take original pointer to class E object and \n                         // run its own class method f() on it\n}\n</code></pre>\n\n<p>Then looking at the class definition for E, we will see why E gets printed:</p>\n\n<pre><code>class E : public D {\n    public:\n    virtual void f() {\n        cout&lt;&lt;\"E\";\n    }\n};\n</code></pre>\n\n<p>If you were to comment out the void f(D *sth) function, the compiler would instead select the void f(B *sth) function resulting in the output \"B ptr\" and \"E\". If you were to instead comment out the global f() function for A and B objects and then tried to run void f(D *sth) on a B object, it would not compile because the compiler can only convert objects up an inheritance tree, not down it.</p>\n\n<p>As Phil1970 commented, this structure is generally frowned upon as it relies on global functions having knowledge of the inheritance tree. </p>\n"}, {"tags": [], "owner": {"reputation": 66, "user_id": 6368507, "user_type": "registered", "profile_image": "https://graph.facebook.com/248471442176494/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440 \u0417\u0430\u0440\u0443\u0434\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/6368507/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b0%d0%bd%d0%b4%d1%80-%d0%97%d0%b0%d1%80%d1%83%d0%b4%d0%bd%d1%8b%d0%b9"}, "is_accepted": false, "score": 0, "last_activity_date": 1464225409, "creation_date": 1464225409, "answer_id": 37450042, "question_id": 37449246, "link": "https://stackoverflow.com/questions/37449246/c-polymorphism-function-matching/37450042#37450042", "title": "C++ polymorphism function matching", "body": "<p>It should have given you an undefined behavior or ambiguity. Different compiler versions can give different outcomes so you better don't rely on your results :)</p>\n"}], "owner": {"reputation": 51, "user_id": 3199819, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100002613276383/picture?type=large", "display_name": "user3199819", "link": "https://stackoverflow.com/users/3199819/user3199819"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 1, "accepted_answer_id": 37449990, "answer_count": 2, "score": 0, "last_activity_date": 1464225409, "creation_date": 1464218999, "question_id": 37449246, "link": "https://stackoverflow.com/questions/37449246/c-polymorphism-function-matching", "title": "C++ polymorphism function matching", "body": "<p>I have the code bellow with chain inheritance with virtual function and it prints:</p>\n\n<pre><code>D ptr\nE\n</code></pre>\n\n<p>So what is the algorithm for the function matching, my guess is it's matching the closest father class? But &amp;e basically is of type A*,B*,D* why this even compiles and is it good practice to use this property?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass A {\n    public:\n        virtual void f(){cout&lt;&lt;\"A\";};\n};\n\nclass B :public A {\n    public:\n    virtual void f() {\n        cout&lt;&lt;\"B\";\n    }\n};\n\nclass D : public B {\n    public:\n    virtual void f() {\n        cout&lt;&lt;\"D\";\n    }\n};\n\nclass E : public D {\n    public:\n    virtual void f() {\n        cout&lt;&lt;\"E\";\n    }\n};\n\nvoid f(D *sth) {\n    cout&lt;&lt;\"D ptr\"&lt;&lt;endl;\n    sth-&gt;f();\n}\n\nvoid f(B *sth) {\n    cout&lt;&lt;\"B ptr\"&lt;&lt;endl;\n    sth-&gt;f();\n}\n\nvoid f(A *sth) {\n    cout&lt;&lt;\"A ptr\"&lt;&lt;endl;\n    sth-&gt;f();\n}\n\nint main() {\n    E e;\n    f(&amp;e);\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "vector", "input"], "comments": [{"owner": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "edited": false, "score": 0, "creation_date": 1464218212, "post_id": 37449105, "comment_id": 62399987, "body": "What do you mean by &quot;it does nothing&quot;? Do you mean nothing is pushed back to the vector? There is an inconsistency between the <code>std::vector</code> variable names <code>vec</code> and <code>input</code> in the question too by the way."}, {"owner": {"reputation": 29, "user_id": 5802715, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QaFY0-cYj7o/AAAAAAAAAAI/AAAAAAAAAzM/UzTBWLQApqU/photo.jpg?sz=128", "display_name": "Genjutsu", "link": "https://stackoverflow.com/users/5802715/genjutsu"}, "reply_to_user": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "edited": false, "score": 0, "creation_date": 1464218408, "post_id": 37449105, "comment_id": 62400024, "body": "argh, forgod to change while copypaste;  it just doesn&#39;t give me even a chance to enter something"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1464218443, "post_id": 37449105, "comment_id": 62400041, "body": "What happens when the user enters &quot;frog&quot; instead of a number?"}, {"owner": {"reputation": 29, "user_id": 5802715, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QaFY0-cYj7o/AAAAAAAAAAI/AAAAAAAAAzM/UzTBWLQApqU/photo.jpg?sz=128", "display_name": "Genjutsu", "link": "https://stackoverflow.com/users/5802715/genjutsu"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1464218554, "post_id": 37449105, "comment_id": 62400066, "body": "@ThomasMatthews it is not supposed to happen (or will be fixed later :)) Also, as I said before, with this code user doesn&#39;t have even a option to enter something"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1464218566, "post_id": 37449105, "comment_id": 62400069, "body": "@ThomasMatthews <code>atoi()</code> will return <code>0</code> for that."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1464218645, "post_id": 37449105, "comment_id": 62400086, "body": "Where is the function that calculates the size?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1464218693, "post_id": 37449105, "comment_id": 62400101, "body": "@Barmar: What I am alluding to is that there is no checking for quality input.  If I type in &quot;frog&quot;, then a zero is entered, which is probably unexpected."}, {"owner": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "edited": false, "score": 1, "creation_date": 1464218699, "post_id": 37449105, "comment_id": 62400103, "body": "I tested this code in MSVC and g++ and in both cases it works as intended, your issue must be elsewhere - please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1464218751, "post_id": 37449105, "comment_id": 62400113, "body": "What does &quot;I choose entering numbers&quot; mean? Is there another user input before running this code? You need to show a complete but minimal example that reproduces the problem."}, {"owner": {"reputation": 29, "user_id": 5802715, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QaFY0-cYj7o/AAAAAAAAAAI/AAAAAAAAAzM/UzTBWLQApqU/photo.jpg?sz=128", "display_name": "Genjutsu", "link": "https://stackoverflow.com/users/5802715/genjutsu"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1464218757, "post_id": 37449105, "comment_id": 62400115, "body": "@Barmar nothing will broke if I change this range-based loop to default for loop"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1464219142, "post_id": 37449105, "comment_id": 62400220, "body": "@interjay I think it means he&#39;s not fluent in English and didn&#39;t word it clearly."}, {"owner": {"reputation": 29, "user_id": 5802715, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QaFY0-cYj7o/AAAAAAAAAAI/AAAAAAAAAzM/UzTBWLQApqU/photo.jpg?sz=128", "display_name": "Genjutsu", "link": "https://stackoverflow.com/users/5802715/genjutsu"}, "edited": false, "score": 0, "creation_date": 1464219320, "post_id": 37449105, "comment_id": 62400257, "body": "Just created a new project with minimum, complete and verifiable code and I can enter something. Need to fflush before do-while.  Another problem is that vector is not readed correctly <a href=\"http://pastebin.com/A5QJX64F\" rel=\"nofollow noreferrer\">pastebin.com/A5QJX64F</a> input: 1 2 3 4 5 expected output: 1 2 3 4 5 output: 1"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1464219184, "post_id": 37449260, "comment_id": 62400232, "body": "This won&#39;t stop when the user enters a blank line, he has to type the EOF character."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1464219264, "post_id": 37449260, "comment_id": 62400247, "body": "Oops, I misread. This requires him to type all the numbers on a single line, instead of one per line as in his original code."}, {"owner": {"reputation": 29, "user_id": 5802715, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QaFY0-cYj7o/AAAAAAAAAAI/AAAAAAAAAzM/UzTBWLQApqU/photo.jpg?sz=128", "display_name": "Genjutsu", "link": "https://stackoverflow.com/users/5802715/genjutsu"}, "edited": false, "score": 0, "creation_date": 1464219548, "post_id": 37449260, "comment_id": 62400308, "body": "Well, looks like it is what I have searched for, thanks!"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1464219639, "post_id": 37449260, "comment_id": 62400329, "body": "@Barmar, your rep had me doubting the answer :)"}], "tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": true, "score": 0, "last_activity_date": 1464219105, "creation_date": 1464219105, "answer_id": 37449260, "question_id": 37449105, "link": "https://stackoverflow.com/questions/37449105/unknown-size-vector-input/37449260#37449260", "title": "Unknown size vector input", "body": "<p>If you want to add items to a vector until there is no more input (or until a sentinel value is entered), usage of <code>std::istringstream</code> and <code>operator &gt;&gt;</code> could be used:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    std::vector&lt;int&gt; vec;\n    std::string buffer;\n    int data;\n    std::getline(std::cin, buffer);\n    std::istringstream iss(buffer);\n    while (iss &gt;&gt; data)\n          vec.push_back(data);\n    foo(vec);   \n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/5u8fEo\" rel=\"nofollow\">Live Example</a></p>\n"}], "owner": {"reputation": 29, "user_id": 5802715, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QaFY0-cYj7o/AAAAAAAAAAI/AAAAAAAAAzM/UzTBWLQApqU/photo.jpg?sz=128", "display_name": "Genjutsu", "link": "https://stackoverflow.com/users/5802715/genjutsu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2717, "favorite_count": 1, "accepted_answer_id": 37449260, "answer_count": 1, "score": -3, "last_activity_date": 1464219105, "creation_date": 1464218023, "last_edit_date": 1464218319, "question_id": 37449105, "link": "https://stackoverflow.com/questions/37449105/unknown-size-vector-input", "title": "Unknown size vector input", "body": "<p>here is the question.\nI have a vector of ints, and user should enter it's elements as long as he or she want. Then, this vector is passed to a function, which calculates it's size for whatever reason. Is there any way to do so? I found some code on shores of the Internet:</p>\n\n<pre><code>std::vector&lt;int&gt; vec;\n\nstd::string buffer = \"\";\n\nstd::cout &lt;&lt; \"Enter numbers. \"\n          &lt;&lt; \"After you finish, enter newline\" &lt;&lt; std::endl;\n\ndo {\n    std::getline(std::cin, buffer);\n    if (buffer.size() &gt; 0) {\n        vec.push_back(atoi(buffer.c_str())); //stoi was not declared =(\n    }\n} while (buffer != \"\");\n\nfoo(vec);\n....\nvoid foo(std::vector&lt;int&gt; &amp;input)\n{\n    for (const int &amp;i : input)\n        {\n            std::cout &lt;&lt; i &lt;&lt; endl;\n        }\n}\n</code></pre>\n\n<p>But this code doesn't works in right way: I choose entering numbers and it just does nothing. Have no idea what's wrong with it.\n(c++11 enabled)</p>\n"}, {"tags": ["c++", "c++11", "while-loop", "do-while"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1464217058, "post_id": 37448939, "comment_id": 62399739, "body": "I think this is backwards: <code>number=divisor-1</code> should be <code>divisor=number-1</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1464217136, "post_id": 37448939, "comment_id": 62399755, "body": "The second condition is implied by the first. If <code>remainder</code> is less than 1 it clearly isn&#39;t 1"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1464217177, "post_id": 37448939, "comment_id": 62399765, "body": "I think the condition you want is <code>while(divisor &gt; 1 &amp;&amp; remainder != 0)</code>"}, {"owner": {"reputation": 31, "user_id": 6379059, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5caca52114ad89d301b72a3b167a4ac5?s=128&d=identicon&r=PG&f=1", "display_name": "Minjae", "link": "https://stackoverflow.com/users/6379059/minjae"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1464217350, "post_id": 37448939, "comment_id": 62399811, "body": "@Barmar Thanks for letting me know."}, {"owner": {"reputation": 31, "user_id": 6379059, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5caca52114ad89d301b72a3b167a4ac5?s=128&d=identicon&r=PG&f=1", "display_name": "Minjae", "link": "https://stackoverflow.com/users/6379059/minjae"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1464217568, "post_id": 37448939, "comment_id": 62399855, "body": "@user4581301 So the condition regarding remainder should be changed?"}, {"owner": {"reputation": 31, "user_id": 6379059, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5caca52114ad89d301b72a3b167a4ac5?s=128&d=identicon&r=PG&f=1", "display_name": "Minjae", "link": "https://stackoverflow.com/users/6379059/minjae"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1464217600, "post_id": 37448939, "comment_id": 62399863, "body": "@Barmar omg this works. Would you please explain why mine was not working? I had no doubt remainder would reach 0 before divisor becomes 1, so I didn&#39;t include that in condition.. and why divisor&gt;1 not divisor&gt;=1 or divisor=1?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1464217769, "post_id": 37448939, "comment_id": 62399897, "body": "I reverted the code in the question. The solution should be put into an answer, the question needs to keep the broken code so readers can see what the problem was and how it was solved."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1464217894, "post_id": 37448939, "comment_id": 62399918, "body": "@Minjae The <code>while()</code> condition states the criteria that should keep repeating, not the condition that should stop the loop. So you keep looping as long as the remainder is <b>not</b> zero."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1464217929, "post_id": 37448939, "comment_id": 62399924, "body": "You&#39;re right that checking <code>divisor &gt; 1</code> is redundant, since the remainder will always be 0 when divisor gets to 1."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6379059, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5caca52114ad89d301b72a3b167a4ac5?s=128&d=identicon&r=PG&f=1", "display_name": "Minjae", "link": "https://stackoverflow.com/users/6379059/minjae"}, "edited": false, "score": 0, "creation_date": 1464219751, "post_id": 37449114, "comment_id": 62400350, "body": "Am I missing something? I mean, my question is perfectly answered, but I still don&#39;t get it. in my do part, divisor keep decreasing by 1 and remainder would reach 0 if the loop continued. I thought while(divisor &gt; 1 &amp;&amp; remainder != 0) would stop the loop immediately as the divisor is larger than 1 and remainder can&#39;t be 0 right after do is executed once."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 31, "user_id": 6379059, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5caca52114ad89d301b72a3b167a4ac5?s=128&d=identicon&r=PG&f=1", "display_name": "Minjae", "link": "https://stackoverflow.com/users/6379059/minjae"}, "edited": false, "score": 0, "creation_date": 1464219836, "post_id": 37449114, "comment_id": 62400375, "body": "Eventually <code>divisor</code> will become <code>1</code>. Every integer is divisible by 1, so <code>remainder</code> will be <code>0</code> when that happens, and the loop will stop."}, {"owner": {"reputation": 31, "user_id": 6379059, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5caca52114ad89d301b72a3b167a4ac5?s=128&d=identicon&r=PG&f=1", "display_name": "Minjae", "link": "https://stackoverflow.com/users/6379059/minjae"}, "edited": false, "score": 0, "creation_date": 1464219989, "post_id": 37449114, "comment_id": 62400408, "body": "so, in my head, &#39;while(divisor &gt;= 1 &amp;&amp; remainder == 0)&#39; sounds right, but this does stop the loop somehow."}, {"owner": {"reputation": 31, "user_id": 6379059, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5caca52114ad89d301b72a3b167a4ac5?s=128&d=identicon&r=PG&f=1", "display_name": "Minjae", "link": "https://stackoverflow.com/users/6379059/minjae"}, "edited": false, "score": 0, "creation_date": 1464220020, "post_id": 37449114, "comment_id": 62400413, "body": "is it because I used do-while? If it was just while loop, I could be correct?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 31, "user_id": 6379059, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5caca52114ad89d301b72a3b167a4ac5?s=128&d=identicon&r=PG&f=1", "display_name": "Minjae", "link": "https://stackoverflow.com/users/6379059/minjae"}, "edited": false, "score": 0, "creation_date": 1464220024, "post_id": 37449114, "comment_id": 62400418, "body": "You still have it backwards. It should be <code>&amp;&amp; remainder != 0</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 31, "user_id": 6379059, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5caca52114ad89d301b72a3b167a4ac5?s=128&d=identicon&r=PG&f=1", "display_name": "Minjae", "link": "https://stackoverflow.com/users/6379059/minjae"}, "edited": false, "score": 0, "creation_date": 1464220069, "post_id": 37449114, "comment_id": 62400433, "body": "The only difference between <code>while</code> and <code>do-while</code> is whether the test is done before or after the body. Since you set <code>remainder</code> in the body, it has to be <code>do-while</code>."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 3, "last_activity_date": 1464220178, "last_edit_date": 1464220178, "creation_date": 1464218059, "answer_id": 37449114, "question_id": 37448939, "link": "https://stackoverflow.com/questions/37448939/c-do-while-not-looping/37449114#37449114", "title": "C++ do while not looping", "body": "<p>First, you have a typo in your variable assignment. This line:</p>\n\n<pre><code>number = divisor - 1;\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>divisor = number - 1;\n</code></pre>\n\n<p>The <code>while()</code> condition should be <code>while (remainder != 0)</code>, so that the loop keeps repeating as long as you haven't found a divisor. If you want to be more explicit, you could use <code>while (divisor &gt; 1 &amp;&amp; remainder != 0)</code>. There's no need to repeat when <code>divisor == 1</code> because that's a divisor of all integers.</p>\n"}], "owner": {"reputation": 31, "user_id": 6379059, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5caca52114ad89d301b72a3b167a4ac5?s=128&d=identicon&r=PG&f=1", "display_name": "Minjae", "link": "https://stackoverflow.com/users/6379059/minjae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 660, "favorite_count": 0, "accepted_answer_id": 37449114, "answer_count": 1, "score": 0, "last_activity_date": 1464220178, "creation_date": 1464216880, "last_edit_date": 1464219582, "question_id": 37448939, "link": "https://stackoverflow.com/questions/37448939/c-do-while-not-looping", "title": "C++ do while not looping", "body": "<p>I understand I can just use for-loop to define prime number, but before I implement for loop into that topic, I had a thought that I maybe could make one with while loop or do-while.\nSomehow, my do-while loop seems not to be working correctly.</p>\n\n<p>My theory was that I could find prime number for checking the remainder of divisor where divisor keeps decreasing by 1 until divisor reaches 1. (Although 'until divisor reaches 1.' part is not in the code, I would assumed remainder of 0 would appear anyway before divisor goes below 0.)</p>\n\n<p>However, it keeps halting before remainder reaches 0.\nWhat did I do wrong?\nI've even tried both instead of <code>(remainder&lt;1 &amp;&amp; remainder!=1)</code>below but still no luck.</p>\n\n<pre><code>while (remainder&lt;1)\n while (remainder==1)\n\n#include &lt;iostream&gt;\nusing namespace std;\nint main()\n{\n    int number, divisor, remainder;\n    cin &gt;&gt; number;\n    divisor=number-1;\n    cout &lt;&lt; \"You've put \" &lt;&lt; number &lt;&lt; \".\\n\";\n    do {\n      divisor = divisor - 1;\n      remainder=number%divisor;\n    }\n    while (remainder&lt;1 &amp;&amp; remainder!=1);\n    cout &lt;&lt; divisor &lt;&lt; \"  \"  &lt;&lt; remainder &lt;&lt; \"  \" &lt;&lt; number &lt;&lt; \"  \"  &lt;&lt; \"Divisor, remainder, number\\n\";\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "memory", "destructor"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1464216877, "post_id": 37448929, "comment_id": 62399677, "body": "This is simple: <code>&#47;* answer goes here *&#47;</code>. You&#39;re welcome!"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1464216905, "post_id": 37448929, "comment_id": 62399682, "body": "What&#39;s <code>resultSet</code>?"}, {"owner": {"reputation": 213, "user_id": 4744069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/694e1f497a17039768948aec87f56f02?s=128&d=identicon&r=PG&f=1", "display_name": "Plump Worm", "link": "https://stackoverflow.com/users/4744069/plump-worm"}, "edited": false, "score": 0, "creation_date": 1464217407, "post_id": 37448929, "comment_id": 62399826, "body": "Apologies for being obscure. First I accidentally deleted original paste from the method and then copy pasted a fragment of a different method. Current version is the correct one."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1464217527, "post_id": 37448929, "comment_id": 62399848, "body": "Yes, you&#39;re leaking memory. Your code contains <code>new</code>, and code that contains <code>new</code> leaks memory in general (except when it has been written extremely carefully by experts, which is almost never the case in the wild)."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1464218369, "post_id": 37448929, "comment_id": 62400015, "body": "The title is misleading. You don&#39;t have pointers to stack allocated objects in the example code."}], "answers": [{"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1464217660, "creation_date": 1464217660, "answer_id": 37449048, "question_id": 37448929, "link": "https://stackoverflow.com/questions/37448929/dereferencing-object-pointer-to-stack-stored-object-destructor-call/37449048#37449048", "title": "Dereferencing object pointer to stack stored object (destructor call)", "body": "<p>Yes. You have a <code>new</code> and no matching <code>delete</code>. The simplest fix is to change <code>unionMS</code> to return a <code>MySet</code> instead of a <code>MySet*</code>.</p>\n\n<pre><code>MySet MySet::unionMS(MySet&amp; newSet)\n{\n    MySet resultSet(*this);\n    [...] \n    // logic goes here\n    [...]\n    return resultSet;\n}\n\nint main(){\n     [...]\n     MySet set3 = set1.unionMS(set2);\n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 213, "user_id": 4744069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/694e1f497a17039768948aec87f56f02?s=128&d=identicon&r=PG&f=1", "display_name": "Plump Worm", "link": "https://stackoverflow.com/users/4744069/plump-worm"}, "edited": false, "score": 0, "creation_date": 1464218869, "post_id": 37449064, "comment_id": 62400150, "body": "Thank you for the reply. So if I understand correctly I would either have to do the following in main: <code>MySet *set3;</code>  <code>set3 = set1.differenceMS(set2);</code> and then explicitly delete set3 before main leaves the scope. The problem with returning by value is that MySet holds a dynamically alocated <code>int* mySet</code> which is int[] array. In this particular case I believe I have to pass pointer, because otherwise the values in the int*MySet won&#39;t be passed?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 213, "user_id": 4744069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/694e1f497a17039768948aec87f56f02?s=128&d=identicon&r=PG&f=1", "display_name": "Plump Worm", "link": "https://stackoverflow.com/users/4744069/plump-worm"}, "edited": false, "score": 0, "creation_date": 1464219655, "post_id": 37449064, "comment_id": 62400333, "body": "The data pointed by members of <code>MySet</code> would be copied, if you have correctly implemented the copy and move constructor of <code>MySet</code>. But yeah, if you are to use dynamic allocation, then what you propose would be the correct way to delete <code>set3</code>."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 0, "last_activity_date": 1464218038, "last_edit_date": 1464218038, "creation_date": 1464217735, "answer_id": 37449064, "question_id": 37448929, "link": "https://stackoverflow.com/questions/37448929/dereferencing-object-pointer-to-stack-stored-object-destructor-call/37449064#37449064", "title": "Dereferencing object pointer to stack stored object (destructor call)", "body": "<blockquote>\n  <p>So when <code>resultSet</code> leaves the scope pointer variable is destroyed.</p>\n</blockquote>\n\n<p>Correct. The function returns a copy of the mentioned pointer.</p>\n\n<blockquote>\n  <p>However, when happens to the underlying object?</p>\n</blockquote>\n\n<p>Nothing. It was allocated dynamically. Dynamically allocated objects exist until they are deleted.</p>\n\n<blockquote>\n  <p>Is it being copied to the caller...</p>\n</blockquote>\n\n<p>The returned pointer is dereferenced in the statement</p>\n\n<pre><code>set3 = *set1.unionMS(set2);\n</code></pre>\n\n<p>Then, the object is copied to <code>set3</code>. So yes, the object is copied.</p>\n\n<blockquote>\n  <p>... and then destroyed?</p>\n</blockquote>\n\n<p>No, since you never called <code>delete</code>, the object wasn't destroyed. After dereferencing the returned, <em>temporary</em> pointer, you don't store it anywhere. Because the value of the pointer is then lost, the object can no longer be destroyed. You have leaked the memory.</p>\n\n<p>There seems to be no advantage to use dynamic allocation in this example. I recommend returning a copy of an automatic object instead.</p>\n"}], "owner": {"reputation": 213, "user_id": 4744069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/694e1f497a17039768948aec87f56f02?s=128&d=identicon&r=PG&f=1", "display_name": "Plump Worm", "link": "https://stackoverflow.com/users/4744069/plump-worm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 37449064, "answer_count": 2, "score": -3, "last_activity_date": 1464218038, "creation_date": 1464216812, "last_edit_date": 1464217390, "question_id": 37448929, "link": "https://stackoverflow.com/questions/37448929/dereferencing-object-pointer-to-stack-stored-object-destructor-call", "title": "Dereferencing object pointer to stack stored object (destructor call)", "body": "<p>Am I leaking memory in the code snippet shown below?</p>\n\n<pre><code>MySet.cpp\n\nMySet *MySet::unionMS(MySet&amp; newSet)\n{\n    MySet *resultSet = new MySet(*this);\n    [...] \n    // logic goes here\n    [...]\n    return resultSet;\n}\n</code></pre>\n\n<p>And in </p>\n\n<pre><code>int main(){\n     [...]\n     MySet set3;\n     set3 = *set1.unionMS(set2);\n }\n</code></pre>\n\n<p>So when <code>resultSet</code> leaves the scope pointer variable is destroyed. However, when happens to the underlying object? Is it being copied to the caller and then destroyed?</p>\n"}, {"tags": ["c++", "machine-learning", "mnist"], "answers": [{"tags": [], "owner": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "is_accepted": true, "score": 5, "last_activity_date": 1464216627, "creation_date": 1464216627, "answer_id": 37448909, "question_id": 37448873, "link": "https://stackoverflow.com/questions/37448873/center-of-mass-of-pixels-in-grayscale-image/37448909#37448909", "title": "center of mass of pixels in grayscale image", "body": "<p>\"Center of mass\"  (for binary images) is a bit convoluted way of saying \"mean value across each dimension\". In other words - take all x coordinates and average them - and you got x coordinate of your \"center of mass\", the same for y.</p>\n\n<p>In python, for data in <code>X</code> it would be</p>\n\n<pre><code>center_of_mass = X.mean(axis=0)\n</code></pre>\n\n<p>If you have pixels' intensities you can use them as \"weights\" thus leading to weighted averages, that's all.</p>\n"}, {"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1464216717, "creation_date": 1464216717, "answer_id": 37448916, "question_id": 37448873, "link": "https://stackoverflow.com/questions/37448873/center-of-mass-of-pixels-in-grayscale-image/37448916#37448916", "title": "center of mass of pixels in grayscale image", "body": "<p>Here, let me <a href=\"https://en.wikipedia.org/wiki/Center_of_mass\" rel=\"nofollow\">search that</a> for you ...</p>\n\n<p>You multiply the distance from the mean by the weight of each pixel -- almost certainly 1.0 for your work.  In short, take the mean of all <strong>x</strong> coordinates and the mean of all <strong>y</strong> coordinates; that gives you the center of mass.</p>\n"}], "owner": {"reputation": 909, "user_id": 3851936, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/756030a57f1d4ff359409755de08b655?s=128&d=identicon&r=PG&f=1", "display_name": "cuv", "link": "https://stackoverflow.com/users/3851936/cuv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6069, "favorite_count": 2, "accepted_answer_id": 37448909, "answer_count": 2, "score": 4, "last_activity_date": 1464216717, "creation_date": 1464216423, "question_id": 37448873, "link": "https://stackoverflow.com/questions/37448873/center-of-mass-of-pixels-in-grayscale-image", "title": "center of mass of pixels in grayscale image", "body": "<p>I'm working on a program that lets the user draw a digit in a \"scribbling area\" and with the press of a button the application will predict the digit that he entered, using a neural net classifier.</p>\n\n<p>Now, to train the neural net, I used MNIST database which specifies the following: \"images from NIST were size normalized to fit in a 20x20 pixel box while preserving their aspect ratio [...] the images were centered in a 28 x 28 image by computing the center of mass of the pixels\".</p>\n\n<p>The problem that I'm facing is that after resizing the digit that the user drew in the scribbling area to a size of 20 x 20, I need to compute the center of mass of the pixels so I can center it in the middle of the 28 x 28 image.</p>\n\n<p>How can I compute that ?</p>\n"}, {"tags": ["c++", "c", "gcc", "assembly", "x86"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 3, "creation_date": 1464216469, "post_id": 37448848, "comment_id": 62399555, "body": "It may just be garbage your debugger is disassembling to readable instructions. This can happen for a wide variety of reasons."}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 1, "creation_date": 1464216473, "post_id": 37448848, "comment_id": 62399556, "body": "It would help to know the addresses of this code.  Do you know, for example, that the instruction <code>jae 0xb6e17b88</code> isn&#39;t just a jump over the <code>jmp</code> instruction to the <code>lea</code> instruction?"}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 2, "creation_date": 1464216515, "post_id": 37448848, "comment_id": 62399576, "body": "It may be the target of some other jump too. The <code>lea</code> is just padding for alignment, by the way, so that may indeed not be reached."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1464216736, "post_id": 37448848, "comment_id": 62399630, "body": "My personal favourite is a smashed stack results in a return to the wrong place in the code. Hilarity results. It&#39;s not quite Bill Murray funny, but it&#39;s way up there."}, {"owner": {"reputation": 2389, "user_id": 1991678, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a9f5d4caa1c8059acdb6582c8429bc3f?s=128&d=identicon&r=PG&f=1", "display_name": "default", "link": "https://stackoverflow.com/users/1991678/default"}, "reply_to_user": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1464216912, "post_id": 37448848, "comment_id": 62399686, "body": "@davidbak, yes i know that.  I&#39;m showing a simplified output in my question, but in my full output, each line has a absolute and relative address next to it, and all the jumps also show the relative address as well so its really easy to see where all the jumps of the function are going."}], "answers": [{"comments": [{"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 4, "creation_date": 1464217043, "post_id": 37448913, "comment_id": 62399735, "body": "Geez, if the word &quot;bizarro&quot; wasn&#39;t in the quote, I would have made it this comment."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 2, "creation_date": 1464219757, "post_id": 37448913, "comment_id": 62400353, "body": "If the alignment filler code is supposed to be unreachable anyway, is there any advantage in filling with one bizarro LEA instruction rather than a series of NOP instructions?"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1464231456, "post_id": 37448913, "comment_id": 62403000, "body": "@IanAbbott: It <i>probably</i> doesn&#39;t matter.  It might still get decoded in the same cycle as the jmp that makes it unreachable.  IDK if Intel SnB-family CPUs would allocate a new uop cache-line to hold those decoded uops, in case they&#39;re needed later.  (It doesn&#39;t know until after it decodes them that they&#39;re <code>nop</code>s, and in the non-<code>nop</code> case it&#39;s probable that something will jump there soon.)  So it might possibly save a cycle decoding, or some space in the uop cache."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1464231567, "post_id": 37448913, "comment_id": 62403015, "body": "@IanAbbott: Fun fact: the static prediction for an unconditional indirect jump is the next address.  If that&#39;s not one of the possible branch targets, it does actually help to follow it with a <code>ud2</code> to stop speculative execution when a better branch-target prediction isn&#39;t available.  Or, if you&#39;re making a jump table, try to put the common case as the address right after the <code>jmp rax</code>."}], "tags": [], "owner": {"reputation": 2389, "user_id": 1991678, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a9f5d4caa1c8059acdb6582c8429bc3f?s=128&d=identicon&r=PG&f=1", "display_name": "default", "link": "https://stackoverflow.com/users/1991678/default"}, "is_accepted": true, "score": 5, "last_activity_date": 1464216700, "last_edit_date": 1495541318, "creation_date": 1464216700, "answer_id": 37448913, "question_id": 37448848, "link": "https://stackoverflow.com/questions/37448848/unreachable-code-in-assembly/37448913#37448913", "title": "Unreachable code in assembly", "body": "<p>I found the answer <a href=\"https://stackoverflow.com/a/2553556/1991678\">here</a></p>\n\n<blockquote>\n  <p>Sometimes GCC inserts NOP instructions into the code stream to ensure proper alignment and stuff like that. The NOP instruction takes one byte, so you would think that you could just add as many as needed. But according to Ian Lance Taylor, it\u2019s faster for the chip to execute one long instruction than many short instructions. So rather than inserting seven NOP instructions, they instead use one bizarro LEA, which uses up seven bytes and is semantically equivalent to a NOP</p>\n</blockquote>\n"}], "owner": {"reputation": 2389, "user_id": 1991678, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a9f5d4caa1c8059acdb6582c8429bc3f?s=128&d=identicon&r=PG&f=1", "display_name": "default", "link": "https://stackoverflow.com/users/1991678/default"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 1, "accepted_answer_id": 37448913, "answer_count": 1, "score": 3, "last_activity_date": 1464358772, "creation_date": 1464216290, "last_edit_date": 1464358772, "question_id": 37448848, "link": "https://stackoverflow.com/questions/37448848/unreachable-code-in-assembly", "title": "Unreachable code in assembly", "body": "<p>I'm debugging a crash in linux, and am going through the assembly of the function <a href=\"https://github.com/lattera/glibc/blob/master/stdlib/cxa_finalize.c\" rel=\"nofollow\">cxa_finalize</a></p>\n\n<p>The crash happens on a source line that appears unreachable:</p>\n\n<pre><code>cmp    %edx,%esi             // f &gt;= &amp;funcs-&gt;fns[0]\njae    0xb6e17b88            // enter for loop\njmp    0xb6e17c08            // exit for loop\nlea    0x0(%esi,%eiz,1),%esi // crashes here - how do we even get here since there is a \n                             // jmp above us, and nothing jumps to here\ncmp    %edi,0xc(%esi)        // d == f-&gt;func.cxa.dso_handle (jumped to from below)\n</code></pre>\n\n<p>later on in this method, there is another <code>lea 0x0(%esi,%eiz,1),%esi</code> instruction that appears after a <code>jmp</code> and <code>nop</code> that also appears unreachable.  In that case, the <code>jmp</code> is also exiting a for loop.</p>\n\n<p>Is there some paradigm going on here that puts in unreachable instructions?</p>\n\n<p>Edit: Turns out it wasn't crashing on the <code>lea</code> instruction, but on the <code>cmp</code> instruction after it, when accessing the memory at <code>esi</code>.</p>\n"}, {"tags": ["c++", "templates", "language-lawyer", "c++17", "using-directives"], "comments": [{"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1464215020, "post_id": 37448616, "comment_id": 62399044, "body": "Because they might not be types.  E.g., they might be a value, e.g., the N in <code>template&lt;class T, std::size_t N&gt; struct array</code>"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 5, "creation_date": 1464215120, "post_id": 37448616, "comment_id": 62399086, "body": "They aren&#39;t always needed, and exposing them means client code may become coupled to them (assuming you meant those aliases to be public.)"}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 1, "creation_date": 1464215172, "post_id": 37448616, "comment_id": 62399101, "body": "Another answer: Because it&#39;s trivial to do yourself.  Which was the answer given when someone asked why isn&#39;t there a <code>super</code> keyword in C++ (but I don&#39;t have the reference to that at hand)."}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1464215214, "post_id": 37448616, "comment_id": 62399122, "body": "@juanchopanza is right too, they&#39;re more like the names of parameters in a method decl than an actual defined value."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1464215284, "post_id": 37448616, "comment_id": 62399148, "body": "@davidbak: &quot;<i>Which was the answer given when someone asked why isn&#39;t there a super keyword in C++</i>&quot; To be fair, that answer has more to do with multiple inheritance. In C++, there isn&#39;t necessarily a single <code>super</code> class instance."}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1464215388, "post_id": 37448616, "comment_id": 62399180, "body": "@NicolBolas - that too, but I distinctly remember an early C++ standards committee update in some magazine where it <i>was</i> considered (the <code>super</code> keyword) by the committee until someone (forget who) said &quot;just do <code>typedef xxx super</code>&quot;."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 7, "creation_date": 1464215400, "post_id": 37448616, "comment_id": 62399184, "body": "The names aren&#39;t part of the template. <code>template &lt;typename&gt; struct X; template &lt;typename A&gt; struct X; template &lt;typename Q&gt; struct X;</code> declares the same template three times. Just like for function parameters."}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1464215516, "post_id": 37448616, "comment_id": 62399221, "body": "@NicolBolas - I actually found a reference right <a href=\"http://stackoverflow.com/a/180633/751579\">here on SO</a>."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1464215950, "post_id": 37448616, "comment_id": 62399379, "body": "@KerrekSB that&#39;s worthy of an answer."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1464215999, "post_id": 37448616, "comment_id": 62399405, "body": "@davidbak: 1. I said &quot;typename&quot; parameters. Let me edit and emphasize that. 2. for_each is trivial to implement, and yet we have ranged for loops; and the same argument goes for anything that&#39;s mostly syntactic sugar."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1464216098, "post_id": 37448616, "comment_id": 62399435, "body": "@juanchopanza: 1. They could be protected by default. 2. Whoever is using Foo&lt;A,B&gt; knows A and B <i>anyway</i>..."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1464216155, "post_id": 37448616, "comment_id": 62399461, "body": "@einpoklum 1. Same problem. 2. They don&#39;t know <code>A</code> as <code>Baz</code> or whatever."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1464216366, "post_id": 37448616, "comment_id": 62399527, "body": "@KerrekSB: Make that an answer please."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1464216707, "post_id": 37448616, "comment_id": 62399623, "body": "@einpoklum: Done :-)"}, {"owner": {"reputation": 4946, "user_id": 2297448, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75aca5435d1f52426fbd6573c73ed70d?s=128&d=identicon&r=PG&f=1", "display_name": "RamblingMad", "link": "https://stackoverflow.com/users/2297448/ramblingmad"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1466473997, "post_id": 37448616, "comment_id": 63318915, "body": "@juanchopanza <a href=\"http://en.cppreference.com/w/cpp/types/is_same\" rel=\"nofollow noreferrer\">they do know if they&#39;re the same.</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1464218671, "post_id": 37448896, "comment_id": 62400095, "body": "Who knows. One of the hidden implications of names of parameters becoming part of function signatures might be that it opens you up to companies like  <a href=\"https://en.wikipedia.org/wiki/Oracle_America,_Inc._v._Google,_Inc.\" rel=\"nofollow noreferrer\">Oracle</a> suing your ass over it."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1464219412, "post_id": 37448896, "comment_id": 62400280, "body": "I&#39;m repeatedly disheartened by people (not you obviously) who are somehow annoyed with questions regarding why the status quo is what it is, and downvote or vote to close with no comment - when there&#39;s a perfectly reasonable answer (which validates the rationale for the question.)"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1464220598, "post_id": 37448896, "comment_id": 62400574, "body": "@einpoklum: I think this is a good question and I&#39;m glad to have read the question and answer. However I have to admit that when I first read it, I was tempted to vote to close as not germane to stack overflow. The reason I guess is this line &quot;Was this ever suggested? Discussed? Rejected?&quot; I don&#39;t think that arbitrary historical inquiries into C++ make good SO questions -- the questions should be about programming, and ideally, of interest to a working programmer, rather than an academic or historian, IMO. Without that line, I probably up-vote it though. I&#39;m only one sample point, YMMV."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1464255748, "post_id": 37448896, "comment_id": 62414078, "body": "@ChrisBeck: 1. It&#39;s not necessarily a historical inquiry, because in some cases people say &quot;oh, yes, this is a standing proposal to the standard committee&quot; and then you can go read that and realize it might even make it to the next standard. 2. Some programmers write code by inspiration of the theoretical/academic discussion of the programming language. So these issues are of relevance to them. Different strokes for different folks etc."}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 7, "last_activity_date": 1464216541, "creation_date": 1464216541, "answer_id": 37448896, "question_id": 37448616, "link": "https://stackoverflow.com/questions/37448616/why-arent-typename-template-parameters-implicitly-recognized-as-types/37448896#37448896", "title": "Why aren&#39;t typename template parameters implicitly recognized as types?", "body": "<p>Parameter names aren't part of the entity that's being declared. This is true for both functions and templates. The following code only declares two separate entities:</p>\n\n<pre><code>extern void f(int, char, bool);\nextern void f(int a, char b, bool c);\nextern void f(int x, char b, bool z);\n\ntemplate &lt;typename&gt; struct X;\ntemplate &lt;typename A&gt; struct X;\ntemplate &lt;typename T&gt; struct X;\n</code></pre>\n\n<p>Note in particular that the following code is perfectly fine:</p>\n\n<pre><code>template &lt;typename T&gt; struct X { void f(); };   // X&lt;T&gt;::f not yet defined\ntemplate &lt;typename U&gt; void X&lt;U&gt;::f() {}         // now it's defined\n</code></pre>\n\n<p>All attempts at deriving additional structure from parameter names must deal with this situation. One of the most popular requests in this area are named function parameters; to date there has not been a satisfactory proposal for such an extension.</p>\n\n<p>To some extent, all such proposals would require making the parameter names part of the declared entity. For functions, for example, that would raise the question whether parameter names would need to be mangled and exposed to the linker.</p>\n"}], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 37448896, "answer_count": 1, "score": 5, "last_activity_date": 1464255552, "creation_date": 1464214902, "last_edit_date": 1464255552, "question_id": 37448616, "link": "https://stackoverflow.com/questions/37448616/why-arent-typename-template-parameters-implicitly-recognized-as-types", "title": "Why aren&#39;t typename template parameters implicitly recognized as types?", "body": "<p>Very often in C++ class definitions, especially in libraries, trait class etc., you see code similar to the following snippet:</p>\n\n<pre><code>template &lt;typename Bar, typename Baz&gt;\nclass Foo {\n    using bar_type = Bar;\n    using baz_type = Baz;\n    // ... etc.\n}\n</code></pre>\n\n<p>And only with these lines can you later refer to <code>Foo&lt;A,B&gt;::bar_type</code> or <code>Foo&lt;C,D&gt;:baz_type</code>. I'm wondering: Why doesn't the language standard require the compiler to automatically define types using the typename template parameters, i.e. allow removing the two using lines, and recognize <code>Foo&lt;A,B&gt;::Bar</code> as <code>A</code> and <code>Foo&lt;C,D&gt;::Baz</code> as <code>D</code>?</p>\n\n<p>This should not even break existing code, since within Foo, the identifiers Bar and Baz are already taken anyway.</p>\n"}, {"tags": ["c++", "regex"], "comments": [{"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 3, "creation_date": 1464213394, "post_id": 37448281, "comment_id": 62398400, "body": "You need <code>std::regex</code>."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1464213448, "post_id": 37448281, "comment_id": 62398424, "body": "You are looking for <code>std::regex</code>. P.S. I would like to congratulate you for avoiding the mind-rotting cancer called &quot;using namespace std;&quot;."}, {"owner": {"reputation": 333, "user_id": 6365631, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/0b6d1eab636fa2538931c8cbe78c16e8?s=128&d=identicon&r=PG&f=1", "display_name": "Chuck", "link": "https://stackoverflow.com/users/6365631/chuck"}, "edited": false, "score": 0, "creation_date": 1464213662, "post_id": 37448281, "comment_id": 62398518, "body": "Thanks ! I&#39;m on Qt and it looks like I don&#39;t even need std::regex. I just needed to include &quot;strategie.h&quot;, and it recognized regex. I do not know why, but if I ever get this error I&#39;ll use std::regex :) Edit : Actually I know, strategie.h includes computer.h, which uses &#39;using name std&#39;. I&#39;ll delete this line."}], "answers": [{"comments": [{"owner": {"reputation": 333, "user_id": 6365631, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/0b6d1eab636fa2538931c8cbe78c16e8?s=128&d=identicon&r=PG&f=1", "display_name": "Chuck", "link": "https://stackoverflow.com/users/6365631/chuck"}, "edited": false, "score": 0, "creation_date": 1464213717, "post_id": 37448327, "comment_id": 62398537, "body": "Thanks :) See my comment above."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 333, "user_id": 6365631, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/0b6d1eab636fa2538931c8cbe78c16e8?s=128&d=identicon&r=PG&f=1", "display_name": "Chuck", "link": "https://stackoverflow.com/users/6365631/chuck"}, "edited": false, "score": 0, "creation_date": 1464214695, "post_id": 37448327, "comment_id": 62398913, "body": "@Chuck Your question doesn&#39;t reflect the problem you are expressing in that comment. You should edit your question."}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": false, "score": 3, "last_activity_date": 1464213463, "creation_date": 1464213463, "answer_id": 37448327, "question_id": 37448281, "link": "https://stackoverflow.com/questions/37448281/regex-type-not-recognized/37448327#37448327", "title": "&#39;regex&#39; type not recognized", "body": "<p><code>regex</code> is part of the <code>std</code> namespace. You need to use <code>std::regex</code>.</p>\n"}], "owner": {"reputation": 333, "user_id": 6365631, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/0b6d1eab636fa2538931c8cbe78c16e8?s=128&d=identicon&r=PG&f=1", "display_name": "Chuck", "link": "https://stackoverflow.com/users/6365631/chuck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464218025, "creation_date": 1464213285, "last_edit_date": 1464218025, "question_id": 37448281, "link": "https://stackoverflow.com/questions/37448281/regex-type-not-recognized", "title": "&#39;regex&#39; type not recognized", "body": "<p>I'm facing a weird problem.\nFirst, here's my code :</p>\n\n<pre><code>#ifndef REGEX_H\n#define REGEX_H\n\n#include &lt;regex&gt;\n\n/******************************  REGEX  *************************/\nclass MyRegex {\n regex reg;\n StrategieLitteraux* strategie;\n\npublic :\n MyRegex(regex _reg, StrategieLitteraux* _strategie) : reg(_reg), strategie(_strategie) {}\n virtual ~MyRegex() {}\n void execute(Pile&amp; pile,const QString&amp; s) { strategie-&gt;execute(pile,s); }\n regex getRegex() const {return reg;}\n\n};\n/*******************************************************************/\n#endif // REGEX_H\n</code></pre>\n\n<p>And I'm getting this error : </p>\n\n<blockquote>\n  <p>'regex' does not name a type</p>\n</blockquote>\n\n<p>I don't know what I'm doing wrong. Does anyone have any idea ? I've already used regex before, but this time I can't make it work. Thanks</p>\n"}, {"tags": ["c++", "mysql", "apache", "mamp"], "answers": [{"tags": [], "owner": {"reputation": 3913, "user_id": 2216414, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/mudUB.jpg?s=128&g=1", "display_name": "Cristian Meneses", "link": "https://stackoverflow.com/users/2216414/cristian-meneses"}, "is_accepted": false, "score": 1, "last_activity_date": 1464213285, "creation_date": 1464213285, "answer_id": 37448279, "question_id": 37448211, "link": "https://stackoverflow.com/questions/37448211/mamp-unable-to-start-servers-mysql-apache/37448279#37448279", "title": "MAMP unable to start servers (mysql,apache)", "body": "<p>The problem is that the Universal CRT which is part of the Visual C++ Redistributable for Visual Studio 2015 failed to install or is missing.</p>\n\n<p>Download the Visual C++ Redistributable:</p>\n\n<p>For Windows 64-bit</p>\n\n<p><a href=\"http://download.microsoft.com/download/8/c/b/8cb4af84-165e-4b36-978d-e867e07fc707/vc_redist.x64.exe\" rel=\"nofollow\">Visual C++ Redistributable for Visual Studio 2015 (64-bit)</a></p>\n\n<p>For Windows 32-bit</p>\n\n<p><a href=\"http://download.microsoft.com/download/9/b/3/9b3d2920-49f7-4e76-a55c-d72b51e44537/vc_redist.x86.exe\" rel=\"nofollow\">Visual C++ Redistributable for Visual Studio 2015 (32-bit)</a> </p>\n\n<p>Run the vc_redist.x64.exe (64-bit) or vc_redist.x86.exe (32-bit) to install it and it should work fine</p>\n"}], "owner": {"reputation": 317, "user_id": 5524834, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3e88c1b163d6479d2c44647865d2b40e?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Blow", "link": "https://stackoverflow.com/users/5524834/joe-blow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464286709, "creation_date": 1464212929, "last_edit_date": 1464286709, "question_id": 37448211, "link": "https://stackoverflow.com/questions/37448211/mamp-unable-to-start-servers-mysql-apache", "title": "MAMP unable to start servers (mysql,apache)", "body": "<p>I've been trying to start mysql and apache servers locally on my machine for a school homework with the help of MAMP3.2.1 but everytime I open MAMP, i get these errors: <a href=\"https://i.stack.imgur.com/57Fk7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/57Fk7.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/3YRSY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3YRSY.png\" alt=\"enter image description here\"></a></p>\n\n<p>From what i gathered from the net, this error appears when I'm installing 32bit software on a 64bit machine. Another report pointed on the error being caused by not having miscrosoft's visual c++ redistributable 2015 installed. I did that, but the error didn't go away. MAMP's only version for windows (I'm having 8.1) is 3.2.1 so I can't swap versions. Really any help would be much appreciated</p>\n\n<p>Edit: I can't even intall the redistr packages right:<a href=\"https://i.stack.imgur.com/57l2h.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/57l2h.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "assembly", "borland-c++"], "comments": [{"owner": {"reputation": 8811, "user_id": 6248528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076d6f693bbd13804362e8208009dbcb?s=128&d=identicon&r=PG", "display_name": "Solarflare", "link": "https://stackoverflow.com/users/6248528/solarflare"}, "edited": false, "score": 0, "creation_date": 1464213537, "post_id": 37448198, "comment_id": 62398466, "body": "If you enter the root password you can do whatever you want (if you don&#39;t have a tpm module of course). Why would that be surprising? The whole os consists of applications with more or less privileges."}, {"owner": {"reputation": 55, "user_id": 6139074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33c83eef0d9c7713da671f90c2795bd9?s=128&d=identicon&r=PG&f=1", "display_name": "tellerath", "link": "https://stackoverflow.com/users/6139074/tellerath"}, "reply_to_user": {"reputation": 8811, "user_id": 6248528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076d6f693bbd13804362e8208009dbcb?s=128&d=identicon&r=PG", "display_name": "Solarflare", "link": "https://stackoverflow.com/users/6248528/solarflare"}, "edited": false, "score": 0, "creation_date": 1464213597, "post_id": 37448198, "comment_id": 62398498, "body": "@Solarflare Sorry for not mentioning it, but this is a Windows project."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 8811, "user_id": 6248528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076d6f693bbd13804362e8208009dbcb?s=128&d=identicon&r=PG", "display_name": "Solarflare", "link": "https://stackoverflow.com/users/6248528/solarflare"}, "edited": false, "score": 0, "creation_date": 1464213759, "post_id": 37448198, "comment_id": 62398556, "body": "@Solarflare: There is a difference between running as an administrator, and executing privileged instructions. The latter gives you <b>way</b> more privileges (e.g. reading process memory of service applications)."}, {"owner": {"reputation": 8811, "user_id": 6248528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076d6f693bbd13804362e8208009dbcb?s=128&d=identicon&r=PG", "display_name": "Solarflare", "link": "https://stackoverflow.com/users/6248528/solarflare"}, "edited": false, "score": 0, "creation_date": 1464213811, "post_id": 37448198, "comment_id": 62398571, "body": "That applies to windows too. If you enter the administrator password you can do whatever you want (if you don&#39;t have a tpm module of course)."}, {"owner": {"reputation": 23944, "user_id": 1305969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wlo8z.png?s=128&g=1", "display_name": "zx485", "link": "https://stackoverflow.com/users/1305969/zx485"}, "edited": false, "score": 0, "creation_date": 1464213860, "post_id": 37448198, "comment_id": 62398599, "body": "Your &quot;problem&quot; is: You&#39;re thinking sane - you&#39;re thinking in <i>Protected Mode</i> environment. <a href=\"https://en.wikipedia.org/wiki/Borland_C%2B%2B\" rel=\"nofollow noreferrer\">Borland C++ 3.1 Compiler</a> is not necessarily like that: <i>No <b>Protected Mode</b> =&gt; No (or fewer) problems accessing privileged instructions.</i>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 8811, "user_id": 6248528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076d6f693bbd13804362e8208009dbcb?s=128&d=identicon&r=PG", "display_name": "Solarflare", "link": "https://stackoverflow.com/users/6248528/solarflare"}, "edited": false, "score": 0, "creation_date": 1464213868, "post_id": 37448198, "comment_id": 62398605, "body": "@Solarflare: No, it doesn&#39;t. An administrator cannot access resources protected by the local system account, for example. And the local system account cannot write to LDT&#39;s or GDT&#39;s. Code running in ring 0, on the other hand, can."}, {"owner": {"reputation": 55, "user_id": 6139074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33c83eef0d9c7713da671f90c2795bd9?s=128&d=identicon&r=PG&f=1", "display_name": "tellerath", "link": "https://stackoverflow.com/users/6139074/tellerath"}, "edited": false, "score": 3, "creation_date": 1464213975, "post_id": 37448198, "comment_id": 62398651, "body": "Why was this marked as duplicate. I&#39;ve read the linked question before posting this one and found no clear answer to why (and how) Borland allows this? Also, as you can see from the question, I am NOT writing a driver."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 2, "creation_date": 1464214126, "post_id": 37448198, "comment_id": 62398705, "body": "Exactly what privileged instructions does your Borland C++ program need to execute?  For compatibility with older software, Windows allows some of these to succeed in a user mode program, will emulate others, and will disallow others still.  Also the exact mix of what&#39;s allowed or not allowed depends on what version on Windows you&#39;re talking about and I think may also depend on whether it&#39;s an x64 version of Windows or not."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 4, "creation_date": 1464214253, "post_id": 37448198, "comment_id": 62398752, "body": "Borland 3.1 generated 16-bit code.  Using privileged instructions was entirely common, such code did not run on a protected mode operating system yet.  It was in fact required, the INT instruction was necessary to invoke DOS and BIOS functions.  Today you would run such a program on a DOS emulator.  Which emulates the behavior of these kind of privileged instructions by handling the processor fault.  You are not exactly learning practical skills that are useful today, not uncommon in school projects.  That&#39;s okay, you are learning how to learn."}, {"owner": {"reputation": 23944, "user_id": 1305969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wlo8z.png?s=128&g=1", "display_name": "zx485", "link": "https://stackoverflow.com/users/1305969/zx485"}, "edited": false, "score": 0, "creation_date": 1464214423, "post_id": 37448198, "comment_id": 62398814, "body": "@tellerath: Borland doesn&#39;t allow that, because it cannot allow that. Borland cannot - under <b>no</b> circumstances - circumvent protected mode. No one can (except hardware hackers ;-) because preventing that is the purpose of protected mode. Why &quot;Remy Lebeau&quot; marked your question as a duplicate? <i>Because he can!</i> He is gold in the <code>c++</code> tag and decided to do so."}, {"owner": {"reputation": 55, "user_id": 6139074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33c83eef0d9c7713da671f90c2795bd9?s=128&d=identicon&r=PG&f=1", "display_name": "tellerath", "link": "https://stackoverflow.com/users/6139074/tellerath"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1464214488, "post_id": 37448198, "comment_id": 62398845, "body": "@MichaelBurr Well for example i need to be able to set interrupt flag or override interrupt handlers, which people were able to do just by executing inline assembly. Could you provide me with some resource on this emulation techniques, since I really have no idea about it. It&#39;s a Windows 7 (x86)."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 3, "creation_date": 1464214774, "post_id": 37448198, "comment_id": 62398948, "body": "Sounds like you are still missing the &quot;learning how to learn&quot; goal.  Your teacher <i>intentionally</i> picked a project that you cannot get help with on a site like this because it is no longer relevant to computing today.  His goal is to force you to learn how to learn by researching this yourself.  You&#39;ll have lots and lots of use for that in your career after school."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1464215203, "post_id": 37448198, "comment_id": 62399114, "body": "You may want to Google for information on &quot;Virtual 8086&quot; mode, which is what is largely used on Windows to support 16-bit applications. Virtual 8086 mode is not supported on x64 versions of Windows, so what surprises you as working on your Windows machine will probably not work at all on a Win x64 machine."}, {"owner": {"reputation": 55, "user_id": 6139074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33c83eef0d9c7713da671f90c2795bd9?s=128&d=identicon&r=PG&f=1", "display_name": "tellerath", "link": "https://stackoverflow.com/users/6139074/tellerath"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1464215275, "post_id": 37448198, "comment_id": 62399145, "body": "@HansPassant Well in many similar instances, I would say that this was caused by obsolete materials and subjects, but since the professor who gave us the assignment is highly respected and teaches some rather advanced and modern concepts as well, I will agree with you on that point. However, I might have put myself in an awkward position by not starting this project on time. I have learned some things from the comments and found a starting point so I hope I&#39;ll be able to fully answer my own question after I&#39;m done with the research :)"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 3, "creation_date": 1464217330, "post_id": 37448198, "comment_id": 62399807, "body": "I saw a comment saying you are using Windows 7 x86. The x86 (32-bit versions of Windows) still support <a href=\"https://en.wikipedia.org/wiki/Virtual_DOS_machine#Windows_NTVDM\" rel=\"nofollow noreferrer\">NTVDM</a>. NTVDM is a limited Virtual DOS environment that  uses VM8086 mode on 386 processors. Your 16-bit C++ program when run on Windows is loading your program into an NTVDM session. Your program thinks it is running on real hardware (but it is virtualized).Privileged instructions (I assume things like CLI/STI) are trapped by the processor and <i>simulated</i>."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "reply_to_user": {"reputation": 23944, "user_id": 1305969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wlo8z.png?s=128&g=1", "display_name": "zx485", "link": "https://stackoverflow.com/users/1305969/zx485"}, "edited": false, "score": 0, "creation_date": 1464329657, "post_id": 37448198, "comment_id": 62449928, "body": "@zx485 You can use priviledged code from borland even on nowadays OS without emulation. But you need an driver for that like DLPORTIO. This was commonly used as workaround for accessing things like <b>LPT</b> from Windows due to bug in the WinAPI making it impossible to access the way it should."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1464329743, "post_id": 37448198, "comment_id": 62449966, "body": "@RossRidge The down-votes where clear in your favor... I deleted my answer"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 6139074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33c83eef0d9c7713da671f90c2795bd9?s=128&d=identicon&r=PG&f=1", "display_name": "tellerath", "link": "https://stackoverflow.com/users/6139074/tellerath"}, "edited": false, "score": 0, "creation_date": 1464248165, "post_id": 37448713, "comment_id": 62409158, "body": "Again, my question was somewhat poorly phrased. I was able to compile the code but not run it."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 55, "user_id": 6139074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33c83eef0d9c7713da671f90c2795bd9?s=128&d=identicon&r=PG&f=1", "display_name": "tellerath", "link": "https://stackoverflow.com/users/6139074/tellerath"}, "edited": false, "score": 0, "creation_date": 1464249272, "post_id": 37448713, "comment_id": 62409797, "body": "So what was your question then?"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1464301372, "post_id": 37448713, "comment_id": 62442505, "body": "I&#39;m pretty sure the actual question was why Borland-produced 16bit executables can run privileged instructions.  i.e. the question that Michael Petch answered in comments about NTVDM providing a virtual machine for 16bit executables."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1464303516, "post_id": 37448713, "comment_id": 62443189, "body": "@PeterCordes That&#39;s what I thought at first, but he said he wasn&#39;t able to run it."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1464303871, "post_id": 37448713, "comment_id": 62443306, "body": "You mean the OP&#39;s comment on Govind&#39;s answer?  He said he tried running code he built with MSVC, which will be 32 or 64bit.  So he wasn&#39;t trying it from a 16bit executable, so no NTVDM."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 5, "last_activity_date": 1464215398, "creation_date": 1464215398, "answer_id": 37448713, "question_id": 37448198, "link": "https://stackoverflow.com/questions/37448198/accessing-ring-0-mode-from-user-applications-and-why-borland-allows-this/37448713#37448713", "title": "Accessing ring 0 mode from user applications ( and why Borland allows this )", "body": "<p>The compiler allows it because the compiler's job is strictly to convert the input into compiled output. It's not designed to impose or enforce any system security rules. That's the job of the execution environment, typically the OS or emulator that executes the compiled code.</p>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 6139074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33c83eef0d9c7713da671f90c2795bd9?s=128&d=identicon&r=PG&f=1", "display_name": "tellerath", "link": "https://stackoverflow.com/users/6139074/tellerath"}, "edited": false, "score": 1, "creation_date": 1464248129, "post_id": 37448799, "comment_id": 62409140, "body": "Thank&#39;s for the explanation regarding point 1. I was too able to compile the code without problem in MSVC 2015 but of course, running it produces errors. I originally wanted to write this project in Visual Studio, but i think It&#39;ll be a pain in the ass to integrate Borland compiler into VS."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1464304086, "post_id": 37448799, "comment_id": 62443376, "body": "@Govind: important to note that only 32bit windows supports NTVDM.  64bit windows can&#39;t, because <a href=\"https://en.wikipedia.org/wiki/Virtual_8086_mode\" rel=\"nofollow noreferrer\">virtual 8086 mode doesn&#39;t work with long mode</a>, only with the kernel in legacy mode.  Running 16bit code natively on a 64bit system is only possible with VT-x (hardware virtualization)."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1464366585, "post_id": 37448799, "comment_id": 62473030, "body": "@PeterCordes Yes, but the OP specifically stated that he is using the x86 version of Windows 7 in one of his comments on the question."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1464370087, "post_id": 37448799, "comment_id": 62474797, "body": "Stackoverflow answers are supposed to be useful for everyone, not <i>just</i> the OP.  That&#39;s the major point of this site.  It will work in this case, but most people choose 64bit OSes because 32bit is obsolete."}], "tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": true, "score": 6, "last_activity_date": 1464215994, "creation_date": 1464215994, "answer_id": 37448799, "question_id": 37448198, "link": "https://stackoverflow.com/questions/37448198/accessing-ring-0-mode-from-user-applications-and-why-borland-allows-this/37448799#37448799", "title": "Accessing ring 0 mode from user applications ( and why Borland allows this )", "body": "<p>Two things: </p>\n\n<ol>\n<li><p>Back in the days of 8086 real mode there were no privilege levels. Borland 3.1 was a 16-bit compiler.  If you're running code it produces on a modern version of Windows, it will run in Virtual 8086 mode using the NTVDM, which also has no privilege levels.</p></li>\n<li><p>Even when using a modern compiler / assembler, it generally won't complain about privileged instructions even in protected mode and long mode.  This source code compiles just fine for me in MSVC 2015 but crashes whenever I run it because it tries to access a register that is off-limits to user-mode applications:</p></li>\n</ol>\n\n<pre>\nint  main()\n{\n    __asm\n    {\n        mov eax, cr0\n        or eax, 1\n        mov cr0, eax\n    }\n    return 0;\n} \n</pre>\n"}], "owner": {"reputation": 55, "user_id": 6139074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33c83eef0d9c7713da671f90c2795bd9?s=128&d=identicon&r=PG&f=1", "display_name": "tellerath", "link": "https://stackoverflow.com/users/6139074/tellerath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2012, "favorite_count": 2, "accepted_answer_id": 37448799, "answer_count": 2, "score": 5, "last_activity_date": 1464291521, "creation_date": 1464212872, "last_edit_date": 1464248265, "question_id": 37448198, "link": "https://stackoverflow.com/questions/37448198/accessing-ring-0-mode-from-user-applications-and-why-borland-allows-this", "title": "Accessing ring 0 mode from user applications ( and why Borland allows this )", "body": "<p>As the semester's deadlines approach, I decided to start working on a project in Operating Systems course at my college. \nThe problem with the project assignment is that it requires students to develop a user application (<code>exe</code>) that will execute as a simple kernel ( basic process and thread management ). </p>\n\n<p>First thing that popped to my mind was : <em>How the hell am I supposed to execute privileged code in user application?</em></p>\n\n<p>After consulting with other students ( who did the project on time ), I learned that they were able to execute privileged code without problems using Borland 3.1 compiler. However, none of them found that weird nor knew why that worked. Why ( better question here would be <em>how</em> ) does Borland do this? Doesn't this violate fundamental principles of OS security?</p>\n\n<p><strong>Note:</strong> I added C++ tag because the project is supposed to be written as a C++ application, with most of the privileged code executed as inline assembly. </p>\n\n<p><strong>Update</strong> My question was somewhat poorly phrased originally. Of course I was able to compile code with privileged instructions with any compiler - running the code was the problem.  </p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": 4, "last_activity_date": 1464213051, "creation_date": 1464213051, "answer_id": 37448229, "question_id": 37448093, "link": "https://stackoverflow.com/questions/37448093/how-to-change-unwanted-behavior-in-a-method/37448229#37448229", "title": "How to change unwanted behavior in a method", "body": "<p><code>HttpClient::execute</code>'s job appears to be to send an <code>HTTP</code> request, and return a response.</p>\n\n<p>If so, then passing an <code>HttpResponse</code> object to it as a parameter makes little sense.</p>\n\n<p><code>execute()</code> should simply take a <code>req</code> parameter, and return the <code>HttpResponse</code>.</p>\n\n<p>A modern C++11 compiler is going to optimize away most of the overhead of returning a non-POD object, thanks to move semantics, leaving you with clean, unambiguous code, with no potential side effects.</p>\n"}], "owner": {"reputation": 4396, "user_id": 2064196, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/YOB5j.jpg?s=128&g=1", "display_name": "Bulletmagnet", "link": "https://stackoverflow.com/users/2064196/bulletmagnet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1464213051, "creation_date": 1464212488, "question_id": 37448093, "link": "https://stackoverflow.com/questions/37448093/how-to-change-unwanted-behavior-in-a-method", "title": "How to change unwanted behavior in a method", "body": "<p>We have some classes:</p>\n\n<pre><code>struct HttpRequest {\n    std::string url;\n};\n\nstruct HttpResponse {\n    int          status_code;\n    std::string  status_text;\n    std::string  content;\n};\n\nstruct HttpClient {\n    void execute(HttpRequest const&amp; req, HttpResponse&amp; resp);\n};\n\nsize_t\nappender(void *contents, size_t size, size_t nmemb, void *userp)\n{\n    auto&amp; ct = * reinterpret_cast&lt;std::string*&gt;(userp);\n    size_t bytes = size * nmemb;\n\n    ct.append(reinterpret_cast&lt;char*&gt;(contents), bytes);\n    return bytes;\n}\n\nvoid HttpClient::execute(HttpRequest const&amp; req, HttpResponse&amp; resp)\n{\n    auto curl = curl_easy_init();\n\n    curl_easy_setopt(curl, CURLOPT_URL, req.url.c_str());\n    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, appender);\n    curl_easy_setopt(curl, CURLOPT_WRITEDATA, &amp;resp.content);\n    // header callback etc.\n\n    CURLcode code = curl_easy_perform(curl);\n\n    curl_easy_cleanup(curl);\n    if (code != CURLE_OK) {\n        throw std::runtime_error(\"curl fail\");\n    }\n\n    return; // enjoy your HttpResponse\n}\n</code></pre>\n\n<p>We used them like this:</p>\n\n<pre><code>bool fatal(std::runtime_error const&amp; rte) {\n    return rte.what()[0] == 'F'; // if it starts with F, it's fatal\n    // not the actual implementation :)\n}\n\nconst int retries = 7;\n\nint do_something(std::string const&amp; url)\n{\n    HttpClient client;\n    HttpRequest req{ url };\n\n    for (int r = 0; r &lt; retries; ++r) try {\n        HttpResponse resp;\n\n        client.execute(req, resp);\n        //\n        if (resp.status_code / 100 == 2) { // a 2xx success code\n            return std::stoi(resp.content);\n        }\n        else { // maybe a 4xx client error or 5xx server error\n            throw std::runtime_error(\"HTTP error\");\n        }\n    }\n    catch (std::runtime_error const&amp; e) {\n        if (fatal(e))\n            throw;\n        else\n            continue; // retry\n    }\n\n    // ran out of retries\n    throw std::runtime_error(\"out of retries\");\n}\n</code></pre>\n\n<p>and all was good.\nHowever, somebody implemented a different pattern:</p>\n\n<pre><code>int worker(HttpRequest const&amp; req, HttpResponse&amp; resp)\n{\n    HttpClient client;\n    for (int r = 0; r &lt; retries; ++r) try {\n        client.execute(req, resp);\n        //\n        if (resp.status_code / 100 == 2) { // a 2xx success code\n            return std::stoi(resp.content);\n        }\n        else { // maybe a 4xx client error or 5xx server error\n            throw std::runtime_error(\"HTTP error\");\n        }\n    }\n    catch (std::runtime_error const&amp; e) {\n        if (fatal(e))\n            throw;\n        else\n            continue; // retry\n    }\n\n    // ran out of retries\n    throw std::runtime_error(\"out of retries\");\n}\n\nint do_something_else(std::string const&amp; url)\n{\n    HttpRequest req{ url };\n    HttpResponse resp;\n    return worker(req, resp);\n}\n</code></pre>\n\n<p>and now we discovered that we have unwanted behavior in <code>HttpClient::execute</code> : if the HttpResponse is not empty on entry (for example, we got a 503 Service unavailable, retry, and get a 200 OK), <code>execute</code> just appends to the existing content. This is not what we want: we already acted on the 503 response and we don't want the content of the 200 reply appended to whatever content the 503 reply had.</p>\n\n<p>We went through our code and found several usages similar to <code>do_something</code> and only one <code>do_something_else</code>. We never ever needed the (accidental) ability to append to an existing response.</p>\n\n<hr>\n\n<p>The question is, how do we fix this and make sure we don't run into surprises again? I can see several options:</p>\n\n<ul>\n<li>Leave everything as it is; clear the HttpResponse manually inside <code>do_something_else</code>; document the behavior (not ideal; people don't always read the documentation :)</li>\n<li>Change <code>HttpClient::execute</code> to clear the HttpResponse on entry. I dislike quietly changing the behavior behind the same interface (plus we need to change the unit tests).</li>\n<li>Add a wrapper member to HttpClient that clears the HttpResponse and then calls the original <code>HttpClient::execute</code>. This has the advantage that if we ever want the appending behavior, it's available. The disadvantage is that people might get the appending behavior inadvertently. </li>\n<li>Same as above, but rename the existing one to e.g. <code>execute_append</code> and call the new one <code>execute</code> (again, different behavior behind the same interface).</li>\n<li>Change <code>execute</code> to accept just a HttpRequest and return a HttpResponse by value. Because there's always a fresh HttpResponse created inside <code>execute</code>, appending is not a problem. Any performance penalty that remains after <a href=\"https://en.wikipedia.org/wiki/Return_value_optimization\">NRVO</a> is dwarfed by millisecond-to-second delays while performing HTTP. The real downside is that we have several unit-tests where <code>HttpClient::execute</code> is mocked via googlemock. If we change the signature, we'll have to change all the mocks and also every expectation that was doing SetArgReferee will have to be changed to Returns.</li>\n</ul>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["c++", "computational-geometry", "cgal", "delaunay", "voronoi"], "answers": [{"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 1, "last_activity_date": 1464432910, "last_edit_date": 1464432910, "creation_date": 1464222676, "answer_id": 37449719, "question_id": 37447998, "link": "https://stackoverflow.com/questions/37447998/how-to-print-edges-of-delaunay-graph/37449719#37449719", "title": "How to print Edges of Delaunay Graph?", "body": "<p>You can print the sites forming the edge like this:</p>\n\n<pre><code>for (int k = 1; eit != vd.finite_edges_end(); ++eit, ++k) {\n    DT::Edge e = *eit;\n    std::cout &lt;&lt; \"k = \" &lt;&lt; k &lt;&lt; std::endl;\n    if ( vd.is_infinite(e.first-&gt;vertex( vd.ccw(e.second) )) )\n        std::cout &lt;&lt; \"infinite\\n\";\n    else\n        std::cout &lt;&lt; e.first-&gt;vertex( vd.ccw(e.second) )-&gt;site() &lt;&lt; std::endl;\n    if ( vd.is_infinite(e.first-&gt;vertex( vd.cw(e.second) )) )\n        std::cout &lt;&lt; \"infinite\\n\";\n    else\n        std::cout &lt;&lt; e.first-&gt;vertex( vd.cw(e.second) )-&gt;site() &lt;&lt; std::endl;\n    if ( vd.is_infinite(e.first-&gt;vertex( e.second )) )\n        std::cout &lt;&lt; \"infinite\\n\";\n    else\n        std::cout &lt;&lt; e.first-&gt;vertex( e.second )-&gt;site() &lt;&lt; std::endl;\n    if ( vd.is_infinite(vd.tds().mirror_vertex(e.first, e.second) ) )\n        std::cout &lt;&lt; \"infinite\\n\";\n    else\n        std::cout &lt;&lt; vd.tds().mirror_vertex(e.first, e.second)-&gt;site() &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 1, "accepted_answer_id": 37449719, "answer_count": 1, "score": 2, "last_activity_date": 1464435327, "creation_date": 1464212039, "last_edit_date": 1495535344, "question_id": 37447998, "link": "https://stackoverflow.com/questions/37447998/how-to-print-edges-of-delaunay-graph", "title": "How to print Edges of Delaunay Graph?", "body": "<p>Following this: <a href=\"https://stackoverflow.com/questions/37384378/how-to-print-the-faces-of-a-voronoi-diagram\">How to print the faces of a Voronoi diagram?</a>, I now have:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;cassert&gt;\n\n#include &lt;CGAL/Exact_predicates_inexact_constructions_kernel.h&gt;\n#include &lt;CGAL/Segment_Delaunay_graph_2.h&gt;\n#include &lt;CGAL/Segment_Delaunay_graph_adaptation_policies_2.h&gt;\n#include &lt;CGAL/Segment_Delaunay_graph_traits_2.h&gt;\n\ntypedef CGAL::Exact_predicates_inexact_constructions_kernel K;\ntypedef CGAL::Segment_Delaunay_graph_traits_2&lt;K&gt; Gt;\ntypedef CGAL::Segment_Delaunay_graph_2&lt;Gt&gt; DT;\n\nint main() {\n\n    std::ifstream ifs(\"data.cin\");\n    assert( ifs );\n    DT         vd;\n    DT::Site_2 site;\n    // read the sites from the stream and insert them in the diagram\n    while ( ifs &gt;&gt; site ) { vd.insert( site ); }\n    ifs.close();\n    // validate the diagram\n    assert( vd.is_valid(true, 1) );\n    std::cout &lt;&lt; std::endl &lt;&lt; std::endl;\n    // Iterate over edges\n    DT::Finite_edges_iterator eit = vd.finite_edges_begin();\n    for (int k = 1; eit != vd.finite_edges_end(); ++eit, ++k) {\n        DT::Edge e = *eit;\n        //std::cout &lt;&lt; e &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>However, an edge cannot be printed that simply (with <code>cout</code>). How to do it?</p>\n\n<hr>\n\n<p>Here is the error from another attempt:</p>\n\n<pre><code>/home/gsamaras/CGAL-4.7/code/DelaunayTOvoronoi/delTovor.cpp:30:27: error: \u2018CGAL::Triangulation_ds_edge_iterator_2&lt;CGAL::Triangulation_data_structure_2&lt;CGAL::Segment_Delaunay_graph_vertex_base_2&lt;CGAL::Segment_Delaunay_graph_storage_traits_2&lt;CGAL::Segment_Delaunay_graph_traits_2&lt;CGAL::Epick&gt; &gt;, CGAL::Triangulation_ds_vertex_base_2&lt;void&gt; &gt;, CGAL::Segment_Delaunay_graph_face_base_2&lt;CGAL::Segment_Delaunay_graph_traits_2&lt;CGAL::Epick&gt;, CGAL::Triangulation_ds_face_base_2&lt;void&gt; &gt; &gt;, true&gt;::Edge\u2019 has no member named \u2018site\u2019\n         std::cout &lt;&lt; eit-&gt;site() &lt;&lt; std::endl;\n                           ^\n</code></pre>\n"}, {"tags": ["c++", "opencv", "face-detection"], "comments": [{"owner": {"reputation": 3122, "user_id": 1874627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eV76W.jpg?s=128&g=1", "display_name": "saurabheights", "link": "https://stackoverflow.com/users/1874627/saurabheights"}, "edited": false, "score": 0, "creation_date": 1464214456, "post_id": 37447522, "comment_id": 62398830, "body": "Can you add deallocate faseCascade before returning?"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1464217904, "post_id": 37447522, "comment_id": 62399922, "body": "Any particular reason to use an outdated version of OpenCV? Debug or release mode? Which libraries did you link with?"}, {"owner": {"reputation": 31, "user_id": 6383158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/317fe4b86d91623b21572b8ffdb33a52?s=128&d=identicon&r=PG&f=1", "display_name": "elHam", "link": "https://stackoverflow.com/users/6383158/elham"}, "reply_to_user": {"reputation": 3122, "user_id": 1874627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eV76W.jpg?s=128&g=1", "display_name": "saurabheights", "link": "https://stackoverflow.com/users/1874627/saurabheights"}, "edited": false, "score": 0, "creation_date": 1464267787, "post_id": 37447522, "comment_id": 62422184, "body": "@saurabheights When I do <code>delete faceCascade</code> before returning, I get the same Error Msg as before, only at the delete command instead at the end of the program."}, {"owner": {"reputation": 31, "user_id": 6383158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/317fe4b86d91623b21572b8ffdb33a52?s=128&d=identicon&r=PG&f=1", "display_name": "elHam", "link": "https://stackoverflow.com/users/6383158/elham"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1464268252, "post_id": 37447522, "comment_id": 62422554, "body": "@DanMa\u0161ek There is no other reason, than that my predecessors used the 2.4.9 version and I continued to use it. I&#39;m in the Debug mode.  I linked with these libraries: opencv_calib3d249d.lib opencv_contrib249d.lib opencv_core249d.lib opencv_features2d249d.lib opencv_flann249d.lib opencv_gpu249d.lib opencv_highgui249d.lib opencv_imgproc249d.lib opencv_legacy249d.lib opencv_ml249d.lib opencv_nonfree249d.lib opencv_objdetect249d.lib opencv_photo249d.lib opencv_stitching249d.lib opencv_ts249d.lib opencv_video249d.lib opencv_videostab249d.lib"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 6383158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/317fe4b86d91623b21572b8ffdb33a52?s=128&d=identicon&r=PG&f=1", "display_name": "elHam", "link": "https://stackoverflow.com/users/6383158/elham"}, "is_accepted": true, "score": 1, "last_activity_date": 1464270448, "creation_date": 1464270448, "answer_id": 37462731, "question_id": 37447522, "link": "https://stackoverflow.com/questions/37447522/face-detection-with-opencv-cascadeclassifier-exe-has-triggered-a-breakpoint/37462731#37462731", "title": "Face Detection with OpenCV CascadeClassifier: .exe has triggered a breakpoint", "body": "<p>The problem was that I had the wrong path to the opencv bin folder in my Environment Variables.\nI recently stopped using Visual Studio 2010 and started using VS2012 and forgot to adapt the path.\nI had to change it from<br>\nC:\\opencv\\build\\x64\\vc10\\bin;<br>\nto<br>\nC:\\opencv\\build\\x64\\vc11\\bin;<br>\nand restart the computer.</p>\n\n<p>Now everything seems to work properly.</p>\n"}], "owner": {"reputation": 31, "user_id": 6383158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/317fe4b86d91623b21572b8ffdb33a52?s=128&d=identicon&r=PG&f=1", "display_name": "elHam", "link": "https://stackoverflow.com/users/6383158/elham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 0, "accepted_answer_id": 37462731, "answer_count": 1, "score": 1, "last_activity_date": 1464270448, "creation_date": 1464210037, "question_id": 37447522, "link": "https://stackoverflow.com/questions/37447522/face-detection-with-opencv-cascadeclassifier-exe-has-triggered-a-breakpoint", "title": "Face Detection with OpenCV CascadeClassifier: .exe has triggered a breakpoint", "body": "<p>I am trying to write a simple program, that reads an image, detects a face on the image and marks the face with an rectangle on the image.\nI use Visual Studio 2012 and OpenCV 2.4.9.</p>\n\n<p>I use the cv::CascadeClassifier and haarcascade_frontalface_default.xml that are provided by OpenCV. Here is my Code:</p>\n\n<pre><code>#include &lt;opencv2/imgproc/imgproc.hpp&gt;  // Gaussian Blur\n#include &lt;opencv2/core/core.hpp&gt;        // Basic OpenCV structures (cv::Mat, Scalar)\n#include &lt;opencv2/highgui/highgui.hpp&gt;  // OpenCV window I/O\n#include &lt;opencv2/features2d/features2d.hpp&gt;\n#include &lt;opencv2/objdetect/objdetect.hpp&gt;\n\n#include &lt;stdio.h&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\nusing namespace cv;\n\nint main(int argc, char** argv)\n{\n\n    //load image, in this case it's allready gray\n    Mat img = imread(\"H:/BioID/BioID-FaceDatabase-V1.2/BioID_0000.pgm\");\n\n    Mat grayImg;   \n    cvtColor(img, grayImg, CV_BGR2GRAY);\n\n    //create vector of rectangles that will represent the faces\n    vector&lt;Rect&gt; faces;\n\n    CascadeClassifier* faseCascade = new CascadeClassifier(\"C:\\\\opencv\\\\sources\\\\data\\\\haarcascades\\\\haarcascade_frontalface_default.xml\");\n\n    faseCascade-&gt;detectMultiScale(grayImg, faces);\n\n    //draw rectangle on img; param: image, rectangle, color\n    cv::rectangle(img, faces[0],Scalar(255,0,0),2); \n\n    //display image\n    imshow(\"image\", img);\n\n    waitKey(0);     \n\n    return 0;\n}\n</code></pre>\n\n<p>The program runs properly, in the end it shows me the image with a blue rectangle around the face. But after I press a Key and the program is trying to close, it breaks.</p>\n\n<p>The Output shows:</p>\n\n<pre><code>HEAP[myProgram.exe]: Invalid address specified to RtlValidateHeap( 00000004F9F30000, 00000004FC23ECE0 )\nmyProgram.exe has triggered a breakpoint.\n</code></pre>\n\n<p>If I comment out the detectMultiscale function and the draw rectangle function. The program runs without an error.</p>\n\n<p>Does anybody have an idea, what I did wrong?</p>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["c++", "windows", "dll", "linker", "64-bit"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1464212512, "post_id": 37447097, "comment_id": 62398064, "body": "I know, this is just for testing, but do not call <code>MessageBox</code> from <code>DllMain</code> (see <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dn633971.aspx\" rel=\"nofollow noreferrer\">Dynamic-Link Library Best Practices</a>). Calling <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa363362.aspx\" rel=\"nofollow noreferrer\">OutputDebugString</a> is safe, though. As an aside, since you are using Code::Blocks and are subject to its poor choice of default settings: You should absolutely, positively be calling the Unicode versions of the Windows API (i.e. <code>MessageBoxW</code> instead of <code>MessageBoxA</code>)."}, {"owner": {"reputation": 1129, "user_id": 1866808, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/590f81e0d4226f41f1d0f9cc4c01fd36?s=128&d=identicon&r=PG", "display_name": "bombax", "link": "https://stackoverflow.com/users/1866808/bombax"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1464221062, "post_id": 37447097, "comment_id": 62400695, "body": "Excellent, thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 1129, "user_id": 1866808, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/590f81e0d4226f41f1d0f9cc4c01fd36?s=128&d=identicon&r=PG", "display_name": "bombax", "link": "https://stackoverflow.com/users/1866808/bombax"}, "is_accepted": true, "score": 1, "last_activity_date": 1464209601, "creation_date": 1464209601, "answer_id": 37447429, "question_id": 37447097, "link": "https://stackoverflow.com/questions/37447097/compiling-a-64-bit-dll-with-codeblocks-gives-linker-errors/37447429#37447429", "title": "Compiling a 64-bit DLL with CodeBlocks gives linker errors", "body": "<p>Fixed, I'm an idiot. Long ago, I had set <code>-m32</code> as a permanent flag in the linker settings under \"Compiler and debugger.\" Removed it, works perfectly now.</p>\n"}], "owner": {"reputation": 1129, "user_id": 1866808, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/590f81e0d4226f41f1d0f9cc4c01fd36?s=128&d=identicon&r=PG", "display_name": "bombax", "link": "https://stackoverflow.com/users/1866808/bombax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 514, "favorite_count": 0, "accepted_answer_id": 37447429, "answer_count": 1, "score": 1, "last_activity_date": 1464209601, "creation_date": 1464208356, "last_edit_date": 1464208712, "question_id": 37447097, "link": "https://stackoverflow.com/questions/37447097/compiling-a-64-bit-dll-with-codeblocks-gives-linker-errors", "title": "Compiling a 64-bit DLL with CodeBlocks gives linker errors", "body": "<p>I have prepared a very simple DLL program in C++, on Windows 7 64-bit. I've made two versions, 64-bit and 32-bit. The 32-bit project I compile with linker and compiler set with the <code>-m32</code> flag. I use <code>-std=c++11</code>. Here is its code:</p>\n\n<p>main.h</p>\n\n<pre><code>#ifndef __MAIN_H__\n#define __MAIN_H__\n\n#include &lt;windows.h&gt;\n\n/*  To use this exported function of dll, include this header\n *  in your project.\n */\n\n#ifdef BUILD_DLL\n    #define DLL_EXPORT __declspec(dllexport)\n#else\n    #define DLL_EXPORT __declspec(dllimport)\n#endif\n\n\n#ifdef __cplusplus\nextern \"C\"\n{\n#endif\n\nvoid DLL_EXPORT SomeFunction(const LPCSTR sometext);\n\n#ifdef __cplusplus\n}\n#endif\n\n#endif // __MAIN_H__\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"main.h\"\n\n// a sample exported function\nvoid DLL_EXPORT SomeFunction(const LPCSTR sometext)\n{\n    MessageBoxA(0, sometext, \"DLL Message\", MB_OK | MB_ICONINFORMATION);\n}\n\nBOOL WINAPI DllMain(HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpvReserved)\n{\n    switch (fdwReason)\n    {\n        case DLL_PROCESS_ATTACH:\n            MessageBoxA(0, \"DLL_PROCESS_ATTACH\", \"DLL Message\", MB_OK | MB_ICONINFORMATION);\n            break;\n\n        case DLL_PROCESS_DETACH:\n            MessageBoxA(0, \"DLL_PROCESS_DETACH\", \"DLL Message\", MB_OK | MB_ICONINFORMATION);\n            break;\n\n        case DLL_THREAD_ATTACH:\n            MessageBoxA(0, \"DLL_THREAD_ATTACH\", \"DLL Message\", MB_OK | MB_ICONINFORMATION);\n            break;\n\n        case DLL_THREAD_DETACH:\n            MessageBoxA(0, \"DLL_THREAD_DETACH\", \"DLL Message\", MB_OK | MB_ICONINFORMATION);\n            break;\n    }\n    return TRUE; // succesful\n}\n</code></pre>\n\n<p>The DLL compiles fine and works well in the 32-bit version. But when I compile to 64-bit by removing the <code>-m32</code> option on everything, I get a linker error:</p>\n\n<p>obj\\Release\\main.o:main.cpp|| undefined reference to `_imp_MessageBoxA'|</p>\n\n<p>Replacing with <code>-m64</code> does not help. Here is my MingW version details:</p>\n\n<pre><code>Using built-in specs.\nCOLLECT_GCC=x86_64-w64-mingw32-g++.exe\nCOLLECT_LTO_WRAPPER=E:/Program\\ Files\\ (x86)/CodeBlocks/MinGW/bin/../libexec/gcc/x86_64-w64-mingw32/5.1.0/lto-wrapper.exe\nTarget: x86_64-w64-mingw32\nConfigured with: ../../../src/gcc-5.1.0/configure --build=x86_64-w64-mingw32 --enable-targets=all --enable-languages=ada,c,c++,fortran,lto,objc,obj-c++ --enable-libgomp --enable-lto --enable-graphite --enable-cxx-flags=-DWINPTHREAD_STATIC --disable-build-with-cxx --disable-build-poststage1-with-cxx --enable-libstdcxx-debug --enable-threads=posix --enable-version-specific-runtime-libs --enable-fully-dynamic-string --enable-libstdcxx-threads --enable-libstdcxx-time --with-gnu-ld --disable-werror --disable-nls --disable-win32-registry --prefix=/mingw64tdm --with-local-prefix=/mingw64tdm --with-pkgversion=tdm64-1 --with-bugurl=http://tdm-gcc.tdragon.net/bugs\nThread model: posix\ngcc version 5.1.0 (tdm64-1) \n</code></pre>\n\n<p>What could I be doing wrong? Could it be that I need to include a special 64-bit windows header? Many thanks for any direction! :)</p>\n"}, {"tags": ["c++", "struct", "visual-studio-2015"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1464208286, "post_id": 37446947, "comment_id": 62396110, "body": "Do you want a standards quote, confirmation that your compiler does indeed behave the way you tested it to behave, information about if/when this will change, or for us to find comprehensive documentation and recordings of all standarization meetings where this was decided by omission or commission?  Or all of the above?  I mean, &quot;why: is a question, but it is a vague one.  Please be specific, and ask a question on-topic and sufficiently narrow to be answered."}, {"owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1464208757, "post_id": 37446947, "comment_id": 62396369, "body": "@Yakk Please see the answers. The &quot;why&quot; is a valid question in this case because the code is well-formed. The problem is that this particular feature of C++14 (lifting the previous restriction, experienced and described in OP) has not yet been implemented in VS. So it is not my error, standard nor my omission to set any compiler flag etc. Since I did not know what exactly of the above was the issue I asked."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1464209124, "post_id": 37446947, "comment_id": 62396552, "body": "@Yakk I&#39;m trying to find that great meta thread about asking &quot;why&quot; questions and I can&#39;t find it... gah..."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1464210119, "post_id": 37446947, "comment_id": 62397055, "body": "@Barry: <a href=\"http://meta.stackoverflow.com/q/323334/103167\">This one?</a>"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1464210260, "post_id": 37446947, "comment_id": 62397133, "body": "@BenVoigt Yes! thanks."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1464211343, "post_id": 37446947, "comment_id": 62397558, "body": "@Barry: &#39;twas the second hit searching meta for <code>[scope]</code>, which is the tag for discussions around the off-topic threshold."}], "answers": [{"comments": [{"owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "edited": false, "score": 0, "creation_date": 1464208437, "post_id": 37447085, "comment_id": 62396190, "body": "Actually it seems it is not a bug per se but rather shortcoming of MS in updating VS to C++14: <a href=\"http://en.cppreference.com/w/cpp/language/aggregate_initialization\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/aggregate_initialization</a> &quot;No default member initializers (from C++11 until C++14)&quot;"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "edited": false, "score": 0, "creation_date": 1464208486, "post_id": 37447085, "comment_id": 62396219, "body": "@Resurrection Ah, righto. One min."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 7, "last_activity_date": 1464211892, "last_edit_date": 1464211892, "creation_date": 1464208320, "answer_id": 37447085, "question_id": 37446947, "link": "https://stackoverflow.com/questions/37446947/why-do-default-member-values-prohibit-use-of-braced-list-initialization/37447085#37447085", "title": "Why do default member values prohibit use of braced-list initialization?", "body": "<p>In C++11, an aggregate was defined in [dcl.init.aggr] as:</p>\n\n<blockquote>\n  <p>An aggregate is an array or a class (Clause 9) with no user-provided constructors (12.1), <strong>no brace-or-equal-initializers for non-static data members (9.2)</strong>, no private or protected non-static data members (Clause 11), no base classes (Clause 10), and no virtual functions (10.3).</p>\n</blockquote>\n\n<p>That has since been improved, as a result of <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3605.html\" rel=\"nofollow\">N3605</a> to remove that condition (and has since then been reformatted to show those conditions as a bulleted list. Yay readability). </p>\n\n<p>So as a result, in C++11, this:</p>\n\n<pre><code>struct S { int index = -1; };\n\nint main() {\n    S s{10};\n}\n</code></pre>\n\n<p>is ill-formed because <code>S</code> doesn't qualify as an aggregate, so we don't attempt to do aggregate initialization, and there's no matching constructor for an <code>int</code>. </p>\n\n<p>But as of C++14, <code>S</code> is an aggregate, so the code is well-formed. So either you're compiling in C++11 mode or VS2015 doesn't support C++14 aggregate initialization yet. </p>\n"}], "owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "closed_date": 1464213647, "accepted_answer_id": 37447085, "answer_count": 1, "score": 2, "last_activity_date": 1464211892, "creation_date": 1464207825, "last_edit_date": 1464208970, "question_id": 37446947, "link": "https://stackoverflow.com/questions/37446947/why-do-default-member-values-prohibit-use-of-braced-list-initialization", "closed_reason": "Duplicate", "title": "Why do default member values prohibit use of braced-list initialization?", "body": "<p>Consider this struct:</p>\n\n<pre><code>struct S { int index; };\n</code></pre>\n\n<p>It can be initialized using the braced-list like so:</p>\n\n<pre><code>S s{10}; //s::index becomes 10\n</code></pre>\n\n<p>However if I specify a default value for a member:</p>\n\n<pre><code>struct S { int index = -1; };\n</code></pre>\n\n<p>The braced-list initialization gives me a compiler error that it cannot convert  <code>initializer list</code> to <code>S</code>. I suspect it might have to do with the default constructors being generated for the struct because I have specified the default value. But why cannot the initializer list override that?</p>\n\n<p>The reason I want this is that I want to either initialize the struct with values or default it to some \"invalid\" default values. Because of this restriction I have to either specify a constructor myself or initialize the \"invalid\" defaults explicitly every time.</p>\n\n<p>I am using VS2015 compiler.</p>\n"}, {"tags": ["c++", "makefile", "sdl"], "comments": [{"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1464212851, "post_id": 37446912, "comment_id": 62398195, "body": "That is not a message printed by the most commonly used version of make (GNU make).  So, please provide information about what operating system and version of OS you&#39;re using, what make command you are invoking, and what type and version of the command you&#39;re using.  Usually when asking questions it&#39;s best to include not just your exact file but also cut and paste the command you invoked and the error output you received."}, {"owner": {"reputation": 159, "user_id": 5692896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jO0GmVdF4sA/AAAAAAAAAAI/AAAAAAAAaj0/lPtObyd1d5s/photo.jpg?sz=128", "display_name": "Mikhail Volskiy", "link": "https://stackoverflow.com/users/5692896/mikhail-volskiy"}, "edited": false, "score": 1, "creation_date": 1464212985, "post_id": 37446912, "comment_id": 62398244, "body": "Please check that all line endings are matching to the platform where you are trying to build. That could be a reason especially after you copied a file from another system and edited it."}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1464221503, "post_id": 37446912, "comment_id": 62400796, "body": "Are those single quotes or backticks? Either way, I don&#39;t see why you need them, so try omitting them. And if that doesn&#39;t work, write an extremely simple makefile that <i>does</i> work (even if it does nothing), and then try modifying the two makefiles to get them more and more similar until you find the change that causes the error."}], "owner": {"reputation": 1, "user_id": 6284199, "user_type": "registered", "profile_image": "https://graph.facebook.com/1077889665582719/picture?type=large", "display_name": "James Bartlett", "link": "https://stackoverflow.com/users/6284199/james-bartlett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "closed_date": 1464847606, "answer_count": 0, "score": 0, "last_activity_date": 1464207686, "creation_date": 1464207686, "question_id": 37446912, "link": "https://stackoverflow.com/questions/37446912/fatal-error-in-reader-makefile-unexpected-end-of-line-seen", "closed_reason": "Duplicate", "title": "Fatal error in reader: makefile, unexpected end of line seen", "body": "<p>So when I run my makefile I get the error in the title (Fatal error in reader: makefile, unexpected end of line seen Line 8) and I don't honestly know what's going wrong. </p>\n\n<pre><code>CC=g++\nCFLAGS= -g -c -Wall `sdl-configs --cflags`\nLDFLAGS = `sdl-config --libs`\nSOURCES= dpcm.cpp\nOBJECTS=$(SOURCES:.cpp=.o)\nEXECUTABLE=dpcm\n\nall: $(SOURCES) $(EXECUTABLE)\n\n$(EXECUTABLE): $(OBJECTS)\n    $(CC) $(OBJECTS) -o $@ $(LDFLAGS)\n\n.cpp.o:\n    $(CC) $(CFLAGS) $&lt; -o $@\n\nclean:\n    rm *.o\n    rm $(EXECUTABLE)\n</code></pre>\n\n<p>I took this code from a lab I'd worked on and altered the variable names to pertain to my program, so I'm not sure why it's not compiling.</p>\n"}, {"tags": ["c++", "opencv"], "answers": [{"tags": [], "owner": {"reputation": 45425, "user_id": 2589776, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Bemki.png?s=128&g=1", "display_name": "herohuyongtao", "link": "https://stackoverflow.com/users/2589776/herohuyongtao"}, "is_accepted": false, "score": 1, "last_activity_date": 1464235793, "creation_date": 1464235793, "answer_id": 37451438, "question_id": 37446850, "link": "https://stackoverflow.com/questions/37446850/opencv-set-pixels-outside-roi-as-the-nearest-pixel-value-inside-the-roi/37451438#37451438", "title": "OpenCV set pixels outside ROI as the nearest pixel value inside the ROI", "body": "<p>You can make use of <a href=\"http://docs.opencv.org/2.4/modules/photo/doc/inpainting.html\" rel=\"nofollow\"><strong><code>cv::inpaint()</code></strong></a> by restoring the selected region region in an image using the region neighborhood.</p>\n\n<p>In your case, that will be something like:</p>\n\n<pre><code>cv::inpaint(mat_input, 255 - roi, mat_output, inpaint_radius, cv::INPAINT_NS);\n</code></pre>\n"}], "owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464235793, "creation_date": 1464207483, "question_id": 37446850, "link": "https://stackoverflow.com/questions/37446850/opencv-set-pixels-outside-roi-as-the-nearest-pixel-value-inside-the-roi", "title": "OpenCV set pixels outside ROI as the nearest pixel value inside the ROI", "body": "<p>I have an image with a non-rectangular ROI, defined by a binary mask image.</p>\n\n<p>In OpenCV, how can I set the pixels OUTSIDE my ROI as the nearest pixel value INSIDE the ROI? Something similar to what is in <code>cv::BORDER_REPLICATE</code>, or something similar to what is done in <code>cv::warp</code></p>\n"}, {"tags": ["c++", "c", "pointers", "iar"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1464207730, "post_id": 37446831, "comment_id": 62395791, "body": "It&#39;s an assembly of random chunks of information. Insufficient not only for answering, but even for understanding what was asked."}, {"owner": {"reputation": 648, "user_id": 705183, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f0971d0ec1deb9e0be7921d3c8fd0f6d?s=128&d=identicon&r=PG", "display_name": "lusher00", "link": "https://stackoverflow.com/users/705183/lusher00"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1464207916, "post_id": 37446831, "comment_id": 62395897, "body": "Seems clear to me. You have a prototype of my function, you can see how I reference the pointer as I pass it in. You have the actual call to the function. And you have the actual line in the function where the error happened along with the actual error."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1464207955, "post_id": 37446831, "comment_id": 62395923, "body": "Just FYI - there are 3 close votes as unclear at the moment."}, {"owner": {"reputation": 648, "user_id": 705183, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f0971d0ec1deb9e0be7921d3c8fd0f6d?s=128&d=identicon&r=PG", "display_name": "lusher00", "link": "https://stackoverflow.com/users/705183/lusher00"}, "edited": false, "score": 0, "creation_date": 1464208134, "post_id": 37446831, "comment_id": 62396023, "body": "Worth a shot, thanks for the help!"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1464214801, "post_id": 37446831, "comment_id": 62398965, "body": "@lusher00 it would be better to tag according to which language you are using; C and C++ are different"}, {"owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "edited": false, "score": 0, "creation_date": 1464220289, "post_id": 37446831, "comment_id": 62400507, "body": "bus errors are caused by alignment problems"}], "answers": [{"comments": [{"owner": {"reputation": 648, "user_id": 705183, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f0971d0ec1deb9e0be7921d3c8fd0f6d?s=128&d=identicon&r=PG", "display_name": "lusher00", "link": "https://stackoverflow.com/users/705183/lusher00"}, "edited": false, "score": 0, "creation_date": 1464208520, "post_id": 37447058, "comment_id": 62396231, "body": "Yup, that&#39;s it. I forgot all about that. Thank you."}], "tags": [], "owner": {"reputation": 1161, "user_id": 1849769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd80cd843b2791a1312106d13d4fc10?s=128&d=identicon&r=PG", "display_name": "Pezo", "link": "https://stackoverflow.com/users/1849769/pezo"}, "is_accepted": true, "score": 5, "last_activity_date": 1464220222, "last_edit_date": 1464220222, "creation_date": 1464208240, "answer_id": 37447058, "question_id": 37446831, "link": "https://stackoverflow.com/questions/37446831/pointers-in-the-iar-compiler/37447058#37447058", "title": "pointers in the IAR compiler", "body": "<p>It could be that your MCU needs reads of 32 bit integers to be aligned to 32 bits.</p>\n\n<p><code>&amp;packet[9]</code> is most certainly not 32 bit aligned, that's why you get a fault.</p>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 6, "last_activity_date": 1464214279, "creation_date": 1464214279, "answer_id": 37448503, "question_id": 37446831, "link": "https://stackoverflow.com/questions/37446831/pointers-in-the-iar-compiler/37448503#37448503", "title": "pointers in the IAR compiler", "body": "<p><code>&amp;packet[9]</code> is probably not aligned correctly for <code>uint32_t</code>.  Seeing \"Bus Error\" on an ARM CPU is often a sign of an alignment error. <a href=\"https://www.ibm.com/developerworks/library/pa-dalign/\" rel=\"noreferrer\">See here</a> for an explanation of alignment.</p>\n\n<p>On the second example it probably avoids the bus fault by optimizing out the <code>*</code> operation, since you never use the result.</p>\n\n<p>Note that even if you fix this, the code still causes undefined behaviour by violating the strict aliasing rule.  (<code>uint8_t</code> may not be aliased as <code>uint32_t</code>).  Some compilers may appear to \"work correctly\" for now but the code could break at any time in future.</p>\n\n<p>The safe equivalent of your code would be:</p>\n\n<pre><code>uint8_t *src = &amp;packet[9];\nuint32_t var;\nmemcpy(&amp;var, src, sizeof var);\nsrc += sizeof var;\n</code></pre>\n\n<p>Note that if the source data is specified as having a particular byte order for integer (e.g. you are getting it from network stream as opposed to data you saved earlier by the same method) then you will want to use a method to read the data that is independent of the  representation of <code>uint32_t</code>.  (In other words, \"endianness\").</p>\n"}], "owner": {"reputation": 648, "user_id": 705183, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f0971d0ec1deb9e0be7921d3c8fd0f6d?s=128&d=identicon&r=PG", "display_name": "lusher00", "link": "https://stackoverflow.com/users/705183/lusher00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "closed_date": 1464303572, "accepted_answer_id": 37447058, "answer_count": 2, "score": 3, "last_activity_date": 1464220222, "creation_date": 1464207399, "last_edit_date": 1464208443, "question_id": 37446831, "link": "https://stackoverflow.com/questions/37446831/pointers-in-the-iar-compiler", "closed_reason": "Needs details or clarity", "title": "pointers in the IAR compiler", "body": "<p>Long story short I have this in C using the IAR EWARM compiler.</p>\n\n<pre><code>uint8_t packet[2048];\nuint32_t* src = (uint32_t*)&amp;packet[9];\nuint32_t var = *src++;\n</code></pre>\n\n<p>That last line causes a bus fault.</p>\n\n<pre><code>uint8_t packet[2048];\nuint32_t* src = (uint32_t*)&amp;packet[9];\nuint32_t var = 0xFE;\n*src++;\n</code></pre>\n\n<p>Now there is no bus fault. I can see in the debugger src points to the data I expect it to point to. Increment it works as expected but trying to read it casues a bus fault.</p>\n\n<p>Any help?</p>\n"}, {"tags": ["c++", "oop"], "comments": [{"owner": {"reputation": 1934, "user_id": 4932834, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cb44dcd4ebddfea3ede8c6d46b02795?s=128&d=identicon&r=PG&f=1", "display_name": "PcAF", "link": "https://stackoverflow.com/users/4932834/pcaf"}, "edited": false, "score": 1, "creation_date": 1464207716, "post_id": 37446803, "comment_id": 62395779, "body": "And how do you want to obtain which <code>SisterClass</code> to use?"}, {"owner": {"reputation": 1194, "user_id": 5006740, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204328181386038/picture?type=large", "display_name": "strangeqargo", "link": "https://stackoverflow.com/users/5006740/strangeqargo"}, "edited": false, "score": 1, "creation_date": 1464207928, "post_id": 37446803, "comment_id": 62395900, "body": "<a href=\"http://stackoverflow.com/questions/7085265/what-is-c-mixin-style\">stackoverflow.com/questions/7085265/what-is-c-mixin-style</a>"}, {"owner": {"reputation": 667, "user_id": 1415916, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bbf281753e27e350201e0ff8fa8d5757?s=128&d=identicon&r=PG", "display_name": "Joey Dumont", "link": "https://stackoverflow.com/users/1415916/joey-dumont"}, "reply_to_user": {"reputation": 1934, "user_id": 4932834, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cb44dcd4ebddfea3ede8c6d46b02795?s=128&d=identicon&r=PG&f=1", "display_name": "PcAF", "link": "https://stackoverflow.com/users/4932834/pcaf"}, "edited": false, "score": 0, "creation_date": 1464264994, "post_id": 37446803, "comment_id": 62420191, "body": "@PcAF A pointer would be ideal, I think, like the composition method in @Quentin&#39;s answer. I thought about using templates to parametrize the <code>Sister</code> classes inside <code>Salt</code>, but I&#39;m not sure if it&#39;s the best way."}], "answers": [{"comments": [{"owner": {"reputation": 4506, "user_id": 3344612, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/jwgap.jpg?s=128&g=1", "display_name": "Teivaz", "link": "https://stackoverflow.com/users/3344612/teivaz"}, "edited": false, "score": 0, "creation_date": 1464214193, "post_id": 37447025, "comment_id": 62398727, "body": "Your <code>SpicableIngredient</code> should own the spices thus controlling lifetime of it. But you&#39;re keeping a bare pointer to spices, this will definitely cause crashes or memleaks in a bit larger scale"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 4506, "user_id": 3344612, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/jwgap.jpg?s=128&g=1", "display_name": "Teivaz", "link": "https://stackoverflow.com/users/3344612/teivaz"}, "edited": false, "score": 0, "creation_date": 1464214806, "post_id": 37447025, "comment_id": 62398968, "body": "My design was intentional, I&#39;m letting the caller keep ownership of the <code>Spice</code> objects it adds.  Otherwise, <code>SpicableIngredient</code> would need a separate method for adding each type of <code>Spice</code> (<code>AddSalt()</code>, <code>AddPepper()</code>, etc) so <code>SpicableIngredient</code> creates and takes ownership of them."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1464215279, "last_edit_date": 1464215279, "creation_date": 1464208080, "answer_id": 37447025, "question_id": 37446803, "link": "https://stackoverflow.com/questions/37446803/implementation-of-a-class-which-depends-on-a-sister-class/37447025#37447025", "title": "Implementation of a class which depends on a sister class", "body": "<p><code>Salt</code> cannot modify the implementation of the other classes.  But <code>Salt</code> can be given a pointer to another <code>Ingredient</code> to act on, eg:</p>\n\n<pre><code>class Salt : public Ingredient\n{\nprivate:\n    Ingredient *OtherIngredient;\npublic:\n    Salt(Ingredient *AOther) : OtherIngredient(AOther) {}\n    virtual void Taste() { OtherIngredient-&gt;Taste(); printf(\" but salty\"); }\n};\n</code></pre>\n\n<p>Then you can do things like this:</p>\n\n<pre><code>Potato potato;\nSalt salt(&amp;potato);\nsalt.Taste();\n</code></pre>\n\n<p>But that doesn't really make sense, does it?  Salt does not taste like a Potato, but a Potato can taste salty.  So, I would probably take a different approach for that:</p>\n\n<pre><code>#include &lt;vector&gt;\n\nclass Ingredient \n{\npublic:\n    virtual void Taste() = 0;\n};\n\nclass Seasoning : public Ingredient \n{\n};\n\nclass SeasonableIngredient : public Ingredient \n{\nprotected:\n    std::vector&lt;Seasoning*&gt; seasonings;\n    virtual void TastesLike() = 0;\n\npublic:\n    virtual void Taste()\n    {\n        printf(\"Tastes like \");\n        TastesLike();\n        if (!seasonings.empty())\n        {\n            std::vector&lt;Seasoning*&gt;::iterator iter = seasonings.begin();\n            printf(\" but \");\n            iter-&gt;Taste();\n            ++iter;\n            while (iter != seasonings.end())\n            {\n                printf(\" and \");\n                iter-&gt;Taste();\n                ++iter;\n            }\n        }\n    }\n\n    void AddSeasoning(Seasoning *seasoning) { seasonings.push_back(seasoning); }\n};\n\nclass Carrot : public SeasonableIngredient\n{\nprotected:\n    virtual void TastesLike() { printf(\"carrot\"); }\n};\n\nclass Potato : public SeasonableIngredient\n{\nprotected:\n    virtual void TastesLike() { printf(\"potato\"); }\n};\n\nclass Salt : public Seasoning\n{\npublic:\n    void Taste() { printf(\"salty\"); }\n};\n\nclass Pepper : public Seasoning\n{\npublic:\n    void Taste() { printf(\"peppery\"); }\n};\n</code></pre>\n\n<p></p>\n\n<pre><code>Potato potato;\nSalt salt;\nPepper pepper;\nPotato.AddSeasoning(&amp;salt);\nPotato.AddSeasoning(&amp;pepper);\npotato.Taste();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1464215447, "post_id": 37447207, "comment_id": 62399201, "body": "I like your <code>SeasonedPreparation</code> wrapper, I should have thought of that. And if multiple seasonings are needed, you can just expand the <code>seasoning</code> to be a list."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1464248523, "post_id": 37447207, "comment_id": 62409370, "body": "@RemyLebeau thank you very much, for the edit also :)"}, {"owner": {"reputation": 667, "user_id": 1415916, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bbf281753e27e350201e0ff8fa8d5757?s=128&d=identicon&r=PG", "display_name": "Joey Dumont", "link": "https://stackoverflow.com/users/1415916/joey-dumont"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1464265207, "post_id": 37447207, "comment_id": 62420357, "body": "Wow, thank you for the thoughtful answer! I think the simple composition will do what I need, although I like the idea of a Mixin design. I didn&#39;t know about it until I read your answer.   The issue with the Composite class <code>SeasonedPreparation</code> is that it&#39;s not an <code>Ingredient</code> in itself. In my use case, I would need to use templates to  use both <code>Ingredient</code>s and <code>SeasonedIngredient</code>s instead of simply passing an <code>Ingredient</code> pointer. (The salt analogy was the closest thing I could find to my actual problem.)  @RemyLebeau Thank you also for your answer!"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 667, "user_id": 1415916, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bbf281753e27e350201e0ff8fa8d5757?s=128&d=identicon&r=PG", "display_name": "Joey Dumont", "link": "https://stackoverflow.com/users/1415916/joey-dumont"}, "edited": false, "score": 1, "creation_date": 1464265659, "post_id": 37447207, "comment_id": 62420657, "body": "@JoeyDumont That was an oversight, <code>SeasonedPreparation</code> is an actual <code>Ingredient</code> now."}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 5, "last_activity_date": 1464265611, "last_edit_date": 1464265611, "creation_date": 1464208790, "answer_id": 37447207, "question_id": 37446803, "link": "https://stackoverflow.com/questions/37446803/implementation-of-a-class-which-depends-on-a-sister-class/37447207#37447207", "title": "Implementation of a class which depends on a sister class", "body": "<p>Salt cannot sensibly offer the modified taste on its own : it needs an actual other ingredient to salt. But which of the other ingredients ? In fact, what has a \"something, but salty\" taste is not the Salt, but a salty preparation, which <em>contains</em> another ingredient. This can be modeled in several ways :</p>\n\n<h3>Composition</h3>\n\n<p>This preparation literally contains the other ingredient, and proxies the call.</p>\n\n<pre><code>class SaltedPreparation : public Ingredient {\n    Ingredient *baseIngredient;\n    void Taste() { baseIngredient-&gt;Taste(); printf(\" but salty\"); }\n};\n</code></pre>\n\n<p></p>\n\n<pre><code>Tomato tomato;\nSaltedPreparation preparation;\npreparation.baseIngredient = &amp;tomato;\npreparation.Taste();\n</code></pre>\n\n<h3>Inheritance</h3>\n\n<p>A salted tomato is still a tomato, isn't it ? This hinges on the same principle as composition, but the ingredient salts itself. I guess.</p>\n\n<pre><code>class SaltedTomato : public Tomato {\n    void Taste() { Tomato::Taste(); printf(\" but salty\"); }\n};\n</code></pre>\n\n<p></p>\n\n<pre><code>SaltedTomato tomato;\ntomato.Taste();\n</code></pre>\n\n<h3>Mixin</h3>\n\n<p>I'm not keen on writing new classes everytime I need some seasoning, so let's write a template for that ! The Mixin pattern is typical for such generic modifications to existing classes.</p>\n\n<pre><code>template &lt;class BaseIngredient&gt;\nclass Salted : public BaseIngredient {\n    void Taste() { BaseIngredient::Taste(); printf(\" but salty\"); }\n};\n</code></pre>\n\n<p></p>\n\n<pre><code>Salted&lt;Tomato&gt; tomato;\ntomato.Taste();\n</code></pre>\n\n<h3>Composite</h3>\n\n<p>All of the above models lose the fact that salt is also supposed to be an ingredient on its own. That may be fine, but what if it has to ? Then the Composite pattern may be useful. Let's also distinguish seasonings from main ingredients, because we don't fancy salty salted salt.</p>\n\n<pre><code>class Seasoning : public Ingredient { };\n\nclass Salt : public Seasoning {\n    void Taste() { printf(\"salty\"); }\n};\n\nclass SeasonedPreparation : public Ingredient {\n    Ingredient *ingredient;\n    Seasoning *seasoning;\n    void Taste() { ingredient-&gt;Taste(); printf(\", but \"); seasoning-&gt;Taste(); }\n};\n</code></pre>\n\n<p></p>\n\n<pre><code>Tomato tomato;\nSalt salt;\nSeasonedPreparation preparation;\npreparation.ingredient = &amp;tomato;\npreparation.seasoning = &amp;salt;\npreparation.Taste();\n</code></pre>\n\n<p>I'm a bit hungry now.</p>\n"}], "owner": {"reputation": 667, "user_id": 1415916, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bbf281753e27e350201e0ff8fa8d5757?s=128&d=identicon&r=PG", "display_name": "Joey Dumont", "link": "https://stackoverflow.com/users/1415916/joey-dumont"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 37447207, "answer_count": 2, "score": 0, "last_activity_date": 1464265611, "creation_date": 1464207327, "last_edit_date": 1464208078, "question_id": 37446803, "link": "https://stackoverflow.com/questions/37446803/implementation-of-a-class-which-depends-on-a-sister-class", "title": "Implementation of a class which depends on a sister class", "body": "<p>I have multiple, say 2, classes that are derived from an abstract base class, say <code>Ingredient</code>. Now, <code>Carrot</code> and <code>Potato</code> implement the pure virtual function (call it <code>Taste()</code>) of <code>Ingredient</code> via public inheritance. Now, say I want to have a class <code>Salt</code> that is an <code>Ingredient</code> (that is, it is derived from it), but needs to call the <code>Taste()</code> implementation of its sister classes? </p>\n\n<p>Basically, the <code>Salt</code> class slightly modifies the <code>Taste()</code> implementation of its sister classes.\nCan this be implemented? If so, how?</p>\n\n<p>Here's a sketch of what I want to do:</p>\n\n<pre><code>class Ingredient {\n    virtual void Taste() = 0;\n};\n\nclass Carrot : public Ingredient {\n    void Taste() { printf(\"Tastes like carrot\");}\n};\n\nclass Potato : public Ingredient {\n    void Taste() { printf(\"Tastes like potato\"); }\n};\n\nclass Salt : public Ingredient {\n    void Taste() { SisterClass-&gt;Taste(); printf(\" but salty\"); }\n};\n</code></pre>\n"}, {"tags": ["c++", "opencv"], "answers": [{"comments": [{"owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "edited": false, "score": 0, "creation_date": 1464346350, "post_id": 37456353, "comment_id": 62459780, "body": "Thank you :) Sorry I don&#39;t understand what this does or how it can be useful?"}, {"owner": {"reputation": 453, "user_id": 5128148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9952b45bc2ee14566935d8d86eb02b?s=128&d=identicon&r=PG&f=1", "display_name": "LBerger", "link": "https://stackoverflow.com/users/5128148/lberger"}, "reply_to_user": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "edited": false, "score": 1, "creation_date": 1464349797, "post_id": 37456353, "comment_id": 62461847, "body": "May be I didn&#39;t understand your question. In previous program I apply filter2d to all image (setting all pixels outside mask to 0) and after result is corrected to ignore pixels set to 0. this correction is done using a weight. After you can copy result in your orignal image"}], "tags": [], "owner": {"reputation": 453, "user_id": 5128148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9952b45bc2ee14566935d8d86eb02b?s=128&d=identicon&r=PG&f=1", "display_name": "LBerger", "link": "https://stackoverflow.com/users/5128148/lberger"}, "is_accepted": false, "score": 1, "last_activity_date": 1464349517, "last_edit_date": 1464349517, "creation_date": 1464253680, "answer_id": 37456353, "question_id": 37446705, "link": "https://stackoverflow.com/questions/37446705/opencv-filter2d-inside-non-rectangular-roi/37456353#37456353", "title": "OpenCV filter2D inside non rectangular ROI", "body": "<p>May be like this. I think there is no problem near border mask</p>\n\n<pre><code>#include \"opencv2/opencv.hpp\"\n#include &lt;iostream&gt;\n\nusing namespace cv;\nusing namespace std;\n\n\nint main(int argc, char* argv[])\n{\nMat m = imread(\"f:/lib/opencv/samples/data/lena.jpg\", CV_LOAD_IMAGE_GRAYSCALE);\n\nMat mask=Mat::zeros(m.size(), CV_8UC1),maskBlur,mc;\n// mask is a disk\ncircle(mask, Point(200, 200), 100, Scalar(255),-1);\n\nMat negMask;\n// neg mask\nbitwise_not(mask, negMask);\ncircle(mask, Point(200, 200), 100, Scalar(255), -1);\nMat md,mdBlur,mdint;\n\nm.copyTo(md);\n\n// All pixels outside mask set to 0\nmd.setTo(0, negMask);\nimshow(\"mask image\", md);\n// Convert image to int\nmd.convertTo(mdint, CV_32S);\nSize fxy(13, 13);\nblur(mdint, mdBlur, fxy);\nmdBlur.convertTo(mc, CV_8U);\nimshow(\"Blur without mask\", mc);\nimwrite(\"blurwithoutmask.jpg\",mc);\nmask.convertTo(maskBlur, CV_32S);\n// blur mask\nblur(maskBlur, maskBlur, fxy);\nMat mskB;\nmskB.setTo(1, negMask);\ndivide(mdBlur,maskBlur/255,mdBlur);\n\nmdBlur.convertTo(mc, CV_8U);\nimshow(\"Blur with mask\", mc);\nimwrite(\"blurwithmask.jpg\",mc);\nwaitKey();\n\n}\n</code></pre>\n"}], "owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 570, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464349517, "creation_date": 1464206947, "question_id": 37446705, "link": "https://stackoverflow.com/questions/37446705/opencv-filter2d-inside-non-rectangular-roi", "title": "OpenCV filter2D inside non rectangular ROI", "body": "<p>I have an image in which only a small non-rectangular portion is useful. I have a binary mask indicating the useful ROI.</p>\n\n<p>How can I apply <code>cv::filter2D</code> in OpenCV to that ROI only, defined by the binary mask?</p>\n\n<hr>\n\n<p>Edit</p>\n\n<p>My pixels outside the ROI have a value of 0. The other have float values of around 300-500, so the problem with filter2D in the borders of the ROI have high value transitions.</p>\n\n<p>It would also be acceptable to just set the pixel values outside the ROI as the nearest pixel inside the ROI, something similar to <code>cv::BORDER_REPLICATE</code></p>\n"}, {"tags": ["c++", "opengl", "devil"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1464206903, "post_id": 37446638, "comment_id": 62395366, "body": "SamusG.**png** is an animated GIF?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1464206960, "post_id": 37446638, "comment_id": 62395392, "body": "As for speed: Maybe don&#39;t reload the texture every frame?"}, {"owner": {"reputation": 21, "user_id": 6322396, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/eULRp.jpg?s=128&g=1", "display_name": "PocketTNT", "link": "https://stackoverflow.com/users/6322396/pockettnt"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1464207567, "post_id": 37446638, "comment_id": 62395706, "body": "It&#39;s a GIF tilesheet because you cannot just straight up load a GIF"}, {"owner": {"reputation": 21, "user_id": 6322396, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/eULRp.jpg?s=128&g=1", "display_name": "PocketTNT", "link": "https://stackoverflow.com/users/6322396/pockettnt"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1464207649, "post_id": 37446638, "comment_id": 62395751, "body": "I&#39;ll edit my code to not reload the texture every frame later but I just left my house"}, {"owner": {"reputation": 21, "user_id": 6322396, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/eULRp.jpg?s=128&g=1", "display_name": "PocketTNT", "link": "https://stackoverflow.com/users/6322396/pockettnt"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1464235084, "post_id": 37446638, "comment_id": 62403858, "body": "Edited my code to only load the texture once, still having the same lag issue."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1464238584, "post_id": 37446638, "comment_id": 62404826, "body": "because your program is still loading the texture every frame."}, {"owner": {"reputation": 21, "user_id": 6322396, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/eULRp.jpg?s=128&g=1", "display_name": "PocketTNT", "link": "https://stackoverflow.com/users/6322396/pockettnt"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1464267577, "post_id": 37446638, "comment_id": 62422013, "body": "Fixed but still dropping FPS"}, {"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 0, "creation_date": 1464273120, "post_id": 37446638, "comment_id": 62426498, "body": "You&#39;re still loading the texture every frame. Your compiler should warn you about that dead code bug."}, {"owner": {"reputation": 21, "user_id": 6322396, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/eULRp.jpg?s=128&g=1", "display_name": "PocketTNT", "link": "https://stackoverflow.com/users/6322396/pockettnt"}, "edited": false, "score": 0, "creation_date": 1464273717, "post_id": 37446638, "comment_id": 62426990, "body": "I&#39;m so lost, how do I stop it from loading the texture every frame then?"}, {"owner": {"reputation": 21, "user_id": 6322396, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/eULRp.jpg?s=128&g=1", "display_name": "PocketTNT", "link": "https://stackoverflow.com/users/6322396/pockettnt"}, "edited": false, "score": 0, "creation_date": 1464275608, "post_id": 37446638, "comment_id": 62428380, "body": "Oops just saw where I put the <code>bool textureLoaded = true;</code>... :l But now that I&#39;ve fixed it the gif wont run at all, it&#39;s stuck on the first frame."}], "owner": {"reputation": 21, "user_id": 6322396, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/eULRp.jpg?s=128&g=1", "display_name": "PocketTNT", "link": "https://stackoverflow.com/users/6322396/pockettnt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1464275515, "creation_date": 1464206711, "last_edit_date": 1464275515, "question_id": 37446638, "link": "https://stackoverflow.com/questions/37446638/gif-dramatically-lowers-fps", "title": "GIF dramatically lowers FPS", "body": "<p>Today I finally figured out what I needed to do to animate my GIF but now that I have it animated the FPS on my program lowered dramatically. I have my GIF in a serperate function so it doesn't have to reload every texture whenever I try to update the frames of the GIF. I also plan on loading more GIFs if there is a way to fix my FPS drop issue so I need a way to reduce lag on all of them. Is there any easy way to fix this?</p>\n\n<p>My code:</p>\n\n<p>LUtil.cpp:</p>\n\n<pre><code>#include \"LUtil.h\"\n#include &lt;IL/il.h&gt;\n#include &lt;IL/ilu.h&gt;\n#include \"LSpriteSheet.h\"\n\nint add = 0;\nint zoom = 0;\ndouble leftzoom = -SCREEN_WIDTH;\ndouble topzoom = -SCREEN_HEIGHT;\ndouble rightzoom = SCREEN_WIDTH;\ndouble bottomzoom = SCREEN_HEIGHT;\nfloat sy = 0.f;\nint scroll = 0;\nGLfloat gCameraX = 0.f, gCameraY = 0.f, gCameraZ = 0.f;\n//Sprite texture\n\nLSpriteSheet gArrowSprites;\nLSpriteSheet gSamusSprites;\nLSpriteSheet jSamusSprites;\n\nbool initGL()\n{\n    //Initialize GLEW\nGLenum glewError = glewInit();\nif( glewError != GLEW_OK )\n{\n    printf( \"Error initializing GLEW! %s\\n\", glewGetErrorString( glewError ) );\n    return false;\n}\n\n//Make sure OpenGL 2.1 is supported\nif( !GLEW_VERSION_2_1 )\n{\n    printf( \"OpenGL 2.1 not supported!\\n\" );\n    return false;\n}\n\n//Set the viewport\nglViewport( 0.f, -0.f, SCREEN_WIDTH, SCREEN_HEIGHT );\n\n//Initialize Projection Matrix\nglMatrixMode( GL_PROJECTION );\nglLoadIdentity();\nglOrtho( leftzoom, rightzoom, bottomzoom, topzoom, 1.0, -1.0 );\n\n//Initialize Modelview Matrix\nglMatrixMode( GL_MODELVIEW );\nglLoadIdentity();\n\nglPushMatrix();\n\n//Initialize clear color\nglClearColor( 0.f, 0.f, 0.f, 1.f );\n\n//Enable texturing\nglEnable( GL_TEXTURE_2D );\n\nglEnable( GL_BLEND );\nglDisable( GL_DEPTH_TEST );\nglBlendFunc( GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA );\n\n//Check for error\nGLenum error = glGetError();\nif( error != GL_NO_ERROR )\n{\n    printf( \"Error initializing OpenGL! %s\\n\", gluErrorString(error));\n    return false;\n}\n\n//Initialize DevIL\nilInit();\nilClearColour( 255, 255, 255, 000 );\n\n//Check for error\nILenum ilError = ilGetError();\nif( ilError != IL_NO_ERROR )\n{\n    printf( \"Error initializing DevIL! %s\\n\", iluErrorString(ilError) );\n    return false;\n}\n\nreturn true;\n}\n\nLFRect clip;\n\nbool loadMedia()\n{\n//Load texture\nif( !gArrowSprites.loadTextureFromFile( \"Textures/SamusM.png\" ) )\n{\n    printf( \"Unable to load texture!\\n\" );\n    return false;\n}\nclip = { 0.f, 0.f, 330.f, 355.f };\n\n//Top left\nclip.x = 0.f;\nclip.y = 0.f;\ngArrowSprites.addClipSprite( clip );\n\n//Top right\nclip = {0.f, 0.f, 310.f, 480.f};\n\nclip.x = 331.f;\nclip.y = 0.f;\ngArrowSprites.addClipSprite( clip );\n\nclip = {0.f, 0.f, 330.f, 125.f};\n//Bottom left\nclip.x = 0.f;\nclip.y = 355.f;\n\ngArrowSprites.addClipSprite( clip );\n\nclip = { 0.f, 0.f, 330.f, 355.f };\n\n//Top left\nclip.x = 0.f;\nclip.y = 480.f;\ngArrowSprites.addClipSprite( clip );\n\n//Top right\nclip = {0.f, 0.f, 310.f, 480.f};\n\nclip.x = 331.f;\nclip.y = 480.f;\ngArrowSprites.addClipSprite( clip );\n\nclip = {0.f, 0.f, 330.f, 125.f};\n//Bottom left\nclip.x = 0.f;\nclip.y = 835.f;\n\ngArrowSprites.addClipSprite( clip );\n\n//Generate VBO\nif( !gArrowSprites.generateDataBuffer() )\n{\n    printf( \"Unable to clip sprite sheet!\\n\" );\n    return false;\n}\n\n        if( !jSamusSprites.loadTextureFromFile( \"Textures/SamusAran.png\" ) )\n{\n    printf( \"Unable to load texture!\\n\" );\n    return false;\n}\nclip = { 0.f, 0.f, 375.f, 562.f };\n\n//Top left\nclip.x = 0.f;\nclip.y = 0.f;\njSamusSprites.addClipSprite( clip );\n\n    if( !jSamusSprites.generateDataBuffer() )\n{\n    printf( \"Unable to clip sprite sheet!\\n\" );\n    return false;\n}\nreturn true;\n}\n\nbool textureLoaded = false;\nbool loadGif(){\nif(textureLoaded == false){\nif( !gSamusSprites.loadTextureFromFile( \"Textures/SamusG.png\" ) )\n{\n    printf( \"Unable to load texture!\\n\" );\n    return false;\n}\ntextureLoaded = true;\n}\nsy += 214.f;\n\nif(sy == 8988.f){\n    sy = 0.f;\n}\n\nclip = {0.f, 0.f, 213.f, 214.f};\n\nclip.x = 0.f;\nclip.y = sy;\n\ngSamusSprites.addClipSprite( clip );\n\n\nif( !gSamusSprites.generateDataBuffer() )\n{\n    printf( \"Unable to clip sprite sheet!\\n\" );\n    return false;\n}\nreturn true;\n}\n\nvoid update()\n{\n\n}\n\nvoid render()\n{\n//Clear color buffer\n\nglClear( GL_COLOR_BUFFER_BIT );\n\nglMatrixMode(GL_MODELVIEW);\nglPopMatrix();\n\nglPushMatrix();\n\nif(add == 0){\n    if(zoom &lt; 100){\n    double const f_zoom = 1.0 - 0.01 * zoom;\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n    glOrtho(leftzoom * f_zoom, rightzoom * f_zoom, bottomzoom * f_zoom, topzoom * f_zoom, -1.0, 1.0);\n    glMatrixMode(GL_MODELVIEW);\n    }\n    if(zoom &lt; -102){\n    double const f_zoom = 1.0 + 0.01 * zoom;\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n    glOrtho(leftzoom * f_zoom, rightzoom * f_zoom, bottomzoom * f_zoom, topzoom * f_zoom, -1.0, 1.0);\n    glMatrixMode(GL_MODELVIEW);\n    }\n\nglTranslatef( -1080.f, -782.f, 0.f );\ngArrowSprites.renderSprite( 0 );\n\n//Render top right arrow\nglTranslatef( +1080.f, +782.f, 0.f );\nglTranslatef( 1085.f, -120.f, 0.f );\ngArrowSprites.renderSprite( 1 );\n\n//Render bottom left arrow\nglTranslatef( -1085.f, +120.f, 0.f );\nglTranslatef( 0.f, 885.f ,0.f );\ngArrowSprites.renderSprite( 2 );\n\nglTranslatef(0.f, -885.f, 0.f);\njSamusSprites.renderSprite( 0 );\n\nglTranslatef( -620.f, -855.f, 0.f );\nglTranslatef( 620.f, 0.f , 0.f );\ngSamusSprites.renderSprite( 0 );\n\n}\nif(add == 1){\n    if(zoom &lt; 100){\n    double const f_zoom = 1.0 - 0.01 * zoom;\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n    glOrtho(leftzoom * f_zoom, rightzoom * f_zoom, bottomzoom * f_zoom, topzoom * f_zoom, -1.0, 1.0);\n    glMatrixMode(GL_MODELVIEW);\n    }\n    if(zoom &lt; -102){\n    double const f_zoom = 1.0 + 0.01 * zoom;\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n    glOrtho(leftzoom * f_zoom, rightzoom * f_zoom, bottomzoom * f_zoom, topzoom * f_zoom, -1.0, 1.0);\n    glMatrixMode(GL_MODELVIEW);\n    }\n\nglTranslatef( -1080.f, -782.f, 0.f );\ngArrowSprites.renderSprite( 3 );\n\nglTranslatef( +1080.f, +782.f, 0.f );\nglTranslatef( 1085.f, -120.f, 0.f );\ngArrowSprites.renderSprite( 4 );\n\nglTranslatef( -1085.f, +120.f, 0.f );\nglTranslatef( 0.f, 885.f ,0.f );\ngArrowSprites.renderSprite( 5 );\n\nglTranslatef(0.f, -885.f, 0.f);\njSamusSprites.renderSprite( 0 );\n\nglTranslatef( -620.f, -855.f, 0.f );\nglTranslatef( 620.f, 0.f , 0.f );\ngSamusSprites.renderSprite( 0 );\n}\n\nglLoadIdentity();\n\n\nglutSwapBuffers();\n\n}\nvoid handleKeys( unsigned char key, int x, int y )\n{\n//If the user presses q\nif( key == 'q' &amp;&amp; add == 0 )\n{\n                add++;\n}\nelse if( key == 'q' &amp;&amp; add == 1)\n{\n    add--;\n}\n    //Update the sprite rectangles so the texture change takes effect\n    if( key == 27 ) {\n        exit(0);\n    }\n    if(key == 'a') {\n    gCameraX += 8.f;\n    }\n    else if (key == 'd') {\n    gCameraX -= 8.f;\n    }\n    else if (key == 'w') {\n    gCameraY += 8.f;\n    }\n    else if (key == 's') {\n    gCameraY -= 8.f;\n    }\n    else if (key == '+' &amp;&amp; zoom != 99) {\n    zoom += 1;\n    }\n    else if (key == '-' &amp;&amp; zoom != -101) {\n    zoom -= 1;\n    }\n        //Take saved matrix off the stack and reset it\nglMatrixMode( GL_MODELVIEW );\nglPopMatrix();\nglLoadIdentity();\n\n//Move camera to position\nglTranslatef( gCameraX, gCameraY, gCameraZ );\n\n//Save default matrix again with camera translation\nglPushMatrix();\n}\n</code></pre>\n\n<p>Main.cpp:</p>\n\n<pre><code>#include \"LUtil.h\"\n\nvoid runMainLoop( int val );\n\nvoid runGifLoop( int val2 );\n\nint main( int argc, char* args[] )\n{\n\nglutInit( &amp;argc, args );\n\nglutInitContextVersion( 2, 1 );\n\nglutInitDisplayMode( GLUT_DOUBLE );\nglutInitWindowSize( SCREEN_WIDTH, SCREEN_HEIGHT );\nglutCreateWindow( \"Samus\" );\n\nif( !initGL() )\n{\n    printf( \"Unable to initialize graphics library!\\n\" );\n    return 1;\n}\n\nif( !loadMedia() )\n{\n    printf( \"Unable to load media!\\n\" );\n    return 2;\n}\n\nglutKeyboardFunc( handleKeys );\nglutDisplayFunc( render );\n\nglutTimerFunc( 1000 / SCREEN_FPS, runMainLoop, 0 );\nglutTimerFunc( 1000 / SCREEN_FPS, runGifLoop, 0 );\nglutMainLoop();\n\nreturn 0;\n}\n\nvoid runMainLoop( int val )\n{\nupdate();\nrender();\n\nglutTimerFunc( 1000 / SCREEN_FPS, runMainLoop, val );\n}\n\nvoid runGifLoop( int val2 )\n{\n\nloadGif();\n\nglutTimerFunc( 1000 / SCREEN_FPS, runGifLoop, val2 );\n\n}\n</code></pre>\n"}, {"tags": ["c++", "class", "inheritance"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5863759, "user_type": "registered", "profile_image": "https://graph.facebook.com/949118368500942/picture?type=large", "display_name": "Ahmad Shafique", "link": "https://stackoverflow.com/users/5863759/ahmad-shafique"}, "edited": false, "score": 0, "creation_date": 1464206482, "post_id": 37446538, "comment_id": 62395146, "body": "but my bicycle have them and i have inherited them from bicycle."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 21, "user_id": 5863759, "user_type": "registered", "profile_image": "https://graph.facebook.com/949118368500942/picture?type=large", "display_name": "Ahmad Shafique", "link": "https://stackoverflow.com/users/5863759/ahmad-shafique"}, "edited": false, "score": 0, "creation_date": 1464206593, "post_id": 37446538, "comment_id": 62395197, "body": "@AhmadShafique, true - but you already inherited the definition as well. If you want to provide a different definition for descendent class, you need to <b>override</b> them."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1464206688, "post_id": 37446538, "comment_id": 62395242, "body": "Inheriting them means you get the original implementation. What you are trying to do is override them, in which case you have to declare this intent in the class definition, as @SergeyA says."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 21, "user_id": 5863759, "user_type": "registered", "profile_image": "https://graph.facebook.com/949118368500942/picture?type=large", "display_name": "Ahmad Shafique", "link": "https://stackoverflow.com/users/5863759/ahmad-shafique"}, "edited": false, "score": 0, "creation_date": 1464206798, "post_id": 37446538, "comment_id": 62395305, "body": "@AhmadShafique, and while you are on it, consider using <code>override</code> keyword."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464207241, "post_id": 37446538, "comment_id": 62395535, "body": "@SergeyA Isn&#39;t that only for <code>virtual</code> functions?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464207636, "post_id": 37446538, "comment_id": 62395746, "body": "@NathanOliver, it is indeed. But that is something to get OP thinking :) It is very rare when you need to override a non-virtual function (outside of CRTP)."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1464206382, "creation_date": 1464206382, "answer_id": 37446538, "question_id": 37446478, "link": "https://stackoverflow.com/questions/37446478/how-to-define-a-function-of-parent-class-using-inheritance/37446538#37446538", "title": "How to define a function of parent class using inheritance?", "body": "<p>Your <code>MotorBike</code> doesn't have a function <code>speedup</code> nor <code>speeddown</code>. If you want want, you have to declare it in the <code>MotorBike</code> class, like</p>\n\n<pre><code>class MotorBike:public Bicycle\n{\nprivate:\n    int currentGear;\n    int currentFuel;\npublic:\n    MotorBike(int,char*,int,int);\n    void speedup();\n    void speeddown();\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 820, "user_id": 3734880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GbxRY.png?s=128&g=1", "display_name": "orfdorf", "link": "https://stackoverflow.com/users/3734880/orfdorf"}, "is_accepted": false, "score": -1, "last_activity_date": 1464216655, "last_edit_date": 1464216655, "creation_date": 1464216011, "answer_id": 37448804, "question_id": 37446478, "link": "https://stackoverflow.com/questions/37446478/how-to-define-a-function-of-parent-class-using-inheritance/37448804#37448804", "title": "How to define a function of parent class using inheritance?", "body": "<p>I'm just going to go top-to-bottom on this one:</p>\n\n<p>Change your deprecated <code>#include &lt;string.h&gt;</code> to <code>#include &lt;string&gt;</code>.</p>\n\n<p>Your Bicycle has functions with no definition, which will yield LNK2019 (unresolved externals) if something tries to call them. Either define them, remove them, or make Bicycle an abstract class.  Bicycle has children too, so give it a virtual destructor.</p>\n\n<pre><code>Bicycle(int, char*);\nvirtual ~Bicycle() = default;\nvirtual void speedup();\nvirtual void speeddown();\nvirtual void turnLeft();\nvirtual void turnRight();\n</code></pre>\n\n<p>You're defining functions that are members of MotorBike, but you never declared them. Add them to the declaration of MotorBike:</p>\n\n<pre><code>class MotorBike:public Bicycle\n{\nprivate:\n    int currentGear;\n    int currentFuel;\npublic:\n    Motorbike(int,char*,int,int);\n    void speedup();\n    void speeddown();\n};\n</code></pre>\n\n<p>Use the <code>override</code> keyword when overriding Bicycle functions in MotorBike:</p>\n\n<pre><code>class MotorBike:public Bicycle\n{\nprivate:\n    int currentGear;\n    int currentFuel;\npublic:\n    Motorbike(int,char*,int,int);\n    void speedup() override;  // like this\n    void speeddown() override;  // and this\n};\n</code></pre>\n\n<p>Or, alternatively, use any default functions implemented by Bicycle in MotorBike:</p>\n\n<pre><code>class MotorBike:public Bicycle\n{\nprivate:\n    int currentGear;\n    int currentFuel;\npublic:\n    Motorbike(int,char*,int,int);\n    using Bicycle::speedup;  // like this\n    using Bicycle::speeddown;  // and this\n};\n</code></pre>\n\n<p>Fix your data types. MotorBike declares <code>currentGear</code> and <code>currentFuel</code> as integers, but in <code>MotorBike::speedup</code>, for example, you're adding floating-point values to them. This won't work, because the fractional portions of these values will be truncated.</p>\n"}], "owner": {"reputation": 21, "user_id": 5863759, "user_type": "registered", "profile_image": "https://graph.facebook.com/949118368500942/picture?type=large", "display_name": "Ahmad Shafique", "link": "https://stackoverflow.com/users/5863759/ahmad-shafique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1464221422, "creation_date": 1464206168, "last_edit_date": 1464221422, "question_id": 37446478, "link": "https://stackoverflow.com/questions/37446478/how-to-define-a-function-of-parent-class-using-inheritance", "title": "How to define a function of parent class using inheritance?", "body": "<p>I have made the member functions of the parent class public. But still I get an error </p>\n\n<blockquote>\n  <p>no 'void MotorBike::speeddown()' member function declared in class 'MotorBike'</p>\n</blockquote>\n\n<p>both for <code>speedup</code> and <code>speeddown</code>. Even though I have publicly inherited the parent class.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include&lt;string.h&gt;\nusing namespace std;\n\nclass Bicycle\n{\nprotected:\n    int speed;\n    char color[8];\npublic:\n    Bicycle(int, char*);\n    void speedup();\n    void speeddown();\n    void turnLeft();\n    void turnRight();\n};\n\nclass MotorBike:public Bicycle\n{\nprivate:\n    int currentGear;\n    int currentFuel;\npublic:\n    MotorBike(int,char*,int,int);\n\n};\n\nBicycle::Bicycle(int Speed,char* Color)\n{\n    speed=Speed;\n    strcpy(color,Color);\n    cout&lt;&lt;\"The bike is now moving north!\"&lt;&lt;endl;\n}\n\nMotorBike::MotorBike(int Speed,char* Color,int CurrentGear,int CurrentFuel): Bicycle(speed,color)\n{\n    speed=Speed;\n    strcpy(color,Color);\n    currentGear=CurrentGear;\n    currentFuel=CurrentFuel;\n    cout&lt;&lt;\"The motorbike is now moving north!\"&lt;&lt;endl;\n}\n\nvoid Bicycle::speedup()//error line\n{\n    cout&lt;&lt;\"Speed is increased!\"&lt;&lt;endl;\n    speed+=1;\n}\n\nvoid Bicycle::speeddown()//error line\n{\n    if(speed&gt;1)\n    {\n        cout&lt;&lt;\"Speed is decreased!\"&lt;&lt;endl;\n        speed-=1;\n    }\n    else\n        cout&lt;&lt;\"The bike is already at rest!\"&lt;&lt;endl;\n\n}\n\nvoid MotorBike::speedup()//error line\n{\n    if(currentGear==4)\n        cout&lt;&lt;\"You are already at maximum speed!\"&lt;&lt;endl;\n    else\n    {\n        switch(currentGear)\n        {\n        case 0:\n            currentGear=1;\n            currentFuel-=0.01;\n            speed+=0.25;\n            break;\n        case 1:\n            currentGear=2;\n            currentFuel-=0.02;\n            speed+=0.5;\n            break;\n        case 2:\n            currentGear=3;\n            currentFuel-=0.03;\n            speed+=0.75;\n            break;\n        case 3:\n            currentGear=4;\n            currentFuel-=0.04;\n            speed+=1;\n            break;\n\n        }\n    }\n}\n\nvoid MotorBike::speeddown()//error line\n{\n    if(speed==1||speed&gt;1)\n    speed-=1;\n    else\n        cout&lt;&lt;\"You are already at minimum speed!\"&lt;&lt;endl;\n}\n\nint main()\n{\n    Bicycle B1(0,\"Black\");\n    MotorBike MB1(0,\"Black\",0,100);\n}\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "average", "average-precision"], "answers": [{"comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1464206817, "post_id": 37446379, "comment_id": 62395321, "body": "Not necessarily true. You can lose a lot of precision adding a list of numbers if at some point the cumulative sum is very close to the negative of the next number."}, {"owner": {"reputation": 114, "user_id": 6320153, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fhZdF.png?s=128&g=1", "display_name": "lupod", "link": "https://stackoverflow.com/users/6320153/lupod"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1464207619, "post_id": 37446379, "comment_id": 62395731, "body": "Yes, but that holds also in the case of the second class, if av*count happens to be close to -value. In this specific case I would go for the first class because it avoids dividing at each addition of a new number. However, I am sure that there are ways to prevent also the problem that you mention."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1464208334, "post_id": 37446379, "comment_id": 62396135, "body": "Yes, the second one is no better. The classic stable algorithm is <code>newmean = oldmean + (newvalue - oldmean)&#47;newcount</code>. Even though it involves a division on every iteration, it is more stable than the naive summation algorithm. (And roughly on par with Kahan summation, I believe.)"}], "tags": [], "owner": {"reputation": 114, "user_id": 6320153, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fhZdF.png?s=128&g=1", "display_name": "lupod", "link": "https://stackoverflow.com/users/6320153/lupod"}, "is_accepted": false, "score": 3, "last_activity_date": 1464206305, "last_edit_date": 1464206305, "creation_date": 1464205758, "answer_id": 37446379, "question_id": 37446257, "link": "https://stackoverflow.com/questions/37446257/best-strategy-to-compute-average-with-high-precision/37446379#37446379", "title": "Best strategy to compute average with high precision", "body": "<p>My guess is that the first class gives a more reliable result. In the second case at each iteration you do some approximation due to the division by count and eventually all these approximations add up to the difference in result that you see. In the first case, instead, you just approximate when you compute the final division.</p>\n"}, {"tags": [], "owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "is_accepted": true, "score": 8, "last_activity_date": 1464206096, "last_edit_date": 1464206096, "creation_date": 1464205766, "answer_id": 37446380, "question_id": 37446257, "link": "https://stackoverflow.com/questions/37446257/best-strategy-to-compute-average-with-high-precision/37446380#37446380", "title": "Best strategy to compute average with high precision", "body": "<p>If you really want high-precision:</p>\n\n<ul>\n<li>consider arbitrary precision arithmetic (e.g. with <a href=\"https://gmplib.org/\" rel=\"noreferrer\">GMP</a>)</li>\n<li>consider <a href=\"https://en.wikipedia.org/wiki/Kahan_summation_algorithm\" rel=\"noreferrer\">Kahan summation algorithm\n</a> (possible compiler issues)</li>\n<li>consider <a href=\"http://people.eecs.berkeley.edu/~jrs/papers/robustr.pdf\" rel=\"noreferrer\">Shewchuk's-algorithm</a> (which is available in Python as <a href=\"https://docs.python.org/3/library/math.html#math.fsum\" rel=\"noreferrer\">math.fsum</a>)</li>\n</ul>\n\n<p><strong>Edit:</strong> the python-docs in math.fsum also links to <a href=\"https://code.activestate.com/recipes/393090/\" rel=\"noreferrer\">this Overview of approaches</a></p>\n"}, {"tags": [], "owner": {"reputation": 1351, "user_id": 3323394, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/hPS1U.jpg?s=128&g=1", "display_name": "Arthur Hv", "link": "https://stackoverflow.com/users/3323394/arthur-hv"}, "is_accepted": false, "score": 0, "last_activity_date": 1464211760, "last_edit_date": 1464211760, "creation_date": 1464207487, "answer_id": 37446852, "question_id": 37446257, "link": "https://stackoverflow.com/questions/37446257/best-strategy-to-compute-average-with-high-precision/37446852#37446852", "title": "Best strategy to compute average with high precision", "body": "<p>My own thinking is that both compute count times value which is a large number before dividing it, which explains why your result is approximate. I would do:</p>\n\n<pre><code>class Average3\n{\npublic:\n    Average3() : av( 0 ), count( 0 ) {}\n\n    void add( double value )\n    {\n        count++;\n        av +=  (value - av)/count;\n    }\n...\n</code></pre>\n\n<p>But you still loose precision when adding the last numbers because adding value/count is small compared to average. I'd be glad to know if my intuition was right though</p>\n"}, {"tags": [], "owner": {"reputation": 1213, "user_id": 831850, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/dcb0ac17de6539bbb91303eec3247944?s=128&d=identicon&r=PG", "display_name": "Jacob", "link": "https://stackoverflow.com/users/831850/jacob"}, "is_accepted": false, "score": 3, "last_activity_date": 1464208254, "creation_date": 1464208254, "answer_id": 37447062, "question_id": 37446257, "link": "https://stackoverflow.com/questions/37446257/best-strategy-to-compute-average-with-high-precision/37447062#37447062", "title": "Best strategy to compute average with high precision", "body": "<p>John D. Cook gives a great analysis he recommends:</p>\n\n<pre><code>av = av + (value - av)/count;\n</code></pre>\n\n<p>His posts start with <a href=\"http://www.johndcook.com/blog/2008/09/26/comparing-three-methods-of-computing-standard-deviation/\" rel=\"nofollow\">Comparing three methods of computing standard deviation</a>.</p>\n\n<p>Then <a href=\"http://www.johndcook.com/blog/2008/09/28/theoretical-explanation-for-numerical-results/\" rel=\"nofollow\">Theoretical explanation for numerical results</a></p>\n\n<p>and last <a href=\"http://www.johndcook.com/blog/standard_deviation/\" rel=\"nofollow\">Accurately computing running variance</a></p>\n"}], "owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 674, "favorite_count": 0, "accepted_answer_id": 37446380, "answer_count": 4, "score": 4, "last_activity_date": 1464211760, "creation_date": 1464205348, "question_id": 37446257, "link": "https://stackoverflow.com/questions/37446257/best-strategy-to-compute-average-with-high-precision", "title": "Best strategy to compute average with high precision", "body": "<p>I was comparing two algorithms computing the average of random numbers.</p>\n\n<ul>\n<li>First algorithm sums all numbers and divides by the items count in the end</li>\n<li>Second algorithm computes the average on every iteration and reuses the result when new data is received</li>\n</ul>\n\n<p>I suppose there's nothing revolutionary here, and I'm not a mathematician so I can't put a name on those two algorithms.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;cstdlib&gt;\n\nclass Average1\n{\npublic:\n    Average1() : total( 0 ), count( 0 ) {}\n\n    void add( double value )\n    {\n        total += value;\n        count++;\n    }\n\n    double average()\n    {\n        return total/count;\n    }\n\nprivate:\n    double total;\n    size_t count;\n};\n\nclass Average2\n{\npublic:\n    Average2() : av( 0 ), count( 0 ) {}\n\n    void add( double value )\n    {\n        av = (av*count + value)/(count+1);\n        count++;\n    }\n\n    double average()\n    {\n        return av;\n    }\n\nprivate:\n    double av;\n    size_t count;\n};\n\nvoid compare()\n{\n    Average1 av1;\n    Average2 av2;\n    double temp;\n    for ( size_t i = 0; i != 100000000; ++i )\n    {\n        temp = static_cast&lt;double&gt;(std::rand()) / static_cast&lt;double&gt;(RAND_MAX);\n        av1.add( temp );\n        av2.add( temp );\n    }\n\n    std::cout &lt;&lt; std::setprecision(20) &lt;&lt; av1.average() &lt;&lt; std::endl;\n    std::cout &lt;&lt; std::setprecision(20) &lt;&lt; av2.average() &lt;&lt; std::endl;\n}\n\nint main()\n{\n    compare();\n    return 0;\n}\n</code></pre>\n\n<p>Output is:</p>\n\n<pre><code>0.50001084285722707801\n0.50001084285744978875\n</code></pre>\n\n<p>The difference is certainly due to <code>double</code> type precision.</p>\n\n<p>In the end, which one is the good method? Which one gives the real mathematical average (or closest to...)?</p>\n"}, {"tags": ["c++", "windows", "ssl-certificate", "client-certificates", "gsoap"], "answers": [{"tags": [], "owner": {"reputation": 1779, "user_id": 1065992, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sWiDT.png?s=128&g=1", "display_name": "Blood-HaZaRd", "link": "https://stackoverflow.com/users/1065992/blood-hazard"}, "is_accepted": true, "score": 0, "last_activity_date": 1464600489, "creation_date": 1464600489, "answer_id": 37522169, "question_id": 37446202, "link": "https://stackoverflow.com/questions/37446202/gsoap-reading-ca-file-windows/37522169#37522169", "title": "gsoap Reading CA file, Windows", "body": "<p>The problem was not related to my C++ Client code. Infact, I had to add the server certification file to the Bin\\security\\cacerts file located into my jre. </p>\n\n<p>I had to try to implement a Java client to understand the problem.</p>\n"}], "owner": {"reputation": 1779, "user_id": 1065992, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sWiDT.png?s=128&g=1", "display_name": "Blood-HaZaRd", "link": "https://stackoverflow.com/users/1065992/blood-hazard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 481, "favorite_count": 0, "accepted_answer_id": 37522169, "answer_count": 1, "score": 0, "last_activity_date": 1464600489, "creation_date": 1464205169, "question_id": 37446202, "link": "https://stackoverflow.com/questions/37446202/gsoap-reading-ca-file-windows", "title": "gsoap Reading CA file, Windows", "body": "<p>I am trying to consume a webservice that I created and deployed in tomcat, enabling ssl in this latter.</p>\n\n<p>For creating the client code, I use gsoap. I generated nedded files, and below my code in C++ :</p>\n\n<pre><code>soap_ssl_init();    \nsoap_init(&amp;soap);   \n\n\n      if (soap_ssl_client_context(&amp;soap,\n            SOAP_SSL_DEFAULT,   /* use SOAP_SSL_DEFAULT in production code */\n            NULL,       /* keyfile: required only when client must authenticate to server (see SSL docs on how to obtain this file) */\n            NULL,       /* password to read the keyfile */\n            \"cacert.pem\",       /* optional cacert file to store trusted certificates */\n            NULL,       /* optional capath to directory with trusted certificates */\n            NULL        /* if randfile!=NULL: use a file with random data to seed randomness */ \n            ))\n        { \n            soap_print_fault(&amp;soap, stderr);\n            exit(1);\n        }\n\n        if(soap_call___ns2__Add(&amp;soap,\"https://localhost:8443/TestWebService/services/AddService.AddServiceHttpsSoap11Endpoint\", NULL,&amp;add, &amp;resp)!= 0)\n             soap_print_fault(&amp;soap, stderr);\n</code></pre>\n\n<p>When I execute the program, I got this meesage : </p>\n\n<blockquote>\n  <p>Error 30 fault: SOAP-ENV:Server [no subcode] \"SSL error\" Detail: Can't\n  read CA file and directory</p>\n</blockquote>\n\n<p>As I read, I thinh that I have to generate some files (.pem, certs...). </p>\n\n<p>It's the first time that I use goap and ssl, How could I solve this issue? </p>\n\n<p>I use Windows (coz all examples that I found are for linux)</p>\n"}, {"tags": ["c++", "gcc", "openmp", "gpgpu", "offloading"], "comments": [{"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1464208238, "post_id": 37445927, "comment_id": 62396079, "body": "GCC has a limited support for offloading, find out more <a href=\"https://gcc.gnu.org/wiki/Offloading\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1464210512, "post_id": 37445927, "comment_id": 62397229, "body": "If the time is <code>0</code>, there&#39;s something seriously wrong. The compiler could just optimize away all code, because you do nothing with the result, but even then I would not expect <code>0</code> as time, because <code>omp_get_wtime</code> actually takes some time on it&#39;s own."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1464251200, "post_id": 37445927, "comment_id": 62410927, "body": "GCC only supports Intel MIC as OpenMP offload target. Check out <a href=\"http://stackoverflow.com/questions/29297814/openmp-4-0-in-gcc-offload-to-nvidia-gpu\">that</a> question."}, {"owner": {"reputation": 627, "user_id": 1566099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd78f0484d050f006b916d4aba2ad95?s=128&d=identicon&r=PG", "display_name": "Ilya Verbin", "link": "https://stackoverflow.com/users/1566099/ilya-verbin"}, "reply_to_user": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 2, "creation_date": 1464274275, "post_id": 37445927, "comment_id": 62427427, "body": "@HristoIliev, GCC 6 supports HSA as offload target: <a href=\"https://gcc.gnu.org/gcc-6/changes.html#hsa\" rel=\"nofollow noreferrer\">gcc.gnu.org/gcc-6/changes.html#hsa</a>"}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 1, "creation_date": 1464279095, "post_id": 37445927, "comment_id": 62430689, "body": "Try to set <code>GOMP_DEBUG=1</code> and see if this provides some insight."}, {"owner": {"reputation": 51, "user_id": 4953504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49b9de1a4cdda390d9b115085aaf222d?s=128&d=identicon&r=PG&f=1", "display_name": "Hamza", "link": "https://stackoverflow.com/users/4953504/hamza"}, "reply_to_user": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1464282124, "post_id": 37445927, "comment_id": 62432647, "body": "@Zulan I&#39;ve searched how to use  <code>GOMP_DEBUG=1</code> but didn&#39;t found how, can you please specify how to use it? Thanks."}, {"owner": {"reputation": 627, "user_id": 1566099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd78f0484d050f006b916d4aba2ad95?s=128&d=identicon&r=PG", "display_name": "Ilya Verbin", "link": "https://stackoverflow.com/users/1566099/ilya-verbin"}, "edited": false, "score": 1, "creation_date": 1464303069, "post_id": 37445927, "comment_id": 62443044, "body": "@Hamza, 1. Verify that your GPU supports HSA. 2. Install GCC 6.1 with special configure options (see link in my previous comment). 3. (Probably) switch to Linux."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "reply_to_user": {"reputation": 627, "user_id": 1566099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd78f0484d050f006b916d4aba2ad95?s=128&d=identicon&r=PG", "display_name": "Ilya Verbin", "link": "https://stackoverflow.com/users/1566099/ilya-verbin"}, "edited": false, "score": 0, "creation_date": 1464342369, "post_id": 37445927, "comment_id": 62457275, "body": "@IlyaVerbin, interesting. Do you happen to know what the state of that HSA support is? I&#39;m not sure if &quot;GCC can now generate HSAIL for <i>simple OpenMP device constructs</i>&quot; means that it supports the full range of OpenMP 4 device constructs when not combined or it means that the support is still quite limited."}, {"owner": {"reputation": 627, "user_id": 1566099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd78f0484d050f006b916d4aba2ad95?s=128&d=identicon&r=PG", "display_name": "Ilya Verbin", "link": "https://stackoverflow.com/users/1566099/ilya-verbin"}, "reply_to_user": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1464347100, "post_id": 37445927, "comment_id": 62460279, "body": "@HristoIliev, AFAIK all OpenMP 4 device constructs are supported, but not all OpenMP constructs inside target regions are supported, because it&#39;s not possible to (efficiently) execute them on GPU. You can ask Martin Jambor for details, he knows everything about HSA in GCC :) <a href=\"https://gcc.gnu.org/ml/gcc-patches/2015-11/msg00519.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/ml/gcc-patches/2015-11/msg00519.html</a>"}, {"owner": {"reputation": 51, "user_id": 4953504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49b9de1a4cdda390d9b115085aaf222d?s=128&d=identicon&r=PG&f=1", "display_name": "Hamza", "link": "https://stackoverflow.com/users/4953504/hamza"}, "reply_to_user": {"reputation": 627, "user_id": 1566099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd78f0484d050f006b916d4aba2ad95?s=128&d=identicon&r=PG", "display_name": "Ilya Verbin", "link": "https://stackoverflow.com/users/1566099/ilya-verbin"}, "edited": false, "score": 0, "creation_date": 1464353167, "post_id": 37445927, "comment_id": 62464122, "body": "@IlyaVerbin I have an AMD Radeon HD 7400M Series, and according to <a href=\"https://en.wikipedia.org/wiki/Heterogeneous_System_Architecture#Software_support\" rel=\"nofollow noreferrer\">link</a> AMD Radeon in general supports HSA, but couldn&#39;t find anything in AMD&#39;s website, please correct if I&#39;m wrong, Thanks a lot."}], "owner": {"reputation": 51, "user_id": 4953504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49b9de1a4cdda390d9b115085aaf222d?s=128&d=identicon&r=PG&f=1", "display_name": "Hamza", "link": "https://stackoverflow.com/users/4953504/hamza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1599, "favorite_count": 1, "answer_count": 0, "score": 5, "last_activity_date": 1464352043, "creation_date": 1464204180, "last_edit_date": 1464352043, "question_id": 37445927, "link": "https://stackoverflow.com/questions/37445927/how-can-i-check-if-offloading-to-amd-gpu-is-working-using-openmp", "title": "How can I check if offloading to AMD gpu is working, using OpenMP", "body": "<p>I am trying to use OpenMP to offload to an AMD GPU, I have read in the OpenMP 4.5 specification that <strong><em>target device</em></strong> represents the device onto which code and data may be offloaded, but I cannot tell if the offloading has been successful, or if it has indeed been offloaded to my AMD GPU.</p>\n\n<p>To test if the offloading indeed works, I've tried to compute the time with and without the pragmas, and check the difference using the wall time, but the time returned in both cases is 0: </p>\n\n<p>This is the simple code used for the test, I'll try to use it in  my project:</p>\n\n<pre><code>int n = 10240; float a = 2.0f; float b = 3.0f;\nfloat *x = (float*) malloc(n * sizeof(float));\nfloat *y = (float*) malloc(n * sizeof(float));\ndouble start = omp_get_wtime();\n#pragma omp target data map(to:x)\n{\n#pragma omp target map(tofrom:y)\n#pragma omp teams\n#pragma omp distribute parallel for\nfor (int i = 0; i &lt; n; ++i){\n    y[i] = a*x[i] + y[i];\n}\n#pragma omp target map(tofrom:y)\nfor (int i = 0; i &lt; n; ++i){\n    y[i] = b*x[i] + y[i];\n}\n\n}\nstd::cout &lt;&lt; \"Time: \" &lt;&lt; (omp_get_wtime() - start) * 1000.0 &lt;&lt; \" ms\" &lt;&lt;std::endl;\nfree(x); free(y); return 0;\n}\n</code></pre>\n\n<p><strong>NB:</strong> I am using gcc 5.1.0 in windows</p>\n\n<p>Any help would be much appreciated.</p>\n"}, {"tags": ["c++", "visual-studio", "opencv"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5363744"}, "edited": false, "score": 0, "creation_date": 1464204379, "post_id": 37445880, "comment_id": 62394100, "body": "you can see more images in <a href=\"http://s000.tinyupload.com/index.php?file_id=60368569977646932463\" rel=\"nofollow noreferrer\">s000.tinyupload.com/index.php?file_id=60368569977646932463</a> and <a href=\"http://s000.tinyupload.com/index.php?file_id=17335973361892920384\" rel=\"nofollow noreferrer\">s000.tinyupload.com/index.php?file_id=17335973361892920384</a>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1464204520, "post_id": 37445880, "comment_id": 62394180, "body": "Your question should contain the code and maybe also the image. I will not download some file, just to see your code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5363744"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1464205012, "post_id": 37445880, "comment_id": 62394441, "body": "@ tobi303: I can not insert my code. System don&#39;t  allow to me insert my code!!! you can click on code.cpp in that page and it starts opening."}, {"owner": {"reputation": 453, "user_id": 5128148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9952b45bc2ee14566935d8d86eb02b?s=128&d=identicon&r=PG&f=1", "display_name": "LBerger", "link": "https://stackoverflow.com/users/5128148/lberger"}, "edited": false, "score": 0, "creation_date": 1464205152, "post_id": 37445880, "comment_id": 62394514, "body": "How do you scan such x-ray images?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5363744"}, "edited": false, "score": 0, "creation_date": 1464205415, "post_id": 37445880, "comment_id": 62394632, "body": "Thank you so much for edit."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5363744"}, "edited": false, "score": 0, "creation_date": 1464205517, "post_id": 37445880, "comment_id": 62394688, "body": "This image scan with system security."}, {"owner": {"reputation": 5994, "user_id": 1127972, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WkDOK.jpg?s=128&g=1", "display_name": "doug65536", "link": "https://stackoverflow.com/users/1127972/doug65536"}, "edited": false, "score": 0, "creation_date": 1464242109, "post_id": 37445880, "comment_id": 62406013, "body": "Looks like you need to calibrate your input device. Does it have a calibration procedure? I don&#39;t think it should be so randomly different from one scanline to the next. A device like this should have a procedure where it scans nothing and gets a baseline."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5363744"}, "edited": false, "score": 0, "creation_date": 1478789637, "post_id": 37446824, "comment_id": 68300940, "body": "@ LBerger: Thank you so much for your code. If it possible, please explain integer numbers &quot;nbInf&quot; -&quot;nbSup&quot; - &quot;Energy&quot; in your code and explain &quot;keep mean line constant&quot; algorithm."}, {"owner": {"reputation": 453, "user_id": 5128148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9952b45bc2ee14566935d8d86eb02b?s=128&d=identicon&r=PG&f=1", "display_name": "LBerger", "link": "https://stackoverflow.com/users/5128148/lberger"}, "edited": false, "score": 0, "creation_date": 1478969697, "post_id": 37446824, "comment_id": 68367365, "body": "Principle is keep   1-&gt; mean line (line 6-14) constant and 2-&gt; but mean line is following neighboroud mean  line : a weighted mean line is estimated"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5363744"}, "edited": false, "score": 0, "creation_date": 1479130256, "post_id": 37446824, "comment_id": 68415123, "body": "@ LBerger: Thank you so much for your guide. I&#39;m new in image processing and I don&#39;t understand your algorithm. I want to perfectly explain your algorithm for my friends, But I can&#39;t it. If it possible perfectly explain your algorithm for me. Thanks a lot."}], "tags": [], "owner": {"reputation": 453, "user_id": 5128148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9952b45bc2ee14566935d8d86eb02b?s=128&d=identicon&r=PG&f=1", "display_name": "LBerger", "link": "https://stackoverflow.com/users/5128148/lberger"}, "is_accepted": false, "score": 0, "last_activity_date": 1464252989, "last_edit_date": 1464252989, "creation_date": 1464207391, "answer_id": 37446824, "question_id": 37445880, "link": "https://stackoverflow.com/questions/37445880/how-to-remove-horizontal-line-from-this-x-ray-image/37446824#37446824", "title": "How to remove horizontal line from this x-ray image?", "body": "<p>That's just an idea : keep mean line constant.</p>\n\n<pre><code>cv::Mat image = cv::imread(\"Tf6HO.png\",CV_LOAD_IMAGE_GRAYSCALE);\nvector&lt;double&gt; moyenne;\ndouble minval,maxval;\nminMaxLoc(image,&amp;minval,&amp;maxval);\nimshow(\"original\",image);\nfor (int i = 0; i &lt; image.rows; i++)\n{\n    double s=0;\n// Caluclate mean for row i\n    for (int j=0;j&lt;image.cols;j++)\n        s += image.at&lt;uchar&gt;(i,j);\n// Store result in vector moyenne\n    moyenne.push_back(s/image.cols);\n}\n// Energy for row i equal to a weighted mean of row in [i-nbInf,i+nbSup]\nint nbInf=32,nbSup=0;\nfor (int i = 0; i &lt; image.rows; i++)\n{\n    double s=0,p=0;\n    // weighted mean (border effect process with max and min method\n    for (int j = max(0, i - nbInf); j &lt;= min(image.rows - 1, i + nbSup); j++)\n    {\n        s+=moyenne[j]*1./(1+abs(i-j));\n        p+=1./(1+abs(i-j));\n    }\n    // Weighted mean\n    s/=p;\n    // process pixel in row i : mean of row i equal to s \n    for (int j=0;j&lt;image.cols;j++)\n        image.at&lt;uchar&gt;(i,j) =saturate_cast&lt;uchar&gt;((image.at&lt;uchar&gt;(i,j)-moyenne[i])+s);\n}\nimshow(\"process\",image);\nwaitKey();\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/waSXG.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/waSXG.jpg\" alt=\"result\"></a>\nor with reduce resolution\n<a href=\"https://i.stack.imgur.com/Uk3XM.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Uk3XM.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>if you want to improve you can read this <a href=\"http://www.ncbi.nlm.nih.gov/pmc/articles/PMC3749244/\" rel=\"nofollow noreferrer\">paper</a> and bibliography</p>\n"}, {"tags": [], "owner": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "is_accepted": true, "score": 1, "last_activity_date": 1464226028, "last_edit_date": 1464226028, "creation_date": 1464209151, "answer_id": 37447304, "question_id": 37445880, "link": "https://stackoverflow.com/questions/37445880/how-to-remove-horizontal-line-from-this-x-ray-image/37447304#37447304", "title": "How to remove horizontal line from this x-ray image?", "body": "<p>Take a 2D FFT, take a look at the spectrum. You will see plenty of dots along the center y-axis. Suppress those dots , back transform, your vertical lines will be gone.</p>\n\n<p>Below the result (since I don't have C++ and opencv installed) in Python, with sliders to vary the region to be suppressed. Consider it Pseudocode. This is still pretty rough as I'm not making a smooth transition between suppressed pixels and their neighbors here for simplicity.</p>\n\n<pre><code>%matplotlib inline\nfrom __future__ import division\nimport numpy as np\nimport matplotlib.pyplot as p\nfrom ipywidgets import *\n\nfrom scipy import misc\nf = misc.imread('xray_image_with_horizontal_lines.png')\n\na=np.fft.fftshift(np.fft.fft2(f)) \n\ndef process(kx,ky):\n    p.figure(figsize=(12,8))\n    p.subplot(221)\n    p.imshow(f, cmap=p.cm.gray)\n    p.subplot(222)\n    p.imshow(np.abs(np.log(a)), cmap=p.cm.gray)\n\n    print np.shape(a)\n    b=np.zeros_like(a)\n    for i in range(639):\n        for j in range(406):\n            if not ( 320-kx&lt;i&lt;320+kx and (j&lt;203-ky or j&gt;203+ky)):\n                b[j,i]=a[j,i]\n\n    c=np.fft.ifft2(b)\n    p.subplot(223)\n    p.imshow(np.abs(np.log(b)), cmap=p.cm.gray)\n    p.subplot(224)\n    p.imshow(np.abs(c), cmap=p.cm.gray)  \n\ninteract(process, kx=[1,20,1],ky=[1,20,1])\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ddxI5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ddxI5.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5363744"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 650, "favorite_count": 1, "accepted_answer_id": 37447304, "answer_count": 2, "score": -2, "last_activity_date": 1464252989, "creation_date": 1464203984, "last_edit_date": 1464205243, "question_id": 37445880, "link": "https://stackoverflow.com/questions/37445880/how-to-remove-horizontal-line-from-this-x-ray-image", "title": "How to remove horizontal line from this x-ray image?", "body": "<p>I'm new in opencv (c++) and I want to remove horizontal line from this x-ray image. But I can not.</p>\n\n<p>These is my image:</p>\n\n<p><img src=\"https://i.stack.imgur.com/Tf6HO.png\" alt=\"enter image description here\"></p>\n\n<p>What ideas on how to solve this task would you suggest? Or on what resource on the internet can I find help?</p>\n\n<p>This is my c++ code</p>\n\n<pre><code>src = imread(\"C:/Users/Alireza/Desktop/New folder (3)/11.bmp\");\ncvtColor(src, gray, CV_RGB2GRAY);\nimshow(\"Original Image\", gray);\nimwrite(\"Original Image.png\", gray);\nnormalize(gray, gray, 0, 250, NORM_MINMAX, -1, Mat());\nthreshold(gray, thresh, 170, 255, THRESH_BINARY_INV);\nvector&lt; vector &lt;Point&gt; &gt; contours;        \nvector&lt; Vec4i &gt; hierarchy;\nint largest_contour_index = 0;\nint largest_area = 0;\nMat alpha(src.size(), CV_8UC1, Scalar(0));\nfindContours(thresh, contours, hierarchy, CV_RETR_TREE,CV_CHAIN_APPROX_SIMPLE, Point(0, 0));\nfor (int i = 0; i&lt; contours.size(); i++)                                \n{\ndouble a = contourArea(contours[i], false); \nif (a&gt;largest_area)\n{\nlargest_area = a;\nlargest_contour_index =     i;                                                                \n}\n}\ndrawContours(alpha, contours,     largest_contour_index,Scalar(255),CV_FILLED, 8, hierarchy);         \nvector&lt;Mat&gt; rgb;\nsplit(src, rgb);\nMat rgba[4] = { rgb[0], rgb[1], rgb[2], alpha };\nmerge(rgba, 4, Tafrigh);\nimshow(\"Tafrigh\", Tafrigh);\nimwrite(\"Tafrigh.png\", Tafrigh);\n</code></pre>\n"}, {"tags": ["c++", "qt", "static", "initialization", "c++14"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1464203877, "post_id": 37445814, "comment_id": 62393787, "body": "Doesn&#39;t simple <code>Q Q::sQ;</code> work for you?"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 3, "creation_date": 1464204066, "post_id": 37445814, "comment_id": 62393906, "body": "There is a proposal to make copy elision guaranteed, so code like this would compile even with deleted copy and move constructors.  <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/p0135r0.html\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg21/docs/papers/2015/p0135r0.html</a>"}, {"owner": {"reputation": 654, "user_id": 4743711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l0qvK.png?s=128&g=1", "display_name": "Loreto", "link": "https://stackoverflow.com/users/4743711/loreto"}, "edited": false, "score": 0, "creation_date": 1464206213, "post_id": 37445814, "comment_id": 62395013, "body": "It&#39;s like all of your Q&#39;s are pregnant at the same time with the same baby Q; curious, pregnant itself in an infinite cycle. Well, adopting the definition Q Q::sQ; proposed by HolyBlackCat, with a member function void f() { std::cout &lt;&lt; &quot;smoke and mirrors\\n&quot;;  }  You can do now \tQ q; \tq.sQ.sQ.sQ.sQ.sQ.sQ.sQ.sQ.sQ.sQ.sQ.sQ.sQ.f();"}, {"owner": {"reputation": 3068, "user_id": 553735, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1e348f8a50d94baf7d0a434e63967ca6?s=128&d=identicon&r=PG", "display_name": "Srv19", "link": "https://stackoverflow.com/users/553735/srv19"}, "reply_to_user": {"reputation": 654, "user_id": 4743711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l0qvK.png?s=128&g=1", "display_name": "Loreto", "link": "https://stackoverflow.com/users/4743711/loreto"}, "edited": false, "score": 1, "creation_date": 1464207091, "post_id": 37445814, "comment_id": 62395451, "body": "@Loreto that&#39;s some image..."}, {"owner": {"reputation": 654, "user_id": 4743711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l0qvK.png?s=128&g=1", "display_name": "Loreto", "link": "https://stackoverflow.com/users/4743711/loreto"}, "edited": false, "score": 1, "creation_date": 1464207594, "post_id": 37445814, "comment_id": 62395718, "body": "@Srv19 You have got a paradox machine."}], "answers": [{"comments": [{"owner": {"reputation": 4257, "user_id": 2407363, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/JOzMf.jpg?s=128&g=1", "display_name": "Kemin Zhou", "link": "https://stackoverflow.com/users/2407363/kemin-zhou"}, "edited": false, "score": 0, "creation_date": 1532319467, "post_id": 37445867, "comment_id": 89911278, "body": "std::mutex is a good example, where both copy constructor and assignment operator are =delete;  If your class Yourcalss { static mutex mtx; }; you can initialize a static mutex Yourcalss::mtx{}"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 5, "last_activity_date": 1464205055, "last_edit_date": 1464205055, "creation_date": 1464203949, "answer_id": 37445867, "question_id": 37445814, "link": "https://stackoverflow.com/questions/37445814/how-to-initialise-static-instance-of-a-class-without-copy-constructor/37445867#37445867", "title": "How to initialise static instance of a class without copy constructor&gt;", "body": "<p>You can use the <a href=\"http://www.stroustrup.com/C++11FAQ.html#uniform-init\" rel=\"nofollow\">uniform initialization syntax</a> and construct the class with a empty set of curly braces</p>\n\n<pre><code>Q Q::sQ{};\n</code></pre>\n\n<p>or you can even drops the curly braces like:</p>\n\n<pre><code>Q Q::sQ;\n</code></pre>\n\n<p>Both will default construct <code>sQ</code>.</p>\n"}], "owner": {"reputation": 3068, "user_id": 553735, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1e348f8a50d94baf7d0a434e63967ca6?s=128&d=identicon&r=PG", "display_name": "Srv19", "link": "https://stackoverflow.com/users/553735/srv19"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1108, "favorite_count": 0, "closed_date": 1464211006, "accepted_answer_id": 37445867, "answer_count": 1, "score": 3, "last_activity_date": 1464205264, "creation_date": 1464203776, "last_edit_date": 1464205264, "question_id": 37445814, "link": "https://stackoverflow.com/questions/37445814/how-to-initialise-static-instance-of-a-class-without-copy-constructor", "closed_reason": "Duplicate", "title": "How to initialise static instance of a class without copy constructor&gt;", "body": "<p>I have class without copy constructor or assignment operator.  I need to create and initialize a instance of that class. How do I do that?</p>\n\n<p>Code with the problem (example):</p>\n\n<pre><code>class Q\n{\n    int w;\n    public:\n    Q():w(19){};\n    Q(const Q&amp;) = delete;\n    Q&amp; operator = (const Q&amp;) = delete;\n\n    static Q sQ;\n};\n\nQ Q::sQ = Q();\n</code></pre>\n\n<p><a href=\"http://ideone.com/HzsA77\" rel=\"nofollow\">On ideone</a></p>\n\n<p>Use case: I have a class that is derived from <code>QObject</code> and so has its assignment operator and copy constructor deleted. There should be a static instance of the class available, how can that be achieved?</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1464204293, "post_id": 37445546, "comment_id": 62394052, "body": "Overkill and unnecessary."}, {"owner": {"reputation": 25, "user_id": 6382812, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-uacaun9sEqI/AAAAAAAAAAI/AAAAAAAACFM/E2hcXLN6zsM/photo.jpg?sz=128", "display_name": "Hazrat Bilal", "link": "https://stackoverflow.com/users/6382812/hazrat-bilal"}, "edited": false, "score": 0, "creation_date": 1464204339, "post_id": 37445546, "comment_id": 62394079, "body": "i am using Dev C++ unfortunately its not that simple in that"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 25, "user_id": 6382812, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-uacaun9sEqI/AAAAAAAAAAI/AAAAAAAACFM/E2hcXLN6zsM/photo.jpg?sz=128", "display_name": "Hazrat Bilal", "link": "https://stackoverflow.com/users/6382812/hazrat-bilal"}, "edited": false, "score": 0, "creation_date": 1464205181, "post_id": 37445546, "comment_id": 62394525, "body": "@HazratBilal <i>&quot;i am using Dev C++&quot;</i> Huh?? It&#39;s just simple as that. What&#39;s your toolchain and compiler flag settings?"}, {"owner": {"reputation": 398, "user_id": 5020853, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8b87b9b2a03d6b97f483e2c740ce467b?s=128&d=identicon&r=PG&f=1", "display_name": "Rikus Honey", "link": "https://stackoverflow.com/users/5020853/rikus-honey"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1464206273, "post_id": 37445546, "comment_id": 62395043, "body": "@CaptainObvlious then what would the ideal solution be?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1464208166, "post_id": 37445546, "comment_id": 62396039, "body": "One big for loop that does both."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1464212578, "post_id": 37445546, "comment_id": 62398095, "body": "Just create a single top level controlling loop and call an update function for each frame with the amount of time elapsed since the last update."}, {"owner": {"reputation": 25, "user_id": 6382812, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-uacaun9sEqI/AAAAAAAAAAI/AAAAAAAACFM/E2hcXLN6zsM/photo.jpg?sz=128", "display_name": "Hazrat Bilal", "link": "https://stackoverflow.com/users/6382812/hazrat-bilal"}, "edited": false, "score": 0, "creation_date": 1464253587, "post_id": 37445546, "comment_id": 62412557, "body": "please share some example i can&#39;t understand i am newbie take the block of my codes and share some possible solution would be appreciated"}], "tags": [], "owner": {"reputation": 398, "user_id": 5020853, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8b87b9b2a03d6b97f483e2c740ce467b?s=128&d=identicon&r=PG&f=1", "display_name": "Rikus Honey", "link": "https://stackoverflow.com/users/5020853/rikus-honey"}, "is_accepted": false, "score": 0, "last_activity_date": 1464202841, "last_edit_date": 1495541769, "creation_date": 1464202841, "answer_id": 37445546, "question_id": 37445419, "link": "https://stackoverflow.com/questions/37445419/how-to-run-two-loops-in-game-c/37445546#37445546", "title": "how to run two loops in game C++", "body": "<p>Might want to try running the loop on a new thread. See this post for an example: <a href=\"https://stackoverflow.com/questions/266168/simple-example-of-threading-in-c\">Simple example of threading in C++</a></p>\n"}], "owner": {"reputation": 25, "user_id": 6382812, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-uacaun9sEqI/AAAAAAAAAAI/AAAAAAAACFM/E2hcXLN6zsM/photo.jpg?sz=128", "display_name": "Hazrat Bilal", "link": "https://stackoverflow.com/users/6382812/hazrat-bilal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 1, "answer_count": 1, "score": -5, "last_activity_date": 1464202842, "creation_date": 1464202414, "last_edit_date": 1464202842, "question_id": 37445419, "link": "https://stackoverflow.com/questions/37445419/how-to-run-two-loops-in-game-c", "title": "how to run two loops in game C++", "body": "<p>i am about to make a game where a plane is moving on x axis and the cannon use to hit the plan with cannon ball and the plane has to crash i did all what i can but i got a serious problem \nproblem 1: when plan is moving i can't use canon cause both are using for loop and they have to wait for each other to finish\nproblem 2: because of cleardevice(); function its so difficult for me to continue both movement of the cannon ball and plan anybody having any idea what i am missing would be appreciated its very important thanks in advance </p>\n\n<pre><code>#include &lt;graphics.h&gt;\n#include &lt;windows.h&gt;\nvoid fire();\nvoid canon();\nvoid plan();\nvoid plan_move();\n\n\nint main( )\n{\ninitwindow(800, 500, \"First Sample\");\n\ncanon();\n plan_move();\n plan();\n\n\n\ngetch();\nreturn 0;\n}\nvoid fire()\n{\n int i=0;\n for(i=0;i&lt;370;i++)\n {\n         circle(363, 400-i, 13);\n         setcolor(WHITE);\n         delay(5);\n         canon(); \n         cleardevice();\n\n\n         }\n  }\n\nvoid canon()\n{\n line(350,450,350,400);\n line(380,450,380,400);\n circle(365,400,15);\n circle(365,470,25);\n  }\nvoid plan()\n{\nline(25,70,50,70);\nline(25,30,50,30);\nline(80,70,50,30);\nline(80,70,50,70);\nline(25,30,25,70);\n\n} \n\nvoid plan_move()\n{\n   int i=0;\n   for(i=0;i&lt;700;i++)\n   {\n     line(25+i,70,50+i,70);\n     line(25+i,30,50+i,30);\n     line(80+i,70,50+i,30);\n     line(80+i,70,50+i,70);\n     line(25+i,30,25+i,70);\n\n     delay(8);\n     canon();\n        if(GetAsyncKeyState(VK_SPACE))\n         {\n         fire();\n         } \n           cleardevice();\n\n\n          }\n            } \n</code></pre>\n"}, {"tags": ["python", "c++", "numpy", "python-embedding"], "comments": [{"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1464221315, "post_id": 37445397, "comment_id": 62400756, "body": "<code>PyObject_GetAttrString(pModule, (char*)&quot;optimize.nnls&quot;);</code> is like trying <code>getattr(module, &quot;optimize.nnls&quot;)</code> in python. You want <code>PyObject_GetAttrString(PyObject_GetAttrString(pModule, &quot;optimize&quot;), &quot;nnls&quot;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4466099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/718499ec1666d43d900c7c7a5128b1eb?s=128&d=identicon&r=PG&f=1", "display_name": "Robopoto", "link": "https://stackoverflow.com/users/4466099/robopoto"}, "edited": false, "score": 0, "creation_date": 1464206772, "post_id": 37445813, "comment_id": 62395287, "body": "Thank you, both your answers were helpful."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1464204075, "last_edit_date": 1464204075, "creation_date": 1464203775, "answer_id": 37445813, "question_id": 37445397, "link": "https://stackoverflow.com/questions/37445397/when-embedding-python-in-another-application-how-do-i-import-or-call-a-function/37445813#37445813", "title": "When embedding python in another application how do I import or call a function in a submodule (i.e. scipy.optimize.nnls)?", "body": "<p>Like the rarely-used built-in <code>__import__</code> function, when you <code>PyImport_Import</code> the name <code>scipy.optimize</code>, the import system does load the <code>scipy.optimize</code> module, but it returns <code>scipy</code> instead of <code>scipy.optimize</code>. You need to follow the attribute chain down to <code>scipy.optimize.nnls</code>:</p>\n\n<pre><code>PyObject *scipy = PyImport_Import(pName);\nPyObject *optimize = PyObject_GetAttrString(scipy, \"optimize\");\nPyObject *nnls = PyObject_GetAttrString(optimize, \"nnls\");\n</code></pre>\n\n<p>As always, don't forget to <code>Py_DECREF</code> any references you own when you're done with them. That includes things like <code>pName</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 4466099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/718499ec1666d43d900c7c7a5128b1eb?s=128&d=identicon&r=PG&f=1", "display_name": "Robopoto", "link": "https://stackoverflow.com/users/4466099/robopoto"}, "edited": false, "score": 0, "creation_date": 1464206713, "post_id": 37445831, "comment_id": 62395255, "body": "Thanks I had actually tried this after looking at the documentation, but must have used it incorrectly."}], "tags": [], "owner": {"reputation": 2928, "user_id": 1603365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/K4qJN.png?s=128&g=1", "display_name": "md5i", "link": "https://stackoverflow.com/users/1603365/md5i"}, "is_accepted": true, "score": 1, "last_activity_date": 1464203831, "creation_date": 1464203831, "answer_id": 37445831, "question_id": 37445397, "link": "https://stackoverflow.com/questions/37445397/when-embedding-python-in-another-application-how-do-i-import-or-call-a-function/37445831#37445831", "title": "When embedding python in another application how do I import or call a function in a submodule (i.e. scipy.optimize.nnls)?", "body": "<p>First of all, I've never use <code>PyImport_Import()</code>.  I've always used <code>PyImport_ImportModule()</code>, which takes a <code>const char *</code> arg instead of a <code>PyObject *</code>.  That should save some steps in your code.</p>\n\n<pre><code>PyObject *pModule = PyImport_ImportModule(\"scipy.optimize\");\nPyObject *pFunc = PyObject_GetAttrString(pModule, \"nnls\");\n</code></pre>\n\n<p>This is how I have done things in code I have written.  <code>PyImport_ImportModule()</code> handles package hierarchies.  <code>PyObject_getAttrString()</code> does not know what to do with the dot.</p>\n\n<p>I have never used <code>PyImport_Import()</code>, so I don't know how its behavior might change things.</p>\n"}], "owner": {"reputation": 33, "user_id": 4466099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/718499ec1666d43d900c7c7a5128b1eb?s=128&d=identicon&r=PG&f=1", "display_name": "Robopoto", "link": "https://stackoverflow.com/users/4466099/robopoto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "accepted_answer_id": 37445831, "answer_count": 2, "score": 2, "last_activity_date": 1464204075, "creation_date": 1464202343, "question_id": 37445397, "link": "https://stackoverflow.com/questions/37445397/when-embedding-python-in-another-application-how-do-i-import-or-call-a-function", "title": "When embedding python in another application how do I import or call a function in a submodule (i.e. scipy.optimize.nnls)?", "body": "<p>First I'll restate the question: When embedding Python into a C/C++ application using <a href=\"https://docs.python.org/3.4/extending/embedding.html#compiling\" rel=\"nofollow\">python docs</a> and other resources. I discovered that you can import a module using</p>\n\n<pre><code>PyObject *pName = PyUnicode_FromString((char*)\"scipy\");\nPyObject *pModule = PyImport_Import(pName); \n</code></pre>\n\n<p>but if I try to import \"scipy.optimize\" </p>\n\n<pre><code>PyObject *pName = PyUnicode_FromString((char*)\"scipy.optimize\");\nPyObject *pModule = PyImport_Import(pName); \n</code></pre>\n\n<p>then the program fails to initialize <code>pModule</code>. Again if I try </p>\n\n<pre><code>PyObject *pName = PyUnicode_FromString((char*)\"scipy\");\nPyObject *pModule = PyImport_Import(pName); \npFunc = PyObject_GetAttrString(pModule, (char*)\"optimize.nnls\");\n</code></pre>\n\n<p>where I put <code>optimize</code> in the function name the it fails to initialize <code>pFunc</code>. How do I import or call a function in a submodule, i.e. how do I call the function scipy.optimize.nnls? </p>\n\n<p>Next, I'll lay out my code in case it helps:</p>\n\n<pre><code>/* Relelvant imports\n    #include &lt;Python.h&gt;\n    #include &lt;numpy/arrayobject.h&gt; \n*/\n\nvoid nnls::update(const vec&amp; x, const vec&amp; y)\n{\n    mat B;\n    vecToGslVec(x, gslx);\n    generateX(X, gslx);\n    A = gslMatToMat(X);\n    B = A.transpose();\n    long double *c_out;\n\n    Py_Initialize();\n    PyObject *pName = PyUnicode_FromString((char*)\"scipy\"); //Issue Here\n    check(pName, \"pName not initializes.\");\n\n    PyObject *pModule = PyImport_Import(pName);\n    check(pModule, \"pModule not initializes.\");\n\n    PyObject *pFunc, *pArgs, *pResult;\n    PyArrayObject *pNpArray;\n\n    npy_intp Adims[2]; Adims[0] = A.rows(); Adims[1] = A.cols();\n    npy_intp bdim[1];  bdim[0] = y.size();\n\n    if (pModule != NULL) {\n        pFunc = PyObject_GetAttrString(pModule, (char*)\"optimize.nnls\"); //Issue Here\n        check(pFunc, \"pFunc not initializes.\");\n\n        /*program never advances past this point unless I remove this check, \n        in which case I get a segfault, because pFunc is not initialized.*/\n\n        if (pFunc &amp;&amp; PyCallable_Check(pFunc)) {\n            pArgs = PyTuple_Pack(2,\n                PyArray_SimpleNewFromData(2, Adims, NPY_FLOAT, B.data()),\n                PyArray_SimpleNewFromData(1, bdim , NPY_FLOAT, \\\n                    const_cast&lt;double*&gt; (y.data()))\n            );\n            check(pArgs, \"pArgs not initializes.\");\n            pResult = PyObject_CallObject(pFunc, pArgs);\n            check(pResult, \"pResult not initializes.\");\n            pNpArray = reinterpret_cast&lt;PyArrayObject*&gt;(pResult);\n            log_info(\"not PyArray cast\");\n        }\n        Py_DECREF(pFunc);\n    }\n    Py_DECREF(pModule);\n    Py_DECREF(pArgs);\n    c_out = reinterpret_cast&lt;long double*&gt;(PyArray_DATA(pNpArray));\n    for(size_t i=0; i&lt;order; i++){\n        gsl_vector_set(gslc, i, c_out[i]);\n    }\n    if (pResult != NULL) Py_DECREF(pResult); Py_DECREF(pNpArray);\n    Py_Finalize();\n}\n</code></pre>\n\n<p>Again, My issue is in the lines</p>\n\n<pre><code>PyObject *pModule = PyImport_Import(pName);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>pFunc = PyObject_GetAttrString(pModule, (char*)\"optimize.nnls\");\n</code></pre>\n\n<p>If I set</p>\n\n<pre><code>pName = PyUnicode_FromString((char*)\"scipy.optimize\"); \n</code></pre>\n\n<p>or</p>\n\n<pre><code>pFunc = PyObject_GetAttrString(pModule, (char*)\"optimize.nnls\");\n</code></pre>\n\n<p>the code fails to initialized these variables at these points.</p>\n\n<p>So to reiterate my question one last time how do I import the module <code>scipy.optimize</code> or call the function <code>optimize.nnls</code> in this context? Thanks. I hope it isn't too confusing, if it is let me know and I'll clarify.</p>\n"}, {"tags": ["c++", "class", "pointers", "object", "constructor"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464202166, "post_id": 37445329, "comment_id": 62392869, "body": "<code>pers = &amp;p;</code> compiles?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1464202275, "post_id": 37445329, "comment_id": 62392933, "body": "&quot;The problem is that the object created is not the one I ordered him to do.&quot; &lt;-- what does this sentence even mean? Who is &quot;him&quot;?"}, {"owner": {"reputation": 95, "user_id": 4839846, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5f768c091e0c9e482be75831ab4b71f5?s=128&d=identicon&r=PG&f=1", "display_name": "Thibault de Vill&#232;le", "link": "https://stackoverflow.com/users/4839846/thibault-de-vill%c3%a8le"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464202292, "post_id": 37445329, "comment_id": 62392944, "body": "@NathanOliver Yes, the g++ compiler told me to put it, because the object pers is a pointer, forgot the * in the post, editing now"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 2, "creation_date": 1464202327, "post_id": 37445329, "comment_id": 62392961, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 95, "user_id": 4839846, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5f768c091e0c9e482be75831ab4b71f5?s=128&d=identicon&r=PG&f=1", "display_name": "Thibault de Vill&#232;le", "link": "https://stackoverflow.com/users/4839846/thibault-de-vill%c3%a8le"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1464202432, "post_id": 37445329, "comment_id": 62393028, "body": "@Barry Sorry if it was not clear. What I meant was I order the program to create a new <code>Maillon</code> element, and it is filled with the data given, but only when it is created. Once the constructor is exited, the data in the <code>Maillon</code> is just a bunch of gibberish."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 4839846, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5f768c091e0c9e482be75831ab4b71f5?s=128&d=identicon&r=PG&f=1", "display_name": "Thibault de Vill&#232;le", "link": "https://stackoverflow.com/users/4839846/thibault-de-vill%c3%a8le"}, "edited": false, "score": 0, "creation_date": 1464202898, "post_id": 37445456, "comment_id": 62393279, "body": "But if I don&#39;t create a person in the constructor object, where else could I create it, and what would be the syntax ? I tried this : <code>(name of a link)-&gt;pers = new Person;</code> but it raised me an error when compiling."}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "reply_to_user": {"reputation": 95, "user_id": 4839846, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5f768c091e0c9e482be75831ab4b71f5?s=128&d=identicon&r=PG&f=1", "display_name": "Thibault de Vill&#232;le", "link": "https://stackoverflow.com/users/4839846/thibault-de-vill%c3%a8le"}, "edited": false, "score": 0, "creation_date": 1464203023, "post_id": 37445456, "comment_id": 62393335, "body": "@ThibaultdeVill&#232;le Use the <code>new</code> inside <code>Link</code>&#39;s constructor: <code>pers</code> is a private member of <code>Link</code>, and cannot be accessed externally from an instance of <code>Link</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1464203227, "post_id": 37445456, "comment_id": 62393426, "body": "@KABoissonneault There is no reason to use new for <code>pers</code> when we can just get rid of it being a pointer."}, {"owner": {"reputation": 95, "user_id": 4839846, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5f768c091e0c9e482be75831ab4b71f5?s=128&d=identicon&r=PG&f=1", "display_name": "Thibault de Vill&#232;le", "link": "https://stackoverflow.com/users/4839846/thibault-de-vill%c3%a8le"}, "reply_to_user": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1464203581, "post_id": 37445456, "comment_id": 62393638, "body": "@NathanOliver I am incredibly greatful for your answer, unfortunately since this is a project for my programming class, <code>pers</code> being a pointer is <i>necessary</i>, and cannot be avoided. If so, should I use the answer from @KABoissonneault ?"}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "reply_to_user": {"reputation": 95, "user_id": 4839846, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5f768c091e0c9e482be75831ab4b71f5?s=128&d=identicon&r=PG&f=1", "display_name": "Thibault de Vill&#232;le", "link": "https://stackoverflow.com/users/4839846/thibault-de-vill%c3%a8le"}, "edited": false, "score": 0, "creation_date": 1464203755, "post_id": 37445456, "comment_id": 62393730, "body": "@ThibaultdeVill&#232;le Remember to <code>delete pers</code> inside <code>Link</code>&#39;s destructor (<code>~Link</code>) if you choose to allocate <code>pers</code> dynamically"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 95, "user_id": 4839846, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5f768c091e0c9e482be75831ab4b71f5?s=128&d=identicon&r=PG&f=1", "display_name": "Thibault de Vill&#232;le", "link": "https://stackoverflow.com/users/4839846/thibault-de-vill%c3%a8le"}, "edited": false, "score": 0, "creation_date": 1464203759, "post_id": 37445456, "comment_id": 62393736, "body": "@ThibaultdeVill&#232;le Yes you have to.  I added some more to the answer"}, {"owner": {"reputation": 95, "user_id": 4839846, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5f768c091e0c9e482be75831ab4b71f5?s=128&d=identicon&r=PG&f=1", "display_name": "Thibault de Vill&#232;le", "link": "https://stackoverflow.com/users/4839846/thibault-de-vill%c3%a8le"}, "edited": false, "score": 0, "creation_date": 1464204078, "post_id": 37445456, "comment_id": 62393916, "body": "@NathanOliver Thank you very much. You helped me more than I could hope for."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 95, "user_id": 4839846, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5f768c091e0c9e482be75831ab4b71f5?s=128&d=identicon&r=PG&f=1", "display_name": "Thibault de Vill&#232;le", "link": "https://stackoverflow.com/users/4839846/thibault-de-vill%c3%a8le"}, "edited": false, "score": 0, "creation_date": 1464204098, "post_id": 37445456, "comment_id": 62393927, "body": "@ThibaultdeVill&#232;le No problem.  Glad to help."}, {"owner": {"reputation": 95, "user_id": 4839846, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5f768c091e0c9e482be75831ab4b71f5?s=128&d=identicon&r=PG&f=1", "display_name": "Thibault de Vill&#232;le", "link": "https://stackoverflow.com/users/4839846/thibault-de-vill%c3%a8le"}, "reply_to_user": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1464204173, "post_id": 37445456, "comment_id": 62393977, "body": "@KABoissonneault Thanks ! Will do."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 6, "last_activity_date": 1464203737, "last_edit_date": 1495541843, "creation_date": 1464202536, "answer_id": 37445456, "question_id": 37445329, "link": "https://stackoverflow.com/questions/37445329/c-class-constructor-creates-objects-but-the-result-of-the-construction-is-d/37445456#37445456", "title": "C++ - Class constructor creates objects, but the result of the construction is different", "body": "<p>Your code has undefined behavior</p>\n\n<pre><code>Link::Link(string data)\n{\n    next = NULL;\n    Person p;\n    p.put_data(data);\n    pers = &amp;p;\n}\n\nLink::Link()\n{\n    next = NULL;\n    Person p;\n    pers = &amp;p;\n}\n</code></pre>\n\n<p>In both constructors in the above code you create a local <code>Person</code>, <code>p</code>, and then you have <code>pers</code> point to it.  After the constructor ends <code>p</code> goes out of scope, gets destroyed and now <code>pers</code> points to an object that no longer exists.  Any dereference of <code>pers</code> after that will it still points to the deleted object is undefined behavior.</p>\n\n<p>To fix this just get rid of the pointer for <code>pers</code>.  If you store it as a value then you do not need any dynamic memory allocation and you get away from pointer syntax.  Link should be</p>\n\n<pre><code>class Link\n{\n    friend class List;\n    Link *next;\n    Person pers; // no pointer here\n    public:\n        Link();\n        Link(string data);\n};\n</code></pre>\n\n<p>And then the constructors can be defined like</p>\n\n<pre><code>Link::Link(string data)\n{\n    next = NULL;\n    pers.put_data(data);\n}\n\nLink::Link()\n{\n    next = NULL;\n}\n</code></pre>\n\n<p>If you have to have <code>pers</code> as a pointer then you can allocate persistent storage for it with <code>new</code>.  If you do that then you need to make sure you <code>delete</code> it in the destructor of the class and that you have copy symantics.  For more on this see <a href=\"https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">What is The Rule of Three?</a></p>\n"}], "owner": {"reputation": 95, "user_id": 4839846, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5f768c091e0c9e482be75831ab4b71f5?s=128&d=identicon&r=PG&f=1", "display_name": "Thibault de Vill&#232;le", "link": "https://stackoverflow.com/users/4839846/thibault-de-vill%c3%a8le"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 37445456, "answer_count": 1, "score": -1, "last_activity_date": 1490282114, "creation_date": 1464202059, "last_edit_date": 1490282114, "question_id": 37445329, "link": "https://stackoverflow.com/questions/37445329/c-class-constructor-creates-objects-but-the-result-of-the-construction-is-d", "title": "C++ - Class constructor creates objects, but the result of the construction is different", "body": "<p>I have a class project in C++. The goal is to sort a phonebook (txt file) when inserting in a <a href=\"https://en.wikipedia.org/wiki/Linked_list\" rel=\"nofollow\">linked list</a>.</p>\n\n<p>Here are the classes :</p>\n\n<pre><code>class Person\n{\n    public:\n        string Name\n        string Firstname;\n        string Adress;\n        int PostalCode;\n        string Telephone;\n        Person();\n        ~Person();\n};\n\nclass Link\n{\n    friend class List;\n    Link *next;\n    Person *pers;\n    public:\n        Link();\n        Link(string data);\n};\n\nclass List\n{\n    // debut is the start of the chained list\n    Link *start;\n    public:\n        List(string data)\n        {\n            start = NewLinkPerson(data, NULL);\n        }\n};\n\nLink::Link(string data)\n{\n    next = NULL;\n    Person p;\n    p.put_data(data);\n    pers = &amp;p;\n}\n\nLink::Link()\n{\n    next = NULL;\n    Person p;\n    pers = &amp;p;\n}\n</code></pre>\n\n<p>And then, the function NewLinkPerson is detailed as such :</p>\n\n<pre><code>Maillon * NewLinkPerson(string data, Maillon *ssuiv)\n{\n    Maillon * nouveau = new Maillon(data);\n    nouveau-&gt;suiv = ssuiv;\n    return nouveau;\n}\n</code></pre>\n\n<p>The problem is that the object created is not the one I ordered the program him to create. If I output the object <code>pers</code> of type Person in the constructor, it will be filled with the data I asked. \nBut when it leaves the constructor, the data is gone, and is filled with random strings from the memory.</p>\n\n<p>What could be causing the issue ? I have tried many things, but none of them seem to works, all mainly returned a Segmentation Fault.</p>\n\n<p><strong>EDIT</strong> : A function I forgot to put there :</p>\n\n<pre><code>void Person::put_data(string data)\n{\n    int sep1 = data.find(\"|\");\n    int sep2 = data.find(\"|\", sep1+1);\n    int sep3 = data.find(\"|\", sep2+1);\n    int sep4 = data.find(\"|\", sep3+1);\n    Name = data.substr(0, sep1);\n    Firstname = data.substr(sep1+1, sep2-sep1-1);\n    Adress = data.substr(sep2+1, sep3-sep2-1);\n    Telephone = data.substr(sep4+1, data.npos);\n    string ccode = data.substr(sep3+1, sep4-sep3-1);\n    PostalCode = std::stoi(ccode.c_str());\n}\n</code></pre>\n\n<p><strong>Edit 2</strong> : Translated to english</p>\n"}, {"tags": ["c++", "multiple-inheritance", "fully-qualified-naming"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1464201578, "post_id": 37445130, "comment_id": 62392527, "body": "I know I saw something like this a month or so ago.  I believe it does not know which parent to use in the <code>v</code> case.  Trying to find it."}, {"owner": {"reputation": 9157, "user_id": 1794803, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f3b30f8ee9338ee3d87152343ceb0665?s=128&d=identicon&r=PG", "display_name": "Peregring-lk", "link": "https://stackoverflow.com/users/1794803/peregring-lk"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1464201653, "post_id": 37445130, "comment_id": 62392568, "body": "@barakmanos Precisely, I&#39;m researching the case when I don&#39;t need virtual inheritance."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1464201674, "post_id": 37445130, "comment_id": 62392580, "body": "This compiles successfully with clang."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 1, "creation_date": 1464201728, "post_id": 37445130, "comment_id": 62392615, "body": "Are you sure it&#39;s not <code>struct E : public C</code> up there?"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 8, "creation_date": 1464201735, "post_id": 37445130, "comment_id": 62392617, "body": "@Peregring-lk, <a href=\"http://coliru.stacked-crooked.com/a/9d43d2604247b3c0\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/9d43d2604247b3c0</a> is about 20 times easier to read and understand. Most of your example is irrelevant noise that just obscures things."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 2, "creation_date": 1464201883, "post_id": 37445130, "comment_id": 62392712, "body": "EDG accepts it too. Please report a GCC bug (if you can&#39;t find an existing one), with the minimal example (not your verbose original). Thanks."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 2, "creation_date": 1464202234, "post_id": 37445130, "comment_id": 62392912, "body": "@JonathanWakely, I think, your clarified example is worthy an answer."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1464202832, "post_id": 37445130, "comment_id": 62393246, "body": "It&#39;s not an answer, it&#39;s just the MCVE that should have been in the original question."}], "answers": [{"tags": [], "owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "is_accepted": true, "score": 5, "last_activity_date": 1464203327, "creation_date": 1464203327, "answer_id": 37445671, "question_id": 37445130, "link": "https://stackoverflow.com/questions/37445130/ambiguity-in-a-fully-qualified-static-member-variable/37445671#37445671", "title": "Ambiguity in a fully qualified static member variable", "body": "<p>This is clearly a bug in GCC, as a <a href=\"https://stackoverflow.com/questions/37445130/ambiguity-in-a-fully-qualified-static-member-variable#comment62392712_37445130\">GCC maintainer</a> recommends you report it. However, until it's fixed, you can use a nasty workaround like this:</p>\n\n<pre><code>std::cout &lt;&lt; static_cast&lt;B &amp;&gt;(v).A::a;\n</code></pre>\n\n<p>The advantage is this will help disambiguate if in a (complex) scenario that there are variables with the same name in one of the base classes.</p>\n"}], "owner": {"reputation": 9157, "user_id": 1794803, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f3b30f8ee9338ee3d87152343ceb0665?s=128&d=identicon&r=PG", "display_name": "Peregring-lk", "link": "https://stackoverflow.com/users/1794803/peregring-lk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 37445671, "answer_count": 1, "score": 11, "last_activity_date": 1464207402, "creation_date": 1464201397, "last_edit_date": 1464207402, "question_id": 37445130, "link": "https://stackoverflow.com/questions/37445130/ambiguity-in-a-fully-qualified-static-member-variable", "title": "Ambiguity in a fully qualified static member variable", "body": "<p>In this sample code, there is two sentences showing the same static variable. The first one gives no ambiguity, but the second one does, why?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nstruct A { static const char a = 'a'; };\nstruct B : public A { };\nstruct C : public A { };\nstruct G : public B, public C { };\n\nint main()\n{\n    G v;\n\n    cout &lt;&lt; G::B::A::a &lt;&lt; endl;\n    cout &lt;&lt; v.B::A::a &lt;&lt; endl;\n}\n</code></pre>\n\n<p>GCC error (according to some comments, there's no ambiguity in clang):</p>\n\n<pre><code>main.cpp:15:18: error: 'A' is an ambiguous base of 'G'\n  cout &lt;&lt; v.B::A::a &lt;&lt; endl;\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/9d43d2604247b3c0\" rel=\"nofollow noreferrer\">Code on coliru</a></p>\n"}, {"tags": ["c++", "allegro5"], "comments": [{"owner": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "edited": false, "score": 0, "creation_date": 1464202194, "post_id": 37445038, "comment_id": 62392882, "body": "Generally flickering screens are cuased by utilizing a single-buffer display model (that is, you are updating the same chunk of memory you are displaying to the screen). I&#39;m not familiar with Allegro, so I will refer you to <a href=\"https://wiki.allegro.cc/index.php?title=Double_buffering\" rel=\"nofollow noreferrer\">wiki.allegro.cc/index.php?title=Double_buffering</a>."}, {"owner": {"reputation": 1, "user_id": 6382712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7407b88aaf56156c9c7b647a95276be?s=128&d=identicon&r=PG&f=1", "display_name": "T.Josh", "link": "https://stackoverflow.com/users/6382712/t-josh"}, "reply_to_user": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "edited": false, "score": 0, "creation_date": 1464258764, "post_id": 37445038, "comment_id": 62416004, "body": "@Aumnayan I did double buffering (i think) in my code. Loop is drawing every element and than in the end refreshing the screen"}, {"owner": {"reputation": 593, "user_id": 1955945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qt3vW.png?s=128&g=1", "display_name": "rlam12", "link": "https://stackoverflow.com/users/1955945/rlam12"}, "edited": false, "score": 0, "creation_date": 1464463388, "post_id": 37445038, "comment_id": 62500757, "body": "I s your issue. It is right at the bottom. You have a timer, but you are actually not using it to control the frame rate or the timing of your game loop. What you are doing is receiving the keyboard updates and using that to update your game. Does the game move when you don&#39;t press a button?"}, {"owner": {"reputation": 1, "user_id": 6382712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7407b88aaf56156c9c7b647a95276be?s=128&d=identicon&r=PG&f=1", "display_name": "T.Josh", "link": "https://stackoverflow.com/users/6382712/t-josh"}, "reply_to_user": {"reputation": 593, "user_id": 1955945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qt3vW.png?s=128&g=1", "display_name": "rlam12", "link": "https://stackoverflow.com/users/1955945/rlam12"}, "edited": false, "score": 0, "creation_date": 1464618953, "post_id": 37445038, "comment_id": 62547457, "body": "@rlam12 It works without ball if i don&#39;t press button, but it is flickering both with and without pressing button. It is flickering all the time i run it"}], "answers": [{"tags": [], "owner": {"reputation": 340, "user_id": 4052108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6VSQI.jpg?s=128&g=1", "display_name": "goobliata", "link": "https://stackoverflow.com/users/4052108/goobliata"}, "is_accepted": false, "score": 2, "last_activity_date": 1465785043, "creation_date": 1465785043, "answer_id": 37781049, "question_id": 37445038, "link": "https://stackoverflow.com/questions/37445038/flickering-screen-allegro-5/37781049#37781049", "title": "Flickering screen ALLEGRO 5", "body": "<p>You're calling <code>al_flip_display</code> twice. You should remove the call to <code>al_flip_display</code> in <code>makeScreenBlack()</code> and keep the other one.</p>\n"}], "owner": {"reputation": 1, "user_id": 6382712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7407b88aaf56156c9c7b647a95276be?s=128&d=identicon&r=PG&f=1", "display_name": "T.Josh", "link": "https://stackoverflow.com/users/6382712/t-josh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 523, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465785043, "creation_date": 1464201043, "question_id": 37445038, "link": "https://stackoverflow.com/questions/37445038/flickering-screen-allegro-5", "title": "Flickering screen ALLEGRO 5", "body": "<p>I do school project on basis of Atari Breakout. I do it in c++ using ALLEGRO 5 library. I don't know how to avoid one problem. When I compile my program i have flickering image on my program and the ball is going too slow. I was trying to change FPS but it still doesn't work properly.</p>\n\n<p>Main loop is collecting informations about position of mouse (paddle), position of ball and bricks left. Than it should print it smoothly on the screen. Do you have any ideas, what i did wrong?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;allegro5/allegro.h&gt;\n#include &lt;allegro5\\allegro_native_dialog.h&gt;\n#include &lt;allegro5/allegro_primitives.h&gt;\n#include &lt;allegro5/allegro_font.h&gt;\n#include &lt;allegro5/allegro_ttf.h&gt;\n\n#define BRICKS_HORIZONTALLY 10\n#define BRICKS_VERTICALLY 5\n\n#define BRICK_WIDTH 102\n#define BRICK_HEIGHT 50\n#define BRICK_GAP 2\n\n#define PADDLE_WIDTH 100\n#define PADDLE_HEIGHT 20\n#define PADDLE_POSITION_Y (768-50)\n\nALLEGRO_DISPLAY *display = NULL;\nALLEGRO_EVENT_QUEUE *event_queue = NULL;\n\nstruct ball_typ {\nint xv, yv;\nint x, y;\n};\n\nint playerPaddleEdgeX;\nball_typ ball;\n\nint bricks[BRICKS_VERTICALLY][BRICKS_HORIZONTALLY];\n\nvoid makeScreenBlack() { //clead screen to black\nal_clear_to_color(al_map_rgb(0, 0, 0));\nal_flip_display();\n}\n\n\nvoid resetBricks() {\nfor (int i = 0; i&lt;BRICKS_VERTICALLY; i++) {\n    for (int ii = 0; ii&lt;BRICKS_HORIZONTALLY; ii++) {\n        bricks[i][ii] = 1;\n    }\n}\n}\n\nint numberOfBricksRemaining() {\nint numberOfBricksRemaining;\n\nnumberOfBricksRemaining = 0;\n\nfor (int i = 0; i&lt;BRICKS_VERTICALLY; i++) {\n    for (int ii = 0; ii&lt;BRICKS_HORIZONTALLY; ii++) {\n        if (bricks[i][ii] != 0) {\n            numberOfBricksRemaining++;\n        }\n    }\n}\nreturn numberOfBricksRemaining;\n}\n\n\n\nvoid drawingThings() {\nmakeScreenBlack();\n\n// draw the bricks\nfor (int i = 0; i&lt;BRICKS_VERTICALLY; i++) {\n    for (int ii = 0; ii&lt;BRICKS_HORIZONTALLY; ii++) {\n        if (bricks[i][ii] != 0) {\n            al_draw_filled_rectangle(ii*BRICK_WIDTH, i*BRICK_HEIGHT,(ii +     1)*BRICK_WIDTH - BRICK_GAP, (i + 1)*BRICK_HEIGHT - BRICK_GAP, al_map_rgb(255, 0,   0));\n        }\n    }\n}\n\n// draw the ball\nal_draw_filled_circle(ball.x, ball.y, 8, al_map_rgb(255, 255, 255));\n\n\n// draw the player\nal_draw_filled_rectangle(playerPaddleEdgeX,    PADDLE_POSITION_Y,playerPaddleEdgeX + PADDLE_WIDTH, PADDLE_POSITION_Y +    PADDLE_HEIGHT, al_map_rgb(255, 255, 255));\n\n\nALLEGRO_FONT *font = al_create_builtin_font();\nal_draw_textf(font, al_map_rgb(0, 0, 0), 10, 10, 0, \"Player Position       (playerPaddleEdgeX is %i)\", playerPaddleEdgeX);\nal_draw_textf(font, al_map_rgb(0, 0, 0), 10, 20, 0, \"ball (x,y) position is        (%i, %i)\", ball.x, ball.y);\n\n}\n\nvoid resetBall() {\nball.x = 1024 / 2;\nball.y = 768 / 2;\nball.xv = 4;\nball.yv = 2;\n}\n\n\nint doesOverlap(int objectX, int objectY,\nint areaLeft, int areaTop,\nint areaRight, int areaBottom) {\nif (ball.x &gt; areaLeft &amp;&amp;\n    ball.x &lt; areaRight &amp;&amp;\n    ball.y &gt; areaTop &amp;&amp;\n    ball.y &lt; areaBottom) {\n    return 1; // 1 here means yes\n}\nreturn 0; // 0 here means no\n}\n\nvoid moveBall() {\n// update the ball's position for the next frame\nball.x += ball.xv;\nball.y += ball.yv;\n\n// if the ball is overlapping the rectangle\nif (ball.yv &gt; 0) { // only if the ball is moving down\n    if (doesOverlap(ball.x, ball.y,\n        playerPaddleEdgeX + (PADDLE_WIDTH*0.0),\n        PADDLE_POSITION_Y,\n        playerPaddleEdgeX + (PADDLE_WIDTH*0.25),\n        PADDLE_POSITION_Y + PADDLE_HEIGHT) == 1) {\n        ball.xv = -5;\n        ball.yv = -3;\n    }\n    if (doesOverlap(ball.x, ball.y,\n        playerPaddleEdgeX + (PADDLE_WIDTH*0.25),\n        PADDLE_POSITION_Y,\n        playerPaddleEdgeX + (PADDLE_WIDTH*0.5),\n        PADDLE_POSITION_Y + PADDLE_HEIGHT) == 1) {\n        ball.xv = -3;\n        ball.yv = -5;\n    }\n    if (doesOverlap(ball.x, ball.y,\n        playerPaddleEdgeX + (PADDLE_WIDTH*0.5),\n        PADDLE_POSITION_Y,\n        playerPaddleEdgeX + (PADDLE_WIDTH*0.75),\n        PADDLE_POSITION_Y + PADDLE_HEIGHT) == 1) {\n        ball.xv = 3;\n        ball.yv = -5;\n    }\n    if (doesOverlap(ball.x, ball.y,\n        playerPaddleEdgeX + (PADDLE_WIDTH*0.75),\n        PADDLE_POSITION_Y,\n        playerPaddleEdgeX + (PADDLE_WIDTH*1.0),\n        PADDLE_POSITION_Y + PADDLE_HEIGHT) == 1) {\n        ball.xv = 5;\n        ball.yv = -3;\n    }\n}\n\nfor (int i = 0; i&lt;BRICKS_VERTICALLY; i++) {\n    for (int ii = 0; ii&lt;BRICKS_HORIZONTALLY; ii++) {\n        if (bricks[i][ii] != 0) { // is the brick still here?\n            if (doesOverlap(ball.x, ball.y,\n                ii*BRICK_WIDTH, i*BRICK_HEIGHT,\n                (ii + 1)*BRICK_WIDTH - BRICK_GAP,\n                (i + 1)*BRICK_HEIGHT - BRICK_GAP) == 1) {\n                // reverse ball's vertical direction\n                ball.yv = -ball.yv;\n                bricks[i][ii] = 0; // erase the brick\n            }\n        }\n    }\n}\n\n// bounce off edges of screen\nif (ball.x &gt; 1024) {\n    ball.xv = -ball.xv;\n}\nif (ball.x &lt; 0) {\n    ball.xv = -ball.xv;\n}\n\nif (ball.y &lt; 0) {\n    ball.yv = -ball.yv;\n}\n\n// but reset ball if it goes off bottom of screen\nif (ball.y &gt; 768) {\n    // lose!  \n\n    ALLEGRO_MOUSE_STATE state;\n    al_get_mouse_state(&amp;state);\n    if (state.buttons &amp; 1) { //reappear ball\n        resetBall();\n\n\n    }\n}\n\n}\n\nvoid updatePaddlePosition() {\n// for now, put the player's paddle where the mouse is\nint pos_x = 1024 / 2;\n\nALLEGRO_MOUSE_STATE state;\n\nal_get_mouse_state(&amp;state);\npos_x = state.x;\n\nplayerPaddleEdgeX = pos_x;\n}\n\n\n\nvoid gameSetup() {\nresetBricks();\n\nresetBall();\n// start with the ball off the bottom of the screen\nball.y = 768 + 50;\n}\n\n\n\n\n\nint main() {\n\n\nALLEGRO_TIMER * timer = NULL;\nint FPS = 60;\n\nal_init(); // allegro initializing\nal_init_font_addon();\nal_init_primitives_addon();\nif (!al_init()){ //check\n    al_show_native_message_box(NULL, NULL, NULL,\n        \"failed to initialize allegro!\", NULL, NULL);\n    return -1;\n}\n\ntimer = al_create_timer(1.0 / FPS);\n\nal_install_keyboard();\nal_install_mouse();\nevent_queue = al_create_event_queue();\nal_register_event_source(event_queue, al_get_mouse_event_source());\nal_register_event_source(event_queue, al_get_timer_event_source(timer));\nal_set_new_window_position(20, 30);\ndisplay = al_create_display(1024, 768);\n\nif (!display){ //check\n    al_show_native_message_box(NULL, NULL, NULL,\n        \"failed to initialize display!\", NULL, NULL);\n    return -1;\n}\n\nmakeScreenBlack();\n\nupdatePaddlePosition();\n\n\ngameSetup();\n\nALLEGRO_KEYBOARD_STATE key;\nal_start_timer(timer);\nwhile (al_key_down(&amp;key, ALLEGRO_KEY_ESCAPE)){\n    updatePaddlePosition();\n\n\n    moveBall();\n\n    if (numberOfBricksRemaining() == 0) {\n        resetBricks();\n    }\n\n    drawingThings();\n\n    al_flip_display();\n\n    al_rest(0.01);\n\n}\n\nal_destroy_display(display);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 1, "creation_date": 1464200479, "post_id": 37444849, "comment_id": 62391924, "body": "See <a href=\"http://eel.is/c++draft/dcl.meaning#6\" rel=\"nofollow noreferrer\">dcl.meaning#6</a>: &quot;Parentheses do not alter the type of the embedded <i>declarator-id</i>, but they can alter the binding of complex declarators.&quot;"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464200733, "post_id": 37444849, "comment_id": 62392047, "body": "Also: <a href=\"http://stackoverflow.com/questions/26832321/what-is-the-purpose-of-a-declaration-like-int-x-or-int-x-10\" title=\"what is the purpose of a declaration like int x or int x 10\">stackoverflow.com/questions/26832321/&hellip;</a>"}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 0, "creation_date": 1464200782, "post_id": 37444849, "comment_id": 62392069, "body": "<a href=\"http://stackoverflow.com/questions/34417071/visual-studio-c-compiler-weird-behaviour/34417360#34417360\" title=\"visual studio c compiler weird behaviour\">stackoverflow.com/questions/34417071/&hellip;</a>"}, {"owner": {"reputation": 2424, "user_id": 1732865, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6pYGz.png?s=128&g=1", "display_name": "Conduit", "link": "https://stackoverflow.com/users/1732865/conduit"}, "edited": false, "score": 0, "creation_date": 1464200842, "post_id": 37444849, "comment_id": 62392109, "body": "Regardless of the fact that it works, this is not a &quot;good&quot; way to code for precisely the reason you are asking this on SO ;)"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1464200871, "post_id": 37444849, "comment_id": 62392125, "body": "<code>SomeClass(instSomeClass);</code> is the same as <code>SomeClass instSomeClass;</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 1190, "user_id": 4070000, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4c671fa7002be8d180675875a8c9148e?s=128&d=identicon&r=PG&f=1", "display_name": "orbitcowboy", "link": "https://stackoverflow.com/users/4070000/orbitcowboy"}, "edited": false, "score": 0, "creation_date": 1464208055, "post_id": 37444849, "comment_id": 62395977, "body": "@orbitcowboy I think you might want to check that. Take the above code, add a copy constructor, run, and see what you get."}], "owner": {"reputation": 29, "user_id": 4958412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ffb4d191916733b6007cc73d3ddb83e?s=128&d=identicon&r=PG&f=1", "display_name": "gb12345", "link": "https://stackoverflow.com/users/4958412/gb12345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 1, "closed_date": 1464200703, "answer_count": 0, "score": 0, "last_activity_date": 1464202060, "creation_date": 1464200341, "last_edit_date": 1464202060, "question_id": 37444849, "link": "https://stackoverflow.com/questions/37444849/c-object-declaration-and-initialization-odd-syntax", "closed_reason": "Duplicate", "title": "C++ object declaration and initialization, odd syntax?", "body": "<pre><code>#include &lt;iostream&gt;\n\nclass SomeClass {\n public:\n    SomeClass(): something(100) {\n        std::cout&lt;&lt;\"constructing\"&lt;&lt;std::endl;\n    }\n\n    ~SomeClass() {\n        std::cout&lt;&lt;\"destructing\"&lt;&lt;std::endl;\n    }\n\n    void printSomething() {\n        std::cout&lt;&lt;something&lt;&lt;std::endl;\n    }\n    int something;\n};\n\nint main(int argc, char * argv[]) {\n    SomeClass(instSomeClass);\n    instSomeClass.printSomething();\n    return 0;\n}\n</code></pre>\n\n<p>Whilst scrolling through some code the other day I came across something which I haven't seen before and don't fully understand. The example above, which compiles and runs, is similar and seems to declare and initialize an object using a notation which I didn't think was legal: <code>SomeClass(instSomeClass);</code> I expected an 'instSomeClass undeclared' error or something similar.</p>\n\n<p>Whats going on here? I assume the compiler is interpreting this as something like: <code>SomeClass instSomeClass;</code> or <code>SomeClass instSomeClass = SomeClass();</code>. I can't find any information on this online. Has anyone else seen this syntax that can explain? What is this called?</p>\n"}, {"tags": ["c++", "templates", "crash", "singleton"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1464200427, "post_id": 37444732, "comment_id": 62391899, "body": "<code>this=0x1</code>in the stack trace is a pretty good starting point. <code>x</code> isn&#39;t valid."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1464201271, "post_id": 37444986, "comment_id": 62392356, "body": "That&#39;ll blow OP up some time later, but OP&#39;s code won&#39;t even get that far."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1464201354, "post_id": 37444986, "comment_id": 62392401, "body": "@user4581301 I&#39;d say that&#39;s the root problem though, and the OP have to change their design drastically."}, {"owner": {"reputation": 1, "user_id": 3776886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a42be0e47a6c9aa2d889b0fd27ff9b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3776886", "link": "https://stackoverflow.com/users/3776886/user3776886"}, "edited": false, "score": 0, "creation_date": 1464203191, "post_id": 37444986, "comment_id": 62393407, "body": "Thank you for your answer, but this doesn&#39;t solve my problem. It still crashes every time."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 1, "user_id": 3776886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a42be0e47a6c9aa2d889b0fd27ff9b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3776886", "link": "https://stackoverflow.com/users/3776886/user3776886"}, "edited": false, "score": 0, "creation_date": 1464203383, "post_id": 37444986, "comment_id": 62393511, "body": "@user3776886 You probably need some more improvements regarding thread safety. At least provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> in your question, that exactly reproduces your problem."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 1, "user_id": 3776886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a42be0e47a6c9aa2d889b0fd27ff9b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3776886", "link": "https://stackoverflow.com/users/3776886/user3776886"}, "edited": false, "score": 1, "creation_date": 1464203490, "post_id": 37444986, "comment_id": 62393588, "body": "@user3776886 To simplify your example, you can strip out all of the threading. I&#39;m putting my money on a dangling reference, but also not interested in debugging 200+ lines of code."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1464203640, "post_id": 37444986, "comment_id": 62393671, "body": "@user4581301 Your guts are gnarling probably right. So the <i>singleton template</i> doesn&#39;t have to do anything with what&#39;s asked for alltogether."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 1, "user_id": 3776886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a42be0e47a6c9aa2d889b0fd27ff9b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3776886", "link": "https://stackoverflow.com/users/3776886/user3776886"}, "edited": false, "score": 0, "creation_date": 1464204088, "post_id": 37444986, "comment_id": 62393921, "body": "@user3776886 <code>C1::getInstance(*this);</code> combined with <code>getInstance(A a)</code> going to copy <code>this</code> into a temporary <code>a</code>. It looks like <code>a</code> is going to be stored later... and then go out of scope. Bad times, man."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1464204704, "post_id": 37444986, "comment_id": 62394277, "body": "@user4581301 Yes, as mentioned that code needs to be changed drastically."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 2, "last_activity_date": 1464203015, "last_edit_date": 1495542162, "creation_date": 1464200850, "answer_id": 37444986, "question_id": 37444732, "link": "https://stackoverflow.com/questions/37444732/why-the-singleton-template-crashes-my-program/37444986#37444986", "title": "Why the singleton template crashes my program?", "body": "<p>Well, the major problem seems to be that your <code>getInstance()</code> implementation isn't thread safe.</p>\n\n<p>I'd recommend forgetting about all that <code>construct()</code> / <code>destruct()</code> stuff also and simply leave that to the CRT0 code provided with the ABI.</p>\n\n<hr>\n\n<p>You should rather use an implementation following the <a href=\"https://stackoverflow.com/questions/1661529/is-meyers-implementation-of-singleton-pattern-thread-safe\">Scott Meyer's Singleton</a> that is guaranteed to be thread safe (at least for the current standard):</p>\n\n<pre><code>template &lt;class T&gt;\nclass Singleton {\npublic:\n    static T&amp; getInstance() {   \n        static T instance_;\n        return instance_;\n    }   \n\nprotected:    \n    Singleton() {}\n    virtual ~Singleton() {}\n\n    Singleton(Singleton const&amp;) = delete;\n    Singleton&amp; operator=(Singleton const&amp;) = delete;\n};\n</code></pre>\n\n<p>If there's need to change any of the <code>Singleton</code>s properties later that could be accessed asynchronously, keep in mind to provide thread safe operations as well.</p>\n\n<p>You could support that with your template singleton base like:</p>\n\n<pre><code>template &lt;class T&gt;\nclass Singleton {\n   // ...\nprotected:    \n    mutable std::mutex internalDataGuard;\n};\n\nclass C1 : public CBase, public Singleton&lt;C1&gt; {\npublic:\n     C1(BB&amp; bb) : CBase(bb) {}\n     void run();\n\n     void setSomeData(T data) {\n         std::unique_lock(Singleton&lt;C1&gt;::internalDataGuard);\n         // change internal data member ...\n     }\n\n     const T&amp; getSomeData() const {\n         std::unique_lock(Singleton&lt;C1&gt;::internalDataGuard);\n         // return internal data member ...\n     }\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 3776886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a42be0e47a6c9aa2d889b0fd27ff9b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3776886", "link": "https://stackoverflow.com/users/3776886/user3776886"}, "edited": false, "score": 0, "creation_date": 1464207730, "post_id": 37446405, "comment_id": 62395790, "body": "Changing getInstance(A a) to getInstance(A &amp;a) fixed my problem. I thought BB&amp; will be taken as A in the template."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 1, "user_id": 3776886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a42be0e47a6c9aa2d889b0fd27ff9b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3776886", "link": "https://stackoverflow.com/users/3776886/user3776886"}, "edited": false, "score": 0, "creation_date": 1464209354, "post_id": 37446405, "comment_id": 62396680, "body": "Solves the immediate problem but you are still wide open for the other nastiness \u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 warns about and provides a solution, that would also have solved this, for."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 0, "last_activity_date": 1464205861, "creation_date": 1464205861, "answer_id": 37446405, "question_id": 37444732, "link": "https://stackoverflow.com/questions/37444732/why-the-singleton-template-crashes-my-program/37446405#37446405", "title": "Why the singleton template crashes my program?", "body": "<p>A quick note on using the stack trace to pick off some useful information. The program crashes where it crashes, but sometimes the trace can give you a few hints on where things started to go wrong:</p>\n\n<pre><code>#0  0x00000000004012ba in ABase::getX (this=0x1) at tst_sigill.cc:89\n</code></pre>\n\n<p>Died here. this=0x1, says that <code>this</code> is pointing to nonsense; 0x1 is almost certainly an invalid memory location. I can't think of a modern platform where 1 is valid memory. Doesn't mean there isn't one, but it's highly unlikely and thus a suspect.</p>\n\n<pre><code>#1  0x0000000000400e0c in BB::getX (this=0x7ffed6e821f0) at tst_sigill.cc:138\n</code></pre>\n\n<p>Here <code>this</code> is questionable. Skipping down over the next few lines, we see that all of the <code>this</code> pointers are in and around 0xaeeXXX. 0x7ffed6e821f0 is pretty far out there, so we should start by looking at references to <code>BB</code> </p>\n\n<pre><code>#2  0x0000000000400e71 in C1::run (this=0xaeedd0) at tst_sigill.cc:146\n</code></pre>\n\n<p>Specifically those inside <code>C1</code> since it was the last object we were in with a sane address.</p>\n\n<p>Maybe the rest of the stack trace matters, maybe it doesn't. Maybe we'll get back to it for more clues, but for the moment let's run down the current leads.</p>\n\n<p>Looking in on <code>C1</code>, I see:</p>\n\n<pre><code>C1(BB&amp; bb) : CBase(bb) {}\n</code></pre>\n\n<p>Takes a <code>BB</code> reference and passes it to <code>CBase</code>'s constructor</p>\n\n<pre><code>CBase(BB&amp; bb) : bb_(bb) {}\n</code></pre>\n\n<p>Stores the <code>BB</code> in <code>bb_</code></p>\n\n<p>So where does the <code>BB</code> come from? <code>C1</code> is instantiated by the singleton. I don't see any calls to <code>construct</code>, so this leaves <code>getInstance(A a)</code>, which does not take a reference. This means <code>C1(BB&amp; bb)</code> is called with a temporary. The temporary is ultimately stored in <code>CBase::bb_</code> which is a <code>BB&amp;</code>, so <code>bb_</code> is a reference to a variable that will no longer exist after returning from <code>getInstance</code>. Attempting to use <code>bb_</code> after this point will invoke Undefined Behaviour.</p>\n\n<p>I am not going to suggest a fix for this because this code is too convoluted for it's own good and, as \u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 points out in his answer, isn't going to work without a significant redesign.</p>\n"}], "owner": {"reputation": 1, "user_id": 3776886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a42be0e47a6c9aa2d889b0fd27ff9b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3776886", "link": "https://stackoverflow.com/users/3776886/user3776886"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1464228573, "creation_date": 1464199970, "last_edit_date": 1464206961, "question_id": 37444732, "link": "https://stackoverflow.com/questions/37444732/why-the-singleton-template-crashes-my-program", "title": "Why the singleton template crashes my program?", "body": "<p>Here is the header file defining the template:\nBased on a few answers, I made modifications to make template single thread safe. But the program still crashes, so I believe the focus here should not be if the template is thread safe. It's about what happened when C1 inherits from both CBase and Singleton. Apparently, the program crashes when C1 is trying to call the function of the member variable it's parent Class CBase. It seems to me, something is messed up in the memory when multiple inheritance and the single template are used together.</p>\n\n<pre><code>#ifndef _T_SINGLETON_HH_\n#define _T_SINGLETON_HH_\n\ntemplate &lt;class T&gt;\nclass Singleton\n{\npublic:\n    static T*   getInstance()\n    {   \n        static T instance_;\n        return &amp;instance_;\n    }   \n\n    template &lt;class A&gt;\n    static T*   getInstance(A a)\n    {   \n        static T instance_(a);\n        return &amp;instance_;\n    }   \n\nprotected:\n    Singleton() {}\n    virtual ~Singleton() {}\nprivate:\n    Singleton(Singleton const&amp;);\n    Singleton&amp; operator=(Singleton const&amp;);\n};\n#endif  // _T_SINGLETON_HH_ //\n</code></pre>\n\n<p>And here is how this template was used:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#include &lt;unistd.h&gt;\n#include &lt;pthread.h&gt;\n\n#include \"singleton.hh\"\n\nusing namespace std;\n\nclass X;\nclass X1; \nclass ABase;\nclass BBase;\nclass BB; \nclass CBase;\n\nclass X { \npublic:\n    virtual int getX() = 0;\n};\n\nclass X1 : public X { \npublic:\n    int getX() { return 1; }\n};\n\nclass Timer\n{\nprivate:\n   static Timer* t_; \n   BBase* b_; \n\n   Timer();\n   static void* go_helper(void* context);\n   void go();\n\npublic:\n    virtual ~Timer() {}\n\n    static Timer* getInstance();\n    void subscribe(BBase* b); \n    void unsubscribe(BBase* b) { b_ = NULL; }\n};\n\nclass CBase {\npublic:\n    CBase(BB&amp; bb) : bb_(bb) {}\n    virtual void run() = 0;\nprotected:\n    BB&amp; bb_;\n};\n\nclass C1 : public CBase,\n           public Singleton&lt;C1&gt;\n{\npublic:\n    C1(BB&amp; bb) : CBase(bb) {}\n    void run();\n};\n\nclass BBase {\npublic:\n    BBase(ABase&amp; a) : a_(a) { Timer::getInstance()-&gt;subscribe(this); } \n    virtual ~BBase() { Timer::getInstance()-&gt;unsubscribe(this); }\n    virtual void run() = 0;\nprotected:\n    ABase&amp;  a_; \n};\n\nclass BB : public BBase {\npublic:\n    BB(ABase&amp; a) : BBase(a) {\n        c = C1::getInstance(*this);\n//      c = new C1(*this);    IF WE USE THIS INSTEAD, THEN IT WILL WORK\n    }\n    int getX();\n    void run();\nprivate:\n    CBase*  c;\n};\n\nclass ABase {\npublic:\n    ABase() {\n        x = new X1;\n        b = new BB(*this);\n    }\n    void run();\n    int getX() { return x-&gt;getX(); }\nprivate:\n    X* x;\n    BBase* b;\n};\n\nTimer* Timer::t_ = NULL;\n\nTimer::Timer() : b_(NULL)\n{\n    pthread_t th;\n    pthread_create(&amp;th, NULL, &amp;Timer::go_helper, this);\n}\n\nTimer*\nTimer::getInstance() {\n    if (t_ == NULL)\n        t_ = new Timer;\n    return t_;\n}\n\nvoid\nTimer::subscribe(BBase* b) { b_ = b; }\n\nvoid*\nTimer::go_helper(void* context) {\n    Timer *t = reinterpret_cast&lt;Timer*&gt;(context);\n    t-&gt;go();\n    return NULL;\n}\n\nvoid\nTimer::go()\n{\n    while(1) {\n        sleep(1);\n        if (b_) b_-&gt;run();\n    }\n}\n\nvoid ABase::run() {\n    cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; getX() &lt;&lt; endl;\n    cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; x-&gt;getX() &lt;&lt; endl;\n    b-&gt;run();\n    while(1)\n        sleep(1);\n}\n\nint BB::getX() {\n    return a_.getX();\n}\nvoid BB::run() {\n    cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; endl;\n    c-&gt;run();\n}\n\nvoid C1::run() {\n    cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; bb_.getX() &lt;&lt; endl;\n}\n\nint main()\n{\n    ABase*  a = new ABase;\n    a-&gt;run();\n}\n</code></pre>\n\n<p>If you still think it is a thread safe issue, then here is the simplified one thread version using the template:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#include &lt;unistd.h&gt;\n#include &lt;pthread.h&gt;\n\n#include \"singleton.hh\"\n\nusing namespace std;\n\nclass X;\nclass X1; \nclass ABase;\nclass BBase;\nclass BB; \nclass CBase;\n\nclass X { \npublic:\n    virtual int getX() = 0;\n};\n\nclass X1 : public X { \npublic:\n    int getX() { return 1; }\n};\n\nclass CBase {\npublic:\n    CBase(BB&amp; bb) : bb_(bb) {}\n    virtual void run() = 0;\nprotected:\n    BB&amp; bb_;\n};\n\nclass C1 : public CBase,\n           public Singleton&lt;C1&gt;\n{\npublic:\n    C1(BB&amp; bb) : CBase(bb) {}\n    void run();\n};\n\nclass BBase {\npublic:\n    BBase(ABase&amp; a) : a_(a) { } \n    virtual ~BBase() { } \n    virtual void run() = 0;\nprotected:\n    ABase&amp;  a_; \n};\n\nclass BB : public BBase {\npublic:\n    BB(ABase&amp; a) : BBase(a) {\n        c = C1::getInstance(*this);\n//      c = new C1(*this);\n    }   \n    int getX();\n    void run();\nprivate:\n    CBase*  c;  \n};\n\nclass ABase {\npublic:\n    ABase() {\n        x = new X1; \n        b = new BB(*this);\n    }   \n    void run();\n    int getX() { return x-&gt;getX(); }\nprivate:\n    X* x;\n    BBase* b;\n};\n\nvoid ABase::run() {\n    cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; getX() &lt;&lt; endl;\n    cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; x-&gt;getX() &lt;&lt; endl;\n    b-&gt;run();\n    while(1)\n        sleep(1);\n}\n\nint BB::getX() {\n    return a_.getX();\n}\nvoid BB::run() {\n    cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; endl;\n    c-&gt;run();\n}\n\nvoid C1::run() {\n    cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; bb_.getX() &lt;&lt; endl;\n}\n</code></pre>\n\n<p>When I run this program, it crashes:</p>\n\n<pre><code>void ABase::run()1\nvoid ABase::run()1\nvirtual void BB::run()\nzsh: segmentation fault (core dumped)  ./a.out\n</code></pre>\n\n<p>Here is the stack information given by GDB:</p>\n\n<pre><code>#0  0x00000000004012ba in ABase::getX (this=0x1) at tst_sigill.cc:89\n89        int getX() { return x-&gt;getX(); }\n[Current thread is 1 (Thread 0x7faa0f050740 (LWP 5351))]\n(gdb) bt\n#0  0x00000000004012ba in ABase::getX (this=0x1) at tst_sigill.cc:89\n#1  0x0000000000400e0c in BB::getX (this=0x7ffed6e821f0) at tst_sigill.cc:138\n#2  0x0000000000400e71 in C1::run (this=0xaeedd0) at tst_sigill.cc:146\n#3  0x0000000000400e51 in BB::run (this=0xaeec60) at tst_sigill.cc:142\n#4  0x0000000000400de3 in ABase::run (this=0xaeec20) at tst_sigill.cc:132\n#5  0x0000000000400ed1 in main () at tst_sigill.cc:152\n</code></pre>\n\n<p>For some unknown reason, this pointer passed to BB::getX and ABase::getX was messed up. I can't see what's wrong with the code.</p>\n"}, {"tags": ["c++", "boost", "time"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1464199799, "post_id": 37444594, "comment_id": 62391547, "body": "What&#39;s the platform? Linux <code>clock()</code> is processor time, Windows <code>clock()</code> AFAIK is wall clock time."}, {"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 4, "creation_date": 1464200026, "post_id": 37444594, "comment_id": 62391655, "body": "A graph is useless without units, labelled axes, scale, etc. Are you really worried about minute differences (in the range of 1.21 - 1.33, say milliseconds) for example?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 2, "creation_date": 1464200099, "post_id": 37444594, "comment_id": 62391696, "body": "@sleeptightpupper The y axis is in seconds.  It says that in the key.  I just assume x is each run."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1464200110, "post_id": 37444594, "comment_id": 62391707, "body": "A tenth of a second is peanuts. The OS heading off to do something that&#39;s more important to it than running your code can inject all sorts of fun artifacts that slow you down by a lot more than 100ms. Recommend running your program through some real profiling software."}, {"owner": {"reputation": 6090, "user_id": 4699340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U4Ums.jpg?s=128&g=1", "display_name": "Andrew Komiagin", "link": "https://stackoverflow.com/users/4699340/andrew-komiagin"}, "edited": false, "score": 1, "creation_date": 1464200175, "post_id": 37444594, "comment_id": 62391754, "body": "Check out <a href=\"http://stackoverflow.com/questions/17432502/how-can-i-measure-cpu-time-and-wall-clock-time-on-both-linux-windows\" title=\"how can i measure cpu time and wall clock time on both linux windows\">stackoverflow.com/questions/17432502/&hellip;</a>"}, {"owner": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1464201693, "post_id": 37444594, "comment_id": 62392595, "body": "@WeatherVane, Windows 7."}, {"owner": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "reply_to_user": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1464201702, "post_id": 37444594, "comment_id": 62392601, "body": "@sleeptightpupper, units here are seconds, but this graph indeed is not good, I just can&#39;t find good example, which will take more time to calculate."}, {"owner": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464201712, "post_id": 37444594, "comment_id": 62392607, "body": "@NathanOliver, yes, X is each run."}, {"owner": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1464201725, "post_id": 37444594, "comment_id": 62392611, "body": "@user4581301, I know about multitasking :), I just asked whether it&#39;s normal for cpu clock time to be so random? Also, if you know some software which could help at finding such problems (Random execution time) - give me advices."}], "answers": [{"tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": true, "score": 9, "last_activity_date": 1464201235, "creation_date": 1464201235, "answer_id": 37445086, "question_id": 37444594, "link": "https://stackoverflow.com/questions/37444594/is-cpu-clock-time-returned-by-have-to-be-exactly-same-among-runs/37445086#37445086", "title": "Is cpu clock time returned by have to be exactly same among runs?", "body": "<blockquote>\n  <p>Of course we assume that our program is stable, and doesn't have any\n  random behaviour. So, is it possible?</p>\n</blockquote>\n\n<p>If you're program is running on a desktop, this variability is typical, and I would say unavoidable.  Interrupts, i/o channel activity, and Ethernet itself consume cpu time, often with surprisingly large 'blocks-of-time' (see tcp / ip SAR, cache misses, etc), most of which is beyond your program's control and not in-synch with your timing efforts.  </p>\n\n<p>I have seen only one example of software running in a 'stable' way that you hint at.  That computer was a SBC (single board computer), with 1 cpu (not Intel or AMD), all static ram (so no dynamic ram, and no refresh activity), no Ethernet, but two channels of i/o at fixed rate, and it ran a single program on a scaled down op system (not linux, not a desktop os) ... the precision was as if the behaviour was simple hw logic.  </p>\n\n<p>As team lead, I recognized the unusual, so I asked her if she had time to attach a logic analyzer and scope ... she demonstrated that neither tool showed any variance in time, edge to edge, message to message. Her software logic was, to me, impressively straight forward.   In that system, if you did not need an interrupt, you simply did not enable it. </p>\n\n<p>A desktop is a remarkably different beast ... so many things going on at the same time, most of which can not be stifled.</p>\n\n<hr>\n\n<p>Yes. It is not only possible but unavoidable that a desktop has the kinds of variance (in timing) you are seeing.  </p>\n\n<p>And yet it is possible to achieve the stability you have hinted at, just not on a desktop.  It takes special hardware, and careful coding.</p>\n"}, {"comments": [{"owner": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "edited": false, "score": 0, "creation_date": 1464202368, "post_id": 37445345, "comment_id": 62392988, "body": "Hmm, thanks for your answer, I actually used GetProcessTimes too, but it gave me almost same result. Anyway thanks."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1464207373, "post_id": 37445345, "comment_id": 62395599, "body": "Good citation to explain things"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 3, "last_activity_date": 1464202115, "creation_date": 1464202115, "answer_id": 37445345, "question_id": 37444594, "link": "https://stackoverflow.com/questions/37444594/is-cpu-clock-time-returned-by-have-to-be-exactly-same-among-runs/37445345#37445345", "title": "Is cpu clock time returned by have to be exactly same among runs?", "body": "<p>OP says is using Windows 7, if that is MSVC the <a href=\"https://msdn.microsoft.com/en-us/library/4e2ess30.aspx\" rel=\"nofollow\">man page</a> says</p>\n\n<blockquote>\n  <p>The clock function tells how much wall-clock time the calling process\n  has used. Note that this is not strictly conformant with ISO C99,\n  which specifies net CPU time as the return value. To obtain CPU time,\n  use the Win32 GetProcessTimes function.</p>\n</blockquote>\n\n<p>That is why the apparent execution time is inconsistent.</p>\n"}, {"tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": false, "score": 3, "last_activity_date": 1464206351, "last_edit_date": 1495539848, "creation_date": 1464206351, "answer_id": 37446523, "question_id": 37444594, "link": "https://stackoverflow.com/questions/37444594/is-cpu-clock-time-returned-by-have-to-be-exactly-same-among-runs/37446523#37446523", "title": "Is cpu clock time returned by have to be exactly same among runs?", "body": "<p>This is absolutely normal. There are many effects that cause this. In fact repeatability for performance experiments is very difficult to achieve.</p>\n\n<h1>Cache / Memory</h1>\n\n<p>Any performance involving memory heavily depend on whether the cache is used or not:</p>\n\n<p>The operating system schedules another thread on your core?\nEven if the time of this thread doesn't count for your process clock, it can evict your working data from the cache and your program runs slower afterwards. </p>\n\n<p>The operating system decides to move your thread to another core? The core-local cache doesn't contain your working data. In a parallel application, the mapping from threads to cores has a huge impact on performance.</p>\n\n<p>The operating system decides to run another memory-intense thread on in parallel (on a different core)? Your application has less shared cache and memory bandwidth available.</p>\n\n<h1>Hardware</h1>\n\n<p>On a recent system you likely use turbo mode - that changes CPU frequency based on many parameters including temperature.</p>\n\n<p>Modern CPUs have many heuristics that effect performance. For instance a branch predictor guesses which branch you take for a jump based on past \"experience\". Your performance varies greatly whether that guess is right or not, as explained in detail in this <a href=\"https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-an-unsorted-array/11227902#11227902\">epic answer</a>. There are other components like that, for example prefetchers.</p>\n\n<h1>Clock accuracy</h1>\n\n<p>Clocks are not perfect either. They have limited resolution and accuracy. They can drift over time - or differ among cores. As indicated by Weather Vane, the software on top of the clocks can also be wrong.</p>\n\n<p>This is by far a comprehensive list, just some examples.</p>\n"}], "owner": {"reputation": 7661, "user_id": 1030820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bd43a0f1dab655253a7003bf201d290?s=128&d=identicon&r=PG", "display_name": "Ibraim Ganiev", "link": "https://stackoverflow.com/users/1030820/ibraim-ganiev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 371, "favorite_count": 1, "accepted_answer_id": 37445086, "answer_count": 3, "score": 10, "last_activity_date": 1464237462, "creation_date": 1464199479, "last_edit_date": 1464237462, "question_id": 37444594, "link": "https://stackoverflow.com/questions/37444594/is-cpu-clock-time-returned-by-have-to-be-exactly-same-among-runs", "title": "Is cpu clock time returned by have to be exactly same among runs?", "body": "<p>I have big project written in C++. It might have some stability problems (i.e. random runtime), but I'm not sure about it. I understand that execution time, measured by wall clock time might be different among runs, because of OS multitasking. But I don't know, whether it's normal for stable program, to have varying execution time measured by cpu clock time among runs with same input. I tried to use <code>clock()</code> from time.h, and </p>\n\n<pre><code>boost::chrono:::process_user_cpu_clock::now();\n</code></pre>\n\n<p>But in both cases I see spikes on a graph. I'll give you an example of such graphs. Here Y axis - execution time, X axis - consecutive runs of a same program, on same input data. Red graph - wall clock time, red - cpu clock time, taken by clock() from time.h</p>\n\n<p><a href=\"https://i.stack.imgur.com/8mJW0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8mJW0.png\" alt=\"enter image description here\"></a></p>\n\n<p>Of course we assume that our program is stable, and doesn't have any random behaviour. So, is it possible? Platform is Windows 7.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1464211072, "post_id": 37444539, "comment_id": 62397458, "body": "The simple answer: No."}], "answers": [{"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 10, "last_activity_date": 1588730700, "last_edit_date": 1588730700, "creation_date": 1464211602, "answer_id": 37447898, "question_id": 37444539, "link": "https://stackoverflow.com/questions/37444539/how-to-set-qnetworkreply-timeout-without-external-timer/37447898#37447898", "title": "How to set QNetworkReply timeout without external timer?", "body": "<p>It's not possible without using a timer, but you don't have to explicitly write timer code. The functionality can be neatly packaged into a static function that acts as if the timeout was a settable property of the reply - see example below.</p>\n\n<p>There are two issues:</p>\n\n<ol>\n<li><p>How to handle a timeout on a request that is in progress.</p></li>\n<li><p>How to determine whether a network request has begun processing. This problem is addressed in <a href=\"https://stackoverflow.com/q/12002605/1329652\">this question</a>.</p></li>\n</ol>\n\n<p>A simple timeout handler could be implemented as below (derived from <a href=\"https://codereview.stackexchange.com/q/30031/14131\">this answer</a>). The code is portable across Qt 4 and Qt 5.</p>\n\n<p>You have a choice between <a href=\"http://doc.qt.io/qt-5/qnetworkreply.html#abort\" rel=\"nofollow noreferrer\"><code>abort</code>-ing</a> the request on timeout (the default), or <a href=\"http://doc.qt.io/qt-5/qnetworkreply.html#close\" rel=\"nofollow noreferrer\"><code>close</code>-ing</a> it. The former releases network resources immediately, the latter allows the request to finish but discards any data received and is mostly useful with upload requests.</p>\n\n<pre><code>class ReplyTimeout : public QObject {\n    Q_OBJECT\npublic:\n    enum HandleMethod { Abort, Close };\n    ReplyTimeout(QNetworkReply* reply, const int timeout, HandleMethod method = Abort) :\n        QObject(reply), m_method(method)\n    {\n        Q_ASSERT(reply);\n        if (reply &amp;&amp; reply-&gt;isRunning()) {\n            m_timer.start(timeout, this);\n            connect(reply, &amp;QNetworkReply::finished, this, &amp;QObject::deleteLater);\n        }\n    }\n    static void set(QNetworkReply* reply, const int timeout, HandleMethod method = Abort)\n    {\n        new ReplyTimeout(reply, timeout, method);\n    }\nprotected:\n    QBasicTimer m_timer;\n    HandleMethod m_method;\n    void timerEvent(QTimerEvent * ev) {\n        if (!m_timer.isActive() || ev-&gt;timerId() != m_timer.timerId())\n            return;\n        auto reply = static_cast&lt;QNetworkReply*&gt;(parent());\n        if (reply-&gt;isRunning())\n        {\n            if (m_method == Close)\n                reply-&gt;close();\n            else if (m_method == Abort)\n                reply-&gt;abort();\n            m_timer.stop();\n        }\n    }\n};\n</code></pre>\n\n<p>Use:</p>\n\n<pre><code>QNetworkAccessManager networkAccessManger;\nQNetworkReply* reply = \n  networkAccessManger.get(QNetworkRequest(QUrl(\"https://www.google.com\")));\nReplyTimeout::set(reply, 100);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 473, "user_id": 135559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f350ad547031c046bd20e418d223094?s=128&d=identicon&r=PG", "display_name": "ekkescorner", "link": "https://stackoverflow.com/users/135559/ekkescorner"}, "is_accepted": false, "score": 1, "last_activity_date": 1574099440, "creation_date": 1574099440, "answer_id": 58920313, "question_id": 37444539, "link": "https://stackoverflow.com/questions/37444539/how-to-set-qnetworkreply-timeout-without-external-timer/58920313#58920313", "title": "How to set QNetworkReply timeout without external timer?", "body": "<p>with Qt 5.15 it should be a built-in feature - just found out that a 10 yrs old bug is fixed :) <a href=\"https://codereview.qt-project.org/c/qt/qtbase/+/278064\" rel=\"nofollow noreferrer\">https://codereview.qt-project.org/c/qt/qtbase/+/278064</a> </p>\n"}], "owner": {"reputation": 3729, "user_id": 1391055, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/edbeabd2b0a1788b369790c88bb00c01?s=128&d=identicon&r=PG", "display_name": "Nyaruko", "link": "https://stackoverflow.com/users/1391055/nyaruko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5355, "favorite_count": 2, "accepted_answer_id": 37447898, "answer_count": 2, "score": 11, "last_activity_date": 1588730700, "creation_date": 1464199257, "last_edit_date": 1464211501, "question_id": 37444539, "link": "https://stackoverflow.com/questions/37444539/how-to-set-qnetworkreply-timeout-without-external-timer", "title": "How to set QNetworkReply timeout without external timer?", "body": "<p>Is it possible to set a timeout for <code>QNetworkReply</code>, so for a long time there is no reply from server, it could emit the <code>finished()</code> signal?</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 342, "user_id": 6235255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68671c12220e20473b372bcaed907bfa?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey Petrov", "link": "https://stackoverflow.com/users/6235255/aleksey-petrov"}, "edited": false, "score": 0, "creation_date": 1464200544, "post_id": 37444531, "comment_id": 62391952, "body": "Have you tried other CV_FOURCC codes, like DIVX, MP42 or DIV3 ? <a href=\"http://www.fourcc.org/codecs.php\" rel=\"nofollow noreferrer\">There</a> you can find mode codes."}, {"owner": {"reputation": 873, "user_id": 2693030, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/33fad089255c86e4bc887744d6c3920c?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Blake", "link": "https://stackoverflow.com/users/2693030/michael-blake"}, "reply_to_user": {"reputation": 342, "user_id": 6235255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68671c12220e20473b372bcaed907bfa?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey Petrov", "link": "https://stackoverflow.com/users/6235255/aleksey-petrov"}, "edited": false, "score": 0, "creation_date": 1464201049, "post_id": 37444531, "comment_id": 62392233, "body": "@AlekseyPetrov No luck, unfortunately. I&#39;ve tried five."}, {"owner": {"reputation": 342, "user_id": 6235255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68671c12220e20473b372bcaed907bfa?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey Petrov", "link": "https://stackoverflow.com/users/6235255/aleksey-petrov"}, "edited": false, "score": 0, "creation_date": 1464265626, "post_id": 37444531, "comment_id": 62420625, "body": "What size m_pRgb has? Maybe, not 640x480?"}], "owner": {"reputation": 873, "user_id": 2693030, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/33fad089255c86e4bc887744d6c3920c?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Blake", "link": "https://stackoverflow.com/users/2693030/michael-blake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 375, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1464199228, "creation_date": 1464199228, "question_id": 37444531, "link": "https://stackoverflow.com/questions/37444531/recording-a-video-using-opencv-and-iplimage", "title": "Recording a video using OpenCV and IplImage", "body": "<pre><code>void captureVideo()\n{\n    int codec = CV_FOURCC('P','I','M','1');\n    CvSize size = cvSize(640,480);\n    CvVideoWriter * vwriter = cvCreateVideoWriter(\"test.avi\", codec, 15, size);\n    for(int i = 0; i &lt; 100; i++)\n    {\n        getImageData((BYTE*)m_pRgb-&gt;imageData, m_pRgb-&gt;imageSize, -1);\n        cvShowImage(\"video\", m_pRgb);\n        cvWriteToAVI(vwriter, m_pRgb);\n    }\n    cvReleaseVideoWriter(&amp;vwriter);\n}\n</code></pre>\n\n<p>I have to use IplImage instead of mat for this project unfortunately, and I was able to get live view working, get images to work, but videos I cannot. In this code, <code>m_pRgb</code> is my frame of type <code>IplImage *</code>. It's meant to capture 100 frames and save it as an AVI. It saves the AVI, but the AVI won't play in anything.</p>\n"}, {"tags": ["c++", "text-based"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 3, "creation_date": 1464199360, "post_id": 37444526, "comment_id": 62391300, "body": "<i>I have some kind of an idea for how to do it, however I&#39;m completely stumped as to what to actually put into the functions</i> Do you or do you not have an idea what to put in there? What did you try to put in there?"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1464200257, "post_id": 37444526, "comment_id": 62391805, "body": "Instead of calculating <code>inventoryCount</code>, <code>Player</code> should probably have an <code>int inventoryCount</code> member since the way you are calculating it now always returns 10."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1464201073, "post_id": 37444526, "comment_id": 62392249, "body": "Why are you using an array? Is that a requirement for the assignment? <code>std::vector</code> seems like a better solution."}, {"owner": {"reputation": 17, "user_id": 6382582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5748c42d9ae01401f98d60b92c9e25a?s=128&d=identicon&r=PG&f=1", "display_name": "Dheraxys", "link": "https://stackoverflow.com/users/6382582/dheraxys"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1464201166, "post_id": 37444526, "comment_id": 62392296, "body": "@JohnnyMopp We haven&#39;t gotten to vectors. But in the research I&#39;ve done to help me with this assignment that seems to be a much more efficient way to do things. So yes, I suppose it is a requirement that we use an array"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 6382582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5748c42d9ae01401f98d60b92c9e25a?s=128&d=identicon&r=PG&f=1", "display_name": "Dheraxys", "link": "https://stackoverflow.com/users/6382582/dheraxys"}, "edited": false, "score": 0, "creation_date": 1464206501, "post_id": 37445482, "comment_id": 62395157, "body": "Awesome! That really helps. So would I do something similar for the keepItem function?"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "reply_to_user": {"reputation": 17, "user_id": 6382582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5748c42d9ae01401f98d60b92c9e25a?s=128&d=identicon&r=PG&f=1", "display_name": "Dheraxys", "link": "https://stackoverflow.com/users/6382582/dheraxys"}, "edited": false, "score": 0, "creation_date": 1464207040, "post_id": 37445482, "comment_id": 62395426, "body": "For <code>keepItem</code>, search for a null in <code>inventory</code> and put the pointer there."}, {"owner": {"reputation": 17, "user_id": 6382582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5748c42d9ae01401f98d60b92c9e25a?s=128&d=identicon&r=PG&f=1", "display_name": "Dheraxys", "link": "https://stackoverflow.com/users/6382582/dheraxys"}, "edited": false, "score": 0, "creation_date": 1464207510, "post_id": 37445482, "comment_id": 62395674, "body": "Alright. Thanks a bunch"}], "tags": [], "owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "is_accepted": true, "score": 0, "last_activity_date": 1464202649, "creation_date": 1464202649, "answer_id": 37445482, "question_id": 37444526, "link": "https://stackoverflow.com/questions/37444526/text-based-rpg-drop-and-keep-item-functions/37445482#37445482", "title": "Text Based RPG Drop and Keep Item Functions", "body": "<p>Based on your requirements, here are some fixes:</p>\n\n<p>First, it's important the <code>inventory</code> array gets initialized to null, since null will mark an empty slot:</p>\n\n<pre><code>struct Player {\n    int facing;\n    int row, col;\n    Item* inventory[kInventoryItemsMax] = {nullptr};\n};\n</code></pre>\n\n<p>Next, count the items by counting the non-null items:</p>\n\n<pre><code>int Player_inventoryCount(Player&amp; p) \n{\n    int inventoryCount= 0;\n    for (int i = 0; i &lt; kInventoryItemsMax; i++) {\n        if (nullptr != p.inventory[i]) {\n            inventoryCount += 1;\n        }\n    }\n    return inventoryCount;\n}\n</code></pre>\n\n<p>To drop an item, set it to null:</p>\n\n<pre><code>Item* Player_dropItem(Player&amp; p, string&amp; itemName)\n{\n    for (int i = 0; i &lt; kInventoryItemsMax; i++) {\n        // Check for match - skipping null items\n        if (nullptr != p.inventory[i] &amp;&amp; itemName == p.inventory[i]-&gt;name) {\n            // Temporarily store the pointer\n            Item *temp = p.inventory[i];\n            // Set it to null in the array to mark as dropped\n            p.inventory[i] = nullptr;\n            // Return the item\n            return temp;\n        }\n    }\n    // Not found - return null\n    return nullptr;\n}\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 6382582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5748c42d9ae01401f98d60b92c9e25a?s=128&d=identicon&r=PG&f=1", "display_name": "Dheraxys", "link": "https://stackoverflow.com/users/6382582/dheraxys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "closed_date": 1464792609, "accepted_answer_id": 37445482, "answer_count": 1, "score": -1, "last_activity_date": 1464202649, "creation_date": 1464199212, "last_edit_date": 1464201085, "question_id": 37444526, "link": "https://stackoverflow.com/questions/37444526/text-based-rpg-drop-and-keep-item-functions", "closed_reason": "Needs details or clarity", "title": "Text Based RPG Drop and Keep Item Functions", "body": "<p>So in my programming class I have to make a text based RPG. The issue I'm having is figuring out what to put inside of my Player_dropItem() function and my Player_keepItem() function. I know what they're supposed to do and I have some kind of an idea for how to do it, however I'm completely stumped as to what to actually put into the functions.</p>\n\n<p>Here's some of my code:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;fstream&gt;\n\n// Macros ----------------\n#define ForAll(m) for(int ndx = 0; ndx &lt; int(m); ndx++)\n\nusing std::cout;\nusing std::cin;\nusing std::endl;\nusing std::getline;\nusing std::string;\nusing std::stringstream;\nusing std::ofstream; // Output file stream\nusing std::ifstream; // Input file stream\n\ntypedef char const* Directions;\ntypedef char const* Walls;\ntypedef int Coord;\ntypedef char Key;\ntypedef char Wall;\n\nenum Facing {\n    kNorth = 0,\n    kEast,\n    kWest,\n    kSouth,\n    kEnd\n}; \n\nenum ItemKind {\n    ItemKind_detail = 0,\n    ItemKind_keep,\n    ItemKind_use,\n    ItemKind_object\n};\n\nDirections gDirections[] = {\n    \"North\",\n    \"East\",\n    \"West\",\n    \"South\"\n};\n\n// Player ----------------\n\nconst int kInventoryItemsMax = 10;\n\nstruct Player{\n    int facing;\n    int row, col;\n    Item* inventory[kInventoryItemsMax];\n};\n\n// return a count of all items in player's inventory\nint Player_inventoryCount(Player&amp; p) \n{\n    int inventoryCount = sizeof(p.inventory) / sizeof(p.inventory[0]);\n\n    return inventoryCount;\n}\n\n// Find empty slot in player's inventory and keep item\n// Return true if kept - false if not (inventory at max)\nbool Player_keepItem(Player&amp; p, Item* item)\n{\n    ForAll(p.inventory) {\n        if (p.inventory == 0){\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n}\n\n// Searches inventory for itemName.\n// if found removes from inventory\n// returns item* if found or nullptr if not.\nItem* Player_dropItem(Player&amp; p, string&amp; itemName)\n{\n    ForAll(p.inventory) {\n        if (itemName == ) {\n            return p.inventory;\n        }\n        else if (itemName != ) {\n            return nullptr;\n        }\n    }\n}\n\n// Print player inventory to console\nvoid Player_printInventory(Player&amp; p)\n{\n    int inventoryCount = sizeof(p.inventory) / sizeof(p.inventory[0]);\n\n    ForAll(inventoryCount) {\n        cout &lt;&lt; ndx;\n    }\n}\n\n// Items from file\nstruct Item {\n    int     id,\n            kind,\n            value;\n\n    string  name,\n            describe;\n};\n</code></pre>\n\n<p>That should be it but if it helps I can put more code up. Any help is appreciated. Thanks!</p>\n"}, {"tags": ["c++", "sockets", "boost", "boost-asio", "move"], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 4271452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100002107078879/picture?type=large", "display_name": "Iulian Pinzaru", "link": "https://stackoverflow.com/users/4271452/iulian-pinzaru"}, "edited": false, "score": 0, "creation_date": 1464201506, "post_id": 37444756, "comment_id": 62392485, "body": "thanks for answer, i thought the same way... but i was confused, because of &quot;stolen&quot; resources as you mentioned. I&#39;ll test it, and accept your answer after it goes ok :)"}, {"owner": {"reputation": 191, "user_id": 4271452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100002107078879/picture?type=large", "display_name": "Iulian Pinzaru", "link": "https://stackoverflow.com/users/4271452/iulian-pinzaru"}, "edited": false, "score": 0, "creation_date": 1464215981, "post_id": 37444756, "comment_id": 62399396, "body": "not really good news, because of it isn&#39;t working as expected. May be i&#39;m doing something wrong? I&#39;ve updated the post with some problem description. @teivaz - check it please."}, {"owner": {"reputation": 4506, "user_id": 3344612, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/jwgap.jpg?s=128&g=1", "display_name": "Teivaz", "link": "https://stackoverflow.com/users/3344612/teivaz"}, "reply_to_user": {"reputation": 191, "user_id": 4271452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100002107078879/picture?type=large", "display_name": "Iulian Pinzaru", "link": "https://stackoverflow.com/users/4271452/iulian-pinzaru"}, "edited": false, "score": 0, "creation_date": 1464217040, "post_id": 37444756, "comment_id": 62399734, "body": "I can&#39;t really tell right now what is wrong here right now. What I see is <code>new_connection_.reset(new connection(std::move(socket_), io_service_));</code> here you don&#39;t need to wrap in <code>std::move</code> as you don&#39;t have overloaded constructor <code>connection(socket&amp;&amp;, io_service&amp;);</code>. I&#39;ll try to get back to it tomorrow."}, {"owner": {"reputation": 191, "user_id": 4271452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100002107078879/picture?type=large", "display_name": "Iulian Pinzaru", "link": "https://stackoverflow.com/users/4271452/iulian-pinzaru"}, "edited": false, "score": 0, "creation_date": 1464218062, "post_id": 37444756, "comment_id": 62399958, "body": "ok. By the way, i&#39;ve tried doing without wrapping into <code>move</code> but my intelli sense reports a error, so i must use <code>std::move</code>. May be because of <code>socket_</code> is a field in the class where i call <code>new_connection_.reset(new connection(std::move(socket_), io_service_));</code>.  Or may be do you want to say that i must receive the <code>socket</code> param in my <code>connection</code> ctor by the refference <code>&amp;</code> ?"}], "tags": [], "owner": {"reputation": 4506, "user_id": 3344612, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/jwgap.jpg?s=128&g=1", "display_name": "Teivaz", "link": "https://stackoverflow.com/users/3344612/teivaz"}, "is_accepted": true, "score": 1, "last_activity_date": 1464200044, "creation_date": 1464200044, "answer_id": 37444756, "question_id": 37444378, "link": "https://stackoverflow.com/questions/37444378/can-i-have-boost-asio-socket-references-in-two-different-class-instances/37444756#37444756", "title": "Can i have boost asio socket references in two different class instances?", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/language/move_assignment\" rel=\"nofollow\">In general</a> it is not guaranteed:</p>\n\n<blockquote>\n  <p>Move assignment operators typically \"steal\" the resources held by the argument (e.g. pointers to dynamically-allocated objects, file descriptors, TCP sockets, I/O streams, running threads, etc.), rather than make copies of them, and leave the argument in some valid but otherwise indeterminate state. For example, move-assigning from a std::string or from a std::vector may result in the argument being left empty. However, this behaviour should not be relied upon.</p>\n</blockquote>\n\n<p>But according to the documentation for <a href=\"http://www.boost.org/doc/libs/1_61_0/doc/html/boost_asio/reference/basic_stream_socket/operator_eq_/overload1.html\" rel=\"nofollow\"><code>tcp::socket</code></a> it is left in the same state:</p>\n\n<blockquote>\n  <p>Following the move, the moved-from object is in the same state as if constructed using the basic_stream_socket(io_service&amp;) constructor.</p>\n</blockquote>\n"}], "owner": {"reputation": 191, "user_id": 4271452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100002107078879/picture?type=large", "display_name": "Iulian Pinzaru", "link": "https://stackoverflow.com/users/4271452/iulian-pinzaru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "accepted_answer_id": 37444756, "answer_count": 1, "score": 1, "last_activity_date": 1464373922, "creation_date": 1464198653, "last_edit_date": 1464373922, "question_id": 37444378, "link": "https://stackoverflow.com/questions/37444378/can-i-have-boost-asio-socket-references-in-two-different-class-instances", "title": "Can i have boost asio socket references in two different class instances?", "body": "<p>I want to <code>std::move(my_asio_socket)</code> to the instance of some class. What if I do the same for an instance of some other class? </p>\n\n<p>My purpose is to <code>read_async</code> in one class instance (let's say class <code>A</code>), and to execute <code>write_async</code> in the other (let's say class <code>B</code>). Because of some functionality implementations, I should do it this way.  </p>\n\n<p>Any suggestion would be nice.  </p>\n\n<p><strong>UPDATED</strong>  </p>\n\n<p>it's not working properly as i expected.<br>\nThe VS2015(vc14 compiler) shows me a kind of exception while debugging:  </p>\n\n<p><code>Microsoft C++ exception: boost::exception_detail::clone_impl&lt;boost::exception_detail::error_info_injector&lt;boost::system::system_error&gt; &gt; at memory location 0x02D8E3BC.</code></p>\n\n<p>And after i hit <code>continue</code> in VS it show me that:  </p>\n\n<p><code>Run-Time Check Failure #0 - The value of ESP was not properly saved across a function call.  This is usually a result of calling a function declared with one calling convention with a function pointer declared with a different calling convention.</code></p>\n\n<p>As i said, i'm trying to <code>boost::move</code> (or <code>std::move</code>) the socket to other class instance. Here is a snippet of code of what i'm doing:  </p>\n\n<pre><code>boost::shared_ptr&lt;connection&gt; new_connection_;//it's a field in my class,\n//that's why i should reset it later\nnew_connection_.reset(new connection(std::move(socket_), io_service_));\nnew_connection_-&gt;start();\n</code></pre>\n\n<p>Now here is my <code>connection</code> ctor:  </p>\n\n<pre><code>    connection::connection(boost::asio::ip::tcp::socket sock, boost::asio::io_service&amp; io_ptr)\n    : socket_(boost::move(sock)),\n      io_ptr_(io_ptr),\n      remote_ep(socket_.remote_endpoint()),\n      //request_handler_(new request_handler(boost::move(socket_))),\n      work(new boost::asio::io_service::work(io_ptr))\n    {\n      boost::shared_ptr&lt;request_handler&gt; req_ptr(new request_handler(boost::move(socket_)));\n      request_handler_.swap(req_ptr);\n    }\n</code></pre>\n\n<p>As you can see, i've tried initializing in the commented line, but it shows me the same result.<br>\nHere is the ctor for <code>request_handler</code>: </p>\n\n<pre><code>    request_handler::request_handler(boost::asio::ip::tcp::socket sock):\n                                           socket_(boost::move(sock)){ }\n</code></pre>\n\n<p>And here is my method <code>connection::start</code> where the problem detects:  </p>\n\n<pre><code>void connection::start()\n{\n    boost::asio::ip::tcp::socket::keep_alive kl(true);\n    boost::asio::ip::tcp::socket::enable_connection_aborted eca(true);\n    // here it breaks, when trying to set an option\n    socket_.set_option(eca);\n    socket_.set_option(kl);\n\n    socket_.async_read_some(boost::asio::buffer(buffer_),\n        boost::bind(&amp;connection::handle_read, shared_from_this(),\n            boost::asio::placeholders::error,\n            boost::asio::placeholders::bytes_transferred));\n}\n</code></pre>\n\n<p>This problem appears only when i use to move <code>socket</code> into the new instance of <code>request_handler</code>. If i'm not - then all goes okey. I can't understand what reason it could be, but seems like my <code>socket_</code> (i declare it everywhere without any <code>&amp;</code> or <code>*</code>) field from <code>connection</code> class is lost or kind of. But the debugger isn't showing me smthing like null, so i don't know what is it.</p>\n"}, {"tags": ["c++", "windows", "software-distribution"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1464198595, "post_id": 37444314, "comment_id": 62390827, "body": "Recompile the executable to link to the 2013 redistributable. Probably much easier to download and install the 2008 redistibutable."}, {"owner": {"reputation": 99, "user_id": 1873594, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/649e57e5f86b90b5410c892d32cdcd9d?s=128&d=identicon&r=PG", "display_name": "dstew", "link": "https://stackoverflow.com/users/1873594/dstew"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1464198957, "post_id": 37444314, "comment_id": 62391058, "body": "is there any settings i need to change. the issue is we don&#39;t want to install the 2008 version because the rest of the software is on 2013. I opened the sln in vs 2013 and rebuilt it, but it still gives me the error."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1464199156, "post_id": 37444314, "comment_id": 62391181, "body": "Did you rebuild all of the dependent <code>.dlls</code> that the project uses?"}, {"owner": {"reputation": 99, "user_id": 1873594, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/649e57e5f86b90b5410c892d32cdcd9d?s=128&d=identicon&r=PG", "display_name": "dstew", "link": "https://stackoverflow.com/users/1873594/dstew"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1464199214, "post_id": 37444314, "comment_id": 62391219, "body": "@drescherjm i did not. Will try that now tho."}, {"owner": {"reputation": 99, "user_id": 1873594, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/649e57e5f86b90b5410c892d32cdcd9d?s=128&d=identicon&r=PG", "display_name": "dstew", "link": "https://stackoverflow.com/users/1873594/dstew"}, "edited": false, "score": 0, "creation_date": 1464200913, "post_id": 37444314, "comment_id": 62392146, "body": "Sorry guys this wasn&#39;t even my fault. Testers were using wrong files to test from. Rebuilding it in vs 2013 fixed this issue. Thanks guys!"}], "answers": [{"tags": [], "owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "is_accepted": true, "score": 0, "last_activity_date": 1464199700, "creation_date": 1464199700, "answer_id": 37444662, "question_id": 37444314, "link": "https://stackoverflow.com/questions/37444314/how-do-i-change-what-c-redistributable-my-solution-is-using/37444662#37444662", "title": "How do I change what c++ redistributable my solution is using?", "body": "<p>If you are blocked such that you cannot use VS2013 and rebuild the EXE in VS2013, you just need to find which exact VC++ runtime you'd need, and then download and install the same.</p>\n\n<p>For example <a href=\"http://www.microsoft.com/en-in/download/details.aspx?id=29\" rel=\"nofollow\">this download link</a> can be use to download <strong>32-bit</strong> version of VS2008, and probably just the <strong>RTM</strong> of VC2008. Your EXE might have been build on 64 bit, might have used particular service pack (or update, I don't know if there were any). </p>\n"}], "owner": {"reputation": 99, "user_id": 1873594, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/649e57e5f86b90b5410c892d32cdcd9d?s=128&d=identicon&r=PG", "display_name": "dstew", "link": "https://stackoverflow.com/users/1873594/dstew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 37444662, "answer_count": 1, "score": 0, "last_activity_date": 1464199700, "creation_date": 1464198417, "last_edit_date": 1464198459, "question_id": 37444314, "link": "https://stackoverflow.com/questions/37444314/how-do-i-change-what-c-redistributable-my-solution-is-using", "title": "How do I change what c++ redistributable my solution is using?", "body": "<p>I have a exe that keeps erroring because its looking for 2008 redistributable and it needs to be on 2013. How do i change this so it uses 2013 instead?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1464199096, "post_id": 37444245, "comment_id": 62391142, "body": "&quot;Can one executable be both a console and GUI application?&quot; - A console application can have a GUI component; yes."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1464199490, "post_id": 37444245, "comment_id": 62391377, "body": "@JesperJuhl: And a console application can open windows, but a console application and a GUI application are still different animals in Windows world!"}, {"owner": {"reputation": 5790, "user_id": 3258851, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/fUPld.jpg?s=128&g=1", "display_name": "Marc.2377", "link": "https://stackoverflow.com/users/3258851/marc-2377"}, "edited": false, "score": 0, "creation_date": 1464203028, "post_id": 37444245, "comment_id": 62393338, "body": "Welcome to Stack Overflow! Make sure you read the <a href=\"http://stackoverflow.com/help/how-to-ask\">How do I ask a good question</a> page. Specifically, we would be better able to help if you include some details, like: What console window are you referring to, and how is it created? Could you include any code relevant to your question? See also: <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1464203931, "post_id": 37444245, "comment_id": 62393812, "body": "@Serge Ballesta Sure. But the basic answer to the question &quot;Can one executable be both a console and GUI application?&quot; Is still &quot;Yes&quot;."}, {"owner": {"reputation": 71, "user_id": 6382525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c00c8e686c18bb1ea65f2b5ba9afa6da?s=128&d=identicon&r=PG&f=1", "display_name": "Farhat", "link": "https://stackoverflow.com/users/6382525/farhat"}, "edited": false, "score": 0, "creation_date": 1464256907, "post_id": 37444245, "comment_id": 62414858, "body": "The application I am trying to launch using CreateProcess() is from a different team. It is a GUI based WPF application &amp; I need to send some command line information to it which I have included in lpCommandLine. Now this application internally writes to the console when it receives any commandline parameter. Now when I call CreateProcess() the application is launched. If I close it, it relaunches itself. So I am not able to close and exit from that application. Is there a way CreateProcess can gracefully deal with such applications? Or I need to tell the application team to do something?"}, {"owner": {"reputation": 71, "user_id": 6382525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c00c8e686c18bb1ea65f2b5ba9afa6da?s=128&d=identicon&r=PG&f=1", "display_name": "Farhat", "link": "https://stackoverflow.com/users/6382525/farhat"}, "edited": false, "score": 0, "creation_date": 1464256941, "post_id": 37444245, "comment_id": 62414883, "body": "Hope I am able to explain the problem better."}], "owner": {"reputation": 71, "user_id": 6382525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c00c8e686c18bb1ea65f2b5ba9afa6da?s=128&d=identicon&r=PG&f=1", "display_name": "Farhat", "link": "https://stackoverflow.com/users/6382525/farhat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 205, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1464199910, "creation_date": 1464198215, "last_edit_date": 1495540367, "question_id": 37444245, "link": "https://stackoverflow.com/questions/37444245/createprocess-for-a-gui-application-that-also-writes-to-console", "title": "Createprocess() for a GUI application that also writes to console", "body": "<p>I am coding on a native app that uses <code>CreateProcess</code> to launch a GUI based WPF application. In the <code>lpCommandLine</code> parameter, I am also including the command line info along with the application name. Incidently the WPF application to launch also adds a newline to console window whenever any command line parameters are sent to it. Due to this, <code>CreateProcess()</code> is relaunching the application every time I close it. Any help how to solve this issue?</p>\n\n<p>I also searched several links like the one below but nothing really helps to solve my issue.\n<a href=\"https://stackoverflow.com/questions/493536/can-one-executable-be-both-a-console-and-gui-application\">Can one executable be both a console and GUI application?</a>`</p>\n"}, {"tags": ["c++", "qt", "class"], "comments": [{"owner": {"reputation": 6924, "user_id": 835629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b38fa6792bcb51a7fe773b5f942c66c2?s=128&d=identicon&r=PG", "display_name": "coyotte508", "link": "https://stackoverflow.com/users/835629/coyotte508"}, "edited": false, "score": 1, "creation_date": 1464197838, "post_id": 37444086, "comment_id": 62390417, "body": "Add a lot more debugging logs everywhere, or even run the program in a debugger."}, {"owner": {"reputation": 1132, "user_id": 6318750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SPLlL.jpg?s=128&g=1", "display_name": "someoneinthebox", "link": "https://stackoverflow.com/users/6318750/someoneinthebox"}, "edited": false, "score": 0, "creation_date": 1464198657, "post_id": 37444086, "comment_id": 62390865, "body": "Firstly, are you sure that reply is not empty before you get a json array?"}, {"owner": {"reputation": 586, "user_id": 6159217, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/cf02c33ce95856d3094552a5ce7f7fba?s=128&d=identicon&r=PG&f=1", "display_name": "IntegrateThis", "link": "https://stackoverflow.com/users/6159217/integratethis"}, "reply_to_user": {"reputation": 1132, "user_id": 6318750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SPLlL.jpg?s=128&g=1", "display_name": "someoneinthebox", "link": "https://stackoverflow.com/users/6318750/someoneinthebox"}, "edited": false, "score": 0, "creation_date": 1464198848, "post_id": 37444086, "comment_id": 62390987, "body": "@someoneinthebox When I print qDebug() &lt;&lt; this-&gt;m_CountriesList in the GetCountriesList() method I get the desired result, so yes I am sure it is not empty."}], "answers": [{"comments": [{"owner": {"reputation": 586, "user_id": 6159217, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/cf02c33ce95856d3094552a5ce7f7fba?s=128&d=identicon&r=PG&f=1", "display_name": "IntegrateThis", "link": "https://stackoverflow.com/users/6159217/integratethis"}, "edited": false, "score": 0, "creation_date": 1464199364, "post_id": 37444534, "comment_id": 62391305, "body": "Then how can I modify my code to reflect this. A timer perhaps?"}, {"owner": {"reputation": 1132, "user_id": 6318750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SPLlL.jpg?s=128&g=1", "display_name": "someoneinthebox", "link": "https://stackoverflow.com/users/6318750/someoneinthebox"}, "edited": false, "score": 0, "creation_date": 1464199545, "post_id": 37444534, "comment_id": 62391405, "body": "@coyotte508 but how about <code>qDebug() &lt;&lt; this-&gt;m_CountriesList;</code> in <code>GetCountriesList(QNetworkReply* reply)</code> slot?"}, {"owner": {"reputation": 6924, "user_id": 835629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b38fa6792bcb51a7fe773b5f942c66c2?s=128&d=identicon&r=PG", "display_name": "coyotte508", "link": "https://stackoverflow.com/users/835629/coyotte508"}, "reply_to_user": {"reputation": 586, "user_id": 6159217, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/cf02c33ce95856d3094552a5ce7f7fba?s=128&d=identicon&r=PG&f=1", "display_name": "IntegrateThis", "link": "https://stackoverflow.com/users/6159217/integratethis"}, "edited": false, "score": 0, "creation_date": 1464199643, "post_id": 37444534, "comment_id": 62391455, "body": "@JamesDIckens I edited and linked to an answer which suggests to emit a signal when data is ready. <a href=\"http://doc.qt.io/qt-5/qfuture.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qfuture.html</a> can also help you. Read more about asynchroneous tasks, threading and all. An easy solution is not there."}, {"owner": {"reputation": 6924, "user_id": 835629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b38fa6792bcb51a7fe773b5f942c66c2?s=128&d=identicon&r=PG", "display_name": "coyotte508", "link": "https://stackoverflow.com/users/835629/coyotte508"}, "reply_to_user": {"reputation": 1132, "user_id": 6318750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SPLlL.jpg?s=128&g=1", "display_name": "someoneinthebox", "link": "https://stackoverflow.com/users/6318750/someoneinthebox"}, "edited": false, "score": 0, "creation_date": 1464199696, "post_id": 37444534, "comment_id": 62391491, "body": "@someoneinthebox OP said it worked in the slot in a comment, which is normal as that code is executed after the reply was finished."}, {"owner": {"reputation": 6924, "user_id": 835629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b38fa6792bcb51a7fe773b5f942c66c2?s=128&d=identicon&r=PG", "display_name": "coyotte508", "link": "https://stackoverflow.com/users/835629/coyotte508"}, "reply_to_user": {"reputation": 586, "user_id": 6159217, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/cf02c33ce95856d3094552a5ce7f7fba?s=128&d=identicon&r=PG&f=1", "display_name": "IntegrateThis", "link": "https://stackoverflow.com/users/6159217/integratethis"}, "edited": false, "score": 0, "creation_date": 1464249345, "post_id": 37444534, "comment_id": 62409838, "body": "@JamesDickens added a code example for the use of lambda functions as a callback"}], "tags": [], "owner": {"reputation": 6924, "user_id": 835629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b38fa6792bcb51a7fe773b5f942c66c2?s=128&d=identicon&r=PG", "display_name": "coyotte508", "link": "https://stackoverflow.com/users/835629/coyotte508"}, "is_accepted": true, "score": 1, "last_activity_date": 1464249045, "last_edit_date": 1495539851, "creation_date": 1464199235, "answer_id": 37444534, "question_id": 37444086, "link": "https://stackoverflow.com/questions/37444086/updating-class-variable-qt-signals-and-slots/37444534#37444534", "title": "Updating class variable Qt signals and slots", "body": "<p>Your problem is that here:</p>\n\n<pre><code>connect(networkManager, SIGNAL(finished(QNetworkReply*)), this, SLOT(GetCountriesList(QNetworkReply*)));\n</code></pre>\n\n<p>The slot will be called <strong>later</strong>, when the network reply is finished and emits its signal. The <code>connect</code> operation is very fast and doesn't wait for the signal to execute, it just creates a connection.</p>\n\n<p>So when you do</p>\n\n<pre><code>qDebug()&lt;&lt; this-&gt;m_CountriesList;\n</code></pre>\n\n<p>just after the connect, the slot wasn't called <strong>yet</strong>.</p>\n\n<p>The data is simply unavailable at this moment, as the signal wasn't emitted yet and the code to store the countries wasn't executed yet.</p>\n\n<p>This answer: <a href=\"https://stackoverflow.com/a/27034939/835629\">https://stackoverflow.com/a/27034939/835629</a> shows you how to handle the situation. Anyway, you can't return the values in your <code>GetIndicatorsList</code> right away as that would block the execution of the program for a few seconds, the time to make the network request and get the answer.</p>\n\n<p>You can also give a function or object to call back when the data is ready. <a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow noreferrer\">Lambda functions</a> would probably help you with that.</p>\n\n<p>For example:</p>\n\n<pre><code>#include &lt;functional&gt;\n\nvoid MainWindow::GetIndicatorsList(std::function&lt;void(QStringList)&gt; callback)\n{\n    if (m_CountriesList.length() &gt; 0) {\n         callback(m_CountriesList);\n         return;\n    }\n    QNetworkAccessManager *networkManager;\n    networkManager = new QNetworkAccessManager(this);\n    QUrl url(\"http://api.worldbank.org/countries?per_page=264&amp;format=json\");\n    QNetworkReply* reply = networkManager-&gt;get(QNetworkRequest(url));\n    connect(networkManager, &amp;QNetworkAccessManager::finished, [this,callback](QNetworkReply *reply) { \n         if(reply-&gt;error() == QNetworkReply::NoError) {\n\n\n            QString strReply = (QString)reply-&gt;readAll();\n\n            QStringList CountriesList;\n            QJsonDocument jsonResponse = QJsonDocument::fromJson(strReply.toUtf8());\n            QJsonArray JsonArray = jsonResponse.array();\n            JsonArray.removeFirst();\n\n            QJsonArray JsonArray2 = JsonArray[0].toArray();\n\n            for (int i = 0; i &lt; JsonArray2.size(); i++) {\n                 CountriesList.append(JsonArray2.at(i).toObject().value(\"name\").toString());\n            }\n            //qDebug() &lt;&lt; CountriesList;\n\n            this-&gt;m_CountriesList = CountriesList;\n            qDebug() &lt;&lt; this-&gt;m_CountriesList;\n            callback(CountriesList);\n        }\n        else {\n            qDebug() &lt;&lt; \"ERROR\";\n        }\n    });\n}\n</code></pre>\n\n<p>And then you can call it like this:</p>\n\n<pre><code>mainWindow-&gt;GetIndicatorsList([](QStringList list) {\n     qDebug() &lt;&lt; \"Called back! \" &lt;&lt; list;\n});\n</code></pre>\n"}], "owner": {"reputation": 586, "user_id": 6159217, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/cf02c33ce95856d3094552a5ce7f7fba?s=128&d=identicon&r=PG&f=1", "display_name": "IntegrateThis", "link": "https://stackoverflow.com/users/6159217/integratethis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 37444534, "answer_count": 1, "score": 0, "last_activity_date": 1464249045, "creation_date": 1464197696, "question_id": 37444086, "link": "https://stackoverflow.com/questions/37444086/updating-class-variable-qt-signals-and-slots", "title": "Updating class variable Qt signals and slots", "body": "<p>I have the following code that populates a QStringList in Qt with c++. When I populate my list in the GetCountriesList slot and try to print the updated QStringList m_CountriesList the list is empty. How can I ensure that the GetCountriesList slot void method worked and print the correct values in the GetIndicatorsList() method.  </p>\n\n<pre><code>   void MainWindow::GetIndicatorsList()\n{\n    QNetworkAccessManager *networkManager;\n    networkManager = new QNetworkAccessManager(this);\n    QUrl url(\"http://api.worldbank.org/countries?per_page=264&amp;format=json\");\n    QNetworkReply* reply = networkManager-&gt;get(QNetworkRequest(url));\n    connect(networkManager, SIGNAL(finished(QNetworkReply*)), this, SLOT(GetCountriesList(QNetworkReply*)));\n    qDebug()&lt;&lt; this-&gt;m_CountriesList;\n\n}\n\nvoid MainWindow::GetCountriesList(QNetworkReply* reply)\n{\n    if(reply-&gt;error() == QNetworkReply::NoError) {\n\n\n        QString strReply = (QString)reply-&gt;readAll();\n\n        QStringList CountriesList;\n        QJsonDocument jsonResponse = QJsonDocument::fromJson(strReply.toUtf8());\n        QJsonArray JsonArray = jsonResponse.array();\n        JsonArray.removeFirst();\n\n        QJsonArray JsonArray2 = JsonArray[0].toArray();\n\n        for (int i = 0; i &lt; JsonArray2.size(); i++) {\n            CountriesList.append(JsonArray2.at(i).toObject().value(\"name\").toString());\n         }\n        //qDebug() &lt;&lt; CountriesList;\n\n        this-&gt;m_CountriesList = CountriesList;\n        qDebug() &lt;&lt; this-&gt;m_CountriesList;\n\n        }\n\n     else {\n        qDebug() &lt;&lt; \"ERROR\";\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "rapidjson"], "answers": [{"tags": [], "owner": {"reputation": 7948, "user_id": 4899330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857a19fa016a8fc6c0a3250f03f108a9?s=128&d=identicon&r=PG&f=1", "display_name": "doqtor", "link": "https://stackoverflow.com/users/4899330/doqtor"}, "is_accepted": false, "score": 2, "last_activity_date": 1464208517, "creation_date": 1464208517, "answer_id": 37447139, "question_id": 37443829, "link": "https://stackoverflow.com/questions/37443829/processing-arrays-of-arrays-of-integer-with-rapidjson/37447139#37447139", "title": "Processing arrays of arrays of integer with rapidjson", "body": "<p>You can parse arrays of arrays json this way:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;rapidjson/document.h&gt;\n\nusing namespace rapidjson;\n\nint main(void)\n{\n    std::vector&lt;std::vector&lt;int&gt;&gt; vec;\n    const char* json = \"{ \\\"data\\\":[[0,1],[2,3]] }\";\n\n    Document d;\n\n    d.Parse&lt;0&gt;(json);\n    Value&amp; data = d[\"data\"];\n    vec.resize(data.Size());\n\n    for (SizeType i = 0; i&lt;data.Size(); i++)\n    {\n        const rapidjson::Value &amp;data_vec = data[i];\n        for (SizeType j = 0; j &lt; data_vec.Size(); j++)\n            vec[i].push_back(data_vec[j].GetInt());\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 10131, "user_id": 1485926, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/t4pjt.jpg?s=128&g=1", "display_name": "fgalan", "link": "https://stackoverflow.com/users/1485926/fgalan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1390, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464208517, "creation_date": 1464196844, "last_edit_date": 1495540720, "question_id": 37443829, "link": "https://stackoverflow.com/questions/37443829/processing-arrays-of-arrays-of-integer-with-rapidjson", "title": "Processing arrays of arrays of integer with rapidjson", "body": "<p>Looking to <a href=\"http://rapidjson.org/md_doc_tutorial.html#QueryArray\" rel=\"nofollow noreferrer\">rapidjson documentation</a> this code is suggested to query an array:</p>\n\n<pre><code>for (Value::ConstValueIterator itr = a.Begin(); itr != a.End(); ++itr)\n    printf(\"%d \", itr-&gt;GetInt());\n</code></pre>\n\n<p>However, I have an array of arrays, something like:</p>\n\n<pre><code>[ [0,2], [1,2], [4, 5], ... ]\n</code></pre>\n\n<p>I would like to have some two-levels for for processing it, something like this:</p>\n\n<pre><code>for (Value::ConstValueIterator itr = a.Begin(); itr != a.End(); ++itr)\n    for (Value::ConstValueIterator itr2 = itr-&gt;GetArray().Begin(); itr2 != itr-&gt;GetArray().End(); ++itr2)\n        printf(\"%d \", itr2-&gt;GetInt());\n</code></pre>\n\n<p>However, it seems that <code>itr</code> doesn't have any <code>GetArray()</code> or equivalente method which returns an object in which get the second (inner) iterator.</p>\n\n<p><em>NOTE:</em> I have found this <a href=\"https://stackoverflow.com/questions/23170718/rapidjson-get-a-value-inside-an-array-of-another-array\">Q&amp;A post</a>, but it seems to be based in gettinig a <code>Value</code> representing the internal array. However, I don't know how to get such value from the <code>itr</code> iterator (e.g. <code>itr-&gt;value</code> doesn't work).</p>\n"}, {"tags": ["c++", "pointers", "delete-operator", "assignment-operator"], "comments": [{"owner": {"reputation": 7369, "user_id": 2436655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f13e1ea8bbf6506462623c85acb8e32?s=128&d=identicon&r=PG&f=1", "display_name": "pzaenger", "link": "https://stackoverflow.com/users/2436655/pzaenger"}, "edited": false, "score": 9, "creation_date": 1464196904, "post_id": 37443808, "comment_id": 62389902, "body": "<code>delete</code> is not C. Seems to be C++. Edit: @G&#252;rkan&#199;atak You should know the language (I guess) by attending a class/course."}, {"owner": {"reputation": 651, "user_id": 5118976, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18cf32e249676bf827ea65e5f44baad8?s=128&d=identicon&r=PG&f=1", "display_name": "G&#252;rkan &#199;atak", "link": "https://stackoverflow.com/users/5118976/g%c3%bcrkan-%c3%87atak"}, "reply_to_user": {"reputation": 7369, "user_id": 2436655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f13e1ea8bbf6506462623c85acb8e32?s=128&d=identicon&r=PG&f=1", "display_name": "pzaenger", "link": "https://stackoverflow.com/users/2436655/pzaenger"}, "edited": false, "score": 0, "creation_date": 1464196962, "post_id": 37443808, "comment_id": 62389935, "body": "It is not my own example or question. Her example."}, {"owner": {"reputation": 28330, "user_id": 298054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7dffcc86140441472cfb6119375a9d7?s=128&d=identicon&r=PG", "display_name": "jweyrich", "link": "https://stackoverflow.com/users/298054/jweyrich"}, "edited": false, "score": 0, "creation_date": 1464197058, "post_id": 37443808, "comment_id": 62389987, "body": "<code>a1=a2</code> means <code>Copy the address stored in a2 to a1</code>. The <code>k=a1[0]</code> has a problem because the code does <code>delete [] a2</code>, effectively freeing the memory allocated and hold by pointers <code>a2</code> and <code>a1</code> (remember it&#39;s the same memory address), and after the deletion, it tries to dereference (access) it via <code>a1</code>, which will likely cause a crash. A pointer that points to a region of memory that was free&#39;d is called a dangling pointer."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1464197478, "post_id": 37443808, "comment_id": 62390193, "body": "Don&#39;t you avoid compilation errors by putting <code>;</code> at the end of a statement?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1464197517, "post_id": 37443808, "comment_id": 62390222, "body": "&quot;<i>I couldn&#39;t understand what is a1 = a2 ? and why does error occur?</i>&quot; --&gt; &quot;<i><code>&#47;&#47;she said error occurs here.</code></i>&quot;: &quot;<i><code>k=a1[0]</code></i>&quot;, not there &quot;<i><code>a1=a2</code></i>&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 4, "last_activity_date": 1464196945, "creation_date": 1464196945, "answer_id": 37443857, "question_id": 37443808, "link": "https://stackoverflow.com/questions/37443808/why-this-code-snippet-said-to-contain-error/37443857#37443857", "title": "Why this code snippet said to contain error?", "body": "<p>After the line <code>a1=a2</code>, both <code>a1</code> and <code>a2</code> point to the same memory location.  </p>\n\n<p>Then when you run <code>delete a2[]</code>, the memory pointed to by <code>a2</code> is freed.  And since <code>a1</code> and <code>a2</code> point to the same memory location, <code>a1</code> is  also invalid.  </p>\n\n<p>Then when you dereference <code>a1</code>, which points to freed memory, you invoke <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefine behavior</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1464197722, "post_id": 37443863, "comment_id": 62390336, "body": "Even if was the original pointer that was freed, that would hold the address of the now defunct array. Putting the pointer into another variable is a <a href=\"https://en.wikipedia.org/wiki/Red_herring\" rel=\"nofollow noreferrer\">red herring</a>."}], "tags": [], "owner": {"reputation": 10381, "user_id": 3011009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVtZq.jpg?s=128&g=1", "display_name": "mcleod_ideafix", "link": "https://stackoverflow.com/users/3011009/mcleod-ideafix"}, "is_accepted": false, "score": 4, "last_activity_date": 1464197234, "last_edit_date": 1464197234, "creation_date": 1464196957, "answer_id": 37443863, "question_id": 37443808, "link": "https://stackoverflow.com/questions/37443808/why-this-code-snippet-said-to-contain-error/37443863#37443863", "title": "Why this code snippet said to contain error?", "body": "<p>It makes <code>a1</code> to have the same value as <code>a2</code>. As <code>a2</code> is a pointer to a dynamically allocated array, so it\u00b4s <code>a1</code>. The problem arises when you free the memory associated to that array. <code>a1</code> still holds the address of the now defunct array, and most probably, all operations that involve dereferencing <code>a1</code>, such as <code>k=a1[0]</code> will cause an illegal memory access.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 5, "last_activity_date": 1464197348, "last_edit_date": 1464197348, "creation_date": 1464196965, "answer_id": 37443865, "question_id": 37443808, "link": "https://stackoverflow.com/questions/37443808/why-this-code-snippet-said-to-contain-error/37443865#37443865", "title": "Why this code snippet said to contain error?", "body": "<blockquote>\n  <p><code>a1=a2 //What does this line mean???</code></p>\n</blockquote>\n\n<p><code>=</code> is the <a href=\"https://en.wikipedia.org/wiki/Assignment_(computer_science)\" rel=\"noreferrer\">assignment operator</a>. This actually assigns the value of the LHS operand to the RHS operand.</p>\n\n<p>Here, this line means, assign the value of <code>a2</code> to <code>a1</code>, i.e, this assigns the <code>a2</code> pointer to <code>a1</code>. That is, <code>a1</code> and <code>a2</code> points to the same memory location.</p>\n\n<p>Now, once you call <code>delete[]</code> with <code>a1</code>, it actually frees the memory. Then, accssing either <code>a1[i]</code> or <code>a2[i]</code> is same, accessing already free-d memory which invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"noreferrer\">undefined behavior</a>.</p>\n\n<p>To help understand, consider the analogy of a glass of juice with two straws into it. Once you have drank the juice via either of the straw, you cannot get anymore juice via the other one.</p>\n"}], "owner": {"reputation": 651, "user_id": 5118976, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18cf32e249676bf827ea65e5f44baad8?s=128&d=identicon&r=PG&f=1", "display_name": "G&#252;rkan &#199;atak", "link": "https://stackoverflow.com/users/5118976/g%c3%bcrkan-%c3%87atak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 37443865, "answer_count": 3, "score": -9, "last_activity_date": 1464197810, "creation_date": 1464196780, "last_edit_date": 1464197810, "question_id": 37443808, "link": "https://stackoverflow.com/questions/37443808/why-this-code-snippet-said-to-contain-error", "title": "Why this code snippet said to contain error?", "body": "<p>I know normally, * and &amp; signs. But our teacher gives us an example and she said \"Problem occurs here\"</p>\n\n<pre><code>int *a1;\nint *a2 = new int[100];\na1=a2 //What does this line mean???\ndelete []a2;\n\nk=a1[0]//she said error occurs here.\n</code></pre>\n\n<p>I couldn't understand what is a1 = a2 ?\nand why does error occur?</p>\n"}, {"tags": ["c++", "opengl", "background", "3d", "sdl"], "comments": [{"owner": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "edited": false, "score": 2, "creation_date": 1464197759, "post_id": 37443791, "comment_id": 62390362, "body": "After the first glColor3f(0.0f, 1.0f, 0.0f); , all vertices will be set to draw in that color until another glColor3f is issued. Are you saying that if you un-comment out the other glColor3f&#39;s that those vertices are not drawing in the color set above it?"}, {"owner": {"reputation": 21, "user_id": 6261397, "user_type": "registered", "profile_image": "https://graph.facebook.com/1620029778320992/picture?type=large", "display_name": "Patryk Drewicz", "link": "https://stackoverflow.com/users/6261397/patryk-drewicz"}, "reply_to_user": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "edited": false, "score": 0, "creation_date": 1464198508, "post_id": 37443791, "comment_id": 62390778, "body": "Thanks for this knowledge, I didn&#39;t know! When i un-comment out the other glColor3f&#39;s then the background texture colour is probably mix of all of the glColor3f&#39;s and it is my problem."}, {"owner": {"reputation": 21, "user_id": 6261397, "user_type": "registered", "profile_image": "https://graph.facebook.com/1620029778320992/picture?type=large", "display_name": "Patryk Drewicz", "link": "https://stackoverflow.com/users/6261397/patryk-drewicz"}, "reply_to_user": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "edited": false, "score": 0, "creation_date": 1464199330, "post_id": 37443791, "comment_id": 62391278, "body": "I uploaded screenshot maybe it will make my problem clearer for You"}, {"owner": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "edited": false, "score": 0, "creation_date": 1464200655, "post_id": 37443791, "comment_id": 62392009, "body": "<i>What I notice</i> You don&#39;t have a glPushMatrix in the RysujTlo function but are calling glPopMatrix at the end of it. <i>I&#39;ll play with the code more when I have time</i>"}, {"owner": {"reputation": 21, "user_id": 6261397, "user_type": "registered", "profile_image": "https://graph.facebook.com/1620029778320992/picture?type=large", "display_name": "Patryk Drewicz", "link": "https://stackoverflow.com/users/6261397/patryk-drewicz"}, "reply_to_user": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "edited": false, "score": 0, "creation_date": 1464200996, "post_id": 37443791, "comment_id": 62392196, "body": "Im trying a lot of different things and i pasted code in testing time, sorry. It does&#39;t help"}], "owner": {"reputation": 21, "user_id": 6261397, "user_type": "registered", "profile_image": "https://graph.facebook.com/1620029778320992/picture?type=large", "display_name": "Patryk Drewicz", "link": "https://stackoverflow.com/users/6261397/patryk-drewicz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1464199664, "creation_date": 1464196730, "last_edit_date": 1464199664, "question_id": 37443791, "link": "https://stackoverflow.com/questions/37443791/opengl-sdl2-incorrect-rendering-background-textures-and-3d-cubes-color", "title": "Opengl sdl2 incorrect rendering background texture&#39;s and 3d cube&#39;s color", "body": "<p>I can load and render texture but there is a problem when I try to draw not only a texture but also a cube.\nWhen I don't set cube's one (or more) side's color then it is white and background is fine.\nWhen I set cube's one(or more) side's color by typing:</p>\n\n<pre><code>glColor3f(0.0f, 1.0f, 0.0f); \n</code></pre>\n\n<p>everything what is rendered changes it's color to this one.\nI was looking for a mistake but I just couldn't find it.</p>\n\n<p>main.cpp</p>\n\n<pre><code> /*This source code copyrighted by Lazy Foo' Productions (2004-2015)\nand may not be redistributed without written permission.*/\n\n//Using SDL, SDL OpenGL, standard IO, and, strings\n#include &lt;SDL.h&gt;\n#include &lt;SDL_opengl.h&gt;\n#include &lt;SDL_image.h&gt;\n#include &lt;GL\\GLU.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string&gt;\n#include \"TesterClass_Cubic.h\"\n\n//Screen dimension constants\nconst int SCREEN_WIDTH = 1366;\nconst int SCREEN_HEIGHT = 768;\n\n//Starts up SDL, creates window, and initializes OpenGL\nbool init();\n\n//Initializes matrices and clear color\nbool initGL();\n\n//Input handler\nvoid handleKeys(unsigned char key, int x, int y);\n\n//Per frame update\nvoid update();\n\n//Renders quad to the screen\nvoid render();\n\n//Frees media and shuts down SDL\nvoid close();\n\n//The window we'll be rendering to\nSDL_Window* gWindow = NULL;\n\n//OpenGL context\nSDL_GLContext gContext;\n\n//Render flag\nbool gRenderQuad = true;\n\n\nGLuint tlo;\nTesterClass_Cubic kostka(0.5, 0.0, 0.0, 0.0);\nTesterClass_Cubic kostka_2(0.5, 0, 0, 0);\n\n//BY\u0106 OSTRO\u017bNYM Z U\u017bYCIEM, PONIEWA\u017b ZAWSZE MUSI MIE\u0106 AKTUALN\u0104 WARTO\u015a\u0106\n//w innym wypadku funkcja resize mo\u017ce by\u0107 wywo\u0142ana dla nieakutalnych wymiar\u00f3w okna\n//zawsze jest updatowana w przypadku: zmiany rozmiaru okna(w funkcji resize)\nint current_window_width = SCREEN_WIDTH;\nint current_window_height = SCREEN_HEIGHT;\n\nbool perspective_checker = true; // s\u0142u\u017cy do prze\u0142\u0105czania perspektywy(pozycji kamery, funkcji gllookat), true-widok startowy zza bohatera, false- widok z gory\n\nbool init()\n{\n    //Initialization flag\n    bool success = true;\n\n    //Initialize SDL\n    if (SDL_Init(SDL_INIT_VIDEO) &lt; 0)\n    {\n        printf(\"SDL could not initialize! SDL Error: %s\\n\", SDL_GetError());\n        success = false;\n    }\n    else\n    {\n        //Use OpenGL 2.1\n        SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 2);\n        SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 1);\n\n        //Create window\n        gWindow = SDL_CreateWindow(\"SDL Tutorial\", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, SCREEN_WIDTH, SCREEN_HEIGHT, SDL_WINDOW_OPENGL | SDL_WINDOW_SHOWN);\n        if (gWindow == NULL)\n        {\n            printf(\"Window could not be created! SDL Error: %s\\n\", SDL_GetError());\n            success = false;\n        }\n        else\n        {\n            //Create context\n            gContext = SDL_GL_CreateContext(gWindow);\n            if (gContext == NULL)\n            {\n                printf(\"OpenGL context could not be created! SDL Error: %s\\n\", SDL_GetError());\n                success = false;\n            }\n            else\n            {\n                //Use Vsync\n                if (SDL_GL_SetSwapInterval(1) &lt; 0)\n                {\n                    printf(\"Warning: Unable to set VSync! SDL Error: %s\\n\", SDL_GetError());\n                }\n\n                //Initialize OpenGL\n                if (!initGL())\n                {\n                    printf(\"Unable to initialize OpenGL!\\n\");\n                    success = false;\n                }\n            }\n        }\n    }\n\n    return success;\n}\nGLuint LoadTexture(char *filename)\n{\n\n    SDL_Surface *surface;\n    GLuint textureid;\n    int mode;\n\n    surface = SDL_LoadBMP(filename);\n\n    // Or if you don't use SDL_image you can use SDL_LoadBMP here instead:\n    // surface = SDL_LoadBMP(filename);\n\n    // could not load filename\n    if (!surface)\n    {\n\n        return 0;\n\n    }\n\n    // create one texture name\n    glGenTextures(1, &amp;textureid);\n\n    // tell opengl to use the generated texture name\n    glBindTexture(GL_TEXTURE_2D, textureid);\n\n    // this reads from the sdl surface and puts it into an opengl texture\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, surface-&gt;w, surface-&gt;h, 0, GL_BGR, GL_UNSIGNED_BYTE, surface-&gt;pixels);\n\n    // these affect how this texture is drawn later on...\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n\n    // clean up\n    SDL_FreeSurface(surface);\n    //surface-&gt;w=dlugosc obrazka\n    return textureid;\n\n}\n\n\nvoid resize(int width, int height)\n{\n\n    const float ar = (float)width / (float)height; //The width-to-height ratio\n                                                   //Tell OpenGL how to convert from coordinates to pixel values\n    glViewport(0, 0, width, height); //specifies the part of the window to which OpenGL will draw(in pixels), convert from normalised to pixels\n    glMatrixMode(GL_PROJECTION); //Switch to setting the camera perspective\n                                 //Set the camera perspective\n    glLoadIdentity();//Reset the camera\n    glFrustum(-ar, ar, -1.0, 1.0, 2.0, 100.0);\n    if (perspective_checker)\n    {\n        gluLookAt(0, 2, 5, 0, 0, 0, 0, 1, 0);//widok standardowy-pocz\u0105tkowy\n    }\n    else\n    {\n        gluLookAt(1.5, 4.7, 1.5, 1.5, 0, 1.5, 0, 0, -1);//widok \"z g\u00f3ry\"\n    }\n    glMatrixMode(GL_MODELVIEW);\n    glLoadIdentity();\n    SDL_GetWindowSize(gWindow, &amp;current_window_width, &amp;current_window_height);\n\n}\n\nvoid handleKeys(SDL_Event &amp;event)\n{\n    switch (event.key.keysym.sym)//get what key was pressed\n    {\n\n    case SDLK_d:\n        if (perspective_checker)\n        {\n            //kostka.move(0.1, 0, 0);\n            //obj.move(0.1, 0, 0);\n        }\n        break;\n    case SDLK_a:\n        if (perspective_checker)\n        {\n            //kostka.move(-0.1, 0, 0);\n            //obj.move(-0.1, 0, 0);\n        }\n        break;\n    case SDLK_q:\n        perspective_checker = !perspective_checker;\n        resize(current_window_width, current_window_height);\n        break;\n    }\n}\n\nvoid RysujTlo()\n{\n\n    // tell opengl to use the generated texture name\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n    glBindTexture(GL_TEXTURE_2D, tlo);\n    glEnable(GL_TEXTURE_2D);\n    //Render quad\n    glBegin(GL_QUADS);\n    glTexCoord2f(0.0, 0.0);\n    glVertex3f(-4.5, 2.65, 0.0);\n    glTexCoord2f(0.0, 1.0);\n    glVertex3f(-6.0, -3.65, 0.0);\n    glTexCoord2f(1.0, 1.0);\n    glVertex3f(9.5, -3.65, 0.0);\n    glTexCoord2f(1.0, 0.0);\n    glVertex3f(4.5, 2.65, 0.0);\n    glEnd();\n    glPopMatrix();\n    glDisable(GL_TEXTURE_2D);\n}\n\nbool initGL()\n{\n\n    bool success = true;\n    GLenum error = GL_NO_ERROR;\n\n    //Initialize Projection Matrix\n    const float ar = (float)SCREEN_WIDTH / (float)SCREEN_HEIGHT; //The width-to-height ratio\n                                                                 //Tell OpenGL how to convert from coordinates to pixel values\n    glViewport(0, 0, SCREEN_WIDTH, SCREEN_HEIGHT); //specifies the part of the window to which OpenGL will draw(in pixels), convert from normalised to pixels\n    glMatrixMode(GL_PROJECTION); //Switch to setting the camera perspective\n                                 //Set the camera perspective\n    glLoadIdentity();//Reset the camera\n    glFrustum(-ar, ar, -1.0, 1.0, 2.0, 100.0);\n\n    gluLookAt(0, 2, 5, 0, 0, 0, 0, 1, 0); //pierwsze 3 wpsolrzedne to polozenie kamery,nastepne 3 to punkt na jaki patrzy kamera, nastepne 3 to kierunek gory kamery\n                                          //wektor [0,0,-1] o pocz\u0105tku w punkcie (0,2,5), skierowany do tablicy,do monitora(dok\u0142adnie na punkt (0,0,0))\n                                          //gluLookAt(1.5, 4.7, 1.5, 1.5, 0, 1.5, 0, 0, -1); save best1\n                                          //gluLookAt(0, 3, 1.5, 0, 0, 1.5, 0, 0, -1);  save best2\n\n                                          // /* Enable Z depth testing so objects closest to the viewpoint are in front of objects further away */\n                                          //enable depth - test to remove the hidden surface, and set the function used for the depth test.\n\n    glEnable(GL_COLOR_MATERIAL);\n    glShadeModel(GL_SMOOTH);\n\n    //setLight();\n    glEnable(GL_DEPTH_TEST);\n    glDepthFunc(GL_LESS);\n\n    //glHint\n    //glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST);\n    /*In graphics rendering, there is often a trade - off between processing speed and visual quality.We can use glHint() to decide on the trade - off.\n    In this case, we ask for the best perspective correction, which may involve more processing.The default is GL_DONT_CARE.*/\n\n    //Check for error\n    error = glGetError();\n    if (error != GL_NO_ERROR)\n    {\n        printf(\"Error initializing OpenGL! %s\\n\", gluErrorString(error));\n        success = false;\n    }\n\n    //Initialize Modelview Matrix\n    glMatrixMode(GL_MODELVIEW);\n    glLoadIdentity();\n\n    //Check for error\n    error = glGetError();\n    if (error != GL_NO_ERROR)\n    {\n        printf(\"Error initializing OpenGL! %s\\n\", gluErrorString(error));\n        success = false;\n    }\n\n    //Initialize clear color\n    glClearColor(0.f, 0.f, 0.f, 0.f);\n    //Check for error\n    error = glGetError();\n    if (error != GL_NO_ERROR)\n    {\n        printf(\"Error initializing OpenGL! %s\\n\", gluErrorString(error));\n        success = false;\n    }\n    return success;\n}\n\nvoid handleKeys(unsigned char key, int x, int y)\n{\n    //Toggle quad\n    if (key == 'q')\n    {\n        gRenderQuad = !gRenderQuad;\n    }\n\n}\n\nvoid update()\n{\n    //No per frame update needed\n}\n\nvoid render()\n{\n    //Clear color buffer\n\n    //kostka.drawCube();\n        //kostka_2.drawCube();\n\n\n}\n\n\nvoid setObjectPosition()\n{\n    tlo = LoadTexture(\"background_front.bmp\");\n    //kostka.setPosition(0, 0.3, 3.0);\n    //kostka_2.setPosition(3.2, 1.9, 0.5);\n\n}\n\nvoid close()\n{\n    //Destroy window    \n    SDL_DestroyWindow(gWindow);\n    gWindow = NULL;\n\n    //Quit SDL subsystems\n    SDL_Quit();\n}\n\nint main(int argc, char* args[])\n{\n    //Start up SDL and create window\n    if (!init())\n    {\n        printf(\"Failed to initialize!\\n\");\n    }\n    else\n    {\n        //Main loop flag\n        bool quit = false;\n\n        //Event handler\n        SDL_Event e;\n        setObjectPosition();\n        //Enable text input\n        SDL_StartTextInput();\n\n        //While application is running\n        while (!quit)\n        {\n            //Handle events on queue\n            while (SDL_PollEvent(&amp;e) != 0)\n            {\n                //User requests quit\n                if (e.type == SDL_QUIT)\n                {\n                    quit = true;\n                }\n\n                //Handle keypress with current mouse position\n                else if (e.type == SDL_TEXTINPUT)\n                {\n                    int x = 0, y = 0;\n                    SDL_GetMouseState(&amp;x, &amp;y);\n                    handleKeys(e.text.text[0], x, y);\n                }\n                else if (e.type == SDL_KEYDOWN)\n                {\n                    //Select surfaces based on key press \n                    handleKeys(e);\n                    switch (e.key.keysym.sym)\n                    {\n                    case SDLK_ESCAPE:\n                        quit = true;\n                        break;\n                    }\n                }\n            }\n\n            //Render quad\n            RysujTlo();\n            kostka.drawCube();\n            //render();\n            //Update screen\n            SDL_GL_SwapWindow(gWindow);\n        }\n\n        //Disable text input\n        SDL_StopTextInput();\n    }\n\n    //Free resources and close SDL\n    close();\n\n    return 0;\n}\n</code></pre>\n\n<p>TesterClass_Cubic.cpp</p>\n\n<pre><code>#include \"TesterClass_Cubic.h\"\n#include &lt;SDL_opengl.h&gt;\n\n\n\nTesterClass_Cubic::TesterClass_Cubic()\n{\n}\n\n\nTesterClass_Cubic::~TesterClass_Cubic()\n{\n}\n\nTesterClass_Cubic::TesterClass_Cubic(double height, double red, double green, double blue) : m_height(height), m_r(red), m_g(green), m_b(blue)\n{\n    m_x = 0.0;\n    m_y = 0.0;\n    m_z = 0.0;\n    m_angle = 0.0;\n    m_hide = true;\n}\n\nvoid TesterClass_Cubic::motion()\n{\n    m_angle += 0.5;\n    if (m_angle &gt; 360)\n        m_angle -= 360;\n}\nvoid TesterClass_Cubic::move(double dx, double dy, double dz)\n{\n    m_x += dx;\n    m_y += dy;\n    m_z += dz;\n}\n\nvoid TesterClass_Cubic::setPosition(double x, double y, double z)\n{\n    m_x = x;\n    m_y = y;\n    m_z = z;\n}\n\nvoid TesterClass_Cubic::drawCube()\n{\n    if (m_hide)\n    {\n        glPushMatrix();\n            // angle, x-axis, y-axis, z-axis\n                                                 // Render a color-cube consisting of 6 quads with different colors\n                        // Reset the model-view matrix\n            glTranslated(m_x, m_y, m_z);\n            glRotated(m_angle, 1.0, 1.0, 1.0);    // Move right and into the screen\n\n            glBegin(GL_QUADS);                // Begin drawing the color cube with 6 quads\n                                              // Top face (y = 1.0f)\n                                              // Define vertices in counter-clockwise (CCW) order with normal pointing out\n            glColor3f(0.0f, 1.0f, 0.0f);     // Green\n            glVertex3f(1.0f, 1.0f, -1.0f);\n            glVertex3f(-1.0f, 1.0f, -1.0f);\n            glVertex3f(-1.0f, 1.0f, 1.0f);\n            glVertex3f(1.0f, 1.0f, 1.0f);\n\n            // Bottom face (y = -1.0f)\n            //glColor3f(1.0f, 0.5f, 0.0f);     // Orange\n            glVertex3f(1.0f, -1.0f, 1.0f);\n            glVertex3f(-1.0f, -1.0f, 1.0f);\n            glVertex3f(-1.0f, -1.0f, -1.0f);\n            glVertex3f(1.0f, -1.0f, -1.0f);\n\n            // Front face  (z = 1.0f)\n            //glColor3f(1.0f, 0.0f, 0.0f);     // Red\n            glVertex3f(1.0f, 1.0f, 1.0f);\n            glVertex3f(-1.0f, 1.0f, 1.0f);\n            glVertex3f(-1.0f, -1.0f, 1.0f);\n            glVertex3f(1.0f, -1.0f, 1.0f);\n\n            // Back face (z = -1.0f)\n            //glColor3f(1.0f, 1.0f, 0.0f);     // Yellow\n            glVertex3f(1.0f, -1.0f, -1.0f);\n            glVertex3f(-1.0f, -1.0f, -1.0f);\n            glVertex3f(-1.0f, 1.0f, -1.0f);\n            glVertex3f(1.0f, 1.0f, -1.0f);\n\n            // Left face (x = -1.0f)\n            //glColor3f(0.0f, 0.0f, 1.0f);     // Blue\n            glVertex3f(-1.0f, 1.0f, 1.0f);\n            glVertex3f(-1.0f, 1.0f, -1.0f);\n            glVertex3f(-1.0f, -1.0f, -1.0f);\n            glVertex3f(-1.0f, -1.0f, 1.0f);\n\n            // Right face (x = 1.0f)\n            //glColor3f(1.0f, 0.0f, 1.0f);     // Magenta\n            glVertex3f(1.0f, 1.0f, -1.0f);\n            glVertex3f(1.0f, 1.0f, 1.0f);\n            glVertex3f(1.0f, -1.0f, 1.0f);\n            glVertex3f(1.0f, -1.0f, -1.0f);\n            glEnd();  // End of drawing color-cube\n        glPopMatrix();\n    }\n}\n</code></pre>\n\n<p>TesterClass_Cubic.h</p>\n\n<pre><code>#pragma once\nclass TesterClass_Cubic\n{\n\nprivate:\n    double m_width;\n    double m_height;\n    double m_x;\n    double m_y;\n    double m_z;\n    double m_angle;\n    double m_r;\n    double m_g;\n    double m_b;\n    bool m_hide;\n\npublic:\n    TesterClass_Cubic();\n    ~TesterClass_Cubic();\n    TesterClass_Cubic(double height, double red, double green, double blue);\n    void drawCube();\n    void setPosition(double x, double y, double z);\n    void move(double dx, double dy, double dz);\n    void motion();\n\n};\n</code></pre>\n\n<p>Im sorry for pasting the full code but Im not experienced user and not sure what do You need to help me.\nWhat should I change in my code?\n<a href=\"http://i.stack.imgur.com/8azQx.png\" rel=\"nofollow\">Here is what do i see</a></p>\n\n<p><a href=\"http://i.stack.imgur.com/HEpnV.png\" rel=\"nofollow\">And here,how should the background look:</a></p>\n"}, {"tags": ["c++", "class-members"], "comments": [{"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1464197067, "post_id": 37443779, "comment_id": 62389994, "body": "so you want to apply the same operation to a set of variables which may change? Are they all the same type?"}, {"owner": {"reputation": 1485, "user_id": 2229960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/62652e679c426edd1a718d4dd9de6d66?s=128&d=identicon&r=PG", "display_name": "Eissa N.", "link": "https://stackoverflow.com/users/2229960/eissa-n"}, "edited": false, "score": 2, "creation_date": 1464197284, "post_id": 37443779, "comment_id": 62390110, "body": "This is a vague description. Even a pseudo-code can clarify what you want to accomplish."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 4, "creation_date": 1464197462, "post_id": 37443779, "comment_id": 62390184, "body": "If I understand you correctly then no. C++ doesn&#39;t have support for that kind of reflection. If you provide an example, someone might have an elegant solution vor your particular case."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1464200084, "post_id": 37443779, "comment_id": 62391685, "body": "were you thinking something along <a href=\"http://coliru.stacked-crooked.com/a/853f9f56d8946667\" rel=\"nofollow noreferrer\">these lines</a>, OP? This would allow you to loop over every element in a specified list. Unless you&#39;re willing to use <code>boost::any</code> you&#39;ll have to stick with references to a single type though."}, {"owner": {"reputation": 3, "user_id": 6382451, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pRINRca6UXs/AAAAAAAAAAI/AAAAAAAAA70/x4oGGLJC9vQ/photo.jpg?sz=128", "display_name": "Anand Ramesh", "link": "https://stackoverflow.com/users/6382451/anand-ramesh"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1464200683, "post_id": 37443779, "comment_id": 62392024, "body": "@jaggedSpire, no the idea is to reduce the amount of change to the source code... The class object is not yet created and the class has a bunch of data members. Now while defining an operator= overload, if you would add more data member, you would have to manually go the method and change the source code.. so I&#39;m thinking of a way to avoid by allowing access to these members within the a method to iterate over them and not change what the members originally are"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1464200942, "post_id": 37443779, "comment_id": 62392166, "body": "@AnandRamesh ...not the way I just posted. With the way I posted, you maintain a single list of members, and just change that when you add or remove members of your class. At any rate from your comments on \u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6&#39;s answer you need to deal with different types, so Horstling&#39;s answer is most likely applicable to you, since it lets you specify every element you want to alter in a single location."}], "answers": [{"comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1464199027, "post_id": 37444227, "comment_id": 62391097, "body": "I didn&#39;t know about <code>std::any</code> so thats awesome, this is likely a user XY problem though."}, {"owner": {"reputation": 3, "user_id": 6382451, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pRINRca6UXs/AAAAAAAAAAI/AAAAAAAAA70/x4oGGLJC9vQ/photo.jpg?sz=128", "display_name": "Anand Ramesh", "link": "https://stackoverflow.com/users/6382451/anand-ramesh"}, "edited": false, "score": 0, "creation_date": 1464200882, "post_id": 37444227, "comment_id": 62392134, "body": "Ya I thought of something similar. The essential problem is that class members can be of different types. That&#39;s what made a construct like &quot;struct&quot; useful during early days of programming. Need a solution for which is generic enough to suit all data members without a need to modify or place them a container."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1464199302, "last_edit_date": 1464199302, "creation_date": 1464198154, "answer_id": 37444227, "question_id": 37443779, "link": "https://stackoverflow.com/questions/37443779/accessing-class-members-in-c/37444227#37444227", "title": "Accessing class members in c++", "body": "<blockquote>\n  <p>I'm thinking of a possibility of running through all the members of a class in a kind of loop construct.</p>\n</blockquote>\n\n<p>No, such isn't possible in general, since <em>standard C++</em> doesn't have any runtime reflection mechanism, that allows you to access class members by symbolic information.</p>\n\n<hr>\n\n<p>What you can do of course is something to keep your <em>class member variable</em> values in a kind of <code>std::map&lt;std::string,T&gt;</code> dictionary, and access these with symbolic keys (replacing the actual class member variables of course).  </p>\n\n<p>But that would require the value type to be</p>\n\n<ul>\n<li>all of the same type</li>\n<li>something like <a href=\"http://en.cppreference.com/w/cpp/experimental/any\" rel=\"nofollow\"><code>std::experimental::any</code></a> </li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1464201266, "post_id": 37444918, "comment_id": 62392354, "body": "Don&#39;t be shy to post more code in your question. That would be easier to read fro future research. Have the live sample links for improvement."}, {"owner": {"reputation": 3, "user_id": 6382451, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pRINRca6UXs/AAAAAAAAAAI/AAAAAAAAA70/x4oGGLJC9vQ/photo.jpg?sz=128", "display_name": "Anand Ramesh", "link": "https://stackoverflow.com/users/6382451/anand-ramesh"}, "edited": false, "score": 0, "creation_date": 1464201689, "post_id": 37444918, "comment_id": 62392592, "body": "Gets me very close to what I&#39;m looking for.. Thanks!"}], "tags": [], "owner": {"reputation": 1971, "user_id": 3989746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb23a8e29f27be455bd2f8a855388dc0?s=128&d=identicon&r=PG&f=1", "display_name": "Horstling", "link": "https://stackoverflow.com/users/3989746/horstling"}, "is_accepted": true, "score": 2, "last_activity_date": 1464202738, "last_edit_date": 1464202738, "creation_date": 1464200588, "answer_id": 37444918, "question_id": 37443779, "link": "https://stackoverflow.com/questions/37443779/accessing-class-members-in-c/37444918#37444918", "title": "Accessing class members in c++", "body": "<p>As there is no built-in reflection in C++ (yet), you have to list all your members somewhere. One way to save you from doing this over and over again is to define a <code>for_each_member</code> method which passes every member to some functor:</p>\n\n<pre><code>template &lt;class F&gt;\nvoid for_each_member(F f);\n</code></pre>\n\n<p>Now you can easily apply arbitrary operations to all your members, and you only have to maintain one listing of members per class.</p>\n\n<p>Running example: <a href=\"http://coliru.stacked-crooked.com/a/c813fc73c5519ee0\" rel=\"nofollow\">http://coliru.stacked-crooked.com/a/c813fc73c5519ee0</a></p>\n\n<p>If you want to perform different actions for different subsets of member, you have to find a way to separate these apart. You could do this by type (as shown in the example) or you could additionally pass some kind of identifier to your functor in <code>for_each_member</code>.</p>\n\n<p>Here I use a macro to pass both the member and its name to the functor: <a href=\"http://coliru.stacked-crooked.com/a/5a59c027e25c33fb\" rel=\"nofollow\">http://coliru.stacked-crooked.com/a/5a59c027e25c33fb</a></p>\n"}], "owner": {"reputation": 3, "user_id": 6382451, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pRINRca6UXs/AAAAAAAAAAI/AAAAAAAAA70/x4oGGLJC9vQ/photo.jpg?sz=128", "display_name": "Anand Ramesh", "link": "https://stackoverflow.com/users/6382451/anand-ramesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "closed_date": 1464792602, "accepted_answer_id": 37444918, "answer_count": 2, "score": 0, "last_activity_date": 1464202738, "creation_date": 1464196695, "question_id": 37443779, "link": "https://stackoverflow.com/questions/37443779/accessing-class-members-in-c", "closed_reason": "Needs more focus", "title": "Accessing class members in c++", "body": "<p>I got back coding in C++ after a long while and was wondering if there is a way to access data member of a class quickly for manipulation.</p>\n\n<p>Assume a case where you have like 10 data members in a class which overloads a bunch of operators (thought of this while overloading operator=). Now you would want to add/subtract a few data members to the class.\nIs there a generic way to accomplish this without having to go to individual functions and change them? I'm thinking of a possibility of running through all the members of a class in a kind of loop construct.</p>\n"}, {"tags": ["c++", "visual-studio-2010", "rotation", "eigen"], "answers": [{"tags": [], "owner": {"reputation": 93, "user_id": 1165197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8286e419f4e0406229e3f355a3f882f3?s=128&d=identicon&r=PG", "display_name": "CaribeGirl", "link": "https://stackoverflow.com/users/1165197/caribegirl"}, "is_accepted": false, "score": 2, "last_activity_date": 1464203653, "creation_date": 1464203653, "answer_id": 37445779, "question_id": 37443689, "link": "https://stackoverflow.com/questions/37443689/eigen-rotation2d-applied-to-a-2-vector/37445779#37445779", "title": "Eigen Rotation2D applied to a 2-vector", "body": "<p>First check the version of Eigen, looks like there is a problem with the overload of the operator* for versions 3.2.3 and less. Please see <a href=\"https://forum.kde.org/viewtopic.php?f=74&amp;t=124235&amp;p=326983&amp;hilit=Rotation2D#p326983\" rel=\"nofollow\">https://forum.kde.org/viewtopic.php?f=74&amp;t=124235&amp;p=326983&amp;hilit=Rotation2D#p326983</a>\nBut after I downloaded the latest version and re-run my code using</p>\n\n<pre><code>Vector2f rotatedVect = t.toRotationMatrix()*v;\n</code></pre>\n\n<p>It worked!</p>\n"}], "owner": {"reputation": 93, "user_id": 1165197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8286e419f4e0406229e3f355a3f882f3?s=128&d=identicon&r=PG", "display_name": "CaribeGirl", "link": "https://stackoverflow.com/users/1165197/caribegirl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2775, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1464203653, "creation_date": 1464196359, "question_id": 37443689, "link": "https://stackoverflow.com/questions/37443689/eigen-rotation2d-applied-to-a-2-vector", "title": "Eigen Rotation2D applied to a 2-vector", "body": "<p>I have searched the internet and read Eigen tutorial, and all about transformations, rotations but I cannot figure how to apply a rotation to a 2-vector. Usually is a matrix-vector product.\nI'm using Visual studio 2010. Windows 7. Here is my code</p>\n\n<pre><code>#define _USE_MATH_DEFINES\n#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n#include &lt;Eigen/Dense&gt;\n#include &lt;Eigen/Geometry&gt; \n\nusing namespace std;\nusing Eigen::VectorXd;\nusing Eigen::VectorXf;\nusing Eigen::Vector2d;\nusing Eigen::Vector2f;\nusing Eigen::Rotation2Df;\n\nint main(){  \n   Vector2f v;  \n   v &lt;&lt; 100.0f,200.0f;  \n   cout &lt;&lt; \"\\nthe initial vector is v = \\n\" &lt;&lt; endl &lt;&lt; v &lt;&lt; endl &lt;&lt; endl; \n   float theta = M_PI/4;\n   //Eigen::AffineCompact2d t;\n   Rotation2Df t(theta);\n   t.toRotationMatrix();\n   printf (\"\\nUsing an Affine2f\\n\");\n   cout &lt;&lt;\"\\nthe rotation Matrix is \\n\"&lt;&lt; t.matrix() &lt;&lt; std::endl;\n   Vector2f rotatedVect = t*v.transpose();\n   cout &lt;&lt;\"the rotated vector is \\n\"&lt;&lt; rotatedVect &lt;&lt; std::endl;\n\n   std::cin.get();\n}\n</code></pre>\n\n<p>The problem is in this line:</p>\n\n<pre><code>Vector2f rotatedVect = t*v.transpose();\n</code></pre>\n\n<p>It is like it is confused which multiplication operator need to use. If concatenation or matrix-vector multiplication.  I like this library but at this point I am seriously rethinking using it in my project. This is the error that visual studio 2010 generates when I run the code. I would appreciate any help!</p>\n\n<pre><code>1&gt;------ Rebuild All started: Project: GettingStarted, Configuration: Debug x64 ------\n1&gt;Build started 5/25/2016 12:52:03 PM.\n1&gt;_PrepareForClean:\n1&gt;  Deleting file \"x64\\Debug\\GettingStarted.lastbuildstate\".\n1&gt;InitializeBuildStatus:\n1&gt;  Creating \"x64\\Debug\\GettingStarted.unsuccessfulbuild\" because \"AlwaysCreate\" was specified.\n1&gt;ClCompile:\n1&gt;  firstprog.cpp\n1&gt;firstprog.cpp(18): warning C4305: 'initializing' : truncation from 'double' to 'float'\n1&gt;firstprog.cpp(24): error C2666: 'Eigen::Rotation2D&lt;_Scalar&gt;::operator *' : 2 overloads have similar conversions\n1&gt;          with\n1&gt;          [\n1&gt;              _Scalar=float\n1&gt;          ]\n1&gt;          c:\\users\\maider\\eigen\\src/Geometry/Rotation2D.h(85): could be 'Eigen::Matrix&lt;_Scalar,_Rows,_Cols&gt; Eigen::Rotation2D&lt;_Scalar&gt;::operator *(const Eigen::Matrix&lt;_Scalar,_Rows,_Cols&gt; &amp;) const'\n1&gt;          with\n1&gt;          [\n1&gt;              _Scalar=float,\n1&gt;              _Rows=2,\n1&gt;              _Cols=1\n1&gt;          ]\n1&gt;          c:\\users\\maider\\eigen\\src/Geometry/RotationBase.h(71): or       'Eigen::Matrix&lt;_Scalar,_Rows,_Cols&gt; Eigen::RotationBase&lt;Derived,_Dim&gt;::operator *&lt;Eigen::Transpose&lt;MatrixType&gt;&gt;(const Eigen::EigenBase&lt;Eigen::Transpose&lt;MatrixType&gt;&gt; &amp;) const'\n1&gt;          with\n1&gt;          [\n1&gt;              _Scalar=float,\n1&gt;              _Rows=2,\n1&gt;              _Cols=1,\n1&gt;              Derived=Eigen::Rotation2D&lt;float&gt;,\n1&gt;              _Dim=2,\n1&gt;              MatrixType=Eigen::Matrix&lt;float,2,1&gt;\n1&gt;          ]\n1&gt;          while trying to match the argument list '(Eigen::Rotation2Df, Eigen::Transpose&lt;MatrixType&gt;)'\n1&gt;          with\n1&gt;          [\n1&gt;              MatrixType=Eigen::Matrix&lt;float,2,1&gt;\n1&gt;          ]\n1&gt;\n1&gt;Build FAILED.\n1&gt;\n1&gt;Time Elapsed 00:00:01.02\n========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ==========\n</code></pre>\n"}, {"tags": ["c++", "macos", "opengl", "sdl-2", "folly"], "comments": [{"owner": {"reputation": 1021, "user_id": 2251083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b66a1c40b14b2624effadfe252c23eb0?s=128&d=identicon&r=PG", "display_name": "Ryan Stout", "link": "https://stackoverflow.com/users/2251083/ryan-stout"}, "edited": false, "score": 0, "creation_date": 1464403049, "post_id": 37443600, "comment_id": 62485354, "body": "I just deleted my hard drive and re-installed the os by holding command r while rebooting. The first and only things I did were to install the xcode command-line tools with xcode-select --install, then installed homebrew with ruby -e &quot;$(curl -fsSL <a href=\"https://raw.githubusercontent.com/Homebrew/install/master/install\" rel=\"nofollow noreferrer\">raw.githubusercontent.com/Homebrew/install/master/install</a>)&quot;.  I then did  homebrew install folly  homebrew install sdl2  &lt;copied the c++ code from the stack overflow post&gt;  g++ -g -std=c++0x -Wall main.cpp -o prog -framework opengl -lSDL2 -lfolly  ./prog   and I still saw the same crash I&#39;d been seeing on OS X 10.11.5"}], "answers": [{"comments": [{"owner": {"reputation": 910, "user_id": 535558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/664853b1675e282e16c2b223443b4410?s=128&d=identicon&r=PG", "display_name": "David Ludwig", "link": "https://stackoverflow.com/users/535558/david-ludwig"}, "edited": false, "score": 0, "creation_date": 1464362624, "post_id": 37487015, "comment_id": 62470674, "body": "Apologies for the multiple re-edits, and putting these questions outside a comment.  StackOverflow&#39;s formatting rules + quirks, especially for comments (which seems different than with answer-formatting), is a bit foreign to me...  :-/"}, {"owner": {"reputation": 1021, "user_id": 2251083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b66a1c40b14b2624effadfe252c23eb0?s=128&d=identicon&r=PG", "display_name": "Ryan Stout", "link": "https://stackoverflow.com/users/2251083/ryan-stout"}, "edited": false, "score": 1, "creation_date": 1471274006, "post_id": 37487015, "comment_id": 65269819, "body": "I&#39;m going ahead and accepting this answer. Although I didn&#39;t directly figure out what was going wrong, the discussion at <a href=\"http://forums.libsdl.org/viewtopic.php?t=11932\" rel=\"nofollow noreferrer\">forums.libsdl.org/viewtopic.php?t=11932</a> did help me reach a state where the crashing stopped, even if I never did figure out why"}], "tags": [], "owner": {"reputation": 910, "user_id": 535558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/664853b1675e282e16c2b223443b4410?s=128&d=identicon&r=PG", "display_name": "David Ludwig", "link": "https://stackoverflow.com/users/535558/david-ludwig"}, "is_accepted": true, "score": 1, "last_activity_date": 1464362185, "creation_date": 1464362185, "answer_id": 37487015, "question_id": 37443600, "link": "https://stackoverflow.com/questions/37443600/sdl2-program-linked-against-jemalloc-crashes-on-mac-os-x-but-not-ubuntu/37487015#37487015", "title": "SDL2 program linked against jemalloc crashes on Mac os x but not ubuntu", "body": "<p>An occasional SDL2 contributor here:</p>\n\n<p>I'm not seeing a crash when I run this, despite linking with Folly, and when using OSX 10.11.5.</p>\n\n<p>A few observations:</p>\n\n<ol>\n<li><p>the 'brew install SDL2' command didn't install an SDL2 framework.  It look install a static lib, libSDL2.a, and a dynamic lib, libSDL2.dylib, into /usr/local, but no .framework.  Might you be using an SDL2.framework from a different (non-brew) install?</p></li>\n<li><p>I had to add in a -I/usr/local/include and -L/usr/local/lib to the g++ call, in order to build.  Might headers and/or libraries be getting retrieved from elsewhere (such as a separate, SDL2 framework)?</p></li>\n<li><p>The copy of 'g++' I had on my system was, in reality, clang, which was provided by Xcode v7.3.1, and which I presume Apple had just linked to /usr/bin/g++.  Are you using an actual version of g++, and if so, what version and from what source?</p></li>\n</ol>\n\n<p>None of these are to say that they're causing the error, I'm mainly looking to see what's different about my dev environment, and yours.  :-)</p>\n"}], "owner": {"reputation": 1021, "user_id": 2251083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b66a1c40b14b2624effadfe252c23eb0?s=128&d=identicon&r=PG", "display_name": "Ryan Stout", "link": "https://stackoverflow.com/users/2251083/ryan-stout"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 37487015, "answer_count": 1, "score": 1, "last_activity_date": 1464362185, "creation_date": 1464196080, "last_edit_date": 1495535322, "question_id": 37443600, "link": "https://stackoverflow.com/questions/37443600/sdl2-program-linked-against-jemalloc-crashes-on-mac-os-x-but-not-ubuntu", "title": "SDL2 program linked against jemalloc crashes on Mac os x but not ubuntu", "body": "<p>I followed <a href=\"http://headerphile.com/sdl2/opengl-part-1-sdl-opengl-awesome/\" rel=\"nofollow noreferrer\">this tutorial</a> and set up a very simple opengl progam using SDL2. I removed parts of it for purposes of this question. The program opens a window, sets the background color to be red, and loops until the escape key is pressed.</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\n#include &lt;OpenGL/gl.h&gt;\n#include &lt;SDL2/SDL.h&gt;\n\nusing namespace std;\n\nvoid CheckSDLError(int line = -1) {\n  std::string error = SDL_GetError();\n\n  if (error != \"\") {\n    std::cout &lt;&lt; \"SLD Error : \" &lt;&lt; error &lt;&lt; std::endl;\n\n    if (line != -1) {\n      std::cout &lt;&lt; \"\\nLine : \" &lt;&lt; line &lt;&lt; std::endl;\n    }\n    SDL_ClearError();\n  }\n}\n\n\nbool SetOpenGLAttributes() {\n  SDL_GL_SetAttribute(SDL_GL_CONTEXT_PROFILE_MASK, SDL_GL_CONTEXT_PROFILE_CORE);\n  SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 3);\n  SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 2);\n  SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);\n\n  return true;\n}\n\nSDL_Window *mainWindow;\nSDL_GLContext mainContext;\n\nbool sdlInit() {\n  // Initialize SDL's Video subsystem                                            \n  if (SDL_Init(SDL_INIT_VIDEO) &lt; 0) {\n    std::cout &lt;&lt; \"Failed to init SDL\\n\";\n    return false;\n  }\n\n  mainWindow = SDL_CreateWindow(\"SDL2 window, son\", SDL_WINDOWPOS_CENTERED,\n                                SDL_WINDOWPOS_CENTERED,\n                                640, 640, SDL_WINDOW_OPENGL);\n\n  if (!mainWindow) {\n    std::cout &lt;&lt; \"Unable to create window\\n\";\n    CheckSDLError(__LINE__);\n    return false;\n  }\n  // Create our opengl context and attach it to our window                       \n  mainContext = SDL_GL_CreateContext(mainWindow);\n  SetOpenGLAttributes();\n\n  // This makes our buffer swap syncronized with the monitor's vertical refresh  \n  SDL_GL_SetSwapInterval(1);\n\n  return true;\n}\n\nvoid mainLoop() {\n  while (true) {\n    usleep(40000);//40 ms = 40000 us                                             \n    SDL_Event event;\n    while (SDL_PollEvent(&amp;event)) {\n      cout &lt;&lt; \"here\\n\";\n      glClearColor(1.0, 0.0, 0.0, 1.0);\n      glClear(GL_COLOR_BUFFER_BIT);\n      SDL_GL_SwapWindow(mainWindow);\n      if (event.type == SDL_QUIT) {\n        return;\n      }\n      if (event.type == SDL_KEYDOWN) {\n        switch (event.key.keysym.sym) {\n        case SDLK_ESCAPE:\n          return;\n          break;\n        }\n      }\n    }\n  }\n}\n\n\nint main(int argc, char** argv) {\n  if (!sdlInit()) {\n    return -1;\n  }\n  mainLoop();\n  SDL_GL_DeleteContext(mainContext);\n  SDL_DestroyWindow(mainWindow);\n  SDL_Quit();\n  return 0;\n}\n</code></pre>\n\n<p>The program compiles, links and works as I'd expect when I compiles with clang on my mac with</p>\n\n<pre><code>g++ -g -std=c++0x -Wall main.cpp -o prog -framework opengl -framework SDL2\n</code></pre>\n\n<p>However, if I try to link against <a href=\"https://github.com/facebook/folly\" rel=\"nofollow noreferrer\">Facebook's Folly</a>, like this:</p>\n\n<pre><code>g++ -g -std=c++0x -Wall main.cpp -o prog -framework opengl -framework SDL2 -lfolly\n</code></pre>\n\n<p>the program still compiles and links successfully. However, when I run the program, it crashes every time after a few seconds. lldb shows the following:</p>\n\n<pre><code>Process 36200 stopped\n* thread #4: tid = 0xf254f, 0x00007fff9c6891f4 libsystem_platform.dylib`OSSpinLockLock + 7, stop reason = EXC_BAD_ACCESS (code=1, address=0x390)\n    frame #0: 0x00007fff9c6891f4 libsystem_platform.dylib`OSSpinLockLock + 7\nlibsystem_platform.dylib`OSSpinLockLock:\n-&gt;  0x7fff9c6891f4 &lt;+7&gt;:  lock   \n    0x7fff9c6891f5 &lt;+8&gt;:  cmpxchgl %ecx, (%rdi)\n    0x7fff9c6891f8 &lt;+11&gt;: je     0x7fff9c6891ff            ; &lt;+18&gt;\n    0x7fff9c6891fa &lt;+13&gt;: jmp    0x7fff9c689d6e            ; _OSSpinLockLockSlow\n</code></pre>\n\n<p>My vague understanding is that SDL2 is dynamically linked and after reading <a href=\"https://stackoverflow.com/questions/34534136/why-does-linking-against-both-sdl2-and-udev-cause-a-segmentation-fault\">this answer</a>, I assume that when I link against folly, I'm using a different implementation of some library than when I don't link against folly. I'm also not sure if it's relevant, but I was able to compile the code above and link against folly on my Ubuntu desktop, and the resulting binary can be run without any problems. What do I need to do in order to use SDL2 and folly together on Mac 10.11.5?</p>\n"}, {"tags": ["c++", "macos", "qt", "opengl", "vertex-array-object"], "answers": [{"tags": [], "owner": {"reputation": 346, "user_id": 2391980, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e1dad7ee213f20c9aab170b81e5db712?s=128&d=identicon&r=PG", "display_name": "Bennet Leff", "link": "https://stackoverflow.com/users/2391980/bennet-leff"}, "is_accepted": true, "score": 1, "last_activity_date": 1464239482, "last_edit_date": 1495541757, "creation_date": 1464239482, "answer_id": 37452072, "question_id": 37443539, "link": "https://stackoverflow.com/questions/37443539/glgenvertexarrays-not-creating-unique-vao-when-in-main-loop-but-works-otherwise/37452072#37452072", "title": "glGenVertexArrays Not creating unique VAO when in Main loop but works otherwise", "body": "<p>I don't know why I was down voted but I've finally figured out the issue. In <code>Editor::addModelToScene()</code> I needed to call <code>window.makeCurrent()</code> right before I called <code>addModel()</code>. I have zero idea why this would work on OSX regardless. Also thanks to <a href=\"https://stackoverflow.com/a/31227168/2391980\">this answer</a> for giving me the idea to try this.</p>\n"}], "owner": {"reputation": 346, "user_id": 2391980, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e1dad7ee213f20c9aab170b81e5db712?s=128&d=identicon&r=PG", "display_name": "Bennet Leff", "link": "https://stackoverflow.com/users/2391980/bennet-leff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 533, "favorite_count": 0, "accepted_answer_id": 37452072, "answer_count": 1, "score": -2, "last_activity_date": 1464239482, "creation_date": 1464195887, "question_id": 37443539, "link": "https://stackoverflow.com/questions/37443539/glgenvertexarrays-not-creating-unique-vao-when-in-main-loop-but-works-otherwise", "title": "glGenVertexArrays Not creating unique VAO when in Main loop but works otherwise", "body": "<p>I'm currently working on a small editor for a game engine I have been writing. I've set up a file menu with Qt 5.6 that has an option to add a model which creates a new model and adds it to the rendering engine manager. On Mac OSX 10.11 (with OpenGL 3 or 4) this works fine. On Ubuntu 16.04 it only slightly works. I can initialize as many models as I want outside of the main loop. However inside the main loop I can only initialize as many models as I initialized outside of the main loop. When I pull up gdb inside of my IDE the issue seems to be related to VAO's. On OSX a new VAO is initialized for each model regardless of where I create a mesh. On Ubuntu, outside the main loop new VAO's are generated for each mesh. Inside the main loop the meshes that draw all have the same VAO as a previously created mesh outside the main loop. Once I create more models than have been created outside the main loop and a new VAO gets generated the model does not draw.</p>\n\n<p>To summarize, in Ubuntu all models outside the main loop get their own VAO. Inside the main loop the VAO GLuint handle starts recounting from 2 again. Once the handle/tag counts past however many models were initialized outside the main loop, the models stop drawing. It works just fine one Mac OSX. I suspect this is an OpenGL/Qt issue so even though there's a lot of extra code for the engine I think the question is fair to ask. Link: <a href=\"https://github.com/BennetLeff/engine\" rel=\"nofollow\">https://github.com/BennetLeff/engine</a></p>\n\n<p>Since there are quite a few files I'll only include what I think is necessary but I'll link to the github project as well. Sorry for the large code dump but tell me  if there's anything else I can provide. </p>\n\n<h1>Mesh.cpp</h1>\n\n<pre><code>#include \"Mesh.h\"\n#include \"Transform.h\"\n\n#include &lt;stdio.h&gt;\n\nMesh::Mesh(std::vector&lt;glm::vec3&gt; vertices, std::vector&lt;glm::vec3&gt; normals, std::vector&lt;glm::vec2&gt; textures, std::vector&lt;GLuint&gt; indices)\n{\n    drawCount_ = indices.size();\n\n  glGenVertexArrays(1, &amp;vertexArrayObject_);\n    glBindVertexArray(vertexArrayObject_);\n\n    glGenBuffers(NUMBUFFERS, vertexBufferObject_);\n\n    // Position Attrib\n    glBindBuffer(GL_ARRAY_BUFFER, vertexBufferObject_[POSITION_VB]);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices[0]) * vertices.size(), vertices.data(), GL_STATIC_DRAW);\n    glEnableVertexAttribArray(1);\n    glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 0, 0);\n\n    // Texture Attrib\n    glBindBuffer(GL_ARRAY_BUFFER, vertexBufferObject_[TEXCOORD_VB]);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(textures[0]) * textures.size(), textures.data(), GL_STATIC_DRAW);\n    glEnableVertexAttribArray(0);\n    glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, 0);\n\n  // Normals Attrib\n  glBindBuffer(GL_ARRAY_BUFFER, vertexBufferObject_[NORMAL_VB]);\n  glBufferData(GL_ARRAY_BUFFER, sizeof(normals[0]) * normals.size(), normals.data(), GL_STATIC_DRAW);\n  glEnableVertexAttribArray(2);\n  glVertexAttribPointer(2, 3, GL_FLOAT, GL_FALSE, 0, 0);\n\n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, vertexBufferObject_[INDEX_VB]);\n  glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices[0]) * indices.size(), indices.data(), GL_STATIC_DRAW);\n\n    glBindVertexArray(0);\n\n  fprintf(stderr, \"vao val %d\\n\", vertexArrayObject_);\n}\n\nMesh::~Mesh()\n{\n    glDeleteVertexArrays(1, &amp;vertexArrayObject_);\n}\n\nvoid Mesh::draw()\n{\n  glBindVertexArray(vertexArrayObject_);\n    glDrawElements(GL_TRIANGLES, drawCount_, GL_UNSIGNED_INT, 0);\n    glBindVertexArray(0);\n  if (glGetError())\n      printf(\"GL error %d\", glGetError());\n}\n</code></pre>\n\n<h1>Main.cpp</h1>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#ifdef __APPLE__\n    #include &lt;OpenGL/gl3.h&gt;\n#else\n    #include &lt;GL/glew.h&gt;\n#endif\n\n#include \"Camera.h\"\n#include \"Model.h\"\n\n#include \"Editor.h\"\n#include \"RenderEngine.h\"\n\n#include &lt;QApplication&gt;\n\nbool quit = false;\n\nint main(int argc, char* argv[])\n{\n    auto WIDTH = 1024;\n    auto HEIGHT = 800;\n\n    /* \n     * Sets up a QApplication\n     * with the proper formatting. This allows\n     * GL versions to be set and so forth. Then\n     * the QApplication is polled in the main loop\n     * for events.\n    */\n\n    QApplication app(argc, argv);\n    QSurfaceFormat format;\n    format.setSamples(16);\n    format.setDepthBufferSize(24);\n    format.setStencilBufferSize(8);\n    format.setVersion(4, 3);\n    format.setProfile(QSurfaceFormat::CoreProfile);\n    QSurfaceFormat::setDefaultFormat(format);\n\n    // Sets up Rendering Engine and Editor.\n    auto cam = new Camera(glm::vec3(0, 6, -20), 70.0f, (float) WIDTH / (float) HEIGHT, 0.01f, 1000.0f);\n    RenderEngine* engine = new RenderEngine(cam);\n    Editor editor(engine, WIDTH, HEIGHT);\n\n    editor.showEditor();\n\n    /*\n     * Must call Editor.show() before any other\n     * OpenGL calls. This is mostly because of Qt.\n    */\n    // auto house = Model(\"./res/farm house/OBJ/Farmhouse OBJ.obj\", \"./res/farm house/Textures/Farmhouse Texture.jpg\");\n    // house.transform-&gt;getPosition()-&gt;z = 40;\n\n    // auto model = Model(\"./res/Alfred/Alfred.obj\", \"./res/Alfred/alfred_dif.png\");\n    // auto model2 = Model(\"./res/Alfred/Alfred.obj\", \"./res/Alfred/alfred_dif.png\");\n\n    float counter = 0.0f;\n\n    while (editor.isVisible())\n    {\n        app.processEvents();\n        // model.transform-&gt;getRotation()-&gt;y = float(editor.getSliderValue()) / 10;\n        // model.transform-&gt;getPosition()-&gt;z = editor.getManValue();\n        counter += 0.1f;\n\n        /*\n         * Just updating window for now because\n         * it may be faster. Need to benchmark this\n         * and determine what is necessary.\n        */\n        editor.getWindow()-&gt;update();\n    }\n\n    return 0;\n}\n</code></pre>\n\n<h1>GUIWindow.cpp (inherits from QOpenGLWidget, QOpenGLFunctions)</h1>\n\n<pre><code>#include &lt;GL/glew.h&gt;\n#include \"GUIWindow.h\"\n\nGUIWindow::GUIWindow(QWidget* parent, RenderEngine* engine) :\n    QOpenGLWidget(parent), engine(engine) { }\n\nvoid GUIWindow::initializeGL()\n{\n    // Set up the rendering context, load shaders and other resources, etc.:\n    initializeOpenGLFunctions();\n\n    // If not on OSX we need to include\n    // OpenGL as an extension\n    #ifndef __APPLE__\n        glewExperimental = GL_TRUE;\n\n        GLenum err = glewInit();\n        if (GLEW_OK != err) {\n            /* Problem: glewInit failed, something is seriously wrong. */\n            fprintf(stderr, \"Error: %s\\n\", glewGetErrorString(err));\n        }\n    #endif\n\n    // Depth test not enabled by default.\n    glEnable(GL_DEPTH_TEST);\n}\n\nvoid GUIWindow::resizeGL(int w, int h) {  }\n\nvoid GUIWindow::paintGL()\n{\n    // Draw the scene\n    clear(0.1, 0.4, 0.6, 1.0);\n\n    // Draw all Models\n    engine-&gt;draw();\n}\n\nvoid GUIWindow::clear(float r, float g, float b, float a)\n{\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT | GL_STENCIL_BUFFER_BIT);\n    glClearColor(r, g, b, a);\n}\n\nGUIWindow::~GUIWindow() { }\n</code></pre>\n\n<h1>Model.cpp (excluding model loading which just gets data from AssImp)</h1>\n\n<pre><code>void Model::draw(Camera* cam)\n{\n    shader.draw();\n    shader.update(transform, cam);\n    tex.bind(0);\n    modelMesh-&gt;draw();\n}\n\nvoid Model::bindTexture(Texture tex)\n{\n    this-&gt;tex = tex;\n}\n</code></pre>\n\n<h1>RenderingEngine.cpp</h1>\n\n<pre><code>#include \"RenderEngine.h\"\n\nRenderEngine::RenderEngine(Camera* cam)\n    : cam(cam)\n{\n    this-&gt;init();\n}\n\nvoid RenderEngine::init()\n{\n    // If not on OSX we need to include\n    // OpenGL as an extension\n    #ifndef __APPLE__\n        glewExperimental = GL_TRUE;\n\n        GLenum err = glewInit();\n        if (GLEW_OK != err) {\n            /* Problem: glewInit failed, something is seriously wrong. */\n            fprintf(stderr, \"Error: %s\\n\", glewGetErrorString(err));\n        }\n\n        glEnable(GL_DEPTH_TEST);\n    #endif\n}\n\nvoid RenderEngine::addModel(Model model)\n{\n    printf(\"added model \\n\");\n    this-&gt;models.push_back(model);\n    for (int i = 0; i &lt; this-&gt;models.size(); i++)\n        printf(\"Model Pos: (%g, %g, %g) \\n\", models[i].transform-&gt;getPosition()-&gt;x,\n               models[i].transform-&gt;getPosition()-&gt;y,\n               models[i].transform-&gt;getPosition()-&gt;z);\n    printf(\"there are %d models now \\n\", this-&gt;models.size());\n}\n\nvoid RenderEngine::draw()\n{\n     for (int i = 0; i &lt; this-&gt;models.size(); i++)\n        models[i].draw(this-&gt;cam);\n}\n</code></pre>\n\n<h1>Editor.cpp (minus most Qt Calls which just set up the window)</h1>\n\n<pre><code>#include \"Editor.h\"\n\nEditor::Editor(RenderEngine* renderEngine, int width, int height)\n{\n    frame = 0;\n    this-&gt;width = width;\n    this-&gt;height = height;\n    this-&gt;engine = renderEngine;\n    this-&gt;window = new GUIWindow(0, renderEngine);\n}\n\nvoid Editor::initialize()\n{\n    // Set up the rendering context, load shaders and other resources, etc.:\n    // initializeOpenGLFunctions();\n    glViewport(0, 0, width, height);\n    setupWidgets();\n}\n\n\nfloat Editor::getRandNum()\n{\n    srand(time(0));\n    float num = rand() % 10 + 1;\n    fprintf(stderr, \"%d \\n\", num);\n    return num;\n}\n\nvoid Editor::addModelToScene()\n{\n    srand (time(NULL));\n\n    auto trans = new Transform();\n    trans-&gt;getPosition()-&gt;x = rand() % 10 + 1;\n    trans-&gt;getPosition()-&gt;y = rand() % 10 + 1;\n    trans-&gt;getPosition()-&gt;z = rand() % 10 + 1;\n    engine-&gt;addModel(Model(\"./res/Alfred/Alfred.obj\", \"./res/Alfred/alfred_dif.png\", trans));\n    fprintf(stderr, \"Add a Model \\n\");\n}\n\nvoid Editor::showEditor()\n{\n    // Sets up the rest of the widgets locations.\n    setupWidgets();\n    // Sets up the QMainWindow.\n    this-&gt;show();\n}\n\nvoid Editor::addModel(Model model)\n{\n    engine-&gt;addModel(model);\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1464195914, "post_id": 37443394, "comment_id": 62389359, "body": "Other threads cannot enter the same CRITICAL_SECTION at the same time. They do not stop executing other code or entering other CRITICAL_SECTIONs"}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1464196020, "post_id": 37443394, "comment_id": 62389426, "body": "If properly used, a critical section will block other threads if they try to enter the critical section while a thread in already in that section. So you can have only one thread executing the code between entering and exiting the critical section. The OS will switch to another thread that is not blocked."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1464196723, "post_id": 37443394, "comment_id": 62389804, "body": "In the 17:09 UTC edit, the careerride link is either misleading or very poorly worded. The result is the same, and I have to call it wrong."}], "answers": [{"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 0, "last_activity_date": 1464198129, "last_edit_date": 1464198129, "creation_date": 1464196074, "answer_id": 37443597, "question_id": 37443394, "link": "https://stackoverflow.com/questions/37443394/is-windowss-critical-section-prevent-other-thread-to-be-executed/37443597#37443597", "title": "Is Windows&#39;s CRITICAL_SECTION prevent other thread to be executed", "body": "<p>In the general sense, no. Other threads carry on unaffected unless they attempt to enter a region protected by the same CRITICAL_SECTION. Those threads may be blocked until the critical section becomes available, depending on how you try to enter and when. </p>\n\n<p>The first to enter the critical section has no problems, but once a thread enters, no other thread may enter until the critical section is left. </p>\n\n<p>A thread, \"B\", trying to enter a critical section occupied by \"A\" will block until \"A\" exits the critical section unless \"B\" first tests that they are permitted to enter, for example with <a href=\"https://msdn.microsoft.com/en-ca/library/windows/desktop/ms686857(v=vs.85).aspx\" rel=\"nofollow\">TryEnterCriticalSection</a>, and elects to do something else rather than wait.</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-ca/library/windows/desktop/ms682530(v=vs.85).aspx\" rel=\"nofollow\">I recommend giving this a read.</a></p>\n\n<p>I also recommend, if C++ 11 or a more recent standard is an option, using the <a href=\"http://en.cppreference.com/w/cpp/thread\" rel=\"nofollow\"><code>&lt;thread&gt;</code> library's</a> mutual exclusion facilities to improve your portability.</p>\n"}, {"tags": [], "owner": {"reputation": 1639, "user_id": 2073349, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0266d3aafa1813f794a5b71058d5cd27?s=128&d=identicon&r=PG", "display_name": "Ritesh", "link": "https://stackoverflow.com/users/2073349/ritesh"}, "is_accepted": true, "score": 2, "last_activity_date": 1464197702, "last_edit_date": 1464197702, "creation_date": 1464197392, "answer_id": 37443986, "question_id": 37443394, "link": "https://stackoverflow.com/questions/37443394/is-windowss-critical-section-prevent-other-thread-to-be-executed/37443986#37443986", "title": "Is Windows&#39;s CRITICAL_SECTION prevent other thread to be executed", "body": "<p>First of all, not all the threads are blocked.\nOnly those threads all blocked, which wants to enter the same critical section.</p>\n\n<p>Your question is that you want to check working of threads.</p>\n\n<p>My explanation will be focused around using Visual Studio IDE as you have asked about Windows critical section.</p>\n\n<p>Have a global variable int loop = 1;\nHave critical section which only has code while(loop); (infinite loop)</p>\n\n<p>Have at least 2 threads in the program. Run the code in debugger.\nSee the threads view in the IDE and you will see that one thread is just stuck at while(loop). </p>\n\n<p>Just freeze that thread and toggle to another thread. Just run the other thread, and you will see that it will not move further and it will just keep on trying to enter critical section.</p>\n\n<p>Now change the value of loop to 0 from watch view of debugger.\nAnd still nothing will change as the first thread thats holding critical section was freezed. Now just put the break point on line while(loop) and run the freezed thread, then you will see that because we have changed the value of loop to 0, the thread that was holding the critical section will exit the critical section. </p>\n\n<p>And wow the other thread will stop at the break point and it has now entered the critical section.</p>\n\n<p>So to expand the scope, add 3 thread in your program which does not use critical section.</p>\n\n<p>Run the program and you will find that the above holds true only for the threads having critical section but the third thread which does not use critical section just ran and finished without any issue.</p>\n"}, {"tags": [], "owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "is_accepted": false, "score": 2, "last_activity_date": 1464198801, "creation_date": 1464198801, "answer_id": 37444418, "question_id": 37443394, "link": "https://stackoverflow.com/questions/37443394/is-windowss-critical-section-prevent-other-thread-to-be-executed/37444418#37444418", "title": "Is Windows&#39;s CRITICAL_SECTION prevent other thread to be executed", "body": "<p>Let me try to make it simple. </p>\n\n<p>You are driving on a road, and then you see a RED signal. You have to stop till other do use the crossing. Your waiting has no connection to any other road in city, country or entire world. </p>\n\n<p>If a signal in London is green or red, and you are waiting on San Francisco's particular signal - it really doesn't matter if that signal on London turns green (you won't be allowed to pass through). Neither the London's signal being red prevents you from not crossing the signal.</p>\n\n<p>Similarly, none of such signals would prevent any of vehicles on express highway. The other vehicles are not blocked by the signal you are waiting on (they are free threads in OS perspective).</p>\n\n<p>Assume set of all vehicles on particular signal is a thread. Then on a four crossing signal, there would be three threads waiting for signal to turn green. Only one thread (set of vehicles) can proceed further (utilize the road), all other 3 (or more) threads must wait.</p>\n\n<p>This is what CS and mutexes are for. If you are blocked with <code>EnterCriticalSection</code> or <code>WaitForSingleObject</code>, you are waiting for that signal light to turn green for you (the waiting thread).</p>\n"}], "owner": {"reputation": 1467, "user_id": 2947765, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0d8d16ae594d383e8066324d96cf15f8?s=128&d=identicon&r=PG&f=1", "display_name": "Aminos", "link": "https://stackoverflow.com/users/2947765/aminos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 556, "favorite_count": 0, "closed_date": 1464792596, "accepted_answer_id": 37443986, "answer_count": 3, "score": -4, "last_activity_date": 1464198801, "creation_date": 1464195419, "last_edit_date": 1464196086, "question_id": 37443394, "link": "https://stackoverflow.com/questions/37443394/is-windowss-critical-section-prevent-other-thread-to-be-executed", "closed_reason": "Needs details or clarity", "title": "Is Windows&#39;s CRITICAL_SECTION prevent other thread to be executed", "body": "<p>I want to check if it's really the case : when a particular thread is inside a critical section, the others threads of the program which are not in the critical section are prevented from execution ?</p>\n\n<p>I posted this question because some people think that mutex are better than critical section, because this last may block the other thread that are not using the critical section.</p>\n\n<p>take a look at this URL : <a href=\"http://www.careerride.com/VC++-critical-section-mutex-and-semaphore.aspx\" rel=\"nofollow\">http://www.careerride.com/VC++-critical-section-mutex-and-semaphore.aspx</a> it this true ?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1464195269, "post_id": 37443272, "comment_id": 62389009, "body": "It&#39;s a node-based container, so you are taking many, many trips to the heap."}, {"owner": {"reputation": 1552, "user_id": 2362671, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0585760afe78ec9aafe1836b826ed495?s=128&d=identicon&r=PG", "display_name": "Come Raczy", "link": "https://stackoverflow.com/users/2362671/come-raczy"}, "edited": false, "score": 1, "creation_date": 1464196488, "post_id": 37443272, "comment_id": 62389662, "body": "Without knowing the size of the map, the speed of the processor and the compiler version+options, it is difficult to tell if 20us is fast, slow or expected. Depending on your compiler and compiler options it could take tens of cycles to copy each element. At 1GHz, 20us is 20K cycles and could be the expected timing to a few hundred elements"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1464197014, "post_id": 37443272, "comment_id": 62389964, "body": "Do you have to copy or could you perhaps move?"}], "answers": [{"comments": [{"owner": {"reputation": 2628, "user_id": 1248638, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e85f0521e95f34c082c45467b731dc5d?s=128&d=identicon&r=PG", "display_name": "Ortix92", "link": "https://stackoverflow.com/users/1248638/ortix92"}, "edited": false, "score": 0, "creation_date": 1464196160, "post_id": 37443351, "comment_id": 62389500, "body": "Mentioning that strings were slowing it down made me realize I only used strings for readability. I can just use defines mapped to hex values."}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "reply_to_user": {"reputation": 2628, "user_id": 1248638, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e85f0521e95f34c082c45467b731dc5d?s=128&d=identicon&r=PG", "display_name": "Ortix92", "link": "https://stackoverflow.com/users/1248638/ortix92"}, "edited": false, "score": 0, "creation_date": 1464196864, "post_id": 37443351, "comment_id": 62389879, "body": "@Ortix92 There are enums if you don&#39;t want to compromise on readability and performance. Chances are your IDE will show the enum name when you debug, instead of its value"}, {"owner": {"reputation": 1552, "user_id": 2362671, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0585760afe78ec9aafe1836b826ed495?s=128&d=identicon&r=PG", "display_name": "Come Raczy", "link": "https://stackoverflow.com/users/2362671/come-raczy"}, "reply_to_user": {"reputation": 2628, "user_id": 1248638, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e85f0521e95f34c082c45467b731dc5d?s=128&d=identicon&r=PG", "display_name": "Ortix92", "link": "https://stackoverflow.com/users/1248638/ortix92"}, "edited": false, "score": 0, "creation_date": 1464198289, "post_id": 37443351, "comment_id": 62390673, "body": "@Ortix92 in that case, use enums as suggested above, and to avoid all the inefficiencies of the maps, use a vector. If your enum is &quot;<code>struct Request {enum {K0=0, K1, K2, SIZE} Key;};</code>&quot;, you would create &quot;<code>std::vector&lt;uint32_t&gt; fetchedData(Request::SIZE)</code>&quot; and access the elements as in <code>fetchedData[K1]</code>"}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 6, "last_activity_date": 1464195881, "last_edit_date": 1464195881, "creation_date": 1464195299, "answer_id": 37443351, "question_id": 37443272, "link": "https://stackoverflow.com/questions/37443272/why-is-copying-an-unordered-map-slow-in-c/37443351#37443351", "title": "Why is copying an unordered map slow in C++?", "body": "<p>In your case, it's not just the copying of the map. It's the copying of the <code>std::string</code>s within the map. That means (potentially) lots of memory allocations. And even without those allocations (small-string optimization), it's still lots of copying of string data.</p>\n\n<p>And that's all on top of the copying needed for the map itself, which involves its own series of allocations, based on bucket sizes, the various heap implementation strategies, etc.</p>\n\n<p>If fast copying is something you need, then perhaps a sorted <code>vector</code> would be more appropriate, rather than an <code>unordered_map</code>. That won't help the <code>string</code> copying issue, but it can help the cost of copying the map itself. You can even speed that up by using a fixed-length string class, which could be trivially copyable. That could make copying the entire <code>vector</code> a single memory allocation followed by a single <code>memcpy</code>.</p>\n\n<p>Of course, it is (theoretically) slower to access a value from a sorted <code>vector</code> than an <code>unordered_map</code>. But that's the give-and-take when it comes to performance. Fast copying or fast access; which matters to you? Though even fast access is theoretical, primarily mattering when such maps are <em>large</em>.</p>\n"}], "owner": {"reputation": 2628, "user_id": 1248638, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e85f0521e95f34c082c45467b731dc5d?s=128&d=identicon&r=PG", "display_name": "Ortix92", "link": "https://stackoverflow.com/users/1248638/ortix92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 638, "favorite_count": 0, "accepted_answer_id": 37443351, "answer_count": 1, "score": 3, "last_activity_date": 1464195881, "creation_date": 1464195010, "question_id": 37443272, "link": "https://stackoverflow.com/questions/37443272/why-is-copying-an-unordered-map-slow-in-c", "title": "Why is copying an unordered map slow in C++?", "body": "<p>I'm writing code on a ARM cortex A9 for a real time robotics application. I'm experiencing some timing issues with my interrupts. I am copying a global variable into the interrupt which takes 20us on an interrupt at 20kHz. That leaves me about 40us for the idle.. Just copying takes 20us!</p>\n\n<p>So my question is why copying an unordered map into another unordered map take so much time? </p>\n\n<pre><code>class Supervisor {\nprivate:\n    DispatchCommunication dispatchComm;\n    DispatchLogic dispatchLogic;\n\n    std::unordered_map&lt;std::string, uint32_t&gt; fetchedData;\npublic:\n    void initialize(void);\n    void communication(void);\n    void logic(void);\n};\n\ninline void Supervisor::initialize(void) {\n    dispatchComm.initialize();\n\n    dispatchLogic.initialize();    \n}\n\n/**\n * Get all sensor data\n */\ninline void Supervisor::communication(void) {\n\n    // Create a map of the data we want to request from the communication dispatcher\n    std::vector&lt;std::string&gt; requestMap = { \"jointAngle\", \"motorAngle\", \"piggyback\" };\n\n    // Fetch the requested data\n    fetchedData = dispatchComm.getDataVector(requestMap);\n\n\n}\n\n/**\n * Run all the logic\n */\ninline void Supervisor::logic(void) {\n\n    std::unordered_map&lt;std::string, uint32_t&gt; IRQFetchedData;\n\n    // This part takes a whopping 20us!\n    IRQFetchedData = fetchedData;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "depth-buffer"], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 6382229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cef2bf42a131475a1e35089f656a3d08?s=128&d=identicon&r=PG&f=1", "display_name": "Kato Katsu", "link": "https://stackoverflow.com/users/6382229/kato-katsu"}, "is_accepted": false, "score": 0, "last_activity_date": 1464210159, "creation_date": 1464210159, "answer_id": 37447560, "question_id": 37443065, "link": "https://stackoverflow.com/questions/37443065/if-depth-buffer-was-reversed-would-gldepthfunc-need-to-be-reversed-as-well/37447560#37447560", "title": "If depth buffer was reversed, would glDepthFunc need to be reversed as well?", "body": "<p>Yes, according to further testing, the problem is that it must be reversed as the data stored in the buffer will only pass the test the other way around.</p>\n"}], "owner": {"reputation": 26, "user_id": 6382229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cef2bf42a131475a1e35089f656a3d08?s=128&d=identicon&r=PG&f=1", "display_name": "Kato Katsu", "link": "https://stackoverflow.com/users/6382229/kato-katsu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464210159, "creation_date": 1464194243, "question_id": 37443065, "link": "https://stackoverflow.com/questions/37443065/if-depth-buffer-was-reversed-would-gldepthfunc-need-to-be-reversed-as-well", "title": "If depth buffer was reversed, would glDepthFunc need to be reversed as well?", "body": "<p>In a project for a portable system, I am experiencing a strange error with setting up 3D depth rendering. In the system SDK it uses a ported version of OpenGL 2.0 called GU. The code is almost completely the same save for some of the initialization. An oddity of the system is that the depth buffer is inversed (i.e. near = far, far = near). Does this mean that the depth function used is also opposite? </p>\n\n<p>Instead of</p>\n\n<pre><code>glDepthFunc(GL_LEQUAL);\n</code></pre>\n\n<p>would I use</p>\n\n<pre><code>glDepthFunc(GL_GEQUAL);\n</code></pre>\n\n<p>Thanks very much for any responses.</p>\n"}, {"tags": ["c++", "winapi", "gdi+", "metafile"], "comments": [{"owner": {"reputation": 683, "user_id": 1529828, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1d727f5a39247138d0c04357167ed15b?s=128&d=identicon&r=PG", "display_name": "erdal.karaca", "link": "https://stackoverflow.com/users/1529828/erdal-karaca"}, "edited": false, "score": 0, "creation_date": 1464263955, "post_id": 37443062, "comment_id": 62419474, "body": "It seems EMF is the wrong tag as it is assigned to the Eclipse Modeling Framework."}], "answers": [{"tags": [], "owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "is_accepted": false, "score": 0, "last_activity_date": 1464195778, "last_edit_date": 1464195778, "creation_date": 1464195191, "answer_id": 37443326, "question_id": 37443062, "link": "https://stackoverflow.com/questions/37443062/how-to-correctly-scale-drawing-for-emf-using-gdi/37443326#37443326", "title": "How to correctly scale drawing for EMF using gdi+", "body": "<p>Although unrelated to your actual problem, I feel very compelled to point out that your programming style of creating all the objects on the heap is quite odd. There is no reason to use <code>new</code> like this. Just create temporary objects on the stack. This keeps you from leaking memory and other resources like a sieve. By way of illustration, all you need is this:</p>\n\n<pre><code>// Create Graphics object\nGraphics g(emf);\n\n// Draw a simple box\nGdiplus::Pen pen(Color(0, 255, 0), 1.0f);\npen.SetDashStyle(DashStyleSolid);\npen.SetLineCap(LineCapRound, LineCapRound, DashCapFlat);\ng.DrawRectangle(pen, r);\n\n// g and pen automatically go out of scope here, implicitly calling the destructor\n// and freeing their resources. No need to call delete.\n</code></pre>\n\n<p>As for your actual question, metafiles don't have a fixed size. They basically just encapsulate a series of GDI drawing instructions that can be recapitulated at will.</p>\n\n<p>The normal way to put an enhanced metafile on the clipboard would be to call <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms649051.aspx\" rel=\"nofollow\"><code>SetClipboardData</code></a> function, using the <code>CF_ENHMETAFILE</code> format. The handle type would obviously then be <code>HENHMETAFILE</code>. You'll need to get GDI+ to give you one of those, probably by using the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms535271.aspx\" rel=\"nofollow\"><code>Metafile::GetHENHMETAFILE</code> method</a> after you've finished loading/creating your metafile object. </p>\n\n<p>The scaling/sizing is the responsibility of the client code, the one that receives your metafile from the clipboard and tries to display it. The metafile header contains an entry that specifies its horizontal and vertical resolution. That can then be scaled in terms of the display DPI. In GDI+, something like:</p>\n\n<pre><code>Graphics g(...);\n\nMetafile mf(L\"MyFile.emf\");\nMetafileHeader mfh;\nmf-&gt;GetMetafileHeader(&amp;mfh);\n\nREAL xScale = mfh-&gt;GetDpiX() / g.GetDpiX();\nREAL yScale = mfh-&gt;GetDpiY() / g.GetDpiY();\n\ng.ScaleTransform(xScale, yScale);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6382190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb0883d06742da6193a0725fb5ca3e77?s=128&d=identicon&r=PG&f=1", "display_name": "Mark H", "link": "https://stackoverflow.com/users/6382190/mark-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1464280222, "creation_date": 1464280222, "answer_id": 37466428, "question_id": 37443062, "link": "https://stackoverflow.com/questions/37443062/how-to-correctly-scale-drawing-for-emf-using-gdi/37466428#37466428", "title": "How to correctly scale drawing for EMF using gdi+", "body": "<p>Self Answer:</p>\n\n<ol>\n<li><p>The Graphics is created with a 'new' because it must be destroyed\nbefore the EMF is 'written'. Else the emf does not 'record' the steps performed in by the Graphics object. Perhaps we should put an extra set of braces, but that would be equally awkward. According to the documentation: \"The recording ends when the Graphics object is deleted or goes out of scope.\"  Hence the explicit new(s) and delete(s). The EMF get pushed to the clipboard post destruction of Graphics and prior to destruction of EMF.</p></li>\n<li><p>*The mistake/problem appears to be caused by using the constructor for the EMF that includes Rect struct as an argument. The Rect dimensions appears to have no discernible relationship with graphcs object coordinates used for drawing, and thus it crops the resultant EMF in unpredictable ways. Using a constructor with only an HDC or an HDC and a filename solves this problem, at least in my hands.</p></li>\n<li><p>Last, adding the code lines</p>\n\n<p>REAL xScale = mfh->GetDpiX() / g.GetDpiX();\nREAL yScale = mfh->GetDpiY() / g.GetDpiY();\ng.ScaleTransform(xScale, yScale);</p></li>\n</ol>\n\n<p>provides a base scaling such that the emfs are more or less similar size regardless of screen resolutions. This is quite useful to give a consistent/reasonable default size for exports on the user side.</p>\n"}], "owner": {"reputation": 11, "user_id": 6382190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb0883d06742da6193a0725fb5ca3e77?s=128&d=identicon&r=PG&f=1", "display_name": "Mark H", "link": "https://stackoverflow.com/users/6382190/mark-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1526, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1467108473, "creation_date": 1464194234, "last_edit_date": 1467108473, "question_id": 37443062, "link": "https://stackoverflow.com/questions/37443062/how-to-correctly-scale-drawing-for-emf-using-gdi", "title": "How to correctly scale drawing for EMF using gdi+", "body": "<p>My windows c++ program creates EMFs (<em>Enhanced Metafile Format</em>) to export to clipboard, word and excel.</p>\n\n<p>The following example code generates an EMF rectangle (width=height=25) that is only 12x12 while the canvas is 25x25 (note: screen resolution of my laptop is3600x1800).\nAt other screen resolutions, similar scaling anomalies occur (too big/too small).\nIt would appear the scaling of the graphics-drawing needs to be set as a function of the resolution.\nI clearly have a gap in my knowledge here...any help is appreciated.</p>\n\n<pre><code>HDC ref_dc = GetDC(NULL);\nRect r(0, 0, 25, 25);\nMetafile* emf = new Metafile(ref_dc, r, MetafileFrameUnitPixel, EmfTypeEmfPlusDual, L\"Drawing\");//to HDC\nGraphics* g = new Graphics(emf);\n\n//draw a simple box\nGdiplus::Pen* pen = new Pen(Color(0, 255, 0), 1.0f);\npen-&gt;SetDashStyle(DashStyleSolid);\npen-&gt;SetLineCap(LineCapRound, LineCapRound, DashCapFlat);\ng-&gt;DrawRectangle(pen, r);    // DrawMyObject(g);\n\n// code here to put on clipboard\n</code></pre>\n"}, {"tags": ["c++", "openmp"], "comments": [{"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1464195160, "post_id": 37442915, "comment_id": 62388953, "body": "think about this, you have only 8 threads, and the most computationally intensive part is <code>sqrt(R*R - i*i)</code>, but on top of that, you add overhead induced by multithreading itself (creating/syncrhonizing threads). also, putting a variable inside the <code>shared</code> clause doesn&#39;t automatically make it safe in terms of concurrent access"}, {"owner": {"reputation": 2202, "user_id": 3357481, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100006348219116/picture?type=large", "display_name": "Mutating Algorithm", "link": "https://stackoverflow.com/users/3357481/mutating-algorithm"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1464195519, "post_id": 37442915, "comment_id": 62389142, "body": "@PiotrSkotnicki Can you please show me how to do that ?"}, {"owner": {"reputation": 2202, "user_id": 3357481, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100006348219116/picture?type=large", "display_name": "Mutating Algorithm", "link": "https://stackoverflow.com/users/3357481/mutating-algorithm"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1464195533, "post_id": 37442915, "comment_id": 62389152, "body": "@PiotrSkotnicki I have been stuck on this for days"}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1464195735, "post_id": 37442915, "comment_id": 62389278, "body": "first off, what is <code>ncip</code>? is this some kind of a mathematical formula ?"}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1464195990, "post_id": 37442915, "comment_id": 62389404, "body": "to add to my previous comment, if you have enough iterations at the top level to divide among the threads you have, and you don&#39;t get speed-up, there is little chance you&#39;ll achieve better results using nested parallelism. that is, you have only 8 threads, if there&#39;s enough work for each already, why would you think you can gain something more using nested parallelism ?"}, {"owner": {"reputation": 2202, "user_id": 3357481, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100006348219116/picture?type=large", "display_name": "Mutating Algorithm", "link": "https://stackoverflow.com/users/3357481/mutating-algorithm"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1464196039, "post_id": 37442915, "comment_id": 62389435, "body": "@PiotrSkotnicki it&#39;s implementing a mathematical model to count the number of points inside a sphere of dimension N and radius R."}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1464196132, "post_id": 37442915, "comment_id": 62389488, "body": "what values for <code>dim</code> and <code>R</code> do you use ? it&#39;s quite important to know"}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1464196542, "post_id": 37442915, "comment_id": 62389698, "body": "did you try already using <code>parallel for</code> at the top-most level, so that recursive calls are done within each thread, without spawning more tasks ?"}, {"owner": {"reputation": 2202, "user_id": 3357481, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100006348219116/picture?type=large", "display_name": "Mutating Algorithm", "link": "https://stackoverflow.com/users/3357481/mutating-algorithm"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1464196732, "post_id": 37442915, "comment_id": 62389811, "body": "@PiotrSkotnicki by top most you mean above the first line of code ?"}, {"owner": {"reputation": 2202, "user_id": 3357481, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100006348219116/picture?type=large", "display_name": "Mutating Algorithm", "link": "https://stackoverflow.com/users/3357481/mutating-algorithm"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1464196814, "post_id": 37442915, "comment_id": 62389848, "body": "write the entire function body in a parallel for block ?"}, {"owner": {"reputation": 2202, "user_id": 3357481, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100006348219116/picture?type=large", "display_name": "Mutating Algorithm", "link": "https://stackoverflow.com/users/3357481/mutating-algorithm"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1464196930, "post_id": 37442915, "comment_id": 62389919, "body": "@PiotrSkotnicki I understand what you are saying but how does that improve performance as opposed to using the task based approach ?"}, {"owner": {"reputation": 2202, "user_id": 3357481, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100006348219116/picture?type=large", "display_name": "Mutating Algorithm", "link": "https://stackoverflow.com/users/3357481/mutating-algorithm"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1464197128, "post_id": 37442915, "comment_id": 62390024, "body": "@PiotrSkotnicki your suggestion is indeed faster but why ? What&#39;s happening technically ?"}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 1, "creation_date": 1464197203, "post_id": 37442915, "comment_id": 62390065, "body": "<a href=\"http://coliru.stacked-crooked.com/a/29ae094732e2e56a\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/29ae094732e2e56a</a> , does this work ?"}, {"owner": {"reputation": 2202, "user_id": 3357481, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100006348219116/picture?type=large", "display_name": "Mutating Algorithm", "link": "https://stackoverflow.com/users/3357481/mutating-algorithm"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 1, "creation_date": 1464198231, "post_id": 37442915, "comment_id": 62390649, "body": "@PiotrSkotnicki Yes! this works for me, can you explain why this works ?"}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1464203641, "post_id": 37442915, "comment_id": 62393673, "body": "It is not helpful to post so many questions about the same underlying problem. I counted <b>13 in the last two days</b> on your attempt to parallelize this problem. You should focus on the <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">X-problem</a>. Keep minor changes int the approach as discussion within the original question. If you really feel a new question is in order, refer to your original question and briefly differentiate the new question."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1464203665, "post_id": 37442915, "comment_id": 62393685, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/37420289/parallelizing-c-code-using-openmp-calculations-actually-slower-in-parallel\">Parallelizing C++ code using OpenMP, calculations actually slower in parallel</a>"}], "answers": [{"tags": [], "owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "is_accepted": true, "score": 0, "last_activity_date": 1464198433, "creation_date": 1464198433, "answer_id": 37444318, "question_id": 37442915, "link": "https://stackoverflow.com/questions/37442915/applying-task-based-parallelism-using-openmp/37444318#37444318", "title": "Applying task based parallelism using OpenMP", "body": "<p>Parallelism isn't for free, and so, however innocently a simple pragma looks like, e.g. <code>#pragma omp task</code>, it comes at a significant cost, because it hides the entire logic of creating and synchronizing threads, assigning and queueing tasks, etc. Only if you find a balance between the intensity of computations, the expense of multithreading itself, and the size of the problem, (not to mention side-effects of multithreading, like false-sharing etc.), you will observe positive (>1) speed-up. </p>\n\n<p>Also, keep in mind that the number of threads is always limited. Once you already created enough workload for each thread, don't try to boost your code by adding additional work-sharing constructs - a thread cannot magically divide into two separate instruction flows. That is, if you have a top-most loop that is already parallel, and it has enough iterations to keep all available threads busy, you won't gain anything trying to extract nested parallelism.</p>\n\n<p>Having said that, unless you can utilize some other techniques, like memorizing partial results, or removing recursion altogether, then just use a single top-most parallel loop, and a reduction clause to ensure thread-safe access to the shared variable:</p>\n\n<pre><code>#pragma omp parallel for reduction(+:n)\nfor (int i = 1; i &lt;= r; ++i)\n{\n    n = n + (2 * ncip(dim-1, sqrt(R*R - i*i)));\n}\n</code></pre>\n\n<p>and then a plain sequential function:</p>\n\n<pre><code>int ncip(int dim, double R)\n{\n    int n, r = (int)floor(R);\n\n    if (dim == 1)\n    {\n        return 1 + 2*r; \n    }\n\n    n = ncip(dim-1, R);\n\n    for (int i = 1; i &lt;= r; ++i)\n    {   \n        n = n + (2 * ncip(dim-1, sqrt(R*R - i*i)));\n    }\n\n    return n;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/29ae094732e2e56a\" rel=\"nofollow\"><strong>DEMO</strong></a></p>\n"}], "owner": {"reputation": 2202, "user_id": 3357481, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100006348219116/picture?type=large", "display_name": "Mutating Algorithm", "link": "https://stackoverflow.com/users/3357481/mutating-algorithm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 37444318, "answer_count": 1, "score": 0, "last_activity_date": 1464198433, "creation_date": 1464193664, "question_id": 37442915, "link": "https://stackoverflow.com/questions/37442915/applying-task-based-parallelism-using-openmp", "title": "Applying task based parallelism using OpenMP", "body": "<p>I have the following code which I am trying to parallelize using OpenMP.</p>\n\n<pre><code>int ncip(int dim, double R){\nint n, r = (int)floor(R);\n\nif (dim == 1) return 1 + 2*r; \n\n#pragma omp task shared(n, dim)\nn = ncip(dim-1, R); // last coord 0\n\nfor(int i=1; i&lt;=r; ++i){   \n    #pragma omp task shared(n, dim)\n    n += 2*ncip(dim-1, sqrt(R*R - i*i) ); // last coord +- i\n\n}\nreturn n;\n}\n</code></pre>\n\n<p>I need to apply task based parallelism because of the recursive calls but i'm not showing any speedup in my computation. What am I doing wrong ? Any suggestions to help speedup this calculation ?</p>\n"}, {"tags": ["c++", "static-analysis", "klocwork"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1464194812, "post_id": 37442827, "comment_id": 62388768, "body": "Surely it doesn&#39;t like your <code>while (0)</code> code.  Who does :)  Misra does not like a fast moving robot to get assertive.  You need to make sure that none of this survives when NDEBUG is #defined.  And that you tool looks at the code with it defined."}, {"owner": {"reputation": 178, "user_id": 3702309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34f0a28c6b02999003a2fdd7b54d1ff2?s=128&d=identicon&r=PG&f=1", "display_name": "SOKS", "link": "https://stackoverflow.com/users/3702309/soks"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1464194931, "post_id": 37442827, "comment_id": 62388824, "body": "Fast and true answer ... I spent an hour looking at those if statement, without questioning the while statement ... None is these macro redefinition survive in our Release configuration since it&#39;s a specific configuration. Thanks !"}], "owner": {"reputation": 178, "user_id": 3702309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34f0a28c6b02999003a2fdd7b54d1ff2?s=128&d=identicon&r=PG&f=1", "display_name": "SOKS", "link": "https://stackoverflow.com/users/3702309/soks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 232, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1464193432, "creation_date": 1464193432, "question_id": 37442827, "link": "https://stackoverflow.com/questions/37442827/klocwork-warning-misra-stmt-cond-not-boolean-with-overriden-assert-macro", "title": "Klocwork warning MISRA.STMT.COND.NOT_BOOLEAN with overriden ASSERT macro", "body": "<p>I'm working on a large project and we use Klocwork to ensure some code quality.\nThe project uses some templated ASSERT (and some other SMART_ASSERT) macro, which I override when using Klocwork (as recommended here : <a href=\"https://developer.klocwork.com/documentation/en/insight/10-1/tuning-cc-analysis\" rel=\"nofollow\">https://developer.klocwork.com/documentation/en/insight/10-1/tuning-cc-analysis</a> )\nKlocwork now sees my 2 ASSERT macros as :</p>\n\n<pre><code>#define ASSERT(x) do { if (!(x)) abort(); } while (0)\n#define SMART_ASSERT(sa_level,x,msg) do { if (!(x)) abort(); } while (0)\n</code></pre>\n\n<p>But still, lines like that : </p>\n\n<pre><code>SMART_ASSERT(sa_warning,true,\"Msg on wrong interface:discarded\");\nSMART_ASSERT(sa_warning,m_FactoriesTables[msgType][msgId] != 0,\"No Factory for Rx Msg\");\nSMART_ASSERT(sa_debug,(crError != 0),\"CtlPath No ErrCr Available\");\nSMART_ASSERT(sa_debug,(m_pools[poolId] != 0),\"Pool Not Created\");\n</code></pre>\n\n<p>ends up with a <code>MISRA.STMT.COND.NOT_BOOLEAN</code> warning : </p>\n\n<pre><code>\"Condition of if or loop statement has type '0' instead of 'boolean' \"\n</code></pre>\n\n<p>Any idea on how to correct this warning ?</p>\n\n<p>Thanks</p>\n\n<p>SOKS</p>\n"}, {"tags": ["c++", "callback", "function-pointers", "linkage"], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1464192941, "post_id": 37442607, "comment_id": 62387676, "body": "Good distinction of names vs objects."}], "tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": true, "score": 7, "last_activity_date": 1464192793, "creation_date": 1464192793, "answer_id": 37442607, "question_id": 37442606, "link": "https://stackoverflow.com/questions/37442606/calling-a-function-with-internal-linkage-via-pointer-from-another-translation-un/37442607#37442607", "title": "Calling a function with internal linkage via pointer from another translation unit", "body": "<p>TL;DR: yes, it is ok</p>\n\n<hr>\n\n<p>From [basic.link] (emphasis mine):</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li><p><strong>A name</strong> is said to have <em>linkage</em> when it might denote the same object,\n  reference, function, type, template, namespace or value as a name\n  introduced by a declaration in another scope:</p>\n  \n  <ul>\n  <li>When a name has <em>internal linkage</em> , the entity it denotes can be\n  referred to <strong>by names</strong> from other scopes in the same translation unit.</li>\n  </ul></li>\n  <li><p>[...]</p></li>\n  <li><p>An unnamed namespace or [...] has internal linkage. [...]. A name having namespace scope that has not been\n  given internal linkage above has the same linkage as the enclosing\n  namespace if it is the name of</p>\n  \n  <ul>\n  <li>a function; or</li>\n  </ul></li>\n  </ol>\n</blockquote>\n\n<p>So basically <em>linkage</em> is a property of <strong>names</strong> rather than of objects, functions etc. This means that a function declared inside an unnamed namespace cannot be called <strong>by name</strong> from another translation unit. There is no restriction to call it by it's pointer.</p>\n"}], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 37442607, "answer_count": 1, "score": 3, "last_activity_date": 1464192793, "creation_date": 1464192793, "question_id": 37442606, "link": "https://stackoverflow.com/questions/37442606/calling-a-function-with-internal-linkage-via-pointer-from-another-translation-un", "title": "Calling a function with internal linkage via pointer from another translation unit", "body": "<p>Can we declare a callback function in an anonymous namespace (thus giving it internal linkage), knowing that it will be called from another translation unit (another library even)?</p>\n\n<p>Some lib:</p>\n\n<pre><code>void register_callback(void (*cb)())\n{\n  ..\n  cb();\n  ..\n}\n</code></pre>\n\n<p>Main program</p>\n\n<pre><code>namespace {\nint foo_cb() { ... } // internal linkage\n}\n\nint main()\n{\n   register_callback(foo_cb);\n}\n</code></pre>\n"}, {"tags": ["c++", "directx", "dxgi"], "answers": [{"tags": [], "owner": {"reputation": 342, "user_id": 513213, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/48BBM.jpg?s=128&g=1", "display_name": "fabsenet", "link": "https://stackoverflow.com/users/513213/fabsenet"}, "is_accepted": false, "score": 0, "last_activity_date": 1476769106, "creation_date": 1476769106, "answer_id": 40100330, "question_id": 37442532, "link": "https://stackoverflow.com/questions/37442532/when-does-dxgi-desktop-duplication-api-identify-a-region-as-a-moved-region/40100330#40100330", "title": "When does DXGI Desktop Duplication API identify a region as a moved region?", "body": "<p>I only can imagine that it depends on the graphics driver, monitor(s) and such things so it might be hard to give a full list of source actions.</p>\n\n<p>I played around with a sample app for desktop duplication api and there was a moved rectangle event when I maximized an explorer window (windows 10 anniversary, surface pro 3, no external screens)</p>\n"}, {"comments": [{"owner": {"reputation": 197, "user_id": 1397724, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/591960ebeb2919f3afb6bd5085c902ac?s=128&d=identicon&r=PG", "display_name": "theimowski", "link": "https://stackoverflow.com/users/1397724/theimowski"}, "edited": false, "score": 0, "creation_date": 1591257994, "post_id": 61863220, "comment_id": 109988370, "body": "FWIW I was able to get Move Rects on Windows Server 2012 R2 Datacenter hosted in VMWare and using VMWare SVGA 3D display adapter"}], "tags": [], "owner": {"reputation": 1, "user_id": 8621616, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xOBejZp0Gt8/AAAAAAAAAAI/AAAAAAAAACE/zRf2C2Q2DWE/photo.jpg?sz=128", "display_name": "Tailing Yuan", "link": "https://stackoverflow.com/users/8621616/tailing-yuan"}, "is_accepted": false, "score": 0, "last_activity_date": 1589781238, "creation_date": 1589781238, "answer_id": 61863220, "question_id": 37442532, "link": "https://stackoverflow.com/questions/37442532/when-does-dxgi-desktop-duplication-api-identify-a-region-as-a-moved-region/61863220#61863220", "title": "When does DXGI Desktop Duplication API identify a region as a moved region?", "body": "<p>In my tests, all changed regions are identified as dirty rects on Windows 10.\nOn Windows Server 2012 (like Windows 8), moved regions can be identified correctly.</p>\n"}], "owner": {"reputation": 985, "user_id": 2501687, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/wZGlA.jpg?s=128&g=1", "display_name": "dynamic_cast", "link": "https://stackoverflow.com/users/2501687/dynamic-cast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1054, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1589781238, "creation_date": 1464192617, "question_id": 37442532, "link": "https://stackoverflow.com/questions/37442532/when-does-dxgi-desktop-duplication-api-identify-a-region-as-a-moved-region", "title": "When does DXGI Desktop Duplication API identify a region as a moved region?", "body": "<p>I have a program to capture the desktop screen using DXGI Desktop Duplication API.</p>\n\n<p>I get frames with <code>IDXGIOutputDuplication::AcquireNextFrame</code> and I am able to capture my desktop frame by frame fine.</p>\n\n<p>To move forward, I try to optimize my program and try to manage <em>dirty</em> and <em>moved</em> rectangle. The API provides both <code>IDXGIOutputDuplication::GetFrameDirtyRects</code> and <code>IDXGIOutputDuplication::GetFrameMoveRects</code> to obtain these informations.</p>\n\n<p>However, it seems like there are never any rectangles identified as being moved. The documentation says moved rectangle are :</p>\n\n<blockquote>\n  <p>rectangles of pixels in the desktop image that the operating system\n  moved to another location within the same image</p>\n</blockquote>\n\n<p>What does this mean exactly ? Can DXGI identify arbitrary portion of the screen to have been moved ? Or maybe this only applies to desktop window being moved ?</p>\n"}, {"tags": ["android", "c++", "multithreading", "sockets"], "comments": [{"owner": {"reputation": 8236, "user_id": 2580516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e83e511e401770207ffbb0d31b8ffb4?s=128&d=identicon&r=PG", "display_name": "Warren Dew", "link": "https://stackoverflow.com/users/2580516/warren-dew"}, "edited": false, "score": 0, "creation_date": 1464195485, "post_id": 37442349, "comment_id": 62389121, "body": "Do you need to measure lag or throughput?  Are you only interested in round trip time, or are you interested in one way times?"}, {"owner": {"reputation": 175, "user_id": 5009031, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c38c6871d62d749f7bb5df34f4998c2e?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Dortulov", "link": "https://stackoverflow.com/users/5009031/ivan-dortulov"}, "reply_to_user": {"reputation": 8236, "user_id": 2580516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e83e511e401770207ffbb0d31b8ffb4?s=128&d=identicon&r=PG", "display_name": "Warren Dew", "link": "https://stackoverflow.com/users/2580516/warren-dew"}, "edited": false, "score": 0, "creation_date": 1464197026, "post_id": 37442349, "comment_id": 62389971, "body": "I am interested in both roundtrip lag as well as throughput. So both."}], "answers": [{"comments": [{"owner": {"reputation": 8236, "user_id": 2580516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e83e511e401770207ffbb0d31b8ffb4?s=128&d=identicon&r=PG", "display_name": "Warren Dew", "link": "https://stackoverflow.com/users/2580516/warren-dew"}, "edited": false, "score": 0, "creation_date": 1464195367, "post_id": 37442521, "comment_id": 62389058, "body": "Which will work as long as your computer and phone times are synchronized to within milliseconds, which may or may not be realistic."}, {"owner": {"reputation": 175, "user_id": 5009031, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c38c6871d62d749f7bb5df34f4998c2e?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Dortulov", "link": "https://stackoverflow.com/users/5009031/ivan-dortulov"}, "edited": false, "score": 0, "creation_date": 1464197064, "post_id": 37442521, "comment_id": 62389992, "body": "I cannot chanage the data on the Android device. That is the requirment. I can only echo back the data."}, {"owner": {"reputation": 175, "user_id": 5009031, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c38c6871d62d749f7bb5df34f4998c2e?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Dortulov", "link": "https://stackoverflow.com/users/5009031/ivan-dortulov"}, "edited": false, "score": 0, "creation_date": 1464618646, "post_id": 37442521, "comment_id": 62547300, "body": "I don&#39;t think you saw my comment. I have a restriction that I cannot change the phone application, so I cannot make it send the timestamp the packet was received."}], "tags": [], "owner": {"reputation": 1202, "user_id": 3012508, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2d3f49111e81563d9131389029b5a5d9?s=128&d=identicon&r=PG&f=1", "display_name": "Harvey", "link": "https://stackoverflow.com/users/3012508/harvey"}, "is_accepted": true, "score": 1, "last_activity_date": 1464192600, "creation_date": 1464192600, "answer_id": 37442521, "question_id": 37442349, "link": "https://stackoverflow.com/questions/37442349/c-calculate-socket-transfer-speed/37442521#37442521", "title": "C++ calculate socket transfer speed", "body": "<p>Create a timestamp as you send the packet, when the phone recives the packet then generate a timestamp also. Then subtract the time from the phone timestamp by the PC timestamp to give you a time difference. Then bytes sent divided by the time-gap will give you your bytes-per-time interval speed.</p>\n\n<p>e.g.</p>\n\n<p><code>recive time - sent time = time gap\" // lets say 2ms\n// When you sent the packet, you sent 8 bytes, so:\n8 / 2 = 4bytes/s //(bytes / timegap = speed)</code></p>\n"}], "owner": {"reputation": 175, "user_id": 5009031, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c38c6871d62d749f7bb5df34f4998c2e?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Dortulov", "link": "https://stackoverflow.com/users/5009031/ivan-dortulov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1105, "favorite_count": 0, "accepted_answer_id": 37442521, "answer_count": 1, "score": 0, "last_activity_date": 1464275411, "creation_date": 1464192079, "last_edit_date": 1464275411, "question_id": 37442349, "link": "https://stackoverflow.com/questions/37442349/c-calculate-socket-transfer-speed", "title": "C++ calculate socket transfer speed", "body": "<p>Greetigs,</p>\n\n<p>I want to measure the transfer speeds between an application running on my PC and the phone which are connected through a wireless network. My phone is running Android and is acting as an echo server. Everything it receives through a socket it echoes back.</p>\n\n<p>On the PC side I wrote a small application which has two threads. One generates packets (128K, but I can control it) and sends them to the phone (the WriteThread). The packets have a timestamp value at the beginning showing the time that the packet was sent. After an entire packet is sent my write thread waits for an event to be signaled. The event is signaled by the read thread when the entire packet has been received. The read thread extracts the timestamp from the packet and calculates the roundtrip lag - the time it took for the packet to go to the phone and return.</p>\n\n<p><strong>My sockets on both sides ( phone and PC ) are non-blocking.</strong></p>\n\n<p>My program is written in C++:</p>\n\n<pre><code>// WriteThread\nint totalBytesWritten = 0;\nint bytesWritten = 0;\nconst int packetSize = 128 * 1024;\nchar pBuffer[packetSize];\nint packetCount = 1000;\nint iterations = packetCount;\n\nwhile ( iterations &gt; 0 )\n{\n   if ( totalBytesWritten &lt; bytesWritten )\n   {\n     if ( generatePacketEvent.isSignaled() )\n     {\n        GenerateBuffer( pBuffer, packetSize );\n        generatePacketEvent.Reset();\n        totalBytesWritten = 0;\n        iterations --;\n     }\n\n     int bytesWritten = CSocketUtils::Write( m_socket, pBuffer + totalBytesWritten, packetSize - totalBytesWritten );\n     if ( bytesWritten &gt; 0 ) totalBytesWritten += bytesWritten;\n   }\n}\n\n// Read thread\nint totalBytesRead = 0;\nint bytesRead = 0;\nint expectedPackets = 100;\nint packetsReceived = 0;\nconst int packetSize = 128 * 1024;\nchar pBuffer[packetSize];\n\nwhile ( packetsReceived &lt; packetsExpected )\n{\n   if ( totalBytesReceived &lt; packetSize )\n   {\n      bytesRead = CSocketUtils::Read( m_socket, pBuffer + totalBytesRead, packetSize - totalBytesRead );\n      if ( bytesRead &gt; 0 )\n      {\n        totalBytesRead += bytesRead;\n      }\n   }\n   else\n   {\n      totalBytesRead = 0;\n      packetReceivedEvent.Signal();\n\n      uint32_t timestamp = 0;\n      memcpy( &amp;timestamp, pBuffer, sizeof( uint32_t ) );\n      uint32_t roundtrip = CurrentTimeMilliseconds() - timestamp;\n   }\n}\n\n// Generate Buffer data\nvoid GenerateBuffer( char* pBuffer, int size )\n{\n    uint32_t timestamp = CurrentTimeMilliseconds();\n    memcpy( pBuffer, &amp;timestamp, sizeof( uint32_t ) );\n    for (int i = sizeof( uint32_t ); i &lt; size; i ++ )\n    {\n      pBuffer[i] = rand() % 255;\n    }\n}\n</code></pre>\n\n<p><strong>How would I measure the speed at which my application is sending / receiving data to / from my phone?</strong></p>\n\n<p><strong>I cannot change the Echo application of the phone to modify the packets that it is receiving! So there is no way to add a timestamp on the phone side.</strong></p>\n\n<p>At first I was accumulating the bytes returned by the CSocketUtils::Write ( which calls send() ) and having a timer measure one second. When the timer expired I would take the accumulated bytes as the write speed. But that produced 12MB/s and it took me 30sto send 12mb of data, so there is no way that is accurate. Then I started measuring time it took to send the whole packet, but that again did not help, because that way I am measuring how fast the OS is filling the socket buffer :(</p>\n"}, {"tags": ["c++", "templates", "c++11"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1464193390, "post_id": 37442340, "comment_id": 62387945, "body": "How does <code>DerivedA</code> know that its <code>Type</code> is <code>TypeA</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 1, "last_activity_date": 1464193440, "creation_date": 1464193440, "answer_id": 37442830, "question_id": 37442340, "link": "https://stackoverflow.com/questions/37442340/enable-if-else-class-member-template-instantiation/37442830#37442830", "title": "Enable if/else class member template instantiation", "body": "<p>Sounds like you just want a default template argument:</p>\n\n<pre><code>class Foo {\n  template &lt;typename Derived, Type type = get_type_from&lt;Derived&gt;::value&gt;\n  void foo();\n};\n</code></pre>\n\n<p>Where <code>get_type_from&lt;&gt;</code> is a metafunction to be filled in later based on how you actually figure out the <code>Type</code>s. </p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 0, "last_activity_date": 1464269341, "last_edit_date": 1464269341, "creation_date": 1464194931, "answer_id": 37443246, "question_id": 37442340, "link": "https://stackoverflow.com/questions/37442340/enable-if-else-class-member-template-instantiation/37443246#37443246", "title": "Enable if/else class member template instantiation", "body": "<pre><code>template&lt;Type t&gt;\nusing etype_tag = std::integral_constant&lt;Type, t&gt;;\n\ntemplate&lt;class T&gt;\nstruct tag_t {\n  using type=T;\n  template&lt;class D,\n    std::enable_if_t&lt;std::is_base_of&lt;T, D&gt;::value, int&gt;* =nullptr\n  &gt;\n  constexpr tag_t( tag_t&lt;D&gt; ) {}\n  constexpr tag_t() = default;\n  constexpr tag_t(tag_t const&amp;) = default;\n};\n\ntemplate&lt;class T&gt;\nconstexpr tag_t&lt;T&gt; tag{};\n\n\nconstexpr etype_tag&lt;Type::TYPEA&gt; get_etype( tag_t&lt;BaseA&gt; ) { return {}; }\nconstexpr etype_tag&lt;Type::TYPEB&gt; get_etype( tag_t&lt;BaseB&gt; ) { return {}; }\n\ntemplate&lt;class T&gt;\nconstexpr decltype( get_etype( tag&lt;T&gt; ) ) etype{};\n</code></pre>\n\n<p>Now <code>etype&lt;Bob&gt;</code> is a compile-time constant integral constant you want.</p>\n\n<pre><code>class Foo {\n  template &lt;typename Derived, Type type=etype&lt;Derived&gt;&gt;\n  void foo();\n};\n</code></pre>\n\n<p>makes the 2nd argument (usually) redundant.</p>\n\n<p>You can extend <code>get_etype</code> with more overloads in either the namespace where <code>etype</code> is declared, or in the namespace of <code>tag_t</code>, or in the namespace of the type you are extending <code>get_etype</code> to work with, and <code>etype</code> will automatically gain support (assuming it is used in a context where the extension is visible: failure of that requirement leaves your program ill formed).</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/453e84ce9f59761c\" rel=\"nofollow\">Live example</a></p>\n"}], "owner": {"reputation": 2102, "user_id": 2828925, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/18abe23c6b1123371f171f55be659ef5?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/2828925/jes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 37443246, "answer_count": 2, "score": 0, "last_activity_date": 1464269341, "creation_date": 1464192046, "last_edit_date": 1464193464, "question_id": 37442340, "link": "https://stackoverflow.com/questions/37442340/enable-if-else-class-member-template-instantiation", "title": "Enable if/else class member template instantiation", "body": "<p>Can anyone tell my how to enable if/else class member template based on different derived classes from pre-defined base set? Let me use the following example:</p>\n\n<pre><code>enum class Type {\n  TYPEA,\n  TYPEB\n};\n\n// Predefined in libraries.\nclass BaseA {...};\nclass BaseB {...};\n\nclass Foo {\n  template &lt;typename Derived, Type type&gt;\n  void foo();\n};\n\n// User-derived\nclass DerivedA : public BaseA {};\nclass DerivedB : public BaseB {};\n</code></pre>\n\n<p>Normally we need two template typenames for calling the member foo.</p>\n\n<pre><code>Foo obj;\nobj.foo&lt;DerivedA, Type::TypeA&gt;()\nobj.foo&lt;DerivedB, Type::TypeB&gt;();\n</code></pre>\n\n<p>However, this native approach seems lengthy because the second template argument <code>Type::TypeA</code> and <code>Type::TypeB</code> can obviously be deduced by compiler through the first argument <code>DerivedA</code> and <code>DerivedB</code>, if they are derived from pre-defined base properly. I notice that c++11 provides <code>is_base_of</code> template but I am not sure how to use it in my case. To be more specific, below is the expected solution:</p>\n\n<pre><code>obj.foo&lt;DerivedA&gt;();  // Automatically deduce type = Type::TypeA\nobj.foo&lt;DerivedB&gt;();  // Automatically deduce type = Type::TypeB\n</code></pre>\n\n<p>And if the compile fails to deduce the <code>Type</code> from the first typename, it should it just goes back to the normal declaration <code>obj.foo&lt;MyClass, MyType&gt;</code> where <code>MyType</code> is either <code>Type::TypeA</code> or <code>Type::TypeB</code>. </p>\n"}, {"tags": ["c++", "string", "input"], "comments": [{"owner": {"reputation": 19, "user_id": 3806870, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/If7AV.png?s=128&g=1", "display_name": "HolyMeow", "link": "https://stackoverflow.com/users/3806870/holymeow"}, "edited": false, "score": 0, "creation_date": 1464192681, "post_id": 37442288, "comment_id": 62387495, "body": "ah... I already checked through that thread. I will just try else where"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1464194186, "post_id": 37442288, "comment_id": 62388409, "body": "Have you tried <code>std::istringstream</code>?  I&#39;ve heard that you can use the stream extraction operators on it."}, {"owner": {"reputation": 19, "user_id": 3806870, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/If7AV.png?s=128&g=1", "display_name": "HolyMeow", "link": "https://stackoverflow.com/users/3806870/holymeow"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1464207670, "post_id": 37442288, "comment_id": 62395761, "body": "@ThomasMatthews Yes! I have been trying it, and I was able to make a little progress on it."}, {"owner": {"reputation": 19, "user_id": 3806870, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/If7AV.png?s=128&g=1", "display_name": "HolyMeow", "link": "https://stackoverflow.com/users/3806870/holymeow"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1464207724, "post_id": 37442288, "comment_id": 62395786, "body": "(also, this was for a programming site called &#39;CodinGame&#39;, and wasn&#39;t sure what are default libraries are. But I am getting more familiarity as it goes. Thanks y&#39;ll)"}], "owner": {"reputation": 19, "user_id": 3806870, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/If7AV.png?s=128&g=1", "display_name": "HolyMeow", "link": "https://stackoverflow.com/users/3806870/holymeow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "closed_date": 1464192016, "answer_count": 0, "score": 0, "last_activity_date": 1464191901, "creation_date": 1464191901, "question_id": 37442288, "link": "https://stackoverflow.com/questions/37442288/how-to-read-a-integer-value-from-a-string-in-c", "closed_reason": "Duplicate", "title": "How to read a integer value from a string in C++?", "body": "<p>For example, let say a string is \"1 3 -1 3 4 5\" and i just simply wanted to extract all those integers. </p>\n\n<p>I am looking for easy way to do this. Most others I have seen need to use stodi.h class, and I am looking to avoid using additional class. </p>\n"}, {"tags": ["c++", "windows", "visual-studio", "driver"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1464192008, "post_id": 37442253, "comment_id": 62387082, "body": "What about Eclipse CDT, Qt-Creator, Code Blocks and all the plethora of IDE&#39;s out there? The question is which underlying toolchain you use. And yes, MinGw would serve you well on windows."}, {"owner": {"reputation": 4587, "user_id": 3447827, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n08Vz.jpg?s=128&g=1", "display_name": "durbnpoisn", "link": "https://stackoverflow.com/users/3447827/durbnpoisn"}, "edited": false, "score": 2, "creation_date": 1464192114, "post_id": 37442253, "comment_id": 62387149, "body": "You can use ANY text editor.  You could use Notepad if you wanted.  The whole point of an IDE is to help tie things together for you.  So if you want to avoid using VS, you just need to learn all about how VS does what it does."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1464195377, "post_id": 37442253, "comment_id": 62389061, "body": "<i>@Jake</i> I&#39;ve been trying to keep my answer as neutral and recommendation free as possible. Though you should note, that questions that actually ask for recommendation of a specific tool or 3rd party resource are <a href=\"http://stackoverflow.com/help/on-topic\">off-topic here</a>."}, {"owner": {"reputation": 101, "user_id": 6381964, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154204489437726/picture?type=large", "display_name": "Jake Samz", "link": "https://stackoverflow.com/users/6381964/jake-samz"}, "edited": false, "score": 0, "creation_date": 1464196086, "post_id": 37442253, "comment_id": 62389461, "body": "And I get that. I must have misread the rules and apologize. The main question was if I was forced to use VS so I thought it was okay, as a follow up question, to ask for recommendations if I received a certain answer. I&#39;ll edit it quick and watch out for this in the future. Much appreciated."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1464196457, "post_id": 37442253, "comment_id": 62389643, "body": "@JakeSamz Banged everything in shape a bit and retracted my close vote."}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 0, "creation_date": 1464197936, "post_id": 37442253, "comment_id": 62390471, "body": "Unfortunately using a solution based on a non-Microsoft compilers isn&#39;t going to be as easy the comments and answers makes out. In particular any solution based on MinGW (GCC) isn&#39;t going to be a drop in replacement. Microsoft&#39;s headers don&#39;t work with GCC. The only reason why you can compile Windows applications with it is because MinGW comes with its own version of most of the Windows SDK headers. MinGW&#39;s support for the Windows DDK headers is much more limited."}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 0, "creation_date": 1464198190, "post_id": 37442253, "comment_id": 62390625, "body": "I should also add that Visual Studio 2015 Community Edition is free for commercial use if your company is small enough. It can be used by up to 5 users at the same company if the company isn&#39;t too big (&gt;250 PCs or &gt;$1 Million US Dollars in annual revenue),"}, {"owner": {"reputation": 101, "user_id": 6381964, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154204489437726/picture?type=large", "display_name": "Jake Samz", "link": "https://stackoverflow.com/users/6381964/jake-samz"}, "reply_to_user": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 0, "creation_date": 1464198996, "post_id": 37442253, "comment_id": 62391077, "body": "@RossRidge Do you have experience using MinGW/GCC with the Windows DDK? Just curious how much of a headache it would be to use MinGW with the DDK considering configuration speed is something we take into account. If we would be spending days/weeks messing with configuration settings, I think we would rather drop the money on VS because of the development support."}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 0, "creation_date": 1464216377, "post_id": 37442253, "comment_id": 62399530, "body": "I&#39;ve never tried to use GCC with the Windows DDK, but if any thing like tying to use GCC with the Windows SDK then it will be days/weeks of work to get the Windows DDK headers to compile without errors. Configuration settings shouldn&#39;t take too long to figure out, it&#39;s mainly that you need some different linker settings and there seems to be a few examples on the Web."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "reply_to_user": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 0, "creation_date": 1464256252, "post_id": 37442253, "comment_id": 62414411, "body": "The Visual Studio IDE has nothing to do with Microsoft&#39;s C++ compiler. As I read it, the question is <i>specifically</i> about IDEs, and makes no mention of a desire to use a different compiler, such as GCC. @ross I&#39;m pretty sure that the WDK/DDK is a free download, and includes Microsoft&#39;s compiler. It certainly used to be."}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1464281503, "post_id": 37442253, "comment_id": 62432276, "body": "@CodyGray I don&#39;t see why you&#39;ve addressed me in your comment, but if you&#39;re trying to help the original poster you should make it more clear that you&#39;re suggesting he can a get free copy of Microsoft&#39;s compiler and use it in combination with some IDE other than Visual Studio."}, {"owner": {"reputation": 101, "user_id": 6381964, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154204489437726/picture?type=large", "display_name": "Jake Samz", "link": "https://stackoverflow.com/users/6381964/jake-samz"}, "reply_to_user": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 0, "creation_date": 1464295446, "post_id": 37442253, "comment_id": 62439939, "body": "I got the WDK/DDK for free. @RossRidge You were certainly correct: VS was super easy to develop Windows drivers on, and it also allowed me to use built-in driver tools to deploy and test on my VM. Cheers gents!"}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 6381964, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154204489437726/picture?type=large", "display_name": "Jake Samz", "link": "https://stackoverflow.com/users/6381964/jake-samz"}, "edited": false, "score": 0, "creation_date": 1464195022, "post_id": 37443170, "comment_id": 62388884, "body": "I know there are other resources available than the MSDN on Windows Drivers. I also said I Googled and searched this site for related information. Regardless, this was very helpful. Do you know of any good reference materials on this?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1464195071, "post_id": 37443170, "comment_id": 62388905, "body": "<i>&quot;they may suggest using C# with Visual Studio&quot;</i> <a href=\"http://www.icsharpcode.net/opensource/sd/\" rel=\"nofollow noreferrer\">SharpDevelop</a> is great to overcome this."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1464256523, "post_id": 37443170, "comment_id": 62414581, "body": "I don&#39;t think anyone is going to suggest writing drivers in C#. I mean, I guess you could write certain drivers in managed code, like audio drivers, which I believe run in user-mode now. But there will be no writing kernel-mode software in C#, and even if you found a way to overcome the technical limitations, I would strongly encourage you not to try and do so, for the sake of your users."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1464256683, "post_id": 37443170, "comment_id": 62414696, "body": "Also, this statement that the final executable leaves no clues as to the language or toolchain used to create it is certainly wrong. Aside from the fact that compilers, and especially optimizers, have characteristic signatures in how they compile certain pieces of code, information about the toolchain, linked libraries, and etc. are generally included in the metadata unless you take specific care to strip them out. (Not that any of this disagrees with the larger point that it <i>doesn&#39;t matter</i> which compiler/toolchain you use.)"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1464274878, "post_id": 37443170, "comment_id": 62427887, "body": "@CodyGray, so you are saying that the executable from compiled BASIC, FORTRAN, C, and Compiled LISP have features that tell which toolchain they were produced from.  For example, I can use GNU Fortran and GNU C command line to create executables and from these executables on can determine which IDE I used (eg. Eclipse, Code Blocks, none, etc)."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1464194597, "creation_date": 1464194597, "answer_id": 37443170, "question_id": 37442253, "link": "https://stackoverflow.com/questions/37442253/can-i-use-an-ide-other-than-visual-studio-to-develop-a-windows-gpio-driver/37443170#37443170", "title": "Can I use an IDE other than Visual Studio to develop a Windows GPIO Driver?", "body": "<p>Yes, you can use any toolchain you want to develop drivers for Windows.  You can use any editor and compiler.  </p>\n\n<p>You need to <em>focus</em> on the requirements of a Windows driver.  Microsoft is always going to recommend you use their products.  For example, they may suggest using C# with Visual Studio.  Microsoft may make driver development easier by using their tools (more money for them).</p>\n\n<p>The final \"executable\" driver leaves no clues as to the language or toolchain used to create it.  </p>\n\n<p>The are other resources available for information about Windows Drivers than MSDN.  </p>\n"}, {"comments": [{"owner": {"reputation": 101, "user_id": 6381964, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154204489437726/picture?type=large", "display_name": "Jake Samz", "link": "https://stackoverflow.com/users/6381964/jake-samz"}, "edited": false, "score": 0, "creation_date": 1464195711, "post_id": 37443240, "comment_id": 62389264, "body": "Thank you so much! For clarification, would toolchain have been a better choice of words for me to use than IDE in this case?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 101, "user_id": 6381964, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154204489437726/picture?type=large", "display_name": "Jake Samz", "link": "https://stackoverflow.com/users/6381964/jake-samz"}, "edited": false, "score": 0, "creation_date": 1464196102, "post_id": 37443240, "comment_id": 62389473, "body": "@JakeSamz <i>&quot;would toolchain have been a better choice of words&quot;</i> Probably yes. Because the <i>toolchain</i> is the essential thing needed to compile code for a particular target machine environment. You can even use cross-toolchains on a linux environment to compile code for a windows target (again MinGw supports that for example)."}, {"owner": {"reputation": 101, "user_id": 6381964, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154204489437726/picture?type=large", "display_name": "Jake Samz", "link": "https://stackoverflow.com/users/6381964/jake-samz"}, "edited": false, "score": 0, "creation_date": 1464196541, "post_id": 37443240, "comment_id": 62389697, "body": "That is very good to know considering I have used cross-toolchains (GCC for building coreboot with Tianocore payloads). So when MSDN/other sources talk about creating a UMDF or KMDF project for a Windows Driver in VS, what does that mean in regards to other IDEs/Toolchains?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 101, "user_id": 6381964, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154204489437726/picture?type=large", "display_name": "Jake Samz", "link": "https://stackoverflow.com/users/6381964/jake-samz"}, "edited": false, "score": 0, "creation_date": 1464197196, "post_id": 37443240, "comment_id": 62390060, "body": "@JakeSamz I didn&#39;t check that deeply, but my probably best research came up with <a href=\"https://myworks2012.wordpress.com/2014/05/26/how-to-compile-windows-x64-driver-using-mingw-w64-gcc/\" rel=\"nofollow noreferrer\">this</a>. But that&#39;s a different question deviating from your original one too far now. And sorry, I&#39;m not an expert regarding windows driver development."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 0, "last_activity_date": 1464196405, "last_edit_date": 1464196405, "creation_date": 1464194916, "answer_id": 37443240, "question_id": 37442253, "link": "https://stackoverflow.com/questions/37442253/can-i-use-an-ide-other-than-visual-studio-to-develop-a-windows-gpio-driver/37443240#37443240", "title": "Can I use an IDE other than Visual Studio to develop a Windows GPIO Driver?", "body": "<blockquote>\n  <p>So the first question would be: Can I use an IDE other than Visual Studio to develop a Windows GPIO Driver and if so, what would I need from VS to do so?</p>\n</blockquote>\n\n<p>Yes, you can.</p>\n\n<p>There's no officially <em>recommended</em> or <em>best</em> IDE to choose. Just get one that fit's your comforts regarding</p>\n\n<ul>\n<li>syntax highlighting</li>\n<li>debugging support</li>\n<li>toolchain support</li>\n<li>intellisense support when typing code</li>\n<li>etc. frills and gadgets ...</li>\n</ul>\n\n<p>The question merely is, if you are required to use the MSVC compiler to develop any artifacts (executables, shared libraries) for a windows target.</p>\n\n<p>And the answer fortunately is: <strong>No.</strong></p>\n\n<p>There are alternative free toolchains like MinGw GCC or Clang available, and you can use any IDE that supports to choose support for that toolchain.</p>\n\n<p>You can even use a simple text editor like Notepad++.</p>\n\n<blockquote>\n  <p>Can I use an (open source/free) IDE other than Visual Studio, considering I am developing on Windows? </p>\n</blockquote>\n\n<p>You can do anything you need using the free tools available. </p>\n\n<p>But take care about correct licensing (regarding standard library implementations etc.), supposed you're developing commercial product.</p>\n"}], "owner": {"reputation": 101, "user_id": 6381964, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154204489437726/picture?type=large", "display_name": "Jake Samz", "link": "https://stackoverflow.com/users/6381964/jake-samz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "closed_date": 1464792581, "accepted_answer_id": 37443240, "answer_count": 2, "score": 1, "last_activity_date": 1464196405, "creation_date": 1464191797, "last_edit_date": 1464195822, "question_id": 37442253, "link": "https://stackoverflow.com/questions/37442253/can-i-use-an-ide-other-than-visual-studio-to-develop-a-windows-gpio-driver", "closed_reason": "Needs more focus", "title": "Can I use an IDE other than Visual Studio to develop a Windows GPIO Driver?", "body": "<p>My company is interested in developing a GPIO Driver for Windows to use with proprietary peripherals and would like to save money by using an IDE other than Visual Studio. </p>\n\n<p>After researching on Google, the MSDN, and StackOverflow, I was unable to determine if I am able to develop a Windows GPIO Driver using an IDE other than Visual Studio. The MSDN only gives tips on how to develop a Windows GPIO driver using Visual Studio and the StackOverflow questions pertain to specific development issues, while Google gave me a combination of the two. None of the methods gave me any kind of concrete or even ballpark answer, so I decided to post my first StackOverflow question. </p>\n\n<p>If it is useful, I am using Windows 10 but I have access to, and can develop on, a Windows 7 system as well. </p>\n\n<p>So the first question would be: Can I use an IDE other than Visual Studio to develop a Windows GPIO Driver and if so, what would I need from VS to do so? </p>\n\n<p>Can I use an (open source/free) IDE other than Visual Studio, considering I am developing on Windows?</p>\n\n<p>If I have to use Visual Studio, what is the reason that another IDE would not work (i.e. missing tools, missing libraries, poor Microsoft design decision, etc)?</p>\n"}, {"tags": ["c++", "inheritance", "protected"], "comments": [{"owner": {"reputation": 4332, "user_id": 1517244, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/69e56ba57db6774aa70eca1d8d5684aa?s=128&d=identicon&r=PG", "display_name": "Jimbo", "link": "https://stackoverflow.com/users/1517244/jimbo"}, "edited": false, "score": 0, "creation_date": 1464191243, "post_id": 37442009, "comment_id": 62386496, "body": "Try using <code>this-&gt;first</code> to access the class member"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464191388, "post_id": 37442009, "comment_id": 62386626, "body": "@NathanOliver, beat me by 10 secs!"}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1464191461, "post_id": 37442009, "comment_id": 62386677, "body": "Try posting an <a href=\"http://stackoverflow.com/help/mcve\">MVCE</a> -- the code you&#39;ve posted looks fine.  Perhaps you accidentally declared <code>search</code> as <code>static</code> in the code you&#39;ve elided?"}, {"owner": {"reputation": 589, "user_id": 4882506, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62d78be71d1cc3e8a2bd98b88daeba05?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Tarng", "link": "https://stackoverflow.com/users/4882506/tony-tarng"}, "reply_to_user": {"reputation": 4332, "user_id": 1517244, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/69e56ba57db6774aa70eca1d8d5684aa?s=128&d=identicon&r=PG", "display_name": "Jimbo", "link": "https://stackoverflow.com/users/1517244/jimbo"}, "edited": false, "score": 0, "creation_date": 1464191505, "post_id": 37442009, "comment_id": 62386718, "body": "@Jimbo Yes, it works. Do you mind elaborating why this is the case?"}, {"owner": {"reputation": 4332, "user_id": 1517244, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/69e56ba57db6774aa70eca1d8d5684aa?s=128&d=identicon&r=PG", "display_name": "Jimbo", "link": "https://stackoverflow.com/users/1517244/jimbo"}, "edited": false, "score": 1, "creation_date": 1464191594, "post_id": 37442009, "comment_id": 62386787, "body": "It&#39;s how you access member variables linked to the object instance. Without it the compiler doesn&#39;t know to look &quot;inside&quot; the instance of the object that the method was called on :)"}], "owner": {"reputation": 589, "user_id": 4882506, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62d78be71d1cc3e8a2bd98b88daeba05?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Tarng", "link": "https://stackoverflow.com/users/4882506/tony-tarng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "closed_date": 1464191353, "answer_count": 0, "score": 0, "last_activity_date": 1464191150, "creation_date": 1464191150, "question_id": 37442009, "link": "https://stackoverflow.com/questions/37442009/accessing-protected-members-of-a-class", "closed_reason": "Duplicate", "title": "Accessing protected members of a class", "body": "<p>I have two class, linkedList and orderedLinkedList. The class orderedLinkedList inherits from linkedList as follows.</p>\n\n<pre><code>template&lt;class Type&gt;  //definition of node\nstruct node\n{\n    Type info;\n    node&lt;Type&gt; *link;\n};\n\ntemplate&lt;class Type&gt;  \nclass linkedList\n{\nprotected:\n    int count;          // no. of elements in the list\n    node&lt;Type&gt; *first;  // pointer to the first node\n    node&lt;Type&gt; *last;   // pointer to the last node\n\npublic:\n    // some functions\n}\n\ntemplate&lt;class Type&gt;\nclass orderedLinkedList: public linkedList&lt;Type&gt;\n{\npublic:\n    // some functions\n};\n</code></pre>\n\n<p>To my knowledge, protected members are accessible in the class that defines them and in classes that inherit from that class. However, a compile time error pops up saying: Use of undeclared identifier 'first' in the following function.</p>\n\n<pre><code>template&lt;class Type&gt;\nbool orderedLinkedList&lt;Type&gt;::search(const Type&amp; x) const\n{\n    node&lt;Type&gt; *p;\n\n    p = first; // &lt;- Use of undeclared identifier 'first'\n    while (p != NULL &amp;&amp; p-&gt;info &lt; x)   \n        p = p-&gt;link;\n\n    return (p != NULL &amp;&amp; p-&gt;info == x);\n}\n</code></pre>\n\n<p>I have tried making the pointer first public, and it doesn't work as well. Is there something fundamental I am not getting about inheritance? Thanks in advance.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1464190845, "post_id": 37441839, "comment_id": 62386165, "body": "Why not have each object overload the <code>operator &lt;&lt;</code> and make it responsible for printing itself?  Then you just call <code>operator &lt;&lt;</code> on each element in the container."}, {"owner": {"reputation": 867, "user_id": 3666471, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/c40580078a52eb4b27cf74ea4cb99d3a?s=128&d=identicon&r=PG&f=1", "display_name": "user3666471", "link": "https://stackoverflow.com/users/3666471/user3666471"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464190997, "post_id": 37441839, "comment_id": 62386289, "body": "I guess this question isn&#39;t limited to only printing, but parsing the vector as well. In which case I can&#39;t get away with only overloading the <code>operator&lt;&lt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1464192928, "post_id": 37442169, "comment_id": 62387663, "body": "<code>for_each</code> can be applied to arbitrary ranges; ranged for loops &quot;only&quot; work with containers."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1464193093, "post_id": 37442169, "comment_id": 62387766, "body": "@PeteBecker, while it is true on principle, I do recall only one real case of iterating over arbitrary range - between lower_bound and upper_bound elements. But iterating over full container (as in OP&#39;s example) outweights this by million to one. And once we have ranges, we won&#39;t need for_each at all."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1464194124, "post_id": 37442169, "comment_id": 62388368, "body": "quite the contrary, once we have ranges, for each will stop being uglier than range based for loop, and then we&#39;ll use it more. for_each does not allow early exit, so if you don&#39;t need early exit, that&#39;s what you should use."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": -1, "last_activity_date": 1464193181, "last_edit_date": 1464193181, "creation_date": 1464191556, "answer_id": 37442169, "question_id": 37441839, "link": "https://stackoverflow.com/questions/37441839/print-complex-objects-using-for-each/37442169#37442169", "title": "Print complex objects using for_each", "body": "<p>I strongly believe that <code>for_each</code> has mostly outlived itself. I see no benefit in it when compared with range loops. The code actually looks cleaner, more straitghtforward, doesn't require ad-hoc classess or lambdas when used like this:</p>\n\n<pre><code>void print()\n{\n    vector&lt;B&gt; vecB;\n    for(const auto&amp; elem : vecB) {\n       std::cout &lt;&lt; elem;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1464193643, "creation_date": 1464193643, "answer_id": 37442906, "question_id": 37441839, "link": "https://stackoverflow.com/questions/37441839/print-complex-objects-using-for-each/37442906#37442906", "title": "Print complex objects using for_each", "body": "<blockquote>\n  <p>My main point of concern is calling the <code>(*this)</code> in the <code>for_each</code> within the functor itself. Is that safe to do?</p>\n</blockquote>\n\n<p>It cannot be answered in general but in your case, it is safe. </p>\n\n<p>The call to <code>for_each</code> makes a copy of the <code>PrintStruct</code> object and uses it. The <code>ostream_</code> member of the copy will be reference the same object as the <code>ostream_</code> member of the original <code>PrintStruct</code>. There should be no problem with it.</p>\n"}], "owner": {"reputation": 867, "user_id": 3666471, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/c40580078a52eb4b27cf74ea4cb99d3a?s=128&d=identicon&r=PG&f=1", "display_name": "user3666471", "link": "https://stackoverflow.com/users/3666471/user3666471"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1464193643, "creation_date": 1464190709, "question_id": 37441839, "link": "https://stackoverflow.com/questions/37441839/print-complex-objects-using-for-each", "title": "Print complex objects using for_each", "body": "<p>I have a complex object that looks something like this:</p>\n\n<pre><code>struct A\n{\n    int a;\n}\n\nstruct B\n{\n    int b;\n    vector&lt;A&gt; vecA;\n}\n</code></pre>\n\n<p>I am current printing out a vector of B in the following way:</p>\n\n<pre><code>struct PrintStruct\n{\n    ostream &amp;ostream_;\n    PrintStruct(ostream &amp;stream) : ostream_(stream) {}\n\n    void operator()(const A&amp; elementA)\n    {\n        ostream_ &lt;&lt; elementA.a;\n    }\n\n    void operator()(const B&amp; elementB)\n    {\n        ostream_ &lt;&lt; elementB.b;\n        for_each(elementB.vecA.begin(), elementB.vecA.end(), (*this));\n    }\n}\n\nvoid print()\n{\n    vector&lt;B&gt; vecB;\n    for_each(vecB.begin(), vecB.end(), PrintStruct(cout));\n}\n</code></pre>\n\n<p>Is that necessarily the best way to do it? My main point of concern is calling the <code>(*this)</code> in the <code>for_each</code> within the functor itself. Is that safe to do? I think it should be, but I'm not sure if there will be any unintended consequences? </p>\n"}, {"tags": ["c++", "header", "header-files", "tensorflow"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464189642, "post_id": 37441388, "comment_id": 62385299, "body": "Did you install the library?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1464189709, "post_id": 37441388, "comment_id": 62385360, "body": "You are using Bazel of course?"}, {"owner": {"reputation": 700, "user_id": 5668464, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/caaa9a33119f603eebf2ace9844c61c2?s=128&d=identicon&r=PG&f=1", "display_name": "ArafatK", "link": "https://stackoverflow.com/users/5668464/arafatk"}, "edited": false, "score": 0, "creation_date": 1464189786, "post_id": 37441388, "comment_id": 62385421, "body": "I have installed the library and its working. This is completely different though."}, {"owner": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "edited": false, "score": 0, "creation_date": 1464190034, "post_id": 37441388, "comment_id": 62385603, "body": "Does #include &lt;tensorflow....&gt; work? The &lt;&gt; and &quot;&quot; operate with different paths resulting in a different file lookup where &quot;&quot; is starting in the project directory and &lt;&gt; is starting at wherever the system include path is."}, {"owner": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "edited": false, "score": 2, "creation_date": 1464190569, "post_id": 37441388, "comment_id": 62385974, "body": "@ArafatK Where is the tensorflow directory located relative to your project directory? What environment are you in (windows / linux / osx)? The error message is saying that &lt;project paths&gt;/tensorflow/core/lib/core/stringpiece.h is not found. There are ways to fix this, but it depends on the system. If you&#39;re using gcc you could add the compiler option -I&lt;path&gt; where &lt;path&gt; = the absolute path location of where the tensorflow directory exists. In MSVC++ you&#39;ll have to do something different."}, {"owner": {"reputation": 700, "user_id": 5668464, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/caaa9a33119f603eebf2ace9844c61c2?s=128&d=identicon&r=PG&f=1", "display_name": "ArafatK", "link": "https://stackoverflow.com/users/5668464/arafatk"}, "edited": false, "score": 0, "creation_date": 1464191205, "post_id": 37441388, "comment_id": 62386466, "body": "Thanks it works. I am getting the error       /tmp/ccag4ztO.o: In function <code>tensorflow::Hash64(char const*, unsigned long)&#39;: stringpiece.cc:(.text._ZN10tensorflow6Hash64EPKcm[_ZN10tenso&zwnj;&#8203;rflow6Hash64EPKcm]+0&zwnj;&#8203;x29): undefined reference to </code>tensorflow::Hash64(char const*, unsigned long, unsigned long long)&#39; collect2: error: ld returned 1 exit status  But I am sure its a different issue. I just have one question. Is it even possible to run files like this way ?"}, {"owner": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "edited": false, "score": 0, "creation_date": 1464192414, "post_id": 37441388, "comment_id": 62387335, "body": "@ArafatK Possible to run files how? It appears as though you are attempting to use parts of the tensorflow library without pulling in everything from the library. If it&#39;s opensource it&#39;s possible. You&#39;ll need to pull in the source files containing the functionality you use into your project along with any of it&#39;s dependencies, or otherwise pull out the functionality you want into your code base. If it&#39;s not open source, and you are dealing with a compiled binary without access to source code, it&#39;s all or nothing. This is only detailing how, not if you should of course."}, {"owner": {"reputation": 700, "user_id": 5668464, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/caaa9a33119f603eebf2ace9844c61c2?s=128&d=identicon&r=PG&f=1", "display_name": "ArafatK", "link": "https://stackoverflow.com/users/5668464/arafatk"}, "reply_to_user": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "edited": false, "score": 0, "creation_date": 1465241223, "post_id": 37441388, "comment_id": 62809087, "body": "@Aumnayan Thanks a lot for the help. I just have another question as a follow up to your comment.      And I would really really appreciate if you could help me out on <a href=\"http://stackoverflow.com/questions/37622713/using-tensorflow-c-shared-library\">this</a> one."}, {"owner": {"reputation": 6465, "user_id": 1459669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WW5ah.jpg?s=128&g=1", "display_name": "no\u0265\u0287\u028e\u0500\u028ez\u0250\u0279\u0186", "link": "https://stackoverflow.com/users/1459669/no%c9%a5%ca%87%ca%8e%d4%80%ca%8ez%c9%90%c9%b9%c6%86"}, "edited": false, "score": 0, "creation_date": 1469383970, "post_id": 37441388, "comment_id": 64501311, "body": "this is wayyyy too broad did you google <i>at all</i>?"}], "owner": {"reputation": 700, "user_id": 5668464, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/caaa9a33119f603eebf2ace9844c61c2?s=128&d=identicon&r=PG&f=1", "display_name": "ArafatK", "link": "https://stackoverflow.com/users/5668464/arafatk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1464190272, "creation_date": 1464189573, "last_edit_date": 1592644375, "question_id": 37441388, "link": "https://stackoverflow.com/questions/37441388/unable-to-understand-how-header-files-work", "title": "Unable to understand how header files work?", "body": "<p>I am not sure how to properly frame by question but I will try. I have cloned tensorflow repository on my pc and I am trying to run <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/lib/core/stringpiece.cc\" rel=\"nofollow noreferrer\">this</a> file.\nSo I added the following lines to the end of the program</p>\n<pre><code>int main(int argc, char const *argv[])\n{\n  tensorflow::StringPiece s20(&quot;hello&quot;);\n  std:: cout &lt;&lt; s20.data() &lt;&lt; std::endl;\n  return 0;\n}\n</code></pre>\n<p>Then I get the error</p>\n<pre><code>stringpiece.cc:16:50: fatal error: tensorflow/core/lib/core/stringpiece.h: No such file or directory\n #include &quot;tensorflow/core/lib/core/stringpiece.h&quot;\n                                                  ^\ncompilation terminated.\n</code></pre>\n<p>I can make the code work when I take all the related header files and put them in a separate folder and make a few changes to headers but how can I make this work directly. I also need to understand how</p>\n<pre><code>#include &quot;tensorflow/core/lib/core/stringpiece.h&quot;\n</code></pre>\n<p>works.<br />\nBasically what I am trying to say is that,I want to run specific subparts of the C++ API without affecting the headers at all.  And yes I have installed tensorflow and its working.</p>\n"}, {"tags": ["c++", "floating-point", "game-engine", "epsilon"], "comments": [{"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 1, "creation_date": 1464189667, "post_id": 37441325, "comment_id": 62385325, "body": "32bit floating points use 1 bit for sign, 7 bits for mantissa and 24bits for exponent. i don&#39;t know how he calculated it really, but he may have ruled out subnormal values so i suspect he just used ... i dont know how actually."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 1, "creation_date": 1464190174, "post_id": 37441325, "comment_id": 62385686, "body": "@Shark: IEEE-754 uses 1+8+24 bits (with implied leading 1)."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1464190233, "post_id": 37441325, "comment_id": 62385723, "body": "So to answer the question, solve for E such that 2^(E-23) is greater than 1/30..."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1464190235, "post_id": 37441325, "comment_id": 62385728, "body": "The question is not about <b>epsilon</b>. Epsilon is the smallest number that you can add to 1.0 and get a different value. It&#39;s determined by the internals of the floating-point representation, and does not depend in any way on how many operations you&#39;ve performed. In C++ you can get that value from <code>std::numeric_limits&lt;float&gt;::epsilon()</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1464190249, "post_id": 37441325, "comment_id": 62385741, "body": "@KerrekSB But that is 33 bits.  Does that mean we cannot have 32 bit IEEE-754 floats in C++?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464190268, "post_id": 37441325, "comment_id": 62385754, "body": "@NathanOliver: The leading 1 is not stored, so you get an extra free bit. In other words, the significand has 24 bits, but it&#39;s of the form 1.nnnnn, and only the 23 fractional bits are stored."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1464190293, "post_id": 37441325, "comment_id": 62385778, "body": "@KerrekSB Cool.  I like free bits.  Thanks for the information."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 1, "creation_date": 1464190565, "post_id": 37441325, "comment_id": 62385969, "body": "This strikes me as an XY problem. I&#39;d back up and wonder: &quot;why would you use a 32-bit (or other size of) float to count seconds?&quot; The answer is: &quot;If you were at all sensible, you wouldn&#39;t.&quot; If you want to count seconds, use an integer. If you want greater precision, count milliseconds or microseconds, or whatever--but still use an integer."}, {"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1464190726, "post_id": 37441325, "comment_id": 62386077, "body": "perhaps the author just thought of it as a <code>long long</code> ? I mean, i get where he&#39;s probably going with it - to use variable framerate and to actually calculate how much &quot;gametime&quot; has passed in the real time and simulate that. but the method behind is mysterious :) oh i get it. it&#39;s due to the imprecision. after a certain exponent is reached, adding a small value to it doesn&#39;t change the value the number is represented by. took me a minute. :)"}, {"owner": {"reputation": 2670, "user_id": 346104, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/31duc.jpg?s=128&g=1", "display_name": "franji1", "link": "https://stackoverflow.com/users/346104/franji1"}, "reply_to_user": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1464205355, "post_id": 37441325, "comment_id": 62394607, "body": "@Shark - 8 bits for Exponent (not 7 for <i>Mantissa</i>) and 24 bits for Mantissa (not 24 for <i>Exponent</i>;  1 of those 24 is implied)"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1464206920, "post_id": 37441325, "comment_id": 62395374, "body": "@JerryCoffin you&#39;re correct that a different approach would have been better. But this is still an interesting question as asked. Suppose for example you had inherited such a system, and bug reports kept coming in that the program kept crashing after 13 days?"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1464208782, "post_id": 37441325, "comment_id": 62396384, "body": "@MarkRansom: I don&#39;t deny that it&#39;s an interesting case--I just think it&#39;d be more interesting if applied to a problem that (at least initially) sounded like if justified using floating point (but maybe it really does, and I&#39;m just tainted by decades of having seen problems from people using floating point for things like money."}, {"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "reply_to_user": {"reputation": 2670, "user_id": 346104, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/31duc.jpg?s=128&g=1", "display_name": "franji1", "link": "https://stackoverflow.com/users/346104/franji1"}, "edited": false, "score": 0, "creation_date": 1464248875, "post_id": 37441325, "comment_id": 62409595, "body": "@franji1 fair enough, my mistake. that&#39;s what i meant but i expressed myself wrongly (and was wrong by 1 bit, a standard &quot;off-by-one&quot; mistake :D)"}], "answers": [{"comments": [{"owner": {"reputation": 880, "user_id": 4515030, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3EsAY.jpg?s=128&g=1", "display_name": "izaak_pyzaak", "link": "https://stackoverflow.com/users/4515030/izaak-pyzaak"}, "edited": false, "score": 0, "creation_date": 1464204206, "post_id": 37445885, "comment_id": 62394007, "body": "As @Jerry Coffin points out. Really, you should use an <code>int</code> type. But I guess they are showing edge cases."}], "tags": [], "owner": {"reputation": 880, "user_id": 4515030, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3EsAY.jpg?s=128&g=1", "display_name": "izaak_pyzaak", "link": "https://stackoverflow.com/users/4515030/izaak-pyzaak"}, "is_accepted": false, "score": 1, "last_activity_date": 1464204633, "last_edit_date": 1464204633, "creation_date": 1464204014, "answer_id": 37445885, "question_id": 37441325, "link": "https://stackoverflow.com/questions/37441325/how-to-calculate-32-bit-floating-point-epsilon/37445885#37445885", "title": "How to calculate 32-bit floating-point epsilon?", "body": "<p>This is due to zones of expressibility in floating point representation. \nCheck out <a href=\"https://www.doc.ic.ac.uk/~herbert/teaching/CA06-FP-1.pdf\" rel=\"nofollow\">this lecture</a> from my uni.</p>\n\n<p>As the exponent gets larger, the jump on the really number line between the values actually represented increases; when the exponent is low, the density of representation is high. To give an example, imaging decimal numbers with a finite number of place values. given 1.0001e1 and 1.0002e1 the difference is 0.0001 between the two values. But if the exponent increases 1.0001-10 1.0002-10 the difference between the two is 0.000100135. Obviously this gets larger as the exponent increases. In the case you talk about, it is possible that the jump becomes so large, the increase does not promote a rounding increase of the least significant bit</p>\n\n<p>Interestingly, towards the limits of the representations, the accuracy of a larger float type is worse! Simply because the increase in the bit pattern in the mantissa jumps much further on the number line when more bits are available for the exponent; as is the case for double, over float</p>\n"}, {"comments": [{"owner": {"reputation": 171, "user_id": 4974001, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/65fecb2973c1c52d1d898ec8b0aa5525?s=128&d=identicon&r=PG&f=1", "display_name": "shayan", "link": "https://stackoverflow.com/users/4974001/shayan"}, "edited": false, "score": 0, "creation_date": 1509226876, "post_id": 37447603, "comment_id": 80935922, "body": "&quot;So if x = 2^k, then h = 2^k-23 since a float has a 24-bit significand&quot; I can&#39;t understand this part of your answer. why h is 2^(k-23)?"}], "tags": [], "owner": {"reputation": 7214, "user_id": 392585, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5ac7b1da0f2e9107b5020f88023a15e5?s=128&d=identicon&r=PG", "display_name": "Simon Byrne", "link": "https://stackoverflow.com/users/392585/simon-byrne"}, "is_accepted": true, "score": 9, "last_activity_date": 1464251921, "last_edit_date": 1464251921, "creation_date": 1464210300, "answer_id": 37447603, "question_id": 37441325, "link": "https://stackoverflow.com/questions/37441325/how-to-calculate-32-bit-floating-point-epsilon/37447603#37447603", "title": "How to calculate 32-bit floating-point epsilon?", "body": "<p>When the result of a floating point computation can't be represented exactly, it is rounded to the nearest value. So you want to find the smallest value <em>x</em> such that the increment <em>f</em> = 1/30 is less than half the width <em>h</em> between <em>x</em> and the next largest float, which means that <em>x+f</em> will round back to <em>x</em>.</p>\n\n<p>Since the gap is the same for all elements in the same <a href=\"https://en.wikipedia.org/wiki/Binade\" rel=\"nofollow\">binade</a>, we know that <em>x</em> must be the smallest element in its binade, which is a power of 2. </p>\n\n<p>So if <em>x</em> = 2<sup>k</sup>, then <em>h</em> = 2<sup>k-23</sup> since a <a href=\"https://en.wikipedia.org/wiki/Single-precision_floating-point_format\" rel=\"nofollow\">float</a> has a 24-bit significand. So we need to find the smallest integer <em>k</em> such that</p>\n\n<p>2<sup>k-23</sup>/2 > 1/30 </p>\n\n<p>which implies <em>k</em> > 19.09, hence <em>k</em> = 20, and <em>x</em> = 2<sup>20</sup> = 1048576 (seconds).</p>\n\n<p>Note that <em>x</em> / (60 &times; 60 &times; 24) = 12.14 (days), which is a little bit less that what your answer proposes, but checks out empirically: in Julia</p>\n\n<pre><code>julia&gt; x = 2f0^20\n1.048576f6\n\njulia&gt; f = 1f0/30f0\n0.033333335f0\n\njulia&gt; x+f == x\ntrue\n\njulia&gt; p = prevfloat(x)\n1.04857594f6\n\njulia&gt; p+f == p\nfalse\n</code></pre>\n\n<p>UPDATE: Okay, so where did the 12.9 come from? The 12.14 is in game time, not actual time: these will have diverged due to the rounding error involved in floating point (especially near the end, when the rounding error is actually quite large relative to <em>f</em>). As far as I know, there's no way to calculate this directly, but it's actually fairly quick to iterate through 32-bit floats.</p>\n\n<p>Again, in Julia:</p>\n\n<pre><code>julia&gt; function timestuff(f)\n           t = 0\n           x = 0f0\n           while true\n               t += 1\n               xp = x\n               x += f\n               if x == xp\n                   return (t,x)\n               end\n           end\n       end\ntimestuff (generic function with 1 method)\n\njulia&gt; t,x = timestuff(1f0/30f0)\n(24986956,1.048576f6)\n</code></pre>\n\n<p><code>x</code> matches our result we calculated earlier, and <code>t</code> is the clock time in 30ths of a second. Converting to days:</p>\n\n<pre><code>julia&gt; t/(30*60*60*24)\n9.640029320987654\n</code></pre>\n\n<p>which is even further away. So I don't know where the 12.9 came from...</p>\n\n<p>UPDATE 2: My guess is that the 12.9 comes from the calculation</p>\n\n<p><em>y</em> = 4 &times; <em>f</em> / &epsilon; = 1118481.125 (seconds)</p>\n\n<p>where &epsilon; is the standard <a href=\"http://en.cppreference.com/w/cpp/types/numeric_limits/epsilon\" rel=\"nofollow\">machine epsilon</a> (the gap between 1 and the next largest floating point number). Scaling this to days gives 12.945. This provides an upper bound on <em>x</em>, but it is not the correct answer as explained above.</p>\n"}, {"tags": [], "owner": {"reputation": 462, "user_id": 3096593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/669c0c2b3c4ae2f4627e7e8fd2f552f5?s=128&d=identicon&r=PG&f=1", "display_name": "francek", "link": "https://stackoverflow.com/users/3096593/francek"}, "is_accepted": false, "score": 2, "last_activity_date": 1589831534, "last_edit_date": 1589831534, "creation_date": 1508759634, "answer_id": 46888721, "question_id": 37441325, "link": "https://stackoverflow.com/questions/37441325/how-to-calculate-32-bit-floating-point-epsilon/46888721#46888721", "title": "How to calculate 32-bit floating-point epsilon?", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n\n/*\nhttps://en.wikipedia.org/wiki/Machine_epsilon#How_to_determine_machine_epsilon\n*/\n\ntypedef union\n{\n    int32_t i32;\n    float   f32;\n} fi32_t;\n\nfloat float_epsilon(float nbr)\n{\n    fi32_t flt;\n    flt.f32 = nbr;\n    flt.i32++;\n    return (flt.f32 - nbr);\n}\n\nint main()\n{\n    // How to calculate 32-bit floating-point epsilon?\n\n    const float one {1.}, ten_mills {10e6};\n    std::cout &lt;&lt; \"epsilon for number \" &lt;&lt; one &lt;&lt; \" is:\\n\"\n        &lt;&lt; std::fixed &lt;&lt; std::setprecision(25)\n        &lt;&lt; float_epsilon(one)\n        &lt;&lt; std::defaultfloat &lt;&lt; \"\\n\\n\";\n\n    std::cout &lt;&lt; \"epsilon for number \" &lt;&lt; ten_mills &lt;&lt; \" is:\\n\"\n        &lt;&lt; std::fixed &lt;&lt; std::setprecision(25)\n        &lt;&lt; float_epsilon(ten_mills)\n        &lt;&lt; std::defaultfloat &lt;&lt; \"\\n\\n\";\n\n\n    // In book Game Engine Architecture : \"..., let\u2019s say we use a\n    // floating-point variable to track absolute game time in seconds.\n    // How long can we run our game before the magnitude of our clock\n    // variable gets so large that adding 1/30th of a second to it no\n    // longer changes its value? The answer is roughly 12.9 days.\"\n    // Why 12.9 days, how to calculate it ?\n\n    const float one_30th {1.f/30}, day_sec {60*60*24};\n    float time_sec {}, time_sec_old {};\n\n    while ((time_sec += one_30th) &gt; time_sec_old)\n    {\n        time_sec_old = time_sec;\n    }\n\n    std::cout &lt;&lt; \"We can run our game for \"\n        &lt;&lt; std::fixed &lt;&lt; std::setprecision(5)\n        &lt;&lt; (time_sec / day_sec)\n        &lt;&lt; std::defaultfloat &lt;&lt; \" days.\\n\";\n\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>This outputs</p>\n\n<pre><code>epsilon for number 1 is:\n0.0000001192092895507812500\n\nepsilon for number 10000000 is:\n1.0000000000000000000000000\n\nWe can run our game for 12.13630 days.\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 6381919, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OU4_-M0s6wI/AAAAAAAAAAI/AAAAAAAAAFI/zD-jtjBcuT8/photo.jpg?sz=128", "display_name": "Xia Cuo", "link": "https://stackoverflow.com/users/6381919/xia-cuo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1355, "favorite_count": 4, "accepted_answer_id": 37447603, "answer_count": 3, "score": 12, "last_activity_date": 1589831534, "creation_date": 1464189412, "question_id": 37441325, "link": "https://stackoverflow.com/questions/37441325/how-to-calculate-32-bit-floating-point-epsilon", "title": "How to calculate 32-bit floating-point epsilon?", "body": "<p>In book <em>Game Engine Architecture</em> : \"..., let\u2019s say we use a floating-point variable to track absolute game time in seconds. How long can we run our game before the magnitude of our clock variable gets so large that adding 1/30th of a second to it no longer changes its value? The answer is roughly 12.9 days.\"\nWhy 12.9 days, how to calculate it ?</p>\n"}, {"tags": ["c++", "c++11", "expression-templates"], "answers": [{"comments": [{"owner": {"reputation": 301, "user_id": 6345567, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1734369550181327/picture?type=large", "display_name": "Tasam Farkie", "link": "https://stackoverflow.com/users/6345567/tasam-farkie"}, "edited": false, "score": 0, "creation_date": 1464191618, "post_id": 37441788, "comment_id": 62386813, "body": "I noticed it myself as soon as I posted the question. Thanks"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 6, "last_activity_date": 1464190576, "creation_date": 1464190576, "answer_id": 37441788, "question_id": 37441136, "link": "https://stackoverflow.com/questions/37441136/expression-templates-not-working-for-primitive-type-overloads-under-clang/37441788#37441788", "title": "Expression templates not working for primitive type overloads under clang", "body": "<p>Your problem is that you have a dangling reference.</p>\n\n<p>In <code>operator+</code>, you take a <code>TRhs</code> (<code>int</code>) by value and then construct an <code>AddOperator&lt;...&gt;</code> with a reference to it. When <code>g+28</code> returns, the <code>AddOperator&lt;...&gt;</code> object still has a reference to the parameter <code>rhs</code> - whose lifetime has now ended.</p>\n\n<p>The garbage you're printing is the outcome of accessing a destroyed object - it's undefined behavior. On clang, this manifests itself as printing a garbage value for you, on gcc it happens to work. Undefined behavior is tricky like that.</p>\n\n<hr />\n\n<p>Now, the seemingly \"obvious\" fix is to change <code>operator+</code> to take <code>rhs</code> by reference to <code>const</code>. This will extend the lifetime of the temporary <code>28</code> through the end of the full expression containing the call - so now your print statements are guaranteed to work. At least, until the end of the line. After <code>x</code> is constructed, the reference will dangle yet again.</p>\n"}], "owner": {"reputation": 301, "user_id": 6345567, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1734369550181327/picture?type=large", "display_name": "Tasam Farkie", "link": "https://stackoverflow.com/users/6345567/tasam-farkie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 37441788, "answer_count": 1, "score": 4, "last_activity_date": 1464222331, "creation_date": 1464188960, "last_edit_date": 1464222331, "question_id": 37441136, "link": "https://stackoverflow.com/questions/37441136/expression-templates-not-working-for-primitive-type-overloads-under-clang", "title": "Expression templates not working for primitive type overloads under clang", "body": "<p>I have a <a href=\"https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern\" rel=\"nofollow\">CRTP</a> base class as follows:</p>\n\n<pre><code>template&lt;typename Derived, size_t DIMS&gt;\nclass Base {\npublic:\n    // here is I think where the problem is\n    inline const Derived&amp; self() const {return *static_cast&lt;const Derived*&gt;(this);}\n};\n</code></pre>\n\n<p>Then the derived class is defined as</p>\n\n<pre><code>template&lt;typename T, size_t ... Rest&gt;\nclass Derived: public Base&lt;Derived&lt;T,Rest...&gt;,sizeof...(Rest)&gt; {\npublic:\n\n    Derived() = default;\n\n    // This constructor binds any arbitrary expression to Derived\n    template&lt;typename Expr, size_t DIMS&gt;\n    inline Derived(const Base&lt;Expr,DIMS&gt;&amp; src_) {\n        const Expr &amp;src = src_.self();\n        print(src.rhs);\n    }\n};\n</code></pre>\n\n<p>with defining my own operators in mind, I also have the following <code>AddOperator</code> which also inherits from base </p>\n\n<pre><code>template&lt;typename TLhs, typename TRhs, size_t DIMS&gt;\nstruct AddOperator: public Base&lt;AddOperator&lt;TLhs, TRhs, DIMS&gt;,DIMS&gt; {\n    AddOperator(const TLhs&amp; lhs, const TRhs&amp; rhs) : lhs(lhs), rhs(rhs) {\n        print(rhs);\n    }\n    const TLhs &amp;lhs;\n    const TRhs &amp;rhs;\n};\n</code></pre>\n\n<p>Then the <code>operator+</code> overload between a <code>Derived</code> type and a primitive type returns only a proxy/expression of sorts:</p>\n\n<pre><code>template&lt;typename TLhs, typename TRhs, size_t DIM0,\n         typename std::enable_if&lt;!std::is_arithmetic&lt;TLhs&gt;::value &amp;&amp;\n                                 std::is_arithmetic&lt;TRhs&gt;::value,bool&gt;::type = 0 &gt;\ninline AddOperator&lt;TLhs, TRhs, DIM0&gt; \noperator+(const Base&lt;TLhs,DIM0&gt; &amp;lhs, TRhs rhs) {\n  return AddOperator&lt;TLhs, TRhs, DIM0&gt;(lhs.self(), rhs);\n}\n</code></pre>\n\n<p>However, when I call this under <code>clang</code> I get garbage values for <code>rhs</code> of <code>AddOperator</code>. Here is an example:</p>\n\n<pre><code>int main() {\n\n    Derived&lt;double,2,2&gt; g;\n    Derived&lt;double,2,2&gt; x = g+28;\n\n    return 0;\n}\n</code></pre>\n\n<p>The other overloads when both <code>lhs</code> and <code>rhs</code> in <code>AddOperator</code> are of type <code>Derived</code> do not have this problem. </p>\n\n<p>This problem happens only under <code>clang</code>. <code>gcc</code> compiled code seems to run fine. Does anyone know where the problem is?</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/5ef08915bb306cdf\" rel=\"nofollow\">Full Demo Here</a></p>\n"}, {"tags": ["c++", "arrays", "pointer-to-pointer"], "comments": [{"owner": {"reputation": 5818, "user_id": 389222, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6e599629d5f058545c7ae84e7bdd3441?s=128&d=identicon&r=PG", "display_name": "Gilad Naaman", "link": "https://stackoverflow.com/users/389222/gilad-naaman"}, "edited": false, "score": 0, "creation_date": 1464188826, "post_id": 37441062, "comment_id": 62384696, "body": "It looks dirty, what&#39;s basically how to do it."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1464188909, "post_id": 37441062, "comment_id": 62384768, "body": "<code>if(NULL == *pArr)</code> uncomfortable is reverse in speaking."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1464188919, "post_id": 37441062, "comment_id": 62384774, "body": "hacky way of doing it can be <code>fun((bool **)&amp;myArr, 2);</code>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1464189002, "post_id": 37441062, "comment_id": 62384841, "body": "What will happen if the function will decide to assign <code>*pArr</code>?? Something fishy with this design. Your &quot;dirty&quot; way is the only right one..."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1464189007, "post_id": 37441062, "comment_id": 62384847, "body": "@SouravGhosh that has no chance of working :)"}, {"owner": {"reputation": 6924, "user_id": 835629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b38fa6792bcb51a7fe773b5f942c66c2?s=128&d=identicon&r=PG", "display_name": "coyotte508", "link": "https://stackoverflow.com/users/835629/coyotte508"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1464189009, "post_id": 37441062, "comment_id": 62384850, "body": "@SouravGhosh no <code>static_cast</code> or other C++-typed casts? :)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1464189029, "post_id": 37441062, "comment_id": 62384870, "body": "@SouravGhosh See my previous comment"}, {"owner": {"reputation": 7763, "user_id": 5924721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LWjjj.png?s=128&g=1", "display_name": "Frank Puffer", "link": "https://stackoverflow.com/users/5924721/frank-puffer"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1464189296, "post_id": 37441062, "comment_id": 62385058, "body": "@iharob: Many people do this because they are afraid of writing <code>= </code>instead of <code>==</code>. I hate it as well."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 7763, "user_id": 5924721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LWjjj.png?s=128&g=1", "display_name": "Frank Puffer", "link": "https://stackoverflow.com/users/5924721/frank-puffer"}, "edited": false, "score": 1, "creation_date": 1464189394, "post_id": 37441062, "comment_id": 62385121, "body": "@FrankPuffer It becomes pretty natural once you get used to it if people in your environment are using it."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 7763, "user_id": 5924721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LWjjj.png?s=128&g=1", "display_name": "Frank Puffer", "link": "https://stackoverflow.com/users/5924721/frank-puffer"}, "edited": false, "score": 0, "creation_date": 1464189399, "post_id": 37441062, "comment_id": 62385125, "body": "@FrankPuffer I know why they do it. But compilers warn about this so it&#39;s not necessary anymore, Some: <i>c standard suggest parentheses around assignments used as truth value</i> or similar."}], "answers": [{"tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": false, "score": 1, "last_activity_date": 1464189210, "creation_date": 1464189210, "answer_id": 37441235, "question_id": 37441062, "link": "https://stackoverflow.com/questions/37441062/passing-an-array-to-a-function-which-accepts-double-pointer-in-arg-list/37441235#37441235", "title": "Passing an array to a function which accepts double pointer in arg-list", "body": "<p>This functions expects a pointer to a <code>bool*</code>, so the only way to call it is to have an actual <code>bool*</code> object somewhere. Your solution is the only one.</p>\n"}, {"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1464189654, "post_id": 37441381, "comment_id": 62385315, "body": "A link to the term <i>jagged array</i> would be nice. I suspect it&#39;s something I would use with <i>libmysqlclient</i> if I had to bind a single parameter or a single result."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1464190275, "post_id": 37441381, "comment_id": 62385763, "body": "I think it&#39;s more likely here that the double-pointer is used as the C method of being able to change a pointer argument (which is better done with a reference in C++). But your solution should work either way."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 4, "last_activity_date": 1464190025, "last_edit_date": 1464190025, "creation_date": 1464189561, "answer_id": 37441381, "question_id": 37441062, "link": "https://stackoverflow.com/questions/37441062/passing-an-array-to-a-function-which-accepts-double-pointer-in-arg-list/37441381#37441381", "title": "Passing an array to a function which accepts double pointer in arg-list", "body": "<p>Functions that want a pointer to a pointer typically expect a <em><a href=\"https://en.wikipedia.org/wiki/Jagged_array\" rel=\"nofollow\">jagged array</a>.</em> You can construct an array of arrays with a single element <code>myArray</code>, and pass that array to your function, like this:</p>\n\n<pre><code>bool *arrayOfPtrs[] = { myArray };\nfun(arrayOfPtrs, 2);\n</code></pre>\n\n<p>This reads slightly better than your pointer solution, because creating an array of pointers eliminates the question of why you are creating a pointer to a pointer (<a href=\"http://ideone.com/WJ3SQM\" rel=\"nofollow\">demo</a>).</p>\n"}, {"comments": [{"owner": {"reputation": 146, "user_id": 4280460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a69fb9e87240f46445f370ad66b0679?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/4280460/vincent"}, "edited": false, "score": 0, "creation_date": 1464191064, "post_id": 37441576, "comment_id": 62386344, "body": "Could you change _tmain to main to follow the standard?"}], "tags": [], "owner": {"reputation": 307, "user_id": 2925417, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/132cb22bf9015e64a7e97958d9199a77?s=128&d=identicon&r=PG&f=1", "display_name": "JoshK", "link": "https://stackoverflow.com/users/2925417/joshk"}, "is_accepted": false, "score": 0, "last_activity_date": 1464191244, "last_edit_date": 1464191244, "creation_date": 1464190042, "answer_id": 37441576, "question_id": 37441062, "link": "https://stackoverflow.com/questions/37441062/passing-an-array-to-a-function-which-accepts-double-pointer-in-arg-list/37441576#37441576", "title": "Passing an array to a function which accepts double pointer in arg-list", "body": "<p>I would do a little differently.  I Think this is a bit cleaner:</p>\n\n<pre><code>void fun2(bool * pArr, int idx)\n{\n    *(pArr + idx) = true;\n\n    return;\n}\n\n\nint main(int argc, _TCHAR* argv[])\n{\n    bool myArr[] = { false, false, true };\n\n    fun2(myArr, 1);\n\n    return 0;\n}\n</code></pre>\n\n<p>Now I was playing with this in my c++14 and it didn't let me directly access the elements with an indexer.  Maybe that changed at some point?  But I thought this is reasonable.</p>\n\n<p>Edit, this is really better:</p>\n\n<pre><code>void fun3(bool pArr[], int idx)\n{\n    if (NULL == *pArr)\n        return;\n\n    pArr[idx] = false;\n\n    return;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 0, "last_activity_date": 1464190713, "creation_date": 1464190713, "answer_id": 37441840, "question_id": 37441062, "link": "https://stackoverflow.com/questions/37441062/passing-an-array-to-a-function-which-accepts-double-pointer-in-arg-list/37441840#37441840", "title": "Passing an array to a function which accepts double pointer in arg-list", "body": "<p>If you want to avoid using a hack every time you call the function you can simply write a wrapper function:</p>\n\n<pre><code>void fun(bool** pArr, int idx)\n{\n    if(NULL == *pArr)\n       return;\n\n    (*pArr)[idx] = false;\n}\n\nvoid super_fun(bool* pArr, int idx)\n{\n    fun(&amp;pArr, idx);\n}\n\nint main()\n{\n    bool myArr[] = { false, false, true };\n\n    super_fun(myArr, 2);\n}\n</code></pre>\n"}], "owner": {"reputation": 1105, "user_id": 646210, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/osWJG.jpg?s=128&g=1", "display_name": "paper.plane", "link": "https://stackoverflow.com/users/646210/paper-plane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 710, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1464191244, "creation_date": 1464188753, "last_edit_date": 1464189256, "question_id": 37441062, "link": "https://stackoverflow.com/questions/37441062/passing-an-array-to-a-function-which-accepts-double-pointer-in-arg-list", "title": "Passing an array to a function which accepts double pointer in arg-list", "body": "<p>I want to pass newly defined array <code>bool myArr[] = { false, false, true };</code> to below existing function.</p>\n\n<pre><code>void fun(bool** pArr, int idx)\n{\n    if(NULL == *pArr)\n       return;\n\n    (*pArr)[idx] = false;\n\n    ...\n    ...\n\n    return;\n}\n</code></pre>\n\n<p>I am not allowed to change anything in subroutine <code>fun</code> and I want to invoke the function by using the identifier <code>myArr</code>. When I try <code>fun(&amp;myArr, 2);</code> I get below compilation error.</p>\n\n<blockquote>\n  <p>no matching function for call to <code>fun(bool (*)[3], int)</code></p>\n  \n  <p>candidates are: void fun(bool**, int)</p>\n</blockquote>\n\n<p>One way I can think of is as below</p>\n\n<pre><code>bool* ptr = myArr;\nfun(&amp;ptr, 2);\n</code></pre>\n\n<p>But it looks dirty to me, please suggest a way to invoke <code>fun</code> my using the <code>myArr</code></p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 1, "creation_date": 1464189203, "post_id": 37441032, "comment_id": 62384984, "body": "<a href=\"http://stackoverflow.com/questions/18404483/should-i-connect-to-qnetworkreplyerror-as-well\">This</a> might answer your question."}], "answers": [{"comments": [{"owner": {"reputation": 3729, "user_id": 1391055, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/edbeabd2b0a1788b369790c88bb00c01?s=128&d=identicon&r=PG", "display_name": "Nyaruko", "link": "https://stackoverflow.com/users/1391055/nyaruko"}, "edited": false, "score": 0, "creation_date": 1464190948, "post_id": 37441895, "comment_id": 62386247, "body": "Thanks. My worry is that, is it possible that &quot;reply actually already finished due to error and no more contents will be read in, but finished() signal is not emited&quot; ?"}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "reply_to_user": {"reputation": 3729, "user_id": 1391055, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/edbeabd2b0a1788b369790c88bb00c01?s=128&d=identicon&r=PG", "display_name": "Nyaruko", "link": "https://stackoverflow.com/users/1391055/nyaruko"}, "edited": false, "score": 1, "creation_date": 1464191159, "post_id": 37441895, "comment_id": 62386425, "body": "@Nyaruko In practice we are satisfied with such handler. We also connect QNetworkReply::sslErrors signal returned by networkAccessManager.post()."}, {"owner": {"reputation": 3729, "user_id": 1391055, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/edbeabd2b0a1788b369790c88bb00c01?s=128&d=identicon&r=PG", "display_name": "Nyaruko", "link": "https://stackoverflow.com/users/1391055/nyaruko"}, "edited": false, "score": 0, "creation_date": 1464191800, "post_id": 37441895, "comment_id": 62386943, "body": "for my case, I am just downloading some files (some of them might be large, say 100MB) through normal http. Will it necessary to worry about the sslErrors? And what version of Qt are you using?"}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "reply_to_user": {"reputation": 3729, "user_id": 1391055, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/edbeabd2b0a1788b369790c88bb00c01?s=128&d=identicon&r=PG", "display_name": "Nyaruko", "link": "https://stackoverflow.com/users/1391055/nyaruko"}, "edited": false, "score": 1, "creation_date": 1464191966, "post_id": 37441895, "comment_id": 62387051, "body": "We started with Qt 5.3 and now on Qt 5.5. Of course sslErrors is needed for https and is happening mostly during fist post or get attempt. We deal with security."}, {"owner": {"reputation": 3729, "user_id": 1391055, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/edbeabd2b0a1788b369790c88bb00c01?s=128&d=identicon&r=PG", "display_name": "Nyaruko", "link": "https://stackoverflow.com/users/1391055/nyaruko"}, "edited": false, "score": 0, "creation_date": 1464192050, "post_id": 37441895, "comment_id": 62387115, "body": "So, for plain http no need to worry about the sslErros? I am just writing small programs for testing."}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "reply_to_user": {"reputation": 3729, "user_id": 1391055, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/edbeabd2b0a1788b369790c88bb00c01?s=128&d=identicon&r=PG", "display_name": "Nyaruko", "link": "https://stackoverflow.com/users/1391055/nyaruko"}, "edited": false, "score": 1, "creation_date": 1464192114, "post_id": 37441895, "comment_id": 62387147, "body": "No only https needs sslErrors."}], "tags": [], "owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "is_accepted": true, "score": 3, "last_activity_date": 1464190844, "creation_date": 1464190844, "answer_id": 37441895, "question_id": 37441032, "link": "https://stackoverflow.com/questions/37441032/when-will-qnetworkreplyerror-signal-followed-by-a-finished-signal/37441895#37441895", "title": "When will QNetworkReply::error signal followed by a finished() signal?", "body": "<blockquote>\n  <p>When will QNetworkReply::error signal followed by a finished() signal?\n  To be specific, when will the finished() signal be emitted and when\n  not?</p>\n</blockquote>\n\n<p>Signal <code>finished()</code> is emitted when request is finished either due to data transmission complete or an error during transmission. Signal <code>error()</code> is happening right before <code>finished()</code> in case of an error. In practice we can handle <code>finished()</code> for both \"error\" and \"transmission successful\".</p>\n\n<p>To illustrate:</p>\n\n<pre><code>// connect 'finished' signal with consumer\nconnect(&amp;s_networkAccessManager, SIGNAL(finished(QNetworkReply*)),\n        this, SLOT(requestFinished(QNetworkReply*)));\n\n\n\nvoid MyClass::requestFinished(QNetworkReply* pReply)\n{\n    if ( pReply )\n    {\n         if (pReply-&gt;error() == QNetworkReply::NoError)\n             consumeData(pReply)\n         else\n             errorHandler(pReply-&gt;error(), pReply-&gt;errorString());\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3729, "user_id": 1391055, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/edbeabd2b0a1788b369790c88bb00c01?s=128&d=identicon&r=PG", "display_name": "Nyaruko", "link": "https://stackoverflow.com/users/1391055/nyaruko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "accepted_answer_id": 37441895, "answer_count": 1, "score": 2, "last_activity_date": 1464190844, "creation_date": 1464188688, "question_id": 37441032, "link": "https://stackoverflow.com/questions/37441032/when-will-qnetworkreplyerror-signal-followed-by-a-finished-signal", "title": "When will QNetworkReply::error signal followed by a finished() signal?", "body": "<p>For the signal: </p>\n\n<pre><code>QNetworkReply::error(QNetworkReply::NetworkError code)\n</code></pre>\n\n<p>Qt's documentation said:</p>\n\n<blockquote>\n  <p>This signal is emitted when the reply detects an error in processing.\n  The finished() signal will probably follow, indicating that the\n  connection is over.</p>\n</blockquote>\n\n<p>To be specific, when will the finished() signal be emitted and when not?</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2013", "dll", "libusb"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1464188961, "post_id": 37440948, "comment_id": 62384807, "body": "Please post the exact error from the Output window (alt-2)."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1464189007, "post_id": 37440948, "comment_id": 62384848, "body": "This error has nothing to do with the location of the dll."}, {"owner": {"reputation": 2393, "user_id": 3103677, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3753239f21e4f964ace455224a7c2b07?s=128&d=identicon&r=PG&f=1", "display_name": "sebenalern", "link": "https://stackoverflow.com/users/3103677/sebenalern"}, "edited": false, "score": 0, "creation_date": 1464189009, "post_id": 37440948, "comment_id": 62384851, "body": "For additional library directories try including <code>$(SolutionDir)libusb\\MS32\\dll\\libusb-1.0.lib</code>"}, {"owner": {"reputation": 1984, "user_id": 1642677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c4db19dd7a5daf2cdd1352e622fc013?s=128&d=identicon&r=PG", "display_name": "audiFanatic", "link": "https://stackoverflow.com/users/1642677/audifanatic"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1464189011, "post_id": 37440948, "comment_id": 62384857, "body": "@drescherjm coming right up"}, {"owner": {"reputation": 1984, "user_id": 1642677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c4db19dd7a5daf2cdd1352e622fc013?s=128&d=identicon&r=PG", "display_name": "audiFanatic", "link": "https://stackoverflow.com/users/1642677/audifanatic"}, "reply_to_user": {"reputation": 2393, "user_id": 3103677, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3753239f21e4f964ace455224a7c2b07?s=128&d=identicon&r=PG&f=1", "display_name": "sebenalern", "link": "https://stackoverflow.com/users/3103677/sebenalern"}, "edited": false, "score": 0, "creation_date": 1464189520, "post_id": 37440948, "comment_id": 62385212, "body": "@sebenalern No luck on that end"}, {"owner": {"reputation": 1984, "user_id": 1642677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c4db19dd7a5daf2cdd1352e622fc013?s=128&d=identicon&r=PG", "display_name": "audiFanatic", "link": "https://stackoverflow.com/users/1642677/audifanatic"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1464189577, "post_id": 37440948, "comment_id": 62385256, "body": "@drescherjm Added the output window. Had to resort to using pastebin due to character count limitations."}, {"owner": {"reputation": 1984, "user_id": 1642677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c4db19dd7a5daf2cdd1352e622fc013?s=128&d=identicon&r=PG", "display_name": "audiFanatic", "link": "https://stackoverflow.com/users/1642677/audifanatic"}, "edited": false, "score": 0, "creation_date": 1464194081, "post_id": 37440948, "comment_id": 62388356, "body": "So, interestingly, I added the library name to the <b>Linker&gt;Input&gt;Additional Dependencies</b> list rather than using a <code>#pragma</code>. Not ideal, but it apparently worked. Not sure why the pragma would cause issues; I&#39;ve used it in the past"}, {"owner": {"reputation": 1984, "user_id": 1642677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c4db19dd7a5daf2cdd1352e622fc013?s=128&d=identicon&r=PG", "display_name": "audiFanatic", "link": "https://stackoverflow.com/users/1642677/audifanatic"}, "edited": false, "score": 0, "creation_date": 1464194670, "post_id": 37440948, "comment_id": 62388677, "body": "Just an FYI, the pragma used is as follows: <code>#pragma comment(lib, &quot;libusb-1.0.lib&quot;)</code>"}], "owner": {"reputation": 1984, "user_id": 1642677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c4db19dd7a5daf2cdd1352e622fc013?s=128&d=identicon&r=PG", "display_name": "audiFanatic", "link": "https://stackoverflow.com/users/1642677/audifanatic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 353, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1484753266, "creation_date": 1464188468, "last_edit_date": 1464189427, "question_id": 37440948, "link": "https://stackoverflow.com/questions/37440948/cannot-link-against-libusb-visual-studio-2013-linker-error-2019-lnk2019", "title": "Cannot link against LibUSB Visual Studio 2013. Linker error 2019 (LNK2019)", "body": "<p>Apparently there's nothing I have more difficulty with than flipping switches in VS and using DLLs. No matter how many times I do it, I can never seem to get it right.</p>\n\n<p>Anyway, I'm trying to link LibUSB against a test application. I've downloaded the Windows binaries from <a href=\"http://libusb.info/\" rel=\"nofollow\">LibUSB.info</a> and now I'd like to link it to my test project. My directory structure is as follows:</p>\n\n<pre><code>Folder PATH listing for volume Local Disk\nVolume serial number is 00000200 1C56:6A00\nC:.\n|   LibUSBTest.sdf\n|   LibUSBTest.sln\n|   out.txt\n|   \n+---Debug\n|       LibUSBTest.pdb\n|       \n+---ipch\n|   +---libusbtest-291f707a\n|   |       libusbtest-85afab4d.ipch\n|   |       \n|   \\---libusbtest-e65e4917\n|           libusbtest-85afab4d.ipch\n|           \n+---libusb\n|   |   libusb-1.0.def\n|   |   README.txt\n|   |   \n|   +---examples\n|   |   +---bin32\n|   |   |       fxload.exe\n|   |   |       listdevs.exe\n|   |   |       xusb.exe\n|   |   |       \n|   |   +---bin64\n|   |   |       fxload.exe\n|   |   |       listdevs.exe\n|   |   |       xusb.exe\n|   |   |       \n|   |   \\---source\n|   |           ezusb.c\n|   |           ezusb.h\n|   |           fxload.c\n|   |           listdevs.c\n|   |           stdint.h\n|   |           xusb.c\n|   |           \n|   +---include\n|   |   \\---libusb-1.0\n|   |           libusb.h\n|   |           \n|   +---MinGW32\n|   |   +---dll\n|   |   |       libusb-1.0.dll\n|   |   |       libusb-1.0.dll.a\n|   |   |       \n|   |   \\---static\n|   |           libusb-1.0.a\n|   |           \n|   +---MinGW64\n|   |   +---dll\n|   |   |       libusb-1.0.dll\n|   |   |       libusb-1.0.dll.a\n|   |   |       \n|   |   \\---static\n|   |           libusb-1.0.a\n|   |           \n|   +---MS32\n|   |   +---dll\n|   |   |       libusb-1.0.dll\n|   |   |       libusb-1.0.lib\n|   |   |       libusb-1.0.pdb\n|   |   |       \n|   |   \\---static\n|   |           libusb-1.0.lib\n|   |           \n|   \\---MS64\n|       +---dll\n|       |       libusb-1.0.dll\n|       |       libusb-1.0.lib\n|       |       libusb-1.0.pdb\n|       |       \n|       \\---static\n|               libusb-1.0.lib\n|               \n\\---LibUSBTest\n    |   LibUSBTest.cpp\n    |   LibUSBTest.vcxproj\n    |   LibUSBTest.vcxproj.filters\n    |   ReadMe.txt\n    |   stdafx.cpp\n    |   stdafx.h\n    |   targetver.h\n    |   \n    \\---Debug\n        |   LibUSBTest.Build.CppClean.log\n        |   LibUSBTest.log\n        |   LibUSBTest.obj\n        |   LibUSBTest.pch\n        |   stdafx.obj\n        |   vc120.idb\n        |   vc120.pdb\n        |   \n        \\---LibUSBTest.tlog\n                cl.command.1.tlog\n                CL.read.1.tlog\n                CL.write.1.tlog\n                LibUSBTest.lastbuildstate\n                link-cvtres.read.1.tlog\n                link-cvtres.write.1.tlog\n                link-rc.read.1.tlog\n                link-rc.write.1.tlog\n                link.command.1.tlog\n                link.read.1.tlog\n                link.write.1.tlog\n                unsuccessfulbuild\n\n\n            |   vc120.idb\n        |   vc120.pdb\n        |   \n        \\---LibUSBTest.tlog\n                cl.command.1.tlog\n                CL.read.1.tlog\n                CL.write.1.tlog\n                LibUSBTest.lastbuildstate\n                link-cvtres.read.1.tlog\n                link-cvtres.write.1.tlog\n                link-rc.read.1.tlog\n                link-rc.write.1.tlog\n                link.command.1.tlog\n                link.read.1.tlog\n                link.write.1.tlog\n                unsuccessfulbuild\n</code></pre>\n\n<p>At the top of my source code, I've defined <code>#pragma comment(lib, \"libusb-1.0.lib\")</code> to add the library dependency.</p>\n\n<p>Under <strong>Properties->VC++ Directories->Library Directories</strong> I've added <code>$(SolutionDir)libusb\\MS32\\dll\\</code> and for <strong>Include Directories</strong> I've added <code>$(SolutionDir)libusb\\include\\libusb-1.0\\</code> </p>\n\n<p>Just to be safe, under <strong>Properties->C/C++->General->Additional Include Directories</strong> I've added <code>$(SolutionDir)libusb\\include\\libusb-1.0\\</code></p>\n\n<p>Finally, under <strong>Linker->General-> Additional Library Directories</strong> I've added <code>$(SolutionDir)libusb\\MS32\\dll\\</code></p>\n\n<p>I'm assuming I need to copy the DLL and/or Lib file somewhere in the project directory, but even doing that manually hasn't helped matters.</p>\n\n<hr>\n\n<p><strong>Edit: Output Window Results</strong></p>\n\n<p>The output window caused me to reach the character limit, so I unfortunately had to resort to using <a href=\"http://pastebin.com/S9u3nTFq\" rel=\"nofollow\">PasteBin</a> for that part.</p>\n"}, {"tags": ["c++", "batch-file"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1464189070, "post_id": 37440939, "comment_id": 62384894, "body": "Please give an example of what you are trying to do."}], "answers": [{"comments": [{"owner": {"reputation": 693, "user_id": 6303082, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ORM5W9nk5JA/AAAAAAAAAAI/AAAAAAAAAF0/6YRpszplSgc/photo.jpg?sz=128", "display_name": "kyo", "link": "https://stackoverflow.com/users/6303082/kyo"}, "edited": false, "score": 0, "creation_date": 1464237290, "post_id": 37451295, "comment_id": 62404441, "body": "Thx for your advise!!  However even though my batch file successfully ran in c++ and able to insert the password, even the &quot;Folder Unlocked successfully&quot; shown, my private file still not shown in the folder, is there any things i miss ?"}, {"owner": {"reputation": 30275, "user_id": 4272464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4fa45261dec56004145c653832504920?s=128&d=identicon&r=PG&f=1", "display_name": "bgoldst", "link": "https://stackoverflow.com/users/4272464/bgoldst"}, "reply_to_user": {"reputation": 693, "user_id": 6303082, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ORM5W9nk5JA/AAAAAAAAAAI/AAAAAAAAAF0/6YRpszplSgc/photo.jpg?sz=128", "display_name": "kyo", "link": "https://stackoverflow.com/users/6303082/kyo"}, "edited": false, "score": 0, "creation_date": 1464237632, "post_id": 37451295, "comment_id": 62404534, "body": "What private files? Your script does not do anything with files."}, {"owner": {"reputation": 693, "user_id": 6303082, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ORM5W9nk5JA/AAAAAAAAAAI/AAAAAAAAAF0/6YRpszplSgc/photo.jpg?sz=128", "display_name": "kyo", "link": "https://stackoverflow.com/users/6303082/kyo"}, "edited": false, "score": 0, "creation_date": 1464238449, "post_id": 37451295, "comment_id": 62404782, "body": "My batch file function is when it run and insert password, it will create a Private Folder. When it run again, it will ask to lock/hide the folder. I can run normally when i manually click the batch file, but when using c++ code to run it, it provide no action..."}], "tags": [], "owner": {"reputation": 30275, "user_id": 4272464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4fa45261dec56004145c653832504920?s=128&d=identicon&r=PG&f=1", "display_name": "bgoldst", "link": "https://stackoverflow.com/users/4272464/bgoldst"}, "is_accepted": false, "score": 0, "last_activity_date": 1464236603, "last_edit_date": 1464236603, "creation_date": 1464234859, "answer_id": 37451295, "question_id": 37440939, "link": "https://stackoverflow.com/questions/37440939/input-from-c-string-to-batch-file/37451295#37451295", "title": "Input from c++ string to batch file", "body": "<p><strong>1:</strong> You should quote both operands of an <code>if</code> comparison. If an operand expands to nothing then it will cause a syntax error if unquoted.</p>\n\n<p><strong>2:</strong> You should use the <code>:eof</code> implicit label rather than defining your own <code>End</code> label.</p>\n\n<p><strong>3:</strong> You should use <code>echo.</code> rather than <code>echo</code> with a space separator. This is not technically necessary in your case, since you only have literal messages, but in cases where the message consists of only a variable expansion, such as <code>echo %msg%</code>, using <code>echo.%msg%</code> will print a single blank line, rather than <code>ECHO is on.</code>, and it's good to be consistent.</p>\n\n<p><strong>4:</strong> You should initialize your <code>set /p</code> target variables prior to running the <code>set /p</code> command; otherwise residual values could mess up the script.</p>\n\n<p><strong>5:</strong> I admit this is subjective, but I recommend you space out the different sections of your script for readability, rather than keeping it as one unbroken block of code.</p>\n\n<p><strong>6:</strong> You can pipe input to a script that internally calls <code>set /p</code>, although piping a password to a batch script raises unpleasant security questions.</p>\n\n<hr>\n\n<p>So this is how I would rewrite your code (using \"pass\" for the password):</p>\n\n<pre><code>cls\n@echo off\n\ntitle Folder Private\n\nif exist \"HTG Locker\" goto UNLOCK\nif not exist Private goto MDLOCKER\n\n:CONFIRM\necho.Are you sure you want to lock the folder(Y/N)\nset cho=\nset /p \"cho=&gt;\"\nif \"%cho%\"==\"Y\" goto LOCK\nif \"%cho%\"==\"y\" goto LOCK\nif \"%cho%\"==\"n\" goto :eof\nif \"%cho%\"==\"N\" goto :eof\necho.Invalid choice.\ngoto CONFIRM\n\n:LOCK\nren Private \"HTG Locker\"\nattrib +h +s \"HTG Locker\"\necho.Folder locked\ngoto :eof\n\n:UNLOCK\necho.Enter password to unlock folder\nset pass=\nset /p \"pass=&gt;\"\nif not \"%pass%\"==\"pass\" goto FAIL\nattrib -h -s \"HTG Locker\"\nren \"HTG Locker\" Private\necho.Folder Unlocked successfully\ngoto :eof\n\n:FAIL\necho.Invalid password\ngoto :eof\n\n:MDLOCKER\nmd Private\necho.Private created successfully\n</code></pre>\n\n<p>And the C++ program (using a macro to store the password; alternatively, you could read it from a file and call <code>sprintf()</code> to generate the system command string, which may be preferable, since it would obviate the storage of the password in the C++ source and binary):</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;cstdlib&gt;\n\n#define PASSWORD \"pass\"\n\nint main(void) {\n    system(\"echo.\" PASSWORD \"| locker.bat\");\n    return 0;\n} // end main()\n</code></pre>\n\n<p>Compilation and execution (running <code>locker.bat</code> manually first to lock the folder, then running <code>a.exe</code> to unlock it):</p>\n\n<pre><code>cl a.cpp\n## Microsoft (R) C/C++ Optimizing Compiler Version 19.00.23026 for x86\n## Copyright (C) Microsoft Corporation.  All rights reserved.\n##\n## a.cpp\n## Microsoft (R) Incremental Linker Version 14.00.23026.0\n## Copyright (C) Microsoft Corporation.  All rights reserved.\n##\n## /out:a.exe\n## a.obj\n##\n.\\locker\n## Are you sure you want to lock the folder(Y/N)\n## &gt;y\n## Folder locked\n.\\a\n## Enter password to unlock folder\n## &gt;Folder Unlocked successfully\n</code></pre>\n"}], "owner": {"reputation": 693, "user_id": 6303082, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ORM5W9nk5JA/AAAAAAAAAAI/AAAAAAAAAF0/6YRpszplSgc/photo.jpg?sz=128", "display_name": "kyo", "link": "https://stackoverflow.com/users/6303082/kyo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 656, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1464236603, "creation_date": 1464188437, "last_edit_date": 1464232070, "question_id": 37440939, "link": "https://stackoverflow.com/questions/37440939/input-from-c-string-to-batch-file", "title": "Input from c++ string to batch file", "body": "<p>I want to input the batch file variable from c++, but i search for many help also can't be done...</p>\n\n<pre><code>    system(\"bin\\\\data\\\\locker.bat\");\n</code></pre>\n\n<p>The batch file is asking an input, but how i get the value from c++ and insert to the batch file?\nI use c++ to open this batch, but i cant insert the password required by using c++.\nBatch :</p>\n\n<pre><code>cls \n@ECHO OFF \ntitle Folder Private \nif EXIST \"HTG Locker\" goto UNLOCK \nif NOT EXIST Private goto MDLOCKER \n:CONFIRM \necho Are you sure you want to lock the folder(Y/N) \nset/p \"cho=&gt;\" \nif %cho%==Y goto LOCK \nif %cho%==y goto LOCK \nif %cho%==n goto END \nif %cho%==N goto END \necho Invalid choice. \ngoto CONFIRM \n:LOCK \nren Private \"HTG Locker\" \nattrib +h +s \"HTG Locker\" \necho Folder locked \ngoto End \n:UNLOCK \necho Enter password to unlock folder \nset/p \"pass=&gt;\" \nif NOT %pass%== PASSWORD_GOES_HERE goto FAIL \nattrib -h -s \"HTG Locker\" \nren \"HTG Locker\" Private \necho Folder Unlocked successfully \ngoto End \n:FAIL \necho Invalid password \ngoto end \n:MDLOCKER \nmd Private \necho Private created successfully \ngoto End \n:End\n</code></pre>\n"}, {"tags": ["c++", "linux", "cmake", "icu"], "answers": [{"tags": [], "owner": {"reputation": 1255, "user_id": 804775, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d30a8e379ae6f7ecaec0d564a81c4b86?s=128&d=identicon&r=PG", "display_name": "KyleL", "link": "https://stackoverflow.com/users/804775/kylel"}, "is_accepted": false, "score": 1, "last_activity_date": 1464288180, "creation_date": 1464288180, "answer_id": 37468739, "question_id": 37440751, "link": "https://stackoverflow.com/questions/37440751/how-do-i-deploy-the-icu-libraries-using-cmake/37468739#37468739", "title": "How do I deploy the ICU libraries using CMake?", "body": "<p>I ended up directly 'finding' the ICU symlinks and actual library files, then installing them.  Not very elegant, but worked for my purposes.  Unfortunately this will require a modification anytime I change ICU versions.</p>\n\n<pre><code>set(ICU_MAJOR_VER \"57\")\nset(ICU_FULL_VERSION \"${ICU_MAJOR_VER}.1\")\n\n\nfind_library(ICUIL18N_LIB libicui18n.so.${ICU_FULL_VERSION} PATHS ${CMAKE_CURRENT_SOURCE_DIR}/lib/ NO_DEFAULT_PATH)\nfind_library(ICUUC_LIB libicuuc.so.${ICU_FULL_VERSION} PATHS ${CMAKE_CURRENT_SOURCE_DIR}/lib/ NO_DEFAULT_PATH)\nfind_library(ICUDATA_LIB libicudata.so.${ICU_FULL_VERSION} PATHS ${CMAKE_CURRENT_SOURCE_DIR}/lib/ NO_DEFAULT_PATH)\n\nfind_library(ICUIL18N_MAJOR_LIB libicui18n.so.${ICU_MAJOR_VER} PATHS ${CMAKE_CURRENT_SOURCE_DIR}/lib/ NO_DEFAULT_PATH)\nfind_library(ICUUC_MAJOR_LIB libicuuc.so.${ICU_MAJOR_VER} PATHS ${CMAKE_CURRENT_SOURCE_DIR}/lib/ NO_DEFAULT_PATH)\nfind_library(ICUDATA_MAJOR_LIB libicudata.so.${ICU_MAJOR_VER} PATHS ${CMAKE_CURRENT_SOURCE_DIR}/lib/ NO_DEFAULT_PATH)\n\ninstall(FILES ${ICUIL18N_LIB} ${ICUUC_LIB} ${ICUDATA_LIB}\n              ${ICUIL18N_MAJOR_LIB} ${ICUUC_MAJOR_LIB} ${ICUDATA_MAJOR_LIB}\n        DESTINATION lib)\n</code></pre>\n"}], "owner": {"reputation": 1255, "user_id": 804775, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d30a8e379ae6f7ecaec0d564a81c4b86?s=128&d=identicon&r=PG", "display_name": "KyleL", "link": "https://stackoverflow.com/users/804775/kylel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1067, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464288180, "creation_date": 1464187950, "question_id": 37440751, "link": "https://stackoverflow.com/questions/37440751/how-do-i-deploy-the-icu-libraries-using-cmake", "title": "How do I deploy the ICU libraries using CMake?", "body": "<p>I am trying to build a linux application that uses the <a href=\"http://site.icu-project.org/\" rel=\"nofollow\">ICU</a>.  While the ICU library is generally available on most linux distros, I have recently learned it is generally <a href=\"http://userguide.icu-project.org/design#TOC-ICU-Binary-Compatibility:-Using-ICU-as-an-Operating-System-Level-Library\" rel=\"nofollow\">not binary compatible</a> between versions. I think the easiest path forward will be to deploy the ICU with my application so all dependencies are satisfied upon installation.</p>\n\n<p>My question is how can I do this with CMake?  I tried the following:</p>\n\n<pre><code>find_library(ICUIL18N_LIB icui18n )\nfind_library(ICUUC_LIB icuuc)\nfind_library(ICUDATA_LIB icudata)\n\n#link pthread and ICU against the library\ntarget_link_libraries(MyApp pthread rt ${ICUIL18N_LIB} ${ICUUC_LIB})\n\ninstall(FILES ${ICUIL18N_LIB} ${ICUUC_LIB} ${ICUDATA_LIB}\n        DESTINATION lib)\n</code></pre>\n\n<p>This appears to work, however when I examine my generated package I end up with my application expecting these libraries:</p>\n\n<pre><code>libicui18n.so.50 =&gt; /lib/libicui18n.so.50 (0xf74ee000)\nlibicuuc.so.50 =&gt; /lib/libicuuc.so.50 (0xf737b000)\n</code></pre>\n\n<p>But the files included in my packages are just symlinks with names that don't even match:</p>\n\n<pre><code>/lib/libicui18n.so -&gt; libicui18n.so.50.1.2\n/lib/libicuuc.so -&gt; libicuuc.so.50.1.2\n/lib/libicudata.so -&gt; libicudata.so.50.1.2\n</code></pre>\n\n<p>Is there a way for me to get the actual fully-linked paths from my target via cmake so I can install the right files?</p>\n\n<p>Is there a different mechanism I should use for this?  I did see the 'BundleUtilities' plugin, but instructions are not clear and I'm not sure it is applicable to this situation.</p>\n"}, {"tags": ["c++", "algorithm", "vector", "struct", "iterator"], "comments": [{"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 0, "creation_date": 1464188120, "post_id": 37440712, "comment_id": 62384109, "body": "<code>bool operator==(const code&amp; a) const</code> what is a <code>code</code>?"}, {"owner": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "edited": false, "score": 0, "creation_date": 1464188160, "post_id": 37440712, "comment_id": 62384137, "body": "Where do you define the type <code>code</code>?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1464188621, "post_id": 37440712, "comment_id": 62384520, "body": "Better data structure could be <code>std::map&lt;char,std::string&gt;</code> or hash map."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6381800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208903384809266/picture?type=large", "display_name": "Jack Alexander Kranz", "link": "https://stackoverflow.com/users/6381800/jack-alexander-kranz"}, "edited": false, "score": 0, "creation_date": 1464188292, "post_id": 37440846, "comment_id": 62384248, "body": "thanks mate, fixed that &quot;bool operator==(const alpha&amp; a) const&quot; still have the same error though :("}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1464188694, "post_id": 37440846, "comment_id": 62384584, "body": "He said you need to provide ctor with single argument of type <code>char</code> that can be used for type conversion."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 1, "creation_date": 1464189029, "post_id": 37440846, "comment_id": 62384871, "body": "If you have information in your answer which is wrong or irrelevant, just delete it. I don&#39;t see the point of leaving it in but striking a line through it."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1464189133, "post_id": 37440846, "comment_id": 62384935, "body": "@BenjaminLindley The OP posted a comment on this answer referring to the deleted section. If I remove it entirely, it would create confusion as to what they were talking about. I&#39;ll remove it if the OP decides to delete their comment."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 0, "last_activity_date": 1464188387, "last_edit_date": 1464188387, "creation_date": 1464188218, "answer_id": 37440846, "question_id": 37440712, "link": "https://stackoverflow.com/questions/37440712/cannot-use-algorithm-find-on-vector-of-struct/37440846#37440846", "title": "Cannot use &lt;algorithm&gt; find on vector of struct", "body": "<p><code>std::find</code> cannot implicitly convert a <code>char</code> to a <code>alpha</code>. You need to provide a constructor which will perform that conversion, or supply an <code>alpha</code> object that you create to the <code>find</code> function, or add another <code>operator==</code> function that compares against a <code>char</code>.</p>\n\n<p><strike>Also, the <code>operator==</code> function you defined is comparing to a <code>code</code> object? Is that supposed to be correct?</strike></p>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1464188514, "post_id": 37440857, "comment_id": 62384436, "body": "Does <code>std::find()</code> guarantee that <code>value</code> will be on the right side of expression?"}, {"owner": {"reputation": 1204, "user_id": 5661651, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8mVBFGAZyDk/AAAAAAAAAAI/AAAAAAAC4XI/lU_L3VQlSug/photo.jpg?sz=128", "display_name": "Olivier Pellier-Cuit", "link": "https://stackoverflow.com/users/5661651/olivier-pellier-cuit"}, "edited": false, "score": 0, "creation_date": 1464189010, "post_id": 37440857, "comment_id": 62384852, "body": "yes the function uses operator== to compare the individual elements to val"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1464189438, "post_id": 37440857, "comment_id": 62385150, "body": "@Slava: Yes. from 25.3.5/1: <i>&quot;Returns: The first iterator i in the range [first, last) for which the following corresponding conditions hold: *i == value...&quot;</i>"}], "tags": [], "owner": {"reputation": 1204, "user_id": 5661651, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8mVBFGAZyDk/AAAAAAAAAAI/AAAAAAAC4XI/lU_L3VQlSug/photo.jpg?sz=128", "display_name": "Olivier Pellier-Cuit", "link": "https://stackoverflow.com/users/5661651/olivier-pellier-cuit"}, "is_accepted": true, "score": 3, "last_activity_date": 1464188244, "creation_date": 1464188244, "answer_id": 37440857, "question_id": 37440712, "link": "https://stackoverflow.com/questions/37440712/cannot-use-algorithm-find-on-vector-of-struct/37440857#37440857", "title": "Cannot use &lt;algorithm&gt; find on vector of struct", "body": "<p>you need to define an equality operator between your struct and a char</p>\n\n<pre><code>bool operator==(const char c) const\n   {\n      return letter == c;\n   }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 565, "user_id": 2106703, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f298ea122773c1538399d2cf270697b3?s=128&d=identicon&r=PG", "display_name": "fzd", "link": "https://stackoverflow.com/users/2106703/fzd"}, "is_accepted": false, "score": 0, "last_activity_date": 1464189790, "creation_date": 1464189790, "answer_id": 37441479, "question_id": 37440712, "link": "https://stackoverflow.com/questions/37440712/cannot-use-algorithm-find-on-vector-of-struct/37441479#37441479", "title": "Cannot use &lt;algorithm&gt; find on vector of struct", "body": "<p>In <code>find(vect.begin(), vect.end(),'e');</code>, the third argument of <code>find</code> is not an <code>alpha</code> object. You should constuct such an object beforehand :</p>\n\n<pre><code>alpha eKey;\neKey.letter='e';\nvector&lt;alpha&gt;::iterator it = find(vect.begin(), vect.end(), eKey);\n</code></pre>\n\n<p>This will make a propper use of the <code>find</code> function.</p>\n"}], "owner": {"reputation": 13, "user_id": 6381800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208903384809266/picture?type=large", "display_name": "Jack Alexander Kranz", "link": "https://stackoverflow.com/users/6381800/jack-alexander-kranz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "accepted_answer_id": 37440857, "answer_count": 3, "score": -1, "last_activity_date": 1464189790, "creation_date": 1464187864, "last_edit_date": 1464188252, "question_id": 37440712, "link": "https://stackoverflow.com/questions/37440712/cannot-use-algorithm-find-on-vector-of-struct", "title": "Cannot use &lt;algorithm&gt; find on vector of struct", "body": "<p>so I'm having trouble using the  find func to  find a node in my vector of structs with the same 'char' value as specified. here is my code for my struct, I am overloading the comparison operator but still not having any luck</p>\n\n<pre><code>// STRUCT\nstruct alpha\n{\n   string morse;\n   char letter;\n\n   // overload the comparison operator\n   bool operator==(const alpha&amp; a) const\n   {\n      return letter == a.letter;\n   }\n\n};\n</code></pre>\n\n<p>and here is the code for my iterator</p>\n\n<pre><code>void testFunc(vector&lt;alpha&gt; &amp;vect)\n{\n   std::vector&lt;alpha&gt;::iterator it;\n\n   it = find(vect.begin(), vect.end(),'e');\n   if(it != vect.end())\n   {\n   // do anything if we ever get here\n   }\n}\n</code></pre>\n\n<p>Any help would be much appreciated, my code will not even compile i get the error</p>\n\n<pre><code>Invalid operands to binary expression ('alpha' and 'int')\n</code></pre>\n"}, {"tags": ["c++", "winapi", "visual-studio-2013", "strsafe"], "answers": [{"comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1464190529, "post_id": 37440910, "comment_id": 62385936, "body": "Strange quirk.  Only reason I can think of is to force programmers that spell the function name with an uppercase I (eye) instead of a lowercase l (ell) to look in the .h file :)"}, {"owner": {"reputation": 339, "user_id": 2657661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3bee71129dabc06ccbd6eb0a803fd78?s=128&d=identicon&r=PG", "display_name": "Michael J.", "link": "https://stackoverflow.com/users/2657661/michael-j"}, "edited": false, "score": 0, "creation_date": 1464196984, "post_id": 37440910, "comment_id": 62389955, "body": "#define STRSAFE_LOCALE_FUNCTIONS did the trick.  Thanks.  I have no idea how I missed the missing define."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1464207710, "post_id": 37440910, "comment_id": 62395773, "body": "Not strictly related, but good to know anyway: <i>&quot;You can define <code>STRSAFE_NO_CB_FUNCTIONS</code> or <code>STRSAFE_NO_CCH_FUNCTIONS</code>, but not both.&quot;</i> (from <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms647466.aspx\" rel=\"nofollow noreferrer\">About Strsafe.h</a>). Not really a surprise, but sometimes it&#39;s nice to have the obvious spelled out explicitly."}], "tags": [], "owner": {"reputation": 5685, "user_id": 5240004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8eFV.jpg?s=128&g=1", "display_name": "theB", "link": "https://stackoverflow.com/users/5240004/theb"}, "is_accepted": true, "score": 5, "last_activity_date": 1464206542, "last_edit_date": 1464206542, "creation_date": 1464188361, "answer_id": 37440910, "question_id": 37440682, "link": "https://stackoverflow.com/questions/37440682/locale-aware-version-of-strsafe-function-stringcbprintf-lw-cannot-be-found/37440910#37440910", "title": "Locale-aware version of StrSafe function (StringCbPrintf_lW) cannot be found", "body": "<p>The header Strsafe.h defines the method in question, using two defines to filter this function as follows:</p>\n\n<pre><code>#if defined(STRSAFE_LOCALE_FUNCTIONS) &amp;&amp; !defined(STRSAFE_NO_CB_FUNCTIONS)\n/*++\n\n  STDAPI\n  StringCbPrintf_l(\n  _Out_writes_bytes_(cbDest) _Always_(_Post_z_) LPTSTR  pszDest,\n  _In_ size_t  cbDest,\n  _In_ _Printf_format_string_params_(2) LPCTSTR pszFormat,\n  _In_ locale_t locale,\n  ...\n  );\n\n  Routine Description:\n\n  This routine is a version of StringCbPrintf that also takes a locale.\n  Please see notes for StringCbPrintf above.\n\n  --*/\n#ifdef UNICODE\n\n#pragma region Application Family\n#if WINAPI_FAMILY_PARTITION(WINAPI_PARTITION_APP)\n\n#define StringCbPrintf_l    StringCbPrintf_lW\n// ...\n</code></pre>\n\n<p>In short, you need to define <code>STRSAFE_LOCALE_FUNCTIONS</code> before you include the header. As in:</p>\n\n<pre><code>#define STRSAFE_LOCALE_FUNCTIONS\n#ifdef STRSAFE_NO_CB_FUNCTIONS\n#pragma message(\"NO CB FUNCTIONS\")\n#endif\n#include &lt;strsafe.h&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1464191133, "post_id": 37441814, "comment_id": 62386401, "body": "Well, there is little point in defining the macro project-wide. It really only needs to be defined at the point of the StrSafe header&#39;s inclusion. Just put the two lines in your precompiled header and move on."}, {"owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1464191339, "post_id": 37441814, "comment_id": 62386587, "body": "@CodyGray: Not everyone use precompiled headers in their projects."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1464191449, "post_id": 37441814, "comment_id": 62386673, "body": "That&#39;s true, I suppose. In that case, I&#39;d rather create my own &quot;wrapper&quot; header that contained those two lines, and then include that everywhere I needed the string-manipulation functions."}], "tags": [], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "is_accepted": false, "score": 1, "last_activity_date": 1464191027, "last_edit_date": 1464191027, "creation_date": 1464190643, "answer_id": 37441814, "question_id": 37440682, "link": "https://stackoverflow.com/questions/37440682/locale-aware-version-of-strsafe-function-stringcbprintf-lw-cannot-be-found/37441814#37441814", "title": "Locale-aware version of StrSafe function (StringCbPrintf_lW) cannot be found", "body": "<p>Spelunking inside the <code>&lt;strsafe.h&gt;</code> header, you will note that the  <code>StringCbPrintf_lW</code> function is guarded by a preprocessor <code>#if</code> like this:</p>\n\n<blockquote>\n<pre><code>#if defined(STRSAFE_LOCALE_FUNCTIONS) &amp;&amp; !defined(STRSAFE_NO_CB_FUNCTIONS)\n</code></pre>\n</blockquote>\n\n<p>So, to enable the aformentioned API in your code, you just need to have the <code>STRSAFE_LOCALE_FUNCTIONS</code> macro defined <em>and</em> the <code>STRSAFE_NO_CB_FUNCTIONS</code> macro <em>not</em> defined.</p>\n\n<p>With VS2015, I noted that neither of these two macros is defined by default.<br>\nSo, you just need to <code>#define STRSAFE_LOCALE_FUNCTIONS</code> before including your header:</p>\n\n<pre><code>#define STRSAFE_LOCALE_FUNCTIONS\n#include &lt;strsafe.h&gt;\n</code></pre>\n\n<p>You could also define that preprocessor macro at the whole project level using the Visual Studio IDE, following: <em>Project Properties | Configuration Properties | C/C++ | Preprocessor</em> and add it to the list in <em>Preprocessor Definitions</em>.</p>\n"}], "owner": {"reputation": 339, "user_id": 2657661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3bee71129dabc06ccbd6eb0a803fd78?s=128&d=identicon&r=PG", "display_name": "Michael J.", "link": "https://stackoverflow.com/users/2657661/michael-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 1, "accepted_answer_id": 37440910, "answer_count": 2, "score": 4, "last_activity_date": 1464206542, "creation_date": 1464187772, "last_edit_date": 1464191000, "question_id": 37440682, "link": "https://stackoverflow.com/questions/37440682/locale-aware-version-of-strsafe-function-stringcbprintf-lw-cannot-be-found", "title": "Locale-aware version of StrSafe function (StringCbPrintf_lW) cannot be found", "body": "<p>We (mistakenly) used StringCbPrintfW to write a database query which failed miserably on any locale that uses a comma as the decimal separator.  Fix is easy enough, right? StringCbPrintf_lW, which takes a locale, is also defined in strsafe.h. Both are defined under:</p>\n\n<pre><code>#if WINAPI_FAMILY_PARTITION(WINAPI_PARTITION_APP)\n</code></pre>\n\n<p>so just create the locale and replace StringCbPrintfW  with StringCbPrintf_lW.</p>\n\n<p>Intellisense is happy, GoToDefinition is happy, ClCompile is not.  I keep getting</p>\n\n<blockquote>\n  <p>error C3861: 'StringCbPrintf_lW': identifier not found</p>\n</blockquote>\n\n<p>Any ideas what is wrong?  </p>\n"}, {"tags": ["c++", "c", "string", "pointers"], "comments": [{"owner": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "edited": false, "score": 0, "creation_date": 1464187787, "post_id": 37440655, "comment_id": 62383857, "body": "you&#39;re off by one if you&#39;re trying to do <code>C</code> strings."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 2, "creation_date": 1464187893, "post_id": 37440655, "comment_id": 62383937, "body": "You forgot a third option: <code>char str[] = &quot;Hello World&quot;</code>."}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 0, "creation_date": 1464187937, "post_id": 37440655, "comment_id": 62383973, "body": "Note that method 1 is not allowed in C++11, it would have to be <code>const char*</code>."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1464188034, "post_id": 37440655, "comment_id": 62384035, "body": "There is absolutely no reason NOT to use <code>std::string</code>. Also, as many commented even though <code>char *string = &quot;string literal&quot;;</code> is legal in <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> for example, it&#39;s still a bad idea because string literals are read only, and writing to read only memory will invoke undefined behaviour."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1464190118, "post_id": 37440701, "comment_id": 62385647, "body": "&quot;the content of the memory address cannot be modified.&quot; is better as &quot;attempting to modify the memory is UB&quot;.  C does not specify the memory cannot be modified, only that the attempted modification is UB."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1464190400, "post_id": 37440701, "comment_id": 62385842, "body": "@chux modified the wordings, should be OK now. Thanks."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1464190359, "last_edit_date": 1464190359, "creation_date": 1464187840, "answer_id": 37440701, "question_id": 37440655, "link": "https://stackoverflow.com/questions/37440655/direct-assignment-vs-dynamic-allocation-for-char-string/37440701#37440701", "title": "Direct assignment vs Dynamic allocation for char * string", "body": "<p>In case of the first approach</p>\n\n<pre><code> char * str = \"Hello World\";\n</code></pre>\n\n<p>you are storing the address of the <a href=\"https://en.wikipedia.org/wiki/String_literal\" rel=\"nofollow\"><em>string literal</em></a> into the given pointer. However, due to the mismatch of the type <code>const char[]</code> vs <code>char *</code>, this construct is illegal.</p>\n\n<p>Remember, the content of the memory address should not be modified, attempt to do so will invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>. Also, you don't need to <em>free</em> anything, as you did not <em>allocate</em> any dynamic memory.</p>\n\n<p>In the second approach, </p>\n\n<pre><code>char * str = new char [12];\nstrcpy(str,\"Hellow World\");\n</code></pre>\n\n<p>you are allocating dynamic memory to the pointer and filling that with the content of the <em>string literal</em>. This array is perfectly writable. However, point to notice, for a dimension of <code>12</code>, you don't have a space for null-terminator. You may want to make the size at least <code>13</code> to have room for the null-terminator. Finally, you need to free-up the allocated memory after the usage.</p>\n"}, {"comments": [{"owner": {"reputation": 198, "user_id": 3497401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16440fd492f49c0e9978f3c1df0d67c1?s=128&d=identicon&r=PG&f=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/3497401/leon"}, "edited": false, "score": 0, "creation_date": 1464188107, "post_id": 37440717, "comment_id": 62384094, "body": "Actually I am programming using WinAPI with tchar string in VS2015, and method 1 compiles perfectly. The std::string is terrible with Unicode handling (imagine you have two projects in a solution, one with Unicode other with multi-byte, and these two projects use the same library. Inside this library, it is good to use tchar. std string you must explicitly tell which version it is). Anyway I am very familiar with std string as well. Thanks for the info."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 198, "user_id": 3497401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16440fd492f49c0e9978f3c1df0d67c1?s=128&d=identicon&r=PG&f=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/3497401/leon"}, "edited": false, "score": 1, "creation_date": 1464188153, "post_id": 37440717, "comment_id": 62384129, "body": "@Leon <i>&quot;The std::string is terrible with Unicode string&quot;</i> Use <code>std::wstring</code> then."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 198, "user_id": 3497401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16440fd492f49c0e9978f3c1df0d67c1?s=128&d=identicon&r=PG&f=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/3497401/leon"}, "edited": false, "score": 2, "creation_date": 1464188163, "post_id": 37440717, "comment_id": 62384143, "body": "@Leon Then you need to tell us about that.  We cannot know what you are doing if you do not tell us."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1464188770, "post_id": 37440717, "comment_id": 62384641, "body": "I am terribly sorry for the downvote. Now that I read it again I get it and you&#39;re 100% right. Please let&#39;s remove the useless comments?"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 5, "last_activity_date": 1464188455, "last_edit_date": 1464188455, "creation_date": 1464187874, "answer_id": 37440717, "question_id": 37440655, "link": "https://stackoverflow.com/questions/37440655/direct-assignment-vs-dynamic-allocation-for-char-string/37440717#37440717", "title": "Direct assignment vs Dynamic allocation for char * string", "body": "<pre><code>char * str = \"Hello World\";\n</code></pre>\n\n<p>Is deprecated in C++ as it violates const correctness.  <code>\"Hello World\"</code> is a <code>const char[]</code> and pointing to it with a <code>char*</code> is an invitation to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a> as you could try to modify it.  If you want to work with strings in C++ I suggest you use <code>std::string</code> which prevents you from falling into the numerous pitfalls c-strings have.</p>\n\n<p>If you do need a c-string then you can use</p>\n\n<pre><code>char str[] = \"Hello World\";\n</code></pre>\n\n<p>Which will create a char array of the correct length and allow you to modify the contents.</p>\n\n<blockquote>\n  <p>Edit: Actually I am programming using WinAPI with tchar string in VS2015, and method 1 compiles perfectly. The std::string is terrible with Unicode handling.</p>\n</blockquote>\n\n<p>There is nothing stopping method one from compiling on the majority of compilers but if you want to be standard conforming then you need stop using it.  It is deprecated and eventually(hopefully) compiler support for it will be removed.</p>\n\n<p>If you need Unicode support then use a <code>std::wstring</code> which wraps a <code>wchar_t*</code></p>\n"}, {"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1464188269, "post_id": 37440786, "comment_id": 62384232, "body": "Arrays can be initialized with string literals so <code>char str[] = &quot;Hello World&quot;;</code> is both valid and correct. The resulting array can be modifier but cannot be resized, just as you can&#39;t resize memory allocated with the <code>new</code> operator. For <code>char *</code> pointers I would use <code>malloc()</code> on <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> because it does not have a constructor so you will have the advantage of calling <code>realloc()</code> if needed."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1464189611, "post_id": 37440786, "comment_id": 62385278, "body": "@iharob I agree, except that I would use <code>std::string</code> if I need a string with dynamic allocation."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1464189809, "post_id": 37440786, "comment_id": 62385436, "body": "Minor point: IMO an important distinction for experimenters.  &quot;You may not change the content of the string literal.&quot; is not specified by the language -  it <i>may</i> work - it may not, code may crash.  As you imply, <i>attempting</i> to do so is UB."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1464190074, "post_id": 37440786, "comment_id": 62385625, "body": "@user2079303 Yes that&#39;s 100% true. It would be way more efficient and more <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a>ish. Also, it would avoid the hell of dealing with memory allocation and deallocation."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1464190388, "post_id": 37440786, "comment_id": 62385836, "body": "@chux true I suppose. I didn&#39;t technically say &quot;standard says that you may not...&quot;, but it was implied. I guess I was projecting the limitation that I put on myself to never do UB. The answer should be correct now."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 3, "last_activity_date": 1464191231, "last_edit_date": 1464191231, "creation_date": 1464188070, "answer_id": 37440786, "question_id": 37440655, "link": "https://stackoverflow.com/questions/37440655/direct-assignment-vs-dynamic-allocation-for-char-string/37440786#37440786", "title": "Direct assignment vs Dynamic allocation for char * string", "body": "<p>My answer concerns c++. Some details are different from c.</p>\n\n<blockquote>\n  <ol>\n  <li>What's the fundamental difference between these two methods? Any advantages/disadvantages?</li>\n  </ol>\n</blockquote>\n\n<p>Let's take a look at your first code:</p>\n\n<pre><code>char * str = \"Hello World\";\n</code></pre>\n\n<p>This is ill formed. You may not assign a string literal to a non-const pointer. At least not since c++11. Prior to that the conversion was merely deprecated.</p>\n\n<p>This:</p>\n\n<pre><code>const char* str = \"Hello World\";\n</code></pre>\n\n<p>Would be correct. But, if you need to modify the string, then this is not an option.</p>\n\n<blockquote>\n  <p>Edit: Actually I am programming using WinAPI with tchar string in VS2015, and method 1 compiles perfectly.</p>\n</blockquote>\n\n<p>Even if your compiler supports the conversion, doing so is quite dangerous because you may accidentally end up modifying the string literal, which is bad because<sup>\u2020</sup></p>\n\n<p>Let's see your second code:</p>\n\n<p><strike></p>\n\n<pre><code>char * str = new char [12];\nstrcpy(str,\"Hellow World\");\n</code></pre>\n\n<p>This invokes undefined behaviour. The string literal is 13 characters long (because of the null terminal character) and the <code>strcpy</code> overflows the allocated array.\n</strike></p>\n\n<p>Edit: The code in question is fixed now, but this demonstrates well, why manually specifying the size is error prone.</p>\n\n<p>I recommend a simpler approach:</p>\n\n<pre><code>char str[] = \"Hello World\";\n</code></pre>\n\n<p>This is more concise, and leaves no possibility of using a wrong sized array. It is also more efficient than dynamic allocation, but not as efficient as using the string literal directly. However, unlike a string literal, you may modify this array.</p>\n\n<p>If the array is local, then it is destroyed at the end of scope. Also, you can not resize the array. If you need a resizeable string, then you do need dynamic allocation. I recommend <code>std::string</code> if you need dynamic allocation:</p>\n\n<pre><code>std::string str(\"Hello World\");\n</code></pre>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Should I clean the memory manually for method 1?</li>\n  </ol>\n</blockquote>\n\n<p>No, you should not. String literals have static storage.</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>What is the life span for the string in method 1? Can I trust it to persist as long as the pointer is still valid?</li>\n  </ol>\n</blockquote>\n\n<p>You can trust that the string literal exits throughout the entire execution of your program.</p>\n\n<blockquote>\n  <p>Can I change the content (provided I do not run over the '\\0' at the end)?</p>\n</blockquote>\n\n<p><sup>\u2020</sup> Modifying a string literal would have undefined behaviour. You don't want undefined behaviour anywhere near your program.</p>\n\n<blockquote>\n  <p>The std::string is terrible with Unicode handling.</p>\n</blockquote>\n\n<p><code>std::string</code> has exactly the same unicode handling as plain character arrays do.</p>\n\n<blockquote>\n  <p>Imagine you have two projects in a solution, one with Unicode other with multi-byte, and these two projects use the same library. Inside this library, it is good to use tchar. std string you must explicitly tell which version it is.</p>\n</blockquote>\n\n<p>I would avoid using <code>tchar</code> at all except when dealing with windows API. But if you do use it and need the niceties of <code>std::string</code>, then you can simply use <code>std::basic_string&lt;tchar&gt;</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 198, "user_id": 3497401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16440fd492f49c0e9978f3c1df0d67c1?s=128&d=identicon&r=PG&f=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/3497401/leon"}, "edited": false, "score": 0, "creation_date": 1464189233, "post_id": 37440947, "comment_id": 62385014, "body": "Really appreciate this knowledge on the fact that string literal content is constant and it is stored as static. Maybe it is due to my bad English that others do not get my question, but this is the answer I need. Thank you."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 3, "last_activity_date": 1464351021, "last_edit_date": 1464351021, "creation_date": 1464188465, "answer_id": 37440947, "question_id": 37440655, "link": "https://stackoverflow.com/questions/37440655/direct-assignment-vs-dynamic-allocation-for-char-string/37440947#37440947", "title": "Direct assignment vs Dynamic allocation for char * string", "body": "<p>In this declaration</p>\n\n<pre><code>char * str = \"Hello World\";\n</code></pre>\n\n<p>that is valid for C and is not valid for C++ there are created two objects.</p>\n\n<p>First of all the compiler creates a zero-terminated character array with the static storage duration for string literal <code>\"Hello World\"</code>. </p>\n\n<p>Ib C string literals have types of non-constant character arrays while in C++ string literals have types of constant character arrays.</p>\n\n<p>Nevertheless neither in C nor in C++ you may modify a string literal. Any attempt to modify a string literal results in undefined behavior. </p>\n\n<p>That means also that you may not clear the memory occupied by a string literal. It is the compiler that reserves the memory for a string literal.</p>\n\n<p>In C the string literal used in the declaration has type <code>char[12]</code> while in C++ it has type <code>const char[12]</code>.</p>\n\n<p>Thus in C++ the declaration will look like</p>\n\n<pre><code>const char * str = \"Hello World\";\n</code></pre>\n\n<p>The second object that is created in the declaration is the pointer named <code>str</code> that points to the first character of the string literal.  The pointer itself can be changed that is it can be reassigned.</p>\n\n<p>If the pointer is declared in a code block then it has the automatic storage duration. The storage duration of the pointer does not influence on the storage duration of the string literal that has as mentioned above the static storage duration.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1464189940, "creation_date": 1464189940, "answer_id": 37441532, "question_id": 37440655, "link": "https://stackoverflow.com/questions/37440655/direct-assignment-vs-dynamic-allocation-for-char-string/37441532#37441532", "title": "Direct assignment vs Dynamic allocation for char * string", "body": "<blockquote>\n  <p>What is the life span for the string in method 1?</p>\n</blockquote>\n\n<p>For the string literal itself, the lifetime of the program; storage for the literal is allocated when the program starts (maybe even as soon as the program is loaded into memory) and released when the program exits.</p>\n\n<blockquote>\n  <p>Can I trust it to persist as long as the pointer is still valid? </p>\n</blockquote>\n\n<p>You can trust the literal to persist regardless of the lifetime of the pointer variable <code>str</code>.</p>\n\n<blockquote>\n  <p>Can I change the content (provided I do not run over the '\\0' at the end)?</p>\n</blockquote>\n\n<p>No.  C++ string literals are arrays of <code>const char</code>, meaning they cannot be modified (which would defeat the entire purpose of them being a <em>literal</em>; it's logically the same thing as changing the content of <code>42</code>).  </p>\n\n<blockquote>\n  <p>What's the fundamental difference between these two methods? </p>\n</blockquote>\n\n<p>The first method does not set aside any new memory, and the contents of what <code>str</code> points to may not be modified.  </p>\n\n<p>The second method dynamically allocates a new block of memory and copies the <em>contents</em> of the string literal to it; you may modify the contents of the allocated block to your heart's content.</p>\n\n<blockquote>\n  <p>Any advantages/disadvantages?</p>\n</blockquote>\n\n<p>Use the first method to create symbolic constants for string literals (which you <em>want</em> to do - I've been burned by misspelling literals more than once).  </p>\n\n<p>There aren't many good use cases for the second method; if you need to manipulate text data, use the <code>std::string</code> type instead of arrays of <code>char</code>.  C-style string handling is a <em>massive pain in the ass</em>, and the <code>std::string</code> type makes life <em>much</em> easier in that respect.  If you need to create and store multiple strings, use a standard container like <code>std::vector</code>.  </p>\n"}], "owner": {"reputation": 198, "user_id": 3497401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16440fd492f49c0e9978f3c1df0d67c1?s=128&d=identicon&r=PG&f=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/3497401/leon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1739, "favorite_count": 0, "accepted_answer_id": 37440947, "answer_count": 5, "score": 1, "last_activity_date": 1464351254, "creation_date": 1464187697, "last_edit_date": 1464351254, "question_id": 37440655, "link": "https://stackoverflow.com/questions/37440655/direct-assignment-vs-dynamic-allocation-for-char-string", "title": "Direct assignment vs Dynamic allocation for char * string", "body": "<p>I have being using C++ for quite some time now, but there is one fundamental concept that I could not get it.  First I will list two ways of assigning a text string to a char *.</p>\n\n<p>Method 1:</p>\n\n<pre><code>char * str = \"Hello World\";\n</code></pre>\n\n<p>Method 2:</p>\n\n<pre><code>char * str = new char [12];\nstrcpy(str,\"Hello World\");\n</code></pre>\n\n<p>I am very familiar with method 2.  Method 1 is the one that gives me headache.  My questions are</p>\n\n<ol>\n<li>What's the fundamental difference between these two methods?  Any advantages/disadvantages?</li>\n<li>Should I clean the memory manually for method 1?</li>\n<li>What is the life span for the string in method 1?  Can I trust it to persist as long as the pointer is still valid?  Can I change the content (provided I do not run over the '\\0' at the end)?</li>\n</ol>\n\n<p>I have read countless C++ textbooks and articles. They all tell me method 1 works with no elaboration on the repercussions. My own experimentation does not yield convincing results.</p>\n\n<p>Thank you (and maybe excuse me for my bad English)</p>\n\n<p><em>Edit</em>:\nActually I am programming using WinAPI with tchar string in VS2015, and method 1 compiles perfectly. The std::string is terrible with Unicode handling.</p>\n\n<p>Imagine you have two projects in a solution, one with Unicode other with multi-byte, and these two projects use the same library. Inside this library, it is good to use tchar. std string you must explicitly tell which version it is.</p>\n\n<p>I have to do this because the multi-byte project is a dll I need to inject into another app. The unicode version of the DLL will crash the app, only the multi-byte works.</p>\n"}, {"tags": ["c++", "cryptography", "aes", "aes-ni"], "comments": [{"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1464201542, "post_id": 37440521, "comment_id": 62392514, "body": "AES has only one block size: 128-bits. Rijndael supports other block sizes such as 256-bits but note that much less review has been done on larger block sizes and they may even be less secure."}, {"owner": {"reputation": 791, "user_id": 2777695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ffd95d48ed4ce629864b21ae7408f19?s=128&d=identicon&r=PG&f=1", "display_name": "JGU", "link": "https://stackoverflow.com/users/2777695/jgu"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1464201871, "post_id": 37440521, "comment_id": 62392697, "body": "@zaph -the reason for the reduction in security is a wider block generates twice as many round keys from the same fixed input key, but that is not the issue with this code.."}, {"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1464218055, "post_id": 37440521, "comment_id": 62399957, "body": "I&#39;ve voted this up as it is an OK question. But block ciphers combined with a secure <i>mode of operation</i> should be enough to encrypt 256 bit blocks. I don&#39;t completely see the point in using Rijndael-256 instead (then again, there are reasons for using 256 bit block ciphers, so OK)."}, {"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1464278650, "post_id": 37440521, "comment_id": 62430413, "body": "The best thing to do here is debug or print out the intermediate values and compare them with an implementation that does already perform Rijndael-256."}, {"owner": {"reputation": 791, "user_id": 2777695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ffd95d48ed4ce629864b21ae7408f19?s=128&d=identicon&r=PG&f=1", "display_name": "JGU", "link": "https://stackoverflow.com/users/2777695/jgu"}, "reply_to_user": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1464285539, "post_id": 37440521, "comment_id": 62434507, "body": "@Maarten -I&#39;ve scrapped 256 for now.. I&#39;ll revisit it later (frustrated). The problem with that approach though, is that Intel NI is LE, and Rijndael is BE, so you either have to transpose each rounds output, or write Rijndael as LE to compare (best choice)."}, {"owner": {"reputation": 791, "user_id": 2777695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ffd95d48ed4ce629864b21ae7408f19?s=128&d=identicon&r=PG&f=1", "display_name": "JGU", "link": "https://stackoverflow.com/users/2777695/jgu"}, "reply_to_user": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1464287899, "post_id": 37440521, "comment_id": 62435874, "body": "@Maarten -Right now I&#39;m trying to figure out a speed variance, whether it&#39;s a bug, or hyperthreading/overclock/memory creating the variance (runs between 1800-4700 MB p/s on my i7-6700T, mostly high but dips.. but 4+GB seems too high?)."}, {"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1464288508, "post_id": 37440521, "comment_id": 62436211, "body": "It can be pretty fast, I would not be too surprised. Send me a  i7-6700T and I&#39;ll be happy to test."}, {"owner": {"reputation": 791, "user_id": 2777695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ffd95d48ed4ce629864b21ae7408f19?s=128&d=identicon&r=PG&f=1", "display_name": "JGU", "link": "https://stackoverflow.com/users/2777695/jgu"}, "edited": false, "score": 0, "creation_date": 1464288967, "post_id": 37440521, "comment_id": 62436468, "body": "Just passed 10000 loops of AESAVS so.. pretty fast. Gotta love those intrinsics.."}], "owner": {"reputation": 791, "user_id": 2777695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ffd95d48ed4ce629864b21ae7408f19?s=128&d=identicon&r=PG&f=1", "display_name": "JGU", "link": "https://stackoverflow.com/users/2777695/jgu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 499, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1464187421, "creation_date": 1464187421, "question_id": 37440521, "link": "https://stackoverflow.com/questions/37440521/c-aes-ni-decrypting-a-256-bit-block", "title": "C++ AES-NI decrypting a 256 bit block", "body": "<p>So here's my problem.. I am writing out an AES-NI implementation for a library, and I am stuck on the decryption of a 256 bit block. Here's what I know.. The 128 bit block works perfectly. The encryption of a 256 block aligns with a proven Rijndael implementation. The expanded key also aligns with the other Rijndael implementation (allowing for the little endian byte order).\nThe routine uses a blend and shift mask to compensate for the offset column shuffle of a 256 bit block, it is the inverse of the mask used to encrypt the block, this also tested and appears to be working fine.\nHere is the encrypt function:</p>\n\n<pre><code>    void Encrypt32(const std::vector&lt;byte&gt; &amp;Input, const size_t InOffset, std::vector&lt;byte&gt; &amp;Output, const size_t OutOffset)\n{\n    const size_t LRD = m_expKey.size() - 3;\n    size_t keyCtr = 0;\n    __m128i RIJNDAEL256_MASK = { 0,1,6,7,4,5,10,11,8,9,14,15,12,13,2,3 };\n    __m128i BLEND_MASK = _mm_set_epi32(0x80000000, 0x80800000, 0x80800000, 0x80808000);\n    __m128i block1 = _mm_loadu_si128((const __m128i*)(const void*)&amp;Input[InOffset]);\n    __m128i block2 = _mm_loadu_si128((const __m128i*)(const void*)&amp;Input[InOffset + 16]);\n    __m128i temp1, temp2;\n\n    block1 = _mm_xor_si128(block1, m_expKey[keyCtr]);\n    block2 = _mm_xor_si128(block2, m_expKey[++keyCtr]);\n\n    while (keyCtr != LRD)\n    {\n        temp1 = _mm_blendv_epi8(block1, block2, BLEND_MASK);    // combine 2 blocks\n        temp2 = _mm_blendv_epi8(block2, block1, BLEND_MASK);\n        temp1 = _mm_shuffle_epi8(temp1, RIJNDAEL256_MASK);      // shuffle\n        temp2 = _mm_shuffle_epi8(temp2, RIJNDAEL256_MASK);\n        block1 = _mm_aesenc_si128(temp1, m_expKey[++keyCtr]);   // encrypt\n        block2 = _mm_aesenc_si128(temp2, m_expKey[++keyCtr]);\n    }\n\n    temp1 = _mm_blendv_epi8(block1, block2, BLEND_MASK);\n    temp2 = _mm_blendv_epi8(block2, block1, BLEND_MASK);\n    temp1 = _mm_shuffle_epi8(temp1, RIJNDAEL256_MASK);\n    temp2 = _mm_shuffle_epi8(temp2, RIJNDAEL256_MASK);\n    block1 = _mm_aesenclast_si128(temp1, m_expKey[++keyCtr]);\n    block2 = _mm_aesenclast_si128(temp2, m_expKey[++keyCtr]);\n\n    _mm_storeu_si128((__m128i*)(void*)&amp;Output[OutOffset], block1);\n    _mm_storeu_si128((__m128i*)(void*)&amp;Output[OutOffset + 16], block2);\n}\n</code></pre>\n\n<p>This is the inverse transform:</p>\n\n<pre><code>    void Decrypt32(const std::vector&lt;byte&gt; &amp;Input, const size_t InOffset, std::vector&lt;byte&gt; &amp;Output, const size_t OutOffset)\n{\n    const size_t LRD = m_expKey.size() - 3;\n    __m128i RIJNDAELINV_MASK = { 0,1,14,15,4,5,2,3,8,9,6,7,12,13,10,11 };\n    __m128i BLEND_MASK = _mm_set_epi32(0x80000000, 0x80800000, 0x80800000, 0x80808000);\n    __m128i block1 = _mm_loadu_si128((const __m128i*)(const void*)&amp;Input[InOffset]);\n    __m128i block2 = _mm_loadu_si128((const __m128i*)(const void*)&amp;Input[InOffset + 16]);\n    __m128i temp1, temp2;\n    size_t keyCtr = 0;\n\n    block1 = _mm_xor_si128(block1, m_expKey[keyCtr]);\n    block2 = _mm_xor_si128(block2, m_expKey[++keyCtr]);\n\n    while (keyCtr != LRD)\n    {\n        temp1 = _mm_aesdec_si128(block1, m_expKey[++keyCtr]);   // decrypt\n        temp2 = _mm_aesdec_si128(block2, m_expKey[++keyCtr]);\n        temp1 = _mm_shuffle_epi8(temp1, RIJNDAELINV_MASK);      // shuffle\n        temp2 = _mm_shuffle_epi8(temp2, RIJNDAELINV_MASK);\n        block1 = _mm_blendv_epi8(temp1, temp2, BLEND_MASK);     // combine\n        block2 = _mm_blendv_epi8(temp2, temp1, BLEND_MASK);\n    }\n\n    temp1 = _mm_aesdeclast_si128(block1, m_expKey[++keyCtr]);\n    temp2 = _mm_aesdeclast_si128(block2, m_expKey[++keyCtr]);\n    temp1 = _mm_shuffle_epi8(temp1, RIJNDAELINV_MASK);\n    temp2 = _mm_shuffle_epi8(temp2, RIJNDAELINV_MASK);\n    block1 = _mm_blendv_epi8(temp1, temp2, BLEND_MASK);\n    block2 = _mm_blendv_epi8(temp2, temp1, BLEND_MASK);\n\n    _mm_storeu_si128((__m128i*)(void*)&amp;Output[OutOffset], block1);\n    _mm_storeu_si128((__m128i*)(void*)&amp;Output[OutOffset + 16], block2);\n}\n</code></pre>\n\n<p>I've been debugging this for hours, and just can't spot the problem, can anyone see why this wouldn't work? I can post the code to git if that would help.</p>\n"}, {"tags": ["c++", "windows", "qt"], "comments": [{"owner": {"reputation": 3997, "user_id": 5006372, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f7df1194f7039c4f4b85d9eb244e14c9?s=128&d=identicon&r=PG&f=1", "display_name": "Zen", "link": "https://stackoverflow.com/users/5006372/zen"}, "edited": false, "score": 0, "creation_date": 1464190491, "post_id": 37440501, "comment_id": 62385912, "body": "<code>qwindows.dll</code> should be put into `myapp\\platforms\\`"}, {"owner": {"reputation": 13987, "user_id": 109941, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c8a94e8bd3a691d079556cdf5a0b248?s=128&d=identicon&r=PG", "display_name": "Jim G.", "link": "https://stackoverflow.com/users/109941/jim-g"}, "edited": false, "score": 1, "creation_date": 1477832996, "post_id": 37440501, "comment_id": 67913808, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/16773789/qt5-static-build-yields-failed-to-load-platform-plugin-windows\">Qt5 Static Build yields Failed to load platform plugin &quot;windows&quot;</a>"}, {"owner": {"reputation": 251, "user_id": 2476270, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/70e47b968d4600ed4cfeca382b792b06?s=128&d=identicon&r=PG", "display_name": "exo", "link": "https://stackoverflow.com/users/2476270/exo"}, "edited": false, "score": 0, "creation_date": 1478003803, "post_id": 37440501, "comment_id": 67973522, "body": "Do you read my problem, my corrective steps that did not work? All was from thread you signed as duplicate."}], "answers": [{"comments": [{"owner": {"reputation": 251, "user_id": 2476270, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/70e47b968d4600ed4cfeca382b792b06?s=128&d=identicon&r=PG", "display_name": "exo", "link": "https://stackoverflow.com/users/2476270/exo"}, "edited": false, "score": 0, "creation_date": 1464257705, "post_id": 37441896, "comment_id": 62415354, "body": "Super! Thanx for solution. I test it in the past, but without succes. Now I noticed, that there are more than one windeployqt.exe utility. One utility for each one platform. I might have in the past triggered the wrong version of the utility."}], "tags": [], "owner": {"reputation": 2080, "user_id": 1160992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23ddf8179aa985dcb04158c265effdc9?s=128&d=identicon&r=PG", "display_name": "codestation", "link": "https://stackoverflow.com/users/1160992/codestation"}, "is_accepted": true, "score": 3, "last_activity_date": 1464190848, "creation_date": 1464190848, "answer_id": 37441896, "question_id": 37440501, "link": "https://stackoverflow.com/questions/37440501/how-to-solve-windows-platform-error/37441896#37441896", "title": "How to solve windows platform error", "body": "<p>By default Qt looks for its plugins in the application directory, but you must keep the plugin subdirectories as well.</p>\n\n<p>In your case just copy <code>qwindows.dll</code> into <code>myapp\\platforms</code> dir so your app can find the plugin.</p>\n\n<p>Better yet, use the windeployqt.exe app bundled with your Qt installation and it will copy all the required Qt libraries and plugins.</p>\n\n<p>For example i use the following as part of my deployment script:</p>\n\n<p><code>windeployqt.exe myapp.exe --dir myapp_deps</code></p>\n\n<p>This will copy all the required Qt libraries, plugins and VC++ redistributables (if you have VCINSTALLDIR/VSINSTALLDIR env correctly configured) to the myapp_deps directory. (Note: if you omit the <code>--dir</code> argument then the command will copy all the dependencies to the current directory where myapp.exe resides).</p>\n\n<p>After this if you put myapp.exe into myapp_deps and relocate the folder to another PC without Qt installed then myapp.exe will run.</p>\n"}], "owner": {"reputation": 251, "user_id": 2476270, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/70e47b968d4600ed4cfeca382b792b06?s=128&d=identicon&r=PG", "display_name": "exo", "link": "https://stackoverflow.com/users/2476270/exo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 0, "accepted_answer_id": 37441896, "answer_count": 1, "score": 0, "last_activity_date": 1478002479, "creation_date": 1464187362, "last_edit_date": 1478002479, "question_id": 37440501, "link": "https://stackoverflow.com/questions/37440501/how-to-solve-windows-platform-error", "title": "How to solve windows platform error", "body": "<p>I make Windows application. When I run it on my local computer with QT installation - everything is OK.</p>\n\n<p>But when I run it on another W10 PC or W28R2 server, I get known error.</p>\n\n<blockquote>\n  <p>This application failed to start because it could not find or load the\n  Qt platform plugin \"Windows\" Available platform plugins are: \"windows\"</p>\n</blockquote>\n\n<p>I read all threads about this, but no find solution.</p>\n\n<p>My failed steps</p>\n\n<ol>\n<li>copy libEGL.dll into the myapp dir </li>\n<li>copy libEGLSv2.dll into the myapp dir</li>\n<li>insert qwindows.dll into the myapp dir</li>\n<li>insert all dlls :-) into the myapp dir</li>\n<li>create QT_QPA_PLATFORM_PLUGIN_PATH variable in the project settings</li>\n<li>run myapp with -platform and -platformpluginpath parametters</li>\n<li>use qt.conf file with QT_QPA_PLATFORM_PLUGIN_PATH parameter</li>\n</ol>\n\n<p>Interesting is, that when I rename \"<strong>MYPATH\\Qt\\5.6\\msvc2015_64\\plugins\\platforms</strong>\" directory from \"<strong>platforms</strong>\" to \"<strong>platformsX</strong>\", application on my local computer also begins crash.</p>\n\n<p>It looks like a poorly filled global variable, but nothing works for me.</p>\n\n<p>This sloution was marked as duplicate with  \"Qt5 Static Build yields Failed to load platform plugin \"windows\"\". \nBut here missing windeployqt.exe myapp.exe --dir myapp_deps\nI write that thread and apply all advices, but still had the same problem.</p>\n"}, {"tags": ["c++", "algorithm", "graph-algorithm"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1464187269, "post_id": 37440404, "comment_id": 62383430, "body": "are the rectangles are allowed to overlap? Are you looking for all possible rectangles or only some of them?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1464187660, "post_id": 37440404, "comment_id": 62383751, "body": "are there only two groups of parallel lines that cross at an angle of 90&#186; (as in the pic) or could there also be non orthogonal lines?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1464187849, "post_id": 37440404, "comment_id": 62383905, "body": "In which form do you have the equations for the lines? In which form do you need the output for a rectangle? May an rectangle overlap a line? Vector math allows you to calculate the distance between two parallel lines. See <a href=\"https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Distance_from_a_point_to_a_line</a>"}, {"owner": {"reputation": 93, "user_id": 5033662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1042dfd6dadd14b64a6be4215a08f0fd?s=128&d=identicon&r=PG&f=1", "display_name": "rayallen", "link": "https://stackoverflow.com/users/5033662/rayallen"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1464187951, "post_id": 37440404, "comment_id": 62383981, "body": "@tobi303 the rectangles are allowed to be overlapped . I try to look for all possibilities.  Non orthogonal lines are not considered."}, {"owner": {"reputation": 93, "user_id": 5033662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1042dfd6dadd14b64a6be4215a08f0fd?s=128&d=identicon&r=PG&f=1", "display_name": "rayallen", "link": "https://stackoverflow.com/users/5033662/rayallen"}, "edited": false, "score": 0, "creation_date": 1464188079, "post_id": 37440404, "comment_id": 62384075, "body": "The form of equations  is y = kx + b. A rectangle can overlap a line"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1464188330, "post_id": 37440404, "comment_id": 62384287, "body": "Could you express the lines in programming terms? Like: <code>struct line {double k; double b;}; vector&lt;line&gt; groupA {.....};</code> or whatever you have. Like wise for output format"}, {"owner": {"reputation": 93, "user_id": 5033662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1042dfd6dadd14b64a6be4215a08f0fd?s=128&d=identicon&r=PG&f=1", "display_name": "rayallen", "link": "https://stackoverflow.com/users/5033662/rayallen"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1464188944, "post_id": 37440404, "comment_id": 62384793, "body": "@4386427 I have edited"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 5033662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1042dfd6dadd14b64a6be4215a08f0fd?s=128&d=identicon&r=PG&f=1", "display_name": "rayallen", "link": "https://stackoverflow.com/users/5033662/rayallen"}, "edited": false, "score": 0, "creation_date": 1464189537, "post_id": 37441236, "comment_id": 62385225, "body": "A good solution.  There might be one problem that it includes 4 times&quot; for Loop&quot;,  it might be slow"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 93, "user_id": 5033662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1042dfd6dadd14b64a6be4215a08f0fd?s=128&d=identicon&r=PG&f=1", "display_name": "rayallen", "link": "https://stackoverflow.com/users/5033662/rayallen"}, "edited": false, "score": 0, "creation_date": 1464189964, "post_id": 37441236, "comment_id": 62385547, "body": "@rayallen - since the rectangles can overlap it&#39;s necessary"}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 1, "last_activity_date": 1464191382, "last_edit_date": 1464191382, "creation_date": 1464189210, "answer_id": 37441236, "question_id": 37440404, "link": "https://stackoverflow.com/questions/37440404/is-there-an-algorithm-to-build-rectangles-by-groups-of-paralle-line-segments/37441236#37441236", "title": "Is there an algorithm to build rectangles by groups of paralle line segments", "body": "<p>Assume you have something like:</p>\n\n<pre><code>// line: y = ax + b;\nstruct line {double a; double b;};\n\nvector&lt;line&gt; groupA = {....};     \nvector&lt;line&gt; groupB = {.....};\n</code></pre>\n\n<p>you'll need some thing like this pseudo code:</p>\n\n<pre><code>sort_with_smallest_b_first(groupA);\nsort_with_smallest_b_first(groupB);\n\nfor (int n1=0; n1 &lt; groupA.size()-1; ++n1)\n{\n   for (int n2=n1+1; n2 &lt; groupA.size(); ++n2)\n   {\n       for (int j1=0; j1 &lt; groupB.size()-1; ++j1)\n       { \n           for (int j2=j1+1; j2 &lt; groupB.size(); ++j2)\n           { \n               // Now you have the recatangle between the lines\n               // groupA[n1], groupA[n2]\n               // groupB[j1], groupB[j2]\n               double d1 = distance(groupA[n1], groupA[n2]);\n               double d2 = distance(groupB[j1], groupB[j2]);\n               if (d1 &gt;= dmin &amp;&amp; d2 &gt;= dmin)\n               {\n                   // Add rectangle to output\n               }\n           }\n       }\n   }\n}\n</code></pre>\n\n<p>For calculating distance between lines see: <a href=\"https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line</a></p>\n\n<p>If performance is an issue you can improve performance by first calculating all non-overlapping rectangles and then create the overlapping rectangles from the group of non-overlapping rectangles. It will save you some distance calculations, i.e. as you do a simple add of the distance from the non-overlapping rectangles instead of always recalculating using the \"complex\" formula.</p>\n"}], "owner": {"reputation": 93, "user_id": 5033662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1042dfd6dadd14b64a6be4215a08f0fd?s=128&d=identicon&r=PG&f=1", "display_name": "rayallen", "link": "https://stackoverflow.com/users/5033662/rayallen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1574329407, "creation_date": 1464187114, "last_edit_date": 1574329407, "question_id": 37440404, "link": "https://stackoverflow.com/questions/37440404/is-there-an-algorithm-to-build-rectangles-by-groups-of-paralle-line-segments", "title": "Is there an algorithm to build rectangles by groups of paralle line segments", "body": "<p>I try to find an algo to build all the rectangles by groups of paralle lines. The equations for all the lines are given. Here is an example to explain the situation, which shows two groups of parallel lines and they are perpendicular to each other: (the red lines in group(a) are parallel and the green lines in group(b) are also parallel.)</p>\n\n<p><a href=\"https://i.stack.imgur.com/yi1qz.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yi1qz.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>The rectangle should be subject to one constrant, that the minimal length of its edge must be bigger than the d_min, see figure. And the rectangles can overlap to each other.</p>\n\n<pre><code>Line equation: y = kx + b\nstruct sLine \n{\n  float k;\n  float b;\n}\n// Input\nvetor&lt;sLine&gt; vecLineGroupA;\nvetor&lt;sLine&gt; vecLineGroupA;\n\n// Output\nstruct sRectangle\n{\n  // 4 edges of a rectangle\n  sLine  Line1;\n  sLine  Line2;\n  sLine  Line3;\n  sLine  Line4;\n}\n</code></pre>\n\n<p>Is there an algo to solve this Problem, or anyone has an idea for that?</p>\n"}, {"tags": ["c++", "c++11", "constexpr"], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 6381568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c9d0692c9674c42834109dc3ef24f00?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/6381568/charlie"}, "edited": false, "score": 0, "creation_date": 1464188019, "post_id": 37440515, "comment_id": 62384026, "body": "Thank you for your quick response. I did fancy the constexpr approach more then using recursive templates, good to know this doesn&#39;t affect the time of evaluation."}, {"owner": {"reputation": 20275, "user_id": 887836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UmvnY.jpg?s=128&g=1", "display_name": "Alexander Oh", "link": "https://stackoverflow.com/users/887836/alexander-oh"}, "edited": false, "score": 0, "creation_date": 1464823607, "post_id": 37440515, "comment_id": 62647592, "body": "How can you tell if a function is constexpr at compile time by calling it? If one of the arguments isnt constexpr the call will fail as well right?"}, {"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "reply_to_user": {"reputation": 20275, "user_id": 887836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UmvnY.jpg?s=128&g=1", "display_name": "Alexander Oh", "link": "https://stackoverflow.com/users/887836/alexander-oh"}, "edited": false, "score": 0, "creation_date": 1464839946, "post_id": 37440515, "comment_id": 62651169, "body": "@Alex: Yes, if you try to evaluate the function in a constant expression, and it is not a constant expression, compilation will fail."}, {"owner": {"reputation": 20275, "user_id": 887836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UmvnY.jpg?s=128&g=1", "display_name": "Alexander Oh", "link": "https://stackoverflow.com/users/887836/alexander-oh"}, "edited": false, "score": 0, "creation_date": 1464855112, "post_id": 37440515, "comment_id": 62657875, "body": "@Cornstalks can you conclude that the error comes from the function definition and not from the argument definition?"}], "tags": [], "owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "is_accepted": true, "score": 3, "last_activity_date": 1464187410, "creation_date": 1464187410, "answer_id": 37440515, "question_id": 37440370, "link": "https://stackoverflow.com/questions/37440370/is-it-possible-to-check-if-const-value-is-known-at-compile-time/37440515#37440515", "title": "Is it possible to check if const value is known at compile time?", "body": "<blockquote>\n  <ol>\n  <li>Can I safely assume that ConstMax&lt;...>::Value is always known at compile time?</li>\n  </ol>\n</blockquote>\n\n<p>Yes, since it's initialized with a constant expression. But I'd modify <code>Value</code> to be <code>constexpr</code> instead of just <code>const</code>.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Is there a way to check if constexpr functions/methods are evaluated at compile time?</li>\n  </ol>\n</blockquote>\n\n<p>Yes. Try using them in a <code>constexpr</code> expression. If it works, they're being evaluated at compile time. If it fails to compile, then it's not being evaluated at compile time.</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>I understand members/methods/functions defined as constexpr are not necessarily evaluated during compile time, does the fact that Value is defined as being static const change anything about this or am I better off implementing this specific case as a recursive template class?</li>\n  </ol>\n</blockquote>\n\n<p>If you use the members in a constant expression, you're forcing them to be evaluated at compile time. So if you cared, I'd just make sure to evaluate them in constant expressions (via <code>constexpr</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 115, "user_id": 6381568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c9d0692c9674c42834109dc3ef24f00?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/6381568/charlie"}, "edited": false, "score": 0, "creation_date": 1464188107, "post_id": 37440584, "comment_id": 62384093, "body": "Thank you, this will become a really nice extension to my unit tests."}], "tags": [], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "is_accepted": false, "score": 4, "last_activity_date": 1464187538, "creation_date": 1464187538, "answer_id": 37440584, "question_id": 37440370, "link": "https://stackoverflow.com/questions/37440370/is-it-possible-to-check-if-const-value-is-known-at-compile-time/37440584#37440584", "title": "Is it possible to check if const value is known at compile time?", "body": "<p>To check if an expression is <code>constexpr</code> (i.e., constant expression) you could use <code>std::integral_constant</code> type trait as follows:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\ntemplate&lt;typename T, T... Xs&gt; class ConstMax {\n  template&lt;typename... Ts&gt; static constexpr T Max(Ts... xs);\n  template&lt;typename Tx&gt; static constexpr T Max(Tx x) { return x;}\n  template&lt;typename T1, typename T2, typename... Ts&gt;\n  static constexpr T\n  Max(T1 x, T2 y, Ts... xs) {\n        return y &gt; x ? Max&lt;T2, Ts...&gt;(y, xs...) : Max&lt;T1, Ts...&gt;(x, xs...);\n  }\npublic:\n    static const T Value = Max(Xs...);\n};\n\nint main() {\n std::cout &lt;&lt; std::integral_constant&lt;int, ConstMax&lt;int, 1, 8, 66, 32, 90, 12, 33&gt;::Value&gt;::value &lt;&lt; std::endl;   \n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/8286cec4215ab285\" rel=\"nofollow\"><strong>Live Demo</strong></a></p>\n\n<p>If it's not <code>constexpr</code> it will break the compilation process.</p>\n"}], "owner": {"reputation": 115, "user_id": 6381568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c9d0692c9674c42834109dc3ef24f00?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/6381568/charlie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1105, "favorite_count": 0, "accepted_answer_id": 37440515, "answer_count": 2, "score": 9, "last_activity_date": 1464823313, "creation_date": 1464187021, "last_edit_date": 1464823313, "question_id": 37440370, "link": "https://stackoverflow.com/questions/37440370/is-it-possible-to-check-if-const-value-is-known-at-compile-time", "title": "Is it possible to check if const value is known at compile time?", "body": "<p>Currently I am rewriting/extending my C++ utility library taking new C++11 features into account. One of the new additions is a template class which gives the maximum value of a set of numbers, hopefully at compile time.</p>\n\n\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename T, T... Xs&gt; class ConstMax\n{\nprivate:\n    template&lt;typename... Ts&gt; static constexpr T Max(Ts... xs);\n\n    template&lt;typename Tx&gt; static constexpr T Max(Tx x)\n    {\n        return x;\n    }\n\n    template&lt;typename T1, typename T2, typename... Ts&gt; static constexpr T Max(T1 x, T2 y, Ts... xs)\n    {\n        return y &gt; x ? Max&lt;T2, Ts...&gt;(y, xs...) : Max&lt;T1, Ts...&gt;(x, xs...);\n    }\n\npublic:\n    static const T Value = Max(Xs...);\n};\n</code></pre>\n\n<p>An example use of this class:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int max = ConstMax&lt;int, 1, 8, 66, 32, 90, 12, 33&gt;::Value;\n</code></pre>\n\n<p>Here another example which might make it harder to verify if ConstMax&lt;...>::Value was actually evaluated during compile time:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename... Ts&gt; class Variant\n{\npublic:\n    static const size_t MaxValueSize = ConstMax&lt;size_t, sizeof(Ts)...&gt;::Value;\n};\n</code></pre>\n\n<p>Which results in <code>max = 90</code>. I stepped trough this code using gdb and it seems there is no function call executed during the assignment of max.</p>\n\n<p>My questions:</p>\n\n<ol>\n<li>Can I safely assume that <code>ConstMax&lt;...&gt;::Value</code> is always known at compile time?</li>\n<li>Is there a way to check if <code>constexpr</code> functions/methods are evaluated at compile time?</li>\n<li>I understand members/methods/functions defined as <code>constexpr</code> are not necessarily evaluated during compile time, does the fact that <code>Value</code> is defined as being <code>static const</code> change anything about this or am I better off implementing this specific case as a recursive template class?</li>\n</ol>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1464186939, "post_id": 37440319, "comment_id": 62383146, "body": "Welcome to Stack Overflow! It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming.  Further reading: <b><a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a></b>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1464187173, "post_id": 37440319, "comment_id": 62383359, "body": "Are using standard library classes and algorithms allowed? If not then use e.g. a <a href=\"http://en.cppreference.com/w/cpp/container/multiset\" rel=\"nofollow noreferrer\"><code>std::multiset</code></a> for the values, and then simply <a href=\"http://en.cppreference.com/w/cpp/container/multiset/count\" rel=\"nofollow noreferrer\">count</a> each &quot;key&quot;."}, {"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 1, "creation_date": 1464187187, "post_id": 37440319, "comment_id": 62383371, "body": "@AndrewHebblethwaite, also, I would suggest to get a pen/pencil and a paper and try to solve the problem with pen and paper alone. If the solution is satisfactory, start coding. This will produce a good al;gorythm and eliminate many solution bugs."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1464188404, "post_id": 37440319, "comment_id": 62384357, "body": "Tip: if you can&#39;t think of better names than &quot;counter1&quot;, &quot;counter2&quot;, &quot;temp1&quot;, and &quot;temp2&quot;, it&#39;s usually a sign that you started writing code before figuring out a solution."}], "owner": {"reputation": 1, "user_id": 6381755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E4ZYh.jpg?s=128&g=1", "display_name": "Andrew Hebblethwaite", "link": "https://stackoverflow.com/users/6381755/andrew-hebblethwaite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1464186887, "creation_date": 1464186887, "question_id": 37440319, "link": "https://stackoverflow.com/questions/37440319/most-popular-element-cpp", "title": "Most Popular element (CPP)", "body": "<p>hey guys i'm trying to figure a way to get the most used element in a vector but for some reason it doesn't seem to be working and returning 1, any help would be appreciated.</p>\n\n<p>from what i can see i think my thinking was correct but i guess not, thanks!</p>\n\n<pre><code>    std::sort(Track5Guess.begin(), Track5Guess.end());\n\n\n    temp1 = Track5Guess.at(0);\n\n\n    for (i = 1; i &lt; Track5Guess.size() - 1; i++)\n    {\n        if (track == false)\n        {\n            if (Track5Guess.at(i) == temp1)\n            {\n                counter1++;\n            }\n            else\n            {\n                temp2 = Track5Guess.at(i);\n                track = true;\n                i++;\n            }\n            if (track == true)\n            {\n                if (Track5Guess.at(i) == temp2)\n                {\n                    counter2++;\n                }\n                else\n                {\n                    if (counter2 &gt;= counter1)\n                    {\n                        temp1 = temp2;\n                        track = false;\n                        counter1 = counter2;\n                        counter2 = 0;\n                        temp2 = 0;\n                    }\n\n                    if (counter1 &gt; counter2)\n                    {\n                        track = false;\n                        counter2 = 0;\n                        temp2 = 0;\n                    }\n\n                }\n            }\n\n\n        }\n    }\n    if (i == Track5Guess.size() - 1)\n    {\n        Num2Guess5 = temp1;\n        temp1 = 0;\n        counter1 = 0;\n    }\n</code></pre>\n"}, {"tags": ["c++", "debugging", "error-handling", "assertion"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1464187590, "post_id": 37440057, "comment_id": 62383700, "body": "When you get the assertion failed walk up the callstack to the line of your code that has the bug."}], "answers": [{"tags": [], "owner": {"reputation": 5754, "user_id": 2867061, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cd59dfa471d99e7c625b5dcb191ec8ae?s=128&d=identicon&r=PG&f=1", "display_name": "user31264", "link": "https://stackoverflow.com/users/2867061/user31264"}, "is_accepted": false, "score": 0, "last_activity_date": 1464188352, "creation_date": 1464188352, "answer_id": 37440907, "question_id": 37440057, "link": "https://stackoverflow.com/questions/37440057/c-debug-assertion-failed/37440907#37440907", "title": "c++ debug assertion failed", "body": "<p>For one thing,  <code>Iterator::first</code> and thus the constructor do not neccessarily initialize <code>current</code>.  Second, in <code>Iterator::Iterator(const HashTable &amp; ht): ht { ht }</code>  does it mean that Iterator has a member <code>ht</code> , and the parameter is also called <code>ht</code>?  It is a bad practice. Never call parameters of member functions the same name as class fields.</p>\n"}], "owner": {"reputation": 1, "user_id": 6381168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/148691840ca8650985fa44ee0c58cfb0?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan", "link": "https://stackoverflow.com/users/6381168/bogdan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 860, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464188352, "creation_date": 1464186275, "last_edit_date": 1464187040, "question_id": 37440057, "link": "https://stackoverflow.com/questions/37440057/c-debug-assertion-failed", "title": "c++ debug assertion failed", "body": "<p>I have a problem when I try to run this code</p>\n\n<pre><code>void MyClass::setUp(){\n    list-&gt;clear();\n    Iterator i = ctr.getAll().iterator();\n    while (i.valid()) {\n        list-&gt;addItem(QString::fromStdString(i.elem().getNr()));\n        i.next();\n    }\n}\n</code></pre>\n\n<p>When I exit the function an error occurs:</p>\n\n<blockquote>\n  <p>Debug Assertion Failed!</p>\n  \n  <p>File:C:\\Program Files \\Microsoft Visual Studio 14.0\\ VC\\ include\\\n  xmemory0 line:106</p>\n  \n  <p>Expression: \"(_Ptr_user&amp;(_BIG_ALLOCATION_ALIGNMENT -1))==0 \" &amp;&amp;0</p>\n</blockquote>\n\n<p>I am trying to iterate through a custom list </p>\n\n<p>The Iterator class is this:</p>\n\n<pre><code>void Iterator::first(){\n    while (pos &lt; ht.nrElem &amp;&amp; ht.list[pos] == nullptr)\n        pos++;\n    if (pos &lt; ht.nrElem)\n        current = ht.list[pos];\n}\n\nIterator::Iterator(const HashTable &amp; ht): ht { ht }{\n    pos = 0;\n    first(); // current will refer the first element of the list\n}\n\n\nvoid Iterator::next(){\n    current = current-&gt;getNext();\n    if (current == nullptr) {\n        pos++;\n        first();\n    }\n}\n\nbool Iterator::valid(){\n    return (pos &lt; ht.nrElem) &amp;&amp; (current != nullptr);\n}\n\nCar&amp; Iterator::elem() const{\n    return current-&gt;getCar();\n}\n</code></pre>\n"}, {"tags": ["c++", "out-of-memory", "stdvector"], "comments": [{"owner": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "edited": false, "score": 0, "creation_date": 1464186306, "post_id": 37440045, "comment_id": 62382609, "body": "Run it through a debugger to find exactly where the problem is caused"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1464186574, "post_id": 37440045, "comment_id": 62382837, "body": "Do you have a memory debugger like <a href=\"http://valgrind.org\" rel=\"nofollow noreferrer\">Valgrind</a>? If not then find one and use it, those are very good att finding problems like that."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1464186825, "post_id": 37440045, "comment_id": 62383041, "body": "The code posted as is will not compile.  Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1464186994, "post_id": 37440045, "comment_id": 62383195, "body": "Your comparison doesn&#39;t satisfy the requirements for <code>std::sort</code> (<code>{0,0,1}</code> and <code>{1,0,0}</code> will both be &quot;greater&quot; than the other). This makes your code undefined."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464187409, "post_id": 37440395, "comment_id": 62383554, "body": "This may or may not be the problem.  The OP needs to provide a MCVE to know for sure and they also have UB in their comparison function that may also cause this."}, {"owner": {"reputation": 31, "user_id": 6360265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c412903a43bf8a3df9cbdfe0dc446a70?s=128&d=identicon&r=PG&f=1", "display_name": "Hasi", "link": "https://stackoverflow.com/users/6360265/hasi"}, "edited": false, "score": 0, "creation_date": 1464242669, "post_id": 37440395, "comment_id": 62406250, "body": "Actually I add Point3i types objects to the vector in early part of the code. Didn&#39;t share it because it will be too lengthy. Even the code complete all the loops prior to giving any memory corruption error."}, {"owner": {"reputation": 31, "user_id": 6360265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c412903a43bf8a3df9cbdfe0dc446a70?s=128&d=identicon&r=PG&f=1", "display_name": "Hasi", "link": "https://stackoverflow.com/users/6360265/hasi"}, "edited": false, "score": 0, "creation_date": 1464243214, "post_id": 37440395, "comment_id": 62406503, "body": "I&#39;m trying to categories similar disparities together in this code. I construct the v-disparity map and then calculate road surface and remove disparities corresponding to the road surface. Then I get obstacle only image. Then I divide the image into small patches and calculate mean. Now I&#39;m trying to combine similar patches based on the mean, and the x, y coordinates. a.x = mean, a.y = x-coordinate, a.z=y-coordinate"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 31, "user_id": 6360265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c412903a43bf8a3df9cbdfe0dc446a70?s=128&d=identicon&r=PG&f=1", "display_name": "Hasi", "link": "https://stackoverflow.com/users/6360265/hasi"}, "edited": false, "score": 0, "creation_date": 1464263518, "post_id": 37440395, "comment_id": 62419192, "body": "@Hasi - if you share with us a code, we can find errors in that code, not in code that you don&#39;t share. I&#39;ve found a false positive because you removed part of your code; are you sure that the error isn&#39;t in the code you didn&#39;t shared? Suggestion: prepare, and show us, a complete example, as minimal as possible, that produce the error."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 1, "last_activity_date": 1464187089, "creation_date": 1464187089, "answer_id": 37440395, "question_id": 37440045, "link": "https://stackoverflow.com/questions/37440045/memory-corruption-error-in-vector-access/37440395#37440395", "title": "Memory Corruption error in Vector access", "body": "<p>Look at this fragment</p>\n\n<pre><code>std::vector&lt;cv::Point3i&gt; patches;\nstd::sort(patches.begin(), patches.end(), compare_rect);\ncv::Point3i dpoint1 = patches.front();\nint mean1 = dpoint1.x;\nint cord1 = dpoint1.y;\nint cord2 = dpoint1.z;\n</code></pre>\n\n<p>You declare <code>patches</code> as an empty vector.</p>\n\n<p>You sort it but an empty vector, sorted, remain an empty vector.</p>\n\n<p><code>front()</code> of an empty vector give undefined effects.</p>\n\n<p>And I suppose that accessing <code>dpoint1.x</code>, <code>dpoint.y</code> and <code>dpoint.z</code> doesn't help.</p>\n\n<p>p.s.: sorry for my bad English.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 6360265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c412903a43bf8a3df9cbdfe0dc446a70?s=128&d=identicon&r=PG&f=1", "display_name": "Hasi", "link": "https://stackoverflow.com/users/6360265/hasi"}, "is_accepted": false, "score": 1, "last_activity_date": 1464333212, "creation_date": 1464333212, "answer_id": 37477076, "question_id": 37440045, "link": "https://stackoverflow.com/questions/37440045/memory-corruption-error-in-vector-access/37477076#37477076", "title": "Memory Corruption error in Vector access", "body": "<blockquote>\n  <p>Your comparison doesn't satisfy the requirements for std::sort ({0,0,1} and {1,0,0} will both be \"greater\" than the other). This makes your code undefined. \u2013 molbdnilo</p>\n</blockquote>\n\n<p>This is the reason for the error. Thank you molbdino.</p>\n"}], "owner": {"reputation": 31, "user_id": 6360265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c412903a43bf8a3df9cbdfe0dc446a70?s=128&d=identicon&r=PG&f=1", "display_name": "Hasi", "link": "https://stackoverflow.com/users/6360265/hasi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1464333212, "creation_date": 1464186248, "question_id": 37440045, "link": "https://stackoverflow.com/questions/37440045/memory-corruption-error-in-vector-access", "title": "Memory Corruption error in Vector access", "body": "<p>I get a memory corruption error 'malloc(): memory corruption: 0x000000000234d4b0 ***'. My code is like below. I suspect that error is due to invalid memory access in the vector function. My code is as below.</p>\n\n<pre><code>bool compare_rect(const cv::Point3i &amp;a, const cv::Point3i &amp;b) {\n  if (a.x &gt; b.x) return true;\n  if (a.y &gt; b.y) return true;\n  if (a.z &gt; b.z) return true;\n  return false;\n}\n\nstd::vector&lt;cv::Point3i&gt; patches;\nstd::sort(patches.begin(), patches.end(), compare_rect);\ncv::Point3i dpoint1 = patches.front(); \nint mean1 = dpoint1.x;\nint cord1 = dpoint1.y;\nint cord2 = dpoint1.z;\nint cord3 =0; int cord5 =cord1;\nint cord4 =0; int cord6 =cord2;\nint it = 0;\nfor(int i=1; i &lt; patches.size(); i++){\n  cv::Point3i dpoint2 = patches[i];\n  int mean2 = dpoint2.x; \n  cord3 = dpoint2.y;\n  cord4 = dpoint2.z; \n  if (abs(cord4-cord6)&gt;10){\n    if (abs(cord3-cord5)&gt;10){\n      if(abs(mean2-mean1) &gt; 5){\n        cv::rectangle(display_obstacles, cv::Point(cord1, cord2), cv::Point(cord5, cord6), CV_RGB(0,255,0));\n        cord1 = cord3;\n        cord2 = cord4;\n        it = it + 1;\n      }\n    }\n  }\n  if(i == (patches.size()-1)){\n    cv::rectangle(display_obstacles, cv::Point(cord1, cord2), cv::Point(cord5, cord6), CV_RGB(0,255,0));\n  }\n  mean1 = mean2;\n  cord5 = cord3;\n  cord6 = cord4;\n}   \n</code></pre>\n\n<p>Can you help me identify the error ?</p>\n\n<p>Your help is much appreciated. </p>\n"}, {"tags": ["c++", "variadic-templates", "variadic-functions"], "comments": [{"owner": {"reputation": 6924, "user_id": 835629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b38fa6792bcb51a7fe773b5f942c66c2?s=128&d=identicon&r=PG", "display_name": "coyotte508", "link": "https://stackoverflow.com/users/835629/coyotte508"}, "edited": false, "score": 0, "creation_date": 1464186646, "post_id": 37439985, "comment_id": 62382893, "body": "<code>template&lt;typename RT, typename T, typename Rest...&gt;</code> &lt;- the <code>...</code> should be <i>before</i> <code>Rest</code>. What you want to do is doable in c++11, working on it atm."}], "answers": [{"comments": [{"owner": {"reputation": 981, "user_id": 538955, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/17dcb6a8551ade5b49b6e6f05a55b93e?s=128&d=identicon&r=PG", "display_name": "Ken Birman", "link": "https://stackoverflow.com/users/538955/ken-birman"}, "edited": false, "score": 0, "creation_date": 1464187773, "post_id": 37440301, "comment_id": 62383845, "body": "Very cool.  I&#39;ll try this and see if I can turn it into what I&#39;m after."}, {"owner": {"reputation": 981, "user_id": 538955, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/17dcb6a8551ade5b49b6e6f05a55b93e?s=128&d=identicon&r=PG", "display_name": "Ken Birman", "link": "https://stackoverflow.com/users/538955/ken-birman"}, "edited": false, "score": 0, "creation_date": 1464188000, "post_id": 37440301, "comment_id": 62384015, "body": "(Beyond the hashcodes, I also need to create a list of the factory methods, which is kind of a pain because, unless I just don&#39;t get that aspect either, C++17 won&#39;t let me take the address of a (char*) constructor in a class, because of its rule that memory has to be allocated before the constructor can be called.  I&#39;m thinking of using a lambda that calls new for this....)"}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "reply_to_user": {"reputation": 981, "user_id": 538955, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/17dcb6a8551ade5b49b6e6f05a55b93e?s=128&d=identicon&r=PG", "display_name": "Ken Birman", "link": "https://stackoverflow.com/users/538955/ken-birman"}, "edited": false, "score": 1, "creation_date": 1464188163, "post_id": 37440301, "comment_id": 62384144, "body": "@KenBirman You can&#39;t take the address of any kind of constructor. Constructors don&#39;t have names, so you can&#39;t access them directly. Using a lambda is a possibility, but I&#39;d recommend just returning a value rather than calling <code>new</code>. Note however that the type of closures is unspecified, so you would need to store them in a template class or use <code>std::function</code> or something."}, {"owner": {"reputation": 981, "user_id": 538955, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/17dcb6a8551ade5b49b6e6f05a55b93e?s=128&d=identicon&r=PG", "display_name": "Ken Birman", "link": "https://stackoverflow.com/users/538955/ken-birman"}, "edited": false, "score": 0, "creation_date": 1464188347, "post_id": 37440301, "comment_id": 62384300, "body": "Yup, figured that out.  C# is easier in that respect.  But if I can create a template factory method and then maybe cast it to type void*, I think this would accomplish the same thing: in comes my byte array, I call the factory and it creates a foo*, I cast it to void* (because at runtime I won&#39;t have the types...) and then I can invoke my method as a variable args method, just passing the POD objects and the void* pointers.  So unsafe code at that step...  And then I need to have the class tell me how big its marshaled representation is, but that&#39;s easy."}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "reply_to_user": {"reputation": 981, "user_id": 538955, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/17dcb6a8551ade5b49b6e6f05a55b93e?s=128&d=identicon&r=PG", "display_name": "Ken Birman", "link": "https://stackoverflow.com/users/538955/ken-birman"}, "edited": false, "score": 0, "creation_date": 1464188426, "post_id": 37440301, "comment_id": 62384375, "body": "@KenBirman Sure, I&#39;d need to see the code to make other suggestions if you want any, but this sounds possible."}, {"owner": {"reputation": 981, "user_id": 538955, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/17dcb6a8551ade5b49b6e6f05a55b93e?s=128&d=identicon&r=PG", "display_name": "Ken Birman", "link": "https://stackoverflow.com/users/538955/ken-birman"}, "edited": false, "score": 0, "creation_date": 1464188784, "post_id": 37440301, "comment_id": 62384658, "body": "Your suggested answer works; voted it up.  Thanks!  I&#39;ll struggle for a bit and won&#39;t come back here unless I get solidly wedged again."}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "reply_to_user": {"reputation": 981, "user_id": 538955, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/17dcb6a8551ade5b49b6e6f05a55b93e?s=128&d=identicon&r=PG", "display_name": "Ken Birman", "link": "https://stackoverflow.com/users/538955/ken-birman"}, "edited": false, "score": 0, "creation_date": 1464188869, "post_id": 37440301, "comment_id": 62384735, "body": "@KenBirman Feel free to grab me in chat if you want bits of help which don&#39;t justify a new question!"}], "tags": [], "owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "is_accepted": false, "score": 4, "last_activity_date": 1464186849, "creation_date": 1464186849, "answer_id": 37440301, "question_id": 37439985, "link": "https://stackoverflow.com/questions/37439985/c-17-variadic-template-capture-both-return-type-and-argument-types-for-a-call/37440301#37440301", "title": "C++-17 variadic template: capture both return type and argument types for a callback argument", "body": "<p>You don't need a separate class or recursion for this, you could just return a <code>std::array</code> of the hash codes by expanding the argument parameter pack over the <code>hash_code</code> call:</p>\n\n<pre><code>template &lt;typename RT, typename... Args&gt; \nstd::array&lt;size_t, (sizeof...(Args) + 1)&gt; \nScan (RT (*) (Args...)) \n{\n    return { typeid(RT).hash_code(), typeid(Args).hash_code()... };\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6924, "user_id": 835629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b38fa6792bcb51a7fe773b5f942c66c2?s=128&d=identicon&r=PG", "display_name": "coyotte508", "link": "https://stackoverflow.com/users/835629/coyotte508"}, "is_accepted": false, "score": 0, "last_activity_date": 1464187976, "creation_date": 1464187976, "answer_id": 37440760, "question_id": 37439985, "link": "https://stackoverflow.com/questions/37439985/c-17-variadic-template-capture-both-return-type-and-argument-types-for-a-call/37440760#37440760", "title": "C++-17 variadic template: capture both return type and argument types for a callback argument", "body": "<pre><code>#include &lt;typeinfo&gt;\n\nclass Info\n{\n    int rt, at;  Info *next;\npublic:\n    Info(int r, int a, Info* nxt) { rt = r; at = a; next = nxt; }\n};\n\ntemplate&lt;typename RT&gt;\nInfo *Scan() {\n    return nullptr;\n}\n\ntemplate&lt;typename RT, typename arg, typename ...args&gt;\nInfo *Scan() {\n    return new Info(typeid(RT).hash_code(), typeid(arg).hash_code(), Scan&lt;RT, args...&gt;());\n}\n\ntemplate&lt;typename RT, typename ...Rest&gt; Info* Extracter(RT (&amp;)(Rest...))\n{\n    return Scan&lt;RT, Rest...&gt;();\n}\n\nint TestMethod(int, int)\n{\n    return 0;\n}\n\nint main()\n{\n    Extracter(TestMethod);\n    return 0;\n}\n</code></pre>\n\n<p>This uses the linked <code>Info</code> structure. I used one function to extract all the arguments of the targetted function, then another one to enumerate those one by one. No need to carry the function over all the calls.</p>\n\n<p>TartanLlama's answer is more elegant though.</p>\n"}], "owner": {"reputation": 981, "user_id": 538955, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/17dcb6a8551ade5b49b6e6f05a55b93e?s=128&d=identicon&r=PG", "display_name": "Ken Birman", "link": "https://stackoverflow.com/users/538955/ken-birman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 472, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1464187976, "creation_date": 1464186105, "question_id": 37439985, "link": "https://stackoverflow.com/questions/37439985/c-17-variadic-template-capture-both-return-type-and-argument-types-for-a-call", "title": "C++-17 variadic template: capture both return type and argument types for a callback argument", "body": "<p>I've spent many weeks on this puzzle and thought I might offer it as a challenge to the C++ variadic template crowd here.  If it can be done I bet you'll show me how in about 10 seconds.</p>\n\n<p>Suppose I have a collection of functions in C++ 17, each with its own return type (or void) and each with its own argument types.  For simplicity, a mix of POD arguments and pointers to classes, variable numbers of args, etc.  So two examples:</p>\n\n<pre><code>int somefunc(int x, double d) { return x + (int)d; }\nvoid otherfunc(Foo *a, Bar *b, int x) { ... }\n</code></pre>\n\n<p>My goal is to do static compile-time reflection without annotation by building a variadic function that captures the full set of types here.  So for discussion, we can say that our function is of type RT f(T1 a, T2 b, ...).  My context is that I'm building a new (and far better) data marshalling layer for an RPC and multicast system, and these callbacks actually will be done on receipt of a byte array, which I need to demarshall and transform into things of the proper types: an int extracted from the first bytes of my byte array, or a new Foo(char*) where Foo itself has a factory method doing the lifting, etc.</p>\n\n<p>What do I mean by static reflection?  I want a const std::list, where I might put things like typeid(RT).hash_code() into my Info class, or perhaps a pointer to a constructor for each of my categories of arguments (a POD constructor would basically cast the incoming byte sequence to an int* and then return the int; a class constructor would call the factory method).</p>\n\n<p>OK, long preamble, now the failed attempt:  Here's my try.  C++17 doesn't like it at all (seems to bind RT correctly but is unable to bind Rest, perhaps because Rest is actually a list of argument types within the overall function type that RT captures).  Any ideas?</p>\n\n<pre><code>class Info\n{\n       int rt, at;  Info *next;\n       Info(int r, int a, Info* nxt) { rt = r; at = a; next = nxt; }\n};\n\ntemplate&lt;typename RT&gt;\nInfo *Scan(RT cb())\n{\n       return nullptr;\n}\n\ntemplate&lt;typename RT, typename T, typename Rest...&gt; Info* Scan(RT cb(T x, Rest... args))\n{\n       return new Info(typeid(RT).hash_code(), typeid(T).hash_code(), Scan&lt;RT, Rest...&gt;(cb(args...));\n};\n\nint TestMethod(int x, int y)\n{\n       return 0;\n}\n\nint main()\n{\n       Scan(TestMethod);\n       return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "cmake", "qt5"], "comments": [{"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 1, "creation_date": 1464186968, "post_id": 37439955, "comment_id": 62383172, "body": "Try replacing with <code>append(CMAKE_CXX_FLAGS \t\t\t-std=gnu++11 \t\t)</code> instead of <code>set</code>. In any case, please show the complete output of <code>make VERBOSE=1</code> (in particular, the generated command line which triggers the error)"}], "answers": [{"tags": [], "owner": {"reputation": 7193, "user_id": 1938798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/196507edbb408bad2f2a08e33222bac7?s=128&d=identicon&r=PG", "display_name": "Craig Scott", "link": "https://stackoverflow.com/users/1938798/craig-scott"}, "is_accepted": false, "score": 1, "last_activity_date": 1464391407, "creation_date": 1464391407, "answer_id": 37493618, "question_id": 37439955, "link": "https://stackoverflow.com/questions/37439955/linking-c11-program-to-qt5-in-cmake-leads-to-error/37493618#37493618", "title": "Linking C++11 program to Qt5 in CMake leads to error", "body": "<p>Qt5 should support C++11 unless it has been explicitly built with options to turn that off. It's likely that you are asking for the wrong C++ library. Rather than trying to explicitly specify the compiler and linker flags, which means you would take on more responsibility for getting things right, let CMake do the work for you and see if that fixes your problem. If you are using a reasonably recent CMake version (3.2 or later should be safe), try putting the following near the top of your CMakeLists.txt file, in particular before the <code>project()</code> command:</p>\n\n<pre><code>set(CMAKE_CXX_STANDARD 11)\nset(CMAKE_CXX_STANDARD_REQUIRED ON)\n</code></pre>\n\n<p>This will let CMake pick appropriate compiler and linker flags which will be consistent with each other. In your case, you've only set a compiler flag, so the linker is going to pick up the default C++ library and this might or might not be what you want. Handing the responsibility over to CMake will at least take that problem out of the picture. There is still no guarantee that CMake will pick the same library as was used when Qt was built, but your chances are pretty good. The build output in your question suggests your problem is at compile time anyway, so your build hasn't even gotten to the link stage yet. That said, I still think the above is likely to fix your problem and later problems you would probably have faced.</p>\n\n<p><a href=\"https://crascit.com/2015/03/28/enabling-cxx11-in-cmake/\" rel=\"nofollow\">This article</a> provides a deeper discussion of the above CMake variables and related CMake functionality (disclaimer: I wrote the article). In short, they are setting the default C++ version to C++11 and CMake will then choose compiler and linker flags appropriate to the particular compiler and linker being used. When a new target is created in your CMakeLists.txt file, these variables are used as the defaults for the target properties which determine which C++ version the target should be built for.</p>\n"}], "owner": {"reputation": 2026, "user_id": 1909456, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1f254bd884cc7ea6217bfd1eaccb9f75?s=128&d=identicon&r=PG", "display_name": "dgrat", "link": "https://stackoverflow.com/users/1909456/dgrat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 472, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464391407, "creation_date": 1464186026, "question_id": 37439955, "link": "https://stackoverflow.com/questions/37439955/linking-c11-program-to-qt5-in-cmake-leads-to-error", "title": "Linking C++11 program to Qt5 in CMake leads to error", "body": "<p>I wrote two programs and eachs compiles. However when I want to bring them together I get errors. I thought Qt5 would support Cxx11, but I get errors. Is it because my distribution was building Qt5 without Cxx11 support?!</p>\n\n<pre><code>CMAKE_MINIMUM_REQUIRED (VERSION 3.0)\nPROJECT (SOMNetCPU)\n\nFIND_PACKAGE(BZip2 REQUIRED)\nFIND_PACKAGE(Qt5Widgets REQUIRED)\n\nSET(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=gnu++11\")\n\nSET( ANGUISourceFiles\n  QSOMReader.cpp\n)\n\nadd_library (SOMReader ${ANGUISourceFiles})\nTARGET_LINK_LIBRARIES (SOMReader Qt5::Widgets)\n\nADD_EXECUTABLE (SOMNetCPU SOMNetCPU.cpp)\nTARGET_LINK_LIBRARIES (SOMNetCPU ANNet SOMReader) \n</code></pre>\n\n<p>Errors:</p>\n\n<pre><code>/usr/include/c++/5/bits/stl_tree.h:1018:7: error: expected identifier before string constant\n       _GLIBCXX_ABI_TAG_CXX11\n       ^\n/usr/include/c++/5/bits/stl_tree.h:1018:7: error: expected \u2018,\u2019 or \u2018...\u2019 before string constant\n/usr/include/c++/5/bits/stl_tree.h:1018:7: error: expected \u2018;\u2019 at end of member declaration\n       _GLIBCXX_ABI_TAG_CXX11\n       ^\n/usr/include/c++/5/bits/stl_tree.h:1029:7: error: expected identifier before string constant\n       _GLIBCXX_ABI_TAG_CXX11\n       ^\n/usr/include/c++/5/bits/stl_tree.h:1029:7: error: expected \u2018,\u2019 or \u2018...\u2019 before string constant\n/usr/include/c++/5/bits/stl_tree.h:1029:7: error: expected \u2018;\u2019 at end of member declaration\n       _GLIBCXX_ABI_TAG_CXX11\n       ^\n/usr/include/c++/5/bits/stl_tree.h:1029:7: error: \u2018int std::_Rb_tree&lt;_Key, _Val, _KeyOfValue, _Compare, _Alloc&gt;::__abi_tag__(int)\u2019 cannot be overloaded\n       _GLIBCXX_ABI_TAG_CXX11\n       ^\n/usr/include/c++/5/bits/stl_tree.h:1018:7: error: with \u2018int std::_Rb_tree&lt;_Key, _Val, _KeyOfValue, _Compare, _Alloc&gt;::__abi_tag__(int)\u2019\n       _GLIBCXX_ABI_TAG_CXX11\n       ^\n/usr/include/c++/5/bits/stl_tree.h:1053:7: error: expected identifier before string constant\n       _GLIBCXX_ABI_TAG_CXX11\n       ^\n/usr/include/c++/5/bits/stl_tree.h:1053:7: error: expected \u2018,\u2019 or \u2018...\u2019 before string constant\n/usr/include/c++/5/bits/stl_tree.h:1053:7: error: expected \u2018;\u2019 at end of member declaration\n       _GLIBCXX_ABI_TAG_CXX11\n       ^\n/usr/include/c++/5/bits/stl_tree.h:1053:7: error: \u2018int std::_Rb_tree&lt;_Key, _Val, _KeyOfValue, _Compare, _Alloc&gt;::__abi_tag__(int)\u2019 cannot be overloaded\n       _GLIBCXX_ABI_TAG_CXX11\n       ^\n/usr/include/c++/5/bits/stl_tree.h:1018:7: error: with \u2018int std::_Rb_tree&lt;_Key, _Val, _KeyOfValue, _Compare, _Alloc&gt;::__abi_tag__(int)\u2019\n       _GLIBCXX_ABI_TAG_CXX11\n       ^\n/usr/include/c++/5/bits/stl_map.h:712:7: error: expected identifier before string constant\n       _GLIBCXX_ABI_TAG_CXX11\n       ^\n/usr/include/c++/5/bits/stl_map.h:712:7: error: expected \u2018,\u2019 or \u2018...\u2019 before string constant\n/usr/include/c++/5/bits/stl_map.h:712:7: error: expected \u2018;\u2019 at end of member declaration\n       _GLIBCXX_ABI_TAG_CXX11\n       ^\n/usr/include/c++/5/bits/stl_multimap.h:618:7: error: expected identifier before string constant\n       _GLIBCXX_ABI_TAG_CXX11\n       ^\n/usr/include/c++/5/bits/stl_multimap.h:618:7: error: expected \u2018,\u2019 or \u2018...\u2019 before string constant\n/usr/include/c++/5/bits/stl_multimap.h:618:7: error: expected \u2018;\u2019 at end of member declaration\n       _GLIBCXX_ABI_TAG_CXX11\n       ^\n</code></pre>\n"}, {"tags": ["c++", "linux", "configuration-files"], "comments": [{"owner": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "edited": false, "score": 0, "creation_date": 1464186188, "post_id": 37439878, "comment_id": 62382511, "body": "Can you clarify a bit? What do you mean by &quot;consumed&quot; (deleted?)? Also what is &quot;researched at execution&quot;?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1464186282, "post_id": 37439878, "comment_id": 62382589, "body": "<i>&quot;and this configurations needs to be unknow by the end users&quot;</i> What do you mean by that? The user is not supposed to see it with his normal UI? -&gt; Use a .bla file. The user is not supposed to be able to see it? This won&#39;t be possible if you are going to use it on his system."}, {"owner": {"reputation": 716, "user_id": 5117173, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/5O4AA.png?s=128&g=1", "display_name": "Juliano Oliveira", "link": "https://stackoverflow.com/users/5117173/juliano-oliveira"}, "reply_to_user": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "edited": false, "score": 0, "creation_date": 1464186667, "post_id": 37439878, "comment_id": 62382907, "body": "@Smeeheey I said &quot;consumed&quot; with the purpose of delete the file after de application configuration and &quot;researched at execution&quot; means that the application always looking for a new configuration at the start of they execution."}, {"owner": {"reputation": 716, "user_id": 5117173, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/5O4AA.png?s=128&g=1", "display_name": "Juliano Oliveira", "link": "https://stackoverflow.com/users/5117173/juliano-oliveira"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1464186911, "post_id": 37439878, "comment_id": 62383119, "body": "@BaummitAugen &quot;and this configurations needs to be unknow by the end users&quot; means that this configuration is hidden to the user, is not interesting for the user change this configurations and &quot;researched at execution&quot; means that the application always looking for a new configuration at the start of they execution."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1464187025, "post_id": 37439878, "comment_id": 62383222, "body": "@JulianOliveira In that case, name it &quot;.somename&quot; (the important part being a leading &#39;.&#39; followed by some letter(s)). This indicates that this file is to be hidden by default to all UI programs."}], "answers": [{"tags": [], "owner": {"reputation": 4809, "user_id": 686184, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/39070f4d752dc965b716275da4e66b50?s=128&d=identicon&r=PG", "display_name": "pqnet", "link": "https://stackoverflow.com/users/686184/pqnet"}, "is_accepted": false, "score": 0, "last_activity_date": 1464186667, "creation_date": 1464186667, "answer_id": 37440232, "question_id": 37439878, "link": "https://stackoverflow.com/questions/37439878/create-hidden-configuration-file-for-c-linux-applications/37440232#37440232", "title": "Create hidden configuration file for C++ Linux applications", "body": "<p>It is unlikely that you can hide the configuration file so that people do not know its existence: most Linux users would want to know which files you are installing in which location, and there are many ways to help them in discovering that, even if you try to do it without telling them (the simplest way that comes to my mind, they may do a file system snapshot and compare it before and after running the install program)</p>\n\n<p>If your goal is to prevent people from changing the configuration without your permission (i.e., without paying for a license upgrade), you may do it by requiring the configuration to be signed from your company, storing the verification key inside the executable.</p>\n\n<p>If you want to prevent the configuration from being read you don't have that much luck: there is not much that can stop a motivated attacker from reading the content of that file, since your application must be able to do it as well.</p>\n"}], "owner": {"reputation": 716, "user_id": 5117173, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/5O4AA.png?s=128&g=1", "display_name": "Juliano Oliveira", "link": "https://stackoverflow.com/users/5117173/juliano-oliveira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464186667, "creation_date": 1464185812, "question_id": 37439878, "link": "https://stackoverflow.com/questions/37439878/create-hidden-configuration-file-for-c-linux-applications", "title": "Create hidden configuration file for C++ Linux applications", "body": "<p>I'm creating a C++ linux application that needs some initial parameters of configuration to work correctly, these externals configurations is needed to avoid multiple compilations for parameters changes, and this configurations needs to be unknow by the end users. I was thinking an way do make an hidden configuration file that is consumed at the first execution, and always is researched at execution to verify possibles changes. Some suggestion to do this?</p>\n"}, {"tags": ["c++", "pointers", "smart-pointers", "unique-ptr"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 7, "creation_date": 1464185261, "post_id": 37439626, "comment_id": 62381723, "body": "Do you actually need pointers?"}, {"owner": {"reputation": 3946, "user_id": 4444768, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vVqiI.jpg?s=128&g=1", "display_name": "LmTinyToon", "link": "https://stackoverflow.com/users/4444768/lmtinytoon"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464185309, "post_id": 37439626, "comment_id": 62381767, "body": "Yes, class A does not have any information about exact sizes of B, C, D"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 6, "creation_date": 1464185371, "post_id": 37439626, "comment_id": 62381811, "body": "@\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u041b\u044b\u0441\u0435\u043d\u043a\u043e: Then, you should not put the definition of the constructor in the <i>header</i>, as you have done here. If you can do <code>new B</code>, then you have information about the exact sizes of B."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464185386, "post_id": 37439626, "comment_id": 62381824, "body": "You cant include the headers for B, C, and D in A?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1464185414, "post_id": 37439626, "comment_id": 62381849, "body": "@NathanOliver: There are good reasons not to do that. But if he&#39;s not going to, then he can&#39;t allocate them in the header either."}, {"owner": {"reputation": 3946, "user_id": 4444768, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vVqiI.jpg?s=128&g=1", "display_name": "LmTinyToon", "link": "https://stackoverflow.com/users/4444768/lmtinytoon"}, "edited": false, "score": 0, "creation_date": 1464185454, "post_id": 37439626, "comment_id": 62381884, "body": "yes, you are right, I have implementation of A() method in cpp file"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 6, "creation_date": 1464185526, "post_id": 37439626, "comment_id": 62381963, "body": "@\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u041b\u044b\u0441\u0435\u043d\u043a\u043e: I wasn&#39;t just talking about the destructor. You can&#39;t call <code>new B</code> unless you have the definition of <code>B</code>. And if you do have the definition, you could just make them values rather than pointers. Lastly, how do you define &quot;the best way to keep these objects&quot;?"}, {"owner": {"reputation": 10212, "user_id": 970543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wq9T6.jpg?s=128&g=1", "display_name": "Nik Bougalis", "link": "https://stackoverflow.com/users/970543/nik-bougalis"}, "edited": false, "score": 1, "creation_date": 1464185701, "post_id": 37439626, "comment_id": 62382117, "body": "By all means, use <code>std::unique_ptr</code> or <code>std::shared_ptr</code> as appropriate for this sort of thing. It makes you code safer - even from issues you don&#39;t realize you have. But, frankly, if you&#39;re <i>always</i> allocating these objects in your constructor then you almost certainly should not use pointers. You may even be able to  avoid pointers even if you need to pass instances of constructed objects into the constructor - simply use move semantics to move the object in."}, {"owner": {"reputation": 3946, "user_id": 4444768, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vVqiI.jpg?s=128&g=1", "display_name": "LmTinyToon", "link": "https://stackoverflow.com/users/4444768/lmtinytoon"}, "edited": false, "score": 0, "creation_date": 1464185709, "post_id": 37439626, "comment_id": 62382122, "body": "I have corrected code"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1464186121, "post_id": 37439626, "comment_id": 62382453, "body": "Unrelated and not really a problem: In C++, unlike in C, a <code>(void)</code> parameter list is equivalent to <code>()</code>. C++ programmers usually prefer <code>()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 16607, "user_id": 267482, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fd69625825bed998b63fef68a23592aa?s=128&d=identicon&r=PG", "display_name": "bobah", "link": "https://stackoverflow.com/users/267482/bobah"}, "is_accepted": false, "score": 4, "last_activity_date": 1464185847, "last_edit_date": 1464185847, "creation_date": 1464185298, "answer_id": 37439662, "question_id": 37439626, "link": "https://stackoverflow.com/questions/37439626/should-i-use-unique-ptr-to-keep-class-members/37439662#37439662", "title": "Should I use unique_ptr to keep class&#39; members?", "body": "<p>Best is to keep everything by value. If it fits*, and does not need to be hidden**. If it does not fit or needs to be hidden first preference is <code>std::unique_ptr</code>***, second preference (if ownership has to be shared) is <code>std::shared_ptr</code>. And only as a last resort (example for which I cannot even think up). You would actually have raw pointers and manage lifetime yourself, with risk of memory errors and leaks.</p>\n\n<p>* - sometimes you want to be able to have parent object on stack by value and child objects are, say, large arrays which, if stored by value would overflow the stack</p>\n\n<p>** - sometimes you don't want to show what child objects really are (because they are complex, say boost.fusion adapted classes. Then you would want some form of PIMPL idiom:</p>\n\n<pre><code>class.hpp\nstruct b;\nstruct A { std::unique_ptr&lt;b&gt; b_; A(); ~A(); }\n\nclass.cpp:\nstruct b { ... }\nA::A() = default;\nA::~A() = default;\n</code></pre>\n\n<p>*** - automatic management of dynamically allocated members with unique_ptr</p>\n\n<pre><code>struct A {\n  std::unique_ptr&lt;b&gt; b_;\n  A(...):\n    b_(std::make_unique&lt;b&gt;(...)) {}\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": true, "score": 6, "last_activity_date": 1464186284, "last_edit_date": 1495542240, "creation_date": 1464185465, "answer_id": 37439740, "question_id": 37439626, "link": "https://stackoverflow.com/questions/37439626/should-i-use-unique-ptr-to-keep-class-members/37439740#37439740", "title": "Should I use unique_ptr to keep class&#39; members?", "body": "<blockquote>\n  <p>it allows to don't care about carefull writing of destructor.</p>\n</blockquote>\n\n<p>More than that.</p>\n\n<ol>\n<li><p>Your code is not exception-safe. For example, if <code>new D()</code> failed by exception being thrown, <code>delete b</code> and <code>delete c</code> won't be executed and memory will leak, because destructor won't be called if constructor fails. <a href=\"http://en.cppreference.com/book/intro/smart_pointers\" rel=\"nofollow noreferrer\">Smart pointers</a> can help you to avoid this kind of situation.</p></li>\n<li><p>Holding raw pointer as members you need to implement destructor carefully, and copy constructor and assignment etc too. See <a href=\"https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">What is The Rule of Three?</a> and <a href=\"https://stackoverflow.com/questions/4782757/rule-of-three-becomes-rule-of-five-with-c11\">Rule-of-Three becomes Rule-of-Five with C++11?</a>.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1401, "user_id": 2737046, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5gIpP.jpg?s=128&g=1", "display_name": "perencia", "link": "https://stackoverflow.com/users/2737046/perencia"}, "is_accepted": false, "score": 2, "last_activity_date": 1464186987, "creation_date": 1464186987, "answer_id": 37440358, "question_id": 37439626, "link": "https://stackoverflow.com/questions/37439626/should-i-use-unique-ptr-to-keep-class-members/37440358#37440358", "title": "Should I use unique_ptr to keep class&#39; members?", "body": "<p>I think it's worth mentioning that if you do not want to transfer ownership, you must use <code>const std::unique_ptr</code>. Using a non-const <code>std:unique_ptr</code> allows to transfer it to another <code>std:unique_ptr</code>.</p>\n"}], "owner": {"reputation": 3946, "user_id": 4444768, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vVqiI.jpg?s=128&g=1", "display_name": "LmTinyToon", "link": "https://stackoverflow.com/users/4444768/lmtinytoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1411, "favorite_count": 0, "accepted_answer_id": 37439740, "answer_count": 3, "score": 1, "last_activity_date": 1464186987, "creation_date": 1464185220, "last_edit_date": 1464186386, "question_id": 37439626, "link": "https://stackoverflow.com/questions/37439626/should-i-use-unique-ptr-to-keep-class-members", "title": "Should I use unique_ptr to keep class&#39; members?", "body": "<p>I have such code:</p>\n\n<pre><code>class A\n{\npublic:\n    A(void);\n    ~A(void)\n    {\n        delete b;\n        delete c;\n        delete d;\n        // ...\n    }\nprivate:\n    B* b;\n    C* c;\n    D* d;\n    // ...\n};\n\n//A.cpp\n    A(void) : b(new B()), c(new C()), d(new D()) //...\n    {  \n    }\n</code></pre>\n\n<p>Class <code>A</code> takes ownership over own objects <code>b</code>, <code>c</code>, <code>d</code> ...\nWhat is the best way to keep these objects? I guess, that usage of <code>std::unique_ptr&lt;B/C/D&gt;</code> type will be suitable for this way. For example, it allows to don't care about carefull writing of destructor.</p>\n"}, {"tags": ["c++", "windows", "sensors", "qt5.5"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 3807950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50fd6e6a52979190d1ed5ccea0251048?s=128&d=identicon&r=PG&f=1", "display_name": "user3807950", "link": "https://stackoverflow.com/users/3807950/user3807950"}, "edited": false, "score": 0, "creation_date": 1464257115, "post_id": 37440126, "comment_id": 62414999, "body": "Thanks user3147395, for the suggestion but the signal <i>readingChanged()</i> doesn&#39;t seem to fire anytime on windows surface pro tablet device, and thus the Qmessagebox also doen&#39;t execute. Am I doing anything wrong, Please suggest me any solution or is this is a bug in Qt5.5.?"}, {"owner": {"reputation": 511, "user_id": 3147395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cde56924a2cfce8a8bfd31cf25150f4e?s=128&d=identicon&r=PG&f=1", "display_name": "user3147395", "link": "https://stackoverflow.com/users/3147395/user3147395"}, "reply_to_user": {"reputation": 65, "user_id": 3807950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50fd6e6a52979190d1ed5ccea0251048?s=128&d=identicon&r=PG&f=1", "display_name": "user3807950", "link": "https://stackoverflow.com/users/3807950/user3807950"}, "edited": false, "score": 0, "creation_date": 1464289752, "post_id": 37440126, "comment_id": 62436868, "body": "The above is the way it was shown to be implemented in the Qt docs here: <a href=\"http://doc.qt.io/qt-5/qsensor.html#start\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qsensor.html#start</a>. Make sure you&#39;ve added the slot in your class header and there are no misspelling of the slot name, as  I don&#39;t believe that a misspelled slot name leads to a compiler error."}], "tags": [], "owner": {"reputation": 511, "user_id": 3147395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cde56924a2cfce8a8bfd31cf25150f4e?s=128&d=identicon&r=PG&f=1", "display_name": "user3147395", "link": "https://stackoverflow.com/users/3147395/user3147395"}, "is_accepted": false, "score": 0, "last_activity_date": 1464186451, "creation_date": 1464186451, "answer_id": 37440126, "question_id": 37439575, "link": "https://stackoverflow.com/questions/37439575/getting-accelerometer-data-on-windows-surface-pro-using-qt-c/37440126#37440126", "title": "Getting Accelerometer data on windows Surface pro using Qt c++?", "body": "<p>To get the accelerometer data, it is recommended by the Qt company to listen to the signal <code>readingChanged</code>, as no data is immediately available after starting the sensor. You code would be shortened to something like this, with <code>accMeter</code> being changed to be a member of the class: </p>\n\n<pre><code>    accmeter = new QAccelerometer();\n    connect(accmeter, SIGNAL(readingChanged()), this, SLOT(checkReading()));\n    accmeter-&gt;start();\n</code></pre>\n\n<p>and then add a member function to your class called <code>checkReading</code>: </p>\n\n<pre><code>MyClass::checkReading() {\n    qreal x = accmeter-&gt;reading()-&gt;x();\n    qreal y = accmeter-&gt;reading()-&gt;y();\n    qreal z = accmeter-&gt;reading()-&gt;z();\n    QMessageBox *box = new QMessageBox();\n    box-&gt;setText(\"x=\"+ QString::number(x)+ \"\\n\" \"y=\"+ QString::number(y)+ \"\\n\" \"z=\"+ QString::number(z)+ \"\\n\");\n    box-&gt;exec();\n}\n</code></pre>\n\n<p>Note that in order to perfectly replicate the  code you had above you should append <code>disconnect(accmeter, SIGNAL(readingChanged()), this, SLOT(checkReading()));</code> as the last line to the member function.</p>\n"}], "owner": {"reputation": 65, "user_id": 3807950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50fd6e6a52979190d1ed5ccea0251048?s=128&d=identicon&r=PG&f=1", "display_name": "user3807950", "link": "https://stackoverflow.com/users/3807950/user3807950"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 312, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1464186451, "creation_date": 1464185080, "question_id": 37439575, "link": "https://stackoverflow.com/questions/37439575/getting-accelerometer-data-on-windows-surface-pro-using-qt-c", "title": "Getting Accelerometer data on windows Surface pro using Qt c++?", "body": "<p>How can I get Accelerometer data on windows Surface pro using Qt c++? I tried the below code but it gives only 0,0,0 values in all scenarios. Please help me!</p>\n\n<pre><code>   QAccelerometer *accmeter = new QAccelerometer();\n\n    accmeter-&gt;start();\n    QAccelerometerReading *reading = new QAccelerometerReading();\n\n    qreal x = reading-&gt;x();\n    qreal y = reading-&gt;y();\n    qreal z = reading-&gt;z();\n\n    QMessageBox *box = new QMessageBox();\n    box-&gt;setText(\"x=\"+ QString::number(x)+ \"\\n\" \"y=\"+ QString::number(y)+ \"\\n\" \"z=\"+ QString::number(z)+ \"\\n\");\n    box-&gt;exec();\n</code></pre>\n"}, {"tags": ["c++", "qt", "qml"], "answers": [{"comments": [{"owner": {"reputation": 12232, "user_id": 1573209, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/tjR1I.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1573209/haris"}, "edited": false, "score": 0, "creation_date": 1464186704, "post_id": 37439848, "comment_id": 62382942, "body": "Hi Thanks for the answer, I have tried both  <code>grabResult-&gt;saveToFile()</code> and  <code>grabResult-&gt;image()</code> but both fails, in first case it always return <code>false</code> and in second case it return null image, what could be the issue?"}, {"owner": {"reputation": 12232, "user_id": 1573209, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/tjR1I.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1573209/haris"}, "edited": false, "score": 0, "creation_date": 1464186949, "post_id": 37439848, "comment_id": 62383153, "body": "I think the problem is as docs says <code>The grab happens asynchronously and the signal QQuickItemGrabResult::ready() is emitted when the grab has been completed</code>, I may need to use ready signal."}, {"owner": {"reputation": 6924, "user_id": 835629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b38fa6792bcb51a7fe773b5f942c66c2?s=128&d=identicon&r=PG", "display_name": "coyotte508", "link": "https://stackoverflow.com/users/835629/coyotte508"}, "reply_to_user": {"reputation": 12232, "user_id": 1573209, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/tjR1I.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1573209/haris"}, "edited": false, "score": 2, "creation_date": 1464188794, "post_id": 37439848, "comment_id": 62384670, "body": "Thanks, I edited the answer with code that handles that using a lambda function to react to the signal."}, {"owner": {"reputation": 12232, "user_id": 1573209, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/tjR1I.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1573209/haris"}, "edited": false, "score": 0, "creation_date": 1464189282, "post_id": 37439848, "comment_id": 62385048, "body": "I think there is a syntax error in the lambda function, can you please edit it. Actually I am not well familiar with lambda function."}, {"owner": {"reputation": 6924, "user_id": 835629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b38fa6792bcb51a7fe773b5f942c66c2?s=128&d=identicon&r=PG", "display_name": "coyotte508", "link": "https://stackoverflow.com/users/835629/coyotte508"}, "reply_to_user": {"reputation": 12232, "user_id": 1573209, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/tjR1I.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1573209/haris"}, "edited": false, "score": 2, "creation_date": 1464190029, "post_id": 37439848, "comment_id": 62385600, "body": "Done. Don&#39;t forget to make sure your project has c++ enabled (CONFIG+=c++11)"}, {"owner": {"reputation": 12232, "user_id": 1573209, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/tjR1I.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1573209/haris"}, "edited": false, "score": 0, "creation_date": 1464190304, "post_id": 37439848, "comment_id": 62385790, "body": "Yes it already enabled in pro file, but still giving the error like <code>E:\\Qt_Project\\PDF\\login.cpp:45: error: C2664: &#39;QMetaObject::Connection QObject::connect(const QObject *,const char *,const char *,Qt::ConnectionType) const&#39; : cannot convert argument 3 from &#39;Login::save::&lt;lambda_a033447aee344bc638254fa478ec353e&gt;&#39; to &#39;const char *&#39; No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called</code>"}, {"owner": {"reputation": 6924, "user_id": 835629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b38fa6792bcb51a7fe773b5f942c66c2?s=128&d=identicon&r=PG", "display_name": "coyotte508", "link": "https://stackoverflow.com/users/835629/coyotte508"}, "reply_to_user": {"reputation": 12232, "user_id": 1573209, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/tjR1I.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1573209/haris"}, "edited": false, "score": 0, "creation_date": 1464192315, "post_id": 37439848, "comment_id": 62387276, "body": "@Haris it seems to be a problem with your Qt version then. Instead you can just connect the signal <code>ready()</code> to any of your slots and use <code>qobject_cast&lt;QQuickItemGrabResult*&gt;(sender())-&gt;saveToFile(..&zwnj;&#8203;.)</code> in it. I updated the answer to add that code as well."}, {"owner": {"reputation": 12232, "user_id": 1573209, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/tjR1I.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1573209/haris"}, "edited": false, "score": 0, "creation_date": 1464192974, "post_id": 37439848, "comment_id": 62387691, "body": "I tried that too, but seems the slot not getting called, might be some issue with qt version, I am using 5.5.1 on Windows8."}, {"owner": {"reputation": 12232, "user_id": 1573209, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/tjR1I.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1573209/haris"}, "reply_to_user": {"reputation": 6924, "user_id": 835629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b38fa6792bcb51a7fe773b5f942c66c2?s=128&d=identicon&r=PG", "display_name": "coyotte508", "link": "https://stackoverflow.com/users/835629/coyotte508"}, "edited": false, "score": 0, "creation_date": 1464193893, "post_id": 37439848, "comment_id": 62388242, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/112945/discussion-between-haris-and-coyotte508\">continue this discussion in chat</a>."}, {"owner": {"reputation": 113, "user_id": 10482789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PP7A8.jpg?s=128&g=1", "display_name": "Chinh Nguyen Huu", "link": "https://stackoverflow.com/users/10482789/chinh-nguyen-huu"}, "edited": false, "score": 0, "creation_date": 1605757225, "post_id": 37439848, "comment_id": 114751826, "body": "Thank you a lot, this answer is awesome. I fixed my problem but I want to contribute to how the way of implementing Qt 5.15 because of the method <code>saveToFile()</code> without const was deprecated. You can not use the auto declared instead of the snippet below <code>QSharedPointer&lt;const QQuickItemGrabResult&gt; result = item-&gt;grabToImage();     connect(result.data(), &amp;QQuickItemGrabResult::ready, [=](){         result-&gt;saveToFile(&quot;C:&#47;Users&#47;MarcusPC&#47;Desktop&#47;something.png&quot;&zwnj;&#8203;);     });</code>"}, {"owner": {"reputation": 6924, "user_id": 835629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b38fa6792bcb51a7fe773b5f942c66c2?s=128&d=identicon&r=PG", "display_name": "coyotte508", "link": "https://stackoverflow.com/users/835629/coyotte508"}, "reply_to_user": {"reputation": 113, "user_id": 10482789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PP7A8.jpg?s=128&g=1", "display_name": "Chinh Nguyen Huu", "link": "https://stackoverflow.com/users/10482789/chinh-nguyen-huu"}, "edited": false, "score": 0, "creation_date": 1605870869, "post_id": 37439848, "comment_id": 114791425, "body": "@ChinhNguyenHuu thanks, I edited the answer (you can also suggest edits on SO!)"}], "tags": [], "owner": {"reputation": 6924, "user_id": 835629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b38fa6792bcb51a7fe773b5f942c66c2?s=128&d=identicon&r=PG", "display_name": "coyotte508", "link": "https://stackoverflow.com/users/835629/coyotte508"}, "is_accepted": true, "score": 10, "last_activity_date": 1605870824, "last_edit_date": 1605870824, "creation_date": 1464185746, "answer_id": 37439848, "question_id": 37439554, "link": "https://stackoverflow.com/questions/37439554/save-qml-image-inside-c/37439848#37439848", "title": "Save QML image inside c++", "body": "<p>Fortunately <code>QQuickItem</code> has a convenient <a href=\"http://doc.qt.io/qt-5/qquickitem.html#grabToImage\" rel=\"nofollow noreferrer\">grabToImage</a> function which does that.</p>\n<pre><code>void Login::save( QQuickItem *item)\n{\n    QSharedPointer&lt;const QQuickItemGrabResult&gt; grabResult = item-&gt;grabToImage();\n\n    connect(grabResult.data(), &amp;QQuickItemGrabResult::ready, [=]() {\n        grabResult-&gt;saveToFile(&quot;C:/Users/haris/Desktop/output.png&quot;);\n        //grabResult-&gt;image() gives the QImage associated if you want to use it directly in the program\n    });\n}\n</code></pre>\n<p>Alternate solution without using lambdas:</p>\n<pre><code>void Login::save( QQuickItem *item)\n{\n    QSharedPointer&lt;const QQuickItemGrabResult&gt; grabResult = item-&gt;grabToImage();\n    \n    /* Need to store grabResult somewhere persistent to avoid the SharedPointer mechanism from deleting it */\n    ...\n\n    connect(grabResult.data(), SIGNAL(ready()), this, SLOT(onAsynchroneousImageLoaded()));\n}\n\nvoid Login::onAsynchroneousImageLoaded() {\n    auto grabResult = qobject_cast&lt;const QQuickItemGrabResult*&gt;(sender());\n    if (grabResult) {\n        grabResult-&gt;saveToFile(&quot;C:/Users/haris/Desktop/output.png&quot;);\n    } else {\n        //something went wrong\n    }\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 770, "user_id": 3618212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72eccdac107f82811e0a1c554c74e803?s=128&d=identicon&r=PG&f=1", "display_name": "user9170", "link": "https://stackoverflow.com/users/3618212/user9170"}, "is_accepted": false, "score": 0, "last_activity_date": 1578404982, "creation_date": 1578404982, "answer_id": 59629726, "question_id": 37439554, "link": "https://stackoverflow.com/questions/37439554/save-qml-image-inside-c/59629726#59629726", "title": "Save QML image inside c++", "body": "<p>In a QObject-derived class (ImageSaver) register it as you would. It needs one member:</p>\n\n<pre><code>bool ImageSaver::saveImage(const QUrl &amp;imageProviderUrl, const QString &amp;filename){\n    qDebug() &lt;&lt; Q_FUNC_INFO &lt;&lt;imageProviderUrl &lt;&lt; filename;\n    QQmlEngine *engine = QQmlEngine::contextForObject(this)-&gt;engine();\n    QQmlImageProviderBase *imageProviderBase = engine-&gt;imageProvider(imageProviderUrl.host());\n    QQuickImageProvider *imageProvider = static_cast&lt;QQuickImageProvider*&gt;(imageProviderBase);\n    QSize imageActualSize;\n    QSize imageRequestedSize;\nQString imageId = imageProviderUrl.path().remove(0,1);\n\n    QImage image = imageProvider-&gt;requestImage(imageId, &amp;imageActualSize, imageRequestedSize);\n    qDebug() &lt;&lt; Q_FUNC_INFO &lt;&lt; imageId &lt;&lt; imageActualSize;\n    return image.save(filename);\n}\n</code></pre>\n\n<p>then in QML:</p>\n\n<pre><code>ImageSaver { id: imageSaver} \n...\nimageSaver.saveImage(image.source, \"my.png\");\n...\n</code></pre>\n\n<p>Whereas grabToImage will grab the item using the items's size, this can preserve the actual size of the image. </p>\n"}], "owner": {"reputation": 12232, "user_id": 1573209, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/tjR1I.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1573209/haris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2847, "favorite_count": 1, "accepted_answer_id": 37439848, "answer_count": 2, "score": 4, "last_activity_date": 1605870824, "creation_date": 1464185022, "last_edit_date": 1495540937, "question_id": 37439554, "link": "https://stackoverflow.com/questions/37439554/save-qml-image-inside-c", "title": "Save QML image inside c++", "body": "<p>I am trying to display network image using qml and then save this image using c++ code,</p>\n\n<p>Here is the qml code,</p>\n\n<pre><code>import QtQuick 2.3\nimport QtQuick.Window 2.2\nimport com.login 1.0\nWindow {\n    visible: true\n    width : 500\n    height: 500\n\n     Login{id: login}\n\n    MouseArea {\n        anchors.fill: parent\n        onClicked: {\n          //  Qt.quit();\n            login.save(image);\n        }\n    }\n\n\n\n    Image {\n        id: image\n        source: \"http://www.test.com/webp/gallery/4.jpg\"\n    }\n\n\n}\n</code></pre>\n\n<p>And inside my login class saving image like,</p>\n\n<pre><code>void Login::save( QQuickItem *item)\n{\n    qDebug()&lt;&lt;\"width: \"&lt;&lt;item-&gt;width();\n    qDebug()&lt;&lt;\"height: \"&lt;&lt;item-&gt;height();\n\n    QQuickWindow *window = item-&gt;window();\n    QImage image = window-&gt;grabWindow();\n\n    QPixmap pix = QPixmap::fromImage(image);\n    pix.save(\"C:/Users/haris/Desktop/output.png\");\n}\n</code></pre>\n\n<p>I am getting the correct width and height of the image inside c++ class, but the problem is I cannot find a way to save the image item from <code>QQuickItem</code>.</p>\n\n<p>Right  now I am saving the image by grabing the window, which actually not giving the actual image size on output file, instead giving output file with current qml window size. </p>\n\n<p>Basically I am following the code here <a href=\"https://stackoverflow.com/questions/11011391/saving-qml-image\">saving QML image</a> but it seems <code>QDeclarativeItem</code> is deprecated in Qt5, so I choose <code>QQuickItem</code> where as there is no paint option in <code>QQuickItem</code>.  </p>\n"}, {"tags": ["python", "c++", "json", "qt"], "comments": [{"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1464184667, "post_id": 37439272, "comment_id": 62381255, "body": "Create a <a href=\"http://doc.qt.io/qt-5/qjsondocument.html#fromJson\" rel=\"nofollow noreferrer\">QJsonDocument</a> with <code>QJsonDocument::fromJson()</code>"}, {"owner": {"reputation": 586, "user_id": 6159217, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/cf02c33ce95856d3094552a5ce7f7fba?s=128&d=identicon&r=PG&f=1", "display_name": "IntegrateThis", "link": "https://stackoverflow.com/users/6159217/integratethis"}, "reply_to_user": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1464184890, "post_id": 37439272, "comment_id": 62381408, "body": "@KarstenKoop After having converted how can I access the elements in the way described above."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1464184993, "post_id": 37439272, "comment_id": 62381493, "body": "with some <code>ToQVariantMap</code> ?"}, {"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1464185042, "post_id": 37439272, "comment_id": 62381535, "body": "<a href=\"http://doc.qt.io/qt-5/qjsondocument.html#array\" rel=\"nofollow noreferrer\">QJsonDocument::array()</a> gives you an array over which you can iterate, using e.g. <code>foreach</code>"}, {"owner": {"reputation": 586, "user_id": 6159217, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/cf02c33ce95856d3094552a5ce7f7fba?s=128&d=identicon&r=PG&f=1", "display_name": "IntegrateThis", "link": "https://stackoverflow.com/users/6159217/integratethis"}, "reply_to_user": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1464188933, "post_id": 37439272, "comment_id": 62384785, "body": "@KarstenKoop I had success with making an array and then accessing the first element, but then how can I convert that first element which is a JsonValue to a dictionary or access each of its &quot;name&quot; attributes depending on an index."}, {"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1464189011, "post_id": 37439272, "comment_id": 62384855, "body": "Did you have a look at <a href=\"http://doc.qt.io/qt-5/qjsonvalue.html\" rel=\"nofollow noreferrer\">the QJsonValue documentation</a>?"}, {"owner": {"reputation": 586, "user_id": 6159217, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/cf02c33ce95856d3094552a5ce7f7fba?s=128&d=identicon&r=PG&f=1", "display_name": "IntegrateThis", "link": "https://stackoverflow.com/users/6159217/integratethis"}, "reply_to_user": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1464193675, "post_id": 37439272, "comment_id": 62388104, "body": "@KarstenKoop yes and I am still very confused. So first I get a QJsonDocument from my QJasonObject then I use that to create an array, whose 2nd element is what I want, a QJsonValue (in this case an array) according to isArray() method. Now lets say this QJsonValue is called CountriesArray. What type of array is this and how can I access elements by index and then convert them to maps so I can query the data."}, {"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1464194935, "post_id": 37439272, "comment_id": 62388825, "body": "If your object is a nested array, you call <code>toArray</code>, if it&#39;s a string, you call <code>toString</code>, if it&#39;s an object, you call <code>toObject</code> which gives you a QJsonObject, from which you can query keys and values, or convert it to a QVariantMap"}], "answers": [{"tags": [], "owner": {"reputation": 366, "user_id": 6219719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1faa4196a2b58a5beac5dfc1ccde9b?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Medvidov", "link": "https://stackoverflow.com/users/6219719/alexander-medvidov"}, "is_accepted": true, "score": 0, "last_activity_date": 1464247165, "last_edit_date": 1464247165, "creation_date": 1464246533, "answer_id": 37453868, "question_id": 37439272, "link": "https://stackoverflow.com/questions/37439272/qt-and-parsing-json-data-in-c/37453868#37453868", "title": "Qt and parsing JSON data in C++", "body": "<p>Sample how to read and parse your json:</p>\n\n<pre><code>#include &lt;QtCore&gt;\n\nint main() {\n    QFile input_file(\"input.json\");\n\n    if (!input_file.open(QIODevice::ReadOnly | QIODevice::Text)) {\n        qDebug() &lt;&lt; \"Can't open file\";\n        return 1;\n    }\n\n    QJsonParseError parse_error;\n\n    //read and parse from file\n    QJsonDocument doc = QJsonDocument::fromJson(input_file.readAll(), \n                                               &amp;parse_error);\n\n    //check parsing errors\n    if (parse_error.error != QJsonParseError::NoError) {\n        qDebug() &lt;&lt; \"Parsing error:\" &lt;&lt; parse_error.errorString();\n        return 1;\n    }\n\n    //this is top level arraya\n    QJsonArray arr_doc = doc.array();\n\n    //this is array of country objects\n    QJsonArray arr_countries = arr_doc[1].toArray();\n\n    //list to save result\n    QList&lt;QString&gt; country_name_list;\n\n    //c++11 style for cycle. Iterate over countries.\n    for (const auto&amp; country: arr_countries) {\n        //getting name of country and convert to string, append to result\n        country_name_list.append(country.toObject()[\"name\"].toString());\n    }\n\n    qDebug() &lt;&lt; country_name_list;\n\n    return 0;\n}\n</code></pre>\n\n<p>Don't forget add to .pro file:</p>\n\n<pre><code>CONFIG += c++11\n</code></pre>\n\n<p>And remove comma from your json:</p>\n\n<pre><code>     }\n        },\n  ] ]\n</code></pre>\n"}], "owner": {"reputation": 586, "user_id": 6159217, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/cf02c33ce95856d3094552a5ce7f7fba?s=128&d=identicon&r=PG&f=1", "display_name": "IntegrateThis", "link": "https://stackoverflow.com/users/6159217/integratethis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 0, "closed_date": 1464367758, "accepted_answer_id": 37453868, "answer_count": 1, "score": 0, "last_activity_date": 1464247165, "creation_date": 1464184326, "last_edit_date": 1464184669, "question_id": 37439272, "link": "https://stackoverflow.com/questions/37439272/qt-and-parsing-json-data-in-c", "closed_reason": "Not suitable for this site", "title": "Qt and parsing JSON data in C++", "body": "<p>I have a QJsonObject in my code and It looks something like what is posted below (once converted to a string in python), (with a lot more entries of the same form). Suppose I want to group all of the name attributes in an array. In python I would convert my Json String to a dictionary and then populate this list as follows. How can I do this in c++ with qt?</p>\n\n<p>1.</p>\n\n<pre><code>CountryNameList = []\nFor i in range len(CountryDictionary[1]):\n      CountryNameList.append CountryDictionary[1][i][\"name\"]\n</code></pre>\n\n<p>// Below is what the JSON file looks like:</p>\n\n<pre><code>[\n    {\n        \"per_page\": \"50\",\n        \"total\": 264,\n        \"page\": 1,\n        \"pages\": 6\n    },\n    [\n        {\n            \"longitude\": \"-70.0167\",\n            \"name\": \"Aruba\",\n            \"region\": {\n                \"id\": \"LCN\",\n                \"value\": \"Latin America &amp; Caribbean (all income levels)\"\n            },\n            \"adminregion\": {\n                \"id\": \"\",\n                \"value\": \"\"\n            },\n            \"iso2Code\": \"AW\",\n            \"capitalCity\": \"Oranjestad\",\n            \"latitude\": \"12.5167\",\n            \"incomeLevel\": {\n                \"id\": \"NOC\",\n                \"value\": \"High income: nonOECD\"\n            },\n            \"id\": \"ABW\",\n            \"lendingType\": {\n                \"id\": \"LNX\",\n                \"value\": \"Not classified\"\n            }\n        },\n        {\n            \"longitude\": \"69.1761\",\n            \"name\": \"Afghanistan\",\n            \"region\": {\n                \"id\": \"SAS\",\n                \"value\": \"South Asia\"\n            },\n            \"adminregion\": {\n                \"id\": \"SAS\",\n                \"value\": \"South Asia\"\n            },\n            \"iso2Code\": \"AF\",\n            \"capitalCity\": \"Kabul\",\n            \"latitude\": \"34.5228\",\n            \"incomeLevel\": {\n                \"id\": \"LIC\",\n                \"value\": \"Low income\"\n            },\n            \"id\": \"AFG\",\n            \"lendingType\": {\n                \"id\": \"IDX\",\n                \"value\": \"IDA\"\n            }\n        },\n  ] ]\n</code></pre>\n"}, {"tags": ["c++", "concatenation", "strcpy", "strncpy"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1464184413, "post_id": 37439171, "comment_id": 62381042, "body": "Why do you want to avoid <code>std::wstring</code>?"}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1464184506, "post_id": 37439171, "comment_id": 62381120, "body": "If you want to avoid using C++, then you can always tag this question as C"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 4, "creation_date": 1464184622, "post_id": 37439171, "comment_id": 62381218, "body": "If you need a modifiable <code>wchar</code> buffer, use <code>std::vector</code>, otherwise, use <code>std::wstring</code>. This C-style string business is a waste of your precious time. (As always, unless you can proof a significant advantage, but that seems unlikely in this case.)"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 5, "creation_date": 1464185035, "post_id": 37439171, "comment_id": 62381529, "body": "The final parameter for <code>wcsncpy</code> and <code>wcsncat</code> should be the number of characters (i.e. <code>wchar_t</code>s) to copy, not the size measured in <code>char</code>s."}, {"owner": {"reputation": 1766, "user_id": 1998918, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f9232dc53d3c8d32d727ea902843e24a?s=128&d=identicon&r=PG", "display_name": "user0000001", "link": "https://stackoverflow.com/users/1998918/user0000001"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1464185175, "post_id": 37439171, "comment_id": 62381652, "body": "@molbdnilo Thank you. That fixed my issue."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1464185276, "post_id": 37439171, "comment_id": 62381737, "body": "You tagged this as C++.  Compare what is posted to <a href=\"http://rextester.com/RKSUIT62212\" rel=\"nofollow noreferrer\">this</a>.  No buffer overruns, no fiddling around with <code>sizeof</code> to mess things up, and is guaranteed to work correctly."}, {"owner": {"reputation": 10212, "user_id": 970543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wq9T6.jpg?s=128&g=1", "display_name": "Nik Bougalis", "link": "https://stackoverflow.com/users/970543/nik-bougalis"}, "edited": false, "score": 2, "creation_date": 1464185358, "post_id": 37439171, "comment_id": 62381798, "body": "A number of issues: first, you&#39;re calling <code>wcsncpy</code> and passing <code>sizeof(...)</code> which gives you the number of <i>bytes</i> in the buffer and which is wrong: the function takes the number of <i>characters</i> in the buffer, so you want <code>sizeof(x) &#47; sizeof(x[0])</code>. Second, this smells like stack corruption to me, so I&#39;ll ask the obvious: are you 100% sure that <code>WorkingDirectory</code> and <code>File</code> fit into <code>MAX_PATH</code> characters? If they don&#39;t, <code>wcsncpy</code> will not null-terminate <code>FileRawInput</code> which could cause &quot;weird&quot; crashes. You should avoid <code>wcsncpy</code> like the plague..."}], "answers": [{"comments": [{"owner": {"reputation": 1766, "user_id": 1998918, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f9232dc53d3c8d32d727ea902843e24a?s=128&d=identicon&r=PG", "display_name": "user0000001", "link": "https://stackoverflow.com/users/1998918/user0000001"}, "edited": false, "score": 1, "creation_date": 1464186810, "post_id": 37440210, "comment_id": 62383027, "body": "I did fix my issue... but I took the suggestions above to move to strings. Heck, if the man himself is telling you to use strings, then you probably should. Thanks for taking the time!"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1464186815, "post_id": 37440210, "comment_id": 62383030, "body": "<code>sizeof(array)</code> is not the same as <code>sizeof(*)</code>. However, it does measure in bytes rather than units."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1464187705, "post_id": 37440210, "comment_id": 62383785, "body": "@rici I intended the <code>*</code> there to be either <code>FileRawInput</code> or <code>bzipCompressedOutput</code> but I see that was unclear. I have edited out my laziness."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1464190788, "post_id": 37440210, "comment_id": 62386118, "body": "Cool, +1. You missed the fact that the n in wcsn{cpy,cat} measure the source, not the destination, and that the destination needs to be one character longer for the NUL. As I suppose you probably know, <code>&quot;%s&quot;</code> in Microsoft&#39;s <code>wprintf</code> does expect a  const wchar_t*<code>, which differs from standard C where it would expect a </code>const char*` pointing at a multibyte string. So <code>&quot;%ls&quot;</code> is required with a standards-compliant standard library, and thus for portability, but on windows <code>&quot;%s&quot;</code> will, unfortunately, do what OP expects."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1464191387, "post_id": 37440210, "comment_id": 62386625, "body": "@rici I had assumed that <code>MAX_PATH</code> had accounted for that (maybe I should add a note on that.) The reason for the segfault was not because of insufficient space to write <code>FileRawInput</code> but insufficient space to write <code>sizeof(bzipCompressedOutput)</code> <code>wchar_t</code>s to <code>bzipCompressedOutput</code> when <a href=\"http://en.cppreference.com/w/cpp/string/wide/wcsncpy\" rel=\"nofollow noreferrer\"><code>wcsncpy</code></a> executes: &quot;If, after copying the terminating null wide character from <code>src</code>, <code>count</code> is not reached, additional null wide characters are written to <code>dest</code> until the total of <code>count</code> characters have been written.&quot;"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1464192801, "post_id": 37440210, "comment_id": 62387568, "body": "@JonathanMee: Indeed that was the immediate problem. But even if that were fixed, providing the precise size of the output buffer as the argument to *ncpy leads to the possibility that the result is not NUL-terminated. The only safe way to do it is to allocate one extra character, which you explicitly initialize to NUL. *ncat, on the other hand, guarantees NUL-termination but since you supply the size of the source, it&#39;s your responsibility to ensure that the dest has room for the NUL. These functions are hard to use, and just adding the <code>n</code> doesn&#39;t make your program safe. On the contrary."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1464193706, "post_id": 37440210, "comment_id": 62388118, "body": "@rici I agree, this is why we use <code>wstring</code>s right? In the interest of completion I have appended the need for this check to the answer."}], "tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": true, "score": 2, "last_activity_date": 1464193613, "last_edit_date": 1495542157, "creation_date": 1464186621, "answer_id": 37440210, "question_id": 37439171, "link": "https://stackoverflow.com/questions/37439171/concatenating-char-arrays-together/37440210#37440210", "title": "Concatenating char arrays together", "body": "<p>In the <a href=\"https://books.google.com/books?id=PSUNAAAAQBAJ&amp;pg=PA110#v=onepage&amp;q&amp;f=false\" rel=\"nofollow noreferrer\">last page of chapter 4 in his book</a>: \"The C++ Programming Language\" <a href=\"https://en.wikipedia.org/wiki/Bjarne_Stroustrup\" rel=\"nofollow noreferrer\">Bjarne Stroustrup the creator of C++</a> says:</p>\n\n<blockquote>\n  <p>Prefer <code>strings</code> over C-style strings</p>\n</blockquote>\n\n<p>It's only advice but I'd encourage you to follow it.</p>\n\n<hr>\n\n<p>But your real problem is that you're stomping memory there are <em>not</em> <code>sizeof(FileRawInput)</code> <code>wchar_t</code>s in your <code>FileRawInput</code> likewise there are not <code>sizeof(bzipCompressedOutput)</code> in <code>bzipCompressedOutput</code> array, there are <code>MAX_PATH</code> <code>wchar_t</code>s in both. The problem is that <code>sizeof</code> will tell you the number of bytes in your array, but if each element is larger than 1 byte then you have incorrectly told <code>wcsncpy</code> and <code>wscncat</code> your character count. A <code>wchar_t</code> is generally 2 bytes: <a href=\"https://msdn.microsoft.com/en-us/library/s3f49ktz.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/s3f49ktz.aspx</a> Meaning you're calling effectively <code>wcsncpy(FileRawInput, WorkingDirectory, 200)</code>. Stomping memory 100 <code>wchar_t</code>s beyond what you have allocated. Correcting this will remove your segfault.</p>\n\n<p>But in order to print a wide string you'll need to correctly use the <code>%ls</code> modifier to <code>wprintf</code>.</p>\n\n<p>Ultimately your code should look something like this:</p>\n\n<pre><code>wprintf(L\"Attempting to compress %ls%ls\\n\", WorkingDirectory, File);\n\nwchar_t FileRawInput[MAX_PATH];\nwcsncpy(FileRawInput, WorkingDirectory, MAX_PATH);\nwcsncat(FileRawInput, File, MAX_PATH);\n\nwchar_t bzipCompressedOutput[MAX_PATH];\nwcsncpy(bzipCompressedOutput, FileRawInput, MAX_PATH);\nwcscat(bzipCompressedOutput, L\".bz2\");\n\nwprintf(L\"Output of string bzip: %ls\\n\", bzipCompressedOutput);\nwprintf(L\"Output of string raw: %ls\\n\", FileRawInput);\n</code></pre>\n\n<p><a href=\"http://ideone.com/Xdu6zL\" rel=\"nofollow noreferrer\"><kbd>Live Example</kbd></a></p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>The OP has acquiesced to Bjarne Stroustrup's advice and gone to <code>wstring</code>: <a href=\"https://stackoverflow.com/questions/37439171/concatenating-char-arrays-together/37440210?noredirect=1#comment62383027_37440210\">Concatenating char arrays together</a> But for anyone else who is still insistent on using these C-Style functions, <code>MAX_PATH</code> must be large enough to accommodate <code>wsclen(WorkingDirectory) + wsclen(File) + wsclen(L\".bz2\")</code> plus the <code>L'\\0'</code> character, so perhaps placing a if statement on this function would be useful or perhaps:</p>\n\n<pre><code>assert(MAX_PATH &gt; wsclen(WorkingDirectory) + wsclen(File) + wsclen(L\".bz2\"))\n</code></pre>\n"}], "owner": {"reputation": 1766, "user_id": 1998918, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f9232dc53d3c8d32d727ea902843e24a?s=128&d=identicon&r=PG", "display_name": "user0000001", "link": "https://stackoverflow.com/users/1998918/user0000001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 0, "accepted_answer_id": 37440210, "answer_count": 1, "score": 1, "last_activity_date": 1464193613, "creation_date": 1464184077, "question_id": 37439171, "link": "https://stackoverflow.com/questions/37439171/concatenating-char-arrays-together", "title": "Concatenating char arrays together", "body": "<p>This is something I would have considered trivial several years ago... It's been awhile since I've dabbled in C or C++ and I'm having an issue that is now causing a migraine.</p>\n\n<p>I am receiving an error for the following code:</p>\n\n<pre><code>CompressFile::CompressFile(wchar_t *WorkingDirectory, wchar_t *File)\n{\n    int bzipError = BZ_OK;\n\n    wprintf(L\"Attempting to compress %s%s\\n\", WorkingDirectory, File);\n\n    wchar_t FileRawInput[MAX_PATH];\n    wcsncpy(FileRawInput, WorkingDirectory, sizeof(FileRawInput));\n    wcsncat(FileRawInput, File, sizeof(FileRawInput));\n\n    wchar_t bzipCompressedOutput[MAX_PATH];\n    wcsncpy(bzipCompressedOutput, FileRawInput, sizeof(bzipCompressedOutput));\n    wcscat(bzipCompressedOutput, L\".bz2\"); \n\n    wprintf(L\"Output of string bzip: %s\\n\", bzipCompressedOutput);\n    wprintf(L\"Output of string raw: %s\\n\", FileRawInput);\n}\n</code></pre>\n\n<p>I am receiving this the following error on line 8:</p>\n\n<pre><code>Unhandled exception at 0x64F4C6D1 in ias-agent.exe: 0xC00001A5: An invalid exception handler routine has been detected (parameters: 0x00000003).\n</code></pre>\n\n<p>I've already gone the distance to avoid using the <code>string</code> class, and I'd like to keep it that way for the time being. All I am trying to do, is add two strings together for <code>RawFileInput</code> and then add the value of <code>RawFileInput</code> to <code>bzipCompressionOutput</code> and finally, concatenate <code>.bz2</code> to the end of <code>bzipCompressionOutput</code>.</p>\n"}, {"tags": ["c++", "opengl", "sdl-2"], "comments": [{"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 0, "creation_date": 1464184662, "post_id": 37439082, "comment_id": 62381249, "body": "maybe start with a tutorial on <a href=\"https://solarianprogrammer.com/2013/05/13/opengl-101-drawing-primitives/\" rel=\"nofollow noreferrer\">drawing line primitives in opengl</a>, or is something forcing you to use SDL?"}, {"owner": {"reputation": 875, "user_id": 3138161, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/afcb064a0dc2a8c7471138f782e60a17?s=128&d=identicon&r=PG&f=1", "display_name": "Dries", "link": "https://stackoverflow.com/users/3138161/dries"}, "reply_to_user": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 0, "creation_date": 1464215899, "post_id": 37439082, "comment_id": 62399358, "body": "Thanks. I&#39;m reading through that. Nothing is forcing me to use SDL but I&#39;ve started with it and I think it&#39;s going to be more work to switch to something else then to try and understand the current problem. Do you have any alternatives maybe?"}], "owner": {"reputation": 875, "user_id": 3138161, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/afcb064a0dc2a8c7471138f782e60a17?s=128&d=identicon&r=PG&f=1", "display_name": "Dries", "link": "https://stackoverflow.com/users/3138161/dries"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "closed_date": 1464185963, "answer_count": 0, "score": 0, "last_activity_date": 1464183859, "creation_date": 1464183859, "question_id": 37439082, "link": "https://stackoverflow.com/questions/37439082/sdl-drawing-lines", "closed_reason": "Duplicate", "title": "SDL Drawing lines", "body": "<p>I'm trying to add something resembling a debug draw in my engine built on SDL and Modern OpenGL. The way rendering works right now is using Modern OpenGL (so no SDL methods are used in drawing the sprites I want to the screen). Here's some of the code that makes this work:  </p>\n\n<pre><code>// Main Rendering loop\nglClearDepth(1.0f);\nglClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\ncolorProgram.bind();\n\nstd::sort(objectsWithGraphicsComponentInThisScene.begin(), objectsWithGraphicsComponentInThisScene.end(), sortByRenderDepth);\n\nfor (size_t t = 0; t &lt; objectsWithGraphicsComponentInThisScene.size(); ++t)\n{\n    // set texture\n    glActiveTexture(GL_TEXTURE0);\n    glBindTexture(GL_TEXTURE_2D, objectsWithGraphicsComponentInThisScene[t]-&gt;getComponent&lt;GraphicsComponent&gt;()-&gt;getTexture());\n\n    GLint texLocation = colorProgram.getUniformLocation(\"texSampler\");\n    glUniform1i(texLocation, 0);\n\n    glm::mat4 rot = glm::rotate(glm::mat4x4(1.0f), objectsWithGraphicsComponentInThisScene[t]-&gt;getComponent&lt;GraphicsComponent&gt;()-&gt;getRotation(), glm::vec3(0.0f, 0.0f, 1.0f));\n    glm::mat4 scale = glm::scale(glm::mat4x4(1.0f), glm::vec3(objectsWithGraphicsComponentInThisScene[t]-&gt;getComponent&lt;GraphicsComponent&gt;()-&gt;getScale().x, objectsWithGraphicsComponentInThisScene[t]-&gt;getComponent&lt;GraphicsComponent&gt;()-&gt;getScale().y, 1.0f));\n\n    glm::mat4 trans;\n    trans = glm::translate(glm::mat4x4(1.0f), glm::vec3(objectsWithGraphicsComponentInThisScene[t]-&gt;getPosition().x, objectsWithGraphicsComponentInThisScene[t]-&gt;getPosition().y, 0));\n    GLint transMatLocation = colorProgram.getUniformLocation(\"transformMatrix\");\n    trans *= rot * scale;\n    glUniformMatrix4fv(transMatLocation, 1, GL_FALSE, glm::value_ptr(trans));\n\n    // set camera Matrix\n    GLint projMatLocation = colorProgram.getUniformLocation(\"projectionMatrix\");\n    glm::mat4 cameraMatrix = camera-&gt;getCameraMatrix();\n    glUniformMatrix4fv(projMatLocation, 1, GL_FALSE, glm::value_ptr(cameraMatrix));\n\n    // This runs the Sprite::draw method per object in the current scene\n    objectsWithGraphicsComponentInThisScene[t]-&gt;getComponent&lt;GraphicsComponent&gt;()-&gt;getSprite()-&gt;draw();\n\n    // unbind all\n    glBindTexture(GL_TEXTURE_2D, 0);\n}\n\ncolorProgram.unbind();\n\n// swap front and back buffer\nSDL_GL_SwapWindow(BaseSDLWindowManager::get()-&gt;getWindow());\n</code></pre>\n\n<p>Here's the code in the <code>getSprite()-&gt;draw()</code> method:</p>\n\n<pre><code>void Sprite::draw()\n{\nglBindBuffer(GL_ARRAY_BUFFER, vboID);\n\nglEnableVertexAttribArray(0);\n\n// arguments:\n// 1. Which VertexAttribArray\n// 2. How many items per attribute\n// 3. Which type are the items in the array\n// ...\n//5. stride, if the data is interleaved (pos, color, ...)\n\n// position\nglVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, sizeof(Vertex), (void*)offsetof(Vertex, position));\n\n//color\nglVertexAttribPointer(1, 4, GL_UNSIGNED_BYTE, GL_TRUE, sizeof(Vertex), (void*)offsetof(Vertex, color));\n\n// uv\nglVertexAttribPointer(2, 2, GL_FLOAT, GL_TRUE, sizeof(Vertex), (void*)offsetof(Vertex, uv));\n\nglDrawArrays(GL_TRIANGLES, 0, 6);\n\nglDisableVertexAttribArray(0);\n\nglBindBuffer(GL_ARRAY_BUFFER, 0);\n}\n</code></pre>\n\n<p>Now what I want to do is, add something so that I can render simple lines and such (or rectangles, simple shapes). I've tried putting this kind of code all over the rendering process: (but before the <code>SDL_GL_SwapWindow()</code>)</p>\n\n<pre><code>//Render green outlined quad\nSDL_SetRenderDrawColor(BaseSDLWindowManager::get()-&gt;getRenderer(), 255, 0, 0, 255);\nSDL_RenderDrawLine(BaseSDLWindowManager::get()-&gt;getRenderer(), 0, 0, 100, 100);\n</code></pre>\n\n<p>but I'm not getting any rendering done with this. Nothing is showing. Since I'm kind of new to Modern OpenGL and SDL rendering I'd like to know where I should put this code or how I should change it so that it does render. I have no clue where to start looking</p>\n"}, {"tags": ["c++", "vector", "type-conversion", "std-pair"], "comments": [{"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 0, "creation_date": 1464183766, "post_id": 37438970, "comment_id": 62380511, "body": "Since the memory layout is incompatible, there&#39;s no other way than actually converting to the other format."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1464183912, "post_id": 37438970, "comment_id": 62380634, "body": "If your function expects a jagged array of pointers then you&#39;ll have to create such an array to pass to the function, because the vector stores all the items contiguously. It might be better to change the function if you can"}, {"owner": {"reputation": 1, "user_id": 6380599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f8f520f823e9ed2c4c6dd470aa76ae?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr", "link": "https://stackoverflow.com/users/6380599/piotr"}, "edited": false, "score": 0, "creation_date": 1464191901, "post_id": 37438970, "comment_id": 62387008, "body": "In other words, I will have to create an array of pointers having the correct size, loop over the entire vector and copy the elements, correct?. Or is there a more elegant way? Thank you in advance!"}], "owner": {"reputation": 1, "user_id": 6380599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f8f520f823e9ed2c4c6dd470aa76ae?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr", "link": "https://stackoverflow.com/users/6380599/piotr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1464183589, "creation_date": 1464183589, "question_id": 37438970, "link": "https://stackoverflow.com/questions/37438970/converting-vector-of-pairs", "title": "Converting vector of pairs", "body": "<p>I have a function <code>void process(int numSamples, double *const *arrayOfChannels)</code> for processing an audio stream (left and right channel samples).</p>\n\n<p>Usually, the data for the second argument comes in the form <code>double* audioData[2]</code>.</p>\n\n<p>Now, I would like to work with samples that are stored in a vector of pairs (<code>std::vector&lt;std::pair&lt;double, double&gt;&gt; audioData</code>).</p>\n\n<p>What would be the best way to pass the vector to the function?</p>\n"}, {"tags": ["c++", "multithreading", "directx", "directx-11", "deferred-rendering"], "comments": [{"owner": {"reputation": 7992, "user_id": 2694444, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/lQntl.jpg?s=128&g=1", "display_name": "galop1n", "link": "https://stackoverflow.com/users/2694444/galop1n"}, "edited": false, "score": 0, "creation_date": 1464240786, "post_id": 37438896, "comment_id": 62405500, "body": "What are the used flags, remember that the first map in a deferred context need to be discard ? Also, you should try to turn on the debug device, it is likely to display what happen on errors. And last, AMD is always a little tricky on their driver behavior on non typical usage."}, {"owner": {"reputation": 97, "user_id": 3081041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AD7F2.png?s=128&g=1", "display_name": "feserr", "link": "https://stackoverflow.com/users/3081041/feserr"}, "reply_to_user": {"reputation": 7992, "user_id": 2694444, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/lQntl.jpg?s=128&g=1", "display_name": "galop1n", "link": "https://stackoverflow.com/users/2694444/galop1n"}, "edited": false, "score": 0, "creation_date": 1466504256, "post_id": 37438896, "comment_id": 63332113, "body": "@galop1n Sorry for the late answer. The flags were Ok and the debug device was turn on. This problem did not make the program crash, the only thing is that <b>RowPitch</b> and <b>DepthPitch</b> is always 0 in AMD drivers."}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 3081041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AD7F2.png?s=128&g=1", "display_name": "feserr", "link": "https://stackoverflow.com/users/3081041/feserr"}, "edited": false, "score": 1, "creation_date": 1552578101, "post_id": 55166629, "comment_id": 97072547, "body": "I forgot to post the solution."}], "tags": [], "owner": {"reputation": 97, "user_id": 3081041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AD7F2.png?s=128&g=1", "display_name": "feserr", "link": "https://stackoverflow.com/users/3081041/feserr"}, "is_accepted": true, "score": 1, "last_activity_date": 1552578081, "creation_date": 1552578081, "answer_id": 55166629, "question_id": 37438896, "link": "https://stackoverflow.com/questions/37438896/deferred-context-do-not-fill-d3d11-mapped-subresource-size/55166629#55166629", "title": "Deferred context do not fill D3D11_MAPPED_SUBRESOURCE size", "body": "<p>The problem was that in ATI GPUs that function don't fill that variables. This don't happen in NVIDIA GPUs.</p>\n\n<p>The solution is to use NVIDIA GPUs that fill the variables.</p>\n"}], "owner": {"reputation": 97, "user_id": 3081041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AD7F2.png?s=128&g=1", "display_name": "feserr", "link": "https://stackoverflow.com/users/3081041/feserr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 516, "favorite_count": 0, "accepted_answer_id": 55166629, "answer_count": 1, "score": 1, "last_activity_date": 1552578081, "creation_date": 1464183383, "last_edit_date": 1464196257, "question_id": 37438896, "link": "https://stackoverflow.com/questions/37438896/deferred-context-do-not-fill-d3d11-mapped-subresource-size", "title": "Deferred context do not fill D3D11_MAPPED_SUBRESOURCE size", "body": "<p>I have a 3D application that use 4 thread with one deferred context each one. The problem is that when I use the deferred context to map (<a href=\"https://msdn.microsoft.com/es-es/library/windows/desktop/ff476457(v=vs.85).aspx\" rel=\"nofollow\">ID3D11DeviceContext::Map</a>) the resource, the variables <strong>RowPitch</strong> and <strong>DepthPitch</strong> are equal to 0. I get the pointer to the mapped resource and with the memory inspector I see that it have reserve memory (like a calloc).</p>\n\n<p>I have this problem only with ATI graphic cards.</p>\n\n<p>The following code show where is the problem (part of hieroglyph3 engine):</p>\n\n<pre><code>D3D11_MAPPED_SUBRESOURCE Data;\nData.pData = NULL;\nData.DepthPitch = Data.RowPitch = 0;\n\nif ( nullptr == pGlyphResource ) {\n    Log::Get().Write( L\"Trying to map a subresource that doesn't exist!!!\" );\n    return( Data );\n}\n// TODO: Update this to use a ComPtr!\n// Acquire the native resource pointer.\nID3D11Resource* pResource = 0;\npResource = pGlyphResource-&gt;GetResource();\n\nif ( nullptr == pResource ) {\n    Log::Get().Write( L\"Trying to map a subresource that has no native resource in it!!!\" );\n    return( Data );\n}\n\n// Perform the mapping of the resource.\n// This function must fill Data but it only fill the pointer to the mapped resource\nHRESULT hr = m_pContext-&gt;Map( pResource, subresource, actions, flags, &amp;Data );\n\nif ( FAILED( hr ) ) {\n    Log::Get().Write( L\"Failed to map resource!\" );\n}\n\nreturn( Data );\n</code></pre>\n\n<p>In <a href=\"https://hieroglyph3.codeplex.com/\" rel=\"nofollow\">hieroglyph3</a> you can download and test it. The code is in <strong>PipeLineManagerDX11.cpp</strong> in line 688, you can find the class also check it <a href=\"https://hieroglyph3.codeplex.com/SourceControl/latest#Source/PipelineManagerDX11.cpp\" rel=\"nofollow\">here</a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1464183014, "post_id": 37438489, "comment_id": 62379945, "body": "Since C++14 you can avoid the problem with <code>const auto&amp; f2() const { return data; }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1020, "user_id": 4304120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc7c00d9ea3a92baac5b6927343dba?s=128&d=identicon&r=PG&f=1", "display_name": "Marian Spanik", "link": "https://stackoverflow.com/users/4304120/marian-spanik"}, "edited": false, "score": 0, "creation_date": 1464182847, "post_id": 37438602, "comment_id": 62379825, "body": "I am sorry, I spelled the question incorrectly. I want to add the qualifier to the function, not the return value."}, {"owner": {"reputation": 6924, "user_id": 835629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b38fa6792bcb51a7fe773b5f942c66c2?s=128&d=identicon&r=PG", "display_name": "coyotte508", "link": "https://stackoverflow.com/users/835629/coyotte508"}, "edited": false, "score": 0, "creation_date": 1464182907, "post_id": 37438602, "comment_id": 62379870, "body": "It&#39;s teh same thing though. You can use the <code>typedef</code> and then add <code>const</code> after the function like usual"}, {"owner": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "edited": false, "score": 1, "creation_date": 1464183521, "post_id": 37438602, "comment_id": 62380332, "body": "Yes, exactly. Edit made"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1464214868, "post_id": 37438602, "comment_id": 62398989, "body": "Using C <code>typedef</code> kinda just exchanges one readability problem for another, due to the element and alias types being the wrong way around conceptually and versus all other uses. Using C++ <code>using</code> is superior. In fact, this might be a &#39;textbook&#39; example of why the latter was added to C++."}, {"owner": {"reputation": 3521, "user_id": 658087, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/hvS4q.png?s=128&g=1", "display_name": "JD\u0142ugosz", "link": "https://stackoverflow.com/users/658087/jd%c5%82ugosz"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1464235311, "post_id": 37438602, "comment_id": 62403918, "body": "@underscore_d what do you mean? Typedef is same way around as variables being defined. So what <i>other uses</i> did you mean?"}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 3521, "user_id": 658087, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/hvS4q.png?s=128&g=1", "display_name": "JD\u0142ugosz", "link": "https://stackoverflow.com/users/658087/jd%c5%82ugosz"}, "edited": false, "score": 1, "creation_date": 1464247158, "post_id": 37438602, "comment_id": 62408541, "body": "@JD\u0142ugosz I think what <i>underscore_d</i> means here is that <code>typedef</code> can be seen as inconsistent when used for array/function declarations - <code>typedef int myType</code> vs. <code>typedef int arrayType[10]</code> - one would probably expect <code>typedef int[10] arrayType</code> (I realize there are rules for this and that according to them this does make sense, but I think this is what underscore_d meant). With a <code>using</code> directive, it is indeed more intuitive: <code>using arrayType = int[10];</code>."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1464266096, "post_id": 37438602, "comment_id": 62420957, "body": "@szczurcio Exactly. Thanks!"}, {"owner": {"reputation": 3521, "user_id": 658087, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/hvS4q.png?s=128&g=1", "display_name": "JD\u0142ugosz", "link": "https://stackoverflow.com/users/658087/jd%c5%82ugosz"}, "edited": false, "score": 0, "creation_date": 1464291318, "post_id": 37438602, "comment_id": 62437794, "body": "But that&#39;s exactly the <i>same</i> (way around) as <code>int array_variable [10]</code>, so what does <i>all other uses</i> refer to? I don&#39;t know what <i>element and alias types</i> mean in this sentence."}], "tags": [], "owner": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "is_accepted": false, "score": 4, "last_activity_date": 1464183498, "last_edit_date": 1464183498, "creation_date": 1464182696, "answer_id": 37438602, "question_id": 37438489, "link": "https://stackoverflow.com/questions/37438489/how-to-use-a-cv-qualifier-for-a-method-that-returns-a-reference-to-an-array/37438602#37438602", "title": "How to use a cv-qualifier for a method that returns a reference to an array?", "body": "<p>Well a typedef could solve your problem, and make it a little more readable:</p>\n\n<pre><code>struct A\n{\n    typedef int array_t[10];\n\n    ...\n\n    const array_t&amp; f2() const\n    {\n        return data;\n    }\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464182865, "post_id": 37438641, "comment_id": 62379836, "body": "Would reference qualifiers also go in the <code>()</code> around the function name an parameter list?"}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464183108, "post_id": 37438641, "comment_id": 62380019, "body": "@NathanOliver I got your question correctly, no you can&#39;t do <code>int (const&amp;f2() const )[10]</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464183164, "post_id": 37438641, "comment_id": 62380067, "body": "@101010 No the <code>&amp;</code> or <code>&amp;&amp;</code> at then end of member function to determine if they they are lvalue or rvalue only functions."}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "reply_to_user": {"reputation": 1020, "user_id": 4304120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc7c00d9ea3a92baac5b6927343dba?s=128&d=identicon&r=PG&f=1", "display_name": "Marian Spanik", "link": "https://stackoverflow.com/users/4304120/marian-spanik"}, "edited": false, "score": 1, "creation_date": 1464183174, "post_id": 37438641, "comment_id": 62380077, "body": "@MarianSpanik You got what you&#39;ve asked for :)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1464183712, "post_id": 37438641, "comment_id": 62380480, "body": "@NathanOliver yes they&#39;d go after the <code>const</code> and before anything else"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1464183898, "post_id": 37438641, "comment_id": 62380624, "body": "@M.M Thanks for that"}], "tags": [], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "is_accepted": true, "score": 17, "last_activity_date": 1464182777, "creation_date": 1464182777, "answer_id": 37438641, "question_id": 37438489, "link": "https://stackoverflow.com/questions/37438489/how-to-use-a-cv-qualifier-for-a-method-that-returns-a-reference-to-an-array/37438641#37438641", "title": "How to use a cv-qualifier for a method that returns a reference to an array?", "body": "<pre><code>const int (&amp;f2() const )[10]\n{\n    return data;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 0, "creation_date": 1464183194, "post_id": 37438707, "comment_id": 62380098, "body": "Aren&#39;t you missing a const in your fist example?"}, {"owner": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "reply_to_user": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 0, "creation_date": 1464183313, "post_id": 37438707, "comment_id": 62380176, "body": "@MohamadElghawi Thank you."}, {"owner": {"reputation": 19052, "user_id": 1364752, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mxlR2.jpg?s=128&g=1", "display_name": "Morwenn", "link": "https://stackoverflow.com/users/1364752/morwenn"}, "edited": false, "score": 0, "creation_date": 1464187936, "post_id": 37438707, "comment_id": 62383972, "body": "Can&#39;t we also have a clean but exact return type using a trailing return type?"}, {"owner": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "reply_to_user": {"reputation": 19052, "user_id": 1364752, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mxlR2.jpg?s=128&g=1", "display_name": "Morwenn", "link": "https://stackoverflow.com/users/1364752/morwenn"}, "edited": false, "score": 0, "creation_date": 1464189158, "post_id": 37438707, "comment_id": 62384955, "body": "@Morwenn What do you mean? Something like <code>... -&gt; const auto&amp;</code>?"}, {"owner": {"reputation": 19052, "user_id": 1364752, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mxlR2.jpg?s=128&g=1", "display_name": "Morwenn", "link": "https://stackoverflow.com/users/1364752/morwenn"}, "edited": false, "score": 1, "creation_date": 1464189804, "post_id": 37438707, "comment_id": 62385432, "body": "More like <code>auto ... -&gt; int const(&amp;)[10]</code> in which case you have the actual return type fully spelled out, but without the awkawrd C-style function syntax nested in it."}, {"owner": {"reputation": 20213, "user_id": 147845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e225ff5beb684088f5c9131d3979a18?s=128&d=identicon&r=PG", "display_name": "You", "link": "https://stackoverflow.com/users/147845/you"}, "edited": false, "score": 2, "creation_date": 1464200949, "post_id": 37438707, "comment_id": 62392172, "body": "This is the sane solution to the problem."}], "tags": [], "owner": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "is_accepted": false, "score": 22, "last_activity_date": 1464183794, "last_edit_date": 1592644375, "creation_date": 1464182925, "answer_id": 37438707, "question_id": 37438489, "link": "https://stackoverflow.com/questions/37438489/how-to-use-a-cv-qualifier-for-a-method-that-returns-a-reference-to-an-array/37438707#37438707", "title": "How to use a cv-qualifier for a method that returns a reference to an array?", "body": "<p>I'll propose few solutions which are in my opinion more readable than the extremely direct answer to this question. I'm sure there are C grammar enthusiasts out there and I apologize to them for I have terrible memory and I'm not able to remember those C rules.</p>\n<h3>Type alias</h3>\n<p>You can avoid the weird C-based grammar by using a type alias:</p>\n<pre><code>struct A {\n    using data_type = int[10];\n    data_type data;\n    data_type&amp; f1() { return data; }\n    data_type const&amp; f2() const { return data; }\n};\n</code></pre>\n<p><a href=\"http://coliru.stacked-crooked.com/a/fcb7368be9d1ad9c\" rel=\"noreferrer\"><kbd>Live demo</kbd></a></p>\n<p>or with <code>typedef</code> (for before C++11):</p>\n<pre><code>struct A {\n    typedef int data_type[10];\n    data_type data;\n    data_type&amp; f1() { return data; }\n    data_type const&amp; f2() const { return data; }\n};\n</code></pre>\n<p><a href=\"http://coliru.stacked-crooked.com/a/c4759c37e3bd9e5e\" rel=\"noreferrer\"><kbd>Live demo</kbd></a></p>\n<h3>Auto</h3>\n<p>Since C++14 you can also use\u00a0<code>auto</code> return types:</p>\n<pre><code>struct A {\n    int data[10];\n    auto&amp; f1() { return data; }\n    auto const&amp; f2() const { return data; }\n};\n</code></pre>\n<p><a href=\"http://coliru.stacked-crooked.com/a/86f47b1d8d19917b\" rel=\"noreferrer\"><kbd>Live demo</kbd></a></p>\n<h3>Standard array</h3>\n<p>As of C++11 you can also just use <code>std::array</code>:</p>\n<pre><code>struct A {\n    using data_type = std::array&lt;int, 10&gt;;\n    data_type data;\n    data_type&amp; f1() { return data; }\n    data_type const&amp; f2() const { return data; }\n};\n</code></pre>\n<p><a href=\"http://coliru.stacked-crooked.com/a/94c6d9e0d37156dc\" rel=\"noreferrer\"><kbd>Live demo</kbd></a></p>\n<p>and simplify it to:</p>\n<pre><code>struct A {\n    std::array&lt;int, 10&gt; data;\n};\n</code></pre>\n<p><a href=\"http://coliru.stacked-crooked.com/a/b9dd80969e6c9471\" rel=\"noreferrer\"><kbd>Live demo</kbd></a></p>\n<p>which is somewhat functionally equivalent but easier on the eyes.</p>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 6, "last_activity_date": 1464183005, "creation_date": 1464183005, "answer_id": 37438743, "question_id": 37438489, "link": "https://stackoverflow.com/questions/37438489/how-to-use-a-cv-qualifier-for-a-method-that-returns-a-reference-to-an-array/37438743#37438743", "title": "How to use a cv-qualifier for a method that returns a reference to an array?", "body": "<p>Use a typedef. It'll make everybody's life easier:</p>\n\n<pre><code>struct A\n{\n    using Data = int[10];\n    Data data;\n\n    Data const&amp; f1()\n    {\n        return data;\n    }\n\n    Data const&amp; f2() const\n    {\n        return data;\n    }\n};\n</code></pre>\n\n<p>The same could be accomplished with <code>std::array&lt;int, 10&gt;</code>:</p>\n\n<pre><code>std::array&lt;int, 10&gt; data;\nstd::array&lt;int, 10&gt; const&amp; f2() const { return data; }\n</code></pre>\n\n<p>which is another advantage of <code>std::array</code> over raw array.</p>\n"}], "owner": {"reputation": 1020, "user_id": 4304120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc7c00d9ea3a92baac5b6927343dba?s=128&d=identicon&r=PG&f=1", "display_name": "Marian Spanik", "link": "https://stackoverflow.com/users/4304120/marian-spanik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 860, "favorite_count": 0, "accepted_answer_id": 37438641, "answer_count": 4, "score": 11, "last_activity_date": 1464183794, "creation_date": 1464182388, "last_edit_date": 1495541862, "question_id": 37438489, "link": "https://stackoverflow.com/questions/37438489/how-to-use-a-cv-qualifier-for-a-method-that-returns-a-reference-to-an-array", "title": "How to use a cv-qualifier for a method that returns a reference to an array?", "body": "<p>If I have a member function which returns a reference to an array (<a href=\"https://stackoverflow.com/a/5399014/4304120\">https://stackoverflow.com/a/5399014/4304120</a>), how can I add a const qualifier to the function? This code doesn't compile under Visual C++ 2010.</p>\n\n<pre><code>struct A\n{\n    int data[10];\n\n    // this compiles\n    const int (&amp;f1())[10]\n    {\n        return data;\n    }\n\n    // error C2143: syntax error : missing ';' before '&lt;cv-qualifer&gt;'\n    const int (&amp;f2())[10] const\n    {\n        return data;\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "curl", "makefile", "clang", "configure"], "answers": [{"comments": [{"owner": {"reputation": 653, "user_id": 4134398, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nP0zN.png?s=128&g=1", "display_name": "Draif Kroneg", "link": "https://stackoverflow.com/users/4134398/draif-kroneg"}, "edited": false, "score": 0, "creation_date": 1464186472, "post_id": 37438495, "comment_id": 62382754, "body": "It does help with the error, but creates other ones. Apparently, as I understand only llvm-gcc can be used for Iphone, not clang"}], "tags": [], "owner": {"reputation": 14855, "user_id": 3159253, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/046000bcd9bbb664fc01891f558baa0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3159253", "link": "https://stackoverflow.com/users/3159253/user3159253"}, "is_accepted": true, "score": 0, "last_activity_date": 1464182399, "creation_date": 1464182399, "answer_id": 37438495, "question_id": 37438224, "link": "https://stackoverflow.com/questions/37438224/how-to-disable-compiler-does-not-halt-on-function-prototype-mismatch-error-in/37438495#37438495", "title": "How to disable &quot;compiler does not halt on function prototype mismatch&quot; error in configure?", "body": "<p>Apply this <a href=\"https://svn.cactuscode.org/projects/ExternalLibraries/curl/branches/Cactus_4.3.0/dist/configure.patch\" rel=\"nofollow\">patch</a> and retry the build. Perhaps, you'd wish to exclude the part regarding <code>configure.ac</code> or run <code>autoconf</code> manually.</p>\n"}], "owner": {"reputation": 653, "user_id": 4134398, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nP0zN.png?s=128&g=1", "display_name": "Draif Kroneg", "link": "https://stackoverflow.com/users/4134398/draif-kroneg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 483, "favorite_count": 0, "accepted_answer_id": 37438495, "answer_count": 1, "score": 1, "last_activity_date": 1464182399, "creation_date": 1464181772, "question_id": 37438224, "link": "https://stackoverflow.com/questions/37438224/how-to-disable-compiler-does-not-halt-on-function-prototype-mismatch-error-in", "title": "How to disable &quot;compiler does not halt on function prototype mismatch&quot; error in configure?", "body": "<p>I am trying to compile curl source on my mac and before running makefile I did run the configure:</p>\n\n<pre><code>./configure --disable-shared --enable-static --disable-dependency-tracking --host=armv7-apple-darwin --disable-ldap\n</code></pre>\n\n<p>And it gave the:</p>\n\n<pre><code>configure: error: compiler does not halt on function prototype mismatch.\n</code></pre>\n\n<p>How do I disable it?  My compiler environmental variable is: <code>CC=/usr/bin/clang++</code></p>\n"}, {"tags": ["c++", "colors", "console", "ncurses"], "comments": [{"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1464340560, "post_id": 37438153, "comment_id": 62456090, "body": "The example still doesn&#39;t compile."}, {"owner": {"reputation": 702, "user_id": 6381179, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b8d38cdec7c23e9256b459501570ffe4?s=128&d=identicon&r=PG&f=1", "display_name": "Shirkam", "link": "https://stackoverflow.com/users/6381179/shirkam"}, "reply_to_user": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1464341131, "post_id": 37438153, "comment_id": 62456451, "body": "Finally, I have uploaded ALL code and makefile to this github repo. <a href=\"https://github.com/Shirkamdev/physic_simulator\" rel=\"nofollow noreferrer\">github.com/Shirkamdev/physic_simulator</a>"}], "answers": [{"comments": [{"owner": {"reputation": 702, "user_id": 6381179, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b8d38cdec7c23e9256b459501570ffe4?s=128&d=identicon&r=PG&f=1", "display_name": "Shirkam", "link": "https://stackoverflow.com/users/6381179/shirkam"}, "edited": false, "score": 0, "creation_date": 1464277720, "post_id": 37446908, "comment_id": 62429782, "body": "Well, it was an error while copying the code. I have edited so now it shows all my code."}], "tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": false, "score": 0, "last_activity_date": 1464399224, "last_edit_date": 1464399224, "creation_date": 1464207674, "answer_id": 37446908, "question_id": 37438153, "link": "https://stackoverflow.com/questions/37438153/color-pairs-in-ncurses-not-working-properly-in-classes/37446908#37446908", "title": "Color pairs in ncurses not working properly in classes", "body": "<p>Running the code (and tracing it using ncurses' <a href=\"http://invisible-island.net/ncurses/man/curs_trace.3x.html\" rel=\"nofollow\">debug-trace feature</a>), there is only one call to <code>init_pair</code>, using a pair number which appears to come from an uninitialized value, e.g., <code>7978</code> in this part of the listing:</p>\n\n<pre><code>called {init_pair(0x193e250,7978,5,7)\nreturn }0\n</code></pre>\n\n<p>and a quick scan of the sources shows that corresponds to this method:</p>\n\n<pre><code>/* PUBLIC METHODS */\nint ColorWindow::addColorPair(int foreground, int background) {\n        if(foreground &lt; 0 || foreground &gt; 7\n                || background &lt; 0 || background &gt; 7)\n                return -1; \n\n        init_pair(npairs, foreground, background);\n        npairs++;\n\n        return npairs-1;\n}\n</code></pre>\n\n<p>and <code>npairs</code> is never set to zero in the constructor.</p>\n\n<p>You might find <code>valgrind</code> useful for seeing this type of problem.</p>\n"}], "owner": {"reputation": 702, "user_id": 6381179, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b8d38cdec7c23e9256b459501570ffe4?s=128&d=identicon&r=PG&f=1", "display_name": "Shirkam", "link": "https://stackoverflow.com/users/6381179/shirkam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 380, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1614876149, "creation_date": 1464181642, "last_edit_date": 1614876149, "question_id": 37438153, "link": "https://stackoverflow.com/questions/37438153/color-pairs-in-ncurses-not-working-properly-in-classes", "title": "Color pairs in ncurses not working properly in classes", "body": "<p>I'm making a basic terminal-app engine with ncurses. I have made a basic window class, which stores the window you are working with, and allows you to write on it. Now, I'm doing a ColorWindow class, which inherits from BasicWindow, and should allow you to write with colors. Per abstraction, I'm initializing the color pairs I need in one of the methods of the class, here is the example code:</p>\n<p>EDIT: I'm writing here all code</p>\n<pre><code>#include &lt;ncurses.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;locale&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n\nclass ColorWindow : public BasicWindow {\nprivate:\n    int npairs;\n    bool canColor;\n    void initializePairs() {\n        init_pair(1, COLOR_RED, COLOR_BLACK);\n        init_pair(2, COLOR_GREEN, COLOR_BLACK);\n        init_pair(3, COLOR_YELLOW, COLOR_BLACK);\n        init_pair(4, COLOR_BLUE, COLOR_BLACK);\n        init_pair(5, COLOR_MAGENTA, COLOR_BLACK);\n        init_pair(6, COLOR_CYAN, COLOR_BLACK);\n        init_pair(7, COLOR_WHITE, COLOR_BLACK);\n\n        npairs = 8;\n     }\n\n   public:\n    ColorWindow() {\n        if(has_colors()) {\n           initializePairs();\n           this-&gt;canColor = true;\n        }\n        else {\n           this-&gt;canColor = false;\n        }\n    }\n\n    ColorWindow(int he, int wi, int stx, int sty) : BasicWindow(he, wi, stx, sty) {\n         if(has_colors()) {\n             initializePairs();\n             this-&gt;canColor = true;\n         }\n         else {\n             this-&gt;canColor = false;\n         }\n     }\n\n    int addColorPair(int foreground, int background) {\n         if(foreground &lt; 0 || foreground &gt; 7 \n              || background &lt; 0 || background &gt; 7)\n              return -1;\n\n         init_pair(npairs, foreground, background);\n         npairs++;\n\n         return npairs-1;\n    }\n\n    bool ColorWindow::writeStringWithColor(int x, int y,const char* message, int pair) {\n        if(!isInLimits(x, y))\n           return false;\n\n        if(pair &gt;= npairs) \n          return false;\n\n        if(canColor)\n          return false;\n\n        wattron(getContainer(), COLOR_PAIR(pair));\n        mvwprintw(getContainer(), x, y, message);\n        wattroff(getContainer(), COLOR_PAIR(7));\n     }\n\n    bool changeColor(int color, int r, int g, int b) {\n         if(!can_change_color())\n             return false;\n\n         if(color &lt; 0 || color &gt; 7 || r &lt; 0 || r &gt; 1000 \n             || g &lt; 0 || g &gt; 1000 || b &lt; 0 || b &gt; 1000)\n             return false;\n\n         init_color(color, r, g, b);\n\n         return true;\n    }\n\n};\n\nclass BasicWindow {\n   private:\n    WINDOW* container;\n    int startx, starty, height, width;\n\n   public:\n    BasicWindow() {\n      this-&gt;height = 20;\n      this-&gt;width = 84;\n      this-&gt;starty = (LINES - height) / 2;  /* Calculating for a center placement */\n      this-&gt;startx = (COLS - width) / 2;\n    }\n\n    BasicWindow(int he, int wi, int stx, int sty) {\n      this-&gt;height = he;\n      this-&gt;width = wi;\n      this-&gt;starty = sty;\n      this-&gt;startx = stx;\n    }\n    \n\n    WINDOW* createNewContainer() {\n          this-&gt;container = newwin(height, width, starty, startx);\n\n          wrefresh(this-&gt;container);        /* Show that box        */\n\n          return getContainer();\n    }\n\n    WINDOW* getContainer() {\n          return this-&gt;container;\n    }\n\n    bool writeString(int x, int y, const char* message) {\n        if(!isInLimits(x, y))\n            return false;\n\n            mvwprintw(this-&gt;container, x, y, message);\n        }\n\n\n    void refreshContainer() {\n        refresh();\n        wrefresh(this-&gt;container);      /* Show that box        */\n    }\n\n    void destroyWindow() {\n         wborder(this-&gt;container, ' ', ' ', ' ',' ',' ',' ',' ',' ');\n        \n         wrefresh(this-&gt;container);\n         delwin(this-&gt;container);\n   }\n\n    bool isInLimits(int x, int y) {\n         if(x &lt; 0 || x &gt;= this-&gt;width-1) {\n             return false;\n         }\n         if(y &lt; 0 || y &gt;= this-&gt;height-1) {\n              return false;\n         }\n         return true;\n};\n</code></pre>\n<p>And here is the main:</p>\n<pre><code> #include &lt;iostream&gt;\n #include &lt;unistd.h&gt;\n #include &lt;ncurses.h&gt;\n #include &quot;windows.h&quot;\n\n int main() {\n    ColorWindow cw = ColorWindow(20, 80, 0, 0);\n\n\n    initscr();          /* Start curses mode        */\n    cbreak();           /* Line buffering disabled, Pass on\n                        * everty thing to me        */\n    keypad(stdscr, TRUE);\n    start_color();\n\n    WINDOW* container;\n\n    container = cw.createNewContainer();\n    cw.writeStringWithColor(0, 10, &quot;Hello everyone in color!!&quot;, 2);\n    cw.refreshContainer();\n    sleep(2);\n    endwin();\n\n    return 0;\n}\n</code></pre>\n<p>It initializes the color mode, but shows nothing, as if the pair selected was the BLACK BLACK.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 88791, "user_id": 134204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwnA5.jpg?s=128&g=1", "display_name": "Panagiotis Kanavos", "link": "https://stackoverflow.com/users/134204/panagiotis-kanavos"}, "edited": false, "score": 0, "creation_date": 1464181883, "post_id": 37438127, "comment_id": 62379045, "body": "Duplicate of <a href=\"http://stackoverflow.com/questions/15794422/serial-port-rs-232-connection-in-c\">this</a>"}, {"owner": {"reputation": 1915, "user_id": 1025222, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FzmRn.jpg?s=128&g=1", "display_name": "Axel Isouard", "link": "https://stackoverflow.com/users/1025222/axel-isouard"}, "edited": false, "score": 0, "creation_date": 1464181912, "post_id": 37438127, "comment_id": 62379069, "body": "Do you have some code to show us ?"}], "owner": {"reputation": 1, "user_id": 6381310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7fcc7b6a1d4270e4c66327ef957ecd4?s=128&d=identicon&r=PG&f=1", "display_name": "hareeshso", "link": "https://stackoverflow.com/users/6381310/hareeshso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1464181589, "creation_date": 1464181589, "question_id": 37438127, "link": "https://stackoverflow.com/questions/37438127/communication-from-pc-to-fpga-with-rs232", "title": "communication from pc to fpga with RS232", "body": "<p>we are creating a Qt application for controlling a robotic arm that has 6 motors and need to communicate from the application in PC with an FPGA board. We need to transmit commands in the form of 8 bits to each stepper motor. First 6 bits are for the motor number and last 2 bits consists of Forward(1) and backward(0) commands.\nLater on, we will receive response from FPGA board regarding collision information in a form of 6 float values and immediately RS232 transmits this response back to server in order to display the position of collision part on robotic arm and if response is null nothing should be happened. Can anyone help me with the code in c++.</p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1464181541, "post_id": 37438049, "comment_id": 62378775, "body": "Do you mean efficient in the sense of low number of code lines or low running time?"}, {"owner": {"reputation": 2628, "user_id": 1248638, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e85f0521e95f34c082c45467b731dc5d?s=128&d=identicon&r=PG", "display_name": "Ortix92", "link": "https://stackoverflow.com/users/1248638/ortix92"}, "reply_to_user": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1464182368, "post_id": 37438049, "comment_id": 62379440, "body": "@KarstenKoop speed optimized so low running time"}, {"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1464182571, "post_id": 37438049, "comment_id": 62379602, "body": "For that it doesn&#39;t matter if you loop by hand or use something like <code>std::find_if</code> as mentioned below, you still loop over all elements. You would have to use something other than a vector. If you were not looking for substrings, but could compare the whole string, you could use an <code>unordered_map</code>, but with substrings it&#39;s difficult..."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1464184514, "post_id": 37438049, "comment_id": 62381130, "body": "Efficiency achieved mostly by proper algorithms and data structures. For vector of string the only way is iterating over all elements. If performance of this search is important you should think about different data structure, for example radix tree."}], "answers": [{"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 9, "creation_date": 1464181808, "post_id": 37438225, "comment_id": 62378992, "body": "<code>std:any_of</code> might make more sense here."}], "tags": [], "owner": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "is_accepted": true, "score": 7, "last_activity_date": 1464181972, "last_edit_date": 1464181972, "creation_date": 1464181773, "answer_id": 37438225, "question_id": 37438049, "link": "https://stackoverflow.com/questions/37438049/check-if-strings-in-stdvector-contain-substring-in-c/37438225#37438225", "title": "Check if strings in std::vector contain substring in C++", "body": "<p>You can use <code>std::find_if</code> with a lambda expression</p>\n\n<pre><code>if(std::find_if(vec.begin(), vec.end(), [](const std::string&amp; str) { return str.find(\"substring\") != std::string::npos; }) != vec.end()) {\n    ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6218, "user_id": 20392, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9167d52e6cf674d8af8f4280a5c9e059?s=128&d=identicon&r=PG", "display_name": "rep_movsd", "link": "https://stackoverflow.com/users/20392/rep-movsd"}, "is_accepted": false, "score": 1, "last_activity_date": 1478467281, "last_edit_date": 1478467281, "creation_date": 1464189109, "answer_id": 37441187, "question_id": 37438049, "link": "https://stackoverflow.com/questions/37438049/check-if-strings-in-stdvector-contain-substring-in-c/37441187#37441187", "title": "Check if strings in std::vector contain substring in C++", "body": "<p>What you need is std::search()</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/algorithm/search\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/algorithm/search</a></p>\n"}], "owner": {"reputation": 2628, "user_id": 1248638, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e85f0521e95f34c082c45467b731dc5d?s=128&d=identicon&r=PG", "display_name": "Ortix92", "link": "https://stackoverflow.com/users/1248638/ortix92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6062, "favorite_count": 1, "accepted_answer_id": 37438225, "answer_count": 2, "score": 5, "last_activity_date": 1478467281, "creation_date": 1464181420, "question_id": 37438049, "link": "https://stackoverflow.com/questions/37438049/check-if-strings-in-stdvector-contain-substring-in-c", "title": "Check if strings in std::vector contain substring in C++", "body": "<p>Is there an efficient way of executing a function if any string inside a vector contains a substring?</p>\n\n<p>Something along these lines</p>\n\n<pre><code>if(vector.contains(strstr(currentVectorElement,\"substring\"))) {\n    //do something\n}\n\nif(vector.contains(strstr(currentVectorElement,\"substring2\"))) {\n    //do something else\n}\n</code></pre>\n\n<p>The only thing I can think of is iterating over each string and check if the substring exists.</p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 30603, "user_id": 27491, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/48cc12ad73f816bc5b115a9ca6965328?s=128&d=identicon&r=PG", "display_name": "Chris Becke", "link": "https://stackoverflow.com/users/27491/chris-becke"}, "edited": false, "score": 1, "creation_date": 1464181528, "post_id": 37437919, "comment_id": 62378760, "body": "Robust SEH Exception handling?"}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 3, "creation_date": 1464181618, "post_id": 37437919, "comment_id": 62378841, "body": "Just the process of reading memory can change things (see for example Guard Pages), so what you&#39;re doing if fraught with danger. That said, if you can <a href=\"http://stackoverflow.com/questions/11010165/how-to-suspend-resume-a-process-in-windows\">suspend the process</a> then you&#39;re much more likely to succeed. However, CreateRemoteThread and the like will still scupper you."}, {"owner": {"reputation": 247, "user_id": 2877091, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2d6456725340d86dbe1c7080d5db7547?s=128&d=identicon&r=PG&f=1", "display_name": "awpsoleet", "link": "https://stackoverflow.com/users/2877091/awpsoleet"}, "edited": false, "score": 0, "creation_date": 1464181917, "post_id": 37437919, "comment_id": 62379078, "body": "Suspending the process is not possible, this is for a video game, I guess SEH exceptions will be the way to do sadly!"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 30603, "user_id": 27491, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/48cc12ad73f816bc5b115a9ca6965328?s=128&d=identicon&r=PG", "display_name": "Chris Becke", "link": "https://stackoverflow.com/users/27491/chris-becke"}, "edited": false, "score": 1, "creation_date": 1464181952, "post_id": 37437919, "comment_id": 62379101, "body": "@ChrisBecke: How is SEH of any value here? If you want to make sure that a process&#39; state is valid for a period of time, you&#39;ll have to stop time for that process. Usually by suspending all of its threads."}, {"owner": {"reputation": 30603, "user_id": 27491, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/48cc12ad73f816bc5b115a9ca6965328?s=128&d=identicon&r=PG", "display_name": "Chris Becke", "link": "https://stackoverflow.com/users/27491/chris-becke"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1464182250, "post_id": 37437919, "comment_id": 62379357, "body": "@IInspectable, I had assumed that stopping the process for any amount of time was undesirable, and scanning an entire process for strings is not going to take an insignificant amount of time. I just didn&#39;t consider stopping the process an option worth mentioning."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 30603, "user_id": 27491, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/48cc12ad73f816bc5b115a9ca6965328?s=128&d=identicon&r=PG", "display_name": "Chris Becke", "link": "https://stackoverflow.com/users/27491/chris-becke"}, "edited": false, "score": 0, "creation_date": 1464183829, "post_id": 37437919, "comment_id": 62380560, "body": "@ChrisBecke: The question is clear: <i>&quot;[H]ow [...] to make sure the memory I am reading is valid and will remain valid until I am done reading the whole page&quot;</i>. Suspending the process is the only viable option to meet that requirement, however undesirable that may be, for this particular user."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1464192751, "post_id": 37437919, "comment_id": 62387539, "body": "So...you want to dig in the internals of another process&#39;s memory <i>safely</i>? Surely you realize that is an oxymoron. If you don&#39;t stop the world (read: freeze the other process), the world will continue on without you. You will be left behind. What are you trying to <i>do</i> with this information anyway, once you&#39;ve scanned through it? Are you hoping to modify the strings? If you just want a dump, suspend the process and make a dump."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1464195160, "post_id": 37437919, "comment_id": 62388954, "body": "<i>&quot;If you just want a dump, suspend the process and make a dump.&quot;</i> - Incidentally, that&#39;s precisely what <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms680360.aspx\" rel=\"nofollow noreferrer\">MiniDumpWriteDump</a> does."}], "answers": [{"tags": [], "owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "is_accepted": false, "score": 5, "last_activity_date": 1464182274, "last_edit_date": 1464182274, "creation_date": 1464181965, "answer_id": 37438291, "question_id": 37437919, "link": "https://stackoverflow.com/questions/37437919/virtualquery-and-thread-safety/37438291#37438291", "title": "VirtualQuery and thread safety", "body": "<p>The best way (and only way I can think of which is supported) is to basically be a debugger. In this way, you can suspend/resume the process and whilst its suspended read its memory just like any debugger can do. This assumes that suspending the process is an acceptable solution for you (and the process being paused doesn't have anti-debug like functionality, although that is rare).</p>\n\n<p>See for a starting point <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms679295(v=vs.85).aspx\" rel=\"noreferrer\">DebugActiveProcess</a></p>\n\n<p>You still need to handle reading memory can change it [by, for example, removing PAGE_GUARD before reading a page and restoring it after], but its now a much more constrained problem.</p>\n"}], "owner": {"reputation": 247, "user_id": 2877091, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2d6456725340d86dbe1c7080d5db7547?s=128&d=identicon&r=PG&f=1", "display_name": "awpsoleet", "link": "https://stackoverflow.com/users/2877091/awpsoleet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464182274, "creation_date": 1464181106, "question_id": 37437919, "link": "https://stackoverflow.com/questions/37437919/virtualquery-and-thread-safety", "title": "VirtualQuery and thread safety", "body": "<p>I am using VirtualQuery to access all of the readable memory of a running process, I then scan this memory to find specific strings, I am concerned though that this might eventually lead to a situation where the memory I am trying to access is released somewhere else, how should I proceed to make sure the memory I am reading is valid and will remain valid until I am done reading the whole page ?</p>\n\n<p>Thanks!</p>\n"}]