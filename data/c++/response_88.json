[{"tags": ["c++", "c", "arrays", "casting"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1473896409, "post_id": 39501172, "comment_id": 66319758, "body": "It seems the data is displayed as character since it is in character type variable. Use another debugger or seek for setting to disable them if you hate it."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 4, "creation_date": 1473896476, "post_id": 39501172, "comment_id": 66319776, "body": "You are misunderstanding the debugging output. It is just telling you that <code>94</code> is the character <code>&#39;^&#39;</code> and same for the other character. It&#39;s trying to be helpful by giving you extra information. Just ignore it if it is not helpful for you."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1473896478, "post_id": 39501172, "comment_id": 66319779, "body": "Try using the <code>uint8_t</code> type.  When playing with bits, <code>unsigned</code> types are always preferred."}, {"owner": {"reputation": 2133, "user_id": 5447208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f8eb976d91e3b7bb21366a68d1a70f?s=128&d=identicon&r=PG&f=1", "display_name": "Cody", "link": "https://stackoverflow.com/users/5447208/cody"}, "edited": false, "score": 0, "creation_date": 1473896868, "post_id": 39501172, "comment_id": 66319870, "body": "doesn&#39;t the order of your bit shifts and bitwise ands reverse the bytes of the int?  Unless you are intending to read it from index 3 to 0 order."}, {"owner": {"reputation": 449, "user_id": 4573825, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0c7e9afa42cb0df4d705d431f31f3ecf?s=128&d=identicon&r=PG&f=1", "display_name": "DBB", "link": "https://stackoverflow.com/users/4573825/dbb"}, "edited": false, "score": 0, "creation_date": 1473897044, "post_id": 39501172, "comment_id": 66319909, "body": "I see thanks a lot guys."}, {"owner": {"reputation": 449, "user_id": 4573825, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0c7e9afa42cb0df4d705d431f31f3ecf?s=128&d=identicon&r=PG&f=1", "display_name": "DBB", "link": "https://stackoverflow.com/users/4573825/dbb"}, "reply_to_user": {"reputation": 2133, "user_id": 5447208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f8eb976d91e3b7bb21366a68d1a70f?s=128&d=identicon&r=PG&f=1", "display_name": "Cody", "link": "https://stackoverflow.com/users/5447208/cody"}, "edited": false, "score": 0, "creation_date": 1473897251, "post_id": 39501172, "comment_id": 66319959, "body": "@Cody Yep I intend to read 3 to 0"}], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 6824393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9932eb74494716d7aafe8bb2651032df?s=128&d=identicon&r=PG&f=1", "display_name": "azavalla", "link": "https://stackoverflow.com/users/6824393/azavalla"}, "is_accepted": true, "score": 4, "last_activity_date": 1473896633, "creation_date": 1473896633, "answer_id": 39501220, "question_id": 39501172, "link": "https://stackoverflow.com/questions/39501172/c-int-to-char-converstion-adds-garabge-characters/39501220#39501220", "title": "C int to char converstion adds garabge characters", "body": "<p>Those are not garbage characters. Those are the ascii representation of the decimal number. The debugger is just showing you the ascii representation. Look for 94 and 121 on this table:</p>\n\n<p><a href=\"http://www.asciitable.com/\" rel=\"nofollow\">http://www.asciitable.com/</a></p>\n"}], "owner": {"reputation": 449, "user_id": 4573825, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0c7e9afa42cb0df4d705d431f31f3ecf?s=128&d=identicon&r=PG&f=1", "display_name": "DBB", "link": "https://stackoverflow.com/users/4573825/dbb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "closed_date": 1473906254, "accepted_answer_id": 39501220, "answer_count": 1, "score": -4, "last_activity_date": 1473896633, "creation_date": 1473896243, "last_edit_date": 1473896516, "question_id": 39501172, "link": "https://stackoverflow.com/questions/39501172/c-int-to-char-converstion-adds-garabge-characters", "closed_reason": "Needs details or clarity", "title": "C int to char converstion adds garabge characters", "body": "<p>I am trying to convert an int into 4 bytes. for some reason it ends up adding some garbage special character at the end </p>\n\n<pre><code>int _tmain(int argc, _TCHAR* argv[])\n{\n    int num = 31070;\n\n    char arr[4];\n\n    arr[0] = num &amp; 0xFF;\n    arr[1] = (num &gt;&gt; 8) &amp; 0xFF;\n    arr[2] = (num &gt;&gt; 16) &amp; 0xFF;\n    arr[3] = (num &gt;&gt; 24) &amp; 0xFF;\n\n    return 0;\n }\n</code></pre>\n\n<p>Here is an output of the debug window wherein you can see that it adds <code>^</code> and <code>y</code> for <code>arr[0]</code> and <code>arr[1]</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/tOhC1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tOhC1.png\" alt=\"Debugger output window\"></a></p>\n\n<p>I have tried things like casting but still have these garbage characters getting added.</p>\n"}, {"tags": ["c++", "file", "input", "fileinputstream", "stringstream"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1473896120, "post_id": 39501128, "comment_id": 66319675, "body": "Unless the questions are related, one question per stackoverflow question, please. Additionally, &quot;The first line is the number of testcases and each line has inputs for that usecase&quot; makes no sense. The shown sample data has &quot;10&quot; on the first line. How that relates to all the data that follows, is unclear. The second line has six values, and four lines over follow the first line."}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1473896158, "post_id": 39501128, "comment_id": 66319683, "body": "do you want to read numbers as: 1 is a number and 2 is another or all in one single line? 1 2 3 4 5 6 = 123456?"}, {"owner": {"reputation": 565, "user_id": 2272156, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5d551835c9838f5ea6a7c88a22225ec4?s=128&d=identicon&r=PG", "display_name": "Piyush", "link": "https://stackoverflow.com/users/2272156/piyush"}, "reply_to_user": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1473896237, "post_id": 39501128, "comment_id": 66319711, "body": "@Raindrop7: Read each number and push it to a vector."}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1473896330, "post_id": 39501128, "comment_id": 66319735, "body": "just read any line as string then remove spaces then convert into integer then push to a vector/array"}, {"owner": {"reputation": 565, "user_id": 2272156, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5d551835c9838f5ea6a7c88a22225ec4?s=128&d=identicon&r=PG", "display_name": "Piyush", "link": "https://stackoverflow.com/users/2272156/piyush"}, "edited": false, "score": 0, "creation_date": 1473896375, "post_id": 39501128, "comment_id": 66319748, "body": "@RawN What is unclear about the question? There are some values in the file and I want to process them. I know how to process them but I am not sure about the most efficient way of reading them. I have 10k+ lines in the file and it doesn&#39;t make sense to enter them individually on std input"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1473900171, "post_id": 39501128, "comment_id": 66320634, "body": "There&#39;s no such thing as &quot;the most efficient way of reading them&quot; that&#39;s true for every application in the world. What&#39;s efficient for one application, that uses the read data for one particular purpose is not going to be very efficient for another application that does something else with them. It is your responsibility to analyze your application&#39;s requirements, and what it needs to do with the read data, then pick the best way to read it."}], "owner": {"reputation": 565, "user_id": 2272156, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5d551835c9838f5ea6a7c88a22225ec4?s=128&d=identicon&r=PG", "display_name": "Piyush", "link": "https://stackoverflow.com/users/2272156/piyush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1473896585, "creation_date": 1473895894, "last_edit_date": 1495540304, "question_id": 39501128, "link": "https://stackoverflow.com/questions/39501128/reading-numbers-and-strings-from-a-file-in-c", "title": "Reading numbers and strings from a file in C++", "body": "<p>I know this question has been asked a lot, and I have gone through the most <a href=\"https://stackoverflow.com/questions/2287121/how-to-read-groups-of-integers-from-a-file-line-by-line-in-c\">popular answer</a> on stackoverflow.</p>\n\n<p>I have a bunch of numbers in the following format:</p>\n\n<pre><code>4 // number of testcases\n1 2 3 4 5 6 // Each line contains numbers for that particular testcase\n1 4 5 6 7 8 9 19\n12 3 5 \n1 4 9\n</code></pre>\n\n<p>The first line is the number of testcases. Each line following that contains numbers for that particular testcase.</p>\n\n<p>I want to read line by line, process the numbers, output the solution and only then move to read to the second line.</p>\n\n<p>In another stackoverflow question, the suggested solution is leading to a lot of duplication of data in the vector all_integers.</p>\n\n<pre><code>std::string line;\nstd::vector&lt; std::vector&lt;int&gt; &gt; all_integers;\nwhile ( getline( std::cin, line ) ) {\n    std::istringstream is( line );\n    all_integers.push_back(\n         std::vector&lt;int&gt;( std::istream_iterator&lt;int&gt;(is),\n                           std::istream_iterator&lt;int&gt;() ) );\n\n    for(auto it = all_integers.begin();it!=all_integers.end();it++) {\n        for(auto j = it-&gt;begin();j!=it-&gt;end();j++) {\n            cout &lt;&lt; *j &lt;&lt; \" \" ;\n        }\n        cout &lt;&lt; endl;\n    }\n</code></pre>\n\n<p>What is the correct way of reading this from a file?</p>\n\n<p><strong>Follow up question:</strong></p>\n\n<p>In another file, I have input in the following format:</p>\n\n<pre><code>5 2\nabc\nbcd \neee\nzyc\nabv\n\nabc bcd\nzyc anv\n</code></pre>\n\n<p>The first line contains two numbers: m,n.</p>\n\n<p>m : Number of words in the dictionary\nn: Number of queries.</p>\n\n<p>Then m number of words follow and last n lines read the number of queries that are to be made to it.</p>\n\n<p>How can I read this efficiently? Is there any way to read the last K lines of a file efficiently in C++?</p>\n"}, {"tags": ["c++", "arrays", "class", "templates"], "answers": [{"tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": 2, "last_activity_date": 1473895884, "creation_date": 1473895884, "answer_id": 39501125, "question_id": 39501095, "link": "https://stackoverflow.com/questions/39501095/print-value-in-array-using-template-class-c/39501125#39501125", "title": "Print value in array using template class-c++", "body": "<p>The code creates the template's class member <code>_array</code> using <code>new</code>, but does not initialize it to anything, and that's why you get random garbage printed out.</p>\n\n<p>The constructor does receive a parameter <code>array</code>, and an initialized array is passed using that parameter. However, that parameter is completely ignored by the constructor, and nothing is done with it.</p>\n\n<p>Your intent here, obviously, is to copy the contents of the array the template constructor receives, as an argument, into <code>_array</code>. But that code is missing.</p>\n\n<p>The contents of the <code>array</code> parameter will not get copied into <code>_array</code> all by themselves. You have to write the code to do that.</p>\n"}, {"tags": [], "owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "is_accepted": false, "score": 2, "last_activity_date": 1473896134, "last_edit_date": 1495540304, "creation_date": 1473896134, "answer_id": 39501155, "question_id": 39501095, "link": "https://stackoverflow.com/questions/39501095/print-value-in-array-using-template-class-c/39501155#39501155", "title": "Print value in array using template class-c++", "body": "<p>Your constructor:</p>\n\n<pre><code>Array(T array[], int arraysize){\n     size=arraysize;\n     _array=new T[size];\n}\n</code></pre>\n\n<p>All you did was to assign the Array's size and allocate memory without actually copying the contents. So all you see some random value for POD types, and default-constructed values for class types.</p>\n\n<p>You should do the copying with <a href=\"http://en.cppreference.com/w/cpp/algorithm/copy\" rel=\"nofollow noreferrer\"><code>std::copy</code></a></p>\n\n<pre><code>Array(T array[], int arraysize) \n     : _array(new T[arraysize]), size(arraysize)\n{\n    std::copy(array, array+arraysize, _array);\n}\n</code></pre>\n\n<p>As you can see, I used <a href=\"http://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow noreferrer\"><em>member initailizer list</em></a>; Please remember the <a href=\"https://stackoverflow.com/questions/4782757/rule-of-three-becomes-rule-of-five-with-c11\"><strong>Rule of 5</strong></a>. Also, I advise you to use a <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow noreferrer\"><code>std::unique_ptr</code></a> instead.</p>\n"}], "owner": {"reputation": 27, "user_id": 5321826, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c01cadd2a873e0501f84a769a0677e4d?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny Choi", "link": "https://stackoverflow.com/users/5321826/jenny-choi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1542, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1473896134, "creation_date": 1473895648, "question_id": 39501095, "link": "https://stackoverflow.com/questions/39501095/print-value-in-array-using-template-class-c", "title": "Print value in array using template class-c++", "body": "<p>Hi I'' trying to make a template for a class to print out values in an array. </p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\ntemplate &lt;typename T&gt;\nclass Array{\n   public:\n      Array(T array[], int arraysize){\n         size=arraysize;\n         _array=new T[size];\n      }\n\n      ~Array(){\n         delete[] _array;\n      }\n      void print(){\n         for(int i=0; i&lt;size; i++){\n            cout&lt;&lt;_array[i]&lt;&lt;' ';\n         }\n      }\n      private:\n         T *_array;\n         int size;\n};\n\nint main(){\n   int array1[5]={1,2,3,4,5};\n   Array&lt;int&gt; a(array1,5);\n   a.print();\n\n   float array2[5]={1.012, 2.324, 3.141, 4.221, 5.327};\n   Array&lt;float&gt; b(array2,5);\n   b.print();\n\n   string array3[]={\"Ch1\",\"Ch2\",\"Ch3\",\"Ch4\",\"Ch5\"};\n   Array&lt;string&gt; c(array3,5);\n   c.print();\n\n   return 0;\n\n}\n</code></pre>\n\n<p>This is the code and I was wondering what's wrong because it would print out random numbers. </p>\n"}, {"tags": ["c++", "qt", "gcc", "linker", "shared-libraries"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 5, "creation_date": 1473895703, "post_id": 39501080, "comment_id": 66319584, "body": "You are missing some fundamental concepts. Once the code is compiled, the compiler is completely out of the picture. It&#39;s not the compiler that &quot;load(s) the shared library&quot;, of a program at runtime. Furthermore, a library is either linked or not linked to an executable. If it&#39;s linked, it gets loaded at runtime. If not, it does not, and it can be loaded with dlopen(). The End. The concept of &quot;not loading the library until dlopen&quot; makes no sense. That&#39;s what dlopen() does, exactly: it loads a library that has not been directly linked to the executable."}, {"owner": {"reputation": 253, "user_id": 5997125, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/26c542993d7d3d06f8175cca60e8f8de?s=128&d=identicon&r=PG&f=1", "display_name": "TechEnthusiast", "link": "https://stackoverflow.com/users/5997125/techenthusiast"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1473898018, "post_id": 39501080, "comment_id": 66320144, "body": "could you point me documentation where I can see the exact difference loading shared library at runtime using dlopen or linking the shared library"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1473898820, "post_id": 39501080, "comment_id": 66320345, "body": "<a href=\"http://stackoverflow.com/questions/1993390/static-linking-vs-dynamic-linking\">Here</a>&#39;s something that might help."}, {"owner": {"reputation": 1577, "user_id": 6776535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c515e458c92c554943b271a6789f0372?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Pr&#233;vost", "link": "https://stackoverflow.com/users/6776535/robert-pr%c3%a9vost"}, "edited": false, "score": 0, "creation_date": 1473898967, "post_id": 39501080, "comment_id": 66320376, "body": "I found the explanation <a href=\"https://en.wikipedia.org/wiki/Dynamic_loading\" rel=\"nofollow noreferrer\">here</a> quite helpful."}], "answers": [{"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1473946236, "last_edit_date": 1495535398, "creation_date": 1473946236, "answer_id": 39512366, "question_id": 39501080, "link": "https://stackoverflow.com/questions/39501080/is-there-any-linker-flag-that-tells-to-defer-the-loading-of-dynamic-library-afte/39512366#39512366", "title": "Is there any linker flag that tells to defer the loading of dynamic library after dlopen", "body": "<blockquote>\n  <p>Is there any flag for linker g++ that tells compiler to load the shared library only after _dlopen _?</p>\n</blockquote>\n\n<p>Yes. On Windows. It's known as delay loading. It doesn't exist on Linux/OS X. It's possible to implement it, but it'd require modifications to binutils and <code>ld.so</code>. See <a href=\"https://cseweb.ucsd.edu/~gbournou/CSE131/the_inside_story_on_shared_libraries_and_dynamic_loading.pdf\" rel=\"nofollow noreferrer\">this article</a> for some background on that.</p>\n\n<p><em>But you don't need to care about <strong>any</strong> of it. Really.</em></p>\n\n<p>You are facing a well known problem. So well known that it even has a name: <a href=\"https://stackoverflow.com/q/1005685/1329652\">The Static Initialization Order Fiasco</a>.</p>\n\n<p>The solution to all your woes is trivial: don't use static global variables the way you do.</p>\n\n<p>To fix it, use <code>Q_GLOBAL_STATIC</code>, or reimplement something like it yourself. That way the value will be constructed at the time it's first used, not prematurely. That's all there's to it.</p>\n\n<p>Side note: Your recent questions suffer badly by being an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY Problem</a>. You're trying to come up with all sorts of Rube Goldberg-esque solutions to a rather simple issue that it took you a week+ to finally divulge. Ask not about a potential solution, but about the underlying issue is you're attempting to solve. All the library loading stuff is <em>completely and utterly unrelated</em> to your problem, and you don't need to concern yourself with it at all.</p>\n"}], "owner": {"reputation": 253, "user_id": 5997125, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/26c542993d7d3d06f8175cca60e8f8de?s=128&d=identicon&r=PG&f=1", "display_name": "TechEnthusiast", "link": "https://stackoverflow.com/users/5997125/techenthusiast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 485, "favorite_count": 0, "closed_date": 1473946273, "answer_count": 1, "score": -1, "last_activity_date": 1473946236, "creation_date": 1473895475, "last_edit_date": 1473897013, "question_id": 39501080, "link": "https://stackoverflow.com/questions/39501080/is-there-any-linker-flag-that-tells-to-defer-the-loading-of-dynamic-library-afte", "closed_reason": "Duplicate", "title": "Is there any linker flag that tells to defer the loading of dynamic library after dlopen", "body": "<p>I have following code</p>\n\n<ol>\n<li><p>File <em>hello.cc</em></p>\n\n<pre><code>static A dummyl;\n\nA:: A() {\n    fun();\n}\n\nvoid A::fun() {\n    int y = 10;\n    int z = 20; \n    int x = y + z;\n}   \n</code></pre></li>\n<li><p>File <em>hello.h</em></p>\n\n<pre><code>class A {\n  public:\n    A a;\n    void fun();\n};\n</code></pre></li>\n<li><p>File <em>main.cc</em></p>\n\n<pre><code>#include &lt;dlfcn.h&gt;\n#include \"hello.h\"\n\ntypedef void (*pf)();\nint main() {\n    void *lib;\n    pf greet;\n    const char * err;\n    printf(\"\\n Before dlopen\\n\");\n    lib = dlopen(\"libhello.so\", RTLD_NOW | RTLD_GLOBAL);\n    if (!lib) {\n        exit(1);\n    }\n    A *a = new A ;\n    a-&gt;fun();\n    dlerror(); /*first clear any previous error; redundant in this case but a useful habit*/\n    dlclose(lib); \n    return 0;\n}\n</code></pre></li>\n</ol>\n\n<p>Build phases:</p>\n\n<ol>\n<li>g++ -fPIC -c hello.cc</li>\n<li>g++ -shared -o libhello.so hello.o</li>\n<li>g++ -o myprog main.cc -ldl -L. -lhello</li>\n</ol>\n\n<p>Since my shared library in real case is <em>libQtCore.so</em> , I need to link it as using <code>-lQtCore</code> in linker because I cannot use the symbols directly and since there are many of functions then <em>libQtCore</em>, it will not practically advisable to use <em>dlysym</em> for each function of <em>libQtCore.so</em></p>\n\n<p>Since I link, my static global variables gets initialized before <em>dlopen</em>. Is there any flag for linker <em>g++</em> that tells compiler to load the shared library only after _dlopen _?</p>\n"}, {"tags": ["c#", "c++", "dll", "unmanaged"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1473895586, "post_id": 39501075, "comment_id": 66319555, "body": "C++ long == C# int.  You get null in the C++ code because it is reading the upper 32-bits of the long variable.  Just fix the declaration."}, {"owner": {"reputation": 13, "user_id": 6833043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdd1c0cab3f4c516ffddb8e0a879795a?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Hufnagel", "link": "https://stackoverflow.com/users/6833043/mike-hufnagel"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1473946397, "post_id": 39501075, "comment_id": 66340711, "body": "Yup, that fixed it.  Thanks Hans!"}], "owner": {"reputation": 13, "user_id": 6833043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdd1c0cab3f4c516ffddb8e0a879795a?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Hufnagel", "link": "https://stackoverflow.com/users/6833043/mike-hufnagel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1473895429, "creation_date": 1473895429, "question_id": 39501075, "link": "https://stackoverflow.com/questions/39501075/last-parameter-in-call-to-unmanaged-dll-always-null", "title": "Last parameter in call to unmanaged dll always null", "body": "<p>I am calling an unmanaged dll from c#.  If I pass the output char array as the last parameter, it is null in the c++ code.  However, if I pass it as the first parameter it is good as are all the other parameters (I haven't tried putting it as the second or third parameter).</p>\n\n<p>This is the signature that fails:</p>\n\n<pre><code>void __declspec(dllexport) processBuffer(const char *token, const char *inBuffer, const long inBufferSize, char *outBuffer);\n</code></pre>\n\n<p>The c# code is -\nWrapper class:</p>\n\n<pre><code>[DllImport(@\"&lt;path to dll&gt;\\&lt;dllname&gt;.dll\", CallingConvention = CallingConvention.Cdecl)]\nstatic class NativeCalls\n{\n    public static extern void processBuffer(string token, char[] inBuffer, long inBufferSize, [In, Out] char[] outBuffer);\n}\n</code></pre>\n\n<p>Call to unmanaged dll:</p>\n\n<pre><code>// token, inBuffer and inBuffer size defined above\nchar[] outBuffer = new char[outBufferSize];\nNativeCalls.processBuffer(token, inBuffer, inBufferSize, outBuffer);\n</code></pre>\n\n<p>With this call, outBuffer comes in to the c++ code as 0x00000000 (null). The rest of the parameters are correct.</p>\n\n<p>If I change the code so outBuffer is the first parameter (in all necessary locations), it arrives in the c++ not null, can be written to without error, and shows valid data when inspected after the call return.  </p>\n\n<p>Clearly, something is wrong... I just don't know what.  Any and all help greatly appreciated!</p>\n"}, {"tags": ["c++", "inheritance"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1473894224, "post_id": 39500860, "comment_id": 66319183, "body": "Save yourself some hassles and don&#39;t use nested classes."}, {"owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1473894349, "post_id": 39500860, "comment_id": 66319209, "body": "@ThomasMatthews I suppose The Professor wouldn&#39;t be pleased."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1473894472, "post_id": 39500860, "comment_id": 66319242, "body": "In that case, the OP should ask the Professor, not StackOverflow. :-)"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1473894536, "post_id": 39500860, "comment_id": 66319260, "body": "This is very unclear. You don&#39;t have any user-defined destructors, so why do you want to define any of the other operations? Which invariants are non-trivial here?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1473894892, "post_id": 39500860, "comment_id": 66319375, "body": "&quot;programmer may decide to write class C that extends A and C::D that extends A::B&quot;  - not with this design they can&#39;t"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1473895058, "post_id": 39500860, "comment_id": 66319418, "body": "Well, it&#39;s possible to have class C extending class A here. But <code>C::D</code> will not be able to extend <code>A::B</code>, for the obvious reasons."}, {"owner": {"reputation": 3022, "user_id": 2027839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f0cdfc83802dff15a73a5c273c1b4154?s=128&d=identicon&r=PG", "display_name": "Mike Warren", "link": "https://stackoverflow.com/users/2027839/mike-warren"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1473896310, "post_id": 39500860, "comment_id": 66319728, "body": "@ThomasMatthews I have to use nested classes here, as I am trying to implement the integer group and integer ring mathematical structures, and wish to use actual + and * on their elements, which the structures have. (Group is equipped with * and ring is group under addition)"}, {"owner": {"reputation": 3022, "user_id": 2027839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f0cdfc83802dff15a73a5c273c1b4154?s=128&d=identicon&r=PG", "display_name": "Mike Warren", "link": "https://stackoverflow.com/users/2027839/mike-warren"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1473896384, "post_id": 39500860, "comment_id": 66319752, "body": "@Kerrek, I am trying to add destructors, so as to adhere to the rule of three."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1473896444, "post_id": 39500860, "comment_id": 66319767, "body": "@MikeWarren: You got everything the wrong way round. The Ro3 says that <i>if</i> you have a destructor, then you also need the other special members. It does <i>niot</i> say that you need to have a destructor."}, {"owner": {"reputation": 3022, "user_id": 2027839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f0cdfc83802dff15a73a5c273c1b4154?s=128&d=identicon&r=PG", "display_name": "Mike Warren", "link": "https://stackoverflow.com/users/2027839/mike-warren"}, "edited": false, "score": 0, "creation_date": 1473896482, "post_id": 39500860, "comment_id": 66319780, "body": "But I need copy constructors, and need to know how to properly implement all this"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1473896715, "post_id": 39500860, "comment_id": 66319833, "body": "OK, you may need copy and move operations for <code>A</code>, that&#39;s true, but probably no destructor, since your invariants don&#39;t contain resources -- the invariant is only that elements of the vector point to the current instance. The Ro3 isn&#39;t absolute; it says that you <i>may</i> need all three if you have any one of the special members -- but it&#39;s mandatory only when the reason that you have special members is that you&#39;re managing resources."}, {"owner": {"reputation": 3022, "user_id": 2027839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f0cdfc83802dff15a73a5c273c1b4154?s=128&d=identicon&r=PG", "display_name": "Mike Warren", "link": "https://stackoverflow.com/users/2027839/mike-warren"}, "edited": false, "score": 0, "creation_date": 1473896767, "post_id": 39500860, "comment_id": 66319846, "body": "I forgot to mention that I&#39;m not in C++11."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1473896936, "post_id": 39500860, "comment_id": 66319885, "body": "I&#39;m not sure there&#39;s an airtight design for <code>B</code>: you clearly need to be able to copy and assign it (given that the vector needs to reallocate), but at the same time you don&#39;t want to overwrite <code>B</code> elements with values that contain the wrong <code>A</code> pointer.  This will require cooperation from <code>A</code>, i.e. access to the vector should be kept private, and elements should be checked at that point."}, {"owner": {"reputation": 3022, "user_id": 2027839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f0cdfc83802dff15a73a5c273c1b4154?s=128&d=identicon&r=PG", "display_name": "Mike Warren", "link": "https://stackoverflow.com/users/2027839/mike-warren"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1473898715, "post_id": 39500860, "comment_id": 66320323, "body": "@SamVarshavchik Is there a way that it can happen, given the parameters I laid down in the comments?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1473899820, "post_id": 39500860, "comment_id": 66320582, "body": "No there isn&#39;t. You cannot avoid the basic, fundamental fact that the vector will contain <code>A::B</code> objects. You can create a subclass of <code>A::B</code> as much as you wanted, but no suclass of <code>A</code> can change what the vector contains, and no subclass of <code>B</code> can avoid being sliced away when it&#39;s shoved into the vector. C++ does not work this way."}], "answers": [{"comments": [{"owner": {"reputation": 3022, "user_id": 2027839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f0cdfc83802dff15a73a5c273c1b4154?s=128&d=identicon&r=PG", "display_name": "Mike Warren", "link": "https://stackoverflow.com/users/2027839/mike-warren"}, "edited": false, "score": 0, "creation_date": 1473896043, "post_id": 39500974, "comment_id": 66319663, "body": "The problem is that I am trying to implement <code>IntegerGroup</code>, <code>IntegerRing</code>, which are C++ implementations of the integer group and integer ring structures in mathematics."}, {"owner": {"reputation": 3022, "user_id": 2027839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f0cdfc83802dff15a73a5c273c1b4154?s=128&d=identicon&r=PG", "display_name": "Mike Warren", "link": "https://stackoverflow.com/users/2027839/mike-warren"}, "edited": false, "score": 0, "creation_date": 1473904609, "post_id": 39500974, "comment_id": 66321496, "body": "Also, what if only the pointer was copied, and no <code>new</code> was used?"}, {"owner": {"reputation": 3980, "user_id": 78384, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/eea53d740e545170568396e388cd9b42?s=128&d=identicon&r=PG", "display_name": "Dan O", "link": "https://stackoverflow.com/users/78384/dan-o"}, "reply_to_user": {"reputation": 3022, "user_id": 2027839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f0cdfc83802dff15a73a5c273c1b4154?s=128&d=identicon&r=PG", "display_name": "Mike Warren", "link": "https://stackoverflow.com/users/2027839/mike-warren"}, "edited": false, "score": 0, "creation_date": 1473960253, "post_id": 39500974, "comment_id": 66349598, "body": "That suggests an informal weak relationship, which is a common, if unsafe, C++ pattern."}], "tags": [], "owner": {"reputation": 3980, "user_id": 78384, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/eea53d740e545170568396e388cd9b42?s=128&d=identicon&r=PG", "display_name": "Dan O", "link": "https://stackoverflow.com/users/78384/dan-o"}, "is_accepted": false, "score": 0, "last_activity_date": 1473894633, "creation_date": 1473894633, "answer_id": 39500974, "question_id": 39500860, "link": "https://stackoverflow.com/questions/39500860/rule-of-three-for-inner-class-outer-class/39500974#39500974", "title": "Rule of three for inner class, outer class", "body": "<blockquote>\n  <p>How should I define copy constructors, overloaded assignment operators, and destructors such that I avoid infinite recursion on deletion, and that I avoid, if possible, having to use new</p>\n</blockquote>\n\n<p>Ownership of <code>A::elements</code> is determined by your declaration. <code>~A</code> is going to destroy any <code>B</code>'s in the owned elements member. This means that <code>A::B::a</code> likely has to be treated as an unowned pointer and not deleted when <code>~B</code> is run. If, under some circumstances, <code>A::B::a</code> is owned by an instance of <code>B</code>, then <code>B</code> likely needs to add a member to track this ownership and free a only under these circumstances. Alternatively <code>A::B::a</code> could be declared as <code>std::shared_ptr&lt;A&gt;</code> (or similar). However, remember that <code>std::shared_ptr</code> can still potentially leak if ownership is circular.</p>\n\n<p>This ambiguity and complexity would be avoided if it's possible to determine 'what owns what' and come up with a relationship that is less opaque than 'everything owns everything else'.</p>\n"}], "owner": {"reputation": 3022, "user_id": 2027839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f0cdfc83802dff15a73a5c273c1b4154?s=128&d=identicon&r=PG", "display_name": "Mike Warren", "link": "https://stackoverflow.com/users/2027839/mike-warren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1473894633, "creation_date": 1473893890, "question_id": 39500860, "link": "https://stackoverflow.com/questions/39500860/rule-of-three-for-inner-class-outer-class", "title": "Rule of three for inner class, outer class", "body": "<p>Suppose I have class that is defined like</p>\n\n<p><em>A.h</em></p>\n\n<pre><code>#ifndef A_H\n#define A_H\n\n#include &lt;vector&gt;\n\nclass A\n{\n    int n;\n    std::vector&lt;A::B&gt; elements;\n    public:\n        A();\n        A(int);\n        class B\n        {\n            int m;\n            A* a;\n            public:\n                B();\n                B(int);\n                B(int, A*);\n        };\n\n};\n\n#endif\n</code></pre>\n\n<p><em>A.cpp</em></p>\n\n<pre><code>#include \"A.h\"\n\nA::A()\n : n(0)\n{\n\n}\n\nA::A(int x)\n : n(x), elements(std::vector&lt;A::B&gt;(n))\n{\n    for (int j = 0; j &lt; this-&gt;n; j++)\n    {\n        B newElement(j, this);\n        this-&gt;elements[j] = newElement;\n    }\n}\n\nA::B::B()\n : m(0), a(0)\n{\n\n}\n\nA::B::B(int j)\n : m(j), a(0)\n{\n\n}\n\nA::B::B(int j, A* aPtr)\n : m(j), a(aPtr)\n{\n\n}\n</code></pre>\n\n<p>How should I define copy constructors, overloaded assignment operators, and destructors such that I avoid infinite recursion on deletion, and that I avoid, if possible, having to use <code>new</code>? <code>A::B</code> needs pointer to <code>A</code> to define operators that programmer may decide to add. Also, programmer may decide to write class C that extends A and <code>C::D</code> that extends <code>A::B</code></p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 1122, "user_id": 4299382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93710a8b51660c8e031ae563da6961e2?s=128&d=identicon&r=PG&f=1", "display_name": "Yehezkel B.", "link": "https://stackoverflow.com/users/4299382/yehezkel-b"}, "edited": false, "score": 1, "creation_date": 1473893326, "post_id": 39500701, "comment_id": 66318930, "body": "Two points:  1. Don&#39;t use <code>mutex</code> directly, use <code>std::unique_lock</code> (this is the correct tool in your case, because you want to explicitly unlock it before the scope ends). RAII is an important idiom to make your code clear and safe.  2. Why the last <code>m_running = false;</code> line? We arrive there only if the <code>while</code> loop exited which is when <code>m_running</code> is <code>false</code>."}, {"owner": {"reputation": 1122, "user_id": 4299382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93710a8b51660c8e031ae563da6961e2?s=128&d=identicon&r=PG&f=1", "display_name": "Yehezkel B.", "link": "https://stackoverflow.com/users/4299382/yehezkel-b"}, "edited": false, "score": 1, "creation_date": 1473893576, "post_id": 39500701, "comment_id": 66319004, "body": "To the question: yes, you &quot;bundle&quot; the flag testing and the process creation together. I just don&#39;t think you have to keep holding the mutex in thread 1 after setting the flag."}, {"owner": {"reputation": 1122, "user_id": 4299382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93710a8b51660c8e031ae563da6961e2?s=128&d=identicon&r=PG&f=1", "display_name": "Yehezkel B.", "link": "https://stackoverflow.com/users/4299382/yehezkel-b"}, "edited": false, "score": 0, "creation_date": 1473893632, "post_id": 39500701, "comment_id": 66319023, "body": "(And the flag doesn&#39;t have to be atomic anymore, as it&#39;s protected by the mutex anyway.)"}, {"owner": {"reputation": 1577, "user_id": 1311494, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/5uuIC.jpg?s=128&g=1", "display_name": "Murat \u015eeker", "link": "https://stackoverflow.com/users/1311494/murat-%c5%9eeker"}, "reply_to_user": {"reputation": 1122, "user_id": 4299382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93710a8b51660c8e031ae563da6961e2?s=128&d=identicon&r=PG&f=1", "display_name": "Yehezkel B.", "link": "https://stackoverflow.com/users/4299382/yehezkel-b"}, "edited": false, "score": 0, "creation_date": 1473893875, "post_id": 39500701, "comment_id": 66319078, "body": "You&#39;re right about the RAII, actually real code uses it. I&#39;ve translated it  to mutex in order to simplify the psuedo-code. The <code>m_running = false</code> at the end of while loop seems unnecessary."}, {"owner": {"reputation": 1577, "user_id": 1311494, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/5uuIC.jpg?s=128&g=1", "display_name": "Murat \u015eeker", "link": "https://stackoverflow.com/users/1311494/murat-%c5%9eeker"}, "reply_to_user": {"reputation": 1122, "user_id": 4299382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93710a8b51660c8e031ae563da6961e2?s=128&d=identicon&r=PG&f=1", "display_name": "Yehezkel B.", "link": "https://stackoverflow.com/users/4299382/yehezkel-b"}, "edited": false, "score": 0, "creation_date": 1473894039, "post_id": 39500701, "comment_id": 66319131, "body": "If you look at the edit history, you will see that I have limited the scope of mutex to setting the flag. But later I guess I wanted to be in the safe zone :)"}, {"owner": {"reputation": 1577, "user_id": 1311494, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/5uuIC.jpg?s=128&g=1", "display_name": "Murat \u015eeker", "link": "https://stackoverflow.com/users/1311494/murat-%c5%9eeker"}, "reply_to_user": {"reputation": 1122, "user_id": 4299382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93710a8b51660c8e031ae563da6961e2?s=128&d=identicon&r=PG&f=1", "display_name": "Yehezkel B.", "link": "https://stackoverflow.com/users/4299382/yehezkel-b"}, "edited": false, "score": 0, "creation_date": 1473894138, "post_id": 39500701, "comment_id": 66319152, "body": "While loop still reads the <code>m_running</code>. Are you sure that it doesn&#39;t have to be atomic ?"}, {"owner": {"reputation": 1122, "user_id": 4299382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93710a8b51660c8e031ae563da6961e2?s=128&d=identicon&r=PG&f=1", "display_name": "Yehezkel B.", "link": "https://stackoverflow.com/users/4299382/yehezkel-b"}, "edited": false, "score": 0, "creation_date": 1473894984, "post_id": 39500701, "comment_id": 66319404, "body": "Oops. Correct. Still atomic for this usage."}], "answers": [{"comments": [{"owner": {"reputation": 1577, "user_id": 1311494, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/5uuIC.jpg?s=128&g=1", "display_name": "Murat \u015eeker", "link": "https://stackoverflow.com/users/1311494/murat-%c5%9eeker"}, "edited": false, "score": 0, "creation_date": 1473896079, "post_id": 39501010, "comment_id": 66319671, "body": "I am not sure if I understood you correctly. <code>m_running = false</code> statement at the end of the <code>run()</code> method seems unnecessary, I can remove that. I can also move the <code>m_running = true</code> statement ( at the beginning of <code>run()</code> ) to the <code>start()</code> method ( not mentioned in the question ) before spawning the <code>run()</code> thread. That way, I completely adapt your second alternative but my problem is still there. Am i wrong ?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "reply_to_user": {"reputation": 1577, "user_id": 1311494, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/5uuIC.jpg?s=128&g=1", "display_name": "Murat \u015eeker", "link": "https://stackoverflow.com/users/1311494/murat-%c5%9eeker"}, "edited": false, "score": 1, "creation_date": 1473896217, "post_id": 39501010, "comment_id": 66319703, "body": "No, you&#39;re not, but that&#39;s not all that I said. I also explained that for this design pattern, there needs to be some means for the thread to be notified to wake up and check <code>m_running</code>. Just <code>m_running</code> is not enough."}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": 1, "last_activity_date": 1473894893, "creation_date": 1473894893, "answer_id": 39501010, "question_id": 39500701, "link": "https://stackoverflow.com/questions/39500701/how-to-control-the-execution-of-a-thread-with-blocking-call/39501010#39501010", "title": "How to control the execution of a thread with blocking call", "body": "<p>Although a more precise answer needs more details on what <code>isRunning()</code>, <code>kill()</code>, and <code>join()</code>, there's a design flaw that's apparent here.</p>\n\n<p>Namely, the <code>m_running</code> flag's purpose is overloaded.</p>\n\n<p>A flag like <code>m_running</code> typically implements one of two classical design patterns:</p>\n\n<ol>\n<li>It is to report the status of a thread in question: whether it is running, or not.</li>\n</ol>\n\n<p>or:</p>\n\n<ol start=\"2\">\n<li>It is to control whether the thread in question should run, or stop.</li>\n</ol>\n\n<p>The shown code is attempting to conflate the two design patterns together. And they don't mesh.</p>\n\n<p>If the purpose of <code>m_running</code> is to have the thread in question report its current status, then thread 1's <code>stop()</code> has no business setting this flag. <code>m_running</code> should only be updated by the thread in question, and, indeed, your thread's <code>run()</code> sets it to <code>true</code> when it begins, and <code>false</code> before it returns. But then, <code>run()</code> itself has no business checking the value of <code>m_running</code> inside the <code>if</code> statement. Its only purpose is to report the status of the thread. Not to have the thread do anything.</p>\n\n<p>With this design pattern, <code>kill()</code> typically implements some means for terminating the thread's execution, usually by sending a message of some kind to the thread, that tells the thread to wind down. <code>kill()</code> would then monitor and wait until the thread obeys, and sets <code>m_running</code> to false, indicating that it exited. Or, if this is a joinable thread, <code>kill()</code> would join the thread.</p>\n\n<p>Alternatively, <code>m_running</code>'s purpose can be to signal the thread to stop what it's doing. But in this situation, the execution thread's <code>run()</code> has no business updating <code>m_running</code> itself. All a thread typically does in this design pattern, is execute a <code>while(m_running)</code> loop, waiting for the next message. The typical process for stopping the thread involves setting <code>m_running</code>, and then sending some kind of no-op message to the thread -- the message's only purpose would be to wake up the thread, so it can cycle through the loop and see the updated value of <code>m_running</code>.</p>\n\n<p>The shown code is attempting to conflate the two design patterns into a single variable, and it looks to me like that is the fundamental cause of the design problem.</p>\n\n<p>Separate <code>m_running</code> into two discrete variables: one to report the state of the thread (if that's needed), and a second variable that's used as part of a reliable mechanism for an orderly shutdown of the thread.</p>\n"}, {"tags": [], "owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "is_accepted": true, "score": 1, "last_activity_date": 1473895530, "last_edit_date": 1473895530, "creation_date": 1473895136, "answer_id": 39501045, "question_id": 39500701, "link": "https://stackoverflow.com/questions/39500701/how-to-control-the-execution-of-a-thread-with-blocking-call/39501045#39501045", "title": "How to control the execution of a thread with blocking call", "body": "<p>Think of it in terms of indivisible transactions.</p>\n\n<pre><code>//thread 1\nvoid stop()\n{\n    m_running = false;\n\n    {\n        //This block should happen as a transaction\n        std::lock_guard&lt;std::mutex&gt; lck(m_mutex);\n        if( process-&gt;isRunning() )\n            process-&gt;kill();\n    }\n}\n\n//thread 2\nvoid run()\n{\n    m_running = true;\n    while( m_running )\n    {\n        do_something();\n        {\n            //Since starting this process depends on m_running \n            //which could change anytime since we tested it last,\n            //we test it again, and start, this time as another transaction\n            std::lock_guard&lt;std::mutex&gt; lck(m_mutex);\n            if(m_running)\n                process-&gt;start();\n        }\n        process-&gt;join(); // Blocking call\n    }  \n}\n</code></pre>\n\n<p>You don't need to bother about protecting <code>m_running</code> since its the default  <code>std::atomic&lt;bool&gt;</code> which is <em>sequentially consistent</em></p>\n"}], "owner": {"reputation": 1577, "user_id": 1311494, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/5uuIC.jpg?s=128&g=1", "display_name": "Murat \u015eeker", "link": "https://stackoverflow.com/users/1311494/murat-%c5%9eeker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1948, "favorite_count": 0, "accepted_answer_id": 39501045, "answer_count": 2, "score": 2, "last_activity_date": 1473895530, "creation_date": 1473892711, "last_edit_date": 1473893011, "question_id": 39500701, "link": "https://stackoverflow.com/questions/39500701/how-to-control-the-execution-of-a-thread-with-blocking-call", "title": "How to control the execution of a thread with blocking call", "body": "<p>Sorry for the title, I couldn't find a one that describes the problem clearly.</p>\n\n<p>Please read the snippet below. There are 2 threads where the first one controls the execution and the second one does the job.</p>\n\n<pre><code>std::atomic&lt;bool&gt; m_running;\nProcess* process; // A thread-safe process implementation\n\n//thread 1\nvoid stop()\n{\n    m_running = false;\n\n    if( process-&gt;isRunning() )\n        process-&gt;kill(); // process-&gt;join() returns as a result of this call\n}\n\n//thread 2\nvoid run()\n{\n    m_running = true;\n\n    while( m_running )\n    {\n        do_something();\n\n        process-&gt;start();\n        process-&gt;join(); // Blocking call\n    }\n\n    m_running = false;   \n}\n</code></pre>\n\n<p>I've noticed that if the first thread starts execution while the second thread is busy with the <code>do_something()</code>, it will assign <code>false</code> to <code>m_running</code> and check if the process is running or not. Since the second thread is still in the <code>do_something()</code> call, <code>process-&gt;isRunning()</code> will return <code>false</code> and the first thread will return without killing the process.</p>\n\n<p>But second thread will start the process as soon as finishing <code>do_something()</code> as opposed to our stop demand.</p>\n\n<p>The first thing that come to my mind is like the following :</p>\n\n<pre><code>//thread 2\nvoid run()\n{\n    m_running = true;\n\n    while( m_running )\n    {\n        do_something();\n\n        if( m_running )\n        {\n            // flagged line ...\n            process-&gt;start();\n        }\n\n        process-&gt;join(); // Blocking call\n    }\n\n    m_running = false;   \n}\n</code></pre>\n\n<p>But still it is possible that the whole <code>stop()</code> method in thread 1 can start and finish when the second thread is interrupted in flagged line.</p>\n\n<p>So I decided to use a mutex but I'm not sure if everything is OK or not :</p>\n\n<pre><code>//thread 1\nvoid stop()\n{\n    mutex.lock();\n    m_running = false;\n\n    if( process-&gt;isRunning() )\n        process-&gt;kill(); // process-&gt;join() returns as a result of this call\n\n    mutex.unlock();\n}\n\n//thread 2\nvoid run()\n{\n    m_running = true;\n\n    while( m_running )\n    {\n        do_something();\n\n        mutex.lock();\n        if( m_running )\n        {\n            process-&gt;start();\n        }\n        mutex.unlock();\n\n        process-&gt;join(); // Blocking call\n    }\n\n    m_running = false;   \n}\n</code></pre>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 3980, "user_id": 78384, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/eea53d740e545170568396e388cd9b42?s=128&d=identicon&r=PG", "display_name": "Dan O", "link": "https://stackoverflow.com/users/78384/dan-o"}, "edited": false, "score": 0, "creation_date": 1473892712, "post_id": 39500664, "comment_id": 66318749, "body": "AFAIK reported values are ultimately up to your driver. What OS and driver version are you using?"}, {"owner": {"reputation": 1050, "user_id": 1043529, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dc8S5.png?s=128&g=1", "display_name": "John P", "link": "https://stackoverflow.com/users/1043529/john-p"}, "reply_to_user": {"reputation": 3980, "user_id": 78384, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/eea53d740e545170568396e388cd9b42?s=128&d=identicon&r=PG", "display_name": "Dan O", "link": "https://stackoverflow.com/users/78384/dan-o"}, "edited": false, "score": 0, "creation_date": 1473896505, "post_id": 39500664, "comment_id": 66319786, "body": "I&#39;m using Linux 4.4.0-36, Ubuntu, and I&#39;m not sure about the driver. However my vendor is Intel Open Source Technology Center and my renderer is Mesa DRI, Ironlake Mobile."}], "answers": [{"tags": [], "owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "is_accepted": true, "score": 4, "last_activity_date": 1473894543, "creation_date": 1473894543, "answer_id": 39500963, "question_id": 39500664, "link": "https://stackoverflow.com/questions/39500664/why-is-opengl-version-0-0/39500963#39500963", "title": "Why is OpenGL version 0.0?", "body": "<p>The <code>GL_MAJOR_VERSION</code> and <code>GL_MINOR_VERSION</code> queries were introduced in GL 3.0. Prior to that, this will just generate an <code>GL_INVALID_ENUM</code> error during the <code>glGetIntegerv</code> call, and leave your variables untouched.</p>\n\n<p>You have to use <code>glGetString(GL_VERSION)</code> to reliably get the verison number if you can't make sure that you are on a >= 3.0 context. If you need those as numbers, you'll have to manually parse the string.</p>\n"}], "owner": {"reputation": 1050, "user_id": 1043529, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dc8S5.png?s=128&g=1", "display_name": "John P", "link": "https://stackoverflow.com/users/1043529/john-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 0, "accepted_answer_id": 39500963, "answer_count": 1, "score": 0, "last_activity_date": 1473894543, "creation_date": 1473892522, "question_id": 39500664, "link": "https://stackoverflow.com/questions/39500664/why-is-opengl-version-0-0", "title": "Why is OpenGL version 0.0?", "body": "<p>I was troubleshooting an OpenGL application on a new computer when I discovered that GLFW could not create a window with the specified version of OpenGL. I created a minimal version of the application to test the version of OpenGL created, and no matter what version I hint, the version I get is 0.0. Do I simply not have OpenGL? This seems impossible, since glxgears runs and glxinfo suggests that I have version 2.1. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;GLFW/glfw3.h&gt;\n\nint main(int argc, const char *argv[]) {\n    if(!glfwInit()) {\n        return 1;\n    }\n    glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 2);\n    glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 1);\n    auto win = glfwCreateWindow(640, 480, \"\", NULL, NULL);\n    if(!win) {\n        return 1;\n    }\n    int major = 0, minor = 0;\n    glfwMakeContextCurrent(win);\n    glGetIntegerv(GL_MAJOR_VERSION, &amp;major);\n    glGetIntegerv(GL_MINOR_VERSION, &amp;minor);\n    std::cout &lt;&lt; \"Initialized with OpenGL \"\n        &lt;&lt; major &lt;&lt; \".\" &lt;&lt; minor &lt;&lt; std::endl;\n    glfwDestroyWindow(win);\n    glfwTerminate();\n}\n</code></pre>\n\n<p>The output of the application is \"Initialized with OpenGL 0.0\". A window briefly opens and closes and the application terminates without errors.</p>\n"}, {"tags": ["c++", "templates", "inheritance", "function-templates"], "comments": [{"owner": {"reputation": 1095, "user_id": 2025214, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wLpN8.jpg?s=128&g=1", "display_name": "caps", "link": "https://stackoverflow.com/users/2025214/caps"}, "edited": false, "score": 0, "creation_date": 1473894089, "post_id": 39500632, "comment_id": 66319142, "body": "<code>TreeNode</code> does not need to be a template parameter there. As @jarod42 implies, you can just refer to the <code>TreeNode</code> class. The only template parameter you need is for the <code>T</code> of TreeNode."}], "answers": [{"comments": [{"owner": {"reputation": 226, "user_id": 5491493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54ac6814d9b57c1b6f6a199c076941e1?s=128&d=identicon&r=PG&f=1", "display_name": "friendoflore", "link": "https://stackoverflow.com/users/5491493/friendoflore"}, "edited": false, "score": 0, "creation_date": 1473923098, "post_id": 39500695, "comment_id": 66326725, "body": "Thanks! The question I (wrongly) thought I was asking was using templates for the class templates as well. Something like <code>std::vector&lt;L&lt;T&gt; *&gt; listify (N&lt;T&gt; * root)</code>. I was confused. Thanks again!"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 3, "last_activity_date": 1473892671, "creation_date": 1473892671, "answer_id": 39500695, "question_id": 39500632, "link": "https://stackoverflow.com/questions/39500632/c-sibling-template-classes-as-template-template-parameters/39500695#39500695", "title": "C++ sibling template classes as template template parameters", "body": "<p>Following should be enough:</p>\n\n<pre><code>template &lt;typename T&gt;\nstd::vector&lt;ListNode&lt;T&gt;*&gt; listify(TreeNode&lt;T&gt;* root)\n</code></pre>\n"}], "owner": {"reputation": 226, "user_id": 5491493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54ac6814d9b57c1b6f6a199c076941e1?s=128&d=identicon&r=PG&f=1", "display_name": "friendoflore", "link": "https://stackoverflow.com/users/5491493/friendoflore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 39500695, "answer_count": 1, "score": 0, "last_activity_date": 1473892671, "creation_date": 1473892300, "question_id": 39500632, "link": "https://stackoverflow.com/questions/39500632/c-sibling-template-classes-as-template-template-parameters", "title": "C++ sibling template classes as template template parameters", "body": "<p>I have a binary tree and I am trying to put each depth of nodes in its own linked list.</p>\n\n<p>I have the class templates:</p>\n\n<pre><code>template &lt;typename T&gt; \nclass Node \n{\n    public:\n        T data;\n};\n\ntemplate &lt;typename T&gt;\nclass ListNode : public Node&lt;T&gt;\n{\n    public:\n        ListNode * next;\n};\n\ntemplate &lt;typename T&gt;\nclass TreeNode : public Node&lt;T&gt;\n{\n    public:\n        TreeNode * left;\n        TreeNode * right;\n};\n</code></pre>\n\n<p>To accomplish the task, I planned on using a function template that has <code>TreeNode&lt;T&gt; * root</code> as a parameter and returns a <code>vector&lt;ListNode&lt;T&gt; *&gt;</code>.</p>\n\n<p>What is the correct way to define the function template?</p>\n\n<p>Not knowing how to approach it, I initially expected something like this to be a way to accomplish this:</p>\n\n<pre><code>template &lt;template &lt;typename&gt; class Node, typename T&gt;\nstd::vector&lt;ListNode&lt;T&gt; *&gt; listify(TreeNode&lt;T&gt; * root)\n{\n    // Do stuff...\n}\n</code></pre>\n\n<p>But this does not work.</p>\n\n<p>It seems like the compiler is okay with:</p>\n\n<pre><code>template &lt;template &lt;typename&gt; class TreeNode, typename T&gt;\nstd::vector&lt;ListNode&lt;T&gt; *&gt; listify(TreeNode&lt;T&gt; * root)\n{\n    // Do stuff...\n}\n</code></pre>\n\n<p>Why does this work/what exactly is happening here? Is this the correct way to do this with sibling class templates?</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1473891544, "post_id": 39500479, "comment_id": 66318445, "body": "Choose C++. <code>std::vector</code> is your friend against UB &amp; memory leaks."}, {"owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "edited": false, "score": 1, "creation_date": 1473891660, "post_id": 39500479, "comment_id": 66318479, "body": "<code>class Listptr{</code> <code>Listptr::Listptr(){</code> This is clearly C++ code; please don&#39;t tag C++ code as C."}, {"owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "edited": false, "score": 0, "creation_date": 1473891812, "post_id": 39500479, "comment_id": 66318515, "body": "Is there a reason you&#39;re not using <code>std::string</code>?"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "reply_to_user": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "edited": false, "score": 1, "creation_date": 1473891986, "post_id": 39500479, "comment_id": 66318549, "body": "@KeithM Homework assignments typically don&#39;t allow using the standard library"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 4, "creation_date": 1473892056, "post_id": 39500479, "comment_id": 66318570, "body": "Why are you using <code>malloc</code>? You should use <code>new</code> not <code>malloc</code>. If your instructor told you to use <code>malloc</code> like that in C++ you are entitlted to a refund."}], "answers": [{"comments": [{"owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "edited": false, "score": 0, "creation_date": 1473892340, "post_id": 39500623, "comment_id": 66318637, "body": "I also agree with comments on the question suggesting <code>new</code> over <code>malloc</code> etc., but this is the closest working version of your code, I think."}], "tags": [], "owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1473893550, "last_edit_date": 1473893550, "creation_date": 1473892259, "answer_id": 39500623, "question_id": 39500479, "link": "https://stackoverflow.com/questions/39500479/make-and-array-of-pointers-to-strings-in-c/39500623#39500623", "title": "make and array of pointers to strings in c++", "body": "<p>You should really use <code>std::string</code> and <code>std::vector&lt;std::string&gt;</code> or something, as I mentioned in the comments. However, there were several problems with your code, which I've fixed below. Mainly you want a pointer to char arrays, i.e. a <code>char**</code>, not a <code>char*</code>, and then you need to check to make sure you're not trying to print a char array that's just a null pointer. You were also not using <code>malloc</code> correctly. So for educational purposes, to understand what you did wrong and not just say \"stop it,\" here's the fixed code:</p>\n\n<pre><code>class Listptr{\n    public:\n        Listptr();\n        void append(char *item);\n    private:\n        int size = 5;\n        char ** buffer; // char**\n};\n\nListptr::Listptr(){\n    buffer = (char**)malloc(size * sizeof(char**)); // char**\n    for(int i=0; i&lt;size; i++){\n        buffer[i] = NULL;\n    }\n}\n\nListptr::~Listptr() {\n    // Add destructor to free malloc-allocated memory when we're done\n    free(buffer);\n}\n\nvoid Listptr::append(char *item){\n    for(int i=0; i&lt;size; i++){\n        if(buffer[i] == NULL){\n            buffer[i] = item;\n            break;\n        }\n    }\n\n    for(int i=0; i&lt;size; i++){\n        if (buffer[i] != NULL) { // Do not dereference null pointer\n            cout &lt;&lt; \" \" &lt;&lt; buffer[i];\n        }\n    }\n}\n\n\nint main() {\n    Listptr test;\n    char val[] = \"test\";\n    char val2[] = \"test2\";\n    test.append(val);\n    test.append(val2);\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code> test test test2\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 5953881, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2b3c823798b9a6e0d161cfad87e5c2e5?s=128&d=identicon&r=PG&f=1", "display_name": "moonboon", "link": "https://stackoverflow.com/users/5953881/moonboon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 614, "favorite_count": 0, "accepted_answer_id": 39500623, "answer_count": 1, "score": -4, "last_activity_date": 1473893550, "creation_date": 1473891429, "last_edit_date": 1473891715, "question_id": 39500479, "link": "https://stackoverflow.com/questions/39500479/make-and-array-of-pointers-to-strings-in-c", "title": "make and array of pointers to strings in c++", "body": "<p>I am writing a class in c++ that should add pointers of a string to an array.  Instead of adding a pointer to a string I'm only adding the first character to the array but I want to be able to recall the whole string afterwards.  How can I add a pointer of the string to the list so that I can print out the whole string?</p>\n\n<pre><code>class Listptr{\n    public:\n        Listptr();\n        void append(char *item);\n    private:\n        int size = 5;\n        char * buffer;\n};\n\nListptr::Listptr(){\n    buffer = (char*)malloc(size);\n    for(int i=0; i&lt;size; i++){\n        buffer[i] = NULL;\n    }\n}\n\nvoid Listptr::append(char *item){\n    for(int i=0; i&lt;size; i++){\n        if(buffer[i] == NULL){\n            buffer[i] = *item;\n            break;\n        }\n    }\n\n    for(int i=0; i&lt;size; i++){\n        cout &lt;&lt; \" \" &lt;&lt; buffer[i];\n    }\n}\n\n\nint main() {\n    Listptr test;\n    char val[] = \"test\";\n    char val2[] = \"test2\";\n    test.append(val);\n    test.append(val2);\n\n}\n</code></pre>\n"}, {"tags": ["c++", "io"], "comments": [{"owner": {"reputation": 1152, "user_id": 4761877, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PdJG-0u7rLc/AAAAAAAAAAI/AAAAAAAAAFk/POj3rkBvbf0/photo.jpg?sz=128", "display_name": "Timothy Murphy", "link": "https://stackoverflow.com/users/4761877/timothy-murphy"}, "edited": false, "score": 5, "creation_date": 1473890658, "post_id": 39500294, "comment_id": 66318172, "body": "If you&#39;re using C++ you should really consider using <code>std::string</code> instead of char arrays."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1473890987, "post_id": 39500294, "comment_id": 66318263, "body": "Search the internet for &quot;stackoverflow c++ read file struct&quot; for examples of how to read a data file into a structure.  Too many similar questions and answers already."}, {"owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "edited": false, "score": 0, "creation_date": 1473891080, "post_id": 39500294, "comment_id": 66318301, "body": "Hint: It looks like you only increment <code>currentIndex</code> once ever, regardless of how many books are in your txt file."}, {"owner": {"reputation": 25650, "user_id": 369872, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2b4534ace0008370742fe0c8bb942361?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/369872/david"}, "edited": false, "score": 1, "creation_date": 1473891294, "post_id": 39500294, "comment_id": 66318374, "body": "Please ask a specific problem and show a minimal example of what you&#39;ve tried which doesn&#39;t work."}, {"owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "reply_to_user": {"reputation": 25650, "user_id": 369872, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2b4534ace0008370742fe0c8bb942361?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/369872/david"}, "edited": false, "score": 0, "creation_date": 1473891399, "post_id": 39500294, "comment_id": 66318407, "body": "@David his problem is <code>In this example I am getting no output.</code>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1473891439, "post_id": 39500294, "comment_id": 66318419, "body": "This isn&#39;t the problem, but <code>std::fstream my_stream(&quot;input.txt&quot;);</code> will open the file; there&#39;s no need for a separate call to <code>my_stream.open()</code>. And the destructor for <code>std::fstream</code> will close the file; there&#39;s no need for a separate call to <code>my_stream.close()</code>."}, {"owner": {"reputation": 1152, "user_id": 4761877, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PdJG-0u7rLc/AAAAAAAAAAI/AAAAAAAAAFk/POj3rkBvbf0/photo.jpg?sz=128", "display_name": "Timothy Murphy", "link": "https://stackoverflow.com/users/4761877/timothy-murphy"}, "edited": false, "score": 0, "creation_date": 1473891455, "post_id": 39500294, "comment_id": 66318427, "body": "He&#39;s getting output. It&#39;s just a single book with default constructed values for each data member of the Book type. Which is the only one that actually gets added. There is also a problem with his <code>readfile</code> function. He switches between reading from file and stdin."}, {"owner": {"reputation": 3599, "user_id": 2487517, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cRCpa.jpg?s=128&g=1", "display_name": "Tibrogargan", "link": "https://stackoverflow.com/users/2487517/tibrogargan"}, "edited": false, "score": 0, "creation_date": 1473893379, "post_id": 39500294, "comment_id": 66318948, "body": "hint: also format your data as code for extra win"}], "answers": [{"tags": [], "owner": {"reputation": 1577, "user_id": 6776535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c515e458c92c554943b271a6789f0372?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Pr&#233;vost", "link": "https://stackoverflow.com/users/6776535/robert-pr%c3%a9vost"}, "is_accepted": false, "score": 1, "last_activity_date": 1473905106, "creation_date": 1473905106, "answer_id": 39502160, "question_id": 39500294, "link": "https://stackoverflow.com/questions/39500294/adding-contents-of-a-file-to-a-struct/39502160#39502160", "title": "Adding contents of a file to a struct", "body": "<p>The main problems are with the readfile function. As stated in the comments, std::fstream can take a string as the first argument, so calling open later is not necessary.  Furthermore, one should check that a file is open before performing operations on it.  std::string does not need to be initialized in order to be used later in this function.  This leads to the following code.</p>\n\n<pre><code>fstream my_stream(\"input.txt\");\nif(!my_stream) {\n    return;\n}\nstring line;\n</code></pre>\n\n<p>readfile's loops do not appear to be constructed correctly.  The outer loop increments over the range of current indices for the collection array, while the inner loop looks as if intended to read the entire file.  If the inner loop was constructed correctly, then the contents of the file would be written to the 0-th Book in collection.  The inner loop begins with testing if reading a line from the file, which is ignored by reading input from std::cin, is successful.</p>\n\n<p>Because the number of \"Books\" in input.txt is not known, the outer loop seems to be irrelevant to the goal of reading all the \"Books\" into a different element of collection.  In order to read the whole file, we'll change the loop to check that the file is still readable.</p>\n\n<pre><code>while(my_stream) {\n</code></pre>\n\n<p>For reading the strings, we need to read and store the entire line using std::getline (<code>my_stream &gt;&gt; line;</code> here will get tripped up by spaces), and memcpy to copy the the contents of the line into the corresponding char array.  Because std::getline may fail, we check for success before using the contents of line.  For example, here's title:</p>\n\n<pre><code>// title\nif(!std::getline(my_stream, line)) {\n    break;\n}\nmemcpy(collection[currentIndex].title, line.c_str(), std::min(sizeof(collection[currentIndex].title), line.size()));\n</code></pre>\n\n<p>For the numbers, we can just read the numbers using operator>> and ignore any extra characters at the end of the line.  Likewise, this operation can fail and is checked as well.  For example, here's price:</p>\n\n<pre><code>    my_stream &gt;&gt; collection[currentIndex].price; \n    my_stream.ignore(); \n    if(!my_stream) { \n        break;\n    } \n</code></pre>\n\n<p>If all the members of the current Book have been read correctly, then at the end of the loop body, we'll increment the number of Books seen (<code>++currentIndex;</code>).  As stated in the comments, explicit closing of my_stream is not necessary in the context of readfile as the file will get closed when the destructor for my_stream is called at the end of scope.</p>\n\n<p>Some additional minor points.  As discussed above in the comments, std::string should probably be used for Book::title, Book::author, and Book::publisher.  This is because std::string handles the case where the number of characters is unknown more gracefully without resorting to managing memory explicitly.  Likewise, collection would be better suited to a standard container (e.g., std::vector).  This does cause problems for the current implementation of indexBook, which could be changed to use the copy constructor of Book to store in collection.  For Book IO, operator>> and operator&lt;&lt; could be overloaded to replace and simplify code inside of readfile and printCollection.</p>\n"}, {"tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": false, "score": 0, "last_activity_date": 1473972432, "creation_date": 1473972432, "answer_id": 39520100, "question_id": 39500294, "link": "https://stackoverflow.com/questions/39500294/adding-contents-of-a-file-to-a-struct/39520100#39520100", "title": "Adding contents of a file to a struct", "body": "<p>There are a number of problems and bad habits to be learning in this code.</p>\n\n<pre><code>using namespace std;\n</code></pre>\n\n<p>This is a dangerous practice, because it means all of the names declared in the <code>std</code> library namespace are imported into the global namespace which will cause you all kinds of weird problems in future.</p>\n\n<p>If you want to avoid having to type <code>std::cout</code> and <code>std::string</code> all the time, you can instead write:</p>\n\n<pre><code>using std::string;\nusing std::cout;\n</code></pre>\n\n<p>Next:</p>\n\n<pre><code>typedef struct book { ... } Book\n</code></pre>\n\n<p>This is a C language construct that is completely unnecessary in C++.</p>\n\n<pre><code>struct Book {\n};\n</code></pre>\n\n<p>it's that simple.</p>\n\n<pre><code>struct Book {\n    char title[100];\n};\n</code></pre>\n\n<p>Since you are aware of std::string, why not use it here?</p>\n\n<pre><code>using std::string;\n\nstruct Book {\n    string title;\n    string author;\n    string publisher;\n    float price;\n    int isbn;\n    int pages;\n    int copies;\n};\n</code></pre>\n\n<p>The <code>indexBook</code> function is frankly scary.</p>\n\n<pre><code>void\nindexBook(Book *my_book)\n{\n    memcpy(&amp;collection[currentIndex], my_book, sizeof(Book));\n    currentIndex++;\n}\n</code></pre>\n\n<p><code>memcpy</code> should be avoided in C++, you should instead rely on the copy/assignment/move operators built-in to C++ objects.</p>\n\n<pre><code>    collection[currentIndex] = *my_book;\n</code></pre>\n\n<p>If there is a particularly good reason why an object should not be copied, and the author of the object's class is any good, you will get a compiler error, whereas with <code>memcpy</code> you will just get undefined behavior.</p>\n\n<p>Lets skip ahead a little:</p>\n\n<pre><code>void\nprintCollection(void)\n{\n    ...\n}\n\nvoid printCollection(void);\n</code></pre>\n\n<p>there's no harm here, but forward-declaring printCollection after it's definition is redundant.</p>\n\n<pre><code>Book *my_book = new Book;\n\nindexBook(my_book);\n\n...\ndelete my_book;\n</code></pre>\n\n<p>It's not clear here why you've done this. It seems wasteful. You could just as easily have done:</p>\n\n<pre><code>Book my_book;\n</code></pre>\n\n<p>But either way there is a simple problem: <code>my_book</code> has not been initialized. So what you copied into the collection is anyone's guess.</p>\n\n<pre><code>Book my_book {};\n</code></pre>\n\n<p>would default initialize it for you.</p>\n\n<p>Now lets look at readfile.</p>\n\n<pre><code>fstream my_stream;\nstring line = \" \";  // why?\nmy_stream.open(\"input.txt\");\nint i=0;\nfor (i = 0; ...)\n{\n   ...\n}\nmy_stream.close();\n</code></pre>\n\n<p>You're doing a lot of unnecessary work and coding here. You're using C++ so objects have constructors, you can write <code>std::string line = \" \"</code> or <code>std::string line(\" \")</code> or <code>std::string line {\" \"}</code> (preferred as of C++11). But you can also do the same for fstream. And lastly, unless you need <code>i</code> to be visible outside of the for loop, you can make it local to the loop.</p>\n\n<p>Because <code>fstream</code> is an object, it also has a destructor, which will ensure the file is closed.</p>\n\n<p>This all brings us down to</p>\n\n<pre><code>void\nreadfile()\n{\n    std::fstream my_stream(\"input.txt\");\n    for (int i = 0; i &lt; currentIndex; ++i)\n    {\n       std::string line {};  // default initialized.\n       ...\n    }\n    // call to close is redundant\n}\n</code></pre>\n\n<p>Now we're coming to the crux of what is actually broken with your code, most of which lies in this function.</p>\n\n<p>1 You don't check that the file is open</p>\n\n<p>2 You call <code>getline(my_stream, line)</code> in a while loop <em>inside</em> the <code>i</code> for loop,</p>\n\n<p>3 You don't adjust <code>currentIndex</code></p>\n\n<p>4 (worst of all) you misuse <code>operator&gt;&gt;</code>.</p>\n\n<p>In your code you write the following:</p>\n\n<pre><code>for (i = 0; i &lt; currentIndex; ++i)  // *1\n{\n    while (getline(my_stream, line))  // *2\n    {\n        cin &gt;&gt; line &gt;&gt; collection[i].title;  // *3\n</code></pre>\n\n<p>Because you called <code>indexBook</code> on an uninitialized object in main, <code>currentIndex</code> is 1, so we will enter the for loop.</p>\n\n<p>Now we try and read the first line of <code>my_stream</code> into <code>line</code> (*2) and if that succeeds, we enter the while loop body.</p>\n\n<p>Now we try and read a word from <code>std::cin</code> <em>into line</em> followed by another word from <code>std::cin</code> into collection[0].title (*3, remember: i=0, and has to be <code>&lt; currentIndex</code>).</p>\n\n<p>You do no checking on these <code>std::cin</code> reads, if any of them fail it will just proceed through all of them doing nothing.</p>\n\n<p>Finally we reach the end of the while loop and we again try <code>getline(my_stream, line)</code>. If this succeeds, we re-enter the while loop body.</p>\n\n<p>*Note that <code>i</code> has not yet been changed, so the code still refers to <code>collection[0]</code>, overwriting any data that was fetched from <code>std::cin</code> in the first pass.</p>\n\n<p>This will continue until we have exhausted <code>my_stream</code>, at which point we finally exit the while loop and reach the <code>for</code> loop.</p>\n\n<p><code>i</code> is incremented so that <code>i</code> now equals <code>1</code>. The condition is checked and it is no-longer true that <code>i &lt; currentIndex</code> so we exit the for loop.</p>\n\n<p>It appears you thought that you were writing code to read a word <em>from</em> line into <code>collection[i].title</code>. We can use <code>std::stof</code> and <code>std::stoi</code> to convert strings to <code>float</code> and <code>integer</code> so we might write something like this:</p>\n\n<pre><code>bool\nreadFile(void)  // returns true on success, false on error\n{\n    using std::getline;\n\n    std::fstream my_stream(\"input.txt\");\n    if (!my_stream.is_open())\n        return false;\n    for (int i = 0; i &lt; currentIndex; ++i)\n    {\n        Book newBook {};   // temporary local to read into\n        if (!getline(my_stream, newBook.title))\n            break;\n        if (!getline(my_stream, newBook.author))\n            break;\n        if (!getline(my_stream, newBook.publisher))\n            break;\n        std::string line;\n        if (!getline(my_stream, line))\n            break;\n        newBook.price = std::stof(line);\n        if (!getline(my_stream, line))\n            break;\n        newBook.isbn = std::stoi(line);\n        if (!getline(my_stream, line))\n            break;\n        newBook.pages = std::stoi(line);\n        if (!getline(my_stream, line))\n            break;\n        newBook.copies = std::stoi(line);\n\n        collection[i] = newBook;\n    }\n\n    return true;\n}\n</code></pre>\n\n<p>This is certainly <em>far</em> from being idiomatic C++, but that's for your teacher/book to teach you. I will, however, skip ahead to how I would solve this assignment.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nusing std::string;\n\nstruct Book\n{\n    // suffix member variables with `_` to distinguish from function names\n    // and parameters.\n    string title_;\n    string author_;\n    string publisher_;\n    float price_;\n    int isbn_;\n    int pages_;\n    int copies_;\n\n    // support `stream &gt;&gt; book` syntax with `operator &gt;&gt; ()`.\n    // note that it's not a member of the class, so we declare\n    // it as a `friend` function so it can have full access.\n    friend std::istream&amp; operator &gt;&gt; (std::istream&amp;, Book&amp;);\n\n    // because of the formatting, I wouldn't make this `operator &lt;&lt;`.\n    void print() const\n    {\n        std::cout &lt;&lt; \"Title: \" &lt;&lt; \"\\t\\t\" &lt;&lt; title_ &lt;&lt; '\\n';\n        std::cout &lt;&lt; \"Author: \" &lt;&lt; \"\\t\" &lt;&lt; author_ &lt;&lt; '\\n';\n        std::cout &lt;&lt; \"Publisher: \" &lt;&lt; \"\\t\" &lt;&lt; publisher_ &lt;&lt; '\\n';\n        std::cout &lt;&lt; \"Price: \" &lt;&lt; \"\\t\\t\" &lt;&lt; price_ &lt;&lt; '\\n';\n        std::cout &lt;&lt; \"ISBN: \" &lt;&lt; \"\\t\\t\" &lt;&lt; isbn_ &lt;&lt; '\\n';\n        std::cout &lt;&lt; \"Pages: \" &lt;&lt; \"\\t\\t\" &lt;&lt; pages_ &lt;&lt; '\\n';\n        std::cout &lt;&lt; \"Copies: \" &lt;&lt; \"\\t\" &lt;&lt; copies_ &lt;&lt; '\\n';\n    }\n};\n\nusing Collection = std::vector&lt;Book&gt;;\n\nstd::istream&amp; operator &gt;&gt; (std::istream&amp; str, Book&amp; book)\n{\n    std::getline(str, book.title_);\n    std::getline(str, book.author_);\n    std::getline(str, book.publisher_);\n    str &gt;&gt; book.price_ &gt;&gt; book.isbn_ &gt;&gt; book.pages_ &gt;&gt; book.copies_;\n    str.ignore();\n    return str;\n}\n\nbool\nreadFile(std::string filename, Collection&amp; collection)\n{\n    std::fstream my_stream(filename);\n    if (!my_stream.is_open())\n        return false;\n\n    Book newBook {};\n    while (my_stream &gt;&gt; newBook)\n        collection.emplace_back(std::move(newBook));\n\n    return true;\n}\n\nvoid\nprintCollection(const Collection&amp; collection)\n{\n    for (auto&amp;&amp; book : collection)  // or: const Book&amp; book\n    {\n        book.print();\n        std::cout &lt;&lt; '\\n';\n    }\n}\n\nint\nmain()\n{\n    Collection collection;\n\n    if (!readFile(\"input.txt\", collection))\n    {\n        std::cerr &lt;&lt; \"readFile on input.txt failed\\n\";\n        return 1;  // non-zero return from main indicates program failure\n    }\n\n    std::cout &lt;&lt; \"Read \" &lt;&lt; collection.size() &lt;&lt; \" books\\n\\n\";\n\n    printCollection(collection);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6832933, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-23j-PlENZV4/AAAAAAAAAAI/AAAAAAAABtA/UJ5qnxxl_cg/photo.jpg?sz=128", "display_name": "Heath Martens", "link": "https://stackoverflow.com/users/6832933/heath-martens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1473972432, "creation_date": 1473890341, "last_edit_date": 1473964566, "question_id": 39500294, "link": "https://stackoverflow.com/questions/39500294/adding-contents-of-a-file-to-a-struct", "title": "Adding contents of a file to a struct", "body": "<p>I am supposed to create a program that indexes books in my collection. The struct contains the usual book info: title, author, publisher, etc. However, I am getting no output. One issue is that titles will have spaces.</p>\n\n<pre><code>/* Book Inventory assignment 2 by Heath Martens. */\n\n#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fstream&gt;\n#include &lt;cstring&gt; // I had to throw this in in order to get memcpy to work.\n\nusing namespace std;\n\ntypedef struct book{\n    char title[100];\n    char author[100];\n    char publisher[100];\n    float price;\n    int isbn;\n    int pages;\n    int copies;\n} Book;\n\nBook collection[100];\nint currentIndex;\n\n\nvoid\nindexBook(Book *my_book)\n{\n    memcpy(&amp;collection[currentIndex], my_book, sizeof(Book));\n    currentIndex++;\n}\n\nvoid\nreadfile(void)\n{\n    fstream my_stream;\n    string line = \" \";\n    my_stream.open(\"input.txt\");\n    int i=0;\n    for (i = 0; i &lt; currentIndex; i++)\n        {\n            while (getline(my_stream, line))\n            {\n                cin &gt;&gt; line &gt;&gt; collection[i].title;\n                cin &gt;&gt; line &gt;&gt; collection[i].author;\n                cin &gt;&gt; line &gt;&gt; collection[i].publisher;\n                cin &gt;&gt; line &gt;&gt; collection[i].price;\n                cin &gt;&gt; line &gt;&gt; collection[i].isbn;\n                cin &gt;&gt; line &gt;&gt; collection[i].pages;\n                cin &gt;&gt; line &gt;&gt; collection[i].copies;\n            }\n        }\n\n    my_stream.close();\n\n}\n\nvoid\nprintCollection(void)\n{\n    int i;\n    for (i = 0; i &lt; currentIndex; i++)\n    {\n        cout &lt;&lt; \"Title: \" &lt;&lt; \"\\t\\t\" &lt;&lt; collection[i].title &lt;&lt; endl;\n        cout &lt;&lt; \"Author: \" &lt;&lt; \"\\t\" &lt;&lt; collection[i].author &lt;&lt; endl;\n        cout &lt;&lt; \"Publisher: \" &lt;&lt; \"\\t\" &lt;&lt; collection[i].publisher &lt;&lt; endl;\n        cout &lt;&lt; \"Price: \" &lt;&lt; \"\\t\\t\" &lt;&lt; collection[i].price &lt;&lt; endl;\n        cout &lt;&lt; \"ISBN: \" &lt;&lt; \"\\t\\t\" &lt;&lt; collection[i].isbn &lt;&lt; endl;\n        cout &lt;&lt; \"Pages: \" &lt;&lt; \"\\t\\t\" &lt;&lt; collection[i].pages &lt;&lt; endl;\n        cout &lt;&lt; \"Copies: \" &lt;&lt; \"\\t\" &lt;&lt; collection[i].copies &lt;&lt; endl;\n    }\n}\n\nvoid printCollection(void);\n\nint\nmain(void)\n{\n    currentIndex = 0;\n\n    Book *my_book = new Book;\n\n    indexBook(my_book);\n\n    readfile();\n\n    printCollection();\n\n    delete my_book;\n\n    return 0;\n}\n</code></pre>\n\n<p>Here is the txt file I have been given to use.</p>\n\n<pre><code>Magician: Apprentice\nRaymond E. Feist\nSpectra (January 1, 1994)\n5.02\n0553564943\n512\n1\nMagician: Master\nRaymond E. Feist\nSpectra (January 1, 1994)\n7.99\n0553564935\n499\n1\n</code></pre>\n\n<p>Here is the updated code based on some of the examples provided.</p>\n\n<pre><code>    void\n    readfile(void)\n    {\n       fstream my_stream (\"input.txt\");\n       if(!my_stream)\n    {\n       return;\n    }\n     string line = \" \";\n     int i=0;\nfor (i = 0; i &lt; currentIndex; i++)\n    {\n        if(!std::getline(my_stream, line))\n        {\n            break;\n        }\n        memcpy(collection[currentIndex].title, line.c_str(), std::min(sizeof(collection[currentIndex].title), line.size()));\n        memcpy(collection[currentIndex].author, line.c_str(), std::min(sizeof(collection[currentIndex].author), line.size()));\n        memcpy(collection[currentIndex].publisher, line.c_str(), std::min(sizeof(collection[currentIndex].publisher), line.size()));\n        my_stream &gt;&gt; collection[currentIndex].price;\n        my_stream &gt;&gt; collection[currentIndex].isbn;\n        my_stream &gt;&gt; collection[currentIndex].pages;\n        my_stream &gt;&gt; collection[currentIndex].copies;\n        my_stream.ignore();\n        if(!my_stream)\n        {\n            break;\n        }\n    }\n</code></pre>\n\n<p><a href=\"http://i.stack.imgur.com/9iR07.png\" rel=\"nofollow\">Error in output</a></p>\n"}, {"tags": ["c++", "data-member-pointers"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1473887557, "post_id": 39499668, "comment_id": 66317002, "body": "First thing is that <code>IntegerGroup</code> should have a virtual destructor."}, {"owner": {"reputation": 3022, "user_id": 2027839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f0cdfc83802dff15a73a5c273c1b4154?s=128&d=identicon&r=PG", "display_name": "Mike Warren", "link": "https://stackoverflow.com/users/2027839/mike-warren"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1473887642, "post_id": 39499668, "comment_id": 66317040, "body": "Why virtual destructor?"}, {"owner": {"reputation": 3022, "user_id": 2027839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f0cdfc83802dff15a73a5c273c1b4154?s=128&d=identicon&r=PG", "display_name": "Mike Warren", "link": "https://stackoverflow.com/users/2027839/mike-warren"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1473887683, "post_id": 39499668, "comment_id": 66317058, "body": "Also, why is this question bad?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1473887755, "post_id": 39499668, "comment_id": 66317089, "body": "FYI, you can pass pointers to static objects and pointers can be used to point to hardware components.  In this regard, the pointers don&#39;t use <code>new</code>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 4, "creation_date": 1473887825, "post_id": 39499668, "comment_id": 66317110, "body": "@MikeWarren -- The reason is that you are deriving from the base class.  If someone else were to use your class in a polymorphic fashion, they will get real angry at you when the memory leak reports come in.  <a href=\"http://stackoverflow.com/questions/461203/when-to-use-virtual-destructors\">See this</a>"}, {"owner": {"reputation": 3022, "user_id": 2027839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f0cdfc83802dff15a73a5c273c1b4154?s=128&d=identicon&r=PG", "display_name": "Mike Warren", "link": "https://stackoverflow.com/users/2027839/mike-warren"}, "edited": false, "score": 0, "creation_date": 1473887939, "post_id": 39499668, "comment_id": 66317147, "body": "Like, as data types to <code>std::vector</code>, for example?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1473888374, "post_id": 39499668, "comment_id": 66317307, "body": "For a class to be safely used by <code>std::vector</code>, it has to have proper copy semantics.  Your <code>Element</code> class lacks the proper copy semantics, thus the behavior becomes undefined.  Note that this is not the fault of vector, as any code that assigns or copies <code>Element</code> objects would have the same issue.  Please look at the <a href=\"http://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">rule of 3</a>"}, {"owner": {"reputation": 3022, "user_id": 2027839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f0cdfc83802dff15a73a5c273c1b4154?s=128&d=identicon&r=PG", "display_name": "Mike Warren", "link": "https://stackoverflow.com/users/2027839/mike-warren"}, "edited": false, "score": 0, "creation_date": 1473888545, "post_id": 39499668, "comment_id": 66317384, "body": "I tried to implement copy constructor:   <code>IntegerGroup::GroupElement::GroupElement(const IntegerGroup::GroupElement::GroupElement&amp; other) { \t&#47;&#47; do deep-copy of everything. default copy constructor does shallow-copy. \tthis-&gt;m = other.m; \t*(this-&gt;group) = *(other.group); }</code>  but it broke the code."}, {"owner": {"reputation": 3022, "user_id": 2027839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f0cdfc83802dff15a73a5c273c1b4154?s=128&d=identicon&r=PG", "display_name": "Mike Warren", "link": "https://stackoverflow.com/users/2027839/mike-warren"}, "edited": false, "score": 0, "creation_date": 1473889084, "post_id": 39499668, "comment_id": 66317604, "body": "I use <code>new</code>, and then try <code>delete this-&gt;group</code> in virtual destructor of <code>IntegerGroup::GroupElement</code>, and get segmentation fault. I use GDB debugger and find out that it is because of infinite recursion. Is there no C++ way to implement <code>IntegerRing</code>s?!?!"}, {"owner": {"reputation": 3022, "user_id": 2027839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f0cdfc83802dff15a73a5c273c1b4154?s=128&d=identicon&r=PG", "display_name": "Mike Warren", "link": "https://stackoverflow.com/users/2027839/mike-warren"}, "edited": false, "score": 0, "creation_date": 1473889190, "post_id": 39499668, "comment_id": 66317639, "body": "I thought to use new after I tried that copy constructor and learned that it crashed because <code>this-&gt;group == NULL</code>"}, {"owner": {"reputation": 3022, "user_id": 2027839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f0cdfc83802dff15a73a5c273c1b4154?s=128&d=identicon&r=PG", "display_name": "Mike Warren", "link": "https://stackoverflow.com/users/2027839/mike-warren"}, "edited": false, "score": 0, "creation_date": 1473889964, "post_id": 39499668, "comment_id": 66317928, "body": "Now, I just used <code>std::vector&lt;IntegerGroup::GroupElement&gt;</code> instead of my <code>Array&lt;IntegerGroup::GroupElement&gt;</code> in base class, updated <code>operator&lt;&lt;</code> to spell out the behavior and got segmentation fault."}, {"owner": {"reputation": 3022, "user_id": 2027839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f0cdfc83802dff15a73a5c273c1b4154?s=128&d=identicon&r=PG", "display_name": "Mike Warren", "link": "https://stackoverflow.com/users/2027839/mike-warren"}, "edited": false, "score": 0, "creation_date": 1473890087, "post_id": 39499668, "comment_id": 66317977, "body": "My code is now broken to the core, and I have not the slightest idea how to begin fixing it."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1473890464, "post_id": 39499668, "comment_id": 66318111, "body": "Seems not <b>M</b>inimal  for a MCVE."}, {"owner": {"reputation": 3022, "user_id": 2027839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f0cdfc83802dff15a73a5c273c1b4154?s=128&d=identicon&r=PG", "display_name": "Mike Warren", "link": "https://stackoverflow.com/users/2027839/mike-warren"}, "edited": false, "score": 0, "creation_date": 1473890687, "post_id": 39499668, "comment_id": 66318181, "body": "How to minimize it? I don&#39;t get it: what is unnecessary in all that I included here? Spell it out for me."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1473894643, "post_id": 39499668, "comment_id": 66319306, "body": "In <code>array.cpp</code>, if you are going to use <code>new(std::nothrow)</code> you also need code to handle when that returns null pointer. Also puzzling why you use <code>nothrow</code> when you have a <code>throw</code> statement in another branch of the same function."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1473894721, "post_id": 39499668, "comment_id": 66319323, "body": "The question really seems to be asking &quot;Why is my code not working&quot;, the title is a red herring"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1473894771, "post_id": 39499668, "comment_id": 66319340, "body": "It&#39;s neither minimal nor complete, since <code>Array</code> is not in the question. You could replace <code>Array</code> with standard library containers, convert it to a single sourcefile that shows the same problem and is half the size of what you posted"}, {"owner": {"reputation": 3022, "user_id": 2027839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f0cdfc83802dff15a73a5c273c1b4154?s=128&d=identicon&r=PG", "display_name": "Mike Warren", "link": "https://stackoverflow.com/users/2027839/mike-warren"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1473900756, "post_id": 39499668, "comment_id": 66320750, "body": "@M.M  &gt; The question really seems to be asking &quot;Why is my code not working&quot;, the title is a red herring  That&#39;s because nobody answered the question decisively, and ended up giving me advice that turned my otherwise-working code into an unmanageable hell."}], "owner": {"reputation": 3022, "user_id": 2027839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f0cdfc83802dff15a73a5c273c1b4154?s=128&d=identicon&r=PG", "display_name": "Mike Warren", "link": "https://stackoverflow.com/users/2027839/mike-warren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1473891312, "creation_date": 1473887338, "last_edit_date": 1495540866, "question_id": 39499668, "link": "https://stackoverflow.com/questions/39499668/should-member-pointers-always-use-new-in-their-initialization", "title": "Should member pointers always use new in their initialization?", "body": "<p>In <a href=\"https://stackoverflow.com/questions/39494659/vectorpush-back-causing-segmentation-fault?noredirect=1#comment66315754_39494659\">this question</a>, I get weird segmentation fault in a method the constructor invokes, but apparently nowhere else (not even in a <code>CodeBreaker::testVectorOfElements</code> called from <code>main()</code> whose definition looks like:</p>\n\n<pre><code>void CodeBreaker::testVectorOfElements(int size)\n{\n    // try to do what you did in makeNumericCodes with the vector\n    while (this-&gt;numericCodes.size() &lt; size)\n    {\n        this-&gt;numericCodes.push_back(this-&gt;Z[0]);\n    }\n}\n</code></pre>\n\n<p><code>CodeBreaker</code> has a private <code>std::vector&lt;IntegerRing::Element&gt; numericCodes</code>.</p>\n\n<p>The source of this problem seems to be with my declaration of <code>IntegerRing</code>, which is an <code>IntegerGroup</code>. The MCVE code to both classes can be found below:</p>\n\n<p><em>IntegerGroup.h</em></p>\n\n<pre><code>#ifndef INTEGERGROUP_H\n#define INTEGERGROUP_H\n\n#include \"Array.h\"\n#include &lt;vector&gt;   // for some reason, this didn't work.\n\n#include &lt;iostream&gt;\n\n// This group is the integers mod n\n// multiplication in integer group is simply integer addition modulo n\nclass IntegerGroup\n{\n    public:\n        IntegerGroup();\n        IntegerGroup(int);\n        class GroupElement\n        {\n            protected:\n                int m;\n                IntegerGroup* group;\n            public: \n                GroupElement();\n                GroupElement(int);\n                GroupElement(int, IntegerGroup*);\n                ~GroupElement();\n        };\n        int size() const;\n        protected:\n            int n;\n            Array&lt;GroupElement&gt; elements;\n            void createNewElement(int);\n};\n\n#endif\n</code></pre>\n\n<p><em>IntegerGroup.cpp</em></p>\n\n<pre><code>#include \"IntegerGroup.h\"\n\n#include &lt;new&gt;\n#include &lt;iostream&gt;\n\nIntegerGroup::IntegerGroup()\n{\n\n}\n\nIntegerGroup::IntegerGroup(int n)\n : n(n), elements(Array&lt;IntegerGroup::GroupElement&gt;(n))\n   //elements(std::vector&lt;IntegerGroup::GroupElement&gt;(n))\n{\n    //this is to have integers in [0,n-1]\n    for (int j = 0; j &lt; n; j++)\n    {\n        this-&gt;createNewElement(j);\n    }\n}\n\nvoid IntegerGroup::createNewElement(int m)\n{\n    // create new GroupElement\n    GroupElement newElement(m, this);\n    // store it at index m in elements\n    this-&gt;elements[m] = newElement;\n}\n\nIntegerGroup::GroupElement::GroupElement() \n    : group(0)\n{\n\n}\n\nIntegerGroup::GroupElement::GroupElement(int x)\n    : m(x), group(0)\n{\n\n}\n\nIntegerGroup::GroupElement::GroupElement(int m, IntegerGroup * g)\n    : group(g)\n{\n    // this-&gt;m must be in [0, g-&gt;size() - 1], if g not null\n    if (g)\n    {\n        this-&gt;m = m % g-&gt;size();\n        if (this-&gt;m &lt; 0) this-&gt;m = g-&gt;size() + this-&gt;m;\n    }\n    else\n    {\n        this-&gt;m = m;\n    }\n}\n\nIntegerGroup::GroupElement::~GroupElement()\n{\n    if (this-&gt;group)\n    {\n        this-&gt;group = 0;\n    }\n}\n\nint IntegerGroup::size() const { return this-&gt;n; }\n</code></pre>\n\n<p><em>IntegerRing.h</em></p>\n\n<pre><code>#ifndef INTEGERRING_H\n#define INTEGERRING_H\n\n#include \"IntegerGroup.h\"\nclass IntegerRing : public IntegerGroup\n{\n    public:\n        IntegerRing();\n        IntegerRing(int);\n        IntegerRing(const IntegerGroup&amp;);\n        class Element : public IntegerGroup::GroupElement::GroupElement\n        {\n            public: \n                Element();\n                Element(int, IntegerGroup*);\n                //~Element();\n                operator IntegerGroup::GroupElement() { return IntegerGroup::GroupElement(); }\n                Element(const IntegerGroup::GroupElement&amp;);\n        };\n};\n\n#endif\n</code></pre>\n\n<p><em>IntegerRing.cpp</em></p>\n\n<pre><code>#include \"IntegerRing.h\"\n#include \"IntegerGroup.h\"\n\n\n#include &lt;iostream&gt;\n\nIntegerRing::Element::Element()\n    : IntegerGroup::GroupElement()\n{\n\n}\n\nIntegerRing::IntegerRing(int n)\n    : IntegerGroup::IntegerGroup(n)\n{\n\n}\n\nIntegerRing::Element::Element(int m, IntegerGroup * g)\n    : IntegerGroup::GroupElement(m, g)\n{\n\n}\n\nIntegerRing::Element::Element(const IntegerGroup::GroupElement&amp; el)\n    : IntegerGroup::GroupElement(el)\n{\n\n}\n</code></pre>\n\n<p><em>CodeBreaker.h</em></p>\n\n<pre><code>#ifndef CODEBREAKER_H\n#define CODEBREAKER_H\n\n#include &lt;string&gt;\n#include &lt;map&gt;\n#include &lt;utility&gt;\n#include &lt;vector&gt;\n\n#include \"IntegerRing.h\"\n#include \"PunctuationOccurrenceList.h\"\n\nclass CodeBreaker\n{\n    public:\n        CodeBreaker();\n        CodeBreaker(std::string&amp;, bool);\n        void testVectorOfElements(int);\n    private:\n        PunctuationOccurrenceList punctuation;\n        IntegerRing Z;\n        void initCharMap();\n        void makeNumericCodes();\n        int getNumericCodeFor(char) const;\n        std::map&lt;char, int&gt; charFrequencyMap;\n        std::vector&lt;IntegerRing::Element&gt; numericCodes;\n        std::string ciphertext, plaintext;\n        std::string cipherFilename;\n};\n\n#endif\n</code></pre>\n\n<p><em>CodeBreaker.cpp</em></p>\n\n<pre><code>#include \"CodeBreaker.h\"\n\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;algorithm&gt;\n\nCodeBreaker::CodeBreaker()\n    : Z(IntegerRing::IntegerRing(26)),\n        punctuation(PunctuationOccurrenceList::PunctuationOccurrenceList())\n{\n    // initialize charFrequencyMap\n    this-&gt;initCharMap();\n}\n\nCodeBreaker::CodeBreaker(std::string&amp; str, bool readFromFile)\n    : Z(IntegerRing::IntegerRing(26))\n{\n    // if reading from file\n    if (readFromFile)\n    {\n        // str is filename to read from \n        // open file specified by str\n        std::ifstream input(str.c_str());\n        std::string line;\n        // read contents to ciphertext\n        while (std::getline(input, line))\n        {\n            this-&gt;ciphertext += line + \"\\n\";\n        }\n        // close file\n        input.close();\n    }\n    // otherwise\n    else\n    {\n        // str is ciphertext itself\n        // write it to this-&gt;ciphertext\n        this-&gt;ciphertext = str;\n    }\n    // strip punctuation\n    this-&gt;punctuation = PunctuationOccurrenceList::PunctuationOccurrenceList(this-&gt;ciphertext);\n    // log numeric codes ('A' =&gt; 0, 'B' =&gt; 1, ... , 'Z' =&gt; 25)\n    this-&gt;makeNumericCodes();\n}\n\nvoid CodeBreaker::makeNumericCodes()\n{\n    std::cout &lt;&lt; \"this-&gt;ciphertext.size() == \" &lt;&lt; this-&gt;ciphertext.size() &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"this-&gt;numericCodes.capacity() == \" &lt;&lt; this-&gt;numericCodes.capacity() &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"this-&gt;numericCodes.max_size() == \" &lt;&lt; this-&gt;numericCodes.max_size() &lt;&lt; std::endl;\n    // if there isn't as many numeric codes as there are characters in ciphertext\n    while (this-&gt;numericCodes.size() &lt; this-&gt;ciphertext.size())\n    {\n        std::cout &lt;&lt; \"Pushing dummy Element to numericCodes...\\n\";\n        this-&gt;numericCodes.push_back(this-&gt;Z[0]); \n    }\n    // for every character in ciphertext\n    for (int j = 0; j &lt; this-&gt;ciphertext.size(); j++)\n    {\n        // if character's numerical code is not logged in numericCodes\n        int numericCode = this-&gt;getNumericCodeFor(ciphertext[j]);\n        if (numericCode != this-&gt;numericCodes[j].val())\n            // log it\n            this-&gt;numericCodes[j] = (IntegerRing::Element)this-&gt;Z[numericCode];\n\n    }\n    // while there are more numericCodes than characters in ciphertexts\n    while (this-&gt;numericCodes.size() &gt; this-&gt;ciphertext.size())\n        // remove last character\n        this-&gt;numericCodes.pop_back();\n}\n\nvoid CodeBreaker::testVectorOfElements(int size)\n{\n    // try to do what you did in makeNumericCodes with the vector\n    while (this-&gt;numericCodes.size() &lt; size)\n    {\n        this-&gt;numericCodes.push_back(this-&gt;Z[0]);\n    }\n}\n\nint CodeBreaker::getNumericCodeFor(char c) const\n{\n    // if character is in ['A', 'Z']\n    if ((c &gt;= 'A') &amp;&amp; (c &lt;= 'Z'))\n        // return its int value minus 'A'\n        return (int)(c - 'A');\n    // otherwise, if it is in ['a', 'z']\n    if ((c &gt;= 'a') &amp;&amp; (c &lt;= 'z'))\n        // return its int value minus 'a'\n        return (int)(c - 'a');\n    std::cout &lt;&lt; \"invalid character: \" &lt;&lt; c &lt;&lt; std::endl;\n    return -1;\n}\n\nvoid CodeBreaker::initCharMap()\n{\n    for (char c = 'A'; c &lt;= 'Z'; c++)\n    {\n        this-&gt;charFrequencyMap[c] = 0;\n    }\n}\n</code></pre>\n\n<p><em>main.cpp</em></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n#include \"CodeBreaker.h\"\n//#include \"IntegerRing.h\"\n\n\nusing namespace std;\n\nint main()\n{\n    bool testInClass = true;\n    if (testInClass)\n    {\n        string str = \"I'm plaintext, but deal with me anyways, because this is mock code.\";\n        CodeBreaker c(str, false);      \n        /*CodeBreaker d;\n        d.testVectorOfElements(64);*/\n    }\n    else\n    {\n        vector&lt;IntegerRing::Element&gt; a;\n        IntegerRing Z(26);\n        cout &lt;&lt; \"a.capacity == \" &lt;&lt; a.capacity() &lt;&lt; endl;\n        while (a.size() &lt; 2400)\n        {\n            a.push_back(Z[0]);\n        }\n        cout &lt;&lt; \"a.size() == \" &lt;&lt; a.size() &lt;&lt; endl;\n        for (int j = 0; j &lt; 26; j++)\n        {\n            cout &lt;&lt; a[j] &lt;&lt; \" \";\n        }\n        cout &lt;&lt; endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p><code>Array</code> is simply a DIY-<code>vector</code> that I had to write years ago for a data-structures class. I used it instead of <code>vector</code> for precisely the problem I am having here. (Problem-ception?)</p>\n\n<p>All the code is available <a href=\"https://github.com/MikeWarren2014/IntegerRing\" rel=\"nofollow noreferrer\">here</a>, and the question is if I should have used <code>new</code> for when I assign those pointers? When <code>IntegerRing</code> is created, it tries creating <code>IntegerRing::Elements</code>, to which it passes a pointer to itself (out of necessity: the mathematical definition of ring requires it be equipped with addition and multiplication, and elements of that mathematical structure use that operator). </p>\n"}, {"tags": ["c++", "wpf", "winapi"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1473886988, "post_id": 39499578, "comment_id": 66316773, "body": "I dunno but you have a memory leak here: <code>LPWSTR windowName = new TCHAR[256];</code>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1473887620, "post_id": 39499578, "comment_id": 66317030, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ee684009.aspx\" rel=\"nofollow noreferrer\">UI Automation</a> is probably a better solution, even though we don&#39;t know, what you are really trying to accomplish."}, {"owner": {"reputation": 1824, "user_id": 79853, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/16389192b36a941de0d6ae7224277ea8?s=128&d=identicon&r=PG", "display_name": "Joel ", "link": "https://stackoverflow.com/users/79853/joel"}, "edited": false, "score": 0, "creation_date": 1473888611, "post_id": 39499578, "comment_id": 66317419, "body": "Here is an attempt to summarize what I&#39;m doing:There is an application that is capturing the video output of a few applications (not all running on the same machine)  and is blending them together. When the window is captured it can no longer receive mouse and touch messages. I wanted the application that is managing all of these to route those messages to the WPF application. This is already working for the Win32 apps whose windows are captured, just not the WPF."}], "answers": [{"comments": [{"owner": {"reputation": 1824, "user_id": 79853, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/16389192b36a941de0d6ae7224277ea8?s=128&d=identicon&r=PG", "display_name": "Joel ", "link": "https://stackoverflow.com/users/79853/joel"}, "edited": false, "score": 0, "creation_date": 1473888873, "post_id": 39499955, "comment_id": 66317521, "body": "The messages I plan on sending will be messages such as WM_KEYDOWN that I think the WPF application will already be able to handle with is regular key and mouse methods. I am for now trying this against a test application in which I have overridden the message pump handler so that I can see what&#39;s going on. It&#39;s processing Windows messages, but not of the messages that I send are getting through to it.    Will take a look at EasyHook though."}, {"owner": {"reputation": 2522, "user_id": 1069178, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9715ec14e38be239dbd2e7b868bd0927?s=128&d=identicon&r=PG", "display_name": "Steztric", "link": "https://stackoverflow.com/users/1069178/steztric"}, "reply_to_user": {"reputation": 1824, "user_id": 79853, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/16389192b36a941de0d6ae7224277ea8?s=128&d=identicon&r=PG", "display_name": "Joel ", "link": "https://stackoverflow.com/users/79853/joel"}, "edited": false, "score": 1, "creation_date": 1473889047, "post_id": 39499955, "comment_id": 66317589, "body": "Yes do check out EasyHook. We used it to force a FORTRAN application into &#39;silent mode&#39; by redirecting calls that spawned status dialogues to stubs. Worked a treat."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 1824, "user_id": 79853, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/16389192b36a941de0d6ae7224277ea8?s=128&d=identicon&r=PG", "display_name": "Joel ", "link": "https://stackoverflow.com/users/79853/joel"}, "edited": false, "score": 3, "creation_date": 1473890019, "post_id": 39499955, "comment_id": 66317947, "body": "@Joel: <i>&quot;I plan on sending will be messages such as WM_KEYDOWN&quot;</i> - <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20050530-11/?p=35513/\" rel=\"nofollow noreferrer\">You can\u2019t simulate keyboard input with PostMessage</a>. Use UI Automation. EasyHook won&#39;t be of any help either. You aren&#39;t trying to filter incoming messages. You are trying to fake input."}], "tags": [], "owner": {"reputation": 2522, "user_id": 1069178, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9715ec14e38be239dbd2e7b868bd0927?s=128&d=identicon&r=PG", "display_name": "Steztric", "link": "https://stackoverflow.com/users/1069178/steztric"}, "is_accepted": false, "score": 1, "last_activity_date": 1474027095, "last_edit_date": 1474027095, "creation_date": 1473888712, "answer_id": 39499955, "question_id": 39499578, "link": "https://stackoverflow.com/questions/39499578/injecting-messages-into-wpf-application-message-pump/39499955#39499955", "title": "Injecting Messages into WPF Application Message Pump", "body": "<p>Unfortunately you need to explicitly override the <code>WndProc</code> method in your WPF application like below in order to receive Windows messages - see <a href=\"https://social.msdn.microsoft.com/Forums/vstudio/en-US/6b97a6de-0480-4339-8ed0-cb7cdb27bd83/wpf-and-wndproc-question?forum=wpf\" rel=\"nofollow\">here</a>.</p>\n\n<pre><code>HwndSource source = HwndSource.FromHwnd(new WindowInteropHelper(this).Handle);\nsource.AddHook(new HwndSourceHook(WndProc));\n</code></pre>\n\n<p>Obviously you can't do this without recompiling the source, so you need another way.</p>\n\n<hr>\n\n<p><strong>Edited</strong></p>\n\n<p>I previously suggested <a href=\"https://easyhook.github.io/\" rel=\"nofollow\">EasyHook</a> to inject a redirect from the original method handler to some code of your choice. As comments rightly stated, this would not solve the problem as the original application would still not receive Windows messages. Suggestions to use UI Automation are welcomed.</p>\n"}, {"tags": [], "owner": {"reputation": 1824, "user_id": 79853, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/16389192b36a941de0d6ae7224277ea8?s=128&d=identicon&r=PG", "display_name": "Joel ", "link": "https://stackoverflow.com/users/79853/joel"}, "is_accepted": true, "score": 1, "last_activity_date": 1492187715, "last_edit_date": 1492187715, "creation_date": 1474899758, "answer_id": 39705412, "question_id": 39499578, "link": "https://stackoverflow.com/questions/39499578/injecting-messages-into-wpf-application-message-pump/39705412#39705412", "title": "Injecting Messages into WPF Application Message Pump", "body": "<p>I want to put a more detailed response here but being short on time I'm putting a summary here. I did find a few others that were looking to do the same thing. </p>\n\n<p>The WPF classes that handle windows messages do additional checks. If a mouse message is received instead of processing the information in the mouse message WPF will make another call to query the mouse cursor to see where it really is, it will check to see if it really has focus, and so on (similar checks are done for some other input messages). If any of these checks fail according to the comments in the WPF class libraries it is assumed that some condition occurred that caused the WPF to get the message by mistake. I was able to get things working for my scenario by ensuring the WPF application had focus.</p>\n\n<p>Additionally I had to do some things that I would not suggest that any one ever do, such as making a proxy User32.dll for overriding some of the WPF behaviours. This worked for my purposes but only works on a single operating system version. Luckily my target machine will not be connected to the Internet and needs to perform it's task for a year or so and won't receive any OS updates in it's isolated environment; a Windows Update could easily kill this <em>solution</em>. </p>\n"}], "owner": {"reputation": 1824, "user_id": 79853, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/16389192b36a941de0d6ae7224277ea8?s=128&d=identicon&r=PG", "display_name": "Joel ", "link": "https://stackoverflow.com/users/79853/joel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 769, "favorite_count": 0, "accepted_answer_id": 39705412, "answer_count": 2, "score": 3, "last_activity_date": 1492187715, "creation_date": 1473886848, "last_edit_date": 1473888721, "question_id": 39499578, "link": "https://stackoverflow.com/questions/39499578/injecting-messages-into-wpf-application-message-pump", "title": "Injecting Messages into WPF Application Message Pump", "body": "<p>I've got some pre-compiled WPF applications that I need to control without recompiling them by sending various messages (ex:WM_POINTERMOVE, WM_KEYDOWN, so on). The method of control that I have attempted was to inject messages into the applications message pump.  As a test I attempted this with some other Win32 applications by getting the windows handle for the application and then using <em>SendMessage</em> to send messages. </p>\n\n<pre><code>BOOL CALLBACK EnumWindowsProc(\n_In_ HWND   hwnd,\n_In_ LPARAM lParam\n)\n{\n    LPWSTR windowName = new TCHAR[256];\n    GetWindowText(hwnd, windowName, 256);\n    std::wstring windowNameString(windowName);\n    int position = windowNameString.find(std::wstring(L\"MyApplicationWindowName\"));\n    if (position &gt; -1) {\n        hTargetWindow = hwnd;\n        delete windowName;\n        return FALSE;//stop enumerating windows\n    }\n    delete windowName;\n    return TRUE;\n}\n\n .....\n EnumWindows(EnumWindowsProc, NULL);;\n SendMessage(hTargetWindow, MY_MESSAGE, 0, 0);\n</code></pre>\n\n<p>I retrieved the HWND for the application using <em>EnumWindows</em> (that works just fine). Then I use <em>SendMessage</em> and <em>PostMessage</em> to send my messages. While other applications respond to this WPF apps dont. As another test I made a WPF application and added some code so I could set a break point when it received a certain message. </p>\n\n<pre><code>ComponentDispatcher.ThreadFilterMessage += (ref MSG msg, ref bool handled) =&gt;\n{\n    if(msg.message == MY_MESSAGE)\n        Debug.WriteLine(\"break\");\n};\n</code></pre>\n\n<p>The breakpoint is never hit indicating the messages are not making their way into the message pump. Attempting the same thing in other types of applications yield success. What am I doing wrong with injecting these messages. </p>\n"}, {"tags": ["c++", "linker-errors"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1473886169, "post_id": 39499394, "comment_id": 66316399, "body": "can you post the linker output, not only the error?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4407569"}, "edited": false, "score": 1, "creation_date": 1473886322, "post_id": 39499394, "comment_id": 66316472, "body": "You might want to add a tag for the library you are trying to use, I don&#39;t know what <code>iViewNG-Core.h</code> is. Further sidenode: In C++ code you should be using <code>#include&lt;cstdio&gt;</code> (or better drop it) and <code>std::cout &lt;&lt;</code> instead of <code>printf</code>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1473886344, "post_id": 39499394, "comment_id": 66316485, "body": "<i>Since this a linker issue, where am I going wrong?</i> -- Well, you don&#39;t start looking at header files, since header files have nothing to do with the linker -- header files are only used in the compile process, and your modules compiled successfully.  You need to specify to the linker where those functions you&#39;re calling are located, probably in an external library,"}, {"owner": {"reputation": 388, "user_id": 2127561, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gZ8h6.jpg?s=128&g=1", "display_name": "Rakshit Kothari", "link": "https://stackoverflow.com/users/2127561/rakshit-kothari"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1473886549, "post_id": 39499394, "comment_id": 66316582, "body": "@PaulMcKenzie I did point the same to the linker in the additional library directories. I basically added the path to the SMI library provided by them."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1473886619, "post_id": 39499394, "comment_id": 66316620, "body": "@RakshitKothari -- Nope, you need to specify the name of the libraries, not just the directory where they&#39;re located."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1473886624, "post_id": 39499394, "comment_id": 66316622, "body": "@RakshitKothari But did you also add an option to actually <b>link</b> against that library? (With g++, this would be <code>-lname</code> to link against <code>libname.a</code> or <code>libname.so</code>)"}, {"owner": {"reputation": 388, "user_id": 2127561, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gZ8h6.jpg?s=128&g=1", "display_name": "Rakshit Kothari", "link": "https://stackoverflow.com/users/2127561/rakshit-kothari"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1473886641, "post_id": 39499394, "comment_id": 66316630, "body": "@Jean-Fran&#231;oisFabre Just did. Thanks for helping me."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1473886828, "post_id": 39499394, "comment_id": 66316713, "body": "@RakshitKothari -- Look at the linker output. You would expect to see your library name there, but from looking at it, I don&#39;t see any names other than the standard ones like &quot;odbc32.lib&quot;, &quot;uuid.lib&quot;, etc."}, {"owner": {"reputation": 388, "user_id": 2127561, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gZ8h6.jpg?s=128&g=1", "display_name": "Rakshit Kothari", "link": "https://stackoverflow.com/users/2127561/rakshit-kothari"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1473886898, "post_id": 39499394, "comment_id": 66316745, "body": "@DanielJour and Paul - Well I have 36 DLL files in the lib folder. Should I individually add them in the additional library directory? I know, it might sound like you&#39;re trying to talk to a chimp but I don&#39;t know any of this :("}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1473886941, "post_id": 39499394, "comment_id": 66316759, "body": "@RakshitKothari -- No, DLL&#39;s are only used when your program is running.  Where are the &quot;.LIB&quot; files?  I believe you need to get familiar with the entire build and run process.  1) Compiling , 2) Linking, and 3) Running.  Compiling only creates the object files, the linker links these object files together to get the final executable.  Once the executable exists, then running the executable requires the DLL&#39;s it is dependent on."}, {"owner": {"reputation": 388, "user_id": 2127561, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gZ8h6.jpg?s=128&g=1", "display_name": "Rakshit Kothari", "link": "https://stackoverflow.com/users/2127561/rakshit-kothari"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1473887134, "post_id": 39499394, "comment_id": 66316827, "body": "Yes, you right @PaulMcKenzie, could you point me to a website that can teach me the same? I am not familiar with this at all."}, {"owner": {"reputation": 388, "user_id": 2127561, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gZ8h6.jpg?s=128&g=1", "display_name": "Rakshit Kothari", "link": "https://stackoverflow.com/users/2127561/rakshit-kothari"}, "edited": false, "score": 0, "creation_date": 1473887176, "post_id": 39499394, "comment_id": 66316847, "body": "Turns out I don&#39;t have any .lib files. This is weird. The folks from SMI (it&#39;s an Eye Tracking company) provided an SDK with no .lib file."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1473887258, "post_id": 39499394, "comment_id": 66316883, "body": "@RakshitKothari - OK, now that is a separate question that hopefully there is a link to on SO.  How to build and run an application that has no .LIB file, and only a DLL.  Short answer -- <code>LoadLibrary</code> and <code>GetProcAddress</code>.  Other answer -- build a LIB file from the DLL and use that (won&#39;t go into details)."}, {"owner": {"reputation": 388, "user_id": 2127561, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gZ8h6.jpg?s=128&g=1", "display_name": "Rakshit Kothari", "link": "https://stackoverflow.com/users/2127561/rakshit-kothari"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1473977704, "post_id": 39499394, "comment_id": 66358036, "body": "@PaulMcKenzie I used the following code  #pragma comment (lib, &quot;libiViewNG-LibCore.lib&quot;)"}, {"owner": {"reputation": 388, "user_id": 2127561, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gZ8h6.jpg?s=128&g=1", "display_name": "Rakshit Kothari", "link": "https://stackoverflow.com/users/2127561/rakshit-kothari"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1473978044, "post_id": 39499394, "comment_id": 66358140, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/123488/discussion-between-rakshit-kothari-and-paulmckenzie\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 388, "user_id": 2127561, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gZ8h6.jpg?s=128&g=1", "display_name": "Rakshit Kothari", "link": "https://stackoverflow.com/users/2127561/rakshit-kothari"}, "edited": false, "score": 0, "creation_date": 1473977616, "post_id": 39501840, "comment_id": 66358009, "body": "I used the following code:  #pragma comment (lib, &quot;libiViewNG-LibCore.lib&quot;)"}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "reply_to_user": {"reputation": 388, "user_id": 2127561, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gZ8h6.jpg?s=128&g=1", "display_name": "Rakshit Kothari", "link": "https://stackoverflow.com/users/2127561/rakshit-kothari"}, "edited": false, "score": 0, "creation_date": 1474041375, "post_id": 39501840, "comment_id": 66385478, "body": "@RakshitKothari Is that the LIB file you need?  ...I&#39;m not really familiar with iView, truth be told, i just spent a good deal of my free time learning how to demangle MSVC decorated symbols."}], "tags": [], "owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1473902091, "creation_date": 1473902091, "answer_id": 39501840, "question_id": 39499394, "link": "https://stackoverflow.com/questions/39499394/lnk2019-unresolved-external-symbol-imp-in-the-obj-file-in-line-1/39501840#39501840", "title": "LNK2019: Unresolved external symbol __imp__ in the .obj file in Line 1", "body": "<p>Examining the symbol <code>__imp__iView_GetLibraryVersion@4</code>, it can be broken into two chunkcs:</p>\n\n<ul>\n<li><code>__imp_</code>: This means <code>__declspec(dllimport)</code>.</li>\n<li><code>_iView_GetLibraryVersion@4</code>: This is the actual symbol, mangled as a C (or <code>extern \"C\"</code>) <code>__stdcall</code> symbol, where the parameters total 4 bytes in size.</li>\n</ul>\n\n<p>Considering this, and going by your code, the function causing the issue is likely:</p>\n\n<pre><code>extern \"C\" __declspec(dllimport) iViewRC __stdcall iView_GetLibraryVersion(iViewVersion*);\n</code></pre>\n\n<p>I would suggest checking that the LIB file for the DLL containing this function is being passed to either <code>cl</code> or <code>link</code> (in the former case, <code>cl</code> will pass it to <code>link</code> for you).</p>\n"}], "owner": {"reputation": 388, "user_id": 2127561, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gZ8h6.jpg?s=128&g=1", "display_name": "Rakshit Kothari", "link": "https://stackoverflow.com/users/2127561/rakshit-kothari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11093, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1473902091, "creation_date": 1473885994, "last_edit_date": 1473886457, "question_id": 39499394, "link": "https://stackoverflow.com/questions/39499394/lnk2019-unresolved-external-symbol-imp-in-the-obj-file-in-line-1", "title": "LNK2019: Unresolved external symbol __imp__ in the .obj file in Line 1", "body": "<p>I'm not sure what's going wrong. I'll describe the problem, followed by my understanding of what's going on. It's a simple code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include \"stdafx.h\"\n#include &lt;iViewNG-Core.h&gt;\n\nint main(int argc, char ** args) {\n\n    iViewVersion version;\n    iViewRC rc = iView_GetLibraryVersion(&amp;version);\n\n    if (RC_NO_ERROR != rc)\n        printf(\"ERROR returned by iView_GetLibraryVersion(): %d\\n\", rc);\n\n    printf(\"The version of the libiViewNG is: %u.%u.%u.%u\\n\", version.major, version.minor, version.patch, version.build);\n\n    return 0;\n}\n</code></pre>\n\n<p>The error description: </p>\n\n<blockquote>\n  <p>Error LNK2019 unresolved external symbol\n  __imp__iView_GetLibraryVersion@4 referenced in function _main SMI_TrialTests  c:\\Users\\Rakshit\\documents\\visual studio 2015\\Projects\\SMI_TrialTests\\SMI_TrialTests\\SMI_TrialTests.obj </p>\n</blockquote>\n\n<p>I confirmed that the code is indeed reading iViewNG-Core.h because the auto-fill lets me use functions declared in the file. I did this by adding the lib and include directory correctly in the appropriate VC++ directories. Since this a linker issue, where am I going wrong? </p>\n\n<p>I am new to C++ and I know there are tons of duplicated LNK2019 questions but none of them seemed to solve my problem. </p>\n\n<p>Linker output:</p>\n\n<blockquote>\n  <p>/OUT:\"c:\\users\\rakshit\\documents\\visual studio\n  2015\\Projects\\SMI_TrialTests\\Debug\\SMI_TrialTests.exe\" /MANIFEST\n  /NXCOMPAT /PDB:\"c:\\users\\rakshit\\documents\\visual studio\n  2015\\Projects\\SMI_TrialTests\\Debug\\SMI_TrialTests.pdb\" /DYNAMICBASE\n  \"kernel32.lib\" \"user32.lib\" \"gdi32.lib\" \"winspool.lib\" \"comdlg32.lib\"\n  \"advapi32.lib\" \"shell32.lib\" \"ole32.lib\" \"oleaut32.lib\" \"uuid.lib\"\n  \"odbc32.lib\" \"odbccp32.lib\" /DEBUG /MACHINE:X86 /INCREMENTAL\n  /PGD:\"c:\\users\\rakshit\\documents\\visual studio\n  2015\\Projects\\SMI_TrialTests\\Debug\\SMI_TrialTests.pgd\"\n  /SUBSYSTEM:CONSOLE /MANIFESTUAC:\"level='asInvoker' uiAccess='false'\"\n  /ManifestFile:\"Debug\\SMI_TrialTests.exe.intermediate.manifest\"\n  /ERRORREPORT:PROMPT /NOLOGO /VERBOSE /LIBPATH:\"C:\\iView NG\n  SDK\\lib\\lib-Windows7-32\" /TLBID:1</p>\n</blockquote>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "edited": false, "score": 1, "creation_date": 1473885327, "post_id": 39499204, "comment_id": 66315986, "body": "What exactly is the problem? Are you getting the wrong output? An error?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 3, "creation_date": 1473885336, "post_id": 39499204, "comment_id": 66315990, "body": "You did not copy all of your <code>main()</code> so its going to be impossible explain the problem with the missing part."}, {"owner": {"reputation": 37, "user_id": 6832570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d400770df2883d9e791ff58cfa00830?s=128&d=identicon&r=PG&f=1", "display_name": "ReMaKe", "link": "https://stackoverflow.com/users/6832570/remake"}, "edited": false, "score": 0, "creation_date": 1473885435, "post_id": 39499204, "comment_id": 66316022, "body": "I&#39;m getting no errors . Just that it&#39;s not giving me the total. So when I get the five items and their prices , the prices will appear next to the names but no total , nor sales tax."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4407569"}, "edited": false, "score": 2, "creation_date": 1473885441, "post_id": 39499204, "comment_id": 66316025, "body": "If your <code>main</code> is ending where it is in your paste, then the problem is simply that you did not print them with <code>cout</code> as you did with the item list."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1473886513, "post_id": 39499204, "comment_id": 66316565, "body": "On a side note, what if you had 100 items, or 500 items.  Hopefully you wouldn&#39;t expect to write 100 or 500 <code>cin</code> and <code>cout</code> statements (what I&#39;m saying is that there are far better ways of writing the code without repeating the same things over and over again)."}, {"owner": {"reputation": 37, "user_id": 6832570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d400770df2883d9e791ff58cfa00830?s=128&d=identicon&r=PG&f=1", "display_name": "ReMaKe", "link": "https://stackoverflow.com/users/6832570/remake"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1473887468, "post_id": 39499204, "comment_id": 66316964, "body": "@PaulMcKenzie Yeah I definitely need to learn different ways , I&#39;ve literally just been coding for a few days,  there&#39;s so much more I need to learn . I&#39;ve just been watching a lot of videos , and finding random exercises to do , however just ordered the book programming , principles and practice using c++ so I&#39;ll read that and my computer science class starts soon as well, so I&#39;ll learn better ways, however , any suggestion is always welcomed. Thanks for the advice."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1473887626, "post_id": 39499204, "comment_id": 66317033, "body": "<b><i>I&#39;ve just been watching a lot of videos</i></b> That is where you went wrong! Get a c++ book from here: <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\" title=\"the definitive c book guide and list\">stackoverflow.com/questions/388242/&hellip;</a> You will not learn c++ from online videos or tutorials."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1473888004, "post_id": 39499204, "comment_id": 66317175, "body": "Consider using a structure to group item name and price.  Also consider using a container to hold more than one of these instances.  That allows you to use a loop which saves typing."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1473888103, "post_id": 39499204, "comment_id": 66317207, "body": "Now would be a good time to learn to use a <i>debugger</i>.  The debugger allows you to execute each statement, one at a time, and <i>watch</i> values of variables."}, {"owner": {"reputation": 37, "user_id": 6832570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d400770df2883d9e791ff58cfa00830?s=128&d=identicon&r=PG&f=1", "display_name": "ReMaKe", "link": "https://stackoverflow.com/users/6832570/remake"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1473888619, "post_id": 39499204, "comment_id": 66317425, "body": "@drescherjm Thanks for the link , the book that was voted as the &quot;best&quot; introductory book , that&#39;s actually the one I just recently got ."}, {"owner": {"reputation": 37, "user_id": 6832570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d400770df2883d9e791ff58cfa00830?s=128&d=identicon&r=PG&f=1", "display_name": "ReMaKe", "link": "https://stackoverflow.com/users/6832570/remake"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1473888680, "post_id": 39499204, "comment_id": 66317448, "body": "@ThomasMatthews I&#39;ll definitely look into your suggestions, and learn more about them."}], "answers": [{"tags": [], "owner": {"reputation": 504, "user_id": 2666055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57092afe3f28e0c12380253688b8ff05?s=128&d=identicon&r=PG", "display_name": "MikeThomas", "link": "https://stackoverflow.com/users/2666055/mikethomas"}, "is_accepted": false, "score": 2, "last_activity_date": 1473885457, "creation_date": 1473885457, "answer_id": 39499274, "question_id": 39499204, "link": "https://stackoverflow.com/questions/39499204/calculating-sales-tax-and-total/39499274#39499274", "title": "Calculating sales tax, and total", "body": "<p>I only see <code>cout</code> statements for the five prices, not for <code>saletax</code> or <code>grandtotal</code>, which would explain them not being displayed.</p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 6832570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d400770df2883d9e791ff58cfa00830?s=128&d=identicon&r=PG&f=1", "display_name": "ReMaKe", "link": "https://stackoverflow.com/users/6832570/remake"}, "edited": false, "score": 0, "creation_date": 1473886661, "post_id": 39499276, "comment_id": 66316639, "body": "Thanks for the help , though when I added that line , it displayed the &quot;total&quot; , and &quot;tax&quot; but didn&#39;t actually calculate them, however , looking at the way you wrote those codes, I just  added         <code>cout &lt;&lt; &quot;subtotal: &quot; &lt;&lt; price1 + price2 + price3 + price4 + price5;</code> But thank you so much"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "reply_to_user": {"reputation": 37, "user_id": 6832570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d400770df2883d9e791ff58cfa00830?s=128&d=identicon&r=PG&f=1", "display_name": "ReMaKe", "link": "https://stackoverflow.com/users/6832570/remake"}, "edited": false, "score": 0, "creation_date": 1473886759, "post_id": 39499276, "comment_id": 66316680, "body": "@ReMaKe How would anyone but you know what you added in code that you did not post? We can&#39;t possibly help with <code>main()</code> when you don&#39;t post the whole thing especially when the problem is in the part that is not posted."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1473887059, "post_id": 39499276, "comment_id": 66316798, "body": "<b><i>it displayed the &quot;total&quot; , and &quot;tax&quot; but didn&#39;t actually calculate them</i></b> The part of your <code>main()</code> that you posted calculates these!"}, {"owner": {"reputation": 37, "user_id": 6832570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d400770df2883d9e791ff58cfa00830?s=128&d=identicon&r=PG&f=1", "display_name": "ReMaKe", "link": "https://stackoverflow.com/users/6832570/remake"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1473887103, "post_id": 39499276, "comment_id": 66316816, "body": "@drescherjm I did post the whole thing. For some reason it wasn&#39;t displaying the calculated results until I put that extra line of code . But it&#39;s fine , with all the replies I got I was able to figure it out . Big thanks"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1473887139, "post_id": 39499276, "comment_id": 66316832, "body": "Then you are missing a <code>}</code> at the end of the code you posted since <code>main()</code> will not compile without it."}], "tags": [], "owner": {"reputation": 6032, "user_id": 4698611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2k0Rb.jpg?s=128&g=1", "display_name": "pr0gramist", "link": "https://stackoverflow.com/users/4698611/pr0gramist"}, "is_accepted": true, "score": 2, "last_activity_date": 1473885464, "creation_date": 1473885464, "answer_id": 39499276, "question_id": 39499204, "link": "https://stackoverflow.com/questions/39499204/calculating-sales-tax-and-total/39499276#39499276", "title": "Calculating sales tax, and total", "body": "<p>It is not being displayed, because you never print it.</p>\n\n<p>Add these line at the end of your main function and you will see it.</p>\n\n<pre><code>cout &lt;&lt; \"Total: \" &lt;&lt; grandtotal &lt;&lt; endl;\ncout &lt;&lt; \"Tax: \" &lt;&lt; saletax &lt;&lt; endl;\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 6832570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d400770df2883d9e791ff58cfa00830?s=128&d=identicon&r=PG&f=1", "display_name": "ReMaKe", "link": "https://stackoverflow.com/users/6832570/remake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4475, "favorite_count": 0, "accepted_answer_id": 39499276, "answer_count": 2, "score": -3, "last_activity_date": 1473885464, "creation_date": 1473885196, "last_edit_date": 1473885359, "question_id": 39499204, "link": "https://stackoverflow.com/questions/39499204/calculating-sales-tax-and-total", "title": "Calculating sales tax, and total", "body": "<p>I've been coding for a few days now and decided to take on an exercise. One which calculates the total of five items and calculates the tax. \nIn this particular exercise, I've managed to display the names of the items, and their prices , however, the sales tax and total aren't being displayed. I know this is a very basic problem, I've just been trying to get some hands on and learn, familiarize myself a bit more by trial and error. Can anyone pinpoint what I'm missing as far as the calculation part goes? Thanks advance.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nfloat tax = 0.07;\nstring item1,item2,item3,item4,item5;\nfloat price1,price2,price3,price4,price5;\n\nint main()\n{\ncout&lt;&lt;\" please enter the name of the first item \\n\";\ncin&gt;&gt; item1;\n\ncout&lt;&lt;\" please enter the name of second item \\n\";\ncin&gt;&gt; item2;\n\ncout&lt;&lt;\" plrease enter the name of the third item \\n\";\ncin&gt;&gt; item3;\n\ncout&lt;&lt;\" please enter the name of the fourth item \\n\";\ncin&gt;&gt; item4;\n\ncout&lt;&lt;\" please enter the name of the fifth item \\n\";\ncin&gt;&gt; item5;\n\ncout&lt;&lt;\" please enter the price for the first item \\n\";\ncin&gt;&gt; price1;\n\ncout&lt;&lt;\" please enter the price for the second item \\n\";\ncin&gt;&gt; price2;\n\ncout&lt;&lt;\" please enter the price for the third item \\n\";\ncin&gt;&gt; price3;\n\ncout&lt;&lt;\" please enter the price for the fourth item \\n\";\ncin&gt;&gt; price4;\n\ncout&lt;&lt;\" please enter the price for the fifth item \\n\";\ncin&gt;&gt; price5;\n\nfloat subtotal = 0;\nfloat saletax = 0;\nfloat grandtotal = 0;\n\nsubtotal = price1 + price2 + price3 + price4 + price5;\nsaletax = subtotal * tax;\ngrandtotal = subtotal + saletax;\n\ncout&lt;&lt;\"my shopping list \\n\";\ncout&lt;&lt;\"================\\n\";\n\ncout&lt;&lt;item1&lt;&lt;\"     \"&lt;&lt;\"$\"&lt;&lt;price1 &lt;&lt;endl;\ncout&lt;&lt;item2&lt;&lt;\"     \"&lt;&lt;\"$\"&lt;&lt;price2 &lt;&lt;endl;\ncout&lt;&lt;item3&lt;&lt;\"     \"&lt;&lt;\"$\"&lt;&lt;price3 &lt;&lt;endl;\ncout&lt;&lt;item4&lt;&lt;\"     \"&lt;&lt;\"$\"&lt;&lt;price4 &lt;&lt;endl;\ncout&lt;&lt;item5&lt;&lt;\"     \"&lt;&lt;\"$\"&lt;&lt;price5 &lt;&lt;endl;\n</code></pre>\n"}, {"tags": ["c++", "mingw", "mingw-w64"], "comments": [{"owner": {"reputation": 446, "user_id": 888624, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/392039c3c5ee1f883b68b52edf8413bf?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/888624/chris"}, "edited": false, "score": 0, "creation_date": 1473885048, "post_id": 39499083, "comment_id": 66315836, "body": "I don&#39;t know about mingw, but in gcc you can specify <code>-m64</code> or <code>-m32</code> to compile a 64-bit target on a 32-bit OS, and vice versa. The 32 bit version of the compiler is meant to be installed on a 32-bit architecture."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 6, "creation_date": 1473885144, "post_id": 39499083, "comment_id": 66315889, "body": "Dup of <a href=\"http://stackoverflow.com/questions/25582110/what-is-the-difference-between-mingw-mingw-w64-and-mingw-builds\" title=\"what is the difference between mingw mingw w64 and mingw builds\">stackoverflow.com/questions/25582110/&hellip;</a>?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 446, "user_id": 888624, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/392039c3c5ee1f883b68b52edf8413bf?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/888624/chris"}, "edited": false, "score": 0, "creation_date": 1473898363, "post_id": 39499083, "comment_id": 66320237, "body": "@ChrisStathis mingw-w64 requires separate binaries for 32bit and 64bit , it can&#39;t be toggled with a switch"}], "owner": {"reputation": 1, "user_id": 5460507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92464d56ca6a5f35d1a8e028736f8722?s=128&d=identicon&r=PG&f=1", "display_name": "Netherfail04", "link": "https://stackoverflow.com/users/5460507/netherfail04"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "closed_date": 1473888630, "answer_count": 0, "score": 0, "last_activity_date": 1473896620, "creation_date": 1473884714, "last_edit_date": 1473896620, "question_id": 39499083, "link": "https://stackoverflow.com/questions/39499083/whats-the-difference-between-mingw-and-mingw64", "closed_reason": "Duplicate", "title": "whats the difference between mingw and mingw64", "body": "<p>What's the difference between the 32 and 64 bit versions of these programs? I've seen other posts, but my question is: can 32 version compile for both bits, but mingw compiler has to be run on a 32 machine, or can the 32 bit one only compile for 32 bit machines and 64 bit only compile for 64 machines, but both can be installed on either 64 or 32? I may include a picture for better understanding of what I mean.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 6, "creation_date": 1473882444, "post_id": 39498512, "comment_id": 66314537, "body": "A picture may be worth a thousand words, but posting the code would be better."}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 4, "creation_date": 1473882507, "post_id": 39498512, "comment_id": 66314578, "body": "You&#39;re probably running off the end of a string and printing random garbage. But since you haven&#39;t shown any actual code (pictures of PART of the code are utterly useless), we can&#39;t help you."}, {"owner": {"reputation": 17, "user_id": 6588540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb7cf9814ececaafb5abf367ee332c5?s=128&d=identicon&r=PG&f=1", "display_name": "B Dumi", "link": "https://stackoverflow.com/users/6588540/b-dumi"}, "edited": false, "score": 0, "creation_date": 1473882530, "post_id": 39498512, "comment_id": 66314587, "body": "Well, as I&#39;ve said ( or forgot to mention): I&#39;ve figured it out already but oh well. I&#39;ll edit it now and put in code too."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1473882598, "post_id": 39498512, "comment_id": 66314615, "body": "Its called undefined behavior.  Once you go out of bounds on the array all bets are off."}, {"owner": {"reputation": 17, "user_id": 6588540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb7cf9814ececaafb5abf367ee332c5?s=128&d=identicon&r=PG&f=1", "display_name": "B Dumi", "link": "https://stackoverflow.com/users/6588540/b-dumi"}, "edited": false, "score": 0, "creation_date": 1473882787, "post_id": 39498512, "comment_id": 66314709, "body": "Ok I also get an error that says that my code is not formatted as proper code. I honestly don&#39;t even know what&#39;s going on anymore. I can&#39;t even paste it to one of my friends over Skype. It just simply doesn&#39;t send. I can&#39;t show the code"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1473883460, "post_id": 39498512, "comment_id": 66315040, "body": "You are probably <a href=\"http://stackoverflow.com/questions/3456138/this-program-sounds-the-bell\">listening the bell</a>..."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 6588540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb7cf9814ececaafb5abf367ee332c5?s=128&d=identicon&r=PG&f=1", "display_name": "B Dumi", "link": "https://stackoverflow.com/users/6588540/b-dumi"}, "edited": false, "score": 0, "creation_date": 1473882899, "post_id": 39498607, "comment_id": 66314771, "body": "Yeah I&#39;ve figured out what&#39;s going on. I just asked why the specific characters tho. I also get an error when trying to paste in the code. It says it&#39;s not properly formatted as code although it is since the compiler runs it (at least)"}, {"owner": {"reputation": 61, "user_id": 6827703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/838e174cf165be7170c7c21a247e7363?s=128&d=identicon&r=PG&f=1", "display_name": "Rabby", "link": "https://stackoverflow.com/users/6827703/rabby"}, "reply_to_user": {"reputation": 17, "user_id": 6588540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb7cf9814ececaafb5abf367ee332c5?s=128&d=identicon&r=PG&f=1", "display_name": "B Dumi", "link": "https://stackoverflow.com/users/6588540/b-dumi"}, "edited": false, "score": 0, "creation_date": 1473883407, "post_id": 39498607, "comment_id": 66315024, "body": "The characters are just garbage sitting at those locations, no telling what gets revealed ;)"}], "tags": [], "owner": {"reputation": 61, "user_id": 6827703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/838e174cf165be7170c7c21a247e7363?s=128&d=identicon&r=PG&f=1", "display_name": "Rabby", "link": "https://stackoverflow.com/users/6827703/rabby"}, "is_accepted": true, "score": 1, "last_activity_date": 1473882753, "creation_date": 1473882753, "answer_id": 39498607, "question_id": 39498512, "link": "https://stackoverflow.com/questions/39498512/strange-error-with-c-console-app-when-running-a-for-loop/39498607#39498607", "title": "Strange error with C++ console app when running a for loop", "body": "<p>I believe you're trying to access unallocated memory locations by keeping your loop condition y&lt;25 and hence getting the strange output. And please try to put in the code too when asking similar questions.</p>\n"}], "owner": {"reputation": 17, "user_id": 6588540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb7cf9814ececaafb5abf367ee332c5?s=128&d=identicon&r=PG&f=1", "display_name": "B Dumi", "link": "https://stackoverflow.com/users/6588540/b-dumi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "closed_date": 1474132298, "accepted_answer_id": 39498607, "answer_count": 1, "score": -3, "last_activity_date": 1473882753, "creation_date": 1473882395, "question_id": 39498512, "link": "https://stackoverflow.com/questions/39498512/strange-error-with-c-console-app-when-running-a-for-loop", "closed_reason": "Not suitable for this site", "title": "Strange error with C++ console app when running a for loop", "body": "<p>So I was messing around with the dimensions of an array, starting it with [25][25]. I've eventually found the best dimensions of it ([21][25]) but I've forgot to change the condition in the for loop which is displaying the array (Initially it was y&lt;25 and it had to be y&lt;21). The program ran just fine but there was a strange error. What the array was displaying was pretty strange and also it made sounds (the sound is very familiar, although I can't tell exactly what it is. I can guess it is the one you get when you try to open a shortcut which file's destination was deleted but I'm not very sure, as I've said very familiar tho.)<a href=\"https://i.stack.imgur.com/z6SrE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z6SrE.png\" alt=\"enter image description here\"></a> I have also uploaded a screenshot and you can see the error for yourself ( the 2 lines before the \"Process returned 0\" one). Any idea why these specific characters tho ( I mean a smiley face? come on.)?</p>\n"}, {"tags": ["c++", "parameters"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1473882921, "post_id": 39498501, "comment_id": 66314784, "body": "Do you often use <code>const volatile</code> objects? I have never seen any."}, {"owner": {"reputation": 17992, "user_id": 278326, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/29b774f602a4e39d45f5c4f142566f2b?s=128&d=identicon&r=PG", "display_name": "Arun", "link": "https://stackoverflow.com/users/278326/arun"}, "edited": false, "score": 1, "creation_date": 1473883231, "post_id": 39498501, "comment_id": 66314941, "body": "You might want to write a simple code generator."}, {"owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "edited": false, "score": 0, "creation_date": 1473883294, "post_id": 39498501, "comment_id": 66314968, "body": "I&#39;ve done something similar using macros."}, {"owner": {"reputation": 4596, "user_id": 3743145, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/680680d82143e4d33dc569913e5ef8c5?s=128&d=identicon&r=PG", "display_name": "kyb", "link": "https://stackoverflow.com/users/3743145/kyb"}, "reply_to_user": {"reputation": 17992, "user_id": 278326, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/29b774f602a4e39d45f5c4f142566f2b?s=128&d=identicon&r=PG", "display_name": "Arun", "link": "https://stackoverflow.com/users/278326/arun"}, "edited": false, "score": 0, "creation_date": 1473883702, "post_id": 39498501, "comment_id": 66315183, "body": "@Arun, KeithM, yes I believe I can do it via macros. May be it is possible via templates?"}, {"owner": {"reputation": 4596, "user_id": 3743145, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/680680d82143e4d33dc569913e5ef8c5?s=128&d=identicon&r=PG", "display_name": "kyb", "link": "https://stackoverflow.com/users/3743145/kyb"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1473883768, "post_id": 39498501, "comment_id": 66315210, "body": "@BoPersson, really never. But ..."}], "answers": [{"comments": [{"owner": {"reputation": 4596, "user_id": 3743145, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/680680d82143e4d33dc569913e5ef8c5?s=128&d=identicon&r=PG", "display_name": "kyb", "link": "https://stackoverflow.com/users/3743145/kyb"}, "edited": false, "score": 0, "creation_date": 1473950316, "post_id": 39498812, "comment_id": 66343629, "body": "Can exactly say what C++ std need this code? Any GCC extensions?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 4596, "user_id": 3743145, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/680680d82143e4d33dc569913e5ef8c5?s=128&d=identicon&r=PG", "display_name": "kyb", "link": "https://stackoverflow.com/users/3743145/kyb"}, "edited": false, "score": 0, "creation_date": 1473950388, "post_id": 39498812, "comment_id": 66343682, "body": "@kyb  as far as I can tell, I just used bog standard C++14.  There could be typos.  Yes, I missed a <code>friend</code> on <code>operator-&gt;*</code>.  Note the <code>(p-&gt;*value)()</code> syntax presumes you have already implemented <code>get_value</code> above: it is just syntactic sugar to call <code>get_value</code> for you (and I&#39;m not sure how sweet the sugar is)."}, {"owner": {"reputation": 4596, "user_id": 3743145, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/680680d82143e4d33dc569913e5ef8c5?s=128&d=identicon&r=PG", "display_name": "kyb", "link": "https://stackoverflow.com/users/3743145/kyb"}, "edited": false, "score": 0, "creation_date": 1474009082, "post_id": 39498812, "comment_id": 66366115, "body": "thank you for detailed answer, but it is not the same I want to achieve."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 3, "last_activity_date": 1473950418, "last_edit_date": 1473950418, "creation_date": 1473883569, "answer_id": 39498812, "question_id": 39498501, "link": "https://stackoverflow.com/questions/39498501/automaticly-add-cv-qualified-functions/39498812#39498812", "title": "Automaticly add CV-qualified functions", "body": "<p>If you are going to expose every reference to a variable, expose the variable.</p>\n\n<p>Now <code>p.value_</code> does exactly what you want.</p>\n\n<p>Barring that, the easiest way is to write:</p>\n\n<pre><code>template&lt; class A, class B &gt;\nusing same_test = std::enable_if_t&lt; std::is_same&lt; std::decay_t&lt;A&gt;, std::decay_t&lt;B&gt; &gt;{}, int&gt;\n</code></pre>\n\n<p>then inside the class write:</p>\n\n<pre><code>template&lt;class Self, same_test&lt;Self, Parameter&gt; =0&gt;\nfriend decltype(auto) get_value( Self&amp;&amp; self ) {\n  return decltype(self)(self).value_;\n}\n</code></pre>\n\n<p>now <code>get_value( p )</code> will return <code>p.value</code> with the right l/r/cv qualifications.</p>\n\n<p>If you don't like that syntax, I can provide you with <code>(p-&gt;*value)()</code>:</p>\n\n<pre><code>template&lt;class F&gt;\nstruct magic_method_ptr_t {\n  F f;\n  template&lt;class Lhs&gt;\n  friend auto operator-&gt;*(Lhs&amp;&amp; lhs, magic_method const&amp; m) {\n    return [&amp;](auto&amp;&amp;...args)-&gt;decltype(auto) {\n      return m.f( decltype(lhs)(lhs), decltype(args)(args)... );\n    };\n  }\n};\ntemplate&lt;class F&gt;\nmagic_method_ptr_t&lt;F&gt; magic_method_ptr( F f ) { return {std::move(f)}; }\n\nauto value = magic_method_ptr( [](auto&amp;&amp; x){ return get_value(decltype(x)(x)); }\n</code></pre>\n\n<p>Add this to the <code>get_value</code> case above, and <code>(p-&gt;*value)()</code> works.</p>\n\n<p>I cannot provide you with <code>p.value()</code> syntax, barring ugly macros.</p>\n"}, {"tags": [], "owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "is_accepted": false, "score": 2, "last_activity_date": 1473884217, "creation_date": 1473884217, "answer_id": 39498951, "question_id": 39498501, "link": "https://stackoverflow.com/questions/39498501/automaticly-add-cv-qualified-functions/39498951#39498951", "title": "Automaticly add CV-qualified functions", "body": "<p>Another solution could be with the usage of macros. Maybe is less elegant, but it's very simple, clear and powerful.</p>\n\n<p>You may define a macro simply taking the member variable name and writing each getter (you can explode that with setter and other utilities as well).</p>\n\n<pre><code>/// @param X is the variable name\n/// @param Y is the get name. The result will be get_##Y\n#define create_getters(X, Y) decltype(X)&amp; get_##Y() {   \\\n    return this-&gt;X; \\\n  } \\\n  const decltype(X)&amp; get_##Y() const { \\\n    return this-&gt;X; \\\n  }\n\n// Example class\nclass Foo {\n  std::string m_data;\n\n public:\n  // expose m_data as get_Data()\n  create_getters(m_data, Data);  // Actually you don't need ; here\n};\n\nint main(int argc, char *argv[]) {\n  Foo f;\n  auto&amp;&amp; r = f.get_Data();  // ref\n  auto&amp;&amp; cr = static_cast&lt;const Foo&amp;&gt;(f).get_Data();  // const-ref\n\n  return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4596, "user_id": 3743145, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/680680d82143e4d33dc569913e5ef8c5?s=128&d=identicon&r=PG", "display_name": "kyb", "link": "https://stackoverflow.com/users/3743145/kyb"}, "edited": false, "score": 0, "creation_date": 1473958922, "post_id": 39499362, "comment_id": 66348941, "body": "Ugly. but works. Simply as C. Fastest solution as for me. I don&#39;t like it, but use. Thanks."}], "tags": [], "owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "is_accepted": true, "score": 1, "last_activity_date": 1473885826, "creation_date": 1473885826, "answer_id": 39499362, "question_id": 39498501, "link": "https://stackoverflow.com/questions/39498501/automaticly-add-cv-qualified-functions/39499362#39499362", "title": "Automaticly add CV-qualified functions", "body": "<p>Yes, you could use macro, but I can't see any use of such:</p>\n\n<pre><code>#define IDK_WHY(returnType, functionName, functionArgs, functionBody) \\\n                   returnType functionName functionArgs                functionBody \\\n    volatile       returnType functionName functionArgs volatile       functionBody \\\n    const          returnType functionName functionArgs const          functionBody \\\n    const volatile returnType functionName functionArgs volatile const functionBody\n\nclass Parameter\n{\n    using T = int; //for testing, dunno what is T in your code\nprivate:\n    T value_;\n\npublic:\n    // note you can't use comma in last argument, it would require more complex macro\n    IDK_WHY(T&amp;, value, (), { return value_;}) //done\n};\n</code></pre>\n"}], "owner": {"reputation": 4596, "user_id": 3743145, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/680680d82143e4d33dc569913e5ef8c5?s=128&d=identicon&r=PG", "display_name": "kyb", "link": "https://stackoverflow.com/users/3743145/kyb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 39499362, "answer_count": 3, "score": 2, "last_activity_date": 1473950418, "creation_date": 1473882339, "question_id": 39498501, "link": "https://stackoverflow.com/questions/39498501/automaticly-add-cv-qualified-functions", "title": "Automaticly add CV-qualified functions", "body": "<p>I have next class</p>\n\n<pre><code>class Parameter\n{\nprivate:\n    T value_;\n\npublic:\n    // Get\n    T&amp; value()                                 { return value_; }\n    volatile T&amp; value() volatile               { return value_; }\n    const T&amp; value() const                     { return value_; }\n    const volatile T&amp; value() volatile const   { return value_; }\n}\n</code></pre>\n\n<p>How can I minimize number of lines, amount of code. I want to write once <code>T&amp; value()</code> and achieve CV-qualified versions automatically. Possible?</p>\n"}, {"tags": ["c++", "cmake", "uwp"], "comments": [{"owner": {"reputation": 1962, "user_id": 5730046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fbe3450d89426f0ecbfd391d9c4a6f0?s=128&d=identicon&r=PG&f=1", "display_name": "Jackie", "link": "https://stackoverflow.com/users/5730046/jackie"}, "edited": false, "score": 0, "creation_date": 1473994459, "post_id": 39498371, "comment_id": 66361663, "body": "Is your intention is to add the resource files in a resource folder? Try using this: file(COPY &quot;[your source file/folder]&quot; DESTINATION &quot;[your destination folder]&quot;)"}, {"owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "reply_to_user": {"reputation": 1962, "user_id": 5730046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fbe3450d89426f0ecbfd391d9c4a6f0?s=128&d=identicon&r=PG&f=1", "display_name": "Jackie", "link": "https://stackoverflow.com/users/5730046/jackie"}, "edited": false, "score": 1, "creation_date": 1474028738, "post_id": 39498371, "comment_id": 66377175, "body": "no, I think you&#39;ve misunderstood the question. I&#39;ve updated it to be very clear that it is the structure of the project, not the location on disk that I&#39;m trying to fix."}, {"owner": {"reputation": 1962, "user_id": 5730046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fbe3450d89426f0ecbfd391d9c4a6f0?s=128&d=identicon&r=PG&f=1", "display_name": "Jackie", "link": "https://stackoverflow.com/users/5730046/jackie"}, "edited": false, "score": 0, "creation_date": 1474264035, "post_id": 39498371, "comment_id": 66442610, "body": "I&#39;ve updated my answer."}, {"owner": {"reputation": 2297, "user_id": 582834, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f579ec3a675a211064ae45bfbab907f7?s=128&d=identicon&r=PG", "display_name": "Ricard P&#233;rez del Campo", "link": "https://stackoverflow.com/users/582834/ricard-p%c3%a9rez-del-campo"}, "edited": false, "score": 1, "creation_date": 1503347221, "post_id": 39498371, "comment_id": 78567915, "body": "Did you find a proper solution for this? I am facing the same problem... Thanks."}, {"owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "edited": false, "score": 0, "creation_date": 1503421044, "post_id": 39498371, "comment_id": 78604544, "body": "It works for me now, although I didn&#39;t track what fixed it. I upgraded my version of CMake from 3.6 to 3.8, which may have been it. I also added VS_DEPLOYMENT_CONTENT=1 for all these items, but removing that now doesn&#39;t reproduce the original bug for me."}], "answers": [{"comments": [{"owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "edited": false, "score": 0, "creation_date": 1474384562, "post_id": 39523135, "comment_id": 66504057, "body": "Your proposed change won&#39;t fix the issue. CMake interprets strings as lists, as long as they are semicolon delimited, so passing it as a list or string makes no difference."}, {"owner": {"reputation": 1962, "user_id": 5730046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fbe3450d89426f0ecbfd391d9c4a6f0?s=128&d=identicon&r=PG&f=1", "display_name": "Jackie", "link": "https://stackoverflow.com/users/5730046/jackie"}, "reply_to_user": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "edited": false, "score": 0, "creation_date": 1474384858, "post_id": 39523135, "comment_id": 66504248, "body": "@MuertoExcobito, I was referring to this file <a href=\"https://github.com/wpbest/cmake-win-store-app/blob/master/CMakeLists.txt\" rel=\"nofollow noreferrer\">github.com/wpbest/cmake-win-store-app/blob/master/&hellip;</a>, line 99, and I see using semicolon or not does make a difference."}, {"owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "edited": false, "score": 0, "creation_date": 1474388130, "post_id": 39523135, "comment_id": 66506499, "body": "To give you the benefit of the doubt, I tried it, and as predicted it makes no difference."}], "tags": [], "owner": {"reputation": 1962, "user_id": 5730046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fbe3450d89426f0ecbfd391d9c4a6f0?s=128&d=identicon&r=PG&f=1", "display_name": "Jackie", "link": "https://stackoverflow.com/users/5730046/jackie"}, "is_accepted": false, "score": -1, "last_activity_date": 1474264016, "last_edit_date": 1474264016, "creation_date": 1473994641, "answer_id": 39523135, "question_id": 39498371, "link": "https://stackoverflow.com/questions/39498371/cmake-uwp-resources-and-source-group/39523135#39523135", "title": "CMake + UWP resources and source_group", "body": "<p>I think you're doing everything right.</p>\n\n<p>However, there's one little problem in your code, instead of</p>\n\n<pre><code>source_group(\"Resource Files\" FILES \"${RESOURCE_FILES}\")\n</code></pre>\n\n<p>It should be</p>\n\n<pre><code>source_group(\"Resource Files\" FILES ${RESOURCE_FILES})\n</code></pre>\n\n<p>Notice the <strong>\"\"</strong> you have around RESOURCE_FILES that makes it fail to work.</p>\n\n<p>If your intention is to put the resource files into some resource folder?</p>\n\n<p>You can try using the following commands,</p>\n\n<pre><code>file(COPY \"[your source file/folder]\" DESTINATION \"[your destination folder]\"\nfile(GLOB asset_files \"[your destination folder]\")\nsource_group(\"assets\" FILES ${asset_files})\n</code></pre>\n\n<p>Let me know if it works for you.</p>\n"}], "owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 414, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1474264016, "creation_date": 1473881844, "last_edit_date": 1474028699, "question_id": 39498371, "link": "https://stackoverflow.com/questions/39498371/cmake-uwp-resources-and-source-group", "title": "CMake + UWP resources and source_group", "body": "<p>I have successfully setup my project to build a UWP application using CMake. However, when dealing with resources, it appears that they need to be added as sources to the <code>add_executable</code> command, as well as set as <code>RESOURCE</code> in the target properties. </p>\n\n<p>All the resource files have been copied to their desired locations on disk. However, when I generate the projects, all the resource files end up in the root folder of the project structure. I've tried adding the <code>source_group</code> command, similar to what I do for the .cpp/.h sources (which go under a \"Source Files\" folder), but this seems to have no effect. Here's the relevant portion from my CMake (using CMake 3.6.1):</p>\n\n<pre><code>    set(ResourceFiles \"Package.appxmanifest\" \"Logo.png\" ... etc)\n    source_group(\"Resource Files\" FILES \"${ResourceFiles}\")\n    add_executable(MyExe ${projectSources} ${ResourceFiles})\n    set_target_properties(MyExe PROPERTIES RESOURCE \"${ResourceFiles}\")\n</code></pre>\n\n<p>Is this possible, or am I doing something incorrectly?</p>\n"}, {"tags": ["c++", "c++11", "ofstream"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1473882020, "post_id": 39498344, "comment_id": 66314339, "body": "<code>close</code> doesn&#39;t take any parameters. Where are you doing your research? (Wherever it is, go <a href=\"http://en.cppreference.com/w/\" rel=\"nofollow noreferrer\">here</a> instead.)"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1473882500, "post_id": 39498344, "comment_id": 66314569, "body": "The constructor opened the file. There&#39;s no need for the call to <code>file.open()</code>. The destructor will close the file; there&#39;s no need for the call to <code>file.close()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1473882063, "post_id": 39498428, "comment_id": 66314350, "body": "Better yet, remove the line altogether."}, {"owner": {"reputation": 5551, "user_id": 1683161, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d54009af893277619337f3bfc8a589cf?s=128&d=identicon&r=PG", "display_name": "rainer", "link": "https://stackoverflow.com/users/1683161/rainer"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1473882128, "post_id": 39498428, "comment_id": 66314393, "body": "True, I&#39;ll expand the answer. Thanks!"}, {"owner": {"reputation": 11, "user_id": 6832490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cb1cc1b9112242aa339f57cbf09d761?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Berger", "link": "https://stackoverflow.com/users/6832490/sam-berger"}, "edited": false, "score": 0, "creation_date": 1474038080, "post_id": 39498428, "comment_id": 66383437, "body": "Thanks! Follow-up question, since I haven&#39;t specified a location for that file, where does it look for it? In the same folder as the .cpp itself?&gt;"}, {"owner": {"reputation": 5551, "user_id": 1683161, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d54009af893277619337f3bfc8a589cf?s=128&d=identicon&r=PG", "display_name": "rainer", "link": "https://stackoverflow.com/users/1683161/rainer"}, "reply_to_user": {"reputation": 11, "user_id": 6832490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cb1cc1b9112242aa339f57cbf09d761?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Berger", "link": "https://stackoverflow.com/users/6832490/sam-berger"}, "edited": false, "score": 0, "creation_date": 1474039255, "post_id": 39498428, "comment_id": 66384167, "body": "@SamBerger In the application&#39;s working directory, ie. the directory you started the application from."}, {"owner": {"reputation": 5551, "user_id": 1683161, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d54009af893277619337f3bfc8a589cf?s=128&d=identicon&r=PG", "display_name": "rainer", "link": "https://stackoverflow.com/users/1683161/rainer"}, "reply_to_user": {"reputation": 11, "user_id": 6832490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cb1cc1b9112242aa339f57cbf09d761?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Berger", "link": "https://stackoverflow.com/users/6832490/sam-berger"}, "edited": false, "score": 0, "creation_date": 1474039493, "post_id": 39498428, "comment_id": 66384304, "body": "@SamBerger BTW, if the answer solved your problem, you can <a href=\"https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\">accept</a> it."}], "tags": [], "owner": {"reputation": 5551, "user_id": 1683161, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d54009af893277619337f3bfc8a589cf?s=128&d=identicon&r=PG", "display_name": "rainer", "link": "https://stackoverflow.com/users/1683161/rainer"}, "is_accepted": false, "score": 4, "last_activity_date": 1473882240, "last_edit_date": 1473882240, "creation_date": 1473882043, "answer_id": 39498428, "question_id": 39498344, "link": "https://stackoverflow.com/questions/39498344/ofstream-returning-error-no-matching-function-to-call-stdbasic-ofstreamchar/39498428#39498428", "title": "ofstream returning error &quot;No matching function to call std::basic_ofstream&lt;char&gt;::close(const char [14])&quot;", "body": "<p>Just use <code>file.close();</code>, there's no need to pass the file name again.</p>\n\n<p>See <a href=\"http://www.cplusplus.com/reference/fstream/ofstream/close/\" rel=\"nofollow\">http://www.cplusplus.com/reference/fstream/ofstream/close/</a>.</p>\n\n<p>Also, <code>ofstream</code>s are RAII objects, which means that the file will automatically be closed once the <code>ofstream</code> object goes out of scope (see <a href=\"https://stackoverflow.com/questions/4802494/do-i-need-to-close-a-stdfstream\">do I need to close a std::fstream?</a>):</p>\n\n<pre><code>{\n    ofstream out(\"name\");\n    // do something with out...\n} // out.close is called automatically\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6832490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cb1cc1b9112242aa339f57cbf09d761?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Berger", "link": "https://stackoverflow.com/users/6832490/sam-berger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1980, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1473882240, "creation_date": 1473881744, "last_edit_date": 1473882023, "question_id": 39498344, "link": "https://stackoverflow.com/questions/39498344/ofstream-returning-error-no-matching-function-to-call-stdbasic-ofstreamchar", "title": "ofstream returning error &quot;No matching function to call std::basic_ofstream&lt;char&gt;::close(const char [14])&quot;", "body": "<p>Need help fixing my code, not sure what's wrong. I'm using C++11, trying to write a vector to a file by individually writing each struct. The section of code returning an error is:</p>\n\n<pre><code>string craigSave = \"craigSave.txt\";\nofstream file(craigSave.c_str());\nfile.open(\"craigSave.txt\");\nfor (int i=0; i&lt;finalVector.size(); i++){\n    file &lt;&lt; finalVector[i]&lt;&lt;endl;\n}\nfile.close(\"craigSave.txt\");\ncout&lt;&lt;\"Thanks for shopping!\"&lt;&lt;endl;\ndone = true;\n</code></pre>\n\n<p>The error returned is on the \"file.close\" line and is:</p>\n\n<blockquote>\n  <p>error: no matching function for call to 'std::basic_ofstream::close(const char [14])'</p>\n</blockquote>\n\n<p>I research on this error seems to point to needing to use char* as an argument instead of a string, but I'm using C++11, so it should accept strings. Also it is strange that there is no error for the file.open line, as all research shows the error being there, not at file.close</p>\n"}, {"tags": ["c++", "function", "class", "header", "declaration"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 4, "creation_date": 1473881428, "post_id": 39498218, "comment_id": 66314066, "body": "I&#39;m sorry but it is not possible."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1473881601, "post_id": 39498218, "comment_id": 66314150, "body": "Can you show the header? We can get around this using inheritance if <code>header</code> is protected or public. Edit: But that would also require polymorphic use of pointers in the test files."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 1, "creation_date": 1473881640, "post_id": 39498218, "comment_id": 66314163, "body": "You cannot change <b>anything</b> at all in the header? Well, too bad..."}, {"owner": {"reputation": 5551, "user_id": 1683161, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d54009af893277619337f3bfc8a589cf?s=128&d=identicon&r=PG", "display_name": "rainer", "link": "https://stackoverflow.com/users/1683161/rainer"}, "edited": false, "score": 1, "creation_date": 1473881745, "post_id": 39498218, "comment_id": 66314215, "body": "Assuming you have all required getters/setters you need in the class, you can always make it a free function that takes a <code>CircleList&amp;</code> as a parameter."}, {"owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 1, "creation_date": 1473882314, "post_id": 39498218, "comment_id": 66314469, "body": "You could make a new class that inherits from the class."}, {"owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 0, "creation_date": 1473882376, "post_id": 39498218, "comment_id": 66314495, "body": "You could do something evil like <code>#define private public</code>before #include&#39;ing the header.  But that would be evil."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 1, "creation_date": 1473883389, "post_id": 39498218, "comment_id": 66315014, "body": "@DanKorn That still wouldn&#39;t allow you to add <i>new</i> members to the class."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1473886821, "post_id": 39498218, "comment_id": 66316710, "body": "@Barmar But searching for a unique token at the right position within the class definition would ..."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1473887833, "post_id": 39498218, "comment_id": 66317114, "body": "I think the real answer is that if you think you need to do this, you&#39;re going about the whole thing in the wrong way. Why would they say you can&#39;t modify the class header, and then assign a project that requires doing so?"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1473887980, "post_id": 39498218, "comment_id": 66317165, "body": "@Barmar That&#39;s a good point, at least if we assume the teacher to not just make random constraints."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1473888428, "post_id": 39498218, "comment_id": 66317331, "body": "This seems like a poor exercise. What you&#39;re trying to do actually seems reasonable: you have to write similar code in several functions, and you&#39;d like to encapsulate that in a utility function. If you were really designing the class, you would be able to add private members or friend functions for this purpose. Preventing you from modifying the class specification limits you, so you have to repeat the code. Maybe a macro could be useful, though."}, {"owner": {"reputation": 148, "user_id": 1919599, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cb33462dd8d4e40926f74d9bd346ca4a?s=128&d=identicon&r=PG", "display_name": "DweebsUnited", "link": "https://stackoverflow.com/users/1919599/dweebsunited"}, "edited": false, "score": 0, "creation_date": 1473890429, "post_id": 39498218, "comment_id": 66318101, "body": "I can&#39;t inherit because the tests will use the base class. Without something like Java interfaces, theres not really a good way to do class based homework in C++ without saying &quot;This is what the header will be, don&#39;t change it or everything will break.&quot;  #define private public is dirty, but I think it just might work :D  I would use a function that I just pass all the private variables I need into, but they even made the elements of each node private :S"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1473888090, "post_id": 39499709, "comment_id": 66317201, "body": "I think the reason he can&#39;t do the last thing is that <code>call_it()</code> needs to access private members of the object. He&#39;d need it to be a friend function, but he can&#39;t add that."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1473888194, "post_id": 39499709, "comment_id": 66317243, "body": "@Barmar Oh, yes. What a pity. Or run time polymorphism."}], "tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": false, "score": 1, "last_activity_date": 1473887873, "last_edit_date": 1473887873, "creation_date": 1473887530, "answer_id": 39499709, "question_id": 39498218, "link": "https://stackoverflow.com/questions/39498218/adding-member-function-in-implementation-file/39499709#39499709", "title": "Adding member function in implementation file", "body": "<blockquote>\n  <p>However, there is a function I would really like to add to the class ( the <code>operator()</code> function ). How can I declare it to be part of the class without changing the header?</p>\n</blockquote>\n\n<p><strong>Basically, you cannot.</strong></p>\n\n<p>What you can do is either:</p>\n\n<ul>\n<li>Derive from the class and add your <code>operator()</code> there. Of course this doesn't work when other code has to use the original class with value semantics.</li>\n<li>Wrap the class as a member in your own class, and provide a user defined conversion to the original class. Not pretty, most of the cases.</li>\n<li><p>Get out black magic, also known as the preprocessor, and wrap the header in your own header <a href=\"http://ideone.com/NuyYek\" rel=\"nofollow\">with something like</a> that:</p>\n\n<pre><code>#define public \\\n  public: void operator()(void); public\n// original header content\nstruct SomeClass {\n  // stuff\n  public: // We need this once, otherwise we're screwed\n  // other stuff\n};\n// end original header content\n#undef public\n</code></pre>\n\n<p>This obviously breaks ABI compatibility with other code using <code>SomeClass</code> via its original header, though.</p></li>\n</ul>\n\n<blockquote>\n  <p>Doing this will save me copying the function body to 4 different places in the code.</p>\n</blockquote>\n\n<p>Why can't you just write a free function <code>call_it</code> and instead of <code>object()</code> you write <code>call_it(object)</code> in these 4 places?</p>\n"}], "owner": {"reputation": 148, "user_id": 1919599, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cb33462dd8d4e40926f74d9bd346ca4a?s=128&d=identicon&r=PG", "display_name": "DweebsUnited", "link": "https://stackoverflow.com/users/1919599/dweebsunited"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1473890176, "creation_date": 1473881268, "last_edit_date": 1473890176, "question_id": 39498218, "link": "https://stackoverflow.com/questions/39498218/adding-member-function-in-implementation-file", "title": "Adding member function in implementation file", "body": "<p>For homework, I am provided a skeleton class, and told to implement functions from the header in the source file. I am not allowed to change the header, as it will not be turned in, only the implementation file.</p>\n\n<p>However, there is a function I would really like to add to the class ( the operator() function ). How can I declare it to be part of the class without changing the header?</p>\n\n<p>I cannot add a friend function (requires changing the class definition in the header). I cannot just implement it at the top of the source (out-of-line definition does not match...). I cannot redeclare the class at the top (redefinition of class).</p>\n\n<p>Is this even possible? Doing this will save me copying the function body to 4 different places in the code.</p>\n\n<p>FYI, It's an accessor for a circular, doubly linked list. The operator[] is used to access list element elements, and I need an accessor that returns the list element pointer instead. For reference, the operators look like this:</p>\n\n<pre><code>// CANT CHANGE THIS, ITS IN THE HEADER\nElem&amp; operator[]( int i ) const;  \n\n// THIS IS WHAT I WANT THOUGH\n// ITS NOT IN THE HEADER, SO I CANT USE IT\nCNode * CircleList::operator()( int i ) {\n\n    CNode * n = this-&gt;header-&gt;next;\n\n    if( i &lt; 0 ) {\n\n        while( i &lt; 0 ) {\n            n = ( n-&gt;prev == this-&gt;header ) ? ( n-&gt;prev-&gt;prev ) : ( n-&gt;prev );\n            ++i;\n        }\n\n    } else if( i &gt; 0 ) {\n\n        while( i &gt; 0 ) {\n            n = ( n-&gt;next == this-&gt;header ) ? ( n-&gt;next-&gt;next ) : ( n-&gt;next );\n            --i;\n        }\n\n    }\n\n    return n;\n\n}\n</code></pre>\n\n<p>(Most of the ) header in question:</p>\n\n<pre><code>#include \"point.h\"\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\ntypedef Point Elem;\nclass CNode{\nprivate:\n    Elem elem;\n    CNode * next;\n    CNode * prev;\n\n    friend class CircleList;\n};\n\nclass CircleList {\npublic:\n    CircleList();\n    ~CircleList();\n\n    Elem&amp; operator[](int i) const;\n    void setElemAt (int i, const Elem newElem) const;\nprivate:\n    CNode * header;\n    int _size;\n};\n</code></pre>\n"}, {"tags": ["c++", "c++11", "visual-c++", "textures", "sfml"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1473881447, "post_id": 39498192, "comment_id": 66314077, "body": "<a href=\"http://www.sfml-dev.org/tutorials/2.4/graphics-sprite.php\" rel=\"nofollow noreferrer\">sfml-dev.org/tutorials/2.4/graphics-sprite.php</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1473881530, "post_id": 39498192, "comment_id": 66314109, "body": "Post your code in the question. Minimal example please - see <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">SSCCE</a>"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1473882960, "post_id": 39498192, "comment_id": 66314802, "body": "Please, take a look at <a href=\"http://stackoverflow.com/help/mcve\">mcve</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2725, "user_id": 2296177, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/854fa6632f9806fae99a1b49b4e07e08?s=128&d=identicon&r=PG", "display_name": "user2296177", "link": "https://stackoverflow.com/users/2296177/user2296177"}, "reply_to_user": {"reputation": 13, "user_id": 6832455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d772c1d4b7ec882bb664b1a8fc5602f?s=128&d=identicon&r=PG&f=1", "display_name": "Zbadrawy", "link": "https://stackoverflow.com/users/6832455/zbadrawy"}, "edited": false, "score": 2, "creation_date": 1473893591, "post_id": 39498758, "comment_id": 66319008, "body": "@Zbadrawy Do you really want to go without knowing why adding that worked?"}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 2, "last_activity_date": 1473887228, "last_edit_date": 1473887228, "creation_date": 1473883371, "answer_id": 39498758, "question_id": 39498192, "link": "https://stackoverflow.com/questions/39498192/building-a-game-with-sfml-and-texture-refuses-to-draw/39498758#39498758", "title": "Building a game with SFML and texture refuses to draw", "body": "<p>There is a catch with textures and SFML. Sprites assumes that they are not owner of the texture resource. By that, you must assure that the texture still exists when you try to draw. Look at this code here:</p>\n\n<pre><code>sf::Sprite makeSprite() {\n    sf::Texture tex;\n    tex.loadFromFile(\"someTexture.png\");\n\n    sf::Sprite sprite;\n\n    sprite.setTexture(tex);\n\n    // You indeed return the sprite, but tex is going out of scope here.\n    return sprite;\n}\n\n// further code will draw the sprite as a white square.\n</code></pre>\n\n<p>Instead, try to keep texture in a list of loaded textures. You could keep a vector somewhere or simply put your texture as static variable in the function <code>makeSprite</code>. I strongly recommend <strong>not</strong> use static or global variables as they are first sign of design flaw, but it's still a valid solution.</p>\n"}], "owner": {"reputation": 13, "user_id": 6832455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d772c1d4b7ec882bb664b1a8fc5602f?s=128&d=identicon&r=PG&f=1", "display_name": "Zbadrawy", "link": "https://stackoverflow.com/users/6832455/zbadrawy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 39498758, "answer_count": 1, "score": 0, "last_activity_date": 1473887228, "creation_date": 1473881190, "question_id": 39498192, "link": "https://stackoverflow.com/questions/39498192/building-a-game-with-sfml-and-texture-refuses-to-draw", "title": "Building a game with SFML and texture refuses to draw", "body": "<p>I'm using SFML 2.3 to build a game and I have an extremely odd issue. I have two different texture files, both .png, but one of them refuses to be drawn.</p>\n\n<p>I don't get any error message either way. For some reason TextureA works and appears just fine but TextureB doesn't draw.</p>\n\n<p>I made sure the code is correct, checked for caps, I have both in the same folder, and tried everything.\nI even tried entering TextureA in place of TextureB and TextureA was drawn just fine. I think the problem may be with the .png file itself but I can't figure out what it is.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "substring"], "answers": [{"comments": [{"owner": {"reputation": 1095, "user_id": 2025214, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wLpN8.jpg?s=128&g=1", "display_name": "caps", "link": "https://stackoverflow.com/users/2025214/caps"}, "edited": false, "score": 0, "creation_date": 1473881587, "post_id": 39498254, "comment_id": 66314138, "body": "An elegant solution."}, {"owner": {"reputation": 298, "user_id": 5838854, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ldoch.png?s=128&g=1", "display_name": "A. Takami", "link": "https://stackoverflow.com/users/5838854/a-takami"}, "edited": false, "score": 0, "creation_date": 1473882209, "post_id": 39498254, "comment_id": 66314423, "body": "As of now my implementation looks as follows:                                         <code>void speak(string statement){     string temp;     stringstream ss(statement);     while(ss &gt;&gt; temp){         sleep(1);         cout &lt;&lt; temp &lt;&lt; &quot; &quot;;     }</code> How might I make this pause before putting out each individual word?"}, {"owner": {"reputation": 5551, "user_id": 1683161, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d54009af893277619337f3bfc8a589cf?s=128&d=identicon&r=PG", "display_name": "rainer", "link": "https://stackoverflow.com/users/1683161/rainer"}, "reply_to_user": {"reputation": 298, "user_id": 5838854, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ldoch.png?s=128&g=1", "display_name": "A. Takami", "link": "https://stackoverflow.com/users/5838854/a-takami"}, "edited": false, "score": 0, "creation_date": 1473882688, "post_id": 39498254, "comment_id": 66314658, "body": "@A.Takami This is exactly what your implementation does; you&#39;ll just need to flush the output to make sure it it&#39;s written to the console immediately: <code>cout &lt;&lt; temp &lt;&lt; &quot; &quot; &lt;&lt; std::flush;</code>."}, {"owner": {"reputation": 81, "user_id": 6105828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f3309015b582a271b66a7a49b806260?s=128&d=identicon&r=PG&f=1", "display_name": "Russ", "link": "https://stackoverflow.com/users/6105828/russ"}, "reply_to_user": {"reputation": 298, "user_id": 5838854, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ldoch.png?s=128&g=1", "display_name": "A. Takami", "link": "https://stackoverflow.com/users/5838854/a-takami"}, "edited": false, "score": 0, "creation_date": 1473882809, "post_id": 39498254, "comment_id": 66314716, "body": "@A.Takami the program likely is pausing but it is doing so for too short a period. Sleep takes values in ms so try something larger like sleep(500);"}, {"owner": {"reputation": 5551, "user_id": 1683161, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d54009af893277619337f3bfc8a589cf?s=128&d=identicon&r=PG", "display_name": "rainer", "link": "https://stackoverflow.com/users/1683161/rainer"}, "reply_to_user": {"reputation": 298, "user_id": 5838854, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ldoch.png?s=128&g=1", "display_name": "A. Takami", "link": "https://stackoverflow.com/users/5838854/a-takami"}, "edited": false, "score": 1, "creation_date": 1473882915, "post_id": 39498254, "comment_id": 66314778, "body": "@A.Takami If you can use C++11, a better solution would probably be <a href=\"http://en.cppreference.com/w/cpp/thread/sleep_for\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/thread/sleep_for</a>."}, {"owner": {"reputation": 298, "user_id": 5838854, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ldoch.png?s=128&g=1", "display_name": "A. Takami", "link": "https://stackoverflow.com/users/5838854/a-takami"}, "edited": false, "score": 0, "creation_date": 1473882987, "post_id": 39498254, "comment_id": 66314815, "body": "@rainer Awesome. Thank you very much I appreciate it."}, {"owner": {"reputation": 298, "user_id": 5838854, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ldoch.png?s=128&g=1", "display_name": "A. Takami", "link": "https://stackoverflow.com/users/5838854/a-takami"}, "edited": false, "score": 0, "creation_date": 1473883308, "post_id": 39498254, "comment_id": 66314975, "body": "@rainer Any ideas why <code>usleep(750)</code> may not be working in place of the <code>sleep(1)</code>? With <code>sleep(1)</code> and using <code>flush</code> I get the pause, but <code>usleep(750)</code> just outputs all the text at once again, after implementing <code>flush</code> as well."}, {"owner": {"reputation": 1095, "user_id": 2025214, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wLpN8.jpg?s=128&g=1", "display_name": "caps", "link": "https://stackoverflow.com/users/2025214/caps"}, "edited": false, "score": 0, "creation_date": 1473885283, "post_id": 39498254, "comment_id": 66315959, "body": "You should try using <code>sleep_for</code> instead, as rainer suggested."}, {"owner": {"reputation": 5551, "user_id": 1683161, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d54009af893277619337f3bfc8a589cf?s=128&d=identicon&r=PG", "display_name": "rainer", "link": "https://stackoverflow.com/users/1683161/rainer"}, "edited": false, "score": 1, "creation_date": 1473923890, "post_id": 39498254, "comment_id": 66327116, "body": "<code>usleep</code> take microseconds, so <code>usleep(750)</code> will wait for 0.00075 seconds. See <a href=\"http://linux.die.net/man/3/usleep\" rel=\"nofollow noreferrer\">linux.die.net/man/3/usleep</a>"}], "tags": [], "owner": {"reputation": 5551, "user_id": 1683161, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d54009af893277619337f3bfc8a589cf?s=128&d=identicon&r=PG", "display_name": "rainer", "link": "https://stackoverflow.com/users/1683161/rainer"}, "is_accepted": true, "score": 8, "last_activity_date": 1473881879, "last_edit_date": 1473881879, "creation_date": 1473881448, "answer_id": 39498254, "question_id": 39498141, "link": "https://stackoverflow.com/questions/39498141/taking-each-individual-word-from-a-string-in-c/39498254#39498254", "title": "Taking Each Individual Word From a String in C++", "body": "<p>Use <code>std::stringstream</code>, no regular expressions required:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\nusing namespace std;\n\nint main() {\n    stringstream ss(\"This is a test\");\n    string s;\n\n    while (ss &gt;&gt; s) {\n        cout &lt;&lt; s &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Also, see <a href=\"https://stackoverflow.com/questions/53849/how-do-i-tokenize-a-string-in-c\">How do I tokenize a string in C++?</a></p>\n"}, {"tags": [], "owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "is_accepted": false, "score": 1, "last_activity_date": 1473882925, "creation_date": 1473882925, "answer_id": 39498646, "question_id": 39498141, "link": "https://stackoverflow.com/questions/39498141/taking-each-individual-word-from-a-string-in-c/39498646#39498646", "title": "Taking Each Individual Word From a String in C++", "body": "<p>you can implement your own method:</p>\n\n<pre><code>    //StrParse.h\n\n    #pragma once\n\n    #include &lt;iostream&gt;\n\n    static counter = 0;\n\n    char* strPar(char* pTxt, char c)\n    {\n\n        int lenAll = strlen(pTxt);\n\n        bool strBeg = false;\n        int nWords = 0;\n\n\n        for(int i(0); i &lt; lenAll; i++)\n        {\n            while(pTxt[i] != c)\n            {\n                strBeg = true;\n                i++;\n            }\n            if(strBeg)\n            {\n                nWords++;\n                strBeg = false;\n            }\n\n        }\n\n        int* pLens = new int[nWords];\n        int j = 0;\n        int len = 0;\n\n        for(i = 0; i &lt; lenAll; i++)\n        {\n            while(pTxt[i] != c)\n            {\n                strBeg = true;\n                i++;\n                len++;\n            }\n            if(strBeg)\n            {\n                pLens[j] = len;\n                j++;\n                strBeg = false;\n                len = 0;\n            }\n\n        }\n\n        char** pStr = new char*[nWords + 1];\n\n        for(i = 0; i &lt; nWords; i++)\n            pStr[i] = new char[pLens[i] + 1];\n\n        int k = 0, l = 0;\n\n        for(i = 0; i &lt; lenAll; i++)\n        {\n            while(pTxt[i] != c)\n            {\n                strBeg = true;\n                pStr[k][l] = pTxt[i];\n                l++;\n                i++;\n            }\n            if(strBeg)\n            {\n                pStr[k][l] = '\\0';\n                k++;\n                l = 0;\n                strBeg = false;     \n            }\n\n        }\n\n        counter++;\n\n        if(counter &lt;= nWords)\n            return pStr[counter - 1];\n        else\n            return NULL;\n    }\n\n\n    //main.cpp\n\n\n    #include \"StrParse.h\"\n\n    void main()\n    {\n\n        char* pTxt  = \"   -CPlusPlus -programming -is -a    -   superb thing \";\n        char* pStr1 = NULL;\n        int i = 1;\n        char sep;\n\n        std::cout &lt;&lt; \"Separator: \";\n        sep = std::cin.get();\n        std::cin.sync();\n\n        while(pStr1 = strPar(pTxt, sep))\n        {\n            std::cout &lt;&lt; \"String \" &lt;&lt; i &lt;&lt; \": \" &lt;&lt; pStr1 &lt;&lt; std::endl;\n            delete pStr1;\n            i++;\n        }\n\n        std::cout &lt;&lt; std::endl;\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1095, "user_id": 2025214, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wLpN8.jpg?s=128&g=1", "display_name": "caps", "link": "https://stackoverflow.com/users/2025214/caps"}, "is_accepted": false, "score": 2, "last_activity_date": 1473885302, "last_edit_date": 1473885302, "creation_date": 1473884927, "answer_id": 39499134, "question_id": 39498141, "link": "https://stackoverflow.com/questions/39498141/taking-each-individual-word-from-a-string-in-c/39499134#39499134", "title": "Taking Each Individual Word From a String in C++", "body": "<p>Here are a pair of implementations that don't involve creating any extraneous buffers.</p>\n\n<pre><code>#include &lt;boost/range/adaptor/filtered.hpp&gt;\n#include &lt;boost/range/algorithm/copy.hpp&gt;   //for boost::copy\n\n#include &lt;chrono&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;experimental/string_view&gt; //in clang or gcc; or use boost::string_ref in boost 1.53 or later; or use boost::iterator_range&lt;char*&gt; in earlier version of boost\n#include &lt;thread&gt;\n\nvoid method_one(std::experimental::string_view sv)\n{\n    for(auto b = sv.begin(), e = sv.end(), space = std::find(b, e, ' ')\n        ; b &lt; e\n        ; b = space + 1, space = std::find(space + 1, e, ' '))\n    {\n        std::copy(b, space, std::ostreambuf_iterator&lt;char&gt;(std::cout));\n        std::cout &lt;&lt; \" (pause) \";   //note that this will spit out an extra pause the last time through\n        std::this_thread::sleep_for(std::chrono::seconds(1));\n    }\n}\n\nvoid method_two(std::experimental::string_view sv)\n{\n    boost::copy(\n        sv | boost::adaptors::filtered([](const char c) -&gt; bool\n        {\n            if(c == ' ')\n            {\n                std::cout &lt;&lt; \" (pause) \";   //note that this spits out exactly one pause per space character\n                std::this_thread::sleep_for(std::chrono::seconds(1));\n                return false;\n            }\n\n            return true;\n        })\n        , std::ostreambuf_iterator&lt;char&gt;(std::cout)\n    );\n}\n\nint main() {\n    const std::string s{\"This is a string\"};\n\n    method_one(s);\n    std::cout &lt;&lt; std::endl;\n    method_two(s);\n    std::cout &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/69443a1da3bb3521\" rel=\"nofollow\">Live on coliru</a>, if you're into that.</p>\n"}], "owner": {"reputation": 298, "user_id": 5838854, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ldoch.png?s=128&g=1", "display_name": "A. Takami", "link": "https://stackoverflow.com/users/5838854/a-takami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 39498254, "answer_count": 3, "score": 1, "last_activity_date": 1473885302, "creation_date": 1473880994, "last_edit_date": 1495541300, "question_id": 39498141, "link": "https://stackoverflow.com/questions/39498141/taking-each-individual-word-from-a-string-in-c", "title": "Taking Each Individual Word From a String in C++", "body": "<p>I am writing a method in C++ which will take a string of 2 or more words and output each individual word of the string separated by a second or so, using the <code>sleep()</code> method. I am trying to do this using a for loop and substrings. I am unsure also of the regexs which should be used, and how they should be used, to achieve the desired output.</p>\n\n<p>I have reviewed <a href=\"https://stackoverflow.com/questions/21663431/how-to-display-each-individual-word-of-a-string-in-matlab\" title=\"example 1\">this</a> and <a href=\"https://stackoverflow.com/questions/19738059/how-to-separate-each-word-from-a-string-in-java\" title=\"example 2\">this</a> and find my question differs since I am trying to do this in a loop, and not store the individual substrings. </p>\n\n<p><strong>Input:</strong></p>\n\n<p>\"This is an example\"</p>\n\n<p><strong>Desired output:</strong></p>\n\n<p>\"This \" (pause) \"is \" (pause) \"an \" (pause) \"example.\"</p>\n"}, {"tags": ["c++", "c++11", "iterator"], "comments": [{"owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "edited": false, "score": 0, "creation_date": 1473885282, "post_id": 39498059, "comment_id": 66315958, "body": "I don&#39;t see what kind of answer to my question is given in the &quot;duplicate&quot; linked question."}], "answers": [{"tags": [], "owner": {"reputation": 2933, "user_id": 6350858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bfeae5d1ddef3ed5e81e88bdd30063f?s=128&d=identicon&r=PG&f=1", "display_name": "Ap31", "link": "https://stackoverflow.com/users/6350858/ap31"}, "is_accepted": false, "score": 0, "last_activity_date": 1473881025, "creation_date": 1473881025, "answer_id": 39498146, "question_id": 39498059, "link": "https://stackoverflow.com/questions/39498059/from-integer-indexed-for-loop-enumeration-to-range-for/39498146#39498146", "title": "From integer-indexed for loop enumeration to range-for", "body": "<p>You are right about <code>begin()</code> and <code>end()</code>, whatever they return should supply:</p>\n\n<ul>\n<li>operator++ (prefix only is enough)</li>\n<li>operator!=</li>\n<li>operator*</li>\n</ul>\n\n<p>All pretty self-explanatory.</p>\n\n<p>Notice that no traits or categories are required, as would be for iterators intended for some standard library algorithms - just bare minimum.</p>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1473882072, "post_id": 39498158, "comment_id": 66314357, "body": "I rolled the edit back to have quotes as this is copied material and should be marked up as such"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1473882274, "post_id": 39498158, "comment_id": 66314450, "body": "Also note that this is a template so it only works when the size is know at compile time.  If it is run time dependent this will not work."}], "tags": [], "owner": {"reputation": 14144, "user_id": 6579744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a4ohI.png?s=128&g=1", "display_name": "rahnema1", "link": "https://stackoverflow.com/users/6579744/rahnema1"}, "is_accepted": false, "score": 1, "last_activity_date": 1473882052, "last_edit_date": 1473882052, "creation_date": 1473881073, "answer_id": 39498158, "question_id": 39498059, "link": "https://stackoverflow.com/questions/39498059/from-integer-indexed-for-loop-enumeration-to-range-for/39498158#39498158", "title": "From integer-indexed for loop enumeration to range-for", "body": "<p>You require an input iterator this example completely copied from <a href=\"http://en.cppreference.com/w/cpp/iterator/iterator\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/iterator/iterator</a> :</p>\n\n<blockquote>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n\ntemplate&lt;long FROM, long TO&gt;\nclass Range {\npublic:\n    // member typedefs provided through inheriting from std::iterator\n    class iterator: public std::iterator&lt;\n                    std::input_iterator_tag,   // iterator_category\n                    long,                      // value_type\n                    long,                      // difference_type\n                    const long*,               // pointer\n                    long                       // reference\n                                  &gt;{\n    long num = FROM;\n    public:\n    explicit iterator(long _num = 0) : num(_num) {}\n    iterator&amp; operator++() {num = TO &gt;= FROM ? num + 1: num - 1; return *this;}\n    iterator operator++(int) {iterator retval = *this; ++(*this); return retval;}\n    bool operator==(iterator other) const {return num == other.num;}\n    bool operator!=(iterator other) const {return !(*this == other);}\n    reference operator*() const {return num;}\n    };\n    iterator begin() {return iterator(FROM);}\n    iterator end() {return iterator(TO &gt;= FROM? TO+1 : TO-1);}\n};\n\nint main() {\n    // std::find requires a input iterator\n    auto range = Range&lt;15, 25&gt;();\n    auto itr = std::find(range.begin(), range.end(), 18);\n    std::cout &lt;&lt; *itr &lt;&lt; '\\n'; // 18\n\n    // Range::iterator also satisfies range-based for requirements\n    for(long l : Range&lt;3, 5&gt;()) {\n    std::cout &lt;&lt; l &lt;&lt; ' '; // 3 4 5\n    }\n    std::cout &lt;&lt; '\\n';\n}\n</code></pre>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "edited": false, "score": 0, "creation_date": 1473883408, "post_id": 39498236, "comment_id": 66315025, "body": "Sorry, but this doesn&#39;t add anything good to the index for. Please see my second code snippet for what was the desired code."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 2, "last_activity_date": 1473881366, "creation_date": 1473881366, "answer_id": 39498236, "question_id": 39498059, "link": "https://stackoverflow.com/questions/39498059/from-integer-indexed-for-loop-enumeration-to-range-for/39498236#39498236", "title": "From integer-indexed for loop enumeration to range-for", "body": "<p>What you are looking for can be done with <a href=\"http://www.boost.org/doc/libs/1_59_0/libs/range/doc/html/range/reference/ranges/irange.html\" rel=\"nofollow\"><code>boost::irange</code></a>.  It will construct a lazy range of integers in the range <code>[first, last)</code> and you can just drop it right in like you use <code>i</code> in your for loop.</p>\n\n<pre><code>for (int i = 0; i &lt; count; i++) \n{ \n    EnumGetData(i, &amp;data);\n    // process data ...\n}\n</code></pre>\n\n<p>Becomes</p>\n\n<pre><code>for (auto i : boost::irange(0, count))\n{\n    EnumGetData(i, &amp;data);\n    // process data ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 907, "user_id": 5344725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afe3363c7df76a6ddf2114b5b8793554?s=128&d=identicon&r=PG&f=1", "display_name": "Altainia", "link": "https://stackoverflow.com/users/5344725/altainia"}, "is_accepted": false, "score": -1, "last_activity_date": 1473881417, "creation_date": 1473881417, "answer_id": 39498247, "question_id": 39498059, "link": "https://stackoverflow.com/questions/39498059/from-integer-indexed-for-loop-enumeration-to-range-for/39498247#39498247", "title": "From integer-indexed for loop enumeration to range-for", "body": "<p><code>for(auto x : y)</code> Here, <code>y</code> must be an object of a class that has a <code>begin()</code> method and an <code>end()</code> method that each returns an object implementing the concept of an iterator. The iterator must be incrementable (<code>iter++</code>), must be able to accurately determine if it is equal to another iterator of the same kind (via <code>!=</code>) and must de-reference to whatever <code>x</code> needs to be.</p>\n\n<p>This is something you should consider doing if you either A) are bored or otherwise have nothing better to do or B) have a legit need to. While this is not difficult to do, neither is it trivial.</p>\n"}], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 1, "answer_count": 4, "score": 3, "last_activity_date": 1473919732, "creation_date": 1473880642, "question_id": 39498059, "link": "https://stackoverflow.com/questions/39498059/from-integer-indexed-for-loop-enumeration-to-range-for", "title": "From integer-indexed for loop enumeration to range-for", "body": "<p>I have some code that enumerates some data, something like this:</p>\n\n<pre><code>int count;\nInitDataEnumeration(/* some init params */, &amp;count);\n\nfor (int i = 0; i &lt; count; i++) \n{ \n    EnumGetData(i, &amp;data);\n    // process data ...\n}\n</code></pre>\n\n<p>I'd like to convert this code in a form suitable to C++11's <strong>range-for</strong>.</p>\n\n<p>I was thinking of defining a <code>DataEnumerator</code> wrapper class, whose constructor would call the above <code>InitDataEnumeration()</code> function.</p>\n\n<p>The idea would be to use this wrapper class like this:</p>\n\n<pre><code>DataEnumerator enumerator{/* init params*/};\n\nfor (const auto&amp; data : enumerator) \n{\n    // process data ...\n}\n</code></pre>\n\n<p>How could the former <code>int</code>-indexed for loop be refactored in the latter range-based form?</p>\n\n<p>I was thinking of exposing <code>begin()</code> and <code>end()</code> methods from the enumerator wrapper class, but I don't know what kind of iterators they should return, and how to define such iterators.</p>\n\n<p>Note that the iteration process is forward-only.</p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "edited": false, "score": 0, "creation_date": 1473880630, "post_id": 39497971, "comment_id": 66313629, "body": "Can you post your code as well?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4407569"}, "edited": false, "score": 0, "creation_date": 1473883828, "post_id": 39497971, "comment_id": 66315249, "body": "I am a bit confused by the error message, because according to the version 1.61.0 documentation the declaration of <code>make_array</code> is: <code>template&lt;class T, class S&gt; inline const array_wrapper&lt;T&gt; make_array(T* t, S s)</code>, so shouldn&#39;t the error message say <code>make_array&lt;double, unsigned long&gt;</code>?"}, {"owner": {"reputation": 331, "user_id": 5982950, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/e30f4274dc6fa3ade80d0685a72fd90a?s=128&d=identicon&r=PG&f=1", "display_name": "Vacassal Alsk", "link": "https://stackoverflow.com/users/5982950/vacassal-alsk"}, "edited": false, "score": 0, "creation_date": 1473888560, "post_id": 39497971, "comment_id": 66317395, "body": "the code itself is too huge... not sure if we could really debug anything out of it..."}, {"owner": {"reputation": 331, "user_id": 5982950, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/e30f4274dc6fa3ade80d0685a72fd90a?s=128&d=identicon&r=PG&f=1", "display_name": "Vacassal Alsk", "link": "https://stackoverflow.com/users/5982950/vacassal-alsk"}, "edited": false, "score": 0, "creation_date": 1473888579, "post_id": 39497971, "comment_id": 66317406, "body": "But it compiles and links in another machine and in my own machine though..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4407569"}, "edited": false, "score": 0, "creation_date": 1473893841, "post_id": 39497971, "comment_id": 66319068, "body": "Maybe you have different boost versions? <code>array_wrapper</code> seems to be present only in the newest version 1.61.0 according to the online docs. Maybe you mixed up header and library versions? Anyway it would be helpful if you could verify the library versions on both machines. And for the code you could narrow it down to where you use boost::serialization in solver.cpp"}, {"owner": {"reputation": 331, "user_id": 5982950, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/e30f4274dc6fa3ade80d0685a72fd90a?s=128&d=identicon&r=PG&f=1", "display_name": "Vacassal Alsk", "link": "https://stackoverflow.com/users/5982950/vacassal-alsk"}, "edited": false, "score": 0, "creation_date": 1473906401, "post_id": 39497971, "comment_id": 66321896, "body": "ehm... the one in my mac is also 1.61.0 ... in solver.cpp, we have a lot of broadcasts..... maybe those that require serialization breaks for some mysterious reason?"}, {"owner": {"reputation": 331, "user_id": 5982950, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/e30f4274dc6fa3ade80d0685a72fd90a?s=128&d=identicon&r=PG&f=1", "display_name": "Vacassal Alsk", "link": "https://stackoverflow.com/users/5982950/vacassal-alsk"}, "edited": false, "score": 0, "creation_date": 1473917154, "post_id": 39497971, "comment_id": 66324450, "body": "Resolved.... install boost 1.58.0 instead and such problem shall not occur..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4407569"}, "edited": false, "score": 0, "creation_date": 1473963230, "post_id": 39497971, "comment_id": 66351226, "body": "@VacassalAlsk Could you explain what the problem was? If this is a bug in 1.61.0 others might be interested in it. Or did you compile your object files with a different version than on the target?"}, {"owner": {"reputation": 331, "user_id": 5982950, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/e30f4274dc6fa3ade80d0685a72fd90a?s=128&d=identicon&r=PG&f=1", "display_name": "Vacassal Alsk", "link": "https://stackoverflow.com/users/5982950/vacassal-alsk"}, "edited": false, "score": 0, "creation_date": 1473964802, "post_id": 39497971, "comment_id": 66352080, "body": "Ehm... I would post an answer to this problem .... I am not sure the exact problem though.... I just walk around it...."}], "answers": [{"tags": [], "owner": {"reputation": 331, "user_id": 5982950, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/e30f4274dc6fa3ade80d0685a72fd90a?s=128&d=identicon&r=PG&f=1", "display_name": "Vacassal Alsk", "link": "https://stackoverflow.com/users/5982950/vacassal-alsk"}, "is_accepted": false, "score": 0, "last_activity_date": 1473964756, "last_edit_date": 1495542854, "creation_date": 1473964756, "answer_id": 39518178, "question_id": 39497971, "link": "https://stackoverflow.com/questions/39497971/error-linking-to-boost-serialization/39518178#39518178", "title": "error linking to boost serialization", "body": "<p>Ok.... Basically, I re-perform the same installation as below with boost 1.58.0 instead of boost 1.61.0 :</p>\n\n<p><a href=\"https://stackoverflow.com/questions/39502034/how-do-i-install-boost-with-intel-compiler-and-intel-mpi\">how do i install boost with intel compiler and intel mpi?</a></p>\n\n<p>The problem just goes away... I am not sure why....</p>\n"}, {"comments": [{"owner": {"reputation": 2108, "user_id": 630364, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/db0bfce7580a946cd2dc6ae019f53e6e?s=128&d=identicon&r=PG", "display_name": "yaobin", "link": "https://stackoverflow.com/users/630364/yaobin"}, "edited": false, "score": 0, "creation_date": 1539698664, "post_id": 41188485, "comment_id": 92590725, "body": "Commenting out these two lines works but I&#39;m not sure why it works. In fact, the developer didn&#39;t seem to know, either, as he/she left out a comment saying &quot;I would like to make the copy constructor private but this breaks make_array.  So I try to make make_array a friend - but that doesn&#39;t build.  Need a C++ guru to explain this!&quot; See <a href=\"https://www.boost.org/doc/libs/1_62_0/boost/serialization/array.hpp\" rel=\"nofollow noreferrer\">this file</a>."}], "tags": [], "owner": {"reputation": 11, "user_id": 7307648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2d1630120c665a0739f56c491c9fd0e?s=128&d=identicon&r=PG", "display_name": "juk", "link": "https://stackoverflow.com/users/7307648/juk"}, "is_accepted": false, "score": 1, "last_activity_date": 1481905224, "creation_date": 1481905224, "answer_id": 41188485, "question_id": 39497971, "link": "https://stackoverflow.com/questions/39497971/error-linking-to-boost-serialization/41188485#41188485", "title": "error linking to boost serialization", "body": "<p>In the file \"boost/include/boost/serialization/array.hpp\", comment out these two lines:</p>\n\n<pre><code>template&lt;class S&gt;\nfriend const boost::serialization::array_wrapper&lt;T&gt; make_array( T* t, S s);\n</code></pre>\n\n<p>and it will link fine then.</p>\n"}], "owner": {"reputation": 331, "user_id": 5982950, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/e30f4274dc6fa3ade80d0685a72fd90a?s=128&d=identicon&r=PG&f=1", "display_name": "Vacassal Alsk", "link": "https://stackoverflow.com/users/5982950/vacassal-alsk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1241, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1481905224, "creation_date": 1473880270, "last_edit_date": 1473906516, "question_id": 39497971, "link": "https://stackoverflow.com/questions/39497971/error-linking-to-boost-serialization", "title": "error linking to boost serialization", "body": "<p>when I try to link my c++ programme together with Intel MPI, I have this issue:</p>\n\n<pre><code>[key01027@ginar ising]$ mpiicc -o bin/ising obj/main.o obj/solver.o obj/periodicfunction.o obj/tools.o obj/treeofdevil.o  -L ~/ising_solver/gurobi650/linux64/lib/ -L ~/ising_solver/boost_install/lib/ -parallel -lgurobi_c++ -lgurobi65 -lboost_regex -lboost_thread -lboost_system  -lboost_mpi -lboost_serialization\nobj/solver.o: In function `boost::archive::detail::iserializer&lt;boost::mpi::packed_iarchive, std::vector&lt;double, std::allocator&lt;double&gt; &gt; &gt;::load_object_data(boost::archive::detail::basic_iarchive&amp;, void*, unsigned int) const':\nsolver.cpp:(.text._ZNK5boost7archive6detail11iserializerINS_3mpi15packed_iarchiveESt6vectorIdSaIdEEE16load_object_dataERNS1_14basic_iarchiveEPvj[_ZNK5boost7archive6detail11iserializerINS_3mpi15packed_iarchiveESt6vectorIdSaIdEEE16load_object_dataERNS1_14basic_iarchiveEPvj]+0x209): undefined reference to `boost::serialization::array_wrapper&lt;double&gt; const boost::serialization::make_array&lt;unsigned long&gt;(double*, unsigned long)'\n</code></pre>\n\n<p>The key error is:</p>\n\n<pre><code>undefined reference to `boost::serialization::array_wrapper&lt;double&gt; const boost::serialization::make_array&lt;unsigned long&gt;(double*, unsigned long)'\n</code></pre>\n\n<p>I think i install boost mpi properly. I already include serialization in my linking (-lboost_serialization)... What should I do?</p>\n\n<p>I am not sure it is because of the following serialization scheme, serializing boost tuple:</p>\n\n<pre><code>namespace boost { namespace serialization {\n\n\n    template&lt;typename Archive, typename T1&gt;\n\n    void serialize(Archive &amp; ar,\n                   boost::tuple&lt;T1&gt; &amp; t,\n\n                   const unsigned int)\n    {\n        ar &amp; t.get&lt;0&gt;();\n    }\n\n    template&lt;typename Archive, typename T1,typename T2&gt;\n    void serialize(Archive &amp; ar,\n\n                   boost::tuple&lt;T1,T2&gt; &amp; t,\n\n                   const unsigned int)\n    {\n\n        ar &amp; t.get&lt;0&gt;();\n        ar &amp; t.get&lt;1&gt;();\n    }\n\n\n    template&lt;typename Archive, typename T1,typename T2,typename T3&gt;\n    void serialize(Archive &amp; ar,\n\n                   boost::tuple&lt;T1, T2, T3&gt; &amp; t,\n\n                   const unsigned int)\n    {\n\n        ar &amp; t.get&lt;0&gt;();\n        ar &amp; t.get&lt;1&gt;();\n        ar &amp; t.get&lt;2&gt;();\n    }\n\n\n    template&lt;typename Archive, typename T1,typename T2,typename T3 ,typename T4&gt;\n    void serialize(Archive &amp; ar,\n\n                   boost::tuple&lt;T1, T2, T3 ,T4&gt; &amp; t,\n\n                   const unsigned int)\n    {\n\n        ar &amp; t.get&lt;0&gt;();\n        ar &amp; t.get&lt;1&gt;();\n        ar &amp; t.get&lt;2&gt;();\n        ar &amp; t.get&lt;3&gt;();\n    }\n\n    template&lt;typename Archive, typename T1,typename T2,typename T3 ,typename T4,typename T5&gt;\n    void serialize(Archive &amp; ar,\n\n                   boost::tuple&lt;T1, T2, T3 ,T4, T5&gt; &amp; t,\n\n                   const unsigned int)\n    {\n\n        ar &amp; t.get&lt;0&gt;();\n        ar &amp; t.get&lt;1&gt;();\n        ar &amp; t.get&lt;2&gt;();\n        ar &amp; t.get&lt;3&gt;();\n        ar &amp; t.get&lt;4&gt;();\n    }\n\n    template&lt;typename Archive, typename T1,typename T2,typename T3 ,typename T4,typename T5,typename T6 &gt;\n    void serialize(Archive &amp; ar,\n\n                   boost::tuple&lt;T1, T2, T3 ,T4, T5, T6&gt; &amp; t,\n\n                   const unsigned int)\n    {\n\n        ar &amp; t.get&lt;0&gt;();\n        ar &amp; t.get&lt;1&gt;();\n        ar &amp; t.get&lt;2&gt;();\n        ar &amp; t.get&lt;3&gt;();\n        ar &amp; t.get&lt;4&gt;();\n        ar &amp; t.get&lt;5&gt;();\n    }\n\n\n    template&lt;typename Archive, typename T1,typename T2,typename T3 ,typename T4,typename T5,typename T6 ,typename T7&gt;\n    void serialize(Archive &amp; ar,\n\n                   boost::tuple&lt;T1, T2, T3 ,T4, T5, T6 ,T7&gt; &amp; t,\n\n                   const unsigned int)\n    {\n\n        ar &amp; t.get&lt;0&gt;();\n        ar &amp; t.get&lt;1&gt;();\n        ar &amp; t.get&lt;2&gt;();\n        ar &amp; t.get&lt;3&gt;();\n        ar &amp; t.get&lt;4&gt;();\n        ar &amp; t.get&lt;5&gt;();\n        ar &amp; t.get&lt;6&gt;();\n    }\n\n\n}}\n</code></pre>\n"}, {"tags": ["c++", "64-bit", "subtraction"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1473880468, "post_id": 39497954, "comment_id": 66313544, "body": "Show real code. What you&#39;re describing doesn&#39;t make sense, so there must be something going on that you haven&#39;t mentioned. Provide a program that compiles, runs, and shows the problem."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1473880619, "post_id": 39497954, "comment_id": 66313625, "body": "<code>size_t</code> is an unsigned type. If you&#39;re expecting a negative value, adjust your expectations. And show real code; with what you&#39;ve shown, <code>Num2 - Num1</code> yields 282. Are you perhaps computing <code>Num1 - Num2</code>? Read this: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1473880798, "post_id": 39497954, "comment_id": 66313714, "body": "How can you get a negative value using <code>unsigned</code> integers?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1473882137, "post_id": 39497954, "comment_id": 66314400, "body": "@ThomasMatthews: OP is using <code>int64_t</code> in that scenario."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1473902740, "post_id": 39497954, "comment_id": 66321133, "body": "Next time use copy/paste to put your code into the question."}], "answers": [{"comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1473902778, "post_id": 39498550, "comment_id": 66321136, "body": "Stupid rule. Have your 50."}, {"owner": {"reputation": 85, "user_id": 4232258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8978621bbc05b31238b57c971d54566?s=128&d=identicon&r=PG&f=1", "display_name": "asterx", "link": "https://stackoverflow.com/users/4232258/asterx"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1473964074, "post_id": 39498550, "comment_id": 66351688, "body": "Yay! Let&#39;s comment! Thx"}], "tags": [], "owner": {"reputation": 85, "user_id": 4232258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8978621bbc05b31238b57c971d54566?s=128&d=identicon&r=PG&f=1", "display_name": "asterx", "link": "https://stackoverflow.com/users/4232258/asterx"}, "is_accepted": false, "score": 3, "last_activity_date": 1473882551, "creation_date": 1473882551, "answer_id": 39498550, "question_id": 39497954, "link": "https://stackoverflow.com/questions/39497954/64bit-unsigned-subtraction-issue/39498550#39498550", "title": "64bit unsigned Subtraction issue", "body": "<p>Can you post your code as asked by other in comments (sorry couldn't comment due to 50+ rep requirement). Since <code>size_t</code> is <code>unsigned int</code> or <code>unsigned long int</code>, the subtraction should yield 282, unless you're using a machine/compilation system which implements<code>unsigned int</code> shorter than 32-bits.</p>\n\n<p>I tried this and it works correctly (64-bit). Since <code>Diff</code> in your case is printing out <code>0xFFFFFFFF966A0000</code>, I guess you're using a 64-bit implementation on <code>size_t</code> as well. More can be said only if you post your full code!</p>\n"}, {"tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": false, "score": 1, "last_activity_date": 1473882910, "creation_date": 1473882910, "answer_id": 39498643, "question_id": 39497954, "link": "https://stackoverflow.com/questions/39497954/64bit-unsigned-subtraction-issue/39498643#39498643", "title": "64bit unsigned Subtraction issue", "body": "<p>The problem is that you meant to say <code>Diff = Num2 - Num1</code> But you accidentally said <code>Diff = Num1 - Num2</code>:</p>\n\n<pre><code>size_t Num2= 2359198081;\nsize_t Num1= 2359197799;\nsize_t Diff = Num1 - Num2;\nstd::cout &lt;&lt; Diff &lt;&lt; std::endl;\n</code></pre>\n\n<p>prints: </p>\n\n<blockquote>\n  <p>18446744073709551334</p>\n</blockquote>\n\n<p>Which is what you're getting. Well, you claim you're getting <code>18446744071938113404</code>, which is slightly different, so I'm guessing your actual numbers are different and your question is not accurate.</p>\n\n<pre><code>size_t num2 = 2359198081;\nsize_t num1 = 2359197799;\nsize_t diff = num2 - num1;\nstd::cout &lt;&lt; diff &lt;&lt; std::endl;\n</code></pre>\n\n<p>prints:</p>\n\n<blockquote>\n  <p>282</p>\n</blockquote>\n\n<p>Which is what you want.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/11e78778837024f7\" rel=\"nofollow\">Demo</a></p>\n"}], "owner": {"reputation": 571, "user_id": 5624012, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d530d8fb20341690d694d636d58c3fd8?s=128&d=identicon&r=PG&f=1", "display_name": "Anurag", "link": "https://stackoverflow.com/users/5624012/anurag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1473882910, "creation_date": 1473880215, "question_id": 39497954, "link": "https://stackoverflow.com/questions/39497954/64bit-unsigned-subtraction-issue", "title": "64bit unsigned Subtraction issue", "body": "<p>So, I have the following-</p>\n\n<pre><code>size_t Num2= 2359198081\nsize_t Num1= 2359197799\n\nsize_t Diff= Num2 - Num1;\n</code></pre>\n\n<p>if I do,</p>\n\n<pre><code>std::cout &lt;&lt; \"Diff: \" &lt;&lt; Diff;\n</code></pre>\n\n<p>I get,</p>\n\n<pre><code>Diff: 18446744071938113404\n</code></pre>\n\n<p>If i do int64_t instead of size_t then as expected I get a negative value since Num2 and Num1 are bigger than 2 raise to 32 </p>\n\n<p>If I do,</p>\n\n<pre><code>std::cout &lt;&lt; \"Diff: \" &lt;&lt; Num2 - Num1 &lt;&lt; std::endl;\n</code></pre>\n\n<p>Then I get,</p>\n\n<p>Diff: 282 </p>\n\n<p>which is as expected.</p>\n\n<p>What am I doing incorrect here? rather how can i get this to do a correct 64bit subtraction?</p>\n"}, {"tags": ["c++", "view", "camera", "directx", "direct3d"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4407569"}, "edited": false, "score": 1, "creation_date": 1473879877, "post_id": 39497636, "comment_id": 66313219, "body": "Is your angle <code>rotY</code> in radians or degrees? It should be passed to <code>D3DXMatrixRotationY</code> (and <code>cos</code>/<code>sin</code> for that matter) as radians. Also taking the address of a temporary rvalue in <code>&amp;(viewMat * viewRotXMat * viewRotYMat * viewRotZMat)</code> is not standard-conform, but your compiler may support it."}, {"owner": {"reputation": 57, "user_id": 5276271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf3f987307192505410528813917eff7?s=128&d=identicon&r=PG&f=1", "display_name": "L. Etienne", "link": "https://stackoverflow.com/users/5276271/l-etienne"}, "edited": false, "score": 0, "creation_date": 1473881194, "post_id": 39497636, "comment_id": 66313937, "body": "This is the way the directx tutorial was showing to do it.<a href=\"http://www.directxtutorial.com/\" rel=\"nofollow noreferrer\">directxtutorial.com</a>"}, {"owner": {"reputation": 57, "user_id": 5276271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf3f987307192505410528813917eff7?s=128&d=identicon&r=PG&f=1", "display_name": "L. Etienne", "link": "https://stackoverflow.com/users/5276271/l-etienne"}, "edited": false, "score": 0, "creation_date": 1473882030, "post_id": 39497636, "comment_id": 66314342, "body": "rotY is apparently in radians. but i defined a new float which is rotY in degrees for sin cos. but it still does the same fails as beforehand. it flips arround 45*, 135* etc."}, {"owner": {"reputation": 2933, "user_id": 6350858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bfeae5d1ddef3ed5e81e88bdd30063f?s=128&d=identicon&r=PG&f=1", "display_name": "Ap31", "link": "https://stackoverflow.com/users/6350858/ap31"}, "edited": false, "score": 0, "creation_date": 1473882200, "post_id": 39497636, "comment_id": 66314420, "body": "<code>sin</code> and <code>cos</code> most definetly would expect radians too, but that is hardly the source of flipping"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4407569"}, "edited": false, "score": 0, "creation_date": 1473884118, "post_id": 39497636, "comment_id": 66315378, "body": "You misunderstood me, you should pass <code>rotY</code> in radians, not degree, to all functions. Very seldom angles are represented in degrees in programming internals. It would also be helpful if you refered to the exact tutorial page you are working with, so one can understand what your calculations are supposed to achieve."}, {"owner": {"reputation": 57, "user_id": 5276271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf3f987307192505410528813917eff7?s=128&d=identicon&r=PG&f=1", "display_name": "L. Etienne", "link": "https://stackoverflow.com/users/5276271/l-etienne"}, "edited": false, "score": 0, "creation_date": 1473886034, "post_id": 39497636, "comment_id": 66316337, "body": "i am passing rotY etc as radians. i convert them with this formula: radian = degree * (PI / 180);  I&#39;m not working with a tutorial because i just want to look up down left right. and all of the tutorials are very complicated with a lot of stuff that i don&#39;t even need. In most of them the camera rotation isn&#39;t well explained so i can&#39;t just take this part.  My calculations for the view doenst work with sin(degree) neither with sin(radiant)."}, {"owner": {"reputation": 57, "user_id": 5276271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf3f987307192505410528813917eff7?s=128&d=identicon&r=PG&f=1", "display_name": "L. Etienne", "link": "https://stackoverflow.com/users/5276271/l-etienne"}, "edited": false, "score": 0, "creation_date": 1473886253, "post_id": 39497636, "comment_id": 66316440, "body": "Which i dont unterstand. I calculated everything exactly like my program does with a calculator and rotated the camera in Blender (as a visualisation) exactly like my program would and it works perfect. But in directx int doesnt. :("}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1473957871, "post_id": 39497636, "comment_id": 66348387, "body": "Since you have Visual C++ 2015 (you stated you are using <code>v140</code>), why are you using the 12+ year old Direct3D 9 API that requires the deprecated <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ee663275.aspx\" rel=\"nofollow noreferrer\">D3DX9</a> library? You should focus on learning DIrect3D 11 instead ideally without using the legacy DirectX SDK at all. See <a href=\"https://github.com/Microsoft/DirectXTK/wiki/Getting-Started\" rel=\"nofollow noreferrer\">DirectX Tool Kit</a>."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 5276271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf3f987307192505410528813917eff7?s=128&d=identicon&r=PG&f=1", "display_name": "L. Etienne", "link": "https://stackoverflow.com/users/5276271/l-etienne"}, "edited": false, "score": 0, "creation_date": 1473881271, "post_id": 39497959, "comment_id": 66313977, "body": "Thank you. But somehow the camera still does this flips arround 0* 90* usw.  Changes:   float deg = rotY * (180 / PI);   \tD3DXMatrixRotationYawPitchRoll(&amp;viewRotXMat, rotY, sin(deg) * rotXZ, (cos(deg) * rotXZ) * -1);   i commented the rotationxyz setup out."}, {"owner": {"reputation": 2933, "user_id": 6350858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bfeae5d1ddef3ed5e81e88bdd30063f?s=128&d=identicon&r=PG&f=1", "display_name": "Ap31", "link": "https://stackoverflow.com/users/6350858/ap31"}, "reply_to_user": {"reputation": 57, "user_id": 5276271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf3f987307192505410528813917eff7?s=128&d=identicon&r=PG&f=1", "display_name": "L. Etienne", "link": "https://stackoverflow.com/users/5276271/l-etienne"}, "edited": false, "score": 0, "creation_date": 1473882574, "post_id": 39497959, "comment_id": 66314606, "body": "As I said, you have this weird 3-angle combination, this could lead to gimbal lock and all kind of flipping, for POV camera please try using just 2 angles with no trigonometry calls at all"}, {"owner": {"reputation": 57, "user_id": 5276271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf3f987307192505410528813917eff7?s=128&d=identicon&r=PG&f=1", "display_name": "L. Etienne", "link": "https://stackoverflow.com/users/5276271/l-etienne"}, "edited": false, "score": 0, "creation_date": 1473883673, "post_id": 39497959, "comment_id": 66315168, "body": "Such a function would be perfect but i couldn&#39;t find one. Do you know the name by any chance?"}, {"owner": {"reputation": 2933, "user_id": 6350858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bfeae5d1ddef3ed5e81e88bdd30063f?s=128&d=identicon&r=PG&f=1", "display_name": "Ap31", "link": "https://stackoverflow.com/users/6350858/ap31"}, "reply_to_user": {"reputation": 57, "user_id": 5276271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf3f987307192505410528813917eff7?s=128&d=identicon&r=PG&f=1", "display_name": "L. Etienne", "link": "https://stackoverflow.com/users/5276271/l-etienne"}, "edited": false, "score": 0, "creation_date": 1473885888, "post_id": 39497959, "comment_id": 66316261, "body": "Yep, I suggested it in the answer - the <code>D3DXMatrixRotationY(&amp;viewRotYMat, rotY); D3DXMatrixRotationX(&amp;viewRotXMat, rotXZ);</code> part; the resulting matrix would be <code>viewRotMat = viewRotYMat*viewRotXMat;</code>"}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1473957768, "post_id": 39497959, "comment_id": 66348334, "body": "Euler angles for camera&#39;s are problematic due to <a href=\"https://en.wikipedia.org/wiki/Gimbal_lock\" rel=\"nofollow noreferrer\">gimbal lock</a> which is why you either need to constrain the rotation values to avoid the 90-degree cases or use a quaternion for the rotation instead."}], "tags": [], "owner": {"reputation": 2933, "user_id": 6350858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bfeae5d1ddef3ed5e81e88bdd30063f?s=128&d=identicon&r=PG&f=1", "display_name": "Ap31", "link": "https://stackoverflow.com/users/6350858/ap31"}, "is_accepted": false, "score": 2, "last_activity_date": 1473880233, "creation_date": 1473880233, "answer_id": 39497959, "question_id": 39497636, "link": "https://stackoverflow.com/questions/39497636/direct3d9-cant-get-vertical-fov-camera-working/39497959#39497959", "title": "Direct3D9 Can&#39;t get vertical fov camera working", "body": "<p>Your setup for rotation matrix looks a bit weird:</p>\n\n<pre><code>D3DXMatrixRotationY(&amp;viewRotYMat, rotY);\nD3DXMatrixRotationX(&amp;viewRotXMat, cos(rotY) * rotXZ);\nD3DXMatrixRotationZ(&amp;viewRotZMat, (sin(rotY) * rotXZ) * -1);\n</code></pre>\n\n<p>What exactly are you trying to achieve here? Usually you would just do a couple of axis rotations and then combine them, and your code looks like exactly that, but with messed order of matrix combination, which is then compensated with some explicit trigonometry. There's a good chance you could do the same with just</p>\n\n<pre><code>D3DXMatrixRotationY(&amp;viewRotYMat, rotY);\nD3DXMatrixRotationX(&amp;viewRotXMat, rotXZ);\n</code></pre>\n\n<p>Otherwise you could use <code>D3DXMatrixRotationYawPitchRoll</code> to at least combine the 3 angles in one line.</p>\n\n<p>As for the <code>rotY</code> value, remember that it is expected to be measured in radians, so 3-4 corresponds to 180\u00b0. Observing 45\u00b0 instead could be explained by <code>rotXZ</code> contribution.</p>\n"}], "owner": {"reputation": 57, "user_id": 5276271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf3f987307192505410528813917eff7?s=128&d=identicon&r=PG&f=1", "display_name": "L. Etienne", "link": "https://stackoverflow.com/users/5276271/l-etienne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1473880233, "creation_date": 1473879048, "question_id": 39497636, "link": "https://stackoverflow.com/questions/39497636/direct3d9-cant-get-vertical-fov-camera-working", "title": "Direct3D9 Can&#39;t get vertical fov camera working", "body": "<p>I'm trying getting started with Direct 3D. But i can't get the fov camera working. At least not the vertical movement. I figured out why but i still can't fix it.</p>\n\n<p>I'm using C++ (140) and D3DX9</p>\n\n<p>Code:</p>\n\n<pre><code>D3DXMATRIX viewMat;\n\nstatic D3DXMATRIX viewRotXMat;\nstatic D3DXMATRIX viewRotYMat;\nstatic D3DXMATRIX viewRotZMat;\n\nstatic float rotY = 0.0f;\nstatic float rotXZ = 0.0f;\n\nif (GetAsyncKeyState(VK_LEFT)) { rotY += 0.1f; }\nif (GetAsyncKeyState(VK_RIGHT)) { rotY -= 0.1f; }\n\nif (GetAsyncKeyState(VK_UP)) { rotXZ += 0.1f; }\nif (GetAsyncKeyState(VK_DOWN)) { rotXZ -= 0.1f; }\n\n//POINT pMO = getMouseOffset();\n//rotY += pMO.x / 10;\n//rotXZ += pMO.y / 10;\n\nD3DXMatrixLookAtLH(&amp;viewMat,\n    &amp;D3DXVECTOR3(10.0f, 10.0f, 0.0f), //pos\n    &amp;D3DXVECTOR3(0.0f, 10.0f, 0.0f),  //look-at\n    &amp;D3DXVECTOR3(0.0f, 1.0f, 0.0f)); //weird values\n\n\nD3DXMatrixRotationY(&amp;viewRotYMat, rotY);\nD3DXMatrixRotationX(&amp;viewRotXMat, cos(rotY) * rotXZ);\nD3DXMatrixRotationZ(&amp;viewRotZMat, (sin(rotY) * rotXZ) * -1);\n\nd3ddev-&gt;SetTransform(D3DTS_VIEW, &amp;(viewMat * viewRotXMat * viewRotYMat * viewRotZMat));\n\n\nD3DXMatrixPerspectiveFovLH(&amp;projMat,\n                           D3DXToRadian(90),\n                           (FLOAT)SIZEX / (FLOAT)SIZEY,\n                           1.0f,\n                           1000.0f);\nd3ddev-&gt;SetTransform(D3DTS_PROJECTION, &amp;projMat);\n</code></pre>\n\n<p>This is the important part of my RenderFrame function.\nThe reason why it won't work is because of \nrotY and rotXZ. For some reason when i turn the camera about 45\u00b0 ingame the rotY variable only changes to 3-4. So why the heck is't the D3DXMatrixRotationY function taking an angle as an parameter but some float? The parameter is even named angle...  I'm on this problem for about 3 days now. I hope you can help me out.</p>\n"}, {"tags": ["c++", "c++11", "constructor", "default", "move-semantics"], "answers": [{"comments": [{"owner": {"reputation": 2224, "user_id": 450946, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dce6b278914691e3eb31e4442a73cc2a?s=128&d=identicon&r=PG", "display_name": "KOLANICH", "link": "https://stackoverflow.com/users/450946/kolanich"}, "edited": false, "score": 0, "creation_date": 1473879560, "post_id": 39497687, "comment_id": 66313075, "body": "I didn&#39;t mean to copy of the object of class A. I meant constructing the class using rvalues without copying."}, {"owner": {"reputation": 2224, "user_id": 450946, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dce6b278914691e3eb31e4442a73cc2a?s=128&d=identicon&r=PG", "display_name": "KOLANICH", "link": "https://stackoverflow.com/users/450946/kolanich"}, "edited": false, "score": 0, "creation_date": 1473879650, "post_id": 39497687, "comment_id": 66313112, "body": "like <code>A aaa({{},{}}, shared_ptr&lt;B&gt;(new B()));</code> or <code>std::shared_ptr&lt;B&gt; b = ....; A bbb({{},{}}, b);</code>"}], "tags": [], "owner": {"reputation": 10521, "user_id": 1316462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de3149d5f602449f41083ca17a5ceab?s=128&d=identicon&r=PG&f=1", "display_name": "Jans", "link": "https://stackoverflow.com/users/1316462/jans"}, "is_accepted": false, "score": 0, "last_activity_date": 1473879246, "creation_date": 1473879246, "answer_id": 39497687, "question_id": 39497565, "link": "https://stackoverflow.com/questions/39497565/automatic-implicit-generation-of-ctors-utilising-move-semantics/39497687#39497687", "title": "Automatic implicit generation of ctors utilising move semantics", "body": "<p>You're defining the special member functions incorrectly, copy/move constructor is not defined in terms of class members, it defined in terms of the class.</p>\n\n<p>instead of </p>\n\n<pre><code>class_name(const member_1&amp;, ..., const member_n&amp;)\nclass_name(const member_1&amp;&amp;, ..., const member_n&amp;&amp;)\n</code></pre>\n\n<p>you have to define your copy/move constructor as:</p>\n\n<pre><code>class_name(const class_name&amp;) // copy-constructor\nclass_name(class_name&amp;&amp;) // move constructor\n</code></pre>\n\n<p>and inside it, use copy/move semantic. see <a href=\"http://eel.is/c++draft/class.copy\" rel=\"nofollow\">c++draft class.copy</a></p>\n"}, {"comments": [{"owner": {"reputation": 2224, "user_id": 450946, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dce6b278914691e3eb31e4442a73cc2a?s=128&d=identicon&r=PG", "display_name": "KOLANICH", "link": "https://stackoverflow.com/users/450946/kolanich"}, "edited": false, "score": 0, "creation_date": 1473882129, "post_id": 39498000, "comment_id": 66314394, "body": "Why do you use <code>AA&amp;&amp; a</code> in the prototype? Will this function also work in the case of lvalue references?"}, {"owner": {"reputation": 1123, "user_id": 2163127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e792d0e49f8208313f92a5a4785c588a?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2163127/dmitry"}, "reply_to_user": {"reputation": 2224, "user_id": 450946, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dce6b278914691e3eb31e4442a73cc2a?s=128&d=identicon&r=PG", "display_name": "KOLANICH", "link": "https://stackoverflow.com/users/450946/kolanich"}, "edited": false, "score": 1, "creation_date": 1473883164, "post_id": 39498000, "comment_id": 66314904, "body": "With template type parameters, &quot;&amp;&amp;&quot; has a special meaning: it will make a compiler deduce the template parameter to exactly same type as argument passed to a function (including all qualifiers)."}, {"owner": {"reputation": 1123, "user_id": 2163127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e792d0e49f8208313f92a5a4785c588a?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2163127/dmitry"}, "reply_to_user": {"reputation": 2224, "user_id": 450946, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dce6b278914691e3eb31e4442a73cc2a?s=128&d=identicon&r=PG", "display_name": "KOLANICH", "link": "https://stackoverflow.com/users/450946/kolanich"}, "edited": false, "score": 0, "creation_date": 1473884050, "post_id": 39498000, "comment_id": 66315339, "body": "I&#39;ve finally managed to fix all typos in my reply update :) Please check"}, {"owner": {"reputation": 2224, "user_id": 450946, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dce6b278914691e3eb31e4442a73cc2a?s=128&d=identicon&r=PG", "display_name": "KOLANICH", "link": "https://stackoverflow.com/users/450946/kolanich"}, "edited": false, "score": 0, "creation_date": 1473884775, "post_id": 39498000, "comment_id": 66315707, "body": "Thank you. <a href=\"https://isocpp.org/blog/2012/11/universal-references-in-c11-scott-meyers\" rel=\"nofollow noreferrer\">This article</a> about refs collapse was also useful."}], "tags": [], "owner": {"reputation": 1123, "user_id": 2163127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e792d0e49f8208313f92a5a4785c588a?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2163127/dmitry"}, "is_accepted": true, "score": 3, "last_activity_date": 1473883971, "last_edit_date": 1473883971, "creation_date": 1473880362, "answer_id": 39498000, "question_id": 39497565, "link": "https://stackoverflow.com/questions/39497565/automatic-implicit-generation-of-ctors-utilising-move-semantics/39498000#39498000", "title": "Automatic implicit generation of ctors utilising move semantics", "body": "<p>You can work around it by having a perfect-forwarding template constructor:</p>\n\n<pre><code>struct A {\n    std::vector&lt;B&gt; a;\n    std::shared_ptr&lt;B&gt; b;\n    template &lt;typename AA, typename BB&gt; A(AA&amp;&amp; a, BB&amp;&amp; b) :\n        a(std::forward&lt;AA&gt;(a)), b(std::forward&lt;BB&gt;(b)) { }\n};\n</code></pre>\n\n<p>If you need stricter parameter types requirement, you can also add <code>enable_if</code> or <code>static_assert</code>.</p>\n\n<p>Here's a little explanation how perfect forwarding works:</p>\n\n<pre><code>void func1(int&amp;&amp;) { }\ntemplate &lt;typename A&gt; void func2(A&amp;&amp; t) {\n    func3(t);\n    func4(std::forward&lt;A&gt;(t);\n}\ntemplate &lt;typename B&gt; void func3(B&amp;&amp;) { }\ntemplate &lt;typename C&gt; void func4(C&amp;&amp;) { }\n\nint foo;\nconst int bar;\n\nfunc1(foo); // ERROR\nfunc1(bar); // ERROR\nfunc1(std::move(foo)); // OK\n\nfunc2(foo); // OK, A = int&amp;, B = int&amp;, C = int&amp;\nfunc2(bar); // OK, A = const int&amp;, B = const int&amp;, C = const int&amp;\nfunc2(std::move(foo)); // OK, A = int&amp;&amp;, B = int&amp;, C = int&amp;&amp; &lt;- note how &amp;&amp; collapses to &amp; without std::forward\n</code></pre>\n"}], "owner": {"reputation": 2224, "user_id": 450946, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dce6b278914691e3eb31e4442a73cc2a?s=128&d=identicon&r=PG", "display_name": "KOLANICH", "link": "https://stackoverflow.com/users/450946/kolanich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 39498000, "answer_count": 2, "score": 3, "last_activity_date": 1473921096, "creation_date": 1473878779, "last_edit_date": 1473921096, "question_id": 39497565, "link": "https://stackoverflow.com/questions/39497565/automatic-implicit-generation-of-ctors-utilising-move-semantics", "title": "Automatic implicit generation of ctors utilising move semantics", "body": "<p>Let we have a class with n fields. Each field can be moved. So do we have to explicitly define 2^n constructors?</p>\n\n<p>The example with n=2:</p>\n\n<pre><code>struct A{\n std::vector&lt;B&gt; a;\n std::shared_ptr&lt;B&gt; b;\n A(std::vector&lt;B&gt; &amp;a, std::shared_ptr&lt;B&gt; &amp;b):a(a),b(b){};\n A(std::vector&lt;B&gt; &amp;a, std::shared_ptr&lt;B&gt; &amp;&amp;b):a(a),b(std::move(b)){};\n A(std::vector&lt;B&gt; &amp;&amp;a, std::shared_ptr&lt;B&gt; &amp;b):a(std::move(a)),b(b){};\n A(std::vector&lt;B&gt; &amp;&amp;a, std::shared_ptr&lt;B&gt; &amp;&amp;b):a(std::move(a)),b(std::move(b)){};\n};\n....\nA aaa({{},{}}, shared_ptr&lt;B&gt;(new B()));\nstd::shared_ptr&lt;B&gt; b = ....;\nA bbb({{},{}}, b);\n</code></pre>\n"}, {"tags": ["c++", "c++14", "template-specialization", "typetraits"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1473879023, "post_id": 39497536, "comment_id": 66312794, "body": "You have <code>operator=(A &amp; Bb)</code> without <code>T1</code>... But simple overload seems sufficient in your case."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1473879165, "post_id": 39497536, "comment_id": 66312872, "body": "<code>operator =</code> should return <code>A&amp;</code> and take const reference."}, {"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1473879172, "post_id": 39497536, "comment_id": 66312879, "body": "that is fixed (hopefully correctly). But now the compiler complains again."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1473879219, "post_id": 39497536, "comment_id": 66312907, "body": "<code>enable_if</code> should be <code>enable_if_t</code> also."}], "answers": [{"comments": [{"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "edited": false, "score": 0, "creation_date": 1473879629, "post_id": 39497780, "comment_id": 66313105, "body": "I definitely need the <code>enable_if_t</code> because that code is a simplified version of the actual code. Thanks a lot for the answer. I will test it on the actual code."}, {"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "edited": false, "score": 0, "creation_date": 1473879733, "post_id": 39497780, "comment_id": 66313159, "body": "Here is the compilation result in c++ shell. <a href=\"http://cpp.sh/2xuum\" rel=\"nofollow noreferrer\">cpp.sh/2xuum</a> ... <code>error: &#39;enable_if_t&#39; in namespace &#39;std&#39; does not name a template type</code>"}, {"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "edited": false, "score": 0, "creation_date": 1473880068, "post_id": 39497780, "comment_id": 66313339, "body": "If compiling for c++14, running the compiled program gives <code>6 6</code> instead of <code>6 30</code>. <a href=\"http://cpp.sh/5jpn\" rel=\"nofollow noreferrer\">cpp.sh/5jpn</a>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "edited": false, "score": 0, "creation_date": 1473880980, "post_id": 39497780, "comment_id": 66313819, "body": "copy assignment should not be template, you have to add <code>A&amp; operator=(const A&amp;)</code>"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1473884745, "post_id": 39497780, "comment_id": 66315687, "body": "Note that even if <a href=\"http://eel.is/c++draft/class.copy#22\" rel=\"nofollow noreferrer\">the implicitly declared copy assignment operator for class <code>X</code> has <code>X&amp;</code> as return type</a>, <a href=\"http://eel.is/c++draft/class.copy#19\" rel=\"nofollow noreferrer\">it is not a requirement for an user-declared one</a>. Am I wrong?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 1, "creation_date": 1473885332, "post_id": 39497780, "comment_id": 66315988, "body": "@skypjack: Indeed, it is not required, but it is good practice. As <code>operator ==</code> may return <code>std::string</code> instead of expected <code>bool</code>."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1473886180, "post_id": 39497780, "comment_id": 66316405, "body": "@Jarod42 Once I was playing with this stuff about return types of operators and here on SO someone said me - _+1 for this is an example of standard-guerrilla _. I&#39;m still laughing."}, {"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "edited": false, "score": 0, "creation_date": 1473960342, "post_id": 39497780, "comment_id": 66349650, "body": "I installed gcc 4.9.2. hopefully that will fit in with everything else... thanks again for the answer."}, {"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "edited": false, "score": 0, "creation_date": 1474039996, "post_id": 39497780, "comment_id": 66384635, "body": "By the way, why would operator <code>==</code> return <code>std::string</code>?"}, {"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "edited": false, "score": 0, "creation_date": 1474040346, "post_id": 39497780, "comment_id": 66384853, "body": "I guess i sort of get this from <a href=\"http://stackoverflow.com/questions/5625790/template-assignment-operator-overloading-mystery\" title=\"template assignment operator overloading mystery\">stackoverflow.com/questions/5625790/&hellip;</a> and <a href=\"http://stackoverflow.com/questions/11706040/whats-the-difference-between-assignment-operator-and-copy-constructor\" title=\"whats the difference between assignment operator and copy constructor\">stackoverflow.com/questions/11706040/&hellip;</a>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "edited": false, "score": 0, "creation_date": 1474047888, "post_id": 39497780, "comment_id": 66388646, "body": "@rxu: I said that <code>std::string operator ==(&#47;*..*&#47;)</code> is valid but surprising. We expected <code>bool operator ==(&#47;*..*&#47;)</code>, in the same way as we don&#39;t expect <code>void print(std::string s)</code> to erase a file named <code>s</code>. There are conventions/guide-lines (and it is better to understand them), and we should have good reasons to not follow them. To be coherent with built-in as <code>int</code>, and allow syntax <code>a = (b = c);</code>, assignment should return something which is assignable to its self type, so <code>A&amp; operator=(const A&amp;)</code>. In the same way for equality: <code>bool operator == (const A&amp;, const A&amp;)</code>."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 2, "last_activity_date": 1473881011, "last_edit_date": 1473881011, "creation_date": 1473879560, "answer_id": 39497780, "question_id": 39497536, "link": "https://stackoverflow.com/questions/39497536/specialize-same-operator-for-different-traits/39497780#39497780", "title": "Specialize same operator for different traits", "body": "<p>Your code should be</p>\n\n<pre><code>template &lt;typename T&gt;\nstd::enable_if_t&lt;is_int&lt;T&gt;::value, A&amp;&gt;\noperator=(const T&amp; input){\n    val = 2 * input; //Overload I\n    return *this;\n}\ntemplate &lt;typename T&gt;\nstd::enable_if_t&lt;is_A&lt;T&gt;::value, A&amp;&gt;\noperator=(T&amp; rhs){\n    val = 5 * rhs.val; //Overload II\n    return *this;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/BuqW2D\" rel=\"nofollow\">Demo</a></p>\n\n<p>But even simpler in your case</p>\n\n<pre><code>A&amp; operator=(int input){\n    val = 2 * input; //Overload I\n    return *this;\n}\n\nA&amp; operator=(const A&amp; rhs){\n    val = 5 * rhs.val; //Overload II\n    return *this;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "edited": false, "score": 0, "creation_date": 1473882658, "post_id": 39498519, "comment_id": 66314641, "body": "Thank you for the answer. i need to define my own traits and is_same won&#39;t work. I am posting another question for this."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "edited": false, "score": 0, "creation_date": 1473882830, "post_id": 39498519, "comment_id": 66314732, "body": "@rxu Well, the answer still applies. Use your own traits and it will work as well."}, {"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "edited": false, "score": 0, "creation_date": 1473883008, "post_id": 39498519, "comment_id": 66314831, "body": "the actual case is that float, int, short etc will be considered scalar. matrix type A, matrix type B, matrix type C will be considered is_A... and i have an ancient standard library. i can only copy a few things from the newest standard library."}, {"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "edited": false, "score": 0, "creation_date": 1473883031, "post_id": 39498519, "comment_id": 66314841, "body": "I guess i will comment what is simplified when i simplified code next time... my bad."}, {"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "edited": false, "score": 0, "creation_date": 1473883196, "post_id": 39498519, "comment_id": 66314922, "body": "&#39;<i>&#39;  looking for implementation of <code>decay</code>&#39;</i>&#39;"}, {"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "edited": false, "score": 0, "creation_date": 1473885057, "post_id": 39498519, "comment_id": 66315844, "body": "yup. that is how i copied std library. decay, and every dependencies of decay."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1473885447, "post_id": 39498519, "comment_id": 66316029, "body": "Note that you still have to write the <code>operator=(const A&amp;)</code> to handle it as it is special."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1473886019, "post_id": 39498519, "comment_id": 66316332, "body": "@Jarod42 Fair enough. It is left as an exercise to the reader. :-)"}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": true, "score": 2, "last_activity_date": 1473883042, "last_edit_date": 1473883042, "creation_date": 1473882426, "answer_id": 39498519, "question_id": 39497536, "link": "https://stackoverflow.com/questions/39497536/specialize-same-operator-for-different-traits/39498519#39498519", "title": "Specialize same operator for different traits", "body": "<p>Here is your code simplified and working as intended:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n#include&lt;utility&gt;\n\nclass A;\n\ntemplate &lt;typename T&gt;\nstruct is_A : std::false_type {};\ntemplate &lt;&gt; struct is_A&lt;A&gt; : std::true_type {};\n\ntemplate &lt;typename T&gt;\nstruct is_int : std::false_type {};\ntemplate &lt;&gt; struct is_int&lt;int&gt; : std::true_type {};\ntemplate &lt;&gt; struct is_int&lt;long&gt; : std::true_type {};\n\nclass A{\npublic:\n    int val;\n\n    void print(void){\n        std::cout &lt;&lt; val &lt;&lt; std::endl;\n    }\n\n    template &lt;typename T1&gt;\n    std::enable_if_t&lt;is_int&lt;std::decay_t&lt;T1&gt;&gt;::value, void&gt;\n    operator=(T1 &amp;&amp; input){\n        val = 2*std::forward&lt;T1&gt;(input);\n    }\n\n    template &lt;typename T1&gt;\n    std::enable_if_t&lt;is_A&lt;std::decay_t&lt;T1&gt;&gt;::value,void&gt;\n    operator=(T1 &amp;&amp; Bb){\n        val = 5*std::forward&lt;T1&gt;(Bb).val;\n    }\n};\n\nint main(void){\n    A Aa;\n    A Bb;\n    int in_a = 3;\n    Aa = in_a;\n    Bb = Aa;\n    Aa.print(); //This should give 6. (3x2)\n    Bb.print(); //This should give 30. (6x5)\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "edited": false, "score": 0, "creation_date": 1473885892, "post_id": 39499332, "comment_id": 66316264, "body": "this is the simplified code. i need the templates and specialization by traits for the actual code. There are many types of arrays for int, float, double etc as well as many types of scalar. Need the template for math between them."}, {"owner": {"reputation": 370, "user_id": 6222968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1109bd55a5c05ec45c07e85d89e2dc1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Chudinov", "link": "https://stackoverflow.com/users/6222968/alex-chudinov"}, "reply_to_user": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "edited": false, "score": 0, "creation_date": 1473930311, "post_id": 39499332, "comment_id": 66330510, "body": "It could be. However, it is hard to understand whole problem from a peace of code. Do you mean math like vector summation, multiplication and etc? Like in matlab?"}, {"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "edited": false, "score": 0, "creation_date": 1473960300, "post_id": 39499332, "comment_id": 66349626, "body": "yes. math as in the numpy library of python, and also in matlab."}, {"owner": {"reputation": 370, "user_id": 6222968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1109bd55a5c05ec45c07e85d89e2dc1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Chudinov", "link": "https://stackoverflow.com/users/6222968/alex-chudinov"}, "reply_to_user": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "edited": false, "score": 0, "creation_date": 1474029076, "post_id": 39499332, "comment_id": 66377390, "body": "It was interesting for me, cause I did a templates-based lib of a matrix math some time ago. If you will use templates then you can remove cycles. I mean if you use vector elementwise operation like summation of two vectors (Vector&lt;N&gt;), for example, you do not need to do a cycle &quot;for(int i = 0; i &lt; N;++i)&quot; inside."}], "tags": [], "owner": {"reputation": 370, "user_id": 6222968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1109bd55a5c05ec45c07e85d89e2dc1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Chudinov", "link": "https://stackoverflow.com/users/6222968/alex-chudinov"}, "is_accepted": false, "score": 1, "last_activity_date": 1473885693, "creation_date": 1473885693, "answer_id": 39499332, "question_id": 39497536, "link": "https://stackoverflow.com/questions/39497536/specialize-same-operator-for-different-traits/39499332#39499332", "title": "Specialize same operator for different traits", "body": "<p>Do you really need all the template magic for your simple case? </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass A;\n\nclass A{\npublic:\n    int val;\n\n    void print(void){\n        std::cout &lt;&lt; val &lt;&lt; std::endl;\n    }\n\n    void operator =(const A&amp; in){ val = in.val*5; }\n    void operator =(int in) { val = in*2; }\n};\n\n\nint main(void){\n    A Aa;\n    A Bb;\n    Aa = 3;\n    Bb = Aa;\n    Aa.print(); //This should give 6. (3x2)\n    Bb.print(); //This should give 30. (6x5)\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 1, "accepted_answer_id": 39498519, "answer_count": 3, "score": 4, "last_activity_date": 1473885693, "creation_date": 1473878648, "last_edit_date": 1473882469, "question_id": 39497536, "link": "https://stackoverflow.com/questions/39497536/specialize-same-operator-for-different-traits", "title": "Specialize same operator for different traits", "body": "<p>I want to do the following with specialization by traits.</p>\n\n<ol>\n<li><p><code>Array Aa = Scalar in_a</code> would use <code>overload I</code>.</p></li>\n<li><p><code>Array Aa = Array Bb</code> would use <code>overload II</code>.</p></li>\n</ol>\n\n<p>In the following code, <code>overload II</code> never get used.</p>\n\n<p>Someone mentioned that <code>T1</code> cannot be deduced in <code>overload II</code>.</p>\n\n<p>How to fix that?</p>\n\n<p>I used the C++ shell to compile the code with C++14.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nusing namespace std;\nclass A; // forward declaration.\n\ntemplate &lt;typename T&gt;\nstruct is_A : false_type {};\ntemplate &lt;&gt; struct is_A&lt;A&gt; : true_type {};\n\ntemplate &lt;typename T&gt;\nstruct is_int : false_type {};\ntemplate &lt;&gt; struct is_int&lt;int&gt; : true_type {};\ntemplate &lt;&gt; struct is_int&lt;long&gt; : true_type {};\n\nclass A{\n    public:\n        int val;\n        void print(void){\n            std::cout &lt;&lt; val &lt;&lt; std::endl;\n        }\n        template &lt;typename T1&gt;\n        enable_if_t&lt;is_int&lt;T1&gt;::value,void&gt;\n        operator=(const T1 &amp; input){\n            val = 2*input; //Overload I\n        }\n        template &lt;typename T1&gt;\n        enable_if_t&lt;is_A&lt;T1&gt;::value,void&gt;\n        operator=(const T1 &amp; Bb){\n            val = 5*Bb.val; //Overload II\n        }\n};\n\nint main(void){\n    A Aa;\n    A Bb;\n    int in_a = 3;\n    Aa = in_a; //This uses overload I as intended.\n    Bb = Aa; //I want this to use overload II, but\n             //actually overload I is used.\n             //This leads to an error during compilation.\n    Aa.print(); //This should give 6. (3x2)\n    Bb.print(); //This should give 30. (6x5)\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "c++11", "random"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1473878519, "post_id": 39497472, "comment_id": 66312511, "body": "What problems do you have calling the function? That you get the same numbers? That&#39;s probably because you call <code>srand(time(0))</code> within the same second twice, resetting the seed. Move the <code>srand</code> call to the <code>main</code> function before you start doing anything else."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1473878607, "post_id": 39497472, "comment_id": 66312562, "body": "Please read <a href=\"http://en.cppreference.com/w/cpp/numeric/random\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/numeric/random</a> and watch <a href=\"https://channel9.msdn.com/Events/GoingNative/2013/rand-Considered-Harmful\" rel=\"nofollow noreferrer\">channel9.msdn.com/Events/GoingNative/2013/&hellip;</a>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1473878832, "post_id": 39497472, "comment_id": 66312684, "body": "Or is the problem that you want to use the same function, but with different <i>range</i> for the random number? Then pass the range as an argument?"}], "owner": {"user_type": "does_not_exist", "display_name": "user4852127"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "closed_date": 1473878553, "answer_count": 0, "score": 0, "last_activity_date": 1473911121, "creation_date": 1473878384, "last_edit_date": 1473911121, "question_id": 39497472, "link": "https://stackoverflow.com/questions/39497472/how-to-initialize-a-new-array-of-integers-to-random-number-using-the-same-functi", "closed_reason": "Duplicate", "title": "How to initialize a new array of integers to random number using the same function?", "body": "<p>We are tasked to display 100 numbers ranging between 1 -30 using the read_array function, find its mode using a different function and display the result using another one. Then, we have to use the same function to initialize a new integer array with same size (100) to random numbers but this time, the range has to be between 1 and 200. I will then have to use this range to find the 2 smallest number. There's more into the that but my only concern right now is what I am asking for. I'm a little clueless on how to go about it.  Here's what I have:</p>\n\n<pre><code>//Function Prototypes\nvoid read_array(int [], int);\nvoid print_array (int [], int);\nvoid sortRand (int[], int);\nvoid Mode (int[], int);\nvoid Two_smallest(int [], int, int*, int*,int*, int*); //Part2\n\n\nvoid read_array(int nums[], int SIZE)\n            {\n                srand(time(0));\n                for (int i = 0; i &lt; SIZE; i++)\n                {\n                    nums[i] = (rand() % 30) + 1;\n                }\n\n            }\n</code></pre>\n\n<p>P.S. I am not getting the same sequence. My code generates different random numbers every time I run the program so that is not the issue. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "edited": false, "score": 0, "creation_date": 1473878237, "post_id": 39497391, "comment_id": 66312359, "body": "Assignment operator is defined in this case, but comparsion operator is never defined by default."}, {"owner": {"reputation": 35, "user_id": 6591691, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9b3oq.png?s=128&g=1", "display_name": "Bartholomew", "link": "https://stackoverflow.com/users/6591691/bartholomew"}, "reply_to_user": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "edited": false, "score": 0, "creation_date": 1473878287, "post_id": 39497391, "comment_id": 66312383, "body": "@BlackMoses How can I define the comparison operator?"}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1473878295, "post_id": 39497391, "comment_id": 66312387, "body": "comparing two values is easy. comparing two structures/objects ISN&#39;T. are two objects equal if they contain the same values? or only if they&#39;re the SAME object?"}, {"owner": {"reputation": 35, "user_id": 6591691, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9b3oq.png?s=128&g=1", "display_name": "Bartholomew", "link": "https://stackoverflow.com/users/6591691/bartholomew"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1473878415, "post_id": 39497391, "comment_id": 66312448, "body": "@MarcB This isn&#39;t my code, it&#39;s my professor&#39;s so I don&#39;t know what she meant. But I assume she meant same values?"}], "answers": [{"tags": [], "owner": {"reputation": 2933, "user_id": 6350858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bfeae5d1ddef3ed5e81e88bdd30063f?s=128&d=identicon&r=PG&f=1", "display_name": "Ap31", "link": "https://stackoverflow.com/users/6350858/ap31"}, "is_accepted": false, "score": 0, "last_activity_date": 1473878489, "last_edit_date": 1495540856, "creation_date": 1473878489, "answer_id": 39497501, "question_id": 39497391, "link": "https://stackoverflow.com/questions/39497391/i-cant-set-two-user-defined-class-declared-variables-equal-to-each-other/39497501#39497501", "title": "I can&#39;t set two user-defined class declared variables equal to each other?", "body": "<p>C++ supplies a class with a default constructor, copy constructor, assignment operator (that you use here) and move constructor/assignment.</p>\n\n<p>For better or worse, it does not generate operator==, so you'll have to do it yourself (look up operator overloading).</p>\n\n<p>Check <a href=\"https://stackoverflow.com/questions/9857133/why-do-i-have-to-overload-operator-in-pod-types\">this question</a> for reasons behind this and further reference</p>\n"}, {"tags": [], "owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "is_accepted": true, "score": 2, "last_activity_date": 1473878497, "creation_date": 1473878497, "answer_id": 39497502, "question_id": 39497391, "link": "https://stackoverflow.com/questions/39497391/i-cant-set-two-user-defined-class-declared-variables-equal-to-each-other/39497502#39497502", "title": "I can&#39;t set two user-defined class declared variables equal to each other?", "body": "<p>You need to provide comparsion operator:</p>\n\n<pre><code>struct student_record\n{\n    string firstname, lastname;\n    double age, income;\n    int number_of_children;\n    char sex;\n\n    //operator declaration\n    bool operator==(student_record const&amp; other) const;\n\n};\n\n//operator definition\nbool student_record::operator==(student_record const&amp; other) const\n{\n    return (this-&gt;firstname == other.firstname &amp;&amp;\n            this-&gt;lastname == other.lastname &amp;&amp;\n            this-&gt;sex == other.sex); //you can compare other members if needed\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 6591691, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9b3oq.png?s=128&g=1", "display_name": "Bartholomew", "link": "https://stackoverflow.com/users/6591691/bartholomew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 39497502, "answer_count": 2, "score": 0, "last_activity_date": 1473878497, "creation_date": 1473878097, "question_id": 39497391, "link": "https://stackoverflow.com/questions/39497391/i-cant-set-two-user-defined-class-declared-variables-equal-to-each-other", "title": "I can&#39;t set two user-defined class declared variables equal to each other?", "body": "<p>So I am describing output for a foundations of computer science in c++ course, and the directions asked me to copy and paste the following code into my compiler:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nstruct student_record\n{\n    string firstname, lastname;\n    double age, income;\n    int number_of_children;\n    char sex;\n};\n\nint main()\n{\n\n    student_record Mary;\n    student_record Susan;\n\n    cout&lt;&lt;\"Enter the firstname and lastname: \";\n    cin&gt;&gt;Mary.firstname;\n    cin&gt;&gt;Mary.lastname;\n    cout&lt;&lt;\"Enter age: \";\n    cin&gt;&gt;Mary.age;\n    cout&lt;&lt;\"Enter income: \";\n    cin&gt;&gt;Mary.income;\n    cout&lt;&lt;\"Enter number of children: \";\n    cin&gt;&gt;Mary.number_of_children;\n    cout&lt;&lt;\"Enter sex: \";\n    cin&gt;&gt;Mary.sex;\n\n    Susan = Mary;\n\nif (Susan == Mary)// I get the error here: Invalid operands to binary expression('student_record' and 'student_record')\n{\n    cout&lt;&lt;Susan.firstname&lt;&lt;\"    \"&lt;&lt;Mary.lastname&lt;&lt;endl;\n    cout&lt;&lt;Susan.age&lt;&lt;endl;\n    cout&lt;&lt;Susan.income&lt;&lt;endl;\n    cout&lt;&lt;Susan.number_of_children&lt;&lt;endl;\n    cout&lt;&lt;Susan.sex&lt;&lt;endl;\n}\nreturn 0;\n}\n</code></pre>\n\n<p>I don't quite understand what the problem is as both are of the same type and also the line \"Susan = Mary;\" doesn't give an error. Also, the questions for this program on my lab does not make it seem as if I was supposed to get an error, so I am confused. Thank You for any help.</p>\n"}, {"tags": ["c++", "opengl", "glsl", "glfw", "glew"], "comments": [{"owner": {"reputation": 472, "user_id": 6300197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/USORi.png?s=128&g=1", "display_name": "MarGenDo", "link": "https://stackoverflow.com/users/6300197/margendo"}, "edited": false, "score": 0, "creation_date": 1473881485, "post_id": 39497385, "comment_id": 66314090, "body": "It can be a shader compilation error if it doesn&#39;t show anything. Are you using <code>glGetShaderInfoLog</code> function after you compile the shader?"}, {"owner": {"reputation": 59, "user_id": 5388968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-lFBwSL9ih14/AAAAAAAAAAI/AAAAAAAAAF0/LfjPoJYRScU/photo.jpg?sz=128", "display_name": "Kiryu144", "link": "https://stackoverflow.com/users/5388968/kiryu144"}, "reply_to_user": {"reputation": 472, "user_id": 6300197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/USORi.png?s=128&g=1", "display_name": "MarGenDo", "link": "https://stackoverflow.com/users/6300197/margendo"}, "edited": false, "score": 0, "creation_date": 1473882412, "post_id": 39497385, "comment_id": 66314522, "body": "No, it&#39;s definitely no shader error. Just as I described: When I add &quot;vertPos.x/.y&quot; to the gl_Position, then it does show something. Not the right thing, but still."}, {"owner": {"reputation": 472, "user_id": 6300197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/USORi.png?s=128&g=1", "display_name": "MarGenDo", "link": "https://stackoverflow.com/users/6300197/margendo"}, "edited": false, "score": 0, "creation_date": 1473883221, "post_id": 39497385, "comment_id": 66314936, "body": "Just a guess but maybe the problem occurs because you are multiplying <b>float</b> by <b>int</b> here: <code>gl_Position.x = vertPos.x + position.x*2 - 1;</code>. I think that <code>position</code> is something between  0 and 1 and when you multiply that by an <i>int</i> you can get weird results. Maybe change the ints to floats: <code>gl_Position.x = vertPos.x + position.x*2.0 - 1.0;</code>"}, {"owner": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 0, "creation_date": 1473909781, "post_id": 39497385, "comment_id": 66322595, "body": "You&#39;ve probably pushed everything outside of clip-space. We&#39;ve no idea what the magnitude of values you are using for <code>size</code> are. If the end result of this math is <code>x</code> or <code>y</code> being greater than <code>w</code> or less than <code>-w</code> (where <code>w</code> is <b>1.0</b> in this case), the vertex is in a position outside your viewing volume. All vertices may be outside your viewing volume, in which case nothing will be shown. Likewise, the values used may cause polygon winding order to reverse and then you can run into culling issues on geometry that IS within the viewing volume."}, {"owner": {"reputation": 59, "user_id": 5388968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-lFBwSL9ih14/AAAAAAAAAAI/AAAAAAAAAF0/LfjPoJYRScU/photo.jpg?sz=128", "display_name": "Kiryu144", "link": "https://stackoverflow.com/users/5388968/kiryu144"}, "reply_to_user": {"reputation": 472, "user_id": 6300197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/USORi.png?s=128&g=1", "display_name": "MarGenDo", "link": "https://stackoverflow.com/users/6300197/margendo"}, "edited": false, "score": 0, "creation_date": 1473921592, "post_id": 39497385, "comment_id": 66326052, "body": "@MarGenDo I see what you mean, but sadly it&#39;s not the problem."}, {"owner": {"reputation": 59, "user_id": 5388968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-lFBwSL9ih14/AAAAAAAAAAI/AAAAAAAAAF0/LfjPoJYRScU/photo.jpg?sz=128", "display_name": "Kiryu144", "link": "https://stackoverflow.com/users/5388968/kiryu144"}, "reply_to_user": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 0, "creation_date": 1473921672, "post_id": 39497385, "comment_id": 66326073, "body": "@Andon M. Coleman I made sure it&#39;s not. My values are <code>Pos:[0.138889, 0.222222] Size:[0.986111, 0.555556]</code>"}, {"owner": {"reputation": 59, "user_id": 5388968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-lFBwSL9ih14/AAAAAAAAAAI/AAAAAAAAAF0/LfjPoJYRScU/photo.jpg?sz=128", "display_name": "Kiryu144", "link": "https://stackoverflow.com/users/5388968/kiryu144"}, "edited": false, "score": 0, "creation_date": 1473921810, "post_id": 39497385, "comment_id": 66326139, "body": "Whats strange is, even when I add something odd to the vertex shader like <code>if(gl_VertexID == 3) gl_Position.x += 0.5;</code> nothing changes. It still shows the red small box."}, {"owner": {"reputation": 59, "user_id": 5388968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-lFBwSL9ih14/AAAAAAAAAAI/AAAAAAAAAF0/LfjPoJYRScU/photo.jpg?sz=128", "display_name": "Kiryu144", "link": "https://stackoverflow.com/users/5388968/kiryu144"}, "edited": false, "score": 0, "creation_date": 1473931489, "post_id": 39497385, "comment_id": 66331260, "body": "With further testing I found out that position works fine. It&#39;s only the size that makes problems."}, {"owner": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 0, "creation_date": 1473944179, "post_id": 39497385, "comment_id": 66339055, "body": "Yeah, well 0.138889 + 0.986111 = 1.125, so even before any floating-point rounding, you&#39;re already outside the viewing volume."}, {"owner": {"reputation": 59, "user_id": 5388968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-lFBwSL9ih14/AAAAAAAAAAI/AAAAAAAAAF0/LfjPoJYRScU/photo.jpg?sz=128", "display_name": "Kiryu144", "link": "https://stackoverflow.com/users/5388968/kiryu144"}, "reply_to_user": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 0, "creation_date": 1473945166, "post_id": 39497385, "comment_id": 66339770, "body": "@AndonM.Coleman Yea, some vertices. But if you look at the shader, the first vertex is at <code>position</code>. And some others are inside too."}, {"owner": {"reputation": 59, "user_id": 5388968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-lFBwSL9ih14/AAAAAAAAAAI/AAAAAAAAAF0/LfjPoJYRScU/photo.jpg?sz=128", "display_name": "Kiryu144", "link": "https://stackoverflow.com/users/5388968/kiryu144"}, "edited": false, "score": 0, "creation_date": 1473945300, "post_id": 39497385, "comment_id": 66339866, "body": "I&#39;m almost 100% sure that gl_vertexID does not work. It is always 0."}, {"owner": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 0, "creation_date": 1473945801, "post_id": 39497385, "comment_id": 66340256, "body": "It definitely works, even if you are not doing indexed rendering the vertex ID is implicitly generated when you make calls like <code>glDrawArrays (...)</code>. You would have to be doing immediate mode rendering for it not to work and even then, I think implementations will wind up tagging immediate vertices with an ID."}, {"owner": {"reputation": 59, "user_id": 5388968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-lFBwSL9ih14/AAAAAAAAAAI/AAAAAAAAAF0/LfjPoJYRScU/photo.jpg?sz=128", "display_name": "Kiryu144", "link": "https://stackoverflow.com/users/5388968/kiryu144"}, "reply_to_user": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 0, "creation_date": 1473950934, "post_id": 39497385, "comment_id": 66344076, "body": "@AndonM.Coleman Even if I change it to something like  <a href=\"http://pastebin.com/8rLZx0CR\" rel=\"nofollow noreferrer\">that</a> . It has no effect. My small red box does not change in any way."}, {"owner": {"reputation": 59, "user_id": 5388968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-lFBwSL9ih14/AAAAAAAAAAI/AAAAAAAAAF0/LfjPoJYRScU/photo.jpg?sz=128", "display_name": "Kiryu144", "link": "https://stackoverflow.com/users/5388968/kiryu144"}, "edited": false, "score": 0, "creation_date": 1473951041, "post_id": 39497385, "comment_id": 66344144, "body": "It&#39;s pretty messy here. Would it be a big of a problem to move this conversation to a chat platform like google hangouts or something? I&#39;d be pretty happy if you could do that. I really don&#39;t know what to do."}, {"owner": {"reputation": 472, "user_id": 6300197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/USORi.png?s=128&g=1", "display_name": "MarGenDo", "link": "https://stackoverflow.com/users/6300197/margendo"}, "edited": false, "score": 0, "creation_date": 1473969477, "post_id": 39497385, "comment_id": 66354427, "body": "Let us help you here for now. Could you please post your fragment shader, code for setting uniforms and <code>glDrawArrays</code> call?"}, {"owner": {"reputation": 59, "user_id": 5388968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-lFBwSL9ih14/AAAAAAAAAAI/AAAAAAAAAF0/LfjPoJYRScU/photo.jpg?sz=128", "display_name": "Kiryu144", "link": "https://stackoverflow.com/users/5388968/kiryu144"}, "edited": false, "score": 0, "creation_date": 1474010832, "post_id": 39497385, "comment_id": 66366980, "body": "The &quot;problem&quot; is that I have all these different functions splittet in different classes. I tried anyway to visualize it. <a href=\"http://pastebin.com/4X79Jhiy\" rel=\"nofollow noreferrer\">fragment shader</a> <a href=\"http://pastebin.com/AJrTM2g6\" rel=\"nofollow noreferrer\">c++ code</a>"}, {"owner": {"reputation": 59, "user_id": 5388968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-lFBwSL9ih14/AAAAAAAAAAI/AAAAAAAAAF0/LfjPoJYRScU/photo.jpg?sz=128", "display_name": "Kiryu144", "link": "https://stackoverflow.com/users/5388968/kiryu144"}, "edited": false, "score": 0, "creation_date": 1474010924, "post_id": 39497385, "comment_id": 66367025, "body": "<a href=\"https://github.com/Kiryu144/AmethystReworked/tree/master/source\" rel=\"nofollow noreferrer\">If something is still unclear</a>"}, {"owner": {"reputation": 59, "user_id": 5388968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-lFBwSL9ih14/AAAAAAAAAAI/AAAAAAAAAF0/LfjPoJYRScU/photo.jpg?sz=128", "display_name": "Kiryu144", "link": "https://stackoverflow.com/users/5388968/kiryu144"}, "reply_to_user": {"reputation": 472, "user_id": 6300197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/USORi.png?s=128&g=1", "display_name": "MarGenDo", "link": "https://stackoverflow.com/users/6300197/margendo"}, "edited": false, "score": 0, "creation_date": 1474152768, "post_id": 39497385, "comment_id": 66416475, "body": "@MarGenDo I should have linked to you.. My bad."}, {"owner": {"reputation": 1688, "user_id": 7042011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7adfcdad8d36cc14d0c75dada3b301e2?s=128&d=identicon&r=PG&f=1", "display_name": "OutOfBound", "link": "https://stackoverflow.com/users/7042011/outofbound"}, "edited": false, "score": 0, "creation_date": 1479224367, "post_id": 39497385, "comment_id": 68461753, "body": "If you want to find out, if the Vertex_ID is working correctly, you should draw two triangles filling the whole screen and visualise the ID with colors.  If you think the id is between 0..6, than you should set &quot;fragColor = vec3(1.0f) / 6 * gl_VertexID&quot;"}], "owner": {"reputation": 59, "user_id": 5388968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-lFBwSL9ih14/AAAAAAAAAAI/AAAAAAAAAF0/LfjPoJYRScU/photo.jpg?sz=128", "display_name": "Kiryu144", "link": "https://stackoverflow.com/users/5388968/kiryu144"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 518, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1473878087, "creation_date": 1473878087, "question_id": 39497385, "link": "https://stackoverflow.com/questions/39497385/glsl-gl-vertexid-is-not-incrementing", "title": "GLSL gl_VertexID is not incrementing", "body": "<p>I'm currently in the process of making a 2D Game Engine in C++ with GLEW and GLFW!\nAt the moment I'm working on sprites and ways to render them. I want to be able to resize them as I need it, but strangely my attempt does not work out. My way of realising that, is to simply create a VBO with 6 vertices which all have (0, 0) as the position. And then I'd resize and set their position with the vertex shader. </p>\n\n<p><strong>VertexShader.vert:</strong></p>\n\n<pre><code>#version 140\n\nin vec2 vertPos;\nin vec2 vertUV;\n\nout vec2 fragPos;\nout vec2 fragUV;\n\nuniform vec2 position;\nuniform vec2 size;\n\nvoid main(){\n    //POSITION\n    gl_Position.z = 0.0;\n    gl_Position.w = 1.0;\n\n    gl_Position.x = position.x*2 - 1;\n    gl_Position.y = position.y*2 - 1;\n\n    //SIZE\n    switch(gl_VertexID){\n        case 1: gl_Position.x += size.x; break;\n        case 5: gl_Position.x += size.x; break;\n\n        case 2: gl_Position.y += size.y; break;\n        case 3: gl_Position.y += size.y; break;\n\n        case 4: gl_Position.x += size.x; gl_Position.y += size.y; break;\n    }\n\n    fragPos = vertPos;\n    fragUV = vec2(vertUV.x, 1.0 - vertUV.y); \n}\n</code></pre>\n\n<p>But this does, strangely, not work how I expected. It does not show anything.\nWhen I add vertPos to glPosition like so:</p>\n\n<pre><code>gl_Position.x = vertPos.x + position.x*2 - 1;\ngl_Position.y = vertPos.y + position.y*2 - 1;\n</code></pre>\n\n<p>And also create the VBO with some starting \"shape\" it looks like \n<a href=\"http://i.stack.imgur.com/rIKY8.png\" rel=\"nofollow\">that</a>.\nI really have no clue why my attemp does not work out.</p>\n"}, {"tags": ["c++", "multithreading", "amazon-web-services", "asynchronous"], "answers": [{"tags": [], "owner": {"reputation": 7598, "user_id": 734691, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/QywkD.jpg?s=128&g=1", "display_name": "Jonathan Henson", "link": "https://stackoverflow.com/users/734691/jonathan-henson"}, "is_accepted": false, "score": 1, "last_activity_date": 1487449904, "last_edit_date": 1487449904, "creation_date": 1486074519, "answer_id": 42013516, "question_id": 39497134, "link": "https://stackoverflow.com/questions/39497134/wait-for-async-calls-to-return-before-exiting-program-when-using-aws-cpp-sdk/42013516#42013516", "title": "Wait for async calls to return before exiting program when using AWS-cpp-sdk", "body": "<p>You are responsible for making sure your requests are done before calling ShutdownAPI(). This is usually only an issue in contrived \"sample app\" sorts of scenarios where you are performing the operation directly inside your main() function. You also need to make sure the SQS client is deleted before ShutdownAPI is called. </p>\n\n<p>On option is to use a <code>std::condition_variable</code>(semaphore) to synchronize before the exit. You can pass the semaphore to your callback and <code>notify_one()</code> at the end of the callback. Then, before shutdown you can call <code>wait()</code> on the semaphore.</p>\n"}], "owner": {"reputation": 91, "user_id": 2747428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f295d13bcbe8d907d93c8d5c9455694b?s=128&d=identicon&r=PG&f=1", "display_name": "dreadlord2203", "link": "https://stackoverflow.com/users/2747428/dreadlord2203"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487449904, "creation_date": 1473877224, "question_id": 39497134, "link": "https://stackoverflow.com/questions/39497134/wait-for-async-calls-to-return-before-exiting-program-when-using-aws-cpp-sdk", "title": "Wait for async calls to return before exiting program when using AWS-cpp-sdk", "body": "<p>I am doing a POC on using the AWS-cpp-sdk\nFor which I wrote a simple program to send messages to the SQS queue.</p>\n\n<p>I am using the SendMessageAsync method to send the messages like below.</p>\n\n<p><code>sqsClient-&gt;SendMessageAsync(sendMessageRequest, &amp;sendMessageCallBack);</code></p>\n\n<p>My program crashes since my program is exiting before the async method returns and <code>Aws::ShutdownAPI(options);</code> terminates the threads created by the Async method call.</p>\n\n<p>I found that the AWS-sdk for JAVA suggests the following for exactly this scenario. \n`</p>\n\n<pre><code>/**\n * Shuts down the client, releasing all managed resources. This includes\n * forcibly terminating all pending asynchronous service calls. Clients who\n * wish to give pending asynchronous service calls time to complete should\n * call getExecutorService().shutdown() prior to calling this method.\n */\n@Override\npublic void shutdown() {\n    super.shutdown();\n    executorService.shutdownNow();\n}`\n</code></pre>\n\n<p>I am unable to find something equivalent in the AWS cpp SDK. \nCan someone suggest what would be the best way to fix this issue.</p>\n"}, {"tags": ["c++", "codeblocks"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 8, "creation_date": 1473874546, "post_id": 39496475, "comment_id": 66310496, "body": "The right tool to solve such problems is your debugger. You should step through your code line-by-line <i>before</i> asking on Stack Overflow. For more help, please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs (by Eric Lippert)</a>. At a minimum, you should &#91;edit] your question to include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example that reproduces your problem, along with the observations you made in the debugger."}, {"owner": {"reputation": 4320, "user_id": 5103620, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8ae06ea53a316cc879b9100b3ff25bfc?s=128&d=identicon&r=PG", "display_name": "Sebastian Lenartowicz", "link": "https://stackoverflow.com/users/5103620/sebastian-lenartowicz"}, "edited": false, "score": 1, "creation_date": 1473875545, "post_id": 39496475, "comment_id": 66310976, "body": "&quot;It&#39;s not working&quot; isn&#39;t specific enough. Is there a specific issue you&#39;re having, or are you just looking for code review? If the former, please edit your question to include the problem you&#39;re having. If the latter, you might want to consider <a href=\"http://codereview.stackexchange.com/\">CodeReview.SE</a>."}], "owner": {"reputation": 3, "user_id": 6016291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67de477edab4304ff478e272faea3acf?s=128&d=identicon&r=PG&f=1", "display_name": "Serph", "link": "https://stackoverflow.com/users/6016291/serph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1473958909, "creation_date": 1473874453, "last_edit_date": 1473958909, "question_id": 39496475, "link": "https://stackoverflow.com/questions/39496475/single-peg-hanoi-tower", "title": "Single Peg Hanoi Tower", "body": "<p>Didn't get any help, so delete this post</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2015", "visual-studio-2005", "static-libraries"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 5, "creation_date": 1473874527, "post_id": 39496432, "comment_id": 66310482, "body": "I would trust this question more <a href=\"http://stackoverflow.com/questions/1947822/runtime-issues-while-mixing-libraries-from-different-versions-of-visual-studio?rq=1\">Runtime issues while mixing libraries from different versions of Visual Studio</a>"}, {"owner": {"reputation": 41, "user_id": 5609586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e9a8e01aa00beb04303a62957fe6b0d?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/5609586/william"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1473875233, "post_id": 39496432, "comment_id": 66310840, "body": "Thanks for the reference Bo Persson"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5609586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e9a8e01aa00beb04303a62957fe6b0d?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/5609586/william"}, "edited": false, "score": 1, "creation_date": 1473875268, "post_id": 39496640, "comment_id": 66310857, "body": "I will recompile all my static libraries under 2015 in this case."}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": true, "score": 4, "last_activity_date": 1473875477, "last_edit_date": 1473875477, "creation_date": 1473875041, "answer_id": 39496640, "question_id": 39496432, "link": "https://stackoverflow.com/questions/39496432/using-static-libraries-compiled-c-under-vs80-visual-studio-2005-in-a-visual/39496640#39496640", "title": "Using static libraries compiled C++ under vs80 (Visual Studio 2005) in a Visual Studio project compiling under c++ vs140 (Visual Studio 2015)", "body": "<p>Generally you need to build <em>all</em> of your code (including libraries you use) with the <em>exact</em> same compiler. There's no guarantee that code generated by different compilers (not even different minor versions) can be linked together and produce usable results - it may <em>seem</em> to work sometimes, only to turn into nasty and hard to diagnose problems later at runtime, so just don't do that.</p>\n"}], "owner": {"reputation": 41, "user_id": 5609586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e9a8e01aa00beb04303a62957fe6b0d?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/5609586/william"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 39496640, "answer_count": 1, "score": 2, "last_activity_date": 1473875477, "creation_date": 1473874263, "last_edit_date": 1495541700, "question_id": 39496432, "link": "https://stackoverflow.com/questions/39496432/using-static-libraries-compiled-c-under-vs80-visual-studio-2005-in-a-visual", "title": "Using static libraries compiled C++ under vs80 (Visual Studio 2005) in a Visual Studio project compiling under c++ vs140 (Visual Studio 2015)", "body": "<p>Is it possible to use a C++ static library (.lib) compiled using vs80 (Visual Studio 2005) in a Visual Studio 2015 c++ project (vs140)?</p>\n\n<p>In terms of similar questions, I found <a href=\"https://stackoverflow.com/questions/723416/can-i-use-a-visual-studio-6-compiled-c-static-library-in-visual-studio-2008\">'Can I use a Visual Studio 6 compiled C++ static library in Visual Studio 2008?'</a>, and the answer seems to be 'yes with caveats' in this case, but I am inexperienced with static libraries and was wondering if the same held true for c++ static libraries compiled under vs80 to vs140.</p>\n\n<p>EDIT: I want to add that the library I am attempting to port is fairly small and simple, and doesn't access globals or rely on 'extern C' in any way</p>\n"}, {"tags": ["c++", "multithreading", "stdthread"], "comments": [{"owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "edited": false, "score": 2, "creation_date": 1473874289, "post_id": 39496421, "comment_id": 66310341, "body": "Explicit is better than implicit."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1473874315, "post_id": 39496421, "comment_id": 66310356, "body": "If you forgot about a thread you have a bug. Hiding that bug is not helpful."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1473874331, "post_id": 39496421, "comment_id": 66310365, "body": "Why would you expect such actually?"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1473874456, "post_id": 39496421, "comment_id": 66310444, "body": "What about if you want to start 5 threads then join them all in a loop? Could you do that with your implementation?"}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 0, "creation_date": 1473874548, "post_id": 39496421, "comment_id": 66310498, "body": "Joining a thread halts its execution until the thread to join to ends. Allowing it as default behavior would just break behavior since a thread would start and immediately halt."}], "owner": {"reputation": 1471, "user_id": 3655463, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c567c095653589d1b50f37aeb72dbab1?s=128&d=identicon&r=PG&f=1", "display_name": "Mateusz Wojtczak", "link": "https://stackoverflow.com/users/3655463/mateusz-wojtczak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1473874457, "answer_count": 0, "score": 0, "last_activity_date": 1473874386, "creation_date": 1473874220, "last_edit_date": 1473874386, "question_id": 39496421, "link": "https://stackoverflow.com/questions/39496421/why-is-join-not-executed-by-default", "closed_reason": "Duplicate", "title": "Why is join not executed by default", "body": "<p>I'm wondering why is <code>join()</code> not done by default on the thread in all cases when we do not explicit detach thread? Wouldn't it spare lots of trouble and avoid joining treads where exception could happen or programmer just forget about it?</p>\n"}, {"tags": ["c++", "exception", "out-of-memory", "nested-exceptions"], "answers": [{"comments": [{"owner": {"reputation": 14815, "user_id": 216111, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f6b5ef485ac16233e1536193245fc55?s=128&d=identicon&r=PG", "display_name": "josefx", "link": "https://stackoverflow.com/users/216111/josefx"}, "edited": false, "score": 0, "creation_date": 1473875929, "post_id": 39496645, "comment_id": 66311167, "body": "according to cppreference.com std::current_exception() will just return the exception caused during the call itself."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 14815, "user_id": 216111, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f6b5ef485ac16233e1536193245fc55?s=128&d=identicon&r=PG", "display_name": "josefx", "link": "https://stackoverflow.com/users/216111/josefx"}, "edited": false, "score": 0, "creation_date": 1473876451, "post_id": 39496645, "comment_id": 66311448, "body": "@josefx you&#39;re right. So that leaves the constructor of the outer exception. For example, std::runtime_error contains a std::string. If that throws during the throw, this will be terminate, I think."}, {"owner": {"reputation": 4872, "user_id": 359653, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab50a8f17424ff237dd10adf2c748335?s=128&d=identicon&r=PG", "display_name": "\u5c0f\u592a\u90ce", "link": "https://stackoverflow.com/users/359653/%e5%b0%8f%e5%a4%aa%e9%83%8e"}, "edited": false, "score": 0, "creation_date": 1473931325, "post_id": 39496645, "comment_id": 66331143, "body": "The stack trace points to inside std::throw_with_nested though, so the std::runtime_error seems to have constructed without issue (otherwise it would never had called std::throw_with_nested)"}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 0, "last_activity_date": 1473875057, "creation_date": 1473875057, "answer_id": 39496645, "question_id": 39496420, "link": "https://stackoverflow.com/questions/39496420/stdthrow-with-nested-on-out-of-memory-condition-calls-stdterminate/39496645#39496645", "title": "std::throw_with_nested() on out of memory condition calls std::terminate()", "body": "<p>As far as I understand it, both the constructor of <code>std::nested_exception</code> and the global function <code>std::current_exception()</code> are <code>noexcept</code>, so if an exception occurs in either one, the only allowable course of action is <code>std::terminate</code>.</p>\n"}], "owner": {"reputation": 4872, "user_id": 359653, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab50a8f17424ff237dd10adf2c748335?s=128&d=identicon&r=PG", "display_name": "\u5c0f\u592a\u90ce", "link": "https://stackoverflow.com/users/359653/%e5%b0%8f%e5%a4%aa%e9%83%8e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1473875057, "creation_date": 1473874208, "question_id": 39496420, "link": "https://stackoverflow.com/questions/39496420/stdthrow-with-nested-on-out-of-memory-condition-calls-stdterminate", "title": "std::throw_with_nested() on out of memory condition calls std::terminate()", "body": "<p>I've been strong exception guarantee testing a class, especially on what happens on an out of memory condition, by randomly making <code>malloc()</code> return <code>nullptr</code>. It uses nested exceptions.</p>\n\n<p>Let's say I have the following code:</p>\n\n<pre><code>static std::unordered_map&lt;size_t, size_t&gt; map;\ntry {\n    map.at(0); // Throws std::out_of_range\n} catch (...) {\n    std::throw_with_nested(std::runtime_error(\"Input not in map\")); // Out of memory here\n}\n</code></pre>\n\n<p><code>std::throw_with_nested()</code> ended up calling <code>std::terminate()</code>:</p>\n\n<pre><code>terminate called after throwing an instance of 'std::out_of_range'\n  what():  _Map_base::at\n\nProgram received signal SIGABRT, Aborted.\n0x00007ffff6d96418 in __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:54\n54  ../sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n(gdb) bt\n#0  0x00007ffff6d96418 in __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:54\n#1  0x00007ffff6d9801a in __GI_abort () at abort.c:89\n#2  0x00007ffff76d884d in __gnu_cxx::__verbose_terminate_handler() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#3  0x00007ffff76d66b6 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#4  0x00007ffff76d6701 in std::terminate() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#5  0x00007ffff76d5472 in __cxa_allocate_exception () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#6  0x0000000000425d4c in std::_Throw_with_nested_impl&lt;std::runtime_error, true&gt;::_S_throw&lt;std::runtime_error&gt;(std::runtime_error&amp;&amp;) (\n    __t=&lt;unknown type in /path/to/&lt;redacted&gt;, CU 0x2a2a, DIE 0xae780&gt;) at /usr/include/c++/5/bits/nested_exception.h:100\n#7  0x000000000041d09f in std::throw_with_nested&lt;std::runtime_error&gt;(std::runtime_error&amp;&amp;) (__t=&lt;unknown type in /path/to/&lt;redacted&gt;, CU 0x2a2a, DIE 0xa3e18&gt;)\n    at /usr/include/c++/5/bits/nested_exception.h:137\n</code></pre>\n\n<p>Is this the intended behaviour according to the standard? Personally, it feels like that it should just overwrite the old exception or throw <code>std::bad_alloc</code> if it fails to allocate a nested exception.</p>\n"}, {"tags": ["c++", "c++11", "memory-management"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 1, "creation_date": 1473873969, "post_id": 39496343, "comment_id": 66310173, "body": "you can override new on a per-object basis if you wish."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1473873986, "post_id": 39496343, "comment_id": 66310185, "body": "You can override the allocation and deallocation functions per class. Then you know exactly what types you&#39;re dealing with. Modulo derived classes."}, {"owner": {"reputation": 7050, "user_id": 1022525, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/95d8f1e1e530c3779bafd80615337790?s=128&d=identicon&r=PG", "display_name": "Giuseppe Pes", "link": "https://stackoverflow.com/users/1022525/giuseppe-pes"}, "edited": false, "score": 0, "creation_date": 1473874016, "post_id": 39496343, "comment_id": 66310199, "body": "Yes I know but it is not a feasible solution when you are trying to instrument every new call."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1473874071, "post_id": 39496343, "comment_id": 66310233, "body": "A good way to detect memory leaks is to use a memory leak detector. There are many. But it&#39;s platform-dependent. Valgrind is often mentioned for Unix-land. Visual Studio ditto for Windows."}, {"owner": {"reputation": 7050, "user_id": 1022525, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/95d8f1e1e530c3779bafd80615337790?s=128&d=identicon&r=PG", "display_name": "Giuseppe Pes", "link": "https://stackoverflow.com/users/1022525/giuseppe-pes"}, "edited": false, "score": 0, "creation_date": 1473874147, "post_id": 39496343, "comment_id": 66310273, "body": "Can you recommend any for linux? I didn&#39;t go far with Valgrind ( memcheck and massif)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1473874169, "post_id": 39496343, "comment_id": 66310282, "body": "Have you though about using a tool like gdb to find the memory leak?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1473874194, "post_id": 39496343, "comment_id": 66310292, "body": "valgrind  memcheck every time (if you are looking for leaks and corruption)"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 3, "creation_date": 1473874194, "post_id": 39496343, "comment_id": 66310294, "body": "Anyway, don&#39;t do stream i/o or string handling in global allocation functions. That will likely get you infinite recursion."}, {"owner": {"reputation": 7050, "user_id": 1022525, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/95d8f1e1e530c3779bafd80615337790?s=128&d=identicon&r=PG", "display_name": "Giuseppe Pes", "link": "https://stackoverflow.com/users/1022525/giuseppe-pes"}, "edited": false, "score": 0, "creation_date": 1473874398, "post_id": 39496343, "comment_id": 66310406, "body": "this was just an example. However, why would that create an infinite recursion?"}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 1, "creation_date": 1473874406, "post_id": 39496343, "comment_id": 66310411, "body": "Why? Because <code>operator new</code> predates templates. IIRC, templates were standarized with C++98 while <code>operator new</code> existed as long as I can remember (that is longer, BTW)."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 0, "creation_date": 1473874701, "post_id": 39496343, "comment_id": 66310585, "body": "Infinite recursion as in: <code>main</code> calls <code>new</code>, <code>new</code> calls <code>std::string::string</code>, <code>std::string::string</code> calls <code>new</code>, <code>new</code> calls <code>std::string::string</code>..."}, {"owner": {"reputation": 7050, "user_id": 1022525, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/95d8f1e1e530c3779bafd80615337790?s=128&d=identicon&r=PG", "display_name": "Giuseppe Pes", "link": "https://stackoverflow.com/users/1022525/giuseppe-pes"}, "edited": false, "score": 1, "creation_date": 1473874875, "post_id": 39496343, "comment_id": 66310667, "body": "I see your point, but I don&#39;t think anything in my code is actually allocating anything in the heap."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1473878474, "post_id": 39496343, "comment_id": 66312484, "body": "The constructor of std::string is certainly allocating heap memory."}, {"owner": {"reputation": 7050, "user_id": 1022525, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/95d8f1e1e530c3779bafd80615337790?s=128&d=identicon&r=PG", "display_name": "Giuseppe Pes", "link": "https://stackoverflow.com/users/1022525/giuseppe-pes"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1473883385, "post_id": 39496343, "comment_id": 66315010, "body": "@DanielJour Of course, I&#39;ve completely missed it. Thanks for pointing it out."}], "answers": [{"comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1473878650, "post_id": 39496545, "comment_id": 66312584, "body": "Is your point one of terminology, that one should say &quot;replace&quot; instead of &quot;override&quot;? If so then that&#39;s silly. Sorry, but it is."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1473880570, "post_id": 39496545, "comment_id": 66313605, "body": "@Cheersandhth.-Alf I think correct terminology is important, but that&#39;s not the actual point here: &quot;override&quot; happens during compile time, &quot;replace&quot; during link time. During linking no new function (templates) are instantiated, thus how would you satisfy a reference to an <code>operator new&lt;FOO&gt;(unsigned long)</code> then? You&#39;d need to put it into the current translation unit and have name resolution do it (thus override it). But if you want to &quot;override&quot; all uses of <code>new</code>, then all code that calls <code>new</code> would need to see your override, including code in the STL, etc."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1473881406, "post_id": 39496545, "comment_id": 66314052, "body": "@Cheersandhth.-Alf I added an example of the issue I was thinking about. Does this make it more clear?"}, {"owner": {"reputation": 7050, "user_id": 1022525, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/95d8f1e1e530c3779bafd80615337790?s=128&d=identicon&r=PG", "display_name": "Giuseppe Pes", "link": "https://stackoverflow.com/users/1022525/giuseppe-pes"}, "edited": false, "score": 0, "creation_date": 1473884049, "post_id": 39496545, "comment_id": 66315338, "body": "@DanielJour Regarding the example with <code>unique_ptr</code>. I am allowed to override the operators new and delete for a user define class. Wouldn&#39;t the same problem arise for overridden operators for a user define type?"}, {"owner": {"reputation": 7050, "user_id": 1022525, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/95d8f1e1e530c3779bafd80615337790?s=128&d=identicon&r=PG", "display_name": "Giuseppe Pes", "link": "https://stackoverflow.com/users/1022525/giuseppe-pes"}, "edited": false, "score": 0, "creation_date": 1473884721, "post_id": 39496545, "comment_id": 66315669, "body": "I think the delete buried inside the lib will call my operators the linker will take care of that. If this wasn&#39;t the case, <code>new</code> and <code>delete</code> overrides for custom object wouldn&#39;t work. Example of what I mean :  http:://cpp.sh/2h2t"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "reply_to_user": {"reputation": 7050, "user_id": 1022525, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/95d8f1e1e530c3779bafd80615337790?s=128&d=identicon&r=PG", "display_name": "Giuseppe Pes", "link": "https://stackoverflow.com/users/1022525/giuseppe-pes"}, "edited": false, "score": 0, "creation_date": 1473885001, "post_id": 39496545, "comment_id": 66315810, "body": "@GiuseppePes That&#39;s a good point. Regarding how this is handled for <code>std::unique_ptr</code>: Exactly as I tried to suggest, the code that <code>delete</code>s must be part of <i>every</i> translation unit that uses <code>std::unique_ptr</code>. Therefore, it&#39;s <a href=\"https://gcc.gnu.org/onlinedocs/libstdc++/libstdc++-html-USERS-4.4/a01404.html\" rel=\"nofollow noreferrer\">implemented in a header file</a>."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1473885398, "post_id": 39496545, "comment_id": 66316004, "body": "If you&#39;d make <code>new</code> and <code>delete</code> override-able you&#39;d need to provide your overrides (for example in a header file) to all code (translation units) that is using these operators, and you&#39;d need to make sure that a pointer from an override <code>new</code> doesn&#39;t get to a different <code>delete</code>. In the case of user defined classes the compiler adds a safeguard here: You cannot <code>delete</code> a pointer to <code>Thing</code> when you don&#39;t have a complete definition (not forward declaration) of <code>Thing</code> (and thus see its operator delete)."}], "tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": false, "score": 4, "last_activity_date": 1473885968, "last_edit_date": 1495540304, "creation_date": 1473874736, "answer_id": 39496545, "question_id": 39496343, "link": "https://stackoverflow.com/questions/39496343/why-isnt-new-implemented-with-template/39496545#39496545", "title": "Why isn&#39;t new implemented with template?", "body": "<p><a href=\"https://stackoverflow.com/q/8186018\">You can <strong>not</strong> <em>override</em> the global operator new.</a> What you <strong>can</strong> do is provide a replacement - which happens during <em>linking</em> and not during <em>compiling</em>.</p>\n\n<blockquote>\n  <p>My question is why hasn't new be implemented with template?</p>\n</blockquote>\n\n<p>Since <code>new</code> is basically a single undefined reference you can easily provide a single definition to replace it. (See Detail #1 below)</p>\n\n<p>Now what would be if <code>new</code> were a templated function? For every template instance there would be a different undefined symbol that you'd need to provide a replacement for. You could make your definition a template, too, but who would instantiate it? You'd probably need to change name resolution rules for that (and basically the way templates work).</p>\n\n<p>Or you'd instead allow <code>operator new</code> to be override-able. Then the compiler has to choose the correct <code>operator new</code> during compile time. But this has the drawback that only code that has your \"new <code>new</code>\" in its translation unit can see and use it. Now consider what happens here:</p>\n\n<pre><code>#include &lt;memory&gt;\n// code to override new and delete\nvoid bar(void) {\n  std::unique_ptr&lt;int&gt; x = new int{};\n}\n</code></pre>\n\n<p>The above call to <code>new</code> uses your code, but what about the call to <code>delete</code> buried deep inside the standard library? That call would need to see your code, too. This - in turn - would mean that the standard library code must be in your translation unit, or put differently: It needs to be implemented in a header file.</p>\n\n<p>Moreover, you'd need to make sure that a - say - <code>char *</code> that you allocated using your <code>new</code> doesn't get <code>delete</code>d by the \"standard\" <code>delete</code>. A similar issue exists already with the class specific operators:</p>\n\n<pre><code>class Baz; // forward declaration\nvoid freeThatBaz(Baz * b) { delete b; }\n</code></pre>\n\n<p>Whether this actually calls the class specific operator <code>delete</code> or the global one is <em>implementation defined</em> (since C++17, it was undefined behavior before IIRC).</p>\n\n<p>So I'd say: Basically it's just not worth the effort to have such huge and complex rules in the standard for something that's not even considered \"good practice\".</p>\n\n<h2>Detail #1</h2>\n\n<p>Compiling the following code:</p>\n\n<pre><code>void foo(void) {\n  auto x = new int{};\n  auto y = new bool{};\n  delete x;\n  delete y;\n}\n</code></pre>\n\n<p>leads to</p>\n\n<pre><code>[nix-shell:/tmp/wtf]$ nm -C new.o \n                 U _GLOBAL_OFFSET_TABLE_\n0000000000000000 T foo()\n                 U operator delete(void*, unsigned long)\n                 U operator new(unsigned long)\n</code></pre>\n\n<p>a single undefined reference to <code>operator new</code>, independent of the type. If it <em>were</em> a template, then the template type parameter would be part of the symbol, thus you'd have 2 undefined symbols.</p>\n"}, {"comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1473885740, "post_id": 39496623, "comment_id": 66316183, "body": "I&#39;m thinking now about my PC with 40 MB harddisk. I used Stacker (later acquired by Microsoft, and it&#39;s probably the code now behind the compress option in Windows) to sort of double that capacity. It was not a good idea: very sloooow, and that Finnish software was not entirely reliable\u2026"}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 5, "last_activity_date": 1473874987, "creation_date": 1473874987, "answer_id": 39496623, "question_id": 39496343, "link": "https://stackoverflow.com/questions/39496343/why-isnt-new-implemented-with-template/39496623#39496623", "title": "Why isn&#39;t new implemented with template?", "body": "<p>Most questions about why C++ is designed how it is come down to two possibilities. Either <em>The Design and Evolution of C++</em> gives a reason, or we can only speculate. I believe this falls into the latter category.</p>\n\n<p>First of all, use of (and the ability to replace) <code>operator new</code> (both global and per-class) predates the addition of templates to the language. As such, it couldn't have been done with templates originally. Some parts of the library were switched to templates that hadn't been previously, but mostly where the benefits from doing so were extremely obvious.</p>\n\n<p>Second, using a template with early template-capable compilers probably would have led to problems, especially for larger programs. The problem is that a function template isn't a function--it's a recipe for creating a function, so to speak. In other words, if it was implemented as a template, every allocator for every type would result in a separate function being instantiated. Current compilers (and linkers) are fairly good at merging those afterwards, but early ones mostly weren't. In a large system you could easily have had dozens or even hundreds of separate allocation functions created.</p>\n\n<p>Finally, the template would typically still only be kind of an intermediate level between normal user code and <em>something</em> in the library that provides something at least roughly congruent to the current <code>operator new</code> and <code>operator delete</code> that talk to the OS (or hardware, or whatever) to figure out what pool to draw memory from, and (typically) sub-allocate pieces to the user code. Somewhere you need an (often fairly substantial) piece of code to create and manage a pool of memory. If this were handled directly in the template, it would (in practice) have to be implemented in a header, which would also lead to compile times that would probably have been fairly unacceptable on a 66 MHz Pentium or even that unbelievably fast 300 MHz DEC Alpha machine most of us could only dream about.</p>\n"}], "owner": {"reputation": 7050, "user_id": 1022525, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/95d8f1e1e530c3779bafd80615337790?s=128&d=identicon&r=PG", "display_name": "Giuseppe Pes", "link": "https://stackoverflow.com/users/1022525/giuseppe-pes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 1, "accepted_answer_id": 39496623, "answer_count": 2, "score": 2, "last_activity_date": 1473885968, "creation_date": 1473873900, "last_edit_date": 1473874010, "question_id": 39496343, "link": "https://stackoverflow.com/questions/39496343/why-isnt-new-implemented-with-template", "title": "Why isn&#39;t new implemented with template?", "body": "<p>I am trying to instrument <code>new</code> with some additional information in order to track down a memory leak. I know, I can override a <code>new</code> operator globally, but I was surprise to discover that I cannot retrieve any information regarding the type of the object being allocated (Correct me if I am wrong). Clearly, it would be beneficial to have the type information when you decide to override the <code>new</code> operator.   </p>\n\n<p>For example, I've implemented a simple and generic version of <code>new</code> and <code>delete</code> using variadic template.</p>\n\n<pre><code>std::string to_readable_name(const char * str)\n{\n    int status;\n    char *demangled_name = abi::__cxa_demangle(str, NULL, NULL, &amp;status);\n    if(status == 0) {\n        std::string name(demangled_name);\n        std::free(demangled_name);\n        return name;\n    }\n    return \"Unknown\";\n}\n\ntemplate &lt;typename T, typename... Args&gt;\nT * generic_new(Args&amp;&amp;... args) throw (std::bad_alloc)\n{\n    const std::size_t size = sizeof(T);\n    std::cout &lt;&lt; \"Allocating \" &lt;&lt; size &lt;&lt; \" bytes for \" &lt;&lt; to_readable_name(typeid(T).name()) &lt;&lt; std::endl;\n    return new T(std::forward&lt;Args&gt;(args)...);\n};\n\ntemplate&lt;typename T&gt;\nvoid generic_delete(T* ptr)\n{\n    const std::size_t size = sizeof(T);\n    std::cout &lt;&lt; \"Deleting \" &lt;&lt; size &lt;&lt; \" bytes for \" &lt;&lt; to_readable_name(typeid(T).name()) &lt;&lt; std::endl;\n    delete ptr;\n}\n\nint main()\n{\n    auto i = generic_new&lt;int&gt;(0);\n    std::cout &lt;&lt; *i &lt;&lt; std::endl;\n    generic_delete(i);\n\n    return 0;\n}\n</code></pre>\n\n<p>My question is why hasn't <code>new</code> be implemented with template? This would allow developer to have information about the type of the object being allocated. </p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "gps"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1473874074, "post_id": 39496300, "comment_id": 66310235, "body": "Perhaps use a factory or <code>switch</code> statement to call functions based on version?  Also factor out any common code between the reading so that the various readers can share code."}, {"owner": {"reputation": 753, "user_id": 2840470, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e2dd63f64b42d7ba16f86c029f6bf488?s=128&d=identicon&r=PG&f=1", "display_name": "user2840470", "link": "https://stackoverflow.com/users/2840470/user2840470"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1473874454, "post_id": 39496300, "comment_id": 66310442, "body": "@ThomasMatthews would you keep the implementation that I have, base class and inherit all versions from that?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1473874697, "post_id": 39496300, "comment_id": 66310582, "body": "Review the factory design pattern.  It should answer your question about base and child classes."}, {"owner": {"reputation": 6583, "user_id": 2015023, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b436c40d6ac76cd76ce05aadb9fbebcf?s=128&d=identicon&r=PG", "display_name": "Mobile Ben", "link": "https://stackoverflow.com/users/2015023/mobile-ben"}, "edited": false, "score": 0, "creation_date": 1473887978, "post_id": 39496300, "comment_id": 66317164, "body": "What does &quot;Also how would I handle the input at runtime, one user&quot; mean? Clarify what &quot;input at runtime&quot; is."}], "owner": {"reputation": 753, "user_id": 2840470, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e2dd63f64b42d7ba16f86c029f6bf488?s=128&d=identicon&r=PG&f=1", "display_name": "user2840470", "link": "https://stackoverflow.com/users/2840470/user2840470"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1473873744, "creation_date": 1473873744, "question_id": 39496300, "link": "https://stackoverflow.com/questions/39496300/handling-different-input-file-types", "title": "Handling different input file types", "body": "<p>I am creating a program to read RINEX files (GPS text files essentially) and pass the observations to a separate class to process them. There are several RINEX versions, right now there are 7 commonly used formats (v2, v2.10, v2.11, v3.0, v3.01, v3.01, v3.02, v3.03), each with a slight variation on how the data is presented in the file, so would require different ways to read the file in. What would be the most appropriate way to handle this, so if a new version comes out its easy to handle. Also how would I handle the input at runtime, one user </p>\n\n<p>Right now I was thinking of having a base class RinexObs and creating a superclass for each version. Is there a more elegant way to handle this? </p>\n\n<p>I have shortened the code below, but shows what I was going with. I know its an inefficient way, just cant wrap my head around other ways to do this.</p>\n\n<pre><code>class RinexObs {\n    // All possible rinex versions\n    enum class Versions {\n       v2_0,\n       v2_10,\n       v2_11,\n       // and others\n     }\n    // Override this method with every superclass \n    virtual double GetData() = 0;\n    // Method to determine the Rinex version. I cant tell\n    // the rinex version until after opening the file and reading the first\n    // the first line, hence why this method is in the base class.\n    Versions GetRinexVersion () { };\n}; // end of class RinexObs\n\nclass RinexV2 : public RinexObs {\n    // Override base class\n     double GetData() {\n     // Implement code how to read V2 files\n  }\n}; // end of class RinexV2\n\nclass RinexV210 : public RinexObs {\n    // Override base class\n    double GetData() {\n        // Implement code how to read V2.10 files\n   }\n}; // end of class RinexV210\n\nint main() {\n    RinexObs input_file;\n    // ... code to open file properly\n    // Get the rinex version\n    RinexObs::Versions rinex_version = input_file.GetRinexVersion();\n    // Something to hold the data from the rinex file\n    double data = 0;\n    // Based off the rinex_version read the data\n    switch(rinex_version) {\n    case RinexObs::Versions::v2_0:\n        input_file = new RinexV2();\n        data = input_file.GetData();\n        break;\n    // all other cases\n   } // end of switch\n} // end of main\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 21, "creation_date": 1473872773, "post_id": 39496049, "comment_id": 66309531, "body": "Just use <code>std::vector</code>. It takes care of the memory management."}, {"owner": {"reputation": 1152, "user_id": 4761877, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PdJG-0u7rLc/AAAAAAAAAAI/AAAAAAAAAFk/POj3rkBvbf0/photo.jpg?sz=128", "display_name": "Timothy Murphy", "link": "https://stackoverflow.com/users/4761877/timothy-murphy"}, "edited": false, "score": 3, "creation_date": 1473872994, "post_id": 39496049, "comment_id": 66309644, "body": "As the programmer, when you use dynamically allocated memory, you have to do all of the memory management. I.e. allocation, keeping track of it, and deallocation. This includes resizing (creating a new different sized array and copying the elements over to the new one) it when you think is necessary. This is a lot of work, so I&#39;d suggest using the c++ standard containers (<code>std::vector</code>)."}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 1, "creation_date": 1473873177, "post_id": 39496049, "comment_id": 66309729, "body": "You might want to read about the rule of zero. <a href=\"https://accu.org/index.php/journals/1896\" rel=\"nofollow noreferrer\">accu.org/index.php/journals/1896</a> It touches on the complexity of resource management."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1473873949, "post_id": 39496049, "comment_id": 66310154, "body": "This is too broad, what research have you done?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1473874130, "post_id": 39496049, "comment_id": 66310265, "body": "Just a note: remember <code>std::unique_ptr</code> and <code>std::shared_ptr</code> (and <code>std::make_unique</code>/<code>std::make_shared</code>) exist. Don&#39;t use manual memory management with raw pointers in modern C++ (except <i>very</i> rarely and for <i>extremely</i> good reasons (which you won&#39;t know as a new learner))."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 2928238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db4cd0a8c01ef269e2c8bccc9fadd04?s=128&d=identicon&r=PG&f=1", "display_name": "frameworks", "link": "https://stackoverflow.com/users/2928238/frameworks"}, "is_accepted": false, "score": 0, "last_activity_date": 1473876693, "last_edit_date": 1495541300, "creation_date": 1473876693, "answer_id": 39497025, "question_id": 39496049, "link": "https://stackoverflow.com/questions/39496049/dynamic-memory-allocation-in-c-without-a-variable/39497025#39497025", "title": "Dynamic memory allocation in c++ without a variable", "body": "<p>If you do choose to dynamically allocate memory, you will need to use the operator new[] for an array, which is considered a different operator in c++ than new for non-array types.</p>\n\n<p>1) Here is an example of how to dynamically allocate an array:</p>\n\n<pre><code>int length = 10;\nint *myArray = new int[length];\n\n// do something\nmyArray[0] = 42;\n</code></pre>\n\n<p>When you are done, you will need to release the memory with delete[]:</p>\n\n<pre><code>delete[] myArray;\n</code></pre>\n\n<p>2) No, there is no automatic de-allocation of dynamically allocated memory in C++ unless you are using smart pointers (<a href=\"https://stackoverflow.com/questions/106508/what-is-a-smart-pointer-and-when-should-i-use-one\">What is a smart pointer and when should I use one?</a>).</p>\n\n<p>If you want to resize your array, you will have to do it manually:</p>\n\n<pre><code>delete[] myArray;\n\nint newLength = 5;\nmyArray = new int[newLength];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3184, "user_id": 6710751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qmR1W.jpg?s=128&g=1", "display_name": "Striezel", "link": "https://stackoverflow.com/users/6710751/striezel"}, "is_accepted": false, "score": 0, "last_activity_date": 1473878365, "creation_date": 1473878365, "answer_id": 39497469, "question_id": 39496049, "link": "https://stackoverflow.com/questions/39496049/dynamic-memory-allocation-in-c-without-a-variable/39497469#39497469", "title": "Dynamic memory allocation in c++ without a variable", "body": "<p>As @frameworks pointed out, you will need the operator <code>new[]</code> to allocate memory for an array and you need to call <code>delete[]</code> to free that memory. If there is no <code>delete[]</code> for a <code>new[]</code>, your program will leak memory. (If there is more than one <code>delete[]</code> called for a single <code>new[]</code>, your program will segfault / crash.)</p>\n\n<p>However, it is not always trivial to ensure that memory allocated with <code>new[]</code> (or <code>new</code>) gets always cleaned up by a corresponding <code>delete[]</code> (or <code>delete</code>), and only gets cleaned up once. That is especially true for code with complex control flow, code where pointers get passed around or situations where exceptions can be thrown between <code>new[]</code> and <code>delete[]</code>.</p>\n\n<p>In other words: Wherever there is a <code>new</code>, there probably is a leak.</p>\n\n<p><strong>So to save you all that trouble of manual memory management, use <code>std::vector</code> instead.</strong> This container takes care of the memory management for you.</p>\n\n<p>Whenever you are tempted to write something like</p>\n\n<pre><code>int *myArray = new int[3];\n//do something with myArray\ndelete[] myArray;\n</code></pre>\n\n<p>you should write</p>\n\n<pre><code>std::vector&lt;int&gt; myArray;\n//do something with myArray\n</code></pre>\n\n<p>instead. You do not need a delete here and methods like <a href=\"http://en.cppreference.com/w/cpp/container/vector/push_back\" rel=\"nofollow\">std::vector::push_back()</a> take care of the required size adjustments for the underlying structure, should it not provide enough space to accomodate all pushed values. You can also use <a href=\"http://en.cppreference.com/w/cpp/container/vector/shrink_to_fit\" rel=\"nofollow\">std::vector::shrink_to_fit()</a> to remove unused elements. (However, shrink_to_fit is a non-binding request to reduce the internal size. That is, results may vary between compilers.)</p>\n"}, {"tags": [], "owner": {"reputation": 2375, "user_id": 2757079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C6Hsu.jpg?s=128&g=1", "display_name": "Muhammad Ahmad", "link": "https://stackoverflow.com/users/2757079/muhammad-ahmad"}, "is_accepted": true, "score": 0, "last_activity_date": 1473879431, "creation_date": 1473879431, "answer_id": 39497739, "question_id": 39496049, "link": "https://stackoverflow.com/questions/39496049/dynamic-memory-allocation-in-c-without-a-variable/39497739#39497739", "title": "Dynamic memory allocation in c++ without a variable", "body": "<p>As <em><strong>Cheers and hth</strong></em> said in the comments, the best way is to use <a href=\"http://www.cplusplus.com/reference/vector/vector/\" rel=\"nofollow\"><code>std::vector</code></a>, it takes care of the memory management itself.</p>\n\n<hr>\n\n<blockquote>\n  <ol>\n  <li>How to declare dynamic memory allocation of an array without prior knowledge of the size?</li>\n  </ol>\n</blockquote>\n\n<p>The idea is, you do not allocate any memory if you do not know the size, and when adding elements to it, you can increase the memory, see example below.</p>\n\n<p><strong>Implementing a class that works like <code>std::vector</code></strong>:</p>\n\n<p><code>vector</code> uses two sizes, one is the <code>size</code> which is the number of elements your <code>vector</code> is currently holding, <code>capacity</code> is the number of elements which your <code>vector</code> can hold (memory is allocated for <code>capacity</code>)</p>\n\n<p><strong>Pre-requisites</strong>: I'm assuming that you know the basic memory allocation and de-allocation, that you can allocate memory using <code>new</code> operator, and de-allocate using <code>delete</code> operator.</p>\n\n<p><strong>Note</strong>: I'm implementing some methods for <code>MyIntVector</code> that uses only <code>int</code> array for simplicity, but you can always implement a templated class.</p>\n\n<p><strong>Implementation</strong>:</p>\n\n<p>You can provide a default constructor for your class, which doesn't allocate any memory, sets the <code>size</code> and <code>capacity</code> to <code>0</code> (client programs can use this constructor, if the size is not known).</p>\n\n<p>You can also provide a constructor which takes a <code>size</code> that will be used as the starting <code>size</code>, when creating the <code>MyIntVector</code></p>\n\n<p>Also provide a destructor to completely de-allocate the allocated memory.</p>\n\n<pre><code>class MyIntVector{\n\n    size_t _size;\n    size_t _capacity;\n    int* _data;\n\npublic:\n    MyIntVector(){\n        _size = 0;\n        _capacity = 0;\n        _data = nullptr;\n    }\n    MyIntVector(size_t size){\n        _size = size;\n        _capacity = size;\n        _data = new int[_capacity];\n    }\n    ~MyIntVector(){\n        if (_data){\n            delete[] _data;\n        }\n        _data = nullptr;\n        _size = _capacity = 0;\n    }\n};\n</code></pre>\n\n<p>Now, if you want to add some element to your <code>MyIntVector</code>, you can implement a <code>push_back</code> function, like <code>std::vector</code> does.</p>\n\n<pre><code>class MyIntVector{\n    //...\n    void push_back(int elem){\n\n        if (_size &gt;= _capacity){\n            // Oops, we're out of memory, let's make room for this elem first\n            resize(_capacity &gt; 0? _capcity * 2 : 10);\n        }\n        // Now, there's enough memory to hold this elem\n        _size++;\n        _data[_size - 1] = elem;\n    }\n\n    void resize(size_t newCapacity){\n        if (newCapacity != _capacity){\n            if (_size == 0){\n                _capacity = newCapacity;\n                _data = new int[_capacity];\n            }\n            else {\n                // create a temporary array to hold the elements of _data\n                int* temp = new int[_size];\n                for (size_t i = 0; i &lt; _size; i++)\n                    temp[i] = _data[i];\n\n                // de-allocate the memory of _data\n                delete[] _data;\n\n                // allocate memory in _data with newCapacity\n                _capacity = newCapacity;\n                _data = new int[_capacity];\n\n                // copy the elements of temporary array back in _data\n                for (size_t i = 0; i &lt; _size; i++){\n                    _data[i] = temp[i];\n                }\n\n                // done with the temporary array, de-allocate it.\n                delete[] temp;\n                temp = nullptr;\n            }\n        }\n    }\n\n    //...\n};\n</code></pre>\n\n<p><strong><code>push_back</code> function</strong>:</p>\n\n<p>The <code>push_back</code> function, that I've implemented in above example, it sees whether the new element can be added to the <code>MyIntVector</code> without any need to allocate any new memory or not, if not, it just increases the <code>_size</code> by <code>1</code> and copies the element. If there's a need for new memory, it calls the <code>resize</code> method with doubled capacity (in case, there's already some allocated memory there.) or some hard-coded value, say <code>10</code> (in case, where there's not any previously allocated memory)</p>\n\n<p><strong><code>resize</code> function</strong>:</p>\n\n<p>The <code>resize</code> function takes a <code>newCapacity</code> as argument, and allocates the required memory in <code>_data</code>, mainly it creates a temporary array to hold the elements of <code>_data</code> and then de-allocates the memory in <code>_data</code>, allocates a larger memory in <code>_data</code>, copies back the from <code>temp</code> to <code>_data</code> and de-allocates the <code>temp</code> array.</p>\n\n<p><em><strong>Note</strong></em>: This implementation of <code>resize</code> should only be used when <em>increasing</em> the <code>_capacity</code>, it should <strong>not</strong> be called for <em>decreasing</em> the <code>_capacity</code></p>\n\n<hr>\n\n<p>So, the idea is, that you can increase the size of the array, by using a temporary array for holding the elements, de-allocating the previous array, allocating a new array, and copying back the elements from temporary array. You can implement different methods that <code>std::vector</code> provides for your exercise.</p>\n\n<p>If you don't want to de-allocate and re-allocate the memory every time you increase the capacity, you can always implement a Linked List, <a href=\"http://pumpkinprogrammer.com/2014/06/13/c-tutorial-intro-to-linked-lists/\" rel=\"nofollow\">here</a>'s a tutorial for implementing a Linked List, but there's a drawback of Linked List, that you can't randomly access elements from the Linked List like you can from an array.</p>\n\n<hr>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Suppose I use a variable to dynamically allocate memory to the array but later on in the program the size of array is reduced.Will there be automatic de-allocation of memory?</li>\n  </ol>\n</blockquote>\n\n<p>There's no automatic de-allocation of memory, you'll have to manually decrease the <code>_capacity</code> if you want.</p>\n\n<p>You can add a <code>pop_back</code> method in your <code>MyIntVector</code> class to remove an element.</p>\n\n<pre><code>class MyIntVector{\n    // ...\n    int pop_back(){\n        if (_size == 0){\n            // You can throw some exception here if you want.\n            throw exception(\"No elements found\");\n        }\n        _size--;\n        return _data[_size];\n    }\n    // ...\n};\n</code></pre>\n\n<p>You can manually decrease the <code>_capacity</code> before returning the element.</p>\n\n<p>You can also provide an implementation of subscript operator <code>[]</code> for your <code>MyIntVector</code> class to provide random access in the array.</p>\n"}], "owner": {"reputation": 33, "user_id": 6798561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd4adfdd4b441b32314bc7d41c3d90de?s=128&d=identicon&r=PG&f=1", "display_name": "Shrikant Mahapatra", "link": "https://stackoverflow.com/users/6798561/shrikant-mahapatra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "closed_date": 1473878423, "accepted_answer_id": 39497739, "answer_count": 3, "score": 0, "last_activity_date": 1473879431, "creation_date": 1473872658, "last_edit_date": 1473873794, "question_id": 39496049, "link": "https://stackoverflow.com/questions/39496049/dynamic-memory-allocation-in-c-without-a-variable", "closed_reason": "Needs more focus", "title": "Dynamic memory allocation in c++ without a variable", "body": "<p>I am learning the dynamic memory allocation process in c++.   </p>\n\n<p>1.How to declare dynamic memory allocation of an array without prior knowledge of the size?  </p>\n\n<p>2.Suppose I use a variable to dynamically allocate memory to the array but later on in the program the size of array is reduced.Will there be automatic de-allocation of memory?  </p>\n\n<p>If not then how to update it?</p>\n\n<p>Please spare me if these are silly questions.If you answer please include an example program.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1473872569, "post_id": 39495988, "comment_id": 66309411, "body": "Please edit your question to contain a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1473872604, "post_id": 39495988, "comment_id": 66309429, "body": "You cannot use method like general function you need to use <code>std::bind</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1473872607, "post_id": 39495988, "comment_id": 66309430, "body": "Which line is that error happening on?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1473872618, "post_id": 39495988, "comment_id": 66309439, "body": "Please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Note: we <b>don&#39;t</b> need to see your whole code."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1473872690, "post_id": 39495988, "comment_id": 66309482, "body": "@Slava While that is true, OP is passing a bool not the actual method. (<code>auto isDead = object-&gt;isDead();</code>)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1473872752, "post_id": 39495988, "comment_id": 66309515, "body": "@Borgleader I see missed that"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1473873488, "post_id": 39495988, "comment_id": 66309900, "body": "<code>if (destructed) {              std::cout &lt;&lt; &quot;memory error&quot; &lt;&lt; std::endl;          } </code> wat?"}, {"owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "edited": false, "score": 0, "creation_date": 1473873928, "post_id": 39495988, "comment_id": 66310143, "body": "Is removing pointers from this vector a good idea in this case? If objects are allocated with <code>new</code>, it&#39;s OVER."}], "answers": [{"comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 1, "creation_date": 1473872925, "post_id": 39496072, "comment_id": 66309610, "body": "You forgot to apply the damage!"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1473872964, "post_id": 39496072, "comment_id": 66309626, "body": "@Borgleader, noticed that right after I posted the code."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 4, "creation_date": 1473873052, "post_id": 39496072, "comment_id": 66309668, "body": "There is another problem, removing objects from a copy"}, {"owner": {"reputation": 15, "user_id": 3512322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fba60856dddcdd43b579a7a58ffbd38?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/3512322/sam"}, "edited": false, "score": 0, "creation_date": 1473874478, "post_id": 39496072, "comment_id": 66310461, "body": "Thank you. This was indeed the problem. I was trying to pass a variable!"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 5, "last_activity_date": 1473873167, "last_edit_date": 1473873167, "creation_date": 1473872759, "answer_id": 39496072, "question_id": 39495988, "link": "https://stackoverflow.com/questions/39495988/remove-if-predicate-error-when-passing-a-function-returning-bool/39496072#39496072", "title": "remove_if: Predicate error when passing a function returning bool", "body": "<ol>\n<li><p><code>isDead</code> is a variable in the function. You can't use it as an argument to <code>remove_if</code>.</p></li>\n<li><p>You can't use a regular member function as argument to <code>std::remove_if</code> either. Use a lambda function instead.</p></li>\n<li><p>Don't erase objects from a container while you are iterating over it using a range for loop.</p></li>\n<li><p>Change the argument to <code>attack</code> to be a reference. Otherwise, you will be removing objects from a copy, not the original container.</p></li>\n</ol>\n\n<p>Here's an updated version of <code>attack</code>:</p>\n\n<pre><code>void attack(std::vector&lt;GameObject*&gt;&amp; objects, unsigned damage)\n{\n   for (GameObject* object : objects)\n   {\n      object-&gt;takeDamage(damage);\n   }\n\n   objects.erase(std::remove_if(objects.begin(),objects.end(), [](GameObject* object){return object-&gt;isDead();}), objects.end());\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1473872874, "post_id": 39496076, "comment_id": 66309583, "body": "Also, as is currently written this loop is O(N^2) since the remove if is inside the loop (it should be at the end)"}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1473872941, "post_id": 39496076, "comment_id": 66309617, "body": "@Borgleader: what&#39;s worse, it will cause segfault. I didn&#39;t notice at first."}, {"owner": {"reputation": 15, "user_id": 3512322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fba60856dddcdd43b579a7a58ffbd38?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/3512322/sam"}, "edited": false, "score": 0, "creation_date": 1473874656, "post_id": 39496076, "comment_id": 66310560, "body": "Thank you! Yes, I couldn&#39;t figure out the way to create the predicate function. Very new to C++."}], "tags": [], "owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "is_accepted": false, "score": 0, "last_activity_date": 1473872767, "creation_date": 1473872767, "answer_id": 39496076, "question_id": 39495988, "link": "https://stackoverflow.com/questions/39495988/remove-if-predicate-error-when-passing-a-function-returning-bool/39496076#39496076", "title": "remove_if: Predicate error when passing a function returning bool", "body": "<p><code>isDead()</code> is a member function of one of your classes, which is exactly why it doesn't work: you did not supply <code>this</code> pointer (object instance) for it to be called on. Oh, and the predicate for <code>remove_if</code> must have exactly one argument of the type <code>objects::value_type</code>.</p>\n\n<p>Do this instead:</p>\n\n<pre><code>objects.erase(std::remove_if(objects.begin(),objects.end(),[](GameObject* object){return object-&gt;isDead()), objects.end());\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 3512322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fba60856dddcdd43b579a7a58ffbd38?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/3512322/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 635, "favorite_count": 0, "accepted_answer_id": 39496072, "answer_count": 2, "score": 0, "last_activity_date": 1473873167, "creation_date": 1473872453, "question_id": 39495988, "link": "https://stackoverflow.com/questions/39495988/remove-if-predicate-error-when-passing-a-function-returning-bool", "title": "remove_if: Predicate error when passing a function returning bool", "body": "<p>I have this pre-defined function.</p>\n\n<pre><code>void attack(std::vector&lt;GameObject*&gt; objects, unsigned damage) {\n\n\n    for (GameObject* object : objects) {\n        object-&gt;takeDamage(damage);\n        auto isDead = object-&gt;isDead();\n        objects.erase(std::remove_if(objects.begin(),objects.end(),isDead), objects.end());\n    }\n}\n</code></pre>\n\n<p>This is my isDead function</p>\n\n<pre><code>bool isDead() const { \n    if (destructed) { \n            std::cout &lt;&lt; \"memory error\" &lt;&lt; std::endl; \n        } \n\n    return life &lt;= 0; \n}\n</code></pre>\n\n<p>This is the error I keep getting. Have tried a lot of things, but not at all able to figure this one out. Any help appreciated!</p>\n\n<p><strong>error: expression cannot be used as a function\n  { return bool(_M_pred(*__it)); }</strong></p>\n"}, {"tags": ["c++", "html", "local-storage"], "comments": [{"owner": {"reputation": 475, "user_id": 5256963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3b4896ad04a1ce99d5a3e60d34e9993?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/5256963/charlie"}, "edited": false, "score": 1, "creation_date": 1473872990, "post_id": 39495927, "comment_id": 66309642, "body": "cant javascript store and update files? You could have a process read from the same file, or?  <a href=\"http://stackoverflow.com/questions/13405129/javascript-create-and-save-file\" title=\"javascript create and save file\">stackoverflow.com/questions/13405129/&hellip;</a>  maybe the answer a bit down is what your looking for"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1473875624, "post_id": 39495927, "comment_id": 66311018, "body": "You could use WebSockets to have an HTML5 page communicate with your C++ app. The HTML can use local scripting to read/write the browser&#39;s local storage as needed. Your app would have to implement a WebSocket server for the HTML to connect to, but WebSockets are bidirectional, so the app can send commands to the HTML."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1473877427, "post_id": 39495927, "comment_id": 66311924, "body": "There&#39;s always <a href=\"https://en.m.wikipedia.org/wiki/Common_Gateway_Interface\" rel=\"nofollow noreferrer\">CGI</a> ..."}], "answers": [{"tags": [], "owner": {"reputation": 4485, "user_id": 2748290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EDxgz.png?s=128&g=1", "display_name": "linguamachina", "link": "https://stackoverflow.com/users/2748290/linguamachina"}, "is_accepted": false, "score": 3, "last_activity_date": 1473892683, "last_edit_date": 1473892683, "creation_date": 1473872856, "answer_id": 39496101, "question_id": 39495927, "link": "https://stackoverflow.com/questions/39495927/html-c-communication/39496101#39496101", "title": "HTML &lt;--&gt; C++ communication", "body": "<p>The most appropriate communication channel would probably be FCGI (<a href=\"http://www.mit.edu/~yandros/doc/specs/fcgi-spec.html\" rel=\"nofollow\">http://www.mit.edu/~yandros/doc/specs/fcgi-spec.html</a>). You would need to set up a local HTTP server and configure it to process specific HTTP requests using your FCGI-compliant C++ application. Modifying your C++ application to support the FCGI protocol may be non-trivial, but the protocol itself is simple.</p>\n\n<p>Here is a useful article detailing how to get started:\n<a href=\"http://chriswu.me/blog/writing-hello-world-in-fcgi-with-c-plus-plus/\" rel=\"nofollow\">http://chriswu.me/blog/writing-hello-world-in-fcgi-with-c-plus-plus/</a></p>\n"}], "owner": {"reputation": 10444, "user_id": 235472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/2RJ8I.png?s=128&g=1", "display_name": "Pietro", "link": "https://stackoverflow.com/users/235472/pietro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 890, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1473892683, "creation_date": 1473872254, "question_id": 39495927, "link": "https://stackoverflow.com/questions/39495927/html-c-communication", "title": "HTML &lt;--&gt; C++ communication", "body": "<p>I would like to let my C++ program get some data from an HTML page. Is it possible to use HTML5 local storage for this purpose? Is there an accessible file generated by the browser?  </p>\n\n<p>If this is not feasible in this way, are there any other options?</p>\n\n<p>For now the browser and my executable run on the same computer, and I would prefer to only use the fstream C++ library.</p>\n"}, {"tags": ["c++", "multithreading", "qt", "signals-slots", "qt-signals"], "answers": [{"comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1473876332, "post_id": 39496427, "comment_id": 66311375, "body": "Why oh why would you ever suggest using <code>#define</code> here? Even in C it was unnecessary (you had typedef)! In C++, you&#39;re supposed to use type aliases: <code>using model_ptr = std::shared_ptr&lt;model&gt;</code>. It&#39;s also completely fine to use the alias only, not the underlying type name, as long as you consistently use it everywhere."}, {"owner": {"reputation": 753, "user_id": 6229173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f20c8a9b53939417106f864f2d347038?s=128&d=identicon&r=PG&f=1", "display_name": "markus-nm", "link": "https://stackoverflow.com/users/6229173/markus-nm"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1473878192, "post_id": 39496427, "comment_id": 66312334, "body": "I was giving an example out of my head that was similar to a case i had, which was a headache to pin down, <b>in case you are already using #define</b> - not <i>suggesting</i> to use #define"}, {"owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "edited": false, "score": 0, "creation_date": 1473884861, "post_id": 39496427, "comment_id": 66315748, "body": "Registering a <i>template</i> class may not work as is, you may need to <code>typedef</code> or <code>using</code> it first, and then register the alias. Also, note that double angular braces at the end of a template type are only allowed <b>C++11 and above</b>. Don&#39;t make this your habit if you work for other projects, too!"}, {"owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "edited": false, "score": 0, "creation_date": 1473885008, "post_id": 39496427, "comment_id": 66315814, "body": "See: <a href=\"http://stackoverflow.com/questions/26364024/how-to-use-template-types-as-slot-and-signal-parameters-in-multiple-threads\" title=\"how to use template types as slot and signal parameters in multiple threads\">stackoverflow.com/questions/26364024/&hellip;</a> and <a href=\"https://steveire.wordpress.com/2011/03/16/implementing-qvariantqmetatype-features-with-template-tricks/\" rel=\"nofollow noreferrer\">steveire.wordpress.com/2011/03/16/&hellip;</a>"}, {"owner": {"reputation": 620, "user_id": 6523485, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh6.googleusercontent.com/-6PAcr-bps_0/AAAAAAAAAAI/AAAAAAAAAjE/EgtzF1AVp-g/photo.jpg?sz=128", "display_name": "Harry de winton", "link": "https://stackoverflow.com/users/6523485/harry-de-winton"}, "edited": false, "score": 0, "creation_date": 1473932733, "post_id": 39496427, "comment_id": 66332219, "body": "@markus-nm your answer worked excellently, a little follow up if you have time, is there likely be a speed penalty compared to simply sending a QString (or other more basic data)?"}, {"owner": {"reputation": 2135, "user_id": 4967497, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a0c6d09001cf39a7646ed2d22bc23352?s=128&d=identicon&r=PG", "display_name": "JojOatXGME", "link": "https://stackoverflow.com/users/4967497/jojoatxgme"}, "edited": false, "score": 0, "creation_date": 1498421612, "post_id": 39496427, "comment_id": 76481363, "body": "Is there any documentation that you have to call <code>qRegisterMetaType</code> after instantiating <code>QApplication</code>? A tested executing the function before entering <code>main()</code>. It has worked for me as well. Also note that <code>qRegisterMetaType&lt;Datastruct&gt;()</code> can be used instead of <code>qRegisterMetaType&lt;Datastruct&gt;(&quot;Datastruct&quot;)</code>."}], "tags": [], "owner": {"reputation": 753, "user_id": 6229173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f20c8a9b53939417106f864f2d347038?s=128&d=identicon&r=PG&f=1", "display_name": "markus-nm", "link": "https://stackoverflow.com/users/6229173/markus-nm"}, "is_accepted": true, "score": 11, "last_activity_date": 1473874989, "last_edit_date": 1473874989, "creation_date": 1473874243, "answer_id": 39496427, "question_id": 39495926, "link": "https://stackoverflow.com/questions/39495926/qt-signal-slots-sending-a-complete-structure/39496427#39496427", "title": "Qt Signal/Slots sending a complete structure", "body": "<p>Your debug-log should warn you about it - you can only send types known to the meta-system of qt. Using Q_REGISTER_METATYPE you end up registering types associated with the namespace where the definition was made.</p>\n\n<p>Fortunately you can tell Qt about your struct like this:</p>\n\n<pre><code>// after QApplication was instantiated\nqRegisterMetaType&lt;Datastruct&gt;(\"Datastruct\");\n// but before any class is instantiated that connects signals with this type\n</code></pre>\n\n<p>And it will not try to infer a namespace by looking at the code. Make sure to re-run qmake (or better yet do a clean), or it might be overlooked when building with QtCreator.</p>\n\n<p>If you later happen to pass template-classes of your types via signals, make sure to register them as well, because even if Qt knows about QList, it doesnt know about QList of your type:</p>\n\n<pre><code>qRegisterMetaType&lt;QList&lt;Datastruct&gt;&gt;(\"QList&lt;Datastruct&gt;\");\n</code></pre>\n\n<p>On another note: if you #define class aliases, make sure to register them with their real names.</p>\n\n<pre><code>#define std::shared_ptr model_ptr\n// you can declare your signals like this:\nvoid my_signal(model_ptr&lt;my_model&gt;);\n// but have to register the type like this:\nqRegisterMetaType&lt;std::shared_ptr&lt;my_model&gt;&gt;(\"std::shared_ptr&lt;my_model&gt;\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 266, "user_id": 5913471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc964e4bd5cc5503d8ee6a07cd2a692e?s=128&d=identicon&r=PG&f=1", "display_name": "JaRo", "link": "https://stackoverflow.com/users/5913471/jaro"}, "is_accepted": false, "score": 4, "last_activity_date": 1490266507, "last_edit_date": 1490266507, "creation_date": 1489846125, "answer_id": 42875402, "question_id": 39495926, "link": "https://stackoverflow.com/questions/39495926/qt-signal-slots-sending-a-complete-structure/42875402#42875402", "title": "Qt Signal/Slots sending a complete structure", "body": "<p>In moment, when You declare structure known to QMetaType using macro Q_DECLARE_METATYPE</p>\n\n<pre><code>struct Datastruct\n{\n    int markeridone;\n};\n\nQ_DECLARE_METATYPE(Datastruct)\n</code></pre>\n\n<p>you can send this structure via QVariant. Is nice and simply.\nIn Your headers declare:</p>\n\n<pre><code>signals:\n    void sendDatastruct(QVariant data);\n\npublic slots:\n    void getDatastruct(QVariant data);\n</code></pre>\n\n<p>Using signal in Your code:</p>\n\n<pre><code>.....\nDatastruct ds;\n.....\nQVariant data;\ndata.setValue(ds);\nemit sendDatastruct(data);  // now send signal\n.....\n</code></pre>\n\n<p>Using slot:</p>\n\n<pre><code>void MyObject::getDatastruct(QVariant data)\n{\n    Datastruct ds = data.value&lt;Datastruct&gt;();\n    .....\n    // now You can use structure in Your code\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 52, "user_id": 13351308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c8e4efdfbb4c7b2842cacda13b8594f?s=128&d=identicon&r=PG&f=1", "display_name": "rgarnett", "link": "https://stackoverflow.com/users/13351308/rgarnett"}, "is_accepted": false, "score": 1, "last_activity_date": 1588216473, "creation_date": 1588216473, "answer_id": 61515320, "question_id": 39495926, "link": "https://stackoverflow.com/questions/39495926/qt-signal-slots-sending-a-complete-structure/61515320#61515320", "title": "Qt Signal/Slots sending a complete structure", "body": "<p>I couldn't get this to work without some mods as I got a runtime warning:</p>\n\n<p><em>startsQObject::connect: No such signal</em></p>\n\n<p>I read the doc and found that you must only pass const values by reference:</p>\n\n<p>So you end up with:</p>\n\n<pre><code>/* myWorker Class Instance header .h */\n\nstruct notifyMsg_t\n{\n    QString m_TitleSuffix;\n    QString m_MessageSuffix;\n    int     m_errNumber;\n};\n\nQ_DECLARE_METATYPE(notifyMsg_t);\n\nsignals:\n    void sendDatastruct(const QVariant&amp;);\n\n/* MainWindow Class instance Header .h*/\npublic slots:\n    void getDatastruct(const QVariant&amp; data);\n\n/* MainWindow Implementation .cpp */\n\nconnect(myWorker,\n        SIGNAL(sendDatastruct(const QVariant&amp;)),\n        this,\n        SLOT(getDatastruct(const QVariant&amp;))\n        );\n\n\n/* Worker implementation .cpp */\n\nvoid Worker::notify(QString    TitleSuffix,\n                    QString    MessageSuffix,\n                    int        errNumber)\n{\n    notifyMsg_t notifyMsg;\n    notifyMsg.m_TitleSuffix = TitleSuffix;\n    notifyMsg.m_MessageSuffix = MessageSuffix;\n    notifyMsg.m_errNumber = errNumber;\n\n\n    QVariant data;\n    data.setValue(notifyMsg);\n    emit wrkrError_dbTaskSig(data);\n}\n</code></pre>\n\n<p>This code worked.</p>\n\n<p>Note that you don't include a dummy variable in the SIGNAL definition i.e.</p>\n\n<p>/* This     >> */  (const QVariant&amp;)</p>\n\n<p>/* Not this >> */  const QVariant&amp; data</p>\n\n<p>Don't ask me why.</p>\n\n<p>Best regards</p>\n\n<p>Rob</p>\n"}], "owner": {"reputation": 620, "user_id": 6523485, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh6.googleusercontent.com/-6PAcr-bps_0/AAAAAAAAAAI/AAAAAAAAAjE/EgtzF1AVp-g/photo.jpg?sz=128", "display_name": "Harry de winton", "link": "https://stackoverflow.com/users/6523485/harry-de-winton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4729, "favorite_count": 0, "accepted_answer_id": 39496427, "answer_count": 3, "score": 6, "last_activity_date": 1588216473, "creation_date": 1473872252, "last_edit_date": 1495541415, "question_id": 39495926, "link": "https://stackoverflow.com/questions/39495926/qt-signal-slots-sending-a-complete-structure", "title": "Qt Signal/Slots sending a complete structure", "body": "<p>I am attempting to send a structure via signals/slots between two threads, my signals/slots are connected properly and I have been able to send QStrings containing parts of my data but now I need to send the whole thing and Structures seem most sensible. However when I try the signal is not sent/recieved. The problem seems to be only with sending/receiving the structure, the processing before and after I have tried many ways. </p>\n\n<p>I cannot use pointers such <a href=\"https://stackoverflow.com/questions/19397567/using-structure-s-signal-in-qt\">here</a> or <a href=\"https://stackoverflow.com/questions/15567838/signal-emitting-a-structure\">here</a> as my data is generated too fast and memory gets over written or freed (I have tried with pointers and assume references will be similarly effected). </p>\n\n<p>I have already added the <a href=\"http://doc.qt.io/qt-5/qmetatype.html#Q_DECLARE_METATYPE\" rel=\"nofollow noreferrer\">Q_DECLARE_METATYPE</a> to my structure. My structure is only a small test for now (to be enlarged later) and is in its own header file.</p>\n\n<pre><code>#ifndef RETURNSTRUCT_H\n#define RETURNSTRUCT_H\n\nstruct Datastruct\n{\n    int markeridone;\n};\n\nQ_DECLARE_METATYPE(Datastruct);\n\n#endif //RETURNSTRUCT_H\n</code></pre>\n\n<p>Why might my program be unable to send/receive structures? any help is much appreciated.</p>\n\n<p>I am using windows 7, MinGW 32bit, Qt 5.7.0, Qt Creator 4.0.3</p>\n"}, {"tags": ["c++", "oop", "reference", "constants"], "comments": [{"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 2, "creation_date": 1473872323, "post_id": 39495898, "comment_id": 66309293, "body": "&quot; + Make Person::bodyMassIndex a const function, because it depends on the state of the object, here e.g. weight and height.&quot;   <b>This is not a reasonable argument for non-constness.</b>  string::c_str() is const and is entirely dependent on state."}], "answers": [{"tags": [], "owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "is_accepted": false, "score": 0, "last_activity_date": 1473872303, "creation_date": 1473872303, "answer_id": 39495945, "question_id": 39495898, "link": "https://stackoverflow.com/questions/39495898/correct-oop-design-if-i-want-to-call-non-const-function-of-const-reference/39495945#39495945", "title": "Correct OOP-design, if I want to call non-const function of const reference?", "body": "<p>Declare method as const since it's a getter anyways\n   <code>float bodyMassIndex() const;</code></p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 6831672, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cPfRd.jpg?s=128&g=1", "display_name": "hexcoffee", "link": "https://stackoverflow.com/users/6831672/hexcoffee"}, "edited": false, "score": 0, "creation_date": 1473873234, "post_id": 39496075, "comment_id": 66309755, "body": "Ahh, by declaring the function as <code>const</code>, I always only thought of something like <code>const float bodyMassIndex();</code>. Sorry about that confusion."}, {"owner": {"reputation": 2933, "user_id": 6350858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bfeae5d1ddef3ed5e81e88bdd30063f?s=128&d=identicon&r=PG&f=1", "display_name": "Ap31", "link": "https://stackoverflow.com/users/6350858/ap31"}, "reply_to_user": {"reputation": 37, "user_id": 6831672, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cPfRd.jpg?s=128&g=1", "display_name": "hexcoffee", "link": "https://stackoverflow.com/users/6831672/hexcoffee"}, "edited": false, "score": 0, "creation_date": 1473873660, "post_id": 39496075, "comment_id": 66309996, "body": "Well if you want to speculate further, one could say that non-static methods have &quot;invisible&quot; <code>*this</code> parameter, and cv-qualifiers of the method apply to that parameter"}], "tags": [], "owner": {"reputation": 2933, "user_id": 6350858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bfeae5d1ddef3ed5e81e88bdd30063f?s=128&d=identicon&r=PG&f=1", "display_name": "Ap31", "link": "https://stackoverflow.com/users/6350858/ap31"}, "is_accepted": true, "score": 3, "last_activity_date": 1473872767, "creation_date": 1473872767, "answer_id": 39496075, "question_id": 39495898, "link": "https://stackoverflow.com/questions/39495898/correct-oop-design-if-i-want-to-call-non-const-function-of-const-reference/39496075#39496075", "title": "Correct OOP-design, if I want to call non-const function of const reference?", "body": "<p>Declaring a method <code>const</code> is somewhat like making a promise that it won't try to modify the object. It will not deny you access to the object state and you still will be perfectly able to call it for non-const objects.\n So yes, the solution is <code>float bodyMassIndex() const;</code></p>\n"}, {"tags": [], "owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "is_accepted": false, "score": 0, "last_activity_date": 1473872774, "creation_date": 1473872774, "answer_id": 39496078, "question_id": 39495898, "link": "https://stackoverflow.com/questions/39495898/correct-oop-design-if-i-want-to-call-non-const-function-of-const-reference/39496078#39496078", "title": "Correct OOP-design, if I want to call non-const function of const reference?", "body": "<p>The requirement that <code>Person::bodyMassIndex()</code> should not be const is unreasonable and quite ridiculous. \nThe only argument that <code>Person::bodyMassIndex()</code> should not be const is that it actually <strong>changes the state of the Person object</strong>. It doesn't. </p>\n\n<p>So having <code>Person::bodyMassIndex()</code> non-const in the first place is a bug. A mistake in the class design.</p>\n"}], "owner": {"reputation": 37, "user_id": 6831672, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cPfRd.jpg?s=128&g=1", "display_name": "hexcoffee", "link": "https://stackoverflow.com/users/6831672/hexcoffee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 533, "favorite_count": 0, "accepted_answer_id": 39496075, "answer_count": 3, "score": 1, "last_activity_date": 1531408605, "creation_date": 1473872141, "last_edit_date": 1531408605, "question_id": 39495898, "link": "https://stackoverflow.com/questions/39495898/correct-oop-design-if-i-want-to-call-non-const-function-of-const-reference", "title": "Correct OOP-design, if I want to call non-const function of const reference?", "body": "<p>I guess I still have to learn a lot about not only C++, but object oriented programming itself. In a recent C++-project, I came across one question quite frecuently:  If I have a situation where I want to pass a const reference to some object, how can I use non-const functions of that object?  </p>\n\n<p>Let me give an example: Say I have a class with some data and a function with a small calculation with that data, for instance</p>\n\n\n\n<pre><code>class Person\n{\n    private:\n    float weight;\n    float height;\n    float age;\n    ...\n\n    public:\n    float bodyMassIndex();\n};\n</code></pre>\n\n<p>Now I have another class with different expertise, e.g.</p>\n\n<pre><code>class GymInstructor\n{   \n    private:\n    float knowledge;\n    int age;\n    ...\n\n    public:\n    int recommendDumbbellWeight(const Person &amp;person);\n};\n</code></pre>\n\n<p>Now say the function <code>GymInstructor::recommendDumbbellWeight</code> wants to use the function <code>Person::bodyMassIndex()</code> in its calculation.  </p>\n\n<p>Here is the list of things I should avoid or cannot do:</p>\n\n<ul>\n<li>Making a local copy of the <code>Person</code> inside <code>recommendDumbbellWeight</code> (so avoid something like <code>GymInstructor::recommendDumbbellWeight(Person person)</code>) because I do not need to and it slows down my program  </li>\n<li>Giving a pointer to <code>recommendDumbbellWeight</code> by something like <code>GymInstructor::recommendDumbbellWeight(Person *pPerson)</code>, because I just nead read-only access and should therefore avoid any errors by giving write-access to <code>recommendDumbbellWeight</code>  </li>\n<li>Make Person::bodyMassIndex a <code>const</code> function, because it depends on the state of the object, here e.g. <code>weight</code> and <code>height</code>.  </li>\n<li>Moving the function <code>bodyMassIndex()</code> to some other class, because it uses the data of the <code>Person</code>, so there is no real reason why another object should perform that calculation. If so, I would have to pass all the data to that other class.  </li>\n<li>Say, <code>GymInstructor::recommendDumbbellWeight</code> needs a lot more results of small calculations like <code>Person::bodyMassIndex()</code>, then I also should avoid just passing the result of the calculation with something like <code>GymInstructor::recommendDumbbellWeight(float bodyMassIndex, float experience, float fitness, ...</code> because it blows up my parameter list which looks ugly and produces unnecessary code.</li>\n</ul>\n\n<p>So what is actually left? I would love to call <code>Person::bodyMassIndex()</code> in <code>GymInstructor::recommendDumbbellWeight(const Person &amp;person)</code>, but I can't, because <code>person</code> is a const reference.<br>\nI assume that either I am too stupid to see the very obvious solution or there is something fundamentally wrong in my design. How would I solve my problem?</p>\n"}, {"tags": ["c++", "constructor"], "comments": [{"owner": {"reputation": 4320, "user_id": 5103620, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8ae06ea53a316cc879b9100b3ff25bfc?s=128&d=identicon&r=PG", "display_name": "Sebastian Lenartowicz", "link": "https://stackoverflow.com/users/5103620/sebastian-lenartowicz"}, "edited": false, "score": 0, "creation_date": 1473870370, "post_id": 39495349, "comment_id": 66308180, "body": "You can condense your constructors down to a single one using default parameters."}, {"owner": {"reputation": 762, "user_id": 1987633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7cc5084e895540051a920e541ab9b8c?s=128&d=identicon&r=PG", "display_name": "Andre Kostur", "link": "https://stackoverflow.com/users/1987633/andre-kostur"}, "edited": false, "score": 0, "creation_date": 1473891270, "post_id": 39495349, "comment_id": 66318365, "body": "And for amusement, add a constructor that only takes a string ...."}], "answers": [{"comments": [{"owner": {"reputation": 3184, "user_id": 6710751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qmR1W.jpg?s=128&g=1", "display_name": "Striezel", "link": "https://stackoverflow.com/users/6710751/striezel"}, "edited": false, "score": 0, "creation_date": 1473871668, "post_id": 39495431, "comment_id": 66308944, "body": "Just for completeness: It should be <code>game(float v = 1.0,string n = &quot;game&quot;)</code>, not <code>game(float v = 1.0,string n = &quot;game)</code>, because the code won&#39;t compile with the missing quote."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 3184, "user_id": 6710751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qmR1W.jpg?s=128&g=1", "display_name": "Striezel", "link": "https://stackoverflow.com/users/6710751/striezel"}, "edited": false, "score": 0, "creation_date": 1473871720, "post_id": 39495431, "comment_id": 66308969, "body": "@Striezel: Thanks, fixed."}, {"owner": {"reputation": 1396, "user_id": 2160682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/cf55e879294204517fc94e3f80887d57?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/2160682/anil"}, "edited": false, "score": 0, "creation_date": 1473872110, "post_id": 39495431, "comment_id": 66309180, "body": "@Cheersandhth.-Alf ,Just little doubt, as u told &quot;It works as if a temporary object is constructed from a single argument specified as initializer, so according the promblem ,A new object is created with version = 2.0 with code 2?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 1396, "user_id": 2160682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/cf55e879294204517fc94e3f80887d57?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/2160682/anil"}, "edited": false, "score": 1, "creation_date": 1473872930, "post_id": 39495431, "comment_id": 66309611, "body": "@SubSea: The temporary is in practice always optimized away. That&#39;s called &quot;elision&quot; of the temporary and the copy or move constructor call. But still, since the construction of a temporary plus implicit call of copy or move constructor call is the spec, a copy or move constructor must be accessible and must not be declared <code>explicit</code>."}], "tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": true, "score": 11, "last_activity_date": 1473871710, "last_edit_date": 1473871710, "creation_date": 1473870469, "answer_id": 39495431, "question_id": 39495349, "link": "https://stackoverflow.com/questions/39495349/assignment-initialization-of-a-constructor/39495431#39495431", "title": "Assignment initialization of a constructor", "body": "<p>What you call \"assignment form\" is a <strong>copy initialization</strong>.</p>\n\n<p>It works as if a temporary object is constructed from <em>a single argument</em> specified as initializer, and is then passed to the class' copy constructor or move constructor.</p>\n\n<p>So, the code</p>\n\n<pre><code>game lol2 = 2.0,\"league of legends2\"; //code 2\n</code></pre>\n\n<p>&hellip; is just syntactically invalid.</p>\n\n<hr>\n\n<p>Tip: Instead of three constructors, where the second adds a first argument, and the third adds a second argument, you can just use default argument values:</p>\n\n<pre><code>class game{\n\npublic:\n    float version;\n    string name;\n    game(float v = 1.0,string n = \"game\")\n        : version( v ), name( n )\n    {}\n};\n</code></pre>\n\n<p>The <code>:</code> syntax is a constructor member initializer list.</p>\n\n<p>It can sometimes be more efficient, sometimes necessary, and anyway is usually more concise and conventional.</p>\n"}, {"comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1473870667, "post_id": 39495484, "comment_id": 66308369, "body": "Are you sure it&#39;s the comma operator in this context? Do you get a complaint about the type of argument? Test this by adding a parenthesis around (then you do get comma operator for sure)."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1473870713, "post_id": 39495484, "comment_id": 66308409, "body": "@Cheersandhth.-Alf Oops.  It is just bad grammar.  fixing"}, {"owner": {"reputation": 1396, "user_id": 2160682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/cf55e879294204517fc94e3f80887d57?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/2160682/anil"}, "edited": false, "score": 0, "creation_date": 1473871197, "post_id": 39495484, "comment_id": 66308700, "body": "@NathanOliver ,there is no error like missing variable declartion here ,but i got your point of constructin objects with multiple variables."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 1396, "user_id": 2160682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/cf55e879294204517fc94e3f80887d57?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/2160682/anil"}, "edited": false, "score": 0, "creation_date": 1473871248, "post_id": 39495484, "comment_id": 66308729, "body": "@SubSea Yeah that is not what you will actually get.  I was just putting it in human readable language."}, {"owner": {"reputation": 1396, "user_id": 2160682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/cf55e879294204517fc94e3f80887d57?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/2160682/anil"}, "edited": false, "score": 0, "creation_date": 1473871379, "post_id": 39495484, "comment_id": 66308793, "body": "@NathanOliver .okay.i got you..:)"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 4, "last_activity_date": 1473871456, "last_edit_date": 1473871456, "creation_date": 1473870599, "answer_id": 39495484, "question_id": 39495349, "link": "https://stackoverflow.com/questions/39495349/assignment-initialization-of-a-constructor/39495484#39495484", "title": "Assignment initialization of a constructor", "body": "<p>You are not using the correct grammar to initialize a object from multiple values.  When you do</p>\n\n<pre><code>game lol2 = 2.0,\"league of legends2\";\n</code></pre>\n\n<p>The grammer expects a variable name after the comma like</p>\n\n<pre><code>type name1 = value1, name2 = value2;\n</code></pre>\n\n<p>So you get an error as you have</p>\n\n<pre><code>type name1 = value1, value2;\n                    ^ missing variable declaration here \n</code></pre>\n\n<p>When you have multiple variables that you need to construct with you can only use the folowing forms</p>\n\n<pre><code>type name = {value1, value2, ..., valuen};\ntype name{value1, value2, ..., valuen};\nauto name = type{value1, value2, ..., valuen};\ntype name(value1, value2, ..., valuen);\nauto name = type(value1, value2, ..., valuen);\n</code></pre>\n"}], "owner": {"reputation": 1396, "user_id": 2160682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/cf55e879294204517fc94e3f80887d57?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/2160682/anil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 0, "accepted_answer_id": 39495431, "answer_count": 2, "score": 8, "last_activity_date": 1473871710, "creation_date": 1473870156, "last_edit_date": 1473870750, "question_id": 39495349, "link": "https://stackoverflow.com/questions/39495349/assignment-initialization-of-a-constructor", "title": "Assignment initialization of a constructor", "body": "<p>I am trying out different versions of calling the constructor, and I came up with this</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\nusing namespace std;\nclass game{\n\n    public:\n        float version;\n        string name;\n        game()\n        {\n            name = \"game\";\n            version = 1.0;\n        }\n        game(float v,string n)\n        {\n            version = v;\n            name = n;\n        }\n        game(float v)\n        {\n            version = v;\n            name=\"any\";\n        }\n};\nint main()\n{\n    game lol1(1.0,\"league of legends\"); //functional form\n    game lol2 = 2.0;    //assignment form\n    game lol3{3.0,\"league2\"}; //uniform initialization\n    game *pt = &amp;lol1;\n    cout&lt;&lt;pt-&gt;name&lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n\n<p>Every statement compiles, but if I write</p>\n\n<pre><code> game lol2 = 2.0,\"league of legends2\"; //code 2\n</code></pre>\n\n<p>I get an error:</p>\n\n<blockquote>\n  <p>expected unqualified-id before string constant</p>\n</blockquote>\n\n<p>But the following code works fine:</p>\n\n<pre><code>game lol2 = {2.0,\"league of legends2\"}; //code 3\n</code></pre>\n\n<p>I am not getting what exactly the issue is with the second code. Any ideas?</p>\n"}, {"tags": ["c++", "linux", "multithreading", "performance"], "comments": [{"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 1, "creation_date": 1473869533, "post_id": 39495136, "comment_id": 66307725, "body": "Failing to set thread affinity doesn&#39;t guarantee that the thread must use core 0."}, {"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 1, "creation_date": 1473869960, "post_id": 39495136, "comment_id": 66307954, "body": "see <a href=\"http://stackoverflow.com/questions/39141897/setting-the-affinity-causes-increase-in-execution-time\" title=\"setting the affinity causes increase in execution time\">stackoverflow.com/questions/39141897/&hellip;</a>"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1473870054, "post_id": 39495136, "comment_id": 66308009, "body": "People often think theoretically than setting thread affinity will help. They seldom check. Few ones that do check get surprised."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1473873511, "post_id": 39495136, "comment_id": 66309915, "body": "Just guessing here, but <i>if</i> the two threads access a lot of the same data <i>and</i> that data is able to stay in the cores L1/L2 cashes when switching threads <i>and</i> the threads are not otherwise CPU intensive, then that may explain why they perform better running on the same core rather than different ones."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 2, "creation_date": 1473879405, "post_id": 39495136, "comment_id": 66313003, "body": "What happens if you set both threads&#39; affinity to the same core (i.e. so that they are forced to run on the same core all the time)?"}, {"owner": {"reputation": 33, "user_id": 6824685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/721ccd452826d85ccf2c0750eb9a8265?s=128&d=identicon&r=PG&f=1", "display_name": "Chaolin Zhang", "link": "https://stackoverflow.com/users/6824685/chaolin-zhang"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1473925545, "post_id": 39495136, "comment_id": 66327903, "body": "@Jeremy Friesner, I comfirm it. If no CPU affinity set, the two threads(prod/cons) run on core 0 indeed."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 2626866, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000122253959/picture?type=large", "display_name": "Everett Wenzel", "link": "https://stackoverflow.com/users/2626866/everett-wenzel"}, "edited": false, "score": 0, "creation_date": 1551212335, "post_id": 39499787, "comment_id": 96555964, "body": "This is a very impressive and well laid out answer. Have some internet points good sir! Thank you for your knowledge."}], "tags": [], "owner": {"reputation": 2173, "user_id": 6577680, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BNh_9G6Q-1M/AAAAAAAAAAI/AAAAAAAAAA8/uTxVAAioLfw/photo.jpg?sz=128", "display_name": "Matthew Fisher", "link": "https://stackoverflow.com/users/6577680/matthew-fisher"}, "is_accepted": true, "score": 6, "last_activity_date": 1473887952, "creation_date": 1473887952, "answer_id": 39499787, "question_id": 39495136, "link": "https://stackoverflow.com/questions/39495136/why-settting-cpu-affinity-make-threads-run-slower/39499787#39499787", "title": "Why settting CPU affinity make threads run slower?", "body": "<p>Gaining performance from CPU affinity is not so simple as pushing thread 1 to core 1 and thread 2 to core 2. This is a complex and heavily researched topic, I'll touch on the highlights.</p>\n\n<p>First off we need to define 'performance'.  Typically, we are interested in <a href=\"https://en.wikipedia.org/wiki/Throughput\" rel=\"noreferrer\">throughput</a>, <a href=\"https://en.wikipedia.org/wiki/Latency_(engineering)\" rel=\"noreferrer\">latency</a> and/or <a href=\"https://en.wikipedia.org/wiki/Scalability\" rel=\"noreferrer\">scalability</a>. Combining all three is a tricky architecture question that has received intense scrutiny in the Telecom, Finance and other industries.  </p>\n\n<p>Your case appears to be driven by the throughput metric. We want the sum of wall clock time across threads to be minimal.  Another way to state your question might be, \"What are the factors that affect throughput in a multithreaded process?\"</p>\n\n<p>Here are some of the many factors:</p>\n\n<ol>\n<li>Algorithm complexity has the greatest influence.  The <a href=\"https://en.wikipedia.org/wiki/Big_O_notation\" rel=\"noreferrer\">Big O</a>, theta, little O are all extremely useful in complex cases. The example is trivial but this still matters.  On the surface, the problem is O(n). The time will be linear based on the number of elements to allocate/deallocate.  Your question strikes to the heart of this matter because it shows in that physical computers don't perfectly model ideal computers. </li>\n<li>CPU resource.  Having CPU to throw at the problem can help if the problem can be parallelized.  Your problem has the underlying assumption that two threads will be better than one.  If so, perhaps four will be between than two.  Again, your actual results contradict the theoretical model.</li>\n<li>Queuing model.  Understanding the <a href=\"https://en.wikipedia.org/wiki/Queueing_theory\" rel=\"noreferrer\">Queuing</a> model is vitally important if performance gains are to be achieved. The example problem appears to be the classic single producer/single consumer model.</li>\n<li>Other Resources.  Depending on the problem a variety of other resources can constrain performance. Some factors include disk space, disk throughput, disk latency, network capacity, socket availability.  The example doesn't appear to suffer here.</li>\n<li>Kernel dependencies.  Moving to a lower level, performance can be dramatically impacted by the amount of kernel interaction.  Generally, kernel calls require a context switch which can be expensive if done constantly. Your example likely suffers this issue via the calls to new/delete.</li>\n<li>Serial access.  If a resource requires serial access then it will bottleneck in parallel algorithm.  Your example appears to have two such problems, the new/delete and the enqueue/dequeue.</li>\n<li>CPU cache.  The comments mentioned CPU <a href=\"https://en.wikipedia.org/wiki/CPU_cache\" rel=\"noreferrer\">caching</a> as a possibility. The L2/L3 caches can be a source of cache misses as well as <a href=\"https://en.wikipedia.org/wiki/False_sharing\" rel=\"noreferrer\">false sharing</a>.  I doubt that this is the main problem in your example but it could be a factor. </li>\n</ol>\n\n<p>Applying these ideas to your example, I see some issues. I assume you have two separate threads running hot and in parallel.  One thread producing (new) and the other consuming (delete).</p>\n\n<p>The heap is serial. Calling new and delete in different threads is a known performance bottleneck. There are several small block parallel allocators available including <a href=\"http://www.hoard.org/\" rel=\"noreferrer\">Hoard</a>. </p>\n\n<p>The queue is likely serial.  The implementation is not shown but the enqueue/dequeue is likely a point of serialization between the two threads. There are many examples of <a href=\"http://www.linuxjournal.com/content/lock-free-multi-producer-multi-consumer-queue-ring-buffer\" rel=\"noreferrer\">lock free ring buffers</a> that can be used between multiple threads. </p>\n\n<p>Thread starvation. In the example, if the producer is slower than the consumer then consumer will just be idling for much of the time. This is part of the queue theory that must be considered when crafting a high performance algorithm.  </p>\n\n<p>With all that background, we can now conclude that thread affinity isn't likely to matter until the serialization and starvation problems are solved.  The two threads may in fact run slower as they contend against one another for the shared resource or just waste cpu time idling.  As a result, the overall throughput goes down thus the wall clock time goes up.</p>\n\n<p>There is a huge demand in industry for engineers who understand these kinds of algorithms.  Educating yourself is likely to be a profitable venture. </p>\n"}], "owner": {"reputation": 33, "user_id": 6824685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/721ccd452826d85ccf2c0750eb9a8265?s=128&d=identicon&r=PG&f=1", "display_name": "Chaolin Zhang", "link": "https://stackoverflow.com/users/6824685/chaolin-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1599, "favorite_count": 3, "accepted_answer_id": 39499787, "answer_count": 1, "score": 3, "last_activity_date": 1473887952, "creation_date": 1473869419, "last_edit_date": 1473870253, "question_id": 39495136, "link": "https://stackoverflow.com/questions/39495136/why-settting-cpu-affinity-make-threads-run-slower", "title": "Why settting CPU affinity make threads run slower?", "body": "<p>all.</p>\n\n<p>I wrote a small case to test the multi-threaded producer/consumer model. My testbed is a low performance PC(8G RAM, J1900 CPU with 4 cores). I isolated the core 0 for Linux kernel, core 1-3 are unused. The producer thread runs on core 1, allocates 5000000 small objects, put them to a global queue. The consumer thread runs on core 2 and deallocate the objects from the queue. But I found if I do not set their CPU affinity(that is, they run on same core 0), the time performance get better than setting CPU affinity(8.76s VS 14.66s). The test results keep similar. Could someone explain the reason for me? IF my premise is incorrect(\"Setting CPU affinity can improve multi-threaded process' performance\"), it should not get worse at least. My code slice listed below:</p>\n\n<pre><code>void producer() {\n  Timestamp begin;\n\n  for ( int i = 0; i&lt;data_nb; ++i ) {\n    Test* test = new Test(i, i+1);\n    queue.enqueue(test);\n  }\n\n  Timestamp end;\n  TimeDuration td = end-begin;\n  printf(\"producer: %ldms(%.6fs)\\n\", td.asMicroSecond(), td.asSecond());\n}\n\nvoid consumer() {\n  Timestamp begin;\n\n  do {\n    Test* test = queue.dequeue();\n    if ( test ) {\n      nb.add(1); // nb is an atomic counter\n      delete test;\n      test = nullptr;\n    }\n  } while ( nb.get() &lt; data_nb );\n\n  Timestamp end;\n  TimeDuration td = end-begin;\n  //printf(\"%d data consumed\\n\", nb.get());\n  printf(\"consumer: %ldms(%.6fs)\\n\", td.asMicroSecond(), td.asSecond());\n}\n</code></pre>\n"}, {"tags": ["c++", "network-programming", "ip-address", "poco-libraries"], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 6725649, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GXeedruWyxk/AAAAAAAAAAI/AAAAAAAAAAs/vIwGtc7hY4E/photo.jpg?sz=128", "display_name": "jw-lighting", "link": "https://stackoverflow.com/users/6725649/jw-lighting"}, "is_accepted": true, "score": 1, "last_activity_date": 1484494730, "creation_date": 1484494730, "answer_id": 41662929, "question_id": 39495126, "link": "https://stackoverflow.com/questions/39495126/find-public-ip-with-poco/41662929#41662929", "title": "Find public IP with POCO", "body": "<p>When the host running the software using POCO is inside a local network using NAT, it is not directly possible to get the WAN-Address of the router (I guess you're meaning this when using the term \"my public IP\").</p>\n\n<p>Instead, you have to use a public server's API returning your IP address, for example: <a href=\"https://www.ipify.org/\" rel=\"nofollow noreferrer\">https://www.ipify.org/</a></p>\n"}], "owner": {"reputation": 2303, "user_id": 2175231, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4I57P.png?s=128&g=1", "display_name": "Wasabi", "link": "https://stackoverflow.com/users/2175231/wasabi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1002, "favorite_count": 0, "accepted_answer_id": 41662929, "answer_count": 1, "score": 1, "last_activity_date": 1484494730, "creation_date": 1473869386, "question_id": 39495126, "link": "https://stackoverflow.com/questions/39495126/find-public-ip-with-poco", "title": "Find public IP with POCO", "body": "<p>How can I find my public IP using POCO?</p>\n\n<p>Inspired by page 6 of <a href=\"https://pocoproject.org/slides/200-Network.pdf\" rel=\"nofollow\">their Network presentation</a>, I tried the following:</p>\n\n<pre><code>#include \"Poco/Net/DNS.h\"\n#include &lt;iostream&gt;\nusing Poco::Net::DNS;\nusing Poco::Net::HostEntry;\nint main(int argc, char** argv)\n{\n    const HostEntry&amp; entry = DNS::thisHost();\n    std::cout &lt;&lt; \"Canonical Name: \" &lt;&lt; entry.name() &lt;&lt; std::endl;\n\n    const HostEntry::AliasList&amp; aliases = entry.aliases();\n    HostEntry::AliasList::const_iterator alias_it = aliases.begin();\n    for (; alias_it != aliases.end(); ++alias_it)\n        std::cout &lt;&lt; \"Alias: \" &lt;&lt; *alias_it &lt;&lt; std::endl;\n\n    const HostEntry::AddressList&amp; addrs = entry.addresses();\n    HostEntry::AddressList::const_iterator addr_it = addrs.begin();\n    for (; addr_it != addrs.end(); ++addr_it)\n        std::cout &lt;&lt; \"Address: \" &lt;&lt; addr_it-&gt;toString() &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>This, however, returned two addresses: one IPv6 link-local (fe80:...) and one private LAN IPv4 (10.0...). It did not return my public IP.</p>\n\n<p>Can this be done?</p>\n"}, {"tags": ["c#", "c++", "dll", "marshalling", "unmanaged"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1473869523, "post_id": 39495124, "comment_id": 66307716, "body": "Are you sure the 0 is not the result of this being activated? <code>if (mathManager == NULL)         return false;</code>. Try returning <code>50.0</code> instead of <code>false</code>."}, {"owner": {"reputation": 5747, "user_id": 631599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5fc6b2cf893347e70c0a965f39a67209?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/631599/matt"}, "edited": false, "score": 0, "creation_date": 1473869704, "post_id": 39495124, "comment_id": 66307826, "body": "How do you call it in C#?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 5747, "user_id": 631599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5fc6b2cf893347e70c0a965f39a67209?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/631599/matt"}, "edited": false, "score": 0, "creation_date": 1473869808, "post_id": 39495124, "comment_id": 66307878, "body": "@Matt: I mean <code>add(double x, double y)</code> is never called. The C++ entrypoint from C# is <code>Add</code> not <code>add</code>"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1473869974, "post_id": 39495124, "comment_id": 66307966, "body": "It is a <i>lot</i> more obvious if you use <code>return NAN</code> instead of <code>return false</code>, false just isn&#39;t a very good <i>double</i> value.  Having that MathManager object created requires immaculate conception.  Focus on learning how to debug this code, Project &gt; Properties &gt; Debug tab to enable unmanaged debugging."}, {"owner": {"reputation": 193, "user_id": 2214312, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ef1ce1cda3a287cbd0fb346a4d501ca6?s=128&d=identicon&r=PG", "display_name": "Sean Sen Wang", "link": "https://stackoverflow.com/users/2214312/sean-sen-wang"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1473870770, "post_id": 39495124, "comment_id": 66308438, "body": "@Jean-Fran&#231;oisFabre Indeed! That was the issue. So the pointers cause the issue! Thanks so much!"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1473870939, "post_id": 39495124, "comment_id": 66308552, "body": "I&#39;m glad. It was kind of obvious but I couldn&#39;t test it, and the fact that it&#39;s zero is luck (although it&#39;s likely to be zero if it&#39;s a global but I wouldn&#39;t bet on it)."}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 3, "last_activity_date": 1473869695, "creation_date": 1473869695, "answer_id": 39495217, "question_id": 39495124, "link": "https://stackoverflow.com/questions/39495124/using-unmanaged-c-code-in-c-returns-0-for-all-type-double/39495217#39495217", "title": "Using unmanaged C++ code in C# returns 0 for all type double", "body": "<p>you declare that</p>\n\n<pre><code>MathManager* mathManager;\n</code></pre>\n\n<p>which is not defined. You're lucky it's actually NULL, thus your protection code works and returns <code>false</code>.</p>\n\n<pre><code>if (mathManager == NULL) return false;\n</code></pre>\n\n<p>you could do much simply without any pointers:</p>\n\n<pre><code>MathManager mathManager;\n\nMATHMANAGERDLL_API double __stdcall Add(double x, double y)\n{        \n    return mathManager.add(x, y);\n}\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 2214312, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ef1ce1cda3a287cbd0fb346a4d501ca6?s=128&d=identicon&r=PG", "display_name": "Sean Sen Wang", "link": "https://stackoverflow.com/users/2214312/sean-sen-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 39495217, "answer_count": 1, "score": 1, "last_activity_date": 1473869695, "creation_date": 1473869384, "question_id": 39495124, "link": "https://stackoverflow.com/questions/39495124/using-unmanaged-c-code-in-c-returns-0-for-all-type-double", "title": "Using unmanaged C++ code in C# returns 0 for all type double", "body": "<p>I am trying to write  a simple calculator DLL in C++ and use the DLL in my C# GUI. However, I am always getting \"0\" as my return value for any use of the double type.\nThis is the C++ side:</p>\n\n<p>MathDLL.h</p>\n\n<pre><code>#ifndef MATH_DLL_H\n#define MATH_DLL_H\n\n#define MATHMANAGERDLL_API __declspec(dllexport)\n\nextern \"C\" MATHMANAGERDLL_API double __stdcall Add(double x, double y);\n\n#endif //MATH_DLL_H\n</code></pre>\n\n<p>MathDLL.cpp</p>\n\n<pre><code>#include \"MathDLL.h\"\n#ifdef _MANAGED\n#pragma managed(push, off)\n#endif\n#define NULL 0\nMathManager* mathManager;\n\nMATHMANAGERDLL_API double __stdcall Add(double x, double y)\n{\n    if (mathManager == NULL)\n        return false;\n\n    return mathManager-&gt;add(x, y);\n}\n#ifdef _MANAGED\n#pragma managed(pop)\n#endif\n</code></pre>\n\n<p>MathManager.h</p>\n\n<pre><code>#ifndef MATH_MANAGER_H\n#define MATH_MANAGER_H\nclass MathManager\n{\npublic:\n    MathManager();\n    ~MathManager();\n\n    double __stdcall add(double x, double y);\n};\n\n#endif //MATH_MANAGER_H\n</code></pre>\n\n<p>MathManager.cpp</p>\n\n<pre><code>#include \"MathManager.h\"\n\nMathManager::MathManager()\n{\n\n}\n\nMathManager::~MathManager()\n{\n\n}\n\ndouble __stdcall MathManager::add(double x, double y)\n{\n    return x+y;\n}\n</code></pre>\n\n<p>I am importing the DLL functions like so in C#:</p>\n\n<p>SomeWinFormApp.cs</p>\n\n<pre><code>...\n// Import Math Calculation Functions (MathDLL.h)\n    [DllImport(\"MATH_DLL.dll\", CallingConvention = CallingConvention.StdCall, EntryPoint = \"Add\")]\n    public static extern double Add(double x, double y);\n</code></pre>\n\n<p>When I call Add(), I am getting a return value of 0. I even edited the C++ side to just</p>\n\n<pre><code>double __stdcall MathManager::add(double x, double y)\n{\n    return 1.0;\n}\n</code></pre>\n\n<p>But I still get 0. What could be wrong here? I was getting PInvoke errors earlier, which is why I changed to __stdcall. If I used __cdecl, I would still get 0's.</p>\n\n<p>Any help is appreciated. Thanks!</p>\n"}, {"tags": ["c++", "string", "stl"], "comments": [{"owner": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "edited": false, "score": 1, "creation_date": 1473868079, "post_id": 39494655, "comment_id": 66306849, "body": "word.begin()+2, word.begin()+4. Don&#39;t forget to check size"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1473877067, "post_id": 39494655, "comment_id": 66311741, "body": "You may look at <code>std::next_permutation</code> for your next lexicographical sequence. <a href=\"https://ideone.com/M2Z5MT\" rel=\"nofollow noreferrer\">Demo</a>"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 5576616, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/848849668561293/picture?type=large", "display_name": "Metafity", "link": "https://stackoverflow.com/users/5576616/metafity"}, "edited": false, "score": 0, "creation_date": 1473869125, "post_id": 39494750, "comment_id": 66307478, "body": "Thanks! This sees to works. Although my code still doesn&#39;t seem to be doing what it should. I have edited the original question, would you mind taking a look at it, please?"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1473868637, "last_edit_date": 1473868637, "creation_date": 1473868130, "answer_id": 39494750, "question_id": 39494655, "link": "https://stackoverflow.com/questions/39494655/sort-a-substring-using-stl/39494750#39494750", "title": "Sort a substring using STL", "body": "<p><code>std::string</code> uses random-access iterators, so you can simply add the indexes to the <code>begin</code> iterator:</p>\n\n<pre><code>std::string word=\"dcba\";\nstd::sort(word.begin()+2, word.begin()+4);\n</code></pre>\n\n<p>Alternatively, you can use <code>std::advance()</code>:</p>\n\n<pre><code>std::string word=\"dcba\";\n\nstd::string::iterator start = word.begin();\nstd::advance(start, 2);\n\nstd::string::iterator end = start;\nstd::advance(end, 2);\n\nstd::sort(start, end);\n</code></pre>\n\n<p>Alternatively, you can use <code>std::next()</code> (C++11 and later):</p>\n\n<pre><code>std::string word=\"dcba\";\nstd::sort(std::next(word.begin(), 2), std::next(word.begin(), 4));\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>std::string word=\"dcba\";\nauto start = std::next(word.begin(), 2);\nstd::sort(start, std::next(start, 2));\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5576616, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/848849668561293/picture?type=large", "display_name": "Metafity", "link": "https://stackoverflow.com/users/5576616/metafity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2833, "favorite_count": 1, "accepted_answer_id": 39494750, "answer_count": 1, "score": 0, "last_activity_date": 1473869041, "creation_date": 1473867805, "last_edit_date": 1473869041, "question_id": 39494655, "link": "https://stackoverflow.com/questions/39494655/sort-a-substring-using-stl", "title": "Sort a substring using STL", "body": "<p>Is there any way to sort a substring using STL?</p>\n\n<p>I know I can do this.</p>\n\n<pre><code>std::string word=\"dcba\";\nstd::sort(word.begin(), word.end());\n</code></pre>\n\n<p>But how do I obtain iterators for arbitrary indices?</p>\n\n<p>Eg- If I wanted to sort from indices 2 to 4, \"dcab\"</p>\n\n<p>Edit - This was needed for a function to generate the next lexicographical sequence from a given string.</p>\n\n<pre><code>bool nextLex(string s) {\n    for(int i=s.length()-1;i&gt;=0;i--) {\n        for(int j=i-1;j&gt;=0;j--) {\n            if(s[j]&lt;s[i]) {\n                swap(s[i],s[j]);\n                sort(s.begin()+j,s.end());\n                cout&lt;&lt;s&lt;&lt;endl;\n                return true;\n            }\n        }\n    }\nreturn false;\n}\n</code></pre>\n"}, {"tags": ["c#", "c++", "arrays", "reference"], "answers": [{"comments": [{"owner": {"reputation": 429, "user_id": 1553132, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/277dcbb7dfd2df7493cea20b84bc95d5?s=128&d=identicon&r=PG", "display_name": "Seapoe", "link": "https://stackoverflow.com/users/1553132/seapoe"}, "edited": false, "score": 0, "creation_date": 1473868787, "post_id": 39494565, "comment_id": 66307262, "body": "Let&#39;s say I go with this approach and effectively do a new on each pull from the queue. Should I do anything with GC or leave it to the CLR to handle it? I&#39;m talking tons of array objects"}, {"owner": {"reputation": 193178, "user_id": 1159478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdc1819fb4534da6c044b03b7ec38fe?s=128&d=identicon&r=PG", "display_name": "Servy", "link": "https://stackoverflow.com/users/1159478/servy"}, "reply_to_user": {"reputation": 429, "user_id": 1553132, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/277dcbb7dfd2df7493cea20b84bc95d5?s=128&d=identicon&r=PG", "display_name": "Seapoe", "link": "https://stackoverflow.com/users/1553132/seapoe"}, "edited": false, "score": 0, "creation_date": 1473869007, "post_id": 39494565, "comment_id": 66307414, "body": "@Seapoe You don&#39;t really have a choice either way.  The GC manages managed objects, you&#39;re creating a managed object, therefore, the GC will manage it."}], "tags": [], "owner": {"reputation": 193178, "user_id": 1159478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdc1819fb4534da6c044b03b7ec38fe?s=128&d=identicon&r=PG", "display_name": "Servy", "link": "https://stackoverflow.com/users/1159478/servy"}, "is_accepted": true, "score": 0, "last_activity_date": 1473867573, "creation_date": 1473867573, "answer_id": 39494565, "question_id": 39494476, "link": "https://stackoverflow.com/questions/39494476/force-array-to-be-value-type-or-workaround-c/39494565#39494565", "title": "Force Array to Be Value Type or Workaround C#", "body": "<p>If you want to have several different arrays, the correct approach is to simply create multiple arrays, rather than re-using a single array when you want to have multiple.  </p>\n\n<p>To create a type that has the semantics that you copy the entirety of its data whenever you assign it to another variable wouldn't even save you the effort of creating multiple arrays, as you'd still be doing that when you copied them.</p>\n"}], "owner": {"reputation": 429, "user_id": 1553132, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/277dcbb7dfd2df7493cea20b84bc95d5?s=128&d=identicon&r=PG", "display_name": "Seapoe", "link": "https://stackoverflow.com/users/1553132/seapoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 39494565, "answer_count": 1, "score": 0, "last_activity_date": 1473867573, "creation_date": 1473867324, "question_id": 39494476, "link": "https://stackoverflow.com/questions/39494476/force-array-to-be-value-type-or-workaround-c", "title": "Force Array to Be Value Type or Workaround C#", "body": "<p>I've encountered an interesting problem. So I know arrays in C# are reference types. I've found that I actually need it to act like a value type. I have a C++ queue that I'm pulling data from in a C# app that has a byte[] parameter. The data pulled is stored in that variable and then I append that byte[] array to a List. Since array's are reference in C#, each item in the list takes on the value of whatever the last pulled data is. My first thought is to do a \"new\" on each data pull but that sounds costly and bad programming practice. Is there a workaround I'm missing?</p>\n"}, {"tags": ["c++", "for-loop"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 51, "creation_date": 1473867472, "post_id": 39494473, "comment_id": 66306459, "body": "<code>++i</code> is better than <code>i++</code> not for any arcane reasons of second-guessing the compiler, but because it&#39;s what you mean. Write code that does what you mean, not some other code that happens to solve your problem as a side effect. But that&#39;s been true since 1972, so I wouldn&#39;t call that &quot;new hotness&quot;."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 4, "creation_date": 1473867485, "post_id": 39494473, "comment_id": 66306466, "body": "I&#39;m not sure the rationale for #2 applies to any practical HW implementation..."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 19, "creation_date": 1473867491, "post_id": 39494473, "comment_id": 66306470, "body": "Your &quot;new hotness&quot; compiles in <a href=\"http://coliru.stacked-crooked.com/a/5e04f0b96a103c06\" rel=\"nofollow noreferrer\">c++03</a>, I would disregard the content of those slides."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 4, "creation_date": 1473867642, "post_id": 39494473, "comment_id": 66306566, "body": "@KerrekSB - Why is <code>++i</code> more &quot;what you mean&quot; than <code>i++</code> in this situation?"}, {"owner": {"reputation": 644, "user_id": 5744883, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4e17219364956c469a3a4c1dfa469d35?s=128&d=identicon&r=PG&f=1", "display_name": "Parnab Sanyal", "link": "https://stackoverflow.com/users/5744883/parnab-sanyal"}, "edited": false, "score": 0, "creation_date": 1473867644, "post_id": 39494473, "comment_id": 66306568, "body": "actually we can simply write <code>int i(10);</code>. This is not only made for loops."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 7, "creation_date": 1473867674, "post_id": 39494473, "comment_id": 66306587, "body": "A similar argument can be made for the predicate. Use <code>&lt;</code> when the ordering of integers is material to the algorithm. Otherwise, if all you want is a sentinel that signals the end of the iteration, then <code>!=</code> is more appropriate, since it makes fewer assumptions about the details and concentrates on the underlying logic. The benefit is that the very thought process is now &quot;portable&quot;, since it applies to a much more general concept of iteration. Again, the technicalities haven&#39;t changed since 1972, but the experience with generality and code reuse has."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 2, "creation_date": 1473867698, "post_id": 39494473, "comment_id": 66306608, "body": "@OliverCharlesworth: Because all you mean is to increment the variable; you don&#39;t mean to obtain its previous value."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 8, "creation_date": 1473867784, "post_id": 39494473, "comment_id": 66306660, "body": "@KerrekSB - But I don&#39;t mean to obtain either its previous <i>or</i> its new value - all I&#39;m interested in is the side-effect of incrementing ;)"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1473867918, "post_id": 39494473, "comment_id": 66306742, "body": "This is not so much about <code>++</code> as it is about a combination of <code>++</code> and <code>!=</code>. Voting to re-open."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1473867958, "post_id": 39494473, "comment_id": 66306775, "body": "@OliverCharlesworth This seems to be a case of: I consider i++ to be the default, and ++i an optimization vs I consider ++i to be the default and i++ to be syntactic sugar for when I also need the original value."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1473868085, "post_id": 39494473, "comment_id": 66306854, "body": "To provide a (flippant) answer to the actual question - I suspect the author is merely providing a (flippant) strawman example to support his thesis that C++ style has evolved significantly."}, {"owner": {"reputation": 7393, "user_id": 1690777, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/18ef5bab4c70735313d86c7240e4abed?s=128&d=identicon&r=PG", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1690777/sergey"}, "edited": false, "score": 2, "creation_date": 1473868308, "post_id": 39494473, "comment_id": 66306960, "body": "To make the code even more &quot;modern&quot;, you may also use uniformal initialization: <code>int i{0};</code> instead of <code>int i(0);</code>. Such a form has many advantages: <a href=\"http://programmers.stackexchange.com/questions/133688/is-c11-uniform-initialization-a-replacement-for-the-old-style-syntax\">1</a>, <a href=\"https://herbsutter.com/2013/05/09/gotw-1-solution/\" rel=\"nofollow noreferrer\">2</a>, <a href=\"https://herbsutter.com/elements-of-modern-c-style/\" rel=\"nofollow noreferrer\">3</a>, but the <code>for</code> loop initialization seems to be the least sensible place for it."}, {"owner": {"reputation": 8075, "user_id": 2169853, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/68b89009f4066d3e1adbe72d4329c8d3?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/2169853/jens"}, "edited": false, "score": 2, "creation_date": 1473868382, "post_id": 39494473, "comment_id": 66307007, "body": "The slides are from 2007. C++ has changed considerably, and the way that C++ is (or should be) programmed is very different from the old times. I would disregard the talk and look at some newer material instead."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 2, "creation_date": 1473869212, "post_id": 39494473, "comment_id": 66307529, "body": "#2 argument is nonsense IMHO: Any CPU I know that has some sort of <code>cmp</code> instruction will set and reset both zero and carry flag with no additional effort whatsoever - Thus &quot;equal&quot; and &quot;less than&quot; (or, their negation) are tested with the very same instruction"}, {"owner": {"reputation": 11262, "user_id": 3580294, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GODPL.jpg?s=128&g=1", "display_name": "awksp", "link": "https://stackoverflow.com/users/3580294/awksp"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1473870439, "post_id": 39494473, "comment_id": 66308234, "body": "@KerrekSB That&#39;s a good point. Don&#39;t think that is what was on the author&#39;s mind, but still a good reason to not bother with such trivial things."}, {"owner": {"reputation": 11262, "user_id": 3580294, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GODPL.jpg?s=128&g=1", "display_name": "awksp", "link": "https://stackoverflow.com/users/3580294/awksp"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1473870510, "post_id": 39494473, "comment_id": 66308268, "body": "@Borgleader I wasn&#39;t expecting it to fail compilation; it&#39;s just the claim/style that was interesting. And yeah, the i++ vs ++i default thing definitely is factoring in here; haven&#39;t quite cleaned out the Java from my C++ (and C, in this case) style."}, {"owner": {"reputation": 11262, "user_id": 3580294, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GODPL.jpg?s=128&g=1", "display_name": "awksp", "link": "https://stackoverflow.com/users/3580294/awksp"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1473870687, "post_id": 39494473, "comment_id": 66308389, "body": "@OliverCharlesworth Yeah, that&#39;s what I was thinking too, but in the absence of a recording I was hoping that he&#39;d actually have some sort of rationale besides &quot;It looks funny&quot;"}, {"owner": {"reputation": 11262, "user_id": 3580294, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GODPL.jpg?s=128&g=1", "display_name": "awksp", "link": "https://stackoverflow.com/users/3580294/awksp"}, "reply_to_user": {"reputation": 8075, "user_id": 2169853, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/68b89009f4066d3e1adbe72d4329c8d3?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/2169853/jens"}, "edited": false, "score": 0, "creation_date": 1473870896, "post_id": 39494473, "comment_id": 66308523, "body": "@Jens Yeah, it&#39;s slightly out of date. I&#39;m not trying to use it as a reference; I&#39;m just wondering where the author was coming from"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 2, "creation_date": 1473874881, "post_id": 39494473, "comment_id": 66310672, "body": "Isn&#39;t the new hotness &quot;no raw for loops&quot;?"}, {"owner": {"reputation": 11262, "user_id": 3580294, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GODPL.jpg?s=128&g=1", "display_name": "awksp", "link": "https://stackoverflow.com/users/3580294/awksp"}, "edited": false, "score": 0, "creation_date": 1473877965, "post_id": 39494473, "comment_id": 66312225, "body": "@manni66 Those slides are pretty old, so the &quot;new&quot; it is referring to isn&#39;t very new"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 16, "creation_date": 1473882467, "post_id": 39494473, "comment_id": 66314550, "body": "This is the same guy who delivered <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=30475\" rel=\"nofollow noreferrer\">a massive rant</a> on GCC&#39;s treating signed overflow as undefined. A healthy helping of salt is needed."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1473896597, "post_id": 39494473, "comment_id": 66319805, "body": "@T.C.: In 1988, the term &quot;C&quot; described a language whose semantics were, essentially, &quot;On platforms which are similar to the PDP-11 except for built-in types&#39; representations and alignment requirements, behave like the language Dennis Ritchie invented on the PDP-11&quot;.  On platforms which differed from the PDP-11 in other ways, it would have been unclear--prior to the C standard--when an implementation should be expected to do whatever is necessary to emulate the PDP-11 behavior, and when it shouldn&#39;t, but platforms that were fundamentally similar to the PDP-11 (i.e. the vast majority..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1473896849, "post_id": 39494473, "comment_id": 66319865, "body": "...of implementations that were current in 1988, and the even vaster majority of implementations that are current today) could cheaply support many useful behaviors which would be expensive to support on other platforms.  For years afterward, on most platforms, the term &quot;C&quot; meant the <i>superset</i> of the language that existed previously and the language defined by the Committee.  The language would be vastly more useful if behaviors that had been defined on most platforms prior to C89 were recognized as being defined, by default, on such platforms except when explicitly waived."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1473896966, "post_id": 39494473, "comment_id": 66319892, "body": "@T.C.: Having a mode where an overflowed integer quantity may arbitrarily compare larger or smaller than any other integer would facilitate optimizations <i>if</i> a cast to the integer type were required to wrap the result into range (so <code>x+y &gt; x</code> could be replaced with <code>y&gt;0</code>, but <code>(int)(x+y) &gt; x</code> would have to perform the arithmetic and examine the lower 32/64/whatever bits as a two&#39;s-complement signed quantity.  Forcing programmers to avoid overflow at all costs, however, leads to code which is less efficient than would be possible with the above semantics."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1473897309, "post_id": 39494473, "comment_id": 66319974, "body": "@T.C.: I think a fundamental problem is that some people today assume the authors of the Standard were trying to balance programmer friendliness with optimization. They were doing nothing of the sort. Their primary objective was that if an existing compiler for some platform--no matter how obscure--could perform some task with a certain level of performance, a C89 compiler should be able to do just as well. If some obscure platform benefited from treating something as UB, even if 99% of other platforms defined it, then the proper thing to do was have the Standard impose no requirements but..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1473897429, "post_id": 39494473, "comment_id": 66320009, "body": "...figure that if implementations where it was sensible to define the behavior did so, without having to be ordered to, before the Standard was published, they would likewise continue to do so, without having to be ordered to, afterward."}], "answers": [{"comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 9, "creation_date": 1473868490, "post_id": 39494757, "comment_id": 66307079, "body": "That&#39;s pretty academic, though - if you&#39;re ever in a situation where <code>a &gt; b</code> would lead to post-loop problems, then the continuation condition <code>a != b</code> would already have led to an infinite loop."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 5, "creation_date": 1473868760, "post_id": 39494757, "comment_id": 66307236, "body": "@OliverCharlesworth That&#39;s exactly the point! An infinite loop has a better chance of attracting your attention than a (slightly) incorrect result of a computation. I think that this specific argument is one of these rare cases when a purely academic argument gives you free, easy-to-follow advise for everyday coding. FWIW, I&#39;ve been writing loops this way for some 28 years."}, {"owner": {"reputation": 11262, "user_id": 3580294, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GODPL.jpg?s=128&g=1", "display_name": "awksp", "link": "https://stackoverflow.com/users/3580294/awksp"}, "edited": false, "score": 3, "creation_date": 1473871314, "post_id": 39494757, "comment_id": 66308760, "body": "<code>it matters more when you use iterators</code> -- It&#39;s a sure sign of my inexperience that I didn&#39;t think about iterators at all when writing this question. Dijkstra&#39;s argument is a fresh one to me. I&#39;m not totally convinced, because while you know that <code>a == b</code> immediately after the loop, you don&#39;t know that <code>a</code> was &quot;within range&quot;, for lack of a better phrase. And if you can prove that the loop index can&#39;t skip over the value of <code>b</code>, shouldn&#39;t that also be applicable to <code>a &lt; b</code>? Can&#39;t argue that an infinite loop is more noticeable than an off-by-one error"}, {"owner": {"reputation": 11262, "user_id": 3580294, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GODPL.jpg?s=128&g=1", "display_name": "awksp", "link": "https://stackoverflow.com/users/3580294/awksp"}, "edited": false, "score": 0, "creation_date": 1473871383, "post_id": 39494757, "comment_id": 66308797, "body": "Also, I like the linked Amazon page. &quot;A Discipline of Programming: 59683rd Edition&quot;. Sounds like Dijkstra might have needed &quot;A Discipline of Writing&quot; himself :P"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 11262, "user_id": 3580294, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GODPL.jpg?s=128&g=1", "display_name": "awksp", "link": "https://stackoverflow.com/users/3580294/awksp"}, "edited": false, "score": 3, "creation_date": 1473872350, "post_id": 39494757, "comment_id": 66309311, "body": "@awksp When you use <code>!=</code>, your readers wouldn&#39;t have to prove that <code>a</code> wouldn&#39;t skip over <code>b</code>, because you wrote it explicitly in the body of your code. When you write <code>&lt;</code>, on the other hand, your readers might need to check the body of your loop for other tricks, such as setting <code>a</code> to <code>MAX_INT</code> or something equally silly. Using <code>!=</code> tells them that there are no tricks; <code>&lt;</code> leaves the readers to check for themselves."}, {"owner": {"reputation": 11262, "user_id": 3580294, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GODPL.jpg?s=128&g=1", "display_name": "awksp", "link": "https://stackoverflow.com/users/3580294/awksp"}, "edited": false, "score": 0, "creation_date": 1473872581, "post_id": 39494757, "comment_id": 66309416, "body": "I think I see what you&#39;re saying -- when the loop terminates, the value of <code>a</code> is known. What I had in mind was making sure <code>a</code> didn&#39;t overflow/loop around, which, to me, would require reading the body of the code either way. Did I get your point right?"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1473892451, "post_id": 39494757, "comment_id": 66318668, "body": "If you want to be paranoid, then you could add an <code>assert(! (a &gt; b));</code> in the loop&#39;s block. That way you can catch obscure bugs but can also use the better loop condition."}, {"owner": {"reputation": 222, "user_id": 6467688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bf732ef592dbe8400fed50bba557f3?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmale", "link": "https://stackoverflow.com/users/6467688/hoffmale"}, "edited": false, "score": 1, "creation_date": 1473894931, "post_id": 39494757, "comment_id": 66319384, "body": "1. There&#39;s always another possible way to get out of a loop (which will make reasoning about the post-conditions a lot harder): <code>break</code>, <code>return</code> and <code>goto</code> 2. In many cases, you don&#39;t care about the value of <code>a</code> after the loop - the loop variable is often scoped. 3. <code>a &lt; b</code> and <code>a != b</code> are only logically equivalent when you&#39;re increasing a in steps of <code>c</code> and can make the guarantee that the start value will be lower than the end value and the difference <code>b-a</code> will be a multiple of <code>c</code> (so your stronger post-condition needs a stronger guarantee on the loop parameters)."}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1473920238, "post_id": 39494757, "comment_id": 66325529, "body": "Still if you&#39;re implementing a loop like <code>\u2211\u1d47\u1d62\u208c\u2090 f\u1d62</code>, you do want to use <code>i&lt;b</code>, otherwise where you should get 0 (when <code>a&gt;b</code>), you&#39;ll instead get infinite loop."}, {"owner": {"reputation": 222, "user_id": 6467688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bf732ef592dbe8400fed50bba557f3?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmale", "link": "https://stackoverflow.com/users/6467688/hoffmale"}, "edited": false, "score": 0, "creation_date": 1473928772, "post_id": 39494757, "comment_id": 66329651, "body": "also, if you switch the type of the loop variable to floating point (<code>for(double a = 0.0; a != b; a += 1.0)</code>), you might find out that <code>a != b</code> might never be false"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 222, "user_id": 6467688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bf732ef592dbe8400fed50bba557f3?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmale", "link": "https://stackoverflow.com/users/6467688/hoffmale"}, "edited": false, "score": 0, "creation_date": 1473931447, "post_id": 39494757, "comment_id": 66331233, "body": "@hoffmale Comparing FP variables for equality is nearly always a mistake, so no surprise here. An infinite loop resulting from using <code>!=</code> helps you find that your assumption of FP behavior was wrong."}, {"owner": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 0, "creation_date": 1473931780, "post_id": 39494757, "comment_id": 66331481, "body": "&quot;it matters more when you use iterators&quot; - although since we are talking about premature optimization, you should check that for your compiler with optimizations on, iterators don&#39;t just reduce to pointers for which it again does not matter because the post-increment is optimized to a pre-increment."}, {"owner": {"reputation": 222, "user_id": 6467688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bf732ef592dbe8400fed50bba557f3?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmale", "link": "https://stackoverflow.com/users/6467688/hoffmale"}, "edited": false, "score": 0, "creation_date": 1473933041, "post_id": 39494757, "comment_id": 66332455, "body": "@dasblinkenlight: I know that comparing FP variables for absolute equality is nearly always a mistake. The point of that comment was to show that weakening the loop continuation condition might introduce very subtle &quot;bugs&quot; that can be very hard to reason about (especially for those not too well versed in FP details in this case), maybe harder than about the weaker post-condition."}, {"owner": {"reputation": 1369, "user_id": 5771399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c801f6ed43d6b594cfe250a6bf05333?s=128&d=identicon&r=PG&f=1", "display_name": "v7d8dpo4", "link": "https://stackoverflow.com/users/5771399/v7d8dpo4"}, "reply_to_user": {"reputation": 222, "user_id": 6467688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bf732ef592dbe8400fed50bba557f3?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmale", "link": "https://stackoverflow.com/users/6467688/hoffmale"}, "edited": false, "score": 0, "creation_date": 1473943306, "post_id": 39494757, "comment_id": 66338458, "body": "@hoffmale Using a floating point as the counter makes it hard for the programmer to know how many times the loop will execute even with <code>&lt;</code>."}, {"owner": {"reputation": 222, "user_id": 6467688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bf732ef592dbe8400fed50bba557f3?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmale", "link": "https://stackoverflow.com/users/6467688/hoffmale"}, "reply_to_user": {"reputation": 1369, "user_id": 5771399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c801f6ed43d6b594cfe250a6bf05333?s=128&d=identicon&r=PG&f=1", "display_name": "v7d8dpo4", "link": "https://stackoverflow.com/users/5771399/v7d8dpo4"}, "edited": false, "score": 0, "creation_date": 1473944125, "post_id": 39494757, "comment_id": 66339009, "body": "@v7d8dpo4: I&#39;m not encouraging using FP counter variables - but I&#39;ve seen enough code (mostly by more academic people) that used those. Also, I tried to find a rather trivial example that made reasoning about continuation and post-conditions a lot harder (changing a counter variable from int to double by itself doesn&#39;t seem that bad of a change on a first glance)"}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 22, "last_activity_date": 1473868152, "creation_date": 1473868152, "answer_id": 39494757, "question_id": 39494473, "link": "https://stackoverflow.com/questions/39494473/is-there-any-basis-for-this-alternative-for-loop-syntax/39494757#39494757", "title": "Is there any basis for this alternative &#39;for&#39; loop syntax?", "body": "<p>You are right about optimizing compilers and prefix vs. postfix <code>++</code> operator. It does not matter for an <code>int</code>, but it matters more when you use iterators.</p>\n\n<p>The second portion of your question is more interesting:</p>\n\n<blockquote>\n  <p>Using <code>!=</code> instead of <code>&lt;</code> is also suspicious to me, because it makes the loop semantically different than the original version, and can lead to some rare, but interesting, bugs.</p>\n</blockquote>\n\n<p>I would rephrase it as \"can <strong>catch</strong> some rare, but interesting, bugs.\"</p>\n\n<p>One simple way to argue this point was offered by Dijkstra in his book <a href=\"https://rads.stackoverflow.com/amzn/click/com/013215871X\" rel=\"noreferrer\" rel=\"nofollow noreferrer\"><em>A Discipline of Programming</em></a>. He pointed out that it is easier to reason about loops with stronger post-conditions than it is to reason about loops with weaker post-conditions. Since post-condition of a loop is the inverse of its continuation condition, one should prefer loops with weaker continuation conditions.</p>\n\n<p><code>a != b</code> is weaker than <code>a &lt; b</code>, because <code>a &lt; b</code> implies that <code>a != b</code>, but <code>a != b</code> does not imply that <code>a &lt; b</code>. Therefore, <code>a != b</code> makes a better continuation condition.</p>\n\n<p>In very simple terms, you know that <code>a == b</code> immediately after the loop with <code>a != b</code> is over; on the other hand, when the loop with <code>a &lt; b</code> is over, all you know is that <code>a &gt;= b</code>, which is not as good as knowing the exact equality.</p>\n"}, {"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 2, "creation_date": 1473868378, "post_id": 39494777, "comment_id": 66307003, "body": "@Nawaz lol you deleted your post like 1s before I was about to upvote it..."}, {"owner": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "edited": false, "score": 0, "creation_date": 1473870676, "post_id": 39494777, "comment_id": 66308378, "body": "For your proposed newest hotness. How about <code>auto i</code>? What type would <code>i</code> be if auto was used?"}, {"owner": {"reputation": 11262, "user_id": 3580294, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GODPL.jpg?s=128&g=1", "display_name": "awksp", "link": "https://stackoverflow.com/users/3580294/awksp"}, "edited": false, "score": 0, "creation_date": 1473871681, "post_id": 39494777, "comment_id": 66308950, "body": "1 -- Right, I know they compile down to the same thing for primitives, but I was wondering whether there was an advantage for any other types, or whether the compiler can still figure things out because of the context."}, {"owner": {"reputation": 11262, "user_id": 3580294, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GODPL.jpg?s=128&g=1", "display_name": "awksp", "link": "https://stackoverflow.com/users/3580294/awksp"}, "edited": false, "score": 1, "creation_date": 1473871756, "post_id": 39494777, "comment_id": 66308989, "body": "And I should be ashamed of myself for missing that reasoning for 2. I finished a low-level programming class a few semesters ago..."}, {"owner": {"reputation": 11262, "user_id": 3580294, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GODPL.jpg?s=128&g=1", "display_name": "awksp", "link": "https://stackoverflow.com/users/3580294/awksp"}, "edited": false, "score": 0, "creation_date": 1473871789, "post_id": 39494777, "comment_id": 66309016, "body": "And I&#39;ve never actually seen range-for used like that. That&#39;s something I&#39;ll need to be using from here on out."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 11262, "user_id": 3580294, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GODPL.jpg?s=128&g=1", "display_name": "awksp", "link": "https://stackoverflow.com/users/3580294/awksp"}, "edited": false, "score": 4, "creation_date": 1473871815, "post_id": 39494777, "comment_id": 66309029, "body": "@awksp They&#39;re always identical, except in cases where the constructor is explicit in which case one will compile and the other won&#39;t."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1473882330, "post_id": 39494777, "comment_id": 66314479, "body": "@Barry Not quite. <code>struct Evil { explicit Evil(int); Evil(double); }; Evil e1(1) &#47;* int *&#47;, e2 = 1 &#47;* double *&#47;;</code>"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1473885294, "post_id": 39494777, "comment_id": 66315962, "body": "@T.C. Yeah this is one of those places where I do not like that direct-init and copy-init are different."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1473891256, "post_id": 39494777, "comment_id": 66318356, "body": "What&#39;s this <code>range</code> thing? A quick Google search doesn&#39;t turn it up."}, {"owner": {"reputation": 1748, "user_id": 1158692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9788d7b4332bae4016546a3a481786d9?s=128&d=identicon&r=PG", "display_name": "Grimm The Opiner", "link": "https://stackoverflow.com/users/1158692/grimm-the-opiner"}, "edited": false, "score": 0, "creation_date": 1473930452, "post_id": 39494777, "comment_id": 66330577, "body": "<code>++i</code> vs <code>i++</code> used to be a useful performance difference with something more complex - such as an stl iterator.  We performance profiled a piece of software back in the day and found it was spending 80% of its time in iterator copy constructors because of <code>i++</code>!  But maybe even that&#39;s not the case these days."}, {"owner": {"reputation": 1369, "user_id": 5771399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c801f6ed43d6b594cfe250a6bf05333?s=128&d=identicon&r=PG&f=1", "display_name": "v7d8dpo4", "link": "https://stackoverflow.com/users/5771399/v7d8dpo4"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1473943051, "post_id": 39494777, "comment_id": 66338298, "body": "@user2357112: <a href=\"https://stackoverflow.com/a/3648965/5771399\">stackoverflow.com/a/3648965/5771399</a> <a href=\"https://en.wikipedia.org/wiki/Foreach#C.2B.2B\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Foreach#C.2B.2B</a>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 1369, "user_id": 5771399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c801f6ed43d6b594cfe250a6bf05333?s=128&d=identicon&r=PG&f=1", "display_name": "v7d8dpo4", "link": "https://stackoverflow.com/users/5771399/v7d8dpo4"}, "edited": false, "score": 0, "creation_date": 1473956888, "post_id": 39494777, "comment_id": 66347834, "body": "@v7d8dpo4: Range-based for loops are a feature, sure, but <code>range(n)</code>? That&#39;s not any standard C++ feature I&#39;m aware of. It looks more like what you&#39;d see in Python."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1473957915, "post_id": 39494777, "comment_id": 66348411, "body": "@user2357112 Yes it&#39;s not in the standard library, but it&#39;s easily implementable to do the same thing you&#39;d get from python."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 74, "last_activity_date": 1473946260, "last_edit_date": 1495542859, "creation_date": 1473868250, "answer_id": 39494777, "question_id": 39494473, "link": "https://stackoverflow.com/questions/39494473/is-there-any-basis-for-this-alternative-for-loop-syntax/39494777#39494777", "title": "Is there any basis for this alternative &#39;for&#39; loop syntax?", "body": "<ol>\n<li><blockquote>\n  <p>Direct initialization using a constructor vs copy initialization</p>\n</blockquote>\n\n<p>These are exactly identical for <code>int</code>s and will generate identical code. Use whichever one you prefer to read or what your code policies are, etc.</p></li>\n<li><blockquote>\n  <p><code>!=</code> could be faster in hardware than <code>&lt;</code></p>\n</blockquote>\n\n<p>The generated code won't actually be <code>i &lt; n</code> vs <code>i != n</code>, it'll be like <code>i - n &lt; 0</code> vs <code>i - n == 0</code>. That is, you'll get a <code>jle</code> in the first case and a <code>je</code> in the second case. All the <code>jcc</code> instructions have identical performance (see <a href=\"http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html\" rel=\"nofollow noreferrer\">instruction set reference</a> and <a href=\"http://www.intel.com/content/www/us/en/architecture-and-technology/64-ia-32-architectures-optimization-manual.html\" rel=\"nofollow noreferrer\">optionization reference</a>, which just list all the <code>jcc</code> instructions together as having throughput 0.5).</p>\n\n<p>Which is better? For <code>int</code>s, probably doesn't matter performance-wise. </p>\n\n<p>Strictly safer to do <code>&lt;</code> in case you want to skip elements in the middle, since then you don't have to worry about ending up with an infinite/undefined loop. But just write the condition that makes the most sense to write with the loop that you're writing. Also take a look at <a href=\"https://stackoverflow.com/a/39494757/2069064\">dasblinkenlight's answer</a>.</p></li>\n<li><blockquote>\n  <p><code>++i</code> doesn't require the compiler to keep the old value of <code>i</code> around, which is what <code>i++</code> would do.</p>\n</blockquote>\n\n<p>Yeah that's nonsense. If your compiler can't tell that you don't need the old value and just rewrite the <code>i++</code> to <code>++i</code>, then get a new compiler. Those definitely will compile to the same code with identical performance.</p>\n\n<p>That said, it's a good guideline to just use the right thing. You want to increment <code>i</code>, so that's <code>++i</code>. Only use post-increment when you need to use post-increment. Full stop.</p></li>\n</ol>\n\n<hr />\n\n<p>That said, the real \"new hotness\" would definitely be:</p>\n\n<pre><code>for (int i : range(n)) { ... }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7393, "user_id": 1690777, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/18ef5bab4c70735313d86c7240e4abed?s=128&d=identicon&r=PG", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1690777/sergey"}, "edited": false, "score": 0, "creation_date": 1473868494, "post_id": 39494830, "comment_id": 66307082, "body": "What about <code>int i{0}</code> in the first section of your answer? Will it be different for non-primitive iterator type?"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 7393, "user_id": 1690777, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/18ef5bab4c70735313d86c7240e4abed?s=128&d=identicon&r=PG", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1690777/sergey"}, "edited": false, "score": 0, "creation_date": 1473868709, "post_id": 39494830, "comment_id": 66307201, "body": "@Sergey Yes and no, I don&#39;t think so. They all both call the constructor (except for <code>{}</code>, which would perform aggregate initializing)."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1473899050, "post_id": 39494830, "comment_id": 66320403, "body": "What about  different compilers?"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1473912434, "post_id": 39494830, "comment_id": 66323185, "body": "@M.M I used gcc, but the result will likely be the same for clang and msvc."}], "tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": false, "score": 13, "last_activity_date": 1473868383, "creation_date": 1473868383, "answer_id": 39494830, "question_id": 39494473, "link": "https://stackoverflow.com/questions/39494473/is-there-any-basis-for-this-alternative-for-loop-syntax/39494830#39494830", "title": "Is there any basis for this alternative &#39;for&#39; loop syntax?", "body": "<p>I personally don't like the second one, I would use:</p>\n\n<pre><code>for (int i = 0; i &lt; n; ++i); //A combination of the two :)\n</code></pre>\n\n<hr>\n\n<h2><code>int i = 0</code> vs <code>int i(0)</code></h2>\n\n<p>No difference whatsoever, they even compile to the same assembly instructions (no optimizations):</p>\n\n<pre><code>int main()\n{\n    int i = 0; //int i(0);\n}\n</code></pre>\n\n<p><code>int i = 0</code> version:</p>\n\n<pre><code>main:\n    pushq   %rbp\n    movq    %rsp, %rbp\n    movl    $0, -4(%rbp)\n    movl    $0, %eax\n    popq    %rbp\n    ret\n</code></pre>\n\n<p><code>int i(0)</code> version:</p>\n\n<pre><code>main:\n    pushq   %rbp\n    movq    %rsp, %rbp\n    movl    $0, -4(%rbp)\n    movl    $0, %eax\n    popq    %rbp\n    ret\n</code></pre>\n\n<hr>\n\n<h2><code>i &lt; n</code> vs <code>i != n</code></h2>\n\n<p>You are right that the <code>!=</code> might introduce some interesting bugs:</p>\n\n<pre><code>for (int i = 0; i != 3; ++i)\n{\n    if (i == 2)\n        i += 2; //Oops, infinite loop\n    //...\n}\n</code></pre>\n\n<p>The <code>!=</code> comparison is mostly used for iterators, which don't define a <code>&lt;</code> (or <code>&gt;</code>) operator. Maybe that's what the author meant?</p>\n\n<p>But here, the second version is clearly better, as it more clearly states intent than the other one (and introduces less bugs).</p>\n\n<hr>\n\n<h2><code>i++</code> vs <code>++i</code></h2>\n\n<p>For built-in types (and other trivial types), such as <code>int</code>, there is no difference, as the compiler will optimize the temporary return values out. Here, again, some iterators are expensive, and so the creation and destruction might be a performance hit.</p>\n\n<p>But that <em>really</em> doesn't matter in this case, as even without optimizations they emit the same assembly output!</p>\n\n<pre><code>int main()\n{\n    int i = 0;\n    i++; //++i;\n}\n</code></pre>\n\n<p><code>i++</code> version:</p>\n\n<pre><code>main:\n    pushq   %rbp\n    movq    %rsp, %rbp\n    movl    $0, -4(%rbp)\n    addl    $1, -4(%rbp)\n    movl    $0, %eax\n    popq    %rbp\n    ret\n</code></pre>\n\n<p><code>++i</code> version:</p>\n\n<pre><code>main:\n    pushq   %rbp\n    movq    %rsp, %rbp\n    movl    $0, -4(%rbp)\n    addl    $1, -4(%rbp)\n    movl    $0, %eax\n    popq    %rbp\n    ret\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28847, "user_id": 43848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6ogn.png?s=128&g=1", "display_name": "artem", "link": "https://stackoverflow.com/users/43848/artem"}, "edited": false, "score": 2, "creation_date": 1473888590, "post_id": 39498360, "comment_id": 66317410, "body": "+1 for <code>i{0}</code> - this is the real new hotness: all initialization everywhere has the same look now, and is visibly different from assignment."}, {"owner": {"reputation": 263, "user_id": 3721426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6659b6debfea6770cfebc47d51412499?s=128&d=identicon&r=PG&f=1", "display_name": "user3721426", "link": "https://stackoverflow.com/users/3721426/user3721426"}, "reply_to_user": {"reputation": 28847, "user_id": 43848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6ogn.png?s=128&g=1", "display_name": "artem", "link": "https://stackoverflow.com/users/43848/artem"}, "edited": false, "score": 0, "creation_date": 1473928200, "post_id": 39498360, "comment_id": 66329310, "body": "The curly initialisation is not just new hotness. It is better because you avoid narrowing conversions to take place."}], "tags": [], "owner": {"reputation": 263, "user_id": 3721426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6659b6debfea6770cfebc47d51412499?s=128&d=identicon&r=PG&f=1", "display_name": "user3721426", "link": "https://stackoverflow.com/users/3721426/user3721426"}, "is_accepted": false, "score": 7, "last_activity_date": 1473881811, "creation_date": 1473881811, "answer_id": 39498360, "question_id": 39494473, "link": "https://stackoverflow.com/questions/39494473/is-there-any-basis-for-this-alternative-for-loop-syntax/39498360#39498360", "title": "Is there any basis for this alternative &#39;for&#39; loop syntax?", "body": "<p>The two forms are in no way related to performance. What matters is how you write code in general. Follow similar patterns and focus on expressiveness and conciseness. So for the initialisation, prefer int i(0) (or better: i{0}) as this underlines that this is an initialisation, not an assignment. For the comparison, the difference between != and &lt; is that you put lower requirements on your type. For integers there is no difference, but in general iterators might not support less than, but should always support equality. Finally, prefix increment expresses your intent better because you do not use the result.</p>\n"}, {"comments": [{"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 3, "creation_date": 1473931700, "post_id": 39501488, "comment_id": 66331425, "body": "With that logic, why would it not be more consistent and more readable to always do <code>i += 1</code>?"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 1, "creation_date": 1473940576, "post_id": 39501488, "comment_id": 66336795, "body": "@CodyGray Only because it is traditional to use the increment operators.  If we were starting from scratch, we <i>would</i> find it more consistent and readable to write <code>i += 1</code> or <code>i -= 1</code>."}, {"owner": {"reputation": 263, "user_id": 3721426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6659b6debfea6770cfebc47d51412499?s=128&d=identicon&r=PG&f=1", "display_name": "user3721426", "link": "https://stackoverflow.com/users/3721426/user3721426"}, "edited": false, "score": 0, "creation_date": 1474190671, "post_id": 39501488, "comment_id": 66423131, "body": "There is a huge difference between I += 1 and ++I. For += 1 you need random access iterators, whereas you for ++ only need forward iterators. I know you are talking integer operations here, but the general rule of thumb should be to not use more than the minimal set of requirements needed for your algorithm."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 263, "user_id": 3721426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6659b6debfea6770cfebc47d51412499?s=128&d=identicon&r=PG&f=1", "display_name": "user3721426", "link": "https://stackoverflow.com/users/3721426/user3721426"}, "edited": false, "score": 0, "creation_date": 1474287918, "post_id": 39501488, "comment_id": 66455878, "body": "@user3721426 If it had been customary to write <code>for (i = 0; i &lt; N; i += 1)</code> then forward iterators would have been required to support <code>operator +=</code> with argument 1."}, {"owner": {"reputation": 263, "user_id": 3721426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6659b6debfea6770cfebc47d51412499?s=128&d=identicon&r=PG&f=1", "display_name": "user3721426", "link": "https://stackoverflow.com/users/3721426/user3721426"}, "edited": false, "score": 0, "creation_date": 1474298026, "post_id": 39501488, "comment_id": 66462849, "body": "How would you implement += 1 and not e.g. += 2? This is not possible in C++, I believe."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 263, "user_id": 3721426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6659b6debfea6770cfebc47d51412499?s=128&d=identicon&r=PG&f=1", "display_name": "user3721426", "link": "https://stackoverflow.com/users/3721426/user3721426"}, "edited": false, "score": 0, "creation_date": 1474300474, "post_id": 39501488, "comment_id": 66464346, "body": "@user3721426 I&#39;m pretty sure you can (ab)use templates somehow to make operator+=(N) refuse to compile unless N==1 (provably at compile time - that would be a feature, not a bug, in this case)."}], "tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": false, "score": 0, "last_activity_date": 1473949161, "last_edit_date": 1473949161, "creation_date": 1473898945, "answer_id": 39501488, "question_id": 39494473, "link": "https://stackoverflow.com/questions/39494473/is-there-any-basis-for-this-alternative-for-loop-syntax/39501488#39501488", "title": "Is there any basis for this alternative &#39;for&#39; loop syntax?", "body": "<p>It is <em>stylistically</em> better to use postfix increment/decrement in C-style <code>for</code> loops whenever this is possible,</p>\n\n<pre><code>for (i = 0; i &lt; n; i++)\n</code></pre>\n\n<p>rather than</p>\n\n<pre><code>for (i = 0; i &lt; n; ++i)\n</code></pre>\n\n<p>With a postfix operator, the loop variable <code>i</code> appears on the left-hand side of all three expressions, which makes the code easier to read.  Also, if you need to step by any value other than 1, you have to write it with the <code>i</code> on the left ...</p>\n\n<pre><code>for (i = 0; i &lt; n; i += 2)\n</code></pre>\n\n<p>so for consistency's sake it should also be done that way when you are using the <code>++</code> shorthand for <code>+= 1</code>.  (As pointed out in the comments, we might find it easier to read <code>+= 1</code> than <code>++</code> if we didn't have 45 years of convention teaching us <code>++</code>.)</p>\n\n<p>With fundamental types like <code>int</code>, prefix/postfix increment will make no performance difference; as other answers have demonstrated, the compiler will generate exactly the same code either way.  With iterators, the optimizer has to do more work to get it right, but I don't think there's any excuse for a C++11-era compiler that fails to handle postfix operator++ as efficiently as prefix operator++ when they are used solely for their side effects.</p>\n\n<p>(Of course, if you're stuck with an iterator that only supports prefix <code>++</code>, then you write it that way.)</p>\n"}, {"comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1473901311, "post_id": 39501562, "comment_id": 66320856, "body": "If an iterator implements postfix operator++, it needs to work correctly when used solely for its side effects."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 3, "last_activity_date": 1473899519, "creation_date": 1473899519, "answer_id": 39501562, "question_id": 39494473, "link": "https://stackoverflow.com/questions/39494473/is-there-any-basis-for-this-alternative-for-loop-syntax/39501562#39501562", "title": "Is there any basis for this alternative &#39;for&#39; loop syntax?", "body": "<p>In this code it makes no difference. But I guess what the writer is aiming for is to use the same style coding style for all of the <code>for</code> loops (except range-based ones, presumably).</p>\n\n<p>For example if we had some other class as the loop counter type</p>\n\n<pre><code>for ( Bla b = 0; b &lt; n; b++ )\n</code></pre>\n\n<p>then there are problems:</p>\n\n<ul>\n<li><code>Bla b = 0;</code> may fail to compile if <code>Bla</code> does not have an accessible copy/move constructor</li>\n<li><code>b &lt; n</code> may fail to compile if <code>Bla</code> does not admit definiig a weak ordering, or define <code>operator&lt;</code>.</li>\n<li><code>b++</code> may fail to compile or have unintended side-effects, since post-increment typically returns by value</li>\n</ul>\n\n<p>Using the writer's suggested pattern, the requirements on a loop iterator are lessened.</p>\n\n<hr>\n\n<p>Note that this discussion can go on forever. We could say <code>int i{};</code> is better because some types might not admit <code>0</code> as initializer.  Then we could say, well what if <code>n</code> was not an <code>int</code>? It should really be <code>decltype(n) i{}</code>. Or in fact we should use a range-based loop which fixes all the above problems. And so on.</p>\n\n<p>So at the end of the day it is still personal preference.</p>\n"}, {"tags": [], "owner": {"reputation": 6814, "user_id": 5227053, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/30254853024c1381c7e51ca09b9341e7?s=128&d=identicon&r=PG&f=1", "display_name": "AnoE", "link": "https://stackoverflow.com/users/5227053/anoe"}, "is_accepted": false, "score": 3, "last_activity_date": 1473938062, "creation_date": 1473938062, "answer_id": 39509686, "question_id": 39494473, "link": "https://stackoverflow.com/questions/39494473/is-there-any-basis-for-this-alternative-for-loop-syntax/39509686#39509686", "title": "Is there any basis for this alternative &#39;for&#39; loop syntax?", "body": "<blockquote>\n  <p>i != n</p>\n</blockquote>\n\n<p>Frankly, slide 8 lost me right there, and you are correct with the suspicion that something might not be quite right.</p>\n\n<p>Aside from the high likelyhood that a modern compiler will have those kinds of loop optimized as thoroughly as it is theoretically possible for current CPUs, encouraging a programmer to write less robust code to \"help the optimizer\" for <em>whatever</em> reason is just very oldfashioned and has no place <em>at all</em> in the modern world, IMO. The real cost of software is the human time these days, not the CPU time, for 99.99...% of all projects.</p>\n\n<p>On a meta-level, truisms have no place in coding guidelines. A slide establishing a coding convention without giving objective and well-thought-out reasons for it is useless. Note that I would be OK with a reason like \"we do it this way because we want to pick <em>one</em> style instead of a plethora\", I don't need a technical reason - just <em>any</em> reason. I can then decide whether I accept the reasoning behind the coding guideline or not (and thus accept the guideline itself).</p>\n"}], "owner": {"reputation": 11262, "user_id": 3580294, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GODPL.jpg?s=128&g=1", "display_name": "awksp", "link": "https://stackoverflow.com/users/3580294/awksp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4112, "favorite_count": 1, "accepted_answer_id": 39494777, "answer_count": 7, "score": 45, "last_activity_date": 1473949161, "creation_date": 1473867311, "last_edit_date": 1592644375, "question_id": 39494473, "link": "https://stackoverflow.com/questions/39494473/is-there-any-basis-for-this-alternative-for-loop-syntax", "title": "Is there any basis for this alternative &#39;for&#39; loop syntax?", "body": "<p>I came across <a href=\"https://www.fefe.de/c++/c%2B%2B-talk.pdf\" rel=\"noreferrer\">a set of slides</a> for a <strike>rant</strike> talk on C++. There were some interesting tidbits here and there, but slide 8 stood out to me. Its contents were, approximately:</p>\n<blockquote>\n<h2>Ever-changing styles</h2>\n<h3>Old and busted:</h3>\n<pre><code>for (int i = 0; i &lt; n; i++)\n</code></pre>\n<h3>New hotness:</h3>\n<pre><code>for (int i(0); i != n; ++i)\n</code></pre>\n</blockquote>\n<p>I'd never seen a <code>for</code> loop using the second form before, so the claim that it was the &quot;New hotness&quot; interested me. I can see some rationale for it:</p>\n<ol>\n<li>Direct initialization using a constructor vs copy initialization</li>\n<li><code>!=</code> could be faster in hardware than <code>&lt;</code></li>\n<li><code>++i</code> doesn't require the compiler to keep the old value of <code>i</code> around, which is what <code>i++</code> would do.</li>\n</ol>\n<p>I'd imagine that this is premature optimization, though, as modern optimizing compilers would compile the two down to the same instructions; if anything, the latter is worse because it isn't a &quot;normal&quot; <code>for</code> loop. Using <code>!=</code> instead of <code>&lt;</code> is also suspicious to me, because it makes the loop semantically different than the original version, and can lead to some rare, but interesting, bugs.</p>\n<p>Was there any point where the &quot;New hotness&quot; version of the <code>for</code> loop was popular? Is there any reason to use that version these days (2016+), e.g. unusual loop variable types?</p>\n"}, {"tags": ["c++", "arrays", "parallel-processing"], "comments": [{"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 2, "creation_date": 1473868989, "post_id": 39494433, "comment_id": 66307401, "body": "The quick and dirty way is just to do <code>memset(my_index_counts, 0, sizeof(my_index_counts));</code>. It isn&#39;t pretty, it might not be platform independant (there is definitely an issue doing memset over floating point numbers on certain platforms, not sure about ints tbh) but it&#39;s quick and widely used (so other people looking at the code should know what you are doing)."}], "answers": [{"tags": [], "owner": {"reputation": 944, "user_id": 3260013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xm2VE.jpg?s=128&g=1", "display_name": "Trifon", "link": "https://stackoverflow.com/users/3260013/trifon"}, "is_accepted": true, "score": 0, "last_activity_date": 1473869630, "creation_date": 1473869630, "answer_id": 39495197, "question_id": 39494433, "link": "https://stackoverflow.com/questions/39494433/c-parallelization-fast-way-to-reinitialize-array/39495197#39495197", "title": "C++ Parallelization: Fast way to &quot;reinitialize&quot; array", "body": "<p>For array initialization you may use <code>memset</code>, it is suitable for continuous memory blocks. Your code should be something like this: </p>\n\n<pre><code>memset(&amp;my_index_counts[x][y][z], 0, max_count*sizeof(int));\n</code></pre>\n\n<p>where <code>x,y,z</code> are indices to all but the last dimension</p>\n"}], "owner": {"reputation": 21361, "user_id": 3834415, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pdydZ.png?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/3834415/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 0, "accepted_answer_id": 39495197, "answer_count": 1, "score": 3, "last_activity_date": 1473869630, "creation_date": 1473867189, "question_id": 39494433, "link": "https://stackoverflow.com/questions/39494433/c-parallelization-fast-way-to-reinitialize-array", "title": "C++ Parallelization: Fast way to &quot;reinitialize&quot; array", "body": "<p>I am doing a parallel for loop in OpenMP. </p>\n\n<p>Here is my problem: I have a 4D array, where the 4th dimension's depth is a maximum value--I might not use all of the elements of the 4th dimension. In this array, I store indices of another array (I calculate the indices in a parallel loop). </p>\n\n<p>So, </p>\n\n<pre><code>int my_index_array[dim_x][dim_y][dim_z][max_count];\n</code></pre>\n\n<p>At the same time, in the parallel loop, I am recording the number of elements stored in each 4th dimension vector (i.e., <code>my_index_array[0][0][0][:]</code>) in another integer array: </p>\n\n<pre><code>int my_index_counts[dim_x][dim_y][dim_z] = {(int) 0}\n</code></pre>\n\n<p>Such that I can create parallel for loops later using the values from my_index_counts. </p>\n\n<hr>\n\n<p>So here is my problem: </p>\n\n<p>I need an optimal, super fast way to \"re-initialize\" the index counts when I come back around to the top of the outer loop.  Ideally, I would not loop through the index counts array and reset the values.  But, in C++, I can't reinitialize the array.  I found \"memcpy,\" and have the space to create another \"zeroed\" array to copy from, but is that the optimal way to do this?  </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1473868553, "post_id": 39494383, "comment_id": 66307119, "body": "boost has its own version of STATIC_ASSERT <a href=\"http://www.boost.org/doc/libs/1_61_0/doc/html/boost_staticassert.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_61_0/doc/html/boost_staticassert.html</a>"}, {"owner": {"reputation": 18098, "user_id": 3744681, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/XvLrx.jpg?s=128&g=1", "display_name": "Jahid", "link": "https://stackoverflow.com/users/3744681/jahid"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1473872223, "post_id": 39494383, "comment_id": 66309235, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 : That will probably solve my issue somehow but I found an <code>enable_if</code> implementation <a href=\"http://en.cppreference.com/w/cpp/types/enable_if\" rel=\"nofollow noreferrer\">here</a>. Usage: <code>template&lt;class T, typename = typename enable_if&lt;SIZE == sizeof( T ) * 8, T&gt;::type&gt; struct name ...</code> (I was just about to post it as an answer:D)"}], "answers": [{"comments": [{"owner": {"reputation": 3343, "user_id": 2718864, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3qOW3.png?s=128&g=1", "display_name": "nasser-sh", "link": "https://stackoverflow.com/users/2718864/nasser-sh"}, "edited": false, "score": 0, "creation_date": 1473867994, "post_id": 39494442, "comment_id": 66306801, "body": "I would point out that this answer is C++11 and greater"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 3343, "user_id": 2718864, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3qOW3.png?s=128&g=1", "display_name": "nasser-sh", "link": "https://stackoverflow.com/users/2718864/nasser-sh"}, "edited": false, "score": 0, "creation_date": 1473868562, "post_id": 39494442, "comment_id": 66307123, "body": "@nasser-sh Isn&#39;t it what the OP asked for? He said - <i>Can this be done in C++11?</i>."}, {"owner": {"reputation": 3343, "user_id": 2718864, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3qOW3.png?s=128&g=1", "display_name": "nasser-sh", "link": "https://stackoverflow.com/users/2718864/nasser-sh"}, "edited": false, "score": 0, "creation_date": 1473868651, "post_id": 39494442, "comment_id": 66307165, "body": "Ah! If you look at the edit history of the post, OP stated &quot;must be in &lt; C++11&quot;. Missed the update."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 3343, "user_id": 2718864, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3qOW3.png?s=128&g=1", "display_name": "nasser-sh", "link": "https://stackoverflow.com/users/2718864/nasser-sh"}, "edited": false, "score": 0, "creation_date": 1473868708, "post_id": 39494442, "comment_id": 66307200, "body": "@nasser-sh Wow. Missed the original sentence. Good go!! :-D"}, {"owner": {"reputation": 18098, "user_id": 3744681, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/XvLrx.jpg?s=128&g=1", "display_name": "Jahid", "link": "https://stackoverflow.com/users/3744681/jahid"}, "edited": false, "score": 0, "creation_date": 1473868805, "post_id": 39494442, "comment_id": 66307276, "body": "It&#39;s <code>&lt;C++11</code>, don&#39;t know how and in what sense someone can edit it to <code>C++11</code>"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 18098, "user_id": 3744681, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/XvLrx.jpg?s=128&g=1", "display_name": "Jahid", "link": "https://stackoverflow.com/users/3744681/jahid"}, "edited": false, "score": 0, "creation_date": 1473868912, "post_id": 39494442, "comment_id": 66307345, "body": "@Jahid You are confusing me. Ok, this answer applies from C++11 and later."}, {"owner": {"reputation": 18098, "user_id": 3744681, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/XvLrx.jpg?s=128&g=1", "display_name": "Jahid", "link": "https://stackoverflow.com/users/3744681/jahid"}, "edited": false, "score": 0, "creation_date": 1473869757, "post_id": 39494442, "comment_id": 66307856, "body": "Well, someone mistakenly edited and removed the <code>&lt;</code>. But your answer is a good one. I may use it (with a preprocessor guard) if I can&#39;t find any way of doing it with <code>&lt;C++11</code>"}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 2, "last_activity_date": 1473868984, "last_edit_date": 1473868984, "creation_date": 1473867221, "answer_id": 39494442, "question_id": 39494383, "link": "https://stackoverflow.com/questions/39494383/force-a-compile-time-error-checking-a-templated-type-with-a-constant/39494442#39494442", "title": "Force a compile time error checking a templated type with a constant", "body": "<p>You can assert it:</p>\n\n<pre><code>static_assert(SIZE != sizeof(T)*8, \"!\");\n</code></pre>\n\n<p>Your code becomes:</p>\n\n<pre><code>#include&lt;cstddef&gt;\n\n#define SIZE 8\n\ntemplate&lt;class T&gt;\nstruct name {\n    static_assert(SIZE != sizeof(T)*8, \"!\");\n    T a;\n};\n\nint main(void) {\n    name&lt;uint16_t&gt; a;\n    return 0;\n}\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>This answer applies for C++11 and later.<br>\nThe requirement was that when I wrote it, so I'd leave it for further readers anyway.</p>\n"}], "owner": {"reputation": 18098, "user_id": 3744681, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/XvLrx.jpg?s=128&g=1", "display_name": "Jahid", "link": "https://stackoverflow.com/users/3744681/jahid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "closed_date": 1473869391, "answer_count": 1, "score": 1, "last_activity_date": 1473868984, "creation_date": 1473867074, "last_edit_date": 1473868711, "question_id": 39494383, "link": "https://stackoverflow.com/questions/39494383/force-a-compile-time-error-checking-a-templated-type-with-a-constant", "closed_reason": "Duplicate", "title": "Force a compile time error checking a templated type with a constant", "body": "<p>This is what I am trying to do:</p>\n\n<pre><code>#define SIZE 8\n\ntemplate&lt;class T&gt;\nstruct name {\n    T a;\n    name() {\n        #if SIZE != sizeof(T)*8\n        #error Size mismatch\n        #endif\n    }\n};\n\nint main(void)\n{\n    name&lt;uint16_t&gt; a; //Size mismatch\n\n   return 0;\n}\n</code></pre>\n\n<p>I want it to give a compile time error when the size doesn't match when using the templated struct i.e <code>name&lt;uint16_t&gt;</code> should give a compile time error because it doesn't comply with the requirement <code>(sizeof(T)*8 == 8)</code>.</p>\n\n<p>Can this be done in <code>&lt;C++11</code>?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1473865656, "post_id": 39493814, "comment_id": 66305207, "body": "Yes, that&#39;s template specialization."}, {"owner": {"reputation": 873, "user_id": 2612857, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ed2037e275bde13a34572d6ca3ee3374?s=128&d=identicon&r=PG", "display_name": "thundium", "link": "https://stackoverflow.com/users/2612857/thundium"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1473865800, "post_id": 39493814, "comment_id": 66305304, "body": "@GillBates Thx, my usual understanding is that template specialization would define the type to bool/int and so on. Now it is defined to be a reference. I will look more into the knowledge."}], "answers": [{"comments": [{"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1473866538, "post_id": 39494017, "comment_id": 66305833, "body": "What does it mean that the specialization shares nothing with the primary template? It&#39;s a specialization, it wouldn&#39;t compile if the primary template didn&#39;t exist. Isn&#39;t it enough?"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1473866581, "post_id": 39494017, "comment_id": 66305869, "body": "@Skypjack In that you can&#39;t use <code>self1()</code> in that specialization."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1473866678, "post_id": 39494017, "comment_id": 66305931, "body": "I see your point. Well, actually <i>share nothing</i> is not the best way to say that. My two cents. :-)"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 1, "creation_date": 1473866770, "post_id": 39494017, "comment_id": 66305994, "body": "@skypjack Updated answer, <i>anything</i> was a bit explicit indeed."}], "tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": true, "score": 1, "last_activity_date": 1473866750, "last_edit_date": 1473866750, "creation_date": 1473865942, "answer_id": 39494017, "question_id": 39493814, "link": "https://stackoverflow.com/questions/39493814/reference-used-for-template-parameter/39494017#39494017", "title": "reference used for template parameter", "body": "<blockquote>\n  <p>I can see that the 2nd one is based on the 1st one. (By removing the\n  1st one, it is not compilable). But</p>\n  \n  <p>b.self1() is not defined. So somehow the 2nd have redefined the struct\n  to a new one?</p>\n</blockquote>\n\n<p><code>function</code> is a struct template, it's not a struct by itself. At the moment of instantiating one like you did : <code>function&lt;int&gt; a;</code> the compiler generates a <code>struct function_int</code> that contains <code>int</code> for all <code>T's</code> (or <code>a's</code> in this case).</p>\n\n<pre><code>template&lt;typename a&gt; struct function&lt;a&amp;&gt; \n</code></pre>\n\n<p>This is a specialisation of the struct template that's used for when <code>a</code> is a reference type. This specialisation can't use any members/methods of the \"original\" struct template. </p>\n"}], "owner": {"reputation": 873, "user_id": 2612857, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ed2037e275bde13a34572d6ca3ee3374?s=128&d=identicon&r=PG", "display_name": "thundium", "link": "https://stackoverflow.com/users/2612857/thundium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 39494017, "answer_count": 1, "score": 1, "last_activity_date": 1473866750, "creation_date": 1473865363, "question_id": 39493814, "link": "https://stackoverflow.com/questions/39493814/reference-used-for-template-parameter", "title": "reference used for template parameter", "body": "<p>I got following code running</p>\n\n<pre><code>using namespace std;\n#include &lt;iostream&gt;\n\ntemplate&lt;typename a&gt; struct function \n{ \n    void self1(){ cout &lt;&lt; \"hello world 1111\" &lt;&lt; endl; }\n};\n\ntemplate&lt;typename a&gt; struct function&lt;a&amp;&gt; \n{ \n    void self2() { cout &lt;&lt; \"hello world 2222\" &lt;&lt; endl; }\n};\n\n\nint main()\n{\n    function&lt;int&gt; a;\n    a.self1();\n    function&lt;int&amp;&gt; b;\n    b.self2();\n    return 0;\n}\n</code></pre>\n\n<p>The result is:</p>\n\n<pre><code>hellow world 1111\nheloow world 2222\n</code></pre>\n\n<p>Would like to ask the relation ship between the first \"struct function\" and the second \"struct function\"</p>\n\n<p>Is the second one classfied as \"template specialization\" for the first one? (seems not)</p>\n\n<p>I can see that the 2nd one is based on the 1st one. (By removing the 1st one, it is not compilable). But </p>\n\n<pre><code>b.self1() is not defined.\n</code></pre>\n\n<p>So somehow the 2nd have redefined the struct to a new one?</p>\n"}, {"tags": ["c++", "opencv", "video", "frame"], "comments": [{"owner": {"reputation": 374, "user_id": 3853072, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iSHkc.jpg?s=128&g=1", "display_name": "Arjun", "link": "https://stackoverflow.com/users/3853072/arjun"}, "edited": false, "score": 0, "creation_date": 1473911004, "post_id": 39493784, "comment_id": 66322861, "body": "It&#39;s because you didn&#39;t give any condition to come out of the loop.  Use this condition in the for loop after image is read.  &quot;if( frame.empty()) break&quot;;"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 6351883, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh4.googleusercontent.com/-37HEmBkI4wc/AAAAAAAAAAI/AAAAAAAAA_I/hy4MzgyYdlk/photo.jpg?sz=128", "display_name": "Marco Cuccagna", "link": "https://stackoverflow.com/users/6351883/marco-cuccagna"}, "edited": false, "score": 0, "creation_date": 1473866512, "post_id": 39494114, "comment_id": 66305815, "body": "I used the default video of ubuntu, the one in the folder example. Thanks to point me where is the problem."}], "tags": [], "owner": {"reputation": 2952, "user_id": 3200088, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/WlD9X.jpg?s=128&g=1", "display_name": "Gio", "link": "https://stackoverflow.com/users/3200088/gio"}, "is_accepted": false, "score": 0, "last_activity_date": 1473866563, "last_edit_date": 1473866563, "creation_date": 1473866301, "answer_id": 39494114, "question_id": 39493784, "link": "https://stackoverflow.com/questions/39493784/extract-frame-from-a-video-for-detection-with-opencv/39494114#39494114", "title": "extract frame from a video for detection with opencv", "body": "<p>Your video contains various stream indexes, e.g. 3 audios, and 1 video stream would result in 4 stream indexes. I recommend that you check the amount of streams your video contains and print ogg->nstreams to check if this corresponds. Looking at the source code in oggdec.c at line 898</p>\n\n<pre><code>static int ogg_read_seek(AVFormatContext *s, int stream_index,\n                         int64_t timestamp, int flags)\n{\n    struct ogg *ogg       = s-&gt;priv_data;\n    struct ogg_stream *os = ogg-&gt;streams + stream_index;\n    int ret;\n\n    av_assert0(stream_index &lt; ogg-&gt;nstreams); /* Line 898 */\n</code></pre>\n\n<p>You're clearly going out of bounds here.</p>\n"}, {"tags": [], "owner": {"reputation": 85, "user_id": 6351883, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh4.googleusercontent.com/-37HEmBkI4wc/AAAAAAAAAAI/AAAAAAAAA_I/hy4MzgyYdlk/photo.jpg?sz=128", "display_name": "Marco Cuccagna", "link": "https://stackoverflow.com/users/6351883/marco-cuccagna"}, "is_accepted": false, "score": 0, "last_activity_date": 1473869191, "creation_date": 1473869191, "answer_id": 39495055, "question_id": 39493784, "link": "https://stackoverflow.com/questions/39493784/extract-frame-from-a-video-for-detection-with-opencv/39495055#39495055", "title": "extract frame from a video for detection with opencv", "body": "<p>Apparently I manage to solve it, I modified the function that extract the frame.</p>\n\n<pre><code>void estraiframe(string path, string vidName, string output){\nstring vidPath(path + vidName);\nVideoCapture cap(vidPath);\nif( !cap.isOpened()){\n        cout &lt;&lt; \"Cannot open the video file\" &lt;&lt; endl;\n        return;\n}\n\ndouble rate = cap.get(CV_CAP_PROP_FPS);\nint counter = 0;\nMat frame;\nint i=1;\n\nwhile(1)\n{\n     cap.read ( frame);\n     if( frame.empty()) break;\n     counter++;\n\n     if (counter == rate*5*i){\n     i++;\n     string nomeframe = to_string(counter) + \"-frame_from\"+vidName+\".jpg\";\n     string percorso (output+nomeframe);\n     imwrite(percorso, frame);\n     }\n\n     char key = waitKey(10);\n     if ( key == 27) break;\n}\n}\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 6351883, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh4.googleusercontent.com/-37HEmBkI4wc/AAAAAAAAAAI/AAAAAAAAA_I/hy4MzgyYdlk/photo.jpg?sz=128", "display_name": "Marco Cuccagna", "link": "https://stackoverflow.com/users/6351883/marco-cuccagna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 710, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1473869191, "creation_date": 1473865288, "question_id": 39493784, "link": "https://stackoverflow.com/questions/39493784/extract-frame-from-a-video-for-detection-with-opencv", "title": "extract frame from a video for detection with opencv", "body": "<p>i'm developing a program to detect object in video or image.\nIt works with the image, but now i want to use it with video. I use a specific folder to pick the image so i wanted to save frames from video in that folder before the detection.\nThe variable video and salvataggio are alredy setted. \nIn the following code i navigate throw the folder to analize the video:</p>\n\n<pre><code>DIR *dir;\ndir = opendir(video.c_str());\nstring vidName;\nstruct dirent *ent;\nif (dir != NULL) {\n        while ((ent = readdir (dir)) != NULL) {\n            vidName= ent-&gt;d_name;\n            if(vidName.compare(\".\")!= 0 &amp;&amp; vidName.compare(\"..\")!= 0)\n            {\n            //string vidPath(neg + vidName);\n                estraiframe(video, vidName, salvataggio);\n            }\n        }\n        closedir (dir);\n\n}\nelse {\n    cout&lt;&lt;\"directory \"&lt;&lt; video &lt;&lt; \" not present\"&lt;&lt;endl;\n}\n}\n</code></pre>\n\n<p>The function estraiframe save the frame in the output folder.</p>\n\n<pre><code>void estraiframe(string path, string vidName, string output){\n\nstring vidPath(path + vidName);\nVideoCapture cap(vidPath);\nif( !cap.isOpened()){\n        cout &lt;&lt; \"Cannot open the video file\" &lt;&lt; endl;\n        return;\n}\n\ndouble count = cap.get(CV_CAP_PROP_FRAME_COUNT);\ndouble rate = cap.get(CV_CAP_PROP_FPS);\nint counter = 0;\nfor (int i=1; i&lt; count; i+=rate*5)\n{\n\n\ncap.set(CV_CAP_PROP_POS_FRAMES,i);\n\nMat frame;\ncap.read(frame);\n\ncounter++;\nstring nomeframe = to_string(counter) + \"-frame_from\"+vidName+\".jpg\";\nstring percorso (output+nomeframe);\ncout &lt;&lt; percorso;\nimwrite(percorso,frame);\n}\n}\n</code></pre>\n\n<p>Apparently it works but after the last frame it gave me the following error:</p>\n\n<blockquote>\n  <p>Assertion stream_index &lt; ogg->nstreams failed at libavformat/oggdec.c:898\n  I locked for it but i didin't find where is the error</p>\n</blockquote>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "reply_to_user": {"reputation": 1970, "user_id": 4195825, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d5a6be8edab9c465df099f8c74b3f576?s=128&d=identicon&r=PG&f=1", "display_name": "px06", "link": "https://stackoverflow.com/users/4195825/px06"}, "edited": false, "score": 0, "creation_date": 1473865909, "post_id": 39494526, "comment_id": 66306464, "body": "sorry for that i just found out the right place for my question"}, {"owner": {"reputation": 4427, "user_id": 193887, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/54a2fc2a8cb81440a442aa45fc0f41a9?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/193887/jeremy"}, "edited": false, "score": 0, "creation_date": 1473868076, "post_id": 39494526, "comment_id": 66306847, "body": "Shouldn&#39;t <code>if(y&gt;0)</code> be <code>if(y&gt;=0)</code>, and <code>y++</code> be <code>y--</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 4376, "user_id": 1351465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17845023034a9b3ad336f2883ed79149?s=128&d=identicon&r=PG", "display_name": "JuanR", "link": "https://stackoverflow.com/users/1351465/juanr"}, "is_accepted": true, "score": 2, "last_activity_date": 1473868052, "creation_date": 1473868052, "answer_id": 39494722, "question_id": 39494526, "link": "https://stackoverflow.com/questions/39494526/why-i-am-getting-this-number/39494722#39494722", "title": "why i am getting this number?", "body": "<p>I think the problem is right here:</p>\n\n<pre><code>if(y&gt;0)\n{\n    while(y&gt;=0)\n        c[z++]=b[y++];  // &lt;-- y++ instead of y--\n\n}\n</code></pre>\n\n<p>You should be decreasing <code>y</code>, not increasing it.</p>\n"}, {"tags": [], "owner": {"reputation": 1132, "user_id": 2893307, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ccc3e790d23d317ee1366394cd29851c?s=128&d=identicon&r=PG&f=1", "display_name": "nnesterov", "link": "https://stackoverflow.com/users/2893307/nnesterov"}, "is_accepted": false, "score": 0, "last_activity_date": 1473868078, "creation_date": 1473868078, "answer_id": 39494729, "question_id": 39494526, "link": "https://stackoverflow.com/questions/39494526/why-i-am-getting-this-number/39494729#39494729", "title": "why i am getting this number?", "body": "<p>You see this strange number because you printing non-initialized item of array.\nYou don't process last element from second array here. Also you use increment for <code>y</code> but you should use decrement.\nInstead of</p>\n\n<pre><code>if(y&gt;0)\n{\n    while(y&gt;=0)\n        c[z++]=b[y++];\n\n}\n</code></pre>\n\n<p>You should use </p>\n\n<pre><code>if(y&gt;=0)\n    {\n        while(y&gt;=0)\n            c[z++]=b[y--];\n\n    }\n</code></pre>\n"}], "migrated_from": {"other_site": {"aliases": ["http://computerscience.stackexchange.com"], "markdown_extensions": ["MathJax", "Prettify"], "launch_date": 1439905020, "open_beta_date": 1332272936, "closed_beta_date": 1331060400, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/cs/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/cs/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/cs/Img/apple-touch-icon.png", "audience": "students, researchers and practitioners of computer science", "site_url": "https://cs.stackexchange.com", "api_site_parameter": "cs", "logo_url": "https://cdn.sstatic.net/Sites/cs/Img/logo.png", "name": "Computer Science", "site_type": "main_site"}, "on_date": 1473867474, "question_id": 63461}, "owner": {"reputation": 141, "user_id": 4994221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rPwd5SoOrWk/AAAAAAAAAAI/AAAAAAAAAG0/FDQhvV0laog/photo.jpg?sz=128", "display_name": "Pushkar Soni", "link": "https://stackoverflow.com/users/4994221/pushkar-soni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 39494722, "answer_count": 2, "score": -3, "last_activity_date": 1473874788, "creation_date": 1473864937, "last_edit_date": 1473874788, "question_id": 39494526, "link": "https://stackoverflow.com/questions/39494526/why-i-am-getting-this-number", "title": "why i am getting this number?", "body": "<p>i am trying to merge two arrays into one. but could not figure out why the number comes out instead of the desired number and what does this number signify.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;conio.h&gt;\n\nusing namespace std;\n\nvoid MergeArray(int[], int, int[], int,int[]);\n\nvoid main()\n{\n    int A[50], m, B[50], n, C[100],a, mn;\n\n    cout&lt;&lt;\"Enter the size of First Array::\\n\";\n    cin&gt;&gt;m;\n    cout&lt;&lt;\"Enter the First Array(ASCENDING ORDER)\\n\";\n    for(int i=0; i&lt;m ; i++)\n        cin&gt;&gt;A[i];\n\n    cout&lt;&lt;\"Enter the size of Second Array::\\n\";\n    cin&gt;&gt;n;\n    cout&lt;&lt;\"Enter the Second Array(DESCENDING ORDER) ::\\n\";\n    for(int j=0; j&lt;n; j++)\n        cin&gt;&gt;B[j];\n\n    mn=m+n;\n    MergeArray(A,m,B,n,C);\n\n    cout&lt;&lt;\"The Array After merging is ::\\n\";\n    for(int k=0; k &lt; mn; k++ )\n        cout&lt;&lt;C[k]&lt;&lt;\"\\n\";\n    cout&lt;&lt;\"Press any key\";\n    cin&gt;&gt;a;\n\n}\n\n\nvoid MergeArray(int a[],int M , int b[], int N, int c[] )\n{\n    int x,y,z;\n    z=0;\n\n    for(x=0, y=N-1; x&lt;M &amp;&amp; y&gt;=0;)\n    {\n        if(a[x]&lt;=b[y])\n            c[z++]=a[x++];\n\n        else if(b[y]&lt;a[x])\n            c[z++]=b[y--];\n    }\n\n    if(x&lt;M)\n    {\n        while(x&lt;M)\n            c[z++]=a[x++];\n    }\n\n    if(y&gt;0)\n    {\n        while(y&gt;=0)\n            c[z++]=b[y++];\n\n    }\n\n    getch();\n\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ztLEi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ztLEi.png\" alt=\"Image of the output screen\"></a>}</p>\n"}, {"tags": ["c++", "fmt"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1473865614, "post_id": 39493542, "comment_id": 66305181, "body": "Without delving to deep into the code it dosn&#39;t seem to be possible. Either use string streams or <a href=\"http://fmtlib.net/3.0.0/#write-api\" rel=\"nofollow noreferrer\">the fmt libraries write API</a>? Or if the data you want to print is the same, then perhaps use something as described in <a href=\"https://github.com/fmtlib/fmt/issues/181\" rel=\"nofollow noreferrer\">this issue regarding <code>std::initializer_list</code></a>, it should be easy to replace with e.g. a <code>std::vector</code>. Using the solution presented in the issue, you could use e.g. a vector of <code>std::any</code> (or <code>boost::any</code>). if you don&#39;t have a uniform type for all items you want to print."}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 2233420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daf168c72bcc98cb34d483104d321384?s=128&d=identicon&r=PG", "display_name": "user2233420", "link": "https://stackoverflow.com/users/2233420/user2233420"}, "is_accepted": true, "score": 2, "last_activity_date": 1475171247, "creation_date": 1475171247, "answer_id": 39776852, "question_id": 39493542, "link": "https://stackoverflow.com/questions/39493542/building-a-dynamic-list-of-named-arguments-for-fmt/39776852#39776852", "title": "building a dynamic list of named arguments for {fmt}", "body": "<p>I found a solution using fmtlib internals. The following code formats a string from a string-string dictionary using fmtlib. Special handling had to be included to handle arg-counts >= 16, as fmtlib uses an optimization for smaller argument lists.</p>\n\n<pre><code>// helper only:\ninline void set_type(fmt::ULongLong&amp; result, uint32_t index, fmt::internal::Arg::Type t)\n{\n    unsigned shift = index * 4;\n    uint64_t mask = 0xf;\n    result |= static_cast&lt;uint64_t&gt;(t) &lt;&lt; shift;\n}\n\n// input: \n//     pattern = fmt::format string\n//     vars = dictionary of string/string arguments\n// output:\n//     formatted string\nstd::string dformat(const std::string&amp; pattern, const std::unordered_map&lt;std::string, std::string&gt;&amp; vars)\n{\n    // this is a vector of \"named arguments\" - straightforward enough.\n    std::vector&lt;fmt::internal::NamedArg&lt;char&gt;&gt; av;\n\n    // fmtlib uses an optimization that stores the types of the first 16 arguments as \n    // bitmask-encoded 64-bit integer. \n    fmt::ULongLong types = 0;\n\n    // we need to build the named-arguments vector. \n    // we cannot resize it to the required size (even though we know it - we have the\n    // dictionary), because NamedArg has no default constructor.\n    uint32_t index = 0;\n    for (const auto&amp; item : vars)\n    {\n        av.emplace_back(fmt::internal::NamedArg&lt;char&gt;(item.first, item.second));\n\n        // we need to pack the first 16 arguments - see above\n        if (index &lt; fmt::ArgList::MAX_PACKED_ARGS)\n        {\n            set_type(types, index, fmt::internal::Arg::NAMED_ARG);\n        }\n        ++index;\n    }\n\n    // and this is a bit tricky: depending on the number of arguments we use two mutually\n    // incompatible vectors to create an arglist. It has everything to do with the speed\n    // (and memory) optimization above, even though the code looks nearly identical.\n    if (index &gt;= fmt::ArgList::MAX_PACKED_ARGS)\n    {\n        std::vector&lt;fmt::internal::Arg&gt; avdata;\n\n        // note the additional terminating Arg::NONE\n        avdata.resize(vars.size() + 1);\n        index = 0;\n        for (const auto&amp; item : av)\n        {\n            avdata[index].type = fmt::internal::Arg::NAMED_ARG;\n            avdata[index].pointer = &amp;av[index];\n            ++index;\n        }\n        return fmt::format(pattern, fmt::ArgList(types, &amp;avdata[0]));\n    }\n    else\n    {\n        std::vector&lt;fmt::internal::Value&gt; avdata;\n\n        // no need for terminating Arg::NONE, because ARG_NONE is the last encoded type \n        avdata.resize(vars.size());\n        index = 0;\n        for (const auto&amp; item : av)\n        {\n            avdata[index].pointer = &amp;av[index];\n            ++index;\n        }\n        return fmt::format(pattern, fmt::ArgList(types, &amp;avdata[0]));\n    }\n}\n</code></pre>\n\n<p>Example usage:</p>\n\n<pre><code>std::unordered_map&lt;std::string, std::string&gt; vars;\nvars[\"FIRSTNAME\"] = \"Foo\";\nvars[\"LASTNAME\"] = \"Bar\";\n\nstd::string result = dformat(\"Hello {FIRSTNAME} {LASTNAME}, how are you doing\", vars);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 307036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0eHso.jpg?s=128&g=1", "display_name": "Siddu", "link": "https://stackoverflow.com/users/307036/siddu"}, "is_accepted": false, "score": 0, "last_activity_date": 1618417489, "creation_date": 1618417489, "answer_id": 67095539, "question_id": 39493542, "link": "https://stackoverflow.com/questions/39493542/building-a-dynamic-list-of-named-arguments-for-fmt/67095539#67095539", "title": "building a dynamic list of named arguments for {fmt}", "body": "<p>{fmt} has inbuilt support for dynamic argument list starting with 7.0.0.</p>\n<p>Named dynamic args:</p>\n<pre><code>fmt::dynamic_format_arg_store&lt;fmt::format_context&gt; store;\nstore.push_back(fmt::arg(&quot;const&quot;, &quot;pi&quot;));\nstore.push_back(fmt::arg(&quot;val&quot;, 3.14f));\n\nstd::string result = fmt::vformat(&quot;{const} = {val}&quot;, store);\n// result is &quot;pi = 3.14&quot;\n</code></pre>\n<p>Unnamed dynamic args:</p>\n<pre><code>fmt::dynamic_format_arg_store&lt;fmt::format_context&gt; store;\nstore.push_back(&quot;answer to everything&quot;);\nstore.push_back(42);\n\nstd::string result = fmt::vformat(&quot;{} is {}&quot;, store);\n// result is &quot;answer to everything is 42&quot;\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 2233420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daf168c72bcc98cb34d483104d321384?s=128&d=identicon&r=PG", "display_name": "user2233420", "link": "https://stackoverflow.com/users/2233420/user2233420"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1277, "favorite_count": 1, "accepted_answer_id": 39776852, "answer_count": 2, "score": 3, "last_activity_date": 1618417489, "creation_date": 1473864679, "last_edit_date": 1557508461, "question_id": 39493542, "link": "https://stackoverflow.com/questions/39493542/building-a-dynamic-list-of-named-arguments-for-fmt", "title": "building a dynamic list of named arguments for {fmt}", "body": "<p>I am using the <a href=\"https://github.com/fmtlib/fmt\" rel=\"nofollow noreferrer\">{fmt} library</a> and need to build a dynamic list of arguments. Basically, I have a format string like per the documentation page</p>\n\n<pre><code>fmt::print(\"Hello, {name}\", fmt::arg(\"name\", \"test\"), ...);\n</code></pre>\n\n<p>but the arguments list (including how many arguments there are) is known only at runtime. I've looked at <code>fmt::ArgList</code> which takes a list of <code>fmt::Arg</code> instances. But the named arguments are an internal class <code>fmt::internal::NamedArg</code> which I cannot see how to pass to the list. </p>\n\n<p>Any ideas? </p>\n"}, {"tags": ["c++", "qt", "treeview", "qml", "qtquickcontrols"], "comments": [{"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1473863957, "post_id": 39493218, "comment_id": 66303996, "body": "You need to provide valid indexes of which data changed."}, {"owner": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "reply_to_user": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1473865455, "post_id": 39493218, "comment_id": 66305074, "body": "@Hayt: are you sure about this? Because I read that if we pass invalid indices, then it will update the entire model."}, {"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1473923264, "post_id": 39493218, "comment_id": 66326824, "body": "the documentation says nothing about this: <a href=\"http://doc.qt.io/qt-5/qabstractitemmodel.html#dataChanged\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qabstractitemmodel.html#dataChanged</a>"}, {"owner": {"reputation": 3700, "user_id": 2573127, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J2n1Z.png?s=128&g=1", "display_name": "IceFire", "link": "https://stackoverflow.com/users/2573127/icefire"}, "edited": false, "score": 0, "creation_date": 1545401293, "post_id": 39493218, "comment_id": 94618748, "body": "This question is still highly relevant and there is no answer yet!"}], "answers": [{"comments": [{"owner": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "edited": false, "score": 0, "creation_date": 1473865484, "post_id": 39493464, "comment_id": 66305097, "body": "I updated my question to test your suggestion. Please have a look."}, {"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "reply_to_user": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "edited": false, "score": 1, "creation_date": 1473923442, "post_id": 39493464, "comment_id": 66326902, "body": "What does your <code>parent()</code> function return? the documentation says these indexes need to have the same parent. You should have one <code>dummy</code> element which acts as a parent for all other indexes."}, {"owner": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "edited": false, "score": 0, "creation_date": 1473940234, "post_id": 39493464, "comment_id": 66336606, "body": "I have a dummy root. But as I am modifying some of its children, then I return an invalid QModelIndex (because their parent is the dummy root). This is the solution explained here: <a href=\"http://doc.qt.io/qt-5/qtwidgets-itemviews-simpletreemodel-example.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qtwidgets-itemviews-simpletreemodel-example.h&zwnj;&#8203;tml</a>"}, {"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "reply_to_user": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "edited": false, "score": 0, "creation_date": 1473940547, "post_id": 39493464, "comment_id": 66336778, "body": "when do you return an invalid QModelIndex? Can you add your index() and your parent() function to your question? I would guess you somewhere have something wrong with your indexes."}, {"owner": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "edited": false, "score": 0, "creation_date": 1473941003, "post_id": 39493464, "comment_id": 66337053, "body": "I added the index and parent method to my question. As display and reset are working fine, I never re-read them actually and considered they were fine."}, {"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "reply_to_user": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "edited": false, "score": 0, "creation_date": 1473941226, "post_id": 39493464, "comment_id": 66337172, "body": "you seem to create a different parent item per row. so when you emit dataChanged across rows the rows each have a different parent. When you have one &quot;dummy parent item&quot; you should also just return the same index for it."}, {"owner": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "edited": false, "score": 0, "creation_date": 1473944993, "post_id": 39493464, "comment_id": 66339649, "body": "&quot;you seem to create a different parent item per row.&quot;. Can you give me more details please? Where do you see that? I am not sure I understood actually. Thanks."}, {"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "reply_to_user": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "edited": false, "score": 0, "creation_date": 1473945098, "post_id": 39493464, "comment_id": 66339730, "body": "<code>auto parentIndex = createIndex(pItem-&gt;GetRow(), 0, pItem.get());</code> this creates a different parent index for each row. try <code>createIndex(0,0,...)</code> or so"}, {"owner": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "edited": false, "score": 0, "creation_date": 1473947296, "post_id": 39493464, "comment_id": 66341352, "body": "Each row (with the same parent), will return the same pItem. So pItem-&gt;GetRow() is the same (GetRow() returns the row of current element in its parent)."}, {"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "reply_to_user": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "edited": false, "score": 0, "creation_date": 1473947376, "post_id": 39493464, "comment_id": 66341415, "body": "Yes so each row has a different parent. and <code>dataChanged</code> is undefined if you pass indexes with different parent in them."}, {"owner": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "edited": false, "score": 0, "creation_date": 1473948401, "post_id": 39493464, "comment_id": 66342212, "body": "If I do emit dataChanged(topLeftIndex, topLeftIndex);, it is not working as mentioned in my question. So even with the same index, it is not working. Also, other than updating when I internally set data, everything is working correctly. Also, I checked in a specific example, and even if I do createIndex(0, 0, pItem.get()); it is not working."}, {"owner": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "edited": false, "score": 0, "creation_date": 1474046247, "post_id": 39493464, "comment_id": 66387872, "body": "I ended implemented this using a C++ QTreeView and it works fine. I have no idea why it is not working in QML though."}, {"owner": {"reputation": 519, "user_id": 1042836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3104fa073ce83063d6b58a73d9d1b91b?s=128&d=identicon&r=PG", "display_name": "Piroxiljin", "link": "https://stackoverflow.com/users/1042836/piroxiljin"}, "edited": false, "score": 0, "creation_date": 1495532826, "post_id": 39493464, "comment_id": 75281042, "body": "@Hayt, I think you should update your answer with advice about the <code>parent()</code> function."}, {"owner": {"reputation": 3700, "user_id": 2573127, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J2n1Z.png?s=128&g=1", "display_name": "IceFire", "link": "https://stackoverflow.com/users/2573127/icefire"}, "reply_to_user": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "edited": false, "score": 0, "creation_date": 1546166770, "post_id": 39493464, "comment_id": 94791475, "body": "@Korchkidu I am not sure if child items are updated when you update your parent item (i.e. root item in your case). However, have you tried updating one specific item (that is not root)? This works for me"}], "tags": [], "owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "is_accepted": false, "score": 1, "last_activity_date": 1473864425, "creation_date": 1473864425, "answer_id": 39493464, "question_id": 39493218, "link": "https://stackoverflow.com/questions/39493218/qml-treeview-items-are-not-updated-when-emitting-datachanged/39493464#39493464", "title": "QML TreeView items are not updated when emitting dataChanged", "body": "<p>While <code>beginResetModel()</code> and <code>endResetModel()</code> will invalidate the whole view, <code>dataChanged()</code> only invalidates a range you give it.</p>\n\n<p>If you know what value changed you can use it like </p>\n\n<pre><code> emit dataChanged(createIndex(row,col),createIndex(row,col));\n</code></pre>\n\n<p>or when multiple lines/cells change the second parameter is the \"last\" index which changed.</p>\n"}], "owner": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1044, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1474045454, "creation_date": 1473863802, "last_edit_date": 1474045454, "question_id": 39493218, "link": "https://stackoverflow.com/questions/39493218/qml-treeview-items-are-not-updated-when-emitting-datachanged", "title": "QML TreeView items are not updated when emitting dataChanged", "body": "<p>I have a QML <code>TreeView</code> like this:</p>\n\n<pre><code>  TreeView\n  {\n    id: treeview\n    model: myModel\n    anchors.fill: parent\n    alternatingRowColors: false\n    headerVisible: false\n\n    TableViewColumn\n    {\n      title: \"Name\"\n      role: \"name\"\n      delegate: Text\n      {\n      text: styleData.value\n      }\n    }\n</code></pre>\n\n<p>However, when I emit dataChanged from a custom method in C++, nothing is updated:</p>\n\n<pre><code>void MyModel::NameChanged()\n{\n  // beginResetModel(); &lt;=== Works\n  // endResetModel();\n\n  // emit dataChanged(QModelIndex(), QModelIndex()); // Does not work\n\n  auto topLeftIndex = createIndex(0, 0, m_root.get());\n  auto bottomRightIndex = createIndex(rowCount(), columnCount(), m_root.get());\n  (( emit dataChanged(topLeftIndex, bottomRightIndex);  // Does not work.\n  emit dataChanged(topLeftIndex, topLeftIndex);  // Does not work.\n}\n</code></pre>\n\n<p>In QML, <code>text</code> is bound to <code>styleData.value</code> and I am not setting text anywhere else. Also, dataChanged is not redefined elsewhere. So I am sure I am really emitting <code>QAbstractItemModel::dataChanged(...)</code>.</p>\n\n<p>Any idea what I am doing wrong?</p>\n\n<p>My index method:</p>\n\n<pre><code>QModelIndex index(int row, int column, const QModelIndex &amp;parentIdx) const\n{\n  if (hasIndex(row, column, parentIdx) == false)\n  {\n    return QModelIndex();\n  }\n\n  auto parentItem = m_root.get();\n  if (parentIdx.isValid() == true)\n  {\n    parentItem = static_cast&lt;ModelItem *&gt;(parentIdx.internalPointer());\n  }\n\n  auto childItem = parentItem-&gt;GetChild(row);\n  auto childName = childItem-&gt;GetName().toStdString();\n  if (childItem)\n  {\n    auto index = createIndex(row, column, childItem.get());\n    return index;\n  }\n  else\n  {\n    return QModelIndex();\n  }\n}\n</code></pre>\n\n<p>My parent method:</p>\n\n<pre><code>QModelIndex parent(const QModelIndex &amp;childIndex) const\n{\n  if (childIndex.isValid() == false)\n  {\n    return QModelIndex();\n  }\n\n  auto childItem = static_cast&lt;ModelItem*&gt;(childIndex.internalPointer());\n  auto parentItem = childItem-&gt;GetParent();\n\n  if (parentItem.expired() == true)\n  {\n    return QModelIndex();\n  }\n\n  auto pItem = parentItem.lock();\n  if (pItem == nullptr)\n  {\n    return QModelIndex();\n  }\n\n  auto parentIndex = createIndex(pItem-&gt;GetRow(), 0, pItem.get());\n  return parentIndex;\n}\n</code></pre>\n\n<p><strong>UPDATE: if I use my model in C++ using a QTreeView, then it works.</strong></p>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 31426, "user_id": 4763489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89773f016f1f4cc2c4e790a6c3f7b004?s=128&d=identicon&r=PG&f=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/4763489/florian"}, "edited": false, "score": 1, "creation_date": 1473865060, "post_id": 39493002, "comment_id": 66304769, "body": "You can try a <a href=\"https://cmake.org/cmake/help/latest/variable/CMAKE_USER_MAKE_RULES_OVERRIDE.html\" rel=\"nofollow noreferrer\"><code>CMAKE_USER_MAKE_RULES_OVERRIDE</code></a> script. There you can modify <code>CMAKE_CXX_IMPLICIT_LINK_LIBRARIES</code> before it&#39;s cached in <code>CMakeCXXCompiler.cmake</code>. See <a href=\"http://stackoverflow.com/questions/28732209/change-default-value-of-cmake-cxx-flags-debug-and-friends-in-cmake\">here</a> for an example."}, {"owner": {"reputation": 1953, "user_id": 110452, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/93368f94c86dd0d2511e079ce0de45b2?s=128&d=identicon&r=PG", "display_name": "Mike Summers", "link": "https://stackoverflow.com/users/110452/mike-summers"}, "reply_to_user": {"reputation": 31426, "user_id": 4763489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89773f016f1f4cc2c4e790a6c3f7b004?s=128&d=identicon&r=PG&f=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/4763489/florian"}, "edited": false, "score": 0, "creation_date": 1473870334, "post_id": 39493002, "comment_id": 66308164, "body": "This is pilot error. As I allude to below the CMake files are large and there was a hidden/masked error in the STLPort definition that caused problems far away from the definition. <code>set(CMAKE_EXE_LINKER_FLAGS &quot;${CMAKE_EXE_LINKER_FLAGS} -nostdlib&quot;)</code> is all that&#39;s required"}], "answers": [{"comments": [{"owner": {"reputation": 1953, "user_id": 110452, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/93368f94c86dd0d2511e079ce0de45b2?s=128&d=identicon&r=PG", "display_name": "Mike Summers", "link": "https://stackoverflow.com/users/110452/mike-summers"}, "edited": false, "score": 0, "creation_date": 1473867000, "post_id": 39493705, "comment_id": 66306139, "body": "Yes, the build scripts are hundreds of lines long spread across multiple sub directories and are pre-processed with a bash script... a bit too much for SO :-)"}, {"owner": {"reputation": 1062, "user_id": 3722896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1844152530/picture?type=large", "display_name": "woockashek", "link": "https://stackoverflow.com/users/3722896/woockashek"}, "reply_to_user": {"reputation": 1953, "user_id": 110452, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/93368f94c86dd0d2511e079ce0de45b2?s=128&d=identicon&r=PG", "display_name": "Mike Summers", "link": "https://stackoverflow.com/users/110452/mike-summers"}, "edited": false, "score": 0, "creation_date": 1473869699, "post_id": 39493705, "comment_id": 66307823, "body": "I suspect that those variables are just overwritten by some other script. Try grep on sources for CMAKE_EXE_LINKER_FLAGS and CMAKE_CXX_IMPLICIT_LINK_LIBRARIES"}], "tags": [], "owner": {"reputation": 1062, "user_id": 3722896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1844152530/picture?type=large", "display_name": "woockashek", "link": "https://stackoverflow.com/users/3722896/woockashek"}, "is_accepted": false, "score": 1, "last_activity_date": 1473865104, "creation_date": 1473865104, "answer_id": 39493705, "question_id": 39493002, "link": "https://stackoverflow.com/questions/39493002/remove-libstdc-from-cmake-build/39493705#39493705", "title": "Remove libstdc++ from CMake build", "body": "<p>I believe there is more logic in your build scripts.</p>\n\n<p>The following CMakeLists.txt:</p>\n\n<pre><code>cmake_minimum_required (VERSION 2.6)\nproject (Test)\nadd_executable(Test test.cpp)\n\nset(CMAKE_EXE_LINKER_FLAGS \"${CMAKE_EXE_LINKER_FLAGS} -nostdlib\")\nlist(REMOVE_ITEM CMAKE_CXX_IMPLICIT_LINK_LIBRARIES stdc++)\n</code></pre>\n\n<p>for test.cpp:</p>\n\n<pre><code>int main()\n{\n        return 0;\n}\n</code></pre>\n\n<p>produces expected linker warning:</p>\n\n<pre><code>/usr/bin/ld: warning: cannot find entry symbol _start; defaulting to 0000000000400144\n</code></pre>\n\n<p>What means that my binary was not linked against stdlib.</p>\n\n<p>I believe you should provide more details about your build procedure.</p>\n"}], "owner": {"reputation": 1953, "user_id": 110452, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/93368f94c86dd0d2511e079ce0de45b2?s=128&d=identicon&r=PG", "display_name": "Mike Summers", "link": "https://stackoverflow.com/users/110452/mike-summers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1172, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1473865104, "creation_date": 1473863311, "question_id": 39493002, "link": "https://stackoverflow.com/questions/39493002/remove-libstdc-from-cmake-build", "title": "Remove libstdc++ from CMake build", "body": "<p>I'm trying to build some 3rd party code and link it against our own private version of STLPort, their code uses CMake and I'm new to it.</p>\n\n<p>I'm able to get the compile to work against our STLPort includes but I cannot stop the linker from linking in libstdc++. I've tried:</p>\n\n<pre><code>set(CMAKE_EXE_LINKER_FLAGS \"${CMAKE_EXE_LINKER_FLAGS} -nostdlib\")\nlist(REMOVE_ITEM CMAKE_CXX_IMPLICIT_LINK_LIBRARIES stdc++)\n</code></pre>\n\n<p>but no luck.</p>\n\n<p>Amazon Linux AMI (based on RHEL 5.x), CMake 2.8.12.</p>\n\n<p>Suggestions/pointers would be greatly appreciated.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 239269, "user_id": 464709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ab3363d257d780bd4c1f0c844b020a2?s=128&d=identicon&r=PG", "display_name": "Fr&#233;d&#233;ric Hamidi", "link": "https://stackoverflow.com/users/464709/fr%c3%a9d%c3%a9ric-hamidi"}, "edited": false, "score": 0, "creation_date": 1473863383, "post_id": 39492927, "comment_id": 66303567, "body": "C++ templates can be specialized on integer constants, which achieves roughly the same thing as your Haskell example. <a href=\"http://stackoverflow.com/q/3082113/464709\">Here is a factorial function written with specialized templates in C++</a>."}, {"owner": {"reputation": 14193, "user_id": 183203, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf9ec57f64280ffe34ddd221d5c5151f?s=128&d=identicon&r=PG", "display_name": "antlersoft", "link": "https://stackoverflow.com/users/183203/antlersoft"}, "edited": false, "score": 0, "creation_date": 1473863525, "post_id": 39492927, "comment_id": 66303683, "body": "Yes, it can be done with template metaprogramming but only when the parameter values are known at compile time.  C++ can&#39;t dispatch on parameter values at runtime, other than by virtual method dispatch."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1473864718, "post_id": 39492927, "comment_id": 66304532, "body": "That&#39;s not two overloaded functions, it&#39;s the function  <code>factorial x = case x of 0 =&gt; 1; n =&gt; n * factorial (n - 1)</code> with syntactic sugar sprinkled on top."}], "answers": [{"tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": false, "score": 2, "last_activity_date": 1473863520, "creation_date": 1473863520, "answer_id": 39493095, "question_id": 39492927, "link": "https://stackoverflow.com/questions/39492927/is-there-any-way-to-perform-function-signature-matching-based-on-parameter-value/39493095#39493095", "title": "Is there any way to perform function signature matching based on parameter values?", "body": "<p>There is such a thing, and it's called <em>template specialization</em>. Basically, you can define a template for a given type apart from the general template definition. You can read about it <a href=\"http://en.cppreference.com/w/cpp/language/template_specialization\" rel=\"nofollow\">here</a></p>\n\n<pre><code>//Main template definition\ntemplate&lt;typename T&gt;\nvoid foo(T) { std::cout &lt;&lt; \"Some T\\n\"; }\n\n//Specialization for int\ntemplate&lt;&gt;\nvoid foo(int) { std::cout &lt;&lt; \"Called with an int!\\n\"; }\n</code></pre>\n\n<p>The factorial template \"function\" also uses template specialization, but due to the nature of templates, it can only calculate compile time values (<em>template metaprogramming</em>):</p>\n\n<pre><code>template&lt;std::size_t N&gt;\nstruct factorial {\n    static constexpr unsigned long long value = N * factorial&lt;N - 1&gt;::value;\n};\n\ntemplate&lt;&gt;\nstruct factorial&lt;0&gt; {\n    static constexpr unsigned long long value = 1;\n}\n\nauto foo = factorial&lt;10&gt;::value;\n</code></pre>\n\n<p>As far as I know, there is no such thing at run time (except for switch/if branches) in a given function.</p>\n"}, {"tags": [], "owner": {"reputation": 8064, "user_id": 5910563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/snpEp.jpg?s=128&g=1", "display_name": "Horia Coman", "link": "https://stackoverflow.com/users/5910563/horia-coman"}, "is_accepted": false, "score": 0, "last_activity_date": 1473863652, "creation_date": 1473863652, "answer_id": 39493147, "question_id": 39492927, "link": "https://stackoverflow.com/questions/39492927/is-there-any-way-to-perform-function-signature-matching-based-on-parameter-value/39493147#39493147", "title": "Is there any way to perform function signature matching based on parameter values?", "body": "<p>Short answer: no C++ does not have Haskell-style pattern matching. Also worth mentioning that in the Haskell example, you have a single function, rather than two of them, but you just have a nicer syntax for checking the values of inputs. In overloading, you actually have two or more functions with the same name, but different number or types of arguments.</p>\n\n<p>Longer/truthier answer: something akin to what you are suggesting is possible via <a href=\"https://en.wikipedia.org/wiki/Template_metaprogramming\" rel=\"nofollow\">template-metaprogramming</a>. Since C++ templates allow values as template arguments, and not only types, you can actually build such a function. The template-language is apparently Turing complete, so you can actually compute everything that's computable with it.\nOf course, it looks terrible and leads to massive compilation times and difficulty in understanding the code post-initial-write.</p>\n"}, {"tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": 0, "last_activity_date": 1473864031, "last_edit_date": 1473864031, "creation_date": 1473863698, "answer_id": 39493163, "question_id": 39492927, "link": "https://stackoverflow.com/questions/39492927/is-there-any-way-to-perform-function-signature-matching-based-on-parameter-value/39493163#39493163", "title": "Is there any way to perform function signature matching based on parameter values?", "body": "<p>Runtime branching is done using <code>if</code> or the ternary operator\n<code>&lt;condition&gt; ? &lt;if-true&gt; : &lt;if-false&gt;</code>.</p>\n\n<p>Overloads of a function is done at <em>compile time</em>, so it means that if you want to choose an overload of a function based on values, you must know that value strictly at compile time.</p>\n\n<p>Here's an example of compile time branching using sfinae:</p>\n\n<pre><code>template&lt;int n, std::enable_if_t&lt;(n &gt; 1), short&gt; = 0&gt;\nconstexpr int factorial(std::integral_constant&lt;int, n&gt;) {\n    return n * factorial(std::integral_constant&lt;n - 1&gt;{});\n}\n\ntemplate&lt;int n, std::enable_if_t&lt;(n == 0), short&gt; = 0&gt;\nconstexpr int factorial(std::integral_constant&lt;int, n&gt;) { return 1; }\n</code></pre>\n\n<p>Here, notice the conditions used in <code>enable_if_t</code>. It will make the function invalid to call if the condition is not met, and force the compiler to try alternative functions.</p>\n\n<p>Of course, the syntax is not that great. The best would be to have a single implementation for both runtime and compile time, but for that you must using traditional branching:</p>\n\n<pre><code>constexpr factorial(int n) {\n    return n == 0 ? 1 : n * factorial(n - 1);\n} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 907, "user_id": 5344725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afe3363c7df76a6ddf2114b5b8793554?s=128&d=identicon&r=PG&f=1", "display_name": "Altainia", "link": "https://stackoverflow.com/users/5344725/altainia"}, "is_accepted": false, "score": 1, "last_activity_date": 1473863829, "creation_date": 1473863829, "answer_id": 39493224, "question_id": 39492927, "link": "https://stackoverflow.com/questions/39492927/is-there-any-way-to-perform-function-signature-matching-based-on-parameter-value/39493224#39493224", "title": "Is there any way to perform function signature matching based on parameter values?", "body": "<p>If the values are known at compile time, it can be done with templates</p>\n\n<pre><code>//recursively calls itself until N is 1\ntemplate&lt;int N&gt;\nstruct factorial&lt;N&gt;{enum{value = N * factorial&lt;N-1&gt;::value};};\n\n//at which point, this will be called (stopping the recursion)\ntemplate&lt;&gt;\nstruct factorial&lt;1&gt;{enum{value = 1};};\n</code></pre>\n\n<p>If the values are only known at runtime, the decision must be done at runtime</p>\n\n<pre><code>int factorial_recursion(int n){\n  if(n == 1)\n    return 1;\n  else\n    return n * factorial_recursion(n - 1);\n}\n//or\nint factorial_loop(int n){\n  int answer = 1;\n  for(int count = n; count &gt; 1; --count)\n    answer *= count;\n\n  return answer;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1473864505, "creation_date": 1473864505, "answer_id": 39493487, "question_id": 39492927, "link": "https://stackoverflow.com/questions/39492927/is-there-any-way-to-perform-function-signature-matching-based-on-parameter-value/39493487#39493487", "title": "Is there any way to perform function signature matching based on parameter values?", "body": "<p>I think the real answer here is that there isn't an exact equivalent. Yet. Template specialization is close, but that only works at compile time, which several limits its usability. We have branching of course, but that has limited power compared to what pattern matching can do in other functional programming languages.</p>\n\n<p>There is a proposal currently for pattern matching in C++: <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0095r1.html\" rel=\"nofollow\">P0095r1</a> which would allow the following definition of factorial, assuming concepts:</p>\n\n<pre><code>template &lt;Integral I&gt;\nI factorial(I n) {\n    return inspect(n) {\n        0 =&gt; 1\n        n =&gt; n * factorial(n-1)\n    };\n}\n</code></pre>\n\n<p>I'm not totally sure on the syntax, but then again, it's just a proposal so far, so the syntax itself could change. </p>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 6211066, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wthKg4l-dAU/AAAAAAAAAAI/AAAAAAAAAL4/sE8ZZaM78wo/photo.jpg?sz=128", "display_name": "Calcite", "link": "https://stackoverflow.com/users/6211066/calcite"}, "edited": false, "score": 0, "creation_date": 1473958844, "post_id": 39493631, "comment_id": 66348900, "body": "My thought was that the compiler would/could/might create this &quot;under-the-covers&quot;."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 121, "user_id": 6211066, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wthKg4l-dAU/AAAAAAAAAAI/AAAAAAAAAL4/sE8ZZaM78wo/photo.jpg?sz=128", "display_name": "Calcite", "link": "https://stackoverflow.com/users/6211066/calcite"}, "edited": false, "score": 0, "creation_date": 1473961007, "post_id": 39493631, "comment_id": 66350012, "body": "@JasonDoege I think c++ is all about explicitness. Having the compiler getting up to tricks behind people&#39;s backs would I think be against the ethos of the language. I know people like Haskell, but to me the syntax is extremely cryptic and (other than this trivial case) extremely difficult to reason about. I don&#39;t know maybe it&#39;s just that I&#39;m an old machine code hacker at heart :)"}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 0, "last_activity_date": 1473864925, "creation_date": 1473864925, "answer_id": 39493631, "question_id": 39492927, "link": "https://stackoverflow.com/questions/39492927/is-there-any-way-to-perform-function-signature-matching-based-on-parameter-value/39493631#39493631", "title": "Is there any way to perform function signature matching based on parameter values?", "body": "<pre><code>int factorial(int n)\n{\n    switch(n)\n    {\n        case 0: return 1;\n        default: return n * factorial(n - 1);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 6211066, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wthKg4l-dAU/AAAAAAAAAAI/AAAAAAAAAL4/sE8ZZaM78wo/photo.jpg?sz=128", "display_name": "Calcite", "link": "https://stackoverflow.com/users/6211066/calcite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 687, "favorite_count": 0, "accepted_answer_id": 39493487, "answer_count": 6, "score": 4, "last_activity_date": 1475676189, "creation_date": 1473863093, "last_edit_date": 1475676189, "question_id": 39492927, "link": "https://stackoverflow.com/questions/39492927/is-there-any-way-to-perform-function-signature-matching-based-on-parameter-value", "title": "Is there any way to perform function signature matching based on parameter values?", "body": "<p>In functional oriented languages like Haskell, one can overload function definitions an several axis of parameter signature. C++ supports number and type of arguments. Other languages support argument values and even guard clauses (code that tests the arguments for conditions.) For instance the factorial implementation in Haskell:</p>\n\n<pre><code>factorial :: (Integral a) =&gt; a -&gt; a  \nfactorial 0 = 1  \nfactorial n = n * factorial (n - 1) \n</code></pre>\n\n<p>Where the definition for factorial when the argument is 0 differs from the definition for factorial when the argument is any other integer. </p>\n\n<p>I have not found this capability in C++ and thought, at first, that it would be difficult to implement in the language. Further reflection made me think it actually would be fairly easy and a nice addition to the language, so I must be missing it.</p>\n\n<p>Is there any way to do this  either in native syntax or templates?</p>\n"}, {"tags": ["c++", "sockets", "ssl", "tcp", "poco"], "answers": [{"tags": [], "owner": {"reputation": 471, "user_id": 856355, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2d935d00fa0cb11b903d4ef5c5b55b37?s=128&d=identicon&r=PG", "display_name": "lgm42", "link": "https://stackoverflow.com/users/856355/lgm42"}, "is_accepted": true, "score": 0, "last_activity_date": 1473864477, "creation_date": 1473864477, "answer_id": 39493475, "question_id": 39492898, "link": "https://stackoverflow.com/questions/39492898/how-to-send-a-certificate-when-connecting-a-tcp-server-using-securestreamsocket/39493475#39493475", "title": "How to send a certificate when connecting a TCP server using SecureStreamSocket with poco", "body": "<p>I've found a method to make it work.</p>\n\n<p>I've add following line </p>\n\n<pre><code>securedSocket.completeHandshake();\n</code></pre>\n\n<p>before checking client certificate on server code.</p>\n\n<p>Final code :</p>\n\n<pre><code>Poco::Net::SecureStreamSocket securedSocket = (Poco::Net::SecureStreamSocket)dynamic_cast&lt;const Poco::Net::StreamSocket&amp;&gt;(socket);\n\nsecuredSocket.completeHandshake();\nif (!securedSocket.havePeerCertificate())\n{\n     .....\n     .....\n</code></pre>\n\n<p>The method <strong>securedSocket.havePeerCertificate()</strong> now succeed.</p>\n\n<p>But I'm not sure I'm making the correct workflow to validate SSL communication. Any other way ?</p>\n"}], "owner": {"reputation": 471, "user_id": 856355, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2d935d00fa0cb11b903d4ef5c5b55b37?s=128&d=identicon&r=PG", "display_name": "lgm42", "link": "https://stackoverflow.com/users/856355/lgm42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 666, "favorite_count": 0, "accepted_answer_id": 39493475, "answer_count": 1, "score": 0, "last_activity_date": 1473864477, "creation_date": 1473863019, "question_id": 39492898, "link": "https://stackoverflow.com/questions/39492898/how-to-send-a-certificate-when-connecting-a-tcp-server-using-securestreamsocket", "title": "How to send a certificate when connecting a TCP server using SecureStreamSocket with poco", "body": "<p>I would like to install a TCP over SSL connection between two computers.\nI'm using poco librairies in version 1.7.3.</p>\n\n<p>I'm succeeded in TCP communication and verification of the server certificate on client side.</p>\n\n<p>I would like to verify client certificate on server side.</p>\n\n<p>Here is my <strong>client side</strong> connection</p>\n\n<pre><code>Poco::Net::initializeSSL();\nPoco::SharedPtr&lt;Poco::Net::PrivateKeyPassphraseHandler&gt; keyHandler = new Poco::Net::KeyFileHandler(false);\nSharedPtr&lt;InvalidCertificateHandler&gt; invalidCertHandler = new Poco::Net::ConsoleCertificateHandler(true);\n\n// get parameters from configuration file\nunsigned short port = (unsigned short) config().getInt(\"tcpClient.port\", 9443);\n\nContext::Ptr pClientContext = new Context(\n                    Context::CLIENT_USE,\n                    Application::instance().config().getString(\"openSSL.client.privateKeyFile\"),\n                    Application::instance().config().getString(\"openSSL.client.certificateFile\"),\n                    Application::instance().config().getString(\"openSSL.client.caConfig\"),\n                    Context::VERIFY_RELAXED,\n                    9,\n                    true,\n                    Application::instance().config().getString(\"openSSL.client.cipherList\"));\n\npClientContext-&gt;enableSessionCache(true);\n\nSSLManager::instance().initializeClient(keyHandler, invalidCertHandler, pClientContext);\n\nPoco::Net::SocketAddress sa(\"127.0.0.1\", port);\nSecureStreamSocket ss1(sa, pClientContext);\n\napp.logger().information(\"Client connect\u00e9\");\n</code></pre>\n\n<p>Here is my <strong>server side</strong> listen connection</p>\n\n<pre><code>Poco::Net::initializeSSL();\n// get parameters from configuration file\nunsigned short port = (unsigned short) config().getInt(\"tcpServer.port\", 9443);\n\n// set-up a server socket\nSecureServerSocket svs(port);\nPoco::Net::TCPServer srv(new EchoServerConnectionFactory(), svs);\n// start the Server\nsrv.start();\nlogger().information(\"Attente de connexion client ...\");\n</code></pre>\n\n<p>And the <strong>createConnection</strong> method of my EchoServerConnectionFactory</p>\n\n<pre><code>Poco::Net::TCPServerConnection* createConnection(const Poco::Net::StreamSocket&amp; socket)\n    {\n        Application&amp; app = Application::instance();\n\n        app.logger().information(\"Tentative de connexion d'un client\");\n\n        if (!socket.secure())\n        {\n            app.logger().error(\"Client non s\u00e9curis\u00e9. Connexion refus\u00e9e\");\n            return NULL;\n        }\n\n        try\n        {\n            Poco::Net::SecureStreamSocket securedSocket = (Poco::Net::SecureStreamSocket)dynamic_cast&lt;const Poco::Net::StreamSocket&amp;&gt;(socket);\n\n            if (!securedSocket.havePeerCertificate())\n            {\n                app.logger().error(\"Le client n'a pas pr\u00e9sent\u00e9 de certificat. Connexion refus\u00e9e\");\n                return NULL;\n            }\n         ....\n         ....\n</code></pre>\n\n<p>In the <strong>createConnection</strong> method, the method <strong>securedSocket.havePeerCertificate() always returns false</strong>. I must have missed something in secureSocket initialization client side but I don't find it.</p>\n"}, {"tags": ["c++", "typetraits"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1473863261, "post_id": 39492855, "comment_id": 66303474, "body": "Maybe just a bad implementation. Looks like <a href=\"http://melpon.org/wandbox/permlink/L8ZGpMveSiBnNj7a\" rel=\"nofollow noreferrer\">it works</a> in GCC 6."}, {"owner": {"reputation": 4872, "user_id": 359653, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab50a8f17424ff237dd10adf2c748335?s=128&d=identicon&r=PG", "display_name": "\u5c0f\u592a\u90ce", "link": "https://stackoverflow.com/users/359653/%e5%b0%8f%e5%a4%aa%e9%83%8e"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1473863592, "post_id": 39492855, "comment_id": 66303733, "body": "Might be a libstdc++ bug in my version then. I wonder what version that uses"}], "answers": [{"tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": true, "score": 4, "last_activity_date": 1487342668, "creation_date": 1487342668, "answer_id": 42300706, "question_id": 39492855, "link": "https://stackoverflow.com/questions/39492855/stdstring-not-nothrow-move-assignable-or-comparable/42300706#42300706", "title": "std::string not nothrow move assignable or comparable?", "body": "<blockquote>\n  <p>Yet cppreference claims the move assignment operator and comparison operators are marked <code>noexcept</code>.</p>\n</blockquote>\n\n<p>There was a defect report about this, because C++11 said the move assignment was <code>noexcept</code> but that was impossible to satisfy in general (because it might need to reallocate if moving from a string with an incompatible allocator that doesn't propagate). See <a href=\"https://wg21.link/lwg2063\" rel=\"nofollow noreferrer\">DR 2063</a>.</p>\n\n<p>The standard has been fixed so that the exception specification depends on the properties of the allocator, and but until that new rule was implemented in GCC we did not make the operations <code>noexcept</code>. I implemented the fixed rules for GCC 6.1 (see <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=58265\" rel=\"nofollow noreferrer\">PR 58265</a>) and backported the change to the gcc-5-branch, but there hasn't been another release of GCC 5.x since then. It will be fixed in the 5.5 release, whenever that happens.</p>\n"}], "owner": {"reputation": 4872, "user_id": 359653, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab50a8f17424ff237dd10adf2c748335?s=128&d=identicon&r=PG", "display_name": "\u5c0f\u592a\u90ce", "link": "https://stackoverflow.com/users/359653/%e5%b0%8f%e5%a4%aa%e9%83%8e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 0, "accepted_answer_id": 42300706, "answer_count": 1, "score": 5, "last_activity_date": 1487342668, "creation_date": 1473862898, "last_edit_date": 1473863357, "question_id": 39492855, "link": "https://stackoverflow.com/questions/39492855/stdstring-not-nothrow-move-assignable-or-comparable", "title": "std::string not nothrow move assignable or comparable?", "body": "<p>I was playing around with <code>type_traits</code>, and I discovered this strange property of <code>std::string</code>:</p>\n\n<pre><code>$ cat a.cpp\n#include &lt;string&gt;\n#include &lt;type_traits&gt;\n\nstatic_assert(std::is_nothrow_move_assignable&lt;std::string&gt;::value, \"???\");\nstatic_assert(noexcept(std::declval&lt;std::string&gt;() == std::declval&lt;std::string&gt;()), \"???\");\n$ g++ -std=c++14 a.cpp\na.cpp:4:1: error: static assertion failed: ???\n static_assert(std::is_nothrow_move_assignable&lt;std::string&gt;::value, \"???\");\n ^\na.cpp:5:1: error: static assertion failed: ???\n static_assert(noexcept(std::declval&lt;std::string&gt;() == std::declval&lt;std::string&gt;()), \"???\");\n ^\n$ g++ --version\ng++ (Ubuntu 5.4.0-6ubuntu1~16.04.2) 5.4.0 20160609\n</code></pre>\n\n<p>Yet cppreference claims the <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/operator%3D\" rel=\"noreferrer\">move assignment operator</a> and <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/operator_cmp\" rel=\"noreferrer\">comparison operators</a> are marked <code>noexcept</code>.</p>\n\n<p>Am I doing something wrong? Is this a bug?</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 2, "creation_date": 1473862975, "post_id": 39492853, "comment_id": 66303249, "body": "<code>Vector</code> should be <code>vector</code> (All small letters) if from <code>std</code>"}, {"owner": {"reputation": 314, "user_id": 2648395, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8S4Ke.png?s=128&g=1", "display_name": "audio", "link": "https://stackoverflow.com/users/2648395/audio"}, "edited": false, "score": 3, "creation_date": 1473863012, "post_id": 39492853, "comment_id": 66303277, "body": "Could you show the declaration of param0? I am guessing it is a Vector&lt;int&gt; and therefore the assignment youre attempting is invalid."}, {"owner": {"reputation": 3270, "user_id": 3059385, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dc876278926d67b3da29594601fdc82a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Schneider", "link": "https://stackoverflow.com/users/3059385/christopher-schneider"}, "edited": false, "score": 1, "creation_date": 1473863100, "post_id": 39492853, "comment_id": 66303347, "body": "Welcome to Stack Overflow. Please post an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1473863115, "post_id": 39492853, "comment_id": 66303356, "body": "I don&#39;t think the question in the external link is important at all. We are not here to do your homework so we don&#39;t really care about what the assignment is. We are here to answer 1 specific question about a problem you are having with your implementation. What is important is presenting enough code to reproduce the error message. Right now you have not done that so your question is not answerable."}, {"owner": {"reputation": 188, "user_id": 1137273, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/be2598a860cbf719b03762274a528e67?s=128&d=identicon&r=PG", "display_name": "moeryn", "link": "https://stackoverflow.com/users/1137273/moeryn"}, "edited": false, "score": 0, "creation_date": 1473863168, "post_id": 39492853, "comment_id": 66303396, "body": "Are you compililing with -std=c++11 ?"}, {"owner": {"reputation": 188, "user_id": 1137273, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/be2598a860cbf719b03762274a528e67?s=128&d=identicon&r=PG", "display_name": "moeryn", "link": "https://stackoverflow.com/users/1137273/moeryn"}, "edited": false, "score": 0, "creation_date": 1473863197, "post_id": 39492853, "comment_id": 66303417, "body": "What happen when the vector is a const&amp;: Vector&lt;int&gt; const&amp; array?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1473865064, "post_id": 39492853, "comment_id": 66304774, "body": "Your external screenshot (usually frowned upon) does not match your error message."}, {"owner": {"reputation": 1, "user_id": 6831298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2e2ff4fd2dd033280fe4071c5f139e8?s=128&d=identicon&r=PG", "display_name": "MidwestStudent", "link": "https://stackoverflow.com/users/6831298/midweststudent"}, "edited": false, "score": 0, "creation_date": 1473865209, "post_id": 39492853, "comment_id": 66304880, "body": "Thanks for the suggestions. Right now because I don&#39;t know the implementation by the Stanford professor (e.g. param0, C++11, etc), I will take your question and ask him/her directly."}], "answers": [{"tags": [], "owner": {"reputation": 1675, "user_id": 1611317, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/367f6a8d2c0d2847a3f54711f94f5a09?s=128&d=identicon&r=PG", "display_name": "Viatorus", "link": "https://stackoverflow.com/users/1611317/viatorus"}, "is_accepted": false, "score": 3, "last_activity_date": 1473863527, "creation_date": 1473863527, "answer_id": 39493101, "question_id": 39492853, "link": "https://stackoverflow.com/questions/39492853/homework-parameters-for-c-function/39493101#39493101", "title": "Homework: Parameters for C++ function", "body": "<p>The \"main problem\" is the use of the Stanford standard library which does not define a <em>initializer list</em> constructor for the template class <a href=\"http://stanford.edu/~stepp/cppdoc/Vector-class.html\" rel=\"nofollow\">Vector</a>.</p>\n\n<p>Use maybe the <a href=\"http://www.cplusplus.com/reference/vector/vector/vector/\" rel=\"nofollow\">std::vector</a>, which has a <em>initializer list</em> constructor.</p>\n"}, {"tags": [], "owner": {"reputation": 57, "user_id": 1606281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4553aacff24a074adf07291705141f9?s=128&d=identicon&r=PG", "display_name": "SpadgeAki", "link": "https://stackoverflow.com/users/1606281/spadgeaki"}, "is_accepted": false, "score": -2, "last_activity_date": 1473863651, "last_edit_date": 1495541300, "creation_date": 1473863651, "answer_id": 39493146, "question_id": 39492853, "link": "https://stackoverflow.com/questions/39492853/homework-parameters-for-c-function/39493146#39493146", "title": "Homework: Parameters for C++ function", "body": "<p>You are probably not assigning values to the Vector correctly. This can help you a bit.\n<a href=\"https://stackoverflow.com/a/3424937/1606281\">https://stackoverflow.com/a/3424937/1606281</a></p>\n"}, {"tags": [], "owner": {"reputation": 190, "user_id": 6831325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b61f1233600286b07772beb2349bc38d?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/6831325/lucas"}, "is_accepted": false, "score": 0, "last_activity_date": 1473864104, "creation_date": 1473864104, "answer_id": 39493332, "question_id": 39492853, "link": "https://stackoverflow.com/questions/39492853/homework-parameters-for-c-function/39493332#39493332", "title": "Homework: Parameters for C++ function", "body": "<p>As this is a homework assignment, I won't do the work for you, but I'll give you some directions. I'm sure you understand; at the end of the day, you need to understand what you will end up delivering.</p>\n\n<p>What your compiler error tells you is that you cannot initialize your Stanford Vector instance in the way you tried putting the numbers in there; such a way is impossible, you will have to do it another way. So, </p>\n\n<pre><code>param0 = {28, 1, 17, 4, 41, 9, 59, 8, 31, 30, 25}; //not possible\n</code></pre>\n\n<p>as such, you will have to use other methods to get your added to the Stanford Vector. you can investigate:</p>\n\n<ul>\n<li><p>the vector functions \"add\" and \"push_back\"</p></li>\n<li><p>the vector initilization method <code>vector&lt;t&gt; name(values)</code></p></li>\n<li><p>the vector function \"insert\"</p></li>\n</ul>\n\n<p>Or, as others suggested, you can switch over to std::vector instead of the Stanford Vector. However, do make sure that is in line with your assignment requirements</p>\n"}], "owner": {"reputation": 1, "user_id": 6831298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2e2ff4fd2dd033280fe4071c5f139e8?s=128&d=identicon&r=PG", "display_name": "MidwestStudent", "link": "https://stackoverflow.com/users/6831298/midweststudent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "closed_date": 1473918102, "answer_count": 3, "score": -1, "last_activity_date": 1473864104, "creation_date": 1473862894, "last_edit_date": 1473863575, "question_id": 39492853, "link": "https://stackoverflow.com/questions/39492853/homework-parameters-for-c-function", "closed_reason": "Not suitable for this site", "title": "Homework: Parameters for C++ function", "body": "<p>I am currently learning C++ on my own, and I face difficulty getting the parameters for my function correct.</p>\n\n<p>The question and my screenshot is:</p>\n\n<p><a href=\"http://i.stack.imgur.com/Qz2nj.png\" rel=\"nofollow\">My Screenshot</a></p>\n\n<p>My code so far is:</p>\n\n<pre><code>int countInRange(Vector&lt;int&gt; array, int min, int max){\n    /*\n        Actual code goes here......\n    */\n    return 0;   \n}\n</code></pre>\n\n<p>Right now the compiler does not accept <code>Vector&lt;int&gt; array</code>, and throws me this error:</p>\n\n<p><code>no match for 'operator=' (operand types are 'Vector&lt;int&gt;' and '&lt;brace-enclosed initializer list&gt;')\n  param0 = {28, 1, 17, 4, 41, 9, 59, 8, 31, 30, 25};</code></p>\n\n<p>I understand that this question is using a Stanford standard library, but I don't think that is the main problem. </p>\n\n<p>I would appreciate any help on fixing the <code>Vector&lt;int&gt; array</code> part. Thank you!</p>\n\n<p>Thanks for the help guys! I understand that the standard library \"std::vector\" might be different from Stanford's library \"Vector\" with capital \"V\":</p>\n\n<p><a href=\"http://stanford.edu/~stepp/cppdoc/Vector-class.html\" rel=\"nofollow\">http://stanford.edu/~stepp/cppdoc/Vector-class.html</a></p>\n\n<p>I will try to provide more information to help everyone.</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1473862893, "post_id": 39492803, "comment_id": 66303202, "body": "Is that second line of code intended to go inside the function? If so, write it that way. And, yes, if you do that, it will copy the character that <code>input</code> points to into <code>var</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1473870524, "post_id": 39492803, "comment_id": 66308276, "body": "Picking at nits, all you can guarantee is that there is one character that the pointer is pointing to.  Anything else is an assumption.  For passing more than one character, use <code>std::string</code> or <code>std::vector&lt;char&gt;</code> or some other container."}], "answers": [{"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 0, "last_activity_date": 1473863370, "last_edit_date": 1473863370, "creation_date": 1473862914, "answer_id": 39492860, "question_id": 39492803, "link": "https://stackoverflow.com/questions/39492803/c-char-pointer-to-char-variable/39492860#39492860", "title": "C++ char pointer to char variable", "body": "<p>As long as it's inside the function and <code>input</code> points to something valid ( not <code>NULL</code>/<code>nullptr</code> and not a garbage location ) then doing <code>char var = input[0];</code> is just fine. It's the same as <code>char var = *input</code>. </p>\n\n<p>P.S If it's supposed to be a string I recommend using <code>std::string</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 6305563, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153919642523429/picture?type=large", "display_name": "Brandon Walker", "link": "https://stackoverflow.com/users/6305563/brandon-walker"}, "edited": false, "score": 0, "creation_date": 1473948836, "post_id": 39492870, "comment_id": 66342538, "body": "Now would it be ok to use input[1] input[2] etc to continue down the char array that I know is being looked at by the pointer? Or is there a way to place the char array into a string so it is easier to track the size/boundaries of the char[]/string?"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 9, "user_id": 6305563, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153919642523429/picture?type=large", "display_name": "Brandon Walker", "link": "https://stackoverflow.com/users/6305563/brandon-walker"}, "edited": false, "score": 0, "creation_date": 1473974251, "post_id": 39492870, "comment_id": 66356731, "body": "@BrandonWalker The usual convention with strings is for every character to be valid until you reach a character with a value of zero. Not <code>&#39;0&#39;</code>, but <code>0</code>. If you have that you can easily copy it to a <code>std::string</code> with simple assignment."}], "tags": [], "owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 0, "last_activity_date": 1473862944, "creation_date": 1473862944, "answer_id": 39492870, "question_id": 39492803, "link": "https://stackoverflow.com/questions/39492803/c-char-pointer-to-char-variable/39492870#39492870", "title": "C++ char pointer to char variable", "body": "<p>There are two ways to get a value from a pointer, <code>*</code> and <code>[]</code>. The following are equivalent:</p>\n\n<pre><code>char var1 = *input;\nchar var2 = input[0];\n</code></pre>\n\n<p>Using the brackets is more common when you know you were passed an array, since it allows you to supply an index. You need some way of knowing where the end of the array is so that you don't attempt any access past it, your function is missing that important detail.</p>\n"}, {"tags": [], "owner": {"reputation": 18808, "user_id": 924727, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bd2dcbbfd05a7c49cd74c7cb93e26488?s=128&d=identicon&r=PG", "display_name": "Emilio Garavaglia", "link": "https://stackoverflow.com/users/924727/emilio-garavaglia"}, "is_accepted": false, "score": 1, "last_activity_date": 1473879712, "last_edit_date": 1473879712, "creation_date": 1473865017, "answer_id": 39493671, "question_id": 39492803, "link": "https://stackoverflow.com/questions/39492803/c-char-pointer-to-char-variable/39493671#39493671", "title": "C++ char pointer to char variable", "body": "<p>There is a misconception that may lead you into further troubles:</p>\n\n<blockquote>\n  <p>I know that \"input\" will be in the form of a char array.</p>\n</blockquote>\n\n<p><strong>NOPE:</strong> By the scope of that function, <code>input</code> is a <strong>pointer to a character</strong>.  The function has no way to know where such a pointer comes from.</p>\n\n<p>If it has been taken from an array upon calling the function than it will be a <code>pointer to the first element of that array</code>.</p>\n\n<p>Because pointer have an arithmetic that allows to add offsets and because the <code>[]</code> operator applied to pointers translates as <code>a[b] = *(a+b)</code> by definition, in whatever code, if a is <code>a</code> pointer, <code>*a</code> and <code>a[0]</code> are perfect synonymous.</p>\n\n<p>Think to an array as a sequence of <em>boxes</em> and a pointer as <em>your hand's index finger</em></p>\n\n<p>adding an offset to a <em>finger</em> (like <code>finger+2</code>) means \"<em>re-point it aside</em>\" and de-referencing it (like <code>*finger</code>) means \"look inside what it <em>points to</em>\".</p>\n\n<p>The [] operator on pointers is just a shortcut to do both operations at once.</p>\n\n<p>Arrays are another distinct thing. Don't think to them when dealing with pointers, since -in more complex situations, like multidimensional array or multi-indirection pointers - the expression a[b][c] won't work anymore the same way.</p>\n"}], "owner": {"reputation": 9, "user_id": 6305563, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153919642523429/picture?type=large", "display_name": "Brandon Walker", "link": "https://stackoverflow.com/users/6305563/brandon-walker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1473879712, "creation_date": 1473862744, "question_id": 39492803, "link": "https://stackoverflow.com/questions/39492803/c-char-pointer-to-char-variable", "title": "C++ char pointer to char variable", "body": "<p>I'm given a method header as so:</p>\n\n<pre><code>char* thisMethod(char* input){}\n</code></pre>\n\n<p>is it possible to say, </p>\n\n<pre><code>char var = input[0];\n</code></pre>\n\n<p>? I know that \"input\" will be in the form of a char array. </p>\n\n<p>I'm obviously new to C++ pointers are throwing me off. I tried researching how to work with char pointer function arguments but couldn't find anything specific enough to help. Thanks for the help.</p>\n"}, {"tags": ["c++", "winforms", "rendering", "onpaint"], "comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1473863090, "post_id": 39492664, "comment_id": 66303341, "body": "It looks like an effect from failure to erase background during an animated window move/size."}, {"owner": {"reputation": 1, "user_id": 4083867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T5Om2.png?s=128&g=1", "display_name": "Robbite", "link": "https://stackoverflow.com/users/4083867/robbite"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1473863377, "post_id": 39492664, "comment_id": 66303561, "body": "@Cheersandhth.-Alf I think it get lost on the location when rendering, after I stop moving and do a mouse hover, it get back to normal again, but I don&#39;t know if theres a way to fix this"}, {"owner": {"reputation": 77042, "user_id": 719186, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f03c0b63844ced274fae4110267fe640?s=128&d=identicon&r=PG", "display_name": "LarsTech", "link": "https://stackoverflow.com/users/719186/larstech"}, "edited": false, "score": 0, "creation_date": 1473865979, "post_id": 39492664, "comment_id": 66305440, "body": "ClipRectangle is probably the issue \u2014 don&#39;t use it since you are trying to redraw the whole menu.  Also, TextRenderer.DrawText should replace the DrawString method since it fixed a lot of drawing issues.  DrawString should only be used on a printer graphic."}], "owner": {"reputation": 1, "user_id": 4083867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T5Om2.png?s=128&g=1", "display_name": "Robbite", "link": "https://stackoverflow.com/users/4083867/robbite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1473863481, "creation_date": 1473862360, "last_edit_date": 1473863481, "question_id": 39492664, "link": "https://stackoverflow.com/questions/39492664/is-there-a-way-to-fix-the-text-issue-on-a-custom-menu-strip-options-in-winform-c", "title": "Is there a way to fix the text issue on a custom menu strip options in WinForm C++ when moving to one monitor to another?", "body": "<p>I did a lot of search and research and didn't find a answer for my probleam, so.. I made a custom Menu using WinForm C++, where we override the Renderer and OnPaint methods.\nOur application can move to one monitor to another and when we do that, the texts of the options on my Menu get corrupted.\nI don't have any idea or know if this has a solution. I'll be very thankfull if somebody can help me.</p>\n\n<p>Heres the menu right:<br>\n<a href=\"https://i.stack.imgur.com/6apoz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6apoz.png\" alt=\"menu correct\"></a></p>\n\n<p>And the Bug:<br>\n<a href=\"https://i.stack.imgur.com/L8KNQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/L8KNQ.png\" alt=\"Text corrupted\"></a></p>\n\n<p><strong>MyRenderer.h</strong></p>\n\n<pre><code>    ref class MyRenderer: ToolStripProfessionalRenderer\n    {\n\n    protected:\n\n    virtual void OnRenderToolStripBorder(System::Windows::Forms::ToolStripRenderEventArgs ^e) override\n      {\n\n       System::Drawing::SolidBrush^ brush = gcnew System::Drawing::SolidBrush(Color::FromArgb(static_cast&lt;System::Int32&gt;(static_cast&lt;System::Byte&gt;(0)), static_cast&lt;System::Int32&gt;(static_cast&lt;System::Byte&gt;(60)),static_cast&lt;System::Int32&gt;(static_cast&lt;System::Byte&gt;(107))));\n\n       e-&gt;Graphics-&gt;FillRectangle(brush, e-&gt;ConnectedArea);\n       Drawing::Rectangle rectBorder = Drawing::Rectangle(0, 1, e-&gt;AffectedBounds.Width-1, e-&gt;AffectedBounds.Height-2);\n\n       Pen^ pen = gcnew Pen(brush, 2);\n\n       e-&gt;Graphics-&gt;DrawRectangle(pen, rectBorder);\n      }\n    };\n</code></pre>\n\n<p><strong>MenuHover.h</strong></p>\n\n<pre><code>    public ref class MenuHover: ToolStripMenuItem\n    {\n    protected:\n    virtual void OnPaint(PaintEventArgs ^e) override\n    {\n    if (this-&gt;Visible)\n    {\n        System::Drawing::SolidBrush^ brush = gcnew             System::Drawing::SolidBrush(Color::FromArgb(static_cast&lt;System::Int32&gt;(static_cast&lt;System::Byte&gt;(0)), static_cast&lt;System::Int32&gt;(static_cast&lt;System::Byte&gt;(60)), \n            static_cast&lt;System::Int32&gt;(static_cast&lt;System::Byte&gt;(107))));\n\n        e-&gt;Graphics-&gt;FillRectangle(brush, e-&gt;ClipRectangle.X, e-&gt;ClipRectangle.Y, e-&gt;ClipRectangle.Width, e-&gt;ClipRectangle.Height+34);\n\n        Drawing::Rectangle rect = Drawing::Rectangle(e-&gt;ClipRectangle.X, e-&gt;ClipRectangle.Y+5, e-&gt;ClipRectangle.Width, e-&gt;ClipRectangle.Height+34);\n        StringFormat^ sf = gcnew StringFormat();\n        sf-&gt;Alignment = StringAlignment::Center;\n\n        e-&gt;Graphics-&gt;DrawString(this-&gt;Text, this-&gt;Font, Brushes::White, rect, sf);\n    }\n\n    if (this-&gt;Selected || this-&gt;Pressed)\n    {\n        System::Drawing::SolidBrush^ brush = gcnew System::Drawing::SolidBrush(Color::FromArgb(static_cast&lt;System::Int32&gt;(static_cast&lt;System::Byte&gt;(0)), static_cast&lt;System::Int32&gt;(static_cast&lt;System::Byte&gt;(42)), \n            static_cast&lt;System::Int32&gt;(static_cast&lt;System::Byte&gt;(82))));\n\n        e-&gt;Graphics-&gt;FillRectangle(brush, e-&gt;ClipRectangle.X, e-&gt;ClipRectangle.Y, e-&gt;ClipRectangle.Width, e-&gt;ClipRectangle.Height);\n\n        Drawing::Rectangle rect = Drawing::Rectangle(e-&gt;ClipRectangle.X, e-&gt;ClipRectangle.Y+5, e-&gt;ClipRectangle.Width, e-&gt;ClipRectangle.Height);\n\n        StringFormat^ sf = gcnew StringFormat();\n        sf-&gt;Alignment = StringAlignment::Center;\n\n        e-&gt;Graphics-&gt;DrawString(this-&gt;Text, this-&gt;Font, Brushes::White, rect, sf);\n       }\n      }\n    };\n</code></pre>\n\n<p><strong>MenuHoverItem.h</strong></p>\n\n<pre><code>    ref class MenuHoverItem: ToolStripMenuItem\n    {\n    protected:\n    virtual void OnPaint(PaintEventArgs ^e) override\n    {\n    if (this-&gt;Visible)\n    {\n        System::Drawing::SolidBrush^ brush = gcnew System::Drawing::SolidBrush(Color::FromArgb(static_cast&lt;System::Int32&gt;(static_cast&lt;System::Byte&gt;(0)), static_cast&lt;System::Int32&gt;(static_cast&lt;System::Byte&gt;(42)), \n            static_cast&lt;System::Int32&gt;(static_cast&lt;System::Byte&gt;(82))));\n\n        e-&gt;Graphics-&gt;FillRectangle(brush, e-&gt;ClipRectangle.X, e-&gt;ClipRectangle.Y, e-&gt;ClipRectangle.Width, e-&gt;ClipRectangle.Height);\n        Drawing::Rectangle rect = Drawing::Rectangle(e-&gt;ClipRectangle.X+14, e-&gt;ClipRectangle.Y+1, e-&gt;ClipRectangle.Width, e-&gt;ClipRectangle.Height);\n        StringFormat^ sf = gcnew StringFormat();\n        sf-&gt;LineAlignment = StringAlignment::Center;\n\n        e-&gt;Graphics-&gt;DrawString(this-&gt;Text, this-&gt;Font, Brushes::White, rect, sf);\n    }\n\n    if (this-&gt;Selected || this-&gt;Pressed)\n    {\n        System::Drawing::SolidBrush^ brush = gcnew System::Drawing::SolidBrush(Color::FromArgb(static_cast&lt;System::Int32&gt;(static_cast&lt;System::Byte&gt;(0)), static_cast&lt;System::Int32&gt;(static_cast&lt;System::Byte&gt;(60)), \n            static_cast&lt;System::Int32&gt;(static_cast&lt;System::Byte&gt;(107))));\n\n        e-&gt;Graphics-&gt;FillRectangle(brush, e-&gt;ClipRectangle.X, e-&gt;ClipRectangle.Y, e-&gt;ClipRectangle.Width, e-&gt;ClipRectangle.Height-1);\n        Drawing::Rectangle rect = Drawing::Rectangle(e-&gt;ClipRectangle.X+14, e-&gt;ClipRectangle.Y+1, e-&gt;ClipRectangle.Width, e-&gt;ClipRectangle.Height);\n\n        StringFormat^ sf = gcnew StringFormat();\n        sf-&gt;LineAlignment = StringAlignment::Center;\n        e-&gt;Graphics-&gt;DrawString(this-&gt;Text, this-&gt;Font, Brushes::White, rect, sf);\n       }\n      }\n    };\n</code></pre>\n\n<p>If theres a question like that, please send me a link and my I'm sorry if theres anything wrong, thanks for the help</p>\n"}, {"tags": ["c++", "templates", "tuples", "c++14", "sfinae"], "comments": [{"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 2, "creation_date": 1473862506, "post_id": 39492632, "comment_id": 66302939, "body": "The last index is <code>size-1</code>, not <code>size</code>, so <code>N</code> should be compared with value <code>size-1</code>"}, {"owner": {"reputation": 1675, "user_id": 1611317, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/367f6a8d2c0d2847a3f54711f94f5a09?s=128&d=identicon&r=PG", "display_name": "Viatorus", "link": "https://stackoverflow.com/users/1611317/viatorus"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1473862988, "post_id": 39492632, "comment_id": 66303255, "body": "I know, so the last function (termination) should be one index over the size of elements (that is because N != size). If I would have 4 functions with different behaviors for N &lt; size - 1, I would also need 4 functions for N == size -1. I want to compensate this."}], "answers": [{"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 1, "last_activity_date": 1473869372, "last_edit_date": 1473869372, "creation_date": 1473867576, "answer_id": 39494568, "question_id": 39492632, "link": "https://stackoverflow.com/questions/39492632/sfinae-function-templates-optimation/39494568#39494568", "title": "SFINAE: function templates optimation", "body": "<p>What about using an additional struct that, with partial specialization, can avoid the use of <code>std::tuple_element_t</code> ?</p>\n\n<p>I mean, something like</p>\n\n<pre><code>  template &lt;typename T, std::size_t N&gt;\n  struct checkType\n   { constexpr static bool value\n      = std::is_same&lt;T, std::tuple_element_t&lt;N, tuple&gt;&gt;::value; };\n\n  template &lt;typename T&gt;\n  struct checkType&lt;T, size&gt;\n   { constexpr static bool value = false; };\n\n  template &lt;typename, std::size_t N = 0&gt;\n  std::enable_if_t&lt;N == size, int&gt; get ()\n   { return 0; }\n\n  template &lt;typename T, std::size_t N = 0&gt;\n  std::enable_if_t&lt;(N &lt; size) &amp;&amp; ! checkType&lt;T, N&gt;::value, int&gt; get()\n   { return get&lt;T, N + 1&gt;() - 1; }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1675, "user_id": 1611317, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/367f6a8d2c0d2847a3f54711f94f5a09?s=128&d=identicon&r=PG", "display_name": "Viatorus", "link": "https://stackoverflow.com/users/1611317/viatorus"}, "edited": false, "score": 0, "creation_date": 1473919451, "post_id": 39499283, "comment_id": 66325206, "body": "Thank you for your answer. It does solve the problem but not for automatic type return type deduction based on which function is used (returning int was just an example). I should have been clearer on this. However, you are right, the problem is the compile time error of the evaluation of the tuple_element."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 1675, "user_id": 1611317, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/367f6a8d2c0d2847a3f54711f94f5a09?s=128&d=identicon&r=PG", "display_name": "Viatorus", "link": "https://stackoverflow.com/users/1611317/viatorus"}, "edited": false, "score": 0, "creation_date": 1473927901, "post_id": 39499283, "comment_id": 66329126, "body": "@Viatorus I&#39;ve added <a href=\"http://stackoverflow.com/a/39506313/4987285\">another answer</a> that probably solves your problem. Let me know."}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 4, "last_activity_date": 1473886305, "last_edit_date": 1473886305, "creation_date": 1473885490, "answer_id": 39499283, "question_id": 39492632, "link": "https://stackoverflow.com/questions/39492632/sfinae-function-templates-optimation/39499283#39499283", "title": "SFINAE: function templates optimation", "body": "<p>As suggested by @PiotrSkotnicki in the comments to the question, here is your second example once fixed:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;tuple&gt;\n\ntemplate&lt;typename...Ts&gt;\nstruct A\n{\n  using tuple = std::tuple&lt;Ts...&gt;;\n  static constexpr std::size_t size = sizeof...(Ts);\n\n  template&lt;typename T, std::size_t N = 0&gt;\n  std::enable_if_t&lt;N == size-1, int&gt;\n  get()\n  {\n    return std::is_same&lt;T, std::tuple_element_t&lt;N, tuple&gt;&gt;::value ? N : 0;\n  }\n\n  template&lt;typename T, std::size_t N = 0&gt;\n  std::enable_if_t&lt;N != size-1 &amp;&amp; !std::is_same&lt;T, std::tuple_element_t&lt;N, tuple&gt;&gt;::value, int&gt;\n  get()\n  {\n    return get&lt;T, N + 1&gt;() - 1;\n  }\n};\n\nint main()\n{\n  A&lt;int, float, double, float, float&gt; a;\n  return a.get&lt;char&gt;();\n}\n</code></pre>\n\n<p>What was the problem?<br>\nConsider the following line:</p>\n\n<pre><code>std::enable_if_t&lt;N != size &amp;&amp; !std::is_same&lt;T, std::tuple_element_t&lt;N, tuple&gt;&gt;::value, int&gt; get() \n</code></pre>\n\n<p>In this case, <code>N</code> was substituted in order to evaluate the condition of the <code>enable_if</code>, even when <code>N == size</code> (substitution is mandatory to find that <code>N == size</code> indeed).<br>\nThus, the <code>tuple_element_t</code> (let me say) issued an out of range and that's why you got the compilation error.</p>\n\n<p>I've simply updated your code to avoid reaching <code>size</code> while iterating over <code>N</code>. It was a matter of using <code>size-1</code> as a value on which to switch between functions.</p>\n"}, {"tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": true, "score": 1, "last_activity_date": 1473927837, "last_edit_date": 1495540925, "creation_date": 1473927837, "answer_id": 39506313, "question_id": 39492632, "link": "https://stackoverflow.com/questions/39492632/sfinae-function-templates-optimation/39506313#39506313", "title": "SFINAE: function templates optimation", "body": "<p>In a comment to <a href=\"https://stackoverflow.com/a/39499283/4987285\">this</a> answer the OP said:</p>\n\n<blockquote>\n  <p>It does solve the problem but not for automatic type return type deduction based on which function is used (returning int was just an example). I should have been clearer on this.</p>\n</blockquote>\n\n<p>It follows a minimal, working example that probably solves the problem also for that.<br>\nIt's far easier to reason in terms of inheritance and tag dispatching in this case, so as to reduce the boilerplate due to sfinae. Moreover, one can use specializations to introduce specific behaviors for specific types if needed.<br>\nThe final case, the one for the type that is not part of the types list, is easily handled in a dedicated function as well.</p>\n\n<p>It follows the code:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;tuple&gt;\n\ntemplate&lt;typename&gt;\nstruct tag {};\n\ntemplate&lt;typename...&gt;\nstruct B;\n\ntemplate&lt;typename T, typename... Ts&gt;\nstruct B&lt;T, Ts...&gt;: B&lt;Ts...&gt; {\n    using B&lt;Ts...&gt;::get;\n\n    auto get(tag&lt;T&gt;) {\n        return T{};\n    }\n};\n\ntemplate&lt;&gt;\nstruct B&lt;&gt; {\n    template&lt;typename T&gt;\n    auto get(tag&lt;T&gt;) {\n        return nullptr;\n    }\n};\n\ntemplate&lt;typename...Ts&gt;\nstruct A: private B&lt;Ts...&gt;\n{\n    template&lt;typename T&gt;\n    auto get() {\n        return B&lt;Ts...&gt;::get(tag&lt;T&gt;{});\n    }\n};\n\nint main()\n{\n  A&lt;int, float, double, float, float&gt; a;\n  static_assert(std::is_same&lt;decltype(a.get&lt;char&gt;()), std::nullptr_t&gt;::value, \"!\");\n  static_assert(std::is_same&lt;decltype(a.get&lt;float&gt;()), float&gt;::value, \"!\");\n}\n</code></pre>\n"}], "owner": {"reputation": 1675, "user_id": 1611317, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/367f6a8d2c0d2847a3f54711f94f5a09?s=128&d=identicon&r=PG", "display_name": "Viatorus", "link": "https://stackoverflow.com/users/1611317/viatorus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 39506313, "answer_count": 3, "score": 4, "last_activity_date": 1474097462, "creation_date": 1473862277, "last_edit_date": 1474097462, "question_id": 39492632, "link": "https://stackoverflow.com/questions/39492632/sfinae-function-templates-optimation", "title": "SFINAE: function templates optimation", "body": "<p>I would like iterate over an tuple in some way with member function templates (for later create a new type of tuple from the given template type <code>T</code>). </p>\n\n<p>However, the break condition (function) is not used so I get this error:</p>\n\n<blockquote>\n  <p>invalid use of incomplete type: 'class std::tuple_element&lt;0ul, std::tuple&lt;> >'</p>\n</blockquote>\n\n<p>The problem seems to be, that even though <code>N == size</code> of the tuple, <code>std::tuple_element_t</code> is evaluated for <code>N != size</code> and not handled as SFINAE.</p>\n\n<p>Both examples showing different not working solutions. What do I wrong?</p>\n\n<p><em>Note: The function for evaluated with <code>is_same</code> is omitted to minimize the example.</em></p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;tuple&gt;\n\ntemplate&lt;typename...Ts&gt;\nstruct A\n{\n  using tuple = std::tuple&lt;Ts...&gt;;\n  static constexpr std::size_t size = sizeof...(Ts);\n\n  template&lt;typename T, std::size_t N = 0, typename std::enable_if_t&lt;N == size&gt;* = nullptr&gt;\n  int get()\n  {\n    return 0;\n  }\n\n  template&lt;typename T, std::size_t N = 0, typename std::enable_if_t&lt;N != size &amp;&amp; !std::is_same&lt;T, std::tuple_element_t&lt;N, tuple&gt;&gt;::value&gt;* = nullptr&gt;\n  int get()\n  {\n    return get&lt;T, N + 1&gt;() - 1;\n  }\n};\n\nint main()\n{\n  A&lt;int, float, double, float, float&gt; a;\n\n  return a.get&lt;char&gt;();\n}\n</code></pre>\n\n<p><a href=\"https://gcc.godbolt.org/#compilers:!((compiler:g62,options:&#39;-std%3Dc%2B%2B1z+-O3+-Wall+-ftemplate-backtrace-limit%3D0&#39;,sourcez:MQSwdgxgNgrgJgUwAQB4AuBPADgg%2BmgJwEMQ0BnAPgChRJZFU0YsoFqq0EBbFoz9bAjBEuCAHQSAKpSpIkZQjAhokAQVlIA3hrkwy4AOZImLZAF55aOAC5rJ1imkSxFANw7LfEBCQQA9mAKCAAeWASWNtb6AF54KjHm8iCxfgBmzgAU0gCU7h6cPFB8CAI4wqJIkgA0EbYJ%2BEgAckgWAAw1mGUiyAqRQkQARqy4IKn4KM1mFgkUAFQtSGAwUFBYhNRym0jgKgYIaBnZHtpbcgT7MARgSK3uWwC%2BVPncvPyd/RXVtVHJcU0L7WMgnKPSstn6Qzwo3GzQAhNNfkgAGRIpCw3q2EBkXBkbqOGoYuzMYYIViiMBoGEdYlsCi2ABuRFgbHmFiWKzWBA2px2SD2ByOWxOp3OTCufP2%2BP%2BAGokABGCiHJAAWnld02jzk9zyvK4JDAhyowtUKB2NVSUD8fBqcD8MEh5st1qQFqtaAoSCIeTOF3FRDE/JQEAAFkQuYd3PcgAA)),filterAsm:(commentOnly:!t,directives:!t,labels:!t),version:3\" rel=\"nofollow\">Live Example 1</a></p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;tuple&gt;\n\ntemplate&lt;typename...Ts&gt;\nstruct A\n{\n  using tuple = std::tuple&lt;Ts...&gt;;\n  static constexpr std::size_t size = sizeof...(Ts);\n\n  template&lt;typename T, std::size_t N = 0&gt;\n  std::enable_if_t&lt;N == size, int&gt; get()\n  {\n    return 0;\n  }\n\n  template&lt;typename T, std::size_t N = 0&gt;\n  std::enable_if_t&lt;N != size &amp;&amp; !std::is_same&lt;T, std::tuple_element_t&lt;N, tuple&gt;&gt;::value, int&gt; get()\n  {\n    return get&lt;T, N + 1&gt;() - 1;\n  }\n};\n\nint main()\n{\n  A&lt;int, float, double, float, float&gt; a;\n\n  return a.get&lt;char&gt;();\n}\n</code></pre>\n\n<p><a href=\"https://gcc.godbolt.org/#compilers:!((compiler:g62,options:&#39;-std%3Dc%2B%2B1z+-O3+-Wall+-ftemplate-backtrace-limit%3D0&#39;,sourcez:MQSwdgxgNgrgJgUwAQB4AuBPADgg%2BmgJwEMQ0BnAPgChRJZFU0YsoFqq0EBbFoz9bAjBEuCAHQSAKpSpIkZQjAhokAQVlIA3hrkwy4AOZImLZAF55aOAC5rJ1imkSxFANw7LfEBCQQA9mAKCAAeWASWNtb6AF54KjHm8iCxfgBmzgAU0gCU7h6cPFB8CAI4wqJIkgA0EbYJ%2BEgAckgWAAzUcp211kJEAEasuCCp%2BCjNZhYJNeBoFEgGCGgZ2R5y2l1dBIswBGBIre4bSAC%2BVPncvPyYZSLI1d31KuP7HRsKkb0DeMOjzQCEk2SyAAZMCkH93rYQGRcGRbo4apC7MxBghWKIwGhfjV7GwKLYAG5EWAIaaYuYLJYrI7rI5ILZMXbzRYIppIADUSAAjBRlkgALTcw4bU5yY55GZILgkMDLKi01QoGY1VJQPx8GpwPwwL4qtUapCq9WzJBEPJyBk7PZEMSUlAQAAWRAIvNyVGOQAAA%3D%3D)),filterAsm:(commentOnly:!t,directives:!t,labels:!t),version:3\" rel=\"nofollow\">Live Example 2</a></p>\n\n<p>One workaround would be to use a third function to evaluate until sizeof tuple - 2 and than evaluate sizeof tuple - 1, but Is this really necessary?</p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;tuple&gt;\n\ntemplate&lt;typename...Ts&gt;\n  struct A\n  {\n    using tuple = std::tuple&lt;Ts...&gt;;\n    static constexpr std::size_t size = sizeof...(Ts);\n\n    template&lt;typename T, std::size_t N = 0, typename std::enable_if_t&lt;(N == size - 1) &amp;&amp; std::is_same&lt;T, std::tuple_element_t&lt;N, tuple&gt;&gt;::value&gt;* = nullptr&gt;\n      int get()\n    {\n      return 1;\n    }\n\n    template&lt;typename T, std::size_t N = 0, typename std::enable_if_t&lt;(N == size - 1) &amp;&amp; !std::is_same&lt;T, std::tuple_element_t&lt;N, tuple&gt;&gt;::value&gt;* = nullptr&gt;\n      int get()\n    {\n      return 2;\n    }\n\n    template&lt;typename T, std::size_t N = 0, typename std::enable_if_t&lt;(N &lt; size - 1) &amp;&amp; !std::is_same&lt;T, std::tuple_element_t&lt;N, tuple&gt;&gt;::value&gt;* = nullptr&gt;\n      int get()\n    {\n      return get&lt;T, N + 1&gt;() - 1;\n    }\n  };\n\nint main()\n{\n  A&lt;int, float, double, float, float&gt; a;\n\n  return a.get&lt;char&gt;();\n}\n</code></pre>\n\n<p><a href=\"https://gcc.godbolt.org/#compilers:!((compiler:g62,options:&#39;-std%3Dc%2B%2B1z+-O3+-Wall+-ftemplate-backtrace-limit%3D0&#39;,sourcez:MQSwdgxgNgrgJgUwAQB4AuBPADgg%2BmgJwEMQ0BnAPgChRJZFU0YsoFqq0EBbFoz9bAjBEuCAHQSAKpSpIkZQjAhokAQVlIA3hrkwy4AOZImLZAF55aOAC5rJ1imkSxFANw7LfEBCQQA9mAKCAAeWASWNtb6AF54KjHm8iCxfgBmzgAU0gCU7h6cPFB8CAI4wqJIkgA0EbYJ%2BEgAckgWAAw1mGUiyAqRQkQARqy4IKn4KBnNZhYJSAC0SACM2UgAZKu11iBkuGTdjjW9tvZ4CKyiYGjjjR3MrBQUtgBuRLBsAFQtSGAwUFBYhGocmBSHAKgMCDQGWyHm0ILkBEhMAIYCW7hBAF8PPluLx%2BJ1%2BhVqpt6iopkh2sZBOUelZbP0hnhRuNJi0ZslkAtlmsNgBCI5bHZ7UQHTYnXBnbhCK5oFA3Yx3NiPawvN4UT4WH5/AEEIHwsFICFQmEguHwxFMFFIABM6OBWJxhWKpUJyGJAtJTS%2BlIJNM2DOGzNlrJQSVi8yWK3WSH5dMFu327rj4slFxlctupgez1eMA%2BXy1/0BHjkBqN0NhJaQFuRqKNouaAGolhRoRHFna5Fiu3kDVwSGAK2bVCgwTVUlA/HwanA/DBGePJ9OkBOp2gKEgiHkEUirUQxPWIAALIi66HuDFAA%3D%3D)),filterAsm:(commentOnly:!t,directives:!t,labels:!t),version:3\" rel=\"nofollow\">Live Example 3</a></p>\n"}, {"tags": ["c++", "winapi", "com", "directshow"], "answers": [{"comments": [{"owner": {"reputation": 1520, "user_id": 961331, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WwnsX.jpg?s=128&g=1", "display_name": "DontPanic", "link": "https://stackoverflow.com/users/961331/dontpanic"}, "edited": false, "score": 0, "creation_date": 1473868404, "post_id": 39493953, "comment_id": 66307027, "body": "Yes, I understand, but my question is how exactly do I &quot;register a filter&quot; (and use it to AddFilter to a graph)?"}, {"owner": {"reputation": 1520, "user_id": 961331, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WwnsX.jpg?s=128&g=1", "display_name": "DontPanic", "link": "https://stackoverflow.com/users/961331/dontpanic"}, "edited": false, "score": 0, "creation_date": 1473880311, "post_id": 39493953, "comment_id": 66313457, "body": "Great! Just what I needed."}], "tags": [], "owner": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "is_accepted": true, "score": 2, "last_activity_date": 1473869304, "last_edit_date": 1473869304, "creation_date": 1473865746, "answer_id": 39493953, "question_id": 39492603, "link": "https://stackoverflow.com/questions/39492603/directshow-sample-filters-how-to-use/39493953#39493953", "title": "DirectShow Sample Filters: How to Use?", "body": "<p>Filters are not used standalone - they are a part of a pipeline, they communicate with other filters and with Filter Graph Manager. </p>\n\n<p>Filters are indeed registered with <code>IFilterMapper2::RegisterFilter</code> call. Note that as this involves registry write under HKLM the registration has to take place with local administrator's elevated privileges.</p>\n\n<p>In most cases, even though it does not need to happen exactly this way, this registration is a part of generic COM registration, done by regsvr32 or equivalent call. The DLL registration code typically does <code>IFilterMapper2::RegisterFilter</code> for filters it publishes.</p>\n\n<p>In Dump sample, <a href=\"https://github.com/as2120/ZDoc/blob/0acf20057211bd9aeffc441df39ffefa56fb32b7/code/avplayer/third_party/dxsdk9.0/DXSDK/Samples/C%2B%2B/DirectShow/Filters/Dump/dump.cpp#L826\" rel=\"nofollow\">there is a <code>AMovieDllRegisterServer2</code> call</a> that handles it, with the help of <a href=\"https://github.com/as2120/ZDoc/blob/0acf20057211bd9aeffc441df39ffefa56fb32b7/code/avplayer/third_party/dxsdk9.0/DXSDK/Samples/C%2B%2B/DirectShow/Filters/Dump/dump.cpp#L115\" rel=\"nofollow\"><code>g_Templates</code></a> in the same file higher.</p>\n\n<p>Once you registered a filter, it can be enumerated by applications. First thing you want to try out is SDK GraphEdit tool or its newer and more powerful open source replacement <a href=\"https://github.com/cplussharp/graph-studio-next\" rel=\"nofollow\">GraphStudioNext</a>.</p>\n\n<p><kbd>Ctrl</kbd>+ <kbd>F</kbd> opens filter list where you can find yours and insert it into filter graph being built interactively. Then connect tpo other filters and run.</p>\n\n<p>See <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd407274\" rel=\"nofollow\">Using GraphEdit</a> on MSDN.</p>\n"}], "owner": {"reputation": 1520, "user_id": 961331, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WwnsX.jpg?s=128&g=1", "display_name": "DontPanic", "link": "https://stackoverflow.com/users/961331/dontpanic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 39493953, "answer_count": 1, "score": 0, "last_activity_date": 1473880766, "creation_date": 1473862191, "last_edit_date": 1473880766, "question_id": 39492603, "link": "https://stackoverflow.com/questions/39492603/directshow-sample-filters-how-to-use", "title": "DirectShow Sample Filters: How to Use?", "body": "<p>I'm trying to write a custom DS rendering filter. I decided to start from a sample filter provided with the SDK, namely \"Dump\". I can successfully build DUMP.DLL and associated files, but I can't figure out how to use it in my app.</p>\n\n<p>It looks like IFilterMapper2->RegisterFilter might do it, but (IMHO) it's a monstrosity and the doc is minimalist. Also, I see nowhere to specify the DLL as the InProcServer, which I assume would be a requirement.</p>\n\n<p>I also tried regsvr32 DUMP.DLL but I'm not sure if that helps.</p>\n\n<p>I believe the answer must be simple, but I just don't see it. Any help will be greatly appreciated, especially code snipplets (academic discourses are not terribly helpful). Also, the best solution should be straight C++ (no third party packages or .NET stuff).</p>\n\n<p>Thank in advance,<br>\n-John</p>\n"}, {"tags": ["c++", "c++11", "quicksort"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1473862077, "post_id": 39492529, "comment_id": 66302649, "body": "Probably you messed the starting index somewhere (1 instead of 0). Find it out by debugging."}, {"owner": {"reputation": 15, "user_id": 5731635, "user_type": "registered", "profile_image": "https://graph.facebook.com/1051312404889836/picture?type=large", "display_name": "Ankur Singh", "link": "https://stackoverflow.com/users/5731635/ankur-singh"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1473862139, "post_id": 39492529, "comment_id": 66302698, "body": "i have tried debugger but i always get lost! for single element it&#39;s working fine"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 2, "creation_date": 1473862177, "post_id": 39492529, "comment_id": 66302721, "body": "<code>cin &gt;&gt; size0;  long arr[size0];</code> This is not c++, it should not compile"}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 1, "creation_date": 1473862209, "post_id": 39492529, "comment_id": 66302743, "body": "Debug a two-element array. That should be small enough that you don&#39;t get lost. The practical answer is to just use the built-in qsort function instead of trying to write (and debug) your own."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1473862251, "post_id": 39492529, "comment_id": 66302777, "body": "@GuillaumeRacicot VLA gcc extension"}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1473862273, "post_id": 39492529, "comment_id": 66302788, "body": "@GuillaumeRacicot Strictly speaking, you&#39;re right, but gcc <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Variable-Length.html\" rel=\"nofollow noreferrer\">allows it</a>."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1473862327, "post_id": 39492529, "comment_id": 66302822, "body": "@bolov Yup&#173;. Use vector instead."}, {"owner": {"reputation": 15, "user_id": 5731635, "user_type": "registered", "profile_image": "https://graph.facebook.com/1051312404889836/picture?type=large", "display_name": "Ankur Singh", "link": "https://stackoverflow.com/users/5731635/ankur-singh"}, "edited": false, "score": 0, "creation_date": 1473862364, "post_id": 39492529, "comment_id": 66302843, "body": "why is size0; and long arr[size0] not allowed in c++"}, {"owner": {"reputation": 1138, "user_id": 4221945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fd64e16069e10f662f0eb2629f262f6?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique Lorre", "link": "https://stackoverflow.com/users/4221945/dominique-lorre"}, "edited": false, "score": 0, "creation_date": 1473863570, "post_id": 39492529, "comment_id": 66303716, "body": "You have an error in randPartition()."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 1, "creation_date": 1473863633, "post_id": 39492529, "comment_id": 66303764, "body": "It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming.  Further reading: <b><a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a></b>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6831371, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/fdacf2c0c1dbd0402f2ca1b68f9334ee?s=128&d=identicon&r=PG", "display_name": "Nepha", "link": "https://stackoverflow.com/users/6831371/nepha"}, "is_accepted": false, "score": -1, "last_activity_date": 1473862716, "creation_date": 1473862716, "answer_id": 39492792, "question_id": 39492529, "link": "https://stackoverflow.com/questions/39492529/reverse-quick-sort/39492792#39492792", "title": "Reverse Quick Sort", "body": "<p>quickSort(arr, 0, <strong>size0 - 1</strong>);  and j <strong>&lt;</strong> end0   exclude your last value.</p>\n"}, {"tags": [], "owner": {"reputation": 136, "user_id": 4065237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/827688eadf395f10e9658a83d56ecd8b?s=128&d=identicon&r=PG&f=1", "display_name": "Lamaseed", "link": "https://stackoverflow.com/users/4065237/lamaseed"}, "is_accepted": true, "score": 1, "last_activity_date": 1473923854, "last_edit_date": 1473923854, "creation_date": 1473864734, "answer_id": 39493566, "question_id": 39492529, "link": "https://stackoverflow.com/questions/39492529/reverse-quick-sort/39493566#39493566", "title": "Reverse Quick Sort", "body": "<p>Inside randomPartition() At the line with</p>\n\n<pre><code>a[i] = a[temp1];\n</code></pre>\n\n<p>replace it with </p>\n\n<pre><code>a[i] = temp1;\n</code></pre>\n\n<p>just a booboo :P</p>\n"}], "owner": {"reputation": 15, "user_id": 5731635, "user_type": "registered", "profile_image": "https://graph.facebook.com/1051312404889836/picture?type=large", "display_name": "Ankur Singh", "link": "https://stackoverflow.com/users/5731635/ankur-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1154, "favorite_count": 0, "closed_date": 1474230140, "accepted_answer_id": 39493566, "answer_count": 2, "score": 1, "last_activity_date": 1473923854, "creation_date": 1473861979, "last_edit_date": 1473868730, "question_id": 39492529, "link": "https://stackoverflow.com/questions/39492529/reverse-quick-sort", "closed_reason": "Not suitable for this site", "title": "Reverse Quick Sort", "body": "<p>I am trying to perform quick sort on a given array in decreasing order but the first number output is always some arbitrary number like 456752.</p>\n\n<p>I am unable to identify the source of problem. Please help</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\nusing namespace std;\n\nlong randPartition(long a[],long start,long end0)\n{\n    long pivot = start + rand()%(end0 - start);\n\n    //swap a[end] with [pivot]\n    long temp = a[end0];\n    a[end0] =  a[pivot];\n    a[pivot] = temp;\n\n    //now partitioning\n    long i = start;\n    for(int j = start; j &lt; end0 ; j++)\n    {\n        if(a[j] &gt; a[end0])\n        {\n            long temp1 = a[j];\n            a[j] = a[i];\n            a[i] = a[temp1];\n            i++;\n        }\n    }\n\n    //swapping pivot with its correct position\n    long temp2 = a[end0];\n    a[end0] = a[i];\n    a[i] = temp2;\n\n    return i;\n}\n\nvoid quickSort(long ar[],long start,long end0)\n{\n    if (start &lt; end0)\n    {\n        long i = randPartition(ar,start,end0);\n        quickSort(ar,start,i-1);\n        quickSort(ar,i+1,end0);\n    }\n}\n\nint main()\n{\n    int testCases;\n    cin &gt;&gt; testCases;\n\n    while(testCases--)\n    {\n        long size0;\n        cin &gt;&gt; size0;\n        long arr[size0];\n\n        for(int i = 0; i &lt; size0; i++)\n        {\n            cin &gt;&gt; arr[i];\n        }\n        //cin &gt;&gt; endl;\n\n        //using quick sort algo\n        quickSort(arr, 0, size0 - 1);\n\n        //printing the sorted array\n        for(int j = 0; j &lt; size0; j++)\n        {\n            cout &lt;&lt; arr[j] &lt;&lt; \" \";\n        }\n        cout &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "linux", "gcc", "clang", "zlib"], "answers": [{"comments": [{"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "edited": false, "score": 0, "creation_date": 1473915186, "post_id": 39498572, "comment_id": 66323848, "body": "I did some other test - instead to compress just hello world, i compressed the number as string. in thiz case there were no such delay. however the code was not very clean and I wanted to clean it out prior posting it. MacOS is using jemalloc. I will try with itbit later too. And CygWin probably is using some Microsoft allocator from Windows."}, {"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "edited": false, "score": 1, "creation_date": 1473916052, "post_id": 39498572, "comment_id": 66324091, "body": "I tried with jemalloc (on my Arm CPU laptop) and it works perfectly,with same timing in both cases."}], "tags": [], "owner": {"reputation": 4282, "user_id": 165063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MJdL7.png?s=128&g=1", "display_name": "Roman Khimov", "link": "https://stackoverflow.com/users/165063/roman-khimov"}, "is_accepted": true, "score": 6, "last_activity_date": 1473883819, "last_edit_date": 1473883819, "creation_date": 1473882615, "answer_id": 39498572, "question_id": 39492311, "link": "https://stackoverflow.com/questions/39492311/weird-profiling-results-with-zlib/39498572#39498572", "title": "Weird profiling results with zlib", "body": "<p>If you run it with <code>time</code>, you can notice an interesting thing, with line uncommented you get something like this:</p>\n\n<pre><code>$ time ./main \n\nreal    0m5.309s\nuser    0m5.304s\nsys     0m0.004s\n</code></pre>\n\n<p>Nothing special, just some 5 seconds spent in userspace, as expected. But with line commented you suddenly get this:</p>\n\n<pre><code>$ time ./main \n\nreal    0m29.061s\nuser    0m7.424s\nsys     0m21.660s\n</code></pre>\n\n<p>So it's not that your code suddenly got six times slower, it's actually spending more than 5000 times more in the kernel, which is unusual given that the program is just calculating things by its nature, no I/O or anything like that made.</p>\n\n<p>And oprofile proves this, the good one shows this:</p>\n\n<pre><code>samples  %        image name               symbol name\n62451    45.2376  libz.so.1.2.8            /lib64/libz.so.1.2.8\n61905    44.8421  libc-2.19.so             memset\n2752      1.9935  libc-2.19.so             _int_free\n2549      1.8464  libc-2.19.so             _int_malloc\n2474      1.7921  libc-2.19.so             malloc_consolidate\n2263      1.6392  no-vmlinux               /no-vmlinux\n1365      0.9888  libc-2.19.so             malloc\n723       0.5237  libc-2.19.so             __memcpy_sse2_unaligned\n711       0.5150  libstdc++.so.6.0.21      /usr/lib64/libstdc++.so.6.0.21\n478       0.3462  libc-2.19.so             free\n366       0.2651  main                     main\n6         0.0043  ld-2.19.so               _dl_lookup_symbol_x\n2         0.0014  ld-2.19.so               _dl_relocate_object\n2         0.0014  ld-2.19.so               do_lookup_x\n1        7.2e-04  ld-2.19.so               _dl_name_match_p\n1        7.2e-04  ld-2.19.so               check_match.9478\n1        7.2e-04  ld-2.19.so               strcmp\n1        7.2e-04  libc-2.19.so             _dl_addr\n</code></pre>\n\n<p>While the bad one is like this:</p>\n\n<pre><code>samples  %        image name               symbol name\n594605   74.6032  no-vmlinux               /no-vmlinux\n102981   12.9207  libc-2.19.so             memset\n72822     9.1368  libz.so.1.2.8            /lib64/libz.so.1.2.8\n9093      1.1409  libc-2.19.so             _int_malloc\n3987      0.5002  libc-2.19.so             sysmalloc\n3365      0.4222  libc-2.19.so             _int_free\n2119      0.2659  libc-2.19.so             brk\n1958      0.2457  libc-2.19.so             systrim.isra.1\n1597      0.2004  libc-2.19.so             free\n1217      0.1527  libc-2.19.so             malloc\n1123      0.1409  libc-2.19.so             sbrk\n786       0.0986  libc-2.19.so             __memcpy_sse2_unaligned\n688       0.0863  libc-2.19.so             __default_morecore\n669       0.0839  main                     main\n5        6.3e-04  ld-2.19.so               _dl_relocate_object\n4        5.0e-04  ld-2.19.so               do_lookup_x\n2        2.5e-04  ld-2.19.so               strcmp\n1        1.3e-04  ld-2.19.so               _dl_lookup_symbol_x\n1        1.3e-04  libc-2.19.so             _dl_addr\n</code></pre>\n\n<p>If you also look at <code>strace</code> from both binaries, the good one makes just 64 syscalls (at least on my system), while the bad one makes 4000063 syscalls, most of which look like this:</p>\n\n<pre><code>brk(0x6c0000)                           = 0x6c0000\nbrk(0x6e2000)                           = 0x6e2000\nbrk(0x6d2000)                           = 0x6d2000\nbrk(0x6c2000)                           = 0x6c2000\nbrk(0x6c0000)                           = 0x6c0000\nbrk(0x6e2000)                           = 0x6e2000\nbrk(0x6d2000)                           = 0x6d2000\nbrk(0x6c2000)                           = 0x6c2000\nbrk(0x6c0000)                           = 0x6c0000\n</code></pre>\n\n<p>So, we have memory allocation-deallocation loop here. The only thing we have here using dynamic memory allocation/deallocation is the output string and indeed, if you leave the magic string uncommented, but initialize the string like <code>std::string out = \"1\";</code>, you get the same \"good\" result as with an append to string.</p>\n\n<p>This must be some corner-case in allocation logic, where your usage-unusage pattern triggers glibc to first allocate some memory (a small chunk, thus via <code>brk()</code>) and then release it back to the system. With initialized (statically or appended to) string you have a different usage pattern and glibc can't return memory to the system. If you force glibc to not return any memory (see <a href=\"http://man7.org/linux/man-pages/man3/mallopt.3.html\"><code>man mallopt</code></a>), then the results are the same even with \"bad\" (commented) binary:</p>\n\n<pre><code>$ time MALLOC_TRIM_THRESHOLD_=-1 ./main \n\nreal    0m5.094s\nuser    0m5.096s\nsys     0m0.000s\n</code></pre>\n\n<p>Most probably you won't hit this corner-case in real life. Also, if you're using some different C library (or even different version of glibc), then the results can also be different.</p>\n"}], "owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 2, "accepted_answer_id": 39498572, "answer_count": 1, "score": 4, "last_activity_date": 1473883819, "creation_date": 1473861344, "last_edit_date": 1473876552, "question_id": 39492311, "link": "https://stackoverflow.com/questions/39492311/weird-profiling-results-with-zlib", "title": "Weird profiling results with zlib", "body": "<p>I am playing with <code>zlib</code> and have (simplified) code like this:</p>\n\n<pre><code>#include &lt;cstring&gt;  // memset\n#include &lt;string&gt;\n\n#include &lt;zlib.h&gt;\n\n#include &lt;cstdio&gt;\n\nconst int compressionLevel_ = 9;\nconst size_t BUFFER_SIZE = 1024 * 8;\nchar buffer_[BUFFER_SIZE];\n\nstd::string compress(const char *data, size_t const size){\n    z_stream zs;\n    memset(&amp;zs, 0, sizeof(zs));\n\n    if (deflateInit(&amp;zs, compressionLevel_) != Z_OK)\n        return {};\n\n    zs.next_in  = reinterpret_cast&lt;Bytef *&gt;( const_cast&lt;char *&gt;( data ) );\n    zs.avail_in = static_cast&lt;uInt&gt;( size );\n\n    std::string out;\n\n    int result;\n    do {\n        zs.next_out  = reinterpret_cast&lt;Bytef *&gt;(buffer_);\n        zs.avail_out = BUFFER_SIZE;\n\n        result = deflate(&amp;zs, Z_FINISH);\n\n        if (out.size() &lt; zs.total_out){\n            // COMMENT / UNCOMMENT HERE !!!\n            out.append(buffer_, zs.total_out - out.size() );\n        }\n    } while (result == Z_OK);\n\n    deflateEnd(&amp;zs);\n\n    if (result != Z_STREAM_END)\n        return {};\n\n    return out;\n}\n\n\nint main(){\n    const char *original = \"Hello World\";\n    size_t const original_size = strlen(original);\n\n    for(size_t i = 0; i &lt; 1000000; ++i){\n        const auto cdata = compress(original, original_size);\n    }\n}\n</code></pre>\n\n<p>Real code is bit bigger, because it decompress and check if decompressed string vs original string.</p>\n\n<p>If I compile with clang or gcc, everything executes for about 5 sec.</p>\n\n<p>However... If I comment this line:</p>\n\n<pre><code>        if (out.size() &lt; zs.total_out){\n            // COMMENT / UNCOMMENT HERE !!!\n        //  out.append(buffer_, zs.total_out - out.size() );\n        }\n</code></pre>\n\n<p>Execution takes 30 sec!!!</p>\n\n<p>If I try on fast Linux server, time is respectively 3 sec vs 18 sec.</p>\n\n<p>I tried same on MacOS with clang and there were no big difference in timing.</p>\n\n<p>I tried with different levels of optimization and result persist - if you comment, you get ~ 10x more execution time.</p>\n\n<p>What could be the reason?</p>\n\n<p><strong>Update</strong></p>\n\n<p>I tried on Cygwin with gcc - no difference in timing there.</p>\n\n<p>I tired on Linux Arm CPU with gcc - 25 sec vs 2:20 min.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "edited": false, "score": 0, "creation_date": 1473861668, "post_id": 39492264, "comment_id": 66302366, "body": "what is the value of <code>m_mySqlTableColumnCount</code>?"}, {"owner": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "edited": false, "score": 0, "creation_date": 1473861978, "post_id": 39492264, "comment_id": 66302598, "body": "try implementing <code>columnCount</code> to <code>return QIdentityProxyModel::columnCount()+1;</code>, that way you can avoid errors from assigning erroneous values to your <code>m_mySqlTableColumnCount</code>."}, {"owner": {"reputation": 2748, "user_id": 6165833, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b6bbdd7a7472d52c14da82af5eb6d20?s=128&d=identicon&r=PG&f=1", "display_name": "ymoreau", "link": "https://stackoverflow.com/users/6165833/ymoreau"}, "reply_to_user": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "edited": false, "score": 0, "creation_date": 1473863028, "post_id": 39492264, "comment_id": 66303287, "body": "@Mike That&#39;s what I did at first but some reason my app crashed with an infinite stack of calls to <code>columnCount</code>. I made sure my value is correct using the <code>sourceModelChanged</code> signal, I checked the value and it&#39;s fine, my column count returns the good value."}, {"owner": {"reputation": 2748, "user_id": 6165833, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b6bbdd7a7472d52c14da82af5eb6d20?s=128&d=identicon&r=PG&f=1", "display_name": "ymoreau", "link": "https://stackoverflow.com/users/6165833/ymoreau"}, "reply_to_user": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "edited": false, "score": 0, "creation_date": 1473863063, "post_id": 39492264, "comment_id": 66303318, "body": "Also my header is working well, so I don&#39;t understand why the column content does not."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1473944678, "post_id": 39492264, "comment_id": 66339398, "body": "This question cannot be answered and is off topic without you providing a complete test case that reproduces the issue. <b>The code that you show is correct - I can get it to work without any changes</b>. See <a href=\"http://stackoverflow.com/a/31998748/1329652\">this answer</a> for an example of a self-contained test case for a proxy and a database model."}], "answers": [{"comments": [{"owner": {"reputation": 2748, "user_id": 6165833, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b6bbdd7a7472d52c14da82af5eb6d20?s=128&d=identicon&r=PG&f=1", "display_name": "ymoreau", "link": "https://stackoverflow.com/users/6165833/ymoreau"}, "edited": false, "score": 0, "creation_date": 1473929797, "post_id": 39493780, "comment_id": 66330212, "body": "I tried this at first but it leads to a crash with a huge stack of calls to <code>columnCount()</code>. I didn&#39;t find why, but replacing by <code>return sourceModel() ? (sourceModel()-&gt;columnCount() + 1) : 0;</code> works fine, thx ! It&#39;s still not my problem here, I was updating the m_mySqlTableColumnCount correctly anyway."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1473875974, "last_edit_date": 1473875974, "creation_date": 1473865280, "answer_id": 39493780, "question_id": 39492264, "link": "https://stackoverflow.com/questions/39492264/add-virtual-column-to-qt-sql-model-using-a-proxy/39493780#39493780", "title": "Add virtual column to Qt SQL model using a proxy", "body": "<p>The <code>m_mySqlTableColumnCount</code> member is unnecessary. You'd have to ensure it's always correct by listening to the source model's signals that update the column count. Alas, it's unnecessary. You want to pass the column count request through to the source model:</p>\n\n<pre><code>int MyProxyModel::columnCount(const QModelIndex&amp; parent) const\n{\n    return sourceModel() ? (QIdentityProxyModel::columnCount() + 1) : 0;\n}\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>QVariant MyProxyModel::headerData(int section, Qt::Orientation orientation, int role) const\n{\n    if (section == columnCount()-1 &amp;&amp; \n        orientation == Qt::Horizontal &amp;&amp;\n        role == Qt::DisplayRole) \n    {\n        return tr(\"MyHeader\");\n    }    \n    return QIdentityProxyModel::headerData(section, orientation, role);\n}\n\nQVariant MyProxyModel::data(const QModelIndex &amp;proxyIndex, int role) const\n{\n    if (proxyIndex.column() == columnCount()-1) {\n      qDebug() &lt;&lt; proxyIndex.row() &lt;&lt; proxyIndex.column();\n      ...\n    }\n    return QIdentityProxyModel::data(proxyIndex, role);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9157, "user_id": 1794803, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f3b30f8ee9338ee3d87152343ceb0665?s=128&d=identicon&r=PG", "display_name": "Peregring-lk", "link": "https://stackoverflow.com/users/1794803/peregring-lk"}, "edited": false, "score": 3, "creation_date": 1481242113, "post_id": 39573390, "comment_id": 69309546, "body": "The problem with the identity proxy model, is it assumes the number of columns and rows are the same of the underlying model. So, for example, if you don&#39;t reimplement <code>insertColumn</code>, or <code>sibling</code>, or any method that receives a row row/column integers, it directly calls the <code>sourceModel()</code> equivalent method, without calling first to <code>mapToSource</code>, for example. In your case, it works fine because your extra column is the last one, but in my case, my virtual column is the first one and I had to reimplement almost every method. And how knows if you want to use persistent indexes for your model."}], "tags": [], "owner": {"reputation": 2748, "user_id": 6165833, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b6bbdd7a7472d52c14da82af5eb6d20?s=128&d=identicon&r=PG&f=1", "display_name": "ymoreau", "link": "https://stackoverflow.com/users/6165833/ymoreau"}, "is_accepted": true, "score": 3, "last_activity_date": 1474288641, "creation_date": 1474288641, "answer_id": 39573390, "question_id": 39492264, "link": "https://stackoverflow.com/questions/39492264/add-virtual-column-to-qt-sql-model-using-a-proxy/39573390#39573390", "title": "Add virtual column to Qt SQL model using a proxy", "body": "<p>The view needs to get the <code>QModelIndex</code> objects for the virtual column, so I also needed to override the <code>index</code> function in the proxy :</p>\n\n<pre><code>QModelIndex MyProxyModel::index(int row, int column, const QModelIndex &amp;parent) const\n{\n    if (column == columnCount()-1)\n        return createIndex(row, column);\n\n    return QIdentityProxyModel::index(row, column);\n}\n</code></pre>\n\n<p>I didn't mind the parent because I only have a table (from database), though I do not know how it could be dealt with if needed because createIndex does not allow to specify a parent.</p>\n"}], "owner": {"reputation": 2748, "user_id": 6165833, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b6bbdd7a7472d52c14da82af5eb6d20?s=128&d=identicon&r=PG&f=1", "display_name": "ymoreau", "link": "https://stackoverflow.com/users/6165833/ymoreau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1143, "favorite_count": 1, "accepted_answer_id": 39573390, "answer_count": 2, "score": 3, "last_activity_date": 1474288641, "creation_date": 1473861179, "last_edit_date": 1474279304, "question_id": 39492264, "link": "https://stackoverflow.com/questions/39492264/add-virtual-column-to-qt-sql-model-using-a-proxy", "title": "Add virtual column to Qt SQL model using a proxy", "body": "<p>I display an SQL table in a view using a <strong>QSqlTableModel</strong>.</p>\n\n<p>I want to display an additional status column based on the row data, for that I use a custom <strong>QIdentityProxyModel</strong> where I increase the <em>columnCount</em> and return <em>data</em> for that new virtual column which does not exist in the <strong>QSqlTableModel</strong>.</p>\n\n<pre><code>int MyProxyModel::columnCount(const QModelIndex&amp; parent) const\n{\n    return sourceModel() ? (sourceModel()-&gt;columnCount() + 1) : 0;\n}\n\nQVariant MyProxyModel::headerData(int section, Qt::Orientation orientation, int role) const\n{\n    if (section == columnCount()-1 &amp;&amp; \n        orientation == Qt::Horizontal &amp;&amp;\n        role == Qt::DisplayRole) \n    {\n        return tr(\"MyHeader\");\n    }\n\n    return QIdentityProxyModel::headerData(section, orientation, role);\n}\n\nQVariant MyProxyModel::data(const QModelIndex &amp;proxyIndex, int role) const\n{\n    qDebug() &lt;&lt; \"data \" &lt;&lt; proxyIndex.row() &lt;&lt; proxyIndex.column(); \n    // ...never called for my extra column (== columnCount()-1)\n\n    if (proxyIndex.column() == columnCount()-1 &amp;&amp; role == Qt::DisplayRole)\n        return QString(\"I am virtual\");\n\n    return QIdentityProxyModel::data(proxyIndex, role);\n}\n</code></pre>\n\n<p><strong><em>Edit:</strong> I changed the code for something more simple regarding to the comments. I still have the same problem.</em></p>\n\n<p>My problem is that the view never asks data for my virtual column, it calls <em>data()</em> for all other columns of the actual SQL table but not the last virtual one, what have I missed ?\nAlso, the header data is working well for my extra column, the problem is only with the data. The view draws the extra column, but content is empty (even alternating row background is not painted).\nThx !</p>\n"}, {"tags": ["android", "c++", "visual-studio-2015"], "comments": [{"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "edited": false, "score": 0, "creation_date": 1473861621, "post_id": 39492215, "comment_id": 66302326, "body": "Not enough info: the declaration of <code>fullSentences</code> including its class definition is required. Given that wchar_t is 2bytes on Windows, you can try to replace it by u/int16_t, but there&#39;s no warranty it will work (fullSentences receives a wchar_t buffer and is able to extract something that looks like a std::string)."}, {"owner": {"reputation": 8188, "user_id": 1390192, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2011214205e164fbfd409cf42a0d23c9?s=128&d=identicon&r=PG", "display_name": "tmighty", "link": "https://stackoverflow.com/users/1390192/tmighty"}, "reply_to_user": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "edited": false, "score": 0, "creation_date": 1473861772, "post_id": 39492215, "comment_id": 66302463, "body": "@AdrianColomitchi Thanks, I have added it."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1473862181, "post_id": 39492215, "comment_id": 66302725, "body": "The only portable way to handle unicode strings is to store them in UTF-8 and then convert UTF-8 to wchar_t in code."}, {"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "edited": false, "score": 0, "creation_date": 1473862367, "post_id": 39492215, "comment_id": 66302846, "body": "Are the files you are supposed to read create only by the application running on Android, or are you supposed to be able to read those produced by the Windows version of the app? Reason for asking: seems like Android doesn&#39;t indeed support wchar and, more importantly, wstring - which are used by the sample code. Which means the Android app won&#39;t be able to read those files without a preliminary conversion."}, {"owner": {"reputation": 8188, "user_id": 1390192, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2011214205e164fbfd409cf42a0d23c9?s=128&d=identicon&r=PG", "display_name": "tmighty", "link": "https://stackoverflow.com/users/1390192/tmighty"}, "reply_to_user": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "edited": false, "score": 0, "creation_date": 1473939019, "post_id": 39492215, "comment_id": 66335909, "body": "@AdrianColomitchi I create the data file on Windows, and I was hoping I could use the same file on both Windows and Android."}], "answers": [{"tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": false, "score": 1, "last_activity_date": 1473862459, "last_edit_date": 1495541965, "creation_date": 1473862459, "answer_id": 39492688, "question_id": 39492215, "link": "https://stackoverflow.com/questions/39492215/replacing-wchar-and-wchar-t-with-something-generic/39492688#39492688", "title": "Replacing WCHAR and wchar_t with something generic", "body": "<p>If you want this code to work on Windows and Android builds then you will find that on windows wchar_t is 2 bytes, while on <a href=\"https://stackoverflow.com/questions/5630255/does-android-not-really-have-wchar-t\">android it is 4bytes</a>. So you will not be able to write a file on windows, and later read it properly on android. In such case you would have to use char16_t on android and convert it to 'your \nchoosen' string type under android.</p>\n\n<p>(edit: even better, if you can - make sure all the files are written as utf8 strings)</p>\n\n<p>As for the 'choosen string type' I would suggest to use utf8, so instead of std::wstring use std::string (encoded using utf8). From my experience NDK team was discouraging use of wchar_t from the very begining (missing w* functions from c library etc.) I am not sure how it is now.</p>\n\n<p>I work on a project which was originally coded with MFC, and then ported to android. We used from the very begining a TCHAR macro. Which as you know resolves to char on non unicode builds and to wchar_t on unicode builds. So the idea is to use TCHAR everywhere then under android TCHAR should resolve to char, while on windows use wchar_t (I assume you use unicode build under windows?).</p>\n\n<p>I am not saying this is a best solution to share code between windows and android platform, there are lots of problems like conversions to utf8 on android, these are done with if-defs.</p>\n"}, {"comments": [{"owner": {"reputation": 8188, "user_id": 1390192, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2011214205e164fbfd409cf42a0d23c9?s=128&d=identicon&r=PG", "display_name": "tmighty", "link": "https://stackoverflow.com/users/1390192/tmighty"}, "edited": false, "score": 0, "creation_date": 1473872598, "post_id": 39493298, "comment_id": 66309425, "body": "Do you know if I can use utfcpp both in VS2015 and in Android Studio without having to change any of my code? That would really be cool."}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "reply_to_user": {"reputation": 8188, "user_id": 1390192, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2011214205e164fbfd409cf42a0d23c9?s=128&d=identicon&r=PG", "display_name": "tmighty", "link": "https://stackoverflow.com/users/1390192/tmighty"}, "edited": false, "score": 0, "creation_date": 1473934896, "post_id": 39493298, "comment_id": 66333579, "body": "@tmighty Yes, it is meant to be portable and precisely for keeping your texts in same format on all platforms and for converting to platform specific formats when needed. I have not tried it with VS2015 but it worked with earlier versions of VS."}, {"owner": {"reputation": 8188, "user_id": 1390192, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2011214205e164fbfd409cf42a0d23c9?s=128&d=identicon&r=PG", "display_name": "tmighty", "link": "https://stackoverflow.com/users/1390192/tmighty"}, "edited": false, "score": 0, "creation_date": 1473939138, "post_id": 39493298, "comment_id": 66335981, "body": "Thank you. Could you perhaps explain &quot;Use std::string that contains text in UTF-8-encoding&quot; a little more, perhaps with a sample? That would help me a lot."}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "reply_to_user": {"reputation": 8188, "user_id": 1390192, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2011214205e164fbfd409cf42a0d23c9?s=128&d=identicon&r=PG", "display_name": "tmighty", "link": "https://stackoverflow.com/users/1390192/tmighty"}, "edited": false, "score": 0, "creation_date": 1473977688, "post_id": 39493298, "comment_id": 66358029, "body": "It is like generally with portability, When you use <code>wchar_t</code> or <code>int</code> then it may be is not binary compatible in several senses. When you use <code>uint16_t</code> or <code>int32_t</code> then you may need to fix endianness to achieve binary compatibility. When you use UTF-8 text then you don&#39;t need to do anything to achieve binary compatibility."}], "tags": [], "owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "is_accepted": false, "score": 1, "last_activity_date": 1473864024, "creation_date": 1473864024, "answer_id": 39493298, "question_id": 39492215, "link": "https://stackoverflow.com/questions/39492215/replacing-wchar-and-wchar-t-with-something-generic/39493298#39493298", "title": "Replacing WCHAR and wchar_t with something generic", "body": "<p>Use <code>std::string</code> that contains text in UTF-8 encoding. You may also want some <a href=\"http://utfcpp.sourceforge.net/\" rel=\"nofollow\">lightweight library</a> that helps to deal with checks and conversions of such text. Avoid using <code>wchar_t</code> and <code>std::wstring</code> in code that is meant to be portable.</p>\n"}], "owner": {"reputation": 8188, "user_id": 1390192, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2011214205e164fbfd409cf42a0d23c9?s=128&d=identicon&r=PG", "display_name": "tmighty", "link": "https://stackoverflow.com/users/1390192/tmighty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 414, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1473864024, "creation_date": 1473861017, "last_edit_date": 1473861756, "question_id": 39492215, "link": "https://stackoverflow.com/questions/39492215/replacing-wchar-and-wchar-t-with-something-generic", "title": "Replacing WCHAR and wchar_t with something generic", "body": "<p>I'm trying to convert some VS 2015 C++ code to Android Studio C++ code.</p>\n\n<p>My function looks like this:</p>\n\n<pre><code>int size = 0;\nint len = 0;\nfread(&amp;size,sizeof(int),1,g_File);\n\n#ifdef VERBOSE      \n     printf(\"fullSentences size = %d\\n\",size);\n#endif\n\nint i1 = 0;\nint i2 = 0;\nint i3 = 0;\nfor(int i = 0; i &lt; size; i++)\n{\n    fread(&amp;len,sizeof(int),1,g_File);\n    wchar_t *buff = new WCHAR[len+1];\n    fread(buff,sizeof(WCHAR),len,g_File);\n    buff[len]=0;\n    fread(&amp;i1,sizeof(int),1,g_File);\n    fread(&amp;i2,sizeof(int),1,g_File);\n    fread(&amp;i3,sizeof(int),1,g_File);\n    fullSentences.Add(buff,i1,i2,i3);\n    delete buff;\n\n    #ifdef VERBOSE      \n        FullSentence fs = fullSentences.Content().back();\n        printf(\"%s\\t%d\\t%d\\n\",fs.Text.c_str(),fs.ByteStart,fs.ByteCount);\n    #endif\n}\n</code></pre>\n\n<p>I would like to get rid of the WCHAR and wchar_t in order to make the porting easier.</p>\n\n<p>Can anybody suggestion a replacement for these?\nI would like to avoid having to tell Android Studio what wchar_t is, if possible.</p>\n\n<p>Thank you.</p>\n\n<p>Edit:</p>\n\n<p>Here is the class information:</p>\n\n<pre><code>  //\n// -------------------- clsFullSentences -----------------------------\n//\nvector&lt;FullSentence&gt; &amp;clsFullSentences::Content()\n{\n    return m_content;\n}\nvector&lt;wstring&gt; &amp;clsFullSentences::CleanLower()\n{\n    return m_sCleanLower;\n}\nvoid clsFullSentences::LoadSerializedFullSentences(string uFile)\n{\n    if (!fileExists(stringToWString(uFile)))\n    {\n        DebugBreak();\n    }\n\n    FILE* inFile =  fopen(uFile.c_str(), \"rb\");\n\n    wchar_t signature[2];\n    fread(signature, sizeof(wchar_t), 1, inFile);\n\n    wstring wline;\n\n    //read how many possibleresults we have     \n    getLineW(inFile, wline);\n\n    unsigned int count=_wtoi(wline.c_str());\n\n    for (unsigned int i = 0; i &lt; count; i++)\n    {\n        FullSentence st;\n\n        getLineW(inFile,wline);\n        st.Text = wline;\n\n        //getLineW(inFile,wline);\n        st.Emotion =0;// _wtoi(wline.c_str());\n\n        getLineW(inFile,wline);\n        st.ByteStart = _wtoi(wline.c_str());\n\n        getLineW(inFile,wline);\n        st.ByteCount = _wtoi(wline.c_str());\n\n        m_content.push_back(st);\n    }\n\n    fclose(inFile);\n}\nvoid clsFullSentences::Add(wstring text, int i1, int i2, int i3)\n{\n    FullSentence fs;\n    fs.Text = text;\n    fs.Emotion = i1;\n    fs.ByteStart = i2;\n    fs.ByteCount = i3;\n    m_content.push_back(fs);\n\n    wstring sClean;\n    sClean=StripPuncToLower(text);\n\n    m_sCleanLower.push_back(sClean);\n}\n\nbool getLineW(FILE *inFile, wstring &amp;result)\n{\n    wchar_t data[2] = { 0, 0 };\n\n    result = L\"\";\n    do\n    {\n        fread(data, sizeof(wchar_t), 1, inFile);\n\n        if (data[0] &gt; 0)\n        {\n            if (data[0] != 13)\n            {\n                if (data[0] != 10)\n                {\n                    result += data;\n                }\n                else\n                {\n                    break;//10 is the end of the line\n                }\n            }\n        }\n    } while (!feof(inFile));\n\n    if (result.size() &gt; 0)\n    {\n        return true;\n    }\n    else\n    {\n        return false;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 46515, "user_id": 5647260, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oByMV.jpg?s=128&g=1", "display_name": "Andrew Li", "link": "https://stackoverflow.com/users/5647260/andrew-li"}, "edited": false, "score": 1, "creation_date": 1473860270, "post_id": 39491960, "comment_id": 66301294, "body": "It gets input from the user. It&#39;s a local variable that stores the input then returns it."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1473860401, "post_id": 39491960, "comment_id": 66301390, "body": "I fail to understand what about <code>a</code> is confusing you."}, {"owner": {"reputation": 2024, "user_id": 1268696, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9vs4D.jpg?s=128&g=1", "display_name": "FrankS101", "link": "https://stackoverflow.com/users/1268696/franks101"}, "edited": false, "score": 0, "creation_date": 1473860768, "post_id": 39491960, "comment_id": 66301688, "body": "std::cin is used to get input from the standard input stream, i.e. from the console, and stores the input in the integer variable a. This value is returned as result of the function and printed in the console by std::cout."}, {"owner": {"reputation": 9, "user_id": 6450546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1d19f0832877ff8558d6c6e83c7b9ad?s=128&d=identicon&r=PG&f=1", "display_name": "Autotech", "link": "https://stackoverflow.com/users/6450546/autotech"}, "edited": false, "score": 0, "creation_date": 1473861019, "post_id": 39491960, "comment_id": 66301864, "body": "I have a hard time grasping any sort of programing haha. I was just having trouble understanding what variable &quot;a&quot; was even doing in my program, and i rather just completely understand every little bit of it."}, {"owner": {"reputation": 9, "user_id": 6450546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1d19f0832877ff8558d6c6e83c7b9ad?s=128&d=identicon&r=PG&f=1", "display_name": "Autotech", "link": "https://stackoverflow.com/users/6450546/autotech"}, "reply_to_user": {"reputation": 2024, "user_id": 1268696, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9vs4D.jpg?s=128&g=1", "display_name": "FrankS101", "link": "https://stackoverflow.com/users/1268696/franks101"}, "edited": false, "score": 0, "creation_date": 1473861212, "post_id": 39491960, "comment_id": 66302010, "body": "@FrankS101 thanks that&#39;s really what i was looking for, programing comes pretty hard to me and understanding it even some small code gets confusing at times."}], "answers": [{"tags": [], "owner": {"reputation": 1062, "user_id": 3722896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1844152530/picture?type=large", "display_name": "woockashek", "link": "https://stackoverflow.com/users/3722896/woockashek"}, "is_accepted": false, "score": 0, "last_activity_date": 1473860418, "creation_date": 1473860418, "answer_id": 39492026, "question_id": 39491960, "link": "https://stackoverflow.com/questions/39491960/how-is-a-used-in-my-program/39492026#39492026", "title": "How is &quot;a&quot; used in my program?", "body": "<p>In c++ you have to declare variable (providing the type and name) before it's first use.\n<code>std::cin</code> has to put it's output somewhere and that's why you need this additional variable.</p>\n"}, {"tags": [], "owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "is_accepted": true, "score": 2, "last_activity_date": 1473860710, "creation_date": 1473860710, "answer_id": 39492120, "question_id": 39491960, "link": "https://stackoverflow.com/questions/39491960/how-is-a-used-in-my-program/39492120#39492120", "title": "How is &quot;a&quot; used in my program?", "body": "<p>You declare an uninitialized variable of type <code>int</code> with identifier <code>a</code>:  </p>\n\n<pre><code>int a;\n</code></pre>\n\n<p>The user provides a value to <code>a</code>.  </p>\n\n<pre><code>std::cin &gt;&gt; a;\n</code></pre>\n\n<p>A copy is returned from the function:  </p>\n\n<pre><code>return a;\n</code></pre>\n\n<p>Calls to the <code>getValueFromUser()</code> will create a temporary <code>a</code>,<br>\nassign it to user input, and return it each time.</p>\n"}], "owner": {"reputation": 9, "user_id": 6450546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1d19f0832877ff8558d6c6e83c7b9ad?s=128&d=identicon&r=PG&f=1", "display_name": "Autotech", "link": "https://stackoverflow.com/users/6450546/autotech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 39492120, "answer_count": 2, "score": -5, "last_activity_date": 1473860710, "creation_date": 1473860230, "question_id": 39491960, "link": "https://stackoverflow.com/questions/39491960/how-is-a-used-in-my-program", "title": "How is &quot;a&quot; used in my program?", "body": "<p>new to learning c++ and I was wanting to understand the program ive practiced. I have a section of code I want to understand but im kind of lost.</p>\n\n<pre><code>   #include \"stdafx.h\";\n   #include &lt;iostream&gt;;\n\n   // getValueFromUser will read a value in from the user, and return it to the caller\n   int getValueFromUser()\n   {\n    std::cout &lt;&lt; \"Enter an integer: \";\n    int a;\n    std::cin &gt;&gt; a;\n    return a;\n   }\n\n   int main()\n   {\n     int x = getValueFromUser(); // first call to getValueFromUser\n     int y = getValueFromUser(); // second vall to getValueFromUser\n\n     std::cout &lt;&lt; x &lt;&lt; \" + \" &lt;&lt; y &lt;&lt; \" = \" &lt;&lt; x + y &lt;&lt; std::endl;\n\n     return 0;\n   }\n</code></pre>\n\n<p>Im just wanting to know how \" int a \" comes into play here. If someone could help it would be appreciated.</p>\n"}, {"tags": ["python", "c++", "numpy", "swig"], "answers": [{"tags": [], "owner": {"reputation": 303, "user_id": 1850614, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7e349b8cc3a3a8e6290f9fa489d18567?s=128&d=identicon&r=PG", "display_name": "dcofer", "link": "https://stackoverflow.com/users/1850614/dcofer"}, "is_accepted": false, "score": 0, "last_activity_date": 1473937580, "creation_date": 1473937580, "answer_id": 39509531, "question_id": 39491861, "link": "https://stackoverflow.com/questions/39491861/swig-python-c-output-array-giving-unknown-type-error/39509531#39509531", "title": "SWIG Python C++ output array giving &#39;unknown type&#39; error", "body": "<p>Looks like I did not look closely enough at the answer for this post (<a href=\"https://stackoverflow.com/questions/36222455/swigcpython-passing-and-receiving-c-arrays\">SWIG+c+Python: Passing and receiving c arrays</a>). I did not notice that swig adds the output array to the return list and just wants the size of the array passed in. </p>\n\n<p>I changed the method definition to this:</p>\n\n<pre><code>void grabFrame(int buf_size, unsigned char *buf);\n</code></pre>\n\n<p>and I changed the python call to be this:</p>\n\n<pre><code>buf = grab.grabFrame(np.shape(buf)[0])\n</code></pre>\n\n<p>This now works and returns the array of data I wanted.</p>\n"}], "owner": {"reputation": 303, "user_id": 1850614, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7e349b8cc3a3a8e6290f9fa489d18567?s=128&d=identicon&r=PG", "display_name": "dcofer", "link": "https://stackoverflow.com/users/1850614/dcofer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 385, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1473937580, "creation_date": 1473859962, "question_id": 39491861, "link": "https://stackoverflow.com/questions/39491861/swig-python-c-output-array-giving-unknown-type-error", "title": "SWIG Python C++ output array giving &#39;unknown type&#39; error", "body": "<p>I am trying to use swig to wrap some c++ code to pass a numpy array back to python. I am following some examples I have seen online to use numpy.i. Here is what my code looks like.</p>\n\n<p>I am using this as the function definition in my class header file:</p>\n\n<pre><code>bool grabFrame(int buf_size, unsigned char *buf);\n</code></pre>\n\n<p>In my interface file I have:</p>\n\n<pre><code>/* File : OV4682Interface.i */\n%module OV4682Interface\n%include \"std_string.i\"\n\n%{\n    #define SWIG_FILE_WITH_INIT\n    #include \"OV4682FrameGrabber.h\"\n%}\n\n%include \"numpy.i\"\n%init %{\n    import_array();\n%}\n\n%apply (int DIM1, unsigned char* ARGOUT_ARRAY1) {(int buf_size, unsigned char *buf)};\n\n%include \"../inc/OV4682FrameGrabber.h\"\n</code></pre>\n\n<p>My Python code looks like this:</p>\n\n<pre><code>import numpy as np\nimport OV4682Interface as ov\n\nwidth = 672\nheight = 380\nbuf_size = width*height*2\n\nbuf = np.zeros(buf_size, dtype=np.uint8)\n\ngrab = ov.OV4682FrameGrabber()\ngrab.grabFrame(buf)\n</code></pre>\n\n<p>When I run this I get the following error:</p>\n\n<p>Traceback (most recent call last):\n  File \"OV4682FrameGrabberTest.py\", line 44, in \n    grab.grabFrame(buf)\n  File \"/home/ubuntu/rgb_ir_frame_grabber/build/lib/OV4682Interface.py\", line 117, in grabFrame\n    def grabFrame(self, *args): return _OV4682Interface.OV4682FrameGrabber_grabFrame(self, *args)\nTypeError: Int dimension expected.  'unknown type' given.</p>\n\n<p>For some reason I am getting an error saying the type is unknown for the passed in array, but I have explicitly set the dtype to be np.uint8. I was wondering if anyone can point me to what I am doing incorrectly here as I am a bit stumped.</p>\n"}, {"tags": ["c++", "xcode", "macos", "opencv"], "owner": {"reputation": 1369, "user_id": 4535339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W2Jcx.png?s=128&g=1", "display_name": "burningfuses", "link": "https://stackoverflow.com/users/4535339/burningfuses"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 227, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1473859417, "creation_date": 1473859417, "question_id": 39491657, "link": "https://stackoverflow.com/questions/39491657/opencv-2-4-13-imshow-slow-on-os-x-10-11-6-xcode-c", "title": "OpenCV 2.4.13 imshow() slow on OS X 10.11.6 (Xcode/C++)", "body": "<p>I'm trying to do a simple video playback using OpenCV on OS X 10.11.6, but the performance of imshow() is very bad. I'm getting around 1 fps out of the video, no matter the waitKey() parameter value.</p>\n\n<p>The crazy thing is: I have windows 7 as a VMWare Virtual Machine running on this machine and if I compile and run exactly the same code on this virtualised Windows (running inside the same OS that has bad performance), I get the full frame rate expected (30 FPS). Which means that this is not related to the memory or processing power of my machine (i7, 2.5GHZ, 16GB RAM).</p>\n\n<p>This is the code I'm running</p>\n\n<pre><code>#include &lt;opencv2/opencv.hpp&gt;\nusing namespace cv;\n\nint main(int argc, const char * argv[]) {\n\n  VideoCapture cap(\"/myvideo.mp4\");\n  if(!cap.isOpened())\n    return -1;\n\n  Mat edges;\n  namedWindow(\"edges\",1);\n  for(;;)\n  {\n    Mat frame;\n    cap &gt;&gt; frame;\n    imshow(\"edges\", frame);\n    if(waitKey(30) &gt;= 0) break;\n  }\n  return 0;\n}\n</code></pre>\n\n<p>I've ported this code to python (using the official OpenCV port of python) and the problem persisted. If I run the same python code on this virtualised windows, I get the expected frame rate (30 FPS).</p>\n\n<p>I've read this could be related to VSYNC, but I could not find a way to disable it and test. How can it run faster on a virtualised windows than on the host OS?!</p>\n\n<p>Help is greatly appreciated.</p>\n\n<p>Thank you.</p>\n\n<p>Cassiano</p>\n"}, {"tags": ["android", "c++", "qt", "qapplication"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6309379, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/65wxG.jpg?s=128&g=1", "display_name": "spikeyeddy", "link": "https://stackoverflow.com/users/6309379/spikeyeddy"}, "edited": false, "score": 0, "creation_date": 1473923487, "post_id": 39496487, "comment_id": 66326914, "body": "I have updated the question. The problem was not the <code>widgets</code> module in the .pro file. The problem persists even if the application is completely empty. Check the edited question. Why is the QApplication not created in the main() thread even though there is nothing else?"}], "tags": [], "owner": {"reputation": 5817, "user_id": 4742108, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/GvE0m.jpg?s=128&g=1", "display_name": "Velkan", "link": "https://stackoverflow.com/users/4742108/velkan"}, "is_accepted": false, "score": 0, "last_activity_date": 1473874496, "creation_date": 1473874496, "answer_id": 39496487, "question_id": 39491474, "link": "https://stackoverflow.com/questions/39491474/update-qt-qml-5-6-what-causes-this-warning-qapplication-was-not-created-in/39496487#39496487", "title": "(UPDATE) QT QML 5.6 - What causes this warning &quot;QApplication was not created in the main() thread&quot;?", "body": "<p><code>QApplication</code> depends on the <code>widgets</code> module. Use <code>QGuiApplication</code> instead.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6309379, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/65wxG.jpg?s=128&g=1", "display_name": "spikeyeddy", "link": "https://stackoverflow.com/users/6309379/spikeyeddy"}, "is_accepted": true, "score": 0, "last_activity_date": 1511343202, "last_edit_date": 1511343202, "creation_date": 1473945375, "answer_id": 39512034, "question_id": 39491474, "link": "https://stackoverflow.com/questions/39491474/update-qt-qml-5-6-what-causes-this-warning-qapplication-was-not-created-in/39512034#39512034", "title": "(UPDATE) QT QML 5.6 - What causes this warning &quot;QApplication was not created in the main() thread&quot;?", "body": "<p>found the bug. An unused file was still included in the project (even though not <code>#include</code>ed in the code) and it had a global instance of <code>QTranslator</code>. As it is clear from various other (similar) threads, <code>QApplication</code> should be the first <code>QObject</code> to be initialized in <code>main()</code>. Thats why <code>main()</code> was not in the parent thread because <code>QTranslator</code> was initialized before the execution of <code>main()</code>.</p>\n\n<p>Such a silly mistake took up an entire day. Peace!</p>\n"}], "owner": {"reputation": 11, "user_id": 6309379, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/65wxG.jpg?s=128&g=1", "display_name": "spikeyeddy", "link": "https://stackoverflow.com/users/6309379/spikeyeddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 940, "favorite_count": 0, "accepted_answer_id": 39512034, "answer_count": 2, "score": 0, "last_activity_date": 1511343202, "creation_date": 1473858967, "last_edit_date": 1473923323, "question_id": 39491474, "link": "https://stackoverflow.com/questions/39491474/update-qt-qml-5-6-what-causes-this-warning-qapplication-was-not-created-in", "title": "(UPDATE) QT QML 5.6 - What causes this warning &quot;QApplication was not created in the main() thread&quot;?", "body": "<p>[UPDATE] OK, I am updating my previous question. At first I thought the warning pops up when I remove <code>widgets</code> from the .pro file - which would have been peculiar behavior. After digging down, I ended up with a completely empty application and the problem still persists. My application looks like this:</p>\n\n<pre><code>#include &lt;QApplication&gt;\n\nint main(int argc, char *argv[])\n{\n    QApplication app(argc, argv);\n\n    return app.exec();\n}    \n</code></pre>\n\n<p>Based on other posts with the similar kind of problem, I learnt that <code>QApplication</code>needs to be the first thing to be initialized. In this case there is NOTHING else in the application. How is this warning still popping up?</p>\n\n<p><code>W/ (16992): (null):0 ((null)): WARNING: QApplication was not created in the main() thread.</code></p>\n\n<p>I am compiling the application directly on my Android device using the <code>Android for x86 (GCC 4.9, Qt 5.6.0)</code> kit.</p>\n\n<p>---- OLD QUESTION\\Start ----</p>\n\n<p>Currently developing an Android app based on Qt 5.6 (C++ and QML). As the UI is based on QtQuick, I removed 'widgets' from the pro.file.</p>\n\n<pre><code>QT += core qml quick widgets network svg xml gui    \n</code></pre>\n\n<p>this lead to the warning:</p>\n\n<pre><code>WARNING: QApplication was not created in the main() thread.    \n</code></pre>\n\n<p>and also... as soon as i instantiate QQmlEngine in main() (of course after creating QApplication) this warning is also shown:</p>\n\n<pre><code> QObject: Cannot create children for a parent that is in a different thread.\n(Parent is QQmlDebuggerServiceFactory(0x65fffcd0), parent's thread is QThread(0x5d449f10), current thread is QThread(0x65183000)    \n</code></pre>\n\n<p>Apparently, the application starts in another thread? and main() in another? as soon as I put 'widgets' in the .pro file, both errors did not show up anymore. I dont really get the correlation between the two things. <em>P.S. not really relevant at this stage of the program but i am also not creating any new threads in my application.</em>\nThis is how my main() looks like:</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n   QApplication app(argc, argv);\n\n   qmlRegisterUncreatableType&lt;MainFrame&gt;(\"PSGApp\", 1, 0, \"MainFrame\", \"\");\n\n   MainFrame m_MainFrame;\n   QQmlEngine engine;\n\n   engine.rootContext()-&gt;setContextProperty(\"q_MainFrame\",             &amp;m_MainFrame);\n   engine.rootContext()-&gt;setContextProperty(\"Ctr\",                     m_MainFrame.c());\n   engine.rootContext()-&gt;setContextProperty(\"Dev\",                     m_MainFrame.c()-&gt;dev());\n   engine.rootContext()-&gt;setContextProperty(\"Def\",                     m_MainFrame.c()-&gt;dev()-&gt;_def());\n   engine.rootContext()-&gt;setContextProperty(\"ModelUdpDevices\",         m_MainFrame.UdpDevices());\n   engine.rootContext()-&gt;setContextProperty(\"ModelDashboardDevices\",   m_MainFrame.DashboardDevices());\n   engine.rootContext()-&gt;setContextProperty(\"ModelZones\",              m_MainFrame.c()-&gt;dev()-&gt;_DevZones());\n   engine.rootContext()-&gt;setContextProperty(\"ModelRGParameter\",        m_MainFrame.c()-&gt;dev()-&gt;RegelParameter());\n   engine.rootContext()-&gt;setContextProperty(\"ModelSYSParameter\",       m_MainFrame.c()-&gt;dev()-&gt;SysParameter());\n   engine.rootContext()-&gt;setContextProperty(\"ModelKOMMParameter\",      m_MainFrame.c()-&gt;dev()-&gt;KommParameter());\n\n   QObject::connect(&amp;app, SIGNAL(applicationStateChanged(Qt::ApplicationState)), &amp;m_MainFrame, SLOT(applicationStateChanged(Qt::ApplicationState)));\n   QObject::connect(&amp;engine, SIGNAL(quit()), &amp;app, SLOT(quit()));\n\n   QQmlComponent component(&amp;engine,QUrl(QStringLiteral(\"qrc:/qml/main.qml\")));\n   component.create();\n\n   return app.exec();\n}    \n</code></pre>\n\n<p>---- OLD QUESTION\\End ----</p>\n"}, {"tags": ["android", "c++", "android-studio", "gradle", "android-ndk"], "comments": [{"owner": {"reputation": 4258, "user_id": 1085699, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/4Bql4.jpg?s=128&g=1", "display_name": "Nathaniel Johnson", "link": "https://stackoverflow.com/users/1085699/nathaniel-johnson"}, "edited": false, "score": 0, "creation_date": 1473860705, "post_id": 39491376, "comment_id": 66301634, "body": "<a href=\"https://discuss.gradle.org/t/how-do-i-link-a-c-library-with-another-library-file-that-i-know-the-path-of/7241/3\" rel=\"nofollow noreferrer\">discuss.gradle.org/t/&hellip;</a> <code>.lib</code> and <code>.a</code> are same thing across platform windows and linux"}, {"owner": {"reputation": 550, "user_id": 4475937, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/504db9d0928d993787be5c2a87d0db2b?s=128&d=identicon&r=PG&f=1", "display_name": "Someone", "link": "https://stackoverflow.com/users/4475937/someone"}, "edited": false, "score": 0, "creation_date": 1473960902, "post_id": 39491376, "comment_id": 66349953, "body": "I am not sure if this can help you since it uses the gradle experimental plugin. In the gradle experimental you can directly add a dependency on a static or shared prebuilt library: <a href=\"http://tools.android.com/tech-docs/new-build-system/gradle-experimental#TOC-NDK-Dependencies\" rel=\"nofollow noreferrer\">tools.android.com/tech-docs/new-build-system/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3192, "user_id": 582235, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e223d8b9696861a2ed29be81b74680a3?s=128&d=identicon&r=PG", "display_name": "kynnysmatto", "link": "https://stackoverflow.com/users/582235/kynnysmatto"}, "edited": false, "score": 0, "creation_date": 1478394586, "post_id": 39526670, "comment_id": 68136560, "body": "Thanks, that probably is a perfect answer. The only problem is just that Android Studio just switched to CMake with c++ and this doesn&#39;t help anymore..."}], "tags": [], "owner": {"reputation": 2079, "user_id": 2995941, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/WkMgq.jpg?s=128&g=1", "display_name": "uelordi", "link": "https://stackoverflow.com/users/2995941/uelordi"}, "is_accepted": false, "score": 2, "last_activity_date": 1474013554, "creation_date": 1474013554, "answer_id": 39526670, "question_id": 39491376, "link": "https://stackoverflow.com/questions/39491376/how-do-i-add-a-something-a-library-file-to-my-c-android-gradle-project/39526670#39526670", "title": "How do I add a &quot;something.a&quot; library file to my C++ Android Gradle project?", "body": "<p>It will depend on what gradle version are using, in case of build:gradle-experimental:0.7.3'</p>\n\n<p>In app build.gradle file: </p>\n\n<ul>\n<li><p>Firstly define your library repository </p>\n\n<pre><code>repositories {\n    libs(PrebuiltLibraries) {\n        your_lib {\n           headers.srcDir \"${your_lib_path}/include\"\n           binaries.withType(StaticLibraryBinary) {\n           staticLibraryFile =   file(\"${your_lib_path}/your_library.a\")\n            }\n        }\n  }\n}\n</code></pre></li>\n<li><p>Define your ndk-module</p>\n\n<pre><code>  android.ndk \n  {\n    moduleName = \"your_ndk_module\"\n    platformVersion = 9\n    toolchain \"gcc\"\n    debuggable true\n    cppFlags.add(\"-fexceptions\")\n    cppFlags.add(\"-std=c++11\")\n    stl = \"gnustl_static\" \n  }\n</code></pre></li>\n<li><p>define library sources</p>\n\n<pre><code>android.sources {\n\nmain {\n\n    jni {\n         dependencies {\n                      library \"your_lib\" linkage \"static\"\n             }                  \n        }\n    }\n } \n</code></pre></li>\n<li><p>define your product flavours</p>\n\n<pre><code> android.productFlavors \n   {\n\n\n                create(\"arm\") {\n                    ndk.abiFilters.add(\"armeabi\")\n                    ndk.ldFlags.add(\"-L${file('src/main/jniLibs/armeabi')}\".toString())\n                    ndk.ldLibs.addAll([\"your_lib\"])\n\n                }\n                create(\"arm7\") {\n                    ndk.abiFilters.add(\"armeabi-v7a\")\n                    ndk.ldFlags.add(\"-L${file('src/main/jniLibs/armeabi-v7a')}\".toString())\n                    ndk.ldLibs.addAll([\"your_lib\"])\n\n                }\n                create(\"arm8\") {\n                    ndk.abiFilters.add(\"arm64-v8a\")\n                    ndk.ldFlags.add(\"-L${file('src/main/jniLibs/arm64-v8a')}\".toString())\n                    ndk.ldLibs.addAll([\"your_lib\"])\n                }\n }\n</code></pre></li>\n</ul>\n\n<p>Whole code: </p>\n\n<pre><code>apply plugin: 'com.android.model.application'\n\ndef your_lib_path = file(project(':app').projectDir).absolutePath + \"/your_lib_path\"\nmodel {\n    repositories {\n        libs(PrebuiltLibraries) {\n            your_lib {\n                headers.srcDir \"${your_lib_path}/include\"\n                binaries.withType(StaticLibraryBinary) {\n                    staticLibraryFile = file(\"${your_lib_path}/your_library.a\")\n                }\n            }\n      }\n  }\n  //define your ndk-module: \n  android.ndk {\n       moduleName = \"your_ndk_module\"\n       platformVersion = 9\n       toolchain \"gcc\"\n       debuggable true\n       cppFlags.add(\"-fexceptions\")\n       cppFlags.add(\"-std=c++11\")\n       stl = \"gnustl_static\" // Which STL library to use: gnustl or stlport\n       }\n  //define your android sources\n  android.sources {\n       main {\n           jni {\n               dependencies {\n                   library \"your_lib\" linkage \"static\"\n               }\n           }\n       }\n   }\n\n//define your product flavours: \nandroid.productFlavors {\n        // for detailed abiFilter descriptions, refer to \"Supported ABIs\" @\n        // https://developer.android.com/ndk/guides/abis.html#sa\n        create(\"arm\") {\n            ndk.abiFilters.add(\"armeabi\")\n            ndk.ldFlags.add(\"-L${file('src/main/jniLibs/armeabi')}\".toString())\n            ndk.ldLibs.addAll([\"your_lib\"])\n\n        }\n        create(\"arm7\") {\n            ndk.abiFilters.add(\"armeabi-v7a\")\n            ndk.ldFlags.add(\"-L${file('src/main/jniLibs/armeabi-v7a')}\".toString())\n            ndk.ldLibs.addAll([\"your_lib\"])\n\n        }\n        create(\"arm8\") {\n            ndk.abiFilters.add(\"arm64-v8a\")\n            ndk.ldFlags.add(\"-L${file('src/main/jniLibs/arm64-v8a')}\".toString())\n            ndk.ldLibs.addAll([\"your_lib\"])\n        }\n    }\n\n  }\n</code></pre>\n\n<p>You will have to modify your gradle file according to your gradle version.</p>\n\n<p>Hope, this helps. </p>\n\n<p>Cheers. </p>\n\n<p>Unai.</p>\n"}], "owner": {"reputation": 3192, "user_id": 582235, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e223d8b9696861a2ed29be81b74680a3?s=128&d=identicon&r=PG", "display_name": "kynnysmatto", "link": "https://stackoverflow.com/users/582235/kynnysmatto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1077, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1474013554, "creation_date": 1473858728, "last_edit_date": 1473873799, "question_id": 39491376, "link": "https://stackoverflow.com/questions/39491376/how-do-i-add-a-something-a-library-file-to-my-c-android-gradle-project", "title": "How do I add a &quot;something.a&quot; library file to my C++ Android Gradle project?", "body": "<p>I have a library called <code>somelibrary/lib/c++/armeabi-v7a/libsomelibrary.a</code>. How do I add it to the Gradle files in my Android project?</p>\n\n<p>Obviously the library also contains the headers under <code>somelibrary/include/somelibrary/*.h</code> but that's the easy part because I can just add a line <code>cppFlags.addAll(['-I' + file('somepath/somelibrary/include')])</code> to my <code>build.gradle</code>.</p>\n\n<p>But how do I also add the .a file to the project so that the linking works on all binary formats, not only armeabi-v7a but also arm64-v8a, armeabi and x86? The library contains versions of the .a file for all those binary formats. And in addition to that, it also contains versions for two different c++ standard libraries: \"c++\" and \"gnustl\". I don't have the source code of the library.</p>\n"}, {"tags": ["c++", "c++11", "return", "return-value-optimization"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 1, "creation_date": 1473858674, "post_id": 39491324, "comment_id": 66300171, "body": "Listen to your compiler, don&#39;t do that!"}, {"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1473858757, "post_id": 39491324, "comment_id": 66300232, "body": "&quot;wrong&quot; is only <code>fun_ret_obj1</code>. the warning there is right and the code just works by accident. It should look different if you set <code>a</code> to another value in the destructor"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 2, "creation_date": 1473858882, "post_id": 39491324, "comment_id": 66300326, "body": "You&#39;re also leaking memory after you&#39;re done with <code>a</code> and <code>b</code>. You need <code>delete a;</code> and super weird <code>delete &amp;b;</code>. Avoid such code. If pointer - smart pointer. Otherwise, return by value."}], "answers": [{"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 2, "last_activity_date": 1473858750, "creation_date": 1473858750, "answer_id": 39491383, "question_id": 39491324, "link": "https://stackoverflow.com/questions/39491324/given-are-the-various-ways-to-return-an-object-in-c-what-are-the-potential-is/39491383#39491383", "title": "Given are the Various Ways to return an object in C++, what are the potential Issues with each of these return statements", "body": "<pre><code> myClass&amp; fun_ret_obj1()\n {\n     myClass myObj;\n     return myObj;\n }\n</code></pre>\n\n<p>This creates a local variable on the stack, <code>myObj</code>. And returns a reference to that object. Then the object is destroyed because of it's scope. The moment the caller sees the reference it's referencing a stack object that has been destroyed, using it is undefined behaviour. And thus your compiler warns you about that.</p>\n"}, {"tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 1, "last_activity_date": 1473858782, "creation_date": 1473858782, "answer_id": 39491400, "question_id": 39491324, "link": "https://stackoverflow.com/questions/39491324/given-are-the-various-ways-to-return-an-object-in-c-what-are-the-potential-is/39491400#39491400", "title": "Given are the Various Ways to return an object in C++, what are the potential Issues with each of these return statements", "body": "<p>It's by chance. Your compiler doesn't lie.</p>\n\n<p>Here:</p>\n\n<pre><code>myClass&amp; fun_ret_obj1() {\n    myClass myObj;\n    return myObj;\n}\n</code></pre>\n\n<p>You are returning a reference to an object that is going to be destroyed.<br>\nYou are going to face what is called <em>undefined behavior</em>, it could either works or not.<br>\nIn your case:</p>\n\n<blockquote>\n  <p>the output seems to be fine</p>\n</blockquote>\n\n<p>And it's by chance, of course.</p>\n"}, {"comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 1, "creation_date": 1473859459, "post_id": 39491574, "comment_id": 66300704, "body": "There&#39;s zero difference between memory leaking in the first and second case. Nothing prevents you from doing <code>delete &amp;fun_ret_add()</code>, after all."}, {"owner": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "edited": false, "score": 0, "creation_date": 1473859505, "post_id": 39491574, "comment_id": 66300734, "body": "@Richard Hodges , would you please explain memory  leak, it seems to be working fine at the moment, Also the second one is fine, where could things go wrong, what situations? Appreciate your commets"}, {"owner": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "edited": false, "score": 0, "creation_date": 1473860665, "post_id": 39491574, "comment_id": 66301596, "body": "@Richard Hodges  : In the first example, we are actually returning the object (*ptr) and its pointer goes out of scope after the function call which leads to leak  and  in main  the reference of that object is used . Am i correct?  Why is it not the right practice ?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "edited": false, "score": 0, "creation_date": 1473934149, "post_id": 39491574, "comment_id": 66333178, "body": "@LearningCpp the memory leak occurs because the caller requires special knowledge in order to free the object and its memory (see addendum). It it not good practice precisely because it requires the caller to have special knowledge. Function interfaces should be intuitive and automatically support RAII without any effort on the part of the caller."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1473935542, "post_id": 39491574, "comment_id": 66333951, "body": "@dyp ok, thanks. That makes sense. It would be impossible to do in the case of <code>Foo a, b; return condition() ? a : b;</code>"}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 13, "last_activity_date": 1473935693, "last_edit_date": 1473935693, "creation_date": 1473859212, "answer_id": 39491574, "question_id": 39491324, "link": "https://stackoverflow.com/questions/39491324/given-are-the-various-ways-to-return-an-object-in-c-what-are-the-potential-is/39491574#39491574", "title": "Given are the Various Ways to return an object in C++, what are the potential Issues with each of these return statements", "body": "<p>First one is a memory leak:</p>\n\n<pre><code>myClass&amp; fun_ret_add()\n {\n    myClass *ptr = new myClass();\n    return *ptr;\n }\n</code></pre>\n\n<p>Second one returns a raw pointer (evil - return a std::unique_ptr)</p>\n\n<pre><code> myClass* fun_ret_ptr()\n {\n     myClass *ptr = new myClass();\n     return ptr ;\n }\n</code></pre>\n\n<p>Third one is perfect - returns a copy, which will almost always be elided. <strike>In c++17 it's guaranteed to be elided</strike>. This is efficient and safe.</p>\n\n<pre><code> myClass fun_ret_obj()\n {\n     myClass myObj;\n     return myObj;\n }\n</code></pre>\n\n<p><em>update</em></p>\n\n<p>In c++17 you could guarantee the elision of the copy this way:</p>\n\n<pre><code> myClass fun_ret_obj()\n {\n     return myClass{};\n }\n</code></pre>\n\n<p><em>end of update</em></p>\n\n<p>Fourth one is undefined behaviour. Returning a reference to a non-existent object. Never do this.</p>\n\n<pre><code> myClass&amp; fun_ret_obj1()\n {\n     myClass myObj;\n     return myObj;\n }\n</code></pre>\n\n<h3>regarding memory leaks</h3>\n\n<p>It is true that in the first example, a caller <em>could</em> release the memory if he/she knew that myClass had been allocated with <code>new</code>:</p>\n\n<pre><code>auto&amp; x = fun_ret_add();    // a\n...\ndelete std::addressof(x);   // b\n</code></pre>\n\n<p>This would require:</p>\n\n<ol>\n<li>That the caller <em>knows</em> that fun_ret_add() is implemented in terms of new.</li>\n<li>That the implementation of fun_ret_add() never changes</li>\n<li>That no exceptions occur between (a) and (b)</li>\n</ol>\n\n<p>The second example is similar. In this case, at least there is a hint that the object needs to be deleted, but the caller must still <em>know</em> that the object has been allocated with <code>new</code>, and he must guard against exceptions.</p>\n\n<p>Contrast with this:</p>\n\n<pre><code>std::unique_ptr&lt;myClass&gt; fun_ret_ptr()\n{\n    return std::make_unique&lt;myClass&gt;();\n    // or\n    return { new myClass() };\n    // or\n    return std::unique_ptr&lt;myClass&gt;(new myClass());\n}\n</code></pre>\n\n<p>Now the caller receives a smart pointer. If the caller does nothing but use this pointer, the myClass object will be properly deleted when the pointer goes out of scope, and all memory will be reclaimed.</p>\n"}, {"comments": [{"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1473860023, "post_id": 39491603, "comment_id": 66301117, "body": "Yeah thats why I did not write &quot;never&quot; but while possible it&#39;s unlikely to be used that way."}, {"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1473862103, "post_id": 39491603, "comment_id": 66302669, "body": "Well... yes. But unlikely to do for beginners, who stumble across this question (and not very maintainable for the code too). Added though a mention, that you theoretically could."}], "tags": [], "owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "is_accepted": false, "score": 2, "last_activity_date": 1473862032, "last_edit_date": 1473862032, "creation_date": 1473859285, "answer_id": 39491603, "question_id": 39491324, "link": "https://stackoverflow.com/questions/39491324/given-are-the-various-ways-to-return-an-object-in-c-what-are-the-potential-is/39491603#39491603", "title": "Given are the Various Ways to return an object in C++, what are the potential Issues with each of these return statements", "body": "<p>OK some explanations:</p>\n\n<pre><code> myClass fun_ret_obj()\n {\n     myClass myObj;\n     return myObj;\n }\n</code></pre>\n\n<p>This one simply calls a copy-constructor. Nothing really special here.</p>\n\n<pre><code> myClass* fun_ret_ptr()\n {\n     myClass *ptr = new myClass();\n     return ptr ;\n }\n</code></pre>\n\n<p>This one returns a pointer to a heap allocated object. It will <strong>never</strong> be deleted until you manually delete it. But it's safe to return.</p>\n\n<pre><code> myClass&amp; fun_ret_add()\n {\n    myClass *ptr = new myClass();\n    return *ptr;\n } \n</code></pre>\n\n<p>This one will return a reference to the value. While this is OK. You can not access the pointer <code>ptr</code> anymore and thus not delete the object manually. (OK you still could delete the object but you have to know later that this object was initially created on the heap and not on the stack to not cause any strange errors elsewhere. So this is likely to not get deleted later)</p>\n\n<pre><code> myClass&amp; fun_ret_obj1()\n {\n     myClass myObj;\n     return myObj;\n }\n</code></pre>\n\n<p>This one is <strong>critical</strong>. The moment the function goes out of scope the destructor will be called. (if you set a to a invalid value in the destructor you will see this).</p>\n\n<p>Because the computer is \"smart\" and just says \"this memory can be overwritten when needed\" it gets not \"deleted\" (the destructor gets called though just not the memory location invalidated). So directly accessing the memory afterwards results in what seems like valid behavior. But this is just by <strong>accident</strong>. When you would initialize some variables or have some memory allocations on the stack this would get overwritten and you access strange memory. That's why this is undefined behavior and the compiler warns you here.</p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 4583693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sXls7.png?s=128&g=1", "display_name": "David Larner", "link": "https://stackoverflow.com/users/4583693/david-larner"}, "is_accepted": false, "score": 0, "last_activity_date": 1473931677, "creation_date": 1473931677, "answer_id": 39507532, "question_id": 39491324, "link": "https://stackoverflow.com/questions/39491324/given-are-the-various-ways-to-return-an-object-in-c-what-are-the-potential-is/39507532#39507532", "title": "Given are the Various Ways to return an object in C++, what are the potential Issues with each of these return statements", "body": "<blockquote>\n  <p>myClass fun_ret_obj()\n  {\n      myClass myObj;\n      return myObj;\n  }</p>\n</blockquote>\n\n<p>Looks innocent enough, but under the hood will create two temporaries (invoking the ctor on each, which propagates to ctors of all member objects, and so on...). Then when returning will copy the first temporary to the other before deleting it (invokes its dtor and the dtor of all member objects, and so on...), will then invoke the copy ctor (or assignment operator and those of its member objects, and so on...) for the receiving object in the caller, then delete the second temporary (invoking the dtor and the dtor of all member objects, etc...). Even if myClass and of its all member objects have implemented move semantics this may actually be a very heavy duty operation. Better to pass a reference parameter to the receiving object and perhaps use a POD sentinel (success/fail) as the function return type, or use std::unique_ptr as described perfectly by Richard.</p>\n"}], "owner": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 1, "answer_count": 5, "score": 4, "last_activity_date": 1473935693, "creation_date": 1473858591, "last_edit_date": 1473859078, "question_id": 39491324, "link": "https://stackoverflow.com/questions/39491324/given-are-the-various-ways-to-return-an-object-in-c-what-are-the-potential-is", "title": "Given are the Various Ways to return an object in C++, what are the potential Issues with each of these return statements", "body": "<p>Below is the code which has various return statements and all are working perfectly fine.\nCompiler throws the warning for fun_ret_obj1</p>\n\n<blockquote>\n  <p>Test.cpp: In function \u2018myClass&amp; fun_ret_obj1()\u2019:\n  Test.cpp:45: warning: reference to local variable \u2018myObj\u2019 returned</p>\n</blockquote>\n\n<p>But still the output seems to be fine.Is it by Chance?\nAre there any catches with any of the return statements below?<br>\nExplanation would be really helpful, Thanks</p>\n\n<pre><code>#include &lt;iostream&gt;\n using namespace std;\n\n\n class myClass {\n public:\n int a ;\n myClass()\n {\n   a = 10;\n }\n };\n myClass&amp; fun_ret_add()\n {\n    myClass *ptr = new myClass();\n    return *ptr;\n }\n\n myClass* fun_ret_ptr()\n {\n     myClass *ptr = new myClass();\n     return ptr ;\n }\n\n myClass fun_ret_obj()\n {\n     myClass myObj;\n     return myObj;\n }\n\n myClass&amp; fun_ret_obj1()\n {\n     myClass myObj;\n     return myObj;\n }\n\n\n int main()\n {\n     myClass obj,obj1;\n     std::cout &lt;&lt;\"In Main \\n\";\n\n     myClass *a = fun_ret_ptr();\n     std::cout&lt;&lt;a-&gt;a&lt;&lt;\"\\n\";\n\n     myClass &amp;b = fun_ret_add();\n     std::cout&lt;&lt;b.a&lt;&lt;\"\\n\";\n\n     myClass c = fun_ret_obj();\n     std::cout&lt;&lt;c.a&lt;&lt;\"\\n\";\n\n     myClass d = fun_ret_obj1();\n     std::cout&lt;&lt;d.a&lt;&lt;\"\\n\";\n\n }\n</code></pre>\n"}, {"tags": ["c++", "linux", "multithreading", "sockets", "server"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1473859421, "post_id": 39491203, "comment_id": 66300686, "body": "Is there a specific question you have about this?"}, {"owner": {"reputation": 21, "user_id": 6830974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb5536cbcb96394a8d24710403b63db8?s=128&d=identicon&r=PG&f=1", "display_name": "Erik", "link": "https://stackoverflow.com/users/6830974/erik"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1473859596, "post_id": 39491203, "comment_id": 66300810, "body": "I don&#39;t know why this solution doesn&#39;t work."}, {"owner": {"reputation": 2024, "user_id": 1268696, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9vs4D.jpg?s=128&g=1", "display_name": "FrankS101", "link": "https://stackoverflow.com/users/1268696/franks101"}, "edited": false, "score": 2, "creation_date": 1473865063, "post_id": 39491203, "comment_id": 66304773, "body": "You must be more specific, what exactly does not work?"}], "answers": [{"tags": [], "owner": {"reputation": 1068, "user_id": 2800918, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/77b59723cbffd9e9b6e1e1c8802f579b?s=128&d=identicon&r=PG&f=1", "display_name": "CAB", "link": "https://stackoverflow.com/users/2800918/cab"}, "is_accepted": true, "score": 1, "last_activity_date": 1473863077, "creation_date": 1473863077, "answer_id": 39492917, "question_id": 39491203, "link": "https://stackoverflow.com/questions/39491203/c-thread-for-socket-server/39492917#39492917", "title": "C++ - Thread for socket server", "body": "<p>Your thread runs as a child of main(). When you return from main its child threads are killed, too.</p>\n\n<p>Rather than return, main will have to perform some wait operation of its own, so that it will only exit cleanly when all child threads have completed.</p>\n"}], "owner": {"reputation": 21, "user_id": 6830974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb5536cbcb96394a8d24710403b63db8?s=128&d=identicon&r=PG&f=1", "display_name": "Erik", "link": "https://stackoverflow.com/users/6830974/erik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 601, "favorite_count": 0, "closed_date": 1473901265, "accepted_answer_id": 39492917, "answer_count": 1, "score": -1, "last_activity_date": 1473863077, "creation_date": 1473858241, "last_edit_date": 1473858412, "question_id": 39491203, "link": "https://stackoverflow.com/questions/39491203/c-thread-for-socket-server", "closed_reason": "Not suitable for this site", "title": "C++ - Thread for socket server", "body": "<p>I'm trying to implement a server, which runs in his own thread.\nLater, the server should work together with another thread.\nIs that even possible?</p>\n\n<p>My current attempt to implement this:</p>\n\n<p>main</p>\n\n<pre><code>#include \"EtherServer.h\"\n\nint main(int argc, char *argv[])\n{\n    EtherServer* es = new EtherServer();\n    es-&gt;init();\n    return 0;\n}\n</code></pre>\n\n<p>Server.h</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;pthread.h&gt;\n\n#ifndef ETHERSERVER_H_\n#define ETHERSERVER_H_\n\nclass EtherServer\n{\n    public:\n        bool init();\n        static void* runServer(void *arg);\n        static void sigchld_handler(int s);\n        static void* get_in_addr(struct sockaddr *sa);\n\n        static int s_sockfd;\n\n    private:\n\n};\n\n#endif /* ETHERSERVER_H_ */\n</code></pre>\n\n<p>Server.cpp</p>\n\n<pre><code>#include \"EtherServer.h\"\n\n#define PORT \"31107\"  // the port users will be connecting to\n\n#define BACKLOG 10     // how many pending connections queue will hold\n\nint EtherServer::s_sockfd = 0;\n\nvoid EtherServer::sigchld_handler(int s)\n{\n    // waitpid() might overwrite errno, so we save and restore it:\n    int saved_errno = errno;\n\n    while(waitpid(-1, NULL, WNOHANG) &gt; 0);\n\n    errno = saved_errno;\n}\n\n\n// get sockaddr, IPv4 or IPv6:\nvoid* EtherServer::get_in_addr(struct sockaddr *sa)\n{\n    if (sa-&gt;sa_family == AF_INET) {\n        return &amp;(((struct sockaddr_in*)sa)-&gt;sin_addr);\n    }\n\n    return &amp;(((struct sockaddr_in6*)sa)-&gt;sin6_addr);\n}\n\nbool EtherServer::init()\n{\n    int rv;\n    int yes=1;\n    struct addrinfo hints, *servinfo, *p;\n\n    memset(&amp;hints, 0, sizeof hints);\n    hints.ai_family = AF_UNSPEC;\n    hints.ai_socktype = SOCK_STREAM;\n    hints.ai_flags = AI_PASSIVE; // use my IP\n    if ((rv = getaddrinfo(NULL, PORT, &amp;hints, &amp;servinfo)) != 0) {\n        fprintf(stderr, \"getaddrinfo: %s\\n\", gai_strerror(rv));\n    }\n\n    // loop through all the results and bind to the first we can\n    for(p = servinfo; p != NULL; p = p-&gt;ai_next)\n    {\n        if ((EtherServer::s_sockfd = socket(p-&gt;ai_family, p-&gt;ai_socktype,\n                p-&gt;ai_protocol)) == -1) {\n            perror(\"server: socket\");\n            continue;\n        }\n\n        if (setsockopt(EtherServer::s_sockfd, SOL_SOCKET, SO_REUSEADDR, yes,                      \n            sizeof(int)) == -1) \n        {\n            perror(\"setsockopt\");\n            exit(1);\n        }\n\n        if (bind(EtherServer::s_sockfd, p-&gt;ai_addr, p-&gt;ai_addrlen) == -1) \n        {\n            close(EtherServer::s_sockfd);\n            perror(\"server: bind\");\n            continue;\n        }\n\n        break;\n    }\n\n    freeaddrinfo(servinfo); // all done with this structure\n    if (p == NULL)  {\n        fprintf(stderr, \"server: failed to bind\\n\");\n        exit(1);\n\n    }\n\n    if (listen(EtherServer::s_sockfd, BACKLOG) == -1) {\n        perror(\"listen\");\n        exit(1);\n    }\n\n    struct sigaction sa;\n\n    sa.sa_handler = EtherServer::sigchld_handler;\n    sigemptyset(&amp;sa.sa_mask);\n    sa.sa_flags = 0;\n    if (sigaction(SIGCHLD, &amp;sa, NULL) == -1) {\n        perror(\"sigaction\");\n        exit(1);\n    }\n\n    pthread_attr_t attr_baseb;\n    (void)pthread_attr_init(&amp;attr_baseb);\n    (void)pthread_attr_setdetachstate(&amp;attr_baseb, PTHREAD_CREATE_DETACHED);\n    (void)pthread_create(NULL, &amp;attr_baseb, &amp;runServer, (void *)this);\n}\n\nvoid* EtherServer::runServer(void *arg)\n{\n    int new_fd;  // listen on sock_fd, new connection on new_fd\n    //struct addrinfo hints, *servinfo, *p;\n    struct sockaddr_storage their_addr; // connector's address information\n    socklen_t sin_size;\n    char s[INET6_ADDRSTRLEN];\n\n    printf(\"server: waiting for connections...\\n\");\n\n    while(1) {  // main accept() loop\n        sin_size = sizeof their_addr;\n        sleep(1);\n        new_fd = accept(EtherServer::s_sockfd, (struct sockaddr *)&amp;their_addr, &amp;sin_size);\n        if (new_fd == -1) {\n            perror(\"accept\");\n            continue;\n        }\n\n        inet_ntop(their_addr.ss_family, EtherServer::get_in_addr((struct sockaddr *)&amp;their_addr), s, sizeof s);\n        printf(\"server: got connection from %s\\n\", s);\n\n        if (!fork()) { // this is the child process\n            int n;\n            char buffer[256];\n            bzero(buffer, 256);\n            close(EtherServer::s_sockfd); // child doesn't need the listener\n\n            while (n = read(new_fd, buffer, 255) &gt; 0)\n            {\n\n                if (send(new_fd, buffer, 255, 0) == -1)\n                    perror(\"send\");\n            }\n            close(new_fd);\n            exit(0);\n            sleep(1);\n        }\n        close(new_fd);  // parent doesn't need this\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "ssl", "openssl", "pki", "poco-libraries"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1473866683, "post_id": 39491150, "comment_id": 66305934, "body": "<b><i>Plus One</i></b> for asking this question in the context of a programming problem. You would not believe how many webapp and webmaster questions we get like this..."}], "answers": [{"comments": [{"owner": {"reputation": 903, "user_id": 1303478, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/66aab938a129500e02b4a9f40a6e4eb9?s=128&d=identicon&r=PG", "display_name": "Nj&#229;l Arne Gjermundshaug", "link": "https://stackoverflow.com/users/1303478/nj%c3%a5l-arne-gjermundshaug"}, "edited": false, "score": 0, "creation_date": 1473885705, "post_id": 39494146, "comment_id": 66316166, "body": "Thanks for your research and thoughts so far! Please correct me if I&#39;m wrong - but doesn&#39;t both mine and your tests show that both servers are returning the exact same certificate and chain? Could the different behaviour be related to different cipher suites being used?"}, {"owner": {"reputation": 903, "user_id": 1303478, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/66aab938a129500e02b4a9f40a6e4eb9?s=128&d=identicon&r=PG", "display_name": "Nj&#229;l Arne Gjermundshaug", "link": "https://stackoverflow.com/users/1303478/nj%c3%a5l-arne-gjermundshaug"}, "edited": false, "score": 0, "creation_date": 1473887169, "post_id": 39494146, "comment_id": 66316843, "body": "I added <b>RSA SHA-2 (under SHA-1 Root) Intermediate CA</b> to my PEM file - but I still get the same error when trying to make a handshake against www1."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 903, "user_id": 1303478, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/66aab938a129500e02b4a9f40a6e4eb9?s=128&d=identicon&r=PG", "display_name": "Nj&#229;l Arne Gjermundshaug", "link": "https://stackoverflow.com/users/1303478/nj%c3%a5l-arne-gjermundshaug"}, "edited": false, "score": 0, "creation_date": 1473889669, "post_id": 39494146, "comment_id": 66317815, "body": "@Nj&#229;lArneGjermundshaug - You need the CA with the <b><i>Authority Key identifier</i></b> (Issuer Key) of <i><code>C3:9C:F3:FC:D3:46:08:34:BB:CE:46:7F:A0:7C:5B:F3:E2:08:CB:59</code></i>. You can find it at <b><i><a href=\"http://www.tbs-certificates.co.uk/FAQ/en/geotrust-gv.html\" rel=\"nofollow noreferrer\"><code>RapidSSL SHA256 CA - G3</code></a></i></b>. You don&#39;t need to add it to <code>cacerts.pem</code>. Just use it as the only certificate since that&#39;s the only one that&#39;s needed."}, {"owner": {"reputation": 903, "user_id": 1303478, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/66aab938a129500e02b4a9f40a6e4eb9?s=128&d=identicon&r=PG", "display_name": "Nj&#229;l Arne Gjermundshaug", "link": "https://stackoverflow.com/users/1303478/nj%c3%a5l-arne-gjermundshaug"}, "edited": false, "score": 0, "creation_date": 1473925424, "post_id": 39494146, "comment_id": 66327842, "body": "Tried this      Poco::Net::Context(Poco::Net::Context::CLIENT_USE, &quot;&quot;, &quot;C:\\\\RapidSSLSHA256CA-G3.pem&quot;, &quot;&quot;, Poco::Net::Context::VERIFY_RELAXED, 9, false, &quot;ALL:!ADH:!LOW:!EXP:!MD5:@STRENGTH&quot;);  but this doesn&#39;t work either. The SecureStreamSocket never returns from its constructor.  The objective is to make it work with the cacert.pem file - since I need to invoke other websites as well. And in order to make it work - I guess I need to pinpoint the differences in www1 and www2."}], "tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": false, "score": 4, "last_activity_date": 1473890366, "last_edit_date": 1473890366, "creation_date": 1473866388, "answer_id": 39494146, "question_id": 39491150, "link": "https://stackoverflow.com/questions/39491150/poco-openssl-ca-pem-unacceptable-certificate-error-for-1-out-of-2-identi/39494146#39494146", "title": "Poco + OpenSSL + CA PEM : &quot;Unacceptable certificate&quot; error for 1 out of 2 identical sites", "body": "<blockquote>\n  <p>www1 and www2 should be identically configured - and they both work fine in all browsers...</p>\n</blockquote>\n\n<p>Here are the certificates. A diff shows they are the same end-entity (server) certificate:</p>\n\n<pre><code>$ diff www1.txt www2.txt \n$\n</code></pre>\n\n<p>Each server is could be a sending a different chain. Use <code>openssl s_client</code> with <code>openssl x509</code> and <code>-showcerts</code> to get the chain.</p>\n\n<p><strong><em>www1</em></strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ openssl s_client -connect www1.filemail.com:443 -tls1 -servername www1.filemail.com | openssl x509 -text -noout &gt; www1.txt\ndepth=1 C = US, O = GeoTrust Inc., CN = RapidSSL SHA256 CA - G3\nverify error:num=20:unable to get local issuer certificate\n^C\nriemann:~$ cat www1.txt \nCertificate:\n    Data:\n        Version: 3 (0x2)\n        Serial Number: 15955 (0x3e53)\n    Signature Algorithm: sha256WithRSAEncryption\n        Issuer: C = US, O = GeoTrust Inc., CN = RapidSSL SHA256 CA - G3\n        Validity\n            Not Before: Oct 14 20:14:57 2014 GMT\n            Not After : Aug  4 13:09:28 2018 GMT\n        Subject: OU = GT83551982, OU = See www.rapidssl.com/resources/cps (c)14, OU = Domain Control Validated - RapidSSL(R), CN = *.filemail.com\n        Subject Public Key Info:\n            Public Key Algorithm: rsaEncryption\n                Public-Key: (2048 bit)\n                Modulus:\n                    00:c5:38:89:72:40:74:77:e2:76:f0:20:ae:d9:91:\n                    26:ac:42:85:03:86:ff:2f:a1:94:b7:f3:86:4c:f7:\n                    ce:63:46:47:e6:03:73:95:01:07:0b:e0:60:9a:93:\n                    c3:b4:14:bc:4e:16:f2:50:12:89:11:42:f5:58:51:\n                    74:15:81:d0:ce:6e:e2:85:e8:d2:3a:38:48:a3:02:\n                    80:e0:a1:fa:ea:8f:ca:ee:bc:00:b3:b2:64:7f:9c:\n                    da:ca:e8:3f:a7:48:af:5c:ed:8e:2f:27:95:19:52:\n                    85:d1:15:9b:f5:4d:b7:21:44:89:05:6f:06:92:7b:\n                    ab:9e:10:63:be:7e:ce:3b:58:10:68:ae:7a:52:6e:\n                    e5:62:bf:ff:56:33:06:51:e5:61:a0:bd:6b:3c:c9:\n                    f3:55:54:02:16:f2:56:27:81:be:83:82:53:25:1e:\n                    c4:1c:1d:65:da:9f:2c:f7:97:49:3c:e1:03:35:1c:\n                    da:c3:02:6d:93:1a:4a:89:53:4c:f5:3e:e7:f9:b9:\n                    c0:10:e0:80:77:3a:d9:5d:ed:b1:46:9e:92:7e:86:\n                    46:d7:be:fe:af:5a:af:02:b4:1b:d2:2b:08:1d:bc:\n                    b5:93:8c:48:45:27:ba:26:69:a9:a8:9f:98:d3:de:\n                    2d:f5:70:f5:39:6a:30:3b:8c:01:6c:85:19:a2:a6:\n                    9a:65\n                Exponent: 65537 (0x10001)\n        X509v3 extensions:\n            X509v3 Authority Key Identifier: \n                keyid:C3:9C:F3:FC:D3:46:08:34:BB:CE:46:7F:A0:7C:5B:F3:E2:08:CB:59\n\n            Authority Information Access: \n                OCSP - URI:http://gv.symcd.com\n                CA Issuers - URI:http://gv.symcb.com/gv.crt\n\n            X509v3 Key Usage: critical\n                Digital Signature, Key Encipherment\n            X509v3 Extended Key Usage: \n                TLS Web Server Authentication, TLS Web Client Authentication\n            X509v3 Subject Alternative Name: \n                DNS:*.filemail.com, DNS:filemail.com\n            X509v3 CRL Distribution Points: \n\n                Full Name:\n                  URI:http://gv.symcb.com/gv.crl\n\n            X509v3 Basic Constraints: critical\n                CA:FALSE\n            X509v3 Certificate Policies: \n                Policy: 2.16.840.1.113733.1.7.54\n                  CPS: https://www.rapidssl.com/legal\n\n    Signature Algorithm: sha256WithRSAEncryption\n         77:7e:54:47:93:6c:b0:4e:9c:dc:01:47:1f:76:54:9d:f2:42:\n         94:c1:94:f8:7b:b4:68:82:fe:6d:66:45:68:e1:bd:df:ba:6d:\n         15:a1:6c:b0:79:9e:d7:99:d9:11:7e:84:e9:f1:63:7c:92:25:\n         c3:fe:cc:02:1a:61:b9:a3:29:59:18:c2:f1:d2:d7:84:dc:8d:\n         28:2e:b5:6e:91:d9:68:65:37:5a:b9:b3:d5:f4:d1:1f:b2:ec:\n         2b:0f:e1:50:30:72:f7:04:70:68:26:b0:61:47:44:49:d0:62:\n         31:81:53:fa:cc:3a:7b:a1:3b:74:da:c2:3b:7b:5d:9c:23:de:\n         69:92:51:fc:ff:8d:7a:ea:fd:b2:68:5f:38:3d:22:f6:a6:4a:\n         d7:a0:88:97:06:54:fd:ba:dc:b9:3a:69:25:89:99:0e:81:82:\n         c8:63:5c:87:98:bf:70:08:0a:89:20:a1:17:63:31:26:7b:af:\n         b3:83:f3:9c:b6:7e:64:52:08:bf:a3:74:d5:0c:26:f6:25:7c:\n         b9:cb:27:57:88:7f:af:1c:b5:99:08:4a:fd:c2:b4:ec:7a:40:\n         ea:80:ac:e8:88:84:33:53:ab:90:af:bc:bc:ea:6f:88:fe:a8:\n         f9:c7:63:a3:74:2c:0b:37:5c:90:39:ad:85:82:6a:e9:ea:a7:\n         e1:55:c2:dd\n</code></pre>\n\n<p><strong><em>www2</em></strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ openssl s_client -connect www2.filemail.com:443 -tls1 -servername www2.filemail.com | openssl x509 -text -noout &gt; www2.txt\ndepth=1 C = US, O = GeoTrust Inc., CN = RapidSSL SHA256 CA - G3\nverify error:num=20:unable to get local issuer certificate\n^C\nriemann:~$ cat www2.txt \nCertificate:\n    Data:\n        Version: 3 (0x2)\n        Serial Number: 15955 (0x3e53)\n    Signature Algorithm: sha256WithRSAEncryption\n        Issuer: C = US, O = GeoTrust Inc., CN = RapidSSL SHA256 CA - G3\n        Validity\n            Not Before: Oct 14 20:14:57 2014 GMT\n            Not After : Aug  4 13:09:28 2018 GMT\n        Subject: OU = GT83551982, OU = See www.rapidssl.com/resources/cps (c)14, OU = Domain Control Validated - RapidSSL(R), CN = *.filemail.com\n        Subject Public Key Info:\n            Public Key Algorithm: rsaEncryption\n                Public-Key: (2048 bit)\n                Modulus:\n                    00:c5:38:89:72:40:74:77:e2:76:f0:20:ae:d9:91:\n                    26:ac:42:85:03:86:ff:2f:a1:94:b7:f3:86:4c:f7:\n                    ce:63:46:47:e6:03:73:95:01:07:0b:e0:60:9a:93:\n                    c3:b4:14:bc:4e:16:f2:50:12:89:11:42:f5:58:51:\n                    74:15:81:d0:ce:6e:e2:85:e8:d2:3a:38:48:a3:02:\n                    80:e0:a1:fa:ea:8f:ca:ee:bc:00:b3:b2:64:7f:9c:\n                    da:ca:e8:3f:a7:48:af:5c:ed:8e:2f:27:95:19:52:\n                    85:d1:15:9b:f5:4d:b7:21:44:89:05:6f:06:92:7b:\n                    ab:9e:10:63:be:7e:ce:3b:58:10:68:ae:7a:52:6e:\n                    e5:62:bf:ff:56:33:06:51:e5:61:a0:bd:6b:3c:c9:\n                    f3:55:54:02:16:f2:56:27:81:be:83:82:53:25:1e:\n                    c4:1c:1d:65:da:9f:2c:f7:97:49:3c:e1:03:35:1c:\n                    da:c3:02:6d:93:1a:4a:89:53:4c:f5:3e:e7:f9:b9:\n                    c0:10:e0:80:77:3a:d9:5d:ed:b1:46:9e:92:7e:86:\n                    46:d7:be:fe:af:5a:af:02:b4:1b:d2:2b:08:1d:bc:\n                    b5:93:8c:48:45:27:ba:26:69:a9:a8:9f:98:d3:de:\n                    2d:f5:70:f5:39:6a:30:3b:8c:01:6c:85:19:a2:a6:\n                    9a:65\n                Exponent: 65537 (0x10001)\n        X509v3 extensions:\n            X509v3 Authority Key Identifier: \n                keyid:C3:9C:F3:FC:D3:46:08:34:BB:CE:46:7F:A0:7C:5B:F3:E2:08:CB:59\n\n            Authority Information Access: \n                OCSP - URI:http://gv.symcd.com\n                CA Issuers - URI:http://gv.symcb.com/gv.crt\n\n            X509v3 Key Usage: critical\n                Digital Signature, Key Encipherment\n            X509v3 Extended Key Usage: \n                TLS Web Server Authentication, TLS Web Client Authentication\n            X509v3 Subject Alternative Name: \n                DNS:*.filemail.com, DNS:filemail.com\n            X509v3 CRL Distribution Points: \n\n                Full Name:\n                  URI:http://gv.symcb.com/gv.crl\n\n            X509v3 Basic Constraints: critical\n                CA:FALSE\n            X509v3 Certificate Policies: \n                Policy: 2.16.840.1.113733.1.7.54\n                  CPS: https://www.rapidssl.com/legal\n\n    Signature Algorithm: sha256WithRSAEncryption\n         77:7e:54:47:93:6c:b0:4e:9c:dc:01:47:1f:76:54:9d:f2:42:\n         94:c1:94:f8:7b:b4:68:82:fe:6d:66:45:68:e1:bd:df:ba:6d:\n         15:a1:6c:b0:79:9e:d7:99:d9:11:7e:84:e9:f1:63:7c:92:25:\n         c3:fe:cc:02:1a:61:b9:a3:29:59:18:c2:f1:d2:d7:84:dc:8d:\n         28:2e:b5:6e:91:d9:68:65:37:5a:b9:b3:d5:f4:d1:1f:b2:ec:\n         2b:0f:e1:50:30:72:f7:04:70:68:26:b0:61:47:44:49:d0:62:\n         31:81:53:fa:cc:3a:7b:a1:3b:74:da:c2:3b:7b:5d:9c:23:de:\n         69:92:51:fc:ff:8d:7a:ea:fd:b2:68:5f:38:3d:22:f6:a6:4a:\n         d7:a0:88:97:06:54:fd:ba:dc:b9:3a:69:25:89:99:0e:81:82:\n         c8:63:5c:87:98:bf:70:08:0a:89:20:a1:17:63:31:26:7b:af:\n         b3:83:f3:9c:b6:7e:64:52:08:bf:a3:74:d5:0c:26:f6:25:7c:\n         b9:cb:27:57:88:7f:af:1c:b5:99:08:4a:fd:c2:b4:ec:7a:40:\n         ea:80:ac:e8:88:84:33:53:ab:90:af:bc:bc:ea:6f:88:fe:a8:\n         f9:c7:63:a3:74:2c:0b:37:5c:90:39:ad:85:82:6a:e9:ea:a7:\n         e1:55:c2:dd\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>I am trying to do a SSL handshake towards www1.filemail.com - but I am\n  getting this error:</p>\n\n<pre><code>Unacceptable certificate from 188.138.81.30: application verification failure\n</code></pre>\n</blockquote>\n\n<p><strong><em><code>RapidSSL SHA256 CA - G3</code></em></strong> is a CA; it <strong><em>issued</em></strong> the server's certificate. The server is called the <strong><em>subject</em></strong>. As you work up a chain, the <em>former</em> <strong>issuer</strong> becomes the <em>current</em> <strong>subject</strong>. At the top of the chain is the self signed root. At the root, the <strong>issuer</strong>==<strong>subject</strong>.</p>\n\n<p>The RapidSSL G3 CA is either (1) self-signed, so its a root CA; or (2) signed by another CA higher in the chain, so its a subordinate CA (i.e., it has an <em>issuer</em>). In this case, the G3 CA is a subordinate and it has an issuer.</p>\n\n<p>It sounds like one server is sending the complete chain needed to validate the server's certificate; and the other server is not. Servers are supposed to send the complete chain to avoid the <a href=\"http://www.google.com/search?q=pki+&quot;which+directory&quot;+problem\" rel=\"nofollow\">\"which directory\" problem</a> in PKI. The <em>\"complete chain\"</em> is every certificate <em>except</em> the self-signed root (but many send the root, too).</p>\n\n<p>The client <em>must</em> trust the self-signed root <em>a priori</em>, and its why it should not be sent (otherwise, a bad guy can swap-in his own chain). Or, instead of using <code>cacert.pem</code>:</p>\n\n<pre><code>Poco::Net::Context::CLIENT_USE, \"\", \"\", \"C:\\\\cacert.pem\", ...\n</code></pre>\n\n<p>You can load <strong><em><code>RapidSSL SHA256 CA - G3</code></em></strong> and use that as the root of the trust. You will avoid the other 300 or so CA's in <em><code>cacert.pem</code></em> that are <em>not</em> needed to validate the server chain. Its good security engineering.</p>\n\n<p>You can fetch <strong><em><code>RapidSSL SHA256 CA - G3</code></em></strong> from rapidSSL's site at <a href=\"https://knowledge.rapidssl.com/support/ssl-certificate-support/index?page=content&amp;id=SO26457\" rel=\"nofollow\">Intermediate CA Certificate: RapidSSL with SHA-2 (under SHA-1 Root)</a>.</p>\n\n<hr>\n\n<p><strong><em>UPDATE using RapidSSL SHA256 CA - G3</em></strong>:</p>\n\n<p>Here's the signer's certificate:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ cat rapidssl.pem \n-----BEGIN CERTIFICATE-----\nMIIEJTCCAw2gAwIBAgIDAjp3MA0GCSqGSIb3DQEBCwUAMEIxCzAJBgNVBAYTAlVT\nMRYwFAYDVQQKEw1HZW9UcnVzdCBJbmMuMRswGQYDVQQDExJHZW9UcnVzdCBHbG9i\nYWwgQ0EwHhcNMTQwODI5MjEzOTMyWhcNMjIwNTIwMjEzOTMyWjBHMQswCQYDVQQG\nEwJVUzEWMBQGA1UEChMNR2VvVHJ1c3QgSW5jLjEgMB4GA1UEAxMXUmFwaWRTU0wg\nU0hBMjU2IENBIC0gRzMwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCv\nVJvZWF0eLFbG1eh/9H0WA//Qi1rkjqfdVC7UBMBdmJyNkA+8EGVf2prWRHzAn7Xp\nSowLBkMEu/SW4ib2YQGRZjEiwzQ0Xz8/kS9EX9zHFLYDn4ZLDqP/oIACg8PTH2lS\n1p1kD8mD5xvEcKyU58Okaiy9uJ5p2L4KjxZjWmhxgHsw3hUEv8zTvz5IBVV6s9cQ\nDAP8m/0Ip4yM26eO8R5j3LMBL3+vV8M8SKeDaCGnL+enP/C1DPz1hNFTvA5yT2AM\nQriYrRmIV9cE7Ie/fodOoyH5U/02mEiN1vi7SPIpyGTRzFRIU4uvt2UevykzKdkp\nYEj4/5G8V1jlNS67abZZAgMBAAGjggEdMIIBGTAfBgNVHSMEGDAWgBTAephojYn7\nqwVkDBF9qn1luMrMTjAdBgNVHQ4EFgQUw5zz/NNGCDS7zkZ/oHxb8+IIy1kwEgYD\nVR0TAQH/BAgwBgEB/wIBADAOBgNVHQ8BAf8EBAMCAQYwNQYDVR0fBC4wLDAqoCig\nJoYkaHR0cDovL2cuc3ltY2IuY29tL2NybHMvZ3RnbG9iYWwuY3JsMC4GCCsGAQUF\nBwEBBCIwIDAeBggrBgEFBQcwAYYSaHR0cDovL2cuc3ltY2QuY29tMEwGA1UdIARF\nMEMwQQYKYIZIAYb4RQEHNjAzMDEGCCsGAQUFBwIBFiVodHRwOi8vd3d3Lmdlb3Ry\ndXN0LmNvbS9yZXNvdXJjZXMvY3BzMA0GCSqGSIb3DQEBCwUAA4IBAQCjWB7GQzKs\nrC+TeLfqrlRARy1+eI1Q9vhmrNZPc9ZE768LzFvB9E+aj0l+YK/CJ8cW8fuTgZCp\nfO9vfm5FlBaEvexJ8cQO9K8EWYOHDyw7l8NaEpt7BDV7o5UzCHuTcSJCs6nZb0+B\nkvwHtnm8hEqddwnxxYny8LScVKoSew26T++TGezvfU5ho452nFnPjJSxhJf3GrkH\nuLLGTxN5279PURt/aQ1RKsHWFf83UTRlUfQevjhq7A6rvz17OQV79PP7GqHQyH5O\nZI3NjGFVkP46yl0lD/gdo0p0Vk8aVUBwdSWmMy66S6VdU5oNMOGNX2Esr8zvsJmh\ngP8L8mJMcCaY\n-----END CERTIFICATE-----\n</code></pre>\n\n<p>Notice OpenSSL finished with <strong><em>Verify return code: 2 (unable to get issuer certificate)</em></strong>. That's fine because you don't care about the issuer. You've rooted your trust at <strong><em><code>GeoTrust Inc., CN = RapidSSL SHA256 CA - G3</code></em></strong>, and <strong><em><code>RapidSSL SHA256 CA - G3</code></em></strong> certified/signed the server's certificate.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ openssl s_client -connect www1.filemail.com:443 -tls1 -servername www1.filemail.com -CAfile rapidssl.pem \nCONNECTED(00000003)\ndepth=1 C = US, O = GeoTrust Inc., CN = RapidSSL SHA256 CA - G3\nverify error:num=2:unable to get issuer certificate\nissuer= C = US, O = GeoTrust Inc., CN = GeoTrust Global CA\nServer did acknowledge servername extension.\n---\nCertificate chain\n 0 s:/OU=GT83551982/OU=See www.rapidssl.com/resources/cps (c)14/OU=Domain Control Validated - RapidSSL(R)/CN=*.filemail.com\n   i:/C=US/O=GeoTrust Inc./CN=RapidSSL SHA256 CA - G3\n 1 s:/C=US/O=GeoTrust Inc./CN=RapidSSL SHA256 CA - G3\n   i:/C=US/O=GeoTrust Inc./CN=GeoTrust Global CA\n---\nServer certificate\n-----BEGIN CERTIFICATE-----\nMIIEsDCCA5igAwIBAgICPlMwDQYJKoZIhvcNAQELBQAwRzELMAkGA1UEBhMCVVMx\nFjAUBgNVBAoTDUdlb1RydXN0IEluYy4xIDAeBgNVBAMTF1JhcGlkU1NMIFNIQTI1\nNiBDQSAtIEczMB4XDTE0MTAxNDIwMTQ1N1oXDTE4MDgwNDEzMDkyOFowgZIxEzAR\nBgNVBAsTCkdUODM1NTE5ODIxMTAvBgNVBAsTKFNlZSB3d3cucmFwaWRzc2wuY29t\nL3Jlc291cmNlcy9jcHMgKGMpMTQxLzAtBgNVBAsTJkRvbWFpbiBDb250cm9sIFZh\nbGlkYXRlZCAtIFJhcGlkU1NMKFIpMRcwFQYDVQQDDA4qLmZpbGVtYWlsLmNvbTCC\nASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMU4iXJAdHfidvAgrtmRJqxC\nhQOG/y+hlLfzhkz3zmNGR+YDc5UBBwvgYJqTw7QUvE4W8lASiRFC9VhRdBWB0M5u\n4oXo0jo4SKMCgOCh+uqPyu68ALOyZH+c2sroP6dIr1ztji8nlRlShdEVm/VNtyFE\niQVvBpJ7q54QY75+zjtYEGiuelJu5WK//1YzBlHlYaC9azzJ81VUAhbyVieBvoOC\nUyUexBwdZdqfLPeXSTzhAzUc2sMCbZMaSolTTPU+5/m5wBDggHc62V3tsUaekn6G\nRte+/q9arwK0G9IrCB28tZOMSEUnuiZpqaifmNPeLfVw9TlqMDuMAWyFGaKmmmUC\nAwEAAaOCAVgwggFUMB8GA1UdIwQYMBaAFMOc8/zTRgg0u85Gf6B8W/PiCMtZMFcG\nCCsGAQUFBwEBBEswSTAfBggrBgEFBQcwAYYTaHR0cDovL2d2LnN5bWNkLmNvbTAm\nBggrBgEFBQcwAoYaaHR0cDovL2d2LnN5bWNiLmNvbS9ndi5jcnQwDgYDVR0PAQH/\nBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAnBgNVHREEIDAe\ngg4qLmZpbGVtYWlsLmNvbYIMZmlsZW1haWwuY29tMCsGA1UdHwQkMCIwIKAeoByG\nGmh0dHA6Ly9ndi5zeW1jYi5jb20vZ3YuY3JsMAwGA1UdEwEB/wQCMAAwRQYDVR0g\nBD4wPDA6BgpghkgBhvhFAQc2MCwwKgYIKwYBBQUHAgEWHmh0dHBzOi8vd3d3LnJh\ncGlkc3NsLmNvbS9sZWdhbDANBgkqhkiG9w0BAQsFAAOCAQEAd35UR5NssE6c3AFH\nH3ZUnfJClMGU+Hu0aIL+bWZFaOG937ptFaFssHme15nZEX6E6fFjfJIlw/7MAhph\nuaMpWRjC8dLXhNyNKC61bpHZaGU3Wrmz1fTRH7LsKw/hUDBy9wRwaCawYUdESdBi\nMYFT+sw6e6E7dNrCO3tdnCPeaZJR/P+Neur9smhfOD0i9qZK16CIlwZU/brcuTpp\nJYmZDoGCyGNch5i/cAgKiSChF2MxJnuvs4PznLZ+ZFIIv6N01Qwm9iV8ucsnV4h/\nrxy1mQhK/cK07HpA6oCs6IiEM1OrkK+8vOpviP6o+cdjo3QsCzdckDmthYJq6eqn\n4VXC3Q==\n-----END CERTIFICATE-----\nsubject=/OU=GT83551982/OU=See www.rapidssl.com/resources/cps (c)14/OU=Domain Control Validated - RapidSSL(R)/CN=*.filemail.com\nissuer=/C=US/O=GeoTrust Inc./CN=RapidSSL SHA256 CA - G3\n---\nNo client certificate CA names sent\nServer Temp Key: ECDH, P-521, 521 bits\n---\nSSL handshake has read 2834 bytes and written 338 bytes\nVerification error: unable to get issuer certificate\n---\nNew, SSLv3, Cipher is ECDHE-RSA-AES256-SHA\nServer public key is 2048 bit\nSecure Renegotiation IS supported\nCompression: NONE\nExpansion: NONE\nNo ALPN negotiated\nSSL-Session:\n    Protocol  : TLSv1\n    Cipher    : ECDHE-RSA-AES256-SHA\n    Session-ID: 27390000AF3638FDEA75DDF52B9D937F290593304123134062F049306BBDE87F\n    Session-ID-ctx: \n    Master-Key: E8E2613F6267C705CA82EEE4C8A992880A2ABDA9E8D477A10C952764B1F4DD3D39244D3F0AD915B8FEB7E5FA1E8D55FD\n    PSK identity: None\n    PSK identity hint: None\n    SRP username: None\n    Start Time: 1473889933\n    Timeout   : 7200 (sec)\n    Verify return code: 2 (unable to get issuer certificate)\n    Extended master secret: yes\n----\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 903, "user_id": 1303478, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/66aab938a129500e02b4a9f40a6e4eb9?s=128&d=identicon&r=PG", "display_name": "Nj&#229;l Arne Gjermundshaug", "link": "https://stackoverflow.com/users/1303478/nj%c3%a5l-arne-gjermundshaug"}, "is_accepted": true, "score": 2, "last_activity_date": 1474131902, "last_edit_date": 1495535244, "creation_date": 1474131902, "answer_id": 39549517, "question_id": 39491150, "link": "https://stackoverflow.com/questions/39491150/poco-openssl-ca-pem-unacceptable-certificate-error-for-1-out-of-2-identi/39549517#39549517", "title": "Poco + OpenSSL + CA PEM : &quot;Unacceptable certificate&quot; error for 1 out of 2 identical sites", "body": "<p><a href=\"https://stackoverflow.com/users/2053585/g%C3%BCnter-obiltschnig\">G\u00fcnter Obiltschnig</a>   helped  me out via POCO@Github and got it working by replacing</p>\n\n<pre><code>Poco::Net::SecureStreamSocket ss(Poco::Net::SocketAddress(uri.getHost().c_str(), uri.getPort()));\n</code></pre>\n\n<p>with</p>\n\n<pre><code>Poco::Net::SecureStreamSocket ss(Poco::Net::SocketAddress(uri.getHost().c_str(), uri.getPort()), uri.getHost());\n</code></pre>\n\n<p>(including the host name in the constructor of SecureStreamSocket - it is used for certificate verification)</p>\n\n<p>From the POCO documentation:</p>\n\n<pre><code>SecureStreamSocket(\n    const SocketAddress &amp; address,\n    const std::string &amp; hostName\n);\n\n//Creates a secure stream socket using the default client SSL context and connects it to the socket specified by address.\n//The given host name is used for certificate verification &lt;=======\n</code></pre>\n\n<p>I still do not know the exact difference in config between www1 and www2 are, would love if someone could enlighten me on this.</p>\n"}], "owner": {"reputation": 903, "user_id": 1303478, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/66aab938a129500e02b4a9f40a6e4eb9?s=128&d=identicon&r=PG", "display_name": "Nj&#229;l Arne Gjermundshaug", "link": "https://stackoverflow.com/users/1303478/nj%c3%a5l-arne-gjermundshaug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1191, "favorite_count": 0, "accepted_answer_id": 39549517, "answer_count": 2, "score": 10, "last_activity_date": 1474599011, "creation_date": 1473858103, "last_edit_date": 1474599011, "question_id": 39491150, "link": "https://stackoverflow.com/questions/39491150/poco-openssl-ca-pem-unacceptable-certificate-error-for-1-out-of-2-identi", "title": "Poco + OpenSSL + CA PEM : &quot;Unacceptable certificate&quot; error for 1 out of 2 identical sites", "body": "<p>I am trying to do a SSL handshake with <code>www1.filemail.com</code>. I am using cURL's <a href=\"https://curl.haxx.se/ca/cacert.pem\"><code>cacert.pem</code></a>, but I am getting this error:</p>\n\n<pre><code>Unacceptable certificate from 188.138.81.30: application verification failure\n</code></pre>\n\n<p>Making the handshake against any other HTTPS website works - including <code>www2.filemail.com</code>. <code>www1</code> and <code>www2</code> should be identically configured - and they both work fine in all browsers. They also test fine here (identical certificates and intermediary certificates are sent out for both sites):</p>\n\n<ul>\n<li><a href=\"https://www.ssllabs.com/ssltest/analyze.html?d=www1.filemail.com\">SSL Labs www1.filemail.com</a></li>\n<li><a href=\"https://www.ssllabs.com/ssltest/analyze.html?d=www2.filemail.com\">SSL Labs www2.filemail.com</a></li>\n</ul>\n\n<p>Why am I getting this problem with <code>www1</code> using OpenSSL and the <code>cacert.pem</code> file?</p>\n\n<p><strong>There has to be a difference in the certificate setup of www1 and www2.</strong> I have tested with a myriad of tools (openssl, ssllabs etc.) to try to pinpoint the difference - but I always get the exact same results for both sites (except when running my code)</p>\n\n<p><strong>What am I missing here? What's the difference between the sites?</strong></p>\n\n<p>(It should be noted that we are using a relatively cheap wildcard certificate provided by RapidSSL - so I'm guessing it has something to do with intermediate or cross-root certificates - but everything seems to be in order when testing with the tools mentioned above.)</p>\n\n<hr>\n\n<p>Code:</p>\n\n<pre><code>Poco::SharedPtr&lt;Poco::Net::InvalidCertificateHandler&gt; pCert = new Poco::Net::ConsoleCertificateHandler(false);\nPoco::Net::Context::Ptr pContext = new Poco::Net::Context(Poco::Net::Context::CLIENT_USE, \"\", \"\", \"C:\\\\cacert.pem\", Poco::Net::Context::VERIFY_RELAXED, 9, false, \"ALL:!ADH:!LOW:!EXP:!MD5:@STRENGTH\");\nPoco::Net::SSLManager::instance().initializeClient(0, pCert, pContext);\n\nURI uri(\"https://www1.filemail.com\");\nPoco::Net::SecureStreamSocket ss(Poco::Net::SocketAddress(uri.getHost().c_str(), uri.getPort()));\nss.completeHandshake();\n</code></pre>\n"}, {"tags": ["c++", "debugging", "ms-access", "portable-executable", "pe-exports"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1473860303, "post_id": 39491068, "comment_id": 66301320, "body": "Exporting data is a supported scenario.  And necessary in this case, nothing special here."}], "answers": [{"tags": [], "owner": {"reputation": 552, "user_id": 6500775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6ce0d9d9a1e41be439a231c5674e5298?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv", "link": "https://stackoverflow.com/users/6500775/aviv"}, "is_accepted": true, "score": 1, "last_activity_date": 1478535172, "last_edit_date": 1495542651, "creation_date": 1478535172, "answer_id": 40469650, "question_id": 39491068, "link": "https://stackoverflow.com/questions/39491068/entries-that-are-not-functions-in-pe-exports-table/40469650#40469650", "title": "Entries that are not functions in PE exports table", "body": "<p>Export entries does not have to be functions.\nYou can take a look at my stackoverflow thread: <a href=\"https://stackoverflow.com/questions/40338682/pe-distinguish-data-from-function-export\">PE - Distinguish data from function export</a></p>\n\n<p>The conclusion was clear, data can be exported from a PE file as well.\nThere is no perfect way to distinguish the two from one another, but some heuristics and runtime operations can help you in this issue.\nRefer to my above post for further details (also read the comments).</p>\n"}, {"tags": [], "owner": {"reputation": 562, "user_id": 3164900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ts8qL.jpg?s=128&g=1", "display_name": "Muhammad Hashim Shafiq", "link": "https://stackoverflow.com/users/3164900/muhammad-hashim-shafiq"}, "is_accepted": false, "score": 2, "last_activity_date": 1506327280, "creation_date": 1506327280, "answer_id": 46400472, "question_id": 39491068, "link": "https://stackoverflow.com/questions/39491068/entries-that-are-not-functions-in-pe-exports-table/46400472#46400472", "title": "Entries that are not functions in PE exports table", "body": "<p><strong>NumberOfFunctions</strong>\nTotal number of functions/symbols that are exported by this module.</p>\n\n<p><strong>NumberOfNames</strong>\nNumber of functions/symbols that are exported by name. This value is not the number of ALL functions/symbols in the module. For that number, you need to check NumberOfFunctions. This value can be 0. In that case, the module may export by ordinal only. If there is no function/symbol to be exported in the first case, the RVA of the export table in the data directory will be 0.</p>\n\n<p>From the above we conclude that  the ordinal table lists only the number of exports that actually have a name.</p>\n\n<p>Source: <a href=\"http://win32assembly.programminghorizon.com/pe-tut7.html\" rel=\"nofollow noreferrer\">http://win32assembly.programminghorizon.com/pe-tut7.html</a></p>\n"}], "owner": {"reputation": 820, "user_id": 6738868, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/397e086cc8a23d159aa5dd1ea4ff159e?s=128&d=identicon&r=PG&f=1", "display_name": "sborpo", "link": "https://stackoverflow.com/users/6738868/sborpo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 732, "favorite_count": 1, "accepted_answer_id": 40469650, "answer_count": 2, "score": 3, "last_activity_date": 1506327280, "creation_date": 1473857902, "last_edit_date": 1473868659, "question_id": 39491068, "link": "https://stackoverflow.com/questions/39491068/entries-that-are-not-functions-in-pe-exports-table", "title": "Entries that are not functions in PE exports table", "body": "<p>I've looked at an export table of a specific DLL and Iv'e seen some strange entries in the table so I tried to find an answer to this issue in the pecoff specification and didn't find any and I hope that someone maybe have one.</p>\n\n<p>I ran a dumpbin on a certain DLL (Qt5Core.dll) and found that the exports table have entries that are <strong>not functions</strong> - > there are entries that their addresses point to the .data section and the .rdata sections...\nfor example:</p>\n\n<p>const QAbstractState::`vftable' 67366E0C 1470\nQMetaObject const QEventTransition::staticMetaObject 673C15A8 6160\nQCoreApplication * QCoreApplication::self 6746180C 5504</p>\n\n<p>It seems like some c++ variables and I wondered why are they in the exports table? \nThanks!</p>\n"}, {"tags": ["c++", "windows", "input", "unicode", "keyboard"], "comments": [{"owner": {"reputation": 1841, "user_id": 2441080, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/970d820e4798029e9c18d7bcc97eebf8?s=128&d=identicon&r=PG", "display_name": "realUser404", "link": "https://stackoverflow.com/users/2441080/realuser404"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1473859003, "post_id": 39491038, "comment_id": 66300403, "body": "@HansPassant The &quot;MAJ&quot; information is contained in the uKeyBoardState! ToUnicodeEx uses it to know if other keys are pressed, as MAJ, ALT, CTRL..."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1473859611, "post_id": 39491038, "comment_id": 66300824, "body": "Best to avoid French on an English website, we say &quot;shift&quot; around here.  The GetKeyboardState() is very strange, you&#39;ll retrieve the buffered keyboard state of your own process.  If you don&#39;t otherwise pump a message loop then it gets never updated.  Looks like you patched around that problem by using GetAsyncKeyState() but that isn&#39;t correct either since that doesn&#39;t necessarily match the keyboard state of the process you are trying to poke.  Using UI Automation is always best to sail around trouble like this."}, {"owner": {"reputation": 1841, "user_id": 2441080, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/970d820e4798029e9c18d7bcc97eebf8?s=128&d=identicon&r=PG", "display_name": "realUser404", "link": "https://stackoverflow.com/users/2441080/realuser404"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1473859843, "post_id": 39491038, "comment_id": 66300985, "body": "Oups sorry about Shift, going to edit that right away"}, {"owner": {"reputation": 1841, "user_id": 2441080, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/970d820e4798029e9c18d7bcc97eebf8?s=128&d=identicon&r=PG", "display_name": "realUser404", "link": "https://stackoverflow.com/users/2441080/realuser404"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1473860320, "post_id": 39491038, "comment_id": 66301338, "body": "@HansPassant Are you saying that with GetAsyncKeyState I may be retrieving Inputs that are not meant to be for the app? How can I get the updated KeyBoardState otherwise?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1473860778, "post_id": 39491038, "comment_id": 66301694, "body": "It requires SetWindowsHookEx() to set a WH_KEYBOARD.  Programmers tend to get pretty ticked-off when I mention that.  Deservedly :)"}, {"owner": {"reputation": 1841, "user_id": 2441080, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/970d820e4798029e9c18d7bcc97eebf8?s=128&d=identicon&r=PG", "display_name": "realUser404", "link": "https://stackoverflow.com/users/2441080/realuser404"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1474276896, "post_id": 39491038, "comment_id": 66448984, "body": "I edited the question in order to get answers related to the &quot;&gt;&quot; not displaying problem"}, {"owner": {"reputation": 12697, "user_id": 4994021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159a6a0bd0b0b5ab92e0dc66d936cc7c?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Brittain", "link": "https://stackoverflow.com/users/4994021/peter-brittain"}, "edited": false, "score": 0, "creation_date": 1474322665, "post_id": 39491038, "comment_id": 66475493, "body": "I suspect that your issue is that shift and caps lock are not the same thing.  If you want to emulate the pressing of the shift key, you need to set the VK_SHIFT index in uKeyboardState, not VK_CAPITAL."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1474345821, "post_id": 39491038, "comment_id": 66481101, "body": "The caps lock key only effects letter keys (a &#39;1&#39; is a &#39;1&#39; whether caps is on or not).  The shift key effects pretty much all keys."}, {"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1474355526, "post_id": 39491038, "comment_id": 66484985, "body": "It should be VK_OEM_102 for &lt; and VK_OEM_102 + VK_SHIFT for &gt; at least for a standard french keybord layout."}, {"owner": {"reputation": 1841, "user_id": 2441080, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/970d820e4798029e9c18d7bcc97eebf8?s=128&d=identicon&r=PG", "display_name": "realUser404", "link": "https://stackoverflow.com/users/2441080/realuser404"}, "reply_to_user": {"reputation": 12697, "user_id": 4994021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159a6a0bd0b0b5ab92e0dc66d936cc7c?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Brittain", "link": "https://stackoverflow.com/users/4994021/peter-brittain"}, "edited": false, "score": 0, "creation_date": 1474358826, "post_id": 39491038, "comment_id": 66486833, "body": "Indeed, I realized my mistake (VK_CAPITAL instead of VK_SHIFT) just after adding the bounty. Weird thing is VK_CAPITAL works for EVERY other key on my french keyboard, but this one. @PeterBrittain can you post an answer so I can award the bounty?"}, {"owner": {"reputation": 12697, "user_id": 4994021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159a6a0bd0b0b5ab92e0dc66d936cc7c?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Brittain", "link": "https://stackoverflow.com/users/4994021/peter-brittain"}, "edited": false, "score": 0, "creation_date": 1474360497, "post_id": 39491038, "comment_id": 66487847, "body": "Thanks.  I&#39;ve added the answer.  Please let me know if you think there&#39;s anything I can more usefully add..."}], "answers": [{"tags": [], "owner": {"reputation": 12697, "user_id": 4994021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159a6a0bd0b0b5ab92e0dc66d936cc7c?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Brittain", "link": "https://stackoverflow.com/users/4994021/peter-brittain"}, "is_accepted": false, "score": 0, "last_activity_date": 1474360471, "creation_date": 1474360471, "answer_id": 39589283, "question_id": 39491038, "link": "https://stackoverflow.com/questions/39491038/tounicodeex-not-printing-greater-than/39589283#39589283", "title": "ToUnicodeEx not printing &quot;Greater Than&quot;", "body": "<p>The problem is that <code>shift</code> and <code>caps lock</code> do not have the same effect on a keyboard.  For example, (on a UK keyboard) pressing <code>shift+1</code> = <code>!</code>, but pressing <code>1</code> with caps lock on still give you <code>1</code>.</p>\n\n<p>Your code currently treats them the same, though, and it is using <code>VK_CAPITAL</code> in both cases.  This will give you the same effect as if caps lock were on, which is not what you want in this case.</p>\n\n<p>The solution is therefore to break out your logic and use <code>VK_SHIFT</code> when you really want shift to be pressed and <code>VK_CAPITAL</code> when you want caps lock to be active.</p>\n"}], "owner": {"reputation": 1841, "user_id": 2441080, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/970d820e4798029e9c18d7bcc97eebf8?s=128&d=identicon&r=PG", "display_name": "realUser404", "link": "https://stackoverflow.com/users/2441080/realuser404"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474360471, "creation_date": 1473857837, "last_edit_date": 1474276622, "question_id": 39491038, "link": "https://stackoverflow.com/questions/39491038/tounicodeex-not-printing-greater-than", "title": "ToUnicodeEx not printing &quot;Greater Than&quot;", "body": "<p>I wrote a function which processes the user keyboard in order to write text in an app.</p>\n\n<p>In order to do that I use the <strong>ToUnicodeEx</strong> function which uses an array of Key states.\nThe function is working perfectly fine for every possible input, except for one : I cannot display the \">\" sign, which is supposed to be the combination of \"SHIFT + &lt;\" : it displays the \"&lt;\" sign instead, as if the SHIFT key was not pressed, whereas it knows it it pressed.</p>\n\n<p>Has somebody already experienced the same and knows what the problem is?</p>\n\n<p>You will find my function code below : </p>\n\n<pre><code>    void MyFunction(bool bCapsLockDown)\n    {\n        IOClass io = GetMyIOInstance();\n        HKL layout = GetKeyboardLayout( 0 );\n        uchar uKeyboardState[256];\n        WCHAR oBuffer[5] = {};\n\n        //Initialization of KeyBoardState\n        for (uint i = 0; i &lt; 256; ++i)\n        {\n             uKeyBoardState[i] = 0;\n        }\n\n        // Use of my ConsultKeyState to get the status of pressed keys\n        if ( ConsultKeyState( VK_SHIFT ) || bCapsLockDown )\n        {\n            uKeyboardState[VK_CAPITAL] = 0xff;\n        }\n        if ( ConsultKeyState( VK_CONTROL ) )\n        {\n            uKeyboardState[VK_CONTROL] = 0xff;\n        }\n        if ( ConsultKeyState( VK_MENU ) )\n        {\n            uKeyboardState[VK_MENU] = 0xff;\n        }\n        if ( ConsultKeyState( VK_RMENU ) )\n        {\n            uKeyboardState[VK_MENU] = 0xff;\n            uKeyboardState[VK_CONTROL] = 0xff;\n        }\n\n        for ( uint iVK = 0; iVK &lt; 256; ++iVK )\n        {\n            bool bKeyDown = ConsultKeyState( iVK ) != 0;\n            uint iSC = MapVirtualKeyEx( iVK, MAPVK_VK_TO_VSC, layout );\n\n            bool bKeyAlreadyDown = io.KeysDown[iVK];\n\n            io.KeysDown[iVK] = bKeyDown;\n\n            if ( io.KeysDown[iVK] &amp;&amp; bKeyAlreadyDown == false )\n            {\n                int iRet = ToUnicodeEx( iVK, iSC, uKeyboardState, (LPWSTR)oBuffer, 4, 0, layout );\n                if( iRet &gt; 0 &amp;&amp; (iswgraph( (unsigned short) oBuffer[0] ) || oBuffer[0] == ' ') )\n                    io.AddInputCharacter( (unsigned short) oBuffer[0] );\n            }\n        }\n    }\n</code></pre>\n\n<p><strong>Edit :</strong> \nTo summarize, my question is : \nWhat would be the good combination VirtualKey + KeyBoardState to get a \">\" displayed?</p>\n"}, {"tags": ["c++", "g++", "c++14"], "comments": [{"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 3, "creation_date": 1473857733, "post_id": 39490912, "comment_id": 66299499, "body": "Seems to be a bug. clang and gcc up to and including 5 report this warning."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 1, "creation_date": 1473857735, "post_id": 39490912, "comment_id": 66299500, "body": "@AlgirdasPreid\u017eius return (c) does indeed return a reference."}, {"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 2, "creation_date": 1473857764, "post_id": 39490912, "comment_id": 66299524, "body": "you can check several compiler version for this here: <a href=\"http://gcc.godbolt.org/\" rel=\"nofollow noreferrer\">gcc.godbolt.org</a>"}, {"owner": {"reputation": 1062, "user_id": 3722896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1844152530/picture?type=large", "display_name": "woockashek", "link": "https://stackoverflow.com/users/3722896/woockashek"}, "reply_to_user": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1473858341, "post_id": 39490912, "comment_id": 66299940, "body": "@Hayt thanks for the link! Indeed it looks like gcc 6.1 introduced this bug."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1473858452, "post_id": 39490912, "comment_id": 66300017, "body": "@woockashek 6.2 seems to work instead."}, {"owner": {"reputation": 3740, "user_id": 1030870, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8f96f7ac4f0bf4c2421a9f58b6893400?s=128&d=identicon&r=PG", "display_name": "Mine", "link": "https://stackoverflow.com/users/1030870/mine"}, "edited": false, "score": 0, "creation_date": 1473858763, "post_id": 39490912, "comment_id": 66300234, "body": "On my compiler, both gcc and clang gives warning on both functions."}, {"owner": {"reputation": 1062, "user_id": 3722896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1844152530/picture?type=large", "display_name": "woockashek", "link": "https://stackoverflow.com/users/3722896/woockashek"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1473858935, "post_id": 39490912, "comment_id": 66300357, "body": "@skypjack no it doesn&#39;t, still produces only one warning - there sould be two.  Is there any person allowed to file a bug in gcc bugzilla? It looks like creating accounts on <a href=\"https://gcc.gnu.org/bugzilla\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla</a> is restricted."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1473859107, "post_id": 39490912, "comment_id": 66300466, "body": "@woockashek <a href=\"https://godbolt.org/g/z91SFq\" rel=\"nofollow noreferrer\">It produces two warnings indeed</a>."}, {"owner": {"reputation": 1062, "user_id": 3722896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1844152530/picture?type=large", "display_name": "woockashek", "link": "https://stackoverflow.com/users/3722896/woockashek"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 1, "creation_date": 1473859549, "post_id": 39490912, "comment_id": 66300766, "body": "@skypjack only from O2+ - probably just because it removes unneed 1==1 compatition"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1473859791, "post_id": 39490912, "comment_id": 66300942, "body": "@woockashek Oh, interesting, I didn&#39;t notice it. Well, more information to be added to the issue you are opening, right? :-)"}, {"owner": {"reputation": 1062, "user_id": 3722896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1844152530/picture?type=large", "display_name": "woockashek", "link": "https://stackoverflow.com/users/3722896/woockashek"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1473860953, "post_id": 39490912, "comment_id": 66301820, "body": "@skypjack I&#39;ve tried but I coudn&#39;t create account on their bugzilla."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1473861054, "post_id": 39490912, "comment_id": 66301890, "body": "@woockashek I can fill a bug for you and mention the question on SO if you want. I&#39;m not looking for credits anyway, so I&#39;d suggest you to try once more to create an account. At your disposal."}, {"owner": {"reputation": 1062, "user_id": 3722896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1844152530/picture?type=large", "display_name": "woockashek", "link": "https://stackoverflow.com/users/3722896/woockashek"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1473861994, "post_id": 39490912, "comment_id": 66302608, "body": "@skypjack feel free to submit this bug. Link to this topic is more than enough :)"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 1, "creation_date": 1473862940, "post_id": 39490912, "comment_id": 66303220, "body": "@woockashek <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=77591\" rel=\"nofollow noreferrer\">That&#39;s it</a>."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1473866109, "post_id": 39490912, "comment_id": 66305542, "body": "@woockashek unrelated to the warnings or the bug, <code>Counter(Counter&amp; r)</code> is a fairly useless copy constructor. It should be <code>Counter(const Counter&amp; r)</code>"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1473866269, "post_id": 39490912, "comment_id": 66305649, "body": "@JonathanWakely Thanks for having fixed the issue on the bugzilla. Actually I missed a few details, I&#39;m sorry."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1473964914, "post_id": 39490912, "comment_id": 66352139, "body": "<code>decltype((c))</code> returns <code>C&amp;</code> but <code>decltype(c)</code> returns <code>C</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1436, "user_id": 4341198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1afe57c0798cf3205c694ee52856fc01?s=128&d=identicon&r=PG&f=1", "display_name": "Dusteh", "link": "https://stackoverflow.com/users/4341198/dusteh"}, "is_accepted": true, "score": 1, "last_activity_date": 1479588465, "creation_date": 1479588465, "answer_id": 40697747, "question_id": 39490912, "link": "https://stackoverflow.com/questions/39490912/decltypeauto-foo-returns-local-reference-without-any-warning/40697747#40697747", "title": "decltype(auto) foo() returns local reference without any warning", "body": "<p>First let's state that the problem isn't related explicitly with decltype(auto) since you would get pretty much the same result if the function returned Counter&amp; explicitly.</p>\n\n<p>You could consider the following code:</p>\n\n<pre><code>typedef std::vector&lt;int&gt; Type;\n\nclass DataContainer {\npublic:\n    DataContainer() : data(Type(1024, 0)) {}\n    const Type&amp; getData() const { return data; }\n\nprivate:\n    const Type data;\n};\n\nconst Type&amp; returnLocalRef()\n{\n    DataContainer container;\n    const Type&amp; data = container.getData();\n    return data; // o! returning a ref to local - no warning for most compilers\n}\n</code></pre>\n\n<p>Although a local reference is returned the compiler doesn't give a warning neither in VS2015 nor gcc48 (with -Wall). However if you removed the reference from <strong>const Type&amp; data</strong> the compiler would catch the problem right away. Should you consider such behaviour an error? Debatable.</p>\n\n<p>Compier basic job is to compile the code. It warns the developer about some obvious issues but in most cases it won't do any deeper analysis of the program logic (compilation time would suffer).\nThis is what code static analysis tools are developed and should be used for.</p>\n\n<p>The described case can be considered a simple example but a single level of indirection is enough to \"fool\" the compiler. Since to verify this the compiler would need to check what is actually returned from the getData method.</p>\n\n<p>Making a simple modification:</p>\n\n<pre><code>Type globalData;\n...\nconst Type&amp; getData() const { return globalData; }\n</code></pre>\n\n<p>would make the reference returned from the returnLocalRef function valid.\nHence, this can be considered a tradeoff for the compiler between analysis complexity and time efficiency.</p>\n"}], "owner": {"reputation": 1062, "user_id": 3722896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1844152530/picture?type=large", "display_name": "woockashek", "link": "https://stackoverflow.com/users/3722896/woockashek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 0, "accepted_answer_id": 40697747, "answer_count": 1, "score": 10, "last_activity_date": 1479588465, "creation_date": 1473857426, "question_id": 39490912, "link": "https://stackoverflow.com/questions/39490912/decltypeauto-foo-returns-local-reference-without-any-warning", "title": "decltype(auto) foo() returns local reference without any warning", "body": "<p>While playing with examples from Modern C++ I've written the following code.</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nstatic int count = 0;\n\nclass Counter\n{\npublic:\n    Counter() { ++count; };\n    Counter(Counter&amp; r) { ++count; };\n    Counter(Counter&amp;&amp; r) { ++count; };\n    ~Counter() { --count; };\n\n    void foo() {};\n};\n\ndecltype(auto) foo_warn()\n{\n    Counter c;\n    return (c);             // Warning about returning local reference\n}\n\ndecltype(auto) foo_no_warn()\n{\n    Counter c;\n    return 1==1 ? c : c;    // No warning, still local reference returned\n}\n\nint main()\n{\n    Counter&amp; a = foo_warn();\n    Counter&amp; b = foo_no_warn();\n\n    std::cout &lt;&lt; count &lt;&lt; std::endl;  // prints 0\n\n    a.foo();\n    b.foo();\n\n    return 0;\n}\n</code></pre>\n\n<p>Code compiled with command:</p>\n\n<p><code>g++-6 -std=c++14 -Wall -O0    decl_fail.cpp   -o decl_fail</code></p>\n\n<p>Output:</p>\n\n<pre><code>g++-6 -std=c++14 -Wall -O0    decl_fail.cpp   -o decl_fail\ndecl_fail.cpp: In function \u2018decltype(auto) foo_warn()\u2019:\ndecl_fail.cpp:19:10: warning: reference to local variable \u2018a\u2019 returned [-Wreturn-local-addr]\n  Counter a;\n          ^\n</code></pre>\n\n<p>It's clear for me that <code>decltype(auto)</code> returns the reference for expressions (but still not intuitive), therefore <code>a</code> and <code>b</code> are invalid references (proven by <code>count==0</code>).</p>\n\n<p>The question is why compiler didn't warn me about that in <code>foo_no_warn</code>?</p>\n\n<p>Did I just found a bug in compiler or this is some explainable behaviour?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "edited": false, "score": 1, "creation_date": 1473857296, "post_id": 39490805, "comment_id": 66299207, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/cast_operator\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/cast_operator</a>"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1473857307, "post_id": 39490805, "comment_id": 66299215, "body": "you&#39;ll need to show us minimal versions of these classes to get a good answer."}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1473857351, "post_id": 39490805, "comment_id": 66299239, "body": "@erip Doesn&#39;t inheritance, in this case, have the <a href=\"https://en.wikipedia.org/wiki/Circle-ellipse_problem\" rel=\"nofollow noreferrer\">circle-ellipse problem</a>?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 1, "creation_date": 1473857601, "post_id": 39490805, "comment_id": 66299400, "body": "inheritance would be the wrong solution for two classes with dissimilar interfaces. real numbers and integers are absolutely dissimilar."}, {"owner": {"reputation": 589, "user_id": 5748383, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-4GG1t-TZN2Y/AAAAAAAAAAI/AAAAAAAAAKk/GD2_xyc0ywQ/photo.jpg?sz=128", "display_name": "1valdis", "link": "https://stackoverflow.com/users/5748383/1valdis"}, "edited": false, "score": 0, "creation_date": 1473857841, "post_id": 39490805, "comment_id": 66299586, "body": "Edited, inserted the code."}], "answers": [{"comments": [{"owner": {"reputation": 589, "user_id": 5748383, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-4GG1t-TZN2Y/AAAAAAAAAAI/AAAAAAAAAKk/GD2_xyc0ywQ/photo.jpg?sz=128", "display_name": "1valdis", "link": "https://stackoverflow.com/users/5748383/1valdis"}, "edited": false, "score": 0, "creation_date": 1473861474, "post_id": 39490869, "comment_id": 66302214, "body": "I&#39;ve tried to do like in first example of &quot;Explanation&quot;, got &quot;Incomplete type used in nested name specifier&quot;. How to do the second variant?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 589, "user_id": 5748383, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-4GG1t-TZN2Y/AAAAAAAAAAI/AAAAAAAAAKk/GD2_xyc0ywQ/photo.jpg?sz=128", "display_name": "1valdis", "link": "https://stackoverflow.com/users/5748383/1valdis"}, "edited": false, "score": 0, "creation_date": 1473864233, "post_id": 39490869, "comment_id": 66304186, "body": "@1valdis Only put the conversion operator function <b><i>declarations</i></b> in the class. Then <b><i>define</i></b> (i.e. implement) the function after both classes are fully defined."}, {"owner": {"reputation": 589, "user_id": 5748383, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-4GG1t-TZN2Y/AAAAAAAAAAI/AAAAAAAAAKk/GD2_xyc0ywQ/photo.jpg?sz=128", "display_name": "1valdis", "link": "https://stackoverflow.com/users/5748383/1valdis"}, "edited": false, "score": 0, "creation_date": 1473864614, "post_id": 39490869, "comment_id": 66304456, "body": "I did declare functions in headers, defined in their .cpp&#39;s. Where else should I do that?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 589, "user_id": 5748383, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-4GG1t-TZN2Y/AAAAAAAAAAI/AAAAAAAAAKk/GD2_xyc0ywQ/photo.jpg?sz=128", "display_name": "1valdis", "link": "https://stackoverflow.com/users/5748383/1valdis"}, "edited": false, "score": 0, "creation_date": 1473866014, "post_id": 39490869, "comment_id": 66305468, "body": "@1valdis You do remember to add forward declarations of the classes, not including the header files into each other and thereby creating a circular dependency? See e.g. <a href=\"http://ideone.com/JnL92S\" rel=\"nofollow noreferrer\">this simple example on how it could be done</a>."}, {"owner": {"reputation": 589, "user_id": 5748383, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-4GG1t-TZN2Y/AAAAAAAAAAI/AAAAAAAAAKk/GD2_xyc0ywQ/photo.jpg?sz=128", "display_name": "1valdis", "link": "https://stackoverflow.com/users/5748383/1valdis"}, "edited": false, "score": 0, "creation_date": 1473866108, "post_id": 39490869, "comment_id": 66305540, "body": "Yes, I write class real; before class integer{...} and so on."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 2, "last_activity_date": 1473857297, "creation_date": 1473857297, "answer_id": 39490869, "question_id": 39490805, "link": "https://stackoverflow.com/questions/39490805/c-bilateral-class-conversion/39490869#39490869", "title": "C++: Bilateral class conversion", "body": "<p>You basically have two solutions to your problem:</p>\n\n<p>The first is to write <a href=\"http://en.cppreference.com/w/cpp/language/cast_operator\" rel=\"nofollow\">conversion operators</a> that can convert a <code>real</code> object to an <code>integer</code> object, and vice versa.</p>\n\n<p>The other solution is to implement custom constructors and assignment operators to take the other class.</p>\n"}], "owner": {"reputation": 589, "user_id": 5748383, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-4GG1t-TZN2Y/AAAAAAAAAAI/AAAAAAAAAKk/GD2_xyc0ywQ/photo.jpg?sz=128", "display_name": "1valdis", "link": "https://stackoverflow.com/users/5748383/1valdis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "closed_date": 1474135928, "accepted_answer_id": 39490869, "answer_count": 1, "score": 0, "last_activity_date": 1473880489, "creation_date": 1473857122, "last_edit_date": 1473857799, "question_id": 39490805, "link": "https://stackoverflow.com/questions/39490805/c-bilateral-class-conversion", "closed_reason": "Duplicate", "title": "C++: Bilateral class conversion", "body": "<p>Let's say, I have two simple classes: <code>integer</code> with just one <code>int</code> variable in it, and <code>real</code> with <code>double</code>. I'm already done so that</p>\n\n<p><code>integer a=2016;\nint b=a;</code></p>\n\n<p><code>real a=20.16;\ndouble b=a;</code></p>\n\n<p>working perfectly. Now I have to do the conversion between them, like so:</p>\n\n<p><code>integer foo; real bar;\nfoo=bar;\nbar=foo;</code></p>\n\n<p>Or at least with similar syntax. I know that there will be loss of some data when converting double to int, I'll deal with it. So how can I do that? What and where should I #include and what the methods/operator overloads to write? My project is divided into files <code>main.cpp</code>, <code>integer.h</code>, <code>integer.cpp</code>, <code>real.h</code>, <code>real.cpp</code>. Thanks.</p>\n\n<p>EDIT: The classes looks like:</p>\n\n<pre><code>//integer.h\nclass integer\n{\n    private:\n        int a;\n    public:\n        integer();\n        integer(int number);\n        operator int() const;\n};\n//integer.cpp\n#include \"integer.h\"\n\ninteger::integer(){\n    a=0;\n}\ninteger::integer(int number){\n    a=number;\n}\ninteger::operator int() const{\n    return a;\n}\n//real.h\nclass real {\n    private:\n        double a;\n    public:\n        real();\n        real(double number);\n        operator double() const;\n};\n//real.cpp\n#include \"real.h\"\n\nreal::real(){\n    a=0;\n}\nreal::real(double number){\n    a=number;\n}\nreal::operator double() const{\n    return a;\n}\n</code></pre>\n"}, {"tags": ["c++", "class", "templates", "arguments"], "comments": [{"owner": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "edited": false, "score": 1, "creation_date": 1473857113, "post_id": 39490744, "comment_id": 66299078, "body": "Move class user out of main"}, {"owner": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "edited": false, "score": 0, "creation_date": 1473857206, "post_id": 39490744, "comment_id": 66299143, "body": "In C++98, template parameter must not be a local type"}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1473858152, "post_id": 39490744, "comment_id": 66299806, "body": "Don&#39;t declare classes in function scope."}], "owner": {"reputation": 1, "user_id": 6830379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6126e0959b88250139d6455d32f09100?s=128&d=identicon&r=PG&f=1", "display_name": "Moses", "link": "https://stackoverflow.com/users/6830379/moses"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 709, "favorite_count": 0, "closed_date": 1473861284, "answer_count": 0, "score": 0, "last_activity_date": 1473856998, "creation_date": 1473856964, "last_edit_date": 1473856998, "question_id": 39490744, "link": "https://stackoverflow.com/questions/39490744/template-argument-2-is-invalid-error-when-i-declare-a-list-with-a-home-made-cl", "closed_reason": "Duplicate", "title": "&quot;template argument 2 is invalid&quot;-Error when I declare a list with a home made class", "body": "<p>\"template argument 2 is invalid\"-Error when I declare a list with a home made class</p>\n\n<pre><code>include &lt;list&gt;\nusing namespace std;\n\nint main() {\n\n    class user\n    {\n        public: string name, pass;\n        int droits;\n};\nlist&lt;user&gt; user_list;\n</code></pre>\n\n<p>The global message error is \n<em>Multiple markers at this line\n    - template argument 2 is invalid\n    - trying to instantiate 'template class std::allocator'\n    - template argument for 'template class std::allocator' uses local type \n     'main()::user'</em>\nI'm getting started in C++ \nthanks for your help</p>\n"}, {"tags": ["c++", "qt", "qstatemachine"], "comments": [{"owner": {"reputation": 11885, "user_id": 2257050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VknAq.png?s=128&g=1", "display_name": "thuga", "link": "https://stackoverflow.com/users/2257050/thuga"}, "edited": false, "score": 0, "creation_date": 1473859947, "post_id": 39490731, "comment_id": 66301056, "body": "What are you trying to do exactly?"}, {"owner": {"reputation": 115, "user_id": 6746744, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/4b5baacda507e87e25d180d2f66b417c?s=128&d=identicon&r=PG&f=1", "display_name": "Lehtim", "link": "https://stackoverflow.com/users/6746744/lehtim"}, "reply_to_user": {"reputation": 11885, "user_id": 2257050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VknAq.png?s=128&g=1", "display_name": "thuga", "link": "https://stackoverflow.com/users/2257050/thuga"}, "edited": false, "score": 0, "creation_date": 1473931074, "post_id": 39490731, "comment_id": 66330981, "body": "@thuga I am working at a Tool to replace a written manual. This Tool does some of the manual steps automatically and others have to be done manual. If I am entering State Init (one step has been done) I want to set the Status of this step. If something went wrong (Precondition unsuccesful or Cancel has been clicked) I am entering state Init and set the status. If I am entering state Init I have to know if something went wrong in before. Therefore I am searching for an opportunity to find out which signal has caused my SLOT EnterStateInit() to react and set the status of the step."}, {"owner": {"reputation": 11885, "user_id": 2257050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VknAq.png?s=128&g=1", "display_name": "thuga", "link": "https://stackoverflow.com/users/2257050/thuga"}, "edited": false, "score": 0, "creation_date": 1473934507, "post_id": 39490731, "comment_id": 66333378, "body": "So why don&#39;t you create a new state for the error? After all, it is a different state."}, {"owner": {"reputation": 115, "user_id": 6746744, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/4b5baacda507e87e25d180d2f66b417c?s=128&d=identicon&r=PG&f=1", "display_name": "Lehtim", "link": "https://stackoverflow.com/users/6746744/lehtim"}, "reply_to_user": {"reputation": 11885, "user_id": 2257050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VknAq.png?s=128&g=1", "display_name": "thuga", "link": "https://stackoverflow.com/users/2257050/thuga"}, "edited": false, "score": 0, "creation_date": 1473937141, "post_id": 39490731, "comment_id": 66334822, "body": "@thuga Thanks I havn&#39;t thought about that. That might also work."}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 6746744, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/4b5baacda507e87e25d180d2f66b417c?s=128&d=identicon&r=PG&f=1", "display_name": "Lehtim", "link": "https://stackoverflow.com/users/6746744/lehtim"}, "edited": false, "score": 0, "creation_date": 1476694192, "post_id": 39491153, "comment_id": 67436798, "body": "May you explain to me how this reimplementation would look like? Maybe an example for a QState? I have looked at the documentation at doc.qt.io of the qobject::event() method but did not understand it completely. How do I have to implement those QEvent. Would this QEvent be the Signal causing the transition and how would it look like?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 115, "user_id": 6746744, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/4b5baacda507e87e25d180d2f66b417c?s=128&d=identicon&r=PG&f=1", "display_name": "Lehtim", "link": "https://stackoverflow.com/users/6746744/lehtim"}, "edited": false, "score": 0, "creation_date": 1476709486, "post_id": 39491153, "comment_id": 67446692, "body": "Use <code>qDebug()</code> to get an idea of what events come in, and act accordingly."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1476709471, "last_edit_date": 1476709471, "creation_date": 1473858126, "answer_id": 39491153, "question_id": 39490731, "link": "https://stackoverflow.com/questions/39490731/qstatemachine-get-event-causing-state-transition/39491153#39491153", "title": "QStateMachine get event causing state transition", "body": "<p>A <code>QState</code> is-a <code>QObject</code>. You're free to reimplement its <code>event()</code> method :) To get an idea of what's going on:</p>\n\n<pre><code>void MyState::event(QEvent * event) {\n  qDebug() &lt;&lt; event;\n  QState::event(event);\n}\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 6746744, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/4b5baacda507e87e25d180d2f66b417c?s=128&d=identicon&r=PG&f=1", "display_name": "Lehtim", "link": "https://stackoverflow.com/users/6746744/lehtim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1476709471, "creation_date": 1473856929, "question_id": 39490731, "link": "https://stackoverflow.com/questions/39490731/qstatemachine-get-event-causing-state-transition", "title": "QStateMachine get event causing state transition", "body": "<p>I have created a QStateMachine and I have to get the Event which has caused a transition of the state. Isn't there any opportunity to get inside my slot <code>EnterStateInit()</code> the signal which caused this call. Here my sample code:</p>\n\n<pre><code>CreateStateMachine()\n{\n    QState *Init = new QState();\n    QState *CheckPrecondition = new QState();\n    QState *DoWork = new QState();\n\n    Init-&gt;addTransition(this, SIGNAL(EventStart()), CheckPrecondition);\n    CheckPrecondition-&gt;addTransition(this, SIGNAL(EventSuccesfulCondition()), DoWork);\n    CheckPrecondition-&gt;addTransition(this, SIGNAL(EventNotSuccesfulCondition()), Init);\n    DoWork-&gt;addTransition(this, SIGNAL(EventWorkDone()), Init);\n    DoWork-&gt;addTransition(this, SIGNAL(EventError()), Init);\n\n    connect(Init, SIGNAL(entered()), this, SLOT(EnterStateInit()));\n    connect(CheckPrecondition, SIGNAL(entered()), this, SLOT(CheckPrecondition()));\n    connect(DoWork, SIGNAL(entered()), this, SLOT(DoWork()));\n\n    connect(Init, SIGNAL(exited()), this, SLOT(LeaveStateInit()));\n    connect(CheckPrecondition, SIGNAL(exited()), this, SLOT(LeaveStateCheckPrecondition()));\n    connect(DoWork, SIGNAL(exited()), this, SLOT(LeaveDoWork()));\n\n    mModuleStateMachine.addState(Init);\n    mModuleStateMachine.addState(CheckPrecondition);\n    mModuleStateMachine.addState(DoWork);\n\n    mModuleStateMachine.start();\n}\n\nEnterStateInit()\n{\n  /* Get Event which caused this SLOT to react */\n  SetStatus();\n}\n</code></pre>\n"}, {"tags": ["c++", "input", "cin", "ros"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1473857029, "post_id": 39490719, "comment_id": 66299014, "body": "You don&#39;t want that <code>ignore</code> at all... <code>clear</code> is pointless at the beginning, too."}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1473857161, "post_id": 39490719, "comment_id": 66299108, "body": "use cin.sync() it&#39;s enough"}, {"owner": {"reputation": 1, "user_id": 6830832, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RKPaxPOge0Y/AAAAAAAAAAI/AAAAAAAAUBE/TrZ54vqtadY/photo.jpg?sz=128", "display_name": "Zaunk&#246;nig", "link": "https://stackoverflow.com/users/6830832/zaunk%c3%b6nig"}, "edited": false, "score": 0, "creation_date": 1473859753, "post_id": 39490719, "comment_id": 66300919, "body": "Thanks for your input! I only added those because that was the only advice I could find on similar problems, hoping it might help. I&#39;ve tried cin.sync(), but unfortunately it doesn&#39;t change anything either."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1473860710, "post_id": 39490719, "comment_id": 66301638, "body": "What happens if you comment out the clear and ignore lines? Cin ignores trailing newlines."}, {"owner": {"reputation": 1, "user_id": 6830832, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RKPaxPOge0Y/AAAAAAAAAAI/AAAAAAAAUBE/TrZ54vqtadY/photo.jpg?sz=128", "display_name": "Zaunk&#246;nig", "link": "https://stackoverflow.com/users/6830832/zaunk%c3%b6nig"}, "edited": false, "score": 0, "creation_date": 1473861620, "post_id": 39490719, "comment_id": 66302324, "body": "That&#39;s what I had at first. I commented out everything and just left <code>std::cout &lt;&lt; &quot;hello &quot;; if(!(std::cin &gt;&gt; input_string)){cout &lt;&lt; &quot;this did not work &quot;;} std::cout &lt;&lt; &quot;input: &quot; &lt;&lt; input_string;</code> and I get <code>hello this did not work input:</code>. (Without ever having had time to input anything.)"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1473862024, "post_id": 39490719, "comment_id": 66302622, "body": "In &quot;the rest of the code&quot; there are several functions calls <b>before</b> the attempted input. Something in one of those functions is messing up the input stream."}, {"owner": {"reputation": 1, "user_id": 6830832, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RKPaxPOge0Y/AAAAAAAAAAI/AAAAAAAAUBE/TrZ54vqtadY/photo.jpg?sz=128", "display_name": "Zaunk&#246;nig", "link": "https://stackoverflow.com/users/6830832/zaunk%c3%b6nig"}, "edited": false, "score": 0, "creation_date": 1473950545, "post_id": 39490719, "comment_id": 66343805, "body": "It should only be the ROS initialization. All of that is pretty standard. (Not sure if or how much you know about ROS - robot operating system - it&#39;s basically a set of libraries that help with building robot applications, it&#39;s nothing that we coded or changed at all. I don&#39;t really know how these work internally, I assume it shouldn&#39;t mess with cin though. But it does seem like that&#39;s the only explanation from what I can see...)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6830832, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RKPaxPOge0Y/AAAAAAAAAAI/AAAAAAAAUBE/TrZ54vqtadY/photo.jpg?sz=128", "display_name": "Zaunk&#246;nig", "link": "https://stackoverflow.com/users/6830832/zaunk%c3%b6nig"}, "edited": false, "score": 0, "creation_date": 1474542201, "post_id": 39562853, "comment_id": 66578369, "body": "Hi, thanks for your help! Originally the problem was that I didn&#39;t get the chance to input anything, it would immediately skip to the next line in the code. Later, the problem was that I did have time to input something, but it would be interpreted as a terminal command, telling me &quot;Befehl nicht gefunden&quot; = &quot;Command not found&quot;. However, I did end up being able to solve it - it wasn&#39;t a problem with the code after all, it was because of the bash script I used to start it... I was simply being very stupid."}], "tags": [], "owner": {"reputation": 65, "user_id": 2102290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e3413b9606dd3e67ef371e5794d5054?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2102290/michael"}, "is_accepted": false, "score": 0, "last_activity_date": 1474234094, "creation_date": 1474234094, "answer_id": 39562853, "question_id": 39490719, "link": "https://stackoverflow.com/questions/39490719/first-only-cin-is-skipped-even-after-using-cin-ignore/39562853#39562853", "title": "First &amp; only cin is skipped, even after using cin.ignore", "body": "<p>I don't understand your original question about skipping a line but the reason nothing is printed until you shutdown is that you are missing the <code>endl</code> from the output. I added it and the output seems as you would expect?</p>\n\n<pre><code>char input_test;\nstd::cout &lt;&lt; \"character: \";\nstd::cin &gt;&gt; input_test;\nstd::cout &lt;&lt; input_test;\nstd::cout &lt;&lt; \"did that work?\" &lt;&lt; std::endl;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>root@93043381199d:/catkin_ws/devel/lib/stack# ./stack_node \ncharacter: a\nadid that work?\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6830832, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RKPaxPOge0Y/AAAAAAAAAAI/AAAAAAAAUBE/TrZ54vqtadY/photo.jpg?sz=128", "display_name": "Zaunk&#246;nig", "link": "https://stackoverflow.com/users/6830832/zaunk%c3%b6nig"}, "is_accepted": true, "score": 0, "last_activity_date": 1474543921, "creation_date": 1474543921, "answer_id": 39637836, "question_id": 39490719, "link": "https://stackoverflow.com/questions/39490719/first-only-cin-is-skipped-even-after-using-cin-ignore/39637836#39637836", "title": "First &amp; only cin is skipped, even after using cin.ignore", "body": "<p>Well, turns out I was just being dumb! It wasn't anything to do with the code at all:</p>\n\n<p>I was running everything via a bash script, and because of how I was using it before (which also didn't require any input) I was still running it with <strong>&amp;</strong> at the end - so obviously I couldn't get any input from that shell.</p>\n\n<p>[Note: I wasn't sure if it was good practice to answer one's own question; at first I just edited it. But I figured it'd make more sense than to just leave it open.]</p>\n"}], "owner": {"reputation": 1, "user_id": 6830832, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RKPaxPOge0Y/AAAAAAAAAAI/AAAAAAAAUBE/TrZ54vqtadY/photo.jpg?sz=128", "display_name": "Zaunk&#246;nig", "link": "https://stackoverflow.com/users/6830832/zaunk%c3%b6nig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "accepted_answer_id": 39637836, "answer_count": 2, "score": -1, "last_activity_date": 1475815898, "creation_date": 1473856888, "last_edit_date": 1474542711, "question_id": 39490719, "link": "https://stackoverflow.com/questions/39490719/first-only-cin-is-skipped-even-after-using-cin-ignore", "title": "First &amp; only cin is skipped, even after using cin.ignore", "body": "<p><strong>Edit 2:</strong></p>\n\n<p>Well, turns out I was just being dumb! It wasn't anything to do with the code at all. I was running everything via a bash script, and because of how I was using it before (which also didn't require any input) I was still running it with &amp; at the end - so obviously I couldn't get any input from that shell.</p>\n\n<hr>\n\n<p>My program seemingly skips the line were I try to receive input using cin (it goes right to the next line). </p>\n\n<p><strong>Edit: Please look at the bottom where I put the new code and what happens.</strong></p>\n\n<p>I've searched here and googled, and I've found a lot of questions where people had the same problem! As far as I understand, the problem was almost always a leftover '\\n' - but none of the solutions have worked for me sofar. This is the problematic code:</p>\n\n<pre><code>//char input_char;\nstd::string input_string;\n//int input_int;\n\n//std::string line; \n\nstd::cout &lt;&lt; \"hello. your input: \";\n\nstd::cin.clear();\nstd::cin.ignore (std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n'); \n\nstd::cin &gt;&gt; input_string;\n// std::getline(std::cin, input_string);\n\nstd::cout &lt;&lt; \"input: \" &lt;&lt; input_int &lt;&lt; endl;\n</code></pre>\n\n<p>I only need one character or number. I've tried it with a character, int, or string; and I've tried cin and getline. I've added clear and ignore as was suggested for other similar questions, but I still have the same problem.</p>\n\n<p>This is at the beginning of my main, so I'm not doing any other cout or cin before this code. However, this is part of a larger project, and I'm using ros. Before the program gets to this part, there are other outputs which are handled through ros; no other input though. </p>\n\n<p>I'd very much appreciate you help with this! I feel like I must be missing something really obvious...  </p>\n\n<p><strong>Edit: I've now commented out literally everything that isn't immediately related to this input</strong>, and moved cin to the very top of the main. This is now the complete code (commented parts left out):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;ros/ros.h&gt;\n#include &lt;vector&gt;\n#include &lt;ros/console.h&gt;\n#include \"std_msgs/String.h\"\n\n//#include &lt;SharedMessages/MicroconRequest.h&gt;\n\n/* ... */\n\n//ros::Publisher reqPublisher;\n//SharedMessages::MicroconRequest reqMsg;\n\n\n/* ... */\n\nint main( int argc, char* argv[] )\n{\n\n    char input_test;\n    std::cout &lt;&lt; \"character: \";\n    std::cin &gt;&gt; input_test;\n    std::cout &lt;&lt; input_test;\n    std::cout &lt;&lt; \"did that work?\";\n\n    // Handle ROS communication\n    ros::init( argc, argv, \"Gestures\" );\n    ros::NodeHandle n;\n\n    //ros::Subscriber joy_sub_ = n.subscribe&lt;sensor_msgs::Joy&gt;(\"joy\", 10, joyCallback, this);\n    //reqPublisher = n.advertise&lt;SharedMessages::MicroconRequest&gt;(\"MicroconRequest\", 10);\n\n    ros::Rate loop_rate(10);\n\n    // Infinite control loop\n    while (ros::ok())\n    {\n\n        /* ... */\n\n        cntLoop++;\n\n        ros::spinOnce();\n        loop_rate.sleep();\n    }\n\n  // turn off microcontroller\n  return 0;\n}\n</code></pre>\n\n<p>Now what happens is the following:</p>\n\n<pre><code>$ ./startDemo.bash\n\nStarting Minimal Example\n\n$ character: a                # now I have time to input something, but...\na: Befehl nicht gefunden.     # = command not found]\n                              # then it doesn't do anything, so I stop it\n$ ./stopDemo.bash   \nkilling /Gestures\n\ndid that work?[ WARN] [1473954737.268901991]: Shutdown request received.\n[ WARN] [1473954737.268978735]: Reason given for shutdown: [user request]\nkilled\n$ \n</code></pre>\n\n<p>Only after killing the program does the output suddenly appear. What is happening here? I'm so confused.</p>\n"}, {"tags": ["c++", "opencv"], "answers": [{"tags": [], "owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "is_accepted": false, "score": 0, "last_activity_date": 1473858336, "creation_date": 1473858336, "answer_id": 39491231, "question_id": 39490540, "link": "https://stackoverflow.com/questions/39490540/using-cvglob-for-multiple-extensions/39491231#39491231", "title": "Using cv::glob for multiple extensions", "body": "<p><code>Open CV</code> or even OS file system API has no build-in way to do that. You can improve your code by eliminating multiple iteration over the folder/folders. For example you can use <a href=\"http://www.boost.org/doc/libs/1_61_0/libs/filesystem/doc/reference.html#Class-recursive_directory_iterator\" rel=\"nofollow\"><code>boost::filesystem::recursive_directory_iterator</code></a> and some filter function to retrieve all the files in a single iteration. </p>\n\n<p>Here is the sample:</p>\n\n<pre><code>#include &lt;boost/filesystem.hpp&gt;\n#include &lt;set&gt;\n\nnamespace fs = ::boost::filesystem;\n\nvoid GetPictures(const fs::path&amp; root, const std::set&lt;string&gt;&amp; exts, vector&lt;fs::path&gt;&amp; result)\n{\n  if(!fs::exists(root) || !fs::is_directory(root)) \n  {\n    return;\n  }\n\n  fs::recursive_directory_iterator it(root);\n  fs::recursive_directory_iterator endit;\n  while(it != endit)\n  {\n    if(fs::is_regular_file(*it) &amp;&amp; exts.find(it-&gt;path().extension()) != exts.end()) \n    {\n      result.push_back(it-&gt;path());\n    }\n    ++it;\n  }\n}\n</code></pre>\n\n<p>It's only a sample, you should take care of string casing, error handling, etc.</p>\n"}], "owner": {"reputation": 123, "user_id": 3419950, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/37aa14b4dc4f1e97421ebcf0f6e652a4?s=128&d=identicon&r=PG&f=1", "display_name": "Mthenn", "link": "https://stackoverflow.com/users/3419950/mthenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2768, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1473858371, "creation_date": 1473856267, "last_edit_date": 1473856419, "question_id": 39490540, "link": "https://stackoverflow.com/questions/39490540/using-cvglob-for-multiple-extensions", "title": "Using cv::glob for multiple extensions", "body": "<p>I'm trying to use <a href=\"http://docs.opencv.org/3.1.0/db/de0/group__core__utils.html#gaf91b7f383218e2d3f760939140942297\" rel=\"nofollow\">cv::glob</a> to find images in a folder system. What I now want is to search for multiple file extensions at once (let's say .jpg and .png). Is there a way to do this?</p>\n\n<p>The <a href=\"http://docs.opencv.org/3.1.0/db/de0/group__core__utils.html#gaf91b7f383218e2d3f760939140942297\" rel=\"nofollow\">opencv documentation</a> on this method doesn't specify the <code>pattern</code> parameter. </p>\n\n<p>At the moment I'm using the ugly and inefficient method of searching for each extension seperately and combining the results. See:</p>\n\n<pre><code>vector&lt;cv::String&gt; imageNames;\nvector&lt;string&gt; allowedExtensions = { \".jpg\", \".png\" };\nfor (int i = 0; i &lt; allowedExtensions.size(); i++) {\n    vector&lt;cv::String&gt; imageNamesCurrentExtension;\n    cv::glob(\n        inputFolder + \"*\" + allowedExtensions[i],\n        imageNamesCurrentExtension,\n        true\n    );\n    imageNames.insert(\n        imageNames.end(),\n        imageNamesCurrentExtension.begin(),\n        imageNamesCurrentExtension.end()\n    );\n}\n</code></pre>\n"}, {"tags": ["c++", "mongodb", "c++11", "mongo-cxx-driver"], "comments": [{"owner": {"reputation": 10953, "user_id": 776473, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dbfcfc0e3c4b2b0baef2383fbc97f687?s=128&d=identicon&r=PG", "display_name": "acm", "link": "https://stackoverflow.com/users/776473/acm"}, "edited": false, "score": 1, "creation_date": 1473897213, "post_id": 39490432, "comment_id": 66319947, "body": "Can you post the full output from your CMake invocation? I suspect that you are being affected by <a href=\"https://jira.mongodb.org/browse/CXX-1011\" rel=\"nofollow noreferrer\">jira.mongodb.org/browse/CXX-1011</a>. Note also that typically on OS X you shouldn&#39;t need LIBBSON_DIR and LIBMONGOC_DIR as pkg-config is available. How did you obtain/install the C driver and libbson? Are there pkg-config files for it in /usr/local/lib/pkgconfig?"}, {"owner": {"reputation": 10953, "user_id": 776473, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dbfcfc0e3c4b2b0baef2383fbc97f687?s=128&d=identicon&r=PG", "display_name": "acm", "link": "https://stackoverflow.com/users/776473/acm"}, "edited": false, "score": 0, "creation_date": 1473943576, "post_id": 39490432, "comment_id": 66338614, "body": "What happens if you run <code>pkg-config --cflags --libs libmongoc-1.0  libbson-1.0</code>? Also, what version of the C++11 driver are you trying to build? Can you try again with the HEAD of the master branch? We are just about to release 3.0.2 and there have been a number of bugs fixed since the 3.0.0 and 3.0.1 releases."}, {"owner": {"reputation": 10953, "user_id": 776473, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dbfcfc0e3c4b2b0baef2383fbc97f687?s=128&d=identicon&r=PG", "display_name": "acm", "link": "https://stackoverflow.com/users/776473/acm"}, "edited": false, "score": 0, "creation_date": 1473943676, "post_id": 39490432, "comment_id": 66338689, "body": "Also, note that your original usages of LIBBSON_DIR and LIBMONGOC_DIR are incorrect. They should be set to the install prefixes of libbson and libmongoc, respectively, not the include paths. So, in your case both LIBBSON_DIR and LIBMONGOC_DIR should be set to <code>&#47;usr&#47;local</code>."}], "answers": [{"tags": [], "owner": {"reputation": 653, "user_id": 6744675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5edbba96983b2c505bc4329ad65e895e?s=128&d=identicon&r=PG&f=1", "display_name": "IndyStef", "link": "https://stackoverflow.com/users/6744675/indystef"}, "is_accepted": false, "score": 1, "last_activity_date": 1473948648, "creation_date": 1473948648, "answer_id": 39513309, "question_id": 39490432, "link": "https://stackoverflow.com/questions/39490432/make-mongo-cxx-driver-cannot-find-includes/39513309#39513309", "title": "make mongo-cxx-driver cannot find includes", "body": "<p>Found the problem. @acm asked to show the output of <code>pkg-config --cflags --libs libmongoc-1.0 libbson-1.0</code>, which I tried to do:</p>\n\n<pre><code>~/code/cpp/mongo-cxx-driver/build  (master) $&gt; pkg-config --cflags --libs libmongoc-1.0 libbson-1.0\n-bash: pkg-config: command not found\n</code></pre>\n\n<p>Apparently pkg-config was not installed. A quick installation through homebrew later, I ran the same line and got:</p>\n\n<pre><code>~/code/cpp/mongo-cxx-driver/build  (master) $&gt; pkg-config --cflags --libs libmongoc-1.0 libbson-1.0\n-I/usr/local/include/libmongoc-1.0 -I/usr/local/include/libbson-1.0 -L/usr/local/lib -lmongoc-1.0 -lbson-1.0\n</code></pre>\n\n<p>After that cmake ran just fine, and make also.</p>\n\n<p>Thanks for your help :-)</p>\n"}], "owner": {"reputation": 653, "user_id": 6744675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5edbba96983b2c505bc4329ad65e895e?s=128&d=identicon&r=PG&f=1", "display_name": "IndyStef", "link": "https://stackoverflow.com/users/6744675/indystef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1364, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1476117871, "creation_date": 1473855931, "last_edit_date": 1476117871, "question_id": 39490432, "link": "https://stackoverflow.com/questions/39490432/make-mongo-cxx-driver-cannot-find-includes", "title": "make mongo-cxx-driver cannot find includes", "body": "<p>I've been trying to compile the mongo-cxx-driver for C++11 on OSX 10.10, but I have some trouble with it. \nBoth libbson and mongo-c-driver were built and installed successfully, the libraries to to /usr/local/lib, and the headers to /usr/local/include/libbson-1.0 and /usr/local/include/libmongoc-1.0 respectively.\nI ran cmake successfully from the mongo-cxx-driver/build directory, and this was the entire output to the shell:</p>\n\n<pre><code>~/code/cpp/mongo-cxx-driver/build  ((r3.0.1)) $&gt; cmake -DLIBBSON_DIR=/usr/local/include/libbson-1.0 -DLIBMONGOC_DIR=/usr/local/include/libmongoc-1.0 -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/usr/local ..\n-- Configuring done\n-- Generating done\n-- Build files have been written to: /Users/user/code/cpp/mongo-cxx-driver\n</code></pre>\n\n<p>when I run make form the mongo-cxx-driver directory, I get the following error:</p>\n\n<pre><code>...\n[  4%] Building CXX object src/bsoncxx/CMakeFiles/bsoncxx.dir/array/view.cpp.o\n/Users/user/code/cpp/mongo-cxx-driver/src/bsoncxx/array/view.cpp:21:10: fatal error: 'bson.h' file not\n  found\n#include &lt;bson.h&gt;\n         ^\n1 error generated.\n</code></pre>\n\n<p>Apparently the compiler fails to find those includes ... but why? Isn't that what LIBBSON_DIR and LIBMONGOC_DIR were set for in the cmake command line?</p>\n\n<p>Edited:\nI built both the C driver and libbson from their git sources, using cmake; make; sudo make install.\nToday I started the mongo-cxx-driver from scratch, to document all problems along the way.\ncmake in mongo-cxx-driver/build generated following output: </p>\n\n<pre><code>~/code/cpp/mongo-cxx-driver/build  (master) $&gt; cmake ..\n-- The CXX compiler identification is AppleClang 7.3.0.7030031\n-- Check for working CXX compiler: /Library/Developer/CommandLineTools/usr/bin/c++\n-- Check for working CXX compiler: /Library/Developer/CommandLineTools/usr/bin/c++ -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- No build type selected, default is Release\n-- The C compiler identification is AppleClang 7.3.0.7030031\n-- Check for working C compiler: /Library/Developer/CommandLineTools/usr/bin/cc\n-- Check for working C compiler: /Library/Developer/CommandLineTools/usr/bin/cc -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Detecting C compile features\n-- Detecting C compile features - done\nCMake Error at cmake/FindLibBSON.cmake:38 (message):\n  Don't know how to find libbson; please set LIBBSON_DIR to the prefix\n   directory with which libbson was configured.\nCall Stack (most recent call first):\n   src/bsoncxx/CMakeLists.txt:67 (find_package)\n\n\n-- Configuring incomplete, errors occurred!\nSee also \"/Users/user/code/cpp/mongo-cxx-driver/build/CMakeFiles/CMakeOutput.log\".\n</code></pre>\n\n<p>The log from cmake in /mongo-cxx-driver/build/CMakeFiles/CMakeOutput.log contains (only showing the C++11 relevant lines for breverity):</p>\n\n<pre><code>The system is: Darwin - 15.6.0 - x86_64\nCompiling the CXX compiler identification source file \"CMakeCXXCompilerId.cpp\" succeeded.\nCompiler: /Library/Developer/CommandLineTools/usr/bin/c++ \nBuild flags: \nId flags: \n\nThe output was:\n0\n\n\nCompilation of the CXX compiler identification source \"CMakeCXXCompilerId.cpp\" produced \"a.out\"\n\nThe CXX compiler identification is AppleClang, found in \"/Users/user/code/cpp/mongo-cxx-driver/build/CMakeFiles/3.6.2/CompilerIdCXX/a.out\"\n\nDetermining if the CXX compiler works passed with the following output:\nChange Dir: /Users/user/code/cpp/mongo-cxx-driver/build/CMakeFiles/CMakeTmp\n\nRun Build Command:\"/usr/bin/make\" \"cmTC_1ae1a/fast\"\n/Library/Developer/CommandLineTools/usr/bin/make -f CMakeFiles/cmTC_1ae1a.dir/build.make CMakeFiles/cmTC_1ae1a.dir/build\nBuilding CXX object CMakeFiles/cmTC_1ae1a.dir/testCXXCompiler.cxx.o\n/Library/Developer/CommandLineTools/usr/bin/c++      -o CMakeFiles/cmTC_1ae1a.dir/testCXXCompiler.cxx.o -c /Users/user/code/cpp/mongo-cxx-driver/build/CMakeFiles/CMakeTmp/testCXXCompiler.cxx\nLinking CXX executable cmTC_1ae1a\n/usr/local/Cellar/cmake/3.6.2/bin/cmake -E cmake_link_script CMakeFiles/cmTC_1ae1a.dir/link.txt --verbose=1\n/Library/Developer/CommandLineTools/usr/bin/c++     -Wl,-search_paths_first -Wl,-headerpad_max_install_names   CMakeFiles/cmTC_1ae1a.dir/testCXXCompiler.cxx.o  -o cmTC_1ae1a  \n\n\nDetecting CXX compiler ABI info compiled with the following output:\nChange Dir: /Users/user/code/cpp/mongo-cxx-driver/build/CMakeFiles/CMakeTmp\n\nRun Build Command:\"/usr/bin/make\" \"cmTC_34702/fast\"\n/Library/Developer/CommandLineTools/usr/bin/make -f CMakeFiles/cmTC_34702.dir/build.make CMakeFiles/cmTC_34702.dir/build\nBuilding CXX object CMakeFiles/cmTC_34702.dir/CMakeCXXCompilerABI.cpp.o\n/Library/Developer/CommandLineTools/usr/bin/c++      -o CMakeFiles/cmTC_34702.dir/CMakeCXXCompilerABI.cpp.o -c /usr/local/Cellar/cmake/3.6.2/share/cmake/Modules/CMakeCXXCompilerABI.cpp\nLinking CXX executable cmTC_34702\n/usr/local/Cellar/cmake/3.6.2/bin/cmake -E cmake_link_script CMakeFiles/cmTC_34702.dir/link.txt --verbose=1\n/Library/Developer/CommandLineTools/usr/bin/c++     -Wl,-search_paths_first -Wl,-headerpad_max_install_names  -v -Wl,-v CMakeFiles/cmTC_34702.dir/CMakeCXXCompilerABI.cpp.o  -o cmTC_34702   \nApple LLVM version 7.3.0 (clang-703.0.31)\nTarget: x86_64-apple-darwin15.6.0\nThread model: posix\nInstalledDir: /Library/Developer/CommandLineTools/usr/bin\n \"/Library/Developer/CommandLineTools/usr/bin/ld\" -demangle -dynamic -arch x86_64 -macosx_version_min 10.11.0 -o cmTC_34702 -search_paths_first -headerpad_max_install_names -v CMakeFiles/cmTC_34702.dir/CMakeCXXCompilerABI.cpp.o -lc++ -lSystem /Library/Developer/CommandLineTools/usr/bin/../lib/clang/7.3.0/lib/darwin/libclang_rt.osx.a\n@(#)PROGRAM:ld  PROJECT:ld64-264.3.102\nconfigured to support archs: armv6 armv7 armv7s arm64 i386 x86_64 x86_64h armv6m armv7k armv7m armv7em (tvOS)\nLibrary search paths:\n    /usr/lib\n    /usr/local/lib\nFramework search paths:\n    /Library/Frameworks/\n    /System/Library/Frameworks/\n\n\nParsed CXX implicit link information from above output:\n  link line regex: [^( *|.*[/\\])(ld|([^/\\]+-)?ld|collect2)[^/\\]*( |$)]\n  ignore line: [Change Dir: /Users/user/code/cpp/mongo-cxx-driver/build/CMakeFiles/CMakeTmp]\n  ignore line: []\n  ignore line: [Run Build Command:\"/usr/bin/make\" \"cmTC_34702/fast\"]\n  ignore line: [/Library/Developer/CommandLineTools/usr/bin/make -f CMakeFiles/cmTC_34702.dir/build.make CMakeFiles/cmTC_34702.dir/build]\n  ignore line: [Building CXX object CMakeFiles/cmTC_34702.dir/CMakeCXXCompilerABI.cpp.o]\n  ignore line: [/Library/Developer/CommandLineTools/usr/bin/c++      -o CMakeFiles/cmTC_34702.dir/CMakeCXXCompilerABI.cpp.o -c /usr/local/Cellar/cmake/3.6.2/share/cmake/Modules/CMakeCXXCompilerABI.cpp]\n  ignore line: [Linking CXX executable cmTC_34702]\n  ignore line: [/usr/local/Cellar/cmake/3.6.2/bin/cmake -E cmake_link_script CMakeFiles/cmTC_34702.dir/link.txt --verbose=1]\n  ignore line: [/Library/Developer/CommandLineTools/usr/bin/c++     -Wl,-search_paths_first -Wl,-headerpad_max_install_names  -v -Wl,-v CMakeFiles/cmTC_34702.dir/CMakeCXXCompilerABI.cpp.o  -o cmTC_34702   ]\n  ignore line: [Apple LLVM version 7.3.0 (clang-703.0.31)]\n  ignore line: [Target: x86_64-apple-darwin15.6.0]\n  ignore line: [Thread model: posix]\n  ignore line: [InstalledDir: /Library/Developer/CommandLineTools/usr/bin]\n  link line: [ \"/Library/Developer/CommandLineTools/usr/bin/ld\" -demangle -dynamic -arch x86_64 -macosx_version_min 10.11.0 -o cmTC_34702 -search_paths_first -headerpad_max_install_names -v CMakeFiles/cmTC_34702.dir/CMakeCXXCompilerABI.cpp.o -lc++ -lSystem /Library/Developer/CommandLineTools/usr/bin/../lib/clang/7.3.0/lib/darwin/libclang_rt.osx.a]\n    arg [/Library/Developer/CommandLineTools/usr/bin/ld] ==&gt; ignore\n    arg [-demangle] ==&gt; ignore\n    arg [-dynamic] ==&gt; ignore\n    arg [-arch] ==&gt; ignore\n    arg [x86_64] ==&gt; ignore\n    arg [-macosx_version_min] ==&gt; ignore\n    arg [10.11.0] ==&gt; ignore\n    arg [-o] ==&gt; ignore\n    arg [cmTC_34702] ==&gt; ignore\n    arg [-search_paths_first] ==&gt; ignore\n    arg [-headerpad_max_install_names] ==&gt; ignore\n    arg [-v] ==&gt; ignore\n    arg [CMakeFiles/cmTC_34702.dir/CMakeCXXCompilerABI.cpp.o] ==&gt; ignore\n    arg [-lc++] ==&gt; lib [c++]\n    arg [-lSystem] ==&gt; lib [System]\n    arg [/Library/Developer/CommandLineTools/usr/bin/../lib/clang/7.3.0/lib/darwin/libclang_rt.osx.a] ==&gt; lib [/Library/Developer/CommandLineTools/usr/bin/../lib/clang/7.3.0/lib/darwin/libclang_rt.osx.a]\n  Library search paths: [;/usr/lib;/usr/local/lib]\n  Framework search paths: [;/Library/Frameworks/;/System/Library/Frameworks/]\n  remove lib [System]\n  collapse lib [/Library/Developer/CommandLineTools/usr/bin/../lib/clang/7.3.0/lib/darwin/libclang_rt.osx.a] ==&gt; [/Library/Developer/CommandLineTools/usr/lib/clang/7.3.0/lib/darwin/libclang_rt.osx.a]\n  collapse library dir [/usr/lib] ==&gt; [/usr/lib]\n  collapse library dir [/usr/local/lib] ==&gt; [/usr/local/lib]\n  collapse framework dir [/Library/Frameworks/] ==&gt; [/Library/Frameworks]\n  collapse framework dir [/System/Library/Frameworks/] ==&gt; [/System/Library/Frameworks]\n  implicit libs: [c++;/Library/Developer/CommandLineTools/usr/lib/clang/7.3.0/lib/darwin/libclang_rt.osx.a]\n  implicit dirs: [/usr/lib;/usr/local/lib]\n  implicit fwks: [/Library/Frameworks;/System/Library/Frameworks]\n\nDetecting CXX [-std=c++11] compiler features compiled with the following output:\nChange Dir: /Users/user/code/cpp/mongo-cxx-driver/build/CMakeFiles/CMakeTmp\n\nRun Build Command:\"/usr/bin/make\" \"cmTC_a8d63/fast\"\n/Library/Developer/CommandLineTools/usr/bin/make -f CMakeFiles/cmTC_a8d63.dir/build.make CMakeFiles/cmTC_a8d63.dir/build\nBuilding CXX object CMakeFiles/cmTC_a8d63.dir/feature_tests.cxx.o\n/Library/Developer/CommandLineTools/usr/bin/c++     -std=c++11 -o CMakeFiles/cmTC_a8d63.dir/feature_tests.cxx.o -c /Users/user/code/cpp/mongo-cxx-driver/build/CMakeFiles/feature_tests.cxx\nLinking CXX executable cmTC_a8d63\n/usr/local/Cellar/cmake/3.6.2/bin/cmake -E cmake_link_script CMakeFiles/cmTC_a8d63.dir/link.txt --verbose=1\n/Library/Developer/CommandLineTools/usr/bin/c++     -Wl,-search_paths_first -Wl,-headerpad_max_install_names   CMakeFiles/cmTC_a8d63.dir/feature_tests.cxx.o  -o cmTC_a8d63  \n\n\n    Feature record: CXX_FEATURE:0cxx_aggregate_default_initializers\n    ...\n    Feature record: CXX_FEATURE:1cxx_variadic_templates\n\nDetecting C [-std=c11] compiler features compiled with the following output:\nChange Dir: /Users/user/code/cpp/mongo-cxx-driver/build/CMakeFiles/CMakeTmp\n\nRun Build Command:\"/usr/bin/make\" \"cmTC_9a269/fast\"\n/Library/Developer/CommandLineTools/usr/bin/make -f CMakeFiles/cmTC_9a269.dir/build.make CMakeFiles/cmTC_9a269.dir/build\nBuilding C object CMakeFiles/cmTC_9a269.dir/feature_tests.c.o\n/Library/Developer/CommandLineTools/usr/bin/cc    -std=c11 -o CMakeFiles/cmTC_9a269.dir/feature_tests.c.o   -c /Users/user/code/cpp/mongo-cxx-driver/build/CMakeFiles/feature_tests.c\nLinking C executable cmTC_9a269\n/usr/local/Cellar/cmake/3.6.2/bin/cmake -E cmake_link_script CMakeFiles/cmTC_9a269.dir/link.txt --verbose=1\n/Library/Developer/CommandLineTools/usr/bin/cc    -Wl,-search_paths_first -Wl,-headerpad_max_install_names   CMakeFiles/cmTC_9a269.dir/feature_tests.c.o  -o cmTC_9a269  \n\n\n    Feature record: C_FEATURE:1c_function_prototypes\n    Feature record: C_FEATURE:1c_restrict\n    Feature record: C_FEATURE:1c_static_assert\n    Feature record: C_FEATURE:1c_variadic_macros\n</code></pre>\n\n<p>(if other lines are needed, I'd ba happy to send them).\nls /usr/local/lib/pkgconfig showed the following:</p>\n\n<pre><code>lcms2.pc        libbson-1.0.pc      libmongoc-1.0.pc    libmongoc-ssl-1.0.pc    libtiff-4.pc        mysqlclient.pc\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "math", "assembly", "bit-manipulation"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1473855956, "post_id": 39490345, "comment_id": 66298347, "body": "<a href=\"https://graphics.stanford.edu/~seander/bithacks.html#InterleaveBMN\" rel=\"nofollow noreferrer\">This</a> looks like it may work.  Not sure if or how it scales though."}, {"owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "edited": false, "score": 0, "creation_date": 1473856822, "post_id": 39490345, "comment_id": 66298893, "body": "It should scale fairly easily; add an initial shift by 16 and mask by <code>0x0000ffff0000ffff</code>, and extend all the other masks appropriately. So the new first step severs and moves the high 16 bits into the low part of the topmost word."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 4, "creation_date": 1473861053, "post_id": 39490345, "comment_id": 66301889, "body": "Can you use x86&#39;s BMI2 instruction set?  Two 64-bit <a href=\"http://www.felixcloutier.com/x86/PDEP.html\" rel=\"nofollow noreferrer\">PDEP with opposite masks</a> and one ordinary bitwise-OR should do the trick.  The intrinsic for PDEP is <code>_pdep_u64()</code>"}, {"owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1473878824, "post_id": 39490345, "comment_id": 66312678, "body": "@PeterCordes, that&#39;s a superior theoretical solution, but in practice I don&#39;t have BMI2/PDEP neither in Phenom 2 processor, nor in CUDA."}], "answers": [{"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 11, "creation_date": 1473861451, "post_id": 39490787, "comment_id": 66302197, "body": "RAM is cheap; cache-misses aren&#39;t.  Most programs area already bottlenecked on memory more than CPU.  This might win a microbenchmark where no other code uses up your cache footprint, but it won&#39;t win in real life unless this operation happens in bursts in a really tight loop."}, {"owner": {"reputation": 192, "user_id": 1796585, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffc5b940cfad93f86132344a6da38c14?s=128&d=identicon&r=PG", "display_name": "Mads Y", "link": "https://stackoverflow.com/users/1796585/mads-y"}, "edited": false, "score": 1, "creation_date": 1578060135, "post_id": 39490787, "comment_id": 105326006, "body": "It&#39;s still a good idea in some cases. I need to interleave two bytes, but doing it through 2 lookups of the upper and lower 4-bit nibbles of each byte might be worth it."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 192, "user_id": 1796585, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ffc5b940cfad93f86132344a6da38c14?s=128&d=identicon&r=PG", "display_name": "Mads Y", "link": "https://stackoverflow.com/users/1796585/mads-y"}, "edited": false, "score": 0, "creation_date": 1596052191, "post_id": 39490787, "comment_id": 111689940, "body": "@MadsY: Indeed, 4-bit LUTs (16x 1-byte entries) are small enough to actually stay hot in cache reliably, and can be a good tradeoff between memory and computation (and + shift to isolate each nibble, OR to combine)."}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": 2, "last_activity_date": 1473857071, "creation_date": 1473857071, "answer_id": 39490787, "question_id": 39490345, "link": "https://stackoverflow.com/questions/39490345/interleave-bits-efficiently/39490787#39490787", "title": "Interleave bits efficiently", "body": "<p>Would a short, precalculated array lookup count as a \"mathematical trick\"?</p>\n\n<p>Precalculate an array of 256 <code>uint16_t</code>s:</p>\n\n<pre><code>static const uint16_t lookup[256]={0x0000, 0x0001, 0x0005 ..., 0x5555};\n</code></pre>\n\n<p>We can interleave two eight-bit values, and come up with a 16 bit value easily:</p>\n\n<pre><code>uint16_t interleave(uint8_t a, uint8_t b)\n{\n    return (lookup[a] &lt;&lt; 1) | lookup[b];\n}\n</code></pre>\n\n<p>How to extend this to interleave two 32-bit values into a 64-bit value should be obvious: call this four times, for each one of the four bytes that make up a <code>uint32_t</code>, then <code>&lt;&lt;</code> an <code>|</code> the results together. Bribe the compiler to inline the whole thing, and the end result should be fairly quick and cheap.</p>\n\n<p>Since RAM is cheap these days, you might want to consider a precalculated table of 65536 <code>uint32_t</code>s, also.</p>\n"}, {"comments": [{"owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "edited": false, "score": 0, "creation_date": 1473874658, "post_id": 39490836, "comment_id": 66310561, "body": "Divide&amp;conquer approach doubles the number of required operations, while extension with the 5th array item and <code>or-and-assign</code>, if it works, increases the operation count by 1.25x ."}, {"owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "reply_to_user": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "edited": false, "score": 0, "creation_date": 1473877294, "post_id": 39490836, "comment_id": 66311857, "body": "Divide and conquer doesn&#39;t double in this case because the 32-bit value, divided into two 16-bit quantities, fits in a 64-bit word throughout, which your CPU can act upon atomically. But we&#39;re arguing semantics. I count it as logically an initial division, even though the divided thing continues to fit inside one scalar."}, {"owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "edited": false, "score": 0, "creation_date": 1473878531, "post_id": 39490836, "comment_id": 66312520, "body": "thanks, I misunderstood initially. I though you mean performing these 4 <code>or-and-assign</code> operations first on lower 32 bits, then on higher 32 bits."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 4777, "user_id": 5740428, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/955c329acc7388992f247b0b64c4e270?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Schultke", "link": "https://stackoverflow.com/users/5740428/jan-schultke"}, "edited": false, "score": 1, "creation_date": 1597969565, "post_id": 39490836, "comment_id": 112313217, "body": "@J.Schultke The question was already tagged <code>[c++]</code> so that&#39;s the default code formatting for unmarked blocks, without <code>&lt;!-- language: lang-c++ --&gt;</code> comments or backticks language.  I don&#39;t think your edit changed the syntax highlighting of the first code block at all.  The other minor changes were improvements so not rolling it back, but in future you can make your edits less noisy by keeping that in mind and looking for actual bad highlighting."}], "tags": [], "owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "is_accepted": true, "score": 9, "last_activity_date": 1597961993, "last_edit_date": 1597961993, "creation_date": 1473857203, "answer_id": 39490836, "question_id": 39490345, "link": "https://stackoverflow.com/questions/39490345/interleave-bits-efficiently/39490836#39490836", "title": "Interleave bits efficiently", "body": "<p>NathanOliver's link offers the 16-bit -&gt; 32-bit implementation:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>static const unsigned int B[] = {0x55555555, 0x33333333, 0x0F0F0F0F, 0x00FF00FF};\nstatic const unsigned int S[] = {1, 2, 4, 8};\n\nunsigned int x; // Interleave lower 16 bits of x and y, so the bits of x\nunsigned int y; // are in the even positions and bits from y in the odd;\nunsigned int z; // z gets the resulting 32-bit Morton Number.  \n                // x and y must initially be less than 65536.\n\nx = (x | (x &lt;&lt; S[3])) &amp; B[3];\nx = (x | (x &lt;&lt; S[2])) &amp; B[2];\nx = (x | (x &lt;&lt; S[1])) &amp; B[1];\nx = (x | (x &lt;&lt; S[0])) &amp; B[0];\n\ny = [the same thing on y]\n\nz = x | (y &lt;&lt; 1);\n</code></pre>\n<p>Which works by:</p>\n<ol>\n<li>leave the low 8 bits of x where they are. Move the high 8 bits up by 8;</li>\n<li>divide in half and do the same thing, this time leaving the low pairs of 4 bits where they are and moving the others up by 4;</li>\n<li>and again, and again.</li>\n</ol>\n<p>I.e. it proceeds as:</p>\n<pre><code>   0000 0000 0000 0000  abcd efgh ijkl mnop\n-&gt; 0000 0000 abcd efgh  0000 0000 ijkl mnop\n-&gt; 0000 abcd 0000 efgh  0000 ijkl 0000 mnop\n-&gt; 00ab 00cd 00ef 00gh  00ij 00kl 00mn 00op\n-&gt; 0a0b 0c0d 0e0f 0g0h  0i0j 0k0l 0m0n 0o0p\n</code></pre>\n<p>And then combines the two inputs together.</p>\n<p>As per my earlier comment, to extend that to 64 bits, just add an initial shift by 16 and mask by <code>0x0000ffff0000ffff</code>, either because you can intuitively follow the pattern or as a divide-and-conquer step, turning the 32-bit problem into two non-overlapping 16-bit problems and then using the 16-bit solution.</p>\n"}, {"comments": [{"owner": {"reputation": 4590, "user_id": 2879325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2503121b7e7487cd870c8afe40f0cf21?s=128&d=identicon&r=PG", "display_name": "Ext3h", "link": "https://stackoverflow.com/users/2879325/ext3h"}, "edited": false, "score": 0, "creation_date": 1596052679, "post_id": 63161359, "comment_id": 111690169, "body": "Good choice, and with 64 bit input / 128 bit output it&#39;s even pretty much ideal. But it&#39;s also worth noting thay this is <i>currently</i> still a somewhat &quot;new&quot; extension and will not be available on AMD Phenom II and Intels Ivy Bridge processors which you may still encounter in the wild."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 4590, "user_id": 2879325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2503121b7e7487cd870c8afe40f0cf21?s=128&d=identicon&r=PG", "display_name": "Ext3h", "link": "https://stackoverflow.com/users/2879325/ext3h"}, "edited": false, "score": 0, "creation_date": 1596052816, "post_id": 63161359, "comment_id": 111690223, "body": "@Ext3h:  <a href=\"https://www.felixcloutier.com/x86/pclmulqdq\" rel=\"nofollow noreferrer\">felixcloutier.com/x86/pclmulqdq</a> is available since Westmere for Intel (2nd-gen Nehalem). <a href=\"https://godbolt.org/z/jWaGWv\" rel=\"nofollow noreferrer\">godbolt.org/z/jWaGWv</a>.  But yes, it&#39;s an extension, not baseline x86-64."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1596055048, "post_id": 63161359, "comment_id": 111691149, "body": "Since we&#39;re mentioning x86 extensions, BMI2 <a href=\"https://www.felixcloutier.com/x86/pdep\" rel=\"nofollow noreferrer\"><code>pdep r64, r64, r&#47;m64</code></a> is efficient on Intel (1 uop, 3c latency) but not AMD.  It can expand a 32-bit to a 64-bit integer with zeros in between.  (BMI2 is available on Haswell and later, and on AMD Zen and later, but <code>pdep</code>/<code>pext</code> are very slow on Zen)"}], "tags": [], "owner": {"reputation": 713, "user_id": 6425831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d8df927ca885cc4a64536ee49603119?s=128&d=identicon&r=PG", "display_name": "saolof", "link": "https://stackoverflow.com/users/6425831/saolof"}, "is_accepted": false, "score": 5, "last_activity_date": 1596052687, "last_edit_date": 1596052687, "creation_date": 1596051919, "answer_id": 63161359, "question_id": 39490345, "link": "https://stackoverflow.com/questions/39490345/interleave-bits-efficiently/63161359#63161359", "title": "Interleave bits efficiently", "body": "<p>For larger integers, it's worth mentioning the clmul x86 extension for finite field multiplication (carryless multiplication). Interleaving an integer with zeros is equivalent to a carryless multiplication of the integer with itself, which is a single ALU instruction.</p>\n"}], "owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2772, "favorite_count": 1, "accepted_answer_id": 39490836, "answer_count": 3, "score": 13, "last_activity_date": 1597961993, "creation_date": 1473855676, "last_edit_date": 1473866648, "question_id": 39490345, "link": "https://stackoverflow.com/questions/39490345/interleave-bits-efficiently", "title": "Interleave bits efficiently", "body": "<p>I need to make <code>uint64_t</code> out of 2 <code>uint32_t</code> interleaving the bits: if <code>A=a0a1a2...a31</code> and <code>B=b0b1...b31</code>, I need C=<code>a0b0a1b1...a31b31</code>. Is there a way to do this efficiently? So far I've got only the naive approach with a <code>for</code> loop of 32 iterations, where each iteration does <code>C|=((A&amp;(1&lt;&lt;i))&lt;&lt;i)|((B&amp;(1&lt;&lt;i))&lt;&lt;(i+1))</code>.</p>\n\n<p>I guess there should be some mathematical trick like multiplying A and B by some special number which results in interleaving their bits with zeros in the resulting 64-bit number, so that what only remains is to <code>or</code> these products. But I can't find such multiplier.</p>\n\n<p>Another potential way to go is a compiler intrinsic or assembly instruction, but I don't know of such.</p>\n"}, {"tags": ["c#", "c++", "wcf", "iis", "dll"], "comments": [{"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1473855545, "post_id": 39490166, "comment_id": 66298065, "body": "can you add some code and show things here not as screenshots but inline text?"}, {"owner": {"reputation": 41, "user_id": 2897527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ad2de19ae755b88ed54c85a77a391a9?s=128&d=identicon&r=PG&f=1", "display_name": "srs_saiko", "link": "https://stackoverflow.com/users/2897527/srs-saiko"}, "reply_to_user": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1473856629, "post_id": 39490166, "comment_id": 66298764, "body": "@Hayt I have edited the question as you asked"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6838656"}, "edited": false, "score": 0, "creation_date": 1474016110, "post_id": 39490166, "comment_id": 66369593, "body": "<a href=\"http://stackoverflow.com/questions/26979025/reference-c-library-in-wcf-service\" title=\"reference c library in wcf service\">stackoverflow.com/questions/26979025/&hellip;</a>"}], "owner": {"reputation": 41, "user_id": 2897527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ad2de19ae755b88ed54c85a77a391a9?s=128&d=identicon&r=PG&f=1", "display_name": "srs_saiko", "link": "https://stackoverflow.com/users/2897527/srs-saiko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1473856873, "creation_date": 1473855164, "last_edit_date": 1592644375, "question_id": 39490166, "link": "https://stackoverflow.com/questions/39490166/c-dll-being-called-from-wcf-service-application-not-working-when-deployed-in-i", "title": "C++ DLL being called from WCF Service Application not working when deployed in IIS 8?", "body": "<p>I am calling a C++ DLL using DLLImport. The code is in a class library project which is being called from a WCF Service Application.</p>\n<pre><code> [DllImport(dllPath, SetLastError=true)]\n public static extern IntPtr CDSEngineConstructor();\n\n\n [DllImport(dllPath, SetLastError=true)]\n [return: MarshalAs(UnmanagedType.I1)]\n public static extern bool InitialiseDSEngine(StringBuilder pSB, IntPtr pDSEngine, StringBuilder pName, [MarshalAs(UnmanagedType.LPArray)] string[] ppListToLoad, UInt32 usiNumber);\n</code></pre>\n<p>I get a IntPtr on successfully calling the dll's constructor.</p>\n<pre><code>IntPtr pEngine = CDSEngineConstructor();\n</code></pre>\n<p>I use the above value as a parameter to call another initialize method in the dll.</p>\n<pre><code>if (!InitialiseDSEngine(sb, pEngine, sbReportingName, lstTyping.ToArray(), 10))\n        throw new Exception(&quot;Failded to initilaise the search engine. please check the logs&quot;)\n</code></pre>\n<p><strong>EDIT</strong>: the log files are not getting created!</p>\n<p>The above method runs fine when I run my WCF in VS2008 development server. But after deploying the same in IIS 8, the above method returns false which means it fails to initialize and I cannot proceed further.</p>\n<p>The DLL was built with Release mode in x86. My Class Library Project is also built with same Active configuration.</p>\n<p>I have also tried to install C++ redistributable 2008 in the server. The IIS is setup to run 32 bit applications.</p>\n<p>I am unable to find a solution and reason for this behavior. Querying for the same returns results where the dll itself is not loaded. But I'm able to load the dll correctly in this case.</p>\n<p>Let me know if I have missed any information.</p>\n"}, {"tags": ["c++", "vim", "clang", "clang-format"], "comments": [{"owner": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "edited": false, "score": 0, "creation_date": 1473857450, "post_id": 39490082, "comment_id": 66299294, "body": "Vim in Ubuntu is compiled with Python 3 instead of Python 2. You need to compile your own vim with Python 2 to get that plug in work"}, {"owner": {"reputation": 11126, "user_id": 136285, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/98d92168760c5b402a315926e4700d5f?s=128&d=identicon&r=PG", "display_name": "malat", "link": "https://stackoverflow.com/users/136285/malat"}, "edited": false, "score": 0, "creation_date": 1599113828, "post_id": 39490082, "comment_id": 112673795, "body": "<code>s&#47;:pyf&#47;:py3f&#47;</code> works for me"}], "answers": [{"comments": [{"owner": {"reputation": 1507, "user_id": 4296244, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e8c0940effc84e18a8541145ef2dfbfe?s=128&d=identicon&r=PG&f=1", "display_name": "Natjo", "link": "https://stackoverflow.com/users/4296244/natjo"}, "edited": false, "score": 0, "creation_date": 1473931105, "post_id": 39490977, "comment_id": 66330995, "body": "I expect I&#39;m not the only one with this problem, as I don&#39;t want to compile with py2 (I&#39;m pretty sure this will bring up new conflicts with other plugins), are there any addons for Python 3? I can&#39;t find any that work"}, {"owner": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "reply_to_user": {"reputation": 1507, "user_id": 4296244, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e8c0940effc84e18a8541145ef2dfbfe?s=128&d=identicon&r=PG&f=1", "display_name": "Natjo", "link": "https://stackoverflow.com/users/4296244/natjo"}, "edited": false, "score": 0, "creation_date": 1473932036, "post_id": 39490977, "comment_id": 66331688, "body": "Check your vimrc first. In my case, there&#39;re no conflict when switch to Python 2. Unfortunately, afaik, there is no available add on yet. Make it yourself"}], "tags": [], "owner": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "is_accepted": true, "score": 5, "last_activity_date": 1473857653, "creation_date": 1473857653, "answer_id": 39490977, "question_id": 39490082, "link": "https://stackoverflow.com/questions/39490082/clang-format-not-working-under-gvim/39490977#39490977", "title": "clang-format not working under gVim", "body": "<p>The Vim binary shipped with Ubuntu 16.04 is compiled with Python 3. The vim addons of clang-format is written by Python 2. </p>\n\n<p>You need to either:</p>\n\n<ul>\n<li>write your own addon by Python 3</li>\n<li>Compile your own vim with Python 2, which is the easiest way </li>\n</ul>\n\n<p>The instructions to build vim with Python can be found by Google.</p>\n"}, {"comments": [{"owner": {"reputation": 1507, "user_id": 4296244, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e8c0940effc84e18a8541145ef2dfbfe?s=128&d=identicon&r=PG&f=1", "display_name": "Natjo", "link": "https://stackoverflow.com/users/4296244/natjo"}, "edited": false, "score": 0, "creation_date": 1475227698, "post_id": 39781747, "comment_id": 66869661, "body": "Thank you for your answer. I installed <code>clang-format</code> via apt-get. It created a <code>clang-format.py</code> file in my chosen path: <code>&#47;usr&#47;share&#47;vim&#47;addons&#47;syntax</code>. I overwrote it with the one from the link and tried it on gvim with <code>:pyf3 &#47;usr&#47;share&#47;vim&#47;addons&#47;syntax&#47;clang-format.py</code>. It did not work and gave me the message <code>Not an editor command ...</code>. What did I do wrong?"}, {"owner": {"reputation": 351, "user_id": 6902164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4245531297a6e9ed0f75c6994298dff4?s=128&d=identicon&r=PG&f=1", "display_name": "suncho", "link": "https://stackoverflow.com/users/6902164/suncho"}, "reply_to_user": {"reputation": 1507, "user_id": 4296244, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e8c0940effc84e18a8541145ef2dfbfe?s=128&d=identicon&r=PG&f=1", "display_name": "Natjo", "link": "https://stackoverflow.com/users/4296244/natjo"}, "edited": false, "score": 0, "creation_date": 1475251789, "post_id": 39781747, "comment_id": 66884315, "body": "My mistake.  It should be <code>:py3f</code>, not <code>:pyf3</code>.  Editing my answer to reflect this."}, {"owner": {"reputation": 351, "user_id": 6902164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4245531297a6e9ed0f75c6994298dff4?s=128&d=identicon&r=PG&f=1", "display_name": "suncho", "link": "https://stackoverflow.com/users/6902164/suncho"}, "reply_to_user": {"reputation": 1507, "user_id": 4296244, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e8c0940effc84e18a8541145ef2dfbfe?s=128&d=identicon&r=PG&f=1", "display_name": "Natjo", "link": "https://stackoverflow.com/users/4296244/natjo"}, "edited": false, "score": 0, "creation_date": 1475252415, "post_id": 39781747, "comment_id": 66884627, "body": "Also, be careful about deciding to save/install anything under <code>&#47;usr</code> outside of <code>&#47;usr&#47;local</code>:  <a href=\"http://www.linuxfromscratch.org/blfs/view/svn/introduction/position.html\" rel=\"nofollow noreferrer\">linuxfromscratch.org/blfs/view/svn/introduction/position.htm&zwnj;&#8203;l</a>  If you save it in <code>&#47;usr</code> outside of <code>&#47;usr&#47;local</code>, your freshly-downloaded <code>clang-format.py</code> could be overwritten by the distribution when you upgrade."}, {"owner": {"reputation": 3429, "user_id": 1787596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/byPMI.png?s=128&g=1", "display_name": "urban_raccoons", "link": "https://stackoverflow.com/users/1787596/urban-raccoons"}, "edited": false, "score": 0, "creation_date": 1534431510, "post_id": 39781747, "comment_id": 90711541, "body": "clang-format-4.0 seems to be shipping with a python 3 version of clang-format.py, so my vim config for binding control+k to format the line was as simple as <code>map &lt;C-K&gt; :py3f &#47;usr&#47;share&#47;clang&#47;clang-format-4.0&#47;clang-format.py&lt;cr&gt;</code>"}], "tags": [], "owner": {"reputation": 351, "user_id": 6902164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4245531297a6e9ed0f75c6994298dff4?s=128&d=identicon&r=PG&f=1", "display_name": "suncho", "link": "https://stackoverflow.com/users/6902164/suncho"}, "is_accepted": false, "score": 14, "last_activity_date": 1475251816, "last_edit_date": 1475251816, "creation_date": 1475193528, "answer_id": 39781747, "question_id": 39490082, "link": "https://stackoverflow.com/questions/39490082/clang-format-not-working-under-gvim/39781747#39781747", "title": "clang-format not working under gVim", "body": "<p>Dahn's answer is correct that the Vim binary that ships with Ubuntu 16.04 is compiled with Python 3 rather than Python 2.  The <code>clang-format-3.8.py</code> script in the Ubuntu 16.04 <code>clang-format-3.8</code> package is not compatible with Python 3.</p>\n\n<p>But the latest <code>clang-format.py</code> <em>does</em> work with Python 3.  You can get it here:</p>\n\n<p><a href=\"https://llvm.org/svn/llvm-project/cfe/trunk/tools/clang-format/clang-format.py\" rel=\"noreferrer\">https://llvm.org/svn/llvm-project/cfe/trunk/tools/clang-format/clang-format.py</a></p>\n\n<p>I think it was just a matter of putting parentheses around the <code>print</code> statements.</p>\n\n<p>Save this file somewhere on your computer such as <code>/usr/local/share/vim/addons/syntax/</code>.</p>\n\n<p>This script uses <code>clang-format</code> as the binary name, so you'll want to install the <code>clang-format</code> package, which installs the <code>clang-format</code> command as a symlink to <code>clang-format-3.8</code>.</p>\n\n<p>Since Vim is now loading a Python 3 script, replace your <code>:pyf</code> (not available) command with <code>:py3f</code>:</p>\n\n<p><code>:py3f /usr/local/share/vim/addons/syntax/clang-format.py</code></p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 2058430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949562f8df8512e64d2a47c6f02251f1?s=128&d=identicon&r=PG", "display_name": "LokmanDz", "link": "https://stackoverflow.com/users/2058430/lokmandz"}, "is_accepted": false, "score": 2, "last_activity_date": 1484131656, "creation_date": 1484131656, "answer_id": 41588788, "question_id": 39490082, "link": "https://stackoverflow.com/questions/39490082/clang-format-not-working-under-gvim/41588788#41588788", "title": "clang-format not working under gVim", "body": "<p>I solved the problem differently using a combination of <code>bash</code> and <code>vim</code> commands.</p>\n\n<p>First, I installed <code>clang-format</code> package </p>\n\n<pre><code># apt-get install clang-format-3.5\n</code></pre>\n\n<p>(I choose version 3.5 but you can choose a different one)</p>\n\n<p>Second, Test if <code>clang-format</code> is working</p>\n\n<pre><code>$ clang-format-3.5 -style=Google  test.cpp\n</code></pre>\n\n<p>Then, run <code>vim</code> </p>\n\n<pre><code>$ vim test.cpp\n</code></pre>\n\n<p><code>vim</code> allows to run an external command and print it's output into current buffer</p>\n\n<pre><code>:r ! clang-format-3.5 -style=Google  %\n</code></pre>\n\n<p>(more details about external commands in vim <a href=\"https://www.linux.com/learn/vim-tips-working-external-commands\" rel=\"nofollow noreferrer\">https://www.linux.com/learn/vim-tips-working-external-commands</a>)</p>\n\n<p>This will append the output of <code>clang-format</code> into current buffer. To replace current buffer, which is the desirable effect, specify the lines to output into </p>\n\n<pre><code>:%! clang-format-3.5 -style=Google  %\n</code></pre>\n\n<p>(the first <code>%</code> means all line in current file)</p>\n\n<p>You can make this process more productive by defining new commands in vim (using <code>command</code>) for both visual and command-line modes.</p>\n"}, {"tags": [], "owner": {"reputation": 342, "user_id": 4488349, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-mnKoSd4sEjg/AAAAAAAAAAI/AAAAAAAABME/VNYimyyUwno/photo.jpg?sz=128", "display_name": "debo", "link": "https://stackoverflow.com/users/4488349/debo"}, "is_accepted": false, "score": 2, "last_activity_date": 1536609762, "creation_date": 1536609762, "answer_id": 52264712, "question_id": 39490082, "link": "https://stackoverflow.com/questions/39490082/clang-format-not-working-under-gvim/52264712#52264712", "title": "clang-format not working under gVim", "body": "<p>In addition to the above answers I had to do a few more things. I downloaded a new python file and changed the key mapping recommended by in the clang python file to the following in my .vimrc: </p>\n\n<pre><code>    map &lt;C-I&gt; :py3file &lt;path-to-this-file&gt;/clang-format.py&lt;cr&gt;\n    imap &lt;C-I&gt; &lt;c-o&gt;:py3file &lt;path-to-this-file&gt;/clang-format.py&lt;cr&gt;\n</code></pre>\n\n<p>This solved the E319 problem I was getting. </p>\n"}], "owner": {"reputation": 1507, "user_id": 4296244, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e8c0940effc84e18a8541145ef2dfbfe?s=128&d=identicon&r=PG&f=1", "display_name": "Natjo", "link": "https://stackoverflow.com/users/4296244/natjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3606, "favorite_count": 1, "accepted_answer_id": 39490977, "answer_count": 4, "score": 6, "last_activity_date": 1536609762, "creation_date": 1473854926, "question_id": 39490082, "link": "https://stackoverflow.com/questions/39490082/clang-format-not-working-under-gvim", "title": "clang-format not working under gVim", "body": "<p>I installed <code>clang-format-3.8</code> via apt-get.\nNow I try to use it in gVim, but it is not working.\nI checked and clang-format-3.8 exists in the folder <code>/usr/share/vim/addons/syntax</code>.</p>\n\n<p>But when I enter <code>:pyf /usr/share/vim/addons/syntax/clang-format-3.8.py</code> in my vim command line, it returns:</p>\n\n<p><code>E319: Sorry, the command is not available in this version</code>. </p>\n\n<p>I use gVim 7.4 under Ubuntu 16.04.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 941, "user_id": 1577930, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2c12d1e2c286463c11ea6e1258bb58b3?s=128&d=identicon&r=PG", "display_name": "The Marlboro Man", "link": "https://stackoverflow.com/users/1577930/the-marlboro-man"}, "edited": false, "score": 0, "creation_date": 1473855016, "post_id": 39490046, "comment_id": 66297713, "body": "I may be wrong but object initialization is different from object construction. Also, there&#39;s no operator=(const Base&amp;) defined. :)."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 941, "user_id": 1577930, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2c12d1e2c286463c11ea6e1258bb58b3?s=128&d=identicon&r=PG", "display_name": "The Marlboro Man", "link": "https://stackoverflow.com/users/1577930/the-marlboro-man"}, "edited": false, "score": 0, "creation_date": 1473855073, "post_id": 39490046, "comment_id": 66297761, "body": "@TheMarlboroMan Well, there&#39;s no assignment anywhere, so..."}], "owner": {"reputation": 3, "user_id": 6134424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3489de1d73920365b5485f00283cb0dd?s=128&d=identicon&r=PG&f=1", "display_name": "ellischan", "link": "https://stackoverflow.com/users/6134424/ellischan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "closed_date": 1473855027, "answer_count": 0, "score": 0, "last_activity_date": 1473863102, "creation_date": 1473854835, "last_edit_date": 1473863102, "question_id": 39490046, "link": "https://stackoverflow.com/questions/39490046/the-process-about-one-object-defined-by-anonymous-object", "closed_reason": "Duplicate", "title": "The process about one Object Defined by Anonymous Object?", "body": "<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Base{\npublic:\n    Base()\n    {\n        cout&lt;&lt;\"Base()\"&lt;&lt;endl;\n    }\n\n    Base(const Base&amp; b) \n    {\n        cout&lt;&lt;\"Base(Base&amp;)\"&lt;&lt;endl;\n    }\n\n    virtual ~Base()\n    {\n        cout&lt;&lt;\"~Base()\"&lt;&lt;endl;\n    }\n};\n\nint main()\n{\n    Base b = Base();\n    return 0;\n}\n</code></pre>\n\n<p>platform: win7/ CodeBlock/ mingw\noutput result on my screen:    </p>\n\n<blockquote>\n  <p>Base()<br>\n     ~Base()</p>\n</blockquote>\n\n<p>why Base(Base&amp;) was not called?</p>\n\n<p>My Question:<br>\nIn <code>main()</code>, <code>Base b = Base();</code> , I think <code>Base()</code> will call <code>Base()</code> Constructor and then a anonymous object was built,  after that, \"Base b = anonymous object\" will call <code>Base(const Base&amp; b)</code>, but the output result tell me that the copy-constructor was not called. Can you tell me why?</p>\n"}, {"tags": ["c++", "bash", "valgrind", "pid"], "comments": [{"owner": {"reputation": 1462, "user_id": 5469991, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-EhCmF1jHGMk/AAAAAAAAAAI/AAAAAAAACgs/arVjyog6MGo/photo.jpg?sz=128", "display_name": "piyushj", "link": "https://stackoverflow.com/users/5469991/piyushj"}, "edited": false, "score": 0, "creation_date": 1473855059, "post_id": 39490024, "comment_id": 66297755, "body": "Parent Process ID is not required to run valgrind normally"}, {"owner": {"reputation": 1812, "user_id": 2689839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1pQkd.jpg?s=128&g=1", "display_name": "Parthiban", "link": "https://stackoverflow.com/users/2689839/parthiban"}, "edited": false, "score": 0, "creation_date": 1473858020, "post_id": 39490024, "comment_id": 66299717, "body": "You can re-write your application to get the parent process ID inside your program using <code>getppid()</code>. If you don&#39;t have control over your source code of your application, you can control the PID in Linux using ns_last_pid proc interface. Check <a href=\"http://efiop-notes.blogspot.de/2014/06/how-to-set-pid-using-nslastpid.html\" rel=\"nofollow noreferrer\">efiop-notes.blogspot.de/2014/06/&hellip;</a> and <a href=\"http://stackoverflow.com/questions/18122592/how-to-set-process-id-in-linux-for-an-specific-program\" title=\"how to set process id in linux for an specific program\">stackoverflow.com/questions/18122592/&hellip;</a>. With that proc file you can force the system to use the specific PID for next process creation (not sure how much guaranteed)."}, {"owner": {"reputation": 829, "user_id": 3363978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XDygU.jpg?s=128&g=1", "display_name": "PraAnj", "link": "https://stackoverflow.com/users/3363978/praanj"}, "edited": false, "score": 0, "creation_date": 1486636973, "post_id": 39490024, "comment_id": 71435356, "body": "I dont have access to codes to rewrite the appication and it has the limitation of invoking through a parent process ID."}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 0, "last_activity_date": 1535347976, "creation_date": 1535347976, "answer_id": 52033061, "question_id": 39490024, "link": "https://stackoverflow.com/questions/39490024/find-valgrind-pid-to-invoke-the-application/52033061#52033061", "title": "Find Valgrind PID to invoke the application", "body": "<p>You can try</p>\n\n<pre><code>( exec valgrind --leak-check=no --error-limit=no MyApplication $$ )\n</code></pre>\n\n<p>The parentheses create a subshell. <code>$$</code> expands to the PID of the shell itself.</p>\n\n<p>Then <code>exec</code> loads the <code>valgrind</code> program into the current process, which keeps its PID the same, i.e. valgrind will have the same PID as the (sub-)shell.</p>\n"}], "owner": {"reputation": 829, "user_id": 3363978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XDygU.jpg?s=128&g=1", "display_name": "PraAnj", "link": "https://stackoverflow.com/users/3363978/praanj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 764, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1535347976, "creation_date": 1473854775, "last_edit_date": 1535347477, "question_id": 39490024, "link": "https://stackoverflow.com/questions/39490024/find-valgrind-pid-to-invoke-the-application", "title": "Find Valgrind PID to invoke the application", "body": "<p>I'm trying to run an application using valgrind tool. But the application needs the parent process id which invoke the application as an argument. </p>\n\n<pre><code>valgrind --leak-check=no --error-limit=no MyApplication {Parent_Process_ID}\n</code></pre>\n\n<p>But since valgrind process is still starting, i cannot get the pid from bash. I tried the following way as taking the previous process pid.</p>\n\n<pre><code>valgrind --leak-check=no --error-limit=no MyApplication $!\n</code></pre>\n\n<p>But it gives the process id of process ran before valgrind. </p>\n\n<p>Can someone help me get the pid of valgrind here?</p>\n"}, {"tags": ["c++", "multithreading", "c++11"], "answers": [{"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": true, "score": 6, "last_activity_date": 1473854779, "creation_date": 1473854779, "answer_id": 39490025, "question_id": 39489990, "link": "https://stackoverflow.com/questions/39489990/passing-classs-member-function-to-stdthread/39490025#39490025", "title": "Passing class&#39;s member function to std::thread", "body": "<p>You should specify the scope </p>\n\n<pre><code>&amp;Timer::ThreadFunc\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 6830717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ByHVl.jpg?s=128&g=1", "display_name": "Dragon", "link": "https://stackoverflow.com/users/6830717/dragon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1396, "favorite_count": 0, "closed_date": 1473864315, "accepted_answer_id": 39490025, "answer_count": 1, "score": 6, "last_activity_date": 1473867443, "creation_date": 1473854648, "last_edit_date": 1473867443, "question_id": 39489990, "link": "https://stackoverflow.com/questions/39489990/passing-classs-member-function-to-stdthread", "closed_reason": "Duplicate", "title": "Passing class&#39;s member function to std::thread", "body": "<p>I have a problem with using std::thread in my code:</p>\n\n<pre><code>Class Timer\n{\n...\npublic:\n    void Start(bool Asynch = true)\n    {\n        if (IsAlive())\n        {\n            return;\n        }\n        alive = true;\n        repeat_count = call_number;\n        if (Asynch)\n        {\n            t_thread = std::thread(&amp;ThreadFunc, this);\n        }\n        else\n        {\n            this-&gt;ThreadFunc();\n        }\n    }\n    void Stop()\n    {\n        alive = false;\n        t_thread.join();\n    }\n...\n}\n</code></pre>\n\n<p>I get following error: </p>\n\n<blockquote>\n  <p>error C2276: '&amp;': illegal operation on bound member function expression</p>\n</blockquote>\n\n<p>t_thread is class's private std::thread instance, ThreadFunc() is private member function of the class that returns void;</p>\n\n<p>I think I understand that there are 2 ways to send member function to std::thread, if the function is static I would use t_thread = std::thread(threadfunc); But I don't want ThreadFunc to be static, and doing it like this gives me error.</p>\n\n<p>I think I solved the problem by creating another function:</p>\n\n<pre><code>std::thread ThreadReturner()\n{\n    return std::thread([=] { ThreadFunc(); });\n}\n...\nt_thread = ThreadReturner();\n</code></pre>\n\n<p>This way I don't get errors, but I don't understand why first one doesn't work.</p>\n\n<p>Any help is appreciated.</p>\n\n<p>My question looks like a duplicate, but there's only 1 difference, in the other question's answer, std::thread was used outside of the class declaration or implementation, it was in main(), in which case specifying scope made sense to me, but not when std::thread was called inside of the class. That's the only difference that I saw and why I made this thread, sorry about possible duplicate.</p>\n"}, {"tags": ["c++", "qt", "templates", "qtestlib", "qttest"], "owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 495, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1473853935, "creation_date": 1473853935, "last_edit_date": 1495542333, "question_id": 39489763, "link": "https://stackoverflow.com/questions/39489763/how-to-pass-multiple-types-into-single-qtestaddcolumn-call", "title": "How to pass multiple types into single QTest::addColumn call", "body": "<p>I have a template function for serializing data to a file and another to retrieve it back using the ID returned by the fist function:</p>\n\n<pre><code>template&lt;typename T&gt; int serialize(const T &amp;value); //returns id\ntemplate&lt;typename T&gt; T deserialize(int id);\n</code></pre>\n\n<p>Now I want to create a unit test for these with number of types using <code>QTest</code> framework, the relevant incomplete <code>private slots</code>:</p>\n\n<pre><code>void serialization_data()\n{\n    QTest::addColumn&lt;???&gt;(\"data\");\n    QTest::addColumn&lt;int&gt;(\"id\"); //id is assigned sequentially starting from 0\n\n    QTest::newRow(\"row1\") &lt;&lt; QByteArray(\"Array\") &lt;&lt; 0;\n    QTest::newRow(\"row2\") &lt;&lt; QString(\"String\") &lt;&lt; 1;\n    // etc. \n}\n\nvoid serialization()\n{\n    QFETCH(???, data);\n    QFETCH(int, id);\n\n    QVERIFY(serialize(data) == id);\n    QVERIFY(deserialize&lt;???&gt;(id) == data);\n}\n</code></pre>\n\n<p>My question basically is what should be the substitue of <code>???</code>.</p>\n\n<p><strong>Spelling it out</strong></p>\n\n<p>Obvious solution for completeness sake. I am specifically trying to find a solution that would not require typing it all out.</p>\n\n<p><strong>QVariant</strong></p>\n\n<p>One workaround is using <code>QVariant</code>. The problems with that are many. First it is rather messy, even when using Qt types because things like <code>QVector&lt;qint64&gt;</code> require registering them to the meta system, registering their streaming operators AND registering their comparison operators... Furthermore it adds serialization of the <code>QVariant</code> itself to the mix and serializing custom types in <code>QVariant</code> apparently involves some further data written than the types themselves. It certainly is not just what the <a href=\"http://doc.qt.io/qt-5/datastreamformat.html\" rel=\"nofollow noreferrer\">docs</a> say it should be for <code>QVariant</code> - I guess it might have to do with the meta system and its special streaming methods that are <a href=\"http://doc.qt.io/qt-5/qmetatype.html#save\" rel=\"nofollow noreferrer\">invoked when serializing custom types</a> in <code>QVariant</code>. </p>\n\n<p><strong>void* and dynamic_cast?</strong></p>\n\n<p>Another option I thought of was using <code>typeid</code>'s result <code>type_info</code> along with <code>void*</code>. The <code>???</code> would be replaced by <code>void</code>* in the <code>_data</code> and another column containing the <code>const type_info*</code> would be provided so that the test method could convert it to the proper type and dereference it. <a href=\"https://stackoverflow.com/questions/4972795/how-do-i-typecast-with-type-info\">But that is unfortunately not possible it seems.</a></p>\n\n<p>Are there any other options?</p>\n"}, {"tags": ["c++", "linux"], "comments": [{"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 1, "creation_date": 1473853979, "post_id": 39489757, "comment_id": 66297070, "body": "What platform are you on?"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 5, "creation_date": 1473854420, "post_id": 39489757, "comment_id": 66297356, "body": "There&#39;s no way to poll the keyboard in standard C++, you need to rely on OS specific functions."}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1473854655, "post_id": 39489757, "comment_id": 66297493, "body": "@MarkRansom not totally agree with you: since c++11, you can create thread and have some control on it, and have some basic synchronization mechanism. So you can have a thread which do calculation and a second one which read standard input. When second receive an input, it can tell to the other that it has to quit"}, {"owner": {"reputation": 3836, "user_id": 3275464, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/g6Pnl.png?s=128&g=1", "display_name": "Learning is a mess", "link": "https://stackoverflow.com/users/3275464/learning-is-a-mess"}, "reply_to_user": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1473855032, "post_id": 39489757, "comment_id": 66297731, "body": "@JohnZwinck: Linux"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1473855037, "post_id": 39489757, "comment_id": 66297735, "body": "@Garf365 but <i>standard input</i> is different from <i>keyboard input</i>."}, {"owner": {"reputation": 13971, "user_id": 554807, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/11449ff391eb9e813ac9f467ae6e0102?s=128&d=identicon&r=PG", "display_name": "GreenAsJade", "link": "https://stackoverflow.com/users/554807/greenasjade"}, "edited": false, "score": 1, "creation_date": 1473855293, "post_id": 39489757, "comment_id": 66297907, "body": "@close-voter: it&#39;s perfectly clear what this question is asking.  It says <code>while(no_key_pressed){&#47;*do calculation*&#47;}</code>."}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1473855482, "post_id": 39489757, "comment_id": 66298032, "body": "@user2079303: right, I misread the comment about &quot;keyboard input&quot;, I apologize. But you can poll standard input with modern c++ in a portable way"}], "answers": [{"comments": [{"owner": {"reputation": 13971, "user_id": 554807, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/11449ff391eb9e813ac9f467ae6e0102?s=128&d=identicon&r=PG", "display_name": "GreenAsJade", "link": "https://stackoverflow.com/users/554807/greenasjade"}, "edited": false, "score": 2, "creation_date": 1473855391, "post_id": 39490158, "comment_id": 66297978, "body": "Why not <code>while(!_kbhit()) {&#47;*do stuff*&#47;}</code> ?"}, {"owner": {"reputation": 356, "user_id": 5883673, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh5.googleusercontent.com/-ciLcvXTy91Y/AAAAAAAAAAI/AAAAAAAAAdo/b42U_vipBOE/photo.jpg?sz=128", "display_name": "Rok", "link": "https://stackoverflow.com/users/5883673/rok"}, "edited": false, "score": 3, "creation_date": 1473855433, "post_id": 39490158, "comment_id": 66298002, "body": "it doesn&#39;t really matter either way since OP is on Linux and not Windows"}, {"owner": {"reputation": 2585, "user_id": 6701918, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fBOp9.jpg?s=128&g=1", "display_name": "V. Semeria", "link": "https://stackoverflow.com/users/6701918/v-semeria"}, "edited": false, "score": 0, "creation_date": 1473856355, "post_id": 39490158, "comment_id": 66298588, "body": "Link to a linux answer added above."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1473861064, "post_id": 39490158, "comment_id": 66301899, "body": "@V.Semeria a link isn&#39;t good enough, it isn&#39;t an answer unless it actually contains the relevant information."}, {"owner": {"reputation": 2585, "user_id": 6701918, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fBOp9.jpg?s=128&g=1", "display_name": "V. Semeria", "link": "https://stackoverflow.com/users/6701918/v-semeria"}, "edited": false, "score": 0, "creation_date": 1473866566, "post_id": 39490158, "comment_id": 66305856, "body": "It contains an example of ncurses that solves the question."}], "tags": [], "owner": {"reputation": 2585, "user_id": 6701918, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fBOp9.jpg?s=128&g=1", "display_name": "V. Semeria", "link": "https://stackoverflow.com/users/6701918/v-semeria"}, "is_accepted": true, "score": 1, "last_activity_date": 1473866496, "last_edit_date": 1495541300, "creation_date": 1473855135, "answer_id": 39490158, "question_id": 39489757, "link": "https://stackoverflow.com/questions/39489757/how-to-collect-keyboard-input-inside-a-loop-in-c/39490158#39490158", "title": "How to collect keyboard input inside a loop in c++", "body": "<p>On Windows, this program will loop until a keyboard key is pressed :</p>\n\n<pre><code>#include &lt;conio.h&gt;\n\nvoid main()\n{\n    while (1)\n    {\n        if (_kbhit())\n        {\n            break;\n        }\n    }\n}\n</code></pre>\n\n<p>On linux, have a look at this <a href=\"https://stackoverflow.com/questions/29335758/using-kbhit-and-getch-on-linux\">answer</a>. It tells you how to use ncurses to do what you want.</p>\n"}], "owner": {"reputation": 3836, "user_id": 3275464, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/g6Pnl.png?s=128&g=1", "display_name": "Learning is a mess", "link": "https://stackoverflow.com/users/3275464/learning-is-a-mess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 0, "accepted_answer_id": 39490158, "answer_count": 1, "score": 2, "last_activity_date": 1473866496, "creation_date": 1473853917, "last_edit_date": 1473855314, "question_id": 39489757, "link": "https://stackoverflow.com/questions/39489757/how-to-collect-keyboard-input-inside-a-loop-in-c", "title": "How to collect keyboard input inside a loop in c++", "body": "<p>I have a program running a numerical calculations with precision increasing in time. It does so for different values of some parameters. The precision I need for each results depends on the value of these parameters, in a way totally unknown to me.</p>\n\n<p>To get enough precision for each value, I am thinking about a program/loop that would cut a calculation and move on to new values of the parameters if the user hits the keyboard.</p>\n\n<p>Schematically:</p>\n\n<pre><code>//initialise parameters\nwhile( parameters_in_good_range){\n     while( no_key_pressed){\n         //do calculation\n     }\n     //update parameters\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1473853806, "post_id": 39489672, "comment_id": 66296963, "body": "this really depends on the content of v etc. And is this some homework? because this looks like some reading concerning c and pointer is needed. Also you should tag this code C and not C++"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 3, "creation_date": 1473853845, "post_id": 39489672, "comment_id": 66296996, "body": "@Hayt This <b>is</b> C++.  There are no references in C."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1473853875, "post_id": 39489672, "comment_id": 66297010, "body": "But is so ugly that it looks like C"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1473853950, "post_id": 39489672, "comment_id": 66297056, "body": "Hey I didn&#39;t say it was pretty, just that it was C++ ;)  @OP how are you calling this function?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1473854007, "post_id": 39489672, "comment_id": 66297090, "body": "<code>static char*&amp; GetValue(char**&amp; _v) {  return *_v; }</code> why wouldn&#39;t that work since variables scope are the same (in the caller)"}, {"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1473854257, "post_id": 39489672, "comment_id": 66297253, "body": "@NathanOliver My bad. yeah I forgot about references being c++ with all the other pointer stuff there ;)"}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 0, "last_activity_date": 1473854990, "creation_date": 1473854990, "answer_id": 39490105, "question_id": 39489672, "link": "https://stackoverflow.com/questions/39489672/how-to-convert-variable-from-char-to-char-in-a-safe-way/39490105#39490105", "title": "How to convert variable from char**&amp; to char*&amp; in a safe way?", "body": "<p>Consider this example (I defined the <code>char*</code> as a type to see it more clearly):</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\ntypedef char * T;\nstatic T &amp; GetValue(T *&amp; _v) { return *_v; }\n\n    int main()\n    {\n      T s = nullptr;  // NULL if not C++ v11\n      T *v = &amp;s;\n      T &amp;vr = GetValue(v);\n     cout &lt;&lt; (void*)&amp;vr &lt;&lt; \" \" &lt;&lt; (void*)&amp;s &lt;&lt; endl;\n\n     return 0;\n\n    }\n</code></pre>\n\n<p><code>v</code> is safe in <code>main</code> scope. <code>GetValue</code> takes its reference then returns pointed value as a reference, with upper scope (not a temporary, I get no warning \"returning reference to temporary\" as opposed to if I return <code>T()</code>)</p>\n\n<p>As further proof, running this code gives me both references equal:</p>\n\n<pre><code>0x28fea8 0x28fea8\n</code></pre>\n\n<p>any flaw in this reasoning/test?</p>\n"}], "owner": {"reputation": 1, "user_id": 5855314, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0TJBe3OGIAo/AAAAAAAAAAI/AAAAAAAAAGE/AGk06eYHQnA/photo.jpg?sz=128", "display_name": "Quinn Pan", "link": "https://stackoverflow.com/users/5855314/quinn-pan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1473854990, "creation_date": 1473853685, "last_edit_date": 1473853865, "question_id": 39489672, "link": "https://stackoverflow.com/questions/39489672/how-to-convert-variable-from-char-to-char-in-a-safe-way", "title": "How to convert variable from char**&amp; to char*&amp; in a safe way?", "body": "<p>In my cpp project, for some reasons, I have a variable <code>v</code> of type <code>char**&amp;</code>. But actually I need to convert it into <code>char*&amp;</code> type. How should I do the conversion?</p>\n\n<pre><code>static char*&amp; GetValue(char**&amp; _v)\n{\n    static char* _vv;\n    _vv = (char*)_v; //TODO: remove static\n    return _vv;;\n}\n</code></pre>\n"}, {"tags": ["c++", "cmake", "installation", "header-files"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1473855734, "post_id": 39489560, "comment_id": 66298202, "body": "Module <code>GNUInstallDirs</code> provides conventions commonly used in GNU-compatible projects. If you don&#39;t like these conventions, write your module which setup directories as you need. Note, that module <a href=\"https://github.com/Kitware/CMake/blob/master/Modules/GNUInstallDirs.cmake\" rel=\"nofollow noreferrer\">GNUInstallDirs</a> provides <b>customizable definitions</b>: <code>If the includer does not define a value the above-shown default will be used and the value will appear in the cache for editing by the user.</code> So you may include given module and modify some of directories it setups."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1473855825, "post_id": 39489560, "comment_id": 66298266, "body": "Please forgive my ignorance... Isn&#39;t Cmake supposed to do these things? Why do I have to do nearly everything by hand? What good is makefile generation without configuration?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1473856946, "post_id": 39489560, "comment_id": 66298966, "body": "<code>Isn&#39;t Cmake supposed to do these things</code> - <b>which</b> things? Decide for you where your deliverables should be installed? - No, it allows you to decide that. Provide a module per each <i>possible</i> installation convention? - No, there is no single or few conventions which covers almost everyone needs. <code>Our policy is install into &#47;usr&#47;local ...</code> - Why do not write module, which <b>express your policy</b>? I have written <a href=\"https://github.com/euspectre/kedr/blob/master/sources/cmake/modules/path_prefixes.cmake\" rel=\"nofollow noreferrer\">one</a> and use it for projects in which I participate."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1473858947, "post_id": 39489560, "comment_id": 66300369, "body": "@Tsyvarev - OK, I bite... How are we supposed to install modules on users system. We don&#39;t control a user&#39;s system. Cmake is expected to provide useful and common ones. We can&#39;t even get processor and machine information from Cmake for heaven&#39;s sake. If you are somehow trying to find safe harbor with &quot;<code>&#47;usr&#47;local</code> is not standard&quot;, &quot;determining the cpu is not common&quot; or &quot;determining the machine is not common&quot;,  then that&#39;s damn near laughable."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 3, "creation_date": 1473861838, "post_id": 39489560, "comment_id": 66302504, "body": "<code>How are we supposed to install modules on users system.</code> - If you mean <code>LocalInstallDirs.cmake</code> module, no needs to <i>install</i> it on user system. Just include it in every project (sources) you provide and use while building. <code>Cmake is expected to provide useful and common ones.</code> - CMake provides <code>GNUInstallDirs</code> module, which describes quite common conventions. BTW, conventions about installation directories are different even for distinct Linux distros, and there is no generic mechanism (except reading docs) to extract them for particular distro. CMake cannot handle that."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1473862612, "post_id": 39489560, "comment_id": 66303006, "body": "@Tsyvarev - the more I interact with you, the more I find your response s to be FanBoi banter. <code>GNUInstallDirs</code> is <i>not</i> nearly as common as you think. Additionally, it breaks C++ libraries. Every major Unix compatible I am aware supports <code>&#47;usr&#47;local</code>. The same cannot be said of <code>GNUInstallDirs</code>. So you are effectively arguing the most supported configuration in the Unix &amp; Linux world is untenable; while the one that is less supported is viable. The arguments you are begging make no sense."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 4, "creation_date": 1473864189, "post_id": 39489560, "comment_id": 66304151, "body": "Hmm, default value for <i>CMAKE_INSTALL_PREFIX</i> on Unix-like systems is <code>&#47;usr&#47;local</code>. So if you use variable <i>CMAKE_INSTALL_INCLUDEDIR</i> for <code>install()</code> your headers, they will be installed into <code>&#47;usr&#47;local&#47;include</code>, as you want. So, what is a problem? Just do not use <i>CMAKE_INSTALL_OLDINCLUDEDIR</i>, which, according to naming, refers to some old convention."}, {"owner": {"reputation": 1928, "user_id": 618906, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/98d2cf5926e56bc917fd79b50dd6e52c?s=128&d=identicon&r=PG", "display_name": "John Freeman", "link": "https://stackoverflow.com/users/618906/john-freeman"}, "edited": false, "score": 1, "creation_date": 1558498248, "post_id": 39489560, "comment_id": 99116119, "body": "I think @jww did not realize that <code>GNUInstallDirs</code> are relative paths appended to <code>CMAKE_INSTALL_PREFIX</code>, with the exception of <code>OLDINCLUDEDIR</code> (which you don&#39;t have to use)."}], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3791, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1473926819, "creation_date": 1473853329, "last_edit_date": 1473926819, "question_id": 39489560, "link": "https://stackoverflow.com/questions/39489560/use-includelocalinstalldirs-instead-of-includegnuinstalldirs", "title": "Use include(LocalInstallDirs) instead of include(GNUInstallDirs)?", "body": "<p>We have a C++ library which provides a <a href=\"https://github.com/weidai11/cryptopp/blob/master/CMakeLists.txt\" rel=\"nofollow\"><code>CMakeList.txt</code> file</a>, and it leads with the following:</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8.5 FATAL_ERROR)    \nproject(cryptopp)\n\nset(cryptopp_VERSION_MAJOR 5)\nset(cryptopp_VERSION_MINOR 6)\nset(cryptopp_VERSION_PATCH 5)\n\ninclude(GNUInstallDirs)\n...\n</code></pre>\n\n<p>According to the CMake manual at <a href=\"http://cmake.org/cmake/help/v3.0/module/GNUInstallDirs.html\" rel=\"nofollow\"><code>GNUInstallDirs</code></a>:</p>\n\n<blockquote>\n  <p>Provides install directory variables as defined for GNU software...</p>\n\n<pre><code>...\nINCLUDEDIR       - C header files (include)\nOLDINCLUDEDIR    - C header files for non-gcc (/usr/include)\n...\n</code></pre>\n</blockquote>\n\n<p>Our policy is install into <code>/usr/local</code>; and don't install into <code>/usr</code>. Installing the library into <code>/usr</code> on some platforms breaks the library because the compiler treats all headers in <code>/usr/include</code> as C files, and <strong><em>not</em></strong> C++ header files. OpenBSD is one that breaks us, but it handles the library header files as expected when they are installed into <code>/usr/local/include</code>.</p>\n\n<p>I perform <em>a lot</em> of cross-platform testing, and I don't know of any Unix compatible distributions that fail to support software installations into <code>/usr/local</code>. I know we are safe to install into <code>/usr/local</code> when its available.</p>\n\n<p>I visited <a href=\"https://cmake.org/cmake/help/v3.0/manual/cmake-modules.7.html?highlight=install\" rel=\"nofollow\">CMake modules</a>, but I don't see a choice for something other than <code>GNUInstallDirs</code>. How do we specify something similar to <code>include(LocalInstallDirs)</code> instead of <code>include(GNUInstallDirs)</code>?</p>\n"}, {"tags": ["c++", "templates", "c++11"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1473853065, "post_id": 39489405, "comment_id": 66296496, "body": "What makes it <i>more specialized</i>?  Both versions can be called with no conversions, hence it does not know which one to call."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 2, "creation_date": 1473853598, "post_id": 39489405, "comment_id": 66296845, "body": "Maybe it&#39;s worth mentioning that at the point of overload resolution, we no longer care which is more specialised. that&#39;s done in a different phase of compilation."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1473885436, "post_id": 39489405, "comment_id": 66316024, "body": "@RichardHodges Overload resolution is exactly where you consider partial ordering."}], "answers": [{"comments": [{"owner": {"reputation": 1625, "user_id": 3120079, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0bca953ab654e20616d2c372036509aa?s=128&d=identicon&r=PG&f=1", "display_name": "Bikineev", "link": "https://stackoverflow.com/users/3120079/bikineev"}, "edited": false, "score": 0, "creation_date": 1473853581, "post_id": 39489520, "comment_id": 66296830, "body": "how come it works fine? I can&#39;t call bar with single argument any longer, and that&#39;s what I actually need"}, {"owner": {"reputation": 1625, "user_id": 3120079, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0bca953ab654e20616d2c372036509aa?s=128&d=identicon&r=PG&f=1", "display_name": "Bikineev", "link": "https://stackoverflow.com/users/3120079/bikineev"}, "edited": false, "score": 1, "creation_date": 1473854895, "post_id": 39489520, "comment_id": 66297627, "body": "The following comment has been added after your edit: sure it works, but it calls first overload, not second one, as intended"}], "tags": [], "owner": {"reputation": 57, "user_id": 6021936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae848e1641c762d7722f27b47c84452f?s=128&d=identicon&r=PG&f=1", "display_name": "bitzz", "link": "https://stackoverflow.com/users/6021936/bitzz"}, "is_accepted": false, "score": -1, "last_activity_date": 1473853720, "last_edit_date": 1473853720, "creation_date": 1473853228, "answer_id": 39489520, "question_id": 39489405, "link": "https://stackoverflow.com/questions/39489405/c-partial-ordering-for-a-function-with-default-argument/39489520#39489520", "title": "C++ partial ordering for a function with default argument", "body": "<p>Because you are using default value for overloaded function, so compiler doesn't know which function do you want to use. </p>\n\n<pre><code>void bar(T, void_t&lt;decltype(std::declval&lt;T&gt;().foo())&gt;* = 0)\n</code></pre>\n\n<p>without </p>\n\n<pre><code>= 0 \n</code></pre>\n\n<p>it works fine. </p>\n\n<p>/EDIT</p>\n\n<pre><code>template &lt;class...&gt;\nusing void_t = void;\n\ntemplate &lt;class T&gt;\nvoid bar(T)\n{}\n\ntemplate &lt;class T&gt;\nvoid bar(T, void_t&lt;decltype(std::declval&lt;T&gt;().foo())&gt;*)\n{}\n\nstruct A\n{\n    void foo();\n} a;\n\nint main()\n{\n    bar(a);\n    return 0;\n}\n</code></pre>\n\n<p>It works. </p>\n\n<pre><code>The program '[7464] Project3.exe' has exited with code 0 (0x0).\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 2, "last_activity_date": 1473854045, "creation_date": 1473854045, "answer_id": 39489811, "question_id": 39489405, "link": "https://stackoverflow.com/questions/39489405/c-partial-ordering-for-a-function-with-default-argument/39489811#39489811", "title": "C++ partial ordering for a function with default argument", "body": "<p>one of the usual ways to do this is create a disjunction of equally-specialised templates.</p>\n\n<pre><code>#include &lt;utility&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;class T&gt;\nstruct has_foo_impl\n{\n  template&lt;class U&gt; static auto test(U* p) -&gt; decltype(p-&gt;foo(), void(), std::true_type()); \n  static auto test(...) -&gt; decltype(std::false_type()); \n\n  using type = decltype(test((T*)nullptr));\n};\n\ntemplate&lt;class T&gt; using has_foo = typename has_foo_impl&lt;T&gt;::type;\n\ntemplate &lt;class...&gt;\nusing void_t = void;\n\ntemplate &lt;class T, std::enable_if_t&lt;not has_foo&lt;T&gt;::value&gt;* = nullptr&gt;\nvoid bar(T){\n  std::cout &lt;&lt; \"not me\\n\";\n}\n\ntemplate &lt;class T, std::enable_if_t&lt;has_foo&lt;T&gt;::value&gt;* = nullptr&gt;\nvoid bar(T) {\n  std::cout &lt;&lt; \"me\\n\";\n}\n\nstruct A { void foo(); } a;\n\nint main()\n{\n    bar(a); // \"me\"\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1473856799, "post_id": 39490269, "comment_id": 66298881, "body": "much as I am impressed by can_apply, I find it a bit of a mind-bender... :)"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 1625, "user_id": 3120079, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0bca953ab654e20616d2c372036509aa?s=128&d=identicon&r=PG&f=1", "display_name": "Bikineev", "link": "https://stackoverflow.com/users/3120079/bikineev"}, "edited": false, "score": 1, "creation_date": 1473857972, "post_id": 39490269, "comment_id": 66299683, "body": "@Bikineev Note that a similar mechanism called <a href=\"http://en.cppreference.com/w/cpp/experimental/is_detected\" rel=\"nofollow noreferrer\">&quot;<code>is_detected</code>&quot;</a> is in standards-track.  It bundles a few more things along with <code>can_apply</code>."}, {"owner": {"reputation": 5576, "user_id": 1794345, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILvFk.jpg?s=128&g=1", "display_name": "Rerito", "link": "https://stackoverflow.com/users/1794345/rerito"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1473865126, "post_id": 39490269, "comment_id": 66304815, "body": "@RichardHodges Yeah it took me a while to get the <code>can_apply</code> trick but once I did I found it even greater :)"}], "tags": [], "owner": {"reputation": 5576, "user_id": 1794345, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILvFk.jpg?s=128&g=1", "display_name": "Rerito", "link": "https://stackoverflow.com/users/1794345/rerito"}, "is_accepted": false, "score": 3, "last_activity_date": 1473857881, "last_edit_date": 1495542769, "creation_date": 1473855482, "answer_id": 39490269, "question_id": 39489405, "link": "https://stackoverflow.com/questions/39489405/c-partial-ordering-for-a-function-with-default-argument/39490269#39490269", "title": "C++ partial ordering for a function with default argument", "body": "<p>You are trying to use SFINAE to enforce the selection of a specific candidate in a specific case (here, the presence of a callable entity <code>foo</code> taking no argument inside a <code>T</code> lvalue). What does really happen here?</p>\n\n<p>The template with the <code>void_t</code> is well defined for your <code>struct A</code> so at the moment of the call you have two valid candidates for the overload resolution. If you want to use SFINAE you have to make sure that for any given call only one overload is available. To do so you should first embed your test in a type trait. To this end you can take example on <a href=\"https://stackoverflow.com/questions/30189926/metaprograming-failure-of-function-definition-defines-a-separate-function/30195655#30195655\">Yakk's <code>can_apply</code> facility</a> which I shamelessly copy here since it fits very well with your need:</p>\n\n<pre><code>namespace details {\n  // if Z&lt;Ts...&gt; is invalid, false_type:\n  template &lt;template&lt;class...&gt; class Z, class always_void, class... Ts&gt;\n  struct can_apply : std::false_type {};\n\n  // if Z&lt;Ts...&gt; is valid, true_type:\n  template &lt;template&lt;class...&gt; class Z, class... Ts&gt;\n  struct can_apply&lt;Z, std::void_t&lt;Z&lt;Ts...&gt;&gt;, Ts...&gt; : std::true_type {};\n}\n// alias to inject the void type where we need it for SFINAE:\ntemplate &lt;template&lt;class...&gt; class Z, class... Ts&gt;\nusing can_apply = details::can_apply&lt;Z, void, Ts...&gt;;\n\ntemplate &lt;typename T&gt;\nusing has_foo_t = decltype(std::declval&lt;T&gt;().foo());\n\ntemplate &lt;typename T&gt;\nusing has_foo = can_apply&lt;has_foo_t, T&gt;;\n</code></pre>\n\n<p>Now we only have to use the trait defined above in our template definitions:</p>\n\n<pre><code>// The enable_if with the negation is needed to invalidate\n// this implementation when T indeed has foo().\n// This is what you were missing in your original idea.\ntemplate &lt;typename T&gt;\nstd::enable_if_t&lt;!has_foo&lt;T&gt;::value&gt; bar(T) {\n    std::cout &lt;&lt; \"T has no foo(void)\" &lt;&lt; std::endl;\n}\n\ntemplate &lt;typename T&gt;\nstd::enable_if_t&lt;has_foo&lt;T&gt;::value&gt; bar(T) {\n    std::cout &lt;&lt; \"T has a foo(void)\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>You can see a running example on <a href=\"http://coliru.stacked-crooked.com/a/aaa23cb8aa5d1dde\" rel=\"nofollow noreferrer\">Coliru</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 1, "last_activity_date": 1473857190, "creation_date": 1473857190, "answer_id": 39490828, "question_id": 39489405, "link": "https://stackoverflow.com/questions/39489405/c-partial-ordering-for-a-function-with-default-argument/39490828#39490828", "title": "C++ partial ordering for a function with default argument", "body": "<p>None of the functions is <em>more specialized</em> than the other.</p>\n\n<p>Anyway, you can <em>force</em> the choice by using two overloaded functions as it follows:</p>\n\n<pre><code>#include&lt;utility&gt;\n\ntemplate &lt;class T&gt;\nvoid bar(char, T){}\n\ntemplate &lt;class T&gt;\nauto bar(int, T) -&gt; decltype(std::declval&lt;T&gt;().foo(), void()) {}\n\nstruct A { void foo(); } a;\n\nint main() {\n    bar(0, a);\n}\n</code></pre>\n\n<p>For <code>0</code> is an <code>int</code>, <code>bar(int, T)</code> is tried for first. Because of sfinae, it could be discarded if <code>T</code> has not the <code>foo</code> member function. Anyway, <code>0</code> can be cast to <code>char</code>, thus <code>bar(char, T)</code> is chosen in that case.<br>\nIf it happens that both the functions are viable solution, <code>bar(int, T)</code> is invoked for it doesn't require any implicit cast and the call is no longer ambiguities.</p>\n"}, {"comments": [{"owner": {"reputation": 5576, "user_id": 1794345, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILvFk.jpg?s=128&g=1", "display_name": "Rerito", "link": "https://stackoverflow.com/users/1794345/rerito"}, "edited": false, "score": 0, "creation_date": 1473865395, "post_id": 39492280, "comment_id": 66305032, "body": "The same technique is presented by skypjack. However, what if I did call bar with a <code>struct BothFooBoo : public Foo, Boo {};</code> argument?"}, {"owner": {"reputation": 14144, "user_id": 6579744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a4ohI.png?s=128&g=1", "display_name": "rahnema1", "link": "https://stackoverflow.com/users/6579744/rahnema1"}, "reply_to_user": {"reputation": 5576, "user_id": 1794345, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILvFk.jpg?s=128&g=1", "display_name": "Rerito", "link": "https://stackoverflow.com/users/1794345/rerito"}, "edited": false, "score": 0, "creation_date": 1473869713, "post_id": 39492280, "comment_id": 66307832, "body": "@Rerito I cannot see any similarity  with skypjak except that both used decltype with two expressions separated by comma! the answer is based on assumptions of the questions to differentiate between classes that have foo and others instead of have both functions. you may ask your question as new thread to get proper answer :)"}, {"owner": {"reputation": 5576, "user_id": 1794345, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILvFk.jpg?s=128&g=1", "display_name": "Rerito", "link": "https://stackoverflow.com/users/1794345/rerito"}, "edited": false, "score": 0, "creation_date": 1473869885, "post_id": 39492280, "comment_id": 66307917, "body": "Yeah right he embedded it in the trailing return type but its still the same. As for my second comment I was just pointing out a design flaw in your answer: a type that has both foo and boo would yield an ambiguous call."}, {"owner": {"reputation": 14144, "user_id": 6579744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a4ohI.png?s=128&g=1", "display_name": "rahnema1", "link": "https://stackoverflow.com/users/6579744/rahnema1"}, "reply_to_user": {"reputation": 5576, "user_id": 1794345, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILvFk.jpg?s=128&g=1", "display_name": "Rerito", "link": "https://stackoverflow.com/users/1794345/rerito"}, "edited": false, "score": 0, "creation_date": 1473870926, "post_id": 39492280, "comment_id": 66308538, "body": "@Rerito you are insisting on your wrong opinion, please ask skypjak if both answers are similar. I think my answer is sufficient (and may be the best) for current question, although you are right that in situations that you noted leads to problems"}, {"owner": {"reputation": 5576, "user_id": 1794345, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILvFk.jpg?s=128&g=1", "display_name": "Rerito", "link": "https://stackoverflow.com/users/1794345/rerito"}, "edited": false, "score": 0, "creation_date": 1473874274, "post_id": 39492280, "comment_id": 66310332, "body": "You both trigger SFINAE using decltype with two coma separated expressions. How is that <i>not</i> the same technique?"}, {"owner": {"reputation": 14144, "user_id": 6579744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a4ohI.png?s=128&g=1", "display_name": "rahnema1", "link": "https://stackoverflow.com/users/6579744/rahnema1"}, "reply_to_user": {"reputation": 5576, "user_id": 1794345, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILvFk.jpg?s=128&g=1", "display_name": "Rerito", "link": "https://stackoverflow.com/users/1794345/rerito"}, "edited": false, "score": 0, "creation_date": 1473878212, "post_id": 39492280, "comment_id": 66312344, "body": "@Rerito I think it is better to finish the discussion because it is not useful. If there is any words that you want to say please explicitly say that. As my last word I say your answer to the question is admirable."}], "tags": [], "owner": {"reputation": 14144, "user_id": 6579744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a4ohI.png?s=128&g=1", "display_name": "rahnema1", "link": "https://stackoverflow.com/users/6579744/rahnema1"}, "is_accepted": false, "score": 1, "last_activity_date": 1473869403, "last_edit_date": 1473869403, "creation_date": 1473861219, "answer_id": 39492280, "question_id": 39489405, "link": "https://stackoverflow.com/questions/39489405/c-partial-ordering-for-a-function-with-default-argument/39492280#39492280", "title": "C++ partial ordering for a function with default argument", "body": "<p>this is other solution that compiles with g++:</p>\n\n<pre><code>//g++  4.9.3\n\n#include &lt;iostream&gt;\n\ntemplate &lt;class T&gt;\n    void bar(T)\n{std::cout &lt;&lt; \"not foo boo...\\n\";}\n\ntemplate &lt;class T &gt;\n    void bar( decltype(std::declval&lt;T&gt;().foo(),T())) \n{std::cout &lt;&lt; \"foo\\n\";}\n\ntemplate &lt;class T &gt;\n    void bar( decltype(std::declval&lt;T&gt;().boo(),T())) \n{std::cout &lt;&lt; \"boo\\n\";}\n\nstruct Foo { void foo(); } f;\n\nstruct Boo {void boo(); } b;\n\nstruct NotFooBoo { } n;\ntemplate &lt;class T&gt;\n    auto func(T&amp;&amp; t)\n{\n    return bar&lt;typename std::decay&lt;T&gt;::type&gt;(std::forward&lt;T&gt;(t));\n}\nint main()\n{\n    func(f);\n    func(b);\n    func(n);\n}\n</code></pre>\n"}], "owner": {"reputation": 1625, "user_id": 3120079, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0bca953ab654e20616d2c372036509aa?s=128&d=identicon&r=PG&f=1", "display_name": "Bikineev", "link": "https://stackoverflow.com/users/3120079/bikineev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "accepted_answer_id": 39489811, "answer_count": 5, "score": 5, "last_activity_date": 1473869403, "creation_date": 1473852854, "question_id": 39489405, "link": "https://stackoverflow.com/questions/39489405/c-partial-ordering-for-a-function-with-default-argument", "title": "C++ partial ordering for a function with default argument", "body": "<p>Consider the following code:</p>\n\n<pre><code>template &lt;class...&gt;\nusing void_t = void;\n\ntemplate &lt;class T&gt;\nvoid bar(T){}\n\ntemplate &lt;class T&gt;\nvoid bar(T, void_t&lt;decltype(std::declval&lt;T&gt;().foo())&gt;* = 0) {}\n\nstruct A { void foo(); } a;\nbar(a); // gives a compiler error on ambiguous call\n</code></pre>\n\n<p>So the question is, why are these overloads ambiguous? Why is the second overload not considered to be more restrictive, more specialized than second one by the compiler?</p>\n"}, {"tags": ["c++", "hash", "hashtable", "hash-function"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1473852963, "post_id": 39489382, "comment_id": 66296433, "body": "Does the book you&#39;re reading mentioning a hash functions like <code>h(x) = x mod M</code>? The book probably assumes that the hash function returns a value in the range 1 to M (inclusive)."}, {"owner": {"reputation": 6801, "user_id": 6082275, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4eb9e71829d14f0722fee90f404fbdb1?s=128&d=identicon&r=PG&f=1", "display_name": "gdaras", "link": "https://stackoverflow.com/users/6082275/gdaras"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1473854088, "post_id": 39489382, "comment_id": 66297129, "body": "Actually, it does! That&#39;s why I am confused."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1473854640, "post_id": 39489382, "comment_id": 66297482, "body": "Maybe time to find some other book? :)"}, {"owner": {"reputation": 6801, "user_id": 6082275, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4eb9e71829d14f0722fee90f404fbdb1?s=128&d=identicon&r=PG&f=1", "display_name": "gdaras", "link": "https://stackoverflow.com/users/6082275/gdaras"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1473865471, "post_id": 39489382, "comment_id": 66305085, "body": "Haha, well yes, maybe it&#39;s time :D"}], "answers": [{"comments": [{"owner": {"reputation": 6801, "user_id": 6082275, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4eb9e71829d14f0722fee90f404fbdb1?s=128&d=identicon&r=PG&f=1", "display_name": "gdaras", "link": "https://stackoverflow.com/users/6082275/gdaras"}, "edited": false, "score": 0, "creation_date": 1473854213, "post_id": 39489535, "comment_id": 66297229, "body": "Thanks for the answer, I couldn&#39;t agree more.  The thing is that the book is getting a bit confusing when it comes to that specific example and that&#39;s why I asked"}], "tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": true, "score": 1, "last_activity_date": 1473853252, "creation_date": 1473853252, "answer_id": 39489535, "question_id": 39489382, "link": "https://stackoverflow.com/questions/39489382/hash-functions-and-storage-in-hash-table/39489535#39489535", "title": "Hash Functions and storage in hash table", "body": "<p>It depends on how <code>h()</code> is defined, if it accepts values starting with 1, then this is why you have <code>-1</code> in this formula: <code>h(x)-1</code>. Arrays in c++ are indexed starting from 0. </p>\n\n<p>If you compute reminder of dividing of 60 by 10 in c++, then you will get value <code>0</code> (<code>60 % 10 = 0</code>). In such case it makes no sense to subtract -1.</p>\n"}], "owner": {"reputation": 6801, "user_id": 6082275, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4eb9e71829d14f0722fee90f404fbdb1?s=128&d=identicon&r=PG&f=1", "display_name": "gdaras", "link": "https://stackoverflow.com/users/6082275/gdaras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 39489535, "answer_count": 1, "score": 0, "last_activity_date": 1473853252, "creation_date": 1473852784, "question_id": 39489382, "link": "https://stackoverflow.com/questions/39489382/hash-functions-and-storage-in-hash-table", "title": "Hash Functions and storage in hash table", "body": "<p>I am studying programming and in the school book it states that given key x, hashtable A[] and hash function h() the key x it is stored in A[h(x)-1] position (with C++ implementation). \nHowever, using as hash function the function h(x)=xmodM, where M is the length of the hashtable, I don't get where keys with mod 0 are stored.\nFor instance, if M=10 and x=60, where I should store the key value?\nThanks in advance!</p>\n"}]