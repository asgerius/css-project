[{"tags": ["c++", "json", "dependencies"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1447286476, "post_id": 33662100, "comment_id": 55097829, "body": "The problem has examples of JSON, but there&#39;s always the million other resources on it. It&#39;s a very popular format."}], "answers": [{"tags": [], "owner": {"reputation": 21716, "user_id": 2401769, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/wkEbw.jpg?s=128&g=1", "display_name": "Matias Cicero", "link": "https://stackoverflow.com/users/2401769/matias-cicero"}, "is_accepted": false, "score": 1, "last_activity_date": 1447292477, "creation_date": 1447292477, "answer_id": 33663066, "question_id": 33662100, "link": "https://stackoverflow.com/questions/33662100/how-to-read-json-file-in-c/33663066#33663066", "title": "How to read .json file in C++?", "body": "<p>You're asking how to read a json file, so here it goes:</p>\n\n<pre><code>// This will actually read any file, not just .json\nstd::ifstream in(filePath, std::ios::in | std::ios::binary);\nstd::ostringstream contents;\ncontents &lt;&lt; in.rdbuf();\nin.close();\nstd::string jsonString = contents.str();\n</code></pre>\n\n<p>Where <code>filePath</code> is the file's path.</p>\n\n<p>It's as simple as that.</p>\n\n<p>Now, to deserialize it into something useful... Well, that's another question, isn't it?</p>\n"}], "owner": {"reputation": 833, "user_id": 2948844, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/QYrDu.jpg?s=128&g=1", "display_name": "Boyan Kushlev", "link": "https://stackoverflow.com/users/2948844/boyan-kushlev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447292477, "creation_date": 1447286219, "question_id": 33662100, "link": "https://stackoverflow.com/questions/33662100/how-to-read-json-file-in-c", "title": "How to read .json file in C++?", "body": "<p>I have to do this one problem as an admission exam to this programming academy. It's about reading .json files and telling the user what packages need to be installed first as dependencies. <a href=\"https://github.com/HackBulgaria/ApplicationFall2015/tree/master/3-Dependencies-Resolving\" rel=\"nofollow\">Here is a link to the problem.</a> However, I'd never heard of such terms before (dependency, .json file, and I have limited programming experience), so my question is how do I access those .json files in order to see what dependencies need to be installed? I think I can come up with a backbone if I know how to access those files. Since I have zero experience with that stuff, any advice would be helpful. </p>\n"}, {"tags": ["c++", "windows", "email", "winsock2", "tls1.2"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5414765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f64b717bd7d1321c2a27aa658e8bbee?s=128&d=identicon&r=PG&f=1", "display_name": "shmoo", "link": "https://stackoverflow.com/users/5414765/shmoo"}, "edited": false, "score": 0, "creation_date": 1447289630, "post_id": 33662212, "comment_id": 55098749, "body": "Please read my question carefully. I already know that I must perform a TLS handshake after the STARTTLS command, I am asking specifically what data I should send for the handshake. I have read the RFC&#39;s given but it still does not tell me what data to send. E.g. it specifies that I must send a certificate structure after getting a reply from the server but I have tried that and just got a &quot;Ready to start tls&quot; reply from the server. Again I am asking for the data to send specifically after STARTLS for the TLS handshake with the email server."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 11, "user_id": 5414765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f64b717bd7d1321c2a27aa658e8bbee?s=128&d=identicon&r=PG&f=1", "display_name": "shmoo", "link": "https://stackoverflow.com/users/5414765/shmoo"}, "edited": false, "score": 2, "creation_date": 1447292556, "post_id": 33662212, "comment_id": 55099575, "body": "@shmoo: I did read your question. If you pay attention to the RFCs I pointed out, they tell you exactly WHAT to send and WHEN to send it. You can&#39;t perform the TLS handshake unless the server sends a <code>STARTTLS</code> 220 reply first, as defined in RFC 3207. THEN perform the handshake, starting with sending the TLS <code>ClientHello</code> record and receiving the <code>ServerHello</code> record, as defined in Section 7 (&quot;the TLS Handshake Protocol&quot;) of RFCs 2246, 4346, and 5246.  You need to read the RFCs more carefully, the answers you are looking for ARE documented in them."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 11, "user_id": 5414765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f64b717bd7d1321c2a27aa658e8bbee?s=128&d=identicon&r=PG&f=1", "display_name": "shmoo", "link": "https://stackoverflow.com/users/5414765/shmoo"}, "edited": false, "score": 1, "creation_date": 1447293121, "post_id": 33662212, "comment_id": 55099688, "body": "@shmoo: if you read the MSDN documentation I pointed out, it gives you a very clear overview of the TLS handshake step-by-step.  The RFCs give you the specific technical details (format and content) of each step."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 11, "user_id": 5414765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f64b717bd7d1321c2a27aa658e8bbee?s=128&d=identicon&r=PG&f=1", "display_name": "shmoo", "link": "https://stackoverflow.com/users/5414765/shmoo"}, "edited": false, "score": 0, "creation_date": 1447294560, "post_id": 33662212, "comment_id": 55100062, "body": "@shmoo Yuor comment is ridiculous. These <i>are</i> the TLS RFCs. If you think they don&#39;t detail the handshake, you can&#39;t have read them. But if you&#39;re looking to implement SSL yourself you should forget that now. Use OpenSSL or one of the other existing libraries. It is a huge job."}, {"owner": {"reputation": 11, "user_id": 5414765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f64b717bd7d1321c2a27aa658e8bbee?s=128&d=identicon&r=PG&f=1", "display_name": "shmoo", "link": "https://stackoverflow.com/users/5414765/shmoo"}, "edited": false, "score": 0, "creation_date": 1447323051, "post_id": 33662212, "comment_id": 55110816, "body": "No, ClientHello does not work after sending the STARTTLS command and yes I have read the RFCs but nothing I send is accepted by the server"}, {"owner": {"reputation": 11, "user_id": 5414765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f64b717bd7d1321c2a27aa658e8bbee?s=128&d=identicon&r=PG&f=1", "display_name": "shmoo", "link": "https://stackoverflow.com/users/5414765/shmoo"}, "edited": false, "score": 0, "creation_date": 1447332198, "post_id": 33662212, "comment_id": 55116064, "body": "I&#39;ve also tried sending the ClientHello structure detailed in the RFCs as the first data to be sent but again I get no reply from the server."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 11, "user_id": 5414765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f64b717bd7d1321c2a27aa658e8bbee?s=128&d=identicon&r=PG&f=1", "display_name": "shmoo", "link": "https://stackoverflow.com/users/5414765/shmoo"}, "edited": false, "score": 0, "creation_date": 1447353611, "post_id": 33662212, "comment_id": 55130740, "body": "@shmoo: I assure you that sending a <code>ClientHello</code> immediately after receiving the <code>STARTTLS</code> 220 response DOES work. Every TLS-enabled SMTP client app does it. If it is not working for you, you are doing something wrong. All the more reason to NOT implement TLS manually, let an established library handle the hard work for you. But, if you insist on doing it yourself, I suggest you use WireShark to look at a working TLS handshake from an existing SMTP client, and then replicate the necessary messaging in your own app. That will also show you what is wrong with your handshake messages."}, {"owner": {"reputation": 11, "user_id": 5414765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f64b717bd7d1321c2a27aa658e8bbee?s=128&d=identicon&r=PG&f=1", "display_name": "shmoo", "link": "https://stackoverflow.com/users/5414765/shmoo"}, "edited": false, "score": 0, "creation_date": 1447363305, "post_id": 33662212, "comment_id": 55136218, "body": "I assure you that sending a ClientHello does not work after STARTTLS. The RFC says if the server isn&#39;t satisfied with the response it SHOULD send a fatal alert and close the connection, but I haven&#39;t received a fatal alert and the connection with the server remains open. However, I will have a look at WireShark to see if I get can any further ideas thank you."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1447364192, "post_id": 33662212, "comment_id": 55136657, "body": "Yes, <code>ClientHello</code> DOES WORK, otherwise <b>EVERY</b> TLS-enabled SMTP would be failing. You are clearly doing something wrong with your <code>ClientHello</code>. My guess is you are probably not sending it correctly, so the server is still waiting for you to finish sending it. But since you have not shown <i>any</i> of your code, noone here can tell you what you are actually doing wrong."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 3, "last_activity_date": 1447293392, "last_edit_date": 1447293392, "creation_date": 1447286887, "answer_id": 33662212, "question_id": 33661956, "link": "https://stackoverflow.com/questions/33661956/what-data-must-be-sent-after-sending-a-starttls-command-to-an-email-server/33662212#33662212", "title": "What data must be sent after sending a STARTTLS command to an email server", "body": "<p>The semantics and processing rules of the SMTP <code>STARTTLS</code> command are documented in <a href=\"https://tools.ietf.org/html/rfc3207\" rel=\"nofollow\">RFC 3207</a>.</p>\n\n<p>After you have received a successful 220 response to the <code>STARTTLS</code> command, you must then begin a TLS handshake to establish encryption with which to encrypt/decrypt subsequent SMTP commands/responses. Upon completion of the handshake, the SMTP state is reset, so you must issue a new (now encrypted) <code>EHLO</code> command, and then proceed with your remaining (encrypted) SMTP commands as needed.</p>\n\n<p>MSDN documents a high-level overview of the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa380516.aspx\" rel=\"nofollow\">Transport Layer Security Protocol</a>, with step-by-step instructions for the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa380513.aspx\" rel=\"nofollow\">TLS Handshake Protocol</a>.  The specific details of each step are documented in Section 7 of <a href=\"https://tools.ietf.org/html/rfc2246\" rel=\"nofollow\">RFC 2246</a> (TLS 1.0), <a href=\"https://tools.ietf.org/html/rfc4346\" rel=\"nofollow\">RFC 4346</a> (TLS 1.1), and <a href=\"https://tools.ietf.org/html/rfc5246\" rel=\"nofollow\">RFC 5246</a> (TLS 1.2).</p>\n\n<p>So, unless you are planning on implementing TLS from scratch (please don't !!), you need to use a third-party library, such as OpenSSL, or you can use Microsoft's <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa380123.aspx\" rel=\"nofollow\">Secure Channel</a> API, to handle the TLS handshake and subsequent encryption for you.</p>\n"}], "owner": {"reputation": 11, "user_id": 5414765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f64b717bd7d1321c2a27aa658e8bbee?s=128&d=identicon&r=PG&f=1", "display_name": "shmoo", "link": "https://stackoverflow.com/users/5414765/shmoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1145, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1447314367, "creation_date": 1447285391, "last_edit_date": 1447314367, "question_id": 33661956, "link": "https://stackoverflow.com/questions/33661956/what-data-must-be-sent-after-sending-a-starttls-command-to-an-email-server", "title": "What data must be sent after sending a STARTTLS command to an email server", "body": "<p>I am writing an email client in C++ using the Winsock2 API to send emails via SMTP from a Gmail account. I am not using any other third party libraries.</p>\n\n<p>I have connected to the Gmail server on port 587 (for TLS) and sent the basic EHLO and STARTTLS commands, but my question is this, what data should I specifically send after I have sent the STARTTLS command?  </p>\n\n<p>This is the server output for clarity:  </p>\n\n<p><img src=\"https://i.stack.imgur.com/tWmGi.png\" alt=\"This is the server output for clarity\"></p>\n\n<p>Obviously the TLS handshake goes after the STARTTLS command, but what is the first and subsequent pieces of data that must be sent during the TLS handshake? From what I've read it should be binary data exchanging security certificates etc but I could not find specifically what data should be sent first.</p>\n\n<p>I have searched numerous similar questions to this but I haven't found an answer that has said the <strong>specific</strong> data that must be sent after STARTTLS. I am aware of the existence of OpenSSL and I am not going to accept any answers telling my to install it instead.</p>\n"}, {"tags": ["c++", "c++11", "variadic-templates"], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1447285747, "post_id": 33661994, "comment_id": 55097615, "body": "Um, template parameter pack and function parameter pack are different things. <code>AA</code> is at the end of the template parameter list; <code>aa</code> isn&#39;t at the end of the parameter-declaration-list, making it a non-deduced context."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1447286848, "post_id": 33661994, "comment_id": 55097937, "body": "@T.C. in Jonathan&#39;s example, <code>T</code> is not at the end of its parameter list and it&#39;s a template parameter pack. But I can&#39;t see how that relates to the code in the question."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1447286953, "post_id": 33661994, "comment_id": 55097967, "body": "@\u1405JohannesSchaub-litb\u140a Sure. My point, when I wrote the comment, is that that quote ([temp.param]/11) doesn&#39;t apply to OP&#39;s example."}, {"owner": {"reputation": 4305, "user_id": 2640636, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/NWXEh.jpg?s=128&g=1", "display_name": "SU3", "link": "https://stackoverflow.com/users/2640636/su3"}, "edited": false, "score": 0, "creation_date": 1447302517, "post_id": 33661994, "comment_id": 55102250, "body": "I don&#39;t know if I&#39;m more impressed by the wittiness of the solution or that it actually makes sense. Nice use of the comma operator! There&#39;s always one questions I have with solutions like this one, do the <code>dummy</code> and the <code>integer_sequence</code> get optimized out?"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 4305, "user_id": 2640636, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/NWXEh.jpg?s=128&g=1", "display_name": "SU3", "link": "https://stackoverflow.com/users/2640636/su3"}, "edited": false, "score": 0, "creation_date": 1447320825, "post_id": 33661994, "comment_id": 55109396, "body": "@SU3, the <code>index_sequence</code> is just an empty struct so doesn&#39;t matter much either way. I would expect the whole <code>shift</code> function to be inlined and optimised away.  I&#39;ve added another implementation without the array anyway."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1447573696, "post_id": 33661994, "comment_id": 55205449, "body": "@JonathanWakely I&#39;m not sure about the second version - using <code>std::tie</code> loses the sequencing guarantee."}], "tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": true, "score": 6, "last_activity_date": 1447585835, "last_edit_date": 1447585835, "creation_date": 1447285567, "answer_id": 33661994, "question_id": 33661847, "link": "https://stackoverflow.com/questions/33661847/backward-variadic-template/33661994#33661994", "title": "Backward variadic template", "body": "<p>As T.C.'s comment below points out, in your first example <code>aa</code> is in a non-deduced context (14.8.2.5 p5 defines non-deduced contexts, including \"a function parameter pack that does not occur at the end of the parameter-declaration-list\") and so the parameter pack cannot be deduced.</p>\n\n<blockquote>\n  <p>if syntax allows for placing variadic arguments in any place other then the last and under what circumstances?</p>\n</blockquote>\n\n<p>In addition to the restriction stated above that caused problems for your first example, a template parameter pack has to be the last template parameter unless all following template parameters can be deduced. 14.1 [temp.param] p11:</p>\n\n<blockquote>\n  <p>A template parameter pack of a function template shall not be followed\n  by another template parameter unless that template parameter can be deduced from the parameter-type-list of the function template or has a default argument (14.8.2).</p>\n</blockquote>\n\n<p>So this is OK because both template parameter packs can be deduced independently from the function parameters:</p>\n\n<pre><code>template&lt;typename... T, typename... U&gt;\n  void f(std::tuple&lt;T...&gt;, std::tuple&lt;U...&gt;)\n  { }\n</code></pre>\n\n<p>A different way to write your <code>shift</code> function is to use an <code>index_sequence</code></p>\n\n<pre><code>#include &lt;tuple&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;typename... T, size_t... I&gt;\nvoid\nshift_impl(std::tuple&lt;T...&gt; t, std::index_sequence&lt;I...&gt;)\n{\n  // Use pack expansion with comma operator to populate unused array:\n  int dummy[] = {\n    (std::get&lt;I&gt;(t) = std::get&lt;I+1&gt;(t), 0)...\n  };\n}\n\ntemplate&lt;typename T0, typename... T&gt;\nvoid\nshift(T0&amp;&amp; arg0, T&amp;&amp;... args)\n{\n  shift_impl(std::tie(arg0, args...), std::index_sequence_for&lt;T...&gt;{});\n}\n\nint main()\n{\n  int i = 0, j = 1, k = 2;\n  shift(i, j, k);\n  std::cout &lt;&lt; i &lt;&lt; ' ' &lt;&lt; j &lt;&lt; ' ' &lt;&lt; k &lt;&lt; '\\n';\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2976, "user_id": 627587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b7225df5b0728daa170646a5c5a4bfda?s=128&d=identicon&r=PG", "display_name": "Louis Dionne", "link": "https://stackoverflow.com/users/627587/louis-dionne"}, "is_accepted": false, "score": 4, "last_activity_date": 1447287576, "creation_date": 1447287576, "answer_id": 33662331, "question_id": 33661847, "link": "https://stackoverflow.com/questions/33661847/backward-variadic-template/33662331#33662331", "title": "Backward variadic template", "body": "<p>[Full disclosure: I authored Hana]</p>\n\n<p>I'm not trying to answer your original question, since Jonathan did that just fine.</p>\n\n<p>However, if you're looking for a solution to your problem and if you have access to a bugfree C++14 compiler (hence Clang for now), you can use <a href=\"https://github.com/boostorg/hana\" rel=\"nofollow\">Boost.Hana</a>. Hana is a modern metaprogramming library that enables you to metaprogram while keeping a high level of abstraction. Hence, you can write what you need in a readable way, instead of having to know about all the dirty tricks of the language. The library takes care of that for you:</p>\n\n<pre><code>#include &lt;boost/hana.hpp&gt;\n#include &lt;functional&gt; // for std::ref\n#include &lt;iostream&gt;\nnamespace hana = boost::hana;\n\ntemplate &lt;typename T0, typename ...T&gt;\nvoid shift(T0&amp;&amp; t0, T&amp;&amp; ...ts) {\n    auto args = hana::make_tuple(std::ref(t0), std::ref(ts)...);\n    hana::for_each(hana::range_c&lt;int, 0, sizeof...(ts)&gt;, [&amp;](auto i) {\n        args[i].get() = args[i + hana::int_c&lt;1&gt;].get();\n    });\n}\n\nint main() {\n    int i = 0, j = 1, k = 2;\n    shift(i, j, k);\n    std::cout &lt;&lt; i &lt;&lt; ' ' &lt;&lt; j &lt;&lt; ' ' &lt;&lt; k &lt;&lt; '\\n';\n}\n</code></pre>\n"}], "owner": {"reputation": 4305, "user_id": 2640636, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/NWXEh.jpg?s=128&g=1", "display_name": "SU3", "link": "https://stackoverflow.com/users/2640636/su3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 0, "accepted_answer_id": 33661994, "answer_count": 2, "score": 3, "last_activity_date": 1447585835, "creation_date": 1447284749, "last_edit_date": 1447301850, "question_id": 33661847, "link": "https://stackoverflow.com/questions/33661847/backward-variadic-template", "title": "Backward variadic template", "body": "<p>I want to write a template function that does this (pseudo-code):</p>\n\n<pre><code>shift(T&amp; a,T&amp; b,T&amp; c,...,T&amp; y,const T&amp; z) {\n  a = b;\n  b = c;\n  ...\n  y = z;\n}\n</code></pre>\n\n<p>My attempt involved putting the variadic argument as the first argument as follows:</p>\n\n<pre><code>template&lt;typename A, typename B&gt;\ninline void shift(A&amp; a, const B&amp; b) noexcept {\n  a = b;\n}\ntemplate&lt;typename B, typename C, typename... AA&gt;\ninline void shift(AA&amp;... aa, B&amp; b, const C&amp; c) noexcept {\n  shift(aa...,b);\n  shift(b,c);\n}\n</code></pre>\n\n<p>Why doesn't this work? Can a variadic argument only be the last argument? Then is there a way to make the last reference constant?</p>\n\n<p>I need a <code>const</code> reference for a case like:</p>\n\n<pre><code>double a, b, c;\nshift(a,b,c,5);\n</code></pre>\n\n<p><strong>EDIT</strong>:\nOk, this particular problem can of course be solved by reversing the order of the function arguments:</p>\n\n<pre><code>template&lt;typename A, typename B&gt;\ninline void shift(const B&amp; b, A&amp; a) noexcept {\n  a = b;\n}\ntemplate&lt;typename C, typename B, typename... AA&gt;\ninline void shift(const C&amp; c, B&amp; b, AA&amp;... aa) noexcept {\n  shift(b,aa...);\n  b = c;\n}\n</code></pre>\n\n<p>But I would still like to know if syntax allows for placing variadic arguments in any place other then the last and under what circumstances?</p>\n"}, {"tags": ["c++", "boost", "boost-asio"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1447295912, "post_id": 33661836, "comment_id": 55100451, "body": "void main? _getch? ew. Here&#39;s a SSCCE: <a href=\"http://coliru.stacked-crooked.com/a/72b56cbbe5b22ca8\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/72b56cbbe5b22ca8</a>"}], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 0, "last_activity_date": 1447295984, "last_edit_date": 1447295984, "creation_date": 1447294252, "answer_id": 33663280, "question_id": 33661836, "link": "https://stackoverflow.com/questions/33661836/unexpected-variable-value-using-boost-asio/33663280#33663280", "title": "Unexpected variable value using Boost.Asio", "body": "<p>You don't synchronize access to shared data from multiple threads.</p>\n\n<p>This is data race.</p>\n\n<p>Data races are <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">Undefined Behaviour</a>. Anything can happen.</p>\n\n<p>Fix it by synchronizing access to <code>m_value</code></p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>When enabling the thread sanitizer (<code>-fsanitizer=thread</code> on gcc/clang) you get this very specific report for <strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/72b56cbbe5b22ca8\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>==================\nWARNING: ThreadSanitizer: data race (pid=27230)\nRead of size 4 at 0x7fff488eb360 by main thread:\n    #0 main /tmp/test.cpp:57 (test+0x0000004e2d82)\n\nPrevious write of size 4 at 0x7fff488eb360 by thread T1:\n    #0 server::handle_test() /tmp/test.cpp:36 (test+0x00000051259c)\n    #1 boost::_mfi::mf0&lt;void, server&gt;::operator()(server*) const /home/sehe/custom/boost/boost/bind/mem_fn_template.hpp:49 (test+0x00000051741e)\n    #2 void boost::_bi::list1&lt;boost::_bi::value&lt;server*&gt; &gt;::operator()&lt;boost::_mfi::mf0&lt;void, server&gt;, boost::_bi::list0&gt;(boost::_bi::type&lt;void&gt;, boost::_mfi::mf0&lt;void, server&gt;&amp;, boost::_bi::list0&amp;, int) /home/sehe/custom/boost/boost/bind/bind.hpp:255 (test+0x00000051705a)\n    #3 boost::_bi::bind_t&lt;void, boost::_mfi::mf0&lt;void, server&gt;, boost::_bi::list1&lt;boost::_bi::value&lt;server*&gt; &gt; &gt;::operator()() /home/sehe/custom/boost/boost/bind/bind.hpp:895 (test+0x000000516cbf)\n    #4 void boost::asio::asio_handler_invoke&lt;boost::_bi::bind_t&lt;void, boost::_mfi::mf0&lt;void, server&gt;, boost::_bi::list1&lt;boost::_bi::value&lt;server*&gt; &gt; &gt; &gt;(boost::_bi::bind_t&lt;void, boost::_mfi::mf0&lt;void, server&gt;, boost::_bi::list1&lt;boost::_bi::value&lt;server*&gt; &gt; &gt;&amp;, ...) /home/sehe/custom/boost/boost/asio/handler_invoke_hook.hpp:69 (test+0x000000516a35)\n    #5 void boost_asio_handler_invoke_helpers::invoke&lt;boost::_bi::bind_t&lt;void, boost::_mfi::mf0&lt;void, server&gt;, boost::_bi::list1&lt;boost::_bi::value&lt;server*&gt; &gt; &gt;, boost::_bi::bind_t&lt;void, boost::_mfi::mf0&lt;void, server&gt;, boost::_bi::list1&lt;boost::_bi::value&lt;server*&gt; &gt; &gt; &gt;(boost::_bi::bind_t&lt;void, boost::_mfi::mf0&lt;void, server&gt;, boost::_bi::list1&lt;boost::_bi::value&lt;server*&gt; &gt; &gt;&amp;, boost::_bi::bind_t&lt;void, boost::_mfi::mf0&lt;void, server&gt;, boost::_bi::list1&lt;boost::_bi::value&lt;server*&gt; &gt; &gt;&amp;) /home/sehe/custom/boost/boost/asio/detail/handler_invoke_helpers.hpp:37 (test+0x0000005167e0)\n    #6 boost::asio::detail::completion_handler&lt;boost::_bi::bind_t&lt;void, boost::_mfi::mf0&lt;void, server&gt;, boost::_bi::list1&lt;boost::_bi::value&lt;server*&gt; &gt; &gt; &gt;::do_complete(boost::asio::detail::task_io_service*, boost::asio::detail::task_io_service_operation*, boost::system::error_code const&amp;, unsigned long) /home/sehe/custom/boost/boost/asio/detail/completion_handler.hpp:68 (test+0x0000005162b7)\n    #7 boost::asio::detail::task_io_service_operation::complete(boost::asio::detail::task_io_service&amp;, boost::system::error_code const&amp;, unsigned long) /home/sehe/custom/boost/boost/asio/detail/task_io_service_operation.hpp:38 (test+0x000000532a63)\n    #8 boost::asio::detail::task_io_service::do_run_one(boost::asio::detail::scoped_lock&lt;boost::asio::detail::posix_mutex&gt;&amp;, boost::asio::detail::task_io_service_thread_info&amp;, boost::system::error_code const&amp;) /home/sehe/custom/boost/boost/asio/detail/impl/task_io_service.ipp:372 (test+0x00000052db18)\n    #9 boost::asio::detail::task_io_service::run(boost::system::error_code&amp;) /home/sehe/custom/boost/boost/asio/detail/impl/task_io_service.ipp:149 (test+0x00000052721a)\n    #10 boost::asio::io_service::run() /home/sehe/custom/boost/boost/asio/impl/io_service.ipp:59 (test+0x0000005266ce)\n    #11 server::worker() /tmp/test.cpp:17 (test+0x000000518f19)\n    #12 boost::_mfi::mf0&lt;void, server&gt;::operator()(server*) const /home/sehe/custom/boost/boost/bind/mem_fn_template.hpp:49 (test+0x00000051741e)\n    #13 void boost::_bi::list1&lt;boost::_bi::value&lt;server*&gt; &gt;::operator()&lt;boost::_mfi::mf0&lt;void, server&gt;, boost::_bi::list0&gt;(boost::_bi::type&lt;void&gt;, boost::_mfi::mf0&lt;void, server&gt;&amp;, boost::_bi::list0&amp;, int) /home/sehe/custom/boost/boost/bind/bind.hpp:255 (test+0x00000051705a)\n    #14 boost::_bi::bind_t&lt;void, boost::_mfi::mf0&lt;void, server&gt;, boost::_bi::list1&lt;boost::_bi::value&lt;server*&gt; &gt; &gt;::operator()() /home/sehe/custom/boost/boost/bind/bind.hpp:895 (test+0x000000516cbf)\n    #15 boost::detail::thread_data&lt;boost::_bi::bind_t&lt;void, boost::_mfi::mf0&lt;void, server&gt;, boost::_bi::list1&lt;boost::_bi::value&lt;server*&gt; &gt; &gt; &gt;::run() /home/sehe/custom/boost/boost/thread/detail/thread.hpp:116 (test+0x00000051d5a9)\n    #16 thread_proxy thread.cpp (libboost_thread.so.1.59.0+0x000000011aa9)\n\nAs if synchronized via sleep:\n    #0 nanosleep &lt;null&gt; (test+0x000000475c10)\n    #1 boost::this_thread::hiden::sleep_for(timespec const&amp;) &lt;null&gt; (libboost_thread.so.1.59.0+0x000000012885)\n    #2 void boost::this_thread::sleep_for&lt;long, boost::ratio&lt;1l, 1000l&gt; &gt;(boost::chrono::duration&lt;long, boost::ratio&lt;1l, 1000l&gt; &gt; const&amp;) /home/sehe/custom/boost/boost/thread/v2/thread.hpp:112 (test+0x0000004e65fb)\n    #3 main /tmp/test.cpp:56 (test+0x0000004e2b71)\n\nLocation is stack of main thread.\n\nThread T1 (tid=27234, running) created by main thread at:\n    #0 pthread_create &lt;null&gt; (test+0x00000047aaf1)\n    #1 boost::thread::start_thread_noexcept() &lt;null&gt; (libboost_thread.so.1.59.0+0x000000010ea9)\n    #2 thread&lt;boost::_bi::bind_t&lt;void, boost::_mfi::mf0&lt;void, server&gt;, boost::_bi::list1&lt;boost::_bi::value&lt;server *&gt; &gt; &gt; &gt; /home/sehe/custom/boost/boost/thread/detail/thread.hpp:266 (test+0x000000519122)\n    #3 server /tmp/test.cpp:13 (test+0x0000004e58b3)\n    #4 main /tmp/test.cpp:53 (test+0x0000004e2855)\n\nSUMMARY: ThreadSanitizer: data race /tmp/test.cpp:57 main\n==================\nserver::handle_test() -&gt; m_value 1234\nmain() -&gt; m_value is 1234\nThreadSanitizer: reported 1 warnings\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 5437851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PUutQ.png?s=128&g=1", "display_name": "ooo0o", "link": "https://stackoverflow.com/users/5437851/ooo0o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 33663280, "answer_count": 1, "score": 0, "last_activity_date": 1447295984, "creation_date": 1447284687, "last_edit_date": 1592644375, "question_id": 33661836, "link": "https://stackoverflow.com/questions/33661836/unexpected-variable-value-using-boost-asio", "title": "Unexpected variable value using Boost.Asio", "body": "<p>I found some weird problem from my boost.asio project.\nso i made a sample-console project that same problem happening.</p>\n<p>Here is the code:</p>\n<pre><code>class server\n{\npublic:\n    server()\n        : m_acceptor(m_ios)\n    {\n        m_work.reset(new boost::asio::io_service::work(m_ios));\n        m_thread = boost::thread(boost::bind(&amp;boost::asio::io_service::run, &amp;m_ios));\n    }\n\n    virtual ~server()\n    {\n        m_work.reset();\n        m_ios.stop();\n        m_thread.join();\n    }\n\n    void do_test()\n    {\n        m_ios.post(boost::bind(&amp;server::handle_test, this));\n    }\n\nprivate:\n    void handle_test()\n    {\n        m_value = 1234;\n        printf(&quot;server::handle_test() -&gt; m_value %d.\\n&quot;, m_value);\n    }\n\n    boost::shared_ptr&lt;boost::asio::io_service::work&gt; m_work;\n    boost::asio::io_service m_ios;\n    boost::thread m_thread;\n    boost::asio::ip::tcp::acceptor m_acceptor;\n\npublic:\n    int m_value;\n};\n\n\nvoid main()\n{\n    server s;\n    s.do_test();\n\n    _getch(); // wait for a while\n    printf(&quot;main() -&gt; m_value is %d.\\n&quot;, s.m_value);\n\n    _getch();\n}\n</code></pre>\n<p>OK. so with this code,\nconsole output will be:</p>\n<blockquote>\n<p>server::handle_test() -&gt; m_value is 1234.</p>\n<p>main() -&gt; m_value is 1234.</p>\n<p>Press any key to continue . . .</p>\n</blockquote>\n<p>Right??</p>\n<p>But strangely, actual console output is:</p>\n<blockquote>\n<p>server::handle_test() -&gt; m_value is 1234.</p>\n<p>main() -&gt; m_value is 0.</p>\n<p>Press any key to continue . . .</p>\n</blockquote>\n<p>Why???</p>\n<p>Is there anyone who can explain this? and how can i fix it fundamentally?</p>\n<p>Here is the whole project file and exe.\n<a href=\"https://www.dropbox.com/s/cflcmbuwgab1rxb/boost_asio_test.zip?dl=0\" rel=\"nofollow noreferrer\">https://www.dropbox.com/s/cflcmbuwgab1rxb/boost_asio_test.zip?dl=0</a></p>\n<p>[Test Environment]</p>\n<p>Windows Embedded 8.1 Industry Pro x64</p>\n<p>Compiled with Visual Studio 2013 (VisualStudioVersion 12.0.31101.0)</p>\n"}, {"tags": ["c++", "winapi", "netbeans", "icons"], "comments": [{"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 1, "creation_date": 1447297291, "post_id": 33661833, "comment_id": 55100840, "body": "<b>I could be wrong, but</b> <code>LoadIcon(NULL, IDI_APPLICATION)</code> is documented as returning a standard icon provided by Windows, not the icon for your application. You will need to figure out how resources in your NetBeans project map to resources embedded in the executable (&quot;Windows resources&quot;)."}], "answers": [{"comments": [{"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "reply_to_user": {"reputation": 47, "user_id": 5230975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-kgN2dtR6PvU/AAAAAAAAAAI/AAAAAAAAABU/AI7ACyXBzUY/photo.jpg?sz=128", "display_name": "CA1K Productions", "link": "https://stackoverflow.com/users/5230975/ca1k-productions"}, "edited": false, "score": 0, "creation_date": 1447644375, "post_id": 33664099, "comment_id": 55225340, "body": "I forgot to add <code>hInstance</code> or <code>GetModuleHandleW(NULL)</code>. See updated answer. It works in Netbeans, however I had a hard time with it, I had to clean/rebuild and then use the command <code>windres.exe resource.rc resource.o</code> and build again."}], "tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": true, "score": 1, "last_activity_date": 1447643858, "last_edit_date": 1447643858, "creation_date": 1447299887, "answer_id": 33664099, "question_id": 33661833, "link": "https://stackoverflow.com/questions/33661833/c-netbeans-win32-hwnd-icon/33664099#33664099", "title": "C++ NetBeans Win32 hwnd icon", "body": "<p>@andlabs is right. <code>IDI_APPLICATION</code> is defined in WinUser.h as:</p>\n\n<pre><code>#define IDI_APPLICATION MAKEINTRESOURCE(32512)\n</code></pre>\n\n<p>You need instead:</p>\n\n<pre><code>wc.hIcon = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_ICON));\nwc.hIconSm = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_SMALLICON));\n</code></pre>\n\n<p>Where you define <code>IDI_ICON</code> as a number:</p>\n\n<pre><code>#define IDI_ICON 1\n</code></pre>\n\n<p>And in resource.rc:</p>\n\n<pre><code>IDI_ICON ICON \"icon.ico\"\n</code></pre>\n\n<p>This will set the icon in taskbar. For the icon in title bar, use this in <code>WM_CREAT</code>:</p>\n\n<pre><code>HICON hicon = (HICON)LoadImage(GetModuleHandleW(NULL), MAKEINTRESOURCE(IDI_ICON), \n    IMAGE_ICON, 0, 0, LR_DEFAULTCOLOR | LR_DEFAULTSIZE);\nSendMessage(hWnd, WM_SETICON, ICON_BIG, (LPARAM)hicon);\n</code></pre>\n\n<h2>----------------------------------------------------------</h2>\n\n<p>Edit:</p>\n\n<p>For a simple test, try </p>\n\n<p>In resource.rc file:</p>\n\n<pre><code>1 ICON \"icon.ico\"\n</code></pre>\n\n<p>In .cpp file:</p>\n\n<pre><code>wc.hIcon = LoadIcon(hInstance, MAKEINTRESOURCE(1));\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 5230975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-kgN2dtR6PvU/AAAAAAAAAAI/AAAAAAAAABU/AI7ACyXBzUY/photo.jpg?sz=128", "display_name": "CA1K Productions", "link": "https://stackoverflow.com/users/5230975/ca1k-productions"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 577, "favorite_count": 0, "accepted_answer_id": 33664099, "answer_count": 1, "score": 1, "last_activity_date": 1447643858, "creation_date": 1447284677, "last_edit_date": 1447285034, "question_id": 33661833, "link": "https://stackoverflow.com/questions/33661833/c-netbeans-win32-hwnd-icon", "title": "C++ NetBeans Win32 hwnd icon", "body": "<p>I am having difficulties with adding an icon to my application window in NetBeans. The code is Win32 related. Whenever I add my icon to the <strong>resources folder (in the NetBeans IDE)</strong> the <em>LoadImage()</em> or the <em>LoadIcon()</em> methods fail to retrieve the icon file, and the result I get is these screenshots:</p>\n\n<p><a href=\"https://i.stack.imgur.com/D7T8G.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/D7T8G.png\" alt=\"\"></a>\n<a href=\"https://i.stack.imgur.com/JEXpq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JEXpq.png\" alt=\"\"></a></p>\n\n<p>So I am wondering, is there something wrong with the location I put the icon? If so, where could I put the icon in? (Project directories below):</p>\n\n<p><a href=\"https://i.stack.imgur.com/5qdju.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5qdju.png\" alt=\"enter image description here\"></a></p>\n\n<p>If it has nothing to do with the location, or I am using the right location, could it be the code I am using? (Code below):</p>\n\n<pre><code>WNDCLASSEX wc;\nHWND hwnd;\nMSG Msg;\n\n//Step 1: Registering the Window Class\nwc.cbSize        = sizeof(WNDCLASSEX);\nwc.style         = 0;\nwc.lpfnWndProc   = WndProc;\nwc.cbClsExtra    = 0;\nwc.cbWndExtra    = 0;\nwc.hInstance     = hInstance;\nwc.hIcon         = LoadIcon(NULL, IDI_APPLICATION);\nwc.hCursor       = LoadCursor(NULL, IDC_ARROW);\nwc.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);\nwc.lpszMenuName  = NULL;\nwc.lpszClassName = g_szClassName;\nwc.hIconSm       = LoadIcon(NULL, IDI_APPLICATION);\n</code></pre>\n\n<p>Feed back would be VERY appreciated. I really want to know what is going on with this. Thanks.</p>\n\n<p>-CA1K</p>\n\n<p><strong><em>EDIT:</em></strong> The code shown above is set back to the usual, I am just trying to find ways to retrieve the icon file.</p>\n"}, {"tags": ["c++", "qt", "opengl", "pbo"], "comments": [{"owner": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "edited": false, "score": 0, "creation_date": 1447291829, "post_id": 33661622, "comment_id": 55099355, "body": "Does your code work if you fill the texture with data without using a PBO? Otherwise it could be almost any problem related to texturing. E.g. bad/missing texture coordinates, sampling with mipmapping enabled without acutally having mipmaps, problem in your shader code, etc."}, {"owner": {"reputation": 1, "user_id": 5552096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VUgK7.png?s=128&g=1", "display_name": "t17dr", "link": "https://stackoverflow.com/users/5552096/t17dr"}, "reply_to_user": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "edited": false, "score": 0, "creation_date": 1447295913, "post_id": 33661622, "comment_id": 55100452, "body": "Yes, I first tried just texturing the plane without PBO a it worked."}, {"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 0, "creation_date": 1447319808, "post_id": 33661622, "comment_id": 55108777, "body": "You are creating a buffer texture (which is not what you probably think t is), then uploading data into it via <code>glTexImage</code>. That can&#39;t work. Create a texture of with <code>Target2D</code> target. Side considerations: 1) using a PBO like you&#39;re doing is not going to give you any advantage, so why are you using it? 2) Why not using <code>m_texture-&gt;setData</code>?"}, {"owner": {"reputation": 1, "user_id": 5552096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VUgK7.png?s=128&g=1", "display_name": "t17dr", "link": "https://stackoverflow.com/users/5552096/t17dr"}, "edited": false, "score": 0, "creation_date": 1447330261, "post_id": 33661622, "comment_id": 55114979, "body": "Thank you. It still doesn&#39;t work with <code>Target2D</code>, but I should probably read more first if you say using PBO here will not have any advantage."}], "owner": {"reputation": 1, "user_id": 5552096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VUgK7.png?s=128&g=1", "display_name": "t17dr", "link": "https://stackoverflow.com/users/5552096/t17dr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 855, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1447284659, "creation_date": 1447283629, "last_edit_date": 1447284659, "question_id": 33661622, "link": "https://stackoverflow.com/questions/33661622/using-opengl-pbo-in-qt-5-5", "title": "Using openGL PBO in qt 5.5", "body": "<p>I'm using Qt 5.5 with <code>QOpenGLWidget</code>, trying to upload a texture using a PBO object. The code renders a simple plane using 2 textured triangles, but only renders the clear color with no visible geometry when I try using the PBO. No errors, the code compiles fine and none of the openGL calls return any error code either.</p>\n\n<p>At first the <code>glTexSubImage2D()</code> caused an openGL error code <code>GL_INVALID_OPERATION</code>. I have used ApiTrace openGL debugger and found that it was probably caused by not calling <code>glTexImage2D()</code> from documentation:</p>\n\n<blockquote>\n  <p><code>GL_INVALID_OPERATION</code> is generated if the texture array has not been\n  defined by a previous <code>glTexImage2D</code> operation.</p>\n</blockquote>\n\n<p>I added that call directly from <code>QOpenGLFunctions</code>, but that's one thing I am not sure about.</p>\n\n<p>I didn't find any examples on using PBO in the new <code>QOpenGLWidget</code>, so I tried writing it after reading the openGL docs and examples without any wrapper. I'm a beginner in both Qt and openGL, so it's probably a simple error, but I can't find it.</p>\n\n<p>The code:\n<strong>In initializeGL()</strong>\n</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>m_texture = new QOpenGLTexture(QOpenGLTexture::TargetBuffer);\nm_texture-&gt;setSize(512,512);\nm_texture-&gt;setFormat(QOpenGLTexture::RGB8_UNorm);\nm_texture-&gt;create();\nm_texture-&gt;bind();\nf-&gt;glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8, 512, 512, 0, GL_RGBA, GL_UNSIGNED_BYTE, 0);\nm_flowmapPBO.create();\nm_flowmapPBO.bind();\nfor (int i = 0; i &lt; 512 * 512; i++)\n{\n    m_pixelDataSource.append(127);  // R\n    m_pixelDataSource.append(127);  // G\n    m_pixelDataSource.append(0);    // B\n    m_pixelDataSource.append(255);  // A\n}\nm_flowmapPBO.setUsagePattern(QOpenGLBuffer::DynamicDraw);\nm_flowmapPBO.allocate(m_pixelDataSource.constData(), m_pixelDataSource.count() * sizeof(GLubyte));\nm_pixelData = (GLubyte*) m_flowmapPBO.map(QOpenGLBuffer::WriteOnly);\n\nmemcpy(m_pixelData,m_pixelDataSource.constData(), sizeof(GLubyte) * m_pixelDataSource.count());\n\nm_flowmapPBO.unmap();\n// (vertex buffer object and shaders creation here)\n</code></pre>\n\n<p><strong>In paintGL()</strong></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// (glClear, projection matrix and shader program settings here)\n\nm_flowmapPBO.bind();\n\nm_pixelData = (GLubyte*) m_flowmapPBO.map(QOpenGLBuffer::WriteOnly);\n\nmemcpy(m_pixelData,m_pixelDataSource.constData(), sizeof(GLubyte) * m_pixelDataSource.count());\n\nm_flowmapPBO.unmap();\n\nm_texture-&gt;bind();\nf-&gt;glTexSubImage2D(GL_TEXTURE_2D, 0, 0, 0, 512, 512, GL_RGBA, GL_UNSIGNED_BYTE, 0);\nf-&gt;glDrawArrays(GL_TRIANGLE_FAN, 0, 5);\n</code></pre>\n\n<p>EDIT: I forgot to bind the VBO before <code>glDrawArrays</code>. Now it draws the triangles, but in dark gray, not the (127,127,0) color from the texture data.</p>\n"}, {"tags": ["c++", "directx", "factory", "direct2d"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1447283678, "post_id": 33661582, "comment_id": 55096902, "body": "Did you actually tell the linker which libraries to link? Specifying only the location of the libraries is not enough."}, {"owner": {"reputation": 578, "user_id": 2375999, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1889484e6d57c609a81f06f5f33b99c8?s=128&d=identicon&r=PG", "display_name": "Display name", "link": "https://stackoverflow.com/users/2375999/display-name"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1447284201, "post_id": 33661582, "comment_id": 55097107, "body": "This same configuration has worked for 3d applications in the past... unless there is a difference in specifying directories between 2d and 3d applications it should work"}], "answers": [{"tags": [], "owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "is_accepted": true, "score": 4, "last_activity_date": 1447289257, "last_edit_date": 1447289257, "creation_date": 1447286542, "answer_id": 33662156, "question_id": 33661582, "link": "https://stackoverflow.com/questions/33661582/how-to-create-a-direct2d-factory/33662156#33662156", "title": "How to create a Direct2D factory", "body": "<p>Try to add to your code this directive.</p>\n\n<pre><code>#pragma comment(lib, \"d2d1.lib\")\n</code></pre>\n\n<p>It will link <code>d2d1.lib</code> to your object code.\nYou may use this directive to link to the other libs.</p>\n"}], "owner": {"reputation": 578, "user_id": 2375999, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1889484e6d57c609a81f06f5f33b99c8?s=128&d=identicon&r=PG", "display_name": "Display name", "link": "https://stackoverflow.com/users/2375999/display-name"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1641, "favorite_count": 0, "accepted_answer_id": 33662156, "answer_count": 1, "score": 2, "last_activity_date": 1447289257, "creation_date": 1447283452, "question_id": 33661582, "link": "https://stackoverflow.com/questions/33661582/how-to-create-a-direct2d-factory", "title": "How to create a Direct2D factory", "body": "<p>I am creating a Direct2D application and the API overview page says the first step is to create a factory... well I tried that with this function</p>\n\n<pre><code>D2D1CreateFactory(D2D1_FACTORY_TYPE_SINGLE_THREADED, &amp;factory);\n</code></pre>\n\n<p>but it gives the error</p>\n\n<pre><code>Error   62  error LNK2019: unresolved external symbol _D2D1CreateFactory@16 referenced in function \"long __cdecl D2D1CreateFactory(enum D2D1_FACTORY_TYPE,struct _GUID const &amp;,void * *)\" (?D2D1CreateFactory@@YAJW4D2D1_FACTORY_TYPE@@ABU_GUID@@PAPAX@Z\n</code></pre>\n\n<p>I am calling the D2D1CreateFactory function from within the WinMain function.</p>\n\n<p>This is how I initialized the factory pointer</p>\n\n<pre><code>ID2D1Factory *factory;\n</code></pre>\n\n<p>These are the Include and Library Directories</p>\n\n<pre><code>C:\\Program Files (x86)\\Microsoft DirectX SDK (June 2010)\\Include\nC:\\Program Files (x86)\\Microsoft DirectX SDK (June 2010)\\Lib\\x86\n</code></pre>\n\n<p>I have experience with direct3D so I am familiar with devices and render targets, but I was under the impression that for direct2D the factory comes first so I haven't created any devices, render targets, etc...</p>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["c++", "algorithm", "sorting", "visual-studio-2012", "g++"], "comments": [{"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 1, "creation_date": 1447284270, "post_id": 33661566, "comment_id": 55097126, "body": "Without 1) Source code for your code, 2) exact compiler options used, it&#39;s pretty hard to say what the difference may be."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1447284764, "post_id": 33661566, "comment_id": 55097304, "body": "Did you use debug or release version while compiling on VS? Debug version might have an overhead of maintaining debug information, and not being optimized as release version would."}, {"owner": {"reputation": 1623, "user_id": 4104766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/67eab5c2a866acc6b12c9b1095c7d4ff?s=128&d=identicon&r=PG&f=1", "display_name": "kemotoe", "link": "https://stackoverflow.com/users/4104766/kemotoe"}, "edited": false, "score": 0, "creation_date": 1447284887, "post_id": 33661566, "comment_id": 55097335, "body": "I used the debug version while compiling on VS."}, {"owner": {"reputation": 1623, "user_id": 4104766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/67eab5c2a866acc6b12c9b1095c7d4ff?s=128&d=identicon&r=PG&f=1", "display_name": "kemotoe", "link": "https://stackoverflow.com/users/4104766/kemotoe"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1447284986, "post_id": 33661566, "comment_id": 55097364, "body": "@MatsPetersson I can post the code for the sorts, if that will help. I just didn&#39;t want to post a wall of code."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1447284995, "post_id": 33661566, "comment_id": 55097367, "body": "@kemotoe That may be a factor in the timing discrepancies that you saw. Re-compile as release, and time it again."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 2, "creation_date": 1447285894, "post_id": 33661566, "comment_id": 55097656, "body": "Whenever benchmarking, make sure you enable at least MOST of the optimisation (so release build and -O2 for gcc)."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1447286085, "post_id": 33661566, "comment_id": 55097717, "body": "A vanilla quick-sort is actually comparatively slow! You need to pull quite a few tricks to get it fast. The result is a hybrid algorithm using quick-sort until either Introsort determines that it is handling a bad case and it needs to switch to something else (e.g., mergesort or heapsort) or the ranges are small where it switches to insertion-sort. You might want to compare against <code>std::sort()</code> to see the effect..."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1447299642, "post_id": 33661566, "comment_id": 55101530, "body": "@kemotoe - For VS, do a release build. Are you sorting 32 bit integers, 64 bit integers, ???. Using VS release build, on my system, Intel 2600K 3.4 ghz, the time to sort 10,000,000 pseudo random unsigned 32 bit integers for top down merge sort is 0.94 seconds, for bottom up merge sort, 0.89 seconds, for quicksort choosing middle value for pivot 0.78 seconds. Median of 3 pivot would take longer."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1447304588, "post_id": 33661566, "comment_id": 55102862, "body": "@kemotoe - quicksort using median of 3 took 0.80 seconds. In X86 / 64 bit mode with 16 registers, most of them used as pointers, a 4 way bottom up merge sort took 0.80 seconds, the same as quicksort with median of 3."}], "owner": {"reputation": 1623, "user_id": 4104766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/67eab5c2a866acc6b12c9b1095c7d4ff?s=128&d=identicon&r=PG&f=1", "display_name": "kemotoe", "link": "https://stackoverflow.com/users/4104766/kemotoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1447283345, "creation_date": 1447283345, "question_id": 33661566, "link": "https://stackoverflow.com/questions/33661566/sorting-algorithm-timing-discrepancies-between-g-and-visual-studio", "title": "Sorting algorithm timing discrepancies between g++ and Visual Studio?", "body": "<p>So I have implemented a heap, merge, and quicksort. I time the three sorts all the same way.</p>\n\n<pre><code>double DiffClocks(clock_t clock1, clock_t clock2){\n    double diffticks = clock1 - clock2;\n    double diffsecs = diffticks / CLOCKS_PER_SEC;\n    return diffsecs;\n}\n</code></pre>\n\n<p>Then with each sort, I time them the same way. Just repeated for each different sort.</p>\n\n<pre><code>void heapsort(int myArray[], int n){\n    clock_t begin, end;\n    begin = clock();\n    heapSortMain(myArray, n);\n    end = clock();\n    double elapsedTime = heapDiffClocks(end, begin);\n    std::cout &lt;&lt; '\\t' &lt;&lt; elapsedTime;\n}\n</code></pre>\n\n<p>All three of the sorts are working. I have a function that verifies the arrays are sorted after executing each sort. My question is, why do I have such a big difference between the timing when running on g++ and on Visual Studio?</p>\n\n<p>My output from Visual Studio 2012:</p>\n\n<pre><code>n     Heap  Merge   Quick\n100      0      0       0\n1000     0      0       0\n10000    0.01   0       0\n100000   0.14   0.02    0.03\n1000000  1.787  0.22    0.33\n10000000 24.116 2.475   6.956\n</code></pre>\n\n<p>My output from g++ 4.7.2</p>\n\n<pre><code>n     Heap  Merge   Quick\n100      0      0       0\n1000     0      0       0\n10000    0      0       0.01\n100000   0.05   0.02    0.02\n1000000  0.59   0.33    0.29\n10000000 10.78  3.79    3.3\n</code></pre>\n\n<p>I used a standard <code>bubbleDown</code> and swap implementation with heap. A recursive mergesort with a merge to merge the two sorted subarrays. A recursive quicksort with a median of 3 pivot and partition function.</p>\n\n<p>I have always understood quicksort to be the fastest general sorting algorithm. On VS it really lags behind merge, and heap just goes up quickly when I hit 10 million on VS.</p>\n"}, {"tags": ["c++", "algorithm", "heap", "priority-queue"], "answers": [{"comments": [{"owner": {"reputation": 2186, "user_id": 3851567, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mgvtP.jpg?s=128&g=1", "display_name": "David Velasquez", "link": "https://stackoverflow.com/users/3851567/david-velasquez"}, "edited": false, "score": 0, "creation_date": 1447284658, "post_id": 33661635, "comment_id": 55097253, "body": "Sorry I&#39;m not following your answer. My vertices are named as integers but I don&#39;t understand what you mean that they can be mapped to their priority queue position. Wouldn&#39;t their position and their name be at different locations?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 2186, "user_id": 3851567, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mgvtP.jpg?s=128&g=1", "display_name": "David Velasquez", "link": "https://stackoverflow.com/users/3851567/david-velasquez"}, "edited": false, "score": 0, "creation_date": 1447285376, "post_id": 33661635, "comment_id": 55097486, "body": "@ghost: if you can find the name of the vertex from the <code>vertex *v</code>, then you can use the name to get the position in the pq by using the name as an index into the mapping table. One way to do this is to keep all the vertices in a <code>vertex[]</code>, in which case you can compute the name as <code>v - vbase</code>. Another way is to keep the name in the <code>vertex</code> struct. Either way, the pq can maintain the mapping while it is shuffling elements, so the only incremental cost is the vertex-id to pq position mapping."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 0, "last_activity_date": 1447283683, "creation_date": 1447283683, "answer_id": 33661635, "question_id": 33661537, "link": "https://stackoverflow.com/questions/33661537/implementation-of-decrease-key-function-for-a-min-heap-priority-queue/33661635#33661635", "title": "Implementation of decrease key function for a min heap priority queue", "body": "<p>You don't need a hash map to store the information; you only need a mapping from vertex to priority-queue position. If your vertices are identified by consecutive integers, then the mapping consists of an array of |V| integers (where |V| is the number of vertices).</p>\n\n<p>While that is not a trivial amount of space, it is only one word per graph vertex, which is considerably less than the space occupied by edge lists.</p>\n"}], "owner": {"reputation": 2186, "user_id": 3851567, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mgvtP.jpg?s=128&g=1", "display_name": "David Velasquez", "link": "https://stackoverflow.com/users/3851567/david-velasquez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 919, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447284949, "creation_date": 1447283213, "last_edit_date": 1495542597, "question_id": 33661537, "link": "https://stackoverflow.com/questions/33661537/implementation-of-decrease-key-function-for-a-min-heap-priority-queue", "title": "Implementation of decrease key function for a min heap priority queue", "body": "<p>I'm trying to run Dijkstra's algorithm and I need to implement a <code>decreaseKey</code> function. I'm having trouble doing it. I read one solution <a href=\"https://stackoverflow.com/questions/17009056/how-to-implement-ologn-decrease-key-operation-for-min-heap-based-priority-queu\">here</a> but it uses a lot of memory by storing a hash map in the heap. Is there a way to implement <code>decreaseKey</code> without a hash map and still maintain O(log n) time?</p>\n\n<p>So far my <code>decreaseKey</code> function takes two parameters: vertex and newDistance. When I call <code>decreaseKey(vertex * v, int newDistance)</code>, the algorithm has to find the index where vertex 'v' is stored and then change its distance. I can't figure out how to 'find' the vertex to get its index and keep it in O(log n) time.</p>\n"}, {"tags": ["c++", "string", "mfc", "operator-overloading"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1447283467, "post_id": 33661520, "comment_id": 55096814, "body": "Well, probably, because CString has <code>operator LPCTSTR</code> overloaded."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1447284190, "post_id": 33661520, "comment_id": 55097103, "body": "I don&#39;t know whether MSVC has this yet (I think it might have appeared recently or might be coming in VS2015 Update 1 or something), but GCC <a href=\"http://coliru.stacked-crooked.com/a/8754d5437afacb50\" rel=\"nofollow noreferrer\">gives a warning</a> for mismatching types to <code>printf</code> and Clang actually <a href=\"http://coliru.stacked-crooked.com/a/8c3e63c0a4e6e72a\" rel=\"nofollow noreferrer\">gives an error</a> (at least in my example case). Actually, I found a <a href=\"http://stackoverflow.com/questions/32481128/vs2015-now-error-c4477-fprintf\">case with <code>CString</code></a> that VS2015 complains about."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1447288380, "post_id": 33661520, "comment_id": 55098361, "body": "@AlgirdasPreid\u017eius: The compiler will only ever invoke an implicit type conversion, if it knows source and target type. With variadic functions, though, there is no target type specified, so the compiler cannot perform any conversions."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1447288640, "post_id": 33661520, "comment_id": 55098448, "body": "Now for the real question: Why would you ever attempt to replace <code>CString</code> in a huge project? It&#39;s still there, after decades, simply because it works. It implements conversion between MBCS and Unicode, plays well with C-style arguments, and sports COM support."}, {"owner": {"reputation": 4887, "user_id": 7442, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/073ebde743b9b53def0230a7e90907ef?s=128&d=identicon&r=PG", "display_name": "DougN", "link": "https://stackoverflow.com/users/7442/dougn"}, "edited": false, "score": 0, "creation_date": 1447293686, "post_id": 33661520, "comment_id": 55099835, "body": "My class derives from CString, and also has LPCTSTR overloaded, but it still doesn&#39;t work :(    Casting definitely works, but I don&#39;t want to go back and cast everywhere.   CString is awesome, but I need to use it in a heavily multi-threaded environment so can&#39;t have it sharing -- need to force every instance to be unshared."}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1447287709, "post_id": 33661632, "comment_id": 55098165, "body": "The <code>CString</code> class is implemented in a way, that it can be passed for any <code>const char*</code> or <code>const wchar_t*</code> argument. It doesn&#39;t have any virtual class members, and its only member is a pointer to a C-style string. Additional information is stored &#39;to the <b>left</b>&#39; (i.e. towards <b>lower</b> addresses) of the stored pointer. It works, by design, and the design followed too many bugs around <code>CString</code> and the <code>printf</code> family of functions. I wouldn&#39;t suggest using it that way, though, and always use an explicit cast."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1447292281, "post_id": 33661632, "comment_id": 55099500, "body": "@IInspectable, I had a vague notion that it was designed that way, probably from something I read about it at one point. It&#39;s interesting that they would design for that in a binary-compatible way rather than just conversions."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1447334268, "post_id": 33661632, "comment_id": 55117355, "body": "Variadic function parameters don&#39;t have any type information. The compiler cannot perform any implicit type conversions. That&#39;s why it cannot be designed any other way, if it must be compatible with the <code>%s</code> format specifier for the <code>printf</code> family of functions."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1447335369, "post_id": 33661632, "comment_id": 55118047, "body": "@IInspectable, I don&#39;t disagree, I just found it interesting that it <i>was</i> designed to be compatible with <code>%s</code>."}], "tags": [], "owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "is_accepted": false, "score": 1, "last_activity_date": 1447284543, "last_edit_date": 1447284543, "creation_date": 1447283653, "answer_id": 33661632, "question_id": 33661520, "link": "https://stackoverflow.com/questions/33661520/how-does-variable-argument-list-work-with-overloaded-objects-in-c/33661632#33661632", "title": "How does variable argument list work with overloaded objects in C++?", "body": "<blockquote>\n  <p>How does the printf statement (or the CString) know to grab/return the LPCSTR operator and thus get a pointer to the string, and not a pointer to the object?</p>\n</blockquote>\n\n<p>It doesn't. <code>printf</code> isn't typesafe. It will blindly pretend that <code>name</code> is a C string and not a C++ class object. This is undefined behaviour, allowing the program to do whatever it wants, including work as expected. </p>\n\n<p>To get this to work properly, you either have to cast the object explicitly or use something that is typesafe, unlike <code>printf</code>.</p>\n\n<p>If the call seems to work properly, there's a chance that <code>CString</code>'s first or only data member is a C string of the appropriate type whose address is the same as the object's (similar to <a href=\"http://coliru.stacked-crooked.com/a/1a555809b4bab4d6\" rel=\"nofollow\">this example</a>). However, this behaviour should never be relied upon.</p>\n"}, {"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1447288134, "post_id": 33661643, "comment_id": 55098288, "body": "An explicit cast is recommended. However, yours is wrong. It will print a single character (possibly), when compiled with the <code>UNICODE</code> preprocessor symbol defined."}, {"owner": {"reputation": 546, "user_id": 529103, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bd42751ddce182dcbd9bae2324ccf2b6?s=128&d=identicon&r=PG", "display_name": "Zachary Turner", "link": "https://stackoverflow.com/users/529103/zachary-turner"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1447288507, "post_id": 33661643, "comment_id": 55098398, "body": "The cast is correct in the presence of <code>%s</code>, which is what the OP used.  <code>%s</code> will already not print a unicode string, regardless of how you cast it."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1447288865, "post_id": 33661643, "comment_id": 55098505, "body": "The correct cast is <code>static_cast&lt;const char*&gt;(name)</code>. It fails to compile, in case <code>UNICODE</code> is defined. I wasn&#39;t proposing that the code should print Unicode characters. I am, however, proposing, that it should fail to compile, if it must."}, {"owner": {"reputation": 4887, "user_id": 7442, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/073ebde743b9b53def0230a7e90907ef?s=128&d=identicon&r=PG", "display_name": "DougN", "link": "https://stackoverflow.com/users/7442/dougn"}, "edited": false, "score": 0, "creation_date": 1447293796, "post_id": 33661643, "comment_id": 55099862, "body": "It does work fine with a cast, but I need it to work without the cast like CString does so I don&#39;t have to go back and add casts to a huge code base."}], "tags": [], "owner": {"reputation": 546, "user_id": 529103, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bd42751ddce182dcbd9bae2324ccf2b6?s=128&d=identicon&r=PG", "display_name": "Zachary Turner", "link": "https://stackoverflow.com/users/529103/zachary-turner"}, "is_accepted": false, "score": 1, "last_activity_date": 1447283960, "last_edit_date": 1447283960, "creation_date": 1447283742, "answer_id": 33661643, "question_id": 33661520, "link": "https://stackoverflow.com/questions/33661520/how-does-variable-argument-list-work-with-overloaded-objects-in-c/33661643#33661643", "title": "How does variable argument list work with overloaded objects in C++?", "body": "<p>The reason it ends up garbled is because C-style vararg passing does <em>no type conversion whatsoever</em>.  You're passing in an object, which might have many fields and an arbitrary layout, to a function that does the same thing in spirit as casting it to a <code>void*</code> -- i.e. it erases the type information.  If you want your code to work you need to cast it to the type you expect the function to see.  In this case, you need to write:</p>\n\n<pre><code>printf(\"Hi %s\", (LPCSTR)name);\n</code></pre>\n\n<p>This way the value that actually gets passed to the printf function is a pointer to the underlying string, which is what the <code>%s</code> format specifier expects.</p>\n"}, {"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1447287991, "post_id": 33662336, "comment_id": 55098236, "body": "This really is the only answer, that addresses, why the code works as expected, even though one might expect that it wouldn&#39;t. But yes, that&#39;s how <code>CString</code> is implemented, and it follows the <i>&quot;can be used anywhere a C-style string is used&quot;</i> paradigm."}, {"owner": {"reputation": 4887, "user_id": 7442, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/073ebde743b9b53def0230a7e90907ef?s=128&d=identicon&r=PG", "display_name": "DougN", "link": "https://stackoverflow.com/users/7442/dougn"}, "edited": false, "score": 0, "creation_date": 1447293863, "post_id": 33662336, "comment_id": 55099890, "body": "My class derives from CString, and it adds no new data members, so I would have thought it would work for the same reason.  But it doesn&#39;t.  I probably have to brush up on my vtable stuff to understand why... ?"}, {"owner": {"reputation": 4887, "user_id": 7442, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/073ebde743b9b53def0230a7e90907ef?s=128&d=identicon&r=PG", "display_name": "DougN", "link": "https://stackoverflow.com/users/7442/dougn"}, "edited": false, "score": 0, "creation_date": 1447296449, "post_id": 33662336, "comment_id": 55100609, "body": "Did some reading.  CString is a template that inherits from a base class, so it&#39;s not a plain old data (POD) class, so how does it work?"}, {"owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 0, "creation_date": 1447301564, "post_id": 33662336, "comment_id": 55102000, "body": "Its hard to debug that without seeing the code.  Are you using virtual inheritance?  If so, the vtable would get in the way."}, {"owner": {"reputation": 4887, "user_id": 7442, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/073ebde743b9b53def0230a7e90907ef?s=128&d=identicon&r=PG", "display_name": "DougN", "link": "https://stackoverflow.com/users/7442/dougn"}, "edited": false, "score": 0, "creation_date": 1447307470, "post_id": 33662336, "comment_id": 55103637, "body": "That was it.  Getting rid of the virtual destructor got rid of the vtable (no other virtual methods) and now it works just like CString :)"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 4887, "user_id": 7442, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/073ebde743b9b53def0230a7e90907ef?s=128&d=identicon&r=PG", "display_name": "DougN", "link": "https://stackoverflow.com/users/7442/dougn"}, "edited": false, "score": 0, "creation_date": 1447334734, "post_id": 33662336, "comment_id": 55117642, "body": "@DougN: Until you store your fancy new string type in a pointer or reference to a base type. At that point your carefully crafted destructor won&#39;t run. If you need to fine tune memory management of your string class (e.g. for multithreaded environments), implement a <a href=\"https://msdn.microsoft.com/en-us/library/bww86e57.aspx\" rel=\"nofollow noreferrer\">custom string manager</a>."}, {"owner": {"reputation": 4887, "user_id": 7442, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/073ebde743b9b53def0230a7e90907ef?s=128&d=identicon&r=PG", "display_name": "DougN", "link": "https://stackoverflow.com/users/7442/dougn"}, "edited": false, "score": 0, "creation_date": 1447347894, "post_id": 33662336, "comment_id": 55127290, "body": "I did implement a custom string manager -- but there is no way to get CString to use it :(  So I had to derive from CString to inject my string manager.  And I derived from CString so my custom string would still be compatible and usable by all of my own and MFC&#39;s usage of CString."}], "tags": [], "owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "is_accepted": true, "score": 2, "last_activity_date": 1447287598, "creation_date": 1447287598, "answer_id": 33662336, "question_id": 33661520, "link": "https://stackoverflow.com/questions/33661520/how-does-variable-argument-list-work-with-overloaded-objects-in-c/33662336#33662336", "title": "How does variable argument list work with overloaded objects in C++?", "body": "<p>The real answer has nothing to do with an implicit call to operator LPCTSTR (), and I think it's kind of clever how it actually works.</p>\n\n<p>To implement a string class, you need the string's data buffer, of course, as well as some other data fields, like the length of the string, maybe how much memory is allocated, maybe a reference count, etc.</p>\n\n<p>But how would you make variadic functions see a C-style string when passing a CString argument? You could put the data buffer field (a pointer to char*) as the first member, but then all the other fields (like string length) also get unexpectedly pushed onto the stack as if they were extra function arguments.</p>\n\n<p>So the next thing you try is to package all of the fields into a single memory structure which is allocated along with the string'd character data buffer.  And if this data buffer is located at the start of the aggregate structure, a variadic function expecting a C-string will see the beginning of this structure. If a terminal null is placed at the end of the data buffer, before the other data fields, then printf will stop reading string data before it hits the data you don't want it to see and everything works out fine!</p>\n\n<p>But then you realize you have a new problem -- the length of the character data buffer is variable, and the \"length\" field is now located in memory after the character data, so you would need to know \"length\" in order to know where the \"length\" field can be found.</p>\n\n<p>So can you move \"length\" and all the other extra fields to the beginnning of the structure, in memory before the character data?  Of course not, printf would now see some funny characters (or even a null) added at the beginning of the real string.</p>\n\n<p>But this is what CString does.  However, its single member variable is a pointer, not to the start of the aggregate struct, but to the memory location inside it where the character data begins.</p>\n\n<p>And because the data fields (without the character buffer) have a fixed size, the string class knows how to access them in memory, given its pointer to char (these fields are located at a negative offset from the pointer to char).  And of course, when it frees its aggregate structure, the class will also need to calculate where its original memory allcation begins, not just use its pointer to char.</p>\n"}], "owner": {"reputation": 4887, "user_id": 7442, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/073ebde743b9b53def0230a7e90907ef?s=128&d=identicon&r=PG", "display_name": "DougN", "link": "https://stackoverflow.com/users/7442/dougn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 33662336, "answer_count": 3, "score": 1, "last_activity_date": 1447287598, "creation_date": 1447283121, "question_id": 33661520, "link": "https://stackoverflow.com/questions/33661520/how-does-variable-argument-list-work-with-overloaded-objects-in-c", "title": "How does variable argument list work with overloaded objects in C++?", "body": "<p>When passing variable arguments to a statement, the type information does not get passed.</p>\n\n<p>Imagine this example using a string object (I'm using MFC/ATL's CString)</p>\n\n<pre><code>CString name = \"kevin\";\nprintf(\"Hi %s\", name);\n</code></pre>\n\n<p>How does the printf statement (or the CString) know to grab/return the LPCSTR operator and thus get a pointer to the string, and not a pointer to the object?</p>\n\n<p>I'm trying to write my own string class (it needs to replace CString in a huge project), but when I do the above printf, it ends up garbled because it didn't get the correct value for name.</p>\n"}, {"tags": ["c++", "arrays", "loops"], "comments": [{"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 1, "creation_date": 1447283029, "post_id": 33661457, "comment_id": 55096621, "body": "Nothing abnormal. Nothing in the standard states that a block local variable <b>has to</b> change value at each iteration. It&#39;s only that you <b>cannot assume</b> that it will keep its value."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1447283082, "post_id": 33661457, "comment_id": 55096645, "body": "Local variables are not initialized automatically, so accessing it before assigning it results in undefined behavior."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 4, "creation_date": 1447283133, "post_id": 33661457, "comment_id": 55096669, "body": "<a href=\"http://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">why <code>while(!file.eof())</code> is always wrong</a>"}, {"owner": {"reputation": 23, "user_id": 5552581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b1545de5d7ee2a1e4ee0146df1fd989?s=128&d=identicon&r=PG&f=1", "display_name": "Mosedince", "link": "https://stackoverflow.com/users/5552581/mosedince"}, "reply_to_user": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 0, "creation_date": 1447283138, "post_id": 33661457, "comment_id": 55096673, "body": "@A.S.H What do you mean?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1447283217, "post_id": 33661457, "comment_id": 55096709, "body": "Why does it matter if the previous data is removed? You&#39;re overwriting it with the data from the current line. The problem is that you&#39;re not adding a null terminator."}, {"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1447283222, "post_id": 33661457, "comment_id": 55096713, "body": "It&#39;s like a new variable at each iteration. So as @Barmar said, if you read it before writing to it (within a new iteration), its data is <i>undefined</i>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1447283339, "post_id": 33661457, "comment_id": 55096765, "body": "Why don&#39;t you use <code>std::string</code> instead of a <code>char</code> array? They are automatically initialized to an empty string."}, {"owner": {"reputation": 23, "user_id": 5552581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b1545de5d7ee2a1e4ee0146df1fd989?s=128&d=identicon&r=PG&f=1", "display_name": "Mosedince", "link": "https://stackoverflow.com/users/5552581/mosedince"}, "edited": false, "score": 0, "creation_date": 1447283477, "post_id": 33661457, "comment_id": 55096819, "body": "Would you show what you are talking about by showing some code. I am not getting what you mean. And to answer your question, the previous data needs to be removed because I compare it later with another array to see if there is a match. (THIS IS A SIMPLIFIED SNIPPETS FROM MY ORIGINAL CODE)"}, {"owner": {"reputation": 23, "user_id": 5552581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b1545de5d7ee2a1e4ee0146df1fd989?s=128&d=identicon&r=PG&f=1", "display_name": "Mosedince", "link": "https://stackoverflow.com/users/5552581/mosedince"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1447283680, "post_id": 33661457, "comment_id": 55096904, "body": "@Barmar I am not accessing anything before assigning!! What are you talking about?!!"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1447283740, "post_id": 33661457, "comment_id": 55096936, "body": "How did you determine that the old contents are repeating if you didn&#39;t access them?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1447283796, "post_id": 33661457, "comment_id": 55096957, "body": "@Mosedince You didn&#39;t initialize any of the arrays though. Also, it doesn&#39;t need to remove data, nowhere in the standard says that. And, as fellow commenters said, accessing uninitialized variables is undefined behavior - which means - anything can happen."}, {"owner": {"reputation": 23, "user_id": 5552581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b1545de5d7ee2a1e4ee0146df1fd989?s=128&d=identicon&r=PG&f=1", "display_name": "Mosedince", "link": "https://stackoverflow.com/users/5552581/mosedince"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1447283808, "post_id": 33661457, "comment_id": 55096961, "body": "@Barmar I am printing the result each time at the end of the loop!! And the result shows previous data!"}, {"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 0, "creation_date": 1447283912, "post_id": 33661457, "comment_id": 55097008, "body": "Dude look at your question, we were answering your question:  <code>But, for some reason the previous data is not removed from the current_name! It prints old data out if it wasn&#39;t overridden by new characters from the next line.</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1447283924, "post_id": 33661457, "comment_id": 55097018, "body": "If you&#39;re only assigning to elements up to <code>i=5</code>, but you print elements past that, then you&#39;re accessing elements that you didn&#39;t assign."}, {"owner": {"reputation": 23, "user_id": 5552581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b1545de5d7ee2a1e4ee0146df1fd989?s=128&d=identicon&r=PG&f=1", "display_name": "Mosedince", "link": "https://stackoverflow.com/users/5552581/mosedince"}, "reply_to_user": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 0, "creation_date": 1447284635, "post_id": 33661457, "comment_id": 55097240, "body": "@A.S.H and that exactly what happened! How do you want me to ask?"}, {"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 0, "creation_date": 1447284741, "post_id": 33661457, "comment_id": 55097294, "body": "@Mosedince take it easy :). You asked a question very well, and we found that it is nothing abnormal and we tried to explain why we dont find it abnormal. Good to know that your issue was solved. Cheers."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5552581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b1545de5d7ee2a1e4ee0146df1fd989?s=128&d=identicon&r=PG&f=1", "display_name": "Mosedince", "link": "https://stackoverflow.com/users/5552581/mosedince"}, "edited": false, "score": 0, "creation_date": 1447283873, "post_id": 33661588, "comment_id": 55096987, "body": "Exactly! I am going to try that"}, {"owner": {"reputation": 23, "user_id": 5552581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b1545de5d7ee2a1e4ee0146df1fd989?s=128&d=identicon&r=PG&f=1", "display_name": "Mosedince", "link": "https://stackoverflow.com/users/5552581/mosedince"}, "edited": false, "score": 0, "creation_date": 1447284397, "post_id": 33661588, "comment_id": 55097174, "body": "That worked perfectly!! Would you explain how would I prevent that from happening in a better way (if there is)? BECAUSE, in Java the one I wrote should work just fine!"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 23, "user_id": 5552581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b1545de5d7ee2a1e4ee0146df1fd989?s=128&d=identicon&r=PG&f=1", "display_name": "Mosedince", "link": "https://stackoverflow.com/users/5552581/mosedince"}, "edited": false, "score": 0, "creation_date": 1447294787, "post_id": 33661588, "comment_id": 55100126, "body": "@Mosedince C-style arrays are weird. You could use C++ style arrays instead, or in this case, C++ strings."}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": true, "score": 3, "last_activity_date": 1447390578, "last_edit_date": 1495541849, "creation_date": 1447283468, "answer_id": 33661588, "question_id": 33661457, "link": "https://stackoverflow.com/questions/33661457/a-local-array-repeats-inside-a-loop-c/33661588#33661588", "title": "A local array repeats inside a loop! C++", "body": "<p>You're not terminating <code>current_name</code> after filling it.  Add <code>current_name[i] = 0</code> after the inner loop just before your <code>cout</code>.  You're probably seeing this if you read <code>abcdef</code> then read <code>jkl</code> and probably get <code>jkldef</code> for output</p>\n\n<hr>\n\n<p><strong>UPDATE</strong></p>\n\n<p>You wanted to know if there is a better way.  There is--and we'll get to it.  But, coming from Java, your question and followup identified some larger issues that I believe you should be aware of.  Be careful what you wish for--you may actually get it [and <em>more</em>] :-).  All of the following is based on love ...</p>\n\n<hr>\n\n<blockquote>\n  <p><strong>Attention All Java Programmers!  Welcome to \"A Brave New World\"!</strong></p>\n</blockquote>\n\n<hr>\n\n<p><strong>Basic Concepts</strong></p>\n\n<p>Before we even get to <code>C</code> the <strong>language</strong>, we need to talk about a few concepts first.</p>\n\n<p>Computer Architecture:<br>\n<a href=\"https://en.wikipedia.org/wiki/Computer_architecture\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Computer_architecture</a><br>\n<a href=\"https://en.wikipedia.org/wiki/Instruction_set\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Instruction_set</a></p>\n\n<p>Memory Layout of Computer Programs:<br>\n<a href=\"http://www.geeksforgeeks.org/memory-layout-of-c-program/\" rel=\"nofollow noreferrer\">http://www.geeksforgeeks.org/memory-layout-of-c-program/</a></p>\n\n<p>Differences between Memory Addresses/Pointers and Java References:<br>\n<a href=\"https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value\">Is Java &quot;pass-by-reference&quot; or &quot;pass-by-value&quot;?</a><br>\n<a href=\"https://softwareengineering.stackexchange.com/questions/141834/how-is-a-java-reference-different-from-a-c-pointer\">https://softwareengineering.stackexchange.com/questions/141834/how-is-a-java-reference-different-from-a-c-pointer</a></p>\n\n<hr>\n\n<blockquote>\n  <p><strong>Concepts Alien to Java Programmers</strong></p>\n</blockquote>\n\n<p>The C language gives you direct access the underlying <strong><em>computer architecture</em></strong>.  It will <em>not</em> do anything that you don't <em>explicitly</em> specify.  Herein, I'm mentioning <code>C</code> [for brevity] but what I'm really talking about is a combination of <em>the memory layout and the computer architecture</em>.</p>\n\n<ul>\n<li>If you read memory that you didn't initialize, you will see seemingly random data.  </li>\n<li>If you allocate something from the heap, you must explicitly free it.  It doesn't magically get marked for deletion by a garbage collector when it \"goes out of scope\".  </li>\n<li>There is <em>no</em> garbage collector in C  </li>\n<li>C pointers are far more powerful that Java references.  You can add and subtract values to pointers.  You can subtract two pointers and use the difference as an index value.  You can loop through an array <em>without</em> using index variables--you just deference a pointer and increment the pointer.  </li>\n<li>The data of automatic variables in Java are stored in the heap.  Each variable requires a separate heap allocation.  This is slow and time consuming.  </li>\n<li>In C, the data of automatic variables in stored in the <em>stack frame</em>.  The stack frame is a contiguous area of <em>bytes</em>.  To allocate space for the stack frame, C simply subtracts the desired size from the stack pointer [hardware register].  The size of the stack frame is the sum of <em>all</em> variables within a given function's scope, regardless of whether they're declared inside a loop inside the function.  </li>\n<li>Its initial value depends upon what previous function used that area for and what <em>byte</em> values it stored there.  Thus, if <code>main</code> calls function <code>fnca</code>, it will fill the stack with whatever data.  If then <code>main</code> calls <code>fncb</code> it will see fnca's values, which are semi-random as far as fncb is concerned.  Both fnca and fncb must initialize stack variables before they are used.  </li>\n<li>Declaration of a C variable <em>without</em> an <em>initializer</em> clause does <em>not</em> initialize the variable.  For the bss area, it will be zero.  For a stack variable, you must do that explicitly.</li>\n<li>There is <em>no</em> range checking of array indexes in C [or pointers to arrays or array elements for that matter].  If you write beyond the defined area, you will write into whatever has been mapped/linked into the memory region next.  For example, if you have a memory area: <code>int x[10]; int y;</code> and you [inadvertently] write to <code>x[10]</code> [one beyond the end] you will corrupt <code>y</code>  </li>\n<li>This is true regardless of which memory section (e.g. data, bss, heap, or stack) your array is in.  </li>\n<li>C has <em>no</em> concept of a <em>string</em>.  When people talk about a \"c string\" what they're <em>really</em> talking about is a <code>char</code> array that has an \"end of string\" (aka EOS) <em>sentinel</em> character at the end of the useful data.  The \"standard\" EOS char is almost universally defined as 0x00 [since ~1970]  </li>\n<li>The only <em>intrinsic</em> types supported by an architecture are: <code>char</code>, <code>short</code>, <code>int</code>, <code>long</code>/<code>pointer</code>, <code>long long</code>, and <code>float/double</code>.  There may be some others on a given arch, but that's the usual list.  Everything else (e.g. a <code>class</code> or <code>struct</code> is \"built up\" by the compiler as a convenience to the programmer from the arch <em>intrinsic</em> types)</li>\n</ul>\n\n<p>Here are some things that <em>are</em> about C [and C++]:<br>\n- C has <em>preprocessor</em> macros.  Java has no concept of macros.  Preprocessor macros can be thought of as a crude form of <em>metaprogramming</em>.<br>\n- C has <code>inline</code> functions.  They look just like regular functions, but the compiler will attempt to insert their code directly into any function that calls one.  This is handy if the function is cleanly defined but small (e.g. a few lines).  It saves the overhead of actually calling the function.</p>\n\n<hr>\n\n<p><strong>Examples</strong></p>\n\n<p>Here are several versions of your original program as an example:</p>\n\n<pre><code>// myfnc1 -- original\nvoid\nmyfnc1(void)\n{\n    istream file;\n\n    while (isOpen &amp;&amp; !file.eof()) {\n        char current_line[LINE];\n        char current_name[NAME];\n\n        file.getline(current_line, LINE);\n\n        int i = 0;\n\n        while (current_line[i] != ';') {\n            current_name[i] = current_line[i];\n            i++;\n        }\n\n        current_name[i] = 0;\n\n        cout &lt;&lt; current_name &lt;&lt; endl;\n    }\n}\n\n// myfnc2 -- moved definitions to function scope\nvoid\nmyfnc2(void)\n{\n    istream file;\n    int i;\n    char current_line[LINE];\n    char current_name[NAME];\n\n    while (isOpen &amp;&amp; !file.eof()) {\n        file.getline(current_line, LINE);\n\n        i = 0;\n\n        while (current_line[i] != ';') {\n            current_name[i] = current_line[i];\n            i++;\n        }\n\n        current_name[i] = 0;\n\n        cout &lt;&lt; current_name &lt;&lt; endl;\n    }\n}\n\n// myfnc3 -- converted to for loop\nvoid\nmyfnc(void)\n{\n    istream file;\n    int i;\n    char current_line[LINE];\n    char current_name[NAME];\n\n    while (isOpen &amp;&amp; !file.eof()) {\n        file.getline(current_line, LINE);\n\n        for (i = 0;  current_line[i] != ';';  ++i)\n            current_name[i] = current_line[i];\n        current_name[i] = 0;\n\n        cout &lt;&lt; current_name &lt;&lt; endl;\n    }\n}\n\n// myfnc4 -- converted to use pointers\nvoid\nmyfnc4(void)\n{\n    istream file;\n    const char *line;\n    char *name;\n    char current_line[LINE];\n    char current_name[NAME];\n\n    while (isOpen &amp;&amp; !file.eof()) {\n        file.getline(current_line, LINE);\n\n        name = current_name;\n        for (line = current_line;  *line != ';';  ++line, ++name)\n            *name = *line;\n        *name = 0;\n\n        cout &lt;&lt; current_name &lt;&lt; endl;\n    }\n}\n\n// myfnc5 -- more efficient use of pointers\nvoid\nmyfnc5(void)\n{\n    istream file;\n    const char *line;\n    char *name;\n    int chr;\n    char current_line[LINE];\n    char current_name[NAME];\n\n    while (isOpen &amp;&amp; !file.eof()) {\n        file.getline(current_line, LINE);\n\n        name = current_name;\n        line = current_line;\n        for (chr = *line++;  chr != ';';  chr = *line++, ++name)\n            *name = chr;\n        *name = 0;\n\n        cout &lt;&lt; current_name &lt;&lt; endl;\n    }\n}\n\n// myfnc6 -- fixes bug if line has no semicolon\nvoid\nmyfnc6(void)\n{\n    istream file;\n    const char *line;\n    char *name;\n    int chr;\n    char current_line[LINE];\n    char current_name[NAME];\n\n    while (isOpen &amp;&amp; !file.eof()) {\n        file.getline(current_line, LINE);\n\n        name = current_name;\n        line = current_line;\n        for (chr = *line++;  chr != 0;  chr = *line++, ++name) {\n            if (chr == ';')\n                break;\n            *name = chr;\n        }\n        *name = 0;\n\n        cout &lt;&lt; current_name &lt;&lt; endl;\n    }\n}\n\n// myfnc7 -- recoded to use \"smart\" string\nvoid\nmyfnc7(void)\n{\n    istream file;\n    const char *line;\n    char *name;\n    int chr;\n    char current_line[LINE];\n    xstr_t current_name;\n    xstr_t *name;\n\n    name = &amp;current_name;\n    xstrinit(name);\n\n    while (isOpen &amp;&amp; !file.eof()) {\n        file.getline(current_line, LINE);\n\n        xstragain(name);\n\n        line = current_line;\n        for (chr = *line++;  chr != 0;  chr = *line++) {\n            if (chr == ';')\n                break;\n            xstraddchar(name,chr);\n        }\n\n        cout &lt;&lt; xstrcstr(name) &lt;&lt; endl;\n    }\n\n    xstrfree(name);\n}\n</code></pre>\n\n<hr>\n\n<p>Here is a \"smart\" string [buffer] class similar to what you're used to:</p>\n\n<pre><code>// xstr -- \"smart\" string \"class\" for C\n\ntypedef struct {\n    size_t xstr_maxlen;                 // maximum space in string buffer\n    char *xstr_lhs;                     // pointer to start of string\n    char *xstr_rhs;                     // pointer to start of string\n} xstr_t;\n\n// xstrinit -- reset string buffer\nvoid\nxstrinit(xstr_t *xstr)\n{\n\n    memset(xstr,0,sizeof(xstr));\n}\n\n// xstragain -- reset string buffer\nvoid\nxstragain(xstr_t xstr)\n{\n\n    xstr-&gt;xstr_rhs = xstr-&gt;xstr_lhs;\n}\n\n// xstrgrow -- grow string buffer\nvoid\nxstrgrow(xstr_t *xstr,size_t needlen)\n{\n    size_t curlen;\n    size_t newlen;\n    char *lhs;\n\n    lhs = xstr-&gt;xstr_lhs;\n\n    // get amount we're currently using\n    curlen = xstr-&gt;xstr_rhs - lhs;\n\n    // get amount we'll need after adding the whatever\n    newlen = curlen + needlen + 1;\n\n    // allocate more if we need it\n    if ((newlen + 1) &gt;= xstr-&gt;xstr_maxlen) {\n        // allocate what we'll need plus a bit more so we're not called on\n        // each add operation\n        xstr-&gt;xstr_maxlen = newlen + 100;\n\n        // get more memory\n        lhs = realloc(lhs,xstr-&gt;xstr_maxlen);\n        xstr-&gt;xstr_lhs = lhs;\n\n        // adjust the append pointer\n        xstr-&gt;xstr_rhs = lhs + curlen;\n    }\n}\n\n// xstraddchar -- add character to string\nvoid\nxstraddchar(xstr_t *xstr,int chr)\n{\n\n    // get more space in string buffer if we need it\n    xstrgrow(xstr,1);\n\n    // add the character\n    *xstr-&gt;xstr_rhs++ = chr;\n\n    // maintain the sentinel/EOS as we go along\n    *xstr-&gt;xstr_rhs = 0;\n}\n\n// xstraddstr -- add string to string\nvoid\nxstraddstr(xstr_t *xstr,const char *str)\n{\n    size_t len;\n\n    len = strlen(str);\n\n    // get more space in string buffer if we need it\n    xstrgrow(xstr,len);\n\n    // add the string\n    memcpy(xstr-&gt;xstr_rhs,str,len);\n    *xstr-&gt;xstr_rhs += len;\n\n    // maintain the sentinel/EOS as we go along\n    *xstr-&gt;xstr_rhs = 0;\n}\n\n// xstrcstr -- get the \"c string\" value\nchar *\nxstrcstr(xstr_t *xstr,int chr)\n{\n\n    return xstr-&gt;xstr_lhs;\n}\n\n// xstrfree -- release string buffer data\nvoid\nxstrfree(xstr_t *xstr)\n{\n    char *lhs;\n\n    lhs = xstr-&gt;xstr_lhs;\n    if (lhs != NULL)\n        free(lhs);\n\n    xstrinit(xstr);\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Recommendations</strong></p>\n\n<ul>\n<li>Before you try to \"get around\" a \"c string\", embrace it.  You'll encounter it in many places.  It's unavoidable.  </li>\n<li>Learn how to manipulate pointers as easily as index variables.  They're more flexible and [once you get the hang of them] easier to use.  I've seen code written by programmers who didn't learn this and their code is always more complex than it needs to be [and usually full of bugs that I've needed to fix].  </li>\n<li>Good commenting is important in any language but, perhaps, more so in C than Java for certain things.  </li>\n<li>Always compile with <code>-Wall</code> <code>-Werror</code> and fix <em>any</em> warnings.  You have been <em>warned</em> :-)</li>\n<li>I'd play around a bit with the <code>myfnc</code> examples I gave you.  This can help.</li>\n<li>Get a firm grasp of the basics before you ...</li>\n</ul>\n\n<hr>\n\n<p><strong>And now, a word about C++ ...</strong></p>\n\n<p>Most of the above was about architecture, memory layout, and C.  All of that <em>still</em> applies to C++.</p>\n\n<p>C++ <em>does</em> do a more limited reclamation of stack variables when the function returns and they go out of scope.  This has its pluses and minuses.</p>\n\n<p>C++ has many classes to alleviate the tedium of common functions/idioms/boilerplate.  It has the <code>std</code> standard template library.  It also has <code>boost</code>.  For example, <code>std::string</code> will probably do what you want.  But, compare it against my xstr first.</p>\n\n<p>But, once again, I wish to caution you.  At your present level, work <em>from</em> the fundamentals, not <em>around</em> them.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1447294735, "post_id": 33663314, "comment_id": 55100109, "body": "this repeats the <code>while...eof</code> mistake (twice)"}, {"owner": {"reputation": 668, "user_id": 1420893, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0b38dae882843ea0be91706a08e33569?s=128&d=identicon&r=PG", "display_name": "K17", "link": "https://stackoverflow.com/users/1420893/k17"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1447294830, "post_id": 33663314, "comment_id": 55100148, "body": "Not a mistake.  note one is using eof on a file and the other is using elf on a string stream.  Search on that and you should see examples in StackOverflow. Be sure you are correct before marking something a mistake and then marking it down. Suggest you retract that -1."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1447295799, "post_id": 33663314, "comment_id": 55100420, "body": "No, it is a mistake. The existence of other posts with the same mistake doesn&#39;t make it a non-mistake.  <a href=\"http://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">Read this page</a>"}, {"owner": {"reputation": 668, "user_id": 1420893, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0b38dae882843ea0be91706a08e33569?s=128&d=identicon&r=PG", "display_name": "K17", "link": "https://stackoverflow.com/users/1420893/k17"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1447295920, "post_id": 33663314, "comment_id": 55100454, "body": "Not a mistake. Check the documentation on file streams vs string streams.  You&#39;ll get the same answer.  And don&#39;t overlook that fact that this works perfectly.  Remember, string stream vs. file stream."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1447296307, "post_id": 33663314, "comment_id": 55100559, "body": "<code>eof</code> is a member of <code>ios</code>, which is a base class to both of those streams . It is just as much a mistake on the <code>ifstream</code> as it is on the <code>sstream</code> ."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1447296428, "post_id": 33663314, "comment_id": 55100605, "body": "No, and I don&#39;t intend to . Fix your code if you want downvotes retracted."}, {"owner": {"reputation": 668, "user_id": 1420893, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0b38dae882843ea0be91706a08e33569?s=128&d=identicon&r=PG", "display_name": "K17", "link": "https://stackoverflow.com/users/1420893/k17"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1447296489, "post_id": 33663314, "comment_id": 55100622, "body": "You have no credibility if you don&#39;t even try to test it. You saying it is a mistake doesn&#39;t make it a mistake."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1447296599, "post_id": 33663314, "comment_id": 55100655, "body": "Have you bothered to read the thread I linked where hundreds of people vote that it is a mistake?"}, {"owner": {"reputation": 668, "user_id": 1420893, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0b38dae882843ea0be91706a08e33569?s=128&d=identicon&r=PG", "display_name": "K17", "link": "https://stackoverflow.com/users/1420893/k17"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1447296633, "post_id": 33663314, "comment_id": 55100664, "body": "Get back to me after you&#39;ve tested it."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1447296841, "post_id": 33663314, "comment_id": 55100716, "body": "You&#39;re clearly new to C++. A program appearing to work correctly in one instance is no guarantee that the program is actually correct. Broken code will sometimes coincidentally produce the same output as correct code. I&#39;ll say no more here.    For &quot;credibility&quot; you could look at site reputation."}, {"owner": {"reputation": 668, "user_id": 1420893, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0b38dae882843ea0be91706a08e33569?s=128&d=identicon&r=PG", "display_name": "K17", "link": "https://stackoverflow.com/users/1420893/k17"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1447297170, "post_id": 33663314, "comment_id": 55100817, "body": "Like I said, get back to me after you have tested it."}], "tags": [], "owner": {"reputation": 668, "user_id": 1420893, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0b38dae882843ea0be91706a08e33569?s=128&d=identicon&r=PG", "display_name": "K17", "link": "https://stackoverflow.com/users/1420893/k17"}, "is_accepted": false, "score": -1, "last_activity_date": 1448365347, "last_edit_date": 1448365347, "creation_date": 1447294493, "answer_id": 33663314, "question_id": 33661457, "link": "https://stackoverflow.com/questions/33661457/a-local-array-repeats-inside-a-loop-c/33663314#33663314", "title": "A local array repeats inside a loop! C++", "body": "<p>Adding <code>current_name[i] = 0</code>; as described did not work for me.\nAlso, I got an error on isOpen as shown in the question. \nTherefore, I freehanded a revised program beginning with the code presented in the question, and making adjustments until it worked properly given an input file having two rows of text in groups of three alpha characters that were delimited with \" ; \" without the quotes. That is, the delimiting code was space, semicolon, space. This code works.  </p>\n\n<p>Here is my code.  </p>\n\n<pre><code>     #define LINE 1000\n\n    int j = 0;\n    while (!file1.eof()) {\n        j++;\n        if( j &gt; 20){break;} // back up escape for testing, in the event of an endless loop\n\n        char current_line[LINE];\n        //string current_name = \"\"; // see redefinition below\n\n        file1.getline(current_line, LINE, '\\n');\n\n        stringstream ss(current_line); // stringstream works better in this case\n\n        while (!ss.eof()) {\n\n            string current_name;\n            ss &gt;&gt; current_name;\n            if (current_name != \";\")\n            { \n                cout &lt;&lt; current_name &lt;&lt; endl;\n            } // End if(current_name....\n\n            } // End while (!ss.eof...\n\n    } // End while(!file1.eof() ...\n\n    file1.close();\n\n    cout &lt;&lt; \"Done \\n\";\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5552581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b1545de5d7ee2a1e4ee0146df1fd989?s=128&d=identicon&r=PG&f=1", "display_name": "Mosedince", "link": "https://stackoverflow.com/users/5552581/mosedince"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1769, "favorite_count": 1, "accepted_answer_id": 33661588, "answer_count": 2, "score": 1, "last_activity_date": 1448365347, "creation_date": 1447282855, "last_edit_date": 1447282993, "question_id": 33661457, "link": "https://stackoverflow.com/questions/33661457/a-local-array-repeats-inside-a-loop-c", "title": "A local array repeats inside a loop! C++", "body": "<p>The <code>current_name</code> is a local <code>char</code> array inside the following loop. I declared it inside the loop so it changes every time I read a new line from a file. But, for some reason the previous data is not removed from the <code>current_name</code>! It prints old data out if it wasn't overridden by new characters from the next line. </p>\n\n<p>ANY IDEAS?</p>\n\n<pre><code>  while (isOpen &amp;&amp; !file.eof()) {\n    char current_line[LINE];\n    char current_name[NAME];\n\n    file.getline(current_line, LINE);\n\n    int i = 0;\n    while (current_line[i] != ';') {\n      current_name[i] = current_line[i];\n      i++;\n    }\n\n    cout &lt;&lt; current_name &lt;&lt; endl;\n  }\n</code></pre>\n"}, {"tags": ["c++", "oop", "visual-studio-2013", "header-files"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1447283033, "post_id": 33661451, "comment_id": 55096624, "body": "#include&quot;BlocksContainer.h&quot; is the problem, it uses Block before it is declared."}, {"owner": {"reputation": 2511, "user_id": 3936476, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/kjSSo.png?s=128&g=1", "display_name": "ventaquil", "link": "https://stackoverflow.com/users/3936476/ventaquil"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1447283158, "post_id": 33661451, "comment_id": 55096682, "body": "@HansPassant so where I must declare this?"}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 1, "creation_date": 1447283198, "post_id": 33661451, "comment_id": 55096695, "body": "Your header files are mutually dependent.  This results in not having <code>Block</code> declared at the point you try to reference it.  Based on the code you&#39;ve posted, you can eliminate the <code>#include &quot;Block.h&quot;</code> from BlocksContainer.h."}, {"owner": {"reputation": 7392, "user_id": 1555823, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2b69fc6d16ff23e3509b2f3602838acd?s=128&d=identicon&r=PG", "display_name": "vladon", "link": "https://stackoverflow.com/users/1555823/vladon"}, "edited": false, "score": 2, "creation_date": 1447283228, "post_id": 33661451, "comment_id": 55096719, "body": "@stachu remove <code>#include &quot;BlocksContainer.h&quot;</code> from Block.h, and/or in main file include &quot;BlocksContainer.h&quot; instead of &quot;Block.h&quot;"}, {"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 1, "creation_date": 1447283518, "post_id": 33661451, "comment_id": 55096842, "body": "<code>using namespace</code> in a header is an abomination. Also, why are you implementing your own dynamic array?"}], "answers": [{"comments": [{"owner": {"reputation": 2511, "user_id": 3936476, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/kjSSo.png?s=128&g=1", "display_name": "ventaquil", "link": "https://stackoverflow.com/users/3936476/ventaquil"}, "edited": false, "score": 0, "creation_date": 1447369038, "post_id": 33661612, "comment_id": 55138975, "body": "I include <code>BlocksContainer.h</code> in <code>Block.h</code> (anyway construct method error) but thanks for suggestion!"}], "tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": true, "score": 4, "last_activity_date": 1447283582, "creation_date": 1447283582, "answer_id": 33661612, "question_id": 33661451, "link": "https://stackoverflow.com/questions/33661451/visual-studio-missing-before/33661612#33661612", "title": "Visual Studio missing ; before *", "body": "<p>You dont need:</p>\n\n<pre><code> #include\"BlocksContainer.h\"\n</code></pre>\n\n<p>inside block.h, this line causes Block to be undefined inside BlocksContainer.h because it was not yet visible to compiler.</p>\n\n<p>In case you really need such inter dependent headers you can declare class like this:</p>\n\n<pre><code>class Block;\n</code></pre>\n\n<p>after such statement you are allowed to use Block class but only in compound statements like pointers or references - that means <code>Block* GetNBlock(int);</code> would compile.</p>\n"}], "owner": {"reputation": 2511, "user_id": 3936476, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/kjSSo.png?s=128&g=1", "display_name": "ventaquil", "link": "https://stackoverflow.com/users/3936476/ventaquil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 0, "accepted_answer_id": 33661612, "answer_count": 1, "score": 1, "last_activity_date": 1447283582, "creation_date": 1447282826, "question_id": 33661451, "link": "https://stackoverflow.com/questions/33661451/visual-studio-missing-before", "title": "Visual Studio missing ; before *", "body": "<p>I'm working on Blake algorithm in Visual but I have small problem.</p>\n\n<p>My <code>Block.h</code> file</p>\n\n<pre><code>#pragma once\n#include&lt;string&gt;\n#include&lt;bitset&gt;\n#include&lt;iostream&gt; // DEBUG\n#include\"BlocksContainer.h\"\n\nusing namespace std;\n\nclass Block {\n    public:\n        static void CreateBlocks(string);\n        static string CreatePadding(int);\n        Block(string);\n    protected:\n        string BlockContent;\n};\n</code></pre>\n\n<p>My <code>BlocksContainer.h</code> file</p>\n\n<pre><code>#pragma once\n#include\"Block.h\"\n\nclass BlocksContainer {\n    public:\n        int GetLength(void);\n        Block* GetNBlock(int);\n    BlocksContainer(Block**, int);\n    protected:\n        Block** Blocks;\n        int Length;\n};\n</code></pre>\n\n<p>I don't know why but Visual throw me <code>blockscontainer.h(7): error C2143: syntax error : missing ';' before '*'</code></p>\n\n<p>I'm newby in C++ and I can't find error. In Stack I found solutions like missing <code>;</code> after class declaration, but I have semicolons.</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2013", "linker"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1447283258, "post_id": 33661441, "comment_id": 55096734, "body": "There is a <code>#pragma (comment:lib)</code> <a href=\"https://support.microsoft.com/en-us/kb/153901\" rel=\"nofollow noreferrer\">support.microsoft.com/en-us/kb/153901</a> that can be used to automatically specify what library to link to.  Don&#39;t know if this is how your scenario is doing things, but that is one way to not have to specify the library using the project settings."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1447284085, "post_id": 33661441, "comment_id": 55097081, "body": "Library authors in general attempt to defeat these kind of &quot;how do I crash the library code in impossible to diagnose ways&quot; shenanigans.  Clearly the CGAL authors picked up the technique that Boost uses, it is pretty solid.  The kind of wisdom inspired by having to deal with thousands of mailing list questions.  Feature, not a volkswagen, use the /NODEFAULTLIB linker option at your peril."}, {"owner": {"reputation": 2939, "user_id": 398316, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3bf4d32eb34f9f59a9e9777009cf793f?s=128&d=identicon&r=PG", "display_name": "Maghoumi", "link": "https://stackoverflow.com/users/398316/maghoumi"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1447285026, "post_id": 33661441, "comment_id": 55097378, "body": "@HansPassant Thanks for the tip. How would the CGAL authors then know what the lib file should be in advance?! I would get <code>CGAL-vc120-mt-gd-4.7.lib</code> only if I compiled with VS2013 and MT enabled! What mechanism would they use to force the specific library version?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1447285418, "post_id": 33661441, "comment_id": 55097504, "body": "They use predefined macros, the kind that the compiler sets based on compile options.  Like _DLL, defined when you compiled with /MD.   &quot;mt&quot; means multi-threaded, nothing to do with the /MT compile option.  They drive a different volkswagen."}, {"owner": {"reputation": 2939, "user_id": 398316, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3bf4d32eb34f9f59a9e9777009cf793f?s=128&d=identicon&r=PG", "display_name": "Maghoumi", "link": "https://stackoverflow.com/users/398316/maghoumi"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1447285626, "post_id": 33661441, "comment_id": 55097575, "body": "@HansPassant Cool thanks! That&#39;s what I kind of thought... Anyway to override these without fiddling with /NODEFAULTLIB? I thought about using /NOFEFAULTLIB and then manually add the libraries it needs but that&#39;s not probably such a good idea... The reason I would want this is that I still need to be able to debug the code that calls CGAL&#39;s stuff. But CGAL&#39;s &quot;Debug&quot; dll is waaaaay too slow."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1447286064, "post_id": 33661441, "comment_id": 55097710, "body": "Well, of course, but then you have to pick compile settings you don&#39;t like.  You can only ever hope that release build libraries work with the release build of your code.  Debugging such code is, erm, character building."}, {"owner": {"reputation": 2939, "user_id": 398316, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3bf4d32eb34f9f59a9e9777009cf793f?s=128&d=identicon&r=PG", "display_name": "Maghoumi", "link": "https://stackoverflow.com/users/398316/maghoumi"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1447286645, "post_id": 33661441, "comment_id": 55097883, "body": "@HansPassant Then how would one go about (say) creating a wrapper for some CGAL functions, when the wrapper clearly needs debugging enabled (to track and fix bugs in development) and the debug version of CGAL is excruciatingly slow? What is the standard way?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1447287939, "post_id": 33661441, "comment_id": 55098219, "body": "You fix your debugging and testing techniques  Using a dataset of 10000 items instead of 1000 does not make it 10 times more likely you will find a bug.  The increments get very small after you fix the basic ones."}, {"owner": {"reputation": 2939, "user_id": 398316, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3bf4d32eb34f9f59a9e9777009cf793f?s=128&d=identicon&r=PG", "display_name": "Maghoumi", "link": "https://stackoverflow.com/users/398316/maghoumi"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1447288193, "post_id": 33661441, "comment_id": 55098309, "body": "@HansPassant I agree but since I&#39;m still learning a lot of things, I debug unknown behaviors using trial/error: run, breakpoint, inspect, run again (don&#39;t kill me please!). On a side note, I used /NODEFAULT:library to un-force linking against debug libs. After that I used &quot;Additional Libraries&quot; to force linking against release libs. Seems it is working :) I know it is probably a very bad approach so by all means feel free to suggest alternatives or point me in the right direction. I can and do read :) Thanks for the tips as well."}, {"owner": {"reputation": 2939, "user_id": 398316, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3bf4d32eb34f9f59a9e9777009cf793f?s=128&d=identicon&r=PG", "display_name": "Maghoumi", "link": "https://stackoverflow.com/users/398316/maghoumi"}, "edited": false, "score": 0, "creation_date": 1447290190, "post_id": 33661441, "comment_id": 55098922, "body": "OK! I found this (<a href=\"http://stackoverflow.com/questions/11658915/mixing-debug-and-release-library-binary-bad-practice\" title=\"mixing debug and release library binary bad practice\">stackoverflow.com/questions/11658915/&hellip;</a>) and now I&#39;m starting to understand what you meant :)"}], "answers": [{"comments": [{"owner": {"reputation": 2939, "user_id": 398316, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3bf4d32eb34f9f59a9e9777009cf793f?s=128&d=identicon&r=PG", "display_name": "Maghoumi", "link": "https://stackoverflow.com/users/398316/maghoumi"}, "edited": false, "score": 0, "creation_date": 1447284779, "post_id": 33661607, "comment_id": 55097309, "body": "So does that mean there is a <code>#pragma comment</code> somewhere in the files that&#39;s forcing VS to use that particular lib file? How do I find the file that&#39;s causing it (I tried the /VERBOSE switch, but there isn&#39;t much going on). Also, remove what exactly from &quot;Additional Dependencies&quot;? In the question I said my &quot;Additional Dependencies&quot; is empty."}, {"owner": {"reputation": 2939, "user_id": 398316, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3bf4d32eb34f9f59a9e9777009cf793f?s=128&d=identicon&r=PG", "display_name": "Maghoumi", "link": "https://stackoverflow.com/users/398316/maghoumi"}, "edited": false, "score": 0, "creation_date": 1447290777, "post_id": 33661607, "comment_id": 55099063, "body": "I searched all the header files that I&#39;m using (mine, CGAL&#39;s and Boost&#39;s) using <code>grep</code> and did not find any <code>#pragma comment</code> related to libs anywhere!"}, {"owner": {"reputation": 27360, "user_id": 188414, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b1b63800db11f27930af1301b2c62223?s=128&d=identicon&r=PG", "display_name": "the_mandrill", "link": "https://stackoverflow.com/users/188414/the-mandrill"}, "reply_to_user": {"reputation": 2939, "user_id": 398316, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3bf4d32eb34f9f59a9e9777009cf793f?s=128&d=identicon&r=PG", "display_name": "Maghoumi", "link": "https://stackoverflow.com/users/398316/maghoumi"}, "edited": false, "score": 1, "creation_date": 1447346712, "post_id": 33661607, "comment_id": 55126481, "body": "In boost it&#39;s defined in <code>config&#47;auto_link.hpp</code>: <code>#  pragma comment(lib, BOOST_LIB_PREFIX BOOST_STRINGIZE(BOOST_LIB_NAME) BOOST_LIB_THREAD_OPT BOOST_LIB_RT_OPT &quot;.lib&quot;)</code>"}], "tags": [], "owner": {"reputation": 27360, "user_id": 188414, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b1b63800db11f27930af1301b2c62223?s=128&d=identicon&r=PG", "display_name": "the_mandrill", "link": "https://stackoverflow.com/users/188414/the-mandrill"}, "is_accepted": true, "score": 5, "last_activity_date": 1447283556, "last_edit_date": 1495541696, "creation_date": 1447283556, "answer_id": 33661607, "question_id": 33661441, "link": "https://stackoverflow.com/questions/33661441/visual-studio-c-is-automatically-linking-against-an-unwanted-version-of-lib/33661607#33661607", "title": "Visual Studio (C++) is automatically linking against an unwanted version of lib file", "body": "<p>This is probably happening due to the <code>#pragma comment(lib)</code> mechanism - eg see <a href=\"https://stackoverflow.com/questions/3484434/what-does-pragma-comment-mean\">What does &quot;#pragma comment&quot; mean?</a> </p>\n\n<p>This is a way of the compiler emitting instructions for the linker so that it can decide between multiple versions of a library depending on the compiler version. In this case it means that it can automatically pick up the correct version of the library (debug vs release, vs2013 vs vs2015, MT vs MD, etc).  When you added the explicit reference to the library in Additional Dependencies then it is now trying to look for two files.  </p>\n\n<p>So, to fix the problem, remove it from Additional Dependencies and let VS pick the right library.  If you are getting the LNK1104 error then it suggests that either the link library path isn't set up correctly, or you don't have the CGAL library file it's looking for.  You can increase the verbosity settings for the linker in the Project Options to get more detail about what's happening.</p>\n"}], "owner": {"reputation": 2939, "user_id": 398316, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3bf4d32eb34f9f59a9e9777009cf793f?s=128&d=identicon&r=PG", "display_name": "Maghoumi", "link": "https://stackoverflow.com/users/398316/maghoumi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3271, "favorite_count": 0, "accepted_answer_id": 33661607, "answer_count": 1, "score": 3, "last_activity_date": 1447283556, "creation_date": 1447282774, "question_id": 33661441, "link": "https://stackoverflow.com/questions/33661441/visual-studio-c-is-automatically-linking-against-an-unwanted-version-of-lib", "title": "Visual Studio (C++) is automatically linking against an unwanted version of lib file", "body": "<p>I am trying to create a C++ project in Visual Studio 2013 that has <a href=\"http://www.cgal.org\" rel=\"nofollow noreferrer\">CGAL</a> and Boost (and a couple of other libraries) as dependencies. I preferably like to link to these libraries dynamically. Also, I'd like to link to the \"Release\" versions of these libraries for performance reasons (not the \"Debug\" versions).</p>\n\n<p>Starting from an empty C++ project, I added the path to header files of the aforementioned libraries as shown in the image below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/FxGBy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FxGBy.png\" alt=\"Include directories\"></a></p>\n\n<p>Inside the linker options, I then added the directories that contain the DLL and lib files of the external libraries. (<code>CGAL</code> directory contains CGAL's compiled DLL files along with lib files).</p>\n\n<p><a href=\"https://i.stack.imgur.com/TJKns.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TJKns.png\" alt=\"enter image description here\"></a></p>\n\n<p>At this point, I have not added a single \"lib\" file \"Additional Dependencies\" dialog:</p>\n\n<p><a href=\"https://i.stack.imgur.com/qqT9P.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qqT9P.png\" alt=\"enter image description here\"></a></p>\n\n<p>Now something weird is going on and I cannot explain why. If I try to build the project as-is (under the \"Debug\" configuration), I get a <code>LNK1104</code> error about the linker not being able to find <code>CGAL-vc120-mt-gd-4.7.lib</code>. I know that the error means I should add the <code>lib</code> file in \"Additional Dependencies\" dialog...  </p>\n\n<p><a href=\"https://i.stack.imgur.com/kAV9h.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kAV9h.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>But wait... WHAT...?!!</strong><br>\nHow does Visual Studio know how to automatically link against this lib file?! Worse yet, how does it know it needs the \"debug\" version of the library? (With the <code>gd</code> suffix). Also, how does it know I compiled CGAL with VS2013!!??\nAt first, I though the project was inheriting properties from some preset property sheets somewhere in my system. But I am certain that's not the case as this behavior shows even with a project created from scratch.</p>\n\n<p>My main question is, how would you force Visual Studio to link against the \"Release\" version of this library? (eg. <code>CGAL-vc120-mt-4.7.lib</code>)</p>\n\n<p>Side question but related: Am I even linking against the DLL files? How can I be certain that I am in deed doing dynamic linking and not static linking?</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "threadpool"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 2, "creation_date": 1447283073, "post_id": 33661395, "comment_id": 55096642, "body": "use a condition variable and a flag. wait on the condition variable and test the flag in its predicate."}, {"owner": {"reputation": 1463, "user_id": 4784579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KRlU0.jpg?s=128&g=1", "display_name": "ipavlu", "link": "https://stackoverflow.com/users/4784579/ipavlu"}, "edited": false, "score": 0, "creation_date": 1447285584, "post_id": 33661395, "comment_id": 55097560, "body": "I would like to ask, if you considered using something like Intel&#39;s Threading Buildings Blocks? Perhaps there are useful things in BOOST and Microsoft has its own library too. Creating own thread pool is usually last resort in case, you really need something that existing thread pool can not offer and libraries like Intel&#39;s TBB won&#39;t do that either. But here I can imagine, that tasks will be scheduled on TBB and then awaited..."}, {"owner": {"reputation": 7099, "user_id": 1475548, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/09sbK.jpg?s=128&g=1", "display_name": "Octopus", "link": "https://stackoverflow.com/users/1475548/octopus"}, "reply_to_user": {"reputation": 1463, "user_id": 4784579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KRlU0.jpg?s=128&g=1", "display_name": "ipavlu", "link": "https://stackoverflow.com/users/4784579/ipavlu"}, "edited": false, "score": 1, "creation_date": 1447367711, "post_id": 33661395, "comment_id": 55138409, "body": "@ipavlu, its possible to write multithreaded code using c++11 without extra libraries. I was trying to avoid the extra bulk of dependencies. I solved the problem and provided an answer of my own."}], "answers": [{"comments": [{"owner": {"reputation": 1463, "user_id": 4784579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KRlU0.jpg?s=128&g=1", "display_name": "ipavlu", "link": "https://stackoverflow.com/users/4784579/ipavlu"}, "edited": false, "score": 0, "creation_date": 1447285324, "post_id": 33661915, "comment_id": 55097469, "body": "What if there will be more jobs than threads and the thread pool has to burn slowly through jobs it received?"}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "reply_to_user": {"reputation": 1463, "user_id": 4784579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KRlU0.jpg?s=128&g=1", "display_name": "ipavlu", "link": "https://stackoverflow.com/users/4784579/ipavlu"}, "edited": false, "score": 0, "creation_date": 1447315831, "post_id": 33661915, "comment_id": 55106717, "body": "@ipavlu I understand what you are saying; but I was answering the question that was asked. The user asked what would be the proper way of implementing their <code>isBusy()</code> method which I demonstrated. The user didn&#39;t ask what would be the best approach to the overall problem. However, as this may be more expensive than other approaches it does associate a bool flag with a particular thread. This only indicates if a thread is active or not. If every bool flag is true then they can move on to their next step."}], "tags": [], "owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "is_accepted": false, "score": 1, "last_activity_date": 1447285105, "creation_date": 1447285105, "answer_id": 33661915, "question_id": 33661395, "link": "https://stackoverflow.com/questions/33661395/how-can-i-tell-when-my-threadpool-is-finished-with-its-tasks/33661915#33661915", "title": "How can I tell when my ThreadPool is finished with its tasks?", "body": "<p>You may need to create an internal structure of threads associated with a bool variable flag. </p>\n\n<pre><code>class ThreadPool {\nprivate:\n    // This Structure Will Keep Track Of Each Thread's Progress\n    struct ThreadInfo {\n        std::thread thread;\n        bool        isDone;\n\n        ThreadInfo( std::thread&amp; threadIn ) : \n            thread( threadIn ), isDone(false) \n        {}\n    }; // ThredInfo\n\n    // This Vector Should Be Populated In The Constructor Initially And\n    // Updated Anytime You Would Add A New Task.\n    // This Should Also Replace // std::vector&lt;std::thread&gt; workers\n    std::vector&lt;ThreadInfo&gt; workers;\n\npublic:\n    // The rest of your class would appear to be the same, but you need a\n    // way to test if a particular thread is currently active. When the\n    // thread is done this bool flag would report as being true;\n\n    // This will only return or report if a particular thread is done or not\n    // You would have to set this variable's flag for a particular thread to\n    // true when it completes its task, otherwise it will always be false\n    // from moment of creation. I did not add in any bounds checking to keep\n    // it simple which should be taken into consideration.\n    bool isBusy( unsigned idx ) const {\n        return workers[idx].isDone;\n    }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1463, "user_id": 4784579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KRlU0.jpg?s=128&g=1", "display_name": "ipavlu", "link": "https://stackoverflow.com/users/4784579/ipavlu"}, "is_accepted": false, "score": 0, "last_activity_date": 1447286673, "creation_date": 1447286673, "answer_id": 33662178, "question_id": 33661395, "link": "https://stackoverflow.com/questions/33661395/how-can-i-tell-when-my-threadpool-is-finished-with-its-tasks/33662178#33662178", "title": "How can I tell when my ThreadPool is finished with its tasks?", "body": "<p>If you have N jobs and they have to be awaited for by calling thread sleep, then the most efficient way would be to create somewhere a variable, that would be set by an atomic operation to N before scheduling jobs and inside each job when done with computation, there would be atomic decrement of the variable. Then you can use atomic instruction to test if the variable is zero.</p>\n\n<p>Or locked decrement with wait handles, when the variable would decrement to zero.</p>\n\n<p>I just have to say, I do not like this idea you are asking for:</p>\n\n<pre><code>while ( pool-&gt;isBusy() ) {\n    std::this_thread::sleep_for( std::chrono::milliseconds(1) );\n}\n</code></pre>\n\n<p>It just does not fit well, it won't be 1ms almost never, it is using resources needlessly etc...</p>\n\n<p>The best way would be to decrement some variable atomically, and test atomically the variable if all done and the last job will simply based on atomic test set WaitForSingleObject.\nAnd if you must, the waiting will be on WaitForSingleObject, and would woke up after completion, not many times.</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/ms687032(VS.85).aspx\" rel=\"nofollow\">WaitForSingleObject</a></p>\n"}, {"tags": [], "owner": {"reputation": 7099, "user_id": 1475548, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/09sbK.jpg?s=128&g=1", "display_name": "Octopus", "link": "https://stackoverflow.com/users/1475548/octopus"}, "is_accepted": false, "score": 2, "last_activity_date": 1447367627, "creation_date": 1447367627, "answer_id": 33682712, "question_id": 33661395, "link": "https://stackoverflow.com/questions/33661395/how-can-i-tell-when-my-threadpool-is-finished-with-its-tasks/33682712#33682712", "title": "How can I tell when my ThreadPool is finished with its tasks?", "body": "<p>I got it!</p>\n\n<p>First of all, I introduced a few extra members to the ThreadPool class:</p>\n\n<pre><code>class ThreadPool {\n    /* ... exisitng code ... */\n    /* plus the following */\n    std::atomic&lt;int&gt; njobs_pending;\n    std::mutex main_mutex;\n    std::condition_variable main_condition;\n}\n</code></pre>\n\n<p>Now, I can do better than checking some status every X amount of time. Now, I can block the Main loop until no more jobs are pending:</p>\n\n<pre><code>void ThreadPool::waitUntilCompleted(unsigned n) {\n    std::unique_lock&lt;std::mutex&gt; lock(main_mutex);\n    main_condition.wait(lock);\n}\n</code></pre>\n\n<p>As long as I manage what's pending with the following bookkeeping code, at the head of the ThreadPool.enqueue() function:</p>\n\n<pre><code>njobs_pending++;\n</code></pre>\n\n<p>and right after I run the task in the Worker::operator()() function:</p>\n\n<pre><code>if ( --pool.njobs_pending == 0 ) {\n    pool.main_condition.notify_one();\n}\n</code></pre>\n\n<p>Then the main thread can enqueue whatever tasks are necessary and then sit and wait until all calculations are completed with:</p>\n\n<pre><code>for (int y=0;y&lt;N;y++) {\n    pool-&gt;enqueue([this,y] {\n        this-&gt;ProcessRow(y);\n    });\n}\npool-&gt;waitUntilCompleted();\n</code></pre>\n"}], "owner": {"reputation": 7099, "user_id": 1475548, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/09sbK.jpg?s=128&g=1", "display_name": "Octopus", "link": "https://stackoverflow.com/users/1475548/octopus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2007, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1447367627, "creation_date": 1447282523, "last_edit_date": 1447282922, "question_id": 33661395, "link": "https://stackoverflow.com/questions/33661395/how-can-i-tell-when-my-threadpool-is-finished-with-its-tasks", "title": "How can I tell when my ThreadPool is finished with its tasks?", "body": "<p>In c++11, I have a ThreadPool object which manages a number of threads that are enqueued via a single lambda function. I know how many rows of data I have to work on and so I know ahead of time that I will need to queue N jobs. What I am not sure about is how to tell when all of those jobs are finished, so I can move on to the next step.</p>\n\n<p>This is the code to manage the ThreadPool:</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;vector&gt;\n#include &lt;deque&gt;\n#include &lt;iostream&gt;\n#include &lt;atomic&gt;\n#include &lt;thread&gt;\n#include &lt;mutex&gt;\n#include &lt;condition_variable&gt;\n\nclass ThreadPool;\n\nclass Worker {\npublic:\n    Worker(ThreadPool &amp;s) : pool(s) { }\n    void operator()();\nprivate:\n    ThreadPool &amp;pool;\n};\n\nclass ThreadPool {\npublic:\n    ThreadPool(size_t);\n    template&lt;class F&gt;\n    void enqueue(F f);\n    ~ThreadPool();\n    void joinAll();\n    int taskSize();\n\nprivate:\n    friend class Worker;\n\n    // the task queue\n    std::deque&lt; std::function&lt;void()&gt; &gt; tasks;\n\n    // keep track of threads\n    std::vector&lt; std::thread &gt; workers;\n\n    // sync\n    std::mutex queue_mutex;\n    std::condition_variable condition;\n    bool stop;\n};\n\nvoid Worker::operator()()\n{\n    std::function&lt;void()&gt; task;\n    while(true)\n    {\n        {   // acquire lock\n            std::unique_lock&lt;std::mutex&gt; \n                lock(pool.queue_mutex);\n\n            // look for a work item\n            while ( !pool.stop &amp;&amp; pool.tasks.empty() ) {\n                // if there are none wait for notification\n                pool.condition.wait(lock);\n            }\n\n            if ( pool.stop )  {// exit if the pool is stopped\n                return;\n            }\n\n            // get the task from the queue\n            task = pool.tasks.front();\n            pool.tasks.pop_front();\n\n        }   // release lock\n\n        // execute the task\n        task();\n    }\n}\n\n\n// the constructor just launches some amount of workers\nThreadPool::ThreadPool(size_t threads)\n    :   stop(false)\n{\n    for (size_t i = 0;i&lt;threads;++i) {\n        workers.push_back(std::thread(Worker(*this)));\n    }\n\n    //workers.\n    //tasks.\n}\n\n// the destructor joins all threads\nThreadPool::~ThreadPool()\n{\n    // stop all threads\n    stop = true;\n    condition.notify_all();\n\n    // join them\n    for ( size_t i = 0;i&lt;workers.size();++i) {\n        workers[i].join();\n    }\n}\n\nvoid ThreadPool::joinAll() {\n    // join them\n    for ( size_t i = 0;i&lt;workers.size();++i) {\n        workers[i].join();\n    }\n}\n\nint ThreadPool::taskSize() {\n    return tasks.size();\n}\n\n// add new work item to the pool\ntemplate&lt;class F&gt;\nvoid ThreadPool::enqueue(F f)\n{\n    { // acquire lock\n        std::unique_lock&lt;std::mutex&gt; lock(queue_mutex);\n\n        // add the task\n        tasks.push_back(std::function&lt;void()&gt;(f));\n    } // release lock\n\n    // wake up one thread\n    condition.notify_one();\n}\n</code></pre>\n\n<p>And then I distribute my job among threads like this:</p>\n\n<pre><code>ThreadPool pool(4);\n/* ... */\nfor (int y=0;y&lt;N;y++) {\n    pool-&gt;enqueue([this,y] {\n        this-&gt;ProcessRow(y);\n    });\n}\n\n// wait until all threads are finished\nstd::this_thread::sleep_for( std::chrono::milliseconds(100) );\n</code></pre>\n\n<p>Waiting for 100 milliseconds works just because I know those jobs can complete in less time than 100ms, but obviously its not the best approach. Once it has completed N rows of processing it needs to go through another 1000 or so generations of the same thing. Obviously, I want to begin the next generation as soon as I can.</p>\n\n<p>I know there must be some way to add code into my ThreadPool so that I can do something like this:</p>\n\n<pre><code>while ( pool-&gt;isBusy() ) {\n    std::this_thread::sleep_for( std::chrono::milliseconds(1) );\n}\n</code></pre>\n\n<p>I've been working on this for a couple nights now and I find it hard to find good examples of how to do this. <strong>So, what would be the proper way to implementat my isBusy() method?</strong> </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3803, "user_id": 459975, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bc7ef38c9fb207c34f2903fe2876744d?s=128&d=identicon&r=PG", "display_name": "Chuu", "link": "https://stackoverflow.com/users/459975/chuu"}, "edited": false, "score": 1, "creation_date": 1447281744, "post_id": 33661218, "comment_id": 55096093, "body": "Consider the case of n&lt;0"}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 2, "creation_date": 1447281772, "post_id": 33661218, "comment_id": 55096110, "body": "Where do you return a value?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1447281794, "post_id": 33661218, "comment_id": 55096121, "body": "^ ... and <code>void</code> return type."}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "reply_to_user": {"reputation": 3803, "user_id": 459975, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bc7ef38c9fb207c34f2903fe2876744d?s=128&d=identicon&r=PG", "display_name": "Chuu", "link": "https://stackoverflow.com/users/459975/chuu"}, "edited": false, "score": 5, "creation_date": 1447281795, "post_id": 33661218, "comment_id": 55096122, "body": "@Chuu Consider every case."}, {"owner": {"reputation": 4677, "user_id": 519348, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TIdre.jpg?s=128&g=1", "display_name": "TZHX", "link": "https://stackoverflow.com/users/519348/tzhx"}, "edited": false, "score": 0, "creation_date": 1447281811, "post_id": 33661218, "comment_id": 55096131, "body": "Printing text to stdout and returning a value are not the same thing."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1447281830, "post_id": 33661218, "comment_id": 55096136, "body": "The message isn&#39;t quite accurate. Not ANY control paths return a value!"}, {"owner": {"reputation": 86, "user_id": 5410265, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2MHuY.jpg?s=128&g=1", "display_name": "Widdin", "link": "https://stackoverflow.com/users/5410265/widdin"}, "edited": false, "score": 0, "creation_date": 1447281842, "post_id": 33661218, "comment_id": 55096139, "body": "I never return a value but it still works kind of , i just want it to print out for example bounce(3) ==&gt; 3 2 1 0 1 2 3"}, {"owner": {"reputation": 86, "user_id": 5410265, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2MHuY.jpg?s=128&g=1", "display_name": "Widdin", "link": "https://stackoverflow.com/users/5410265/widdin"}, "edited": false, "score": 0, "creation_date": 1447281874, "post_id": 33661218, "comment_id": 55096152, "body": "As i wrote above, i just started with C++, i have no idea what im doing so far so yeah :) Trying on Recursion functions"}, {"owner": {"reputation": 501, "user_id": 4562676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4499a73c0034783da2ab032cb054869c?s=128&d=identicon&r=PG", "display_name": "tomse", "link": "https://stackoverflow.com/users/4562676/tomse"}, "edited": false, "score": 0, "creation_date": 1447281899, "post_id": 33661218, "comment_id": 55096167, "body": "If you don&#39;t want to return something change the return value from <code>int</code> to <code>void</code>"}, {"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1447281911, "post_id": 33661218, "comment_id": 55096171, "body": "Don&#39;t return anything; change your declaration from <code>int bounce(int n)</code> to <code>void bounce(int n)</code>. <code>void</code> means you are not returning anything, which is what you want."}, {"owner": {"reputation": 86, "user_id": 5410265, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2MHuY.jpg?s=128&g=1", "display_name": "Widdin", "link": "https://stackoverflow.com/users/5410265/widdin"}, "edited": false, "score": 0, "creation_date": 1447282005, "post_id": 33661218, "comment_id": 55096217, "body": "Ugh, then i get : binary &#39;&lt;&lt;&#39;: no operator found which takes a right-hand operand of type &#39;void&#39; (or there is no acceptable conversion)"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1447282069, "post_id": 33661218, "comment_id": 55096251, "body": "Then you want the function to return something. Just do it!"}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1447282074, "post_id": 33661218, "comment_id": 55096254, "body": "Don&#39;t call <code>bounce</code> in your <code>cout</code> statement then. Just call <code>bounce</code> alone, without the surrounding <code>cout</code>"}, {"owner": {"reputation": 86, "user_id": 5410265, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2MHuY.jpg?s=128&g=1", "display_name": "Widdin", "link": "https://stackoverflow.com/users/5410265/widdin"}, "edited": false, "score": 0, "creation_date": 1447282076, "post_id": 33661218, "comment_id": 55096256, "body": "Solved it, changed &quot;cout &lt;&lt; bounce(x) &lt;&lt; endl;&quot; to &quot;bounce(x);&quot;"}, {"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1447282081, "post_id": 33661218, "comment_id": 55096259, "body": "Yes, you want to replace <code>cout &lt;&lt; bounce(x) &lt;&lt; endl;</code> with <code>bounce(x);</code>. The <code>bounce</code> function itself is what is doing the output, you don&#39;t need to output anything else."}, {"owner": {"reputation": 86, "user_id": 5410265, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2MHuY.jpg?s=128&g=1", "display_name": "Widdin", "link": "https://stackoverflow.com/users/5410265/widdin"}, "edited": false, "score": 0, "creation_date": 1447282127, "post_id": 33661218, "comment_id": 55096281, "body": "Yeah saw that now, thank you all very much :) I will prolly come up with more noob-questions :D"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1447282151, "post_id": 33661218, "comment_id": 55096297, "body": "I hope not, always do some research first."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1447282926, "post_id": 33661218, "comment_id": 55096581, "body": "@Widdin <i>&quot;I will prolly come up with more noob-questions :D&quot;</i> No please! I beg you should read <a href=\"http://stackoverflow.com/help/asking\">all of these articles</a> before asking your next question here."}, {"owner": {"reputation": 86, "user_id": 5410265, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2MHuY.jpg?s=128&g=1", "display_name": "Widdin", "link": "https://stackoverflow.com/users/5410265/widdin"}, "edited": false, "score": 0, "creation_date": 1447283126, "post_id": 33661218, "comment_id": 55096667, "body": "It&#39;s not that easy to find a specific exactly the same problem :)"}, {"owner": {"reputation": 86, "user_id": 5410265, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2MHuY.jpg?s=128&g=1", "display_name": "Widdin", "link": "https://stackoverflow.com/users/5410265/widdin"}, "edited": false, "score": 0, "creation_date": 1447285369, "post_id": 33661218, "comment_id": 55097485, "body": "If i name this file bounce.cpp then how do i call the function from a header.h file? Like if i made a menu in the header?"}], "answers": [{"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": true, "score": 7, "last_activity_date": 1447282372, "last_edit_date": 1447282372, "creation_date": 1447282027, "answer_id": 33661306, "question_id": 33661218, "link": "https://stackoverflow.com/questions/33661218/c-not-all-control-paths-return-a-value/33661306#33661306", "title": "C++ // Not all control paths return a value", "body": "<p>Actually none of your control paths returns a value. As you only use the function to print something on the screen, it does not have to return anything. Just make the return type void:</p>\n\n<pre><code>void bounce(int n) {\n    /*...*/\n}\n</code></pre>\n\n<p>And then dont <code>cout</code> the result of the function call (once you make it <code>void</code> the function wont return anything anyhow), i.e. instead of:</p>\n\n<pre><code>std::cout &lt;&lt; bounce(x) &lt;&lt; std::endl;\n</code></pre>\n\n<p>simply write</p>\n\n<pre><code>bounce(x);\n</code></pre>\n\n<p>You already print on the screen inside the function.</p>\n"}, {"tags": [], "owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "is_accepted": false, "score": 2, "last_activity_date": 1447282893, "creation_date": 1447282893, "answer_id": 33661470, "question_id": 33661218, "link": "https://stackoverflow.com/questions/33661218/c-not-all-control-paths-return-a-value/33661470#33661470", "title": "C++ // Not all control paths return a value", "body": "<p>When you define a function in C++, you specify the return type before the function name.</p>\n\n<p>Your <code>int bounce()</code> function is declared as returning an integer but it does not return any values at all. Therefore, that causes an error.</p>\n\n<p>You can declare your function using <code>void bounce()</code>, which tells the compiler that your function will not return any values. That will eliminate the error.</p>\n\n<p><em>Note: Although you use <code>cout</code> to display your values, this is different from returning a value in the way we are talking about. Returns values are specified using the <code>return</code> keyword.</em></p>\n"}], "owner": {"reputation": 86, "user_id": 5410265, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2MHuY.jpg?s=128&g=1", "display_name": "Widdin", "link": "https://stackoverflow.com/users/5410265/widdin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 462, "favorite_count": 0, "accepted_answer_id": 33661306, "answer_count": 2, "score": -5, "last_activity_date": 1447347618, "creation_date": 1447281633, "question_id": 33661218, "link": "https://stackoverflow.com/questions/33661218/c-not-all-control-paths-return-a-value", "title": "C++ // Not all control paths return a value", "body": "<pre><code>int bounce(int n) {\n    if (n == 0)\n    {\n        cout &lt;&lt; \"0\" &lt;&lt; endl;\n    }\n    if (n &gt; 0)\n    {\n        cout &lt;&lt; n &lt;&lt; endl;\n        bounce(n - 1);\n        cout &lt;&lt; n &lt;&lt; endl;\n    }\n}\n\nint main() \n{\n    int x;\n    cout &lt;&lt; \"Choose a number: \";\n    cin &gt;&gt; x;\n    cout &lt;&lt; bounce(x) &lt;&lt; endl;\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>I recently started for my first time with C++ (2 hours ago or so :D ) and the problem i have is \"Bounce: not all control paths return a value\", I don't know how to fix this, obviously i need return 0; or something somewhere in the function but i can't find out where without ruining how it works.<br>\nExample : bounce(5) ==> prints out 5 4 3 2 1 0 1 2 3 4 5<br>\nTL DR: Where to place the return in bounce to make it work correctly.</p>\n"}, {"tags": ["c++", "gdb"], "comments": [{"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 1, "creation_date": 1447283870, "post_id": 33661179, "comment_id": 55096984, "body": "I did this at work today, I&#39;m pretty sure <code>b foo&lt;int&gt;</code> will work... If you do <code>b foo.cpp:123</code> (assuming line 123 is the line of <code>foo&lt;T&gt;</code> it will set multiple breakpoints for all template variants."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1447284325, "post_id": 33661179, "comment_id": 55097144, "body": "The template instantiation you are in should be visible in the backtrace."}, {"owner": {"reputation": 251717, "user_id": 895245, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/jhDFt.png?s=128&g=1", "display_name": "Ciro Santilli\u65b0\u7586\u68c9\u82b1TRUMP BAN BAD", "link": "https://stackoverflow.com/users/895245/ciro-santilli%e6%96%b0%e7%96%86%e6%a3%89%e8%8a%b1trump-ban-bad"}, "edited": false, "score": 0, "creation_date": 1483117121, "post_id": 33661179, "comment_id": 70001513, "body": "<a href=\"http://stackoverflow.com/questions/1666963/debugging-templates-with-gdb\" title=\"debugging templates with gdb\">stackoverflow.com/questions/1666963/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 18871, "user_id": 1442050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e975c669f2ce0f2be4613f1e123864b3?s=128&d=identicon&r=PG", "display_name": "Tom Tromey", "link": "https://stackoverflow.com/users/1442050/tom-tromey"}, "reply_to_user": {"reputation": 4731, "user_id": 1467926, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e0148d321d2f35a32f9c93d1d5dac478?s=128&d=identicon&r=PG&f=1", "display_name": "Fermat&#39;s Little Student", "link": "https://stackoverflow.com/users/1467926/fermats-little-student"}, "edited": false, "score": 0, "creation_date": 1447337512, "post_id": 33663919, "comment_id": 55119493, "body": "I updated the <code>ptype</code> part to print the interesting thing -- namely <code>ptype T</code> and not <code>ptype S</code>.  A little thinko while writing up the answer."}, {"owner": {"reputation": 18871, "user_id": 1442050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e975c669f2ce0f2be4613f1e123864b3?s=128&d=identicon&r=PG", "display_name": "Tom Tromey", "link": "https://stackoverflow.com/users/1442050/tom-tromey"}, "reply_to_user": {"reputation": 4731, "user_id": 1467926, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e0148d321d2f35a32f9c93d1d5dac478?s=128&d=identicon&r=PG&f=1", "display_name": "Fermat&#39;s Little Student", "link": "https://stackoverflow.com/users/1467926/fermats-little-student"}, "edited": false, "score": 1, "creation_date": 1447337585, "post_id": 33663919, "comment_id": 55119538, "body": "You can set a breakpoint by line number, but then the problem is filtering it based on type.  This can be done with a bit of Python scripting; basically you need a new convenience function that examines the type."}], "tags": [], "owner": {"reputation": 18871, "user_id": 1442050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e975c669f2ce0f2be4613f1e123864b3?s=128&d=identicon&r=PG", "display_name": "Tom Tromey", "link": "https://stackoverflow.com/users/1442050/tom-tromey"}, "is_accepted": true, "score": 5, "last_activity_date": 1447337472, "last_edit_date": 1447337472, "creation_date": 1447298711, "answer_id": 33663919, "question_id": 33661179, "link": "https://stackoverflow.com/questions/33661179/debug-c-template-with-gdb/33663919#33663919", "title": "debug c++ template with gdb", "body": "<p>You can use <code>ptype</code> rather than <code>p</code> to print a type.  With a recent enough (couple of years old) g++ and gdb, this will work.</p>\n\n<p>Consider this source:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate&lt;typename T&gt;\nstruct S\n{\n  S(T t)\n  {\n    std::cout &lt;&lt; t;\n  }\n};\n\nint main()\n{\n  S&lt;const char*&gt; s2(\"hello\");\n  S&lt;int&gt; s1(23);\n  return 0;\n}\n</code></pre>\n\n<p>Here I can step into the constructor for <code>s2</code> and see <code>T</code>:</p>\n\n<pre><code>(gdb) ptype T\ntype = const char *\n</code></pre>\n\n<p>Take a look the current frame:</p>\n\n<pre><code>(gdb) frame\n#0  S&lt;char const*&gt;::S (this=0x7fffffffe35f, t=0x400940 \"hello\") at q.cc:8\n8       std::cout &lt;&lt; t;\n</code></pre>\n\n<p>I can set a breakpoint using the function name given there:</p>\n\n<pre><code>(gdb) b S&lt;const char *&gt;::S\nBreakpoint 2 at 0x40087a: file q.cc, line 8.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 251717, "user_id": 895245, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/jhDFt.png?s=128&g=1", "display_name": "Ciro Santilli\u65b0\u7586\u68c9\u82b1TRUMP BAN BAD", "link": "https://stackoverflow.com/users/895245/ciro-santilli%e6%96%b0%e7%96%86%e6%a3%89%e8%8a%b1trump-ban-bad"}, "edited": false, "score": 1, "creation_date": 1483117177, "post_id": 33673573, "comment_id": 70001545, "body": "Ah, it would be better if <code>b Foo</code> would default to all instances same as <code>rbreak Foo&lt;.*&gt;</code>."}], "tags": [], "owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "is_accepted": false, "score": 11, "last_activity_date": 1447338216, "last_edit_date": 1447338216, "creation_date": 1447337905, "answer_id": 33673573, "question_id": 33661179, "link": "https://stackoverflow.com/questions/33661179/debug-c-template-with-gdb/33673573#33673573", "title": "debug c++ template with gdb", "body": "<p>To set a breakpoint to all instances use:</p>\n\n<pre><code>gdb&gt; rbreak Foo&lt;.*&gt;\n</code></pre>\n\n<p>To only set a breakpoint on a known instance</p>\n\n<pre><code>gdb&gt; break Foo&lt;int&gt;\n</code></pre>\n\n<p>You can also use <code>rbreak Foo&lt;int&gt;</code> but it makes no sense to use a call witch evaluates regular expressions but you give none :-)</p>\n\n<p>Example Code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\ntemplate &lt; typename T&gt;\nT Foo(T t) { return t; }\n\nint main()\n{\n    std::cout &lt;&lt; Foo&lt;int&gt;(1) &lt;&lt; std::endl;\n    std::cout &lt;&lt; Foo&lt;std::string&gt;(\"Hallo\") &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Simply compile with debug info:</p>\n\n<pre><code>g++ main.cpp -g -o go\n</code></pre>\n\n<p>Run gdb:</p>\n\n<pre><code>gdb go\n</code></pre>\n\n<p>And test:</p>\n\n<pre><code>gdb&gt; rbreak Foo&lt;int&gt;\ngdb&gt; run\ngdb&gt; backtrace\ngdb&gt; cont\n</code></pre>\n\n<p>As you can see: Only one instance of the template is affected.</p>\n\n<p>In the backtrace you can see which template instance is called:</p>\n\n<pre><code>#0  Foo&lt;int&gt; (t=1) at main.cpp:5\n#1  0x0000000000400b69 in main () at main.cpp:9\n</code></pre>\n\n<p>As you can see it is <code>Foo&lt;int&gt;</code> here.</p>\n"}], "owner": {"reputation": 4731, "user_id": 1467926, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e0148d321d2f35a32f9c93d1d5dac478?s=128&d=identicon&r=PG&f=1", "display_name": "Fermat&#39;s Little Student", "link": "https://stackoverflow.com/users/1467926/fermats-little-student"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4365, "favorite_count": 0, "accepted_answer_id": 33663919, "answer_count": 2, "score": 10, "last_activity_date": 1447341483, "creation_date": 1447281431, "last_edit_date": 1592644375, "question_id": 33661179, "link": "https://stackoverflow.com/questions/33661179/debug-c-template-with-gdb", "title": "debug c++ template with gdb", "body": "<p>When I debug inside a function with template,</p>\n<ol>\n<li><p>How do I know which template type the current function is using?</p>\n<p>I tried <code>p T</code>. It says gdb cant print a type.</p>\n</li>\n<li><p>How do I break on a particular template type?</p>\n<p>Lets say function <code>foo&lt;T&gt;(...)</code> have 2 possible forms, <code>foo&lt;int&gt;(...)</code> and <code>foo&lt;long&gt;(...)</code> . How do I set a breakpoint so that gdb only pauses on the first one which uses <code>int</code>, but not the second one which uses <code>long</code>?</p>\n</li>\n</ol>\n<p>Edit: It would be nice if the breakpoint can be set by line number. There are many good reasons for this, eg. the initial part of function may take long to run, the place I wish to debug may be inside an <code>if</code> statement etc.</p>\n"}, {"tags": ["c++", "standards", "standard-deviation"], "comments": [{"owner": {"reputation": 20231, "user_id": 1342730, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/36543a7316596ec6e930bc8c996bf14b?s=128&d=identicon&r=PG", "display_name": "mathematician1975", "link": "https://stackoverflow.com/users/1342730/mathematician1975"}, "edited": false, "score": 1, "creation_date": 1447281423, "post_id": 33661153, "comment_id": 55095945, "body": "<code>main</code> is spelled with lower case m and has return type <code>int</code>"}, {"owner": {"reputation": 499, "user_id": 5339899, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ebf68221eb3e8ff1037314f300217549?s=128&d=identicon&r=PG&f=1", "display_name": "TheQAGuy", "link": "https://stackoverflow.com/users/5339899/theqaguy"}, "edited": false, "score": 0, "creation_date": 1447281536, "post_id": 33661153, "comment_id": 55096004, "body": "change <code>void Main()</code> to <code>int main()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 20231, "user_id": 1342730, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/36543a7316596ec6e930bc8c996bf14b?s=128&d=identicon&r=PG", "display_name": "mathematician1975", "link": "https://stackoverflow.com/users/1342730/mathematician1975"}, "is_accepted": false, "score": 0, "last_activity_date": 1447281979, "last_edit_date": 1447281979, "creation_date": 1447281530, "answer_id": 33661202, "question_id": 33661153, "link": "https://stackoverflow.com/questions/33661153/c-standard-deviation-assignment-need-help-correcting-error/33661202#33661202", "title": "C++ Standard Deviation assignment need help correcting error", "body": "<p>Replace </p>\n\n<pre><code>void Main()\n</code></pre>\n\n<p>with </p>\n\n<pre><code>int main()\n</code></pre>\n\n<p>Applications require a <code>main</code> function (that has <code>int</code> return type) and that is what the linker is complaining about as you have not provided one due to your typo with an upper case <code>M</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1591, "user_id": 5397699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fy8CM.png?s=128&g=1", "display_name": "decltype_auto", "link": "https://stackoverflow.com/users/5397699/decltype-auto"}, "is_accepted": false, "score": 1, "last_activity_date": 1447281551, "creation_date": 1447281551, "answer_id": 33661206, "question_id": 33661153, "link": "https://stackoverflow.com/questions/33661153/c-standard-deviation-assignment-need-help-correcting-error/33661206#33661206", "title": "C++ Standard Deviation assignment need help correcting error", "body": "<p>Attend case-sensitivity of C and C++; the main routine the linker looks for is </p>\n\n<pre><code>int main() {/**/}\n</code></pre>\n\n<p>not</p>\n\n<pre><code>void Main(){/* ... */}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5552535, "user_type": "registered", "profile_image": "https://graph.facebook.com/1292766457406185/picture?type=large", "display_name": "Andrew Costa", "link": "https://stackoverflow.com/users/5552535/andrew-costa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1447283815, "creation_date": 1447281326, "last_edit_date": 1447283815, "question_id": 33661153, "link": "https://stackoverflow.com/questions/33661153/c-standard-deviation-assignment-need-help-correcting-error", "title": "C++ Standard Deviation assignment need help correcting error", "body": "<p>Trying to write a program that uses an array to calculate standard deviation. \nIt keeps giving me an error:</p>\n\n<blockquote>\n  <p>\"LNK2019  unresolved external symbol _main referenced in function \"int\n  __cdecl invoke_main(void)\" (?invoke_main@@YAHXZ)  ConsoleApplication7777  C:\\Users\\Gregory\\Desktop\\ConsoleApplication7777\\ConsoleApplication7777\\MSVCRTD.lib(exe_main.obj)    1\"</p>\n</blockquote>\n\n<p>Here is my code:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include&lt;iostream&gt;\n#include&lt;cmath&gt;\n\nusing namespace std;\n\ndouble standard_Deviation(double x[], int n);\n\n//Main Function here\nvoid Main()\n{\n    //declare variables here\n    double x[100];\n    double sDeviation;\n    int i;\n    int n;\n\n//input number values here\ncout &lt;&lt; \"Enter n value\";\ncin &gt;&gt; n;\n\n//input array values here\ncout &lt;&lt; \"Enter values:\" &lt;&lt; endl;\n\nfor (i = 0; i &lt; n; i++)\n    cin &gt;&gt; x[i];\n//call standard deviation function\nsDeviation = standard_Deviation(x, n);\n\n//outputting standard deviation\ncout &lt;&lt; \"Standard Deviation:\" &lt;&lt; sDeviation &lt;&lt; endl;\n//give it time to think\nsystem(\"pause\");\n\n}\n\ndouble standard_Deviation(double x[], int n)\n{\ndouble sd = 0;\ndouble mean=0;\nfor (int i = 0; i&lt;n; i++)\n    mean = mean + x[i];\nmean = mean / n;\nfor (int i = 0; i&lt;n; i++)\n    sd = sd + pow((x[i] - mean), 2);\nsd = sd / n;\nsd = sqrt(sd);\nreturn sd;\nreturn mean;\n} //end of standard deviation\n</code></pre>\n"}, {"tags": ["c++", "qt", "user-interface"], "comments": [{"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1447317214, "post_id": 33661087, "comment_id": 55107433, "body": "You can nest widgets into widgets as much as you want. I don&#39;t see what&#39;s the problem here..."}, {"owner": {"reputation": 55, "user_id": 5552467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a194b3d94828e2220b01c4324bcf3c2?s=128&d=identicon&r=PG&f=1", "display_name": "das", "link": "https://stackoverflow.com/users/5552467/das"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1447328471, "post_id": 33661087, "comment_id": 55114084, "body": "I guess you mean creating the whole thing in one form, which i can&#39;t believe i didn&#39;t think of. Thanks."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1447329118, "post_id": 33661087, "comment_id": 55114430, "body": "You can have them be separate widget elements, and still create another widget and put it all in there. This way it will be easier to maintain."}, {"owner": {"reputation": 55, "user_id": 5552467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a194b3d94828e2220b01c4324bcf3c2?s=128&d=identicon&r=PG&f=1", "display_name": "das", "link": "https://stackoverflow.com/users/5552467/das"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1447399200, "post_id": 33661087, "comment_id": 55147404, "body": "You are totally right. For some reason i was convinced the singals/slots connections should be in the widgets&#39; class."}], "owner": {"reputation": 55, "user_id": 5552467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a194b3d94828e2220b01c4324bcf3c2?s=128&d=identicon&r=PG&f=1", "display_name": "das", "link": "https://stackoverflow.com/users/5552467/das"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1447281002, "creation_date": 1447281002, "question_id": 33661087, "link": "https://stackoverflow.com/questions/33661087/multiple-uis-in-one-class", "title": "Multiple UI&#39;s in one class", "body": "<p>Ok, i know that similar questions have been asked before, but hear me out.\nI'm making an application that does simple transformations to an image. I need a ui form for the main window and one for the toolbar. I know that the toolbar should have it's own class but, if i do it like that, it wont be able to change the image that is stored in the MainWindow (right?). </p>\n\n<p>Should i make a class that inherits QGraphicsScene (which holds the image), include it in the toolbar class and include that to the MainWindow, or there is an easier way?</p>\n"}, {"tags": ["c++", "visual-studio-2013", "ide", "visual-studio-2015", "unreal-engine4"], "answers": [{"tags": [], "owner": {"reputation": 64, "user_id": 4220821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87c62a7d082a9e5ef08adfa5784c3607?s=128&d=identicon&r=PG&f=1", "display_name": "Tohaveaname", "link": "https://stackoverflow.com/users/4220821/tohaveaname"}, "is_accepted": false, "score": 0, "last_activity_date": 1460381799, "last_edit_date": 1460381799, "creation_date": 1460381488, "answer_id": 36550213, "question_id": 33660943, "link": "https://stackoverflow.com/questions/33660943/errormsb3073-in-visual-studio-with-unreal-engine/36550213#36550213", "title": "error(MSB3073) in visual studio with unreal engine", "body": "<p>Try: </p>\n\n<pre><code>#pragma once\n\n#include \"GameFramework/Actor.h\"\n#include \"MyActor.generated.h\"\n\nUCLASS()\nclass TEST4_API AMyActor : public AActor\n{\n    GENERATED_BODY()\n\npublic:        \n    // Sets default values for this actor's properties\n    AMyActor();\n\n    // Called when the game starts or when spawned\n    virtual void BeginPlay() override;\n\n    // Called every frame\n    virtual void Tick( float DeltaSeconds ) override;\n\n};  \n</code></pre>\n\n<p>I think your problem is not immediately following UPROPERTY(EditAnywhere) with a variable. Standard syntax of UPROPERTY is:<br>\n     <code>UPROPERTY([specifier, specifier, ...], [meta=(key=value, key=value, ...)])\n Type VariableName;</code>  </p>\n\n<p>For more info: <a href=\"https://wiki.unrealengine.com/UPROPERTY\" rel=\"nofollow\">https://wiki.unrealengine.com/UPROPERTY</a></p>\n"}], "owner": {"reputation": 21, "user_id": 5552438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ba647d37d020d6ba96db724aceff3e?s=128&d=identicon&r=PG&f=1", "display_name": "Arkhain", "link": "https://stackoverflow.com/users/5552438/arkhain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2817, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460381799, "creation_date": 1447280422, "last_edit_date": 1447281251, "question_id": 33660943, "link": "https://stackoverflow.com/questions/33660943/errormsb3073-in-visual-studio-with-unreal-engine", "title": "error(MSB3073) in visual studio with unreal engine", "body": "<p>I'm new using visual studio and unreal engine (but I learnt c++ previously). I'm in trouble right now. Let me explain : </p>\n\n<p>I use Unreal engine 4.9.2 and visual studio 2013 update 4 (that has been installed) from UE.</p>\n\n<p>When first open VS while creating a new project I have this error message : \n<a href=\"https://i.stack.imgur.com/3WuWd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3WuWd.png\" alt=\"first VS instance error\"></a></p>\n\n<p>but then VS opens normally.</p>\n\n<p>Later, when I create a new actor in UE and that I try to build it adding just this line : </p>\n\n<pre><code>UPROPERTY(EditAnywhere)\n</code></pre>\n\n<p>I have 2 brand new error messages : </p>\n\n<blockquote>\n  <p>Error        1        error code: OtherCompilationError (5)        E:\\Documents\\Unreal Projects\\test4\\Intermediate\\ProjectFiles\\Error        test4</p>\n  \n  <p>Error        2        error MSB3073: The command \"\"E:\\programmes\\unrealengine\\Epic Games\\4.9\\Engine\\Build\\BatchFiles\\Build.bat\" test4Editor Win64 Development \"E:\\Documents\\Unreal Projects\\test4\\test4.uproject\" -rocket -waitmutex\" exited with code -1.        C:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\V120\\Microsoft.MakeFile.Targets        38        5        test4</p>\n</blockquote>\n\n<p>What I tried to do to fix it : \n- remove and install again unreal engine and visual studio : <strong>same issues.</strong></p>\n\n<ul>\n<li><p>install visual studio from another source and then install unreal engine (removing both and rebooting before, obviously) : <strong>same issues.</strong></p></li>\n<li><p>Install Unreal Engine 4.10 => other issue, I'm not able to install Visual Studio 2015 (the installer packed with UE fails).</p></li>\n<li><p>Using UE 4.10 Install Visual studio 2015 from another source : <strong>same Issues</strong></p></li>\n<li><p>Uninstall all and retry with UE4.9 and VS2013 : <strong>same issues</strong></p></li>\n</ul>\n\n<p>The complete source code of the header (the .cpp file has not been modified, it is still blank): </p>\n\n<pre><code>    // Fill out your copyright notice in the Description page of Project Settings.\n\n#pragma once\n\n#include \"GameFramework/Actor.h\"\n#include \"MyActor.generated.h\"\n\nUCLASS()\nclass TEST4_API AMyActor : public AActor\n{\n        GENERATED_BODY()\n        UPROPERTY(EditAnywhere)\n\npublic:        \n        // Sets default values for this actor's properties\n        AMyActor();\n\n        // Called when the game starts or when spawned\n        virtual void BeginPlay() override;\n\n        // Called every frame\n        virtual void Tick( float DeltaSeconds ) override;\n\n};\n</code></pre>\n\n<p>Honestly I learnt at school how to program using makefiles and linux but with an IDE, I am a total beginner. I hope someone will be able to help me. Thanks in advance.</p>\n\n<p>PS : I apologize if I made grammar mistakes but english is not my native language.</p>\n"}, {"tags": ["c++", "file-io", "user-defined-functions"], "comments": [{"owner": {"reputation": 1591, "user_id": 5397699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fy8CM.png?s=128&g=1", "display_name": "decltype_auto", "link": "https://stackoverflow.com/users/5397699/decltype-auto"}, "edited": false, "score": 1, "creation_date": 1447280243, "post_id": 33660830, "comment_id": 55095353, "body": "Welcome to SO! Please assemble the code-fragments into a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>. hardly anyone will like having to solve a code puzzle prior to helping you with your homework code."}, {"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 0, "creation_date": 1447281151, "post_id": 33660830, "comment_id": 55095810, "body": "Isn&#39;t a &quot;notepad file&quot; just a regular text file?"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1447429167, "post_id": 33660830, "comment_id": 55164283, "body": "@Namit Feel free to accept the answer, if it answers your question."}], "answers": [{"comments": [{"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1447280418, "post_id": 33660931, "comment_id": 55095430, "body": "<code>infile &gt;&gt; companyA(...)</code> doesn&#39;t make sense. Shouldn&#39;t it just be the function call?"}], "tags": [], "owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "is_accepted": false, "score": 1, "last_activity_date": 1447349481, "last_edit_date": 1447349481, "creation_date": 1447280360, "answer_id": 33660931, "question_id": 33660830, "link": "https://stackoverflow.com/questions/33660830/how-do-i-take-data-out-of-a-notepad-file-and-place-it-into-a-user-defined-functi/33660931#33660931", "title": "How do I take data out of a notepad file and place it into a user defined function?", "body": "<p>You don't \"place\" data into a function, you pass them. That's what function parameters are for. Besides that, </p>\n\n<pre><code>companyA(int pNumber, char company, int localMin, int longMin);\n</code></pre>\n\n<p>is a function declaration, which does not have a place here at all.</p>\n\n<p>Here's the edited code that uses the variables you declared, and does not use <a href=\"http://en.cppreference.com/w/cpp/io/basic_ios/eof\" rel=\"nofollow\"><code>std::basic_ios::eof</code></a>:</p>\n\n<pre><code>// read to intermediate variables\nwhile(infile &gt;&gt; pNumber &gt;&gt; company &gt;&gt; localMin &gt;&gt; longMin) \n{\n    if(pNumber &gt; 111000)\n        // just call the function, passing intermediate variables\n        companyA(pNumber, company, localMin, longMin);\n}\n</code></pre>\n\n<p>Moreover, <code>std::basic_fstream</code> does not have a <code>close</code> that takes some arguments (path). See the <a href=\"http://en.cppreference.com/w/cpp/io/basic_fstream/close\" rel=\"nofollow\">reference</a> and pay attention in the class.</p>\n"}], "owner": {"reputation": 41, "user_id": 5438700, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e3992a969b37f4e150d031e2d37168b8?s=128&d=identicon&r=PG&f=1", "display_name": "Namit Patel", "link": "https://stackoverflow.com/users/5438700/namit-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1447349481, "creation_date": 1447279919, "last_edit_date": 1447281177, "question_id": 33660830, "link": "https://stackoverflow.com/questions/33660830/how-do-i-take-data-out-of-a-notepad-file-and-place-it-into-a-user-defined-functi", "title": "How do I take data out of a notepad file and place it into a user defined function?", "body": "<p>My professor gave us an assignment where we have to take a data file and that has information about a phone company and wants us to take the call minutes and find the final charge. I'm pretty sure my function is okay but he didn't really explain how to extract information from a data file. (His examples were very simple).</p>\n\n<p>The columns in the file represent the phone number, company code, local minutes, and long distance minutes respectively. This is the order I made my parameters in my function.</p>\n\n<p>My Code:</p>\n\n<pre><code>int main()\n{\n\n    int pNumber;\n    char company;\n    int localMin;\n    int longMin;\n\n    ifstream infile;\n    ofstream outfile;\n\n    infile.open(\"e:/C++/Lab Assignments/Lab 6/phoneData.dat\");\n    outfile.open(\"e:/C++/Lab Assignments/Lab 6/companyComparison.bat\");\n\n    while(!infile.eof())\n    {\n        if(pNumber &gt; 111000)\n            **infile &gt;&gt; companyA(int pNumber, char company, int localMin, int longMin); **\n    }\n\n    infile.close(\"e:/C++/Lab Assignments/Lab 6/phoneData.dat\");\n    outfile.close(\"e:/C++/Lab Assignments/Lab 6/companyComparison.bat\");\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>I'm getting an error in the while loop in my main function. I put double asterisks around the code line in question. I'm just not sure how to fix this.</p>\n"}, {"tags": ["c++", "r", "function", "rcpp", "fibonacci"], "comments": [{"owner": {"reputation": 22688, "user_id": 3760920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aCfir.jpg?s=128&g=1", "display_name": "jeremycg", "link": "https://stackoverflow.com/users/3760920/jeremycg"}, "edited": false, "score": 1, "creation_date": 1447280479, "post_id": 33660821, "comment_id": 55095471, "body": "If I use <code>if (x &lt; 2)</code> rather than             <code>if (x == 0) return(0);             if (x == 1) return(1);</code> The difference in runtime disappears"}, {"owner": {"reputation": 14246, "user_id": 1655567, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/08d134d1cb7ddb592471df1b356e2bd4?s=128&d=identicon&r=PG", "display_name": "Konrad", "link": "https://stackoverflow.com/users/1655567/konrad"}, "reply_to_user": {"reputation": 22688, "user_id": 3760920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aCfir.jpg?s=128&g=1", "display_name": "jeremycg", "link": "https://stackoverflow.com/users/3760920/jeremycg"}, "edited": false, "score": 0, "creation_date": 1447281093, "post_id": 33660821, "comment_id": 55095774, "body": "@jeremycg thanks very much for showing the interest. So, if I understand correctly, in terms of the performance there is no difference between the in-line and the <code>sourceCpp</code> approach."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1447281578, "post_id": 33660821, "comment_id": 55096029, "body": "what happens if you use <code>unsigned int x</code> instead of <code>int x</code>. Otherwise I dont see how <code>if (x &lt; 2)</code> could be different from <code>if (x==0).....</code>"}, {"owner": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "edited": false, "score": 2, "creation_date": 1447283914, "post_id": 33660821, "comment_id": 55097009, "body": "I just did a C version and it is identical to the <code>fibRcpp</code> one, also about twice as fast, but notice that if you increase x to like 20, the difference is much smaller"}, {"owner": {"reputation": 17753, "user_id": 1342082, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1ef12d2cf78f28d7a1e76c8fc60978c8?s=128&d=identicon&r=PG", "display_name": "Kevin Ushey", "link": "https://stackoverflow.com/users/1342082/kevin-ushey"}, "edited": false, "score": 0, "creation_date": 1447698832, "post_id": 33660821, "comment_id": 55252812, "body": "My guess -- it&#39;s the difference between performing two comparisons, instead of just one."}], "answers": [{"tags": [], "owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "is_accepted": true, "score": 3, "last_activity_date": 1447336447, "last_edit_date": 1447336447, "creation_date": 1447295795, "answer_id": 33663462, "question_id": 33660821, "link": "https://stackoverflow.com/questions/33660821/educational-understanding-variable-performance-of-recursive-functions-with-rcp/33663462#33663462", "title": "Educational - understanding variable performance of recursive functions with Rcpp", "body": "<p>All good comments above. </p>\n\n<p>The function is <em>way too lightweight at <code>x=10</code></em> and you need to call <em>way more often</em> than <code>times=10</code> to find anything meaningful.  You are measuring noise.  </p>\n\n<p>As for style, most of us prefer <code>fibonacci()</code> via Rcpp Attributes...</p>\n"}], "owner": {"reputation": 14246, "user_id": 1655567, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/08d134d1cb7ddb592471df1b356e2bd4?s=128&d=identicon&r=PG", "display_name": "Konrad", "link": "https://stackoverflow.com/users/1655567/konrad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 1, "accepted_answer_id": 33663462, "answer_count": 1, "score": 2, "last_activity_date": 1447336447, "creation_date": 1447279875, "last_edit_date": 1447281894, "question_id": 33660821, "link": "https://stackoverflow.com/questions/33660821/educational-understanding-variable-performance-of-recursive-functions-with-rcp", "title": "Educational - understanding variable performance of recursive functions with Rcpp", "body": "<p>The problem is not of practical nature and I'm only looking for a sound explanation of the observed occurence. I'm reading <em><a href=\"http://www.worldcat.org/title/seamless-r-and-c-integration-with-rcpp/oclc/848789357\" rel=\"nofollow\">Seamless R and C++ Integration with Rcpp (Use R!)</a></em> by Dirk Eddelbuettel. Following the introduction, I'm looking at two simple \"Fibonacci functions\".</p>\n\n<p>In RStudio I have a cpp file of the following structure</p>\n\n<h1>fib_fun.cpp</h1>\n\n<pre><code>#include &lt;Rcpp.h&gt;\n\n// [[Rcpp::export]]\nint fibonacci(const int x) {\n    if (x &lt; 2)\n        return x;\n    else\n        return (fibonacci(x -1)) + fibonacci(x-2);\n}\n\n/*** R\n# Call the fib function defined in R\nfibonacci(10)\n*/\n</code></pre>\n\n<p>I also have an inline implementation of the same function:</p>\n\n<h1>inline_fib.R</h1>\n\n<pre><code># Inline fib implementation\nincltxt &lt;- \"int fibonacci(const int x) {\n            if (x == 0) return(0);\n            if (x == 1) return(1);\n            return fibonacci(x - 1) + fibonacci(x - 2);\n            }\"\n\n# Inline call\nrequire(inline)\nfibRcpp &lt;- cxxfunction(signature(xs = \"int\"), plugin = \"Rcpp\",\n                       includes = incltxt,\n                       body = \"int x = Rcpp::as&lt;int&gt;(xs);\n                               return Rcpp::wrap(fibonacci(x));\")\n</code></pre>\n\n<p>When I benchmark the functions I get the following results:</p>\n\n<blockquote>\n<pre><code>&gt; microbenchmark(fibonacci(10), fibRcpp(10), times = 10)\nUnit: microseconds\n          expr   min    lq   mean median    uq    max neval\n fibonacci(10) 3.121 3.198 5.5192  3.447 3.886 23.491    10\n   fibRcpp(10) 1.176 1.398 3.9520  1.558 1.709 25.721    10\n</code></pre>\n</blockquote>\n\n<h1>Questions</h1>\n\n<ol>\n<li>I would like to understand why there is a significant difference in performance between the two functions?</li>\n<li>With respect to the practicalities surrounding the use of Rcpp, what generally considered to be a good practice? In my naivety, my first hunch would be to write a function and source it via <code>sourceCpp</code> but this solutions appears to be much slower.  </li>\n</ol>\n\n<hr>\n\n<h1>Benchmarking code</h1>\n\n<pre><code>require(microbenchmark); require(Rcpp); require(inline)\nsourceCpp(\"fib_fun.cpp\"); source(\"inline_fib.R\")\nmicrobenchmark(fibonacci(10), fibRcpp(10), times = 10)\n</code></pre>\n\n<hr>\n\n<h1>Comment replies</h1>\n\n<p>I tried the functions with the <code>unsigned int</code> instead of the <code>int</code>, results:</p>\n\n<pre><code>Unit: microseconds\n          expr   min    lq   mean median    uq    max neval\n fibonacci(10) 2.908 2.992 5.0369  3.267 3.598 20.291    10\n   fibRcpp(10) 1.201 1.263 6.3523  1.424 1.639 50.536    10\n</code></pre>\n"}, {"tags": ["c++", "vector", "struct"], "comments": [{"owner": {"reputation": 878, "user_id": 5153277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248e3e20233de52d4cdd3c0293fb7912?s=128&d=identicon&r=PG&f=1", "display_name": "Estiny", "link": "https://stackoverflow.com/users/5153277/estiny"}, "edited": false, "score": 0, "creation_date": 1447279933, "post_id": 33660795, "comment_id": 55095174, "body": "It probably doesn&#39;t recognize vector. You should either write <code>std::vector</code> or <code>using namespace std</code>."}, {"owner": {"reputation": 1526, "user_id": 2887128, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/55ee6a68a653f3a0ebee2329667c653f?s=128&d=identicon&r=PG", "display_name": "jaredready", "link": "https://stackoverflow.com/users/2887128/jaredready"}, "edited": false, "score": 0, "creation_date": 1447280331, "post_id": 33660795, "comment_id": 55095388, "body": "Remove the space between vector and the bracket. Also, add <code>std::</code>. So, <code>std::vector&lt;node&gt; arr;</code> Not sure if that&#39;s the issue."}, {"owner": {"reputation": 878, "user_id": 5153277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248e3e20233de52d4cdd3c0293fb7912?s=128&d=identicon&r=PG&f=1", "display_name": "Estiny", "link": "https://stackoverflow.com/users/5153277/estiny"}, "reply_to_user": {"reputation": 1526, "user_id": 2887128, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/55ee6a68a653f3a0ebee2329667c653f?s=128&d=identicon&r=PG", "display_name": "jaredready", "link": "https://stackoverflow.com/users/2887128/jaredready"}, "edited": false, "score": 0, "creation_date": 1447281365, "post_id": 33660795, "comment_id": 55095909, "body": "@ResidentBiscuit space doesn&#39;t change anything in this case."}, {"owner": {"reputation": 1526, "user_id": 2887128, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/55ee6a68a653f3a0ebee2329667c653f?s=128&d=identicon&r=PG", "display_name": "jaredready", "link": "https://stackoverflow.com/users/2887128/jaredready"}, "reply_to_user": {"reputation": 878, "user_id": 5153277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248e3e20233de52d4cdd3c0293fb7912?s=128&d=identicon&r=PG&f=1", "display_name": "Estiny", "link": "https://stackoverflow.com/users/5153277/estiny"}, "edited": false, "score": 0, "creation_date": 1447281875, "post_id": 33660795, "comment_id": 55096154, "body": "@Estiny I wasn&#39;t sure. Parsing around template stuff has been not awesome in the past."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1447298296, "post_id": 33660795, "comment_id": 55101134, "body": "This code compiles for me with <code>#include &lt;vector&gt;</code>, <code>using std::vector</code>, and <code>}; int main() { Dictionary&lt;int&gt; d(5); }</code> afterwards"}, {"owner": {"reputation": 164, "user_id": 5552396, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CL8za.jpg?s=128&g=1", "display_name": "gunescelil", "link": "https://stackoverflow.com/users/5552396/gunescelil"}, "edited": false, "score": 0, "creation_date": 1447327091, "post_id": 33660795, "comment_id": 55113335, "body": "Yes. Guys I did not write &#39;using namespace std&#39;. So now it works well. Thank you all"}], "owner": {"reputation": 164, "user_id": 5552396, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CL8za.jpg?s=128&g=1", "display_name": "gunescelil", "link": "https://stackoverflow.com/users/5552396/gunescelil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1447279763, "creation_date": 1447279763, "question_id": 33660795, "link": "https://stackoverflow.com/questions/33660795/i-want-to-implement-a-vector-of-structs-which-is-in-the-private-part-of-a-templa", "title": "I want to implement a vector of structs which is in the private part of a templated class", "body": "<p>This is my class called Dictionary I will use it as a hash table so for that I want to have a vector of structs. I have an implementation but at the last part of the code where <code>vector &lt;node&gt; arr</code> gives C4430 error. It says: missing type specifier - int assumed. Note: C++ does not support default-int. </p>\n\n<p>Note: This is my first question sorry for the mistakes if any.</p>\n\n<pre><code>template &lt;class object&gt;\nclass Dictionary // Which will be a hash table\n{\npublic:\n    explicit Dictionary(const  object &amp; notFound, int size= 101);\n\n    Dictionary(const Dictionary &amp; rhs): ITEM_NOT_FOUND(rhs.ITEM_NOT_FOUND) ,\n       arr(rhs.arr), currentSize(rhs.currentSize){}\n\n    enum EntryType { ACTIVE , EMPTY , DELETED };\n\nprivate:\nstruct node\n{\n    object element;\n    EntryType info;\n\n    node (const object &amp; e = object(), EntryType i = EMPTY)\n        : element( e ), info( i ) {}\n};\n\nvector &lt;node&gt; arr;\nint currentSize;\nconst object ITEM_NOT_FOUND;\n</code></pre>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 6, "creation_date": 1447279320, "post_id": 33660386, "comment_id": 55094909, "body": "I can&#39;t believe we don&#39;t have an appropriate duplicate for this question."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 3, "creation_date": 1447279325, "post_id": 33660386, "comment_id": 55094912, "body": "This is a pretty good first question, but I edited out lots of extraneous verbiage. Not extraneous <i>information</i>, as per your original &quot;excuse any excess information&quot; line; in particular, you started by saying you were confused about a <i>particular line</i> in the program, but without your &quot;extra&quot; information, there would have been no indication of <i>which</i> line confused you!"}, {"owner": {"reputation": 455, "user_id": 1313741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b64a56218bcb76d5499a4281f01e55?s=128&d=identicon&r=PG", "display_name": "Bobby Russell", "link": "https://stackoverflow.com/users/1313741/bobby-russell"}, "edited": false, "score": 0, "creation_date": 1447279898, "post_id": 33660386, "comment_id": 55095154, "body": "This is an alternative syntax to array indexing."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 5045760, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/50813c18e0af24d4f2c8d8bafaba7ad0?s=128&d=identicon&r=PG", "display_name": "cwallach", "link": "https://stackoverflow.com/users/5045760/cwallach"}, "edited": false, "score": 2, "creation_date": 1447278328, "post_id": 33660413, "comment_id": 55094427, "body": "It is an obscure way to write  temp[ count]= foo[i];"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 3, "creation_date": 1447278426, "post_id": 33660413, "comment_id": 55094470, "body": "That is not &quot;C-style&quot; either, it is just bad."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "reply_to_user": {"reputation": 61, "user_id": 5045760, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/50813c18e0af24d4f2c8d8bafaba7ad0?s=128&d=identicon&r=PG", "display_name": "cwallach", "link": "https://stackoverflow.com/users/5045760/cwallach"}, "edited": false, "score": 1, "creation_date": 1447278460, "post_id": 33660413, "comment_id": 55094481, "body": "@cwallach alternatively <code>count[temp] = i[foo];</code> and other combinations :)"}, {"owner": {"reputation": 154, "user_id": 3164339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/336d185d4f3d623614411c862f40c09e?s=128&d=identicon&r=PG&f=1", "display_name": "user3164339", "link": "https://stackoverflow.com/users/3164339/user3164339"}, "edited": false, "score": 0, "creation_date": 1447278684, "post_id": 33660413, "comment_id": 55094610, "body": "It&#39;s just pointer math.  Doesn&#39;t count[temp] end up being <code>count + temp</code> which could be considered a run-time efficiency  improvement?  Not that it&#39;s horribly important.  Code is ugly, not sure I&#39;d call it bad though."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 154, "user_id": 3164339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/336d185d4f3d623614411c862f40c09e?s=128&d=identicon&r=PG&f=1", "display_name": "user3164339", "link": "https://stackoverflow.com/users/3164339/user3164339"}, "edited": false, "score": 2, "creation_date": 1447278863, "post_id": 33660413, "comment_id": 55094703, "body": "@user3164339: If <code>*(count + temp)</code> is more efficient than <code>count[temp]</code>, you need to get a better compiler. The two expressions are equivalent by definition, and any decent compiler should generate equivalent code for both."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 3, "creation_date": 1447278950, "post_id": 33660413, "comment_id": 55094747, "body": "@Kevin: Right, because the OP wasn&#39;t confused enough already.  8-)} Bearforce96: For historical reasons, <code>arr[i]</code> can also be written as <code>i[arr]</code>; the <code>[]</code> indexing operator is commutative. <b>Do not</b> make use of this fact unless you&#39;re entering the <a href=\"http://ioccc.org/\" rel=\"nofollow noreferrer\">IOCCC</a>."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "reply_to_user": {"reputation": 154, "user_id": 3164339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/336d185d4f3d623614411c862f40c09e?s=128&d=identicon&r=PG&f=1", "display_name": "user3164339", "link": "https://stackoverflow.com/users/3164339/user3164339"}, "edited": false, "score": 0, "creation_date": 1447531301, "post_id": 33660413, "comment_id": 55196652, "body": "@user3164339 Anything that &quot;ends up being&quot; something else is <b>tautologically</b> <i>equivalent</i> at runtime, because &quot;ends up being&quot; is a sloppy way of saying &quot;is compiled into&quot; or similar. But it&#39;s juuuuuuust possible that there will be a <i>compile-time</i> efficiency improvement from writing the expression one way versus the other, but it would be on the order of a couple clock-cycles (i.e. immeasurably small or practically immeasurable) and there&#39;s no way to predict <i>which</i> way would be compiled more quickly (e.g. the form with parens has more tokens, so maybe the lexing stage would be slower)."}], "tags": [], "owner": {"reputation": 7392, "user_id": 1555823, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2b69fc6d16ff23e3509b2f3602838acd?s=128&d=identicon&r=PG", "display_name": "vladon", "link": "https://stackoverflow.com/users/1555823/vladon"}, "is_accepted": false, "score": 1, "last_activity_date": 1447278338, "last_edit_date": 1447278338, "creation_date": 1447278257, "answer_id": 33660413, "question_id": 33660386, "link": "https://stackoverflow.com/questions/33660386/what-does-pointer-integer-do-in-c/33660413#33660413", "title": "What does &quot;*(pointer + integer)&quot; do in C++?", "body": "<p><code>*(temp + count) = *(foo + i)</code> means: </p>\n\n<p>get the <code>temp</code> address, add <code>count</code> offset to it, then set value in resulting address <code>temp + count</code> to value from address <code>foo</code> with offset <code>i</code></p>\n\n<p>Better will be:</p>\n\n<pre><code>temp[count] = foo[i];\n</code></pre>\n\n<p>(By the way, it's a C style (except for <code>new</code>), not C++. Very bad code.)</p>\n"}, {"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 9, "last_activity_date": 1447278764, "last_edit_date": 1447278764, "creation_date": 1447278426, "answer_id": 33660453, "question_id": 33660386, "link": "https://stackoverflow.com/questions/33660386/what-does-pointer-integer-do-in-c/33660453#33660453", "title": "What does &quot;*(pointer + integer)&quot; do in C++?", "body": "<pre><code>*(temp + count) = *(foo + i);\n</code></pre>\n\n<p>The <code>+</code> operators are performing pointer arithmetic.  Adding an integer to a pointer value yields a new pointer incremented a specified number of objects past the original pointer.  For example, if <code>p</code> is a pointer to <code>arr[0]</code>, then <code>p+2</code> points to <code>arr[2]</code>.</p>\n\n<p>The <code>*</code> operator <em>deferences</em> the resulting pointer, giving you the object that it points to.</p>\n\n<p>In fact, the array indexing operator <code>[]</code> is defined in terms of pointer arithmetic, so that <code>A[i]</code> means <code>*(A+i)</code> (ignoring operator overloading). So the above line of code:</p>\n\n<pre><code>*(temp + count) = *(foo + i);\n</code></pre>\n\n<p>could also be written (more clearly IMHO) as:</p>\n\n<pre><code>temp[count] = foo[i];\n</code></pre>\n\n<p>You might want to read the <a href=\"http://www.c-faq.com/\">comp.lang.c FAQ</a>, particularly sections 4 (Pointers) and 6 (Arrays and Pointers). Most of the information is also applicable to C++.</p>\n\n<p><em>However</em>, C++ provides higher-level library interfaces that can be more robust than the low-level C equivalents. It's seldom a good idea in C++ to write code that deals directly with arrays and pointers to array elements, unless it's very low-level code and performance is critical and/or you're dealing with data structures from C code.</p>\n"}, {"tags": [], "owner": {"reputation": 36538, "user_id": 471164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/45d4a7ba0fb8e789356f5da87536444d?s=128&d=identicon&r=PG", "display_name": "vitaut", "link": "https://stackoverflow.com/users/471164/vitaut"}, "is_accepted": false, "score": 2, "last_activity_date": 1447279058, "last_edit_date": 1447279058, "creation_date": 1447278468, "answer_id": 33660461, "question_id": 33660386, "link": "https://stackoverflow.com/questions/33660386/what-does-pointer-integer-do-in-c/33660461#33660461", "title": "What does &quot;*(pointer + integer)&quot; do in C++?", "body": "<p>In your example</p>\n\n<pre><code>*(temp + count) = *(foo + i);\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>temp[count] = foo[i];\n</code></pre>\n\n<p>The expression <code>*(temp + count)</code> adds integer <code>count</code> to pointer <code>temp</code>, which gives you a pointer to element at position <code>count</code> in the array pointed to by <code>temp</code> and <a href=\"https://en.wikipedia.org/wiki/Dereference_operator\" rel=\"nofollow\">dereferences</a> it.</p>\n"}, {"tags": [], "owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "is_accepted": false, "score": 0, "last_activity_date": 1447279010, "creation_date": 1447279010, "answer_id": 33660598, "question_id": 33660386, "link": "https://stackoverflow.com/questions/33660386/what-does-pointer-integer-do-in-c/33660598#33660598", "title": "What does &quot;*(pointer + integer)&quot; do in C++?", "body": "<p>Perhaps the key line of your question is:</p>\n\n<blockquote>\n  <p>Why are there pointers to the parentheses [...] ?</p>\n</blockquote>\n\n<p>The <code>*</code> symbol in C and C++ is somewhat confusingly semantically overloaded. You are correct that it sometimes means \"pointer to,\" as in <code>int* int_ptr</code>, where the <code>*</code> means \"<code>int_ptr</code> is a <em>pointer to</em> the type to the left of the <code>*</code>\".</p>\n\n<p>But it <em>also</em> means \"dereference a pointer to...\", which is what's actually going on here. The expressions <code>(temp + count)</code> and <code>(foo + i)</code> evaluate to pointers-to-<code>int</code>s, because adding an int-like type to a pointer value results in that pointer value <em>offset</em> by the integer type (i.e., you are calculating the memory address at some distance from the original pointer). The parentheses simply ensure that the addition operations happen before the <code>*</code>'s are applied. So <code>*(temp + count)</code> is <em>dereferencing</em> the pointer value <code>temp + count</code>. This means that it evaluates to the integer value stored at the address <code>temp + count</code>.</p>\n\n<p>You can eliminate some of the confusion by thinking of the first meaning as <em>also</em> indicating a dereference: <code>int* int_ptr</code> is equivalent to <code>int *int_ptr</code>, i.e., \"if you dereference <code>int_ptr</code>, you'll get an <code>int</code>.\" This gives an intuitive sense of why <code>int* int_one, int_two</code> declares <code>int_one</code> as a <em>pointer to</em> an <code>int</code>, and <code>int_two</code> as an <code>int</code>-- <em>not</em> as a pointer type.</p>\n"}], "owner": {"reputation": 109, "user_id": 5495642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07034ee2d8f303a8898b03fcf4a41729?s=128&d=identicon&r=PG&f=1", "display_name": "Bearforce96", "link": "https://stackoverflow.com/users/5495642/bearforce96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 4, "score": 6, "last_activity_date": 1447279087, "creation_date": 1447278147, "last_edit_date": 1447279087, "question_id": 33660386, "link": "https://stackoverflow.com/questions/33660386/what-does-pointer-integer-do-in-c", "title": "What does &quot;*(pointer + integer)&quot; do in C++?", "body": "<p>I'm confused as to what a line of code does in this program:</p>\n\n<pre><code>int *temp = new int [cap];\nint num = 0;\n\nfor(int i = name; i &lt; number; i++)\n{\n *(temp + count) = *(foo + i);\n num++;\n}\n</code></pre>\n\n<p><code>name</code>, <code>number</code>, and <code>foo</code> are global variables (<code>foo</code> being a pointer),\nand <code>cap</code> is an argument.</p>\n\n<p>Specifically, I don't understand this line: </p>\n\n<pre><code> *(temp + count) = *(foo + i);\n</code></pre>\n\n<p>Why are there pointers to the parentheses, and what will this do?</p>\n"}, {"tags": ["c++", "templates", "metaprogramming"], "comments": [{"owner": {"reputation": 4531, "user_id": 4756309, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XMiQX.png?s=128&g=1", "display_name": "Weak to Enuma Elish", "link": "https://stackoverflow.com/users/4756309/weak-to-enuma-elish"}, "edited": false, "score": 0, "creation_date": 1447278849, "post_id": 33660319, "comment_id": 55094696, "body": "I&#39;m also in Visual Studio 2015 and this crashed my compiler. I&#39;m not surprised anymore."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1447286176, "post_id": 33660319, "comment_id": 55097737, "body": "This doesn&#39;t compile in Clang or GCC, which is unsurprising; at the time of instantiation of <code>FSM&lt;test&gt;</code>, <code>test</code> is an incomplete type, yet your <code>static_assert</code> inspects its members, which, of course, fails."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 2900055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/361f8dc34ad7acf62343f4a9bf4ecaf4?s=128&d=identicon&r=PG&f=1", "display_name": "shodanho", "link": "https://stackoverflow.com/users/2900055/shodanho"}, "is_accepted": false, "score": 0, "last_activity_date": 1447306043, "last_edit_date": 1447306043, "creation_date": 1447299126, "answer_id": 33663984, "question_id": 33660319, "link": "https://stackoverflow.com/questions/33660319/metaprogramming-member-checker-doesnt-work-with-function-members-returning-a-ty/33663984#33663984", "title": "Metaprogramming member checker doesn&#39;t work with function members returning a type with a base class", "body": "<p>Checkout: <a href=\"https://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Member_Detector\" rel=\"nofollow\">Member detector</a></p>\n\n<p>Here is some code to detect member functions:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n// single argument and return type\n#define DECL_hasMemberRetArg(MEMBER)                                          \\\ntemplate&lt;typename T, typename RESULT, typename ARG1&gt;                          \\\nclass Detect_RetArg_##MEMBER                                                  \\\n{                                                                             \\\n    template &lt;typename U, RESULT (U::*)(ARG1)&gt; struct Check;                  \\\n    template &lt;typename U&gt; static char func(Check&lt;U, &amp;U::MEMBER&gt; *);           \\\n    template &lt;typename U&gt; static int func(...);                               \\\n  public:                                                                     \\\n    typedef Detect_RetArg_##MEMBER type;                                      \\\n    enum { value = sizeof(func&lt;T&gt;(0)) == sizeof(char) };                      \\\n}\n\n// two arguments and return type\n#define DECL_hasMemberRetArgArg(MEMBER)                                       \\\ntemplate&lt;typename T, typename RESULT, typename ARG1, typename ARG2&gt;           \\\nclass Detect_RetArgArg_##MEMBER                                               \\\n{                                                                             \\\n    template &lt;typename U, RESULT (U::*)(ARG1, ARG2)&gt; struct Check;            \\\n    template &lt;typename U&gt; static char func(Check&lt;U, &amp;U::MEMBER&gt; *);           \\\n    template &lt;typename U&gt; static int func(...);                               \\\n  public:                                                                     \\\n    typedef Detect_RetArgArg_##MEMBER type;                                   \\\n    enum { value = sizeof(func&lt;T&gt;(0)) == sizeof(char) };                      \\\n}\n\nclass a_t\n{\n  char get(int);\n  char put(int,long);\n};\n\nstruct b_t\n{\n  char get(int);\n  char put(int,long);\n};\n\nstruct c_t : public b_t\n{\n};\n\nDECL_hasMemberRetArg(get);\nDECL_hasMemberRetArgArg(put);\n\nint main()\n{\n  std::cout &lt;&lt; Detect_RetArg_get&lt;a_t, char, int&gt;::value &lt;&lt; \"\\n\";          // 0\n  std::cout &lt;&lt; Detect_RetArgArg_put&lt;a_t, char, int, long&gt;::value &lt;&lt; \"\\n\"; // 0\n  std::cout &lt;&lt; Detect_RetArg_get&lt;b_t, char, int&gt;::value &lt;&lt; \"\\n\";          // 1\n  std::cout &lt;&lt; Detect_RetArgArg_put&lt;b_t, char, int, long&gt;::value &lt;&lt; \"\\n\"; // 1\n  std::cout &lt;&lt; Detect_RetArg_get&lt;c_t, char, int&gt;::value &lt;&lt; \"\\n\";          // 0\n  std::cout &lt;&lt; Detect_RetArgArg_put&lt;c_t, char, int, long&gt;::value &lt;&lt; \"\\n\"; // 0\n  return 0;\n}\n</code></pre>\n\n<p>The template cannot see the base class members.</p>\n"}], "owner": {"reputation": 151, "user_id": 2236926, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8711714409f4f900274e491b91f39e6b?s=128&d=identicon&r=PG", "display_name": "Baro", "link": "https://stackoverflow.com/users/2236926/baro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1447306043, "creation_date": 1447277903, "last_edit_date": 1447285647, "question_id": 33660319, "link": "https://stackoverflow.com/questions/33660319/metaprogramming-member-checker-doesnt-work-with-function-members-returning-a-ty", "title": "Metaprogramming member checker doesn&#39;t work with function members returning a type with a base class", "body": "<p>I have implemented a metaprogramming member checker like this:</p>\n\n<pre><code>//Declare a metaprogramming test to check if a class has a member\n//of a given signature and a certain name\n#define DECL_hasMember(MEMBER)                                                  \\\n/* Check if T has member MEMBER M is a pointer to member of T type (T::*) */    \\\ntemplate &lt;typename T, typename M&gt;                                               \\\nclass hasMember_##MEMBER {                                                      \\\n    private:                                                                    \\\n        typedef char passed[1];                                                 \\\n        typedef char failed[2];                                                 \\\n                                                                                \\\n        template &lt;typename U, U&gt; struct reallyHas;                              \\\n                                                                                \\\n        template &lt;typename C&gt; static passed&amp; test(reallyHas&lt;M, &amp;C::MEMBER&gt;*);   \\\n        template &lt;typename C&gt; static failed&amp; test(...);                         \\\n                                                                                \\\n        hasMember_##MEMBER()=delete;                                            \\\n    public:                                                                     \\\n        static bool const value = sizeof(test&lt;T&gt;(nullptr)) == sizeof(passed);   \\\n}\n</code></pre>\n\n<p>I've tested this in many situation and the checker works fine in most situations,</p>\n\n<p>Now I am implementing a Finite State Machine using the curiously recurring template pattern, which has a map associating states to functions of the derived class. I want this derived class to have a member called buildFSM, creating said map. I want to enforce this using static assert, to have nicer compiler errors. But the metaprogramming checker doesn't seem to be able to detect <code>desc_t</code></p>\n\n<p>(I've tried to replicate the situation in a simpler scenario for the sake of the question, but couldn't get it to fail in a different context)</p>\n\n<pre><code>DECL_hasMember(buildFSM);\n\ntemplate&lt;class Executor_T, typename State_T = uint32_t, typename ... Args&gt;\nclass FSM\n{\n    public:\n        typedef State_T state_t;\n        typedef FSM&lt;Executor_T, State_T, Args...&gt; fsm_t;\n\n    protected:\n        /* returns the next state */\n        typedef state_t (Executor_T::*handler_t)(Args...);\n        /* holds all the states */\n        struct desc_t : private std::map&lt;state_t, handler_t&gt; {\n            friend fsm_t;\n            void addState(const state_t&amp;, handler_t);\n\n            using std::map&lt;state_t, handler_t&gt;::size;\n            using std::map&lt;state_t, handler_t&gt;::empty;\n        };\n\n    private:\n        /* Implementation must implement buildFSM returning a desc_t that initializes this */\n        static desc_t states;\n\n        static_assert(hasMember_buildFSM&lt;Executor_T, desc_t(Executor_T::*)()&gt;::value,\n            \"Implementing class must provide desc_t buildFSM() function member.\");\n\n    /* [...] */\n};\n\n//Delegate the initialization of states to the derived class\ntemplate&lt;class E, typename S, typename ... A&gt;\ndecltype(FSM&lt;E, S, A...&gt;::states) FSM&lt;E, S, A...&gt;::states= std::move(E::buildFSM());\n\nstruct test : public FSM&lt;test&gt; {\n    fsm_t::desc_t buildFSM() {\n        return fsm_t::desc_t();\n    }\n};\n</code></pre>\n\n<p>As I said before, the static assert fails, i.e. it can't detect <code>test::buildFSM</code>. The problem is in <code>desc_t</code>, because if I change it to another type, the test passes just fine. If I modify <code>desc_t</code> so it doesn't derive <code>std::map</code>, the test also passes. Why does this happen? Is there anything I can do to make this work in this case? I know an alternative would be just having the map as a member instead of a base class, but I don't understand why this happens.</p>\n\n<p>I'm in Visual Studio 2015.</p>\n"}, {"tags": ["c++", "base", "ostream"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1447277775, "post_id": 33660245, "comment_id": 55094143, "body": "No, there is no support for other bases. You have to convert it to a string and output that."}, {"owner": {"reputation": 1526, "user_id": 2887128, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/55ee6a68a653f3a0ebee2329667c653f?s=128&d=identicon&r=PG", "display_name": "jaredready", "link": "https://stackoverflow.com/users/2887128/jaredready"}, "edited": false, "score": 4, "creation_date": 1447277775, "post_id": 33660245, "comment_id": 55094144, "body": "Not sure if this is possible using standard means. Looking at <a href=\"http://en.cppreference.com/w/cpp/io/manip/setbase\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/io/manip/setbase</a> - &quot;Values of base other than 8, 10, or 16 reset basefield to zero, which corresponds to decimal output and prefix-dependent input.&quot;"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1447277819, "post_id": 33660245, "comment_id": 55094167, "body": "Unless something I don&#39;t know about has been added very recently, there is no support for bases other than 8, 10, and 16 in iostreams.  You&#39;re going to have to read numbers as strings and decode them by hand."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1447279188, "post_id": 33660245, "comment_id": 55094852, "body": "<i>@jww</i> <i>&quot;And pages like C++ Reference on ios_base does not discuss what to use.&quot;</i> Use a <a href=\"http://en.cppreference.com/w/\" rel=\"nofollow noreferrer\">better reference</a>."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1447280163, "post_id": 33660245, "comment_id": 55095301, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 - Thanks. Unfortunately, <a href=\"http://en.cppreference.com/w/cpp/io/ios_base\" rel=\"nofollow noreferrer\">CPP Reference on ios_base</a> does not discuss what to use, either."}, {"owner": {"reputation": 1526, "user_id": 2887128, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/55ee6a68a653f3a0ebee2329667c653f?s=128&d=identicon&r=PG", "display_name": "jaredready", "link": "https://stackoverflow.com/users/2887128/jaredready"}, "edited": false, "score": 0, "creation_date": 1447340887, "post_id": 33660245, "comment_id": 55122117, "body": "@jww There isn&#39;t a standard way of doing this."}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1447278891, "post_id": 33660315, "comment_id": 55094710, "body": "Unfortunately the OP asks for the other way round. They&#39;ll need to provide their own IO-manipulator. Of course this implementation should yield a string representation confirming to what <code>stoi()</code>  is able to convert to a number again."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1447278915, "post_id": 33660315, "comment_id": 55094719, "body": "<code>setbase</code> does not appear to work as expected. From the cited page: <i>&quot;...Values of base other than 8, 10, or 16 reset basefield to zero, which corresponds to decimal output and prefix-dependent input.&quot;</i>"}, {"owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1447280852, "post_id": 33660315, "comment_id": 55095645, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6. Fixed my answer. Thanks for the heads up."}], "tags": [], "owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "is_accepted": false, "score": 0, "last_activity_date": 1447279839, "last_edit_date": 1495535235, "creation_date": 1447277885, "answer_id": 33660315, "question_id": 33660245, "link": "https://stackoverflow.com/questions/33660245/use-ostream-with-bases-other-than-8-10-and-16/33660315#33660315", "title": "Use ostream with bases other than 8, 10 and 16", "body": "<p>Replacing my answer since the direction was backwards. See <a href=\"http://www.cplusplus.com/reference/cstdlib/itoa/\" rel=\"nofollow noreferrer\" title=\"itoa\">itoa</a>. The documentation says that it is a non standard function. Since this is a non standard function, <a href=\"https://stackoverflow.com/questions/190229/where-is-the-itoa-function-in-linux\">stackoverflow</a> has some implementations in the page.</p>\n"}, {"tags": [], "owner": {"reputation": 1526, "user_id": 2887128, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/55ee6a68a653f3a0ebee2329667c653f?s=128&d=identicon&r=PG", "display_name": "jaredready", "link": "https://stackoverflow.com/users/2887128/jaredready"}, "is_accepted": false, "score": 4, "last_activity_date": 1447278932, "creation_date": 1447278932, "answer_id": 33660570, "question_id": 33660245, "link": "https://stackoverflow.com/questions/33660245/use-ostream-with-bases-other-than-8-10-and-16/33660570#33660570", "title": "Use ostream with bases other than 8, 10 and 16", "body": "<p>I don't think this is possible using standard means. Looking at <a href=\"http://en.cppreference.com/w/cpp/io/manip/setbase\" rel=\"nofollow\">std::setbase</a> </p>\n\n<blockquote>\n  <p>Values of base other than 8, 10, or 16 reset basefield to zero, which\n  corresponds to decimal output and prefix-dependent input.</p>\n</blockquote>\n"}], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 2, "score": 7, "last_activity_date": 1447279839, "creation_date": 1447277560, "question_id": 33660245, "link": "https://stackoverflow.com/questions/33660245/use-ostream-with-bases-other-than-8-10-and-16", "title": "Use ostream with bases other than 8, 10 and 16", "body": "<p>I have a polynomial class, and its natural representation is its coefficients. If a coefficient is set, then its a 1 for binomial basis, 1 or 2 for trinomial basis, etc. For example, in a binomial basis, X<sup>2</sup> + 1 is represented as 101; and in a trinomial basis, 2X<sup>2</sup> + 1 is represented as 201.</p>\n\n<p>The class provides an <code>operator&lt;&lt;</code> overload. Internally, the class represents the coefficients using an integral array. So I should be able to perform:</p>\n\n<pre><code>ostringstream oss;\nfor (size_t i=0; i&lt;v.size(); i++)\n   oss &lt;&lt; v[i];\n</code></pre>\n\n<p>The problem I am having is I don't know how to configure the ostream for bases other than 8, 10 and 16. <code>ios_base</code> provides <code>std::oct</code>, <code>std::dec</code> and <code>std::hex</code> for the popular bases, but I don't see what to use for the less frequently used bases. And pages like <a href=\"http://www.cplusplus.com/reference/ios/ios_base/?kw=ios_base\">C++ Reference on ios_base</a> does not discuss what to use.</p>\n\n<p>How do I use ostream with bases other than 8, 10 and 16?</p>\n"}, {"tags": ["php", "c++", "this", "dynamic-typing", "static-typing"], "comments": [{"owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "edited": false, "score": 0, "creation_date": 1447277850, "post_id": 33660214, "comment_id": 55094177, "body": "In C++ <code>this</code> is a pointer to class, so if you define class and <code>setHealth</code> as method of this class you can use <code>this-&gt;health = h;</code>, but this can be skiped"}, {"owner": {"reputation": 7392, "user_id": 1555823, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2b69fc6d16ff23e3509b2f3602838acd?s=128&d=identicon&r=PG", "display_name": "vladon", "link": "https://stackoverflow.com/users/1555823/vladon"}, "edited": false, "score": 0, "creation_date": 1447277950, "post_id": 33660214, "comment_id": 55094231, "body": "BTW, Perl, Python, Javascript and may be some other <i>scripting</i> languages also has the requirement to use <code>this</code> (or <code>self</code>). I think it was made for parser speed."}, {"owner": {"reputation": 822, "user_id": 1135771, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bf6729adaf5dd05bc0312b885c9d0e5f?s=128&d=identicon&r=PG", "display_name": "Dracony", "link": "https://stackoverflow.com/users/1135771/dracony"}, "edited": false, "score": 0, "creation_date": 1447278128, "post_id": 33660214, "comment_id": 55094323, "body": "This has been addressed to some extent here: <a href=\"http://stackoverflow.com/questions/912312/why-is-the-usage-of-this-in-php-necessary-when-referencing-methods-or-variables\" title=\"why is the usage of this in php necessary when referencing methods or variables\">stackoverflow.com/questions/912312/&hellip;</a>"}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1447278285, "post_id": 33660214, "comment_id": 55094408, "body": "Even some C++ programmers use the <code>var_</code> notation for member variables. It makes the code easier to read (for humans, that is, the compiler doesn&#39;t care)."}], "answers": [{"tags": [], "owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "is_accepted": true, "score": 7, "last_activity_date": 1447277812, "creation_date": 1447277812, "answer_id": 33660292, "question_id": 33660214, "link": "https://stackoverflow.com/questions/33660214/usage-of-this-in-c-php-other-languages/33660292#33660292", "title": "Usage of this in C++, PHP, other languages", "body": "<p>C++ has static typing and requires declarations. The compiler can easily figure out what the name (<code>health</code>) refers to.</p>\n\n<p>In PHP, OTOH, <code>$health = $h;</code> would be ambiguous. Is that a local variable or class member variable? Remember, you can add properties to objects on the fly, so checking what properties the class declares is not enough.</p>\n"}], "owner": {"reputation": 6902, "user_id": 2883328, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0b555effc09e0126d8b880f7d2956c1c?s=128&d=identicon&r=PG", "display_name": "Dennis", "link": "https://stackoverflow.com/users/2883328/dennis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 1, "accepted_answer_id": 33660292, "answer_count": 1, "score": 0, "last_activity_date": 1447277936, "creation_date": 1447277441, "last_edit_date": 1447277936, "question_id": 33660214, "link": "https://stackoverflow.com/questions/33660214/usage-of-this-in-c-php-other-languages", "title": "Usage of this in C++, PHP, other languages", "body": "<p>Why can internal class variables in C++ use <code>this</code>, but do not have to, while internal PHP class properties <em>must</em> use <code>$this-&gt;</code>?</p>\n\n<p>Example C++ (can use <code>this</code>, but doesn't have to)</p>\n\n<pre><code>void setHealth(int h)\n{\n    health = h;\n}\n</code></pre>\n\n<p>Example PHP (must use <code>$this-&gt;</code>)</p>\n\n<pre><code>public function setHealth($h)\n{\n    $this-&gt;health = $h;\n}\n</code></pre>\n\n<p>Are there any pros/cons to requiring <code>$this-&gt;</code> in PHP?  I can see that it clarifies beyond doubt that the variable does belong to this particular class instance opposed to possibly being a local scoped variable, but C++ manages just fine without this requirement  . . . </p>\n"}, {"tags": ["c++", "if-statement", "struct", "int"], "comments": [{"owner": {"reputation": 1253974, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "edited": false, "score": 5, "creation_date": 1447277312, "post_id": 33660172, "comment_id": 55093919, "body": "Well, <code>pCommandPts - tempChar.commandValue</code> is 6-3, which is 3, which isn&#39;t less than or equal to 0. The overall condition only evaluates to true if both the left and right operands of the <code>&amp;&amp;</code> operator are true. Why would you expect it to evaluate to true?"}, {"owner": {"reputation": 87, "user_id": 1317862, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/vDtth.jpg?s=128&g=1", "display_name": "Enchanter", "link": "https://stackoverflow.com/users/1317862/enchanter"}, "reply_to_user": {"reputation": 1253974, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "edited": false, "score": 0, "creation_date": 1447281647, "post_id": 33660172, "comment_id": 55096058, "body": "@Jon Skeet - of course it isn&#39;t thank you for pointing out the error - must be going as blind as a bat."}], "answers": [{"tags": [], "owner": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "is_accepted": false, "score": 2, "last_activity_date": 1447277366, "creation_date": 1447277366, "answer_id": 33660196, "question_id": 33660172, "link": "https://stackoverflow.com/questions/33660172/if-statement-logic-error/33660196#33660196", "title": "If statement logic error", "body": "<p>Left part of this expression is true in case of <code>6</code> and <code>3</code>, but <code>6-3</code> is not lower or equal to zero</p>\n\n<p><code>&amp;&amp; ((pCommandPts - tempChar.commandValue)&lt;=0))</code></p>\n"}, {"tags": [], "owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "is_accepted": false, "score": 2, "last_activity_date": 1447278542, "creation_date": 1447278542, "answer_id": 33660476, "question_id": 33660172, "link": "https://stackoverflow.com/questions/33660172/if-statement-logic-error/33660476#33660476", "title": "If statement logic error", "body": "<p>That code makes no sense, and it's almost certainly a bug.</p>\n\n<p>If you rearrange the inequalities, you get:</p>\n\n<pre><code> a &gt;= b &amp;&amp; a &lt;= b\n</code></pre>\n\n<p>Which is only true if <code>a == b</code>, which is not true for your case <code>6 != 3</code></p>\n"}], "owner": {"reputation": 87, "user_id": 1317862, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/vDtth.jpg?s=128&g=1", "display_name": "Enchanter", "link": "https://stackoverflow.com/users/1317862/enchanter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1447278542, "creation_date": 1447277203, "question_id": 33660172, "link": "https://stackoverflow.com/questions/33660172/if-statement-logic-error", "title": "If statement logic error", "body": "<pre><code>if ((pCommandPts&gt;=tempChar.commandValue) &amp;&amp; ((pCommandPts - tempChar.commandValue)&lt;=0))\n</code></pre>\n\n<p>If pCommandPts is an int with the value 6 and tempChar.commandValue is an int with the value 3, why would this statement evaluate to false?</p>\n"}, {"tags": ["c++", "c", "visual-studio", "visual-studio-2015", "mpi"], "comments": [{"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 3, "creation_date": 1447277343, "post_id": 33660147, "comment_id": 55093940, "body": "OpenMP support isn&#39;t necessary for MPI. From your error list (specifically, the first warning), it looks like you provided the path to the 64-bit MPI library, while you are compiling for a 32-bit architecture. Either provide it the 32-bit library, or compile for a 64-bit architecture."}, {"owner": {"reputation": 2157, "user_id": 3865653, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Fv3Fj.jpg?s=128&g=1", "display_name": "Deanie", "link": "https://stackoverflow.com/users/3865653/deanie"}, "edited": false, "score": 0, "creation_date": 1447277918, "post_id": 33660147, "comment_id": 55094213, "body": "&#39;I wrote mpi.lib and in C/C++/Language&#39;.  What programming language is called &#39;Language&#39;?"}, {"owner": {"reputation": 1398, "user_id": 5175197, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0958c29d6df22ae886fc18962e42d532?s=128&d=identicon&r=PG", "display_name": "kostyabakay", "link": "https://stackoverflow.com/users/5175197/kostyabakay"}, "reply_to_user": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1447278182, "post_id": 33660147, "comment_id": 55094357, "body": "@R_Kapp thanks, it helped me. Write this in answer and I will choose this for a solution."}, {"owner": {"reputation": 1398, "user_id": 5175197, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0958c29d6df22ae886fc18962e42d532?s=128&d=identicon&r=PG", "display_name": "kostyabakay", "link": "https://stackoverflow.com/users/5175197/kostyabakay"}, "reply_to_user": {"reputation": 2157, "user_id": 3865653, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Fv3Fj.jpg?s=128&g=1", "display_name": "Deanie", "link": "https://stackoverflow.com/users/3865653/deanie"}, "edited": false, "score": 0, "creation_date": 1447278233, "post_id": 33660147, "comment_id": 55094388, "body": "@Deanie it is the name of directory in properties."}], "answers": [{"tags": [], "owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "is_accepted": true, "score": 3, "last_activity_date": 1447278266, "creation_date": 1447278266, "answer_id": 33660414, "question_id": 33660147, "link": "https://stackoverflow.com/questions/33660147/why-mpi-doesnt-work-in-visual-studio-2015/33660414#33660414", "title": "Why MPI doesn&#39;t work in Visual Studio 2015?", "body": "<p>Your first (and only) warning states that you are linking a 64-bit library with a 32-bit build. You need to either provide a 32-bit library or build for a 64-bit architecture to get rid of the linker errors.</p>\n"}], "owner": {"reputation": 1398, "user_id": 5175197, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0958c29d6df22ae886fc18962e42d532?s=128&d=identicon&r=PG", "display_name": "kostyabakay", "link": "https://stackoverflow.com/users/5175197/kostyabakay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2638, "favorite_count": 1, "accepted_answer_id": 33660414, "answer_count": 1, "score": 1, "last_activity_date": 1447278266, "creation_date": 1447277084, "question_id": 33660147, "link": "https://stackoverflow.com/questions/33660147/why-mpi-doesnt-work-in-visual-studio-2015", "title": "Why MPI doesn&#39;t work in Visual Studio 2015?", "body": "<p>I downloaded and installed <code>mpich2-1.0.8p1-win-x86-64.msi</code> from the console with the administrator rights. I created empty win32 console project, I created file code.cpp and I pasted this example code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"mpi.h\"\nint main(int argc, char* argv[])\n{\n    int ProcNum, ProcRank, RecvRank;\n    MPI_Status Status;\n    MPI_Init(&amp;argc, &amp;argv);\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;ProcNum);\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;ProcRank);\n    if (ProcRank == 0)\n    { \n            printf(\"\\n Hello from process %3d\", ProcRank);\n        for (int i = 1; i &lt; ProcNum; i++)\n        {\n            MPI_Recv(&amp;RecvRank, 1, MPI_INT, MPI_ANY_SOURCE,\n                MPI_ANY_TAG, MPI_COMM_WORLD, &amp;Status);\n            printf(\"\\n Hello from process %3d\", RecvRank);\n        }\n    }\n    else\n        MPI_Send(&amp;ProcRank, 1, MPI_INT, 0, 0, MPI_COMM_WORLD);\n    MPI_Finalize();\n    return 0;\n}\n</code></pre>\n\n<p>Later I went to project properties to VC++ Directories and added include directories and library directories. In Linker/Input/Additional Dependencies I wrote mpi.lib and in C/C++/Language I allowed Open MP Support. When I compiled my project I have got strange errors. Can you help me? I can't understand what I made wrong, because I did it with tutorials.</p>\n\n<p><a href=\"https://i.stack.imgur.com/0yPuC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0yPuC.png\" alt=\"errors\"></a></p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "is_accepted": false, "score": 0, "last_activity_date": 1447278870, "last_edit_date": 1495540742, "creation_date": 1447276665, "answer_id": 33660040, "question_id": 33659984, "link": "https://stackoverflow.com/questions/33659984/parsing-c-string/33660040#33660040", "title": "Parsing C++ String", "body": "<p>All you need to do is to split your string. Here's an <a href=\"https://stackoverflow.com/questions/236129/split-a-string-in-c\">example</a>.</p>\n\n<p>Then, having a vector with fixed size (compare its length it to validate your string) you only need to get ints or doubles with <code>std</code> functions:</p>\n\n<ul>\n<li>stod</li>\n<li>stoi</li>\n<li>stof</li>\n</ul>\n\n<p>Defined in <code>&lt;string&gt;</code> header.</p>\n"}], "owner": {"reputation": 105, "user_id": 3268054, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5db11543ffa70b3fd2a3d8d0104e06ce?s=128&d=identicon&r=PG&f=1", "display_name": "user3268054", "link": "https://stackoverflow.com/users/3268054/user3268054"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "closed_date": 1447276820, "answer_count": 1, "score": 0, "last_activity_date": 1447278870, "creation_date": 1447276476, "question_id": 33659984, "link": "https://stackoverflow.com/questions/33659984/parsing-c-string", "closed_reason": "Duplicate", "title": "Parsing C++ String", "body": "<p>I'm attempting to parse data from a exported text file from a database. I want to extract the data from the string and run a algorithm on it. I first tried using sscanf since that is what I'm familiar with, even though it probably isn't the best choice. Any help would be very much appreciated. I was getting very confused with some of the information I found online, for example the Boost Library. Here is just one row of data I'm attempting to parse. Ask any questions you need to, thanks.</p>\n\n<pre><code>1;3;8;\"Fitted 1MX Stretch Cotton Shirt\";\"Berry\";59.9;\"http://www.express.com/clothing/men/fitted-1mx-stretch-cotton-shirt/pro/0303885/cat1390003\"\n</code></pre>\n\n<p>Here is the order of the data, with data types (if important) and the semicolon is a delimiter.</p>\n\n<pre><code>int;int;int;string;string;double;string\n</code></pre>\n"}, {"tags": ["c++", "compiler-errors", "linker", "visual-studio-2015", "freeglut"], "comments": [{"owner": {"reputation": 2387, "user_id": 3818191, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aca92340c2b2e2bb08aeb1441914e929?s=128&d=identicon&r=PG&f=1", "display_name": "JCx", "link": "https://stackoverflow.com/users/3818191/jcx"}, "edited": false, "score": 0, "creation_date": 1447276441, "post_id": 33659878, "comment_id": 55093473, "body": "<a href=\"http://siomsystems.com/mixing-visual-studio-versions/\" rel=\"nofollow noreferrer\">siomsystems.com/mixing-visual-studio-versions</a> Does this help?  It&#39;s too long to repeat here :)"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 5, "creation_date": 1447276685, "post_id": 33659878, "comment_id": 55093602, "body": "This is the way VC++ works - brand new libraries for each new release."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1447277575, "post_id": 33659878, "comment_id": 55094039, "body": "Linking code that was built with an old version of the compiler&#39;s .h files and C++ standard library to the new version of the runtime code is a pretty risky proposition..  Especially of late with C++11, 14 and 17 design changes.  Might work, might not and produce truly baffling memory corruption errors.  The MSVC++ compiler has a 1-800 support phone number.  If you ask the people that pick up that phone which is better, &quot;force them to recompile or take the risk?&quot;, they always have the same answer.  Which inspired the _MSC_VER checks.  You can defeat them but it is little late now :)"}, {"owner": {"reputation": 185, "user_id": 4245328, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dpnX0SPE9lc/AAAAAAAAAAI/AAAAAAAAACY/Uuy5RhJWSk4/photo.jpg?sz=128", "display_name": "John Cox", "link": "https://stackoverflow.com/users/4245328/john-cox"}, "edited": false, "score": 0, "creation_date": 1447277742, "post_id": 33659878, "comment_id": 55094130, "body": "New libraries for each release?  I don&#39;t remember having to recompile the glsdk for VS 2013.  Must have forgotten."}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 9308909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c506f7c25c26a2af2ce848f38f28994b?s=128&d=identicon&r=PG&f=1", "display_name": "Radical Ed", "link": "https://stackoverflow.com/users/9308909/radical-ed"}, "edited": false, "score": 1, "creation_date": 1594793380, "post_id": 33662021, "comment_id": 111246636, "body": "The link migrated <a href=\"https://devblogs.microsoft.com/cppblog/introducing-the-universal-crt/\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "reply_to_user": {"reputation": 123, "user_id": 9308909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c506f7c25c26a2af2ce848f38f28994b?s=128&d=identicon&r=PG&f=1", "display_name": "Radical Ed", "link": "https://stackoverflow.com/users/9308909/radical-ed"}, "edited": false, "score": 0, "creation_date": 1594911142, "post_id": 33662021, "comment_id": 111298362, "body": "@RadicalEd:  Thanks!  I&#39;ve updated the link in the post."}], "tags": [], "owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "is_accepted": false, "score": 2, "last_activity_date": 1594911128, "last_edit_date": 1594911128, "creation_date": 1447285735, "answer_id": 33662021, "question_id": 33659878, "link": "https://stackoverflow.com/questions/33659878/visual-studio-2015-v120-vs-v140/33662021#33662021", "title": "Visual Studio 2015: v120 vs v140?", "body": "<p>Historically, Visual C++ has broken binary compatibility between the run-time libraries at each major version.  This provides some freedom to improve implementations without being constrained by the ABIs of previous versions.</p>\n<p>Starting with Visual C++ 2015, however, they've re-architected the run-time libraries in a way that should allow them to provide compatibility going forward, but this doesn't solve the problem going backwards.</p>\n<p>See this <a href=\"https://devblogs.microsoft.com/cppblog/introducing-the-universal-crt/\" rel=\"nofollow noreferrer\">blog post</a> and the few follow-ups they've posted about the &quot;Universal CRT.&quot;</p>\n"}], "owner": {"reputation": 185, "user_id": 4245328, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dpnX0SPE9lc/AAAAAAAAAAI/AAAAAAAAACY/Uuy5RhJWSk4/photo.jpg?sz=128", "display_name": "John Cox", "link": "https://stackoverflow.com/users/4245328/john-cox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8657, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1594911128, "creation_date": 1447276103, "question_id": 33659878, "link": "https://stackoverflow.com/questions/33659878/visual-studio-2015-v120-vs-v140", "title": "Visual Studio 2015: v120 vs v140?", "body": "<p>FYI: Win10, x64</p>\n\n<p>I started trying out Visual Studio 2015 today, and after figuring out how to get the C/C++ parts running I tried to load up a big personal project that uses the <a href=\"http://glsdk.sourceforge.net/docs/html/index.html\" rel=\"noreferrer\">unofficial glsdk</a>.  I tried to build and got linker errors.  It complained about unresolved external symbols being referenced in freeglutD.lib, glloadD.lib, and glutil.lib.  It also complained about _MSC_VER mismatches in my own files.  </p>\n\n<p>I did some research online, messed around with 2013 and compiler versions (project properties -> General -> Platform Toolset)) - v120 for 2013 and v140 for 2015 - and was able to rebuild glsdk with v140 (excluding glmesh due to a missing file).  Then...it worked fine.</p>\n\n<p><strong>Question:</strong> Why is this?  I thought that a static lib file created by a standard-compliant compiler would work with other versions of a standard-compliant compiler (in this case, C/C++ on v120 and C/C++ on v140).  But apparently v140 would not play ball with libraries made by a previous compiler.</p>\n\n<p>If this is just the dark lands of VS build routines, then I can drop the question, but I'd also like to know why they don't work together.</p>\n"}, {"tags": ["c++", "c++11", "visual-c++", "c++14"], "comments": [{"owner": {"reputation": 326282, "user_id": 151292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/AQNZx.jpg?s=128&g=1", "display_name": "James McNellis", "link": "https://stackoverflow.com/users/151292/james-mcnellis"}, "edited": false, "score": 0, "creation_date": 1447289511, "post_id": 33659846, "comment_id": 55098714, "body": "I don&#39;t think they are all documented."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1447353646, "post_id": 33659846, "comment_id": 55130761, "body": "Not sure if you know but the type of an integer constant with the <code>i8</code> suffix is <code>__int8</code> aka <code>char</code> and not <code>signed char</code> as one might assume."}], "answers": [{"tags": [], "owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "is_accepted": false, "score": 2, "last_activity_date": 1447351872, "creation_date": 1447351872, "answer_id": 33678372, "question_id": 33659846, "link": "https://stackoverflow.com/questions/33659846/microsoft-integer-literal-extensions-where-documented/33678372#33678372", "title": "Microsoft Integer Literal Extensions -- Where documented?", "body": "<p>i64 and ui64 were documented in older VC++ versions under \"C++ Integer Constants\" for example <a href=\"https://msdn.microsoft.com/en-us/library/00a1awxf(v=vs.120).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/00a1awxf(v=vs.120).aspx</a>. They are still documented in the latest VC++ 2015 but explicitly advised against for being Microsoft specific and not portable <a href=\"https://msdn.microsoft.com/en-us/library/c70dax92.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/c70dax92.aspx</a>.</p>\n\n<blockquote>\n  <p>To specify a 64-bit integral type, use the LL, or ll suffix. The i64 suffix is still supported but should be avoided because it is specific to Microsoft and is not portable.</p>\n</blockquote>\n\n<p>I don't think the others were ever documented at all, and it's probably not a good idea to use them anyway.</p>\n"}, {"tags": [], "owner": {"reputation": 469, "user_id": 318991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rsOP6.jpg?s=128&g=1", "display_name": "Andreas ZUERCHER", "link": "https://stackoverflow.com/users/318991/andreas-zuercher"}, "is_accepted": false, "score": 3, "last_activity_date": 1523379196, "last_edit_date": 1523379196, "creation_date": 1523304727, "answer_id": 49740965, "question_id": 33659846, "link": "https://stackoverflow.com/questions/33659846/microsoft-integer-literal-extensions-where-documented/49740965#49740965", "title": "Microsoft Integer Literal Extensions -- Where documented?", "body": "<p>If these intrinsic Microsoft-originated literal suffixes were ever to be eliminated due to deprecation or otherwise, then you can write your own exact replacements of each one of them via the user-defined literals of C++11:  <a href=\"http://en.cppReference.com/w/cpp/language/user_literal\" rel=\"nofollow noreferrer\">http://en.cppReference.com/w/cpp/language/user_literal</a></p>\n\n<p>For example:</p>\n\n<pre><code>constexpr uint16_t\n  operator\"\" ui16 ( uint16_t literal_ )\n  noexcept\n  {\n  return literal_;\n  }\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 3150087, "user_type": "registered", "profile_image": "https://graph.facebook.com/654561985/picture?type=large", "display_name": "Carey Gister", "link": "https://stackoverflow.com/users/3150087/carey-gister"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1088, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1523379196, "creation_date": 1447275991, "question_id": 33659846, "link": "https://stackoverflow.com/questions/33659846/microsoft-integer-literal-extensions-where-documented", "title": "Microsoft Integer Literal Extensions -- Where documented?", "body": "<p>I came across some integer literals in the standard stdint.h header file on a Windows installation.  The literals had suffixes of the form:</p>\n\n<p>i8, ui8, i16, ui16, i32, ui32, i64, ui64.</p>\n\n<p>I have previously encountered suffixes of the form i64 but never any of the others.  I was curious as to where these extensions are documented.  I spent some time looking through the Microsoft documentation along with other documentation and could not find them.</p>\n\n<p>This is strictly a matter of curiosity.  I am clear what the suffixes mean.  If any one has a link to the documentation I would appreciate it if you shared the reference.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 1902, "user_id": 21656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40f8d096a3777232204cb3f796c577b7?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/21656/george"}, "edited": false, "score": 1, "creation_date": 1447275873, "post_id": 33659794, "comment_id": 55093163, "body": "I don&#39;t know of one, but you have the name of the data type spelled wrong. In C++, it is vector&lt;int&gt;, not Vector&lt;int&gt;. I don&#39;t know if Vector&lt;int&gt; is correct in Java or not."}, {"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "edited": false, "score": 0, "creation_date": 1447276218, "post_id": 33659794, "comment_id": 55093357, "body": "I love the way wclipse is doing it with Java, but C/C++ is bit sifferent and I think you better include it yourself?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1447276225, "post_id": 33659794, "comment_id": 55093363, "body": "I do not know any tool that does that, and you are the first one I hear asking for it. So I guess so far people would rather just include the couple of headers they need than writing and mantaining a tool that does it for them. Maybe there are correctness concerns, C++ is not that easy to parse."}, {"owner": {"reputation": 3301, "user_id": 234946, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6af8b76e0ae95edd533cf3a57e4294f8?s=128&d=identicon&r=PG", "display_name": "Olipro", "link": "https://stackoverflow.com/users/234946/olipro"}, "reply_to_user": {"reputation": 1902, "user_id": 21656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40f8d096a3777232204cb3f796c577b7?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/21656/george"}, "edited": false, "score": 0, "creation_date": 1447280893, "post_id": 33659794, "comment_id": 55095664, "body": "@George <code>Vector&lt;int&gt;</code> is invalid at least up to Java 9 because you can&#39;t use primitives in generics."}, {"owner": {"reputation": 8160, "user_id": 1035613, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b4d6ce44848765d7b02e4309c9efe9bb?s=128&d=identicon&r=PG", "display_name": "Dmitry Sazonov", "link": "https://stackoverflow.com/users/1035613/dmitry-sazonov"}, "edited": false, "score": 0, "creation_date": 1447317018, "post_id": 33659794, "comment_id": 55107329, "body": "Use MSVS + ReSharper"}], "answers": [{"tags": [], "owner": {"reputation": 104, "user_id": 3681093, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000861613408/picture?type=large", "display_name": "Martin Dendis", "link": "https://stackoverflow.com/users/3681093/martin-dendis"}, "is_accepted": false, "score": 0, "last_activity_date": 1447277825, "creation_date": 1447277825, "answer_id": 33660297, "question_id": 33659794, "link": "https://stackoverflow.com/questions/33659794/auto-include-needed-c-headers-ide/33660297#33660297", "title": "Auto-Include needed C++ headers IDE?", "body": "<p>I'm using NetBeans IDE, which can handle C/C++, PHP, Java, ....</p>\n\n<p>It has autocomplete for writing functions / included headers etc.</p>\n\n<p>Allso it can sometimes automatically add appropriate headers, if I use autocomplete when writing a function name, but still, it's better to define needed header files manually. ;)</p>\n"}, {"comments": [{"owner": {"reputation": 3295, "user_id": 4743275, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7f8p3.jpg?s=128&g=1", "display_name": "KeyC0de", "link": "https://stackoverflow.com/users/4743275/keyc0de"}, "edited": false, "score": 0, "creation_date": 1609800145, "post_id": 33660831, "comment_id": 115931245, "body": "No VisualAssist does not offer this feature."}], "tags": [], "owner": {"reputation": 1526, "user_id": 2887128, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/55ee6a68a653f3a0ebee2329667c653f?s=128&d=identicon&r=PG", "display_name": "jaredready", "link": "https://stackoverflow.com/users/2887128/jaredready"}, "is_accepted": false, "score": 0, "last_activity_date": 1447279920, "creation_date": 1447279920, "answer_id": 33660831, "question_id": 33659794, "link": "https://stackoverflow.com/questions/33659794/auto-include-needed-c-headers-ide/33660831#33660831", "title": "Auto-Include needed C++ headers IDE?", "body": "<p>Most C++ IDEs don't provide this (though I <em>believe</em> <a href=\"http://www.wholetomato.com/\" rel=\"nofollow\">VisualAssist</a> for Visual Studio does). As people have said, C++ is not the nicest language to parse which makes this a little more challenging.</p>\n\n<p>Typically C++ folks just know what headers they need to include :)</p>\n"}, {"tags": [], "owner": {"reputation": 3301, "user_id": 234946, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6af8b76e0ae95edd533cf3a57e4294f8?s=128&d=identicon&r=PG", "display_name": "Olipro", "link": "https://stackoverflow.com/users/234946/olipro"}, "is_accepted": true, "score": 0, "last_activity_date": 1447280918, "creation_date": 1447280918, "answer_id": 33661066, "question_id": 33659794, "link": "https://stackoverflow.com/questions/33659794/auto-include-needed-c-headers-ide/33661066#33661066", "title": "Auto-Include needed C++ headers IDE?", "body": "<p>What you can do to automate this is going to vary by IDE. However, what you <em>can</em> do universally is Google search for say, <code>std::vector</code> and practically any result is going to include the name of the header you need.</p>\n\n<p>Of course, in these days of precompiled headers, it's not unheard of to blanket <code>#include</code> a wide-range of common STL stuff even if your project doesn't currently use it.</p>\n\n<p>On a related note: for your example, auto-addition is potentially ambiguous since you didn't specify the <code>std</code> namespace.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3046287"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3241, "favorite_count": 1, "closed_date": 1448274785, "accepted_answer_id": 33661066, "answer_count": 3, "score": 5, "last_activity_date": 1447280918, "creation_date": 1447275790, "last_edit_date": 1447276267, "question_id": 33659794, "link": "https://stackoverflow.com/questions/33659794/auto-include-needed-c-headers-ide", "closed_reason": "Not suitable for this site", "title": "Auto-Include needed C++ headers IDE?", "body": "<p>I'm a Java Eclipse user as well as a Qt Creator IDE user. </p>\n\n<p>In Eclipse IDE for Java, when I type this line for example :</p>\n\n<pre><code>Vector&lt;int&gt; v = new Vector&lt;int&gt;();\n</code></pre>\n\n<p>it automatically generate this line at the top of the code :</p>\n\n<pre><code>import java.util.Vector;\n</code></pre>\n\n<h2>Question :</h2>\n\n<p>Is there a C++ IDE or a plug-in for the Qt IDE that generates for example this line :</p>\n\n<pre><code>#include &lt;vector&gt;\n</code></pre>\n\n<p>after I type :</p>\n\n<pre><code>vector&lt;int&gt; v;\n</code></pre>\n"}, {"tags": ["c++", "function", "loops", "if-statement", "while-loop"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1447276450, "post_id": 33659744, "comment_id": 55093478, "body": "In addition to the input, you should review your <code>if</code>-conditions and make sure you don&#39;t use <code>=</code> when meaning <code>==</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1447304083, "post_id": 33659744, "comment_id": 55102717, "body": "Did you mean <code>linear(...</code> to be inside the <code>{ }</code> ? As you have it, the loop body is just that call to <code>linear</code>; and then the <code>{</code> starts a new block that is unrelated to the loop"}], "answers": [{"tags": [], "owner": {"reputation": 6529, "user_id": 4252320, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh3.googleusercontent.com/-_DAs7Dtci9U/AAAAAAAAAAI/AAAAAAAAIf8/96ZNJAUF2Xk/photo.jpg?sz=128", "display_name": "ergonaut", "link": "https://stackoverflow.com/users/4252320/ergonaut"}, "is_accepted": false, "score": 1, "last_activity_date": 1447275886, "creation_date": 1447275886, "answer_id": 33659817, "question_id": 33659744, "link": "https://stackoverflow.com/questions/33659744/while-loop-and-if-statements-and-functions/33659817#33659817", "title": "While Loop and If Statements and functions", "body": "<p>You can but multiple conditions in your while loop:</p>\n\n<pre><code>answer = 'y';\nwhile(answer != 'N' &amp;&amp; answer != 'n'){\n    cout &lt;&lt; \"\\n Do you want to continue?\";\n    cin &gt;&gt; answer;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3238, "user_id": 3042438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b930cad6b909cf6546dfe29bdeb8af88?s=128&d=identicon&r=PG&f=1", "display_name": "SunKnight0", "link": "https://stackoverflow.com/users/3042438/sunknight0"}, "is_accepted": false, "score": 1, "last_activity_date": 1447278009, "last_edit_date": 1447278009, "creation_date": 1447276039, "answer_id": 33659865, "question_id": 33659744, "link": "https://stackoverflow.com/questions/33659744/while-loop-and-if-statements-and-functions/33659865#33659865", "title": "While Loop and If Statements and functions", "body": "<pre><code>do {\n    // do stuff\n    cout &lt;&lt; \"\\n Do you want to continue?\";\n    cin &gt;&gt; answer;\n} while (answer!='N' &amp;&amp; answer!='n');\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 5498489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2887522d5b3f508540a7004a91ea1d13?s=128&d=identicon&r=PG&f=1", "display_name": "MrJsian", "link": "https://stackoverflow.com/users/5498489/mrjsian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1447302850, "creation_date": 1447275623, "last_edit_date": 1447302850, "question_id": 33659744, "link": "https://stackoverflow.com/questions/33659744/while-loop-and-if-statements-and-functions", "title": "While Loop and If Statements and functions", "body": "<p>I don't know how to continue the loop indefinitely by only closing when I hit 'n' or 'N'... Once I put anything it eventually closes so how do I get back into the loop?</p>\n\n<pre><code>int counter = 5;\nwhile(counter &gt; 1)\nlinear(xcoordinateone, xcoordinatetwo, ycoordinateone, ycoordinatetwo, slope, intercept); //calling\n{\ncout&lt;&lt;\"The points you entered define the function: y = \" &lt;&lt; slope &lt;&lt; xone &lt;&lt; \"+\" &lt;&lt; intercept;\ncout &lt;&lt; \"\\n Do you want to continue?\";\nif (answer == 'N' || answer == 'n');    \n    cin &gt;&gt; answer;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "matrix", "vector"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1447275606, "post_id": 33659686, "comment_id": 55093024, "body": "Maybe that&#39;s happening, because you failed to initialize <code>array2</code>, AND <code>array</code>, and, in the constructor, you are dereferencing pointers that point to nowhere (have garbage values)?"}, {"owner": {"reputation": 287, "user_id": 5522440, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/369e27f0b52f64f664954b7761e90325?s=128&d=identicon&r=PG&f=1", "display_name": "Madz", "link": "https://stackoverflow.com/users/5522440/madz"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1447275653, "post_id": 33659686, "comment_id": 55093056, "body": "garbage values ? Sorry i don&#39;t know what is &quot;dereferencing pointers&quot;"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1447275797, "post_id": 33659686, "comment_id": 55093130, "body": "<code>array2</code> isn&#39;t pointing anywhere and you try to <code>push_back</code> what it&#39;s pointing to (which is garbage). EDIT: Same for <code>array</code>"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1447275872, "post_id": 33659686, "comment_id": 55093162, "body": "Garbage values = values that don&#39;t mean anything, but just happened to sit at the memory where the variable is located. Dereferencing pointers = taking the value that is sitting at the memory location pointed to, by a pointer."}, {"owner": {"reputation": 287, "user_id": 5522440, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/369e27f0b52f64f664954b7761e90325?s=128&d=identicon&r=PG&f=1", "display_name": "Madz", "link": "https://stackoverflow.com/users/5522440/madz"}, "edited": false, "score": 0, "creation_date": 1447275990, "post_id": 33659686, "comment_id": 55093218, "body": "After doing <code>std::vector&lt;int&gt; array2;</code> and <code>array-&gt;push_back(array2);</code> , it&#39;s still crashing"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1447276015, "post_id": 33659686, "comment_id": 55093236, "body": "@JohnnyMopp Well, from what I understood it&#39;s more like &quot;What are pointers, and what do I do with them?&quot; kind of question, rather than 2D <code>std::vector</code> kind of question."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1447276067, "post_id": 33659686, "comment_id": 55093263, "body": "@Madz That&#39;s because <code>array</code> has the same problem. And you are dereferencing it with <code>-&gt;</code> operator. <code>a-&gt;b</code> is equivalent to <code>(*a).b</code>."}, {"owner": {"reputation": 287, "user_id": 5522440, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/369e27f0b52f64f664954b7761e90325?s=128&d=identicon&r=PG&f=1", "display_name": "Madz", "link": "https://stackoverflow.com/users/5522440/madz"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1447276157, "post_id": 33659686, "comment_id": 55093314, "body": "@Algirdas Preid\u017eius Aaah, sorry i&#39;m new to stackoverflow. But i followed a code sample and i don&#39;t know why it&#39;s not going well so i couldn&#39;t precisely put labels. Just saw your answer, i&#39;m really sorry, i don&#39;t understand (*a).b .... omg am i dumb..."}, {"owner": {"reputation": 287, "user_id": 5522440, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/369e27f0b52f64f664954b7761e90325?s=128&d=identicon&r=PG&f=1", "display_name": "Madz", "link": "https://stackoverflow.com/users/5522440/madz"}, "edited": false, "score": 0, "creation_date": 1447276341, "post_id": 33659686, "comment_id": 55093418, "body": "After trying to not deferencing it(array), <code>array[C][L].push_back(0); &#47;&#47;Init matrix with 0 values</code> -&gt; push_back couldn&#39;t be resolved"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1447276356, "post_id": 33659686, "comment_id": 55093430, "body": "<code>*a</code> returns a what <code>a</code> is pointing to. Your program is crashing because <code>array</code> isn&#39;t pointing to valid memory. The solution is to make <code>array</code> the vector itself instead of a pointer to it."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1447276421, "post_id": 33659686, "comment_id": 55093461, "body": "when <code>array</code> was a pointer, <code>array[C]</code> is a 1 dimensional vector. Now that <code>array</code> is the vector you only need to specify a single dimension to push back, i.e. <code>array[C].push_back(0);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 211, "user_id": 5524291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d7abd48da93dcd234f3195661e21446?s=128&d=identicon&r=PG&f=1", "display_name": "Niels van Eldik", "link": "https://stackoverflow.com/users/5524291/niels-van-eldik"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1447277196, "post_id": 33659970, "comment_id": 55093876, "body": "Try again, the code is now 3D and I removed a typo or two. I did not try compiling it, I&#39;m leaving that up to you. The current code should avoid the crashes you had before and if you also add the boundary checks . Consider using unsigned int instead of int for the getter/setter methods this avoids the &lt; 0 check."}], "tags": [], "owner": {"reputation": 211, "user_id": 5524291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d7abd48da93dcd234f3195661e21446?s=128&d=identicon&r=PG&f=1", "display_name": "Niels van Eldik", "link": "https://stackoverflow.com/users/5524291/niels-van-eldik"}, "is_accepted": true, "score": 0, "last_activity_date": 1447277753, "last_edit_date": 1447277753, "creation_date": 1447276439, "answer_id": 33659970, "question_id": 33659686, "link": "https://stackoverflow.com/questions/33659686/my-matrix-class-crash-on-initialisation/33659970#33659970", "title": "My matrix class crash on initialisation", "body": "<p>It looks like you are also new to c++. </p>\n\n<p>As was mentioned in the comment, you first need to initialize the array.\nEven better would be not to use pointers at all.</p>\n\n<p>in your .h</p>\n\n<pre><code>class matrice {\n\npublic:\n    matrice(int nbColumnTMP, int nbLineTMP);\n\n    const std::vector&lt;std::vector&lt;std::vector&lt;int&gt;&gt;&gt;&amp; returnArray() const;\n\n\n    void addValue(int numColumn, int numLine, int value);\n    void editValue(int numColumn, int numLine, int numValue, int newValue);\n\nprivate:\n    std::vector&lt;std::vector&lt;std::vector&lt;int&gt;&gt;&gt; array;\n};\n</code></pre>\n\n<p>and .cpp</p>\n\n<pre><code>matrice::matrice(int nbColumnTMP, int nbLineTMP)  {\n\n    array.resize(nbColumnTMP);\n\n    for(int C = 0; C &lt; nbColumnTMP; C++)\n    {\n        array.push_back(std::vector&lt;std::vector&lt;int&gt;&gt;(nbLineTMP));\n    }\n}\n\nconst std::vector&lt;std::vector&lt;std::vector&lt;int&gt;&gt;&gt;&amp; matrice::returnArray() const\n{\n    return array;\n}\n\nvoid matrice::addValue(int numColumn, int numLine, int value)\n{\n    array[numColumn][numLine].push_back(value);\n}\n\n\nvoid matrice::editValue(int numColumn, int numLine, int numValue, int newValue)\n   {\n     // you should also add boundary checks for numColumn and numLine\n     std::vector&lt;int&gt;&amp; element = array[numColumn][numLine];\n     if( numValue &gt;= 0 &amp;&amp; numValue &lt; element.size() ){\n        element[numValue] = newValue;\n     }\n   }\n</code></pre>\n\n<p>There are many excellent matrix packages avaliable, don't implement your own unless they don't support your needs. \nI use Eigen in the past, it significantly reduced CPU load of our core matrix operations. </p>\n"}, {"comments": [{"owner": {"reputation": 287, "user_id": 5522440, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/369e27f0b52f64f664954b7761e90325?s=128&d=identicon&r=PG&f=1", "display_name": "Madz", "link": "https://stackoverflow.com/users/5522440/madz"}, "edited": false, "score": 0, "creation_date": 1447277071, "post_id": 33659988, "comment_id": 55093801, "body": "Thanks for your answer :) . This one don&#39;t work : <code>array[numColumn][numLine].push_back(value);</code> i don&#39;t get why"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1447277255, "post_id": 33659988, "comment_id": 55093897, "body": "<code>array</code> is a 2d vector, <code>array[a]</code> is a 1d vector, and <code>array[a][b]</code> is an element (<code>int</code> in your case). You can&#39;t call <code>push_back</code> on an <code>int</code>. So either add another dimension to <code>array</code> or don&#39;t call <code>push_back</code>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1447277307, "post_id": 33659988, "comment_id": 55093915, "body": "That is because <code>array[x][y]</code> is a value.  It isn&#39;t a vector.  You&#39;re trying to call <code>push_back</code> on something that isn&#39;t a vector."}, {"owner": {"reputation": 211, "user_id": 5524291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d7abd48da93dcd234f3195661e21446?s=128&d=identicon&r=PG&f=1", "display_name": "Niels van Eldik", "link": "https://stackoverflow.com/users/5524291/niels-van-eldik"}, "edited": false, "score": 0, "creation_date": 1447277308, "post_id": 33659988, "comment_id": 55093916, "body": "You&#39;ll need to use my 3D version, you cannot call push_back on an int"}, {"owner": {"reputation": 211, "user_id": 5524291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d7abd48da93dcd234f3195661e21446?s=128&d=identicon&r=PG&f=1", "display_name": "Niels van Eldik", "link": "https://stackoverflow.com/users/5524291/niels-van-eldik"}, "edited": false, "score": 0, "creation_date": 1447277385, "post_id": 33659988, "comment_id": 55093962, "body": "Looks like we are giving the same comments in parallel. Madz, try compiling my version. Try fixing the obvious compiler errors and if you don&#39;t manage post the compiler error"}, {"owner": {"reputation": 287, "user_id": 5522440, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/369e27f0b52f64f664954b7761e90325?s=128&d=identicon&r=PG&f=1", "display_name": "Madz", "link": "https://stackoverflow.com/users/5522440/madz"}, "reply_to_user": {"reputation": 211, "user_id": 5524291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d7abd48da93dcd234f3195661e21446?s=128&d=identicon&r=PG&f=1", "display_name": "Niels van Eldik", "link": "https://stackoverflow.com/users/5524291/niels-van-eldik"}, "edited": false, "score": 0, "creation_date": 1447277602, "post_id": 33659988, "comment_id": 55094056, "body": "@NielsvanEldik I didn&#39;t success to compile it Ok i&#39;ll try to compile again and i&#39;ll post the errors"}, {"owner": {"reputation": 211, "user_id": 5524291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d7abd48da93dcd234f3195661e21446?s=128&d=identicon&r=PG&f=1", "display_name": "Niels van Eldik", "link": "https://stackoverflow.com/users/5524291/niels-van-eldik"}, "edited": false, "score": 0, "creation_date": 1447277809, "post_id": 33659988, "comment_id": 55094162, "body": "try again removing the : in the constructor in the cpp file. The compiler should complain about that one at least"}, {"owner": {"reputation": 287, "user_id": 5522440, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/369e27f0b52f64f664954b7761e90325?s=128&d=identicon&r=PG&f=1", "display_name": "Madz", "link": "https://stackoverflow.com/users/5522440/madz"}, "reply_to_user": {"reputation": 211, "user_id": 5524291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d7abd48da93dcd234f3195661e21446?s=128&d=identicon&r=PG&f=1", "display_name": "Niels van Eldik", "link": "https://stackoverflow.com/users/5524291/niels-van-eldik"}, "edited": false, "score": 0, "creation_date": 1447277963, "post_id": 33659988, "comment_id": 55094241, "body": "@NielsvanEldik don&#39;t know why, i copy pasted again your code and now it&#39;s working, really thanks a lot"}, {"owner": {"reputation": 211, "user_id": 5524291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d7abd48da93dcd234f3195661e21446?s=128&d=identicon&r=PG&f=1", "display_name": "Niels van Eldik", "link": "https://stackoverflow.com/users/5524291/niels-van-eldik"}, "edited": false, "score": 0, "creation_date": 1447278072, "post_id": 33659988, "comment_id": 55094297, "body": "@PaulMcKenzie I like your latest version with the typedefs, that&#39;s the way to go, also your constructor is very neat and compact. I&#39;d opt for your solution. I&#39;d just use replace the int with an unsigned int: matrice::matrice(unsigned int nPages, unsigned int nbColumnTMP, unsigned int nbLineTMP) :               array(nPages, Int2D(nbColumnTMP, Int1D(nbLineTMP))) {}. The dimensions should always be &gt; 0."}, {"owner": {"reputation": 287, "user_id": 5522440, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/369e27f0b52f64f664954b7761e90325?s=128&d=identicon&r=PG&f=1", "display_name": "Madz", "link": "https://stackoverflow.com/users/5522440/madz"}, "reply_to_user": {"reputation": 211, "user_id": 5524291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d7abd48da93dcd234f3195661e21446?s=128&d=identicon&r=PG&f=1", "display_name": "Niels van Eldik", "link": "https://stackoverflow.com/users/5524291/niels-van-eldik"}, "edited": false, "score": 0, "creation_date": 1447283224, "post_id": 33659988, "comment_id": 55096714, "body": "@NielsvanEldik I tought it was ok so i put this post as answered, but unfortunately, the function addValue you did write make my program crash.  I may did something wrong when i do this ?  \t<code>matrice* test = new matrice(1, 1); \ttest-&gt;addValue(0, 0, 1);</code>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 287, "user_id": 5522440, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/369e27f0b52f64f664954b7761e90325?s=128&d=identicon&r=PG&f=1", "display_name": "Madz", "link": "https://stackoverflow.com/users/5522440/madz"}, "edited": false, "score": 0, "creation_date": 1447283322, "post_id": 33659988, "comment_id": 55096757, "body": "@Madz Forget that <code>new</code> exists and just use objects instead of pointers.  You don&#39;t even need <code>new</code> anyway: <code>matrice test(1,1); test.addValue(0,0,1);</code>"}, {"owner": {"reputation": 287, "user_id": 5522440, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/369e27f0b52f64f664954b7761e90325?s=128&d=identicon&r=PG&f=1", "display_name": "Madz", "link": "https://stackoverflow.com/users/5522440/madz"}, "edited": false, "score": 0, "creation_date": 1447283500, "post_id": 33659988, "comment_id": 55096833, "body": "@PaulMcKenzie When i do this, my program still crash :/ After a few checks, it&#39;s the addValue which is still making it crash But thanks for this anyway, i don&#39;t know why i love so much pointers ha ha Wow a 2 years break is so hard"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 287, "user_id": 5522440, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/369e27f0b52f64f664954b7761e90325?s=128&d=identicon&r=PG&f=1", "display_name": "Madz", "link": "https://stackoverflow.com/users/5522440/madz"}, "edited": false, "score": 0, "creation_date": 1447284732, "post_id": 33659988, "comment_id": 55097288, "body": "@Madz Are you creating a 2D or a 3D matrix?  For a 3D matrix, it works fine here: <a href=\"http://ideone.com/wBIl5J\" rel=\"nofollow noreferrer\">ideone.com/wBIl5J</a>"}, {"owner": {"reputation": 287, "user_id": 5522440, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/369e27f0b52f64f664954b7761e90325?s=128&d=identicon&r=PG&f=1", "display_name": "Madz", "link": "https://stackoverflow.com/users/5522440/madz"}, "edited": false, "score": 0, "creation_date": 1447286344, "post_id": 33659988, "comment_id": 55097790, "body": "I need to load in it the raw coordinates and iso coordinates(each one: two values(x, y))."}, {"owner": {"reputation": 287, "user_id": 5522440, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/369e27f0b52f64f664954b7761e90325?s=128&d=identicon&r=PG&f=1", "display_name": "Madz", "link": "https://stackoverflow.com/users/5522440/madz"}, "edited": false, "score": 0, "creation_date": 1447294797, "post_id": 33659988, "comment_id": 55100132, "body": "I want this :  [[x, y, z], [x, y, z]]"}], "tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": false, "score": 2, "last_activity_date": 1447277845, "last_edit_date": 1447277845, "creation_date": 1447276489, "answer_id": 33659988, "question_id": 33659686, "link": "https://stackoverflow.com/questions/33659686/my-matrix-class-crash-on-initialisation/33659988#33659988", "title": "My matrix class crash on initialisation", "body": "<p>The reason for your issues is that you're using a pointer member, and attempting to write to uninitialized memory.</p>\n\n<p>There is no need for this member to be a pointer:</p>\n\n<pre><code>   std::vector&lt;std::vector&lt;int&gt;&gt;* array;\n</code></pre>\n\n<p>Instead, make it an object and size it appropriately in the constructor and other functions that size the vector:</p>\n\n<pre><code>   std::vector&lt;std::vector&lt;int&gt;&gt; array;\n</code></pre>\n\n<p>and then:</p>\n\n<pre><code>matrice::matrice(int nbColumnTMP, int nbLineTMP) : \n             array(nbColumnTMP, std::vector&lt;int&gt;(nbLineTMP))\n{}\n</code></pre>\n\n<p>Also, there is no need to be holding onto variables that denote the number of rows and columns.  Use the appropriate <code>vector::size()</code> methods.  There is no need for <code>nbColumn</code> and <code>nbLine</code> member variables.  </p>\n\n<p>Using extraneous variables can invariably lead to bugs down the road (due to not updating them properly), or other issue that keeps them out-of-sync with the actual size of the vector.  For example, your function to add a value -- since you seem to be creating a ragged 2 dimensional vector, those member variables denoting the number of rows and columns become useless, and the only thing reliable is to use the <code>std::vector&lt;T&gt;::size()</code> function.  </p>\n\n<p>Also, once you do this, there is no need for a destructor in your matrix class.  The vector will clean itself up automatically when the object goes out of scope.  </p>\n\n<p>In general, if you want a 2 dimensional or 3 dimensional vector, and you want to start out \"easy\", then just declare one.  Don't go the pointer route.  If you did that, then it just becomes a matter of fixing a few syntax errors (or getting used to the syntax), and that is the easy stuff.  Going headlong into pointers and dynamically allocated memory will lead you into all sorts of issues that you need not have to get into.</p>\n\n<p>Edit:</p>\n\n<p>For a 3 dimensional vector, </p>\n\n<pre><code>std::vector&lt;std::vector&lt;std::vector&lt;int&gt;&gt;&gt;;\n</code></pre>\n\n<p>or better yet:</p>\n\n<pre><code>typedef std::vector&lt;int&gt; Int1D;\ntypedef std::vector&lt;Int1D&gt; Int2D;\ntypedef std::vector&lt;Int2D&gt; Int3D;\nInt3D array;\n</code></pre>\n\n<p>and then:</p>\n\n<pre><code>matrice::matrice(int nPages, int nbColumnTMP, int nbLineTMP) : \n             array(nPages, Int2D(nbColumnTMP, Int1D(nbLineTMP)))\n{}\n</code></pre>\n"}], "owner": {"reputation": 287, "user_id": 5522440, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/369e27f0b52f64f664954b7761e90325?s=128&d=identicon&r=PG&f=1", "display_name": "Madz", "link": "https://stackoverflow.com/users/5522440/madz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "closed_date": 1447278490, "accepted_answer_id": 33659970, "answer_count": 2, "score": 0, "last_activity_date": 1447277845, "creation_date": 1447275458, "question_id": 33659686, "link": "https://stackoverflow.com/questions/33659686/my-matrix-class-crash-on-initialisation", "closed_reason": "Duplicate", "title": "My matrix class crash on initialisation", "body": "<p>Issue : program crashing</p>\n\n<p>here is my matrice.h :</p>\n\n<pre><code>class matrice {\n\npublic:\n    matrice(int nbColumnTMP, int nbLineTMP);\n\n    std::vector&lt;std::vector&lt;int&gt;&gt; returnArray();\n\n    virtual ~matrice();\n\n    void addValue(int numColumn, int numLine, int value);\n    void editValue(int numColumn, int numLine, int numValue, int newValue);\n\nprivate:\n    std::vector&lt;std::vector&lt;int&gt;&gt;* array;\n    int nbColumn;\n    int nbLine;\n\n};\n</code></pre>\n\n<p>And the .cpp :</p>\n\n<pre><code>matrice::matrice(int nbColumnTMP, int nbLineTMP) {\n\n    nbColumn = nbColumnTMP;\n    nbLine = nbLineTMP;\n\n    std::vector&lt;int&gt;* array2;\n\n    for(int C = 0; C &lt; nbColumn; C++)\n    {\n        array-&gt;push_back(*array2);//&lt;- DONT WORK, CRASH\n\n        for(int L = 0; L &lt; nbLine; L++)\n        {\n            array[C][L].push_back(0); //Init matrix with 0 values\n        }\n    }\n}\n\nstd::vector&lt;std::vector&lt;int&gt;&gt; matrice::returnArray()\n{\n    return *array;\n}\n\nmatrice::~matrice()\n{\n    for(int C = 0; C &lt; nbColumn; C++)\n    {\n        for(int L = 0; L &lt; nbLine; L++)\n        {\n            for(int V = 0; V &lt; int(array[C][L].size()); V++)\n            {\n                delete &amp;array[C][L][V];\n            }\n\n            delete &amp;array[C][L];\n        }\n\n        delete &amp;array[C];\n    }\n\n    delete  &amp;nbColumn;\n    delete &amp;nbLine;\n\n    delete array;\n}\n\nvoid matrice::addValue(int numColumn, int numLine, int value)\n{\n    array[numColumn][numLine].push_back(value);\n}\n\nvoid matrice::editValue(int numColumn, int numLine, int numValue, int newValue)\n{\n    array[numColumn][numLine][numValue] = newValue;\n}\n</code></pre>\n\n<p>After a few tests, i found out that this make my program crash:</p>\n\n<pre><code>array-&gt;push_back(*array2);\n</code></pre>\n\n<p>I'm new to this so i'm not sure i'm doing things well, and i have no clue why this is not working...</p>\n\n<p>I'm using this class for my 2D isometric engine, i want to load some coordinates into them to easily get isometrics coordinates after.</p>\n"}, {"tags": ["c++", "c++11", "memory-leaks", "stdstring"], "comments": [{"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 4, "creation_date": 1447275220, "post_id": 33659609, "comment_id": 55092845, "body": "Why not just return <code>std::string</code> and let callers decide what to do with it? Also, how do you use more than 2 instances of your class without obliterating <code>_tempStr</code>?"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 1, "creation_date": 1447275417, "post_id": 33659609, "comment_id": 55092936, "body": "What happens if I have 2 SomeClasses and I want to store both names somewhere? They share the same underlying string so it wouldn&#39;t work. It&#39;s better to just return a <code>const std::string&amp;</code> instead."}, {"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 0, "creation_date": 1447275462, "post_id": 33659609, "comment_id": 55092958, "body": "&quot;<i>std::string is an implementation detail, and dont want to expose it</i>&quot;, what a strange restriction to put on yourself.  Unless this is cross a shared object boundary, just <i>use the library</i>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1447275643, "post_id": 33659609, "comment_id": 55093048, "body": "<i>so cant return std::string, have to return c-string</i>  If you&#39;re going to go that route, you might as well have the user pass in their buffer and you fill it in with the information.  An &quot;implementation detail&quot; would only arise if that function is being called from a language other than C++ where a <code>std::string</code> doesn&#39;t exist, or across module boundaries (as the previous comment mentioned).  Otherwise, you&#39;re doing a whole lot of busy work for nothing -- just return a <code>std::string</code>."}, {"owner": {"reputation": 48820, "user_id": 182676, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/446fa39e5f227c92db408e1b68356b5e?s=128&d=identicon&r=PG", "display_name": "Macmade", "link": "https://stackoverflow.com/users/182676/macmade"}, "edited": false, "score": 0, "creation_date": 1447275994, "post_id": 33659609, "comment_id": 55093220, "body": "Don&#39;t use C++ if your goal is to use C..."}, {"owner": {"reputation": 65, "user_id": 2501659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d5cbe8b6b4e089a84153d358df07581?s=128&d=identicon&r=PG", "display_name": "taher1992", "link": "https://stackoverflow.com/users/2501659/taher1992"}, "edited": false, "score": 0, "creation_date": 1447277169, "post_id": 33659609, "comment_id": 55093854, "body": "Lets say I have a good reason not to return std::string for example SomeClass is exported (with &#39;__declspec(dllexport)&#39; ) and It is declared in a DLL and used in an another program. Also the return is not supposed to be stored."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 5, "creation_date": 1447277878, "post_id": 33659609, "comment_id": 55094188, "body": "When phrased like that, the question is &#39;how do I return a string in C interface&#39;. The answer is - you ask the caller for the char[] buffer and size of this buffer, and than populate the buffer with result. Pretty much like snprintf."}], "answers": [{"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1447337207, "post_id": 33659772, "comment_id": 55119279, "body": "I don&#39;t think you understood the answer you&#39;re talking about."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1447337660, "post_id": 33659772, "comment_id": 55119600, "body": "@Barry, the later clarification (regarding being in DLL) was added after I updated my answer. When I was updating, it simply stated std::string being implementation detail."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 1, "last_activity_date": 1447275716, "creation_date": 1447275716, "answer_id": 33659772, "question_id": 33659609, "link": "https://stackoverflow.com/questions/33659609/keep-temporary-stdstring-and-return-c-str-to-prevent-memory-leaks/33659772#33659772", "title": "Keep temporary std::string and return c_str() to prevent memory leaks", "body": "<p>This might backfire if you ever use your class in multi-threaded environment. Instead of those tricks, just return std::string by value.</p>\n\n<p>I have seen the answer about 'implementation detail'. I do not agree with it. std::string is no more implementation detail than const char*. It is a way to provide string representations.</p>\n"}, {"tags": [], "owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 4, "last_activity_date": 1447277026, "creation_date": 1447277026, "answer_id": 33660132, "question_id": 33659609, "link": "https://stackoverflow.com/questions/33659609/keep-temporary-stdstring-and-return-c-str-to-prevent-memory-leaks/33660132#33660132", "title": "Keep temporary std::string and return c_str() to prevent memory leaks", "body": "<p>This is a mistake. If you pass a pointer as a return value, the caller must have a guarantee that the pointer will remain valid as long as necessary. In this case the pointer could be invalidated if the owning object is destroyed, or if the function is called a second time causing a new string to be generated.</p>\n\n<p>You want to avoid an implementation detail, but you're creating an implementation detail that is much worse than the one you want to avoid. C++ has strings, use them.</p>\n"}, {"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1447281229, "post_id": 33660622, "comment_id": 55095849, "body": "I read the first paragraph and was like &quot;this sounds like Yakk...&quot; :)"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 2, "last_activity_date": 1447305232, "last_edit_date": 1447305232, "creation_date": 1447279072, "answer_id": 33660622, "question_id": 33659609, "link": "https://stackoverflow.com/questions/33659609/keep-temporary-stdstring-and-return-c-str-to-prevent-memory-leaks/33660622#33660622", "title": "Keep temporary std::string and return c_str() to prevent memory leaks", "body": "<p>In C++ you cannot simply ignore object lifetimes.  You cannot talk to an interface while ignoring object lifetimes.</p>\n\n<p>If you think you are ignoring object lifetimes, you almost certainly have a bug.</p>\n\n<p>Your interface ignores the lifetime of the returned buffer.  It lasts \"long enough\" -- \"until someone calls me again\".  That is a vague guarantee that will lead to really bad bugs.</p>\n\n<p>Ownership should be clear.  One way to make ownership clear is to use a C-style interface.  Another is to use a C++ library types, and require your clients to match your library version.  Another is to use custom smart objects, and guarantee their stability over versions.</p>\n\n<p>These all have downsides.  C-style interfaces are annoying.  Forcing the same C++ library on your clients is annoying.  Having custom smart objects is code duplication, and forces your clients to use whatever string classes <em>you</em> wrote, not whatever they want to use, or well written <code>std</code> ones.</p>\n\n<p>A final way is to type erase, and guarantee the stability of the type erasure.</p>\n\n<p>Let us look at that option.  We type erase down to assigning-to a <code>std</code> like container.  This means we forget the type of the thing we erase, but we remember how to assign-to it.</p>\n\n<pre><code>namespace container_writer {\n  using std::begin; using std::end;\n  template&lt;class C, class It, class...LowPriority&gt;\n  void append( C&amp; c, It b, It e, LowPriority&amp;&amp;... ) {\n    c.insert( end(c), b, e );\n  }\n\n  template&lt;class C, class...LowPriority&gt;\n  void clear(C&amp; c, LowPriority&amp;&amp;...) {\n    c = {};\n  }\n  template&lt;class T&gt;\n  struct sink {\n    using append_f = void(*)(void*, T const* b, T const* e);\n    using clear_f = void(*)(void*);\n    void* ptr = nullptr;\n    append_f append_to = nullptr;\n    clear_f clear_it = nullptr;\n\n    template&lt;class C,\n      std::enable_if_t&lt; !std::is_same&lt;std::decay_t&lt;C&gt;, sink&gt;{}, int&gt; =0\n    &gt;\n    sink( C&amp;&amp; c ):\n      ptr(std::addressof(c)),\n      append_to([](void* ptr, T const* b, T const* e){\n        auto* pc = static_cast&lt; std::decay_t&lt;C&gt;* &gt;(ptr);\n        append( *pc, b, e );\n      }),\n      clear_it([](void* ptr){\n        auto* pc = static_cast&lt; std::decay_t&lt;C&gt;* &gt;(ptr);\n        clear(*pc);\n      })\n    {}\n    sink(sink&amp;&amp;)=default;\n    sink(sink const&amp;)=delete;\n    sink()=default;\n\n    void set( T const* b, T const* e ) {\n      clear_it(ptr);\n      append_to(ptr, b, e);\n    }\n    explicit operator bool()const{return ptr;}\n    template&lt;class Traits&gt;\n    sink&amp; operator=(std::basic_string&lt;T, Traits&gt; const&amp; str) {\n      set( str.data(), str.data()+str.size() );\n      return *this;\n    }\n    template&lt;class A&gt;\n    sink&amp; operator=(std::vector&lt;T, A&gt; const&amp; str) {\n      set( str.data(), str.data()+str.size() );\n      return *this;\n    }\n  };\n}\n</code></pre>\n\n<p>Now, <code>container_writer::sink&lt;T&gt;</code> is a pretty darn DLL-safe class.  Its state is 3 C-style pointers.  While it is a template, it is also <em>standard layout</em>, and standard layout basically means \"has a layout like a C struct would\".</p>\n\n<p>A C struct that contains 3 pointers is ABI safe.</p>\n\n<p>Your code takes a <code>container_writer::sink&lt;char&gt;</code>, and inside your DLL you can assign a <code>std::string</code> or a <code>std::vector&lt;char&gt;</code> to it.  (extending it to support more ways to assign to it is easy).</p>\n\n<p>The DLL-calling code sees the <code>container_writer::sink&lt;char&gt;</code> interface, and on the client side converts a passed <code>std::string</code> to it.  This creates some function pointers <em>on the client side</em> that know how to resize and insert stuff into a <code>std::string</code>.</p>\n\n<p>These function pointers (and a <code>void*</code>) pass over the DLL boundary.  On the DLL side, they are blindly called.</p>\n\n<p>No allocated memory passes from the DLL side to the client side, or vice versa.  Despite that, every bit of data has well defined lifetime associated with an object (RAII style).  There is no messy lifetime issues, because the client controls the lifetime of the buffer being written to, while the server writes to it with an automatically written callback.</p>\n\n<p>If you have a non-<code>std</code> style container and you want to support <code>container_sink</code> it is easy.  Add <code>append</code> and <code>clear</code> free functions to the namespace of your type, and have them do the required action.  <code>container_sink</code> will automatically find them and use them to fill your container. </p>\n\n<p>As an example, you can use <code>CStringA</code> like this:</p>\n\n<pre><code>void append( CStringA&amp; str, char const* b, char const* e) {\n  str += CStringA( b, e-b );\n}\nvoid clear( CStringA&amp; str ) {\n  str = CStringA{};\n}\n</code></pre>\n\n<p>and magically <code>CStringA</code> is now a valid argument for something taking a <code>container_writer::sink&lt;char&gt;</code>.</p>\n\n<p>The use of <code>append</code> is there just in case you need fancier construction of the container.  You could write a <code>container_writer::sink</code> method that eats non-contiguous buffers by having it feed the stored container fixed sized chunks at a time; it does a clear, then repeated appends.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/0cdcf54d4740d85a\" rel=\"nofollow\">live example</a></p>\n\n<p>Now, this doesn't let you return the value from a function.</p>\n\n<p>To get that to work, first do the above.  Expose functions that return their strings through <code>container_writer::sink&lt;char&gt;</code> over the DLL barrier.</p>\n\n<p>Make them private.  Or mark them as not-to-be-called.  Whatever.</p>\n\n<p>Next, write <code>inline public</code> functions that call those functions, and return the filled <code>std::string</code>.  These are pure header file constructs, so the code lives in the DLL client.</p>\n\n<p>So we get:</p>\n\n<pre><code>class SomeClass\n{\nprivate:\n   void Name(container_writer::container_sink&lt;char&gt;);\npublic:\n   // in header file exposed from DLL:\n   // (block any kind of symbol export of this!)\n   std::string Name() { \n     std::string r;\n     Name(r);\n     return r;\n   }\n};\n\nvoid SomeClass::Name(container_writer::container_sink&lt;char&gt; s) \n{\n  std::string tempStr = \"My name is: \" +\n        _rawName + \". Your name is: \" + GetOtherName();\n  s = tempStr;\n}\n</code></pre>\n\n<p>and done.  The DLL interface <em>acts</em> C++, but is actually just passing 3 raw C pointers through.  All resources are owned at all times.</p>\n"}], "owner": {"reputation": 65, "user_id": 2501659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d5cbe8b6b4e089a84153d358df07581?s=128&d=identicon&r=PG", "display_name": "taher1992", "link": "https://stackoverflow.com/users/2501659/taher1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1358, "favorite_count": 0, "accepted_answer_id": 33660622, "answer_count": 3, "score": 0, "last_activity_date": 1447305232, "creation_date": 1447275117, "question_id": 33659609, "link": "https://stackoverflow.com/questions/33659609/keep-temporary-stdstring-and-return-c-str-to-prevent-memory-leaks", "title": "Keep temporary std::string and return c_str() to prevent memory leaks", "body": "<p>I found myself using this type of code below to prevent memory leaks, is there anything wrong with it in terms of performance, safety, style or ...?</p>\n\n<p>The idea is that if i need to return an edited string (in terms of a c-string not std::string), i use a temporary std::string as a helper and set it to what I want my return to be and keep that temporary alive.</p>\n\n<p>Next time i call that function it re-sets the temporary to the new value that I want. And since the way i use the returned c-string, I only read the returned value, never store it.</p>\n\n<p>Also, I should mention, std::string is an implementation detail, and dont want to expose it (so cant return std::string, have to return c-string).</p>\n\n<p>Anyway, here is the code:</p>\n\n<pre><code> //in header\nclass SomeClass\n{\nprivate:\n    std::string _rawName;\n\npublic:\n    const char* Name(); // return c-string\n};\n\n//in cpp file\nstd::string _tempStr; // my temporary helper std::string\n\nconst char* SomeClass::Name()\n{\n    return (_tempStr = \"My name is: \" +\n            _rawName + \". Your name is: \" + GetOtherName()).c_str();\n}\n</code></pre>\n"}, {"tags": ["c++", "object"], "comments": [{"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 1, "creation_date": 1447275076, "post_id": 33659586, "comment_id": 55092765, "body": "This sounds like a hash table."}, {"owner": {"reputation": 2387, "user_id": 3818191, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aca92340c2b2e2bb08aeb1441914e929?s=128&d=identicon&r=PG&f=1", "display_name": "JCx", "link": "https://stackoverflow.com/users/3818191/jcx"}, "edited": false, "score": 2, "creation_date": 1447275117, "post_id": 33659586, "comment_id": 55092788, "body": "Yes.  Try std::map&lt;T&gt;"}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 1, "creation_date": 1447275156, "post_id": 33659586, "comment_id": 55092812, "body": "Why do you want this?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 2387, "user_id": 3818191, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aca92340c2b2e2bb08aeb1441914e929?s=128&d=identicon&r=PG&f=1", "display_name": "JCx", "link": "https://stackoverflow.com/users/3818191/jcx"}, "edited": false, "score": 1, "creation_date": 1447275309, "post_id": 33659586, "comment_id": 55092889, "body": "@JCx: Or <code>std::unordered_map</code>"}, {"owner": {"reputation": 2387, "user_id": 3818191, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aca92340c2b2e2bb08aeb1441914e929?s=128&d=identicon&r=PG&f=1", "display_name": "JCx", "link": "https://stackoverflow.com/users/3818191/jcx"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1447275468, "post_id": 33659586, "comment_id": 55092959, "body": "@Keith probably a better choice, agreed."}, {"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 1, "creation_date": 1447276357, "post_id": 33659586, "comment_id": 55093431, "body": "There isn&#39;t an equivalent - you can&#39;t get a member name as a string and convert it to the address of a member variable/function unless you have the offset of every single member variable/function. You have the same problem with VBScript, Javascript and Snobol.  The features of some languages are just not translatable."}], "answers": [{"tags": [], "owner": {"reputation": 2387, "user_id": 3818191, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aca92340c2b2e2bb08aeb1441914e929?s=128&d=identicon&r=PG&f=1", "display_name": "JCx", "link": "https://stackoverflow.com/users/3818191/jcx"}, "is_accepted": true, "score": 6, "last_activity_date": 1447275435, "last_edit_date": 1495541037, "creation_date": 1447275435, "answer_id": 33659678, "question_id": 33659586, "link": "https://stackoverflow.com/questions/33659586/c-equivalent-to-obj-var/33659678#33659678", "title": "c++ equivalent to $obj-&gt;{$var}", "body": "<p>Try: </p>\n\n<pre><code>#include &lt;unordered_map&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main() {\n    unordered_map&lt;string, string&gt; obj;\n    obj[\"test\"] = \"aaaa\";\n    string var = \"test\";\n    cout &lt;&lt; obj[var] &lt;&lt; endl;\n}\n</code></pre>\n\n<p>It's not quite the same, as test is a string in both cases here.  If it's the difference between <strong>\"test\"</strong> and plain <strong>test</strong> that's important then the answer becomes a bit more complicated.</p>\n\n<p>See also: <a href=\"https://stackoverflow.com/questions/13799593/how-to-choose-between-map-and-unordered-map\">How to choose between map and unordered_map?</a> to explain the discussion in the comments.</p>\n"}], "owner": {"reputation": 171, "user_id": 2035693, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e984ca5d22935b577e77fcbb53edb3e2?s=128&d=identicon&r=PG", "display_name": "user2035693", "link": "https://stackoverflow.com/users/2035693/user2035693"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 33659678, "answer_count": 1, "score": 4, "last_activity_date": 1447275435, "creation_date": 1447275006, "question_id": 33659586, "link": "https://stackoverflow.com/questions/33659586/c-equivalent-to-obj-var", "title": "c++ equivalent to $obj-&gt;{$var}", "body": "<p>I'm looking for a C++ equivalent for the following PHP code</p>\n\n<pre><code>$obj = new stdClass();\n$obj-&gt;test = \"aaaa\";\n$var = \"test\";\necho $obj-&gt;{$var};\n</code></pre>\n\n<p>Is even possible in C? I keep looking for hours and no luck.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "std", "priority-queue"], "comments": [{"owner": {"reputation": 4676, "user_id": 2052730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atz9A.jpg?s=128&g=1", "display_name": "Sasha Pachev", "link": "https://stackoverflow.com/users/2052730/sasha-pachev"}, "edited": false, "score": 0, "creation_date": 1447274458, "post_id": 33659337, "comment_id": 55092453, "body": "If the source of your implementation is available, study it. You should also write a test case that will check the behavior, e.g is it first in first out, first it last out, random, etc."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1447274740, "post_id": 33659337, "comment_id": 55092595, "body": "From <a href=\"http://en.cppreference.com/w/cpp/algorithm/make_heap\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/algorithm/make_heap</a> (what <code>std::priority_queue</code> uses): &quot;The actual arrangement of the elements is implementation defined.&quot; EDIT: Actually it doesn&#39;t say explicitly that priority_queue uses it, just that it acts like it."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1447280238, "post_id": 33659337, "comment_id": 55095348, "body": "It is almost certainly undefined. The usual implementation with a heap can&#39;t preserve insertion order. You could do that yourself by including it as a subkey."}, {"owner": {"reputation": 3988, "user_id": 819436, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c5c68ed8055f0e84684bcad710195c00?s=128&d=identicon&r=PG", "display_name": "ConditionRacer", "link": "https://stackoverflow.com/users/819436/conditionracer"}, "edited": false, "score": 0, "creation_date": 1447290808, "post_id": 33659337, "comment_id": 55099074, "body": "It has to be defined somewhere, even if only in the code. I&#39;m just not sure where to look to find that out. Was hoping someone might know."}], "owner": {"reputation": 3988, "user_id": 819436, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c5c68ed8055f0e84684bcad710195c00?s=128&d=identicon&r=PG", "display_name": "ConditionRacer", "link": "https://stackoverflow.com/users/819436/conditionracer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1447274087, "creation_date": 1447274087, "question_id": 33659337, "link": "https://stackoverflow.com/questions/33659337/stdpriority-queue-removal-order-for-duplicate-priorities", "title": "std::priority_queue removal order for duplicate priorities?", "body": "<p>I know this is an implementation detail of std::priority_queue. I need to know because I'm reimplementing a priority queue in c# that needs to have the same removal behavior.</p>\n\n<p>When I insert multiple items into a std::priority_queue that all have the same priority, what determines the removal order?</p>\n"}, {"tags": ["c++", "arrays", "quicksort"], "answers": [{"tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": true, "score": 1, "last_activity_date": 1447273920, "creation_date": 1447273920, "answer_id": 33659295, "question_id": 33659246, "link": "https://stackoverflow.com/questions/33659246/different-results-getting-array-element-inside-while-condition-vs-outside/33659295#33659295", "title": "Different results getting array element inside while condition vs outside", "body": "<p>In the broken version the <em>value</em> of the pivot (as opposed to its <em>location</em>) changes over the course of the function.</p>\n"}, {"tags": [], "owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "is_accepted": false, "score": 1, "last_activity_date": 1447273935, "creation_date": 1447273935, "answer_id": 33659299, "question_id": 33659246, "link": "https://stackoverflow.com/questions/33659246/different-results-getting-array-element-inside-while-condition-vs-outside/33659299#33659299", "title": "Different results getting array element inside while condition vs outside", "body": "<p>Debugger would probably show it to you best, but there is a distinct difference between the functions.</p>\n\n<p>The first one takes a value from the array to the variable and doesn't change it.</p>\n\n<p>The second one takes a position and compares the value on that position in the array each time, while modifying the array. If the array is modified on the position that is stored, naturally the comparisons differ.</p>\n"}], "owner": {"reputation": 235, "user_id": 1609044, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d37baab4c209c1a084a98d62d5956f2a?s=128&d=identicon&r=PG", "display_name": "Steven", "link": "https://stackoverflow.com/users/1609044/steven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 33659295, "answer_count": 2, "score": 0, "last_activity_date": 1447273935, "creation_date": 1447273714, "question_id": 33659246, "link": "https://stackoverflow.com/questions/33659246/different-results-getting-array-element-inside-while-condition-vs-outside", "title": "Different results getting array element inside while condition vs outside", "body": "<p>I've been working on this quicksort code for a while now and cant figure out why I get different results based on where I get an array value. If I get the value of pivot outside of my loop it works fine, inside the loop it does not.</p>\n\n<p>I've highlighted the difference between each function with some /*This works/doesnt*/ comments. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid quicksort(int * x, int left_limit, int right_limit) {\n    int left = left_limit;\n    int right = right_limit;\n    int pivot = x[(right + left) / 2];        /* This works */\n\n    while (left &lt;= right) {\n        while (x[left] &lt; pivot) { left++;  }  /* This works */\n        while (x[right] &gt; pivot){ right--; }  /* This works */\n\n        if (left &lt;= right) {\n            int temp = x[left];\n            x[left] = x[right];\n            x[right] = temp;\n            left++;\n            right--;\n        }\n    }\n\n    if (left_limit &lt; right)\n        quicksort(x, left_limit, right);\n    if (left &lt; right_limit)\n        quicksort(x, left, right_limit);\n}\n\nvoid quicksortBROKEN(int * x, int left_limit, int right_limit) {\n    int left = left_limit;\n    int right = right_limit;\n    int pivot = (right + left) / 2;              /* This doesnt */\n\n    while (left &lt;= right) {\n        while (x[left] &lt; x[pivot]) { left++;  }  /* This doesnt */\n        while (x[right] &gt; x[pivot]){ right--; }  /* This doesnt */\n\n        if (left &lt;= right) {\n            int temp = x[left];\n            x[left] = x[right];\n            x[right] = temp;\n            left++;\n            right--;\n        }\n    }\n\n    if (left_limit &lt; right)\n        quicksort(x, left_limit, right);\n    if (left &lt; right_limit)\n        quicksort(x, left, right_limit);\n}\n\nint main() {\n    int x[] = {0,2,1,4,3,5,6,3,7,8,4,3,7,8};\n\n    quicksort(x, 0, 13);\n    for (int i = 0; i &lt; 14; i++) {\n        printf(\"%d, \", x[i]);\n    }\n    printf(\"\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>What is wrong with the broken function?</p>\n"}, {"tags": ["c++", "qt", "imagemagick", "magick++"], "comments": [{"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1447274060, "post_id": 33659208, "comment_id": 55092255, "body": "You need to put the <code>Magick++-config</code> stuff inside <code>$()</code> like this... <code>$(Magick++-config --cxxflags --cppflags --ldflags --libs)</code> to actually execute them,"}, {"owner": {"reputation": 113, "user_id": 5261666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b594df1403a84d13e88c632d3edbe33?s=128&d=identicon&r=PG", "display_name": "Taylor Pope", "link": "https://stackoverflow.com/users/5261666/taylor-pope"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1447278659, "post_id": 33659208, "comment_id": 55094599, "body": "They were in backquotes in my makefile, but the markdown apparently removed those. It works in my makefile. How do I get Qt Creator to execute them?"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1447280067, "post_id": 33659208, "comment_id": 55095242, "body": "As a temporary fix, run the <code>Magick++-config... -- ... --ldflags --libs</code> command I gave above in your Terminal, and copy and paste the output into your Qt Creator Makefile and see if that fixes it for now."}, {"owner": {"reputation": 113, "user_id": 5261666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b594df1403a84d13e88c632d3edbe33?s=128&d=identicon&r=PG", "display_name": "Taylor Pope", "link": "https://stackoverflow.com/users/5261666/taylor-pope"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1447281479, "post_id": 33659208, "comment_id": 55095971, "body": "I just did that, and it worked. Thanks! I still wish I could get Qt Creator to simply run $(Magick++-config --cxxflags --cppflags --ldflags --libs) though."}], "answers": [{"tags": [], "owner": {"reputation": 216, "user_id": 3723163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rp7Fw.jpg?s=128&g=1", "display_name": "Sompom", "link": "https://stackoverflow.com/users/3723163/sompom"}, "is_accepted": true, "score": 1, "last_activity_date": 1460062282, "last_edit_date": 1460062282, "creation_date": 1459897303, "answer_id": 36438582, "question_id": 33659208, "link": "https://stackoverflow.com/questions/33659208/using-magick-in-qt-creator/36438582#36438582", "title": "Using Magick++ in Qt Creator", "body": "<p>Since the .pro files in Qt Creator is (as far as I can tell) used to generate a Makefile, we can use make's ability to run a program on the shell and save its output.</p>\n\n<p>I have added:</p>\n\n<p><code>QMAKE_CXXFLAGS += $(shell Magick++-config --cppflags --cxxflags)</code></p>\n\n<p>and</p>\n\n<p><code>LIBS += $(shell Magick++-config --ldflags --libs)</code></p>\n\n<p>to my .pro file, and I was able to add:</p>\n\n<p><code>#include &lt;Magick++.h&gt;</code></p>\n\n<p>to my program without a compile error, then compile a simple example (Just put out an animated .gif with a couple of colored pixels)</p>\n\n<p>This obviously makes things like cross-compiling a little tricky (I don't know how to reference foreign libraries), but that's a problem for another time.</p>\n"}], "owner": {"reputation": 113, "user_id": 5261666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b594df1403a84d13e88c632d3edbe33?s=128&d=identicon&r=PG", "display_name": "Taylor Pope", "link": "https://stackoverflow.com/users/5261666/taylor-pope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1173, "favorite_count": 0, "accepted_answer_id": 36438582, "answer_count": 1, "score": 1, "last_activity_date": 1460062282, "creation_date": 1447273590, "question_id": 33659208, "link": "https://stackoverflow.com/questions/33659208/using-magick-in-qt-creator", "title": "Using Magick++ in Qt Creator", "body": "<p>I am creating a Qt widget with a backend representation I wrote separately.  The backend uses Magick++, and I can get it to compile from the command line:</p>\n\n<blockquote>\n  <p>g++ -c ../SpriteCreator/WriteGIF.cpp sprite.cpp -I ../SpriteCreator/ <code>Magick++-config --cxxflags --cppflags</code> <code>Magick++-config --ldflags --libs</code> -O2</p>\n</blockquote>\n\n<p>but when I try to compile the project Qt Creator it tells me</p>\n\n<blockquote>\n  <p>/home/tpope/obeyYourThirst/qtSpriteEditor/backend/sprite.cpp:15: error: Magick++.h: No such file or directory\n   #include &lt; Magick++.h></p>\n</blockquote>\n\n<p>I added the path for Magick++.h to the INCLUDEPATH, but now it has an error similar to this:</p>\n\n<blockquote>\n  <p>/home/tpope/obeyYourThirst/qtSpriteEditor/backend/sprite.cpp:66: error: undefined reference to `Magick::InitializeMagick(char const*)'</p>\n</blockquote>\n\n<p>for every use of a Magick function. It seems to be not including the library. How do I do that in Qt Creator?</p>\n"}, {"tags": ["c++", "stack"], "comments": [{"owner": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "edited": false, "score": 1, "creation_date": 1447273239, "post_id": 33659075, "comment_id": 55091806, "body": "Why dont you just use  .empty() method to check if your stack is empty ?"}, {"owner": {"reputation": 69, "user_id": 5552116, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/4ace1a13e790dc09e577bba783d625ff?s=128&d=identicon&r=PG&f=1", "display_name": "Gary", "link": "https://stackoverflow.com/users/5552116/gary"}, "reply_to_user": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "edited": false, "score": 0, "creation_date": 1447273336, "post_id": 33659075, "comment_id": 55091863, "body": "How so? Wouldn&#39;t the condition I put in my outer while loop cover that?"}, {"owner": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "edited": false, "score": 0, "creation_date": 1447273638, "post_id": 33659075, "comment_id": 55092020, "body": "you should always check if your stack is empty before poping an element. You dont do that in your if statements"}, {"owner": {"reputation": 69, "user_id": 5552116, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/4ace1a13e790dc09e577bba783d625ff?s=128&d=identicon&r=PG&f=1", "display_name": "Gary", "link": "https://stackoverflow.com/users/5552116/gary"}, "reply_to_user": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "edited": false, "score": 0, "creation_date": 1447274004, "post_id": 33659075, "comment_id": 55092220, "body": "My entire while loop only functions if the stack isn&#39;t empty though. Adding that condition in an if statement hasn&#39;t helped as of yet. I do very much appreciate your response though. Any help I can get is good help because this error is frustrating"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1447274468, "post_id": 33659075, "comment_id": 55092456, "body": "@Gary <code>if(token==&quot;(&quot;)</code>  This is not how you compare C-style strings.  Your entire code is flawed due to this issue.  Use <code>strcmp</code>."}, {"owner": {"reputation": 69, "user_id": 5552116, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/4ace1a13e790dc09e577bba783d625ff?s=128&d=identicon&r=PG&f=1", "display_name": "Gary", "link": "https://stackoverflow.com/users/5552116/gary"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1447304357, "post_id": 33659075, "comment_id": 55102791, "body": "@Paul, thank you. I don&#39;t know much about C-style strings, but making these changes helped my code run. Along with one more unrelated change."}], "answers": [{"tags": [], "owner": {"reputation": 3510, "user_id": 4128833, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/079bb7879c594630684e2c9ed4ecad7e?s=128&d=identicon&r=PG", "display_name": "paul-g", "link": "https://stackoverflow.com/users/4128833/paul-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1447274954, "last_edit_date": 1495540316, "creation_date": 1447274316, "answer_id": 33659397, "question_id": 33659075, "link": "https://stackoverflow.com/questions/33659075/dequeue-iterator-not-dereferencable/33659397#33659397", "title": "Dequeue iterator not dereferencable", "body": "<p>Inside the if statements within the main while loop, you have some calls to <code>pop()</code> without checking if the deque is empty for example</p>\n\n<pre><code> while(c != \"(\") {\n     postfix += c + \" \";\n     c = s.top();\n     s.pop();\n }\n</code></pre>\n\n<p>This should probably be:</p>\n\n<pre><code>while(c != \"(\" &amp;&amp; !s.empty()) {\n\n}\n</code></pre>\n\n<p>And the same below</p>\n\n<pre><code>while(precedence(s.top())&gt;=precedence(token))\n{\n      //put on bottom if need be\n      string c = s.top();\n      s.pop();\n      postfix += c;\n      postfix += \" \";\n }\n s.push(token);\n</code></pre>\n\n<p>These are quite likely sources of invalid access. In general you should try to use <code>gdb</code> or <code>valgrind --tool=memcheck</code> which will show you the source of error. Or any other debugger really...</p>\n\n<p>Also if the token is a single character as I suspect it should be, make it a <code>char</code> not a <code>char *</code>. Then in your token comparisons use <code>token == ')'</code> (note the single quotes) which compares two <em>characters</em> and not what you have now which compares a char pointer with a string literal... This will probably apply to all the data structures that you maintain as well which should become, e.g. <code>deque&lt;char&gt; ...</code></p>\n\n<p>Finally pick up <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">any decent introductory C++</a> book and read it. You will thank yourself later.</p>\n"}], "owner": {"reputation": 69, "user_id": 5552116, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/4ace1a13e790dc09e577bba783d625ff?s=128&d=identicon&r=PG&f=1", "display_name": "Gary", "link": "https://stackoverflow.com/users/5552116/gary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447274954, "creation_date": 1447273073, "last_edit_date": 1447273358, "question_id": 33659075, "link": "https://stackoverflow.com/questions/33659075/dequeue-iterator-not-dereferencable", "title": "Dequeue iterator not dereferencable", "body": "<p>Through doing a little research online, I've found that this is error is caused by trying to pop something off an empty stack. In my code, I thought I tried to make sure this exact thing wouldn't happen by storing the top of my stack in a temporary string called <code>c</code>, but for some reason the error keeps occurring. This is a project related to converting infix notation to postfix notation. When I input <code>1+2+3</code>, I should get <code>12+3+</code>, but instead this error occurs. The error occurs in the precedence while loop.</p>\n\n<pre><code>stack &lt;string&gt; InfixToPostfix(char * expr)\n{\n  // YOUR CODE STARTS HERE! \n char* token;\n stack&lt;string&gt; s;\n string postfix;\n stack&lt;string&gt; p;\n                                     // use stack s to manipulate the infix      to postfix\n s.push(\"(\");\n  token = strtok (expr,\" \"); // get the first token\n  while(!s.empty())\n  {\n          if(token==\"(\")\n        {\n            s.push(token);\n          }\n         else if(token==\")\")\n      {\n            string c=s.top();\n            s.pop();\n             while(c != \"(\")\n            {\n            postfix += c + \" \";\n            c = s.top();\n            s.pop();\n        }\n  }\n  else if(isNumber(token))\n  {\n      postfix+=token;\n  }\n  else \n  {\n      while(precedence(s.top())&gt;=precedence(token))\n      {\n          //put on bottom if need be\n\n           string c = s.top();\n            s.pop();\n            postfix += c;\n            postfix += \" \";\n      }\n      s.push(token);\n  }\n\ntoken = strtok(NULL, \" \"); // use blanks as delimiter\n  if (token == NULL) // no more tokens, exit the loop\n     break;\n  }\n  p.push(postfix);\n  return p;\n}\n</code></pre>\n"}, {"tags": ["c++", "cygwin", "posix"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 1, "creation_date": 1447272521, "post_id": 33658930, "comment_id": 55091454, "body": "...Yeah. When you use <code>-std=*</code> options that force the compiler to conform to the standard, you don&#39;t get the non-standard functions. That&#39;s kind of the point, I&#39;m not sure what you were expecting."}, {"owner": {"reputation": 379, "user_id": 4391207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b26eed15967a3f39aa0a7f3ecd53b586?s=128&d=identicon&r=PG", "display_name": "avamsi", "link": "https://stackoverflow.com/users/4391207/avamsi"}, "edited": false, "score": 0, "creation_date": 1447272947, "post_id": 33658930, "comment_id": 55091660, "body": "@hvd, working in <a href=\"https://ideone.com/wO7TPz\" rel=\"nofollow noreferrer\">Ideone</a>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1447273176, "post_id": 33658930, "comment_id": 55091772, "body": "I see at least three possibilities for that: 1) Ideone isn&#39;t using <code>-std=c++14</code>. 2) Ideone is including additional command-line options to make non-standard functions available. 3) Ideone is using a non-conforming standard library implementation. The first two of these could be checked if Ideone documents which command-line options it passes to the compiler."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1447273698, "post_id": 33658930, "comment_id": 55092049, "body": "@hvd <code>putchar_unlocked</code> is perfectly standard POSIX.1-2001. I&#39;m not certain if <code>#include &lt;cstdio&gt;</code> should provide it though, of if <code>#include &lt;stdio.h&gt;</code> should be used instead..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1447274152, "post_id": 33658930, "comment_id": 55092296, "body": "@hyde I should&#39;ve specified &quot;C standard&quot;. Yes, it is, but even then, only with either additional command-line options, or in non-conforming modes. Anyway, Cygwin doesn&#39;t conform to POSIX, although it does make many POSIX functions available in some form."}, {"owner": {"reputation": 18780, "user_id": 683218, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/7Vy7c.png?s=128&g=1", "display_name": "tinlyx", "link": "https://stackoverflow.com/users/683218/tinlyx"}, "edited": false, "score": 2, "creation_date": 1447274416, "post_id": 33658930, "comment_id": 55092436, "body": "I don&#39;t see how this question is so downvoted. valid to me."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1447274040, "post_id": 33659209, "comment_id": 55092244, "body": "That&#39;s the glibc documentation. The OP isn&#39;t using glibc."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1447274265, "post_id": 33659209, "comment_id": 55092354, "body": "Cygwin doesn&#39;t use glibc, and actually testing it, <code>_POSIX_SOURCE</code> doesn&#39;t make <code>putchar_unlocked</code> available."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1447274296, "post_id": 33659209, "comment_id": 55092377, "body": "@hvd obviously it&#39;s in <i>something</i> since the code seems to work with g++ default switches"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1447274337, "post_id": 33659209, "comment_id": 55092397, "body": "@M.M Yes. It&#39;s available on Cygwin when no standards-conforming mode is used. Really. It&#39;s conditional in the Cygwin headers on <code>__STRICT_ANSI__</code> not being defined. So don&#39;t select a standards-conforming mode."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 379, "user_id": 4391207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b26eed15967a3f39aa0a7f3ecd53b586?s=128&d=identicon&r=PG", "display_name": "avamsi", "link": "https://stackoverflow.com/users/4391207/avamsi"}, "edited": false, "score": 0, "creation_date": 1447275633, "post_id": 33659209, "comment_id": 55093043, "body": "@krikx Edited, check the answer now!"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1447275652, "post_id": 33659209, "comment_id": 55093055, "body": "@hvd Investigated, edited answer, thanks for pointing this out."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1447275798, "post_id": 33659209, "comment_id": 55093131, "body": "I think I already covered what you put in your edit in my previous comment and my answer, but there&#39;s no harm in having two answers cover it. :)"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1447275931, "post_id": 33659209, "comment_id": 55093186, "body": "@hvd Yeah, I noticed your answer only after completing the rewrite, and since the answers don&#39;t overlap 100%, keeping both is probably good."}], "tags": [], "owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "is_accepted": false, "score": 2, "last_activity_date": 1447275841, "last_edit_date": 1447275841, "creation_date": 1447273590, "answer_id": 33659209, "question_id": 33658930, "link": "https://stackoverflow.com/questions/33658930/putchar-unlocked-doesnt-work-in-c-14-standard/33659209#33659209", "title": "putchar_unlocked doesn&#39;t work in C++ 14 standard", "body": "<p><code>putchar_unlocked</code> is not part of any C++ standard. It is part of POSIX standard, but defining <code>-std=c++14</code> causes <em>gcc</em> to define <code>__STRICT_ANSI__</code> macro. <em>Cygwin</em> <a href=\"https://cygwin.com/faq/faq.html#faq.programming.glibc\" rel=\"nofollow\">uses</a> <a href=\"https://sourceware.org/newlib/\" rel=\"nofollow\">Newlib</a> for C standard library, and <a href=\"https://sourceware.org/git/gitweb.cgi?p=newlib-cygwin.git;a=blob;f=newlib/libc/include/stdio.h;h=9d8fd862ef7363e12800f77ff78a485cf070bc49;hb=HEAD#l314\" rel=\"nofollow\">from its sources</a> we can see that this prevents <code>putchar_unlocked</code> from being declared, and also that there isn't any other macro to enable it anyway.</p>\n\n<p>Therefore, we need to get rid of <code>__STRICT_ANSI__</code>. Using <code>-std=gnu++14</code> should do that:</p>\n\n<pre><code>g++ -std=gnu++14 foo.cpp &amp;&amp; a.exe &amp;&amp; rm ./a.exe\n</code></pre>\n\n<hr>\n\n<p>A comment under the question points out that the code works with <a href=\"https://ideone.com/wO7TPz\" rel=\"nofollow\">Ideone</a>. This is probably, because Ideone runs on different platform (such as Linux), which probably has <code>glibc</code>, which provides <code>putchar_unlocked</code> with different conditions (from <a href=\"http://linux.die.net/man/3/putchar_unlocked\" rel=\"nofollow\">this manual page</a>):</p>\n\n<blockquote>\n  <p>Feature Test Macro Requirements for glibc (see\n  <a href=\"http://linux.die.net/man/7/feature_test_macros\" rel=\"nofollow\">feature_test_macros(7)</a>):</p>\n  \n  <p>getc_unlocked(), getchar_unlocked(), putc_unlocked(),\n  putchar_unlocked():\n      _POSIX_C_SOURCE >= 1 || _XOPEN_SOURCE || _POSIX_SOURCE || _BSD_SOURCE || _SVID_SOURCE</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1447274810, "post_id": 33659457, "comment_id": 55092623, "body": "Well, almost nothing implements any version of any standard exactly, but some approximations are good enough to be useful."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1447275064, "post_id": 33659457, "comment_id": 55092759, "body": "@n.m. Sure. I have no problem saying glibc closely conforms to POSIX, for instance, even if it has bugs, but Cygwin isn&#39;t in the same category. Cygwin doesn&#39;t aim to conform to POSIX, and actually lacks the part that&#39;s directly relevant to this question (the POSIX feature macros). Note that I certainly wouldn&#39;t say that makes Cygwin useless in general -- I use it extensively -- just not useful as an attempted POSIX implementation."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "is_accepted": true, "score": 2, "last_activity_date": 1447274557, "creation_date": 1447274557, "answer_id": 33659457, "question_id": 33658930, "link": "https://stackoverflow.com/questions/33658930/putchar-unlocked-doesnt-work-in-c-14-standard/33659457#33659457", "title": "putchar_unlocked doesn&#39;t work in C++ 14 standard", "body": "<p><code>putchar_unlocked</code> isn't part of any version of the C or C++ standards, and Cygwin doesn't implement any other standard that does provide <code>putchar_unlocked</code>.</p>\n\n<p>Cygwin does provide <code>putchar_unlocked</code> as a non-standard extension, but you need to actually leave non-standard extensions enabled.</p>\n\n<p>The default <code>-std=</code> version is <code>-std=gnu++03</code> (or one of its synonyms). This is C++03 plus extensions. You changed it to <code>-std=c++14</code>. This is C++14 <em>without</em> extensions. Use <code>-std=gnu++14</code> to leave extensions enabled.</p>\n"}], "owner": {"reputation": 379, "user_id": 4391207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b26eed15967a3f39aa0a7f3ecd53b586?s=128&d=identicon&r=PG", "display_name": "avamsi", "link": "https://stackoverflow.com/users/4391207/avamsi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 0, "accepted_answer_id": 33659457, "answer_count": 2, "score": 1, "last_activity_date": 1447275841, "creation_date": 1447272394, "last_edit_date": 1447274382, "question_id": 33658930, "link": "https://stackoverflow.com/questions/33658930/putchar-unlocked-doesnt-work-in-c-14-standard", "title": "putchar_unlocked doesn&#39;t work in C++ 14 standard", "body": "<p>I am using g++ (GCC) 4.9.3 on Cygwin. I am not able to use <code>getchar_unlocked</code> or <code>putchar_unlocked</code> with C++ 14 standard.<br>\nConsider this sample code</p>\n\n<pre><code>#include &lt;cstdio&gt;\n\nint main() {\n    putchar_unlocked('1');\n    return 0;\n}\n</code></pre>\n\n<p>When I compile and run with</p>\n\n<pre><code>g++ foo.cpp &amp;&amp; a.exe &amp;&amp; rm ./a.exe\n</code></pre>\n\n<p>I am getting expected output 1.<br>\nBut when I do</p>\n\n<pre><code>g++ -std=c++14 foo.cpp &amp;&amp; a.exe &amp;&amp; rm ./a.exe\n</code></pre>\n\n<p>I am getting error saying putchar_unlocked was not declared.</p>\n\n<pre><code>foo.cpp: In function 'int main()':\nfoo.cpp:4:22: error: 'putchar_unlocked' was not declared in this scope\n  putchar_unlocked('1');\n                      ^\n</code></pre>\n"}, {"tags": ["c++", "performance", "memory", "memory-management"], "comments": [{"owner": {"reputation": 27317, "user_id": 893693, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/yHFyJ.jpg?s=128&g=1", "display_name": "Stephan Dollberg", "link": "https://stackoverflow.com/users/893693/stephan-dollberg"}, "edited": false, "score": 4, "creation_date": 1447272709, "post_id": 33658908, "comment_id": 55091551, "body": "1. Use a contiguous chunk of memory and map indexes yourself. 2. Use the boost vector implementation with the constructor that avoids zero initialisation of all vector elements."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 5, "creation_date": 1447272720, "post_id": 33658908, "comment_id": 55091558, "body": "There&#39;s no reason to allocate the vectors inside the vectors dynamically. That said, creating vectors and initializing them to zero is pretty costly. Rather, memory-map the files into memory, they seem to resemble the in-memory structure of float arrays anyway. Also, check the sizes, because even with slow allocation, it shouldn&#39;t take longer than the slow IO operations."}, {"owner": {"reputation": 211, "user_id": 5524291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d7abd48da93dcd234f3195661e21446?s=128&d=identicon&r=PG&f=1", "display_name": "Niels van Eldik", "link": "https://stackoverflow.com/users/5524291/niels-van-eldik"}, "edited": false, "score": 0, "creation_date": 1447272966, "post_id": 33658908, "comment_id": 55091678, "body": "I tend to agree with inf here, just use a single block allocation. That will be the most memory and cpu efficient way of reserving the space. Also make sure you run on a machine with plenty of memory. Once your job starts swapping you will be lost (this might actually explain why the creation of the vectors is slower). If you really care about speed profile your job using for example the callgrind plugin of valgrind. Very often you will be surprised when you find out why you code is slow. It tends to be different than you expect."}, {"owner": {"reputation": 1167, "user_id": 292807, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f2e239c6f02e87421124b2d01c337506?s=128&d=identicon&r=PG&f=1", "display_name": "Stan", "link": "https://stackoverflow.com/users/292807/stan"}, "edited": false, "score": 0, "creation_date": 1447273127, "post_id": 33658908, "comment_id": 55091751, "body": "re: allocating one big chunk, I did mention that I tried that, but I get a bad_malloc fail when I try to allocate a 10GB vector. Should I not be running into that problem, i.e. should vector be able to handle such a size?"}, {"owner": {"reputation": 1167, "user_id": 292807, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f2e239c6f02e87421124b2d01c337506?s=128&d=identicon&r=PG&f=1", "display_name": "Stan", "link": "https://stackoverflow.com/users/292807/stan"}, "edited": false, "score": 0, "creation_date": 1447273368, "post_id": 33658908, "comment_id": 55091877, "body": "I didn&#39;t consider initialization, I guess that has to a big part of the overhead. I&#39;ll give memory mapping or the boost vector a shot."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1447274232, "post_id": 33658908, "comment_id": 55092334, "body": "On which operating system, which compiler, which processor (x86-64?), which ABI? Does your computer have 12Gbytes of RAM?"}, {"owner": {"reputation": 1167, "user_id": 292807, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f2e239c6f02e87421124b2d01c337506?s=128&d=identicon&r=PG&f=1", "display_name": "Stan", "link": "https://stackoverflow.com/users/292807/stan"}, "edited": false, "score": 0, "creation_date": 1447274428, "post_id": 33658908, "comment_id": 55092442, "body": "centos 6.6, gcc 5.2.0, x86-64, 128GB RAM"}, {"owner": {"reputation": 161657, "user_id": 122718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/213Kw.png?s=128&g=1", "display_name": "usr", "link": "https://stackoverflow.com/users/122718/usr"}, "edited": false, "score": 1, "creation_date": 1447274524, "post_id": 33658908, "comment_id": 55092485, "body": "Maybe you should profile what exactly is taking so long. Maybe it is something that can be fixed easily."}, {"owner": {"reputation": 17562, "user_id": 568635, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25f0758867b3f251cfdf101b9611b9b5?s=128&d=identicon&r=PG", "display_name": "Eelke", "link": "https://stackoverflow.com/users/568635/eelke"}, "edited": false, "score": 0, "creation_date": 1447310498, "post_id": 33658908, "comment_id": 55104565, "body": "Why create vectors why not just mmap the files and work with the data directly?"}], "answers": [{"tags": [], "owner": {"reputation": 6058, "user_id": 1952500, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cd15d38fd1e508e6c2bcad9e153e789d?s=128&d=identicon&r=PG", "display_name": "user1952500", "link": "https://stackoverflow.com/users/1952500/user1952500"}, "is_accepted": false, "score": 1, "last_activity_date": 1447272896, "creation_date": 1447272896, "answer_id": 33659043, "question_id": 33658908, "link": "https://stackoverflow.com/questions/33658908/allocating-10gb-of-vectors-how-can-i-speed-it-up/33659043#33659043", "title": "Allocating ~10GB of vectors - how can I speed it up?", "body": "<p>Use multiple threads for both memory allocation and reading files. You can create a set of say 15 threads and let each thread pick up the next available job.</p>\n\n<p>When you dig deeper, you will see that opening the file also has a considerable overhead which gets reduced substantially by using multiple threads.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4842163"}, "is_accepted": true, "score": 2, "last_activity_date": 1447313910, "last_edit_date": 1447313910, "creation_date": 1447310018, "answer_id": 33665616, "question_id": 33658908, "link": "https://stackoverflow.com/questions/33658908/allocating-10gb-of-vectors-how-can-i-speed-it-up/33665616#33665616", "title": "Allocating ~10GB of vectors - how can I speed it up?", "body": "<p><code>Is there something I could do to speed up the memory allocation? I tried allocating one large vector instead, but that failed with bad_malloc -- I guess a 10GB vector isn't ok.</code></p>\n\n<p>I mainly wanted to respond by addressing this one part: <code>bad_alloc</code> exceptions tend to be misunderstood. They're not the result of \"running out of memory\" -- they're the result of the system failing to find a contiguous block of unused pages. You could have plenty more than enough memory available and still get a <code>bad_alloc</code> if you get in the habit of trying to allocate massive blocks of contiguous memory, simply because the system can't find a <em>contiguous</em> set of pages that are free. You can't necessarily avoid <code>bad_alloc</code> by \"making sure plenty of memory is free\" as you might have already seen where having over 100 gigabytes of RAM can still make you vulnerable to them when trying to allocate a mere 10 GB block. The way to avoid them is to allocate memory in smaller chunks instead of one epic array. At a large enough scale, structures like unrolled lists can start to offer favorable performance over a gigantic array and a much lower (exponentially) probability of ever getting a <code>bad_alloc</code> exception unless you actually <em>do</em> exhaust all the memory available. There is actually a peak where contiguity and the locality of reference it provides ceases to become beneficial and may actually hinder memory performance at a large enough size (mainly due to paging, not caching).</p>\n\n<p>For the kind of epic scale input you're handling, you might actually get better performance out of <code>std::deque</code> given the page-friendly nature of it (it's one of the few times where deque can really shine without need for <code>push_front</code> vs. <code>vector</code>). It's something to potentially try if you don't need perfect contiguity.</p>\n\n<p>Naturally it's best if you measure this with an actual profiler. It'll help us hone in on the actual problem, though it might not be completely shocking (surprising but maybe not shocking) that you might be bottlenecked by memory here instead of disk IO given the kind of \"massive number of massive blocks\" you're allocating (disk IO is slow but memory heap allocation can sometimes be expensive if you are really stressing the system). It depends a lot on the system's allocation strategy but even slab or buddy allocators can fall back to a much slower code branch if you allocate such epic blocks of memory and en masse, and allocations may even start to require something resembling a search or more access to secondary storage in those extreme cases (here I'm afraid I'm not sure exactly what goes on behind the hood when allocating so many massive blocks, but I have \"felt\" and measured these kinds of bottlenecks before but in a way where I never quite figured out what the OS was doing exactly -- this above paragraph is purely conjecture).</p>\n\n<p>Here it's kind of counter-intuitive but you can often get better performance allocating a larger number of smaller blocks. Typically that makes things worse, but if we're talking about 3 million floats per memory block and a thousand memory blocks like it, it might help to start allocating in, say, page-friendly 4k chunks. Typically it's cheaper to pre-allocate memory in large blocks in advance and pool it, but \"large\" in this case is more like 4 kilobyte blocks, not 10 gigabyte blocks.</p>\n\n<p><code>std::deque</code> will typically do this kind of thing for you so it might be the quickest thing to try out to see if it helps. With <code>std::deque</code>, you should be able to make a single one for all 10 GB worth of contents without splitting it into smaller ones to avoid <code>bad_alloc</code>. It also doesn't have the zero-initialization overhead of the entire contents that some cited, and <code>push_backs</code> to it are constant-time even in the worst-case scenario (not amortized constant time as with <code>std::vector</code>), so I would try <code>std::deque</code> with actually <code>push_back</code> instead of pre-sizing it and using <code>operator[]</code>. You could read the file contents in small chunks at a time (ex: using 4k byte buffers) and just push back the floats. It's something to try anyway.</p>\n\n<p>Anyway, these are all just educated guesses without code and profiling measurements, but these are some things to try out after your measurements.</p>\n\n<p>MMFs may also be the ideal solution for this scenario. Let the OS handle all the tricky details of what it takes to access the file's contents.</p>\n"}, {"tags": [], "owner": {"reputation": 3702, "user_id": 651394, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f7eed7c0171fea41bed5f94cf641348a?s=128&d=identicon&r=PG", "display_name": "Ilya Matveychikov", "link": "https://stackoverflow.com/users/651394/ilya-matveychikov"}, "is_accepted": false, "score": 0, "last_activity_date": 1447311572, "creation_date": 1447311572, "answer_id": 33665893, "question_id": 33658908, "link": "https://stackoverflow.com/questions/33658908/allocating-10gb-of-vectors-how-can-i-speed-it-up/33665893#33665893", "title": "Allocating ~10GB of vectors - how can I speed it up?", "body": "<p>You don't need to handle all the data in memory. Instead of that, you should use something like virtual vector which loads required data when needed. Using that approach saves the memory and don't brings your to side effects of huge memory allocation.</p>\n"}], "owner": {"reputation": 1167, "user_id": 292807, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f2e239c6f02e87421124b2d01c337506?s=128&d=identicon&r=PG&f=1", "display_name": "Stan", "link": "https://stackoverflow.com/users/292807/stan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "accepted_answer_id": 33665616, "answer_count": 3, "score": 2, "last_activity_date": 1447313910, "creation_date": 1447272310, "question_id": 33658908, "link": "https://stackoverflow.com/questions/33658908/allocating-10gb-of-vectors-how-can-i-speed-it-up", "title": "Allocating ~10GB of vectors - how can I speed it up?", "body": "<p>I'm loading about ~1000 files, each representing an array of ~3 million floats. I need to have them all in memory together as I need to do some calculations that involve all of them.</p>\n\n<p>In the code below, I've broken out the memory allocation and file reading, so I can observe the speed of each separately. I was a bit surprised to find the memory allocation taking much longer than the file reading.</p>\n\n<pre><code>  std::vector&lt;std::vector&lt;float&gt; * &gt; v(matrix_count);   \n  for(int i=0; i &lt; matrix_count; i++) {\n    v[i] = new std::vector&lt;float&gt;(array_size);\n  }\n\n  for(int i=0; i &lt; matrix_count; i++) {\n    std::ifstream is(files[i]);\n    is.read((char*) &amp;((*v[i])[0]), size);\n    is.close();\n  }\n</code></pre>\n\n<p>Measuring the time, the allocating loop took 6.8s while file loading took 2.5s. It seems counter-intuitive that reading from the disk is almost 3x faster than just allocating space for it.</p>\n\n<p>Is there something I could do to speed up the memory allocation? I tried allocating one large vector instead, but that failed with bad_malloc -- I guess a 10GB vector isn't ok.</p>\n"}, {"tags": ["c++", "arrays", "heap-memory"], "comments": [{"owner": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "edited": false, "score": 0, "creation_date": 1447273450, "post_id": 33658890, "comment_id": 55091928, "body": "<a href=\"http://stackoverflow.com/questions/4810664/\">relevant FAQ</a>"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 4, "last_activity_date": 1447272367, "creation_date": 1447272367, "answer_id": 33658924, "question_id": 33658890, "link": "https://stackoverflow.com/questions/33658890/dynamical-2d-array-int-ptr4-new-int74/33658924#33658924", "title": "dynamical 2d array: int (*ptr)[4] = new int[7][4];", "body": "<blockquote>\n  <p>Why should I use the more complicated method I mentioned first, when I can create a dynamical 2d array with this one line:</p>\n</blockquote>\n\n<p>You would need that when the number of columns are different in the rows. Say you have a 2D array that looks like:</p>\n\n<pre><code>1 2 3 4 5 6 7 8 9 10\n1 2 3 4\n9 8 8 5 6 4\n</code></pre>\n\n<p>For a case like this the second method won't work. You need to use:</p>\n\n<pre><code>p[0] = new int[10];\np[1] = new int[4];\np[2] = new int[6];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1447274694, "creation_date": 1447274694, "answer_id": 33659495, "question_id": 33658890, "link": "https://stackoverflow.com/questions/33658890/dynamical-2d-array-int-ptr4-new-int74/33659495#33659495", "title": "dynamical 2d array: int (*ptr)[4] = new int[7][4];", "body": "<p><code>int (*rows)[4]</code> requires that the <code>4</code> is a compile-time constant. You cannot use this method if the number of columns is not known until runtime.</p>\n\n<p>However you should use neither of those methods. To write safe code, using raw pointers should be avoided. By using proper containers , memory management is done for you, meaning that your code is clear and less likely to contain mistakes.</p>\n\n<pre><code>// Neither rows nor columns known at compile-time\nstd::vector&lt;std::vector&lt;int&gt;&gt; x(7, std::vector&lt;int&gt;(4));\n\n// columns known at compile-time\nstd::vector&lt;std::array&lt;int, 4&gt;&gt; x(7);\n</code></pre>\n\n<p>In both cases you can access the elements by <code>x[5][2]</code> and so on.</p>\n"}], "owner": {"reputation": 105, "user_id": 4073752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82bd19eaafd2e66a0af406a054bbd02a?s=128&d=identicon&r=PG&f=1", "display_name": "Aikynn247", "link": "https://stackoverflow.com/users/4073752/aikynn247"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 33659495, "answer_count": 2, "score": 3, "last_activity_date": 1447276571, "creation_date": 1447272190, "question_id": 33658890, "link": "https://stackoverflow.com/questions/33658890/dynamical-2d-array-int-ptr4-new-int74", "title": "dynamical 2d array: int (*ptr)[4] = new int[7][4];", "body": "<p>As far as I know, dynamically allocated 2d arrays should be allocated like this:</p>\n\n<pre><code>int **rows = new int*[7]; \n//for loop assigning all seven rows[i] a \"new int[4]\"\n</code></pre>\n\n<p>However, the following also works for me: </p>\n\n<pre><code>int (*ptr)[4] = new int[7][4];  //create dynamic 2d array\nfor(int i = 0; i &lt; 7; ++i)      //initialize and test\n{    \n    for(int j = 0; j &lt; 4; ++j)\n    {\n        ptr[i][j] = i + j;\n        cout &lt;&lt; ptr[i][j] &lt;&lt; ' ';\n    }\n    cout &lt;&lt; endl;\n}\ndelete[] ptr;\n\n /* \noutput: \n0 1 2 3 \n1 2 3 4 \n2 3 4 5 \n3 4 5 6 \n4 5 6 7 \n5 6 7 8 \n6 7 8 9 \n*/\n</code></pre>\n\n<p>Why should I use the more complicated method I mentioned first, when I can create a dynamical 2d array with this one line:</p>\n\n<pre><code>int (*ptr)[4] = new int[7][4];\n</code></pre>\n\n<p>I appreciate any insights!</p>\n\n<p>(I did not find a memory leak using valgrind.)</p>\n"}, {"tags": ["c++", "iomanip", "significant-digits"], "comments": [{"owner": {"reputation": 4724, "user_id": 1024740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1037d544b43c71c34225fac55e0c7750?s=128&d=identicon&r=PG", "display_name": "Rob Latham", "link": "https://stackoverflow.com/users/1024740/rob-latham"}, "edited": false, "score": 2, "creation_date": 1447272222, "post_id": 33658851, "comment_id": 55091279, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/4607473/c-significant-figures\">C++ significant figures</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1447272587, "post_id": 33658851, "comment_id": 55091494, "body": "<i>&quot;P.S. I hope I have formatted my first question OK!&quot;</i> Formatting isn&#39;t the actual problem. Lacking a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1447274100, "post_id": 33658851, "comment_id": 55092267, "body": "Read <a href=\"http://floating-point-gui.de/\" rel=\"nofollow noreferrer\">floating-point-gui.de</a> &amp; consider perhaps some <a href=\"https://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic\" rel=\"nofollow noreferrer\">bignum</a> library like <a href=\"http://gmplib.org/\" rel=\"nofollow noreferrer\">GMPlib</a>"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1447332763, "post_id": 33658851, "comment_id": 55116418, "body": "@ John Treen: I have changed my answer. Please take a look."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 2244314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f9108d60e8da99d6499c5dc02d88d62?s=128&d=identicon&r=PG", "display_name": "treeno", "link": "https://stackoverflow.com/users/2244314/treeno"}, "edited": false, "score": 0, "creation_date": 1447279023, "post_id": 33660552, "comment_id": 55094783, "body": "Thanks, but as I said without fixed trailing zeros are omitted so significant figures are lost."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1447284523, "post_id": 33660552, "comment_id": 55097206, "body": "@Bob__ try printing <code>0</code>, result should be <code>0.00000000000000</code> or thereabouts."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1447332688, "post_id": 33660552, "comment_id": 55116364, "body": "@hyde thank you for the input. I&#39;ve changed my answer."}], "tags": [], "owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": true, "score": 3, "last_activity_date": 1504677760, "last_edit_date": 1504677760, "creation_date": 1447278865, "answer_id": 33660552, "question_id": 33658851, "link": "https://stackoverflow.com/questions/33658851/significant-figures-in-c/33660552#33660552", "title": "Significant figures in C++", "body": "<p>You can simply use scientific (note the 14 instead of 15):</p>\n\n<pre><code>std::cout &lt;&lt; std::scientific &lt;&lt; std::setprecision(14) &lt;&lt; -0.123456789012345678 &lt;&lt; std::endl;\nstd::cout &lt;&lt; std::scientific &lt;&lt; std::setprecision(14) &lt;&lt; -1.234567890123456789 &lt;&lt; std::endl;\n\n-1.23456789012346e-01\n-1.23456789012346e+00\n</code></pre>\n\n<p>or you can use a function:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;iomanip&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n\nenum vis_opt { scientific, decimal, decimal_relaxed };\n\nstd::string figures(double x, int nfig, vis_opt vo=decimal) {\n    std::stringstream str;\n\n    str &lt;&lt; std::setprecision(nfig-1) &lt;&lt; std::scientific &lt;&lt; x;\n    std::string s = str.str();\n    if ( vo == scientific )\n        return s;\n    else {\n        std::stringstream out;\n        std::size_t pos;\n\n        int ileft = std::stoi(s,&amp;pos);\n\n        std::string dec = s.substr(pos + 1, nfig - 1);\n        int e = std::stoi(s.substr(pos + nfig + 1));\n\n        if ( e &lt; 0 ) {\n            std::string zeroes(-1-e,'0');\n            if ( ileft &lt; 0 ) \n                out &lt;&lt; \"-0.\" &lt;&lt; zeroes &lt;&lt; -ileft &lt;&lt; dec;\n            else\n                out &lt;&lt; \"0.\" &lt;&lt; zeroes &lt;&lt; ileft &lt;&lt; dec;\n        } else if ( e == 0) {\n            out &lt;&lt; ileft &lt;&lt; '.' &lt;&lt; dec;\n        } else if ( e &lt; ( nfig - 1) ) {\n            out &lt;&lt; ileft &lt;&lt; dec.substr(0,e) &lt;&lt; '.' &lt;&lt; dec.substr(e);\n        } else if ( e == ( nfig - 1) ) {\n            out &lt;&lt; ileft &lt;&lt; dec;\n        } else {\n            if ( vo == decimal_relaxed) {\n                out &lt;&lt; s;\n            } else {\n                out &lt;&lt; ileft &lt;&lt; dec &lt;&lt; std::string(e - nfig + 1,'0');\n            }\n        }\n\n        return out.str();   \n    }\n\n}\n\nint main() {\n    std::vector&lt;double&gt; test_cases = {\n        -123456789012345,\n        -12.34567890123456789,\n        -0.1234567890123456789,\n        -0.0001234,\n        0,\n        0.0001234,\n        0.1234567890123456789,\n        12.34567890123456789,\n        1.234567890123456789,\n        12345678901234,\n        123456789012345,\n        1234567890123456789.0,\n    };\n\n\n    for ( auto i : test_cases) {\n        std::cout &lt;&lt; std::setw(22) &lt;&lt; std::right &lt;&lt; figures(i,15,scientific);\n        std::cout &lt;&lt; std::setw(22) &lt;&lt; std::right &lt;&lt; figures(i,15) &lt;&lt; std::endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>My output is:</p>\n\n<pre><code> -1.23456789012345e+14      -123456789012345\n -1.23456789012346e+01     -12.3456789012346\n -1.23456789012346e-01    -0.123456789012346\n -1.23400000000000e-04 -0.000123400000000000\n  0.00000000000000e+00      0.00000000000000\n  1.23400000000000e-04  0.000123400000000000\n  1.23456789012346e-01     0.123456789012346\n  1.23456789012346e+01      12.3456789012346\n  1.23456789012346e+00      1.23456789012346\n  1.23456789012340e+13      12345678901234.0\n  1.23456789012345e+14       123456789012345\n  1.23456789012346e+18   1234567890123460000\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1447350050, "post_id": 33672247, "comment_id": 55128687, "body": "try 0.000123456789012345 or 123456789012345"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1447353077, "post_id": 33672247, "comment_id": 55130457, "body": "@Bob__ Thanks for pointing that out. Overflow on int, and trailing zeros after decimal were unaccounted for in my answer."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1447354446, "post_id": 33672247, "comment_id": 55131255, "body": "@Bob__: I&#39;ve attempted to address some of these inadequacies in my latest edit. Please feel free to find more :-) The general point I&#39;m trying to make is that, sans a library, there is no way to do what OP wants nicely with standard libraries, so they must compute it themselves."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1447356030, "post_id": 33672247, "comment_id": 55132197, "body": "I agree, as far as I know."}], "tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": false, "score": 1, "last_activity_date": 1447354854, "last_edit_date": 1592644375, "creation_date": 1447333971, "answer_id": 33672247, "question_id": 33658851, "link": "https://stackoverflow.com/questions/33658851/significant-figures-in-c/33672247#33672247", "title": "Significant figures in C++", "body": "<p>I've found some success in just computing the integer significant figures, and then setting the floating significant figures to be <code>X - &lt;integer sig figs&gt;</code>:</p>\n<h3>Edit</h3>\n<p>To address Bob's comments, I'll account for more edge cases. I've refactored the code somewhat to adjust the field precision based on leading and trailing zeros. There would still be an edge case I believe for very small values (like <code>std::numeric_limits&lt;double&gt;::epsilon</code>:</p>\n<pre><code>int AdjustPrecision(int desiredPrecision, double _in)\n{\n    // case of all zeros\n    if (_in == 0.0)\n        return desiredPrecision;\n        \n    \n    // handle leading zeros before decimal place\n    size_t truncated = static_cast&lt;size_t&gt;(_in);\n    \n    while(truncated != 0)\n    {\n        truncated /= 10;\n        --desiredPrecision;\n    }\n    \n    // handle trailing zeros after decimal place\n    _in *= 10;\n    while(static_cast&lt;size_t&gt;(_in) == 0)\n    {\n        _in *= 10;\n        ++desiredPrecision;\n    }\n        \n    return desiredPrecision;\n}\n</code></pre>\n<p>With more tests:</p>\n<pre><code>double a = 0.000123456789012345;\ndouble b = 123456789012345;\ndouble x = 0.12345678901234567890;\ndouble y = 1.12345678901234567890;\ndouble z = 11.12345678901234567890;\n\n\nstd::cout.setf( std::ios::fixed, std:: ios::floatfield);\n\nstd::cout &lt;&lt; &quot;a: &quot; &lt;&lt; std::setprecision(AdjustPrecision(15, a)) &lt;&lt; a &lt;&lt; std::endl;\nstd::cout &lt;&lt; &quot;b: &quot; &lt;&lt; std::setprecision(AdjustPrecision(15, b)) &lt;&lt; b &lt;&lt; std::endl;\nstd::cout &lt;&lt; &quot;x &quot; &lt;&lt; std::setprecision(AdjustPrecision(15, x))  &lt;&lt; x &lt;&lt; std::endl; \nstd::cout &lt;&lt; &quot;y &quot; &lt;&lt; std::setprecision(AdjustPrecision(15, y))  &lt;&lt; y &lt;&lt; std::endl; \nstd::cout &lt;&lt; &quot;z: &quot; &lt;&lt; std::setprecision(AdjustPrecision(15, z)) &lt;&lt; z &lt;&lt; std::endl;\n</code></pre>\n<p>Output:</p>\n<blockquote>\n<p>a: 0.000123456789012345 <br/>\nb: 123456789012345<br/>\nx 0.123456789012346<br/>\ny 1.12345678901235<br/>\nz: 11.1234567890123<br/></p>\n</blockquote>\n<p><a href=\"http://coliru.stacked-crooked.com/a/f74a4109991e0d4f\" rel=\"nofollow noreferrer\">Live Demo</a>\n<strike></p>\n<pre><code>int GetIntegerSigFigs(double _in)\n{\n    int toReturn = 0;\n    int truncated = static_cast&lt;int&gt;(_in);\n\n    while(truncated != 0)\n    {\n        truncated /= 10;\n        ++toReturn;\n    }\n    return toReturn;\n}\n</code></pre>\n<p>(I'm sure there are some edge cases I'm missing)</p>\n<p>And then using it:</p>\n<pre><code>double x = 0.12345678901234567890;\ndouble y = 1.12345678901234567890;\nstd::cout &lt;&lt; td::setprecision(15-GetIntegerSigFigs(x))  &lt;&lt; x \n&lt;&lt; &quot;\\t&quot; &lt;&lt; std::setprecision(15-GetIntegerSigFigs(y)) &lt;&lt; y &lt;&lt; &quot;\\n&quot;;\n</code></pre>\n<p>Prints:</p>\n<blockquote>\n<p>0.123456789012346    1.12345678901235</p>\n</blockquote>\n<p><a href=\"http://coliru.stacked-crooked.com/a/dec7cccc5557c20e\" rel=\"nofollow noreferrer\">Live Demo</a></strike></p>\n"}], "owner": {"reputation": 39, "user_id": 2244314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f9108d60e8da99d6499c5dc02d88d62?s=128&d=identicon&r=PG", "display_name": "treeno", "link": "https://stackoverflow.com/users/2244314/treeno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3166, "favorite_count": 0, "accepted_answer_id": 33660552, "answer_count": 2, "score": 2, "last_activity_date": 1504677760, "creation_date": 1447272040, "last_edit_date": 1504676502, "question_id": 33658851, "link": "https://stackoverflow.com/questions/33658851/significant-figures-in-c", "title": "Significant figures in C++", "body": "<p>I've written a program that calculates values in a series and all of the values are particularly lengthy doubles. I want to print these values each displaying 15 significant figures. Here's some code that illustrates the issue I'm having:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\nint main()\n{\n    double x = 0.12345678901234567890;\n    double y = 1.12345678901234567890;\n    cout &lt;&lt; setprecision(15) &lt;&lt; fixed &lt;&lt; x &lt;&lt; \"\\t\" &lt;&lt; y &lt;&lt; \"\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>With just setprecision trailing zeros are not shown so I added fixed as I have seen in other answers on this site. However, now I just seem to have 15 decimal places and for values that aren't 0.something this is not what I want. You can see this from the output of the above:</p>\n\n<pre><code>0.123456789012346       1.123456789012346\n</code></pre>\n\n<p>The first number has 15 sig figs but the second has 16. What can I do to resolve this?</p>\n\n<p>EDIT: I have been specifically asked to use setprecision, so I am unable to try cout.precision.</p>\n"}, {"tags": ["c++", "pointers", "tree", "opencl"], "comments": [{"owner": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "edited": false, "score": 0, "creation_date": 1447273755, "post_id": 33658840, "comment_id": 55092083, "body": "if you dont want to use an array use a vector instead ?"}, {"owner": {"reputation": 1526, "user_id": 2887128, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/55ee6a68a653f3a0ebee2329667c653f?s=128&d=identicon&r=PG", "display_name": "jaredready", "link": "https://stackoverflow.com/users/2887128/jaredready"}, "edited": false, "score": 0, "creation_date": 1447279277, "post_id": 33658840, "comment_id": 55094889, "body": "This is poorly worded. I&#39;m not sure what you&#39;re asking. What type of tree, what does &quot;load the tree to OpenCL&quot; mean? Why do you not want to use an array (or any other container?)?"}], "owner": {"reputation": 681, "user_id": 3645859, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c63b3e50cbe65d9a7c5735da468c0a04?s=128&d=identicon&r=PG&f=1", "display_name": "Addi", "link": "https://stackoverflow.com/users/3645859/addi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "closed_date": 1447358703, "answer_count": 0, "score": 0, "last_activity_date": 1447272073, "creation_date": 1447271989, "last_edit_date": 1447272073, "question_id": 33658840, "link": "https://stackoverflow.com/questions/33658840/tree-from-opencl-to-c", "closed_reason": "Duplicate", "title": "Tree from OpenCL to c++", "body": "<p>I need to process a tree in OpenCL. Problem is: I need to load the tree to OpenCL and it consists of many pointers. I dont want to put all the nodes into and array, but is there any other solution? </p>\n"}, {"tags": ["c++", "macos", "qt"], "answers": [{"tags": [], "owner": {"reputation": 7445, "user_id": 1204105, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cdaa2dc9b5d520106d750377e0d705cf?s=128&d=identicon&r=PG", "display_name": "adnan kamili", "link": "https://stackoverflow.com/users/1204105/adnan-kamili"}, "is_accepted": false, "score": 1, "last_activity_date": 1447273963, "creation_date": 1447273963, "answer_id": 33659305, "question_id": 33658663, "link": "https://stackoverflow.com/questions/33658663/qt-mac-app-not-restoring-after-closing/33659305#33659305", "title": "Qt Mac - App not restoring after closing", "body": "<p>To fix the issue, I wanted to know the source of <code>Close Event</code>. If source is user than minimize, else if source is <code>OS shutdown event</code> than exit.</p>\n\n<p>We can use event->spontaneous() to check that. Following is the working solution:</p>\n\n<pre><code>void myAPP::closeEvent(QCloseEvent *event)\n{\n    #ifdef Q_OS_MAC\n        if(event-&gt;spontaneous())\n        {\n            event-&gt;ignore();\n            this-&gt;setWindowState(Qt::WindowMinimized) ;\n            return;\n        }\n    #endif\n}\n</code></pre>\n"}], "owner": {"reputation": 7445, "user_id": 1204105, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cdaa2dc9b5d520106d750377e0d705cf?s=128&d=identicon&r=PG", "display_name": "adnan kamili", "link": "https://stackoverflow.com/users/1204105/adnan-kamili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1447273963, "creation_date": 1447271279, "last_edit_date": 1447271726, "question_id": 33658663, "link": "https://stackoverflow.com/questions/33658663/qt-mac-app-not-restoring-after-closing", "title": "Qt Mac - App not restoring after closing", "body": "<p>In Mac when we press the close button apps by default hide to dock. The same happens with my Qt app too, but it does not restore afterwards as expected. There are many posts which provide code to detect click on dock icon.</p>\n\n<p>I don't need to detect, I just want the default functionality, that it should restore.</p>\n\n<p>It restores if I minimize but not on close.</p>\n\n<p>The fix I used is:</p>\n\n<pre><code>void myAPP::closeEvent(QCloseEvent *event)\n{\n    #ifdef Q_OS_MAC\n        event-&gt;ignore();\n        this-&gt;setWindowState(Qt::WindowMinimized) ;\n        return;\n    #endif\n}\n</code></pre>\n\n<p>It makes it minimize on close and than my app restores properly. But now the issue is that it is preventing shutdown on Mac unless I exit the application. Shutdown makes the app minimize.</p>\n\n<p>I am using <code>Qt 5.4</code></p>\n"}, {"tags": ["c++", "enums"], "comments": [{"owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 0, "creation_date": 1448183037, "post_id": 33658628, "comment_id": 55470494, "body": "I know that I does not answer your question, but your syntax seem to intend to &#39;hide&#39; the get_ intention, then I wonder what you don&#39;t try to hide the set_ as well? Actually, you foo() could return a reference on the member, and then the set would be useless? Nevertheless, I don&#39;t think that would be a good idea, but makes me feel inconfortable with the &#39;getter&#39; hide as I cannot get some consistency with the set."}], "owner": {"reputation": 8356, "user_id": 153349, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/2jPpz.jpg?s=128&g=1", "display_name": "Wildcat", "link": "https://stackoverflow.com/users/153349/wildcat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 236, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1447272019, "creation_date": 1447271132, "question_id": 33658628, "link": "https://stackoverflow.com/questions/33658628/on-the-use-of-elaborated-type-specifiers-to-avoid-hiding-by-a-setter-function", "title": "On the use of elaborated type specifiers to avoid hiding by a setter function", "body": "<p>The more I program, the more I like the <a href=\"https://en.wikipedia.org/wiki/Snake_case\" rel=\"nofollow\">snake_case</a> and the less the <a href=\"https://en.wikipedia.org/wiki/CamelCase\" rel=\"nofollow\">CamelCase</a>. There is one particular inconvenience irritating me a bit: I do not like getters start from the <code>get_</code> prefix, but that is not always possible without some extra work when using the snake_case. Consider, for instance, a getter for a member of <code>enum</code> type defined inside a <code>class</code>,</p>\n\n<pre><code>class bar\n{\npublic:\n    enum class foo { a, b };\n    foo foo() const { return m_foo; }\n    void set_foo(foo new_foo) { m_foo = new_foo; }\nprivate:\n    foo m_foo;\n};\n</code></pre>\n\n<p>This won't compile since (if I understand correctly) enum <code>foo</code> is hidden in both the setter <code>new_foo</code> parameter type and the private <code>m_foo</code> member declaration by the prior <code>foo()</code> getter declaration. The obvious fix is to name the getter as <code>get_foo</code>, but as I said, I don't like it. </p>\n\n<p>When I compile with Clang it suggests another \"workaround\":</p>\n\n<pre><code>error: must use 'enum' tag to refer to type 'foo' in this scope\n    void set_foo(foo new_foo) { m_foo = new_foo; }\n                 ^\n                 enum \n</code></pre>\n\n<p>and the same for <code>m_foo</code> member. The following code indeed compiles fine</p>\n\n<pre><code>class bar\n{\npublic:\n    enum class foo { a, b };\n    foo foo() const { return m_foo; }\n    void set_foo(enum foo new_foo) { m_foo = new_foo; }\nprivate:\n    enum foo m_foo;\n};\n</code></pre>\n\n<p>It looks like the <a href=\"http://en.cppreference.com/w/cpp/language/elaborated_type_specifier\" rel=\"nofollow\">elaborated type specifiers</a> are even supposed to solve such kind of problems:</p>\n\n<blockquote>\n  <p>Elaborated type specifiers may be used to refer to a\n  previously-declared class name (class, struct, or union) or to a\n  previously-declared enum name even if the name was hidden by a\n  non-type declaration.</p>\n</blockquote>\n\n<p>But is not that a misuse of a language feature? Have you ever seen anything like that in libraries that use snake_case, such as, for instance, the Standard Library or Boost, or write it yourself?</p>\n"}, {"tags": ["c++", "c++11", "visual-c++"], "comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1447270492, "post_id": 33658414, "comment_id": 55090372, "body": "Actually just found out this is a dupe."}, {"owner": {"reputation": 105, "user_id": 4832168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hl0NB.jpg?s=128&g=1", "display_name": "Ghufran Hasan", "link": "https://stackoverflow.com/users/4832168/ghufran-hasan"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1447270974, "post_id": 33658414, "comment_id": 55090650, "body": "It is partially different. it is not duplicate question."}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1447271925, "post_id": 33658414, "comment_id": 55091134, "body": "Yes, it is a duplicate."}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 4832168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hl0NB.jpg?s=128&g=1", "display_name": "Ghufran Hasan", "link": "https://stackoverflow.com/users/4832168/ghufran-hasan"}, "edited": false, "score": 0, "creation_date": 1447271069, "post_id": 33658440, "comment_id": 55090692, "body": "Error in p.packaging not p.code"}, {"owner": {"reputation": 105, "user_id": 4832168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hl0NB.jpg?s=128&g=1", "display_name": "Ghufran Hasan", "link": "https://stackoverflow.com/users/4832168/ghufran-hasan"}, "edited": false, "score": 0, "creation_date": 1447272561, "post_id": 33658440, "comment_id": 55091478, "body": "I am not satisfied with your answer."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 105, "user_id": 4832168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hl0NB.jpg?s=128&g=1", "display_name": "Ghufran Hasan", "link": "https://stackoverflow.com/users/4832168/ghufran-hasan"}, "edited": false, "score": 0, "creation_date": 1447272636, "post_id": 33658440, "comment_id": 55091520, "body": "@GhufranHasan That&#39;s why I marked it duplicate and closed the question. Please read the duplicate carefully and you will find the answer there. And btw, &quot;Error&quot; means in general compile-time error. You are probably getting logic errors."}, {"owner": {"reputation": 105, "user_id": 4832168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hl0NB.jpg?s=128&g=1", "display_name": "Ghufran Hasan", "link": "https://stackoverflow.com/users/4832168/ghufran-hasan"}, "edited": false, "score": 0, "creation_date": 1447273005, "post_id": 33658440, "comment_id": 55091699, "body": "Getline function is use for the string. but I have used only cin operator and type of p.packaging is char.."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 105, "user_id": 4832168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hl0NB.jpg?s=128&g=1", "display_name": "Ghufran Hasan", "link": "https://stackoverflow.com/users/4832168/ghufran-hasan"}, "edited": false, "score": 0, "creation_date": 1447273133, "post_id": 33658440, "comment_id": 55091753, "body": "If you make the effort and read that duplicate, you&#39;ll see what is going on. Both <code>cin</code> and <code>getline</code> operate on the same input stream, and one newline is left in the stream after the last read before <code>cin &gt;&gt; packaging;</code>."}, {"owner": {"reputation": 105, "user_id": 4832168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hl0NB.jpg?s=128&g=1", "display_name": "Ghufran Hasan", "link": "https://stackoverflow.com/users/4832168/ghufran-hasan"}, "edited": false, "score": 0, "creation_date": 1447273366, "post_id": 33658440, "comment_id": 55091876, "body": "Ok..  You maybe true, but your solution is very complex.."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 105, "user_id": 4832168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hl0NB.jpg?s=128&g=1", "display_name": "Ghufran Hasan", "link": "https://stackoverflow.com/users/4832168/ghufran-hasan"}, "edited": false, "score": 0, "creation_date": 1447274979, "post_id": 33658440, "comment_id": 55092708, "body": "@GhufranHasan That&#39;s how C++ streams work. You have to ignore the newline after <code>cin</code> and before <code>getline</code>, otherwise the first <code>getline</code> eats up the newline, then you ignore a valid character from what was supposed to be read from the <code>getline</code>, then <code>cin</code> reads the second character from what the initial <code>getline</code> was supposed to read."}], "tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": false, "score": 1, "last_activity_date": 1447275236, "last_edit_date": 1447275236, "creation_date": 1447270424, "answer_id": 33658440, "question_id": 33658414, "link": "https://stackoverflow.com/questions/33658414/my-c-program-does-not-take-input-from-the-user/33658440#33658440", "title": "My C++ program does not take input from the user", "body": "<p>The problem is that after <code>std::cin &gt;&gt; p.code</code> there is an additional newline in the stream, which is \"eaten\" by <code>getline</code>. Solution: put the following line immediately after <code>std::cin &gt;&gt; p.code;</code></p>\n\n<pre><code>std::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n</code></pre>\n\n<p>to ignore it (make sure that you <code>#include &lt;limits&gt;</code> at the beginning).</p>\n"}], "owner": {"reputation": 105, "user_id": 4832168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hl0NB.jpg?s=128&g=1", "display_name": "Ghufran Hasan", "link": "https://stackoverflow.com/users/4832168/ghufran-hasan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1452, "favorite_count": 0, "closed_date": 1447270509, "answer_count": 1, "score": -2, "last_activity_date": 1447275236, "creation_date": 1447270332, "last_edit_date": 1447270907, "question_id": 33658414, "link": "https://stackoverflow.com/questions/33658414/my-c-program-does-not-take-input-from-the-user", "closed_reason": "Duplicate", "title": "My C++ program does not take input from the user", "body": "<p>My program does not take input.</p>\n\n<p>It is not the case of String, I am facing problem in cin operator, so I can't understand the output of the program.\nPlease give me reason and its accurate solution.</p>\n\n<pre><code>struct Product\n{\n        int code;\n        string description;\n        char packaging;\n        float price;\n        float discount;\n};\n\nint main()\n{\n        Product p;\n\n        cout &lt;&lt; \"\\nEnter a code of a product:\\t\";\n        cin &gt;&gt; p.code;\n\n        cout &lt;&lt; \"\\nEnter the description of a product:\\t\";\n        getline(cin, p.description);\n        cin.ignore();\n\n        cout &lt;&lt; \"\\nPress:\";\n        cout &lt;&lt; \"\\n\\t'L' or 'l' for large\";\n        cout &lt;&lt; \"\\n\\t'M' or 'm' for medium\";\n        cout &lt;&lt; \"\\n\\t'S' or 's' for small\";\n</code></pre>\n\n<p>Error</p>\n\n<hr>\n\n<pre><code>        cout &lt;&lt; \"\\n\\nChoose your package from the list above:\\t\";\n        cin &gt;&gt; p.packaging;\n</code></pre>\n\n<hr>\n\n<p>Error</p>\n\n<pre><code>   switch (p.packaging)\n       {\n       case 'L':\n       case 'l':\n                p.price = 50000;\n                cout &lt;&lt; \"\\nThe price of a product:\\t$\" &lt;&lt; p.price;\n                break;\n\n       case 'M':\n       case 'm':\n                p.price = 25000;\n                cout &lt;&lt; \"\\nThe price of a product:\\t$\" &lt;&lt; p.price;\n                break;\n\n       case 'S':\n       case 's':\n                p.price = 12500;\n                cout &lt;&lt; \"\\nThe price of a product:\\t$\" &lt;&lt; p.price;\n                break;\n\n      default:\n                cout &lt;&lt; \"\\nYou entered wrong\";\n      }\n\n      p.discount = 0.02;\n\n      cout &lt;&lt; \"\\nDISCOUNT:\\t\" &lt;&lt; p.discount;\n\n      double deductedPrice;\n\n      deductedPrice = p.price * p.discount;\n\n      p.price = p.price - deductedPrice;\n\n      cout &lt;&lt; \"\\nDiscounted price:\\t\" &lt;&lt; p.price;\n\n\n\n      cout &lt;&lt; \"\\n\\n\\n\\n\\n\";\n\n      system(\"pause\");\n\n      return 0;\n}\n</code></pre>\n\n<p>I have searched from the internet but I can't get any solution which satisfies me.</p>\n\n<h2>Snapshot of my output screen</h2>\n\n<p><a href=\"https://i.stack.imgur.com/ZvYyv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZvYyv.png\" alt=\"Output screen\"></a></p>\n"}, {"tags": ["android", "c++", "android-ndk", "undefined-reference"], "comments": [{"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1447277709, "post_id": 33658372, "comment_id": 55094113, "body": "Something is wrong with your link. ui.cpp does not exist in the tar file."}, {"owner": {"reputation": 2317, "user_id": 1135245, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/5c183921b037a72e762d910fd012b835?s=128&d=identicon&r=PG", "display_name": "shantanu", "link": "https://stackoverflow.com/users/1135245/shantanu"}, "reply_to_user": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1447310417, "post_id": 33658372, "comment_id": 55104534, "body": "@AlexCohn I have fixed link."}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 1, "creation_date": 1447318887, "post_id": 33658372, "comment_id": 55108272, "body": "The source code you found is not complete, and does not carry official claims to compile, especially under Android. The file <b>GUI/arajni.hpp</b> is simply missing from the tar. The function <b>JniCharToWide()</b> is never declared, and so on. I could create libunrar-jni.so only after manually editing <b>rar.hpp</b> file: I added <code>#undef _ANDROID</code> before the <code>#ifdef _ANDROID</code> on line 89. The command line: <code>ndk-build APP_STL=c++_static</code>"}, {"owner": {"reputation": 2317, "user_id": 1135245, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/5c183921b037a72e762d910fd012b835?s=128&d=identicon&r=PG", "display_name": "shantanu", "link": "https://stackoverflow.com/users/1135245/shantanu"}, "reply_to_user": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1447322159, "post_id": 33658372, "comment_id": 55110193, "body": "@AlexCohn Yes, I manually comment all #ifdef _ANDROID code section. They used jni callback but I think it&#39;s not required for now."}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1447322333, "post_id": 33658372, "comment_id": 55110322, "body": "I found that all _ANDROID results in bad build. Try the single change as I suggested above."}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "reply_to_user": {"reputation": 2317, "user_id": 1135245, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/5c183921b037a72e762d910fd012b835?s=128&d=identicon&r=PG", "display_name": "shantanu", "link": "https://stackoverflow.com/users/1135245/shantanu"}, "edited": false, "score": 0, "creation_date": 1447322420, "post_id": 33658372, "comment_id": 55110381, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/94905/discussion-between-alex-cohn-and-shantanu\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "is_accepted": true, "score": 1, "last_activity_date": 1447329349, "creation_date": 1447329349, "answer_id": 33670866, "question_id": 33658372, "link": "https://stackoverflow.com/questions/33658372/undefined-reference-error-in-ndk/33670866#33670866", "title": "Undefined reference error in NDK", "body": "<p>The source code you found is not complete, and does not carry official claims to compile, especially under Android. But the following steps can get you started:</p>\n\n<ol>\n<li>open new directory, open command line to that directory. </li>\n<li><code>mkdir jni</code> </li>\n<li>put the Android.mk exactly as you have in your question to <strong>jni</strong> directory </li>\n<li>untar unrarsrc-5.3.6.tar.gz to <strong>jni/unrar</strong></li>\n<li>add one line #88 in <strong>jni/unrar/rar.hpp</strong>: <code>#undef _ANDROID</code> </li>\n<li>create empty file <strong>jni/com_unrar_jni.cpp</strong></li>\n<li>run <code>ndk-build APP_CFLAGS=\"-Dgetpass\\(a\\)=a\" APP_STL=stlport_static</code> <em>c++_static may work, too</em>)</li>\n</ol>\n"}], "owner": {"reputation": 2317, "user_id": 1135245, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/5c183921b037a72e762d910fd012b835?s=128&d=identicon&r=PG", "display_name": "shantanu", "link": "https://stackoverflow.com/users/1135245/shantanu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 657, "favorite_count": 1, "accepted_answer_id": 33670866, "answer_count": 1, "score": 0, "last_activity_date": 1447329349, "creation_date": 1447270210, "last_edit_date": 1447310395, "question_id": 33658372, "link": "https://stackoverflow.com/questions/33658372/undefined-reference-error-in-ndk", "title": "Undefined reference error in NDK", "body": "<p>I am trying to compile <a href=\"http://www.rarlab.com/rar/unrarsrc-5.3.6.tar.gz\" rel=\"nofollow\">unrar</a> for <code>Android</code> but getting some <code>undefined reference error</code>. I am stuck here for couple of days but can't find the exact problem. I tried to write <code>Android.mk</code> from existing <code>makefile</code>.</p>\n\n<h1>Error</h1>\n\n<pre><code>jni/unrar/rar.cpp:104: error: undefined reference to 'CommandData::ParseCommandLine(bool, int, char**)'\njni/unrar/rar.cpp:107: error: undefined reference to 'CommandData::ReadConfig()'\njni/unrar/rar.cpp:108: error: undefined reference to 'CommandData::ParseEnvVar()'\njni/unrar/rar.cpp:110: error: undefined reference to 'CommandData::ParseCommandLine(bool, int, char**)'\n</code></pre>\n\n<h1>Android.mk</h1>\n\n<pre><code>LOCAL_PATH := $(call my-dir)\ninclude $(CLEAR_VARS)\nUNRAR_PATH := $(LOCAL_PATH)/unrar\nLOCAL_MODULE    := unrar-jni\n\nLOCAL_SRC_FILES := com_unrar_jni.cpp unrar/rar.cpp unrar/strlist.cpp unrar/strfn.cpp unrar/pathfn.cpp unrar/smallfn.cpp unrar/global.cpp unrar/file.cpp unrar/filefn.cpp unrar/filcreat.cpp \\\n    unrar/archive.cpp unrar/arcread.cpp unrar/unicode.cpp unrar/system.cpp unrar/isnt.cpp unrar/crypt.cpp unrar/crc.cpp unrar/rawread.cpp unrar/encname.cpp \\\n    unrar/resource.cpp unrar/match.cpp unrar/timefn.cpp unrar/rdwrfn.cpp unrar/consio.cpp unrar/options.cpp unrar/errhnd.cpp unrar/rarvm.cpp unrar/secpassword.cpp \\\n    unrar/rijndael.cpp unrar/getbits.cpp unrar/sha1.cpp unrar/sha256.cpp unrar/blake2s.cpp unrar/hash.cpp unrar/extinfo.cpp unrar/extract.cpp unrar/volume.cpp \\\n    unrar/list.cpp unrar/find.cpp unrar/unpack.cpp unrar/headers.cpp unrar/threadpool.cpp unrar/rs16.cpp unrar/cmddata.cpp unrar/ui.cpp \\\n    unrar/filestr.cpp unrar/recvol.cpp unrar/rs.cpp unrar/scantree.cpp unrar/qopen.cpp \n\nLOCAL_CFLAGS := -O2\nLOCAL_CPPFLAGS := -fexceptions -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE\nLOCAL_LDLIBS := -llog\ninclude $(BUILD_SHARED_LIBRARY)\n</code></pre>\n\n<p><code>CommandData</code> declares in <code>cmddata.hpp</code> and implemented in <code>cmddata.cpp</code> file. <code>rar.hpp</code> also includes <code>cmddata.hpp</code> But why it's complaining that functions are undefined.</p>\n"}, {"tags": ["c++", "for-loop"], "comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 1, "creation_date": 1447270245, "post_id": 33658351, "comment_id": 55090218, "body": "There are a ton of for loops in your program. Use a debugger and figure out which one doesn&#39;t work as expected."}, {"owner": {"reputation": 735, "user_id": 4711098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e3cc7b6d4644ecb2b44b9344f273d79?s=128&d=identicon&r=PG&f=1", "display_name": "Thinkeye", "link": "https://stackoverflow.com/users/4711098/thinkeye"}, "edited": false, "score": 0, "creation_date": 1447270554, "post_id": 33658351, "comment_id": 55090402, "body": "Check that sredniad&lt;srednia is true!"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 4, "creation_date": 1447270559, "post_id": 33658351, "comment_id": 55090403, "body": "And fix your indentation."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1447271544, "post_id": 33658351, "comment_id": 55090929, "body": "This question is not valuable for future research, downvoted, close voted, will survey for deletion as soon it&#39;s closed."}], "answers": [{"tags": [], "owner": {"reputation": 6529, "user_id": 4252320, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh3.googleusercontent.com/-_DAs7Dtci9U/AAAAAAAAAAI/AAAAAAAAIf8/96ZNJAUF2Xk/photo.jpg?sz=128", "display_name": "ergonaut", "link": "https://stackoverflow.com/users/4252320/ergonaut"}, "is_accepted": true, "score": 0, "last_activity_date": 1447270567, "creation_date": 1447270567, "answer_id": 33658472, "question_id": 33658351, "link": "https://stackoverflow.com/questions/33658351/for-loop-in-c-doesnt-execute/33658472#33658472", "title": "For loop in c++ doesn&#39;t execute", "body": "<p>Check this condition:</p>\n\n<pre><code> while(sredniad&lt;srednia){\n</code></pre>\n\n<p>If it is true, it also never changes, and you are in an infinite loop.</p>\n"}], "owner": {"reputation": 1, "user_id": 5551958, "user_type": "registered", "profile_image": "https://graph.facebook.com/1077290582304180/picture?type=large", "display_name": "Pawe\u0142 Jasi\u0144ski", "link": "https://stackoverflow.com/users/5551958/pawe%c5%82-jasi%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 33658472, "answer_count": 1, "score": -3, "last_activity_date": 1447270567, "creation_date": 1447270134, "question_id": 33658351, "link": "https://stackoverflow.com/questions/33658351/for-loop-in-c-doesnt-execute", "title": "For loop in c++ doesn&#39;t execute", "body": "<p>I'm writing a very basic program, which creates a 2D array, and prints it once, does some operations on it and prints it the second time. The catch is, it only prints it once.... the code is as follows:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\nusing namespace std;\n\nint main()\n{\nconst int n=3;\nint A[n][n];\nint a, b;\ndo{\ncin&gt;&gt;a&gt;&gt;b;}\nwhile (a&gt;=b);\nfor(int iw=0;iw&lt;n;iw++) {\n    for(int ik=0;ik&lt;n;ik++) {\n        A[iw][ik]=(rand()%(b-a))+a;\n    }\n  }\n for(int iw=0;iw&lt;n;iw++){\n    for(int ik=0;ik&lt;n;ik++){\n        cout&lt;&lt;A[iw][ik]&lt;&lt;'\\t';\n    }\n    cout&lt;&lt;'\\n';\n  }\ndouble sredniad, srednia;\n    double sumad=0, sumag=0;\n    int nd=0, ng=0;\n    for(int i=0,iw=0;iw&lt;n;iw++,i++){\n        for(int ik=0;ik&lt;n;ik++){\n            if(ik!=(n-1-i)){\n                if(ik&gt;(n-1-i)){\n            sumad=sumad+A[iw][ik];\n          nd++;\n                }\n                if(ik&lt;(n-1-i)){\n            sumag=sumag+A[iw][ik];\n            ng++;\n                }\n        }\n            }\n        }\n   sredniad=sumad/nd;\n   srednia=(sumad+sumag)/(nd+ng);\n    while(sredniad&lt;srednia){\n    int max=a, min=b, wmax=0, wmin=0, kmax=0, kmin=0;\n    for(int iw=0;iw&lt;n-1;iw++){\n        for(int i=0, ik=0;ik&lt;n-1-i;iw++, i++){\n            if (A[iw][ik]&gt;max){\n            max=A[iw][ik];\n            wmax=iw;\n            kmax=ik;\n            }\n            if (A[iw][ik]&lt;min){\n                min=A[iw][ik];\n            wmin=iw;\n            kmin=ik;\n            }\n        }\n    }\n            A[wmax][kmax]=min;\n            A[wmin][kmin]=max;\n            sumad=sumad-min+max;\n            sumag=sumag-max+min;\n        }\n    for(int iw=0;iw&lt;n;iw++){\n        for(int ik=0;ik&lt;n;ik++){\n            cout&lt;&lt;A[iw][ik]&lt;&lt;'\\t';\n        }\n        cout&lt;&lt;'\\n';\n    }\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "recursion", "expression", "prefix"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1447276237, "post_id": 33658346, "comment_id": 55093374, "body": "Please correct your input.  I don&#39;t think that either of those is a legal prefix expression.  Each has 6 constants, which requires 5 operators.  The first expression has 6 operators; the second has 4."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1447276263, "post_id": 33658346, "comment_id": 55093383, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your code and accurately describe the problem.   StackOverflow is not a coding or tutorial service."}, {"owner": {"reputation": 1, "user_id": 5319530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee3a4284cb23662d98f1f38fc7643f9?s=128&d=identicon&r=PG&f=1", "display_name": "MLin16", "link": "https://stackoverflow.com/users/5319530/mlin16"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1447277041, "post_id": 33658346, "comment_id": 55093781, "body": "I was just using that input as an example. In reality, it should handle any prefix expression, I was just showing that the letter &quot;n&quot; goes before numbers as they are handled in the program. Other than that, it handles it as a normal prefix expression. @Prune"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1447279975, "post_id": 33658346, "comment_id": 55095193, "body": "Exact duplicate of <a href=\"http://stackoverflow.com/questions/33513749/read-then-store-a-prefix-expression\">Read, then store, a prefix expression</a>"}, {"owner": {"reputation": 1, "user_id": 5319530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee3a4284cb23662d98f1f38fc7643f9?s=128&d=identicon&r=PG&f=1", "display_name": "MLin16", "link": "https://stackoverflow.com/users/5319530/mlin16"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1447284217, "post_id": 33658346, "comment_id": 55097112, "body": "I never received a response and I don&#39;t know how to bump threads or anything like that so I reposted? @EJP"}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1447277439, "creation_date": 1447277439, "answer_id": 33660213, "question_id": 33658346, "link": "https://stackoverflow.com/questions/33658346/storing-prefix-expression-recursive/33660213#33660213", "title": "Storing Prefix Expression (Recursive)", "body": "<p>Now ... as I've commented above, this is not a place where we simply hand you a design or coding.  However, I think I'm still within bounds to explain how infix breaks down into left and right operands.</p>\n\n<p>There are only two types of operands in infix: a terminal (constant or variable) and an expression.</p>\n\n<p>Every expression has the same form:</p>\n\n<pre><code>operator left-operand right-operand\n</code></pre>\n\n<p>As it turns out, you can easily parse a complex expression using these two rules: every time you hit an operator, you start a new expression (i.e. make a recursive call).  Let's step through a legal version of your given example:</p>\n\n<pre><code>% 18 + 14 / - 12 11 % 1183 17\n</code></pre>\n\n<p>The first thing we find is %; save the operator and go looking for the left and right operands in the remaining string, <code>18 + 14 / - 12 11 % 1183 17</code>.  The left is trivial; there's a constant right there.</p>\n\n<pre><code>// expression 1\noperator = '%'\nleft = '18'\nright = '+ 14 / - 12 11 % 1183 17'\n</code></pre>\n\n<p>This gives us the entire top-level expression.  However, we still have to parse the right operand.  It's another expression.  Stash the <code>+</code> as the operator and parse two operands.</p>\n\n<p>Again, the left is trivial; the right is the rest of the expression:</p>\n\n<pre><code>// expression 2\noperator = '+'\nleft = '14'\nright = '/ - 12 11 % 1183 17'\n</code></pre>\n\n<p>Again, we still have to parse the right operand.  Stash the <code>/</code> as the operator, and ... ha!  This time, the left operand is an expression.  We still pass the entire string to the expression parser.</p>\n\n<pre><code>// expression 3\noperator = '/'\nleft = &lt;something from&gt; '- 12 11 % 1183 17'\nright = &lt;on hold&gt;\n</code></pre>\n\n<p>Here are the steps I've skipped over so far.  When we make the recursive call, we pass the entire expression.  The left-operand evaluation will eat whatever it needs, leaving the rest for the right evaluation.  Let's walk through this a little more carefully now ...</p>\n\n<p>// expression 4\n   operator = '-'\n   left = 12\n   right = 11\n   remainder = '% 1183 17'</p>\n\n<p>This remainder has to be passed back to the calling instance to use for the right operator.  Having found the left operand (and evaluated it to 1), we'll return to our parsing of expression 3:</p>\n\n<pre><code>// expression 3\noperator = '/'\nleft = 1\nright = '% 1183 17'\n</code></pre>\n\n<p>Now we likewise parse the right string, getting the value of 1183 % 17 or 10.  Note that I'm not walking us through this expression 5; like expression 4, it's a simple operation, ['%', 1183, 17].</p>\n\n<p>Finally, we get to return to expression 3 and do 1 / 10 (integer arithmetic gives us 0 for this).  That 0 becomes the right side for expression 2, where we evaluate 14 + 0.  Finally, that result becomes the right side for expression 1, and the final answer is 18 % 14, or 4.</p>\n\n<p>Now ... can you do the programming from there?</p>\n"}], "owner": {"reputation": 1, "user_id": 5319530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee3a4284cb23662d98f1f38fc7643f9?s=128&d=identicon&r=PG&f=1", "display_name": "MLin16", "link": "https://stackoverflow.com/users/5319530/mlin16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 192, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1447277439, "creation_date": 1447270120, "question_id": 33658346, "link": "https://stackoverflow.com/questions/33658346/storing-prefix-expression-recursive", "title": "Storing Prefix Expression (Recursive)", "body": "<p>Thanks for reading. I really need some help here. I'm faced with a problem that involves me using a recursive method to store a user-input fully marked prefix expression. In this particular instance, numbers are identified with the symbol \"n\", while symbols and such are just as they are. So, for example, this:</p>\n\n<p>% 18 + 14 / ( 12 \u2013 11 ) \u2013 1183 % 17</p>\n\n<p>Would be input into the command prompt as this:</p>\n\n<ul>\n<li>% n18 / n14 - n12 n11 % n1183 n17</li>\n</ul>\n\n<p>Now, earlier in the project, I was tasked with storing an infix expression but had a lot of help from already built code. So, here's what I have for the processing of a completely parenthesized, infix, function. I have to create a method using similar fashion (inside of the same file, actually) and then work with it from there. I've already got the print function working, so I'm really just trying to get the storage to work now. Here's the code to read infix expressions:</p>\n\n<pre><code>Expr * readFPInfix(std::istream &amp; infile)\n{\n    static std::string ops(\"*+/%-\");\n    char symbol;\n    infile &gt;&gt; symbol;\n    if (symbol == 'n')\n    {\n        long number;\n        infile &gt;&gt; number;\n        return new Atom(number);\n    }\n    else if (symbol == '(')\n    {\n        Expr * left = readFPInfix(infile);\n        char op;\n        infile &gt;&gt; op;\n        if (ops.find(op) == std::string::npos) {\n            std::cout &lt;&lt; \"Unknown operator symbol '\" &lt;&lt; op &lt;&lt; \"'\" &lt;&lt; std::endl;\n            system(\"pause\");\n            exit(0);\n        }\n        Expr * right = readFPInfix(infile);\n        infile &gt;&gt; symbol;\n        // read the ending right parenthesis\n        if (symbol != ')') {\n            std::cout &lt;&lt; \"Invalid symbol '\" &lt;&lt; symbol &lt;&lt; \"':  ')' expected\" &lt;&lt; std::endl;\n            system(\"pause\");\n            exit(0);\n        }\n        switch (op)\n        {\n        case '*':\n            return new Times(left, right);\n        case '+':\n            return new Plus(left, right);\n        case '/':\n            return new Divide(left, right);\n        case '%':\n            return new Mod(left, right);\n        case '-':\n            return new Subtract(left, right);\n        default:\n            std::cout &lt;&lt; \"Read error\" &lt;&lt; std::endl;\n            system(\"pause\");\n            exit(0);\n        }\n    }\n    else\n    {\n        std::cout &lt;&lt; \"Invalid symbol '\" &lt;&lt; symbol &lt;&lt; \"':  'n' or '(' expected\" &lt;&lt; std::endl;\n        system(\"pause\");\n        exit(0);\n    }\n}\n</code></pre>\n\n<p>Now, I'm assuming we have to use the same stuff, so my main problem is reading the damned expression. I understand that in this method we're reading it symbol by symbol, then testing that symbol against prompts to test whether it's an operator or a number. Alright, cool. But how do I get left and right, so I can input it into something like Plus(left, right). I'm really struggling, so any help would be very appreciated.</p>\n\n<p>NOTE: This is a homework assignment, so if someone gives me the answer then that is fine, or the pseudocode is fine too. Thank you.</p>\n"}, {"tags": ["c++", "openmp"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1447271805, "post_id": 33658210, "comment_id": 55091073, "body": "I can&#39;t tell how often I see that question title coming up here. I&#39;m not an expert for <a href=\"https://stackoverflow.com/questions/tagged/openmp\">openmp</a>, but I&#39;m pretty sure you should do a little <a href=\"http://stackoverflow.com/search?q=%5Bc%2B%2B%5D%5Bopenmp%5Dparallelize+loops\">more research</a> to be sure not asking a duplicate question."}], "answers": [{"tags": [], "owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "is_accepted": true, "score": 0, "last_activity_date": 1447350562, "last_edit_date": 1495540316, "creation_date": 1447350562, "answer_id": 33677991, "question_id": 33658210, "link": "https://stackoverflow.com/questions/33658210/parallelizing-nested-loops-with-openmp/33677991#33677991", "title": "Parallelizing nested loops with OpenMP", "body": "<p>Several things I see. </p>\n\n<p>1) <code>#pragma for ordered</code> means: execute every single one of the iterations of this loop in order. This essentially means that while you're executing \"in parallel,\" all of your work will be done in serial. Remove it.</p>\n\n<p>2) You have not declared any of your variables shared or private. Note that all variables by default will be shared, so in your case <code>ij</code> and <code>kl</code> for instance will be accessible by any thread working on any iteration. You can no doubt see how this would cause a race condition if, say, iteration 100 changed variable <code>ij</code> while iteration 1 thought it was using it.</p>\n\n<p>3) Your variable <code>eris[ijkl]</code> as you rightly noted must be reduced properly. If <code>ijkl</code> can never be the same value for two different iterations in your <code>i_orbital</code> loop, then you're fine as-is; no two threads will ever be changing the same variable <code>eris[ijkl]</code> potentially at the same time. If it can be the same value, then you <a href=\"https://stackoverflow.com/questions/20413995/reducing-on-array-in-openmp\">have to carefully handle reduction on the array</a>.</p>\n\n<p>4) Here's what you should work with for starters. This is assuming that <code>ijkl</code> will never be the same value for two different iterations, and your functions do not take in any non-constant references (potentially changing what I'm assuming input variables to output variables).</p>\n\n<pre><code>#pragma omp parallel for private(i_orbital, j_orbital, ij, k_orbital, l_orbital, kl, ijkl, ijij, klkl, i_primitive, j_primitive, k_primitive, l_primitive)\n</code></pre>\n"}], "owner": {"reputation": 372, "user_id": 3116936, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9eaf7a9f1d2ca9a7cd9632bd558e5238?s=128&d=identicon&r=PG&f=1", "display_name": "user3116936", "link": "https://stackoverflow.com/users/3116936/user3116936"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 33677991, "answer_count": 1, "score": 0, "last_activity_date": 1447350562, "creation_date": 1447269552, "question_id": 33658210, "link": "https://stackoverflow.com/questions/33658210/parallelizing-nested-loops-with-openmp", "title": "Parallelizing nested loops with OpenMP", "body": "<p>Perhaps the solution to my problem  is obvious for some on with exprience with openmp, but I  don't have it. I want to accelerate the following subroutine using openmp:</p>\n\n<pre><code>void Build_ERIS(vector&lt;double&gt; &amp;eris, vector&lt;Atomic_Orbital&gt; &amp;Basis)\n{\n  int basis_size = Basis.size();\n  int m = basis_size*(basis_size+1)/2;\n  eris.resize(m*(m+1)/2);\n  bool compute;\n  std::fill(eris.begin(), eris.end(), 0);\n\n  int i_orbital,j_orbital, k_orbital,l_orbital, i_primitive, j_primitive, k_primitive,l_primitive,ij,kl, ijkl,ijij,klkl;\n  #pragma omp parallel\n  {\n    #pragma omp for ordered\n    for(i_orbital=0; i_orbital&lt;basis_size; i_orbital++){\n      for(j_orbital=0; j_orbital&lt;i_orbital+1; j_orbital++){\n    ij = i_orbital*(i_orbital+1)/2 + j_orbital;\n    for(k_orbital=0; k_orbital&lt;basis_size; k_orbital++){\n      for(l_orbital=0; l_orbital&lt;k_orbital+1; l_orbital++){\n        kl = k_orbital*(k_orbital+1)/2 + l_orbital;\n        if (ij &gt;= kl) {\n\n\n          ijkl = composite_index(i_orbital,j_orbital,k_orbital,l_orbital);\n\n          ijij = composite_index(i_orbital,j_orbital,i_orbital,j_orbital);\n          klkl = composite_index(k_orbital,l_orbital,k_orbital,l_orbital);\n\n          for(i_primitive=0; i_primitive&lt;Basis[i_orbital].contraction.size; i_primitive++)\n        for(j_primitive=0; j_primitive&lt;Basis[j_orbital].contraction.size; j_primitive++)\n          for(k_primitive=0; k_primitive&lt;Basis[k_orbital].contraction.size; k_primitive++)\n            for(l_primitive=0; l_primitive&lt;Basis[l_orbital].contraction.size; l_primitive++)\n              eris[ijkl] +=\n            normconst(Basis[i_orbital].contraction.exponent[i_primitive],Basis[i_orbital].angular.l, Basis[i_orbital].angular.m, Basis[i_orbital].angular.n)*\n            normconst(Basis[j_orbital].contraction.exponent[j_primitive],Basis[j_orbital].angular.l, Basis[j_orbital].angular.m, Basis[j_orbital].angular.n)*\n            normconst(Basis[k_orbital].contraction.exponent[k_primitive],Basis[k_orbital].angular.l, Basis[k_orbital].angular.m, Basis[k_orbital].angular.n)*\n            normconst(Basis[l_orbital].contraction.exponent[l_primitive],Basis[l_orbital].angular.l, Basis[l_orbital].angular.m, Basis[l_orbital].angular.n)*\n            Basis[i_orbital].contraction.coef[i_primitive]*\n            Basis[j_orbital].contraction.coef[j_primitive]*\n            Basis[k_orbital].contraction.coef[k_primitive]*\n            Basis[l_orbital].contraction.coef[l_primitive]*\n            ERI_int(Basis[i_orbital].contraction.center.x, Basis[i_orbital].contraction.center.y, Basis[i_orbital].contraction.center.z, Basis[i_orbital].contraction.exponent[i_primitive],Basis[i_orbital].angular.l, Basis[i_orbital].angular.m, Basis[i_orbital].angular.n,\n                Basis[j_orbital].contraction.center.x, Basis[j_orbital].contraction.center.y, Basis[j_orbital].contraction.center.z, Basis[j_orbital].contraction.exponent[j_primitive],Basis[j_orbital].angular.l, Basis[j_orbital].angular.m, Basis[j_orbital].angular.n,\n                Basis[k_orbital].contraction.center.x, Basis[k_orbital].contraction.center.y, Basis[k_orbital].contraction.center.z, Basis[k_orbital].contraction.exponent[k_primitive],Basis[k_orbital].angular.l, Basis[k_orbital].angular.m, Basis[k_orbital].angular.n,\n                Basis[l_orbital].contraction.center.x, Basis[l_orbital].contraction.center.y, Basis[l_orbital].contraction.center.z, Basis[l_orbital].contraction.exponent[l_primitive],Basis[l_orbital].angular.l, Basis[l_orbital].angular.m, Basis[l_orbital].angular.n);\n\n          /**/\n        }\n      }\n\n    }\n\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>My concern is regarding the best way of be sure that after the openmp parallelization, the computation of the reductions in eris[ijkl], still  giving the same values that the serial version of the routine? How can I do a loops fusion in a way that is numerically safe?</p>\n"}, {"tags": ["c++", "stl"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1447269638, "post_id": 33658202, "comment_id": 55089866, "body": "Do you mean how to create a drop-in replacement for <code>std::vector</code>?"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1447269785, "post_id": 33658202, "comment_id": 55089956, "body": "You forgot something essential: the vector guarantees contiguous storage of any type (even non-default-constructible objects), so you&#39;d need to use placement new instead to construct the elements in place."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1447270051, "post_id": 33658202, "comment_id": 55090114, "body": "What&#39;s the difference between your vector and <code>std::vector</code>?"}, {"owner": {"reputation": 1049, "user_id": 4411577, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b15a7c7c6f85f173206d822a1dd3f626?s=128&d=identicon&r=PG&f=1", "display_name": "dspfnder", "link": "https://stackoverflow.com/users/4411577/dspfnder"}, "edited": false, "score": 0, "creation_date": 1447271558, "post_id": 33658202, "comment_id": 55090939, "body": "Compared to the std::vector, your template is very simple. The vector of STL has dozens of member functions for capacity, element access, modifiers and iterators."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1447271947, "post_id": 33658202, "comment_id": 55091145, "body": "And what on earth does this have to do with <a href=\"https://stackoverflow.com/questions/tagged/stl\">stl</a>??"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1447272109, "post_id": 33658202, "comment_id": 55091228, "body": "<i>@Ego Voziyanov</i> You&#39;ll need loads of <i>anything else</i>. Have a look at the implementation of <code>std::vector</code> to actually see <i>what else</i>."}, {"owner": {"reputation": 185, "user_id": 4606887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iTP9J.jpg?s=128&g=1", "display_name": "Yahor Vaziyanau", "link": "https://stackoverflow.com/users/4606887/yahor-vaziyanau"}, "edited": false, "score": 0, "creation_date": 1447272165, "post_id": 33658202, "comment_id": 55091248, "body": "OKAY. Thanks. I sold it. Done"}], "answers": [{"tags": [], "owner": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "is_accepted": false, "score": 0, "last_activity_date": 1447278548, "last_edit_date": 1447278548, "creation_date": 1447278219, "answer_id": 33660404, "question_id": 33658202, "link": "https://stackoverflow.com/questions/33658202/how-to-create-your-own-template-for-stl-vector/33660404#33660404", "title": "How to create your own template for STL vector?", "body": "<p>You need to allocate buffer in memory with some initial buffer size (re-allocate&amp;copy when space is exceeded to ensure memory is contiguous, if needed) instead of calling constructors (<code>new</code>) on your types. </p>\n\n<p>Size of buffer is calculated like <code>sizeof(T) * desiredMaxItems</code>.</p>\n\n<p>You have to implement an iterator type that will be able to <code>reinterpet_cast</code> and offset in this block of memory to <code>T*</code> value. And offset is somewhat created by calculation <code>sizeof(T) * index</code>.</p>\n\n<p><code>erase</code> method of your vector class may (optionally) zero <code>sizeof(T)</code> bytes at item offset in internal buffer, and then shift-down values left <em>after</em> erased value (<code>-1</code>) and update internal <code>itemCount</code> field, to avoid \"empty\" spaces in internal buffer. </p>\n\n<p>This could be skipped if you will store not the <code>T</code> data, but directly an iterator instance with something like <code>bool exists</code> field. In last case <code>exists</code> is set to false and this item indicates it does not exist. In some cases such buffer could work faster.</p>\n"}], "owner": {"reputation": 185, "user_id": 4606887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iTP9J.jpg?s=128&g=1", "display_name": "Yahor Vaziyanau", "link": "https://stackoverflow.com/users/4606887/yahor-vaziyanau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 160, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1447278548, "creation_date": 1447269528, "question_id": 33658202, "link": "https://stackoverflow.com/questions/33658202/how-to-create-your-own-template-for-stl-vector", "title": "How to create your own template for STL vector?", "body": "<p>How to create your own template for STL vector ?\nThis is good or i need anything else ???</p>\n\n<pre><code>template&lt;class T&gt;\nclass MainVector {\nprivate:\nT *m_ptv;\nint m_size,\n    m_index;\npublic:\nMainVector() : m_size(0), m_index(0), m_ptv(NULL) { }\nMainVector(int);\n~MainVector() { delete[] m_ptv; }\nvoid addOneElem(const T &amp;);\nT *getVecor();\nint getSizeVector();\nostream &amp;operator&lt;&lt;(ostream &amp;os, const MainVector &amp;vect);\n};\n</code></pre>\n"}, {"tags": ["javascript", "c++", "openssl", "webcrypto-api"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1447298846, "post_id": 33658189, "comment_id": 55101295, "body": "Please create a test key, and then post it in some encoding (hex, base64, pem) so we can hack on it."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1447326703, "post_id": 33658189, "comment_id": 55113114, "body": "You added pem encoded keys, but are they the keys you are having problems with (it sounds like the answer is NO)? If not, then what presentation format are they in? If its ASN/1&#39;s DER, then just hex encode them and post them. We can always strip what we don&#39;t need (like a hex encoding). But we can&#39;t create the keys we don&#39;t have."}, {"owner": {"reputation": 61, "user_id": 1701509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/57a716d647388c2ba8a8f689170e349c?s=128&d=identicon&r=PG", "display_name": "bsz", "link": "https://stackoverflow.com/users/1701509/bsz"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1447327728, "post_id": 33658189, "comment_id": 55113653, "body": "@jww I add them too."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1447327920, "post_id": 33658189, "comment_id": 55113756, "body": "I tried to decode the private key you provided. You can use, for example (on OS X): <code>pbpaste | openssl ec ... -text -noout</code> and/or  <code>pbpaste | openssl pkcs8 ... -text -noout</code>. None of them can decode it. I&#39;m guessing the key is malformed. You can take the error code you get, and use <code>openssl errstr</code> to decode it. For example, I keep getting <b><i><code>error:0906D066:PEM routines:PEM_read_bio:bad end line</code></i></b> for <code>openssl errstr 0x0906D066</code>."}, {"owner": {"reputation": 61, "user_id": 1701509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/57a716d647388c2ba8a8f689170e349c?s=128&d=identicon&r=PG", "display_name": "bsz", "link": "https://stackoverflow.com/users/1701509/bsz"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1447328078, "post_id": 33658189, "comment_id": 55113842, "body": "But WebCrypto import these datas succesfully."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1447328698, "post_id": 33658189, "comment_id": 55114200, "body": "How did you read the keys in your C++ program? Did you use an <code>istream</code> <b><i>AND</i></b> specify <code>ios::binary</code>, or did you use something else? (The streams will eat characters unless they are opened in binary mode). Also, WebCrypto is new, so it would not surprise me if there were implementation bugs that only occurred during interop. But to test these things, we need to see the real keys you are using as exported by WebCrypto :)"}, {"owner": {"reputation": 61, "user_id": 1701509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/57a716d647388c2ba8a8f689170e349c?s=128&d=identicon&r=PG", "display_name": "bsz", "link": "https://stackoverflow.com/users/1701509/bsz"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1447330073, "post_id": 33658189, "comment_id": 55114884, "body": "The key come over WebSocket, and then write out with ofstream (with ios::binary flag). But, PEM saved from JS, and DER saved from C++, and pass them to asn1parse give the same result for each (and i printed out the sended and received key each side -- looks equal), so I think, c++ eat the appropriate data. Real datas (x, y and the priv. d) added."}, {"owner": {"reputation": 61, "user_id": 1701509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/57a716d647388c2ba8a8f689170e349c?s=128&d=identicon&r=PG", "display_name": "bsz", "link": "https://stackoverflow.com/users/1701509/bsz"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1447346652, "post_id": 33658189, "comment_id": 55126426, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/94955/discussion-between-bsz-and-jww\">continue this discussion in chat</a>."}, {"owner": {"reputation": 61, "user_id": 1701509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/57a716d647388c2ba8a8f689170e349c?s=128&d=identicon&r=PG", "display_name": "bsz", "link": "https://stackoverflow.com/users/1701509/bsz"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1447349876, "post_id": 33658189, "comment_id": 55128570, "body": "Any idea with de real key? :)"}], "answers": [{"tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": false, "score": 3, "last_activity_date": 1447327289, "last_edit_date": 1447327289, "creation_date": 1447300416, "answer_id": 33664164, "question_id": 33658189, "link": "https://stackoverflow.com/questions/33658189/import-webcrypto-generated-ecdsa-public-key-for-verify-operations/33664164#33664164", "title": "Import WebCrypto generated ECDSA public key for verify operations", "body": "<blockquote>\n  <p>... the public key exported is in spki format ...</p>\n</blockquote>\n\n<p>The encoded key is roughly structured as follows using ASN.1. See <a href=\"https://tools.ietf.org/html/rfc5480#section-2\" rel=\"nofollow\">RFC 5480, Section 2.  Subject Public Key Information Fields</a> and <a href=\"https://tools.ietf.org/html/rfc3279#section-2.3.5\" rel=\"nofollow\">RFC 3279, Section 2.3.5 ECDSA and ECDH Keys</a> for the grueling details.</p>\n\n<pre><code>SEQUENCE {\n   ALGORITHM ID\n   KEY {\n      NAMED_CURVE or DOMAIN_PARAMETERS\n      PUBLIC_KEY or PRIVATE_KEY  \n   }\n}\n</code></pre>\n\n<p>There is also a \"raw key\", which is the key material without the outer sequence and algorithm identifier. OpenSSL calls the \"raw key\" a <strong><em>Traditional Key</em></strong> in its man pages.</p>\n\n<hr>\n\n<blockquote>\n  <p>d2i_ECPKParameters return NULL...</p>\n</blockquote>\n\n<p>OK, you have a SPKI, and not <em>just</em> domain parameters. Domain parameters are the curve coefficients (<strong><em>a</em></strong> and <strong><em>b</em></strong>), the modulus (<strong><em>p</em></strong>), the base point (<strong><em>G</em></strong>), etc, and they describe the curve. They don't have the key.</p>\n\n<p>So you should use something like <code>d2i_PublicKey</code> to parse the key into a <code>EVP_KEY</code>, and then fetch the domain parameters after loading the key.</p>\n\n<hr>\n\n<p>The biggest problem with interop I have seen is this:</p>\n\n<pre><code>NAMED_CURVE or DOMAIN_PARAMETERS\n</code></pre>\n\n<p>If its a named curve, then it will be something like <strong><em>secp256</em></strong> or <strong><em>prime256v1</em></strong>. If its domain parameters, then the named curve is \"unwound\" or \"fully expanded\", and it will be the curve coefficients (<strong><em>a</em></strong> and <strong><em>b</em></strong>), the modulus (<strong><em>p</em></strong>), the base point (<strong><em>G</em></strong>), etc. Though they specify the <strong>exact</strong> same thing, they cause a lot of trouble in practice.</p>\n\n<p>Interop'ing between named curves and domain parameters cause so much trouble that OpenSSL has a wiki page on it: <a href=\"https://wiki.openssl.org/index.php/Elliptic_Curve_Cryptography#Named_Curves\" rel=\"nofollow\">Elliptic Curve Cryptography | Named Curve</a>. In fact, OpenSSL web servers cannot run properly with itself because of the ridiculousness!</p>\n\n<p>So the only thing I can say here is: be cognizant of what have, and don't expect named curves and domain parameters to be equal in software even though they are exactly the same (except for a presentation detail).</p>\n\n<hr>\n\n<p>If you provide some test keys we can probably provide more details. My guess is you have a PEM encoded key, so you should be using other functions like <a href=\"https://www.openssl.org/docs/manmaster/crypto/pem.html\" rel=\"nofollow\">PEM_read_PUBKEY</a>. But its only a guess.</p>\n"}, {"comments": [{"owner": {"reputation": 14334, "user_id": 1380680, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/TRgwX.png?s=128&g=1", "display_name": "Reinier Torenbeek", "link": "https://stackoverflow.com/users/1380680/reinier-torenbeek"}, "reply_to_user": {"reputation": 61, "user_id": 1701509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/57a716d647388c2ba8a8f689170e349c?s=128&d=identicon&r=PG", "display_name": "bsz", "link": "https://stackoverflow.com/users/1701509/bsz"}, "edited": false, "score": 0, "creation_date": 1447380837, "post_id": 33682394, "comment_id": 55142426, "body": "You are welcome. I added a link to a nice ASN.1 editor tool you might be interested in."}], "tags": [], "owner": {"reputation": 14334, "user_id": 1380680, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/TRgwX.png?s=128&g=1", "display_name": "Reinier Torenbeek", "link": "https://stackoverflow.com/users/1380680/reinier-torenbeek"}, "is_accepted": true, "score": 1, "last_activity_date": 1447380778, "last_edit_date": 1447380778, "creation_date": 1447366209, "answer_id": 33682394, "question_id": 33658189, "link": "https://stackoverflow.com/questions/33658189/import-webcrypto-generated-ecdsa-public-key-for-verify-operations/33682394#33682394", "title": "Import WebCrypto generated ECDSA public key for verify operations", "body": "<p>The functions <code>d2i_ECPublicKey()</code> and <code>i2d_ECPublicKey()</code> or equivalents do not seem to be implemented in OpenSSL. Based on the ASN.1 definitions pointed to by user jww, you could choose to define them yourself, like this:</p>\n\n<pre><code>#include &lt;openssl/asn1t.h&gt;\n\n/* C-struct definitions */\n\ntypedef struct ec_identifiers_st {\n    ASN1_OBJECT  *algorithm;\n    ASN1_OBJECT  *namedCurve;\n} EC_IDENTIFIERS;\n\ntypedef struct ec_publickey_st {\n    EC_IDENTIFIERS  *identifiers;\n    ASN1_BIT_STRING *publicKey;\n} EC_PUBLICKEY;\n\n\n/* ASN.1 definitions */\n\nASN1_SEQUENCE(EC_IDENTIFIERS) = {\n    ASN1_SIMPLE(EC_IDENTIFIERS, algorithm, ASN1_OBJECT),\n    ASN1_SIMPLE(EC_IDENTIFIERS, namedCurve, ASN1_OBJECT)\n} ASN1_SEQUENCE_END(EC_IDENTIFIERS)\n\nDECLARE_ASN1_ALLOC_FUNCTIONS(EC_IDENTIFIERS)\nIMPLEMENT_ASN1_ALLOC_FUNCTIONS(EC_IDENTIFIERS)\n\nASN1_SEQUENCE(EC_PUBLICKEY) = {\n    ASN1_SIMPLE(EC_PUBLICKEY, identifiers, EC_IDENTIFIERS),\n    ASN1_SIMPLE(EC_PUBLICKEY, publicKey, ASN1_BIT_STRING)\n} ASN1_SEQUENCE_END(EC_PUBLICKEY)\n\nDECLARE_ASN1_FUNCTIONS_const(EC_PUBLICKEY)\nDECLARE_ASN1_ENCODE_FUNCTIONS_const(EC_PUBLICKEY, EC_PUBLICKEY)\nIMPLEMENT_ASN1_FUNCTIONS_const(EC_PUBLICKEY)\n</code></pre>\n\n<p>Note: this is not a complete definition. It assumes that the key contains the named curve, not the curve parameters (again see jww's answer as well). It should work with your example but if you want it to work with all possible EC keys, you should include a <code>CHOICE</code> field -- nice exercise :-)</p>\n\n<p>From here on, you can use the functions <code>d2i_EC_PUBLICKEY()</code> and <code>i2d_EC_PUBLICKEY()</code> to do the back and forth transformations. Here is an example without any error checking:</p>\n\n<pre><code>#include &lt;openssl/objects.h&gt;\n#include &lt;openssl/evp.h&gt;\n#include &lt;openssl/ec.h&gt;\n\nvoid ASN1ECPublicKeyTester(void)\n{\n    EC_PUBLICKEY *parsedKey = NULL;\n    EC_KEY *ecKey = NULL;\n    const unsigned char *helper = NULL;\n    char buffer[100] = { 0 };\n    int nid = -1;\n    EVP_PKEY *evpKey;\n\n#   define COUNT(_Array) (sizeof(_Array) / sizeof(_Array[0]))\n    helper = testKey;\n    parsedKey = d2i_EC_PUBLICKEY(NULL, &amp;helper, COUNT(testKey));\n    OBJ_obj2txt(buffer, COUNT(buffer), parsedKey-&gt;identifiers-&gt;algorithm, 0);\n    printf(\"Algorithm: \\\"%s\\\"\\n\", buffer);\n    OBJ_obj2txt(buffer, COUNT(buffer), parsedKey-&gt;identifiers-&gt;namedCurve, 0);\n    printf(\"Curve:     \\\"%s\\\"\\n\", buffer);\n\n    /* o2i_ECPublicKey needs to be fed an EC_KEY that has the GROUP set */\n    nid = OBJ_obj2nid(parsedKey-&gt;identifiers-&gt;namedCurve);\n    ecKey = EC_KEY_new_by_curve_name(nid);\n    helper = parsedKey-&gt;publicKey-&gt;data;\n    o2i_ECPublicKey(&amp;ecKey, &amp;helper, parsedKey-&gt;publicKey-&gt;length);\n\n    /* Create EVP key for use with EVP API */\n    evpKey = EVP_PKEY_new();\n    if (1 == EVP_PKEY_set1_EC_KEY(evpKey, ecKey)) {\n        printf(\"It looks like everything worked\\n\");\n        /* EVP_PKEY now owns the key */\n        EC_KEY_free(ecKey);\n    };\n    /* Use your evpKey from here (and free afterwards) */\n}\n</code></pre>\n\n<p>With the tester key that you provided, the output is</p>\n\n<pre><code>Algorithm: \"id-ecPublicKey\"\nCurve:     \"secp521r1\"\nIt looks like everything worked\n</code></pre>\n\n<p>The testKey array was defined as follows, based on your key:</p>\n\n<pre><code>const unsigned char testKey[] = {\n    0x30, 0x81, 0x9B, 0x30, 0x10, 0x06, 0x07, 0x2A,\n    0x86, 0x48, 0xCE, 0x3D, 0x02, 0x01, 0x06, 0x05,\n    0x2B, 0x81, 0x04, 0x00, 0x23, 0x03, 0x81, 0x86,\n    0x00, 0x04, 0x00, 0x13, 0xB1, 0xBB, 0x39, 0x07,\n    0xE7, 0x9B, 0x4B, 0x0A, 0x08, 0x5C, 0x3E, 0x91,\n    0x0F, 0x63, 0x58, 0x38, 0xDC, 0xD2, 0x58, 0xEB,\n    0x6D, 0xD1, 0x28, 0xA0, 0x3C, 0xCD, 0xBB, 0xA5,\n    0xD6, 0x04, 0x5A, 0x99, 0x5D, 0xFF, 0xA8, 0xFA,\n    0x4B, 0x7E, 0x20, 0xBD, 0x11, 0xD0, 0xC0, 0x34,\n    0x8C, 0xCE, 0xCE, 0xBF, 0xFF, 0x5C, 0xD5, 0x13,\n    0x6D, 0x0C, 0x9F, 0xE8, 0xB3, 0x34, 0xCD, 0x0A,\n    0x3D, 0x68, 0x51, 0x7B, 0x00, 0xFA, 0x4A, 0x8B,\n    0x51, 0xF3, 0xFD, 0x90, 0x19, 0x60, 0x79, 0xBA, \n    0x8F, 0x06, 0x89, 0x7C, 0x75, 0x44, 0xBC, 0x81,\n    0xA7, 0xE4, 0xCE, 0xBA, 0xB4, 0x0B, 0x12, 0xC6,\n    0x30, 0x89, 0x64, 0x8B, 0x91, 0x42, 0x14, 0x32,\n    0xF3, 0xC7, 0xFF, 0xA5, 0x82, 0xC5, 0x23, 0x4E,\n    0xE0, 0x5C, 0xC1, 0x7F, 0xAD, 0x7B, 0x3D, 0x1A,\n    0xAC, 0xED, 0x9B, 0xF7, 0x56, 0x8F, 0x7C, 0x77,\n    0xD2, 0x47, 0xFF, 0x79, 0x88, 0x4C\n};\n</code></pre>\n\n<hr>\n\n<p>PS: A nice tool to analyse your ASN.1 data is this free <a href=\"http://www.sysadmins.lv/projects/asn1editor/default.aspx\" rel=\"nofollow noreferrer\">ASN.1 Editor</a>. When using that, your test key looks like this:\n<a href=\"https://i.stack.imgur.com/ua0wR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ua0wR.png\" alt=\"ASN.1 Editor\"></a></p>\n"}], "owner": {"reputation": 61, "user_id": 1701509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/57a716d647388c2ba8a8f689170e349c?s=128&d=identicon&r=PG", "display_name": "bsz", "link": "https://stackoverflow.com/users/1701509/bsz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1403, "favorite_count": 0, "accepted_answer_id": 33682394, "answer_count": 2, "score": 3, "last_activity_date": 1447380778, "creation_date": 1447269485, "last_edit_date": 1447329343, "question_id": 33658189, "link": "https://stackoverflow.com/questions/33658189/import-webcrypto-generated-ecdsa-public-key-for-verify-operations", "title": "Import WebCrypto generated ECDSA public key for verify operations", "body": "<p>I'm trying to import <strong>ECDSA</strong> public key in C++ with OpenSSL (for verify signatures), but <em>d2i_ECPKParameters</em> return NULL.</p>\n\n<p>The keys generated with Web Cryptographi API; public key exported in <strong>spki</strong> format (W3 TR doc talk about ASN.1 structure when exporting key, and DER encoding for spki).</p>\n\n<p>I'm new to OpenSSL, what did I do wrong?</p>\n\n<p><strong>Import:</strong></p>\n\n<pre><code>bool ecdsa_verify(\n    const std::array&lt;uint8_t, 20&gt;&amp; hash,\n    const std::experimental::basic_string_view&lt;uint8_t&gt;&amp; signature,\n    const std::experimental::basic_string_view&lt;uint8_t&gt;&amp; public_key) {\n  EC_GROUP* ec_group = nullptr;\n\n  const unsigned char* public_key_data = public_key.data();\n  ec_group = d2i_ECPKParameters(nullptr, &amp;public_key_data, public_key.length());\n  if (ec_group == nullptr) {\n    return false; // RETURN POINT\n  }\n\n  EC_KEY* ec_key = EC_KEY_new();\n  if (ec_key == nullptr) {\n    EC_GROUP_free(ec_group);\n    return false;\n  }\n\n  if (!EC_KEY_set_group(ec_key, ec_group)) {\n    EC_GROUP_free(ec_group);\n    EC_KEY_free(ec_key);\n    return false;\n  }\n\n  bool is_signature_valid =\n      ECDSA_verify(0, hash.data(), hash.size(), signature.data(),\n                   signature.length(), ec_key);\n\n  EC_GROUP_free(ec_group);\n  EC_KEY_free(ec_key);\n\n  return is_signature_valid;\n}\n</code></pre>\n\n<p><strong>UPDATE:</strong>\n<strong>other import try (but still not work):</strong></p>\n\n<pre><code>  const unsigned char* public_key_data = public_key.data();\n\n  EC_KEY* ec_key =\n      o2i_ECPublicKey(nullptr, &amp;public_key_data, public_key.length());\n  if (ec_key == nullptr) {\n    return false; // RETURN POINT\n  }\n\n  bool is_signature_valid =\n      ECDSA_verify(0, hash.data(), hash.size(), signature.data(),\n                   signature.length(), ec_key);\n\n  EC_KEY_free(ec_key);\n</code></pre>\n\n<p><strong>Export:</strong></p>\n\n<pre><code>function ecdsa_export_pub_key(key) {\n  return window.crypto.subtle.exportKey(\n    \"spki\",\n    key);\n}\n</code></pre>\n\n<p><strong>UPDATE 2:</strong></p>\n\n<p>I generated the PEM keys (from the exported keys in JS), but primary, I don't use PEM keys. After exporting the public key in JavaScript, I creat a new Uint8Array from the ArrayBuffer, send it via WebSocket (binary frame) to the server, and try to parse it. The received uint8_t array always 158 byte length. I use P-521 -- secp521r1.</p>\n\n<p><em>The private key exported in <strong>pkcs8</strong>!</em></p>\n\n<pre><code>-----BEGIN PRIVATE KEY-----\n MIHuAgEAMBAGByqGSM49AgEGBSuBBAAjBIHWMIHTAgEBBEIApK1m/qpIAZ1iENht\n XJxng4bdur6YV2SpMs+uFtSiJ/n96HbjVkqSENavv7vblIow+i5QUhaOkqSNWi0B\n 7x695C6hgYkDgYYABAATsbs5B+ebSwoIXD6RD2NYONzSWOtt0SigPM27pdYEWpld\n /6j6S34gvRHQwDSMzs6//1zVE20Mn+izNM0KPWhRewD6SotR8/2QGWB5uo8GiXx1\n RLyBp+TOurQLEsYwiWSLkUIUMvPH/6WCxSNO4FzBf617PRqs7Zv3Vo98d9JH/3mI\n TA==\n -----END PRIVATE KEY-----\n\n-----BEGIN PUBLIC KEY-----\n MIGbMBAGByqGSM49AgEGBSuBBAAjA4GGAAQAE7G7OQfnm0sKCFw+kQ9jWDjc0ljr\n bdEooDzNu6XWBFqZXf+o+kt+IL0R0MA0jM7Ov/9c1RNtDJ/oszTNCj1oUXsA+kqL\n UfP9kBlgebqPBol8dUS8gafkzrq0CxLGMIlki5FCFDLzx/+lgsUjTuBcwX+tez0a\n rO2b91aPfHfSR/95iEw=\n -----END PUBLIC KEY-----\n</code></pre>\n\n<p>Some detail:</p>\n\n<pre><code>% openssl asn1parse -inform PEM -in pub.pem \n    0:d=0  hl=3 l= 155 cons: SEQUENCE          \n    3:d=1  hl=2 l=  16 cons: SEQUENCE          \n    5:d=2  hl=2 l=   7 prim: OBJECT            :id-ecPublicKey\n   14:d=2  hl=2 l=   5 prim: OBJECT            :secp521r1\n   21:d=1  hl=3 l= 134 prim: BIT STRING        \n% openssl asn1parse -inform PEM -in priv.pem\n    0:d=0  hl=3 l= 238 cons: SEQUENCE          \n    3:d=1  hl=2 l=   1 prim: INTEGER           :00\n    6:d=1  hl=2 l=  16 cons: SEQUENCE          \n    8:d=2  hl=2 l=   7 prim: OBJECT            :id-ecPublicKey\n   17:d=2  hl=2 l=   5 prim: OBJECT            :secp521r1\n   24:d=1  hl=3 l= 214 prim: OCTET STRING      [HEX DUMP]:3081D3020101044200A4AD66FEAA48019D6210D86D5C9C678386DDBABE985764A932CFAE16D4A227F9FDE876E3564A9210D6AFBFBBDB948A30FA2E5052168E92A48D5A2D01EF1EBDE42EA1818903818600040013B1BB3907E79B4B0A085C3E910F635838DCD258EB6DD128A03CCDBBA5D6045A995DFFA8FA4B7E20BD11D0C0348CCECEBFFF5CD5136D0C9FE8B334CD0A3D68517B00FA4A8B51F3FD90196079BA8F06897C7544BC81A7E4CEBAB40B12C63089648B91421432F3C7FFA582C5234EE05CC17FAD7B3D1AACED9BF7568F7C77D247FF79884C\n</code></pre>\n\n<p><strong>Error codes when call o2i_ECPublicKey:</strong></p>\n\n<p>(Call with the same data, but error is different each time -- which is repeated anyway.)</p>\n\n<pre><code>error:10067066:elliptic curve routines:ec_GFp_simple_oct2point:invalid\nerror:10098010:elliptic curve routines:o2i_ECPublicKey:EC lib\nerror:0D07207B:asn1 encoding routines:ASN1_get_object:header too long\nerror:10067066:elliptic curve routines:ec_GFp_simple_oct2point:invalid\nerror:10098010:elliptic curve routines:o2i_ECPublicKey:EC lib\n</code></pre>\n\n<p><strong>Update 3:</strong></p>\n\n<p>From C++, i wrote out the received data (key) into a file:</p>\n\n<pre><code>% % openssl asn1parse -inform DER -in data.bin \n    0:d=0  hl=3 l= 155 cons: SEQUENCE          \n    3:d=1  hl=2 l=  16 cons: SEQUENCE          \n    5:d=2  hl=2 l=   7 prim: OBJECT            :id-ecPublicKey\n   14:d=2  hl=2 l=   5 prim: OBJECT            :secp521r1\n   21:d=1  hl=3 l= 134 prim: BIT STRING\n% \n% hexdump data.bin                          \n0000000 8130 309b 0610 2a07 4886 3dce 0102 0506\n0000010 812b 0004 0323 8681 0400 1300 bbb1 0739\n0000020 9be7 0a4b 5c08 913e 630f 3858 d2dc eb58\n0000030 d16d a028 cd3c a5bb 04d6 995a ff5d faa8\n0000040 7e4b bd20 d011 34c0 ce8c bfce 5cff 13d5\n0000050 0c6d e89f 34b3 0acd 683d 7b51 fa00 8b4a\n0000060 f351 90fd 6019 ba79 068f 7c89 4475 81bc\n0000070 e4a7 bace 0bb4 c612 8930 8b64 4291 3214\n0000080 c7f3 a5ff c582 4e23 5ce0 7fc1 7bad 1a3d\n0000090 edac f79b 8f56 777c 47d2 79ff 4c88     \n000009\n</code></pre>\n\n<p>Hex encoded exported SPKI (the result of the WebCrypto export):</p>\n\n<p>Private:</p>\n\n<pre><code>MIHuAgEAMBAGByqGSM49AgEGBSuBBAAjBIHWMIHTAgEBBEIApK1m/qpIAZ1iENhtXJxng4bdur6YV2SpMs+uFtSiJ/n96HbjVkqSENavv7vblIow+i5QUhaOkqSNWi0B7x695C6hgYkDgYYABAATsbs5B+ebSwoIXD6RD2NYONzSWOtt0SigPM27pdYEWpld/6j6S34gvRHQwDSMzs6//1zVE20Mn+izNM0KPWhRewD6SotR8/2QGWB5uo8GiXx1RLyBp+TOurQLEsYwiWSLkUIUMvPH/6WCxSNO4FzBf617PRqs7Zv3Vo98d9JH/3mITA==\n</code></pre>\n\n<p>Public:</p>\n\n<pre><code>MIGbMBAGByqGSM49AgEGBSuBBAAjA4GGAAQAE7G7OQfnm0sKCFw+kQ9jWDjc0ljrbdEooDzNu6XWBFqZXf+o+kt+IL0R0MA0jM7Ov/9c1RNtDJ/oszTNCj1oUXsA+kqLUfP9kBlgebqPBol8dUS8gafkzrq0CxLGMIlki5FCFDLzx/+lgsUjTuBcwX+tez0arO2b91aPfHfSR/95iEw=\n</code></pre>\n\n<p><strong>Update 4:</strong></p>\n\n<p>Private key jwk format:</p>\n\n<pre><code>{\n  \"crv\":\"P-521\",\n  \"d\":\"AKStZv6qSAGdYhDYbVycZ4OG3bq-mFdkqTLPrhbUoif5_eh241ZKkhDWr7-725SKMPouUFIWjpKkjVotAe8eveQu\",\n  \"ext\":true,\n  \"key_ops\":[\"sign\"],\n  \"kty\":\"EC\",\n  \"x\":\"ABOxuzkH55tLCghcPpEPY1g43NJY623RKKA8zbul1gRamV3_qPpLfiC9EdDANIzOzr__XNUTbQyf6LM0zQo9aFF7\",\n  \"y\":\"APpKi1Hz_ZAZYHm6jwaJfHVEvIGn5M66tAsSxjCJZIuRQhQy88f_pYLFI07gXMF_rXs9Gqztm_dWj3x30kf_eYhM\"\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2010", "windows-7", "qt5", "pragma"], "answers": [{"tags": [], "owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "is_accepted": false, "score": 0, "last_activity_date": 1472644631, "last_edit_date": 1472644631, "creation_date": 1472633102, "answer_id": 39244824, "question_id": 33658105, "link": "https://stackoverflow.com/questions/33658105/c-nesting-pragma-warning-push-pop/39244824#39244824", "title": "C++ Nesting pragma warning push/pop", "body": "<p>Using a simple MCVE:</p>\n\n<pre><code>void test()\n{\n#pragma warning( push )\n#pragma warning( disable : 4305 ) // 'initializing' : truncation from 'double' to 'float'\n\n#pragma warning( push )\n#pragma warning( disable : 4244 ) // conversion from 'double' to 'float', possible loss of data\n    {\n        float f;\n        double d = 21.0;\n        f = d;  // warning C4244 : '=' : conversion from 'double' to 'float', possible loss of data\n    }\n#pragma warning( pop )\n\n    {\n        float ff = 1.02;  // warning C4305: 'initializing' : truncation from 'double' to 'float'\n    }\n#pragma warning( pop )\n\n}\n</code></pre>\n\n<p>and compiled with Visual Studio 2013 (I haven't checked any others) results in zero warnings. This would indicate that (at least na\u00efvely) nested pop/pushes works as expected. Depending on the external libraries, they may actually enable disabled warnings warning if it's done with disable/default pairs (instead of push/pop pairs):</p>\n\n<pre><code>void test()\n{\n#pragma warning( push )\n#pragma warning( disable : 4305 ) // 'initializing' : truncation from 'double' to 'float'\n\n#pragma warning( disable : 4244 ) // conversion from 'double' to 'float', possible loss of data\n#pragma warning( disable : 4305 ) // 'initializing' : truncation from 'double' to 'float'\n    {\n        float f;\n        double d = 21.0;\n        f = d;  // warning C4244 : '=' : conversion from 'double' to 'float', possible loss of data\n        f = 1.02;  // warning C4305: 'initializing' : truncation from 'double' to 'float'\n    }\n#pragma warning( default : 4244 ) // conversion from 'double' to 'float', possible loss of data\n#pragma warning( default : 4305 ) // 'initializing' : truncation from 'double' to 'float'\n\n    {\n        // In this case, the following line results in a warning,\n        // despite the #pragma warning( disable : 4305 ) line above\n        float ff = 1.02;  // warning C4305: 'initializing' : truncation from 'double' to 'float'\n    }\n#pragma warning( pop )\n\n}\n</code></pre>\n\n<p>In this case, we get a warning at the <code>float ff = 1.02;</code> line, despite the <code>#pragma warning( disable : 4305 )</code> line at the top. What you can do to turn off all compiler warnings (so that the default becomes off) would be to replace your</p>\n\n<pre><code>#pragma warning( push )\n#pragma warning( disable : 123456789 )\n// included external code you don't want to hear about\n#pragma warning( pop )\n</code></pre>\n\n<p>with</p>\n\n<pre><code>#pragma warning( push, 0 )\n// included external code you don't want to hear about\n#pragma warning( pop )\n</code></pre>\n\n<p>which will result in no compiler warnings (linker warnings not included).</p>\n"}], "owner": {"reputation": 955, "user_id": 869705, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/31151b228161022ba5b3a2531edbdd1a?s=128&d=identicon&r=PG", "display_name": "bmahf", "link": "https://stackoverflow.com/users/869705/bmahf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1083, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1472644631, "creation_date": 1447269187, "question_id": 33658105, "link": "https://stackoverflow.com/questions/33658105/c-nesting-pragma-warning-push-pop", "title": "C++ Nesting pragma warning push/pop", "body": "<p>I am working on Win7 using VS2010 with a code base that makes heavy use of the Qt 5.1.1 framework, and we have set our compilation warning level to 4 so that we can catch as many or our own issues as possible.  We are using the free version of Qt, so I suppose maybe that's where the problem lies, but we are getting loads of warnings from the included Qt headers.</p>\n\n<p>I created two header files, one with the following:</p>\n\n<pre><code>// header file 1\n#pragma warning(push)\n#pragma warning(disable: 4091)\n#pragma warning(disable: 4127)\n#pragma warning(disable: 4231)\n#pragma warning(disable: 4244)\n#pragma warning(disable: 4251)\n#pragma warning(disable: 4481)\n#pragma warning(disable: 4512)\n#pragma warning(disable: 4718)\n#pragma warning(disable: 4800)\n</code></pre>\n\n<p>and the other with the following:</p>\n\n<pre><code>// header file 2\n#pragma warning(pop)\n</code></pre>\n\n<p>And then around every include of a Qt header file or group of Qt header files in the code, I preceded that by including header file 1, and then after the last Qt header I ended it by including header file 2.  This worked very well in a small project in the solution, but for one of the large projects, I am still getting very many warnings for codes that I have disabled in my header file 1.</p>\n\n<p>I had a suspicion and did a grep through the whole Qt source tree and found that there are some headers that themselves do pragma warning push/pops.  Some of these do this in the middle of the code, and I am starting to wonder whether my push is closed by their pop.</p>\n\n<p>My question is, is it the case that a #pragma warning(push) directive can be nested, as with a #ifdef?  In other words, just as I can do:</p>\n\n<pre><code>#ifdef DEF1\n#ifdef DEF2\n&lt;dosomething&gt;\n#endif // for DEF2\n#endif // for DEF1\n</code></pre>\n\n<p>Is it possible to do the following:</p>\n\n<pre><code>// outer layer - my cpp file about to include a Qt header\n#pragma warning(push)\n#pragma warning(disable: 4091)\n\n// inner layer - included Qt header file pushes and pops and then continues with more code\n#pragma warning(push)\n#pragma warning(disable: 2403)\n&lt;some code that actually uses this stuff&gt;\n#pragma warning(pop)\n\n// back to outer layer - my file after the Qt header include\n#pragma warning(pop)\n</code></pre>\n\n<p>Or does the first pop actually pop both?  I would have thought that it would nest, since it is supposed to push onto a stack, but can't figure out another reason why I am still seeing these Qt warnings.  The Qt warnings themselves are referencing Qt files, like this one does:</p>\n\n<pre><code>6&gt;c:\\qt\\qt5.1.1\\5.1.1\\msvc2010\\include\\qtcore\\qhash.h(72): warning C4127: conditional expression is constant\n</code></pre>\n\n<p>Any ideas on this?  I have looked around for nested pragma warning push/pop, but see no one talking about it, and the following MSDN page on warning doesn't say anything:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/2c8f766e.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/2c8f766e.aspx</a></p>\n\n<p>Very important this gets cleaned up, because the real goal is to start dealing with out in-house warnings that have been overlooked because of the deluge of Qt warnings.</p>\n"}, {"tags": ["c++", "templates", "language-lawyer", "c++14", "crtp"], "comments": [{"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1447273157, "post_id": 33657908, "comment_id": 55091763, "body": "Sorry for my lack of knowledge, but what does <code>not has_sort&lt;Sorter, Iterable&gt;</code> mean in a template? I mean, I know what <i>not</i> means in English as well as what&#39;s <i>has_sort</i>, but is it a legal statement as a template argument? I&#39;ve never had seen it before, I&#39;m curious."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 5, "creation_date": 1447273820, "post_id": 33657908, "comment_id": 55092123, "body": "@skypjack Interestingly enough, <a href=\"http://en.cppreference.com/w/cpp/language/operator_logical\" rel=\"nofollow noreferrer\"><code>not</code> is a synonym for <code>!</code> in C++</a>"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1447274219, "post_id": 33657908, "comment_id": 55092325, "body": "@jaggedSpire :-D Was simply that? So much time has passed since the last time I&#39;ve seen it that I even forgot that it exists!! Shame of me. :-) ... I thought about some keyword related only to templates and completely missed the point. Thank you. I&#39;m going to change job right now."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 1, "creation_date": 1447276767, "post_id": 33657908, "comment_id": 55093641, "body": "@skypjack It&#39;s an oft-forgotten corner of the language, to be sure. I wouldn&#39;t quit over it though-if you quit now you can&#39;t take advantage of knowing it. ;)"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 1, "creation_date": 1447278438, "post_id": 33657908, "comment_id": 55094473, "body": "I don&#39;t know whether there is any rule that covers such &quot;self-referencing&quot; function templates. But I&#39;m inclined to say that this is undefined behavior. It even gives me trouble thinking about how GCC may have interpreted this. Can you explain?"}, {"owner": {"reputation": 19052, "user_id": 1364752, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mxlR2.jpg?s=128&g=1", "display_name": "Morwenn", "link": "https://stackoverflow.com/users/1364752/morwenn"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1447279574, "post_id": 33657908, "comment_id": 55095027, "body": "@\u1405JohannesSchaub-litb\u140a If only... It seems that g++ knows more about <code>Sorter</code> than the mere fact that it exists by the time it instantiates the functions in the <code>sorter_facade</code>. On the other hand, I already had other similar but different problems showing that g++ and clang++ probably do not try to infer things about functions at the same time."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1447285574, "post_id": 33657908, "comment_id": 55097556, "body": "Looks like another &quot;I exist if I don&#39;t exist&quot; thing. Compare <a href=\"http://stackoverflow.com/questions/32997699/fallback-variadic-constructor-why-does-this-work\" title=\"fallback variadic constructor why does this work\">stackoverflow.com/questions/32997699/&hellip;</a>"}, {"owner": {"reputation": 19052, "user_id": 1364752, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mxlR2.jpg?s=128&g=1", "display_name": "Morwenn", "link": "https://stackoverflow.com/users/1364752/morwenn"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1447286166, "post_id": 33657908, "comment_id": 55097733, "body": "@T.C. Looks more or less like it&#39;s that. It&#39;s a pain, half of the library&#39;s design relies on that .____."}], "answers": [{"tags": [], "owner": {"reputation": 3226, "user_id": 2173029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ad13ad637acc30b9be7d129798894b1?s=128&d=identicon&r=PG&f=1", "display_name": "Rumburak", "link": "https://stackoverflow.com/users/2173029/rumburak"}, "is_accepted": false, "score": 1, "last_activity_date": 1454150033, "creation_date": 1454150033, "answer_id": 35100690, "question_id": 33657908, "link": "https://stackoverflow.com/questions/33657908/visibility-of-member-functions-in-a-crtp-class/35100690#35100690", "title": "Visibility of member functions in a CRTP class", "body": "<p>I am pretty sure this is a bug in clang. The return type of <code>sorter_facade&lt;Sorter&gt;::operator()</code> depends on the template argument Iterator. Still, the compiler seems to decide to SFINAE out before knowing the arguments.</p>\n\n<p>But bug or not, you can work around this by explicitly deferring the calculation of the return type. Here is a version that does not depend on black magic. Works with gcc-5.2 and clang-3.6:</p>\n\n<pre><code>template&lt;typename Sorter, typename Iterable&gt;\nstruct sort_result\n{\n  using type =  decltype(\n      std::declval&lt;Sorter&amp;&gt;()(\n         std::begin(std::declval&lt;Iterable&amp;&gt;()),\n         std::end(std::declval&lt;Iterable&amp;&gt;())));\n};\n\ntemplate&lt;typename Sorter, typename Deferred&gt;\nusing sort_result_t = typename sort_result&lt;Sorter, Deferred&gt;::type;\n\ntemplate&lt;typename Sorter&gt;\nstruct sorter_facade\n{\n  template &lt;typename Iterable&gt;\n  auto operator()(Iterable&amp; iterable) const\n      -&gt; sort_result_t&lt;Sorter, Iterable&gt;\n    {\n        return Sorter{}(std::begin(iterable), std::end(iterable));\n    }\n};\n\nstruct heap_sorter:\n    sorter_facade&lt;heap_sorter&gt;\n{\n    using sorter_facade&lt;heap_sorter&gt;::operator();\n\n    template&lt;typename Iterator&gt;\n    auto operator()(Iterator first, Iterator last) const\n        -&gt; void\n    {\n        std::make_heap(first, last);\n        std::sort_heap(first, last);\n    }\n};\n\nint main()\n{\n      std::vector&lt;int&gt; vec(3);\n          heap_sorter{}(vec);\n}\n</code></pre>\n\n<p>The trick is: The compiler does not know if you specialize the result_type later on. Therefore it has to wait until you actually use it, before trying to determine the return type.</p>\n"}], "owner": {"reputation": 19052, "user_id": 1364752, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mxlR2.jpg?s=128&g=1", "display_name": "Morwenn", "link": "https://stackoverflow.com/users/1364752/morwenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1454150033, "creation_date": 1447268485, "last_edit_date": 1447296124, "question_id": 33657908, "link": "https://stackoverflow.com/questions/33657908/visibility-of-member-functions-in-a-crtp-class", "title": "Visibility of member functions in a CRTP class", "body": "<p>I am writing a sorting library with sorter function objects. One of the main classes, <code>sorter_facade</code>, is intended to provide some overloads of <code>operator()</code> to the sorter depending on the overloads that already exist. Here is a simple reduced example of a <code>heap_sorter</code> object, implementing a heapsort:</p>\n\n<pre><code>struct heap_sorter:\n    sorter_facade&lt;heap_sorter&gt;\n{\n    using sorter_facade&lt;heap_sorter&gt;::operator();\n\n    template&lt;typename Iterator&gt;\n    auto operator()(Iterator first, Iterator last) const\n        -&gt; void\n    {\n        std::make_heap(first, last);\n        std::sort_heap(first, last);\n    }\n};\n</code></pre>\n\n<p>One of the simplest goals of <code>sorter_facade</code> is to provide an iterable overload to the sorter's <code>operator()</code> when an overload taking a pair of iterators already exists. Here is a reduced implementation of <code>sorter_facade</code>, sufficient for the problem at hand:</p>\n\n<pre><code>template&lt;typename Sorter&gt;\nstruct sorter_facade\n{\n    template&lt;typename Iterable&gt;\n    auto operator()(Iterable&amp; iterable) const\n        -&gt; std::enable_if_t&lt;\n            not has_sort&lt;Sorter, Iterable&gt;,\n            decltype(std::declval&lt;Sorter&amp;&gt;()(std::begin(iterable), std::end(iterable)))\n        &gt;\n    {\n        return Sorter{}(std::begin(iterable), std::end(iterable));\n    }\n};\n</code></pre>\n\n<p>In this class, <code>has_sort</code> is a trait used to detect whether a sorter has an <code>operator()</code> overload taking an <code>Iterable&amp;</code>. It is implemented using a hand-rolled version of the <a href=\"http://en.cppreference.com/w/cpp/experimental/is_detected\" rel=\"nofollow\">detection idiom</a>:</p>\n\n<pre><code>template&lt;typename Sorter, typename Iterable&gt;\nusing has_sort_t = std::result_of_t&lt;Sorter(Iterable&amp;)&gt;;\n\ntemplate&lt;typename Sorter, typename Iterable&gt;\nconstexpr bool has_sort = std::experimental::is_detected_v&lt;has_sort_t, Sorter, Iterable&gt;;\n</code></pre>\n\n<hr>\n\n<p>Now, to the actual problem: the following <code>main</code> works well with g++ 5.2:</p>\n\n<pre><code>int main()\n{\n    std::vector&lt;int&gt; vec(3);\n    heap_sorter{}(vec);\n}\n</code></pre>\n\n<p>However, <a href=\"http://coliru.stacked-crooked.com/a/8b165f2e26b2720a\" rel=\"nofollow\">it fails with clang++ 3.7.0</a>, with the following error message:</p>\n\n<blockquote>\n<pre><code>main.cpp:87:5: error: no matching function for call to object of type 'heap_sorter'\n    heap_sorter{}(vec);\n    ^~~~~~~~~~~~~\n\n/usr/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/5.2.0/../../../../include/c++/5.2.0/type_traits:2388:44: note: candidate template ignored: disabled by 'enable_if' [with Iterable = std::vector&lt;int, std::allocator&lt;int&gt; &gt;]\n    using enable_if_t = typename enable_if&lt;_Cond, _Tp&gt;::type;\n                                           ^\n\nmain.cpp:75:10: note: candidate function template not viable: requires 2 arguments, but 1 was provided\n    auto operator()(Iterator first, Iterator last) const\n     ^\n\n1 error generated.\n</code></pre>\n</blockquote>\n\n<p>Apparently, when evaluating the <code>std::enable_if_t</code>, it seems to consider that <code>Sorter</code> already has an <code>operator()</code> able to take an <code>Iterable&amp;</code>, which probably means that clang++ and g++ do not valuate the \"same\" <code>Sorter</code> when checking for the existence of the overload.</p>\n\n<p>For this simple example, removing the <code>std::enable_if_t</code> makes the whole thing work, but the class <code>sorter_facade</code> is actually much bigger than that and I need it to resolve ambiguity problems with other overloads of <code>operator()</code>, so just removing it isn't a solution.</p>\n\n<p>So... what causes the error? Should compilers accept or reject this code? Finally, is there a standard-compatible way to make this work with the latest versions of g++ and clang++?</p>\n\n<hr>\n\n<p><strong>EDIT:</strong> as a side note, I managed to get all the crazy to work with both g++5 and clang++3.8 by adding another layer of <em>black magic</em> to the point I've no idea why it even works anymore at all. While of all the previous questions hold, here is the \u00ab\u00a0workaround\u00a0\u00bb (using C++17 <code>std::void_t</code>):</p>\n\n<pre><code>tempate&lt;typename Sorter&gt;\nstruct wrapper:\n    Sorter\n{\n#ifdef __clang__\n    using Sorter::operator();\n\n    template&lt;typename Iterable&gt;\n    auto operator()(Iterable&amp; iterable) const\n        -&gt; std::enable_if_t&lt;false, std::void_t&lt;Iterable&gt;&gt;\n    {}\n#endif\n};\n\ntemplate&lt;typename Sorter&gt;\nstruct sorter_facade\n{\n    template&lt;typename Iterable&gt;\n    auto operator()(Iterable&amp; iterable) const\n        -&gt; std::enable_if_t&lt;\n            not has_sort&lt;wrapper&lt;Sorter&gt;, Iterable&gt;,\n            decltype(std::declval&lt;Sorter&amp;&gt;()(std::begin(iterable), std::end(iterable)))\n        &gt;\n    {\n        return Sorter{}(std::begin(iterable), std::end(iterable));\n    }\n};\n</code></pre>\n\n<p>I guess that it abuses different compiler-specific behaviours in both g++ and clang++ and achieves something that wasn't meant to work, but still... I'm amazed that it works, even in my whole project, which has many more tricky things to handle...</p>\n"}, {"tags": ["c++", "xcode", "macos", "valgrind"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1447271698, "post_id": 33657871, "comment_id": 55091002, "body": "FWIW, I don&#39;t observe that on Linux/Debian/x86-64 with GCC 5.2; the three &quot;lost&quot; lines from <code>valgrind</code> gives me 0; and likewise with Clang 3.7; it might be a MacOSX specific issue"}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 1, "creation_date": 1448447795, "post_id": 33657871, "comment_id": 55589930, "body": "It sounds like you should file a bug report with the valgrind folks.  I&#39;m not sure exactly how you expect stackoverflow to help you."}, {"owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 0, "creation_date": 1449220317, "post_id": 33657871, "comment_id": 55921620, "body": "sometime third party libs create leaks you cannot fix (unless you fix the lib). They are reported by valgrind, but you can suppress them using sup file in valgrind. For some reason, maybe you libc leaks or the loader... having the full backtrace would be interesting."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 5609078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe6b4f36f68f31de03ff65ad89aebfbd?s=128&d=identicon&r=PG&f=1", "display_name": "Vinicius", "link": "https://stackoverflow.com/users/5609078/vinicius"}, "is_accepted": false, "score": 2, "last_activity_date": 1449067665, "last_edit_date": 1495540789, "creation_date": 1449067665, "answer_id": 34045646, "question_id": 33657871, "link": "https://stackoverflow.com/questions/33657871/valgrind-c-memory-leak-in-empty-file/34045646#34045646", "title": "Valgrind C++ memory leak in empty file", "body": "<p>It seems valgrind have issues on MacOSX. While these issues are not fixed, a possible temporary solution would be the use of a suppression file. For further details, please check <a href=\"https://stackoverflow.com/questions/27842968/valgrind-reports-errors-for-a-very-simple-c-program\">this other answer</a></p>\n"}, {"tags": [], "owner": {"reputation": 1995, "user_id": 3492631, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/6X56B.jpg?s=128&g=1", "display_name": "Dendi Suhubdy", "link": "https://stackoverflow.com/users/3492631/dendi-suhubdy"}, "is_accepted": false, "score": 0, "last_activity_date": 1460663465, "creation_date": 1460663465, "answer_id": 36632670, "question_id": 33657871, "link": "https://stackoverflow.com/questions/33657871/valgrind-c-memory-leak-in-empty-file/36632670#36632670", "title": "Valgrind C++ memory leak in empty file", "body": "<p>I tried to reproduce this but I couldn't on my machine. It seems that there is no leak on the newest valgrind. Try brew upgrade valgrind</p>\n\n<pre><code>C02QH2D7G8WM:simple userone$ valgrind --tool=memcheck --leak-check=full --show-leak-kinds=all ./temp.out\n==1917== Memcheck, a memory error detector\n==1917== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\n==1917== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info\n==1917== Command: ./temp.out\n==1917== \n==1917== \n==1917== HEAP SUMMARY:\n==1917==     in use at exit: 22,177 bytes in 189 blocks\n==1917==   total heap usage: 255 allocs, 66 frees, 27,953 bytes allocated\n==1917== \n==1917== 2,064 bytes in 1 blocks are possibly lost in loss record 57 of 62\n==1917==    at 0x10000817C: malloc_zone_malloc (in /usr/local/Cellar/valgrind/3.11.0/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\n==1917==    by 0x1005E0EFD: _objc_copyClassNamesForImage (in /usr/lib/libobjc.A.dylib)\n==1917==    by 0x1005D4182: protocols() (in /usr/lib/libobjc.A.dylib)\n==1917==    by 0x1005D4093: readClass(objc_class*, bool, bool) (in /usr/lib/libobjc.A.dylib)\n==1917==    by 0x1005D1C13: gc_init (in /usr/lib/libobjc.A.dylib)\n==1917==    by 0x1005D924E: objc_initializeClassPair_internal(objc_class*, char const*, objc_class*, objc_class*) (in /usr/lib/libobjc.A.dylib)\n==1917==    by 0x1005E6132: layout_string_create (in /usr/lib/libobjc.A.dylib)\n==1917==    by 0x1005D483C: realizeClass(objc_class*) (in /usr/lib/libobjc.A.dylib)\n==1917==    by 0x1005D4300: copySwiftV1MangledName(char const*, bool) (in /usr/lib/libobjc.A.dylib)\n==1917==    by 0x1005D42E9: copySwiftV1MangledName(char const*, bool) (in /usr/lib/libobjc.A.dylib)\n==1917==    by 0x1005D42E9: copySwiftV1MangledName(char const*, bool) (in /usr/lib/libobjc.A.dylib)\n==1917==    by 0x1005D42E9: copySwiftV1MangledName(char const*, bool) (in /usr/lib/libobjc.A.dylib)\n==1917== \n==1917== LEAK SUMMARY:\n==1917==    definitely lost: 0 bytes in 0 blocks\n==1917==    indirectly lost: 0 bytes in 0 blocks\n==1917==      possibly lost: 2,064 bytes in 1 blocks\n==1917==    still reachable: 0 bytes in 0 blocks\n==1917==         suppressed: 20,113 bytes in 188 blocks\n==1917== \n==1917== For counts of detected and suppressed errors, rerun with: -v\n==1917== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 17 from 17)\n</code></pre>\n"}], "owner": {"reputation": 1023, "user_id": 1876120, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3046914c1846e632ce2a45b6537a3ae4?s=128&d=identicon&r=PG", "display_name": "Myone", "link": "https://stackoverflow.com/users/1876120/myone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1312, "favorite_count": 0, "answer_count": 2, "score": 10, "last_activity_date": 1460663465, "creation_date": 1447268359, "last_edit_date": 1448439212, "question_id": 33657871, "link": "https://stackoverflow.com/questions/33657871/valgrind-c-memory-leak-in-empty-file", "title": "Valgrind C++ memory leak in empty file", "body": "<p>I have a problem with \"extra\" memory leaks in valgrind. For example, I created a test program, called temp.cpp:</p>\n\n<pre><code>int main() { return 0; }\n</code></pre>\n\n<p>In the terminal, I run:</p>\n\n<pre><code>&gt;&gt; g++ -o temp.out temp.cpp\n&gt;&gt; valgrind --tool=memcheck --leak-check=full --show-leak-kinds=all ./temp.out\n</code></pre>\n\n<p>This results in several memory leaks. How could this be?</p>\n\n<pre><code>==4438== LEAK SUMMARY:\n==4438==    definitely lost: 4,120 bytes in 2 blocks\n==4438==    indirectly lost: 2,288 bytes in 6 blocks\n==4438==      possibly lost: 8,336 bytes in 99 blocks\n==4438==    still reachable: 6,440 bytes in 13 blocks  \n==4438==         suppressed: 5,020 bytes in 73 blocks\n</code></pre>\n\n<p>I have tried running other .cpp files and I get the exact same leak summary. About a month ago when I tried, nothing was wrong. I might have upgraded Xcode or something, if that could be the issue (?). These are my settings for g++:</p>\n\n<p>Configured with: </p>\n\n<pre><code>--prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.10.sdk/usr/include/c++/4.2.1\n</code></pre>\n\n<p>Apple LLVM version 6.1.0 (clang-602.0.53) (based on LLVM 3.6.0svn)\nTarget: x86_64-apple-darwin15.0.0\nThread model: posix</p>\n"}, {"tags": ["c++", "opencv", "threshold"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1447268418, "post_id": 33657840, "comment_id": 55089184, "body": "Put tags in the tags, not the title (C++ &amp; OpenCV)."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1447276107, "post_id": 33657840, "comment_id": 55093288, "body": "Try doing a <code>mean</code> over a 3x3 area followed by another threshold at 50%, or finding the maximum in each 3x3 area, or a noise removal using a <code>median</code> over a 5x5 area... I mean to try those AFTER your original thresholding."}, {"owner": {"reputation": 27, "user_id": 5390829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77c04278e48bd1fbc25c8661faf0712a?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Andreani", "link": "https://stackoverflow.com/users/5390829/guillaume-andreani"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1447283272, "post_id": 33657840, "comment_id": 55096739, "body": "I dont understand your first two tips with mean and the maximum. Could you explain more detail please ? @MarkSetchell"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1447283742, "post_id": 33657840, "comment_id": 55096938, "body": "You create a new image where each pixel in the new image is the average of the 3x3 square centred on the original pixel, or in the second case, the maximum pixel of the 3x3 square centred on the original pixel."}, {"owner": {"reputation": 27, "user_id": 5390829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77c04278e48bd1fbc25c8661faf0712a?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Andreani", "link": "https://stackoverflow.com/users/5390829/guillaume-andreani"}, "edited": false, "score": 0, "creation_date": 1447285865, "post_id": 33657840, "comment_id": 55097648, "body": "Ok, thanks a lot ! It work !"}], "owner": {"reputation": 27, "user_id": 5390829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77c04278e48bd1fbc25c8661faf0712a?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Andreani", "link": "https://stackoverflow.com/users/5390829/guillaume-andreani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 246, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1447268515, "creation_date": 1447268247, "last_edit_date": 1447268515, "question_id": 33657840, "link": "https://stackoverflow.com/questions/33657840/image-processing-improved-thresholding", "title": "Image processing : Improved thresholding?", "body": "<p>I would like to apply a rotation on image of scanned book.\nI use <code>FindContours</code> and <code>approxPolyDP</code> to get the corners of the book and for that I need a perfect white square. Only, when I apply a simple threeshold:</p>\n\n<pre><code>threshold(imgGrayScale, three, 1, 255, THRESH_BINARY);\n</code></pre>\n\n<p>on my input image I have still some points here and there. Thresholding it is the good solution to get a full perfect white square? Maybe Segmentation would be a better solution?</p>\n\n<p>Summary of my post :\n<a href=\"http://imgur.com/FWp28rr\" rel=\"nofollow\">http://imgur.com/FWp28rr</a></p>\n"}, {"tags": ["c++", "dictionary", "iterator", "std"], "comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1447268961, "post_id": 33657743, "comment_id": 55089466, "body": "Note that in such situations it&#39;s often easy to rewrite the loop body such that the special handling occurs for the first rather than the last element."}, {"owner": {"reputation": 31937, "user_id": 2642204, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/AIjBF.jpg?s=128&g=1", "display_name": "BartoszKP", "link": "https://stackoverflow.com/users/2642204/bartoszkp"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1447270045, "post_id": 33657743, "comment_id": 55090111, "body": "@ChristianHackl Note, that obviously this is not the case here :)"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 31937, "user_id": 2642204, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/AIjBF.jpg?s=128&g=1", "display_name": "BartoszKP", "link": "https://stackoverflow.com/users/2642204/bartoszkp"}, "edited": false, "score": 1, "creation_date": 1447270191, "post_id": 33657743, "comment_id": 55090195, "body": "@BartoszKP: Why not? Start every line but the first with a line break, put the &quot;This is the last element&quot; after the loop."}, {"owner": {"reputation": 31937, "user_id": 2642204, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/AIjBF.jpg?s=128&g=1", "display_name": "BartoszKP", "link": "https://stackoverflow.com/users/2642204/bartoszkp"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1447271136, "post_id": 33657743, "comment_id": 55090712, "body": "@ChristianHackl You&#39;re right, however OP does realize that, and question is specifically targeted for the flow as it is."}], "answers": [{"tags": [], "owner": {"reputation": 13848, "user_id": 276193, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3d9b60ead1b0c8420c03b203832e8d5f?s=128&d=identicon&r=PG", "display_name": "learnvst", "link": "https://stackoverflow.com/users/276193/learnvst"}, "is_accepted": false, "score": 0, "last_activity_date": 1447268703, "creation_date": 1447268703, "answer_id": 33657961, "question_id": 33657743, "link": "https://stackoverflow.com/questions/33657743/detect-if-iterator-is-last-element-of-stdmap/33657961#33657961", "title": "Detect if iterator is last element of std::map", "body": "<p>Ugly . . . but . . . </p>\n\n<pre><code>    auto iterCpy = iter;\n    if (++iterCpy == charMap.end())\n        std::cout &lt;&lt; \"\\t//This is the last element.\\n\";\n</code></pre>\n\n<p>use vsoftco's answer :)</p>\n"}, {"comments": [{"owner": {"reputation": 6553, "user_id": 3524982, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5NAb1.png?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/3524982/james"}, "edited": false, "score": 0, "creation_date": 1447270566, "post_id": 33657964, "comment_id": 55090406, "body": "Oh, I was using a separate iterator then incrementing that one. Nice to know about std::next();"}, {"owner": {"reputation": 509, "user_id": 1143263, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/DU564.jpg?s=128&g=1", "display_name": "matteolel", "link": "https://stackoverflow.com/users/1143263/matteolel"}, "edited": false, "score": 0, "creation_date": 1528194946, "post_id": 33657964, "comment_id": 88404988, "body": "Valid from C++11"}, {"owner": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "edited": false, "score": 0, "creation_date": 1609788510, "post_id": 33657964, "comment_id": 115926912, "body": "It is better than use reverse iterators to check if an element is the last, because of the weird logic of reverse iterators. And it solved my problem for a <code>std::vector</code>."}], "tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": false, "score": 13, "last_activity_date": 1447268715, "creation_date": 1447268715, "answer_id": 33657964, "question_id": 33657743, "link": "https://stackoverflow.com/questions/33657743/detect-if-iterator-is-last-element-of-stdmap/33657964#33657964", "title": "Detect if iterator is last element of std::map", "body": "<p>Use <a href=\"http://en.cppreference.com/w/cpp/iterator/next\" rel=\"noreferrer\"><code>std::next</code></a> from <code>&lt;iterator&gt;</code> as </p>\n\n<pre><code>if (std::next(iter) == charMap.end())\n    std::cout &lt;&lt; \"\\t//This is the last element.\\n\";\n</code></pre>\n\n<p>instead.</p>\n"}, {"tags": [], "owner": {"reputation": 411, "user_id": 5546661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G0831.png?s=128&g=1", "display_name": "AlexStepanov", "link": "https://stackoverflow.com/users/5546661/alexstepanov"}, "is_accepted": true, "score": 4, "last_activity_date": 1447268756, "creation_date": 1447268756, "answer_id": 33657982, "question_id": 33657743, "link": "https://stackoverflow.com/questions/33657743/detect-if-iterator-is-last-element-of-stdmap/33657982#33657982", "title": "Detect if iterator is last element of std::map", "body": "<p><code>base()</code> method returns iterator to an element that follows the element to which a reverse iterator is pointing. This means that <code>rbegin().base()</code> is equivalent to <code>end()</code></p>\n\n<p>To accomplish your task, you can do this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\n\nint main()\n{\n    std::map &lt;char, int&gt; charMap = { {'a', 1}, {'b', 2}, {'c', 3}, {'d', 4} };\n    for (auto iter = charMap.begin(); iter != charMap.end(); )\n    {\n        std::cout &lt;&lt; iter-&gt;first &lt;&lt; \":\\t\" &lt;&lt; iter-&gt;second;\n        if (++iter == charMap.end())\n            std::cout &lt;&lt; \"\\t//This is the last element.\\n\";\n        else\n            std::cout &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31937, "user_id": 2642204, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/AIjBF.jpg?s=128&g=1", "display_name": "BartoszKP", "link": "https://stackoverflow.com/users/2642204/bartoszkp"}, "is_accepted": false, "score": 2, "last_activity_date": 1447268774, "creation_date": 1447268774, "answer_id": 33657988, "question_id": 33657743, "link": "https://stackoverflow.com/questions/33657743/detect-if-iterator-is-last-element-of-stdmap/33657988#33657988", "title": "Detect if iterator is last element of std::map", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/iterator/reverse_iterator/base\" rel=\"nofollow\"><code>base()</code></a> doesn't return the same element:</p>\n\n<blockquote>\n  <p>The base iterator refers to the element that is next (from the <code>std::reverse_iterator::iterator_type perspective</code>) to the element the <code>reverse_iterator</code> is currently pointing to. That is <code>&amp;*(rit.base() - 1) == &amp;*rit</code>. </p>\n</blockquote>\n\n<p>This works as intended:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\n\nint main()\n{\n    std::map &lt;char, int&gt; charMap = { {'a', 1}, {'b', 2}, {'c', 3}, {'d', 4} };\n    auto last = charMap.rbegin();\n    ++last;\n\n    for (auto iter = charMap.begin(); iter != charMap.end(); iter++)\n    {\n        std::cout &lt;&lt; iter-&gt;first &lt;&lt; \":\\t\" &lt;&lt; iter-&gt;second;\n        if (iter == last.base())\n            std::cout &lt;&lt; \"\\t//This is the last element.\\n\";\n        else\n            std::cout &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11117, "user_id": 1554020, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/49118fbd7e64a00bc99b19d41e5e28e0?s=128&d=identicon&r=PG", "display_name": "yuri kilochek", "link": "https://stackoverflow.com/users/1554020/yuri-kilochek"}, "is_accepted": false, "score": 3, "last_activity_date": 1447268875, "creation_date": 1447268875, "answer_id": 33658024, "question_id": 33657743, "link": "https://stackoverflow.com/questions/33657743/detect-if-iterator-is-last-element-of-stdmap/33658024#33658024", "title": "Detect if iterator is last element of std::map", "body": "<p>Because <code>std::reverse_iterator</code> stores iterator with offset of <code>1</code>, so that <code>charMap.rbegin().base() == charMap.end()</code>. Chart over <a href=\"http://en.cppreference.com/w/cpp/iterator/reverse_iterator\" rel=\"nofollow\">here</a> illustrates this.</p>\n\n<p>You should instead use <code>std::prev</code> or <code>std::next</code> from <code>&lt;iterator&gt;</code>:</p>\n\n<pre><code>iter == std::prev(charMap.end())\n</code></pre>\n\n<p>or</p>\n\n<pre><code>std::next(iter) == charMap.end()\n</code></pre>\n\n<p>Whichever you find more meaningful.</p>\n"}, {"tags": [], "owner": {"reputation": 27, "user_id": 5547128, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-okE8mWF6YuU/AAAAAAAAAAI/AAAAAAAAAAA/APg7fdnNa5g/photo.jpg?sz=128", "display_name": "Camiel Coppelmans", "link": "https://stackoverflow.com/users/5547128/camiel-coppelmans"}, "is_accepted": false, "score": 1, "last_activity_date": 1447270486, "creation_date": 1447270486, "answer_id": 33658457, "question_id": 33657743, "link": "https://stackoverflow.com/questions/33657743/detect-if-iterator-is-last-element-of-stdmap/33658457#33658457", "title": "Detect if iterator is last element of std::map", "body": "<p>Actually, this is not expect to work as <code>iter</code> is indeed different from <code>charMap.rbegin().base()</code>.</p>\n\n<p>Your logic is correct, the only problem is that <code>charMap.rbegin().base()</code> iterator is equal to <code>charMap.end()</code>, but you leave your for statement at the moment <code>iter</code> reaches the <code>charMap.end()</code> value, so it never got the chance to test it in the if statement inside the for loop.</p>\n\n<p>To make it work you could rewrite the if statement in the following way:</p>\n\n<pre><code>if (iter-&gt;first == charMap.rbegin()-&gt;first)\n    std::cout &lt;&lt; \"\\t//This is the last element.\\n\";\nelse\n    std::cout &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>So you will be comparing the map key instead of the iterator itself.</p>\n"}, {"tags": [], "owner": {"reputation": 6583, "user_id": 3147508, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/DDd8J.jpg?s=128&g=1", "display_name": "Ikbel", "link": "https://stackoverflow.com/users/3147508/ikbel"}, "is_accepted": false, "score": 0, "last_activity_date": 1447271092, "creation_date": 1447271092, "answer_id": 33658616, "question_id": 33657743, "link": "https://stackoverflow.com/questions/33657743/detect-if-iterator-is-last-element-of-stdmap/33658616#33658616", "title": "Detect if iterator is last element of std::map", "body": "<p>This is working:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\n\nint main()\n{\n    std::map &lt;char, int&gt; charMap = { {'a', 1}, {'b', 2}, {'c', 3}, {'d', 4} };\n    for (auto iter = charMap.begin(); ;)\n    {\n        std::cout &lt;&lt; iter-&gt;first &lt;&lt; \":\\t\" &lt;&lt; iter-&gt;second;          \n        if (++iter== charMap.end()){\n            std::cout &lt;&lt; \"\\t//This is the last element.\\n\"; break;\n        }\n        else\n            std::cout &lt;&lt; \"\\n\";\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 6553, "user_id": 3524982, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5NAb1.png?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/3524982/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6901, "favorite_count": 1, "accepted_answer_id": 33657982, "answer_count": 7, "score": 6, "last_activity_date": 1447271092, "creation_date": 1447267811, "last_edit_date": 1495540853, "question_id": 33657743, "link": "https://stackoverflow.com/questions/33657743/detect-if-iterator-is-last-element-of-stdmap", "title": "Detect if iterator is last element of std::map", "body": "<p>This is similar to <a href=\"https://stackoverflow.com/questions/289715/last-key-in-a-stdmap\">this question</a> but not a duplicate. I'm trying to iterate through a map and print the values of each element, but with slightly different output on the last element. In that question, they recommend using <code>map.rbegin().base()</code>, but it's not working for me.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\n\nint main()\n{\n    std::map &lt;char, int&gt; charMap = { {'a', 1}, {'b', 2}, {'c', 3}, {'d', 4} };\n    for (auto iter = charMap.begin(); iter != charMap.end(); iter++)\n    {\n        std::cout &lt;&lt; iter-&gt;first &lt;&lt; \":\\t\" &lt;&lt; iter-&gt;second;\n        if (iter == charMap.rbegin().base())\n            std::cout &lt;&lt; \"\\t//This is the last element.\\n\";\n        else\n            std::cout &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<p>I'd expect my output to look like this:</p>\n\n<pre><code>a:    1\nb:    2\nc:    3\nd:    4    //This is the last element. \n</code></pre>\n\n<p>But instead, I am getting this output:</p>\n\n<pre><code>a:    1\nb:    2\nc:    3\nd:    4    \n</code></pre>\n\n<p>Now I realize that there is a better way to do this, but I would expect this to work also. Why can't I compare <code>iter</code> and <code>charMap.rbegin().base()</code>?</p>\n"}, {"tags": ["java", "c++"], "comments": [{"owner": {"reputation": 166951, "user_id": 1707091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dJrV3.jpg?s=128&g=1", "display_name": "rgettman", "link": "https://stackoverflow.com/users/1707091/rgettman"}, "edited": false, "score": 0, "creation_date": 1447267685, "post_id": 33657682, "comment_id": 55088737, "body": "What is your &quot;absurd&quot; answer?  What were you expecting?  What is the C++ and Java datatype of <code>ans</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5083166"}, "reply_to_user": {"reputation": 166951, "user_id": 1707091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dJrV3.jpg?s=128&g=1", "display_name": "rgettman", "link": "https://stackoverflow.com/users/1707091/rgettman"}, "edited": false, "score": 0, "creation_date": 1447267751, "post_id": 33657682, "comment_id": 55088776, "body": "It is an integer datatype. If i convert the first snippet to the 2nd in C++, I get the matching JAVA answer. So basically, I&#39;m misinterpreting something"}], "answers": [{"tags": [], "owner": {"reputation": 34901, "user_id": 3973077, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e80187d131859fc0601a01231fec657e?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Boddington", "link": "https://stackoverflow.com/users/3973077/paul-boddington"}, "is_accepted": true, "score": 8, "last_activity_date": 1447267892, "last_edit_date": 1447267892, "creation_date": 1447267712, "answer_id": 33657712, "question_id": 33657682, "link": "https://stackoverflow.com/questions/33657682/how-do-i-convert-the-following-c-statement-to-java/33657712#33657712", "title": "How do I convert the following C++ statement to Java?", "body": "<p>I think the Java equivalent is</p>\n\n<pre><code>for(int i=0;i&lt;MAX;i++)\n   if(b[i]!=-1)\n      ans++;\n</code></pre>\n\n<p>In C++, a true statement evaluates to <code>1</code>. Java does not do that so you have to explicitly increment <code>ans</code>. </p>\n\n<p>Also, note that if <code>MAX</code> is the length of the array (I don't know if it is or not) you can use a for each loop.</p>\n\n<pre><code>for (int a : b)\n    if (a != -1)\n        ans++;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1037, "user_id": 74021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf0ff220d6bb615f9f6e47d58dc68766?s=128&d=identicon&r=PG", "display_name": "leoger", "link": "https://stackoverflow.com/users/74021/leoger"}, "is_accepted": false, "score": 0, "last_activity_date": 1447268113, "creation_date": 1447268113, "answer_id": 33657812, "question_id": 33657682, "link": "https://stackoverflow.com/questions/33657682/how-do-i-convert-the-following-c-statement-to-java/33657812#33657812", "title": "How do I convert the following C++ statement to Java?", "body": "<p>Your code block is very strange in C++. I think the clearest way to answer your questions is to tell you exactly what it actually says.</p>\n\n<pre><code>for(i=0; i&lt;MAX; i++)    // Normal loop. Nothing strange here\n    ans+=(b[i]!=-1);    // Let's look at this more closely\n</code></pre>\n\n<p>The inner statement is saying <code>ans += VALUE_OF_AN_EXPRESSION</code>. What expression's value are you adding to ans? This expression: <code>b[i]!=-1</code>. What's the operator there? Its <code>!=</code> which is a boolean operator, so it returns true/false. In C++ true is treated as 1 and false as 0, but this is really not relevant because even in Java it doesn't make sense to add a boolean to an integer.</p>\n\n<p>Hopefully this is more clear.</p>\n"}, {"tags": [], "owner": {"reputation": 12012, "user_id": 359035, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/69739f977d9a83ffb1bbdbe236a44680?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/359035/bill"}, "is_accepted": false, "score": 1, "last_activity_date": 1447291737, "last_edit_date": 1447291737, "creation_date": 1447268153, "answer_id": 33657822, "question_id": 33657682, "link": "https://stackoverflow.com/questions/33657682/how-do-i-convert-the-following-c-statement-to-java/33657822#33657822", "title": "How do I convert the following C++ statement to Java?", "body": "<pre><code>for(i=0; i&lt;MAX; i++)\n    ans+=(b[i]!=-1);  \n</code></pre>\n\n<p>C/C++ evaluates this <code>(b[i]!=-1)</code> to either 0 or 1. In java, that evaluates to a boolean value (true or false), and Java does not convert booleans to integers automatically. However would is very easy to do on your own.</p>\n\n<p>e.g.</p>\n\n<pre><code>for(i=0; i&lt;MAX; i++)\n    ans+=(b[i]!=-1) ? 1 : 0;  \n</code></pre>\n\n<p>ought to work just fine.</p>\n"}, {"tags": [], "owner": {"reputation": 244, "user_id": 3649790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bcf4d9357f65b3a28346fe2897a8573?s=128&d=identicon&r=PG&f=1", "display_name": "Java Man Tea Man", "link": "https://stackoverflow.com/users/3649790/java-man-tea-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1447545468, "creation_date": 1447545468, "answer_id": 33714828, "question_id": 33657682, "link": "https://stackoverflow.com/questions/33657682/how-do-i-convert-the-following-c-statement-to-java/33714828#33714828", "title": "How do I convert the following C++ statement to Java?", "body": "<p>Parenthesis around something means that it will return a boolean: true or false. However, Java stores these in boolean values. C++ stores them as 0 or  1 values For example, (1=1) or (character.x &lt;= object.y). Therefore, as long as the statement returns true, or the value of B index i will not be -1, then it will proceed to add 1, or true. If it is false, it will add 0, or false. To do this in java, just add a conditional statement, checking if b index i is not equal to -1: </p>\n\n<p>for()...\n    if (b[i] != -1)... answer = answer + 1, or answer += 1, or answer++;</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5083166"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 33657712, "answer_count": 4, "score": 3, "last_activity_date": 1447545468, "creation_date": 1447267604, "last_edit_date": 1447267959, "question_id": 33657682, "link": "https://stackoverflow.com/questions/33657682/how-do-i-convert-the-following-c-statement-to-java", "title": "How do I convert the following C++ statement to Java?", "body": "<p>I have the following code snippet where 'b' is an integer array, MAX is an integer and an integer 'ans' stores the result. I'm debugging some code and am not very familiar with C++ as I  use Java. The C++ code is:</p>\n\n<pre><code>for(i=0; i&lt;MAX; i++)\n    ans+=(b[i]!=-1);  \n</code></pre>\n\n<p>The way I have understood it is as:</p>\n\n<pre><code>for(int i=0;i&lt;MAX;i++)\n    if(b[i]!=-1)\n        ans+=b[i]; \n</code></pre>\n\n<p>However, I get an absurd answer with the logic above. What does the statement really mean?</p>\n"}, {"tags": ["c++", "string", "char"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 3, "creation_date": 1447267560, "post_id": 33657608, "comment_id": 55088669, "body": "<code>string testtt = string( test[0] ) + testt[0];</code>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1447267574, "post_id": 33657608, "comment_id": 55088675, "body": "At least one of the operands to <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/operator%2B\" rel=\"nofollow noreferrer\">the <code>+</code> operator</a> needs to be a string."}, {"owner": {"reputation": 647, "user_id": 2422669, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/ce364e13067d5d19d9d1b7b7d2fffbb8?s=128&d=identicon&r=PG", "display_name": "Sigcont", "link": "https://stackoverflow.com/users/2422669/sigcont"}, "edited": false, "score": 1, "creation_date": 1447269591, "post_id": 33657608, "comment_id": 55089836, "body": "error.cpp:10:31: error: invalid conversion from \u2018char\u2019 to \u2018const char*\u2019 [-fpermissive]  string testtt = string( test[0] ) + testt[0];"}], "answers": [{"comments": [{"owner": {"reputation": 647, "user_id": 2422669, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/ce364e13067d5d19d9d1b7b7d2fffbb8?s=128&d=identicon&r=PG", "display_name": "Sigcont", "link": "https://stackoverflow.com/users/2422669/sigcont"}, "edited": false, "score": 0, "creation_date": 1447269105, "post_id": 33657779, "comment_id": 55089547, "body": "string testtt=&quot;&quot;; not needed you can use string testtt;"}], "tags": [], "owner": {"reputation": 323, "user_id": 4341825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2561c337944eca367a4a87a1765cfaec?s=128&d=identicon&r=PG&f=1", "display_name": "0xFFFFFF", "link": "https://stackoverflow.com/users/4341825/0xffffff"}, "is_accepted": true, "score": 1, "last_activity_date": 1447268409, "last_edit_date": 1447268409, "creation_date": 1447267991, "answer_id": 33657779, "question_id": 33657608, "link": "https://stackoverflow.com/questions/33657608/how-to-combine-few-bacis-chars-into-one-string-in-c/33657779#33657779", "title": "How to combine few bacis chars into one string in c++", "body": "<pre><code>char test[]={'A'};\nchar testt[]={'a'};\nstring testtt=\"\";\ntesttt+=test[0];\ntesttt+=testt[0];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 647, "user_id": 2422669, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/ce364e13067d5d19d9d1b7b7d2fffbb8?s=128&d=identicon&r=PG", "display_name": "Sigcont", "link": "https://stackoverflow.com/users/2422669/sigcont"}, "is_accepted": false, "score": 0, "last_activity_date": 1447269497, "creation_date": 1447269497, "answer_id": 33658191, "question_id": 33657608, "link": "https://stackoverflow.com/questions/33657608/how-to-combine-few-bacis-chars-into-one-string-in-c/33658191#33658191", "title": "How to combine few bacis chars into one string in c++", "body": "<p>You can either use the constructor that takes char*, length. </p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n\nint main(){\n\n\nchar test[]={'A'};\nchar testt[]={'a','w'};\nstd::string testtt= std::string(&amp;test[0], 1) + std::string(&amp;testt[1],1);/\nstd::cout&lt;&lt;testtt&lt;&lt;std::endl;\nreturn 0;\n}\n</code></pre>\n\n<p>or constructor that takes a range:</p>\n\n<pre><code>std::string testtt= std::string(&amp;test[0], &amp;test[1]) + std::string(&amp;testt[0],&amp;testt[1]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2505, "user_id": 5552022, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/kDe2K.png?s=128&g=1", "display_name": "Omar Aflak", "link": "https://stackoverflow.com/users/5552022/omar-aflak"}, "is_accepted": false, "score": 0, "last_activity_date": 1447270901, "creation_date": 1447270901, "answer_id": 33658565, "question_id": 33657608, "link": "https://stackoverflow.com/questions/33657608/how-to-combine-few-bacis-chars-into-one-string-in-c/33658565#33658565", "title": "How to combine few bacis chars into one string in c++", "body": "<p>It will do the trick ;)</p>\n\n<pre><code>#include &lt;sstream&gt;\n\nstring toStr(char* tab, int length)\n{\n    stringstream ss;\n    for (int i=0 ; i&lt;length; i++)\n        ss &lt;&lt; tab[i];\n    return ss.str();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "is_accepted": false, "score": 0, "last_activity_date": 1447277519, "creation_date": 1447277519, "answer_id": 33660232, "question_id": 33657608, "link": "https://stackoverflow.com/questions/33657608/how-to-combine-few-bacis-chars-into-one-string-in-c/33660232#33660232", "title": "How to combine few bacis chars into one string in c++", "body": "<p>if you look inside class string you'll find that it doesn't overload copy constructor to take one character parameter. \nyou may think that you implement your own class containing a string object:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n\nclass MyStr\n{\n    public:\n        MyStr(char c){ itsString = c;}\n        string GetStr()const {return itsString;}\n\n    private:\n        string itsString;\n};\n\n\n\nint main(int argc, char* argv[])\n{\n\nchar test[]={'A'};\nchar testt[]={'a'};\nMyStr testtt = test[0] + testt[0];\n\ncout &lt;&lt; testtt.GetStr() &lt;&lt; endl;\n\n\ncout &lt;&lt; endl &lt;&lt; endl &lt;&lt; endl;\nreturn 0;\n}\n</code></pre>\n\n<p>this program runs and the compiler never complains BUT the result won't be as you may think: it won't be \"Aa\" but just: '\u062a'  because in fact the above statement: string testtt= test[0]+testt[0]; is equivalent to write: cout &lt;&lt; (char)('A' + 'a');\nwhich means summing two characters and the result is the integer ASCII value then this value will be converted back again to charater because you are really ivoking string(char); which will result to (charater of 162)  </p>\n"}], "owner": {"reputation": 87, "user_id": 5139002, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/17bbba385b0d3d6706fa11b0cbe6f7a2?s=128&d=identicon&r=PG&f=1", "display_name": "sebek", "link": "https://stackoverflow.com/users/5139002/sebek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "accepted_answer_id": 33657779, "answer_count": 4, "score": 2, "last_activity_date": 1447277519, "creation_date": 1447267384, "question_id": 33657608, "link": "https://stackoverflow.com/questions/33657608/how-to-combine-few-bacis-chars-into-one-string-in-c", "title": "How to combine few bacis chars into one string in c++", "body": "<p>As a topic says. I try to combine few chars (from array) into one string.\ni tried</p>\n\n<pre><code>char test[]={'A'};\nchar testt[]={'a'};\nstring testtt= test[0]+testt[0];\n</code></pre>\n\n<p>But it doesn't work.</p>\n"}, {"tags": ["c++", "visual-studio-2010", "sdl-2", "sdl-image"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1447268910, "post_id": 33657607, "comment_id": 55089441, "body": "You have code to check for a NULL return value, but your code continues as if nothing is wrong.  <code>&#47;&#47;Verify it exists  if (bitmapSurface == NULL)</code>"}, {"owner": {"reputation": 788, "user_id": 5037458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1a34a94f1f7f3ee63ad2be94de183d?s=128&d=identicon&r=PG&f=1", "display_name": "Nandu", "link": "https://stackoverflow.com/users/5037458/nandu"}, "edited": false, "score": 1, "creation_date": 1447269017, "post_id": 33657607, "comment_id": 55089497, "body": "do u own the DLL file? if yes, rebuild it with optimization turned off (also turn off optimization for application). With symbols built-into dll&#39;s you&#39;d be able to gather call stack and origin of this crash."}, {"owner": {"reputation": 541, "user_id": 1708977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hZCSI.png?s=128&g=1", "display_name": "Bit Fracture", "link": "https://stackoverflow.com/users/1708977/bit-fracture"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1447269301, "post_id": 33657607, "comment_id": 55089665, "body": "@PaulMcKenzie Yes, my code further on is resistant to NULL textures, I just want the warning."}, {"owner": {"reputation": 541, "user_id": 1708977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hZCSI.png?s=128&g=1", "display_name": "Bit Fracture", "link": "https://stackoverflow.com/users/1708977/bit-fracture"}, "reply_to_user": {"reputation": 788, "user_id": 5037458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1a34a94f1f7f3ee63ad2be94de183d?s=128&d=identicon&r=PG&f=1", "display_name": "Nandu", "link": "https://stackoverflow.com/users/5037458/nandu"}, "edited": false, "score": 0, "creation_date": 1447269374, "post_id": 33657607, "comment_id": 55089709, "body": "@Nandu I&#39;ve never done that before, but I&#39;ll give it a shot.  If you have any advice or tutorials, they would be much appreciated."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1447269410, "post_id": 33657607, "comment_id": 55089734, "body": "<code>this-&gt;textures = new vector&lt;Texture*&gt;();</code> There is no need for <code>new</code>.  Just have a member <code>vector&lt;Texture&gt;</code>.  You also are passing a pointer to the constructor and it isn&#39;t clear which entity actually owns the pointer or who is responsible for cleanup.   Bottom line is that there are a multitude of things that can go wrong with your program, given the way you&#39;ve designed things."}, {"owner": {"reputation": 541, "user_id": 1708977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hZCSI.png?s=128&g=1", "display_name": "Bit Fracture", "link": "https://stackoverflow.com/users/1708977/bit-fracture"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1447269576, "post_id": 33657607, "comment_id": 55089831, "body": "@PaulMcKenzie Thank you for the advice, but I need the <code>new</code> or it won&#39;t compile.  I am new to C++, so there are problems which I am working through as I learn more, but they don&#39;t appear to be what is causing this problem."}, {"owner": {"reputation": 541, "user_id": 1708977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hZCSI.png?s=128&g=1", "display_name": "Bit Fracture", "link": "https://stackoverflow.com/users/1708977/bit-fracture"}, "reply_to_user": {"reputation": 788, "user_id": 5037458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1a34a94f1f7f3ee63ad2be94de183d?s=128&d=identicon&r=PG&f=1", "display_name": "Nandu", "link": "https://stackoverflow.com/users/5037458/nandu"}, "edited": false, "score": 0, "creation_date": 1447271312, "post_id": 33657607, "comment_id": 55090804, "body": "@Nandu I built the DLL and got a better stack trace.  I will update the original post.  Thank you!"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1447271569, "post_id": 33657607, "comment_id": 55090945, "body": "@BitFracture <i>Thank you for the advice, but I need the new or it won&#39;t compile.</i>  That is because you declared it as a pointer."}, {"owner": {"reputation": 541, "user_id": 1708977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hZCSI.png?s=128&g=1", "display_name": "Bit Fracture", "link": "https://stackoverflow.com/users/1708977/bit-fracture"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1447271896, "post_id": 33657607, "comment_id": 55091124, "body": "@PaulMcKenzie I am sorry if I don&#39;t understand your point.  I meant for it to be a pointer, but if there is a reason I shouldn&#39;t, please direct me towards some documentation explaining otherwise.  You&#39;re probably totally correct, but I don&#39;t see how it contributes to this topic.  Thank you."}, {"owner": {"reputation": 10050, "user_id": 501196, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kuQ41.png?s=128&g=1", "display_name": "yms", "link": "https://stackoverflow.com/users/501196/yms"}, "edited": false, "score": 0, "creation_date": 1447272252, "post_id": 33657607, "comment_id": 55091296, "body": "@BitFracture is the libpng library available in your project for sdl to use?"}, {"owner": {"reputation": 10050, "user_id": 501196, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kuQ41.png?s=128&g=1", "display_name": "yms", "link": "https://stackoverflow.com/users/501196/yms"}, "edited": false, "score": 1, "creation_date": 1447272932, "post_id": 33657607, "comment_id": 55091655, "body": "I would say that your libpng library is not loading properly, in such scenario I would try building the whole thing from source code and debugging it."}, {"owner": {"reputation": 541, "user_id": 1708977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hZCSI.png?s=128&g=1", "display_name": "Bit Fracture", "link": "https://stackoverflow.com/users/1708977/bit-fracture"}, "reply_to_user": {"reputation": 10050, "user_id": 501196, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kuQ41.png?s=128&g=1", "display_name": "yms", "link": "https://stackoverflow.com/users/501196/yms"}, "edited": false, "score": 0, "creation_date": 1447272965, "post_id": 33657607, "comment_id": 55091676, "body": "@yms The DLL is available, and when I remove it, there are no exceptions thrown, and my code reports the NULL in both cases as it should.  The lib file is not present.  The SDL_image source appears to directly reference the libpng source code.  The library was not distributed with additional lib files."}], "answers": [{"tags": [], "owner": {"reputation": 541, "user_id": 1708977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hZCSI.png?s=128&g=1", "display_name": "Bit Fracture", "link": "https://stackoverflow.com/users/1708977/bit-fracture"}, "is_accepted": true, "score": 2, "last_activity_date": 1447273685, "last_edit_date": 1495540340, "creation_date": 1447273685, "answer_id": 33659236, "question_id": 33657607, "link": "https://stackoverflow.com/questions/33657607/access-violation-at-0x00000000-loading-png-file-with-sdl-image-library/33659236#33659236", "title": "Access violation at 0x00000000 Loading PNG File With SDL_image Library", "body": "<p>Thank you all very much for you help, but the problem, as usual, was rather obvious!\nAs noted here by @Gigi: <a href=\"https://stackoverflow.com/questions/21472958/sdl-image-img-load-fails-on-png\">SDL_Image IMG_Load fails on png with: &quot;Failed loading libpng16-16.dll:&quot;</a></p>\n\n<blockquote>\n  <p>I suggest you try including all the rest - there may be a dependency that you and I are not aware of. In fact I just checked, and libpng requires zlib: libpng.org/pub/png/libpng.html</p>\n</blockquote>\n\n<p>I'm not sure why my original search or suggestions didn't bring that post up.</p>\n\n<p>I originally excluded the DLLs for other file formats I wasn't using (or initializing in my code), but once I included the zlib DLL, bingo.  PNGs load exactly as expected. </p>\n"}], "owner": {"reputation": 541, "user_id": 1708977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hZCSI.png?s=128&g=1", "display_name": "Bit Fracture", "link": "https://stackoverflow.com/users/1708977/bit-fracture"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 624, "favorite_count": 0, "accepted_answer_id": 33659236, "answer_count": 1, "score": 1, "last_activity_date": 1447273685, "creation_date": 1447267372, "last_edit_date": 1447271715, "question_id": 33657607, "link": "https://stackoverflow.com/questions/33657607/access-violation-at-0x00000000-loading-png-file-with-sdl-image-library", "title": "Access violation at 0x00000000 Loading PNG File With SDL_image Library", "body": "<p>I am using the SDL2 2.0.3 library with the SDL_image library 2.0.0 in Visual C++ 2010 Express.  I am utilizing the SDL_image library to load a variety of PNG and JPEG files from a resources folder.  While the library initializes without any errors and loads BMP and JPEG files, it breaks when given a PNG file.  </p>\n\n<p>\"Unhandled exception at 0x00000000 in appname.exe: 0xC0000005: Access violation.\"</p>\n\n<p>Inside of my texture manager, (an object that stores and manages textures for the program), is a function to load a texture from a given file name string.  Here is the code, including the commented line I used before implementing SDL_image to do the loading.  It is within the line <code>bitmapSurface = IMG_Load(...</code> that the exception above is thrown.</p>\n\n<pre><code>/**\n * Attempts to load a given image file and reports to the console any failures\n * \n * @param fileName The exact file name of the resource to be loaded\n * @return The SDL_Texture loaded from the given fileName\n */\nSDL_Texture* TextureManager::loadTexture(string fileName)\n{\n    //Create our surface in RAM\n    SDL_Surface *bitmapSurface = NULL;\n    //bitmapSurface = SDL_LoadBMP(fileName.c_str()); //OLD METHOD; standard SDL, BMP only\n    bitmapSurface = IMG_Load(fileName.c_str());      //NEW METHOD; SDL_image lib, many formats\n\n    //Verify it exists\n    if (bitmapSurface == NULL)\n        cout &lt;&lt; \"Image resource not loaded: \" &lt;&lt; fileName &lt;&lt; \" Message: \" &lt;&lt; IMG_GetError() &lt;&lt; endl;\n\n    //Create a texture in VRAM from the surface\n    SDL_Texture *bitmapTexture = NULL;\n    bitmapTexture = SDL_CreateTextureFromSurface(this-&gt;renderer, bitmapSurface);\n\n    //Verify it exists\n    if (bitmapTexture == NULL)\n        cout &lt;&lt; \"Failed to create texture: \" &lt;&lt; fileName &lt;&lt; endl;\n\n    return bitmapTexture;\n}\n</code></pre>\n\n<p>Call Stack:</p>\n\n<pre><code>    00000000()  \n    SDL2_image.dll!6a887a01()   \n    [Frames below may be incorrect and/or missing, no symbols loaded for SDL2_image.dll]    \n    SDL2.dll!6c77da4b()     \n    SDL2_image.dll!6a88792e()   \n    SDL2_image.dll!6a881693()   \n    SDL2_image.dll!6a8817e9()   \n&gt; appname.exe!TextureManager::loadTexture(std::basic_string&lt;char,std::char_traits&lt;char&gt;,std::allocator&lt;char&gt; &gt; fileName)  Line 143 + 0xe bytes  C++\n    00daf5e0()  \n</code></pre>\n\n<p>Here is the constructor for my TextureManager:</p>\n\n<pre><code>/**\n * Creates a new TextureManager with the current SDL_Renderer\n * \n * @param renderer The current renderer instance of the current graphic window\n */ \nTextureManager::TextureManager(SDL_Renderer* renderer)\n{\n    //Assign our renderer link\n    this-&gt;renderer = renderer;\n\n    //Create the vector to hold textures\n    this-&gt;textures = new vector&lt;Texture*&gt;();\n\n    //SDL_image initialization\n    int flags   = IMG_INIT_JPG|IMG_INIT_PNG;\n    int initted = IMG_Init(flags); //Use IMG_Quit(); at closing\n\n    if(initted&amp;flags != flags)\n    {\n        //Handle error\n        printf(\"IMG_Init: Failed to init required jpg and png support!\\n\");\n        printf(\"IMG_Init: %s\\n\", IMG_GetError());\n    }\n    else\n    {\n        cout &lt;&lt; \"SDL_Image initialized for JPEG and PNG support\" &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>For your information, I am using Windows 10 x64, which is up to date.  Graphics drivers for dual NVidia GTX 550ti are up to date as well. \nAll DLL files (including the pnglib dll) are in the debug folder and do load.  If I remove the DLL file from the program, the image fails to load and provides the message as coded above for NULL surfaces.  No exceptions occur. </p>\n\n<p>Question summary:\nWhy is this exception thrown, why is it only thrown for PNG files, and how can I trace it when the call stack's details end at my call that appears to work properly?  Am I doing something wrong, or is there a configuration step I may have missed? </p>\n\n<p><strong>EDIT</strong>: Thanks to @Nandu I have recompiled the DLL SDL_image, and got a better call stack output here:</p>\n\n<pre><code>    00000000()  \n&gt; SDL2_image.dll!IMG_LoadPNG_RW(SDL_RWops * src)  Line 375 + 0x11 bytes C\n    SDL2_image.dll!IMG_LoadTyped_RW(SDL_RWops * src, int freesrc, const char * type)  Line 193 + 0x12 bytes C\n    SDL2_image.dll!IMG_Load(const char * file)  Line 134 + 0xf bytes    C\n    appname.exe!TextureManager::loadTexture(std::basic_string&lt;char,std::char_traits&lt;char&gt;,std::allocator&lt;char&gt; &gt; fileName)  Line 143 + 0xe bytes    C++\n    appname.exe!TextureManager::loadFromDirectory(std::basic_string&lt;char,std::char_traits&lt;char&gt;,std::allocator&lt;char&gt; &gt; relPath)  Line 117 + 0x73 bytes  C++\n    appname.exe!SDL_main(int argc, char * * argv)  Line 31  C++\n    appname.exe!main(int argc, char * * argv)  Line 140 + 0xd bytes C\n    appname.exe!__tmainCRTStartup()  Line 555 + 0x19 bytes  C\n    appname.exe!mainCRTStartup()  Line 371  C\n    kernel32.dll!77963744()     \n    [Frames below may be incorrect and/or missing, no symbols loaded for kernel32.dll]  \n    ntdll.dll!77c3a064()    \n    ntdll.dll!77c3a02f() \n</code></pre>\n\n<p>This suggests the problem is occurring on line 374 of IMG_png.c:</p>\n\n<pre><code> /* Create the PNG loading context structure */\n    png_ptr = lib.png_create_read_struct(PNG_LIBPNG_VER_STRING,\n                      NULL,NULL,NULL);\n</code></pre>\n\n<p>VS reports that <code>lib</code> is NULL at this time, which would explain the error!  The question becomes, why is it NULL?  It seems this code should be doing a check for that, but nonetheless, nobody else seems to having this problem on the almighty internet.  </p>\n"}, {"tags": ["c++", "multithreading", "c++11"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1447267502, "post_id": 33657490, "comment_id": 55088637, "body": "I do not think the duplicate is correct. The question is about single thread, OP has a collection of them."}, {"owner": {"reputation": 23041, "user_id": 1149664, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ac4f96b553d2e45776bd6235fee4222d?s=128&d=identicon&r=PG", "display_name": "Johan Lundberg", "link": "https://stackoverflow.com/users/1149664/johan-lundberg"}, "edited": false, "score": 3, "creation_date": 1447267876, "post_id": 33657490, "comment_id": 55088860, "body": "I agree. I think this is one of the many cases where the <i>answers</i> would be close to duplicates, but the question is not at all."}, {"owner": {"reputation": 28330, "user_id": 298054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7dffcc86140441472cfb6119375a9d7?s=128&d=identicon&r=PG", "display_name": "jweyrich", "link": "https://stackoverflow.com/users/298054/jweyrich"}, "edited": false, "score": 0, "creation_date": 1447269053, "post_id": 33657490, "comment_id": 55089518, "body": "You could pass a callback to the thread when you initialize it, and then invoke the callback just before terminating the thread. Not the most beautiful solution, but it should work."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 1, "creation_date": 1447270721, "post_id": 33657490, "comment_id": 55090497, "body": "Are your threads detached?"}, {"owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "reply_to_user": {"reputation": 28330, "user_id": 298054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7dffcc86140441472cfb6119375a9d7?s=128&d=identicon&r=PG", "display_name": "jweyrich", "link": "https://stackoverflow.com/users/298054/jweyrich"}, "edited": false, "score": 0, "creation_date": 1447270822, "post_id": 33657490, "comment_id": 55090565, "body": "@jweyrich This seems like a reasonably low cost approach. Wanna write it as an answer? I will give it a shot."}, {"owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "reply_to_user": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1447272965, "post_id": 33657490, "comment_id": 55091675, "body": "@Jason The threads do not have to communicate with each other."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1447273652, "post_id": 33657490, "comment_id": 55092029, "body": "What does that have to do with being detached?"}, {"owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "reply_to_user": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1447273819, "post_id": 33657490, "comment_id": 55092121, "body": "@Jason If you mean my thread is separate from the <code>MyMtObject</code>, than no. The threads needs access to data private to <code>MyMtObject</code>. I am afraid I probably do not understand what a detached thread is."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1447273884, "post_id": 33657490, "comment_id": 55092155, "body": "What I mean is if you&#39;ve called <code>std::thread::detach</code>."}, {"owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "reply_to_user": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1447273969, "post_id": 33657490, "comment_id": 55092201, "body": "@Jason No, I have not."}, {"owner": {"reputation": 8582, "user_id": 439751, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4b40ae065359026d01fa30223812d83?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/439751/james"}, "edited": false, "score": 2, "creation_date": 1447276552, "post_id": 33657490, "comment_id": 55093532, "body": "You could use a custom deleter. Instead of storing the raw pointer in the queue, you use a smart pointer that reinserts into the queue on deletion."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1447269375, "creation_date": 1447269375, "answer_id": 33658159, "question_id": 33657490, "link": "https://stackoverflow.com/questions/33657490/notify-caller-that-a-thread-has-finished/33658159#33658159", "title": "Notify caller that a thread has finished", "body": "<p>There is no elegant way to do this in Posix, and C++ threading model is almost a thin wrapper on Posix.</p>\n\n<p>You can join a specific thread (one at a time), or you can wait on futures - again, one future at a time.</p>\n\n<p>The best you can do to avoid looping is to employ a conditional variable, and make all threads singal on it (as well as indicating which one just exited by setting some sort of per-thread flag) just before they are about to exit. The 'reaper' would notice the signal and check the flags.</p>\n\n<p>The issue is that this solution requires thread cooperation. But I know not of any better.</p>\n"}, {"tags": [], "owner": {"reputation": 1334, "user_id": 4029965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z6unJ.jpg?s=128&g=1", "display_name": "dbajgoric", "link": "https://stackoverflow.com/users/4029965/dbajgoric"}, "is_accepted": false, "score": 1, "last_activity_date": 1447269988, "creation_date": 1447269988, "answer_id": 33658319, "question_id": 33657490, "link": "https://stackoverflow.com/questions/33657490/notify-caller-that-a-thread-has-finished/33658319#33658319", "title": "Notify caller that a thread has finished", "body": "<p>You could try to deploy some version of <a href=\"https://en.wikipedia.org/wiki/Reactor_pattern\" rel=\"nofollow\">Reactor pattern</a> I think. So, you could start one additional <strong>control</strong> thread that <em>cleans</em> after these workers. Now, you create a <code>ThreadSafeQueue</code> that will be used to communicate events from worker threads to control thread. This queue should be implemented in such a way that you can <code>select</code> on it and wait for any activity on the other end (some thread terminates and calls <code>queue.push</code> for example).</p>\n\n<p>All in all I think it's quite elegant solution. I does add an overhead of an additional thread, but this thread will be mostly sleeping and waking up only once a while to <em>clean up</em> after the worker.</p>\n"}, {"tags": [], "owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "is_accepted": false, "score": 2, "last_activity_date": 1447277431, "last_edit_date": 1447277431, "creation_date": 1447274578, "answer_id": 33659466, "question_id": 33657490, "link": "https://stackoverflow.com/questions/33657490/notify-caller-that-a-thread-has-finished/33659466#33659466", "title": "Notify caller that a thread has finished", "body": "<p>I'm not sure if I need to mention this, but <code>std::thread</code> objects can't be re-used.  Generally, the only reason you keep a <code>std::thread</code> reference is to <a href=\"http://en.cppreference.com/w/cpp/thread/thread/join\" rel=\"nofollow\"><code>std::thread::join</code></a> the thread.  If you don't plan to join the thread later (e.g. dispatch to threads and wait for completion), it's generally advised to <a href=\"http://en.cppreference.com/w/cpp/thread/thread/detach\" rel=\"nofollow\"><code>std::thread::detach</code></a> it.</p>\n\n<p>If you're trying to keep threads for a thread pool, it's probably easier to have each thread block on the <code>std::queue</code> and pull objects from the queue to work on.  This is relatively easy to implement using a <a href=\"http://en.cppreference.com/w/cpp/thread/mutex\" rel=\"nofollow\"><code>std::mutex</code></a> and a <a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable\" rel=\"nofollow\"><code>std::condition_variable</code></a>.  It generally gives good throughput, but to get finer control over scheduling you can do things like keep a seperate <code>std::queue</code> for each thread.</p>\n\n<p>Detaching the threads and creating a work queue also has the added benefit that it avoids redundantly requesting the operating system create new threads which adds overhead and increases overall resource usage.</p>\n"}], "owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2017, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1447277431, "creation_date": 1447266925, "last_edit_date": 1447268120, "question_id": 33657490, "link": "https://stackoverflow.com/questions/33657490/notify-caller-that-a-thread-has-finished", "title": "Notify caller that a thread has finished", "body": "<p>I am trying to use the multithreading features in the C++11 standard library and have the following situation envisioned.</p>\n\n<p>I have a parent class which maintains a queue of thread. So something like:</p>\n\n<pre><code>std::queue&lt;MyMTObject *&gt;  _my_threads;\n</code></pre>\n\n<p>The class <code>MyMTObject</code> contains the <code>std::thread</code> object.\nThe queue has a fixed size of 5 and the class initially starts with the queue being full.</p>\n\n<p>As I have jobs to process I launch threads and I remove them from the queue. What I would like is to get a notification when the job is finished along with the pointer to the <code>MyMTObject</code>, so that I can reinsert them into the queue and make them available again.</p>\n\n<p>I have basically 2 questions:</p>\n\n<p>1: Is this a sound idea? I know I have not specified specifics but broadly speaking. I will, of course, control all access to the queue with a mutex.</p>\n\n<p>2: Is there a way to implement this notification mechanism without using external libraries like <code>Qt</code> or <code>boost</code>.</p>\n\n<p>For duplicates, I did look on the site but could not find anything that was suitable to manage a collection of threads.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1447266912, "post_id": 33657465, "comment_id": 55088259, "body": "Because pointers are needed? Why not look at the source and headers yourself, something which we can not do."}, {"owner": {"reputation": 2384, "user_id": 4624683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39130cd702675dc4f741e62e64479eb6?s=128&d=identicon&r=PG&f=1", "display_name": "DBug", "link": "https://stackoverflow.com/users/4624683/dbug"}, "edited": false, "score": 0, "creation_date": 1447267112, "post_id": 33657465, "comment_id": 55088390, "body": "my guess would be because the super class constructor requires 3 arguments, KeccakF*, MultiRatePadding*, unsigned int)"}], "answers": [{"comments": [{"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 0, "creation_date": 1447267278, "post_id": 33657534, "comment_id": 55088504, "body": "I&#39;ve never heard of that syntax before (and I&#39;ve been doing this a long time), but that is pretty cool!"}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 2, "last_activity_date": 1447267113, "creation_date": 1447267113, "answer_id": 33657534, "question_id": 33657465, "link": "https://stackoverflow.com/questions/33657465/why-constructor-of-class-has-other-class-with-new/33657534#33657534", "title": "why constructor of class has other class with new?", "body": "<p>This looks like the archaic pre-standard syntax where if you have only a single base class you can omit its name in the <em>mem-initializer</em>. That is, this constructor calls the base class constructor with the three arguments <code>new KeccakF(aRate+aCapacity)</code>, <code>new MultiRatePadding()</code>, <code>aRate</code>. Presumably the base class needs the <code>KeccakF</code> and <code>MultiRatePadding</code> objects and agrees to take ownership and free them in its destructor.</p>\n"}, {"tags": [], "owner": {"reputation": 3301, "user_id": 234946, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6af8b76e0ae95edd533cf3a57e4294f8?s=128&d=identicon&r=PG", "display_name": "Olipro", "link": "https://stackoverflow.com/users/234946/olipro"}, "is_accepted": false, "score": 0, "last_activity_date": 1447267123, "creation_date": 1447267123, "answer_id": 33657537, "question_id": 33657465, "link": "https://stackoverflow.com/questions/33657465/why-constructor-of-class-has-other-class-with-new/33657537#33657537", "title": "why constructor of class has other class with new?", "body": "<p>This smells like Crypto++ but in any case...</p>\n\n<p><code>new</code> is a keyword in C++ used for object heap allocation. anything you allocate with <code>new</code> must have a corresponding <code>delete</code> invoked when it is no longer needed or it will be a memory leak.</p>\n\n<p>Crypto++ in particular has a tendency to use pointer objects whilst also taking care of object deletion so you can simply just construct an anonymous heap object as a parameter as you see in your example.</p>\n\n<p>In general however, just because something takes a pointer to a type does <strong>not</strong> mean you can just use <code>new</code> like this. If the callee doesn't <code>delete</code> then you've just created a mem leak.</p>\n"}], "owner": {"reputation": 1, "user_id": 5551804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/490e117f20269d44301adf91f998be42?s=128&d=identicon&r=PG&f=1", "display_name": "ali akbari", "link": "https://stackoverflow.com/users/5551804/ali-akbari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1447267123, "creation_date": 1447266817, "last_edit_date": 1447266929, "question_id": 33657465, "link": "https://stackoverflow.com/questions/33657465/why-constructor-of-class-has-other-class-with-new", "title": "why constructor of class has other class with new?", "body": "<p>i have the following code from a keccak tools. this project has several class. Keccak , KeccakF ,MultiRatePadding , ... are classes.please help me to understand \"new\" in in this code and why constructor of class has other class?</p>\n\n<pre><code>Keccak::Keccak(unsigned int aRate, unsigned int aCapacity)\n:  (new KeccakF(aRate+aCapacity), new MultiRatePadding(), aRate) {}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "multidimensional-array", "global"], "comments": [{"owner": {"reputation": 14673, "user_id": 296460, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/FGDo8.jpg?s=128&g=1", "display_name": "shuttle87", "link": "https://stackoverflow.com/users/296460/shuttle87"}, "edited": false, "score": 1, "creation_date": 1447267049, "post_id": 33657430, "comment_id": 55088345, "body": "If I recall correctly you need to wrap the outermost layer in one more pair of braces to pass the inner arrays to the constructor. See this: <a href=\"http://coliru.stacked-crooked.com/a/4c57a7193629931f\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/4c57a7193629931f</a> and for an alternative syntax <a href=\"http://coliru.stacked-crooked.com/a/eb5b620cb4146d4a\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/eb5b620cb4146d4a</a>"}, {"owner": {"reputation": 14673, "user_id": 296460, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/FGDo8.jpg?s=128&g=1", "display_name": "shuttle87", "link": "https://stackoverflow.com/users/296460/shuttle87"}, "edited": false, "score": 0, "creation_date": 1447267427, "post_id": 33657430, "comment_id": 55088583, "body": "Also what compiler are you using and what compilation flags?"}, {"owner": {"reputation": 23, "user_id": 5551796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e57162f939e7a0d6c9c5aef4a2229372?s=128&d=identicon&r=PG&f=1", "display_name": "TheMartyred", "link": "https://stackoverflow.com/users/5551796/themartyred"}, "reply_to_user": {"reputation": 14673, "user_id": 296460, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/FGDo8.jpg?s=128&g=1", "display_name": "shuttle87", "link": "https://stackoverflow.com/users/296460/shuttle87"}, "edited": false, "score": 0, "creation_date": 1447267816, "post_id": 33657430, "comment_id": 55088817, "body": "I&#39;m working in visual studio express 2015."}, {"owner": {"reputation": 23, "user_id": 5551796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e57162f939e7a0d6c9c5aef4a2229372?s=128&d=identicon&r=PG&f=1", "display_name": "TheMartyred", "link": "https://stackoverflow.com/users/5551796/themartyred"}, "reply_to_user": {"reputation": 14673, "user_id": 296460, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/FGDo8.jpg?s=128&g=1", "display_name": "shuttle87", "link": "https://stackoverflow.com/users/296460/shuttle87"}, "edited": false, "score": 0, "creation_date": 1447267905, "post_id": 33657430, "comment_id": 55088880, "body": "I added the brackets and the error went away. the problem now is that whenever i try to use the local windows debugger on it, visual studio just freezes."}, {"owner": {"reputation": 14673, "user_id": 296460, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/FGDo8.jpg?s=128&g=1", "display_name": "shuttle87", "link": "https://stackoverflow.com/users/296460/shuttle87"}, "edited": false, "score": 0, "creation_date": 1447270486, "post_id": 33657430, "comment_id": 55090370, "body": "Maybe file a bug report if this causes a crash."}], "answers": [{"comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1447268506, "post_id": 33657775, "comment_id": 55089243, "body": "Then why do I only need 1 set of braces to init <code>array&lt;string, 10&gt;</code>?"}], "tags": [], "owner": {"reputation": 14673, "user_id": 296460, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/FGDo8.jpg?s=128&g=1", "display_name": "shuttle87", "link": "https://stackoverflow.com/users/296460/shuttle87"}, "is_accepted": true, "score": 3, "last_activity_date": 1447270188, "last_edit_date": 1495535235, "creation_date": 1447267956, "answer_id": 33657775, "question_id": 33657430, "link": "https://stackoverflow.com/questions/33657430/declaring-2d-array-globally-error-too-many-initializer-values/33657775#33657775", "title": "declaring 2d array globally (Error: too many initializer values)", "body": "<p>Things are a little easier to understand when you see that there is a special case for the syntax here. <code>std::array</code> is an aggregate, it's a struct that contains a single data member which is the underlying raw array. To initialize one of these you need to uniform-initialize the array (first braces) then initialize the underlying raw array member stored in the <code>std::array</code> (second braces);</p>\n\n<p>So when you have something such as:</p>\n\n<pre><code>array&lt;string, 3&gt; test = {{\"a\", \"b\", \"c\"}};\n</code></pre>\n\n<p>The outermost braces initialize the <code>array</code> itself then the inner part initializes the underlying array. In this case it's clear that this is the way it is working and a special case was made (See the standard: section 8.5 for more) that allows the compiler to accept the other syntax of:</p>\n\n<pre><code>array&lt;string, 3&gt; test = {\"a\", \"b\", \"c\"} ;\n</code></pre>\n\n<p>However in the case of the question it's not of the special-case-form specified in the standard so you need the extra braces (this too caused me confusion when I first encountered it). There is a defect report about this actually <a href=\"http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2012/n3367.html#1270\" rel=\"nofollow noreferrer\">http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2012/n3367.html#1270</a></p>\n\n<p>In more recent c++ standards (see <a href=\"https://stackoverflow.com/questions/18792731/can-we-omit-the-double-braces-for-stdarray-in-c14\">Can we omit the double-braces for std::array in C++14?</a>) this requirement is relaxed.</p>\n\n<p>Because the code in the question does not benefit for the special case of the syntax we need both braces. In this case your initializer is however not of length one:</p>\n\n<pre><code>array&lt;array&lt;string, 10&gt;, 10&gt; cShots = \n{\n    { \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \" },\n    { \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \" }, //extra initializer elements but only one underlying raw array\n    //snip\n    { \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \" }\n}; \n</code></pre>\n\n<p>To the compiler it looks like you are trying to initialize multiple members of the <code>std::array</code> class but the problem is that there is only one underlying storage array. Hence the compiler error message you get here. To get this to work you need to be more explicit and add the extra pair of braces to get an initializer of length one passed to the outer <code>std::array</code>. You then initialize the underlying raw array which contains the other arrays:</p>\n\n<pre><code>array&lt;array&lt;string, 10&gt;, 10&gt; cShots = \n{{\n    { \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \" },\n    { \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \" },\n    //snip\n    { \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \" }\n}}; \n</code></pre>\n\n<p>For a proof of concept see this: <a href=\"http://coliru.stacked-crooked.com/a/4c57a7193629931f\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/4c57a7193629931f</a>\n(Note the nested arrays here <em>do</em> benefit from the syntatical special case)</p>\n"}], "owner": {"reputation": 23, "user_id": 5551796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e57162f939e7a0d6c9c5aef4a2229372?s=128&d=identicon&r=PG&f=1", "display_name": "TheMartyred", "link": "https://stackoverflow.com/users/5551796/themartyred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 760, "favorite_count": 0, "accepted_answer_id": 33657775, "answer_count": 1, "score": 2, "last_activity_date": 1447270188, "creation_date": 1447266724, "last_edit_date": 1447267322, "question_id": 33657430, "link": "https://stackoverflow.com/questions/33657430/declaring-2d-array-globally-error-too-many-initializer-values", "title": "declaring 2d array globally (Error: too many initializer values)", "body": "<p>I have used stackoverflow for a long time and never had to post a question before, but this one has me EXTREMELY frustrated.</p>\n\n<p>I have this piece of code</p>\n\n<pre><code>array&lt;array&lt;string, 10&gt;, 10&gt; cShots = \n{\n    { \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \" },\n    { \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \" },\n    { \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \" },\n    { \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \" },\n    { \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \" },\n    { \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \" },\n    { \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \" },\n    { \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \" },\n    { \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \" },\n    { \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \" }\n}; \n</code></pre>\n\n<p>outside of any methods at a global level. What I'm trying to do is create a 2d array 10 by 10 full of blank space strings. What happens instead is that I get an error on the first bracket of the third line saying \"too many initializer values\". Every solution I have found to this error says that what I am doing is correct. I have tried doing it multiple other ways.</p>\n\n<pre><code>string** cShots = \n{\n    {\" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \"},\n    {\" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \"},\n    {\" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \"},\n    {\" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \"},\n    {\" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \"},\n    {\" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \"},\n    {\" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \"},\n    {\" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \"},\n    {\" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \"},\n    {\" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \"}\n}; \n\nstring cShots[10][10] = \n{\n    {\" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \"},\n    {\" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \"},\n    {\" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \"},\n    {\" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \"},\n    {\" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \"},\n    {\" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \"},\n    {\" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \"},\n    {\" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \"},\n    {\" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \"},\n    {\" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \"}\n}; \n</code></pre>\n\n<p>but everything I try has the same result.</p>\n\n<p>PLEASE HELP!</p>\n\n<p>EDIT: well...I figured out that I just needed more brackets...and the error went away...but now when I run my code visual studio says that it was a successful build, but then freezes forever...</p>\n"}, {"tags": ["c++", "arrays", "file-io", "exe"], "comments": [{"owner": {"reputation": 4676, "user_id": 2052730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atz9A.jpg?s=128&g=1", "display_name": "Sasha Pachev", "link": "https://stackoverflow.com/users/2052730/sasha-pachev"}, "edited": false, "score": 0, "creation_date": 1447267254, "post_id": 33657426, "comment_id": 55088482, "body": "Is there anything in the tmean.dat file after the execution? Does it have Tmean line?"}, {"owner": {"reputation": 27, "user_id": 5532826, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10207770635045033/picture?type=large", "display_name": "Paolo Orsatti", "link": "https://stackoverflow.com/users/5532826/paolo-orsatti"}, "reply_to_user": {"reputation": 4676, "user_id": 2052730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atz9A.jpg?s=128&g=1", "display_name": "Sasha Pachev", "link": "https://stackoverflow.com/users/2052730/sasha-pachev"}, "edited": false, "score": 0, "creation_date": 1447267621, "post_id": 33657426, "comment_id": 55088695, "body": "@SashaPachev No it doesn&#39;t open the file tmean.dat because i thing the program results in an infinite loop!"}, {"owner": {"reputation": 1362, "user_id": 1366027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8113fc570a09e03414126d8cda5f971c?s=128&d=identicon&r=PG", "display_name": "pcarter", "link": "https://stackoverflow.com/users/1366027/pcarter"}, "edited": false, "score": 1, "creation_date": 1447269087, "post_id": 33657426, "comment_id": 55089534, "body": "Have you tried using a debugger? Added print statements to show intermediate steps? These are all basic debugging steps you should do before posting here."}, {"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 4, "creation_date": 1447269299, "post_id": 33657426, "comment_id": 55089662, "body": "First, remove the spaces from the input file name. Second, run your code step-by-step using a debugger. <i>Then</i> you should ask around, if you&#39;re still stuck. Also look at creating a <a href=\"http://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>. Your data file is missing."}, {"owner": {"reputation": 27, "user_id": 5532826, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10207770635045033/picture?type=large", "display_name": "Paolo Orsatti", "link": "https://stackoverflow.com/users/5532826/paolo-orsatti"}, "reply_to_user": {"reputation": 1362, "user_id": 1366027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8113fc570a09e03414126d8cda5f971c?s=128&d=identicon&r=PG", "display_name": "pcarter", "link": "https://stackoverflow.com/users/1366027/pcarter"}, "edited": false, "score": 0, "creation_date": 1447269524, "post_id": 33657426, "comment_id": 55089803, "body": "@pcarter sorry i am a beginner in c++, i&#39;ll do these debugging steps."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1447291546, "post_id": 33657426, "comment_id": 55099260, "body": "There isn&#39;t any infinite loop in your code, you must be misinterpreting what you are seeing"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 5532826, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10207770635045033/picture?type=large", "display_name": "Paolo Orsatti", "link": "https://stackoverflow.com/users/5532826/paolo-orsatti"}, "edited": false, "score": 0, "creation_date": 1447320460, "post_id": 33662624, "comment_id": 55109154, "body": "Thank you very much. So the macro MSG has a debugging function? If you want, to be more complete, i can attach the file .dat from which i read the values."}, {"owner": {"reputation": 27, "user_id": 5532826, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10207770635045033/picture?type=large", "display_name": "Paolo Orsatti", "link": "https://stackoverflow.com/users/5532826/paolo-orsatti"}, "edited": false, "score": 0, "creation_date": 1447322189, "post_id": 33662624, "comment_id": 55110211, "body": "I&#39;ve tried to compile the code you suggested me but it gives error at line 14 where there is the first if with the function ifstream. it gives this error:       &#39;[Error] in C++98 &#39;fin&#39; must be initialized by constructor, not by &#39;{...}&#39;&#39;"}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "reply_to_user": {"reputation": 27, "user_id": 5532826, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10207770635045033/picture?type=large", "display_name": "Paolo Orsatti", "link": "https://stackoverflow.com/users/5532826/paolo-orsatti"}, "edited": false, "score": 0, "creation_date": 1447333099, "post_id": 33662624, "comment_id": 55116626, "body": "@PaoloOrsatti: this code uses the C++11 Standard (from 2011) - if your compiler&#39;s using the 1998 Standard it won&#39;t work.  If you&#39;re using GNU or clang, try adding <code>-std=c++11</code> to the compilation command line, or reading your compiler or IDE documentation.  If that&#39;s too much hassle, try changing the <code>{</code> and <code>}</code> to <code>(</code> and <code>)</code>.  Cheers"}, {"owner": {"reputation": 27, "user_id": 5532826, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10207770635045033/picture?type=large", "display_name": "Paolo Orsatti", "link": "https://stackoverflow.com/users/5532826/paolo-orsatti"}, "edited": false, "score": 0, "creation_date": 1447341889, "post_id": 33662624, "comment_id": 55122870, "body": "I&#39;ve tried to add <i>-std=c++11</i> to the command line but it gives me the error that it doesn&#39;t recognized the command line option.  I&#39;ve also changed the_{_ and <i>} in _(</i> and <i>)</i> but it returns me another error:           &#39; [Error] expected primary-expression before &#39;fin&#39; &#39;."}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "reply_to_user": {"reputation": 27, "user_id": 5532826, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10207770635045033/picture?type=large", "display_name": "Paolo Orsatti", "link": "https://stackoverflow.com/users/5532826/paolo-orsatti"}, "edited": false, "score": 0, "creation_date": 1447386026, "post_id": 33662624, "comment_id": 55143682, "body": "@PaoloOrsatti: which compiler and version are you using?  Meanwhile, you can use <code>std::ifstream fin(&quot;P01-05 tensione di vapore di riferimento fino 180&#176;C.dat&quot;); if (fin) ...</code> and similar for <code>fout</code>."}, {"owner": {"reputation": 27, "user_id": 5532826, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10207770635045033/picture?type=large", "display_name": "Paolo Orsatti", "link": "https://stackoverflow.com/users/5532826/paolo-orsatti"}, "edited": false, "score": 0, "creation_date": 1447434856, "post_id": 33662624, "comment_id": 55168193, "body": "Finally it works! I&#39;ve only changed the while condition using <code>getline(fin, line)</code> instead of <code>(fin &gt;&gt; std::skipws &amp;&amp; !fin.eof())</code> and in the if conditions i put <code>(fin.is_open())</code> and <code>(fout.is_open())</code>. Thank you very much TonyD!"}], "tags": [], "owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "is_accepted": true, "score": 1, "last_activity_date": 1447289284, "creation_date": 1447289284, "answer_id": 33662624, "question_id": 33657426, "link": "https://stackoverflow.com/questions/33657426/why-this-code-doesnt-give-any-output-it-seems-like-an-infinite-loop/33662624#33662624", "title": "Why this code doesn&#39;t give any output? It seems like an infinite loop", "body": "<p>Given you're a beginner, here's some code showing how to check your input operations succeed, and otherwise output some useful error messages to help you find the offending lines in the file.</p>\n\n<p>Notes:</p>\n\n<ul>\n<li><p>The \"[i]\" values in error messages are relative line number within the \"group\" currently being read, and not absolute line numbers from the start of the file.</p></li>\n<li><p>Blank lines are only accepted between groups (the <code>std::skipws</code> will jump over that).</p></li>\n<li><p>The use of a macro for <code>FATAL</code> may be confusing: summarily, only macros can accept arguments like <code>\"i \" &lt;&lt; i</code> and add them to a streaming operation.  The <code>do {</code> ... <code>} while (false)</code> thing is a standard way to wrap a macro so it works properly in <code>if else</code> statements: you can search for details on that if you are curious.</p></li>\n</ul>\n\n<p>&nbsp;</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n\n#define FATAL(MSG) \\\n    do { \\\n        std::cerr &lt;&lt; \"Errore: \" &lt;&lt; MSG &lt;&lt; '\\n'; \\\n        exit(1); \\\n    } while (false)\n\nint main()\n{\n    if (std::ifstream fin{\"P01-05 tensione di vapore di riferimento fino 180\u00b0C.dat\"})\n    {\n        if (std::ofstream fout{\"tmean.dat\"})\n        {\n            fout &lt;&lt; \"Tmean\\n\";\n            while (fin &gt;&gt; std::skipws &amp;&amp; !fin.eof())\n            {\n                const int group_size = 120;\n                double temp[group_size];\n                double total = 0;\n                for (int i=0; i &lt; group_size; ++i)\n                {\n                    std::string line;\n                    if (getline(fin, line))\n                    {\n                        std::istringstream ss(line);\n                        double time;\n                        if (ss &gt;&gt; time &gt;&gt; temp[i])\n                            total += temp[i];\n                        else\n                            FATAL(\"unable to parse 2 doubles from line '\"\n                                  &lt;&lt; line &lt;&lt; \"' for [\" &lt;&lt; i &lt;&lt; ']');\n                    }\n                    else\n                        // will rarely happen after checking !eof()\n                        FATAL(\"failed to read needed line from file for [\"\n                              &lt;&lt; i &lt;&lt; ']');\n                }\n                double tmean = total / group_size;\n                fout &lt;&lt; tmean &lt;&lt; '\\n';       \n            }\n        }\n        else\n            FATAL(\"could not open output file.\");\n    }\n    else\n        FATAL(\"non si puo aprire il file.\");\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 5532826, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10207770635045033/picture?type=large", "display_name": "Paolo Orsatti", "link": "https://stackoverflow.com/users/5532826/paolo-orsatti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 33662624, "answer_count": 1, "score": 0, "last_activity_date": 1447289284, "creation_date": 1447266716, "last_edit_date": 1447276190, "question_id": 33657426, "link": "https://stackoverflow.com/questions/33657426/why-this-code-doesnt-give-any-output-it-seems-like-an-infinite-loop", "title": "Why this code doesn&#39;t give any output? It seems like an infinite loop", "body": "<p>I have to make a program that reads from a .dat file that has two columns. I am interested in only one. It has multiple sets of 120 elements, so I want to divide the file into groups of 120 elements and calculate the average of each group. The code is this:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\n#include&lt;string&gt;\n#include&lt;sstream&gt;\n\nusing namespace std;\n\nint i, k=0;\ndouble temp [120];\ndouble tmean, total=0;\n\nint main()\n{\n\n    ifstream fin (\"P01-05 tensione di vapore di riferimento fino 180\u00b0C.dat\");\n\n    if (!fin)\n    {\n        cerr &lt;&lt; \"\\nErrore: non si puo aprire il file.\\n\" &lt;&lt; endl;\n    exit(1);\n    }\n\n    string line;\n\n    ofstream fout;\n    fout.open(\"tmean.dat\", ios::out);\n    fout &lt;&lt; \"Tmean\" &lt;&lt; endl;\n\n    while (fin &gt;&gt; std::skipws &amp;&amp; !fin.eof())\n    {\n       for(i=0; i&lt;120; i++)\n       {\n           getline(fin,line);\n           istringstream ss(line);    \n\n           double col1;      \n           double col2;      \n\n           ss &gt;&gt; col1;   //col1=TIME\n           ss &gt;&gt; col2;   //col2=TEMPERATURE\n\n           temp[i] = col2;\n           total += temp[i];\n           k++;\n\n       }\n\n       tmean = total/k;\n\n       fout &lt;&lt; tmean &lt;&lt; endl;       \n   }\n\n   return 0;\n}\n</code></pre>\n\n<p>I've compiled and executed it but it doesn't work, it acts like it is an infinite loop. It doesn't give me any output. Why?</p>\n"}, {"tags": ["c++", "visual-studio-2012", "dll", "dllexport"], "comments": [{"owner": {"reputation": 2721, "user_id": 880984, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/65f4fa9056d1884b419463410e92c5be?s=128&d=identicon&r=PG", "display_name": "Tim Seguine", "link": "https://stackoverflow.com/users/880984/tim-seguine"}, "edited": false, "score": 1, "creation_date": 1447266879, "post_id": 33657288, "comment_id": 55088234, "body": "I deleted my comment because I decided it wasn&#39;t helpful. I was trying to get at, does your count include member functions?"}, {"owner": {"reputation": 189, "user_id": 1912473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617e310f00b30531c35b186a34e58d92?s=128&d=identicon&r=PG", "display_name": "Yoh", "link": "https://stackoverflow.com/users/1912473/yoh"}, "reply_to_user": {"reputation": 2721, "user_id": 880984, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/65f4fa9056d1884b419463410e92c5be?s=128&d=identicon&r=PG", "display_name": "Tim Seguine", "link": "https://stackoverflow.com/users/880984/tim-seguine"}, "edited": false, "score": 0, "creation_date": 1447266998, "post_id": 33657288, "comment_id": 55088309, "body": "@TimSeguine yeah, it includes data/function members."}, {"owner": {"reputation": 3612, "user_id": 2422013, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/VwKps.jpg?s=128&g=1", "display_name": "AStopher", "link": "https://stackoverflow.com/users/2422013/astopher"}, "edited": false, "score": 1, "creation_date": 1447267028, "post_id": 33657288, "comment_id": 55088328, "body": "At the risk of stating the obvious, did you clean + rebuild the project?"}, {"owner": {"reputation": 189, "user_id": 1912473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617e310f00b30531c35b186a34e58d92?s=128&d=identicon&r=PG", "display_name": "Yoh", "link": "https://stackoverflow.com/users/1912473/yoh"}, "reply_to_user": {"reputation": 3612, "user_id": 2422013, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/VwKps.jpg?s=128&g=1", "display_name": "AStopher", "link": "https://stackoverflow.com/users/2422013/astopher"}, "edited": false, "score": 1, "creation_date": 1447267452, "post_id": 33657288, "comment_id": 55088599, "body": "@bob I did it again just now to confirm."}, {"owner": {"reputation": 1797, "user_id": 1481240, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/A96l8.png?s=128&g=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/1481240/jim"}, "edited": false, "score": 0, "creation_date": 1618919313, "post_id": 33657288, "comment_id": 118743532, "body": "Did you ever figure this out. Looking for a way to list the exported objects, or even just the attempted count"}], "owner": {"reputation": 189, "user_id": 1912473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617e310f00b30531c35b186a34e58d92?s=128&d=identicon&r=PG", "display_name": "Yoh", "link": "https://stackoverflow.com/users/1912473/yoh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 905, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1447266654, "creation_date": 1447266259, "last_edit_date": 1447266654, "question_id": 33657288, "link": "https://stackoverflow.com/questions/33657288/too-many-symbols-to-export-in-dll-visual-c-lnk1189", "title": "Too many symbols to export in dll. Visual C++ LNK1189", "body": "<p>I am trying to turn our .lib project into multiple .dll projects.</p>\n\n<p>Since Visual Studio allows at most 65k objects in one lib(otherwise error), I have separated the project into a lot of \"smaller\" ones.</p>\n\n<p>However, the error is still there. I notice there are 400 classes in one project and each has fewer than 50 members. How can it exceed the limit 65k?</p>\n\n<p>(error LNK1189: the limit of 65535 objects or members in a library has been exceeded.)</p>\n\n<p>Maybe the solution is to further split the projects. Maybe I did something wrong.</p>\n\n<ol>\n<li>All classes are exported.</li>\n<li>A shared pre-compiled header file.</li>\n</ol>\n\n<p>Is there any problem if I mix static and dynamic link in one solution?</p>\n"}, {"tags": ["c++", "arrays", "templates", "integer"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 2816379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f5b63999328cbca1aff6f40f1c57d89?s=128&d=identicon&r=PG&f=1", "display_name": "ItDoesnotMatter", "link": "https://stackoverflow.com/users/2816379/itdoesnotmatter"}, "edited": false, "score": 0, "creation_date": 1447267091, "post_id": 33657462, "comment_id": 55088376, "body": "Thank you for the response. This, however, will affect the float input array case. For example, if T is float, middle1 = 1.5, middle 2 = 2.7, then the result is supposed to be 2.1, but this try would be 2."}, {"owner": {"reputation": 17, "user_id": 2816379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f5b63999328cbca1aff6f40f1c57d89?s=128&d=identicon&r=PG&f=1", "display_name": "ItDoesnotMatter", "link": "https://stackoverflow.com/users/2816379/itdoesnotmatter"}, "edited": false, "score": 0, "creation_date": 1447448746, "post_id": 33657462, "comment_id": 55175517, "body": "Thanks for the response. Yeah, I could do in this way, as stated above &quot;I could just implement each case separately, but would like to see if there is a better way to do it or not.&quot; But I guess this would be the case where an uniform implementation would not work well. Thank you for the response anyway!"}], "tags": [], "owner": {"reputation": 982, "user_id": 5314692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772574311ed4da5b181c0134a99dda29?s=128&d=identicon&r=PG&f=1", "display_name": "Semyon Burov", "link": "https://stackoverflow.com/users/5314692/semyon-burov"}, "is_accepted": true, "score": 1, "last_activity_date": 1447268200, "last_edit_date": 1447268200, "creation_date": 1447266809, "answer_id": 33657462, "question_id": 33657251, "link": "https://stackoverflow.com/questions/33657251/calculate-median-value-with-template-function/33657462#33657462", "title": "Calculate median value with template function", "body": "<p>Try <code>(T)round((middle1 + middle2) / 2.0);</code></p>\n\n<p>Division with <code>2.0</code> will cast expression to <code>double</code>. Calling <code>round</code> after that will round it properly. And after that result will be casted to <code>T</code>.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>If floating point values are possible add one more template function for calculation of median:</p>\n\n<pre><code>template&lt;typename T&gt;\nT median(T middle1, T middle2) {\n    return (T)round((middle1 + middle2) / 2.0);\n};\n\ntemplate&lt;&gt;\nfloat median(float middle1, float middle2) {\n    return (middle1 + middle2) / 2.0F;\n};\n\ntemplate&lt;&gt;\ndouble median(double middle1, double middle2) {\n    return (middle1 + middle2) / 2.0;\n};\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 2816379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f5b63999328cbca1aff6f40f1c57d89?s=128&d=identicon&r=PG&f=1", "display_name": "ItDoesnotMatter", "link": "https://stackoverflow.com/users/2816379/itdoesnotmatter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 527, "favorite_count": 0, "accepted_answer_id": 33657462, "answer_count": 1, "score": 0, "last_activity_date": 1447268200, "creation_date": 1447266133, "question_id": 33657251, "link": "https://stackoverflow.com/questions/33657251/calculate-median-value-with-template-function", "title": "Calculate median value with template function", "body": "<p>I have this template getMedian() function, in which any data type is allowed. The detailed function is as below. </p>\n\n<pre><code>template&lt;typename T&gt;\nT getMedian(T* inputArray, int arraySize)\n{\n    unique_ptr&lt;T[]&gt; sortArray(new T[arraySize]);\n    copy(inputArray, inputArray + arraySize, sortArray.get());\n\n    T medianValue;\n    if (arraySize % 2)\n    {\n        nth_element(sortArray.get(), sortArray.get() + arraySize / 2, sortArray.get() + arraySize);\n        medianValue = *(sortArray.get() + arraySize / 2);\n    }\n    else\n    {\n        nth_element(sortArray.get(), sortArray.get() + arraySize / 2, sortArray.get() + arraySize);\n        T middle1 = *(sortArray.get() + arraySize / 2);\n        nth_element(sortArray.get(), sortArray.get() + arraySize / 2 - 1, sortArray.get() + arraySize);\n        T middle2 = *(sortArray.get() + arraySize / 2 - 1);\n        medianValue = (middle1 + middle2) / 2;\n    }\n    return medianValue;\n}\n</code></pre>\n\n<p>In the case that the input array is an <strong>integer</strong> array and the array size is an <strong>even</strong> number, the median should be the mean of the middle two numbers. The corresponding code is </p>\n\n<pre><code>medianValue = (middle1 + middle2) / 2;\n</code></pre>\n\n<p>However, in C++, the integer division would truncate to be the nearest small number (floor), instead of doing round. For example, middle1 = 10; middle2 = 5; medianValue = (middle1 + middle2) / 2 = 15 / 2 = 7. How can I make it to do the <strong>round</strong> instead of doing <strong>floor</strong>, and at the same time, <strong>it will still keep the template structure</strong>, i.e. not affect the case of input array is an float /double array?</p>\n\n<p>I could just implement each case separately, but would like to see if there is a better way to do it or not. Thanks!</p>\n"}, {"tags": ["c++", "templates", "static-libraries"], "comments": [{"owner": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 0, "creation_date": 1447272462, "post_id": 33657234, "comment_id": 55091425, "body": "If it has nothing to do with the template, why is it a member, and a non-static one at that? You could implement it as a separate, non-template non-member function, and maybe have just a member stub forwarding to it - you&#39;ll have to provide the definition for the stub, but it will be just one line that will most likely be inlined. Is this the kind of thing you&#39;re looking for? Anyway, I&#39;m not sure why you wouldn&#39;t want to choose the non-dependent base solution; maybe explaining this decision in the question will shed more light on your requirements."}, {"owner": {"reputation": 1848, "user_id": 5505741, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K0RGKJuJSu4/AAAAAAAAAAI/AAAAAAAAAFw/aodTCStN3gc/photo.jpg?sz=128", "display_name": "Michael Nastenko", "link": "https://stackoverflow.com/users/5505741/michael-nastenko"}, "edited": false, "score": 0, "creation_date": 1447297690, "post_id": 33657234, "comment_id": 55100977, "body": "You can use <b>explicit template instantiation</b>. Why you don&#39;t want to move move non-template functions to base class? It has no overhead in this case."}, {"owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "edited": false, "score": 0, "creation_date": 1447315354, "post_id": 33657234, "comment_id": 55106485, "body": "The end goal is refactoring. If I can annotate something in a header I don&#39;t have to touch the implementation. If nothing else this will be educational for me. Explicit instantiation would not work in the presented case - the library is compiled before the &#39;struct awsome&#39; is known. I will try the extern keyword though I think it is deprecated."}, {"owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "edited": false, "score": 0, "creation_date": 1447350919, "post_id": 33657234, "comment_id": 55129178, "body": "In my real production code I moved on to using a base class, however I do have another idea that I will implement shortly to see if that gets me closer to an annotation form."}], "answers": [{"tags": [], "owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "is_accepted": true, "score": 0, "last_activity_date": 1448303410, "creation_date": 1448303410, "answer_id": 33878049, "question_id": 33657234, "link": "https://stackoverflow.com/questions/33657234/template-class-with-functions-that-do-not-use-the-template/33878049#33878049", "title": "template class with functions that do not use the template", "body": "<p>The answer turns out to be a base class as suggested in the comments. One of the reasons I wanted a base class is that I did not want to refactor. Refactoring using a base class is actually really simple.</p>\n\n<p>Rename the <code>original</code> class to <code>original_base</code>.\nInherit from <code>original_template</code> inherits from <code>original_base</code>. Make sure to copy the contructor and pass through all the arguments to the base class.\nThe statement <code>using original = original_template&lt;your default case here&gt;</code> ensures that no other source code has to be modified just yet.</p>\n\n<p>Applied to the example above I ended up doing something like this:</p>\n\n<pre><code>//Target compiled to Provider.lib\n//Mixer.hpp\n#pragma once\n#include &lt;iostream&gt;\nusing namespace std;\nstruct normal { static void log() { cout &lt;&lt; \"normal\\n\"; } };\n\nclass Mixer_Base\n{\nprivate:\n    int mixcount;\npublic:\n    Mixer_Base(int count);\n    void noTemplateInvolved();\n};\n\ntemplate&lt;typename output = normal&gt;\nclass Mixer_tempalte : public Mixer_Base\n{\npublic:\n    Mixer_tempalte(int count) : Mixer_Base(count)\n    {}\n    void callingTemplate();\n};\n\ntemplate&lt;typename output&gt;\nvoid Mixer_tempalte&lt;output&gt;::callingTemplate()\n{\n    output::log();\n}\n\nusing Mixer = Mixer_tempalte&lt;&gt;;\n//Mixer.cpp\n#include \"Mixer.hpp\"\n\nvoid Mixer_Base::noTemplateInvolved()\n{\n    cout &lt;&lt; \"noTemplateInvolved\\n\";\n}\n\nMixer_Base::Mixer_Base(int count) : mixcount(count)\n{}\n\n//Target Compiled to User.exe\n//This target imports Provider.lib\n#include &lt;Provider\\Mixer.hpp&gt;\n#pragma comment(lib, \"Provider.lib\")\n\nstruct awsome { static void log() { cout &lt;&lt; \"awsome\\n\"; } };\n\nint main()\n{\n    Mixer n(4);\n    n.callingTemplate();\n    n.noTemplateInvolved();\n\n    Mixer_tempalte&lt;awsome&gt; a(3);\n    a.callingTemplate();\n    a.noTemplateInvolved();\n    return 0;\n}\n</code></pre>\n\n<p>In a way an annotation feels just like the base class feels. Everything in the base class is now annotated the way I wanted it to be, though this does not reduce inheritance.</p>\n"}], "owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 33878049, "answer_count": 1, "score": 0, "last_activity_date": 1448303410, "creation_date": 1447266087, "last_edit_date": 1495542220, "question_id": 33657234, "link": "https://stackoverflow.com/questions/33657234/template-class-with-functions-that-do-not-use-the-template", "title": "template class with functions that do not use the template", "body": "<p>I am jumping through hoops to reduce inheritance. </p>\n\n<p>I read one similar question <a href=\"https://stackoverflow.com/questions/26877675/c-template-class-methods-that-do-not-use-template-parameter\">here</a>. It shows how the issue can be resolved using a base class. I try to loose inheritance, so I am looking for something different - more along the lines of annotation.</p>\n\n<p>I create and compile a template class with one specialisation (<code>normal</code>). The method that requires the template is in the header (<code>Mixer.hpp</code>). The method that does not require the template is in the cpp file (<code>Mixer.cpp</code>). When compiled into a static library, the cpp part only gets compiled as one specialisation (<code>Mixer&lt;normal&gt;</code>). The compiler does not know about (<code>awsome</code>) at that time. Importing the resulting static library into another project and attempting to create a different generic (<code>awsome</code>) class results in a linker error because obviously the library does not contain that method identifier (<code>Mixer&lt;awesome&gt;::noTemplateInvolved</code>). However the code for the normal implementation is as good as any so really the linker could just link to the existing source of the other template version (<code>Mixer&lt;?dontcare?&gt;::noTemplateInvolved</code>). All that the compiler has to do is to mark it appropriately for the linker.</p>\n\n<p>Here is source code that results in a linker error:</p>\n\n<pre><code>//Target compiled to Provider.lib\n//Mixer.hpp\n#pragma once\n#include &lt;iostream&gt;\nusing namespace std;\nstruct normal { static void log() { cout &lt;&lt; \"normal\\n\"; } };\n\ntemplate&lt;typename output = normal&gt;\nclass Mixer\n{\npublic:\n    void callingTemplate();\n    void noTemplateInvolved();\n};\n\ntemplate&lt;typename output&gt;\nvoid Mixer&lt;output&gt;::callingTemplate() { output::log(); }\n//Mixer.cpp\n#include \"Mixer.hpp\"\nvoid Mixer&lt;&gt;::noTemplateInvolved()\n{\n    cout &lt;&lt; \"noTemplateInvolved\\n\";\n}\n\n//Target Compiled to User.exe\n//This target imports Provider.lib\n#include &lt;Provider\\Mixer.hpp&gt;\n#pragma comment(lib, \"Provider.lib\")\n\nstruct awsome { static void log() { cout &lt;&lt; \"awsome\\n\"; } };\n\nint main()\n{\n    Mixer&lt;&gt; n;\n    n.callingTemplate();\n    n.noTemplateInvolved();\n\n    Mixer&lt;awsome&gt; a;\n    a.callingTemplate();\n    a.noTemplateInvolved(); //linker error here\n    return 0;\n}\n</code></pre>\n\n<p>The class <code>Mixer&lt;awsome&gt;</code> can link to the method <code>callingTemplate</code> because its definition is in the header and the compiler creates that function. At <code>User.exe</code> compile time the definition of <code>noTemplateInvolved</code> is hidden from the compiler. The compiler can not create that method and linking has to fail.</p>\n\n<p>There are three solutions that I am aware of.</p>\n\n<ul>\n<li>move the definition of <code>noTemplateInvolved</code> to the header.</li>\n<li>include the cpp file</li>\n<li>inherit from a baseclass</li>\n</ul>\n\n<p>I am looking for another solution. The body of <code>noTemplateInvolved</code> really has nothing to do with the template. I would like to annotate the method in the header. I want the compiler to know it should always use the same base implementation regardless of the template.</p>\n\n<p>Is that at all possible?</p>\n\n<p>EDIT: Annotated that boring paragraph at the beginning a bit.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1447266386, "post_id": 33657163, "comment_id": 55087897, "body": "Add <code>printf(&quot;subsystemstr=%s\\n&quot;,subsystemstr);</code> after <code>GetString</code> and before the <code>strtok</code> call and <code>printf(&quot;p_system=%s\\n&quot;, p_system);</code> after <code>strtok</code>.  What does it output?"}, {"owner": {"reputation": 251, "user_id": 1600402, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf04556d10627c6a918fec771d49ca25?s=128&d=identicon&r=PG", "display_name": "AshA", "link": "https://stackoverflow.com/users/1600402/asha"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1447266578, "post_id": 33657163, "comment_id": 55088023, "body": "It is giving the same output to me [&quot;all:&quot;, &#39;\\0&#39; &lt;repeats 59 times&gt;] and [0x388870 &quot;&quot;]"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1447268665, "post_id": 33657163, "comment_id": 55089324, "body": "@AshA: <code>printf(&quot;p_system=%s\\n&quot;, p_system)</code> will not print <code>[0x3888770 &quot;&quot;]</code> :) However, it would also be useful to have <code>printf(&quot;subsystemstr = %p;  p_system = %p\\n&quot;, subsystemstr, p_system);</code> in order to understand what p_system is pointing at. Finally, <code>strncmp</code> shouldn&#39;t be necessary here (unless you suspect you might buffer overrun subsystemstr, and you should avoid doing that instead :) ) and neither <code>strncmp</code> nor <code>strcmp</code> will return 0 when comparing &quot;all:&quot; with &quot;all&quot;. (unless you force the comparison to be 3 characters using <code>strncmp(..., 3);</code>)"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1447270566, "post_id": 33657163, "comment_id": 55090407, "body": "Since you tagged this a C++, save yourself some frustration and use <code>std::string</code> and its many <code>find</code> methods."}, {"owner": {"reputation": 251, "user_id": 1600402, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf04556d10627c6a918fec771d49ca25?s=128&d=identicon&r=PG", "display_name": "AshA", "link": "https://stackoverflow.com/users/1600402/asha"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1447276937, "post_id": 33657163, "comment_id": 55093726, "body": "@ThomasMatthews: I am not frustated, I think you do not have good reading skills. As I mentioned I am doing testing so I can not modify the code.."}, {"owner": {"reputation": 251, "user_id": 1600402, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf04556d10627c6a918fec771d49ca25?s=128&d=identicon&r=PG", "display_name": "AshA", "link": "https://stackoverflow.com/users/1600402/asha"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1447276967, "post_id": 33657163, "comment_id": 55093746, "body": "@rici Thank You for your suggestion. I know printf(&quot;p_system=%s\\n&quot;, p_system) will not print [0x3888770 &quot;&quot;] :)  As I mentioned I am performing testing so I can not modify the code to put printf but as an alternative I am using the command &#39;p p_system&#39; in command line debugger and getting [0x3888770 &quot;&quot;]. One more thing I would like to share what I think here that strncmp will return 0 when comparing &quot;all&quot; with &quot;all&quot; as strtok_r will return token &quot;all&quot; after delimiting the string &quot;all:&quot; by delimiter &quot;:&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 251, "user_id": 1600402, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf04556d10627c6a918fec771d49ca25?s=128&d=identicon&r=PG", "display_name": "AshA", "link": "https://stackoverflow.com/users/1600402/asha"}, "edited": false, "score": 0, "creation_date": 1447315919, "post_id": 33662149, "comment_id": 55106762, "body": "your suggestion really works for me to get the values of  p_system. Thanks."}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 1, "last_activity_date": 1447286497, "creation_date": 1447286497, "answer_id": 33662149, "question_id": 33657163, "link": "https://stackoverflow.com/questions/33657163/how-strtok-r-function-return-values/33662149#33662149", "title": "How strtok_r function return values?", "body": "<p>I suspect your understanding of what </p>\n\n<pre><code>p p_system\n</code></pre>\n\n<p>actually does (prints the address of p_system)<br>\nin gdb, the command would be </p>\n\n<pre><code>p *p_system\n</code></pre>\n\n<p>or, using the builtin printf command</p>\n\n<pre><code>printf \"%s\", p_system\n</code></pre>\n\n<p>or, using the C function</p>\n\n<pre><code>call printf(\"%s\", p_system)\n</code></pre>\n\n<p>or,</p>\n\n<pre><code>call (void)puts(p_system)\n</code></pre>\n\n<p>or, if you do not mind also seeing some address values</p>\n\n<pre><code>x /s p_system\n</code></pre>\n"}], "owner": {"reputation": 251, "user_id": 1600402, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf04556d10627c6a918fec771d49ca25?s=128&d=identicon&r=PG", "display_name": "AshA", "link": "https://stackoverflow.com/users/1600402/asha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1447286497, "creation_date": 1447265833, "last_edit_date": 1447267404, "question_id": 33657163, "link": "https://stackoverflow.com/questions/33657163/how-strtok-r-function-return-values", "title": "How strtok_r function return values?", "body": "<p>I am doing component test for a 'C' code. I have read the functionality of <strong>strtok_r</strong> function but I am not able to get the return value that I want to pass in <strong>strncmp</strong>' function. My code is contains <strong>strtok_r</strong> and <strong>strncmp</strong> functions as below:</p>\n\n<pre><code>typedef struct BufferN {\n    uint32_t v;\n    uint32_t m;\n} My_Buffer;\n\nchar subsystemstr[64] = { '\\0' };\nMy_Buffer buffer;\nchar *p_system;\nchar *p_subsystem;\n\n(void) GetString(&amp;buffer, subsystemstr, sizeof(subsystemstr));\np_system = strtok_r (subsystemstr, \":\", &amp;p_subsystem);\n\nfor (i = 0u; i &lt; 100; i++) \n{\n    if (strncmp(p_system, \"all\", 64) == 0) \n    {\n       /*Some Code Statement*/\n    }\n}\n</code></pre>\n\n<p>Since array <strong>subsystemstr</strong> is initialized to '\\0', I am modifying this array value with the help of function <strong>GetString</strong> as below:</p>\n\n<pre><code>strncpy(subsystemstr, \"all:\", 64);\n</code></pre>\n\n<p>When I am printing <strong>subsystemstr</strong>, I am having updated array as:</p>\n\n<pre><code>[\"all:\", '\\0' &lt;repeats 59 times&gt;]\n</code></pre>\n\n<p>but when I am printing <strong>p_system</strong>(return value of strtok_r). I am getting    </p>\n\n<pre><code>[0x388870 \"\"] \n</code></pre>\n\n<p>I am confused how it is working. Actually I want value of p_system = <strong>\"all\"</strong> so that 'strncmp' function can <strong>return 0.</strong>\nPlease suggest.</p>\n"}, {"tags": ["c++", "opencv", "kinect"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5765881, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T9kQ9QIdaQg/AAAAAAAAAAI/AAAAAAAAAAA/O7s4hsyv3Pk/photo.jpg?sz=128", "display_name": "Scott", "link": "https://stackoverflow.com/users/5765881/scott"}, "is_accepted": false, "score": 1, "last_activity_date": 1452319328, "creation_date": 1452319328, "answer_id": 34690264, "question_id": 33657103, "link": "https://stackoverflow.com/questions/33657103/using-microsoft-kinect-with-opencv-3-0-0/34690264#34690264", "title": "Using Microsoft Kinect with Opencv 3.0.0", "body": "<p>libfreenect a bug fixed required. </p>\n\n<p>cd OpenNI2-FreenectDriver/src\n     vim DepthStream.hpp</p>\n\n<p>In <strong>line 173</strong>, the check for XN_STREAM_PROPERTY_ZERO_PLANE_DISTANCE expects a pDataSize of size unsigned long long.\n  However, OpenNI2 expects an int32_t (size 8 vs size 4) so an error is in order. This error does not appear if\n  if you use OpenNI2 or NiTE2 alone, since they don't ask for this property. However, if you use OpenCV+OpenNI2,\n  the said property will be queried.</p>\n\n<p>Fix. Change the case XN_STREAM_PROPERTY_ZERO_PLANE_DISTANCE with:</p>\n\n<pre><code> case XN_STREAM_PROPERTY_ZERO_PLANE_DISTANCE:    // unsigned long long or unsigned int (for OpenNI2/OpenCV)\n\n    if ( *pDataSize != sizeof(unsigned long long) &amp;&amp; *pDataSize != sizeof(unsigned int) )\n      { \n        LogError(\"Unexpected size for XN_STREAM_PROPERTY_ZERO_PLANE_DISTANCE!!!\");\n        return ONI_STATUS_ERROR;\n      } else {\n          if( *pDataSize == sizeof(unsigned long long) ) {\n              *(static_cast&lt;unsigned long long*&gt;(data)) = ZERO_PLANE_DISTANCE_VAL;\n          } else {\n              *(static_cast&lt;unsigned int*&gt;(data)) = (unsigned int) ZERO_PLANE_DISTANCE_VAL;\n          }\n      return ONI_STATUS_OK;\n       }\n</code></pre>\n\n<p>see <a href=\"http://www.cc.gatech.edu/~ahuaman3/docs/tutorials/software/source/perception.rst\" rel=\"nofollow\">here</a></p>\n"}], "owner": {"reputation": 49, "user_id": 5026962, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/751520314973755/picture?type=large", "display_name": "ItsmeKe", "link": "https://stackoverflow.com/users/5026962/itsmeke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 820, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1452320627, "creation_date": 1447265622, "last_edit_date": 1452320627, "question_id": 33657103, "link": "https://stackoverflow.com/questions/33657103/using-microsoft-kinect-with-opencv-3-0-0", "title": "Using Microsoft Kinect with Opencv 3.0.0", "body": "<p>Hello I am trying to get disparity maps from a Microsoft kinect for xbox 360. I have opencv 3.0.0 and openni2 with libfreenect installed. When I run my code</p>\n\n<pre><code>#include \"opencv2/opencv.hpp\"\n\nusing namespace cv;\n\nint main(int, char**){\n\n    VideoCapture capture( CAP_OPENNI2 );\n    namedWindow(\"win\",1);\n\n    for(;;){\n        Mat depthMap;\n        capture &gt;&gt; depthMap;\n        imshow(\"win\",depthMap);\n        if( waitKey( 30 ) &gt;= 0 ) break;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>My kinect starts projecting the IR pattern but then I get a bunch of errors</strong></p>\n\n<pre><code>OpenNI2-FreenectDriver: Using libfreenect v0.5.3\n\nOpenNI2-FreenectDriver: Found device freenect://0\n\nOpenNI2-FreenectDriver: Opening device freenect://0\n\n[Stream 70] Negotiated packet size 1920\n\nwrite_register: 0x0105 &lt;= 0x00\n\nwrite_register: 0x0006 &lt;= 0x00\n\nwrite_register: 0x0012 &lt;= 0x03\n\nwrite_register: 0x0013 &lt;= 0x01\n\nwrite_register: 0x0014 &lt;= 0x1e\n\nwrite_register: 0x0006 &lt;= 0x02\n\nwrite_register: 0x0017 &lt;= 0x00\n\n[Stream 80] Negotiated packet size 1920\n\nwrite_register: 0x000c &lt;= 0x00\n\nwrite_register: 0x000d &lt;= 0x01\n\nwrite_register: 0x000e &lt;= 0x1e\n\nwrite_register: 0x0005 &lt;= 0x01\n\n[Stream 70] Lost 2 total packets in 0 frames (inf lppf)\n\n[Stream 70] Lost 5 total packets in 0 frames (inf lppf)\n\nwrite_register: 0x0047 &lt;= 0x00\n\nOpenNI2-FreenectDriver: (ERROR) Unexpected size for XN_STREAM_PROPERTY_ZERO_PLANE_DISTANCE\n\nOpenCV Error: Unspecified error (CvCapture_OpenNI2::readCamerasParams : Could not read virtual plane distance! ) in readCamerasParams, file /home/ubuntu/opencv-3.0.0/modules/videoio/src/cap_openni2.cpp, line 379 terminate called after throwing an instance of 'cv::Exception' what(): /home/ubuntu/opencv-3.0.0/modules/videoio/src/cap_openni2.cpp:379: error: (-2) CvCapture_OpenNI2::readCamerasParams : Could not read virtual plane distance! in function readCamerasParams\n\nAborted\n</code></pre>\n"}, {"tags": ["c++", "string", "iterator", "language-lawyer", "stdstring"], "comments": [{"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "edited": false, "score": 5, "creation_date": 1447265827, "post_id": 33657050, "comment_id": 55087541, "body": "I&#39;m pretty sure that If you increment the end iterator, the result is undefined behavior."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1447266315, "post_id": 33657050, "comment_id": 55087847, "body": "I don&#39;t get it. The iterator obtained by <code>end</code> does point to the <code>\\0</code> character. <code>end + 1</code> would be an attempt to go beyond the terminating <code>\\0</code>, wouldn&#39;t it?"}, {"owner": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1447266575, "post_id": 33657050, "comment_id": 55088020, "body": "@ChristianHackl in compare for example with std::vector, where <code>end</code> iterator may point to not existing memory, <code>std::string::end</code> point to existing, so as I understand the question is always <code>std::string::end + 1</code> return valid iterator that may be use for range <code>from begin to zero byte</code>"}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 2, "creation_date": 1447266744, "post_id": 33657050, "comment_id": 55088140, "body": "Don&#39;t try to break the abstraction. Don&#39;t <b>assume</b> there is a 0 on the end unless you call <code>c_str()</code>."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 5, "creation_date": 1447266894, "post_id": 33657050, "comment_id": 55088247, "body": "Perhaps the gist of the question is whether <code>std::string</code> effectively allows <code>*end(str)</code>. In practice, <code>assert(*end(str) == &#39;\\0&#39;)</code> should never fail, but is it correct C++11?"}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 1, "creation_date": 1447266895, "post_id": 33657050, "comment_id": 55088249, "body": "Probably unimportant but isn&#39;t the final draft N4140?"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "edited": false, "score": 0, "creation_date": 1447267049, "post_id": 33657050, "comment_id": 55088344, "body": "@user1034749: Why should <code>end + 1</code> point to <code>&#39;\\0&#39;</code>?"}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1447267123, "post_id": 33657050, "comment_id": 55088395, "body": "I don&#39;t think that an implementation would be prohibited \u2013 at least not from the quotes in your post \u2013 to implement <code>operator++</code> of <code>std::basic_string::iterator</code> to <code>assert</code> on the current position being less than <code>s.end()</code>. But I&#39;m pretty sure it is well defined to say <code>s.c_str() + s.length() + 1</code> (or <code>&amp;(*s.begin())</code>) because those are guaranteed to be raw pointers."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 1, "creation_date": 1447267141, "post_id": 33657050, "comment_id": 55088408, "body": "And the <i>reason</i> to not break the abstraction is that things that are almost like strings but aren&#39;t, like string_ref, will break or get very inefficient. If you have a string_ref it can be a substring without needing to make a copy. Unless you go around demanding it stick a 0 on the end."}, {"owner": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1447267174, "post_id": 33657050, "comment_id": 55088433, "body": "@ChristianHackl No, <code>end + 1</code> not point to zero, <code>end</code> point to zero, so to iterate thourhg all chars you can use <code>begin</code> and <code>end</code> and to iterate for all chars + zero byte you can or may be can not use <code>begin</code> <code>end+1</code>"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 2, "creation_date": 1447267548, "post_id": 33657050, "comment_id": 55088666, "body": "@ZanLynx: Well, a <code>string_ref</code> isn&#39;t a <code>string</code>. And for good reasons it doesn&#39;t have the additional guarantees the latter provides."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1447267783, "post_id": 33657050, "comment_id": 55088800, "body": "@Deduplicator point is that you or someone will want to optimize your code later and abusing a container makes replacing it without bugs much harder."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "edited": false, "score": 0, "creation_date": 1447267868, "post_id": 33657050, "comment_id": 55088855, "body": "@user1034749: If you agree that <code>end</code> points to zero, then <code>end + 1</code> must be undefined behaviour, because what else do expect in the dark hole beyond <code>\\0</code>?"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1447268102, "post_id": 33657050, "comment_id": 55089004, "body": "All things considered, I don&#39;t see the big difference to &quot;normal&quot; container classes. Just like in <code>std::vector</code> or <code>std::list</code>, <code>end</code> does not point to an element but to &quot;one past the last element&quot;. It just happens to be that <code>std::string</code> leaks a bit of its abstraction such that you can peek at &quot;one past the last element&quot; and conclude that it is a <code>\\0</code> character."}, {"owner": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1447268143, "post_id": 33657050, "comment_id": 55089025, "body": "@ChristianHackl all other containers have the same <code>end</code> point to the dark whole as <code>end+1</code> of <code>std::string</code> that is the point of question. yes <code>end+1</code> deference is bad thing, but what about usage it as normal <code>end</code> in algorithms"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1447268283, "post_id": 33657050, "comment_id": 55089109, "body": "Perhaps the misunderstanding is about what constitutes an <i>element</i>. Is the <code>\\0</code> part of the elements or not? <code>c_str()</code> (or <code>data()</code>) seem to suggest it, but all member functions that deal with the abstraction that <code>std::string</code> represents, like <code>size()</code> or <code>end()</code>, clearly don&#39;t."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "reply_to_user": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1447269896, "post_id": 33657050, "comment_id": 55090018, "body": "@ZanLynx: &quot;Don&#39;t assume there is a 0 on the end unless you call c_str().&quot; - <code>c_str()</code> is declared as <code>const</code>, calling it doesn&#39;t make a difference."}, {"owner": {"reputation": 154, "user_id": 3164339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/336d185d4f3d623614411c862f40c09e?s=128&d=identicon&r=PG&f=1", "display_name": "user3164339", "link": "https://stackoverflow.com/users/3164339/user3164339"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1447270822, "post_id": 33657050, "comment_id": 55090564, "body": "@ChristianHackl don&#39;t forget about length().  I find keeping the differences difficult and usually just do a test run to make sure I do or don&#39;t need the +1.  Even testing it as many times as I have I still can&#39;t tell you which includes the <code>\\0</code> and which don&#39;t."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 154, "user_id": 3164339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/336d185d4f3d623614411c862f40c09e?s=128&d=identicon&r=PG&f=1", "display_name": "user3164339", "link": "https://stackoverflow.com/users/3164339/user3164339"}, "edited": false, "score": 2, "creation_date": 1447270887, "post_id": 33657050, "comment_id": 55090609, "body": "@user3164339 <code>length</code> and <code>size</code> are the same: <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/size\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/string/basic_string/size</a>"}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 1, "creation_date": 1447272257, "post_id": 33657050, "comment_id": 55091299, "body": "@KarolyHorvath: C++ introduced the <code>mutable</code> keyword just to confuse people who think <code>const</code> means <code>const</code>."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 1, "creation_date": 1447272415, "post_id": 33657050, "comment_id": 55091398, "body": "@ZanLynx Well, it must also be constant-time, and thus the element must <i>exist</i>."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1447272580, "post_id": 33657050, "comment_id": 55091492, "body": "@Deduplicator: I am not arguing that std::string doesn&#39;t have a zero at the end. I am saying that trying to break the container abstraction <b>will</b> result in bugs when the code changes to use a similar but not identical container. Because the programmer doing the change is going to assume that the code is not doing anything <b>STUPID</b>."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1447273134, "post_id": 33657050, "comment_id": 55091755, "body": "@ZanLynx: A <code>std::string</code> isn&#39;t just a container, it&#39;s a string, with string-specific additions (members, and use of traits for customization). Yes, if there&#39;s no advantage to writing code customized to use a string, it&#39;s a good idea to stay more generic. Doesn&#39;t mean if there is some reason it must be a string, taking advantage of that is stupid."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1447281560, "post_id": 33657050, "comment_id": 55096016, "body": "@Deduplicator: It IS stupid because there are dozens of containers that do a string look-alike interface. These things implement the string contract and if you break it by dereferencing <code>end()</code> the code will be super surprised when it gets <code>&#39;e&#39;</code> instead of <code>&#39;\\0&#39;</code>."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1447282306, "post_id": 33657050, "comment_id": 55096358, "body": "@ZanLynx: No, there are dozens of containers which implement a part of the string-interface. Beginning with <code>std::initializer_list</code>, going over <code>std::vector</code> and not ending with <code>std::string_view</code>. As I said, one should always code to the most common interface one can, but if one knows the interface is bigger, and using more has any advantage, there&#39;s nothing wrong with that. Sometimes one even specializes templates to take advantage of such opportunities, and that&#39;s as it should be."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 0, "creation_date": 1447333186, "post_id": 33657050, "comment_id": 55116683, "body": "Who would have known such a simple question would spark such a heated discussion? I guess it shows that nobody really knows (for now)."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1447341731, "post_id": 33657050, "comment_id": 55122736, "body": "@Deduplicator It must exist, but it need not be a <code>&#39;\\0&#39;</code>.  It could even be on a different memory guarded page that traps access."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1447343489, "post_id": 33657050, "comment_id": 55124106, "body": "@Yakk: the other memory page that traps access thing could be said about any array/vector though, no?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 1, "creation_date": 1447343794, "post_id": 33657050, "comment_id": 55124375, "body": "@MatthieuM. I&#39;m saying that, prior to calling <code>.data()</code> or <code>.c_str()</code>, the <code>std::basic_string</code> is free to leave the trailing null uninitialized or trap and cause your program to format your hard drive it it is written (undefined behavior).  It cannot reallocate to make room for it, as <code>.data()</code> and <code>.c_str()</code> are constant-time, but setting the value of the null terminator and/or changing the trap information on a page is a constant-time operation.  In theory, the trap could extend to even forming the <i>pointer</i> to the null terminator (on some architecture with pointer trap values) AFAICT."}], "answers": [{"comments": [{"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 2, "creation_date": 1447333073, "post_id": 33665158, "comment_id": 55116601, "body": "The Visual Studio example is striking, however it is also NOT authoritative. Is this behavior condoned by the Standard or did Dirkumware or STL err?"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1447340798, "post_id": 33665158, "comment_id": 55122055, "body": "There&#39;s no existing code relying on it... likely. At least I don&#39;t know of any. New code should be prevented from relying on it... why? That part of the conclusion needs some elaboration. What does <i>not</i> allowing it buy you in theory, and how does that look in practice?"}, {"owner": {"reputation": 79438, "user_id": 365496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1397eae94e7fe715f040459c988c40b1?s=128&d=identicon&r=PG", "display_name": "bames53", "link": "https://stackoverflow.com/users/365496/bames53"}, "reply_to_user": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 0, "creation_date": 1447345971, "post_id": 33665158, "comment_id": 55125935, "body": "@MatthieuM. My transition from analysis of the spec to demonstrating implementation behavior was a bit incomplete. The intent was to first show that it&#39;s undefined behavior in the spec (simply due to the fact that nowhere in the spec is its behavior defined or required), and then show that implementations do in fact take advantage of that. I&#39;ve added the missing phrase which I had taken as implied."}], "tags": [], "owner": {"reputation": 79438, "user_id": 365496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1397eae94e7fe715f040459c988c40b1?s=128&d=identicon&r=PG", "display_name": "bames53", "link": "https://stackoverflow.com/users/365496/bames53"}, "is_accepted": false, "score": 5, "last_activity_date": 1447354737, "last_edit_date": 1447354737, "creation_date": 1447307109, "answer_id": 33665158, "question_id": 33657050, "link": "https://stackoverflow.com/questions/33657050/are-end1-iterators-for-stdstring-allowed/33665158#33665158", "title": "Are end+1 iterators for std::string allowed?", "body": "<blockquote>\n  <p>Returns: A pointer <code>p</code> such that <code>p + i == &amp;operator[](i)</code> for each <code>i</code> in <code>[0,size()]</code>.</p>\n</blockquote>\n\n<p><code>std::string::operator[](size_type i)</code> is specified to return \"a reference to an object of type <code>charT</code> with value <code>charT()</code> when <code>i == size()</code>, so we know that that pointer points to an object.</p>\n\n<p>5.7 states that \"For the purposes of [operators + and -], a pointer to a nonarray object behaves the same as a pointer to the first element of an array of length one with the type of the object as its element type.\"</p>\n\n<p>So we have a non-array object and the spec guarantees that a pointer one past it will be representable. So we know <code>std::addressof(*end(str)) + 1</code> has to be representable.</p>\n\n<p>However that's not a guarantee on <code>std::string::iterator</code>, and there is no such guarantee anywhere in the spec, which makes it undefined behavior.</p>\n\n<p>(Note that this is not the same as 'ill-formed'. <code>*end(str) + 1</code> is in fact well-formed.)</p>\n\n<p>Iterators can and do implement checking logic that produce various errors when you do things like increment the <code>end()</code> iterator. This is in fact what Visual Studios debug iterators do with <code>end(str) + 1</code>.</p>\n\n<pre><code>#define _ITERATOR_DEBUG_LEVEL 2\n#include &lt;string&gt;\n#include &lt;iterator&gt;\n\nint main() {\n  std::string s = \"ssssssss\";\n  auto x = std::end(s) + 1; // produces debug dialog, aborts program if skipped\n}\n</code></pre>\n\n<blockquote>\n  <p>And if it isn't, <em>why</em> isn't it?</p>\n  \n  <p>for consistency and interoperability with zero-terminated strings if nothing else</p>\n</blockquote>\n\n<p>C++ specifies some specific things for compatibility with C, but such backwards compatibility is limited to supporting things that can actually be written in C. C++ doesn't necessarily try to take C's semantics and make new constructs behave in some analogous way. Should <code>std::vector</code> decay to an iterator just to be consistent with C's array decay behavior?</p>\n\n<p>I'd say <code>end(std) + 1</code> is left as undefined behavior because there's no value in trying to constrain <code>std::string</code> iterators this way. There's no legacy C code that does this that C++ needs to be compatible with and new code should be prevented from doing it.</p>\n\n<blockquote>\n  <p>New code should be prevented from relying on it... why? [...] What does not allowing it buy you in theory, and how does that look in practice?</p>\n</blockquote>\n\n<p>Not allowing it means implementations don't have to support the added complexity, complexity which provides zero demonstrated value.</p>\n\n<p>In fact it seems to me that supporting <code>end(str) + 1</code> has negative value since code that tries to use it will essentially be creating the same problem as C code which can't figure out when to account for the null terminator or not. C has enough off by one buffer size errors for both languages.</p>\n"}, {"comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1447341999, "post_id": 33674891, "comment_id": 55122941, "body": "How could the DS9K (imported from comp.lang.c) disallow creating a pointer past the NUL-terminator? Doesn&#39;t the rule that you must be able to treat an element as an array of one, and form a pointer just past, guarantee that? Now the problem of allowing a non-const pointer to a const element just for std::string&#39;s terminator, that looks like a deal-breaker for modifiable iterators, and because consistency is really a good idea, also for constant ones, yes."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1447342171, "post_id": 33674891, "comment_id": 55123101, "body": "@Deduplicator It is really easy to show that the NUL-terminator is contiguous with the rest of the data.  And yes, there is no way to <i>implement</i> an element in C++ such that a pointer one past its end is not valid; but the insane convoluted argument I&#39;m imagining (but not making) is based on the fact that the C++ standard does not require that the C++ standard library be implemented in C++.  It specifies certain behavior.  We have the guarantee that <code>int x; (&amp;x)+1;</code> is ok, but all we have for the last element is a pointer such that <code>*p == &#39;\\0&#39;</code> and a reference to same."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1447342295, "post_id": 33674891, "comment_id": 55123192, "body": "@Deduplicator I don&#39;t think implementing based off such an argument (if it is valid) is <i>reasonable</i>, and I&#39;d consider any use of such an argument in a compiler evidence that the standard is defective, but I&#39;m saying that such an argument exists, and might even be a valid one.  I could be wrong; I&#39;m not that interested in an argument that, even if correct, points out a standard defect with no real-world impact (because nobody is going to exploit it, no, really)."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1447342474, "post_id": 33674891, "comment_id": 55123333, "body": "Thanks, that one made me laugh, because the argument is so ludicrous but strictly might actually work according to the letter of the standard. Yes, I concurr that any implementer actually going that way is beyond reason, or just trying to screw with users minds..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1447356505, "post_id": 33674891, "comment_id": 55132457, "body": "I believe it would be legal for a string implementation to internally hold strings using non-consecutive allocations until such time as someone requests a pointer to the backing store, would it not? Such a thing could improve the performance of repeated concatenations to a string, since concatenation of each new string would just require allocating enough space for a copy of the new content and a pointer to the earlier string [consolidating the chains when they get too big, or when code asks for a pointer to the string content]. In such a system, the trailing zero might not be stored at all..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1447356538, "post_id": 33674891, "comment_id": 55132483, "body": "...unless or until code asks for the address of the string data, and there would be no particular reason to expect an iterator to be able to point past something that doesn&#39;t even exist."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1447357090, "post_id": 33674891, "comment_id": 55132824, "body": "@supercat There are constant-time requirements on the <code>.c_str()</code> and <code>.data()</code> members, which  means they <i>cannot</i> transcribe the string from some other store to single buffer.  Amusingly, the string could have a pre-allocated buffer of virtual pages of the right size (but &quot;no content&quot;) that, when accessed, trap the access and do the transcription from another buffer, at least with POD character types.  I think.  Basically there are serious restrictions on what you can do with string implementations due to O-notation restrictions."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1447357789, "post_id": 33674891, "comment_id": 55133191, "body": "@Yakk: Could one overcome the O-notation restrictions by saying that any strings less than 500 quadrillion characters will use &quot;copy-on-fright&quot; while those larger than that will pre-allocate?  After all, O(500000000000000000) and O(1) are equivalent.  Or is there more to it than that?  While I could see some usefulness to a requirement that the total amount of time required to perform some combination of operations must be O(something), I&#39;m less clear on the value of forbidding the deferral of certain operations in cases where the total time of all operations performed on an object to date..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1447358025, "post_id": 33674891, "comment_id": 55133327, "body": "...would meet requirements.  If the time required to construct a string of length n and perform m access to it is O(n)+O(m), what practical harm would come from allowing the first access to take time O(n) if the total time constraints were met?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1447358377, "post_id": 33674891, "comment_id": 55133505, "body": "@Yakk: Personally, I&#39;m something of a fan of a form of &quot;copy on demand&quot; semantics where all data is either sharable or mutable, but never both.  For it to really work well one must predict whether it will be necessary to make more than one logical &quot;copy&quot; of something before it&#39;s modified [guessing wrong will result in an otherwise-unnecessary copy operation] but it avoids a lot of the threading issues and other complexity of trying to use &quot;copy on write&quot; with mutable data."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 3, "last_activity_date": 1447341885, "last_edit_date": 1447341885, "creation_date": 1447341593, "answer_id": 33674891, "question_id": 33657050, "link": "https://stackoverflow.com/questions/33657050/are-end1-iterators-for-stdstring-allowed/33674891#33674891", "title": "Are end+1 iterators for std::string allowed?", "body": "<p>A <code>std::basic_string&lt;???&gt;</code> is a container over its elements.  Its elements do not include the trailing null that is implicitly added (it can include embedded nulls).</p>\n\n<p>This makes lots of sense -- \"for each character in this string\" probably shouldn't return the trailing <code>'\\0'</code>, as that is really an implementation detail for compatibility with C style APIs.</p>\n\n<p>The iterator rules for containers were based off of containers that don't shove an extra element at the end.  Modifying them for <code>std::basic_string&lt;???&gt;</code> without motivation is questionable; one should only break a working pattern if there is a payoff.</p>\n\n<p>There is every reason to think that pointers to <code>.data()</code> and <code>.data() + .size() + 1</code> are allowed (I could imagine a twisted interpretation of the standard that would make it not allowed).  So if you really need <em>read-only</em> iterators into the contents of a <code>std::string</code>, you can use pointer-to-const-elements (which are, after all, a kind of iterator).</p>\n\n<p>If you want editable ones, then no, there is no way to get a valid iterator to one-past-the-end.  Neither can you get a non-<code>const</code> reference to the trailing null legally.  In fact, such access is clearly a bad idea; if you change the value of that element, you break the <code>std::basic_string</code>'s invariant null-termination.</p>\n\n<p>For there to be an iterator to one-past-the-end, the const and non-const iterators to the container would have to have a different valid range, or a non-const iterator to the last element that can be dereferenced but not written to must exist.</p>\n\n<p>I shudder at making such standard wording watertight.</p>\n\n<p><code>std::basic_string</code> is already a mess.  Making it even stranger would lead to standard bugs and would have a non-trivial cost.  The benefit is really low; in the few cases where you want access to said trailing null in an iterator range, you can use <code>.data()</code> and use the resulting pointers as iterators.</p>\n"}, {"comments": [{"owner": {"reputation": 79438, "user_id": 365496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1397eae94e7fe715f040459c988c40b1?s=128&d=identicon&r=PG", "display_name": "bames53", "link": "https://stackoverflow.com/users/365496/bames53"}, "edited": false, "score": 1, "creation_date": 1447353674, "post_id": 33675281, "comment_id": 55130781, "body": "<code>*s.end()</code> isn&#39;t ill-formed: It is valid syntactically, does not violate any &#39;diagnosable semantic rules&#39; and doesn&#39;t violate the ODR. Similarly, <code>*s.end() + 1</code> is not ill-formed. Both of these expression are in fact well-formed."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1447539302, "post_id": 33675281, "comment_id": 55198960, "body": "So where does it say that past the end iterators are not dereferenceable?  Just because the library never assumes they are dereferenceable does not make it so."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1447590268, "post_id": 33675281, "comment_id": 55209226, "body": "@NathanOliver: I think I see what you mean; I had originally read it as &quot;the library never guarantees that you can dereference a past-the-end value&quot; whereas I see now it can be read as &quot;whenever you submit a <code>[begin, end)</code> range to a library-supplied method/function, it will never dereference <code>end</code>&quot; which is completely different."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1447599046, "post_id": 33675281, "comment_id": 55211778, "body": "So then this answer is incorrect.  You assume <code>*s.end()</code> is ill formed but nothing you presented in this answer actually says it is or isn&#39;t.  You have to prove that <code>s.end()</code> is not dereferenceable.  I had this same answer and deleted it as I could not find that."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1447600515, "post_id": 33675281, "comment_id": 55212272, "body": "@NathanOliver: It may or may not be, depending on the reading of 24.2.1/5. I do not have the time right now to go and re-check the Standard for further indication of how it should be read though."}], "tags": [], "owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "is_accepted": true, "score": 13, "last_activity_date": 1447589836, "last_edit_date": 1592644375, "creation_date": 1447342602, "answer_id": 33675281, "question_id": 33657050, "link": "https://stackoverflow.com/questions/33657050/are-end1-iterators-for-stdstring-allowed/33675281#33675281", "title": "Are end+1 iterators for std::string allowed?", "body": "<p><strong>TL;DR:</strong> <code>s.end() + 1</code> is undefined behavior.</p>\n<hr />\n<p><code>std::string</code> is a strange beast, mainly for historical reasons:</p>\n<ol>\n<li>It attempts to bring C compatibility, where it is known that an additional <code>\\0</code> character exists beyond the length reported by <code>strlen</code>.</li>\n<li>It was designed with an index-based interface.</li>\n<li>As an after thought, when merged in the Standard library with the rest of the STL code, an iterator-based interface was added.</li>\n</ol>\n<p>This led <code>std::string</code>, in C++03, to number <a href=\"http://www.gotw.ca/gotw/084.htm\" rel=\"nofollow noreferrer\">103 member functions</a>, and since then a few were added.</p>\n<p>Therefore, discrepancies between the different methods should be expected.</p>\n<hr />\n<p>Already in the index-based interface discrepancies appear:</p>\n<blockquote>\n<p><strong>\u00a721.4.5 [string.access]</strong></p>\n<p><code>const_reference operator[](size_type pos) const;</code><br />\n<code>reference       operator[](size_type pos);</code></p>\n<p><strong>1/</strong> <em>Requires:</em> <code>pos &lt;= size()</code></p>\n<p><code>const_reference at(size_type pos) const;</code>\n<code>reference       at(size_type pos);</code></p>\n<p><strong>5/</strong> <em>Throws:</em> <code>out_of_range</code> if <code>pos &gt;= size()</code></p>\n</blockquote>\n<p>Yes, you read this right, <code>s[s.size()]</code> returns a reference to a NUL character while <code>s.at(s.size())</code> throws an <code>out_of_range</code> exception. If anyone tells you to replace all uses of <code>operator[]</code> by <code>at</code> because they are safer, beware the <code>string</code> trap...</p>\n<hr />\n<p>So, what about iterators?</p>\n<blockquote>\n<p><strong>\u00a721.4.3 [string.iterators]</strong></p>\n<p><code>iterator       end() noexcept;</code><br />\n<code>const_iterator end() const noexcept;</code><br />\n<code>const_iterator cend() const noexcept;</code></p>\n<p><strong>2/</strong> <em>Returns:</em> An iterator which is the <em>past-the-end</em> value.</p>\n</blockquote>\n<p>Wonderfully bland.</p>\n<p>So we have to refer to other paragraphs. A pointer is offered by</p>\n<blockquote>\n<p><strong>\u00a721.4 [basic.string]</strong></p>\n<p><strong>3/</strong> The iterators supported by <code>basic_string</code> are random access iterators (24.2.7).</p>\n</blockquote>\n<p>while <strong>\u00a717.6 [requirements]</strong> seems devoid of anything related. Thus, strings iterators are just plain old iterators (you can probably sense where this is going... but since we came this far let's go all the way).</p>\n<p>This leads us to:</p>\n<blockquote>\n<p><strong>24.2.1 [iterator.requirements.general]</strong></p>\n<p><strong>5/</strong> Just as a regular pointer to an array guarantees that there is a pointer value pointing past the last element of the array, so for any iterator type there is an iterator value that points past the last element of a corresponding sequence. These values are called <em>past-the-end</em> values. Values of an iterator <code>i</code> for which the expression <code>*i</code> is defined are called dereferenceable. The library never assumes that <em>past-the-end</em> values are dereferenceable. [...]</p>\n</blockquote>\n<p>So, <code>*s.end()</code> is ill-formed.</p>\n<blockquote>\n<p><strong>24.2.3 [input.iterators]</strong></p>\n<p><strong>2/</strong> Table 107 -- Input iterator requirements (in addition to Iterator)</p>\n</blockquote>\n<p>List for pre-condition to <code>++r</code> and <code>r++</code> that <code>r</code> be dereferencable.</p>\n<p>Neither the Forward iterators, Bidirectional iterators nor Random iterator lift this restriction (and all indicate they inherit the restrictions of their predecessor).</p>\n<p>Also, for completeness, in <strong>24.2.7 [random.access.iterators]</strong>, <em>Table 111 -- Random access iterator requirements (in addition to bidirectional iterator)</em> lists the following operational semantics:</p>\n<ul>\n<li><code>r += n</code> is equivalent to [inc|dec]rememting <code>r</code> <code>n</code> times</li>\n<li><code>a + n</code> and <code>n + a</code> are equivalent to copying <code>a</code> and then applying <code>+= n</code> to the copy</li>\n</ul>\n<p>and similarly for <code>-= n</code> and <code>- n</code>.</p>\n<p><strong>Thus <code>s.end() + 1</code> is undefined behavior.</strong></p>\n"}, {"tags": [], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "is_accepted": false, "score": 1, "last_activity_date": 1615498754, "creation_date": 1615498754, "answer_id": 66590923, "question_id": 33657050, "link": "https://stackoverflow.com/questions/33657050/are-end1-iterators-for-stdstring-allowed/66590923#66590923", "title": "Are end+1 iterators for std::string allowed?", "body": "<p>I can't find a definitive answer, but indirect evidence points at <code>end()+1</code> being undefined.</p>\n<blockquote>\n<h3><a href=\"http://eel.is/c++draft/basic.string#string.insert-15\" rel=\"nofollow noreferrer\"><code>[string.insert]/15</code></a></h3>\n<p><code>constexpr iterator insert(const_iterator p, charT c);</code><br>\nPreconditions: <code>p</code> is a valid iterator on <code>*this</code>.</p>\n</blockquote>\n<p>It would be unreasonable to expect this to work with <code>end()+1</code> as the iterator, and it indeed causes a crash on both libstdc++ and libc++.</p>\n<p>This means <code>end()+1</code> is not a valid iterator, meaning <code>end()</code> is not incrementable.</p>\n"}], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1587, "favorite_count": 5, "accepted_answer_id": 33675281, "answer_count": 4, "score": 24, "last_activity_date": 1615498754, "creation_date": 1447265446, "last_edit_date": 1495540415, "question_id": 33657050, "link": "https://stackoverflow.com/questions/33657050/are-end1-iterators-for-stdstring-allowed", "title": "Are end+1 iterators for std::string allowed?", "body": "<p>Is it valid to create an iterator to <code>end(str)+1</code> for <code>std::string</code>?<br>\nAnd if it isn't, <em>why</em> isn't it?</p>\n\n<p>This question is restricted to C++11 and later, because while pre-C++11 the data was already stored in a continuous block in any but rare POC toy-implementations,  the data didn't <em>have</em> to be stored that way.<br>\nAnd I think that might make all the difference.</p>\n\n<p>The significant difference between <code>std::string</code> and any other standard container I speculate on is that it always contains one element more than its <code>size</code>, the zero-terminator, to fulfill the requirements of <code>.c_str()</code>.</p>\n\n<blockquote>\n  <h3>21.4.7.1 basic_string accessors <em>[string.accessors]</em></h3>\n\n<pre><code>const charT* c_str() const noexcept;\nconst charT* data() const noexcept;\n</code></pre>\n  \n  <p>1 Returns: A pointer <code>p</code> such that <code>p + i == &amp;operator[](i)</code> for each <code>i</code> in <code>[0,size()]</code>.<br>\n  2 Complexity: Constant time.<br>\n  3 Requires: The program shall not alter any of the values stored in the character array.</p>\n</blockquote>\n\n<p>Still, even though it <em>should</em> imho guarantee that said expression is valid, for consistency and interoperability with zero-terminated strings if nothing else, the only paragraph I found casts doubt on that:</p>\n\n<blockquote>\n  <h3>21.4.1 basic_string general requirements <em>[string.require]</em></h3>\n  \n  <p>4 The char-like objects in a <code>basic_string</code> object shall be stored contiguously. That is, for any <code>basic_string</code> object <code>s</code>, the identity <code>&amp;*(s.begin() + n) == &amp;*s.begin() + n</code> shall hold for all values of <code>n</code> such that <code>0 &lt;= n &lt; s.size()</code>.</p>\n</blockquote>\n\n<p>(All quotes are from C++14 final draft (n3936).)</p>\n\n<p>Related: <a href=\"https://stackoverflow.com/questions/12740403/legal-to-overwrite-stdstrings-null-terminator\">Legal to overwrite std::string&#39;s null terminator?</a></p>\n"}, {"tags": ["c++", "opengl", "glut", "coordinate-transformation"], "comments": [{"owner": {"reputation": 1591, "user_id": 5397699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fy8CM.png?s=128&g=1", "display_name": "decltype_auto", "link": "https://stackoverflow.com/users/5397699/decltype-auto"}, "edited": false, "score": 0, "creation_date": 1447279914, "post_id": 33657023, "comment_id": 55095161, "body": "Welcome to SO! Your projectionM should map the frustum (left,right,top,bottom,near,far) to [-1,1]x[-1,1]x[-1,1]. Now look at the value domain of projectionM*world_vector, if projectionM = diag(1,1,1,1). You may also find <a href=\"http://www.songho.ca/opengl/gl_projectionmatrix.html\" rel=\"nofollow noreferrer\">SongHo&#39;s Projection Matrix article</a> useful."}, {"owner": {"reputation": 39, "user_id": 5549961, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-N9n9u2HMack/AAAAAAAAAAI/AAAAAAAAABs/9gsncbQAzow/photo.jpg?sz=128", "display_name": "FranSto", "link": "https://stackoverflow.com/users/5549961/fransto"}, "reply_to_user": {"reputation": 1591, "user_id": 5397699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fy8CM.png?s=128&g=1", "display_name": "decltype_auto", "link": "https://stackoverflow.com/users/5397699/decltype-auto"}, "edited": false, "score": 0, "creation_date": 1447324871, "post_id": 33657023, "comment_id": 55111993, "body": "Thanks for the answer. Debuging the program,  I can see that my projectionM 4x4 matrix value is the identity matrix. The same as the modelviewM 4x4 matrix. I&#39;m using glOrtho() instead of glFrustum()."}, {"owner": {"reputation": 1591, "user_id": 5397699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fy8CM.png?s=128&g=1", "display_name": "decltype_auto", "link": "https://stackoverflow.com/users/5397699/decltype-auto"}, "edited": false, "score": 0, "creation_date": 1447334266, "post_id": 33657023, "comment_id": 55117354, "body": "The point is not whether it&#39;s a frustum or a cube; the point is that you don&#39;t it map to [-1,1]x[-1,1]x[-1,1] with an identity projection matrix.  Just read the article I pointed you to."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 5549961, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-N9n9u2HMack/AAAAAAAAAAI/AAAAAAAAABs/9gsncbQAzow/photo.jpg?sz=128", "display_name": "FranSto", "link": "https://stackoverflow.com/users/5549961/fransto"}, "edited": false, "score": 0, "creation_date": 1447321376, "post_id": 33661135, "comment_id": 55109687, "body": "Thanks for the answer. I&#39;ve tried your code and it still doesn&#39;t work.  Now values for posX, posY and posZ are -1.001386..., -1.002770... and -1.0 respectively.  Actually I don&#39;t understand your explanation entirely. According to the <a href=\"https://www.opengl.org/sdk/docs/man2/xhtml/gluUnProject.xml\" rel=\"nofollow noreferrer\">documentation</a>, <i>gluUnProject</i> function accepts values between (0&#39;0 .. window_width) for winX and (0&#39;0 .. window_height) for winY.  Anyway, could you explain why do you do those operations to the first 2 parameters of <i>gluUnProject</i>?"}], "tags": [], "owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "is_accepted": false, "score": 0, "last_activity_date": 1447281234, "creation_date": 1447281234, "answer_id": 33661135, "question_id": 33657023, "link": "https://stackoverflow.com/questions/33657023/why-does-glunproject-return-1-0/33661135#33661135", "title": "Why does glUnProject(...) return -1.0?", "body": "<p>Offhand, I believe the <code>gluUnProject</code> function accepts values in the range -1..+1, not 0..width and 0..height.  So,</p>\n\n<pre><code>gluUnProject(\n    ((double) winX + 0.5) / (double) width * 2.0 - 1.0,\n    ((double) winY + 0.5) / (double) height * 2.0 - 1.0,\n    winZ,\n    modelviewM,\n    projectionM,\n    viewportA,\n    &amp;posX, &amp;posY, &amp;posZ);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 5549961, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-N9n9u2HMack/AAAAAAAAAAI/AAAAAAAAABs/9gsncbQAzow/photo.jpg?sz=128", "display_name": "FranSto", "link": "https://stackoverflow.com/users/5549961/fransto"}, "is_accepted": false, "score": 0, "last_activity_date": 1447330537, "creation_date": 1447330537, "answer_id": 33671200, "question_id": 33657023, "link": "https://stackoverflow.com/questions/33657023/why-does-glunproject-return-1-0/33671200#33671200", "title": "Why does glUnProject(...) return -1.0?", "body": "<p>PROBLEM SOLVED: my silly mistake was that I was calling gluUnProject() in the main() function.<br>\nI've replace it just after winZ assignation, in the mouseMove() function.<br>\nIt works!<br>\nThe only doubt I have now is why posZ value doesn't change. I'm using<br>\n<code>glReadPixels(int (winX), int(winY), 1, 1, GL_DEPTH_COMPONENT, GL_FLOAT, &amp;winZ);</code><br>\nto get winZ value.</p>\n"}], "owner": {"reputation": 39, "user_id": 5549961, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-N9n9u2HMack/AAAAAAAAAAI/AAAAAAAAABs/9gsncbQAzow/photo.jpg?sz=128", "display_name": "FranSto", "link": "https://stackoverflow.com/users/5549961/fransto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1447330537, "creation_date": 1447265366, "last_edit_date": 1447280572, "question_id": 33657023, "link": "https://stackoverflow.com/questions/33657023/why-does-glunproject-return-1-0", "title": "Why does glUnProject(...) return -1.0?", "body": "<p>I'm just trying to transform window coordinates to object coordinates in OpenGL using gluUnproject().  </p>\n\n<p>I catch the X and Y coordinates (winX and winY) of the glut window correctly using:</p>\n\n<pre><code>glutPassiveMotionFunc(mouseMove);\n</code></pre>\n\n<p>and then I set winZ using</p>\n\n<pre><code>glReadPixels(int (winX), int(winY), 1, 1, GL_DEPTH_COMPONENT, GL_FLOAT, &amp;winZ)\n</code></pre>\n\n<p>Then I set posX, posY and posZ (object coordinates) using</p>\n\n<pre><code>gluUnProject(winX, winY, winZ, modelviewM, projectionM, viewportA, &amp;posX, &amp;posY, &amp;posZ);\n</code></pre>\n\n<p>from:</p>\n\n<pre><code>glGetDoublev(GL_MODELVIEW_MATRIX, modelviewM);\nglGetDoublev(GL_PROJECTION_MATRIX, projectionM);\nglGetIntegerv(GL_VIEWPORT, viewportA);\n</code></pre>\n\n<p>I don't change any matrix value at any moment.\nThe problem is that the return values of gluUnProject for posX, posY and posZ are all -1.0  </p>\n\n<p>In adition, I should say that modelviewM and projectionM values are the identity matrix and viewportA value is (0, 0, 1440, 720)  </p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c++", "recursion", "big-o"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1447265324, "post_id": 33656996, "comment_id": 55087236, "body": "Nopy, first your approach. And &quot;I want the answer with explanation&quot; sounds rude. Watch your language."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 1, "creation_date": 1447265538, "post_id": 33656996, "comment_id": 55087356, "body": "Your title says \u201cBig O\u201d but in your text, you are using a lower-case \u201co\u201d. Note that <a href=\"https://en.wikipedia.org/wiki/Big_O_notation#Related_asymptotic_notations\" rel=\"nofollow noreferrer\">these mean different things</a>, so please be precise. Also, <code>do</code> is a keyword in C++ introducing a loop. It would be clearer if you&#39;d write <code>do_something()</code> instead."}, {"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 1, "creation_date": 1447266349, "post_id": 33656996, "comment_id": 55087867, "body": "Impressive how you were even too lazy to sensibly format the code."}, {"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 0, "creation_date": 1447266528, "post_id": 33656996, "comment_id": 55087985, "body": "The answer is O(n^2) <b>unless</b> the <code>something</code> in <code>do something</code> is not O(1)."}], "answers": [{"comments": [{"owner": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "edited": false, "score": 0, "creation_date": 1447266957, "post_id": 33657392, "comment_id": 55088286, "body": "this recursion reminds me of a double nested for loop, anyway you can verify that indeed it is O(n^2) by drawing the recursion tree, or you can just say that the function does linear work and its called n times which leads to o(n^2) . Great answer, upvoted."}], "tags": [], "owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "is_accepted": false, "score": 2, "last_activity_date": 1447266609, "creation_date": 1447266609, "answer_id": 33657392, "question_id": 33656996, "link": "https://stackoverflow.com/questions/33656996/determining-complexity-for-functions-big-o-notation/33657392#33657392", "title": "Determining complexity for functions (Big O notation)", "body": "<p>Denote by <code>R(n)</code> the execution time of this recursive function for input <code>n</code>. Then, if <code>n</code> is greater than 0, it does the following:</p>\n\n<ul>\n<li><code>n</code> times <code>do something</code> - assuming the \"something\" has constant runnning time, it consumes <code>c1*n</code> time</li>\n<li>Various checks and bookkeeping work - constant time <code>c2</code></li>\n<li>Calculating for input <code>n-1</code> - once. The running time of this is <code>R(n-1)</code> (by definition)</li>\n</ul>\n\n<p>So</p>\n\n<pre><code>R(n) = c1*n + c2 + R(n-1)\n</code></pre>\n\n<p>This equation has a solution, which is <code>O(n^2)</code>. You can prove it by induction, or just by guessing a solution in the form <code>a*n^2 + b*n + c</code>.</p>\n\n<p>Note: I assumed that \"do something\" has constant run time. This seems reasonable. However, if it's not true (e.g. it contains a recursive call), your complexity is going to be greater - maybe much greater, depending on what the \"something\" is doing.</p>\n"}, {"tags": [], "owner": {"reputation": 2480, "user_id": 1561081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/acd9e93464c089acdf36bf1d8ce793c9?s=128&d=identicon&r=PG", "display_name": "lrleon", "link": "https://stackoverflow.com/users/1561081/lrleon"}, "is_accepted": false, "score": 3, "last_activity_date": 1447266903, "creation_date": 1447266903, "answer_id": 33657483, "question_id": 33656996, "link": "https://stackoverflow.com/questions/33656996/determining-complexity-for-functions-big-o-notation/33657483#33657483", "title": "Determining complexity for functions (Big O notation)", "body": "<p>First I put your code with another indentation</p>\n\n<pre><code>int recursiveFun1(int n)\n{  \n  for(i=0;i&lt;n;i+=1) // this is bounded by O(n)\n    do something; // I assume this part is O(1)\n\n  if (n &lt;= 0)\n    return 1;\n  else\n    return 1 + recursiveFun1(n-1);\n}\n</code></pre>\n\n<p>The first thing to say is that each time <code>recursiveFun1()</code> is called <code>O(n)</code> is payed due to the <code>for</code>. Although <code>n</code> decreases at each call, the time is still bounded by <code>O(n)</code>.</p>\n\n<p>The second thing is to count how many times <code>recursiveFun1()</code> would be called. Clearly (for me) it will be called exactly <code>n + 1</code> times, until the parameter <code>n</code> reaches the zero value.</p>\n\n<p>So the time is <code>n + (n-1) + (n - 2) + ... + 1 + 0</code> which is <code>((n+1)n)/2</code> which is <code>O(n^2)</code>.</p>\n"}], "owner": {"reputation": 43, "user_id": 5551694, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7459dfa3ef0300d15b9943b2a17cb6fb?s=128&d=identicon&r=PG&f=1", "display_name": "Manal", "link": "https://stackoverflow.com/users/5551694/manal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 592, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1447266903, "creation_date": 1447265284, "last_edit_date": 1447265670, "question_id": 33656996, "link": "https://stackoverflow.com/questions/33656996/determining-complexity-for-functions-big-o-notation", "title": "Determining complexity for functions (Big O notation)", "body": "<p>I've had this question in my midterm and I'm not sure of my answer, which was O(n^2) I want the answer with explanation , thank you . </p>\n\n<pre><code>int recursiveFun1(int n)\n{  for(i=0;i&lt;n;i+=1) \n      do something;                                                                 \n    if (n &lt;= 0)\n    return 1;\nelse\n    return 1 + recursiveFun1(n-1);}\n</code></pre>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 2, "creation_date": 1447265426, "post_id": 33656990, "comment_id": 55087291, "body": "<code>std::weak_ptr</code> is designed for this exact purpose."}, {"owner": {"reputation": 132, "user_id": 5339558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1740afc606f76a0a33ce457380b4ed59?s=128&d=identicon&r=PG&f=1", "display_name": "Shyamal Desai", "link": "https://stackoverflow.com/users/5339558/shyamal-desai"}, "edited": false, "score": 0, "creation_date": 1447265925, "post_id": 33656990, "comment_id": 55087604, "body": "Maintain a static counter that increments on construction (default, copy ...) and decrements on destruction. While calling from A, check the static counter on B. And that is what std::weak_ptr will do for you. If you are using c++ 98, use the boost weak_ptr."}], "answers": [{"comments": [{"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 0, "creation_date": 1447268757, "post_id": 33657093, "comment_id": 55089370, "body": "OP explained that this is part of a large application that already exists, and they are seeking a minimal, localized modification that fixes the issue."}, {"owner": {"reputation": 3301, "user_id": 234946, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6af8b76e0ae95edd533cf3a57e4294f8?s=128&d=identicon&r=PG", "display_name": "Olipro", "link": "https://stackoverflow.com/users/234946/olipro"}, "reply_to_user": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 0, "creation_date": 1447276856, "post_id": 33657093, "comment_id": 55093692, "body": "I know, I just prefer to point out that it might be worth spending the time refactoring it now to avoid more trouble down the line."}], "tags": [], "owner": {"reputation": 3301, "user_id": 234946, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6af8b76e0ae95edd533cf3a57e4294f8?s=128&d=identicon&r=PG", "display_name": "Olipro", "link": "https://stackoverflow.com/users/234946/olipro"}, "is_accepted": false, "score": 0, "last_activity_date": 1447266889, "last_edit_date": 1447266889, "creation_date": 1447265585, "answer_id": 33657093, "question_id": 33656990, "link": "https://stackoverflow.com/questions/33656990/c-pass-this-and-determine-when-it-is-destroyed-in-different-class/33657093#33657093", "title": "C++ pass this, and determine when it is destroyed in different class", "body": "<p>You should rethink your design. Why are you using heap allocation of objects when it would be perfectly acceptable in this situation to have them on stack? Why are you not using inheritance and having B inherit from A? This whole quandry goes away when you don't force yourself to do unnecessary things.</p>\n\n<p>If, for some reason you're <em>forced</em> to have have disparate heap-based objects then do something like wrap the allocated instance into a <code>unique_ptr&lt;&gt;</code> and pass the instance around or alternatively, as stated in Chad's answer, wrap it into a <code>shared_ptr&lt;&gt;</code> and maintain a <code>weak_ptr&lt;&gt;</code> reference for usage.</p>\n"}, {"comments": [{"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 0, "creation_date": 1447268405, "post_id": 33657340, "comment_id": 55089176, "body": "Nice pattern when starting writing such application from scratch. But I think the problem is that it requires lot of changes in the application, wherever a <code>B</code> is created or deleted, and as it seems to me, that is what the OP wants to avoid and rather looks for a localized modification. It would be perfect if you can extend the idea to show that it can be implemented with minimal modification to the original application."}], "tags": [], "owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "is_accepted": false, "score": 0, "last_activity_date": 1447266418, "creation_date": 1447266418, "answer_id": 33657340, "question_id": 33656990, "link": "https://stackoverflow.com/questions/33656990/c-pass-this-and-determine-when-it-is-destroyed-in-different-class/33657340#33657340", "title": "C++ pass this, and determine when it is destroyed in different class", "body": "<p>You can use <code>std::shared_ptr&lt;&gt;</code> in conjunction with <code>std::weak_ptr&lt;&gt;</code> to handle this.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\nusing namespace std;\n\nclass B;\n\nclass A\n{\nprivate:\n    std::weak_ptr&lt;B&gt; m_b;\n    int m_val;\n\npublic:\n    A(int val) : m_val(val) {}\n    int GetVal();\n    void RegisterB(std::shared_ptr&lt;B&gt; b) { m_b = b; }\n};\n\nclass B : public std::enable_shared_from_this&lt;B&gt;\n{\nprivate:\n    int m_val;\npublic:\n    B(int val) : m_val(val) {}\n    int GetVal() { return m_val; }\n    void RegisterWithA(A* a) { a-&gt;RegisterB(shared_from_this()); }\n};\n\nint A::GetVal()\n{\n      if(auto b = m_b.lock())\n      {\n         m_val = b-&gt;GetVal();\n      }\n\n   return m_val;\n}\n\nint main()\n{\n   auto a = std::make_shared&lt;A&gt;(-1);\n    auto b = std::make_shared&lt;B&gt;(1);\n\n    b-&gt;RegisterWithA(a.get());\n    b.reset();\n\n    int result = a-&gt;GetVal();\n    std::cout &lt;&lt; result &lt;&lt; '\\n';\n\n   return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1447270128, "last_edit_date": 1447270128, "creation_date": 1447269272, "answer_id": 33658133, "question_id": 33656990, "link": "https://stackoverflow.com/questions/33656990/c-pass-this-and-determine-when-it-is-destroyed-in-different-class/33658133#33658133", "title": "C++ pass this, and determine when it is destroyed in different class", "body": "<p>Unless the use of <code>weak_ptr</code> can be proven to be minimal and local to classes A and B (in that case it will be surely the recommended modification), it seems to me that a localized and minimal modification could be:</p>\n\n<ul>\n<li>add to <code>class A</code> some <code>unregisterB</code> method (sets <code>m_b</code> to null)</li>\n<li><p>maintain in <code>B</code> a set of <code>A</code> pointers. One sole pointer will do if the association is not many-to-one, that is, if an instance of B cannot be registered within many instances of <code>A</code>.</p></li>\n<li><p>In <code>B::~B</code>, call <code>unregisterB</code> on all the A's in the set.</p></li>\n<li>in <code>B::RegisterWithA</code>, add that instance (pointer) of <code>A</code> to the list.</li>\n</ul>\n\n<p>The advantage here is that no other modifications are required in the application, only in the classes A and B. </p>\n"}], "owner": {"reputation": 969, "user_id": 1156628, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/35042451d1258543dfedae152f7902b5?s=128&d=identicon&r=PG", "display_name": "lots_of_questions", "link": "https://stackoverflow.com/users/1156628/lots-of-questions"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1447270128, "creation_date": 1447265273, "question_id": 33656990, "link": "https://stackoverflow.com/questions/33656990/c-pass-this-and-determine-when-it-is-destroyed-in-different-class", "title": "C++ pass this, and determine when it is destroyed in different class", "body": "<p>I'm working on some code, which has a model similar to the following (it is a small part of a much larger application). In short, one of the classes (Class B) registers itself with another class (Class A) by passing this. Class B gets destroyed at some point in the larger application. Class A has a method invoked which depends on B and B is invoked after being destroyed (after doing a nullptr check). Rewriting this application to not have this pattern is not really an option. In A::GetVal() how do I correctly determine if B has already been destroyed? I can change the method signature for RegisterB(), but ultimately B needs to register itself with A and B can be destroyed at any time.</p>\n\n<p>Classes.h:</p>\n\n<pre><code>#ifndef CLASSES_H\n#define CLASSES_H\n#pragma once\n\n#include &lt;iostream&gt;\n\nclass B;\n\nclass A\n{\nprivate:\n    B* m_b;\n    int m_val;\n\npublic:\n    A(int val) : m_val(val) {}\n    int GetVal();\n    void RegisterB(B* b) { m_b = b; }\n};\n\nclass B\n{\nprivate:\n    int m_val;\npublic:\n    B(int val) : m_val(val) {}\n    int GetVal() { return m_val; }\n    void RegisterWithA(A* a) { a-&gt;RegisterB(this); }\n};\n\n#endif\n</code></pre>\n\n<p>Classes.cpp:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"Classes.h\"\n\nint A::GetVal()\n{\n    if (m_b != nullptr)\n    {\n        m_b-&gt;GetVal(); // How do I prevent this branch from getting called?\n    }\n    else\n    {\n        return -1;\n    }\n}\n</code></pre>\n\n<p>And main:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"Classes.h\"\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    A* a = new A(-1);\n    B* b = new B(1);\n\n    b-&gt;RegisterWithA(a);\n    delete b;\n\n    int result = a-&gt;GetVal();\n\n    delete a;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "pi"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1447265304, "post_id": 33656860, "comment_id": 55087222, "body": "Welcome to Stack Overflow! It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming.  Further reading: <b><a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a></b>"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5551710, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AMRywdrqL4U/AAAAAAAAAAI/AAAAAAAAAEA/riamdlVC5dA/photo.jpg?sz=128", "display_name": "Dongmin An", "link": "https://stackoverflow.com/users/5551710/dongmin-an"}, "edited": false, "score": 0, "creation_date": 1447333262, "post_id": 33657208, "comment_id": 55116730, "body": "sorry, what does &amp; do? I only know of &amp;&amp;. And does that mean i can&#39;t get more decimal values regardless of how many iterations?"}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "reply_to_user": {"reputation": 15, "user_id": 5551710, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AMRywdrqL4U/AAAAAAAAAAI/AAAAAAAAAEA/riamdlVC5dA/photo.jpg?sz=128", "display_name": "Dongmin An", "link": "https://stackoverflow.com/users/5551710/dongmin-an"}, "edited": false, "score": 0, "creation_date": 1447349398, "post_id": 33657208, "comment_id": 55128256, "body": "@IllorenzoAn - &amp; is <a href=\"http://en.wikipedia.org/wiki/Bitwise_operation#AND\" rel=\"nofollow noreferrer\">bitwise and</a>. With 64 bit doubles, 12 iterations with your formula is all the accuracy you can get. You&#39;d have to use some type of extended math (arrays) to get more digits."}, {"owner": {"reputation": 15, "user_id": 5551710, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AMRywdrqL4U/AAAAAAAAAAI/AAAAAAAAAEA/riamdlVC5dA/photo.jpg?sz=128", "display_name": "Dongmin An", "link": "https://stackoverflow.com/users/5551710/dongmin-an"}, "edited": false, "score": 0, "creation_date": 1447349533, "post_id": 33657208, "comment_id": 55128344, "body": "Ah okay that makes sense. Are there any individual libraries i can use? Or should i use arrays?"}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "reply_to_user": {"reputation": 15, "user_id": 5551710, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AMRywdrqL4U/AAAAAAAAAAI/AAAAAAAAAEA/riamdlVC5dA/photo.jpg?sz=128", "display_name": "Dongmin An", "link": "https://stackoverflow.com/users/5551710/dongmin-an"}, "edited": false, "score": 0, "creation_date": 1447350395, "post_id": 33657208, "comment_id": 55128865, "body": "I know of two big number libraries, but have&#39;t used either. <a href=\"http://gmplib.org\" rel=\"nofollow noreferrer\">gnu gmp</a> and <a href=\"http://apfloat.org/apfloat\" rel=\"nofollow noreferrer\">apfloat</a> ."}], "tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 0, "last_activity_date": 1447267510, "last_edit_date": 1447267510, "creation_date": 1447265998, "answer_id": 33657208, "question_id": 33656860, "link": "https://stackoverflow.com/questions/33656860/finding-pi-using-machins-formula-different-iterations-are-giving-same-result/33657208#33657208", "title": "finding pi - using Machin&#39;s formula. Different iterations are giving same result", "body": "<p>That method converges very quickly. You'll get more accuracy if you start with the smallest numbers first. Since 5^23 > 2^53 (the number of bits in the mantissa of a double), probably the maximum number of iterations is 12 (13 won't make any difference). You'll get more accuracy starting with the smaller numbers. The changed lines have comments:</p>\n\n<pre><code>double arctan_series(int x, double y)\n{\n    double pi = y;\n    double temp_Pi;\n    for (int i = 1, j = x*2-1; i &lt; x; i++, j -= 2) // changed this line\n    {\n        temp_Pi = pow(y, j) / j;\n        if ((j &amp; 2) != 0)    // changed this line\n        {\n            pi -= temp_Pi;\n        }\n        else\n        {\n            pi += temp_Pi;\n        }\n    }\n    pi = pi * 4;\n    return pi;\n}\n</code></pre>\n\n<p>For doubles, there is no point in setting precision > 18.</p>\n\n<p>If you want an alternative formula that takes more iterations to converge, use pi/4 = arc-tan(1/2) + arc-tan(1/3), which will take about 24 iterations.</p>\n"}, {"tags": [], "owner": {"reputation": 2630, "user_id": 5053331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d9a0047e09056279f06b7fb3b0c101e?s=128&d=identicon&r=PG&f=1", "display_name": "cdonat", "link": "https://stackoverflow.com/users/5053331/cdonat"}, "is_accepted": true, "score": 0, "last_activity_date": 1447267065, "creation_date": 1447267065, "answer_id": 33657520, "question_id": 33656860, "link": "https://stackoverflow.com/questions/33656860/finding-pi-using-machins-formula-different-iterations-are-giving-same-result/33657520#33657520", "title": "finding pi - using Machin&#39;s formula. Different iterations are giving same result", "body": "<p>I have not been able to reproduce your issue, but here is a bit cleaned up code with a few C++11 idioms and better variable names.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;math.h&gt;\n\nusing namespace std;\n\n// double arctan_series(int x, double y) // x is the # of iterations while y     is the number\n// then why not name the parameters accoringly? In math we usually use x for the parameter.\n// prefer C++11 and the auto notation wherever possible\nauto arctan_series(int iterations, double x) -&gt; double\n{\n    // note, that we don't need any temporaries here.\n\n    // note, that this loop will never run, when iterations = 1\n    // is that really what was intended?\n    for (int i = 1, j = 3; i &lt; iterations; i++, j += 2) \n    {\n        // declare variables as late as possible and always initialize them\n        auto t = pow(x, j) / j;\n        // in such simple cases I prefer ?: over if-else. Your milage may vary\n        x += (i % 2 != 0) ? -t : t;\n    }\n    return x * 4;\n}\n\n// double calculations(int x) // x is the # of iterations\n// then why not name the parameter accordingly\n// BTW rename the function to what it is supposed to do\nauto approximate_pi(int iterations) -&gt; double\n{\n    // we don't need all of these temporaries. Just write one expression.\n    return 4 * arctan_series(iterations, 0.2) - arctan_series(iterations, 1.0 / 239.0);\n}\n\nauto main(int, char**) -&gt; int\n{\n    cout &lt;&lt; \"Enter the number of iterations: \";\n    // in C++ you should declare variables as late as possible\n    // and always initialize them.\n    int iteration_num = 0;\n    cin &gt;&gt; iteration_num;\n\n    cout &lt;&lt; \"Pi has the value of: \"\n         &lt;&lt; setprecision(100) &lt;&lt; fixed\n         &lt;&lt; approximate_pi(iteration_num) &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>When you remove my explanatory comments, you'll see, that the resulting code is a lot more concise, easier to read, and therefore easier to maintain.</p>\n\n<p>I tried a bit:</p>\n\n<pre><code>Enter the number of iterations: 3\nPi has the value of: 3.1416210293250346197169164952356368303298950195312500000000000000000000000000000000000000000000000000\n\nEnter the number of iterations: 2\nPi has the value of: 3.1405970293260603298790556436870247125625610351562500000000000000000000000000000000000000000000000000\n\nEnter the number of iterations: 7\nPi has the value of: 3.1415926536235549981768144789384678006172180175781250000000000000000000000000000000000000000000000000\n\nEnter the number of iterations: 42\nPi has the value of: 3.1415926535897940041763831686694175004959106445312500000000000000000000000000000000000000000000000000\n</code></pre>\n\n<p>As you see, I obviously get different results for different numbers of iterations.</p>\n"}, {"tags": [], "owner": {"reputation": 2505, "user_id": 5552022, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/kDe2K.png?s=128&g=1", "display_name": "Omar Aflak", "link": "https://stackoverflow.com/users/5552022/omar-aflak"}, "is_accepted": false, "score": 0, "last_activity_date": 1447271768, "creation_date": 1447271768, "answer_id": 33658789, "question_id": 33656860, "link": "https://stackoverflow.com/questions/33656860/finding-pi-using-machins-formula-different-iterations-are-giving-same-result/33658789#33658789", "title": "finding pi - using Machin&#39;s formula. Different iterations are giving same result", "body": "<p>This is another way if some of you are interested. The loop calculates the integral of the function : <strong>sqrt(1-x\u00b2)</strong></p>\n\n<p>Which represents a semicircle of radius 1. Then we multiply by two the area. Finally we got the surface of the circle which is PI.</p>\n\n<pre><code>#include &lt;iomanip&gt;\n#include &lt;cmath&gt;\n\n#define f(x) sqrt(1-pow(x,2))\n\ndouble integral(int a, int b, int p)\n{\n    double d=pow(10, -p), s=0;\n    for (double x=a ; x+d&lt;=b ; x+=d)\n    {\n        s+=f(x)+f(x+d);\n    }\n    s*=d/2.0;\n    return s;\n}\n\nint main()\n{\n    cout &lt;&lt; \"PI=\" &lt;&lt; setprecision (9) &lt;&lt; 2.0*integral(-1,1,6) &lt;&lt; endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5551710, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AMRywdrqL4U/AAAAAAAAAAI/AAAAAAAAAEA/riamdlVC5dA/photo.jpg?sz=128", "display_name": "Dongmin An", "link": "https://stackoverflow.com/users/5551710/dongmin-an"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 33657520, "answer_count": 3, "score": 0, "last_activity_date": 1447271768, "creation_date": 1447264786, "last_edit_date": 1447266268, "question_id": 33656860, "link": "https://stackoverflow.com/questions/33656860/finding-pi-using-machins-formula-different-iterations-are-giving-same-result", "title": "finding pi - using Machin&#39;s formula. Different iterations are giving same result", "body": "<p>I've written a few programs to find pi, this one being the most advanced. I used Machin's formula, <code>pi/4 = 4(arc-tan(1/5)) - (arc-tan(1/239))</code>.</p>\n\n<p>The problem is that however many iterations I do, I get the same result, and I can't seem to understand why. </p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;math.h&gt;\nusing namespace std;\n\ndouble arctan_series(int x, double y) // x is the # of iterations while y     is the number\n{\n    double pi = y;\n    double temp_Pi;\n    for (int i = 1, j = 3; i &lt; x; i++, j += 2) \n    {\n        temp_Pi = pow(y, j) / j; //the actual value of the iteration\n        if (i % 2 != 0)     // for every odd iteration that subtracts\n        {\n            pi -= temp_Pi;\n        }\n        else    // for every even iteration that adds\n        {\n            pi += temp_Pi;\n        }\n    }\n    pi = pi * 4;\n    return pi;\n}\n\ndouble calculations(int x) // x is the # of iterations\n{\n    double value_1, value_2, answer;\n    value_1 = arctan_series(x, 0.2);\n    value_2 = arctan_series(x, 1.0 / 239.0);\n    answer = (4 * value_1) - (value_2);\n    return answer;\n}\n\nint main() \n{\n    double pi;\n    int iteration_num;\n    cout &lt;&lt; \"Enter the number of iterations: \";\n    cin &gt;&gt; iteration_num;\n    pi = calculations(iteration_num);\n    cout &lt;&lt; \"Pi has the value of: \" &lt;&lt; setprecision(100) &lt;&lt; fixed &lt;&lt; pi     &lt;&lt; endl;\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "clang", "code-formatting", "clang-format"], "comments": [{"owner": {"reputation": 6396, "user_id": 1547337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30232c3cb44ce35158a1f8f572180de9?s=128&d=identicon&r=PG", "display_name": "dejvuth", "link": "https://stackoverflow.com/users/1547337/dejvuth"}, "edited": false, "score": 1, "creation_date": 1450369819, "post_id": 33656800, "comment_id": 56420600, "body": "For your particular example, set <code>AllowShortFunctionsOnASingleLine: None</code> will work."}, {"owner": {"reputation": 6647, "user_id": 914991, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/639555fcf960b5e80617a10f479ea476?s=128&d=identicon&r=PG", "display_name": "zmb", "link": "https://stackoverflow.com/users/914991/zmb"}, "reply_to_user": {"reputation": 6396, "user_id": 1547337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30232c3cb44ce35158a1f8f572180de9?s=128&d=identicon&r=PG", "display_name": "dejvuth", "link": "https://stackoverflow.com/users/1547337/dejvuth"}, "edited": false, "score": 0, "creation_date": 1450370540, "post_id": 33656800, "comment_id": 56421083, "body": "Well that stops it from unwrapping <code>main</code> but I&#39;m more concerned about the vector initialization in general.  If the vector was initialized this way in another (longer) function, it would still get unwrapped."}, {"owner": {"reputation": 6647, "user_id": 914991, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/639555fcf960b5e80617a10f479ea476?s=128&d=identicon&r=PG", "display_name": "zmb", "link": "https://stackoverflow.com/users/914991/zmb"}, "reply_to_user": {"reputation": 6396, "user_id": 1547337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30232c3cb44ce35158a1f8f572180de9?s=128&d=identicon&r=PG", "display_name": "dejvuth", "link": "https://stackoverflow.com/users/1547337/dejvuth"}, "edited": false, "score": 0, "creation_date": 1450370772, "post_id": 33656800, "comment_id": 56421221, "body": "I&#39;m wondering if tweaking the various &quot;penalty&quot; options would help, but they all seem to be penalties associated with breaking lines, not &quot;unbreaking&quot; them."}, {"owner": {"reputation": 6396, "user_id": 1547337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30232c3cb44ce35158a1f8f572180de9?s=128&d=identicon&r=PG", "display_name": "dejvuth", "link": "https://stackoverflow.com/users/1547337/dejvuth"}, "edited": false, "score": 0, "creation_date": 1450387363, "post_id": 33656800, "comment_id": 56430495, "body": "Can you give an example where the above setting doesn&#39;t work as expected? The tool no longer shorten your functions, and should respect the column limit. The vector initialization should also work."}, {"owner": {"reputation": 6647, "user_id": 914991, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/639555fcf960b5e80617a10f479ea476?s=128&d=identicon&r=PG", "display_name": "zmb", "link": "https://stackoverflow.com/users/914991/zmb"}, "reply_to_user": {"reputation": 6396, "user_id": 1547337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30232c3cb44ce35158a1f8f572180de9?s=128&d=identicon&r=PG", "display_name": "dejvuth", "link": "https://stackoverflow.com/users/1547337/dejvuth"}, "edited": false, "score": 0, "creation_date": 1450388046, "post_id": 33656800, "comment_id": 56430865, "body": "I updated the example in the question.  With <code>AllowShortFunctionsOnASingleLine: None</code>, <code>main</code> is no longer unwrapped, but as you can see the vector initialization still gets messed up."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1450434651, "post_id": 33656800, "comment_id": 56448515, "body": "unrelated to your question, but the return statement could be more simply <code>return {&quot;this is a test&quot;, </code>..."}], "answers": [{"comments": [{"owner": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "edited": false, "score": 1, "creation_date": 1450370721, "post_id": 34339430, "comment_id": 56421194, "body": "He also wants to set <code>ColumnLimit</code> to 120?"}, {"owner": {"reputation": 6647, "user_id": 914991, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/639555fcf960b5e80617a10f479ea476?s=128&d=identicon&r=PG", "display_name": "zmb", "link": "https://stackoverflow.com/users/914991/zmb"}, "edited": false, "score": 2, "creation_date": 1450388182, "post_id": 34339430, "comment_id": 56430930, "body": "Right.  This preserves my wrapping but does nothing to fix lines that are too long (which is a major advantage of the tool, IMO)."}, {"owner": {"reputation": 33621, "user_id": 108802, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nABuD.jpg?s=128&g=1", "display_name": "Gauthier", "link": "https://stackoverflow.com/users/108802/gauthier"}, "edited": false, "score": 1, "creation_date": 1472804703, "post_id": 34339430, "comment_id": 65909270, "body": "This is a compromise, but a no-brainer for me. I&#39;m happy to let the programmers wrap at 100 manually, if clang-format does not mangle with the new lines in my array definitions, in my more complex <code>std::cout</code> expressions, my <code>enum</code>, my parameter lists, ..."}], "tags": [], "owner": {"reputation": 553, "user_id": 1736389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eadA5.png?s=128&g=1", "display_name": "Sam P", "link": "https://stackoverflow.com/users/1736389/sam-p"}, "is_accepted": false, "score": 10, "last_activity_date": 1450369210, "creation_date": 1450369210, "answer_id": 34339430, "question_id": 33656800, "link": "https://stackoverflow.com/questions/33656800/clang-format-line-breaks/34339430#34339430", "title": "Clang-format line breaks", "body": "<p>I didn't see anything currently in the <a href=\"http://clang.llvm.org/docs/ClangFormatStyleOptions.html\">documentation</a>  that would allow you to do that.</p>\n\n<p>Setting the ColumnLimit to 0 will still preserve the text wrapping.</p>\n\n<p><code>clang-format-mp-3.4 test.c -style=\"{ ColumnLimit: 0 }\"</code></p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;memory&gt;\n#include &lt;string&gt;\n\nint main() {\n  std::vector&lt;std::string&gt; vec = {\n    \"this is a test\",\n    \"with some strings\",\n    \"that I want on separate lines\"\n  };\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14124, "user_id": 3545094, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5105cb702f101f44d85e885bc61c8525?s=128&d=identicon&r=PG&f=1", "display_name": "Martin G", "link": "https://stackoverflow.com/users/3545094/martin-g"}, "edited": false, "score": 0, "creation_date": 1450434770, "post_id": 34353127, "comment_id": 56448601, "body": "I&#39;m not saying this is a bad answer but what an absolutely horrible solution to the problem. Clutter your code with comments to make the automatic formatting work."}, {"owner": {"reputation": 243, "user_id": 733200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b2ae6b4490408cf4d78dd754db204f0?s=128&d=identicon&r=PG", "display_name": "MattG", "link": "https://stackoverflow.com/users/733200/mattg"}, "reply_to_user": {"reputation": 14124, "user_id": 3545094, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5105cb702f101f44d85e885bc61c8525?s=128&d=identicon&r=PG&f=1", "display_name": "Martin G", "link": "https://stackoverflow.com/users/3545094/martin-g"}, "edited": false, "score": 0, "creation_date": 1450435118, "post_id": 34353127, "comment_id": 56448831, "body": "Perhaps, but in practice I&#39;ve used it rarely where I want to break the formatting rules.  I usually appreciate having an out like this, and don&#39;t appreciate it being abused by &#39;cluttering your code&#39;.  Using a tool badly is often on the user"}], "tags": [], "owner": {"reputation": 243, "user_id": 733200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b2ae6b4490408cf4d78dd754db204f0?s=128&d=identicon&r=PG", "display_name": "MattG", "link": "https://stackoverflow.com/users/733200/mattg"}, "is_accepted": false, "score": 18, "last_activity_date": 1450433572, "creation_date": 1450433572, "answer_id": 34353127, "question_id": 33656800, "link": "https://stackoverflow.com/questions/33656800/clang-format-line-breaks/34353127#34353127", "title": "Clang-format line breaks", "body": "<p>I'm not sure that you clang-format to do exactly what you want, but it is possible to tell clang-format to leave sections of code alone.  I use this for exactly the sort of scenario you're talking about, blocks of code where a very particular formatting makes it easier to read.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::vector&lt;std::string&gt; get_vec()\n{\n   // clang-format off\n   return std::vector&lt;std::string&gt; {\n      \"this is a test\",\n      \"some of the lines are longer\",\n      \"than other, but I would like\",\n      \"to keep them on separate lines\"\n   };\n   // clang-format on\n}\n</code></pre>\n\n<p>See:\n<a href=\"http://clang.llvm.org/docs/ClangFormatStyleOptions.html#disabling-formatting-on-a-piece-of-code\">http://clang.llvm.org/docs/ClangFormatStyleOptions.html#disabling-formatting-on-a-piece-of-code</a></p>\n"}, {"comments": [{"owner": {"reputation": 6647, "user_id": 914991, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/639555fcf960b5e80617a10f479ea476?s=128&d=identicon&r=PG", "display_name": "zmb", "link": "https://stackoverflow.com/users/914991/zmb"}, "edited": false, "score": 0, "creation_date": 1450466850, "post_id": 34362422, "comment_id": 56467431, "body": "Great answer.  Your suggestion seems a little bit better than <code>&#47;&#47; clang-format off</code>, and the explanation as to why it behaves this way makes a lot of sense."}, {"owner": {"reputation": 5683, "user_id": 61505, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6a78b84ea1ae9d44348db664828c800?s=128&d=identicon&r=PG", "display_name": "KindDragon", "link": "https://stackoverflow.com/users/61505/kinddragon"}, "edited": false, "score": 1, "creation_date": 1473266041, "post_id": 34362422, "comment_id": 66078260, "body": "ColumnLimit 0 still preserve the line breaks. How explain this?"}, {"owner": {"reputation": 4710, "user_id": 575699, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e1a4ea4bdacac927a748c281b613ce30?s=128&d=identicon&r=PG", "display_name": "qbolec", "link": "https://stackoverflow.com/users/575699/qbolec"}, "edited": false, "score": 1, "creation_date": 1553263679, "post_id": 34362422, "comment_id": 97331289, "body": "I had to adapt your technique as I was using a multiline <code>#define</code> macro. What did the trick was ending each line with ` /**/\\`"}], "tags": [], "owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "is_accepted": true, "score": 52, "last_activity_date": 1450465871, "creation_date": 1450465871, "answer_id": 34362422, "question_id": 33656800, "link": "https://stackoverflow.com/questions/33656800/clang-format-line-breaks/34362422#34362422", "title": "Clang-format line breaks", "body": "<p>So, having messed around in the clang format code and made some patches, here's my two cents:</p>\n\n<ul>\n<li><p>Clang format is based on,  </p>\n\n<ul>\n<li>parsing the AST using <code>libclang</code>, which basically eliminates all whitespace</li>\n<li>breaking up the token sequence into \"unwrapped lines\" which are like \"logical\" code lines</li>\n<li>Applying rules / configuration info to sometimes split up \"unwrapped lines\" into smaller units</li>\n<li>Spit it all back out again with new whitespace / indentation  </li>\n</ul>\n\n<p>It's not easy to make it respect the original whitepsace, that sort of gets tossed when you first parse the code.</p></li>\n<li><p>You can control where it places line breaks, most easily, by</p>\n\n<ul>\n<li>setting the column limit</li>\n<li>using the \"bin pack parameters\" options</li>\n<li>setting penalties for various kinds of breaks -- break after return type of a function, break before first call parameter, break a string literal, break a comment...</li>\n<li>placing comments at the end of a line (clang format cannot remove the comment and must therefore split the line)</li>\n<li>use the clang-format off / on directives</li>\n</ul></li>\n</ul>\n\n<p>Here's one thing you could try:</p>\n\n<pre><code>std::vector&lt;std::string&gt; get_vec()\n{\n   return std::vector&lt;std::string&gt; {   //\n      \"this is a test\",                //\n      \"some of the lines are longer\",  //\n      \"than other, but I would like\",  //\n      \"to keep them on separate lines\" //\n   };\n}\n</code></pre>\n\n<p>The advantage of this over <code>// clang-format off</code> is that, if you later change the tab width or some other option, those code lines will still get those formatting changes so you don't need to manually go into the <code>// clang-format off</code> regions to fix it. However it's still a bit of a hack, YMMV.</p>\n\n<p>Ultimately, <code>clang-format</code> is very much about imposing a uniform format over an entire code base, making sure that all string literals are formatted in the same style everywhere in your program. If you want to have micro-level control over line-break decisions, that's not really in the spirit of the tool, and you'll have to do things like disable it.</p>\n\n<p>This can sometimes be frustrating esp. when you want to do things with arrays and have columns aligned or something -- for instance, here's some natural code from lua C api:</p>\n\n<pre><code>static luaL_Reg const methods[] = {\n    {\"matches\",               &amp;dispatch::intf_match_unit},\n    {\"to_recall\",             &amp;dispatch::intf_put_recall_unit},\n    {\"to_map\",                &amp;dispatch::intf_put_unit},\n    {\"erase\",                 &amp;dispatch::intf_erase_unit},\n    {\"clone\",                 intf_copy_unit},\n    {\"extract\",               &amp;dispatch::intf_extract_unit},\n    {\"advance\",               intf_advance_unit},\n};\n</code></pre>\n\n<p>When clang-format runs over that, it's generally not going to align the right column, its going to place it a fixed number of spaces after the commas and there's not much you can do about it afaik.</p>\n\n<p>Or, if you have 4 x 4 matrix for use with OpenGL:</p>\n\n<pre><code>      constexpr float shadow_skew_hardcoded[16] =\n        { 1.0f, 0.0f, 0.0f, 0.0f,\n          0.5f, 0.5f, 0.0f, 0.0f,\n          0.0f, 0.0f, 1.0f, 0.0f,\n          0.0f, 0.0f, 0.0f, 1.0f };\n</code></pre>\n\n<p>If you let clang-format run over things like this it's just going to mangle them, and afaik there's no easy way to make it format them nicely, so you just have to resort either to the \"lots of trivial comments\" hack, or use clang-format off when you have something like this. These are just intrinsic limitations of the tool. If you aren't happy ever to have to do things like that then it's probably not the tool for you.</p>\n"}, {"comments": [{"owner": {"reputation": 1095, "user_id": 13501674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c01e5dc07ebbf5f191d177303accdf?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Backus", "link": "https://stackoverflow.com/users/13501674/eric-backus"}, "edited": false, "score": 3, "creation_date": 1596834967, "post_id": 56356318, "comment_id": 111948778, "body": "I like it, but this is very non-obvious to me. Why does it work? Is there a style option that controls it?"}, {"owner": {"reputation": 56, "user_id": 9342842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a601d28c3a9f44af4bbe85fe8848b2b8?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Weissnicht", "link": "https://stackoverflow.com/users/9342842/alex-weissnicht"}, "edited": false, "score": 1, "creation_date": 1616088323, "post_id": 56356318, "comment_id": 117900370, "body": "Trailing commas in enums do the same trick"}], "tags": [], "owner": {"reputation": 2857, "user_id": 997527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8d85e69468a00b418516425577e313d0?s=128&d=identicon&r=PG", "display_name": "Mac", "link": "https://stackoverflow.com/users/997527/mac"}, "is_accepted": false, "score": 14, "last_activity_date": 1559118971, "creation_date": 1559118971, "answer_id": 56356318, "question_id": 33656800, "link": "https://stackoverflow.com/questions/33656800/clang-format-line-breaks/56356318#56356318", "title": "Clang-format line breaks", "body": "<p>Add a comma after the last string. This tells clang-format to format it vertically. Ex:\n<a href=\"https://godbolt.org/z/bZxr__\" rel=\"noreferrer\">https://godbolt.org/z/bZxr__</a> Right click > format text</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n\nstd::vector&lt;std::string&gt; get_vec() {\n  return std::vector&lt;std::string&gt;{\n      \"this is a test\",\n      \"some of the lines are longer\",\n      \"than other, but I would like\",\n      \"to keep them on separate lines\", // comma here after last element\n  };\n}\n\nint main() { auto vec = get_vec(); }\n</code></pre>\n"}], "owner": {"reputation": 6647, "user_id": 914991, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/639555fcf960b5e80617a10f479ea476?s=128&d=identicon&r=PG", "display_name": "zmb", "link": "https://stackoverflow.com/users/914991/zmb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19214, "favorite_count": 14, "accepted_answer_id": 34362422, "answer_count": 4, "score": 63, "last_activity_date": 1608387976, "creation_date": 1447264608, "last_edit_date": 1452789923, "question_id": 33656800, "link": "https://stackoverflow.com/questions/33656800/clang-format-line-breaks", "title": "Clang-format line breaks", "body": "<p>I'm looking for a <code>clang-format</code> setting to prevent the tool from removing line breaks.</p>\n\n<p>For example, I have my <code>ColumnLimit</code> set to 120, and here's what happens when I reformat some sample code.</p>\n\n<p>Before:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;string&gt;\n\nstd::vector&lt;std::string&gt; get_vec()\n{\n   return std::vector&lt;std::string&gt; {\n      \"this is a test\",\n      \"some of the lines are longer\",\n      \"than other, but I would like\",\n      \"to keep them on separate lines\"\n   };\n}\n\nint main()\n{\n   auto vec = get_vec();\n}\n</code></pre>\n\n<p>After:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;string&gt;\n\nstd::vector&lt;std::string&gt; get_vec()\n{\n   return std::vector&lt;std::string&gt;{\"this is a test\", \"some of the lines are longer\", \"than other, but I would like\",\n         \"to keep them on separate lines\"};\n}\n\nint main()\n{\n   auto vec = get_vec();\n}\n</code></pre>\n\n<p>What I would like is that the tool breaks lines that are over 120 characters, but doesn't decide to combine lines just because they are less than 120 characters.</p>\n\n<p>Is there such an option?  Nothing in the docs stood out to me.</p>\n"}, {"tags": ["c++", "c++11", "g++", "language-lawyer"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1447264620, "post_id": 33656742, "comment_id": 55086812, "body": "Maybe they implemented those warnings while implementing <code>nullptr</code> and <code>std::nullptr_t</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 2487, "user_id": 5380314, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8924d6d1c2470b1d7c8190dc37ef517c?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Nasonov", "link": "https://stackoverflow.com/users/5380314/andrey-nasonov"}, "edited": false, "score": 0, "creation_date": 1447265151, "post_id": 33656869, "comment_id": 55087128, "body": "I found the answer in the section &quot;Proposed resolution (October, 2012):&quot;, paragraph 1: &quot;A null pointer constant is an <b>integer literal</b> (2.13.2 [lex.icon]) with value zero or a prvalue of type std::nullptr_t.&quot;."}, {"owner": {"reputation": 2487, "user_id": 5380314, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8924d6d1c2470b1d7c8190dc37ef517c?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Nasonov", "link": "https://stackoverflow.com/users/5380314/andrey-nasonov"}, "edited": false, "score": 0, "creation_date": 1447265512, "post_id": 33656869, "comment_id": 55087341, "body": "I see. But even g++ 4.7 (the first version that supports -std=c++11) shows an error. clang: 3.0 -&gt; ok, 3.2, 3.3 -&gt; warning, 3.4+ -&gt; error. Seems the compilers apply the C++14 rules in C++11 mode."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1447265619, "post_id": 33656869, "comment_id": 55087408, "body": "Looking at your C++03 quote, wasn&#39;t <code>v</code> already not an rvalue in that standard? I may be misreading, but I&#39;m not seeing the difference between C++03 and C++11. Is there some part of the standard that says the lvalue-to-rvalue conversion gets applied in C++03 before the expression gets considered as a null pointer constant, and it gets applied in C++11 only afterwards? Or am I just missing the point? (Agreed by the way that the C++14 rule makes sense. :))"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 2487, "user_id": 5380314, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8924d6d1c2470b1d7c8190dc37ef517c?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Nasonov", "link": "https://stackoverflow.com/users/5380314/andrey-nasonov"}, "edited": false, "score": 0, "creation_date": 1447266196, "post_id": 33656869, "comment_id": 55087771, "body": "@AndreyNasonov, DR 903 is &quot;DR&quot; status, meaning it is considered a bug fix for the published standard not just a change to be made in the next standard. Typically compilers apply DRs for older language dialects, as you see in this case."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1447266299, "post_id": 33656869, "comment_id": 55087837, "body": "@hvd, I&#39;m not sure, there might have been a change the the definition of integral constant expression that made a difference, but I&#39;m just guessing (I haven&#39;t tried to find the reasons)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 1, "creation_date": 1447266867, "post_id": 33656869, "comment_id": 55088231, "body": "@JonathanWakely Heh, looking at GCC&#39;s bug about it (<a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=52145\" rel=\"nofollow noreferrer\">PR52145</a> -- by your own comment there), and at GCC&#39;s source code (<code>gcc&#47;cp&#47;call.c</code>, specifically the <code>null_ptr_cst_p</code> function), I guess there really isn&#39;t any difference between the C++03 and the C++11 wording, it&#39;s just that the DR is taken to apply to C++11 as well. Which I guess would mean that if in the future <code>+v</code> no longer gets treated as a null pointer constant, it gets rejected in C++11 mode as well as C++14 mode."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1494003191, "post_id": 33656869, "comment_id": 74659433, "body": "You mean I can&#39;t use <code>&#39;-&#39;-&#39;-&#39;</code> as a null pointer constant anymore?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1494105305, "post_id": 33656869, "comment_id": 74688899, "body": "@hvd: There&#39;s some question whether the DR applies to C++11. <a href=\"http://open-std.org/JTC1/SC22/WG21/docs/cwg_defects.html\" rel=\"nofollow noreferrer\">open-std.org/JTC1/SC22/WG21/docs/cwg_defects.html</a> says: &quot;Issues with DR, accepted, DRWP, and WP status are NOT part of the International Standard for C++.&quot; I submitted a gcc bug report: <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=80648\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=80648</a>"}], "tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": true, "score": 11, "last_activity_date": 1447265241, "last_edit_date": 1447265241, "creation_date": 1447264828, "answer_id": 33656869, "question_id": 33656742, "link": "https://stackoverflow.com/questions/33656742/c11-backwards-compatibility-conversion-of-null-integer-constant-to-pointer/33656869#33656869", "title": "C++11 backwards compatibility (conversion of null integer constant to pointer)", "body": "<p>GCC and Clang behave differently with <code>-std=c++11</code> because C++11 changed the definition of a null pointer constant, and then C++14 changed it again, see Core <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#903\" rel=\"noreferrer\">DR 903</a> which changed the rules in C++14 so that only literals are null pointer constants.</p>\n\n<p>In C++03 4.10 [conv.ptr] said:</p>\n\n<blockquote>\n  <p>A null pointer constant is an integral constant expression (5.19) rvalue of integer type that evaluates to zero.</p>\n</blockquote>\n\n<p>That allows all sorts of of expressions, as long as they are constant and evaluate to zero. Enumerations, <code>false</code>, <code>(5 - 5)</code> etc. etc. ... this used to cause lots of problems in C++03 code.</p>\n\n<p>In C++11 it says:</p>\n\n<blockquote>\n  <p>A null pointer constant is an integral constant expression (5.19) prvalue of integer type that evaluates to zero or a prvalue of type <code>std::nullptr_t</code>.</p>\n</blockquote>\n\n<p>And in C++14 it says:</p>\n\n<blockquote>\n  <p>A null pointer constant is an integer literal (2.14.2) with value zero or a prvalue of type <code>std::nullptr_t</code>.</p>\n</blockquote>\n\n<p>This is a much more restrictive rule, and makes far more sense.</p>\n"}], "owner": {"reputation": 2487, "user_id": 5380314, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8924d6d1c2470b1d7c8190dc37ef517c?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Nasonov", "link": "https://stackoverflow.com/users/5380314/andrey-nasonov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 612, "favorite_count": 0, "accepted_answer_id": 33656869, "answer_count": 1, "score": 10, "last_activity_date": 1447265241, "creation_date": 1447264386, "question_id": 33656742, "link": "https://stackoverflow.com/questions/33656742/c11-backwards-compatibility-conversion-of-null-integer-constant-to-pointer", "title": "C++11 backwards compatibility (conversion of null integer constant to pointer)", "body": "<p>The C++ standard allows the implicit conversion of <strong>zero integer constant</strong> to pointer of any type.</p>\n\n<p>The following code is invalid, because the value <code>v</code> is not constant here:</p>\n\n<pre><code>float* foo()\n{\n    int v = 0;\n    return v;    // Error\n}\n</code></pre>\n\n<p>But the following code is correct:</p>\n\n<pre><code>float* foo()\n{\n    const int v = 0;\n    return v;    // Ok in C++98 mode, error in C++11 mode\n}\n</code></pre>\n\n<p><strong>The question is</strong>: why <code>gcc</code> and <code>clang</code> (tried different versions) compile the code correctly in c++98/03 mode but return warning/error when compiled in c++11/14 mode (<code>-std=c++11</code>)? I tried to find the changes in C++11 working draft PDF, but got no success.</p>\n\n<p>Intel compiler 16.0 and VS2015 compilers show no errors and warnings in both cases.</p>\n"}, {"tags": ["c++", "c++11", "stream", "c++14"], "answers": [{"tags": [], "owner": {"reputation": 11391, "user_id": 2508150, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6213045ef38ad15e90df7f6d7909f549?s=128&d=identicon&r=PG", "display_name": "Paolo M", "link": "https://stackoverflow.com/users/2508150/paolo-m"}, "is_accepted": true, "score": 5, "last_activity_date": 1447264492, "creation_date": 1447264492, "answer_id": 33656771, "question_id": 33656683, "link": "https://stackoverflow.com/questions/33656683/when-do-stream-object-get-deleted/33656771#33656771", "title": "When do stream object get deleted?", "body": "<p>The wording of your textbook is quite misleading.</p>\n\n<p>When an object goes out of scope, it gets destroyed. When a <em>stream</em> is destroyed, its connection gets closed as if you would have manually called the <code>close()</code> function. Then, all the memory associated with the stream is released.</p>\n\n<p>The author underlines that <strong>the opposite does not hold</strong>, i.e. if you call the <code>close()</code> method of a stream, you are not destroying it, you are just closing the connection with it.</p>\n"}, {"tags": [], "owner": {"reputation": 2630, "user_id": 5053331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d9a0047e09056279f06b7fb3b0c101e?s=128&d=identicon&r=PG&f=1", "display_name": "cdonat", "link": "https://stackoverflow.com/users/5053331/cdonat"}, "is_accepted": false, "score": 1, "last_activity_date": 1447264583, "creation_date": 1447264583, "answer_id": 33656791, "question_id": 33656683, "link": "https://stackoverflow.com/questions/33656683/when-do-stream-object-get-deleted/33656791#33656791", "title": "When do stream object get deleted?", "body": "<p>No, either your book is wrong, or you misunderstood it. When an <code>fstream</code> object is destroyed (i.e. is out of scope), its file descriptor will be closed and its <code>stream_buffer</code> will be deleted ass well.</p>\n\n<p>Just guessing: Maybe the book is mixing pointers to <code>fstream</code> objects with <code>fstream</code> objects them self. When a pointer goes out of scope, the object it points to will not be destroyed.</p>\n"}], "owner": {"reputation": 23, "user_id": 5551614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H0XgC.jpg?s=128&g=1", "display_name": "Apurv Patani", "link": "https://stackoverflow.com/users/5551614/apurv-patani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 33656771, "answer_count": 2, "score": 2, "last_activity_date": 1447264583, "creation_date": 1447264209, "question_id": 33656683, "link": "https://stackoverflow.com/questions/33656683/when-do-stream-object-get-deleted", "title": "When do stream object get deleted?", "body": "<p><a href=\"http://i.stack.imgur.com/oiP0G.jpg\" rel=\"nofollow\">Here's the text from the book that I referred to</a></p>\n\n<p>According to what I read in a book(I have attached an image of the text from the book above), when a stream object goes out of scope, its connection with the program/file or whatever is closed but it still remains in the memory with the buffer that it is associated with.\nSo when does it deleted from the memory?</p>\n\n<p>Any help is appreciated!</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "c++11", "vector"], "answers": [{"tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": false, "score": 2, "last_activity_date": 1447263856, "creation_date": 1447263856, "answer_id": 33656586, "question_id": 33656456, "link": "https://stackoverflow.com/questions/33656456/issue-with-different-methods-to-loop-over-a-stdvector-and-getting-pointer-to-i/33656586#33656586", "title": "issue with different methods to loop over a std::vector and getting pointer to its elements", "body": "<p><code>A::a_vec()</code> returns by value. You get a new vector each time you call it. You could fix this by returning a reference</p>\n\n<pre><code>const std::vector&lt;float&gt;&amp; a_vec() const { return a_vec_; }\n</code></pre>\n\n<p>or making <code>a_vec_</code> public and accessing it directly.</p>\n"}, {"tags": [], "owner": {"reputation": 76, "user_id": 4718629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dZMe5.png?s=128&g=1", "display_name": "Kamal Sadek", "link": "https://stackoverflow.com/users/4718629/kamal-sadek"}, "is_accepted": false, "score": 0, "last_activity_date": 1447264051, "creation_date": 1447264051, "answer_id": 33656627, "question_id": 33656456, "link": "https://stackoverflow.com/questions/33656456/issue-with-different-methods-to-loop-over-a-stdvector-and-getting-pointer-to-i/33656627#33656627", "title": "issue with different methods to loop over a std::vector and getting pointer to its elements", "body": "<p>The problem is in the second loop</p>\n\n<p><code>for(unsigned int i=0; i&lt;a.a_vec().size(); ++i){\n     const auto&amp; af = a.a_vec().at(i);\n     std::cout &lt;&lt; \"#\" &lt;&lt; tryN &lt;&lt; \" \" &lt;&lt; af &lt;&lt; \" (address=\" &lt;&lt; &amp;af &lt;&lt; \")\\n\";\n }</code></p>\n\n<p>It's because of the declaration of the variable, <code>const auto&amp;</code>. If you were to remove the ampersand and hold it by value instead of by reference, it works, so just declare it as <code>const auto</code></p>\n"}, {"tags": [], "owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "is_accepted": false, "score": 0, "last_activity_date": 1447264053, "creation_date": 1447264053, "answer_id": 33656628, "question_id": 33656456, "link": "https://stackoverflow.com/questions/33656456/issue-with-different-methods-to-loop-over-a-stdvector-and-getting-pointer-to-i/33656628#33656628", "title": "issue with different methods to loop over a std::vector and getting pointer to its elements", "body": "<p>I think this statement is suspect:</p>\n\n<pre><code>const auto&amp; af = a.a_vec().at(i);\n</code></pre>\n\n<p>I believe the std::vector returned by a.a_vec() goes out of scope after the statement ends.  Yet you still have a reference to one of it's members.</p>\n\n<p>You can fix this by taking a reference to the <strong>entire vector</strong> like this:</p>\n\n<pre><code>const auto &amp; av = a.a_vec();\n</code></pre>\n\n<p>Or copying an <strong>element</strong> like this:</p>\n\n<pre><code>const auto af = a.a_vec().at(i);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6346, "user_id": 2587908, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LhXQO.jpg?s=128&g=1", "display_name": "sfjac", "link": "https://stackoverflow.com/users/2587908/sfjac"}, "is_accepted": true, "score": 2, "last_activity_date": 1447264970, "last_edit_date": 1447264970, "creation_date": 1447264129, "answer_id": 33656658, "question_id": 33656456, "link": "https://stackoverflow.com/questions/33656456/issue-with-different-methods-to-loop-over-a-stdvector-and-getting-pointer-to-i/33656658#33656658", "title": "issue with different methods to loop over a std::vector and getting pointer to its elements", "body": "<p>@juanchopanza correctly points out that <code>a_vec()</code> is returning by value, but that doesn't explain the output completely. The issue is that </p>\n\n<pre><code> const auto&amp; af = a.a_vec().at(i);\n std::cout &lt;&lt; \"#\" &lt;&lt; tryN &lt;&lt; \" \" &lt;&lt; af &lt;&lt; \" (address=\" &lt;&lt; &amp;af &lt;&lt; \")\\n\";\n</code></pre>\n\n<p>The first line binds a reference to a value that was returned from a temporary copy of the data, which then goes out of scope, so by the time you access <code>af</code> again, the underlying memory has been reclaimed and may have been overwritten.</p>\n\n<p>The reason the const reference doesn't extend the lifetime of the temporary is that it is a reference to a result of using the temporary in the expression, not a reference to the temporary itself. If you instead did</p>\n\n<pre><code>  const auto &amp;vec = a.a_vec();\n  std::cout &lt;&lt; \"#\" &lt;&lt; tryN &lt;&lt; \" \" &lt;&lt; vec.at(i) &lt;&lt; \" (address=\" &lt;&lt; &amp;vec.at(i) &lt;&lt; \")\\n\";\n</code></pre>\n\n<p>then it should be OK. (Though the right answer is to have <code>a_vec</code> return a const ref to the vector in the first place.)</p>\n"}, {"tags": [], "owner": {"reputation": 97, "user_id": 5019077, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152774845152583/picture?type=large", "display_name": "Mercyful", "link": "https://stackoverflow.com/users/5019077/mercyful"}, "is_accepted": false, "score": 0, "last_activity_date": 1447264342, "creation_date": 1447264342, "answer_id": 33656727, "question_id": 33656456, "link": "https://stackoverflow.com/questions/33656456/issue-with-different-methods-to-loop-over-a-stdvector-and-getting-pointer-to-i/33656727#33656727", "title": "issue with different methods to loop over a std::vector and getting pointer to its elements", "body": "<pre><code>for(unsigned int i=0; i&lt;a.a_vec().size(); ++i){\n\n    const &amp;auto af = a.a_vec().at(i);\n    std::cout &lt;&lt; \"#\" &lt;&lt; tryN &lt;&lt; \" \" &lt;&lt; af &lt;&lt; \" (address=\" &lt;&lt; &amp;af &lt;&lt; \")\\n\";\n}\n</code></pre>\n\n<p>for #2, Remove the &amp; before auto and it will work the same.  Your getting a Value not a reference in the second loop!</p>\n\n<pre><code>const auto af = a.a_vec().at(i);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5551299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0be16b71aaa49bd58dc60211a660e8b?s=128&d=identicon&r=PG&f=1", "display_name": "mm25", "link": "https://stackoverflow.com/users/5551299/mm25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 33656658, "answer_count": 5, "score": 0, "last_activity_date": 1447264970, "creation_date": 1447263422, "question_id": 33656456, "link": "https://stackoverflow.com/questions/33656456/issue-with-different-methods-to-loop-over-a-stdvector-and-getting-pointer-to-i", "title": "issue with different methods to loop over a std::vector and getting pointer to its elements", "body": "<p>let me preface by saying that i'm not a c++ expert here, so i apologize in advance if what i'm trying to figure out is trivial for most. i have tried to find the solution to this in other posts, but this time i haven't succeeded.</p>\n\n<p>at the end of the post you can find the standalone code that reproduces the 2 issues i'm about to detail [*].</p>\n\n<p>i'm using a class <code>A</code> containing a <code>std::vector&lt;float&gt;</code> as member, which can be accessed via a const method.</p>\n\n<ul>\n<li>issue #1: after the vector is filled, i try to print out its content with a loop, in two different ways.</li>\n</ul>\n\n<p>loop #1</p>\n\n<pre><code>  for(const auto&amp; af : a.vec()){\n\n    std::cout &lt;&lt; af &lt;&lt; \" (address=\" &lt;&lt; &amp;af &lt;&lt; \")\\n\";\n  }\n</code></pre>\n\n<p>loop #2</p>\n\n<pre><code>  for(unsigned int i=0; i&lt;a.vec().size(); ++i){\n\n    const auto&amp; af = a.vec().at(i);\n    std::cout &lt;&lt; af &lt;&lt; \" (address=\" &lt;&lt; &amp;af &lt;&lt; \")\\n\";\n  }\n</code></pre>\n\n<p>the 2 approaches seem to yield 2 different results. loop #1 works as expected. when using loop #2, i get that the value of some of the vector elements is now (printed out as) zero, but the memory addresses are still the right ones.\nnaively, i expected the two approaches to give the same output. what is the reason why they differ?</p>\n\n<ul>\n<li>issue #2: given the above vector of floats <code>vec</code> and a value <code>a</code> chosen by the user, i'm trying to get a pointer to the element of <code>vec</code> whose value is closer to <code>a</code>. in the code example below, there is a routine that tries to accomplish that. the latter routine actually returns the correct pointer (which i save as a <code>const float*</code> object), but then, when dereferencing, the value printed out is zero (similarly to what happens in loop#2 of issue#1). i don't understand why this happens because the original vector still exists, the memory-address is correct and non-null, but when dereferencing the value is zero, which is different from the value of the vector element pointed to.</li>\n</ul>\n\n<p>below i wrote down some instructions to reproduce these two issues.</p>\n\n<p>any insight on the reason why these 2 issues arise (and/or general suggestions on the implementation below) is welcome.</p>\n\n<p>thanks</p>\n\n<p>[*] i'm compiling the code below (<code>test.cc</code>) with g++ version 4.9.1 in SLC6, doing <code>g++ test.cc -o test -std=c++0x</code>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;cmath&gt;\n#include &lt;limits&gt;\n\nclass A {\n public:\n  explicit A() {}\n  virtual ~A() {}\n\n  std::vector&lt;float&gt; a_vec() const { return a_vec_; }\n\n  void add_obj(const float f){\n\n    a_vec_.push_back(f);\n\n    return;\n  }\n\n private:\n  std::vector&lt;float&gt; a_vec_;\n};\n\ntemplate&lt;typename T&gt;\nconst T * closest0(const float&amp; f, const std::vector&lt;T&gt;&amp; fvec){\n\n  const T* next=0;\n\n  float deltarmin = std::numeric_limits&lt;float&gt;::infinity();\n  for(unsigned int i=0; i&lt;fvec.size(); ++i) {\n    const T &amp; fi = fvec[i];\n    const float dr = fabs(fi-f);\n    if(dr &lt; deltarmin){\n\n      deltarmin = dr;\n      next = &amp;fi;\n    }\n  }\n\n  return next;\n}\n\nint main(int argc, char** argv){\n\n  if(argc-1 != 1) return 0;\n\n  const float ref(atoi(argv[1]));\n  ////\n\n  A a;\n  a.add_obj(25.);\n  a.add_obj(35.);\n  a.add_obj(45.);\n  a.add_obj(55.);\n\n  std::cout &lt;&lt; \"\\n*** input vector ***********\\n\";\n  for(unsigned int i=0; i&lt;a.a_vec().size(); ++i){\n    std::cout &lt;&lt; \"a.a_vec().at(\" &lt;&lt; i &lt;&lt; \")=\" &lt;&lt; a.a_vec().at(i) &lt;&lt; \" (address=\" &lt;&lt; &amp;a.a_vec().at(i) &lt;&lt; \")\\n\";\n  }\n  std::cout &lt;&lt;   \"****************************\\n\";\n\n  int tryN(0);\n  ////\n\n  ++tryN;\n  std::cout &lt;&lt; \"\\n--- loop:(const auto&amp;)\" &lt;&lt; std::endl;\n  for(const auto&amp; af : a.a_vec()){\n\n    std::cout &lt;&lt; \"#\" &lt;&lt; tryN &lt;&lt; \" \" &lt;&lt; af &lt;&lt; \" (address=\" &lt;&lt; &amp;af &lt;&lt; \")\\n\";\n  }\n  std::cout &lt;&lt; \"---------------\" &lt;&lt; std::endl;\n  ////\n\n  ++tryN;\n  std::cout &lt;&lt; \"\\n--- loop:(index) + 'const auto&amp; ... at()'\\n\";\n  for(unsigned int i=0; i&lt;a.a_vec().size(); ++i){\n\n    const auto&amp; af = a.a_vec().at(i);\n    std::cout &lt;&lt; \"#\" &lt;&lt; tryN &lt;&lt; \" \" &lt;&lt; af &lt;&lt; \" (address=\" &lt;&lt; &amp;af &lt;&lt; \")\\n\";\n  }\n  std::cout &lt;&lt; \"---------------\" &lt;&lt; std::endl;\n  ////\n\n  std::cout &lt;&lt; \"\\n---------------\\n\\n\";\n\n  const float* fclo0 = closest0(ref, a.a_vec());\n  std::cout &lt;&lt; \" *** f-closest0(\" &lt;&lt; ref &lt;&lt; \")=\" &lt;&lt; *fclo0 &lt;&lt; \" (address=\" &lt;&lt; fclo0 &lt;&lt; \")\\n\";\n\n  return 0;\n}\n</code></pre>\n\n<p>an example of the output i'm getting is</p>\n\n<pre><code>$ ./test 33\n\n\n*** input vector ***********\n\na.a_vec().at(0)=25 (address=0x1a4f030)\n\na.a_vec().at(1)=35 (address=0x1a4f034)\n\na.a_vec().at(2)=45 (address=0x1a4f038)\n\na.a_vec().at(3)=55 (address=0x1a4f03c)\n\n****************************\n\n\n\n--- loop:(const auto&amp;)\n\n#1 25 (address=0x1a4f030)\n\n#1 35 (address=0x1a4f034)\n\n#1 45 (address=0x1a4f038)\n\n#1 55 (address=0x1a4f03c)\n\n---------------\n\n\n--- loop:(index) + 'const auto&amp; ... at()'\n\n#2 6.05888e-38 (address=0x1a4f030)\n\n#2 0 (address=0x1a4f034)\n\n#2 45 (address=0x1a4f038)\n\n#2 55 (address=0x1a4f03c)\n\n---------------\n\n\n---------------\n\n\n *** f-closest0(33)=0 (address=0x1a4f034)\n</code></pre>\n"}, {"tags": ["c++", "vector", "resize"], "comments": [{"owner": {"reputation": 1591, "user_id": 5397699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fy8CM.png?s=128&g=1", "display_name": "decltype_auto", "link": "https://stackoverflow.com/users/5397699/decltype-auto"}, "edited": false, "score": 0, "creation_date": 1447263828, "post_id": 33656454, "comment_id": 55086335, "body": "Welcome to SO! please add your main() routine to make it a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>. Btw - your vector&lt;int&gt; is technically not &quot;two-dimensional&quot; , thus you try to resize a plain <code>int</code> luring at <code>numbers[i]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1591, "user_id": 5397699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fy8CM.png?s=128&g=1", "display_name": "decltype_auto", "link": "https://stackoverflow.com/users/5397699/decltype-auto"}, "edited": false, "score": 0, "creation_date": 1447264211, "post_id": 33656559, "comment_id": 55086559, "body": "For mentioning <code>&quot;simulate&quot; [..] as 1D vector</code> ++vote: That vector&lt;vector&lt;....&gt;&gt;&gt; contortionism is a pain in the eye."}, {"owner": {"reputation": 69, "user_id": 5463431, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bd08f24179a5a6b17e02d7e8a20db8d6?s=128&d=identicon&r=PG&f=1", "display_name": "elena.bdc", "link": "https://stackoverflow.com/users/5463431/elena-bdc"}, "edited": false, "score": 0, "creation_date": 1447265402, "post_id": 33656559, "comment_id": 55087277, "body": "Yeah, that&#39;s it. Thanks for your help :)"}], "tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": true, "score": 1, "last_activity_date": 1447263769, "creation_date": 1447263769, "answer_id": 33656559, "question_id": 33656454, "link": "https://stackoverflow.com/questions/33656454/resize-two-dimensional-vector-in-a-class/33656559#33656559", "title": "Resize two dimensional vector in a class", "body": "<pre><code>vector&lt;int&gt; numbers;\n</code></pre>\n\n<p>declares a one-dimensional vector. In the line</p>\n\n<pre><code>this-&gt;numbers[i].resize(size);\n</code></pre>\n\n<p>you assume that <code>numbers[i]</code> is itself a vector, which is not the case (it is an <code>int</code>). What you probably want is to declare</p>\n\n<pre><code>vector&lt;vector&lt;int&gt;&gt; numbers;\n</code></pre>\n\n<p>or \"simulate\" the 2D vector as a 1D flatten vector (in general faster) but making sure to map from 2D to 1D and vice versa.</p>\n"}], "owner": {"reputation": 69, "user_id": 5463431, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bd08f24179a5a6b17e02d7e8a20db8d6?s=128&d=identicon&r=PG&f=1", "display_name": "elena.bdc", "link": "https://stackoverflow.com/users/5463431/elena-bdc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 33656559, "answer_count": 1, "score": 0, "last_activity_date": 1447263769, "creation_date": 1447263415, "question_id": 33656454, "link": "https://stackoverflow.com/questions/33656454/resize-two-dimensional-vector-in-a-class", "title": "Resize two dimensional vector in a class", "body": "<p>I'm trying to resize a vector in the class. I don't know where is the error. Hope you can help me.</p>\n\n<p>This is my code:</p>\n\n<pre><code>class State {\nprivate:\n    vector&lt;int&gt; numbers;\n    int score;\n\npublic:\n    int getScore() {\n        return score;\n    }\n    void setScore(int score) {\n        this-&gt;score = score;\n    }\n    int getSize () {\n        return this-&gt;numbers.size();\n    }\n    void setSize(int size) {\n        this-&gt;numbers.clear();\n        this-&gt;numbers.resize(size);\n        for (int i = 0; i &lt; size; ++i)\n            this-&gt;numbers[i].resize(size);\n    }\n};\n</code></pre>\n\n<p>When I try to compile, I get this error:</p>\n\n<pre><code>In file included from ./power.cpp:11:\n./power.hpp:45:24: error: member reference base type 'value_type' (aka 'int') is not a structure or union\n                    this-&gt;numbers[i].resize(size);\n                    ~~~~~~~~~~~~~~~~^~~~~~~\n1 error generated.\n</code></pre>\n\n<p>Hope you can help me.</p>\n\n<p>Thanks in advance :)</p>\n"}, {"tags": ["c++", "include", "forward-declaration"], "comments": [{"owner": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "edited": false, "score": 3, "creation_date": 1447263222, "post_id": 33656333, "comment_id": 55085984, "body": "#include &quot;Tree.cpp&quot; why do you include a cpp file ? :P"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 1, "creation_date": 1447263331, "post_id": 33656333, "comment_id": 55086046, "body": "Do a full include <b>only when you must</b> and use forward declarations everywhere else. See <a href=\"http://stackoverflow.com/questions/553682/when-can-i-use-a-forward-declaration\">When can I use a forward declaration?</a> for more details."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1447263358, "post_id": 33656333, "comment_id": 55086057, "body": "What&#39;s the purpose of the tree containing a queue, and the queue containing tree nodes?"}, {"owner": {"reputation": 303, "user_id": 4682890, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/30bb619ef5698475214aa6f63e75ac69?s=128&d=identicon&r=PG&f=1", "display_name": "lefunction", "link": "https://stackoverflow.com/users/4682890/lefunction"}, "edited": false, "score": 0, "creation_date": 1447263912, "post_id": 33656333, "comment_id": 55086387, "body": "SO maybe C++ has a problem with this construction?  It can&#39;t share data members in this way?"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 1, "creation_date": 1447263966, "post_id": 33656333, "comment_id": 55086423, "body": "Also, never include .cpp files."}, {"owner": {"reputation": 303, "user_id": 4682890, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/30bb619ef5698475214aa6f63e75ac69?s=128&d=identicon&r=PG&f=1", "display_name": "lefunction", "link": "https://stackoverflow.com/users/4682890/lefunction"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1447264007, "post_id": 33656333, "comment_id": 55086443, "body": "@zenith how am I suppose to compile tree.cpp?"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 2, "creation_date": 1447264053, "post_id": 33656333, "comment_id": 55086466, "body": "Pass it to the compiler?"}, {"owner": {"reputation": 303, "user_id": 4682890, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/30bb619ef5698475214aa6f63e75ac69?s=128&d=identicon&r=PG&f=1", "display_name": "lefunction", "link": "https://stackoverflow.com/users/4682890/lefunction"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1447264160, "post_id": 33656333, "comment_id": 55086527, "body": "@Zenith why when it compiles when I include it in main and compile main.cpp?  Are you saying this is the source of my problem.  I don&#39;t believe it is."}, {"owner": {"reputation": 303, "user_id": 4682890, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/30bb619ef5698475214aa6f63e75ac69?s=128&d=identicon&r=PG&f=1", "display_name": "lefunction", "link": "https://stackoverflow.com/users/4682890/lefunction"}, "edited": false, "score": 0, "creation_date": 1447264273, "post_id": 33656333, "comment_id": 55086593, "body": "Ok.  So I have reviewed the other posts on this topic.  Still have the problem.  This post got removed before anyone had a chance to pose a solution.... lame"}], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 4682890, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/30bb619ef5698475214aa6f63e75ac69?s=128&d=identicon&r=PG&f=1", "display_name": "lefunction", "link": "https://stackoverflow.com/users/4682890/lefunction"}, "edited": false, "score": 0, "creation_date": 1447266719, "post_id": 33657100, "comment_id": 55088119, "body": "I have followed your instructions however none of my files will compile.  I get the Error from Queue.h that &quot;treePtr has not been declared&quot; and &quot;treePtr does not name a type&quot; no matter which file I try to compile"}, {"owner": {"reputation": 303, "user_id": 4682890, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/30bb619ef5698475214aa6f63e75ac69?s=128&d=identicon&r=PG&f=1", "display_name": "lefunction", "link": "https://stackoverflow.com/users/4682890/lefunction"}, "edited": false, "score": 0, "creation_date": 1447266895, "post_id": 33657100, "comment_id": 55088248, "body": "my original solution was to #include &quot;Queue.cpp&quot; in Tree.cpp, and declare the Queue object in Tree.cpp.  This worked."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 303, "user_id": 4682890, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/30bb619ef5698475214aa6f63e75ac69?s=128&d=identicon&r=PG&f=1", "display_name": "lefunction", "link": "https://stackoverflow.com/users/4682890/lefunction"}, "edited": false, "score": 0, "creation_date": 1447267040, "post_id": 33657100, "comment_id": 55088337, "body": "@lefunction <code>treePtr</code> isn&#39;t visible from the forward declaration, hence the error. You could try forwarding the nested class/struct declaration as well, not sure if that&#39;s possible (would need an experiment)."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 303, "user_id": 4682890, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/30bb619ef5698475214aa6f63e75ac69?s=128&d=identicon&r=PG&f=1", "display_name": "lefunction", "link": "https://stackoverflow.com/users/4682890/lefunction"}, "edited": false, "score": 0, "creation_date": 1447267170, "post_id": 33657100, "comment_id": 55088429, "body": "@lefunction <i>&quot;my original solution was to <code>#include</code> ...&quot;</i> Check the link I gave in my answer. Including translation units is the wrong approach."}, {"owner": {"reputation": 303, "user_id": 4682890, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/30bb619ef5698475214aa6f63e75ac69?s=128&d=identicon&r=PG&f=1", "display_name": "lefunction", "link": "https://stackoverflow.com/users/4682890/lefunction"}, "edited": false, "score": 0, "creation_date": 1447267364, "post_id": 33657100, "comment_id": 55088552, "body": "Yes, I understand that.  Hence why I am trying to declare the Queue as a private data member in Tree.  I was just explaining the solution that did work."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 303, "user_id": 4682890, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/30bb619ef5698475214aa6f63e75ac69?s=128&d=identicon&r=PG&f=1", "display_name": "lefunction", "link": "https://stackoverflow.com/users/4682890/lefunction"}, "edited": false, "score": 0, "creation_date": 1447268566, "post_id": 33657100, "comment_id": 55089281, "body": "@lefunction The <a href=\"http://ideone.com/F1TigF\" rel=\"nofollow noreferrer\">experiment</a> failed, as I&#39;ve expected. See my updates."}, {"owner": {"reputation": 303, "user_id": 4682890, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/30bb619ef5698475214aa6f63e75ac69?s=128&d=identicon&r=PG&f=1", "display_name": "lefunction", "link": "https://stackoverflow.com/users/4682890/lefunction"}, "edited": false, "score": 0, "creation_date": 1447268951, "post_id": 33657100, "comment_id": 55089460, "body": "Thank you.  I really appreciate you talking a look at this.  There was a way I got it to work before.  Maybe if I start from there I can figure out where all the data members should go, without including .cpp files. :)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 303, "user_id": 4682890, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/30bb619ef5698475214aa6f63e75ac69?s=128&d=identicon&r=PG&f=1", "display_name": "lefunction", "link": "https://stackoverflow.com/users/4682890/lefunction"}, "edited": false, "score": 0, "creation_date": 1447269402, "post_id": 33657100, "comment_id": 55089727, "body": "@lefunction Well, what you&#39;re trying to do regarding the nested types <code>tree</code> and <code>treePtr</code> is simply not possible. As I&#39;ve mentioned the only way to make these <code>private</code> is hiding in an internally used namespace."}, {"owner": {"reputation": 303, "user_id": 4682890, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/30bb619ef5698475214aa6f63e75ac69?s=128&d=identicon&r=PG&f=1", "display_name": "lefunction", "link": "https://stackoverflow.com/users/4682890/lefunction"}, "edited": false, "score": 0, "creation_date": 1447269982, "post_id": 33657100, "comment_id": 55090065, "body": "I am wondering if the problem is the fact that these classes are friends, and I am trying to declare as a private data member an object of type Queue in the Tree class.  So my Tree is sharing an object Queue with the class Queue.  Would that be a problem?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 303, "user_id": 4682890, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/30bb619ef5698475214aa6f63e75ac69?s=128&d=identicon&r=PG&f=1", "display_name": "lefunction", "link": "https://stackoverflow.com/users/4682890/lefunction"}, "edited": false, "score": 1, "creation_date": 1447270747, "post_id": 33657100, "comment_id": 55090516, "body": "@lefunction Hmm, <code>Queue</code> seems to be a good candidate for a template class. From your sample I actually can&#39;t see, why it needs to access any innards of the <code>tree</code> struct. You don&#39;t give a use case, why this tight coupling is actually needed. If you want to use a queue structure as container for your nodes, something like <a href=\"http://en.cppreference.com/w/cpp/container/queue\" rel=\"nofollow noreferrer\"><code>std::queue</code></a> templated container should be sufficient."}, {"owner": {"reputation": 303, "user_id": 4682890, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/30bb619ef5698475214aa6f63e75ac69?s=128&d=identicon&r=PG&f=1", "display_name": "lefunction", "link": "https://stackoverflow.com/users/4682890/lefunction"}, "edited": false, "score": 0, "creation_date": 1447272665, "post_id": 33657100, "comment_id": 55091532, "body": "Yes yes yes!!!!  Making Queue a template class relieved the need to have access to the structures in my Tree class.  Very edifying!!!!!!"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 303, "user_id": 4682890, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/30bb619ef5698475214aa6f63e75ac69?s=128&d=identicon&r=PG&f=1", "display_name": "lefunction", "link": "https://stackoverflow.com/users/4682890/lefunction"}, "edited": false, "score": 0, "creation_date": 1447272826, "post_id": 33657100, "comment_id": 55091612, "body": "@lefunction Glad having been helpful to nudge you into the right direction ;-)."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 1, "last_activity_date": 1447273503, "last_edit_date": 1495542219, "creation_date": 1447265607, "answer_id": 33657100, "question_id": 33656333, "link": "https://stackoverflow.com/questions/33656333/friend-classes-need-to-include-or-forward-declare-c/33657100#33657100", "title": "Friend classes need to include or forward declare c++?", "body": "<p>You have to compile <code>Tree.cpp</code> and (I suppose you have one) <code>Queue.cpp</code> separately, instead of including <code>Tree.cpp</code> in your <code>main.cpp</code>.</p>\n\n<p>Forward declarations are fine for friending classes, even if you do so circular.</p>\n\n<p>Put <code>#include \"Tree.h\"</code> in your <code>Queue.cpp</code> file, to let the compiler see the full declaration.</p>\n\n<p>In <code>main.cpp</code> just put <code>#include \" Tree.h\"</code>.</p>\n\n<p>To get the final executable link all of the produced object files <code>main.o(bj)</code>, <code>Tree.o(bj)</code> and <code>Queue.o(bj)</code>.</p>\n\n<p>See also <a href=\"https://stackoverflow.com/questions/1686204/why-should-i-not-include-cpp-files-and-instead-use-a-header\">[Why should I not include cpp files and instead use a header?]</a> please.</p>\n\n<hr>\n\n<p>As I've noticed now your actual problem is, you cannot access nested classes/structs from a forward declared class/struct as you're requiring with accessing <code>treePtr</code> from <code>Queue</code> (<code>treePtr</code> should be better named something like <code>TreeNode</code> or similar BTW).</p>\n\n<p>You cannot make <code>treePtr</code> a private nested type in this case, it must be publicly visible.</p>\n\n<p>A viable way is to put <code>treePtr</code> in a <code>namespace internal_</code>, that indicates it's not intended for usage outside the API.</p>\n\n<hr>\n\n<p>Another viable way is to make <code>Queue</code> a template class, that accepts any type of <code>tree</code> or other kind of nodes. Since  can't see any use case, why <code>Queue</code> needs to know about the internal specifications of <code>tree</code> (besides the trivial stuff like copying aso.), it's not really necessary to make <code>Queue</code> a <code>friend</code> class.</p>\n"}, {"tags": [], "owner": {"reputation": 303, "user_id": 4682890, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/30bb619ef5698475214aa6f63e75ac69?s=128&d=identicon&r=PG&f=1", "display_name": "lefunction", "link": "https://stackoverflow.com/users/4682890/lefunction"}, "is_accepted": false, "score": 0, "last_activity_date": 1447273771, "last_edit_date": 1447273771, "creation_date": 1447273464, "answer_id": 33659171, "question_id": 33656333, "link": "https://stackoverflow.com/questions/33656333/friend-classes-need-to-include-or-forward-declare-c/33659171#33659171", "title": "Friend classes need to include or forward declare c++?", "body": "<p>My best guess here is that the problem was that since the classes Queue and Tree were friends, and Tree had an instance of a Queue as a data member, there was some conflict when trying to include files and forward declare.  By sharing data members with Queue, the Tree class shared an instantiation of a Queue object with the Queue class, so there was some inception sharing going on that was not obvious.  @\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 suggested to make the Queue a template class so that it could accept objects of any type, without having to couple with the Tree (which was done so the Queue class would know what to do with treePtr objects).  Making Queue a template class solved the problem because now the Tree class can have an instance of a Queue, and I can pass objects of type treePtr to the Queue without the Queue knowing anything about the Tree class before hand. </p>\n"}], "owner": {"reputation": 303, "user_id": 4682890, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/30bb619ef5698475214aa6f63e75ac69?s=128&d=identicon&r=PG&f=1", "display_name": "lefunction", "link": "https://stackoverflow.com/users/4682890/lefunction"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1022, "favorite_count": 0, "accepted_answer_id": 33657100, "answer_count": 2, "score": 1, "last_activity_date": 1447274085, "creation_date": 1447263067, "last_edit_date": 1495541744, "question_id": 33656333, "link": "https://stackoverflow.com/questions/33656333/friend-classes-need-to-include-or-forward-declare-c", "title": "Friend classes need to include or forward declare c++?", "body": "<p>I have been struggling with errors when trying to build a binary tree using a queue.  The problem is what classes should include what files and how to reference objects from the other classes?  I threw my files into an IDE in an attempt to pinpoint just what the problems are and the results are below.  Currently my issue is that in the Queue.h file, treePtr \"does not name a type\".  You can see the evolution of this problem <a href=\"https://stackoverflow.com/questions/33653420/how-to-fix-incomplete-type-error-c\">here</a>  This question is different from other posts because the two classes are friend classes.  This brings up the problem of circular dependencies.  I have tried all sorts of combinations of including files and forward declaring but one combination causes one type of issue, and another creates different errors.</p>\n\n<p>Here is the main class:</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include \"Tree.cpp\"\n\nusing namespace std;\n\nint main() {\n\n    Tree tree;\n    tree.addTreeNode(5);\n\nreturn 0;\n\n}\n</code></pre>\n\n<p>Here is the Queue.h:</p>\n\n<pre><code>#ifndef QUEUE_H_\n#define QUEUE_H_\n\nclass Tree;  //Was instructed to put this here\n\nclass Queue {\n\n    friend class Tree;\n\n    private:\n        typedef struct node {\n            Tree::treePtr treeNode; //Here is the problem\n            node* next;\n        }* nodePtr;\n\n        nodePtr head;\n        nodePtr current;\n\npublic:\n    Queue();\n    virtual ~Queue();\n    void push(Tree::treePtr t);  //Here is the problem\n    int pop();\n    void print();\n\n};\n\n#endif /* QUEUE_H_ */\n</code></pre>\n\n<p>This is Tree.h:</p>\n\n<pre><code>#ifndef TREE_H_\n#define TREE_H_\n\n#include \"Queue.h\"  //Was instructed to put this here\n\nclass Tree {\n    friend class Queue;\n\n    private:\n\n        Queue q;  //Edit: Most likely problem since Queue and Tree are friends\n\n        typedef struct tree {\n            int data;\n            tree* left;\n            tree* right;\n        }* treePtr;\n\n        treePtr root;\n        int numNodes;\n\npublic:\n    Tree();\n    virtual ~Tree();\n    void addTreeNode(int integer);\n};\n\n#endif /* TREE_H_ */\n</code></pre>\n\n<p>This is tree.cpp</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n\n#include \"Tree.h\"\n\nusing namespace std;\n\nTree::Tree() {\n    root = NULL;\n    numNodes = 0;\n}\n\nvoid Tree::addTreeNode(int integer) {\n    numNodes++;\n    treePtr t = new tree;\n    t-&gt;left = NULL;\n    t-&gt;right = NULL;\n    t-&gt;data = integer;\n\n    cout &lt;&lt; \"add root\\n\";\n    root = t;\n    q.push(t);  //This is a problem\n    q.print();\n\n}\n\nTree::~Tree() {\n    // TODO Auto-generated destructor stub\n}\n</code></pre>\n"}, {"tags": ["c++", "directx", "fbx"], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 4061085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac7706c864e557ae4387c43751a39300?s=128&d=identicon&r=PG&f=1", "display_name": "amit", "link": "https://stackoverflow.com/users/4061085/amit"}, "edited": false, "score": 0, "creation_date": 1447361304, "post_id": 33663895, "comment_id": 55135116, "body": "Can I get translation rotation and scale separately in global (without hierarchy)?"}, {"owner": {"reputation": 1848, "user_id": 5505741, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K0RGKJuJSu4/AAAAAAAAAAI/AAAAAAAAAFw/aodTCStN3gc/photo.jpg?sz=128", "display_name": "Michael Nastenko", "link": "https://stackoverflow.com/users/5505741/michael-nastenko"}, "reply_to_user": {"reputation": 167, "user_id": 4061085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac7706c864e557ae4387c43751a39300?s=128&d=identicon&r=PG&f=1", "display_name": "amit", "link": "https://stackoverflow.com/users/4061085/amit"}, "edited": false, "score": 0, "creation_date": 1447367396, "post_id": 33663895, "comment_id": 55138269, "body": "As I said, use <b>EvaluateGlobalTransform</b> if don&#39;t keep hierarchy."}, {"owner": {"reputation": 167, "user_id": 4061085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac7706c864e557ae4387c43751a39300?s=128&d=identicon&r=PG&f=1", "display_name": "amit", "link": "https://stackoverflow.com/users/4061085/amit"}, "edited": false, "score": 0, "creation_date": 1447414260, "post_id": 33663895, "comment_id": 55155127, "body": "Yes I got it. But what should I use if I want to get only the rotation for example?"}, {"owner": {"reputation": 1848, "user_id": 5505741, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K0RGKJuJSu4/AAAAAAAAAAI/AAAAAAAAAFw/aodTCStN3gc/photo.jpg?sz=128", "display_name": "Michael Nastenko", "link": "https://stackoverflow.com/users/5505741/michael-nastenko"}, "reply_to_user": {"reputation": 167, "user_id": 4061085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac7706c864e557ae4387c43751a39300?s=128&d=identicon&r=PG&f=1", "display_name": "amit", "link": "https://stackoverflow.com/users/4061085/amit"}, "edited": false, "score": 1, "creation_date": 1447417475, "post_id": 33663895, "comment_id": 55156851, "body": "You will get matrix 4x4, which contains all components - translation, rotation and scale. Then you can use matrix decomposition. It will decompose matrix to this parts."}, {"owner": {"reputation": 1848, "user_id": 5505741, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K0RGKJuJSu4/AAAAAAAAAAI/AAAAAAAAAFw/aodTCStN3gc/photo.jpg?sz=128", "display_name": "Michael Nastenko", "link": "https://stackoverflow.com/users/5505741/michael-nastenko"}, "reply_to_user": {"reputation": 167, "user_id": 4061085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac7706c864e557ae4387c43751a39300?s=128&d=identicon&r=PG&f=1", "display_name": "amit", "link": "https://stackoverflow.com/users/4061085/amit"}, "edited": false, "score": 0, "creation_date": 1447417802, "post_id": 33663895, "comment_id": 55157032, "body": "Oh, fbx matrix already have all functions. Check <a href=\"http://docs.autodesk.com/FBX/2014/ENU/FBX-SDK-Documentation/cpp_ref/class_fbx_a_matrix.html\" rel=\"nofollow noreferrer\">link</a>"}], "tags": [], "owner": {"reputation": 1848, "user_id": 5505741, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K0RGKJuJSu4/AAAAAAAAAAI/AAAAAAAAAFw/aodTCStN3gc/photo.jpg?sz=128", "display_name": "Michael Nastenko", "link": "https://stackoverflow.com/users/5505741/michael-nastenko"}, "is_accepted": true, "score": 3, "last_activity_date": 1447298599, "creation_date": 1447298599, "answer_id": 33663895, "question_id": 33656252, "link": "https://stackoverflow.com/questions/33656252/fbx-mesh-load-geometry-transformation/33663895#33663895", "title": "fbx mesh load geometry transformation", "body": "<p>All nodes in fbx have own transformation. You can take it by <strong>EvaluateLocalTransform</strong>(if you keep hierarchy) or <strong>EvaluateGlobalTransform</strong> (if you don't)</p>\n"}], "owner": {"reputation": 167, "user_id": 4061085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac7706c864e557ae4387c43751a39300?s=128&d=identicon&r=PG&f=1", "display_name": "amit", "link": "https://stackoverflow.com/users/4061085/amit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 494, "favorite_count": 0, "accepted_answer_id": 33663895, "answer_count": 1, "score": 2, "last_activity_date": 1447298599, "creation_date": 1447262804, "question_id": 33656252, "link": "https://stackoverflow.com/questions/33656252/fbx-mesh-load-geometry-transformation", "title": "fbx mesh load geometry transformation", "body": "<p>I am trying to load a car model from fbx file with one model that divided into 5 sub models.<br>\n4 sub models are the wheels and one sub model is the car.<br>\nAt first when I tried to render it I Saw only one wheel so I start diagnostic on the frame.<br>\nI realized that all the four wheel are much more big then the car.<br>\nThis and the fact that I see only one wheel make me think that in fbx each sub model has own transformation matrix.<br>\nAm I right?<br>\nAnd if yes how can I get the specific transformation for the specific sub model?</p>\n"}, {"tags": ["c++", "variables", "visual-c++", "global-variables"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1447263399, "post_id": 33656248, "comment_id": 55086091, "body": "What about <code>extern MyQueue&lt;char&gt; logData;</code> (at global scope) in <code>Form1.h</code>?"}, {"owner": {"reputation": 32807, "user_id": 196919, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/iqMS0.png?s=128&g=1", "display_name": "DmitryBoyko", "link": "https://stackoverflow.com/users/196919/dmitryboyko"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1447263706, "post_id": 33656248, "comment_id": 55086265, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Would u mind to provide an answer please"}], "answers": [{"comments": [{"owner": {"reputation": 32807, "user_id": 196919, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/iqMS0.png?s=128&g=1", "display_name": "DmitryBoyko", "link": "https://stackoverflow.com/users/196919/dmitryboyko"}, "edited": false, "score": 0, "creation_date": 1447263773, "post_id": 33656525, "comment_id": 55086308, "body": "I am sorry I am new in C++ would you mind to provide a little bit more extended answer please"}], "tags": [], "owner": {"reputation": 157, "user_id": 5495213, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7xZoq.jpg?s=128&g=1", "display_name": "R&#255;ck N&#246;thing", "link": "https://stackoverflow.com/users/5495213/r%c3%bfck-n%c3%b6thing"}, "is_accepted": false, "score": 1, "last_activity_date": 1447263636, "creation_date": 1447263636, "answer_id": 33656525, "question_id": 33656248, "link": "https://stackoverflow.com/questions/33656248/how-to-access-global-var-within-a-form-of-mfc-in-c/33656525#33656525", "title": "How to access global var within a Form of MFC in C++", "body": "<p>You could declare <code>logdata</code> static. Accessing raw data members is not normally considered good practice, so you may also want to provide a static method to put characters into your queue. Here's a tutorial on static members in C++.</p>\n\n<p><a href=\"http://www.tutorialspoint.com/cplusplus/cpp_static_members.htm\" rel=\"nofollow\">http://www.tutorialspoint.com/cplusplus/cpp_static_members.htm</a></p>\n"}, {"comments": [{"owner": {"reputation": 32807, "user_id": 196919, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/iqMS0.png?s=128&g=1", "display_name": "DmitryBoyko", "link": "https://stackoverflow.com/users/196919/dmitryboyko"}, "edited": false, "score": 0, "creation_date": 1447264338, "post_id": 33656637, "comment_id": 55086640, "body": "I have got several erros when I do this. Probably because <code>template&lt;class T&gt; class MyQueue</code> is implemented in a <code>main</code> cpp class. Let me how it could be done properly, please."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 32807, "user_id": 196919, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/iqMS0.png?s=128&g=1", "display_name": "DmitryBoyko", "link": "https://stackoverflow.com/users/196919/dmitryboyko"}, "edited": false, "score": 0, "creation_date": 1447264483, "post_id": 33656637, "comment_id": 55086738, "body": "@dimi See <a href=\"http://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file\">here</a> please, regarding implementation of <code>MyQueue</code> please. You probably did this wrong."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1447264071, "creation_date": 1447264071, "answer_id": 33656637, "question_id": 33656248, "link": "https://stackoverflow.com/questions/33656248/how-to-access-global-var-within-a-form-of-mfc-in-c/33656637#33656637", "title": "How to access global var within a Form of MFC in C++", "body": "<p>Outside of the <code>Form1</code> class, provide </p>\n\n<pre><code>extern MyQueue&lt;char&gt; logData;\n</code></pre>\n\n<p>Inside of the <code>Form1_Load</code> function definition, just access it:</p>\n\n<pre><code>private: System::Void Form1_Load(System::Object^  sender, System::EventArgs^  e) {\n    logData.pop(); // Access it \n}\n</code></pre>\n"}], "owner": {"reputation": 32807, "user_id": 196919, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/iqMS0.png?s=128&g=1", "display_name": "DmitryBoyko", "link": "https://stackoverflow.com/users/196919/dmitryboyko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1447264071, "creation_date": 1447262801, "question_id": 33656248, "link": "https://stackoverflow.com/questions/33656248/how-to-access-global-var-within-a-form-of-mfc-in-c", "title": "How to access global var within a Form of MFC in C++", "body": "<p>I have implemented following in Windows Form C++ project </p>\n\n<pre><code>template&lt;class T&gt; class MyQueue\n{\n    T *m_data;\n    int m_numElements;\n\npublic:\n    MyQueue() : m_data(NULL), m_numElements(0) { }\n\n  ..... code .....\n\n};\n\nMyQueue&lt;char&gt; logData; // I need to acces it from Form1.h\n\n[STAThreadAttribute]\nint main(array&lt;System::String ^&gt; ^args)\n{\n\n    // Enabling Windows XP visual effects before any controls are created\n    Application::EnableVisualStyles();\n    Application::SetCompatibleTextRenderingDefault(false); \n\n    // Create the main window and run it\n    Application::Run(gcnew Form1());\n\n    return 0;\n}\n</code></pre>\n\n<p>I would like to access it  within <strong>Form1.h</strong>\nunder the </p>\n\n<pre><code>private: System::Void Form1_Load(System::Object^  sender, System::EventArgs^  e) \n{\n  ??? MyQueue&lt;char&gt; logData; // I need to acces it \n}\n</code></pre>\n\n<p>Any clue?</p>\n"}, {"tags": ["c++", "string", "split"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4371190"}, "edited": false, "score": 0, "creation_date": 1447262903, "post_id": 33656200, "comment_id": 55085766, "body": "firstly convert the string to a char array, And then split it to two different char array, and then use them to initialize your two string object. Couldn&#39;t find an easy way to do it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4371190"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1447263020, "post_id": 33656200, "comment_id": 55085847, "body": "@SimonKraemer i m searching for a smaller way than this."}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1447263041, "post_id": 33656200, "comment_id": 55085864, "body": "You can use std::string member function to find specific characters in your string.  Once the characters positions are known, you can use the substr function to extract specific portions of the original string."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1447263409, "post_id": 33656200, "comment_id": 55086095, "body": "What you are describing here is called &quot;to tokenise a string&quot;. You will find an endless number of tutorials, questions, answers, example code and libraries with the search terms &quot;string tokenise c++&quot;."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1447263439, "post_id": 33656200, "comment_id": 55086110, "body": "@KishanKumar Converting <code>std::string</code> to a char array is by far not the easiest way to do this. See my answer"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4371190"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1447263554, "post_id": 33656200, "comment_id": 55086177, "body": "@SimonKraemer sorry my bad. Used to do this by that way."}, {"owner": {"reputation": 1712, "user_id": 369446, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zO6tb.jpg?s=128&g=1", "display_name": "Michael Shopsin", "link": "https://stackoverflow.com/users/369446/michael-shopsin"}, "edited": false, "score": 0, "creation_date": 1447267338, "post_id": 33656200, "comment_id": 55088535, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/17416800/how-to-read-string-from-file-and-tokenise-it-into-an-array\">How to read string from file and tokenise it into an array?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4290, "user_id": 311314, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9098882126e0907a9df39856ef1b5bfa?s=128&d=identicon&r=PG", "display_name": "Nathan Ernst", "link": "https://stackoverflow.com/users/311314/nathan-ernst"}, "edited": false, "score": 2, "creation_date": 1499439903, "post_id": 33656425, "comment_id": 76923195, "body": "There&#39;s no need to escape the the double-quote in the character literal. <code>&#39;&quot;&#39;</code> works. Arguably harder to read, but legal."}], "tags": [], "owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "is_accepted": true, "score": 1, "last_activity_date": 1447263336, "creation_date": 1447263336, "answer_id": 33656425, "question_id": 33656200, "link": "https://stackoverflow.com/questions/33656200/separating-a-sentence-in-specific-way/33656425#33656425", "title": "Separating a sentence in specific way", "body": "<p>Search for the first occurence of <code>\"</code>(don't forget escaping it to <code>\\\"</code>) using <a href=\"http://www.cplusplus.com/reference/string/string/find/\" rel=\"nofollow\"><code>std::string::find</code></a></p>\n\n<p>Then use <a href=\"http://www.cplusplus.com/reference/string/string/substr/\" rel=\"nofollow\"><code>std::string::substring</code></a> to split your string.</p>\n\n<p>Example:</p>\n\n<pre><code>int main()\n{\n    string line = \"SAY \\\"Welcome to the jungle\\\"\";\n    size_t split_pos = line.find('\\\"');\n    if (split_pos != string::npos) //No \" found\n    {\n        string firstPart = line.substr(0, split_pos); //Beginning to result\n        string secondPart = line.substr(split_pos);   //result to end\n\n        cout &lt;&lt; firstPart &lt;&lt; endl;\n        cout &lt;&lt; secondPart &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>SAY\n\"Welcome to the jungle\"\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 4332555, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0a9566e3fda605096592f8bc1c9020ae?s=128&d=identicon&r=PG&f=1", "display_name": "jesta", "link": "https://stackoverflow.com/users/4332555/jesta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 33656425, "answer_count": 1, "score": -1, "last_activity_date": 1499439653, "creation_date": 1447262644, "last_edit_date": 1499439653, "question_id": 33656200, "link": "https://stackoverflow.com/questions/33656200/separating-a-sentence-in-specific-way", "title": "Separating a sentence in specific way", "body": "<p>I'm reading a text file line by line with this code.</p>\n\n<pre><code>    fstream reader;\n    string text;\n    string readingArray[];\n    int length2;\n\n    while (getline(reader, text)) {\n                readingArrray[lenght2]=text;\n                lenght2++;\n\n            }\n</code></pre>\n\n<p>While reading I've got a line ' SAY \"Welcome to the jungle\"  '. And I want to seperate to two parts this line, like SAY and \"Welcome to the jungle\". </p>\n\n<p>So  I need; firstly the program should read the line until \" character. After that program should read the part  between \" and \\n characters. How can i do that?  </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2502, "user_id": 3367091, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/z4TTT.jpg?s=128&g=1", "display_name": "jensa", "link": "https://stackoverflow.com/users/3367091/jensa"}, "edited": false, "score": 0, "creation_date": 1447262954, "post_id": 33656183, "comment_id": 55085794, "body": "This site describes explicit/non-explicit constructors quite well: <a href=\"http://en.cppreference.com/w/cpp/language/explicit\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/explicit</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1858, "user_id": 4799193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a87fb12a6ad909323fb42a48e78b3f28?s=128&d=identicon&r=PG&f=1", "display_name": "ramana_k", "link": "https://stackoverflow.com/users/4799193/ramana-k"}, "is_accepted": false, "score": 2, "last_activity_date": 1447262816, "creation_date": 1447262816, "answer_id": 33656258, "question_id": 33656183, "link": "https://stackoverflow.com/questions/33656183/c-assignment-operator-and-overloading/33656258#33656258", "title": "C++ assignment operator and overloading", "body": "<p>Your constructor defines conversion from int to Integer</p>\n\n<pre><code>Integer(int value):i(value){}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11391, "user_id": 2508150, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6213045ef38ad15e90df7f6d7909f549?s=128&d=identicon&r=PG", "display_name": "Paolo M", "link": "https://stackoverflow.com/users/2508150/paolo-m"}, "is_accepted": true, "score": 7, "last_activity_date": 1447262828, "creation_date": 1447262828, "answer_id": 33656265, "question_id": 33656183, "link": "https://stackoverflow.com/questions/33656183/c-assignment-operator-and-overloading/33656265#33656265", "title": "C++ assignment operator and overloading", "body": "<p>You have not declared the <code>Integer</code> constructor <code>explicit</code>, so it acts as an implicit conversion from <code>int</code> to <code>Integer</code>.</p>\n\n<p>If you declare your constructor</p>\n\n<pre><code>explicit Integer(int value);\n</code></pre>\n\n<p>the compiler fires the error:</p>\n\n<blockquote>\n  <p>error: conversion from \u2018int\u2019 to non-scalar type \u2018Integer\u2019 requested</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1591, "user_id": 5397699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fy8CM.png?s=128&g=1", "display_name": "decltype_auto", "link": "https://stackoverflow.com/users/5397699/decltype-auto"}, "is_accepted": false, "score": 1, "last_activity_date": 1447263424, "last_edit_date": 1447263424, "creation_date": 1447263041, "answer_id": 33656319, "question_id": 33656183, "link": "https://stackoverflow.com/questions/33656183/c-assignment-operator-and-overloading/33656319#33656319", "title": "C++ assignment operator and overloading", "body": "<blockquote>\n  <p>I dont understand why d = 8 is possible. d is a user defined type.</p>\n</blockquote>\n\n<p>Just instrument your code a little more and also trace the ctor calls.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cassert&gt;\nusing namespace std;\n\nclass Integer{\nprivate:\n    int i;\npublic:\n    Integer(int value):i(value){\n        cout &lt;&lt; \"Integer(int) called with \" &lt;&lt; value &lt;&lt; endl; \n    }\n    // unary or binary\n    const Integer operator+(const Integer&amp; rv){\n        cout &lt;&lt; \"operator+\"&lt;&lt; endl;\n        return Integer(i + rv.i);\n    }\n    // Binary Operator\n    Integer&amp; operator+=(const Integer&amp; rv){\n        cout &lt;&lt; \"operator+=\" &lt;&lt; endl;\n        i += rv.i;\n        return *this;\n    }\n    ostream&amp; operator&lt;&lt;(ostream&amp; lv){\n        lv &lt;&lt; i;\n        return lv;\n    }\n    friend ostream&amp; operator&lt;&lt; (ostream&amp; lv, Integer&amp; rv);\n};\n\nostream&amp; operator&lt;&lt; (ostream&amp; lv,Integer&amp; rv){\n    return lv &lt;&lt; rv.i;\n}\n\nint main(){\n    Integer d = 8;\n     cout &lt;&lt; d &lt;&lt; endl;\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>Integer(int) called with 8\n8\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/fc4e108f9a64cef2\" rel=\"nofollow\"><strong>live</strong></a> at Coliru's</p>\n\n<p>The presumed assignment of the immediate 8 in fact causes the non-<a href=\"http://en.cppreference.com/w/cpp/language/explicit\" rel=\"nofollow\">explicit</a> <code>Integer(int)</code> ctor to be called with 8 as its argument. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4603522"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 1, "accepted_answer_id": 33656265, "answer_count": 3, "score": 4, "last_activity_date": 1447263424, "creation_date": 1447262598, "question_id": 33656183, "link": "https://stackoverflow.com/questions/33656183/c-assignment-operator-and-overloading", "title": "C++ assignment operator and overloading", "body": "<p>I was wondering why the following code is being compiled successfully.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cassert&gt;\nusing namespace std;\n\nclass Integer{\nprivate:\n    int i;\npublic:\n    Integer(int value):i(value){}\n    // unary or binary\n    const Integer operator+(const Integer&amp; rv){\n        cout &lt;&lt; \"operator+\"&lt;&lt; endl;\n        return Integer(i + rv.i);\n    }\n    // Binary Operator\n    Integer&amp; operator+=(const Integer&amp; rv){\n        cout &lt;&lt; \"operator+=\" &lt;&lt; endl;\n        i += rv.i;\n        return *this;\n    }\n    ostream&amp; operator&lt;&lt;(ostream&amp; lv){\n        lv &lt;&lt; i;\n        return lv;\n    }\n    friend ostream&amp; operator&lt;&lt; (ostream&amp; lv, Integer&amp; rv);\n};\n\nostream&amp; operator&lt;&lt; (ostream&amp; lv,Integer&amp; rv){\n    return lv &lt;&lt; rv.i;\n}\n\nint main(){\n    cout &lt;&lt; \"using operator overloading\"&lt;&lt; endl;\n\n    Integer c(0), a(4), b(5);\n    Integer d = 8;\n    c = a + b;\n    cout &lt;&lt; c &lt;&lt; endl;\n    cout &lt;&lt; d &lt;&lt; endl;\n}\n</code></pre>\n\n<p>I dont understand why d = 8 is possible. d is a user defined type. I did not overloaded the assignment oeprator for the Integer class. Is there a default overloaded operator?</p>\n"}, {"tags": ["c++", "objective-c", "xcode", "boost-asio", "djinni"], "comments": [{"owner": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "edited": false, "score": 1, "creation_date": 1447266696, "post_id": 33656144, "comment_id": 55088103, "body": "<code>dispatch_async</code> is <i>not</i> objective-c; there shouldnt be any reason you can&#39;t call it from C++ code if you include the correct GCD headers. additionally being a background thread has noting to do with C++ or any other language. something you are doing is running the code in question on a thread other than main."}, {"owner": {"reputation": 1573, "user_id": 2490989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pjhbG.jpg?s=128&g=1", "display_name": "stephenspann", "link": "https://stackoverflow.com/users/2490989/stephenspann"}, "reply_to_user": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "edited": false, "score": 0, "creation_date": 1447272616, "post_id": 33656144, "comment_id": 55091510, "body": "@BradAllred makes sense. so it seems like the culprit is most likely <code>boost::thread</code> which starts a new thread different from main."}, {"owner": {"reputation": 1073, "user_id": 1810954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c62696508b9a29d4db251c61ad3a89?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1810954/andrew"}, "edited": false, "score": 1, "creation_date": 1447381266, "post_id": 33656144, "comment_id": 55142507, "body": "The primary question is already answered, but note that while dispatch_async isn&#39;t ObjC, it is specific to Apple platforms.  If your goal is to keep your C++ code platform-agnostic, you could use another Djinni interface to expose a callOnUIThread() method, which you could implement in ObjC with dispatch_async for iOS, then in Java with <code>new Handler(Looper.getMainLooper()).post()</code>.  Djinni has a sample platform_threads interface which doesn&#39;t do this, but does do thread creation, which is a very similar need of per-platform code having to call back to C++ code on a specific thread."}, {"owner": {"reputation": 1573, "user_id": 2490989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pjhbG.jpg?s=128&g=1", "display_name": "stephenspann", "link": "https://stackoverflow.com/users/2490989/stephenspann"}, "reply_to_user": {"reputation": 1073, "user_id": 1810954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c62696508b9a29d4db251c61ad3a89?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1810954/andrew"}, "edited": false, "score": 0, "creation_date": 1447686623, "post_id": 33656144, "comment_id": 55245386, "body": "good to know, thank you @atwyman!"}], "answers": [{"tags": [], "owner": {"reputation": 27306, "user_id": 508595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7845b0412379ba0f0e2e68d0b2e5d23b?s=128&d=identicon&r=PG&f=1", "display_name": "Jody Hagins", "link": "https://stackoverflow.com/users/508595/jody-hagins"}, "is_accepted": true, "score": 2, "last_activity_date": 1447339760, "last_edit_date": 1447339760, "creation_date": 1447286258, "answer_id": 33662108, "question_id": 33656144, "link": "https://stackoverflow.com/questions/33656144/modifying-the-autolayout-engine-from-a-background-thread-error-from-c/33662108#33662108", "title": "Modifying the autolayout engine from a background thread error, from C++", "body": "<p>All access to the UI classes <strong>must</strong> take place on the main thread.  Your boost timer does not run on the main thread.</p>\n\n<p>Thus, it probably makes sense to have your timer fire on the main thread.  You can use the standard libdispatch API, even with pure C++ code (does not have to be .mm ObjC++).</p>\n\n<p>Be sure to add <code>#include &lt;dispatch/dispatch.h&gt;</code> to your CPP implementation file.</p>\n\n<p>The following code change will make sure that the timer always runs on the Cocoa main thread.</p>\n\n<pre><code>void TimerImpl::TimerTick(const boost::system::error_code&amp; e) {\n    if(e != boost::asio::error::operation_aborted) {\n        time_remaining_--;\n        std:: cout &lt;&lt; \"C++: TimerTick() with \" &lt;&lt; std::to_string(time_remaining_) &lt;&lt; \" seconds remaining.\\n\";\n\n        if (time_remaining_ &gt; 0) {\n            timer_.expires_from_now(boost::posix_time::seconds(1));\n            timer_.async_wait(boost::bind(&amp;TimerImpl::TimerTick, this, boost::asio::placeholders::error));\n\n            auto listener = listener_;\n            auto time_remaining = time_remaining_;\n            dispatch_async(dispatch_get_main_queue(), ^{\n               listener-&gt;TimerTicked(time_remaining);\n            });\n        } else {\n            auto listener = listener_;\n            dispatch_async(dispatch_get_main_queue(), ^{\n                listener-&gt;TimerEnded();\n            });\n        }\n    }\n}\n</code></pre>\n\n<p>I assume the rest of that code works.  All I did was modify how the callbacks are invoked.  Note that we create a copy of the <code>listener_</code> <code>shared_ptr</code> and the <code>time_remaining_</code> value.  These will be captured (and copied) by the block that gets executed on the main thread.</p>\n\n<p>If you can guarantee that <code>this</code> will not delete before that block executes, then you can implicitly capture <code>this</code>...</p>\n\n<pre><code>dispatch_async(dispatch_get_main_queue(), ^{\n   listener_-&gt;TimerTicked(time_remaining_);\n});\n</code></pre>\n\n<p>Or, if you enable shared-from-this, you can create a copy of the shared pointer to <code>this</code> and capture it that way...</p>\n\n<pre><code>auto self = shared_from_this();\ndispatch_async(dispatch_get_main_queue(), ^{\n   self-&gt;listener_-&gt;TimerTicked(self-&gt;time_remaining_);\n});\n</code></pre>\n\n<p>There are a number of ways to do this, but this may be the easiest, and now you ensure all your timers fire through to the Cocoa main thread.</p>\n"}], "owner": {"reputation": 1573, "user_id": 2490989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pjhbG.jpg?s=128&g=1", "display_name": "stephenspann", "link": "https://stackoverflow.com/users/2490989/stephenspann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 33662108, "answer_count": 1, "score": 0, "last_activity_date": 1447339760, "creation_date": 1447262467, "last_edit_date": 1495541766, "question_id": 33656144, "link": "https://stackoverflow.com/questions/33656144/modifying-the-autolayout-engine-from-a-background-thread-error-from-c", "title": "Modifying the autolayout engine from a background thread error, from C++", "body": "<p>I get the following error in Xcode 7.1 when making a UI call from C++, through a two-way djinni architecture:</p>\n\n<p><code>This application is modifying the autolayout engine from a background thread, which can lead to engine corruption and weird crashes.  This will cause an exception in a future release.</code></p>\n\n<p>I am able to solve the problem in Objective-C with the solution given here:</p>\n\n<p><a href=\"https://stackoverflow.com/a/28321213/2490989\">Getting a \u201cThis application is modifying the autolayout engine\u201d error?</a></p>\n\n<pre><code>dispatch_async(dispatch_get_main_queue(), ^{\n    // code here\n});\n</code></pre>\n\n<p>My question is, is there a way to somehow accomplish this from within C++ without having to call dispatch_async in Objective-C at every call to the UI? Or is every call from C++ considered a background thread as far as Xcode is concerned?</p>\n\n<hr>\n\n<p>Posting relevant code with auto-generated source files omitted, full project also available on <a href=\"https://github.com/spanndemic/cpp-timer\" rel=\"nofollow noreferrer\">github</a>:</p>\n\n<p><strong>cpptimer.djinni:</strong></p>\n\n<pre><code>timer = interface +c {\n    static create_with_listener(listener: timer_listener): timer;\n    start_timer(seconds: i32);\n}\n\ntimer_listener = interface +j +o {\n    timer_ticked(seconds_remaining: i32);\n    timer_ended();\n}\n</code></pre>\n\n<p><strong>timer_impl.hpp</strong></p>\n\n<pre><code>#pragma once\n\n#include &lt;boost/asio.hpp&gt;\n\n#include \"timer.hpp\"\n#include \"timer_listener.hpp\"\n\nnamespace cpptimer {\n\n    class TimerImpl : public Timer {\n\n    public:\n\n        TimerImpl(const std::shared_ptr&lt;TimerListener&gt; &amp; listener);\n\n        void StartTimer(int32_t seconds);\n\n    private:\n\n        void TimerTick(const boost::system::error_code&amp; e);\n\n        std::shared_ptr&lt;TimerListener&gt; listener_;\n\n        boost::asio::io_service io_service_;\n        boost::asio::deadline_timer timer_;\n        int time_remaining_;\n\n    };\n\n}\n</code></pre>\n\n<p><strong>timer_impl.cpp</strong></p>\n\n<pre><code>#include &lt;boost/bind.hpp&gt;\n#include &lt;boost/thread.hpp&gt;\n\n#include \"timer_impl.hpp\"\n\nnamespace cpptimer {\n\n    std::shared_ptr&lt;Timer&gt; Timer::CreateWithListener(const std::shared_ptr&lt;TimerListener&gt; &amp; listener) {\n        return std::make_shared&lt;TimerImpl&gt;(listener);\n    }\n\n    TimerImpl::TimerImpl(const std::shared_ptr&lt;TimerListener&gt; &amp; listener):\n            io_service_(),\n            timer_(io_service_, boost::posix_time::seconds(1)) {\n        listener_ = listener;\n    }\n\n    void TimerImpl::StartTimer(int32_t seconds) {\n        time_remaining_ = seconds;\n        io_service_.reset();\n        timer_.async_wait(boost::bind(&amp;TimerImpl::TimerTick, this, boost::asio::placeholders::error));\n        boost::thread th([&amp;] { io_service_.run(); });\n    }\n\n    void TimerImpl::TimerTick(const boost::system::error_code&amp; e) {\n        if(e != boost::asio::error::operation_aborted) {\n            time_remaining_--;\n            std:: cout &lt;&lt; \"C++: TimerTick() with \" &lt;&lt; std::to_string(time_remaining_) &lt;&lt; \" seconds remaining.\\n\";\n            if (time_remaining_ &gt; 0) {\n                timer_.expires_from_now(boost::posix_time::seconds(1));\n                timer_.async_wait(boost::bind(&amp;TimerImpl::TimerTick, this, boost::asio::placeholders::error));\n                listener_-&gt;TimerTicked(time_remaining_);\n            } else {\n                listener_-&gt;TimerEnded();\n            }\n        }\n    }\n\n}\n</code></pre>\n\n<p><strong>ViewController.h</strong></p>\n\n<pre><code>#import &lt;UIKit/UIKit.h&gt;\n\n#import \"CPPTTimerListener.h\"\n\n@interface ViewController : UIViewController&lt;CPPTTimerListener&gt;\n\n@property (nonatomic, strong) IBOutlet UILabel *timerLabel;\n\n@end\n</code></pre>\n\n<p><strong>ViewController.m</strong></p>\n\n<pre><code>#import \"ViewController.h\"\n#import \"CPPTTimer.h\"\n\n@interface ViewController () {\n    CPPTTimer *_timer;\n}\n\n@end\n\n@implementation ViewController\n\n@synthesize timerLabel;\n\n- (void)viewDidLoad {\n\n    [super viewDidLoad];\n\n    // initialize the timer\n    _timer = [CPPTTimer createWithListener:self];\n\n    // start a 5 second timer\n    [_timer startTimer:5];\n\n}\n\n# pragma mark CPPTTimerListener methods\n\n- (void)timerEnded {\n    NSLog(@\"Obj-C: timerEnded.\");\n}\n\n- (void)timerTicked:(int32_t)secondsRemaining {\n    NSLog(@\"Obj-C: timerTicked with %d seconds remaining.\", secondsRemaining);\n    // without dispatch_async, background thread warning is thrown\n    dispatch_async(dispatch_get_main_queue(), ^{\n        timerLabel.text = [NSString stringWithFormat:@\"%d\", secondsRemaining];\n    });\n}\n\n@end\n</code></pre>\n"}, {"tags": ["c++", "c++11", "variadic-templates"], "comments": [{"owner": {"reputation": 2721, "user_id": 880984, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/65f4fa9056d1884b419463410e92c5be?s=128&d=identicon&r=PG", "display_name": "Tim Seguine", "link": "https://stackoverflow.com/users/880984/tim-seguine"}, "edited": false, "score": 0, "creation_date": 1447263092, "post_id": 33656057, "comment_id": 55085893, "body": "One thing to keep in mind with templating on array types like this is: there is a separate instantiation for each size of array that you use it on. Depending on how many differently sized arrays you have in your program, that could mean a significant amount of bloat."}], "answers": [{"tags": [], "owner": {"reputation": 11117, "user_id": 1554020, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/49118fbd7e64a00bc99b19d41e5e28e0?s=128&d=identicon&r=PG", "display_name": "yuri kilochek", "link": "https://stackoverflow.com/users/1554020/yuri-kilochek"}, "is_accepted": true, "score": 6, "last_activity_date": 1447262734, "creation_date": 1447262734, "answer_id": 33656225, "question_id": 33656057, "link": "https://stackoverflow.com/questions/33656057/variadic-templates-and-c-arrays/33656225#33656225", "title": "Variadic templates and C arrays", "body": "<p>Yes. Use perfect forwarding:</p>\n\n<pre><code>#include &lt;utility&gt;\n\ntemplate&lt;class ...Us&gt; void mycall(Us&amp;&amp;... args) {\n    int xs[] = { args_fwd_(std::forward&lt;Us&gt;(args))... };\n}\n</code></pre>\n"}], "owner": {"reputation": 1630, "user_id": 1516296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dee3fa134d286ab6729e56b7ed816e0e?s=128&d=identicon&r=PG", "display_name": "JoshG79", "link": "https://stackoverflow.com/users/1516296/joshg79"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 872, "favorite_count": 0, "accepted_answer_id": 33656225, "answer_count": 1, "score": 6, "last_activity_date": 1447262734, "creation_date": 1447262163, "question_id": 33656057, "link": "https://stackoverflow.com/questions/33656057/variadic-templates-and-c-arrays", "title": "Variadic templates and C arrays", "body": "<p>I'm trying to compile the following piece of code:</p>\n\n<pre><code>template &lt;typename T, int N&gt; void foo( const T (&amp;array)[N]) {}\n\ntemplate &lt;typename T&gt; static int args_fwd_(T const &amp;t) { foo(t); return 0; }\n\ntemplate&lt;class ...Us&gt; void mycall(Us... args) {\n    int xs[] = { args_fwd_(args)... };\n}\n\nint main(void) {\n    int b[4];\n    mycall(b);\n}\n</code></pre>\n\n<p>The <code>mycall</code> function uses variadic templates and then forwards to the <code>args_fwd_</code> function to call the function <code>foo</code> on each argument.</p>\n\n<p>This works fine for most argument types (assuming I have appropriately defined <code>foo</code> functions). But when I try to pass a C-style array (<code>int b[4]</code>) it gets turned into a pointer and then it can't find the templated <code>foo</code> function that requires an array (not pointer). The error from gcc 4.9.3 is as follows:</p>\n\n<pre><code>error: no matching function for call to \u2018foo(int* const&amp;)\u2019\nnote: candidate is:\nnote: template&lt;class T, int N&gt; void foo(const T (&amp;)[N])\n   template &lt;typename T, int N&gt; void foo( const T (&amp;array)[N]) {}\nnote:   template argument deduction/substitution failed:\nnote:   mismatched types \u2018const T [N]\u2019 and \u2018int* const\u2019\n</code></pre>\n\n<p>Note the part about looking for a pointer. This is the same in clang as well so apparently this is standard compliant. Is there a way to preserve that this is a C array without it getting converted to a pointer?</p>\n"}, {"tags": ["c++", "qt", "api", "maps", "here-api"], "answers": [{"tags": [], "owner": {"reputation": 2385, "user_id": 1009270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33fcdc9c0604cf69abb15e17840d2a3c?s=128&d=identicon&r=PG", "display_name": "john elemans", "link": "https://stackoverflow.com/users/1009270/john-elemans"}, "is_accepted": true, "score": 0, "last_activity_date": 1447273019, "creation_date": 1447273019, "answer_id": 33659067, "question_id": 33655868, "link": "https://stackoverflow.com/questions/33655868/how-to-display-maps-using-here-api-with-qt/33659067#33659067", "title": "How to display maps using HERE api with Qt?", "body": "<p>QGeoServiceProvider expects a plugin for the service that you want to use. If you have a plugin for \"Here\" then you just use the Qt class methods to access the provider.</p>\n\n<p>I expect that you don't have a plugin, though. In that case you should just consider using the REST api for the \"Here\" service. To use that  you want to look at their REST api instructions and QNetworkAccessManager and QNetworkRequest examples.</p>\n"}], "owner": {"reputation": 75, "user_id": 2471711, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a89b6532ecd20c64a26eae7bc6e047d1?s=128&d=identicon&r=PG", "display_name": "user2471711", "link": "https://stackoverflow.com/users/2471711/user2471711"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 870, "favorite_count": 0, "accepted_answer_id": 33659067, "answer_count": 1, "score": 1, "last_activity_date": 1447273019, "creation_date": 1447261604, "question_id": 33655868, "link": "https://stackoverflow.com/questions/33655868/how-to-display-maps-using-here-api-with-qt", "title": "How to display maps using HERE api with Qt?", "body": "<p>I am fairly new to Qt and want to create a program which will display a map of a specific location, (and later i plan on adding things like adjusting zoom, etc). from what I've read on the Qt documentation i can use the HERE api to get the maps. I don't really know though how i can implement this and the example given in the documentation (below) isn't much help :</p>\n\n<pre><code> QMap&lt;QString,QVariant&gt; params;\nparams[\"here.app_id\"] = \"myapp\";\nparams[\"here.token\"] = \"abcdefg12345\";\n\nQGeoServiceProvider *gsp = new QGeoServiceProvider(\"here\", params);\n</code></pre>\n\n<p>The documentation on the HERE api website is just for javascript, so I don't know where else i can really see more examples for C++. </p>\n\n<p>Could someone please either provide some code which i could then use and work with or guide me on what i should do to achieve what i want.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "templates", "typename"], "answers": [{"comments": [{"owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "edited": false, "score": 0, "creation_date": 1447262075, "post_id": 33655928, "comment_id": 55085281, "body": "I tried something along these lines and edited the question. My point is to get rid of the specialised implementations."}, {"owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "edited": false, "score": 0, "creation_date": 1447262708, "post_id": 33655928, "comment_id": 55085645, "body": "Thanks for the edit - I tried it any my compiler does not like it. Is that compiler specific?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "edited": false, "score": 0, "creation_date": 1447262988, "post_id": 33655928, "comment_id": 55085825, "body": "Sorry, I had an error there. I forgot to use <code>output</code> with <code>LogUser_CPP</code>."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1447262954, "last_edit_date": 1447262954, "creation_date": 1447261805, "answer_id": 33655928, "question_id": 33655818, "link": "https://stackoverflow.com/questions/33655818/moving-a-generic-template-with-restrictions-out-of-the-class-definition/33655928#33655928", "title": "Moving a generic template with restrictions out of the class definition", "body": "<p>Use:</p>\n\n<pre><code>template &lt;&gt;\nvoid LogUser_CPP&lt;normal&gt;::print(void) { normal::log(\"normal specialisation\"); }\n\ntemplate &lt;&gt;\nvoid LogUser_CPP&lt;other&gt;::print(void) { other::log(\"other specialisation\"); }\n</code></pre>\n\n<p>or</p>\n\n<pre><code>template&lt;typename output&gt;\nvoid LogUser_CPP&lt;output&gt;::print(void)\n{\n    output::log(\"template\");\n}\n</code></pre>\n"}], "owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 33655928, "answer_count": 1, "score": 0, "last_activity_date": 1447262954, "creation_date": 1447261436, "last_edit_date": 1447262649, "question_id": 33655818, "link": "https://stackoverflow.com/questions/33655818/moving-a-generic-template-with-restrictions-out-of-the-class-definition", "title": "Moving a generic template with restrictions out of the class definition", "body": "<p>The following example compiles and shows the correct endresult. EDIT: in the sense that three lines are printed.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nstruct normal\n{\n    static void log(const char * out) { cout &lt;&lt; out &lt;&lt; endl; }\n};\n\nstruct other\n{\n    static void log(const char * out) { cout &lt;&lt; out &lt;&lt; endl; }\n};\n\n//Implementation inside the class declaration\ntemplate&lt;typename output = normal&gt;\nclass LogUser_H\n{\npublic:\n    void print() { output::log(\"template\"); }\n};\n\n//Move Implementation moved out of the class declaration\ntemplate&lt;typename output = normal&gt;\nclass LogUser_CPP\n{\npublic:\n    void print();\n};\n\n//Specialised definitions\nvoid LogUser_CPP&lt;struct normal&gt;::print(void) { normal::log(\"normal specialisation\"); }\nvoid LogUser_CPP&lt;struct other&gt;::print(void) { other::log(\"other specialisation\"); }\n\n//Template definition ?\n//void LogUser_CPP&lt;/*??*/output/*??*/&gt;::print(void)\n//{\n//    output::log(\"template\");\n//}\n\nint main()\n{\n    LogUser_H&lt;&gt; H;\n    H.print();\n    LogUser_CPP&lt;&gt; C1;\n    C1.print();\n    LogUser_CPP&lt;other&gt; C2;\n    C2.print();\n}\n</code></pre>\n\n<p>The class <code>LogUser_H</code> has a method that calls a function in a struct. <code>LogUser_CPP</code> is meant to do the same with the twist that I want to move the method definition out of the class definition and write it below. Doing so I no longer have a definition for <code>output</code> and I can not get to the function in structs that fulfil the output requirement. I can however provide specialized versions of struct and compile that way. </p>\n\n<p>How can I delete the two specialized implementations <code>void LogUser_CPP&lt;struct normal&gt;::print(void)</code> and <code>void LogUser_CPP&lt;struct other&gt;::print(void)</code>? In want to replace them with a generic implementation looking something like the commented out implementation <code>void LogUser_CPP&lt;/*??*/output/*??*/&gt;::print(void)</code>.</p>\n\n<p>EDIT 1:\nI tried the following:</p>\n\n<pre><code>//Specialised definitions\n//void LogUser_CPP&lt;struct normal&gt;::print(void) { normal::log(\"normal specialisation\"); }\n//void LogUser_CPP&lt;struct other&gt;::print(void) { other::log(\"other specialisation\"); }\ntemplate&lt;&gt;\nvoid LogUser_CPP&lt;&gt;::print(void)\n{\n    output::log(\"template\");\n}\n</code></pre>\n\n<p>This will not compile.</p>\n\n<p>EDIT 2: \nI tried the following:</p>\n\n<pre><code>//Specialised definitions\n//void LogUser_CPP&lt;struct normal&gt;::print(void) { normal::log(\"normal specialisation\"); }\n//void LogUser_CPP&lt;struct other&gt;::print(void) { other::log(\"other specialisation\"); }\ntemplate&lt;typename output&gt;\nvoid LogUser_CPP&lt;&gt;::print(void)\n{\n    output::log(\"template\");\n}\n</code></pre>\n\n<p>This will not compile.\nThe error is <code>error C3211: 'LogUser_CPP&lt;normal&gt;::print' : explicit specialization is using partial specialization syntax, use template &lt;&gt; instead</code>\nCould this be compiler specific? This computer has VS2013 Express on it.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 4, "creation_date": 1447261818, "post_id": 33655770, "comment_id": 55085131, "body": "Could you just use an integer instead of the enum, and use eg. <code>if (v &gt;= 30) {</code> instead of <code>if (v &gt;= v30) {</code>?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1447261999, "post_id": 33655770, "comment_id": 55085236, "body": "In any case, there is no real dependency on <code>version.h</code>, unless an edit <i>re-orders</i> the enum, which seems like it would be outside of the anticipated behaviour (and thus cause for <code>make clean</code>)."}, {"owner": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1447262581, "post_id": 33655770, "comment_id": 55085571, "body": "@Dmitri the labels (like v30) are more complicated, and do not easily translate to numbers. I used v1-v100 for simplicity"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1447263158, "post_id": 33655770, "comment_id": 55085943, "body": "Well, each of your other files gets recompiled because it <code>#include</code>s a file you&#39;ve modified, not because they use the enum per se.  But if you can&#39;t either get rid of the <code>#include</code> or stop modifying that header (or dependencies of that header), the problem will persist.  You could split the <code>read</code> functions to different source files so that less code gets recompiled, I guess."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1447263293, "post_id": 33655770, "comment_id": 55086021, "body": "Who is John Lakos, what are you citing and where is the figure the author is talking about?"}, {"owner": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1447263750, "post_id": 33655770, "comment_id": 55086293, "body": "@ChristianHackl : He&#39;s the author of the classic book &#39;Large Scale C++ Software Design&#39;. <a href=\"http://www.informit.com/articles/article.aspx?p=2088514\" rel=\"nofollow noreferrer\">informit.com/articles/article.aspx?p=2088514</a>"}, {"owner": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1447265106, "post_id": 33655770, "comment_id": 55087097, "body": "@Dmitri this is not an effective solution. Every day, one of 100 programmers changes one of 600 of these type*.cpp files, causing 600 files to recompile for each of the 100 programmers. I really need to take this number down to 1-2 files."}, {"owner": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1447265520, "post_id": 33655770, "comment_id": 55087349, "body": "@ChristianHackl here&#39;s a free copy for you... <a href=\"http://cs.brown.edu/courses/cs190/2008/documents/lakos/chapter0.pdf\" rel=\"nofollow noreferrer\">cs.brown.edu/courses/cs190/2008/documents/lakos/chapter0.pdf</a>"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 1, "creation_date": 1447265611, "post_id": 33655770, "comment_id": 55087401, "body": "Use macros instead of enum labels, and multiple headers (one per version, eg. version_v1.h, version_v2.h, etc.).  Each header can #include the previous and define its macro in terms of the previous (eg. <code>#include &quot;version_v29.h&quot;</code> then <code>#define v30 (v29+1)</code>, and each source file can include just the header for the minimum version it requires.  That way only sources needing a new version depend on a new or changed header.  Of course, that could make a lot of work for the preprocessor.."}, {"owner": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1447266158, "post_id": 33655770, "comment_id": 55087750, "body": "@Dmitri (+1) good idea if you don&#39;t mind about exploding the enum into many files. Unfortunately there is a reason for the enum, in that it keeps all the relevant entries together. If you allow to create one file for each version, the chain might be broken accidentally into 2 tails, and you might never see it. The entries in the enum are helpful, because if 2 programmers try to create a new Version entry, the VCS will stop due to the conflict in code"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1447267022, "post_id": 33655770, "comment_id": 55088326, "body": "If you&#39;re using GNU make, try it with <code>-o version.h</code>?"}, {"owner": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1447331834, "post_id": 33655770, "comment_id": 55115835, "body": "@Dmitri you mean like <code>g++ typeA.cpp -o version.h</code> ?  what&#39;s that good for ? Can you try to clarify your suggestion please ?"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1447347643, "post_id": 33655770, "comment_id": 55127125, "body": "Not <code>-o</code> for <i>g++</i>, <code>-o</code> for <i>make</i>... it makes make treat the file as if it were old, so other targets won&#39;t get rebuilt because it has changed (at least according to the docs... I haven&#39;t used that feature personally)."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1447262221, "post_id": 33655958, "comment_id": 55085376, "body": "By &quot;each of the other source files reads that configuration file&quot;, I suppose you mean that the functions in each source file read the configuration file <i>at run time</i>, or something to that general effect.  Yes?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1447262784, "post_id": 33655958, "comment_id": 55085687, "body": "Yes, exactly, each source file opens the configuration file for reading, reads the contents, parses the contents, uses the contents"}, {"owner": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "edited": false, "score": 0, "creation_date": 1447262872, "post_id": 33655958, "comment_id": 55085748, "body": "Can you provide an example for that please ? I am not sure I follow."}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1447261890, "creation_date": 1447261890, "answer_id": 33655958, "question_id": 33655770, "link": "https://stackoverflow.com/questions/33655770/enum-in-header-causes-excessive-recompilations/33655958#33655958", "title": "enum in header causes excessive recompilations", "body": "<p>You can place the enum in a separate .cfg file, as configuration data, then each of the other source files reads that configuration file.  </p>\n\n<p>Then when the configuration file is changed, no re-compile is needed.  </p>\n\n<p>All the other files read/parse the configuration file.</p>\n\n<p>This is the classic method of handling such info.</p>\n\n<p>Note: the configuration file would not contain an enum but rather certain formatted data.</p>\n"}, {"comments": [{"owner": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "edited": false, "score": 0, "creation_date": 1447332315, "post_id": 33658485, "comment_id": 55116146, "body": "If I do that, then I couple this file with <i>all</i> the &quot;ObjectXXX.h&quot; files. I will have reduced the effect of change on &quot;version.h&quot; on the system, but &quot;readObject.cpp&quot; will have thousands more reasons to recompile. However, there <i>are</i> gains with this method."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "edited": false, "score": 0, "creation_date": 1447333009, "post_id": 33658485, "comment_id": 55116566, "body": "@Grim Fandango: Yes, but at least it is 1 file.. All the untoched ObjectX.cpp would not recompile."}], "tags": [], "owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": false, "score": 1, "last_activity_date": 1447270632, "creation_date": 1447270632, "answer_id": 33658485, "question_id": 33655770, "link": "https://stackoverflow.com/questions/33655770/enum-in-header-causes-excessive-recompilations/33658485#33658485", "title": "enum in header causes excessive recompilations", "body": "<p>I'm not sure to understand your versioning system. Can't you decouple the objects definitions from the reading?</p>\n\n<pre><code>// ObjectA.cpp\n\n#include\"ObjectA.h\"  \n\n// define ObjectA\n\nvoid ObjectA::setPar ( float xx, float yy, float zz) \n{\n    x = v[0];\n    y = v[1];\n    z = v[2]; \n}\n</code></pre>\n\n<p>then</p>\n\n<pre><code>// typeB.cpp\n\n#include\"ObjectB.h\"  \n\n// define ObjectB\n\nvoid ObjectB::setPar ( float mm, float vv, color cc) \n{\n    mass = mm;\n    velocity = vv;\n    color = cc; \n}\n</code></pre>\n\n<p>then in one (big) file</p>\n\n<pre><code>// readObject.cpp\n\n#include\"version.h\"\n#include\"ObjectA.h\"\n#include\"ObjectB.h\"\n\nvoid read (FILE *f, ObjectA *p, Version v) \n{\n    float x,y,z;\n    read_float(f, x);\n    read_float(f, y);\n    if (v &gt;= v100) { \n        read_float(f, z);  // after v100 ObjectA becomes a 3D\n    } else z=0.0;          // whatever\n    p-&gt;setPar(x,y,z);\n}\n\nvoid read (FILE *f, ObjectB *p, Version v)\n{\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1447270632, "creation_date": 1447261301, "last_edit_date": 1447262483, "question_id": 33655770, "link": "https://stackoverflow.com/questions/33655770/enum-in-header-causes-excessive-recompilations", "title": "enum in header causes excessive recompilations", "body": "<blockquote>\n  <p>John Lakos refers to this problem as <em>an insidious source of\n  compile-time coupling</em> (Figure 0-3, in his Introduction):</p>\n</blockquote>\n\n<p>The problem I am facing is that too many files get compiled because there is a physical dependency on a single enum.</p>\n\n<p>I have a header with the enum definition:</p>\n\n<pre><code>// version.h\nenum Version {\n    v1 = 1,\n    v2, v3, v4, v5, ... v100\n};\n</code></pre>\n\n<p>and this is used by hundreds of files.\nEach file defines a class of objects, which have to be read from the disk,\nusing the <code>read()</code> function. <code>Version</code> is used to determine the way data is to be read.</p>\n\n<p>Every time a new class or class member is introduced, a new entry is appended to the enum </p>\n\n<pre><code>// typeA.cpp\n#include \"version.h\"\n\nvoid read (FILE *f, ObjectA *p, Version v) \n{\n    read_float(f, &amp;p-&gt;x);\n    read_float(f, &amp;p-&gt;y);\n    if (v &gt;= v100) { \n        read_float(f, &amp;p-&gt;z);  // after v100 ObjectA becomes a 3D\n    }\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>// typeB.cpp\n#include \"version.h\"\n\nvoid read (FILE *f, ObjectB *p, Version v)\n{\n    read_float (f, &amp;p-&gt;mass);\n    if (v &gt;= v30) {\n        read_float (f, &amp;p-&gt;velocity);\n    }\n    if (v &gt;= v50) {\n        read_color (f, &amp;p-&gt;color);\n    }\n}\n</code></pre>\n\n<p>Now, as you can see, once <code>ObjectA</code> changes, we have to introduce  a new entry (say <code>v100</code>) to the <code>Version</code>. Consequently all <code>type*.cpp</code> files will be compiled, even though only <code>read()</code> of <code>ObjectA</code> really needs the <code>v100</code> entry.</p>\n\n<p><strong>How can I invert the dependency on the enum, with minimal changes to the client (i.e. <code>type*.cpp</code>) code, so that only the necessary .c files compile ?</strong></p>\n\n<p>Here is a possible solution, that I thought of, but I need a better one:</p>\n\n<p>I was thinking that I could put the enum in a .cpp file, and expose <code>int</code>s with the values of the respective enum members:</p>\n\n<pre><code>//version.cpp\nenum eVersion {\n    ev1 = 1,\n    ev2, ev3, ev4, ev5, ... ev100\n};\n\nconst int v1 = ev1;\nconst int v2 = ev2;\n....\nconst int v100 = ev100;   // introduce a new global int for every new entry in the enum\n</code></pre>\n\n<p>make an alias for the <code>Version</code> type somehow</p>\n\n<pre><code>//version.h\ntypedef const int Version;\n</code></pre>\n\n<p>and introduce only the const int values that are needed each time:</p>\n\n<pre><code>// typeA.cpp\n#include \"version.h\"\n\nextern Version v100;    ///// *** will be resolved at link time\n\nvoid read (FILE *f, ObjectA *p, Version v) \n{\n    read_float(f, &amp;p-&gt;x);\n    read_float(f, &amp;p-&gt;y);\n    if (v &gt;= v100) { \n        read_float(f, &amp;p-&gt;z);  // after v100 ObjectA becomes a 3D\n    }\n}\n</code></pre>\n\n<p>but I think this looks like very poor solution, which dates back to pre-header times</p>\n"}, {"tags": ["c++", "qt", "qcustomplot"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5551490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5519ced0f1f39234ffed8c29948495fc?s=128&d=identicon&r=PG&f=1", "display_name": "A.P.", "link": "https://stackoverflow.com/users/5551490/a-p"}, "edited": false, "score": 0, "creation_date": 1448454310, "post_id": 33667508, "comment_id": 55593965, "body": "Thanks, I tried it before, but I used a &quot;rescale&quot; after, so no wonder it didn&#39;t work out for me!"}], "tags": [], "owner": {"reputation": 274, "user_id": 4632067, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/UJt10.jpg?s=128&g=1", "display_name": "Davy", "link": "https://stackoverflow.com/users/4632067/davy"}, "is_accepted": true, "score": 0, "last_activity_date": 1447318269, "creation_date": 1447318269, "answer_id": 33667508, "question_id": 33655743, "link": "https://stackoverflow.com/questions/33655743/how-to-reset-x-and-y-axis-in-qcustomplot-after-replotting-qt/33667508#33667508", "title": "How to reset x and y axis in qcustomplot after replotting (Qt)", "body": "<p>You should use this method:</p>\n\n<pre><code>Customplott[0]-&gt;xAxis-&gt;setRange(minX, maxX);\n</code></pre>\n\n<p>(documentation <a href=\"http://www.qcustomplot.com/documentation/classQCPAxis.html#a57d6ee9e9009fe88cb19db476ec70bca\" rel=\"nofollow\">here</a>)</p>\n"}], "owner": {"reputation": 11, "user_id": 5551490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5519ced0f1f39234ffed8c29948495fc?s=128&d=identicon&r=PG&f=1", "display_name": "A.P.", "link": "https://stackoverflow.com/users/5551490/a-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1927, "favorite_count": 0, "accepted_answer_id": 33667508, "answer_count": 1, "score": 1, "last_activity_date": 1447913094, "creation_date": 1447261182, "last_edit_date": 1447913094, "question_id": 33655743, "link": "https://stackoverflow.com/questions/33655743/how-to-reset-x-and-y-axis-in-qcustomplot-after-replotting-qt", "title": "How to reset x and y axis in qcustomplot after replotting (Qt)", "body": "<p>I am trying to crop my data, and replot only a selected part of the graph, but after the replot, the x axis still has the same values, and my graph starts at (0,0) instead of (cropped_starting_value_x, y).\nHow can I reset the values of the X axis? I've already tryed rescaleaxes, but it's not working.\n<a href=\"http://i.stack.imgur.com/qq0YL.png\" rel=\"nofollow\">Here I only have values from around 19 seconds.</a></p>\n\n<pre><code>QCPGraph *mainGraph = Customplott[0]-&gt;addGraph();\nQCPGraph *SecondaryGraph = Customplott[0]-&gt;addGraph();\n//QCPGraph *TertiaryGraph = Customplott[Number]-&gt;addGraph();\n\n//mainGraph-&gt;setAdaptiveSampling(true);\nmainGraph-&gt;setData(Time_temp, Measured_temp);\nmainGraph-&gt;setScatterStyle(QCPScatterStyle(QCPScatterStyle::ssNone, QPen(Qt::red), QBrush(Qt::white), 3));\nmainGraph-&gt;setPen(QPen(Qt::blue)); // Magic only happens, when line width == 1\n\nSecondaryGraph-&gt;setData(Time_temp, Output_temp);\nSecondaryGraph-&gt;setPen(QPen(Qt::red));\n\nCustomplott[0]-&gt;setObjectName(\"YawRate\");\nCustomplott[0]-&gt;xAxis-&gt;setLabel(\"Time [s]\");\nCustomplott[0]-&gt;yAxis-&gt;setLabel(\"Yaw Rate\");\n\n\n/* rescale axes according to graph's data */\nCustomplott[0]-&gt;rescaleAxes();\nmainGraph-&gt;rescaleAxes();\nSecondaryGraph-&gt;rescaleAxes(true);\n\nCustomplott[0]-&gt;replot();\n</code></pre>\n\n<p>Every kind of help is highly appreciated!</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 2, "creation_date": 1447261509, "post_id": 33655721, "comment_id": 55084925, "body": "How do you know monx and mony have 10 elements? It looks like there&#39;s only 1 push_back for each one before that loop"}, {"owner": {"reputation": 1802, "user_id": 3421618, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/TQAL7.jpg?s=128&g=1", "display_name": "ProXicT", "link": "https://stackoverflow.com/users/3421618/proxict"}, "edited": false, "score": 0, "creation_date": 1447261629, "post_id": 33655721, "comment_id": 55085001, "body": "You are accessing non-existing vector element."}, {"owner": {"reputation": 11, "user_id": 4703946, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9839a5114eaf108e309f6f089cad1c13?s=128&d=identicon&r=PG&f=1", "display_name": "anon", "link": "https://stackoverflow.com/users/4703946/anon"}, "edited": false, "score": 0, "creation_date": 1447261647, "post_id": 33655721, "comment_id": 55085013, "body": "because initially there are 10 monsters spawned and then after that more are added after N amount of turns."}, {"owner": {"reputation": 11, "user_id": 4703946, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9839a5114eaf108e309f6f089cad1c13?s=128&d=identicon&r=PG&f=1", "display_name": "anon", "link": "https://stackoverflow.com/users/4703946/anon"}, "edited": false, "score": 0, "creation_date": 1447261696, "post_id": 33655721, "comment_id": 55085035, "body": "ProXicT could you elaborate?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1447261760, "post_id": 33655721, "comment_id": 55085092, "body": "Did you mean to run these for loops sequentially, instead of nesting them?"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1447261852, "post_id": 33655721, "comment_id": 55085146, "body": "<code>n = 0</code> is always false.  You meant <code>n == 0</code>."}, {"owner": {"reputation": 11, "user_id": 4703946, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9839a5114eaf108e309f6f089cad1c13?s=128&d=identicon&r=PG&f=1", "display_name": "anon", "link": "https://stackoverflow.com/users/4703946/anon"}, "edited": false, "score": 0, "creation_date": 1447262193, "post_id": 33655721, "comment_id": 55085361, "body": "sorry i missed that. but doesnt solve the problem. but yes it is deliberately sequential because i have to check the positioning of every other monster"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1447262233, "post_id": 33655721, "comment_id": 55085385, "body": "@anon This code is hopelessly flawed in many ways it seems. I see no value for any future research hitting this question. You should inspect your program stepping through with the debugger, to find the causes for these kind of erroneous behavior."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1447263116, "post_id": 33655721, "comment_id": 55085912, "body": "@anon Even worse, you made your question a moving target now by editing. As mentioned use the debugger please instead of asking on Stack Overflow. This site isn&#39;t meant as your personal help-desk, but to build a repository of Q&amp;A that will provide valuable contents for future researchers. If you look at your question from this point of view, be honest would you find this useful if you search for <i>subscript out of range</i>?"}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 0, "creation_date": 1447321122, "post_id": 33655721, "comment_id": 55109555, "body": "@anon Nevertheless don&#39;t forget to mark the question, which solved your problem, as accepted, if there is any. :-)"}, {"owner": {"reputation": 11, "user_id": 4703946, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9839a5114eaf108e309f6f089cad1c13?s=128&d=identicon&r=PG&f=1", "display_name": "anon", "link": "https://stackoverflow.com/users/4703946/anon"}, "edited": false, "score": 0, "creation_date": 1447418963, "post_id": 33655721, "comment_id": 55157704, "body": "fair enough i may not have worded the question in the best way. but no one has actually tried to tackle the actual question which is why the vector is going out of range even though according to my lecturer the vector should be working fine. also if there is a reason that this is happening then im sure someone else will encounter the same problem . I could not find any help online hence why i asked on here in the hopes that i could get some help but also so that if anyone else is in my position they could now possibly get help."}, {"owner": {"reputation": 11, "user_id": 4703946, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9839a5114eaf108e309f6f089cad1c13?s=128&d=identicon&r=PG&f=1", "display_name": "anon", "link": "https://stackoverflow.com/users/4703946/anon"}, "edited": false, "score": 0, "creation_date": 1447418967, "post_id": 33655721, "comment_id": 55157707, "body": "also in regards to being hopelessly flawed it may not be perfect for sure but it is a work in progress that will continue to change and get better as i start to understand this a bit more."}], "answers": [{"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 0, "last_activity_date": 1447261968, "last_edit_date": 1447261968, "creation_date": 1447261804, "answer_id": 33655927, "question_id": 33655721, "link": "https://stackoverflow.com/questions/33655721/why-is-vector-subscript-out-of-range/33655927#33655927", "title": "why is vector subscript out of range", "body": "<pre><code>void initialize()\n{\n    srand(time(NULL));\n    for (int n = 0; n &lt; 10; n++)\n    {\n\n        int inx = rand() % 9;\n        int iny = rand() % 9;\n\n        if (n = 0){ //&lt;&lt;--------------------------- replace (n = 0) by (n == 0)\n            monx.push_back(inx);\n            mony.push_back(iny);\n        }\n\n        for (int i = 0; i &lt; 10; i++)\n        {\n            // &lt;&lt;&lt;&lt; here monx and mony may contain only\n            //      one element so monx[1] and mony[1] are invalid\n\n            if (inx != monx[i] &amp;&amp; iny != mony[i]){\n                monx.push_back(inx);\n                mony.push_back(iny);\n            }\n            else n--;\n        }\n\n        monVec.push_back(new monster());\n        monVec[n]-&gt;moveChar(inx, iny);\n\n        cout &lt;&lt; endl &lt;&lt; inx &lt;&lt; \", \" &lt;&lt; iny &lt;&lt; endl;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 4703946, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9839a5114eaf108e309f6f089cad1c13?s=128&d=identicon&r=PG&f=1", "display_name": "anon", "link": "https://stackoverflow.com/users/4703946/anon"}, "edited": false, "score": 0, "creation_date": 1447262456, "post_id": 33656062, "comment_id": 55085516, "body": "i see what your saying i have swapped the (i &lt; 10) to (i &lt; n). it now runs but is giving me 12 monsters."}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "reply_to_user": {"reputation": 11, "user_id": 4703946, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9839a5114eaf108e309f6f089cad1c13?s=128&d=identicon&r=PG&f=1", "display_name": "anon", "link": "https://stackoverflow.com/users/4703946/anon"}, "edited": false, "score": 0, "creation_date": 1447262798, "post_id": 33656062, "comment_id": 55085699, "body": "Try to minimize the count of the loops and organize your code in smaller steps. Do this by moving more code to functions/methods (like <code>bool check_monster_present(...)</code>. Also make sure your assumptions about your code are right, by also checking, assumed stuff with <code>asserts</code>. Also use <code>std::vector::at</code> instead of the subscript/<code>[]</code> operator, when not sure that the element exists."}, {"owner": {"reputation": 11, "user_id": 4703946, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9839a5114eaf108e309f6f089cad1c13?s=128&d=identicon&r=PG&f=1", "display_name": "anon", "link": "https://stackoverflow.com/users/4703946/anon"}, "edited": false, "score": 0, "creation_date": 1447262949, "post_id": 33656062, "comment_id": 55085791, "body": "Thanks im just gonna play around with the debug from here"}], "tags": [], "owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "is_accepted": false, "score": 1, "last_activity_date": 1447262174, "creation_date": 1447262174, "answer_id": 33656062, "question_id": 33655721, "link": "https://stackoverflow.com/questions/33655721/why-is-vector-subscript-out-of-range/33656062#33656062", "title": "why is vector subscript out of range", "body": "<p>In your <code>initialize</code>\nyou do the following</p>\n\n<pre><code>&lt;for 10 times&gt;\n    &lt;when first time, add one item to the x,y vectors&gt;\n    &lt;access the up to 10nth element of the x,y vectors&gt; //But vectors are only guaranteed to have at least one element each\n    &lt;maybe add one item to the x,y vectors&gt;\n</code></pre>\n\n<p>Problem is already that there is a path where there are not enough elements in your vectors. Plus the mistake about assignment and comparison in your <code>if</code> like @Michael Waltz already mentioned.</p>\n"}], "owner": {"reputation": 11, "user_id": 4703946, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9839a5114eaf108e309f6f089cad1c13?s=128&d=identicon&r=PG&f=1", "display_name": "anon", "link": "https://stackoverflow.com/users/4703946/anon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1447262495, "creation_date": 1447261111, "last_edit_date": 1447262495, "question_id": 33655721, "link": "https://stackoverflow.com/questions/33655721/why-is-vector-subscript-out-of-range", "title": "why is vector subscript out of range", "body": "<p>I have a vector full of monster objects which are initialized onto a 10X10 map which works. I am now playing with some code to prevent monsters being spawned on the same map co-ordinate. when i run the code it cuts and brings up \"vector subscript out of range\" and i have no idea why. Any help would be great.</p>\n\n<p>main function</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"character.h\"\n#include \"monster.h\"\n#include \"player.h\"\n#include &lt;iostream&gt;\n#include &lt;ctime&gt;\n#include &lt;cstdlib&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nvector&lt;monster*&gt; monVec;\nvector&lt;int&gt; monx;\nvector&lt;int&gt; mony;\nplayer player1;\nbool collision();\nvoid initialise();\n\nint main(){\n\ninitialise();\nplayer1.moveChar(3, 6);\nbool temp;\ntemp = collision();\n\n        system(\"pause\");\n        return 0;\n}\n</code></pre>\n\n<p>initialize function</p>\n\n<pre><code>void initialize()\n{\n    srand(time(NULL));\n    for (int n = 0; n &lt; 10; n++)\n    {\n\n        int inx = rand() % 9;\n        int iny = rand() % 9;\n\n        if (n == 0){\n            monx.push_back(inx);\n            mony.push_back(iny);\n        }\n\n        for (int i = 0; i &lt; n; i++)\n        {\n   --------&gt;if (inx != monx[i] &amp;&amp; iny != mony[i]){\n                monx.push_back(inx);\n                mony.push_back(iny);\n            }\n            else n--;\n        }\n\n        monVec.push_back(new monster());\n        monVec[n]-&gt;moveChar(inx, iny);\n\n        cout &lt;&lt; endl &lt;&lt; inx &lt;&lt; \", \" &lt;&lt; iny &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>cout is just to check if its working once it runs and arrow indicates problem line.\nthanks</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 5578, "user_id": 530189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/216f4518434f8eba33dc0a5871b46a15?s=128&d=identicon&r=PG", "display_name": "Peter Huene", "link": "https://stackoverflow.com/users/530189/peter-huene"}, "edited": false, "score": 2, "creation_date": 1447261167, "post_id": 33655652, "comment_id": 55084752, "body": "Firstly, there is no <code>T</code> in the context of <code>A</code>, so you need to give it an actual type; this is the source of your compiler error and is pretty straightforward.  Secondly, an incomplete type cannot be a member of <code>A</code> because it would make <code>A</code>&#39;s size unknowable. You would need to use a pointer or reference to the incomplete type."}, {"owner": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "edited": false, "score": 0, "creation_date": 1447261192, "post_id": 33655652, "comment_id": 55084762, "body": "what you trying to achieve? <code>class A</code> not template, you have no type <code>T</code> available,  why you should not get error about <code>B&lt;T&gt; b;</code>?"}, {"owner": {"reputation": 221, "user_id": 5175699, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e561ef5533ee56a62309174642e467fe?s=128&d=identicon&r=PG&f=1", "display_name": "leo", "link": "https://stackoverflow.com/users/5175699/leo"}, "edited": false, "score": 0, "creation_date": 1447264862, "post_id": 33655652, "comment_id": 55086951, "body": "My goal: forward declare a template class B, then use it as the type of the member data b of a class A, without (1) making A a template class and (2) caring about what special type will be used upon the time of the declaration of b."}], "answers": [{"comments": [{"owner": {"reputation": 221, "user_id": 5175699, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e561ef5533ee56a62309174642e467fe?s=128&d=identicon&r=PG&f=1", "display_name": "leo", "link": "https://stackoverflow.com/users/5175699/leo"}, "edited": false, "score": 0, "creation_date": 1447264279, "post_id": 33655750, "comment_id": 55086598, "body": "I actually do not want A be a template class, because I know that it contains a member of type B and that is it. In other words, I don&#39;t want to care about what B is when defining A. Is there anyway to achieve this?"}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "reply_to_user": {"reputation": 221, "user_id": 5175699, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e561ef5533ee56a62309174642e467fe?s=128&d=identicon&r=PG&f=1", "display_name": "leo", "link": "https://stackoverflow.com/users/5175699/leo"}, "edited": false, "score": 0, "creation_date": 1447265645, "post_id": 33655750, "comment_id": 55087428, "body": "a template class neccessserly needs a template type in order to be instansiated. <code>B</code> has no meaning without a type which defines it. they are inseperatable."}], "tags": [], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "is_accepted": false, "score": 4, "last_activity_date": 1447261239, "creation_date": 1447261239, "answer_id": 33655750, "question_id": 33655652, "link": "https://stackoverflow.com/questions/33655652/how-to-forward-declare-a-template-class-and-use-it-as-a-member-data-in-c/33655750#33655750", "title": "How to forward declare a template class and use it as a member data in C++?", "body": "<p>This:</p>\n\n<pre><code>class A{\n   B&lt;T&gt; b;\n};\n</code></pre>\n\n<p>should be this :</p>\n\n<pre><code>template &lt;class T&gt;\nclass A{\n    B&lt;T&gt; b;\n};\n</code></pre>\n\n<p>By adding <code>B&lt;T&gt;</code> into <code>A</code> , you basically turned <code>A</code> into a template class as well with the template type <code>T</code>, so <code>A</code> class deleration should be templetized as well.  </p>\n"}, {"comments": [{"owner": {"reputation": 221, "user_id": 5175699, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e561ef5533ee56a62309174642e467fe?s=128&d=identicon&r=PG&f=1", "display_name": "leo", "link": "https://stackoverflow.com/users/5175699/leo"}, "edited": false, "score": 0, "creation_date": 1447264073, "post_id": 33655788, "comment_id": 55086481, "body": "What if I don&#39;t know what special type I will use for B (so adding &quot;&lt;int&gt;&quot; is infeasible) at the time the declaration of b in class A? I buy the second point ."}], "tags": [], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "is_accepted": false, "score": 2, "last_activity_date": 1447264255, "last_edit_date": 1447264255, "creation_date": 1447261341, "answer_id": 33655788, "question_id": 33655652, "link": "https://stackoverflow.com/questions/33655652/how-to-forward-declare-a-template-class-and-use-it-as-a-member-data-in-c/33655788#33655788", "title": "How to forward declare a template class and use it as a member data in C++?", "body": "<p>Firstly, <code>class A</code> is not a template. Thus, you must specialize your <code>B</code> object with a type (i.e, not <code>T</code>). Secondly, at the point of your member variable's declaration (i.e., <code>b</code>), <code>B</code> is an incomplete type. Thus, you can only have a pointer or a reference to it.</p>\n\n<pre><code>template&lt;class T&gt;\nclass B;\n\nclass A{\n   B&lt;int&gt; *b;\n     ^^^  ^\n};\n\ntemplate&lt;class T&gt;\nclass B{\n    T x;\n};\n</code></pre>\n\n<p>Alternatively and if this doesn't cause any implications. If you want a concrete <code>B</code> object change the order of definition of class <code>A</code> and <code>B</code>, since in your example <code>B</code> doesn't relate with <code>A</code>:</p>\n\n<pre><code>template&lt;class T&gt;\nclass B{\n    T x;\n};\n\nclass A{\n   B&lt;int&gt; b;\n};\n</code></pre>\n\n<p>Edit:</p>\n\n<p>If you don't know what special type you'll use for B (so adding \"\" is infeasible) at the time the declaration of b in class A. Then you have to make your <code>class A</code> a template as well. Doing so you can have a concrete type of <code>B</code>:</p>\n\n<pre><code>template&lt;class T&gt;\nclass B;\n\ntemplate&lt;class T&gt;\nclass A{\n   B&lt;T&gt; b;\n};\n\ntemplate&lt;class T&gt;\nclass B{\n    T x;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 221, "user_id": 5175699, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e561ef5533ee56a62309174642e467fe?s=128&d=identicon&r=PG&f=1", "display_name": "leo", "link": "https://stackoverflow.com/users/5175699/leo"}, "edited": false, "score": 0, "creation_date": 1447264428, "post_id": 33655876, "comment_id": 55086703, "body": "Please see my comments to 101010 and David&#39;s answer. Basically, I am wondering if it is possible to achieve the following goal in C++: forward declare a template class B, then use it as the type of the member data b of a class A, without (1) making A a template class and (2) caring about what special type will be used upon the time of the declaration of b."}], "tags": [], "owner": {"reputation": 3846, "user_id": 5420829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4eePO.jpg?s=128&g=1", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0411\u0435\u043d\u044c\u043a\u043e\u0432\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/5420829/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%91%d0%b5%d0%bd%d1%8c%d0%ba%d0%be%d0%b2%d1%81%d0%ba%d0%b8%d0%b9"}, "is_accepted": false, "score": 1, "last_activity_date": 1447372775, "last_edit_date": 1495535236, "creation_date": 1447261628, "answer_id": 33655876, "question_id": 33655652, "link": "https://stackoverflow.com/questions/33655652/how-to-forward-declare-a-template-class-and-use-it-as-a-member-data-in-c/33655876#33655876", "title": "How to forward declare a template class and use it as a member data in C++?", "body": "<h2>Edit:</h2>\n\n<blockquote>\n  <p>Please see my comments to 101010 and David's answer. Basically, I am wondering if it is possible to achieve the following goal in C++: forward declare a template class B, then use it as the type of the member data b of a class A, without (1) making A a template class and (2) caring about what special type will be used upon the time of the declaration of b.</p>\n</blockquote>\n\n<p>What you are asking for makes no sense. It's not your fault. You are just misunderstanding how C++ works. Let me explain it to you.</p>\n\n<h3>Forward declaration</h3>\n\n<p>Example:</p>\n\n<pre><code>class Foo;\n</code></pre>\n\n<p>To the compiler the above statement means: \"There will be a class named Foo defined somewhere else\". From this point and until the it's <em>definition</em> Foo is an <em>incomplete type</em>. There are things you can do with an incomplete type and there are things you can't. In particular: you can't declare variables, and member variables (aka fields) of that type. Example:</p>\n\n<pre><code>class Foo;\n\nclass Bar0\n{\n    Foo f;  // syntax error: Foo is an incomplete type\n};\n\nvoid fun0(Foo f)  // syntax error: Foo is an incomplete type\n{\n    Foo f;  // syntax error: Foo is an incomplete type\n}\n\nclass Foo\n{\n    int x;\n    Foo f;  // syntax error: Foo is an incomplete type\n    void fun(Foo other) {  // Ok here: see \"note\"\n    }\n};  // Foo becomes complete here.\n// Note: things are actually more complicated\n// for example: Foo is complete inside it's own methods\n// even if they are defined inside the definition of Foo.\n\nclass Bar1\n{\n    Foo f;  // Ok here: Foo is complete\n};\n\nvoid fun1(Foo f)  // Ok here: Foo is complete\n{\n    Foo f;  // Ok here: Foo is complete\n}\n</code></pre>\n\n<p>One of the things you can do with an incomplete type is declare a pointer to it. For example:</p>\n\n<pre><code>class Foo;\n\nvoid fun(Foo* f)  // Ok here\n{\n}\n\n\nclass Bar\n{\n    Foo* f;  // Ok here\n};\n</code></pre>\n\n<h3>Templates</h3>\n\n<p>Example:</p>\n\n<pre><code>template&lt;class Bar&gt;\nclass Foo\n{\n    Bar b;\n};\n</code></pre>\n\n<p>Template class is like a blueprint that can be used to create many classes. To create a class from a template you have to <em>substitute</em> it's arguments with concrete values. <code>Foo&lt;int&gt;</code> and <code>Foo&lt;long&gt;</code> are two separate types.</p>\n\n<p>There are two things you can do:</p>\n\n<p>To be continued</p>\n\n<h3>Further reading:</h3>\n\n<p>What is the difference between a definition and a declaration:  <a href=\"https://stackoverflow.com/a/1410632/5420829\">https://stackoverflow.com/a/1410632/5420829</a><br>\nWhat can you do with an incomplete type:<br>\n<a href=\"https://stackoverflow.com/a/553869/5420829\">https://stackoverflow.com/a/553869/5420829</a>  </p>\n"}], "owner": {"reputation": 221, "user_id": 5175699, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e561ef5533ee56a62309174642e467fe?s=128&d=identicon&r=PG&f=1", "display_name": "leo", "link": "https://stackoverflow.com/users/5175699/leo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4798, "favorite_count": 2, "answer_count": 3, "score": 1, "last_activity_date": 1447372775, "creation_date": 1447260868, "question_id": 33655652, "link": "https://stackoverflow.com/questions/33655652/how-to-forward-declare-a-template-class-and-use-it-as-a-member-data-in-c", "title": "How to forward declare a template class and use it as a member data in C++?", "body": "<p>I am trying to forward declare a template class then use the class to declare a member data in some other class. The code is below:</p>\n\n<pre><code>using namespace std;\n\ntemplate&lt;class T&gt;\nclass B;\n\nclass A{\n   B&lt;T&gt; b;\n};\n\ntemplate&lt;class T&gt;\nclass B{\n    T x;\n};\n\nint main(){\n}\n</code></pre>\n\n<p>I got the compilation error:</p>\n\n<pre><code>error: \u2018T\u2019 was not declared in this scope\n     B&lt;T&gt; b;\n</code></pre>\n\n<p>Can anybody let me know what I did wrong and how to achieve my goal? (I noticed the posts on template class on SO, but none of them answers my question.)</p>\n\n<p>Thanks a lot in advance!</p>\n"}, {"tags": ["c++", "namespaces", "static-initialization"], "comments": [{"owner": {"reputation": 3477, "user_id": 5373104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7370abc4cc61836c6302fc38b73a75fb?s=128&d=identicon&r=PG", "display_name": "Jared Dykstra", "link": "https://stackoverflow.com/users/5373104/jared-dykstra"}, "edited": false, "score": 0, "creation_date": 1447261641, "post_id": 33655645, "comment_id": 55085007, "body": "Did you intend to declare <code>dummy</code> to be <code>static unsigned long</code>?"}, {"owner": {"reputation": 1238, "user_id": 677299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40d9a0a6b12c50853df1e565fd54253a?s=128&d=identicon&r=PG", "display_name": "jbruni", "link": "https://stackoverflow.com/users/677299/jbruni"}, "edited": false, "score": 0, "creation_date": 1447261918, "post_id": 33655645, "comment_id": 55085182, "body": "I&#39;m curious: Why are you requiring C linkage for add and give_size?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449481392, "post_id": 33655645, "comment_id": 56008839, "body": "Try again with <code>-std=c++11</code> given in the linking argument ? The specification around initialization of static objects changed in C++11."}], "answers": [{"comments": [{"owner": {"reputation": 1082, "user_id": 4256283, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2dc2b4976c7421d83d6f34770bc36046?s=128&d=identicon&r=PG&f=1", "display_name": "Jytug", "link": "https://stackoverflow.com/users/4256283/jytug"}, "edited": false, "score": 0, "creation_date": 1447270331, "post_id": 33655918, "comment_id": 55090263, "body": "Thanks, that was very helpful. To be fair, that wasn&#39;t my idea, I&#39;m studying for university class on c++, which often tends to provide unrealistic problems and suggest the least convenient ways of solving them ;-)"}, {"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "reply_to_user": {"reputation": 1082, "user_id": 4256283, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2dc2b4976c7421d83d6f34770bc36046?s=128&d=identicon&r=PG&f=1", "display_name": "Jytug", "link": "https://stackoverflow.com/users/4256283/jytug"}, "edited": false, "score": 0, "creation_date": 1447283420, "post_id": 33655918, "comment_id": 55096797, "body": "@Jytug It&#39;s not at all unrealistic that you might encounter such code. I just hope you never write it."}], "tags": [], "owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "is_accepted": true, "score": 2, "last_activity_date": 1449480183, "last_edit_date": 1449480183, "creation_date": 1447261785, "answer_id": 33655918, "question_id": 33655645, "link": "https://stackoverflow.com/questions/33655645/using-a-variable-from-a-different-file-before-main/33655918#33655918", "title": "Using a variable from a different file before main", "body": "<p>Yes, it's the poorly named static initialization order fiasco. Poorly named because the C++ standard calls it \"dynamic initialization\"; \"static initialization\" is something different.</p>\n\n<blockquote>\n  <p>which means that the map disappears somewhere before the test's main</p>\n</blockquote>\n\n<p>Not quite. The problem is that you use the map <em>before it's there</em>, adding values to it. Now it happens that for some map implementations, a zero-initialized state (and that is what is done to all global variables before any dynamic initializers run) is the same as what the default constructor does. So the code in <code>test</code> is executed first and tries to add things to the map, and the map's insert function works just fine, creating nodes, setting internal pointers to the nodes, etc.</p>\n\n<p>Then the actual default constructor of the map runs, resetting those pointers to null, leaking and forgetting all the nodes you created. Your previous insertions are undone, and the map is empty again.</p>\n\n<p>The solutions provided in your link would work; you implicitly call objects through the free functions, even if you don't do it explicitly. There's no real distinction. You still replace the global <code>my_map</code> in project.cc with a function that returns a reference to a function-level static (or pointer, depending on which exact solution you choose). The only difference is that you call this function not from within test.cc, but from within <code>add</code> and <code>give_size</code>.</p>\n\n<p>As a side note, this whole global state thing is generally rather suspect. It's not thread-safe, and it makes it harder to understand what the program is doing. Consider not doing it this way at all.</p>\n"}], "owner": {"reputation": 1082, "user_id": 4256283, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2dc2b4976c7421d83d6f34770bc36046?s=128&d=identicon&r=PG&f=1", "display_name": "Jytug", "link": "https://stackoverflow.com/users/4256283/jytug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 33655918, "answer_count": 1, "score": 1, "last_activity_date": 1482175535, "creation_date": 1447260855, "last_edit_date": 1482175535, "question_id": 33655645, "link": "https://stackoverflow.com/questions/33655645/using-a-variable-from-a-different-file-before-main", "title": "Using a variable from a different file before main", "body": "<p>I'm having a little trouble understanding why my code works the way it does (or doesn't work the way it ought to).</p>\n\n<p>I'm trying to write (in C++) an interface that allows to use some functions operating on <code>unordered_map</code> from the standard template library in C. However, I'd also like to write a namespace that allows to use them in C++ as well.</p>\n\n<p>What I'm asking is not how this can be thone in a different way, but why it works the way it does;</p>\n\n<p>Let's say for a while that I need only two functions: to add elements and write the size of the map. The header is the following:</p>\n\n<pre><code>//project.h\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\nvoid add(int, int);\n\nvoid give_size();\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<p>The source code:</p>\n\n<pre><code>//project.cc\n#include &lt;unordered_map&gt;\n#include &lt;iostream&gt;\n#include \"project.h\"\n\nusing namespace std;\n\nunordered_map&lt;int, int&gt; my_map;\n\nvoid add(int arg, int val) {\n    my_map.insert ({{arg, val}});\n}\n\nvoid give_size() {\n    cout &lt;&lt; my_map.size() &lt;&lt; endl;\n}\n</code></pre>\n\n<p>The interface for C++:</p>\n\n<pre><code>//cproject\nnamespace pro {\n    #include \"project.h\"\n}\n</code></pre>\n\n<p>and a test:</p>\n\n<pre><code>//test.cc\n#include \"cproject\"\nnamespace {\n    unsigned long test() {\n        ::pro::add(1,2);\n        ::pro::add(3,4);\n        return 0;\n    }\n    unsigned long dummy = test();\n}\nint main() {\n    ::pro::give_size();\n    return 0;\n}\n</code></pre>\n\n<p>And, for completeness, the <code>Makefile</code>:</p>\n\n<pre><code>g++ -Wall -std=c++11 -c -o project.o project.cc\ng++ -Wall -std=c++11 -c -o test.o test.cc\ng++ test.o project.o -o test\n</code></pre>\n\n<p>The problem is, of course, that running <code>test</code> outputs <code>0</code> instead of <code>2</code> - which means that the map disappears somewhere before the <code>test</code>'s <code>main</code>.</p>\n\n<p>I was thinking it might be some sort of <a href=\"https://isocpp.org/wiki/faq/ctors#static-init-order\" rel=\"nofollow\">static initialization order fiasco</a>, however I don't find the attached solution very helpful, since I don't explicitly call objects from the <code>project.cc</code> file in <code>test.cc</code>.</p>\n\n<p>I would appreciate any help with that issue.</p>\n"}, {"tags": ["c++", "opencv", "opencv3.0"], "answers": [{"tags": [], "owner": {"reputation": 1717, "user_id": 4564882, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d39ad747c8eba409dcb02c386570fc6a?s=128&d=identicon&r=PG&f=1", "display_name": "ProEns08", "link": "https://stackoverflow.com/users/4564882/proens08"}, "is_accepted": false, "score": 2, "last_activity_date": 1453805687, "last_edit_date": 1592644375, "creation_date": 1453805687, "answer_id": 35012185, "question_id": 33655610, "link": "https://stackoverflow.com/questions/33655610/opencv-tesseract/35012185#35012185", "title": "OpenCV Tesseract", "body": "<p>This is because you install tessaract after building OpenCV, you should be sure that OpenCV find Tessaract when trying to generate the project files using CMake.</p>\n<h2>1- Install first Tessaract:</h2>\n<p>This link may be helpful: <a href=\"http://emop.tamu.edu/Installing-Tesseract-Windows8\" rel=\"nofollow noreferrer\">http://emop.tamu.edu/Installing-Tesseract-Windows8</a></p>\n<h2>2- When trying to generate the visual studio using CMake, you should be sure that CMake find Tessaract:</h2>\n<p>In fact, if it didn't find it the flag <code>HAVE_TESSERACT</code> will not be defined, and as a result the library opencv_text300.dll will generate this message <code>OCRTesseract(33): Tesseract not found.</code> always you try to access to Tessarct engine. You can see the behaviour here:\n<a href=\"https://github.com/Itseez/opencv_contrib/blob/master/modules/text/src/ocr_tesseract.cpp#L142\" rel=\"nofollow noreferrer\">https://github.com/Itseez/opencv_contrib/blob/master/modules/text/src/ocr_tesseract.cpp#L142</a></p>\n<h2>3- Generate the correct opencv_text300.dll built with <code>HAVE_TESSERACT</code>.</h2>\n<h2>4- Execute your executable so that the program run correctly.</h2>\n"}], "owner": {"reputation": 187, "user_id": 2030396, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/9a8599064c68d4d7c337bb7f809b5838?s=128&d=identicon&r=PG", "display_name": "Mi\u0161el Ademi", "link": "https://stackoverflow.com/users/2030396/mi%c5%a1el-ademi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3684, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1453805687, "creation_date": 1447260764, "question_id": 33655610, "link": "https://stackoverflow.com/questions/33655610/opencv-tesseract", "title": "OpenCV Tesseract", "body": "<p>I tried to run this code <a href=\"https://github.com/Itseez/opencv_contrib/blob/master/modules/text/samples/end_to_end_recognition.cpp\" rel=\"nofollow\">https://github.com/Itseez/opencv_contrib/blob/master/modules/text/samples/end_to_end_recognition.cpp</a></p>\n\n<p>as project in c++(VS12) but I get this</p>\n\n<pre><code>TIME_REGION_DETECTION = 21744.2\nTIME_GROUPING = 1187.99\nOCRTesseract(33): Tesseract not found.\nTIME_OCR_INITIALIZATION = 2.85173\nOCRTesseract(00): Tesseract not found.\nOCR output = \"\" lenght = 0\nOCRTesseract(00): Tesseract not found.\nOCR output = \"\" lenght = 0\nOCRTesseract(00): Tesseract not found.\nOCR output = \"\" lenght = 0\nOCRTesseract(00): Tesseract not found.\nOCR output = \"\" lenght = 0\nOCRTesseract(00): Tesseract not found.\nOCR output = \"\" lenght = 0\nTIME_OCR = 42.6972\n</code></pre>\n"}, {"tags": ["c++", "string", "char"], "answers": [{"tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": true, "score": 1, "last_activity_date": 1447261030, "creation_date": 1447261030, "answer_id": 33655698, "question_id": 33655608, "link": "https://stackoverflow.com/questions/33655608/use-string-functions-on-a-const-char-string/33655698#33655698", "title": "Use string functions on a Const char string[]", "body": "<p>You can use <code>std::strlen(string)</code> from the <code>cstring</code> header, but only if <code>string</code> points to a null-terminated <code>char</code> array.</p>\n"}], "owner": {"reputation": 73, "user_id": 5551497, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/efa57bbbf99014352d76575a6bf25cd1?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Fredrik", "link": "https://stackoverflow.com/users/5551497/mike-fredrik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 33655698, "answer_count": 1, "score": 1, "last_activity_date": 1447261030, "creation_date": 1447260763, "last_edit_date": 1447261030, "question_id": 33655608, "link": "https://stackoverflow.com/questions/33655608/use-string-functions-on-a-const-char-string", "title": "Use string functions on a Const char string[]", "body": "<p>I'm attempting to make a method that will take the argument <code>const char string[]</code> from the user. this parameter. will then be outputted via a for loop to the screen character by character until the string has reached it's length.</p>\n\n<p>I need to know the length of the string in order for my loop to work. for instance, if the length is 6, the loop should run 6 times, and display 6 characters onto the display.</p>\n\n<p>I would have used a foreach loop for this, but I'm actually in the GBA environment and for some reason for each loops don't compile correctly. So I'm trying to use <code>.strlen()</code> instead to get the length of the string.</p>\n\n<p>However, I cannot use the <code>.strlen()</code> method because my <code>const char string[]</code> isn't a string.</p>\n\n<p>With all the above in mind, How can I use the <code>.strlen()</code> method in the following code?:</p>\n\n<pre><code>void DrawText(int x, int y, const char string[])\n{\n\n\n    for(int i = 0; i &lt; string.strlen(); i++)\n    {\n        SetTile(0, x + i, y, 70);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "eof"], "comments": [{"owner": {"reputation": 1024, "user_id": 1538531, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/453f29594d8a7fddff5aadc07386a3e2?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/1538531/derek"}, "edited": false, "score": 0, "creation_date": 1447260710, "post_id": 33655429, "comment_id": 55084453, "body": "Are you saying that you expect there to be multiple sets of 120 elements and you want to read those sets <code>while</code> not reaching <code>EOF</code>?"}, {"owner": {"reputation": 1024, "user_id": 1538531, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/453f29594d8a7fddff5aadc07386a3e2?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/1538531/derek"}, "edited": false, "score": 1, "creation_date": 1447260861, "post_id": 33655429, "comment_id": 55084552, "body": "The array <code>temp</code> has 120 elements but your for loop iterates from 0 to i &lt;= 120, which is 121 values."}, {"owner": {"reputation": 27, "user_id": 5532826, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10207770635045033/picture?type=large", "display_name": "Paolo Orsatti", "link": "https://stackoverflow.com/users/5532826/paolo-orsatti"}, "reply_to_user": {"reputation": 1024, "user_id": 1538531, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/453f29594d8a7fddff5aadc07386a3e2?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/1538531/derek"}, "edited": false, "score": 0, "creation_date": 1447261738, "post_id": 33655429, "comment_id": 55085059, "body": "Yes Derek, you got it! I have a file that every 120 elements change settings! thank you for the advertisment of the error in for loop!"}], "answers": [{"comments": [{"owner": {"reputation": 1024, "user_id": 1538531, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/453f29594d8a7fddff5aadc07386a3e2?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/1538531/derek"}, "edited": false, "score": 0, "creation_date": 1447260898, "post_id": 33655642, "comment_id": 55084591, "body": "120 is not a valid index for <code>temp</code>."}, {"owner": {"reputation": 27, "user_id": 5532826, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10207770635045033/picture?type=large", "display_name": "Paolo Orsatti", "link": "https://stackoverflow.com/users/5532826/paolo-orsatti"}, "edited": false, "score": 0, "creation_date": 1447262545, "post_id": 33655642, "comment_id": 55085554, "body": "@Tony D Thank you very much for the answer. I don&#39;t understand the task of the conditiions &#39;fin &gt;&gt; std::skipws&#39; in the while loop. Sorry, i am a beginner in c++ as you see..."}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "reply_to_user": {"reputation": 27, "user_id": 5532826, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10207770635045033/picture?type=large", "display_name": "Paolo Orsatti", "link": "https://stackoverflow.com/users/5532826/paolo-orsatti"}, "edited": false, "score": 1, "creation_date": 1447263511, "post_id": 33655642, "comment_id": 55086151, "body": "@PaoloOrsatti The <code>fin &gt;&gt; std::skipws</code> advances to their the end of the file or the next character that&#39;s not whitespace, the latter implying there should be another set of 120 values.  By then differentiating these two conditions and exiting the loop if we&#39;re at end-of-file, you ensure that you only enter the loop and attempt parsing if there&#39;s actual data to parse."}, {"owner": {"reputation": 27, "user_id": 5532826, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10207770635045033/picture?type=large", "display_name": "Paolo Orsatti", "link": "https://stackoverflow.com/users/5532826/paolo-orsatti"}, "reply_to_user": {"reputation": 1024, "user_id": 1538531, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/453f29594d8a7fddff5aadc07386a3e2?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/1538531/derek"}, "edited": false, "score": 0, "creation_date": 1447265128, "post_id": 33655642, "comment_id": 55087113, "body": "@Derek I&#39;ve made the correptions that you segnalized me, i compilate and execute the program but it doesn&#39;t work. Like if it is an infinit loop. I&#39;ll make another question with the code modified."}], "tags": [], "owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "is_accepted": true, "score": 1, "last_activity_date": 1447260964, "last_edit_date": 1447260964, "creation_date": 1447260851, "answer_id": 33655642, "question_id": 33655429, "link": "https://stackoverflow.com/questions/33655429/how-can-i-read-from-a-file-dat-with-a-lot-of-lines-and-gather-just-few-values-i/33655642#33655642", "title": "How can i read from a file .dat with a lot of lines and gather just few values in arrays until EOF?", "body": "<p>You currently have an inner loop...</p>\n\n<pre><code>...\nfor(i=0; i&lt;=120; i++)\n{\n    ...\n}\ntmean = total/k;\nfout &lt;&lt; tmean &lt;&lt; endl;\n</code></pre>\n\n<p>...just wrap that in an outer for loop...</p>\n\n<pre><code>while (fin &gt;&gt; std::skipws &amp;&amp; !fin.eof())\n{\n    for(i=0; i&lt;=120; i++)\n    {\n        ...\n    }\n    tmean = total/k;\n    fout &lt;&lt; tmean &lt;&lt; endl;\n}\n</code></pre>\n\n<p>You might want to fix the bugs too: <code>k</code> starts at 1 and is incremented for each value read, so ends up being 1 more than it should me: start at 0; and Derek's already commented on another issue.</p>\n"}], "owner": {"reputation": 27, "user_id": 5532826, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10207770635045033/picture?type=large", "display_name": "Paolo Orsatti", "link": "https://stackoverflow.com/users/5532826/paolo-orsatti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 33655642, "answer_count": 1, "score": 1, "last_activity_date": 1447260964, "creation_date": 1447260172, "question_id": 33655429, "link": "https://stackoverflow.com/questions/33655429/how-can-i-read-from-a-file-dat-with-a-lot-of-lines-and-gather-just-few-values-i", "title": "How can i read from a file .dat with a lot of lines and gather just few values in arrays until EOF?", "body": "<p>I have to make a program that read from a file .dat that have two columns but i'm interest just to one. Every columun contains a lot of values, stored each ones in  line. I want to gather them in groups (arrays) of 120 elements and then calculate the avarage value, proceeding like this until the EOF. Once calculated the avarage i save it in an external file.\nThe code that i wrote is like this:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\n#include&lt;string&gt;\n#include&lt;sstream&gt;\n#include&lt;cmath&gt;\n\nusing namespace std;\n\nint i, k=1;\ndouble temp [120];\ndouble tmean, total=0;\n\nint main()\n{\n\nifstream fin (\"Data_Acquisition(1).dat\");\n\nif (!fin)\n{\n    cerr &lt;&lt; \"\\nError: the file can't be open.\\n\" &lt;&lt; endl;\n    exit(1);\n}\n\nstring line;\n\nofstream fout;\nfout.open(\"tmean.dat\", ios::out);\nfout &lt;&lt; \"Tmean\" &lt;&lt; endl;\n\nfor(i=0; i&lt;=120; i++)\n{\n    getline(fin,line);\n    istringstream ss(line);    \n\n    double col1;      \n    double col2;      \n\n    ss &gt;&gt; col1;  \n    ss &gt;&gt; col2;\n\n    temp[i] = col2;\n    total += temp[i];\n    k++;\n\n}\n\ntmean = total/k;\n\nfout &lt;&lt; tmean &lt;&lt; endl;\n\n}\n</code></pre>\n\n<p>My question is: once calculated the avarage of the first group of values, how can i say to the program to continue with others until the file ends?</p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 5, "creation_date": 1447260638, "post_id": 33655350, "comment_id": 55084404, "body": "CCDC creates a <i>memory</i> context.  Nothing to do with &quot;current active screen&quot; or &quot;all visible parts&quot;.  Its pixel format is compatible with the current screen, 32bpp on all modern machines, so that whatever you do with it later will blit to the screen as fast as possible."}, {"owner": {"reputation": 15695, "user_id": 682404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxO2o.png?s=128&g=1", "display_name": "xxbbcc", "link": "https://stackoverflow.com/users/682404/xxbbcc"}, "edited": false, "score": 2, "creation_date": 1447260672, "post_id": 33655350, "comment_id": 55084427, "body": "<a href=\"http://www.winprog.org/tutorial/bitmaps.html\" rel=\"nofollow noreferrer\">winprog.org/tutorial/bitmaps.html</a>"}, {"owner": {"reputation": 15695, "user_id": 682404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxO2o.png?s=128&g=1", "display_name": "xxbbcc", "link": "https://stackoverflow.com/users/682404/xxbbcc"}, "edited": false, "score": 0, "creation_date": 1447260720, "post_id": 33655350, "comment_id": 55084464, "body": "Use <code>GetDC</code> if you need the device context of a particular window."}, {"owner": {"reputation": 1174, "user_id": 2936106, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XS85r.jpg?s=128&g=1", "display_name": "barakcaf", "link": "https://stackoverflow.com/users/2936106/barakcaf"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1447261388, "post_id": 33655350, "comment_id": 55084876, "body": "@Hans - tnx, I miss understood compatible to say same size, after reading your comment it now looks pretty Straightforward- guess its time to call it a day:)"}], "answers": [{"tags": [], "owner": {"reputation": 354, "user_id": 3605805, "user_type": "registered", "profile_image": "https://graph.facebook.com/1122914619/picture?type=large", "display_name": "cvanbrederode", "link": "https://stackoverflow.com/users/3605805/cvanbrederode"}, "is_accepted": true, "score": 4, "last_activity_date": 1447266489, "last_edit_date": 1447266489, "creation_date": 1447261689, "answer_id": 33655895, "question_id": 33655350, "link": "https://stackoverflow.com/questions/33655350/what-is-returned-when-passing-null-to-createcompatibledc-in-winapi/33655895#33655895", "title": "What is returned when passing null to CreateCompatibleDC() in winapi", "body": "<p>The short answer is: a handle to a Memory DC.</p>\n\n<p>More specifically: <code>CreateCompatibleDC(NULL)</code> returns a handle to a memory device context whose format is same as the device context that would be returned by <code>GetDC(NULL)</code>.  But it is not the same context.  Drawing to it doesn't actually show anything on the screen.</p>\n\n<p>Memory DCs are usually used to for things like creating bitmaps in memory.</p>\n"}], "owner": {"reputation": 1174, "user_id": 2936106, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XS85r.jpg?s=128&g=1", "display_name": "barakcaf", "link": "https://stackoverflow.com/users/2936106/barakcaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 0, "accepted_answer_id": 33655895, "answer_count": 1, "score": 0, "last_activity_date": 1447266489, "creation_date": 1447259953, "last_edit_date": 1447263650, "question_id": 33655350, "link": "https://stackoverflow.com/questions/33655350/what-is-returned-when-passing-null-to-createcompatibledc-in-winapi", "title": "What is returned when passing null to CreateCompatibleDC() in winapi", "body": "<p>When you call <code>CreateCompatibleDC(NULL)</code>, you get a handle to the application's current screen, as explained on MSDN:</p>\n\n<blockquote>\n  <p>If this handle is NULL, the function creates a memory DC compatible with the application's current screen</p>\n</blockquote>\n\n<p>I'm trying to figure out what it means by \"application's current screen\"?</p>\n\n<p>The way I see it, it can be a handle to the current active screen, or a handle that encompass all the visible parts of the application.</p>\n\n<p>Say I have a window and a modal child window (pop up window), will I get a DC to only the modal child or to the full visible area?</p>\n"}, {"tags": ["c++", "c", "multiprocessing", "openmp"], "comments": [{"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 2, "creation_date": 1447260656, "post_id": 33655326, "comment_id": 55084415, "body": "I suggest you to tag this also with openmp"}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 5543413, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/69fb2b14b748fe0f159f67cf8c7102c4?s=128&d=identicon&r=PG&f=1", "display_name": "Lobo", "link": "https://stackoverflow.com/users/5543413/lobo"}, "edited": false, "score": 0, "creation_date": 1447260997, "post_id": 33655617, "comment_id": 55084661, "body": "Yes i tried to put number of threads to inner regions like this, but they still get only two threads as outer region."}, {"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "reply_to_user": {"reputation": 115, "user_id": 5543413, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/69fb2b14b748fe0f159f67cf8c7102c4?s=128&d=identicon&r=PG&f=1", "display_name": "Lobo", "link": "https://stackoverflow.com/users/5543413/lobo"}, "edited": false, "score": 0, "creation_date": 1447261452, "post_id": 33655617, "comment_id": 55084904, "body": "This should work to set the number of threads working on the for(...) not on a region."}, {"owner": {"reputation": 115, "user_id": 5543413, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/69fb2b14b748fe0f159f67cf8c7102c4?s=128&d=identicon&r=PG&f=1", "display_name": "Lobo", "link": "https://stackoverflow.com/users/5543413/lobo"}, "edited": false, "score": 0, "creation_date": 1447262303, "post_id": 33655617, "comment_id": 55085428, "body": "Even if i put 4 threads into for parellel loops, omp_get_num_threads( ) - gives me same anserw (that only two threads are working in this loop). It seems that it depends from how many threads i set before outer region, but even if i set 8 of them they are all working in inner regions ( and i can&#39;t divide them to work into both of them in the same time)"}, {"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "reply_to_user": {"reputation": 115, "user_id": 5543413, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/69fb2b14b748fe0f159f67cf8c7102c4?s=128&d=identicon&r=PG&f=1", "display_name": "Lobo", "link": "https://stackoverflow.com/users/5543413/lobo"}, "edited": false, "score": 0, "creation_date": 1447272791, "post_id": 33655617, "comment_id": 55091592, "body": "It is hard to answer, update your question, post a working code so that I can test it."}], "tags": [], "owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "is_accepted": false, "score": 0, "last_activity_date": 1447260779, "last_edit_date": 1495539873, "creation_date": 1447260779, "answer_id": 33655617, "question_id": 33655326, "link": "https://stackoverflow.com/questions/33655326/open-mp-nested-parallelism/33655617#33655617", "title": "Open Mp nested parallelism", "body": "<p>It is possible to set the number of threads on a loop with this:</p>\n\n<pre><code>#pragma parallel for num_threads(variable)\n</code></pre>\n\n<p>see also this post <a href=\"https://stackoverflow.com/questions/22813923/openmp-difference-beetween-num-threads-vs-omp-set-num-threads-vs-omp-num-thread\">openmp difference beetween num_threads vs. omp_set_num_threads vs OMP_NUM_THREADS</a></p>\n"}, {"tags": [], "owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "is_accepted": true, "score": 3, "last_activity_date": 1447261956, "creation_date": 1447261956, "answer_id": 33655980, "question_id": 33655326, "link": "https://stackoverflow.com/questions/33655326/open-mp-nested-parallelism/33655980#33655980", "title": "Open Mp nested parallelism", "body": "<p>This works in VS2012</p>\n\n<p>example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;omp.h&gt;\n\nint main()\n{\n    omp_set_nested(2);\n\n    #pragma omp parallel num_threads( 2 )\n    {\n        int threadID1 = omp_get_thread_num();\n\n        #pragma omp parallel num_threads( 4 )\n        {\n            int threadID2 = omp_get_thread_num();\n\n            #pragma omp critical\n            {\n                std::cout &lt;&lt; \"tID1: \" &lt;&lt; threadID1 &lt;&lt; std::endl;\n                std::cout &lt;&lt; \"tID2: \" &lt;&lt; threadID2 &lt;&lt; std::endl;\n                std::cout &lt;&lt; std::endl;\n            }\n        }\n    }\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>tID1: 0\ntID2: 0\n\ntID1: 0\ntID2: 2\n\ntID1: 0\ntID2: 1\n\ntID1: 0\ntID2: 3\n\ntID1: 1\ntID2: 0\n\ntID1: 1\ntID2: 1\n\ntID1: 1\ntID2: 2\n\ntID1: 1\ntID2: 3\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 5543413, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/69fb2b14b748fe0f159f67cf8c7102c4?s=128&d=identicon&r=PG&f=1", "display_name": "Lobo", "link": "https://stackoverflow.com/users/5543413/lobo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 969, "favorite_count": 0, "accepted_answer_id": 33655980, "answer_count": 2, "score": 5, "last_activity_date": 1447356396, "creation_date": 1447259870, "last_edit_date": 1447356396, "question_id": 33655326, "link": "https://stackoverflow.com/questions/33655326/open-mp-nested-parallelism", "title": "Open Mp nested parallelism", "body": "<p>So I have outer parallel region with two inner parallel regions. Is it possible to put 2 threads into outer parallel and 4 threads into each inner ones? I made something like this, but it seems not work how i want it to. Any suggestions?</p>\n\n<pre><code>start_r = omp_get_wtime();\nomp_set_nested(1);\nomp_set_num_threads(2);\n#pragma omp parallel \n{\n    printf(\"Thread %d executes the outer parallel region\\n\",omp_get_thread_num());\n    omp_set_num_threads(4);\n    #pragma omp parellel for private(i,j,color)schedule(guided, chunk) default(shared) \n    {\n\n// Blur\n    for (int i = 1; i &lt; x-1; i++)\n        for (int j = 1; j &lt; y-1; j++)\n            for (int k = 0; k &lt; 3; k++)\n            {   \n                wynik = 0;\n                wynik = ((color[(i-1)][((j - 1))][k] +\n                        color[(i-1)][j][k] +\n                        color[(i-1)][(j + 1)][k] +\n                        color[i][(j - 1)][k] +\n                        color[i][j][k] +\n                        color[i][(j + 1)][k] +\n                        color[(i+1)][(j - 1)][k] +\n                        color[(i+1)][j][k] +\n                        color[(i+1)][(j + 1)][k])/9);\n                if (wynik&gt;255)wynik = 255;\n                if (wynik&lt;0)wynik = 0;\n                color2[i][j][k] =  wynik;\n            }\n            stop_r = omp_get_wtime();\n            cout &lt;&lt; \"Wyostrzenie zejelo : \" &lt;&lt; (stop_r-start_r) &lt;&lt;\" sekund\"&lt;&lt; endl;\n            cout&lt;&lt;omp_get_nested( )&lt;&lt;endl;\n            cout&lt;&lt;\"Ilo\u015b\u0107 w\u0105tk\u00f3w dla rozmycia : \"&lt;&lt;omp_get_num_threads( )&lt;&lt;endl;\n            printf(\"Thread %d executes the inner parallel region\\n\",omp_get_thread_num());\n        }\n        omp_set_num_threads(4);\n#pragma omp parellel for schedule(guided, chunk) privat(i,j,color) default(shared)\n{\n// Sharp\n    for (int i = 1; i &lt; x - 1; i++)\n        for (int j = 1; j &lt; y - 1; j++)\n            for (int k = 0; k &lt; 3; k++)\n            {\n                wynik = 0;\n                wynik = (color[(i-1)][(j - 1)][k] * (0) +\n                        color[(i-1)][j][k] * (-1) +\n                        color[(i-1)][(j + 1)][k] * (0) +\n                        color[i][(j - 1)][k] * (-1) +\n                        color[i][j][k] * 20 +\n                        color[i][(j + 1)][k] * (-1) +\n                        color[(i+1)][(j - 1)][k] * (0) +\n                        color[(i+1)][j][k] * (-1) +\n                        color[(i+1)][(j + 1)][k] * (0))/16;\n                wynik = wynik % 255;\n                color3[i][j][k] = wynik;\n\n\n\n            }\n            cout&lt;&lt;omp_get_nested( )&lt;&lt;endl;\n            cout&lt;&lt;\"Ilo\u015b\u0107 w\u0105tk\u00f3w dla wyostrzenia : \"&lt;&lt;omp_get_num_threads( )&lt;&lt;endl;\n            printf(\"Thread %d executes the inner parallel region\\n\",omp_get_thread_num());\n            }\n        }\n    for (int j = 0; j &lt; y; j++)\n        for (int i = 0; i &lt; x; i++)     \n            {\n                fwrite(color2[i][j], 1, 3, fp2);\n                fwrite(color3[i][j], 1, 3, fp3);\n\n            }\n\n\n\n    fclose(fp);\n    fclose(fp2);\n    fclose(fp3);\n\n    system(\"PAUSE\");\n    return 0;\n}\n}\n</code></pre>\n"}]