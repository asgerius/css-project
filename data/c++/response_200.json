[{"tags": ["c++", "c++11", "gcc", "gcc-warning"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 3, "creation_date": 1541635339, "post_id": 53199649, "comment_id": 93287942, "body": "This is really just something you shouldn&#39;t be doing---there&#39;s no guarantee that the bytes that make up an <code>int</code> value will also constitute a valid <code>float</code> value or vice versa, and in fact <code>int</code> and <code>float</code> may have different sizes. I think you should explain what you&#39;re trying to accomplish if you want good answers."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 2, "creation_date": 1541635621, "post_id": 53199649, "comment_id": 93287994, "body": "<code>ClassXY::GetInt()</code> and the xor with <code>this</code> looks like an attempt at creating a hash for an instance? I don&#39;t think it&#39;s the warning you should battle. What is the function supposed to deliver?"}, {"owner": {"reputation": 67, "user_id": 3497455, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/GhA4D.jpg?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/3497455/stefan"}, "edited": false, "score": 0, "creation_date": 1541635789, "post_id": 53199649, "comment_id": 93288026, "body": "The instance holds hashed values, with the getter&#39;s I want to make sure that on the end side, the value gets read-able again (that&#39;s why it gets &#39;un-xored&#39;)"}, {"owner": {"reputation": 67, "user_id": 3497455, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/GhA4D.jpg?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/3497455/stefan"}, "edited": false, "score": 0, "creation_date": 1541636290, "post_id": 53199649, "comment_id": 93288141, "body": "@M.M But with this way I&#39;m completely losing one type, later conversion loses information aswell though"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1541636345, "post_id": 53199649, "comment_id": 93288154, "body": "&quot;what I&#39;m trying to accomplish?&quot; -- it would help if you explain what you are trying to accomplish"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1541640678, "post_id": 53199649, "comment_id": 93289221, "body": "pointers should only be cast to and from <code>intptr_t</code> or <code>uintptr_t</code>, not <code>uint32_t</code>"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 3497455, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/GhA4D.jpg?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/3497455/stefan"}, "edited": false, "score": 0, "creation_date": 1541636653, "post_id": 53199841, "comment_id": 93288243, "body": "I see, I think I&#39;m getting your point. Well to give you an idea what it is about: <code>auto example = g_pClassXY-&gt;FindVar(&quot;example_var&quot;);</code> Then: <code>float float_val = example-&gt;fValue; &#47;&#47; direct access, value is wrong</code> To get the value right, the right approach would be: <code>float float_val = example-&gt;GetFloat();</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 67, "user_id": 3497455, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/GhA4D.jpg?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/3497455/stefan"}, "edited": false, "score": 1, "creation_date": 1541636700, "post_id": 53199841, "comment_id": 93288252, "body": "@Stefanx3 <code>fValue</code> should be private if it is not correct to access it directly from outside. You also haven&#39;t explained what all this shenanigans is about, why don&#39;t you just store the value without this masking?"}, {"owner": {"reputation": 67, "user_id": 3497455, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/GhA4D.jpg?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/3497455/stefan"}, "edited": false, "score": 0, "creation_date": 1541637009, "post_id": 53199841, "comment_id": 93288325, "body": "Because the member is not private, it is masked, in my designed program. I guess, my design idea is just bad here, though I wanted it this way originally. (<i>to try something new and to widen my knowledge</i>)"}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1541636612, "last_edit_date": 1541636612, "creation_date": 1541636277, "answer_id": 53199841, "question_id": 53199649, "link": "https://stackoverflow.com/questions/53199649/xoring-float-value-general-cast-question-concerning-compiler-output/53199841#53199841", "title": "xor&#39;ing float value &amp; general cast question concerning compiler output", "body": "<p>To avoid a strict aliasing violation, the code could be:</p>\n\n<pre><code>static_assert( sizeof(float) &lt;= sizeof(uint32_t), \"size problem\" );\nuint32_t xored{};\nmemcpy(&amp;xored, &amp;m_pParent-&gt;m_Value.m_fValue, sizeof xored);\nxored ^= reinterpret_cast&lt;uint32_t&gt;(this);\n\nfloat ret;\nmemcpy(&amp;ret, &amp;xored, sizeof ret);\nreturn ret;\n</code></pre>\n\n<p>However there are still some issues:</p>\n\n<ul>\n<li>The code is ill-formed on a system where <code>this</code> is a 64-bit pointer.</li>\n<li>The float values involved might be an invalid bit pattern for <code>float</code>, causing undefined behaviour.</li>\n</ul>\n\n<p>If your intent is to \"encrypt\" a float, then the encrypted value should be stored as <code>uint32_t</code> or a byte array, not as <code>float</code>. </p>\n\n<p>The first bullet point could be addressed by generating a random 32-bit mask for each instance, instead of using <code>this</code>; or using <code>uintptr_t</code> instead of <code>uint32_t</code>.</p>\n"}], "owner": {"reputation": 67, "user_id": 3497455, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/GhA4D.jpg?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/3497455/stefan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 53199841, "answer_count": 1, "score": 0, "last_activity_date": 1541636772, "creation_date": 1541634773, "last_edit_date": 1541636772, "question_id": 53199649, "link": "https://stackoverflow.com/questions/53199649/xoring-float-value-general-cast-question-concerning-compiler-output", "title": "xor&#39;ing float value &amp; general cast question concerning compiler output", "body": "<p>Well, both questions are concerned towards my compiling output, since I try to remove all warnings..</p>\n\n<p>To the <strong>first question</strong>:<br>\nI'm xor'ing float values, compiler output:\n<code>warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing]</code></p>\n\n<pre><code>inline float ClassXY::GetFloat(void) const\n{\n    uint32_t xored = *(uint32_t*)&amp;m_pParent-&gt;m_Value.m_fValue ^ (uint32_t)this; // compiler warning for this line\n    return *(float*)&amp;xored;\n}\n</code></pre>\n\n<p>m_pParent is a pointer to this class <code>ClassXY *m_pParent;</code><br>\nm_Value is a var of a struct and m_fValue is defined as a float inside the struct.  </p>\n\n<p>Any idea how to get around the warning? (I know that I can disable the warning, but I have no idea to get a clean solution to it)</p>\n\n<p>My <strong>second qustion</strong> would be:<br>\nThe scenario is nearly the same though, only with int. Compiler is talking about information loss: <code>warning: cast from \u2018const ClassXY*\u2019 to \u2018uint32_t {aka unsigned int}\u2019 loses precision [-fpermissive]</code><br>\nWithout the -fpermissive compiler flag, I wouldn't be able to compile..</p>\n\n<pre><code>inline int ClassXY::GetInt(void) const\n{\n    return (int)(m_pParent-&gt;m_Value.m_nValue ^ (int)this); // compiler warning for this line\n}\n</code></pre>\n\n<p>And again, any idea on how to fix this?<br>\nOr is it inpossible without warnings, what I'm trying to accomplish?  </p>\n\n<p>To give you all an idea what it is about:\n<code>auto example = g_pClassXY-&gt;FindVar(\"example_var\");</code><br>\nThen: <code>float float_val = example-&gt;fValue; // direct access, value is wrong</code><br>\nTo get the value right, the right approach would be: <code>float float_val = example-&gt;GetFloat();</code></p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1541643000, "post_id": 53199644, "comment_id": 93289756, "body": "Recommendation: don&#39;t put in line numbers. It makes it harder to compile your code if we out here need to compile the code to get a closer look at the problem. If a line is important, add a comment (like &quot;The error is right here!!!!&quot;) to it to draw attention to it."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1541643119, "post_id": 53199644, "comment_id": 93289785, "body": "Fun fact: if <code>while(cin &gt;&gt; x &gt;&gt; y)</code> fails, the <code>wile</code> loop will not be entered, making <code>if (!cin.good())</code> redundant. If the stream&#39;s not good, you never get there."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1541643301, "post_id": 53199644, "comment_id": 93289825, "body": "Side note: <code>pow</code> is designed to handle really nasty stuff like e to the power of pi. It can be vast overkill for squaring a number. <code>y = x * x;</code> is almost always faster."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10616793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d3f9c25bf19d1b07407dda0fe94f163?s=128&d=identicon&r=PG&f=1", "display_name": "Kaleigh", "link": "https://stackoverflow.com/users/10616793/kaleigh"}, "edited": false, "score": 0, "creation_date": 1541642315, "post_id": 53199683, "comment_id": 93289618, "body": "Thank you for the help! I got that far, but how do I actually get the program to read the file characters as my x and y inputs and ignore the spaces and all?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1, "user_id": 10616793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d3f9c25bf19d1b07407dda0fe94f163?s=128&d=identicon&r=PG&f=1", "display_name": "Kaleigh", "link": "https://stackoverflow.com/users/10616793/kaleigh"}, "edited": false, "score": 0, "creation_date": 1541643127, "post_id": 53199683, "comment_id": 93289786, "body": "@Kaleigh Simply create an <code>ifstream</code> that opens the file, and then call <code>operator&gt;&gt;</code> on that stream to read your values as needed, eg: <code>ifstream fs(filename); while (fs &gt;&gt; x &gt;&gt; y) { ... }</code> Just like you originally did to read values from <code>cin</code>: <code>while (cin &gt;&gt; x &gt;&gt; y)</code>.  <code>operator&gt;&gt;</code> works on ANY kind of <code>istream</code>-based stream.  Also, you don&#39;t need to use <code>if (!good()){ break; }</code> inside your loop, as the stream will be in an error state that breaks the <code>while</code> statement if <code>operator&gt;&gt;</code> fails to read a value, so <code>good()</code> will ALWAYS be true at the top of each loop iteration."}], "tags": [], "owner": {"reputation": 1189, "user_id": 9232218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7ced53adbb0ba08d1cea65a43b124d?s=128&d=identicon&r=PG&f=1", "display_name": "Yastanub", "link": "https://stackoverflow.com/users/9232218/yastanub"}, "is_accepted": false, "score": 1, "last_activity_date": 1541635489, "last_edit_date": 1541635489, "creation_date": 1541635148, "answer_id": 53199683, "question_id": 53199644, "link": "https://stackoverflow.com/questions/53199644/how-to-change-a-cin-input-to-a-command-line-argument-input-in-c/53199683#53199683", "title": "How to Change a cin Input to a Command Line Argument Input in C++", "body": "<p>You need to change your main definition to</p>\n\n<p><code>int main(int argc, char ** argv)</code></p>\n\n<p><code>argc</code> \"Argument count\" is the number of arguments, separated by whitespaces, you passed to your program</p>\n\n<p><code>argv</code> \"Argument value\" is an array of c strings which hold your arguments. <code>argv[0]</code> is always yor calling programs path.</p>\n\n<p>So to do what you want to achieve, change your main and take the command line arguments to create a <code>fstream</code> or <code>ifstream</code> object which acts pretty much like your standard <code>istream</code> friend <code>cin</code> just that it reads from files instead of <code>stdin</code></p>\n\n<p>EDIT:\nI should say that you can not overload your main as you please but that these are the two signatures for the standard main procedure there are.</p>\n"}], "owner": {"reputation": 1, "user_id": 10616793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d3f9c25bf19d1b07407dda0fe94f163?s=128&d=identicon&r=PG&f=1", "display_name": "Kaleigh", "link": "https://stackoverflow.com/users/10616793/kaleigh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 599, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1541635489, "creation_date": 1541634719, "last_edit_date": 1541635075, "question_id": 53199644, "link": "https://stackoverflow.com/questions/53199644/how-to-change-a-cin-input-to-a-command-line-argument-input-in-c", "title": "How to Change a cin Input to a Command Line Argument Input in C++", "body": "<p>I am trying to change my code from asking for a cin user input of x and y values to using a single command line argument with the name of a file. The file has a series of doubles for x and y, one pair on each line separated by a space. I understand how to write the code like I did here, but when it comes to command line arguments, I get confused. If anyone could offer any tips or help in converting the code, I would be very appreciative.</p>\n\n<pre><code>1 #include &lt;iostream&gt;\n2 #include &lt;vector&gt;\n3 #include &lt;cmath&gt;\n4 \n5 using namespace std;\n6 \n7 double correlation_r(const vector&lt;double&gt; &amp;x, const vector&lt;double&gt; &amp;y);\n8 double mean(const vector&lt;double&gt; &amp;x_obs);\n9 double st_dev(const vector&lt;double&gt; &amp;x_obs);\n10 void least_squares_regression(const vector&lt;double&gt; &amp;x, const vector&lt;double&gt; &amp;y);\n11 \n12 int main(){\n13     \n14     double x;\n15     double y;\n16     vector&lt;double&gt; x_obs;\n17     vector&lt;double&gt; y_obs;\n18     \n19     cout &lt;&lt; \"Please enter two real number values for x and y: \";\n20     \n21     while(cin &gt;&gt; x &gt;&gt; y){\n22         if (!cin.good()){\n23             break;\n24         } else {\n25             x_obs.push_back(x);\n26             y_obs.push_back(y);\n27             \n28             cout &lt;&lt; \"Please enter two real number values for x and y or a string to terminate: \";\n29         }\n30     }\n31     \n32     if(x_obs.size()==0||x_obs.size()==1){\n33         cout &lt;&lt; \"The sample was too small to be useful.\";\n34         return 0;\n35     }\n36     \n37     cout &lt;&lt; \"The sample mean of x is \" &lt;&lt; mean(x_obs) &lt;&lt; endl;\n38     cout &lt;&lt; \"The sample mean of y is \" &lt;&lt; mean(y_obs) &lt;&lt; endl;\n39     \n40     cout &lt;&lt; \"The sample standard deviation of x is \" &lt;&lt; st_dev(x_obs) &lt;&lt; endl;\n41     cout &lt;&lt; \"The sample standard deviation of y is \" &lt;&lt; st_dev(y_obs) &lt;&lt; endl;\n42     \n43     if(st_dev(x_obs)==0.0){\n44         cout &lt;&lt; \"The correlation is undefined.\" &lt;&lt; endl;\n45     } else if(st_dev(y_obs)==0.0&amp;&amp; st_dev(x_obs)!=0.0){\n46         cout &lt;&lt; \"The correlation is undefined.\" &lt;&lt; endl;\n47     } else {\n48         cout &lt;&lt; \"The sample correlation is \" &lt;&lt; correlation_r(x_obs, y_obs) &lt;&lt; endl;\n49     }\n50     \n51 \n52     least_squares_regression(x_obs, y_obs);\n53     \n54     return 0;\n55 }\n56 void least_squares_regression(const vector&lt;double&gt; &amp;x, const vector&lt;double&gt; &amp;y){\n57 double m;\n58 double b;\n59 if(st_dev(x)!=0 &amp;&amp; st_dev(y)!=0){\n60  m=correlation_r(x,y)*(st_dev(y)/st_dev(x));\n61  b= mean(y)-(m*mean(x));\n62  cout &lt;&lt; \"The least squares regression line is y=\" &lt;&lt; m &lt;&lt; \"x+ \" &lt;&lt; b &lt;&lt; endl;\n63 } else if(st_dev(x)==0){\n64  cout&lt;&lt; \"The least squares linear regression line is undefined.\"&lt;&lt; endl;\n65 } else if(st_dev(y)==0 &amp;&amp; st_dev(x)!=0){\n66  cout&lt;&lt; \"The least squares linear regression line is y=\" &lt;&lt; mean(y) &lt;&lt; endl;\n67 }\n68 return;\n69 }\n70  \n71\n72 double correlation_r(const vector&lt;double&gt; &amp;x, const vector&lt;double&gt; &amp;y){\n73 double r = 0.0;\n74 for(int i = 0; i &lt; x.size(); i++){\n75     r += (x[i] - mean(x))*(y[i] - mean(y))/st_dev(x)/st_dev(y);\n76 }\n77 return r = r / (x.size() - 1.0);\n78 }\n79\n80\n81 double mean(const vector&lt;double&gt; &amp;x_obs){\n82 double total = 0.0;\n83 for (int i = 0; i &lt; x_obs.size(); i++){\n84  total += x_obs[i];\n85 }    \n86 return total/x_obs.size();\n87 }\n88\n89 double st_dev(const vector&lt;double&gt; &amp;x_obs){\n90 double x_bar = mean(x_obs);\n91 double total = 0.0;\n92 for (double elem : x_obs){\n93  total += pow(elem - x_bar, 2);\n94 }\n95 return pow( total/(x_obs.size() - 1.0), .5);\n96 }\n</code></pre>\n"}, {"tags": ["c++", "crypto++", "pbkdf2"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1541655238, "post_id": 53199533, "comment_id": 93292396, "body": "We need more information, like the relevant source code for the Common library. The exact line of the crash with a stack trace would be helpful, too. You should probably run your program under Valgrind or other memory checking tool, like Address Sanitizer."}, {"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1541662850, "post_id": 53199533, "comment_id": 93294703, "body": "I was thinking of running with valgrind - It&#39;s a bit of a pain since some of the surrounding code I&#39;m using throws out a gigantic amount of errors - I should probably test this in a separate program. I&#39;ll get rid of the Common library for a better minimal example - I&#39;m fairly sure there&#39;s no issue in that section of the code though, it&#39;s just converting to/from hex."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1541664759, "post_id": 53199533, "comment_id": 93295505, "body": "You should be Valgrind-clean at <code>-O1</code>. If you are observing lots of Valgrind findings at <code>-O1</code> then you probably have some issues you need to fix. Also see <a href=\"http://valgrind.org/docs/manual/QuickStart.html\" rel=\"nofollow noreferrer\">The Valgrind Quick Start Guide | Preparing your program</a>. ({Some|Many} findings at <code>-O2</code> and <code>-O3</code> are false positives)."}, {"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1541693936, "post_id": 53199533, "comment_id": 93311601, "body": "Oh, absolutely, there are a ton of issues the current code base has - Trying to fix them slowly."}], "answers": [{"comments": [{"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1541662680, "post_id": 53201894, "comment_id": 93294617, "body": "Perhaps I&#39;m misunderstanding, but isn&#39;t salt not null terminated in your example either? I&#39;ll test more tomorrow - I can probably get rid of the Common:: calls to make a better minimal example."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1541664608, "post_id": 53201894, "comment_id": 93295440, "body": "@Zpalmtree - Correct, but I am only encoding 16 bytes (which encodes to 32 chars) and then inserting the 32 bytes in <code>std::cout</code>. I am not relying on a NULL terminator."}, {"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1541696424, "post_id": 53201894, "comment_id": 93312997, "body": "Perhaps I&#39;ve confused things by using the Common:: stuff to try and simplify the example - In actual usage I was using a method to generate 16 random bytes for salt. I can&#39;t seem to reproduce the error anymore, and valgrind gives nothing helpful. Tempted to blame it on cosmic rays, rare segfaults are very frustrating. :("}], "tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": false, "score": 3, "last_activity_date": 1541653979, "creation_date": 1541653979, "answer_id": 53201894, "question_id": 53199533, "link": "https://stackoverflow.com/questions/53199533/rare-crash-with-crypto-pbkdf2derivekey/53201894#53201894", "title": "Rare crash with Crypto++ pbkdf2::DeriveKey()", "body": "<p>I'm hazarding a guess, but <code>salt</code> is not NULL terminated. The program is probably accessing beyond the 16th element of the <code>salt</code> array:</p>\n\n<pre><code>std::cout &lt;&lt; \"Salt: \" &lt;&lt; Common::podToHex(salt) &lt;&lt; std::endl;\n</code></pre>\n\n<hr>\n\n<p>The following executes multiple times without problems. It is your program less the calls to the Common library.</p>\n\n<p>The call to <code>std::memcpy</code> only takes the left-most 16-bytes of the string. It does not do the conversion. (I only wanted to remove the call to Common).</p>\n\n<pre><code>$ cat test.cxx\n\n#include \"cryptlib.h\"\n#include \"filters.h\"\n#include \"sha.h\"\n#include \"hex.h\"\n#include \"files.h\"\n#include \"pwdbased.h\"\n\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n\nint main()\n{\n    using namespace CryptoPP;\n\n    PKCS5_PBKDF2_HMAC&lt;SHA256&gt; pbkdf2;\n\n    byte salt[16], key[32];\n\n    /* Hard coded for testing purposes */\n    // Common::podFromHex(\"00f8807a289655b2a8e38cda00182a32\", salt);\n    std::memcpy(salt, \"00f8807a289655b2a8e38cda00182a32\", 16);\n\n    /* Hard coded for testing purposes */\n    std::string password = \"a\";\n\n    // std::cout &lt;&lt; \"Salt: \" &lt;&lt; Common::podToHex(salt) &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Salt: \";\n    StringSource(salt, sizeof(salt), true, new HexEncoder(new FileSink(std::cout)));\n    std::cout &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; \"Salt size: \" &lt;&lt; sizeof(salt) &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Password: \" &lt;&lt; password.data() &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Password size: \" &lt;&lt; password.size() &lt;&lt; std::endl;\n\n    /* Rare segfault on this line */\n    pbkdf2.DeriveKey(\n        key, sizeof(key), 0, (byte *)password.data(),\n        password.size(), salt, sizeof(salt), 10000 /*Constants::PBKDF2_ITERATIONS*/\n    );\n\n    std::cout &lt;&lt; \"Key: \";\n    StringSource(key, sizeof(key), true, new HexEncoder(new FileSink(std::cout)));\n    std::cout &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Compiled and executed with:</p>\n\n<pre><code>$ g++ -DNDEBUG -g2 -O3 test.cxx -o test.exe ./libcryptopp.a\n$ ./test.exe\nSalt: 30306638383037613238393635356232\nSalt size: 16\nPassword: a\nPassword size: 1\nKey: F88BA6947B802C66F7E7A2BC0099AFD92C81DC293E3CC48C2DA3FA75E27ECE6B\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "is_accepted": false, "score": 0, "last_activity_date": 1542079135, "creation_date": 1542079135, "answer_id": 53273298, "question_id": 53199533, "link": "https://stackoverflow.com/questions/53199533/rare-crash-with-crypto-pbkdf2derivekey/53273298#53273298", "title": "Rare crash with Crypto++ pbkdf2::DeriveKey()", "body": "<p>I ended up fixing this. It was not actually due to any of the code listed above, but it was because I was calling a function using this, in a signal handler.</p>\n\n<p>Because this was taking quite a while to run (using 500,000 iterations) it appeared to be crashing here every time, but it was actually not due to this line.</p>\n\n<p>I ended up fixing it flipping a bool flag in the signal handler, and having a separate thread watching that flag. When the flag was set, it called the destructor, which in turn triggered the normal shutdown flow, allowing all my threads to shutdown and save correctly.</p>\n"}], "owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 305, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1542079135, "creation_date": 1541633787, "last_edit_date": 1541654364, "question_id": 53199533, "link": "https://stackoverflow.com/questions/53199533/rare-crash-with-crypto-pbkdf2derivekey", "title": "Rare crash with Crypto++ pbkdf2::DeriveKey()", "body": "<p>I'm using the CryptoPP library to hash some passwords. About 1 in 10 times, it crashes on the DeriveKey line below, with a segfault.</p>\n\n<p>Even when using fixed parameters the crashes still seem random. I'm wondering if perhaps I need a '\\0' on the end of my strings. Or maybe the output buffer needs to be zero initialized, or something?</p>\n\n<p>Anyway, here's the code.</p>\n\n<pre><code>#include &lt;cryptopp/aes.h&gt;\n#include &lt;cryptopp/algparam.h&gt;\n#include &lt;cryptopp/filters.h&gt;\n#include &lt;cryptopp/modes.h&gt;\n#include &lt;cryptopp/sha.h&gt;\n#include &lt;cryptopp/pwdbased.h&gt;\n\nint main()\n{\nCryptoPP::PKCS5_PBKDF2_HMAC&lt;CryptoPP::SHA256&gt; pbkdf2;\n\nCryptoPP::byte salt[16];\n\nCryptoPP::byte key[32];\n\n/* Hard coded for testing purposes */\nCommon::podFromHex(\"00f8807a289655b2a8e38cda00182a32\", salt);\n\n/* Hard coded for testing purposes */\nstd::string password = \"a\";\n\nstd::cout &lt;&lt; \"Salt: \" &lt;&lt; Common::podToHex(salt) &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"Salt size: \" &lt;&lt; sizeof(salt) &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"Password: \" &lt;&lt; password.data() &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"Password size: \" &lt;&lt; password.size() &lt;&lt; std::endl;\n\n/* Rare segfault on this line */\npbkdf2.DeriveKey(\n    key, sizeof(key), 0, (CryptoPP::byte *)password.data(),\n    password.size(), salt, sizeof(salt), Constants::PBKDF2_ITERATIONS\n);\n}\n</code></pre>\n\n<p>Everything seems initialized properly - the print statements give me the exact same thing every time: </p>\n\n<pre><code>Salt: 00f8807a289655b2a8e38cda00182a32\nSalt size: 16\nPassword: a\nPassword size: 1\n</code></pre>\n\n<p>Furthermore - the hashed password is usable, when it doesn't segfault. I'm using AES encryption later on, and I can perfectly unencrypt the file, and all the data is as expected.</p>\n\n<p>The source code for derive key can be found here, by the way: <a href=\"https://www.cryptopp.com/docs/ref/pwdbased_8h_source.html#l00235\" rel=\"nofollow noreferrer\">https://www.cryptopp.com/docs/ref/pwdbased_8h_source.html#l00235</a></p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "heap-corruption"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1541634110, "post_id": 53199514, "comment_id": 93287652, "body": "You need to post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, since I can see multiple issues with just the small sample you posted.  Your <code>str</code> is not set to nullptr if <code>end &lt;= 0</code>, thus if your destructor attempts to do <code>delete [] str;</code>, the behavior becomes undefined.  Also for <code>operator +</code> to work correctly requires us to see your copy constructor, assignment operator, and destructor, not just a snippet of one of those functions."}, {"owner": {"reputation": 1, "user_id": 9899710, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Hayden Smith", "link": "https://stackoverflow.com/users/9899710/hayden-smith"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1541636330, "post_id": 53199514, "comment_id": 93288151, "body": "I did update my example with a bit more information. Thanks I&#39;m new to the community and am just learning the post guidelines."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9899710, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Hayden Smith", "link": "https://stackoverflow.com/users/9899710/hayden-smith"}, "edited": false, "score": 0, "creation_date": 1541636724, "post_id": 53199554, "comment_id": 93288265, "body": "Updated my code to provide more implementation information. I go one over the labeled end to include the null terminator on strings."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 1, "user_id": 9899710, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Hayden Smith", "link": "https://stackoverflow.com/users/9899710/hayden-smith"}, "edited": false, "score": 0, "creation_date": 1541637149, "post_id": 53199554, "comment_id": 93288353, "body": "@HaydenSmith You only allocated <code>end</code> elements, not <code>end + 1</code> elements.  Thus there is no room for the null terminator."}, {"owner": {"reputation": 1, "user_id": 9899710, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Hayden Smith", "link": "https://stackoverflow.com/users/9899710/hayden-smith"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1541637380, "post_id": 53199554, "comment_id": 93288405, "body": "@PaulMcKenzie epic nice. I was forgetting to allocate the correct amount of memory for that null terminator. forgot it took up memory space. thanks again."}], "tags": [], "owner": {"reputation": 1189, "user_id": 9232218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7ced53adbb0ba08d1cea65a43b124d?s=128&d=identicon&r=PG&f=1", "display_name": "Yastanub", "link": "https://stackoverflow.com/users/9232218/yastanub"}, "is_accepted": false, "score": 1, "last_activity_date": 1541634009, "creation_date": 1541634009, "answer_id": 53199554, "question_id": 53199514, "link": "https://stackoverflow.com/questions/53199514/heap-corruption-on-member-assignment-overload/53199554#53199554", "title": "Heap Corruption on member assignment overload?", "body": "<p><code>for (int i = 0; i &lt;= end; i++)</code></p>\n\n<p>This creates an overflow. Because in C++ arrays start at Index 0 if your declare an array with 5 elements the index range is from 0 to 4. So if you create an array of size <code>end</code> your Indexes range from 0 to end - 1. That means you need to check for <code>i &lt; end</code></p>\n\n<p>EDIT:\nthis propably applies to <code>for (int i = 0; i &lt;= strOne.end; i++)</code> too despite i do not know the implementation of <code>HSString</code></p>\n"}], "owner": {"reputation": 1, "user_id": 9899710, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Hayden Smith", "link": "https://stackoverflow.com/users/9899710/hayden-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1541635348, "creation_date": 1541633650, "last_edit_date": 1541635348, "question_id": 53199514, "link": "https://stackoverflow.com/questions/53199514/heap-corruption-on-member-assignment-overload", "title": "Heap Corruption on member assignment overload?", "body": "<p>(Clarity Update)</p>\n\n<p>Have been struggling with this problem for a while and would like some insight. I have overloaded the <code>addition</code> and <code>assignment</code> operators for a created class. The <code>assignment</code> operator seems to return fine, but then the next line exits with this error:</p>\n\n<blockquote>\n  <p>HEAP CORRUPTION DETECTED: after Normal block (#160) at 0x012CA7D0. CRT\n  detected that the application wrote to memory after end of heap\n  buffer.</p>\n</blockquote>\n\n<p>My code for both operators are below: </p>\n\n<pre><code>HSString&amp; HSString::operator =(const HSString&amp; argStr) {\n\n    if (this != &amp;argStr) {\n        delete[] str;\n        end = argStr.end;\n        cap = argStr.cap;\n\n        if (end &gt; 0) {\n            str = new char[end];\n            for (int i = 0; i &lt;= end; i++) {\n                str[i] = argStr.str[i];\n            }\n       }\n    }\n    return *this;\n}\n</code></pre>\n\n<p>//Default Constructor</p>\n\n<pre><code>HSString::HSString() {\n\n    cap = 20;\n\n    end = 0;\n\n    str = '\\0';\n\n    createdCount++;\n\n    currentCount++;\n}\n</code></pre>\n\n<p>//Destructor</p>\n\n<pre><code>HSString::~HSString() {\n\n    delete[] str;\n\n    currentCount--;\n}\n</code></pre>\n\n<p>//Copy Constructor</p>\n\n<pre><code>HSString::HSString(const HSString&amp; argStr) {\n\n    cap = argStr.cap;\n\n    end = argStr.end;\n\n    if (end &gt; 0) {\n        str = new char[end];\n\n        for (int i = 0; i &lt;= end; i++) {\n            str[i] = argStr.str[i];\n        }\n\n    } else {\n        str = nullptr;\n    }\n\n    createdCount++;\n\n    currentCount++;\n}\n\n\nconst HSString HSString::operator +(const HSString&amp; strOne)const {\n\n    HSString temp;\n\n    temp.end = end + strOne.end;\n    temp.cap = cap + strOne.cap;\n\n    temp.str = new char[cap];\n\n    for (int i = 0; i &lt; end; i++) {\n        temp.str[i] = str[i];\n    }\n\n    for (int i = 0; i &lt;= strOne.end; i++) {\n        temp.str[i + end] = strOne.str[i];\n    }\n\n    return temp;\n}\n</code></pre>\n\n<p>After member assignment operator is returned with a deep copy the error is then executed. </p>\n\n<p>I go one past the end of a string to include the null terminator to clean up extra garbage values in dynamically created memory. </p>\n\n<p>Using Rule of Three concepts. </p>\n\n<p>//Sample: </p>\n\n<pre><code>int main() {\n\nHSString greeting(\"Hello\");\nHSString name(\"Hayden\");\nHSString result;\n</code></pre>\n\n<p>vvvvvv //Heap Corruption happens right after this statement is executed vvvvvvv</p>\n\n<pre><code>result = greeting + name;\n\n\ncout &lt;&lt; result;\n\n\n\n\n\nsystem(\"pause\");\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "mfc", "richeditbox"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1541633979, "post_id": 53199505, "comment_id": 93287622, "body": "Wow, MS is up to 2105.  I just got the company to upgrade to 2017."}, {"owner": {"reputation": 2310, "user_id": 9185253, "user_type": "registered", "profile_image": "https://graph.facebook.com/114451586026362/picture?type=large", "display_name": "Maestro", "link": "https://stackoverflow.com/users/9185253/maestro"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1541634088, "post_id": 53199505, "comment_id": 93287649, "body": "@ThomasMatthews: Should I upgrade my compiler?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1541634202, "post_id": 53199505, "comment_id": 93287676, "body": "No, don&#39;t upgrade.  MSVC 2105 is way more recent that what I have heard about."}, {"owner": {"reputation": 2310, "user_id": 9185253, "user_type": "registered", "profile_image": "https://graph.facebook.com/114451586026362/picture?type=large", "display_name": "Maestro", "link": "https://stackoverflow.com/users/9185253/maestro"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1541634323, "post_id": 53199505, "comment_id": 93287709, "body": "@ThomasMatthews: But I can&#39;t find Rich Edit there? on MFC Dialog based application?!"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1541634805, "post_id": 53199505, "comment_id": 93287822, "body": "<i>as I used to find on MSVC 6.0</i> -- Visual Studio 2002, 2003, 2005, 2008, 2010, 2013, 2015, 2017.  With all of those renditions, it is not surprising that things could change."}, {"owner": {"reputation": 2310, "user_id": 9185253, "user_type": "registered", "profile_image": "https://graph.facebook.com/114451586026362/picture?type=large", "display_name": "Maestro", "link": "https://stackoverflow.com/users/9185253/maestro"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1541635067, "post_id": 53199505, "comment_id": 93287880, "body": "@PaulMcKenzie: Can you suggest a solution?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1541635492, "post_id": 53199505, "comment_id": 93287970, "body": "Have you tried searching the internet for &quot;Visual Studio 2015 MFC toolbox&quot;?  Or you could try &quot;Visual Studio 2105 MFC toolbox&quot;, depending on the version of Visual Studio you really have."}, {"owner": {"reputation": 2310, "user_id": 9185253, "user_type": "registered", "profile_image": "https://graph.facebook.com/114451586026362/picture?type=large", "display_name": "Maestro", "link": "https://stackoverflow.com/users/9185253/maestro"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1541635595, "post_id": 53199505, "comment_id": 93287989, "body": "@ThomasMatthews: I searched on visual studio 2015 and on internet but didn&#39;t help."}, {"owner": {"reputation": 2310, "user_id": 9185253, "user_type": "registered", "profile_image": "https://graph.facebook.com/114451586026362/picture?type=large", "display_name": "Maestro", "link": "https://stackoverflow.com/users/9185253/maestro"}, "edited": false, "score": 2, "creation_date": 1541637653, "post_id": 53199505, "comment_id": 93288468, "body": "I figured it out: Right clicked on the Toolbox and Reset the the toolbox then I got it there (RichEdit2)."}], "answers": [{"tags": [], "owner": {"reputation": 2310, "user_id": 9185253, "user_type": "registered", "profile_image": "https://graph.facebook.com/114451586026362/picture?type=large", "display_name": "Maestro", "link": "https://stackoverflow.com/users/9185253/maestro"}, "is_accepted": false, "score": 0, "last_activity_date": 1541706909, "creation_date": 1541706909, "answer_id": 53215211, "question_id": 53199505, "link": "https://stackoverflow.com/questions/53199505/how-to-insert-a-rich-edit-control-in-msvc-2015-mfc-dialog/53215211#53215211", "title": "How to insert a rich edit control in MSVC 2015 MFC dialog", "body": "<p>Finally I figured it out: Right clicked on the Toolbox and Reset the the toolbox then I got it there (RichEdit2). </p>\n\n<p>I wish that this would be helpful for someone who got stuck in such trivial problem.</p>\n\n<p>I think that something went wrong with the MSVC compiler. Thanks to \"Reset\" function.</p>\n"}], "owner": {"reputation": 2310, "user_id": 9185253, "user_type": "registered", "profile_image": "https://graph.facebook.com/114451586026362/picture?type=large", "display_name": "Maestro", "link": "https://stackoverflow.com/users/9185253/maestro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541706909, "creation_date": 1541633613, "last_edit_date": 1541700027, "question_id": 53199505, "link": "https://stackoverflow.com/questions/53199505/how-to-insert-a-rich-edit-control-in-msvc-2015-mfc-dialog", "title": "How to insert a rich edit control in MSVC 2015 MFC dialog", "body": "<p>I need to add a Right Edit control to MFC Dialog based application.</p>\n\n<p>I am using MSVC 2015. On which on the Toolbox I can find \"Rich Edit\" as I used to find on MSVC 6.0</p>\n"}, {"tags": ["c++", "c++11", "private", "friend", "std-pair"], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 1414050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74b4938bf4914a1066a1b69aa2c5f6f?s=128&d=identicon&r=PG", "display_name": "user1414050", "link": "https://stackoverflow.com/users/1414050/user1414050"}, "edited": false, "score": 0, "creation_date": 1541699382, "post_id": 53199725, "comment_id": 93314462, "body": "Thanks Jans.  It&#39;s not what I wanted to hear, but I won&#39;t waste any more time on it."}], "tags": [], "owner": {"reputation": 10521, "user_id": 1316462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de3149d5f602449f41083ca17a5ceab?s=128&d=identicon&r=PG&f=1", "display_name": "Jans", "link": "https://stackoverflow.com/users/1316462/jans"}, "is_accepted": false, "score": 2, "last_activity_date": 1541647332, "last_edit_date": 1541647332, "creation_date": 1541635445, "answer_id": 53199725, "question_id": 53199490, "link": "https://stackoverflow.com/questions/53199490/how-do-i-declare-stdpair-as-a-friend-so-it-sees-private-default-ctor/53199725#53199725", "title": "How do I declare std::pair as a friend so it sees private default ctor", "body": "<p>You can't, </p>\n\n<p>Default construction of <code>std::pair&lt;T, U&gt;</code> requires that both <code>T</code> and <code>U</code> be <a href=\"https://en.cppreference.com/w/cpp/named_req/DefaultConstructible\" rel=\"nofollow noreferrer\">DefaultConstructible</a> and <code>PrivateDC</code> is not, failing at that requirement causes the default constructor of <code>std::pair</code> being excluded from the overload set.</p>\n"}], "owner": {"reputation": 99, "user_id": 1414050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74b4938bf4914a1066a1b69aa2c5f6f?s=128&d=identicon&r=PG", "display_name": "user1414050", "link": "https://stackoverflow.com/users/1414050/user1414050"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541647332, "creation_date": 1541633533, "last_edit_date": 1541636725, "question_id": 53199490, "link": "https://stackoverflow.com/questions/53199490/how-do-i-declare-stdpair-as-a-friend-so-it-sees-private-default-ctor", "title": "How do I declare std::pair as a friend so it sees private default ctor", "body": "<p>I am using boost (de)serialization to reconstruct classes without public default ctors, by design.  I declare a private default ctor and declare the boost access class as a friend, and it uses the default ctor as part of its deserialization process.  But it can't reconstruct a <code>std::pair</code> unless I make the default ctor public.  I'd rather declare friendship, but I can't figure out how.</p>\n\n<p>Below is a simplified example:</p>\n\n<pre><code>class PrivateDC\n{\nprivate:\n    friend class PrivateDCFriend;\n    friend struct std::pair&lt;int, PrivateDC&gt;;\n    PrivateDC() = default;\n};\nclass PrivateDCFriend\n{\n    void f() const\n    {\n        PrivateDC a;                  // this works, proves friendship\n        std::pair&lt;int, PrivateDC&gt; b;  // gets compile error\n    }\n};\n</code></pre>\n\n<p>The error is \"no matching constructor for initialization of 'std::pair&lt;int, PrivateDC>'\".  I don't get the error if the default ctor is public.<br>\nHow can I declare <code>std::pair</code> as a friend so this will work?</p>\n"}, {"tags": ["c++", "c++11", "vector"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1541634589, "post_id": 53199461, "comment_id": 93287778, "body": "What is <code>DishType</code>?"}, {"owner": {"reputation": 301, "user_id": 9820561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8874a9d5b872df17474c1303a9379460?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.O", "link": "https://stackoverflow.com/users/9820561/mr-o"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1541635206, "post_id": 53199461, "comment_id": 93287915, "body": "@PaulMcKenzie @d sorry, it&#39;s just enum enum DishType{     VEG, SPC, BVG, ALC };"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1541635266, "post_id": 53199461, "comment_id": 93287924, "body": "Well, I suggest you leave <code>Dish</code> as is.  Why would you want to change to pointers?"}, {"owner": {"reputation": 301, "user_id": 9820561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8874a9d5b872df17474c1303a9379460?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.O", "link": "https://stackoverflow.com/users/9820561/mr-o"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1541635450, "post_id": 53199461, "comment_id": 93287962, "body": "I don&#39;t want to. I just want to understand what kind of copy the copy constructor of vector do, and especially in the cases described above. it&#39;s more for learning."}, {"owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "edited": false, "score": 1, "creation_date": 1541635450, "post_id": 53199461, "comment_id": 93287963, "body": "It would probably just use the default copy assignment operator since you didn&#39;t provide one"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1541635641, "post_id": 53199461, "comment_id": 93287996, "body": "@Mr.OY The default copy constructor or assignment is invoked, and will do a shallow copy.  This topic is really discussed better in a good C++ book."}, {"owner": {"reputation": 301, "user_id": 9820561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8874a9d5b872df17474c1303a9379460?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.O", "link": "https://stackoverflow.com/users/9820561/mr-o"}, "reply_to_user": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "edited": false, "score": 0, "creation_date": 1541635692, "post_id": 53199461, "comment_id": 93288006, "body": "@stackptr, you mean it will make kind of shallow copy? so for the Dish class (which as no pointers) it should be fine?"}, {"owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "edited": false, "score": 1, "creation_date": 1541638235, "post_id": 53199461, "comment_id": 93288626, "body": "@Mr.OY It will default to shallow copy unless you write your own"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1541638558, "post_id": 53199461, "comment_id": 93288707, "body": "@Mr.OY -- The default copy and assignment functions will work fine.  That is what any code should strive for, and that is for types to have proper copy semantics with little to no extra work to do."}], "owner": {"reputation": 301, "user_id": 9820561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8874a9d5b872df17474c1303a9379460?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.O", "link": "https://stackoverflow.com/users/9820561/mr-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 208, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1541635241, "creation_date": 1541633374, "last_edit_date": 1541635241, "question_id": 53199461, "link": "https://stackoverflow.com/questions/53199461/copy-constructor-for-vector-with-objects", "title": "copy constructor for vector with objects", "body": "<p>the default copy constructor of vector is defined as:</p>\n\n<blockquote>\n  <p>(4) copy constructor (and copying with allocator)\n      Constructs a container with a copy of each of the elements in x, in the same order. </p>\n</blockquote>\n\n<p>I got couple of questions about using this copy constructor.\nI got this vector:</p>\n\n<pre><code> std::vector&lt;OrderPair&gt; orderList;\n</code></pre>\n\n<p>where </p>\n\n<pre><code>typedef std::pair&lt;int, Dish&gt; OrderPair;\n</code></pre>\n\n<p>and Dish is simple class (without pointers)</p>\n\n<pre><code>enum DishType{\n    VEG, SPC, BVG, ALC\n};\n\nclass Dish{\nprivate:\n    const int id;\n    const std::string name;\n    const int price;\n    const DishType type;\n};\n</code></pre>\n\n<p>Assume A is a vector as described above with some elements,\nwhich kind of copy I will get by doing:</p>\n\n<pre><code>std::vector&lt;OrderPair&gt; B=A;\n</code></pre>\n\n<p>in case the elements were created without new and in case they were created by new?\nwhat about the case the some of the fields of Dish were pointers?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "initialization", "list-initialization"], "answers": [{"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1541633695, "post_id": 53199480, "comment_id": 93287541, "body": "I think it is UB to read it in C++ regardless of whether it has a trap representation (unlike C)."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1541633830, "post_id": 53199480, "comment_id": 93287584, "body": "@juanchopanza You are right. <a href=\"http://eel.is/c++draft/dcl.init#12\" rel=\"nofollow noreferrer\">eel.is/c++draft/dcl.init#12</a> Changed my Answer."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1541634608, "post_id": 53199480, "comment_id": 93287784, "body": "@juanchopanza see <a href=\"https://stackoverflow.com/q/23415661/1708801\">Has C++ standard changed with respect to the use of indeterminate values and undefined behavior in C++14?</a>"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1541634804, "post_id": 53199480, "comment_id": 93287819, "body": "@ShafikYaghmour <code>int</code> is not a narrow character type so i don&#39;t see how that question is relevant here."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1541634850, "post_id": 53199480, "comment_id": 93287837, "body": "@Swordfish it answers for all indeterminate types"}], "tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": true, "score": 3, "last_activity_date": 1541633844, "last_edit_date": 1541633844, "creation_date": 1541633478, "answer_id": 53199480, "question_id": 53199440, "link": "https://stackoverflow.com/questions/53199440/initialization-list-with-items-declared-but-not-initialized/53199480#53199480", "title": "Initialization list with items declared but not initialized", "body": "<p>Not initializing a member in the initializer list won't lead to undefined behaviour. Reading it is undefined behaviour. A not initialized <code>int</code> will be default-initialized which leaves it in an indeterminate state.</p>\n"}, {"comments": [{"owner": {"reputation": 346, "user_id": 4027041, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-08GRJ8p4DdI/AAAAAAAAAAI/AAAAAAAAACo/nV2hTe5g9hk/photo.jpg?sz=128", "display_name": "Caio Gomes", "link": "https://stackoverflow.com/users/4027041/caio-gomes"}, "edited": false, "score": 0, "creation_date": 1541634744, "post_id": 53199596, "comment_id": 93287813, "body": "I get it, but what if I have let 20 properties in my class and I just need to initialize 2? The approach is to make a big initialization list and initialize all of these properties?"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 346, "user_id": 4027041, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-08GRJ8p4DdI/AAAAAAAAAAI/AAAAAAAAACo/nV2hTe5g9hk/photo.jpg?sz=128", "display_name": "Caio Gomes", "link": "https://stackoverflow.com/users/4027041/caio-gomes"}, "edited": false, "score": 1, "creation_date": 1541634851, "post_id": 53199596, "comment_id": 93287839, "body": "@CaioGomes as long as you don&#39;t read uninitialized data you are fine!"}], "tags": [], "owner": {"reputation": 3819, "user_id": 4289700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GGKsgSVN_n4/AAAAAAAAAAI/AAAAAAAAAvQ/_IAucbb8ss8/photo.jpg?sz=128", "display_name": "HugoTeixeira", "link": "https://stackoverflow.com/users/4289700/hugoteixeira"}, "is_accepted": false, "score": 1, "last_activity_date": 1541634281, "creation_date": 1541634281, "answer_id": 53199596, "question_id": 53199440, "link": "https://stackoverflow.com/questions/53199440/initialization-list-with-items-declared-but-not-initialized/53199596#53199596", "title": "Initialization list with items declared but not initialized", "body": "<p>The idea of undefined behavior depends on the context here. The point is that your code should NOT trust the value of non-initialized variables. For example, consider this piece of code (extended from your example):</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Example {\npublic:\n    int a, b, c;\n    Example() : a(1), c(2) {}\n};\n\nvoid print(const Example&amp; e) {\n    std::cout &lt;&lt; e.a &lt;&lt; ' ' &lt;&lt; e.b &lt;&lt; ' ' &lt;&lt; e.c &lt;&lt; '\\n';\n}\n\nint main()\n{\n    Example e, f, g;\n    print(e);\n    print(f);\n    print(g);\n    return 0;\n}\n</code></pre>\n\n<p>When I run it, I get:</p>\n\n<pre><code>1 32766 2\n1 0 2\n1 0 2\n</code></pre>\n\n<p>So clearly the value of <code>b</code> should not be trusted. You should also get a warning message that says:</p>\n\n<blockquote>\n  <p>Constructor does not initialize these fields: b</p>\n</blockquote>\n\n<p>Considering that it is a good practice to clean up warning messages from the code, you shouldn't develop serious project with this approach.</p>\n"}], "owner": {"reputation": 346, "user_id": 4027041, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-08GRJ8p4DdI/AAAAAAAAAAI/AAAAAAAAACo/nV2hTe5g9hk/photo.jpg?sz=128", "display_name": "Caio Gomes", "link": "https://stackoverflow.com/users/4027041/caio-gomes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 822, "favorite_count": 0, "accepted_answer_id": 53199480, "answer_count": 2, "score": 2, "last_activity_date": 1541634281, "creation_date": 1541633218, "question_id": 53199440, "link": "https://stackoverflow.com/questions/53199440/initialization-list-with-items-declared-but-not-initialized", "title": "Initialization list with items declared but not initialized", "body": "<p>I have a question regarding initialization lists when I'm not initializing all the items.   </p>\n\n<p>Let's say I have the following code: </p>\n\n<pre><code>class Example {\n  int a, b, c;\n\n  Example() : a(1), b(2), c(3) {}\n}\n</code></pre>\n\n<p>I'm aware that the order of initialization of members is defined by their order of declaration, not by the order in which they are listed in the initialization list, but, what if I don't have <strong>b</strong> in the initialization list as in the following?</p>\n\n<pre><code>class Example {\n  int a, b, c;\n\n  Example() : a(1), c(2) {}\n}\n</code></pre>\n\n<p>Will <strong>a</strong> be initialized with <strong>1</strong>, <strong>b</strong> with an undefined value and <strong>c</strong> with <strong>3</strong>? Will I get an undefined behavior because I'm not calling the initialization list strictly with the order I'm declaring? Or none of this?</p>\n\n<p>I'm asking this because I have a class with a lot of data and I want to make sure some of it have an initial value, but I don't need to initialize all of it.</p>\n"}, {"tags": ["c++", "winapi", "desktop"], "comments": [{"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1541633130, "post_id": 53199357, "comment_id": 93287414, "body": "Does SPI_SETDESKWALLPAPER accept .png files?"}, {"owner": {"reputation": 1, "user_id": 3608848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f47e6b1fa42083bde988aa4a679bdf?s=128&d=identicon&r=PG&f=1", "display_name": "programme-zero", "link": "https://stackoverflow.com/users/3608848/programme-zero"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1541633543, "post_id": 53199357, "comment_id": 93287492, "body": "From what I&#39;ve found on the internet it looks like it does. MSDN doesn&#39;t gives infos : &quot; SPI_SETDESKWALLPAPER 0x0014  \t Note  When the SPI_SETDESKWALLPAPER flag is used, SystemParametersInfo returns TRUE unless there is an error (like when the specified file doesn&#39;t exist).&quot;"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1541633585, "post_id": 53199357, "comment_id": 93287508, "body": "I&#39;d try it with a .bmp file, just to check."}, {"owner": {"reputation": 1, "user_id": 3608848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f47e6b1fa42083bde988aa4a679bdf?s=128&d=identicon&r=PG&f=1", "display_name": "programme-zero", "link": "https://stackoverflow.com/users/3608848/programme-zero"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1541633626, "post_id": 53199357, "comment_id": 93287520, "body": "I&#39;m going to try and I will write the result here."}, {"owner": {"reputation": 32382, "user_id": 587803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7431a850a166ca3a648141c532aa9d0?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/587803/ben"}, "edited": false, "score": 2, "creation_date": 1541633676, "post_id": 53199357, "comment_id": 93287536, "body": "You need to save <code>GetLastError()</code> immediately after the call to <code>SystemParametersInfoW</code> and before <code>cout</code>. <code>cout</code> can reset it."}, {"owner": {"reputation": 1189, "user_id": 9232218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7ced53adbb0ba08d1cea65a43b124d?s=128&d=identicon&r=PG&f=1", "display_name": "Yastanub", "link": "https://stackoverflow.com/users/9232218/yastanub"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1541633680, "post_id": 53199357, "comment_id": 93287537, "body": "@PaulSanders it seems indeed like the function only accepts bitmaps as stated [here] (<a href=\"http://www.jasinskionline.com/windowsapi/ref/s/systemparametersinfo.html\" rel=\"nofollow noreferrer\">jasinskionline.com/windowsapi/ref/s/systemparametersinfo.ht&zwnj;&#8203;ml</a>) &amp;quot;SPI_SETDESKWALLPAPER = 20Set the current desktop wallpaper bitmap.&amp;#160;uiParam&amp;#160;must be 0.&amp;#160;pvParam&amp;#160;is a String holding the filename of the bitmap file to use as the wallpaper.&amp;quot;"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 1, "creation_date": 1541634189, "post_id": 53199357, "comment_id": 93287674, "body": "Try with <code>SPIF_UPDATEINIFILE | SPIF_SENDCHANGE</code> as the flags value."}, {"owner": {"reputation": 1, "user_id": 3608848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f47e6b1fa42083bde988aa4a679bdf?s=128&d=identicon&r=PG&f=1", "display_name": "programme-zero", "link": "https://stackoverflow.com/users/3608848/programme-zero"}, "edited": false, "score": 0, "creation_date": 1541634358, "post_id": 53199357, "comment_id": 93287717, "body": "I tried updating the flags, no changes."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1541634882, "post_id": 53199357, "comment_id": 93287846, "body": "In that case all I can think of is the file doesn&#39;t actually exist or can&#39;t be read for some reason. In any event it&#39;s probably better to use the <code>IActiveDesktop</code> interface these days."}, {"owner": {"reputation": 146, "user_id": 6253890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1953d8e22c4fcd4740279798f6661dda?s=128&d=identicon&r=PG&f=1", "display_name": "051026luyaok", "link": "https://stackoverflow.com/users/6253890/051026luyaok"}, "edited": false, "score": 0, "creation_date": 1541669746, "post_id": 53199357, "comment_id": 93297958, "body": "Your code works for me on Windows 10 desktop. Output in console is Success !"}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1541637000, "post_id": 53199738, "comment_id": 93288321, "body": "Don&#39;t forget error handling. If <code>CoInitializeEx()</code> returns a failure <code>HRESULT</code> other than <code>RPC_E_CHANGED_MODE</code>, <code>CoCreateInstance()</code> and other COM calls are going to fail as well. And don&#39;t call <code>CoUninitialize()</code> if <code>CoInitializeEx()</code> fails. And if <code>CoCreateInstance()</code> returns a failure <code>HRESULT</code>, the address stored in the <code>desktop</code> variable is indeterminate and cannot be used."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1541637264, "post_id": 53199738, "comment_id": 93288381, "body": "<code>HRESULT status = CoInitializeEx(...); bool doUninit = SUCCEEDED(status); if (doUninit || (status == RPC_E_CHANGED_MODE)) { status = CoCreateInstance(..., &amp;desktop); if (SUCCEEDED(status)) { ... desktop-&gt;Release(); } if (doUninit) CoUninitialize(); }</code>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1541637323, "post_id": 53199738, "comment_id": 93288394, "body": "In fact, your function should not be calling <code>CoInitializeEx()</code> and <code>CoUninitialize()</code> at all, it is the calling thread&#39;s responsibility to call them during its own startup and cleanup: <code>CoInitializeEx(...); ... SetWallpaper(...); ... CoUninitialize();</code>"}, {"owner": {"reputation": 1, "user_id": 3608848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f47e6b1fa42083bde988aa4a679bdf?s=128&d=identicon&r=PG&f=1", "display_name": "programme-zero", "link": "https://stackoverflow.com/users/3608848/programme-zero"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1541638855, "post_id": 53199738, "comment_id": 93288782, "body": "I still have a small problem &quot;wOption.dwStyle = WPSTYLE_STRETCH;&quot; has no effect, by that I mean it&#39;s always centered even when I modify this param any ideas why ?"}, {"owner": {"reputation": 1, "user_id": 3608848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f47e6b1fa42083bde988aa4a679bdf?s=128&d=identicon&r=PG&f=1", "display_name": "programme-zero", "link": "https://stackoverflow.com/users/3608848/programme-zero"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1541639173, "post_id": 53199738, "comment_id": 93288872, "body": "I just saw the last part what do you mean indeterminate ?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1541639179, "post_id": 53199738, "comment_id": 93288873, "body": "Your &quot;new code&quot; is wrong. <code>CoCreateInstance()</code> will never return <code>RPC_E_CHANGED_MODE</code>, only <code>CoInitialize&#47;Ex()</code> can return that, so <code>doUninit</code> has no meaning for <code>CoCreateInstance()</code>. And your code does not call <code>SetWallpaper()</code> if <code>CoInitializeEx()</code> does return <code>RPC_E_CHANGED_MODE</code>, which is not a failure condition, just a condition that warrants skipping <code>CoUninitialize()</code>.  And you are calling <code>Release()</code> if <code>CoCreateInstance()</code> fails. Use what I showed you in my previous comment"}, {"owner": {"reputation": 1, "user_id": 3608848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f47e6b1fa42083bde988aa4a679bdf?s=128&d=identicon&r=PG&f=1", "display_name": "programme-zero", "link": "https://stackoverflow.com/users/3608848/programme-zero"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1541639267, "post_id": 53199738, "comment_id": 93288895, "body": "Btw thanks for the help I have no experience with this API so sorry if my questions are a bit dumb."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1541639450, "post_id": 53199738, "comment_id": 93288938, "body": "You are still calling <code>desktop-&gt;Release()</code> if <code>CoCreateInstance()</code> fails. And GET RID of <code>doUninit</code> inside of <code>SetWallpaper()</code>, it doesn&#39;t belong there. And you are still calling <code>CoUnitialize()</code> if <code>CoInitializeEx()</code> returns <code>RPC_E_CHANGED_MODE</code>, don&#39;t do that."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1541639885, "post_id": 53199738, "comment_id": 93289036, "body": "<code>SetWallpaper()</code> is fine now, but you are still calling <code>CoUninitialize()</code> if <code>CoInitializeEx()</code> returns <code>RPC_E_CHANGED_MODE</code>. DON&#39;T call <code>CoUninitialize()</code> UNLESS <code>CoInitializeEx()</code> returns EITHER <code>S_OK</code> or <code>S_FALSE</code>, both of which are handled by <code>SUCCEEDED()</code>."}, {"owner": {"reputation": 1, "user_id": 3608848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f47e6b1fa42083bde988aa4a679bdf?s=128&d=identicon&r=PG&f=1", "display_name": "programme-zero", "link": "https://stackoverflow.com/users/3608848/programme-zero"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1541639925, "post_id": 53199738, "comment_id": 93289043, "body": "Ok I&#39;m using your code but can you please elaborate on what you meant when you said the  desktop is is not usable ? I think I get it now. I have to read documentation on COM objects."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1541639981, "post_id": 53199738, "comment_id": 93289062, "body": "If <code>CoCreateInstance()</code> fails, <code>desktop</code> will not be pointing at a valid <code>IActiveDesktop</code> object in memory. It SHOULD get set to NULL on failure, but just in case, don&#39;t rely on that behavior. Just don&#39;t use <code>desktop</code> at all UNLESS <code>CoCreateInstance()</code> returns <code>S_OK</code>, which is handled by <code>SUCCEEDED()</code>."}, {"owner": {"reputation": 1, "user_id": 3608848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f47e6b1fa42083bde988aa4a679bdf?s=128&d=identicon&r=PG&f=1", "display_name": "programme-zero", "link": "https://stackoverflow.com/users/3608848/programme-zero"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1541640289, "post_id": 53199738, "comment_id": 93289127, "body": "Ok seems to be working now. I found that IActiveDesktop is a COM object but I don&#39;t really know what that is as you can see I am struggling quite a bit. Could you please link your documentation ?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1541640439, "post_id": 53199738, "comment_id": 93289161, "body": "<a href=\"https://docs.microsoft.com/en-us/windows/desktop/com/component-object-model--com--portal\" rel=\"nofollow noreferrer\">Component Object Model (COM)</a>, <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/combaseapi/nf-combaseapi-coinitializeex\" rel=\"nofollow noreferrer\"><code>CoInitializeEx()</code></a>, <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/combaseapi/nf-combaseapi-couninitialize\" rel=\"nofollow noreferrer\"><code>CoUninitialize()</code></a>, <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/shlobj_core/nn-shlobj_core-iactivedesktop\" rel=\"nofollow noreferrer\"><code>IActiveDesktop</code></a>, <a href=\"https://docs.microsoft.com/en-us/windows/desktop/lwef/active-desktop-interface\" rel=\"nofollow noreferrer\">Using the Active Desktop Object</a>"}, {"owner": {"reputation": 1, "user_id": 3608848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f47e6b1fa42083bde988aa4a679bdf?s=128&d=identicon&r=PG&f=1", "display_name": "programme-zero", "link": "https://stackoverflow.com/users/3608848/programme-zero"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1541640728, "post_id": 53199738, "comment_id": 93289232, "body": "Well thanks for everything, I am not really sure of why the handling solved the problem but everything is working perfect. Have a nice day."}], "tags": [], "owner": {"reputation": 1, "user_id": 3608848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f47e6b1fa42083bde988aa4a679bdf?s=128&d=identicon&r=PG&f=1", "display_name": "programme-zero", "link": "https://stackoverflow.com/users/3608848/programme-zero"}, "is_accepted": true, "score": 0, "last_activity_date": 1541635514, "creation_date": 1541635514, "answer_id": 53199738, "question_id": 53199357, "link": "https://stackoverflow.com/questions/53199357/c-change-the-desktop-with-changeparametersinfo-not-working-getlasterror-return/53199738#53199738", "title": "C++ Change the desktop with ChangeParametersInfo not working GetLastError returns 0", "body": "<p>From the advice on the comments I abandoned ChangeParametersInfo and implemented this quick function I found. Worked instantly.</p>\n\n<pre><code>void  SetWallpaper(LPCWSTR file) \n {\n    CoInitializeEx(0, COINIT_APARTMENTTHREADED);\n    IActiveDesktop* desktop;\n    HRESULT status = CoCreateInstance(CLSID_ActiveDesktop, NULL, CLSCTX_INPROC_SERVER, IID_IActiveDesktop, (void**)&amp;desktop);\n    WALLPAPEROPT wOption;\n    ZeroMemory(&amp;wOption, sizeof(WALLPAPEROPT));\n    wOption.dwSize = sizeof(WALLPAPEROPT);\n    wOption.dwStyle = WPSTYLE_CENTER;\n    status = desktop-&gt;SetWallpaper(file, 0);\n    status = desktop-&gt;SetWallpaperOptions(&amp;wOption, 0);\n    status = desktop-&gt;ApplyChanges(AD_APPLY_ALL);\n    desktop-&gt;Release();\n    CoUninitialize();\n}\n</code></pre>\n\n<p>Usage </p>\n\n<pre><code>SetWallpaper(L\"c:\\\\temp\\\\extracted.png\");\n</code></pre>\n\n<p>This is so much easier than bothering with the old one. Still wondering why it wasn't giving an error. Hope this will help someone else.\nThanks for the advices everyone.</p>\n"}], "owner": {"reputation": 1, "user_id": 3608848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f47e6b1fa42083bde988aa4a679bdf?s=128&d=identicon&r=PG&f=1", "display_name": "programme-zero", "link": "https://stackoverflow.com/users/3608848/programme-zero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 53199738, "answer_count": 1, "score": -2, "last_activity_date": 1541636630, "creation_date": 1541632672, "last_edit_date": 1541636630, "question_id": 53199357, "link": "https://stackoverflow.com/questions/53199357/c-change-the-desktop-with-changeparametersinfo-not-working-getlasterror-return", "title": "C++ Change the desktop with ChangeParametersInfo not working GetLastError returns 0", "body": "<p>I'm trying to use the following code to change the wall paper on a Windows 7 machine. I'm compiling with Multi Byte Character Set.</p>\n\n<pre><code>if(SystemParametersInfoW(SPI_SETDESKWALLPAPER, 0, L\"c:\\\\temp\\\\extracted.png\", SPIF_SENDCHANGE) != 0)\n{\n    std::cout &lt;&lt; \"Success !\" &lt;&lt; std::endl;\n}\nelse\n{\n    std::cout &lt;&lt; \"Failure :(\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n    system(\"title :(\");\n}\n</code></pre>\n\n<p>I have no idea of why this is not working since it doesn't return an error code (GetLastError gives 0). No need to say that the wall paper remains unchanged.</p>\n\n<p>EDIT: tried to change to this and to put a bmp file instead.</p>\n\n<pre><code>int error(0);\nif(SystemParametersInfoW(SPI_SETDESKWALLPAPER, 0, L\"c:\\\\temp\\\\extracted.bmp\", SPIF_SENDCHANGE) != 0)\n{\n    std::cout &lt;&lt; \"Success !\" &lt;&lt; std::endl;\n}\nelse\n{\n    error = GetLastError();\n    std::cout &lt;&lt; \"Failure :(\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Error: \" &lt;&lt; error &lt;&lt; std::endl;\n    system(\"title :(\");\n}\nsystem(\"pause\");\n</code></pre>\n\n<p>Output in console is Failure :( followed by Error: 0</p>\n"}, {"tags": ["c++", "memory", "struct"], "comments": [{"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1541633642, "post_id": 53199332, "comment_id": 93287529, "body": "Take a look at this from cppcon 2018; <a href=\"https://www.youtube.com/watch?v=yy8jQgmhbAU\" rel=\"nofollow noreferrer\">youtube.com/watch?v=yy8jQgmhbAU</a>  It&#39;s a detailed look at the impact of program structure, OOP v Data Oriented Design. Insightful talk."}, {"owner": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "edited": false, "score": 0, "creation_date": 1541634215, "post_id": 53199332, "comment_id": 93287680, "body": "You don&#39;t want <code>std::list</code>. The only &quot;good&quot; reason I can think of to use <code>std::list</code> is if you want stable pointers to list elements, and that&#39;s not a good reason, that&#39;s a bad reason. Use vector."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1541635130, "post_id": 53199332, "comment_id": 93287895, "body": "Write both, then profile. That said,  Paul&#39;s right in his answer. There&#39;s rarely a need for pointers in a <code>std::list</code> outside polymorphism because list has very forgiving iterator invalidation. <code>list</code> also has poor cache and and branch prediction friendliness, so you might want to throw a <code>std::vector</code> into the mix to see if its O(1) access and cache-friendliness while iterating advantages outweigh the O(N) disadvantage when removing an element."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1541635314, "post_id": 53199559, "comment_id": 93287936, "body": "<code>list</code>&#39;s specialty is comes and goes quickly whether owns the contents or not. You&#39;re probably going to be slower with the pointer due to the addition of an extra level of pointer chasing and the extra (assuming here) dynamic memory management."}], "tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": false, "score": 1, "last_activity_date": 1541634045, "creation_date": 1541634045, "answer_id": 53199559, "question_id": 53199332, "link": "https://stackoverflow.com/questions/53199332/c-frequently-changing-list-of-structs-keep-only-pointers-or-entire-structs/53199559#53199559", "title": "C++ frequently changing list of structs - keep only pointers or entire structs?", "body": "<p>My $0.02: having your list 'own' your <code>stAttribute</code> objects seems entirely appropriate to me - that's the way things are usually done in general and the fact that they come and go frequently wouldn't change my view on that.</p>\n\n<p>However, do investigate the <code>emplace_xxx</code> functions offered by <code>std::list</code> (which eliminate the copy operation implied by, e.g., <code>push_back</code>) and be sure that a <code>std::list</code> is the optimal container for your use-case before you commit to it.</p>\n"}], "owner": {"reputation": 77, "user_id": 6402049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fabacdab8a3ef663ab86a3b61ae77c05?s=128&d=identicon&r=PG&f=1", "display_name": "hazelnutek", "link": "https://stackoverflow.com/users/6402049/hazelnutek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541634045, "creation_date": 1541632470, "question_id": 53199332, "link": "https://stackoverflow.com/questions/53199332/c-frequently-changing-list-of-structs-keep-only-pointers-or-entire-structs", "title": "C++ frequently changing list of structs - keep only pointers or entire structs?", "body": "<p>I have a class for each entity in game, which has a child class used for managing some attributes of this entity.\nThe attribute managing class holds a std::list of structs, each struct has data about a single attribute and a few simple functions to manipulate that data.\nHere's some pseudo-code to illustrate it:</p>\n\n<pre><code>struct stAttribute\n{\n    /* data &amp; functions */\n}\n\nclass AttributeManager\n{\n    std::list&lt;struct stAttribute&gt; attributeList;\n    /* ... */\n};\n\nclass Entity\n{\n    AttributeManager attribMgr;\n    /* .... */\n};\n\nint main(void)\n{\n    Entity ent;\n\n    struct stAttribute newAttrib;\n    /* ... */\n    ent.attribMgr.attributeList.push_back(x);\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Entities are frequently created &amp; deleted in the game at runtime, the same goes for the attributes.</p>\n\n<p>I start having doubts whether creating them 'statically' and keeping entire structs in the list is a good choice. My main concern is the performance.\nWould it be better to allocate memory dynamically and store only pointers to the structs? Freeing the memory isn't any problem because the deletion of attributes is handled by the AttributeManager class.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1685, "user_id": 6261331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uNHq.png?s=128&g=1", "display_name": "Asu", "link": "https://stackoverflow.com/users/6261331/asu"}, "edited": false, "score": 3, "creation_date": 1541630161, "post_id": 53198919, "comment_id": 93286405, "body": "Can you define &quot;doesn&#39;t work&quot;? Compile error? Garbage data? Nothing written to file?"}, {"owner": {"reputation": 4579, "user_id": 459565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cc92778353971733be88d04c26603ec7?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/459565/eugene"}, "edited": false, "score": 7, "creation_date": 1541630301, "post_id": 53198919, "comment_id": 93286454, "body": "No, you cannot take an address of a temporary."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1541630815, "post_id": 53198919, "comment_id": 93286666, "body": "Sadly (or not), C++ does not have compound literals. You need to have a variable."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1541631996, "post_id": 53198919, "comment_id": 93287036, "body": "This site uses a Question and Answer format. Answers go in the Answer boxes; please do not edit the question to contain an answer. Instead you can accept one of the posted answers; or post and accept your own answer."}], "answers": [{"comments": [{"owner": {"reputation": 8676, "user_id": 2723734, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e31ef666276f58f666604a7531a57b94?s=128&d=identicon&r=PG&f=1", "display_name": "thc", "link": "https://stackoverflow.com/users/2723734/thc"}, "edited": false, "score": 0, "creation_date": 1541630519, "post_id": 53198977, "comment_id": 93286536, "body": "Thanks.  It&#39;s not so much a problem, it&#39;s just that I have to do it a lot, and I dislike having temporary variables."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 1, "creation_date": 1541630591, "post_id": 53198977, "comment_id": 93286565, "body": "Would you mind to replacing <code>8</code> with <code>sizeof(u64)</code> ?"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1541630620, "post_id": 53198977, "comment_id": 93286573, "body": "@Christophe Done"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 8676, "user_id": 2723734, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e31ef666276f58f666604a7531a57b94?s=128&d=identicon&r=PG&f=1", "display_name": "thc", "link": "https://stackoverflow.com/users/2723734/thc"}, "edited": false, "score": 1, "creation_date": 1541630699, "post_id": 53198977, "comment_id": 93286607, "body": "@thc Put the code in a (small, inline) function then."}, {"owner": {"reputation": 8676, "user_id": 2723734, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e31ef666276f58f666604a7531a57b94?s=128&d=identicon&r=PG&f=1", "display_name": "thc", "link": "https://stackoverflow.com/users/2723734/thc"}, "edited": false, "score": 0, "creation_date": 1541631180, "post_id": 53198977, "comment_id": 93286766, "body": "@PaulSanders here&#39;s what I have.  Look good?  <code>inline void writeSizeToFile8(std::ofstream &amp; myFile, size_t x) {uint64_t x_temp = static_cast&lt;uint64_t&gt;(x); myFile.write(reinterpret_cast&lt;char*&gt;(&amp;x_temp),8);}</code>"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1541631513, "post_id": 53198977, "comment_id": 93286875, "body": "Edit your question instead of adding to it via comments please."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1541631516, "post_id": 53198977, "comment_id": 93286876, "body": "Seems too complicated.  You don&#39;t need a cast when assigning to <code>x_temp</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1541632473, "post_id": 53198977, "comment_id": 93287216, "body": "@TedLyngmo the question could be edited to contain further information that clarifies the question -- not to contain proposed answers"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1541632897, "post_id": 53198977, "comment_id": 93287347, "body": "@M.M Ok, I read it like something that could have been tried out by OP, failed and then added to the question."}], "tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": false, "score": 4, "last_activity_date": 1541630608, "last_edit_date": 1541630608, "creation_date": 1541630371, "answer_id": 53198977, "question_id": 53198919, "link": "https://stackoverflow.com/questions/53198919/writing-bytes-of-size-t-to-binary-file/53198977#53198977", "title": "Writing bytes of size_t to binary file", "body": "<p>You probably want something like:</p>\n\n<pre><code>uint64_t u64 = x;\nmyfile.write ((const char *) &amp;u64, sizeof (u64));\n</code></pre>\n\n<p>You can't get away without assigning x to a temporary, but then again, why is that a problem?</p>\n"}, {"comments": [{"owner": {"reputation": 8676, "user_id": 2723734, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e31ef666276f58f666604a7531a57b94?s=128&d=identicon&r=PG&f=1", "display_name": "thc", "link": "https://stackoverflow.com/users/2723734/thc"}, "edited": false, "score": 0, "creation_date": 1541705997, "post_id": 53199553, "comment_id": 93317498, "body": "Thanks!  Why do you return the output stream rather than just returning void?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 8676, "user_id": 2723734, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e31ef666276f58f666604a7531a57b94?s=128&d=identicon&r=PG&f=1", "display_name": "thc", "link": "https://stackoverflow.com/users/2723734/thc"}, "edited": false, "score": 0, "creation_date": 1541706305, "post_id": 53199553, "comment_id": 93317658, "body": "@thc It is a common pattern when using streams. It follows the form used by <code>std::getline</code> for example. It allows you to test the return condition of the stream to make sure the reading/writing succeeded, especially in a loop. Also it allows you to write <i>compound</i> input/output statements that can be expressive. If you notice the <code>myFile.write()</code> function that you used does the same thing, it returns the stream."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 8676, "user_id": 2723734, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e31ef666276f58f666604a7531a57b94?s=128&d=identicon&r=PG&f=1", "display_name": "thc", "link": "https://stackoverflow.com/users/2723734/thc"}, "edited": false, "score": 0, "creation_date": 1541706458, "post_id": 53199553, "comment_id": 93317720, "body": "@thc All the output (and input) functions of stream objects return a reference to the stream: <a href=\"https://en.cppreference.com/w/cpp/io/basic_ostream/write\" rel=\"nofollow noreferrer\">std::ofstream::write</a> for example. Also <a href=\"https://en.cppreference.com/w/cpp/io/basic_ostream/put\" rel=\"nofollow noreferrer\">std::ofstream::put</a>. And all of the <a href=\"https://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt\" rel=\"nofollow noreferrer\">insertion operators &lt;&lt;</a>."}], "tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": true, "score": 2, "last_activity_date": 1541705829, "last_edit_date": 1541705829, "creation_date": 1541633999, "answer_id": 53199553, "question_id": 53198919, "link": "https://stackoverflow.com/questions/53198919/writing-bytes-of-size-t-to-binary-file/53199553#53199553", "title": "Writing bytes of size_t to binary file", "body": "<p>You can't take the address of a temporary. For convenience, I would probably make a function for this. Using a function means you create a parameter and you <strong>can</strong> take the address of a parameter.</p>\n\n<p>Something a bit like this:</p>\n\n<pre><code>template&lt;typename POD&gt;\nstd::ostream&amp; write_pod(std::ostream&amp; os, POD const&amp; pod)\n{\n    // make sure we're not trying to write a complex object this way\n    static_assert(std::is_pod&lt;POD&gt;::value, \"must be plain old data\");\n\n    return os.write(reinterpret_cast&lt;char const*&gt;(pod), sizeof(pod));\n}\n\nint main()\n{\n    std::size_t x = 123;\n\n    std::ofstream myFile(\"myfile.bin\", std::ios::binary);\n\n    write_pod(myFile, std::uint64_t(x));\n\n    // ...\n}\n</code></pre>\n"}], "owner": {"reputation": 8676, "user_id": 2723734, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e31ef666276f58f666604a7531a57b94?s=128&d=identicon&r=PG&f=1", "display_name": "thc", "link": "https://stackoverflow.com/users/2723734/thc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 755, "favorite_count": 0, "accepted_answer_id": 53199553, "answer_count": 2, "score": -2, "last_activity_date": 1541705829, "creation_date": 1541630032, "last_edit_date": 1541631971, "question_id": 53198919, "link": "https://stackoverflow.com/questions/53198919/writing-bytes-of-size-t-to-binary-file", "title": "Writing bytes of size_t to binary file", "body": "<pre><code>size_t x = 123;\n\nstd::ofstream myFile(\"myfile.bin\", std::ios::out | std::ios::binary);\n\nmyFile.write(reinterpret_cast&lt;char*&gt;( &amp;static_cast&lt;uint64_t&gt;(x) ),8); \n\nmyFile.close()\n</code></pre>\n\n<p>I want to write the bytes of a <code>size_t</code> to a file by first promoting it to an unsigned 64 bit.  The above illusrates what I want to do, but doesn't work.  Can I do this without assigning a temporary value for x?</p>\n"}, {"tags": ["c++", "class", "pointers", "memory-management"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 4, "creation_date": 1541629402, "post_id": 53198778, "comment_id": 93286121, "body": "Because it is named <i>undefined</i> behavior for a reason."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1541630411, "post_id": 53198778, "comment_id": 93286505, "body": "<code>__mystring_hpp__</code> -- Do not use leading double underscores as an identifier.  Identifier with leading double underscores are reserved for the compiler implementation."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1541630676, "post_id": 53198778, "comment_id": 93286597, "body": "Off topic, but some advice -- your <code>trim</code> function should only need to change the <code>length</code>.  There really isn&#39;t any need to reallocate and copy the same data over again -- let the <code>length</code> control the number of characters the string actually has."}, {"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1541631702, "post_id": 53198778, "comment_id": 93286932, "body": "@user9679818: which OS, which compiler, which build mode and which platform are you compiling for? I copy/pasted your code, compiled in VS2017 and it crashes in both debug and release build x86."}, {"owner": {"reputation": 103, "user_id": 9679818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2518ac8d82eca6397888f7a4eb717281?s=128&d=identicon&r=PG&f=1", "display_name": "user9679818", "link": "https://stackoverflow.com/users/9679818/user9679818"}, "edited": false, "score": 0, "creation_date": 1541631810, "post_id": 53198778, "comment_id": 93286974, "body": "@trim thanks for advice :)"}], "answers": [{"tags": [], "owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "is_accepted": true, "score": 4, "last_activity_date": 1541629560, "creation_date": 1541629560, "answer_id": 53198817, "question_id": 53198778, "link": "https://stackoverflow.com/questions/53198778/c-deallocating-already-deallocated-does-not-give-a-compiler-error/53198817#53198817", "title": "C++,deallocating already deallocated does not give a compiler error", "body": "<p>The behavior of a program when you <code>delete</code> a pointer twice is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><em>undefined</em></a>. That means the standard does not specify what should happen in this case - in particular it does not specify that the program should crash. It might - or it might behave as expected - or it might continue but behave in unexpected ways that seem to have no relation whatever to the part of the code where the undefined behavior was invoked.</p>\n"}, {"tags": [], "owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "is_accepted": false, "score": -2, "last_activity_date": 1541635956, "last_edit_date": 1541635956, "creation_date": 1541635292, "answer_id": 53199704, "question_id": 53198778, "link": "https://stackoverflow.com/questions/53198778/c-deallocating-already-deallocated-does-not-give-a-compiler-error/53199704#53199704", "title": "C++,deallocating already deallocated does not give a compiler error", "body": "<p>As already mentioned by @TypeIA, the behavior of a double free is <em>undefined</em> in the C++ specification.</p>\n\n<p>And, in fact, it <a href=\"https://feross.org/gcc-ownage/\" rel=\"nofollow noreferrer\">has been implemented</a> as an easter egg in GCC 1.17. However, note that this was done for \"specific cases\" only. The compiler would need to be very very sure that undefined behavior is invoked before it launches some games.</p>\n\n<p>In most cases, the compiler cannot be that sure to start the easter egg. E.g. double frees are typically not implemented in one method like in your simplified case. They happen e.g. after reading a faulty file from disk, or if the user presses buttons in the wrong order etc. That's information which is simply not available at compile time.</p>\n\n<p>So, any normal compiler will likely compile something that corresponds to what you wrote in your code. (However, the optimizer might get into your way and delete unused variables etc. This sometimes needs to be considered when writing demo code.)</p>\n\n<p>If that were not the case, you would need to live with the fear that any bug in your program sends an email to your employer quitting your job, publishes all your photos on Reddit and then formats your hard drive.</p>\n\n<p>Ok, that's my opinion about undefined behavior. Not very popular maybe, and I may deserve some downvotes for saying above things. However, <a href=\"https://stackoverflow.com/tags/windbg/topusers\">I have debugged a lot</a> and from my 10 years of experience in WinDbg, I would say things are generally quite predictable and debuggable.</p>\n\n<hr>\n\n<p>Back to your original problem...</p>\n\n<p>In the title of the question, you wrote</p>\n\n<blockquote>\n  <p>deallocating already deallocated does not give a compiler error</p>\n</blockquote>\n\n<p>If you read my statement before, it's hopefully logical that this will not be a compiler error but a runtime error instead.</p>\n\n<p>I assume you meant a runtime error, because you also said:</p>\n\n<blockquote>\n  <p>From my point of view , it should crash but program works flawless</p>\n</blockquote>\n\n<p>And you did certainly not expect the compiler to crash.</p>\n\n<p>I have copy/pasted your code into a Visual Studio 2017 C++ project. I ran x86 version in debug build and release build on Windows 7 SP1 x64 - and it crashed both times.</p>\n\n<p>Debug build (run in debugger):</p>\n\n<p><a href=\"https://i.stack.imgur.com/iqSx4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iqSx4.png\" alt=\"Double free in debug build\"></a></p>\n\n<p>Release build (not run in debugger):</p>\n\n<p><a href=\"https://i.stack.imgur.com/hp9Sw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hp9Sw.png\" alt=\"Double free in release build\"></a></p>\n\n<p>In WinDbg, you can see that the destructor of the class calls <code>free()</code> and <code>free()</code> calls <code>HeapFree()</code> and <code>HeapFree()</code> detects the double free, and generates a <code>0xc0000374</code> exception.</p>\n\n<pre><code>0:000&gt; *** Release Build, debugged when crashed\n0:000&gt; k\n # ChildEBP RetAddr  \n00 0036f9d0 775bf8a9 ntdll!RtlReportCriticalFailure+0x57\n01 0036f9e0 775bf989 ntdll!RtlpReportHeapFailure+0x21\n02 0036fa14 7756d95c ntdll!RtlpLogHeapFailure+0xa1\n03 0036fa44 0f64fddb ntdll!RtlFreeHeap+0x64\n04 0036fa58 0f64fda8 ucrtbase!_free_base+0x1b\n05 0036fa68 0137106d ucrtbase!free+0x18\n06 (Inline) -------- DeallocateTwice!MyString::{dtor}+0x6 [c:\\users\\for example john\\documents\\visual studio 2017\\projects\\deallocatetwice\\mystring.cpp @ 49] \n07 0036faa0 01371277 DeallocateTwice!main+0x6d [c:\\users\\for example john\\documents\\visual studio 2017\\projects\\deallocatetwice\\deallocatetwice.cpp @ 11] \n08 (Inline) -------- DeallocateTwice!invoke_main+0x1c [f:\\dd\\vctools\\crt\\vcstartup\\src\\startup\\exe_common.inl @ 78] \n09 0036fae8 74f0343d DeallocateTwice!__scrt_common_main_seh+0xfa [f:\\dd\\vctools\\crt\\vcstartup\\src\\startup\\exe_common.inl @ 288] \n0a 0036faf4 77529802 kernel32!BaseThreadInitThunk+0xe\n0b 0036fb34 775297d5 ntdll!__RtlUserThreadStart+0x70\n0c 0036fb4c 00000000 ntdll!_RtlUserThreadStart+0x1b\n</code></pre>\n\n<p>So IMHO, your assumption \"it should crash\" was a good assumption - I would have assumed it as well. And it didn't disappoint me.</p>\n\n<hr>\n\n<p>How to proceed...</p>\n\n<p>Next time, be precise in your language, so that people start trusting you. If you mix compile time and runtime, or mix stack and heap, or flip physical RAM and virtual memory, that's not a good starting point.</p>\n\n<p>To get help for such cases, you need to ask better questions. Don't ask what the C++ standard says. In most cases it will be \"undefined\". </p>\n\n<p>Instead, post the exact environment, potentially even more exact than I did. Give us the compiler version numbers and compiler command line options. Create a minimal, complete, viable example for us to reproduce. Show your debugging skills and how far you came.</p>\n\n<p>Then, someone might come and give you an answer why it didn't crash in your case, like:</p>\n\n<ul>\n<li>you have ignored the exception in the debugger (like <code>sxi</code> in WinDbg).</li>\n<li>you have activated automatic crash dump collection. The program actually crashed, but you didn't notice it.</li>\n<li>you have disabled Windows Error Reporting.</li>\n<li>you attached the debugger to the wrong process.</li>\n<li>...</li>\n</ul>\n"}], "owner": {"reputation": 103, "user_id": 9679818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2518ac8d82eca6397888f7a4eb717281?s=128&d=identicon&r=PG&f=1", "display_name": "user9679818", "link": "https://stackoverflow.com/users/9679818/user9679818"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 53198817, "answer_count": 2, "score": -2, "last_activity_date": 1541635956, "creation_date": 1541629303, "last_edit_date": 1541629498, "question_id": 53198778, "link": "https://stackoverflow.com/questions/53198778/c-deallocating-already-deallocated-does-not-give-a-compiler-error", "title": "C++,deallocating already deallocated does not give a compiler error", "body": "<p>Firstly I have three file,</p>\n\n<p><em>mystring.cpp</em> which is for implementation of functions.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"mystring.hpp\"\n\n// Default constructor\nMyString::MyString()\n{\n    data = 0;\n    length = 0;\n}\n\nMyString::MyString(int n)\n{\n    data = new char [n];\n    length = n;\n}\n\nMyString::MyString(const char* str, int n)\n{\n    length = n;\n    data = new char [n];\n\n    for (int i = 0; i &lt; n; i++)\n    {\n        data[i] = str[i];\n    }\n}\n\nvoid MyString::trim(int n)\n{\n    if(n &lt; length)\n    {\n        int newlength = n;\n        char* newdata = new char [newlength];\n\n        for (int i = 0; i &lt; newlength; i++)\n        {\n        newdata[i] = data[i];\n        }\n\n        delete[] data;\n\n        data = newdata;\n        length = newlength;\n    }\n}\n\nMyString::~MyString()\n{\n  delete[] data;\n}\n\n\n\n\nvoid MyString::append(const MyString&amp; rhs)\n{\n    // Determine the length of the resulting\n    // string and allocate room for it.\n    int newlength = length + rhs.length;\n    char* newdata = new char [newlength];\n\n    // Copy the current string's data\n    for (int i = 0; i &lt; length; i++)\n    {\n        newdata[i] = data[i];\n    }\n\n    // Copy the given string's data\n    for (int i = 0; i &lt; rhs.length; i++)\n    {\n        newdata[i + length] = rhs.data[i];\n    }\n\n    // Now we must deallocate the original memory\n    // and update the member variables\n    delete[] data;\n\n    data = newdata;\n    length = newlength;\n}\n\n\n\nvoid MyString::print(char separator) const\n{\n    for (int i = 0; i &lt; length - 1; i++)\n    {\n\n        std::cout &lt;&lt; data[i] &lt;&lt; separator;\n    }\n\n    std::cout &lt;&lt; data[length - 1] &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>secondly a header file which is <em>mystring.hpp</em></p>\n\n<pre><code>        #ifndef __mystring_hpp__\n    #define __mystring_hpp__\n\nclass MyString\n{\n    public:\n        // Constructors\n        MyString();\n        MyString(int n);\n        MyString(const char* str, int n);\n         ~MyString(); \n\n        // Modify the current string by appending \"rhs\" to it\n        void append(const MyString&amp; rhs);\n\n        // Trim the string such that it contains \"n\" characters.\n        // If \"n\" is larger than the current string's length,\n        // then do nothing.\n        void trim(int n);\n\n        // Prints this string by putting the separator\n        // character between each element in the data.\n        // By default, do not print anything.\n        void print(char separator = '\\0') const;\n\n        // This is the destructor. It is automatically\n        // called when an object of this class is destroyed.\n        //~MyString(); //Implement!\n\n        // This is the assignment operator which is automatically\n        // called when an object of type MyString is assigned\n        // to another object of the same type. Technically, it\n        // does not have to return \"MyString&amp;\" but we do so to\n        // allow chaining assignments such as: str1 = str2 = str3\n        //MyString&amp; operator=(const MyString&amp; rhs); //Implement!\n\n        // Copy constructor. Different from the assignment operator,\n        // this is called when an object is \"being created\" as a\n        // copy of another object.\n        //MyString(const MyString&amp; rhs); //Implement!\n\n    private:\n        char* data;\n        int length;\n};\n\n    #endif // __mystring_v1_hpp__\n</code></pre>\n\n<p>And finally main_assignment.cpp which includes main.cpp</p>\n\n<pre><code>#include \"mystring.hpp\"\n\nint main()\n{\n    MyString str1(\"ali\", 3);\n    MyString str2(\"veli\", 4);\n\n    str1 = str2;\n\n\n    return 0;\n}\n</code></pre>\n\n<p>The problem here is that , I did not overloaded assignment operator for MyString class , so in *main_assignment.cpp  *    the two strings should point the same memory and when the program returns , it should try to deallocate the  one of two first but when it comes to the other one it will try to deallocate a pointer which poinst some \"undefined \" memory .</p>\n\n<p>From my point of view , it should crash but program works flawless , why ?</p>\n"}, {"tags": ["java", "c++", "stl", "yaml", "yaml-cpp"], "answers": [{"comments": [{"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 0, "creation_date": 1541948977, "post_id": 53247246, "comment_id": 93384967, "body": "Welcome to <a href=\"https://stackoverflow.com\">Stack Overflow</a>. Asking questions in an answer is not really appropriate. Either write a comment (once you have enough reputation) asking the OP which version (s)he/it is using. You can just write your version information so it is clear what you used. If the OP has a different, incompatible version, you&#39;ll probably get a comment stating that."}, {"owner": {"reputation": 35, "user_id": 10635545, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9rZU0C4-huY/AAAAAAAAAAI/AAAAAAAAAGE/AFqiHILtu30/photo.jpg?sz=128", "display_name": "Crow", "link": "https://stackoverflow.com/users/10635545/crow"}, "reply_to_user": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 0, "creation_date": 1542024055, "post_id": 53247246, "comment_id": 93407711, "body": "@Anthon Thanks for your suggestion, my answer may be so verbose.I will make it concise and clear at next answer"}, {"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 1, "creation_date": 1542037595, "post_id": 53247246, "comment_id": 93415209, "body": "I don&#39;t think your answer is too verbose. I have made much more verbose ones. Just restrict yourself to statement. And if some aspect in the question is not 100% clear, just state what assumption you made. Or do something like &quot;If you have version x.y, then ... and if you have version x.z you do .... For older versions I don&#39;t think .....&quot;"}], "tags": [], "owner": {"reputation": 35, "user_id": 10635545, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9rZU0C4-huY/AAAAAAAAAAI/AAAAAAAAAGE/AFqiHILtu30/photo.jpg?sz=128", "display_name": "Crow", "link": "https://stackoverflow.com/users/10635545/crow"}, "is_accepted": false, "score": 1, "last_activity_date": 1541948767, "last_edit_date": 1541948767, "creation_date": 1541927065, "answer_id": 53247246, "question_id": 53198608, "link": "https://stackoverflow.com/questions/53198608/add-yaml-values-to-std-map-using-yaml-cpp/53247246#53247246", "title": "Add YAML values to std map using YAML-CPP", "body": "<p>I've used this great library for YAML parser for 2 days. So, I may also have some mistakes. I use yaml-cpp ver0.6.2.</p>\n\n<p>The main idea is to build your own structure.\nAfter that, template specialization is used for specific types of transformation.</p>\n\n<p>I think the structure of your document is not very good. It feels like nesting for std::map. I think you can look at this example <a href=\"https://github.com/jbeder/yaml-cpp/wiki/How-To-Parse-A-Document-(Old-API)#a-complete-example\" rel=\"nofollow noreferrer\">Only for yaml file</a>, Because these API are old</p>\n\n<p>At last, you can pull the values into structures you've constructed.</p>\n\n<p>I sorry, I'm poor in English. So show you my code. And you can ask me again if you have new problems.</p>\n\n<p>Also, the code author is here. You may get more accurate answers from him .</p>\n\n<pre><code>struct Planet {\n    std::string earth;\n};\n\nstruct Satellite {\n    std::string moon;\n};\n\nstruct SolarSystem {\n    Planet p;\n    Satellite s;\n};\n\nnamespace YAML {\ntemplate&lt;&gt;\nstruct convert&lt;Planet&gt; {\n    static Node encode(const Planet &amp;rhs) {\n        Node node;\n        node[\"earth\"] = rhs.earth;\n        return node;\n    }\n\n    static bool decode(const Node &amp;node, Planet &amp;rhs) {\n        if (!node.IsMap())\n            return false;\n        rhs.earth = node[\"earth\"].as&lt;std::string&gt;();\n        return true;\n    }\n};\n\ntemplate&lt;&gt;\nstruct convert&lt;Satellite&gt; {\n    static Node encode(const Satellite &amp;rhs) {\n        Node node;\n        node[\"moon\"] = rhs.moon;\n        return node;\n    }\n\n    static bool decode(const Node &amp;node, Satellite &amp;rhs) {\n        if (!node.IsMap())\n            return false;\n        rhs.moon = node[\"moon\"].as&lt;std::string&gt;();\n        return true;\n    }\n};\n\ntemplate&lt;&gt;\nstruct convert&lt;SolarSystem&gt; {\n    static Node encode(const SolarSystem &amp;rhs) {\n        Node node;\n        node[\"my/planet\"] = rhs.p;\n        node[\"my/satellite\"] = rhs.s;\n        return node;\n    }\n\n    static bool decode(const Node &amp;node, SolarSystem &amp;rhs) {\n        if (!node.IsMap())\n            return false;\n\n        rhs.p = node[\"my/planet\"].as&lt;Planet&gt;();\n        rhs.s = node[\"my/satellite\"].as&lt;Satellite&gt;();\n        return true;\n    }\n};\n}\n\nint main(void)\n{\n    YAML::Node doc = YAML::LoadFile(\"path/to/your/file\");\n    SolarSystem ss = doc[\"SOLAR-SYSTEM\"].as&lt;SolarSystem&gt;();\n\n    std::cout &lt;&lt; ss.p.earth &lt;&lt; std::endl;      // \"blue\"\n    std::cout &lt;&lt; ss.s.moon &lt;&lt; std::endl;       // \"white\"\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 189, "user_id": 6828175, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6e9d001d0030aca9d02a98b0f6456de8?s=128&d=identicon&r=PG&f=1", "display_name": "hal9000", "link": "https://stackoverflow.com/users/6828175/hal9000"}, "is_accepted": true, "score": 0, "last_activity_date": 1542304481, "creation_date": 1542304481, "answer_id": 53325316, "question_id": 53198608, "link": "https://stackoverflow.com/questions/53198608/add-yaml-values-to-std-map-using-yaml-cpp/53325316#53325316", "title": "Add YAML values to std map using YAML-CPP", "body": "<p>Not sure why it was downvoted. Thanks to @Crow for the answer. I couldn't use it as it involved hard coding the values. Here is the solution i devised:</p>\n\n<pre><code>try {\n        YAML::Node firstTierNode = YAML::LoadFile(\"config.yml\");\n\n        std::map&lt;std::string, std::map&lt;std::string, std::map&lt;std::string, std::string&gt;&gt;&gt; newMap1;\n        for (YAML::const_iterator it = firstTierNode.begin(); it != firstTierNode.end(); ++it) {\n\n            string level1First = it-&gt;first.as&lt;std::string&gt;();\n\n            YAML::Node secondTierNode = it-&gt;second;\n\n            std::map&lt;std::string, std::map&lt;std::string, std::string&gt;&gt;  newMap2;\n            for (YAML::const_iterator it = secondTierNode.begin(); it != secondTierNode.end(); ++it) {\n\n                string level2First = it-&gt;first.as&lt;std::string&gt;();\n\n                YAML::Node thirdTierNode = it-&gt;second;\n\n                std::map&lt;std::string, std::string&gt; newMap3;\n                for (YAML::const_iterator it = thirdTierNode.begin(); it != thirdTierNode.end(); ++it) {\n\n                    string level3First = it-&gt;first.as&lt;std::string&gt;();\n\n                    string level3SecondString = it-&gt;second.as&lt;std::string&gt;();\n\n                    newMap3.insert(std::pair&lt;std::string, std::string&gt;(level3First, level3SecondString));\n                }\n\n                newMap2.insert(std::pair&lt;std::string, std::map&lt;string, string&gt;&gt;(level2First, newMap3));\n\n            }\n\n            newMap1.insert(std::pair&lt;std::string, std::map&lt;string, std::map&lt;string, string&gt;&gt;&gt;(level1First, newMap2));\n\n        }\n\n        for (const auto&amp; x : newMap1) {\n            std::cout &lt;&lt;x.first &lt;&lt; endl &lt;&lt; endl;\n            for (const auto&amp; y : x.second) {\n                std::cout &lt;&lt; y.first &lt;&lt; endl &lt;&lt; endl;\n                for (const auto&amp; z : y.second) {\n                    std::cout &lt;&lt; z.first &lt;&lt; endl &lt;&lt; z.second &lt;&lt; endl &lt;&lt; endl &lt;&lt; endl;\n                }\n            }\n        }\n\n        return 1;\n    }\n    catch (exception&amp; e) {\n            cerr &lt;&lt;e.what()&lt;&lt; endl;\n    }\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 6828175, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6e9d001d0030aca9d02a98b0f6456de8?s=128&d=identicon&r=PG&f=1", "display_name": "hal9000", "link": "https://stackoverflow.com/users/6828175/hal9000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1200, "favorite_count": 0, "accepted_answer_id": 53325316, "answer_count": 2, "score": -1, "last_activity_date": 1542304481, "creation_date": 1541628467, "last_edit_date": 1541956715, "question_id": 53198608, "link": "https://stackoverflow.com/questions/53198608/add-yaml-values-to-std-map-using-yaml-cpp", "title": "Add YAML values to std map using YAML-CPP", "body": "<p>I have a <strong>yaml</strong> file which has nested maps in it:</p>\n\n<pre><code>SOLAR-SYSTEM:\n  my/planet:\n    earth: blue\n  my/satellite:\n    moon: white\n</code></pre>\n\n<p>I am using <strong>yaml-cpp</strong> to parse these values.</p>\n\n<p>Is there any way I can pull out these values from the yaml file and add them to a <strong>stl map</strong>? </p>\n\n<p>Which brings me to second part of the question.</p>\n\n<p>I am fairly new to C++ so not exactly sure how maps work in it.</p>\n\n<p>In Java I parse the same yaml file using <strong>snakeyaml</strong>.</p>\n\n<p>It adds the map to a triple hashmap data structure:</p>\n\n<pre><code>HashMap&lt;String, Map&lt;String, Map&lt;String, String&gt;&gt;&gt;\n</code></pre>\n\n<p>And I can conveniently do a get in this.</p>\n\n<p>Is there any easy way to do something like this in C++?</p>\n"}, {"tags": ["c++", "loops", "cin", "cout"], "comments": [{"owner": {"reputation": 1806, "user_id": 8754516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7be49dad417bd035463828d197cfb7c?s=128&d=identicon&r=PG&f=1", "display_name": "natn2323", "link": "https://stackoverflow.com/users/8754516/natn2323"}, "edited": false, "score": 1, "creation_date": 1541628417, "post_id": 53198562, "comment_id": 93285774, "body": "The error is in the <code>&gt;&gt; endl</code> portion of the code."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1541629748, "post_id": 53198562, "comment_id": 93286247, "body": "Array indices start at 0, not 1. It might not be a problem here, but it will bite hard eventually."}], "answers": [{"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 2, "last_activity_date": 1541628406, "creation_date": 1541628406, "answer_id": 53198594, "question_id": 53198562, "link": "https://stackoverflow.com/questions/53198562/why-doesnt-my-program-recognize-cin-inside-a-loop-in-c/53198594#53198594", "title": "Why doesn&#39;t my program recognize Cin inside a loop in C++?", "body": "<p><code>std::endl</code> is not a variable to which you could assign a value. So <code>cin &gt;&gt; endl</code> cannot work.</p>\n"}, {"tags": [], "owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "is_accepted": false, "score": 2, "last_activity_date": 1541628431, "creation_date": 1541628431, "answer_id": 53198599, "question_id": 53198562, "link": "https://stackoverflow.com/questions/53198562/why-doesnt-my-program-recognize-cin-inside-a-loop-in-c/53198599#53198599", "title": "Why doesn&#39;t my program recognize Cin inside a loop in C++?", "body": "<p><a href=\"https://en.cppreference.com/w/cpp/io/manip/endl\" rel=\"nofollow noreferrer\"><code>std::endl</code></a> is an output-only I/O manipulator. Change your stream input line to just <code>cin &gt;&gt; numbers[i];</code></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9311196"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 53198594, "answer_count": 2, "score": 0, "last_activity_date": 1541639898, "creation_date": 1541628243, "question_id": 53198562, "link": "https://stackoverflow.com/questions/53198562/why-doesnt-my-program-recognize-cin-inside-a-loop-in-c", "title": "Why doesn&#39;t my program recognize Cin inside a loop in C++?", "body": "<p>So I'm super new to C++ and I'm trying to get some values from a user ( bunch of numbers), and I want to find the mean median and mode of these numbers. This is how I'm trying to do, but the second cin inside the for loop gets error as </p>\n\n<blockquote>\n  <p>Error C2679   binary '>>': no operator found which takes a right-hand\n  operand of type 'overloaded-function' (or there is no acceptable\n  conversion)</p>\n</blockquote>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n\nusing namespace std;\n\nint main()\n{\n    int mean, max, min, range = 0;\n    int numbers[100];\n    cout &lt;&lt; \"please enter the range \" &lt;&lt; endl;\n    cin &gt;&gt; range;\n    cout &lt;&lt; \"please enter the values\" &lt;&lt; endl;\n    for (int i = 1; i &lt; range; i++)\n    {\n        cin &gt;&gt; numbers[i] &gt;&gt; endl;\n    }\n     return 0;\n}\n</code></pre>\n\n<p>thanks!</p>\n"}, {"tags": ["c++", "multidimensional-array"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1541629016, "post_id": 53198526, "comment_id": 93285983, "body": "4 copies of a 7x7 matrix isn&#39;t going to break the memory bank unless you&#39;re in the direst of extreme embedded systems.  Make four copies, rotated 0&#186;, 90&#186;, 180&#186;, 270&#186; (you only need a &#39;rotate 90&#186; function \u2014 you copy the original and rotate the copy by 90&#186;; you copy the 90&#186;-rotated matrix and rotate the copy by 90&#186; (for 180&#186; rotation); you copy the 180&#186;-rotated matrix and rotate the copy by 90&#186; (for 270&#186; rotation).  Now you arrange to print the lines of each of the 4 rotations across the page."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1541629159, "post_id": 53198526, "comment_id": 93286037, "body": "Even if you&#39;re not allowed to make copies, you still only need the rotate 90&#186; function.  You print the first line of the unrotated matrix; then rotate 90&#186; and print the first line of that; then rotate 90&#186; more and print the first line of the now 180&#186; rotated matrix; then you rotate 90&#186; more and print the first line of the now 270&#186; rotated matrix; then you rotate 90&#186; more (to get back to the original) and move on printing the second row of the matrix after doing the rotation."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1541629187, "post_id": 53198526, "comment_id": 93286046, "body": "With C++&#39;s standard IO stream once you issue a newline, there&#39;s no 100% reliable way to go back. You can allocate a buffer that&#39;s 4 E&#39;s wide and copy the rotated Es into it as you generate them, spaced a bit apart for easier reading, and then print the big buffer to the screen."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1541629466, "post_id": 53198526, "comment_id": 93286142, "body": "You might note that to revert to the original after a 90&#186; rotation, you need to do a 270&#186; rotation (or a -90&#186; rotation), and not another 90&#186; rotation, and conversely for the 270&#186; rotation.  Two 180&#186; rotations do get you back to where you started, of course."}], "answers": [{"tags": [], "owner": {"reputation": 1273, "user_id": 6093953, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208535200354776/picture?type=large", "display_name": "Andrushenko Alexander", "link": "https://stackoverflow.com/users/6093953/andrushenko-alexander"}, "is_accepted": false, "score": 0, "last_activity_date": 1548972224, "creation_date": 1548972224, "answer_id": 54469899, "question_id": 53198526, "link": "https://stackoverflow.com/questions/53198526/c-2-dimension-array-rotation/54469899#54469899", "title": "c++ 2 dimension array rotation", "body": "<p>I am not sure I got you, but what you doing here is not a rotation (in the sense of matrix rotations). When you apply <code>rotateArray90(eArray)</code> two times you should get your array rotated 180 degrees, but instead it turns back to original array.\nHere is my rotation method, take a look whether it helps. When you use it, you do not need separate methods for rotating at 180, 270 etc degrees, you just applies it 2, 3, ... times. After 4th rotation array returns back to original. It works with any rectangle array, not only <code>n x n</code>. And you do not have to use raw pointers, use instead containers.</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid printArray(const vector&lt;vector&lt;T&gt;&gt; &amp;vch) {\n    for (int i = 0; i &lt; vch.size(); ++i) {\n        for (int j = 0; j &lt; vch[0].size(); ++j) {\n            cout &lt;&lt; vch[i][j] &lt;&lt; \" \";\n        }\n        cout &lt;&lt; endl;\n    }\n}\n\ntemplate&lt;typename T&gt;\nvoid rotateArray(vector&lt;vector&lt;T&gt;&gt; &amp;v)\n{\n    vector&lt;vector&lt;T&gt;&gt;rotated;\n    for (size_t i = 0; i &lt; v[0].size(); i++) {\n        vector&lt;T&gt; newRow;\n        for (int j = v.size() - 1; j &gt;=0; j--) {\n            newRow.push_back(v[j][i]);\n        }\n        rotated.push_back(newRow);\n    }\n    v = rotated;\n}\n</code></pre>\n\n<p>Here is an example how to use:</p>\n\n<pre><code>int main() {\n    vector&lt;vector&lt;char&gt;&gt; vch = {\n        {'E', 'E', 'E', 'E', 'E', 'E', 'E'},\n        { 'E',' ',' ',' ',' ',' ',' ' },\n        { 'E',' ',' ',' ',' ',' ',' ' },\n        { 'E','E','E','E','E',' ',' ' },\n        { 'E',' ',' ',' ',' ',' ',' ' },\n        { 'E',' ',' ',' ',' ',' ',' ' },\n        { 'E','E','E','E','E','E','E' },\n    };\n\n\n    printArray&lt;char&gt;(vch);\n    cout &lt;&lt; \"\\n\";\n    rotateArray&lt;char&gt;(vch);\n    printArray&lt;char&gt;(vch);\n    cout &lt;&lt; \"\\n\";\n    rotateArray&lt;char&gt;(vch);\n    printArray&lt;char&gt;(vch);\n    cout &lt;&lt; \"\\n\";\n    rotateArray&lt;char&gt;(vch);\n    printArray&lt;char&gt;(vch);\n    cout &lt;&lt; \"\\n\";\n\n    return 0;\n}\n\n//orignal\n    E E E E E E E\n    E\n    E\n    E E E E E\n    E\n    E\n    E E E E E E E\n // rotated 90\n    E E E E E E E\n    E     E     E\n    E     E     E\n    E     E     E\n    E     E     E\n    E           E\n    E           E\n // rotated 180    \n    E E E E E E E\n                E\n                E\n        E E E E E\n                E\n                E\n    E E E E E E E\n // rotated 270    \n    E           E\n    E           E\n    E     E     E\n    E     E     E\n    E     E     E\n    E     E     E\n    E E E E E E E\n    // rotated 360\n    E E E E E E E\n    E\n    E\n    E E E E E\n    E\n    E\n    E E E E E E E\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10620747, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-J-AtkHCxXO4/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAGZjQBKTW0hnFhoenAQ2xRdCS5RA/mo/photo.jpg?sz=128", "display_name": "Kyle Bading", "link": "https://stackoverflow.com/users/10620747/kyle-bading"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1175, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548972224, "creation_date": 1541628109, "last_edit_date": 1541628572, "question_id": 53198526, "link": "https://stackoverflow.com/questions/53198526/c-2-dimension-array-rotation", "title": "c++ 2 dimension array rotation", "body": "<p>I am writing a program in C++ to display a 2 dimensional array and then rotate it 90, 180, and 270 degrees. The array is a capital 'E' made of E's and blanks. I have written the program but when I run it it does print the E's rotated but vertically (top to bottom), my professor wants them rotated but to print horizontally (left to right).  </p>\n\n<p>By my logic I would have to edit my code to do:</p>\n\n<p>-> print array row 1<br>\n-> rotate90<br>\n-> print array row 1<br>\n-> rotate90 (to revert to original)<br>\n-> rotate180<br>\n-> print array row 1<br>\n-> rotate180 (original)<br>\n-> rotate270<br>\n-> print array row 1<br>\n-> rotate 270 (original) -></p>\n\n<p>...continue 7 times until all rows are printed.</p>\n\n<p>I know there is an easier way but I can't wrap my head around how to do it.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nchar eArray[][7]{\n    {'E','E','E','E','E','E','E'},\n    {'E',' ',' ',' ',' ',' ',' '},\n    {'E',' ',' ',' ',' ',' ',' '},\n    {'E','E','E','E','E',' ',' '},\n    {'E',' ',' ',' ',' ',' ',' '},\n    {'E',' ',' ',' ',' ',' ',' '},\n    {'E','E','E','E','E','E','E'},\n};\nint n = 7;\n\nvoid rotateArray90(char a[][7]){\n\nfor (int i = 0; i &lt; n; i += 1) {\n  for (int j = i+1; j &lt; n; j += 1) {\n    swap(eArray[i][j], eArray[j][i]);\n}}}\n\nvoid flipArray180(char a[][7]){\n\nfor (int i = 0; i &lt; n; i += 1) {\n  for (int j = 0; j &lt; n/2; j += 1) {\n    swap(eArray[i][j], eArray[i][n-1-j]);\n}}}\n\nvoid rotateArray270(char a[][7]){\n\nfor (int i = 0; i &lt; n; i += 1) {\n  for (int j = 0; j &lt; n/2; j += 1) {\n    swap(eArray[i][j], eArray[n-1-i][j]);\n}}}\n\nvoid printArray(char a[][7]){\n\nfor (int i = 0; i &lt; n; ++i){\n  for (int j = 0; j &lt; n; ++j){\n        cout &lt;&lt; eArray[i][j] &lt;&lt;\" \";\n  }cout &lt;&lt; endl;\n}}\n\nint main(){\n\nprintArray(eArray);\ncout &lt;&lt;\"\\n\";\n\nrotateArray90(eArray);\nprintArray(eArray);\ncout &lt;&lt;\"\\n\";\nrotateArray90(eArray);\n\nflipArray180(eArray);\nprintArray(eArray);\ncout &lt;&lt;\"\\n\";\nflipArray180(eArray);\n\nrotateArray270(eArray);\nprintArray(eArray);\ncout &lt;&lt;\"\\n\";\nrotateArray270(eArray);\n\n}\n</code></pre>\n\n<p>Thank you for the help.</p>\n"}, {"tags": ["c++", "overload-resolution"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1542233236, "post_id": 53198515, "comment_id": 93499701, "body": "Hm... doesn&#39;t the binding to <code>const S&amp;</code> require an additional qualification conversion? (Same if you had a <code>const S&amp;&amp;</code> overload.) I don&#39;t think this qualification is &quot;top-level&quot;."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1542234498, "post_id": 53198515, "comment_id": 93500173, "body": "@KerrekSB the paragraph says: &quot;the conversion <i>sequence</i> is the one required to convert the argument expression to the referenced type&quot;. Thus, whatever user-defined conversion sequence is required to convert <code>int</code> to <code>const S</code> (here, the cv-qualification <i>is</i> top-level), the exact same user-defined conversion sequence (with the same overload resolution implications) is required to convert <code>int</code> to <code>const S&amp;</code> --- so no, there isn&#39;t an extra qualification conversion."}], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 3, "answer_count": 0, "score": 4, "last_activity_date": 1541628084, "creation_date": 1541628084, "question_id": 53198515, "link": "https://stackoverflow.com/questions/53198515/overload-resolution-between-lvalue-and-rvalue-reference-parameter-when-user-defi", "title": "Overload resolution between lvalue and rvalue reference parameter when user-defined conversion is required", "body": "<p>Consider the following code:</p>\n\n<pre><code>#include &lt;cstdio&gt;\nstruct S {\n    S(int) {}\n};\nvoid f(const S&amp;) { std::puts(\"const S&amp;\"); }\nvoid f(S&amp;&amp;) { std::puts(\"S&amp;&amp;\"); }\nint main() {\n    f(42);\n}\n</code></pre>\n\n<p>It may be obvious, and <a href=\"http://coliru.stacked-crooked.com/a/474864cfd3380ed0\" rel=\"nofollow noreferrer\">GCC and Clang agree</a>, that the <code>S&amp;&amp;</code> overload should be called, but my reading of the standard is that there is actually no rule requiring this to be the case!</p>\n\n<p>Of course, you will say that the call to <code>f</code> has to initialize a temporary <code>S</code> object and that overload resolution prefers to bind an rvalue reference to an rvalue rather than binding an lvalue reference. However, this is what the standard <em>actually says</em> in [over.ics.rank]/(3.2):</p>\n\n<blockquote>\n  <p>Standard conversion sequence <code>S1</code> is a better conversion sequence than standard conversion sequence <code>S2</code> if</p>\n  \n  <p>...</p>\n  \n  <ul>\n  <li><code>S1</code> and <code>S2</code> are reference bindings (11.6.3) and neither refers to an implicit object parameter of a non-static member function declared without a <em>ref-qualifier</em>, and <code>S1</code> binds an rvalue reference to an rvalue and <code>S2</code> binds an lvalue reference</li>\n  </ul>\n  \n  <p>... </p>\n</blockquote>\n\n<p>Thus, this tiebreaker concerning lvalue and rvalue reference bindings only applies to <em>standard</em> conversion sequences. But a <em>user-defined</em> conversion sequence would be required in order to call either overload of <code>f</code> given the <code>int</code> argument. The rule for ranking user-defined conversion sequences is (3.3),</p>\n\n<blockquote>\n  <p>User-defined conversion sequence <code>U1</code> is a better conversion sequence than another user-defined conversion sequence <code>U2</code> if they contain the same user-defined conversion function or constructor or they initialize the same class in an aggregate initialization and in either case the second standard conversion sequence of <code>U1</code> is better than the second standard conversion sequence of <code>U2</code>.</p>\n</blockquote>\n\n<p>Clearly, both conversion sequences (to <code>const S&amp;</code> and <code>S&amp;&amp;</code>) call the same constructor, so the second one could be better than the first if its second standard conversion is better than that of the first.  However, [over.ics.ref]/2 says:</p>\n\n<blockquote>\n  <p>When a parameter of reference type is not bound directly to an argument expression, the conversion sequence is the one required to convert the argument expression to the referenced type according to 16.3.3.1. Conceptually, this conversion sequence corresponds to copy-initializing a temporary of the referenced type with the argument expression. Any difference in top-level cv-qualification is subsumed by the initialization and does not constitute a conversion.</p>\n</blockquote>\n\n<p>Based on my reading of this, the implicit conversion sequence for <code>int</code> to <code>const S&amp;</code> is identical to the user-defined conversion sequence for <code>int</code> to <code>const S</code>, which is simply a single user-defined conversion with the second standard conversion being the identity conversion; similarly, the implicit conversion sequence for <code>int</code> to <code>S&amp;&amp;</code> is identical to the user-defined conversion sequence for <code>int</code> to <code>S</code>, which is also a single user-defined conversion with the second standard conversion being the identity conversion. </p>\n\n<p>Therefore, there's no textual basis for the \"obvious\" choice of the second overload... or is there one that I'm missing?</p>\n"}, {"tags": ["c++", "list", "memory"], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 4368125, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DYdb_bbl-y8/AAAAAAAAAAI/AAAAAAAAAR0/jdqNdOU5yWY/photo.jpg?sz=128", "display_name": "Kirill Voroshilov", "link": "https://stackoverflow.com/users/4368125/kirill-voroshilov"}, "is_accepted": true, "score": 2, "last_activity_date": 1541629935, "creation_date": 1541629935, "answer_id": 53198898, "question_id": 53198483, "link": "https://stackoverflow.com/questions/53198483/c-sllist-delete-temporary-node-from-heap/53198898#53198898", "title": "C++ SLList - Delete temporary node from heap?", "body": "<p>It's true that you should free dynamically allocated memory, but you try to do it at wrong time.</p>\n\n<p>When you call <code>Node *temp = new Node;</code> you do not create temporary node, you create node on heap and make a temporary pointer to it on stack. After you've added that node to the list you don't need that pointer anymore (its value is stored in your SList object), but you still need the object it points to.</p>\n\n<p>So:</p>\n\n<ul>\n<li>Yes, you should free your memory by calling delete</li>\n<li>No, you must not do it inside <code>createNode</code> method because you still need this data. Free your memory when you don't need it: when you remove element from the list.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1541630412, "creation_date": 1541630412, "answer_id": 53198989, "question_id": 53198483, "link": "https://stackoverflow.com/questions/53198483/c-sllist-delete-temporary-node-from-heap/53198989#53198989", "title": "C++ SLList - Delete temporary node from heap?", "body": "<p>A <code>delete</code> for every <code>new</code> is correct, but doesn\u2019t tell you <em>when</em> is it appropriate to delete. You cannot delete while you have pointer(s) to the data and you intend to use those pointer values later to dereference them.</p>\n\n<p>The pointers to the nodes live within the list, and in the head pointer, so you cannot delete those nodes yet. You can only do so when whatever pointers there were to any given node will be cleared or otherwise left un-dereferenced prior to assigning a new value to them. </p>\n"}], "owner": {"reputation": 57, "user_id": 9704219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f6bfa4b2e8698387a63b2fe7629435a?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Cina", "link": "https://stackoverflow.com/users/9704219/andrew-cina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 53198898, "answer_count": 2, "score": 0, "last_activity_date": 1541630412, "creation_date": 1541627963, "question_id": 53198483, "link": "https://stackoverflow.com/questions/53198483/c-sllist-delete-temporary-node-from-heap", "title": "C++ SLList - Delete temporary node from heap?", "body": "<p>I'm learning linked lists and I thought the rule was every <code>new</code> has to be answered with a <code>delete</code> to clear the dynamically allocated memory. Here is my code where I create 3 nodes in a list, each time creating a <code>temp</code> node with <code>Node *temp = new Node;</code> in the <code>createNode</code> function. My question is, isn't this dynamically allocating on the heap and should I need to <code>delete temp;</code>? Without it my code runs fine, but when I add <code>delete temp;</code> at the end of the function I get a read access violation error. Shouldn't it not make a difference anyway as <code>temp</code> is now no longer being used after the function ends? Hope that makes sense, thanks for your help.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#define Log(x) std::cout &lt;&lt; x &lt;&lt; std::endl;\n\nstruct Node\n{\n    int data;\n    Node *next;\n};\n\nclass SLList\n{\nprivate:\n    Node *head;\n    Node *tail;\n\npublic:\n    SLList() \n    {\n        head = NULL;\n        tail = NULL;\n    }\n\n    void createNode(int value)\n    {\n        Node *temp = new Node;\n        temp-&gt;data = value;\n        temp-&gt;next = NULL;\n\n        if (head == NULL)\n        {\n            head = temp;\n            tail = temp;\n        } \n        else\n        {\n            tail-&gt;next = temp;\n            tail = temp;\n        }\n    }\n\n    void printList()\n    {\n        Node *temp;\n        temp = head;\n        while (temp != NULL)\n        {\n            Log(temp-&gt;data);\n            temp = temp-&gt;next;\n        }\n    }\n};\n\nint main()\n{\n    SLList list1;\n    list1.createNode(5);\n    list1.createNode(7);\n    list1.createNode(2);\n\n    list1.printList();\n\n    std::cin.get();\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "string", "char"], "comments": [{"owner": {"reputation": 6812, "user_id": 1410303, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/UVBNS.png?s=128&g=1", "display_name": "SomeDude", "link": "https://stackoverflow.com/users/1410303/somedude"}, "edited": false, "score": 1, "creation_date": 1541627896, "post_id": 53198442, "comment_id": 93285560, "body": "std::string(arr)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10620807, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-e5Cb5Ffw_yg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAN3Q3S-Q_8IRV7WLDozLsDbR7xfg/mo/photo.jpg?sz=128", "display_name": "Artin ", "link": "https://stackoverflow.com/users/10620807/artin"}, "edited": false, "score": 0, "creation_date": 1541633173, "post_id": 53198460, "comment_id": 93287424, "body": "I added my code. However, I get a an exception error after the code compiles."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 1, "user_id": 10620807, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-e5Cb5Ffw_yg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAN3Q3S-Q_8IRV7WLDozLsDbR7xfg/mo/photo.jpg?sz=128", "display_name": "Artin ", "link": "https://stackoverflow.com/users/10620807/artin"}, "edited": false, "score": 0, "creation_date": 1541634415, "post_id": 53198460, "comment_id": 93287735, "body": "@Artin I said it twice and gave you a link, but I\u2019ll say it again: <b>your char array <i>must be NULL-terminated.</i></b>"}], "tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": false, "score": 1, "last_activity_date": 1541627840, "creation_date": 1541627840, "answer_id": 53198460, "question_id": 53198442, "link": "https://stackoverflow.com/questions/53198442/convert-from-char-array-to-string-variable/53198460#53198460", "title": "Convert from char array to string variable", "body": "<p><a href=\"https://en.cppreference.com/w/cpp/string/basic_string\" rel=\"nofollow noreferrer\"><code>std::string</code></a> actually <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/basic_string\" rel=\"nofollow noreferrer\">has a constructor</a> that takes a C-style string! As long as you make sure your char array is <a href=\"https://softwareengineering.stackexchange.com/q/181505\">null terminated</a>, you can do:</p>\n\n<pre><code>char myArr[]; //Make sure it's null terminated!\nstd::string myString(myArr);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10620807, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-e5Cb5Ffw_yg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAN3Q3S-Q_8IRV7WLDozLsDbR7xfg/mo/photo.jpg?sz=128", "display_name": "Artin ", "link": "https://stackoverflow.com/users/10620807/artin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4285, "favorite_count": 0, "closed_date": 1541628278, "answer_count": 1, "score": -1, "last_activity_date": 1541690978, "creation_date": 1541627728, "last_edit_date": 1541690978, "question_id": 53198442, "link": "https://stackoverflow.com/questions/53198442/convert-from-char-array-to-string-variable", "closed_reason": "Duplicate", "title": "Convert from char array to string variable", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nint main()\n{\n    fstream infile;\n    infile.open(\"letter.txt\");\n\n    string s;\n    char charArray[11];\n\n    char x;\n    while (!infile.eof())\n    {\n        infile.get(x);\n        x = tolower(x);\n\n\n        for (int i = 0; x != ' '; i++)\n        {\n            charArray[i] = x;\n        }\n        string mystring(charArray);\n        cout &lt;&lt; mystring;\n\n    }\n\n\n    system(\"pause\");\n}\n</code></pre>\n\n<p>In my C++ program I am to read from a file one character at a time and stop when the loop reaches a space (this would indicate the end of a single word). Then, I want to assign the contents of the char array to a string variable. </p>\n\n<p>I know I can read one word at a time from the file, however for my assignment this is not a suitable solution. </p>\n\n<p>My difficulty is converting from char array to a string variable .</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1541627636, "post_id": 53198396, "comment_id": 93285434, "body": "I misread the file. No spaces in names, but commas in the numbers are a problem."}, {"owner": {"reputation": 9, "user_id": 10601520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ec3df4df4e5dc453ec3274cf16d9f8b?s=128&d=identicon&r=PG&f=1", "display_name": "Jakekone23", "link": "https://stackoverflow.com/users/10601520/jakekone23"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1541629715, "post_id": 53198396, "comment_id": 93286232, "body": "I changed all the numbers with commas to ints but I&#39;m still having problems"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1541629856, "post_id": 53198396, "comment_id": 93286292, "body": "Here&#39;s a working <a href=\"https://ideone.com/S94MHq\" rel=\"nofollow noreferrer\">demo</a> parsing the first 4 lines. (In the future, post the file as text not image so we can test). If you still have issues, try to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1541628705, "post_id": 53198630, "comment_id": 93285873, "body": "I believe that the first comma is used to separate the <i>make</i> from the remaining numbers.  By removing the commas, the <i>make</i> becomes more difficult to parse, especially when the <i>make</i> contains spaces."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1541628826, "post_id": 53198630, "comment_id": 93285913, "body": "@ThomasMatthews I don&#39;t see that. I only see commas in the integers. Ex: line 1, &quot;288,845&quot; should be &quot;288845&quot;."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1541628976, "post_id": 53198630, "comment_id": 93285967, "body": "For example &quot;Ferrari LaFarrari 1,&quot;.  In your method the 1 would be considered as the price.  I don&#39;t see a global method for all columns; each column or field should be extracted separately."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1541629057, "post_id": 53198630, "comment_id": 93285995, "body": "@ThomasMatthews Possibly, but I see that as make: Ferrari, model: LaFerrari, price: 1,420,112"}], "tags": [], "owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "is_accepted": false, "score": 0, "last_activity_date": 1541628606, "creation_date": 1541628606, "answer_id": 53198630, "question_id": 53198396, "link": "https://stackoverflow.com/questions/53198396/my-program-is-not-reading-in-all-of-the-txt-file/53198630#53198630", "title": "My program is not reading in all of the .txt file", "body": "<p>The commas in the numbers will make it unable to parse. You could read the file line-by-line, filter out the commas, and use <code>std::stringstream</code> to parse.</p>\n\n<pre><code>std::string line;\nwhile (std::getline(CarsFile, line)) {\n    // Remove commas\n    line.erase(std::remove(line.begin(), line.end(), ','), line.end());\n    // Use stringstream to parse\n    std::stringstream ss(line);\n    if (ss &gt;&gt; make &gt;&gt; model &gt;&gt; price &gt;&gt; year &gt;&gt; horsePower &gt;&gt; torque &gt;&gt; zeroToSixty &gt;&gt; weight &gt;&gt; quarterMile) {\n        // Add to list....\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1541628626, "creation_date": 1541628626, "answer_id": 53198638, "question_id": 53198396, "link": "https://stackoverflow.com/questions/53198396/my-program-is-not-reading-in-all-of-the-txt-file/53198638#53198638", "title": "My program is not reading in all of the .txt file", "body": "<p>You may want to use <code>std::getline</code> to read the text line, then <code>std::istringstream</code> to parse the text:  </p>\n\n<pre><code>std::string  record;\nwhile (std::getline(CarsFile, record))\n{\n    std::istringstream car_stream(record);\n    std::string make;\n    std::getline(car_stream, make, ',');\n    //...\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 10601520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ec3df4df4e5dc453ec3274cf16d9f8b?s=128&d=identicon&r=PG&f=1", "display_name": "Jakekone23", "link": "https://stackoverflow.com/users/10601520/jakekone23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1541628626, "creation_date": 1541627520, "last_edit_date": 1541627672, "question_id": 53198396, "link": "https://stackoverflow.com/questions/53198396/my-program-is-not-reading-in-all-of-the-txt-file", "title": "My program is not reading in all of the .txt file", "body": "<p>I am trying to read a .txt file into an object and then store it in a linked list but it only will read in half of the file. </p>\n\n<p><a href=\"https://i.stack.imgur.com/TnY4d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TnY4d.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is what I'm calling to try and read it in but it only reads up to Dodge Demon.</p>\n\n<pre><code> while (CarsFile &gt;&gt; make &gt;&gt; model &gt;&gt; price &gt;&gt; year &gt;&gt; horsePower &gt;&gt; torque &gt;&gt; zeroToSixty &gt;&gt; weight &gt;&gt; quarterMile)\n{\n\n    car.setMake(make);\n    car.setModel(model);\n    car.setPrice(price);\n    car.setYear(year);\n    car.setHorsePower(horsePower);\n    car.setTorque(torque);\n    car.setZeroToSixty(zeroToSixty);\n    car.setWeight(weight);\n    car.setQuarterMile(quarterMile);\n\n    list.appendNode(car);\n\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "static"], "comments": [{"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1541627368, "post_id": 53198317, "comment_id": 93285322, "body": "What&#39;s the problem you&#39;re trying to solve? There&#39;s no portable way to do that specifically."}, {"owner": {"reputation": 1266, "user_id": 5050750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dbc25753665eb4c15f0a690dc4a4162?s=128&d=identicon&r=PG", "display_name": "Amir", "link": "https://stackoverflow.com/users/5050750/amir"}, "reply_to_user": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1541631821, "post_id": 53198317, "comment_id": 93286979, "body": "@George in SetWindowsHookEx i should register a call back method and i don&#39;t want to register an static one because i have to change all methods and properties as static to use them in my callback function."}], "owner": {"reputation": 1266, "user_id": 5050750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dbc25753665eb4c15f0a690dc4a4162?s=128&d=identicon&r=PG", "display_name": "Amir", "link": "https://stackoverflow.com/users/5050750/amir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "closed_date": 1541627347, "answer_count": 0, "score": 0, "last_activity_date": 1541627157, "creation_date": 1541627157, "question_id": 53198317, "link": "https://stackoverflow.com/questions/53198317/how-can-i-print-non-static-method-address", "closed_reason": "Duplicate", "title": "How can I print non static method address?", "body": "<p>I want to print address of method f1.</p>\n\n<p>I don't want to make it static.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass a1{\npublic:\n    void f1(){   \n    }\n};\nint main(){\n    a1 ma;\n    cout &lt;&lt; &amp;ma.f1;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "switch-statement", "g++", "compiler-optimization", "clang++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541627228, "post_id": 53198276, "comment_id": 93285263, "body": "related: <a href=\"https://stackoverflow.com/questions/1028437/why-switch-case-and-not-if-else-if\" title=\"why switch case and not if else if\">stackoverflow.com/questions/1028437/&hellip;</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1541627648, "post_id": 53198276, "comment_id": 93285442, "body": "Trying it at godbolt.org is usually a good first step for these kinds of questions."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1541627692, "post_id": 53198276, "comment_id": 93285464, "body": "@Fran&#231;oisAndrieux: The result might be the same, but that could be due to a poor choice of N, or due to different optimizations leading to the same result."}], "answers": [{"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1541627742, "post_id": 53198421, "comment_id": 93285488, "body": "I was interested more in how the compilers approached this rather than whether finally the resulting code was the same, but I&#39;ll read the link."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 1, "creation_date": 1541627866, "post_id": 53198421, "comment_id": 93285548, "body": "@einpoklum I am not sure what you mean by &#39;how compilers approaching it&#39;. Isn&#39;t the resulting code the best judge?"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1541628477, "post_id": 53198421, "comment_id": 93285797, "body": "The same results could be accidental rather than fundamental. Anyway, suggest you change your link to <a href=\"https://gcc.godbolt.org/z/Wx9WOR\" rel=\"nofollow noreferrer\">this</a>: Less <code>boo()&#39;</code>ing, and easier to compare the resulting assemby."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1541629458, "post_id": 53198421, "comment_id": 93286139, "body": "I&#39;ve just filed a bug against GCC on this issue: <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=87925\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=87925</a>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1541689920, "post_id": 53198421, "comment_id": 93309105, "body": "@einpoklum interesting what will happen out of it. I&#39;d love to see series of if having the same treatment as case labels."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 4, "last_activity_date": 1541627918, "last_edit_date": 1541627918, "creation_date": 1541627641, "answer_id": 53198421, "question_id": 53198276, "link": "https://stackoverflow.com/questions/53198276/do-compilers-optimize-switches-differently-than-long-if-then-else-chains/53198421#53198421", "title": "Do compilers optimize switches differently than long if-then-else chains?", "body": "<p>Ironically, that is exactly the test I did just a couple of days back for most recent compilers. As it happened, with latest compilers, <code>clang</code> produces the same assembly for <code>switch</code> and <code>if</code> - for small number of cases (below 5) it produces a bunch of direct conditional jumps, while for 5 or more cases it does an indirect table jump.</p>\n\n<p>On the other hand, <code>gcc</code> treats those differently: it converts <code>switch</code> to indirect table jump, while a series of <code>if</code> statements remain a series of conditional direct jumps.</p>\n\n<p>It is also worth noting, that if switch case has \"holes\" in it (i.e. possible values for control variable which are not covered by case label), it can be still converted into series of conditional direct jumps or indirect table jump, but I wasn't able to figure out the exact formula.</p>\n\n<p>Here is some play code:\n<a href=\"https://gcc.godbolt.org/z/Lll1Kd\" rel=\"nofollow noreferrer\">https://gcc.godbolt.org/z/Lll1Kd</a></p>\n"}], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1541627918, "creation_date": 1541626995, "question_id": 53198276, "link": "https://stackoverflow.com/questions/53198276/do-compilers-optimize-switches-differently-than-long-if-then-else-chains", "title": "Do compilers optimize switches differently than long if-then-else chains?", "body": "<p>Suppose I have N different integral values known at compile time, V_1 through V_N. Consider the following structures:</p>\n\n<pre><code>const int x = foo();\nswitch(x) {\ncase V_1: { /* commands for V_1 which don't change x */ } break;\ncase V_2: { /* commands for V_1 which don't change x */ } break;\n/* ... */\ncase V_N: { /* commands for V_1 which don't change x */ } break;\n}\n</code></pre>\n\n<p>versus </p>\n\n<pre><code>const int x = foo();\nif      (x == V_1) { /* commands for V_1 which don't change x */ }\nelse if (x == V_2) { /* commands for V_2 which don't change x */ }\nelse ...\nelse if (x == V_N) { /* commands for V_N which don't change x */ }\n</code></pre>\n\n<p>Do modern C++ compilers treat these differently? That is, do they apply different potential optimization to these code structures? Or do they \"canonicalize\" them to the same for, then decide on optimizations (such as whether to form a jump table or not)?</p>\n\n<p>Notes:</p>\n\n<ul>\n<li>By modern C++ compilers I mean mostly recent versions of GCC, clang and MSVC. ICC could also be relevant.</li>\n<li>Please answer regarding the maximum optimization level (<code>-O3</code> for clang and GCC)</li>\n<li>... but then, if the treatment of <code>switch</code>es and <code>if-then-else</code>-chains is the same in some optimization levels and different in others, that's also interesting.</li>\n<li>I'm guessing the answer might depend on the value of <code>N</code> - give thresholds if possible.</li>\n</ul>\n"}, {"tags": ["c#", "c++", "dll", "lpstr"], "comments": [{"owner": {"reputation": 6441, "user_id": 690952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9WfV.png?s=128&g=1", "display_name": "Selvin", "link": "https://stackoverflow.com/users/690952/selvin"}, "edited": false, "score": 0, "creation_date": 1541627263, "post_id": 53198213, "comment_id": 93285275, "body": "How <code>function</code> is implemented? Most important is how you are allocating return value"}, {"owner": {"reputation": 309, "user_id": 6147663, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/67pzg.png?s=128&g=1", "display_name": "Brian Clink", "link": "https://stackoverflow.com/users/6147663/brian-clink"}, "edited": false, "score": 0, "creation_date": 1541628024, "post_id": 53198213, "comment_id": 93285617, "body": "I read that you will need to defined export with an extern &quot;C&quot; block like this:       extern &quot;C&quot; __declspec(dllexport) int captureCamera(int&amp; captureId)     {     ...     }"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2819245"}, "edited": false, "score": 0, "creation_date": 1541628116, "post_id": 53198213, "comment_id": 93285654, "body": "0x80000003 is E_INVALIDARG. Now, i obviously don&#39;t know which piece of the native code executed by that DLL function causes the error; but start with verifying whether the function you call actually &quot;understands&quot; the value <code>-10210</code> (i.e., does a corresponding error message/text string exist for this particular value?)"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 3737887, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ade96c44f81f675bbeecc3f9c6d7bd89?s=128&d=identicon&r=PG&f=1", "display_name": "Pete", "link": "https://stackoverflow.com/users/3737887/pete"}, "edited": false, "score": 0, "creation_date": 1542048303, "post_id": 53201035, "comment_id": 93420454, "body": "Thanks for your answer. It is a shame, that this cannot be handled differently as not everyone has that much control over their Dlls. (It could be a third party dll, in which case that would be it). We followed your instructions and managed to make it work that way."}], "tags": [], "owner": {"reputation": 6441, "user_id": 690952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9WfV.png?s=128&g=1", "display_name": "Selvin", "link": "https://stackoverflow.com/users/690952/selvin"}, "is_accepted": true, "score": 0, "last_activity_date": 1541674933, "last_edit_date": 1541674933, "creation_date": 1541646867, "answer_id": 53201035, "question_id": 53198213, "link": "https://stackoverflow.com/questions/53198213/calling-c-function-with-lpstr-return-value-from-c/53201035#53201035", "title": "Calling C++ function with LPStr return value from C#", "body": "<p><em>How do I call this function properly?</em></p>\n\n<p>As interop? you can't  ... it is also error prone in plain C++</p>\n\n<p>you should rather do it like </p>\n\n<pre><code>extern \"C\" __declspec(dllexport)  int __stdcall function(int16_t error_code, \n             LPSTR buffer, size_t size)\n{\n    LPCSTR format = \"error: %i\";\n    size_t req = _scprintf(format, error_code); // check for require size\n    if (req &gt; size) //buffer size is too small\n    {\n        return req; //return required size\n    }\n    sprintf_s(buffer, size, format, error_code); //fill buffer \n    return 0;\n}\n</code></pre>\n\n<p>And usage</p>\n\n<pre><code>class Program\n{\n    static void Main(string[] args)\n    {\n        short error_code = -10210;\n        var ret = function(error_code, null, 0); // check for required size of the buffer\n        var sb = new StringBuilder(ret); // create large enough buffer\n        ret = function(error_code, sb, (uint)sb.Capacity + 1); //call again \n        var error_desc = sb.ToString(); //get results\n        Console.WriteLine(error_desc);\n        Console.ReadKey();\n    }\n\n    [DllImport(\"TestDll.dll\", EntryPoint = \"function\", CharSet = CharSet.Ansi)]\n    public static extern int function(short error_code, StringBuilder sb, int size);\n}\n</code></pre>\n\n<p>usage in C++</p>\n\n<pre><code>typedef int (__stdcall *function)(int16_t error_code, LPSTR buffer, size_t size);\nint main()\n{\n    auto handle = LoadLibrary(L\"TestDll.dll\");\n    auto proc = (function)GetProcAddress(handle, \"_function@12\"); \n    // of course it can be done via linking\n\n    int16_t error_code = 333;\n    const int ret = proc(error_code, NULL, 0); // check for size\n    CHAR* buffer = new CHAR[ret + 1];\n    //CHAR buffer[200]; //eventually allocate on stack \n    //but size have to be constant value and may be too small\n    proc(error_code, buffer, ret+1); // call again \n    MessageBoxA(0, buffer, \"Return\", 0); //show result\n    delete[] buffer; //free buffer!\n\n    FreeLibrary(handle);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 3737887, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ade96c44f81f675bbeecc3f9c6d7bd89?s=128&d=identicon&r=PG&f=1", "display_name": "Pete", "link": "https://stackoverflow.com/users/3737887/pete"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 550, "favorite_count": 0, "accepted_answer_id": 53201035, "answer_count": 1, "score": 0, "last_activity_date": 1541674933, "creation_date": 1541626679, "question_id": 53198213, "link": "https://stackoverflow.com/questions/53198213/calling-c-function-with-lpstr-return-value-from-c", "title": "Calling C++ function with LPStr return value from C#", "body": "<p>I have a C++ dll in 64-Bit, which contains a function that returns an <code>LPStr</code>. I would like to call this function in C#. The function declaration looks like this:</p>\n\n<pre><code>__declspec(dllexport) LPSTR __stdcall function(int16_t error_code);\n</code></pre>\n\n<p>In my C# code I have tried the following:</p>\n\n<pre><code> [DllImport(@\"&lt;PathToInterface.dll&gt;\", EntryPoint = \"function\")]\n [return: MarshalAs(UnmanagedType.LPStr)]\n public static extern string function(Int16 error_code);\n</code></pre>\n\n<p>And then in the program:</p>\n\n<pre><code>string ErrorMessage = \"\";\nErrorMessage = function(-10210);\n</code></pre>\n\n<p>I know that the function itself is good, as I can call it from another program (written in LabVIEW FWIW). But when I execute the C# Program, it just exits with error code <code>0x80000003</code>, I can't even try, catch the exeption.</p>\n\n<p>How do I call this function properly?</p>\n\n<p>As a side node: I do have other functions in this dll, that use <code>LPStr</code> as parameters, which I can call without a problem. It is only two functions that return <code>LPStr</code> that make problems</p>\n"}, {"tags": ["c++", "css", "boost", "boost-spirit", "boost-spirit-x3"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1541626019, "post_id": 53198046, "comment_id": 93284757, "body": "I can&#39;t believe this has not already been done and some library exists. Have you looked for one?"}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1541685428, "post_id": 53198046, "comment_id": 93306286, "body": "@Jesper with Boost Spirit X3? I haven&#39;t found anything yet."}], "answers": [{"comments": [{"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1541858127, "post_id": 53199872, "comment_id": 93365108, "body": "Thanks for the input! I&#39;m waddling along for now, and came across <a href=\"https://stackoverflow.com/a/33556723/256138\">this answer of yours</a> which links to some IMO <a href=\"http://coliru.stacked-crooked.com/a/c2db66e432ea9b72\" rel=\"nofollow noreferrer\">promising X3 code</a>. I even think that approach pretty much covers everything except the &quot;no repeat&quot; properties for the CSS declaration block. Am I missing something in that approach?"}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1542316634, "post_id": 53199872, "comment_id": 93536369, "body": "This is what I have so far: <a href=\"https://github.com/skui-org/skui/blob/master/css/grammar.h%2B%2B\" rel=\"nofollow noreferrer\">github.com/skui-org/skui/blob/master/css/grammar.h%2B%2B</a>, pretty much leans heavily on what I mentioned in my previous comment: <a href=\"https://github.com/skui-org/skui/blob/master/css/grammar/make_property.h%2B%2B\" rel=\"nofollow noreferrer\">github.com/skui-org/skui/blob/master/css/grammar/&hellip;</a>. The only thing (except for 90% of CSS properties) this thing doesn&#39;t handle is that each property should only appear once. This isn&#39;t really a big deal so I&#39;m fine with it for now, but X3 does not have the permutation operator (which I should be able to combine with <code>eoi</code> and the optional operator to guarantee uniqueness I think). Any thoughts on that?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1542330994, "post_id": 53199872, "comment_id": 93540477, "body": "hehe do I recognize a technique from <a href=\"https://stackoverflow.com/a/45683933/85371\">here</a> or <a href=\"https://stackoverflow.com/questions/49722452/combining-rules-at-runtime-and-returning-rules/49722855#49722855\">here</a> :) I&#39;d probably force myself to create a custom parser that combines the subparsers with the desired logic. Not something I&#39;d look forward to, but something that seems to be the Right Thing To Do."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1542331105, "post_id": 53199872, "comment_id": 93540501, "body": "For inspiration, you could make it work like Qi&#39;s <code>operator ^</code> in pretty much the same way that I <a href=\"https://chat.stackoverflow.com/transcript/10?m=39787277#39787277\">faked Phoenix support in X3 lambdas here</a>"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 1, "last_activity_date": 1541636498, "creation_date": 1541636498, "answer_id": 53199872, "question_id": 53198046, "link": "https://stackoverflow.com/questions/53198046/parsing-css-with-boost-spirit-x3/53199872#53199872", "title": "Parsing CSS with Boost.Spirit X3", "body": "<p>It looks like you wish to generate your parser code from struct definition. You can, however you should probably use a code generator.</p>\n\n<p>Here's how I know you can get reasonably close with Qi:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/2f587f7843b86fcf\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/spirit/include/qi.hpp&gt;\n#include &lt;boost/spirit/include/qi_auto.hpp&gt;\n#include &lt;boost/fusion/adapted/struct.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;type_traits&gt;\n\nnamespace css {\n    enum class align_content : std::uint8_t;\n    enum class align_items   : std::uint8_t;\n    enum class align_self    : std::uint8_t;\n}\n\nnamespace qi = boost::spirit::qi;\n\ntemplate &lt;typename T&gt; static constexpr char const* name_of = nullptr;\n\ntemplate &lt;&gt; constexpr char const* name_of&lt;css::align_content&gt; = \"content\";\ntemplate &lt;&gt; constexpr char const* name_of&lt;css::align_items&gt; = \"items\";\ntemplate &lt;&gt; constexpr char const* name_of&lt;css::align_self&gt; = \"self\";\n\nnamespace {\n    template &lt;typename T&gt; struct align_parser {\n        static auto call() {\n            return qi::copy(qi::lexeme[name_of&lt;T&gt;] &gt;&gt; \":\" &gt;&gt; qi::int_ &gt;&gt; ';');\n        };\n\n        using type = decltype(call());\n    };\n}\n\nnamespace css {\n    // grrr: https://stackoverflow.com/a/36568565/85371\n    template&lt;class T, bool = std::is_enum&lt;T&gt;::value&gt; struct safe_underlying_type : std::underlying_type&lt;T&gt; {};\n    template&lt;class T&gt; struct safe_underlying_type&lt;T, false /* is_enum */&gt; {};\n\n    template &lt;typename T, typename Underlying = typename safe_underlying_type&lt;T&gt;::type &gt; std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, T v) {\n        using Int = std::common_type_t&lt;int, Underlying&gt;;\n        return os &lt;&lt; name_of&lt;T&gt; &lt;&lt; \" -&gt; \" &lt;&lt; static_cast&lt;Int&gt;(v);\n    }\n}\n\nnamespace boost::spirit::traits {\n    template &lt;&gt; struct create_parser&lt;css::align_content&gt; : align_parser&lt;css::align_content&gt; {};\n    template &lt;&gt; struct create_parser&lt;css::align_items&gt; : align_parser&lt;css::align_items&gt; {};\n    template &lt;&gt; struct create_parser&lt;css::align_self&gt; : align_parser&lt;css::align_self&gt; {};\n}\n\nstruct declaration_block {\n    css::align_content align_content{};\n    css::align_items   align_items{};\n    css::align_self    align_self{};\n};\n\nBOOST_FUSION_ADAPT_STRUCT(declaration_block, align_content, align_items, align_self)\n\nint main() {\n    for (std::string const input : {\n            \"\", \n            \"self:42;\",\n            \"content:7;items:99;self:42;\",\n            \"content : 7 ; items : 99; self : 42; \",\n            \" self : 42; items : 99; content : 7 ; \",\n        }) \n    {\n        std::cout &lt;&lt; \" ==== Test: \" &lt;&lt; std::quoted(input) &lt;&lt; \"\\n\";\n        auto f = input.begin(), l = input.end();\n\n        declaration_block db;\n        bool ok = qi::phrase_parse(f, l, (qi::auto_ ^ qi::auto_ ^ qi::auto_) | qi::eoi, qi::space, db);\n\n        if (ok) {\n            using boost::fusion::operator&lt;&lt;;\n            std::cout &lt;&lt; \"Parsed: \" &lt;&lt; db &lt;&lt; \"\\n\";\n        }\n        else\n            std::cout &lt;&lt; \"Failed\\n\";\n\n        if (f != l)\n            std::cout &lt;&lt; \"Remaining: \" &lt;&lt; std::quoted(std::string(f,l)) &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code> ==== Test: \"\"\nParsed: (content -&gt; 0 items -&gt; 0 self -&gt; 0)\n ==== Test: \"self:42;\"\nParsed: (content -&gt; 0 items -&gt; 0 self -&gt; 42)\n ==== Test: \"content:7;items:99;self:42;\"\nParsed: (content -&gt; 7 items -&gt; 99 self -&gt; 42)\n ==== Test: \"content : 7 ; items : 99; self : 42; \"\nParsed: (content -&gt; 7 items -&gt; 99 self -&gt; 42)\n ==== Test: \" self : 42; items : 99; content : 7 ; \"\nParsed: (content -&gt; 7 items -&gt; 99 self -&gt; 42)\n</code></pre>\n\n<h2>More Info/Ideas</h2>\n\n<p>This approach is seen in more detail:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/45485898/boostspiritqigrammar-and-variadic-templates/45526550#45526550\">boost::spirit::qi::grammar and variadic templates</a></li>\n<li><a href=\"https://stackoverflow.com/questions/21238381/define-parsers-parameterized-with-sub-parsers-in-boost-spirit/21247178#21247178\">Define parsers parameterized with sub-parsers in Boost Spirit</a></li>\n</ul>\n\n<p>I gave that question has an X3-style answer as well:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/45485898/boostspiritqigrammar-and-variadic-templates/45526685#45526685\">boost::spirit::qi::grammar and variadic templates</a></li>\n</ul>\n\n<p>For more X3 inspiration I heartily recommend:</p>\n\n<ul>\n<li><code>x3::as_parser</code></li>\n<li><code>x3::base_parser</code>/<code>x3::parser&lt;CRTP&gt;</code> (e.g. <a href=\"https://stackoverflow.com/questions/37669936/spirit-qi-how-can-i-write-a-nonterminal-parser/37823837#37823837\">Spirit-Qi: How can I write a nonterminal parser?</a>, </li>\n</ul>\n\n<p>One pet peeve for me is that we should be able to use structured binding so we don't nee Phoenix anymore.</p>\n"}], "owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541636498, "creation_date": 1541625872, "question_id": 53198046, "link": "https://stackoverflow.com/questions/53198046/parsing-css-with-boost-spirit-x3", "title": "Parsing CSS with Boost.Spirit X3", "body": "<p>I'm attempting to write a (partial) CSS parser using Boost.Spirit X3.</p>\n\n<p>I have the (very) basic setup working:</p>\n\n<pre><code>const auto declaration_block_def = '{' &gt;&gt; +declaration &gt;&gt; '}';\nconst auto declaration_def = property &gt;&gt; ':' &gt;&gt; value &gt;&gt; ';';\nconst auto property_def = +(char_ - \":\");\nconst auto value_def = +(char_ - \";\");\n</code></pre>\n\n<p>Here <code>value</code> is just a simple string parser, and <code>property</code> a symbol table of all the CSS property names to an enum listing all the properties. But now I wonder if I couldn't in some way encode all the possible key-value pairs, in a strongly typed manner? Concretely, I'd use <code>symbols&lt;enum_type&gt;</code> with matching symbol table entries for each property that has a fixed number of possibilities, and some custom rule for more complex properties like colors.</p>\n\n<p>The thing is that the <code>declaration</code> rule has to have a certain attribute, and in CSS, the declaration block can contain any number of elements all with their own \"attribute\" type. In the end I'd like to end up with a struct I'd pass to BOOST_FUSION_ADAPT_STRUCT in the following form:</p>\n\n<pre><code>enum class align_content : std::uint8_t;\nenum class align_items : std::uint8_t;\nenum class align_self : std::uint8_t;\n\nstruct declaration_block\n{\n  css::align_content align_content{};\n  css::align_items align_items{};\n  css::align_self align_self{};\n};\n</code></pre>\n\n<p>Which would then properly default initialize any unspecified members.</p>\n\n<p>I see a few issues popping up for X3 that I don't know how to solve:</p>\n\n<ol>\n<li>Strongly typed rule attribute as mentioned above</li>\n<li>The fusion adapted struct expects all members being parsed, which rules out my idea of my simple approach actually working.</li>\n</ol>\n\n<p>I have found what seems like a <a href=\"https://github.com/emweb/wt/blob/master/src/Wt/Render/CssParser.C\" rel=\"nofollow noreferrer\">Boost.Spirit.Qi 2 implementation</a>, but as X3 is so different and their end result seems unclear, I can't seem to find any help in that...</p>\n"}, {"tags": ["c++", "c", "linux", "system-calls"], "comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 5, "creation_date": 1541624864, "post_id": 53197810, "comment_id": 93284230, "body": "So you try to complie <code>C</code> code with a <code>C++</code> compiler? These are different languages."}, {"owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 4, "creation_date": 1541624869, "post_id": 53197810, "comment_id": 93284233, "body": "Did you include the necessary headers (<code>unistd.h</code> and <code>sys&#47;types.h</code> per the Linux man page)? Older C specifications allow implicit function declarations; newer standards, and C++, do not."}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 9, "creation_date": 1541624894, "post_id": 53197810, "comment_id": 93284243, "body": "Why are you commenting out this <code>&#47;&#47;#include &lt;unistd.h&gt;</code>?"}, {"owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 0, "creation_date": 1541624955, "post_id": 53197810, "comment_id": 93284273, "body": "My view of your code was scrolled down and I didn&#39;t see the includes - but as Fiddling Bits asked, why is it commented out? You need it."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1541625040, "post_id": 53197810, "comment_id": 93284313, "body": "Note: C is <i>not</i> a subset of C++ these days. You <i>can</i> write code that is accepted by both a C and C++ compiler but does different things. You need to pick a language - they are <i>not</i> interchangeable."}], "answers": [{"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 2, "creation_date": 1541625213, "post_id": 53197872, "comment_id": 93284385, "body": "C <i>had</i> the concept. It doesn&#39;t have any more."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1541625428, "post_id": 53197872, "comment_id": 93284486, "body": "@AnttiHaapala Depends on what version of the C language OP is compiling with. And we don&#39;t know that."}, {"owner": {"reputation": 1, "user_id": 10620452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e09b62973be6e1ea3fc923629314a6db?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/10620452/user"}, "edited": false, "score": 0, "creation_date": 1541625533, "post_id": 53197872, "comment_id": 93284530, "body": "Thanks a lot for the quick &amp; helpful response/explaination. Works now"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 1, "user_id": 10620452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e09b62973be6e1ea3fc923629314a6db?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/10620452/user"}, "edited": false, "score": 0, "creation_date": 1541625572, "post_id": 53197872, "comment_id": 93284551, "body": "@user Glad I could help.  Feel free to <a href=\"https://stackoverflow.com/help/accepted-answer\">accept this answer</a> if you found it useful."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1541625614, "post_id": 53197872, "comment_id": 93284570, "body": "@AnttiHaapala you&#39;d be surprised about how many compilers continue to support it even in standards modes"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1541625667, "post_id": 53197872, "comment_id": 93284604, "body": "I have gcc 5.4.0 and it allows it (with warnings) even with <code>-std=c11 -pedantic</code>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 1, "creation_date": 1541625679, "post_id": 53197872, "comment_id": 93284606, "body": "@Mgetz they can support it. A compiler is allowed to successfully compile an invalid program. (provided that it issues required diagnostics)"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1541625781, "post_id": 53197872, "comment_id": 93284647, "body": "As for claiming that the &quot;version matters&quot; it is like telling that you can write &quot;&#254;e olde pizza parlor&quot; and that is proper English. Only the version matters."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 4, "last_activity_date": 1541626438, "last_edit_date": 1541626438, "creation_date": 1541625084, "answer_id": 53197872, "question_id": 53197810, "link": "https://stackoverflow.com/questions/53197810/same-programm-works-in-c-but-not-in-c-uses-linux-system-calls/53197872#53197872", "title": "Same programm works in C, but not in C++ (uses linux system calls)", "body": "<p>Older versions of C (that most compilers still support by default) had the concept of a default type for undeclared functions.  If a function is used before it is declared, C assumes the type of the function is <code>int (*)()</code>, i.e. a function that takes an unknown number of arguments and returns an <code>int</code>.  The actual types of the functions in question are more-or-less compatible with that definition so it seems to work.</p>\n\n<p>C++ on the other hand does not have a default type for undeclared functions, so it throws an error right away when a function is used without being declared.</p>\n\n<p>For the <code>fork</code> and <code>exec</code> functions you need to <code>#include &lt;unistd.h&gt;</code>, and for <code>wait</code> you need to <code>#include &lt;sys/types.h&gt;</code> and <code>#include &lt;sys/wait.h&gt;</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 10620452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e09b62973be6e1ea3fc923629314a6db?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/10620452/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 53197872, "answer_count": 1, "score": -4, "last_activity_date": 1541626438, "creation_date": 1541624766, "last_edit_date": 1541625892, "question_id": 53197810, "link": "https://stackoverflow.com/questions/53197810/same-programm-works-in-c-but-not-in-c-uses-linux-system-calls", "title": "Same programm works in C, but not in C++ (uses linux system calls)", "body": "<p>I'm supposed to write a (very basic) shell for linux for school. Currently i'm only trying to execute a programm with it at all (via fork and execv), and only plan on adding user-input later. I started writing in C (which i do not know at all/only know the some parts that it shares with C++) because  the slides were using it, but we can use either C or C++ and i planned on using C++ as soon as i learned how C handles/doesn't handle input/output/strings. (I took parts of the code (mostly lines where status, fork, execv, and wait are used) from the prof's slides and added parts of it myself.)<br>\nHowever, currently when using C the programm compiles, runs and seems to shows the expected output (printing out \"testdesecho\" by calling the echo function). But when copy-pasting the same code to C++ and trying to compile this, i get several errors (not just warnings) and so can't even compile the code.</p>\n\n<p>This is the code</p>\n\n<pre><code>//#include &lt;iostream&gt;\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#include &lt;stdio.h&gt;  \n#include &lt;ctype.h&gt;\n#include &lt;limits.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n//#include &lt;unistd.h&gt; \n/*\nreadparsefunc() {\n\n}\n*/\n\n\nint main() {\n    int childPid;\n\n    int status;\n    char befehlstr[20] = \"/bin/echo\";                                                   //location              \n    char* parameterstr[61] = { \"echo\", \"testdesecho\" };                                 //argv\n\n\n    childPid = fork();\n\n    //befehlstr = \"\";                                       \n    //parameterstr = \" \";\n    //cout &lt;&lt; parameterstr[1];\n    printf(\"%d\", childPid);     printf(\"&lt;- childPid(test) \\n\");\n    printf(befehlstr);          printf(\"&lt;- befehlstr(test) \\n\");\n    printf(*parameterstr);      printf(\"&lt;- parameterstr(test) \\n\");\n\n    if (childPid == -1) { printf(\"Konnte keinen neuen Prozess erstellen\"); }            \n    else if (childPid == 0) {                           \n        printf(\"child process \\n\");\n\n        int testintueberlagerung = 0;\n        testintueberlagerung = execv(befehlstr, parameterstr);\n        if (testintueberlagerung != 0) {\n            printf(\"%d\" \"&lt;- testueberlagerungswert \\n\", testintueberlagerung);\n        }\n        //execv(befehlstr, parameterstr);                   \n\n        exit(0);                                        \n    }\n    else if (childPid &gt; 0) {\n        printf(\"parent process \\n\");\n        wait(&amp;status);                                  \n        printf(\"parent process beendet sich nun auch \\n\");\n    }\n\n    /*\n    while (1 != 0) {\n\n    }\n    */\n\n\n\n\n\n    return 0;\n}\n</code></pre>\n\n<p>And these are the errors:</p>\n\n<pre><code>testmitcanders.cpp:27:13: error: \u2018fork\u2019 was not declared in this scope\n  childPid = fork();\n             ^~~~\ntestmitcanders.cpp:41:26: error: \u2018execv\u2019 was not declared in this scope\n   testintueberlagerung = execv(befehlstr, parameterstr);\n                          ^~~~~\ntestmitcanders.cpp:51:3: error: \u2018wait\u2019 was not declared in this scope\n   wait(&amp;status);        \n   ^~~~\ntestmitcanders.cpp:51:3: note: suggested alternative: \u2018main\u2019\n   wait(&amp;status);        \n   ^~~~\n   main\n</code></pre>\n\n<p>As far as i understand these all pertain to system calls and i do not understand why they would need to be declared in C++. but not in C?\n(And how to declare them if i have to?)</p>\n\n<p>Thanks for any help</p>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 3, "creation_date": 1541624878, "post_id": 53197746, "comment_id": 93284235, "body": "I cannot reproduce the error described. See <a href=\"http://coliru.stacked-crooked.com/a/922e8a8d0e3718d5\" rel=\"nofollow noreferrer\">coliru link</a>. Please provide an minimal self-contained example that can be used to reproduce the error, and state compiler version and compiler flags."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 1, "creation_date": 1541625188, "post_id": 53197746, "comment_id": 93284370, "body": "@Brian: I get a similar error when making the class non-copyable using <code>NonCopyable(NonCopyable&amp;) = delete;</code> Adding a <code>const</code> avoids the error. Of course, it would help if the question did contain the relevant detail, i.e., how <code>NonCopyable</code> is declared, already."}, {"owner": {"reputation": 23, "user_id": 10322166, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9P-32hAhVMA/AAAAAAAAAAI/AAAAAAAAEI0/ooKMSkCqOYw/photo.jpg?sz=128", "display_name": "Braedon Leonard", "link": "https://stackoverflow.com/users/10322166/braedon-leonard"}, "edited": false, "score": 0, "creation_date": 1541626338, "post_id": 53197746, "comment_id": 93284892, "body": "While working on a self-contained example, I found that some things left out of the original post were important, so I am working on providing a better example now."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10322166, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9P-32hAhVMA/AAAAAAAAAAI/AAAAAAAAEI0/ooKMSkCqOYw/photo.jpg?sz=128", "display_name": "Braedon Leonard", "link": "https://stackoverflow.com/users/10322166/braedon-leonard"}, "edited": false, "score": 0, "creation_date": 1541686845, "post_id": 53198600, "comment_id": 93307176, "body": "Thank you for the help. That was the cause of my problem."}], "tags": [], "owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "is_accepted": true, "score": 2, "last_activity_date": 1541628898, "last_edit_date": 1541628898, "creation_date": 1541628433, "answer_id": 53198600, "question_id": 53197746, "link": "https://stackoverflow.com/questions/53197746/cannot-construct-a-pair-containing-a-const-int-and-a-non-copyable-but-moveable/53198600#53198600", "title": "Cannot construct a pair containing a const int and a non-copyable (but moveable) object in C++17", "body": "<p>There is a rule which says <code>When destructor is defined, move operations are deleted and they are not generated by compiler default.</code></p>\n\n<p>So you have to add move constructor to your class.</p>\n\n<pre><code>class ContainsNC {\n    public:\n        ~ContainsNC() {\n            std::cout &lt;&lt; \"destruct\" &lt;&lt; std::endl;\n        }\n\n        ContainsNC(ContainsNC&amp;&amp;) = default;\n    private:\n        NonCopyable nc;\n};\n</code></pre>\n\n<p>After adding move ctor, default constructor is deleted, you have to provide it too to compile your code:</p>\n\n<pre><code>class ContainsNC {\n    public:\n        ~ContainsNC() {\n            std::cout &lt;&lt; \"destruct\" &lt;&lt; std::endl;\n        }\n        ContainsNC() = default;\n        ContainsNC(ContainsNC&amp;&amp;) = default;\n    private:\n        NonCopyable nc;\n};\n</code></pre>\n\n<p>You can check <a href=\"https://en.cppreference.com/w/cpp/language/move_constructor\" rel=\"nofollow noreferrer\">this link</a> to see when move operations are generated for class default by compiler.</p>\n"}], "owner": {"reputation": 23, "user_id": 10322166, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9P-32hAhVMA/AAAAAAAAAAI/AAAAAAAAEI0/ooKMSkCqOYw/photo.jpg?sz=128", "display_name": "Braedon Leonard", "link": "https://stackoverflow.com/users/10322166/braedon-leonard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 53198600, "answer_count": 1, "score": 0, "last_activity_date": 1541628898, "creation_date": 1541624482, "last_edit_date": 1541627557, "question_id": 53197746, "link": "https://stackoverflow.com/questions/53197746/cannot-construct-a-pair-containing-a-const-int-and-a-non-copyable-but-moveable", "title": "Cannot construct a pair containing a const int and a non-copyable (but moveable) object in C++17", "body": "<p>I have a class, which I will refer to as NonCopyable, which cannot be copied, but can be moved (both move constructed and move assigned). I am trying to construct a <code>std::pair&lt;const int, NonCopyable&gt;</code>, but the line below will not compile.</p>\n\n<pre><code>std::pair&lt;const int, NonCopyable&gt;(1, NonCopyable());\n</code></pre>\n\n<p>The error I receive is:</p>\n\n<pre><code>no matching function for call to 'std::pair&lt;const int, NonCopyable&gt;::pair(int, NonCopyable)'\n</code></pre>\n\n<p>Why does the line fail to compile? Since NonCopyable is move constructible/assignable, I would expect it to use the constructor <code>template&lt;class U1, class U2&gt; constexpr pair(U1&amp;&amp; x, U2&amp;&amp; y)</code>.</p>\n\n<p>Edit:</p>\n\n<p>So I left out some information that I did not think was relevant, but in fact was and is very important.</p>\n\n<p>I have a class ContainsNC, which contains a non-copyable class NonCopyable. I am trying to construct a <code>std::pair&lt;const int, ContainsNC&gt;</code>, but the code below fails to compile.</p>\n\n<pre><code>#include &lt;utility&gt;\n#include &lt;thread&gt;\n#include &lt;iostream&gt;\nstruct NonCopyable {\n    NonCopyable() = default;\n    NonCopyable(const NonCopyable&amp;) = delete;\n    NonCopyable(NonCopyable&amp;&amp;) = default;\n    NonCopyable&amp; operator=(const NonCopyable&amp;) = delete;\n    NonCopyable&amp; operator=(NonCopyable&amp;&amp;) = default;\n};\n\nclass ContainsNC {\n    public:\n        ~ContainsNC() {\n            std::cout &lt;&lt; \"destruct\" &lt;&lt; std::endl;\n        }\n    private:\n        NonCopyable nc;\n};\n\nint main() {\n    std::pair&lt;const int, ContainsNC&gt;(1, ContainsNC());\n}\n</code></pre>\n\n<p>Now, if the custom destructor of ContainsNC is commented out, the code compiles. Why does the custom destructor affect construction of the <code>std::pair&lt;const int, ContainsNC&gt;</code>?</p>\n"}, {"tags": ["c++", "boost", "backwards-compatibility", "boost-log"], "answers": [{"tags": [], "owner": {"reputation": 8115, "user_id": 4636534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GoTz67GRao8/AAAAAAAAAAI/AAAAAAAAADI/PyDv-i56924/photo.jpg?sz=128", "display_name": "Andrey Semashev", "link": "https://stackoverflow.com/users/4636534/andrey-semashev"}, "is_accepted": true, "score": 1, "last_activity_date": 1542411630, "creation_date": 1542411630, "answer_id": 53346770, "question_id": 53197700, "link": "https://stackoverflow.com/questions/53197700/boost-log-1-62-filter-condition-must-be-in-parentheses/53346770#53346770", "title": "Boost Log 1.62: filter condition must be in parentheses?", "body": "<blockquote>\n  <p>Am I doing it correctly? Did I miss something?</p>\n</blockquote>\n\n<p>Yes, putting the condition in the parenthesis is the correct solution. The rationale is that otherwise the syntax is ambiguous because the \"not %Channel%\" part is a valid filter in itself, which tests for the Channel attribute absence.</p>\n\n<blockquote>\n  <p>Which version of Boost Log was this breaking change introduced?</p>\n</blockquote>\n\n<p>As you've found out, 1.55 was the first release with rewritten and more robust parsers. Earlier releases were less strict, but should accept the syntax that is accepted by the new parsers.</p>\n"}], "owner": {"reputation": 2108, "user_id": 630364, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/db0bfce7580a946cd2dc6ae019f53e6e?s=128&d=identicon&r=PG", "display_name": "yaobin", "link": "https://stackoverflow.com/users/630364/yaobin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 53346770, "answer_count": 1, "score": 0, "last_activity_date": 1542411630, "creation_date": 1541624259, "last_edit_date": 1541798145, "question_id": 53197700, "link": "https://stackoverflow.com/questions/53197700/boost-log-1-62-filter-condition-must-be-in-parentheses", "title": "Boost Log 1.62: filter condition must be in parentheses?", "body": "<p>I'm working with the Boost Log library on Ubuntu 14.04 and Ubuntu 18.04. On 14.04, I'm using <code>libboost-log1.54</code>, while on 18.04 I'm using <code>libboost-log1.62</code>.</p>\n\n<p>I'm using the following example code (called <code>main.cpp</code>):</p>\n\n<pre><code>#include &lt;boost/log/utility/setup.hpp&gt;\n\nint main(int argc, char * argv[])\n{\n  boost::log::settings s;\n  s[\"Core\"][\"DisableLogging\"] = false;\n  s[\"Sinks.File.Destination\"] = \"TextFile\";\n  s[\"Sinks.File.FileName\"] = \"test.log\";\n  s[\"Sinks.File.Filter\"] = \"not %Channel% matches Something\";\n\n  boost::log::init_from_settings(s);\n\n  return 0;\n}\n</code></pre>\n\n<p>I'm using this command to build the code:</p>\n\n<p><code>g++ main.cpp -DBOOST_LOG_DYN_LINK -lboost_log_setup -lboost_system</code></p>\n\n<p>The code can be built successfully on both 14.04 and 18.04. However, when I ran the executable file, the 18.04 one threw an exception:</p>\n\n<pre><code>terminate called after throwing an instance of 'boost::exception_detail::clone_impl&lt;boost::exception_detail::error_info_injector&lt;boost::log::v2_mt_posix::parse_error&gt; &gt;'\n  what():  Invalid filter definition: unexpected character encountered\nAborted (core dumped)\n</code></pre>\n\n<p>In order to fix this, I need to modify the \"Sinks.File.Filter\" line to this:</p>\n\n<p><code>s[\"Sinks.File.Filter\"] = \"not (%Channel% matches Something)\";</code></p>\n\n<p><strong>That is</strong>: put the <code>condition</code> part in a pair of parentheses.</p>\n\n<p>Why do I have to put the condition in the parentheses? This looks like a breaking change because what can run using Boost 1.54 can no longer run using Boost 1.62. I read through the <a href=\"https://www.boost.org/doc/libs/1_62_0/libs/log/doc/html/log/detailed/utilities.html#log.detailed.utilities.setup.filter_formatter\" rel=\"nofollow noreferrer\">documentation</a> and the <a href=\"https://www.boost.org/doc/libs/1_68_0/libs/log/doc/html/log/changelog.html\" rel=\"nofollow noreferrer\"><code>changelog</code></a> but didn't find anything that seemingly related. The only possibly related change was in <code>1.55</code> in which the change log says:</p>\n\n<blockquote>\n  <p>Rewritten some of the parsers to reduce the compiled binary size. The rewritten parsers are more robust in detecting ambiguous and incorrect input.</p>\n</blockquote>\n\n<p>So <strong>my questions are</strong>:</p>\n\n<ul>\n<li>Am I doing it correctly? Did I miss something?</li>\n<li>Which version of Boost Log was this breaking change introduced?</li>\n</ul>\n"}, {"tags": ["c++", "scanf"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1541623132, "post_id": 53197426, "comment_id": 93283387, "body": "Sounds like you may want a regular expression."}, {"owner": {"reputation": 1, "user_id": 10094341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b8570dec1ca70932db8dfe661acb11d?s=128&d=identicon&r=PG&f=1", "display_name": "SBD_J", "link": "https://stackoverflow.com/users/10094341/sbd-j"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1541626662, "post_id": 53197426, "comment_id": 93285049, "body": "You&#39;re right, I want a regular expression, but I&#39;m stuck with scanf. I don&#39;t think the above is possible, but I was hoping that someone might have some better insight."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10094341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b8570dec1ca70932db8dfe661acb11d?s=128&d=identicon&r=PG&f=1", "display_name": "SBD_J", "link": "https://stackoverflow.com/users/10094341/sbd-j"}, "edited": false, "score": 0, "creation_date": 1541627029, "post_id": 53197579, "comment_id": 93285197, "body": "Thank you for the answer. But, that format string also returns 1 for &quot;14782&quot;. I&#39;m looking for a format string that recognizes &quot;14782&quot; does not have a hyphen and returns 0 (n=0), but at the same will return &gt; 0 (n=2) for input like &quot;18509726-550&quot;."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "reply_to_user": {"reputation": 1, "user_id": 10094341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b8570dec1ca70932db8dfe661acb11d?s=128&d=identicon&r=PG&f=1", "display_name": "SBD_J", "link": "https://stackoverflow.com/users/10094341/sbd-j"}, "edited": false, "score": 0, "creation_date": 1541630245, "post_id": 53197579, "comment_id": 93286429, "body": "Hmm. Then just <code>strchr(s, &#39;-&#39;)</code> no?"}], "tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": false, "score": 0, "last_activity_date": 1541623702, "creation_date": 1541623702, "answer_id": 53197579, "question_id": 53197426, "link": "https://stackoverflow.com/questions/53197426/sscanf-format-string-that-can-detect-a-hyphenated-and-non-hyphenated-string/53197579#53197579", "title": "sscanf format string that can detect a hyphenated and non-hyphenated string", "body": "<p><code>[]</code> assumes <code>s</code> format already. \nJust use <code>\"%[^-]-%[^-]\"</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid test(const char* s)\n{\n    char s1[100]{}, s2[100]{};\n    int n = sscanf(s, \"%[^-]-%[^-]\", s1, s2);\n    printf(\"%d: %s, %s\\n\", n, s1, s2);\n}\n\nint main()\n{\n    test(\"18509726-550\");\n    test(\"14782\");\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>2: 18509726, 550\n1: 14782, \n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10094341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b8570dec1ca70932db8dfe661acb11d?s=128&d=identicon&r=PG&f=1", "display_name": "SBD_J", "link": "https://stackoverflow.com/users/10094341/sbd-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 187, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541626503, "creation_date": 1541622981, "last_edit_date": 1541626503, "question_id": 53197426, "link": "https://stackoverflow.com/questions/53197426/sscanf-format-string-that-can-detect-a-hyphenated-and-non-hyphenated-string", "title": "sscanf format string that can detect a hyphenated and non-hyphenated string", "body": "<p>I'm working on an implementation that uses sscanf() to detect input.\nInput will either contain a hyphen character '-' or it won't. The length of the strings and position of the hyphen character will vary.\nExamples:</p>\n\n<pre><code>\"18509726-550\"\n\"14782\"\n</code></pre>\n\n<p>I've been trying to come up with a format string that has a return > 0 for strings with a hyphen but not for strings without a hyphen, however I have not had success. It may not be possible. I also realize there are much better ways achieve this, but this code was written way before my time.</p>\n\n<p>Code:</p>\n\n<pre><code>// what format string will return 0 for one but not the other?\nString^ pszString = \"18509726-550\"; // or \"14782\"\nint nP;\nchar buffer[256];\nchar buffer1[256];\nconst char* pSrc = (gcnew marshal_context())-&gt;marshal_as&lt;const char*&gt;(pszString);\nnP=sscanf(pSrc, \"%[-]s\", buffer, buffer1);\n</code></pre>\n\n<p>I've tried several format strings:</p>\n\n<pre><code>\"%s-%s\"\n\"%[0-9-]s\"\n\"%[-]s\"\n\"%[^-]s\"\n</code></pre>\n\n<p>I've poured over any sscanf documentation I can find, and I don't think it is possible with sscanf alone, but validation helps too.\nThanks SO community!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1541624411, "post_id": 53197368, "comment_id": 93284010, "body": "You are using <code>date</code> which isn&#39;t declared. You probably meant to use <code>day</code>. Also, as was pointed out by a now deleted comment, you should verify that you use <code>=</code> (assignment) correctly (comparison for equality would use <code>==</code>)."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1541624523, "post_id": 53197368, "comment_id": 93284054, "body": "&quot;it&#39;s not working. It only display 4 errors&quot; is <i>not</i> a useful problem description. At the very least, show us the errors."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1541624613, "post_id": 53197368, "comment_id": 93284102, "body": "@JesperJuhl: I agree that the formatting isn&#39;t ideal but it <i>does</i> say <code>[Error] expected primary-expression before &#39;&lt;&lt;&#39; token</code> ..."}], "answers": [{"tags": [], "owner": {"reputation": 376, "user_id": 1178830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134bfcd09970cfb56a92fd02bab88ec7?s=128&d=identicon&r=PG", "display_name": "user1178830", "link": "https://stackoverflow.com/users/1178830/user1178830"}, "is_accepted": false, "score": 1, "last_activity_date": 1541624405, "creation_date": 1541624405, "answer_id": 53197729, "question_id": 53197368, "link": "https://stackoverflow.com/questions/53197368/i-want-to-correct-my-program-and-make-it-display-the-initial-time-as-intended/53197729#53197729", "title": "I want to correct my program and make it display the initial time as intended", "body": "<p>I think you meant to write </p>\n\n<pre><code>cout&lt;&lt;day&lt;&lt;\"/\"&lt;&lt;month&lt;&lt;\"/\"&lt;&lt;year&lt;&lt;endl;\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>cout&lt;&lt;date&lt;&lt;\"/\"&lt;&lt;month&lt;&lt;\"/\"&lt;&lt;year&lt;&lt;endl;\n</code></pre>\n\n<p>in both the setDate and advance functions</p>\n"}], "owner": {"reputation": 37, "user_id": 10620371, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hi_KP7p88vw/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCE52MkrRYSm-8m5HF8b_1h-LMtcw/mo/photo.jpg?sz=128", "display_name": "BENJA", "link": "https://stackoverflow.com/users/10620371/benja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1564225796, "creation_date": 1541622723, "last_edit_date": 1564225796, "question_id": 53197368, "link": "https://stackoverflow.com/questions/53197368/i-want-to-correct-my-program-and-make-it-display-the-initial-time-as-intended", "title": "I want to correct my program and make it display the initial time as intended", "body": "<p>I'm trying to make a programming that would set the time to 11/7/2018, but it's not working. It only display 4 errors. Can someone please help me rectify the code.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass date {\nprivate: \n    int day,month,year;\n\npublic:\n    void advance();\n\n    date(){\n        day=1;\n        month=1;\n        year=2018;\n    };\n\n    void setDate(){\n        cout&lt;&lt;day&lt;&lt;\"/\"&lt;&lt;month&lt;&lt;\"/\"&lt;&lt;year&lt;&lt;endl;\n    }\n};\n\nvoid date::advance(){\n    for(month=1;month=&lt;12;month++){\n        for(day=1;day=&lt;31;day++){\n            cout&lt;&lt;day&lt;&lt;\"/\"&lt;&lt;month&lt;&lt;\"/\"&lt;&lt;year&lt;&lt;endl;\n        }   \n    }\n}\n\nint main(){\n    date d;\n    cout&lt;&lt;\"Date set as:\";\n    d.setDate();\n    cout&lt;&lt;\"Setting the advance method\"&lt;&lt;endl;\n    d.advance();\n    return 0;\n}\n</code></pre>\n\n<p>It display In member function <code>void date::setDate()</code>:</p>\n\n<pre><code>[Error] expected primary-expression before '&lt;&lt;' token\nIn member function 'void date::advance()':\n[Error] expected primary-expression before '&lt;&lt;' token\n</code></pre>\n"}, {"tags": ["c++", "language-lawyer", "void", "language-design", "generic-programming"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 4, "creation_date": 1541622669, "post_id": 53197340, "comment_id": 93283195, "body": "Have you heard about <a href=\"https://wg21.link/p0146\" rel=\"nofollow noreferrer\">Regular Void</a>?"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1541622770, "post_id": 53197340, "comment_id": 93283233, "body": "@Rakete1111: agh this <i>did</i> seem like an obvious solution! Thank you, I&#39;ll look into it!"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 3, "creation_date": 1541623432, "post_id": 53197340, "comment_id": 93283524, "body": "@Rakete1111 Arrays of <code>void</code> look like a killer feature."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 1, "creation_date": 1541825571, "post_id": 53197340, "comment_id": 93358667, "body": "The standard requires that <code>sizeof(void*) == sizeof(char*)</code>. The fact that pointers to incomplete types are a thing means that all struct pointers &quot;smell the same&quot;. Since you are proposing that <code>void</code> be a struct, this means that <code>sizeof(void*) == sizeof(struct Foo*)</code>, which means that <code>sizeof(char*) == sizeof(struct Foo*)</code>, which makes life difficult for non-byte-addressable systems like TOPS-20."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1541847306, "post_id": 53197340, "comment_id": 93362457, "body": "@RaymondChen: is the problem you are highlighting that, given that <code>sizeof(void *) &gt;= sizeof(any other data object)</code>, it would make <code>struct</code> pointers too big for no good reason?"}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1541863131, "post_id": 53197340, "comment_id": 93366443, "body": "@MatteoItalia It would force <code>sizeof(struct Foo*)</code> to be the same size as <code>sizeof(void*)</code>, and require implementations to support byte-aligned structures (because <code>void</code> would now be a byte-aligned structure). For non-byte-addressable systems, this increases memory usage (struct pointers get bigger) and code size (pointer dereferencing is now a lot more complicated)."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1541865930, "post_id": 53197340, "comment_id": 93367230, "body": "@RaymondChen: I understand the problem, but I&#39;m not sure that this would mandate <code>sizeof(struct Foo*) == sizeof(void *)</code>. The fact that <code>sizeof(struct Foo*) == sizeof(struct Bar*)</code>, while not explicitly mandated AFAIK, comes from the fact that any pointer to <code>struct</code> must be a complete type even with <code>Foo</code> and <code>Bar</code> being incomplete types (IOW, it must not depend on the actual definition of <code>Foo</code> and <code>Bar</code>); this would not apply to <code>void</code>, as it would be a builtin type - so, always already declared - as it is now."}], "answers": [{"comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 3, "creation_date": 1541624862, "post_id": 53197687, "comment_id": 93284229, "body": "It would be harder to differentiate between a pointer to something unknown (type-erasure the ultimate) and a <code>void</code>-object / array of <code>void</code>s. I wonder how implicit conversion of data-pointer to <code>void*</code> will fare. Sometimes, the lack of regularity is actually a safety-feature."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1541834439, "post_id": 53197687, "comment_id": 93359902, "body": "Is <code>void</code> the base class of every other class? And of every scalar type? Bonus Q: Is <code>void</code> a virtual base (to avoid ambiguous conversions)? Trying to fit a complete consistent framework (or type system) over the inconsistency of a bunch of ad hoc rules is hard."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1541848234, "post_id": 53197687, "comment_id": 93362657, "body": "@curiousguy: read the proposal: it&#39;s essentially what I outlined in the question; <code>void</code> becomes a regular, instantiable type; current special rules about <code>void *</code> remain; base classes and such never come into play."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1544823499, "post_id": 53197687, "comment_id": 94426020, "body": "@MatteoItalia <code>void</code> cannot become 100% regular because there is still code using <code>(void)</code> for the empty argument list."}], "tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": true, "score": 17, "last_activity_date": 1544685188, "last_edit_date": 1544685188, "creation_date": 1541624176, "answer_id": 53197687, "question_id": 53197340, "link": "https://stackoverflow.com/questions/53197340/how-much-existing-c-code-would-break-if-void-was-actually-defined-as-struct-v/53197687#53197687", "title": "How much existing C++ code would break if void was actually defined as `struct void {};`", "body": "<p>There is a proposal for this, it is <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0146r1.html\" rel=\"noreferrer\">p0146: Regular Void</a> </p>\n\n<blockquote>\n  <p>Presented below is a struct definition that is analogous to what is\n  proposed for void in this paper. The actual definition is not a class\n  type, but this serves as a fairly accurate approximation of what is\n  proposed and how developers can think about void. What should be\n  noticed is that this can be thought of as adding functionality to the\n  existing void type, much like adding a special member function to any\n  other existing type that didn't have it before, such as adding a move\n  constructor to a previously non-copyable type. This comparison is not\n  entirely analogous because void is currently no ordinary type, but it\n  is a reasonable, informal description, with details covered later.</p>\n\n<pre><code>struct void {\n  void() = default;\n  void(const void&amp;) = default;\n  void&amp; operator =(const void&amp;) = default;\n\n  template &lt;class T&gt;\n  explicit constexpr void(T&amp;&amp;) noexcept {}\n};\n\nconstexpr bool operator ==(void, void) noexcept { return true; }\nconstexpr bool operator !=(void, void) noexcept { return false; }\nconstexpr bool operator &lt;(void, void) noexcept { return false; }\nconstexpr bool operator &lt;=(void, void) noexcept { return true; }\nconstexpr bool operator &gt;=(void, void) noexcept { return true; }\nconstexpr bool operator &gt;(void, void) noexcept { return false; }\n</code></pre>\n</blockquote>\n\n<p>It was received well in <a href=\"https://botondballo.wordpress.com/2016/07/06/trip-report-c-standards-meeting-in-oulu-june-2016/\" rel=\"noreferrer\">Oulu June 2016 meeting Trip Report</a>:</p>\n\n<blockquote>\n  <p>Regular void, a proposal to remove most instances of special-case treatment of void in the language, making it behave like any other type. The general idea enjoyed an increased level of support since its initial presentation two meetings ago, but some details were still contentious, most notably the ability to delete pointers of type void*. The author was encouraged to come back with a revised proposal, and perhaps an implementation to help rule out unexpected complications.</p>\n</blockquote>\n\n<p>I chatted with the author and he confirmed that it is basically waiting for an implementation, once there is an implementation he plans on bringing the proposal back.</p>\n\n<p>There is extensive discussion in the paper about what changes and why, it is not really quotable as a whole but the FAQ questions addressed are:</p>\n\n<blockquote>\n  <ul>\n  <li>Doesn't This Proposal Introduce More Special-Casing for void?</li>\n  <li>Why Isn't sizeof(void) Equal to 0?</li>\n  <li>Does This Break std::enable_if?</li>\n  <li>In Practice, Would This Break ABI Compatibility?</li>\n  <li>Doesn't constexpr_if Make Branching for void Easier?</li>\n  <li>Isn't It Illogical to Support some-operation for void?</li>\n  <li>Doesn't This Remove the Notion of \"No Result?\"</li>\n  <li>Isn't This a Change to the Meaning of void?</li>\n  </ul>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1544819770, "post_id": 53784444, "comment_id": 94424658, "body": "The analogy doesn&#39;t hold, it&#39;s more like replacing <code>bool</code> with <code>int</code> - you add possible values, but if you don&#39;t use them no harm is done."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 1, "creation_date": 1544823411, "post_id": 53784444, "comment_id": 94425999, "body": "Indeed you can&#39;t do <code>void x; return x;</code> or even <code>(void());</code>. But then <code>int f(void);</code> isn&#39;t the declaration of a function taking one &quot;bottom&quot; <code>void</code> value either. Nothing is regular in C/C++. That&#39;s why it&#39;s sooooo hard to do generics properly."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 2, "creation_date": 1544830677, "post_id": 53784444, "comment_id": 94428004, "body": "@curiousguy: C++ is indeed somewhat broken in that sense. And while that could be fixed, &quot;properly&quot; fixing things like this means discarding backwards compatibility in favor of that &quot;smaller and clearer language struggling to get out&quot; which Bjarne mentioned. That&#39;s my opinion anyway."}, {"owner": {"reputation": 11682, "user_id": 3840170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L9NB3.png?s=128&g=1", "display_name": "user3840170", "link": "https://stackoverflow.com/users/3840170/user3840170"}, "edited": false, "score": 0, "creation_date": 1616914365, "post_id": 53784444, "comment_id": 118148319, "body": "<code>void</code> is not a bottom type. <code>[[noreturn]] void</code> is a bottom \u2018type\u2019."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 11682, "user_id": 3840170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L9NB3.png?s=128&g=1", "display_name": "user3840170", "link": "https://stackoverflow.com/users/3840170/user3840170"}, "edited": false, "score": 0, "creation_date": 1616926329, "post_id": 53784444, "comment_id": 118150508, "body": "@user3840170: <code>[[noreturn]]</code> is an attribute of a function, not of a type. There is no such thing as a <code>[[noreturn]] void</code> type."}, {"owner": {"reputation": 11682, "user_id": 3840170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L9NB3.png?s=128&g=1", "display_name": "user3840170", "link": "https://stackoverflow.com/users/3840170/user3840170"}, "edited": false, "score": 0, "creation_date": 1616926378, "post_id": 53784444, "comment_id": 118150519, "body": "Thank you for explaining the scare quotes around \u2018type\u2019."}], "tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": false, "score": -1, "last_activity_date": 1544814716, "last_edit_date": 1544814716, "creation_date": 1544808880, "answer_id": 53784444, "question_id": 53197340, "link": "https://stackoverflow.com/questions/53197340/how-much-existing-c-code-would-break-if-void-was-actually-defined-as-struct-v/53784444#53784444", "title": "How much existing C++ code would break if void was actually defined as `struct void {};`", "body": "<ul>\n<li><code>void</code> is a type with an <strong>empty</strong> domain (it has not possible values);</li>\n<li><code>struct foo { }</code> is a type with a <strong>non-empty</strong> domain (there is one value of this type).</li>\n</ul>\n\n<p>In other words, <code>void</code> is a <a href=\"https://en.wikipedia.org/wiki/Bottom_type\" rel=\"nofollow noreferrer\">bottom type</a> while a potential <code>struct void {}</code> would be a <a href=\"https://en.wikipedia.org/wiki/Unit_type\" rel=\"nofollow noreferrer\">unit type</a>.</p>\n\n<p>Replacing the first with second essentially breaks, well, the whole world. It's not entirely dissimilar from deciding that 0 equals 1 in C++.</p>\n"}], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 574, "favorite_count": 1, "accepted_answer_id": 53197687, "answer_count": 2, "score": 21, "last_activity_date": 1544814716, "creation_date": 1541622594, "last_edit_date": 1541822601, "question_id": 53197340, "link": "https://stackoverflow.com/questions/53197340/how-much-existing-c-code-would-break-if-void-was-actually-defined-as-struct-v", "title": "How much existing C++ code would break if void was actually defined as `struct void {};`", "body": "<p><code>void</code> is a bizarre wart in the C++ type system. It's an incomplete type that cannot be completed, and it has all sort of magic rules about the restricted ways it can be employed:</p>\n\n<blockquote>\n  <p>A type <em>cv</em> <code>void</code> is an incomplete type that cannot be completed; such a type has an empty set of values. It is used as the return type for functions that do not return a value.\n  Any expression can be explicitly converted to type <em>cv</em> <code>void</code> ([expr.cast]).\n  An expression of type <em>cv</em> <code>void</code> shall be used only as an expression statement, as an operand of a comma expression, as a second or third operand of <code>?:</code> ([expr.cond]), as the operand of <code>typeid</code>, <code>noexcept</code>, or <code>decltype</code>, as the expression in a <code>return</code> statement for a function with the return type <em>cv</em> <code>void</code>, or as the operand of an explicit conversion to type <em>cv</em> <code>void</code>.</p>\n</blockquote>\n\n<p>(N4778, <a href=\"http://eel.is/c++draft/basic.fundamental#9\" rel=\"noreferrer\">[basic.fundamental] \u00b69</a>)</p>\n\n<p>Besides the itchy feeling about all those strange rules, due to the limited ways it can be used it often comes up as a painful special case when writing templates; most often it feels like we would like it to behave more like <a href=\"https://en.cppreference.com/w/cpp/utility/variant/monostate\" rel=\"noreferrer\"><code>std::monostate</code></a>.</p>\n\n<hr>\n\n<p>Let's imagine for a moment that instead of the quotation above, the standard said about <code>void</code> something like</p>\n\n<blockquote>\n  <p>It's a type with definition equivalent to:</p>\n\n<pre><code>struct void {\n    void()=default;\n    template&lt;typename T&gt; explicit void(T &amp;&amp;) {}; // to allow cast to void\n};\n</code></pre>\n</blockquote>\n\n<p>while keeping the <code>void *</code> magic - can alias any object, data pointers must survive the roundtrip through <code>void *</code>.</p>\n\n<p>This:</p>\n\n<ul>\n<li>should cover the existing use cases of the <code>void</code> type \"proper\";</li>\n<li>could probably allow the removal of a decent amount of junk about it spread through the standard - e.g. <a href=\"http://eel.is/c++draft/expr.cond#2\" rel=\"noreferrer\">[expr.cond] \u00b62</a> would probably be unneeded, and <a href=\"http://eel.is/c++draft/stmt.return\" rel=\"noreferrer\">[stmt.return]</a> would be greatly simplified (while still keeping the \"exception\" that <code>return</code> with no expression is allowed for <code>void</code> and that \"flowing off\" of a <code>void</code> function is equivalent to <code>return;</code>);</li>\n<li>should still be just as efficient - empty class optimization is nowadays supported everywhere;</li>\n<li>be intrinsically compatible on modern ABIs, and could be still special-cased by the compiler on older ones.</li>\n</ul>\n\n<p>Besides being compatible, this would provide:</p>\n\n<ul>\n<li>construction, copy and move of those empty objects, eliminating the special cases generally needed in templates;</li>\n<li>bonus pointer arithmetic on <code>void *</code>, operating as for <code>char *</code>, which is a common extension, quite useful when manipulating binary buffers.</li>\n</ul>\n\n<hr>\n\n<p>Now, besides the possibly altered return values of <code>&lt;type_traits&gt;</code> stuff, what could this possibly break in code that is well-formed according to current (C++17) rules?</p>\n"}, {"tags": ["c++", "unique-ptr"], "answers": [{"tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": false, "score": 2, "last_activity_date": 1541622649, "creation_date": 1541622649, "answer_id": 53197354, "question_id": 53197316, "link": "https://stackoverflow.com/questions/53197316/c-calling-stdmove-on-stdunique-ptr-without-copying/53197354#53197354", "title": "C++ calling std::move on std::unique_ptr without copying", "body": "<p>You can construct it inplace avoiding creation of any temporaries:</p>\n\n<pre><code>devices_.emplace\n(\n   ::std::piecewise_construct\n,  ::std::forward_as_tuple(i)\n,  ::std::forward_as_tuple(::std::move(device))\n);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 1, "last_activity_date": 1541624607, "creation_date": 1541624607, "answer_id": 53197779, "question_id": 53197316, "link": "https://stackoverflow.com/questions/53197316/c-calling-stdmove-on-stdunique-ptr-without-copying/53197779#53197779", "title": "C++ calling std::move on std::unique_ptr without copying", "body": "<p>If you're ok with subsequent insertions with duplicate keys overwriting previous ones, then:</p>\n\n<pre><code>devices_[i] = std::move(device);\n</code></pre>\n\n<p>If not, then:</p>\n\n<pre><code>devices_.insert(std::make_pair(i, std::move(device)));\n</code></pre>\n\n<p>The reason why the latter works and the code in the question doesn't is that prior to C++17, the <code>insert</code> method had a defective set of overloads, which you can see <a href=\"https://en.cppreference.com/w/cpp/container/map/insert\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<pre><code>std::pair&lt;iterator, bool&gt; insert( const value_type&amp; value ); // 1\n\ntemplate&lt;class P&gt;\nstd::pair&lt;iterator,bool&gt; insert( P&amp;&amp; value ); // 2\n</code></pre>\n\n<p>Normally, overload #2 should handle the cases where the argument needs to be moved from, but in your case, since you've chosen to pass a braced-init-list, <code>P</code> can't be deduced, and #1 wins overload resolution and attempts to copy the argument. By using <code>std::make_pair</code>, you can force deduction to succeed for #2, which then wins and does the right thing.</p>\n\n<p>In C++17 this is fixed as overload #3 is added:</p>\n\n<pre><code>std::pair&lt;iterator,bool&gt; insert( value_type&amp;&amp; value );\n</code></pre>\n\n<p>which will win overload resolution with the braced-init-list argument.</p>\n"}], "owner": {"reputation": 1264, "user_id": 9285560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/llodc.png?s=128&g=1", "display_name": "Haus", "link": "https://stackoverflow.com/users/9285560/haus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 425, "favorite_count": 0, "accepted_answer_id": 53197779, "answer_count": 2, "score": 1, "last_activity_date": 1541624607, "creation_date": 1541622434, "question_id": 53197316, "link": "https://stackoverflow.com/questions/53197316/c-calling-stdmove-on-stdunique-ptr-without-copying", "title": "C++ calling std::move on std::unique_ptr without copying", "body": "<p>I am generating an <code>std::unique_ptr&lt;Device&gt;</code> in a loop and adding them to an <code>std::map&lt;size_t, std::unique_ptr&lt;Device&gt;&gt;</code> which is a member variable.</p>\n\n<p>Header:</p>\n\n<pre><code>#include \"util.h\"\n#include &lt;map&gt;\n#include &lt;memory&gt;\n\nclass Container {\n  public:\n    explicit Container(char* path);\n\n  private:\n    std::map&lt;size_t, std::unique_ptr&lt;Device&gt;&gt; devices_;\n}\n</code></pre>\n\n<p>Implementation:</p>\n\n<pre><code>Container::Container(char* path) {\n  std::vector&lt;char*&gt; files = util::list_files(path);\n  for(size_t i = 0; i &lt; files.size(); i++) {\n    auto device = util::CreateDevice(file); // Returns std::unique_ptr&lt;Device&gt;\n    devices_.insert({i, std::move(device)});\n  }\n}\n</code></pre>\n\n<p><code>util.h</code> is responsible for creating the <code>unique_ptr&lt;Device&gt;</code>, and I do not have the source to it, so I cannot change it. When inserting into the map, I need to call <code>std::move</code>, otherwise it destructs as soon as it goes out of scope (e.g. next iteration).</p>\n\n<p>This implementation builds fine and works on the Visual Studio 2017 compiler. However, <strong>on Travis-CI with clang, I get the following error</strong>:</p>\n\n<pre><code>/usr/bin/../lib/gcc/x86_64-linux-gnu/5.5.0/../../../../include/c++/5.5.0/ext/new_allocator.h:120:23: error: \n      call to implicitly-deleted copy constructor of 'std::pair&lt;const unsigned\n      long, std::unique_ptr&lt;Device\n      std::default_delete&lt;Device&gt; &gt; &gt;'\n        { ::new((void *)__p) _Up(std::forward&lt;_Args&gt;(__args)...); }\n                             ^   ~~~~~~~~~~~~~~~~~~~~~~~~~~~\n</code></pre>\n\n<p>It appears that my implementation is trying to copy the <code>unique_ptr</code> when creating the pair to insert into the map. How can I avoid this?</p>\n"}, {"tags": ["c++", "templates", "forward-reference"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1541622358, "post_id": 53197249, "comment_id": 93283057, "body": "It looks like you expect <code>fn</code> to be a member function pointer, but the result of <code>std::bind</code> is not a member function pointer."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 1, "creation_date": 1541624295, "post_id": 53197249, "comment_id": 93283968, "body": "<code>fn</code> in <code>testAtNextLevel()</code> is a nullary function object. It is <i>not</i> a pointer to member function. <code>std::forward</code> doesn&#39;t really mess with the kind of things being forward. It merely arranges for retaining its properties with respect to rvalueness and constness."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1541631905, "post_id": 53197249, "comment_id": 93287002, "body": "The second argument of <code>-&gt;*</code> must be a <i>pointer to member</i>. You actually pass a bind result which is incorrect"}, {"owner": {"reputation": 89, "user_id": 10592594, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZT0b3PNHR7Y/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDYWCdC7LDYc4vDiIHidO9lS5WBhg/mo/photo.jpg?sz=128", "display_name": "mark", "link": "https://stackoverflow.com/users/10592594/mark"}, "edited": false, "score": 0, "creation_date": 1541650500, "post_id": 53197249, "comment_id": 93291298, "body": "Thankyou, Francois and M.M!"}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 10592594, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZT0b3PNHR7Y/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDYWCdC7LDYc4vDiIHidO9lS5WBhg/mo/photo.jpg?sz=128", "display_name": "mark", "link": "https://stackoverflow.com/users/10592594/mark"}, "edited": false, "score": 0, "creation_date": 1541650761, "post_id": 53199183, "comment_id": 93291367, "body": "Thank you JaMit! It worked now. I started off with this just simple call in both places, but didn&#39;t use bind function to call test. After using std::bind I start this pointer-to-function call. Or well your explanation made it very clear to me now .Again, thank you so much!"}], "tags": [], "owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "is_accepted": true, "score": 1, "last_activity_date": 1541631520, "creation_date": 1541631520, "answer_id": 53199183, "question_id": 53197249, "link": "https://stackoverflow.com/questions/53197249/stdforward-to-forward-a-funciton/53199183#53199183", "title": "std::forward to forward a funciton", "body": "<p>With all of those templates and <code>auto</code> declarations, it becomes easy to lose track of what type of data you are dealing with. Let's start near the bottom of your code:</p>\n\n<pre><code>auto myFunc = std::bind( &amp;TestChild::thisTestOk, this );\n</code></pre>\n\n<p>What is <code>myFunc</code>? While the return type of <code>std::bind</code> is officially unspecified, its use is specified (see, for example, <a href=\"https://en.cppreference.com/w/cpp/utility/functional/bind\" rel=\"nofollow noreferrer\">cppreference.com</a>). Invoking this returned value as a function is equivalent to invoking <code>thisTestOk()</code> with its lone argument bound to <code>this</code>.</p>\n\n<p>That is, the hidden pointer-to-<code>TestChild</code> argument (present in all of <code>TestChild</code>'s non-static member functions) has been replaced by <code>this</code>, which has the effect of converting a member function to a non-member function. Now let's look at how you invoke this wrapper non-member function.</p>\n\n<p>Within <code>test()</code>, this wrapper is invoked via <code>return fn()</code>. It is invoked as a function, and works as intended.</p>\n\n<p>Within <code>testAtNextLevel()</code>, this wrapper is invoked via <code>this-&gt;*fn()</code>. This wrapper <em>non-member</em> function is invoked as a pointer-to-member-function, which is an error. To make it work syntactically, the invocation should be simply <code>fn()</code>, as it was in <code>test()</code>. If you really want to override the bound object and use <code>this</code> as the hidden argument to <code>fn()</code>, you need to pass something different as the argument to <code>testAtNextLevel()</code>, probably a pointer-to-member (and it would have to be a pointer-to-<code>TestParent</code>-member, not a pointer-to-<code>TestChild</code>-member).</p>\n"}], "owner": {"reputation": 89, "user_id": 10592594, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZT0b3PNHR7Y/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDYWCdC7LDYc4vDiIHidO9lS5WBhg/mo/photo.jpg?sz=128", "display_name": "mark", "link": "https://stackoverflow.com/users/10592594/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 53199183, "answer_count": 1, "score": 0, "last_activity_date": 1541631520, "creation_date": 1541622179, "last_edit_date": 1541622762, "question_id": 53197249, "link": "https://stackoverflow.com/questions/53197249/stdforward-to-forward-a-funciton", "title": "std::forward to forward a funciton", "body": "<p>I have the following code that just doesn't compile, particularly after it is being forwarded through std::forward</p>\n\n<pre><code>struct TestParent\n{\n    template&lt; typename Fn &gt;\n    bool test( Fn&amp;&amp; fn )\n    {\n        //.. do something\n        //.. check some condition\n        bool someCondition = true;\n        if ( someCondition )\n\n        {\n            //this call works!\n            return fn();\n        }\n\n        return testAtNextLevel( std::forward&lt; Fn &gt;( fn ) );\n    }\n\n    template &lt; typename Fn &gt;\n    bool testAtNextLevel( Fn&amp;&amp; fn )\n    {\n        if ( (this-&gt;*fn() )\n        {\n             return true;\n        }\n\n         //... test some more\n         return true;\n     }\n}\n\nstruct TestChild: public TestParent\n{\n     bool thisTestOk();\n     bool testAll();\n}\n\nbool TestChild::thisTestOk()\n{\n     return true;\n}\n\nbool testAll()\n{\n    auto myFunc = std::bind( &amp;TestChild::thisTestOk, this );\n    return test( myFunc );\n}\n</code></pre>\n\n<p>When compiling I got this error message:</p>\n\n<pre><code>error: no match for 'operator-&gt;*' (operand types are 'TestParent*' and 'std::_Bind&lt;std::_Mem_fn&lt;bool (TestChild::*)()&gt;(TestChild*)&gt;')\n if ( (this-&gt;*fn)() )\n</code></pre>\n\n<p>Anyone has any ideas as to why after going through std::forward, the function just cannot be called? At the base class, right before the call 'testAtNextLevel', if some conditions is met we can just call the passed in function, but not after it is being forwarded to another template function?</p>\n"}, {"tags": ["c++", "encryption", "hex", "ifstream"], "comments": [{"owner": {"reputation": 3791, "user_id": 1820553, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZb6uZzo4Gg/AAAAAAAAAAI/AAAAAAAAAo0/xTr6RvgMTRw/photo.jpg?sz=128", "display_name": "kelalaka", "link": "https://stackoverflow.com/users/1820553/kelalaka"}, "edited": false, "score": 0, "creation_date": 1541621995, "post_id": 53197159, "comment_id": 93282907, "body": "<a href=\"https://stackoverflow.com/questions/5420317/reading-and-writing-binary-file\">read binary</a>"}, {"owner": {"reputation": 19, "user_id": 6278150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32a5e185ce9f948b7ffdcef11cbf49d5?s=128&d=identicon&r=PG&f=1", "display_name": "finesttea", "link": "https://stackoverflow.com/users/6278150/finesttea"}, "edited": false, "score": 0, "creation_date": 1541623181, "post_id": 53197159, "comment_id": 93283409, "body": "Unfortunately, these answers are useless for me. I just get meaningless characters with them"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1541624467, "post_id": 53197159, "comment_id": 93284033, "body": "<code>0b</code>, <code>09</code>, <code>0c</code>, are whitespace characters that are normally ignored by <code>operator&gt;&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 6278150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32a5e185ce9f948b7ffdcef11cbf49d5?s=128&d=identicon&r=PG&f=1", "display_name": "finesttea", "link": "https://stackoverflow.com/users/6278150/finesttea"}, "edited": false, "score": 0, "creation_date": 1541624627, "post_id": 53197715, "comment_id": 93284108, "body": "This answer enlightened me, now it works great, thank you!"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 0, "last_activity_date": 1541624954, "last_edit_date": 1541624954, "creation_date": 1541624344, "answer_id": 53197715, "question_id": 53197159, "link": "https://stackoverflow.com/questions/53197159/how-can-i-read-all-hex-values-of-ciphertext/53197715#53197715", "title": "How can I read all hex values of ciphertext?", "body": "<p>Your code has several mistakes in it:</p>\n\n<ul>\n<li><p>not opening the file in binary mode.</p></li>\n<li><p>using <code>operator&gt;&gt;</code> to read <em>formatted</em> characters, which ignores whitespace characters.</p></li>\n<li><p>not allocating enough memory for <code>arr[]</code>, causing a buffer overflow in <code>sprintf()</code>.</p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/5605125/\">using <code>!eof()</code> as your loop condition</a>.</p></li>\n<li><p>not null-terminating <code>cipherhex</code> after reading is done <sup>(optional)</sup>.</p></li>\n</ul>\n\n<p>Try this instead:</p>\n\n<pre><code>ifstream stream;\nchar c, arr[3], cipherhex[65];\nint cypherhexlen = 0;\nstream.open(\"ciphertext2\");\nwhile ((cypherhexlen &lt; 64) &amp;&amp; stream.get(c)) {\n    sprintf(arr, \"%02x\", static_cast&lt;unsigned char&gt;(c));\n    cout &lt;&lt; arr[0] &lt;&lt; arr[1] &lt;&lt; \" \";\n    cipherhex[cypherhexlen] = arr[0];\n    cipherhex[cypherhexlen+1] = arr[1];\n    cypherhexlen += 2;\n}\ncipherhex[cypherhexlen] = '\\0';\n// use cipherhex as needed...\n</code></pre>\n\n<p>Alternatively, I would opt for something more like this instead:</p>\n\n<pre><code>ifstream stream;\nunsigned char cipher[32];\nstream.open(\"ciphertext2\");\nstream.read(reinterpret_cast&lt;char*&gt;(cipher), 32);\nint cypherlen = stream.gcount();\nfor(int i = 0; i &lt; cypherlen; ++i) {\n    cout &lt;&lt; hex &lt;&lt; noshowbase &lt;&lt; setw(2) &lt;&lt; cipher[i] &lt;&lt; \" \";\n}\n// use cipher as needed...\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 6278150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32a5e185ce9f948b7ffdcef11cbf49d5?s=128&d=identicon&r=PG&f=1", "display_name": "finesttea", "link": "https://stackoverflow.com/users/6278150/finesttea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "closed_date": 1541679371, "accepted_answer_id": 53197715, "answer_count": 1, "score": -1, "last_activity_date": 1541624954, "creation_date": 1541621782, "last_edit_date": 1541623481, "question_id": 53197159, "link": "https://stackoverflow.com/questions/53197159/how-can-i-read-all-hex-values-of-ciphertext", "closed_reason": "Duplicate", "title": "How can I read all hex values of ciphertext?", "body": "<p>There is a <em>ciphertext</em> without any extension which has 32 bytes size. Therefore, I can get its hex values with hex editor, and its hex values are;</p>\n\n<p>a3 0b 35 8f 14 4e fe 5e 27 5a bd 8c 53 8b a0 cb ae da d3 fc 87 8b 51 0b d6 37 3e 91 86 9f f3 c9</p>\n\n<p>I tried to read these values from ciphertext with my code which is,</p>\n\n<pre><code>ifstream stream;\nunsigned char c;\nchar arr[2];\nchar cipherhex[65];\nint i=0;\nstream.open(\"ciphertext2\");\nwhile (!stream.eof()) {\n    stream &gt;&gt; c;\n    sprintf(arr, \"%02x\", c);\n    cout &lt;&lt; arr[0] &lt;&lt; arr[1] &lt;&lt; \" \";\n    cipherhex[i] = arr[0];\n    cipherhex[i+1] = arr[1];\n    i += 2;\n}\n</code></pre>\n\n<p>However, when I run this code, although there is a condition for <em>0x</em> kind of hex values, it can read these hex values;</p>\n\n<p>a3 35 8f 14 4e fe 5e 27 5a bd 8c 53 8b a0 cb ae da d3 fc 87 8b 51 d6 37 3e 91 86 9f f3 c9 c9</p>\n\n<p>The code cannot read <em>0b</em>, <em>09</em>, <em>0c</em> , but for different ciphertexts it can read <em>03</em> or <em>0e</em> . I could not understand how it can read <em>03</em> and <em>0e</em> but cannot <em>09</em> or <em>0b</em>. Thanks in advance.</p>\n\n<p><strong>Generally, there is no problem with reading hex values, but there is problem with reading specific values that I mentioned above.</strong> </p>\n"}, {"tags": ["c++", "move"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1541621747, "post_id": 53197128, "comment_id": 93282814, "body": "<code>ptr</code> is a pointer, not a <code>string</code>. Either way will just copy the pointer and neither will call a constructor."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1541621846, "post_id": 53197128, "comment_id": 93282847, "body": "You are not printing the copy constructor, you are printing the main constructor.  Most likely a dupe of: <a href=\"https://stackoverflow.com/questions/12953127/what-are-copy-elision-and-return-value-optimization\" title=\"what are copy elision and return value optimization\">stackoverflow.com/questions/12953127/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1541621926, "post_id": 53197128, "comment_id": 93282885, "body": "&quot;... found some info about elision. Is it somehow possible to prevent it&quot; - Why would you want that? Eliding the copy or move is always going to be faster than doing either of the former, and if your copy/move constructors/assignment operators are correct then the end result will be the same. Elision is a <i>good</i> thing."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 2, "creation_date": 1541622455, "post_id": 53197128, "comment_id": 93283107, "body": "First constructor is not a copy constructor. Your class does not have a copy constructor at all."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1541624280, "post_id": 53197128, "comment_id": 93283965, "body": "All that manual memory management is really not needed in modern C++ an you should not do it."}], "answers": [{"comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1541623777, "post_id": 53197315, "comment_id": 93283701, "body": "As far as I can tell, rule of 3/5/0 is <i>not</i> violated in the example. Destructor, move assignment and move constructor are implemented - rule of 3 (for non-copyable classes)."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 3, "last_activity_date": 1541626118, "last_edit_date": 1541626118, "creation_date": 1541622433, "answer_id": 53197315, "question_id": 53197128, "link": "https://stackoverflow.com/questions/53197128/copy-constructor-is-called-instead-of-move-constructor-why/53197315#53197315", "title": "Copy constructor is called instead of move constructor - why?", "body": "<p>So anything with a name is an lvalue.</p>\n\n<p>An rvalue reference with a name is an lvalue.</p>\n\n<p>An rvalue reference will <em>bind</em> to rvalues, but it itself is an lvalue.</p>\n\n<p>So <code>x</code> in <code>ptr(x.ptr)</code> is an rvalue reference, but it has a name, so it is an lvalue.</p>\n\n<p>To treat it as an rvalue, you need to do <code>ptr( std::move(x).ptr )</code>.</p>\n\n<p>Of course, this is mostly useless, as moving a <code>ptr</code> does nothing as <code>ptr</code> is a dumb raw pointer.</p>\n\n<p>You should be following the rule of 0 here.</p>\n\n<pre><code>class Example6 {\n    std::unique_ptr&lt;string&gt; ptr;\n  public:\n    Example6 (string str) : ptr(std::make_unique&lt;string&gt;(std::move(str))) {cout &lt;&lt; \"DONT   MOVE \" &lt;&lt; '\\n';}\n    Example6():Example6(\"\") {}\n    ~Example6 () = default;\n    // move constructor\n    Example6 (Example6&amp;&amp; x) = default;\n    // move assignment\n    Example6&amp; operator= (Example6&amp;&amp; x) = default;\n    // access content:\n    const string&amp; content() const {\n       if (!ptr) *this=Example6{};\n       return *ptr;\n    }\n    // addition:\n    Example6 operator+(const Example6&amp; rhs) {\n      return Example6(content()+rhs.content());\n    }\n};\n</code></pre>\n\n<p>because business logic and lifetime management don't belong intermixed in the same class.</p>\n\n<p>While we are at it:</p>\n\n<pre><code>    // addition:\n    Example6&amp; operator+=(const Example6&amp; rhs) &amp; {\n      if (!ptr) *this = Example6{};\n      *ptr += rhs.content();\n      return *this;\n    }\n    // addition:\n    friend Example6 operator+(Example6 lhs, const Example6&amp; rhs) {\n      lhs += rhs;\n      return lhs;\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1541636503, "post_id": 53197319, "comment_id": 93288201, "body": "&quot;<i>There should never be owning bare pointers in C++.</i>&quot; Are you saying that you shouldn&#39;t ever write a smart pointer class? It seems slightly over the top."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 1, "creation_date": 1541637243, "post_id": 53197319, "comment_id": 93288375, "body": "@curiousguy You&#39;re correct. I&#39;ve simplified my advice for the audience of this answer/question - beginners. Given the smart pointers offered by the standard library, there is quite rarely need to implement more, and when there is, you might be able to build them upon those existing structures."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1541623846, "last_edit_date": 1592644375, "creation_date": 1541622444, "answer_id": 53197319, "question_id": 53197128, "link": "https://stackoverflow.com/questions/53197128/copy-constructor-is-called-instead-of-move-constructor-why/53197319#53197319", "title": "Copy constructor is called instead of move constructor - why?", "body": "<blockquote>\n<p>Copy constructor is called ... - why?</p>\n</blockquote>\n<p>The premise of your question is faulty: The copy constructor is not called. In fact, the class is not copyable.</p>\n<p>The first constructor is a converting constructor from <code>std::string</code>. The converting constructor is called because <code>Example6</code> objects are initialised with a string argument. Once in each of these expressions:</p>\n<ul>\n<li><code>Example6 foo(&quot;Exam&quot;)</code></li>\n<li><code>Example6(&quot;ple&quot;)</code></li>\n<li><code>Example6(content() + rhs.content()</code></li>\n</ul>\n<blockquote>\n<p>... instead of move constructor</p>\n</blockquote>\n<p>There are a few copy-initialisations by move in the program. However, all of them can be elided by the compiler.</p>\n<blockquote>\n<p>Is it somehow possible to prevent it and always call move constructor?</p>\n</blockquote>\n<p>There are a few mistakes that can prevent copy elision. For example, if you wrote the addition operator like this:</p>\n<pre><code>return std::move(Example6(content()+rhs.content()));\n</code></pre>\n<p>The compiler would fail to elide the move and probably tell you about it if you're lucky:</p>\n<blockquote>\n<pre><code>warning: moving a temporary object prevents copy elision\n</code></pre>\n</blockquote>\n<hr />\n<blockquote>\n<p>Shouldn't it call</p>\n<pre><code>ptr(move(x.ptr))\n</code></pre>\n<p>instead of just</p>\n<pre><code>ptr(x.ptr)\n</code></pre>\n</blockquote>\n<p>There's no need. Moving a pointer is exactly the same as copying a pointer. Same holds for all fundamental types.</p>\n<blockquote>\n<p>The way I understand this, if we use the second option, then we are calling copy constructor of string, instead of move</p>\n</blockquote>\n<p><code>ptr</code> is not a string. It is a pointer to a string. Copying a pointer does nothing to the pointed object.</p>\n<hr />\n<p>PS. The example program is quite bad quality. There should never be owning bare pointers in C++.</p>\n"}, {"comments": [{"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1541637185, "post_id": 53197734, "comment_id": 93288362, "body": "&quot;<i>Because copy ctor parameter have to be const</i>&quot; No, technically it doesn&#39;t have to. But the <b>normal</b> copy constructor semantic implies that the value or the state of the source isn&#39;t changed and good const-safety practice means that such parameters that shouldn&#39;t be modified by a function <i>should be</i> made const. So the copy constructor <i>should usually have</i> a const parameter. But it isn&#39;t a &quot;shall&quot; by language definition, and <code>Example6(Example6&amp;)</code> is a <b>legal</b> copy constructor, but one that raises questions. Why non const? Why change the source?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1541638035, "post_id": 53197734, "comment_id": 93288569, "body": "As an example of such class with non-const copy constructor is the deprecated <code>std::auto_ptr</code> (which is not a great design)."}], "tags": [], "owner": {"reputation": 400, "user_id": 8500049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ed9fd618fc5fc89e9f9795aa143e6b2?s=128&d=identicon&r=PG&f=1", "display_name": "User8500049", "link": "https://stackoverflow.com/users/8500049/user8500049"}, "is_accepted": false, "score": 0, "last_activity_date": 1541624431, "creation_date": 1541624431, "answer_id": 53197734, "question_id": 53197128, "link": "https://stackoverflow.com/questions/53197128/copy-constructor-is-called-instead-of-move-constructor-why/53197734#53197734", "title": "Copy constructor is called instead of move constructor - why?", "body": "<p>I can say your class does not have a copy constructor.\nBecause copy ctor parameter have to be const and reference  </p>\n\n<pre><code>class Example6{ \npublic:\n    Example6(const Example6 &amp;r);\n};\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 9742123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc8ce6b27586dfc25f85bf06f2284cdf?s=128&d=identicon&r=PG&f=1", "display_name": "Bluerain", "link": "https://stackoverflow.com/users/9742123/bluerain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1028, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1541626118, "creation_date": 1541621613, "last_edit_date": 1541622264, "question_id": 53197128, "link": "https://stackoverflow.com/questions/53197128/copy-constructor-is-called-instead-of-move-constructor-why", "title": "Copy constructor is called instead of move constructor - why?", "body": "<p>I have this code, taken from here by the way <a href=\"http://www.cplusplus.com/doc/tutorial/classes2/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/doc/tutorial/classes2/</a></p>\n\n<pre><code>// move constructor/assignment\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;utility&gt;\nusing namespace std;\n\nclass Example6\n{\n    string* ptr;\npublic:\n    Example6(const string&amp; str) :\n            ptr(new string(str))\n    {\n        cout &lt;&lt; \"DONT   MOVE \" &lt;&lt; '\\n';\n    }\n    ~Example6()\n    {\n        delete ptr;\n    }\n// move constructor\n    Example6(Example6&amp;&amp; x) :\n            ptr(x.ptr)\n    {\n        cout &lt;&lt; \"MOVE \" &lt;&lt; '\\n';\n        x.ptr = nullptr;\n    }\n// move assignment\n    Example6&amp; operator=(Example6&amp;&amp; x)\n    {\n        delete ptr;\n        ptr = x.ptr;\n        x.ptr = nullptr;\n        return *this;\n    }\n// access content:\n    const string&amp; content() const\n    {\n        return *ptr;\n    }\n// addition:\n    Example6 operator+(const Example6&amp; rhs)\n    {\n        return Example6(content() + rhs.content());\n    }\n};\n\nint main()\n{\n    Example6 foo(\"Exam\");\n    Example6 bar = Example6(\"ple\"); // move-construction\n\n    foo = foo + bar; // move-assignment\n\n    cout &lt;&lt; \"foo's content: \" &lt;&lt; foo.content() &lt;&lt; '\\n';\n    return 0;\n}\n</code></pre>\n\n<p>I only added output in constructor to see which is being called. To my surprise it is always the first one, copy constructor. Why does it happen? I did some research and found some info about elision. Is it somehow possible to prevent it and always call move constructor?</p>\n\n<p>Also, as a side note, as I said this code is from cplusplus.com. However, I read about move semantics in some other places and I wonder if this move constructor here is done right. Shouldn't it call</p>\n\n<pre><code>  ptr(move(x.ptr))\n</code></pre>\n\n<p>instead of just </p>\n\n<pre><code>ptr(x.ptr)\n</code></pre>\n\n<p>The way I understand this, if we use the second option, then we are calling copy constructor of string, instead of move, because x is rvalue reference that has a name, so it is really lvalue and we need to use move to cast it to be rvalue. Do i miss something, or is it really tutorial's mistake?\nBtw, adding move doesn't solve my first problem.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1541621418, "post_id": 53197069, "comment_id": 93282641, "body": "The code as written attempts to read from <code>InputStream</code> and assign something to <code>&quot;,&quot;</code> which is <code>const</code> and can&#39;t be assigned to."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1541621533, "post_id": 53197069, "comment_id": 93282708, "body": "&quot;And yes I did&quot; but what you did not is to provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1541621644, "post_id": 53197069, "comment_id": 93282762, "body": "&quot;And yes I did&quot; -- okay, but I didn&#39;t. If you want people to help you, provide code that shows the problem. I won&#39;t cut and paste to create something that might or might not be what you tried. You know what you did; post it."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 1, "creation_date": 1541621690, "post_id": 53197069, "comment_id": 93282785, "body": "<a href=\"https://stackoverflow.com/questions/11374617/the-easiest-way-to-read-formatted-input-in-c\" title=\"the easiest way to read formatted input in c\">stackoverflow.com/questions/11374617/&hellip;</a>"}, {"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 0, "creation_date": 1541621700, "post_id": 53197069, "comment_id": 93282788, "body": "What do you want <code>InputStream &gt;&gt; &quot;,&quot;</code> to do? If that worked, it would assign a new value to the constant <code>&quot;,&quot;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1541621698, "creation_date": 1541621698, "answer_id": 53197145, "question_id": 53197069, "link": "https://stackoverflow.com/questions/53197069/c-issue-with-overloading-operator/53197145#53197145", "title": "(C++) Issue with overloading &quot;&gt;&gt;&quot; operator", "body": "<p>In the line</p>\n\n<pre><code>InputStream &gt;&gt; rhs.mNumber &gt;&gt; \",\" &gt;&gt; rhs.mLenght &gt;&gt; \",\" &gt;&gt; rhs.mName;\n</code></pre>\n\n<p>the <code>\",\"</code> parts are wrong. You can't read anything into a string literal.</p>\n\n<p>If you expect to see the token <code>,</code> in the input stream, you may use:</p>\n\n<pre><code>char dummy;\nInputStream &gt;&gt; rhs.mNumber &gt;&gt; dummy &gt;&gt; rhs.mLenght &gt;&gt; dummy &gt;&gt; rhs.mName;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10600465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/180341191a4ad8b829e056b99ac0f52e?s=128&d=identicon&r=PG&f=1", "display_name": "E. \u0110ordan", "link": "https://stackoverflow.com/users/10600465/e-%c4%90ordan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "closed_date": 1541690828, "accepted_answer_id": 53197145, "answer_count": 1, "score": 0, "last_activity_date": 1541621698, "creation_date": 1541621339, "last_edit_date": 1541621661, "question_id": 53197069, "link": "https://stackoverflow.com/questions/53197069/c-issue-with-overloading-operator", "closed_reason": "Not suitable for this site", "title": "(C++) Issue with overloading &quot;&gt;&gt;&quot; operator", "body": "<p>Once I try to compile and run program, visual shows this error.</p>\n\n<blockquote>\n  <p>Error 1   error C2679: binary '>>' : no operator found which takes a right-hand operand of type 'const char [2]' (or there is no acceptable conversion)</p>\n</blockquote>\n\n<p>Overload function:</p>\n\n<pre><code>istream&amp; operator&gt;&gt; (istream&amp; InputStream, Description&amp; rhs) {\nInputStream &gt;&gt; rhs.mNumber &gt;&gt; \",\" &gt;&gt; rhs.mLenght &gt;&gt; \",\" &gt;&gt; rhs.mName;\n\nreturn InputStream;\n}\n</code></pre>\n\n<p>Class Description defintion:</p>\n\n<pre><code>class Description {\nprivate:\n    int mNumber;\n    int mLenght;\n    string mName;\npublic:\n    Description();\n    Description(int, int, string);\n    Description&amp; operator= (const Description&amp;);\n    friend ostream&amp; operator&lt;&lt; (ostream&amp;, Description&amp;);\n    friend istream&amp; operator&gt;&gt; (istream&amp;, Description&amp;);\n};\n</code></pre>\n\n<p>And yes I did:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;istream&gt;\n</code></pre>\n"}, {"tags": ["c++", "c", "linux"], "comments": [{"owner": {"reputation": 5557, "user_id": 821995, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c6b1634f2193887994408ae8d024f52f?s=128&d=identicon&r=PG", "display_name": "F.X.", "link": "https://stackoverflow.com/users/821995/f-x"}, "edited": false, "score": 5, "creation_date": 1541621039, "post_id": 53196962, "comment_id": 93282458, "body": "Can you look at the output of <code>gcc -E</code> (right after preprocessor)? It might give you a hint as to what goes wrong."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 4, "creation_date": 1541621118, "post_id": 53196962, "comment_id": 93282498, "body": "Is it just the name <code>si_value</code>? Smells like a macro is getting substituted into your code. What about something like <code>si_vy1ghad563nvy43wd</code>?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1541621170, "post_id": 53196962, "comment_id": 93282531, "body": "it&#39;s not possible that <code>si_</code> prefix is interpreted. <code>si_value</code>, that&#39;s another story."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 2, "creation_date": 1541621263, "post_id": 53196962, "comment_id": 93282573, "body": "It is time to use some IDE which immediately highlights <code>si_value</code> as a macro and allows to jump to definition point..."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 4, "creation_date": 1541621322, "post_id": 53196962, "comment_id": 93282599, "body": "@alterigel sorry, <code>si_vy1ghad563nvy43wd</code> is also a reserved keyword."}, {"owner": {"reputation": 494, "user_id": 2430526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rELuN.jpg?s=128&g=1", "display_name": "SRG", "link": "https://stackoverflow.com/users/2430526/srg"}, "reply_to_user": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1541621510, "post_id": 53196962, "comment_id": 93282693, "body": "I forgot to mention that using other names with the <code>si</code> prefix work, for some reason. For instance, <code>si_addr</code> also reproduces the error, but as @alterigel has pointed out, <code>si_addr2</code> or even <code>si_value2</code> doesn&#39;t."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1541621593, "post_id": 53196962, "comment_id": 93282731, "body": "@Jean-Fran&#231;oisFabre <i>sorry, <code>si_vy1ghad563nvy43wd</code> is also a reserved keyword</i>  Where is that a reserved keyword?  If it exists, I can&#39;t find that in POSIX nor the C standard.  Offhand, I don&#39;t even see how <code>si_value</code> fits into the POSIX &quot;functions and external identifiers&quot; reservation of identifiers."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1541621609, "post_id": 53196962, "comment_id": 93282740, "body": "so the title of your question is misleading. It&#39;s like saying that using variable names starting with <code>i</code> doesn&#39;t work when you only tried <code>int</code>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 3, "creation_date": 1541621636, "post_id": 53196962, "comment_id": 93282758, "body": "@AndrewHenle okay this was a joke."}, {"owner": {"reputation": 494, "user_id": 2430526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rELuN.jpg?s=128&g=1", "display_name": "SRG", "link": "https://stackoverflow.com/users/2430526/srg"}, "reply_to_user": {"reputation": 5557, "user_id": 821995, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c6b1634f2193887994408ae8d024f52f?s=128&d=identicon&r=PG", "display_name": "F.X.", "link": "https://stackoverflow.com/users/821995/f-x"}, "edited": false, "score": 1, "creation_date": 1541621966, "post_id": 53196962, "comment_id": 93282897, "body": "@F.X. Thank you very much for the suggestion! I actually get <code>_sifields._rt.si_sigval</code> where my <code>si_value</code> variable should be. That explains the <code>expected expression before \u2018.\u2019 token</code> error."}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 3, "creation_date": 1541627328, "post_id": 53196962, "comment_id": 93285297, "body": "<a href=\"https://code.woboq.org/userspace/glibc/sysdeps/unix/sysv/linux/bits/types/siginfo_t.h.html#135\" rel=\"nofollow noreferrer\">#define si_value        _sifields._rt.si_sigval</a>"}, {"owner": {"reputation": 494, "user_id": 2430526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rELuN.jpg?s=128&g=1", "display_name": "SRG", "link": "https://stackoverflow.com/users/2430526/srg"}, "reply_to_user": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1541627670, "post_id": 53196962, "comment_id": 93285454, "body": "Good catch, @MarkPlotnick!"}, {"owner": {"reputation": 15290, "user_id": 1913824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7793dc1a1117c0583651f716630e2403?s=128&d=identicon&r=PG", "display_name": "Andrea Corbellini", "link": "https://stackoverflow.com/users/1913824/andrea-corbellini"}, "edited": false, "score": 1, "creation_date": 1541630510, "post_id": 53196962, "comment_id": 93286531, "body": "When you see an error in C that doesn&#39;t make sense, there&#39;s a macro hidden somewhere :)"}], "answers": [{"comments": [{"owner": {"reputation": 362978, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1541621409, "post_id": 53197025, "comment_id": 93282637, "body": "Where does it say that <code>si_value</code> is a reserved name? All I see is references to a field of that name in the <code>siginfo_t</code> structure, but that&#39;s not at all the same thing?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 362978, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1541621477, "post_id": 53197025, "comment_id": 93282674, "body": "@unwind, the prefix <code>si_</code> is reserved when using <code>&lt;signal.h&gt;</code>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 362978, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1541621496, "post_id": 53197025, "comment_id": 93282680, "body": "@unwind  2.2.2 The namespace"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1541621556, "post_id": 53197025, "comment_id": 93282717, "body": "how can a <i>prefix</i> be reserved?"}, {"owner": {"reputation": 362978, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1541621641, "post_id": 53197025, "comment_id": 93282760, "body": "@RSahu Ah, okay. That was extremely hard to figure out from that page. Thanks."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 4, "creation_date": 1541621667, "post_id": 53197025, "comment_id": 93282778, "body": "@Jean-Fran&#231;oisFabre Probably in the same manner they&#39;ve reserved a <code>_t</code> suffix"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1541621710, "post_id": 53197025, "comment_id": 93282794, "body": "okay, just avoid this naming or there <i>could</i> be collisions. Or always code in german."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1541621913, "post_id": 53197025, "comment_id": 93282875, "body": "@Jean-Fran&#231;oisFabre -- it&#39;s reserved because POSIX <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html\" rel=\"nofollow noreferrer\">says it is</a> (search for si_)."}, {"owner": {"reputation": 494, "user_id": 2430526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rELuN.jpg?s=128&g=1", "display_name": "SRG", "link": "https://stackoverflow.com/users/2430526/srg"}, "edited": false, "score": 0, "creation_date": 1541622631, "post_id": 53197025, "comment_id": 93283183, "body": "Thank you for the answer, @baummitaugen! I&#39;m sorry for not marking yours as the answer for my question, do not take it personal. I just found the answer by @barmar more self-explanatory for future visitors (but, once again, thank you very much for the help)."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 494, "user_id": 2430526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rELuN.jpg?s=128&g=1", "display_name": "SRG", "link": "https://stackoverflow.com/users/2430526/srg"}, "edited": false, "score": 4, "creation_date": 1541628254, "post_id": 53197025, "comment_id": 93285705, "body": "@SRG No worries; your vote, your judgement, that&#39;s by design."}], "tags": [], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": false, "score": 12, "last_activity_date": 1541621160, "creation_date": 1541621160, "answer_id": 53197025, "question_id": 53196962, "link": "https://stackoverflow.com/questions/53196962/why-does-signal-h-prevent-the-use-of-si-as-prefix-for-the-name-of-some-vari/53197025#53197025", "title": "Why does &lt;signal.h&gt; prevent the use of &quot;si_&quot; as prefix for the name of some variables?", "body": "<blockquote>\n  <p>how could I elegantly avoid this type of issues in the future?</p>\n</blockquote>\n\n<p>You check some <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html\" rel=\"noreferrer\">documentation</a> for the headers you are using and avoid the names that are documented as reserved.</p>\n"}, {"comments": [{"owner": {"reputation": 494, "user_id": 2430526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rELuN.jpg?s=128&g=1", "display_name": "SRG", "link": "https://stackoverflow.com/users/2430526/srg"}, "edited": false, "score": 0, "creation_date": 1541622458, "post_id": 53197207, "comment_id": 93283111, "body": "Thank you Barmar, this answer is exactly what I was looking for!"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 1, "creation_date": 1541623824, "post_id": 53197207, "comment_id": 93283733, "body": "Aren&#39;t identifiers starting with &#39;__&#39; reserved for the implementation? Can&#39;t it use that instead? Or is that something else?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 4, "creation_date": 1541624125, "post_id": 53197207, "comment_id": 93283882, "body": "I think this is actually a POSIX thing, while <code>__</code> is a C thing. So POSIX is trying to avoid names that are reserved to the C implementation."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 1, "creation_date": 1541624219, "post_id": 53197207, "comment_id": 93283934, "body": "But isn&#39;t <code>signal.h</code> a standard header?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1541624333, "post_id": 53197207, "comment_id": 93283984, "body": "It may also be a backward compatibility issue -- <code>signal.h</code> had already been using lots of <code>si_</code> names. Rather than list all these existing names as reserved, it just made the whole prefix reserved."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1541624499, "post_id": 53197207, "comment_id": 93284046, "body": "C11 reserves names starting <code>SIG</code> followed by a capital letter, or <code>SIG_</code> followed by a capital letter (C11 <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.14p4\" rel=\"nofollow noreferrer\">&#167;7.14 Signal handling <code>&lt;signal.h&gt;</code></a>). POSIX reserves a lot more symbol prefixes when <code>&lt;signal.h&gt;</code> is included \u2014 <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_02_02\" rel=\"nofollow noreferrer\">&#167;2.2.2 The Name Space</a>. The C standard reserves leading <code>__</code> for use by the implementation (C11 <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.1.3\" rel=\"nofollow noreferrer\">&#167;7.1.3 Reserved identifiers</a>). Read and take care to avoid conflicts. Or fix &#39;em when they arise."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 2, "creation_date": 1541624676, "post_id": 53197207, "comment_id": 93284136, "body": "@Kevin: The <code>&lt;signal.h&gt;</code> header is both a standard C header and a standard POSIX header.  Since you didn&#39;t specify <code>-std=c11</code> or similar when you invoked GCC, it enabled all the GNU extensions, which includes the POSIX functions and symbols.  If you specified <code>-std=c11</code>, you might need to write <code>-D_XOPEN_SOURCE=700</code> on the compiler command line, or a similar <code>#define</code> in a header or your code (I recommend doing it in a header, having used it in code once upon a decade ago, and having spent a fair amount of time undoing it since then)."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1541624804, "post_id": 53197207, "comment_id": 93284204, "body": "I never ran GCC for this :). Just curious and asking questions that have now been answered. +1&#39;d the answer."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1541629121, "post_id": 53197207, "comment_id": 93286020, "body": "I am still not sure if the Linux header is compliant! The <code>si_value</code> is not reserved as a macro as such. There&#39;s a <i>separate</i> list of macro prefixes."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1541636813, "post_id": 53197207, "comment_id": 93288281, "body": "@JonathanLeffler: GCC <i>always</i> enables not just POSIX, but full <code>_GNU_SOURCE</code> extensions, when compiling C++. This is a known bug that&#39;s a major pain for them to fix..."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1541638052, "post_id": 53197207, "comment_id": 93288573, "body": "@AnttiHaapala: In &#39;The Name Space&#39; section (previously linked), POSIX says: <i>Applications shall not declare or define identifiers with the same name as an identifier reserved in the same context. Since macro names are replaced whenever found, independent of scope and name space, macro names matching any of the reserved identifier names shall not be defined by an application if any associated header is included.</i>  Since <code>si_value</code> uses one of the reserved prefixes (<code>si_</code>), the header is allowed (by POSIX) to define a macro for <code>si_value</code>.  Does that explain enough?"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 24, "last_activity_date": 1541624767, "last_edit_date": 1541624767, "creation_date": 1541622020, "answer_id": 53197207, "question_id": 53196962, "link": "https://stackoverflow.com/questions/53196962/why-does-signal-h-prevent-the-use-of-si-as-prefix-for-the-name-of-some-vari/53197207#53197207", "title": "Why does &lt;signal.h&gt; prevent the use of &quot;si_&quot; as prefix for the name of some variables?", "body": "<p><code>&lt;signal.h&gt;</code> doesn't actually prevent using <code>si_</code> as a prefix on your variables. However, the POSIX specification states that this prefix is reserved, in order to allow the header and the library functions that it declares to use these names, without having to worry that they'll conflict with your own variables.</p>\n\n<p>So what's happening here is that <code>si_value</code> is defined in some way in the header file, perhaps as a macro or typedef, and your attempt to use the same name conflicts with this. If you used <code>si_vy1ghad563nvy43wd</code> it probably would work, but theoretically the header could use that name (thinking that it would be unlikely to conflict with anything an application programmer would use).</p>\n\n<p>C doesn't have real namespaces, so naming conventions like this are used as a simple substitute.</p>\n"}], "owner": {"reputation": 494, "user_id": 2430526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rELuN.jpg?s=128&g=1", "display_name": "SRG", "link": "https://stackoverflow.com/users/2430526/srg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1473, "favorite_count": 2, "accepted_answer_id": 53197207, "answer_count": 2, "score": 25, "last_activity_date": 1541628628, "creation_date": 1541620918, "last_edit_date": 1541628628, "question_id": 53196962, "link": "https://stackoverflow.com/questions/53196962/why-does-signal-h-prevent-the-use-of-si-as-prefix-for-the-name-of-some-vari", "title": "Why does &lt;signal.h&gt; prevent the use of &quot;si_&quot; as prefix for the name of some variables?", "body": "<p>I have been debugging a strange compilation error that I was getting inside my code, and I ended up finding out that I cannot use the prefix <code>si_</code> for some variable names (of any type) if <code>&lt;signal.h&gt;</code> is included.</p>\n\n<p>Here is a very simple source code example that reproduces the issue:</p>\n\n<pre><code>#include &lt;signal.h&gt;\n\nint main(void)\n{\n    int si_value = 0;\n\n    return 0;\n}\n</code></pre>\n\n<p>If I try to compile this with the GNU C Compiler <code>gcc</code>, I get the following error:</p>\n\n<pre><code>&gt; gcc example.c\nIn file included from /usr/include/signal.h:57:0,\n                 from example.c:2:\nexample.c: In function \u2018main\u2019:\nexample.c:6:9: error: expected \u2018=\u2019, \u2018,\u2019, \u2018;\u2019, \u2018asm\u2019 or \u2018__attribute__\u2019 before \u2018.\u2019 token\n     int si_value = 0;\n         ^\nexample.c:6:9: error: expected expression before \u2018.\u2019 token\n</code></pre>\n\n<p>Nonetheless, if I use another name such as <code>si_value2</code>, the error doesn't show up. As a reference, I'm using GCC v7.3.0 on Ubuntu Mate 18.04.1 LTS. The same problem is observed with <code>g++</code>.</p>\n\n<p>I suppose that this behaviour is due to some macro definition inside the <code>&lt;signal.h&gt;</code> header, but after going through it briefly, I couldn't seem to find anything really related.</p>\n\n<p>I honestly can fix it by just using another name. However, my concern is: <strong>how could I elegantly avoid this type of issue in the future?</strong></p>\n\n<hr>\n\n<p><strong>Update:</strong> As @F.X. has suggested, using <code>gcc -E example.c</code> shows that the variable name is expanded (hence, the error):</p>\n\n<pre><code>...\n    int \n# 6 \"example.c\" 3 4\n       _sifields._rt.si_sigval \n# 6 \"example.c\"\n                = 0;\n...\n</code></pre>\n"}, {"tags": ["c++", "string", "relational"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 6, "creation_date": 1541620355, "post_id": 53196800, "comment_id": 93282113, "body": "Those are string literals, and the comparison will end up being between <code>const char*</code> which is simply comparing pointer addresses, which is useless for what you&#39;re probably looking for (lexicographical sorting or maybe numerical sorting?)"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1541620447, "post_id": 53196800, "comment_id": 93282170, "body": "std::string values are compared character by character. Imagine replacing characters &#39;0&#39;...&#39;9&#39; with characters &#39;a&#39;...&#39;j&#39;. &quot;bb&quot; &lt; &quot;i&quot; alphabetically, and same with &quot;bac&quot; &lt; &quot;j&quot;."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1541620704, "post_id": 53196800, "comment_id": 93282298, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Details do matter, <code>&quot;11&quot; &gt; &quot;8&quot;</code> is different from <code>string(&quot;11&quot;) &gt; string(&quot;8&quot;)</code>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1541686670, "post_id": 53196800, "comment_id": 93307073, "body": "taking into account the edit, the duplicate isnt a duplicate anymore. reopened the question"}], "answers": [{"comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 6, "creation_date": 1541620549, "post_id": 53196845, "comment_id": 93282225, "body": "Good answer, but it may be worth mentioning/explaining that even if he <b>were</b> comparing <code>std::string</code>&#39;s so that it would compare the string values and not the addresses, &quot;11&quot; would still evaluate to less than &quot;8&quot;."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1541622155, "post_id": 53196845, "comment_id": 93282964, "body": "No need engage in such blatant ASCIIism here. &lt;g&gt; <code>&#39;1&#39;</code> is required to be less than <code>&#39;8&#39;</code> in <b>every</b> character set supported by C or C++ compilers."}], "tags": [], "owner": {"reputation": 43527, "user_id": 98094, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/VkdLW.jpg?s=128&g=1", "display_name": "Icemanind", "link": "https://stackoverflow.com/users/98094/icemanind"}, "is_accepted": false, "score": 2, "last_activity_date": 1541620850, "last_edit_date": 1541620850, "creation_date": 1541620472, "answer_id": 53196845, "question_id": 53196800, "link": "https://stackoverflow.com/questions/53196800/comparing-strings-using-relational-operators-c/53196845#53196845", "title": "Comparing strings using relational operators C++", "body": "<p>Using relational operators on strings in C/C++ will simply compare the memory addresses of the strings. Obviously <code>\"11\"</code> and <code>\"8\"</code> are occupying 2 different areas of memory, so it could be false, unless the address where <code>\"11\"</code> is stored happens to be stored in an address greater than <code>\"8\"</code>, but it's random.</p>\n\n<p>Keep in mind that you can use <code>string::compare</code>, however, it's comparing the ASCII code's of the strings. Since <code>\"1\"</code> (ASCII Code 49) is less than <code>\"8\"</code> (ASCII Code 56), it will still be false. You need to use <code>stoi</code> to convert the string to an integer, then compare the integers.</p>\n"}], "owner": {"reputation": 31, "user_id": 8116719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/219e9ce2e62ebd458ef4674c20c1f1a9?s=128&d=identicon&r=PG&f=1", "display_name": "Sofia Zen", "link": "https://stackoverflow.com/users/8116719/sofia-zen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541686633, "creation_date": 1541620271, "last_edit_date": 1541621886, "question_id": 53196800, "link": "https://stackoverflow.com/questions/53196800/comparing-strings-using-relational-operators-c", "title": "Comparing strings using relational operators C++", "body": "<p>How come when comparing strings... </p>\n\n<pre><code>string e = \"11\" \nstring f = \"102\" \nstring s = \"8\" \n\n\ne &gt; s - this statement is false \nf &gt; s - and this is also false \n</code></pre>\n\n<p>How come those statements are false? And what are the rules when comparing two strings to each other? </p>\n"}, {"tags": ["c++", "visual-studio-2017", "c++17"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541620169, "post_id": 53196700, "comment_id": 93282017, "body": "Can we get a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?  Unless it is a compiler bug there should only be one instance created."}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541620454, "post_id": 53196700, "comment_id": 93282173, "body": "I suspect it could be bug in the linker (or compiler) yes"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 2, "creation_date": 1541620693, "post_id": 53196700, "comment_id": 93282296, "body": "Doesn&#39;t happen with cl v19.16.26926"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1541623452, "post_id": 53196700, "comment_id": 93283535, "body": "i get only one instance created when using g++ 8.2.1 and clang++ 6.0.1 with <code>-std=c++17</code> too. Surprisingly, I get only one instance in VS17 15.8.8 too :-) I&#39;ll see if I can upgrade to 15.8.9 and test it there."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1541623985, "post_id": 53196700, "comment_id": 93283813, "body": "Just upgraded to 15.8.9 and I stilll only get one instance from the code you&#39;&#39;ve shown."}, {"owner": {"reputation": 11697, "user_id": 114421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/loFOW.jpg?s=128&g=1", "display_name": "Peter Ruderman", "link": "https://stackoverflow.com/users/114421/peter-ruderman"}, "edited": false, "score": 1, "creation_date": 1541623997, "post_id": 53196700, "comment_id": 93283819, "body": "Debug or release build?"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1541624049, "post_id": 53196700, "comment_id": 93283843, "body": "Just commented your answer :-)"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1541624766, "post_id": 53196700, "comment_id": 93284183, "body": "...but I just switched to a clean debug build and still got one instance."}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "reply_to_user": {"reputation": 11697, "user_id": 114421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/loFOW.jpg?s=128&g=1", "display_name": "Peter Ruderman", "link": "https://stackoverflow.com/users/114421/peter-ruderman"}, "edited": false, "score": 0, "creation_date": 1541662383, "post_id": 53196700, "comment_id": 93294491, "body": "@PeterRuderman I only noticed it in debug - as you seem to have found out it appears its not an issue in release."}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1541665777, "post_id": 53196700, "comment_id": 93295923, "body": "@TedLyngmo just to be sure, did you include the code in multiple translation units ?"}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 1, "creation_date": 1541666041, "post_id": 53196700, "comment_id": 93296039, "body": "I found at least one person that seem to have filed the bug MSVC team already: <a href=\"https://developercommunity.visualstudio.com/content/problem/297876/static-inline-variable-gets-destroyed-multiple-tim.html\" rel=\"nofollow noreferrer\">developercommunity.visualstudio.com/content/problem/297876/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1541624032, "post_id": 53197581, "comment_id": 93283834, "body": "Wow ... I went for a release build directly :-)"}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1589551252, "post_id": 53197581, "comment_id": 109347059, "body": "This has been fixed in MSVC 2019. Corresponding closed bug report is <a href=\"https://developercommunity.visualstudio.com/content/problem/185559/debugger-called-twice.html\" rel=\"nofollow noreferrer\">here</a>; I&#39;ve actually checked that I no longer get crashes in my own app, so I can confirm this."}], "tags": [], "owner": {"reputation": 11697, "user_id": 114421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/loFOW.jpg?s=128&g=1", "display_name": "Peter Ruderman", "link": "https://stackoverflow.com/users/114421/peter-ruderman"}, "is_accepted": true, "score": 7, "last_activity_date": 1541624034, "last_edit_date": 1541624034, "creation_date": 1541623717, "answer_id": 53197581, "question_id": 53196700, "link": "https://stackoverflow.com/questions/53196700/inline-variable-is-initialized-more-than-once/53197581#53197581", "title": "inline variable is initialized more than once", "body": "<p>This appears to be an MSVC bug.  I'm able to reproduce it with the code below (also with VS2017 15.8.9).  Interestingly, I can only reproduce with a Debug build.  In Release mode, the optimizer seems to save us.</p>\n\n<p><strong>Common.h</strong></p>\n\n<pre><code>#pragma once\n\n#include &lt;iostream&gt;\n\nclass Foo\n{\npublic:\n  Foo()\n  {\n    std::cout &lt;&lt; \"Constructing a Foo\" &lt;&lt; std::endl;\n  }\n\n  ~Foo()\n  {\n    std::cout &lt;&lt; \"Destructing a Foo\" &lt;&lt; std::endl;\n  }\n};\n\ninline Foo const Bar;\n</code></pre>\n\n<p><strong>other.cpp</strong></p>\n\n<pre><code>#include \"common.h\"\n\nvoid DoOtherStuff()\n{\n  std::cout &lt;&lt; &amp;Bar &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include \"common.h\"\n\nvoid DoStuff()\n{\n  std::cout &lt;&lt; &amp;Bar &lt;&lt; std::endl;\n}\n\nextern void DoOtherStuff();\n\nint main()\n{\n  DoStuff();\n  DoOtherStuff();\n}\n</code></pre>\n\n<p><strong>Output (Debug)</strong></p>\n\n<pre><code>Constructing a Foo\nConstructing a Foo\n00007FF74FD50170\n00007FF74FD50170\nDestructing a Foo\nDestructing a Foo\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1545035776, "post_id": 53803247, "comment_id": 94471119, "body": "Indeed - it&#39;s a very big issue with using the feature at all. You may upvote the bug report here <a href=\"https://developercommunity.visualstudio.com/content/problem/297876/static-inline-variable-gets-destroyed-multiple-tim.html\" rel=\"nofollow noreferrer\">developercommunity.visualstudio.com/content/problem/297876/&hellip;</a>"}], "tags": [], "owner": {"reputation": 311, "user_id": 1958486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0136796fedf2f84f512585a846830232?s=128&d=identicon&r=PG", "display_name": "user1958486", "link": "https://stackoverflow.com/users/1958486/user1958486"}, "is_accepted": false, "score": 4, "last_activity_date": 1544991590, "last_edit_date": 1544991590, "creation_date": 1544971475, "answer_id": 53803247, "question_id": 53196700, "link": "https://stackoverflow.com/questions/53196700/inline-variable-is-initialized-more-than-once/53803247#53803247", "title": "inline variable is initialized more than once", "body": "<p>I get the bug in both debug and release (/Ox) mode using the MS C++ compiler version 19.16 (comes with, e.g., Visual Studio 15.9.4).  </p>\n\n<p><strong>Inline.Hpp</strong>  </p>\n\n<pre><code>#include &lt;iostream&gt;  \ninline struct Foo  \n{ Foo() { std::cout &lt;&lt; \"Constructing a Foo at \" &lt;&lt; this &lt;&lt; std::endl; } }  \nInstance;  \n</code></pre>\n\n<p><strong>Inline.cpp</strong>  </p>\n\n<pre><code>#include \"Inline.Hpp\"  \nint main() { return 0; }  \n</code></pre>\n\n<p><strong>Inline2.cpp</strong>  </p>\n\n<pre><code>#include \"Inline.Hpp\"    \n</code></pre>\n\n<p>After compiling and linking inline.cpp and inline2.cpp, the output on running is:  </p>\n\n<pre><code>Constructing a Foo at 00BE4028  \nConstructing a Foo at 00BE4028  \n</code></pre>\n\n<p>The compiler and linker correctly resolve the two inline definitions to a single object, but incorrectly call the constructor for each definition, instead of just once. This is a serious bug which renders the \"inline variable\" feature of C++17 unusable.  The \"workaround\" is to regard inline variables as still unsupported by MS C++ as of version 19.16, even when the /std:c++17 switch is used. </p>\n"}, {"comments": [{"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 1, "creation_date": 1591776120, "post_id": 62297278, "comment_id": 110180914, "body": "That is great news"}, {"owner": {"reputation": 453, "user_id": 9223029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5ba5d93605086ed6d347ff62771d128?s=128&d=identicon&r=PG&f=1", "display_name": "Lion King", "link": "https://stackoverflow.com/users/9223029/lion-king"}, "reply_to_user": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1591791591, "post_id": 62297278, "comment_id": 110189301, "body": "Maybe it would be good that you edit the first post so that people know they can fix this issue by updating."}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1592387147, "post_id": 62297278, "comment_id": 110404714, "body": "when we update, we seem to now get linker error instead with multiple symbols ? it that how it is supposed to be fixed because then its not so nice.. ?"}, {"owner": {"reputation": 453, "user_id": 9223029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5ba5d93605086ed6d347ff62771d128?s=128&d=identicon&r=PG&f=1", "display_name": "Lion King", "link": "https://stackoverflow.com/users/9223029/lion-king"}, "reply_to_user": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1592475378, "post_id": 62297278, "comment_id": 110441253, "body": "Are you sure you don&#39;t have redefinition or something?"}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 1, "creation_date": 1592478021, "post_id": 62297278, "comment_id": 110442640, "body": "We are investigating the issue still (it does not have a high priority yet), will update once we know more."}], "tags": [], "owner": {"reputation": 453, "user_id": 9223029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5ba5d93605086ed6d347ff62771d128?s=128&d=identicon&r=PG&f=1", "display_name": "Lion King", "link": "https://stackoverflow.com/users/9223029/lion-king"}, "is_accepted": false, "score": 2, "last_activity_date": 1591771047, "creation_date": 1591771047, "answer_id": 62297278, "question_id": 53196700, "link": "https://stackoverflow.com/questions/53196700/inline-variable-is-initialized-more-than-once/62297278#62297278", "title": "inline variable is initialized more than once", "body": "<p>As of today there is an update for visual studio 2017 to version <a href=\"https://docs.microsoft.com/en-us/visualstudio/releasenotes/vs2017-relnotes#15.9.24\" rel=\"nofollow noreferrer\">15.9.24</a> which fixes the problem.</p>\n\n<p>From the release notes:</p>\n\n<blockquote>\n  <p>Fixed C++ compiler bug for proper folding of inline variable dynamic\n  initializers.</p>\n</blockquote>\n"}], "owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 967, "favorite_count": 2, "accepted_answer_id": 53197581, "answer_count": 3, "score": 7, "last_activity_date": 1591771047, "creation_date": 1541619906, "last_edit_date": 1545035874, "question_id": 53196700, "link": "https://stackoverflow.com/questions/53196700/inline-variable-is-initialized-more-than-once", "title": "inline variable is initialized more than once", "body": "<p>Im seeing some examples of <code>inline const</code> variable getting initialized (and destructed) 3 times with visual studio 2017. Is this is a bug with the linker ? or is this supposed to happend in some other way ?</p>\n\n<p>linker Comdat folding is set to Off.</p>\n\n<p>Example Code:</p>\n\n<pre><code>#pragma once\n\nstruct A {\n  A() {\n    static int count = 0;\n    ++count;\n    ASSERT(count == 1);\n  }\n  ~A() {\n  }\n};\n\n\ninline const A a = A();\n</code></pre>\n\n<p>In my solution, I have the assert fire twice (A constructor called 3 times).\nInspecting the call stack shows all call stacks are identical and all calls come from dynamic initializer for a(). Now I know for a fact this class is not used in other parts of the solution since I just created it to investigate this issue.</p>\n\n<p>Im using VS17 15.8.9</p>\n\n<p>Update: Bug report here <a href=\"https://developercommunity.visualstudio.com/content/problem/297876/static-inline-variable-gets-destroyed-multiple-tim.html\" rel=\"nofollow noreferrer\">https://developercommunity.visualstudio.com/content/problem/297876/static-inline-variable-gets-destroyed-multiple-tim.html</a> (you may upvote to help push for the bugfix)</p>\n"}, {"tags": ["c++", "sql", "qt", "qsqlquery"], "comments": [{"owner": {"reputation": 2873, "user_id": 1929959, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/be7c8d8d01d02c41df25100e7f294234?s=128&d=identicon&r=PG", "display_name": "Mihai8", "link": "https://stackoverflow.com/users/1929959/mihai8"}, "edited": false, "score": 0, "creation_date": 1541802264, "post_id": 53196410, "comment_id": 93354851, "body": "After that prepare instruction, in where is use SELECT, you bind parameters? So, you can have two statements like qry.bindValue(&quot;:username&quot;, username); qry..bindValue(&quot;:password&quot;, password); where username and password is two variables for proper values to substitute in SELECT."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 10397677, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kuFeVRh_zJ0/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOsx_mAfcZyeoTblxy7minEkrFAJw/mo/photo.jpg?sz=128", "display_name": "Niko ", "link": "https://stackoverflow.com/users/10397677/niko"}, "edited": false, "score": 1, "creation_date": 1542225343, "post_id": 53234154, "comment_id": 93496300, "body": "when defining field_idx as a SqlQuery.record() type, it returns an error saying &quot;calling &#39;record&#39; with incomplete return type QsqlRecord&quot;?"}, {"owner": {"reputation": 184, "user_id": 9669614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f570f7b3549ece781a2be28062db8212?s=128&d=identicon&r=PG", "display_name": "EzR1d3r", "link": "https://stackoverflow.com/users/9669614/ezr1d3r"}, "reply_to_user": {"reputation": 41, "user_id": 10397677, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kuFeVRh_zJ0/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOsx_mAfcZyeoTblxy7minEkrFAJw/mo/photo.jpg?sz=128", "display_name": "Niko ", "link": "https://stackoverflow.com/users/10397677/niko"}, "edited": false, "score": 2, "creation_date": 1542288154, "post_id": 53234154, "comment_id": 93520866, "body": "Perhaps, you have to #include &lt;QSqlRecord&gt;"}, {"owner": {"reputation": 41, "user_id": 10397677, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kuFeVRh_zJ0/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOsx_mAfcZyeoTblxy7minEkrFAJw/mo/photo.jpg?sz=128", "display_name": "Niko ", "link": "https://stackoverflow.com/users/10397677/niko"}, "edited": false, "score": 0, "creation_date": 1542393584, "post_id": 53234154, "comment_id": 93566077, "body": "That did seem to work however there is one problem. It does not print anything to the console."}], "tags": [], "owner": {"reputation": 184, "user_id": 9669614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f570f7b3549ece781a2be28062db8212?s=128&d=identicon&r=PG", "display_name": "EzR1d3r", "link": "https://stackoverflow.com/users/9669614/ezr1d3r"}, "is_accepted": true, "score": 2, "last_activity_date": 1541803120, "creation_date": 1541803120, "answer_id": 53234154, "question_id": 53196410, "link": "https://stackoverflow.com/questions/53196410/how-to-get-a-column-from-an-sql-table-after-running-query/53234154#53234154", "title": "How to get a column from an sql table after running query", "body": "<p>This is the example with qsqlite. It have to be work.</p>\n\n<pre><code>QSqlDatabase data_base;\ndata_base = QSqlDatabase::addDatabase(\"QSQLITE\", id);\ndata_base.setDatabaseName(data_base_path);\n\nif (data_base.open())\n\n{\n    QString query = \"SELECT name FROM Database.User WHERE username = :username AND password = :password\";\n    QSqlQuery SqlQuery = QSqlQuery( data_base );\n    SqlQuery.exec( query );\n\n    while (SqlQuery.next())\n    {\n        int field_idx   = SqlQuery.record().indexOf(\"name\");\n        QString name = SqlQuery.record().value( field_idx ).toString();\n        qDebug() &lt;&lt; name;\n    };\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 10397677, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kuFeVRh_zJ0/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOsx_mAfcZyeoTblxy7minEkrFAJw/mo/photo.jpg?sz=128", "display_name": "Niko ", "link": "https://stackoverflow.com/users/10397677/niko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 513, "favorite_count": 0, "accepted_answer_id": 53234154, "answer_count": 1, "score": 2, "last_activity_date": 1541803120, "creation_date": 1541618679, "last_edit_date": 1541799884, "question_id": 53196410, "link": "https://stackoverflow.com/questions/53196410/how-to-get-a-column-from-an-sql-table-after-running-query", "title": "How to get a column from an sql table after running query", "body": "<p>i have recently been writing a program for a simple login window as a part of a project i have been working on. I have an SQL database structured as follows:</p>\n\n<pre><code>User:    \n __________________________________________\n| id | name | username | password | status |\n| ___+______+__________+__________+________|\n| 1  | niko | ******** | ******** | admin  |\n| 2  | andy | ******** | ******** | user   |\n ------------------------------------------\n</code></pre>\n\n<p>and a few more columns that go on like that.\nI have prepared an sql query in c++ in QTcreator as follows:</p>\n\n<pre><code>qry.prepare(\"SELECT name FROM Database.User WHERE username = :username AND password = :password\")\n</code></pre>\n\n<p>which ideally is supposed to get either niko or andy or any other name for a given password and username. The only problem is i am not sure how to work with it. I have read the QT documentation multiple times and haven't found any way of obtaining the name as a string. I have tried to print it using:</p>\n\n<pre><code>qDebug&lt;&lt;qry.result()\n</code></pre>\n\n<p>however that only returns \"0x5561eb32d240\" I am not sure on what this is? Qt hasn't documented result() and the only thing i know about the return of result is that it is a const QSql type.</p>\n\n<p>Any ideas on how may i be able to return name as a string for later use?</p>\n"}, {"tags": ["c++", "parsing", "vector"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1541618753, "post_id": 53196324, "comment_id": 93281328, "body": "Re: <code>i &lt; data.size()</code> -- <code>data.size()</code> is 0, so the loop body won&#39;t be run. Do you know the dimensions of the grid?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1541618847, "post_id": 53196324, "comment_id": 93281371, "body": "This doesn&#39;t address the question, but get in the habit of initializing objects with meaningful values instead of creating them with default constructors and immediately changing them. That is, change <code>ifstream myReadFile; myReadFile.open(&quot;input1.txt&#39;);</code> to <code>ifstream myReadFile(&quot;input1.txt&quot;);</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8066106"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1541622141, "post_id": 53196324, "comment_id": 93282956, "body": "@PeteBecker Thanks, im new to c++ ill keep this in mind"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8066106"}, "edited": false, "score": 1, "creation_date": 1541704018, "post_id": 53196708, "comment_id": 93316618, "body": "thank you! i was able to modify your solution to work with text files input by the user."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 0, "last_activity_date": 1541619959, "creation_date": 1541619959, "answer_id": 53196708, "question_id": 53196324, "link": "https://stackoverflow.com/questions/53196324/parsing-ascii-text-file-into-2d-vector-of-chars/53196708#53196708", "title": "Parsing ASCII Text file into 2d Vector of Char&#39;s", "body": "<p>You need to reserve space in the vector before assigning values to it through <code>data[i][c] = currentchar;</code>. But it's probably hard to reserve space before having read the contents.</p>\n\n<p>An easier way would be to use the dynamic growth capabilities of vectors (i.e. <code>push_back</code>), and to use <code>std::string</code> as line content since you can read in complete lines then easily. You can still access/alter the contents then trough <code>data[i][c] = currentchar;</code>. See the following code illustrating this:</p>\n\n<pre><code>#include &lt;sstream&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nint main() {\n\n    const char* fileContent = R\"foo(.........\n.........\n.........\n.........\n....X....\n.........\n.........\n.........\n.........)foo\";\n\n    std::vector&lt;std::string&gt; lines;\n    stringstream ss(fileContent);\n    string line;\n    while (getline(ss,line)) {\n        lines.push_back(line);\n    }\n\n    lines[2][5] = 'Y';\n\n    for (auto line : lines) {\n        for (auto c : line) {\n            cout &lt;&lt; c &lt;&lt; \" \";\n        }\n        cout &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>. . . . . . . . . \n. . . . . . . . . \n. . . . . Y . . . \n. . . . . . . . . \n. . . . X . . . . \n. . . . . . . . . \n. . . . . . . . . \n. . . . . . . . . \n. . . . . . . . . \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1541619998, "creation_date": 1541619998, "answer_id": 53196719, "question_id": 53196324, "link": "https://stackoverflow.com/questions/53196324/parsing-ascii-text-file-into-2d-vector-of-chars/53196719#53196719", "title": "Parsing ASCII Text file into 2d Vector of Char&#39;s", "body": "<p>You may make life easier by using <code>std::getline</code> and <code>std::string</code>:  </p>\n\n<pre><code>std::string row_text;\nstd::vector&lt;std::string&gt; grid;\nwhile (std::getline(myReadFile, row_text))\n{\n  grid.push_back(row_text);\n}\n</code></pre>\n\n<p>The <code>std::string</code> can be accessed using array notation.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8066106"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 53196708, "answer_count": 2, "score": 0, "last_activity_date": 1541619998, "creation_date": 1541618325, "question_id": 53196324, "link": "https://stackoverflow.com/questions/53196324/parsing-ascii-text-file-into-2d-vector-of-chars", "title": "Parsing ASCII Text file into 2d Vector of Char&#39;s", "body": "<p>I need help, im trying to read a file that looks something like this:</p>\n\n<pre><code>.........\n.........\n.........\n.........\n....X....\n.........\n.........\n.........\n.........\n</code></pre>\n\n<p>i need to parse this into a 2d vector of chars so i can make modifications to it later.</p>\n\n<p>What ive come up with so far is </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;sstream&gt;\n//look up line by line parsing\nusing namespace std;\nint main(int argc, char* argv[]) {\n    vector&lt;vector&lt;char&gt;&gt; data;\n    ifstream myReadFile;\n    myReadFile.open(\"input1.txt\");\n\n    for (int i = 0; i &lt; data.size(); i++) {\n        int c = 0;\n        char currentchar;\n\n        while (!myReadFile.eof()) {\n            data[i][c] = currentchar;\n            c++;\n            currentchar = myReadFile.get();\n        }\n    }\n\n    //for ()\n\n\n    myReadFile.close();\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "reference", "namespaces", "undefined"], "comments": [{"owner": {"reputation": 640, "user_id": 3793674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62a5746c9da4b2293984258875ce00e1?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/3793674/chrisd"}, "edited": false, "score": 0, "creation_date": 1541621224, "post_id": 53196319, "comment_id": 93282552, "body": "Would be helpful if you provided header_C.hpp too."}, {"owner": {"reputation": 9, "user_id": 10619832, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DsFq7rlxU8o/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAhxQkJmiPzoJ2TtCPqPlvfLCljgA/mo/photo.jpg?sz=128", "display_name": "Stefano Ferraro", "link": "https://stackoverflow.com/users/10619832/stefano-ferraro"}, "reply_to_user": {"reputation": 640, "user_id": 3793674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62a5746c9da4b2293984258875ce00e1?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/3793674/chrisd"}, "edited": false, "score": 0, "creation_date": 1541625787, "post_id": 53196319, "comment_id": 93284648, "body": "Thank you very much in advance for your partecipation ChrisD :) I added header_C.hpp. I haven&#39;t loaded header_C_i.hpp because is too long and it&#39;s very similar to header_B_i.hpp (if I solve the problem for header_B_i.hpp I also solve it for header_C.hpp and for header_C_i.hpp :) )"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 10619832, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DsFq7rlxU8o/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAhxQkJmiPzoJ2TtCPqPlvfLCljgA/mo/photo.jpg?sz=128", "display_name": "Stefano Ferraro", "link": "https://stackoverflow.com/users/10619832/stefano-ferraro"}, "edited": false, "score": 0, "creation_date": 1541663775, "post_id": 53199203, "comment_id": 93295103, "body": "Thank you very much for your answer @ChrisD. Indeed I don&#39;t have to split the implementation out into separate headers. I did it as exercise to study how  references are connected in different headers :). I&#39;ll try to do as you said. Would that even be possible edit the code to keep different namespaces as I did?"}, {"owner": {"reputation": 640, "user_id": 3793674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62a5746c9da4b2293984258875ce00e1?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/3793674/chrisd"}, "reply_to_user": {"reputation": 9, "user_id": 10619832, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DsFq7rlxU8o/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAhxQkJmiPzoJ2TtCPqPlvfLCljgA/mo/photo.jpg?sz=128", "display_name": "Stefano Ferraro", "link": "https://stackoverflow.com/users/10619832/stefano-ferraro"}, "edited": false, "score": 0, "creation_date": 1541702166, "post_id": 53199203, "comment_id": 93315802, "body": "You need to define the function in the same namespace that you declared it in. If you want to keep the definition of <code>MakeCellYT</code> in the namespace it&#39;s currently in then you can write it as <code>::ns_young_tableau_B::YoungTableau_B::MakeCellYT</code>"}, {"owner": {"reputation": 9, "user_id": 10619832, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DsFq7rlxU8o/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAhxQkJmiPzoJ2TtCPqPlvfLCljgA/mo/photo.jpg?sz=128", "display_name": "Stefano Ferraro", "link": "https://stackoverflow.com/users/10619832/stefano-ferraro"}, "edited": false, "score": 0, "creation_date": 1541707368, "post_id": 53199203, "comment_id": 93318164, "body": "I changed header_i_.hpp files using the same namespace. It works :) Thank you very much :)"}, {"owner": {"reputation": 9, "user_id": 10619832, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DsFq7rlxU8o/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAhxQkJmiPzoJ2TtCPqPlvfLCljgA/mo/photo.jpg?sz=128", "display_name": "Stefano Ferraro", "link": "https://stackoverflow.com/users/10619832/stefano-ferraro"}, "edited": false, "score": 0, "creation_date": 1541868007, "post_id": 53199203, "comment_id": 93367823, "body": "Perfect @ChrisD. Thank you very much :)"}, {"owner": {"reputation": 9, "user_id": 10619832, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DsFq7rlxU8o/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAhxQkJmiPzoJ2TtCPqPlvfLCljgA/mo/photo.jpg?sz=128", "display_name": "Stefano Ferraro", "link": "https://stackoverflow.com/users/10619832/stefano-ferraro"}, "edited": false, "score": 0, "creation_date": 1541870332, "post_id": 53199203, "comment_id": 93368496, "body": "I need your help for another issue that I found in the code. The function YOUNG_TABLEAU.ExtractMinYT(Tableau) is correctly called from Main.cpp. I defined and initialized a couple of Cell_T variables on the top of the function called CurYT2 and Next2. During the debugging I discovered that these variables aren&#39;t created: the debugger jumps directly to  &quot;int MinYT = 0;&quot;  from &quot;ns_young_tableau_A::YoungTableau_A::Cell_T CurYT2;&quot;. Both the variables don&#39;t appear among the local variables and I don&#39;t know which is the mistake. Thank you in advance for any suggestions :)"}, {"owner": {"reputation": 640, "user_id": 3793674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62a5746c9da4b2293984258875ce00e1?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/3793674/chrisd"}, "reply_to_user": {"reputation": 9, "user_id": 10619832, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DsFq7rlxU8o/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAhxQkJmiPzoJ2TtCPqPlvfLCljgA/mo/photo.jpg?sz=128", "display_name": "Stefano Ferraro", "link": "https://stackoverflow.com/users/10619832/stefano-ferraro"}, "edited": false, "score": 0, "creation_date": 1542046771, "post_id": 53199203, "comment_id": 93419873, "body": "Without seeing the code I can only speculate, but two things that could cause these are either the source is out-of-sync with the binary being debugged, or alternatively you aren&#39;t doing anything else with these variables so the compiler has just optimized them out."}, {"owner": {"reputation": 9, "user_id": 10619832, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DsFq7rlxU8o/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAhxQkJmiPzoJ2TtCPqPlvfLCljgA/mo/photo.jpg?sz=128", "display_name": "Stefano Ferraro", "link": "https://stackoverflow.com/users/10619832/stefano-ferraro"}, "edited": false, "score": 0, "creation_date": 1542153094, "post_id": 53199203, "comment_id": 93463978, "body": "How can happen that the source is out-of-sync? It&#39;s strange. I have initialized them and they should appear among the locals. I&#39;d pass you a screenshot of the execution, but I don&#39;t have enough privileges yet :("}], "tags": [], "owner": {"reputation": 640, "user_id": 3793674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62a5746c9da4b2293984258875ce00e1?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/3793674/chrisd"}, "is_accepted": false, "score": 0, "last_activity_date": 1541631629, "creation_date": 1541631629, "answer_id": 53199203, "question_id": 53196319, "link": "https://stackoverflow.com/questions/53196319/c-undefined-reference-to-namespace-visual-studio-code/53199203#53199203", "title": "C++ undefined reference to namespace Visual Studio Code", "body": "<p>For the first error there are a couple of issues. Your class <code>YoungTableau_B</code> is defined in a namespace <code>ns_young_tableau_B</code>, however the implementation of <code>MakeCellYT</code> is defined in a namespace <code>ns_young_tableau_i_B</code>. They should be in the same namespace. Secondly since <code>MakeCellYT</code> is a member function its implementation should be defined as </p>\n\n<pre><code>template&lt;typename T&gt;\nns_young_tableau_A::YoungTableau_A::Cell_T YoungTableau_B::MakeCellYT(T i, T j)\n</code></pre>\n\n<p>(note the addition of <code>YoungTableau_B::</code>)</p>\n\n<p>Once that's fixed you'll encounter an issue where you've called this function with a template parameter <code>int</code> so the line</p>\n\n<pre><code>T Result = {i,j};\n</code></pre>\n\n<p>is attempting to assign an initializer list to an integer which is an error. Possibly you meant <code>Cell_T Result = {i,j};</code></p>\n\n<p>In general I'm not sure you really need to split the implementation out into seperate files, these sorts of errors would be easier to diagnose if you just defined and implemented the class in a single header.</p>\n"}], "owner": {"reputation": 9, "user_id": 10619832, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DsFq7rlxU8o/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAhxQkJmiPzoJ2TtCPqPlvfLCljgA/mo/photo.jpg?sz=128", "display_name": "Stefano Ferraro", "link": "https://stackoverflow.com/users/10619832/stefano-ferraro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1004, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541869506, "creation_date": 1541618303, "last_edit_date": 1541869506, "question_id": 53196319, "link": "https://stackoverflow.com/questions/53196319/c-undefined-reference-to-namespace-visual-studio-code", "title": "C++ undefined reference to namespace Visual Studio Code", "body": "<p>I have an undefined reference issue with the following C++ scripts:</p>\n\n<h2>Main.cpp</h2>\n\n<pre><code>#include\"C:/Users/Steve/Desktop/Project/MyProject_YoungTableau/include/header_A.hpp\"\n#include\"C:/Users/Steve/Desktop/Project/MyProject_YoungTableau/include/header_B.hpp\"\n#include\"C:/Users/Steve/Desktop/Project/MyProject_YoungTableau/include/header_C.hpp\"\n\n#include &lt;iostream&gt;\n#include &lt;limits.h&gt;\n#include &lt;sstream&gt; \n#include &lt;stdbool.h&gt;\n\nusing namespace ns_young_tableau_A;\nusing namespace ns_young_tableau_B;\nusing namespace ns_young_tableau_C;\n\n///MAIN\nint main() {\n\nns_young_tableau_C::YoungTableau_C YOUNG_TABLEAU;\n\n///Tableau size\nns_young_tableau_A::YoungTableau_A::Tableau_T Tableau;\nTableau.m = 4;\nTableau.n = 4;\nTableau.elements = NULL;\n\n\n//'Prova'\n//'---------------------------------------------------------------------------------------------------------'\n\nns_young_tableau_B::YoungTableau_B MCYT;\nns_young_tableau_A::YoungTableau_A::Cell_T CurrentYT; \n\nCurrentYT = MCYT.MakeCellYT(Tableau.m, Tableau.n);\n//'------------------------------------------------------------------------- --------------------------------'\n\n///Initialize elements in the tableau\nint elements[Tableau.m * Tableau.n];\n\n/// # of elements in the tableau\nint ElementSize = sizeof(elements)/sizeof(*elements);\n\n///Initialize tableau\nTableau = {Tableau.m, Tableau.n,elements};\ncout &lt;&lt; \"Tableau!\\n\" &lt;&lt; endl;\n\n\nYOUNG_TABLEAU.InitEmptyTableauYT(Tableau);\n\n\n///Insert elements in the tableau\nYOUNG_TABLEAU.InsertYT(Tableau,9);\nYOUNG_TABLEAU.InsertYT(Tableau,16);\nYOUNG_TABLEAU.InsertYT(Tableau,3);\nYOUNG_TABLEAU.InsertYT(Tableau,2);\nYOUNG_TABLEAU.InsertYT(Tableau,4);\nYOUNG_TABLEAU.InsertYT(Tableau,8);\nYOUNG_TABLEAU.InsertYT(Tableau,5);\nYOUNG_TABLEAU.InsertYT(Tableau,14);\nYOUNG_TABLEAU.InsertYT(Tableau,12);\n\ncout &lt;&lt; \"\\nAfter insert:\" &lt;&lt; endl;\n\n///Inserted elements\nYOUNG_TABLEAU.TableauPrint(Tableau);\n\n///Minimum element extracted from the tableau\ncout &lt;&lt; \"\\n Minimum element in the tableau: \" &lt;&lt;YOUNG_TABLEAU.ExtractMinYT(Tableau) &lt;&lt; endl;\n\n///Square of a number calculating using a constexpr\nint Value = YOUNG_TABLEAU.SquareConstExpr(Tableau.n);\n///Square of a number calculating using template function\nint Value2 = YOUNG_TABLEAU.SquareTemplate(Tableau.n);\n\n//========== ?? Revise resulting indexes ?? ==========\n///Find a specific element in a tableau\nif(YOUNG_TABLEAU.FindYT(Tableau, Value))\n    cout &lt;&lt; \"Value founded icn position (\" &lt;&lt; ns_young_tableau_i_C::c.i &lt;&lt; \n\",\" &lt;&lt; ns_young_tableau_i_C::c.j &lt;&lt; \")\" &lt;&lt; endl;\n\nint ArrayElements[16] = {9,16,3,2,4,8,5,14,12,1,17,13,6,9,15,26};\n\n///Sorted elements in the tableau\nYOUNG_TABLEAU.SortYT(ArrayElements,Tableau.m);\n\ncout &lt;&lt; \"\\nSorted Elements:\\n\" &lt;&lt; endl;\n\n///Print sorted elements in the tableau\nfor(int i = 0; i &lt; Tableau.m * Tableau.m; i++){\n    cout &lt;&lt; \" \" &lt;&lt;  ns_young_tableau_i_C::Array2[i];\n}\n\ncout &lt;&lt; \"\\n\" &lt;&lt; endl;\n\nreturn 0;\n}\n</code></pre>\n\n<hr>\n\n<h2>header_A.hpp</h2>\n\n<pre><code>//Avoid multiple inclusions of a header file in a translation\n//unit\n#pragma once\n\n#include &lt;stddef.h&gt;\n//#include &lt;iostream&gt;\n#include &lt;ostream&gt;\n#include &lt;istream&gt;\n\n#include &lt;limits.h&gt;\n#include &lt;sstream&gt;\n#include &lt;stdbool.h&gt;\n\n\n/** @brief \"Namespace YoungTableau\"\n* Contains functions and structures to make and manage a tableau\n*/\nnamespace ns_young_tableau_A {\n\n\n/**\n * @brief \"YoungTableau_A\"\n * @tparam T\n */\nclass YoungTableau_A {\npublic:\n\n/**\n     * @brief \"Cell (i,j)\"\n     * @details  \"Single cell in the tableau\"\n     *            i,j: cell indexes\n     */\n    struct Cell_T {\n    //typedef struct Cell_T {\n\n        int i;\n        int j;\n\n    } cell_YT,c,d,l,r,u,CurrentYT;\n\n    /**\n     * @brief \"Tableau\"\n     * @details  \"Young Tableau (table)\",\n     *      elements: elements in the tableau\n     *      m: # of rows\n     *      n: # of columns\n     */\n     struct Tableau_T{\n    //typedef struct Tableau_T{\n\n        int m;\n        int n;\n        int *elements;\n\n    } Tableau,TableauSorted;\n\n\n\n///Accepted movements \n///---------------------------------------------------------\n/**\n* @brief \"Upward: Up\"\n* @details \"Upward movement from the current cell\"\n     * @tparam  R\n     * @param[in] c\n     * @return position (i,j)\n     */\n    template&lt;typename T&gt;\n    T UpYT(T c);\n\n    /**\n     * @brief   Downward: Down\n     * @details \"Downward movement from the current cell\"\n     * @tparam  R\n     * @param[in] c\n     * @return position (i,j)\n     */\n    template&lt;typename T&gt;\n    T DownYT(T c);\n\n    /**\n     * @brief   Leftward: Left\n     * @details \"Leftward movement from the current cell\"\n     * @tparam  R\n     * @param[in] c\n     * @return position (i,j)\n     */\n    template&lt;typename T&gt;\n    T LeftYT(T c);\n\n    /**\n     * @brief   Rightward: Right\n     * @details \"Rightward movement from the current cell\"\n     * @tparam  R\n     * @param[in] c\n     * @return position (i,j)\n     */\n    template&lt;typename T&gt;\n    T RightYT(T c);\n\n///---------------------------------------------------------\n};\n\n} // namespace young_tableau\n\n\n//namespace YT = young_tableau;\n\n#include \"impl/header_A.i.hpp\"\n</code></pre>\n\n<hr>\n\n<h2>header_A.i.hpp</h2>\n\n<pre><code>namespace ns_young_tableau_i_A {\n\ntemplate&lt;typename T&gt;\nT UpYT(T c){\n\n    T Result = {c.i - 1, c.j};\n\n    return Result;\n}\n\ntemplate&lt;typename T&gt;\nT DownYT(T c){\n\n    T Result = {c.i + 1, c.j};\n\n    return Result;\n}\n\ntemplate&lt;typename T&gt;\nT LeftYT(T c){\n\n   T Result = {c.i, c.j - 1};\n\n    return Result;\n}\n\ntemplate&lt;typename T&gt;\nT RightYT(T c){\n\n    T Result = {c.i, c.j + 1};\n\n    return Result;\n}\n\n\n} // namespace young_tableau\n</code></pre>\n\n<hr>\n\n<h2>header_B.hpp</h2>\n\n<pre><code>//Avoid multiple inclusions of a header file in a translation\n//unit\n#pragma once\n\n#include \"C:/Users/Steve/Desktop/Project/MyProject_YoungTableau/include/header_A.hpp\"\n#include &lt;cstddef&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;limits.h&gt;\n#include &lt;iostream&gt;\n#include &lt;sstream&gt; \n\n//using namespace ns_young_tableau_A;\n\n/** @brief Namespace brief\n* Contains functions and structures to make and manage a tableau\n*/\nnamespace ns_young_tableau_B{\n\n/**\n * @brief \"YoungTableau_B\"\n * @details \"Inhereted from A class\"\n * @tparam T\n */\n\nclass YoungTableau_B {\npublic:\n\n/// @brief Create an object with methods in YoungTableau_A class\n//YoungTableau_A YOUNG_TABLEAU_A;\n\n/**\n* @brief \"Make cell\"\n* @details Return the value in position (i,j) from the Young     Tableau \n* @tparam  R\n* @param[in] i\n* @param[in] j\n* @return position (i,j)\n*/\n template&lt;typename T&gt;\n        ns_young_tableau_A::YoungTableau_A::Cell_T MakeCellYT(T i, T j);\n\n\n        /**\n         * @brief \"Within Cell\"\n         * @details Check that current position is within the Young Tableau contour \n         * @tparam  R\n         * @param[in] tableau\n         * @param[in] c\n         * @return 'yes' if the element c exists in the tableau\n         *         'no' otherwise\n         */\n        template&lt;typename R,typename T&gt;\n        bool WithinYT(R *Tableau, T c);\n\n        /**\n         * @brief \"Get cell\"\n         * @details Find and return the value of the element \n         * in 'index' position (calculated from i,j indexes)\n         * @tparam  R\n         * @param[in] tableau\n         * @param[in] c\n         * @return corrispondent element in the tableau\n         */\n        template&lt;typename R,typename T&gt;\n        int GetYT(R *Tableau, T c);\n\n        /**\n         * @brief \"Set cell\"\n         * @details Set a value for the element in 'index' position  \n         * @tparam  R\n         * @param[in] tableau\n         * @param[in] c\n         * @param[in] value\n         * @return void\n         */\n        template&lt;typename R,typename T&gt;\n        void SetYT(R *Tableau, T c, int Value);\n};\n\n\n} // namespace young_tableau\n\n//namespace YT = young_tableau;\n\n\n#include \"impl/header_B.i.hpp\"\n</code></pre>\n\n<hr>\n\n<h2>header_B_i.hpp</h2>\n\n<pre><code>//using namespace ns_young_tableau_A;\n\nnamespace ns_young_tableau_i_B {\n\ntemplate&lt;typename T&gt;\nns_young_tableau_A::YoungTableau_A::Cell_T MakeCellYT(T i, T j){\n\n    T Result = {i,j};\n\n    return Result;\n}       \n\n\ntemplate&lt;typename R,typename T&gt;\nbool WithinYT(R Tableau, T c){\n    return (c.i &gt;= 0 &amp;&amp; c.j &gt;= 0 &amp;&amp; c.i &lt; Tableau-&gt;m &amp;&amp; c.j &lt; Tableau-&gt;n);\n}\n\n\ntemplate &lt;typename R, typename T&gt;\nint GetYT(R Tableau, T c){\n\n    auto IndexYT = c.i * Tableau-&gt;n + c.j;\n\n    return Tableau-&gt;elements[IndexYT];\n}\n\n\n///Set a value for the element in 'index' position  \ntemplate&lt;typename R, typename T&gt;\nvoid SetYT(R Tableau, T c, int Value){\n\n    auto IndexYT = c.i * Tableau-&gt;n + c.j;\n\n    Tableau-&gt;elements[IndexYT] = Value;\n}\n// namespace young_tableau\n</code></pre>\n\n<hr>\n\n<h2>header_C.hpp</h2>\n\n<pre><code>//Avoid multiple inclusions of a header file in a translation\n//unit\n#pragma once\n#include\"C:/Users/Steve/Desktop/Project/MyProject_YoungTableau/include/header_A.hpp\"\n#include\"C:/Users/Steve/Desktop/Project/MyProject_YoungTableau/include/header_C.hpp\"\n\n#include &lt;cstddef&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;limits.h&gt;\n#include &lt;iostream&gt;\n#include &lt;sstream&gt; \n\n//using namespace ns_young_tableau_A;\n//using namespace ns_young_tableau_B;\n\n/// @brief Namespace brief\n/// Contains functions and structures to make and manage a tableau \nnamespace ns_young_tableau_C {\n\n/**\n * @brief \"YoungTableau_C\"\n * @details \"Inhereted from A and B classes\"\n * @tparam T\n */\n\nclass YoungTableau_C {\npublic:\n\n    /**\n     * @brief \"Tableau print\"\n     * @details Print tableau on screen\n     * @tparam  R\n     * @param[in] tableau\n     * @return void\n     */\n    template&lt;typename R&gt;\n    void TableauPrint(R Tableau);\n\n    /**\n     * @brief \"Init empty tableau\"\n     * @details Create a new empty tableau\n     * @tparam  R\n     * @param[in] tableau\n     * @return correspondent element in the tableau\n     */\n    template&lt;typename R&gt;\n    void InitEmptyTableauYT(R Tableau);\n\n    /**\n     * @brief \"Extract tableau min value\"\n     * @details Extract the element with minimum value from the Young Tableau \n     * @tparam  R\n     * @param[in] tableau\n     * @return minimum value in the tableau\n     */\n    template&lt;typename R&gt;\n    int ExtractMinYT(R Tableau);\n\n\n    /**\n     * @brief \"Insert new element in the tableau\"\n     * @details Insert a new element in the Young Table \n     * @tparam  R\n     * @param[in] tableau\n     * @param[in] key\n     * @return void\n     */\n    template&lt;typename R&gt;\n    R InsertYT(R Tableau, int Key);\n\n\n    /**\n     * @brief \"Sort elements of the tableau\"\n     * @details Sort elements in the Young Tableau\n     * @tparam  R\n     * @param[in] tableau elements\n     * @param[in] size_sqrt\n     * @return void\n     */ \n    template&lt;typename R, typename T&gt;\n    void SortYT(R Array, T SizeSqrt);\n\n\n    /**\n     * @brief \"Find inside tableau\"\n     * @details Find an existing element in the Young Tableau \n     * @tparam  R\n     * @param[in] tableau \n     * @param[in] key\n     * @return 'yes' if element found\n     *         'no' otherwise\n     */ \n    template&lt;typename R&gt;\n    int FindYT(R Tableau, int Key);\n\n    /**\n     * @brief Square (constant expression)\n     * @details Constant expression (computed at compile-time)\n     * @tparam R\n     * @param[in] value\n     * @return square of value\n     */\n    template&lt;typename R&gt;\n    constexpr SquareConstExpr(R Value) {\n        return Value * Value;\n    }\n\n        /**\n     * @brief Square  (template function)\n     * @details template function (computed at compile-time)\n     * @tparam R\n     * @param[in] value\n     * @return square of value\n     */\n    template&lt;typename R&gt;\n    R SquareTemplate(R a) {\n        return a * a; \n    }\n};\n\n} \n\n//namespace YT = young_tableau;\n\n\n#include \"impl/header_C.i.hpp\"\n</code></pre>\n\n<hr>\n\n<p>It seems that the compiler cannot find the correct references to the hpp files.\nActually I'm using Visual Studio Code editor.\nI've added the path of the .hpp files (header_A,header_B,header_C) in c_cpp_properties.json as following...</p>\n\n<hr>\n\n<pre><code>\"intelliSenseMode\": \"msvc-x64\",\n        \"browse\": {\n            \"path\": [\n                \"${workspaceFolder}\",\n                \"C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/*\",\"C:/Users/Steve/Desktop/Project/MyProject_YoungTableau/include/header_A.hpp\",\"C:/Users/Steve/Desktop/Project/MyProject_YoungTableau/include/header_B.hpp\",\"C:/Users/Steve/Desktop/Project/MyProject_YoungTableau/include/header_C.hpp\",\"C:/Users/Steve/Desktop/Project/MyProject_YoungTableau/include/header_Source.hpp\",\n                \"C:/MinGW/lib/gcc/mingw32/6.3.0/include/c++/tr1\",\n                \"C:/MinGW/lib/gcc/mingw32/6.3.0/include/c++\",\n                \"C:/MinGW/lib/gcc/mingw32/6.3.0/include\",\n                \"C:/MinGW/lib/gcc/mingw32/6.3.0/include/c++/mingw32\",\n\n\"C:/Users/Steve/Desktop/Project/MyProject_YoungTableau/src/Source.cpp*\",\n                \"C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/atlmfc/include/*\",\n                \"C:/Program Files (x86)/Windows Kits/8.1/Include/um\",\n                \"C:/Program Files (x86)/Windows Kits/8.1/Include/shared\",\n                \"C:/Program Files (x86)/Windows Kits/8.1/Include/winrt\"\n            ],\n            \"limitSymbolsToIncludedHeaders\": true,\n            \"databaseFilename\": \"\"\n</code></pre>\n\n<hr>\n\n<p>.... and tried do compile using the following g++ command in tasks.json file:</p>\n\n<h2>Tasks.json</h2>\n\n<pre><code>{\n// See https://go.microsoft.com/fwlink/?LinkId=733558\n// for the documentation about the tasks.json format\n\"version\": \"2.0.0\",\n\"tasks\": [\n    {\n        \"label\": \"echo\",\n        \"type\": \"shell\",\n        \"command\": \"g++\",\n        \"args\": [\"-g\",\"-Iinclude\",\"C:/Users/Steve/Desktop/Project/MyProject_YoungTableau/src/Main.cpp\",\"C:/Users/Steve/Desktop/Project/MyProject_YoungTableau/include/*.hpp\",\"-o\",\"Main\"],\n        \"group\": {\n            \"kind\": \"build\",\n            \"isDefault\": true\n        }\n    }\n]\n}\n</code></pre>\n\n<hr>\n\n<p>This is one of the possible errors that appears:</p>\n\n<hr>\n\n<pre><code>C:\\Users\\Steve\\AppData\\Local\\Temp\\ccIsSjRK.o: In function `main':\nC:/Users/Steve/Desktop/Project/MyProject_YoungTableau/src/Main.cpp:68:     undefined reference to `ns_young_tableau_A::YoungTableau_A::Cell_T     ns_young_tableau_B::YoungTableau_B::MakeCellYT&lt;int&gt;(int, int)'\nC:/Users/Steve/Desktop/Project/MyProject_YoungTableau/src/Main.cpp:82:     undefined reference to `void     ns_young_tableau_C::YoungTableau_C::InitEmptyTableauYT&lt;ns_young_tableau_A::Young    Tableau_A::Tableau_T&gt;(ns_young_tableau_A::YoungTableau_A::Tableau_T)'\nC:/Users/Steve/Desktop/Project/MyProject_YoungTableau/src/Main.cpp:86:     undefined reference to `ns_young_tableau_A::YoungTableau_A::Tableau_T     ns_young_tableau_C::YoungTableau_C::InsertYT&lt;ns_young_tableau_A::YoungTableau_A:    :Tableau_T&gt;(ns_young_tableau_A::YoungTableau_A::Tableau_T, int)'\nC:/Users/Steve/Desktop/Project/MyProject_YoungTableau/src/Main.cpp:87:     undefined reference to `ns_young_tableau_A::YoungTableau_A::Tableau_T     ns_young_tableau_C::YoungTableau_C::InsertYT&lt;ns_young_tableau_A::YoungTableau_A:    :Tableau_T&gt;(ns_young_tableau_A::YoungTableau_A::Tableau_T, int)'\nC:/Users/Steve/Desktop/Project/MyProject_YoungTableau/src/Main.cpp:88:     undefined reference to `ns_young_tableau_A::YoungTableau_A::Tableau_T     ns_young_tableau_C::YoungTableau_C::InsertYT&lt;ns_young_tableau_A::YoungTableau_A:    :Tableau_T&gt;(ns_young_tableau_A::YoungTableau_A::Tableau_T, int)'\n</code></pre>\n\n<hr>\n\n<p>I cannot understand which the problem is.\nBeen slamming my head against this issue for a while.\nI hope I was sufficiently clear :)</p>\n\n<p>Thanks to everybody for your help :)</p>\n\n<hr>\n\n<h2>ExtractMinYT</h2>\n\n<pre><code>template&lt;typename R&gt;\n    int YoungTableau_C::ExtractMinYT(R Tableau){\n\n  //          CurYT = {0,0};\n            //Next = {0,0};\n\n            ns_young_tableau_A::YoungTableau_A::Cell_T CurYT2;\n            //CurYT2 = MCYT.MakeCellYT(Tableau.m, Tableau.n);\n            CurYT2 = {0,0};\n            ns_young_tableau_A::YoungTableau_A::Cell_T Next2;\n            //Next2 = MCYT.MakeCellYT(Tableau.m, Tableau.n);\n            Next2 = {0,0}; \n\n            ///Minimum element found in the tableau\n            int MinYT = 0; \n\n            ///The new minimum element found\n            int NewOne = INT_MAX;\n\n            /**Start with the current minimum fixed to an Infinitive value\n               Polymorphism: 'get' from YoungTableau_C Class */\n            MinYT = GYT.GetYT(Tableau,CurYT2);\n\n            ///Polymorphism: 'set' inhereted from YoungTableau_B class\n            SYT.SetYT(Tableau,CurYT2, INT_MAX);\n\n            /**Find the minimum element in the tableau comparing the current element\n               current_YT with the neighbours and exchange it with the smallest */\n            while (true) {\n\n                ///Minimum element actually found\n                int SmallestYT;\n\n                ///Move downward from the current position\n                d = DYT.DownYT(CurYT2);\n\n                ///Move rightward from the current position\n                r = RYT.RightYT(CurYT2);\n\n\n                /** If there is a smaller element moving downward from the current position,\n                move downward the cursor and update the smallest with the new element found */\n                if(WYT.WithinYT(Tableau,d) &amp;&amp; GYT.GetYT(Tableau,d) &lt; NewOne) {\n                    Next2 = d;\n                    SmallestYT = GYT.GetYT(Tableau,Next2);\n                } else {\n                    SmallestYT = NewOne;\n                }\n\n\n                /** If there is a smaller element moving rightward from the current position,\n                   move rightward the cursor and update the smallest with the new element found */\n                if(WYT.WithinYT(Tableau,r) &amp;&amp; GYT.GetYT(Tableau,r) &lt; SmallestYT) {\n                    Next2 = r;\n                    SmallestYT = GYT.GetYT(Tableau, Next2);\n                }\n\n                /** If the last element found is the smallest in the tableau,\n                update the current position of the tableau with this element and return it */\n                if(NewOne == SmallestYT){     \n                    SYT.SetYT(Tableau,CurYT2,NewOne);\n                    break;\n                }\n\n                SYT.SetYT(Tableau,CurYT2, SmallestYT);\n                CurYT2 = Next2;\n            }\n\n            return MinYT;\n        }\n</code></pre>\n\n<hr>\n"}, {"tags": ["c++", "sensors", "rfid", "data-stream"], "comments": [{"owner": {"reputation": 1684, "user_id": 4669135, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d9d4ff76c8827f4adfc6218ba952aefc?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Devillers", "link": "https://stackoverflow.com/users/4669135/gabriel-devillers"}, "edited": false, "score": 0, "creation_date": 1541618763, "post_id": 53196287, "comment_id": 93281333, "body": "Right now there is not enough informations to answer. The bare minimum would be the complete sensor name, reference and brand. Have you checked on the manufacturer website for documentation ?"}, {"owner": {"reputation": 1, "user_id": 9665930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eRo-kufNKZE/AAAAAAAAAAI/AAAAAAAAC2I/nGnuN34p9G0/photo.jpg?sz=128", "display_name": "Imtiaz E", "link": "https://stackoverflow.com/users/9665930/imtiaz-e"}, "reply_to_user": {"reputation": 1684, "user_id": 4669135, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d9d4ff76c8827f4adfc6218ba952aefc?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Devillers", "link": "https://stackoverflow.com/users/4669135/gabriel-devillers"}, "edited": false, "score": 0, "creation_date": 1541624922, "post_id": 53196287, "comment_id": 93284258, "body": "Yes, I&#39;ve checked it already. It&#39;s from SICK RFU series device."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9665930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eRo-kufNKZE/AAAAAAAAAAI/AAAAAAAAC2I/nGnuN34p9G0/photo.jpg?sz=128", "display_name": "Imtiaz E", "link": "https://stackoverflow.com/users/9665930/imtiaz-e"}, "edited": false, "score": 0, "creation_date": 1541625104, "post_id": 53196364, "comment_id": 93284339, "body": "Yes, I&#39;ve checked the datasheet already. The sensor is reading the RFID tag, but I can not feed the data into my program. I am feeding data by manually now. :("}, {"owner": {"reputation": 478, "user_id": 4082924, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/baa28ab3634596859548c2a799b7622e?s=128&d=identicon&r=PG&f=1", "display_name": "Manish", "link": "https://stackoverflow.com/users/4082924/manish"}, "reply_to_user": {"reputation": 1, "user_id": 9665930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eRo-kufNKZE/AAAAAAAAAAI/AAAAAAAAC2I/nGnuN34p9G0/photo.jpg?sz=128", "display_name": "Imtiaz E", "link": "https://stackoverflow.com/users/9665930/imtiaz-e"}, "edited": false, "score": 0, "creation_date": 1541718995, "post_id": 53196364, "comment_id": 93322888, "body": "Are you using a serial port to connect to sensor ?"}, {"owner": {"reputation": 1, "user_id": 9665930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eRo-kufNKZE/AAAAAAAAAAI/AAAAAAAAC2I/nGnuN34p9G0/photo.jpg?sz=128", "display_name": "Imtiaz E", "link": "https://stackoverflow.com/users/9665930/imtiaz-e"}, "edited": false, "score": 0, "creation_date": 1541799861, "post_id": 53196364, "comment_id": 93354110, "body": "Hey Manish, I am using both serial port and ethernet."}, {"owner": {"reputation": 478, "user_id": 4082924, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/baa28ab3634596859548c2a799b7622e?s=128&d=identicon&r=PG&f=1", "display_name": "Manish", "link": "https://stackoverflow.com/users/4082924/manish"}, "reply_to_user": {"reputation": 1, "user_id": 9665930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eRo-kufNKZE/AAAAAAAAAAI/AAAAAAAAC2I/nGnuN34p9G0/photo.jpg?sz=128", "display_name": "Imtiaz E", "link": "https://stackoverflow.com/users/9665930/imtiaz-e"}, "edited": false, "score": 0, "creation_date": 1541894532, "post_id": 53196364, "comment_id": 93374528, "body": "There are c++ libraries that can help you interface with serial port and ethernet both, I at-least know of a serial library here &#39;<a href=\"https://github.com/wjwwood/serial\" rel=\"nofollow noreferrer\">github.com/wjwwood/serial</a>&#39;, if you have read the datasheet then it might would have discussed the communication protocol in detail(if it is a good datasheet), use the library to implement the communication protocol to talk to your sensor."}], "tags": [], "owner": {"reputation": 478, "user_id": 4082924, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/baa28ab3634596859548c2a799b7622e?s=128&d=identicon&r=PG&f=1", "display_name": "Manish", "link": "https://stackoverflow.com/users/4082924/manish"}, "is_accepted": false, "score": 1, "last_activity_date": 1541618483, "creation_date": 1541618483, "answer_id": 53196364, "question_id": 53196287, "link": "https://stackoverflow.com/questions/53196287/how-to-get-raw-data-from-sensorrfid/53196364#53196364", "title": "How to get raw data from sensor(RFID)?", "body": "<p>You normally should have a c++ API to interface with the incoming data, and this API is normally provided by the sensor vendor. </p>\n\n<p>If not, then you will have to read the sensor datasheet in great detail and see the format of incoming data to hack the information coming.</p>\n"}], "owner": {"reputation": 1, "user_id": 9665930, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eRo-kufNKZE/AAAAAAAAAAI/AAAAAAAAC2I/nGnuN34p9G0/photo.jpg?sz=128", "display_name": "Imtiaz E", "link": "https://stackoverflow.com/users/9665930/imtiaz-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 453, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541621653, "creation_date": 1541618161, "last_edit_date": 1541621653, "question_id": 53196287, "link": "https://stackoverflow.com/questions/53196287/how-to-get-raw-data-from-sensorrfid", "title": "How to get raw data from sensor(RFID)?", "body": "<p>I need to get raw data from a set of RFID sensors. The sensor has a default application where I can see the data and they are continuously floating on the screen. Unfortunately, I can not feed the data to my program using input/output file handling in C++.</p>\n\n<p>Questions:</p>\n\n<ol>\n<li>Is this the process (INPUT/OUTPUT file handling) to get the raw data from sensor?</li>\n<li>If not, how can I get data from sensor and feed those data into my program?</li>\n</ol>\n\n<p>in the sensor's default application, it says I need to type some kind of \"serial number\" where I send the telegram.</p>\n"}, {"tags": ["c++", "pointers", "extract", "stdmap"], "comments": [{"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 1, "creation_date": 1541618549, "post_id": 53196275, "comment_id": 93281220, "body": "This is quite obviously a <a href=\"https://en.wikipedia.org/wiki/XY_problem\" rel=\"nofollow noreferrer\">XY problem</a>. The fact that you need to change the keys for a map means that your design is flawed. Change the design.  Also: what have you tried so far to answer your question? Why not simply try to <code>extract</code> an element and re-<code>insert</code> it with another key, then check for its address? If we can do that, then so can you!"}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1541618961, "post_id": 53196275, "comment_id": 93281438, "body": "One way to make sure, is to make your object <code>AND</code> non-movable and non-copyable. Then the compiler will puke if the address must be changed."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1541618973, "post_id": 53196275, "comment_id": 93281447, "body": "@Walter &quot;Why not simply try to extract an element and re-insert it with another key, then check for its address?&quot; this is a terrible advise, you should not deduce requirements from behavior of particular implementation."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1541619085, "post_id": 53196275, "comment_id": 93281496, "body": "@Slave It&#39;s not a terrible but pragmatical advise. What you have done is to <i>assume</i> that the result of such an exercise can be used to <i>deduce</i> requirements. I never assumed that. The converse, though is true: if the experiment shows that the address changes in some application, then it doesn&#39;t matter whether the standard says otherwise."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1541619266, "post_id": 53196275, "comment_id": 93281585, "body": "@Walter but if address does not change the result is useless, thats why your advise is bad, you should rely on documented behavior"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1541619594, "post_id": 53196275, "comment_id": 93281742, "body": "@Slava - since it is trivial to prove the negative, it&#39;s not unreasonable to ask why OP didn&#39;t. Obviously failing to prove the negative doesn&#39;t guarantee anything, but it&#39;s still an easy check that would demonstrate some effort."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1541619684, "post_id": 53196275, "comment_id": 93281773, "body": "@Useless I still do not think so - negative result could be a bug in particular implementation."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1541620240, "post_id": 53196275, "comment_id": 93282054, "body": "Then you should never test anything? I mean, I&#39;d expect to check both because I still can&#39;t use my legal solution until the compiler/library bug is fixed. Anyway, as I said, it <i>shows research effort</i>. It&#39;s essentially free good will, whether you&#39;re saying &quot;I think this ought to work but doesn&#39;t&quot; or &quot;this worked for me but I&#39;m not sure it&#39;s portable&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1541619424, "post_id": 53196545, "comment_id": 93281664, "body": "@Slava <code>insert</code> manual says that <i>&quot;pointers and references obtained to that element before it was extracted become valid&quot;</i>"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1541619437, "post_id": 53196545, "comment_id": 93281668, "body": "&quot;<i>If the insertion is successful, pointers and references to the element obtained while it is held in the node handle are invalidated, and pointers and references obtained to that element before it was extracted become valid</i>&quot; seems clear enough to me. (Edit - beaten by 13 seconds!)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1541619514, "post_id": 53196545, "comment_id": 93281701, "body": "I missed that, but that needs to be part of the answer, <code>extract</code> guarantee is clearly not enough in this case."}, {"owner": {"reputation": 65, "user_id": 3196464, "user_type": "registered", "profile_image": "https://graph.facebook.com/1186937619/picture?type=large", "display_name": "gud&#233;", "link": "https://stackoverflow.com/users/3196464/gud%c3%a9"}, "edited": false, "score": 0, "creation_date": 1541619696, "post_id": 53196545, "comment_id": 93281783, "body": "No, <code>node</code> is not <code>map::node_type</code>. Its a user defined class."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1541620262, "post_id": 53196545, "comment_id": 93282062, "body": "&quot;holding a pair&lt;const Key, T&gt;&quot; now interesting question, how OP is going to change the key"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1541620326, "post_id": 53196545, "comment_id": 93282093, "body": "The <a href=\"https://en.cppreference.com/w/cpp/container/node_handle\" rel=\"nofollow noreferrer\">node handle</a> exposes a <i>non-const</i> key reference, just so you can mutate it while it&#39;s not in a map"}], "tags": [], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "is_accepted": true, "score": 5, "last_activity_date": 1541683466, "last_edit_date": 1541683466, "creation_date": 1541619252, "answer_id": 53196545, "question_id": 53196275, "link": "https://stackoverflow.com/questions/53196275/using-stdmapextract-to-modify-key/53196545#53196545", "title": "Using std::map::extract to modify key", "body": "<p><strong>YES</strong> \nThe <a href=\"https://en.cppreference.com/w/cpp/container/map/extract\" rel=\"nofollow noreferrer\">reference</a> you have already quoted in your posts clearly states that <strong>no elements are copied or moved</strong>. (This assumes that <code>node</code> in your code snippet does not refer to <code>map::node_type</code>).</p>\n\n<p>The same holds for the <a href=\"https://en.cppreference.com/w/cpp/container/map/insert\" rel=\"nofollow noreferrer\"><code>insert</code></a> operation <em>of the map-node</em> (after modifying its key):</p>\n\n<blockquote>\n  <p>If the insertion is successful, pointers and references to the element obtained while it is held in the node handle are invalidated, and pointers and references obtained to that element before it was extracted become valid. (since C++17)</p>\n</blockquote>\n\n<p>However, accessing the object between <code>extract()</code>ion and re-<code>insert()</code>ion has undefined behaviour and its address taken whilst in the extracted state is of limited use. Quoting from the standard:</p>\n\n<blockquote>\n  <p>The extract members invalidate only iterators to the removed element;\n  pointers and references to the removed element remain valid. However,\n  accessing the element through such pointers and references while the\n  element is owned by a node_\u00adtype is undefined behavior. References and\n  pointers to an element obtained while it is owned by a node_\u00adtype are\n  invalidated if the element is successfully inserted.</p>\n</blockquote>\n\n<p><strong>Explanation</strong></p>\n\n<p>Essentially, a <code>map&lt;&gt;</code> is implemented as a tree of nodes, each holding a <code>key</code> and <code>T</code> (which are exposed as <code>pair&lt;const Key, T&gt;</code> to the user). Nodes are allocated (typically) on the heap and the address of your object is related to that of a node. <code>map::extract()</code> un-links a node from its tree  and returns a <em>node handle</em> (an object holding a pointer to a map node), but AFAIK the node itself is not re-allocated, moved, or copied. Upon <code>map::insert(handle)</code>, the node is re-linked into the tree according to its (new) key. Again, this involves no re-allocation, move, or copy of the node.</p>\n\n<p><strong>Remark</strong></p>\n\n<p>The above is a rough sketch. How things are actually done is likely more complex and also implementation defined. As explained <a href=\"https://en.cppreference.com/w/cpp/container/node_handle\" rel=\"nofollow noreferrer\">here</a> a <code>node_handle</code> does allow to alter the key through the member function</p>\n\n<pre><code>Key &amp;node_handle::key() const;\n</code></pre>\n\n<p>How this is done under the hood is not specified and I speculate that the implementation uses a union or some cast to allow this. Of course, the map has to present to users a <code>pair&lt;const Key,T&gt;</code> in order to prevent them from changing the key and hence breaking the map, but this is not of any concern for an element extracted from the map.</p>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1541619994, "post_id": 53196695, "comment_id": 93281923, "body": "&quot;YES, those pointers will become invalid once those objects are removed from the map for any reason&quot; this is not what <code>extarct</code> documentation says I believe"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1541620087, "post_id": 53196695, "comment_id": 93281968, "body": "This is possibly a better design, but the extract/node handle mechanism added in C++17 does allow un-linking and re-linking tree nodes without change of address."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1541620259, "post_id": 53196695, "comment_id": 93282060, "body": "<i>those pointers will become invalid once those objects are removed from the map</i> This is <b>wrong</b> for removal via <code>map::extract</code>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1541681435, "post_id": 53196695, "comment_id": 93304136, "body": "@Walter Actually it isn&#39;t, at least until you do a <code>map::insert</code> again"}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1541681547, "post_id": 53196695, "comment_id": 93304199, "body": "@LightnessRacesinOrbit How do you know? This makes no sense: the address of the object itself is re-stored, but was changed in between??? NO, the object was never moved/copied, only the handle was."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1541681586, "post_id": 53196695, "comment_id": 93304216, "body": "@Walter: I know because that&#39;s what the standard says. I can&#39;t tell you why it&#39;s that way, but the original pointers are invalidated for the duration of time that the node is extracted; they are re-validated once it&#39;s been re-inserted. You can read about this in <a href=\"https://en.cppreference.com/w/cpp/container/map/extract\" rel=\"nofollow noreferrer\">the reference</a>."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1541681614, "post_id": 53196695, "comment_id": 93304230, "body": "@LightnessRacesinOrbit where does it say so?"}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1541681708, "post_id": 53196695, "comment_id": 93304284, "body": "@LightnessRacesinOrbit that&#39;s not the standard :-("}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1541681739, "post_id": 53196695, "comment_id": 93304299, "body": "@Walter: <a href=\"http://eel.is/c++draft/associative.reqmts#10\" rel=\"nofollow noreferrer\">eel.is/c++draft/associative.reqmts#10</a> (the wording actually is not quite what Remy said; the pointers are &quot;valid&quot; still but dereferencing them has UB until re-insertion of the node; so I guess it depends on your personal definition of &quot;valid&quot;!)"}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1541681975, "post_id": 53196695, "comment_id": 93304410, "body": "@LightnessRacesinOrbit The question really is whether <code>extract()</code> and <code>insert(node_type)</code> are supported for <code>mapped_type</code>s which cannot be moved or copied. I suspect they are for most implementations, but what does the standard say?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1541682050, "post_id": 53196695, "comment_id": 93304451, "body": "@Walter I&#39;m not following you. You seemed to be saying that the pointers remain valid after <code>extract</code> and I&#39;ve shown that this is not true (FSVO &quot;valid&quot;). Now you&#39;re asking something else?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1541682170, "post_id": 53196695, "comment_id": 93304518, "body": "@Walter: Requirements on <code>mapped_type</code> are found under <a href=\"http://eel.is/c++draft/associative.reqmts#7\" rel=\"nofollow noreferrer\">eel.is/c++draft/associative.reqmts#7</a> and by extension <a href=\"http://eel.is/c++draft/container.requirements.general#tab:containers.allocatoraware\" rel=\"nofollow noreferrer\">eel.is/c++draft/&hellip;</a>"}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1541682587, "post_id": 53196695, "comment_id": 93304757, "body": "This only lists the requirements (on <code>key_type</code> and <code>mapped_type</code>) for the <i>copy-assign operation</i> of the container, but I&#39;m interested in <code>extract()</code> and <code>insert(node_type)</code>."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1541683604, "post_id": 53196695, "comment_id": 93305265, "body": "@LightnessRacesinOrbit I don&#39;t understand the rationale between these rules (the UB when accessing the extracted object through its pointer and the fact that the address taken during the extracted state becomes invalid upon re-insertion). Do you?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1541689864, "post_id": 53196695, "comment_id": 93309069, "body": "@Walter <i>&quot;I don&#39;t understand the rationale [...] Do you?&quot;</i> Not really, no. I had this conversation with someone a couple of weeks ago too and it was not enlightening."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1541689890, "post_id": 53196695, "comment_id": 93309090, "body": "@Walter As for requirements on the mapped_type as they apply to extract and insert, you&#39;ve lost me: what requirements are you interested in, and how does that relate to the question?"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1541682224, "last_edit_date": 1541682224, "creation_date": 1541619885, "answer_id": 53196695, "question_id": 53196275, "link": "https://stackoverflow.com/questions/53196275/using-stdmapextract-to-modify-key/53196695#53196695", "title": "Using std::map::extract to modify key", "body": "<p>Your <code>map</code> holds actual <code>AND</code> objects, not pointers to objects.  So, if the <code>AND*</code> pointers stored inside your <code>vector</code>s are pointing at the <code>map</code>'s <code>AND</code> objects, then those pointers WILL become invalid once those objects are <em>erased</em> from the <code>map</code>.</p>\n\n<p>However, <em>extraction</em> merely unlinks a specified node from the <code>map</code>, the node and thus its key and value are still valid in memory.  The node can be re-inserted into a <code>map</code> without affecting the addresses of the node's key and value.  In this regard, the pointers in the <code>vector</code>s WILL NOT become invalid (although it is undefined to dereference them while the node is detached from the container).</p>\n\n<p>Another option is to change your <code>map</code> to hold <code>AND*</code> pointers instead.  Or better, consider using <code>std::shared_ptr&lt;AND&gt;</code> in the <code>map</code> and <code>std::shared_ptr&lt;node&gt;</code> in the <code>vector</code>s, instead of raw pointers.  Then it won't matter whether the <code>map</code> entries are <em>erased</em> or <em>extracted</em>, the <code>AND</code> objects will remain valid as long as there are active <code>shared_ptr</code> references to them.</p>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 3196464, "user_type": "registered", "profile_image": "https://graph.facebook.com/1186937619/picture?type=large", "display_name": "gud&#233;", "link": "https://stackoverflow.com/users/3196464/gud%c3%a9"}, "edited": false, "score": 0, "creation_date": 1541706760, "post_id": 53207932, "comment_id": 93317873, "body": "Yes Walter you are totally right. The issue considering my implementation is like you described. Although I need them ordered. The map&#39;s find I use on another branch of my project that does other stuff. I was considering changing to vector and put the key values as AND&#39;s attribute and using sort based on this attribute."}, {"owner": {"reputation": 65, "user_id": 3196464, "user_type": "registered", "profile_image": "https://graph.facebook.com/1186937619/picture?type=large", "display_name": "gud&#233;", "link": "https://stackoverflow.com/users/3196464/gud%c3%a9"}, "edited": false, "score": 0, "creation_date": 1541707048, "post_id": 53207932, "comment_id": 93318009, "body": "Basically, I have the class GRAPH which holds the ANDs objects on a map. This class graph I use to read some files, structure these things based on the files and then do some computation on the structured data. Now I came to a point where I am creating my own files with the class SYNTHESIZER, which inherits from GRAPH and the map structure has no use in this case. I am thinking about removing the inheritance and changing from map to vector in the synthesizer class, as you suggested with deque, although I will need the ANDs sorted to write the file."}], "tags": [], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "is_accepted": false, "score": 1, "last_activity_date": 1541680800, "creation_date": 1541680800, "answer_id": 53207932, "question_id": 53196275, "link": "https://stackoverflow.com/questions/53196275/using-stdmapextract-to-modify-key/53207932#53207932", "title": "Using std::map::extract to modify key", "body": "<p>My above answer addresses your immediate question. However, as I have suggested in a comment, this appears to be a <a href=\"https://en.wikipedia.org/wiki/XY_problem\" rel=\"nofollow noreferrer\">XY problem</a>. What I suspect:</p>\n\n<ol>\n<li><p>You have some structure of <code>AND</code> objects which are interlinked via their <code>inputs</code> and <code>outputs</code> fields. This linkage must not be broken by any re-allocation, so you cannot store them in a growing <code>vector&lt;AND&gt;</code> with re-allocation. </p></li>\n<li><p>You also want to order these objects according to some <code>key</code> and have therefore stored them in a <code>map&lt;Key,AND&gt;</code>, which indeed does not re-allocate when grown.</p></li>\n<li><p>You now want to order them according to another key (and/or change all the keys).</p></li>\n</ol>\n\n<p>(If you're actually are not interested in ordering but merely in finding your objects by their key, you should have used <code>unordered_map</code> instead of <code>map</code>, which supports <code>find()</code> in <code>O(n)</code> rather than <code>O(log(n))</code> operations.)</p>\n\n<p>I suggest a different layout of your data:</p>\n\n<ol>\n<li><p>You store your <code>AND</code> objects in a way that allows growing their number without re-allocation. An obvious choice here is <a href=\"https://en.cppreference.com/w/cpp/container/deque\" rel=\"nofollow noreferrer\"><code>deque&lt;AND&gt;</code></a>, since </p>\n\n<blockquote>\n  <p>insertion and deletion at either end of a deque never invalidates\n  pointers or references to the rest of the elements</p>\n</blockquote>\n\n<p>You may also make <code>AND</code> non-copyable and non-movable, ensuring that once allocated their address never changes (and pointers to them remain valid until destruction).</p></li>\n<li><p>You can support any find-by-key or order-by-key operations by actually working on pointers to the stored objects, either by sorting a vector of <code>pair&lt;key,AND*&gt;</code> or by using a <code>map&lt;key,AND*&gt;</code> or <code>unordered_map&lt;key,AND*&gt;</code>. You can even simultaneously have various keys per object (and a map for each).</p></li>\n<li><p>When you must re-key all objects, simply forget the old map and make a new one: since the map only stores pointers and not the objects, this does not affect your linkages.</p></li>\n</ol>\n"}], "owner": {"reputation": 65, "user_id": 3196464, "user_type": "registered", "profile_image": "https://graph.facebook.com/1186937619/picture?type=large", "display_name": "gud&#233;", "link": "https://stackoverflow.com/users/3196464/gud%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1621, "favorite_count": 0, "accepted_answer_id": 53196545, "answer_count": 3, "score": 2, "last_activity_date": 1541683466, "creation_date": 1541618106, "last_edit_date": 1541618624, "question_id": 53196275, "link": "https://stackoverflow.com/questions/53196275/using-stdmapextract-to-modify-key", "title": "Using std::map::extract to modify key", "body": "<p>My implementation uses std::map to store data. When I started my code it seemed like the best option. Now I came to a point where I have to change the key values of all objects inside the map.</p>\n\n<p>The problem is that each object points to another object inside the map:</p>\n\n<pre><code>class AND : public node{\n    vector &lt;node*&gt; inputs;\n    vector &lt;node*&gt; outputs;\n}\n</code></pre>\n\n<p>And the map is declared like this:</p>\n\n<pre><code>map&lt;unsigned int, AND&gt; all_ANDs;\n</code></pre>\n\n<p><strong>My question is:</strong> If I use map::extract from C++17 to modify the key values in all_ANDs map, will my pointers (E.g. the ones inside the attribute inputs) keep pointing to the right places?</p>\n\n<p><strong>In other words:</strong> If I change the value of \"first\" element with extract, the address of \"second\" will keep intact?</p>\n\n<p>I noticed from <a href=\"https://en.cppreference.com/w/cpp/container/map/extract\" rel=\"nofollow noreferrer\">this link</a> that the string \"papaya\" stays the same (and works gracefully). But I wanted to be sure about pointers.</p>\n"}, {"tags": ["c++", "linux", "alsa", "libusb"], "comments": [{"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1541619421, "post_id": 53196265, "comment_id": 93281660, "body": "Modify the <code>snd-usb-audio</code> driver. What is so special about that device?"}, {"owner": {"reputation": 31, "user_id": 9387676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/722a74e1de8871c7a5cca597eb5a77b9?s=128&d=identicon&r=PG&f=1", "display_name": "NetLava", "link": "https://stackoverflow.com/users/9387676/netlava"}, "reply_to_user": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1541620358, "post_id": 53196265, "comment_id": 93282115, "body": "The device store information that I can retreive with the GET_MEM request (<a href=\"https://www.usb.org/sites/default/files/audio10.pdf\" rel=\"nofollow noreferrer\">usb.org/sites/default/files/audio10.pdf</a> p67 - section 5.2.1.2 Get Request). I didnt find a way to send that request with Alsa, so I used libusb. I will check the <code>snd-usb-audio</code>, thank you."}], "owner": {"reputation": 31, "user_id": 9387676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/722a74e1de8871c7a5cca597eb5a77b9?s=128&d=identicon&r=PG&f=1", "display_name": "NetLava", "link": "https://stackoverflow.com/users/9387676/netlava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 230, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1541619129, "creation_date": 1541618067, "last_edit_date": 1541619129, "question_id": 53196265, "link": "https://stackoverflow.com/questions/53196265/libusb-send-control-transfer-without-interrupting-stream", "title": "libusb send control transfer without interrupting stream", "body": "<p>I need to communicate with an usb audio device. I need to do both control transfers and output audio to the device at the same time.</p>\n\n<p>For the audio output, I use Alsa asoundlib and it works fine. My problem arise when I try to use libusb to send a control transfer (with <code>libusb_control_transfer</code>) while streaming audio with Alsa at the same time. With libusb I need to detach the kernel driver and claim the interface (<code>libusb_detach_kernel_driver</code>, <code>libusb_claim_interface</code>) for the control transfer to work, but that stops the Alsa audio stream, since Alsa uses the kernel driver. </p>\n\n<p>Is there a way to send a control transfer that doesnt requires to claim the interface with libusb? </p>\n\n<p>I would prefer not having to implement the audio playback with libusb.</p>\n\n<p>I am a bit confused about usb, so I apologize if the question is not clear.</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 1046, "user_id": 1335511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/95lkV.jpg?s=128&g=1", "display_name": "Henrique Jung", "link": "https://stackoverflow.com/users/1335511/henrique-jung"}, "edited": false, "score": 0, "creation_date": 1541618150, "post_id": 53196263, "comment_id": 93281037, "body": "Could you please provide a small sample of your xml file?"}, {"owner": {"reputation": 15, "user_id": 10526767, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LMX6ZKOGlqw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOA9wSK-u9wu1-xpY94pFF5--EOPQ/mo/photo.jpg?sz=128", "display_name": "miceandmon", "link": "https://stackoverflow.com/users/10526767/miceandmon"}, "reply_to_user": {"reputation": 1046, "user_id": 1335511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/95lkV.jpg?s=128&g=1", "display_name": "Henrique Jung", "link": "https://stackoverflow.com/users/1335511/henrique-jung"}, "edited": false, "score": 0, "creation_date": 1541618661, "post_id": 53196263, "comment_id": 93281283, "body": "ok, sorry about that."}, {"owner": {"reputation": 1046, "user_id": 1335511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/95lkV.jpg?s=128&g=1", "display_name": "Henrique Jung", "link": "https://stackoverflow.com/users/1335511/henrique-jung"}, "edited": false, "score": 0, "creation_date": 1541620788, "post_id": 53196263, "comment_id": 93282343, "body": "What is this library <code>#include &lt;tinyxml.h&gt;</code>? If it&#39;s an external library with a public API, you need to at least give us the documentation for it."}, {"owner": {"reputation": 15, "user_id": 10526767, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LMX6ZKOGlqw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOA9wSK-u9wu1-xpY94pFF5--EOPQ/mo/photo.jpg?sz=128", "display_name": "miceandmon", "link": "https://stackoverflow.com/users/10526767/miceandmon"}, "reply_to_user": {"reputation": 1046, "user_id": 1335511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/95lkV.jpg?s=128&g=1", "display_name": "Henrique Jung", "link": "https://stackoverflow.com/users/1335511/henrique-jung"}, "edited": false, "score": 0, "creation_date": 1541621569, "post_id": 53196263, "comment_id": 93282725, "body": "sorry again :( There you go"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 10526767, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LMX6ZKOGlqw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOA9wSK-u9wu1-xpY94pFF5--EOPQ/mo/photo.jpg?sz=128", "display_name": "miceandmon", "link": "https://stackoverflow.com/users/10526767/miceandmon"}, "edited": false, "score": 0, "creation_date": 1541627603, "post_id": 53198271, "comment_id": 93285417, "body": "and how do I access the parameters and such? In my previous code, I would use elems[0].motor or elems[0].value and so forth. How would I be able to index these values using this way?"}, {"owner": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "reply_to_user": {"reputation": 15, "user_id": 10526767, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LMX6ZKOGlqw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOA9wSK-u9wu1-xpY94pFF5--EOPQ/mo/photo.jpg?sz=128", "display_name": "miceandmon", "link": "https://stackoverflow.com/users/10526767/miceandmon"}, "edited": false, "score": 0, "creation_date": 1541627644, "post_id": 53198271, "comment_id": 93285440, "body": "@miceandmon just use two indices as if it were a 2D array, e.g. <code>elems[0][0].motor</code>."}, {"owner": {"reputation": 15, "user_id": 10526767, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LMX6ZKOGlqw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOA9wSK-u9wu1-xpY94pFF5--EOPQ/mo/photo.jpg?sz=128", "display_name": "miceandmon", "link": "https://stackoverflow.com/users/10526767/miceandmon"}, "edited": false, "score": 0, "creation_date": 1541628674, "post_id": 53198271, "comment_id": 93285864, "body": "I actually got quite a bit of errors. <code>class std::vector&lt;std::vector&lt;NameValue&gt; &gt;&#39; has no member named &#39;emplace_back&#39;</code> <code>ISO C++ forbids declaration of &#39;xmlread&#39; with no type</code> <code>invalid initialization of reference of type &#39;int&amp;&#39; from expression of type &#39;std::vector&lt;NameValue&gt;&#39; </code>request for member &#39;push_back&quot; in &#39;smlread&#39;, which is of non-class type &#39;int&#39;`  First I&#39;d have to change my return type of the functinon to a double vector. As for the emplace_back errors, no clue. I&#39;m not using C++11"}, {"owner": {"reputation": 15, "user_id": 10526767, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LMX6ZKOGlqw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOA9wSK-u9wu1-xpY94pFF5--EOPQ/mo/photo.jpg?sz=128", "display_name": "miceandmon", "link": "https://stackoverflow.com/users/10526767/miceandmon"}, "edited": false, "score": 0, "creation_date": 1541629053, "post_id": 53198271, "comment_id": 93285991, "body": "I&#39;m using QT 5.5.1 and using  g++ compiler"}, {"owner": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "reply_to_user": {"reputation": 15, "user_id": 10526767, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LMX6ZKOGlqw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOA9wSK-u9wu1-xpY94pFF5--EOPQ/mo/photo.jpg?sz=128", "display_name": "miceandmon", "link": "https://stackoverflow.com/users/10526767/miceandmon"}, "edited": false, "score": 0, "creation_date": 1541629095, "post_id": 53198271, "comment_id": 93286009, "body": "@miceandmon I see you&#39;re not using C++11 - is there a particular reason? If so  I can modify my answer; otherwise I strongly recommend it."}, {"owner": {"reputation": 15, "user_id": 10526767, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LMX6ZKOGlqw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOA9wSK-u9wu1-xpY94pFF5--EOPQ/mo/photo.jpg?sz=128", "display_name": "miceandmon", "link": "https://stackoverflow.com/users/10526767/miceandmon"}, "edited": false, "score": 0, "creation_date": 1541629301, "post_id": 53198271, "comment_id": 93286092, "body": "Got it. Added CONFIG += c++11 to my .pro file on QT. It compiled this time. but when I write in my main: <code>vector&lt;vector&lt;NameValue&gt; &gt; elems = read(); cout&lt;&lt;elems[0][1].value&lt;&lt;endl;</code> I get nothing. Keep in mind that I did change my return value in read to be xmlread2D"}, {"owner": {"reputation": 15, "user_id": 10526767, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LMX6ZKOGlqw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOA9wSK-u9wu1-xpY94pFF5--EOPQ/mo/photo.jpg?sz=128", "display_name": "miceandmon", "link": "https://stackoverflow.com/users/10526767/miceandmon"}, "edited": false, "score": 0, "creation_date": 1541630405, "post_id": 53198271, "comment_id": 93286500, "body": "yes. Other than the face that I changed my return values to <code>vector&lt;vector&lt;NameValue&gt; &gt;&#39; I </code>cout&lt;&lt;elems.value&lt;&lt;endl;` inside the loop and it display the correct values. When I add <code>xmlread2D.push_back(xmlread);</code> after the <code>pMotor = pMotor-&gt;NextSiblingElement(&quot;Motor&quot;)</code> I still get nothing. I would assume that it adds the xmlread vector to xmlread2D. Am I wrong?"}, {"owner": {"reputation": 15, "user_id": 10526767, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LMX6ZKOGlqw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOA9wSK-u9wu1-xpY94pFF5--EOPQ/mo/photo.jpg?sz=128", "display_name": "miceandmon", "link": "https://stackoverflow.com/users/10526767/miceandmon"}, "edited": false, "score": 0, "creation_date": 1541633243, "post_id": 53198271, "comment_id": 93287437, "body": "I started debugging and when I try to <code>cout&lt;&lt;xmlread[0]&lt;&lt;endl;</code> it gives me &#39;no match for &#39;operator&lt;&lt;&#39; (operand types are &#39;std::ostream{aka std::basic_ostream&lt;char&gt;}&#39; ` It looks like it&#39;s not adding the elements to the xmlread vector?"}, {"owner": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "reply_to_user": {"reputation": 15, "user_id": 10526767, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LMX6ZKOGlqw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOA9wSK-u9wu1-xpY94pFF5--EOPQ/mo/photo.jpg?sz=128", "display_name": "miceandmon", "link": "https://stackoverflow.com/users/10526767/miceandmon"}, "edited": false, "score": 0, "creation_date": 1541633553, "post_id": 53198271, "comment_id": 93287494, "body": "@miceandmon <code>xmlread[0]</code> is of type <code>NameValue</code>, which doesn&#39;t have an <a href=\"http://www.cplusplus.com/reference/ostream/ostream/operator%3C%3C/\" rel=\"nofollow noreferrer\"><i>insertion operator</i></a> overload for <code>cout</code>. Do something like <code>xmlread[0].name</code> instead, which is of type <code>string</code> and does have an overload (alternatively use a debugger + breakpoint)."}, {"owner": {"reputation": 15, "user_id": 10526767, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LMX6ZKOGlqw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOA9wSK-u9wu1-xpY94pFF5--EOPQ/mo/photo.jpg?sz=128", "display_name": "miceandmon", "link": "https://stackoverflow.com/users/10526767/miceandmon"}, "edited": false, "score": 0, "creation_date": 1541634166, "post_id": 53198271, "comment_id": 93287668, "body": "You&#39;re right. I just tested it with different parameter values, and it looks like it&#39;s only outputting the data out for motor 1...."}, {"owner": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "reply_to_user": {"reputation": 15, "user_id": 10526767, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LMX6ZKOGlqw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOA9wSK-u9wu1-xpY94pFF5--EOPQ/mo/photo.jpg?sz=128", "display_name": "miceandmon", "link": "https://stackoverflow.com/users/10526767/miceandmon"}, "edited": false, "score": 0, "creation_date": 1541634313, "post_id": 53198271, "comment_id": 93287707, "body": "@miceandmon DAMN I just realized my mistake - the initialization should be inside the outer loop. My apologies! I&#39;ll edit the answer."}, {"owner": {"reputation": 15, "user_id": 10526767, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LMX6ZKOGlqw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOA9wSK-u9wu1-xpY94pFF5--EOPQ/mo/photo.jpg?sz=128", "display_name": "miceandmon", "link": "https://stackoverflow.com/users/10526767/miceandmon"}, "edited": false, "score": 0, "creation_date": 1541634562, "post_id": 53198271, "comment_id": 93287771, "body": "any other suggestions? I&#39;m running out of things to try"}, {"owner": {"reputation": 15, "user_id": 10526767, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LMX6ZKOGlqw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOA9wSK-u9wu1-xpY94pFF5--EOPQ/mo/photo.jpg?sz=128", "display_name": "miceandmon", "link": "https://stackoverflow.com/users/10526767/miceandmon"}, "edited": false, "score": 0, "creation_date": 1541634866, "post_id": 53198271, "comment_id": 93287840, "body": "You&#39;re a freaking genius! That worked! :,D Thanks for sticking through."}, {"owner": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "reply_to_user": {"reputation": 15, "user_id": 10526767, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LMX6ZKOGlqw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOA9wSK-u9wu1-xpY94pFF5--EOPQ/mo/photo.jpg?sz=128", "display_name": "miceandmon", "link": "https://stackoverflow.com/users/10526767/miceandmon"}, "edited": false, "score": 0, "creation_date": 1541634987, "post_id": 53198271, "comment_id": 93287866, "body": "@miceandmon no problem; and again apologies for wasting so much of your time with a stupid mistake like that..."}], "tags": [], "owner": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "is_accepted": true, "score": 1, "last_activity_date": 1541688909, "last_edit_date": 1541688909, "creation_date": 1541626933, "answer_id": 53198271, "question_id": 53196263, "link": "https://stackoverflow.com/questions/53196263/2d-vector-using-struct/53198271#53198271", "title": "2D vector using struct", "body": "<p>What you already have needs very little modification in order to produce a 2D vector. Simply use <a href=\"https://en.cppreference.com/w/cpp/container/vector/emplace_back\" rel=\"nofollow noreferrer\"><code>emplace_back</code></a> to construct inner vectors in-place:</p>\n\n<pre><code>vector&lt;vector&lt;NameValue&gt;&gt; xmlread2D;\nNameValue elem;\n\nTiXmlElement *pRoot, *pParm, *pMotor;\npRoot = doc.FirstChildElement(\"PRO\");\nif (pRoot)\n{\n    pMotor = pRoot-&gt;FirstChildElement(\"Motor\");\n    while (pMotor)\n    {\n        // allocate new inner vector\n        xmlread2D.emplace_back();\n        auto&amp; xmlread = xmlread2D.back();\n        // in C++17 the above can be replaced with a single line\n\n        // unmodified inner loop\n        elem.motor = pMotor-&gt;Attribute(\"value\");\n        pParm = pMotor-&gt;FirstChildElement(\"PARAMETER\");\n        while (pParm)\n        {\n            elem.name = pParm-&gt;Attribute(\"name\");\n            elem.value = pParm-&gt;Attribute(\"value\");\n            xmlread.push_back(elem);\n            pParm = pParm-&gt;NextSiblingElement(\"PARAMETER\");\n        }\n        pMotor = pMotor-&gt;NextSiblingElement(\"Motor\");\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 10526767, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LMX6ZKOGlqw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOA9wSK-u9wu1-xpY94pFF5--EOPQ/mo/photo.jpg?sz=128", "display_name": "miceandmon", "link": "https://stackoverflow.com/users/10526767/miceandmon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 53198271, "answer_count": 1, "score": 1, "last_activity_date": 1541688909, "creation_date": 1541618057, "last_edit_date": 1541628165, "question_id": 53196263, "link": "https://stackoverflow.com/questions/53196263/2d-vector-using-struct", "title": "2D vector using struct", "body": "<p>So I have the following code where I read an XML file and save the values to a vector. I don't have much experience with vectors, but now that I have my parameter \"motor\", I want to be able to go to a motor value, and read the parameters from that vector.</p>\n\n<p>Would I have to add something to my struct? Or intialize a 2D vector <code>vector&lt;vector &lt;NameValue&gt;&gt; motors;</code> If I do initialize a 2D vector, how would I be able to populate the vector. Or is there a good guide that can help me fully understand vectors?</p>\n\n<p>Here is the documentation for TinyXML. <a href=\"http://www.grinninglizard.com/tinyxmldocs/index.html\" rel=\"nofollow noreferrer\">http://www.grinninglizard.com/tinyxmldocs/index.html</a></p>\n\n<pre><code>#include &lt;QCoreApplication&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;stdexcept&gt;\n#include &lt;tinyxml.h&gt;\n\nusing namespace std; \n\nstruct NameValue\n{\n    string motor;\n    string name;\n    string value;\n};\n\nvector&lt;NameValue&gt; read()\n{   //READING XML FILE\n    QString directory;\n    string file;\n    directory = QCoreApplication::applicationDirPath();\n    file = directory.toUtf8().constData();\n    file = file + \"/Profile.xml\";\n    cout&lt;&lt;file&lt;&lt;endl;\n    TiXmlDocument doc (file);\n    if(!doc.LoadFile()){\n        cout&lt;&lt;\"Cannot open file\"&lt;&lt;endl;}\n\n    vector&lt;NameValue&gt; xmlread;\n    NameValue elem;\n\n    TiXmlElement *pRoot, *pParm, *pMotor;\n    pRoot = doc.FirstChildElement(\"PRO\");\n    if (pRoot) //parsing\n    {\n     pMotor = pRoot-&gt;FirstChildElement(\"Motor\");\n      if(pMotor){\n        while (pMotor)\n        {\n            elem.motor = pMotor-&gt;Attribute(\"value\");\n            pParm = pMotor-&gt;FirstChildElement(\"PARAMETER\");\n            while (pParm)\n            {\n                elem.name = pParm-&gt;Attribute(\"name\");\n                elem.value = pParm-&gt;Attribute(\"value\");\n                xmlread.push_back(elem);\n                pParm = pParm-&gt;NextSiblingElement(\"PARAMETER\");\n            }\n            pMotor = pMotor-&gt;NextSiblingElement(\"Motor\");\n\n        }\n   }\n}\n   return xmlread;\n}\nint main (int argc, char *argv[])\n{\n   vector&lt;NameValue&gt; elems = read();\n   cout&lt;&lt;elems[0].motor&lt;&lt;endl;\n\n}\n</code></pre>\n\n<p>Here is a snip of my XML File:</p>\n\n<pre><code>&lt;PRO&gt;\n   &lt;Motor value = \"1\"&gt;\n         &lt;PARAMETER name = \"SPEED\" value = \"100\" /&gt;\n         &lt;PARAMETER name = \"LOOP\" value = \"1\" /&gt;\n         &lt;PARAMETER name = \"DEADBAND\" value = \"10\" /&gt;\n   &lt;/Motor&gt;\n   &lt;Motor value = \"2\"&gt;\n         &lt;PARAMETER name = \"SPEED\" value = \"100\" /&gt;\n         &lt;PARAMETER name = \"LOOP\" value = \"1\" /&gt;\n         &lt;PARAMETER name = \"DEADBAND\" value = \"10\" /&gt;\n   &lt;/Motor&gt;\n   &lt;Motor value = \"3\"&gt;\n         &lt;PARAMETER name = \"SPEED\" value = \"100\" /&gt;\n         &lt;PARAMETER name = \"LOOP\" value = \"1\" /&gt;\n         &lt;PARAMETER name = \"DEADBAND\" value = \"10\" /&gt;\n   &lt;/Motor&gt;\n&lt;/PRO&gt;\n</code></pre>\n"}, {"tags": ["c++", "random", "boost", "distribution"], "answers": [{"tags": [], "owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "is_accepted": false, "score": 0, "last_activity_date": 1541720527, "last_edit_date": 1541720527, "creation_date": 1541623382, "answer_id": 53197513, "question_id": 53196221, "link": "https://stackoverflow.com/questions/53196221/producing-random-variates-distributed-hypergeometrically/53197513#53197513", "title": "Producing random variates distributed hypergeometrically", "body": "<p>Well, here is simple code (perhaps with bugs, though it compiles, runs and produced something resembling the truth) - sampling <a href=\"https://en.wikipedia.org/wiki/Hypergeometric_distribution\" rel=\"nofollow noreferrer\">Hypergeometric distribution</a>. Notations are the same as in Wiki article. Internally, it fill array with values [0...N-1], shuffle first <code>n</code> of them and count if shuffled values are less than <code>K</code> (successes).</p>\n\n<p>Shuffle is classic <a href=\"https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\" rel=\"nofollow noreferrer\">Fisher-Yates-Knuth</a> one.</p>\n\n<pre><code>#include &lt;cstdint&gt;\n#include &lt;iostream&gt;\n#include &lt;random&gt;\n#include &lt;vector&gt;\n#include &lt;numeric&gt;\n#include &lt;cmath&gt;\n\n#define func auto\n\n\nfunc nCk(uint64_t n, uint64_t k) -&gt; double { // computes binomial coefficient\n    if (k &gt; n)\n        return 0.0;\n\n    if (k * 2ULL &gt; n)\n        k = n - k;\n\n    if (k == 0.0)\n        return 1.0;\n\n    return exp(lgamma(n+1) - (lgamma(k+1) + lgamma(n-k+1)));\n}\n\n\nfunc PMF(uint64_t N, uint64_t K, uint64_t n, uint64_t k) -&gt; double { // Hypergeometric distribution PMF\n    return nCk(K, k) * nCk(N - K, n - k) / nCk(N, n);\n}\n\n\nfunc sample_hyper(int N, int K, int n,            // sampling from Hypergeometric distribution\n                  std::mt19937_64&amp;  rng,\n                  std::vector&lt;int&gt;&amp; nums) -&gt; int {\n\n    int rc{ 0 };\n    for (int k = 0; k != n; ++k) {\n        std::uniform_int_distribution&lt;int&gt; uni{ k, N-1 };\n        auto s = uni(rng);\n        std::swap(nums[k], nums[s]);\n\n        rc += (nums[k] &lt; K);\n    }\n    return rc;\n}\n\n\nfunc main() -&gt; int {\n    auto rng = std::mt19937_64{1234567891ULL};\n\n    int N = 500; // compare with Wiki\n    int K = 50;\n    int n = 100;\n\n    auto nums = std::vector&lt;int&gt;( N );\n    std::iota(nums.begin(), nums.end(), 0); // array to shuffle, filled with 0, 1, 2, 3 ... sequence\n\n    auto h = std::vector&lt;int&gt;( K, 0 ); // histogram\n\n    int NT = 100000; // number of trials\n    for(int k = 0; k != NT; ++k) {\n        int q = sample_hyper(N, K, n, rng, nums);\n        h[q] += 1; // count it\n    }\n\n    for (int k = 0; k != 20; ++k) { // and print it\n        double e = double(h[k]) / double(NT);\n        std::cout &lt;&lt; k &lt;&lt; \"   \" &lt;&lt; e &lt;&lt; \"     \" &lt;&lt; PMF(N, K, n, k) &lt;&lt; '\\n';\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>UPDATE</p>\n\n<p>I've implemented PMF for hypergeometric distribution, and my sampling seems to be consistent with it. Please check updated code. </p>\n"}], "owner": {"reputation": 1790, "user_id": 1494080, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/bb73686af44a279f58a72f79263a41ef?s=128&d=identicon&r=PG", "display_name": "user1494080", "link": "https://stackoverflow.com/users/1494080/user1494080"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1541720527, "creation_date": 1541617847, "question_id": 53196221, "link": "https://stackoverflow.com/questions/53196221/producing-random-variates-distributed-hypergeometrically", "title": "Producing random variates distributed hypergeometrically", "body": "<p>How can we generate random variates for a hypergeometric distribution in C++? Unfortunately, the standard library does not supply a <code>std::hypergeometric_distribution</code>. There is a <a href=\"https://www.boost.org/doc/libs/1_68_0/libs/math/doc/html/math_toolkit/dist_ref/dists/hypergeometric_dist.html\" rel=\"nofollow noreferrer\"><code>boost::math::hypergeometric_distribution</code></a>; however, it appears that it cannot be used for generating random variates.</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 5085, "user_id": 1181353, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zqKlZ.jpg?s=128&g=1", "display_name": "Joseph Willcoxson", "link": "https://stackoverflow.com/users/1181353/joseph-willcoxson"}, "edited": false, "score": 0, "creation_date": 1609900165, "post_id": 53207813, "comment_id": 115964533, "body": "Thank you. The C++ example for OpenSSL is for C++ 11 standard and the Visual C++ compiler I have can emulate no lower than 14. Using your suggestions allows it to compile."}], "tags": [], "owner": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "is_accepted": false, "score": 3, "last_activity_date": 1541680775, "last_edit_date": 1541680775, "creation_date": 1541680317, "answer_id": 53207813, "question_id": 53196145, "link": "https://stackoverflow.com/questions/53196145/initializing-cannot-convert-from-zallocatorchar-to-zallocatoru/53207813#53207813", "title": "&#39;Initializing&#39;: cannot convert from &#39;zallocator&lt;char&gt;&#39; to &#39;zallocator&lt;U&gt;&#39;", "body": "<p>Have a look at the <a href=\"https://en.cppreference.com/w/cpp/memory/allocator\" rel=\"nofollow noreferrer\">allocator documentation</a>, and the <a href=\"https://en.cppreference.com/w/cpp/named_req/Allocator#Allocator_completeness_requirements\" rel=\"nofollow noreferrer\">allocator completeness requirements</a> at cppreference. The last link has the following example for a minimal c++17 allocator:</p>\n\n<pre><code>template &lt;class T&gt;\nstruct Mallocator {\n  typedef T value_type;\n  Mallocator() = default;\n  template &lt;class U&gt; constexpr Mallocator(const Mallocator&lt;U&gt;&amp;) noexcept {}\n  [[nodiscard]] T* allocate(std::size_t n) {\n    if(n &gt; std::size_t(-1) / sizeof(T)) throw std::bad_alloc();\n    if(auto p = static_cast&lt;T*&gt;(std::malloc(n*sizeof(T)))) return p;\n    throw std::bad_alloc();\n  }\n  void deallocate(T* p, std::size_t) noexcept { std::free(p); }\n};\ntemplate &lt;class T, class U&gt;\nbool operator==(const Mallocator&lt;T&gt;&amp;, const Mallocator&lt;U&gt;&amp;) { return true; }\ntemplate &lt;class T, class U&gt;\nbool operator!=(const Mallocator&lt;T&gt;&amp;, const Mallocator&lt;U&gt;&amp;) { return false; }\n</code></pre>\n\n<p>This should give you the idea of how to fix your code.</p>\n\n<hr>\n\n<p>You are missing comparison operators: <a href=\"https://en.cppreference.com/w/cpp/memory/allocator/operator_cmp\" rel=\"nofollow noreferrer\"><code>operator==</code> and <code>operator!=</code></a>:</p>\n\n<pre><code>template &lt;typename U&gt;\nfriend bool operator==(const zallocator&lt;T&gt; &amp; a, const zallocator&lt;U&gt; &amp; b)\n{\n    return true;\n}\ntemplate &lt;typename U&gt;\nfriend bool operator!=(const zallocator&lt;T&gt; &amp; a, const zallocator&lt;U&gt; &amp; b)\n{\n    return false;\n}\n</code></pre>\n\n<p>And a couple of constructors:</p>\n\n<pre><code>constexpr zallocator() noexcept = default;\ntemplate&lt; class U&gt;\nconstexpr zallocator(const zallocator&lt;U&gt;&amp; other) noexcept\n{\n}\n</code></pre>\n\n<p><hr>\nIn your attempt to fix the error of constructors you wrote:</p>\n\n<pre><code>template&lt;class U&gt; zallocator() noexcept { }\n</code></pre>\n\n<p>but that is not the default constructor. The default constructor should not be templated.</p>\n"}], "owner": {"reputation": 1389, "user_id": 3362334, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/62fe1642a05913b0f523b3f705825fd0?s=128&d=identicon&r=PG&f=1", "display_name": "user3362334", "link": "https://stackoverflow.com/users/3362334/user3362334"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 565, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541680775, "creation_date": 1541617570, "last_edit_date": 1541621638, "question_id": 53196145, "link": "https://stackoverflow.com/questions/53196145/initializing-cannot-convert-from-zallocatorchar-to-zallocatoru", "title": "&#39;Initializing&#39;: cannot convert from &#39;zallocator&lt;char&gt;&#39; to &#39;zallocator&lt;U&gt;&#39;", "body": "<p>I was trying to try out the openssl example in C++ given on <a href=\"https://wiki.openssl.org/index.php/EVP_Symmetric_Encryption_and_Decryption\" rel=\"nofollow noreferrer\">this page.</a> The project example file is called env-encrypt.cxx and can be downloaded inside tar.gz on that page.</p>\n\n<p>When I tried to run that example on Visual Studio 2017. I got the following error: <code>'Initializing': cannot convert from 'zallocator&lt;char&gt;' to 'zallocator&lt;U&gt;' in file xstring line 1998</code>.</p>\n\n<p>Here's the output I got:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>1&gt;------ Build started: Project: ConsoleApplication3, Configuration: Debug Win32 ------\n1&gt;ConsoleApplication3.cpp\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\community\\vc\\tools\\msvc\\14.15.26726\\include\\xstring(1998): error C2440: 'initializing': cannot convert from 'zallocator&lt;char&gt;' to 'zallocator&lt;U&gt;'\n1&gt;        with\n1&gt;        [\n1&gt;            U=std::_Container_proxy\n1&gt;        ]\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\community\\vc\\tools\\msvc\\14.15.26726\\include\\xstring(1998): note: No constructor could take the source type, or constructor overload resolution was ambiguous\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\community\\vc\\tools\\msvc\\14.15.26726\\include\\xstring(1997): note: while compiling class template member function 'void std::_String_alloc&lt;std::_String_base_types&lt;_Elem,_Alloc&gt;&gt;::_Free_proxy(void)'\n1&gt;        with\n1&gt;        [\n1&gt;            _Elem=char,\n1&gt;            _Alloc=zallocator&lt;char&gt;\n1&gt;        ]\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\community\\vc\\tools\\msvc\\14.15.26726\\include\\xstring(1949): note: see reference to function template instantiation 'void std::_String_alloc&lt;std::_String_base_types&lt;_Elem,_Alloc&gt;&gt;::_Free_proxy(void)' being compiled\n1&gt;        with\n1&gt;        [\n1&gt;            _Elem=char,\n1&gt;            _Alloc=zallocator&lt;char&gt;\n1&gt;        ]\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\community\\vc\\tools\\msvc\\14.15.26726\\include\\xstring(2066): note: see reference to class template instantiation 'std::_String_alloc&lt;std::_String_base_types&lt;_Elem,_Alloc&gt;&gt;' being compiled\n1&gt;        with\n1&gt;        [\n1&gt;            _Elem=char,\n1&gt;            _Alloc=zallocator&lt;char&gt;\n1&gt;        ]\n1&gt;c:\\users\\xxx\\source\\repos\\consoleapplication3\\consoleapplication3\\consoleapplication3.cpp(86): note: see reference to class template instantiation 'std::basic_string&lt;char,std::char_traits&lt;char&gt;,zallocator&lt;char&gt;&gt;' being compiled\n1&gt;Done building project \"ConsoleApplication3.vcxproj\" -- FAILED.\n========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========\n</code></pre>\n\n<p>To make things easier here's the zallocator class from the env-encrypt.cxx file I downloaded:</p>\n\n<pre><code>template &lt;typename T&gt; \nstruct zallocator\n{\npublic:\n    typedef T value_type;\n    typedef value_type* pointer;\n    typedef const value_type* const_pointer;\n    typedef value_type&amp; reference;\n    typedef const value_type&amp; const_reference;\n    typedef std::size_t size_type;\n    typedef std::ptrdiff_t difference_type;\n\n    pointer address(reference v) const { return &amp;v; }\n    const_pointer address(const_reference v) const { return &amp;v; }\n\n    pointer allocate(size_type n, const void* hint = 0) {\n        if (n &gt; std::numeric_limits&lt;size_type&gt;::max() / sizeof(T))\n            throw std::bad_alloc();\n        return static_cast&lt;pointer&gt; (::operator new (n * sizeof(value_type)));\n    }\n\n    void deallocate(pointer p, size_type n) {\n        OPENSSL_cleanse(p, n * sizeof(T));\n        ::operator delete(p);\n    }\n\n    size_type max_size() const {\n        return std::numeric_limits&lt;size_type&gt;::max() / sizeof(T);\n    }\n\n    template&lt;typename U&gt;\n    struct rebind\n    {\n        typedef zallocator&lt;U&gt; other;\n    };\n\n    void construct(pointer ptr, const T&amp; val) {\n        new (static_cast&lt;T*&gt;(ptr)) T(val);\n    }\n\n    void destroy(pointer ptr) {\n        static_cast&lt;T*&gt;(ptr)-&gt;~T();\n    }\n\n#if __cpluplus &gt;= 201103L\n    template&lt;typename U, typename... Args&gt;\n    void construct(U* ptr, Args&amp;&amp;  ... args) {\n        ::new (static_cast&lt;void*&gt; (ptr)) U(std::forward&lt;Args&gt;(args)...);\n    }\n\n    template&lt;typename U&gt;\n    void destroy(U* ptr) {\n        ptr-&gt;~U();\n    }\n#endif\n};\n</code></pre>\n\n<p>And here is typedef of secure_string which is calling zallocator which seems to be the problem:</p>\n\n<pre><code>typedef std::basic_string&lt;char, std::char_traits&lt;char&gt;, zallocator&lt;char&gt; &gt; secure_string;\n</code></pre>\n\n<p>If you want to see the full source you can download it from the page I linked.</p>\n\n<p>EDIT: When I added this line:</p>\n\n<pre><code>template&lt;class U&gt; zallocator(const zallocator&lt;U&gt;&amp;) noexcept { }\n</code></pre>\n\n<p>to the class definition as suggested in this <a href=\"https://www.reddit.com/r/cpp_questions/comments/5gxuvq/is_there_anything_wrong_with_this_allocator/\" rel=\"nofollow noreferrer\">reddit</a> post I get another exception: 'zallocator::zallocator': no appropriate default constructor available.</p>\n\n<p>I tried adding constructor with no params like this: `</p>\n\n<pre><code>template&lt;class U&gt; zallocator() noexcept { }\n</code></pre>\n\n<p>`, but still getting the same error</p>\n"}, {"tags": ["c#", "c++", "dll"], "owner": {"reputation": 286, "user_id": 8606035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00dc1fe3d87d042d46927e7b6ac6460d?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor", "link": "https://stackoverflow.com/users/8606035/taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1541617221, "creation_date": 1541617221, "question_id": 53196067, "link": "https://stackoverflow.com/questions/53196067/dllnotfoundexception-in-unity-but-working-properly-outside-unity", "title": "DllNotFoundException in Unity, but working properly outside Unity", "body": "<p>I have created a C++ DLL that is imported in a C# DLL. This C# DLL is again put in to the Assets folder of my Unity project, and I get the DllNotFoundException for the C++ DLL. </p>\n\n<p>I have already tested that the C++ DLL import works, by creating a sample Visual Studio C# project and importing the same C++ DLL (from the same location) and using the function inside. </p>\n\n<p>Inside C#, I import the C++ DLL as follows:</p>\n\n<pre><code>[DllImport(\"C:\\\\Users\\\\me\\\\Documents\\\\TestForNativeDLL.dll\", EntryPoint = \"test\", CallingConvention = CallingConvention.StdCall)]\n</code></pre>\n\n<p>What are some reasons why this works for a sample C# project, but not in Unity?\nI have set all platform target to x86.</p>\n"}, {"tags": ["c++", "templates"], "answers": [{"comments": [{"owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "edited": false, "score": 1, "creation_date": 1541618169, "post_id": 53196250, "comment_id": 93281050, "body": "You should probably mention that <code>auto</code> parameters in lambda is a C++14 feature and that <code>std::tie</code> requires to include <code>&lt;tuple&gt;</code>."}, {"owner": {"reputation": 3, "user_id": 10620110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e9e3a3b1f7a46ad4c5ae7db7b01563f?s=128&d=identicon&r=PG&f=1", "display_name": "Hanito", "link": "https://stackoverflow.com/users/10620110/hanito"}, "edited": false, "score": 0, "creation_date": 1541624406, "post_id": 53196250, "comment_id": 93284005, "body": "in C++11 i found that I can use the following:  <code>template&lt;typename Container&gt; bool isContainerEqual(const Container &amp;lhs,const Container &amp;rhs) {     auto pred = [] (decltype(*lhs.begin()) a, decltype(a) b)                    { return *a == *b; };      return std::equal(lhs.begin(), lhs.end(), rhs.begin(), pred); }</code>  Interesting ghow the decltype is used. I learned something new. thank you"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 1, "last_activity_date": 1541617974, "creation_date": 1541617974, "answer_id": 53196250, "question_id": 53196058, "link": "https://stackoverflow.com/questions/53196058/template-function-for-container-and-type-to-compare-vector-of-pointers/53196250#53196250", "title": "Template function for container and type to compare vector of pointers", "body": "<p>The problem with</p>\n\n<pre><code>template&lt;typename T , typename Container &gt;\nbool isEqual(const Container &amp;lhs,const Container &amp;rhs ) {\n    bool ok = equal(begin(lhs), end(lhs), begin(rhs),\n                [](const T* lhs, const T* rhs){ return *lhs == * rhs; });\n\n    return ok;\n}\n</code></pre>\n\n<p>is that there is no way to deduce what <code>T</code> is.  Since it is not used in the function parameters the compiler doesn't know what it should be so you have to tell it when you call the function.  That said, you don't actually need <code>T</code>.  We can rewrite the lambda to use <code>auto</code> parameters which will turn the function call operator of the lambda into a template.  That changes the code to be</p>\n\n<pre><code>template&lt;typename Container &gt;\nbool isEqual(const Container &amp;lhs,const Container &amp;rhs ) {\n    bool ok = equal(begin(lhs), end(lhs), begin(rhs),\n                [](const auto* lhs, const auto* rhs){ return *lhs == * rhs; });\n\n    return ok;\n}\n</code></pre>\n\n<p>Which brings you to your next issue.  <code>*lhs == * rhs</code> compares the objets using  <code>operator ==</code>.  You haven't defined a <code>operator ==</code> for <code>Point</code> so it wont compile.  You need to change <code>Point</code> to something like</p>\n\n<pre><code>class Point {\n    public:\n    Point(int x, int y):_x(x),_y(y) {}\n    bool operator ==(const Point&amp; rhs) { return std::tie(_x, _y) == std::tie(rhs._x, rhs._y); }\n    private:\n     int _x;\n     int _y;\n};\n</code></pre>\n\n<p>So they can actually be compared.</p>\n\n<hr>\n\n<p>Do note that if you use a <code>std::vector&lt;Point&gt;</code> instead of a <code>std::vector&lt;Point *&gt;</code> then <code>std::vector</code> provides it's own <code>operator ==</code> and you can compare two <code>std::vector&lt;Point&gt;</code> just by doing</p>\n\n<pre><code>std::vector&lt;Point&gt; v1;\n// fill v1\nstd::vector&lt;Point&gt; v2\n// fill v2\nif (v1 == v2)\n    // vectors are equal.\n</code></pre>\n\n<p>There doesn't look to be any reason you to have a <code>std::vector&lt;Point *&gt;</code> so I recommend this solution.</p>\n"}, {"tags": [], "owner": {"reputation": 478, "user_id": 4082924, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/baa28ab3634596859548c2a799b7622e?s=128&d=identicon&r=PG&f=1", "display_name": "Manish", "link": "https://stackoverflow.com/users/4082924/manish"}, "is_accepted": false, "score": 0, "last_activity_date": 1541620522, "creation_date": 1541620522, "answer_id": 53196858, "question_id": 53196058, "link": "https://stackoverflow.com/questions/53196058/template-function-for-container-and-type-to-compare-vector-of-pointers/53196858#53196858", "title": "Template function for container and type to compare vector of pointers", "body": "<p>Since you have asked \"I want to compare 2 containers (vectors or sets) of pointers.\"\nI will suggest you to use the following form of <code>std::equal</code> for element to element comparison, as your mentioned form only compares it till the length of the first container.</p>\n\n<pre><code>template&lt;typename Container &gt;\nbool isEqual(const Container &amp;lhs,const Container &amp;rhs ) {\nbool ok = equal(begin(lhs), end(lhs), begin(rhs), end(rhs),\n    [](const auto* lhs, const auto* rhs){ return *lhs == * rhs; });\n\nreturn ok;\n}\n</code></pre>\n\n<p>That being said, you will anyways have to define <strong>==</strong> operator for the comparison that you are performing in the end. As mentioned by the above answer too.</p>\n"}], "owner": {"reputation": 3, "user_id": 10620110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e9e3a3b1f7a46ad4c5ae7db7b01563f?s=128&d=identicon&r=PG&f=1", "display_name": "Hanito", "link": "https://stackoverflow.com/users/10620110/hanito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 53196250, "answer_count": 2, "score": 0, "last_activity_date": 1541620522, "creation_date": 1541617194, "question_id": 53196058, "link": "https://stackoverflow.com/questions/53196058/template-function-for-container-and-type-to-compare-vector-of-pointers", "title": "Template function for container and type to compare vector of pointers", "body": "<p>I want to compare 2 containers (vectors or sets) of pointers. I am trying to have a function that is also independent of the type.</p>\n\n<p>First I tried the following. But the problem is that it is always returning 0 even tho both containers have objects with same content.</p>\n\n<pre><code>  template&lt;typename Container &gt;\n    bool isEqual(const Container &amp;lhs,const Container &amp;rhs ) {\n        bool ok = equal(begin(lhs), end(lhs), begin(rhs));\n\n        return ok;\n    }\n</code></pre>\n\n<p>Then I tried to use the following function:</p>\n\n<pre><code> template&lt;typename T , typename Container &gt;\n    bool isEqual(const Container &amp;lhs,const Container &amp;rhs ) {\n        bool ok = equal(begin(lhs), end(lhs), begin(rhs),\n                    [](const T* lhs, const T* rhs){ return *lhs == * rhs; });\n\n        return ok;\n    }\n</code></pre>\n\n<p>but the problem is that it is producing the following errors and I don't understand why. </p>\n\n<pre><code> In function 'int main()':\n31:31: error: no matching function for call to 'isEqual(std::vector&lt;Point*&gt;&amp;, std::vector&lt;Point*&gt;&amp;)'\n31:31: note: candidate is:\n19:6: note: template&lt;class T, class Container&gt; bool isEqual(const Container&amp;, const Container&amp;)\n19:6: note:   template argument deduction/substitution failed:\n31:31: note:   couldn't deduce template parameter 'T'\n36:31: error: no matching function for call to 'isEqual(std::set&lt;Point*&gt;&amp;, std::set&lt;Point*&gt;&amp;)'\n36:31: note: candidate is:\n19:6: note: template&lt;class T, class Container&gt; bool isEqual(const Container&amp;, const Container&amp;)\n19:6: note:   template argument deduction/substitution failed:\n36:31: note:   couldn't deduce template parameter 'T'\n</code></pre>\n\n<hr>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;set&gt;\n\nusing namespace std;\n\nclass Point {\n    public:\n    Point(int x, int y):_x(x),_y(y) {}\n    private:\n     int _x;\n     int _y;\n};\n\ntemplate&lt;typename T , typename Container &gt;\nbool isEqual(const Container &amp;lhs,const Container &amp;rhs ) {\n    bool ok = equal(begin(lhs), end(lhs), begin(rhs),\n                [](const T* lhs, const T* rhs){ return *lhs == * rhs; });\n\n    return ok;\n}\n\nint main()\n{\n    std::vector&lt;Point *&gt; v1 = {new Point(10,10)};\n    std::vector&lt;Point *&gt; v2  = {new Point(10,10)};\n\n    std::cout &lt;&lt; isEqual(v1,v2) &lt;&lt; std::endl;\n\n    std::set&lt;Point *&gt; s1 = {new Point(10,10)};\n    std::set&lt;Point *&gt; s2  = {new Point(10,10)};\n\n    std::cout &lt;&lt; isEqual(s1,s2) &lt;&lt; std::endl;\n\n    return 0;\n} \n</code></pre>\n"}, {"tags": ["c++", "variadic-templates"], "comments": [{"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 2, "creation_date": 1541618011, "post_id": 53196031, "comment_id": 93280984, "body": "if you can use C++17, you can avoid recursion and, using template folding, simply write <code>template &lt;func_t ... Fs&gt; int Total () { return (Fs() + ...); }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 4010, "user_id": 1812187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MRXi9.png?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/1812187/carlton"}, "edited": false, "score": 0, "creation_date": 1541617701, "post_id": 53196136, "comment_id": 93280850, "body": "Of course right after I posted the question I found this same answer in another thread: <a href=\"https://stackoverflow.com/questions/7973827/ambiguous-overload-on-argument-less-variadic-templates?rq=1\" title=\"ambiguous overload on argument less variadic templates\">stackoverflow.com/questions/7973827/&hellip;</a>."}, {"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "reply_to_user": {"reputation": 4010, "user_id": 1812187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MRXi9.png?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/1812187/carlton"}, "edited": false, "score": 0, "creation_date": 1541618577, "post_id": 53196136, "comment_id": 93281235, "body": "@Carlton, Shall we close this question as a duplicate?"}, {"owner": {"reputation": 4010, "user_id": 1812187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MRXi9.png?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/1812187/carlton"}, "edited": false, "score": 0, "creation_date": 1541625204, "post_id": 53196136, "comment_id": 93284377, "body": "Yes, go ahead..."}], "tags": [], "owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "is_accepted": false, "score": 2, "last_activity_date": 1541617535, "creation_date": 1541617535, "answer_id": 53196136, "question_id": 53196031, "link": "https://stackoverflow.com/questions/53196031/passing-functions-as-variadic-template-arguments-and-calling-them/53196136#53196136", "title": "Passing functions as variadic template arguments, and calling them", "body": "<p>Your base case declaration is incorrect, and results in the compiler being unable to differentiate between a call to your base case and a call to your recursive base. </p>\n\n<p>If you make your base case an empty list of templates, there is no longer ambiguity.</p>\n\n<pre><code>template &lt;class none = void&gt;\nint Total() {\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 4010, "user_id": 1812187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MRXi9.png?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/1812187/carlton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "closed_date": 1541618820, "answer_count": 1, "score": 0, "last_activity_date": 1541617535, "creation_date": 1541617069, "question_id": 53196031, "link": "https://stackoverflow.com/questions/53196031/passing-functions-as-variadic-template-arguments-and-calling-them", "closed_reason": "Duplicate", "title": "Passing functions as variadic template arguments, and calling them", "body": "<p>I want to create a \"grand total\" function by summing several other functions together. This can be done at compile time, so I thought a recursive variadic function template would be a good solution. My code so far:</p>\n\n<pre><code>int One(){return 1;}\nint Two(){return 2;}\nint Three(){return 3;}\n\nusing func_t = int(void);\n\n//Base case\ntemplate &lt;func_t F&gt;\nint Total() {\n    return F();\n}\n\ntemplate &lt;func_t F, func_t... Fs&gt;\nint Total() {\n    return F() + Total&lt;Fs...&gt;();\n}\n\nint main(int argc, char *argv[])\n{\n    cout &lt;&lt; Total&lt;One, Two, Three&gt;() &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>However, I get MSVC compiler error C2668: 'Total': ambiguous call to overloaded function; could be <code>int Total&lt;int Three(void),&gt;(void)</code> or <code>int Total&lt;int Three(void)&gt;(void)</code></p>\n\n<p>I don't understand why the compiler has two similar candidates for my function template, the only difference being that one has an extra comma.</p>\n"}, {"tags": ["c++", "qt", "opengl", "textures", "transparency"], "comments": [{"owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "edited": false, "score": 0, "creation_date": 1541616937, "post_id": 53195913, "comment_id": 93280512, "body": "Aside: there&#39;s no need to call <code>glTexImage2D</code> and <code>glGenerateMipmap</code> each time you render. Only upload textures and generate mipmaps when they actually change."}], "answers": [{"comments": [{"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1541622548, "post_id": 53196090, "comment_id": 93283151, "body": "Perhaps, instead of <code>discard</code> transparent fragments better change their depth by using <code>gl_FragDepth</code>"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1541624204, "post_id": 53196090, "comment_id": 93283928, "body": "@Ripi2 No, in the early days of OpenGL the solution for this was the alpha test. Nowadays the equivalent solution is to discard fragments in the fragment shader by the <a href=\"https://www.khronos.org/opengl/wiki/Fragment_Shader\" rel=\"nofollow noreferrer\"><code>discard</code></a> keyword, dependent on the alpha value of the fragment - in other words to code an alpha test in the fragment shader."}, {"owner": {"reputation": 479, "user_id": 7576339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07e1c1e72ce01b67cd9055df7db5e3d6?s=128&d=identicon&r=PG&f=1", "display_name": "Arctic Pi", "link": "https://stackoverflow.com/users/7576339/arctic-pi"}, "edited": false, "score": 0, "creation_date": 1541945464, "post_id": 53196090, "comment_id": 93383953, "body": "@thomas Thanks a lot! If I sort the textures according to their depth value (position.z) before drawing them, the problem is solved! ;) But there is still a case in which this strategy does not help: when two textures are exactly at the same depth, that is when the position.z values of the two textures are equal. Any suggestions? Thanks!"}, {"owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "edited": false, "score": 0, "creation_date": 1541951755, "post_id": 53196090, "comment_id": 93385790, "body": "Well, what would you <i>want</i> to happen in that case...?"}], "tags": [], "owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "is_accepted": false, "score": 2, "last_activity_date": 1541617339, "creation_date": 1541617339, "answer_id": 53196090, "question_id": 53195913, "link": "https://stackoverflow.com/questions/53195913/qt-opengl-texture-transparency/53196090#53196090", "title": "Qt &amp; OpenGL : texture transparency", "body": "<p>This probably happens because you have depth testing enabled. Even though parts of the texture are (partly or fully) transparent, OpenGL still writes to the depth buffer, so the pink light's quad appears to obscure the green light. It works the other way round, because the pink light is drawn first, so the green light hasn't been written to the depth buffer at that point.</p>\n\n<p>The usual solution to this is to render transparent textures in back to front order.</p>\n\n<p>You could also just write your fragment shader to <code>discard</code> fragments if they are transparent. But this results in artifacts if you have semi-transparent fragments, which you have, because of texture filtering and mipmaps.</p>\n"}], "owner": {"reputation": 479, "user_id": 7576339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07e1c1e72ce01b67cd9055df7db5e3d6?s=128&d=identicon&r=PG&f=1", "display_name": "Arctic Pi", "link": "https://stackoverflow.com/users/7576339/arctic-pi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1541617339, "creation_date": 1541616630, "question_id": 53195913, "link": "https://stackoverflow.com/questions/53195913/qt-opengl-texture-transparency", "title": "Qt &amp; OpenGL : texture transparency", "body": "<p>I have two textures rendered in the same way. The green texture has the right transparency in the right places, but when I move the pink texture in front, it shows the background color where it should be transparent.</p>\n\n<p><a href=\"https://i.stack.imgur.com/PyGFn.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PyGFn.gif\" alt=\"enter image description here\"></a></p>\n\n<p>This is the snippet code of the <strong>paintGL</strong> method that renders the textures.</p>\n\n<pre><code>void OpenGLWidget::paintGL()\n{\n    // ...\n\n    for (int i = 0; i &lt; lights.size(); i++)\n    {\n        glUseProgram(lights[i].program);\n\n        setUniform3fv(program, \"lightPosition\", 1, &amp;lights[i].position[0]);\n\n        glActiveTexture(GL_TEXTURE0);\n        glBindTexture(GL_TEXTURE_2D, lights[i].texture);\n\n        lights[i].svg.setColor(toColor(lights[i].diffuse));\n        glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, lights[i].svg.width(), lights[i].svg.height(), 0, GL_RGBA, GL_UNSIGNED_BYTE, lights[i].svg.toImage().constBits());\n        glGenerateMipmap(GL_TEXTURE_2D);\n\n        glBindVertexArray(lights[i].vertexArray);\n        glDrawElements(GL_TRIANGLES, lights[i].indices.size(), GL_UNSIGNED_BYTE, nullptr);\n    }\n\n    update();\n}\n</code></pre>\n\n<p>The <strong>toImage</strong> method of the <strong>svg</strong> class generates a new QImage object from the svg file, so the new texture value should be updated with each frame.</p>\n\n<p>Where am I doing wrong? Thanks!</p>\n"}, {"tags": ["c++", "language-lawyer", "c++17", "segmentation-fault", "stdoptional"], "comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1541616149, "post_id": 53195768, "comment_id": 93280149, "body": "The same reason as for <code>std::vector::operator[]</code>"}, {"owner": {"reputation": 7392, "user_id": 1555823, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2b69fc6d16ff23e3509b2f3602838acd?s=128&d=identicon&r=PG", "display_name": "vladon", "link": "https://stackoverflow.com/users/1555823/vladon"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1541616206, "post_id": 53195768, "comment_id": 93280172, "body": "@JonathanWakely <code>std::vector::operator[]</code> can sigsegv, but optional will never sigsegv."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 7, "creation_date": 1541616273, "post_id": 53195768, "comment_id": 93280199, "body": "&quot;sigsegv&quot; isn&#39;t part of the C++ standard. The consistent theme here is &quot;undefined behaviour&quot;."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1541616275, "post_id": 53195768, "comment_id": 93280202, "body": "@vladon They are both undefined behavior, they both might sigsegv, they might both throw, they might both do anything at all."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1541616428, "post_id": 53195768, "comment_id": 93280259, "body": "SIGSEGV is the signal raised when you access memory outside your address space, a disengaged <code>optional</code> object is obviously not outside your address space, it just doesn&#39;t contain an initialized value. Why should it cause a segfault?"}, {"owner": {"reputation": 7392, "user_id": 1555823, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2b69fc6d16ff23e3509b2f3602838acd?s=128&d=identicon&r=PG", "display_name": "vladon", "link": "https://stackoverflow.com/users/1555823/vladon"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1541616498, "post_id": 53195768, "comment_id": 93280288, "body": "@JonathanWakely &quot;not outside your address space&quot; - it&#39;s a detail of implementation. I&#39;m asking why standard does not require anything."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1541616699, "post_id": 53195768, "comment_id": 93280394, "body": "Requiring a hard error is a trade-off between performance and usability. Requiring a well defined error requires that the implementation performs a check. When faced with these dilemmas, c++ usually goes with the decision that avoids imposing overhead."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1541617196, "post_id": 53195768, "comment_id": 93280611, "body": "Undefined Behaviour does not mandate a specific result. <i>Anything</i> can happen. Just don&#39;t write bugs is the only advice that can be given."}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1541698713, "post_id": 53195768, "comment_id": 93314187, "body": "If it is required to throw, <code>t.value()</code> should be used. <a href=\"https://en.cppreference.com/w/cpp/utility/optional/value\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/optional/value</a>"}], "answers": [{"comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 5, "creation_date": 1541616602, "post_id": 53195876, "comment_id": 93280342, "body": "<i>&quot;The committee chose performance over safety.&quot;</i> The committee chose to leave it up to the std::lib implementation to decide, and the implementation might choose performance in some configurations and safe in others (e.g. when assertions are enabled)."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1541616757, "post_id": 53195876, "comment_id": 93280416, "body": "It&#39;s more that the committee chooses not the impose overhead if the same result can be achieved by the user with a manual test of their own if they desire it. It&#39;s not about letting the implementation choose what solution they want to go with, implementers can add whatever safety checks they want provided it doesn&#39;t violate any other part of the standard (like complexity requirements (but even then some do for debug builds))."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 10, "last_activity_date": 1541616760, "last_edit_date": 1541616760, "creation_date": 1541616458, "answer_id": 53195876, "question_id": 53195768, "link": "https://stackoverflow.com/questions/53195768/why-there-is-no-throw-or-sigsegv-while-accessing-empty-stdoptional/53195876#53195876", "title": "Why there is no throw or sigsegv while accessing empty std::optional?", "body": "<blockquote>\n  <p>Why the Standard does not require throwing or sigsegv here?</p>\n</blockquote>\n\n<p>Because requiring some particular behaviour implicitly imposes the requirement to add a branch to check whether that behaviour - be it throwing or something else - should occur.</p>\n\n<p>By specifying that the behaviour is undefined, the standard allows the implementation to <em>not</em> check whether optional is empty upon every indirection. Branching the execution is potentially slower than not branching.</p>\n\n<p>Rather than mandating safety, the committee let the standard library implementers to choose performance (and simplicity). The implementation that you tested seems to have chosen to not throw an exception or otherwise inform you of the mistake.</p>\n"}, {"tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": false, "score": 6, "last_activity_date": 1541686182, "last_edit_date": 1541686182, "creation_date": 1541616511, "answer_id": 53195886, "question_id": 53195768, "link": "https://stackoverflow.com/questions/53195768/why-there-is-no-throw-or-sigsegv-while-accessing-empty-stdoptional/53195886#53195886", "title": "Why there is no throw or sigsegv while accessing empty std::optional?", "body": "<p>Because it is undefined behavior, section <a href=\"http://eel.is/c++draft/optional.observe#5\" rel=\"nofollow noreferrer\">[optional.observe]p5</a> says:</p>\n\n<blockquote>\n  <p>Requires: *this contains a value.</p>\n</blockquote>\n\n<p>and violating a requires clause is undefined behavior, from <a href=\"http://eel.is/c++draft/res.on.required#1\" rel=\"nofollow noreferrer\">[res.on.required#1]p1</a> which is under <a href=\"http://eel.is/c++draft/requirements\" rel=\"nofollow noreferrer\"> Library-wide requirements</a>:</p>\n\n<blockquote>\n  <p>Violation of any preconditions specified in a function's Requires: element results in undefined behavior unless the function's Throws: element specifies throwing an exception when the precondition is violated.</p>\n</blockquote>\n\n<p>So you have no expecation as to the result. From the definition of <a href=\"http://eel.is/c++draft/intro.defs#defns.undefined\" rel=\"nofollow noreferrer\">undefined behavior</a>:</p>\n\n<blockquote>\n  <p>behavior for which this document imposes no requirements</p>\n</blockquote>\n\n<p>Requiring the implementation to check would be a cost and not all users would want to take that cost. So this becomes a quality of implementation issue. An implementation is free to performing checks in different modes of operation for example when assertions are enabled.</p>\n\n<p>The user has the option of taking the cost themselves via <a href=\"https://en.cppreference.com/w/cpp/utility/optional/operator_bool\" rel=\"nofollow noreferrer\">has_value</a> or <a href=\"https://en.cppreference.com/w/cpp/utility/optional/value_or\" rel=\"nofollow noreferrer\">value_or</a>. If the user wants an operation that can throw they can use <a href=\"https://en.cppreference.com/w/cpp/utility/optional/value\" rel=\"nofollow noreferrer\">value</a>.</p>\n\n<p>Note that <a href=\"https://stackoverflow.com/a/18986406/1708801\">sigsegv, segfaults etc... are an implementation defined behavior</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1541617505, "post_id": 53195936, "comment_id": 93280758, "body": "Not just around address 0. Whenever you cross a page boundary you&#39;ll usually get a fault if the page is not mapped. Not fatal if the page is in your address space (the OS will just map it in) but otherwise fatal."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1541618447, "post_id": 53195936, "comment_id": 93281160, "body": "@jesp sure, but barring garbage pointer data, pointee that once pointed somewhere don&#39;t give pagefaults usually."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 8, "last_activity_date": 1541767418, "last_edit_date": 1541767418, "creation_date": 1541616735, "answer_id": 53195936, "question_id": 53195768, "link": "https://stackoverflow.com/questions/53195768/why-there-is-no-throw-or-sigsegv-while-accessing-empty-stdoptional/53195936#53195936", "title": "Why there is no throw or sigsegv while accessing empty std::optional?", "body": "<p>C++ embraces the idea of undefined behavior.</p>\n\n<p>Not all C++ operations have behavior defined by the standard.  This permits compilers to assume they never happen, and can result in much faster code in many cases.</p>\n\n<p>Here, by leaving the result of using a <code>std::optional</code> that is unengaged undefined, it the cost of accessing data stored in a <code>std::optional</code> is the same as the cost of accessing data not stored in a <code>std::optional</code>.  The only costs are the extra room required, and you as a programmer promising to keep track of if it is engaged or not.</p>\n\n<p>Now compilers are free to insert checks there, and some do in debug builds.</p>\n\n<p>Note that usually C++ <code>std</code> library types include <em>safe</em> and <em>unsafe</em> methods for accessing data.</p>\n\n<p>The fact that invalid pointers sometimes result in a sigsev is because most OS's protect addresses around 0 and crash programs that access it.  This is because this was low cost, and it catches a bunch of bad behavior from many assembly, C and C++ programs.</p>\n\n<p>If you want optional to throw when empty, use <code>.value()</code>.  If you don't, use <code>operator*</code>.  If you want a default value if one isn't there, use <code>.value_or</code>.</p>\n"}], "owner": {"reputation": 7392, "user_id": 1555823, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2b69fc6d16ff23e3509b2f3602838acd?s=128&d=identicon&r=PG", "display_name": "vladon", "link": "https://stackoverflow.com/users/1555823/vladon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 276, "favorite_count": 0, "accepted_answer_id": 53195876, "answer_count": 3, "score": 2, "last_activity_date": 1541767418, "creation_date": 1541616022, "last_edit_date": 1541619073, "question_id": 53195768, "link": "https://stackoverflow.com/questions/53195768/why-there-is-no-throw-or-sigsegv-while-accessing-empty-stdoptional", "title": "Why there is no throw or sigsegv while accessing empty std::optional?", "body": "<p>The example:</p>\n\n<pre><code>#include &lt;optional&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    optional&lt;int&gt; t{}; // nullopt (empty) by default\n\n    cout &lt;&lt; *t &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Actually this program prints some int (uninitialized value of type <code>int</code>).\nAlso, libcxx uses assert-check for accessing non-engaged value.</p>\n\n<p>Why the Standard does not require throwing or sigsegv here?</p>\n"}, {"tags": ["android", "c++", "android-ndk", "libuv", "bionic"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1541616032, "post_id": 53195673, "comment_id": 93280097, "body": "&quot;error: use of undeclared identifier EPOLL_CLOEXEC&#39;&quot; &lt;-- include the proper header that declares EPOLL_CLOEXEC."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 10506332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e90937830cc3708759c4705907815682?s=128&d=identicon&r=PG&f=1", "display_name": "akbar_ahmad", "link": "https://stackoverflow.com/users/10506332/akbar-ahmad"}, "edited": false, "score": 0, "creation_date": 1541736644, "post_id": 53217341, "comment_id": 93326712, "body": "you totally right. as i changed the min api level to 21 and linked with &#39;atomic&#39; it got built successfully."}], "tags": [], "owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "is_accepted": true, "score": 3, "last_activity_date": 1541717400, "creation_date": 1541717400, "answer_id": 53217341, "question_id": 53195673, "link": "https://stackoverflow.com/questions/53195673/android-libuv-use-of-undeclared-identifier-epoll-cloexec/53217341#53217341", "title": "android libuv use of undeclared identifier &#39;EPOLL_CLOEXEC&#39;", "body": "<p>The issue is probably that your <code>minSdkVersion</code> is too low. That wasn't supported until Android L. Unfortunately because some other popular projects misused that constant to detect if <code>epoll_create1</code> was available, the constant is not available until <code>epoll_create1</code> is. See <a href=\"https://github.com/android-ndk/ndk/issues/394\" rel=\"nofollow noreferrer\">https://github.com/android-ndk/ndk/issues/394</a> for more details.</p>\n"}], "owner": {"reputation": 53, "user_id": 10506332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e90937830cc3708759c4705907815682?s=128&d=identicon&r=PG&f=1", "display_name": "akbar_ahmad", "link": "https://stackoverflow.com/users/10506332/akbar-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 533, "favorite_count": 0, "accepted_answer_id": 53217341, "answer_count": 1, "score": 1, "last_activity_date": 1541717400, "creation_date": 1541615653, "last_edit_date": 1592644375, "question_id": 53195673, "link": "https://stackoverflow.com/questions/53195673/android-libuv-use-of-undeclared-identifier-epoll-cloexec", "title": "android libuv use of undeclared identifier &#39;EPOLL_CLOEXEC&#39;", "body": "<p>i'm trying to build libuv for android in android studio cmake and i get the following errors:</p>\n<blockquote>\n<p>error: use of undeclared identifier 'EPOLL_CLOEXEC'</p>\n<p>warning: implicit declaration of function 'epoll_pwait' [-Wimplicit-function-declaration]</p>\n<p>warning: this function declaration is not a prototype [-Wstrict-prototypes]</p>\n</blockquote>\n<p>how can i fix this?\nam i supposed to use libuv toolchain to build it?</p>\n"}, {"tags": ["c++", "linux", "qt", "class", "can-bus"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1541615773, "post_id": 53195603, "comment_id": 93279986, "body": "&quot;undefined reference to &lt;foo&gt;&quot; usually means you forgot to link the library or object file implementing <code>foo</code> (or linked them in the wrong order)."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1541615956, "post_id": 53195603, "comment_id": 93280072, "body": "There are no definitions of those in your header."}, {"owner": {"reputation": 73, "user_id": 10043467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gktkh.jpg?s=128&g=1", "display_name": "viduwoy", "link": "https://stackoverflow.com/users/10043467/viduwoy"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1541616535, "post_id": 53195603, "comment_id": 93280309, "body": "@molbdnilo where/how would I need to define it? Is the line <code>static QCanBus *instance();</code> not defining <code>QCanBus::instance()</code>?"}, {"owner": {"reputation": 73, "user_id": 10043467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gktkh.jpg?s=128&g=1", "display_name": "viduwoy", "link": "https://stackoverflow.com/users/10043467/viduwoy"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1541616642, "post_id": 53195603, "comment_id": 93280359, "body": "@JesperJuhl that is entirely possible since I am importing missing files in linux from windows. How could I go about finding the missing library or object file? I already have all the dependent <code>#include</code> files."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1541616873, "post_id": 53195603, "comment_id": 93280486, "body": "@viduwoy you could look through the source to find whatever defines the symbol, then look through your build system files to see what that source gets build into. You could just objdump all your object/library files and grep for the symbol in question. You could read documentation to see if it tells you what to link against. There are many ways to find out."}, {"owner": {"reputation": 6147, "user_id": 3767076, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/64707b213de57fb785081ba23aaea2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3767076/felix"}, "edited": false, "score": 0, "creation_date": 1541633485, "post_id": 53195603, "comment_id": 93287472, "body": "According to the documentation QCanBus was added to Qt in 5.8 (see <a href=\"https://doc.qt.io/qt-5.11/qcanbus.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5.11/qcanbus.html</a>) - which means you have to update your Qt (The technical preview was added in 5.6 - but that api is different to the current one, wich means if you want to stay compatible to 5.11, you must use at least 5.8)"}], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 10043467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gktkh.jpg?s=128&g=1", "display_name": "viduwoy", "link": "https://stackoverflow.com/users/10043467/viduwoy"}, "is_accepted": false, "score": 0, "last_activity_date": 1548377162, "creation_date": 1548377162, "answer_id": 54357511, "question_id": 53195603, "link": "https://stackoverflow.com/questions/53195603/qt-creator-undefined-reference-to-classfunction-in-linux/54357511#54357511", "title": "Qt creator Undefined reference to &quot;class::function&quot; in linux", "body": "<p>QCanBus was missing QCanBus.cpp and was not declared.</p>\n"}], "owner": {"reputation": 73, "user_id": 10043467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gktkh.jpg?s=128&g=1", "display_name": "viduwoy", "link": "https://stackoverflow.com/users/10043467/viduwoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 324, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1548377162, "creation_date": 1541615280, "question_id": 53195603, "link": "https://stackoverflow.com/questions/53195603/qt-creator-undefined-reference-to-classfunction-in-linux", "title": "Qt creator Undefined reference to &quot;class::function&quot; in linux", "body": "<p>This question is similar to one that has been asked before, but I am having an issue with Qt recognizing my class and functions despite them being defined. I am doing this in linux where the Qt version is only 5.5 while the windows version is at 5.11. When running the same program in windows, I get no errors.</p>\n\n<p>I am getting \"undefined reference to <code>QCanBus::instance()</code>\" errors </p>\n\n<p>This is happening for every <code>QCanBus</code> function. In my code snippet from <code>connectdialogue.cpp</code>, only the first occurrence is featured and can be found at the second to last code line and gives the errors:</p>\n\n<p>\"undefined reference to <code>QCanBus::instance()</code>\"</p>\n\n<p>\"undefined reference to <code>QCanBus::plugins()</code>\"</p>\n\n<p>These errors are given despite being defined in the <code>qcanbus.h</code> headder file.</p>\n\n<p>I have tried adding the lines <code>static QCanBus *instance()</code> or alternatively <code>QCanBus *instance()</code> under the <code>#include</code> lines in my <code>connectdialogue.cpp</code>, but I am then presented with the warning:\n \"<code>QCanBus::instance()</code> is defined, but unused\" when it is clearly used on the second to last line of the featured code snippet.</p>\n\n<p>How do I fix these errors?</p>\n\n<p>connectdialogue.cpp</p>\n\n<pre><code> #include \"connectdialog.h\"\n #include \"ui_connectdialog.h\"\n\n #include \"qcanbus.h\"\n\nConnectDialog::ConnectDialog(QWidget *parent) :\n     QDialog(parent),\n     m_ui(new Ui::ConnectDialog)\n{\nm_ui-&gt;setupUi(this);\n\nm_ui-&gt;errorFilterEdit-&gt;setValidator(new QIntValidator(0, 0x1FFFFFFFU, this));\n\nm_ui-&gt;loopbackBox-&gt;addItem(tr(\"unspecified\"), QVariant());\nm_ui-&gt;loopbackBox-&gt;addItem(tr(\"false\"), QVariant(false));\nm_ui-&gt;loopbackBox-&gt;addItem(tr(\"true\"), QVariant(true));\n\nm_ui-&gt;receiveOwnBox-&gt;addItem(tr(\"unspecified\"), QVariant());\nm_ui-&gt;receiveOwnBox-&gt;addItem(tr(\"false\"), QVariant(false));\nm_ui-&gt;receiveOwnBox-&gt;addItem(tr(\"true\"), QVariant(true));\n\nm_ui-&gt;canFdBox-&gt;addItem(tr(\"false\"), QVariant(false));\nm_ui-&gt;canFdBox-&gt;addItem(tr(\"true\"), QVariant(true));\n\nm_ui-&gt;dataBitrateBox-&gt;setFlexibleDateRateEnabled(true);\n\nconnect(m_ui-&gt;okButton, &amp;QPushButton::clicked, this, &amp;ConnectDialog::ok);\nconnect(m_ui-&gt;cancelButton, &amp;QPushButton::clicked, this, &amp;ConnectDialog::cancel);\nconnect(m_ui-&gt;useConfigurationBox, &amp;QCheckBox::clicked,\n        m_ui-&gt;configurationBox, &amp;QGroupBox::setEnabled);\nconnect(m_ui-&gt;backendListBox, &amp;QComboBox::currentTextChanged,\n        this, &amp;ConnectDialog::backendChanged);\nconnect(m_ui-&gt;interfaceListBox, &amp;QComboBox::currentTextChanged,\n        this, &amp;ConnectDialog::interfaceChanged);\nm_ui-&gt;rawFilterEdit-&gt;hide();\nm_ui-&gt;rawFilterLabel-&gt;hide();\n\nm_ui-&gt;backendListBox-&gt;addItems(QCanBus::instance()-&gt;plugins());\n\nupdateSettings();\n }\n</code></pre>\n\n<p>qcanbus.h</p>\n\n<pre><code>#ifndef QCANBUS_H\n#define QCANBUS_H\n\n#include &lt;QtCore/qobject.h&gt;\n#include \"qserialbusglobal.h\"\n#include \"qcanbusdevice.h\"\n#include \"qcanbusdeviceinfo.h\"\n\nQT_BEGIN_NAMESPACE\n\nclass Q_SERIALBUS_EXPORT QCanBus : public QObject\n{\n    Q_OBJECT\n\npublic:\n    static QCanBus *instance();\n    QStringList plugins() const;\n\n    QList&lt;QCanBusDeviceInfo&gt; availableDevices(const QString &amp;plugin, QString *errorMessage = nullptr) const;\n\n    QCanBusDevice *createDevice(const QString &amp;plugin,\n                                const QString &amp;interfaceName,\n                                QString *errorMessage = nullptr) const;\n\nprivate:\n    QCanBus(QObject *parent = nullptr);\n\n    Q_DISABLE_COPY(QCanBus)\n};\n\nQT_END_NAMESPACE\n\n#endif // QSERIALBUS_H\n</code></pre>\n"}, {"tags": ["c++", "compilation"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1541615351, "post_id": 53195600, "comment_id": 93279799, "body": "<code>Person::Person {cout&lt;&lt;&quot;Hello, World&quot;;}</code> You forgot the parentheses. <code>Person::Person() {cout&lt;&lt;&quot;Hello, World&quot;;}</code>"}, {"owner": {"reputation": 9, "user_id": 7311508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e78e693107cfc413c64f40b41055127d?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Tr.", "link": "https://stackoverflow.com/users/7311508/adam-tr"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1541615701, "post_id": 53195600, "comment_id": 93279957, "body": "it&#39;s giving the same error"}, {"owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "edited": false, "score": 0, "creation_date": 1541615703, "post_id": 53195600, "comment_id": 93279959, "body": "You need to compile and link with <code>Person.cpp</code> as well, otherwise the implementation of the <code>Person::Person()</code> constructor is not available."}, {"owner": {"reputation": 113209, "user_id": 1033896, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a75e2267a33cf64c2fc239b5556ec596?s=128&d=identicon&r=PG", "display_name": "hmjd", "link": "https://stackoverflow.com/users/1033896/hmjd"}, "edited": false, "score": 0, "creation_date": 1541615758, "post_id": 53195600, "comment_id": 93279982, "body": "That is a linker error, not a compiler error. Add <code>Person.o</code> to compile command."}], "owner": {"reputation": 9, "user_id": 7311508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e78e693107cfc413c64f40b41055127d?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Tr.", "link": "https://stackoverflow.com/users/7311508/adam-tr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "closed_date": 1541615765, "answer_count": 0, "score": 0, "last_activity_date": 1541615375, "creation_date": 1541615266, "last_edit_date": 1541615375, "question_id": 53195600, "link": "https://stackoverflow.com/questions/53195600/program-is-not-compiling-c-using-header-file", "closed_reason": "Duplicate", "title": "Program is not compiling c++ using header file", "body": "<p>So am trying to compile my c++ code using a header file, unfortunately I keep getting this error </p>\n\n<p>/</p>\n\n<pre><code>tmp/ccXsoiit.o:Main.cpp:(.text+0x15): undefined reference to `Person::Person()'\n/tmp/ccXsoiit.o:Main.cpp:(.text+0x15): relocation truncated to fit: R_X86_64_PC32 against undefined symbol 'Person::Person()'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>I tried to use Cygwin command <code>$ g++ Main.cpp -o test</code>\nand I tried to use CodeBlock idle , both gave the same error</p>\n\n<p>Person.h</p>\n\n<pre><code>#ifndef PERSON_H\n#define PERSON_H\n\nclass Person{\npublic:\nPerson();\n\n};\n\n#endif\n</code></pre>\n\n<p>Person.cpp</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include \"Person.h\"\nusing namespace std;\n\nPerson::Person{\ncout&lt;&lt;\"Hello, World\";\n}\n</code></pre>\n\n<p>Main</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include\"Person.h\"\nusing namespace std;\n\n\nmain(){\n\nPerson p1;\n}\n</code></pre>\n"}, {"tags": ["c#", "c++", "arrays", "unity3d", "unmanaged"], "owner": {"reputation": 11, "user_id": 10619839, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jrVcOzqN_Qc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbB8YzqS55ANvns_FnvcbWNk0EdF4Q/mo/photo.jpg?sz=128", "display_name": "Mauricio Hollando", "link": "https://stackoverflow.com/users/10619839/mauricio-hollando"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "closed_date": 1541617079, "answer_count": 0, "score": 1, "last_activity_date": 1541614919, "creation_date": 1541614919, "question_id": 53195512, "link": "https://stackoverflow.com/questions/53195512/how-to-pass-array-as-parameter-to-function-call-from-c-to-c", "closed_reason": "Duplicate", "title": "How to pass array as parameter to function call from C++ to C#", "body": "<p>I wrote a wrapper to access a C++ Library from Unity game engine using C#.\nIt works for the most part, but running into multiple issues when trying to pass an array as a parameter from C++ to C#.</p>\n\n<p>I've tried declaring them as [MarshalAs(UnmanagedType.SafeArray or [MarshalAs(UnmanagedType.LPArray but I keep getting runtime errors saying I can't access Unmanaged code from C#.</p>\n\n<p>I ended up implementing a fixed structure with each of the array sizes I need:</p>\n\n<pre><code>struct FloatArray6Dof{\nfloat data[6];};\n\n\nFunc&lt;FloatArray6Dof, bool&gt; del = new Func&lt;FloatArray6Dof, bool&gt;((FloatArray6Dof f) =&gt;\n        {\n            unsafe\n            {\n                VectorN pose = new VectorN(6);\n                for (int i = 0; i &lt; pose.Dof; i++)\n                {\n                    pose[i] = f.Array[i];\n                }\n                //use pose\n            }\n        });\n</code></pre>\n\n<p>However, a lot more \"unnecesary\" code is needed for this and it does not work for dynamically size arrays. </p>\n\n<p>For passing an dynamic size array I implemented a function PassValue(float value) which C++ calls in a loop passing each of the elements of the array. This works, but it's not very efficient.</p>\n\n<p>Any ideas on how to correctly use Unmanaged arrays from C++ in Unity on C#?</p>\n"}, {"tags": ["c++", "stl"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1541613719, "post_id": 53195116, "comment_id": 93279057, "body": "<code>vector&lt;pair&lt;int, int&gt;&gt;(sizeof(vector&lt;(X1-Xo),pair&lt;0, 0&gt;&gt;));</code> why do you think you need <code>sizeof</code> here?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1541613739, "post_id": 53195116, "comment_id": 93279069, "body": "and, clearly <code>pair&lt;0, 0&gt;</code> is wrong. Pretty sure you meant <code>std::make_pair(0,0)</code>. Also, <code>double m = (Y1 - Yo) &#47; (X1 - Xo);</code> inside that if-condition is pointless unless you lose the <code>double</code> part. It hides the outer <code>m</code> and makes the calculated value worthless."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1541613825, "post_id": 53195116, "comment_id": 93279102, "body": "seems like you are confusing types with values. <code>vector&lt;pair&lt;int,int&gt;&gt;</code> is the type and the size of a vector is not part of its type. To the constructor you need to pass the number of elements you want, not the <code>sizeof</code> something"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1541613907, "post_id": 53195116, "comment_id": 93279151, "body": "i&#39;d write an answer, but imho there should be no pointer in your code which makes the question moot..."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1541613969, "post_id": 53195116, "comment_id": 93279181, "body": "Sidenote: Automatically allocate the <code>vector</code>.  Because <code>vector</code>&#39;s job is to spare the programmer from having to deal with manual memory management, you almost never want to pick up the task of memory management again by dynamically allocating a <code>vector</code>. Compilers are amazingly good at eliminating copying when you pass them around by value and for the cases where you need to pass by reference, use a reference rather than a pointer."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1541613992, "post_id": 53195116, "comment_id": 93279193, "body": "It is a terrible idea to return a raw pointer to dynamically allocated object, especially vector"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1541614413, "post_id": 53195116, "comment_id": 93279376, "body": "actually I suggest you to start from scratch. In all honesty, this code is a mess. Dont write that much without making sure inbetween that you are on the right track. Write one line, compile, write the next line. And simply dont return a pointer but a vector"}, {"owner": {"reputation": 165, "user_id": 7757916, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-XCG0krkopU8/AAAAAAAAAAI/AAAAAAAAADE/1teDtVLbDVk/photo.jpg?sz=128", "display_name": "topcat", "link": "https://stackoverflow.com/users/7757916/topcat"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1541614667, "post_id": 53195116, "comment_id": 93279493, "body": "@user463035818 my question was specific, &quot;how the allocation &amp; initialization of a vector of pairs is done?&quot;, not if there is a point to this pointer. but fair enough."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1541614866, "post_id": 53195116, "comment_id": 93279582, "body": "<code>new</code> (the short version) allocates storage for the object (or fails and throws <code>std::bad_alloc</code>) and then calls the appropriate constructor, if any. The long version: <a href=\"https://en.cppreference.com/w/cpp/language/new\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/new</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1541614973, "post_id": 53195116, "comment_id": 93279628, "body": "Handy additional reading: <a href=\"https://stackoverflow.com/questions/6500313/why-should-c-programmers-minimize-use-of-new\">Why should C++ programmers minimize use of &#39;new&#39;?</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1541615277, "post_id": 53195116, "comment_id": 93279760, "body": "yes the question is specific and clear, I just think its not helping to blindy provide the answer without pointing out what I think is a wrong premise or misconception. I dont want to be responsible for a single raw owning pointer out there :P"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1541615804, "post_id": 53195116, "comment_id": 93280002, "body": "the point is that you should never (almost never) <code>new</code> a vector, there is no need. Just treat them like <code>int</code> , dont over think them (many people have done a whole lot of thinking for you under the hood)"}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 7757916, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-XCG0krkopU8/AAAAAAAAAAI/AAAAAAAAADE/1teDtVLbDVk/photo.jpg?sz=128", "display_name": "topcat", "link": "https://stackoverflow.com/users/7757916/topcat"}, "edited": false, "score": 0, "creation_date": 1541618541, "post_id": 53195486, "comment_id": 93281214, "body": "Isn&#39;t returning arrays forbidden in c++ similar to C? why then return a vector? what is the difference in time between returning an entire vector vs a vector pointer?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 165, "user_id": 7757916, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-XCG0krkopU8/AAAAAAAAAAI/AAAAAAAAADE/1teDtVLbDVk/photo.jpg?sz=128", "display_name": "topcat", "link": "https://stackoverflow.com/users/7757916/topcat"}, "edited": false, "score": 0, "creation_date": 1541618709, "post_id": 53195486, "comment_id": 93281304, "body": "@topcat you cannot return a c-style array in either language, a <code>std::vector</code> has no such problems"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 165, "user_id": 7757916, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-XCG0krkopU8/AAAAAAAAAAI/AAAAAAAAADE/1teDtVLbDVk/photo.jpg?sz=128", "display_name": "topcat", "link": "https://stackoverflow.com/users/7757916/topcat"}, "edited": false, "score": 0, "creation_date": 1541618973, "post_id": 53195486, "comment_id": 93281449, "body": "@topcat read <a href=\"https://stackoverflow.com/questions/12953127/what-are-copy-elision-and-return-value-optimization\">this</a>. in short: in most cases there is no copy when you return an object from a function."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 165, "user_id": 7757916, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-XCG0krkopU8/AAAAAAAAAAI/AAAAAAAAADE/1teDtVLbDVk/photo.jpg?sz=128", "display_name": "topcat", "link": "https://stackoverflow.com/users/7757916/topcat"}, "edited": false, "score": 0, "creation_date": 1541619833, "post_id": 53195486, "comment_id": 93281846, "body": "@topcat if <code>new</code> and <code>delete</code> arent in the same scope you have roughly 200% chance of a memory leak (seriously!). If the function expects the caller to take ownership it should return a smart pointer, but you dont need that, just return an object"}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 2, "last_activity_date": 1541620102, "last_edit_date": 1541620102, "creation_date": 1541614829, "answer_id": 53195486, "question_id": 53195116, "link": "https://stackoverflow.com/questions/53195116/how-to-allocate-a-vector-of-nnon-const-variable-pairs-initialize-them/53195486#53195486", "title": "How to allocate a vector of N(non-const variable) pairs &amp; initialize them?", "body": "<p>There are many problems in your code, not sure if a can cover all. The most important issue is that there is no reason to return a raw pointer. Return the vector instead. To initialize the vector you just need to call the <a href=\"https://en.cppreference.com/w/cpp/container/vector/vector\" rel=\"nofollow noreferrer\">constructor that takes the number of elements as first parameter</a> (and note that <a href=\"https://en.cppreference.com/w/cpp/utility/pair/pair\" rel=\"nofollow noreferrer\"><code>std::pair</code> has a default constructor</a>):</p>\n\n<pre><code>#include &lt;utility&gt;\n#include &lt;vector&gt;\n\nusing pair_vector = std::vector&lt;std::pair&lt;int,int&gt;&gt;;\npair_vector foo() {\n    pair_vector result(20);\n    return result;\n}\n</code></pre>\n\n<p>To return a vector of a single pair you could write </p>\n\n<pre><code>pair_vector get_vector_with_single_pair() {\n    return { {1 ,1} };\n}\n</code></pre>\n\n<p>And if you want to populate the vector in a loop you could do</p>\n\n<pre><code>pair_vector get_vector(int n) {\n    pair_vector result;\n    result.reserve( n );\n    for (int i=0;i&lt;n;++i){\n        result.emplace_back( i,i );\n    }\n    return result;\n}\n</code></pre>\n\n<p><strong>(un)related problems</strong></p>\n\n<p>Here</p>\n\n<pre><code>if((X1-Xo) != 0 &amp;&amp; ((Y1-Yo) == 0 || (Y1-Yo) != 0))\n{\n    double m = (Y1-Yo)/(X1-Xo);\n}\n</code></pre>\n\n<p><code>m</code> is local to the body of the <code>if</code>. You most likely want to use the <code>m</code> declared on the functions scope instead. Once you fix that, the next thing to discover is integer arithmetics. As all the variables involved are <code>int</code>s the <code>(Y1-Yo)/(X1-Xo)</code> part will use integer arithmetics, where for example <code>5 / 6 == 0</code>. I suppose this is not what you want, so you need to cast to <code>double</code> before you get the result, eg</p>\n\n<pre><code>double dy = Y1-Y0;\ndouble dx = X1-X0;\nm = dy / dx;\n</code></pre>\n\n<p>Moreover, in some cases, you want to return a vector containing <code>Y1-Y0</code> elements. Note that this is not consistent with your loop counters:</p>\n\n<pre><code>for(int counter_y = Yo; counter_y &lt;= Y1 ; counter_y++)\n</code></pre>\n\n<p>this loop has <code>Y1-Y0+1</code> iterations, so you will be off by one. You can fix it either way, but I strongly suggest you to use half open intervals, as this is what all standard algorithms are using. Meaning, change your loop to </p>\n\n<pre><code>for(int counter_y = Y0; counter_y &lt; Y1 ; ++counter_y)\n                               // ^----------------------- Y1 is excluded\n</code></pre>\n\n<p>and adjust the parameters you pass accordingly. </p>\n\n<p>Last but not least, choose better variable names. Your code would be much easier to read if for example <code>m</code> would be called <code>slope</code>. For the others I have no clue what they are. </p>\n"}, {"tags": [], "owner": {"reputation": 165, "user_id": 7757916, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-XCG0krkopU8/AAAAAAAAAAI/AAAAAAAAADE/1teDtVLbDVk/photo.jpg?sz=128", "display_name": "topcat", "link": "https://stackoverflow.com/users/7757916/topcat"}, "is_accepted": true, "score": 0, "last_activity_date": 1541668292, "last_edit_date": 1541668292, "creation_date": 1541626105, "answer_id": 53198092, "question_id": 53195116, "link": "https://stackoverflow.com/questions/53195116/how-to-allocate-a-vector-of-nnon-const-variable-pairs-initialize-them/53198092#53198092", "title": "How to allocate a vector of N(non-const variable) pairs &amp; initialize them?", "body": "<p>I made several mistakes in the code posted in the question:</p>\n\n<ol>\n<li>Firstly in the initialization of vectorOfPairs.</li>\n<li>Then in the range of the for loop, trying to access last element crashed \nprogram, done better with iterators.</li>\n<li>Also in assigning expression of integers to a double(always made the slope = \nzero).</li>\n</ol>\n\n<p>I agree with @user463035818 regarding memory leaks, passing the de-allocation to the user of the function. but that was not my question.</p>\n\n<p>returning objects leads to copying slowing down program.</p>\n\n<p>Here is the correction of the code in my question:</p>\n\n<pre><code>vector&lt;pair&lt;int, int&gt;&gt;* draw_line_DDM(int Xo, int Yo, int X1, int Y1)\n{\n    static double m;\n\n    if((X1-Xo) == 0 &amp;&amp; (Y1-Yo) == 0)\n    {\n        vector&lt;pair&lt;int, int&gt;&gt; *point = new vector&lt;pair&lt;int, int&gt;&gt;(1, make_pair(X1, Xo));\n        //return a vector of one pair only\n\n        return(point);  \n    }\n\n\n    else if((X1-Xo) == 0 &amp;&amp; (Y1-Yo) != 0)\n    {\n        m = 1000000000.0;\n    }\n\n\n    else\n    {\n        m = (double)(Y1-Yo)/(X1-Xo);\n    }\n\n\n    if(abs(m)&lt;=1)\n    {\n        vector&lt;pair&lt;int, int&gt;&gt; *pixels_x = new vector&lt;pair&lt;int, int&gt;&gt;(abs(X1-Xo),make_pair(0, 0));\n\n        double y = (double)Yo;\n        double x = (double)Xo;\n\n        //for(int counter_x = 0; counter_x &lt;(X1-Xo) ; counter_x++)\n        for(vector&lt;pair&lt;int, int&gt;&gt;::iterator it = pixels_x-&gt;begin(); it != pixels_x-&gt;end(); ++it)\n        {\n            it-&gt;first = x;\n            if(Xo&gt;X1)\n                x--;\n            if(Xo&lt;X1)\n                x++;\n            it-&gt;second = round(y);\n            y += m;\n\n        }\n        //create a vector of x pairs\n\n        return(pixels_x);\n    }\n\n    if(abs(m)&gt;1)\n    {\n        double y = (double)Yo;\n        double x = (double)Xo;\n        vector&lt;pair&lt;int, int&gt;&gt; *pixels_y = new vector&lt;pair&lt;int, int&gt;&gt;(abs(Y1-Yo),make_pair(0, 0));\n        //for(int counter_y = 0; counter_y &lt;(Y1-Yo) ; counter_y++)\n        for(vector&lt;pair&lt;int, int&gt;&gt;::iterator it = pixels_y-&gt;begin(); it != pixels_y-&gt;end(); ++it)\n        {\n            it-&gt;second = y;\n            if(Yo&gt;Y1)\n                y--;\n            if(Yo&lt;Y1)\n                y++;\n            it-&gt;first = round(x);   \n            x += 1/m;\n        }\n\n        return(pixels_y);\n    }\n\n};\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 7757916, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-XCG0krkopU8/AAAAAAAAAAI/AAAAAAAAADE/1teDtVLbDVk/photo.jpg?sz=128", "display_name": "topcat", "link": "https://stackoverflow.com/users/7757916/topcat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 53198092, "answer_count": 2, "score": -1, "last_activity_date": 1541668292, "creation_date": 1541613487, "question_id": 53195116, "link": "https://stackoverflow.com/questions/53195116/how-to-allocate-a-vector-of-nnon-const-variable-pairs-initialize-them", "title": "How to allocate a vector of N(non-const variable) pairs &amp; initialize them?", "body": "<p>I'm making a function that takes four integers(line coordinates)  then returns a pointer to a vector of pairs(pixel coordinates), I'm having trouble allocating the vector and initializing the pairs to zero.</p>\n\n<p>the compiler is not accepting an expression in vector allocation: <code>expected a type, got '(X1 - Xo)'</code>  </p>\n\n<p>If someone could explain to me how <code>new</code> works, does it create actually the vector &amp; there are pairs object in it uninitialized , or does it just reserve the mentioned object's size?</p>\n\n<p>my function code is:</p>\n\n<pre><code>vector&lt;pair&lt;int, int&gt;&gt;* draw_line_DDM(int Xo, int Yo, int X1, int Y1)\n{\n    double m;\n\n    if((X1-Xo) == 0 &amp;&amp; (Y1-Yo) == 0)\n    {\n        vector&lt;pair&lt;int, int&gt;&gt; *point = new vector&lt;pair&lt;int, int&gt;&gt;(1, make_pair(X1, Xo));\n        //return a vector of one pair only\n\n        return(point);  \n    }\n\n\n    if((X1-Xo) == 0 &amp;&amp; (Y1-Yo) != 0)\n    {\n        m = 1000000000.0;\n    }\n\n\n    if((X1-Xo) != 0 &amp;&amp; ((Y1-Yo) == 0 || (Y1-Yo) != 0))\n    {\n        double m = (Y1-Yo)/(X1-Xo);\n    }\n\n\n    if(abs(m)&lt;=1)\n    {\n        vector&lt;pair&lt;int, int&gt;&gt; *pixels_x = new vector&lt;pair&lt;int, int&gt;&gt;(sizeof(vector&lt;(X1-Xo),pair&lt;0, 0&gt;&gt;));\n\n        double y = Yo;\n\n        for(int counter_x = Xo; counter_x &lt;= X1 ; counter_x++)\n        {\n            pixels_x-&gt;at(counter_x).first = counter_x;\n            y += m;\n            pixels_x-&gt;at(counter_x).second = round(y);\n\n        }\n        //create a vector of x pairs\n\n        return(pixels_x);\n    }\n\n    if(abs(m)&gt;1)\n    {\n        double x = Xo;\n        vector&lt;pair&lt;int, int&gt;&gt; *pixels_y = new vector&lt;pair&lt;int, int&gt;&gt;(sizeof(vector&lt;(Y1-Yo),pair&lt;0, 0&gt;&gt;));\n        for(int counter_y = Yo; counter_y &lt;= Y1 ; counter_y++)\n        {\n            pixels_y-&gt;at(counter_y).second = counter_y;\n            x += (1/m);\n            pixels_y-&gt;at(counter_y).first = round(x);   \n        }\n\n        return(pixels_y);\n    }\n\n}\n</code></pre>\n"}, {"tags": ["windows", "c++", "exception"], "comments": [{"owner": {"reputation": 587, "user_id": 2089396, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QENPW.png?s=128&g=1", "display_name": "Albin", "link": "https://stackoverflow.com/users/2089396/albin"}, "edited": false, "score": 0, "creation_date": 1541613863, "post_id": 53195344, "comment_id": 93279310, "body": "might be a question for stack exchange?!"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 2, "creation_date": 1541615277, "post_id": 53195344, "comment_id": 93279761, "body": "you can use <a href=\"https://docs.microsoft.com/en-us/cpp/intrinsics/ud2?view=vs-2017\" rel=\"nofollow noreferrer\"><code>__ud2</code></a> for <i>x86/x64</i> in msvc"}, {"owner": {"reputation": 21, "user_id": 10519594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342e863ba5bdda22444f7bcce6f5b58c?s=128&d=identicon&r=PG&f=1", "display_name": "luckydemon", "link": "https://stackoverflow.com/users/10519594/luckydemon"}, "edited": false, "score": 0, "creation_date": 1541616126, "post_id": 53195344, "comment_id": 93280139, "body": "It&#39;s works. Thanks a lot. P.S. Is there any similar function for trying illegal instruction handling in Linux (gcc/g++ compiler)?"}], "answers": [{"tags": [], "owner": {"reputation": 1035, "user_id": 10504230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wfkm8.jpg?s=128&g=1", "display_name": "Arush Agarampur", "link": "https://stackoverflow.com/users/10504230/arush-agarampur"}, "is_accepted": false, "score": 0, "last_activity_date": 1544664449, "creation_date": 1544664449, "answer_id": 53753771, "question_id": 53195344, "link": "https://stackoverflow.com/questions/53195344/how-to-trigger-exception-illegal-instruction-exception-to-test-handlers/53753771#53753771", "title": "How to trigger EXCEPTION_ILLEGAL_INSTRUCTION exception to test handlers?", "body": "<p>You can use the <code>RaiseException</code> function using the Win32 API. This function raises an exception in the current thread of the process from which is called on.</p>\n"}], "migrated_from": {"other_site": {"markdown_extensions": ["Prettify"], "launch_date": 1250553600, "open_beta_date": 1247529600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon@2.png", "twitter_account": "super_user", "favicon_url": "https://cdn.sstatic.net/Sites/superuser/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon.png", "audience": "computer enthusiasts and power users", "site_url": "https://superuser.com", "api_site_parameter": "superuser", "logo_url": "https://cdn.sstatic.net/Sites/superuser/Img/logo.png", "name": "Super User", "site_type": "main_site"}, "on_date": 1541614269, "question_id": 1373538}, "owner": {"reputation": 21, "user_id": 10519594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342e863ba5bdda22444f7bcce6f5b58c?s=128&d=identicon&r=PG&f=1", "display_name": "luckydemon", "link": "https://stackoverflow.com/users/10519594/luckydemon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544664449, "creation_date": 1541613386, "question_id": 53195344, "link": "https://stackoverflow.com/questions/53195344/how-to-trigger-exception-illegal-instruction-exception-to-test-handlers", "title": "How to trigger EXCEPTION_ILLEGAL_INSTRUCTION exception to test handlers?", "body": "<p>I have a task to try out some things featured in Microsoft SEH for illegal instruction exception. I knew, that is basically wrong command for CPU, but how I can trigger this by myself to catch it and handle?\nP.S. Is there any article where I can read about this parcticullar exception?</p>\n"}, {"tags": ["c++", "operator-overloading", "c++17"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1541613297, "post_id": 53195040, "comment_id": 93278861, "body": "<a href=\"https://stackoverflow.com/a/9832875/845092\">stackoverflow.com/a/9832875/845092</a>"}], "owner": {"reputation": 43, "user_id": 10528914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15653375cc63330545ee34177d8274e2?s=128&d=identicon&r=PG&f=1", "display_name": "ilivss", "link": "https://stackoverflow.com/users/10528914/ilivss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1541613419, "creation_date": 1541613140, "last_edit_date": 1541613419, "question_id": 53195040, "link": "https://stackoverflow.com/questions/53195040/c-input-minutes-and-seconds-separated-with", "title": "c++: Input minutes and seconds separated with &#39;:&#39;", "body": "<p>So, I'm  a beginner at c++. I have an assignment where I have to use a struct for time length and use operator overloading to input a time length (minutes and seconds) separated with ':'. So my question: How can I let the compiler know that ':' is an enter (so it registers the minutes)? So if I fill in for example 2:40, It should be registered like this: length.minutes = 2 and length.seconds = 40</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>struct Length\n{\n    int minutes;            // #minutes (0..)\n    int seconds;            // #seconds (0..59)\n};\n\nLength l1 = {42,42}, l2 = {0,0}, l3 = {3,21}, l4 = {3,14};\n\nistream&amp; operator&gt;&gt; (istream&amp; in, Length&amp; length)\n{// Precondition:\n    assert (true) ;\n/*  Postcondition:\n    the value of length has been read from in: first minutes, then ':', then seconds\n*/\n    in &gt;&gt; length.minutes &gt;&gt; ':' &gt;&gt; length.seconds;\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "glsl"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1541612625, "post_id": 53194910, "comment_id": 93278568, "body": "how is the image different from what you want?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5044221"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1541613246, "post_id": 53194910, "comment_id": 93278840, "body": "@user463035818: Sorry. I added a normal output image and normal map."}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 1, "creation_date": 1541615580, "post_id": 53194910, "comment_id": 93279897, "body": "The <code>tangent</code> and the <code>biTangent</code> have to be transformed by the normal matrix <code>Out.tangent = normalize(N * tangent);</code> <code>Out.biTangent = normalize(N * biTangent);</code>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5044221"}, "edited": false, "score": 0, "creation_date": 1541660112, "post_id": 53197880, "comment_id": 93293718, "body": "It didn&#39;t solve my problem. Thank you for your answer. Maybe there&#39;s a problem with tangent-bitangent interpolation. Do you think I should open a new question? Or should I add it here?"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1541660789, "post_id": 53197880, "comment_id": 93293944, "body": "@ADesignersEncyclopedia Didn&#39;t anything change? Add it here, to complete your question."}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 0, "last_activity_date": 1541625140, "creation_date": 1541625140, "answer_id": 53197880, "question_id": 53194910, "link": "https://stackoverflow.com/questions/53194910/wrong-normal-mapping/53197880#53197880", "title": "Wrong Normal Mapping", "body": "<p>The <code>tangent</code> and the <code>biTangent</code> have to be transformed by the normal matrix as you do it with the <code>normal</code> vector:</p>\n\n<pre><code>Out.tangent   = normalize(N * tangent); \nOut.biTangent = normalize(N * biTangent);\nOut.normal    = normalize(N * normal);\n</code></pre>\n\n<p>In the fragment shader the calculations are done in world space. For this you have to transform the normal vector of the normal map to world space.</p>\n\n<p><code>mat3(tangent, biTangent, normal)</code> is the matrix which transforms from texture space to model space.</p>\n\n<p>The matrix which transforms from texture space to world space is:</p>\n\n<pre><code>Out.TBN = N * mat3(tangent, biTangent, normal);  \n</code></pre>\n\n<p>or</p>\n\n<pre><code>Out.TBN = mat3(Out.tangent, Out.biTangent, Out.normal);       \n</code></pre>\n\n<p>Use on of the above calculations of the tangent space matrix to solve your issue.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5044221"}, "edited": false, "score": 0, "creation_date": 1541667066, "post_id": 53203899, "comment_id": 93296566, "body": "Thank you very much. I fixed the code. The problem was solved by adding uv coordinates to the interpolation."}], "tags": [], "owner": {"reputation": 1664, "user_id": 2649079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41a2c9d80a4b8917940e65858c9abc0?s=128&d=identicon&r=PG", "display_name": "Nadir", "link": "https://stackoverflow.com/users/2649079/nadir"}, "is_accepted": false, "score": 0, "last_activity_date": 1541665699, "creation_date": 1541665699, "answer_id": 53203899, "question_id": 53194910, "link": "https://stackoverflow.com/questions/53194910/wrong-normal-mapping/53203899#53203899", "title": "Wrong Normal Mapping", "body": "<p>Few things:</p>\n\n<p>1) As Rabbid76 said, you have to multiply tangents and bitangets. You can use the modelview matrix, since these vectors does not suffer from any distortion caused by non uniform scale.</p>\n\n<p>2) We dont know the format of your texture in GPU. If it has an alpha channel set to 1.0 and then you normalize the whole vector:</p>\n\n<pre><code>vec4 normal = texture2D(nts, In.uvw);\nnormal = normalize(normal * 2.0 -1.0); \n</code></pre>\n\n<p>The normalized vector might be normalized in 4D, but might not in 3D. Just take the rgb from the texture and use it.</p>\n\n<pre><code>vec3 normal = texture2D(nts, In.uvw).rgb;\n</code></pre>\n\n<p>3) What is this for? <code>normal = normal * 0.5 + 0.5;</code> I believe this is the root of your problem, as you are smoothing the normals in the wrong way. Example:</p>\n\n<p><code>normal (1,0,0)</code> would become <code>(1,0.5,0.5)</code></p>\n\n<p>but</p>\n\n<p><code>normal (-1,0,0)</code> would become <code>(0,0.5,0.5)</code></p>\n\n<p>I would also recommend you to debug your normals, tangents, and bitangents by drawing them (using a geometry shader for example) to make sure they are correct.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5044221"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 53197880, "answer_count": 2, "score": 1, "last_activity_date": 1541673331, "creation_date": 1541612575, "last_edit_date": 1541673331, "question_id": 53194910, "link": "https://stackoverflow.com/questions/53194910/wrong-normal-mapping", "title": "Wrong Normal Mapping", "body": "<p>I'm creating a model loading program on OpenGL. I took care of light and specular reflection, but I stuck on the normal map. I think I'm making a mistake in the normal map calculation.</p>\n\n<p>Normal image is:</p>\n\n<p><a href=\"https://i.stack.imgur.com/gnQIL.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gnQIL.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>When I apply the Normal Mapping effect this is how it looks, here is the screenshot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/IL2Wr.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IL2Wr.jpg\" alt=\"out\"></a></p>\n\n<p>My vertex shader:</p>\n\n<pre><code>#version 430 core\n\nlayout(location = 0) in vec3 position;\nlayout(location = 1) in vec3 normal;\nlayout(location = 2) in vec2 uvw;\nlayout(location = 3) in vec3 tangent;\nlayout(location = 4) in vec3 biTangent;\n\nuniform mat4 M;\nuniform mat4 MVP;\nuniform mat3 N;\n\nout block\n{\n    vec4 position;\n    vec3 normal;\n    vec2 uvw;\n    vec3 tangent;\n    vec3 biTangent;\n    mat3 TBN;\n} Out;\n\nvoid main()\n{\n    Out.position = M * vec4(position, 1.0);\n    Out.normal = normalize(N * normal);\n    Out.uvw = uvw;\n    Out.tangent = (M * vec4(tangent, 0.0)).xyz;\n    Out.TBN = mat3(tangent, biTangent, normal); \n\n    gl_Position = MVP * vec4(position, 1.0);\n}\n</code></pre>\n\n<p>Fragment shader is:</p>\n\n<pre><code>#version 430 core\n#define M_PI        3.14159265358979323846\n\nlayout(binding = 0) uniform sampler2D dts;\nlayout(binding = 1) uniform sampler2D sts;\nlayout(binding = 2) uniform sampler2D nts;\n\nstruct Light {\n    vec3 position;\n    vec3 filterColor;\n    float multiplier;\n};\n\nstruct Material {\n    vec3 baseColor;\n    float baseColorMultiplier;\n    float roughness;\n    float ior;\n};\n\nuniform Light light;\nuniform Material material;\n\nin block\n{\n    vec4 position;\n    vec3 normal;\n    vec2 uvw;\n    vec3 tangent;\n    vec3 biTangent;\n    mat3 TBN;\n} In;\n\nout vec4 color;\n\n\nvec3 Le(Light light, vec4 position, vec3 wi) {\n    vec3 Le;\n    float dist = length(wi);\n    Le = light.filterColor / (dist * dist);\n\n    return Le;\n}\n\nvec3 Fresnel(vec3 spec, vec3 normal, vec3 wi)\n{\n    return spec + (1 - spec) * pow((1 - max(0.0, dot(wi, normal))), 5);\n}\n\nvec3 Normal()\n{\n    vec4 norm = texture2D(nts, In.uvw);\n\n    return vec3(norm);\n}\n\nvec3 Diffuse(Material material, vec2 uvw) {\n    vec4 diff = texture2D(dts, uvw);\n    return vec3(diff) / M_PI;\n}\n\nvec3 Reflection(Material material, vec3 wi, vec3 normal, vec2 uvw)\n{\n    vec3 f;\n    float cosTheta = dot(normal, wi);\n\n    vec4 spec = texture2D(sts, uvw);\n    f += vec3(1.0) * vec3(spec) * pow(max(0.0, abs(cosTheta)), material.roughness);\n\n    f += Fresnel(vec3(spec), normal, wi);\n    return f;\n}\n\nvec3 BRDF(Light light, Material material, vec3 wo, vec3 wi, vec4 position, vec3 normal, vec2 uvw) {\n    vec3 L;\n\n    // Evaluate emitted light\n    vec3 Li = Le(light, position, wi);\n\n    // Diffuse\n    vec3 f = Diffuse(material, uvw);    \n\n    // Reflection\n    float cosThetaI = max(0.0, dot(wi, normal));\n    if(cosThetaI &gt; 0.0) {\n        f += Reflection(material, wi, normal, uvw);\n    }\n\n    // BRDF function\n    L += f * Li * max(0.0, dot(wi, normal));\n\n    return L;\n}\n\nvoid main(void)\n{   \n    vec3 L;\n    vec3 wi, wo;\n\n    // Evaluate incoming and outgoing light direction\n    wi = normalize(light.position - vec3(In.position));\n    wo = reflect(-wi, In.normal);\n\n    // Evaluate normal map\n    vec4 normal = texture2D(nts, In.uvw);\n    normal = normalize(normal * 2.0 -1.0);\n    normal = vec4(normalize(In.TBN * normal.xyz), 0.0);\n\n    L += BRDF(light, material, wo, wi, In.position, normal.xyz, In.uvw);\n    color = vec4(L, 1.0);\n}\n</code></pre>\n\n<p>My tangent and bitangent calculation code is:</p>\n\n<pre><code>void CGLPrimitive::CalculateTangentBiTangent()\n{\n    for (unsigned int i = 0; i &lt; positions.size(); i+=3) {\n        CVector3&lt;float&gt; p1 = positions[i];\n        CVector3&lt;float&gt; p2 = positions[i + 1];\n        CVector3&lt;float&gt; p3 = positions[i + 2];\n\n        CVector2&lt;float&gt; uv1 = uv[i];\n        CVector2&lt;float&gt; uv2 = uv[i+1];\n        CVector2&lt;float&gt; uv3 = uv[i+2];\n\n\n        CVector3&lt;float&gt; e1 = p2 - p1;\n        CVector3&lt;float&gt; e2 = p3 - p1;\n\n        CVector2&lt;float&gt; deltaUV1 = uv2 - uv1;\n        CVector2&lt;float&gt; deltaUV2 = uv3 - uv1;\n\n        float f = 1.0f / (deltaUV1.x * deltaUV2.y - deltaUV2.x * deltaUV1.y);\n\n\n        CVector3&lt;float&gt; t;\n        t.x = f * (deltaUV2.y * e1.x - deltaUV1.y * e2.x);\n        t.y = f * (deltaUV2.y * e1.y - deltaUV1.y * e2.y);\n        t.z = f * (deltaUV2.y * e1.z - deltaUV1.y * e2.z);\n        t = Normalize(t);\n        tangents.push_back(t);\n        tangents.push_back(t);\n        tangents.push_back(t);\n\n        CVector3&lt;float&gt; b;\n        b.x = f * (-deltaUV2.x * e1.x + deltaUV1.x * e2.x);\n        b.y = f * (-deltaUV2.x * e1.y + deltaUV1.x * e2.y);\n        b.z = f * (-deltaUV2.x * e1.z + deltaUV1.x * e2.z);\n        b = Normalize(b);\n        biTangents.push_back(b);\n        biTangents.push_back(b);\n        biTangents.push_back(b);\n    }\n\n\n}\n</code></pre>\n\n<p>I wonder where I'm making a mistake. Thank you.</p>\n"}, {"tags": ["c++", "qt", "sorting", "qt5", "qsort"], "answers": [{"tags": [], "owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "is_accepted": false, "score": 1, "last_activity_date": 1541615526, "creation_date": 1541615526, "answer_id": 53195647, "question_id": 53194676, "link": "https://stackoverflow.com/questions/53194676/qsort-doesnt-work-with-own-compare-function/53195647#53195647", "title": "qSort() doesn&#39;t work with own compare function", "body": "<p>Comparator cannot be a method of class (method of class needs an object for which it is called). You can define <code>compareNames</code> as static function in <code>CStreamSetup</code> class:</p>\n\n<pre><code>class CStreamSetup {\n  static bool CStreamSetup::compareNames(const QString &amp;s1, const QString &amp;s2);\n  // ^^^\n}; \n</code></pre>\n\n<p>the definition of <code>compareNames</code> remains the same.</p>\n\n<pre><code>bool CStreamSetup::compareNames(const QString &amp;s1, const QString &amp;s2)\n{\n    QString temp1 = s1.section(\"Stream\", 1);\n    //...\n}\n</code></pre>\n\n<p>or you can just define comparator as free function:</p>\n\n<pre><code>bool compareNames(const QString &amp;s1, const QString &amp;s2)\n{\n    QString temp1 = s1.section(\"Stream\", 1);\n    //...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3521, "user_id": 2004438, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83aa1035a2265dea1f8ad9818560799a?s=128&d=identicon&r=PG", "display_name": "kefir500", "link": "https://stackoverflow.com/users/2004438/kefir500"}, "is_accepted": true, "score": 1, "last_activity_date": 1541617426, "last_edit_date": 1541617426, "creation_date": 1541616040, "answer_id": 53195770, "question_id": 53194676, "link": "https://stackoverflow.com/questions/53194676/qsort-doesnt-work-with-own-compare-function/53195770#53195770", "title": "qSort() doesn&#39;t work with own compare function", "body": "<h3>Static function</h3>\n\n<p>The member function needs to be <code>static</code> if you want to use it as a comparator:</p>\n\n<pre><code>static bool compareNames(const QString &amp;s1, const QString &amp;s2);\n</code></pre>\n\n<h3>Anonymous function (lambda)</h3>\n\n<p>Another way (C++11 and later) is to use lambdas:</p>\n\n<pre><code>qSort(childKeys.begin(), childKeys.end(), [this](const QString &amp;s1, const QString &amp;s2) {\n    return compareNames(s1, s2);\n});\n</code></pre>\n\n<h3>STL function</h3>\n\n<p>Side note: according to the <a href=\"http://doc.qt.io/qt-5/qtalgorithms-obsolete.html#qSort\" rel=\"nofollow noreferrer\">docs</a>, <code>qSort</code> is obsolete and Qt recommends using <code>std::sort</code> instead.</p>\n"}], "owner": {"reputation": 3, "user_id": 6838856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd127fcc8df0d0019776de65489c5fe0?s=128&d=identicon&r=PG&f=1", "display_name": "Horizon696", "link": "https://stackoverflow.com/users/6838856/horizon696"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 0, "accepted_answer_id": 53195770, "answer_count": 2, "score": 0, "last_activity_date": 1543581148, "creation_date": 1541611512, "last_edit_date": 1543581148, "question_id": 53194676, "link": "https://stackoverflow.com/questions/53194676/qsort-doesnt-work-with-own-compare-function", "title": "qSort() doesn&#39;t work with own compare function", "body": "<p>I want to use <code>qSort()</code> as follows.</p>\n\n<p>I have a compare function called </p>\n\n<pre><code>bool CStreamSetup::compareNames(const QString &amp;s1, const QString &amp;s2)\n{\n    QString temp1 = s1.section(\"Stream\", 1);\n    temp1 = temp1.section('_', 0, 0);\n\n    QString temp2 = s2.section(\"Stream\", 1);\n    temp2 = temp2.section('_', 0, 0);\n\n    return (temp1.toInt() &lt; temp2.toInt());\n}\n</code></pre>\n\n<p>and a QStringList with 160 elements called <code>QStringList childKeys;</code></p>\n\n<p>When I call the QSort function as follows:</p>\n\n<pre><code>qSort(childKeys.begin(), childKeys.end(), compareNames);\n</code></pre>\n\n<p>the following errors appear.</p>\n\n<pre><code>'compareNames': non-standard syntax; use '&amp;' to create a pointer to member\n'qSort': no matching overloaded function found\n'void qSort(Container &amp;)': expects 1 arguments - 3 provided\n'void qSort(RandomAccessIterator, RandomAccessIterator)' expects 2 arguments - 3 provided\n</code></pre>\n\n<p>Thank you guys!</p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1541611571, "post_id": 53194638, "comment_id": 93278054, "body": "@Someprogrammerdude The OP says they know what the issue is, they are curious as to why it still works, and what happens to the threads that weren&#39;t joined"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541611655, "post_id": 53194638, "comment_id": 93278093, "body": "@OP What compiler are you using?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1541611658, "post_id": 53194638, "comment_id": 93278095, "body": "&quot;... does the computer auto kill all thread  ...&quot; - That&#39;s somewhat OS specific. On Linux (and other Unix like OSs) when the main thread exits the entire process is destroyed (including any other threads). On Windows threads can keep running after the main thread exits. I can&#39;t remember what happens with Novell NetWare and other niche OSs."}, {"owner": {"reputation": 43, "user_id": 10619634, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-s6Lm8Y7xWhY/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDWJ10EQJLsKCohbEiQuuvFpXtdCQ/mo/photo.jpg?sz=128", "display_name": "Arminas Pamak\u0161tis", "link": "https://stackoverflow.com/users/10619634/arminas-pamak%c5%a1tis"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541611945, "post_id": 53194638, "comment_id": 93278231, "body": "@NathanOliver  I am running this code on visual studio 2017(windows 10) as a console application, not sure how to specify the compiler."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541612224, "post_id": 53194638, "comment_id": 93278358, "body": "@ArminasPamak\u0161tis That&#39;s fine.  It&#39;s interesting that you say it works for you.  Unless it takes a while to run it looks like when I run it I get in an infinite loop and the program never actually finishes."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 3, "creation_date": 1541612786, "post_id": 53194638, "comment_id": 93278636, "body": "Just because a program ends does not mean it has worked correctly. You can look at the exit status of the application. Im this case your code will have exited via <code>std::terminate()</code>, not from exiting <code>main()</code> this should result in an error code being returned to the OS. If you are on Linux like OS. Try <code>echo $?</code> this will tell you the exit code of the last application run. A non zero value means something went wrong."}, {"owner": {"reputation": 43, "user_id": 10619634, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-s6Lm8Y7xWhY/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDWJ10EQJLsKCohbEiQuuvFpXtdCQ/mo/photo.jpg?sz=128", "display_name": "Arminas Pamak\u0161tis", "link": "https://stackoverflow.com/users/10619634/arminas-pamak%c5%a1tis"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541614283, "post_id": 53194638, "comment_id": 93279316, "body": "@NathanOliver you are correct, now that i take a closer look at the console it never gets to the _getch part... but even after increasing the join number it still doesnt work so most likely the thread that read are asleep and never wake up."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1541618959, "post_id": 53194638, "comment_id": 93281436, "body": "You code has two other bugs. One is that your <code>cv.wait</code> calls don&#39;t check <code>endProgram</code> as part of the predicate. So they will keep waiting even if the program should end. Another is that some of your checks of <code>endProgram</code> (such as the <code>while (!endProgram)</code> check) don&#39;t take place under the protection of any mutex so there is no way you can ever set <code>endProgram</code> to true because you have no way to ensure it&#39;s not being accessed at the same time."}], "answers": [{"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 4, "last_activity_date": 1541612231, "last_edit_date": 1541612231, "creation_date": 1541611700, "answer_id": 53194713, "question_id": 53194638, "link": "https://stackoverflow.com/questions/53194638/why-program-works-correctly-while-join-only-1-thread-but-there-are-5/53194713#53194713", "title": "Why program works correctly while join only 1 thread but there are 5", "body": "<p>When your <code>main</code> function exits, all the threads in the vector will be destructed.</p>\n\n<p>If they are not joined at that time <code>std::terminate</code> should be called by the <a href=\"https://en.cppreference.com/w/cpp/thread/thread/~thread\" rel=\"nofollow noreferrer\"><code>std::thread</code> destructor</a>.</p>\n\n<hr>\n\n<p>By detaching threads the thread-objects can be destructed and the thread still continues to run. But then on the common modern operating systems when the process ends (which happens after <code>main</code> have returned or <code>exit</code> is called) the threads will be killed anyway. To let threads continue running even after the \"main\" thread ends, you have to call a system-dependent function to exit the \"main\" thread.</p>\n\n<p>I do not know if it's possible to do this on Windows though, as <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/processthreadsapi/nf-processthreadsapi-exitthread\" rel=\"nofollow noreferrer\">the <code>ExitThread</code> function</a> should not be used by C++ code as it exits the thread without destructing objects.</p>\n\n<hr>\n\n<p>The solution to both problems is of course to properly join all threads.</p>\n"}], "owner": {"reputation": 43, "user_id": 10619634, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-s6Lm8Y7xWhY/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDWJ10EQJLsKCohbEiQuuvFpXtdCQ/mo/photo.jpg?sz=128", "display_name": "Arminas Pamak\u0161tis", "link": "https://stackoverflow.com/users/10619634/arminas-pamak%c5%a1tis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 53194713, "answer_count": 1, "score": 1, "last_activity_date": 1541614812, "creation_date": 1541611351, "last_edit_date": 1541614812, "question_id": 53194638, "link": "https://stackoverflow.com/questions/53194638/why-program-works-correctly-while-join-only-1-thread-but-there-are-5", "title": "Why program works correctly while join only 1 thread but there are 5", "body": "<p>This is my code and I accidentally made a mistake buy not making the for loop longer but the code works as intended. </p>\n\n<p>What happens after the program is completed? Does it have any fail cases or does the computer auto kill all thread and if there would be any additional code it Threads again would there be problems( for example if i would initiate 2 thread then there would be 6 thread working and the new thread ids would be 5 and 7?)  </p>\n\n<pre><code>#include &lt;iomanip&gt;\n#include &lt;thread&gt;\n#include &lt;iostream&gt;\n#include &lt;mutex&gt;\n#include &lt;sstream&gt;\n#include &lt;vector&gt;\n#include &lt;conio.h&gt;\n\nusing namespace std;\n\nbool endProgram = false;\n\nstruct Monitorius {\npublic:\n    int IOCounter = 0;\n    int readCounterC = 0;\n    int readCounterD = 0;\n    condition_variable cv;\n    mutex mtx;\n    int c = 10;\n    int d = 100;\n\n    Monitorius() {\n        c = 10;\n        d = 100;\n        IOCounter = 0;\n        readCounterC = 0;\n        readCounterD = 0;\n    }\n\n    void changeC(int i) {\n        while (!endProgram) {\n            unique_lock&lt;mutex&gt; lck(mtx);\n            cv.wait(lck, [&amp;] {return readCounterC &gt; 1; });\n            if (!endProgram) {\n                c += i;\n                readCounterC = 0;\n                cv.notify_all();\n            }\n\n        }\n    }\n    void changeD(int i) {\n        while (!endProgram) {\n            unique_lock&lt;mutex&gt; lck(mtx);\n            cv.wait(lck, [&amp;] {return readCounterD &gt; 1; });\n            if (!endProgram) {\n                d -= i;\n                readCounterD = 0;\n                cv.notify_all();\n            }\n        }\n    }\n    void readCD(int i) {\n        int oldC = -1;\n        int oldD = -1;\n        while (!endProgram) {\n            unique_lock&lt;mutex&gt; lck(mtx);\n            cv.wait(lck, [&amp;] {return oldC != c &amp;&amp; oldD != d; });\n            if (!endProgram) {\n                stringstream str;\n                str &lt;&lt; i &lt;&lt; \": c:\" &lt;&lt; c &lt;&lt; \" d: \" &lt;&lt; d &lt;&lt; endl;\n                cout &lt;&lt; str.str();\n                readCounterC++;\n                readCounterD++;\n                IOCounter++;\n                if (IOCounter &gt;= 15)\n                    endProgram = true;\n                cv.notify_all();\n                oldC = c;\n                oldD = d;\n            }\n        }\n    }\n};\n\nint main()\n{\n    Monitorius M;\n    vector&lt;thread&gt; myThreads;\n\n    myThreads.reserve(5);\n\n    myThreads.emplace_back([&amp;] { M.changeC(1); });\n    myThreads.emplace_back([&amp;] { M.changeD(2); });\n    myThreads.emplace_back([&amp;] { M.readCD(3); });\n    myThreads.emplace_back([&amp;] { M.readCD(4); });\n    myThreads.emplace_back([&amp;] { M.readCD(5); });\n\n    for (size_t i = 0; i &lt; 1; i++)\n        myThreads[i].join();\n\n    _getch();\n}\n</code></pre>\n"}, {"tags": ["c++", "user-interface", "wxwidgets"], "comments": [{"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 1, "creation_date": 1541612775, "post_id": 53194528, "comment_id": 93278627, "body": "You might get more responses to this on the wxWidgets forum."}], "answers": [{"tags": [], "owner": {"reputation": 1572, "user_id": 3636621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef6473d290d66740556cd4a73dd8dcb?s=128&d=identicon&r=PG&f=1", "display_name": "catalin", "link": "https://stackoverflow.com/users/3636621/catalin"}, "is_accepted": false, "score": 1, "last_activity_date": 1541634050, "last_edit_date": 1541634050, "creation_date": 1541620427, "answer_id": 53196835, "question_id": 53194528, "link": "https://stackoverflow.com/questions/53194528/nested-custom-controls-in-wxwidgets/53196835#53196835", "title": "Nested custom controls in wxWidgets", "body": "<p>As almost always, there is no single best answer for all cases.\nIn your case, it's probably best to stay with the complete custom drawing, especially since you have it implemented and working. Otherwise another very important consideration is the overlapping of sibling widgets, which is not permitted. I.e. if Node 1, Node 2, Overview etc were wxPanel-s, they could not overlap. Overlapping widgets are not supported and allowing it will only exhibit weird behavior (which will affect drawing, event handling etc).</p>\n\n<p>However there are situations when composite controls are best built from smaller ones, when any sibling overlapping is guaranteed not to happen. Among the advantages here could be aligning the components with sizers, easier text manipulation, less custom drawing if any.</p>\n"}, {"tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": false, "score": 1, "last_activity_date": 1541620732, "creation_date": 1541620732, "answer_id": 53196909, "question_id": 53194528, "link": "https://stackoverflow.com/questions/53194528/nested-custom-controls-in-wxwidgets/53196909#53196909", "title": "Nested custom controls in wxWidgets", "body": "<p>Normally you design your own control the same way you design a dialog: using sub-controls and placing them in a wxPanel with the help of wxSizer`s.</p>\n\n<p>You need to override the base class virtuals <code>DoGetBestSize()</code> and <code>DoMoveWindow(...)</code>.</p>\n\n<p>You should care of mouse/keyboard action if you need it instead of the default processing.</p>\n\n<p>A second way is what you currently do: Draw everything and care about events on your own. That's hard.</p>\n\n<p>A third way is to use the undocumented <code>wxCompositeWindow</code> class. It's used internally by wxWidgets to build some controls (generic wxSpinCtrl, wxDateCtrl, etc). You can search for it the source code and see how it works.</p>\n"}], "owner": {"reputation": 71, "user_id": 7418923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1999a0001f522bc518663fdc815bb4ed?s=128&d=identicon&r=PG&f=1", "display_name": "user7418923", "link": "https://stackoverflow.com/users/7418923/user7418923"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1541634050, "creation_date": 1541610953, "question_id": 53194528, "link": "https://stackoverflow.com/questions/53194528/nested-custom-controls-in-wxwidgets", "title": "Nested custom controls in wxWidgets", "body": "<h1>Background</h1>\n\n<p>I am working on several custom controls in wxWidgets and found that I'm unsure about the \"clean\" or \"intended\" way to realize complex, nested controls, meaning controls that could, in principle, be composed of several sub-controls.</p>\n\n<p>Consider as an example a diagram view (for example for a UML diagram). This diagram consists of nodes and edges. Each node might contain a button to delete the node. I might also want a small zoomed-out overview image of the entire diagram.</p>\n\n<h1>Baseline</h1>\n\n<p>My current implementation is (based on examples I found and on the manual) a single diagram control that handles all the drawing - edges, nodes, buttons, overview image, which is not that inconvenient because I don't want native controls anyway, and also handling all the click events on buttons based on finding their coordinates on the screen.</p>\n\n<h1>Alternative</h1>\n\n<p>But I've wondered for a while if this is really the right way, and it has occurred to me recently that there may be a better one: Saying (for example) that <code>class Node : public wxPanel</code>, inside that <code>Node</code> is a button, and the rest of the <code>Node</code> (node color, etc.) is drawn by me on the <code>Node</code> background. Then I place many <code>Node</code>s inside a <code>class DiagramView : public wxPanel</code>, at the locations of each diagram node. I also place a <code>class Overview : public wxControl</code> inside the <code>DiagramView</code>.</p>\n\n<p>This would mean I only add those <code>Node</code>s to the <code>DiagramView</code> that are visible at the moment.</p>\n\n<p>I have added a sketch of my current implementation (upper) and the alternative (lower) below. Class borders are marked in thick dashed lines. Controls that are fully custom-drawn are red, panels are blue.</p>\n\n<p>Also I realize that there are libraries for drawing graphs, this is merely an intuitive example but my question is more general: What is the right or intended way, or the best practice to build nested / complex custom controls? Is it better to custom-draw everything, like the generic tree view? Or is it better to inherit e.g. from panels, nest these, and only draw on their backgrounds and on atomic custom controls such as buttons? Or is all of this problematic for some reason? Any hint would be appreciated.</p>\n\n<p><a href=\"https://i.stack.imgur.com/rgFyt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rgFyt.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1541625318, "post_id": 53194511, "comment_id": 93284440, "body": "Can you possibly upgrade to OpenCV 3.x? That has a C++ implementation of this, rather than this old C function which works with the legacy data structure."}, {"owner": {"reputation": 50, "user_id": 3611521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGy73.jpg?s=128&g=1", "display_name": "Yazan", "link": "https://stackoverflow.com/users/3611521/yazan"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1541626001, "post_id": 53194511, "comment_id": 93284749, "body": "I cannot change the version of the library. I am developing a small component inside a big project."}, {"owner": {"reputation": 677, "user_id": 1418351, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7a7dba2123954dce6d12c48c0c74d785?s=128&d=identicon&r=PG", "display_name": "John_Sharp1318", "link": "https://stackoverflow.com/users/1418351/john-sharp1318"}, "edited": false, "score": 1, "creation_date": 1541626442, "post_id": 53194511, "comment_id": 93284942, "body": "The error you are facing come from the function <b>cvLinearPolar</b> which is a C function that you gave c++ structures. A cvArr has nothing related with Mat container from namespace cv. Try to find in the documentation a c++ function (e.g. <b>cv::cartToPolar</b>) that has replaced it."}], "answers": [{"tags": [], "owner": {"reputation": 50, "user_id": 3611521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGy73.jpg?s=128&g=1", "display_name": "Yazan", "link": "https://stackoverflow.com/users/3611521/yazan"}, "is_accepted": true, "score": 0, "last_activity_date": 1543923602, "creation_date": 1543923602, "answer_id": 53612164, "question_id": 53194511, "link": "https://stackoverflow.com/questions/53194511/bad-flagparameter-or-structure-field-unrecognized-or-unsupported-array-type/53612164#53612164", "title": "Bad flag(parameter or structure field) (Unrecognized or unsupported array type) in cvGetMat", "body": "<p>I have solved the issue thanks to the comment of @John_Sharp1318. I had to work with the Iplimage which is the C image container. The working code:</p>\n\n<pre><code>IplImage* _recovered_cart_img;\n_recovered_cart_img = cvLoadImage(\"savetest.png\");\n\nIplImage *_lin_polar_img = cvCreateImage(cvSize(_recovered_cart_img-&gt;height, _recovered_cart_img-&gt;width), IPL_DEPTH_8U, 3);\n\ncv::Point2f center( (float)_lin_polar_img-&gt;width / 2.f, (float)_lin_polar_img-&gt;height / 2.f );\ndouble maxRadius = 4.0*std::min(center.y, center.x);\n\ncvLinearPolar(_lin_polar_img, _recovered_cart_img, center, maxRadius, cv::INTER_LINEAR+CV_WARP_INVERSE_MAP);\n</code></pre>\n"}], "owner": {"reputation": 50, "user_id": 3611521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGy73.jpg?s=128&g=1", "display_name": "Yazan", "link": "https://stackoverflow.com/users/3611521/yazan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 0, "accepted_answer_id": 53612164, "answer_count": 1, "score": 0, "last_activity_date": 1543923602, "creation_date": 1541610914, "question_id": 53194511, "link": "https://stackoverflow.com/questions/53194511/bad-flagparameter-or-structure-field-unrecognized-or-unsupported-array-type", "title": "Bad flag(parameter or structure field) (Unrecognized or unsupported array type) in cvGetMat", "body": "<p>I want to transform a polar grid image into a cartesian representation. But I keep have a strange error message that says: </p>\n\n<blockquote>\n  <p>OpenCV Error : Bad flag(parameter or structure field) (Unrecognized or unsupported array type) in cvGetMat, file M : \\libs\\OpenCV - 2.4.13x86\\sources\\modules\\core\\src\\array.cpp, line 2482</p>\n</blockquote>\n\n<p>Here is my code that i kept as simple as possible: </p>\n\n<pre><code>#include&lt;cstdio&gt;\n#include &lt;opencv2/opencv.hpp&gt;\n#include \"opencv2/imgproc.hpp\"\n\nint main()\n{\n    // cv::Mat src = cv::imread(\"savetest.png\"); // _lin_polar_img\n    // cv::Mat src = cv::imread(\"280px_1.png\"); // _lin_polar_img\n    cv::Mat src = cv::Mat(800, 800, CV_8SC3); // _lin_polar_img\n    cv::Mat _recovered_cart_img;\n\n    cv::Point2f center( (float)src.cols / 2.f, (float)src.rows / 2.f );\n    double maxRadius = 0.7*std::min(center.y, center.x);\n\n    // cvLinearPolar(const CvArr* src, CvArr* dst, CvPoint2D32f center, double maxRadius, int flags=CV_INTER_LINEAR+CV_WARP_FILL_OUTLIERS )\n    cvLinearPolar(&amp;src, &amp;_recovered_cart_img, center, maxRadius, cv::INTER_LINEAR+CV_WARP_INVERSE_MAP);\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>I am using OpenCV 2.4.13 on windows 10 (VisualC++ 2015).</p>\n"}, {"tags": ["c++", "oop", "smart-pointers"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1541610649, "post_id": 53194375, "comment_id": 93277568, "body": "If you have problems with code not working, post that code - i.e. the code using shared pointers."}, {"owner": {"reputation": 55, "user_id": 6423537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf25112d3a815fc78d328ff39d454f8?s=128&d=identicon&r=PG&f=1", "display_name": "Nuri", "link": "https://stackoverflow.com/users/6423537/nuri"}, "edited": false, "score": 0, "creation_date": 1541611156, "post_id": 53194375, "comment_id": 93277825, "body": "@NeilButterworth thanks for the feedback. added code about shared pointer scenario."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1541612780, "post_id": 53194375, "comment_id": 93278634, "body": "Remember, <code>std::weak_ptr</code> is a thing."}], "answers": [{"comments": [{"owner": {"reputation": 38108, "user_id": 6610, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/635c3ea0c7b8c37ef45744b6e66dd263?s=128&d=identicon&r=PG", "display_name": "xtofl", "link": "https://stackoverflow.com/users/6610/xtofl"}, "edited": false, "score": 0, "creation_date": 1541611214, "post_id": 53194425, "comment_id": 93277860, "body": "Not sure I agree here.  If I understand gotw91 correctly, the non-owning part of the world does not need to know about any owning pointers.  (<a href=\"https://herbsutter.com/2013/06/05/gotw-91-solution-smart-pointer-parameters/\" rel=\"nofollow noreferrer\">herbsutter.com/2013/06/05/&hellip;</a>)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 38108, "user_id": 6610, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/635c3ea0c7b8c37ef45744b6e66dd263?s=128&d=identicon&r=PG", "display_name": "xtofl", "link": "https://stackoverflow.com/users/6610/xtofl"}, "edited": false, "score": 1, "creation_date": 1541611372, "post_id": 53194425, "comment_id": 93277932, "body": "@xtofl A load of rubbish. If you don&#39;t need to share ownership pass a ref to the shared_ptr. You can then obtain a weak_ptr from it if you need to store a non-owning pointer to the resource. But stripping away all those ownership semantics is just silly."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 38108, "user_id": 6610, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/635c3ea0c7b8c37ef45744b6e66dd263?s=128&d=identicon&r=PG", "display_name": "xtofl", "link": "https://stackoverflow.com/users/6610/xtofl"}, "edited": false, "score": 1, "creation_date": 1541611430, "post_id": 53194425, "comment_id": 93277971, "body": "@xtofl Always remember, everything you read (including what I say) is just a view. Herb may be prominent and popular but that doesn&#39;t mean you <i>have</i> to do what he does. (He&#39;s also responsible for this &quot;almost always auto&quot; abortion.) Of course you are welcome to do so!"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 38108, "user_id": 6610, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/635c3ea0c7b8c37ef45744b6e66dd263?s=128&d=identicon&r=PG", "display_name": "xtofl", "link": "https://stackoverflow.com/users/6610/xtofl"}, "edited": false, "score": 1, "creation_date": 1541611563, "post_id": 53194425, "comment_id": 93278049, "body": "I will drop down to raw pointers <i>only</i> when the performance cost of not doing so is <i>so high</i> as to warrant the loss of clear ownership semantics, and only in a very localised area (so no storage, perhaps a bit of passing into a function - but still, then, const shared_ptr&amp;!)"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1541612540, "post_id": 53194425, "comment_id": 93278525, "body": "@LightnessRacesinOrbit If only I had the ability to give more upvotes to your answer and comments here..."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1541614816, "post_id": 53194425, "comment_id": 93279562, "body": "@LightnessRacesinOrbit Heh; well, I&#39;m not <i>that much</i> of a fan. But I liked your answer."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1541673590, "post_id": 53194425, "comment_id": 93300139, "body": "@JesperJuhl Aww, my nice response was removed. Guess that made the internet a better place somehow."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 1, "last_activity_date": 1541610611, "creation_date": 1541610611, "answer_id": 53194425, "question_id": 53194375, "link": "https://stackoverflow.com/questions/53194375/sharing-objects-owned-via-smart-pointer/53194425#53194425", "title": "Sharing objects owned via smart pointer", "body": "<p>The best way if you have shared objects is indeed to use a <code>shared_ptr</code>.</p>\n\n<p>A <code>unique_ptr</code> is for unique ownership.</p>\n\n<p>If you had memory leaks, it's time to investigate why that was, and fix them! Your report suggests a cyclical reference. Check for accidental lambda capture, and in some places you perhaps meant to use <code>weak_ptr</code> instead.</p>\n\n<p>Using a singleton for this is like fixing your car's broken tyre by setting the whole thing on fire and taking a donkey instead. Your <code>unique_ptr</code> approach is more like fixing your car's broken tyre by removing it and driving on rims for the lols.</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1541611596, "post_id": 53194684, "comment_id": 93278061, "body": "The use of a reference makes this example good. However, didn&#39;t the OP say something about storage?"}, {"owner": {"reputation": 38108, "user_id": 6610, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/635c3ea0c7b8c37ef45744b6e66dd263?s=128&d=identicon&r=PG", "display_name": "xtofl", "link": "https://stackoverflow.com/users/6610/xtofl"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1541611699, "post_id": 53194684, "comment_id": 93278117, "body": "I understood not, and &quot;... access that m_Components object from it&#39;s functions without creating copies&quot;"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1541612286, "post_id": 53194684, "comment_id": 93278394, "body": "My interpretation is that said functions would be getting to the object from a pointer stored as a member variable. Stored! Storing raw pointers =&gt; bad. Just passing them into one-off functions is borderline acceptable though."}, {"owner": {"reputation": 38108, "user_id": 6610, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/635c3ea0c7b8c37ef45744b6e66dd263?s=128&d=identicon&r=PG", "display_name": "xtofl", "link": "https://stackoverflow.com/users/6610/xtofl"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1541613352, "post_id": 53194684, "comment_id": 93278887, "body": "Indeed, to express a long-term relation, a <code>weak_ptr</code> may serve a better job, in some situations.  But then again... you lose control over who does and who does not own your objects.  When you accept R.3 and R.4, you&#39;re safe: someone else takes care of the objects pointed to as long as you need them.  That intent is very clear and you can structure your program accordingly.  Storing raw pointers is not bad by itself."}, {"owner": {"reputation": 55, "user_id": 6423537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf25112d3a815fc78d328ff39d454f8?s=128&d=identicon&r=PG&f=1", "display_name": "Nuri", "link": "https://stackoverflow.com/users/6423537/nuri"}, "edited": false, "score": 0, "creation_date": 1541615601, "post_id": 53194684, "comment_id": 93279906, "body": "@xtofl instead of taking as shared_ptr or unique_ptr i tried const reference and hold it as it is that&#39;s cleaned up all memory leaks."}, {"owner": {"reputation": 38108, "user_id": 6610, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/635c3ea0c7b8c37ef45744b6e66dd263?s=128&d=identicon&r=PG", "display_name": "xtofl", "link": "https://stackoverflow.com/users/6610/xtofl"}, "edited": false, "score": 0, "creation_date": 1541621049, "post_id": 53194684, "comment_id": 93282466, "body": "You make my day.  Glad this design decision served your use case so well!"}], "tags": [], "owner": {"reputation": 38108, "user_id": 6610, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/635c3ea0c7b8c37ef45744b6e66dd263?s=128&d=identicon&r=PG", "display_name": "xtofl", "link": "https://stackoverflow.com/users/6610/xtofl"}, "is_accepted": true, "score": 1, "last_activity_date": 1541612061, "last_edit_date": 1541612061, "creation_date": 1541611532, "answer_id": 53194684, "question_id": 53194375, "link": "https://stackoverflow.com/questions/53194375/sharing-objects-owned-via-smart-pointer/53194684#53194684", "title": "Sharing objects owned via smart pointer", "body": "<p>It seems that you correctly separate the concerns of <em>ownership</em> and <em>usage</em>.  The only trouble you have is how to forward the components to the rest of your system.</p>\n\n<p>I would keep your owning structure, and create dedicated structures for the specific users:</p>\n\n<pre><code>struct CoreComponents {\n   unique_ptr&lt;A&gt; a; unique_ptr&lt;B&gt; b; ...\n};\n\nstruct PartOfTheSystem {\n  void use(A&amp; a, B&amp; b);\n};\n\nstruct Game {\n  CoreComponents components;\n  PartOfTheSystem user;\n\n  void stuff() {\n    user.use(*components.a, *components.b);\n  }\n};\n</code></pre>\n\n<p>Yes: more typing.</p>\n\n<p>But also: very clear logic: construction/ownership and use are separate concerns, and this is perfectly clear by design!  Also refer to <a href=\"https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#Rr-smartptrparam\" rel=\"nofollow noreferrer\">https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#Rr-smartptrparam</a>.</p>\n"}], "owner": {"reputation": 55, "user_id": 6423537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf25112d3a815fc78d328ff39d454f8?s=128&d=identicon&r=PG&f=1", "display_name": "Nuri", "link": "https://stackoverflow.com/users/6423537/nuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 1, "accepted_answer_id": 53194684, "answer_count": 2, "score": 1, "last_activity_date": 1541612061, "creation_date": 1541610426, "last_edit_date": 1541611213, "question_id": 53194375, "link": "https://stackoverflow.com/questions/53194375/sharing-objects-owned-via-smart-pointer", "title": "Sharing objects owned via smart pointer", "body": "<p>Basically i have a one struct that contains objects to share between classes as following;</p>\n\n<pre><code>struct CoreComponents\n{\n    std::unique_ptr&lt;a&gt; m_A = std::make_unique&lt;a&gt;();\n    std::unique_ptr&lt;b&gt; m_B;\n    std::unique_ptr&lt;c&gt; m_C = std::make_unique&lt;c&gt;();\n};\n</code></pre>\n\n<p>And in my main class i own it via <em>unique_ptr</em>;</p>\n\n<pre><code>class Game\n{\n    ...\n  private:\n    std::unique_ptr&lt;CoreComponents&gt; m_Components;\n    ...\n};\n</code></pre>\n\n<p>Then i have other <strong>n</strong> classes which i need to access that <strong><em>m_Components</em></strong> object from it's functions without creating copies. (i will not modify contents of that object)</p>\n\n<p>I tried using <em>shared_ptr</em> to hold <strong><em>m_Components</em></strong> in <strong><em>Game</em></strong> class then pass it to other classes (to their constructors) via value and store it but that scenario causes memory leaks. (i use memcheck for checking leaks) I found out that it's the cause of the leak but i couldn't figure out why exactly.</p>\n\n<p><strong>Shared_ptr scenario</strong></p>\n\n<p>Constructor of class which i need to access CoreComponents object;</p>\n\n<pre><code>GameScene::GameScene(std::shared_ptr&lt;CoreComponents&gt; components)\n: m_Components(std::move(components))\n</code></pre>\n\n<p>I'm trying to hold it as member of GameScene class then use it in functions;</p>\n\n<pre><code>std::shared_ptr&lt;CoreComponents&gt; m_Components;\n</code></pre>\n\n<p>And this is how i pass it from inside of the Game class;</p>\n\n<pre><code>auto gs = std::make_unique&lt;GameScene&gt;(m_Components)\n</code></pre>\n\n<p>General usage inside GameScene class;</p>\n\n<pre><code>m_Components-&gt;m_A-&gt;draw(*m_OtherObjectInsideGameScene);\n</code></pre>\n\n<p>So what is the best way to create similar design using modern c++?\nI was trying to avoid Singleton pattern but do i have to use it to achieve this or it's possible with better smart pointer usage?</p>\n\n<p>PS: CoreComponents struct needs to be deleted from memory when Game class is destroyed.</p>\n"}, {"tags": ["c++", "algorithm", "time"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1541614332, "post_id": 53194320, "comment_id": 93279333, "body": "It probably means your compiler has found a way to optimize the code because you&#39;ve got undefined behaviour or never use some result or some other feature that allows the compiler to omit most of the working code.  I&#39;m not sufficiently sure what your code is up to to want to pontificate further."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 2, "creation_date": 1541617758, "post_id": 53194320, "comment_id": 93280873, "body": "Please extract a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. In particular, remove all manual input. Further, even most of the output is probably irrelevant. Also, you say &quot;these numbers are too small&quot;, but you neither give an expected value nor do your numbers have any units, which makes it hard to follow your interpretation."}], "owner": {"reputation": 1, "user_id": 4619193, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IsH0QZpFfnY/AAAAAAAAAAI/AAAAAAAAABY/fIVZizbZ2-c/photo.jpg?sz=128", "display_name": "Arnolt Infern Kitler", "link": "https://stackoverflow.com/users/4619193/arnolt-infern-kitler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1541614074, "creation_date": 1541610202, "last_edit_date": 1541614074, "question_id": 53194320, "link": "https://stackoverflow.com/questions/53194320/time-not-measured-properly-in-second-algorithm", "title": "Time not measured properly in second algorithm", "body": "<p>My task is to compere algorithm speed of program which searches array for 2 numbers that equal x.</p>\n\n<p>Problem is that time measured with bruteforce has normal numbers</p>\n\n<pre><code>10000 0.292887\n20000 1.13808\n30000 2.57459\n40000 4.5844\n50000 7.16904\n60000 10.2995\n70000 15.4171\n80000 19.8118\n90000 24.5601\n100000 30.2785\n</code></pre>\n\n<p>but for the algorithm below I get this:</p>\n\n<pre><code>10000 0.000488489\n20000 0.000419209\n30000 0.000539166\n40000 0.000528902\n50000 0.000538524\n60000 0.000669387\n70000 0.000701461\n80000 0.000653029\n90000 0.000603635\n100000 0.000520563\n</code></pre>\n\n<p>Here's the code for the second algorithm:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;ctime&gt;\n#include &lt;windows.h&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\ndouble PCFreq = 0.0;\n__int64 CounterStart = 0;\n\nvoid StartCounter()\n{\n    LARGE_INTEGER li;\n    if (!QueryPerformanceFrequency(&amp;li))\n        cout &lt;&lt; \"QueryPerformanceFrequency failed!\\n\";\n\n    PCFreq = double(li.QuadPart);\n\n    QueryPerformanceCounter(&amp;li);\n    CounterStart = li.QuadPart;\n}\n\ndouble GetCounter()\n{\n    LARGE_INTEGER li;\n    QueryPerformanceCounter(&amp;li);\n    return double(li.QuadPart - CounterStart) / PCFreq;\n}\n\nbool sum(int tab[], int l, int x)\n{\n    int left = 0;\n    int right = l - 1;\n\n    while (left &lt; right)\n    {\n        if (tab[left] + tab[right] == x)\n        {\n            cout &lt;&lt; \"\\n\" &lt;&lt; tab[left] &lt;&lt; \"+\" &lt;&lt; tab[right] &lt;&lt; \"=\" &lt;&lt; x;\n            return 1;\n        }\n        else if (tab[left] + tab[right] &lt; x)\n            left++;\n        else\n            right--;\n    }\n    return 0;\n}\n\nint main()\n{\n    int l;\n    int x;\n    int temp;\n    bool change;\n\n    srand(time(NULL));\n\n    cout &lt;&lt; \"=============================================================\\n\";\n\n    cout &lt;&lt; \"Array Lenght: \";\n    cin &gt;&gt; l;\n\n    cout &lt;&lt; \"Looking for sum: \";\n    cin &gt;&gt; x;\n\n    int *tab = new int[l];\n\n    for (int i = 0; i &lt; l; i++)\n    {\n        tab[i] = (rand() * rand()) % 2147483647;\n    }\n\n    while (true)\n    {\n        change = false;\n        for (int i = 0; i &lt; l - 1; i++)\n        {\n            if (tab[i] &gt; tab[i + 1])\n            {\n                change = true;\n                temp = tab[i];\n                tab[i] = tab[i + 1];\n                tab[i + 1] = temp;\n            }\n        }\n\n        if (!change)\n            break;\n    }\n\n    long double time;\n\n    StartCounter();\n\n    if (sum(tab, l, x) == 1)\n    {\n        cout &lt;&lt; \" |||| Found sum\";\n    }\n    else\n    {\n        cout &lt;&lt; \"Sum of 2 numbers not found\";\n    }\n    time = GetCounter();\n\n    ofstream data2;\n    data2.open(\"data2.txt\", ios::app);\n\n    cout &lt;&lt; \"\\nAlgorithmic efficiency:\" &lt;&lt; time;\n    data2 &lt;&lt; l &lt;&lt; \" \" &lt;&lt; time &lt;&lt; endl;\n\n    data2.close();\n}\n</code></pre>\n\n<p>Why are the times so tiny and unrealistic for this?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1541610033, "post_id": 53194232, "comment_id": 93277243, "body": "Hint: how would you do it with a piece of paper and a pencil?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1541610092, "post_id": 53194232, "comment_id": 93277276, "body": "BTW: in stead of <code>find_this[]={&#39;p&#39;,&#39;t&#39;,&#39;e&#39;,&#39;\\0&#39;}</code> you can simply write <code>find_this[]=&quot;pte&quot;</code>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1541610138, "post_id": 53194232, "comment_id": 93277293, "body": "@Jabberwocky I&#39;d just circle the matching characters!"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1541610194, "post_id": 53194232, "comment_id": 93277332, "body": "@LightnessRacesinOrbit :-) come on.."}, {"owner": {"reputation": 81, "user_id": 10508149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBAd5.jpg?s=128&g=1", "display_name": "Vlada Misici", "link": "https://stackoverflow.com/users/10508149/vlada-misici"}, "edited": false, "score": 0, "creation_date": 1541610392, "post_id": 53194232, "comment_id": 93277425, "body": "I think two for statements could do the job here. I mean just compare every character in order and see if it matches . However if anyone has a more efficient idea please tell me :)"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1541610440, "post_id": 53194232, "comment_id": 93277448, "body": "Hint 2: Your first idea with <code>strchr</code> is not entirely wrong. Be aware that the second parameter of <code>strchr</code> is not a <code>char*</code> but a <code>char</code>. Algorithm: for each character in <code>find_this</code> : call <code>strchr(text, character)</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1541610560, "post_id": 53194232, "comment_id": 93277515, "body": "@VladaMisici <i>just compare every character in order and see if it matches</i>: yes, this is more or less what you need to do. Write this program (3-4 lines of code) and test it. Worry about optimisation only once it works. BTW are you asking for C or for C++?"}, {"owner": {"reputation": 81, "user_id": 10508149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBAd5.jpg?s=128&g=1", "display_name": "Vlada Misici", "link": "https://stackoverflow.com/users/10508149/vlada-misici"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1541610837, "post_id": 53194232, "comment_id": 93277670, "body": "@Jabberwocky I&#39;m asking for C++. By the way , thank you for the tips !"}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 2, "last_activity_date": 1541610427, "creation_date": 1541610427, "answer_id": 53194376, "question_id": 53194232, "link": "https://stackoverflow.com/questions/53194232/strchr-for-multiple-characters/53194376#53194376", "title": "strchr for multiple characters?", "body": "<p>Like this:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    char text[]      = \"example text\";\n    char find_this[] = \"pte\";\n\n    auto it = std::find_first_of(\n        std::begin(text), std::end(text),\n        std::begin(find_this), std::end(find_this)-1\n    );\n\n    if (it != std::end(text))\n       std::cout &lt;&lt; \"Found!\";\n}\n</code></pre>\n\n<h3><a href=\"http://coliru.stacked-crooked.com/a/c8b1c3567832012e\" rel=\"nofollow noreferrer\">(live demo</a>)</h3>\n\n<p>Notice that I reduce the <code>find_this</code> range by one, to discount its null terminator (as that's assuredly present in the input range!). If I were clever I'd just use a range that discounts the null terminator in both cases. You can do that yourself.</p>\n"}], "owner": {"reputation": 81, "user_id": 10508149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBAd5.jpg?s=128&g=1", "display_name": "Vlada Misici", "link": "https://stackoverflow.com/users/10508149/vlada-misici"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 53194376, "answer_count": 1, "score": 1, "last_activity_date": 1541610427, "creation_date": 1541609867, "question_id": 53194232, "link": "https://stackoverflow.com/questions/53194232/strchr-for-multiple-characters", "title": "strchr for multiple characters?", "body": "<p>How can I check if two char arrays have any characters in common ? Obviously strchr won't work in this case because it can only search for one character but I used it to give you an idea about what I want to do. </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main ()\n{\n    char text[]=\"example text\",\n         find_this[]={'p','t','e','\\0'};\n    if (strchr(text,find_this))\n        cout&lt;&lt;\"Found!\";\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "macros", "function-pointers"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1541609475, "post_id": 53194063, "comment_id": 93276935, "body": "You might want to read up on what preprocessors actually do. <code>GET_FUNCTION_NAME(_function)</code> will result in <code>#_function</code>, which will result in <code>&quot;_function&quot;</code> after string-izing. You need a macro that constructs a data-guard object that takes an additional argument (the string-ized function name), and drive this from the caller site, not the callee site."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 1, "creation_date": 1541609771, "post_id": 53194063, "comment_id": 93277098, "body": "There are some compiler dependent macros that get you the current function name: e.g. <code>__FUNCTION__</code>. But nothing that will convert a variable into a function name."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1541609775, "post_id": 53194063, "comment_id": 93277102, "body": "DataGuard should take also string representing function, and then MACRO might be used at call site to void to repeat function twice."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 1, "creation_date": 1541609856, "post_id": 53194063, "comment_id": 93277144, "body": "@MartinYork: <code>__FUNCTION__</code> would &quot;give&quot; <code>DataGuard&lt;T,D&gt;::DataGuard</code> not function from the parameter."}], "answers": [{"tags": [], "owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "is_accepted": true, "score": 1, "last_activity_date": 1541610126, "creation_date": 1541610126, "answer_id": 53194302, "question_id": 53194063, "link": "https://stackoverflow.com/questions/53194063/get-function-pointers-function-name-using-macro-not-working/53194302#53194302", "title": "Get function pointer&#39;s function name using macro # not working", "body": "<p>You can't do it from the inside the function.</p>\n\n<p>You can do externally:</p>\n\n<pre><code>DATAGUARD( MyObject ) guard( data, MyObjectGet, ptr );\n</code></pre>\n\n<p>I would change this:</p>\n\n<pre><code>#define  DG(data, func, ptr)     data, func, ptr, #func\n\n// usage is now:\nDATAGUARD( MyObject )  guard(DG(guard, data, MyObjectGet, ptr));\n</code></pre>\n\n<p>You will notice that we pass the function pointer and the name of the function pointer as a quoted string as the last parameter. You can use this string as part of your error message.</p>\n"}], "owner": {"reputation": 884, "user_id": 2179289, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/500367065665a05a847242a39a0bc69e?s=128&d=identicon&r=PG", "display_name": "Marek Krzeminski", "link": "https://stackoverflow.com/users/2179289/marek-krzeminski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 1, "accepted_answer_id": 53194302, "answer_count": 1, "score": 1, "last_activity_date": 1541610126, "creation_date": 1541609177, "question_id": 53194063, "link": "https://stackoverflow.com/questions/53194063/get-function-pointers-function-name-using-macro-not-working", "title": "Get function pointer&#39;s function name using macro # not working", "body": "<p>I have a helper class defined like this:</p>\n\n<p>DataGuard.h</p>\n\n<pre><code>template&lt;typename T, typename D&gt;\nclass DataGuard {\npublic:\n  typedef MY_STATUS( *FunctionType )( const T*, D* );\n\nprivate:\n  bool               _isSuccess;\n  D&amp;                 _data;\n  const FunctionType _function;\n\npublic:\n  explicit DataGuard( D&amp; data, FunctionType&amp; function, const T* ptr );\n  ~DataGuard();\n  bool isSuccess() const;\n};\n#define DATAGUARD( Type ) const DataGuard&lt;Type, Type##Data&gt;\n\n#include \"DataGuard.inl\"\n</code></pre>\n\n<p>DataGuard.inl</p>\n\n<pre><code>#define GET_FUNCTION_NAME( functionName ) #functionName\n\ntemplate&lt;typename T, typename D&gt;\nDataGuard&lt;T,D&gt;::DataGuard( D&amp; data, FunctionType&amp; function, const T* ptr ) :\n  _data( data ),\n  _function( function )\n{\n  auto iReturn = function( ptr, &amp;data );\n  _isSuccess = iReturn == MY_SUCCESS;\n  if( !_isSuccess ) {\n    Utility::logErrorMessage( GET_FUNCTION_NAME( _function ), iReturn );  \n  }\n}\n\ntemplate&lt;typename T, typename D&gt;\nDataGuard&lt;T,D&gt;::~DataGuard() {\n  if( _isSuccess ) {\n    _function( NULL, &amp;_data );\n  }\n}\n\ntemplate&lt;typename T, typename D&gt;\nbool DataGuard&lt;T,D&gt;::isSuccess() const {\n  return _isSuccess;\n}\n</code></pre>\n\n<p>This helper class is being called like this:</p>\n\n<pre><code>DATAGUARD( MyObject ) guard( data, MyObjectGet, ptr );\n</code></pre>\n\n<p>The problem is that if there is an error in the DataGuard constructor, the error message that I print is showing <strong>_function</strong> rather than the desired <strong>MyObjectGet</strong> function name.  </p>\n\n<p>Any ideas why the GET_FUNCTION_NAME macro is failing me?</p>\n"}, {"tags": ["c++", "c++11", "reference"], "comments": [{"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 6, "creation_date": 1541608364, "post_id": 53193745, "comment_id": 93276322, "body": "Assigning to <code>ri</code> changes <i>what <code>ri</code> refers to</i>, not <code>ri</code> itself.  That&#39;s what references are for."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 4, "creation_date": 1541608378, "post_id": 53193745, "comment_id": 93276327, "body": "#3 is where you are wrong. <b><i>then the reference of ri to i is removed</i></b> No it still is a reference."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1541608439, "post_id": 53193745, "comment_id": 93276358, "body": "Sounds like you could use a <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>"}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 3, "creation_date": 1541608462, "post_id": 53193745, "comment_id": 93276370, "body": "Please, avoid this syntax <code>int i, &amp;ri =i;</code> and instead separate each declaration on its own line."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 3, "creation_date": 1541609398, "post_id": 53193745, "comment_id": 93276892, "body": "Even though this is a question about a basic aspect of C++, I think it is an on-topic question. The OP provided an MCVE, the observed behavior and the expected behavior. I&#39;ve seen far worse. +1"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1541610278, "post_id": 53193745, "comment_id": 93277374, "body": "Think of references as aliases for the variable they refer to. A reference <i>is</i> the same as the referenced variable. It&#39;s just another name for it."}, {"owner": {"reputation": 111, "user_id": 6436744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vtmmp.jpg?s=128&g=1", "display_name": "Arpan Ganguli", "link": "https://stackoverflow.com/users/6436744/arpan-ganguli"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1541611094, "post_id": 53193745, "comment_id": 93277796, "body": "@JesperJuhl Thanks! This is possibly the most succinct and clear explanation I could get. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 396, "user_id": 5799793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6GkCY.jpg?s=128&g=1", "display_name": "Little Boy Blue", "link": "https://stackoverflow.com/users/5799793/little-boy-blue"}, "is_accepted": false, "score": 1, "last_activity_date": 1541608502, "creation_date": 1541608502, "answer_id": 53193839, "question_id": 53193745, "link": "https://stackoverflow.com/questions/53193745/why-does-my-variable-change-according-to-its-reference-and-not-the-other-way-rou/53193839#53193839", "title": "Why does my variable change according to its reference and not the other way round?", "body": "<p>Reference means that you are assigning a variable <code>&amp;i</code> to have the same memory address as the variable you are setting it equal to -- <code>i</code>. Thus, changing something about the information at that address changes any variable that is looking at that address for it's value (i.e. a reference or pointer variable).</p>\n"}, {"comments": [{"owner": {"reputation": 111, "user_id": 6436744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vtmmp.jpg?s=128&g=1", "display_name": "Arpan Ganguli", "link": "https://stackoverflow.com/users/6436744/arpan-ganguli"}, "edited": false, "score": 1, "creation_date": 1541608981, "post_id": 53193856, "comment_id": 93276659, "body": "Thanks - this is clear. Actually, someone referred me to the link you mentioned and I picked up C++ Primer. I mistakenly left out a couple of lines where this was explained. It was basically my carelessness."}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": true, "score": 4, "last_activity_date": 1541608546, "creation_date": 1541608546, "answer_id": 53193856, "question_id": 53193745, "link": "https://stackoverflow.com/questions/53193745/why-does-my-variable-change-according-to-its-reference-and-not-the-other-way-rou/53193856#53193856", "title": "Why does my variable change according to its reference and not the other way round?", "body": "<p>C++ is not java. You cannot reassign a reference.</p>\n\n<p><code>ri = 10;</code> does not create another integer for <code>ri</code> to bind to. It is actually changing the value of what <code>ri</code> is bound to, which is <code>i</code>.</p>\n\n<p>As suggested in the comments, you really should go for <a href=\"https://stackoverflow.com/q/388242/5470596\">a good C++ book</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 37, "user_id": 10570107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f76b2ab9896ec825e62fffe28c67f215?s=128&d=identicon&r=PG&f=1", "display_name": "Don&#39;tDownVote", "link": "https://stackoverflow.com/users/10570107/dontdownvote"}, "is_accepted": false, "score": 1, "last_activity_date": 1541608604, "creation_date": 1541608604, "answer_id": 53193882, "question_id": 53193745, "link": "https://stackoverflow.com/questions/53193745/why-does-my-variable-change-according-to-its-reference-and-not-the-other-way-rou/53193882#53193882", "title": "Why does my variable change according to its reference and not the other way round?", "body": "<p>ri is a reference to i. References work like pointers. ri and i are the same memory. If you type </p>\n\n<pre><code>std::cout &lt;&lt; &amp;i &lt;&lt; \"  \" &lt;&lt; &amp;ri &lt;&lt; std::endl;\n</code></pre>\n\n<p>both will be the same. Setting ri to 10 doesn't give it new memory but sets current.</p>\n"}, {"tags": [], "owner": {"reputation": 2630, "user_id": 5053331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d9a0047e09056279f06b7fb3b0c101e?s=128&d=identicon&r=PG&f=1", "display_name": "cdonat", "link": "https://stackoverflow.com/users/5053331/cdonat"}, "is_accepted": false, "score": 2, "last_activity_date": 1541608621, "creation_date": 1541608621, "answer_id": 53193888, "question_id": 53193745, "link": "https://stackoverflow.com/questions/53193745/why-does-my-variable-change-according-to-its-reference-and-not-the-other-way-rou/53193888#53193888", "title": "Why does my variable change according to its reference and not the other way round?", "body": "<p><code>r</code> and <code>ri</code> simply are two names for the same thing. You first assign <code>5</code> to that thing and later <code>10</code>. After that, of course that one thing is <code>10</code> and referring to it with any of the names will give you that common value.</p>\n"}], "owner": {"reputation": 111, "user_id": 6436744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vtmmp.jpg?s=128&g=1", "display_name": "Arpan Ganguli", "link": "https://stackoverflow.com/users/6436744/arpan-ganguli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 53193856, "answer_count": 4, "score": 1, "last_activity_date": 1541678725, "creation_date": 1541608218, "last_edit_date": 1541609295, "question_id": 53193745, "link": "https://stackoverflow.com/questions/53193745/why-does-my-variable-change-according-to-its-reference-and-not-the-other-way-rou", "title": "Why does my variable change according to its reference and not the other way round?", "body": "<p>I am new to C++. With the following minimal program: </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    int i, &amp;ri =i;\n    i = 5; ri = 10;\n    std::cout &lt;&lt; i  &lt;&lt; \" \" &lt;&lt; ri &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I observe the output to be</p>\n\n<pre><code>10 10\n</code></pre>\n\n<p>where I expected it to be</p>\n\n<pre><code>5 10\n</code></pre>\n\n<p>My line of reasonning is:</p>\n\n<ol>\n<li><code>&amp;ri</code> refers to <code>i</code>, so the initial value of <code>ri</code> is equal to <code>i</code> (whatever that is).</li>\n<li>Now, when I assign the value 5 to <code>i</code>, then the value of <code>ri</code> changes to 5.</li>\n<li>Now, when I change the value of <code>ri</code> to 10, then the reference of <code>ri</code> to <code>i</code> is removed and it now occupies a unique space with the value 10 and is no longer linked to <code>i</code>.</li>\n<li>Therefore, now when I <code>std::cout &lt;&lt; i and &lt;&lt; ri</code>, the result should display <code>5 10</code>.</li>\n</ol>\n\n<p>Instead it seems that <code>i</code> is referring to <code>ri</code> (I checked by changing the values that I assign to <code>ri</code>).</p>\n\n<p>Can you please let me know what I am thinking incorrectly?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 1, "creation_date": 1541608656, "post_id": 53193727, "comment_id": 93276474, "body": "I would remove the defaults from both <code>id</code> and <code>name</code> and then look through the compiler errors that result.  I reckon that&#39;s the best you can do."}, {"owner": {"reputation": 2630, "user_id": 5053331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d9a0047e09056279f06b7fb3b0c101e?s=128&d=identicon&r=PG&f=1", "display_name": "cdonat", "link": "https://stackoverflow.com/users/5053331/cdonat"}, "edited": false, "score": 0, "creation_date": 1541608821, "post_id": 53193727, "comment_id": 93276579, "body": "Have you tried <code>grep</code>? Just in case..."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 2630, "user_id": 5053331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d9a0047e09056279f06b7fb3b0c101e?s=128&d=identicon&r=PG&f=1", "display_name": "cdonat", "link": "https://stackoverflow.com/users/5053331/cdonat"}, "edited": false, "score": 0, "creation_date": 1541611278, "post_id": 53193727, "comment_id": 93277886, "body": "@cdonat Falls apart a bit with braced-init-lists and emplace_back and such. The type name is not always given at the point of construction, so what do you grep for? Okay the emplace_back example is not good"}, {"owner": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "edited": false, "score": 0, "creation_date": 1541612347, "post_id": 53193727, "comment_id": 93278421, "body": "If you want to break compilation, why not just remove the default?"}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 0, "last_activity_date": 1541609362, "creation_date": 1541609362, "answer_id": 53194105, "question_id": 53193727, "link": "https://stackoverflow.com/questions/53193727/how-can-i-flag-all-uses-of-a-default-parameter-at-compile-time/53194105#53194105", "title": "How can I flag all uses of a default parameter at compile time", "body": "<p>You might create overload:</p>\n\n<pre><code>MyClass(const std::string&amp; p1, int id, Name name)\n  : p1_(p1), id_(id), name_(name)\n{}\n\nMyClass(const std::string&amp; p1, int id = 0) = delete; // Name no provided explicitly\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 2, "last_activity_date": 1541609414, "creation_date": 1541609414, "answer_id": 53194121, "question_id": 53193727, "link": "https://stackoverflow.com/questions/53193727/how-can-i-flag-all-uses-of-a-default-parameter-at-compile-time/53194121#53194121", "title": "How can I flag all uses of a default parameter at compile time", "body": "<p>One thing you could do is add a couple deleted constructors and get rid of the default parameters in the \"main\" constructor.</p>\n\n<pre><code>struct MyClass\n{\n    MyClass(const std::string&amp; p1) = delete;\n    MyClass(const std::string&amp; p1, int id)  = delete;\n    MyClass(const std::string&amp; p1, int id, Name name) : p1_(p1), id_(id), name_(name) {}\n    std::string p1_;\n    int id_;\n    Name name_;\n};\n</code></pre>\n\n<p>will error out for</p>\n\n<pre><code>MyClass{\"foo\"};\nMyClass{\"foo\", 10};\n</code></pre>\n\n<p>but will not be an error for</p>\n\n<pre><code>MyClass{\"foo\", 42, BOB};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 2, "last_activity_date": 1541611150, "creation_date": 1541611150, "answer_id": 53194573, "question_id": 53193727, "link": "https://stackoverflow.com/questions/53193727/how-can-i-flag-all-uses-of-a-default-parameter-at-compile-time/53194573#53194573", "title": "How can I flag all uses of a default parameter at compile time", "body": "<p>If you want to catch places where <code>name</code>'s default is used, it doesn't really matter that <code>id</code> has a default too: nobody's going to be using it unless they also used <code>name</code>'s default, which is a case you want to catch anyway.</p>\n\n<p>So just strip both defaults and watch the flames fly.</p>\n\n<p>But there's no magic flag or switch to precisely/automatically do specifically what you're asking, no.</p>\n"}], "owner": {"reputation": 4060, "user_id": 629530, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2e4763f0cc8124d677d249a99800950a?s=128&d=identicon&r=PG", "display_name": "firebush", "link": "https://stackoverflow.com/users/629530/firebush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 53194573, "answer_count": 3, "score": 1, "last_activity_date": 1541611150, "creation_date": 1541608165, "question_id": 53193727, "link": "https://stackoverflow.com/questions/53193727/how-can-i-flag-all-uses-of-a-default-parameter-at-compile-time", "title": "How can I flag all uses of a default parameter at compile time", "body": "<p>I'd like to find all places where a second default parameter for a constructor is used.  The signature looks something like this:</p>\n\n<pre><code>enum Name {\n    NONE = 0,\n    BOB,\n    LARRY\n};\n\nMyClass(const std::string&amp; p1, int id = 0, name = NONE)\n  : p1_(p1), id_(id), name_(name)\n{ }\n</code></pre>\n\n<p>I'm interested in finding all places where the default value of name is used. That is, all call sites where no value is explicitly provided for name. I'm not concerned about where NONE is explicitly provided, only where name is not provided in the constructor.</p>\n\n<p>This strikes me as something that should be discoverable at compile time and that, therefore, I can use the compiler to alert me to.</p>\n\n<p>My initial thought was to remove NONE as a default, compile, and look through the warnings. But then I realized that the parameter before it, id, has a default value so removing the default <code>= NONE</code> for name will not compile because you can't have parameters without defaults after parameters that do.</p>\n\n<p>My second attempt was to add a new Name enumerated value called DEFAULT_WAS_USED, set that as the default, and compile with a static_assert:</p>\n\n<pre><code>enum Name {\n    NONE = 0,\n    BOB,\n    LARRY,\n    DEFAULT_WAS_USED\n};\n\nMyClass(const std::string&amp; p1, int id = 0, name = DEFAULT_WAS_USED)\n  : p1_(p1), id_(id), name_(name)\n{\n    static_assert(name_ != DEFAULT_WAS_USED, \"default name was used\");\n}\n</code></pre>\n\n<p>However, while the use of name as DEFAULT_WAS_USED would strictly be known at compile time since I know that value isn't used anywhere in the code and would only be used as a default parameter, the compiler doesn't know that's the case and fails to compile this.</p>\n\n<p>Is there a clever way for me to use the compiler or linker to find all places in the code where the default parameter is used?</p>\n\n<p>I'm using gcc 4.8.</p>\n"}, {"tags": ["c++", "c++11", "c++-standard-library", "cmath"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1541608230, "post_id": 53193707, "comment_id": 93276242, "body": "<a href=\"http://coliru.stacked-crooked.com/a/cb5b00b434e332fb\" rel=\"nofollow noreferrer\">Works here</a>.  Can you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541608255, "post_id": 53193707, "comment_id": 93276257, "body": "@NathanOliver That&#39;s a lot of headers for a <code>std::pow</code> :D."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1541608307, "post_id": 53193707, "comment_id": 93276293, "body": "@LightnessRacesinOrbit I&#39;m lazy and I just keep a &quot;header&quot; of common includes. ;)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1541608354, "post_id": 53193707, "comment_id": 93276312, "body": "@NathanOliver Have you considered <code>#include &lt;bits&#47;stdc++.h&gt;</code>? <i>*ducks*</i>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1541608413, "post_id": 53193707, "comment_id": 93276341, "body": "@LightnessRacesinOrbit Sorry, I do not want to become cannon fodder :)"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 3, "creation_date": 1541608479, "post_id": 53193707, "comment_id": 93276378, "body": "<code>std::pow(1.0033333333333334, -360)</code> -- That line of code has 1) no semicolon, and 2) the return value of <code>pow</code> is not assigned to anything.  So exactly how is that line of code used in your program?  Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 812, "user_id": 10492002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bTAmh.png?s=128&g=1", "display_name": "Cyber", "link": "https://stackoverflow.com/users/10492002/cyber"}, "edited": false, "score": 0, "creation_date": 1541608645, "post_id": 53193707, "comment_id": 93276469, "body": "Cannot reproduce on g++ 8.2.1."}, {"owner": {"reputation": 65, "user_id": 10619432, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5aW30E7zm9Y/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDsZ30xMujQrPTOuRLjNargdPVy9Q/mo/photo.jpg?sz=128", "display_name": "Sebastian Kucharzyk", "link": "https://stackoverflow.com/users/10619432/sebastian-kucharzyk"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1541608815, "post_id": 53193707, "comment_id": 93276576, "body": "@PaulMcKenzie, I just wanted to show the core of the problem avoiding unnecessary stuff like variables etc. After simplification, the problem comes down to the provided code"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1541608883, "post_id": 53193707, "comment_id": 93276606, "body": "@SebastianKucharzyk -- That&#39;s not how it works here on SO.  The code you posted is not a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  It doesn&#39;t take long to have 2 <code>#include</code> statements, an <code>int main()</code> and a single <code>cout</code> of the value.  Note how at least 2 persons did the work you&#39;re supposed to have done."}, {"owner": {"reputation": 5339, "user_id": 1714692, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bd72cbc200eb7c9aa507624f154b21a7?s=128&d=identicon&r=PG", "display_name": "Francesco Boi", "link": "https://stackoverflow.com/users/1714692/francesco-boi"}, "edited": false, "score": 0, "creation_date": 1541609032, "post_id": 53193707, "comment_id": 93276684, "body": "are u using float or double? Try to use double. I am getting the correct result with both of them."}, {"owner": {"reputation": 1189, "user_id": 9232218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7ced53adbb0ba08d1cea65a43b124d?s=128&d=identicon&r=PG&f=1", "display_name": "Yastanub", "link": "https://stackoverflow.com/users/9232218/yastanub"}, "edited": false, "score": 1, "creation_date": 1541609333, "post_id": 53193707, "comment_id": 93276833, "body": "@SebastianKucharzyk well obviousy this is not the core of your problem because none of the commenters can reproduce your problem. That is why you should provide a valid example so others may spot other mistakes which lead t this strange behaviour. Also pow does not seem to return <code>inf</code> under any circumstances so where do you get this value from?"}, {"owner": {"reputation": 812, "user_id": 10492002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bTAmh.png?s=128&g=1", "display_name": "Cyber", "link": "https://stackoverflow.com/users/10492002/cyber"}, "edited": false, "score": 0, "creation_date": 1541609443, "post_id": 53193707, "comment_id": 93276921, "body": "@SebastianKucharzyk I guarantee you that the problem does not come down to that line since the function returns the proper result with both g++ 8.2.1 and Visual Studio 2017."}, {"owner": {"reputation": 65, "user_id": 10619432, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5aW30E7zm9Y/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDsZ30xMujQrPTOuRLjNargdPVy9Q/mo/photo.jpg?sz=128", "display_name": "Sebastian Kucharzyk", "link": "https://stackoverflow.com/users/10619432/sebastian-kucharzyk"}, "edited": false, "score": 0, "creation_date": 1541609523, "post_id": 53193707, "comment_id": 93276965, "body": "Ok, sorry guys, I will remember to provide better explanations in the future ;). Now the example is complete."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1541609874, "post_id": 53193707, "comment_id": 93277152, "body": "You are negating an <code>unsigned int</code> in the call to <code>pow</code>.  Of course if you stuck <code>-360</code> directly in the call, it would come out correct."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1541611933, "post_id": 53193707, "comment_id": 93278222, "body": "@SebastianKucharzyk  Just to let you know, the code you finally posted <i>did</i> <a href=\"https://www.ideone.com/TATM9M\" rel=\"nofollow noreferrer\">duplicate the issue for me</a>.  See how valuable a full, but minimal example is?"}], "answers": [{"comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1541609936, "post_id": 53194229, "comment_id": 93277188, "body": "I think you got me by a few seconds."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 65, "user_id": 10619432, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5aW30E7zm9Y/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDsZ30xMujQrPTOuRLjNargdPVy9Q/mo/photo.jpg?sz=128", "display_name": "Sebastian Kucharzyk", "link": "https://stackoverflow.com/users/10619432/sebastian-kucharzyk"}, "edited": false, "score": 2, "creation_date": 1541610070, "post_id": 53194229, "comment_id": 93277262, "body": "@SebastianKucharzyk better than a &quot;thank you&quot; comment, you can clic the checkmark under the answer score to accept it."}, {"owner": {"reputation": 65, "user_id": 10619432, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5aW30E7zm9Y/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDsZ30xMujQrPTOuRLjNargdPVy9Q/mo/photo.jpg?sz=128", "display_name": "Sebastian Kucharzyk", "link": "https://stackoverflow.com/users/10619432/sebastian-kucharzyk"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1541610419, "post_id": 53194229, "comment_id": 93277436, "body": "@YSC, yup, I clicked but I don&#39;t have enough reputation yet. I guess it will be added to you when I will gain some more points"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 7, "last_activity_date": 1605468134, "last_edit_date": 1605468134, "creation_date": 1541609852, "answer_id": 53194229, "question_id": 53193707, "link": "https://stackoverflow.com/questions/53193707/c-function-stdpow-returns-inf-instead-of-a-value/53194229#53194229", "title": "C++ function std::pow() returns inf instead of a value", "body": "<p>Your problem comes from the <code>-(m-period+1)</code> part of your call to <code>pow</code>.  <code>period</code> is declared as</p>\n<pre><code>unsigned int period = 1;\n</code></pre>\n<p>so when</p>\n<pre><code>-(m-period+1)\n</code></pre>\n<p>gets evaluated you have</p>\n<pre><code>   -(int - unsigned int + int)\n== -(unsigned int)\n</code></pre>\n<p>so you get <code>360</code> as an <code>unsigned int</code> and when you negate it, it wraps around and becomes a very large number (<code>4294966936</code> for a 32 bit <code>int</code>).  That means you are doing</p>\n<pre><code>1.0033333333333334 ^ 4294966936\n</code></pre>\n<p>not</p>\n<pre><code>1.0033333333333334 ^ -360\n</code></pre>\n<p>You need to make <code>period</code> an <code>int</code> to get the correct results.</p>\n<hr />\n<p>If you have a number that must not be negative, don't use an unsigned type.  Nothing about <code>unsigned</code> stops negative numbers, it just turns them into a positive number.  If you want to make sure a number isn't negative, use a signed type and an if statement.</p>\n"}], "owner": {"reputation": 65, "user_id": 10619432, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5aW30E7zm9Y/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDsZ30xMujQrPTOuRLjNargdPVy9Q/mo/photo.jpg?sz=128", "display_name": "Sebastian Kucharzyk", "link": "https://stackoverflow.com/users/10619432/sebastian-kucharzyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 686, "favorite_count": 0, "accepted_answer_id": 53194229, "answer_count": 1, "score": 3, "last_activity_date": 1605468134, "creation_date": 1541608086, "last_edit_date": 1541690988, "question_id": 53193707, "link": "https://stackoverflow.com/questions/53193707/c-function-stdpow-returns-inf-instead-of-a-value", "title": "C++ function std::pow() returns inf instead of a value", "body": "<p>I've got a problem with returned value by <code>std::pow()</code>. Basically, I have following line in the code:</p>\n\n<pre><code>#include &lt;cmath&gt;\nint main()\n{\n     double rate = 1.0033333333333334;\n     int m = 360;\n     unsigned int period = 1;\n     double res = std::pow(rate, -(m-period+1));\n}\n</code></pre>\n\n<p>And res has a value of <code>inf</code>. However, when I paste <code>std::pow(rate, -(m-period+1))</code> to Visual Studio watch while debugging it has a proper value of <code>0.30179586515268314</code>. Does anyone know what's the source of this discrepancy?</p>\n\n<p>See <a href=\"http://coliru.stacked-crooked.com/a/ec78c5172cf53e03\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/ec78c5172cf53e03</a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 12794, "user_id": 865643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mG7s3.jpg?s=128&g=1", "display_name": "noelicus", "link": "https://stackoverflow.com/users/865643/noelicus"}, "edited": false, "score": 0, "creation_date": 1541608752, "post_id": 53193643, "comment_id": 93276535, "body": "I think you meant &quot;copying&quot;? Not &quot;coping&quot;. Also, always worth running code in a debugger to see what&#39;s going on - I think your errors would be self-evident if you did that. Good luck."}], "answers": [{"comments": [{"owner": {"reputation": 3802, "user_id": 2096986, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/3a02e7c9d317839db7ad17f840320afd?s=128&d=identicon&r=PG", "display_name": "Felipe", "link": "https://stackoverflow.com/users/2096986/felipe"}, "edited": false, "score": 0, "creation_date": 1541609347, "post_id": 53193767, "comment_id": 93276844, "body": "I have the same code using vector and I want to use char array."}], "tags": [], "owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "is_accepted": true, "score": 2, "last_activity_date": 1541608289, "creation_date": 1541608289, "answer_id": 53193767, "question_id": 53193643, "link": "https://stackoverflow.com/questions/53193643/copying-generic-values-to-unsigned-char-array-and-copying-back-in-c/53193767#53193767", "title": "Copying generic values to unsigned char array and copying back in C++", "body": "<p>In <code>addValue</code> you explicitly delete the <code>_valueChar</code> buffer. Then <em>the next line along</em> you write into the deleted buffer. What did you expect this code to do?</p>\n\n<p>This is the first of many issues in your code regarding memory management.</p>\n\n<p>Just use a <code>std::vector</code> and as long as its big enough you wont have any of those issues.</p>\n"}], "owner": {"reputation": 3802, "user_id": 2096986, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/3a02e7c9d317839db7ad17f840320afd?s=128&d=identicon&r=PG", "display_name": "Felipe", "link": "https://stackoverflow.com/users/2096986/felipe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 53193767, "answer_count": 1, "score": -1, "last_activity_date": 1541611129, "creation_date": 1541607856, "last_edit_date": 1541611129, "question_id": 53193643, "link": "https://stackoverflow.com/questions/53193643/copying-generic-values-to-unsigned-char-array-and-copying-back-in-c", "title": "Copying generic values to unsigned char array and copying back in C++", "body": "<p>I have a class in C++ that represents a buffer where I can store <code>unsigned char</code>. I have two methods, one the add generic values using templates and another to retrieve the values. When I am trying to retrieve the values I am getting <code>Segmentation fault (core dumped)</code>. I am using <code>memcpy</code> If I change to use <code>std::copy(value, value, _valueChar);</code> I get other errors: <code>error: no type named \u2018value_type\u2019 in \u2018struct std::iterator_traits&lt;int&gt;\u2019</code></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n#include &lt;utility&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n\nclass SkinnyBuffer {\nprivate:\n    unsigned char *_valueChar;\n    std::size_t _sizeChar;\npublic:\n    SkinnyBuffer();\n    SkinnyBuffer(std::size_t size);\n    ~SkinnyBuffer();\n    void clean();\n\n    template&lt;typename T&gt;\n    void addValue(T value) {\n        if (_valueChar != nullptr) {\n            delete[] _valueChar;\n        }\n        // _sizeChar = n; // assume _size is a field\n        // _valueChar = new unsigned char[_sizeChar];\n        // std::copy(value, value, _valueChar);\n        memcpy(_valueChar, &amp;value, sizeof(value));\n    }\n\n    template&lt;typename T&gt;\n    void addValue(std::size_t offset, T value) {\n        if (_valueChar != nullptr) {\n            delete[] _valueChar;\n        }\n        // _sizeChar = n; // assume _size is a field\n        // _valueChar = new unsigned char[_sizeChar];\n        // std::copy(value, value + offset, _valueChar);\n        memcpy(_valueChar + offset, &amp;value, sizeof(value));\n    }\n\n    unsigned char *getValue() {\n        return _valueChar;\n    }\n};\n#include \"SkinnyBuffer.h\"\n\nSkinnyBuffer::SkinnyBuffer() {\n}\n\nSkinnyBuffer::SkinnyBuffer(std::size_t size) {\n    _sizeChar = size;\n    _valueChar = new unsigned char[_sizeChar];\n}\n\nSkinnyBuffer::~SkinnyBuffer() {\n}\n\nvoid SkinnyBuffer::clean() {\n    _valueChar = new unsigned char[_sizeChar];\n}\n\nint main(int argc, char *argv[]) {\n\n    int value = 50;\n    int offset = sizeof(value);\n    SkinnyBuffer b(offset);\n    b.addValue(value);\n\n    int dValue;\n    memcpy(&amp;dValue, b.getValue(), offset);\n    std::cout &lt;&lt; dValue &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 184, "user_id": 10031321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QuQMNVZXojM/AAAAAAAAAAI/AAAAAAAAADE/_PHzjPcH6mk/photo.jpg?sz=128", "display_name": "Bruno Hendrickx", "link": "https://stackoverflow.com/users/10031321/bruno-hendrickx"}, "edited": false, "score": 0, "creation_date": 1541663756, "post_id": 53194732, "comment_id": 93295098, "body": "Basically, if I have an additional private member in <code>ConfigurationScript</code> I can do the following within the move assignment of the same class?  <code>Script::operator=(s);</code> <code>mAdditional = s.mAdditional;</code> <code>return *this</code>"}, {"owner": {"reputation": 184, "user_id": 10031321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QuQMNVZXojM/AAAAAAAAAAI/AAAAAAAAADE/_PHzjPcH6mk/photo.jpg?sz=128", "display_name": "Bruno Hendrickx", "link": "https://stackoverflow.com/users/10031321/bruno-hendrickx"}, "edited": false, "score": 0, "creation_date": 1541664156, "post_id": 53194732, "comment_id": 93295260, "body": "Is it necessary to do <code>Script::operator=(std::move(s))</code> since s was already an rvalue reference?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 184, "user_id": 10031321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QuQMNVZXojM/AAAAAAAAAAI/AAAAAAAAADE/_PHzjPcH6mk/photo.jpg?sz=128", "display_name": "Bruno Hendrickx", "link": "https://stackoverflow.com/users/10031321/bruno-hendrickx"}, "edited": false, "score": 0, "creation_date": 1541673443, "post_id": 53194732, "comment_id": 93300064, "body": "@BrunoHendrickx Yes you can do that"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 184, "user_id": 10031321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QuQMNVZXojM/AAAAAAAAAAI/AAAAAAAAADE/_PHzjPcH6mk/photo.jpg?sz=128", "display_name": "Bruno Hendrickx", "link": "https://stackoverflow.com/users/10031321/bruno-hendrickx"}, "edited": false, "score": 1, "creation_date": 1541673512, "post_id": 53194732, "comment_id": 93300099, "body": "@BrunoHendrickx Yes it&#39;s necessary because <code>s</code> <i>isn&#39;t</i> an rvalue reference! Inside the function it&#39;s just an lvalue of type <code>ConfigurationScript</code>. This is perhaps one of the confusing things of C++, particularly because you would never notice it with a &quot;normal&quot; reference, but it&#39;s exposed with rvalue refs."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 3, "last_activity_date": 1541611766, "creation_date": 1541611766, "answer_id": 53194732, "question_id": 53193435, "link": "https://stackoverflow.com/questions/53193435/move-assignment-with-base-class-and-derived-class/53194732#53194732", "title": "Move assignment with base class and derived class", "body": "<p>Yes, it's valid, and you don't need to cast anything.</p>\n\n<p>You're not even using the result of the base <code>op=</code> call, but you know that it is a <code>Script&amp;</code> that refers to the current object. Since you already have a <code>ConfigurationScript&amp;</code> that refers to the current object <em>and</em> has the needed type (i.e. <code>*this</code>), there is nothing more to do.</p>\n\n<p>In fact, this is so natural that you can just let the compiler do it for you:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;utility&gt;\n\nstruct Base\n{\n    Base&amp; operator=(Base&amp;&amp; other)\n    {\n        std::cout &lt;&lt; \"YOLO!\\n\";\n        return *this;\n    }\n};\n\nstruct Derived : Base\n{\n    /*\n    // Don't need this\n    Derived&amp; operator=(Derived&amp;&amp; other)\n    {\n        Base::operator=(std::move(other));\n        return *this;\n    }*/\n\n    /*\n    // Or even this (though you may need to introduce it\n    // if you have some other user-declared stuff)\n    Derived&amp; operator=(Derived&amp;&amp; other) = default;\n    */\n};\n\nint main()\n{\n    Derived d1, d2;\n    d2 = std::move(d1);\n}\n\n// Output: YOLO!\n</code></pre>\n\n<h3>(<a href=\"http://coliru.stacked-crooked.com/a/e6d8d8c2df29be35\" rel=\"nofollow noreferrer\">live demo</a>)</h3>\n\n<p>However I think you probably meant <code>Script::operator=(std::move(s))</code> to get true movement rather than a copy.</p>\n"}], "owner": {"reputation": 184, "user_id": 10031321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QuQMNVZXojM/AAAAAAAAAAI/AAAAAAAAADE/_PHzjPcH6mk/photo.jpg?sz=128", "display_name": "Bruno Hendrickx", "link": "https://stackoverflow.com/users/10031321/bruno-hendrickx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 0, "accepted_answer_id": 53194732, "answer_count": 1, "score": 1, "last_activity_date": 1541611766, "creation_date": 1541607203, "question_id": 53193435, "link": "https://stackoverflow.com/questions/53193435/move-assignment-with-base-class-and-derived-class", "title": "Move assignment with base class and derived class", "body": "<p>Below is a downsized implementation of a two classes I'm having trouble with. </p>\n\n<h3>code:</h3>\n\n<p>Here is the base class:</p>\n\n<pre><code>//header\nclass Script\n{\npublic: \n    Script(const QString&amp; path, int timeout=10000) : \n    mPath(path), mTimeout(timeout), script(new QProcess) {}\n    Script(Script&amp;&amp; s);\n    Script&amp; operator=(Script&amp;&amp; s);\n    virtual ~Script();\n\nprotected:\n    QString mPath;\n    int mTimeout;\n    QProcess* script;\n}\n\n//source\nScript::Script(Script&amp;&amp; s) :\n    mPath(s.mPath), mTimeout(s.Timeout), script(s.script)\n{\n    s.script = nullptr;\n}\n\nScript&amp; Script::operator=(Script&amp;&amp; s){\n    if(&amp;s != this){\n        delete script;\n        script = s.script;\n        s.script = nullptr;\n\n        mPath = s.mPath;\n        mTimeout = s.mTimeout;\n    }\n    return *this;\n}\n\nScript::~Script() {\n    delete script;\n    script = nullptr;\n}\n</code></pre>\n\n<p>From the code snippet above I derive the following class:</p>\n\n<pre><code>//header\nclass ConfigurationScript : public Script\n{\npublic:\n    ConfigurationScript(const QString&amp; path);\n    ConfigurationScript(ConfigurationScript&amp;&amp; s);\n    ConfigurationScript&amp; operator=(ConfigurationScript&amp;&amp; s);\n}\n\n//source\nConfigurationScript::ConfigurationScript(const QString&amp; path) :\nScript(path) {}\n\nConfigurationScript::ConfigurationScript(ConfigurationScript&amp;&amp; s) : \nScript(std::move(s)) {}\n\nConfiguratonScript&amp; ConfigurationScript::operator=(ConfigurationScript&amp;&amp; s) {\n    if(&amp;s != this){\n        delete script;\n        script = s.script;\n        s.script = nullptr;\n\n        mPath = s.mPath;\n        mTimeout = s.mTimeout;\n    }\n    return *this;\n}\n</code></pre>\n\n<h3>question:</h3>\n\n<p>The move assignment of <code>ConfigurationScript</code> contains duplicate code when you compare it to the move assignment of its base class <code>Script</code>. Can you call the assignment operator of the base class to overcome duplicate code? </p>\n\n<p>For instance is something like this valid?</p>\n\n<pre><code>ConfigurationScript&amp; ConfigurationScript::operator=(ConfigurationScript&amp;&amp; s) {\n    if(&amp;s != this){\n        Script::operator=(s);\n    }\n    return *this;\n}\n</code></pre>\n\n<p>The return type of <code>Script::operator=(s)</code> is <code>Script</code>, do I need to cast it to a <code>ConfigurationScript</code>? \nIf the above is valid, I fail to see how it works.  Otherwise, is there a way to avoid code duplication? </p>\n"}, {"tags": ["c++", "floating-point", "floating-accuracy"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1541607065, "post_id": 53193304, "comment_id": 93275590, "body": "Have you checked <a href=\"https://en.cppreference.com/w/cpp/types/numeric_limits\" rel=\"nofollow noreferrer\"><code>std::numeric_limit</code></a> to see if it have something you could use?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1541607089, "post_id": 53193304, "comment_id": 93275605, "body": "This seems to be asking how to make a <code>float</code> act like an <code>int</code>. If that&#39;s the case, the answer is simple: use <code>int</code>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1541607097, "post_id": 53193304, "comment_id": 93275609, "body": "@Someprogrammerdude I&#39;ve just been looking and there&#39;s nothing out of the box, unless I&#39;m missing it. Could probably come up with some hackery using a combination of its members though"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1541607124, "post_id": 53193304, "comment_id": 93275626, "body": "The question is valid but in this particular use case I would agree that you should be using <code>int</code> (with a 10x multiplier)"}, {"owner": {"reputation": 113, "user_id": 3071306, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yUF9v.jpg?s=128&g=1", "display_name": "CplClegg", "link": "https://stackoverflow.com/users/3071306/cplclegg"}, "edited": false, "score": 0, "creation_date": 1541608281, "post_id": 53193304, "comment_id": 93276271, "body": "Agreed that in a practical scenario it is more reasonable to use an integer and simply use fixed-point math, but I was curious if there was a way to determine this."}], "answers": [{"comments": [{"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1541607318, "post_id": 53193425, "comment_id": 93275742, "body": "but using epsilon he can calculate value he needs."}, {"owner": {"reputation": 113, "user_id": 3071306, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yUF9v.jpg?s=128&g=1", "display_name": "CplClegg", "link": "https://stackoverflow.com/users/3071306/cplclegg"}, "edited": false, "score": 1, "creation_date": 1541608988, "post_id": 53193425, "comment_id": 93276663, "body": "This does not give the correct answer. I am not sure how I would answer my question using epsilon, as it is only the smallest number that can be added to <code>1.0f</code>, which doesn&#39;t seem relevant to finding the point at which <code>value += 0.1f</code> stops working."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1541609163, "post_id": 53193425, "comment_id": 93276758, "body": "in original answer there was rounding issue. Now it is fixed and code providing correctness added."}, {"owner": {"reputation": 113, "user_id": 3071306, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yUF9v.jpg?s=128&g=1", "display_name": "CplClegg", "link": "https://stackoverflow.com/users/3071306/cplclegg"}, "edited": false, "score": 2, "creation_date": 1541610355, "post_id": 53193425, "comment_id": 93277407, "body": "This works for <i>most</i> numbers, but does not work for numbers that have a mantissa of zero. For example <code>1.0f</code> yields <code>33554432</code>, which is a power of 2 off. Also, I am unclear as to <i>why</i> this works."}, {"owner": {"reputation": 113, "user_id": 3071306, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yUF9v.jpg?s=128&g=1", "display_name": "CplClegg", "link": "https://stackoverflow.com/users/3071306/cplclegg"}, "edited": false, "score": 0, "creation_date": 1541610588, "post_id": 53193425, "comment_id": 93277534, "body": "Subtracting <code>numeric_limits::epsilon()</code> from <code>delta</code> prior to using <code>frexp</code> seems to solve the case <code>1.0f</code>"}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1541611181, "post_id": 53193425, "comment_id": 93277836, "body": "The opening paragraph in this answer is wrong. <code>epsilon</code> is the distance between 1 and the next representable value. That is not the smallest value that can be added to 1 to increase it. Adding any number greater than &#189; of <code>epsilon</code> will produce a result greater than 1."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "reply_to_user": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1541611484, "post_id": 53193425, "comment_id": 93277999, "body": "@EricPostpischil you are right, but still this is a good track. Just all corner cases have to be taken into account. I will polish that tomorrow."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1541611606, "post_id": 53193425, "comment_id": 93278067, "body": "The code in this answer produces an incorrect result when <code>delta</code> is a power of two."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1541613580, "post_id": 53193425, "comment_id": 93278988, "body": "@MarekR -- &quot;<b>just</b> all corner cases have to be taken into account&quot; (emphasis added) -- that&#39;s <b>always</b> the issue in floating-point math: there are many corner cases. &lt;g&gt;"}, {"owner": {"reputation": 113, "user_id": 3071306, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yUF9v.jpg?s=128&g=1", "display_name": "CplClegg", "link": "https://stackoverflow.com/users/3071306/cplclegg"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1541615332, "post_id": 53193425, "comment_id": 93279783, "body": "@PeteBecker That certainly is the case. Note that I didn&#39;t ask how to do this programmatically, though I appreciate the effort. Simple math is fine. The code for this ends up being complex if you are trying to deal with a delta that can be <i>any</i> value."}], "tags": [], "owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1541671454, "last_edit_date": 1541671454, "creation_date": 1541607177, "answer_id": 53193425, "question_id": 53193304, "link": "https://stackoverflow.com/questions/53193304/finding-the-maximum-of-a-floating-point-counter/53193425#53193425", "title": "Finding the maximum of a floating point counter", "body": "<p>Yes it is possible.\nthere is <a href=\"https://en.cppreference.com/w/cpp/types/numeric_limits/epsilon\" rel=\"nofollow noreferrer\">std::numeric_limits::epsilon()</a> which defines smallest value which can increase value <code>1.0</code>.</p>\n\n<p>Using this you can calculate this limit for any number.</p>\n\n<p>In <code>C</code> there is <a href=\"https://en.cppreference.com/w/c/types/limits\" rel=\"nofollow noreferrer\">DBL_EPSILON</a></p>\n\n<p>So in your case this goes like this:</p>\n\n<pre><code>template&lt;class T&gt;\nauto maximumWhenAdding(T delta) -&gt; T\n{\n    static_assert(std::is_floating_point_v&lt;T&gt;, \"Works only for floating points.\");\n    int power2= std::ilogb(delta);\n    float roudedDelta = ldexp(T { 1.0 }, power2);\n    if (roudedDelta != delta) {\n        roudedDelta *= 2;\n    }\n\n    return 2 * roudedDelta / std::numeric_limits&lt;T&gt;::epsilon();\n}\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/XyTFTluD1e7wwmpk\" rel=\"nofollow noreferrer\">live example C++</a>  </p>\n\n<p>Note in live test examples <code>delta</code> fails to increase <code>maxForDelta</code>, but subtraction is successful, so this is exactly what you need.</p>\n"}, {"comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1541618115, "post_id": 53195657, "comment_id": 93281020, "body": "What about denormal numbers?"}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1541620551, "post_id": 53195657, "comment_id": 93282227, "body": "@EOF: <code>Y</code> is never subnormal, since, even if <code>y</code> is the smallest representable positive value, multiplying it by <code>2&#47;epsilon</code> produces a normal value. And whether <code>y</code> is subnormal is irrelevant, as its value partakes in <code>x+y</code> without regard to whether it is normal or subnormal. The only exceptional case is when overflow to infinity occurs while calculating <code>Y</code> or <code>X</code>, and that is okay because then the greatest finite number is too small to be <code>X</code>, so \u221e is the correct answer."}, {"owner": {"reputation": 113, "user_id": 3071306, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yUF9v.jpg?s=128&g=1", "display_name": "CplClegg", "link": "https://stackoverflow.com/users/3071306/cplclegg"}, "edited": false, "score": 0, "creation_date": 1541622092, "post_id": 53195657, "comment_id": 93282936, "body": "This is a great write-up, but I found some of it a bit confusing. The part about finding &quot;the position value represented by the highest bit of Y&#39;s significand&quot; does not make sense to me. For example with a <code>y</code> of <code>0.1f</code> we end up with a <code>Y</code> of <code>1677721.6</code>. The significand of this is <code>5033165</code>, and an exponent of <code>147</code>. <code>X</code> ends up as <code>1048576</code>, which is essentially the same exponent (<code>147</code>) with significand of <code>0</code>."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 113, "user_id": 3071306, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yUF9v.jpg?s=128&g=1", "display_name": "CplClegg", "link": "https://stackoverflow.com/users/3071306/cplclegg"}, "edited": false, "score": 0, "creation_date": 1541622504, "post_id": 53195657, "comment_id": 93283126, "body": "@CplClegg: 147 is the encoding of the exponent, not the exponent. The actual exponent is 24. The position value of a bit in the significand is the amount by which a number changes if that bit is changed. For example, if the exponent is 24, changing the leading bit of the significand changes the value by 2^24, so its position value is 2^24. Changing the lowest bit of the significand changes the value by 2^1, so its position value is 2^1. (Note that, just as the exponent is encoded, the actual 24-bit significand is encoded with 23 in a significand field and 1 derived from the exponent field.)"}, {"owner": {"reputation": 113, "user_id": 3071306, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yUF9v.jpg?s=128&g=1", "display_name": "CplClegg", "link": "https://stackoverflow.com/users/3071306/cplclegg"}, "edited": false, "score": 0, "creation_date": 1541623171, "post_id": 53195657, "comment_id": 93283403, "body": "Yes, I gave the encoded value. The real exponent is 20, not 24 (147 - 127). Also, the leading bit (I assume this is the same as the most significant bit) would change the value of Y by 2^19, not 2^20. An easier example would be a Y of 1.0. This has an exponent of 0, toggling the most significant bit in the mantissa/significand would add 0.5 or 2^-1. Am I off somewhere?"}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 113, "user_id": 3071306, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yUF9v.jpg?s=128&g=1", "display_name": "CplClegg", "link": "https://stackoverflow.com/users/3071306/cplclegg"}, "edited": false, "score": 0, "creation_date": 1541629650, "post_id": 53195657, "comment_id": 93286219, "body": "@CplClegg: Sorry, I was looking at the wrong number. Yes, for .1, Y is  about 1,677,721.6. The value of its leading bit is 2^20. For 1.0, the value of its leading bit is 2^0. The significand is the <b>full</b> significand, the <i>s</i> in 1.0 = + <i>s</i> \u2022 2^0\u2014all 24 bits. The 23 bits in the significand field are not the full significand, just the last 23 bits. The significand field only encodes (most of) the significand; it is not the significand."}], "tags": [], "owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 2, "last_activity_date": 1541615933, "last_edit_date": 1541615933, "creation_date": 1541615578, "answer_id": 53195657, "question_id": 53193304, "link": "https://stackoverflow.com/questions/53193304/finding-the-maximum-of-a-floating-point-counter/53195657#53195657", "title": "Finding the maximum of a floating point counter", "body": "<p>Given some positive <code>y</code> used as an increment, the smallest <code>X</code> for which adding <code>y</code> does not produce a result greater than <code>X</code> is the least power of 2 not less than <code>y</code> divided by half the \u201cepsilon\u201d of the floating-point format. It can be calculated by:</p>\n\n<pre><code>Float Y = y*2/std::numeric_limits&lt;Float&gt;::epsilon();\nint e;\nstd::frexp(Y, &amp;e);\nFloat X = std::ldexp(.5, e);\nif (X &lt; Y) X *= 2;\n</code></pre>\n\n<p>A proof follows. I assume IEEE-754 binary floating-point arithmetic using round-to-nearest-ties-to-even.</p>\n\n<p>When two numbers are added in IEEE-754 floating-point arithmetic, the result is the exact mathematical result rounded to the nearest representable value in a selected direction.</p>\n\n<p>A note about notation: Text in <code>source code format</code> represents floating-point values and operations. Other text is mathematical. So <em>x</em>+<em>y</em> is the exact mathematical sum of <em>x</em> and <em>y</em>, <code>x</code> is <em>x</em> in floating-point format, and <code>x+y</code> is the result of adding <code>x</code> and <code>y</code> in a floating-point operation. Also, I will use <code>Float</code> for the floating-point type in C++.</p>\n\n<p>Given a floating-point number <em>x</em>, consider adding a positive value <em>y</em> using floating-point arithmetic, <code>x+y</code>. Under what conditions will the result exceed <em>x</em>?</p>\n\n<p>Let <em>x</em><sub>1</sub> be the next value greater than <em>x</em> representable in the floating-point format, and let <em>x</em><sub>m</sub> be the midpoint between <em>x</em> and <em>x</em><sub>1</sub>. If the mathematical value of <em>x</em>+<em>y</em> is less than <em>x</em><sub>m</sub>, then the floating-point calculation <code>x+y</code> rounds down, so it produces <em>x</em>. If <em>x</em>+<em>y</em> is greater than <em>x</em><sub>m</sub>, either it rounds up and produces <em>x</em><sub>1</sub>, or it produces some greater number because <em>y</em> is large enough to move the sum beyond <em>x</em><sub>1</sub>. If <em>x</em>+<em>y</em> equals <em>x</em><sub>m</sub>, the result is whichever of <em>x</em> or <em>x</em><sub>1</sub> has an even low digit. For reasons we will see, this is always <em>x</em> in the situations relevant to this question, so the calculation rounds down.</p>\n\n<p>Therefore, <code>x+y</code> produces a result greater than <em>x</em> if and only if <em>x</em>+<em>y</em> exceeds <em>x</em><sub>m</sub>, meaning that <em>y</em> exceeds half the distance from <em>x</em> to <em>x</em><sub>1</sub>. Note that the distance from <em>x</em> to <em>x</em><sub>1</sub> is the value of 1 in the low digit of the significand of <code>x</code>.</p>\n\n<p>In a binary floating-point format with <em>p</em> digits in its significand, the position value of the low digit is 2<sup>1\u2212<em>p</em></sup> times the position value of the high digit. For example, if <em>x</em> is 2<sup><em>e</em></sup>, the highest bit in its significand represents 2<sup><em>e</em></sup>, and the lowest bit represents 2<sup><em>e</em>+1\u2212<em>p</em></sup>.</p>\n\n<p>The question asks, given a <em>y</em>, what is the least <em>x</em> for which <code>x+y</code> does not produce a result greater than <em>x</em>? It is the least <em>x</em> for which <em>y</em> does not exceed half the value of the low digit of the significand of <code>x</code>.</p>\n\n<p>Let 2<sup><em>e</em></sup> be the position value of the high bit of the significand of <em>x</em>. Then <em>y</em> \u2264 \u00bd\u20222<sup><em>e</em>+1\u2212<em>p</em></sup> = 2<sup><em>e</em>\u2212<em>p</em></sup>, so <em>y</em>\u20222<sup><em>p</em></sup> \u2264 2<sup><em>e</em></sup>.</p>\n\n<p>Therefore, given some positive <em>y</em>, the least <em>x</em> for which <code>x+y</code> does not produce a result greater than <em>x</em> has its leading bit, 2<sup><em>e</em></sup>, equal to or exceeding <em>y</em>\u20222<sup><em>p</em></sup>. And in fact it must be exactly 2<sup><em>e</em></sup> because all other floating-point numbers whose leading bit has position value 2<sup><em>e</em></sup> have other bits set in their significands, so they are greater. 2<sup><em>e</em></sup> is the least number for which the leading bit represents 2<sup><em>e</em></sup>.</p>\n\n<p>Therefore, <em>x</em> is the least power of two that equals or exceeds <em>y</em>\u20222<sup><em>p</em></sup>.</p>\n\n<p>In C++, <code>std::numeric_limits&lt;Float&gt;::epsilon()</code> (from the <code>&lt;limits&gt;</code> header) is the step from 1 to the next representable value, meaning it is 2<sup>1\u2212<em>p</em></sup>. So <em>y</em>\u20222<sup><em>p</em></sup> equals <code>y*2/std::numeric_limits&lt;Float&gt;::epsilon()</code>. (This operation is exact unless it overflows to \u221e.)</p>\n\n<p>Let\u2019s assign this to a variable:</p>\n\n<pre><code>Float Y = y*2/std::numeric_limits&lt;Float&gt;::epsilon();\n</code></pre>\n\n<p>We can find the position value represented by the highest bit of <em>Y</em>\u2019s significand by using <code>frexp</code> (from the <code>&lt;cmath&gt;</code> header) to extract the exponent from the floating-point representation of <code>Y</code> and <code>ldexp</code> (also <code>&lt;cmath&gt;</code>) to apply that exponent to a new significand (<code>.5</code> because of the scale that <code>frexp</code> and <code>ldexp</code> use):</p>\n\n<pre><code>int e;\nstd::frexp(Y, &amp;e);\nFloat X = std::ldexp(.5, e);\n</code></pre>\n\n<p>Then <em>X</em> is a power of two, and it is less than or equal to <em>Y</em>. It is in fact the greatest power of two not greater than <em>Y</em>, since the next greater power of 2, 2<i>X</i>, is greater than <em>Y</em>. However, we want the least power of two not less than <em>Y</em>. We can find this with:</p>\n\n<pre><code>if (X &lt; Y) X *= 2;\n</code></pre>\n\n<p>The resulting <em>X</em> is the number sought by the question.</p>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 3071306, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yUF9v.jpg?s=128&g=1", "display_name": "CplClegg", "link": "https://stackoverflow.com/users/3071306/cplclegg"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1541620444, "post_id": 53195995, "comment_id": 93282164, "body": "Wrote this before Eric&#39;s answer was posted. I&#39;ve selected his as its a more thorough answer that I think gets to the root of the question."}], "tags": [], "owner": {"reputation": 113, "user_id": 3071306, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yUF9v.jpg?s=128&g=1", "display_name": "CplClegg", "link": "https://stackoverflow.com/users/3071306/cplclegg"}, "is_accepted": false, "score": 0, "last_activity_date": 1541616919, "creation_date": 1541616919, "answer_id": 53195995, "question_id": 53193304, "link": "https://stackoverflow.com/questions/53193304/finding-the-maximum-of-a-floating-point-counter/53195995#53195995", "title": "Finding the maximum of a floating point counter", "body": "<p><a href=\"https://stackoverflow.com/a/53193425/3071306\">Marek's Answer</a> is pretty close, and a decent way to find it using a program (that is more efficient than the one I originally posted). However, I don't necessarily need the answer in a program form, just a mathematical one.</p>\n\n<p>From what I can tell, the answer comes down to the exponent of the delta used, and the number of mantissa bits. We need to round to the nearest power of 2, which is kind of complicated. Basically if the mantissa is 0, we do nothing, otherwise we add 1 to the exponent. So, assuming we now have the delta as a power of 2, represented as <code>1.0 x 2<sup>exp</sup></code>, and a mantissa of N bits, the maximum value is <code>1.0 x 2<sup>(N + exp)</sup></code>. Note that <code>FLT_EPSILON</code> in C is equal to <code>1.0 x 2<sup>-N</sup></code>. So we can also find this by dividing our nearest power of 2 by <code>FLT_EPSILON</code>.</p>\n\n<p>For a delta of 0.1, the nearest power of 2 is 0.125, or <code>1.0 x 2<sup>-3</sup></code>. Therefore we want <code>1.0 x 2<sup>(23 + (-3))</sup></code> or <code>1.0 x 2<sup>21</sup></code> which is equal to <code>2097152</code>.</p>\n"}], "owner": {"reputation": 113, "user_id": 3071306, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yUF9v.jpg?s=128&g=1", "display_name": "CplClegg", "link": "https://stackoverflow.com/users/3071306/cplclegg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 1, "accepted_answer_id": 53195657, "answer_count": 3, "score": 8, "last_activity_date": 1541671454, "creation_date": 1541606762, "last_edit_date": 1541607053, "question_id": 53193304, "link": "https://stackoverflow.com/questions/53193304/finding-the-maximum-of-a-floating-point-counter", "title": "Finding the maximum of a floating point counter", "body": "<p>My apologies if this has been asked before, but I cannot find it.</p>\n\n<p>I was wondering if there is a way to calculate the point at which a single precision floating point number that is used as a counter will reach a 'maximum' (the point at which it is no longer able to add another value due to loss of precision).</p>\n\n<p>For example, if I continuously add <code>0.1f</code> to a <code>float</code> I will eventually reach a point where the value does not change:</p>\n\n<pre><code>const float INCREMENT = 0.1f;\nfloat value = INCREMENT;\nfloat prevVal = 0.0f;\n\ndo {\n  prevVal = value;\n  value += INCREMENT;\n} while (value != prevVal);\n\ncout &lt;&lt; value &lt;&lt; endl;\n</code></pre>\n\n<p>On GCC this outputs <code>2.09715e+06</code></p>\n\n<p>Is there a way to compute this mathematically for different values of <code>INCREMENT</code>? I believe it should in theory be when the exponent portion of the <code>float</code> requires a shift beyond 23 bits, resulting in losing the mantissa and simply adding 0.</p>\n"}, {"tags": ["c++", "qt", "centering", "qsplashscreen"], "answers": [{"tags": [], "owner": {"reputation": 532, "user_id": 1136512, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9daefbec8cdaf952907fa33f6492eb76?s=128&d=identicon&r=PG", "display_name": "bur", "link": "https://stackoverflow.com/users/1136512/bur"}, "is_accepted": true, "score": 3, "last_activity_date": 1541606989, "creation_date": 1541606989, "answer_id": 53193376, "question_id": 53193027, "link": "https://stackoverflow.com/questions/53193027/why-is-qsplashscreen-not-centered-when-shown/53193376#53193376", "title": "Why is QSplashScreen not centered when shown?", "body": "<p>I may have been a bit too quick to post this as a question.</p>\n\n<p>After some testing I figured out that apparently a <code>QSplashScreen</code> doesn't center when it has an empty <code>QPixmap</code>.</p>\n"}], "owner": {"reputation": 532, "user_id": 1136512, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9daefbec8cdaf952907fa33f6492eb76?s=128&d=identicon&r=PG", "display_name": "bur", "link": "https://stackoverflow.com/users/1136512/bur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "accepted_answer_id": 53193376, "answer_count": 1, "score": 1, "last_activity_date": 1541606989, "creation_date": 1541605978, "question_id": 53193027, "link": "https://stackoverflow.com/questions/53193027/why-is-qsplashscreen-not-centered-when-shown", "title": "Why is QSplashScreen not centered when shown?", "body": "<p>I create a <code>QSplashScreen</code> in the constructor of a <code>QMainWindow</code>:</p>\n\n<pre><code>MainApp::MainApp() : QMainWindow(),\n    splashScreen(new QSplashScreen)\n{\n    splashScreen-&gt;setFixedSize(350, 120);\n    //splashScreen-&gt;move(splashScreen-&gt;x()-175, splashScreen-&gt;y()-60); //inits with upperleft corner at screen center\n    splashScreen-&gt;setWindowOpacity(0.85);\n    splashScreen-&gt;setAttribute(Qt::WA_StyledBackground);\n    splashScreen-&gt;setStyleSheet(\"QSplashScreen { background-color: #000;\"\n                                                \"background-image: url('\"+pathLogo+\"');\"\n                                                \"background-repeat: no-repeat;\"\n                                                \"background-position: center;\"\n                                                \"border: 2px solid #fac805; }\");\n\n        QLabel *vrsLbl = new QLabel(splashScreen);\n        vrsLbl-&gt;resize(350, 13);\n        vrsLbl-&gt;move(0, 80);\n        vrsLbl-&gt;setPixmap(pxVersion);\n        vrsLbl-&gt;setAlignment(Qt::AlignHCenter);\n\n    splashScreen-&gt;show();\n}\n</code></pre>\n\n<p>The splashscreen is shown with its upperleft corner at the center of the screen. The easy workaround is to move it (since its size is known), as commented out above.</p>\n\n<p>According to <a href=\"https://doc.qt.io/qt-5/qsplashscreen.html#details\" rel=\"nofollow noreferrer\">the docs</a>:</p>\n\n<blockquote>\n  <p>The splash screen appears in the center of the screen.</p>\n</blockquote>\n\n<p>So what's going wrong here?</p>\n"}, {"tags": ["c++", "string", "null-character"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1541605739, "post_id": 53192898, "comment_id": 93274822, "body": "Did you debug it to see if your loop was really finding the character?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1541605759, "post_id": 53192898, "comment_id": 93274829, "body": "BTW, you should actually search for the characters themselves, not strings."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1541606718, "post_id": 53192898, "comment_id": 93275380, "body": "@MatthieuBrucher Why search for the characters?  That limits the function.  If I want to reaplce all occurances of <code>&quot;:)&quot;</code> from <code>&quot;:) :) :) :::too many smiles::: :) :) :)&quot;</code> that would be a real pain if I couldn&#39;t specify <code>&quot;:)&quot;</code> as the thing to replace."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 5, "last_activity_date": 1541606026, "last_edit_date": 1541606026, "creation_date": 1541605880, "answer_id": 53192992, "question_id": 53192898, "link": "https://stackoverflow.com/questions/53192898/remove-null-character-embedded-in-string/53192992#53192992", "title": "Remove null character embedded in string", "body": "<p>The reason why it doesn't work in your case is that <code>std::string</code> constructor from <code>const char*</code> without size is going to read all elements up to, but not including nul-terminating char. As a result, </p>\n\n<pre><code> replaceAll(stringWithNull, \"\\0\", \"\");\n</code></pre>\n\n<p>Calls <code>replaceAll</code> with <code>from</code> set to empty string (<code>replaceAll( string in, string from, string to )</code>), which returns <code>in</code> unmodified.</p>\n\n<p>To solve the problem, use a constructor which takes size, or initialize with  list initialization, the same way you do it for your original string, for example:</p>\n\n<pre><code>replaceAll(stringWithNull, {'\\0'}, \"\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 1, "last_activity_date": 1541606114, "creation_date": 1541606114, "answer_id": 53193076, "question_id": 53192898, "link": "https://stackoverflow.com/questions/53192898/remove-null-character-embedded-in-string/53193076#53193076", "title": "Remove null character embedded in string", "body": "<p>When you do</p>\n\n<pre><code>replaceAll(stringWithNull, \"\\0\", \"\");\n</code></pre>\n\n<p><code>\"\\0\"</code> is the same as <code>\"\"</code> since <code>std::string</code>'s constructor stops at the null character when being constructed from a c-string.  That means you are searching for nothing and replacing it with nothing.  What you need is</p>\n\n<pre><code>string replaced = replaceAll(stringWithNull, {'\\0'}, \"\");\n</code></pre>\n\n<p>to actually get <code>from</code> populated with a null character.</p>\n"}], "owner": {"reputation": 2836, "user_id": 747145, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9ccb901b2ba0f661c581a419722dba04?s=128&d=identicon&r=PG", "display_name": "LeviX", "link": "https://stackoverflow.com/users/747145/levix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1587, "favorite_count": 0, "accepted_answer_id": 53192992, "answer_count": 2, "score": 0, "last_activity_date": 1541606300, "creation_date": 1541605571, "last_edit_date": 1541606300, "question_id": 53192898, "link": "https://stackoverflow.com/questions/53192898/remove-null-character-embedded-in-string", "title": "Remove null character embedded in string", "body": "<p>I have a c++ <code>string</code> with embedded <code>'\\0'</code> characters. </p>\n\n<p>I have a function <code>replaceAll()</code> which <em>should</em> replace all occurrences of a pattern with another pattern. For \"normal\" strings it works fine. However, when I try to find the <code>'\\0'</code> character my function does not work and I don't know why. <code>replaceAll</code> seems to be failing on <code>string::find()</code> which doesn't make sense to me. </p>\n\n<pre><code>// Replaces all occurrences of the text 'from' to the text 'to' in the specified input string.\n// replaceAll(\"Foo123Foo\", \"Foo\", \"Bar\"); // Bar123Bar\nstring replaceAll( string in, string from, string to )\n{\n    string tmp = in;\n\n    if ( from.empty())\n    {\n    return in;\n    }\n\n    size_t start_pos = 0;\n\n    // tmp.find() fails to match on \"\\0\"\n    while (( start_pos = tmp.find( from, start_pos )) != std::string::npos )\n    {\n    tmp.replace( start_pos, from.length(), to );\n        start_pos += to.length(); // In case 'to' contains 'from', like replacing 'x' with 'yx'\n    }\n\n    return tmp;\n}\n\nint main(int argc, char* argv[])\n{\n    string stringWithNull = { '\\0', '1', '\\0', '2' };\n    printf(\"size=[%d] data=[%s]\\n\", stringWithNull.size(), stringWithNull.c_str());\n\n    // This doesn't work in the special case of a null character and I don't know why\n    string replaced = replaceAll(stringWithNull, \"\\0\", \"\");\n    printf(\"size=[%d] data=[%s]\\n\", replaced.size(), replaced.c_str());\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>size=[4] data=[]\nsize=[4] data=[]\n</code></pre>\n"}, {"tags": ["c++", "class", "inheritance", "implicit-conversion"], "comments": [{"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 3, "creation_date": 1541605467, "post_id": 53192854, "comment_id": 93274647, "body": "Please edit for a better question title."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 6, "creation_date": 1541605574, "post_id": 53192854, "comment_id": 93274712, "body": "Perhaps you can make the <code>bool</code> operator <code>explicit</code>."}, {"owner": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "reply_to_user": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1541605746, "post_id": 53192854, "comment_id": 93274826, "body": "@ArnavBorborah Sorry for the typo"}, {"owner": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1541605811, "post_id": 53192854, "comment_id": 93274858, "body": "@0x499602D2 Thought about that, but I actually need it be implicit in conditional statements"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 4, "creation_date": 1541605901, "post_id": 53192854, "comment_id": 93274917, "body": "Having implicit casts to several classes like that sounds like a code smell to me. Precisely because it invites such ambiguities."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1541606356, "post_id": 53192854, "comment_id": 93275174, "body": "Much of this depends on how you want to use this, which isn&#39;t clear to me yet."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1541606623, "post_id": 53192854, "comment_id": 93275322, "body": "We&#39;d need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to help you."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1541606808, "post_id": 53192854, "comment_id": 93275428, "body": "Making it private probably won&#39;t help. Overload resolution is done <b>before</b> access control. Make your base class a member instead, and implement the interface you need."}, {"owner": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1541607021, "post_id": 53192854, "comment_id": 93275560, "body": "@0x499602D2 Actually, making the <code>bool</code> cast explicit seems to work. I was under the impression that conditional statements e.g. <code>if (B==other) { &#47;* *&#47; }</code> used implicit conversions, but that is not the case."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1541609558, "post_id": 53192854, "comment_id": 93276986, "body": "Is <code>private: using A::whatever;</code> (that was public in <code>A</code>) in <code>B</code> what you are after?"}], "owner": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1541607348, "creation_date": 1541605433, "last_edit_date": 1541607348, "question_id": 53192854, "link": "https://stackoverflow.com/questions/53192854/is-it-possible-to-declare-an-inherited-class-member-as-private", "title": "Is it possible to declare an inherited class member as private?", "body": "<p>I'm dealing with an ambiguity problem when overloading the bracket operator with <code>operator[](int)</code>  and <code>operator[](std::vector&lt;int&gt;)</code>, and using an instance of a class <code>B::public A()</code> that has both <code>bool</code> and <code>std::vector&lt;int&gt;</code> cast operators defined (the issue lies in the boolean cast that can be implicitely converted to int and thus creates ambiguity). </p>\n\n<p>Since the bool cast operator is inherited from <code>A()</code>, is there a way to define it as private within the definition of <code>B()</code>?</p>\n\n<p>CONTEXT: </p>\n\n<p>I'm overloading a storage container class (a simple wrapper around <code>std::vector</code>) and <code>B</code> is a \"comparer\" class that compares containers value-by-value, and can be cast to a simple <code>bool</code> value for bulk comparison, or <code>std::vector&lt;int&gt;</code> with index positions for <code>true</code> values. This allows me to both perform simple bulk comparisons e.g. <code>if(mat1=mat2) {}</code>as well as apply index masks to my containers e.g. <code>mat1[mat1==14] = // ...</code>. </p>\n"}, {"tags": ["c++", "templates", "iterator", "operator-overloading"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 3, "creation_date": 1541605325, "post_id": 53192792, "comment_id": 93274565, "body": "&quot;It works for non-pointer types, but fails for pointer types.&quot; Please show example code for each case. Are you getting any errors? If so what are they?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1541605408, "post_id": 53192792, "comment_id": 93274617, "body": "What do you mean, fails for pointer types? Fails how? If you have a list of, say, <code>MyClass*</code>, it&#39;s quite proper for <code>operator-&gt;</code> to return an <code>MyClass**</code> - a pointer to an element of type <code>MyClass*</code>."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1541605473, "post_id": 53192792, "comment_id": 93274652, "body": "I think what you want is <code>FNode&lt;Data&gt;* operator-&gt;() { return Element; }</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541605603, "post_id": 53192792, "comment_id": 93274729, "body": "<code>DataType* operator -&gt;()     {         return &amp;Element-&gt;Data;     }</code> should be what you want.  Can you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> where it isn&#39;t doinf what you want?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1541607201, "post_id": 53192792, "comment_id": 93275666, "body": "You can reduce your problem with <code>std::list</code>/<code>std::vector</code>: <code>std::vector&lt;T&gt;::iterator it = &#47;*..*&#47;; it-&gt;foo(); (*it).foo();</code> and <code>std::vector&lt;T*&gt;::iterator it = &#47;*..*&#47;; &#47;* error: it-&gt;foo(); *&#47; (*it)-&gt;foo();</code>."}], "answers": [{"tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1541609733, "last_edit_date": 1541609733, "creation_date": 1541609035, "answer_id": 53194015, "question_id": 53192792, "link": "https://stackoverflow.com/questions/53192792/overloading-operator-for-pointer-and-non-pointer-types/53194015#53194015", "title": "Overloading -&gt; operator for pointer and non-pointer types", "body": "<p>Exibit A:</p>\n\n<pre><code>template &lt;class T&gt; T foo() { ... }\n</code></pre>\n\n<p><code>foo&lt;Object*&gt;()-&gt;Update()</code> typechecks, and <code>foo&lt;Object&gt;()-&gt;Update()</code> doesn't, because <code>foo&lt;Object&gt;()</code> is not a pointer to a class type object \u2014 it <em>is</em> a class type object.</p>\n\n<p>Exhibit B:</p>\n\n<pre><code>template &lt;class T&gt; T* foo() { ... }\n</code></pre>\n\n<p>Now <code>foo&lt;Object&gt;()-&gt;Update()</code> typechecks, and <code>foo&lt;Object*&gt;()-&gt;Update()</code> doesn't, because \n<code>foo&lt;Object*&gt;()</code> is not a pointer to a class type object again \u2014 it's a pointer to a <em>pointer</em>.</p>\n\n<p>You have the exact same issue with your <code>operator-&gt;()</code>. </p>\n\n<p>Which version to use? </p>\n\n<p>If you complement the second version (returning a pointer) with <code>operator*()</code>, you can use <code>objectsIt-&gt;Update()</code> or <code>(*objectsIt)-&gt;Update()</code>, depending on whether you have a pointer or not. Hmm, that looks familiar. Doesn't <code>objectsIt</code> have a syntax resembling that of a regular pointer? Well, this is exactly what an iterator should do!</p>\n"}], "owner": {"reputation": 153, "user_id": 7402183, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1f450f6c0d7a3d0c0f6af26e848428c6?s=128&d=identicon&r=PG", "display_name": "AAS.N", "link": "https://stackoverflow.com/users/7402183/aas-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 53194015, "answer_count": 1, "score": 0, "last_activity_date": 1541609733, "creation_date": 1541605250, "last_edit_date": 1541606633, "question_id": 53192792, "link": "https://stackoverflow.com/questions/53192792/overloading-operator-for-pointer-and-non-pointer-types", "title": "Overloading -&gt; operator for pointer and non-pointer types", "body": "<p>For the sake of practice, I decided to implement a list container, with an associated Iterator object. I havn't implemented iterators before, but I used the pattern frequently. The iterator object looks as follows:</p>\n\n<pre><code>template &lt;typename DataType&gt;\nstruct FNode\n{\n    DataType Data;\n    FNode* Next;\n    FNode* Prev;\n\n    FNode(DataType _data, FNode* _next, FNode* _prev)\n        : Data(_data)\n        , Next(_next)\n        , Prev(_prev)\n    {\n    }\n\n};\n\ntemplate &lt;typename DataType&gt;\nstruct TListIterator\n{\n    TListIterator(FNode&lt;DataType&gt;* _Element)\n        : Element(_Element)\n    {\n    }\n\n    FNode&lt;DataType&gt;* Element;\n\n    // Some operators overload ....\n    // ....\n\n    DataType operator -&gt;()\n    {\n        return Element-&gt;Data;\n    }\n</code></pre>\n\n<p>So in essence, I want an iterator to retain a pointer of a node in my list/container. My issue arises when accessing data via the iterator. I want to be able to simply use the arrow operator to directly access the DataType variable contained in the node.</p>\n\n<p>The implementation above works fine if my template argument is a pointer. However, if I decide to use a list that stores a non-pointer data type, the arrow operator fails because I am no longer returning a pointer type. Needless to say, if I change the operator overload to return a pointer like this:</p>\n\n<pre><code>    DataType* operator -&gt;()\n    {\n        return &amp;Element-&gt;Data;\n    }\n</code></pre>\n\n<p>It works for non-pointer types, but fails for pointer types.</p>\n\n<blockquote>\n  <p>What key idea am I misunderstanding here - should my iterator object\n  not deal with node pointers? Or is there a way to overload another\n  operator to handle both pointer and non-pointer types conveniently?</p>\n</blockquote>\n\n<p>I also notice I encounter similar problems generally when writing template code. Most of the time, I would want to process the data differently depending on whether its a pointer or not.</p>\n\n<p><strong>EDIT</strong>\nHere are some examples</p>\n\n<p>Given a struct:</p>\n\n<pre><code>struct FScanHit\n{\n    unsigned long TimeStamp;\n    uint16_t Distance;\n    uint8_t  Angle;\n};\n</code></pre>\n\n<p>Given a class:</p>\n\n<pre><code>class Object\n{\n    public:\n    void Update();\n}\n</code></pre>\n\n<p>Attempting to manage a list of FScanHit and a list of Object* :</p>\n\n<pre><code>TList&lt;FScanHit&gt; scans;\nTList&lt;Object*&gt; objects;\n\n// Add elements to either lists\n// ....\n\n// Access the actual data\nTListIterator&lt;FScanHit&gt; scanIt = scans.Begin();    // Begin uses the TListIterator constructor shown above to create an iterator whose element is the head node of the list\nTListIterator&lt;Object*&gt; objectsIt = objects.Begin();\n\nobjectsIt-&gt;Update();  // Works, because -&gt;() returns a pointer type Object*\nuint8_t dist = scanIt-&gt;Distance;  // Error: result of 'operator-&gt;()' yields non-pointer result\n</code></pre>\n"}, {"tags": ["c++", "graphics", "3d"], "answers": [{"comments": [{"owner": {"reputation": 2026, "user_id": 1909456, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1f254bd884cc7ea6217bfd1eaccb9f75?s=128&d=identicon&r=PG", "display_name": "dgrat", "link": "https://stackoverflow.com/users/1909456/dgrat"}, "edited": false, "score": 0, "creation_date": 1541606592, "post_id": 53192858, "comment_id": 93275300, "body": "&quot;The direction chosen to project the point is the one perpendicular the plane simply because that&#39;s how the projection is defined.&quot; Isn&#39;t this direction of the plane&#39;s normal? Then this would equal an intersection if inserting point and plane normal."}, {"owner": {"reputation": 812, "user_id": 10492002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bTAmh.png?s=128&g=1", "display_name": "Cyber", "link": "https://stackoverflow.com/users/10492002/cyber"}, "reply_to_user": {"reputation": 2026, "user_id": 1909456, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1f254bd884cc7ea6217bfd1eaccb9f75?s=128&d=identicon&r=PG", "display_name": "dgrat", "link": "https://stackoverflow.com/users/1909456/dgrat"}, "edited": false, "score": 0, "creation_date": 1541606723, "post_id": 53192858, "comment_id": 93275383, "body": "@dgrat yes that is equivalent to intersecting the plane with a ray that is perpendicular to the plane and passes through the point. That&#39;s the special case I described at the end."}], "tags": [], "owner": {"reputation": 812, "user_id": 10492002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bTAmh.png?s=128&g=1", "display_name": "Cyber", "link": "https://stackoverflow.com/users/10492002/cyber"}, "is_accepted": true, "score": 1, "last_activity_date": 1541605442, "creation_date": 1541605442, "answer_id": 53192858, "question_id": 53192658, "link": "https://stackoverflow.com/questions/53192658/difference-of-plane-ray-intersection-with-point-plane-projection/53192858#53192858", "title": "Difference of plane/ray intersection with point/plane projection", "body": "<p>A ray is an infinite line, so it has a direction. Intersecting a ray with a plane means finding where the line passes through the plane.</p>\n\n<p>A point is a dimensionless dot suspended somewhere in space. Projecting a point onto a plane means shooting a ray that passes through the point and is perpendicular to the plane (called the \"normal\"), and seeing where it lands.</p>\n\n<p>The ray already has a direction, the point doesn't. The direction chosen to project the point is the one perpendicular the plane simply because that's how the projection is defined.</p>\n\n<p>So you can have a special case where the ray's direction and the plane's normal coincide, in which case intersecting the ray with the plane and projecting a point that happens to lie somewhere on the ray lead to the same result, but that's just a special case.</p>\n"}, {"tags": [], "owner": {"reputation": 100, "user_id": 4328542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i4Y01.png?s=128&g=1", "display_name": "geriwald", "link": "https://stackoverflow.com/users/4328542/geriwald"}, "is_accepted": false, "score": 0, "last_activity_date": 1611249105, "creation_date": 1611249105, "answer_id": 65832417, "question_id": 53192658, "link": "https://stackoverflow.com/questions/53192658/difference-of-plane-ray-intersection-with-point-plane-projection/65832417#65832417", "title": "Difference of plane/ray intersection with point/plane projection", "body": "<p>For those interested, here's a c# version of the intersection function above.</p>\n<p>Thanks @dgrat you made my day.</p>\n<pre><code>    /// &lt;summary&gt;Calculates the intersection of a ray with a plane&lt;/summary&gt;\n    /// &lt;param name=&quot;rayOrigin&quot;&gt;Any point of the ray&lt;/param&gt;\n    /// &lt;param name=&quot;rayDirection&quot;&gt;The direction of the ray&lt;/param&gt;\n    /// &lt;param name=&quot;planeOrigin&quot;&gt;Any point of the plane&lt;/param&gt;\n    /// &lt;param name=&quot;planeNormal&quot;&gt;The normal of the plane&lt;/param&gt;\n    /// &lt;returns&gt;The intersection&lt;/returns&gt;\n    private Point3D Intersection(Point3D rayOrigin, Vector3D rayDirection, Point3D planeOrigin, Vector3D planeNormal)\n    {\n        var length = Vector3D.DotProduct(planeNormal, rayOrigin - planeOrigin) / Vector3D.DotProduct(planeNormal, -rayDirection);\n        return rayOrigin + length * rayDirection;\n    }\n</code></pre>\n"}], "owner": {"reputation": 2026, "user_id": 1909456, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1f254bd884cc7ea6217bfd1eaccb9f75?s=128&d=identicon&r=PG", "display_name": "dgrat", "link": "https://stackoverflow.com/users/1909456/dgrat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 0, "accepted_answer_id": 53192858, "answer_count": 2, "score": 0, "last_activity_date": 1611249105, "creation_date": 1541604798, "last_edit_date": 1541605651, "question_id": 53192658, "link": "https://stackoverflow.com/questions/53192658/difference-of-plane-ray-intersection-with-point-plane-projection", "title": "Difference of plane/ray intersection with point/plane projection", "body": "<p>I found a solution for the ray plane intersection code in Wikipedia, which works and where I simply solve a linear equation system. </p>\n\n<p>Later I found some code for a point onto plane projection, which is obviously implemented differently and also yields different solutions under certain conditions. </p>\n\n<p>However, I do not really get what is the difference between a projection of a point along a vector and the intersection of a ray (build by the point and vector). In both cases I would expect just to find the point where the ray intersects the plane?!  </p>\n\n<p>Is there anywhere a figure to illustrate the difference?</p>\n\n<pre><code>struct Plane {\n  glm::vec3 _normal;\n  glm::vec3 _point;\n};\n\nglm::vec3 intersection(const Plane &amp;p, const glm::vec3 &amp;point, const glm::vec3 &amp;direction) {\n  // See: https://en.wikipedia.org/wiki/Line%E2%80%93plane_intersection\n  const float t = glm::dot(p._normal, point - p._point) / glm::dot(p._normal, -direction);\n  return point + t * direction;\n}\n\nglm::vec3 orthogonalProjection(const Plane &amp;p, const glm::vec3 &amp;point, const glm::vec3 &amp;direction) {\n  // from https://stackoverflow.com/questions/9605556/how-to-project-a-point-onto-a-plane-in-3d\n  const float t = -(glm::dot(point, direction) - glm::dot(p.getOrigin(), p.getNormal()));\n  return point+ t * direction;\n}\n</code></pre>\n"}, {"tags": ["c++", "bitcoin"], "owner": {"reputation": 31, "user_id": 10619087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bf3453405c45801e935b4211a30e094?s=128&d=identicon&r=PG&f=1", "display_name": "alab", "link": "https://stackoverflow.com/users/10619087/alab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 262, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1541603909, "creation_date": 1541603909, "question_id": 53192383, "link": "https://stackoverflow.com/questions/53192383/how-to-correct-sign-bitcoin-cash-inputs-with-libbitcoin", "title": "How to correct sign bitcoin cash inputs with libbitcoin?", "body": "<p>I try to use libbitcoin for create bitcoin CASH transaction\nI used this example - <a href=\"https://github.com/libbitcoin/libbitcoin/wiki/Building-Transactions\" rel=\"nofollow noreferrer\">https://github.com/libbitcoin/libbitcoin/wiki/Building-Transactions</a> with my BITCOIN prv/pub/inputs/outputs/etc It's work correctly.\nFor bitcoin CASH i use my prv/pub/inputs/outputs/etc and set sighash_algorithm \"all | 0x40\". As described in bitcoin cash manuals, we need use SIGHASH_FORKID = 0x40(bit 6 set) to sign transaction.\n\"Electron cash\" also use this sighash_algorithm. I look on differents with <a href=\"https://github.com/Electron-Cash/Electron-Cash/blob/master/lib/transaction.py\" rel=\"nofollow noreferrer\">https://github.com/Electron-Cash/Electron-Cash/blob/master/lib/transaction.py</a> <a href=\"https://github.com/spesmilo/electrum/blob/master/electrum/transaction.py\" rel=\"nofollow noreferrer\">https://github.com/spesmilo/electrum/blob/master/electrum/transaction.py</a> and see it</p>\n\n<p>electron cash:</p>\n\n<p>def nHashType(cls):\n'''Hash type in hex.'''\nreturn 0x01 | (cls.SIGHASH_FORKID + (cls.FORKID &lt;&lt; 8))</p>\n\n<p>electron cash:</p>\n\n<p>def serialize_preimage(self, i):\nnVersion = int_to_hex(self.version, 4)\nnHashType = int_to_hex(<strong>self.nHashType()</strong>, 4)</p>\n\n<p>electrum-btc:</p>\n\n<p>def serialize_preimage(self, i):\nnVersion = int_to_hex(self.version, 4)\nnHashType = int_to_hex(<strong>1</strong>, 4)</p>\n\n<p>.....\nso,if use sighash_algorithm \"0x01\" with bitcoin CASH transaction, i got answer from electrum node:</p>\n\n<pre><code>the transaction was rejected by network rules.\\n\\n16: mandatory-script-verify-flag-failed (Signature must use SIGHASH_FORKID)\n</code></pre>\n\n<p>OK,after this answer i use 0x40 | 0x01 and got this answer</p>\n\n<pre><code>the transaction was rejected by network rules.\\n\\n16: mandatory-script-verify-flag-failed (Signature must be zero for failed CHECK(MULTI)SIG operation)\n</code></pre>\n\n<p>I make similar rawtx in electron cash.My rawtx and rawtx from electron cash are different. electron cash rawtx - correct.</p>\n\n<p>How to correct sign bitcoin CASH inputs with libbitcoin?\nsry for my english, but i hope you understand this</p>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1541603587, "post_id": 53192276, "comment_id": 93273420, "body": "<code>type()</code> is a run time value where as template arguments must be compile time constants."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1541603778, "post_id": 53192276, "comment_id": 93273545, "body": "Classic problem, you need to create a function and check the type, and for each of the relevant types, you call std::any_cast."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1541603929, "post_id": 53192276, "comment_id": 93273639, "body": "I would say <code>std::any</code> is wrong for whatever task you are trying to accomplish."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 7, "creation_date": 1541603933, "post_id": 53192276, "comment_id": 93273642, "body": "@MatthieuBrucher: If you had such a type list, why are you using <code>std::any</code> instead of <code>std::variant&lt;...&gt;</code> ?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1541603948, "post_id": 53192276, "comment_id": 93273657, "body": "That&#39;s true indeed."}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 0, "creation_date": 1541604547, "post_id": 53192276, "comment_id": 93274075, "body": "Have you tried std::static_cast&lt;void*&gt;(type) ?  obvious assign to void *"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1541612088, "post_id": 53192276, "comment_id": 93278293, "body": "You may want to consider the boost.type_erasure library. It&#39;s made for exactly this purpose. <a href=\"https://www.boost.org/doc/libs/1_68_0/doc/html/boost_typeerasure/basic.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_68_0/doc/html/boost_typeerasure/basic.h&zwnj;&#8203;tml</a>"}], "answers": [{"comments": [{"owner": {"reputation": 301, "user_id": 10246054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/914bc0d54e95cced8c1527cfdc867802?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.DeleteMyMessages", "link": "https://stackoverflow.com/users/10246054/mr-deletemymessages"}, "edited": false, "score": 0, "creation_date": 1541606612, "post_id": 53192514, "comment_id": 93275313, "body": "What kind of stuff do I need to include? Getting type_index and other kind of errors."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 301, "user_id": 10246054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/914bc0d54e95cced8c1527cfdc867802?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.DeleteMyMessages", "link": "https://stackoverflow.com/users/10246054/mr-deletemymessages"}, "edited": false, "score": 0, "creation_date": 1541613727, "post_id": 53192514, "comment_id": 93279061, "body": "@Mr.DeleteMyMessages Google &quot;std type index&quot;.  Get cppreference page.  Click on it.  Observe at top it states which header it is defined in."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 301, "user_id": 10246054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/914bc0d54e95cced8c1527cfdc867802?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.DeleteMyMessages", "link": "https://stackoverflow.com/users/10246054/mr-deletemymessages"}, "edited": false, "score": 0, "creation_date": 1541613899, "post_id": 53192514, "comment_id": 93279145, "body": "@Mr.DeleteMyMessages Also, I fixed two typos, and linked a live example of <code>streamable_any</code> running."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 7, "last_activity_date": 1541613877, "last_edit_date": 1541613877, "creation_date": 1541604321, "answer_id": 53192514, "question_id": 53192276, "link": "https://stackoverflow.com/questions/53192276/stream-stdany-without-knowing-the-type/53192514#53192514", "title": "Stream std::any without knowing the type", "body": "<p>You need to store how to stream it somewhere.</p>\n\n<p>There are a few different approaches.  If you can centrally enumerate or register all of the types you can stream, you can create a map from typeid to streaming code, then use that map to stream your specific <code>std::any</code>.</p>\n\n<pre><code>std::unordered_map&lt; std::type_index, void(*)(std::any const&amp;, std::ostream&amp;)&gt; streamers;\n\ntemplate&lt;class T&gt;\nvoid add_streamer() {\n  streamers[ typeid(T) ] = [](std::any const&amp; a, std::ostream&amp; os ) {\n    os &lt;&lt; std::any_cast&lt;T&gt;(a);\n  };\n}\ntemplate&lt;class...Ts&gt;\nvoid add_streamers() {\n  ( void(add_streamer&lt;T&gt;()), ... );\n}\n</code></pre>\n\n<p>Now you can stream:</p>\n\n<pre><code>void stream( std::ostream&amp; os, std::any const&amp; a ) {\n  streamers[ a.type() ]( a, os ); // maybe check errors!\n}\n</code></pre>\n\n<hr>\n\n<p>An alternative plan is to augment your <code>any</code> instances.</p>\n\n<pre><code>struct streamable_any : std::any {\n  void(*streamer)(std::ostream&amp;, streamable_any const&amp;) = nullptr;\n  friend std::ostream&amp; operator&lt;&lt;( std::ostream&amp; os, streamable_any const&amp; a ) {\n    a.streamer( os, a );\n    return os;\n  }\n  template&lt;class T,\n    std::enable_if_t&lt;!std::is_same&lt;std::decay_t&lt;T&gt;, streamable_any&gt;{}, bool&gt; = true\n  &gt;\n  streamable_any( T&amp;&amp; t ):\n    std::any( std::forward&lt;T&gt;(t) ),\n    streamer([](std::ostream&amp; os, streamable_any const&amp; self ) {\n      os &lt;&lt; std::any_cast&lt;std::decay_t&lt;T&gt;&gt;(self);\n    } )\n  {}\n};\n</code></pre>\n\n<p>now a <code>streamable_any</code> now only stores streamable types and store how to stream it in a function pointer with the instance.</p>\n\n<p>A safer <code>streamable_any</code> would not publicly inherit from <code>std::any</code>, as modifying the <code>std::any</code> through conversion-to-base will break streaming.  It is just a pain due to <code>any_cast</code> and the like.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/4fee084a06e98671\" rel=\"nofollow noreferrer\">Live example</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 2, "last_activity_date": 1541604389, "creation_date": 1541604389, "answer_id": 53192536, "question_id": 53192276, "link": "https://stackoverflow.com/questions/53192276/stream-stdany-without-knowing-the-type/53192536#53192536", "title": "Stream std::any without knowing the type", "body": "<p>It's not <em>directly</em> possible.</p>\n\n<p>However, if you have a <code>T</code>, don't store that directly but store <code>{T, [](T const&amp; t) { using std::to_string; return to_string(t); }}</code>. I.e. store with each <code>T</code> also a lambda that serializes that particular <code>T</code>.</p>\n\n<p>Alternatively, you can keep the <code>std::any</code> as-is, but wrap it in a custom type and store an appropriate <code>[](std::any const&amp; a) { return to_string(std::any_cast&lt;T&gt;(a));}</code> alongside the <code>std::any</code>. E.g. if you insert an <code>int</code>, you also create and store a <code>[](std::any const&amp; a) { return to_string(std::any_cast&lt;int&gt;(a));}</code></p>\n"}], "owner": {"reputation": 301, "user_id": 10246054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/914bc0d54e95cced8c1527cfdc867802?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.DeleteMyMessages", "link": "https://stackoverflow.com/users/10246054/mr-deletemymessages"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 815, "favorite_count": 0, "accepted_answer_id": 53192514, "answer_count": 2, "score": 3, "last_activity_date": 1541613877, "creation_date": 1541603522, "question_id": 53192276, "link": "https://stackoverflow.com/questions/53192276/stream-stdany-without-knowing-the-type", "title": "Stream std::any without knowing the type", "body": "<p>I want to stream <code>std::any</code> without actually knowing the value.</p>\n\n<p>I know there is <code>std::any.type()</code>, but I am not sure how to use it in <code>std::any_cast&lt;type&gt;(thatAny)</code></p>\n\n<p>This is code I tried:</p>\n\n<pre><code>std::cout &lt;&lt; std::any_cast&lt;a.type()&gt;(a) &lt;&lt; std::endl;\n</code></pre>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1541603837, "post_id": 53192257, "comment_id": 93273581, "body": "It doesn&#39;t compile <i>now</i> because <a href=\"https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords\">&quot;Where and why do I have to put the \u201ctemplate\u201d and \u201ctypename\u201d keywords?&quot;</a> It will not compile afterwards because <a href=\"https://stackoverflow.com/questions/25245453/what-is-a-nondeduced-context\">&quot;What is a nondeduced context?&quot;</a>"}], "owner": {"reputation": 3664, "user_id": 1771055, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e72db016ef8a0d3cd83cf132964456c3?s=128&d=identicon&r=PG", "display_name": "rozina", "link": "https://stackoverflow.com/users/1771055/rozina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "closed_date": 1541604006, "answer_count": 0, "score": 2, "last_activity_date": 1541604018, "creation_date": 1541603459, "last_edit_date": 1541603777, "question_id": 53192257, "link": "https://stackoverflow.com/questions/53192257/function-taking-nested-template-class-of-a-template-class-as-parameter", "closed_reason": "Duplicate", "title": "Function taking nested template class of a template class as parameter", "body": "<p>Can someone explain to me why this does not compile and how should I write it correctly?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\ntemplate &lt;typename T&gt;\nstruct Foo\n{\n    template &lt;typename U&gt;\n    struct Bar\n    {\n    };\n};\n\ntemplate &lt;typename T, typename U&gt;\nvoid func(Foo&lt;T&gt;::Bar&lt;U&gt;&amp; lhs)\n{\n    cout &lt;&lt; \"working\" &lt;&lt; endl;\n}\n\nint main()\n{\n    Foo&lt;int&gt;::Bar&lt;char&gt; a;\n    func(a);\n\n    return 0;\n}\n</code></pre>\n\n<p>I get the following compiler error:</p>\n\n<pre><code>main.cpp:23:19: error: variable or field \u2018func\u2019 declared void  \nvoid func(Foo&lt;T&gt;::Bar&lt;U&gt;&amp; lhs)\n</code></pre>\n"}, {"tags": ["c++", "c", "ipc"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1541603589, "post_id": 53192201, "comment_id": 93273422, "body": "I have no experience of using these, but for re-entrancy reasons you&#39;ll need some means of synchronization between the processes. Perhaps that synchronization &quot;thing&quot; (shared mutex?) includes a memory barrier? Having to declare the whole buffer as volatile sounds a bit drastic."}, {"owner": {"reputation": 7429, "user_id": 4811873, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/2ef5bab087ac0b70e03e34b0b0009fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Robinson", "link": "https://stackoverflow.com/users/4811873/mike-robinson"}, "edited": false, "score": 0, "creation_date": 1541603784, "post_id": 53192201, "comment_id": 93273549, "body": "Yeah, I&#39;m not &quot;cozy&quot; with this idea \u2013 not at all.  Timing problems could abound."}, {"owner": {"reputation": 372, "user_id": 7294796, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8dbc344b61f1b38dc4766127cdd1a16e?s=128&d=identicon&r=PG&f=1", "display_name": "HenrikS", "link": "https://stackoverflow.com/users/7294796/henriks"}, "edited": false, "score": 0, "creation_date": 1541603799, "post_id": 53192201, "comment_id": 93273557, "body": "Even for a 1 byte semaphore I need the modified value to be instantly available to the child process. As I said the child process is very limited (runs inside an emulator)."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1541604406, "post_id": 53192201, "comment_id": 93273971, "body": "I suspect that the answer will be quite different for each OS, so perhaps you can restrict it to just one OS? Then later ask several questions if needed."}], "answers": [{"comments": [{"owner": {"reputation": 372, "user_id": 7294796, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8dbc344b61f1b38dc4766127cdd1a16e?s=128&d=identicon&r=PG&f=1", "display_name": "HenrikS", "link": "https://stackoverflow.com/users/7294796/henriks"}, "edited": false, "score": 0, "creation_date": 1541605340, "post_id": 53192704, "comment_id": 93274572, "body": "So if I access shared data via volatile pointers and add memory barriers I&#39;m somewhat on the safe side? Ignoring that semaphores need to be read / written atomically."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 372, "user_id": 7294796, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8dbc344b61f1b38dc4766127cdd1a16e?s=128&d=identicon&r=PG&f=1", "display_name": "HenrikS", "link": "https://stackoverflow.com/users/7294796/henriks"}, "edited": false, "score": 0, "creation_date": 1541633563, "post_id": 53192704, "comment_id": 93287499, "body": "@HenrikS: If you have that level of control, build a proper IPC channel. Hoping that the compiler does exactly what you think it might do is not a solid basis for software engineering."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1541604981, "creation_date": 1541604981, "answer_id": 53192704, "question_id": 53192201, "link": "https://stackoverflow.com/questions/53192201/do-writeprocessmemory-and-similiar-functions-invalidate-the-possibly-cached-data/53192704#53192704", "title": "Do WriteProcessMemory and similiar functions invalidate the possibly cached data?", "body": "<p><code>WriteProcessMemory</code> will happily do exactly what it's told. It writes to memory, and the CPU cache(s) will end up in a logically valid (but unspecified) state afterwards. </p>\n\n<p>However, be aware that the other program is not made aware of those writes. And if it has its own idea of caching, including such mechanisms as caching variable values in registers, then those copies will NOT be updated. There is no way in which the OS can know how each language implements such caching mechanisms, but performance concerns dictate that most serious programming languages have mechanisms like this. </p>\n\n<p>If the written-to program uses C or C++ <code>volatile</code> pointers, this is partially mitigated. The compiler cannot eliminate the reads entirely. However, such reads can be reordered with other instructions as long as those are not <em>observable</em>. That might affect their timing, which gives an effect similar to caching - your <code>WriteProcessMemory</code> might be too late.</p>\n"}], "owner": {"reputation": 372, "user_id": 7294796, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8dbc344b61f1b38dc4766127cdd1a16e?s=128&d=identicon&r=PG&f=1", "display_name": "HenrikS", "link": "https://stackoverflow.com/users/7294796/henriks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1541604981, "creation_date": 1541603254, "question_id": 53192201, "link": "https://stackoverflow.com/questions/53192201/do-writeprocessmemory-and-similiar-functions-invalidate-the-possibly-cached-data", "title": "Do WriteProcessMemory and similiar functions invalidate the possibly cached data?", "body": "<p>I have an existing program which I need to communicate with over IPC. I can modify small parts of it but can't add any fancy solutions like shared memory, pipes or sockets. So I'd like to communicate with functions that directly read / write into the programs address space:</p>\n\n<ul>\n<li><code>process_vm_writev</code> on linux</li>\n<li><code>WriteProcessMemory</code> on windows</li>\n<li><code>mach_vm_write</code> on macOS</li>\n</ul>\n\n<p>If I modify a value in memory with one of these functions is the possibly cached copy of the old value invalidated? If not is a volatile pointer enough to instantly retrieve the new value?</p>\n"}, {"tags": ["c++", "string", "switch-statement"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1541603258, "post_id": 53192168, "comment_id": 93273194, "body": "1) Did you try stepping through your code with a debugger, to figure out why it doesn&#39;t work, as you intended? 2) <a href=\"https://meta.stackoverflow.com/questions/284236/why-is-can-someone-help-me-not-an-actual-question\">Why is \u201cCan someone help me?\u201d not an actual question?</a>"}, {"owner": {"reputation": 1, "user_id": 10618956, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cywtbhnG2I4/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDbr6aQiCHaIE4aP_ek2HxChQsVKg/mo/photo.jpg?sz=128", "display_name": "jorge ", "link": "https://stackoverflow.com/users/10618956/jorge"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1541603446, "post_id": 53192168, "comment_id": 93273318, "body": "@AlgirdasPreid\u017eius i went through it step by step, like my instructor has taught me, and i cant figure out how to edit the first and last function for them to properly function"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1541603667, "post_id": 53192168, "comment_id": 93273474, "body": "First, one must figure out what, exactly, isn&#39;t working (that&#39;s where using the debugger comes in), and only then, one can fix the issue. You cannot fix something, when you don&#39;t know what is wrong in the first place."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1541603677, "post_id": 53192168, "comment_id": 93273478, "body": "Perhaps <code>isRoman</code> should call <code>romanValue</code> for each character? That avoids duplicating information"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 1, "creation_date": 1541603791, "post_id": 53192168, "comment_id": 93273552, "body": "Please include (1) test values (2) expected results (3) actual results"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1541603817, "post_id": 53192168, "comment_id": 93273567, "body": "If you aren&#39;t testing this one, please do:<code>IV</code>. Expected result: <code>4</code>. Incorrect result: <code>6</code>"}, {"owner": {"reputation": 1, "user_id": 10618956, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cywtbhnG2I4/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDbr6aQiCHaIE4aP_ek2HxChQsVKg/mo/photo.jpg?sz=128", "display_name": "jorge ", "link": "https://stackoverflow.com/users/10618956/jorge"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1541603884, "post_id": 53192168, "comment_id": 93273615, "body": "@TimRandall how should i format isRoman so that it checks if the string inputed has the valid Roman Numeral because essentially if it only contains roman numerals, it will exit that function and proceed to the convertRomantoArabic function which calls romanValue"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1541603978, "post_id": 53192168, "comment_id": 93273673, "body": "Honestly, <code>isRoman</code> should return a <code>bool</code> which is true if the input is a valid roman numeral and false otherwise. Returning a string is just making your life more complicated, in my opinion"}, {"owner": {"reputation": 1, "user_id": 10618956, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cywtbhnG2I4/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDbr6aQiCHaIE4aP_ek2HxChQsVKg/mo/photo.jpg?sz=128", "display_name": "jorge ", "link": "https://stackoverflow.com/users/10618956/jorge"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1541604016, "post_id": 53192168, "comment_id": 93273701, "body": "@TimRandall when i input a value, it just returns a blank line and ends the program"}, {"owner": {"reputation": 1, "user_id": 10618956, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cywtbhnG2I4/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDbr6aQiCHaIE4aP_ek2HxChQsVKg/mo/photo.jpg?sz=128", "display_name": "jorge ", "link": "https://stackoverflow.com/users/10618956/jorge"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1541604110, "post_id": 53192168, "comment_id": 93273763, "body": "@TimRandall well that is my intention but i need to check if it has valid roman numerals, if yes, it will return true, but my problem is the if statement to check for the roman numerals"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1541604158, "post_id": 53192168, "comment_id": 93273798, "body": "You have declared <code>isRoman</code> as a function that returns a string, but you do not have a <code>return</code> statement in the function definition. I am surprised that your compiler isn&#39;t warning you about this. My compiler will refuse to compile this code."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10618956, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cywtbhnG2I4/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDbr6aQiCHaIE4aP_ek2HxChQsVKg/mo/photo.jpg?sz=128", "display_name": "jorge ", "link": "https://stackoverflow.com/users/10618956/jorge"}, "edited": false, "score": 0, "creation_date": 1541604319, "post_id": 53192471, "comment_id": 93273905, "body": "i have found multiple but we just learned arrays, so i can&#39;t use anything past arrays in my program , so could you assist with a coded example?"}, {"owner": {"reputation": 7429, "user_id": 4811873, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/2ef5bab087ac0b70e03e34b0b0009fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Robinson", "link": "https://stackoverflow.com/users/4811873/mike-robinson"}, "reply_to_user": {"reputation": 1, "user_id": 10618956, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cywtbhnG2I4/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDbr6aQiCHaIE4aP_ek2HxChQsVKg/mo/photo.jpg?sz=128", "display_name": "jorge ", "link": "https://stackoverflow.com/users/10618956/jorge"}, "edited": false, "score": 0, "creation_date": 1541605092, "post_id": 53192471, "comment_id": 93274442, "body": "So this <i>is</i> homework!  Let me therefore <b>strongly</b> encourage you to work with your instructor.  Not only can s/he help you, but s/he will thereby know what ought to be discussed in the next classroom session.  *(I&#39;m an adjunct professor at a local community college, so I speak from the heart \u2013 &quot;remember, we can&#39;t read minds.&quot;)"}], "tags": [], "owner": {"reputation": 7429, "user_id": 4811873, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/2ef5bab087ac0b70e03e34b0b0009fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Robinson", "link": "https://stackoverflow.com/users/4811873/mike-robinson"}, "is_accepted": false, "score": 0, "last_activity_date": 1541604157, "creation_date": 1541604157, "answer_id": 53192471, "question_id": 53192168, "link": "https://stackoverflow.com/questions/53192168/converting-roman-numeral-to-arabic-numbers/53192471#53192471", "title": "Converting Roman Numeral to Arabic numbers", "body": "<p>Your logic as written is not sufficient to correctly decode a Roman numeral.  As previously noted, <code>IV</code> is 4, not 6.</p>\n\n<p>And, a ten-second Google search <em>will</em> lead you directly to several code examples which do work. <em>(So, if this isn't homework, \"do not do a thing already done.\u2122\")</em></p>\n\n<p>If you want to work out the algorithm for yourself, let me give you this hint:  <em>\"run the string <strong>backwards</strong>,\"</em> remembering the numeric value of the previous character that you saw.  \"If you encounter an <code>I</code> having previously encountered a <code>V</code> when working backwards, you know to ...\"</p>\n"}], "owner": {"reputation": 1, "user_id": 10618956, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cywtbhnG2I4/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDbr6aQiCHaIE4aP_ek2HxChQsVKg/mo/photo.jpg?sz=128", "display_name": "jorge ", "link": "https://stackoverflow.com/users/10618956/jorge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 778, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1541604157, "creation_date": 1541603150, "question_id": 53192168, "link": "https://stackoverflow.com/questions/53192168/converting-roman-numeral-to-arabic-numbers", "title": "Converting Roman Numeral to Arabic numbers", "body": "<p>So i have one my functions working but the functions to check if the string inputted by the user only contains roman numerals ( M,D,V,X,C,L,I) and to convert the roman numerals to arabic numbers ( 1,2,3,4, etc.) arent working. Can anyone help ?? I need it formatted in C++. </p>\n\n<p>I have tested the romanValue function and it works great, but i need to edit the convertRomantoArabic function to take the input string, check it with the romanValue function and sum of the values of the roman numerals and display the total value to the screen. </p>\n\n<p>this is my whole program: </p>\n\n<pre><code>   #include &lt;iostream&gt;\n    #include &lt;string&gt;\n    #include &lt;cassert&gt;\n    #include &lt;cstddef&gt;\n\n    using namespace std;\n\n    //This function searches in the string to see if the string only contains \n    //Roman Numeral values\n    //Pre:none\n    //Post:none\n    string isRoman(string roman){\n            for(const auto&amp; c:roman){\n                if(!(c == 'M' || c == 'D' || c == 'C' || \n                c == 'L' || c == 'X' || c == 'V' || c == 'I')){\n                    cout&lt;&lt;\"Not Roman\";\n                }\n                cout&lt;&lt;\"Is Roman\";\n            }\n   }\n\n     //This Function finds the Roman Numeral and returns the value\n    //Pre: none\n    //Post: none\n    int romanValue(char roman){\n            switch(roman){\n                case'M':\n                    return 1000;\n                case'D':\n                    return 500;\n                case'C':\n                    return 100;\n                case'L':\n                    return 50;\n                case 'X':\n                    return 10;\n                case'V':\n                    return 5;\n                 case'I':\n                    return 1;\n                default:\n                    cout&lt;&lt;\"Not a Roman Value: \"&lt;&lt;roman&lt;&lt;endl;\n                    return 0;\n            }\n}\n\n//This Function Takes the Roman Numerals entered, finds their value, Adds up \n//Adds up their value and then converts them to Arabic numbers.\n//Pre: none\n//Post: None\nint convertRomantoArabic(string arabic){\n            int i,ans =0, p=0;\n            int n = arabic.length()-1;\n\n            for(i = n; i &gt; 0;i--){\n               if(romanValue(arabic[i] &gt;= p)){\n                   ans = ans + romanValue(arabic[i]);\n               }\n                  ans = ans - romanValue(arabic[i]); \n\n                  p = romanValue(arabic[i]);\n            }\n            return ans;\n        }\nint main()\n{\n    string romanLet;\n    int getRomanValue; \n    cout&lt;&lt;\"Please enter a Roman Numeral: \";\n    cin&gt;&gt;romanLet;\n\n    string findRoman = isRoman(romanLet);\n\n    cout&lt;&lt;findRoman; \n\n    //getRomanValue = convertRomantoArabic(romanLet);\n\n    //cout&lt;&lt;getRomanValue;\n            return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "process"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1541602930, "post_id": 53192025, "comment_id": 93272946, "body": "Pipes are one-way only. If you want your child process to both read input from and write output to the parent process, then you <i>need</i> two pipes. I.e. you need to call <code>pipe</code> twice in the parent. If that doesn&#39;t work for you, then please ask about that explicitly, and with a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> to help us understand what you&#39;re doing. Also please read about <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>, and <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>."}], "owner": {"reputation": 11, "user_id": 10618922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84232bb4c2952a4214c712d6ba2e3985?s=128&d=identicon&r=PG&f=1", "display_name": "ellen", "link": "https://stackoverflow.com/users/10618922/ellen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1541602712, "creation_date": 1541602712, "question_id": 53192025, "link": "https://stackoverflow.com/questions/53192025/i-want-to-know-whether-i-can-open-two-pipe-in-one-process", "title": "I want to know whether i can open two pipe in one process", "body": "<p>i am finishing my c++ assignment, in my child process, i open two pipes, one pipe is used to get stdin and one pipe is used to get stdout, because i want to use my stdin to generate an output and redirect the output to another child process, so i use two pipes, but it always crushes when i use two pipes, i want to know how to correct it?</p>\n\n<pre><code>pipe(A1toA2);\nchildpid2 = fork();\nif(childpid2 == 0){\n    dup2(gentoA1[0],STDIN_FILENO);\n    close(gentoA1[1]);\n    dup2(A1toA2[1],STDOUT_FILENO);\n    close(A1toA2[0]);\n    return processA1();\n}\n</code></pre>\n"}, {"tags": ["c++", "lambda", "std-function"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1541602240, "post_id": 53191788, "comment_id": 93272442, "body": "You may or may not have a performance increase, depending on the lambda, as <code>std::function</code> is type erased."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1541602526, "post_id": 53191788, "comment_id": 93272626, "body": "there is no advantage, but sometimes you dont know whether you get a lambda or some other callable and <code>std::function</code> can wrap more than just lambdas"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541602697, "post_id": 53191788, "comment_id": 93272741, "body": "If you want to store a function object something and you want it to have a certain signature is one of the few use cases left for <code>std::function</code>."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1541602808, "post_id": 53191788, "comment_id": 93272827, "body": "If you need the things that <code>std::function</code> does, use <code>std::function</code>. I you don&#39;t need them, don&#39;t use it."}, {"owner": {"reputation": 11697, "user_id": 114421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/loFOW.jpg?s=128&g=1", "display_name": "Peter Ruderman", "link": "https://stackoverflow.com/users/114421/peter-ruderman"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1541602809, "post_id": 53191788, "comment_id": 93272829, "body": "@user463035818, how is the linked question a duplicate of this one?  The question there is &quot;which is more expensive, auto or std::function?&quot;  The question here is &quot;why would I use std::function instead of auto?&quot;"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1541602849, "post_id": 53191788, "comment_id": 93272864, "body": "You can <i>change</i> the value of <code>f</code>, you <i>can&#39;t</i> change the value of <code>f1</code>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 11697, "user_id": 114421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/loFOW.jpg?s=128&g=1", "display_name": "Peter Ruderman", "link": "https://stackoverflow.com/users/114421/peter-ruderman"}, "edited": false, "score": 0, "creation_date": 1541602872, "post_id": 53191788, "comment_id": 93272885, "body": "@PeterRuderman the question is not exactly the same, but the answers still explains the difference between using a lamda and using a lambda wrapped in a <code>std::function</code>"}, {"owner": {"reputation": 11697, "user_id": 114421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/loFOW.jpg?s=128&g=1", "display_name": "Peter Ruderman", "link": "https://stackoverflow.com/users/114421/peter-ruderman"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1541603020, "post_id": 53191788, "comment_id": 93273013, "body": "@user463035818, the answers discuss why <code>std::function</code> is generally more expensive.  They do not discuss the scenarios in which you&#39;d use it over <code>auto</code>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 11697, "user_id": 114421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/loFOW.jpg?s=128&g=1", "display_name": "Peter Ruderman", "link": "https://stackoverflow.com/users/114421/peter-ruderman"}, "edited": false, "score": 0, "creation_date": 1541603095, "post_id": 53191788, "comment_id": 93273078, "body": "@PeterRuderman from the top answer: &quot;std::function can store an arbitrary callable&quot;. The scenario is when you need to deal with arbitrary callables"}, {"owner": {"reputation": 11697, "user_id": 114421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/loFOW.jpg?s=128&g=1", "display_name": "Peter Ruderman", "link": "https://stackoverflow.com/users/114421/peter-ruderman"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1541603155, "post_id": 53191788, "comment_id": 93273109, "body": "@user463035818, that could do with some elaboration, don&#39;t you think?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 11697, "user_id": 114421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/loFOW.jpg?s=128&g=1", "display_name": "Peter Ruderman", "link": "https://stackoverflow.com/users/114421/peter-ruderman"}, "edited": false, "score": 0, "creation_date": 1541603215, "post_id": 53191788, "comment_id": 93273157, "body": "@PeterRuderman agreed :)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1541603282, "post_id": 53191788, "comment_id": 93273209, "body": "not a duplicate, but highly related: <a href=\"https://stackoverflow.com/questions/48007520/is-stdfunction-heavier-than-auto-storing-lambda-function?noredirect=1&amp;lq=1\" title=\"is stdfunction heavier than auto storing lambda function\">stackoverflow.com/questions/48007520/&hellip;</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1541603466, "post_id": 53191788, "comment_id": 93273335, "body": "@Caleth thats an interesting way to put it. I mean I know that there is only one value of each lambda type, but I never realized that this implies a lambda cannot be &quot;modified&quot;"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1541604051, "post_id": 53191788, "comment_id": 93273724, "body": "@user463035818 the closure type explicitly deletes assignment. There can be multiple values of a lambda type, eg if you return it from an auto function, and they can capture different values"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1541604240, "post_id": 53191788, "comment_id": 93273845, "body": "@user463035818 E.g. <code>auto make = [](int val){ return [val](){ std::cout &lt;&lt; val; } }; auto one = make(1);</code> Adding <code>one = make(1);</code> would fail to compile"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1541604357, "post_id": 53191788, "comment_id": 93273936, "body": "@Caleth hm right. I am not yet too familiar with what lamdas cannot do. Sometimes I have the feeling that there are arbitrary restrictions, but then maybe I am trying to use a lambda for something they were not made for"}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1541604226, "post_id": 53192335, "comment_id": 93273837, "body": "sorry, i dont agree with your points. You <b>can</b> pass a lambda to a function <code>template &lt;typename F&gt; void Foo(F f)</code> is preferable to using <code>std::function</code> if possible. Also I dont really understand what you mean with &quot;If you want to store the lambda for later use, then you must use a std::function&quot;"}, {"owner": {"reputation": 11697, "user_id": 114421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/loFOW.jpg?s=128&g=1", "display_name": "Peter Ruderman", "link": "https://stackoverflow.com/users/114421/peter-ruderman"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1541604693, "post_id": 53192335, "comment_id": 93274173, "body": "I&#39;ll elaborate on your second point.  As I mentioned, you need <code>std::function</code> when passing the lambda to a <i>function</i>, not a function template."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1541604786, "post_id": 53192335, "comment_id": 93274231, "body": "when i call my <code>foo</code> as <code>foo ( [](){} )</code> then that <code>foo</code> is a function not a function template. Afaik you cannot call a function template"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1541605587, "post_id": 53192335, "comment_id": 93274720, "body": "@user463035818: &quot;<i>if possible</i>&quot; And what happens when it is <i>not</i> possible? There are many reasons why a particular function may not be able to be a template. Not only that, the template version can&#39;t take member pointers."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1541605817, "post_id": 53192335, "comment_id": 93274861, "body": "@NicolBolas the answer contains much more details since I made my comment. Before the argument was roughly: &quot;You need <code>std::function</code> when you want to pass a lambda to a function&quot;, which didnt really convince me. (now it got my upvote btw)"}], "tags": [], "owner": {"reputation": 11697, "user_id": 114421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/loFOW.jpg?s=128&g=1", "display_name": "Peter Ruderman", "link": "https://stackoverflow.com/users/114421/peter-ruderman"}, "is_accepted": false, "score": 1, "last_activity_date": 1541605424, "last_edit_date": 1541605424, "creation_date": 1541603738, "answer_id": 53192335, "question_id": 53191788, "link": "https://stackoverflow.com/questions/53191788/what-is-the-advantage-of-storing-a-lambda-in-a-stdfunction-as-opposed-to-an/53192335#53192335", "title": "What is the advantage of storing a lambda in a `std::function` as opposed to an `auto variable`?", "body": "<p>In your simple example, there is no advantage to storing the lambda inside a <code>std::function</code>.  Often, storing a lambda using <code>auto</code> is more efficient, but it also highly restrictive.  The <code>auto</code> version can serve only as a local variable.  If you want to store the lambda for later use, then you must use a <code>std::function</code>.</p>\n\n<p>For example, you might want to store the lambda inside a class member.  Consider the following class:</p>\n\n<pre><code>class Foo\n{\n  std::function&lt;void()&gt; callback_;\npublic:\n  void Bar(int value)\n  {\n    callback_ = [value] { DoStuff(value); }\n  }\n  /* other constructors and methods omitted */\n}\n</code></pre>\n\n<p>In this case, you can't use <code>auto</code> because the lambda's type is anonymous and only available within the <code>Bar</code> method.</p>\n\n<p><code>std::function</code> is also useful when you want to use lambdas as arguments to regular functions.  The function has no way to know the lambda's type, but it can declare a <code>std::function</code> parameter instead.  For example:</p>\n\n<pre><code>void Foo(std::function&lt;void()&gt; callback);\n\n...\n\nFoo([](){ cout &lt;&lt; \"Lambda\" &lt;&lt; endl;});\n</code></pre>\n\n<p>It's worth pointing out that this does not apply to function templates.  When using a lambda in such a context, it's usually a better idea to let the compiler deduce the lambda's type (similar to using <code>auto</code>).  For example:</p>\n\n<pre><code>template &lt;class F&gt; void Foo(F&amp;&amp; callback) { /* details */ }\n\n...\n\nFoo([](){ cout &lt;&lt; \"Lambda\" &lt;&lt; endl;}\n</code></pre>\n"}], "owner": {"reputation": 319, "user_id": 10285454, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ujOOl9OdcSc/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaORtu402bSp43Awfk8ftcU4n5K4fw/mo/photo.jpg?sz=128", "display_name": "cherry aldi", "link": "https://stackoverflow.com/users/10285454/cherry-aldi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1541605977, "creation_date": 1541601994, "last_edit_date": 1541605977, "question_id": 53191788, "link": "https://stackoverflow.com/questions/53191788/what-is-the-advantage-of-storing-a-lambda-in-a-stdfunction-as-opposed-to-an", "title": "What is the advantage of storing a lambda in a `std::function` as opposed to an `auto variable`?", "body": "<p>What is the advantage of storing a lambda in a <code>std::function</code> as opposed to an <code>auto variable</code>. For example in the code below I store the lambda in <code>variable f1</code> rather than in <code>std::function f</code>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\nusing namespace std;\n\nvoid global_f() {\n    cout &lt;&lt; \"global_f()\" &lt;&lt; endl;\n}\n\nstruct Functor {\n    void operator()() { cout &lt;&lt; \"Functor\" &lt;&lt; endl; }\n};\n\nint main() {\n    std::function&lt;void()&gt; f;\n\n    cout &lt;&lt; \"sizeof(f) == \" &lt;&lt; sizeof(f) &lt;&lt; endl;\n\n    f = global_f;\n    f();\n\n    auto f1 = [](){ cout &lt;&lt; \"Lambda\" &lt;&lt; endl;};\n    f1();\n\n    Functor functor;\n    f = functor;\n    f();\n}\n</code></pre>\n"}, {"tags": ["c++", "function", "casting", "callback"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1541601856, "post_id": 53191721, "comment_id": 93272186, "body": "Can you provide a code sample showing how you are currently trying to do this?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541601936, "post_id": 53191721, "comment_id": 93272230, "body": "You shouldn&#39;t need the cast.  The classes should be polymorphic and accessed from a common interface."}, {"owner": {"reputation": 343, "user_id": 8564676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88800e660ef09b501bc5fdc939ae75ea?s=128&d=identicon&r=PG&f=1", "display_name": "scriptfoo", "link": "https://stackoverflow.com/users/8564676/scriptfoo"}, "edited": false, "score": 0, "creation_date": 1541603045, "post_id": 53191721, "comment_id": 93273037, "body": "You are right,there must have been a problem in another place which caused cryptic compiler errors... thanks."}], "owner": {"reputation": 343, "user_id": 8564676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88800e660ef09b501bc5fdc939ae75ea?s=128&d=identicon&r=PG&f=1", "display_name": "scriptfoo", "link": "https://stackoverflow.com/users/8564676/scriptfoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1541608585, "creation_date": 1541601790, "last_edit_date": 1541608585, "question_id": 53191721, "link": "https://stackoverflow.com/questions/53191721/c-cast-functionvoidshared-ptranimal-to-functionvoidshared-ptrdog", "title": "C++: cast function&lt;void(shared_ptr&lt;Animal&gt;)&gt; to function&lt;void(shared_ptr&lt;Dog&gt;)&gt;", "body": "<p>I do not know C++ too well, can not find anything on this callback being a mixture of <code>function</code>, <code>shared_ptr</code> and a cast to a narrower type. Is this possible in C++ and how to do this?</p>\n\n<p>EDIT: Yeah solution is in the comment of Nathan. There was also a answer which clarified the interesting details, but it disappeared.</p>\n"}, {"tags": ["c++", "image", "resources", "extract", "portable-executable"], "comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1541602611, "post_id": 53191697, "comment_id": 93272690, "body": "<a href=\"https://stackoverflow.com/questions/27236561/what-is-the-difference-between-rcdata-and-user-defined-resource\" title=\"what is the difference between rcdata and user defined resource\">stackoverflow.com/questions/27236561/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3608848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f47e6b1fa42083bde988aa4a679bdf?s=128&d=identicon&r=PG&f=1", "display_name": "programme-zero", "link": "https://stackoverflow.com/users/3608848/programme-zero"}, "is_accepted": false, "score": 0, "last_activity_date": 1541614634, "creation_date": 1541614634, "answer_id": 53195445, "question_id": 53191697, "link": "https://stackoverflow.com/questions/53191697/extracting-an-an-image-jpg-or-png-from-the-pe/53195445#53195445", "title": "Extracting an an image (JPG or PNG) from the PE", "body": "<p>Ok after a few more hours of researches I found this and it seems to work.\nPosting it in case someone has the same problem :\n<a href=\"https://social.msdn.microsoft.com/Forums/en-US/7d753874-2fed-4db7-8135-4e4d499bac99/how-use-rcdata?forum=Vsexpressvc\" rel=\"nofollow noreferrer\">https://social.msdn.microsoft.com/Forums/en-US/7d753874-2fed-4db7-8135-4e4d499bac99/how-use-rcdata?forum=Vsexpressvc</a></p>\n"}], "owner": {"reputation": 1, "user_id": 3608848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f47e6b1fa42083bde988aa4a679bdf?s=128&d=identicon&r=PG&f=1", "display_name": "programme-zero", "link": "https://stackoverflow.com/users/3608848/programme-zero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 275, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541614634, "creation_date": 1541601699, "last_edit_date": 1541605892, "question_id": 53191697, "link": "https://stackoverflow.com/questions/53191697/extracting-an-an-image-jpg-or-png-from-the-pe", "title": "Extracting an an image (JPG or PNG) from the PE", "body": "<p>First of all I have done a lot of research on how to use resources and I cannot find proper documentation or manage to make it work so please do not link documentation without explaining (I am using Visual Studio 2015).\nThe problem is the following I would like to extract an image (JPG or PNG) that is in the PE.\nI found 2 approaches:</p>\n\n<ol>\n<li><p>Using resources but I can't seem to find documentation for PNG files and on how to properly declare the resource ID.</p></li>\n<li><p>Converting the image to a hex array and copy it to a file, this solution isn't working because Visual Studio simply doesn't allow me to paste the array (maybe too big?) And just crashes. Modifying the file directly in the project with another editor doesn't seem to work either it just reverts back for whatever reason.</p></li>\n</ol>\n\n<p>I don't mind the solution to use but none is working right now.</p>\n"}, {"tags": ["c++", "database", "variables", "struct"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1541601588, "post_id": 53191638, "comment_id": 93272016, "body": "<code>achi</code> is a member of your struct, ie you need an instance of that struct before you can access its members"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1541601603, "post_id": 53191638, "comment_id": 93272028, "body": "<i>&quot;int i, j, k, l; //for possible loops or variables I only need for a very short time&quot;</i>, so prefer local variables."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 2, "creation_date": 1541601694, "post_id": 53191638, "comment_id": 93272078, "body": "Note that your class functions and functions with the same name in global scope are <i>different</i> functions, eg. <code>main()</code> in <code>va</code> is not the <code>main()</code> where your program executes."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 6, "creation_date": 1541601702, "post_id": 53191638, "comment_id": 93272083, "body": "Sounds like you could use a <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>"}, {"owner": {"reputation": 341, "user_id": 3255484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23d66896b4e2a43cd7b52d0b7faf7b57?s=128&d=identicon&r=PG&f=1", "display_name": "Rags", "link": "https://stackoverflow.com/users/3255484/rags"}, "edited": false, "score": 0, "creation_date": 1541601871, "post_id": 53191638, "comment_id": 93272194, "body": "Gosh .. there&#39;s a fair bit to question in what&#39;s written here.  You have member functions in the struct (a struct is essentially a class, with default public access) - so you have two declarations for each function. Is this intended? Also, when you declare a struct, you&#39;re defining a conceptual entity. But to use it, you need to create an instance of it. Everything defined inside the struct belongs to the instance of the struct (assuming you have one.) I think there&#39;s some design questions regarding how C++ works that need to be ironed out before you&#39;re going to make much headway I&#39;m afraid."}, {"owner": {"reputation": 341, "user_id": 3255484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23d66896b4e2a43cd7b52d0b7faf7b57?s=128&d=identicon&r=PG&f=1", "display_name": "Rags", "link": "https://stackoverflow.com/users/3255484/rags"}, "edited": false, "score": 1, "creation_date": 1541602016, "post_id": 53191638, "comment_id": 93272277, "body": "Another question to worry about - &quot;..specifically with arrays, .. not classes..&#39; - this is a bit concerning. Do you mean, you can&#39;t write new classes? (A struct is a class anyway) - or that you can&#39;t use existing classes, e.g. the STL?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1541603325, "post_id": 53191638, "comment_id": 93273239, "body": "Why are you declaring a <code>main()</code> function in your <code>struct</code>?"}, {"owner": {"reputation": 11, "user_id": 10342831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9798368a8522940dab4eb749da0a80f6?s=128&d=identicon&r=PG&f=1", "display_name": "Vievin", "link": "https://stackoverflow.com/users/10342831/vievin"}, "reply_to_user": {"reputation": 341, "user_id": 3255484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23d66896b4e2a43cd7b52d0b7faf7b57?s=128&d=identicon&r=PG&f=1", "display_name": "Rags", "link": "https://stackoverflow.com/users/3255484/rags"}, "edited": false, "score": 0, "creation_date": 1541604846, "post_id": 53191638, "comment_id": 93274261, "body": "@Rags It is a school assignment, I guess he restricted us to using arrays for the database to have us practice it. <i>shrug</i> One of the reasons I want to use a class instead of global modifiers is to spite him. I technically did nothing wrong, the database is still arrays... He never said we can&#39;t include classes period."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10342831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9798368a8522940dab4eb749da0a80f6?s=128&d=identicon&r=PG&f=1", "display_name": "Vievin", "link": "https://stackoverflow.com/users/10342831/vievin"}, "edited": false, "score": 0, "creation_date": 1541605361, "post_id": 53192404, "comment_id": 93274585, "body": "I wanted to make a struct specifically to make global variables without having to use ::variablename. For example, id, name etc. are actually the numbers of columns, they are specifically defined outside of every function and dependant on each other because at a later point I will have to change the structure, and this would in theory allow me to just edit the struct and the entire program would reflect the change. Is there any way I can do that?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 11, "user_id": 10342831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9798368a8522940dab4eb749da0a80f6?s=128&d=identicon&r=PG&f=1", "display_name": "Vievin", "link": "https://stackoverflow.com/users/10342831/vievin"}, "edited": false, "score": 0, "creation_date": 1541605579, "post_id": 53192404, "comment_id": 93274715, "body": "@Vievin You can, and <code>pro</code> is visible in <code>::va::MainMenu</code>. But that is a <b>different function</b> to <code>::MainMenu</code> (namespace scoping included for emphasis)"}, {"owner": {"reputation": 341, "user_id": 3255484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23d66896b4e2a43cd7b52d0b7faf7b57?s=128&d=identicon&r=PG&f=1", "display_name": "Rags", "link": "https://stackoverflow.com/users/3255484/rags"}, "reply_to_user": {"reputation": 11, "user_id": 10342831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9798368a8522940dab4eb749da0a80f6?s=128&d=identicon&r=PG&f=1", "display_name": "Vievin", "link": "https://stackoverflow.com/users/10342831/vievin"}, "edited": false, "score": 0, "creation_date": 1541605644, "post_id": 53192404, "comment_id": 93274766, "body": "@Vievin Avoid global variables. Reduce the scope of entities to the minimum possible - that way they have the minimum impact when you change things (and they don&#39;t pollute namespaces they shouldn&#39;t be, and other benefits.)"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 11, "user_id": 10342831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9798368a8522940dab4eb749da0a80f6?s=128&d=identicon&r=PG&f=1", "display_name": "Vievin", "link": "https://stackoverflow.com/users/10342831/vievin"}, "edited": false, "score": 0, "creation_date": 1541605689, "post_id": 53192404, "comment_id": 93274794, "body": "@Vievin Note that I have <i>removed</i> declarations of <code>::Addition</code> etc. In <code>va::MainMenu</code> the <code>Addition()</code> call will go to <code>va::Addition</code>"}, {"owner": {"reputation": 341, "user_id": 3255484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23d66896b4e2a43cd7b52d0b7faf7b57?s=128&d=identicon&r=PG&f=1", "display_name": "Rags", "link": "https://stackoverflow.com/users/3255484/rags"}, "reply_to_user": {"reputation": 11, "user_id": 10342831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9798368a8522940dab4eb749da0a80f6?s=128&d=identicon&r=PG&f=1", "display_name": "Vievin", "link": "https://stackoverflow.com/users/10342831/vievin"}, "edited": false, "score": 0, "creation_date": 1541605773, "post_id": 53192404, "comment_id": 93274841, "body": "@Vievin What you want, I think, is to define a struct which represents the data structure you want to store. That definition can be global. Then have instances of that structure as your data objects - they all have the same type, and can have arrays of them (I would advise arrays of pointers to instances of them, rather than arrays of large object - various benefits, but probably outside the scope of your class.)"}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 0, "last_activity_date": 1541603953, "creation_date": 1541603953, "answer_id": 53192404, "question_id": 53191638, "link": "https://stackoverflow.com/questions/53191638/how-can-i-make-the-variables-of-my-struct-visible-from-all-functions/53192404#53192404", "title": "How can I make the variables of my struct visible from all functions?", "body": "<p>You have only defined a type, you don't have an values of that type. You have also declared but not defined a number of member functions, and then declared (and presumably defined, tho many are not shown) free functions with the same names.</p>\n\n<p>When providing out-of-class definitions of member functions of <code>struct va</code>, you need to use <code>va::</code> to <em>qualify</em> the names of the members, to distinguish them from anything else with the same name. If this were not the case, then all the good names would be used up by members of classes in the standard library.</p>\n\n<p>It's also good practice to declare variables at the narrowest possible location. Don't clutter the data members of <code>va</code> with things that can be local to it's member functions.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing std::cout;\nusing std::cin;\nusing std::endl;\n\nstruct va {\n    static constexpr int size = 20;\n    static constexpr int column = ???;\n    std::string pro[size][column];\n\n    void MainMenu();\n    void Addition();\n    void Deletion();\n    void Search();\n    void Modify();\n    void List();\n};\n\nint main()\n{\n    setlocale(LC_ALL, \"\");\n\n    va instance;\n    cout &lt;&lt; endl &lt;&lt; \"Welcome to the League of Legends Pro Players database!\" &lt;&lt; endl &lt;&lt; endl;\n    cout &lt;&lt; endl &lt;&lt; \"Please, use the menu to access its functions.\";\n\n    instance.MainMenu();\n\n    cout &lt;&lt; endl;\n    return 0; \n}\n\nvoid va::MainMenu()\n{\n    cout &lt;&lt; endl &lt;&lt; \"Main Menu\" &lt;&lt; endl;\n    cout &lt;&lt; endl &lt;&lt; \"1: add an entry to the database.\";\n    cout &lt;&lt; endl &lt;&lt; \"2: delete an existing entry from the database.\";\n    cout &lt;&lt; endl &lt;&lt; \"3: search for an existing entry in the database.\";\n    cout &lt;&lt; endl &lt;&lt; \"4: modify an existing entry.\";\n    cout &lt;&lt; endl &lt;&lt; \"5: list all existing entries.\" &lt;&lt; endl;\n\n    int i;\n    cin &gt;&gt; i;\n\n    switch(i)\n    {\n        case 1: Addition();\n        case 2: Deletion();\n        case 3: Search();\n        case 4: Modify();\n        case 5: List();\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10342831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9798368a8522940dab4eb749da0a80f6?s=128&d=identicon&r=PG&f=1", "display_name": "Vievin", "link": "https://stackoverflow.com/users/10342831/vievin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1541603953, "creation_date": 1541601499, "question_id": 53191638, "link": "https://stackoverflow.com/questions/53191638/how-can-i-make-the-variables-of-my-struct-visible-from-all-functions", "title": "How can I make the variables of my struct visible from all functions?", "body": "<p>So, my assignment in class was to make a C++ program that essentially makes a database with a number of options (adding to it, deleting entries, modifying, searching and listing). It has to be done specifically with arrays, not vectors or classes or whatever. </p>\n\n<p>I decided to make a number of functions to handle each option, and have them all call each other. After extensive googling, I also decided to let a struct handle the declarations so I can use them in all functions without using :: marks. I specifically made everything depend on each other because the teacher hinted that we're going to have to do further work with it, so if I modify something, everything else changes to accommodate.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nstruct va{\n\npublic:\n    int i, j, k, l; //for possible loops or variables I only need for a very short time\n    int id = 0;\n    int name = id+1;\n    // like 6 other ints I also declared here, including year2\n    int achi = year2+1;\n    //The above is for easier identification of pro[whatever][needed data]. The +1 method is to allow for easier editing later.\n\n    int size = 20, row = 0; //This is important for addition\n    string searchterm = \"\"; //this is for searching\n\npublic:\n    int main();\n    void MainMenu();\n    void Addition();\n    void Deletion();\n    void Search();\n    void Modify();\n    void List();\n};\n\nvoid MainMenu();\nvoid Addition();\nvoid Deletion();\nvoid Search();\nvoid Modify();\nvoid List(); \n//I just find it neater to make side functions after the main one.\n\nint main()\n{\n    setlocale(LC_ALL, \"\");\n\n\n    const int column = achi;\n    const int initsize = size; //These two are so I can edit the size of the array from the struct directly\n    string pro[initsize][column]; //This creates the array that's the actual database\n\n    cout &lt;&lt; endl &lt;&lt; \"Welcome to the League of Legends Pro Players database!\" &lt;&lt; endl &lt;&lt; endl;\n    cout &lt;&lt; endl &lt;&lt; \"Please, use the menu to access its functions.\";\n\n    MainMenu();\n\n    cout &lt;&lt; endl;\n    return 0; \n}\n\nvoid MainMenu()\n{\n    cout &lt;&lt; endl &lt;&lt; \"Main Menu\" &lt;&lt; endl;\n    cout &lt;&lt; endl &lt;&lt; \"1: add an entry to the database.\";\n    cout &lt;&lt; endl &lt;&lt; \"2: delete an existing entry from the database.\";\n    cout &lt;&lt; endl &lt;&lt; \"3: search for an existing entry in the database.\";\n    cout &lt;&lt; endl &lt;&lt; \"4: modify an existing entry.\";\n    cout &lt;&lt; endl &lt;&lt; \"5: list all existing entries.\" &lt;&lt; endl;\n\n    cin  &gt;&gt; i;\n\n    switch(i)\n    {\n        case 1: Addition();\n        case 2: Deletion();\n        case 3: Search();\n        case 4: Modify();\n        case 5: List();\n    }\n}\n</code></pre>\n\n<p>(I haven't written the actual functions for options yet.) However, when I tried to run it, I was told 'achi' wasn't declared in main, although I made everything public just so I won't run into this error. How could I make main \"see\" the struct and its variables?</p>\n"}, {"tags": ["c++", "cmake", "glfw", "catch2"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1541604101, "post_id": 53191578, "comment_id": 93273757, "body": "Like <code>-l</code> flag, <code>framework</code> one should also be passed to <code>target_link_libraries</code>, not to the <code>CMAKE_EXE_LINKER_FLAGS</code> variable."}, {"owner": {"reputation": 176, "user_id": 9780989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e134af765ce8b99fd9ec90d9f4d21c35?s=128&d=identicon&r=PG&f=1", "display_name": "adziri", "link": "https://stackoverflow.com/users/9780989/adziri"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1541604819, "post_id": 53191578, "comment_id": 93274246, "body": "@Tsyvarev, Sorry, I&#39;m a bit bad in CMake commands, if it not hard for u, can u say where I make mistake? As I understand in <code>set(CMAKE_EXE_LINKER_FLAGS &quot;${CMAKE_EXE_LINKER_FLAGS} -lglfw -framework Cocoa -framework OpenGL -framework IOKit -framework CoreVideo&quot;)</code> ?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1541605052, "post_id": 53191578, "comment_id": 93274413, "body": "Yes, assigning <code>CMAKE_EXE_LINKER_FLAGS</code> is wrong in your case. You should use <code>target_link_libraries</code> command for link with a libraries."}, {"owner": {"reputation": 176, "user_id": 9780989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e134af765ce8b99fd9ec90d9f4d21c35?s=128&d=identicon&r=PG&f=1", "display_name": "adziri", "link": "https://stackoverflow.com/users/9780989/adziri"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1541605156, "post_id": 53191578, "comment_id": 93274474, "body": "@Tsyvarev, But why than all working when I building without unit tests? And as I understand I need use <code>target_link_libraries</code> for <code>-lglfw</code> command? Other may stay?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1541609897, "post_id": 53191578, "comment_id": 93277169, "body": "For <b>every</b> flag <code>-l&lt;lib&gt;</code> use <code>target_link_libraries(&lt;your-exe&gt; &lt;lib&gt;)</code>. For <b>every</b>  flag <code>-framework &lt;f&gt;</code> use <code>target_link_libraries(&lt;your-exe&gt; -framework &lt;f&gt;)</code>."}, {"owner": {"reputation": 176, "user_id": 9780989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e134af765ce8b99fd9ec90d9f4d21c35?s=128&d=identicon&r=PG&f=1", "display_name": "adziri", "link": "https://stackoverflow.com/users/9780989/adziri"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1541691676, "post_id": 53191578, "comment_id": 93310170, "body": "@Tsyvarev, have the same error with SOIL, I try linking it as u recomend with <code>find_library(SOIL NAMES soil     PATH ${CMAKE_CURRENT_SOURCE_DIR}&#47;..&#47;external&#47;SOIL&#47;libsoil.a     NO_DEFAULT_PATH)</code> first and then <code>target_link_libraries(${PROJECT_NAME} glfw SimplePaint ${SOIL})</code> but have error: CMake Error: The following variables are used in this project, but they are set to NOTFOUND. Please set them or make sure they are set and tested correctly in the CMake files: SOIL     linked by target &quot;SimplePaint_UnitTests&quot; in directory /Users/akukh/Documents/Projects/simple-paint/tests whats wrong?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1541692345, "post_id": 53191578, "comment_id": 93310613, "body": "Why you search the library (with <code>find_library</code>) when you already know the library&#39;s path? Simply use this path in <code>target_link_libraries</code> call."}, {"owner": {"reputation": 176, "user_id": 9780989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e134af765ce8b99fd9ec90d9f4d21c35?s=128&d=identicon&r=PG&f=1", "display_name": "adziri", "link": "https://stackoverflow.com/users/9780989/adziri"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1541692676, "post_id": 53191578, "comment_id": 93310833, "body": "@Tsyvarev, ty I change to <code>target_link_libraries(${PROJECT_NAME} glfw SimplePaint &quot;${CMAKE_CURRENT_SOURCE_DIR}&#47;..&#47;external&#47;SOIL&#47;libsoil.a&quot;)</code> but still have error <code>Undefined symbols for architecture x86_64:   &quot;_CFBundleCreate&quot;, referenced from:       _query_DXT_capability in libsoil.a(SOIL.c.o)   &quot;_CFBundleGetFunctionPointerForName&quot;, referenced from:       _query_DXT_capability in libsoil.a(SOIL.c.o)   &quot;_CFRelease&quot;, referenced from:       _query_DXT_capability in libsoil.a(SOIL.c.o)</code> etc."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1541693066, "post_id": 53191578, "comment_id": 93311086, "body": "Read the error message carefully: it is about the symbols <b>used by</b> <code>libsoil.a</code> library itself. So you need to additionally link with a library which provides those symbols. Make sure to place this library <b>after</b> the <code>libsoil.a</code> in the <code>target_link_libraries</code> call."}], "owner": {"reputation": 176, "user_id": 9780989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e134af765ce8b99fd9ec90d9f4d21c35?s=128&d=identicon&r=PG&f=1", "display_name": "adziri", "link": "https://stackoverflow.com/users/9780989/adziri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "closed_date": 1541679428, "answer_count": 0, "score": 0, "last_activity_date": 1541601300, "creation_date": 1541601300, "question_id": 53191578, "link": "https://stackoverflow.com/questions/53191578/cmake-undefined-symbols-for-architecture-x86-64-using-glad-glfw-catch2", "closed_reason": "Duplicate", "title": "CMake - &quot;Undefined symbols for architecture x86_64&quot; using glad/GLFW/Catch2", "body": "<p>So, I have a project with CMakeLists, the tree like the following:</p>\n\n<pre><code>proj dir:  \n  --include\n      window.h\n      scene.h\n      etc.  \n  --src\n      window.cpp\n      scene.cpp\n      main.cpp\n      etc.\n  --external\n      --glad\n      --SOIL\n      --Catch2\n  --tests\n      CMakeLists.txt\n      window_test.cpp\n      main.cpp\n CMakeLists.txt\n</code></pre>\n\n<p>And I trying in tests root make project for unit tests using Catch2 lib. But when I'm trying build my unit_test proj get following errors:</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"_glfwCreateWindow\", referenced from:\n      mlg::System::Window::create() in libSimplePaint.a(window.cpp.o)\n  \"_glfwInit\", referenced from:\n      mlg::System::Window::Window(int, int, char const*) in libSimplePaint.a(window.cpp.o)\n  \"_glfwMakeContextCurrent\", referenced from:\n      mlg::System::Window::create() in libSimplePaint.a(window.cpp.o)\n  \"_glfwSetFramebufferSizeCallback\", referenced from:\n      mlg::System::Window::setFramebufferSizeCallback() const in libSimplePaint.a(window.cpp.o)\n  \"_glfwTerminate\", referenced from:\n      mlg::System::Window::close() const in libSimplePaint.a(window.cpp.o)\n      mlg::System::Window::create() in libSimplePaint.a(window.cpp.o)\n  \"_glfwWindowHint\", referenced from:\n      mlg::System::Window::Window(int, int, char const*) in libSimplePaint.a(window.cpp.o)\n  \"_glfwWindowShouldClose\", referenced from:\n      mlg::System::Window::isOpen() const in libSimplePaint.a(window.cpp.o)\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake[2]: *** [SimplePaint_UnitTests] Error 1\nmake[1]: *** [CMakeFiles/SimplePaint_UnitTests.dir/all] Error 2\nmake: *** [all] Error 2\n</code></pre>\n\n<p>project CMakeLists:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.11 FATAL_ERROR) \n\nproject(SimplePaint)\n\nset(CMAKE_CXX_FLAGS        \"${CMAKE_CXX_FLAGS} -std=c++17\")\nset(CMAKE_EXE_LINKER_FLAGS \"${CMAKE_EXE_LINKER_FLAGS} -lglfw -framework Cocoa -framework OpenGL -framework IOKit -framework CoreVideo\")\n\nset(SRC_DIR     \"${CMAKE_CURRENT_SOURCE_DIR}/src\")\nset(LIBS_DIR    \"${CMAKE_CURRENT_SOURCE_DIR}/external\")\nset(INCLUDE_DIR \"${CMAKE_CURRENT_SOURCE_DIR}/include\")\nset(BUILD_DIR   \"${CMAKE_CURRENT_SOURCE_DIR}/build\")\n\nset(CMAKE_RUNTIME_OUTPUT_DIRECTORY \"${BUILD_DIR}/bin\")\n\nfile(GLOB SOURCES \"${SRC_DIR}/*.cpp\" \"${SRC_DIR}/*.vert\" \"${SRC_DIR}/*.frag\")\nfile(GLOB HEADERS \"${INCLUDE_DIR}/*.h\" \"${INCLUDE_DIR}/*.hpp\")\n\nadd_executable(${PROJECT_NAME} ${SOURCES} ${HEADERS})\ntarget_include_directories(${PROJECT_NAME} PUBLIC ${INCLUDE_DIR})\n\n# SOIL\ninclude_directories(${soil_lib})\nset(SOIL_LIBRARY ${LIBS_DIR}/SOIL/libsoil.a)\ntarget_link_libraries(${PROJECT_NAME} ${SOIL_LIBRARY})\n\n# glad\nset(GLAD_DIR \"${LIBS_DIR}/glad\")\nadd_library(\"GLAD\" \"${GLAD_DIR}/src/glad.c\")\ntarget_include_directories(\"GLAD\" PRIVATE \"${GLAD_DIR}/include\")\ntarget_include_directories(${PROJECT_NAME} PRIVATE \"${GLAD_DIR}/include\")\ntarget_link_libraries(${PROJECT_NAME} \"GLAD\" \"${CMAKE_DL_LIBS}\")\n</code></pre>\n\n<p>unit tests CMakeLists:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.11 FATAL_ERROR)\n\nproject(SimplePaint_UnitTests)\n# This module will be used for downloading third party code.\ninclude(ExternalProject)\n\nset(THIRDPARTY \"${CMAKE_CURRENT_SOURCE_DIR}/../external\")\n\nExternalProject_Add(\n    Catch2\n\n    GIT_REPOSITORY      \"https://github.com/catchorg/Catch2.git\"\n    GIT_TAG             \"master\"\n\n    SOURCE_DIR          \"${THIRDPARTY}/Catch2-master\"\n\n    # Don't update and patch.\n    UPDATE_COMMAND      \"\"\n    PATCH_COMMAND       \"\"\n\n    # Don't configure and build.\n    CONFIGURE_COMMAND   \"\"\n    BUILD_COMMAND       \"\"\n\n    # Don't test and install.\n    TEST_COMMAND        \"\"\n    INSTALL_COMMAND     \"\")\n\n\nset(Catch2_INCLUDE_DIR \"${THIRDPARTY}/Catch2-master/single_include\")\n\nExternalProject_Add(\n    GLM\n\n    GIT_REPOSITORY      \"https://github.com/g-truc/glm.git\"\n    GIT_TAG             \"0.9.4.6\"\n\n    SOURCE_DIR          \"${THIRDPARTY}/glm-0.9.4.6\"\n\n    # Don't update and patch.\n    UPDATE_COMMAND      \"\"\n    PATCH_COMMAND       \"\"\n\n    # Don't configure and build.\n    CONFIGURE_COMMAND   \"\"\n    BUILD_COMMAND       \"\"\n\n    # Don't test and install.\n    TEST_COMMAND        \"\"\n    INSTALL_COMMAND     \"\")\n\nset(GLM_INCLUDE_DIRS \"${THIRDPARTY}/glm-0.9.4.6\")\n\nadd_library(SimplePaint STATIC\n\n    \"${THIRDPARTY}/glad/src/glad.c\"\n    \"${CMAKE_CURRENT_SOURCE_DIR}/../src/main.cpp\"\n    \"${CMAKE_CURRENT_SOURCE_DIR}/../src/window.cpp\"\n    )\n\ntarget_include_directories(SimplePaint PUBLIC\n\n    \"${THIRDPARTY}/glad/include\"\n    \"${CMAKE_CURRENT_SOURCE_DIR}/../include\"\n    \"${CMAKE_CURRENT_SOURCE_DIR}/../src\"\n    \"${GLM_INCLUDE_DIRS}\"\n    )\n\ntarget_compile_features(SimplePaint PUBLIC cxx_std_17)\n\nadd_dependencies(SimplePaint GLM)\n\nadd_executable(${PROJECT_NAME}\n\n    \"${CMAKE_CURRENT_SOURCE_DIR}/window_test.cpp\"\n    \"${CMAKE_CURRENT_SOURCE_DIR}/main.cpp\"\n    )\n\ntarget_include_directories(${PROJECT_NAME} PRIVATE ${Catch2_INCLUDE_DIR})\n\ntarget_link_libraries(${PROJECT_NAME} SimplePaint)\n\nadd_custom_command(TARGET ${PROJECT_NAME} POST_BUILD COMMAND \"$&lt;TARGET_FILE:${PROJECT_NAME}&gt;\")\n\nadd_dependencies(${PROJECT_NAME} Catch2)\n</code></pre>\n\n<p>What I'm doing wrong? I including GLFW and glad like this:</p>\n\n<pre><code>#include &lt;glad/glad.h&gt;\n#define GLFW_INCLUDE_NONE\n#include &lt;GLFW/glfw3.h&gt;\n</code></pre>\n\n<p>And if I building only my project without unit tests all working and building. Compiler Clang 10.0</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 7, "creation_date": 1541600407, "post_id": 53191266, "comment_id": 93271336, "body": "Do you want a <code>set</code> rather than a <code>vector</code>, or do you want to produce an error? If the latter, use <code>std::find</code> on the children."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1541600697, "post_id": 53191266, "comment_id": 93271504, "body": "You check duplicate for family, but not for child."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1541600711, "post_id": 53191266, "comment_id": 93271518, "body": "Indeed, use a set instead."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1541600742, "post_id": 53191266, "comment_id": 93271533, "body": "What may be confusing you is that <code>std::vector</code> doesn&#39;t have a <code>find</code>. You&#39;ll have to use <a href=\"https://en.cppreference.com/w/cpp/algorithm/find\" rel=\"nofollow noreferrer\"><code>std::find</code></a> instead."}, {"owner": {"reputation": 391, "user_id": 4693472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5cdf081b2f368f958a7653b26c5799c?s=128&d=identicon&r=PG&f=1", "display_name": "Laurent G", "link": "https://stackoverflow.com/users/4693472/laurent-g"}, "edited": false, "score": 0, "creation_date": 1541600845, "post_id": 53191266, "comment_id": 93271589, "body": "You should avoid testing for key presence when adding, as non-const operator[] will create key-value (that includes the empty vector in your case) pair for you : vector&lt;string&gt;&amp; family_names = family[name];"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1541601847, "post_id": 53191266, "comment_id": 93272178, "body": "You don&#39;t check the vector to see if <code>child_name</code> already exists. You only check the map, but not the vector."}, {"owner": {"reputation": 3, "user_id": 10259208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9315d79737b22c1028e7b71f7d2ac918?s=128&d=identicon&r=PG&f=1", "display_name": "\u0130brahim Soner Zorbak\u0131r", "link": "https://stackoverflow.com/users/10259208/%c4%b0brahim-soner-zorbak%c4%b1r"}, "edited": false, "score": 0, "creation_date": 1541602496, "post_id": 53191266, "comment_id": 93272614, "body": "Thanks for the quick replies. I tried to add <code>std::find</code> function like this;  <code>auto ret = find(it-&gt;second.begin(), it-&gt;second.end(), child_name);</code>  But I get Segmentation fault: 11 error."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1541603982, "post_id": 53191266, "comment_id": 93273676, "body": "Did you first check <code>if(it != </code>family.cend())`?"}], "answers": [{"tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": true, "score": 0, "last_activity_date": 1541606774, "creation_date": 1541606774, "answer_id": 53193309, "question_id": 53191266, "link": "https://stackoverflow.com/questions/53191266/prevent-duplicates-in-a-vector/53193309#53193309", "title": "Prevent duplicates in a vector", "body": "<p>As noted in the comments, you only check for duplicate <code>family_name</code>, not <code>child_name</code>. You can use <code>std::find</code> to search a <code>std::vector</code></p>\n\n<pre><code>void add_child(map&lt;string, vector&lt;string&gt;&gt; &amp;family, const string &amp; family_name, const string &amp; child_name)\n{\n    auto f_it = family.find(family_name);\n\n    if (f_it != family.cend())\n    {\n        auto c_it = find(f_it-&gt;second.begin(), f_it-&gt;second.end(), child_name);\n        if (c_it == f_it-&gt;second.end())\n        {\n            f_it-&gt;second.insert(c_it, child_name);\n        }\n        else\n        {\n            cerr &lt;&lt; \"Error: Already has child &lt;\" &lt;&lt; child_name &lt;&lt; \"&gt;\" &lt;&lt; endl;\n        }\n    }\n    else\n    {\n        cerr &lt;&lt; \"Error: No family &lt;\" &lt;&lt; family_name &lt;&lt; \n                \"&gt; for child &lt;\" &lt;&lt; child_name &lt;&lt; \"&gt;\" &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>Or alternatively you can use <code>std::map&lt;std::string, std::set&lt;std::string&gt;&gt;</code> to ensure uniqueness. Additionally, you can utilise the return value of <code>insert</code> to only lookup each name once.</p>\n\n<pre><code>void add_family(map&lt;string, set&lt;string&gt;&gt; &amp;family, const string &amp;name)\n{\n    if (!family.insert({name, {}}).second)\n    {\n        cerr &lt;&lt; \"Error: Already has family &lt;\" &lt;&lt; name &lt;&lt; \"&gt;\" &lt;&lt; endl;\n    }\n}\n\nvoid add_child(map&lt;string, set&lt;string&gt;&gt; &amp;family, const string &amp; family_name, const string &amp; child_name)\n{\n    auto it = family.find(family_name);\n\n    if (it == family.cend())\n    {\n        cerr &lt;&lt; \"Error: No family &lt;\" &lt;&lt; family_name &lt;&lt; \n                \"&gt; for child &lt;\" &lt;&lt; child_name &lt;&lt; \"&gt;\" &lt;&lt; std::endl;\n    } else if (!it-&gt;second.insert(child_name).second)\n    {\n        cerr &lt;&lt; \"Error: Already has child &lt;\" &lt;&lt; child_name &lt;&lt; \"&gt;\" &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>But I think this design is inelegant. I wouldn't bother with <code>add_family</code> at all. Just utilise <code>map</code> and <code>set</code>'s invariants.</p>\n\n<pre><code>void add_child(map&lt;string, set&lt;string&gt;&gt; &amp;family, const string &amp; family_name, const string &amp; child_name)\n{\n    family[family_name].insert(child_name);\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10259208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9315d79737b22c1028e7b71f7d2ac918?s=128&d=identicon&r=PG&f=1", "display_name": "\u0130brahim Soner Zorbak\u0131r", "link": "https://stackoverflow.com/users/10259208/%c4%b0brahim-soner-zorbak%c4%b1r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 53193309, "answer_count": 1, "score": -2, "last_activity_date": 1541606774, "creation_date": 1541600239, "last_edit_date": 1541600730, "question_id": 53191266, "link": "https://stackoverflow.com/questions/53191266/prevent-duplicates-in-a-vector", "title": "Prevent duplicates in a vector", "body": "<p>I'am trying to prevent adding duplicates on the function <code>add_child</code> but no success yet. Could you help me how to accomplish this? Thanks in advance.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;map&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nvoid add_family(map&lt;string, vector&lt;string&gt;&gt; &amp;family, \n                const string &amp;name)\n{\n    if (family.find(name) == family.end())\n    {\n        family.insert({name, vector&lt;string&gt;()});\n    }\n    else\n    {\n        cerr &lt;&lt; \"Error: Already has family &lt;\" &lt;&lt; name &lt;&lt; \"&gt;\" &lt;&lt; endl;\n    }\n}\n\nvoid add_child(map&lt;string, vector&lt;string&gt;&gt; &amp;family, const string \n               &amp;family_name, const string &amp;child_name)\n{\n    auto it = family.find(family_name);\n\n    if (it != family.cend())\n    {\n\n        it-&gt;second.push_back(child_name);\n    }\n    else\n    {\n        cerr &lt;&lt; \"Error: No family &lt;\" &lt;&lt; family_name &lt;&lt; \n                \"&gt; for child &lt;\" &lt;&lt; child_name &lt;&lt; \"&gt;\" &lt;&lt; std::endl;\n    }\n}\n\nint main(int argc, char const *argv[])\n{\n    map&lt;string, vector&lt;string&gt;&gt; family;\n    add_family(family, \"Family1\");\n    add_family(family, \"Family2\");\n    add_family(family, \"Family1\"); // Error\n\n    add_child(family, \"Family1\", \"Name1\");\n    add_child(family, \"Family1\", \"Name2\");\n    add_child(family, \"Family1\", \"Name3\");\n    add_child(family, \"Family1\", \"Name3\"); //will create duplicate\n    add_child(family, \"Family2\", \"Name1\");\n    add_child(family, \"Family2\", \"Name2\");\n    add_child(family, \"Family2\", \"Name3\");\n    add_child(family, \"Family3\", \"Name1\"); // Error\n\n    for (const auto &amp;f : family)\n        for (const auto &amp;name : f.second)\n            cout &lt;&lt; f.first &lt;&lt; \" \" &lt;&lt; name &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>Output of the program is;</p>\n\n<pre><code>Error: Already has family &lt;Family1&gt;\nError: No family &lt;Family3&gt; for child &lt;Name1&gt;\nFamily1 Name1\nFamily1 Name2\nFamily1 Name3\nFamily1 Name3\nFamily2 Name1\nFamily2 Name2\nFamily2 Name3\n</code></pre>\n"}, {"tags": ["c++", "qt", "clipboard", "copy-paste"], "answers": [{"comments": [{"owner": {"reputation": 82600, "user_id": 496445, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/db00d7b4388686c6d280e8f0578c7e39?s=128&d=identicon&r=PG", "display_name": "jdi", "link": "https://stackoverflow.com/users/496445/jdi"}, "edited": false, "score": 0, "creation_date": 1554436625, "post_id": 53191664, "comment_id": 97759721, "body": "One thing to be aware of is that the default context for the <code>QShortcut</code> is <code>Qt::WindowShortcut</code>, which can be a bit &quot;infectious&quot; and have surprising results when it picks up the copy operation when another widget has focus.  if the goal is to give the tree widget a copy override, you can use the <code>Qt::WidgetShortcut</code> instead"}], "tags": [], "owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "is_accepted": true, "score": 1, "last_activity_date": 1541601584, "creation_date": 1541601584, "answer_id": 53191664, "question_id": 53191267, "link": "https://stackoverflow.com/questions/53191267/overwrite-copy-text-operation-from-a-qtreewidget/53191664#53191664", "title": "Overwrite Copy Text operation from a QTreeWidget", "body": "<p>You can try the following approach to store your own stuff in clipboard without overriding <code>QWidget::keyPressEvent()</code>:</p>\n\n<pre><code>// Assuming tree widget already exists.\nauto shortcut = new QShortcut(QKeySequence(\"Ctrl+C\"), treeWidget);\nQObject::connect(shortcut, &amp;QShortcut::activated, [treeWidget] () {\n    auto selected = treeWidget-&gt;selectedItems();\n    // Get only first selected item's text.\n    if (selected.size() &gt; 0)\n    {\n        QClipboard *clipboard = QApplication::clipboard();\n        clipboard-&gt;setText(QString(\"Custom clipboard text: %1\").arg(selected.at(0)-&gt;text(0)));\n    }\n});\n</code></pre>\n\n<p>In the code I used <code>QShortcut</code> to handle <code>Ctrl+C</code> key sequence and store selected tree widget item's text (customized) into the clipboard.</p>\n"}], "owner": {"reputation": 285, "user_id": 1449839, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/WMr4c.jpg?s=128&g=1", "display_name": "Pedro Witzel", "link": "https://stackoverflow.com/users/1449839/pedro-witzel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "accepted_answer_id": 53191664, "answer_count": 1, "score": 0, "last_activity_date": 1541602289, "creation_date": 1541600238, "last_edit_date": 1541602289, "question_id": 53191267, "link": "https://stackoverflow.com/questions/53191267/overwrite-copy-text-operation-from-a-qtreewidget", "title": "Overwrite Copy Text operation from a QTreeWidget", "body": "<p>I have a <code>QTreeWidget</code> where I would to overwrite the Copy Text (ctrl+c) from the <code>QTreeWidgetItem</code>.</p>\n\n<p>The default behaviour is to copy the <code>text</code> from the selected column, but I'd like to update the values with more information that I have on the background.</p>\n\n<p>Is there a native way of doing it without capturing the <code>ctrl+c</code> with a <code>keyPressEvent</code> ?</p>\n"}, {"tags": ["c++", "file-io"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1541599974, "post_id": 53191135, "comment_id": 93271084, "body": "You should only be checking for failure after you&#39;ve read in all of the valid pins."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1541603802, "post_id": 53191135, "comment_id": 93273558, "body": "This doesn&#39;t address the question, but do you really need the extra stuff that <code>std::endl</code> does? <code>&#39;\\n&#39;</code> ends a line."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10618668, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Twk21s9q7fs/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAK-5zye_pZp-rcANDIXnYGVZ_-dw/mo/photo.jpg?sz=128", "display_name": "Chao Met", "link": "https://stackoverflow.com/users/10618668/chao-met"}, "edited": false, "score": 0, "creation_date": 1541600850, "post_id": 53191345, "comment_id": 93271592, "body": "What does it mean for &quot;All your code possible paths lead to break while loop in its first iteration.&quot;? I&#39;m sorry I couldn&#39;t understand."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 13, "user_id": 10618668, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Twk21s9q7fs/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAK-5zye_pZp-rcANDIXnYGVZ_-dw/mo/photo.jpg?sz=128", "display_name": "Chao Met", "link": "https://stackoverflow.com/users/10618668/chao-met"}, "edited": false, "score": 0, "creation_date": 1541601132, "post_id": 53191345, "comment_id": 93271750, "body": "@ChaoMet do you know what is the meaning of <code>break</code> ? Why did you put it in your code? not sure, but maybe you want to replace some of them with <code>continue</code>"}, {"owner": {"reputation": 1140, "user_id": 9252020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PDrj2.jpg?s=128&g=1", "display_name": "Rhathin", "link": "https://stackoverflow.com/users/9252020/rhathin"}, "reply_to_user": {"reputation": 13, "user_id": 10618668, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Twk21s9q7fs/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAK-5zye_pZp-rcANDIXnYGVZ_-dw/mo/photo.jpg?sz=128", "display_name": "Chao Met", "link": "https://stackoverflow.com/users/10618668/chao-met"}, "edited": false, "score": 0, "creation_date": 1541601210, "post_id": 53191345, "comment_id": 93271807, "body": "@ChaoMet it means, that no matter what will happen (user provides correct or wrong PIN for first time or later), your code will always reach <code>break</code> statement which will end your <code>while</code> loop in its first iteration."}, {"owner": {"reputation": 13, "user_id": 10618668, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Twk21s9q7fs/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAK-5zye_pZp-rcANDIXnYGVZ_-dw/mo/photo.jpg?sz=128", "display_name": "Chao Met", "link": "https://stackoverflow.com/users/10618668/chao-met"}, "edited": false, "score": 0, "creation_date": 1541601874, "post_id": 53191345, "comment_id": 93272198, "body": "cout &lt;&lt; &quot;The PIN you have entered has no match.&quot; &lt;&lt;endl &lt;&lt;endl;          cout &lt;&lt; &quot;Please try again later. Thank you.&quot; &lt;&lt; endl &lt;&lt; endl;         cout &lt;&lt; &quot;Exiting IVM......&quot; &lt;&lt; endl;         system(&quot;pause&quot;);         break;  for this part i use break to end the loop and end the program"}, {"owner": {"reputation": 13, "user_id": 10618668, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Twk21s9q7fs/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAK-5zye_pZp-rcANDIXnYGVZ_-dw/mo/photo.jpg?sz=128", "display_name": "Chao Met", "link": "https://stackoverflow.com/users/10618668/chao-met"}, "edited": false, "score": 0, "creation_date": 1541602473, "post_id": 53191345, "comment_id": 93272595, "body": "@Rhathin which break should i removed?"}, {"owner": {"reputation": 1140, "user_id": 9252020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PDrj2.jpg?s=128&g=1", "display_name": "Rhathin", "link": "https://stackoverflow.com/users/9252020/rhathin"}, "reply_to_user": {"reputation": 13, "user_id": 10618668, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Twk21s9q7fs/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAK-5zye_pZp-rcANDIXnYGVZ_-dw/mo/photo.jpg?sz=128", "display_name": "Chao Met", "link": "https://stackoverflow.com/users/10618668/chao-met"}, "edited": false, "score": 0, "creation_date": 1541602624, "post_id": 53191345, "comment_id": 93272698, "body": "@ChaoMet I&#39;ve added example solution"}, {"owner": {"reputation": 13, "user_id": 10618668, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Twk21s9q7fs/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAK-5zye_pZp-rcANDIXnYGVZ_-dw/mo/photo.jpg?sz=128", "display_name": "Chao Met", "link": "https://stackoverflow.com/users/10618668/chao-met"}, "edited": false, "score": 0, "creation_date": 1541603702, "post_id": 53191345, "comment_id": 93273496, "body": "@Rhathin thank you very much! the solution really helps me a lot! i should have work on my basic of c++. Thank you :D"}, {"owner": {"reputation": 13, "user_id": 10618668, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Twk21s9q7fs/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAK-5zye_pZp-rcANDIXnYGVZ_-dw/mo/photo.jpg?sz=128", "display_name": "Chao Met", "link": "https://stackoverflow.com/users/10618668/chao-met"}, "edited": false, "score": 0, "creation_date": 1541659305, "post_id": 53191345, "comment_id": 93293451, "body": "@Rhathin i used your solution. When i insert the wrong PIN, then i was given the first attempt, at this time i insert the right PIN, it shows wrong PIN option. Why is this happening?"}, {"owner": {"reputation": 1140, "user_id": 9252020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PDrj2.jpg?s=128&g=1", "display_name": "Rhathin", "link": "https://stackoverflow.com/users/9252020/rhathin"}, "reply_to_user": {"reputation": 13, "user_id": 10618668, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Twk21s9q7fs/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAK-5zye_pZp-rcANDIXnYGVZ_-dw/mo/photo.jpg?sz=128", "display_name": "Chao Met", "link": "https://stackoverflow.com/users/10618668/chao-met"}, "edited": false, "score": 0, "creation_date": 1541665977, "post_id": 53191345, "comment_id": 93296006, "body": "@ChaoMet Make sure  that: 1. You set <code>logged</code> flag once your <code>pin</code> is correct. 2. On each login attempt you start reading file from beginning."}, {"owner": {"reputation": 13, "user_id": 10618668, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Twk21s9q7fs/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAK-5zye_pZp-rcANDIXnYGVZ_-dw/mo/photo.jpg?sz=128", "display_name": "Chao Met", "link": "https://stackoverflow.com/users/10618668/chao-met"}, "edited": false, "score": 0, "creation_date": 1541680570, "post_id": 53191345, "comment_id": 93303706, "body": "@Rhathin Thank you so much!! :D"}], "tags": [], "owner": {"reputation": 1140, "user_id": 9252020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PDrj2.jpg?s=128&g=1", "display_name": "Rhathin", "link": "https://stackoverflow.com/users/9252020/rhathin"}, "is_accepted": true, "score": 1, "last_activity_date": 1541602580, "last_edit_date": 1541602580, "creation_date": 1541600553, "answer_id": 53191345, "question_id": 53191135, "link": "https://stackoverflow.com/questions/53191135/why-it-can-only-read-the-first-line/53191345#53191345", "title": "Why it can only read the first line?", "body": "<p>Answer is simple: All your code possible paths lead to break <code>while</code> loop in its first iteration, so it won't read more than just fist line from <code>input</code>.</p>\n\n<p>Also, because of above, inside your <code>else if (userpin != pin)</code>, your <code>for</code> loop will always check for the same <code>pin</code>.</p>\n\n<p>Example solution:</p>\n\n<pre><code>int loginAttempts = 0;\nwhile (loginAttempts &lt; 3)\n{\n    //Prepare file to reading\n    bool logged = false;\n    if (input.is_open())\n    {\n        while (input &gt;&gt; pin)\n        {\n            if (userpin == pin)\n            {\n                //Handle successful login attempt\n                logged = true;\n                break;\n            }\n        }\n    }\n    else\n    {\n        //Handle file openning failure\n    }\n    if(logged) break;\n    //Handle unsuccessful login attempt\n    loginAttempts++;\n}\nif(loginAttempts == 3)\n{\n    //Handle unsuccessful login\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10618668, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Twk21s9q7fs/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAK-5zye_pZp-rcANDIXnYGVZ_-dw/mo/photo.jpg?sz=128", "display_name": "Chao Met", "link": "https://stackoverflow.com/users/10618668/chao-met"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 53191345, "answer_count": 1, "score": 0, "last_activity_date": 1541659844, "creation_date": 1541599839, "last_edit_date": 1541659844, "question_id": 53191135, "link": "https://stackoverflow.com/questions/53191135/why-it-can-only-read-the-first-line", "title": "Why it can only read the first line?", "body": "<p>I'm a beginner of C++. This is a part of the assignment at school. \nThis is the login part.</p>\n\n<p>I need to read the PIN from an external file which consist of many users's PIN in it. </p>\n\n<p>I need to compare the pin which user just typed in with the pin stored in file. If the pin is matched, then the user is successfully login. If not then the user has 2 more attempts to type in the PIN again.</p>\n\n<p>The problem I'm facing now is I can't read the data from the other lines except the first line. </p>\n\n<p>When I typed in the PIN of other lines which are correct, the program will always show me wrong PIN. Only if I typed in the first line, it will just show correct PIN.</p>\n\n<p>Please help me to find out the problem. Thank you.</p>\n\n<p>069906</p>\n\n<p>777329</p>\n\n<p>143003</p>\n\n<p>069021</p>\n\n<pre><code>void olduser ()\n{\nint userpin,a;\ncout &lt;&lt; \"*************************************************************\" &lt;&lt; \nendl &lt;&lt; endl;\ninput.open(\"userdata.txt\");\ncout &lt;&lt; \"Please enter your PIN.\" &lt;&lt; endl;\ncin&gt;&gt;userpin;\n\nif(input.is_open())\n    {   \n    while(input &gt;&gt; pin) \n    {\n\n     if(userpin == pin) //compare the pin typed in with the pin in file\n        {   \n        cout &lt;&lt; \"You have entered the correct PIN.\" &lt;&lt; endl &lt;&lt;endl;\n        cout &lt;&lt; \"You have successfully login.\" &lt;&lt; endl &lt;&lt;endl;\n        cout &lt;&lt; \"Redirecting......\" &lt;&lt; endl;\n        system(\"pause\");\n        break;\n            }\n    else if (userpin != pin)\n        {\n         for(a=1;a&lt;=2;a++)\n          { \n           cout &lt;&lt; \"You have entered the wrong PIN.\" &lt;&lt; endl;\n           cout &lt;&lt; \"Please try again.\" &lt;&lt; endl;\n           cin &gt;&gt; userpin;\n\n           if(userpin == pin)\n           {    \n             cout &lt;&lt; \"You have entered the correct PIN.\" &lt;&lt; endl &lt;&lt;endl;\n             cout &lt;&lt; \"You have successfully login.\" &lt;&lt; endl &lt;&lt;endl;\n             cout &lt;&lt; \"Redirecting......\" &lt;&lt; endl;\n             system(\"pause\");\n             break;\n             }\n\n            }           \n        system(\"cls\");\n        cout &lt;&lt; \"The PIN you have entered has no match.\" &lt;&lt;endl &lt;&lt;endl; \n        cout &lt;&lt; \"Please try again later. Thank you.\" &lt;&lt; endl &lt;&lt; endl;\n        cout &lt;&lt; \"Exiting IVM......\" &lt;&lt; endl;\n        system(\"pause\");\n        break;                      \n        }   \n        }\n        }\n   else\n    {\n        cout &lt;&lt; \"Unable to open file.\" &lt;&lt; endl;\n\n     }  \n\n    }\n</code></pre>\n\n<hr>\n\n<pre><code>int attempts = 0;\n   while (attempts &lt; 3)\n   {\n    bool logged = false;\n    if (input.is_open())\n    {\n        while (input &gt;&gt; pin)\n         {\n            if (userpin == pin)\n            {\n            //if the PIN is found in the external file\n\n            cout &lt;&lt; \"You have successfully login.\" &lt;&lt; endl &lt;&lt; endl;\n            cout &lt;&lt; \"Redirecting to main menu......\" &lt;&lt; endl;\n            system(\"pause\");\n            logged = true;\n            mainmenu();\n            }\n        }\n    }\n   else\n   {\n    //If the external file cannot be opened\n    cout &lt;&lt; \"Unable to open file.\" &lt;&lt; endl;\n    break;\n   }\n     if(logged) break; \n     {\n    //if the PIN is not found in the external file\n   cout &lt;&lt;\"The PIN is not matched. Please try again.\" &lt;&lt; endl;\n   cin&gt;&gt;userpin;\n   }\n    attempts++;\n    }\n   if(attempts == 3)\n   {\n   //the login is unsuccessful after using up 2 attempts\n    cout &lt;&lt;\"Your PIN is not matched. Please try again next time.\" &lt;&lt;endl \n   &lt;&lt; endl;\n    }\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "callback"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1541599334, "post_id": 53190974, "comment_id": 93270721, "body": "Can you show how you are doing the threading?  If you are using <code>std::thread</code> you just need to call <code>join</code> to wait for it to finish."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1541599349, "post_id": 53190974, "comment_id": 93270731, "body": "You need to read a tutorial on threads, as even a pretty bad one should have told you what to do to wait for threads to finish."}, {"owner": {"reputation": 67, "user_id": 10540603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11e8fd8b7b781a30221870fca5472ea?s=128&d=identicon&r=PG&f=1", "display_name": "T.N.", "link": "https://stackoverflow.com/users/10540603/t-n"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541599413, "post_id": 53190974, "comment_id": 93270770, "body": "@NathanOliver the thread gets created from within a .NET SDK."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541599419, "post_id": 53190974, "comment_id": 93270778, "body": "@NathanOliver Considering that the OP mentions VS2010, then probably not <code>std::thread</code>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1541599491, "post_id": 53190974, "comment_id": 93270825, "body": "@T.N. Please read about <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>, as well as <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>. Lastly learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>. How do you create your thread? Are you really programming in C++/CLI? What APIs are you using?"}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1541599734, "post_id": 53190974, "comment_id": 93270963, "body": "What does the comment, &quot;Executed on another thread&quot; mean? You&#39;re asking a question about a thread, but there&#39;s no code in your example that creates or even refers to a thread."}, {"owner": {"reputation": 67, "user_id": 10540603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11e8fd8b7b781a30221870fca5472ea?s=128&d=identicon&r=PG&f=1", "display_name": "T.N.", "link": "https://stackoverflow.com/users/10540603/t-n"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1541599753, "post_id": 53190974, "comment_id": 93270974, "body": "@Someprogrammerdude I am not creating the thread myself, rather then a SDK. I use a C++/CLI Wrapper to communicate between native C++ Code and .NET Code. The native C++ code starts DoStuff() which in .NET creates a new thread (I have no access to the actuall .NET Code) to execute it. Then, when DoStuff() is finished, its Callback DoStuffCallback() gets executed in the newly created thread. And I need to wait for DoStuffCallback() to get executed in my native C++ code. Perhaps that helps to understand my problem..."}, {"owner": {"reputation": 67, "user_id": 10540603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11e8fd8b7b781a30221870fca5472ea?s=128&d=identicon&r=PG&f=1", "display_name": "T.N.", "link": "https://stackoverflow.com/users/10540603/t-n"}, "reply_to_user": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1541599973, "post_id": 53190974, "comment_id": 93271083, "body": "@SolomonSlow as I said, I have no access to the .NET/C# Code that creates the thread."}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1541600267, "post_id": 53190974, "comment_id": 93271252, "body": "I would use a <i><a href=\"https://stackoverflow.com/a/4793662/801894\">Semaphore</a></i>. I would make the callback function signal the semaphore, and I would make the <code>main()</code> function await it."}, {"owner": {"reputation": 67, "user_id": 10540603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11e8fd8b7b781a30221870fca5472ea?s=128&d=identicon&r=PG&f=1", "display_name": "T.N.", "link": "https://stackoverflow.com/users/10540603/t-n"}, "edited": false, "score": 0, "creation_date": 1541601097, "post_id": 53190974, "comment_id": 93271724, "body": "But they are using std::mutex and condition_variable which I don&#39;t have access to."}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1541603310, "post_id": 53190974, "comment_id": 93273229, "body": "If your toolchain does not include the complete C++ standard library, then your options are (a) upgrade to a more modern toolchain, (b) install <a href=\"https://www.boost.org/\" rel=\"nofollow noreferrer\">boost</a>, and use <code>boost::mutex</code>, etc., or (c) use platform-specific system calls.  You haven&#39;t named the target platform."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 10540603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11e8fd8b7b781a30221870fca5472ea?s=128&d=identicon&r=PG&f=1", "display_name": "T.N.", "link": "https://stackoverflow.com/users/10540603/t-n"}, "edited": false, "score": 1, "creation_date": 1541601872, "post_id": 53191703, "comment_id": 93272196, "body": "I dont know how many times I have to repeat myself. I have no access to the C++ 11 compiler, because I am using VS2010."}, {"owner": {"reputation": 998, "user_id": 10580040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bec8cefe966232b42a818c5b46062c0a?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/10580040/peter"}, "reply_to_user": {"reputation": 67, "user_id": 10540603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11e8fd8b7b781a30221870fca5472ea?s=128&d=identicon&r=PG&f=1", "display_name": "T.N.", "link": "https://stackoverflow.com/users/10540603/t-n"}, "edited": false, "score": 0, "creation_date": 1541603841, "post_id": 53191703, "comment_id": 93273586, "body": "I&#39;m Sorry. I guess you are using windows. In this case you can create an event with <code>::CreateEvent</code> method and set this event with <code>::SetEvent</code> method when the callback is called. On the main thread you can wait for the event with <code>::WaitForSingleObject</code>"}, {"owner": {"reputation": 998, "user_id": 10580040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bec8cefe966232b42a818c5b46062c0a?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/10580040/peter"}, "reply_to_user": {"reputation": 67, "user_id": 10540603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11e8fd8b7b781a30221870fca5472ea?s=128&d=identicon&r=PG&f=1", "display_name": "T.N.", "link": "https://stackoverflow.com/users/10540603/t-n"}, "edited": false, "score": 0, "creation_date": 1541604904, "post_id": 53191703, "comment_id": 93274307, "body": "I&#39;ve modified my answer from the C++11 solution to the windows-event stuff"}], "tags": [], "owner": {"reputation": 998, "user_id": 10580040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bec8cefe966232b42a818c5b46062c0a?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/10580040/peter"}, "is_accepted": true, "score": 3, "last_activity_date": 1541604923, "last_edit_date": 1541604923, "creation_date": 1541601729, "answer_id": 53191703, "question_id": 53190974, "link": "https://stackoverflow.com/questions/53190974/c-how-to-wait-for-a-method-that-gets-executed-on-another-thread-then-the-main/53191703#53191703", "title": "C++ how to wait for a method that gets executed on another thread then the main thread to finish (VS2010)", "body": "<p>With Win32 Event</p>\n\n<pre><code>#include &lt;windows.h&gt;\n\nint main()\n{\n    HANDLE handle = ::CreateEvent(NULL, TRUE, FALSE, NULL);\n\n    Something s;\n    s.DoStuff(handle); // Store the event handle and run tasks on another thread\n\n    // Wait for the event on the main thread\n    ::WaitForSingleObject(handle, INFINITE);\n}\n\nvoid Something::DoStuffCallback()\n{\n    // DoStuff has finished work\n    ::SetEvent(m_handle);\n}\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 10540603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11e8fd8b7b781a30221870fca5472ea?s=128&d=identicon&r=PG&f=1", "display_name": "T.N.", "link": "https://stackoverflow.com/users/10540603/t-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 53191703, "answer_count": 1, "score": 1, "last_activity_date": 1541604923, "creation_date": 1541599220, "last_edit_date": 1541599851, "question_id": 53190974, "link": "https://stackoverflow.com/questions/53190974/c-how-to-wait-for-a-method-that-gets-executed-on-another-thread-then-the-main", "title": "C++ how to wait for a method that gets executed on another thread then the main thread to finish (VS2010)", "body": "<p>I have a method which gets executed on another thread then the main thread. If it finishes, it calls a callback. But the main thread has to wait, otherwise it destroys the object where the callback wants to return.</p>\n\n<p>Now, for simplicity, I have the following code:</p>\n\n<pre><code>int main()\n{\n    Something* s = new Something();\n    s.DoStuff(); // Executed on another thread\n    delete (s); // Has to wait for DoStuffCallback() to be executed\n}\n\nvoid Something::DoStuff()\n{\n    // Does stuff\n    // If done, calls its callback\n}\nvoid Something::DoStuffCallback()\n{\n    // DoStuff has finished work\n}\n</code></pre>\n\n<p>How can I wait until DoStuffCallback() got executed and then continue with the main thread?</p>\n\n<p>Thanks a lot!</p>\n\n<p>Edit:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/27652939/best-way-for-waiting-for-callback-to-finish\">This</a> does not work for me, since I have not access to the right compiler. (I have as mentioned VS2010)</p>\n"}, {"tags": ["c++", "clang", "include-path", "macos-mojave", "vcpkg"], "answers": [{"comments": [{"owner": {"reputation": 2161, "user_id": 1390035, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f1aa41b417d7fb6398f18864fe23f736?s=128&d=identicon&r=PG", "display_name": "Dave Chambers", "link": "https://stackoverflow.com/users/1390035/dave-chambers"}, "edited": false, "score": 0, "creation_date": 1541620459, "post_id": 53196518, "comment_id": 93282177, "body": "Did you mean this: <code>&quot;args&quot;: [                 &quot;~&#47;vcpkg&#47;installed&#47;x64-osx&#47;include&quot;,                 &quot;test.cpp&quot;             ],</code>?  Still doesn&#39;t work"}, {"owner": {"reputation": 486, "user_id": 5871543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcb0a345c0a3e5f068b2c253325b3600?s=128&d=identicon&r=PG&f=1", "display_name": "roschuma", "link": "https://stackoverflow.com/users/5871543/roschuma"}, "reply_to_user": {"reputation": 2161, "user_id": 1390035, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f1aa41b417d7fb6398f18864fe23f736?s=128&d=identicon&r=PG", "display_name": "Dave Chambers", "link": "https://stackoverflow.com/users/1390035/dave-chambers"}, "edited": false, "score": 0, "creation_date": 1541664439, "post_id": 53196518, "comment_id": 93295376, "body": "You&#39;ll need to also add <code>-I</code>; so something like <code>&quot;-I~&#47;vcpkg&#47;installed&#47;x64-osx&#47;include&quot;</code>"}], "tags": [], "owner": {"reputation": 486, "user_id": 5871543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcb0a345c0a3e5f068b2c253325b3600?s=128&d=identicon&r=PG&f=1", "display_name": "roschuma", "link": "https://stackoverflow.com/users/5871543/roschuma"}, "is_accepted": true, "score": 0, "last_activity_date": 1541619114, "creation_date": 1541619114, "answer_id": 53196518, "question_id": 53190971, "link": "https://stackoverflow.com/questions/53190971/vcpkg-fatal-error-muparser-h-file-not-found-even-though-the-file-exists/53196518#53196518", "title": "vcpkg fatal error: &#39;muParser.h&#39; file not found even though the file exists", "body": "<p>This is a discrepancy between the intellisense engine running in VSCode (which powers the squiggles) and your actual compilation command line (which powers the compile errors) :)</p>\n\n<p>Specifically, you'll need to add <code>\"-I${vcpkgRoot}/x64-osx/include\"</code> to the list of g++ arguments in the second file.</p>\n"}], "owner": {"reputation": 2161, "user_id": 1390035, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f1aa41b417d7fb6398f18864fe23f736?s=128&d=identicon&r=PG", "display_name": "Dave Chambers", "link": "https://stackoverflow.com/users/1390035/dave-chambers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 53196518, "answer_count": 1, "score": 0, "last_activity_date": 1541762152, "creation_date": 1541599201, "last_edit_date": 1541762152, "question_id": 53190971, "link": "https://stackoverflow.com/questions/53190971/vcpkg-fatal-error-muparser-h-file-not-found-even-though-the-file-exists", "title": "vcpkg fatal error: &#39;muParser.h&#39; file not found even though the file exists", "body": "<p>I have <code>OS X Mojave</code>.</p>\n\n<p>I'm trying out <a href=\"https://github.com/Microsoft/vcpkg\" rel=\"nofollow noreferrer\">vcpkg</a> and even though I installed <code>muParser</code> and it exists at <code>\u200e\u2068Macintosh HD\u2069 \u25b8 \u2068Users\u2069 \u25b8 \u2068dchambers\u2069 \u25b8 \u2068vcpkg\u2069 \u25b8 \u2068installed\u2069 \u25b8 \u2068x64-osx\u2069 \u25b8 \u2068include\u2069</code> AND I get no red underlining on <code>#include \"muParser.h\"</code> but DO on a deliberate typo such as <code>#include \"muParserX.h\"</code> I get the error:</p>\n\n<p><code>test.cpp:2:10: fatal error: 'muParser.h' file not found</code>\n<code>include \"muParser.h\"</code></p>\n\n<p>...when I try to build.</p>\n\n<p>As a test, I included a header <code>#include \"gmp.h\"</code> from the 'normal' path: <code>/usr/local/Cellar/gmp/6.1.2_2/include/gmp.h</code> (actually an alias from <code>usr/local/include</code>) and all is fine for that.</p>\n\n<p>Here's my <code>Visual Studio Code</code> setup and the file:</p>\n\n<p>test.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"muParser.h\"\n#include \"gmp.h\"\n\nint main(int argc, const char * argv[]) {\n// insert code here...\nstd::cout &lt;&lt; \"Hello, World!\\n\";\n\nreturn 0;\n}\n</code></pre>\n\n<p>c_cpp_properties.json:</p>\n\n<pre><code>{\n\"configurations\": [\n    {\n        \"name\": \"Mac\",\n        \"includePath\": [\n            \"${workspaceFolder}/**\",\n            \"${vcpkgRoot}/x64-osx/include\"\n        ],\n        \"defines\": [],\n        \"macFrameworkPath\": [\n            \"/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.14.sdk/System/Library/Frameworks\"\n        ],\n        \"compilerPath\": \"/usr/bin/clang\",\n        \"cStandard\": \"c11\",\n        \"cppStandard\": \"c++17\",\n        \"intelliSenseMode\": \"clang-x64\"\n    }\n],\n\"version\": 4\n}\n</code></pre>\n\n<p>tasks.json:</p>\n\n<pre><code>{\n// See https://go.microsoft.com/fwlink/?LinkId=733558\n// for the documentation about the tasks.json format\n\"version\": \"2.0.0\",\n\"tasks\": [\n    {\n        \"label\": \"echo\",\n        \"type\": \"shell\",\n        \"command\": \"g++\",\n        \"args\": [\n            \"test.cpp\"\n        ],\n        \"group\": {\n            \"kind\": \"build\",\n            \"isDefault\": true\n        }\n    }\n]\n}\n</code></pre>\n\n<p>Any ideas?</p>\n\n<p><strong>UPDATE</strong>:</p>\n\n<p>This is a problem with <code>Visual Studio Code</code>, described <a href=\"https://stackoverflow.com/q/53209218/1390035\">here</a>.</p>\n\n<p>From the command line, the following works fine, telling the command where the libs are:</p>\n\n<p><code>g++ -I ~/vcpkg/installed/x64-osx/include/ test.cpp</code>.  Thanks to roschuma for his answer.</p>\n"}, {"tags": ["c++", "c", "pthreads"], "comments": [{"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 2, "creation_date": 1541598639, "post_id": 53190760, "comment_id": 93270350, "body": "If you call a function within a thread everything the function does is also within the thread. Is that what you&#39;re asking?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1541598657, "post_id": 53190760, "comment_id": 93270369, "body": "I&#39;m not sure what you are asking. But if you are asking whether or not it&#39;s safe to try to lock a mutex from multiple threads then my response would be that I don&#39;t see how a mutex could be useful if you couldn&#39;t try to lock it from multiple threads."}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "edited": false, "score": 0, "creation_date": 1541598794, "post_id": 53190760, "comment_id": 93270426, "body": "Provide some code - to show the problem. Because taking what you are asking from the current wording -  the answers are already in comments"}, {"owner": {"reputation": 153, "user_id": 7452686, "user_type": "registered", "profile_image": "https://graph.facebook.com/1404472329603931/picture?type=large", "display_name": "Jake McLaughlin", "link": "https://stackoverflow.com/users/7452686/jake-mclaughlin"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1541598849, "post_id": 53190760, "comment_id": 93270458, "body": "@Kevin yeah basically thankyou"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541598859, "post_id": 53190760, "comment_id": 93270461, "body": "Yes, mutexs protect against data races.  A code example could let use know if you are using it correctly."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1541601395, "post_id": 53190760, "comment_id": 93271900, "body": "&quot;will it act accordingly?&quot; ... what do you think is &quot;accordingly&quot; ?"}, {"owner": {"reputation": 17562, "user_id": 568635, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25f0758867b3f251cfdf101b9611b9b5?s=128&d=identicon&r=PG", "display_name": "Eelke", "link": "https://stackoverflow.com/users/568635/eelke"}, "edited": false, "score": 0, "creation_date": 1541836471, "post_id": 53190760, "comment_id": 93360232, "body": "I have the feeling you think code that is running within a thread you have started is different from other code. However all code is running within a thread. Only the first thread that call&#39;s your main is created for you by the OS so it can start executing your program. So yes regardless from where you call lock_thread() it will work the same."}], "owner": {"reputation": 153, "user_id": 7452686, "user_type": "registered", "profile_image": "https://graph.facebook.com/1404472329603931/picture?type=large", "display_name": "Jake McLaughlin", "link": "https://stackoverflow.com/users/7452686/jake-mclaughlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1541846992, "creation_date": 1541598468, "last_edit_date": 1541624989, "question_id": 53190760, "link": "https://stackoverflow.com/questions/53190760/will-mutex-locking-outside-the-thread-function-still-lock-the-thread", "title": "Will mutex locking outside the thread function still lock the thread?", "body": "<p>I was wondering if I have a mutex lock variable shared by multiple classes, and within a thread I call a method on an object and I lock the mutex variable within that method will it act accordingly?</p>\n\n<p>I have the following header included in all files in my project so that I can use the mutex lock globally</p>\n\n<pre><code>#ifndef THREADS\n#define THREADS\n#include &lt;pthread.h&gt;\nextern pthread_mutex_t lock;\n#define lock_thread() pthread_mutex_lock(&amp;lock);\n#define unlock_thread() pthread_mutex_unlock(&amp;lock);\n#endif\n</code></pre>\n\n<p>So within my thread function I can lock and unlock when accessing critical sections:</p>\n\n<pre><code>lock_thread();\nuser = create_user(username, password, ID++, license_num, preg, disability, vehicle_type);\nunlock_thread();\n</code></pre>\n\n<p>Now after I create a user the user can access specific \"Actions\" that they have permissions for. Each Action is its own class with a \"perform\" method.</p>\n\n<p>For example:</p>\n\n<pre><code>Action newaction;\nnewaction.perform(socket, user.getID);\n</code></pre>\n\n<p>I pass in the socket for the current thread and users ID since it will interact with the database. Now if I choose to perform a \"lock_thread()\" within a perform method will it perform similarly to locking it within the thread function itself?</p>\n"}, {"tags": ["c++", "openmp"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1541598496, "post_id": 53190701, "comment_id": 93270260, "body": "<code>#pragma omp critical</code>?"}, {"owner": {"reputation": 1216, "user_id": 2213309, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1V1xj.jpg?s=128&g=1", "display_name": "flappix", "link": "https://stackoverflow.com/users/2213309/flappix"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1541598678, "post_id": 53190701, "comment_id": 93270376, "body": "Yeah but this will slow down the whole process a lot, right?"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1541598883, "post_id": 53190701, "comment_id": 93270471, "body": "But it will also correct it a lot."}], "answers": [{"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 3, "last_activity_date": 1541598999, "last_edit_date": 1541598999, "creation_date": 1541598686, "answer_id": 53190827, "question_id": 53190701, "link": "https://stackoverflow.com/questions/53190701/openmp-store-results-in-vector/53190827#53190827", "title": "OpenMP - store results in vector", "body": "<p><strong>Option 1:</strong> If each iteration takes a significant amount of time before adding the element to the vector, you can keep the <code>push_back</code> in a critical region:</p>\n\n<pre><code>for (int i=0; i&lt;n; i++)\n{\n    // not every iteration produces a result\n    if (condition)\n    {\n#pragma omp critical\n        results.push_back (result_value);\n    }\n}\n</code></pre>\n\n<p>If threads are mostly busy with other things than the <code>push_back</code>, there will be little overhead from the critical region.</p>\n\n<p><strong>Option 2:</strong> If iterations are too cheap compared to the synchronization overhead, you can have each vector fill a thread-private array and then merge them at the end:</p>\n\n<p>There is a good duplicate for this <a href=\"https://stackoverflow.com/questions/24765180/parallelizing-a-for-loop-using-openmp-replacing-push-back\">here</a> and <a href=\"https://stackoverflow.com/a/18671256\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 976, "user_id": 3565017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8ca9b87bfc80f0428240ea6b8c0b5be?s=128&d=identicon&r=PG&f=1", "display_name": "L.C.", "link": "https://stackoverflow.com/users/3565017/l-c"}, "is_accepted": true, "score": 1, "last_activity_date": 1541601824, "creation_date": 1541601824, "answer_id": 53191728, "question_id": 53190701, "link": "https://stackoverflow.com/questions/53190701/openmp-store-results-in-vector/53191728#53191728", "title": "OpenMP - store results in vector", "body": "<p>The \"naive\" way:\nYou can init several vectors (call omp_get_max_threads() to know the thread count inside the current parallel region) then call omp_get_thread_num() inside the parallel region to know the current thread ID, and let each thread write into its vector. \nThen outside the parallel region merge the vectors together. This can be worth it or not, depending on how \"heavy\" your processing is compared to the time required to merge the vectors. </p>\n\n<p>If you know the maximum final size of the vector, you can reserve it before processing (so that push_back calls won't resize the vector and you gain processing time) then call the push_back method from inside a critical section (#pragma omp critical), but critical sections are horribly slow so it's worth it only if the processing you do inside the loop is time consuming. In your case the \"processing\" looks to be only checking the if-clause, so it's probably not worth it.</p>\n\n<p>Finally, it's a quite known problem. You should read this for more detailed information:\n<a href=\"https://stackoverflow.com/questions/18669296/c-openmp-parallel-for-loop-alternatives-to-stdvector\">C++ OpenMP Parallel For Loop - Alternatives to std::vector</a></p>\n"}], "owner": {"reputation": 1216, "user_id": 2213309, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1V1xj.jpg?s=128&g=1", "display_name": "flappix", "link": "https://stackoverflow.com/users/2213309/flappix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 0, "closed_date": 1541600405, "accepted_answer_id": 53191728, "answer_count": 2, "score": 0, "last_activity_date": 1541601824, "creation_date": 1541598297, "last_edit_date": 1541598546, "question_id": 53190701, "link": "https://stackoverflow.com/questions/53190701/openmp-store-results-in-vector", "closed_reason": "Duplicate", "title": "OpenMP - store results in vector", "body": "<p>I want to parallelize a for loop with many iterations using OpenPM. The results should be stored in a vector.</p>\n\n<pre><code>for (int i=0; i&lt;n; i++)\n{\n    // not every iteration produces a result\n    if (condition)\n    {\n        results.push_back (result_value);\n    }\n}\n</code></pre>\n\n<p>This the does not work properly with the <code>#pragma omp parallel for</code>.  </p>\n\n<p>So what's the best practice to achieve  that?<br>\nIs it somehow possible use a separate results vector for each thread and then combining all result vectors at the end? The ordering of the results is not important.</p>\n\n<p>Something like that is <strong>not</strong> practical because it consumes to much space</p>\n\n<pre><code>int *results = new int[n];\nfor (int i=0; i&lt;n; i++)\n{\n    // not every iteration produces a result\n    if (condition)\n    {\n        results[i] = result_value;\n    }\n}\n\n// remove all unused slots in results array\n</code></pre>\n"}, {"tags": ["c++", "enums"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1541598119, "post_id": 53190584, "comment_id": 93270018, "body": "So it&#39;s really about taking a value of some integral type and seeing whether it&#39;s within the range of some other integral type. Not fundamentally about enums. Perhaps <a href=\"https://codereview.stackexchange.com/q/5515/2503\">codereview.stackexchange.com/q/5515/2503</a>?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1541598148, "post_id": 53190584, "comment_id": 93270031, "body": "Unless by &quot;valid value&quot; you mean &quot;enumerated value&quot;? (Because all <code>int</code>s are valid for the <code>my_enum_class</code> shown above)"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1541598196, "post_id": 53190584, "comment_id": 93270062, "body": "This is nice question. In practice, I would&#39;ve cheated using X macros somehow. (With this, I could even make a <code>switch()</code> where every enum value is a case to check and with this make a check at program start which is as near as good as a compile time check.) But, may be, it&#39;s a chance to learn to do this better..."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1541598303, "post_id": 53190584, "comment_id": 93270140, "body": "related/dupe: <a href=\"https://stackoverflow.com/questions/4969233/how-to-check-if-enum-value-is-valid\" title=\"how to check if enum value is valid\">stackoverflow.com/questions/4969233/&hellip;</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1541598460, "post_id": 53190584, "comment_id": 93270238, "body": "Your biggest problem you are going to have is any value that is within the values provided in the enum will be valid, even if it doesn&#39;t actually map to an enum value.  This needs reflection which we don&#39;t have so you have to build the map yourself."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1541598482, "post_id": 53190584, "comment_id": 93270251, "body": "@LightnessRacesinOrbit: I did mean &quot;enumerated value&quot;, see edit. &quot;valid&quot; is a word with many interpretations."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541598496, "post_id": 53190584, "comment_id": 93270261, "body": "@NathanOliver: See edit"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1541598584, "post_id": 53190584, "comment_id": 93270311, "body": "Problem is, IIRC, that <i>any</i> <code>int</code> is a valid enum value. The enumerators are just the names of <i>specific</i> ones."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1541598605, "post_id": 53190584, "comment_id": 93270327, "body": "@StoryTeller: See edit..."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541598607, "post_id": 53190584, "comment_id": 93270329, "body": "@einpoklum See my second comment."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1541598644, "post_id": 53190584, "comment_id": 93270355, "body": "@einpoklum - Your edit doesn&#39;t affect my comment. Just <code>s&#47;int&#47;I&#47;</code>"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1541598662, "post_id": 53190584, "comment_id": 93270372, "body": "@NathanOliver: So your answer is &quot;Not at the moment, but possibly in the future with static reflection that&#39;s under committee discussion&quot;?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541598775, "post_id": 53190584, "comment_id": 93270418, "body": "@einpoklum Yes.  There might be a library you could use to get this right now but it isn&#39;t provided by the standard.  All the standard talks about is if the value is valid, not if it actually maps to an enumeration.  It doesn&#39;t provided a way to check if the &quot;valid value&quot; actually maps to an enumeration."}], "answers": [{"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1541599401, "post_id": 53190863, "comment_id": 93270763, "body": "I actually wanted to use this to enhance <a href=\"https://stackoverflow.com/questions/38914655/idiom-for-simulating-run-time-numeric-template-parameters\">this</a> numeric range visitation mechanism so as to support non-contiguous enums better."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 7, "last_activity_date": 1541599139, "last_edit_date": 1541599139, "creation_date": 1541598827, "answer_id": 53190863, "question_id": 53190584, "link": "https://stackoverflow.com/questions/53190584/how-should-i-check-whether-an-underlying-type-value-is-an-enumerated-value/53190863#53190863", "title": "How should I check whether an underlying-type value is an enumerated value?", "body": "<p>There is no built-in way to do this. All <code>I</code>s are \"valid\" values of <code>my_enum_class</code>, so you can't do anything with the underlying type. As for validating <code>I</code>s against the list of enumerators, without reflection there is simply no way to do it.</p>\n\n<p>Depending on the context, I tend to either build a static <code>std::unordered_set</code> (and do lookups into that), or have a function listing all my enumerators in a <code>switch</code> (and returning <code>false</code> iff the input matches none of them), or just <em>not bother</em>, instead documenting somewhere that passing an unenumerated <code>my_enum_class</code> value to my functions shall be deemed impish trickery and have unspecified behaviour.</p>\n\n<p>Ultimately this all stems from the fact that enums are supposed to list \"common conveniently named values\" within a wider range of totally valid states, rather than a type comprised only of a fully constrained set of constants. We pretty much all abuse enums.</p>\n"}, {"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1541628423, "post_id": 53190902, "comment_id": 93285777, "body": "Reflection is 23 at the earliest."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 8, "last_activity_date": 1541598984, "creation_date": 1541598984, "answer_id": 53190902, "question_id": 53190584, "link": "https://stackoverflow.com/questions/53190584/how-should-i-check-whether-an-underlying-type-value-is-an-enumerated-value/53190902#53190902", "title": "How should I check whether an underlying-type value is an enumerated value?", "body": "<p>There is currently no way to do this.</p>\n\n<p>There are reflection proposals that may make it into <a href=\"/questions/tagged/c%2b%2b20\" class=\"post-tag\" title=\"show questions tagged &#39;c++20&#39;\" rel=\"tag\">c++20</a> and/or <a href=\"/questions/tagged/c%2b%2b23\" class=\"post-tag\" title=\"show questions tagged &#39;c++23&#39;\" rel=\"tag\">c++23</a> that let you iterate (at compile, and hence run, time) over the enumerated values in an enum.  Using that the check would be relatively easy.</p>\n\n<p>Sometimes people do manual enum reflection, often using macros.</p>\n"}, {"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1541602097, "post_id": 53191264, "comment_id": 93272335, "body": "While this is useful, it requires enum-specific code that repeats all the values."}, {"owner": {"reputation": 38108, "user_id": 6610, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/635c3ea0c7b8c37ef45744b6e66dd263?s=128&d=identicon&r=PG", "display_name": "xtofl", "link": "https://stackoverflow.com/users/6610/xtofl"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1541602337, "post_id": 53191264, "comment_id": 93272511, "body": "Yes.  And I think, since the requested behavior is outside of the standard, this is a justified requirement."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1541602616, "post_id": 53191264, "comment_id": 93272694, "body": "Fair enough, you got me there... +1."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 1, "creation_date": 1541624813, "post_id": 53191264, "comment_id": 93284207, "body": "1. Why do you need the default implementation of in <code>in()</code>? 2. Shouldn&#39;t you use <code>std::underlying_type_t&lt;E&gt;</code> instead of int?"}, {"owner": {"reputation": 38108, "user_id": 6610, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/635c3ea0c7b8c37ef45744b6e66dd263?s=128&d=identicon&r=PG", "display_name": "xtofl", "link": "https://stackoverflow.com/users/6610/xtofl"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1541662807, "post_id": 53191264, "comment_id": 93294676, "body": "Yes I should use <code>underlying_type</code>.  I&#39;ll adapt.  Also, I guess the default <code>in_</code> is not needed for &#39;real&#39; enums."}], "tags": [], "owner": {"reputation": 38108, "user_id": 6610, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/635c3ea0c7b8c37ef45744b6e66dd263?s=128&d=identicon&r=PG", "display_name": "xtofl", "link": "https://stackoverflow.com/users/6610/xtofl"}, "is_accepted": false, "score": 2, "last_activity_date": 1541668279, "last_edit_date": 1541668279, "creation_date": 1541600243, "answer_id": 53191264, "question_id": 53190584, "link": "https://stackoverflow.com/questions/53190584/how-should-i-check-whether-an-underlying-type-value-is-an-enumerated-value/53191264#53191264", "title": "How should I check whether an underlying-type value is an enumerated value?", "body": "<p>Though the standard doesn't yet allow you to do introspection, there is a small workaround you could use, that can possibly be improved with ADL.  Courtesy to <a href=\"https://stackoverflow.com/a/33091821/6610\">this older answer</a>.</p>\n\n<pre><code>namespace sparse {\n  template&lt;typename E&gt;\n  constexpr bool in_(std::underlying_type_t&lt;E&gt; i) { return false; }\n\n  template&lt;typename E, E value, E...values&gt;\n  constexpr bool in_(std::underlying_type_t&lt;E&gt; e) {\n    return static_cast&lt;E&gt;(e) == value || in_&lt;E, values...&gt;(e);\n  }\n}\n</code></pre>\n\n<p>To be used like this:</p>\n\n<pre><code>enum class my_enum: int { a=3, b=4 };\n\ntemplate&lt;&gt;\nconstexpr auto sparse::in&lt;my_enum&gt; =\n     in_&lt;my_enum, my_enum::a, my_enum::b&gt;;\n\nstatic_assert(sparse::in&lt;my_enum&gt;(3));\nstatic_assert(sparse::in&lt;my_enum&gt;(4));\nstatic_assert(!sparse::in&lt;my_enum&gt;(5))\n</code></pre>\n"}], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 706, "favorite_count": 0, "accepted_answer_id": 53190902, "answer_count": 3, "score": 10, "last_activity_date": 1541668279, "creation_date": 1541597922, "last_edit_date": 1541623170, "question_id": 53190584, "link": "https://stackoverflow.com/questions/53190584/how-should-i-check-whether-an-underlying-type-value-is-an-enumerated-value", "title": "How should I check whether an underlying-type value is an enumerated value?", "body": "<p>Let <code>I</code> be some integral type. Now suppose I have a <code>enum class my_enum_class : I</code>, with values which may not be consecutive. And now I get some <code>I</code> value. How do I check whether it's a value enumerated in <code>my_enum_class</code>?</p>\n\n<p>An answer to <a href=\"https://stackoverflow.com/q/9161863/1593077\">a similar question</a> (for the C language) makes the assumption that values are contiguous, and that one can add a \"dummy\" upper-bound value, and check the range between 0 and that value; that's not relevant in my case. Is there another way to do it?</p>\n"}, {"tags": ["c++", "templates", "variadic-templates", "variadic-functions", "forward"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541597989, "post_id": 53190540, "comment_id": 93269922, "body": "<i>braced-init-list</i> do not have a type so they cannot be given to a template without specifying the type you want it to represent."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541598116, "post_id": 53190540, "comment_id": 93270017, "body": "@NathanOliver <code>screen s = {f, f};</code> does not work either."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1541598261, "post_id": 53190540, "comment_id": 93270104, "body": "@DanielLangr Correct.  <code>{f, f}</code> is one object so it trys to deduce <code>Args</code> with it and can&#39;t because <code>{f, f}</code> doesn&#39;t have a type."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541598418, "post_id": 53190540, "comment_id": 93270210, "body": "@NathanOliver And what about <code>screen s(f, f)</code>? My point is that the OP&#39;s problem is in my opinion not about <i>braced-init-list</i>, as you suggest in the duplicate. It&#39;s about multiple parameter packs."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1541598522, "post_id": 53190540, "comment_id": 93270277, "body": "I recommend looking at how <a href=\"https://en.cppreference.com/w/cpp/utility/pair/pair\" rel=\"nofollow noreferrer\"><code>std::pair</code></a> forwards two sets of arguments to its two data members&#39; constructors."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1541598536, "post_id": 53190540, "comment_id": 93270288, "body": "@DanielLangr Okay.  I&#39;ve reopened."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1541605740, "post_id": 53190540, "comment_id": 93274823, "body": "In a function template, a parameter pack which is not at the end of the parameter declaration list is a non-deduced context. So the type of <code>args0</code> cannot be deduced."}], "answers": [{"comments": [{"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1541599677, "post_id": 53191035, "comment_id": 93270930, "body": "Wouldn&#39;t be better to use two template parameter packs, for each function parameter a separate one? In your case, you are actually not forwarding <code>16, 16</code> perfectly, since a temporary <code>frame</code> is created and forwarded."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 1, "creation_date": 1541600017, "post_id": 53191035, "comment_id": 93271107, "body": "Thi answer is related if you don&#39;t have C++17: <a href=\"https://stackoverflow.com/a/41439982/580083\">stackoverflow.com/a/41439982/580083</a>."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1541601757, "post_id": 53191035, "comment_id": 93272116, "body": "@DanielLangr Fixed.  Note that in C++17, <code>make_from_tuple</code> returns a prvalue which isn&#39;t a temporary object.  So the forwarding is perfect.  In C++14/11 it isn&#39;t perfect, and making it perfect is a really big hassle."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 3, "last_activity_date": 1541601744, "last_edit_date": 1541601744, "creation_date": 1541599380, "answer_id": 53191035, "question_id": 53190540, "link": "https://stackoverflow.com/questions/53190540/stdforward-cannot-convert-brace-enclosed-initializer-list/53191035#53191035", "title": "std::forward cannot convert brace-enclosed initializer list", "body": "<p><code>{16, 16}</code> has no type.  If used in a context to initialize something with a type, it initializes that thing.</p>\n\n<p>Constructor arguments have a type.  Deduced template constructor arguments get their type from the argument passed.  But <code>{16,16}</code> has no type, so it cannot deduce a type from something that lacks a type.</p>\n\n<p>Your second problem is this:</p>\n\n<pre><code>  template&lt;typename ... Args&gt;\n  screen(Args &amp;&amp; ... args0, Args &amp;&amp; ... args1) :\n    m_f0(std::forward&lt;Args&gt;(args0)...),\n    m_f1(std::forward&lt;Args&gt;(args1)...) {}\n</code></pre>\n\n<p>C++ won't deduce <code>Args...</code> for you here.  It will only deduce an argument pack if it is the last arguments in the function call, and here <code>Args...</code> is both the last and not the last, so it won't be deduced.</p>\n\n<p>Now you can use <a href=\"https://en.cppreference.com/w/cpp/utility/make_from_tuple\" rel=\"nofollow noreferrer\">make from tuple</a> to some extent:</p>\n\n<pre><code>template&lt;class...Args0, class...Args1&gt;\nscreen( std::tuple&lt;Args0...&gt; args0, std::tuple&lt;Args1...&gt; args1 ):\n  m_f0(std::make_from_tuple&lt;frame&gt;(std::move(args0))),\n  m_f1(std::make_from_tuple&lt;frame&gt;(std::move(args1)))\n{}\n</code></pre>\n\n<p>which gets you a touch closer (but not close enough).  At the call site you'd do:</p>\n\n<pre><code>screen s = {std::forward_as_tuple(f), std::forward_as_tuple(16, 16)};\n</code></pre>\n\n<p>and it should now work.</p>\n\n<p>This uses <a href=\"/questions/tagged/c%2b%2b17\" class=\"post-tag\" title=\"show questions tagged &#39;c++17&#39;\" rel=\"tag\">c++17</a>, but <code>make_from_tuple</code> can be implemented as far back as <a href=\"/questions/tagged/c%2b%2b11\" class=\"post-tag\" title=\"show questions tagged &#39;c++11&#39;\" rel=\"tag\">c++11</a> or <a href=\"https://stackoverflow.com/a/41439982/1774667\">in C++14</a>.</p>\n"}], "owner": {"reputation": 177, "user_id": 6722680, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/WMnO2.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/6722680/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 594, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1541601744, "creation_date": 1541597792, "question_id": 53190540, "link": "https://stackoverflow.com/questions/53190540/stdforward-cannot-convert-brace-enclosed-initializer-list", "title": "std::forward cannot convert brace-enclosed initializer list", "body": "<p>Why can't struct screen not initialize the frame struct properly?</p>\n\n<p>What I want is to initialize the screen struct and directly initialize the 2 frame structs as well.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;cstring&gt;\n\n#define ESC \"\\033\"\n\nstruct frame {\n  public:\n    frame(unsigned int w, unsigned int h) :\n      m_w(w),\n      m_h(h) {}\n\n  private:\n    unsigned int m_w, m_h;\n};\n\nstruct screen {\n  public:\n    template&lt;typename ... Args&gt;\n      screen(Args &amp;&amp; ... args0, Args &amp;&amp; ... args1) :\n        m_f0(std::forward&lt;Args&gt;(args0)...),\n        m_f1(std::forward&lt;Args&gt;(args1)...) {}\n\n  private:\n    frame m_f0, m_f1;\n};\n\nint main() {\n  frame f = {16, 16};\n\n  screen s = {f, {16, 16}};\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "xcode", "opencv", "permissions", "webcam"], "answers": [{"tags": [], "owner": {"reputation": 127, "user_id": 7347566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Da9OB.jpg?s=128&g=1", "display_name": "Lorenzo", "link": "https://stackoverflow.com/users/7347566/lorenzo"}, "is_accepted": true, "score": 4, "last_activity_date": 1552579233, "last_edit_date": 1552579233, "creation_date": 1541664041, "answer_id": 53203503, "question_id": 53190412, "link": "https://stackoverflow.com/questions/53190412/accessing-webcam-in-xcode-with-opencv-c/53203503#53203503", "title": "Accessing webcam in Xcode with OpenCV (C++)", "body": "<p>I found a solution in the end; these are the steps that I followed:</p>\n\n<ul>\n<li>In Project Navigator (on the left side of Xcode IDE) right click on the project -> New File -> Property file</li>\n<li>Call the file \"Info.plist\" and save it in the very same directory where the main.cpp is (it should work also in the upper-level dir, but this is what worked for me) as shown in the picture below:\n<a href=\"https://i.stack.imgur.com/LWZLn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LWZLn.png\" alt=\"Info.plist generation\"></a></li>\n<li>Select the Info.plist file and edit it according to what explained in the question above.</li>\n<li>Now we need to link the Info.plist to the project, so left click on the project in Project Navigator, select tab General and, on the left pane (\"project and target list\"), click on the executable under the \"TARGET\" section. You should be able to see a button which states \"Choose Info.plist File\", see the picture below:\n<a href=\"https://i.stack.imgur.com/AhlgY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AhlgY.png\" alt=\"Link to Info.plist file\"></a></li>\n</ul>\n\n<p>As I noticed that the program did not start yet from the Xcode IDE directly, but I was able to navigate (in Finder) to the directory where the executable was and run the program by using the Terminal, I copy-pasted the Info.plist into that folder, as suggested <a href=\"https://stackoverflow.com/questions/52541086/nscamerausagedescription-needed-for-c-projects-in-xcode-for-macos-mojave\">here</a></p>\n"}], "owner": {"reputation": 127, "user_id": 7347566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Da9OB.jpg?s=128&g=1", "display_name": "Lorenzo", "link": "https://stackoverflow.com/users/7347566/lorenzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2812, "favorite_count": 1, "accepted_answer_id": 53203503, "answer_count": 1, "score": 5, "last_activity_date": 1561164723, "creation_date": 1541597274, "last_edit_date": 1541614616, "question_id": 53190412, "link": "https://stackoverflow.com/questions/53190412/accessing-webcam-in-xcode-with-opencv-c", "title": "Accessing webcam in Xcode with OpenCV (C++)", "body": "<p>I am trying to open the webcam and display a short capture with OpenCV. I am currently working on Xcode, with C++ language.</p>\n\n<p>The code is pretty simple:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;opencv2/opencv.hpp&gt;\n\nusing namespace std;\nusing namespace cv;\n\nint main(int argc, const char * argv[]) {\n\n    // variable initialization\n    Mat frame;\n    VideoCapture cap;            // 0 is the webcam\n\n    // try to open camera\n    cap.open(0);\n    if (!cap.isOpened()) return -1;  // check if there is no video or no way to display it\n\n    // create a window and display the video capture\n    namedWindow(\"Video Capture\", CV_WINDOW_AUTOSIZE);\n    for (int i=0; i&lt;100; i++) {\n        cap &gt;&gt; frame;\n        imshow(\"Video Capture\", frame);\n        waitKey(1);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>As I run the code the following error is returned:</p>\n\n<pre><code>[access] This app has crashed because it attempted to access privacy-sensitive \ndata without a usage description.  The app's Info.plist must contain an \nNSCameraUsageDescription key with a string value explaining to the \nuser how the app uses this data.\n</code></pre>\n\n<p>Thus, I added an Info.plist file to the project (currently in the same directory where the main.cpp is) and added the description the compiler suggested:</p>\n\n<pre><code>Key: Privacy - Camera Usage Description\nValue: $(PRODUCT_NAME) camera use\n</code></pre>\n\n<p>Then, in the project's Build Settings I referenced the file I had just written, by using the full path, as you can see in the following image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/lzyqK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lzyqK.png\" alt=\"Path to Info.plist file\"></a></p>\n\n<p>I am sure that the path is correct, as I drag and dropped the file itself, but the compiler keeps on showing the same error and quits the execution.</p>\n"}, {"tags": ["c++", "cgal"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10316011"}, "edited": false, "score": 0, "creation_date": 1541604335, "post_id": 53190342, "comment_id": 93273921, "body": "Not sure what the exact capabiliites of cgal are, but things that could work: is the symmetric difference of the polygons equal to their difference? Or is the intersection of the polygons equal to the second polygon?"}], "answers": [{"comments": [{"owner": {"reputation": 5353, "user_id": 1128551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1b2e64745ac36bf554b976e3625a4ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Shibli", "link": "https://stackoverflow.com/users/1128551/shibli"}, "edited": false, "score": 0, "creation_date": 1541599181, "post_id": 53190714, "comment_id": 93270630, "body": "I am looking for a solution in CGAL context though."}, {"owner": {"reputation": 589, "user_id": 1293937, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0578b2931b635734716cd15217247b9e?s=128&d=identicon&r=PG", "display_name": "Cristi", "link": "https://stackoverflow.com/users/1293937/cristi"}, "reply_to_user": {"reputation": 5353, "user_id": 1128551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1b2e64745ac36bf554b976e3625a4ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Shibli", "link": "https://stackoverflow.com/users/1128551/shibli"}, "edited": false, "score": 0, "creation_date": 1541600568, "post_id": 53190714, "comment_id": 93271429, "body": "Can&#39;t you use something from <a href=\"https://doc.cgal.org/latest/Point_set_2/index.html#Chapter_2D_Range_and_Neighbor_Search\" rel=\"nofollow noreferrer\">doc.cgal.org/latest/Point_set_2/&hellip;</a> ?"}], "tags": [], "owner": {"reputation": 589, "user_id": 1293937, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0578b2931b635734716cd15217247b9e?s=128&d=identicon&r=PG", "display_name": "Cristi", "link": "https://stackoverflow.com/users/1293937/cristi"}, "is_accepted": false, "score": 0, "last_activity_date": 1541598345, "creation_date": 1541598345, "answer_id": 53190714, "question_id": 53190342, "link": "https://stackoverflow.com/questions/53190342/cgal-polygon-overlap-test/53190714#53190714", "title": "CGAL: Polygon overlap test", "body": "<p>A  convex polygon is completely contained in another convex polygon if and only all its vertices are contained inside the containing polygon.</p>\n\n<p>To test if a point is contained inside the polygon you can use the OpenCV function pointPolygonTest() (<a href=\"https://docs.opencv.org/2.4/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=pointpolygontest#pointpolygontest\" rel=\"nofollow noreferrer\">see description here</a>) (<a href=\"https://docs.opencv.org/2.4/doc/tutorials/imgproc/shapedescriptors/point_polygon_test/point_polygon_test.html\" rel=\"nofollow noreferrer\">see example use here</a>)</p>\n"}, {"tags": [], "owner": {"reputation": 5172, "user_id": 863521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gGh24.jpg?s=128&g=1", "display_name": "sloriot", "link": "https://stackoverflow.com/users/863521/sloriot"}, "is_accepted": false, "score": 2, "last_activity_date": 1541606955, "creation_date": 1541606955, "answer_id": 53193362, "question_id": 53190342, "link": "https://stackoverflow.com/questions/53190342/cgal-polygon-overlap-test/53193362#53193362", "title": "CGAL: Polygon overlap test", "body": "<p>You can use <code>do_intersect()</code> function first and if you have no intersection take any point for P1 and check whether it is inside P2 using <a href=\"https://doc.cgal.org/latest/Polygon/classCGAL_1_1Polygon__2.html#aed22a0e432f6f3fa503ed1e06ec188f5\" rel=\"nofollow noreferrer\"><code>has_on_bounded_side()</code></a>. Then if P1 is not included in P2, do same for a point of P2 with reference to P1 in order to conclude.</p>\n"}, {"tags": [], "owner": {"reputation": 2089, "user_id": 7778713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/QIG81.png?s=128&g=1", "display_name": "D.J. Klomp", "link": "https://stackoverflow.com/users/7778713/d-j-klomp"}, "is_accepted": false, "score": 0, "last_activity_date": 1607862748, "creation_date": 1607862748, "answer_id": 65275617, "question_id": 53190342, "link": "https://stackoverflow.com/questions/53190342/cgal-polygon-overlap-test/65275617#65275617", "title": "CGAL: Polygon overlap test", "body": "<p>A bit late but to give an answer but for posterity's sake. You need to loop through the points of the polygon and check if they are on the bounded side</p>\n<pre><code>\\\\Assuming that CGAL::Polygon_2 type is used\ntypedef CGAL::Polygon_2&lt;Kernel&gt;                         Polygon_2;\n\nbool do_overlap(Polygon_2 inner_polygon, Polygon_2 outer_polygon) {\n    //Check if the innner_polygon vertices are all on the bounded side of the outer_polygon\n    for (auto vertex_it = inner_polygon.vertices_begin(); vertex_it != inner_polygon.vertices_end(); ++vertex_it) {\n        if (outer_polygon.bounded_side(*vertex_it) != CGAL::ON_BOUNDED_SIDE) {\n            //First point found of the inner_polygon outside the outer_polygon is enough to say it is not completly inside.\n            return false;\n        }\n    }\n    //If no points outside are found the inner_polygon must be completely inside the outer_polygon.\n    return true\n}\n</code></pre>\n<p>With this function, you only check if the inner_polygon is inside the outer_polygon and not the other way around, but you get the gist.</p>\n"}], "owner": {"reputation": 5353, "user_id": 1128551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1b2e64745ac36bf554b976e3625a4ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Shibli", "link": "https://stackoverflow.com/users/1128551/shibli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1607862748, "creation_date": 1541596968, "last_edit_date": 1541597298, "question_id": 53190342, "link": "https://stackoverflow.com/questions/53190342/cgal-polygon-overlap-test", "title": "CGAL: Polygon overlap test", "body": "<p>I am looking for a function which tests whether in 2D a simple polygon completely contains another simple polygon. <code>do_intersect</code> as mentioned <a href=\"https://doc.cgal.org/latest/Boolean_set_operations_2/group__boolean__do__intersect.html#ga77d2088ac95f168918a03913bd9366a6\" rel=\"nofollow noreferrer\">here</a>, returns true even if polygons are partially overlapping. What is the appropriate function to check complete overlap?</p>\n"}]