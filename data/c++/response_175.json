[{"tags": ["java", "android", "c++", "java-native-interface", "jnienv"], "answers": [{"tags": [], "owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "is_accepted": false, "score": 0, "last_activity_date": 1526734169, "creation_date": 1526734169, "answer_id": 50425473, "question_id": 50381333, "link": "https://stackoverflow.com/questions/50381333/how-do-i-convert-two-jlong-data-type-to-jstring-and-then-concatenate-both-of-the/50425473#50425473", "title": "How do I convert two jlong data type to jstring and then concatenate both of the strings together in order to return a string to java from JNI?", "body": "<p>You could do that in JNI. But generally, if it can be done in Java, it is far easier there. Designing for this in Java, you create classes with public methods for your public interface, then implement parts with private native methods and add private classes and/or private members implemented in Java that make the JNI code simpler.</p>\n\n<p>Try setting two long fields (<a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/functions.html\" rel=\"nofollow noreferrer\">GetFieldID</a>, <a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/functions.html#wp16613\" rel=\"nofollow noreferrer\">SetLongField</a>) or returning the result of a constructor (<a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/functions.html\" rel=\"nofollow noreferrer\">GetMethodID() with  as the method name and void (V) as the return type</a>, <a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/functions.html\" rel=\"nofollow noreferrer\">NewObjectV</a>) on a \"results\" class instead.</p>\n"}], "owner": {"reputation": 21, "user_id": 8554275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4089849426e7e2770a1fd9b77f566984?s=128&d=identicon&r=PG&f=1", "display_name": "Hso Zote", "link": "https://stackoverflow.com/users/8554275/hso-zote"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526734169, "creation_date": 1526513460, "last_edit_date": 1526521486, "question_id": 50381333, "link": "https://stackoverflow.com/questions/50381333/how-do-i-convert-two-jlong-data-type-to-jstring-and-then-concatenate-both-of-the", "title": "How do I convert two jlong data type to jstring and then concatenate both of the strings together in order to return a string to java from JNI?", "body": "<p>My current C function in my jni class is: </p>\n\n<pre><code>JNIEXPORT jstring JNICALL\nJava_com_example_hanif_liftsensor_DeviceControlActivity_encryptData( JNIEnv* env, jobject thiz , jlong data1 , jlong data2) {\n\n\nvCRYPTO_ACT_Encryption((uint32_t *) data1, (uint32_t *) data2);\n\n__android_log_print(ANDROID_LOG_DEBUG, \"TRACKERS_RESULT\", \"%i\", unCRYPTO_DAT_TmpV0_Buffer.un32); // need to convert back to string hex\n__android_log_print(ANDROID_LOG_DEBUG, \"TRACKERS_RESULT\", \"%i\", unCRYPTO_DAT_TmpV1_Buffer.un32); // need to convert back to string hex\n//after both converted to jstring then combine it to return as jstring\n\n\nreturn jstring;\n\n }\n</code></pre>\n\n<p>I would like to convert both the unCRYPTO_DAT_TmpV0_Buffer.un32 &amp; unCRYPTO_DAT_TmpV1_Buffer.un32 from jlong to jstring and then concatenate them as one jstring to return as a single jstring value. Thanks.</p>\n"}, {"tags": ["c++", "initialization", "global-variables", "constexpr"], "comments": [{"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 1, "creation_date": 1526512978, "post_id": 50381258, "comment_id": 87778622, "body": "How would you go about accessing a <code>constexpr</code> from another translation unit? That&#39;s kind of necessary for there to be a dependency to resolve."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1526514220, "post_id": 50381258, "comment_id": 87778911, "body": "The initialisation would not compile unless the compiler can resolve what the value is.   As such, it would not be possible for initialisation of <code>foo</code> to be invisible to the compiler when using it to initialise <code>bar</code>."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1526514622, "post_id": 50381258, "comment_id": 87778983, "body": "@Frank A <code>constexpr</code> variable can have external linkage, for example by using <code>extern constexpr</code> or by being a static class member."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 1, "creation_date": 1526528612, "post_id": 50381258, "comment_id": 87781627, "body": "Can you add a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> giving an example of what you&#39;re doing (rather than a description of it)?"}, {"owner": {"reputation": 181, "user_id": 4163681, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/71tO8.jpg?s=128&g=1", "display_name": "Lotney", "link": "https://stackoverflow.com/users/4163681/lotney"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1526596116, "post_id": 50381258, "comment_id": 87818509, "body": "@1201ProgramAlarm I posted a minimal, complete example. Verifiable is not possible due to the nature of the problem."}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 4163681, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/71tO8.jpg?s=128&g=1", "display_name": "Lotney", "link": "https://stackoverflow.com/users/4163681/lotney"}, "edited": false, "score": 0, "creation_date": 1526747573, "post_id": 50425857, "comment_id": 87869328, "body": "I am looking for confirmation my reasoning (in the UPDATE to the question) and references to prove it. This corroborates the speculating I did in the UPDATE so I&#39;m up-voting. However, the original question is about proving from standard so I can&#39;t accept this answer."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "reply_to_user": {"reputation": 181, "user_id": 4163681, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/71tO8.jpg?s=128&g=1", "display_name": "Lotney", "link": "https://stackoverflow.com/users/4163681/lotney"}, "edited": false, "score": 0, "creation_date": 1526750915, "post_id": 50425857, "comment_id": 87870310, "body": "@Lotney What else is there for the standard to say? The fiasco relates to cross-translation unit dependencies, and constexpr have to be fully resolved before the translation unit can be completed. They are mutually exclusive by definition."}, {"owner": {"reputation": 181, "user_id": 4163681, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/71tO8.jpg?s=128&g=1", "display_name": "Lotney", "link": "https://stackoverflow.com/users/4163681/lotney"}, "edited": false, "score": 0, "creation_date": 1526768246, "post_id": 50425857, "comment_id": 87874518, "body": "I&#39;m fairly sure this is correct. However, to answer this question referenced quotations from the standard providing a chain of deduction defining the behavior in question are required."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "reply_to_user": {"reputation": 181, "user_id": 4163681, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/71tO8.jpg?s=128&g=1", "display_name": "Lotney", "link": "https://stackoverflow.com/users/4163681/lotney"}, "edited": false, "score": 1, "creation_date": 1526774565, "post_id": 50425857, "comment_id": 87875619, "body": "@Lotney, I added references to the standard as you requested."}, {"owner": {"reputation": 1760, "user_id": 1435799, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ed164b2fb7cdc0733688100eb2d2acf0?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/1435799/peter-m"}, "edited": false, "score": 0, "creation_date": 1601674944, "post_id": 50425857, "comment_id": 113489618, "body": "Yes, there is potentially a bit of difference between &quot;can be&quot; and &quot;must be&quot; that worries me about this.  constexpr provides a way to guarantee that the fiasco &quot;can be&quot; avoided, but I&#39;m worried that this doesn&#39;t mean that all compilers &quot;must&quot; avoid it."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "reply_to_user": {"reputation": 1760, "user_id": 1435799, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ed164b2fb7cdc0733688100eb2d2acf0?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/1435799/peter-m"}, "edited": false, "score": 0, "creation_date": 1601705711, "post_id": 50425857, "comment_id": 113494340, "body": "@PeterM It does not matter whether or not the compiler ultimately evaluates the constexpr during compilation or not. For it to be possible, there has to be enough information available. i.e. The result of the expression cannot depend on anything that lives in a different TU."}], "tags": [], "owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "is_accepted": false, "score": 4, "last_activity_date": 1542082490, "last_edit_date": 1542082490, "creation_date": 1526736860, "answer_id": 50425857, "question_id": 50381258, "link": "https://stackoverflow.com/questions/50381258/is-the-static-initialization-order-fiasco-a-concern-for-constexpr-variables/50425857#50425857", "title": "Is the &quot;static initialization order fiasco&quot; a concern for constexpr variables?", "body": "<p>In your example, there is no possible issue because the <code>a</code> in y.cc is a different variable from <code>a</code> in x.cc. So there is no cross-translation unit linkage happening.</p>\n\n<p>In fact, there <strong>cannot</strong> be cross-translation unit linkage between constexpr variables. The whole point of <code>constexpr</code> is that the value is calculated at compilation time. </p>\n\n<p>In other words, the constexpr must resolve to a value while we are still compiling the translation unit in isolation.</p>\n\n<p>Because of the this the Static Initialization Order Fiasco implicitly does not apply to <code>constexpr</code> variables, and there is no need for the standard to mention what to do in that scenario.</p>\n\n<p>Edit: as requested, the relevant part of the standard is 10.1.5 (9)[dcl.constexpr]</p>\n\n<blockquote>\n  <p>In any constexpr variable declaration, the full-expression of the\n  initialization shall be a constant expression (8.20).</p>\n</blockquote>\n\n<p>Which leads to 8.20 (1)  [expr.const] that has the following note:</p>\n\n<blockquote>\n  <p>[ Note: Constant expressions can be evaluated during translation. \u2014 end note ]</p>\n</blockquote>\n\n<p>Which is the rationale behind the next page and a half of clauses, but is enough by itself to preclude cross-translation unit references.</p>\n"}], "owner": {"reputation": 181, "user_id": 4163681, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/71tO8.jpg?s=128&g=1", "display_name": "Lotney", "link": "https://stackoverflow.com/users/4163681/lotney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 760, "favorite_count": 0, "answer_count": 1, "score": 8, "last_activity_date": 1542082490, "creation_date": 1526512861, "last_edit_date": 1526679169, "question_id": 50381258, "link": "https://stackoverflow.com/questions/50381258/is-the-static-initialization-order-fiasco-a-concern-for-constexpr-variables", "title": "Is the &quot;static initialization order fiasco&quot; a concern for constexpr variables?", "body": "<p>If I initialize a <code>constexpr</code> variable <code>foo</code> with a non-default value in one translation unit and then a initialize another <code>constexpr</code> variable <code>bar</code> with <code>foo</code> in another translation unit is it possible for <code>bar</code> to be initialized before <code>foo</code> resulting in a <code>bar</code> that was initialized by a zero-or-default-initialized <code>foo</code>. i.e. Unlike in the non-constexpr case (where the static initialization order fiasco is in effect) will the compiler and linker analyze dependency ordering to guarantee the correct result?</p>\n\n<p>Additionally, how are constexpr variable templates affected? Their initialization ordering is undefined WITHIN single translation units.</p>\n\n<p>C++17 standard answers preferred.</p>\n\n<p>UPDATE:\nHere is a minimal example. It works; that's the problem. At this point I'm 99% sure that this is safe from <strong><a href=\"https://isocpp.org/wiki/faq/ctors#static-init-order\" rel=\"noreferrer\">The Static Initialization Order Fiasco (TSIOF)</a></strong>. However, due to the extreme, insidious nature of that problem I need to get confirmation that this is ok. I <em>believe</em> this code does not suffer from TSIOF since the inclusion of y.h in x.h orders <code>a</code> and <code>b</code> within the x.cc translation unit. However, AFAIU there are 2 translation units: one containing a, the other containing b. Furthermore, AFAI-sort-of-U a multiple definition of <code>a</code> error does not arise because the static keyword imparts internal <em>linkage</em> but <code>a</code> still has global <em>scope</em>. </p>\n\n<p>compiled with:</p>\n\n<pre><code>clang++ -std=c++17 x.cc y.cc  #or g++\n</code></pre>\n\n<p>possible output:</p>\n\n<pre><code>in foo\n</code></pre>\n\n<p>possible output:</p>\n\n<pre><code>assertion failed (core dumped)\n</code></pre>\n\n<p>file x.cc:</p>\n\n<pre><code>#include \"x.h\"\nint main(){ assert(b == 42); foo(); }\n</code></pre>\n\n<p>file x.h:</p>\n\n<pre><code>#pragma once\n#include \"y.h\"\nstatic constexpr int b = a+1;\n</code></pre>\n\n<p>file y.cc:</p>\n\n<pre><code>#include \"y.h\"\n#include &lt;iostream&gt;\nvoid foo(){\n    std::cout &lt;&lt; \" in foo \\n\";\n}\n</code></pre>\n\n<p>file y.h:</p>\n\n<pre><code>#pragma once\nstatic constexpr int a=41;\nvoid foo();\n</code></pre>\n\n<p><strong>Is this program guaranteed to output <code>in foo</code>?</strong></p>\n\n<p><em>Since this question can't be answered via example it really needs a language lawyer to provide relevant standard quotes</em></p>\n\n<p>This question is about STIOF across translation units. A related, unanswered question about STIOF within translation units for template variables is <a href=\"https://stackoverflow.com/questions/50401555/is-the-initialization-order-of-constexpr-i-e-constant-initialized-template-va\">here</a></p>\n"}, {"tags": ["c++", "templates", "design-patterns", "casting", "service-locator"], "answers": [{"comments": [{"owner": {"reputation": 846, "user_id": 7511460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cz0P7.png?s=128&g=1", "display_name": "Adrien Givry", "link": "https://stackoverflow.com/users/7511460/adrien-givry"}, "edited": false, "score": 0, "creation_date": 1526513742, "post_id": 50381256, "comment_id": 87778790, "body": "Thanks for your answer, I appreciate it. That also explain why I do have to wrap references into std::reference_wrapper, because they are initialized then moved/copied."}, {"owner": {"reputation": 846, "user_id": 7511460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cz0P7.png?s=128&g=1", "display_name": "Adrien Givry", "link": "https://stackoverflow.com/users/7511460/adrien-givry"}, "edited": false, "score": 0, "creation_date": 1526514506, "post_id": 50381256, "comment_id": 87778965, "body": "@Frank yup totally, I was just talking about the fact that an std::vector&lt;Class&amp;&gt; isn&#39;t possible due to what Ole Dittmann explained. But yes, I can&#39;t use a reference_wrapper there"}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 1, "creation_date": 1526514601, "post_id": 50381256, "comment_id": 87778980, "body": "Small nitpick, i&#39;d be careful with stating that &quot;<i>containers store instances by default</i>&quot;. This is confusing. They store values of the given type. So if you use <code>T</code> they store <code>T</code> if you use <code>T*</code> they store <code>T*</code>. There is no default. With current wording I find this question problematic &quot;What does vector&lt;T*&gt; store vs vector&lt;T&gt;, an what is the default in this context?&quot;"}, {"owner": {"reputation": 1654, "user_id": 414934, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f0936d05f88642d27c9317bfc946330?s=128&d=identicon&r=PG", "display_name": "Ole Dittmann", "link": "https://stackoverflow.com/users/414934/ole-dittmann"}, "reply_to_user": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1526515384, "post_id": 50381256, "comment_id": 87779155, "body": "@luk32 yes technically you are correct of course. But in this case the wording was helpful to draw the conclusion to the error message. And the &quot;default&quot; would be of course without * or &amp;"}], "tags": [], "owner": {"reputation": 1654, "user_id": 414934, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f0936d05f88642d27c9317bfc946330?s=128&d=identicon&r=PG", "display_name": "Ole Dittmann", "link": "https://stackoverflow.com/users/414934/ole-dittmann"}, "is_accepted": true, "score": 2, "last_activity_date": 1526513142, "last_edit_date": 1526513142, "creation_date": 1526512825, "answer_id": 50381256, "question_id": 50380975, "link": "https://stackoverflow.com/questions/50380975/service-locator-implementation/50381256#50381256", "title": "Service Locator implementation", "body": "<p>I assume ElkAPI::IManager is in fact an abstract class, the I... stands for \"Interface\" and these are often abstract.</p>\n\n<p>You are trying to maintain a c++ container class (map) of these. C++ container classes store instances by default. So if you add something to the map it tries to construct an instance and copy or move the content of the source into it. This is not possible as the map element type is abstract - thus error!</p>\n\n<p>Having a map of polymorphic objects is only possible if you use a map of references or pointers to a base type and lifetime-manage the pointed to objects by other means.</p>\n\n<p>You must realize a fundamental difference of c++ to most other languages which is that classes are value-types like structs and thus a variable or member of class type is copied/moved when assigned. If you want to use references only you must use pointers or references and specify so with * or &amp;</p>\n"}], "owner": {"reputation": 846, "user_id": 7511460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cz0P7.png?s=128&g=1", "display_name": "Adrien Givry", "link": "https://stackoverflow.com/users/7511460/adrien-givry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1035, "favorite_count": 1, "accepted_answer_id": 50381256, "answer_count": 1, "score": 3, "last_activity_date": 1526513142, "creation_date": 1526510802, "question_id": 50380975, "link": "https://stackoverflow.com/questions/50380975/service-locator-implementation", "title": "Service Locator implementation", "body": "<p>I'm trying to implement a service locator design pattern into my game engine. The problem is that I can't get it working. I'm still having some trouble to understand how casts really works.</p>\n\n<p><strong>ServiceLocator.h</strong></p>\n\n<pre><code>class ELK_TOOLS_EXPORT ServiceLocator\n{\npublic:\n    template&lt;typename ServiceType&gt;\n    static void Provide(ServiceType&amp;&amp; p_service)\n    {\n        m_services[typeid(ServiceType).hash_code()] = p_service;\n    }\n\n    template&lt;typename ServiceType&gt;\n    static ServiceType&amp; Get()\n    {\n        return static_cast&lt;ServiceType&amp;&gt;(m_services[typeid(ServiceType).hash_code()]);\n    }\n\nprivate:\n    static std::unordered_map&lt;size_t, ElkAPI::IManager&gt; m_services;\n};\n</code></pre>\n\n<p>The idea was to store services onto the stack, so I have no pointer or anything like that in my unordered_map. The problem is that when I try to use my service provider into my engine this way :</p>\n\n<p><strong>EngineManager.cpp</strong></p>\n\n<pre><code>void ElkGameEngine::Managers::EngineManager::Setup()\n{\n    m_quit = false;\n\n    /* Here I provide to the service locator a new Service (That inherits from IManager) */\n    ServiceLocator::Provide&lt;WindowManager&gt;(WindowManager());\n    ServiceLocator::Provide&lt;SceneManager&gt;(SceneManager());\n    ServiceLocator::Provide&lt;InputManager&gt;(InputManager());\n    ServiceLocator::Provide&lt;RenderingManager&gt;(RenderingManager(ServiceLocator::Get&lt;WindowManager&gt;().GetWidth(), ServiceLocator::Get&lt;WindowManager&gt;().GetHeight()));\n    ServiceLocator::Provide&lt;PhysicsManager&gt;(PhysicsManager());\n\n    ElkTools::Debug::Log::Process(\"Engine setup completed\", ElkTools::Debug::Log::LogLevel::LOG_INFO);\n}\n\n// [...]\n\nvoid ElkGameEngine::Managers::EngineManager::UpdatePhysics()\n{\n    PROFILER_SPY(\"EngineManager::UpdatePhysics\");\n\n    /* Here I try to get the service */\n    ServiceLocator::Get&lt;PhysicsManager&gt;().ApplyPhysics();\n    ServiceLocator::Get&lt;PhysicsManager&gt;().ClearPhysicsEntities();\n}\n</code></pre>\n\n<p>The compiler (VS2017) say me this:</p>\n\n<pre><code>Severity    Code    Description Project File    Line    Suppression State\nError   C2259   'ElkAPI::IManager': cannot instantiate abstract class   ElkGameEngine   c:\\program files (x86)\\microsoft visual studio\\2017\\community\\vc\\tools\\msvc\\14.12.25827\\include\\utility 292 \n</code></pre>\n\n<p>And the compiler output is:</p>\n\n<pre><code>2&gt;------ Build started: Project: ElkGameEngine, Configuration: Debug x64 ------\n2&gt;EngineManager.cpp\n2&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\community\\vc\\tools\\msvc\\14.12.25827\\include\\utility(292): error C2259: 'ElkAPI::IManager': cannot instantiate abstract class\n2&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\community\\vc\\tools\\msvc\\14.12.25827\\include\\utility(292): note: due to following members:\n2&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\community\\vc\\tools\\msvc\\14.12.25827\\include\\utility(292): note: 'void ElkAPI::IManager::Setup(void)': is abstract\n2&gt;c:\\users\\adrie\\desktop\\group_2\\pfa\\elkengine\\elkapi\\include\\elkapi\\imanager.h(15): note: see declaration of 'ElkAPI::IManager::Setup'\n2&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\community\\vc\\tools\\msvc\\14.12.25827\\include\\utility(292): note: 'void ElkAPI::IManager::Close(void)': is abstract\n2&gt;c:\\users\\adrie\\desktop\\group_2\\pfa\\elkengine\\elkapi\\include\\elkapi\\imanager.h(16): note: see declaration of 'ElkAPI::IManager::Close'\n2&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\community\\vc\\tools\\msvc\\14.12.25827\\include\\unordered_map(284): note: see reference to class template instantiation 'std::pair&lt;const _Kty,_Ty&gt;' being compiled\n2&gt;        with\n2&gt;        [\n2&gt;            _Kty=::size_t,\n2&gt;            _Ty=ElkAPI::IManager\n2&gt;        ]\n2&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\community\\vc\\tools\\msvc\\14.12.25827\\include\\unordered_map(283): note: while compiling class template member function 'ElkAPI::IManager &amp;std::unordered_map&lt;::size_t,ElkAPI::IManager,std::hash&lt;_Kty&gt;,std::equal_to&lt;_Kty&gt;,std::allocator&lt;std::pair&lt;const _Kty,_Ty&gt;&gt;&gt;::operator [](unsigned __int64 &amp;&amp;)'\n2&gt;        with\n2&gt;        [\n2&gt;            _Kty=::size_t,\n2&gt;            _Ty=ElkAPI::IManager\n2&gt;        ]\n2&gt;c:\\users\\adrie\\desktop\\group_2\\pfa\\elkengine\\build\\elkrendering\\include\\elktools\\utils\\servicelocator.h(28): note: see reference to function template instantiation 'ElkAPI::IManager &amp;std::unordered_map&lt;::size_t,ElkAPI::IManager,std::hash&lt;_Kty&gt;,std::equal_to&lt;_Kty&gt;,std::allocator&lt;std::pair&lt;const _Kty,_Ty&gt;&gt;&gt;::operator [](unsigned __int64 &amp;&amp;)' being compiled\n2&gt;        with\n2&gt;        [\n2&gt;            _Kty=::size_t,\n2&gt;            _Ty=ElkAPI::IManager\n2&gt;        ]\n2&gt;c:\\users\\adrie\\desktop\\group_2\\pfa\\elkengine\\build\\elkrendering\\include\\elktools\\utils\\servicelocator.h(28): note: see reference to class template instantiation 'std::unordered_map&lt;::size_t,ElkAPI::IManager,std::hash&lt;_Kty&gt;,std::equal_to&lt;_Kty&gt;,std::allocator&lt;std::pair&lt;const _Kty,_Ty&gt;&gt;&gt;' being compiled\n2&gt;        with\n2&gt;        [\n2&gt;            _Kty=::size_t,\n2&gt;            _Ty=ElkAPI::IManager\n2&gt;        ]\n2&gt;c:\\users\\adrie\\desktop\\group_2\\pfa\\elkengine\\elkgameengine\\src\\managers\\enginemanager.cpp(22): note: see reference to function template instantiation 'ServiceType &amp;ElkTools::Utils::ServiceLocator::Get&lt;ElkGameEngine::Managers::WindowManager&gt;(void)' being compiled\n2&gt;        with\n2&gt;        [\n2&gt;            ServiceType=ElkGameEngine::Managers::WindowManager\n2&gt;        ]\n2&gt;Done building project \"ElkGameEngine.vcxproj\" -- FAILED.\n========== Build: 1 succeeded, 1 failed, 2 up-to-date, 0 skipped ==========\n</code></pre>\n\n<p>I can't figure out why it says that IManager is an abstract class and get instancied (Said in the error list). I'm not trying to instantiate any IManager, I only instantiate my managers (That implements IManager). My managers are good, I was using them before trying to implement this Service Locator design pattern.</p>\n\n<pre><code>- Do you have any idea why I get this error ?\n- Is it due to my cast (I'm trying to cast something onto the stack)\n</code></pre>\n\n<p><strong>Note:</strong> I tried to comment out the provide lines in EngineManager.cpp and I still get this error, so I probably can say that the problem come from the Get method of my ServiceLocator.</p>\n"}, {"tags": ["c++", "sdl", "mp3", "sdl-mixer"], "comments": [{"owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 0, "creation_date": 1526520900, "post_id": 50380940, "comment_id": 87780162, "body": "Please post a MVCE and the mp3 file."}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1526543313, "post_id": 50380940, "comment_id": 87787649, "body": "Have you called <code>Mix_Init</code> with at least <code>MIX_INIT_OGG</code> bit? Is its return value the same as bitmask you passed to it?"}, {"owner": {"reputation": 1861, "user_id": 571227, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/oFDE2.png?s=128&g=1", "display_name": "haxpor", "link": "https://stackoverflow.com/users/571227/haxpor"}, "edited": false, "score": 0, "creation_date": 1540181150, "post_id": 50380940, "comment_id": 92753756, "body": "For my case on macOS, I need to have <code>libmpg123</code> (to play MP3) installed and have its <code>.dylib</code> sit at the same directory level as of executable binary file. Same goes for WIndows as I tested it with cross-compile from macOS. As well, you need to call <code>Mix_Init()</code> with flags to initialize <code>SDL_mixer</code> for file format you aim to use, and check its return result thus you can debug it more precisely what&#39;s went wrong."}], "answers": [{"tags": [], "owner": {"reputation": 88, "user_id": 7321673, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154734611231132/picture?type=large", "display_name": "Attis", "link": "https://stackoverflow.com/users/7321673/attis"}, "is_accepted": false, "score": 1, "last_activity_date": 1545951241, "creation_date": 1545951241, "answer_id": 53951728, "question_id": 50380940, "link": "https://stackoverflow.com/questions/50380940/sdl-mix-loadmus-not-loading-mp3/53951728#53951728", "title": "SDL Mix_LoadMUS not loading .mp3", "body": "<p>With the help of the above explanations I tried to reproduce your issue, and the only thing that caused something similar was the lack of runtime libraries. Make sure that all the necessary libraries are available during runtime (copy them in the folder of your executable or set an environment variable or use static linking.) The runtime libraries distributed with SDL_mixer are the following ones: libmpg123-0, libmodplug-1, libFLAC-8, libogg-0, libopus-0, libopusfile-0, libvorbis-0, libvorbisfile-3 and SDL2_mixer. </p>\n\n<p>These can be acquired here: <a href=\"https://www.libsdl.org/projects/SDL_mixer/\" rel=\"nofollow noreferrer\">https://www.libsdl.org/projects/SDL_mixer/</a></p>\n"}], "owner": {"reputation": 25, "user_id": 9343576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7df12ff759add2148b16a11c6c458b8c?s=128&d=identicon&r=PG&f=1", "display_name": "Barkypoo", "link": "https://stackoverflow.com/users/9343576/barkypoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1590, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1546011847, "creation_date": 1526510667, "last_edit_date": 1546011847, "question_id": 50380940, "link": "https://stackoverflow.com/questions/50380940/sdl-mix-loadmus-not-loading-mp3", "title": "SDL Mix_LoadMUS not loading .mp3", "body": "<p>So Apparently i've been trying to load an .mp3 using SDL_mixer. However, this does not work, as opposed to the libsdl wiki: <a href=\"https://www.libsdl.org/projects/SDL_mixer/docs/SDL_mixer_55.html#SEC55\" rel=\"nofollow noreferrer\">SDL_mixer Mix_LoadMUS</a></p>\n\n<p>I was hoping for it to work, but when loading and playing the file, the following errors popped in my console app:</p>\n\n<pre><code>Mix_LoadMUS: Unrecognized audio format\nMix_PlayMusic: music parameter was NULL\n</code></pre>\n\n<p>To my extent, i've been trying to load <strong>test.mp3</strong> the following way:</p>\n\n<pre><code>Mix_Music * m_mainMusic;\n\nm_mainMusic = Mix_LoadMUS(\"test.mp3\");\nif (m_mainMusic != nullptr)\n    printf(\"Loaded the file\\n\");\nelse\n    printf(\"Mix_LoadMUS: %s\\n\", Mix_GetError());\n\nif (Mix_PlayMusic(m_mainMusic, -1) == -1) \n    printf(\"Mix_PlayMusic: %s\\n\", Mix_GetError());\n</code></pre>\n\n<p>I have obviously initialized the SDL subsystem.</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1526511385, "post_id": 50380933, "comment_id": 87778229, "body": "You seem to be trying to ask two questions here. It&#39;s easy to create matrixes with variable dimensions. Adding dimensions is a bit more tricky."}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1526512109, "post_id": 50380933, "comment_id": 87778422, "body": "The dimensionality of an array is specified by its declaration, so by definition, no.  It&#39;s likely you are trying to solve a problem and are asking about the solution you have thought of instead of your actual problem: <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\" title=\"what is the xy problem\">meta.stackexchange.com/questions/66377/what-is-the-xy-proble&zwnj;&#8203;m</a>"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1526512255, "post_id": 50380933, "comment_id": 87778467, "body": "You can get behavior like this by using a <code>std::vector&lt;int&gt;</code> for your n-dimensional array. Instead of <code>vec[z][y][x]</code>, you&#39;d be using something like <code>vec[compute_index(x, y, z, xSize, ySize, zSize)]</code> (although you&#39;d need to use vectors for the arguments to <code>compute_index</code>, as you also have varying number of arguments)"}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1526513360, "post_id": 50380933, "comment_id": 87778697, "body": "It&#39;s not too difficult, if you already know how to use dynamic allocation (e.g. <code>int *Z = new int[5];</code>)."}, {"owner": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 0, "creation_date": 1526555631, "post_id": 50380933, "comment_id": 87795471, "body": "Related: <a href=\"https://stackoverflow.com/q/11169418/1025391\">stackoverflow.com/q/11169418/1025391</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4313, "user_id": 2706707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BoAxS.gif?s=128&g=1", "display_name": "D&#250;thomhas", "link": "https://stackoverflow.com/users/2706707/d%c3%bathomhas"}, "is_accepted": false, "score": 2, "last_activity_date": 1526514070, "creation_date": 1526514070, "answer_id": 50381397, "question_id": 50380933, "link": "https://stackoverflow.com/questions/50380933/create-a-multi-dimensional-array-with-a-number-of-n-dimensions/50381397#50381397", "title": "Create a multi-dimensional array with a number of n dimensions", "body": "<p>The C++ language does not have provision for variable-sized or variable-dimensioned arrays.</p>\n\n<p>You can, however, create a class to encapsulate these behaviors.</p>\n\n<p>The important characteristic is the <em>dimensions</em>. You can use a <code>std::vector&lt;int&gt;</code> to track the number of elements per dimension; for example, <code>{3, 4, 5}</code> to represent a three-dimensional matrix where the rank of the innermost dimension is 3, the middle 4, and the outer 5. </p>\n\n<p>Use a templated vector or deque to allocate space for the elements. The number of elements required is the product of the dimension ranks. (You can use <code>std::accumulate</code> with a multiplication operator to compute this over your ranks vector.)</p>\n\n<p>Next, you'll need a method that takes some object (say, a vector of int) that provides all the indices into the MD-array necessary to access an element. You can provide overloads that take a variable number of arguments using some fancy template metaprogramming.</p>\n\n<p>All of this is overkill outside of some very specialized uses, such as: you are writing Mathematica-like software that allows users to play with these things.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1526523198, "post_id": 50381409, "comment_id": 87780595, "body": "Identifiers containing <code>__</code> are reserved for implementation use; you should call your wildcard something else"}, {"owner": {"reputation": 101, "user_id": 8110110, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211228815790199/picture?type=large", "display_name": "Kristofer Bj&#246;rnson", "link": "https://stackoverflow.com/users/8110110/kristofer-bj%c3%b6rnson"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1526550295, "post_id": 50381409, "comment_id": 87792098, "body": "There are three underscores rather than two and the identifier is not in the global namespace. Is it still problematic? In fact, the three underscores are syntactic sugar for the longer identifier IDX_ALL."}, {"owner": {"reputation": 101, "user_id": 8110110, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211228815790199/picture?type=large", "display_name": "Kristofer Bj&#246;rnson", "link": "https://stackoverflow.com/users/8110110/kristofer-bj%c3%b6rnson"}, "edited": false, "score": 0, "creation_date": 1526557542, "post_id": 50381409, "comment_id": 87796753, "body": "Thanks! I will likely change to _w_ in the future then, which seems to be fine as long as it is not in the global namespace. However, I&#39;m perplexed by the reason why any combination of double underscores is reserved in any namespace. It seems to me that there are many cases where multiple adjacent underscores in the middle of a name should be without risk of ever clashing with anything else. I aslo wonder why I have never seen a compiler warning about this if it is in the standard?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1526559048, "post_id": 50381409, "comment_id": 87797699, "body": "It gives the implementation freedom to use #defines without risk of program clash.  The standard doesn&#39;t require compilers to warn, it&#39;s just UB with no diagnostic required"}], "tags": [], "owner": {"reputation": 101, "user_id": 8110110, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211228815790199/picture?type=large", "display_name": "Kristofer Bj&#246;rnson", "link": "https://stackoverflow.com/users/8110110/kristofer-bj%c3%b6rnson"}, "is_accepted": false, "score": 1, "last_activity_date": 1526515497, "last_edit_date": 1526515497, "creation_date": 1526514186, "answer_id": 50381409, "question_id": 50380933, "link": "https://stackoverflow.com/questions/50380933/create-a-multi-dimensional-array-with-a-number-of-n-dimensions/50381409#50381409", "title": "Create a multi-dimensional array with a number of n dimensions", "body": "<p>You may be interested in an array class I implemented a few months ago that aims to provide a syntax for arrays that mimics that of matlab arrays. It utilizes initilizer_list syntax to allow for arbitrary dimensional arrays to be created using</p>\n\n<pre><code>Array&lt;double&gt; array({10, 20, 30});\n</code></pre>\n\n<p>You can then access and modify individual elements using</p>\n\n<pre><code>double d = array[{1, 2, 3}];\narray[{1, 2, 3}] = 10;\n</code></pre>\n\n<p>And even slice the matrix up into pieces using</p>\n\n<pre><code>array.getSlice({___, 3, 4});\n</code></pre>\n\n<p>where \"___\" is used as a wildcard.</p>\n\n<p>See more on: <a href=\"http://www.second-quantization.com/Array.html\" rel=\"nofollow noreferrer\">http://www.second-quantization.com/Array.html</a></p>\n\n<p>Implementation: <a href=\"https://github.com/dafer45/TBTK/blob/master/Lib/include/Utilities/TBTK/Array.h\" rel=\"nofollow noreferrer\">https://github.com/dafer45/TBTK/blob/master/Lib/include/Utilities/TBTK/Array.h</a></p>\n"}, {"tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1526555174, "last_edit_date": 1526555174, "creation_date": 1526522399, "answer_id": 50382294, "question_id": 50380933, "link": "https://stackoverflow.com/questions/50380933/create-a-multi-dimensional-array-with-a-number-of-n-dimensions/50382294#50382294", "title": "Create a multi-dimensional array with a number of n dimensions", "body": "<p>Solution for object let's the user choose the number of dimensions. A little robust, my C++ maybe is not the best, but it was fun implementing. <code>nvector&lt;T&gt;</code> represents resizable (in dimensions and count of elements in each dimension) array of element of T type, although only some resize functions are implemented. <code>narray&lt;T&gt;</code> is the same, but the number of dimensions is not resizable. This works around the idea of recalculating index position of a multidimensional array using a single continuous array.</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;cstddef&gt;\n#include &lt;cstdarg&gt;\n#include &lt;algorithm&gt;\n#include &lt;numeric&gt;\n#include &lt;cassert&gt;\n#include &lt;memory&gt;\n#include &lt;cstring&gt;\nusing namespace std;\n\ntemplate&lt;typename T&gt;\nclass narray {\npublic:\n    static size_t compute_size(initializer_list&lt;size_t&gt;&amp; dims) {\n        return accumulate(dims.begin(), dims.end(), 1, multiplies&lt;size_t&gt;());\n    }\n    static size_t compute_size(vector&lt;size_t&gt;&amp; dims) {\n        return accumulate(dims.begin(), dims.end(), 1, multiplies&lt;size_t&gt;());\n    }\n    static size_t compute_distance(vector&lt;size_t&gt;&amp; dims) {\n        return dims.size() &gt; 1 ? dims[1] : 1;\n    }\n    static vector&lt;size_t&gt; remove_one_dim(vector&lt;size_t&gt; dims_) {\n        return vector&lt;size_t&gt;(dims_.begin() + 1, dims_.end());\n    }\n\n    narray(initializer_list&lt;size_t&gt; dims, T* data) :\n        dims_(dims), data_(data) {}\n    narray(vector&lt;size_t&gt; dims, T* data) :\n        dims_(dims), data_(data) {}\n\n    T operator*() {\n        return *data_;\n    }\n    T* operator&amp;() {\n        return data_;\n    }\n    void operator=(T v) {\n        if (dims_.size() != 0)\n            throw runtime_error(__PRETTY_FUNCTION__);\n        *data_ = v;\n    }\n    void operator=(initializer_list&lt;T&gt; v) {\n        if (v.size() &gt; size())\n            throw runtime_error(__PRETTY_FUNCTION__);\n        copy(v.begin(), v.end(), data_);\n    }\n    T* data() {\n        return data_;\n    }\n    T* data_last() {\n        return &amp;data()[compute_size(dims_)];\n    }\n    size_t size() {\n        return compute_size(dims_);\n    }\n    size_t size(size_t idx) {\n        return dims_[idx];\n    }\n    narray&lt;T&gt; operator[](size_t idx) {\n        if (dims_.size() == 0)\n            throw runtime_error(__PRETTY_FUNCTION__);\n        return narray&lt;T&gt;(remove_one_dim(dims_),\n                &amp;data_[idx * compute_distance(dims_)]);\n    }\n\n    class iterator {\n    public:\n        iterator(initializer_list&lt;size_t&gt;&amp; dims, T* data) :\n            dims_(dims), data_(data) { }\n        iterator(vector&lt;size_t&gt;&amp; dims, T* data) :\n            dims_(dims), data_(data) { }\n        iterator operator++() {\n            iterator i = *this;\n            data_ += compute_distance(dims_);\n            return i;\n        }\n        narray&lt;T&gt; operator*() {\n            return narray&lt;T&gt;(remove_one_dim(dims_), data_);\n        }\n        bool operator!=(const iterator&amp; rhs) {\n            if (dims_ != rhs.dims_)\n                throw runtime_error(__PRETTY_FUNCTION__);\n            return data_ != rhs.data_;\n        }\n    private:\n        vector&lt;size_t&gt; dims_;\n        T* data_;\n    };\n\n    iterator begin() {\n        return iterator(dims_, data());\n    }\n    iterator end() {\n        return iterator(dims_, data_last());\n    }\nprivate:\n    vector&lt;size_t&gt; dims_;\n    T* data_;\n};\n\ntemplate&lt;typename T&gt;\nclass nvector {\npublic:\n    nvector(initializer_list&lt;size_t&gt; dims) :\n        dims_(dims), data_(narray&lt;T&gt;::compute_size(dims)) {}\n    nvector(vector&lt;size_t&gt; dims) :\n        dims_(dims), data_(narray&lt;T&gt;::compute_size(dims)) {}\n    nvector(initializer_list&lt;size_t&gt; dims, T* data) :\n        dims_(dims), data_(data) {}\n    nvector(vector&lt;size_t&gt; dims, T* data) :\n        dims_(dims), data_(data) {}\n\n    T* data() {\n        return data_.data();\n    }\n    T* data_last() {\n        return &amp;data()[narray&lt;T&gt;::compute_size(dims_)];\n    }\n    size_t size() {\n        return narray&lt;T&gt;::compute_size(dims_);\n    }\n    narray&lt;T&gt; operator&amp;() {\n        return narray&lt;T&gt;(dims_, data());\n    }\n    narray&lt;T&gt; operator[](size_t idx) {\n        if (dims_.size() == 0)\n            throw runtime_error(__PRETTY_FUNCTION__);\n        return narray&lt;T&gt;(narray&lt;T&gt;::remove_one_dim(dims_),\n                &amp;data()[idx * narray&lt;T&gt;::compute_distance(dims_)]);\n    }\n    void operator=(initializer_list&lt;T&gt; v) {\n        if (v.size() &gt; size())\n            throw runtime_error(__PRETTY_FUNCTION__);\n        copy(v.begin(), v.end(), data_.begin());\n    }\n    auto begin() {\n        return typename narray&lt;T&gt;::iterator(dims_, data());\n    }\n    auto end() {\n        return typename narray&lt;T&gt;::iterator(dims_, data_last());\n    }\n\n    // add and remove dimensions\n    void dimension_push_back(size_t dimsize) {\n        dims_.push_back(dimsize);\n        data_.resize(size());\n    }\n    void dimension_pop_back() {\n        dims_.pop_back();\n        data_.resize(size());\n    }\n    // TODO: resize dimension of index idx?\n\nprivate:\n    vector&lt;size_t&gt; dims_;\n    vector&lt;T&gt; data_;\n};\n\nint main()\n{\n    nvector&lt;int&gt; A({2, 3});\n    A = { 1,2,3, 4,5,6 };\n    assert(A.size() == 6);\n    assert(&amp;A[0] == &amp;A.data()[0]);\n    assert(&amp;A[0][0] == &amp;A.data()[0]);\n    assert(&amp;A[1] == &amp;A.data()[3]);\n    assert(&amp;A[0][1] == &amp;A.data()[1]);\n    assert(&amp;A[1][1] == &amp;A.data()[4]);\n\n    cout &lt;&lt; \"Currently array has \" &lt;&lt; A.size() &lt;&lt; \" elements: \" &lt;&lt; endl;\n    for(narray&lt;int&gt; arr1 : A) { // we iterate over arrays/dimensions\n        for(narray&lt;int&gt; arr2 : arr1) { // the last array has no dimensions\n            cout &lt;&lt; \"elem: \" &lt;&lt; *arr2 &lt;&lt; endl;\n        }\n    }\n    cout &lt;&lt; endl;\n\n    // assigment example\n    cout &lt;&lt; \"Now it is 4:  \" &lt;&lt; *A[1][0] &lt;&lt; endl;\n    A[1][0] = 10;\n    cout &lt;&lt; \"Now it is 10: \" &lt;&lt; *A[1][0] &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>This code needs still much more work. It works only as a simple example. Maybe use shared_ptr in narray? Implement better exceptions?\nSo creating an array of n=5 dimensions with sizes size1, size2, size3, size4 and size5 would like this:</p>\n\n<pre><code> narray&lt;int&gt; arr({size1, size2, size3, size4, size5});\n arr[0][1][2][3][4] = 5; // yay!\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9476806"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1526555174, "creation_date": 1526510604, "question_id": 50380933, "link": "https://stackoverflow.com/questions/50380933/create-a-multi-dimensional-array-with-a-number-of-n-dimensions", "title": "Create a multi-dimensional array with a number of n dimensions", "body": "<p>I've been thinking if it is possible to actually let the user decide how many \"dimensions\" an array should have, based on a number given.</p>\n\n<p>Let <code>n</code> be the number of dimensions, the user will type in its value.\nIt will create an array with n dimensions.</p>\n\n<p>Example: for <code>n=5</code>, it will create an array called list, like that: <code>int list[size1][size2][size3][size4][size5]</code>.\nsize variables will still be mentioned by the user, but that's actually part 2.</p>\n\n<p>I want to know if I can add more dimensions to an array, after I have declared it. And if not, I want to find a solution to this problem.</p>\n"}, {"tags": ["c++", "inheritance", "virtual-functions", "memory-layout"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1526509679, "post_id": 50380757, "comment_id": 87777745, "body": "Child-classes contains <i>all</i> members from <i>all</i> base classes, no matter if they&#39;re <code>public</code>, <code>protected</code> <i>or</i> <code>private</code>. Those keywords are only for <i>access</i> to the members."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1526509728, "post_id": 50380757, "comment_id": 87777762, "body": "Which compiler? what platform? What code <i>exactly</i> did you compile?"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1526509919, "post_id": 50380757, "comment_id": 87777814, "body": "Are you asking aht the area with the question marks is? What is sizeof(string)?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7867434"}, "edited": false, "score": 0, "creation_date": 1526510066, "post_id": 50380757, "comment_id": 87777856, "body": "Someprogrammerdude Thanks for confirming that. That&#39;s exactly what I though.  einpoklum It&#39;s a cross platform library I&#39;m working on, so basically any compiler.  RetiredNinja that also kept me curious."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1526510180, "post_id": 50380757, "comment_id": 87777882, "body": "Gilad, 1. you need to use the at-sign to reply. 2. Never mind that it&#39;s cross-platform compilation - so give us the source and target platforms and the compiler name and version."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1526510721, "post_id": 50380757, "comment_id": 87778038, "body": "Take a more informed look at your memory window: <a href=\"https://ideone.com/PWblN3\" rel=\"nofollow noreferrer\">ideone.com/PWblN3</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7867434"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1526511151, "post_id": 50380757, "comment_id": 87778156, "body": "@einpoklum Thanks for the tip! RetiredNinja - That makes much more sense now :) Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 1, "last_activity_date": 1526512464, "creation_date": 1526512464, "answer_id": 50381199, "question_id": 50380757, "link": "https://stackoverflow.com/questions/50380757/inheritance-protected-members-variables-copies-in-memory/50381199#50381199", "title": "Inheritance protected members variables copies in memory", "body": "<blockquote>\n  <p>I got told that if i do inheritance when the base class contains protected member variables and a child class will construct the base class, it will duplicate it's members in memory.  ...  it'll allocate 2 times memory for <code>m_sound</code> and <code>m_age</code>.</p>\n</blockquote>\n\n<p>Nope.  In your example, every object of type <code>Dog</code> contains just two subobjects of <code>int</code> and one subobject of type <code>std::string</code>.  A compiler would technically be allowed to use more storage than necessary, but there would be no reason to, and the program would not be allowed to have different addresses for the same member or multiple <code>std::string</code> constructor or destructor calls.</p>\n\n<p>Without knowing your source, there's not much more to say about that.</p>\n\n<blockquote>\n  <p>What exactly gets allocated in memory where the questions marks between the parent class data and the child?</p>\n</blockquote>\n\n<p>The details depend on your compiler and standard library, but most likely all or most of the bytes between what you identified as <code>m_age</code> and <code>m_speed</code> belong to the <code>std::string m_sound</code> member subobject.  That is, I'm guessing that if you did <code>std::cout &lt;&lt; sizeof(std::string) &lt;&lt; \"\\n\";</code>, you would get 28 or close to it.</p>\n\n<p>Because of the way the C++ object model works, <code>sizeof(std::string)</code> is a constant, and every <code>std::string</code> only gets a fixed number of bytes, but a string can \"contain\" many characters.  This normally means the <code>std::string</code> has a <code>char*</code> pointer to dynamically allocated memory which holds the actual characters.  It will in general also need a way to know the length of the string and the capacity of the dynamically allocated buffer.</p>\n\n<p>But as you noticed, the character values of your string actually appear within the memory of the <code>std::string</code> object directly, which probably means your standard library implementation is using the <a href=\"https://akrzemi1.wordpress.com/2014/04/14/common-optimizations/\" rel=\"nofollow noreferrer\">Small String Optimization</a>: a <code>std::string</code> can contain either a <code>char*</code> pointer and length and capacity, or a certain number of character values directly.  (This can reduce the need to dynamically allocate and deallocate memory, which can take a lot of CPU time if used often enough.)  The <code>std::string</code> will also need some way of knowing whether it's currently in pointer mode or direct storage mode, and that information is presumably somewhere in the later bytes.</p>\n\n<p>To decipher exactly what each byte in a <code>std::string</code> means, you would need to look up the definition of class template <code>std::basic_string</code> in the header files used by your compiler. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7867434"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 50381199, "answer_count": 1, "score": 0, "last_activity_date": 1526512724, "creation_date": 1526509425, "last_edit_date": 1526510074, "question_id": 50380757, "link": "https://stackoverflow.com/questions/50380757/inheritance-protected-members-variables-copies-in-memory", "title": "Inheritance protected members variables copies in memory", "body": "<p>I got told that if i do inheritance when the base class contains protected member variables and a child class will construct the base class, it will duplicate it's members in memory. Example:</p>\n\n<pre><code>class Animal\n{\npublic:\n    virtual std::string&amp; sound() { return m_sound; }\n    virtual void setSound(std::string&amp; sound) { m_sound = sound; }\n    virtual int age() { return m_age; }\n    virtual void setAge(int age) { m_age = age; }\nprotected:\n    Animal(std::string sound, int age) : m_sound(sound), m_age(age) { }\n\n    int m_age;\n    std::string m_sound;\n};\n\nclass Dog : public Animal\n{\npublic:\n    Dog(int speed) : Animal(\"Waff!!\", 3), m_speed(speed) {}\n    virtual int speed() { return m_speed; }\n    virtual void setSpeed(int speed) { m_speed = speed; }\nprotected:\n    int m_speed;\n};\n</code></pre>\n\n<p>So using the example above, what I meant in other words, that if I create a <code>Dog</code> object, it'll allocate 2 times memory for m_sound and m_age.\n<br>\nThat completely didn't make any sense to me and I've been wondering why would the compiler would do such a thing unless the information I heard is misleading.<br>\nSo say in main we create:</p>\n\n<pre><code>Dog bulldog(5);\n</code></pre>\n\n<p>Debugging this code and looking at the memory here is what I got:<br>\n<a href=\"https://i.stack.imgur.com/4MYKF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4MYKF.png\" alt=\"enter image description here\"></a></p>\n\n<p>I would like to know what exactly gets allocated in the region of memory where the questions marks between the parent class data and the child.</p>\n"}, {"tags": ["c++", "xcode", "sfml"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5725359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1f4259653e55d62668c98a7de8201b6?s=128&d=identicon&r=PG&f=1", "display_name": "Au5", "link": "https://stackoverflow.com/users/5725359/au5"}, "is_accepted": false, "score": 0, "last_activity_date": 1526602833, "creation_date": 1526602833, "answer_id": 50402124, "question_id": 50380741, "link": "https://stackoverflow.com/questions/50380741/flac-framework-error/50402124#50402124", "title": "FLAC.framework error", "body": "<p>There was an error with the way i had installed SFML. If anyone comes across this error then please go back and install the dylib option of sfml. that is how my issue was resolved. </p>\n"}], "owner": {"reputation": 11, "user_id": 5725359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1f4259653e55d62668c98a7de8201b6?s=128&d=identicon&r=PG&f=1", "display_name": "Au5", "link": "https://stackoverflow.com/users/5725359/au5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1526602833, "creation_date": 1526509350, "question_id": 50380741, "link": "https://stackoverflow.com/questions/50380741/flac-framework-error", "title": "FLAC.framework error", "body": "<p>I am trying to learn how to use SFML however when i try to compile my c++ code i get Xcode telling me<code>Command /bin/sh failed with exit code 2</code>. this is the error i get when i click more info</p>\n\n<blockquote>\n  <p>ditto: can't get real path for source\n  '/Library/Frameworks/FLAC.framework' couldn't copy\n  /Library/Frameworks/FLAC.framework to\n  /Users/tris/Library/Developer/Xcode/DerivedData/idk-ckysmijtsswdysecxtelmnggzhun/Build/Products/Debug/idk.app/Contents/Frameworks//FLAC.framework\n  Command /bin/sh failed with exit code 2</p>\n</blockquote>\n\n<p>how would i go about fixing this? i have tried reinstalling the Command line tools packaged with xcode. </p>\n\n<p>thanks. </p>\n"}, {"tags": ["c++", "oop", "c++11", "templates", "variadic-templates"], "comments": [{"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 1, "creation_date": 1526510441, "post_id": 50380730, "comment_id": 87777952, "body": "Inheritance is not the right way to share common code. You can do that with simple composition."}, {"owner": {"reputation": 7463, "user_id": 1145760, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/065408758852145010d28c2aa811ca68?s=128&d=identicon&r=PG", "display_name": "Vorac", "link": "https://stackoverflow.com/users/1145760/vorac"}, "edited": false, "score": 0, "creation_date": 1526510472, "post_id": 50380730, "comment_id": 87777959, "body": "No, overloading and overriding are  mutually exclusive. Yet another of the evil traits of virtual functions."}, {"owner": {"reputation": 447, "user_id": 782130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6959b42080c140ab4bfb6e58c8de449c?s=128&d=identicon&r=PG", "display_name": "MetroWind", "link": "https://stackoverflow.com/users/782130/metrowind"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1526510504, "post_id": 50380730, "comment_id": 87777967, "body": "@Frank, so what should I do in this case?"}, {"owner": {"reputation": 27690, "user_id": 362589, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/125a471032cdef6e8de28ff6d54c7324?s=128&d=identicon&r=PG", "display_name": "Dani", "link": "https://stackoverflow.com/users/362589/dani"}, "edited": false, "score": 0, "creation_date": 1526510565, "post_id": 50380730, "comment_id": 87777986, "body": "What about moving the template from the method to the class?"}, {"owner": {"reputation": 447, "user_id": 782130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6959b42080c140ab4bfb6e58c8de449c?s=128&d=identicon&r=PG", "display_name": "MetroWind", "link": "https://stackoverflow.com/users/782130/metrowind"}, "reply_to_user": {"reputation": 27690, "user_id": 362589, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/125a471032cdef6e8de28ff6d54c7324?s=128&d=identicon&r=PG", "display_name": "Dani", "link": "https://stackoverflow.com/users/362589/dani"}, "edited": false, "score": 0, "creation_date": 1526510634, "post_id": 50380730, "comment_id": 87778006, "body": "@Dani, that&#39;s the 1st version of <code>process_interface</code>. It doesn&#39;t work because of the overloading in <code>process2</code>."}], "answers": [{"comments": [{"owner": {"reputation": 447, "user_id": 782130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6959b42080c140ab4bfb6e58c8de449c?s=128&d=identicon&r=PG", "display_name": "MetroWind", "link": "https://stackoverflow.com/users/782130/metrowind"}, "edited": false, "score": 0, "creation_date": 1526511751, "post_id": 50380942, "comment_id": 87778331, "body": "This could work. But it seems to have the same problems as my 2nd version of <code>process_interface</code>, in that it doesn&#39;t force the subclasses to have a set of <code>do_stuff()</code> with the correct arguments."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "reply_to_user": {"reputation": 447, "user_id": 782130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6959b42080c140ab4bfb6e58c8de449c?s=128&d=identicon&r=PG", "display_name": "MetroWind", "link": "https://stackoverflow.com/users/782130/metrowind"}, "edited": false, "score": 0, "creation_date": 1526512437, "post_id": 50380942, "comment_id": 87778510, "body": "@MetroWind The compiler will just tell you if try to use a version that&#39;s not implemented. And if you are missing an implementation that&#39;s not used anywhere, then it&#39;s dead code and is better left unwritten."}], "tags": [], "owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "is_accepted": false, "score": 0, "last_activity_date": 1526511171, "last_edit_date": 1526511171, "creation_date": 1526510677, "answer_id": 50380942, "question_id": 50380730, "link": "https://stackoverflow.com/questions/50380730/interface-class-with-method-overloads/50380942#50380942", "title": "Interface class with method overloads?", "body": "<p>This is a great case to illustrate why common functionallity sharing is better handled through composition than inheritance.</p>\n\n<p>Here's a super simple way of getting what you want without any inheritance whatsoever:</p>\n\n<pre><code>class common_interface {\n   template &lt;class T&gt;\n   void do_stuff(std::vector&lt;T&gt;&amp; \u2026)\n   {\n     //...\n   }\n};\n\nclass process_1 {\n  common_interface common_;\npublic:\n   void do_stuff(std::vector&lt;A&gt;&amp; v) {\n     common_.do_stuff(v);\n     //...\n   }\n};\n\nclass process_2 {\n  common_interface common_;\npublic:\n   void do_stuff(std::vector&lt;B&gt;&amp; v) {\n     common_.do_stuff(v);\n     //...\n   }\n\n  void do_stuff(std::vector&lt;C&gt;&amp; v) {\n     common_.do_stuff(v);\n     //...\n  }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 1, "last_activity_date": 1526522911, "last_edit_date": 1526522911, "creation_date": 1526521883, "answer_id": 50382225, "question_id": 50380730, "link": "https://stackoverflow.com/questions/50380730/interface-class-with-method-overloads/50382225#50382225", "title": "Interface class with method overloads?", "body": "<p>Maybe you can make <code>process2</code> (and all classes with need of more <code>do_stuff()</code> a sort of variadic self inheriting class.</p>\n\n<p>Something as</p>\n\n<pre><code>template &lt;typename...&gt;\nstruct process2;\n\ntemplate &lt;typename T&gt;\nstruct process2&lt;T&gt; : public process_interface&lt;T&gt;\n { };\n\n\ntemplate &lt;typename T0, typename ... Ts&gt;\nstruct process2&lt;T0, Ts...&gt; : public process_interface&lt;T0&gt;,\n                             public process2&lt;Ts...&gt;\n {\n   using process_interface&lt;T0&gt;::do_stuff;\n   using process2&lt;Ts...&gt;::do_stuff;\n };\n</code></pre>\n\n<p>The following is a full working example</p>\n\n<pre><code>#include &lt;vector&gt;\n\nclass A {};\nclass B {};\nclass C {};\nclass D {};\n\ntemplate &lt;typename T&gt;\nstruct process_interface\n {\n   virtual void do_stuff (std::vector&lt;T&gt; const &amp;)\n    { }\n };\n\nstruct process1 : public process_interface&lt;A&gt;\n { };\n\ntemplate &lt;typename...&gt;\nstruct process2;\n\ntemplate &lt;typename T&gt;\nstruct process2&lt;T&gt; : public process_interface&lt;T&gt;\n { };\n\n\ntemplate &lt;typename T0, typename ... Ts&gt;\nstruct process2&lt;T0, Ts...&gt; : public process_interface&lt;T0&gt;,\n                             public process2&lt;Ts...&gt;\n {\n   using process_interface&lt;T0&gt;::do_stuff;\n   using process2&lt;Ts...&gt;::do_stuff;\n };\n\nint main ()\n {\n   process1           p1;\n   process2&lt;B, C, D&gt;  p2;\n\n   p1.do_stuff(std::vector&lt;A&gt;{});\n   p2.do_stuff(std::vector&lt;B&gt;{});\n   p2.do_stuff(std::vector&lt;C&gt;{});\n   p2.do_stuff(std::vector&lt;D&gt;{});\n }\n</code></pre>\n\n<p>Starting from C++17, there is no needs of a self-recursive <code>process2</code>: you can use unpacking <code>using</code> and <code>process2</code> simply become</p>\n\n<pre><code>template &lt;typename ... Ts&gt;\nstruct process2 : public process_interface&lt;Ts&gt;...\n {\n   using process_interface&lt;Ts&gt;::do_stuff ... ; \n };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "is_accepted": false, "score": 1, "last_activity_date": 1526532324, "creation_date": 1526532324, "answer_id": 50383479, "question_id": 50380730, "link": "https://stackoverflow.com/questions/50380730/interface-class-with-method-overloads/50383479#50383479", "title": "Interface class with method overloads?", "body": "<p>Use your first version and use multiple inheritance:</p>\n\n<pre><code>class process2 : process_interface&lt;B&gt;, process_interface&lt;C&gt; {\npublic:\n    using process_interface&lt;B&gt;::do_stuff;\n    using process_interface&lt;C&gt;::do_stuff;\n};\n</code></pre>\n\n<p>Note the using declarations bring <code>do_stuff</code> in the base classes to <code>process2</code> itself, so both can be found by name lookup, then participate in overload resolution.</p>\n\n<p><a href=\"https://wandbox.org/permlink/W3MbScxXilI4CKHH\" rel=\"nofollow noreferrer\">A Complete Example</a></p>\n"}], "owner": {"reputation": 447, "user_id": 782130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6959b42080c140ab4bfb6e58c8de449c?s=128&d=identicon&r=PG", "display_name": "MetroWind", "link": "https://stackoverflow.com/users/782130/metrowind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1526532324, "creation_date": 1526509285, "last_edit_date": 1526522267, "question_id": 50380730, "link": "https://stackoverflow.com/questions/50380730/interface-class-with-method-overloads", "title": "Interface class with method overloads?", "body": "<p>Suppose I have some types</p>\n\n<pre><code>class A {\u2026};\nclass B {\u2026};\nclass C {\u2026};\n...\n</code></pre>\n\n<p>And I have some other classes that does various things on objects of these types</p>\n\n<pre><code>class process1\n{\npublic:\n    void do_stuff(std::vector&lt;A&gt;&amp; \u2026);\n};\n\nclass process2\n{\npublic:\n    void do_stuff(std::vector&lt;B&gt;&amp; \u2026);\n    void do_stuff(std::vector&lt;C&gt;&amp; \u2026);\n};\n\n...\n</code></pre>\n\n<p>These \"process\" classes share some common interface (<code>do_stuff()</code>), so naturally I want to make an class/template to \"regulate\" how these classes should be written. I want to have something like</p>\n\n<pre><code>template &lt;class T&gt;\nclass process_interface\n{\npublic:\n    virtual void do_stuff(std::vector&lt;T&gt;&amp; \u2026)\n    {\n        // Default implementation.\n    }\n\n    // I might also want this.\n    // virtual void do_other_stuff(std::vector&lt;T&gt;&amp; \u2026) = 0;\n};\n</code></pre>\n\n<p>and let <code>process1</code> and <code>process2</code> derive from it. In this way I'm saying that all \"process\" classes should have a <code>do_stuff()</code>, and that one doesn't necessarily need to write it explicitly because there a default version. </p>\n\n<p>But of course this doesn't work, because <code>process2</code> has 2 versions of <code>do_stuff()</code>. (Some other \"process\" classes may have more.) So is there a way to achieve what I want to with this \"interface\" class/template? I was thinking using a variadic template but I suppose that won't work either.</p>\n\n<p>For now what I have is this:</p>\n\n<pre><code>class process_interface\n{\npublic:\n    template &lt;class T&gt;\n    void do_stuff(std::vector&lt;T&gt;&amp; \u2026)\n    {\n        // Default implementation.\n    }\n\n    // template &lt;class T&gt;\n    // void do_other_stuff(std::vector&lt;T&gt;&amp; \u2026)\n    // {\n    //     throw std::runtime_error(\"Nope.\");\n    // }\n};\n</code></pre>\n\n<p>But it has problems. For one, <code>do_stuff()</code> cannot be virtual/pure virtual. And if I have other methods that need the same treatment, like the <code>do_other_stuff()</code> there, there's no way to force the subclasses to have a <code>do_other_stuff()</code> for each type that one can <code>do_stuff()</code> on.</p>\n"}, {"tags": ["c++", "class", "inheritance"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1526508633, "post_id": 50380563, "comment_id": 87777411, "body": "Inheritance is an &quot;is-a&quot; relationship. Since e.g. <code>Barbarian</code> doesn&#39;t inherit from <code>Entity</code> it&#39;s not an <code>Entity</code> and your initialization of <code>p</code> is incorrect."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1526517837, "post_id": 50380563, "comment_id": 87779640, "body": "Wouldn&#39;t an enemy be a character?"}], "answers": [{"comments": [{"owner": {"reputation": 5867, "user_id": 9125195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75fc90d1f6de6ff28c739b85bdb82f4c?s=128&d=identicon&r=PG&f=1", "display_name": "Sid S", "link": "https://stackoverflow.com/users/9125195/sid-s"}, "edited": false, "score": 1, "creation_date": 1526508892, "post_id": 50380616, "comment_id": 87777483, "body": "There is no need to cast any derived pointers to <code>Entity *</code>.  An <code>Enemy</code> <i>is</i> an <code>Entity</code>.  A <code>Character</code> <i>is</i> an <code>Entity</code>."}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "reply_to_user": {"reputation": 5867, "user_id": 9125195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75fc90d1f6de6ff28c739b85bdb82f4c?s=128&d=identicon&r=PG&f=1", "display_name": "Sid S", "link": "https://stackoverflow.com/users/9125195/sid-s"}, "edited": false, "score": 0, "creation_date": 1526508991, "post_id": 50380616, "comment_id": 87777522, "body": "I mean <i>upcasting</i>."}], "tags": [], "owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "is_accepted": false, "score": 2, "last_activity_date": 1526508625, "creation_date": 1526508625, "answer_id": 50380616, "question_id": 50380563, "link": "https://stackoverflow.com/questions/50380563/c-creating-array-of-derived-classes-of-two-separate-abstract-classes/50380616#50380616", "title": "C++ Creating array of derived classes of two separate abstract classes", "body": "<p>The simplest way, probably, is do it in reverse:</p>\n\n<pre><code>struct Entity {\n    virtual ~Entity = default;\n};\nstruct Enemy: Entity {};\nstruct Character: Entity {};\n</code></pre>\n\n<p>Then there won't be problems with casting a pointer to any creature to an <code>Entity *</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1526510187, "post_id": 50380626, "comment_id": 87777883, "body": "<code>public Entity</code> sounds like a great name for a nerdcore rap act."}, {"owner": {"reputation": 73, "user_id": 8369082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6f92809550104e0d20b3afc86dd5146?s=128&d=identicon&r=PG&f=1", "display_name": "nivalen292", "link": "https://stackoverflow.com/users/8369082/nivalen292"}, "edited": false, "score": 0, "creation_date": 1526511969, "post_id": 50380626, "comment_id": 87778378, "body": "Also would it be okay if I leave the Entity class empty besides the virtual destructor."}, {"owner": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "edited": false, "score": 0, "creation_date": 1526576155, "post_id": 50380626, "comment_id": 87809373, "body": "When you make an array of an Abstract Base class (Entity), it implies that you will use common functionality that is the same across ALL derived classes. For example, let&#39;s say you want ALL the entities to be able to have some kind of AI functionality. The Entity class could have some function called <code>ent-&gt;startAI()</code>, which ALL derived classes must implement. (silly example, but this is to get the point across)"}], "tags": [], "owner": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "is_accepted": true, "score": 6, "last_activity_date": 1526510426, "last_edit_date": 1526510426, "creation_date": 1526508682, "answer_id": 50380626, "question_id": 50380563, "link": "https://stackoverflow.com/questions/50380563/c-creating-array-of-derived-classes-of-two-separate-abstract-classes/50380626#50380626", "title": "C++ Creating array of derived classes of two separate abstract classes", "body": "<p>It's the other way around. You should create an Entity abstract class. Character and Enemy should inherit the entity class.</p>\n\n<pre><code>class Character : public Entity\n\nclass Enemy : public Entity\n</code></pre>\n\n<p>Everything else you mentioned is fine. You would need to create an Array of the Entity class, and for each Entity, you can say <code>ent = new Barbarian()</code> or something like that.</p>\n"}, {"comments": [{"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1526509124, "post_id": 50380667, "comment_id": 87777577, "body": "Note that is still possible without <code>Enemy</code> and <code>Character</code> sharing a common base class, though notably less trivial, and comes for a price."}, {"owner": {"reputation": 73, "user_id": 8369082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6f92809550104e0d20b3afc86dd5146?s=128&d=identicon&r=PG&f=1", "display_name": "nivalen292", "link": "https://stackoverflow.com/users/8369082/nivalen292"}, "edited": false, "score": 0, "creation_date": 1526510382, "post_id": 50380667, "comment_id": 87777932, "body": "How can I do it without sharing the same base class?"}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 3, "last_activity_date": 1526508863, "creation_date": 1526508863, "answer_id": 50380667, "question_id": 50380563, "link": "https://stackoverflow.com/questions/50380563/c-creating-array-of-derived-classes-of-two-separate-abstract-classes/50380667#50380667", "title": "C++ Creating array of derived classes of two separate abstract classes", "body": "<p>No, you can't do it that way. With </p>\n\n<pre><code>class Entity : public Character, public Enemy {}\n</code></pre>\n\n<p>an <code>Entity</code> would always be both a <code>Character</code> and an <code>Enemy</code> the same time, but it could not be one (or more) of the subclasses like <code>Barbarian</code>.</p>\n\n<p>So <code>Entity* p = new Barbarian;</code> will not work.</p>\n\n<p>To achieve what you want, introduce <code>Entity</code> as a common base class for <code>Character</code> and <code>Enemy</code>:</p>\n\n<pre><code>class Entity {};\nclass Character : public Entity {};\nclass Barbarian : public Character {};\n...\nclass Enemy : public Entity {};\n...\nstd::vector&lt;Entity*&gt; e;\nBarbarian *b = new Barbarian();\ne.push_back(b);\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 8369082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6f92809550104e0d20b3afc86dd5146?s=128&d=identicon&r=PG&f=1", "display_name": "nivalen292", "link": "https://stackoverflow.com/users/8369082/nivalen292"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 50380626, "answer_count": 3, "score": 1, "last_activity_date": 1526510474, "creation_date": 1526508327, "last_edit_date": 1526510474, "question_id": 50380563, "link": "https://stackoverflow.com/questions/50380563/c-creating-array-of-derived-classes-of-two-separate-abstract-classes", "title": "C++ Creating array of derived classes of two separate abstract classes", "body": "<p>It might be a stupid question but I had to ask anyway. I have 2 separate abstract classes: <strong>Character</strong> and <strong>Enemy</strong>. <strong>Barbarian</strong> and <strong>Necromancer</strong> are derived from <strong>Character</strong>, <strong>Skeleton</strong> and <strong>Devil</strong> are derived from <strong>Enemy.</strong> My question is can I create an array of the derivations of both <strong>Character</strong> and <strong>Enemy</strong>. Could I create another class lets say <strong>Entity</strong> like this:</p>\n\n<pre><code>class Entity : public Character, public Enemy {};\n</code></pre>\n\n<p>Then I would create an array of pointers to <strong>Enemy</strong>.</p>\n\n<p>Can I do this somehow then:</p>\n\n<pre><code>Entity* p = new Barbarian;\n</code></pre>\n\n<p>Also if this is possible I suppose I would need a virtual destructor. How can I define this?</p>\n\n<p>EDIT: A foolish mistake of mine, the inheritance should be other way around and the question is can it be done as that?</p>\n"}, {"tags": ["c++", "cmake"], "answers": [{"comments": [{"owner": {"reputation": 1968, "user_id": 846641, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/q1FW7.jpg?s=128&g=1", "display_name": "Philipp", "link": "https://stackoverflow.com/users/846641/philipp"}, "edited": false, "score": 0, "creation_date": 1526547589, "post_id": 50386052, "comment_id": 87790198, "body": "Thanks for you answer. When you say &quot;... with <code>find_package</code> calls and everything&quot;. Could you elaborate what &#39;and everything&#39; entails? I will start reading the link you provided."}, {"owner": {"reputation": 42863, "user_id": 577603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/70c19b44cc2eb6f1a87a08fc892c502b?s=128&d=identicon&r=PG", "display_name": "ComicSansMS", "link": "https://stackoverflow.com/users/577603/comicsansms"}, "reply_to_user": {"reputation": 1968, "user_id": 846641, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/q1FW7.jpg?s=128&g=1", "display_name": "Philipp", "link": "https://stackoverflow.com/users/846641/philipp"}, "edited": false, "score": 0, "creation_date": 1526549411, "post_id": 50386052, "comment_id": 87791520, "body": "@Philipp Just that you should not make any assumptions about <i>lib</i> that you wouldn&#39;t have if you weren&#39;t also its author. Treat it as you would any other third-party dependency that is not under your control."}], "tags": [], "owner": {"reputation": 42863, "user_id": 577603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/70c19b44cc2eb6f1a87a08fc892c502b?s=128&d=identicon&r=PG", "display_name": "ComicSansMS", "link": "https://stackoverflow.com/users/577603/comicsansms"}, "is_accepted": true, "score": 1, "last_activity_date": 1526543748, "last_edit_date": 1526543748, "creation_date": 1526543357, "answer_id": 50386052, "question_id": 50380556, "link": "https://stackoverflow.com/questions/50380556/how-to-get-a-vs-solution-with-all-the-projects-and-solutions-for-single-projects/50386052#50386052", "title": "How to get a VS solution with all the projects and solutions for single projects with CMake", "body": "<p>CMake will create a solution for each call to <a href=\"https://cmake.org/cmake/help/v3.11/command/project.html\" rel=\"nofollow noreferrer\"><code>project</code></a>, which will then include all the targets of the current directory and its subdirectories (regardless whether they were defined before or after the actual call to <code>project</code>).</p>\n\n<p>Here's what a well-behaved CMake script should do: Each CMakeLists that you want to be able to act as a root of its own sub-tree within the larger project should start with a <code>cmake_minimum_required</code> call, followed by the <code>project</code> call. Writing <code>project</code> in a CMakeLists basically means: This is a fully self-contained component that can be built independently, even if you delete all the files from its parent directories. As such, it makes sense to have a separate solution for each such <code>project</code>.</p>\n\n<p>With this in mind we can see why this doesn't work in your case: Your apps are not fully self-contained, they depend on <em>lib</em>. The solution to this is to write the build scripts for the apps as if <em>lib</em> was provided as a third-party component, with <code>find_package</code> calls and everything.\nIn the compound build, you already have a target for <em>lib</em>, so the script invoked by the <code>find_package</code> call should be made to short-circuit to using that target and only actually go scavenging the system if it cannot find that existing target.</p>\n\n<p>Also read up on how <a href=\"https://cmake.org/cmake/help/v3.11/manual/cmake-packages.7.html\" rel=\"nofollow noreferrer\">CMake's packaging system</a> works, which provides some automation to handle such cases pretty elegantly.</p>\n"}], "owner": {"reputation": 1968, "user_id": 846641, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/q1FW7.jpg?s=128&g=1", "display_name": "Philipp", "link": "https://stackoverflow.com/users/846641/philipp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 50386052, "answer_count": 1, "score": 1, "last_activity_date": 1526543748, "creation_date": 1526508280, "question_id": 50380556, "link": "https://stackoverflow.com/questions/50380556/how-to-get-a-vs-solution-with-all-the-projects-and-solutions-for-single-projects", "title": "How to get a VS solution with all the projects and solutions for single projects with CMake", "body": "<p>TL;DR I basically want a modular solution of <a href=\"https://stackoverflow.com/questions/11196076/several-projects-in-one-solution-with-cmake-and-visual-studio\">this question</a>. Not only one solution with everything in it, but also a solution for each executable alone.</p>\n\n<hr>\n\n<p>In my question <a href=\"https://stackoverflow.com/questions/50330271/cmake-project-organisation?noredirect=1#comment87732039_50330271\">here</a> I wanted to know how I should split my CMakeLists.txt among different folders. Some folders contain code that will be a static library and some code will be executables or dynamic libraries that build on those static libraries.</p>\n\n<p>Folder structure looks like this:</p>\n\n<pre><code>/path/to/base/\n  CMakeLists.txt\n  app1/\n    &lt;src files for app1&gt;\n    CMakeLists.txt\n  app2/\n    &lt;src files for app2&gt;\n    CMakeLists.txt\n  lib/\n    &lt;src files for lib&gt;\n    CMakeLists.txt\n</code></pre>\n\n<p>If I take the approach of having a <code>CMakeLists.txt</code> in the parent folder to all my libraries and executables and from the include all the directories I have the problem that when I generate VS projects/solutions that my projects for each target contains all the projects - not only the ones necessary for my intended target.</p>\n\n<p>Contents of <code>CMakeLists.txt</code> in the base folder:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.1)\n\nadd_subdirectory(lib)\nadd_subdirectory(app1)\nadd_subdirectory(app2)\n</code></pre>\n\n<p>and the <code>CMakeLists.txt</code> in the app1 folder (app2 is equivalent)</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.1)\n\nproject(app1)\n\nadd_executable(app1 &lt;src of app1&gt;)\n\ntarget_link_libraries(app1 lib)\n</code></pre>\n\n<p>and <code>CMakeLists.txt</code> of lib:</p>\n\n<pre><code>add_library(lib &lt;src of lib&gt;)\n</code></pre>\n\n<p>If I run cmake on the <code>CMakeLists.txt</code> from base the solution contains all the projects. And even if I open just one of the projects; it also contains everything. VS project of app1 also builds app2 - which I don't want.</p>\n\n<p>If I only run cmake on the <code>CMakeLists.txt</code> of app1 I get a solution which doesn't contain app2 but it also doesn't contain lib, because that's only mentioned for linking inside the cmake file and not as a target (it's in the base file)</p>\n"}, {"tags": ["c++", "winapi", "gdi+"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1526509540, "post_id": 50380539, "comment_id": 87777704, "body": "There is no generic way to do what you want. The system metric values are wrong for themed UIs, and you cannot simply ask for the client rectangle either, since some applications (like Visual Studio) do not use a standard non-client area. And while this is starting to sound like an <a href=\"http://xyproblem.info\" rel=\"nofollow noreferrer\">XY Problem</a>, what are you ultimately trying to accomplish?"}, {"owner": {"reputation": 1751, "user_id": 1025124, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/66cd3dc00b09bf9504c0aebe06202d9f?s=128&d=identicon&r=PG", "display_name": "igal k", "link": "https://stackoverflow.com/users/1025124/igal-k"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1526510012, "post_id": 50380539, "comment_id": 87777835, "body": "I&#39;d like to save screenshots whenever a picture changes. though what earlierly mention in fact is change. I&#39;d like to take a screenshot(save the picture) whenever the drawing itself changes"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1526510654, "post_id": 50380539, "comment_id": 87778015, "body": "Are you asking about MS Paint in particular? Either way, though, your approach is brittle. Even if you identify the drawing area and compare screenshots, you&#39;ll get false positives whenever the user uses the scrollbar to move the drawing around. Or simply changes the zoom level. Or enables/disables pixel grids."}, {"owner": {"reputation": 1751, "user_id": 1025124, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/66cd3dc00b09bf9504c0aebe06202d9f?s=128&d=identicon&r=PG", "display_name": "igal k", "link": "https://stackoverflow.com/users/1025124/igal-k"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1526514765, "post_id": 50380539, "comment_id": 87779015, "body": "Not mspaint, a general solution. I\u2019d to exclude only sysmenu changes and general cursor flickering inside textbox controls"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1526545962, "post_id": 50380539, "comment_id": 87789166, "body": "Your approach is fundamentally flawed. It isn&#39;t going to work. Ever. Using your proposed algorithm, you&#39;ll get change notifications, whenever part of the &#39;interesting area&#39; is obscured by another window, or when the user decides to resize the viewport. It will fail for windows that have requested their display affinity as <code>WDA_MONITOR</code>, or those windows that use a DirectX rendering surface. You might as well spend your time solving a problem for which there is a solution. This one isn&#39;t one of those."}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1526546261, "post_id": 50383868, "comment_id": 87789349, "body": "This assumes, that windows will actually use the system services for non-client area management. Visual Studio doesn&#39;t, as far as I know. UWP applications certainly don&#39;t, as they aren&#39;t even using <code>HWND</code>s for their presentation. This answer hardly even addresses the issue the OP has identified. I posted comments about issues that the OP hasn&#39;t even considered."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1526547990, "post_id": 50383868, "comment_id": 87790484, "body": "Yes, I know that many apps play games when painting the non-client area, and you raise a good point about UWP apps, I don&#39;t know much about those. You might be able to bitblt out of a partially covered window successfully with DWM composition enabled though, I haven&#39;t tested that recently.  In the end, I guess a lot depends on whether the OP is willing to accept some limitations in whatever solution he ends up with.  He will have to experiment and put some work in.  And there is also <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb688195(v=vs.85).aspx\" rel=\"nofollow noreferrer\">this</a> to consider."}], "tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": false, "score": 1, "last_activity_date": 1526534716, "creation_date": 1526534716, "answer_id": 50383868, "question_id": 50380539, "link": "https://stackoverflow.com/questions/50380539/capturing-windows-screenshot-excluding-certain-hwnds-styles-ws-sysmenu/50383868#50383868", "title": "Capturing window&#39;s screenshot excluding certain HWND&#39;s styles (WS_SYSMENU)", "body": "<p>To determine the client area of the target window, you can send it a <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms632634(v=vs.85).aspx\" rel=\"nofollow noreferrer\">WM_NCCALCSIZE</a> message.  This should enable you to determine the size of the caption bar reliably for most applications, something like:</p>\n\n<pre><code>RECT r;\nGetWindowRect (hTargetWnd, &amp;r);\nSendMessage (hTargetWnd, WM_NCCALCSIZE, FALSE, (LPARAM) &amp;r);\n</code></pre>\n\n<p>As for the flashing caret problem, you could try remembering the checksums for the last <em>two</em> different screens you have seen.  Then you have a chance of working out when the window is, in effect, switching back and forth between two states.</p>\n\n<p>That, and more sophisticated comparison logic (such as walking the list of child windows to look for edit controls to see if any changes are confined to the contents of such controls), should make it possible to achieve most of what you want.</p>\n"}], "owner": {"reputation": 1751, "user_id": 1025124, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/66cd3dc00b09bf9504c0aebe06202d9f?s=128&d=identicon&r=PG", "display_name": "igal k", "link": "https://stackoverflow.com/users/1025124/igal-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1526534716, "creation_date": 1526508162, "question_id": 50380539, "link": "https://stackoverflow.com/questions/50380539/capturing-windows-screenshot-excluding-certain-hwnds-styles-ws-sysmenu", "title": "Capturing window&#39;s screenshot excluding certain HWND&#39;s styles (WS_SYSMENU)", "body": "<p>I'm trying to periodically compare snapshots of the same window every few of seconds. Even though that technically the window doesn't change, pictures remains the same, i still get notified that something has changed with in the picture, I'm using good old <code>BitBlt</code> function to capture a specific window. and <code>Zlib's CRC32</code> to compare results.</p>\n\n<p>Here's an example of 2 identical pictures, the sole difference is the windows' caption(<code>untitled paint</code>) color. Whenever the window has the focus it's black, and gray otherwise. Since I'm not the owner of the HWND, Is there a better way of taking a picture without calculating the actual size of the window minus GetSystemMetrices(SM_CYSIZEFRAME / SM_CXSIZE) than changing the style.</p>\n\n<p>My code:</p>\n\n<pre><code>WINDOWPLACEMENT rect;\n    ::GetWindowPlacement(windowDesc.hWnd, &amp;rect);\n    if (SW_SHOWMINIMIZED == rect.showCmd)\n    {\n        return;\n    }\n\n    CImage img;\n    img.Create(\n        rect.rcNormalPosition.right - rect.rcNormalPosition.left,\n        rect.rcNormalPosition.bottom - rect.rcNormalPosition.top, \n        32);\n\n    HWND hWnd = windowDesc.hWnd;\n    std::shared_ptr&lt;HDC__&gt; spSrcHdc(::GetDC(hWnd), [hWnd](HDC hdc) {::ReleaseDC(hWnd, hdc); });\n    //::BitBlt(img.GetDC(), 0, 0, img.GetWidth(), img.GetHeight(), spSrcHdc.get(), 0, 0, SRCCOPY);\n    ::PrintWindow(hWnd, img.GetDC(), 0x2);\n    BITMAP bmp = { 0 };\n    if (!::GetObject((HBITMAP)img, sizeof(BITMAP), &amp;bmp))\n    {\n        throw std::exception(\"Failed to retrieve raw bmp buffer\");\n    }\n\n    unsigned long ulbmpCRC = crc32(0, \n        (BYTE*)bmp.bmBits, bmp.bmWidthBytes * bmp.bmHeight);\n\n    if (0 != ulbmpCRC &amp;&amp; ulbmpCRC == windowDesc.crc)\n    {\n    }\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/oGmCZ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oGmCZ.jpg\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/LY7Cl.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LY7Cl.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>And another issue i failed to solve is when textboxes are present. The very fact that i have the cursor flickering, it generates different CRC32 values. yet again, can i use BitBlt with the ability to ignore the phenomenon?  </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 5, "creation_date": 1526507831, "post_id": 50380470, "comment_id": 87777136, "body": "You have declared display() as taking no parameters, and then defined it as taking a double. Declaration and definition must match up, else you potentially have two completely different functions."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1526507898, "post_id": 50380470, "comment_id": 87777159, "body": "It seems you could use <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list/388282#388282\">a good book or two</a>."}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 3, "creation_date": 1526507944, "post_id": 50380470, "comment_id": 87777173, "body": "<code>euros = money * 1.41;</code> Are you sure that&#39;s the correct way to convert USD to EUR?.."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526509173, "post_id": 50380470, "comment_id": 87777598, "body": "@Some What should the compiler complain about?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4718441, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9K0kuMkhmr4/AAAAAAAAAAI/AAAAAAAABUA/W8W-04aQLj0/photo.jpg?sz=128", "display_name": "Cpt. Brandon", "link": "https://stackoverflow.com/users/4718441/cpt-brandon"}, "edited": false, "score": 0, "creation_date": 1526509383, "post_id": 50380518, "comment_id": 87777657, "body": "Thank you for your help, but now it says &quot;expected primary expression before double&quot; what does that mean?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1526510055, "post_id": 50380518, "comment_id": 87777855, "body": "It means likely have a bug in the line above (or lines above) that error. Possible missing <code>;</code>"}], "tags": [], "owner": {"reputation": 3954, "user_id": 3137388, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/98f780bca09821cbd63d84b8d6e028df?s=128&d=identicon&r=PG&f=1", "display_name": "kadina", "link": "https://stackoverflow.com/users/3137388/kadina"}, "is_accepted": false, "score": 1, "last_activity_date": 1526508037, "creation_date": 1526508037, "answer_id": 50380518, "question_id": 50380470, "link": "https://stackoverflow.com/questions/50380470/need-help-on-finding-an-undefined-reference-on-function-display-in-c/50380518#50380518", "title": "Need help on finding an undefined reference on function display() in C++", "body": "<p>First you declared display as a function which doesn't take any arguments.</p>\n\n<pre><code>double display();\n</code></pre>\n\n<p>But when you defined the function, the function is taking an argument of type double.</p>\n\n<pre><code>double display(double money)\n</code></pre>\n\n<p>The declaration and definition should match so that compiler will know which function to jump when you used the function in your code.</p>\n\n<p>In your case as declaration and definition are different, compiler doesn't know where to jump when you used display() in main() function. Hence undefined reference error.</p>\n"}, {"tags": [], "owner": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "is_accepted": false, "score": 0, "last_activity_date": 1526508122, "creation_date": 1526508122, "answer_id": 50380536, "question_id": 50380470, "link": "https://stackoverflow.com/questions/50380470/need-help-on-finding-an-undefined-reference-on-function-display-in-c/50380536#50380536", "title": "Need help on finding an undefined reference on function display() in C++", "body": "<p>Your function called \"display\" is declared at the top as having no arguments in the function call.</p>\n\n<pre><code>double display();\n</code></pre>\n\n<p>Then later you define this function like it should receive an argument.</p>\n\n<pre><code>double display(double money);\n</code></pre>\n\n<p>The compiler doesn't know what to do with these conflicts, so it will treat it as the first function having no definition.</p>\n\n<p>[edit: posted right after I saw the almost identical first answer]</p>\n"}], "owner": {"reputation": 23, "user_id": 4718441, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9K0kuMkhmr4/AAAAAAAAAAI/AAAAAAAABUA/W8W-04aQLj0/photo.jpg?sz=128", "display_name": "Cpt. Brandon", "link": "https://stackoverflow.com/users/4718441/cpt-brandon"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1526514520, "answer_count": 2, "score": -4, "last_activity_date": 1526508122, "creation_date": 1526507735, "question_id": 50380470, "link": "https://stackoverflow.com/questions/50380470/need-help-on-finding-an-undefined-reference-on-function-display-in-c", "closed_reason": "Not suitable for this site", "title": "Need help on finding an undefined reference on function display() in C++", "body": "<p>The goal of my assignment is to convert US dollars to Euros. All I need to do is prompt the user of an input and then use functions to get the output\nIm new to coding, and for the life of me can not find where I went wrong in declaring this function. any advice is appreciated.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\ndouble getmoney();\ndouble convert();\ndouble display();\n\nint main()\n{\n\n   cout.setf(ios::fixed);\n   cout.setf(ios::showpoint);\n   cout.precision(2);\n\n   getmoney();\n\n display();\n\n\n\n   return 0;\n\n}\n\n double getmoney()\n {\n         double money;\n cout &lt;&lt; \"Please enter the amount in US Dollars: \";\n         cin &gt;&gt; money;\n         return money;\n}\n\n double convert(double money)\n{\n        double euros;\n        euros = money * 1.41;\n        return euros;\n}\n\n double display(double money)\n {\n         cout.setf(ios::fixed);\n        cout.setf(ios::showpoint);\n        cout.precision(2);\n\n        double salad = convert(money);\n\n         cout &lt;&lt; getmoney() &lt;&lt; endl;\n      if (money &gt;= 0)\n\n           cout &lt;&lt; \"Euros: \" &lt;&lt; salad;\n\n        else (money &lt; 0);\n\n                cout &lt;&lt; \"Euros: \"  &lt;&lt; \"(\" &lt;&lt; salad &lt;&lt; \")\";\n\n             return 0;\n}\n</code></pre>\n"}, {"tags": ["python", "c++", "xcode", "lldb"], "answers": [{"comments": [{"owner": {"reputation": 20083, "user_id": 2465073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f7ba796598ce99fe9d17b66c119b00?s=128&d=identicon&r=PG", "display_name": "Jim Ingham", "link": "https://stackoverflow.com/users/2465073/jim-ingham"}, "edited": false, "score": 0, "creation_date": 1526511143, "post_id": 50381010, "comment_id": 87778154, "body": "OTOH, it shouldn&#39;t be terribly hard to make this work, since the internal classes you would have to shim to the SB API are pretty well established.  If somebody was eager for an opportunity to do a little lldb hacking..."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1526550928, "post_id": 50381010, "comment_id": 87792561, "body": "I just started investigating the extension possibilities of lldb, so I know pretty little about it. Anyway, this means that I have to check out and extend lldb source code, build it on my own and deploy it to the development environments of each developer, right?"}, {"owner": {"reputation": 20083, "user_id": 2465073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f7ba796598ce99fe9d17b66c119b00?s=128&d=identicon&r=PG", "display_name": "Jim Ingham", "link": "https://stackoverflow.com/users/2465073/jim-ingham"}, "reply_to_user": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 2, "creation_date": 1526585709, "post_id": 50381010, "comment_id": 87814309, "body": "The facility you want to have present would have to be built into lldb since it is currently missing in the Python layer.  The lldb development community is very helpful, patches are welcome.  There is always a couple rounds of helpful suggestions during patch review, but sound patches get into the tree pretty quickly.  Then you would have to wait for the next release cycle to get the fix into official binaries.  That&#39;s on the order of a couple of times a year.  You would have to support this with your own releases till an official version is released, but that should be temporary."}], "tags": [], "owner": {"reputation": 20083, "user_id": 2465073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f7ba796598ce99fe9d17b66c119b00?s=128&d=identicon&r=PG", "display_name": "Jim Ingham", "link": "https://stackoverflow.com/users/2465073/jim-ingham"}, "is_accepted": true, "score": 2, "last_activity_date": 1526511021, "creation_date": 1526511021, "answer_id": 50381010, "question_id": 50380468, "link": "https://stackoverflow.com/questions/50380468/lldb-implement-custom-command-taking-user-input/50381010#50381010", "title": "lldb: implement custom command taking user input", "body": "<p>Internally lldb keeps a stack of \"I/O Handlers\" and so for instance <code>expr</code> just pushes the \"Expr I/O Handler\" onto the stack, collects the input till it is done and then pops itself off the stack and runs the command.</p>\n\n<p>There's what looks like a first sketch of an SB class (SBInputReader) to do this in the C++ SB API's but I don't think it's complete and it isn't currently exposed to Python.  So I don't think there's enough wired up for you do to this from Python yet.</p>\n"}], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "accepted_answer_id": 50381010, "answer_count": 1, "score": 2, "last_activity_date": 1526511021, "creation_date": 1526507729, "question_id": 50380468, "link": "https://stackoverflow.com/questions/50380468/lldb-implement-custom-command-taking-user-input", "title": "lldb: implement custom command taking user input", "body": "<p>I am using python to extend lldb by a custom command <code>gm</code>, which calls a C++ - function <code>cli(const char* params)</code> then.\nSo one can pause xcode (thereby launching lldb) and type...</p>\n\n<pre><code>(lldb) gm set value\n</code></pre>\n\n<p>to trigger a call <code>cli(\"set value\")</code> then.</p>\n\n<p>C++-function <code>cli</code> can make use of <code>std::cout</code> to print some state, but I cannot make this function \"interactive\", i.e. consuming user input:</p>\n\n<pre><code>void cli(const char* params) {   \n    std::cout &lt;&lt; \"params: \" &lt;&lt; params &lt;&lt; std::endl;  // works\n\n    std::string userInput;\n    std::cin &gt;&gt; userInput; // does not work; is simply ignored\n}\n</code></pre>\n\n<p><strong>Question:</strong> How can I make <code>cli</code> interactive in a sense that it consumes (and further processes) user input?</p>\n\n<hr>\n\n<p>To further show what I'd like to achieve: There are built in lldb-commands like <code>expr</code> (without arguments) which enter into an interactive mode:</p>\n\n<pre><code>(lldb) expr\nEnter expressions, then terminate with an empty line to evaluate:\n1 2+2\n2 \n(int) $0 = 4\n</code></pre>\n\n<p>I'd like to have similar behaviour in my own command, i.e. typing in <code>gm</code> and being then asked interactively for params:</p>\n\n<pre><code>(lldb) gm\nEnter generic model parameters; Terminate interactive mode with \"end\":\n1 set value\n2 params: set value\n3 end\n</code></pre>\n\n<p>Just for completeness, see the python script currently used for calling the <code>cli</code>-function:</p>\n\n<pre><code>def gm(debugger, command, result, internal_dict):\n\n    cmd = \"po cli(\\\"\"+command+\"\\\")\"\n    lldb.debugger.HandleCommand(cmd)\n\n# And the initialization code to add your commands \ndef __lldb_init_module(debugger, internal_dict):\n    debugger.HandleCommand('command script add -f gm.gm gm')\n    print 'The \"gm\" python command has been installed and is ready for use.'\n</code></pre>\n\n<p>and the line in the <code>.lldbinit</code>-file registering this script:</p>\n\n<pre><code>command script import ~/my_commands.py\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "windows-xp"], "comments": [{"owner": {"reputation": 159, "user_id": 9448914, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Kyle Huff", "link": "https://stackoverflow.com/users/9448914/kyle-huff"}, "edited": false, "score": 0, "creation_date": 1526512806, "post_id": 50380420, "comment_id": 87778594, "body": "People usually use DEPENDS for this. <a href=\"http://www.dependencywalker.com/\" rel=\"nofollow noreferrer\">dependencywalker.com</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7520514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f53300e7f76aedc26fcd079a2a7611ae?s=128&d=identicon&r=PG&f=1", "display_name": "shubyy", "link": "https://stackoverflow.com/users/7520514/shubyy"}, "is_accepted": false, "score": 0, "last_activity_date": 1526508859, "creation_date": 1526508859, "answer_id": 50380664, "question_id": 50380420, "link": "https://stackoverflow.com/questions/50380420/how-to-find-out-where-a-kernel32-dependency-comes-from/50380664#50380664", "title": "How to find out where a Kernel32 dependency comes from", "body": "<p>If you have immunity debugger or ollydbg, you can open up your program in that. Once its loaded right click and select view which shows all the modules your program imports. Select your library and right click again and click on search->all intermodular calls and you'll see a list of functions that the module calls from external libraries. If you double click on the specific function it will take you to the location in that program which calls that kernel32 function. </p>\n\n<p>Most likely you probably won't be able to get rid of it as it will be used by other parts of the library which you don't control.</p>\n"}], "owner": {"reputation": 33, "user_id": 1875792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/117b74d718b7a467d63fea5656c51d0e?s=128&d=identicon&r=PG", "display_name": "Hans van Zutphen", "link": "https://stackoverflow.com/users/1875792/hans-van-zutphen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526508859, "creation_date": 1526507427, "question_id": 50380420, "link": "https://stackoverflow.com/questions/50380420/how-to-find-out-where-a-kernel32-dependency-comes-from", "title": "How to find out where a Kernel32 dependency comes from", "body": "<p>I'm building an application to which I've just added a library (which in turn uses a number of other libraries), and for some reason it's trying to use \"GetLogicalProcessorInfo\" from kernel32.dll. Unfortunately, this function is newer than the Windows version that some of my users are using (some are using XP SP2, this function requires XP SP3) - so I got error reports about this.</p>\n\n<p>I'm trying to figure out why this function is being referenecd, but I can't find it. I don't see it in any of the .lib files that I'm using. Or in any .cpp or .h file. Still, <em>something</em> is triggering that this function is used.</p>\n\n<p>So, is there a way to find out where this is coming from? Which function or which library is using it?</p>\n\n<p>I'm developing in Visual Studio 2015 with the Intel C++ compiler. There is a way to tell it to compile for Windows XP, but the minimum supported version is SP3 - before I added this library my code worked fine though. If I have to push people to move to SP3, so be it, but I would prefer not to. Many are using a pc running my software as an appliance, often not even connected to the internet, and have been running it for years (hence the old OS).</p>\n"}, {"tags": ["c++", "interface", "mocking"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1526507010, "post_id": 50380307, "comment_id": 87776861, "body": "Please include the <b>full</b> error message."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1526507024, "post_id": 50380307, "comment_id": 87776866, "body": "Your code is missing all includes for the things it uses. Maybe you want to extract a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> first?"}, {"owner": {"reputation": 45, "user_id": 8071913, "user_type": "registered", "profile_image": "https://graph.facebook.com/1742499389110025/picture?type=large", "display_name": "Simon Symon", "link": "https://stackoverflow.com/users/8071913/simon-symon"}, "edited": false, "score": 0, "creation_date": 1526507404, "post_id": 50380307, "comment_id": 87776989, "body": "Hey! thanks for the quick reply! I added the includes, which were there before, but which I didn&#39;t add initially to this post. I actually worked it out just now by creating a .cpp file with constructor and destructor implementation of the MockClass!"}, {"owner": {"reputation": 5867, "user_id": 9125195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75fc90d1f6de6ff28c739b85bdb82f4c?s=128&d=identicon&r=PG&f=1", "display_name": "Sid S", "link": "https://stackoverflow.com/users/9125195/sid-s"}, "edited": false, "score": 0, "creation_date": 1526507512, "post_id": 50380307, "comment_id": 87777017, "body": "It&#39;s not likely to solve your problem, but you should use <code>&quot;&quot;</code> rather than <code>&lt;&gt;</code> when you <code>#include</code> your own headers.  E.g. <code>#include &quot;IMyInterface.h&quot;</code> not <code>#include &lt;IMyInterface.h&gt;.</code>"}, {"owner": {"reputation": 5867, "user_id": 9125195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75fc90d1f6de6ff28c739b85bdb82f4c?s=128&d=identicon&r=PG&f=1", "display_name": "Sid S", "link": "https://stackoverflow.com/users/9125195/sid-s"}, "edited": false, "score": 1, "creation_date": 1526507946, "post_id": 50380307, "comment_id": 87777174, "body": "Where is the implementation for <code>MyClassMock::MyClassMock(int, int, int)</code> and <code>MyClassMock::~MyClassMock()</code> ?"}, {"owner": {"reputation": 45, "user_id": 8071913, "user_type": "registered", "profile_image": "https://graph.facebook.com/1742499389110025/picture?type=large", "display_name": "Simon Symon", "link": "https://stackoverflow.com/users/8071913/simon-symon"}, "edited": false, "score": 0, "creation_date": 1526508096, "post_id": 50380307, "comment_id": 87777235, "body": "Hey Sid S, Yes that was the problem exactly, I didn&#39;t add an implementation for MyClassMock. Thanks for your help!"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 8071913, "user_type": "registered", "profile_image": "https://graph.facebook.com/1742499389110025/picture?type=large", "display_name": "Simon Symon", "link": "https://stackoverflow.com/users/8071913/simon-symon"}, "edited": false, "score": 0, "creation_date": 1526554182, "post_id": 50380590, "comment_id": 87794572, "body": "thank you very much I can create a mock object now, but when running the test it behaves not as expected and doesn&#39;t seem to register my function call. I added the details in my post edit. Do you know what I&#39;m still doing wrong? I double checked my version with the google mock cookbook but can&#39;t find any deviations which could lead to this behavior"}, {"owner": {"reputation": 5867, "user_id": 9125195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75fc90d1f6de6ff28c739b85bdb82f4c?s=128&d=identicon&r=PG&f=1", "display_name": "Sid S", "link": "https://stackoverflow.com/users/9125195/sid-s"}, "reply_to_user": {"reputation": 45, "user_id": 8071913, "user_type": "registered", "profile_image": "https://graph.facebook.com/1742499389110025/picture?type=large", "display_name": "Simon Symon", "link": "https://stackoverflow.com/users/8071913/simon-symon"}, "edited": false, "score": 0, "creation_date": 1526570834, "post_id": 50380590, "comment_id": 87806160, "body": "@SimonSymon, I think you should post that as a new question so that more people will see it."}, {"owner": {"reputation": 45, "user_id": 8071913, "user_type": "registered", "profile_image": "https://graph.facebook.com/1742499389110025/picture?type=large", "display_name": "Simon Symon", "link": "https://stackoverflow.com/users/8071913/simon-symon"}, "edited": false, "score": 0, "creation_date": 1526578835, "post_id": 50380590, "comment_id": 87810647, "body": "Hey, yes will do!"}], "tags": [], "owner": {"reputation": 5867, "user_id": 9125195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75fc90d1f6de6ff28c739b85bdb82f4c?s=128&d=identicon&r=PG&f=1", "display_name": "Sid S", "link": "https://stackoverflow.com/users/9125195/sid-s"}, "is_accepted": true, "score": 1, "last_activity_date": 1526508466, "creation_date": 1526508466, "answer_id": 50380590, "question_id": 50380307, "link": "https://stackoverflow.com/questions/50380307/google-mock-class-seems-to-not-implement/50380590#50380590", "title": "google Mock class seems to not implement", "body": "<p>You have to provide implementations for <code>MyClassMock::MyClassMock(int, int, int)</code> and <code>MyClassMock::~MyClassMock()</code>.</p>\n\n<hr>\n\n<p>On a side not, you should use <code>\"\"</code> rather than <code>&lt;&gt;</code> when you <code>#include</code> your own headers. E.g. <code>#include \"IMyInterface.h\"</code> not <code>#include &lt;IMyInterface.h&gt;</code>.  That way, the compiler will search in the current directory prior to the system include path.</p>\n"}], "owner": {"reputation": 45, "user_id": 8071913, "user_type": "registered", "profile_image": "https://graph.facebook.com/1742499389110025/picture?type=large", "display_name": "Simon Symon", "link": "https://stackoverflow.com/users/8071913/simon-symon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "accepted_answer_id": 50380590, "answer_count": 1, "score": 1, "last_activity_date": 1526554054, "creation_date": 1526506892, "last_edit_date": 1526554054, "question_id": 50380307, "link": "https://stackoverflow.com/questions/50380307/google-mock-class-seems-to-not-implement", "title": "google Mock class seems to not implement", "body": "<p>I'm new to google mock and I'm trying to mock an interface, but keep getting a linker error with undefined symbols for architecture x86_64</p>\n\n<p>Here's my simplified code:</p>\n\n<p>I have the following in a .h file:</p>\n\n<pre><code>namespace Mynamespace\n{    \n    class IMyInterface\n    {\n    public:\n        virtual ~ IMyInterface() {};\n\n        virtual void myFunction() = 0;\n\n    };\n}\n</code></pre>\n\n<p>this in another .h file:</p>\n\n<pre><code>#include &lt;gmock/gmock.h&gt;\n#include &lt;IMyInterface.h&gt;\n\nnamespace testing\n{\n    class MyClassMock : public IMyInterface\n    {\n    public:\n        ~ MyClassMock();\n        MyClassMock(int, int, int);\n\n        MOCK_METHOD0(myFunction, void());\n    };\n}\n</code></pre>\n\n<p>and this in my Test Case .cpp file:</p>\n\n<pre><code>#include &lt;gmock/gmock.h&gt;\n#include &lt;gtest/gtest.h&gt;\n#include &lt;IMyInterface.h&gt;\n\nnamespace testing\n{\n    TEST(MyClassMock, myFunction)\n    {\n        MyClassMock mcm(0,0,0);\n    }\n}\n</code></pre>\n\n<p>Do you have an idea what am I doing wrong?\nAny help would be very much appreciated!</p>\n\n<p>cheers,\nSimon</p>\n\n<p>EDIT:</p>\n\n<p>Unfortunately the mock still doesn't seem to work. After I added the implementation like this:</p>\n\n<pre><code>namespace testing\n{\n    MyClassMock:: MyClassMock(int a, int b, int c)\n    {\n    }\n\n    MyClassMock::~ MyClassMock()\n    {\n    }\n}\n</code></pre>\n\n<p>\"myFunction\" will not be called when I do</p>\n\n<pre><code>#include \"MyClassMock.h\"\n#include &lt;gmock/gmock.h&gt;\n#include &lt;gtest/gtest.h&gt;\nusing ::testing::AtLeast;\nusing namespace testing;\n\n    TEST(MyClassTest, canCallFunction)\n    {\n        MyClassMock mock(0,0,0);\n        EXPECT_CALL(mock, myFunction())\n            .Times(AtLeast(1));\n    }\n</code></pre>\n\n<p>returning:\nEXPECT_CALL(mock, myFunction())\nExpected: to be called at least once\nActual: never called - unsatisfied and active</p>\n"}, {"tags": ["c++", "curl", "linker", "libcurl"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526505579, "post_id": 50380002, "comment_id": 87776327, "body": "You don&#39;t actually <i>link</i> with the cURL library. Considering that it&#39;s in a custom location it seems you downloaded it yourself? Then, did you even <i>build it</i>?"}, {"owner": {"reputation": 358, "user_id": 9108200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e9012e5c159538d7ed0efa10f195715?s=128&d=identicon&r=PG&f=1", "display_name": "forthe", "link": "https://stackoverflow.com/users/9108200/forthe"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526505682, "post_id": 50380002, "comment_id": 87776361, "body": "@Someprogrammerdude I didn&#39;t build it. I searched for curl.h and included it."}, {"owner": {"reputation": 623, "user_id": 2008273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VTTvj.jpg?s=128&g=1", "display_name": "ricco19", "link": "https://stackoverflow.com/users/2008273/ricco19"}, "edited": false, "score": 0, "creation_date": 1526505694, "post_id": 50380002, "comment_id": 87776363, "body": "<code>g++</code> maybe, mingw-gcc probably cant find c++ headers"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1526505823, "post_id": 50380002, "comment_id": 87776410, "body": "That&#228;&#39;s why you could not find any library files. If you donwloaded the source only, then you need to configure and build it. cURL is not a header-only library."}, {"owner": {"reputation": 358, "user_id": 9108200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e9012e5c159538d7ed0efa10f195715?s=128&d=identicon&r=PG&f=1", "display_name": "forthe", "link": "https://stackoverflow.com/users/9108200/forthe"}, "reply_to_user": {"reputation": 623, "user_id": 2008273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VTTvj.jpg?s=128&g=1", "display_name": "ricco19", "link": "https://stackoverflow.com/users/2008273/ricco19"}, "edited": false, "score": 0, "creation_date": 1526505877, "post_id": 50380002, "comment_id": 87776433, "body": "@ricco19 g++ has the same errors."}, {"owner": {"reputation": 623, "user_id": 2008273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VTTvj.jpg?s=128&g=1", "display_name": "ricco19", "link": "https://stackoverflow.com/users/2008273/ricco19"}, "edited": false, "score": 1, "creation_date": 1526505913, "post_id": 50380002, "comment_id": 87776448, "body": "yeah, as mentioned, you need the library, not just a header file"}, {"owner": {"reputation": 358, "user_id": 9108200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e9012e5c159538d7ed0efa10f195715?s=128&d=identicon&r=PG&f=1", "display_name": "forthe", "link": "https://stackoverflow.com/users/9108200/forthe"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526505914, "post_id": 50380002, "comment_id": 87776449, "body": "@Someprogrammerdude How would I build it?"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1526506023, "post_id": 50380002, "comment_id": 87776489, "body": "@forthe <a href=\"https://curl.haxx.se/docs/install.html\" rel=\"nofollow noreferrer\">curl.haxx.se/docs/install.html</a>"}, {"owner": {"reputation": 358, "user_id": 9108200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e9012e5c159538d7ed0efa10f195715?s=128&d=identicon&r=PG&f=1", "display_name": "forthe", "link": "https://stackoverflow.com/users/9108200/forthe"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1526506395, "post_id": 50380002, "comment_id": 87776628, "body": "@DrewDormann It seems to be working. Still compiling."}, {"owner": {"reputation": 358, "user_id": 9108200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e9012e5c159538d7ed0efa10f195715?s=128&d=identicon&r=PG&f=1", "display_name": "forthe", "link": "https://stackoverflow.com/users/9108200/forthe"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1526506863, "post_id": 50380002, "comment_id": 87776806, "body": "@DrewDormann It still throws the errors for the libcURL methods, but not the <code>std::__cxx11::basic_string</code> methods."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1526507513, "post_id": 50380002, "comment_id": 87777018, "body": "@forthe <a href=\"https://curl.haxx.se/libcurl/using/\" rel=\"nofollow noreferrer\">curl.haxx.se/libcurl/using</a>"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1526573310, "post_id": 50380002, "comment_id": 87807783, "body": "@forthe you may need to find a tutorial on using libraries.  If you used the gcc command you posted in your original question, you have omitted your curl library."}], "owner": {"reputation": 358, "user_id": 9108200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e9012e5c159538d7ed0efa10f195715?s=128&d=identicon&r=PG&f=1", "display_name": "forthe", "link": "https://stackoverflow.com/users/9108200/forthe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 370, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526505390, "creation_date": 1526505390, "question_id": 50380002, "link": "https://stackoverflow.com/questions/50380002/link-curl-lib-but-no-lib-files-in-curl-directory", "title": "Link cURL lib but no lib files in cURL directory", "body": "<p><em>(I know this question has been asked many times, but I seem to have a special case)</em></p>\n\n<p>I am using gcc (version info below) to compile a C++ program that scrapes a hard-coded url using libcURL. I am running this on a Windows 10.</p>\n\n<pre><code>&gt; gcc -v\nUsing built-in specs.\nCOLLECT_GCC=C:\\Windows\\MinGW\\bin\\gcc.exe\nCOLLECT_LTO_WRAPPER=c:/windows/mingw/bin/../libexec/gcc/mingw32/6.3.0/lto-wrapper.exe\nTarget: mingw32\nConfigured with: ../src/gcc-6.3.0/configure --build=x86_64-pc-linux-gnu --host=mingw32 --target=mingw32 --with-gmp=/mingw --with-mpfr --with-mpc=/mingw --with-isl=/mingw --prefix=/mingw --disable-win32-registry --with-arch=i586 --with-tune=generic --enable-languages=c,c++,objc,obj-c++,fortran,ada --with-pkgversion='MinGW.org GCC-6.3.0-1' --enable-static --enable-shared --enable-threads --with-dwarf2 --disable-sjlj-exceptions --enable-version-specific-runtime-libs --with-libiconv-prefix=/mingw --with-libintl-prefix=/mingw --enable-libstdcxx-debug --enable-libgomp --disable-libvtv --enable-nls\nThread model: win32\ngcc version 6.3.0 (MinGW.org GCC-6.3.0-1)\n</code></pre>\n\n<p>All the libcURL packages that I found had a dll file to be compiled with. However, I didn't want to use that dll because all the examples on the net used header files and I wanted this to be a standalone executable. So I ended up downloading the source files (download wizard link: <a href=\"https://curl.haxx.se/dlwiz/?type=source&amp;os=-\" rel=\"nofollow noreferrer\">https://curl.haxx.se/dlwiz/?type=source&amp;os=-</a>)</p>\n\n<p>When I compiled my file, I ended up with the undefined reference error. I had gotten this error before when I didn't link the right .lib files. Except this time, there were no lib files anywhere in the cURL directory. Some other SO questions said to link using -lcurl, but there were no curl.lib anywhere.</p>\n\n<p>Do I need to get a new package? Or do I need to install libcURL? Or something else?</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;cstddef&gt;\n#include &lt;string&gt;\n#include \"curl-7.58.0\\include\\curl\\curl.h\"\n\nstd::string gout;\n\nsize_t write_data(char *buffer, size_t size, size_t nmemb, void *usrd){\n  gout += buffer;\n  return size*nmemb;\n}\n\nint geturl(const char* url, std::string out){\n  gout = \"\";\n  out = \"\";\n  CURL* hcurl = curl_easy_init();\n  if(hcurl) {\n    CURLcode res;\n    curl_easy_setopt(hcurl, CURLOPT_URL, (char*)url);\n    curl_easy_setopt(hcurl, CURLOPT_WRITEFUNCTION, write_data);\n    res = curl_easy_perform(hcurl);\n    if(res != 0){\n      curl_easy_cleanup(hcurl);\n      return -1;\n    }\n    curl_easy_cleanup(hcurl);\n    return 0;\n  }else{\n    curl_easy_cleanup(hcurl);\n    return -1;\n  }\n  return -1;\n}\n\nint main(){return 0;}\n</code></pre>\n\n<p>When compiled with gcc results in the error message:</p>\n\n<pre><code>&gt; gcc ./file.cpp -o ./test.exe\nC:\\Users\\user~1\\AppData\\Local\\Temp\\cc6XcEeS.o:checkit-proto.cpp:(.text+0x12): undefined reference to `std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::operator+=(char const*)'\nC:\\Users\\user~1\\AppData\\Local\\Temp\\cc6XcEeS.o:checkit-proto.cpp:(.text+0x35): undefined reference to `std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::operator=(char const*)'\nC:\\Users\\user~1\\AppData\\Local\\Temp\\cc6XcEeS.o:checkit-proto.cpp:(.text+0x49): undefined reference to `std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::operator=(char const*)'\nC:\\Users\\user~1\\AppData\\Local\\Temp\\cc6XcEeS.o:checkit-proto.cpp:(.text+0x51): undefined reference to `_imp__curl_easy_init'\nC:\\Users\\user~1\\AppData\\Local\\Temp\\cc6XcEeS.o:checkit-proto.cpp:(.text+0x76): undefined reference to `_imp__curl_easy_setopt'\nC:\\Users\\user~1\\AppData\\Local\\Temp\\cc6XcEeS.o:checkit-proto.cpp:(.text+0x93): undefined reference to `_imp__curl_easy_setopt'\nC:\\Users\\user~1\\AppData\\Local\\Temp\\cc6XcEeS.o:checkit-proto.cpp:(.text+0xa0): undefined reference to `_imp__curl_easy_perform'\nC:\\Users\\user~1\\AppData\\Local\\Temp\\cc6XcEeS.o:checkit-proto.cpp:(.text+0xb6): undefined reference to `_imp__curl_easy_cleanup'\nC:\\Users\\user~1\\AppData\\Local\\Temp\\cc6XcEeS.o:checkit-proto.cpp:(.text+0xca): undefined reference to `_imp__curl_easy_cleanup'\nC:\\Users\\user~1\\AppData\\Local\\Temp\\cc6XcEeS.o:checkit-proto.cpp:(.text+0xde): undefined reference to `_imp__curl_easy_cleanup'\nC:\\Users\\user~1\\AppData\\Local\\Temp\\cc6XcEeS.o:checkit-proto.cpp:(.text+0x109): undefined reference to `std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::~basic_string()'\nC:\\Users\\user~1\\AppData\\Local\\Temp\\cc6XcEeS.o:checkit-proto.cpp:(.text+0x12a): undefined reference to `std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::basic_string()'\ncollect2.exe: error: ld returned 1 exit status\n</code></pre>\n"}, {"tags": ["c++", "puredata", "libpd"], "owner": {"reputation": 11, "user_id": 9802658, "user_type": "registered", "profile_image": "https://graph.facebook.com/1941508665883125/picture?type=large", "display_name": "Alexander Alaimo Di Loro", "link": "https://stackoverflow.com/users/9802658/alexander-alaimo-di-loro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1526571090, "creation_date": 1526504349, "last_edit_date": 1526571090, "question_id": 50379794, "link": "https://stackoverflow.com/questions/50379794/libpd-get-list-of-receivers-in-a-patch", "title": "libpd: get list of receivers in a patch", "body": "<p>With libpd, is there a way of getting a list of available receiver elements in a patch in order to send to those in a more dynamic way as opposed to knowing all the receivers names in a patch in advance?</p>\n"}, {"tags": ["c++", "c++11", "arduino", "arduino-uno", "arduino-ide"], "comments": [{"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 1, "creation_date": 1526504192, "post_id": 50379725, "comment_id": 87775738, "body": "Can you post your errors as text, please?"}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 1, "creation_date": 1526504280, "post_id": 50379725, "comment_id": 87775776, "body": "Also, not sure that it&#39;s your problem, but could you change <code>#ifndef Position</code> and <code>#define Position</code> for <code>#ifndef __Position_h</code> and <code>#define __Position_h</code>"}, {"owner": {"reputation": 131, "user_id": 8338606, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/863466627150722/picture?type=large", "display_name": "Alexandre Michaud", "link": "https://stackoverflow.com/users/8338606/alexandre-michaud"}, "reply_to_user": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 0, "creation_date": 1526504321, "post_id": 50379725, "comment_id": 87775795, "body": "just added my errors as text, i&#39;ll test this"}, {"owner": {"reputation": 4580, "user_id": 218774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ejff2.png?s=128&g=1", "display_name": "J. Calleja", "link": "https://stackoverflow.com/users/218774/j-calleja"}, "edited": false, "score": 1, "creation_date": 1526505535, "post_id": 50379725, "comment_id": 87776304, "body": "I think you cannot use Position as both the guard and the class name. You are defining Position to be empty and the preprocessor is deleting the word Position from your code."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 0, "creation_date": 1526505657, "post_id": 50379725, "comment_id": 87776357, "body": "@MartinV&#233;ronneau you are not allowed to use identifiers which begin with <code>__</code>"}, {"owner": {"reputation": 131, "user_id": 8338606, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/863466627150722/picture?type=large", "display_name": "Alexandre Michaud", "link": "https://stackoverflow.com/users/8338606/alexandre-michaud"}, "edited": false, "score": 1, "creation_date": 1526506359, "post_id": 50379725, "comment_id": 87776620, "body": "Just replaced the #ifndef Position_h and #define Position_h and it worked ! thanks Martin"}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1526560771, "post_id": 50379725, "comment_id": 87798906, "body": "@SergeyA I wasn&#39;t aware it was the case. We&#39;re using the double-underscore all the time for the include guards in our code. That&#39;s sort of our standard, to be sure we&#39;re never reusing the include guard as another identifier. I know GCC, MSVC and MCC68K allows them. Even <a href=\"https://ideone.com/WPZnqt\" rel=\"nofollow noreferrer\">ideone.com</a> compiles it. Why do you say we&#39;re not allowed to use it?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 1, "creation_date": 1526562967, "post_id": 50379725, "comment_id": 87800529, "body": "@MartinV&#233;ronneau by C++ Standard, identifiers beginning with single underscore in global namespace, as well as identifiers beginning by double underscore, or underscore followed by a capital letter in any scope are reserved for implementations and not allowed."}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1526565670, "post_id": 50379725, "comment_id": 87802539, "body": "@SergeyA Ah, indeed <a href=\"http://www.lcdf.org/c%2B%2B/clause17.html#s17.4.3.1.2\" rel=\"nofollow noreferrer\">you are right</a>."}], "answers": [{"tags": [], "owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "is_accepted": true, "score": 4, "last_activity_date": 1526567251, "last_edit_date": 1526567251, "creation_date": 1526506358, "answer_id": 50380214, "question_id": 50379725, "link": "https://stackoverflow.com/questions/50379725/what-is-reason-for-compile-errors-from-h-file-of-custom-library-class-in-arduin/50380214#50380214", "title": "What is reason for compile errors from .h file of custom library class in Arduino IDE", "body": "<p>In your .h file you have the following lines of text which are Preprocessor commands to:</p>\n\n<ul>\n<li>check to see if the Preprocessor macro \"Position\" is defined</li>\n<li>if it is not defined then define it as empty or no text</li>\n</ul>\n\n<p>Once the Preprocessor does this macro definition for the macro \"Position\" then as the Preprocessor continues to do its source text processing, one of the things it does is everytime it finds the token \"Position\" it will replace that token with its defined value which in this case is the empty string.</p>\n\n<pre><code>#ifndef Position\n#define Position\n</code></pre>\n\n<p>You must remember when using the Preprocessor that it is an additional processing step that has nothing to do with compilation. It is a text only processing step which is used to modify the source text before it is fed into the compiler which is a totally separate step.</p>\n\n<p>You can check what is happening by running the Preprocessor by itself and looking at the resulting output file. How that is done will vary between compilers though typically it is a compiler switch.</p>\n\n<p>The typical way to put Preprocessor guards in a .h file is to do something like this example. This Preprocessor macro for an include file guard is made up of the name of the include file followed by the letter \"H\" followed by the word \"included\" with the various parts connected with underscores:</p>\n\n<pre><code>#ifndef POSITION_H_INCLUDED\n#define POSITION_H_INCLUDED\n</code></pre>\n\n<p>By using this macro name it is much less likely that you will have a clash between the macro name and some variable or class or struct name/label or other text token within the source file.</p>\n\n<p>This naming convention does a couple of things for you.</p>\n\n<p>First it uses all upper case which is the defacto standard for Preprocessor macro names.</p>\n\n<p>Secondly it is pretty descriptive of the intent of this macro name.</p>\n\n<p>Thirdly the probability of some other text token being the same is fairly remote so the likelihood of an error such as you are running into is small.</p>\n\n<p><strong>Naming Approaches for Large Bodies of Source Code</strong></p>\n\n<p>However with a large project, as in hundreds of thousands of lines of code with thousands of files, it is possible that the same name is used for different include files in different libraries. This same issue is why the <code>namespace</code> concept was invented with C++.</p>\n\n<p>So a more complex name using some additional text added to the macro name would increase the probability of the macro name being unique. One approach would be to add the name of the library or the name of the manufacturer to the macro name.</p>\n\n<pre><code>#ifndef POSITION_H_INCLUDED_POSITION_LIB_MICHAUD\n#define POSITION_H_INCLUDED_POSITION_LIB_MICHAUD\n</code></pre>\n\n<p>A simple approach is to add the date and time into the macro name as in:</p>\n\n<pre><code>#ifndef POSITION_H_INCLUDED_20180517_1021_00\n#define POSITION_H_INCLUDED_20180517_1021_00\n</code></pre>\n\n<p>Some IDEs will do something similar for you as part of generating source code for classes and that sort of thing. Here is an example from an older Visual Studio C++ IDE that generated an MFC class include file. This is kind of overkill in that it appears the IDE generates a GUID, which is pretty unique, and uses that to create what is like 99.999999999% likely to be a unique Preprocessor macro name or identifier. Notice that as part of generating this macro name, the IDE used the name of the include file, the letter \"H\", and the word \"included\" along with the GUID.</p>\n\n<pre><code>#if !defined(AFX_OPOSCASHDRAWER_H__86921069_045D_4880_A41A_5A18F0E5FABD__INCLUDED_)\n#define AFX_OPOSCASHDRAWER_H__86921069_045D_4880_A41A_5A18F0E5FABD__INCLUDED_\n</code></pre>\n\n<p>Also notice that the IDE generated Preprocessor directive is using the <code>defined()</code> operator. This allows you to use more complex logical operations with the <code>#if</code> directive of the Preprocessor.</p>\n\n<p>See this <a href=\"https://en.wikipedia.org/wiki/C_preprocessor\" rel=\"nofollow noreferrer\">Wikipedia article, C Preprocessor</a> for more details about the Preprocessor. This material should apply to most C++ versions of the Preprocessor as well.</p>\n"}, {"tags": [], "owner": {"reputation": 159, "user_id": 9800605, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qcx7Euru_y0/AAAAAAAAAAI/AAAAAAAACAg/HXqaMcWwBeU/photo.jpg?sz=128", "display_name": "Alberto Valero", "link": "https://stackoverflow.com/users/9800605/alberto-valero"}, "is_accepted": false, "score": 0, "last_activity_date": 1526506893, "creation_date": 1526506893, "answer_id": 50380308, "question_id": 50379725, "link": "https://stackoverflow.com/questions/50379725/what-is-reason-for-compile-errors-from-h-file-of-custom-library-class-in-arduin/50380308#50380308", "title": "What is reason for compile errors from .h file of custom library class in Arduino IDE", "body": "<p>You should not name the Class the same way you name your define</p>\n\n<p>A define is like an alias, so, your Class name is being set to the define value, in your case empty string.</p>\n"}], "owner": {"reputation": 131, "user_id": 8338606, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/863466627150722/picture?type=large", "display_name": "Alexandre Michaud", "link": "https://stackoverflow.com/users/8338606/alexandre-michaud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "accepted_answer_id": 50380214, "answer_count": 2, "score": 1, "last_activity_date": 1526567251, "creation_date": 1526504049, "last_edit_date": 1526524939, "question_id": 50379725, "link": "https://stackoverflow.com/questions/50379725/what-is-reason-for-compile-errors-from-h-file-of-custom-library-class-in-arduin", "title": "What is reason for compile errors from .h file of custom library class in Arduino IDE", "body": "<p>I am developing a program for a robot using Energia (a fork of Arduino). I decided to create a library composed of a single class to handle position and distance calculations.</p>\n\n<p>When I try to use the class I am seeing compiler errors that I do not understand.</p>\n\n<p>Here is my .h file: </p>\n\n<pre><code>#ifndef Position\n#define Position\n#include \"Energia.h\"\nclass Position\n{\n    public:\n        Position(int PinEcho, int PinTrig);\n        float getDistance(char* Distance);\n        float getDistanceMoy(int Nombre,char* unite);\n    private:\n        int _pinEcho;\n        int _pinTrig;\n\n};\n#endif\n</code></pre>\n\n<p>And the .cpp file contains:</p>\n\n<pre><code>#include \"Energia.h\" //Arduino.h if we are using Arduino\n#include \"Position.h\"\n\nPosition::Position(int pinEcho,int pinTrig)\n{\n    pinMode(pinEcho, OUTPUT);\n    pinMode(pinTrig, INPUT);\n    digitalWrite(pinTrigger, LOW);\n    int _pinEcho = pinEcho;\n    int _pinTrig = pinTrig;\n    const unsigned long MEASURE_TIMEOUT = 25000UL;\n    const float SOUND_SPEED = 340 / 1000;\n}\n\nfloat Position::getDistance(char* mode){\n    digitalWrite(pinTrigger, LOW);\n    digitalWrite(pinTrigger, HIGH);\n    delayMicroseconds(10);\n    digitalWrite(pinTrigger, LOW);\n    long mesure = pulseIn(pinEcho,HIGH,MEASURE_TIMEOUT);\n    float distance = mesure / 2 * SOUND_SPEED;\n    if(mode ==\"cm\") distance = distance / 10;\n    if(mode ==\"dm\") distance = distance / 100;\n    if(mode == \"m\") distance = distance / 1000;\n    return distance;\n}\n\nfloat Position::getDistanceMoy(int maxi,char* mode){\n    int i=0, j=0;\n    int distMoy = 0;\n    while(i != maxi ){\n        digitalWrite(pinTrigger, LOW);\n        digitalWrite(pinTrigger, HIGH);\n        delayMicroseconds(10);\n        digitalWrite(pinTrigger, LOW);\n        long mesure = pulseIn(pinEcho,HIGH,MEASURE_TIMEOUT);\n        float distance = mesure / 2 * SOUND_SPEED;\n        if(distance != 0){\n            distMoy += distance;\n            j++;\n        }\n        i++;\n    }\n    distMoy = distMoy/j;\n    if(mode ==\"cm\") distMoy = distMoy / 10;\n    if(mode ==\"dm\") distMoy = distMoy / 100;\n    if(mode == \"m\") distMoy = distMoy / 1000;\n    return distMoy;\n}\n</code></pre>\n\n<p>Then I import the library on Arduino with <code>#include &lt;Position.h&gt;</code> and then initialize it:</p>\n\n<pre><code>Position position(Variable1,Variable2);\n</code></pre>\n\n<p>But when I want to use it and Energia (or Arduino) I get these errors:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>In file included from C:\\Users\\alex9\\Documents\\Energia\\sketch_may10a\\sketch_may10a.ino:1:0:\nC:\\Users\\alex9\\Documents\\Energia\\libraries\\Position/Position.h:15:18: error: expected unqualified-id before 'int'\n         Position(int PinEcho, int PinTrig);\n                  ^\nC:\\Users\\alex9\\Documents\\Energia\\libraries\\Position/Position.h:15:18: error: expected ')' before 'int'\nC:\\Users\\alex9\\Documents\\Energia\\libraries\\Position/Position.h:13:1: error: an anonymous struct cannot have function members\n {\n ^\nC:\\Users\\alex9\\Documents\\Energia\\libraries\\Position/Position.h:22:1: error: abstract declarator '&lt;anonymous class&gt;' used as declaration\n };\n ^\nsketch_may10a:8: error: expected constructor, destructor, or type conversion before '(' token\n Position position(PinEcho,PinTrig);\n                  ^\nexit status 1 expected constructor, destructor, or type conversion before '(' token\n</code></pre>\n\n<p>I don't understand these error messages and don't know what I need to fix. Could someone help me?</p>\n"}, {"tags": ["c++", "pointers", "segmentation-fault"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1526503147, "post_id": 50379508, "comment_id": 87775291, "body": "The beginning of the code (<code>fopen</code> and above) is completely fine. Probably you have undefined behaviour somewhere else, and it just happends to manifest itself when you <code>fopen</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1526503153, "post_id": 50379508, "comment_id": 87775294, "body": "If the error occurs at <code>c=fopen(&quot;Contact.dat&quot;,&quot;rb&quot;);</code> what happens if you remove the rest of the function?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1526503186, "post_id": 50379508, "comment_id": 87775308, "body": "If <code>fopen</code> returns a null pointer you should not pass that pointer to <code>fclose</code>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1526503385, "post_id": 50379508, "comment_id": 87775395, "body": "And if you&#39;re programming in C++, why are you using to much old C code? C files, C <a href=\"https://en.wikipedia.org/wiki/Variable-length_array\" rel=\"nofollow noreferrer\">variable-length arrays</a> (which doesn&#39;t actually exist in C++), C strings. Oh and what do you think <code>cout&lt;&lt;(&quot;Opcion: &quot;,strlen(&quot;Opcion: &quot;),0,0)</code> will do?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526503442, "post_id": 50379508, "comment_id": 87775428, "body": "@Someprogrammerdude - quite possibly the reason for the actual problem? May be a dupe: <a href=\"https://stackoverflow.com/questions/16922871/why-glibcs-fclosenull-cause-segmentation-fault-instead-of-returning-error\" title=\"why glibcs fclosenull cause segmentation fault instead of returning error\">stackoverflow.com/questions/16922871/&hellip;</a>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526503686, "post_id": 50379508, "comment_id": 87775535, "body": "Oh, you mean to say that the crash happens <i>inside</i> the <code>fopen</code> call? Then you have some very bad problem, quite probably some <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a>. If you look at the function call stack, does it look okay? If it does look okay, then the problem is most likely before the call to your function (in the code you don&#39;t show), otherwise it could be anywhere. If possible, use tools such as <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">Valgrind</a> to help you diagnose and locate your problem."}, {"owner": {"reputation": 11, "user_id": 9802142, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215315096420342/picture?type=large", "display_name": "Guido", "link": "https://stackoverflow.com/users/9802142/guido"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526532223, "post_id": 50379508, "comment_id": 87782473, "body": "@Someprogrammerdude Idk, they teach us to code that way at University. As for <code>cout&lt;&lt;(&quot;Opcion: &quot;,strlen(&quot;Opcion: &quot;),0,0)</code>, it was actually a function created by me to display mesages in a special way with 4 parameters... but changed them all to <code>cout&lt;&lt;</code> to post it here for easier understanding undertanding, just missed that one. I assure you that&#39;s not the problem. Will try to delete the <code>fclose(c)</code>, and then the rest of the code to see if the error still shows up. Thanks you all for the responses. Will keep you posted."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526538030, "post_id": 50379508, "comment_id": 87784806, "body": "If that&#39;s what your teachers are telling you to use, then I suggest you get a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list/388282#388282\">few good books</a> of your own to study."}, {"owner": {"reputation": 11, "user_id": 9802142, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215315096420342/picture?type=large", "display_name": "Guido", "link": "https://stackoverflow.com/users/9802142/guido"}, "edited": false, "score": 0, "creation_date": 1526665858, "post_id": 50379508, "comment_id": 87849187, "body": "Well, I think it was actually a CodeBlocks problem... I ran the program in the university and didn&#39;t happen, so after I came back, I downloaded the last version of CodeBlocks, started the debugger and I did not happen again...  I&#39;ve ran it more than 40 times since then and didn&#39;t have any problem at all. Thanks all for the help and advices."}], "owner": {"reputation": 11, "user_id": 9802142, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215315096420342/picture?type=large", "display_name": "Guido", "link": "https://stackoverflow.com/users/9802142/guido"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526533166, "creation_date": 1526502949, "last_edit_date": 1526533166, "question_id": 50379508, "link": "https://stackoverflow.com/questions/50379508/sigsegv-when-assigning-file", "title": "SIGSEGV when assigning FILE*", "body": "<p>So I have this function that shows a list of contacts separated by pages.\nThe thing is that when the function runs, sometimes makes random fails. So I opened the debugger and the line c=fopen(\"Contacts.dat\",\"rb\"); says SIGSEGV (I know its an error of pointers or such, so i guess it has something to do with FILE*c, but i can't get what the problem is... so here's the code.\n(Variable names are in spanish, so i changed it a bit for you guys to understand it better).</p>\n\n<pre><code>void listarContactos(){\n    struct tContact contact;\n    FILE*c;\n    c=fopen(\"Contact.dat\",\"rb\");\n    if(c==NULL){\n        pNULL(4);\n        fclose(c);\n        exit(1);\n    }\n    int pageLimit=3;\n    int qContacts=0;\n    while(fread(&amp;contact,sizeof(tContact),1,c)){\n        if(contact.Active){\n            qContacts++;\n        }\n    }\n    int aux=0;\n    if(qContacts%pageLimit!=0){\n        aux=1;\n    }\n    int vecPag[qContacts/pageLimit+aux];\n    int qPages=qContacts/pageLimit+aux;\n    fseek(c,0,0);\n    vecPag[0]=ftell(c);\n    qContacts=0;\n    int nPag=0;\n    while(fread(&amp;contact,sizeof(tContact),1,c)){\n        if(contact.Active){\n            qContacts++;\n        }\n        if(qContacts%pageLimit==0){\n            nPag++;\n            vecPag[nPag]=ftell(c);\n        }\n    }\n    nPag=0;\n    fseek(c,vecPag[nPag],0);\n    char choice[4];\n    bool exit=0;\n    while(!exit){\n        system(\"cls\");\n        cout&lt;&lt;\"CONTACT LIST\")&lt;&lt;endl;\n        qContacts=0;\n        fseek(c,vecPag[nPag],0);\n        while(qContacts&lt;pageLimit){\n            if(fread(&amp;contact,sizeof(tContact),1,c)){\n                if(contact.Active){\n                    showContacto(contact);\n                    qContacts++;\n                }\n            }\n        }\n        cout&lt;&lt;\"Page number: \"&lt;&lt;nPag+1&lt;&lt;endl;\n        cout&lt;&lt;\"4 = PREVIOUS PAGE\"&lt;&lt;endl;\n        cout&lt;&lt;\"6 = NEXT PAGE\"&lt;&lt;endl;\n        cout&lt;&lt;\"0 = EXIT\"&lt;&lt;endl;\n        cout&lt;&lt;\"Option: \";\n        sys::getline(choice,3);\n        switch(choice[0]){\n            case '4':{\n                if(nPag&gt;0){\n                    nPag--;\n                }\n                break;}\n            case '6':{\n                if(nPag&lt;qPages){\n                    nPag++;\n                }\n                break;}\n            case '0':{      //salir\n                exit=1;\n                break;}\n            default:{\n                cout&lt;&lt;\"wrong option!\"&lt;&lt;endl;\n                break;}\n        }\n    }\n    fclose(c);\n    return;\n}\n</code></pre>\n"}, {"tags": ["c++", "fstream"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1526502954, "post_id": 50379465, "comment_id": 87775203, "body": "This doesn&#39;t address the question, but you don&#39;t need that call to <code>ofs.close()</code>. The destructor will do that."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1526502962, "post_id": 50379465, "comment_id": 87775206, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/109449/getting-a-file-from-a-stdfstream\">Getting a FILE* from a std::fstream</a>"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 2, "creation_date": 1526503000, "post_id": 50379465, "comment_id": 87775222, "body": "@Frank Not sure if that&#39;s a dupe."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 2, "creation_date": 1526503039, "post_id": 50379465, "comment_id": 87775242, "body": "Quick hack: check the size of <code>&#47;dev&#47;null</code> before and after the call ;-) ;-) ;-)"}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "edited": false, "score": 1, "creation_date": 1526503049, "post_id": 50379465, "comment_id": 87775248, "body": "More likely, this one: <a href=\"https://stackoverflow.com/questions/10773391/getting-filename-or-path-from-fstream\">Getting filename (or path) from fstream</a>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1526503058, "post_id": 50379465, "comment_id": 87775250, "body": "Are you asking whether you can test that the constructor did what you told it to do, or are you asking how to get back information that you&#39;ve thrown away? If writing to /dev/null means something special, keep a note that that&#39;s what you&#39;re doing."}, {"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1526503666, "post_id": 50379465, "comment_id": 87775527, "body": "With C++ standard library, you <i>cannot</i> do that. Targeting a specific platform, you can use different tricks. (E.g. if you know you have just one file open, you can query the Linux /proc and get the file open by your process). Anyway if you reach the &quot;implementation&quot; level you can do that using some platform dependent call."}, {"owner": {"reputation": 6021, "user_id": 206404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497437666710e8b13ee168bd7b62fcba?s=128&d=identicon&r=PG", "display_name": "Stephen Newell", "link": "https://stackoverflow.com/users/206404/stephen-newell"}, "edited": false, "score": 1, "creation_date": 1526504201, "post_id": 50379465, "comment_id": 87775743, "body": "What are you trying to solve here?  Is your question academic, or are you trying to solve a specific issue?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1526504698, "post_id": 50379465, "comment_id": 87775976, "body": "No there is not."}], "answers": [{"comments": [{"owner": {"reputation": 2059, "user_id": 7949696, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206392642867400/picture?type=large", "display_name": "James Poag", "link": "https://stackoverflow.com/users/7949696/james-poag"}, "edited": false, "score": 1, "creation_date": 1526504037, "post_id": 50379677, "comment_id": 87775662, "body": "I agree.  Separation of concerns."}, {"owner": {"reputation": 598, "user_id": 3882321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sv5r1.png?s=128&g=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/3882321/tony"}, "edited": false, "score": 0, "creation_date": 1526505855, "post_id": 50379677, "comment_id": 87776421, "body": "You can do that or create a wrapper class, which stores directory info used to open stream. This way it isn&#39;t tied to Dev, ex: production env."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1526503846, "creation_date": 1526503846, "answer_id": 50379677, "question_id": 50379465, "link": "https://stackoverflow.com/questions/50379465/how-to-detect-if-ofstream-is-writing-to-dev-null/50379677#50379677", "title": "How to detect if ofstream is writing to /dev/null", "body": "<blockquote>\n  <p>is there any (simple) way to detect in <code>some_function(std::ofstream ofs)</code> if <code>ofs</code> is writing to <code>/dev/null</code> or not?</p>\n</blockquote>\n\n<p>No, there isn't.</p>\n\n<p>The fact that you are looking for a way to get that information indicates to me that <code>some_function</code> has branching code depending on whether you are writing to <code>/dev/null</code> or not.</p>\n\n<p>You can address that problem by adding another argument to the function and let the client code provide that information to you.</p>\n\n<pre><code>void some_function(std::ofstream&amp; ofs, bool isDevNull);\n</code></pre>\n\n<p>and use it as:</p>\n\n<pre><code>std::ofstream ofs (\"/dev/null\", std::ofstream::out);\nofs &lt;&lt; \"lorem ipsum\";\nsome_function(ofs, true);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 1, "last_activity_date": 1526510491, "creation_date": 1526510491, "answer_id": 50380918, "question_id": 50379465, "link": "https://stackoverflow.com/questions/50379465/how-to-detect-if-ofstream-is-writing-to-dev-null/50380918#50380918", "title": "How to detect if ofstream is writing to /dev/null", "body": "<p>from <code>std::ofstream</code>, no.</p>\n\n<p>From a <code>FILE*</code>, yes but it's not portable.</p>\n\n<p>Here's a version for linux:</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;memory&gt;\n#include &lt;stdexcept&gt;\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n\nstruct file_closer\n{\n    void operator()(FILE*p) const noexcept\n    {\n        if (p)\n            fclose(p);\n    }\n};\n\nauto open_write(const char* path) -&gt; std::unique_ptr&lt;FILE, file_closer&gt;\n{\n    auto result = std::unique_ptr&lt;FILE, file_closer&gt;(fopen(path, \"w\"));\n\n    if (!result.get())\n        throw std::runtime_error(\"not opened\");\n    return result;\n}\n\nsize_t do_readlink(const char* path, char* buffer, size_t buflen)\n{\n    auto len = readlink(path, buffer, buflen);\n    if (len &lt; 0)\n        throw std::runtime_error(\"failed to read link\");\n    return size_t(len);\n}\n\nbool is_dev_null(FILE* fp)\n{\n    int fd = fileno(fp);\n    std::ostringstream procpath;\n    procpath &lt;&lt; \"/proc/self/fd/\" &lt;&lt; fd;\n    auto spath = procpath.str(); \n\n    size_t bufs = 1024;\n    std::string path(bufs, ' ');\n    auto len = do_readlink(spath.c_str(), &amp;path[0], bufs);\n    while(len &gt; bufs)\n    {\n        bufs = len;\n        path.resize(bufs);\n        len = do_readlink(spath.c_str(), &amp;path[0], bufs);\n    }\n\n    path.resize(len);\n    return path == \"/dev/null\";\n}\n\nint main()\n{\n    auto fp = open_write(\"/dev/null\");\n    std::cout &lt;&lt; is_dev_null(fp.get());\n}\n</code></pre>\n"}], "owner": {"reputation": 142, "user_id": 2725742, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6c728281c519831eeb39547df01a8339?s=128&d=identicon&r=PG&f=1", "display_name": "user2725742", "link": "https://stackoverflow.com/users/2725742/user2725742"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 50379677, "answer_count": 2, "score": 1, "last_activity_date": 1526510491, "creation_date": 1526502819, "last_edit_date": 1526504113, "question_id": 50379465, "link": "https://stackoverflow.com/questions/50379465/how-to-detect-if-ofstream-is-writing-to-dev-null", "title": "How to detect if ofstream is writing to /dev/null", "body": "<p>Is there any (simple) way to detect in <code>some_function()</code> if <code>ofs</code> is writing to <code>/dev/null</code> or not?</p>\n\n<pre><code>#include &lt;fstream&gt;\n\nsome_function(std::ofstream &amp; ofs);\n\nint main()\n{\n    std::ofstream ofs(\"/dev/null\");\n    ofs &lt;&lt; \"lorem ipsum\";\n\n    some_function(ofs); // Testing in here\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "language-lawyer", "static-initialization", "atexit", "initialization-order"], "comments": [{"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 1, "creation_date": 1526500579, "post_id": 50378923, "comment_id": 87774134, "body": "Object initialization is considered complete at construction completion in general. See how destructors get handled during exception handling when exceptions get thrown inside a constructor as another example of that."}, {"owner": {"reputation": 4590, "user_id": 2879325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2503121b7e7487cd870c8afe40f0cf21?s=128&d=identicon&r=PG", "display_name": "Ext3h", "link": "https://stackoverflow.com/users/2879325/ext3h"}, "edited": false, "score": 0, "creation_date": 1526500844, "post_id": 50378923, "comment_id": 87774247, "body": "Even is it was defined, implementations are not exactly behaving well with regard to destruction order of static variables. You even have extremely broken implementations like VisualC++, which dare to hard kill all threads first, and then invoke static variable destructors in an undefined (and often corrupted) state."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1526500871, "post_id": 50378923, "comment_id": 87774261, "body": "Friends don&#39;t let friends use global variables. Seriously; get rid of all global variables (and that includes singletons) and you&#39;ll live a happier life in the long run."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1526500897, "post_id": 50378923, "comment_id": 87774275, "body": "<a href=\"https://timsong-cpp.github.io/cppwp/dcl.init#21\" rel=\"nofollow noreferrer\">&#91;decl.init&#93;/21</a> leads me to believe you can guarantee that the constructor has to finish before initialization is complete."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1526500920, "post_id": 50378923, "comment_id": 87774291, "body": "@JesperJuhl oh really? Good-bye, <code>std::cout</code>..."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1526501036, "post_id": 50378923, "comment_id": 87774344, "body": "@SergeyA nitpick. I think you very well know what I <i>meant</i> by that comment. Nothing is black/white."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1526501080, "post_id": 50378923, "comment_id": 87774364, "body": "@JesperJuhl, no, I do not. You literally said &#39;all global variables, including singletons&#39;. I can&#39;t imagine a complex application which doesn&#39;t use a logger which is a global variable or a singleton, for example."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1526501236, "post_id": 50378923, "comment_id": 87774436, "body": "@SergeyA Fine. Let me be more specific. Don&#39;t create any globals/singletons of your own - they lead to tight coupling and hard to debug creation/destruction/ordering problems/bugs. Better/more clear?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1526501336, "post_id": 50378923, "comment_id": 87774487, "body": "@JesperJuhl, ok, back to logger example. How do you log in your program?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1526501449, "post_id": 50378923, "comment_id": 87774528, "body": "@SergeyA by passing a reference to a log object (created in <code>main</code>) to all functions that need to write log messages."}, {"owner": {"reputation": 623, "user_id": 2008273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VTTvj.jpg?s=128&g=1", "display_name": "ricco19", "link": "https://stackoverflow.com/users/2008273/ricco19"}, "edited": false, "score": 3, "creation_date": 1526501533, "post_id": 50378923, "comment_id": 87774570, "body": "How is this conversation (argument) constructive or useful to the original question?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1526501771, "post_id": 50378923, "comment_id": 87774676, "body": "@JesperJuhl you really do? You pass around the poor logger all the way around? Ok, let me tell you, I have never seen a real application like that."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1526501897, "post_id": 50378923, "comment_id": 87774735, "body": "@SergeyA yes. Really. Although in some applications I use a sepperate log process and write to it via shared memory."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1526502023, "post_id": 50378923, "comment_id": 87774792, "body": "@JesperJuhl, same difference. Where shared memory address does come from? Passed around from the main?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1526502732, "post_id": 50378923, "comment_id": 87775130, "body": "@SergeyA yep. You guessed it."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1526506216, "post_id": 50378923, "comment_id": 87776564, "body": "@JesperJuhl Out of curiosity, do you also refuse to use <code>static const</code> members? They are essentially the same thing as globals in the context of static initialization. In any case eliminating all globals is not always as easy as it sounds, specially when considering legacy code and dependencies. And sometimes, on occasion, the gymnastics of avoiding a global are just not worth the man hours or code complexity."}], "answers": [{"tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": true, "score": 7, "last_activity_date": 1526501005, "creation_date": 1526501005, "answer_id": 50379077, "question_id": 50378923, "link": "https://stackoverflow.com/questions/50378923/stdatexit-ordering-when-called-from-a-global-objects-constructor/50379077#50379077", "title": "std::atexit ordering when called from a global object&#39;s constructor", "body": "<p>The call to the destructor will happen before the call to the function passed to <code>atexit</code>.  From [basic.start.term], p5:</p>\n\n<blockquote>\n  <p>If a call to <code>std::atexit</code> strongly happens before the completion of\n  the initialization of an object with static storage duration, the call to the destructor for the object is sequenced\n  before the call to the function passed to <code>std::atexit</code>.</p>\n</blockquote>\n"}], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 0, "accepted_answer_id": 50379077, "answer_count": 1, "score": 8, "last_activity_date": 1526501005, "creation_date": 1526500384, "question_id": 50378923, "link": "https://stackoverflow.com/questions/50378923/stdatexit-ordering-when-called-from-a-global-objects-constructor", "title": "std::atexit ordering when called from a global object&#39;s constructor", "body": "<p>cppreference says about <a href=\"http://en.cppreference.com/w/cpp/utility/program/atexit\" rel=\"noreferrer\"><code>std::atexit</code></a> :</p>\n\n<blockquote>\n  <p>The functions may be called concurrently with the destruction of the objects with static storage duration and with each other, maintaining the guarantee that if registration of A was sequenced-before the registration of B, then the call to B is sequenced-before the call to A, same applies to the sequencing between static object constructors and calls to atexit</p>\n</blockquote>\n\n<p>I understand that passage to mean that, if <code>std::atexit</code> is called during static initialization, the registered function will be called during the destruction of static objects just before the destruction of the static object which was last initialized when the <code>std::atexit</code> that registered the function was called. I also interpret \"may be called concurrently\" to mean the calls can occur between static object destructions as opposed to the multi-threaded interpretation of the word.</p>\n\n<p>What I'm wondering is whether a object is considered as initialized (in the context of this ordering) when it's initialization begins or when it completes. I wrote a short test to test this :</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n\nstruct foo\n{\n    foo() \n    {\n        std::cout &lt;&lt; \"ctor\\n\";\n        std::atexit([]() { std::cout &lt;&lt; \"atexit\\n\"; });\n    }\n    ~foo()\n    {\n        std::cout &lt;&lt; \"dtor\\n\";\n    }\n};\n\nfoo my_foo;\n\nint main()\n{\n    return 0;\n}\n</code></pre>\n\n<p>The output I get is (<a href=\"http://cpp.sh/3bllu\" rel=\"noreferrer\">http://cpp.sh/3bllu</a>) :</p>\n\n<pre><code>ctor\ndtor\natexit\n</code></pre>\n\n<p>This leads me to believe that <code>my_foo</code> is not considered to be initialized in this context until it's construction finishes. In other words, the function is considered to have been registered before <code>my_foo</code> was initialized so the registered function executes after <code>my_foo</code>'s destruction.</p>\n\n<p>I can't seem to find anything that would guarantee this behavior and I'm not even entirely sure my initial interpretation of the cited passage is correct. Is the behavior I've described something that I can rely on or is it implementation defined or even undefined behavior?</p>\n"}, {"tags": ["c++", "polymorphism"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1526499436, "post_id": 50378692, "comment_id": 87773619, "body": "What does <code>getPoints</code> do?  If we knew we could help you make one that works for both."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1526499437, "post_id": 50378692, "comment_id": 87773620, "body": "If you try to replace <code>..</code> with an actual value, you will see the problem. Try it, then swap <code>[0]</code> and <code>[1]</code> and see if the proposed usage still makes sense."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 4, "creation_date": 1526499464, "post_id": 50378692, "comment_id": 87773636, "body": "Your interface says that derived classes must implement <i>all</i> of those methods, not <i>one of</i> those methods, so I would not use that design"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1526499560, "post_id": 50378692, "comment_id": 87773694, "body": "The problem here is that the code provides two distinct pure virtual functions. Having one derived type implement one of them and a different derived type implement the other one leaves you with a problem: how do you determine which one you can call when you have only a pointer to the base type? This is a fundamental type error."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1526499608, "post_id": 50378692, "comment_id": 87773713, "body": "May be there is really no common ancestor to those two concrete types."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1526499705, "post_id": 50378692, "comment_id": 87773755, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. My compiler wont swallow things like <code>..</code> without complaining alot"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1526499740, "post_id": 50378692, "comment_id": 87773774, "body": "@user463035818, do not be a nitpicker. It is quite clear what the OP&#39;s problem is."}, {"owner": {"reputation": 123, "user_id": 7047603, "user_type": "registered", "profile_image": "https://graph.facebook.com/1610446128980867/picture?type=large", "display_name": "skluzada", "link": "https://stackoverflow.com/users/7047603/skluzada"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1526499768, "post_id": 50378692, "comment_id": 87773785, "body": "@NathanOliver <code>getPoints()</code> is supposed to return the amount of points an user gets for answering the question with <code>userAnswer</code>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1526499820, "post_id": 50378692, "comment_id": 87773803, "body": "@SergeyA hm, sorry I really dont get it, maybe I was staring at code for too long already today, but I am a nitpicker anyhow :P"}, {"owner": {"reputation": 123, "user_id": 7047603, "user_type": "registered", "profile_image": "https://graph.facebook.com/1610446128980867/picture?type=large", "display_name": "skluzada", "link": "https://stackoverflow.com/users/7047603/skluzada"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1526499906, "post_id": 50378692, "comment_id": 87773841, "body": "@user463035818 The &quot;working&quot; example would be too long so I figured it might be better to post the question like this instead."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1526499944, "post_id": 50378692, "comment_id": 87773861, "body": "@skluzada So, whatever you pass to <code>getPoints</code> will be compared to an answer and result is returned?  If that is the case then can&#39;t you just use a string for all of it?"}, {"owner": {"reputation": 123, "user_id": 7047603, "user_type": "registered", "profile_image": "https://graph.facebook.com/1610446128980867/picture?type=large", "display_name": "skluzada", "link": "https://stackoverflow.com/users/7047603/skluzada"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1526500225, "post_id": 50378692, "comment_id": 87773971, "body": "@NathanOliver Yeah I guess that&#39;s the only way to do what I want - pass string and then parse the answer in the function."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1526502651, "post_id": 50378692, "comment_id": 87775102, "body": "If a derived class does not need functions provided by a base class (virtual or otherwise), it&#39;s possible deriving from that base is the wrong design decision."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1526499643, "post_id": 50378752, "comment_id": 87773729, "body": "While this statement is correct, it is not an answer to OP&#39;s question. This should be a comment."}, {"owner": {"reputation": 510, "user_id": 9791398, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156375049162838/picture?type=large", "display_name": "Tim Johns", "link": "https://stackoverflow.com/users/9791398/tim-johns"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1526499663, "post_id": 50378752, "comment_id": 87773737, "body": "I would love to.... but I only have 46 rep."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1526499698, "post_id": 50378752, "comment_id": 87773749, "body": "But posts like that <b>do not</b> help you to gain rep."}, {"owner": {"reputation": 510, "user_id": 9791398, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156375049162838/picture?type=large", "display_name": "Tim Johns", "link": "https://stackoverflow.com/users/9791398/tim-johns"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1526499715, "post_id": 50378752, "comment_id": 87773762, "body": "And to be fair, the question is &quot;should I just rethink the whole design&quot;, which I did answer."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1526499760, "post_id": 50378752, "comment_id": 87773783, "body": "Perhaps make that clearer?  &quot;Yes.  You should rethink the whole design.&quot;"}, {"owner": {"reputation": 510, "user_id": 9791398, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156375049162838/picture?type=large", "display_name": "Tim Johns", "link": "https://stackoverflow.com/users/9791398/tim-johns"}, "edited": false, "score": 0, "creation_date": 1526499832, "post_id": 50378752, "comment_id": 87773809, "body": "Is that more acceptable?"}], "tags": [], "owner": {"reputation": 510, "user_id": 9791398, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156375049162838/picture?type=large", "display_name": "Tim Johns", "link": "https://stackoverflow.com/users/9791398/tim-johns"}, "is_accepted": false, "score": 2, "last_activity_date": 1526499807, "last_edit_date": 1526499807, "creation_date": 1526499585, "answer_id": 50378752, "question_id": 50378692, "link": "https://stackoverflow.com/questions/50378692/derived-classes-not-using-all-pure-virtual-methods-from-the-base-class/50378752#50378752", "title": "Derived classes not using all pure virtual methods from the base class", "body": "<p>Yes, you should rethink the design.  In its current state, this design breaks the <a href=\"https://en.wikipedia.org/wiki/Interface_segregation_principle\" rel=\"nofollow noreferrer\">Interface Segregation Principle</a>, since <code>QText</code> would need to implement <code>getPoints(double userAnswer)</code>, which it doesn't require, and <code>QNumeric</code> would need to implement <code>getPoints(const std::string&amp; userAnswer)</code>, which it doesn't require.</p>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 7047603, "user_type": "registered", "profile_image": "https://graph.facebook.com/1610446128980867/picture?type=large", "display_name": "skluzada", "link": "https://stackoverflow.com/users/7047603/skluzada"}, "edited": false, "score": 0, "creation_date": 1526502144, "post_id": 50378929, "comment_id": 87774852, "body": "This is helpful, thank you. I decided to create a <code>struct UserAnswer</code> that can store <code>std::string</code>, <code>double</code> and other types as well, so that the <code>getPoints</code> functions can all have the same parameters."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1526500400, "creation_date": 1526500400, "answer_id": 50378929, "question_id": 50378692, "link": "https://stackoverflow.com/questions/50378692/derived-classes-not-using-all-pure-virtual-methods-from-the-base-class/50378929#50378929", "title": "Derived classes not using all pure virtual methods from the base class", "body": "<p>To do what you are asking, simply don't make your virtual methods be abstract.  Give them default implementations in the base class, eg:</p>\n\n<pre><code>class Question\n{\n    virtual double getPoints(double userAnswer) const;\n    virtual double getPoints(const std::string &amp; userAnswer) const;\n    ...\n};\n\ndouble Question::getPoints(double userAnswer) const\n{\n    return getPoints(std::to_string(userAnswer));\n}\n\ndouble Question::getPoints(const std::string &amp; userAnswer) const\n{\n    std::istringstream iss(userAnswer);\n    double dblAnswer;\n    return (iss &gt;&gt; dblAnswer) ? getPoints(dblAnswer) : 0.0;\n}\n</code></pre>\n\n<p>Then descendants can override only the virtual methods they are interested in, as long as they override at least one of them, and the overrides don't call back to the base class methods.  Otherwise you end up in a recursive loop.</p>\n"}], "owner": {"reputation": 123, "user_id": 7047603, "user_type": "registered", "profile_image": "https://graph.facebook.com/1610446128980867/picture?type=large", "display_name": "skluzada", "link": "https://stackoverflow.com/users/7047603/skluzada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "closed_date": 1526537399, "accepted_answer_id": 50378929, "answer_count": 2, "score": -4, "last_activity_date": 1526500400, "creation_date": 1526499305, "question_id": 50378692, "link": "https://stackoverflow.com/questions/50378692/derived-classes-not-using-all-pure-virtual-methods-from-the-base-class", "closed_reason": "Needs details or clarity", "title": "Derived classes not using all pure virtual methods from the base class", "body": "<p>I have a similar situation:</p>\n\n<pre><code>class Question{\nvirtual double getPoints(double userAnswer) const = 0;\nvirtual double getPoints(const std::string &amp; userAnswer) const = 0;\n.\n.\n};\n\nclass QText : public Question{\ndouble getPoints(const std::string &amp; userAnswer) const;\n.\n.\n};\n\nclass QNumeric : public Question{\ndouble getPoints(double userAnswer) const;\n.\n.\n};\n</code></pre>\n\n<p>And I need to be able to do something like this this:</p>\n\n<pre><code>std::vector&lt;Question*&gt; quiz;\nquiz.push_back(new QText(..));\nquiz.push_back(new QNumeric(..));\nquiz[0]-&gt;getPoints(..);\nquiz[1]-&gt;getPoints(..);\n</code></pre>\n\n<p>I understand that if I don't implement a pure virtual function in a derived class, the class will be abstact and I won't be able to create an instance of that class. Is there a way to do what I want or should I just rethink the whole design?</p>\n"}, {"tags": ["c++", "qt", "qt5", "qt-designer"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1526498786, "post_id": 50378537, "comment_id": 87773318, "body": "You can show an image of the Object Inspector that is to the right of Qt designer."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1526499297, "post_id": 50378537, "comment_id": 87773553, "body": "share your .ui."}, {"owner": {"reputation": 301, "user_id": 8825121, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/64b07523f29bb03455569640c4146f52?s=128&d=identicon&r=PG&f=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/8825121/rick"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1526500009, "post_id": 50378537, "comment_id": 87773889, "body": "@eyllanesc I have updated my post with the image &amp; my base classes."}, {"owner": {"reputation": 301, "user_id": 8825121, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/64b07523f29bb03455569640c4146f52?s=128&d=identicon&r=PG&f=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/8825121/rick"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1526500267, "post_id": 50378537, "comment_id": 87773996, "body": "@drescherjm just added it for you."}], "answers": [{"comments": [{"owner": {"reputation": 301, "user_id": 8825121, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/64b07523f29bb03455569640c4146f52?s=128&d=identicon&r=PG&f=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/8825121/rick"}, "edited": false, "score": 0, "creation_date": 1526502645, "post_id": 50379026, "comment_id": 87775099, "body": "Hmm I didn&#39;t even think of this. Thanks. There must be a way to make DemoPromotedWidget selfaware of it&#39;s own UI elements though.... It seems silly for it not to. I even thought I would be able to just create a new Qt Designer form, and drag that into the widget toolbar, but I don&#39;t seem to be able to."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 301, "user_id": 8825121, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/64b07523f29bb03455569640c4146f52?s=128&d=identicon&r=PG&f=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/8825121/rick"}, "edited": false, "score": 0, "creation_date": 1526502990, "post_id": 50379026, "comment_id": 87775217, "body": "@Rick  No, you do not confuse the classes with the objects created in the classes, it&#39;s like having a car factory (the class) and your car (the object that you use in Qt Designer) that you can change its color, the factory will not know about that action."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 301, "user_id": 8825121, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/64b07523f29bb03455569640c4146f52?s=128&d=identicon&r=PG&f=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/8825121/rick"}, "edited": false, "score": 0, "creation_date": 1526503221, "post_id": 50379026, "comment_id": 87775327, "body": "@Rick A possible new approach is that you create a new form and use that form in the main widget through the promotion."}, {"owner": {"reputation": 301, "user_id": 8825121, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/64b07523f29bb03455569640c4146f52?s=128&d=identicon&r=PG&f=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/8825121/rick"}, "edited": false, "score": 0, "creation_date": 1526503303, "post_id": 50379026, "comment_id": 87775361, "body": "I thought of making the new form too, but I don&#39;t know how to make it appear in the Qt Designer available widget list."}, {"owner": {"reputation": 301, "user_id": 8825121, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/64b07523f29bb03455569640c4146f52?s=128&d=identicon&r=PG&f=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/8825121/rick"}, "edited": false, "score": 0, "creation_date": 1526504564, "post_id": 50379026, "comment_id": 87775918, "body": "oh my gosh I love you! I wasn&#39;t thinking clearly, I was under the impression that I had to add the new form to the widget tool bar... forgot I could just promote a basic widget. Thank you!!!!!!"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1526504041, "last_edit_date": 1526504041, "creation_date": 1526500749, "answer_id": 50379026, "question_id": 50378537, "link": "https://stackoverflow.com/questions/50378537/how-do-i-access-a-promoted-widgets-ui-elements-in-code-using-qt/50379026#50379026", "title": "How do I access a promoted widget&#39;s UI elements in code using Qt?", "body": "<p>You should not use the name of the class with the name of the widget, so the first thing to do is change its name:</p>\n\n<p><a href=\"https://i.stack.imgur.com/YATr4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YATr4.png\" alt=\"enter image description here\"></a></p>\n\n<h1>first option:</h1>\n\n<p>On the other hand that the <code>QLabel</code> this inside the <code>DemoPromotedWidget</code> does not imply that <code>DemoPromotedWidget</code> can access the <code>QLabel</code> and less in the constructor since in that method it is not yet added to the main window, a possible solution is to create an attribute where you can assign it the <code>QLabel</code>:</p>\n\n<p><strong>demopromotedwidget.h</strong></p>\n\n<pre><code>#ifndef DEMOPROMOTEDWIDGET_H\n#define DEMOPROMOTEDWIDGET_H\n\n#include &lt;QLabel&gt;\n#include &lt;QWidget&gt;\n\nclass DemoPromotedWidget : public QWidget\n{\n    Q_OBJECT\npublic:\n    explicit DemoPromotedWidget(QWidget *parent = nullptr);\n    QLabel *getLabel() const;\n    void setLabel(QLabel *value);\nprivate:\n    QLabel *label;\n};\n\n#endif // DEMOPROMOTEDWIDGET_H\n</code></pre>\n\n<p><strong>demopromotedwidget.cpp</strong></p>\n\n<pre><code>#include \"demopromotedwidget.h\"\n\nDemoPromotedWidget::DemoPromotedWidget(QWidget *parent) : QWidget(parent)\n{\n\n}\n\nQLabel *DemoPromotedWidget::getLabel() const\n{\n    return label;\n}\n\nvoid DemoPromotedWidget::setLabel(QLabel *value)\n{\n    label = value;\n    if(label)\n        label-&gt;setText(\"some text\");\n}\n</code></pre>\n\n<hr>\n\n<p><strong>mainwindow.cpp</strong></p>\n\n<pre><code>...\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n    ui-&gt;widget-&gt;setLabel(ui-&gt;DemoLabel);\n}\n...\n</code></pre>\n\n<hr>\n\n<h1>second option:</h1>\n\n<p>Another much simpler way but it can only be done if the widget (QLabel) is added using Qt Designer as in this case using the method <code>showEvent()</code> and <code>findChild()</code>:</p>\n\n<p><strong>demopromotedwidget.h</strong></p>\n\n<pre><code>#ifndef DEMOPROMOTEDWIDGET_H\n#define DEMOPROMOTEDWIDGET_H\n\n#include &lt;QLabel&gt;\n#include &lt;QWidget&gt;\n\nclass DemoPromotedWidget : public QWidget\n{\n    Q_OBJECT\npublic:\n    explicit DemoPromotedWidget(QWidget *parent = nullptr);\nprivate:\n    QLabel *label;\nprotected:\n    void showEvent(QShowEvent *event);\n};\n\n#endif // DEMOPROMOTEDWIDGET_H\n</code></pre>\n\n<p><strong>demopromotedwidget.cpp</strong></p>\n\n<pre><code>#include \"demopromotedwidget.h\"\n\nDemoPromotedWidget::DemoPromotedWidget(QWidget *parent) : QWidget(parent)\n{\n}\n\nvoid DemoPromotedWidget::showEvent(QShowEvent *event)\n{\n    label = findChild&lt;QLabel *&gt;(\"DemoLabel\");\n    if(label)\n        label-&gt;setText(\"some text\");\n    QWidget::showEvent(event);\n}\n</code></pre>\n\n<hr>\n\n<h1>Update:</h1>\n\n<p>A new approach is that you create a form that is a QWidget and that has a <code>.ui</code>, <code>.h</code> and <code>.cpp</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/hxBgW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hxBgW.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/gj8yw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gj8yw.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/BKFxO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BKFxO.png\" alt=\"enter image description here\"></a></p>\n\n<p>As I said create a new class that unlike your initial code has a .ui, then open it with the help of Qt Designer and add the label</p>\n\n<p><a href=\"https://i.stack.imgur.com/T7RvQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/T7RvQ.png\" alt=\"enter image description here\"></a></p>\n\n<p>But it is also a class that you can promote as you did in your first approach.</p>\n\n<p><a href=\"https://i.stack.imgur.com/brLlB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/brLlB.png\" alt=\"enter image description here\"></a></p>\n\n<p>The complete example can be found in the following <a href=\"https://github.com/eyllanesc/stackoverflow/tree/master/50378537\" rel=\"nofollow noreferrer\">link</a></p>\n"}], "owner": {"reputation": 301, "user_id": 8825121, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/64b07523f29bb03455569640c4146f52?s=128&d=identicon&r=PG&f=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/8825121/rick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1247, "favorite_count": 0, "accepted_answer_id": 50379026, "answer_count": 1, "score": 3, "last_activity_date": 1533646126, "creation_date": 1526498556, "last_edit_date": 1533646126, "question_id": 50378537, "link": "https://stackoverflow.com/questions/50378537/how-do-i-access-a-promoted-widgets-ui-elements-in-code-using-qt", "title": "How do I access a promoted widget&#39;s UI elements in code using Qt?", "body": "<p>So I created a class DemoPromotedWidget, it inherits from QWidget.</p>\n\n<p>I then created a Widget in the designer, added a label to said widget called DemoLabel, &amp; promoted the widget to class DemoPromotedWidget... Then I moved it to my toolbox, and it's now under \"Scratchpad\".</p>\n\n<p>Normally, using Qt's designer, I can access ANY elements in the UI file in it's corresponding class file. However, in DemoPromotedWidget I can not.</p>\n\n<p>Is there anyway for me to access DemoLabel inside of DemoPromotedWidget so that I can call something like...</p>\n\n<pre><code>ui-&gt;DemoPromotedWidget-&gt;setText(\"Updated Text\");\n</code></pre>\n\n<p>Here is a picture of my UI Designer, with the DemoPromotedWidget already added.\n<a href=\"https://i.imgur.com/QdT0eeG.png\" rel=\"nofollow noreferrer\">https://i.imgur.com/QdT0eeG.png</a></p>\n\n<p>DemoPromotedWidget.h</p>\n\n<pre><code>#ifndef DEMOPROMOTEDWIDGET_H\n#define DEMOPROMOTEDWIDGET_H\n\n#include &lt;QWidget&gt;\n\nclass DemoPromotedWidget : public QWidget\n{\n    Q_OBJECT\npublic:\n    explicit DemoPromotedWidget(QWidget *parent = nullptr);\n\nsignals:\n\npublic slots:\n};\n\n#endif // DEMOPROMOTEDWIDGET_H\n</code></pre>\n\n<p>DemoPromotedWidget.cpp</p>\n\n<pre><code>#include \"demopromotedwidget.h\"\n\nDemoPromotedWidget::DemoPromotedWidget(QWidget *parent) : QWidget(parent)\n{\n    // How do I access DemoPromotedWidget-&gt;DemoLabel-&gt;setText()?????????????????????\n}\n</code></pre>\n\n<p>Here is my mainwindow.ui...</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ui version=\"4.0\"&gt;\n &lt;class&gt;MainWindow&lt;/class&gt;\n &lt;widget class=\"QMainWindow\" name=\"MainWindow\"&gt;\n  &lt;property name=\"geometry\"&gt;\n   &lt;rect&gt;\n    &lt;x&gt;0&lt;/x&gt;\n    &lt;y&gt;0&lt;/y&gt;\n    &lt;width&gt;711&lt;/width&gt;\n    &lt;height&gt;418&lt;/height&gt;\n   &lt;/rect&gt;\n  &lt;/property&gt;\n  &lt;property name=\"windowTitle\"&gt;\n   &lt;string&gt;MainWindow&lt;/string&gt;\n  &lt;/property&gt;\n  &lt;widget class=\"QWidget\" name=\"centralWidget\"&gt;\n   &lt;widget class=\"DemoPromotedWidget\" name=\"DemoPromotedWidget\" native=\"true\"&gt;\n    &lt;property name=\"geometry\"&gt;\n     &lt;rect&gt;\n      &lt;x&gt;160&lt;/x&gt;\n      &lt;y&gt;60&lt;/y&gt;\n      &lt;width&gt;381&lt;/width&gt;\n      &lt;height&gt;191&lt;/height&gt;\n     &lt;/rect&gt;\n    &lt;/property&gt;\n    &lt;property name=\"styleSheet\"&gt;\n     &lt;string notr=\"true\"&gt;background-color: black;\ntext-align: center;&lt;/string&gt;\n    &lt;/property&gt;\n    &lt;widget class=\"QLabel\" name=\"DemoLabel\"&gt;\n     &lt;property name=\"geometry\"&gt;\n      &lt;rect&gt;\n       &lt;x&gt;0&lt;/x&gt;\n       &lt;y&gt;5&lt;/y&gt;\n       &lt;width&gt;381&lt;/width&gt;\n       &lt;height&gt;181&lt;/height&gt;\n      &lt;/rect&gt;\n     &lt;/property&gt;\n     &lt;property name=\"styleSheet\"&gt;\n      &lt;string notr=\"true\"&gt;color: white;\ntext-align: center;&lt;/string&gt;\n     &lt;/property&gt;\n     &lt;property name=\"text\"&gt;\n      &lt;string&gt;DemoLabel&lt;/string&gt;\n     &lt;/property&gt;\n     &lt;property name=\"alignment\"&gt;\n      &lt;set&gt;Qt::AlignCenter&lt;/set&gt;\n     &lt;/property&gt;\n    &lt;/widget&gt;\n   &lt;/widget&gt;\n  &lt;/widget&gt;\n  &lt;widget class=\"QMenuBar\" name=\"menuBar\"&gt;\n   &lt;property name=\"geometry\"&gt;\n    &lt;rect&gt;\n     &lt;x&gt;0&lt;/x&gt;\n     &lt;y&gt;0&lt;/y&gt;\n     &lt;width&gt;711&lt;/width&gt;\n     &lt;height&gt;21&lt;/height&gt;\n    &lt;/rect&gt;\n   &lt;/property&gt;\n  &lt;/widget&gt;\n  &lt;widget class=\"QToolBar\" name=\"mainToolBar\"&gt;\n   &lt;attribute name=\"toolBarArea\"&gt;\n    &lt;enum&gt;TopToolBarArea&lt;/enum&gt;\n   &lt;/attribute&gt;\n   &lt;attribute name=\"toolBarBreak\"&gt;\n    &lt;bool&gt;false&lt;/bool&gt;\n   &lt;/attribute&gt;\n  &lt;/widget&gt;\n  &lt;widget class=\"QStatusBar\" name=\"statusBar\"/&gt;\n &lt;/widget&gt;\n &lt;layoutdefault spacing=\"6\" margin=\"11\"/&gt;\n &lt;customwidgets&gt;\n  &lt;customwidget&gt;\n   &lt;class&gt;DemoPromotedWidget&lt;/class&gt;\n   &lt;extends&gt;QWidget&lt;/extends&gt;\n   &lt;header&gt;demopromotedwidget.h&lt;/header&gt;\n   &lt;container&gt;1&lt;/container&gt;\n  &lt;/customwidget&gt;\n &lt;/customwidgets&gt;\n &lt;resources/&gt;\n &lt;connections/&gt;\n&lt;/ui&gt;\n</code></pre>\n"}, {"tags": ["c++", "pointers", "linked-list"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1526497840, "post_id": 50378336, "comment_id": 87772865, "body": "A) Indentation is important to communicate intent and meaning. B) Don&#39;t put spaces before the <code>;</code>, that&#39;s not normal and it&#39;s highly distracting. There&#39;s many <a href=\"https://en.wikipedia.org/wiki/Indentation_style\" rel=\"nofollow noreferrer\">popular indentation styles</a> you should consider adopting to make your code more consistent, understandable, and familiar to others."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1526498108, "post_id": 50378336, "comment_id": 87772985, "body": "A linked list is a horribly inefficient datastructure on modern CPUs. But, if you insist on it, you should be using <code>std::list</code> rather than building your own. In any case, I&#39;d advice to just use a <code>std::vector</code> instead - it&#39;s likely to be faster for most usecases (regardless of what &quot;big O&quot; may say about list - benchmark it if you don&#39;t believe me)."}, {"owner": {"reputation": 13, "user_id": 9802119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5816a703da9844b30c4bd0320f09b6a2?s=128&d=identicon&r=PG&f=1", "display_name": "skull7", "link": "https://stackoverflow.com/users/9802119/skull7"}, "edited": false, "score": 0, "creation_date": 1526498182, "post_id": 50378336, "comment_id": 87773009, "body": "Thank you for the edit. Actually, I am having a really hard time grasping these concepts."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 5, "creation_date": 1526500418, "post_id": 50378336, "comment_id": 87774056, "body": "C++ is one of the more challenging languages to learn out of the gate not only because of its complexity, but because of how utterly awful many C++ courses are. Don&#39;t let that discourage you, though. It looks like you&#39;re getting tripped up on pointer mechanics, so it might be worth trying to tackle C first, a language that&#39;s a lot simpler in scope, and then build up to C++. What you have here is basically C code anyway which is unfortunately how C++ is taught in a lot of schools."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1526502690, "post_id": 50378336, "comment_id": 87775120, "body": "IMHO, learning linked lists and pointers is best done with drawings.  Draw the list and the nodes as you walk through the code."}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1526530920, "post_id": 50378336, "comment_id": 87782128, "body": "@tadman I think learning C first isn&#39;t really a good idea for the exact same reasons teaching C in C++ is bad. You end up messing with pointers, dynamic memory, and char arrays instead of using standard library containers. If anything, C++ is more simple."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1526573605, "post_id": 50378336, "comment_id": 87807965, "body": "@FeiXiang I think C++ can be taught properly with modern Standard Library-based approaches where <code>new</code> and pointers are brought up near the end of the curriculum, but unfortunately most &quot;C++&quot; courses are fundamentally terrible and take a backwards approach. If that&#39;s the case, learning C first helps add important context."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9802119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5816a703da9844b30c4bd0320f09b6a2?s=128&d=identicon&r=PG&f=1", "display_name": "skull7", "link": "https://stackoverflow.com/users/9802119/skull7"}, "edited": false, "score": 0, "creation_date": 1526537748, "post_id": 50380051, "comment_id": 87784676, "body": "thankyou for the answer I am still confused like in the first line newNode points to the first node which means link field of newNode will have 1st source node&#39;s address and in the third line first node from the source is pointing to which next node? Since newNode-&gt;link is equivalent to the link field of the newNode which will store some address."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "reply_to_user": {"reputation": 13, "user_id": 9802119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5816a703da9844b30c4bd0320f09b6a2?s=128&d=identicon&r=PG&f=1", "display_name": "skull7", "link": "https://stackoverflow.com/users/9802119/skull7"}, "edited": false, "score": 0, "creation_date": 1526571815, "post_id": 50380051, "comment_id": 87806863, "body": "Since newNode is the first node of the source list, newNode-&gt;next is the second node of the source list."}], "tags": [], "owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "is_accepted": true, "score": 0, "last_activity_date": 1526505645, "creation_date": 1526505645, "answer_id": 50380051, "question_id": 50378336, "link": "https://stackoverflow.com/questions/50378336/diffficulty-in-understanding-some-assignments-in-linked-list-in-c/50380051#50380051", "title": "Diffficulty in understanding some assignments in Linked List in C++", "body": "<p>This code moves a node from the front of the source list to the front of the desti list.</p>\n\n<pre><code>void moveNode(node** desti, node** source) {\n    struct node* newNode = *source;\n    // Now newNode points to the first node of the source list\n    assert (newNode != NULL);\n    // assert if source is empty\n    *source = newNode -&gt; next;\n    // Pop first node from source by making it point to the next node\n    newNode -&gt; next = *desti;\n    // Add newNode to the front of the desti list\n    *desti = newNode;\n    // Lengthen desti by pointing to the new first node\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9802119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5816a703da9844b30c4bd0320f09b6a2?s=128&d=identicon&r=PG&f=1", "display_name": "skull7", "link": "https://stackoverflow.com/users/9802119/skull7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 50380051, "answer_count": 1, "score": -1, "last_activity_date": 1526505645, "creation_date": 1526497735, "last_edit_date": 1526500790, "question_id": 50378336, "link": "https://stackoverflow.com/questions/50378336/diffficulty-in-understanding-some-assignments-in-linked-list-in-c", "title": "Diffficulty in understanding some assignments in Linked List in C++", "body": "<p>I am new to programming, and have started learning linked lists, but I am having serious troubles in understanding what some of the assignments are actually doing in the code.</p>\n\n<p>For example:</p>\n\n<pre><code>void moveNode(node** desti, node** source) {\n    struct node* newNode = *source;\n    assert (newNode != NULL);\n    *source = newNode -&gt; next;\n    newNode -&gt; next = *desti;\n    *desti = newNode;\n</code></pre>\n\n<p>Like in <code>node* newNode = *source</code>, <code>newNode</code> is a pointer pointing to the value in <code>source</code> pointer?</p>\n\n<p><code>*source = newNode -&gt; next;</code> for this, the <code>source</code> pointer is getting the address of <code>newNode</code>, getting linked with <code>newNode</code>? </p>\n\n<p>I am unable to understand these assignments. </p>\n\n<p>PS: This <code>moveNode</code> code is for merging two sorted linked lists. </p>\n\n<p>Also, please shed some light on when the address is passed or stored in the above code.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 3, "creation_date": 1526497658, "post_id": 50378291, "comment_id": 87772757, "body": "&quot;When i do this ,everything works ok&quot; Do it this way then?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1526497742, "post_id": 50378291, "comment_id": 87772811, "body": "Birthday doesn&#39;t have default constructor. What&#39;s the actual question?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1802, "user_id": 7034621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZCc06.jpg?s=128&g=1", "display_name": "orhtej2", "link": "https://stackoverflow.com/users/7034621/orhtej2"}, "edited": false, "score": 0, "creation_date": 1526497761, "post_id": 50378291, "comment_id": 87772824, "body": "@orhtej2, no, wrong duplicate."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1526497983, "post_id": 50378291, "comment_id": 87772922, "body": "Works fine here: <a href=\"http://coliru.stacked-crooked.com/a/93f443e25366297d\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/93f443e25366297d</a>"}, {"owner": {"reputation": 23, "user_id": 9802096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f3e3123351e2e3574832e305e688c92?s=128&d=identicon&r=PG&f=1", "display_name": "jas0355", "link": "https://stackoverflow.com/users/9802096/jas0355"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1526498001, "post_id": 50378291, "comment_id": 87772931, "body": "@SergeyA thank you , all it needed was a Birthday(){} default constructor..."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1526498268, "post_id": 50378291, "comment_id": 87773047, "body": "Jas, you were probably better off using the member initializer list and copy constructor than the assignment."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1526499248, "post_id": 50378291, "comment_id": 87773525, "body": "when you use the initializer list it works, then just stop there. There is no good reason not to use the initializer list when you can"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1526501079, "post_id": 50378291, "comment_id": 87774363, "body": "<b><i>when i do this , i get errors...</i></b> Always add your errors to your question as text. if this is Visual Studio get the text from the Output Tab."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1526498199, "post_id": 50378426, "comment_id": 87773022, "body": "It doesn&#39;t need that, at least what you posted doesn&#39;t.  The code works just fine <a href=\"http://coliru.stacked-crooked.com/a/93f443e25366297d\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1526498991, "post_id": 50378426, "comment_id": 87773415, "body": "@NathanOliver you misunderstood the question. When OP uses member initializer list, everything works. It doesn&#39;t work when OP is not using one."}], "tags": [], "owner": {"reputation": 23, "user_id": 9802096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f3e3123351e2e3574832e305e688c92?s=128&d=identicon&r=PG&f=1", "display_name": "jas0355", "link": "https://stackoverflow.com/users/9802096/jas0355"}, "is_accepted": false, "score": 0, "last_activity_date": 1526498075, "creation_date": 1526498075, "answer_id": 50378426, "question_id": 50378291, "link": "https://stackoverflow.com/questions/50378291/how-to-pass-a-class-as-an-argument-to-another-classes-constructor/50378426#50378426", "title": "How to pass a class as an argument to another classes constructor?", "body": "<p>All it needed to work , was a default birthday constructor.</p>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 0, "last_activity_date": 1526501434, "last_edit_date": 1526501434, "creation_date": 1526501044, "answer_id": 50379085, "question_id": 50378291, "link": "https://stackoverflow.com/questions/50378291/how-to-pass-a-class-as-an-argument-to-another-classes-constructor/50379085#50379085", "title": "How to pass a class as an argument to another classes constructor?", "body": "<h1>Problem</h1>\n\n<p>When you enter the body of the constructor all member objects must have already been constructed.</p>\n\n<pre><code>Person::Person(string n,Birthday b) \n{ // birthday must be constructed before here\n    name = n;\n    birthday = b; // this is an assignment, not an initialization\n}\n</code></pre>\n\n<p>In the absence of the member being initialized in the <a href=\"http://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow noreferrer\">member initializer list</a> as was done in the question with </p>\n\n<pre><code>Person::Person(string n,Birthday b)\n:    name(n) ,\n    birthday(b)\n{}\n</code></pre>\n\n<p>using <code>Birthday</code>'s <a href=\"http://en.cppreference.com/w/cpp/language/copy_constructor\" rel=\"nofollow noreferrer\">automatically-generated copy constructor</a>, the default constructor will be used. <code>Birthday</code> has no default constructor (the compiler will not create a default constructor if you have a user defined constructor), so the compiler emits an error and produces no usable object.</p>\n\n<h1>Options (other than, like, rage-quitting or something)</h1>\n\n<p>1) Pass in a <code>Birthday</code> and copy it as above.</p>\n\n<p>Side notes: You can avoid the redundant <code>Birthday</code> object hanging around. \nIf building to a recent C++ standard you can </p>\n\n<pre><code>Person bill(\"Billy Par\", {13,4,1996});\n</code></pre>\n\n<p>and If you don't have at least C++11 support you can </p>\n\n<pre><code>Person bill(\"Billy Par\",Birthday(13,4,1996));\n</code></pre>\n\n<p>This creates a temporary <code>Birthday</code> that lives to the end of the line. A good compiler knows tricks to optimize the smurf out of this, so you might never even know the temporary was there at all.</p>\n\n<p>Passing by <code>const</code> reference </p>\n\n<pre><code>Person::Person(string n,const Birthday &amp;b)\n:    name(n) ,\n    birthday(b)\n{}\n</code></pre>\n\n<p>has the potential to be slightly better by eliminating a copy, but modern compilers know this trick, too.</p>\n\n<p>2) Add additional parameters to <code>Person</code>'s constructor and use them to invoke Birthday's constructor in the member initializer list.</p>\n\n<pre><code>Person::Person(string n, int d, int m, int y)\n:    name(n) ,\n    birthday(d,m,y)\n{}\n</code></pre>\n\n<p>Personal opinion, I find</p>\n\n<pre><code>Person bill(\"Billy Par\",Birthday(13,4,1996));\n</code></pre>\n\n<p>to better express intent and be more versatile.</p>\n\n<p>3) Add a default constructor to <code>Birthday</code></p>\n\n<p>I don't really like this option. For simple class like <code>Birthday</code> it's not bad, but gives no advantages over option one and makes it more difficult for the compiler to apply several useful optimizations. For a complex or hard-to-construct class, this option goes through the work of default construction and then adds on whatever work is required by assignment. </p>\n\n<p>Side Note: If Modern C++ is available a trivial default constructor is easy. Add </p>\n\n<pre><code>Birthday() = default;\n</code></pre>\n\n<p>to the class definition. </p>\n"}], "owner": {"reputation": 23, "user_id": 9802096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f3e3123351e2e3574832e305e688c92?s=128&d=identicon&r=PG&f=1", "display_name": "jas0355", "link": "https://stackoverflow.com/users/9802096/jas0355"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "closed_date": 1526511394, "accepted_answer_id": 50379085, "answer_count": 2, "score": -3, "last_activity_date": 1526501434, "creation_date": 1526497523, "question_id": 50378291, "link": "https://stackoverflow.com/questions/50378291/how-to-pass-a-class-as-an-argument-to-another-classes-constructor", "closed_reason": "Needs details or clarity", "title": "How to pass a class as an argument to another classes constructor?", "body": "<p>The problem i get is inside Person.cpp , in the constructor.When i do this ,everything works ok </p>\n\n<pre><code>Person::Person(string n,Birthday b)\n:    name(n) ,\n    birthday(b)\n{}\n</code></pre>\n\n<p>when i do this , i get errors...</p>\n\n<pre><code>Person::Person(string n,Birthday b) {\n    name = n;\n    birthday = b;\n}\n</code></pre>\n\n<p>my question is how to pass a class as an argument to another classes constructor?</p>\n\n<p>main:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Birthday.h\"\n#include \"Person.h\"\n\nusing namespace std;\n\nint main()\n{\n    Birthday birth(13,4,1996);\n\n    Person bill(\"Billy Par\",birth);\n    bill.printInfo();\n    return 0;\n}\n</code></pre>\n\n<p>Person.cpp :</p>\n\n<pre><code>#include \"Person.h\"\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nPerson::Person(string n,Birthday b)\n:    name(n) ,\n    birthday(b)\n{}\n\nvoid Person::printInfo() {\n    cout &lt;&lt; name &lt;&lt; \" was born on \";\n    birthday.printDate();\n}\n</code></pre>\n\n<p>Birthday.cpp:</p>\n\n<pre><code>#include \"Birthday.h\"\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nBirthday::Birthday(int d,int m,int y) {\n    day = d;\n    month = m;\n    year = y;\n}\n\nvoid Birthday::printDate() {\n    cout &lt;&lt; day &lt;&lt; \"/\" &lt;&lt; month &lt;&lt; \"/\" &lt;&lt; year &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Person.h:</p>\n\n<pre><code>#ifndef PERSON_H\n#define PERSON_H\n\n#include &lt;string&gt;\n#include \"Birthday.h\"\n\nusing namespace std;\n\nclass Person {\npublic:\n    Person(string n,Birthday b);\n    void printInfo();\nprivate:\n    string name;\n    Birthday birthday;\n};\n\n#endif // PERSON_H\n</code></pre>\n\n<p>Birthday.h:</p>\n\n<pre><code>#ifndef BIRTHDAY_H\n#define BIRTHDAY_H\n\nclass Birthday {\npublic:\n    Birthday(int d,int m,int y);\n    void printDate();\nprivate:\n    int day;\n    int month;\n    int year;\n};\n\n#endif // BIRTHDAY_H\n</code></pre>\n"}, {"tags": ["c++", "neural-network", "backpropagation"], "comments": [{"owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "edited": false, "score": 0, "creation_date": 1526499142, "post_id": 50378238, "comment_id": 87773478, "body": "If your first layer is 0 then the condition should be <code>if(rlayer &gt; 0)</code>"}, {"owner": {"reputation": 13, "user_id": 8592550, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-l9iJfyFXOfM/AAAAAAAAAAI/AAAAAAAAAEg/NoUoAj4k1yU/photo.jpg?sz=128", "display_name": "yazurika", "link": "https://stackoverflow.com/users/8592550/yazurika"}, "reply_to_user": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "edited": false, "score": 0, "creation_date": 1526499912, "post_id": 50378238, "comment_id": 87773846, "body": "Yes, incredible how i didn&#39;t see this. Still doesn&#39;t work though..."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1526521612, "post_id": 50378238, "comment_id": 87780294, "body": "In my first neural network effort, I &#39;forgot&#39; to initialize the weights to random values.  Nothing worked."}], "owner": {"reputation": 13, "user_id": 8592550, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-l9iJfyFXOfM/AAAAAAAAAAI/AAAAAAAAAEg/NoUoAj4k1yU/photo.jpg?sz=128", "display_name": "yazurika", "link": "https://stackoverflow.com/users/8592550/yazurika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1526498289, "creation_date": 1526497298, "last_edit_date": 1526498289, "question_id": 50378238, "link": "https://stackoverflow.com/questions/50378238/my-backpropagation-is-producing-utter-trash", "title": "My backpropagation is producing utter trash", "body": "<p>I'm a hobbyist and thus dont have much experience on neural networks, this is my first attempt to implement one.\nMy backpropagation function is doing something, but not what it is supposed to do.\nThe network is not getting any better at what I'm training it on (after like 10000 training examples). Implementations from the Internet work on this problem, so it has to be something in this code.</p>\n\n<pre><code>void backprop(std::vector&lt;std::vector&lt;neuron&gt;&gt;&amp; neuronen, std::vector&lt;std::vector&lt;std::vector&lt;weight&gt;&gt;&gt;&amp; weights, int rlayer, std::vector&lt;float&gt; target, float learnrate) {\n    for (int i = 0; i &lt; weights[rlayer].size(); i++) {\n        for (int j = 0; j &lt; weights[rlayer][i].size(); j++) {\n            weights[rlayer][i][j].changeweight(weights[rlayer][i][j].weightout() +  (learnrate * (target[i] - neuronen[rlayer][i].actout()) * actfAbl(neuronen[rlayer][i].zout()) * neuronen[rlayer - 1][j].actout())); \n        }\n    }\n\n    if (rlayer &gt; 1) {\n        std::vector&lt;float&gt; newtarget;\n\n        for (int i = 0; i &lt; neuronen[rlayer - 1].size(); i++) {\n            float dzdol1 = 0;\n            for (int j = 0; j &lt; neuronen[rlayer].size(); j++) {\n                dzdol1 = weights[rlayer][j][i].weightout() * actfAbl(neuronen[rlayer][j].zout() * (2 * neuronen[rlayer][j].actout() - target[j]));\n            }\n            std::cout &lt;&lt; \"dzdol1: \" &lt;&lt; dzdol1 &lt;&lt; std::endl;\n            newtarget.push_back(dzdol1);\n        }\n        backprop(neuronen, weights, rlayer - 1, newtarget, learnrate);\n    }\n    return;\n}\n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c++", "design-patterns", "polymorphism"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1526497020, "post_id": 50378148, "comment_id": 87772464, "body": "Looks like a factory pattern?"}, {"owner": {"reputation": 314, "user_id": 2648395, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8S4Ke.png?s=128&g=1", "display_name": "audio", "link": "https://stackoverflow.com/users/2648395/audio"}, "edited": false, "score": 1, "creation_date": 1526497921, "post_id": 50378148, "comment_id": 87772898, "body": "I believe your second example is touching on the topic of policy based design - <a href=\"https://en.wikipedia.org/wiki/Policy-based_design\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Policy-based_design</a>. It goes well with templates."}, {"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1526502220, "post_id": 50378148, "comment_id": 87774893, "body": "The answer to your question very depends on different factors. Class Design should take into account many aspects of the domain and the problem. For example, why you cannot implement the &quot;simplest&quot; polymorphism design? <a href=\"http://coliru.stacked-crooked.com/a/98159aabcce2c8ea\" rel=\"nofollow noreferrer\">Example Here</a>. A <code>packet</code> interface and different implementations for each type."}, {"owner": {"reputation": 475, "user_id": 361190, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/Alc9X.jpg?s=128&g=1", "display_name": "MGH", "link": "https://stackoverflow.com/users/361190/mgh"}, "reply_to_user": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1526683762, "post_id": 50378148, "comment_id": 87855705, "body": "@BiagioFesta: This is similar to my Approach 2, except that it used a pure interface class. I will try to see if I can make an interface class and sort of abstract out common functionality to another class."}], "answers": [{"comments": [{"owner": {"reputation": 475, "user_id": 361190, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/Alc9X.jpg?s=128&g=1", "display_name": "MGH", "link": "https://stackoverflow.com/users/361190/mgh"}, "edited": false, "score": 0, "creation_date": 1526498880, "post_id": 50378289, "comment_id": 87773364, "body": "Thanks for the feedback. regarding <code>base classes that are nothing but pure virtual function declarations</code>. This could be achieved if I move all common functionality to another class and each type handler simply refers to it I guess."}], "tags": [], "owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "is_accepted": true, "score": 1, "last_activity_date": 1526497517, "creation_date": 1526497517, "answer_id": 50378289, "question_id": 50378148, "link": "https://stackoverflow.com/questions/50378148/c-design-and-polymorphism/50378289#50378289", "title": "C++ Design and polymorphism", "body": "<p>Modern design sensibilities tend to favor a very aggressive separation of concerns. As such, this leads to preferring base classes that are nothing but pure virtual function declarations. </p>\n\n<p>Each class is responsible for 1 thing.</p>\n\n<p>As such, your second approach is considered much preferable. The main reason (and the only one you really need) being: it makes it much easier to write proper unit tests.</p>\n\n<p><strong>Edit:</strong> mind you, it still looks a bit clunky, but this is more a matter for <a href=\"http://codereview.stackexchange.com\">The codereview stackexchange</a>, where you could get detailed feedback on your structure.</p>\n"}], "owner": {"reputation": 475, "user_id": 361190, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/Alc9X.jpg?s=128&g=1", "display_name": "MGH", "link": "https://stackoverflow.com/users/361190/mgh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 50378289, "answer_count": 1, "score": 5, "last_activity_date": 1526497517, "creation_date": 1526496924, "question_id": 50378148, "link": "https://stackoverflow.com/questions/50378148/c-design-and-polymorphism", "title": "C++ Design and polymorphism", "body": "<p>I have a generic question on C++ class design. For example I have a need for a packet generator. So given a type of packet I have to generate the packet of that type. So I have a base packet generator class. </p>\n\n<p>Approach 1:</p>\n\n<pre><code>class BasePacketGenerator {\npublic:\n    virtual Packet* generatePacket (int type); // implements the generic case\n                                               // hence not pure virtual\nprotected:\n    //\n    // Common functionality for all types\n    // \n   virtual void massagePacket (Packet&amp; pkt); // called by generatePacket\n                                           // but needs special handling for \n                                           // some types\n   virtual void calculateCheckSum(Packet&amp; pkt); // called by generate packet\n   ...\n};\n</code></pre>\n\n<p>Derived classes to handle each type:</p>\n\n<pre><code>class Type1PacketGenerator : public BasePacketGenerator {\npublic:\n    // Dont have to override any base class implementationa\nprotected:\n    void calculateCheckSum(Packet&amp; pkt) override;\n};\n\nclass Type2PacketGenerator : public BasePacketGenerator {\npublic:\n    Packet* generatePacket(int type) override;\n};\n</code></pre>\n\n<p>Here for Type1 generator, we are using polymorphism. But the base-class calls, the derived class functionality polymorphically. I wonder if this is a good Idiom? Or there should be a intermediator class</p>\n\n<p>Approach 2:</p>\n\n<pre><code>class TypeHandler {\n\n    virtual Packet* setupPacket();\n    virtual void calculateCheckSum(Packet&amp; pkt);\n    virtual void setupFields (Packet&amp; pkt);\n}\n\nclass PacketGenerator {\npublic:\n\n    TypeHandler *handler_; // lets say this is setup based on the type\n\n    Packet* generatorPacket(int type)\n    {\n       auto packet = handler_-&gt;setupPacket();\n       handler_-&gt;massagePacket();\n       handler_-&gt;calculateCheckSum(*packet);\n       return packet;\n    }\n}\n</code></pre>\n\n<p>Is there any advantage with going with one approach or the other?</p>\n\n<p>Approach1 is more flexible as it doesn't have to follow the same way of doing things. Eg: if Type2Generator doesn't need a checksum, it doesn't even have to call the calculateCheckSum() or if it needs some additional functionality, we don't have to add it to all Type generators.</p>\n\n<p>But Approach 2 is more readable as all types do the things same way.</p>\n"}, {"tags": ["c++", "debugging", "gdb", "qt-creator"], "comments": [{"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1526568046, "post_id": 50377461, "comment_id": 87804257, "body": "Would something like <code>printf &quot;%s\\n&quot;, (char *)0x7fffe036bd33</code> do what you want?"}, {"owner": {"reputation": 1405, "user_id": 646710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ad96b8b96de851fe2308338910a2f31e?s=128&d=identicon&r=PG", "display_name": "Sumit", "link": "https://stackoverflow.com/users/646710/sumit"}, "reply_to_user": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1526577921, "post_id": 50377461, "comment_id": 87810209, "body": "It is not about printing just strings it is about any output coming from gdb, for example, see bt command&#39;s output above."}], "answers": [{"comments": [{"owner": {"reputation": 1405, "user_id": 646710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ad96b8b96de851fe2308338910a2f31e?s=128&d=identicon&r=PG", "display_name": "Sumit", "link": "https://stackoverflow.com/users/646710/sumit"}, "edited": false, "score": 0, "creation_date": 1526578060, "post_id": 50377888, "comment_id": 87810276, "body": "QDebug::noquote() is introduced in  Qt 5.4 , I am using Qt 5.2.0  It also means qDebug is not doing it, I assume this also because this problem occurs even if I never use qDebug in my program"}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": -2, "last_activity_date": 1526495811, "creation_date": 1526495811, "answer_id": 50377888, "question_id": 50377461, "link": "https://stackoverflow.com/questions/50377461/qt-creator-debugger-log-window-unnecessarily-escapes-many-characters-makes-outpu/50377888#50377888", "title": "Qt Creator Debugger Log Window unnecessarily escapes many characters makes output distracting", "body": "<p>It's not qtcreator doing it. It's <code>qDebug</code>. Use <code>noquote()</code> to disable that behaviour.</p>\n\n<p>For details see <a href=\"http://doc.qt.io/qt-5/qdebug.html#noquote\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/qdebug.html#noquote</a></p>\n"}], "owner": {"reputation": 1405, "user_id": 646710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ad96b8b96de851fe2308338910a2f31e?s=128&d=identicon&r=PG", "display_name": "Sumit", "link": "https://stackoverflow.com/users/646710/sumit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1526495811, "creation_date": 1526494122, "last_edit_date": 1526495137, "question_id": 50377461, "link": "https://stackoverflow.com/questions/50377461/qt-creator-debugger-log-window-unnecessarily-escapes-many-characters-makes-outpu", "title": "Qt Creator Debugger Log Window unnecessarily escapes many characters makes output distracting", "body": "<p>Qt Creator Debugger Log Window(Window > Views > Debugger Log) unnecessarily escapes many characters and makes output distracting, how can we fix it?\n<br/> \nPlease see the screenshot.\nIn the right pane: \\n \\t and \\\\ , I don't want them.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Sz9T1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Sz9T1.png\" alt=\"Qt Debugger Log Window Screenshot\"></a></p>\n"}, {"tags": ["c++", "encryption", "fstream"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1526499706, "post_id": 50377211, "comment_id": 87773756, "body": "You <b>must</b> open binary files as <a href=\"http://en.cppreference.com/w/cpp/io/ios_base/openmode\" rel=\"nofollow noreferrer\">binary</a>. The default is text. This is not what you want."}], "answers": [{"comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1526494016, "post_id": 50377291, "comment_id": 87771036, "body": "I didn&#39;t downvote, but can you clarify on &quot;ASCII value 26 is EOF on some operating systems&quot;? If you mean <code>EOF</code> constant, then it has to be not representable as <code>unsigned char</code>."}, {"owner": {"reputation": 1512, "user_id": 7885750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/43lAl.jpg?s=128&g=1", "display_name": "Stephen M. Webb", "link": "https://stackoverflow.com/users/7885750/stephen-m-webb"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 3, "creation_date": 1526496355, "post_id": 50377291, "comment_id": 87772132, "body": "I mean there is at least one popular desktop operating system under which a byte with the value 0x1a is interpreted as end-of-file on a read operation when the file is opened as a &#39;text file&#39;.  That will put the IOStream into an error state for subsequent read operations because it has detected a read-past-the-end-of-file condition."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1526496741, "post_id": 50377291, "comment_id": 87772320, "body": "And what OS is that?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1526499836, "post_id": 50377291, "comment_id": 87773811, "body": "@HolyBlackCat Windows, for one (see my answer)."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1526501115, "post_id": 50377291, "comment_id": 87774384, "body": "@RemyLebeau Huh, didn&#39;t know it. Thanks."}], "tags": [], "owner": {"reputation": 1512, "user_id": 7885750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/43lAl.jpg?s=128&g=1", "display_name": "Stephen M. Webb", "link": "https://stackoverflow.com/users/7885750/stephen-m-webb"}, "is_accepted": false, "score": 2, "last_activity_date": 1526493363, "creation_date": 1526493363, "answer_id": 50377291, "question_id": 50377211, "link": "https://stackoverflow.com/questions/50377211/fstream-stops-to-read-at-substitute-control-character/50377291#50377291", "title": "fstream stops to read at substitute control character", "body": "<p>ASCII value 26 is EOF on some operating systems.</p>\n\n<p>You should probably treat your encrypted file as a byte stream rather than a text file for reading and writing.  That means either using <code>read()</code> and <code>write()</code> functions of the IOStream or at the very least opening the files in binary mode.</p>\n\n<p>If you're just enciphering your text instead of encrypting, maybe choose a different cipher (eg. ROT13) that is closed on the set of printable ASCII or UTF-8 characters.</p>\n"}, {"tags": [], "owner": {"reputation": 1651, "user_id": 635822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fd51a3c79639c315af5864adc731298?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/635822/jason"}, "is_accepted": false, "score": 1, "last_activity_date": 1526499608, "last_edit_date": 1526499608, "creation_date": 1526495777, "answer_id": 50377879, "question_id": 50377211, "link": "https://stackoverflow.com/questions/50377211/fstream-stops-to-read-at-substitute-control-character/50377879#50377879", "title": "fstream stops to read at substitute control character", "body": "<p>I compiled your code in Linux (minus all the Windows stuff)...</p>\n\n<p>I get this when encrypting your sentence with your code:</p>\n\n<pre><code>/[[[[[\n[[[ [[[U\n</code></pre>\n\n<p>It also decrypts back to the original sentence.  Without the goofy characters, it is the same as your output so your actual issue seems related to the encoding of the file and the program you are using to view the results.  Stephan is correct in saying you should be reading/writing bytes instead of text.  This can cause all sorts of issues with the characters you create.  For example, line feeds and carriage returns since you are using <code>getline()</code>.</p>\n\n<p>Edit: Strange.  After editing this answer, all the odd characters disappeared.  Here is a screenshot:\n<a href=\"https://i.stack.imgur.com/5zIKY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5zIKY.png\" alt=\"original output\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 4, "last_activity_date": 1526501215, "last_edit_date": 1526501215, "creation_date": 1526499139, "answer_id": 50378654, "question_id": 50377211, "link": "https://stackoverflow.com/questions/50377211/fstream-stops-to-read-at-substitute-control-character/50378654#50378654", "title": "fstream stops to read at substitute control character", "body": "<p>In <code>Decrypt()</code>, after the first call to <code>std::getline()</code>, <code>sourceFile.good()</code> is false and <code>sourceFile.fail()</code> is true, which is why you stop reading subsequent lines from the encrypted file.</p>\n\n<p>The reason is because the encrypted file has an encoded <code>0x1A</code> byte in it, and depending on your platform and STL implementation, that character likely gets interpreted as an EOF condition, thus enabling the <code>std::ifstream</code>'s <code>eofbit</code> state, terminating further reading.</p>\n\n<p>In my compiler's STL implementation on Windows, when <code>std::ifstream</code> reads from a file, it ultimately calls a function named <code>_Fgetc()</code>:</p>\n\n<pre><code>template&lt;&gt; inline bool _Fgetc(char&amp; _Byte, _Filet *_File)\n    {   // get a char element from a C stream\n    int _Meta;\n    if ((_Meta = fgetc(_File)) == EOF) // &lt;-- here\n        return (false);\n    else\n        {   // got one, convert to char\n        _Byte = (char)_Meta;\n        return (true);\n        }\n    }\n</code></pre>\n\n<p>When it tries to read an <code>0x1A</code> character, <code>fgetc()</code> returns <code>EOF</code>, and when <code>_Fgetc()</code> returns false, <code>std::getline()</code> sets the <code>eofbit</code> on the <code>std::ifstream</code> and exits.</p>\n\n<p>Check your compiler's STL for similar behavior.</p>\n\n<p>This behavior is because you are <a href=\"https://stackoverflow.com/questions/31315443/\">opening the encrypted file in text mode</a>.  You need to open the encrypted file in <code>binary</code> mode instead:</p>\n\n<pre><code>std::ifstream sourceFile(..., std::ifstream::binary);\n</code></pre>\n\n<p>Also, you should enable <code>binary</code> mode on the encrypted file in <code>Encrypt()</code> as well:</p>\n\n<pre><code>std::ofstream outputFile(..., std::ofstream::binary | std::ofstream::trunc);\n</code></pre>\n\n<p>Try something more like this instead:</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;cstdlib&gt;\n\nvoid Encrypt(char encryptionKey, const std::string &amp;filename)\n{\n    std::string::size_type pos = filename.find_last_of(\"\\\\\");\n    std::string out_filename = filename.substr(0, pos+1) + \"Encrypted\" + filename.substr(pos + 1);\n\n    std::ifstream sourceFile(filename.c_str());\n    std::ofstream outputFile(out_filename.c_str(), std::ofstream::binary | std::ofstream::trunc);\n\n    if (sourceFile.is_open())\n    {\n        std::cout &lt;&lt; \"Opened file: \" + filename + \" for encryption\" &lt;&lt; std::endl;\n\n        std::string line;\n        long numLines = 0;\n\n        while (std::getline(sourceFile, line)) // This iterates over the whole file, once for each line\n        {\n            for (std::string::size_type i = 0; i &lt; line.length(); ++i) // Looping through all characters in each line\n            {\n                char focusByte = line[i] ^ encryptionKey;\n                std::cout &lt;&lt; \" focusByte: \" &lt;&lt; focusByte &lt;&lt; std::endl;\n                line[i] = focusByte;\n                //std::cout &lt;&lt; line &lt;&lt; std::flush;\n            }\n\n            outputFile &lt;&lt; line &lt;&lt; std::endl;\n            ++numLines;\n        }\n    }\n}\n\nvoid Decrypt(char encryptionKey, const std::string &amp;filename)\n{\n    std::string::size_type pos = filename.find_last_of(\"\\\\\");\n    std::string out_filename = filename.substr(0, pos+1) + \"Decrypted\" + filename.substr(pos + 1);\n\n    std::ifstream sourceFile(filename.c_str(), std::ifstream::binary);\n    std::ofstream outputFile(out_filename.c_str(), std::ofstream::trunc);\n\n    if (sourceFile.is_open())\n    {\n        std::cout &lt;&lt; \"Opened file: \" + filename + \" for decryption\" &lt;&lt; std::endl;\n\n        std::string line;\n        long numLines = 0;\n\n        while (std::getline(sourceFile, line)) // This iterates over the whole file, once for each line\n        {\n            for (std::string::size_type i = 0; i &lt; line.length(); ++i) // Looping through all characters in each line\n            {\n                char focusByte = line[i] ^ encryptionKey;\n                std::cout &lt;&lt; \" focusByte: \" &lt;&lt; focusByte &lt;&lt; std::endl;\n                line[i] = focusByte;\n            }\n\n            outputFile &lt;&lt; line &lt;&lt; std::endl;\n            ++numLines;\n        }\n\n        std::cout &lt;&lt; \"eof\" &lt;&lt; std::endl;\n    }\n}\n\nint main(int argument_count, char* argument_list[])\n{\n    std::system(\"color a\");\n    std::string filename;\n\n    if (argument_count &lt; 2)\n    {\n        std::cout &lt;&lt; \"Enter a file to process: \" &lt;&lt; std::flush;\n        std::getline(std::cin, filename);\n    }\n    else\n    {\n        filename = argument_list[1];\n    }\n\n    if (filename.empty())\n    {\n        std::cout &lt;&lt; \"You didn't supply a filename\" &lt;&lt; std::endl;\n        return EXIT_FAILURE;\n    }\n\n    std::cout &lt;&lt; \"Target file: \" &lt;&lt; filename &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Press e to encrypt the file\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Press d to decrypt the file\" &lt;&lt; std::endl;\n    char choice;\n\n    while (true)\n    {\n        std::cout &lt;&lt; \"&gt; \" &lt;&lt; std::flush;\n        std::cin &gt;&gt; choice;\n\n        if (choice == 'e')\n        {\n            Encrypt(123, filename);\n            break;\n        }\n        else if (choice == 'd')\n        {\n            Decrypt(123, filename);\n            break;\n        }\n        else\n        {\n            std::cout &lt;&lt; \"please choose option e or d for encryption or decryption, respectively\" &lt;&lt; std::endl;\n        }\n    }\n\n    std::cout &lt;&lt; std::endl &lt;&lt; \"Paused, press Enter to continue\" &lt;&lt; std::flush;\n    std::system(\"pause\");\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>That being said, keep in mind that when using XOR, some of the encrypted characters might end up being <code>\\r</code> (0x0D) or <code>\\n</code> (0x0A), which will interfere with <code>std::getline()</code> when decrypting the file later on, producing a decrypted output that does not match the original text input.</p>\n\n<p>Since you should be treating the encrypted file as binary, you should not be reading/writing the file as text at all.  Choose a different format for your encrypted output that does not rely on line-break semantics in text vs binary mode.</p>\n\n<p>For example:</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;cstdlib&gt;\n\nvoid Encrypt(char encryptionKey, const std::string &amp;filename)\n{\n    std::string::size_type pos = filename.find_last_of(\"\\\\\");\n    std::string out_filename = filename.substr(0, pos+1) + \"Encrypted\" + filename.substr(pos + 1);\n\n    std::ifstream sourceFile(filename.c_str());\n    std::ofstream outputFile(out_filename.c_str(), std::ofstream::binary | std::ofstream::trunc);\n\n    if (sourceFile.is_open())\n    {\n        std::cout &lt;&lt; \"Opened file: \" + filename + \" for encryption\" &lt;&lt; std::endl;\n\n        std::string line;\n        std::string::size_type lineLen;\n        long numLines = 0;\n\n        while (std::getline(sourceFile, line)) // This iterates over the whole file, once for each line\n        {\n            lineLen = line.length();\n\n            for (std::string::size_type i = 0; i &lt; lineLen; ++i) // Looping through all characters in each line\n            {\n                char focusByte = line[i] ^ encryptionKey;\n                std::cout &lt;&lt; \" focusByte: \" &lt;&lt; focusByte &lt;&lt; std::endl;\n                line[i] = focusByte;\n                //std::cout &lt;&lt; line &lt;&lt; std::flush;\n            }\n\n            outputFile.write((char*)&amp;lineLen, sizeof(lineLen));\n            outputFile.write(line.c_str(), lineLen);\n\n            ++numLines;\n        }\n    }\n}\n\nvoid Decrypt(char encryptionKey, const std::string &amp;filename)\n{\n    std::string::size_type pos = filename.find_last_of(\"\\\\\");\n    std::string out_filename = filename.substr(0, pos+1) + \"Decrypted\" + filename.substr(pos + 1);\n\n    std::ifstream sourceFile(filename.c_str(), std::ifstream::binary);\n    std::ofstream outputFile(out_filename.c_str(), std::ofstream::trunc);\n\n    if (sourceFile.is_open())\n    {\n        std::cout &lt;&lt; \"Opened file: \" + filename + \" for decryption\" &lt;&lt; std::endl;\n\n        std::string line;\n        std::string::size_type lineLen;\n        long numLines = 0;\n\n        while (sourceFile.read((char*)&amp;lineLen, sizeof(lineLen))) // This iterates over the whole file, once for each line\n        {\n            line.resize(lineLen);\n            if (!sourceFile.read(&amp;line[0], lineLen))\n                break;\n\n            for (std::string::size_type i = 0; i &lt; lineLen; ++i) // Looping through all characters in each line\n            {\n                char focusByte = line[i] ^ encryptionKey;\n                std::cout &lt;&lt; \" focusByte: \" &lt;&lt; focusByte &lt;&lt; std::endl;\n                line[i] = focusByte;\n            }\n\n            outputFile &lt;&lt; line &lt;&lt; std::endl;\n            ++numLines;\n        }\n\n        std::cout &lt;&lt; \"eof\" &lt;&lt; std::endl;\n    }\n}\n\nint main(int argument_count, char* argument_list[])\n{\n    std::system(\"color a\");\n    std::string filename;\n\n    if (argument_count &lt; 2)\n    {\n        std::cout &lt;&lt; \"Enter a file to process: \" &lt;&lt; std::flush;\n        std::getline(std::cin, filename);\n    }\n    else\n    {\n        filename = argument_list[1];\n    }\n\n    if (filename.empty())\n    {\n        std::cout &lt;&lt; \"You didn't supply a filename\" &lt;&lt; std::endl;\n        return EXIT_FAILURE;\n    }\n\n    std::cout &lt;&lt; \"Target file: \" &lt;&lt; filename &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Press e to encrypt the file\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Press d to decrypt the file\" &lt;&lt; std::endl;\n    char choice;\n\n    while (true)\n    {\n        std::cout &lt;&lt; \"&gt; \" &lt;&lt; std::flush;\n        std::cin &gt;&gt; choice;\n\n        if (choice == 'e')\n        {\n            Encrypt(123, filename);\n            break;\n        }\n        else if (choice == 'd')\n        {\n            Decrypt(123, filename);\n            break;\n        }\n        else\n        {\n            std::cout &lt;&lt; \"please choose option e or d for encryption or decryption, respectively\" &lt;&lt; std::endl;\n        }\n    }\n\n    std::cout &lt;&lt; std::endl &lt;&lt; \"Paused, press Enter to continue\" &lt;&lt; std::flush;\n    std::system(\"pause\");\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 7391120, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XlB4oTZdwt8/AAAAAAAAAAI/AAAAAAAAABE/efzcpSSbvrQ/photo.jpg?sz=128", "display_name": "Tim Roberts", "link": "https://stackoverflow.com/users/7391120/tim-roberts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1526501215, "creation_date": 1526493074, "last_edit_date": 1526493915, "question_id": 50377211, "link": "https://stackoverflow.com/questions/50377211/fstream-stops-to-read-at-substitute-control-character", "title": "fstream stops to read at substitute control character", "body": "<p>I'm writing a simple encryption program in C++ to encrypt a text-based file.\nIt's using a simple XOR cipher algorithm, but this produces ASCII control characters in the output file. When I try to read from the newly encrypted file with <code>std::ifstream</code>, it stumbles upon character <code>#26</code>, it stops and becomes unable to read the rest of the file.</p>\n\n<p>Example if I try to encrypt this text:</p>\n\n<pre>\nThis is just a simple sample\ntext with two rows and one sentence.\n</pre>\n\n<p>It turns it to this</p>\n\n<pre>\n/[[[[[\n[[[ [[[U\n</pre>\n\n<p>When I try to read that file in my program, it can't read past the character at position 15, so I get a half encrypted file.</p>\n\n<p>How can I fix this?</p>\n\n<p>Here's the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;Windows.h&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n\nvoid Encrypt(char encryptionKey, std::string filename)\n{\n    std::ifstream sourceFile(filename);\n    std::ofstream outputFile(filename.substr(0, filename.find_last_of(\"\\\\\")) + \"\\\\Encrypted\" + filename.substr(filename.find_last_of(\"\\\\\") + 1), std::ofstream::out | std::ofstream::trunc);\n    std::string sourceLine;\n    std::string outputLine;\n    long numLines = 0;\n    if (sourceFile.is_open())\n    {\n        std::cout &lt;&lt; \"Opening file: \" + filename + \" for encryption\" &lt;&lt; std::endl;\n        while (sourceFile.good()) // This iterates over the whole file, once for each line\n        {\n            sourceLine = \"\"; //Clearing the line for each new line\n            outputLine = \"\"; //Clearing the line for each new line\n\n            std::getline(sourceFile, sourceLine);\n            for (int i = 0; i &lt; sourceLine.length(); i++) // Looping through all characters in each line\n            {\n\n                char focusByte = sourceLine[i] ^ encryptionKey;\n                std::cout &lt;&lt; \" focusByte: \" &lt;&lt; focusByte &lt;&lt; std::endl;\n                outputLine.push_back(focusByte);\n                //std::cout &lt;&lt; sourceLine &lt;&lt; std::flush;\n\n            }\n            numLines++;\n            outputFile &lt;&lt; outputLine &lt;&lt; std::endl;\n        }\n    }\n    sourceFile.close();\n    outputFile.close();\n}\n\nvoid Decrypt(unsigned int encryptionKey, std::string filename)\n{\n    std::ifstream sourceFile(filename);\n    std::ofstream outputFile(filename.substr(0, filename.find_last_of(\"\\\\\")) + \"\\\\Decrypted\" + filename.substr(filename.find_last_of(\"\\\\\") + 1), std::ofstream::out | std::ofstream::trunc);\n    std::string sourceLine;\n    std::string outputLine;\n    long numLines = 0;\n    if (sourceFile.is_open())\n    {\n        std::cout &lt;&lt; \"Opening file: \" + filename + \" for decryption\" &lt;&lt; std::endl;\n        while (sourceFile.good()) // This iterates over the whole file, once for each line\n        {\n            if (sourceFile.fail() == true)\n                std::cout &lt;&lt; \"eof\" &lt;&lt; std::endl;\n            sourceLine = \"\"; //Clearing the line for each new line\n            outputLine = \"\"; //Clearing the line for each new line\n\n            std::getline(sourceFile, sourceLine);\n            for (int i = 0; i &lt; sourceLine.length(); i++) // Looping through all characters in each line\n            {\n                char focusByte = sourceLine[i] ^ encryptionKey;\n                std::cout &lt;&lt; \" focusByte: \" &lt;&lt; focusByte &lt;&lt; std::endl;\n                outputLine.push_back(focusByte);\n\n            }\n            numLines++;\n            outputFile &lt;&lt; outputLine &lt;&lt; std::endl;\n        }\n    }\n    sourceFile.close();\n    outputFile.close();\n}\n\n\nint main(int argument_count,\n    char * argument_list[])\n{\n    system(\"color a\");\n    std::string filename;\n    if (argument_count &lt; 2)\n    {\n        std::cout &lt;&lt; \"You didn't supply a filename\" &lt;&lt; std::endl;\n    }\n    else\n    {\n        filename = argument_list[1];\n        std::cout &lt;&lt; \"Target file: \" &lt;&lt; filename &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"Press e to encrypt the selected file, Press d to decrypt the file &gt; \" &lt;&lt; std::flush;\n        char choice;\n        while (true)\n        {\n            std::cin &gt;&gt; choice;\n            if (choice == 'e')\n            {\n                Encrypt(123, filename);\n                break;\n            }\n            else if (choice == 'd')\n            {\n                Decrypt(123, filename);\n                break;\n            }\n            else\n            {\n                std::cout &lt;&lt; \"please choose option e or d for encryption respectivly decryption\" &lt;&lt; std::endl;\n            }\n        }\n    }\n\n\n    std::cout &lt;&lt; \"\\nPaused, press Enter to continue &gt; \" &lt;&lt; std::flush;\n    system(\"Pause\");\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c++", "exception", "copy-constructor", "throw"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1526493073, "post_id": 50377175, "comment_id": 87770512, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/throw\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/throw</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1526493240, "post_id": 50377175, "comment_id": 87770608, "body": "Peeps are very downvote-happy these days. Okay, so this information could have been found elsewhere - but that&#39;s the case with literally every question. This one is well presented and concise, and the misunderstanding is understandable (lol). Let&#39;s not be so downvote-happy."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1526493333, "post_id": 50377175, "comment_id": 87770663, "body": "@Fran&#231;oisAndrieux: <code>throw Error{}</code> is a different example, though, if we maintain the premise that it is possible to &quot;throw a reference&quot; (which it isn&#39;t, which is the answer). So, no, it&#39;s not &quot;distracting&quot; - it is the very core of the question."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1526500722, "post_id": 50377175, "comment_id": 87774190, "body": "<code>Error error = *new Error</code> the only time I see code like this is when someone is coming from java, having always written <code>new</code>. As others are suggesting <code>throw Error{}</code> is enough, but if you wanted to create the variable beforehand, use <code>Error error{};</code> That is, instead of <code>Type var = *new Type(arg1, arg2);</code> you want to be writing <code>Type var{arg1, arg2};</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1179, "user_id": 429775, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/51d83af17b3272f2a1b34cf56880413b?s=128&d=identicon&r=PG", "display_name": "Andrey Rubliov", "link": "https://stackoverflow.com/users/429775/andrey-rubliov"}, "edited": false, "score": 0, "creation_date": 1526548408, "post_id": 50377220, "comment_id": 87790809, "body": "Why dangling? I create the exception with &#39;new&#39; and never delete it, so it should always exist. Why throw pointer should be different from throwing reference? Copy constructors should be only called when throwing by value, not ref or pointer."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1179, "user_id": 429775, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/51d83af17b3272f2a1b34cf56880413b?s=128&d=identicon&r=PG", "display_name": "Andrey Rubliov", "link": "https://stackoverflow.com/users/429775/andrey-rubliov"}, "edited": false, "score": 0, "creation_date": 1526549527, "post_id": 50377220, "comment_id": 87791582, "body": "@AndreyRubliov: Perhaps I wasn&#39;t clear. The dangling reference would be created in the hypothetical <i>first</i> example which does not compile. The second example instead has a memory leak. <i>&quot;Copy constructors should be only called when throwing by value, not ref or pointer.&quot;</i> That is simply not true, as I have stated: you <i>always</i> &quot;throw by value&quot;, period."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 7, "last_activity_date": 1526493102, "creation_date": 1526493102, "answer_id": 50377220, "question_id": 50377175, "link": "https://stackoverflow.com/questions/50377175/why-throwing-exception-which-is-a-reference-calls-copy-constructor/50377220#50377220", "title": "Why throwing exception which is a reference calls copy constructor?", "body": "<p>You cannot throw a reference. <a href=\"http://en.cppreference.com/w/cpp/language/throw\" rel=\"noreferrer\">Throwing <em>always</em> copies the thrown expression value into a special area of storage set aside for thrown objects</a>. Otherwise, you'd almost always be \"catching\" a dangling reference, as is [theoretically] the case in your code.</p>\n\n<p>Your <code>Error</code> type cannot be copied, so the program is impossible.</p>\n\n<p>However, a pointer can of course be copied, and the main problem in your final example is a memory leak. Also your program will simply terminate at the <code>throw</code> statement as you don't have any <code>try</code>/<code>catch</code>.</p>\n"}], "owner": {"reputation": 1179, "user_id": 429775, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/51d83af17b3272f2a1b34cf56880413b?s=128&d=identicon&r=PG", "display_name": "Andrey Rubliov", "link": "https://stackoverflow.com/users/429775/andrey-rubliov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526493102, "creation_date": 1526492966, "question_id": 50377175, "link": "https://stackoverflow.com/questions/50377175/why-throwing-exception-which-is-a-reference-calls-copy-constructor", "title": "Why throwing exception which is a reference calls copy constructor?", "body": "<p>Why throwing exception which is a reference calls copy constructor?</p>\n\n<pre><code>struct Error\n{\n    Error() {}\n    Error(const Error&amp;) = delete;\n};\n\nint main()\n{\n    Error&amp; error = *new Error;\n\n    throw error;\n}\n</code></pre>\n\n<p>Compilation error:</p>\n\n<pre><code>error: declared here\n     Error(const Error&amp;) = delete;\n</code></pre>\n\n<p>It does not happen when throwing pointer like:</p>\n\n<pre><code>int main()\n{\n    Error* error = new Error;\n\n    throw error;\n}\n</code></pre>\n\n<p>This is OK.</p>\n"}, {"tags": ["c++", "winapi", "global-variables", "subclassing"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 3, "creation_date": 1526493394, "post_id": 50377091, "comment_id": 87770692, "body": "You have a fundamental misunderstanding of how <code>static</code> works. Since you include <code>main.h</code> in separate <code>.cpp</code> files, each <code>.cpp</code> gets <i>its own local copy</i> of the <code>static</code> variables that <code>main.h</code> declares. If you want multiple <code>.cpp</code> files to share global variables with each other, do not declare them as <code>static</code> in a shared <code>.h</code> file, define them one time in a single <code>.cpp</code> file and then use <code>extern</code> declarations in the shared <code>.h</code> file."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1526493512, "post_id": 50377091, "comment_id": 87770755, "body": "Also, when you start subclassing multiple buttons, you will need separate <code>WNDPROC</code> variables for each button, as you must paass the correct previous <code>WNDPROC</code> to <code>CallWindowProc()</code>, you can&#39;t use a single <code>WNDPROC</code> variable for all of the buttons. The best way to handle this is to wrap each button in a class that handles the subclassing for the single button it holds."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1526493837, "post_id": 50377091, "comment_id": 87770932, "body": "You should use <code>SetWindowLongPtr</code> and <code>(LONG_PTR)ButtonProc</code> otherwise pointer value may be cut."}, {"owner": {"reputation": 21, "user_id": 4283875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6af9639c0dacba0a91aebd3b5cb10e0?s=128&d=identicon&r=PG&f=1", "display_name": "Sari", "link": "https://stackoverflow.com/users/4283875/sari"}, "edited": false, "score": 0, "creation_date": 1526494594, "post_id": 50377091, "comment_id": 87771317, "body": "Wonderful, it worked like charm! Thanks to you sir Remy Lebeau!"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1526504919, "post_id": 50377091, "comment_id": 87776077, "body": "@VTT: Unless you are hellbent on supporting Win9x and Windows 2000, you should not do any of those. The correct way to subclass a control is to call <code>SetWindowSubclass</code>, as explained in <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb773183.aspx\" rel=\"nofollow noreferrer\">Subclassing Controls</a>."}, {"owner": {"reputation": 21, "user_id": 4283875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6af9639c0dacba0a91aebd3b5cb10e0?s=128&d=identicon&r=PG&f=1", "display_name": "Sari", "link": "https://stackoverflow.com/users/4283875/sari"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1526511343, "post_id": 50377091, "comment_id": 87778217, "body": "@VTT ok thanks i&#39;ll look into that. I was just doing basic stuff like the basic learners do. But yeah, if thats how its done nowadays - then, might as well join the crowd. Thanks chief!"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1526639619, "post_id": 50377091, "comment_id": 87833893, "body": "@VTT: Acknowledging pointer truncation issues does not turn this into a viable scheme for subclassing controls. Suggesting to use API calls capable of passing pointer-sized values is correct, but simply isn&#39;t applicable in context of this question."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1526641571, "post_id": 50377091, "comment_id": 87835050, "body": "@VTT: It were, if the goal was to evangelize writing unreliable code. That&#39;s not one of my goals, hence the comment to not use <code>SetWindowLong[Ptr]</code> at all, but to call <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb762102.aspx\" rel=\"nofollow noreferrer\">SetWindowSubclass</a> instead. I&#39;m having a hard time following, what point you are trying to make here."}], "owner": {"reputation": 21, "user_id": 4283875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6af9639c0dacba0a91aebd3b5cb10e0?s=128&d=identicon&r=PG&f=1", "display_name": "Sari", "link": "https://stackoverflow.com/users/4283875/sari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 241, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526494691, "creation_date": 1526492644, "last_edit_date": 1526494691, "question_id": 50377091, "link": "https://stackoverflow.com/questions/50377091/custom-window-proc-in-a-separate-file", "title": "Custom window proc in a separate file", "body": "<p>I'm currently learning winapi, and would like to get some advice on how to set up a custom control using different window procedures.</p>\n\n<p>Let's say I have 20 buttons. I want each button to respond differently when the mouse hovers over it. Say, an \"exit\" button draws a red rectangle when hovered, or blue when some other button is hovered.</p>\n\n<p>So, I have set up a custom control procedure that handles mouse clicks, mouse hover, and such, and is stored in <code>custom.cpp</code>. In <code>main.cpp</code>, there is a <code>MainProc()</code> that \"links/assigns\" <code>hwndButton</code> to <code>ButtonProc()</code> using</p>\n\n<pre><code>CustomProcHandler = (WNDPROC)SetWindowLong(hwndButton, GWL_WNDPROC, (long)CustomProc)\n</code></pre>\n\n<p>main.h:</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nconst char g_szClassName[] = \"Applicaton\";\nstatic HWND hwnd, hwndButton;\nstatic HINSTANCE hInst;\nstatic WNDPROC buttonProcHandler;\n\n\nLRESULT CALLBACK MainProc(HWND, UINT, WPARAM, LPARAM);\nLRESULT CALLBACK ButtonProc(HWND, UINT, WPARAM, LPARAM);\n</code></pre>\n\n<p>main.cpp:</p>\n\n<pre><code>#include \"main.h\"\n\nint WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR nCmdLine, int nCmdShow){\n    WNDCLASSEX wc;\n    MSG msg;\n\n    hInst = hInstance;\n\n    wc.cbSize = sizeof(WNDCLASSEX);\n    wc.style = 0;\n    wc.lpfnWndProc = WndProc;\n    wc.cbClsExtra = 0;\n    wc.cbWndExtra = 0;\n    wc.hInstance = hInst;\n    wc.hIcon = LoadIcon(hInst, 0);\n    wc.hCursor = LoadCursor(NULL, IDC_ARROW);\n    wc.hbrBackground = CreateSolidBrush(RGB(20, 20, 20));\n    wc.lpszMenuName = 0;\n    wc.lpszClassName = g_szClassName;\n    wc.hIconSm = LoadIcon(hInst, 0);\n    RegisterClassEx(&amp;wc);\n\n    hwnd = CreateWindowEx(\n        WS_EX_CLIENTEDGE,\n        g_szClassName,\n        \"The title of my window\",\n        WS_OVERLAPPEDWINDOW,\n        CW_USEDEFAULT, CW_USEDEFAULT, 600, 400,\n        NULL, NULL, hInst, NULL);\n\n    ShowWindow(hwnd, 1);\n    UpdateWindow(hwnd);\n\n    while (GetMessage(&amp;msg, NULL, 0, 0)) {\n        TranslateMessage(&amp;msg);\n        DispatchMessage(&amp;msg);\n    }\n\n    return msg.wParam;\n}\n\nLRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam){\n    switch(msg){\n        case WM_CREATE:\n            button = CreateWindow(\"button\", 0, WS_CHILD | WS_VISIBLE | BS_OWNERDRAW, 10, 10, 32, 32, hwnd, 0, hInst, 0);\n            buttonProcHandler = (WNDPROC)SetWindowLong(hwndButton, GWL_WNDPROC, (long)ButtonProc);\n            break;\n        case WM_MOUSEMOVE:\n            break;\n        case WM_CLOSE:\n            DestroyWindow(hwnd);\n            break;\n        case WM_DESTROY:\n            PostQuitMessage(0);\n            break;\n        default: \n            return DefWindowProc(hwnd, msg, wParam, lParam);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>custom.cpp:</p>\n\n<pre><code>#include \"main.h\"\n\nLRESULT CALLBACK ButtonProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam){\n    switch(msg){\n        case WM_CREATE:\n            break;\n        case WM_MOUSEMOVE:\n            break;\n        case WM_LBUTTONDOWN:\n            break;\n        default:\n            return CallWindowProc(buttonProcHandler, hwnd, msg, wParam, lParam);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The problem is the button disappears... but when I move <code>buttonProc()</code> inside of <code>main.cpp</code> then everything works fine.</p>\n\n<p>So, I am guessing I did something wrong when declaring global variables like <code>static WNDPROC buttonProcHandler</code>.</p>\n\n<p>I know what I am doing is entirely wrong, and that there is a better way of doing it.  I just don't know what that is.</p>\n\n<p>Can anyone can help/teach me the standard way of creating custom procedures?</p>\n"}, {"tags": ["c++", "memcpy"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 6, "creation_date": 1526492625, "post_id": 50377059, "comment_id": 87770309, "body": "You cannot memcpy non POD, especially one that has raw pointer."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1526492793, "post_id": 50377059, "comment_id": 87770390, "body": "If you <code>memcpy</code>, and the source goes out of scope, what happens to the pointer <code>str</code>?"}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1526492816, "post_id": 50377059, "comment_id": 87770407, "body": "@Slava pointers themselves are POD, and so is OP&#39;s data structure as presented. Obviously, ownership semantics are a consideration, but pointers themselves are absolutely fine to be memcpy&#39;ed"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1526493089, "post_id": 50377059, "comment_id": 87770523, "body": "@Frank maybe I made myself not clear - has raw pointer with dynamically allocated memory that this object has ownership. And data structure OP mentions definitely not complete as it is about <code>std::string</code>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1526493395, "post_id": 50377059, "comment_id": 87770693, "body": "It&#39;s almost certain that your <code>string</code> class would manage the buffer pointed to by <code>str_</code> and <code>delete</code> it or otherwise release it at the end of it&#39;s lifetime. By making a bitwise copy of your instance, you would have two objects that both assume to have ownership of that buffer."}], "answers": [{"comments": [{"owner": {"reputation": 533, "user_id": 2002288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7bf6830e387572641612bdf484a1aaa2?s=128&d=identicon&r=PG", "display_name": "sg_man", "link": "https://stackoverflow.com/users/2002288/sg-man"}, "edited": false, "score": 0, "creation_date": 1526492851, "post_id": 50377102, "comment_id": 87770421, "body": "I guess part of my confusion is, is std::string really not invariant of storage location?"}, {"owner": {"reputation": 533, "user_id": 2002288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7bf6830e387572641612bdf484a1aaa2?s=128&d=identicon&r=PG", "display_name": "sg_man", "link": "https://stackoverflow.com/users/2002288/sg-man"}, "edited": false, "score": 0, "creation_date": 1526493329, "post_id": 50377102, "comment_id": 87770654, "body": "Okay, light bulb goes on. Thanks.  A few other implementations around the web suggested implementing as I did, but it looks like yours is more common in practice. Indeed that would not fly with a <i>conceptual</i> memcpy."}], "tags": [], "owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "is_accepted": true, "score": 3, "last_activity_date": 1526493089, "last_edit_date": 1526493089, "creation_date": 1526492679, "answer_id": 50377102, "question_id": 50377059, "link": "https://stackoverflow.com/questions/50377059/memcpying-stdstring-in-c/50377102#50377102", "title": "memcpy&#39;ing std::string in C++", "body": "<p>The bug has the following detail in it:</p>\n\n<blockquote>\n  <p>internal data was not invariant of the storage location (storing an offset into this).</p>\n</blockquote>\n\n<p>Which immediately invalidates your assumptions.</p>\n\n<p>The structure <strong>probably</strong> looks something along these general lines:</p>\n\n<pre><code>class string\n{\n    char* str_;\n    union\n    {\n        size_t len_;\n        char small_str[16];\n    };\n};\n</code></pre>\n\n<p>So that <code>str_</code> can be accessed without having to check for SSO on every single access.</p>\n"}, {"tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 3, "last_activity_date": 1526492975, "creation_date": 1526492975, "answer_id": 50377179, "question_id": 50377059, "link": "https://stackoverflow.com/questions/50377059/memcpying-stdstring-in-c/50377179#50377179", "title": "memcpy&#39;ing std::string in C++", "body": "<p>The problem is that SSO is unsafe to <code>memcpy</code> because the pointer to the data is usually redirected to the internal buffer inside the stack portion of the object. So when the object is copied to a new location, the pointer still points to the (old, possibly no longer valid) location inside the old object. </p>\n\n<p>And of course, <code>std::string</code> (and all non-POD types) should generally not be <code>memcpy</code>'d in the first place, especially when heap allocation is involved, as it risks, at the very least, double-deletion or heap corruption. </p>\n\n<p>So no, you should never, ever, ever, <code>memcpy</code> a non-POD. Even if you think you should/need to. Use <code>std::copy</code> or figure something else out.</p>\n"}], "owner": {"reputation": 533, "user_id": 2002288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7bf6830e387572641612bdf484a1aaa2?s=128&d=identicon&r=PG", "display_name": "sg_man", "link": "https://stackoverflow.com/users/2002288/sg-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1064, "favorite_count": 0, "accepted_answer_id": 50377102, "answer_count": 2, "score": 2, "last_activity_date": 1526493089, "creation_date": 1526492527, "question_id": 50377059, "link": "https://stackoverflow.com/questions/50377059/memcpying-stdstring-in-c", "title": "memcpy&#39;ing std::string in C++", "body": "<p>For the Eigen matrix library, someone filed the following issue:</p>\n\n<p><a href=\"https://forum.kde.org/viewtopic.php?f=74&amp;t=140169\" rel=\"nofollow noreferrer\">https://forum.kde.org/viewtopic.php?f=74&amp;t=140169</a></p>\n\n<p>As I understand, the problem was that you cannot do a memcpy-based swap of two std::strings.</p>\n\n<p>memcpy'ing here doesn't really seem advisable, but I also don't understand the problem the reporter is identifying.</p>\n\n<p>It seems like if std::string is conceptually:</p>\n\n<pre><code>class string\n{\n    union\n    {\n        class heap_str_\n        {\n            char* str_;\n            size_t len_;\n        }\n        char small_str[16];\n    }\n\n};\n</code></pre>\n\n<p>I think both of these would be okay under a memcpy (?) (ownership issues not withstanding, which I guess would be 'okay' with a swap).</p>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["c++", "multithreading", "concurrency", "monitors"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1526492335, "post_id": 50376991, "comment_id": 87770175, "body": "Also, should <code>list&lt;int&gt; l;</code> be <i>inside</i> the class?"}], "answers": [{"tags": [], "owner": {"reputation": 538, "user_id": 1665886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e1ddc9e7284c08982437f63fcf0e2d?s=128&d=identicon&r=PG", "display_name": "CarlH", "link": "https://stackoverflow.com/users/1665886/carlh"}, "is_accepted": true, "score": 0, "last_activity_date": 1526492502, "creation_date": 1526492502, "answer_id": 50377053, "question_id": 50376991, "link": "https://stackoverflow.com/questions/50376991/passing-monitor-method-as-thread-parameter-c/50377053#50377053", "title": "Passing monitor method as thread parameter c++", "body": "<p>Your thread function has to be static.  To access member functions from the thread pass a pointer to your object to the thread function when you create it.</p>\n"}], "owner": {"reputation": 55, "user_id": 9801677, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Andr&#233; Winston", "link": "https://stackoverflow.com/users/9801677/andr%c3%a9-winston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "closed_date": 1526504273, "accepted_answer_id": 50377053, "answer_count": 1, "score": 2, "last_activity_date": 1526492502, "creation_date": 1526492219, "last_edit_date": 1526492499, "question_id": 50376991, "link": "https://stackoverflow.com/questions/50376991/passing-monitor-method-as-thread-parameter-c", "closed_reason": "Duplicate", "title": "Passing monitor method as thread parameter c++", "body": "<p>I'm coding a monitor to mutually exclude access to the methods of a <code>std::list</code>\nWhat I have now is basically this:</p>\n\n<p><code></p>\n\n<pre><code>list&lt;int&gt; l;\nclass monitor{\n    public:\n    void m_add(int x){\n        //lock use of m_remove\n        //lock use of m_add\n        l.push_back(x);\n        //unlock use of m_add\n        //unlock use of m_remove\n    }\n    void m_remove(int x){\n        //lock use of m_remove\n        //lock use of m_contains\n        //lock use of m_add\n        l.remove(x);\n        //unlock use of m_add\n        //unlock use of m_contains\n        //unlock use of m_remove\n    }\n    bool m_contains(int x){\n        //lock use of m_remove\n        bool found = find(l.begin(), l.end(), x) != l.end();\n        //unlock use of m_remove\n        return found;\n    }\n    private:\n    mutex mtx_remove;\n    mutex mtx_add;\n    mutex mtx_contains;\n};\n</code></pre>\n\n<p></code></p>\n\n<p>Inside main function I create a thread to run the add function, e.g. <code>thread t(m.m_add, 1);</code> and I get the error </p>\n\n<pre><code>error: invalid use of non-static member function\n</code></pre>\n\n<p>I understand (by looking at other answers around here) that I should  run the thread as in <code>thread t(&amp;monitor::m_add, 1);</code> and declaring all the methods as static, but I need to instantiate an object of <code>monitor</code> in order to create the mutexes (or locks, or whatever) and make them private on main's scope.</p>\n\n<p>What is the most appropriate solution for this case? It'd be interesting if the locks were only accessible in the scope of the monitor class (by the way, I also intend to put the <code>list&lt;int&gt; l</code> inside the monitor class in the future.)</p>\n"}, {"tags": ["c++", "windows", "qt", "device-manager"], "comments": [{"owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 0, "creation_date": 1526492273, "post_id": 50376953, "comment_id": 87770142, "body": "Qt likely doesn&#39;t provide what you are looking for. Best I could find is <a href=\"https://doc.qt.io/qt-5/qsysinfo.html\" rel=\"nofollow noreferrer\">QSysInfo</a>, and that just has the bare minimum, nothing network-related."}, {"owner": {"reputation": 665, "user_id": 6367098, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mdK2PtRe5co/AAAAAAAAAAI/AAAAAAAAAGs/hwJ0kn0htaw/photo.jpg?sz=128", "display_name": "Martin H&#246;her", "link": "https://stackoverflow.com/users/6367098/martin-h%c3%b6her"}, "edited": false, "score": 0, "creation_date": 1526501081, "post_id": 50376953, "comment_id": 87774366, "body": "You could have a look at <a href=\"http://doc.qt.io/qt-5/qnetworkinterface.html#humanReadableName\" rel=\"nofollow noreferrer\">QNetworkInterface::humanReadableName()</a>. It is not exactly what you are looking for, but depending on what you need the name for might be sufficient."}, {"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "edited": false, "score": 0, "creation_date": 1526506811, "post_id": 50376953, "comment_id": 87776791, "body": "I recently answered this question. The answer is no. There is no way in Qt. See my answer: <a href=\"https://stackoverflow.com/a/49952953/3606329\">stackoverflow.com/a/49952953/3606329</a>"}], "owner": {"reputation": 93, "user_id": 8580457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e5e67d959b77976c13f59d40e9097df?s=128&d=identicon&r=PG&f=1", "display_name": "cnm", "link": "https://stackoverflow.com/users/8580457/cnm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "closed_date": 1526515246, "answer_count": 0, "score": 0, "last_activity_date": 1526519262, "creation_date": 1526492079, "last_edit_date": 1526519262, "question_id": 50376953, "link": "https://stackoverflow.com/questions/50376953/how-to-retrieve-device-description-for-a-network-adapter-in-qt", "closed_reason": "Duplicate", "title": "How to retrieve &#39;device description&#39; for a &#39;Network adapter&#39; in Qt", "body": "<p>Is there any class/routine in Qt that can retrieve the value of 'device description' in 'Network adapters' in 'device manager', see below picture -</p>\n\n<p><a href=\"https://i.stack.imgur.com/HCcS3.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HCcS3.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2174, "user_id": 3349368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c9f50cb5783614c67eef86caf63139?s=128&d=identicon&r=PG", "display_name": "Paul Belanger", "link": "https://stackoverflow.com/users/3349368/paul-belanger"}, "edited": false, "score": 2, "creation_date": 1526491714, "post_id": 50376818, "comment_id": 87769829, "body": "Please post the contents of the file that is not compiling. Remember to indent lines with four spaces to format correctly."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1526491871, "post_id": 50376818, "comment_id": 87769910, "body": "No Posted Code == No Help."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1526491913, "post_id": 50376818, "comment_id": 87769925, "body": "Remember, edit your post with <b>text</b>, no screen snapshots of the code.  Screen snapshots don&#39;t paste well into IDEs."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1526492026, "post_id": 50376818, "comment_id": 87769983, "body": "Try using <code>char</code> for characters, not integers."}, {"owner": {"reputation": 97, "user_id": 8732749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4296ca4f71db4d120553df75c59b203f?s=128&d=identicon&r=PG&f=1", "display_name": "K.J Fogang Fokoa", "link": "https://stackoverflow.com/users/8732749/k-j-fogang-fokoa"}, "edited": false, "score": 0, "creation_date": 1526492044, "post_id": 50376818, "comment_id": 87769990, "body": "i post the code but it doesn&#39;t respect formattinf of c++"}, {"owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 0, "creation_date": 1526492059, "post_id": 50376818, "comment_id": 87770004, "body": "is <code>KEY_LEFT</code> defined as a macro somewhere?"}, {"owner": {"reputation": 97, "user_id": 8732749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4296ca4f71db4d120553df75c59b203f?s=128&d=identicon&r=PG&f=1", "display_name": "K.J Fogang Fokoa", "link": "https://stackoverflow.com/users/8732749/k-j-fogang-fokoa"}, "edited": false, "score": 0, "creation_date": 1526492131, "post_id": 50376818, "comment_id": 87770047, "body": "same error when i using char"}, {"owner": {"reputation": 97, "user_id": 8732749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4296ca4f71db4d120553df75c59b203f?s=128&d=identicon&r=PG&f=1", "display_name": "K.J Fogang Fokoa", "link": "https://stackoverflow.com/users/8732749/k-j-fogang-fokoa"}, "edited": false, "score": 0, "creation_date": 1526492200, "post_id": 50376818, "comment_id": 87770105, "body": "yes hlt. In #include &lt;ncurses.h&gt;"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1526492330, "post_id": 50376818, "comment_id": 87770171, "body": "I did not see <code>#include &lt;ncurses.h&gt;</code> in your question&#39;s code.  Try using identifiers that do not collide with macros."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1526492332, "post_id": 50376818, "comment_id": 87770172, "body": "Are you trying to redefine a macro in NCurses?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1526496869, "post_id": 50376818, "comment_id": 87772382, "body": "<i>Always</i> post the complete text of the error message (verbatim and <i>in</i> the question) when there is one."}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 8732749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4296ca4f71db4d120553df75c59b203f?s=128&d=identicon&r=PG&f=1", "display_name": "K.J Fogang Fokoa", "link": "https://stackoverflow.com/users/8732749/k-j-fogang-fokoa"}, "edited": false, "score": 0, "creation_date": 1526493899, "post_id": 50377082, "comment_id": 87770973, "body": "OK. Please , what should i put in the place of  KEY_LEFT = &#39;a&#39;"}, {"owner": {"reputation": 97, "user_id": 8732749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4296ca4f71db4d120553df75c59b203f?s=128&d=identicon&r=PG&f=1", "display_name": "K.J Fogang Fokoa", "link": "https://stackoverflow.com/users/8732749/k-j-fogang-fokoa"}, "edited": false, "score": 0, "creation_date": 1526494831, "post_id": 50377082, "comment_id": 87771436, "body": "i edit ncurses.h like that :    #define KEY_DOWN\tbas//0402\t\t/* down-arrow key <i>/ #define KEY_UP\t\thaut//0403\t\t/</i> up-arrow key <i>/ #define KEY_LEFT\tgauche//0404\t\t/</i> left-arrow key <i>/ #define KEY_RIGHT\tdroit//0405\t\t/</i> right-arrow key */      And i have go this error when i compile                                        /tmp/cc11Y2oC.o : Dans la fonction &#171; main &#187; : mazegame.cpp:(.text+0x8a3) : r&#233;f&#233;rence ind&#233;finie vers &#171; stdscr &#187; mazegame.cpp:(.text+0x8ab) : r&#233;f&#233;rence ind&#233;finie vers &#171; wgetch &#187; collect2: error: ld returned 1 exit status"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 97, "user_id": 8732749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4296ca4f71db4d120553df75c59b203f?s=128&d=identicon&r=PG&f=1", "display_name": "K.J Fogang Fokoa", "link": "https://stackoverflow.com/users/8732749/k-j-fogang-fokoa"}, "edited": false, "score": 1, "creation_date": 1526496955, "post_id": 50377082, "comment_id": 87772428, "body": "@fogang fokoa - ehh, don&#39;t edit ncurses. Just use a different name for your own variable(s)."}, {"owner": {"reputation": 97, "user_id": 8732749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4296ca4f71db4d120553df75c59b203f?s=128&d=identicon&r=PG&f=1", "display_name": "K.J Fogang Fokoa", "link": "https://stackoverflow.com/users/8732749/k-j-fogang-fokoa"}, "edited": false, "score": 0, "creation_date": 1526497643, "post_id": 50377082, "comment_id": 87772749, "body": "OK. i reedit ncurses.h, it&#39;s okay.  During the compilation, i get this error :     mazegame.cpp:(.text+0x8a3) : r&#233;f&#233;rence ind&#233;finie vers &#171; stdscr &#187; mazegame.cpp:(.text+0x8ab) : r&#233;f&#233;rence ind&#233;finie vers &#171; wgetch &#187; collect2: error: ld returned 1 exit status"}, {"owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 0, "creation_date": 1526502742, "post_id": 50377082, "comment_id": 87775134, "body": "You need to compile with <code>-lncurses</code>. If it still can&#39;t find <code>stdscr</code>, <a href=\"https://stackoverflow.com/questions/9541679/undefined-reference-to-stdscr\">add <code>-ltinfo</code></a>"}], "tags": [], "owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "is_accepted": false, "score": 0, "last_activity_date": 1526492620, "creation_date": 1526492620, "answer_id": 50377082, "question_id": 50376818, "link": "https://stackoverflow.com/questions/50376818/error-during-the-compilation-of-a-code-c/50377082#50377082", "title": "Error during the compilation of a code C++", "body": "<p>Per the comments you are including <code>ncurses.h</code>, which contains</p>\n\n<pre><code>#define KEY_LEFT 0404 /* left-arrow key */\n</code></pre>\n\n<p>That is a macro, which will automatically be substituted by the preprocessor, turning your code into</p>\n\n<pre><code>const int 0404 = 'a' /* ... */;\n</code></pre>\n\n<p><code>0404</code> is not a valid variable name, so your code does not compile. In general, you could try to redefine these macros (via <code>#define</code>). However,  redefining them may cause havoc in other places.</p>\n\n<p>If you are trying to treat <kbd>a</kbd> just like <kbd>\u2190</kbd>, I would recommand checking for the appropriate key instead of (or alongside to) <code>KEY_LEFT</code> in whatever place you use that macro.</p>\n"}], "owner": {"reputation": 97, "user_id": 8732749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4296ca4f71db4d120553df75c59b203f?s=128&d=identicon&r=PG&f=1", "display_name": "K.J Fogang Fokoa", "link": "https://stackoverflow.com/users/8732749/k-j-fogang-fokoa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1526495127, "creation_date": 1526491626, "last_edit_date": 1526493283, "question_id": 50376818, "link": "https://stackoverflow.com/questions/50376818/error-during-the-compilation-of-a-code-c", "title": "Error during the compilation of a code C++", "body": "<p>I have got a problem with my code c++ when i assay to compile it.\n     ^</p>\n\n<p>This is the complete code ,the error line is just down includes</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;cstdio&gt;\n//#include &lt;conio.h&gt;\n#include &lt;ncurses.h&gt;\n#include &lt;time.h&gt;\n\nusing namespace std;\n\nconst char KEY_LEFT = 'a', KEY_RIGHT = 'd',KEY_UP = 'w', KEY_DOWN ='s'; \nconst int HEIGHT = 25, WIDTH = 40;\nbool  hasntWon = true; \nint hP = 100; \n//unsigned char  healthbar [10] = {'*','*','*','*','*','*','*','*','*','*'};\n\nenum  DirectionX {Right,Left};\nenum  DirectionY {Up,Down};\n\nstruct Player {\n  char sprite;\n  int x;\n  int y; \n };\n\n struct Enemy{\n  char sprite;\n  int x;\n  int y; \n  DirectionX pastDirX; \n  DirectionY pastDirY; \n };\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "qt"], "comments": [{"owner": {"reputation": 4124, "user_id": 2828480, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/30ce285bfd170cf3834d9591fab207e0?s=128&d=identicon&r=PG&f=1", "display_name": "Konrad", "link": "https://stackoverflow.com/users/2828480/konrad"}, "edited": false, "score": 1, "creation_date": 1526492629, "post_id": 50376758, "comment_id": 87770310, "body": "you can use MSVC2015 build, it will work  with VS2017"}, {"owner": {"reputation": 4124, "user_id": 2828480, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/30ce285bfd170cf3834d9591fab207e0?s=128&d=identicon&r=PG&f=1", "display_name": "Konrad", "link": "https://stackoverflow.com/users/2828480/konrad"}, "edited": false, "score": 0, "creation_date": 1526492840, "post_id": 50376758, "comment_id": 87770416, "body": "VC Runtime in MSVC 2017 is binary compatible with 2015"}, {"owner": {"reputation": 4124, "user_id": 2828480, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/30ce285bfd170cf3834d9591fab207e0?s=128&d=identicon&r=PG&f=1", "display_name": "Konrad", "link": "https://stackoverflow.com/users/2828480/konrad"}, "edited": false, "score": 0, "creation_date": 1526493954, "post_id": 50376758, "comment_id": 87771005, "body": "See discussion here: <a href=\"https://forum.qt.io/topic/80583/prebuild-qt-32-bit-versions-for-visual-studio-2017/6\" rel=\"nofollow noreferrer\">forum.qt.io/topic/80583/&hellip;</a>"}, {"owner": {"reputation": 269, "user_id": 7667372, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/daa61156e79815eb3f78c473682fdb0f?s=128&d=identicon&r=PG&f=1", "display_name": "ibr", "link": "https://stackoverflow.com/users/7667372/ibr"}, "reply_to_user": {"reputation": 4124, "user_id": 2828480, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/30ce285bfd170cf3834d9591fab207e0?s=128&d=identicon&r=PG&f=1", "display_name": "Konrad", "link": "https://stackoverflow.com/users/2828480/konrad"}, "edited": false, "score": 1, "creation_date": 1526565444, "post_id": 50376758, "comment_id": 87802366, "body": "&quot;you can use MSVC2015 build, it will work with VS2017&quot;  worked, can you post it as an answer?"}], "answers": [{"tags": [], "owner": {"reputation": 4124, "user_id": 2828480, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/30ce285bfd170cf3834d9591fab207e0?s=128&d=identicon&r=PG&f=1", "display_name": "Konrad", "link": "https://stackoverflow.com/users/2828480/konrad"}, "is_accepted": true, "score": 1, "last_activity_date": 1526566477, "creation_date": 1526566477, "answer_id": 50393726, "question_id": 50376758, "link": "https://stackoverflow.com/questions/50376758/qt-32-bit-for-vs2017/50393726#50393726", "title": "QT 32 bit for VS2017", "body": "<p>Just like I said in the comment and you confirmed it, MSVC2015 32 bit official prebuild version from the installer will work with VS2017 as VC runtime in MSVC 2017 is binary compatible with 2015 as explained here: </p>\n\n<p><a href=\"https://blogs.msdn.microsoft.com/vcblog/2017/03/07/binary-compatibility-and-pain-free-upgrade-why-moving-to-visual-studio-2017-is-almost-too-easy/\" rel=\"nofollow noreferrer\">https://blogs.msdn.microsoft.com/vcblog/2017/03/07/binary-compatibility-and-pain-free-upgrade-why-moving-to-visual-studio-2017-is-almost-too-easy/</a></p>\n\n<p>If Qt team didn't provide MSVC2017 32 bit build it means that it just works.</p>\n"}], "owner": {"reputation": 269, "user_id": 7667372, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/daa61156e79815eb3f78c473682fdb0f?s=128&d=identicon&r=PG&f=1", "display_name": "ibr", "link": "https://stackoverflow.com/users/7667372/ibr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 941, "favorite_count": 0, "accepted_answer_id": 50393726, "answer_count": 1, "score": 0, "last_activity_date": 1526566477, "creation_date": 1526491423, "last_edit_date": 1526496340, "question_id": 50376758, "link": "https://stackoverflow.com/questions/50376758/qt-32-bit-for-vs2017", "title": "QT 32 bit for VS2017", "body": "<p>I have C++ project where I need to use QT in it, but the problem is that I'm using VS2017 and the project is 32 bit, but when I tried to install QT for VS2016 there where no 32 bit for it, is there any other source that has QT as 32 bit for VS2017?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "curl", "libcurl"], "answers": [{"comments": [{"owner": {"reputation": 759, "user_id": 5118384, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/61d65960131d9451f80f722e593d4ce5?s=128&d=identicon&r=PG&f=1", "display_name": "JetStream", "link": "https://stackoverflow.com/users/5118384/jetstream"}, "edited": false, "score": 0, "creation_date": 1526491163, "post_id": 50376614, "comment_id": 87769541, "body": "Thank you, I totally forgot that. I will accept your answer as soon as I can."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1526491647, "post_id": 50376614, "comment_id": 87769789, "body": "<code>TidyBuffer</code> has a size member. I would use that over strlen, especially when saving binary data."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1526491702, "post_id": 50376614, "comment_id": 87769818, "body": "@RetiredNinja Thank you, I&#39;m not familiar with <code>TidyBuffer</code>, I was just working off the info at hand. I&#39;ll ammend the answer."}], "tags": [], "owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "is_accepted": true, "score": 4, "last_activity_date": 1526496544, "last_edit_date": 1526496544, "creation_date": 1526490907, "answer_id": 50376614, "question_id": 50376564, "link": "https://stackoverflow.com/questions/50376564/information-loss-while-writing-array-to-a-file/50376614#50376614", "title": "Information loss while writing array to a file", "body": "<pre><code>file.write(charArray, sizeof(charArray));\n</code></pre>\n\n<p><code>sizeof(charArray)</code> is always 8 (on a 64 bit architecture), since <code>charArray</code> is a <code>char*</code>. This is why you wrote 8 characters to the file.</p>\n\n<p>To get the length of a null-terminated character string, you should be using <code>std::strlen()</code>. However, since you are using <code>TidyBuffer</code>, you can use <code>bp.size</code> instead, avoiding the O(N) operation.</p>\n"}], "owner": {"reputation": 759, "user_id": 5118384, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/61d65960131d9451f80f722e593d4ce5?s=128&d=identicon&r=PG&f=1", "display_name": "JetStream", "link": "https://stackoverflow.com/users/5118384/jetstream"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 50376614, "answer_count": 1, "score": -1, "last_activity_date": 1534706240, "creation_date": 1526490684, "last_edit_date": 1534706240, "question_id": 50376564, "link": "https://stackoverflow.com/questions/50376564/information-loss-while-writing-array-to-a-file", "title": "Information loss while writing array to a file", "body": "<p>I have a problem. I wanted to use libcurl and libtidy to save an html file to xml on my pc.</p>\n\n<p>This is code I found for getting the website (in my case for testing google.com) and then tidying it. I got it from multiple sources and put it together.</p>\n\n<pre><code>CURL *curl;\nstd::string readBuffer;\n\ncurl = curl_easy_init();\nif(curl) {\n    curl_easy_setopt(curl, CURLOPT_URL, \"http://www.google.com\");\n    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, WriteCallback);\n    curl_easy_setopt(curl, CURLOPT_WRITEDATA, &amp;readBuffer);\n    curl_easy_cleanup(curl);\n}\n\nconst char* input = readBuffer.c_str();\n\nTidyBuffer output = {0};\nTidyBuffer errbuf = {0};\nint rc = -1;\nBool ok;\n\nTidyDoc tdoc = tidyCreate();\nstd::cout &lt;&lt; \"Tidying...\" &lt;&lt; std::endl;\n\nok = tidyOptSetBool(tdoc, TidyXhtmlOut, yes);\nif (ok)\n    rc = tidySetErrorBuffer(tdoc, &amp;errbuf);\nif (rc &gt;= 0)\n    rc = tidyParseString(tdoc, input);\nif ( rc &gt;= 0 )\n    rc = tidyCleanAndRepair( tdoc );               \nif ( rc &gt;= 0 )\n    rc = tidyRunDiagnostics( tdoc );               \nif ( rc &gt; 1 )                                    \n    rc = ( tidyOptSetBool(tdoc, TidyForceOutput, yes) ? rc : -1 );\nif ( rc &gt;= 0 )\n    rc = tidySaveBuffer( tdoc, &amp;output );          \n\nif ( rc &gt;= 0 )\n{\n    if ( rc &gt; 0 )\n    printf( \"\\nAnd here is the result:\\n\\n%s\", output.bp );\n}\nelse\n    printf( \"A severe error (%d) occurred.\\n\", rc );\n</code></pre>\n\n<p>The result is saved in <code>output.bp</code> as a <code>byte *</code>. Now I tried writing this to a .txt file, just for testing purposes (later to an xml file). For this I use these lines of code:</p>\n\n<pre><code>std::ofstream file;\nfile.open(\"C:/Testing/1.txt\", std::ios_base::binary);\nassert(file.is_open());\n\nauto * charArray = (char*) output.bp;\n\nfile.write(charArray, sizeof(charArray));\n\nfile.close();\n</code></pre>\n\n<p>A file get created on the specified position but only a few characters get saved:</p>\n\n<pre><code>&lt;html it\n</code></pre>\n\n<p>The rest of the document is just empty, no more lines or anything, thats all that gets saved. I really have no idea why this is happening as when printing out <code>output.bp</code> everything works just fine.</p>\n"}, {"tags": ["c++", "data-structures", "position", "maps", "rectangles"], "comments": [{"owner": {"reputation": 17562, "user_id": 568635, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25f0758867b3f251cfdf101b9611b9b5?s=128&d=identicon&r=PG", "display_name": "Eelke", "link": "https://stackoverflow.com/users/568635/eelke"}, "edited": false, "score": 1, "creation_date": 1526492283, "post_id": 50376560, "comment_id": 87770150, "body": "You should look for <a href=\"https://en.wikipedia.org/wiki/R-tree\" rel=\"nofollow noreferrer\">R-tree</a>  implementations."}, {"owner": {"reputation": 1548, "user_id": 980270, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/da2801be4550a5a50de5c0ced2592093?s=128&d=identicon&r=PG", "display_name": "TilmannZ", "link": "https://stackoverflow.com/users/980270/tilmannz"}, "reply_to_user": {"reputation": 17562, "user_id": 568635, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25f0758867b3f251cfdf101b9611b9b5?s=128&d=identicon&r=PG", "display_name": "Eelke", "link": "https://stackoverflow.com/users/568635/eelke"}, "edited": false, "score": 0, "creation_date": 1526653342, "post_id": 50376560, "comment_id": 87842461, "body": "As @Eelke, look for R-Trees (or better R*Tree (RStarTrees), alternatively for Quadtrees."}], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 6114339, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-y1wXXlV69ZY/AAAAAAAAAAI/AAAAAAAAA7s/BmDcBas7lTk/photo.jpg?sz=128", "display_name": "fcooper8472", "link": "https://stackoverflow.com/users/6114339/fcooper8472"}, "is_accepted": false, "score": 0, "last_activity_date": 1526491675, "creation_date": 1526491675, "answer_id": 50376831, "question_id": 50376560, "link": "https://stackoverflow.com/questions/50376560/how-to-implement-an-optimized-coordinate-based-data-structure/50376831#50376831", "title": "How to Implement an Optimized Coordinate based Data Structure?", "body": "<p>I don't think there is anything ready-made in the STL, but you can check the full list of containers <a href=\"http://en.cppreference.com/w/cpp/container\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>You could wrap your own with a custom implementation fairly easily.</p>\n\n<p>How about a lightweight Rectangle:</p>\n\n<pre><code>struct Rectangle {\n    int x;\n    int y;\n    int width;\n    int height;\n};\n</code></pre>\n\n<p>Then a container that holds rectangles and handles the logic of adding a retrieving them:</p>\n\n<pre><code>struct ContainerOfRectangles {\n    std::vector&lt;Rectangle&gt; rectangles;\n\n    void AddNew(Rectangle r)\n    {\n        if (/* some condition is true */)\n        {\n            rectangles.push_back(r);\n        }\n    }\n\n    Rectangle GetRectangle(Rectangle referenceRect)\n    {\n        for (const auto&amp; rectangle : rectangles)\n        {\n            if (/* some condition on referenceRect and rectangle */)\n            {\n                return rectangle;\n            }\n        }\n        // Something here if the rectangle wasn't found\n        return Rectangle{};\n    }\n};\n</code></pre>\n\n<p>You could exchange <code>vector</code> for some other container if you like.</p>\n"}], "owner": {"reputation": 947, "user_id": 8139481, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/qq5cI.jpg?s=128&g=1", "display_name": "Griffort", "link": "https://stackoverflow.com/users/8139481/griffort"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526491675, "creation_date": 1526490672, "question_id": 50376560, "link": "https://stackoverflow.com/questions/50376560/how-to-implement-an-optimized-coordinate-based-data-structure", "title": "How to Implement an Optimized Coordinate based Data Structure?", "body": "<p>I don't know if such a structure already exists, but I'm wondering if there is something similar to a Map/Hash that has the following behavior:</p>\n\n<ul>\n<li><p>when an item is assigned into the map, the developer provides a \"rectangle object\" (x, y, width, height) as a key to the item.</p></li>\n<li><p>if a provided rectangle overlaps with an existing rectangle-key of the map, the assignment does not occur.</p></li>\n<li><p>in order to retrieve the item, an x and y position is provided to the map, and the item with the rectangle that contains this position is returned.</p></li>\n</ul>\n"}, {"tags": ["c++", "opengl", "wavefront"], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 9801126, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "ShaoyuPei", "link": "https://stackoverflow.com/users/9801126/shaoyupei"}, "edited": false, "score": 0, "creation_date": 1526765584, "post_id": 50376679, "comment_id": 87873993, "body": "Hi,I follow your instruction, but it crashes ,it should use sizeof(*float) or sizeof(*va.data())? and it should be  glDrawArrays( GL_TRIANGLES, 0, 12 )? ;I test va has the right output.,"}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 1, "last_activity_date": 1526497910, "last_edit_date": 1526497910, "creation_date": 1526491115, "answer_id": 50376679, "question_id": 50376506, "link": "https://stackoverflow.com/questions/50376506/using-vbo-to-draw-the-cube-by-loading-wavefront-object/50376679#50376679", "title": "Using VBO to draw the cube by loading wavefront object", "body": "<p>The type of <code>vbo</code> is <code>float*</code>, so <code>sizeof(vbo)</code> is not the size of the array, where <code>vbo</code> points to, but it's the size of the pointer. See <a href=\"http://en.cppreference.com/w/cpp/language/sizeof\" rel=\"nofollow noreferrer\"><code>sizeof</code></a>.<br/> Note, the 3rd parameter of <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glBufferData.xhtml\" rel=\"nofollow noreferrer\"><code>glBufferData</code></a> has to be the size of the buffer in bytes.</p>\n\n<p>The size of <code>float* vbo = new float[78]</code> is <code>78 * sizeof(float)</code> or <code>78 * sizeof(*vbo)</code><br/>\nand the size of <code>int *element = new int[36]</code> is <code>36 * sizeof(int)</code> or <code>36 * sizeof(*element)</code><br/>\nBut <code>sizeof(vbo)</code> is the size of the pointer to the array or the same as <code>sizeof(float*)</code>.</p>\n\n<p>This means you have to change the code like this:</p>\n\n<pre><code>glBufferData(GL_ARRAY_BUFFER, 78*sizeof(float), vbo, GL_STATIC_DRAW);\nglBufferData(GL_ELEMENT_ARRAY_BUFFER, 36*sizeof(int), element, GL_STATIC_DRAW); \n</code></pre>\n\n<p>The 2nd paramter of <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glDrawElements.xhtml\" rel=\"nofollow noreferrer\"><code>glDrawElements</code></a> has to be the number of indices and the 3rd paramter has to be <code>GL_UNSIGNED_BYTE</code>, <code>GL_UNSIGNED_SHORT</code>, or <code>GL_UNSIGNED_INT</code>, dependent on the data type of the indices:</p>\n\n<pre><code>glDrawElements(GL_TRIANGLES, 36, GL_UNSIGNED_INT, NULL);\n</code></pre>\n\n<p>Note, you should prefer to use <code>unsigned int *</code> instead of <code>int*</code> for the data type of the index array (<code>element</code>).</p>\n\n<hr>\n\n<p>Your assumption is wrong. You can't mix 24 vertex coordinates, 18 normal vectors and 36 colors, with differnt arrays of indices, directly in one <a href=\"https://www.khronos.org/opengl/wiki/Vertex_Specification#Vertex_Array_Object\" rel=\"nofollow noreferrer\">Vertex Array Object</a>.</p>\n\n<p>The vertex attributes for each vertex position form a set of data. This means you have to create tuples of vertex coordinate, normal vector and color.</p>\n\n<p>See further <a href=\"https://stackoverflow.com/questions/11148567/rendering-meshes-with-multiple-indices/11148568#11148568\">Rendering meshes with multiple indices</a></p>\n\n<p>I recommend to use <a href=\"http://www.cplusplus.com/reference/vector/vector/\" rel=\"nofollow noreferrer\"><code>std::vector</code></a> and to do it somehow like this:</p>\n\n<pre><code>#include &lt;vector&gt;\n</code></pre>\n\n<p></p>\n\n<pre><code>// 8  vertex coordiantes: 8 * 3 float \nstd::vector&lt;float&gt; v{\n  -1.0f, -1.0f,  1.0f,\n  -1.0f,  1.0f,  1.0f,\n  -1.0f, -1.0f, -1.0f,\n  -1.0f,  1.0f, -1.0f,\n   1.0f, -1.0f,  1.0f,\n   1.0f,  1.0f,  1.0f,\n   1.0f, -1.0f, -1.0f,\n   1.0f,  1.0f, -1.0f };\n\n// 6  normal vectors: 6 * 3 float\nstd::vector&lt;float&gt; nv{\n   -1.0f,  0.0f,  0.0f,\n    0.0f,  0.0f, -1.0f,\n    1.0f,  0.0f,  0.0f,\n    0.0f,  0.0f,  1.0f,\n    0.0f, -1.0f,  0.0f,\n    0.0f,  1.0f,  0.0f };\n\n// 12 colors coordiantes: 12 * 3 float \nstd::vector&lt;float&gt; c{\n    0.583f,  0.771f,  0.014f,\n    0.609f,  0.115f,  0.436f,\n    0.327f,  0.483f,  0.844f,\n    0.822f,  0.569f,  0.201f,\n    0.435f,  0.602f,  0.223f,\n    0.310f,  0.747f,  0.185f,\n    0.597f,  0.770f,  0.761f,\n    0.559f,  0.436f,  0.730f,\n    0.359f,  0.583f,  0.152f,\n    0.483f,  0.596f,  0.789f,\n    0.559f,  0.861f,  0.639f,\n    0.195f,  0.548f,  0.859f };\n</code></pre>\n\n<p></p>\n\n<pre><code>// 12 faces 3*2 indices/face: 12 * 3 * 2 unsigned int \nstd::vector&lt;unsigned int&gt; indices{\n    2, 1,    3, 1,    1, 1,\n    4, 2,    7, 2,    3, 2,\n    8, 3,    5, 3,    7, 3,\n    6, 4,    1, 4,    5, 4,\n    7, 5,    1, 5,    3, 5,\n    4, 6,    6, 6,    8, 6,\n    2, 1,    4, 1,    3, 1,\n    4, 2,    8, 2,    7, 2,\n    8, 3,    6, 3,    5, 3,\n    6, 4,    2, 4,    1, 4,\n    7, 5,    5, 5,    1, 5,\n    4, 6,    2, 6,    6, 6 };\n</code></pre>\n\n<p>Create the vertex array data</p>\n\n<pre><code>// final vertex attributes 12 * 3 *(3 + 3 + 3) floats\n// x0 y0 z0    nvx0 nvy0 nvz0    cr0 cg0 cb0\n// x1 y1 z1    nvx1 nvy1 nvz1    cr1 cg1 cb1\nstd::vector&lt;float&gt; va; \n\nconst unsigned int no_of_faces = 12;\nfor (unsigned int f=0; f&lt;no_of_faces; ++f )\n{\n    for (unsigned int t=0; t&lt;3; ++t )\n    {\n        unsigned int vi = indices[(f*3+t)*2]-1;   // vertex index\n        unsigned int ni = indices[(f*3+t)*2+1]-1; // normal vector index\n        unsigned int ci = f;                      // color index\n\n        va.insert(va.end(), v.begin()  + vi*3, v.begin()  + vi*3+3); // insert vertex coordinate\n        va.insert(va.end(), nv.begin() + ni*3, nv.begin() + ni*3+3); // insert normal vector\n        va.insert(va.end(), c.begin()  + ci*3, c.begin()  + ci*3+3); // insert color\n    }\n}\n</code></pre>\n\n<p>Create the <a href=\"https://www.khronos.org/opengl/wiki/Vertex_Specification#Vertex_Buffer_Object\" rel=\"nofollow noreferrer\">Vertex Buffer Object</a>:</p>\n\n<pre><code>GLuint vbo;\nglGenBuffers( 1, &amp;vbo );\nglBindBuffer( GL_ARRAY_BUFFER, vbo );\nglBufferData( GL_ARRAY_BUFFER, va.size()*sizeof(*va.data()), va.data(), GL_STATIC_DRAW );\n</code></pre>\n\n<p>Define the an arrays of generic vertex attribute data:</p>\n\n<pre><code>glVertexPointer( 3, GL_FLOAT, 9*sizeof(*va.data()), 0 );\nglEnableClientState( GL_VERTEX_ARRAY );\nglNormalPointer( GL_FLOAT, 9*sizeof(*va.data()), (void*)(3*sizeof(*va.data())) ); \nglEnableClientState( GL_NORMAL_ARRAY );\nglColorPointer( 3, GL_FLOAT, 9*sizeof(*va.data()), (void*)(6*sizeof(*va.data())) ); \nglEnableClientState( GL_COLOR_ARRAY );\nglBindBuffer( GL_ARRAY_BUFFER, 0 );\n</code></pre>\n\n<p>Draw the array:</p>\n\n<pre><code>glDrawArrays( GL_TRIANGLES, 0, 36 );\n</code></pre>\n\n<p>Preview:</p>\n\n<p><a href=\"https://i.stack.imgur.com/F4gMF.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/F4gMF.gif\" alt=\"cube\"></a></p>\n"}], "owner": {"reputation": 199, "user_id": 9801126, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "ShaoyuPei", "link": "https://stackoverflow.com/users/9801126/shaoyupei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 50376679, "answer_count": 1, "score": 1, "last_activity_date": 1526497910, "creation_date": 1526490411, "last_edit_date": 1526493527, "question_id": 50376506, "link": "https://stackoverflow.com/questions/50376506/using-vbo-to-draw-the-cube-by-loading-wavefront-object", "title": "Using VBO to draw the cube by loading wavefront object", "body": "<p>I am required to Using VBO to draw the cube by loading  wavefront object.\nby drawing the triangles.\nhere is the object:</p>\n\n<pre><code>v -1.000000 -1.000000 1.000000\nv -1.000000 1.000000 1.000000\nv -1.000000 -1.000000 -1.000000\nv -1.000000 1.000000 -1.000000\nv 1.000000 -1.000000 1.000000\nv 1.000000 1.000000 1.000000\nv 1.000000 -1.000000 -1.000000\nv 1.000000 1.000000 -1.000000\nvn -1.0000 0.0000 0.0000\nvn 0.0000 0.0000 -1.0000\nvn 1.0000 0.0000 0.0000\nvn 0.0000 0.0000 1.0000\nvn 0.0000 -1.0000 0.0000\nvn 0.0000 1.0000 0.0000\nf 2//1 3//1 1//1\nf 4//2 7//2 3//2\nf 8//3 5//3 7//3\nf 6//4 1//4 5//4\nf 7//5 1//5 3//5\nf 4//6 6//6 8//6\nf 2//1 4//1 3//1\nf 4//2 8//2 7//2\nf 8//3 6//3 5//3\nf 6//4 2//4 1//4\nf 7//5 5//5 1//5\nf 4//6 2//6 6//6  \n</code></pre>\n\n<p>I also have a cooler array filled by myself which equals to 3 times number of face which is 36 indices </p>\n\n<pre><code>float colours[] = {\n    0.583f,  0.771f,  0.014f,\n    0.609f,  0.115f,  0.436f,\n    0.327f,  0.483f,  0.844f,\n    0.822f,  0.569f,  0.201f,\n    0.435f,  0.602f,  0.223f,\n    0.310f,  0.747f,  0.185f,\n    0.597f,  0.770f,  0.761f,\n    0.559f,  0.436f,  0.730f,\n    0.359f,  0.583f,  0.152f,\n    0.483f,  0.596f,  0.789f,\n    0.559f,  0.861f,  0.639f,\n    0.195f,  0.548f,  0.859f,\n    }\n</code></pre>\n\n<p>I store my vertices,normals,colours information into a array which is binding to VBO buffer:</p>\n\n<pre><code> float* vbo = new float[78]\n</code></pre>\n\n<p>which is in the order of vertices|normals|colours which is  24indices|18indices|36indices, I have been test it works very well </p>\n\n<p>I use another array to store the vertices indices information which is 36indices ,for example: f 2//1 3//1 1//1 I store as 2/3/1 in my array </p>\n\n<pre><code> int *element = new int[36];\n</code></pre>\n\n<p>I have been test it works well \uff0cI initial my vbo as follow: </p>\n\n<pre><code> static void init(void){\n .......\nGluint vbo_id,index_id;\n\nglGenBuffers(1,&amp;vbo_id);\nglGenBuffers(1,&amp;index_id);\nglBindBuffer(GL_ARRAY_BUFFER,vbo_id); \nglBindBuffer(GL_ELEMENT_ARRAY_BUFFER,index_id);\n\nglBufferData(GL_ARRAY_BUFFER,sizeof(vbo),vbo,GL_STATIC_DRAW);\nglBufferData(GL_ELEMENT_ARRAY_BUFFER,sizeof(element),element,GL_STATIC_DRAW); } \n</code></pre>\n\n<p>and my drawing is here</p>\n\n<pre><code> static void display(void){\n  .......\n glBindBuffer(GL_ARRAY_BUFFER,vbo_id);\n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER,index_id);\n    glEnableClientState(GL_VERTEX_ARRAY);\n    glEnableClientState(GL_COLOR_ARRAY);\n    glEnableClientState(GL_NORMAL_ARRAY);\n    glVertexPointer(3,GL_FLOAT,0,0);\n    glNormalPointer(GL_FLOAT,0,(void*)(24*sizeof(float)));//binding \n    glColorPointer(3,GL_FLOAT,0,(void*)(42*sizeof(float)));\n\n    for(int i=0;i&lt;12;i++){\n\n    glBegin(GL_TRIANGLES);\n    glArrayElement(element[i]);\n    glArrayElement(element[i+1]);\n    glArrayElement(element[i+2]);\n    glEnd();\n\n    }\n    /* have try this one too:\n    glDrawElements(GL_TRIANGLES,3,GL_INT,0) */\n\n\n    glDisableClientState(GL_COLOR_ARRAY);\n    glDisableClientState(GL_VERTEX_ARRAY);\n    glDisableClientState(GL_NORMAL_ARRAY);\n    glBindBuffer(GL_ARRAY_BUFFER,0);\n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER,0);\n    }\n</code></pre>\n\n<p>however there's nothing show on the screen. is my binding method correct, my instructor tells me when I draw with the indices , if I binding vertices and normals ,and colors correct , It will automatically matching by drawing with indices of vertices.</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1526489695, "post_id": 50376251, "comment_id": 87768746, "body": "Your function is supposed to return a <code>bool</code>, but I see no return value."}, {"owner": {"reputation": 652, "user_id": 1816448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542960d0795687e236a6da1ac9a22d9b?s=128&d=identicon&r=PG", "display_name": "Checo R", "link": "https://stackoverflow.com/users/1816448/checo-r"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1526490208, "post_id": 50376251, "comment_id": 87769034, "body": "Totally forgot about that, thanks"}], "answers": [{"tags": [], "owner": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "is_accepted": true, "score": 1, "last_activity_date": 1526494738, "creation_date": 1526494738, "answer_id": 50377618, "question_id": 50376251, "link": "https://stackoverflow.com/questions/50376251/how-to-use-outputarrayofarrays-in-c-opencv/50377618#50377618", "title": "How to use OutputArrayOfArrays in C++ OpenCV", "body": "<p>Your issue is not in <code>OutputArrayOfArrays</code> but with <code>cv::merge</code> you're trying to merge <code>cv::vector&lt;cv::Mat&gt;</code> to another object of the same type <code>cv::vector&lt;cv::Mat&gt;</code> which is not what <code>cv::merge</code> is suppose to do. Also you're declaring <code>B</code>, <code>G</code> and <code>R</code> as 3-channels each <code>CV_8UC3</code>, so you're variable <code>bgr</code> or <code>results</code> will be of size = 9 (3*3).</p>\n\n<p>The result code would look like something like that:</p>\n\n<pre><code>#include &lt;opencv2/highgui.hpp&gt;\n#include &lt;vector&gt;\n\ntemplate &lt;typename T, typename ... Ts&gt;\nvoid insert_all(std::vector&lt;T&gt; &amp;vec, Ts ... ts)\n {   \n     (vec.push_back(ts), ...);\n }\n\n\nvoid rgb_mats(cv::Mat&amp; results)\n{\n    std::vector&lt;cv::Mat&gt; bgr;\n    bgr.reserve(3);\n\n    cv::Mat B(100,100, CV_8UC1, cv::Scalar(255,0,0));\n    cv::Mat G(100,100, CV_8UC1, cv::Scalar(0,255,0));\n    cv::Mat R(100,100, CV_8UC1, cv::Scalar(0,0,255));\n\n    insert_all(bgr, B,G, R);\n\n    cv::merge(bgr, results);\n}\n\nint main ()\n{\ncv::Mat rgb_results;\nrgb_mats(rgb_results);\n}\n</code></pre>\n"}], "owner": {"reputation": 652, "user_id": 1816448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542960d0795687e236a6da1ac9a22d9b?s=128&d=identicon&r=PG", "display_name": "Checo R", "link": "https://stackoverflow.com/users/1816448/checo-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1673, "favorite_count": 0, "accepted_answer_id": 50377618, "answer_count": 1, "score": 2, "last_activity_date": 1526494738, "creation_date": 1526489534, "last_edit_date": 1526490229, "question_id": 50376251, "link": "https://stackoverflow.com/questions/50376251/how-to-use-outputarrayofarrays-in-c-opencv", "title": "How to use OutputArrayOfArrays in C++ OpenCV", "body": "<p>I've been trying to create a function, using OpenCV proxy's functions to accept multiple types of elements (inputArray, OutputArray, OutputArrayOfArrays).</p>\n\n<p>So far, I've found info on how to use InputArray and OutputArray, but not on OutputArrayOfArrays.</p>\n\n<p>I've made this code in order to test the result assignment to OutputArrayOfArrays, with no avail:</p>\n\n<pre><code>//Return 3 Mats, each one filled with a different primary color\nvoid rgb_mats(cv::OutputArrayOfArrays results){\n    cv::vector&lt;cv::Mat&gt; bgr;\n    cv::Mat B(100,100, CV_8UC3, cv::Scalar(255,0,0));\n    cv::Mat G(100,100, CV_8UC3, cv::Scalar(0,255,0));\n    cv::Mat R(100,100, CV_8UC3, cv::Scalar(0,0,255));\n    bgr.push_back(B);\n    bgr.push_back(G);\n    bgr.push_back(R);\n    cv::merge(bgr, results);\n}\n</code></pre>\n\n<p>And this fails with an OpenCV assertion:</p>\n\n<pre><code>OpenCV Error: Assertion failed (dims == 2 &amp;&amp; (sizes[0] == 1 || sizes[1] == 1 || sizes[0]*sizes[1] == 0)) in cv::_OutputArray::create, file C:\\opencv_code\\sources\\modules\\core\\src\\matrix.cpp, line 1564\n</code></pre>\n\n<p>I expected to get 3 cv::Mats, each with one different color, to later use the function like this:</p>\n\n<pre><code>cv::vector&lt;cv::Mat&gt; rgb_results;\nrgb_mats(rgb_results);\nassert(rgb_results.size() == 3);\n</code></pre>\n\n<p>I have searched the docs and I didn't find any example on how to return data with an OutputArrayofArrays.</p>\n\n<p>What I can change in my example in order to pass the assert?</p>\n"}, {"tags": ["c++", "templates", "typedef", "stdstring"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1526489711, "post_id": 50376244, "comment_id": 87768758, "body": "Even if <code>basic_string&lt;unsigned char&gt;</code> works, that doesn&#39;t mean all code out there written to use <code>basic_string&lt;char&gt;</code> will be compatible with it. Is there a particular reason you think there&#39;s supposed to be an <code>operator&lt;&lt;</code> that support this?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1526489761, "post_id": 50376244, "comment_id": 87768790, "body": "Where is <code>#include &lt;string&gt;</code>?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1526489861, "post_id": 50376244, "comment_id": 87768853, "body": "the correct usage is to use one of its specializations, eg <code>std::string</code> ;)"}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 1, "creation_date": 1526489889, "post_id": 50376244, "comment_id": 87768865, "body": "Hope for future. <a href=\"http://open-std.org/JTC1/SC22/WG21/docs/papers/2018/p0482r3.html\" rel=\"nofollow noreferrer\">open-std.org/JTC1/SC22/WG21/docs/papers/2018/p0482r3.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1526490157, "post_id": 50376375, "comment_id": 87769007, "body": "I disagree with switching to wide chars when your string chars have larger ranges than ASCII - unless you&#39;re stuck on Windows with its UTF-16 (?) obsession, I&#39;d instead recommend mentally dropping the byte/character association and storing UTF-8 on top of the bytes in a bog-standard <code>std::string</code>. Stream them to <code>std::cout</code> as usual and let the console/file viewer/whatever deal with the encoding. Downside of course being now you need a UTF-8 library for some string operations (where encoding awareness is a concern) \u2014 but that&#39;s almost trivial to solve."}, {"owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1526490199, "post_id": 50376375, "comment_id": 87769031, "body": "Good point. Related reading: <a href=\"http://utf8everywhere.org/\" rel=\"nofollow noreferrer\">UTF-8 Everywhere</a>"}, {"owner": {"reputation": 1152, "user_id": 4541974, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152538725216326/picture?type=large", "display_name": "Luis Cruz", "link": "https://stackoverflow.com/users/4541974/luis-cruz"}, "edited": false, "score": 0, "creation_date": 1526491639, "post_id": 50376375, "comment_id": 87769782, "body": "You are right, I think I need to switch to vector instead. Thanks for the tip."}], "tags": [], "owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "is_accepted": true, "score": 3, "last_activity_date": 1526490233, "last_edit_date": 1526490233, "creation_date": 1526489949, "answer_id": 50376375, "question_id": 50376244, "link": "https://stackoverflow.com/questions/50376244/using-basic-string-to-declare-a-new-type-of-string/50376375#50376375", "title": "Using basic_string to declare a new type of string", "body": "<p>Your <code>ustring</code> is not the problem - it's just that noone has told the compiler how to print a <code>ustring</code>. There is no general way to do this mostly because different character types may require different treatment (with regards to locale and encoding).</p>\n\n<p>To fix this, you would need to define your own <code>operator&lt;&lt;</code></p>\n\n<pre><code>typedef basic_string&lt;unsigned char&gt; ustring;\n\nostream&amp; operator&lt;&lt;(ostream&amp; stream, const ustring&amp; str)\n{\n    // Print your ustring into the ostream in whatever way you prefer\n    return stream;\n}\n</code></pre>\n\n<p>However, I do wonder what your use case for using <code>basic_string</code> here is. In my experience, byte sequences that don't directly translate into textual data is better served by an <code>std::vector&lt;uint8_t&gt;</code>, and strings with larger ranges than ASCII (if you cannot use UTF-8 for some reason) by an <code>std::wstring</code>. The former obviously does not have any direct output methods (you would again need to come up with something custom, but in that case it is far more obvious what is intended), and the latter supports outputting directly into <code>std::wcout</code> etc.</p>\n"}], "owner": {"reputation": 1152, "user_id": 4541974, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152538725216326/picture?type=large", "display_name": "Luis Cruz", "link": "https://stackoverflow.com/users/4541974/luis-cruz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "accepted_answer_id": 50376375, "answer_count": 1, "score": 0, "last_activity_date": 1526490233, "creation_date": 1526489517, "question_id": 50376244, "link": "https://stackoverflow.com/questions/50376244/using-basic-string-to-declare-a-new-type-of-string", "title": "Using basic_string to declare a new type of string", "body": "<p>What's the correct usage of std::basic_string? I am trying to re-declare the string type with an <strong>unsigned char</strong> type. </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    typedef basic_string&lt;unsigned char&gt; ustring;\n\n    unsigned char unsgndstring[] = {0xFF,0xF1};\n    ustring lol = unsgndstring;\n\n    cout &lt;&lt; lol &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>When I try the above code, I get:</p>\n\n<pre><code>main.cpp:25:10: error: no match for 'operator&lt;&lt;' (operand types are 'std::ostream {aka std::basic_ostream}' and 'ustring {aka std::basic_string}')\n     cout &lt;&lt; lol &lt;&lt; endl;\n          ^\n</code></pre>\n\n<p>Why am I getting that? What's the correct way to declare a new string type that can hold unsigned chars?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 2, "creation_date": 1526489309, "post_id": 50376167, "comment_id": 87768531, "body": "<code>But I do not know where to start</code> How about start writing some actual code? Then we can help you."}, {"owner": {"reputation": 3, "user_id": 9801522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/129efd2b28b1315fb4902e237d761be1?s=128&d=identicon&r=PG&f=1", "display_name": "Notail", "link": "https://stackoverflow.com/users/9801522/notail"}, "reply_to_user": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1526489809, "post_id": 50376167, "comment_id": 87768822, "body": "of course, i add my code"}, {"owner": {"reputation": 121, "user_id": 6114339, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-y1wXXlV69ZY/AAAAAAAAAAI/AAAAAAAAA7s/BmDcBas7lTk/photo.jpg?sz=128", "display_name": "fcooper8472", "link": "https://stackoverflow.com/users/6114339/fcooper8472"}, "edited": false, "score": 3, "creation_date": 1526490808, "post_id": 50376167, "comment_id": 87769358, "body": "I don&#39;t understand your question.  Can you give some step-by-step example of what you expect the output to be for a given input?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1526491360, "post_id": 50376167, "comment_id": 87769636, "body": "May I suggest operating on a <code>std::string</code>? It is much easier to remove characters from a <code>std::string</code> than a <code>char</code> array and there are functions in the <code>&lt;algorithm&gt;</code> library that can do what you want on a <code>std::string</code> in a couple lines of code."}, {"owner": {"reputation": 3, "user_id": 9801522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/129efd2b28b1315fb4902e237d761be1?s=128&d=identicon&r=PG&f=1", "display_name": "Notail", "link": "https://stackoverflow.com/users/9801522/notail"}, "edited": false, "score": 0, "creation_date": 1526494001, "post_id": 50376167, "comment_id": 87771028, "body": "I have number of decimal notation me need in this number of hex  notation, delete number  &lt; 5"}], "answers": [{"comments": [{"owner": {"reputation": 1509, "user_id": 4815767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc24bfa1708763d1853a48c6290fbcaa?s=128&d=identicon&r=PG", "display_name": "Popmedic", "link": "https://stackoverflow.com/users/4815767/popmedic"}, "reply_to_user": {"reputation": 3, "user_id": 9801522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/129efd2b28b1315fb4902e237d761be1?s=128&d=identicon&r=PG&f=1", "display_name": "Notail", "link": "https://stackoverflow.com/users/9801522/notail"}, "edited": false, "score": 0, "creation_date": 1526746777, "post_id": 50376763, "comment_id": 87869089, "body": "I took your code, made it work for your specifications, and you think the answer you can not understand is better?  I guess it is what I get for trying to help you :-("}], "tags": [], "owner": {"reputation": 1509, "user_id": 4815767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc24bfa1708763d1853a48c6290fbcaa?s=128&d=identicon&r=PG", "display_name": "Popmedic", "link": "https://stackoverflow.com/users/4815767/popmedic"}, "is_accepted": false, "score": 0, "last_activity_date": 1526746839, "last_edit_date": 1526746839, "creation_date": 1526491443, "answer_id": 50376763, "question_id": 50376167, "link": "https://stackoverflow.com/questions/50376167/decimal-to-hex-conversion/50376763#50376763", "title": "Decimal to hex conversion", "body": "<p>Maybe (total shot in the dark cause your question is quite unclear):</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{ \n    unsigned int x=10012;\n    char hexString[32];\n    char buf[32] = {};\n    sprintf(hexString, \"%x\", x);\n    cout&lt;&lt;\"Hex String: \"&lt;&lt;hexString&lt;&lt;endl;\n    for(int i=0, j=0;i&lt;strlen(hexString);i++)\n    {\n        // Convert from ASCII value to int\n        int a = hexString[i] - '0';\n        if(a &gt; 5)\n        {\n            buf[j] = hexString[i];\n            j++;\n        }\n    }\n    cout&lt;&lt;\"With nothing greater then five: \"&lt;&lt;buf&lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 9801522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/129efd2b28b1315fb4902e237d761be1?s=128&d=identicon&r=PG&f=1", "display_name": "Notail", "link": "https://stackoverflow.com/users/9801522/notail"}, "edited": false, "score": 0, "creation_date": 1526569463, "post_id": 50377572, "comment_id": 87805245, "body": "Sorry, can you explain in more detail why &quot;x &gt;&gt; 4&quot; and &quot;(x &gt;&gt; 4) &lt;&lt; 4) + x%16&quot;?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 3, "user_id": 9801522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/129efd2b28b1315fb4902e237d761be1?s=128&d=identicon&r=PG&f=1", "display_name": "Notail", "link": "https://stackoverflow.com/users/9801522/notail"}, "edited": false, "score": 0, "creation_date": 1526577004, "post_id": 50377572, "comment_id": 87809788, "body": "@Notail <code>x&gt;&gt;y</code> shifts <code>x</code> to the right <code>y</code> bits, making the number smaller. <code>0xA5 &gt;&gt; 4</code> will remove 4 bits, one nybble, resulting in 0x0A. &lt;&lt; shits left <code>0xA5 &lt;&lt; 4</code> will produce 0xA50, making room to insert a new nybble. Shift too far in either direction and bits fall off the end and are lost.<code>filter(x &gt;&gt; 4)</code> calls the <code>filter</code> function with one less nybble, so all <code>filter</code>ever has to look at is the least significant nybble. Less book-keeping."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 3, "user_id": 9801522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/129efd2b28b1315fb4902e237d761be1?s=128&d=identicon&r=PG&f=1", "display_name": "Notail", "link": "https://stackoverflow.com/users/9801522/notail"}, "edited": false, "score": 0, "creation_date": 1526577154, "post_id": 50377572, "comment_id": 87809855, "body": "<code>%</code> is the modulo operator. It gives the remainder in integer division. <code>x%16</code> divides <code>x</code> by 16 and returns the remainder. Hexidecimal numbers are base 16, so this is like dividing a base 10 number by 10 and keeping the remainder. It isolates the least significant digit. Eg: <code>0xA5 % 16</code> = <code>0xA5 % 0x10</code> = 0x05, so you isolate the least significant nybble. I will rewrite the question to make all of this more obvious."}, {"owner": {"reputation": 3, "user_id": 9801522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/129efd2b28b1315fb4902e237d761be1?s=128&d=identicon&r=PG&f=1", "display_name": "Notail", "link": "https://stackoverflow.com/users/9801522/notail"}, "edited": false, "score": 0, "creation_date": 1526577588, "post_id": 50377572, "comment_id": 87810058, "body": "what is &quot;nybble&quot;?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 3, "user_id": 9801522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/129efd2b28b1315fb4902e237d761be1?s=128&d=identicon&r=PG&f=1", "display_name": "Notail", "link": "https://stackoverflow.com/users/9801522/notail"}, "edited": false, "score": 0, "creation_date": 1526578313, "post_id": 50377572, "comment_id": 87810369, "body": "@Notail A nybble is 4 bits, one hex digit."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 0, "last_activity_date": 1526578275, "last_edit_date": 1526578275, "creation_date": 1526494543, "answer_id": 50377572, "question_id": 50376167, "link": "https://stackoverflow.com/questions/50376167/decimal-to-hex-conversion/50377572#50377572", "title": "Decimal to hex conversion", "body": "<p>A different way of thinking about the problem: Don't use strings at all.</p>\n\n<pre><code>unsigned int filter(unsigned int x)\n{\n    if(x &lt; 5) // no more digits worth keeping. Time to head back and collect results.\n    {\n        return 0;\n    }\n    if (x%16 &lt; 5) // exclude this digit\n    {\n        return filter(x &gt;&gt; 4); // return what we already have collected\n    }\n    else //include this number\n    {\n        return (filter(x &gt;&gt; 4) &lt;&lt; 4) + x%16; // make room, collect digit.\n    }\n}\n</code></pre>\n\n<p><code>filter</code> will call itself with one less digit (the least significant digit is removed) until there are no digits left worth collecting. Each call to filter looks at the least significant digit and decides to keep it by adding it to the end of the number that's been accumulated on the way back or reject it. </p>\n\n<p>More obvious (and should be just as fast once optimized)</p>\n\n<pre><code>unsigned int filter(unsigned int x)\n{\n    if (x &lt; 5) // no more digits worth keeping. Time to head back and collect results.\n    {\n        return 0;\n    }\n    unsigned int digit = x % 0x10; // isolate least significant hex digit\n    unsigned int remaining = x / 0x10; // remove least significant hex digit\n    unsigned int collected = filter(remaining); //process remaining input\n    if (digit &gt;= 5) // collect this digit\n    {\n        collected = collected * 0x10 + digit; // make room and add digit.\n    }\n    return collected;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9801522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/129efd2b28b1315fb4902e237d761be1?s=128&d=identicon&r=PG&f=1", "display_name": "Notail", "link": "https://stackoverflow.com/users/9801522/notail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 50377572, "answer_count": 2, "score": -6, "last_activity_date": 1526746839, "creation_date": 1526489267, "last_edit_date": 1526490109, "question_id": 50376167, "link": "https://stackoverflow.com/questions/50376167/decimal-to-hex-conversion", "title": "Decimal to hex conversion", "body": "<p>I need to write the following program:\nI have a long non-negative integer is given(4 byte). Delete from the hexadecimal digit less than 5.\nBut I do not know where to start.\nMy code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main()\n{ \n    unsigned int x=10012;\n    char hexString[32];\n    cout&lt;&lt;hex&lt;&lt;x&lt;&lt;endl;\n    itoa(x,hexString,16);\n    cout&lt;&lt;hexString;\n    for(int i=0;i&lt;strlen(hexString);i++)\n    {\n        int a = hexString[i];\n        if(a &lt; 5)\n        {\n            for(int j=i;j&lt;strlen(hexString)-1;j++)\n                hexString[j] = hexString[j+1];\n                i--;\n        }\n    }\n    cout&lt;&lt;hexString;\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["java", "c++", "iterator", "set", "hashset"], "comments": [{"owner": {"reputation": 42640, "user_id": 1553851, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/ad333c218c8f2fb917cf506919fc95f4?s=128&d=identicon&r=PG", "display_name": "shmosel", "link": "https://stackoverflow.com/users/1553851/shmosel"}, "edited": false, "score": 0, "creation_date": 1526489423, "post_id": 50376143, "comment_id": 87768581, "body": "It&#39;s not very clear from the question what exactly you&#39;re trying to do. Please elaborate."}, {"owner": {"reputation": 3831, "user_id": 7134058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d956dd67648da8884307f68fa917b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Vadim", "link": "https://stackoverflow.com/users/7134058/vadim"}, "edited": false, "score": 2, "creation_date": 1526489606, "post_id": 50376143, "comment_id": 87768694, "body": "Yes there is basic error. In Java you cannot add or delete elements into/from Collection (HashSet is one of it) while iterating through it. It throws Concurrent Modification Exception."}, {"owner": {"reputation": 42640, "user_id": 1553851, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/ad333c218c8f2fb917cf506919fc95f4?s=128&d=identicon&r=PG", "display_name": "shmosel", "link": "https://stackoverflow.com/users/1553851/shmosel"}, "reply_to_user": {"reputation": 3831, "user_id": 7134058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d956dd67648da8884307f68fa917b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Vadim", "link": "https://stackoverflow.com/users/7134058/vadim"}, "edited": false, "score": 0, "creation_date": 1526489931, "post_id": 50376143, "comment_id": 87768890, "body": "@Vadim Not necessarily. Depends on the collection type, iterator type, and how you&#39;re adding."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1526491059, "post_id": 50376143, "comment_id": 87769488, "body": "A note on the C++ code. Don&#39;t feel bad if you have trouble reading it. It follows idioms that reduce readability and portability are not recommended for professional programming. Learn what you can from the algorithm, but don&#39;t write code like this."}], "answers": [{"tags": [], "owner": {"reputation": 7601, "user_id": 329082, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f7e46f4be3566d2740ccaf4a98983935?s=128&d=identicon&r=PG", "display_name": "Victor", "link": "https://stackoverflow.com/users/329082/victor"}, "is_accepted": false, "score": 0, "last_activity_date": 1526491369, "creation_date": 1526491369, "answer_id": 50376745, "question_id": 50376143, "link": "https://stackoverflow.com/questions/50376143/how-to-iterate-over-a-growing-set-in-java/50376745#50376745", "title": "how to iterate over a growing set in java", "body": "<p>You should not reimplement it. You can use Java Streams, they have already implement it.</p>\n\n<p>This is just an example:</p>\n\n<pre><code>Integer maxNumber = Stream.of(1, 2, 3, 4, 5, 6, 7, 8, 9)\n                    .max(Comparator.comparing(Integer::valueOf)).get();\nInteger minNumber = Stream.of(1, 2, 3, 4, 5, 6, 7, 8, 9)\n                    .min(Comparator.comparing(Integer::valueOf)).get();\n\nSystem.out.println(\"maxNumber = \" + maxNumber);\nSystem.out.println(\"minNumber = \" + minNumber);\n</code></pre>\n\n<p>To create an Stream from a Set:</p>\n\n<pre><code>Set&lt;Integer&gt; s = ...\nInteger max = s.stream().max(Comparator.comparing(Integer::valueOf)).get();\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 5076337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39d3138cdd48afc2808bf71437f9482a?s=128&d=identicon&r=PG&f=1", "display_name": "Paul92", "link": "https://stackoverflow.com/users/5076337/paul92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1526491369, "creation_date": 1526489200, "last_edit_date": 1526489382, "question_id": 50376143, "link": "https://stackoverflow.com/questions/50376143/how-to-iterate-over-a-growing-set-in-java", "title": "how to iterate over a growing set in java", "body": "<p>I have some code in c++ in which a set is iterated which is growing with each loop.</p>\n\n<p>Sample c++ code is as below.\nHow can I write the same code in java?</p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\n\n#define tr(c,i) for(auto i=(c).begin(); i != (c).end(); i++)\n#define rep(i,n) for(int i=0;i&lt;(n);i++)\n#define forup(i,a,b) for(int i=(a);i&lt;=(b);i++)\n#define tcsolve() int tcs; cin &gt;&gt; tcs; forup(tc, 1, tcs) solve();\n\nvoid solve() {\n    int n, k, t, ans;\n    cin &gt;&gt; n &gt;&gt; k;\n    set&lt;int&gt; s, w;\n    rep (i, n) {\n        cin &gt;&gt; t;\n        s.insert(t);\n    }\n    ans = k;\n    w.insert(k);\n    tr(s, i) {\n        tr(w, j) {\n            int x = *i^*j;\n            ans = max(ans, x);\n            w.insert(x);\n        }\n    }\n    cout &lt;&lt; ans &lt;&lt; endl;\n}\n\nint main () {\n    std::ios::sync_with_stdio(false);\n    tcsolve();\n    return 0;\n}\n</code></pre>\n\n<p>I want to do the same thing in java</p>\n\n<pre><code>tr(w, j) {\n    int x = *i^*j;\n    ans = max(ans, x);\n    w.insert(x);\n}\n</code></pre>\n\n<p>How can I do this?</p>\n\n<p>My solution is something like this</p>\n\n<pre><code>static int findMaximum(Set&lt;Integer&gt; set, int k) \n    {\n        int ans = k;\n        Set&lt;Integer&gt; temp = new HashSet&lt;&gt;();\n\n        temp.add(k);\n\n        Iterator&lt;Integer&gt; iter_i = set.iterator();\n        Iterator&lt;Integer&gt; iter_j = temp.iterator();\n\n        int i,j=0;\n        while(iter_i.hasNext())\n        {\n            i = (int)iter_i.next();\n            while(iter_j.hasNext())\n            {\n                j = (int)iter_j.next();\n                int x = i^j;\n                ans = Integer.max(ans, x);\n                temp.add(x);\n            }\n            System.out.println(\"temp: \" +temp);\n            System.out.println(\"i: \" + i +\" j: \" +j);\n        }\n\n        return ans;\n\n    }\n</code></pre>\n\n<p>But my actual answer is</p>\n\n<pre><code>temp: [4, 5]\ni: 1 j: 4\ntemp: [4, 5]\ni: 2 j: 4\ntemp: [4, 5]\ni: 3 j: 4\n5\n</code></pre>\n\n<p>while in the correct solution the set should increase with the return value of the method as <code>7</code></p>\n\n<p>Please point out if there is any other error in my problem</p>\n"}, {"tags": ["c++", "data-structures", "return", "binary-search-tree"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 2, "creation_date": 1526489026, "post_id": 50376046, "comment_id": 87768388, "body": "&quot;I wrote this piece of code and it works&quot; -&gt; &quot;I wrote this piece of code and it <i>appears to work</i>&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": false, "score": 4, "last_activity_date": 1526489201, "last_edit_date": 1526489201, "creation_date": 1526489036, "answer_id": 50376100, "question_id": 50376046, "link": "https://stackoverflow.com/questions/50376046/how-is-the-data-returned-to-main/50376100#50376100", "title": "How is the data returned to main?", "body": "<p>The code has Undefined Behaviour, so it works by accident. It's illegal in C++ for control flow to reach the end of a non-<code>void</code> function without returning a value (<code>main</code> is the only exception).</p>\n\n<p>Note that you should always compile your code with warnings enabled, in which case this would have been flagged by the compiler.</p>\n\n<hr>\n\n<p>What <em>may</em> be happening is that the return value gets stored in a register (normally <code>eax</code>, I believe) by the most nested call, and since the other calls don't actually execute a <code>return</code>, they don't overwrite it. However, do note that this is pure speculation and could change with a different compiler, different compilation flags etc. <em>Undefined behaviour is undefined</em> and can never be relied upon.</p>\n"}, {"comments": [{"owner": {"reputation": 91, "user_id": 4674433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b26dd155d8a1de186dc472494e6fde?s=128&d=identicon&r=PG&f=1", "display_name": "Naruto Uzumaki", "link": "https://stackoverflow.com/users/4674433/naruto-uzumaki"}, "edited": false, "score": 0, "creation_date": 1526489832, "post_id": 50376149, "comment_id": 87768835, "body": "So, one of the solution is adding <code>return</code> in <code>min(root-&gt;left)</code>?"}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "reply_to_user": {"reputation": 91, "user_id": 4674433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b26dd155d8a1de186dc472494e6fde?s=128&d=identicon&r=PG&f=1", "display_name": "Naruto Uzumaki", "link": "https://stackoverflow.com/users/4674433/naruto-uzumaki"}, "edited": false, "score": 0, "creation_date": 1526489956, "post_id": 50376149, "comment_id": 87768902, "body": "@NarutoUzumaki That&#39;s exactly what you should be doing. Personally, I would also get rid of that final else. so that all code paths  have a return statement. The official rule is &quot;every <b>reachable</b> code path of a non-void function must lead to a valid return statement&quot;, but applying the rule to all code paths, reachable or not, is cleaner."}], "tags": [], "owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "is_accepted": false, "score": 2, "last_activity_date": 1526490611, "last_edit_date": 1526490611, "creation_date": 1526489222, "answer_id": 50376149, "question_id": 50376046, "link": "https://stackoverflow.com/questions/50376046/how-is-the-data-returned-to-main/50376149#50376149", "title": "How is the data returned to main?", "body": "<p>This code contains undefined behavior, so from a language-lawyer perspective, it's sheer luck that it works.</p>\n\n<p>In practice, what is most likely happening (on X86 architectures) is that the <code>min()</code> function stores the result in the <code>eax</code> register.</p>\n\n<p>Since the function does nothing at all after recursively invoking itself, the <code>eax</code> register is left in whatever state the called function left it, and that implicitly becomes the result of the function itself.</p>\n\n<p>In short, <code>min(root-&gt;left);</code> gets compiled exactly as if it was <code>return min(root-&gt;left);</code> out of sheer luck.</p>\n\n<p><strong>Edit</strong>:</p>\n\n<p>An additional note: Your function is written in a way that allows for something called <strong>tail recursion</strong>, which may or may not be coming into play here. In any case, you should never rely on that behavior anyways.</p>\n"}, {"comments": [{"owner": {"reputation": 91, "user_id": 4674433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b26dd155d8a1de186dc472494e6fde?s=128&d=identicon&r=PG&f=1", "display_name": "Naruto Uzumaki", "link": "https://stackoverflow.com/users/4674433/naruto-uzumaki"}, "edited": false, "score": 0, "creation_date": 1526489696, "post_id": 50376197, "comment_id": 87768749, "body": "The compiler didn&#39;t issued any warnings about this. I compiled it using this command:   <code>g++ file.cpp -o main</code>.   I&#39;m using Windows Subsystem for Linux (Ubuntu)."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 91, "user_id": 4674433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b26dd155d8a1de186dc472494e6fde?s=128&d=identicon&r=PG&f=1", "display_name": "Naruto Uzumaki", "link": "https://stackoverflow.com/users/4674433/naruto-uzumaki"}, "edited": false, "score": 1, "creation_date": 1526489776, "post_id": 50376197, "comment_id": 87768801, "body": "@NarutoUzumaki: you should always add <code>-Wall</code> when you compile, i.e.  <code>g++ -Wall file.cpp -o main</code> - otherwise you won&#39;t get helpful compiler warnings. Try it with the code above and you will see how much time this might have saved you !"}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1526491081, "post_id": 50376197, "comment_id": 87769503, "body": "But it is actually strange that default gcc did not complain at all."}], "tags": [], "owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "is_accepted": false, "score": 0, "last_activity_date": 1526489382, "creation_date": 1526489382, "answer_id": 50376197, "question_id": 50376046, "link": "https://stackoverflow.com/questions/50376046/how-is-the-data-returned-to-main/50376197#50376197", "title": "How is the data returned to main?", "body": "<p>Did you actually mean \"and it [accidentally] works [on the test data I tried]?\" For, to make it work, the last branch should read <code>else return min(root-&gt;left);</code> Did your compiler issued any warnings about possible control paths with no <code>return</code>?</p>\n"}], "owner": {"reputation": 91, "user_id": 4674433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b26dd155d8a1de186dc472494e6fde?s=128&d=identicon&r=PG&f=1", "display_name": "Naruto Uzumaki", "link": "https://stackoverflow.com/users/4674433/naruto-uzumaki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1526490611, "creation_date": 1526488847, "last_edit_date": 1526489222, "question_id": 50376046, "link": "https://stackoverflow.com/questions/50376046/how-is-the-data-returned-to-main", "title": "How is the data returned to main?", "body": "<p>I wrote this piece of code and it appears to work but when I re-analyze it, I wonder how the data (minimum) is returned to the main function?<br>\nGiven this binary tree:  </p>\n\n<pre><code>           17\n       14      19\n    12       18  20\n       13          21\n</code></pre>\n\n<p>And this code:</p>\n\n<pre><code>struct Node {\n   int data;\n   Node* left;\n   Node* right;\n};\n\nint min(Node* root) {\n   if(root == NULL)\n      return 0;\n   else if(root-&gt;left == NULL)\n      return root-&gt;data;\n   else\n      min(root-&gt;left);\n}\n</code></pre>\n\n<p>The last calling to <code>min(Node*)</code> will return <code>root-&gt;data</code> but the caller has no <code>return</code> in <code>min(root-&gt;left)</code>. All the <code>return</code>s are already been skipped in the previous <code>min(Node*)</code>.</p>\n"}, {"tags": ["c++", "qt", "qjson", "qjsonobject"], "answers": [{"tags": [], "owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "is_accepted": true, "score": 3, "last_activity_date": 1526502753, "last_edit_date": 1526502753, "creation_date": 1526488686, "answer_id": 50376006, "question_id": 50375846, "link": "https://stackoverflow.com/questions/50375846/append-qjsonobjects-in-a-qjsonarray/50376006#50376006", "title": "append QJsonObjects in a QJsonArray", "body": "<p>You are creating <code>QJsonArray listArray;</code> as local variable inside the method, thus the array variable is destroyed after each call to the method and each object is being stored in separate new array, you have to create the array outside the method so that it persists over all calls, then add objects to it and update the document.</p>\n\n<pre><code>QJsonArray listArray;\n\nvoid List::insertDefect()\n....\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 8418479, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PPmfsSGRpUA/AAAAAAAAAAI/AAAAAAAAFVs/JkzE5Hx76f0/photo.jpg?sz=128", "display_name": "user user", "link": "https://stackoverflow.com/users/8418479/user-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2031, "favorite_count": 0, "accepted_answer_id": 50376006, "answer_count": 1, "score": 2, "last_activity_date": 1526502753, "creation_date": 1526488099, "question_id": 50375846, "link": "https://stackoverflow.com/questions/50375846/append-qjsonobjects-in-a-qjsonarray", "title": "append QJsonObjects in a QJsonArray", "body": "<p>I am trying to create a json file in which i insert QjsonObjects in an only one QJsonArray,what i get is every QjsonObject is in an independent QJsonArray but i want them to be in the same array.</p>\n\n<p>this function is called every time a save button is clicked,and that's how my QJsonObjects are created.</p>\n\n<pre><code>void List::insertDefect(const QString &amp;parentDefect,const QString &amp;defect,const QString &amp;positions)const{\n    QString filename =createListDefect();\n    QFile file(filename);\n    file.open(QIODevice::Append | QIODevice::Text);\n    QJsonObject defectObject;\n    defectObject.insert(\"parentDefect\", QJsonValue::fromVariant(parentDefect));\n    defectObject.insert(\"defect\", QJsonValue::fromVariant(defect));\n    defectObject.insert(\"positions\", QJsonValue::fromVariant(positions));\n    QJsonArray listArray;\n    listArray.push_back(defectObject);\n    QJsonDocument doc(listArray);\n    file.write(doc.toJson(QJsonDocument::Indented));}\n</code></pre>\n\n<p>and here is an example of a generated json file :</p>\n\n<pre><code>[\n    {\n        \"defect\": \"MISSING, DAMAGED\",\n        \"parentDefect\": \"SEAT BELTS\",\n        \"positions\": \"F | RB | \"\n    }\n]\n[\n    {\n        \"defect\": \"RIGIDITY,CORROSION,DISTORTION\",\n        \"parentDefect\": \"CHASSIS OR SUB-FRAME\",\n        \"positions\": \"B | RC | RB | \"\n    }\n]\n</code></pre>\n\n<p>and i am trying to make it look like this :</p>\n\n<pre><code>[\n    {\n        \"defect\": \"MISSING, DAMAGED\",\n        \"parentDefect\": \"SEAT BELTS\",\n        \"positions\": \"F | RB | \"\n    },\n\n\n    {\n        \"defect\": \"RIGIDITY,CORROSION,DISTORTION\",\n        \"parentDefect\": \"CHASSIS OR SUB-FRAME\",\n        \"positions\": \"B | RC | RB | \"\n    }\n]\n</code></pre>\n"}, {"tags": ["javascript", "html", "c++", "qt", "qwebview"], "comments": [{"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 0, "creation_date": 1526488234, "post_id": 50375762, "comment_id": 87768010, "body": "have you checked c++ <code>QJSEngine</code>"}, {"owner": {"reputation": 6147, "user_id": 3767076, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/64707b213de57fb785081ba23aaea2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3767076/felix"}, "edited": false, "score": 0, "creation_date": 1526509507, "post_id": 50375762, "comment_id": 87777694, "body": "You can try to include the &quot;qwebchanne.js&quot; file directly as shown in the QWebChannel examples."}, {"owner": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "reply_to_user": {"reputation": 6147, "user_id": 3767076, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/64707b213de57fb785081ba23aaea2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3767076/felix"}, "edited": false, "score": 0, "creation_date": 1526522428, "post_id": 50375762, "comment_id": 87780436, "body": "@Felix, <code>qwebchannel.js</code> works as mentioned in the 2nd part of the Qn. But, it uses JSON. We want to avoid JSON due to its over descriptive nature. Because lots of text will be passed over internet, if the GUI/JavaScript &amp; client/C++ are separated by wire. Were you suggesting something else?"}], "answers": [{"comments": [{"owner": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "edited": false, "score": 0, "creation_date": 1526528590, "post_id": 50382736, "comment_id": 87781622, "body": "Yes as mentioned in the Qn. The default way is to use Qt provided custom JSON way. Since lots of function calling is involved, json is expensive over internet. We want to find another Qt way or trick to determine better alternatives except JSON. Still I upvoted for efforts. :-)"}, {"owner": {"reputation": 173, "user_id": 1856327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0c0fa5daef70043738b980a7fbb9785?s=128&d=identicon&r=PG", "display_name": "Guru_07", "link": "https://stackoverflow.com/users/1856327/guru-07"}, "reply_to_user": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "edited": false, "score": 0, "creation_date": 1526530385, "post_id": 50382736, "comment_id": 87782027, "body": "@iammilind: The above answer provides an alternate way; Transmission over the wire will not be json but the Protobuf /custom protocol, as may be needed"}], "tags": [], "owner": {"reputation": 173, "user_id": 1856327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0c0fa5daef70043738b980a7fbb9785?s=128&d=identicon&r=PG", "display_name": "Guru_07", "link": "https://stackoverflow.com/users/1856327/guru-07"}, "is_accepted": false, "score": 3, "last_activity_date": 1526530192, "last_edit_date": 1526530192, "creation_date": 1526526166, "answer_id": 50382736, "question_id": 50375762, "link": "https://stackoverflow.com/questions/50375762/how-to-communicate-between-html-javascript-and-c-in-qt-webchannel-in-platform/50382736#50382736", "title": "How to communicate between HTML/Javascript and C++ in Qt WebChannel in platform independent way?", "body": "<p>With QWebChannel to communicate between C++ and HTML/JS, Qt currently, uses JSON to transport event invocation/data (see <a href=\"http://doc.qt.io/qt-5/qwebchannelabstracttransport.html\" rel=\"nofollow noreferrer\">QWebChannelAbstractTransport</a> &amp; <a href=\"https://doc.qt.io/qt-5.10/qtwebengine-webenginewidgets-markdowneditor-resources-qwebchannel-js.html\" rel=\"nofollow noreferrer\">QWebChannel.js</a>). Over the internet, JSON when compared to Google Protobuf, may be having a overhead of sending field names but this should be negligible compared to 'No data (strings/text) optimization\" in either protocols. </p>\n\n<p><em>Is there any optimised and platform agnostic way of calling HTML/Javascript from C++ in Qt?</em></p>\n\n<p>The optimized way would be for Qt to provide string/bytes (<em>instead of QJsonObject</em>) in QWebChannelAbstractTransport and JS (both the connection ends) so that we can use custom protocols for transport. </p>\n\n<p>A work around/alternate solution (may not be the optimized way) would be to use the current abstraction to transport using Protobuf/custom protocol like here:</p>\n\n<p>Refer to <a href=\"http://doc.qt.io/qt-5/qtwebchannel-examples.html\" rel=\"nofollow noreferrer\">Qt WebChannel Examples</a></p>\n\n<pre><code>    In websockettransport.cpp (shared folder in examples)\n        C++\n\n        void WebSocketTransport::sendMessage(const QJsonObject &amp;message)\n        // Convert message from QJsonObject to Protobuf/custom protocol and\n        // use m_socket-&gt;sendTextMessage or sendBinaryMessage as required\n\n\n        void WebSocketTransport::textMessageReceived(const QString &amp;messageData)\n        //with QWebSocket::binary[ or text]MessageReceived slot, \n        //convert the message from client (in Protobuf/custom protocol) to \n        //JSON and still\n        emit messageReceived(message.object(), this); \n</code></pre>\n\n<p>JS:\nSimilarly, since the QWebChannel.js uses socket, need to set the socket to binary or text as required and convert the ProtoBuf/custom protocol message to json as needed by Qt</p>\n\n<p>Simple illustration on using Protobuf (needs all messages to be predefined)/custom protocol in QWebchannel:</p>\n\n<p>C++ -> WebSocketTransport (JSON to Protobuf/custom protocol) -> <strong>transmit</strong> -> websocket JS (Protobuf/custom protocol to JSON) -> (QWebChannel.js)</p>\n\n<p>JS -> (QWebChannel.js) -> websocket JS (JSON to Protobuf/custom protocol) -> <strong>transmit</strong> -> WebSocketTransport (Protobuf/custom protocol to JSON) -> C++</p>\n\n<p><em>Note: JS works on objects (from JSON or any protocol) and may not need conversion as said above; but this needs to be determined.</em></p>\n"}], "owner": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1424, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1526530192, "creation_date": 1526487811, "question_id": 50375762, "link": "https://stackoverflow.com/questions/50375762/how-to-communicate-between-html-javascript-and-c-in-qt-webchannel-in-platform", "title": "How to communicate between HTML/Javascript and C++ in Qt WebChannel in platform independent way?", "body": "<p>For desktops (Windows, Mac, Ubuntu), there is a <code>QWebEngineView</code> and for mobiles (Android, iOS), there is a native <code>QWebView</code>.  </p>\n\n<p>Unfortunately, <a href=\"https://forum.qt.io/topic/69487/android-please-add-qwebengineview/3\" rel=\"nofollow noreferrer\">mobiles don't support <code>QWebEngineView</code></a>.<br>\nFor example, as discussed in below post:<br>\n<a href=\"https://stackoverflow.com/q/28565254/514235\">How to use Qt WebEngine and QWebChannel?</a><br>\nThe <code>setWebChannel()</code> is available in <code>QWebEnginePage</code> which is accessible only in <code>QWebEngineView</code>. However, <code>QWebPage</code> doesn't have such method which is accessible in <code>QWebView</code>.  </p>\n\n<p>Now, there is another platform independent way, which works on all the platforms, as discussed in <a href=\"http://doc.qt.io/qt-5/topics-web-content.html\" rel=\"nofollow noreferrer\">Integrating Web Content</a>.<br>\nBut the example uses <a href=\"http://doc.qt.io/qt-5/qwebchannelabstracttransport.html\" rel=\"nofollow noreferrer\"><code>QWebChannelAbstractTransport</code></a>, which can be used only with <code>JSON</code>. Now JSON, due to its over-descriptive nature, could be quite expensive, if the C++ module is sitting somewhere in server and HTML is local; i.e. real client-server communication over internet.<br>\nIt would have been better, had they use protobuf.</p>\n\n<p>Is there any optimised and platform agnostic way of calling HTML/Javascript from C++ in Qt?  </p>\n\n<p><sub>[Note: BTW, current Qt way of calling C++ from Javascript is quite handy using <code>channel.objects</code> and I would like to retain that way.]</sub></p>\n"}, {"tags": ["c++", "opengl", "memory", "graphics", "textures"], "comments": [{"owner": {"reputation": 11800, "user_id": 1594913, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tLf29.jpg?s=128&g=1", "display_name": "JBL", "link": "https://stackoverflow.com/users/1594913/jbl"}, "edited": false, "score": 0, "creation_date": 1526488204, "post_id": 50375686, "comment_id": 87767995, "body": "Maybe you could try to query the available memory through something like <code>GL_GPU_MEM_INFO_CURRENT_AVAILABLE_MEM_NVX</code> (assuming you&#39;re using an Nvidia gpu) and compare with what you&#39;re requesting. <a href=\"https://www.khronos.org/registry/OpenGL/extensions/NVX/NVX_gpu_memory_info.txt\" rel=\"nofollow noreferrer\">khronos.org/registry/OpenGL/extensions/NVX/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "edited": false, "score": 0, "creation_date": 1526577309, "post_id": 50385807, "comment_id": 87809924, "body": "There is no difference in the ouptut in between having 512 and 1024 as the texture&#39;s width, height, depth.  WIth 512, it works on my current computer, with 1024, it&#39;s porbably too large. But querying the system with your method displays 7729 mb out of 8192 in both cases."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "reply_to_user": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "edited": false, "score": 0, "creation_date": 1526578947, "post_id": 50385807, "comment_id": 87810708, "body": "@Makogan it depends on HW and SW GL implementation how the texture is handled internally and <b>how big block of memory</b> it needs. I do not see inside GPU memory management however so I can not help further other than that not whole memory is suited for textures ...  For example Win32 memory manager has problems with single chunk above 1.2GB  even if there is enough free memory so I suspect on GPU you might hitting similar limitations"}], "tags": [], "owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "is_accepted": true, "score": 1, "last_activity_date": 1526571395, "last_edit_date": 1526571395, "creation_date": 1526542477, "answer_id": 50385807, "question_id": 50375686, "link": "https://stackoverflow.com/questions/50375686/3d-texture-size-affecting-program-output-without-error-being-thrown/50385807#50385807", "title": "3D texture size affecting program output without error being thrown", "body": "<p>Yep the 303 texture is ~1.2GByte if I compute it correctly. Your gfx card however also need memory for framebuffer and other stuff too. Sadly there is no common GL API to query available memory. There are extensions for this however. This is how I query basic info in my <strong>OpenGL</strong> engine (<strong>VCL/C++</strong>):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>AnsiString OpenGLscreen::glinfo()\n    {\n    AnsiString txt=\"\";\n    txt+=glGetAnsiString(GL_VENDOR)+\"\\r\\n\";\n    txt+=glGetAnsiString(GL_RENDERER)+\"\\r\\n\";\n    txt+=\"OpenGL ver: \"+glGetAnsiString(GL_VERSION)+\"\\r\\n\";\n    if (ext_is_supported(\"GL_NVX_gpu_memory_info\"))\n        {\n        GLint x,y,z;\n        x=0; glGetIntegerv(GL_GPU_MEMORY_INFO_CURRENT_AVAILABLE_VIDMEM_NVX,&amp;x);\n        y=0; glGetIntegerv(GL_GPU_MEMORY_INFO_DEDICATED_VIDMEM_NVX,&amp;y);\n        z=0; glGetIntegerv(GL_GPU_MEMORY_INFO_TOTAL_AVAILABLE_MEMORY_NVX,&amp;z);\n        txt+=AnsiString().sprintf(\"GPU memory: %i/%i/%i MByte\\r\\n\",x&gt;&gt;10,y&gt;&gt;10,z&gt;&gt;10); // GPU free/GPU total/GPU+CPU shared total\n        x=0; glGetIntegerv(GL_GPU_MEMORY_INFO_EVICTION_COUNT_NVX,&amp;x);\n        y=0; glGetIntegerv(GL_GPU_MEMORY_INFO_EVICTED_MEMORY_NVX,&amp;y);\n        txt+=AnsiString().sprintf(\"GPU blocks: %i used: %i MByte\\r\\n\",x,y&gt;&gt;10);\n        }\n    if (ext_is_supported(\"GL_ATI_meminfo\"))\n        {\n        GLint x0,x1,x2,x3; // free,largest available block,free auxiliary, largest available auxiliary\n        x0=0; glGetIntegerv(GL_VBO_FREE_MEMORY_ATI,&amp;x0);\n        x1=0; glGetIntegerv(GL_VBO_FREE_MEMORY_ATI,&amp;x1);\n        x2=0; glGetIntegerv(GL_VBO_FREE_MEMORY_ATI,&amp;x2);\n        x3=0; glGetIntegerv(GL_VBO_FREE_MEMORY_ATI,&amp;x3);\n        txt+=AnsiString().sprintf(\"VBO memory: %i MByte\\r\\n\",x0&gt;&gt;10);\n        x0=0; glGetIntegerv(GL_TEXTURE_FREE_MEMORY_ATI,&amp;x0);\n        x1=0; glGetIntegerv(GL_TEXTURE_FREE_MEMORY_ATI,&amp;x1);\n        x2=0; glGetIntegerv(GL_TEXTURE_FREE_MEMORY_ATI,&amp;x2);\n        x3=0; glGetIntegerv(GL_TEXTURE_FREE_MEMORY_ATI,&amp;x3);\n        txt+=AnsiString().sprintf(\"TXR memory: %i MByte\\r\\n\",x0&gt;&gt;10);\n        x0=0; glGetIntegerv(GL_RENDERBUFFER_FREE_MEMORY_ATI,&amp;x0);\n        x1=0; glGetIntegerv(GL_RENDERBUFFER_FREE_MEMORY_ATI,&amp;x1);\n        x2=0; glGetIntegerv(GL_RENDERBUFFER_FREE_MEMORY_ATI,&amp;x2);\n        x3=0; glGetIntegerv(GL_RENDERBUFFER_FREE_MEMORY_ATI,&amp;x3);\n        txt+=AnsiString().sprintf(\"BUF memory: %i MByte\\r\\n\",x0&gt;&gt;10);\n        }\n    return txt;\n    }\n</code></pre>\n\n<p>So extract the <strong>nVidia</strong> and <strong>ATI/AMD</strong> memory queries. and port to your environment.</p>\n"}], "owner": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 50385807, "answer_count": 1, "score": 2, "last_activity_date": 1526571395, "creation_date": 1526487557, "last_edit_date": 1526493036, "question_id": 50375686, "link": "https://stackoverflow.com/questions/50375686/3d-texture-size-affecting-program-output-without-error-being-thrown", "title": "3D texture size affecting program output without error being thrown", "body": "<p>First, I am using the <code>glDebugMessage()</code> instead of <code>glGetError()</code> to determine errors.</p>\n\n<p>Second, I am allocating a 3D texture storage as follows:</p>\n\n<pre><code>glTexImage3D(GL_TEXTURE_3D, 0, GL_RGBA32F, 512, 512, 303, 0, GL_RGBA, GL_FLOAT, NULL);\n</code></pre>\n\n<p>When the depth coponent is 303 or less, my program works exactly as expected (I allocate a color in the texture and I see that color as output), when that parameter is 304 or higher, the program doesn't work (the screen is black).</p>\n\n<p>I have tested the same program in different machines, and depending on the computer the treshhold changes, sometimes it's higher, sometimes lower.</p>\n\n<p>My hypothesis is then that some drivers cannot allocate enough memory to handle this texture. But no error is being thrown, or at least, the debug message is not getting called.</p>\n\n<p>Is there a way I can verify that I am indeed requesting more memory than can be allocated and extend said memory somehow?</p>\n"}, {"tags": ["c++", "copy-constructor", "move-constructor"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 4, "creation_date": 1526486789, "post_id": 50375451, "comment_id": 87767250, "body": "Can you shorten your example? I can&#39;t believe all those lines are relevant."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1526486962, "post_id": 50375451, "comment_id": 87767335, "body": "I&#39;m currious, why build with <code>-fno-elide-constructors</code>?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1526487043, "post_id": 50375451, "comment_id": 87767380, "body": "Did you build with optimizations enabled or not? That <i>might</i> affect whether the compiler chooses to move or copy - just a guess, but worth testing I think."}, {"owner": {"reputation": 38927, "user_id": 279313, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4ab0299c28ce807a9ca21041ed6ef085?s=128&d=identicon&r=PG", "display_name": "Alex F", "link": "https://stackoverflow.com/users/279313/alex-f"}, "edited": false, "score": 0, "creation_date": 1526487200, "post_id": 50375451, "comment_id": 87767458, "body": "<code>return *up</code> line calls copy constructor. See also: RVO."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1526487214, "post_id": 50375451, "comment_id": 87767465, "body": "<code>return *up</code> must make a copy - <code>*up</code> is not movable-from."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1526487220, "post_id": 50375451, "comment_id": 87767470, "body": "Your program introduces undefined behavior.  You do not return a reference in functions that are declared to return a reference.  Functions such as <code>tNode&amp; operator=(const tNode&amp; node)</code> -- thus nothing can be surmised from your code."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1526487365, "post_id": 50375451, "comment_id": 87767525, "body": "@PaulMcKenzie I don&#39;t think this program has UB, since neither <code>operator=</code> is ever called."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1526487482, "post_id": 50375451, "comment_id": 87767600, "body": "@Angew Well in that case, the OP should remove those calls or change them, in case there is another question posted &quot;Why are my operator= calls not working?&quot;"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1526487483, "post_id": 50375451, "comment_id": 87767601, "body": "You really need to work on <b>m</b> in <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, probably 2/3rd of the code in your example is irrelevant to the question you&#39;re asking."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1526487484, "post_id": 50375451, "comment_id": 87767602, "body": "Why does <code>foo2()</code> return a <code>tNode</code> rather than a <code>std::unique_ptr&lt;tNode&gt;</code>?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1526487630, "post_id": 50375451, "comment_id": 87767688, "body": "<code>tNode(int b = 10)</code> should <i>probably</i> be <code>explicit</code> unless you actually need/want it to be available for implicit conversions."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1526487633, "post_id": 50375451, "comment_id": 87767692, "body": "@JesperJuhl: Presumably, to demonstrate the language behaviour being asked about?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1526490421, "post_id": 50375451, "comment_id": 87769145, "body": "@Angew UB is not predicated on the code with UB being <i>called</i>. As far as I understand from reading the standard, technically speaking, if the code passed to the compiler containes UB <i>anywhere</i>, the entire program is without meaning and the compiler is free to whatever it likes in <i>any</i> parts of your program - including parts that don&#39;t interact with the UB <i>at all</i>."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1526491594, "post_id": 50375451, "comment_id": 87769758, "body": "@JesperJuhl No, that&#39;s not quite precise. If control flow never reaches UB, the program must behave as the standard specifies. However, if control flow ever reaches a UB construct, the entire behaviour is undefined, even &quot;before&quot; the construct is reached. That is precisely how the UB-based optimisations operate: Given <code>*x = 5; if (!x) return 42; return -42;</code>, the compiler can say &quot;If <code>x</code> is null, the code has UB, so I can remove the condition and just assume <code>x</code> is not null.&quot;"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1526491860, "post_id": 50375451, "comment_id": 87769905, "body": "@JesperJuhl Specifically, regarding the <code>return</code> statement, the standard states: &quot;... flowing off the end of a function other than <code>main</code> (6.6.1) results in undefined behavior.&quot; If control never flows off the function because the function is never called, there is no UB.&quot;"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1526493663, "post_id": 50375451, "comment_id": 87770835, "body": "@Angew that makes sense. Seems I need to go back and re-read some sections of the standard - thanks."}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 4, "last_activity_date": 1526487364, "creation_date": 1526487364, "answer_id": 50375647, "question_id": 50375451, "link": "https://stackoverflow.com/questions/50375451/move-constructor-and-copy-constructor-in-c/50375647#50375647", "title": "move constructor and copy constructor in C++", "body": "<pre><code>tNode foo()\n{\n    tNode node;\n    return node;\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>tNode n1 = foo();\n</code></pre>\n\n<p>Is responsible for the output of</p>\n\n<pre><code>a: 10,  tNode() is called at testCopyControl.cpp:13\na: 10,  move constructor tNode() is called at testCopyControl.cpp:31\na: 10, destructor ~tNode() is called at testCopyControl.cpp:40\na: 10,  move constructor tNode() is called at testCopyControl.cpp:31\na: 10, destructor ~tNode() is called at testCopyControl.cpp:40\n</code></pre>\n\n<p>And what you see is the default constructor being called and then <code>node</code> begin treated as an rvalue in the return statement to move it into the return value and then another move from the return value into <code>n1</code></p>\n\n<p>With</p>\n\n<pre><code>tNode foo2()\n{\n    std::unique_ptr&lt;tNode&gt; up = std::make_unique&lt;tNode&gt;(20);\n    return *up;\n}\n</code></pre>\n\n<p>The behavior is different as you are not returning a function local object.  <code>*up</code> gives you a <code>tNode&amp;</code> so the return statement can't treat it as an rvalue.  Since it is an lvalue you have to call the copy constructor to copy it into the return value.  Then, like the first example, the move constructor is called to move the object from the return value into <code>n2</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1526488341, "post_id": 50375649, "comment_id": 87768072, "body": "I&#39;d just like to note that <code>return std::move(...)</code> is usually an antipattern because it may prevent return value optimizations. And in this example it is only as &quot;correct&quot; as the underlying example is pointless."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 4, "last_activity_date": 1526487379, "creation_date": 1526487379, "answer_id": 50375649, "question_id": 50375451, "link": "https://stackoverflow.com/questions/50375451/move-constructor-and-copy-constructor-in-c/50375649#50375649", "title": "move constructor and copy constructor in C++", "body": "<p>The following code does not implicitly move the constructed object:</p>\n\n<pre><code>tNode foo2()\n{\n    std::unique_ptr&lt;tNode&gt; up = std::make_unique&lt;tNode&gt;(20);\n    return *up;\n}\n</code></pre>\n\n<p>This is because, however obvious/intuitive it might seem to us, the compiler cannot prove that it is safe to move-from the object contained by <code>up</code>. It's forced to return by copy.</p>\n\n<p>You could force it to return by R-value by explicitly casting the object as such:</p>\n\n<pre><code>tNode foo2()\n{\n    std::unique_ptr&lt;tNode&gt; up = std::make_unique&lt;tNode&gt;(20);\n    return std::move(*up);\n}\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 9800869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/806d63d6203eb3561085da6f46ca7e8a?s=128&d=identicon&r=PG&f=1", "display_name": "pchrys", "link": "https://stackoverflow.com/users/9800869/pchrys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1526488523, "creation_date": 1526486685, "last_edit_date": 1526488523, "question_id": 50375451, "link": "https://stackoverflow.com/questions/50375451/move-constructor-and-copy-constructor-in-c", "title": "move constructor and copy constructor in C++", "body": "<p>My understanding is that a move constructor is called if it exists when we return a local object from a function. However, I ran into a situation where the copy constructor was called instead, as shown in the following example in function <code>foo2()</code>. Why did that happen? </p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;memory&gt;\n#include &lt;thread&gt;\n#include &lt;chrono&gt;\n\nclass tNode\n{\npublic:\n    tNode(int b = 10)\n    {\n        a = b;\n        printf(\"a: %d, default constructor %s() is called at %s:%d \\n\", a, __func__, __FILE__, __LINE__);\n    }\n\n    tNode(const tNode&amp; node)\n    {\n        a = node.a;\n        printf(\"a: %d, copy constructor %s() is called at %s:%d \\n\", a, __func__, __FILE__, __LINE__);\n    }\n\n    tNode&amp; operator=(const tNode&amp; node)\n    {\n        a = node.a;\n        printf(\"a: %d, copy assignment %s() is called at %s:%d \\n\", a, __func__, __FILE__, __LINE__);\n    }\n\n    tNode(tNode&amp;&amp; node)\n    {\n        a = node.a;\n        printf(\"a: %d, move constructor %s() is called at %s:%d \\n\", a, __func__, __FILE__, __LINE__);\n    }\n\n    tNode&amp; operator=(tNode&amp;&amp; node)\n    {\n        a = node.a;\n        printf(\"a: %d, move assignment %s() is called at %s:%d \\n\", a, __func__, __FILE__, __LINE__);\n    }\n\n    ~tNode() { printf(\"a: %d, destructor %s() is called at %s:%d \\n\", a, __func__, __FILE__, __LINE__); }\n\nprivate:\n    int a = 0;\n};\n\ntNode foo()\n{\n    tNode node;\n    return node;\n}\n\ntNode foo2()\n{\n    std::unique_ptr&lt;tNode&gt; up = std::make_unique&lt;tNode&gt;(20);\n    return *up;\n}\n\nint main()\n{\n    {\n        tNode n1 = foo();\n        tNode n2 = foo2();\n    }\n\n    // we pause here to watch how objects are created, copied/moved, and destroyed.\n    while (true)\n    {\n        std::this_thread::sleep_for(std::chrono::seconds(1));\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>The above code is compiled with <code>g++ --std=c++17 -fno-elide-constructors</code> \nand the output is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>a: 10, default constructor tNode() is called at testCopyControl.cpp:13\na: 10, move constructor tNode() is called at testCopyControl.cpp:31\na: 10, destructor ~tNode() is called at testCopyControl.cpp:40\na: 10, move constructor tNode() is called at testCopyControl.cpp:31\na: 10, destructor ~tNode() is called at testCopyControl.cpp:40\na: 20, default constructor tNode() is called at testCopyControl.cpp:13\na: 20, copy constructor tNode() is called at testCopyControl.cpp:19\na: 20, destructor ~tNode() is called at testCopyControl.cpp:40\na: 20, move constructor tNode() is called at testCopyControl.cpp:31\na: 20, destructor ~tNode() is called at testCopyControl.cpp:40\na: 20, destructor ~tNode() is called at testCopyControl.cpp:40\na: 10, destructor ~tNode() is called at testCopyControl.cpp:40\n</code></pre>\n\n<p>From the output, we know that a copy constructor is called when <code>foo2()</code> returns <code>*up</code> to initialize a temporary <code>tNode</code> object; why did the move constructor not get called instead?</p>\n"}, {"tags": ["c++", "c", "opengl", "glfw"], "comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 3, "creation_date": 1526486971, "post_id": 50375390, "comment_id": 87767342, "body": "Since I saw callbacks in X11 the first time, there is usually always a client data pointer which is registered together with function pointer and passed to callback. This could be used to &quot;bind&quot; client data. Somehow it seems the GLFW people forgot this (or left this out for performance considerations). Either you store your client data in the Window (as suggested by LRiO), or you have to store them in global variables. I see no other way around."}, {"owner": {"reputation": 1065, "user_id": 6720576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4iFs.jpg?s=128&g=1", "display_name": "AsthaUndefined", "link": "https://stackoverflow.com/users/6720576/asthaundefined"}, "edited": false, "score": 0, "creation_date": 1526879879, "post_id": 50375390, "comment_id": 87898707, "body": "Please post the code also."}], "answers": [{"comments": [{"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 1, "creation_date": 1526487304, "post_id": 50375445, "comment_id": 87767498, "body": "Only after reading this answer, I understand what the question asked. Maybe the downvote means &quot;don&#39;t answer unclear questions&quot;. Only guessing."}, {"owner": {"reputation": 19, "user_id": 5127230, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Y-smJ9LmgKw/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY-eSqC72PC4XBrU05jnvIDajlZYg/mo/photo.jpg?sz=128", "display_name": "Denis Tyschenko", "link": "https://stackoverflow.com/users/5127230/denis-tyschenko"}, "edited": false, "score": 0, "creation_date": 1526494159, "post_id": 50375445, "comment_id": 87771094, "body": "Thanks, I did like you said with functions, looked for more &quot;elegant&quot; way"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 4, "last_activity_date": 1526486673, "creation_date": 1526486673, "answer_id": 50375445, "question_id": 50375390, "link": "https://stackoverflow.com/questions/50375390/how-to-use-a-non-argument-variable-in-function/50375445#50375445", "title": "How to use a non-argument variable in function?", "body": "<p>You can't. C function pointers do not support binding arguments. Generally, you can pass a pointer to a specific function that already has that value <code>-90.0f</code> baked into it, or use a global variable.</p>\n\n<p>Yes, this sucks. It's why C++ introduced <code>std::bind</code>, and then lambdas. Unfortunately, the OpenGL API does not allow you to make use of such functionality.</p>\n\n<p>However, it does allow you to \"bind\" some arbitrary data structure to a window context, via <a href=\"http://www.glfw.org/docs/latest/group__window.html#ga3d2fc6026e690ab31a13f78bc9fd3651\" rel=\"nofollow noreferrer\"><code>glfwSetWindowUserPointer</code></a> and <a href=\"http://www.glfw.org/docs/latest/group__window.html#ga17807ce0f45ac3f8bb50d6dcc59a4e06\" rel=\"nofollow noreferrer\"><code>glfwGetWindowUserPointer</code></a>, so you could explore encoding your value into that structure.</p>\n"}], "owner": {"reputation": 19, "user_id": 5127230, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Y-smJ9LmgKw/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY-eSqC72PC4XBrU05jnvIDajlZYg/mo/photo.jpg?sz=128", "display_name": "Denis Tyschenko", "link": "https://stackoverflow.com/users/5127230/denis-tyschenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 50375445, "answer_count": 1, "score": -3, "last_activity_date": 1526879464, "creation_date": 1526486482, "last_edit_date": 1526486983, "question_id": 50375390, "link": "https://stackoverflow.com/questions/50375390/how-to-use-a-non-argument-variable-in-function", "title": "How to use a non-argument variable in function?", "body": "<p>Learning opengGL(+glfw) I met interesting thing: I have to use only one kind of prototype of function <code>mouse_callback</code>in <code>glfwSetCursorPosCallback (Glfwwindow* ,  GLFWcursorposfun mouse_callback);</code> How I should I use variable <code>GLfloat yaw = -90.0f;</code> in my <code>mouse_callback</code> without passing it as argument(there will be an error) or global variables.</p>\n"}, {"tags": ["c++", "winapi", "directx", "game-development"], "comments": [{"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1526489417, "post_id": 50375341, "comment_id": 87768577, "body": "The maximized window doesn&#39;t go over the task bar. Also the client area doesn&#39;t include the window title."}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1526505893, "post_id": 50377081, "comment_id": 87776443, "body": "Alternatively, call <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms633519.aspx\" rel=\"nofollow noreferrer\">GetWindowRect</a> and subtract the top-left corner from the value returned by <code>GetCursorPos</code>. Handling <code>WM_MOUSEMOVE</code> is usually fine, but it doesn&#39;t have a way for you to query the mouse position at a particular point in time, which may be desirable in a game."}, {"owner": {"reputation": 23, "user_id": 9801240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d05fde6e07b61e2d030de8870cdc62?s=128&d=identicon&r=PG&f=1", "display_name": "AbyssalLemon", "link": "https://stackoverflow.com/users/9801240/abyssallemon"}, "edited": false, "score": 0, "creation_date": 1526589571, "post_id": 50377081, "comment_id": 87816191, "body": "Thank you for the information. Making my application fullscreen showed the correct numbers, which implies @Steve Smith was correct with their assumption of the border taking the extra pixels.   After doing some more digging around using the information given here, I stumbled across the Windows function &#39;AdjustWindowRect&#39; which will take a desired client area and provide the &#39;RECT&#39; to be used when creating the window. Thank you for the help"}], "tags": [], "owner": {"reputation": 536, "user_id": 8519332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G93ON.jpg?s=128&g=1", "display_name": "Varrak", "link": "https://stackoverflow.com/users/8519332/varrak"}, "is_accepted": true, "score": 1, "last_activity_date": 1526492616, "creation_date": 1526492616, "answer_id": 50377081, "question_id": 50375341, "link": "https://stackoverflow.com/questions/50375341/getting-mouse-position-within-a-window/50377081#50377081", "title": "Getting mouse position within a window", "body": "<p>The area inside the window (excluding title bar and borders, etc) is called the client area. <code>WM_MOUSEMOVE</code> messages will give you coordinates in the client area, which will be at (0, 0) at the top-left of that inside portion.</p>\n\n<p><code>GetCursorPos</code> will return the mouse cursor position in screen space (so your call to <code>ScreenToClient</code> is correct). Since the window is not maximized, and you're still specifying a border (<code>WS_OVERLAPPEDWINDOW</code> is defined as <code>WS_OVERLAPPED | WS_THICKFRAME | etc...</code>, and you're removing the <code>WS_THICKFRAME</code> but <code>WS_OVERLAPPED</code> still includes a border) my guess is that the window's layout, including the border, will eat up those extra 20 pixels. If you create a full-screen, borderless window (so sized and positioned to fill the screen, and using the <code>WS_POPUP</code> style only), you should see the client area filling the available space. </p>\n"}], "owner": {"reputation": 23, "user_id": 9801240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d05fde6e07b61e2d030de8870cdc62?s=128&d=identicon&r=PG&f=1", "display_name": "AbyssalLemon", "link": "https://stackoverflow.com/users/9801240/abyssallemon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2134, "favorite_count": 0, "accepted_answer_id": 50377081, "answer_count": 1, "score": 2, "last_activity_date": 1526492616, "creation_date": 1526486313, "last_edit_date": 1526490708, "question_id": 50375341, "link": "https://stackoverflow.com/questions/50375341/getting-mouse-position-within-a-window", "title": "Getting mouse position within a window", "body": "<p>I'm looking to get the cursor position during the main loop of my application/game. </p>\n\n<p>From doing some research there appears to be two methods of doing this:\nFirstly listening for the WM_MOUSEMOVE event and checking the lParam.\nSecondly using GetCursorPos() then following it up with ScreenToClient().</p>\n\n<p>I have a window which is set up to be 1680x1050, however when looking at the data that comes through from either method, I end up with a value of around 1660 at the very right side of the window. </p>\n\n<p>I've not been able to find any resource which explains why this may be happening and I'm wondering whether it has anything to do with the window creation?</p>\n\n<p>This is the code I am using to create the window for my application </p>\n\n<pre><code>//Register the window class\nWNDCLASS windowClass;\nwindowClass = {};\nwindowClass.style = CS_OWNDC | CS_HREDRAW | CS_VREDRAW;\nwindowClass.lpfnWndProc = handleWindowMessages;\nwindowClass.hInstance = hInstance;\nwindowClass.hCursor = LoadCursor(nullptr, IDC_ARROW);\nwindowClass.lpszClassName = L\"D3D11 Rendering\";\nif (!RegisterClass(&amp;windowClass))\n{\n    return 0;\n}\n\n//Create the window\nHWND windowHandle\n    = CreateWindowEx(0,\n        windowClass.lpszClassName,\n        L\"D3D11 Rendering\", \n        (WS_OVERLAPPEDWINDOW ^ WS_THICKFRAME) | WS_VISIBLE,         //According to stackoverflow.com WS_OVERLAPPEDWINDOW ^ (XOR) WS_THICKFRAME will prevent window resizing\n        CW_USEDEFAULT,\n        CW_USEDEFAULT,\n        gResolutionX,\n        gResolutionY,\n        0, 0, hInstance, 0);\n</code></pre>\n\n<p>Then in the main loop I am doing the following:</p>\n\n<pre><code>POINT p;\nGetCursorPos(&amp;p);\nScreenToClient(windowHandle, &amp;p);\n</code></pre>\n\n<p>Any pointers, tips, or information would be appreciated. </p>\n\n<p>Edit: The applications window is not maximized and/or over the taskbar. The issue occurs on both axis, x and y. I had noticed that the title bar at the top keeps the y position at 0 whilst the cursor is inside it. Is there a way to get to the renderable area of the screen? When creating the window with the resolution I want my game to run at, I expect the bit in the middle (not sure on the actual terminology - the bit without the borders and the title bar) to match the resolution. </p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 249, "user_id": 14800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6501a4d97420c943fb7571628c6318cb?s=128&d=identicon&r=PG", "display_name": "xslr", "link": "https://stackoverflow.com/users/14800/xslr"}, "edited": false, "score": 4, "creation_date": 1526485294, "post_id": 50375002, "comment_id": 87766319, "body": "Are N, M and T known during compile time? Template parameters must be known at compile time. As such as variables like <code>int n</code> cannot be used to init templates."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 6126499, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dc4h9Od1VhI/AAAAAAAAAAI/AAAAAAAAACU/yKaAUM0k6nM/photo.jpg?sz=128", "display_name": "Simon Defontaine", "link": "https://stackoverflow.com/users/6126499/simon-defontaine"}, "edited": false, "score": 0, "creation_date": 1526486536, "post_id": 50375277, "comment_id": 87767093, "body": "Right, option 2 is what I was looking for. However, how do I write the constructor for this ? Do I need to add anything ? What about a <code>getColorMatrix</code> method ? Can I write <code>QGenericMatrix&lt;N, M, T&gt; MyClass&lt;N,M,T&gt;::getColorMatrix(){return colorMatrix;}</code> ?"}, {"owner": {"reputation": 249, "user_id": 14800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6501a4d97420c943fb7571628c6318cb?s=128&d=identicon&r=PG", "display_name": "xslr", "link": "https://stackoverflow.com/users/14800/xslr"}, "reply_to_user": {"reputation": 15, "user_id": 6126499, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dc4h9Od1VhI/AAAAAAAAAAI/AAAAAAAAACU/yKaAUM0k6nM/photo.jpg?sz=128", "display_name": "Simon Defontaine", "link": "https://stackoverflow.com/users/6126499/simon-defontaine"}, "edited": false, "score": 0, "creation_date": 1526487367, "post_id": 50375277, "comment_id": 87767528, "body": "Here&#39;s a working sample: <a href=\"http://coliru.stacked-crooked.com/a/5b6d9e399aa3ae68\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/5b6d9e399aa3ae68</a>. You&#39;d write the functions the same way as before, except that function declarations outside the class declaration must be preceded by the template header. <code>template&lt;int N, int M, typename T&gt;</code> in this case."}, {"owner": {"reputation": 15, "user_id": 6126499, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dc4h9Od1VhI/AAAAAAAAAAI/AAAAAAAAACU/yKaAUM0k6nM/photo.jpg?sz=128", "display_name": "Simon Defontaine", "link": "https://stackoverflow.com/users/6126499/simon-defontaine"}, "edited": false, "score": 0, "creation_date": 1526488620, "post_id": 50375277, "comment_id": 87768210, "body": "Worked perfectly. Thanks a lot for the examples !"}], "tags": [], "owner": {"reputation": 249, "user_id": 14800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6501a4d97420c943fb7571628c6318cb?s=128&d=identicon&r=PG", "display_name": "xslr", "link": "https://stackoverflow.com/users/14800/xslr"}, "is_accepted": true, "score": 2, "last_activity_date": 1526487632, "last_edit_date": 1526487632, "creation_date": 1526486066, "answer_id": 50375277, "question_id": 50375002, "link": "https://stackoverflow.com/questions/50375002/using-a-qgenericmatrix-as-an-attribute-for-another-class/50375277#50375277", "title": "Using a QGenericMatrix as an attribute for another class", "body": "<p>Since template params must be known at compile time, you have two options:</p>\n\n<ol>\n<li><p>Fix the matrix size and type within MyClass. e.g</p>\n\n<pre><code>class MyClass {\n  QGenericMatrix&lt;2, 3, QColor&gt; colorMatrix;\n}\n</code></pre></li>\n<li><p>Define MyClass as a template that takes the same template params as QGenericMatrix and instantiate colorMatrix using MyClass' template params. Like so:</p>\n\n<pre><code>template&lt;int N, int M, typename T&gt;\nclass MyClass {\n  MyClass() { // init }\n  T entry(int i, int j);\n\n  QGenericMatrix&lt;N, M, T&gt; colorMatrix;\n}\n\ntemplate&lt;int N, int M, typename T&gt;\nT MyClass::entry(int i, int j) { return colorMatrix(i, j); }\n</code></pre>\n\n<p>Naturally in this case, MyClass will have to be instantiated with template params which again must be known at compile time.</p>\n\n<pre><code>MyClass&lt;2, 3, QColor&gt; myClass;\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 15, "user_id": 6126499, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dc4h9Od1VhI/AAAAAAAAAAI/AAAAAAAAACU/yKaAUM0k6nM/photo.jpg?sz=128", "display_name": "Simon Defontaine", "link": "https://stackoverflow.com/users/6126499/simon-defontaine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 50375277, "answer_count": 1, "score": 0, "last_activity_date": 1526487632, "creation_date": 1526485122, "last_edit_date": 1526485399, "question_id": 50375002, "link": "https://stackoverflow.com/questions/50375002/using-a-qgenericmatrix-as-an-attribute-for-another-class", "title": "Using a QGenericMatrix as an attribute for another class", "body": "<p>Qt has a class named <code>QGenericMatrix</code>. It's defined as follows :</p>\n\n<pre><code>template &lt;int N, int M, typename T&gt;\nclass QGenericMatrix\n{...}\n</code></pre>\n\n<p>I would like to use it as an attribute <code>colorMatrix</code> in a class of my own <code>MyClass</code> and then initialize it in its constructor like this :</p>\n\n<pre><code>MyClass::MyClass(int n, int m)\n{\n  colorMatrix = new QGenericMatrix&lt;n, m, QColor&gt;;\n}\n</code></pre>\n\n<p>However the syntax is probably very incorrect. How should I write the declaration in the header file and the constructor ?</p>\n"}, {"tags": ["python", "c++", "output"], "comments": [{"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 2, "creation_date": 1526484677, "post_id": 50374806, "comment_id": 87765938, "body": "What&#39;s wrong with passing <code>subprocess.DEVNULL</code> as the <code>stdout</code> and <code>stderr</code> arguments?"}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 2, "creation_date": 1526484996, "post_id": 50374806, "comment_id": 87766128, "body": "Its unclear whether you are executing a C++ program (perhaps <code>subprocess.call</code> or <code>os.system</code>) or whether you are calling a C extension library in python. These have very different solutions."}, {"owner": {"reputation": 210, "user_id": 6533158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a01e414b198b5100c5ccde7a307bf3e8?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Abraham", "link": "https://stackoverflow.com/users/6533158/patrick-abraham"}, "edited": false, "score": 0, "creation_date": 1526493545, "post_id": 50374806, "comment_id": 87770774, "body": "Question will be edited asap"}, {"owner": {"reputation": 210, "user_id": 6533158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a01e414b198b5100c5ccde7a307bf3e8?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Abraham", "link": "https://stackoverflow.com/users/6533158/patrick-abraham"}, "edited": false, "score": 0, "creation_date": 1526494535, "post_id": 50374806, "comment_id": 87771289, "body": "Question updated"}, {"owner": {"reputation": 244, "user_id": 9709785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1a8189a2d40dd01fde62aa2153a3c4a?s=128&d=identicon&r=PG&f=1", "display_name": "Hajo Kirchhoff", "link": "https://stackoverflow.com/users/9709785/hajo-kirchhoff"}, "edited": false, "score": 0, "creation_date": 1526496674, "post_id": 50374806, "comment_id": 87772276, "body": "Are you sure it is writing to stdout? Maybe it is writing to stderr?"}, {"owner": {"reputation": 244, "user_id": 9709785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1a8189a2d40dd01fde62aa2153a3c4a?s=128&d=identicon&r=PG&f=1", "display_name": "Hajo Kirchhoff", "link": "https://stackoverflow.com/users/9709785/hajo-kirchhoff"}, "edited": false, "score": 0, "creation_date": 1526496718, "post_id": 50374806, "comment_id": 87772299, "body": "Also: Is SDPAp a wrapper that starts a separate process or is SDPAp a wrapper that loads a DLL or links against a lib?"}, {"owner": {"reputation": 210, "user_id": 6533158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a01e414b198b5100c5ccde7a307bf3e8?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Abraham", "link": "https://stackoverflow.com/users/6533158/patrick-abraham"}, "edited": false, "score": 0, "creation_date": 1526500757, "post_id": 50374806, "comment_id": 87774207, "body": "Stderr was also send to null"}, {"owner": {"reputation": 210, "user_id": 6533158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a01e414b198b5100c5ccde7a307bf3e8?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Abraham", "link": "https://stackoverflow.com/users/6533158/patrick-abraham"}, "edited": false, "score": 0, "creation_date": 1526501090, "post_id": 50374806, "comment_id": 87774369, "body": "I will try to understand what happens in the depth of sdpa."}], "owner": {"reputation": 210, "user_id": 6533158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a01e414b198b5100c5ccde7a307bf3e8?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Abraham", "link": "https://stackoverflow.com/users/6533158/patrick-abraham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526494309, "creation_date": 1526484455, "last_edit_date": 1526494309, "question_id": 50374806, "link": "https://stackoverflow.com/questions/50374806/preventing-a-c-program-from-printing-to-std-out-when-called-via-python", "title": "Preventing a C++ program from printing to std out, when called via python", "body": "<p>First of all, sending the output to NULL, as mentioned in other questions, does work for the output of the python wrapper but doesn't prevent the c-program itself.</p>\n\n<hr>\n\n<p>Let's start with what is happening,</p>\n\n<p>the goal is to write a python-program to solve specific math-problems.</p>\n\n<p>This program uses SDPAp (SemiDefinite Programming Algorithm - Python) a python module which itself is nothing more than a wrapper for SDPA. SDPA is a solver for SDPs written in C++.</p>\n\n<p>The SDPAp-module has an option to prevent some of the output being printed, but there is still some debris. This output comes from the SDPA itself and so far every attempt to prevent this has failed.</p>\n\n<p>The python-program has to print the solutions to console, writing it to some file, etc. doesn't help the problem, since this program will be used as a subprogram later on.</p>\n\n<hr>\n\n<h2>Structure</h2>\n\n<hr>\n\n<p>Python program - has to write in console</p>\n\n<p>Python program - calls the SDPAp-module which is a python-interface for the SDPA which is a C++ program - writes to console</p>\n\n<p>The C++ program shall not output anything.</p>\n\n<hr>\n\n<p>Since this question is asked indirectly a reaction might take some while.</p>\n\n<hr>\n\n<p><code>sys.stdout = devnull</code> prevents python output, doesn't prevent SDPA output</p>\n\n<p>Neither <code>subprocess</code> nor <code>os.system</code> is used.</p>\n"}, {"tags": ["c++", "node.js", "c++11", "system-calls"], "comments": [{"owner": {"reputation": 2077, "user_id": 4694124, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c4e2b18d7cefdae9b599a884d2ae4e4c?s=128&d=identicon&r=PG", "display_name": "Lukas Barth", "link": "https://stackoverflow.com/users/4694124/lukas-barth"}, "edited": false, "score": 0, "creation_date": 1526484150, "post_id": 50374621, "comment_id": 87765571, "body": "The first Google hit for &quot;c++ system call&quot; is: <a href=\"http://www.cplusplus.com/reference/cstdlib/system/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cstdlib/system</a> - and that pretty much explains it, complete with example and everything."}, {"owner": {"reputation": 577, "user_id": 633182, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d47a7cc3ba0e67abdb01989f1abcd984?s=128&d=identicon&r=PG", "display_name": "sAguinaga", "link": "https://stackoverflow.com/users/633182/saguinaga"}, "reply_to_user": {"reputation": 2077, "user_id": 4694124, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c4e2b18d7cefdae9b599a884d2ae4e4c?s=128&d=identicon&r=PG", "display_name": "Lukas Barth", "link": "https://stackoverflow.com/users/4694124/lukas-barth"}, "edited": false, "score": 0, "creation_date": 1526484666, "post_id": 50374621, "comment_id": 87765930, "body": "I jumped the gun, that is the first thing I tried but noticed that my compiler (through my IDE) warns that <code>system</code> is deprecated ... should have phrased my question with this bit first."}], "answers": [{"comments": [{"owner": {"reputation": 577, "user_id": 633182, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d47a7cc3ba0e67abdb01989f1abcd984?s=128&d=identicon&r=PG", "display_name": "sAguinaga", "link": "https://stackoverflow.com/users/633182/saguinaga"}, "edited": false, "score": 1, "creation_date": 1526507959, "post_id": 50376837, "comment_id": 87777182, "body": "Yes, you are right about <code>system()</code>. Your suggestion does not work but is close."}], "tags": [], "owner": {"reputation": 247, "user_id": 9209968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab1c6d5c5c167be9840299305eff0904?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Olson", "link": "https://stackoverflow.com/users/9209968/josh-olson"}, "is_accepted": false, "score": 0, "last_activity_date": 1526491686, "creation_date": 1526491686, "answer_id": 50376837, "question_id": 50374621, "link": "https://stackoverflow.com/questions/50374621/call-system-call-to-node-from-c/50376837#50376837", "title": "Call system call to node from C++?", "body": "<p>You may use fork() instead of system() like shown:</p>\n\n<pre><code>char *filename = /* something */;\n\npid_t pid = fork();\nif (pid == 0) /* child */ {\n  if (execve(filename, NULL, NULL) == -1) {\n    /* Handle error */\n  }\n  _exit(1);  /* in case execve() fails */\n}\n</code></pre>\n\n<p><a href=\"https://wiki.sei.cmu.edu/confluence/pages/viewpage.action?pageId=87152177\" rel=\"nofollow noreferrer\">Do not call system()</a></p>\n"}, {"tags": [], "owner": {"reputation": 577, "user_id": 633182, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d47a7cc3ba0e67abdb01989f1abcd984?s=128&d=identicon&r=PG", "display_name": "sAguinaga", "link": "https://stackoverflow.com/users/633182/saguinaga"}, "is_accepted": true, "score": 1, "last_activity_date": 1526508478, "last_edit_date": 1526508478, "creation_date": 1526508171, "answer_id": 50380540, "question_id": 50374621, "link": "https://stackoverflow.com/questions/50374621/call-system-call-to-node-from-c/50380540#50380540", "title": "Call system call to node from C++?", "body": "<pre><code>  const char *programname = \"/usr/local/bin/node\";\n\n  const char **nargv = new const char* [5];//extra room for program name and sentinel\n  nargv [0] = programname; // by convention is program name\n  nargv [1] = \"/folder/convert-json.js\";   // arg 1 to node\n  nargv [2] = \"/folder/723edc747c39.json\"; // arg 2\n  nargv [3] = \"/tmp/data.json\"; // arg 3\n  nargv [4] = NULL;  // end of arguments sentinel is NULL\n\n  pid_t pid = fork();\n  if (pid == 0) /* child */ {\n    if (execv(programname, (char **)nargv) == -1) {\n      /* Handle error */\n      std::cout &lt;&lt; \"!! an error in calling node\\n\";\n    }\n    _exit(1);  /* in case execv() fails */\n  }\n</code></pre>\n\n<p>I built on yours (@josh-olson). This code works hope it helps others.</p>\n"}], "owner": {"reputation": 577, "user_id": 633182, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d47a7cc3ba0e67abdb01989f1abcd984?s=128&d=identicon&r=PG", "display_name": "sAguinaga", "link": "https://stackoverflow.com/users/633182/saguinaga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 50380540, "answer_count": 2, "score": -1, "last_activity_date": 1526508478, "creation_date": 1526483939, "last_edit_date": 1526508299, "question_id": 50374621, "link": "https://stackoverflow.com/questions/50374621/call-system-call-to-node-from-c", "title": "Call system call to node from C++?", "body": "<p>From C++, is there a way to do a system call to run <code>node process-file.js ./target_folder/</code>?</p>\n\n<p>The standard call from my C++ project is: </p>\n\n<p><code>node ../folderA/subfolder/process-file.js firstArgument ./target_folder/outputFile.txt</code></p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1526484438, "post_id": 50374590, "comment_id": 87765769, "body": "How about using <code>std::vector</code> instead? Otherwise, storying <code>std::optional&lt;InputField&gt;</code> or some other proxy type might also be worth considering."}, {"owner": {"reputation": 117, "user_id": 5929436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abb211e925d24472acdd112357a965e8?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Garnier", "link": "https://stackoverflow.com/users/5929436/joseph-garnier"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1526484506, "post_id": 50374590, "comment_id": 87765810, "body": "@Fran&#231;oisAndrieux I can&#39;t, it&#39;s a full Qt application."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1526484534, "post_id": 50374590, "comment_id": 87765833, "body": "Reminds me of a very old joke: &#39;Doctor, it pains when I do this (patient performs a very bizarre gesture with his hand and ear). What can you suggest? And the good doctor: I suggest not doing this.&#39;"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1526484558, "post_id": 50374590, "comment_id": 87765852, "body": "What &#39;full Qt&#39; means? Somebody is forcing you to use QVector?"}, {"owner": {"reputation": 11800, "user_id": 1594913, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tLf29.jpg?s=128&g=1", "display_name": "JBL", "link": "https://stackoverflow.com/users/1594913/jbl"}, "edited": false, "score": 2, "creation_date": 1526484559, "post_id": 50374590, "comment_id": 87765854, "body": "@Milleras You cannot use the C++ standard library?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1526484751, "post_id": 50374590, "comment_id": 87765984, "body": "@Milleras Are you forbidden from using standard types? Otherwise it seems like <code>QVector&lt;std::optional&lt;InputField&gt;&gt;</code> should do the job."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1526502525, "post_id": 50374590, "comment_id": 87775047, "body": "@Fran&#231;oisAndrieux That&#39;s pointless. <code>std::vector&lt;InputField&gt;</code> will work just fine for a non-default-constructible type."}, {"owner": {"reputation": 117, "user_id": 5929436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abb211e925d24472acdd112357a965e8?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Garnier", "link": "https://stackoverflow.com/users/5929436/joseph-garnier"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1526563798, "post_id": 50374590, "comment_id": 87801165, "body": "@Fran&#231;oisAndrieux std::optional only work for c++ 17. Unfortunately for me, I have to use c++ 14."}, {"owner": {"reputation": 117, "user_id": 5929436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abb211e925d24472acdd112357a965e8?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Garnier", "link": "https://stackoverflow.com/users/5929436/joseph-garnier"}, "reply_to_user": {"reputation": 11800, "user_id": 1594913, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tLf29.jpg?s=128&g=1", "display_name": "JBL", "link": "https://stackoverflow.com/users/1594913/jbl"}, "edited": false, "score": 0, "creation_date": 1526565322, "post_id": 50374590, "comment_id": 87802267, "body": "@JBL In a Qt application, it&#39;s recommanded to use only Qt containers. In my case, my QVector is used in a QAbstractTableModel and in a custom view. If I use any STL container, I will have to copy their content in a Qt container to be compatible with Qt. See <a href=\"https://stackoverflow.com/questions/1668259/stl-or-qt-containers\">stackoverflow.com/questions/1668259/stl-or-qt-containers</a>"}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1526484725, "post_id": 50374833, "comment_id": 87765966, "body": "A constructor with no argument doesn&#39;t need to be explicit."}, {"owner": {"reputation": 117, "user_id": 5929436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abb211e925d24472acdd112357a965e8?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Garnier", "link": "https://stackoverflow.com/users/5929436/joseph-garnier"}, "edited": false, "score": 0, "creation_date": 1526484863, "post_id": 50374833, "comment_id": 87766054, "body": "Good idea! It works, thank you. I&#39;ve added <code>InputField() = default;</code> and <code>friend class QVector&lt;InputField&gt;;</code>"}, {"owner": {"reputation": 665, "user_id": 6367098, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mdK2PtRe5co/AAAAAAAAAAI/AAAAAAAAAGs/hwJ0kn0htaw/photo.jpg?sz=128", "display_name": "Martin H&#246;her", "link": "https://stackoverflow.com/users/6367098/martin-h%c3%b6her"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1526485240, "post_id": 50374833, "comment_id": 87766286, "body": "@SergeyA: Thanks for the hint ;-) I&#39;ll update the answer."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 117, "user_id": 5929436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abb211e925d24472acdd112357a965e8?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Garnier", "link": "https://stackoverflow.com/users/5929436/joseph-garnier"}, "edited": false, "score": 3, "creation_date": 1526485257, "post_id": 50374833, "comment_id": 87766298, "body": "@Milleras Beware that this means it&#39;s possible to now access default constructed instances using <code>QVector</code>, meaning you could still use an invalid instance. And as it stands it&#39;s not necessarily easy to detect this case."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1526502633, "post_id": 50374833, "comment_id": 87775088, "body": "This solution closely binds <code>Foo</code> to <code>QVector</code>, never mind that the default constructor exists -- perhaps <code>Foo</code> uses non-default-constructible members? The goal is to make it so that <code>QVector</code> can use a non-default-constructible <code>Foo</code>, without changing anything about <code>Foo</code>. This points clearly to what the solution should be: specializations of <code>QVector</code> members for the non-copyable type <code>Foo</code>."}, {"owner": {"reputation": 117, "user_id": 5929436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abb211e925d24472acdd112357a965e8?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Garnier", "link": "https://stackoverflow.com/users/5929436/joseph-garnier"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1526564089, "post_id": 50374833, "comment_id": 87801397, "body": "@Fran&#231;oisAndrieux Yes, that&#39;s a good point. But for now, I don&#39;t see other solution for my problem :("}], "tags": [], "owner": {"reputation": 665, "user_id": 6367098, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mdK2PtRe5co/AAAAAAAAAAI/AAAAAAAAAGs/hwJ0kn0htaw/photo.jpg?sz=128", "display_name": "Martin H&#246;her", "link": "https://stackoverflow.com/users/6367098/martin-h%c3%b6her"}, "is_accepted": true, "score": 5, "last_activity_date": 1526485278, "last_edit_date": 1526485278, "creation_date": 1526484593, "answer_id": 50374833, "question_id": 50374590, "link": "https://stackoverflow.com/questions/50374590/constraint-on-constructor-calling/50374833#50374833", "title": "Constraint on constructor calling", "body": "<p>You can try to make <code>QVector&lt;InputField&gt;</code> a friend class.</p>\n\n<p>Consider the following toy example:</p>\n\n<pre><code>class Foo {\n    // Grant QVector&lt;Foo&gt; access to this class' internals\n    friend class QVector&lt;Foo&gt;;\npublic:\n    explicit Foo(int a, bool b) {\n        // Empty\n    }\nprivate:\n    Foo() {\n        // Callable by this class and QVector&lt;Foo&gt;.\n    }\n};\n</code></pre>\n\n<p>With this, it is possible to store instances of <code>Foo</code> in a <code>QVector&lt;Foo&gt;</code>:</p>\n\n<pre><code>QVector&lt;Foo&gt; myList;\nmyList &lt;&lt; Foo(1, true) &lt;&lt; Foo(2, false);\n</code></pre>\n\n<p>However, the following would e.g. fail:</p>\n\n<pre><code>Foo foo;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 117, "user_id": 5929436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abb211e925d24472acdd112357a965e8?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Garnier", "link": "https://stackoverflow.com/users/5929436/joseph-garnier"}, "edited": false, "score": 0, "creation_date": 1526564459, "post_id": 50378518, "comment_id": 87801663, "body": "Do you suggest to extend QVector ? Else, how can I use your macro ?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 117, "user_id": 5929436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abb211e925d24472acdd112357a965e8?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Garnier", "link": "https://stackoverflow.com/users/5929436/joseph-garnier"}, "edited": false, "score": 0, "creation_date": 1526583388, "post_id": 50378518, "comment_id": 87813140, "body": "@JosephGarnier The macro provides specializations of <code>QVector</code>&#39;s methods. That&#39;s the beauty of templated types: you can easily replace their bits and pieces for special circumstances!"}, {"owner": {"reputation": 117, "user_id": 5929436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abb211e925d24472acdd112357a965e8?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Garnier", "link": "https://stackoverflow.com/users/5929436/joseph-garnier"}, "edited": false, "score": 0, "creation_date": 1526631081, "post_id": 50378518, "comment_id": 87828684, "body": "I get error : &quot;function QVector&lt;InputField&gt;::QVector(int size) cannot be specialized in the current scope&quot; (for me it&#39;s normal)"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 117, "user_id": 5929436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abb211e925d24472acdd112357a965e8?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Garnier", "link": "https://stackoverflow.com/users/5929436/joseph-garnier"}, "edited": false, "score": 1, "creation_date": 1526651341, "post_id": 50378518, "comment_id": 87841148, "body": "You did something that I didn&#39;t do above, because the above works just fine. Recall that such specializations need to happen in namespace scope, not class scope. You need to specialize in Qt&#39;s namespace if any, in fact. Otherwise in global scope."}, {"owner": {"reputation": 117, "user_id": 5929436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abb211e925d24472acdd112357a965e8?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Garnier", "link": "https://stackoverflow.com/users/5929436/joseph-garnier"}, "edited": false, "score": 0, "creation_date": 1526665202, "post_id": 50378518, "comment_id": 87848890, "body": "Thank for your help, I didn&#39;t know this trick. I tried but I have this error : error LNK2005: &quot;private: void __cdecl QVector&lt;class ExpTool::InputField&gt;::defaultConstruct(class ExpTool::InputField *,class ExpTool::InputField *)&quot; (?defaultConstruct@?$QVector@VInputField) already defined in pch.obj fatal error LNK1169: one or more multiply defined symbols found Content of my pch : #include &quot;QtCore&quot; #include &quot;QtGlobal&quot; #include &quot;QDebug&quot; #include &quot;QGlobalStatic&quot;"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 117, "user_id": 5929436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abb211e925d24472acdd112357a965e8?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Garnier", "link": "https://stackoverflow.com/users/5929436/joseph-garnier"}, "edited": false, "score": 0, "creation_date": 1526666750, "post_id": 50378518, "comment_id": 87849560, "body": "Rebuild your project. As in: delete the build folder and build again. The way you troubleshoot linker errors <i>always</i> begins with a clean-slate rebuild."}, {"owner": {"reputation": 117, "user_id": 5929436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abb211e925d24472acdd112357a965e8?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Garnier", "link": "https://stackoverflow.com/users/5929436/joseph-garnier"}, "edited": false, "score": 1, "creation_date": 1526914798, "post_id": 50378518, "comment_id": 87916191, "body": "Clean my project changed nothing but I found the mistake. You have to add <code>inline</code> before returned type in your functions. Otherwise, it works great ! Thank."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1526583453, "last_edit_date": 1526583453, "creation_date": 1526498461, "answer_id": 50378518, "question_id": 50374590, "link": "https://stackoverflow.com/questions/50374590/constraint-on-constructor-calling/50378518#50378518", "title": "Constraint on constructor calling", "body": "<p>There's no need for <code>QVector</code> to call the default constructor; <code>std::vector</code> doesn't, after all - not unless you use one of its methods that need that constructor. All you need is to disable default-construction in <code>QVector</code>:</p>\n\n<pre><code>#define QVECTOR_NON_DEFAULT_CONSTRUCTIBLE(Type) \\\ntemplate &lt;&gt; QVector&lt;Type&gt;::QVector(int) = delete; \\\ntemplate &lt;&gt; void QVector&lt;Type&gt;::resize(int newSize) { \\\n   Q_ASSERT(newSize &lt;= size()); \\\n   detach(); \\\n} \\\ntemplate &lt;&gt; void QVector&lt;Type&gt;::defaultConstruct(Type*, Type*) { Q_ASSERT(false); }\n</code></pre>\n\n<p>Then, put the macro in the same place you'd put <code>Q_DECLARE_METATYPE</code>: right where the type is declared:</p>\n\n<pre><code>class InputField {\n  ...\n};\nQVECTOR_NON_DEFAULT_CONSTRUCTIBLE(InputField)\n</code></pre>\n\n<p>Then you can use <code>QVector&lt;InputField&gt;</code> with same limitations as <code>std::vector</code> would have.</p>\n"}], "owner": {"reputation": 117, "user_id": 5929436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abb211e925d24472acdd112357a965e8?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Garnier", "link": "https://stackoverflow.com/users/5929436/joseph-garnier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 50374833, "answer_count": 2, "score": 2, "last_activity_date": 1526583453, "creation_date": 1526483841, "last_edit_date": 1526484353, "question_id": 50374590, "link": "https://stackoverflow.com/questions/50374590/constraint-on-constructor-calling", "title": "Constraint on constructor calling", "body": "<p>I've designed a class <code>InputField</code> having a constructor with 2 parameters : <code>explicit InputField(InputFieldIndex uiIndex, QString sName) noexcept;</code> </p>\n\n<p>I store this class in a <code>QVector</code>, so, unfortunately, I have to add a default-contructor. In term of software design, that's not good for me (because I have a constraint on <code>uiIndex</code>). \nIs there a way to only allow to QT (<code>QVector</code> in my case) to call the default constructor? A macro or a preprocessor instruction?</p>\n"}, {"tags": ["c++", "qt", "qml"], "comments": [{"owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "edited": false, "score": 0, "creation_date": 1526484785, "post_id": 50374523, "comment_id": 87766005, "body": "You know the purpose of the emptyString?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1526489195, "post_id": 50374523, "comment_id": 87768474, "body": "it is no longer necessary to use that empty String if you use a version of Qt &gt;= 5.10"}, {"owner": {"reputation": 37, "user_id": 2437322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f6f9525e429563ec5c529c7a4ac65ca?s=128&d=identicon&r=PG", "display_name": "Fredro", "link": "https://stackoverflow.com/users/2437322/fredro"}, "edited": false, "score": 0, "creation_date": 1526541029, "post_id": 50374523, "comment_id": 87786333, "body": "The empty string is the only thing that is working with this example. I&#39;ve added the empty string to one Text and that is the only Text that is changed when a new language is set"}, {"owner": {"reputation": 4421, "user_id": 2846711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/376e80e738e89334ce88d4afdce48afa?s=128&d=identicon&r=PG&f=1", "display_name": "Yoann Quenach de Quivillic", "link": "https://stackoverflow.com/users/2846711/yoann-quenach-de-quivillic"}, "edited": false, "score": 0, "creation_date": 1526559900, "post_id": 50374523, "comment_id": 87798301, "body": "Note that there is a bug with strings contained in PropertyChanges elements (<a href=\"https://bugreports.qt.io/browse/QTBUG-66541\" rel=\"nofollow noreferrer\">bugreports.qt.io/browse/QTBUG-66541</a>), fixed in Qt 5.11 Beta"}, {"owner": {"reputation": 37, "user_id": 2437322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f6f9525e429563ec5c529c7a4ac65ca?s=128&d=identicon&r=PG", "display_name": "Fredro", "link": "https://stackoverflow.com/users/2437322/fredro"}, "edited": false, "score": 0, "creation_date": 1526628317, "post_id": 50374523, "comment_id": 87827072, "body": "Maybe it might be a problem with qsTr within a <code>ListElement</code> aswell, since that is where most of my strings are."}, {"owner": {"reputation": 1017, "user_id": 4663570, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c76e3a8f039ee0afff38479e52578249?s=128&d=identicon&r=PG&f=1", "display_name": "Nmaster88", "link": "https://stackoverflow.com/users/4663570/nmaster88"}, "edited": false, "score": 0, "creation_date": 1542124701, "post_id": 50374523, "comment_id": 93451640, "body": "anyone found a solution that doesn&#39;t involve updating it to 5.12?"}], "answers": [{"comments": [{"owner": {"reputation": 1017, "user_id": 4663570, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c76e3a8f039ee0afff38479e52578249?s=128&d=identicon&r=PG&f=1", "display_name": "Nmaster88", "link": "https://stackoverflow.com/users/4663570/nmaster88"}, "edited": false, "score": 0, "creation_date": 1542124649, "post_id": 50827741, "comment_id": 93451608, "body": "was a solution found to have it work on a version prior to 5.12? thanks"}, {"owner": {"reputation": 37, "user_id": 2437322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f6f9525e429563ec5c529c7a4ac65ca?s=128&d=identicon&r=PG", "display_name": "Fredro", "link": "https://stackoverflow.com/users/2437322/fredro"}, "reply_to_user": {"reputation": 1017, "user_id": 4663570, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c76e3a8f039ee0afff38479e52578249?s=128&d=identicon&r=PG&f=1", "display_name": "Nmaster88", "link": "https://stackoverflow.com/users/4663570/nmaster88"}, "edited": false, "score": 0, "creation_date": 1542207463, "post_id": 50827741, "comment_id": 93486788, "body": "@Nmaster88 I didn&#39;t find a way before bug fix, sorry."}], "tags": [], "owner": {"reputation": 37, "user_id": 2437322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f6f9525e429563ec5c529c7a4ac65ca?s=128&d=identicon&r=PG", "display_name": "Fredro", "link": "https://stackoverflow.com/users/2437322/fredro"}, "is_accepted": true, "score": 1, "last_activity_date": 1528851342, "creation_date": 1528851342, "answer_id": 50827741, "question_id": 50374523, "link": "https://stackoverflow.com/questions/50374523/qt-qml-translation-retranslate/50827741#50827741", "title": "QT QML Translation retranslate", "body": "<p>This was confirmed as a bug and will be fixed in version 5.12. If you want to compile it yourself please check the bug report</p>\n\n<p><a href=\"https://bugreports.qt.io/browse/QTBUG-68350\" rel=\"nofollow noreferrer\">https://bugreports.qt.io/browse/QTBUG-68350</a></p>\n"}], "owner": {"reputation": 37, "user_id": 2437322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f6f9525e429563ec5c529c7a4ac65ca?s=128&d=identicon&r=PG", "display_name": "Fredro", "link": "https://stackoverflow.com/users/2437322/fredro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1409, "favorite_count": 0, "accepted_answer_id": 50827741, "answer_count": 1, "score": 0, "last_activity_date": 1528851342, "creation_date": 1526483696, "last_edit_date": 1526491425, "question_id": 50374523, "link": "https://stackoverflow.com/questions/50374523/qt-qml-translation-retranslate", "title": "QT QML Translation retranslate", "body": "<p>I'm running <em>QT</em> <code>5.10.1</code> on Windows, the <code>app</code> is only made in <code>QML</code>. I'm trying to use the new <code>retranslate()</code> to change language during runtime. The current code is working fine with texts that use the <code>getEmptyString()</code> appended to it. But the rest of the text within <code>qsTr()</code> does not. <code>TranslationHandler.cpp</code> is empty and I haven't cleaned up the includes.</p>\n\n<p>So I'm able to set a language from the QML using the context property. Also I checked so the engine is the same instance. Any ideas why the retranslate function is not working?</p>\n\n<p>Thanks for the help!</p>\n\n<p><strong>main.cpp :</strong></p>\n\n<pre><code>#include &lt;QGuiApplication&gt;\n#include &lt;QQmlApplicationEngine&gt;\n#include &lt;QTranslator&gt;\n#include &lt;QtGui&gt;\n#include &lt;QQmlContext&gt;\n#include &lt;QDebug&gt;\n#include &lt;QQmlEngine&gt;\n#include \"translationhandler.h\"\n\nint main(int argc, char *argv[])\n{\n    QCoreApplication::setAttribute(Qt::AA_EnableHighDpiScaling);\n    QGuiApplication app(argc, argv);\n\n    QQmlApplicationEngine engine;\n    TranslationHandler transHndl(&amp;engine);\n\n    engine.rootContext()-&gt;setContextProperty(\"translateHandler\", &amp;transHndl);\n    engine.load(QUrl(QStringLiteral(\"qrc:/main.qml\")));\n\n    if (engine.rootObjects().isEmpty())\n        return -1;\n    return app.exec();\n}\n</code></pre>\n\n<hr>\n\n<p><strong>TranslationHandler.h :</strong></p>\n\n<pre><code>#ifndef TRANSLATIONHANDLER_H\n#define TRANSLATIONHANDLER_H\n#include &lt;QTranslator&gt;\n#include &lt;QString&gt;\n#include &lt;QGuiApplication&gt;\n#include &lt;QObject&gt;\n#include &lt;QDebug&gt;\n#include &lt;QQmlEngine&gt;\n\nclass TranslationHandler : public QObject\n{\n    Q_OBJECT\n    Q_PROPERTY(QString emptyString READ getEmptyString NOTIFY languageChanged)\n\npublic:\n    explicit TranslationHandler(QQmlEngine *engine)\n    {\n        m_translator1 = new QTranslator(this);\n        m_currentLanguage = \"en\";\n        m_engine = engine;\n    }\n\n    QString getEmptyString()\n    {\n        return \"\";\n    }\n\n    Q_INVOKABLE QString getCurrentLanguage()\n    {\n        return m_currentLanguage;\n    }\n\n    Q_INVOKABLE void selectLanguage(QString language)\n    {\n        if(language == QString(\"jp\"))\n        {\n            m_currentLanguage = language;\n            m_translator1-&gt;load(\":/translation/qml_jp.qm\");\n            qGuiApp-&gt;installTranslator(m_translator1);\n            m_engine-&gt;retranslate();\n        }\n        if(language == QString(\"en\"))\n        {\n            m_currentLanguage = language;\n            qGuiApp-&gt;removeTranslator(m_translator1);\n            m_engine-&gt;retranslate();\n        }\n        emit languageChanged();\n    }\n\nsignals:\n    void languageChanged();\n\nprivate:\n    QTranslator *m_translator1;\n    QString m_currentLanguage;\n    QQmlEngine *m_engine;\n\npublic slots:\n};\n\n#endif // TRANSLATIONHANDLER_H\n</code></pre>\n"}, {"tags": ["c++", "memory", "vector", "dll"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1526483540, "post_id": 50374437, "comment_id": 87765150, "body": "I&#39;m not sure if this is what you are asking about, but <code>std::vector</code> doesn&#39;t &quot;leak&quot; memory in the usual sense of the word though it can be stubborn about releasing it&#39;s memory when reducing it&#39;s size or clearing it (it&#39;s usually not allowed to). Try the non-binding <a href=\"http://en.cppreference.com/w/cpp/container/vector/shrink_to_fit\" rel=\"nofollow noreferrer\">std::vector::shrink_to_fit</a> or assigning a default constructed instance to it (<code>my_vector = {};</code>)."}, {"owner": {"reputation": 457, "user_id": 6400277, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10206759054794233/picture?type=large", "display_name": "Mathieu Gauquelin", "link": "https://stackoverflow.com/users/6400277/mathieu-gauquelin"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1526483627, "post_id": 50374437, "comment_id": 87765199, "body": "But is it normal than even if I don&#39;t change the size, or clear the vector, when I change a value in the second call, the memory continue to increase?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1526483661, "post_id": 50374437, "comment_id": 87765225, "body": "No, if you you don&#39;t add elements to an <code>std::vector</code> it will not grow. The problem is likely elsewhere."}, {"owner": {"reputation": 457, "user_id": 6400277, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10206759054794233/picture?type=large", "display_name": "Mathieu Gauquelin", "link": "https://stackoverflow.com/users/6400277/mathieu-gauquelin"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1526483726, "post_id": 50374437, "comment_id": 87765270, "body": "It is was I understood reading the documentation, thank you for confirming. So I don&#39;t understand what my program is not doing this."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 3, "creation_date": 1526483737, "post_id": 50374437, "comment_id": 87765278, "body": "Have you proven within your own environment that this code is responsible for the extra memory use? If this code is commented out, does the memory still go up?"}, {"owner": {"reputation": 457, "user_id": 6400277, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10206759054794233/picture?type=large", "display_name": "Mathieu Gauquelin", "link": "https://stackoverflow.com/users/6400277/mathieu-gauquelin"}, "edited": false, "score": 0, "creation_date": 1526483897, "post_id": 50374437, "comment_id": 87765391, "body": "Good remark. But yes I did this, and the memory don&#39;t increase when I comment my line."}, {"owner": {"reputation": 2956, "user_id": 5909388, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uNuNWo_bCHA/AAAAAAAAAAI/AAAAAAAAABg/rciVxcULLHc/photo.jpg?sz=128", "display_name": "Kaveh Vahedipour", "link": "https://stackoverflow.com/users/5909388/kaveh-vahedipour"}, "edited": false, "score": 0, "creation_date": 1526483938, "post_id": 50374437, "comment_id": 87765422, "body": "Couldn&#39;t you not just compile with ASAN on Linux and trace down, where you are leaking the memory?"}, {"owner": {"reputation": 457, "user_id": 6400277, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10206759054794233/picture?type=large", "display_name": "Mathieu Gauquelin", "link": "https://stackoverflow.com/users/6400277/mathieu-gauquelin"}, "reply_to_user": {"reputation": 2956, "user_id": 5909388, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uNuNWo_bCHA/AAAAAAAAAAI/AAAAAAAAABg/rciVxcULLHc/photo.jpg?sz=128", "display_name": "Kaveh Vahedipour", "link": "https://stackoverflow.com/users/5909388/kaveh-vahedipour"}, "edited": false, "score": 0, "creation_date": 1526483991, "post_id": 50374437, "comment_id": 87765458, "body": "@KavehVahedipour I can&#39;t, I am on Windows 7. Sorry"}, {"owner": {"reputation": 2956, "user_id": 5909388, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uNuNWo_bCHA/AAAAAAAAAAI/AAAAAAAAABg/rciVxcULLHc/photo.jpg?sz=128", "display_name": "Kaveh Vahedipour", "link": "https://stackoverflow.com/users/5909388/kaveh-vahedipour"}, "edited": false, "score": 0, "creation_date": 1526484083, "post_id": 50374437, "comment_id": 87765524, "body": "I understand. I saw that you referred to <code>DLL</code>s. Couldn&#39;t you just take that part of the code, that you are suspecting and take that to Linux?"}, {"owner": {"reputation": 457, "user_id": 6400277, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10206759054794233/picture?type=large", "display_name": "Mathieu Gauquelin", "link": "https://stackoverflow.com/users/6400277/mathieu-gauquelin"}, "reply_to_user": {"reputation": 2956, "user_id": 5909388, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uNuNWo_bCHA/AAAAAAAAAAI/AAAAAAAAABg/rciVxcULLHc/photo.jpg?sz=128", "display_name": "Kaveh Vahedipour", "link": "https://stackoverflow.com/users/5909388/kaveh-vahedipour"}, "edited": false, "score": 0, "creation_date": 1526484146, "post_id": 50374437, "comment_id": 87765566, "body": "@KavehVahedipour I do know Linux, so I don&#39;t sorry. And I can debug the dll if you want me to add some breakpoints."}], "owner": {"reputation": 457, "user_id": 6400277, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10206759054794233/picture?type=large", "display_name": "Mathieu Gauquelin", "link": "https://stackoverflow.com/users/6400277/mathieu-gauquelin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526483663, "creation_date": 1526483392, "last_edit_date": 1526483663, "question_id": 50374437, "link": "https://stackoverflow.com/questions/50374437/memory-leak-when-changing-values-of-a-c-vector-in-a-dll", "title": "Memory leak when changing values of a C++ vector in a DLL", "body": "<p>I am working on a C# plugin which calls a C++ DLL (with C wrapper in the DLL to do the link). In the C# program, I call several times the same method <code>callMe</code> of my DLL. In this method, I change values in a vector <code>thermogram</code> to perform others operations later.</p>\n\n<p>Between each call, I try to free the memory because for now, at each call the RAM increase of 18 Mo so it is not good at all. I don't understand why because at each call, I just replace some values in an existing vector (2000 to be precise). So I tried to free the memory in different way (methods from vector class : erase, clear, shrink_to_fit) but nothing change the result. And all forums talk about these previous ways so I don't know what to try more.</p>\n\n<p>C++ method :</p>\n\n<pre><code>bool MyClass::callMe(int pixel_value, int iImage)\n{\n    if (thermogram.size() == 0) {\n        thermogram.resize(_nFrame - iFramesPass);\n    }\n    thermogram[iImage] = (double)pixel_value;\n    sizeThermo = iImage;\n    return true;\n}\n</code></pre>\n\n<p>I also try not to clear between two calls, just to replace values at each new call, but the memory stll increase.</p>\n\n<p>Maybe I miss something about calling a method from a DLL, or just I have a memory leak?</p>\n"}, {"tags": ["c++", "llvm", "llvm-ir"], "comments": [{"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1526487845, "post_id": 50374289, "comment_id": 87767806, "body": "I don&#39;t use the C++ API, but ... is the <code>insertelement</code> instruction not being added to the BB somehow?"}, {"owner": {"reputation": 3788, "user_id": 7112888, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-P-jq3DoZPqI/AAAAAAAAAAI/AAAAAAAAS3Y/jpjvZZxoVQY/photo.jpg?sz=128", "display_name": "zoecarver", "link": "https://stackoverflow.com/users/7112888/zoecarver"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1526487970, "post_id": 50374289, "comment_id": 87767865, "body": "@o11c that would make sense. I thought that the value returned by insert element would be the populated vector, but now that I look at it - that does not appear to be the case. Thank you for the suggestion!"}, {"owner": {"reputation": 3788, "user_id": 7112888, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-P-jq3DoZPqI/AAAAAAAAAAI/AAAAAAAAS3Y/jpjvZZxoVQY/photo.jpg?sz=128", "display_name": "zoecarver", "link": "https://stackoverflow.com/users/7112888/zoecarver"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1526488177, "post_id": 50374289, "comment_id": 87767976, "body": "That is probably correct. Like I said, I am very new to LLVM. What is the difference between <code>insertelement </code> and <code>insertvalue</code>? ~~and is <code>insertelement </code> different from what I have <code>InsertElementInst</code>?~~ Never mind I figured out they are the same. Thank you for the help."}, {"owner": {"reputation": 3788, "user_id": 7112888, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-P-jq3DoZPqI/AAAAAAAAAAI/AAAAAAAAS3Y/jpjvZZxoVQY/photo.jpg?sz=128", "display_name": "zoecarver", "link": "https://stackoverflow.com/users/7112888/zoecarver"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1526488488, "post_id": 50374289, "comment_id": 87768147, "body": "@o11c that makes a lot of sense - thank you. I will see if I can implement <code>insertvalue</code>."}, {"owner": {"reputation": 3788, "user_id": 7112888, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-P-jq3DoZPqI/AAAAAAAAAAI/AAAAAAAAS3Y/jpjvZZxoVQY/photo.jpg?sz=128", "display_name": "zoecarver", "link": "https://stackoverflow.com/users/7112888/zoecarver"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1526488872, "post_id": 50374289, "comment_id": 87768319, "body": "I tried using <code>insertvalue</code>: <code>InsertValueInst::Create(emptyVector, numberValue,  ArrayRef&lt;unsigned&gt;(0));</code> but, I got the same issue (<code>&lt;badref&gt;</code>)."}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1526492852, "post_id": 50374289, "comment_id": 87770422, "body": "Ugh, nevermind, I was wrong ... <code>insertvalue</code> is for structs/arrays. (I&#39;m deleting obsolete comments now.) I guess you <i>have</i> to insert into a BB if the entire vector isn&#39;t made of constants. Probably you should be using the Builder."}, {"owner": {"reputation": 3788, "user_id": 7112888, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-P-jq3DoZPqI/AAAAAAAAAAI/AAAAAAAAS3Y/jpjvZZxoVQY/photo.jpg?sz=128", "display_name": "zoecarver", "link": "https://stackoverflow.com/users/7112888/zoecarver"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1526492909, "post_id": 50374289, "comment_id": 87770446, "body": "Thanks - I will see if I can get that working."}, {"owner": {"reputation": 3788, "user_id": 7112888, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-P-jq3DoZPqI/AAAAAAAAAAI/AAAAAAAAS3Y/jpjvZZxoVQY/photo.jpg?sz=128", "display_name": "zoecarver", "link": "https://stackoverflow.com/users/7112888/zoecarver"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1526493365, "post_id": 50374289, "comment_id": 87770677, "body": "@o11c inserting it into the builder worked perfectly - thank you so much - if you put that as an answer I will mark it as correct."}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1526499107, "post_id": 50374289, "comment_id": 87773466, "body": "I don&#39;t feel confident writing an answer I haven&#39;t tested, and I don&#39;t use the C++ interface. You&#39;re allowed to answer the question yourself and mark it as accepted - you even get a badge for it."}], "answers": [{"tags": [], "owner": {"reputation": 3788, "user_id": 7112888, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-P-jq3DoZPqI/AAAAAAAAAAI/AAAAAAAAS3Y/jpjvZZxoVQY/photo.jpg?sz=128", "display_name": "zoecarver", "link": "https://stackoverflow.com/users/7112888/zoecarver"}, "is_accepted": true, "score": 0, "last_activity_date": 1526512645, "creation_date": 1526512645, "answer_id": 50381228, "question_id": 50374289, "link": "https://stackoverflow.com/questions/50374289/issue-creating-vector-llvm/50381228#50381228", "title": "Issue Creating Vector LLVM", "body": "<p>The issue was that I did not add the vector to my builder. The following did the trick for me:</p>\n\n<pre><code>Builder.Insert(fullVector);\n</code></pre>\n"}], "owner": {"reputation": 3788, "user_id": 7112888, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-P-jq3DoZPqI/AAAAAAAAAAI/AAAAAAAAS3Y/jpjvZZxoVQY/photo.jpg?sz=128", "display_name": "zoecarver", "link": "https://stackoverflow.com/users/7112888/zoecarver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 1, "accepted_answer_id": 50381228, "answer_count": 1, "score": 1, "last_activity_date": 1526512645, "creation_date": 1526482966, "last_edit_date": 1526485345, "question_id": 50374289, "link": "https://stackoverflow.com/questions/50374289/issue-creating-vector-llvm", "title": "Issue Creating Vector LLVM", "body": "<p>I am trying to create a vector and return it as a value using llvm. Here is what my code looks like:</p>\n\n<pre><code>  Value *ArrayAST::codeGen() {\n    Type *dType = Type::getDoubleTy(mContext);\n    Type *vectorType = VectorType::get(dType, 4);\n    Value *emptyVector = UndefValue::get(vectorType);\n    Constant *index0 = Constant::getIntegerValue(dType, llvm::APInt(32, 0));\n    Value *numberValue = numbers[0] -&gt; codeGen(); // double 1.000000e+00\n    Value *fullVector = InsertElementInst::Create(emptyVector, numberValue, index0);\n    return fullVector;\n  }\n</code></pre>\n\n<p>This generates the following IR code:</p>\n\n<pre><code>define &lt;4 x double&gt; @x() {\nentry:\n  ret &lt;4 x double&gt; &lt;badref&gt;\n}\n</code></pre>\n\n<p>But, as you can see above, there is an issue: <code>&lt;badref&gt;</code>. And when I try to run it, it fails to build:</p>\n\n<pre><code>llvm-as: out.ll:3:21: error: expected type\n  ret &lt;4 x double&gt; &lt;badref&gt;\n</code></pre>\n\n<p>I am new to LLVM and I am not quite sure what the best way to fix this is. </p>\n\n<h3>Edit</h3>\n\n<p>If it is helpful, all of the code is on <a href=\"https://github.com/pudility/superflow/tree/array\" rel=\"nofollow noreferrer\">GitHub here</a>.</p>\n\n<h3>Edit 2</h3>\n\n<p>If I am not mistaken (I totally could be) the IR code should look like this:</p>\n\n<pre><code>define &lt;4 x double&gt; @x() {\nentry:\n  %tmp4 = insertelement &lt;4 x double&gt; undef, double 1.000000e+01, i32 0\n  ret &lt;4 x double&gt; %tmp4\n}\n</code></pre>\n"}, {"tags": ["c++", "zlib"], "answers": [{"tags": [], "owner": {"reputation": 741, "user_id": 6270435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-QLPpgzDpiY8/AAAAAAAAAAI/AAAAAAAADtg/oHEaw-Ykeak/photo.jpg?sz=128", "display_name": "Trantor", "link": "https://stackoverflow.com/users/6270435/trantor"}, "is_accepted": true, "score": 1, "last_activity_date": 1526557337, "creation_date": 1526557337, "answer_id": 50390592, "question_id": 50374152, "link": "https://stackoverflow.com/questions/50374152/didnt-find-the-required-zlib-library/50390592#50390592", "title": "Didn&#39;t Find the Required Zlib Library", "body": "<p>\"target machine type 'x86'\" looks as if you need to change a compiler option from x86 target to 64 target...</p>\n"}], "owner": {"reputation": 269, "user_id": 7667372, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/daa61156e79815eb3f78c473682fdb0f?s=128&d=identicon&r=PG&f=1", "display_name": "ibr", "link": "https://stackoverflow.com/users/7667372/ibr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 50390592, "answer_count": 1, "score": 2, "last_activity_date": 1526557337, "creation_date": 1526482567, "last_edit_date": 1526482761, "question_id": 50374152, "link": "https://stackoverflow.com/questions/50374152/didnt-find-the-required-zlib-library", "title": "Didn&#39;t Find the Required Zlib Library", "body": "<p>I'm using a code written in C++, i have a problem regarding the compilation which is that my project is 64 bit, and I'm using zlib.lib, which will generate the error.</p>\n\n<blockquote>\n  <p>module machine type 'x64' conflicts with target machine type 'x86'</p>\n</blockquote>\n\n<p>I didn't find GNU 64 bit, but what i need is only the zlib.lib as 64 bit, does it exist?</p>\n"}, {"tags": ["c++", "image", "cimg"], "answers": [{"comments": [{"owner": {"reputation": 1363, "user_id": 1872993, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/41e9c2c0f9b961d684d3ddf42942281d?s=128&d=identicon&r=PG", "display_name": "Stijn Frishert", "link": "https://stackoverflow.com/users/1872993/stijn-frishert"}, "edited": false, "score": 0, "creation_date": 1526483185, "post_id": 50374282, "comment_id": 87764903, "body": "Right. But my software is loading arbitrary images, so I wouldn&#39;t know beforehand whether it&#39;s going to be a JPEG (sRGB) or PNG (RGB), and having to call a command line tool to figure that out seems like a band-aid, considering CImg loads the image and should know. But I&#39;ll update the question, because it doesn&#39;t clearly state I&#39;d like to know the color space from CImg itself."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "reply_to_user": {"reputation": 1363, "user_id": 1872993, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/41e9c2c0f9b961d684d3ddf42942281d?s=128&d=identicon&r=PG", "display_name": "Stijn Frishert", "link": "https://stackoverflow.com/users/1872993/stijn-frishert"}, "edited": false, "score": 0, "creation_date": 1526497125, "post_id": 50374282, "comment_id": 87772507, "body": "@fmw42 Fred, do you know if, in ImageMagick, output of an image as PNM causes an implicit colourspace change to RGB? I mean if the input image is say CMYK."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "reply_to_user": {"reputation": 1363, "user_id": 1872993, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/41e9c2c0f9b961d684d3ddf42942281d?s=128&d=identicon&r=PG", "display_name": "Stijn Frishert", "link": "https://stackoverflow.com/users/1872993/stijn-frishert"}, "edited": false, "score": 0, "creation_date": 1526544291, "post_id": 50374282, "comment_id": 87788209, "body": "Ok, I checked the ImageMagick source code, and around line 1824 of <code>coders&#47;pnm.c</code> it seems to always convert images to sRGB colourspace before writing to disk as PNM files."}, {"owner": {"reputation": 1363, "user_id": 1872993, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/41e9c2c0f9b961d684d3ddf42942281d?s=128&d=identicon&r=PG", "display_name": "Stijn Frishert", "link": "https://stackoverflow.com/users/1872993/stijn-frishert"}, "edited": false, "score": 0, "creation_date": 1526549039, "post_id": 50374282, "comment_id": 87791278, "body": "Whoa, you&#39;ve thoroughly updated your answer, thanks! So the conclusion is CImg in its current state doesn&#39;t store colour space. I&#39;m probably going to request that feature on the github then, as apart from that it looks like a convenient library. We&#39;re not in the position to assume any command line tools on the users system."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "reply_to_user": {"reputation": 1363, "user_id": 1872993, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/41e9c2c0f9b961d684d3ddf42942281d?s=128&d=identicon&r=PG", "display_name": "Stijn Frishert", "link": "https://stackoverflow.com/users/1872993/stijn-frishert"}, "edited": false, "score": 0, "creation_date": 1526549338, "post_id": 50374282, "comment_id": 87791475, "body": "I hope you get plenty of success requesting a new feature or getting the behaviour clarified from David. Please click <code>share</code> under my answer here and copy the link and paste it into anything you send CImg developers and likewise if you get a response from them please add a link here on StackOverflow to whatever you find out. Then we will all learn! Good luck! Of course, if you get a better solution, add that as an answer here and mark it as correct - I am not in the least concerned at losing any points:-)"}, {"owner": {"reputation": 1363, "user_id": 1872993, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/41e9c2c0f9b961d684d3ddf42942281d?s=128&d=identicon&r=PG", "display_name": "Stijn Frishert", "link": "https://stackoverflow.com/users/1872993/stijn-frishert"}, "edited": false, "score": 1, "creation_date": 1526637578, "post_id": 50374282, "comment_id": 87832755, "body": "Thanks Mark, you&#39;ve been a great help! I issued a feature request here, with a reference link to this post: <a href=\"https://github.com/dtschump/CImg/issues/200\" rel=\"nofollow noreferrer\">github.com/dtschump/CImg/issues/200</a>."}], "tags": [], "owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": true, "score": 1, "last_activity_date": 1526638270, "last_edit_date": 1526638270, "creation_date": 1526482951, "answer_id": 50374282, "question_id": 50374103, "link": "https://stackoverflow.com/questions/50374103/how-do-you-retrieve-the-colour-space-with-cimg-of-an-image-loaded-with-cimg/50374282#50374282", "title": "How do you retrieve the colour space with CImg of an image loaded with CImg?", "body": "<p>If your image is in PNG format, it is necessarily RGB or RGBA because PNG doesn't support CMYK.</p>\n\n<p>If it is JPEG, I would assume it is in sRGB colourspace, but you could check with <strong>ImageMagick</strong> first, using:</p>\n\n<pre><code>identify -format \"%[colorspace]\" YourImage.xxx\n</code></pre>\n\n<hr>\n\n<p>I generated a CMYK image using <strong>Imagemagick</strong> and loaded it using <strong>CImg</strong>. It appears to perform no transformation whatsoever as a result of the colorspace and merely returns the first byte of each pixel as red (though it is cyan in reality), the second as green (though it is magenta) and so on...</p>\n\n<p>I also compiled <strong>CImg</strong> with debugging info, with <code>cimg_use_jpeg</code> defined as <code>1</code> (so it uses <code>libjpeg</code>) and stepped through it. It <em>could</em> see in the <code>jpeg_info_struct</code> in function <code>_load_jpeg</code> that the image is CMYK, but it ignores this info - I guess you could patch <code>CImg</code> and modify a global variable quite readily to store the colourspace - if you like hacking about! Or you could request David Tschumperl\u00e9 to do so via the CImg GitHub page which he does respond to...</p>\n\n<p><a href=\"https://i.stack.imgur.com/N8mey.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/N8mey.jpg\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>Here is a possible work-around. If you don't build with <code>cimg_use_jpeg</code>, or <code>cimg_use_png</code>, or <code>cimg_use_tiff</code>, <strong>CImg</strong> will delegate reading files to <strong>ImageMagick</strong>'s command-line tool called <code>convert</code>. It will then convert your image to PNM format (in a pipe, not on disk) and <strong>CImg</strong> will read the data from the pipe. Crucially, <strong>ImageMagick</strong> always converts images being written to PNM format into sRGB colourspace, so if you have <strong>ImageMagick</strong> convert your images (by not using <strong>CImg</strong>'s built-in libraries), your images will always be read in sRGB colourspace. Essentially, <strong>CImg</strong> does this to read files when delegating to <strong>ImageMagick</strong>:</p>\n\n<pre><code>convert input.jpg pnm:-\n</code></pre>\n\n<p>and reads the output.</p>\n\n<p>You will note that your 4-channel (previously CMYK) image suddenly becomes a 3-channel (now sRGB) image when <strong>CImg</strong> has delegated to <strong>ImageMagick</strong> because the output from <strong>ImageMagick</strong> is a, necessarily 3-channel, PNM file.</p>\n\n<hr>\n\n<p>If you want to go even further...</p>\n\n<p>If you set an environment variable, you can control where <strong>CImg</strong> looks for <code>convert</code>, so you could point it to your own <em>\"wrapper\"</em> around the real <strong>ImageMagick</strong> <code>convert</code>. </p>\n\n<p>So, in concrete terms, if you do:</p>\n\n<pre><code>export cimg_convert_path=\"/Users/YourUser/bin/convertWrapper\"\n</code></pre>\n\n<p>before running anything with <strong>CImg</strong> in it, or at the start of your program, with:</p>\n\n<pre><code>setenv(\"cimg_convert_path\",\"/Users/YourUser/bin/convertWrapper\",1);\n</code></pre>\n\n<p><strong>CImg</strong> will run the following command to load your files:</p>\n\n<pre><code>/Users/YourUser/bin/convertWrapper input.jpg pnm:-\n</code></pre>\n\n<p>So, I am suggesting that in that wrapper file, you could modify the parameters passed to <code>convert</code> so it actually does something else:</p>\n\n<pre><code>convert input.jpg -auto-level pnm:-\n</code></pre>\n\n<p>So, <code>convertWrapper</code> would contain:</p>\n\n<pre><code>#!/bin/bash\n\n# Pick up arguments and put in array\nargs=( \"$@\" )\n\n# Remove last argument (\"pnm:-\")\nunset 'args[${#args[@]}-1]'\n\n# Add our \"-auto-level\" parameter in before last item\nargs+=(\"-auto-level\")\n\n# Re-append \"pnm:-\"\nargs+=(\"pnm:-\")\n\n# Debug output to /tmp/a\necho \"BEFORE: $@\"         &gt;&gt; /tmp/a\necho \"AFTER:  ${args[@]}\" &gt;&gt; /tmp/a\n\n# Call real \"convert\" with modified parameters\n/usr/local/bin/magick \"${args[@]}\"\n</code></pre>\n\n<p>This approach means you don't need to modify <strong>CImg</strong>.</p>\n"}], "owner": {"reputation": 1363, "user_id": 1872993, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/41e9c2c0f9b961d684d3ddf42942281d?s=128&d=identicon&r=PG", "display_name": "Stijn Frishert", "link": "https://stackoverflow.com/users/1872993/stijn-frishert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 529, "favorite_count": 0, "accepted_answer_id": 50374282, "answer_count": 1, "score": 0, "last_activity_date": 1526638270, "creation_date": 1526482431, "last_edit_date": 1526483300, "question_id": 50374103, "link": "https://stackoverflow.com/questions/50374103/how-do-you-retrieve-the-colour-space-with-cimg-of-an-image-loaded-with-cimg", "title": "How do you retrieve the colour space with CImg of an image loaded with CImg?", "body": "<p>I am loading an image with CIMG, like so:</p>\n\n<p><code>CImg&lt;unsigned char&gt; image(\"lena.png\");</code></p>\n\n<p>How do I know the e.g. four channels of that image represent RGBA colours and not CMYK? I know <code>CImg&lt;&gt;::spectrum()</code> gives me the amount of channels, but even the documentation says <em>\"The meaning of the pixel values is not linked up to the number of channels (e.g. a 4-channel image may indifferently stands for a RGBA or CMYK color image)\"</em>.</p>\n\n<p><strong>I have searched the documentation and tutorials, but there seems to be no function to tell me the meaning of the channel data.</strong></p>\n\n<p>So, how do I know kind of data I'm working with? Can I just assume all newly loaded image are in either RGB or RGBA?</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 1290, "user_id": 4180176, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1022787394506806/picture?type=large", "display_name": "Joshua Nixon", "link": "https://stackoverflow.com/users/4180176/joshua-nixon"}, "edited": false, "score": 0, "creation_date": 1526485539, "post_id": 50374859, "comment_id": 87766474, "body": "I get an error <code>&#39;std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt;::getline&#39;: no overloaded function takes 1 arguments</code> Any fix?"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 1290, "user_id": 4180176, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1022787394506806/picture?type=large", "display_name": "Joshua Nixon", "link": "https://stackoverflow.com/users/4180176/joshua-nixon"}, "edited": false, "score": 1, "creation_date": 1526485900, "post_id": 50374859, "comment_id": 87766697, "body": "@JoshuaNixon: I made a confusion between different <code>getline</code> functions. Fixed now."}, {"owner": {"reputation": 1290, "user_id": 4180176, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1022787394506806/picture?type=large", "display_name": "Joshua Nixon", "link": "https://stackoverflow.com/users/4180176/joshua-nixon"}, "edited": false, "score": 0, "creation_date": 1526487182, "post_id": 50374859, "comment_id": 87767448, "body": "std has no member getline, so it says :P FIXED: needed to add the string header"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 1, "last_activity_date": 1526485852, "last_edit_date": 1526485852, "creation_date": 1526484691, "answer_id": 50374859, "question_id": 50374003, "link": "https://stackoverflow.com/questions/50374003/input-data-type-check-in-loop-not-working-as-intended-c/50374859#50374859", "title": "Input data type check in loop not working as intended (C++)", "body": "<p>Your main problem is that you only clear the error condition but never <em>flush</em> the offending input, so the input stream stays at the erroneous characters. The common way is to read (and discard) a full line for a failed conversion:</p>\n\n<pre><code>while (true) {\n    std::cout &lt;&lt; \"&gt;&gt;&gt; \";\n    std::cin &gt;&gt; input;\n    std::cout &lt;&lt; std::flush;\n\n    if (std::cin.eof()) {    // do not try to read past an eof!\n        input = 0;\n        break;\n    }\n    if (std::cin.fail() || input &lt; 0) {\n        std::string line;\n        std::cin.clear();              // reset the fail flag\n        std::getline(std::cin, line);  // read until end of line\n        std::cout &lt;&lt; \"Failed\";\n        continue;\n    }\n\n    break;\n}\n</code></pre>\n"}], "owner": {"reputation": 1290, "user_id": 4180176, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1022787394506806/picture?type=large", "display_name": "Joshua Nixon", "link": "https://stackoverflow.com/users/4180176/joshua-nixon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 50374859, "answer_count": 1, "score": 0, "last_activity_date": 1526485852, "creation_date": 1526482138, "question_id": 50374003, "link": "https://stackoverflow.com/questions/50374003/input-data-type-check-in-loop-not-working-as-intended-c", "title": "Input data type check in loop not working as intended (C++)", "body": "<p>I am trying to get user input and then check if the input is an integer and then return it. If I enter an integer then it will return the value but if the input is a string then it will endlessly output <code>&gt;&gt;&gt;Failed</code></p>\n\n<p>I was using <a href=\"https://stackoverflow.com/a/18728865/4180176\">SO Answer</a> as the base.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n\n\nint getRandomNumber(int maxNum) {\n    return rand() % maxNum + 1;\n}\n\nint getIntInput() {\n    int input;\n\n    while (true) {\n        std::cout &lt;&lt; \"&gt;&gt;&gt; \";\n        std::cin &gt;&gt; input;\n        std::cin.clear();\n        std::cout &lt;&lt; std::flush;\n\n        if (std::cin.fail() || input &lt; 0) {\n            std::cout &lt;&lt; \"Failed\";\n            continue;\n        }\n\n        break;\n    }\n\n    return input;\n}\n\n\nint main() {\n    int numGuessed;\n    int randomNum = getRandomNumber(100);\n\n    numGuessed = getIntInput();\n}\n</code></pre>\n"}, {"tags": ["c++", "stringtokenizer"], "comments": [{"owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 4, "creation_date": 1526482154, "post_id": 50373999, "comment_id": 87764149, "body": "std::regex + std::atoi"}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 2, "creation_date": 1526482170, "post_id": 50373999, "comment_id": 87764165, "body": "Yep, C++ is taxing brains alright."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 5, "creation_date": 1526482281, "post_id": 50373999, "comment_id": 87764259, "body": "The declaration <code>char *word=&quot;R12_X8_10&quot;;</code> is invalid C++ anyway, fix that one first."}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1526482413, "post_id": 50374066, "comment_id": 87764350, "body": "<code>sscanf()</code> works in C++ all right, but <code>char *word = &quot;...&quot;;</code> does not. And header should be &lt;cstdio&gt;"}, {"owner": {"reputation": 1002, "user_id": 8078317, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ldZij.jpg?s=128&g=1", "display_name": "Nitro", "link": "https://stackoverflow.com/users/8078317/nitro"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1526482570, "post_id": 50374066, "comment_id": 87764453, "body": "You are right, I just tried it. Point is Hassan is not going to declare the string that way. It&#39;s just an example"}, {"owner": {"reputation": 147, "user_id": 1114301, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a12495bb536fde06bd5a308af63c1c0?s=128&d=identicon&r=PG", "display_name": "Hassan", "link": "https://stackoverflow.com/users/1114301/hassan"}, "edited": false, "score": 0, "creation_date": 1526482770, "post_id": 50374066, "comment_id": 87764607, "body": "@Nitro, your suggestion is a good and easy one.  I can convert the *char to std::string if needed. Thanks."}], "tags": [], "owner": {"reputation": 1002, "user_id": 8078317, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ldZij.jpg?s=128&g=1", "display_name": "Nitro", "link": "https://stackoverflow.com/users/8078317/nitro"}, "is_accepted": false, "score": 2, "last_activity_date": 1526482321, "creation_date": 1526482321, "answer_id": 50374066, "question_id": 50373999, "link": "https://stackoverflow.com/questions/50373999/extracting-numbers-from-a-string-in-c/50374066#50374066", "title": "Extracting numbers from a string in C++", "body": "<p>You can try this.</p>\n\n<pre><code>int a,b,c;\nchar *word=\"R12_X8_10\";\n    sscanf(word,\"R%d_X%d_%d\",&amp;a,&amp;b,&amp;c);\n</code></pre>\n\n<p>I know this is a c++ system, but I also know that scanf and sscanf work with c++ compiler if stdio.h in included.</p>\n\n<p>I hope this helps.</p>\n"}, {"comments": [{"owner": {"reputation": 11800, "user_id": 1594913, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tLf29.jpg?s=128&g=1", "display_name": "JBL", "link": "https://stackoverflow.com/users/1594913/jbl"}, "edited": false, "score": 0, "creation_date": 1526483633, "post_id": 50374476, "comment_id": 87765207, "body": "This is actually a C++ solution!"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 3, "last_activity_date": 1526483899, "last_edit_date": 1526483899, "creation_date": 1526483540, "answer_id": 50374476, "question_id": 50373999, "link": "https://stackoverflow.com/questions/50373999/extracting-numbers-from-a-string-in-c/50374476#50374476", "title": "Extracting numbers from a string in C++", "body": "<p>The C++ stream way would be to get or simply ignore the <em>marking</em> characters. For example to ignore them you could use:</p>\n\n<pre><code>const char *word = \"R12_X8_10\";\nint i, j, k;\nstd::stringstream ss(word);\n\nss.ignore(1) &gt;&gt; i;\nss.ignore(2) &gt;&gt; j;\nss.ignore(1) &gt;&gt; k;\n</code></pre>\n\n<p>or even (more compact if not more readable):</p>\n\n<pre><code>((ss.ignore(1) &gt;&gt; i).ignore(2) &gt;&gt; j).ignore(1) &gt;&gt; k;\n</code></pre>\n\n<p>(unrelated, but note the <code>const</code> for <code>word</code> because a string litteral should not be assigned to a non const pointer).</p>\n"}], "owner": {"reputation": 147, "user_id": 1114301, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a12495bb536fde06bd5a308af63c1c0?s=128&d=identicon&r=PG", "display_name": "Hassan", "link": "https://stackoverflow.com/users/1114301/hassan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1526483899, "creation_date": 1526482111, "last_edit_date": 1526482164, "question_id": 50373999, "link": "https://stackoverflow.com/questions/50373999/extracting-numbers-from-a-string-in-c", "title": "Extracting numbers from a string in C++", "body": "<p>Suppose I have the following char array:</p>\n\n<pre><code>char *word=\"R12_X8_10\";\n</code></pre>\n\n<p>The number of digits are not fixed but the locations with respect to the non-numeric characters are fixed. How can I extract the numbers without boost? I  should get {\"12\", \"8\", \"10\"} by splitting the word.</p>\n\n<p>This is supposed to be an easy task as I have done in Java many times but the in C++ it is taxing my brain. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 634, "user_id": 9690677, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GCJst.jpg?s=128&g=1", "display_name": "Luke Ramsden", "link": "https://stackoverflow.com/users/9690677/luke-ramsden"}, "edited": false, "score": 1, "creation_date": 1526481961, "post_id": 50373923, "comment_id": 87763996, "body": "You aren&#39;t breaking out of the loop anywhere..."}, {"owner": {"reputation": 1545, "user_id": 2687589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0ca2e33a502cc32f12a023a29886f8e7?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon McKenzie", "link": "https://stackoverflow.com/users/2687589/brandon-mckenzie"}, "edited": false, "score": 0, "creation_date": 1526482689, "post_id": 50373923, "comment_id": 87764549, "body": "Can you clarify &quot;continuously running console&quot;?  Is it at least showing the error message and asking for more input, or is it just hanging?  What inputs have you tried?"}, {"owner": {"reputation": 2236, "user_id": 8124392, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/29ccdaed954c2c2d9da35fcefcadcb95?s=128&d=identicon&r=PG&f=1", "display_name": "oo92", "link": "https://stackoverflow.com/users/8124392/oo92"}, "reply_to_user": {"reputation": 634, "user_id": 9690677, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GCJst.jpg?s=128&g=1", "display_name": "Luke Ramsden", "link": "https://stackoverflow.com/users/9690677/luke-ramsden"}, "edited": false, "score": 0, "creation_date": 1526483491, "post_id": 50373923, "comment_id": 87765112, "body": "@LukeRamsden what I want to do is to <code>cout</code> an error message incase of a weird input and start over.  @Brandon McKenzie.  The console just runs continously.  Its basically &quot;hanging&quot; if you will."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1526485039, "post_id": 50373923, "comment_id": 87766152, "body": "I have just posted an answer for the very same problem <a href=\"https://stackoverflow.com/q/50374003/3545273\">here</a> (cannot mark it as a duplicate until other answer is accepted or upvoted)"}, {"owner": {"reputation": 2236, "user_id": 8124392, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/29ccdaed954c2c2d9da35fcefcadcb95?s=128&d=identicon&r=PG&f=1", "display_name": "oo92", "link": "https://stackoverflow.com/users/8124392/oo92"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1526485386, "post_id": 50373923, "comment_id": 87766379, "body": "@SergeBallesta why don&#39;t you post that answer relevant to this question and delete that one so I can accept your answer?"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 1, "creation_date": 1526485555, "post_id": 50373923, "comment_id": 87766485, "body": "@OnurOzbek: Nice proposal, but I am too lazy for it :-)"}, {"owner": {"reputation": 2236, "user_id": 8124392, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/29ccdaed954c2c2d9da35fcefcadcb95?s=128&d=identicon&r=PG&f=1", "display_name": "oo92", "link": "https://stackoverflow.com/users/8124392/oo92"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1526488121, "post_id": 50373923, "comment_id": 87767944, "body": "Also @SergeBallesta a 2nd look shows a difference.  I already have a <code>cin</code> check in my code.  Previously I tried <code>cin.fail()</code>.  It made no difference."}], "answers": [{"comments": [{"owner": {"reputation": 2236, "user_id": 8124392, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/29ccdaed954c2c2d9da35fcefcadcb95?s=128&d=identicon&r=PG&f=1", "display_name": "oo92", "link": "https://stackoverflow.com/users/8124392/oo92"}, "edited": false, "score": 1, "creation_date": 1526488617, "post_id": 50375969, "comment_id": 87768209, "body": "But that&#39;s not the problem."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1526489695, "post_id": 50375969, "comment_id": 87768747, "body": "Well, yes it is. If someone enters something that cannot be extracted into an <code>int</code>, that something doesn&#39;t go away, and you still won&#39;t be able to extract it into an <code>int</code> on the next loop iteration either. It&#39;s still in the buffer, waiting for you to extract it into something compatible. You need to skip over it, to remove it from the input buffer. This has been covered many, many times on Stack Overflow, and should also be explained in your C++ book."}, {"owner": {"reputation": 2236, "user_id": 8124392, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/29ccdaed954c2c2d9da35fcefcadcb95?s=128&d=identicon&r=PG&f=1", "display_name": "oo92", "link": "https://stackoverflow.com/users/8124392/oo92"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1526490314, "post_id": 50375969, "comment_id": 87769093, "body": "@LightnessRacesinOrbit he changed his answer.  Initially he asked me to switch to a while loop, when that wasn&#39;t what I was asking."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 2236, "user_id": 8124392, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/29ccdaed954c2c2d9da35fcefcadcb95?s=128&d=identicon&r=PG&f=1", "display_name": "oo92", "link": "https://stackoverflow.com/users/8124392/oo92"}, "edited": false, "score": 0, "creation_date": 1526490465, "post_id": 50375969, "comment_id": 87769171, "body": "@OnurOzbek: Ah yes, I see that now. Okay!"}], "tags": [], "owner": {"reputation": 36, "user_id": 5734700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-brX5HYZDlOE/AAAAAAAAAAI/AAAAAAAAF-8/Rjnq-avv7HM/photo.jpg?sz=128", "display_name": "Craig Nelson", "link": "https://stackoverflow.com/users/5734700/craig-nelson"}, "is_accepted": false, "score": 0, "last_activity_date": 1526489416, "last_edit_date": 1526489416, "creation_date": 1526488545, "answer_id": 50375969, "question_id": 50373923, "link": "https://stackoverflow.com/questions/50373923/how-to-check-for-a-valid-user-input-in-c/50375969#50375969", "title": "How to check for a valid user input in C++", "body": "<p>Try out <code>cin.ignore()</code>.  It'll help you flush the <code>cin</code> buffer.</p>\n"}, {"comments": [{"owner": {"reputation": 2236, "user_id": 8124392, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/29ccdaed954c2c2d9da35fcefcadcb95?s=128&d=identicon&r=PG&f=1", "display_name": "oo92", "link": "https://stackoverflow.com/users/8124392/oo92"}, "edited": false, "score": 0, "creation_date": 1526490193, "post_id": 50376398, "comment_id": 87769025, "body": "Can you elaborate on <code>numeric_limits&lt;streamsize&gt;::max()</code>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1526490487, "post_id": 50376398, "comment_id": 87769186, "body": "Elaborate on all of it. Code dumps aren&#39;t answers."}, {"owner": {"reputation": 76, "user_id": 6529329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Z28t.jpg?s=128&g=1", "display_name": "Antonio Alecrim", "link": "https://stackoverflow.com/users/6529329/antonio-alecrim"}, "reply_to_user": {"reputation": 2236, "user_id": 8124392, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/29ccdaed954c2c2d9da35fcefcadcb95?s=128&d=identicon&r=PG&f=1", "display_name": "oo92", "link": "https://stackoverflow.com/users/8124392/oo92"}, "edited": false, "score": 1, "creation_date": 1526607299, "post_id": 50376398, "comment_id": 87820904, "body": "@OnurOzbek please, check if the answer is more appropriate now. Thanks"}, {"owner": {"reputation": 76, "user_id": 6529329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Z28t.jpg?s=128&g=1", "display_name": "Antonio Alecrim", "link": "https://stackoverflow.com/users/6529329/antonio-alecrim"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1526607401, "post_id": 50376398, "comment_id": 87820931, "body": "@LightnessRacesinOrbit you&#39;re missing some magic words in your sentence. Thanks for your feedback."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1526635924, "post_id": 50376398, "comment_id": 87831652, "body": "@AntonioAlecrimJr: Nope, nothing is missing."}], "tags": [], "owner": {"reputation": 76, "user_id": 6529329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Z28t.jpg?s=128&g=1", "display_name": "Antonio Alecrim", "link": "https://stackoverflow.com/users/6529329/antonio-alecrim"}, "is_accepted": true, "score": 1, "last_activity_date": 1526607582, "last_edit_date": 1526607582, "creation_date": 1526490015, "answer_id": 50376398, "question_id": 50373923, "link": "https://stackoverflow.com/questions/50373923/how-to-check-for-a-valid-user-input-in-c/50376398#50376398", "title": "How to check for a valid user input in C++", "body": "<p>There's nothing wrong with the way you read the user input, it just doesn't check for the input type before assigning the value into your 'guess' variable.</p>\n\n<p>So, if an user put any value that isn't accepted by the integer type it would crash your application generating this infinite loop.</p>\n\n<p>To protect your integer variable from wrong user inputs you must replace your direct input assignment:</p>\n\n<pre><code>cin &gt;&gt; guess;\n</code></pre>\n\n<p>By a protected one:</p>\n\n<pre><code>while(!(cin &gt;&gt; guess) || (guess &lt; 1000)){\n    cin.clear();\n    cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n');\n    cout &lt;&lt; \"Invalid input. Please, try again: \";\n}\n</code></pre>\n\n<p>Into the <em>while</em> above you can see the \"numeric_limits::max()\" which is explained <a href=\"http://en.cppreference.com/w/cpp/types/numeric_limits/max\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<blockquote>\n  <p>Returns the maximum finite value representable by the numeric type T. Meaningful for all bounded types.</p>\n</blockquote>\n\n<p>At the end you have a <em>while</em> holding the user into this reading loop while its input is under 1000 (as requested) or isn't a valid integer.</p>\n"}], "owner": {"reputation": 2236, "user_id": 8124392, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/29ccdaed954c2c2d9da35fcefcadcb95?s=128&d=identicon&r=PG&f=1", "display_name": "oo92", "link": "https://stackoverflow.com/users/8124392/oo92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2554, "favorite_count": 1, "accepted_answer_id": 50376398, "answer_count": 2, "score": 5, "last_activity_date": 1526607582, "creation_date": 1526481873, "last_edit_date": 1526488384, "question_id": 50373923, "link": "https://stackoverflow.com/questions/50373923/how-to-check-for-a-valid-user-input-in-c", "title": "How to check for a valid user input in C++", "body": "<p>I'm trying to build the Bulls &amp; Cows game in C++.  I've implemented most of the logic.  The game runs continuously with the use of an infinite loop and generates a random value at each run.</p>\n\n<p>What I'm trying to do now is to now is to take the user input and run the code if the input is valid (can ONLY be a 4 digit integer).  This is my implementation:</p>\n\n<pre><code>#include ...\n\nusing namespace std;\n\nvector&lt;int&gt; getDigits(int modelValue) {\n    vector&lt;int&gt; vectorValue;\n    int extractedDigit = 0;\n    int modulant = 10000;\n    int divisor = 1000;\n\n    for (int i = 0; i &lt; 4; i++) {\n        extractedDigit = (modelValue % modulant) / divisor;\n        vectorValue.push_back(extractedDigit);\n        modulant /= 10;\n        divisor /= 10;\n    }return vectorValue;\n}\n\n\nint main() {\n    for (;;) {\n        int model = rand() % 9000 + 1000;\n        int guess = 0000;\n        int bulls = 0;\n        int cows = 0;\n        int counter = 1;\n\n        cout &lt;&lt; \"This is the random 4-digit integer: \" &lt;&lt; model &lt;&lt; endl;\n        cout &lt;&lt; \"Enter a value to guess: \";\n        cin &gt;&gt; guess;\n\n        if ((guess &gt;= 1000) &amp;&amp; (guess &lt;= 9999) &amp;&amp; (cin)) {\n\n            vector&lt;int&gt; modelVector = getDigits(model);\n            vector&lt;int&gt; guessVector = getDigits(guess);\n\n            for (int i = 0; i &lt; 4; i++) {\n\n                if (find(modelVector.begin(), modelVector.end(), guessVector[i]) != modelVector.end()) {\n                    if (modelVector[i] == guessVector[i]) { bulls += 1; }\n                    else { cows += 1; }\n                }\n            }cout &lt;&lt; \"There are \" &lt;&lt; bulls &lt;&lt; \" bulls and \" &lt;&lt; cows &lt;&lt; \" cows\" &lt;&lt; endl;\n        }\n        else {\n            cout &lt;&lt; \"Please enter a valid 4-digit integer between 0000 and 9999\" &lt;&lt; endl;\n            cin.clear();\n        }\n    }return 0;\n}\n</code></pre>\n\n<p>But when I run and input something invalid, what I get is a continuously running <a href=\"https://i.stack.imgur.com/HM4ou.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HM4ou.png\" alt=\"console\"></a>.</p>\n"}, {"tags": ["c++", "templates", "c++17", "template-meta-programming"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1526482500, "post_id": 50373918, "comment_id": 87764400, "body": "I mean really, you would say yourself a lot of pain if you would define <code>foo</code> in the header :) Any specific reason not to? Just curious"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 2, "creation_date": 1526482700, "post_id": 50373918, "comment_id": 87764560, "body": "See <a href=\"https://stackoverflow.com/q/7398964/2069064\">this</a>. There&#39;s just no programmatic way of doing multiple instantiations besides the preprocessor."}], "owner": {"reputation": 2077, "user_id": 4694124, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c4e2b18d7cefdae9b599a884d2ae4e4c?s=128&d=identicon&r=PG", "display_name": "Lukas Barth", "link": "https://stackoverflow.com/users/4694124/lukas-barth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1526481859, "creation_date": 1526481859, "question_id": 50373918, "link": "https://stackoverflow.com/questions/50373918/force-implicit-class-template-instantiation-to-include-all-definitions", "title": "Force implicit class template instantiation to include all definitions", "body": "<p>First things first: I'm using C++17 and would be fine with using Boost::Hana, since I'm using it anyway in my code.</p>\n\n<p>I'm trying to emulate explicit class template instantiation (i.e., all members' definitions are instantiated) by using implicit class template instantiation (which by default does not instantiate member definitions) in the file that defines the class template. If this sounds strange, see \"Why would anybody do this?\" below for why I think this might be a solution to my actual problem.</p>\n\n<h2>The Situation</h2>\n\n<p>This is the declaration of my template to be instantiated, in <code>mytemplate.hpp</code>:</p>\n\n<pre><code>template&lt;class T&gt;\nclass MyTemplate {\npublic:\n    void foo();\n};\n</code></pre>\n\n<p>And this is its definition in <code>mytemplate.cpp</code>:</p>\n\n<pre><code>#include \"mytemplate.hpp\"\n\ntemplate&lt;class T&gt;\nvoid\nMyTemplate&lt;T&gt;::foo() {}\n</code></pre>\n\n<h2>Forcing complete Implicit Instantiation</h2>\n\n<p>To make sure that for some type <code>Whatever</code> the definition of all of <code>MyTemplate&lt;Whatever&gt;</code>'s members (in this example: <code>MyTemplate&lt;Whatever&gt;::foo()</code>) is instantiated, I think I need to create a situation, at namespace scope, where for every member of <code>MyTemplate&lt;Whatever&gt;</code>, it holds that:</p>\n\n<blockquote>\n  <p>the specialization is referenced in a context\n  that requires a completely-defined object type or when the completeness of the class type affects the semantics\n  of the program</p>\n</blockquote>\n\n<p>(C++17 standard, 17.7.1.1)</p>\n\n<p>My idea was to use inheritance: If a class <code>Instantiator</code> derives from <code>MyTemplate&lt;Whatever&gt;</code>, the definition of all members of <code>Instantiator</code> must be part of the object file, whether they are used or not, because <code>Instantiator</code> is not a template - or so I thought. This would then of course also require the class template's member to be instantiated.</p>\n\n<p>Consider this modified <code>mytemplate.cpp</code>:</p>\n\n<pre><code>#include \"mytemplate.hpp\"\n\ntemplate&lt;class T&gt;\nvoid\nMyTemplate&lt;T&gt;::foo() {}\n\nclass Instantiator : public MyTemplate&lt;int&gt; {};\n</code></pre>\n\n<p>Compiling it does not yield <em>any</em> symbols:</p>\n\n<pre><code>me@mymachine ~/some/dir $ /usr/bin/g++-7 -g -std=c++17 -o mytemplate.cpp.o -c mytemplate.cpp\nme@mymachine ~/some/dir $ nm -a mytemplate.cpp.o\n0000000000000000 b .bss\n0000000000000000 n .comment\n0000000000000000 d .data\n0000000000000000 N .debug_abbrev\n0000000000000000 N .debug_aranges\n0000000000000000 N .debug_info\n0000000000000000 N .debug_line\n0000000000000000 N .debug_str\n0000000000000000 a mytemplate.cpp\n0000000000000000 n .note.GNU-stack\n0000000000000000 t .text\n</code></pre>\n\n<p>How can that be? Why is <code>Instantiator</code> (and its member) not part of the output?</p>\n\n<p>Do you see any other way to force instantiation of every member of <code>MyTemplate&lt;Whatever&gt;</code>?</p>\n\n<h2>Why would anybody do this?</h2>\n\n<p>Somewhere outside of <code>mytemplate.{hpp,cpp}</code>, I have a list of classes, wrapped into a tuple, like this:</p>\n\n<pre><code>using MyClassList = std::tuple&lt;int, char, bool&gt;;\n</code></pre>\n\n<p>Now I want to instantiate the definition of <code>MyTemplate</code> (and all its members) for all classes that are template parameters of <code>MyClassList</code> - without writing this manually. Basically, if I change the definition of <code>MyClassList</code>, I don't want to touch <code>mytemplate.{hpp,cpp}</code>. Thus, I can't use explicit instantiation. I also don't want to include <code>mytemplate.cpp</code> everywhere that it's used, because the size of my compilation units seems to be problematic already.</p>\n\n<p>Obviously, this means that I can't use the above derived-class trick verbatim, because I would need to manually list all the derived classes, but that problem should be solveable with a recursive class template.</p>\n"}, {"tags": ["c++", "templates", "dll", "entity-component-system"], "comments": [{"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1526484712, "post_id": 50373908, "comment_id": 87765955, "body": "1. Look at the output window, not the error list window. For C++, this is often a necessity, as there is so much context that is not shown in the error list. 2. Show the declaration of <code>m_components</code>. I suspect it is a container which cannot hold an <code>ABehaviour</code>"}, {"owner": {"reputation": 846, "user_id": 7511460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cz0P7.png?s=128&g=1", "display_name": "Adrien Givry", "link": "https://stackoverflow.com/users/7511460/adrien-givry"}, "reply_to_user": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1526486153, "post_id": 50373908, "comment_id": 87766872, "body": "m_components can definitly hold an ABehaviour. Any components of my engine (Instead of transform) inherits fromt ABehaviour. I can AddComponent&lt;Light&gt;() (Light is an ABehaviour), Camera, ModelRenderer, etc..."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1526487842, "post_id": 50373908, "comment_id": 87767804, "body": "Let&#39;s start with some basics. A template is not a function. You cannot export a template from a DLL."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1526488617, "post_id": 50373908, "comment_id": 87768208, "body": "Additionally, you need to specify that your inheritance is <b>public</b>, as in <code>class PlayerController : public whatever</code>"}, {"owner": {"reputation": 846, "user_id": 7511460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cz0P7.png?s=128&g=1", "display_name": "Adrien Givry", "link": "https://stackoverflow.com/users/7511460/adrien-givry"}, "edited": false, "score": 0, "creation_date": 1526492969, "post_id": 50373908, "comment_id": 87770469, "body": "Probably I used wrong words : &quot;templated method&quot; was what I meant. I don&#39;t mean to export a template, it makes no sense, I mean exporting a templated method from a DLL. By the way thanks for your last comment (About public thing) that was the solution to my problem, sadly the compiler error wasn&#39;t enough detailed"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1526495185, "post_id": 50373908, "comment_id": 87771615, "body": "&quot;templated method&quot; isn&#39;t a standard term as of now, it isn&#39;t clear what you mean by it. If you mean a trmplate instantiation, you don&#39;t need to export any. <b>The implementation is in the header file</b>. Client code doesn&#39;t need to even see the DLL, all it needs is the header."}], "owner": {"reputation": 846, "user_id": 7511460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cz0P7.png?s=128&g=1", "display_name": "Adrien Givry", "link": "https://stackoverflow.com/users/7511460/adrien-givry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526484861, "creation_date": 1526481835, "last_edit_date": 1526484861, "question_id": 50373908, "link": "https://stackoverflow.com/questions/50373908/using-an-external-class-in-templated-method-from-dll", "title": "Using an external class in templated method from dll", "body": "<p>I'm trying to use my game engine into an external project. Everything works fine but I have a problem when I'm trying to create a custom component (That inherits from ABhaviour which is an abstract class representing a component that can be activated/disabled).</p>\n\n<p><strong>GameObject.h</strong> <em>(exported with __declspec(dllexport))</em></p>\n\n<pre><code>// [...]\n\ntemplate &lt;typename Class, typename ... Args&gt;\nstd::shared_ptr&lt;Class&gt; GameObject::AddComponent(Args... args)\n{\n    auto newComp = std::make_shared&lt;Class&gt;(std::forward&lt;Args&gt;(args)...);\n    m_components[typeid(*newComp).hash_code()] = newComp;\n    m_components[typeid(*newComp).hash_code()]-&gt;SetOwner(*this);\n    return newComp;\n}\n\n// [...]\n</code></pre>\n\n<p>In an other project (That use my game engine), I'm trying to create the custom ABehaviour :</p>\n\n<p><strong>PlayerController.h</strong></p>\n\n<pre><code>#pragma once\n\n#include &lt;ElkGameEngine/Objects/Components/Behaviours/ABehaviour.h&gt;\n\nclass PlayerController :ElkGameEngine::Objects::Components::Behaviours::ABehaviour\n{\n    PlayerController() = default;\n    ~PlayerController() = default;\n\n    void Update();\n};\n</code></pre>\n\n<p>After that I add my custom component onto my \"Player\" GameObject :</p>\n\n<p><strong>Main.cpp</strong></p>\n\n<pre><code>#include &lt;ElkGameEngine/ElkGameEngine.h&gt;\n#include &lt;ElkGameEngine/Objects/AObject.h&gt;\n#include &lt;ElkGameEngine/Objects/Components/AComponent.h&gt;\n\n#include \"PlayerController.h\"\n\nusing namespace ElkGameEngine::Objects::Components;\nusing namespace ElkGameEngine::Objects::Components::Behaviours;\n\nint main()\n{\n    ElkGameEngine::Managers::EngineManager elkGameEngine;\n    elkGameEngine.GetSceneManager()-&gt;CreateScene(\"ElkCraft\");\n\n    auto&amp; player = elkGameEngine.GetSceneManager()-&gt;CreateEmptyGameObject(\"Player\");\n    player.AddComponent&lt;PlayerController&gt;(); /* Here is the problem */\n\n    while (elkGameEngine.IsRunning())\n    {\n        elkGameEngine.PreUpdate();\n\n\n        elkGameEngine.PostUpdate();\n    }\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Visual Studio is unhappy and print me this :</p>\n\n<pre><code>Severity    Code    Description Project File    Line    Suppression State\nError   C2440   '&lt;function-style-cast&gt;': cannot convert from 'const std::shared_ptr&lt;PlayerController&gt;' to 'std::shared_ptr&lt;ElkGameEngine::Objects::Components::AComponent&gt;' ElkCraft    c:\\program files (x86)\\microsoft visual studio\\2017\\community\\vc\\tools\\msvc\\14.12.25827\\include\\memory  1472    \nError   C2228   left of '.swap' must have class/struct/union    ElkCraft    c:\\program files (x86)\\microsoft visual studio\\2017\\community\\vc\\tools\\msvc\\14.12.25827\\include\\memory  1472    \n</code></pre>\n\n<p>Output window :</p>\n\n<pre><code>1&gt;------ Build started: Project: ElkCraft, Configuration: Debug x64 ------\n1&gt;Could Not Find C:\\Users\\adrie\\Desktop\\GROUP_2\\PFA\\ElkCraft\\*.dll\n1&gt;main.cpp\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\community\\vc\\tools\\msvc\\14.12.25827\\include\\memory(1472): error C2440: '&lt;function-style-cast&gt;': cannot convert from 'const std::shared_ptr&lt;PlayerController&gt;' to 'std::shared_ptr&lt;ElkGameEngine::Objects::Components::AComponent&gt;'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\community\\vc\\tools\\msvc\\14.12.25827\\include\\memory(1472): note: No constructor could take the source type, or constructor overload resolution was ambiguous\n1&gt;c:\\users\\adrie\\desktop\\group_2\\pfa\\elkengine\\build\\elkgameengine\\include\\elkgameengine\\objects\\gameobject.h(53): note: see reference to function template instantiation 'std::shared_ptr&lt;ElkGameEngine::Objects::Components::AComponent&gt; &amp;std::shared_ptr&lt;ElkGameEngine::Objects::Components::AComponent&gt;::operator =&lt;PlayerController&gt;(const std::shared_ptr&lt;PlayerController&gt; &amp;) noexcept' being compiled\n1&gt;c:\\users\\adrie\\desktop\\group_2\\pfa\\elkengine\\build\\elkgameengine\\include\\elkgameengine\\objects\\gameobject.h(55): note: see reference to function template instantiation 'std::shared_ptr&lt;ElkGameEngine::Objects::Components::AComponent&gt; &amp;std::shared_ptr&lt;ElkGameEngine::Objects::Components::AComponent&gt;::operator =&lt;PlayerController&gt;(const std::shared_ptr&lt;PlayerController&gt; &amp;) noexcept' being compiled\n1&gt;c:\\users\\adrie\\desktop\\group_2\\pfa\\elkcraft\\sources\\main.cpp(18): note: see reference to function template instantiation 'std::shared_ptr&lt;PlayerController&gt; ElkGameEngine::Objects::GameObject::AddComponent&lt;PlayerController,&gt;(void)' being compiled\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\community\\vc\\tools\\msvc\\14.12.25827\\include\\memory(1472): error C2228: left of '.swap' must have class/struct/union\n1&gt;Generating Code...\n1&gt;Compiling...\n1&gt;PlayerController.cpp\n1&gt;Generating Code...\n1&gt;Done building project \"ElkCraft.vcxproj\" -- FAILED.\n========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========\n</code></pre>\n\n<p>I think that the problem come from the fact that my game engine (Which is a group of DLL) is exporting a templated method (AddComponent and other ones like GetComponent). </p>\n\n<ul>\n<li>Is it possible to use a templated method from a dll with a class/struct template argument from the project using the dll ?</li>\n<li>Am I doing something wrong ?</li>\n<li>Do I need to specify something on my PlayerController to make it \"known/usable\" in the AddComponent method ?</li>\n</ul>\n"}, {"tags": ["c++", "pointers", "stack", "undefined"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 3, "creation_date": 1526481745, "post_id": 50373862, "comment_id": 87763834, "body": "Please only tag the language you are using."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1526481845, "post_id": 50373862, "comment_id": 87763918, "body": "@Ron: I&#39;m sure it&#39;s deliberately ironic that capitalisation wasn&#39;t appropriate there? ;)"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1526482074, "post_id": 50373862, "comment_id": 87764085, "body": "It&#39;s not clear what the problem is. It might be a <a href=\"http://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">rule of 3/5/0</a> violation problem, it might be an initialization problem, it could be something else. Please share a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1526482148, "post_id": 50373862, "comment_id": 87764144, "body": "It seems you only ever use a <code>Stack</code> to call it&#39;s members and those member don&#39;t seem to operate on the instance they belong to. Perhaps you meant to use static member functions or free functions instead? In addition, c++ does not automatically delete <code>new</code>ed objects. I see a lot of <code>new</code> but no <code>delete</code>."}, {"owner": {"reputation": 37, "user_id": 7629468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8IiXP.jpg?s=128&g=1", "display_name": "Abd Alrahman Alhorani", "link": "https://stackoverflow.com/users/7629468/abd-alrahman-alhorani"}, "edited": false, "score": 0, "creation_date": 1526482677, "post_id": 50373862, "comment_id": 87764533, "body": "ST is another class that have object of stack , the problem is when &quot;StNode * temp = node;&quot; the temp now is empty but when its check in the isempty function &quot;if(node == NULL)&quot; , here node as temp, it must be node to be a null , but it doesnt go inside this if , and return false, ((( its not false, its true case the object is empty , i am sorry its hard to explain but , i am here if there are somthing not clear"}, {"owner": {"reputation": 1205, "user_id": 2575630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iI59n.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2575630/robert"}, "edited": false, "score": 0, "creation_date": 1526482886, "post_id": 50373862, "comment_id": 87764702, "body": "Wouldn&#39;t that be something easy to debug? What&#39;s the actual value of the node check in <code>isEmpty</code>?"}, {"owner": {"reputation": 37, "user_id": 7629468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8IiXP.jpg?s=128&g=1", "display_name": "Abd Alrahman Alhorani", "link": "https://stackoverflow.com/users/7629468/abd-alrahman-alhorani"}, "edited": false, "score": 0, "creation_date": 1526483283, "post_id": 50373862, "comment_id": 87764969, "body": "the debug tell me that the object is not null, but his element is &lt;unable to read memory&gt;"}], "owner": {"reputation": 37, "user_id": 7629468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8IiXP.jpg?s=128&g=1", "display_name": "Abd Alrahman Alhorani", "link": "https://stackoverflow.com/users/7629468/abd-alrahman-alhorani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 331, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526482381, "creation_date": 1526481686, "last_edit_date": 1526482381, "question_id": 50373862, "link": "https://stackoverflow.com/questions/50373862/how-to-check-undefined-variable-in-c", "title": "How to check undefined variable in c++", "body": "<p>I have this code in my project in c++ :</p>\n\n<pre><code>class StackNode{\n    public:\n\n        StackNode(){\n            this-&gt;varName = NULL;\n            this-&gt;down = NULL;\n        }\n\n        char * varName;\n\n        StackNode * down;\n\n    };\n\n\nclass Stack{\n    public:\n        StackNode * head;\n\n        Stack(){\n            this-&gt;head == NULL;\n        }\n\n        bool IsEmpty(StackNode * node){\n            if(node == NULL){\n                return true;\n            }\n            return false;\n        }\n};\n..\n..\n.. \n    void ST::localVariableStack(StNode * node){\n        Stack * stack = new Stack();\n        StNode * temp = node;\n        checkUndeclaredVarible(temp, stack);\n        while (temp-&gt;left){\n            checkUndeclaredVarible(temp-&gt;left, stack);\n            temp = temp-&gt;left;\n        }\n    }\n\n    void ST::checkUndeclaredVarible(StNode * node, Stack * stack){\n        if(ifInteger(node)){\n            if(node-&gt;declared){\n                stack-&gt;AddUnite(node-&gt;VarName);\n            }else{\n                if(!isItExiteInStack(node, stack)){\n                    this-&gt;errRecovery-&gt;errQ-&gt;enqueue(node-&gt;lineno, node-&gt;colno, \"Undeclared Variable : \", node-&gt;VarName);\n                }\n            }\n        }\n    }\n\n    bool ST::isItExiteInStack(StNode * node, Stack * stack){\n        StackNode * temp = new StackNode();\n        temp = stack-&gt;head;\n        while(!(stack-&gt;IsEmpty(temp))){\n            if(strcmp(temp-&gt;varName, node-&gt;VarName) == 0){\n                return true;\n            }\n            temp = temp-&gt;down;\n        }\n        return false;\n    }\n</code></pre>\n\n<p>The problem is when I call <code>stack-&gt;isempty(temp)</code> the temp object go to the <code>isempty</code> function, in the situation that temp is empty although there are a default constructor. When check <code>(node == NULL)</code> in <code>isempty</code> function it take a <code>false</code> and return <code>false</code> rather than <code>true</code>, so after this function will break because he act like non empty object.</p>\n"}, {"tags": ["c++", "qt", "char", "qstring"], "comments": [{"owner": {"reputation": 1177, "user_id": 4802431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/913d82f4ab2d30e0c3cb0937f5d10185?s=128&d=identicon&r=PG&f=1", "display_name": "William_Wilson", "link": "https://stackoverflow.com/users/4802431/william-wilson"}, "edited": false, "score": 0, "creation_date": 1526481062, "post_id": 50373513, "comment_id": 87763324, "body": "It&#39;s not canceling, backslash is an escape character, thus you need 2 backslashes for every output of 1 backslash. see \\r, \\n, \\t, \\0 etc. \\\\\\\\\\\\\\\\.\\\\\\\\"}], "answers": [{"tags": [], "owner": {"reputation": 2482, "user_id": 9630756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zkdcg.png?s=128&g=1", "display_name": "Sergio Monteleone", "link": "https://stackoverflow.com/users/9630756/sergio-monteleone"}, "is_accepted": true, "score": 0, "last_activity_date": 1526483201, "last_edit_date": 1526483201, "creation_date": 1526481144, "answer_id": 50373663, "question_id": 50373513, "link": "https://stackoverflow.com/questions/50373513/how-to-stop-backslashes-from-cancelling-in-conversion-from-qstring-to-char-array/50373663#50373663", "title": "How to stop backslashes from cancelling in conversion from QString to char array?", "body": "<p>The QString is being <strong>escaped</strong>. That is, special characters (including ) are specified using their escape sequence (<a href=\"https://en.wikipedia.org/wiki/Escape_character\" rel=\"nofollow noreferrer\">here</a> the Wikipedia article about escaping).</p>\n\n<p>Since the escape sequence for the backslash character is <strong>\\\\</strong>, you just have to double your backslashes:</p>\n\n<pre><code>QString currentPort = \"\\\\\\\\\\\\\\\\.\\\\\\\\\" + QString(ui-&gt;serialPortDropdown-&gt;itemText(index));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 0, "last_activity_date": 1526481236, "creation_date": 1526481236, "answer_id": 50373707, "question_id": 50373513, "link": "https://stackoverflow.com/questions/50373513/how-to-stop-backslashes-from-cancelling-in-conversion-from-qstring-to-char-array/50373707#50373707", "title": "How to stop backslashes from cancelling in conversion from QString to char array?", "body": "<p>The issue is that in an \"ordinary\" string literal as yours a backslash introduces \"special\" characters like, for example, a new line <code>\\n</code>. To get one backslash, you have to enter two consecutive backslashes then, i.e. <code>\\\\</code> to get <code>\\</code>.</p>\n\n<p>To overcome this, either enter each backslash twice, or use the <a href=\"http://en.cppreference.com/w/cpp/language/string_literal\" rel=\"nofollow noreferrer\">raw</a> format for specifying string literals:</p>\n\n<pre><code>int main() {\n\n    const char* raw = R\"foo(\\\\\\\\.\\\\)foo\";\n    cout &lt;&lt; \"raw: \" &lt;&lt; raw &lt;&lt; endl;\n\n    const char* notRaw = \"\\\\\\\\.\\\\\";\n    cout &lt;&lt; \"not raw: \" &lt;&lt; notRaw &lt;&lt; endl;\n\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>raw: \\\\\\\\.\\\\\nnot raw: \\\\.\\\n</code></pre>\n\n<p>Note that the \"foo(\"-part is custom; it can be anything of your choice which will not be contained in the inner part of the string literal.</p>\n"}, {"tags": [], "owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "is_accepted": false, "score": 1, "last_activity_date": 1526560299, "last_edit_date": 1592644375, "creation_date": 1526500467, "answer_id": 50378950, "question_id": 50373513, "link": "https://stackoverflow.com/questions/50373513/how-to-stop-backslashes-from-cancelling-in-conversion-from-qstring-to-char-array/50378950#50378950", "title": "How to stop backslashes from cancelling in conversion from QString to char array?", "body": "<p>This is normal behavior in C++ source files. And there is even more of them:</p>\n<blockquote>\n<p>Escape sequences are used to represent certain special characters within string literals and character literals.</p>\n<p>The following escape sequences are available (extra escape sequences may be provided with implementation-defined semantics):</p>\n</blockquote>\n<pre><code> Escape      | Description                 |Representation\nsequence     |                             |\n-------------+-----------------------------+-------------------------------------------------------\n  \\'         | single quote                |byte 0x27 in ASCII encoding\n  \\&quot;         | double quote                |byte 0x22 in ASCII encoding\n  \\?         | question mark               |byte 0x3f in ASCII encoding\n  \\\\         | backslash                   |byte 0x5c in ASCII encoding\n  \\a         | audible bell                |byte 0x07 in ASCII encoding\n  \\b         | backspace                   |byte 0x08 in ASCII encoding\n  \\f         | form feed - new page        |byte 0x0c in ASCII encoding\n  \\n         | line feed - new line        |byte 0x0a in ASCII encoding\n  \\r         | carriage return             |byte 0x0d in ASCII encoding\n  \\t         | horizontal tab              |byte 0x09 in ASCII encoding\n  \\v         | vertical tab                |byte 0x0b in ASCII encoding\n  \\nnn       | arbitrary octal value       |byte nnn\n  \\xnn       | arbitrary hexadecimal value |byte nn\n  \\unnnn     | universal character name (arbitrary Unicode value); may result in several characters\n             |                             |code point U+nnnn\n  \\Unnnnnnnn | universal character name (arbitrary Unicode value); may result in several characters\n             |                             |code point U+nnnnnnnn\n</code></pre>\n<p>Source: <a href=\"http://en.cppreference.com/w/cpp/language/escape\" rel=\"nofollow noreferrer\">Escape sequences</a></p>\n<p>If this is a problem, then C++11 introduced a new type of string literal : <strong>raw string literal</strong></p>\n<blockquote>\n<p>Raw string literal. Used to avoid escaping of any character. Anything between the delimiters becomes part of the string.</p>\n</blockquote>\n<p>Syntax :</p>\n<p><code>prefix R &quot; delimiter ( raw_characters ) delimiter &quot; </code></p>\n<ul>\n<li><em>prefix</em>    -   (optional) One of L, u8, u, U</li>\n<li><em>delimiter</em>     -   A character sequence made of any source character but parentheses, backslash and spaces (can be empty, and at most 16 characters long)</li>\n<li><em>raw_characters</em>     -   Any character sequence, except that it must not contain the closing sequence <code>) delimiter &quot;</code></li>\n</ul>\n<p>Source: <a href=\"http://en.cppreference.com/w/cpp/language/string_literal\" rel=\"nofollow noreferrer\">string literal</a></p>\n<hr />\n<p>To solve the problem there are 2 solutions</p>\n<ol>\n<li><p>In every place where a backslash is needed insert 2 backlslashes : <code>&quot;\\\\\\\\\\\\\\\\.\\\\\\\\&quot;</code></p>\n</li>\n<li><p>Use a raw string : <code>R&quot;(\\\\\\\\.\\\\)&quot;</code></p>\n</li>\n</ol>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9420815"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "accepted_answer_id": 50373663, "answer_count": 3, "score": 0, "last_activity_date": 1526560299, "creation_date": 1526480654, "question_id": 50373513, "link": "https://stackoverflow.com/questions/50373513/how-to-stop-backslashes-from-cancelling-in-conversion-from-qstring-to-char-array", "title": "How to stop backslashes from cancelling in conversion from QString to char array?", "body": "<p>I am writing a QT widgets application that includes serial communication with an Arduino. <a href=\"https://github.com/manashmndl/SerialPort\" rel=\"nofollow noreferrer\">I found a good header and cpp file on GitHub</a> that makes communicating with an Arduino MUCH easier than it would be with QSerialPort. </p>\n\n<p>However one difficulty that this presents is that the port name must be given as a char array in the format \"\\\\.\\COM1\" for example. So I'm trying to add those backslashes before the COM port name, with this code:</p>\n\n<pre><code>QString currentPort = \"\\\\\\\\.\\\\\" + QString(ui-&gt;serialPortDropdown-&gt;itemText(index));\nportName = currentPort.toLocal8Bit().data();\n</code></pre>\n\n<p>After initialising the array with this at the top of my cpp file:</p>\n\n<pre><code>char *portName;\n</code></pre>\n\n<p>After adding a few qDebug()s here and there, the QString is being set to how it should be, <code>\"\\\\\\\\.\\\\COM1\"</code> for example. But the char array is returning as <code>\"\\\\.\\COM1\"</code>. So the backslashes are cancelling other backslashes.</p>\n\n<p>How do I overcome this?</p>\n\n<p>Thanks in advance for any help :)</p>\n"}, {"tags": ["c#", "c++"], "comments": [{"owner": {"reputation": 634, "user_id": 9690677, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GCJst.jpg?s=128&g=1", "display_name": "Luke Ramsden", "link": "https://stackoverflow.com/users/9690677/luke-ramsden"}, "edited": false, "score": 2, "creation_date": 1526480729, "post_id": 50373503, "comment_id": 87763084, "body": "<code>FnName = [ ]( args ) { }</code> is called a lambda function."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4573148"}, "edited": false, "score": 1, "creation_date": 1526480888, "post_id": 50373503, "comment_id": 87763192, "body": "based on your question: I have found that <a href=\"https://msdn.microsoft.com/en-us/library/dd293608.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/dd293608.aspx</a> denotes this as a lambda &quot;expression&quot;. hence lambda expression c# is here <a href=\"https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/statements-expressions-operators/lambda-expressions\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/dotnet/csharp/programming-guide/&hellip;</a>. possibly (x,y) =&gt; x == y"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 1545391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CFA2i.png?s=128&g=1", "display_name": "Yan Chen", "link": "https://stackoverflow.com/users/1545391/yan-chen"}, "edited": false, "score": 0, "creation_date": 1526482429, "post_id": 50373688, "comment_id": 87764363, "body": "OK, problem resolved. thank you very much, thanks for all!"}], "tags": [], "owner": {"reputation": 102162, "user_id": 613130, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/40bd5f390cba274159501bb244bc29f4?s=128&d=identicon&r=PG", "display_name": "xanatos", "link": "https://stackoverflow.com/users/613130/xanatos"}, "is_accepted": true, "score": 2, "last_activity_date": 1526481830, "last_edit_date": 1526481830, "creation_date": 1526481205, "answer_id": 50373688, "question_id": 50373503, "link": "https://stackoverflow.com/questions/50373503/how-can-i-convert-c-lambda-function-code-to-c/50373688#50373688", "title": "How can I convert C++ lambda function code to C#?", "body": "<p>As other said, it is called a lambda expressions, and it was introduced in C++11. You can easily convert it in C#, but I don't think that lambda expression is very useful.</p>\n\n<p>In C#, in the class definition (outside a method), or even outside the class definition:</p>\n\n<pre><code>delegate void VoidRefInt32RefInt32(ref int x, ref int y);\n</code></pre>\n\n<p>then, inside a method:</p>\n\n<pre><code>VoidRefInt32RefInt32 func = (ref int x, ref int y) =&gt; x += y;\n\nint i1 = 1;\nint i2 = 2;\nfunc(ref i1, ref i2);\nConsole.WriteLine(i1);\n</code></pre>\n\n<p>But it is something quite useless... and <code>ref int y</code> could simply be <code>int y</code>, like:</p>\n\n<pre><code>delegate void VoidRefInt32Int32(ref int x, int y);\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>VoidRefInt32Int32 func = (ref int x, int y) =&gt; x += y;\n\nint i1 = 1;\nint i2 = 2;\nfunc(ref i1, i2);\nConsole.WriteLine(i1);\n</code></pre>\n\n<p>And it still would be quite useless...</p>\n\n<p>Note that <code>Func&lt;,&gt;</code> is incompatible with <code>ref</code>, so we have to define a custom delegate (the <code>delegate void ...</code> part)</p>\n"}], "owner": {"reputation": 45, "user_id": 1545391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CFA2i.png?s=128&g=1", "display_name": "Yan Chen", "link": "https://stackoverflow.com/users/1545391/yan-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 1, "closed_date": 1526483343, "accepted_answer_id": 50373688, "answer_count": 1, "score": -4, "last_activity_date": 1526486500, "creation_date": 1526480617, "last_edit_date": 1526486500, "question_id": 50373503, "link": "https://stackoverflow.com/questions/50373503/how-can-i-convert-c-lambda-function-code-to-c", "closed_reason": "Needs more focus", "title": "How can I convert C++ lambda function code to C#?", "body": "<p>I have a C++ code, like:</p>\n\n<pre><code>const auto Func = [](int&amp; x, const int&amp; y) \n{\n    x += y;\n};\n</code></pre>\n\n<p>and using it like this:</p>\n\n<p><code>Func(a, b);</code></p>\n\n<p>I have not seen [] as function names.</p>\n\n<p>How can I convert this C++ code to C#?</p>\n"}, {"tags": ["c++", "statistics", "rcpp", "rcpp11"], "comments": [{"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1526488986, "post_id": 50373307, "comment_id": 87768368, "body": "Such a tool does not exist, and I would argue, is not needed (or feasible).  If you want to contribute one, make a proposal via an issue ticket at the GitHub repository."}, {"owner": {"reputation": 529, "user_id": 2161753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a82f6ec72c724a529f1e0e997c0bfd?s=128&d=identicon&r=PG", "display_name": "nwknoblauch", "link": "https://stackoverflow.com/users/2161753/nwknoblauch"}, "edited": false, "score": 2, "creation_date": 1526507952, "post_id": 50373307, "comment_id": 87777177, "body": "Have you taken a look at <a href=\"https://github.com/eddelbuettel/rcppgsl\" rel=\"nofollow noreferrer\">RcppGSL</a>? seems to take care of most of this for you."}], "owner": {"reputation": 402, "user_id": 9761135, "user_type": "registered", "profile_image": "https://graph.facebook.com/898939793540545/picture?type=large", "display_name": "Pedro Rafael", "link": "https://stackoverflow.com/users/9761135/pedro-rafael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526480038, "creation_date": 1526480038, "question_id": 50373307, "link": "https://stackoverflow.com/questions/50373307/automatic-generation-of-makevars-and-configure-files", "title": "Automatic generation of Makevars and configure files", "body": "<p>Friends, </p>\n\n<p>Is there automatic way to generate <code>Makevars</code> and <code>configure</code>? I'm compiling my C++ code using the bash terminal with the <strong>g++</strong> compiler.</p>\n\n<p><strong>Example</strong>: I have the following code written using the <code>Rcpp.h</code> library where I use a <code>gsl/gsl_sf_bessel.h</code> header file, that is, I use a library external to <strong>Rcpp</strong>.</p>\n\n<pre><code>#include &lt;Rcpp.h&gt;\n#include &lt;gsl/gsl_sf_bessel.h&gt;\nusing namespace Rcpp;\n\n// [[Rcpp::export]]\ndouble my_bessel(double x){\n   return gsl_sf_bessel_J0 (x);\n}\n</code></pre>\n\n<p>In the example above, considering the configurations and path of the headers files of my computer, I can compile the above code using the code below in the bash terminal:</p>\n\n<pre><code>g++ -I\"/usr/include/R/\" -DNDEBUG -I\"/home/pedro/R/x86_64-pc-linux-gnu-library/3.5/Rcpp/include\" -I\"/home/pedro/Dropbox/UFPB/Redes Neurais e An\u00e1lise de Agrupamento/Rcpp\" -D_FORTIFY_SOURCE=2  -fpic  -march=x86-64 -mtune=generic -O2 -pipe -fstack-protector-strong -fno-plt  -c program.cpp -o program.o\ng++ -shared -L/usr/lib64/R/lib -Wl,-O1,--sort-common,--as-needed,-z,relro,-z,now -o program.so program.o -L/usr/lib64/R/lib -L/usr/include/gsl -lR -lgsl -gslcblas -lm\n</code></pre>\n\n<p>Based on the settings and paths of the libraries on my computer, I am able to generate with the above code the object files and the .so file. However, as we know, these paths will not necessarily work when the function is compiled on a different machine than the package user. For this there are <code>Makevars</code> and <code>configure</code> files.</p>\n\n<p><strong>Question</strong>: Is there any way to automatically create the <code>Makevars</code> and <code>configure</code> files based on the above build statements? </p>\n\n<pre><code>CXX=g++\nCXXFLAGS +=`-O3 -Wall -pipe -Wno-unused -pedantic`\nPKG_LIBS = `$(R_HOME)/bin/Rscript -e \"Rcpp:::LdFlags()\"`  \nPKG_LIBS += `gsl-config --libs`\n</code></pre>\n\n<p>I created the <code>Makevars</code> file with the content just above. However, I'm not sure if there are ways to do this automatically using the build statements presented earlier.</p>\n"}, {"tags": ["c++", "regex", "boost"], "comments": [{"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1526480011, "post_id": 50373263, "comment_id": 87762525, "body": "Just use <code>Firefox|Chrome|Safari|Opera|MSIE|Edge|Trident</code>  pattern and grab the whole match. See <a href=\"https://ideone.com/6qOfrV\" rel=\"nofollow noreferrer\">ideone.com/6qOfrV</a>"}, {"owner": {"reputation": 539, "user_id": 2352611, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/0fY8c.jpg?s=128&g=1", "display_name": "Larytet", "link": "https://stackoverflow.com/users/2352611/larytet"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1526480935, "post_id": 50373263, "comment_id": 87763226, "body": "@WiktorStribi\u017cew, this is not quite what I am looking for. I need the group index for further processing. The goal is to get an enumeration of the browser type(s) in the input."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1526481022, "post_id": 50373263, "comment_id": 87763286, "body": "You have the access to the index of each match, see <a href=\"https://ideone.com/9bcXHI\" rel=\"nofollow noreferrer\">ideone.com/9bcXHI</a>. If you mean to map browser name to some integer, it is not the regex problem then. You may use a vector of pair, and map the match value to the int."}, {"owner": {"reputation": 539, "user_id": 2352611, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/0fY8c.jpg?s=128&g=1", "display_name": "Larytet", "link": "https://stackoverflow.com/users/2352611/larytet"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1526481300, "post_id": 50373263, "comment_id": 87763498, "body": "@WiktorStribi\u017cew this is exactly what my code does. I wonder if I can shave CPU cycles."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1526503406, "post_id": 50373263, "comment_id": 87775408, "body": "Ok, so your code works, please consider posting it as <a href=\"https://codereview.stackexchange.com\">Code Review</a>."}], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1526508497, "post_id": 50380398, "comment_id": 87777368, "body": "Added some live demos using Boost Spirit."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1526510730, "post_id": 50380398, "comment_id": 87778040, "body": "Added an <a href=\"http://coliru.stacked-crooked.com/a/16f15237011b16e8\" rel=\"nofollow noreferrer\">alternative take</a> using Boost Xpressive."}, {"owner": {"reputation": 539, "user_id": 2352611, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/0fY8c.jpg?s=128&g=1", "display_name": "Larytet", "link": "https://stackoverflow.com/users/2352611/larytet"}, "edited": false, "score": 0, "creation_date": 1526537077, "post_id": 50380398, "comment_id": 87784314, "body": "The performance of the original regex based solution is about 50% better than the one based on the lookup in a vector. There is another problem - I do not have C++ 11 support, I use boost 1.49. That said you write outstanding C++ code."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 539, "user_id": 2352611, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/0fY8c.jpg?s=128&g=1", "display_name": "Larytet", "link": "https://stackoverflow.com/users/2352611/larytet"}, "edited": false, "score": 0, "creation_date": 1526543008, "post_id": 50380398, "comment_id": 87787493, "body": "Do you have the benchmark code? I&#39;m happy to translate the things to C++11. Not sure about Xpressive in Boost 1.49 (why though, even Ubuntu 12.04, which an <a href=\"https://www.ubuntu.com/info/release-end-of-life\" rel=\"nofollow noreferrer\">LTS release already past its End-Of-Life</a> (!!!) contained <a href=\"https://packages.ubuntu.com/trusty/libboost-all-dev\" rel=\"nofollow noreferrer\">Boost 1.54.0</a> e.g.)"}, {"owner": {"reputation": 539, "user_id": 2352611, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/0fY8c.jpg?s=128&g=1", "display_name": "Larytet", "link": "https://stackoverflow.com/users/2352611/larytet"}, "edited": false, "score": 0, "creation_date": 1526543510, "post_id": 50380398, "comment_id": 87787755, "body": "No C++11 support in my case (work in progress though). I am running on CentOS 6 for production. This is not quite a ready to go benchmark, but close   <a href=\"https://gist.github.com/larytet/247f09c0edae49fd2f2cea1fdfdc68d0\" rel=\"nofollow noreferrer\">gist.github.com/larytet/247f09c0edae49fd2f2cea1fdfdc68d0</a>  I tested on Ubuntu 17.10"}, {"owner": {"reputation": 539, "user_id": 2352611, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/0fY8c.jpg?s=128&g=1", "display_name": "Larytet", "link": "https://stackoverflow.com/users/2352611/larytet"}, "edited": false, "score": 0, "creation_date": 1526546294, "post_id": 50380398, "comment_id": 87789371, "body": "My bad - I use Boost 1.59"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 539, "user_id": 2352611, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/0fY8c.jpg?s=128&g=1", "display_name": "Larytet", "link": "https://stackoverflow.com/users/2352611/larytet"}, "edited": false, "score": 0, "creation_date": 1526546914, "post_id": 50380398, "comment_id": 87789764, "body": "I&#39;m still interested in replicating the benchmark. I&#39;m also happy to translate to C++03"}, {"owner": {"reputation": 539, "user_id": 2352611, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/0fY8c.jpg?s=128&g=1", "display_name": "Larytet", "link": "https://stackoverflow.com/users/2352611/larytet"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1526547283, "post_id": 50380398, "comment_id": 87790003, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/171225/discussion-between-larytet-and-sehe\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 1, "last_activity_date": 1526510701, "last_edit_date": 1526510701, "creation_date": 1526507272, "answer_id": 50380398, "question_id": 50373263, "link": "https://stackoverflow.com/questions/50373263/how-to-get-index-of-the-matching-group/50380398#50380398", "title": "How to get index of the matching group", "body": "<p>You can use named captures.</p>\n\n<p>I just used it earlier today: <a href=\"https://stackoverflow.com/questions/50364083/while-doing-url-encoding-the-stdregex-replace-doesnt-work-properly-for-char\">While doing url encoding , The std::regex_replace doesn&#39;t work properly for character &quot;+&quot; . Can some body help me out?</a></p>\n\n<p>In your case, though, I'd use qi::symbols:</p>\n\n<pre><code>struct browser_type_sym : boost::spirit::qi::symbols&lt;char, BrowserType&gt; {\n    browser_type_sym() {\n        this-&gt;add\n            (\"Firefox\", FIREFOX)\n            (\"Chrome\",  CHROME)\n            (\"Safari\",  SAFARI)\n            (\"Opera\",   OPERA)\n            (\"MSIE\",    IE)\n            (\"Edge\",    EDGE)\n            (\"Trident\", OTHER);\n    }\n} static const browser_type;\n</code></pre>\n\n<p>You can simply use it with <strong>any</strong> container of BrowserType:</p>\n\n<pre><code>template &lt;typename Types&gt;\nbool extract_browser_ids(std::string const&amp; userAgent, Types&amp; into) {\n    using boost::spirit::repository::qi::seek;\n    return parse(userAgent.begin(), userAgent.end(), *seek [ browser_type ], into);\n}\n</code></pre>\n\n<h2>Using <code>vector&lt;BrowserType&gt;</code></h2>\n\n<p>As you will see, if you use <code>vector&lt;BrowserType</code> it will retain order and duplicates:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/222ec3bb05f2627d\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>int main() {\n    for (std::string const input : {\n            \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Safari/537.36 Chrome/62.0.3202.94\",\n            \"Chrome; Opera; Chrome again!\"\n    }) {\n        std::vector&lt;BrowserType&gt; types;\n        extract_browser_ids(input, types);\n        for(auto type : types)\n            std::cout &lt;&lt; type &lt;&lt; \",\";\n\n        std::cout &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>2,1,\n1,3,1,\n</code></pre>\n\n<h2>Using <code>set&lt;BrowserType&gt;</code></h2>\n\n<p>When using <code>set&lt;&gt;</code> it will order and de-duplicate:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/873320e2854c200a\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>    std::set&lt;BrowserType&gt; types;\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>1,2,\n1,3,\n</code></pre>\n\n<h2>Case Insensitivity</h2>\n\n<p>Just to show minor tweaks:</p>\n\n<pre><code>struct browser_type_sym : boost::spirit::qi::symbols&lt;char, BrowserType&gt; {\n    browser_type_sym() {\n        this-&gt;add\n            (\"firefox\", FIREFOX)\n            (\"chrome\",  CHROME)\n            (\"safari\",  SAFARI)\n            (\"opera\",   OPERA)\n            (\"msie\",    IE)\n            (\"edge\",    EDGE)\n            (\"trident\", OTHER);\n    }\n} static const browser_type;\n\ntemplate &lt;typename Types&gt;\nbool extract_browser_ids(std::string const&amp; userAgent, Types&amp; into) {\n    using boost::spirit::repository::qi::seek;\n    using boost::spirit::qi::no_case;\n    return parse(userAgent.begin(), userAgent.end(), *seek [ no_case [ browser_type ] ], into);\n}\n</code></pre>\n\n<p>Now case doesn't matter: <strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/0c54a06465f1a37a\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<h2>Alternative: Boost Xpressive</h2>\n\n<p>Similarly you can use Boost Xpressive, which is slightly closer to the <code>regex</code> approach (though <a href=\"https://www.boost.org/doc/libs/1_67_0/doc/html/xpressive/user_s_guide.html#boost_xpressive.user_s_guide.symbol_tables_and_attributes.symbol_tables\" rel=\"nofollow noreferrer\">internally it still builds a trie of strings from the map</a>). </p>\n\n<p>The semantic actions require more manual labour, making it also less generic (it won't work with <code>std::set</code> without changes, unlike the Spirit Qi approach already shown).</p>\n\n<p>Nevertheless, for completeness:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/16f15237011b16e8\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>std::map&lt;std::string, BrowserType&gt; s_browser_type_map {\n        {\"Firefox\", FIREFOX},\n        {\"Chrome\",  CHROME},\n        {\"Safari\",  SAFARI},\n        {\"Opera\",   OPERA},\n        {\"MSIE\",    IE},\n        {\"Edge\",    EDGE},\n        {\"Trident\", OTHER},\n    };\n\n#include &lt;boost/xpressive/xpressive.hpp&gt;\n#include &lt;boost/xpressive/regex_actions.hpp&gt;\n\ntemplate &lt;typename Types&gt;\nvoid extract_browser_ids(std::string const&amp; userAgent, Types&amp; into) {\n    using namespace boost::xpressive;\n\n    placeholder&lt;Types&gt; _result;\n    sregex type = (a1 = s_browser_type_map) [ push_back(_result, a1) ];\n\n    for (sregex_iterator it(userAgent.begin(), userAgent.end(), type, let(_result=into)),\n            end; it != end; ++it) \n    { } // all side-effects in the semantic action\n}\n</code></pre>\n\n<p>Which prints the same output as the <code>vector&lt;&gt;</code> Spirit example:</p>\n\n<pre><code>2,1,\n1,3,1,\n</code></pre>\n"}], "owner": {"reputation": 539, "user_id": 2352611, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/0fY8c.jpg?s=128&g=1", "display_name": "Larytet", "link": "https://stackoverflow.com/users/2352611/larytet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 50380398, "answer_count": 1, "score": 1, "last_activity_date": 1526552287, "creation_date": 1526479923, "last_edit_date": 1526552287, "question_id": 50373263, "link": "https://stackoverflow.com/questions/50373263/how-to-get-index-of-the-matching-group", "title": "How to get index of the matching group", "body": "<p>I want to list all matching groups in the input. For example, I want to print all browsers I care about in a User-Agent HTTP header. One match is enough. Is there a way to get rid of the inner for loop in the code below. I looked in the boost/regex/sub_match.hpp and I have no ideas.</p>\n\n<pre><code>#include &lt;string&gt; \n#include &lt;iostream&gt; \n#include &lt;boost/regex.hpp&gt; // Boost 1.59, no C++14 for me\n\nenum BrowserType\n{\n    FIREFOX = 0 ,\n    CHROME,\n    SAFARI,\n    OPERA,\n    IE,\n    EDGE,\n    OTHER,\n};\n\nconst boost::regex BROWSERS_REGEX(\"(Firefox)|(Chrome)|(Safari)|(Opera)|(MSIE)|(Edge)|(Trident)\");\n\nint main()\n{\n        // I expect two matches here CHROME and SAFARI\n        std::string input(\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Safari/537.36 Chrome/62.0.3202.94\");\n        boost::sregex_iterator res(input.begin(), input.end(), BROWSERS_REGEX);\n        boost::sregex_iterator end;\n        for(; res != end; ++res)\n        {\n                // elude copy here ?\n                boost::smatch what = *res;\n                // Can I know the index of the matching group w/o 'for'?\n                for (int type = 0;type &lt; OTHER;type++) \n                {\n                        int groupIndex = type+1;\n                        if (what[groupIndex].matched) \n                                std::cout &lt;&lt; (BrowserType)type &lt;&lt; \",\";\n                }\n                std::cout &lt;&lt; \"\\n\";\n\n        }\n\n        return 0;\n}\n</code></pre>\n\n<p>Important update. The strstr() based code is the fastest approach for strings shorter than 1K bytes</p>\n\n<pre><code>    const char *input(\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Safari/537.36 Chrome/62.0.3202.94\");\n    const char *browsers[OTHER+1] = {\"Firefox\", \"Chrome\", \"Safari\", \"Opera\", \"MSIE\", \"Edge\", \"Trident\"};\n    int i = 0;\n    for (const char **browser = &amp;browsers[0];browser &lt;= &amp;browsers[OTHER];browser++, i++)\n    {\n            if (strstr(input, *browser))\n            {\n                    groupindex = i;\n            }\n    }\n</code></pre>\n"}, {"tags": ["c++", "vector", "ifstream"], "answers": [{"tags": [], "owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "is_accepted": false, "score": 3, "last_activity_date": 1526480142, "last_edit_date": 1526480142, "creation_date": 1526479825, "answer_id": 50373205, "question_id": 50373112, "link": "https://stackoverflow.com/questions/50373112/c-clear-vector-of-structs-exception/50373205#50373205", "title": "C++ clear vector of structs exception", "body": "<pre><code>instream.read(reinterpret_cast&lt;char*&gt;(parts.data()), bytes);\n</code></pre>\n\n<p>That's a big code smell and UB as well. <code>std::string</code> holds a pointer to heap allocated string (modulo SSO), but when you try to reinterpret_cast it form file (assuming you saved it the same way) you'll just get some garbage value (since it now doesn't point to any valid memory location), so when the <code>std::string</code> tries to deallocate it in the destructor it'll fail like you've experienced. You simply can't do what you are trying to do here.</p>\n\n<p>I suggest you overload <code>istream&amp; operator&gt;&gt; (istream&amp; is, Part&amp; p);</code> for your struct. And the corresponding <code>&lt;&lt;</code> for ostream as well. It should be easy since such overloads already exists for all <code>Part</code> fields.</p>\n"}, {"comments": [{"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 2, "creation_date": 1526480291, "post_id": 50373212, "comment_id": 87762767, "body": "Being <code>POD</code> or <code>trivial</code> doesn&#39;t really mean anything here. You can easily construct a POD type which couldn&#39;t be (de)serialized in the same way. I.e. <code>struct Foo { int *bar; };</code> Btw, worth mentioning that &quot;pod&quot; definition is deprecated."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 4, "last_activity_date": 1526479837, "creation_date": 1526479837, "answer_id": 50373212, "question_id": 50373112, "link": "https://stackoverflow.com/questions/50373112/c-clear-vector-of-structs-exception/50373212#50373212", "title": "C++ clear vector of structs exception", "body": "<p>Your structure <code>Part</code> is not a <a href=\"http://en.cppreference.com/w/cpp/concept/PODType\" rel=\"nofollow noreferrer\">POD type</a> and not <a href=\"http://en.cppreference.com/w/cpp/concept/TrivialType\" rel=\"nofollow noreferrer\">trivial</a>, therefore you can't save or load it like you do.</p>\n\n<p>Take its <code>id</code> member, a <code>std::string</code> object usually contains a <em>pointer</em> which is what is saved. That pointer will not be valid in any other process.</p>\n\n<p>You need to use <a href=\"https://en.wikipedia.org/wiki/Serialization\" rel=\"nofollow noreferrer\"><em>serialization</em></a> to save and load your structure.</p>\n"}], "owner": {"reputation": 31, "user_id": 5599992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/122f270ba607a6e7d4bce103047a6467?s=128&d=identicon&r=PG&f=1", "display_name": "C.Yu", "link": "https://stackoverflow.com/users/5599992/c-yu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1526480142, "creation_date": 1526479585, "question_id": 50373112, "link": "https://stackoverflow.com/questions/50373112/c-clear-vector-of-structs-exception", "title": "C++ clear vector of structs exception", "body": "<p>I defined a struct called Part:</p>\n\n<pre><code>struct Part\n{\n    std::string id;\n    double area;\n    double volume;\n\n    bool operator==(const Part&amp; part) const\n    {\n        return (area == part.area) &amp;&amp; (volume == part.volume);\n    }\n\n    bool operator!=(const Part&amp; part) const\n    {\n        return !operator==(part);\n    }\n\n    bool operator&lt;(const Part &amp;part) const\n    {\n        return (area + volume) &lt; part.area + part.volume;\n    }\n};\n</code></pre>\n\n<p>I created a vector of Parts and saved the vector in a binary file.\nThen I read the binary file into a vector. I confirmed that all Parts are correctly read into the vector. My function to read binary file is:</p>\n\n<pre><code>static bool restore_vector_from_file(const char* fileName, std::vector&lt;Part&gt; &amp;parts) {\n\n    std::ifstream instream(fileName, std::ios::in | std::ios::binary);\n\n    if (!instream) {\n        return false;\n    }\n\n    instream.seekg(0, instream.end);\n    int bytes = instream.tellg();\n    instream.seekg(0, instream.beg);\n\n    int vector_size = bytes / sizeof(Part);\n    parts.resize(vector_size);\n    instream.read(reinterpret_cast&lt;char*&gt;(parts.data()), bytes);\n\n    if (!instream) \n    {\n        return false;\n    }\n\n    instream.close();\n    return true;\n}\n</code></pre>\n\n<p>My main function is:</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    if (argc != 3)\n    {\n        std::cout &lt;&lt; \"Number of arguments must be 3\" &lt;&lt; std::endl;\n        return 1;\n    }\n\n    // Load parts with properties to a vector\n    const char* folderName = argv[1];\n    const char* vectorFileName = argv[2];\n\n    std::vector&lt;Part&gt; partArray;\n\n    // Load from pre-saved file to save time\n    if (!restore_vector_from_file(vectorFileName, partArray))\n    {\n        std::cout &lt;&lt; \"Failed to retore vector from file\" &lt;&lt; std::endl;\n        return 1;\n    }\n    partArray.clear();\n    return 0;\n}\n</code></pre>\n\n<p>Everything works fine until I try to clear <code>partArray</code>. It throws an exception:</p>\n\n<pre><code>Exception thrown: read access violation.\n_Pnext was 0x1BC586CCB48.\n</code></pre>\n\n<p>Even if I remove <code>partArray.clear()</code>, the same exception is thrown when <code>return 0;</code></p>\n\n<p>Please help.</p>\n"}, {"tags": ["python", "c++", "python-3.x", "boost"], "answers": [{"tags": [], "owner": {"reputation": 754, "user_id": 4177926, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iMXeV.jpg?s=128&g=1", "display_name": "user_na", "link": "https://stackoverflow.com/users/4177926/user-na"}, "is_accepted": false, "score": 0, "last_activity_date": 1527250616, "creation_date": 1527250616, "answer_id": 50529047, "question_id": 50372568, "link": "https://stackoverflow.com/questions/50372568/building-boost-python-for-msvc-with-python3-linker-error/50529047#50529047", "title": "Building boost python for msvc with python3 - Linker Error", "body": "<p>I was not able so solve the descibed error, but I found a set of precompiled libaries here:\n<a href=\"https://www.lfd.uci.edu/~gohlke/pythonlibs/\" rel=\"nofollow noreferrer\">https://www.lfd.uci.edu/~gohlke/pythonlibs/</a></p>\n"}, {"comments": [{"owner": {"reputation": 754, "user_id": 4177926, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iMXeV.jpg?s=128&g=1", "display_name": "user_na", "link": "https://stackoverflow.com/users/4177926/user-na"}, "edited": false, "score": 0, "creation_date": 1530522418, "post_id": 51128045, "comment_id": 89249562, "body": "Great @user1618465, I will try it out and update my question. I did not figure out in which version this change was implemented. Is it already present in the current release (1.67.0)?"}, {"owner": {"reputation": 1729, "user_id": 1618465, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e9867486a678f1a5ddc2929c25c2a53?s=128&d=identicon&r=PG", "display_name": "user1618465", "link": "https://stackoverflow.com/users/1618465/user1618465"}, "reply_to_user": {"reputation": 754, "user_id": 4177926, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iMXeV.jpg?s=128&g=1", "display_name": "user_na", "link": "https://stackoverflow.com/users/4177926/user-na"}, "edited": false, "score": 0, "creation_date": 1530556442, "post_id": 51128045, "comment_id": 89268004, "body": "No, it will be in the 1.68. So what I did is just applying the fix on the 1.67 manually since it&#39;s just a couple of files. Cheers"}], "tags": [], "owner": {"reputation": 1729, "user_id": 1618465, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e9867486a678f1a5ddc2929c25c2a53?s=128&d=identicon&r=PG", "display_name": "user1618465", "link": "https://stackoverflow.com/users/1618465/user1618465"}, "is_accepted": false, "score": 0, "last_activity_date": 1530492695, "creation_date": 1530492695, "answer_id": 51128045, "question_id": 50372568, "link": "https://stackoverflow.com/questions/50372568/building-boost-python-for-msvc-with-python3-linker-error/51128045#51128045", "title": "Building boost python for msvc with python3 - Linker Error", "body": "<p>The problem that you mention about:</p>\n\n<blockquote>\n  <p>LNK1104: cannot open file\n  'libboost_pythonPY_MAJOR_VERSIONPY_MINOR_VERSION-vc120-mt-gd-x32-1_67.lib'</p>\n</blockquote>\n\n<p>was solved on <a href=\"https://github.com/boostorg/python/commit/24313709a78c694af4ae29116cd06ea86585aa95\" rel=\"nofollow noreferrer\">this</a> commit. </p>\n\n<p>to get full context of the problem you can check <a href=\"https://github.com/boostorg/python/issues/193\" rel=\"nofollow noreferrer\">this</a> </p>\n"}], "owner": {"reputation": 754, "user_id": 4177926, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iMXeV.jpg?s=128&g=1", "display_name": "user_na", "link": "https://stackoverflow.com/users/4177926/user-na"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 791, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1530492695, "creation_date": 1526478165, "last_edit_date": 1526480064, "question_id": 50372568, "link": "https://stackoverflow.com/questions/50372568/building-boost-python-for-msvc-with-python3-linker-error", "title": "Building boost python for msvc with python3 - Linker Error", "body": "<p>I am porting a Python Libary from python 2.7 to 3.6 on fresh installed Win10 with VS2013 and Anaconda Python 3.6 64bit.</p>\n\n<p>The libariy contains a dll which is using boost python as a wrapper for python, so I have to recompile it.\nAs the previous boost libs were compiled against python 2.7 I again started from a fresh boost_1_63_0 and compiled it with the following settings in the <code>project-config.jam</code></p>\n\n<pre><code>import option ;    \n\nusing msvc = 12.0;  \nusing python : 3.6 : C:\\\\ProgramData\\\\Anaconda3 ;   \n\noption.set keep-going : false ;\n</code></pre>\n\n<p>using the these parameters</p>\n\n<pre><code>bjam.exe --with-python address-model=64 variant=release link=shared\n--build-type=complete\n</code></pre>\n\n<p>I get a full set of compiled libs:</p>\n\n<pre><code>\u2514\u2500\u2500\u2500lib\n    boost_numpy36-vc120-mt-x64-1_67.dll\n    boost_numpy36-vc120-mt-x64-1_67.lib\n    boost_python36-vc120-mt-x64-1_67.dll\n    boost_python36-vc120-mt-x64-1_67.lib\n    ...\n    libboost_python36-vc120-mt-gd-x32-1_67.lib\n    libboost_python36-vc120-mt-gd-x64-1_67.lib\n    libboost_python36-vc120-mt-x32-1_67.lib\n    libboost_python36-vc120-mt-x64-1_67.lib\n    ...\n    libboost_numpy36-vc120-mt-gd-x32-1_67.lib\n    libboost_numpy36-vc120-mt-gd-x64-1_67.lib\n    libboost_numpy36-vc120-mt-x32-1_67.lib\n    libboost_numpy36-vc120-mt-x64-1_67.lib\n</code></pre>\n\n<p>As I had some issues with the linker I started a new Soulution in Visual Studio. The needed boost and Pyton folders have been added to the project C/C++-->general-->additional Include directories and also boost's <code>stage\\libs</code> folder and python's <code>libs</code> folder were added to the additional libary directories for the linker.</p>\n\n<p>I try to compile the minimal example below which works perfectly on my other system which is still running on the old python 2.7 based boost build:</p>\n\n<pre><code>#include \"stdafx.h\"\n#define BOOST_PYTHON_STATIC_LIB  \n#define BOOST_LIB_NAME \"boost_numpy\"\n#include &lt;boost/config/auto_link.hpp&gt;\n#include &lt;boost/python/numpy.hpp&gt;\n#include &lt;boost/python.hpp&gt;\n#include &lt;boost/python/numpy.hpp&gt;\n#include &lt;boost/python/suite/indexing/vector_indexing_suite.hpp&gt;\n</code></pre>\n\n<p>While compiling I get the following linker error </p>\n\n<pre><code>LNK1104: cannot open file 'libboost_numpy-vc120-mt-x64-1_67.lib'\n</code></pre>\n\n<p>So for some reason the build creates a lib named <code>boost_numpy36-vc120-mt-x64-1_67.lib</code> but the linker is still searching for a version without the python version <code>36</code>. </p>\n\n<p>When I simply remove the python version from the lib I get the following linker error:</p>\n\n<pre><code>LNK1104: cannot open file 'libboost_pythonPY_MAJOR_VERSIONPY_MINOR_VERSION-vc120-mt-gd-x32-1_67.lib'\n</code></pre>\n\n<p>Any ideas what is happening here?</p>\n\n<p><strong>[update]</strong></p>\n\n<p>Ok, so after finding <a href=\"https://stackoverflow.com/questions/44987299/configuring-visual-studio-to-work-with-boost-python-and-python-3?rq=1\">this</a> question I realized that the  name is linked to the definition of the <code>BOOST_LIB_NAME</code> so I changed it to </p>\n\n<pre><code>#define BOOST_LIB_NAME \"boost_numpy36\"\n</code></pre>\n\n<p>But unfortunatell I still get the second link error:</p>\n\n<pre><code>LNK1104: cannot open file 'libboost_pythonPY_MAJOR_VERSIONPY_MINOR_VERSION-vc120-mt-gd-x32-1_67.lib'\n</code></pre>\n"}, {"tags": ["c++", "c", "initialization", "default", "misra"], "comments": [{"owner": {"reputation": 1177, "user_id": 4802431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/913d82f4ab2d30e0c3cb0937f5d10185?s=128&d=identicon&r=PG&f=1", "display_name": "William_Wilson", "link": "https://stackoverflow.com/users/4802431/william-wilson"}, "edited": false, "score": 0, "creation_date": 1526478277, "post_id": 50372541, "comment_id": 87761057, "body": "Are you sure? Your first if is pointless... the second if/else will always change the value of result."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1526478291, "post_id": 50372541, "comment_id": 87761073, "body": "That first analyse don&#39;t seem very relevant. Even the most basic optimizing compiler can remove an unnecessary initialization."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1526478358, "post_id": 50372541, "comment_id": 87761124, "body": "First of all, please note that C and C++ are two <i>very</i> different languages, and while parts might seem similar there might be minute details that makes a big difference in behavior and semantics. Second of all, what&#39;s the use of using <code>int32_t</code> for a variable that you&#39;re going to cast to <code>int16_t</code> anyway? Lastly, are you sure about your <code>if</code> followed by <code>if ... else</code>? Should you not have <code>if ... else if ... else</code>?"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1526478723, "post_id": 50372541, "comment_id": 87761426, "body": "are those the only static analysis issues you get?  What about the unnecessary comparison of an integer with a double or the magic numbers?"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1526479515, "post_id": 50372541, "comment_id": 87762101, "body": "You need to ask a different question than <i>&quot;What do you think about it?&quot;</i>, such as <i>&quot;How can I write the code so that it conforms with both local and MISRA standards?&quot;</i>.  Canvassing opinion is OT on SO."}, {"owner": {"reputation": 350, "user_id": 5667718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7a984655c6836629b1609398e18f64?s=128&d=identicon&r=PG&f=1", "display_name": "Ernie Mur", "link": "https://stackoverflow.com/users/5667718/ernie-mur"}, "edited": false, "score": 0, "creation_date": 1526485814, "post_id": 50372541, "comment_id": 87766652, "body": "@Wiliam_Wilson: You are right, there was an else lost. But with this the situation remains the same."}, {"owner": {"reputation": 350, "user_id": 5667718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7a984655c6836629b1609398e18f64?s=128&d=identicon&r=PG&f=1", "display_name": "Ernie Mur", "link": "https://stackoverflow.com/users/5667718/ernie-mur"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526486217, "post_id": 50372541, "comment_id": 87766904, "body": "@Some programmer dude: I was using int32_t in order to avoid that the difference of the float value (e.g. 100000) and the int16_t (e.g. -30000) gives a value which is out of range of int16_t. In this case however it was garenteed that the values are not out of range of int32_t."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526487191, "post_id": 50372541, "comment_id": 87767452, "body": "Since you must still <i>clamp</i> the result, why not use an existing function for that, like <a href=\"http://en.cppreference.com/w/cpp/algorithm/clamp\" rel=\"nofollow noreferrer\"><code>std::clamp</code></a>? As in <code>return static_cast&lt;int16_t&gt;(std::clamp(signal1 - signal2, -32768, 32767));</code>"}, {"owner": {"reputation": 350, "user_id": 5667718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7a984655c6836629b1609398e18f64?s=128&d=identicon&r=PG&f=1", "display_name": "Ernie Mur", "link": "https://stackoverflow.com/users/5667718/ernie-mur"}, "edited": false, "score": 0, "creation_date": 1526487808, "post_id": 50372541, "comment_id": 87767780, "body": "Clamp is a good idea - I did not know this function which seems to be new in C++17. My code was originally programmed some years ago for a smaller microcontroller and is integrated in the other code which is C++ by the use of extern &quot;C&quot;. Therefore no static_cast and not std::clamp can be used. I am already thinking if it is worth to switch to C++ completely."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1526563345, "post_id": 50372541, "comment_id": 87800818, "body": "MISRA-C:2012 is not applicable to C++ so you should remove that tag. Using C++ is a MISRA-C violation in itself, you&#39;d need to use MISRA-C++ instead."}], "answers": [{"comments": [{"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1526478546, "post_id": 50372630, "comment_id": 87761268, "body": "The question kind of invites opinion; but that is no reason to give one - opinion is OT on SO."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1526478643, "post_id": 50372630, "comment_id": 87761358, "body": "@Clifford: I take this as &quot;polite opinion&quot;, i.e. this style must be insisted upon."}, {"owner": {"reputation": 350, "user_id": 5667718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7a984655c6836629b1609398e18f64?s=128&d=identicon&r=PG&f=1", "display_name": "Ernie Mur", "link": "https://stackoverflow.com/users/5667718/ernie-mur"}, "edited": false, "score": 0, "creation_date": 1526487295, "post_id": 50372630, "comment_id": 87767493, "body": "@Bathsheba: Our internal coding style forbids to return prematurely. This is also true for Misra C++ (2008-6-6-5)."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1526487883, "post_id": 50372630, "comment_id": 87767825, "body": "@Bathsheba: And that&#39;s why it&#39;s just your <i>opinion</i>: I would (almost) insist on the opposite opinion. Now do you see why we don&#39;t answer subjective questions on SO? You are putting something forth as fact that is, in fact, not fact."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1526563155, "post_id": 50372630, "comment_id": 87800673, "body": "It is no longer an opinion if you have enough authoritative sources to back it up. MISRA-C forbids <i>dead code</i>, which is defined as code that can be removed without affecting the outcome of the program, with the exception of expression that are explicitly cast to <code>(void)</code> by the programmer. Dead code is regarded as a safety hazard. Authoritative sources: MISRA-C:2012, IEC61507, ISO26262, DO-178C."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1526478313, "creation_date": 1526478313, "answer_id": 50372630, "question_id": 50372541, "link": "https://stackoverflow.com/questions/50372541/c-c-default-value-value-assigned-to-variable-is-never-used/50372630#50372630", "title": "C/C++ default value/value assigned to variable is never used", "body": "<p>I agree with MISRA.</p>\n\n<p>The unnecessary initialisation of a variable can allow for sloppy code as it defeats tools that check for uninitialised variables.</p>\n\n<p>In your particular case you could localise <code>result</code> to the final <code>else</code> case and return prematurely in the other cases. But that's not to everyone's taste either.</p>\n"}, {"tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 1, "last_activity_date": 1526478345, "creation_date": 1526478345, "answer_id": 50372643, "question_id": 50372541, "link": "https://stackoverflow.com/questions/50372541/c-c-default-value-value-assigned-to-variable-is-never-used/50372643#50372643", "title": "C/C++ default value/value assigned to variable is never used", "body": "<p>Static analysers apply the rules you define - some of these rules will conflict because you are expected to set them to match your local coding standard.  I imagine there is also a rule that may or may not be enabled that <em>requires</em> initialisation of all variables; and you cannot do both.</p>\n\n<p>Pick a non-conflicting rule set that matches your preferred standard. Which you choose is a matter of opinion so not really a valid SO question.</p>\n"}, {"tags": [], "owner": {"reputation": 1040, "user_id": 1614319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff0ff3e7d5ad91f5432ad168d4f4c9f5?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1614319/andrew"}, "is_accepted": false, "score": 1, "last_activity_date": 1530165371, "creation_date": 1530165371, "answer_id": 51075591, "question_id": 50372541, "link": "https://stackoverflow.com/questions/50372541/c-c-default-value-value-assigned-to-variable-is-never-used/51075591#51075591", "title": "C/C++ default value/value assigned to variable is never used", "body": "<p>Most good static analysers will provide you with data flow analysis - which warn you of possible paths leaving uninitialised variables.</p>\n\n<p>Taking your example, say you (accidentally) missed one of the later assignments, this would not be detected by SA:</p>\n\n<pre><code>/// gets signal1 - signal2 (checks range of value)\nint16_t getSignalDifferenceFromFloat(float signal1, int16_t signal2)\n{\n    int32_t result = 0; // &lt;-- this assignment makes the violation \n        // ... but I feel better with it\n\n    if (signal1 &gt; 65535.0)\n    {\n        // commented out this line\n        // No data-flow anomoly detected\n        // result = 32767;\n    }\n\n    // Snip rest of code\n\n    return (int16_t) result;\n}\n</code></pre>\n\n<p>The MISRA Guidelines are not perfect, by any stretch, but we try and prevent the obvious... and uninitialised variables are quite easy to detect - as long as you don't try and fudge the issue.</p>\n\n<p>It's a bit like sticking a cast in, just to shut up the Static Analysis tool......</p>\n\n<p>[See profile for disclaimers]</p>\n"}], "owner": {"reputation": 350, "user_id": 5667718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7a984655c6836629b1609398e18f64?s=128&d=identicon&r=PG&f=1", "display_name": "Ernie Mur", "link": "https://stackoverflow.com/users/5667718/ernie-mur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1083, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1530169344, "creation_date": 1526478075, "last_edit_date": 1530169344, "question_id": 50372541, "link": "https://stackoverflow.com/questions/50372541/c-c-default-value-value-assigned-to-variable-is-never-used", "title": "C/C++ default value/value assigned to variable is never used", "body": "<p>I like to always initialse local variables, e.g</p>\n\n<pre><code>int32_t result = 0;\n</code></pre>\n\n<p>I thought this is good programming style because \"result\" can never become uninitialised, independent of whether following if-constructs set it or not.</p>\n\n<p>But now I am trying out a static code checker tool (C_STAT for IAR embedded workbench) and this complains that in the function below, MISRA-C++ rule 2008-01-06 (\"shall not contain instances of non-volatile variables being given values that are never subsequently used\") and MISRA C:2012 rule 2.2c (\"no dead code\") and CWE 563 (\"unused variable\") are violated.</p>\n\n<pre><code>// gets signal1 - signal2 (checks range of value)\nint16_t getSignalDifferenceFromFloat(float signal1, int16_t signal2)\n{\n    int32_t result = 0; // &lt;-- this assignment makes the violation \n                        // ... but I feel better with it\n\n    if (signal1 &gt; 65535.0)\n    {\n        // because result cannot be smaller than the max value of TSignal\n        result = 32767;\n    }\n    else if (signal1 &lt; -65535.0)  // &lt;-- here an else  was missing\n    {\n        // because result cannot be larger than the min value of TSignal\n        result = -32768;\n    }\n    else\n    {\n        result = (int32_t)signal1 - (int32_t)signal2;\n\n        if (result &lt; -32768)\n        {\n            result = -32768;\n        }\n        else if (result &gt; 32767)\n        {\n            result = 32767;\n        }\n    }\n\n    return (int16_t) result;\n}\n</code></pre>\n\n<p>original Question: What do you think about it? </p>\n\n<p>New Questions:</p>\n\n<ol>\n<li>Are there good coding standards which require always immediate initialisation of declared local variables?</li>\n<li>Is the code checker too pedantic (some compilers do not complain at this place but would complain it the variable would be completely stay unused)? I make it for years but I cannot remember where I had seen it. </li>\n</ol>\n"}, {"tags": ["c++", "boost", "stdvector"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1526477604, "post_id": 50372344, "comment_id": 87760563, "body": "Why can&#39;t you use boost in your framework?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1526477743, "post_id": 50372344, "comment_id": 87760673, "body": "Using old good index is not fancy enough?"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1526477755, "post_id": 50372344, "comment_id": 87760681, "body": "<a href=\"//stackoverflow.com/q/18478385\">Convert two vectors of int with the same length into one vector of pairs of int in C++</a>"}, {"owner": {"reputation": 113, "user_id": 4924371, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d3ced85c042c7867f0e6766ce2980d8e?s=128&d=identicon&r=PG&f=1", "display_name": "Number42", "link": "https://stackoverflow.com/users/4924371/number42"}, "edited": false, "score": 0, "creation_date": 1526477834, "post_id": 50372344, "comment_id": 87760724, "body": "working with the ROOT data analysis framework. It doesn&#39;t know about boost by default. Therefore it&#39;s maybe a better approach to fall back on standard C++"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1526477957, "post_id": 50372344, "comment_id": 87760814, "body": "A framework doesn&#39;t restrict you to things it &quot;knows&quot;, or it is less of a framework or more of a hindrance."}, {"owner": {"reputation": 113, "user_id": 4924371, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d3ced85c042c7867f0e6766ce2980d8e?s=128&d=identicon&r=PG&f=1", "display_name": "Number42", "link": "https://stackoverflow.com/users/4924371/number42"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1526477977, "post_id": 50372344, "comment_id": 87760830, "body": "@Slava: index might be perfectly fine - I was hoping someone could show me a way to go in that direction"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1526477991, "post_id": 50372344, "comment_id": 87760844, "body": "Are you aware that you possibly copy a string twice per iteration?"}, {"owner": {"reputation": 113, "user_id": 4924371, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d3ced85c042c7867f0e6766ce2980d8e?s=128&d=identicon&r=PG&f=1", "display_name": "Number42", "link": "https://stackoverflow.com/users/4924371/number42"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1526478693, "post_id": 50372344, "comment_id": 87761406, "body": "@Slava: yes I was aware about the copies but as it was only a small example, I though it wouldn&#39;t cause too much damage."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1526478820, "post_id": 50372344, "comment_id": 87761510, "body": "@Number42 no it should not make any damage especially on array of 3 elements. I just asked if you aware of the hidden cost."}, {"owner": {"reputation": 113, "user_id": 4924371, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d3ced85c042c7867f0e6766ce2980d8e?s=128&d=identicon&r=PG&f=1", "display_name": "Number42", "link": "https://stackoverflow.com/users/4924371/number42"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1526478903, "post_id": 50372344, "comment_id": 87761579, "body": "@Slava: thanks for pointing this out. For the bigger application I would have changed that."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 4924371, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d3ced85c042c7867f0e6766ce2980d8e?s=128&d=identicon&r=PG&f=1", "display_name": "Number42", "link": "https://stackoverflow.com/users/4924371/number42"}, "edited": false, "score": 0, "creation_date": 1526478734, "post_id": 50372577, "comment_id": 87761436, "body": "This works fine, thanks a lot for the support."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 3, "last_activity_date": 1526478178, "creation_date": 1526478178, "answer_id": 50372577, "question_id": 50372344, "link": "https://stackoverflow.com/questions/50372344/iterating-stdvectors-simultaneously-using-standard-c/50372577#50372577", "title": "Iterating std::vectors simultaneously using standard C++", "body": "<p>You can use good old index:</p>\n\n<pre><code>auto size = std::min( answers.size(), count.size() ); // or at least assert that size is equal\nfor( size_t i = 0; i &lt; size; ++i ) {\n   const auto &amp;a = answers[i];\n   const auto c = count[i];\n   // .. same as before\n</code></pre>\n\n<p>note this way you possibly avoiding to make 2 copies of <code>std::string</code> per iteration - answers -> tuple -> a</p>\n"}, {"tags": [], "owner": {"reputation": 6371, "user_id": 1266688, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/1KqkE.jpg?s=128&g=1", "display_name": "Elvis Dukaj", "link": "https://stackoverflow.com/users/1266688/elvis-dukaj"}, "is_accepted": false, "score": 1, "last_activity_date": 1526479270, "last_edit_date": 1526479270, "creation_date": 1526478904, "answer_id": 50372848, "question_id": 50372344, "link": "https://stackoverflow.com/questions/50372344/iterating-stdvectors-simultaneously-using-standard-c/50372848#50372848", "title": "Iterating std::vectors simultaneously using standard C++", "body": "<p>This seems a <code>transform</code> so in C++ you can use <code>std::transform</code>... for example: </p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std;\n\nint main(int, char**) {\n    vector&lt;string&gt; questions = {\"Planet\", \"Rocket\", \"Galaxy\"};\n    vector&lt;string&gt; answers = {\"Planet\", \"Saturn\", \"Star\"};\n\n    vector&lt;int&gt; count = { 12, 34, 79};\n\n    vector&lt;int&gt; result;\n\n    for(const auto&amp; q : questions)\n    {\n        transform(begin(answers), end(answers), begin(count), back_inserter(result),\n                  [&amp;q](const auto&amp; answer, auto count)\n        {\n            if (q.substr(0, 2) == answer.substr(0, 2))\n            {\n                std::cout &lt;&lt; q.substr(0,3) &lt;&lt; \" \" &lt;&lt; answer.substr(0,3) &lt;&lt; endl;\n                return count;\n            }\n            else\n                cout &lt;&lt; \"No Match!\" &lt;&lt; endl;\n\n            return 0;\n        });\n    }\n}\n</code></pre>\n\n<p>Now the <code>results</code> vector holds all results. <code>back_inserter</code> is used in order to dynamically grow the <code>result</code> <code>std::vector</code>. </p>\n"}], "owner": {"reputation": 113, "user_id": 4924371, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d3ced85c042c7867f0e6766ce2980d8e?s=128&d=identicon&r=PG&f=1", "display_name": "Number42", "link": "https://stackoverflow.com/users/4924371/number42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 434, "favorite_count": 0, "closed_date": 1526479385, "accepted_answer_id": 50372577, "answer_count": 2, "score": 3, "last_activity_date": 1526479270, "creation_date": 1526477545, "question_id": 50372344, "link": "https://stackoverflow.com/questions/50372344/iterating-stdvectors-simultaneously-using-standard-c", "closed_reason": "Duplicate", "title": "Iterating std::vectors simultaneously using standard C++", "body": "<p>I'm new to C++ and hence would need some help in accomplishing a certain task. The problem is, I have to iterate over three or more vectors simultaneously, like so:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;boost/range/combine.hpp&gt;\n\nusing namespace std;\n\n\nint main(int, char**) {\n\nvector&lt;string&gt; questions = {\"Planet\", \"Rocket\", \"Galaxy\"};\nvector&lt;string&gt; answers = {\"Planet\", \"Saturn\", \"Star\"};\n\nvector&lt;int&gt; count = { 12, 34, 79};\nvector&lt;int&gt; score = { 324, 956, 289};\n\nvector&lt;int&gt; result;\nvector&lt;int&gt; subscore;\n\nstring a, q;\nint c, s;\nfor ( const string q : questions ) {\n    int match = 0;\n    for( auto tuple : boost::combine(answers, count) ) {\n       boost::tie(a,c) = tuple;\n       if( q.substr(0,2) == a.substr(0,2)) {std::cout &lt;&lt; q.substr(0,3) &lt;&lt; \" \" &lt;&lt; a.substr(0,3) &lt;&lt; endl; match = c;  }\n       else cout &lt;&lt; \"No match!\" &lt;&lt; '\\n';\n            }\n    if( match ) { result.push_back(match); }\n    else result.push_back(0); subscore.push_back(0);\n</code></pre>\n\n<p>This approach works but I can't use it in the framework we are using. </p>\n\n<p>Maybe someone here can point me to a similar solution that does not depend on boost but is still efficient. </p>\n\n<p>Many thanks!</p>\n"}, {"tags": ["c++", "templates", "c++17", "if-constexpr"], "comments": [{"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 3, "creation_date": 1526477224, "post_id": 50372167, "comment_id": 87760275, "body": "MSVC is known to very poorly support C++ features. It&#39;s been like this for years, it&#39;s never gonna change. You will probably need to define an overload <code>void f(Z z);</code> as a workaround."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 9, "creation_date": 1526477235, "post_id": 50372167, "comment_id": 87760286, "body": "If gcc and clang agree while MSVC disagrees, then there is a 99% chance that it&#39;s a bug in MSVC :)"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1526477253, "post_id": 50372167, "comment_id": 87760294, "body": "@bipll Actually, in recent months it became a lot more standards compliant :)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1526477292, "post_id": 50372167, "comment_id": 87760327, "body": "What version of MSVS are you using?  if constexpr was just recently added and was buggy to start with"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1526477299, "post_id": 50372167, "comment_id": 87760336, "body": "I&#39;m not going to bother analysing this because it&#39;s Wednesday afternoon but I just want to say those guys above are <i>probably</i> right. This is, after all, the entire point of <code>if constexpr</code>."}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1526477323, "post_id": 50372167, "comment_id": 87760362, "body": "@Rakete1111 has Achilles approached the Tortoise? :-O"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1526477484, "post_id": 50372167, "comment_id": 87760466, "body": "@bipll, Part of the reason for that was having an implementation from decades ago that even made it essentially impossible to support some features. The implementation has since been rejuvinated. GCC and Clang have had their share of bugs in newly-supported features."}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1526477555, "post_id": 50372167, "comment_id": 87760523, "body": "@chris ah, yeah, iteration N+1."}, {"owner": {"reputation": 3118, "user_id": 1253415, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/87096d37b6aed093f1b142c6a9bfae91?s=128&d=identicon&r=PG", "display_name": "jcai", "link": "https://stackoverflow.com/users/1253415/jcai"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1526477600, "post_id": 50372167, "comment_id": 87760557, "body": "@NathanOliver MSVC 15.7.1, CL 19.14.26428.1."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1526477989, "post_id": 50372167, "comment_id": 87760843, "body": "@bipll - You might have missed Achilles&#39; claim of capturing the turtle, as it happened just about a week ago. <a href=\"https://blogs.msdn.microsoft.com/vcblog/2018/05/07/announcing-msvc-conforms-to-the-c-standard/\" rel=\"nofollow noreferrer\">Announcing: MSVC Conforms to the C++ Standard</a> (Apparently some bugs remaining though.  :-)"}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1526478063, "post_id": 50372167, "comment_id": 87760897, "body": "@BoPersson Was it even ever unconformant?!! :-O"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1526482709, "post_id": 50372167, "comment_id": 87764563, "body": "@bipll: Absolutely, nonconformant in some pretty significant ways, primarily for reasons of backward compatibility with C++ code written before there was a C++ Standard.  Still is backward compatible rather than conformant, depending on which command-line options you pass."}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 4, "last_activity_date": 1526485431, "creation_date": 1526485431, "answer_id": 50375104, "question_id": 50372167, "link": "https://stackoverflow.com/questions/50372167/if-constexpr-inside-lambda-differing-compiler-behavior/50375104#50375104", "title": "if constexpr inside lambda, differing compiler behavior", "body": "<p>This is an MSVC bug. Please file a bug report. </p>\n\n<p>The rule, from <a href=\"http://eel.is/c++draft/stmt.if#2.sentence-3\" rel=\"nofollow noreferrer\">[stmt.if]/2</a>, is:</p>\n\n<blockquote>\n  <p>During the instantiation of an enclosing templated entity, if the condition is not value-dependent after its instantiation, the discarded substatement (if any) is not instantiated.</p>\n</blockquote>\n\n<p>During the instantiation of <code>f&lt;Z&gt;</code>, when we instantiate the condition we get <code>true</code>. That is not value-dependent, so the discard substatement (the one where we do <code>z()</code>) is not instantiated. It's only the instantiation of <code>z()</code> that leads to the error - and it should not be happening. </p>\n"}], "owner": {"reputation": 3118, "user_id": 1253415, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/87096d37b6aed093f1b142c6a9bfae91?s=128&d=identicon&r=PG", "display_name": "jcai", "link": "https://stackoverflow.com/users/1253415/jcai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 3, "accepted_answer_id": 50375104, "answer_count": 1, "score": 5, "last_activity_date": 1526485431, "creation_date": 1526477028, "question_id": 50372167, "link": "https://stackoverflow.com/questions/50372167/if-constexpr-inside-lambda-differing-compiler-behavior", "title": "if constexpr inside lambda, differing compiler behavior", "body": "<p>Consider the following code. If my understanding of <code>if constexpr</code> is correct, the <code>else</code> branch should not be compiled so the <code>z()</code> should not be considered an error.</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\nstruct Z{};\n\ntemplate&lt;typename T&gt;\nvoid f(T z) {\n  auto lam = [z]() {\n    if constexpr(std::is_same&lt;T, Z&gt;::value) {\n    } else {\n      z();\n    }\n  };\n}\n\nint main() {\n  f(Z{});\n}\n</code></pre>\n\n<p>In <a href=\"https://godbolt.org/g/eR9UvH\" rel=\"noreferrer\">clang</a> and <a href=\"https://godbolt.org/g/zegNHM\" rel=\"noreferrer\">gcc</a> this compiles; but with latest MSVC it does not. Unfortunately goldbolt's MSVC is too old, but on my machine with fully updated VS 2017, <code>cl /std:c++17</code> yields:</p>\n\n<pre><code>Microsoft (R) C/C++ Optimizing Compiler Version 19.14.26428.1 for x86\nCopyright (C) Microsoft Corporation.  All rights reserved.\n\nif_constexpr.cpp\nif_constexpr.cpp(10): error C2064: term does not evaluate to a function taking 0 arguments\nif_constexpr.cpp(16): note: see reference to function template instantiation 'void f&lt;Z&gt;(T)' being compiled\n        with\n        [\n            T=Z\n        ]\n</code></pre>\n\n<p>If the enclosing lambda is removed, the code compiles on all three compilers.</p>\n\n<p>Am I doing something wrong or unsupported, or is just a MSVC bug?</p>\n"}, {"tags": ["c++", "floating-point", "precision"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1526476989, "post_id": 50372087, "comment_id": 87760095, "body": "Does <code>std::nexttoward</code> help?  <a href=\"http://en.cppreference.com/w/cpp/numeric/math/nextafter\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/numeric/math/nextafter</a>"}, {"owner": {"reputation": 20870, "user_id": 40916, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/24ac39488e9c4f2833d087a1343707dc?s=128&d=identicon&r=PG", "display_name": "yairchu", "link": "https://stackoverflow.com/users/40916/yairchu"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1526477135, "post_id": 50372087, "comment_id": 87760217, "body": "@RichardCritten: It does in the sense that I&#39;ve used it (<code>std::nextafter</code> to be precise) in my current solution. But I still wonder if there&#39;s a better way.."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1526477693, "post_id": 50372087, "comment_id": 87760637, "body": "I think <code>nextafter</code> is not the wrong tool here: for <code>y = -d = 10E9</code>, you begin you loop from <code>0</code> whereas precision is far from that."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1526477768, "post_id": 50372087, "comment_id": 87760685, "body": "Working with <code>d&#47;y</code> might be a better approach (to have good precision)."}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 1, "creation_date": 1526477774, "post_id": 50372087, "comment_id": 87760689, "body": "Do you want the solution for the current rounding mode, or always for round-to-nearest-even? What if no such <code>x</code> exists, e.g., for <code>d=1e30</code>, <code>y=1e-30</code> (or if one element is not finite)?"}, {"owner": {"reputation": 20870, "user_id": 40916, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/24ac39488e9c4f2833d087a1343707dc?s=128&d=identicon&r=PG", "display_name": "yairchu", "link": "https://stackoverflow.com/users/40916/yairchu"}, "reply_to_user": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 1, "creation_date": 1526478181, "post_id": 50372087, "comment_id": 87760975, "body": "@chtz: &quot;What if no such x exists&quot; - Good question, I guess in that case the function could return an exceptional value. &quot;Do you want the solution for the current rounding mode&quot; - Basically what I&#39;m trying to do is equivalent to what rounding modes should provide, it&#39;s just that I tried to use them and got a warning from the compiler that those are not supported.."}, {"owner": {"reputation": 20870, "user_id": 40916, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/24ac39488e9c4f2833d087a1343707dc?s=128&d=identicon&r=PG", "display_name": "yairchu", "link": "https://stackoverflow.com/users/40916/yairchu"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1526478297, "post_id": 50372087, "comment_id": 87761079, "body": "@Jarod42 &quot;you begin you loop from 0 whereas precision is far from that&quot; but after a logarithmic number of iterations the step becomes more relevant. Can you describe an answer based on your <code>d&#47;y</code> approach? I&#39;m not sure what it is that you suggest.."}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 3, "creation_date": 1526483175, "post_id": 50372087, "comment_id": 87764890, "body": "Your question is subsumed by <a href=\"https://stackoverflow.com/questions/24222822/fastest-algorithm-to-identify-the-smallest-and-largest-x-that-make-the-double-pr\">this one</a> that I asked some time ago. I have some extra insights, gained since I asked that question, in case you are interested in the cases where <code>d</code> and <code>y</code> vary in an interval and/or solutions for <code>x</code> should be found inside an initial interval."}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 1, "creation_date": 1526483608, "post_id": 50372087, "comment_id": 87765188, "body": "\u201cgeneralizing to arbitrary expressions is the easiest part of the problem\u201d in my question is not true at all, it turned out. When <code>d</code> and <code>y</code> are allowed to vary in intervals, then the set of solutions for <code>x</code> is not always an interval. This means that an approach such as the one you suggest does not work: you may accidentally skip over the smallest solution."}, {"owner": {"reputation": 20870, "user_id": 40916, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/24ac39488e9c4f2833d087a1343707dc?s=128&d=identicon&r=PG", "display_name": "yairchu", "link": "https://stackoverflow.com/users/40916/yairchu"}, "reply_to_user": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1526486935, "post_id": 50372087, "comment_id": 87767320, "body": "@PascalCuoq: Do you have example <code>d</code> and <code>y</code> values where <code>x</code> is not an interval?"}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 1, "creation_date": 1526492156, "post_id": 50372087, "comment_id": 87770070, "body": "@yairchu My remark was only if <code>d</code> is allowed to be in an interval. In this case, take <code>y = 2.0</code>, <code>d</code> in the range [1.5, 1.75]. Then 0.25 is a solution for <code>x</code>, but the three double that come after 0.25 aren&#39;t solutions of the equation for any value of <code>d</code>, and the fourth successor of 0.25 (<code>0x1.0000000000004p-2</code>) is again a solution. <a href=\"https://godbolt.org/g/fxDa64\" rel=\"nofollow noreferrer\">godbolt.org/g/fxDa64</a>"}], "owner": {"reputation": 20870, "user_id": 40916, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/24ac39488e9c4f2833d087a1343707dc?s=128&d=identicon&r=PG", "display_name": "yairchu", "link": "https://stackoverflow.com/users/40916/yairchu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1528203235, "creation_date": 1526476809, "last_edit_date": 1528203235, "question_id": 50372087, "link": "https://stackoverflow.com/questions/50372087/finding-smallest-float-x-such-that-xd-y", "title": "Finding smallest float x such that x+d=y", "body": "<p>How to find the smallest <code>float</code>/<code>double</code> number <code>x</code> which satisfies <code>x + d = y</code> given <code>d</code> and <code>y</code>?</p>\n\n<p>(iiuc this is theoretically solved via setting <code>fesetround (FE_DOWNWARD)</code> and just doing <code>y - d</code> but in clang/Xcode I got a warning that <code>FENV_ACCESS</code> isn't supported and in practice found that it didn't work)</p>\n\n<p>So, so far I made this:</p>\n\n<pre><code>// Find minimum x value so that x + d = y\ntemplate&lt;typename T, bool supportDenormals = false&gt;\nT subtractMost (const T y, const T d)\n{\n    T x = y - d;\n    while (true)\n    {\n        const T nextX =\n            x == 0 &amp;&amp; !supportDenormals\n            ? -std::numeric_limits&lt;T&gt;::min()\n            : nextafter (x, -std::numeric_limits&lt;T&gt;::infinity());\n        if (nextX + d != y)\n            return x;\n        T step = x - nextX;\n        while (true)\n        {\n            const T nextStep = step + step;\n            if (x - nextStep + d != y)\n                break;\n            step = nextStep;\n        }\n        x -= step;\n    }\n}\n</code></pre>\n\n<p>Which does quite a lot of actions to find the result, but I wonder:</p>\n\n<p>Is there's a more efficient solution or a more standard way to achieve this?</p>\n"}, {"tags": ["c++", "windows", "dll", "clr", "managed"], "comments": [{"owner": {"reputation": 92, "user_id": 6140180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab7406ac9d35cb6628bfced1383f202?s=128&d=identicon&r=PG&f=1", "display_name": "lemmel", "link": "https://stackoverflow.com/users/6140180/lemmel"}, "edited": false, "score": 0, "creation_date": 1526477538, "post_id": 50371778, "comment_id": 87760510, "body": "I&#39;m not an expert, but I would look at the manifest files; quick search on the topic: <a href=\"https://stackoverflow.com/questions/2100973/dll-redirection-using-manifests\" title=\"dll redirection using manifests\">stackoverflow.com/questions/2100973/&hellip;</a> and  <a href=\"http://estelleetchristophe.free.fr/02_informatique/00_documents/Manifestes%20Windows.pdf\" rel=\"nofollow noreferrer\">estelleetchristophe.free.fr/02_informatique/00_documents/&hellip;</a>"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1526478613, "post_id": 50371778, "comment_id": 87761333, "body": "It is not terribly intuitive, but an appname.exe.config file stored in the C++ app&#39;s directory works just fine as well to help the CLR locate dependencies."}, {"owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1526485378, "post_id": 50371778, "comment_id": 87766373, "body": "@HansPassant my exe is without CLR support, only the pluging compiled with CLR support."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1526485674, "post_id": 50371778, "comment_id": 87766554, "body": "That is why it is not intuitive.  The CLR looks for the .config file in the directory of the EXE, it does not care what kind of EXE it is.  A pure C++ one is just fine.  Try it."}, {"owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1526486156, "post_id": 50371778, "comment_id": 87766876, "body": "@HansPassant thanks Hans, I&#39;ll try it."}], "owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526478363, "creation_date": 1526475934, "last_edit_date": 1526478363, "question_id": 50371778, "link": "https://stackoverflow.com/questions/50371778/clr-dll-cant-run-managed-dll-unless-it-locate-in-the-exe-directory", "title": "CLR dll cant run Managed DLL unless it locate in the exe directory", "body": "<p>I have this situation:</p>\n\n<ol>\n<li>C++ application which load plugin DLLs at runtime.</li>\n<li>Plugin DLL with CLR support, with a reference to a managed (C#) DLL.</li>\n<li>The managed (C#) DLL.</li>\n</ol>\n\n<p>It is ordered like this:</p>\n\n<ul>\n<li>the app stored in <strong>app</strong> dir</li>\n<li>the both DLLs (CLR and managed) are in <strong>plugin</strong> dir, which is parallel to app </li>\n</ul>\n\n<p>The problem is that if the menaged DLL can't be loaded from the plugin DLL unless it is in the <strong>app</strong> dir. I really prefer it will be locate in the <strong>plugin</strong> dir, since logically it been used from the plugin and not from the app.</p>\n\n<p>.NET applications can be configured with a .config file to enable Assembly Binding from other directories, but again, this is C++ application.</p>\n\n<p>Just to clarify: I don't have problem to run other DLLs from plugin, I have problem only to load the managed DLL.</p>\n\n<p>So, my question is: how can I enable the managed DLL to run from a custom dir?</p>\n"}, {"tags": ["c++", "serialization", "cereal"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 9734349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0370e045a7e9bbe78ce362b0351b06?s=128&d=identicon&r=PG&f=1", "display_name": "StefanB", "link": "https://stackoverflow.com/users/9734349/stefanb"}, "edited": false, "score": 1, "creation_date": 1526476784, "post_id": 50371729, "comment_id": 87759930, "body": "What kind of method is &quot;exist&quot; ? I&#39;m not sure I have access to something like that...."}, {"owner": {"reputation": 111, "user_id": 9769225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rJSYj.jpg?s=128&g=1", "display_name": "Gal Keren", "link": "https://stackoverflow.com/users/9769225/gal-keren"}, "reply_to_user": {"reputation": 31, "user_id": 9734349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0370e045a7e9bbe78ce362b0351b06?s=128&d=identicon&r=PG&f=1", "display_name": "StefanB", "link": "https://stackoverflow.com/users/9734349/stefanb"}, "edited": false, "score": 0, "creation_date": 1526478693, "post_id": 50371729, "comment_id": 87761405, "body": "exist() is pseudo for a function that verify if the optional parameters exist or not. maybe this solution might suit your need"}], "tags": [], "owner": {"reputation": 111, "user_id": 9769225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rJSYj.jpg?s=128&g=1", "display_name": "Gal Keren", "link": "https://stackoverflow.com/users/9769225/gal-keren"}, "is_accepted": false, "score": -1, "last_activity_date": 1526475816, "creation_date": 1526475816, "answer_id": 50371729, "question_id": 50371213, "link": "https://stackoverflow.com/questions/50371213/cereal-c-11-how-to-specify-optional-parameters-for-de-serialization/50371729#50371729", "title": "Cereal/C++ 11 - How to specify optional parameters for de-serialization", "body": "<p>how about:</p>\n\n<pre><code>..\nif (exist(parameter_4, parameter_5) {\n  ar(\n     cereal::make_nvp(\"parameter_1\", parameter_1), \n     cereal::make_nvp(\"parameter_2\", parameter_2), \n     cereal::make_nvp(\"parameter_3\", parameter_3), \n     cereal::make_nvp(\"parameter_4\", parameter_4), \n     cereal::make_nvp(\"parameter_5\", parameter_5) ); \n}\nelse {\n  ar(\n     cereal::make_nvp(\"parameter_1\", parameter_1), \n     cereal::make_nvp(\"parameter_2\", parameter_2), \n     cereal::make_nvp(\"parameter_3\", parameter_3) );\n}\n...\n</code></pre>\n\n<p>or something similar..</p>\n"}], "owner": {"reputation": 31, "user_id": 9734349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0370e045a7e9bbe78ce362b0351b06?s=128&d=identicon&r=PG&f=1", "display_name": "StefanB", "link": "https://stackoverflow.com/users/9734349/stefanb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 684, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1547408575, "creation_date": 1526474337, "last_edit_date": 1547408575, "question_id": 50371213, "link": "https://stackoverflow.com/questions/50371213/cereal-c-11-how-to-specify-optional-parameters-for-de-serialization", "title": "Cereal/C++ 11 - How to specify optional parameters for de-serialization", "body": "<p>I've got class which is de-serialized with standard function:</p>\n\n<pre><code>template&lt;class Archive&gt; // public serialization (normal)\nvoid serialize(Archive &amp; ar)\n{\n  ar(\n    cereal::make_nvp(\"parameter_1\", parameter_1), \n    cereal::make_nvp(\"parameter_2\", parameter_2), \n\n    cereal::make_nvp(\"parameter_3\", parameter_3), \n\n    cereal::make_nvp(\"parameter_4\", parameter_4), \n\n    cereal::make_nvp(\"parameter_5\", parameter_5) ); \n}\n</code></pre>\n\n<p>But in my case <code>parameter_4</code> and <code>parameter_5</code> are optional.</p>\n\n<p>They may or may not be in the input JSON string.</p>\n\n<p>When I'm trying to de-serialize such incomplete JSON with missing some parameters I get Cereal \"error\" - that cannot find those missing parameters.</p>\n\n<p>Is there any way how to specify that some parameters are optional and in the case that they are not part of JSON default values will be used ?</p>\n"}, {"tags": ["c++", "makefile", "compiler-errors", "visual-studio-code"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2201041"}, "edited": false, "score": 0, "creation_date": 1526474546, "post_id": 50371168, "comment_id": 87758290, "body": "You may have to install make itself"}, {"owner": {"reputation": 111, "user_id": 9364944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/579d69eeb3d909dc1775dcbb3472b602?s=128&d=identicon&r=PG&f=1", "display_name": "kayush", "link": "https://stackoverflow.com/users/9364944/kayush"}, "edited": false, "score": 0, "creation_date": 1526474711, "post_id": 50371168, "comment_id": 87758400, "body": "@JETM  I have make installed (please see this: <a href=\"https://stackoverflow.com/questions/11934997/how-to-install-make-in-ubuntu\" title=\"how to install make in ubuntu\">stackoverflow.com/questions/11934997/&hellip;</a>)"}, {"owner": {"reputation": 111, "user_id": 9364944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/579d69eeb3d909dc1775dcbb3472b602?s=128&d=identicon&r=PG&f=1", "display_name": "kayush", "link": "https://stackoverflow.com/users/9364944/kayush"}, "edited": false, "score": 0, "creation_date": 1526474791, "post_id": 50371168, "comment_id": 87758444, "body": "I am using windows subsystem for linux(bash) as terminal to compile my programs"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2201041"}, "edited": false, "score": 0, "creation_date": 1526475214, "post_id": 50371168, "comment_id": 87758745, "body": "Then the issue is that VSCode isn&#39;t looking for make in the right place. I don&#39;t know more than that, but maybe this clue can help you search."}, {"owner": {"reputation": 111, "user_id": 9364944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/579d69eeb3d909dc1775dcbb3472b602?s=128&d=identicon&r=PG&f=1", "display_name": "kayush", "link": "https://stackoverflow.com/users/9364944/kayush"}, "edited": false, "score": 0, "creation_date": 1526485330, "post_id": 50371168, "comment_id": 87766345, "body": "@JETM when i type make in my terminal in vscode, it shows make: nothing to be found for &#39;all&#39;   so i think make command not found is not the case here.   Can you check  if i am not making some other mistake here"}, {"owner": {"reputation": 111, "user_id": 9364944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/579d69eeb3d909dc1775dcbb3472b602?s=128&d=identicon&r=PG&f=1", "display_name": "kayush", "link": "https://stackoverflow.com/users/9364944/kayush"}, "edited": false, "score": 0, "creation_date": 1526486328, "post_id": 50371168, "comment_id": 87766974, "body": "@JETM have a look now, it seems to me that tasks.json is not correct but i can&#39;t figure out how to correct this"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 2, "creation_date": 1526486351, "post_id": 50371168, "comment_id": 87766986, "body": "<code>make Makefile</code> is a very bad command, and may overwrite your makefile.  What you want is <code>make -f Makefile</code>"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1526486445, "post_id": 50371168, "comment_id": 87767041, "body": "Also, your makefile is horribly wrong, and may overwrite source files, because you&#39;ve designated them as generated files.  Make sure not to test this in your only copy of the code."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1526486513, "post_id": 50371168, "comment_id": 87767079, "body": "Bottom line, you don&#39;t have a Visual Studio Code problem.  Get things working when you run <code>make</code> at a command-line first, and only then worry about integration with Code."}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 9364944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/579d69eeb3d909dc1775dcbb3472b602?s=128&d=identicon&r=PG&f=1", "display_name": "kayush", "link": "https://stackoverflow.com/users/9364944/kayush"}, "is_accepted": true, "score": 0, "last_activity_date": 1526491421, "creation_date": 1526491421, "answer_id": 50376757, "question_id": 50371168, "link": "https://stackoverflow.com/questions/50371168/having-trouble-configuring-vs-code-for-c-programs/50376757#50376757", "title": "Having trouble configuring VS code for c++ programs", "body": "<p>I have figured out a simple way:<br>\nargs doesn't work some reason at least on my system.</p>\n\n<p>So, change command (line 3 of tasks.json)  </p>\n\n<pre><code>\"command\": \"g++ -Wall -std=c++14 ${relativeFile};./a.out &lt; input.txt\n</code></pre>\n\n<p>And now just one button and compile and run!</p>\n"}], "owner": {"reputation": 111, "user_id": 9364944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/579d69eeb3d909dc1775dcbb3472b602?s=128&d=identicon&r=PG&f=1", "display_name": "kayush", "link": "https://stackoverflow.com/users/9364944/kayush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "accepted_answer_id": 50376757, "answer_count": 1, "score": 1, "last_activity_date": 1526491421, "creation_date": 1526474223, "last_edit_date": 1526486251, "question_id": 50371168, "link": "https://stackoverflow.com/questions/50371168/having-trouble-configuring-vs-code-for-c-programs", "title": "Having trouble configuring VS code for c++ programs", "body": "<p>I am having some troubles compiling c++ programs in VS code.  I followed  this answer: <a href=\"https://stackoverflow.com/questions/30269449/how-do-i-set-up-visual-studio-code-to-compile-c-code\">How do I set up Visual Studio Code to compile C++ code?</a></p>\n\n<p>and my Makefile is </p>\n\n<pre><code>CC=g++\nCFLAGS=-Wall\n.SUFFIXES = .cpp\nobjs:=$(wildcard *.cpp)\ntargets:=$(objs:.cpp= )\n\n.PHONY:all\nall: $(targets)\n.cpp:\n    $(CC) $(CFLAGS) -std=c++11 -o $@ $&lt; \n</code></pre>\n\n<p>I just want to compile this file which is opened in current window, say 1.cpp and this file does not have any external dependencies</p>\n\n<p>When i try to compile my file (by pressing f8 as given in the answer i linked) i get the following error:</p>\n\n<pre><code>'make' is not recognized as an internal or external command,\noperable program or batch file.\n</code></pre>\n\n<p>I am a beginner, and don't know much about Makefile , any help will be appreciated.\nThanks!<br>\nEdit:\nI am using Windows subsystem for linux to compile my programs not mingw or cygwin.</p>\n\n<p><strong>Edit:</strong><br>\nNow i can use make but i think something is wrong with my Makefile.   <a href=\"https://i.stack.imgur.com/kguUX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kguUX.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "c++11", "codeblocks", "linker-errors", "header-files"], "answers": [{"comments": [{"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 189, "user_id": 9391556, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Nilesh", "link": "https://stackoverflow.com/users/9391556/nilesh"}, "edited": false, "score": 0, "creation_date": 1526475006, "post_id": 50371162, "comment_id": 87758599, "body": "@Nilesh Not clear what you are asking. You already <i>have</i> them."}, {"owner": {"reputation": 189, "user_id": 9391556, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Nilesh", "link": "https://stackoverflow.com/users/9391556/nilesh"}, "edited": false, "score": 0, "creation_date": 1526475203, "post_id": 50371162, "comment_id": 87758736, "body": "sorry there was a typo, I was saying that it worked good, but what should I do to have them as inline, should I give them a body in header itself?"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 189, "user_id": 9391556, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Nilesh", "link": "https://stackoverflow.com/users/9391556/nilesh"}, "edited": false, "score": 1, "creation_date": 1526475736, "post_id": 50371162, "comment_id": 87759165, "body": "@Nilesh If you want them inline then they need to be defined in the header file."}, {"owner": {"reputation": 189, "user_id": 9391556, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Nilesh", "link": "https://stackoverflow.com/users/9391556/nilesh"}, "edited": false, "score": 0, "creation_date": 1526476046, "post_id": 50371162, "comment_id": 87759407, "body": "Yeah, I did the same and it compiled."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 189, "user_id": 9391556, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Nilesh", "link": "https://stackoverflow.com/users/9391556/nilesh"}, "edited": false, "score": 0, "creation_date": 1526476871, "post_id": 50371162, "comment_id": 87759997, "body": "@Nilesh Benchmark first to see if it makes sense to make them inline. These functions do not seem to be performance critical."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1526474211, "creation_date": 1526474211, "answer_id": 50371162, "question_id": 50371126, "link": "https://stackoverflow.com/questions/50371126/undefined-reference-error-while-calling-a-function-from-user-defined-header-file/50371162#50371162", "title": "undefined reference error while calling a function from user defined header file and it&#39;s implementation is in .cpp file", "body": "<p>Remove <code>inline</code> from function declarations and definitions to fix the linker errors.</p>\n\n<p><code>inline</code> makes sense for functions defined in header files. For functions defined elsewhere <code>inline</code> makes them unavailable to other translation units, causing the linker error which you observe.</p>\n"}], "owner": {"reputation": 189, "user_id": 9391556, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Nilesh", "link": "https://stackoverflow.com/users/9391556/nilesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 50371162, "answer_count": 1, "score": 0, "last_activity_date": 1526475444, "creation_date": 1526474119, "last_edit_date": 1526475444, "question_id": 50371126, "link": "https://stackoverflow.com/questions/50371126/undefined-reference-error-while-calling-a-function-from-user-defined-header-file", "title": "undefined reference error while calling a function from user defined header file and it&#39;s implementation is in .cpp file", "body": "<p>What I have made is an <code>fstreamExtension</code> class that publically inherits <code>fstream</code> <code>class</code>.</p>\n\n<p><strong>fstreamExtension.h :</strong></p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#ifndef FSTREAMEXTENSION_H\n#define FSTREAMEXTENSION_H\n\nclass fstreamExtension : public std::fstream\n{\n private:\n\n    std::string fileIdentifier;\n\npublic:\n\n    using std::fstream::fstream;\n    using std::fstream::open;\n\n    ~fstreamExtension();\n\n    inline void fileName (std::string&amp;);\n\n    inline bool exists ();\n\n    inline unsigned long long fileSize();\n};\n#endif\n</code></pre>\n\n<p><strong>fstreamExtension.cpp :</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include \"fstreamExtension.h\"\n\ninline void fstreamExtension::fileName (std::string&amp; __fileIdentifier)\n{\n   fileIdentifier = __fileIdentifier;\n}\n\ninline bool fstreamExtension::exists ()\n{\n  if (FILE *file = fopen(fileIdentifier.c_str(), \"r\"))\n  {\n    fclose(file);\n    return true;\n  }\n\n  else\n    return false;\n}\n\n\ninline unsigned long long int fstreamExtension::fileSize()\n{\n  if(exists())\n  {\n    std::ifstream tempStream(fileIdentifier.c_str(), std::ios::ate |  std::ios::binary);\n    unsigned long long int __size = tempStream.tellg();\n    tempStream.close();\n    return __size;\n}\n\nelse return 0;\n}\n\nfstreamExtension::~fstreamExtension()\n{\n  std::fstream::close();\n  std::cout &lt;&lt; \"stream closed\";\n}\n</code></pre>\n\n<p>When this <code>code</code> is implemented in <code>main</code> file as :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include \"fstreamExtension.h\" \n\nint main()\n{\n  string s = \"QBFdata.txt\";\n  fstreamExtension fs(s.c_str(), ios::in | ios::binary);\n  fs.fileName(s); //error\n  cout &lt;&lt; fs.fileSize(); //error\n}\n</code></pre>\n\n<p>There is a <code>linker</code> <code>error</code> when I call functions <code>filename()</code> and <code>fileSize()</code>.</p>\n\n<p>The <code>codeblocks</code> species the following error :</p>\n\n<blockquote>\n  <p>undefined reference to fstreamExtension::fileName(std::string&amp;)</p>\n</blockquote>\n\n<p>Thanks for your help, please suggest if any structure changes are required.</p>\n"}, {"tags": ["c++", "c++11", "exit"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 3, "creation_date": 1526473963, "post_id": 50370985, "comment_id": 87757893, "body": "Downvoted; shows no research effort. Looking this up online is trivial."}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 2, "creation_date": 1526474026, "post_id": 50370985, "comment_id": 87757944, "body": "So easy to find the answer on internet: <a href=\"http://en.cppreference.com/w/cpp/utility/program/at_quick_exit\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/program/at_quick_exit</a> and <a href=\"http://en.cppreference.com/w/cpp/utility/program/atexit\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/program/atexit</a>, finally: The registered functions will not be called on normal program termination. If a function need to be called in that case, std::atexit must be used."}], "answers": [{"comments": [{"owner": {"reputation": 3587, "user_id": 4915707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ubv91.jpg?s=128&g=1", "display_name": "Alexander Ushakov", "link": "https://stackoverflow.com/users/4915707/alexander-ushakov"}, "edited": false, "score": 0, "creation_date": 1615630125, "post_id": 50371110, "comment_id": 117754098, "body": "<code>at_quick_exit</code> is available in C since C11"}], "tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": false, "score": 1, "last_activity_date": 1526474061, "creation_date": 1526474061, "answer_id": 50371110, "question_id": 50370985, "link": "https://stackoverflow.com/questions/50370985/difference-atexit-and-at-quick-exit/50371110#50371110", "title": "Difference atexit() and at_quick_exit()", "body": "<p>Well, from <a href=\"http://en.cppreference.com/w/cpp/utility/program/at_quick_exit\" rel=\"nofollow noreferrer\">at_quick_exit</a>: </p>\n\n<p><code>Registers the function pointed to by func to be called on quick program termination (via std::quick_exit).\n...\nThe registered functions will not be called on normal program termination. If a function need to be called in that case, std::atexit must be used.</code></p>\n\n<p>Functions registerd on <code>atexit()</code> are called on <code>exit()</code>. Functions registered with <code>at_quick_exit()</code> are called on <code>quick_exit()</code>.<br>\nThe other difference is that <code>at_quick_exit()</code> is available from C++11 and is not available in C.</p>\n"}], "owner": {"reputation": 5144, "user_id": 1856429, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/AiPnN.jpg?s=128&g=1", "display_name": "Eduard Rostomyan", "link": "https://stackoverflow.com/users/1856429/eduard-rostomyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "answer_count": 1, "score": -9, "last_activity_date": 1526474061, "creation_date": 1526473729, "question_id": 50370985, "link": "https://stackoverflow.com/questions/50370985/difference-atexit-and-at-quick-exit", "title": "Difference atexit() and at_quick_exit()", "body": "<p>What is the difference between <code>atexit()</code> and <code>at_quick_exit()</code>?<br>\nDoes every function that we register at atexit() must be also registered at at_quick_exit()?<br>\nFor example the Phoenix-Singleton custom functions or something else.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 886, "user_id": 5477126, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/6VrvP.jpg?s=128&g=1", "display_name": "rak007", "link": "https://stackoverflow.com/users/5477126/rak007"}, "edited": false, "score": 0, "creation_date": 1526473844, "post_id": 50370971, "comment_id": 87757823, "body": "Use std::addressof"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1526473881, "post_id": 50370971, "comment_id": 87757847, "body": "<code>(long &amp;)test</code> obtains a reference to a <code>long</code>, which refers to <code>test.</code>   It does not compute the address.    Although it uses C-like &quot;cast&quot; syntax, it is not a c-style cast, since C does not support reference types.  In C, your code would not compile."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1526473986, "post_id": 50370971, "comment_id": 87757914, "body": "<code>reinterpret_cast&lt;long&amp;&gt;(test);</code>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 886, "user_id": 5477126, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/6VrvP.jpg?s=128&g=1", "display_name": "rak007", "link": "https://stackoverflow.com/users/5477126/rak007"}, "edited": false, "score": 1, "creation_date": 1526474097, "post_id": 50370971, "comment_id": 87757991, "body": "@rak007 there is no adress in OPs code, their assumption is wrong"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 5, "creation_date": 1526474121, "post_id": 50370971, "comment_id": 87758008, "body": "@Peter -- it&#39;s not a valid cast in C, but it <b>is</b> a &quot;c-style cast&quot;. That term refers to syntax, and it distuinguishes this code from the four C++-style casts (<code>static_cast</code>, <code>const_cast</code>, <code>dynamic_cast</code>, and <code>reinterpret_cast</code>)."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1526474442, "post_id": 50370971, "comment_id": 87758216, "body": "@PeteBecker - fair enough.   Although it does seem a bit odd to label a construct that would be diagnosed as an error by any C compiler as &quot;c-style&quot;."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1526474592, "post_id": 50370971, "comment_id": 87758313, "body": "@Peter no more than an <code>class myClass{ void foo(); }; myClass myArray[10]</code> is a C-style array of C++ only type, to distinguish it from <code>std::array&lt;myClass, 10&gt; myArray</code>"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1526477611, "post_id": 50370971, "comment_id": 87760573, "body": "@Caleth - difference is that it is possible to envisage a declaration like <code>myClass myArray[10]</code> being valid in C (e.g. if <code>myClass</code> is a <code>typedef</code> for a type that may be specified in C).   It is pretty difficult to envisage a way in which a construct <code>long &amp;truc = (long &amp;)test</code> can be valid C.     In any event, my point is that the OP asked the question in a way that suggested the code was C that needed to be re-expressed in C++  (and also assumed it was computing an address, which it isn&#39;t) when in reality it is not valid C at all."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1526481151, "post_id": 50373146, "comment_id": 87763396, "body": "As long as the value is not too long for <code>long</code> or for <code>unsigned long</code> if you&#39;re using <code>unsigned long</code>"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 2, "last_activity_date": 1526481126, "last_edit_date": 1526481126, "creation_date": 1526479667, "answer_id": 50373146, "question_id": 50370971, "link": "https://stackoverflow.com/questions/50370971/replace-c-style-cast-long-in-c/50373146#50373146", "title": "Replace c-style cast (long&amp;) in c++", "body": "<p>What do you mean by \"how [can I] do that in C++\"? You've already done it! <a href=\"http://coliru.stacked-crooked.com/a/06fa6d7992bea15c\" rel=\"nofollow noreferrer\">It works!</a></p>\n\n<p>Putting aside for a moment the potentially questionable aliasing, a cast to reference type is perfectly valid and does what you expect.</p>\n\n<p>More generally, such a cast might be used to transform an expression into one with the type of its base, without <em>copying</em> the object it describes:</p>\n\n<pre><code>Derived d;\nBase&amp; b = (Base&amp;)d;\n</code></pre>\n\n<p>Although to be idiomatic you'd prefer a <code>static_cast</code> in such a case:</p>\n\n<pre><code>Derived d;\nBase&amp; b = static_cast&lt;Base&amp;&gt;(d);\n</code></pre>\n\n<p>Indeed, the way a C-style cast works in C++ is that, in this particular case (cast to reference of a related type), the C-style cast <em>is</em> a <code>static_cast</code>.</p>\n\n<p>This is also a common pattern with <code>dynamic_cast</code>, which works with a pointer type:</p>\n\n<pre><code>assert(dynamic_cast&lt;T*&gt;(ptr) != nullptr);\n</code></pre>\n\n<p>but also reference type:</p>\n\n<pre><code>try {\n   dynamic_cast&lt;T&amp;&gt;(*ptr);\n}\ncatch (const std::bad_cast&amp;) {}\n</code></pre>\n\n<p>Long story short, there's nothing wrong or weird about a cast to reference type.</p>\n\n<p>That being said, I would avoid questionable conversions like <code>unsigned long</code> to <code>long</code> &mdash; it's possible that this aliasing is technically well-defined, but I would have to dive into the standard to be sure, and that in my opinion is reason enough to avoid it.</p>\n\n<p>One upside of switching to <code>static_cast</code> is that, if the conversion is <em>not</em> permitted, you'll be informed. You can then switch in turn to <code>reinterpret_cast</code> and go on with your questionable aliasing. ;)</p>\n\n<hr>\n\n<h3>Addendum</h3>\n\n<blockquote>\n  <p>Aliasing between <code>long</code> and <code>unsigned long</code> is allowed ([basic.lval] 10), as long as the value is in range for both. But yeah, best avoided. \u2013 <a href=\"https://stackoverflow.com/users/787480/sneftel\">Sneftel</a></p>\n</blockquote>\n"}], "owner": {"reputation": 31, "user_id": 9800019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/317eccae518e6a6aa4d7fcf223de6d79?s=128&d=identicon&r=PG&f=1", "display_name": "J&#233;r&#244;me", "link": "https://stackoverflow.com/users/9800019/j%c3%a9r%c3%b4me"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 433, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1526481126, "creation_date": 1526473705, "last_edit_date": 1526479372, "question_id": 50370971, "link": "https://stackoverflow.com/questions/50370971/replace-c-style-cast-long-in-c", "title": "Replace c-style cast (long&amp;) in c++", "body": "<p>In a source code, I got this c-style cast :</p>\n\n<pre><code>unsigned long test = 0;\nlong &amp; truc = (long&amp;)test;\n</code></pre>\n\n<p>I assume that <code>&amp;truc</code> take the address of test with <code>long</code> type.</p>\n\n<p>How I can do that in C++?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["java", "android", "c++", "java-native-interface", "c++builder"], "comments": [{"owner": {"reputation": 1327, "user_id": 1110636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/709ba1cdc862cffcbab3c518209e634d?s=128&d=identicon&r=PG", "display_name": "Timir", "link": "https://stackoverflow.com/users/1110636/timir"}, "edited": false, "score": 0, "creation_date": 1526476143, "post_id": 50370897, "comment_id": 87759471, "body": "It\u2019s possible that <b>loadLibrary</b> failed, causing the static initializer to throw an error. I\u2019d expect a class loader issue right after, but based on the JVM version wouldn\u2019t be surprised to find symptoms as the ones you\u2019re seeing."}, {"owner": {"reputation": 69, "user_id": 7416225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/131aaf171308a1bf5feeb0b5b2c8667c?s=128&d=identicon&r=PG&f=1", "display_name": "IDS", "link": "https://stackoverflow.com/users/7416225/ids"}, "reply_to_user": {"reputation": 1327, "user_id": 1110636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/709ba1cdc862cffcbab3c518209e634d?s=128&d=identicon&r=PG", "display_name": "Timir", "link": "https://stackoverflow.com/users/1110636/timir"}, "edited": false, "score": 0, "creation_date": 1526477641, "post_id": 50370897, "comment_id": 87760603, "body": "@Timir The error i get in logcat when using a function of that Java class : <code>I&#47;art: Rejecting re-init on previously-failed class java.lang.Class&lt;com.scanner.McaScanner&gt;</code> But I get this error even before I instantiate my class with a <code>getInstance()</code>. I tried with the load method but I get the same problem. <code>static {}</code> field should be initialized on the first instance of the class so I don&#39;t know why it would cause problem before that.  <code>System.load(context.getApplicationInfo().nativeLibraryDir + &quot;&#47;armeabi-v7a&#47;libProjectTest&quot;);</code>"}, {"owner": {"reputation": 69, "user_id": 7416225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/131aaf171308a1bf5feeb0b5b2c8667c?s=128&d=identicon&r=PG&f=1", "display_name": "IDS", "link": "https://stackoverflow.com/users/7416225/ids"}, "reply_to_user": {"reputation": 1327, "user_id": 1110636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/709ba1cdc862cffcbab3c518209e634d?s=128&d=identicon&r=PG", "display_name": "Timir", "link": "https://stackoverflow.com/users/1110636/timir"}, "edited": false, "score": 0, "creation_date": 1526479719, "post_id": 50370897, "comment_id": 87762273, "body": "From the doc : <code>static {}</code> blocks are called in the order they appear in the code. Maybe that&#39;s the problme, gonna correct this by loading after having instiated singleton."}], "owner": {"reputation": 69, "user_id": 7416225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/131aaf171308a1bf5feeb0b5b2c8667c?s=128&d=identicon&r=PG&f=1", "display_name": "IDS", "link": "https://stackoverflow.com/users/7416225/ids"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 240, "favorite_count": 0, "protected_date": 1526549367, "answer_count": 0, "score": 0, "last_activity_date": 1526549367, "creation_date": 1526473481, "last_edit_date": 1526547634, "question_id": 50370897, "link": "https://stackoverflow.com/questions/50370897/jni-calls-of-c-main-app-code-from-java-library", "title": "JNI calls of C++ main app code from Java library", "body": "<p>I want to transmit data from Java to C++ with a <code>JNI call</code>.\nThe C++ code I want to call is a JNI call inside my main form <code>.cpp</code>.</p>\n\n<p>I have to load the <code>.so</code> library of my C++ app in Java,\nas C++Builder describes it this <code>.so</code> file is the <code>ProjectOutput</code> (located in <code>library\\lib\\armeabi-v7a\\</code>.</p>\n\n<p>I load the library as such :</p>\n\n<pre><code>public class McaScanner {\n\n    //private static native void transmitScan(String barcode);  \n\n    static {\n        System.loadLibrary(\"libProjectTest\");\n    }\n\n    //other static functions\n}\n</code></pre>\n\n<p>Before I added the loading of this library everything worked fine and I could call Java code inside my C++ code through the <code>Delphi Native Interface</code> of this Java class.\nBut now when I call any method of this Java class, I get <code>EJNIFatal exception : \"Invocation Error : method not found\"</code>.</p>\n\n<p>If I comment <code>loadLibrary()</code> it works back. What is cuasing this issue ?\nCan't this type of library be loaded inside Java code ?</p>\n\n<p>EDIT :</p>\n\n<p>Ok once I tried to load inside <code>getInstance()</code> I could see the loading problem. <code>\"lib\"</code> was already append before <code>\"libProjectTest\"</code> so I should not have added it myself. <br> But I'm now getting the error: </p>\n\n<pre><code>No implementation found for void com.scanner.McaScanner.transmitScan(java.lang.String) (tried Java_com_scanner_McaScanner_transmitScan and Java_com_scanner_McaScanner_transmitScan__Ljava_lang_String_2)\n</code></pre>\n\n<p>Tho now it's crashing the app when before this same error wasn't.</p>\n\n<p><strong>Implementation of my JNI Call in C++ in <code>com.embarcadero.ProjectTest</code> :</strong>\n(My Java class is in <code>com.scanner.McaScanner</code>)</p>\n\n<pre><code>extern \"C\"\nJNIEXPORT void JNICALL Java_com_scanner_McaScanner_transmitScan(JNIEnv *env, jobject obj, jstring barcode) {}\n</code></pre>\n\n<p>EDIT :</p>\n\n<p>Would the problem be that I'm trying to load a library already in use in memory ?</p>\n"}, {"tags": ["c++", "multithreading", "vba", "com", "sta"], "comments": [{"owner": {"reputation": 5304, "user_id": 4839827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wAyix.jpg?s=128&g=1", "display_name": "Ryan Wildry", "link": "https://stackoverflow.com/users/4839827/ryan-wildry"}, "edited": false, "score": 0, "creation_date": 1526476755, "post_id": 50370819, "comment_id": 87759910, "body": "Couldn&#39;t use this instead <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa384240(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>?"}, {"owner": {"reputation": 450, "user_id": 2981328, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/55b5a57989320394ee6a2acaf766c01f?s=128&d=identicon&r=PG&f=1", "display_name": "hymced", "link": "https://stackoverflow.com/users/2981328/hymced"}, "reply_to_user": {"reputation": 5304, "user_id": 4839827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wAyix.jpg?s=128&g=1", "display_name": "Ryan Wildry", "link": "https://stackoverflow.com/users/4839827/ryan-wildry"}, "edited": false, "score": 0, "creation_date": 1526477064, "post_id": 50370819, "comment_id": 87760164, "body": "As I said, I want to use WinINet. I know I could use WinHTTP, and I have already successfully make it work to retrieve the proxy info. Let&#39;s assume WinHTTP does not exist :)"}], "answers": [{"tags": [], "owner": {"reputation": 450, "user_id": 2981328, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/55b5a57989320394ee6a2acaf766c01f?s=128&d=identicon&r=PG&f=1", "display_name": "hymced", "link": "https://stackoverflow.com/users/2981328/hymced"}, "is_accepted": false, "score": 0, "last_activity_date": 1526548739, "creation_date": 1526548739, "answer_id": 50387751, "question_id": 50370819, "link": "https://stackoverflow.com/questions/50370819/how-to-call-internetgetproxyinfo-from-a-non-single-threaded-apartment-thread-f/50387751#50387751", "title": "How to call InternetGetProxyInfo from a non &quot;Single-Threaded Apartment&quot; thread from Excel VBA using Win32 APIs", "body": "<p>Never mind, it is solved:</p>\n\n<pre><code>Private Const INFINITE = &amp;HFFFFFFFF\nPrivate Declare Function WaitForSingleObject Lib \"kernel32\" (ByVal hHandle As Long, ByVal dwMilliseconds As Long) As Long\nPrivate Declare Function CreateThread _\n    Lib \"kernel32\" ( _\n        ByVal lpThreadAttributes As Long, _\n        ByVal dwStackSize As Long, _\n        ByVal lpStartAddress As Long, _\n        ByVal lpParameter As Long, _\n        ByVal dwCreationFlags As Long, _\n        ByRef lpThreadld As Long) _\nAs Long\nPrivate Declare Function GetCurrentThreadId Lib \"kernel32\" () As Long\nPrivate Declare Function CloseHandle Lib \"kernel32\" (ByVal hObject As Long) As Long\n\nPrivate Declare Function GetLastError Lib \"kernel32.dll\" () As Long\nPrivate Declare Function GetExitCodeThread Lib \"kernel32\" (ByVal hThread As Long, ByRef dwExitCode As Long) As Long\n\nPrivate Declare Function VirtualAlloc Lib \"kernel32.dll\" (ByVal lpAddress As Long, ByVal dwSize As Long, ByVal flAllocationType As Long, ByVal flProtect As Long) As Long\nPrivate Declare Function VirtualFree Lib \"kernel32.dll\" (ByVal lpAddress As Long, ByVal dwSize As Long, ByVal dwFreeType As Long) As Long\n\nPrivate Const MEM_COMMIT As Long = &amp;H1000&amp;\nPrivate Const MEM_RESERVE As Long = &amp;H2000&amp;\nPrivate Const MEM_RELEASE As Long = &amp;H8000&amp;\nPrivate Const MEM_EXECUTE_READWRITE As Long = &amp;H40&amp;\n\nPrivate Declare PtrSafe Function MultiByteToWideChar _\n    Lib \"kernel32.dll\" _\n    ( _\n        ByVal CodePage As Long, _\n        ByVal dwFlags As Long, _\n        ByVal lpMultiByteStr As Long, _\n        ByVal cbMultiByte As Long, _\n        ByVal lpWideCharStr As Long, _\n        ByVal cchWideChar As Long) _\nAs Long\n\n'################################################################################################################################\n\nPrivate Declare Function InternetInitializeAutoProxyDll_String _\n    Lib \"JSProxy.dll\" _\n    Alias \"InternetInitializeAutoProxyDll\" _\n    ( _\n        ByVal dwVersion As Long, _\n        ByVal lpszDownloadedTempFile As String, _\n        ByVal lpszMime As Long, _\n        ByVal lpAutoProxyCallbacks As Long, _\n        ByVal lpAutoProxyScriptBuffer As Long) _\nAs Boolean\n\nPrivate Declare Function InternetGetProxyInfo_Long _\n    Lib \"JSProxy.dll\" _\n    Alias \"InternetGetProxyInfo\" _\n    ( _\n        ByVal lpszUrl As Long, _\n        ByVal dwUrlLength As Long, _\n        ByVal lpszUrlHostName As Long, _\n        ByVal dwUrlHostNameLength As Long, _\n        ByVal lplpszProxyHostName As Long, _\n        ByVal lpdwProxyHostNameLength As Long) _\nAs Boolean\n\n'################################################################################################################################\n\nPublic g_ptrProxyHostName As Long 'thread-shared variable allocated/stored in process global memory\nPublic g_strProxyHostName As String 'idem\nPublic g_lngProxyHostNameLength As Long 'idem\nPublic g_MainThreadId As Long\n\nPublic WinINet_InternetGetProxyInfo_ThreadProc_Error As Long\n\nPublic globalVar1 As Long\nPublic globalVar2 As Long\n\n'################################################################################################################################\n\nFunction WinINet_InternetGetProxyInfo_ThreadProc() As Long\n\n    Dim bResult As Boolean\n\n    'Dim strProxyHostName As String 'useless, see below\n    'strProxyHostName = Space(1024)\n    Dim lpszProxyHostName As Long\n    Dim lplpszProxyHostName As Long\n\n    lpszProxyHostName = StrPtr(strProxyHostName)\n    lplpszProxyHostName = VarPtr(lpszProxyHostName)\n\n    Dim dwProxyHostNameLength As Long\n    Dim lpdwProxyHostNameLength As Long\n\n    dwProxyHostNameLength = LenB(strProxyHostName)\n    lpdwProxyHostNameLength = VarPtr(dwProxyHostNameLength)\n\n    Dim strUrlW         As String\n    Dim strHostNameW    As String\n\n    Dim strUrlA         As String\n    Dim strHostNameA    As String\n\n    strUrlW = \"https://www.google.fr/\"\n    strHostNameW = \"www.google.fr\"\n\n    strUrlA = StrConv(strUrlW, vbFromUnicode)\n    strHostNameA = StrConv(strHostNameW, vbFromUnicode)\n\n    Dim szUrlA()        As Byte\n    Dim szHostNameA()   As Byte\n\n    szUrlA = StrConv(strUrlW, vbFromUnicode)\n    szHostNameA = StrConv(strHostNameW, vbFromUnicode)\n\n    ReDim Preserve szUrlA(UBound(szUrlA) + 1)\n    ReDim Preserve szHostNameA(UBound(szHostNameA) + 1)\n\n    bResult = InternetInitializeAutoProxyDll_String(0, \"D:\\Users\\SC5071\\Desktop\\proxy.pac\", 0, 0, 0)\n\n    'check state before\n    'globalVar1 = lpszProxyHostName\n    'globalVar1 = lplpszProxyHostName\n    'globalVar1 = dwProxyHostNameLength\n    'globalVar1 = lpdwProxyHostNameLength\n\n    bResult = InternetGetProxyInfo_Long(VarPtr(szUrlA(0)), Len(\"https://www.google.fr/\") + 1, _\n                                        VarPtr(szHostNameA(0)), Len(\"www.google.fr\") + 1, _\n                                        lplpszProxyHostName, lpdwProxyHostNameLength)\n\n    m_ThreadProcId = GetCurrentThreadId()\n\n    If m_ThreadProcId = g_MainThreadId Then 'otherwise Excel crahes when using Debug.Print from another thread than the STA thread\n        Debug.Print \"bResult = \"; bResult\n        Debug.Print \"Err.LastDllError = \"; Err.LastDllError\n        Debug.Print \"GetLastError() = \"; GetLastError()\n    End If\n\n    'check state after\n    'globalVar2 = lpszProxyHostName\n    'globalVar2 = lplpszProxyHostName\n    'globalVar2 = dwProxyHostNameLength\n    'globalVar2 = lpdwProxyHostNameLength\n\n    '~~&gt; checking the state of the variable passed to InternetGetProxyInfo before and after the call reveals that\n    '    InternetGetProxyInfo_Long actually allocates a buffer holding the computed string and returns the new pointer to it in\n    '    lpszProxyHostName, and its length in dwProxyHostNameLength; lplpszProxyHostName and lpdwProxyHostNameLength are unchanged.\n    '    that is why strProxyHostName contains only blank spaces (200020002000...) after the call, it is simply unchanged.\n\n    WinINet_InternetGetProxyInfo_ThreadProc = bResult\n    'WinINet_InternetGetProxyInfo_ThreadProc = Err.LastDllError\n\n    WinINet_InternetGetProxyInfo_ThreadProc_Error = Err.LastDllError\n\n'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''\n\n    g_ptrProxyHostName = lpszProxyHostName\n    g_lngProxyHostNameLength = dwProxyHostNameLength\n\n    Dim strWideCharStr As String\n    Dim cRequiredBuffer As Long\n    cRequiredBuffer = MultiByteToWideChar(CP_ACP, MB_PRECOMPOSED, g_ptrProxyHostName, -1, StrPtr(strWideCharStr), 0)\n    cchWideChar = cRequiredBuffer - 1\n    strWideCharStr = Space(cchWideChar)\n    Dim lngResult As Long\n    lngResult = MultiByteToWideChar(CP_ACP, MB_PRECOMPOSED, g_ptrProxyHostName, -1, StrPtr(strWideCharStr), cchWideChar)\n\n    g_strProxyHostName = strWideCharStr\n\nEnd Function\n\nSub Main()\n\n    g_MainThreadId = GetCurrentThreadId()\n\n    Dim hThread As Long\n    hThread = CreateThread(0, 0, AddressOf WinINet_InternetGetProxyInfo_ThreadProc, 0, 0, 0)\n    Call WaitForSingleObject(hThread, INFINITE)\n    Dim dwExitCode As Long\n    b = GetExitCodeThread(hThread, dwExitCode)\n    CloseHandle hThread\n\n    If dwExitCode = 1 And WinINet_InternetGetProxyInfo_ThreadProc_Error = 0 Then\n        'Debug.Print globalVar1\n        'Debug.Print globalVar2\n\n        Debug.Print \"PAC file result for URL is:\"\n        Debug.Print g_strProxyHostName\n        Debug.Print \"THE END\"\n    Else\n        Debug.Print dwExitCode\n        Debug.Print WinINet_InternetGetProxyInfo_ThreadProc_Error\n    End If\n\nEnd Sub\n</code></pre>\n\n<p>In this end, the problem was that InternetGetProxyInfo allocates its own buffer (which should be freed later on, as many WinINet functions returning Strings), so my \"foolish\" attempt was not that foolish!!! It was in fact working!</p>\n\n<p>I forgot to mention in my question, that I made an ASM code because CallWindowProc does not allow to call a function pointer that expects more than 4 parameters. Anyway, it was useless, the problem came from elsewhere, <code>Declare</code> statements for Win32 APIs are correctly doing the Dynamic Linking required to call the WinINet/JSProxy function.</p>\n\n<p>As you can see, it is pretty easy to create another thread from the main Excel STA thread, but if I get it right about the COM Threading Model, one must avoid using objects that have been created in that main thread, it is very likely it will cause Excel to crash.</p>\n"}], "owner": {"reputation": 450, "user_id": 2981328, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/55b5a57989320394ee6a2acaf766c01f?s=128&d=identicon&r=PG&f=1", "display_name": "hymced", "link": "https://stackoverflow.com/users/2981328/hymced"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 207, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526548739, "creation_date": 1526473281, "question_id": 50370819, "link": "https://stackoverflow.com/questions/50370819/how-to-call-internetgetproxyinfo-from-a-non-single-threaded-apartment-thread-f", "title": "How to call InternetGetProxyInfo from a non &quot;Single-Threaded Apartment&quot; thread from Excel VBA using Win32 APIs", "body": "<p>I am working on an Excel VBA program, and at some point, I need the proxy to be used when accessing a specific url, proxy that is computed from the .pac file provided by my company. For that, I intend to use WinINet (I know I could also use WinHTTP more easily, and even how to make it work)</p>\n\n<p>I know I am missing some cleaning in my examples (InternetDeInitializeAutoProxyDll, etc.), but for now, I am just trying to successfully retrieve the proxy info.</p>\n\n<p><strong>Step 1 - C++</strong></p>\n\n<p>I found this, which gave me a sample to start with:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/20774236/what-initialization-should-be-made-prior-to-calling-internetgetproxyinfo\">What initialization should be made prior to calling InternetGetProxyInfo()?</a></p>\n\n<p>The accepted answer gives 2 ways. But I think that :</p>\n\n<ul>\n<li>the first one is wrong, it does not allow to retrieve the auto proxy from a pac file.</li>\n<li>the second one, is partially wrong too, since there is no need for providing any helper functions, some are provided by default and used internally.</li>\n</ul>\n\n<p>Anyway, the following C++ example allows me to retrieve the string containing the proxies to be used for a specific url:</p>\n\n<pre><code>char *str = 0;\nDWORD len = 0;\n\npfnInternetInitializeAutoProxyDll pIIAPD;\npfnInternetGetProxyInfo pIGPI;\n\nHMODULE hModJS;\n\nhModJS = LoadLibrary(TEXT(\"jsproxy.dll\"));\npIIAPD = (pfnInternetInitializeAutoProxyDll)GetProcAddress(hModJS, \"InternetInitializeAutoProxyDll\");\npIGPI = (pfnInternetGetProxyInfo)GetProcAddress(hModJS, \"InternetGetProxyInfo\");\n\nBOOL b;\nDWORD dw;\n\nb = pIIAPD(0, \"D:\\\\Users\\\\SC5071\\\\Desktop\\\\proxy.pac\", 0, 0, 0);\ndw = GetLastError();\n\nb = pIGPI(\"https://www.google.fr/\", sizeof(URL) - 1, \"www.google.fr\", sizeof(HOST) - 1, &amp;str, &amp;len);\ndw = GetLastError();\n\nreturn 0;\n</code></pre>\n\n<p>Works fine, <code>str</code> contains something like:</p>\n\n<blockquote>\n  <p>PROXY 123.123.55.55:10455; PROXY 123.123.56.56:10455; DIRECT</p>\n</blockquote>\n\n<p><strong>Step 2 - VBA</strong></p>\n\n<p>Moving from C++ to Excel VBA using <code>Declare</code> statements for the Win32 API functions <code>InternetInitializeAutoProxyDll</code> and <code>InternetGetProxyInfo</code>.</p>\n\n<p><em>[I am not posting the code here for now]</em></p>\n\n<p><code>InternetGetProxyInfo</code> fails with error code <code>ERROR_CAN_NOT_COMPLETE (1003L)</code></p>\n\n<p><strong>Step 3 - ASM</strong></p>\n\n<p>At first I thought this might be related to how Excel VBA loads and calls DLL functions, since MSDN for <code>InternetGetProxyInfo</code> states that:</p>\n\n<blockquote>\n  <p>This function can only be called by dynamically linking to \"JSProxy.dll\". </p>\n</blockquote>\n\n<p>So I made my own x86 assembly code to make the call (__stdcall convention):</p>\n\n<pre><code>Private Declare Function GetModuleHandleW Lib \"kernel32.dll\" (ByVal moduleName As String) As Long\nPrivate Declare Function GetModuleHandleA Lib \"kernel32.dll\" (ByVal moduleName As String) As Long\nPrivate Declare Function LoadLibraryExW Lib \"kernel32.dll\" (ByVal lpFileName As String, ByVal hFile As Long, ByVal dwFlags As Integer) As Long\nPrivate Declare Function LoadLibraryExA Lib \"kernel32.dll\" (ByVal lpFileName As String, ByVal hFile As Long, ByVal dwFlags As Integer) As Long\nPrivate Declare Function LoadLibraryW Lib \"kernel32.dll\" (ByVal lpFileName As Long) As Long\nPrivate Declare Function LoadLibraryA Lib \"kernel32.dll\" (ByVal lpFileName As Long) As Long\nPrivate Declare Function FreeLibrary Lib \"kernel32.dll\" (ByVal hModule As Long) As Integer\nPrivate Declare Function VirtualAlloc Lib \"kernel32.dll\" (ByVal lpAddress As Long, ByVal dwSize As Long, ByVal flAllocationType As Long, ByVal flProtect As Long) As Long\nPrivate Declare Function VirtualFree Lib \"kernel32.dll\" (ByVal lpAddress As Long, ByVal dwSize As Long, ByVal dwFreeType As Long) As Long\nPrivate Declare Function GetProcAddress Lib \"kernel32.dll\" (ByVal hModule As Long, ByVal lpProcName As Long) As Long\nPrivate Declare Function GetProcAddress_String Lib \"kernel32.dll\" Alias \"GetProcAddress\" (ByVal hModule As Long, ByVal ProcName As String) As Long\nPrivate Declare Function CallWindowProc Lib \"user32.dll\" Alias \"CallWindowProcW\" (ByVal lpPrevWndFunc As Long, ByVal hWnd As Long, ByVal Msg As Long, ByVal wParam As Long, ByVal lParam As Long) As Long\nPrivate Declare Sub RtlMoveMemory Lib \"kernel32.dll\" (ByVal Destination As Long, ByVal Source As Long, ByVal Length As Integer)\nPrivate Declare Function GetLastError Lib \"kernel32.dll\" () As Long\n\nPrivate Const MEM_COMMIT As Long = &amp;H1000&amp;\nPrivate Const MEM_RESERVE As Long = &amp;H2000&amp;\nPrivate Const MEM_RELEASE As Long = &amp;H8000&amp;\nPrivate Const MEM_EXECUTE_READWRITE As Long = &amp;H40&amp;\n\nDim FunctionAddress As Long\nDim MemAddressOffset As Long\n\nPrivate Sub AddByte(ByVal Data As Byte)\n    RtlMoveMemory MemAddressOffset, VarPtr(Data), 1\n    MemAddressOffset = CLng(MemAddressOffset) + 1\nEnd Sub\n\nPrivate Sub AddBytes(Data() As Byte)\n    RtlMoveMemory MemAddressOffset, VarPtr(Data(0)), UBound(Data) + 1\n    MemAddressOffset = CLng(MemAddressOffset) + UBound(Data) + 1\nEnd Sub\n\nSub Main()\n\n    Dim b As Long\n\n    Dim MemAddress As Long\n\n    Dim LstrBytes1() As Byte\n    LstrBytes1 = \"jsproxy.dll\"\n    ReDim Preserve LstrBytes1(UBound(LstrBytes1) + 2)\n    hLib = LoadLibraryW(VarPtr(LstrBytes1(0)))\n    Dim NstrBytes1() As Byte\n    NstrBytes1 = StrConv(\"InternetInitializeAutoProxyDll\", vbFromUnicode)\n    ReDim Preserve NstrBytes1(UBound(NstrBytes1) + 1)\n    FunctionAddress = GetProcAddress(hLib, VarPtr(NstrBytes1(0)))\n    If FunctionAddress = 0 Then Stop\n\n    MemAddress = VirtualAlloc(0&amp;, 256, MEM_COMMIT Or MEM_RESERVE, MEM_EXECUTE_READWRITE)\n    MemAddressOffset = MemAddress\n\n    Dim strTemp1 As String\n    strTemp1 = \"D:\\Users\\SC5071\\Desktop\\proxy.pac\"\n    Dim bytTemp1() As Byte\n    bytTemp1 = StrConv(strTemp1, vbFromUnicode)\n    ReDim Preserve bytTemp1(UBound(bytTemp1) + 1)\n\n    AddByte &amp;H55                                                'push        ebp\n    AddByte &amp;H8B: AddByte &amp;HEC                                  'mov         ebp,esp\n    AddByte &amp;H83: AddByte &amp;HEC: AddByte &amp;H18                    'sub         esp,18h\n\n    AddByte &amp;H6A: AddByte &amp;H0                                   'push        0\n    AddByte &amp;H6A: AddByte &amp;H0                                   'push        0\n    AddByte &amp;H6A: AddByte &amp;H0                                   'push        0\n    AddByte &amp;H68: AddBytes LongToByteArray(VarPtr(bytTemp1(0))) 'push        DWORD PTR\n    AddByte &amp;H6A: AddByte &amp;H0                                   'push        0\n\n    AddByte &amp;HE8                                                'call        InternetInitializeAutoProxyDll\n    AddBytes LongToByteArray(CLng(FunctionAddress) - (CLng(MemAddressOffset) + 4))\n\n    AddByte &amp;H89: AddByte &amp;H45: AddByte &amp;HFC                    'mov         dword ptr [ebp-4],eax\n    AddByte &amp;H8B: AddByte &amp;H45: AddByte &amp;HFC                    'mov         eax,dword ptr [ebp-4]\n\n    AddByte &amp;HC9                                                'leave\n    AddByte &amp;HC3                                                'ret\n\n    l = CallWindowProc(MemAddress, 0, 0, 0, 0)\n    Debug.Print GetLastError()\n\n    b = VirtualFree(MemAddress, 0, MEM_RELEASE)\n    Debug.Print Err.LastDllError\n\n    If l = 0 Then Exit Sub\n\n'--------------------------------------------------------------------------------------------------------------------------------\n\n    FunctionAddress = 0\n    Dim NstrBytes2() As Byte\n    NstrBytes2 = StrConv(\"InternetGetProxyInfo\", vbFromUnicode)\n    ReDim Preserve NstrBytes2(UBound(NstrBytes2) + 1)\n    FunctionAddress = GetProcAddress(hLib, VarPtr(NstrBytes2(0)))\n    If FunctionAddress = 0 Then Stop\n\n    MemAddress = VirtualAlloc(0&amp;, 256, MEM_COMMIT Or MEM_RESERVE, MEM_EXECUTE_READWRITE)\n    MemAddressOffset = MemAddress\n\n    strUrlW$ = \"https://www.google.fr/\"\n    strHostNameW$ = \"www.google.fr\"\n\n    Dim szUrlA()        As Byte\n    Dim szHostNameA()   As Byte\n\n    szUrlA = StrConv(strUrlW, vbFromUnicode)\n    szHostNameA = StrConv(strHostNameW, vbFromUnicode)\n\n    ReDim Preserve szUrlA(UBound(szUrlA) + 1)\n    ReDim Preserve szHostNameA(UBound(szHostNameA) + 1)\n\n    len1&amp; = Len(\"https://www.google.fr/\") + 1\n    len2&amp; = Len(\"www.google.fr\") + 1\n\n    Dim strProxyHostName() As Byte\n    ReDim strProxyHostName(2048 - 1)\n\n    Dim lpszProxyHostName As Long\n    Dim lplpszProxyHostName As Long\n\n    lpszProxyHostName = VarPtr(strProxyHostName(0))\n    lplpszProxyHostName = VarPtr(lpszProxyHostName)\n\n    Dim dwProxyHostNameLength As Long\n    Dim lpdwProxyHostNameLength As Long\n\n    dwProxyHostNameLength = UBound(strProxyHostName)\n    lpdwProxyHostNameLength = VarPtr(dwProxyHostNameLength)\n\n    AddByte &amp;H55                                                    'push        ebp\n    AddByte &amp;H8B: AddByte &amp;HEC                                      'mov         ebp,esp\n    AddByte &amp;H83: AddByte &amp;HEC: AddByte &amp;H1C                        'sub         esp,1ch\n\n    AddByte &amp;H68: AddBytes LongToByteArray(lpdwProxyHostNameLength) 'push        DWORD PTR\n    AddByte &amp;H68: AddBytes LongToByteArray(lplpszProxyHostName)     'push        DWORD PTR PTR\n    AddByte &amp;H68: AddBytes LongToByteArray(len2)                    'push        DWORD\n    AddByte &amp;H68: AddBytes LongToByteArray(VarPtr(szHostNameA(0)))  'push        DWORD PTR\n    AddByte &amp;H68: AddBytes LongToByteArray(len1)                    'push        DWORD\n    AddByte &amp;H68: AddBytes LongToByteArray(VarPtr(szUrlA(0)))       'push        DWORD PTR\n\n    AddByte &amp;HE8                                                    'call        InternetGetProxyInfo\n    AddBytes LongToByteArray(CLng(FunctionAddress) - (CLng(MemAddressOffset) + 4))\n\n    AddByte &amp;H89: AddByte &amp;H45: AddByte &amp;HFC                        'mov         dword ptr [ebp-4],eax\n    AddByte &amp;H8B: AddByte &amp;H45: AddByte &amp;HFC                        'mov         eax,dword ptr [ebp-4]\n\n    AddByte &amp;HC9                                                    'leave\n    AddByte &amp;HC3                                                    'ret\n\n    l = CallWindowProc(MemAddress, 0, 0, 0, 0)\n    Debug.Print GetLastError()\n\n    Debug.Print Mem_ReadHex(MemAddress, CLng(MemAddressOffset) - CLng(MemAddress))\n\n    b = VirtualFree(MemAddress, 0, MEM_RELEASE)\n    Debug.Print Err.LastDllError\n\n    If l = 0 Then Exit Sub\n\n    Debug.Print strProxyHostName\n\nEnd Sub\n</code></pre>\n\n<p>A bit heavy, but it works without crashing Excel (as does any \"CallAPIByName\" code in VB I could find over the internet), but still getting <code>ERROR_CAN_NOT_COMPLETE 1003L</code>.</p>\n\n<p><strong>Step 4 - The problem</strong></p>\n\n<p>1/ Then, I discovered that if one calls <code>InternetGetProxyInfo</code> from a \"Single-Thread Apartment\" thread, it will apparently inevitably fail with <code>ERROR_CAN_NOT_COMPLETE</code>.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/7847371/wininet-internetgetproxyinfo-error-1003-error-can-not-complete\">WinINet InternetGetProxyInfo : error 1003 ERROR_CAN_NOT_COMPLETE</a></p>\n\n<p>2/ I have also come to understand that Excel's process is actually single-threaded, and more precisely lives in a Single-Threaded Apartment (meaning COM has been initialized with <code>OleInitialize</code>/<code>CoInitialize</code>)</p>\n\n<p><a href=\"https://stackoverflow.com/questions/5721564/multi-threading-in-vba\">Multi-threading in VBA</a></p>\n\n<p>3/ Another source below explains that:</p>\n\n<blockquote>\n  <p>\"JSProxy uses COM and it can not work properly in case other appartement COM initialization is performed on the same thread.\"</p>\n</blockquote>\n\n<p><a href=\"http://microsoft.public.win32.programmer.networks.narkive.com/RMOcV126/internetgetproxyinfo-fails-with-error-can-not-complete-result\" rel=\"nofollow noreferrer\">http://microsoft.public.win32.programmer.networks.narkive.com/RMOcV126/internetgetproxyinfo-fails-with-error-can-not-complete-result</a></p>\n\n<p>So, here is my last foolish attempt:</p>\n\n<pre><code>hThread = CreateThread(0, 0, MemAddress, 0, 0, 0)\nCall WaitForSingleObject(hThread, INFINITE)\nDim lpExitCode As Long\nb = GetExitCodeThread(hThread, lpExitCode)\nCloseHandle hThread\n</code></pre>\n\n<p>Obviously it still does not return the string with proxy info.</p>\n\n<p>In my C++ example above, I noticed that indeed, adding the following gives the same behavior than in Excel:</p>\n\n<pre><code>HRESULT o = OleInitialize(NULL); // S_OK  = 0x0\n// after that, InternetGetProxyInfo fails with 1003L\n</code></pre>\n\n<p>I am not really familiar with OLE/COM/Threading concepts, and I fail to see how to easily go further. In light of everything I've said here, I guess I could sum up my question to :</p>\n\n<p><strong>How to call InternetGetProxyInfo from a non-\"Single-Threaded Apartment\" thread from Excel VBA using Win32 APIs ?</strong></p>\n\n<p>Windows 10 64-bit + Excel 2016 32-bit</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3710, "user_id": 1031311, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Wn8YV.png?s=128&g=1", "display_name": "solti", "link": "https://stackoverflow.com/users/1031311/solti"}, "edited": false, "score": 4, "creation_date": 1526473287, "post_id": 50370795, "comment_id": 87757472, "body": "my eyes are bleeding looking at your code .. lol .. At least format it."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1526473409, "post_id": 50370795, "comment_id": 87757556, "body": "is your enter key broken?"}, {"owner": {"reputation": 23, "user_id": 9799399, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Aloysius Rebeiro", "link": "https://stackoverflow.com/users/9799399/aloysius-rebeiro"}, "edited": false, "score": 0, "creation_date": 1526473458, "post_id": 50370795, "comment_id": 87757590, "body": "Sorry for the messy code."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1526473487, "post_id": 50370795, "comment_id": 87757607, "body": "Please provide a minimal input example that triggers the problem."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1526473494, "post_id": 50370795, "comment_id": 87757613, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/40987901/what-happens-to-uninitialized-variables-c\">What happens to uninitialized variables? C++</a>"}, {"owner": {"reputation": 23, "user_id": 9799399, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Aloysius Rebeiro", "link": "https://stackoverflow.com/users/9799399/aloysius-rebeiro"}, "edited": false, "score": 0, "creation_date": 1526473559, "post_id": 50370795, "comment_id": 87757652, "body": "No. Enter key is fine. It enters the first inputs but doesn&#39;t execute task 2"}, {"owner": {"reputation": 789, "user_id": 8120642, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OX8-_3nAbeE/AAAAAAAAAAI/AAAAAAAAAAA/of7PUZBmbk4/photo.jpg?sz=128", "display_name": "hegel5000", "link": "https://stackoverflow.com/users/8120642/hegel5000"}, "edited": false, "score": 0, "creation_date": 1526473595, "post_id": 50370795, "comment_id": 87757682, "body": "You can edit the post to make the formatting more readable.  If you don&#39;t, then most people (including me) will just not even attempt to read it.  You especially need to get the indentation right when there are nested looops."}, {"owner": {"reputation": 23, "user_id": 9799399, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Aloysius Rebeiro", "link": "https://stackoverflow.com/users/9799399/aloysius-rebeiro"}, "edited": false, "score": 0, "creation_date": 1526473607, "post_id": 50370795, "comment_id": 87757687, "body": "I assigned it 0 later still doesn&#39;t work."}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 2, "creation_date": 1526473627, "post_id": 50370795, "comment_id": 87757712, "body": "What inputs do you give (including when you press enter? This will help me try to reproduce your problem. What do you get on the screen? What does &quot;stops running&quot; mean?"}, {"owner": {"reputation": 23, "user_id": 9799399, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Aloysius Rebeiro", "link": "https://stackoverflow.com/users/9799399/aloysius-rebeiro"}, "edited": false, "score": 0, "creation_date": 1526473899, "post_id": 50370795, "comment_id": 87757854, "body": "herdsize= 2 ,  id=001,all first yields=2.9 all second yields=3 for first cow"}, {"owner": {"reputation": 23, "user_id": 9799399, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Aloysius Rebeiro", "link": "https://stackoverflow.com/users/9799399/aloysius-rebeiro"}, "edited": false, "score": 0, "creation_date": 1526473939, "post_id": 50370795, "comment_id": 87757877, "body": "and id=002 and all first yields= 3 and second= 4"}, {"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 2, "creation_date": 1526474053, "post_id": 50370795, "comment_id": 87757965, "body": "@AloysiusRebeiro Somebody took the time to make your code readable, please don&#39;t mess it up again."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1526474055, "post_id": 50370795, "comment_id": 87757969, "body": "@AloysiusRebeiro please <a href=\"https://stackoverflow.com/posts/50370795/edit\">edit</a> your question and put the input <i>there</i>. And don&#39;t mess up the code formatting which I just did for you. And don&#39;t describe the input, just show it verbatim."}], "answers": [{"tags": [], "owner": {"reputation": 2248, "user_id": 2428861, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/QZ1Jp.png?s=128&g=1", "display_name": "Mladen B.", "link": "https://stackoverflow.com/users/2428861/mladen-b"}, "is_accepted": true, "score": 1, "last_activity_date": 1526473488, "last_edit_date": 1526473488, "creation_date": 1526473311, "answer_id": 50370824, "question_id": 50370795, "link": "https://stackoverflow.com/questions/50370795/code-is-not-executing-in-c/50370824#50370824", "title": "CODE is not executing in c++", "body": "<p>instead of <code>float Herdtotalweek;</code> try using <code>float Herdtotalweek = 0;</code> ?</p>\n\n<p>also, in your second for statement, instead of <code>for (count=1;count2&lt;Herdsize+1;count++)</code> try <code>for (count=1;count&lt;Herdsize+1;count++)</code> (you were using count2 instead of count, which was probably a copy/paste error)</p>\n"}, {"tags": [], "owner": {"reputation": 1171, "user_id": 5695235, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/fDN3J.jpg?s=128&g=1", "display_name": "penguin2048", "link": "https://stackoverflow.com/users/5695235/penguin2048"}, "is_accepted": false, "score": 1, "last_activity_date": 1526473708, "creation_date": 1526473708, "answer_id": 50370973, "question_id": 50370795, "link": "https://stackoverflow.com/questions/50370795/code-is-not-executing-in-c/50370973#50370973", "title": "CODE is not executing in c++", "body": "<p>The for loop after task2 never completes. It is an infinite loop as you are not updating count2. </p>\n"}], "owner": {"reputation": 23, "user_id": 9799399, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Aloysius Rebeiro", "link": "https://stackoverflow.com/users/9799399/aloysius-rebeiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "closed_date": 1526475535, "accepted_answer_id": 50370824, "answer_count": 2, "score": -3, "last_activity_date": 1526474011, "creation_date": 1526473196, "last_edit_date": 1526474011, "question_id": 50370795, "link": "https://stackoverflow.com/questions/50370795/code-is-not-executing-in-c", "closed_reason": "Not suitable for this site", "title": "CODE is not executing in c++", "body": "<p>TASK 2 remains un-executed. Task 1 works fine, I input the yield values of the cows; but then the code stops running. A warning says that Herdtotalweek may be uninitialized. But I don't know how to fix that. There are no other warnings or errors.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main() { //Task 1\n  int Herdsize;\n  int Day;\n  float MilkYield1;\n  float MilkYield2;\n  int count;\n\n  cout &lt;&lt; \"Please input herd size\" &lt;&lt; endl;\n  cin &gt;&gt; Herdsize;\n  while (Herdsize &lt; 1 || Herdsize &gt; 900) {\n    cout &lt;&lt; \"Please re-input herdsize between 1 and 900\" &lt;&lt; endl;\n    cin &gt;&gt; Herdsize;\n  }\n\n  int CowID[Herdsize + 1];\n  float DailyYield[Herdsize * 7];\n  float WeeklyYieldpercow[Herdsize * 14];\n\n  for (count = 1; count &lt; Herdsize + 1; count++) {\n    cout &lt;&lt; \"Input 3 digit cow id \";\n    cin &gt;&gt; CowID[count];\n    while (CowID[count] &lt; 1 || CowID[count] &gt; 999) {\n      cout &lt;&lt; \"Please re-input cow a 3 digit cow id \" &lt;&lt; endl;\n      cin &gt;&gt; CowID[count];\n    }\n\n    for (Day = 1; Day &lt; 8; Day++) {\n      cout &lt;&lt; \"Please input first milk yield of cow,day\";\n      cout &lt;&lt; Day;\n      cout &lt;&lt; endl;\n      cin &gt;&gt; MilkYield1;\n      cout &lt;&lt; \"Please input second milk yield day:\";\n      cout &lt;&lt; Day;\n      cout &lt;&lt; \",  if there is a second yield if not enter 0\";\n      cout &lt;&lt; endl;\n      cin &gt;&gt; MilkYield2;\n    }\n    DailyYield[((count - 1) * 7) + Day] = MilkYield1 + MilkYield2;\n    WeeklyYieldpercow[count] = WeeklyYieldpercow[count] +\n      DailyYield[((count - 1) * 7) + Day];\n  }\n\n\n  // TASK 2\n  int count2 = 1;\n  float Herdtotalweek;\n  float Averagevolume;\n  for (count = 1; count2 &lt; Herdsize + 1; count++) {\n    Herdtotalweek = Herdtotalweek + WeeklyYieldpercow[count];\n  }\n  Averagevolume = Herdtotalweek / Herdsize;\n  int Herdtotalweekwhole = int(Herdtotalweek + 0.5);\n  int Averagevolumewhole = int(Averagevolume + 0.5);\n  cout &lt;&lt; \"Total weekly volume=\";\n  cout &lt;&lt; Herdtotalweekwhole;\n  cout &lt;&lt; \"Average volume =\";\n  cout &lt;&lt; Averagevolumewhole;\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "arduino"], "comments": [{"owner": {"reputation": 2228, "user_id": 4902099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XhSjG.jpg?s=128&g=1", "display_name": "hcheung", "link": "https://stackoverflow.com/users/4902099/hcheung"}, "edited": false, "score": 3, "creation_date": 1526473017, "post_id": 50370487, "comment_id": 87757287, "body": "Please read <a href=\"https://www.arduino.cc/en/Reference/VariableDeclaration\" rel=\"nofollow noreferrer\">Variable Declaration</a>. The use of array don&#39;t make sense as well, so read language reference on [array]( <a href=\"https://www.arduino.cc/reference/en/language/variables/data-types/array/\" rel=\"nofollow noreferrer\">arduino.cc/reference/en/language/variables/data-types/array</a>) as well."}], "answers": [{"tags": [], "owner": {"reputation": 1002, "user_id": 8078317, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ldZij.jpg?s=128&g=1", "display_name": "Nitro", "link": "https://stackoverflow.com/users/8078317/nitro"}, "is_accepted": true, "score": 2, "last_activity_date": 1526481524, "creation_date": 1526481524, "answer_id": 50373794, "question_id": 50370487, "link": "https://stackoverflow.com/questions/50370487/arduino-array-and-if-statement/50373794#50373794", "title": "Arduino array and if statement", "body": "<p>You are getting the error because you have bounded the scope of your led_pin variable inside the if and else condition.</p>\n\n<p>Also you are trying to change the whole variable, you should not do that.</p>\n\n<p>Try this out.</p>\n\n<pre><code>void count(int a){\n    int led_pin[2][4]={{3,4,5,6},{4,5,6,9}};\n    if( a !=0)\n    {\n        a=1;\n    }\n    for(int i=0;i&lt;4;i++) //I don't know why you used 7 in your code.\n    {\n        digitalWrite(led_pin[a][i],HIGH);\n    }\n}\n</code></pre>\n\n<p>I hope this helps.</p>\n"}], "owner": {"reputation": 31, "user_id": 4359249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7284e21de29c1094378d2ece5651de5?s=128&d=identicon&r=PG&f=1", "display_name": "Bo\u0161tjan \u010cerin", "link": "https://stackoverflow.com/users/4359249/bo%c5%a1tjan-%c4%8cerin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 476, "favorite_count": 0, "accepted_answer_id": 50373794, "answer_count": 1, "score": 0, "last_activity_date": 1526486813, "creation_date": 1526472355, "last_edit_date": 1526486813, "question_id": 50370487, "link": "https://stackoverflow.com/questions/50370487/arduino-array-and-if-statement", "title": "Arduino array and if statement", "body": "<p>I have a problem. My code for Arduino is:</p>\n\n<pre><code>void count (int a){\n  if (a == 0) {\n    int led_pin [4] = {3, 4, 5, 6};\n  }\n\n  else{\n    int led_pin [2] = {4, 5, 6, 9};\n  }\n\n  for (int i = 0; i &lt;= 7; i++){\n    digitalWrite(led_pin[i], HIGH);\n  }\n}\n</code></pre>\n\n<p>and I get output:</p>\n\n<blockquote>\n  <p>'led_pin' was not declared in this scope</p>\n</blockquote>\n\n<p>How to declared array or change values of array?</p>\n"}, {"tags": ["c++", "pointers", "inheritance"], "comments": [{"owner": {"reputation": 704, "user_id": 7595618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51cf59e6785bbd9f82f28e8cfc0f2935?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Borkland", "link": "https://stackoverflow.com/users/7595618/mike-borkland"}, "edited": false, "score": 5, "creation_date": 1526472304, "post_id": 50370447, "comment_id": 87756772, "body": "You&#39;re missing a lot of semi-colons."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1526472313, "post_id": 50370447, "comment_id": 87756778, "body": "No slicing happens in your code. <code>A a = C()</code> would do slicing."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1526472463, "post_id": 50370447, "comment_id": 87756878, "body": "Google &quot;c++ adjustor thunks&quot; to find hits that might be relevant to your specific compiler."}, {"owner": {"reputation": 2174, "user_id": 3349368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c9f50cb5783614c67eef86caf63139?s=128&d=identicon&r=PG", "display_name": "Paul Belanger", "link": "https://stackoverflow.com/users/3349368/paul-belanger"}, "edited": false, "score": 0, "creation_date": 1526472605, "post_id": 50370447, "comment_id": 87756978, "body": "Another good read is <a href=\"https://shaharmike.com/cpp/vtable-part1/\" rel=\"nofollow noreferrer\">shaharmike.com/cpp/vtable-part1</a>, which discusss how the C++ vtables are laid out by the GCC compiler."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1526472683, "post_id": 50370447, "comment_id": 87757038, "body": "thunks and vtables don&#39;t apply to the code shown. The compiler simply adds a constant offset when implicitly converting <code>C*</code> to <code>B*</code>."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1526472738, "post_id": 50370447, "comment_id": 87757089, "body": "@aschepler: And with current code, offset of 0 is valid (thanks to Empty Base class Optimization)."}, {"owner": {"reputation": 2234, "user_id": 3052438, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/X9OWu.png?s=128&g=1", "display_name": "NO_NAME", "link": "https://stackoverflow.com/users/3052438/no-name"}, "edited": false, "score": 0, "creation_date": 1526472843, "post_id": 50370447, "comment_id": 87757169, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/16185945/multiple-inheritance-and-pointer-implementation\">Multiple inheritance and pointer implementation</a>"}, {"owner": {"reputation": 1281, "user_id": 1356096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTexs.png?s=128&g=1", "display_name": "YesThatIsMyName", "link": "https://stackoverflow.com/users/1356096/yesthatismyname"}, "edited": false, "score": 0, "creation_date": 1526472909, "post_id": 50370447, "comment_id": 87757206, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1002503/how-is-cs-multiple-inheritance-implemented\">How is C++&#39;s multiple inheritance implemented?</a>"}, {"owner": {"reputation": 42863, "user_id": 577603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/70c19b44cc2eb6f1a87a08fc892c502b?s=128&d=identicon&r=PG", "display_name": "ComicSansMS", "link": "https://stackoverflow.com/users/577603/comicsansms"}, "edited": false, "score": 0, "creation_date": 1526475370, "post_id": 50370447, "comment_id": 87758872, "body": "Recommended reading: Stroustrup wrote a paper in 1989 <a href=\"https://www.usenix.org/legacy/publications/compsystems/1989/fall_stroustrup.pdf\" rel=\"nofollow noreferrer\">Multiple Inheritance in C++</a> that gives a very readable explanation of what a typical implementation does in this case and how to deal with the various interesting problems that arise."}], "answers": [{"tags": [], "owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "is_accepted": false, "score": 3, "last_activity_date": 1526473774, "last_edit_date": 1526473774, "creation_date": 1526472702, "answer_id": 50370611, "question_id": 50370447, "link": "https://stackoverflow.com/questions/50370447/multiple-inheritance-c-and-pointers/50370611#50370611", "title": "Multiple inheritance c++ and pointers", "body": "<p><code>C</code>, as a child of both, <em>is a</em> <code>A</code> and <em>is a</em> <code>B</code>. So, when you upcast a pointer no slicing happens (why would it anyway?) but the pointer points to an appropriate portion of the object. A standard diagram would be smth. like</p>\n\n<pre><code> c -&gt; +++++++++++++++++++++\n      +        C          +\n a -&gt; + +++++++++++++++++ +\n      + +      A        + +\n      + +++++++++++++++++ +\n      +                   +\n b -&gt; + +++++++++++++++++ +\n      + +      B        + +\n      + +++++++++++++++++ +\n      +                   +\n      +  C's own members  +\n      +                   +\n      +++++++++++++++++++++\n</code></pre>\n\n<p>Both <code>a</code> and <code>b</code> point to the respective subobjects.</p>\n\n<p><em>How does it know?</em> \u2014 Well, the compiler creates memory layouts, it definitely knows what virtual addresses should pointers be assigned to, and how up/downcasting amounts to a pointer offset.</p>\n\n<p>Note that when you use a plain pointer-to-base as a sole (and owning) reference to object, you should declare base's destructor <code>virtual</code>, otherwise you won't be able to properly destroy the object.</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1526474823, "creation_date": 1526474823, "answer_id": 50371371, "question_id": 50370447, "link": "https://stackoverflow.com/questions/50370447/multiple-inheritance-c-and-pointers/50371371#50371371", "title": "Multiple inheritance c++ and pointers", "body": "<p>First C++ requires all instructions to be ended with a semicolon (<code>;</code>).</p>\n\n<p>Now for your questions:</p>\n\n<blockquote>\n  <p>What happens with first instance of C?</p>\n</blockquote>\n\n<p>Nothing. <code>A * a = c;</code> actually initializes a <code>A *</code> pointer pointing to the dynamically allocated <code>*c</code> C object. It is a valid pointer conversion because C is a subclass of A. In fact this is just the basics for polymorphism.</p>\n\n<blockquote>\n  <p>Does assiging C to pointer of type A slice the object, so A points only to part of C that contains members of A?</p>\n</blockquote>\n\n<p>No slicing occurs when you convert pointers. <code>A a1 = *(static_cast&lt;A *&gt;(c));</code> would indeed generate a <em>sliced</em> copy containing only the A part.</p>\n\n<blockquote>\n  <p>If so, how does it know when to top?</p>\n</blockquote>\n\n<p>How is an implementation detail. Compilers can do that because it is specified in standard. Common implementations use offsets in object addresses.</p>\n\n<blockquote>\n  <p>If C contains A part and B part, and A part starts at offset 0 , how does it know which offset to stop?</p>\n</blockquote>\n\n<p>Here again it is an implementation detail. But for common implementations the A part ends at start offset + sizeof(A).</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 0, "last_activity_date": 1526478487, "last_edit_date": 1526478487, "creation_date": 1526477432, "answer_id": 50372301, "question_id": 50370447, "link": "https://stackoverflow.com/questions/50370447/multiple-inheritance-c-and-pointers/50372301#50372301", "title": "Multiple inheritance c++ and pointers", "body": "<blockquote>\n  <p>Does assiging C to pointer of type A slice the object</p>\n</blockquote>\n\n<p>No. Initializing (or assigning, but assignment is not what your code does) a pointer has no effect on the pointed object.</p>\n\n<blockquote>\n  <p>so A points only to part of C that contains members of A?</p>\n</blockquote>\n\n<p>This doesn't follow from slicing, since that doesn't happen, but yes, <code>a</code> (which is the name of the pointer variable, not <code>A</code>) indeed points to the <code>A</code> sub-object within the <code>C</code> object. The <code>A</code> object contains only its own members.</p>\n\n<blockquote>\n  <p>how does it know which offset to stop?</p>\n</blockquote>\n\n<p>The compiler knows how big an object needs to be, and it decides the exact size of all defined types. Since it is the compiler that made the decision, of course it knows what it decided.</p>\n"}], "owner": {"reputation": 181, "user_id": 4126768, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/d70e1c41b281c218a30b6c0cb19ba04d?s=128&d=identicon&r=PG&f=1", "display_name": "Dingo", "link": "https://stackoverflow.com/users/4126768/dingo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1526478487, "creation_date": 1526472237, "last_edit_date": 1526475589, "question_id": 50370447, "link": "https://stackoverflow.com/questions/50370447/multiple-inheritance-c-and-pointers", "title": "Multiple inheritance c++ and pointers", "body": "<p>Having multiple inheritance</p>\n\n<pre><code>class A{};\nclass B{};\n\nclass C: public A, public B{};\n</code></pre>\n\n<p>what happens when i do</p>\n\n<pre><code>C *c = new C;\nA *a = c;  \nB *b = c;\n\nA *a1 = new C;\nB *b1 = new C;\n</code></pre>\n\n<p>What happens with first instance of C? Does assiging C to pointer of type A slice the object, so A points only to part of C that contains members of A?\nIf so, how does it know when to top? If C contains A part and B part, and A part starts at offset 0 , how does it know which offset to stop?</p>\n\n<p>Thanks for help.</p>\n"}, {"tags": ["c++", "c++11", "variadic-templates", "dry", "perfect-forwarding"], "comments": [{"owner": {"reputation": 8409, "user_id": 2001017, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/H0Z0x.jpg?s=128&g=1", "display_name": "Picaud Vincent", "link": "https://stackoverflow.com/users/2001017/picaud-vincent"}, "edited": false, "score": 5, "creation_date": 1526470385, "post_id": 50369589, "comment_id": 87755390, "body": "a minor detail: are you sure of the c++11 tag? AFAIK std::optional is c++17."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1526470687, "post_id": 50369589, "comment_id": 87755612, "body": "I think this post reads more like a criticism of variadic templates in general"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1526470705, "post_id": 50369589, "comment_id": 87755629, "body": "It&#39;s a shame <code>initialize_state</code> is a function. If it were a type, you could only declare <code>initialize_state&lt;Xs...&gt;</code> and fully instantiate <code>initialize_state&lt;A,B,C&gt;</code> in the header, and <i>define</i> it elsewhere (in a source file for instance)."}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 8409, "user_id": 2001017, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/H0Z0x.jpg?s=128&g=1", "display_name": "Picaud Vincent", "link": "https://stackoverflow.com/users/2001017/picaud-vincent"}, "edited": false, "score": 3, "creation_date": 1526470777, "post_id": 50369589, "comment_id": 87755680, "body": "@PicaudVincent: sorry, I&#39;m using an internal C++11 replacement for <code>std::optional</code> in this particular project."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1526470886, "post_id": 50369589, "comment_id": 87755753, "body": "I wouldn&#39;t really call this a &quot;code duplication&quot;. This <code>initialize_state</code> function acts more like a fa&#231;ade for user."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1526470891, "post_id": 50369589, "comment_id": 87755755, "body": "Is <code>state</code> not movable/copyable because of some constraint on one of its members like <code>a</code>, <code>b</code> or <code>c</code>? I could see a scenario where we have a <code>StateCreator</code> class that eases things a bit."}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1526471047, "post_id": 50369589, "comment_id": 87755860, "body": "@AndyG: yes, that&#39;s correct. <code>context</code> is also not movable itself for the same reason."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1526471227, "post_id": 50369589, "comment_id": 87755973, "body": "Since it appears that <code>a</code> <code>b</code> and <code>c</code> are individually movable, it sounds like maybe <code>state</code> has some other internal members that prevent movability. It sounds like encapsulation is a good approach; pull out <code>A</code> <code>B</code> and <code>C</code> into another class that can be passed in."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1526471244, "post_id": 50369589, "comment_id": 87755987, "body": "Couldn&#39;t you have three type aliases and use those aliases in the constructor and <code>initialize_state</code> instead? Changing the aliases then changes the types for both functions."}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 1, "creation_date": 1526471862, "post_id": 50369589, "comment_id": 87756415, "body": "Why the downvote?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1526471985, "post_id": 50369589, "comment_id": 87756513, "body": "@VittorioRomeo: I don&#39;t understand why this is downvoted. +1 on the grounds that I don&#39;t really understand the question."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 1, "creation_date": 1526472746, "post_id": 50369589, "comment_id": 87757101, "body": "Do you mean literally <code>void initialize_state(A&amp;&amp; a, B&amp;&amp; b, C&amp;&amp; c)</code> or should they be perfectly forwarded?"}], "answers": [{"comments": [{"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 3, "creation_date": 1526472926, "post_id": 50370308, "comment_id": 87757217, "body": "I suggest <code>static_assert</code> over SFINAE and not all caps type name because ouch."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1526473850, "post_id": 50370308, "comment_id": 87757829, "body": "@PasserBy: :-)  Fair enough criticisms"}], "tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": false, "score": 3, "last_activity_date": 1526471791, "creation_date": 1526471791, "answer_id": 50370308, "question_id": 50369589, "link": "https://stackoverflow.com/questions/50369589/exposing-parameter-types-in-a-perfectly-forwarding-function-avoiding-code-repeti/50370308#50370308", "title": "Exposing parameter types in a perfectly-forwarding function avoiding code repetition", "body": "<p>The class <code>state</code> may not be copyable/movable, but it appears that <code>A</code>, <code>B</code> and <code>C</code> are. (So I'm assuming there is some other, internal data in <code>state</code> that prevents copyability/movability)</p>\n\n<p>You can pull these members out into another class that can be injected into <code>state</code>. For lack of a better name, I'll call it <code>state_args</code>:</p>\n\n<pre><code>struct state_args\n{\n   explicit state_args(A a, B b, C c);\n   A a_;\n   B b_;\n   C c_;\n};\n</code></pre>\n\n<p>Which enables the following:</p>\n\n<pre><code>class context\n{\nprivate:\n    class state\n    {\n        state(state_args args);\n\n        state(const state&amp;) = delete;\n        state(state&amp;&amp;) = delete;\n    };\n\n    std::optional&lt;state&gt; _state; // or `boost::optional`\n\npublic:\n    template&lt;class STATE_ARGS, /*enable_if to ensure STATE_ARGS is indeed state_args*/&gt;\n    void initialize_state(STATE_ARGS&amp;&amp; internal_state) \n    {\n        _state.emplace(std::forward&lt;STATE_ARGS&gt;(internal_state));\n    }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 2, "last_activity_date": 1526473300, "creation_date": 1526473300, "answer_id": 50370822, "question_id": 50369589, "link": "https://stackoverflow.com/questions/50369589/exposing-parameter-types-in-a-perfectly-forwarding-function-avoiding-code-repeti/50370822#50370822", "title": "Exposing parameter types in a perfectly-forwarding function avoiding code repetition", "body": "<blockquote>\n  <p>but this has a major drawback: there is code duplication with state::state, that needs to be manually maintained in case the argument types change.</p>\n</blockquote>\n\n<p>This is a general problem with encapsulation. It's (definition) not DRY.</p>\n\n<p>There is a way to preserve the relationship between the <code>state</code> constructor overloads and the interface of <code>initialize_state</code>, which is to use <code>enable_if</code> along with the <code>is_constructible</code> type trait.</p>\n\n<pre><code>class context\n{\nprivate:\n    class state\n    {\n    public:\n        state(A a, B b, C c);\n\n        state(const state&amp;) = delete;\n        state(state&amp;&amp;) = delete;\n    };\n\n    std::optional&lt;state&gt; _state; // or `boost::optional`\npublic:\n    template &lt;typename... Xs&gt;\n    auto \n    initialize_state(Xs&amp;&amp;... xs) \n    -&gt; \n    std::enable_if_t\n    &lt;\n        // condition\n        std::is_constructible&lt;state, Xs...&gt;::value, \n\n        // return type\n        void\n    &gt;\n    {\n        _state.emplace(std::forward&lt;Xs&gt;(xs)...);\n    }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 2, "last_activity_date": 1526474450, "creation_date": 1526474450, "answer_id": 50371259, "question_id": 50369589, "link": "https://stackoverflow.com/questions/50369589/exposing-parameter-types-in-a-perfectly-forwarding-function-avoiding-code-repeti/50371259#50371259", "title": "Exposing parameter types in a perfectly-forwarding function avoiding code repetition", "body": "<p>Probably creating more issues than solving, you might template your class:</p>\n\n<pre><code>template &lt;typename ... Ts&gt;\nclass context_impl\n{\nprivate:\n    class state\n    {\n        state(Ts...);\n\n        state(const state&amp;) = delete;\n        state(state&amp;&amp;) = delete;\n    };\n\n    std::optional&lt;state&gt; _state; // or `boost::optional`\n\npublic:\n    void initialize_state(Ts&amp;&amp;... xs) \n    {\n        _state.emplace(std::forward&lt;Xs&gt;(xs)...);\n    }\n};\n\nusing context = context_impl&lt;A, B, C&gt;;\n</code></pre>\n\n<p>As template are fixed by the class, <code>void initialize_state(Ts&amp;&amp;... xs)</code> has fixed signature (intellisense can show expected arguments for example).</p>\n"}], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 2, "accepted_answer_id": 50370822, "answer_count": 3, "score": 11, "last_activity_date": 1526475976, "creation_date": 1526469743, "last_edit_date": 1526470811, "question_id": 50369589, "link": "https://stackoverflow.com/questions/50369589/exposing-parameter-types-in-a-perfectly-forwarding-function-avoiding-code-repeti", "title": "Exposing parameter types in a perfectly-forwarding function avoiding code repetition", "body": "<p>I have an annoying scenario where I need to defer the initialization of some object <code>state</code> and allow the user to construct one on demand. E.g.</p>\n\n<pre><code>// user code\n\ncontext c;\n// ...do something...\nc.initialize_state(a, b, c);\n</code></pre>\n\n<p></p>\n\n<pre><code>// library code\n\nclass context\n{\nprivate:\n    class state\n    {\n        state(A a, B b, C c);\n\n        state(const state&amp;) = delete;\n        state(state&amp;&amp;) = delete;\n    };\n\n    std::optional&lt;state&gt; _state; // or `boost::optional`\n\npublic:\n    template &lt;typename... Xs&gt;\n    void initialize_state(Xs&amp;&amp;... xs) \n    {\n        _state.emplace(std::forward&lt;Xs&gt;(xs)...);\n    }\n};\n</code></pre>\n\n<p>As you can see from the code above, the interface of <code>context::initialize_state</code> tells the user <em>nothing</em> about how to initialize <code>context::_state</code>. The user is forced to look at the implementation of <code>initialize_state</code> and then look at <code>state::state</code> to understand what should be passed to <code>initialize_state</code>.</p>\n\n<p>I could change <code>initialize_state</code> to...</p>\n\n<pre><code>void initialize_state(A&amp;&amp; a, B&amp;&amp; b, C&amp;&amp; c) \n{\n    _state.emplace(std::move(a), std::move(b), std::move(c));\n}\n</code></pre>\n\n<p>...but this has a major drawback: there is code duplication with <code>state::state</code>, that needs to be manually maintained in case the argument types change.</p>\n\n<p>Is there any way I can get the best of both worlds (DRY and user-friendly interface)? Note that <code>state</code> is not movable/copyable.</p>\n"}, {"tags": ["c++", "c++11", "boost", "shared-memory", "boost-interprocess"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1526471209, "post_id": 50369461, "comment_id": 87755955, "body": "call <code>vector::reserve</code>?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1526511487, "post_id": 50369461, "comment_id": 87778257, "body": "@VTT that might fail. Checking <a href=\"http://en.cppreference.com/w/cpp/container/vector/capacity\" rel=\"nofollow noreferrer\">capacity()</a> is closer already"}, {"owner": {"reputation": 24928, "user_id": 997112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c52a3944cdd2eac9725e54fc548f368?s=128&d=identicon&r=PG", "display_name": "user997112", "link": "https://stackoverflow.com/users/997112/user997112"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1526635384, "post_id": 50369461, "comment_id": 87831308, "body": "@sehe I didn&#39;t see your comment and implemented what VTT is probably suggesting, whereby I try doing a reserve(vec.size() + newVec.size()) and if that fails, I catch and return false. Is capacity() the correct way of implementing what I ended up doing?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1526637977, "post_id": 50369461, "comment_id": 87832988, "body": "<code>capacity()</code> is the right way to answer the bolded question <i>&quot;What is the safest way to check whether I have enough space to write all my elements, prior to writing?&quot;</i>. However the backstory suggests that you want to know <b><i>&quot;How do I make sure my memory segment is large enough to contain my data (e.g. a vector)?&quot;</i></b> which is what I answered in my question."}], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 0, "last_activity_date": 1526511413, "creation_date": 1526511413, "answer_id": 50381066, "question_id": 50369461, "link": "https://stackoverflow.com/questions/50369461/check-boostinterprocessvector-has-enough-capacity-before-writing/50381066#50381066", "title": "Check boost::interprocess::vector has enough capacity before writing?", "body": "<blockquote>\n  <p>Note the vector is created within a managed_shared_memory object and this is created by specifying a number of bytes, not number of vector elements</p>\n</blockquote>\n\n<p>There's no straight formula as the overhead of the segment manager can be significant and depends on allocation patterns: in <a href=\"https://stackoverflow.com/questions/21287171/bad-alloc-is-thrown/21287572#21287572\">this older answer I demonstrate this quite visually</a>: </p>\n\n<p><a href=\"https://i.stack.imgur.com/s0C5B.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s0C5B.png\" alt=\"enter image description here\"></a></p>\n\n<p>With that in mind, you can probably do some testing on the intended platform and workout the actual size required. </p>\n\n<p>However, you can also forget about it, and remember <strong>it's all virtual memory</strong> anyways. Just reserve a TB or three, and nothing should ever get mapped/committed unless you those pages.</p>\n\n<blockquote>\n  <p>If you want to use <code>managed_mapped_file</code> you can happily use <code>ftruncate</code> to create a Very Large\u2122 sparse file (i.e. with no blocks <em>actually</em> allocated) and use it in the very same way.</p>\n  \n  <p>Not all filesystems support sparse files, but all mainstream filesystems do (NTFS, ext2/3/4 etc.). Usually if sparse files aren't supported, <code>mmap</code> isn't supported either (think network filesystems or highlevel fuse drivers)</p>\n</blockquote>\n"}], "owner": {"reputation": 24928, "user_id": 997112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c52a3944cdd2eac9725e54fc548f368?s=128&d=identicon&r=PG", "display_name": "user997112", "link": "https://stackoverflow.com/users/997112/user997112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1526511413, "creation_date": 1526469360, "last_edit_date": 1526470798, "question_id": 50369461, "link": "https://stackoverflow.com/questions/50369461/check-boostinterprocessvector-has-enough-capacity-before-writing", "title": "Check boost::interprocess::vector has enough capacity before writing?", "body": "<p>I am using a shared vector to share objects across memory:</p>\n\n<pre><code>using ShmemAllocator = bip::allocator&lt;T, bip::managed_shared_memory::segment_manager&gt;;\nusing MyVector = bip::vector&lt;T, ShmemAllocator&gt;;\n\nbip::permissions perm;\nperm.set_unrestricted();\nsegment.reset(new bip::managed_shared_memory(bip::open_or_create, shared_memory_name, numBytes, 0, perm));\n\nconst ShmemAllocator alloc_inst(segment-&gt;get_segment_manager());\nvec = segment-&gt;find_or_construct&lt;MyVector&gt;(shared_vector_name)(alloc_inst);\n</code></pre>\n\n<p>Note the vector is created within a <code>managed_shared_memory</code> object and this is created by specifying a number of bytes, not number of vector elements.</p>\n\n<p>I then write elements to the vector:</p>\n\n<pre><code>int write(const std::vector&lt;T&gt;&amp; vec)\n{\n    bip::scoped_lock&lt;bip::named_mutex&gt; lock(*sdc.mutex);\n\n    for(const auto&amp; item : vec)\n    {\n        sdc.vec-&gt;push_back(item);\n    }\n\n    sdc.cond_empty-&gt;notify_all();\n}\n</code></pre>\n\n<p><strong>What is the safest way to check whether I have enough space to write all my elements, prior to writing?</strong> I would really like to avoid simply assigning a large number of bytes and hoping I never hit it!</p>\n"}, {"tags": ["c++", "mathematical-optimization"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 3, "creation_date": 1526470329, "post_id": 50369327, "comment_id": 87755340, "body": "I have a suspicion that the <code>operator&lt;</code> doesn&#39;t fulfill the requirements for an ordering of the elements. For example both when <code>i == domain.i</code> or when <code>i &gt; domain.i</code> we use the value of <code>j &lt; domain</code> as the result."}, {"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1526470436, "post_id": 50369327, "comment_id": 87755425, "body": "@BoPersson that&#39;s exactly it."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1526471334, "post_id": 50369327, "comment_id": 87756052, "body": "When run using Visual Studio 2017, a nasty &quot;debug assertion&quot; window pops up saying you have an invalid comparator.  Upvoting Mr. Persson."}], "answers": [{"tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": true, "score": 2, "last_activity_date": 1526472099, "creation_date": 1526472099, "answer_id": 50370397, "question_id": 50369327, "link": "https://stackoverflow.com/questions/50369327/c-map-template-does-not-insert/50370397#50370397", "title": "C++ map template does not insert", "body": "<p>Your <code>operator &lt;</code> doesn't satisfy <code>std::map</code>'s requirements. In particular, you can have a pair of <code>Domain</code>s that are both less than each other</p>\n\n<p>Consider </p>\n\n<pre><code>Domain A(\"1\", \"2\", 0);\nDomain B(\"2\", \"1\", 0);\n\nstd::cout &lt;&lt; std::boolalpha &lt;&lt; \"A &lt; B \" &lt;&lt; (A &lt; B) &lt;&lt; std::endl;\nstd::cout &lt;&lt; std::boolalpha &lt;&lt; \"B &lt; A \" &lt;&lt; (B &lt; A) &lt;&lt; std::endl;\n</code></pre>\n\n<p>The simplest way to synthesise a (total) order from a struct's members is to assemble them into a <a href=\"http://en.cppreference.com/w/cpp/utility/tuple/operator_cmp\" rel=\"nofollow noreferrer\"><code>std::tuple</code></a>, which forms a lexicographic order of the members.</p>\n\n<pre><code>bool Domain::operator&lt;( const Domain &amp; other ) {\n    return std::tie(i, j, q) &lt; std::tie(other.i, other.j, other.q);\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9798915, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GE9WMZ22z14/AAAAAAAAAAI/AAAAAAAAAIo/6Gk6YMKJOM8/photo.jpg?sz=128", "display_name": "Daniel Ram&#243;n Lumbierres", "link": "https://stackoverflow.com/users/9798915/daniel-ram%c3%b3n-lumbierres"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 50370397, "answer_count": 1, "score": -3, "last_activity_date": 1526472099, "creation_date": 1526469016, "question_id": 50369327, "link": "https://stackoverflow.com/questions/50369327/c-map-template-does-not-insert", "title": "C++ map template does not insert", "body": "<p>I'm using a map template called ITV with a defined struct as key value and a set of pairs of integers as map value. For any reason the insert command simply doesn't work for some key value.</p>\n\n<p>I have reduced my code to the smallest possible, but it is still large. It can be compiled and executed, and returns one line whenever one pair is added to the map value of some domain, indicating the key value and the size of the associated map value at that time.</p>\n\n<p>Unfortunately, at some point of the function <code>intervals()</code> (at case initial arc) the insert command does nothing:</p>\n\n<p><code>ITV[Domain(PairStr,q)].insert(make_pair(t,t)); // ERROR! DOES NOT WORK</code></p>\n\n<p>I guess this may be related to some internal ordering of the map class, because the error is made only whenever the <code>PairStr</code> is <code>(\"INI\", \"A\")</code>, the only case with <code>PairStr.first &gt; PairStr.second</code>, but I really don't have any idea about this. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;map&gt;\n#include &lt;iterator&gt;\n#include &lt;string&gt;\n#include &lt;set&gt;\n\nusing namespace std;\n\ntypedef set&lt;pair&lt;string,string&gt; &gt; SPS;\ntypedef set&lt;pair&lt;string,string&gt; &gt;::iterator SPSIt;\n\nstruct Domain {\n    string i;\n    string j;\n    int q;\n    Domain() : i(\"NaNode\"), j(\"NaNode\"), q(-1) {}\n    Domain(string oi, string oj, int oq) : i(oi), j(oj), q(oq) {}\n    Domain(pair&lt;string,string&gt; ops, int oq) : i(ops.first), j(ops.second), q(oq) {} \n    bool operator&lt; (Domain const &amp;domain) const {\n        return i &lt; domain.i || j &lt; domain.j || q &lt; domain.q;\n    }\n};\n\n// GRAPH STRUCTURE\nSPS ARCS, INIT_ARCS, DEST_ARCS, TOTAL_ARCS;\nmap&lt;Domain ,set&lt;pair&lt;int,int&gt; &gt; &gt; ITV;\n\n// TIME and SO ON\nint T_MAX, Q_MAX; // number of periods and stages\nvector&lt;int&gt; STG_first; // first and last period of stage q\nvector&lt;int&gt; STG_last;\n\nvoid intervals(){\n    pair&lt;string,string&gt; PairStr; // auxiliar variable\n\n    // loop for generating intervals\n    for(SPSIt it = TOTAL_ARCS.begin(); it != TOTAL_ARCS.end(); ++it)\n        for(int q = 0; q &lt; Q_MAX; ++q)\n            for(int t = STG_first[q]; t&lt;= STG_last[q]; ++t){\n                PairStr = *it;\n\n                // Case regular arc\n                if (ARCS.count(PairStr)){\n                    for(int v = t; v &lt;= STG_last[q]; ++v){\n                        ITV[Domain(PairStr,q)].insert(make_pair(t,v));\n                        cout &lt;&lt; \"Size of \" &lt;&lt; PairStr.first &lt;&lt; \"-\" &lt;&lt; PairStr.second &lt;&lt; \" at \" &lt;&lt; q &lt;&lt; \": \" &lt;&lt; ITV[Domain(PairStr,q)].size() &lt;&lt; endl;\n                    }\n                // Case initial arc\n                } else if (INIT_ARCS.count(PairStr)){\n                    ITV[Domain(PairStr,q)].insert(make_pair(t,t)); // ERROR! DOES NOT WORK\n                    cout &lt;&lt; \"Size of \" &lt;&lt; PairStr.first &lt;&lt; \"-\" &lt;&lt; PairStr.second &lt;&lt; \" at \" &lt;&lt; q &lt;&lt; \": \" &lt;&lt; ITV[Domain(PairStr,q)].size() &lt;&lt; endl;\n\n                // Case destination arc\n                } else if (DEST_ARCS.count(PairStr) &amp;&amp; q &gt; 0){\n                    ITV[Domain(PairStr,q)].insert(make_pair(t,t));\n                    cout &lt;&lt; \"Size of \" &lt;&lt; PairStr.first &lt;&lt; \"-\" &lt;&lt; PairStr.second &lt;&lt; \" at \" &lt;&lt; q &lt;&lt; \": \" &lt;&lt; ITV[Domain(PairStr,q)].size() &lt;&lt; endl;\n                }\n    }// end loop\n}// end intervals()\n\nint main (){\n    // read arcs\n    ARCS.insert(make_pair(\"A\", \"B\"));\n    TOTAL_ARCS.insert(make_pair(\"A\", \"B\"));\n    INIT_ARCS.insert( make_pair(\"INI\", \"A\"));\n    TOTAL_ARCS.insert(make_pair(\"INI\", \"A\"));\n    DEST_ARCS.insert( make_pair(\"B\", \"DES\"));\n    TOTAL_ARCS.insert(make_pair(\"B\", \"DES\"));\n\n    // read number of periods and stages\n    T_MAX = 3;\n    Q_MAX = 2;\n    STG_first = vector&lt;int&gt; (Q_MAX);\n    STG_last  = vector&lt;int&gt; (Q_MAX); \n    STG_first[0] = STG_last[0] = 0;\n    STG_first[1] = 1;\n    STG_last[1] = 2;\n\n    intervals();\n    return 0;\n}   // END main\n</code></pre>\n\n<p>The desired output would be the following:</p>\n\n<pre><code>Size of A-B at 0: 1\nSize of A-B at 1: 1\nSize of A-B at 1: 2\nSize of A-B at 1: 3\nSize of B-DES at 1: 1\nSize of B-DES at 1: 2\nSize of INI-A at 0: 1\nSize of INI-A at 1: 1\nSize of INI-A at 1: 2\n</code></pre>\n\n<p>But the current output is this one:</p>\n\n<pre><code>Size of A-B at 0: 1\nSize of A-B at 1: 1\nSize of A-B at 1: 2\nSize of A-B at 1: 3\nSize of B-DES at 1: 1\nSize of B-DES at 1: 2\nSize of INI-A at 0: 0\nSize of INI-A at 1: 0\nSize of INI-A at 1: 0\n</code></pre>\n\n<p>Sorry for the long post, I would appreciate any hint about this.</p>\n"}, {"tags": ["c++", "pointers", "visual-c++"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1526468926, "post_id": 50369243, "comment_id": 87754464, "body": "performance cost as compared to what?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1526468952, "post_id": 50369243, "comment_id": 87754487, "body": "just a matter of style (unless you use dependent name whereas <code>this-&gt;</code> or qualified name is required, but independent of performance anyway)."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1526469015, "post_id": 50369243, "comment_id": 87754525, "body": "Without using <code>this-&gt;</code> in the example code assignment <code>data = data;</code> will be noop."}, {"owner": {"reputation": 487, "user_id": 8522251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-s9k7l_b7xl8/AAAAAAAAAAI/AAAAAAAAABc/qCw_A2HJDsQ/photo.jpg?sz=128", "display_name": "Shivam Kushwaha", "link": "https://stackoverflow.com/users/8522251/shivam-kushwaha"}, "edited": false, "score": 0, "creation_date": 1526469058, "post_id": 50369243, "comment_id": 87754556, "body": "performance cost compared to not using this pointer and using other coding styles like m_variable"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1526471956, "post_id": 50369243, "comment_id": 87756490, "body": "<code>visited = false;</code> and <code>this-&gt;visited = false;</code> mean exactly the same thing, and there is no good reason for a compiler to generate different code."}], "answers": [{"comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1526469264, "post_id": 50369267, "comment_id": 87754683, "body": "I think it would be better to suggest to avoid name collisions by using prefixes for class member ."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1526469357, "post_id": 50369267, "comment_id": 87754748, "body": "@VTT: That&#39;s what I do, but it&#39;s by no means a universally accepted style. The Java guys seem to have explicitly moved towards it."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1526469518, "post_id": 50369267, "comment_id": 87754854, "body": "Well, using prefixes is definitely a better alternative to playing &quot;spot the missing this-&gt;&quot; game."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1526469853, "post_id": 50369267, "comment_id": 87755046, "body": "@VTT: I quite agree! It also means I can identify member variables in environments (such as vi) that don&#39;t have syntax highlighting."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1526470054, "post_id": 50369267, "comment_id": 87755167, "body": "...if your method requires you to scroll down till you dont see the parameter list then maybe the method is just too big ;)"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 6, "last_activity_date": 1526469581, "last_edit_date": 1526469581, "creation_date": 1526468827, "answer_id": 50369267, "question_id": 50369243, "link": "https://stackoverflow.com/questions/50369243/is-there-any-performance-cost-to-always-use-this-pointer-in-a-class/50369267#50369267", "title": "Is there any performance cost to always use this pointer in a class", "body": "<p>There is almost certainly no performance cost, unless you have a particularly bad compiler (or interpreter). The C++ standard does not explicitly say there <em>mustn't</em> be a performance cost, but then again it also refrains from stating the obvious to compiler writers.</p>\n\n<p><code>this-&gt;data</code> &amp;c. are merely syntactic sugar for the member variable of the current object: writing <code>data = data;</code> in the constructor body is essentially a no-op. Better still, write</p>\n\n<pre><code>Vertex::Vertex(int data) : data(data), visited(false)\n{\n}\n</code></pre>\n\n<p>where here the compiler is able to disambiguate the variables comprising <code>data(data)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 5994, "user_id": 5698738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tnZ9.jpg?s=128&g=1", "display_name": "Aganju", "link": "https://stackoverflow.com/users/5698738/aganju"}, "is_accepted": true, "score": 1, "last_activity_date": 1526511473, "creation_date": 1526511473, "answer_id": 50381075, "question_id": 50369243, "link": "https://stackoverflow.com/questions/50369243/is-there-any-performance-cost-to-always-use-this-pointer-in-a-class/50381075#50381075", "title": "Is there any performance cost to always use this pointer in a class", "body": "<p>The use of the <code>this-&gt;</code> pointer for dereferencing as shown is <em>optional</em>, and has absolutely no impact on the meaning or the code generated.</p>\n\n<p>There are people who think it's better readable, and people who think it's not, but that's the only difference.</p>\n\n<p>As others recommended, either way, chose a different name for the parameter than the member's name. The compiler will know what you mean, but humans will stumble over the identical names.</p>\n"}], "owner": {"reputation": 487, "user_id": 8522251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-s9k7l_b7xl8/AAAAAAAAAAI/AAAAAAAAABc/qCw_A2HJDsQ/photo.jpg?sz=128", "display_name": "Shivam Kushwaha", "link": "https://stackoverflow.com/users/8522251/shivam-kushwaha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 50381075, "answer_count": 2, "score": 2, "last_activity_date": 1526511473, "creation_date": 1526468748, "question_id": 50369243, "link": "https://stackoverflow.com/questions/50369243/is-there-any-performance-cost-to-always-use-this-pointer-in-a-class", "title": "Is there any performance cost to always use this pointer in a class", "body": "<p>Is there any performance cost to dereference <code>this-&gt;</code> pointer\nor is it okay to use.</p>\n\n<p>For example:-</p>\n\n<pre><code>Vertex::Vertex(int data)\n{\n    this-&gt;data = data;\n    this-&gt;visited = false;\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "video"], "comments": [{"owner": {"reputation": 214, "user_id": 863342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb19077f18294edf996885bde3266464?s=128&d=identicon&r=PG", "display_name": "Osama AlKoky", "link": "https://stackoverflow.com/users/863342/osama-alkoky"}, "edited": false, "score": 0, "creation_date": 1526816588, "post_id": 50369217, "comment_id": 87883016, "body": "Your code has a problem where every time you enter the loop you read a frame from each video and throw it away <code>cap &gt;&gt; frame;</code> and <code>cap.read(frame);</code> both do the same thing. <a href=\"https://docs.opencv.org/3.1.0/d8/dfe/classcv_1_1VideoCapture.html#a473055e77dd7faa4d26d686226b292c1\" rel=\"nofollow noreferrer\">docs.opencv.org/3.1.0/d8/dfe/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 9799648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/468af9a4e231e04272db20f5105864b8?s=128&d=identicon&r=PG&f=1", "display_name": "pingxiu", "link": "https://stackoverflow.com/users/9799648/pingxiu"}, "reply_to_user": {"reputation": 214, "user_id": 863342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb19077f18294edf996885bde3266464?s=128&d=identicon&r=PG", "display_name": "Osama AlKoky", "link": "https://stackoverflow.com/users/863342/osama-alkoky"}, "edited": false, "score": 0, "creation_date": 1528265837, "post_id": 50369217, "comment_id": 88435472, "body": "i already remove that but still got slow performance"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9799648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/468af9a4e231e04272db20f5105864b8?s=128&d=identicon&r=PG&f=1", "display_name": "pingxiu", "link": "https://stackoverflow.com/users/9799648/pingxiu"}, "edited": false, "score": 0, "creation_date": 1528266006, "post_id": 50369426, "comment_id": 88435545, "body": "i already tried to resizing the data, still no luck with stitching videos, it get really low FPS and also the result is not good"}], "tags": [], "owner": {"reputation": 5989, "user_id": 2283946, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wvjew.png?s=128&g=1", "display_name": "GPPK", "link": "https://stackoverflow.com/users/2283946/gppk"}, "is_accepted": false, "score": 0, "last_activity_date": 1526469291, "creation_date": 1526469291, "answer_id": 50369426, "question_id": 50369217, "link": "https://stackoverflow.com/questions/50369217/i-want-to-stitch-multiple-videos-with-opencv-in-c/50369426#50369426", "title": "I want to stitch multiple videos with openCV in C++", "body": "<p><strong>Yes, This is supposed to give you a very low framerate</strong></p>\n\n<p>I have done exactly this thing in the past, and I can tell you from experience that the Stitcher function takes <strong>forever</strong> to stitch three videos at the same time.</p>\n\n<p><strong>There are however ways to speed it up</strong></p>\n\n<p><a href=\"http://answers.opencv.org/question/12753/the-opencv-stitcher-is-very-slow/\" rel=\"nofollow noreferrer\">This answer</a> on opencv.org provides a few ways to get you started:</p>\n\n<ol>\n<li><p>The feature detection for each image is run within a for loop in the\nexample. This could be parellelised to run on multiple cores as\ngetting the features in each image is independent.</p></li>\n<li><p>There are appear to be some GPU capabilities for SURF and I think\nother places within Stitching.</p></li>\n<li><p>What resolution are you using for the image registration stage? Can\nthis be lowered without affecting performance?</p></li>\n<li><p>What resolution are you using for the composition stage? Can this be\nlowered and still give you adequate panorama? I've found that this\ncan affect performance a lot.</p></li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 9799648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/468af9a4e231e04272db20f5105864b8?s=128&d=identicon&r=PG&f=1", "display_name": "pingxiu", "link": "https://stackoverflow.com/users/9799648/pingxiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 820, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526469878, "creation_date": 1526468699, "last_edit_date": 1526469878, "question_id": 50369217, "link": "https://stackoverflow.com/questions/50369217/i-want-to-stitch-multiple-videos-with-opencv-in-c", "title": "I want to stitch multiple videos with openCV in C++", "body": "<p>Here is the thing:</p>\n\n<p>I wanted to stitch some video files using openCV in C++ environment.</p>\n\n<p>Here some code that I tried:</p>\n\n<pre><code>while (1)\n{\n    Mat frame,frame2,frame3,copy1,copy2,copy3;\n\n    vector&lt; Mat &gt; vFrame;\n\n    cap &gt;&gt; frame;\n    cap2 &gt;&gt; frame2;\n    cap3 &gt;&gt; frame3;\n    cap.read(frame);\n    resize(frame, frame, Size(320, 240), 0, 0, INTER_CUBIC);\n    cap2.read(frame2);\n    resize(frame2, frame2, Size(320, 240), 0, 0, INTER_CUBIC);\n    cap3.read(frame3);\n    resize(frame3, frame3, Size(320, 240), 0, 0, INTER_CUBIC);\n\n    frame.copyTo(copy1);\n    frame2.copyTo(copy2);\n    frame3.copyTo(copy3);\n\n    vFrame.push_back(copy1);\n    vFrame.push_back(copy2);\n    vFrame.push_back(copy3);\n\n    if (frame.empty())\n        break;\n    Stitcher stitcher = Stitcher::createDefault(true);\n\n    stitcher.stitch(vFrame, frame);\n\n    //video.write(frame);\n\n    imshow(\"Frame\", frame);\n\n }\n</code></pre>\n\n<p>It shows the needed ouput <strong>but</strong> I get really low FPS. I don't know why. Could anyone help? </p>\n\n<p>Can the <code>cv2::Stitcher::stitch</code> do really stitch multiple videos file or I must use another OpenCV method to read every frame of the videos and stitch it?</p>\n"}, {"tags": ["c++", "variadic-templates", "overload-resolution", "emplace"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1526470797, "post_id": 50369180, "comment_id": 87755691, "body": "<code>v.emplace({});</code> doesn&#39;t do what you expect: <code>{}</code>is used to construct <i><code>iterator</code></i>."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1526470821, "post_id": 50369180, "comment_id": 87755701, "body": "Alternatively, you might use <code>v.emplace_back();</code>."}], "answers": [{"tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 1, "last_activity_date": 1526469100, "last_edit_date": 1526469100, "creation_date": 1526469035, "answer_id": 50369330, "question_id": 50369180, "link": "https://stackoverflow.com/questions/50369180/stdmapemplace-fails-to-resolve-but-insert-of-rvalue-works-why/50369330#50369330", "title": "std::map::emplace fails to resolve, but insert of rvalue works -- why?", "body": "<p>Compiler is not able to deduce a type for <code>{}</code> because <code>emplace</code> is a vararg function. Enforce the type and it will work:</p>\n\n<pre><code>m.emplace(42, (std::vector&lt;size_t&gt;){}); \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 911, "user_id": 2788450, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Cw1q0.jpg?s=128&g=1", "display_name": "Jonas Greitemann", "link": "https://stackoverflow.com/users/2788450/jonas-greitemann"}, "edited": false, "score": 0, "creation_date": 1526470309, "post_id": 50369344, "comment_id": 87755326, "body": "I take this is somewhat of a shortcoming on part of C++? Because it is <i>possible</i> to infer the type of the brace expression and it works fine in <code>insert</code>. <code>emplace</code> <i>knows</i> the type it is trying to construct, so does the outer set of braces in the argument of <code>insert</code>."}, {"owner": {"reputation": 42863, "user_id": 577603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/70c19b44cc2eb6f1a87a08fc892c502b?s=128&d=identicon&r=PG", "display_name": "ComicSansMS", "link": "https://stackoverflow.com/users/577603/comicsansms"}, "reply_to_user": {"reputation": 911, "user_id": 2788450, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Cw1q0.jpg?s=128&g=1", "display_name": "Jonas Greitemann", "link": "https://stackoverflow.com/users/2788450/jonas-greitemann"}, "edited": false, "score": 0, "creation_date": 1526470860, "post_id": 50369344, "comment_id": 87755733, "body": "@Jonas There&#39;s really no way to know, in the general case. The problem here is that <a href=\"http://en.cppreference.com/w/cpp/utility/pair/pair\" rel=\"nofollow noreferrer\">any of the constructors of <code>std::pair</code></a> is a candidate here and there&#39;s quite some nasty stuff in there. In particular, some of the signatures need to accept arbitrary types, with the conversion to the final pair type only happening <i>inside</i> the constructor. Since <code>emplace</code> is supposed to work with everything that would work with one of the constructors, you are out of luck."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 3, "last_activity_date": 1526469075, "creation_date": 1526469075, "answer_id": 50369344, "question_id": 50369180, "link": "https://stackoverflow.com/questions/50369180/stdmapemplace-fails-to-resolve-but-insert-of-rvalue-works-why/50369344#50369344", "title": "std::map::emplace fails to resolve, but insert of rvalue works -- why?", "body": "<p>signature of <code>map::emplace</code> is</p>\n\n<pre><code>template&lt; class... Args &gt;\nstd::pair&lt;iterator,bool&gt; emplace( Args&amp;&amp;... args );\n</code></pre>\n\n<p>and <code>{}</code> has no type and cannot be deduced.</p>\n\n<p>You might use, for <code>emplace</code>:</p>\n\n<pre><code>m.emplace(42, std::vector&lt;std::size_t&gt;{});\n</code></pre>\n\n<p>For <code>insert</code>, (one of its) signature is:</p>\n\n<pre><code>std::pair&lt;iterator,bool&gt; insert( const value_type&amp; value );\n</code></pre>\n\n<p>so <code>{42, {}}</code> is used to construct <code>std::pair&lt;const int, std::vector&lt;size_t&gt;&gt;</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 911, "user_id": 2788450, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Cw1q0.jpg?s=128&g=1", "display_name": "Jonas Greitemann", "link": "https://stackoverflow.com/users/2788450/jonas-greitemann"}, "edited": false, "score": 0, "creation_date": 1526470014, "post_id": 50369384, "comment_id": 87755136, "body": "Good catch. I should have used <code>emplace_back</code> for the vector to make it a fair comparison. And sure enough, it fails with a similar error."}], "tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": false, "score": 2, "last_activity_date": 1526469193, "creation_date": 1526469193, "answer_id": 50369384, "question_id": 50369180, "link": "https://stackoverflow.com/questions/50369180/stdmapemplace-fails-to-resolve-but-insert-of-rvalue-works-why/50369384#50369384", "title": "std::map::emplace fails to resolve, but insert of rvalue works -- why?", "body": "<p>The signatures for <code>emplace</code> are different.</p>\n\n<p>For map</p>\n\n<pre><code>template&lt; class... Args &gt;\nstd::pair&lt;iterator,bool&gt; emplace( Args&amp;&amp;... args );\n</code></pre>\n\n<p>vs vector</p>\n\n<pre><code>template&lt; class... Args &gt;\niterator emplace( const_iterator pos, Args&amp;&amp;... args );\n</code></pre>\n\n<p>In the <code>map</code> case the compiler cannot deduce <code>Args</code> from <code>{}</code>, so it fails.</p>\n\n<p>For the <code>vector</code> it is much easier, as the first parameter in <code>v.emplace({});</code>is known to be a <code>const_iterator</code>. So <code>{}</code> can match a default constructed iterator.</p>\n"}], "owner": {"reputation": 911, "user_id": 2788450, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Cw1q0.jpg?s=128&g=1", "display_name": "Jonas Greitemann", "link": "https://stackoverflow.com/users/2788450/jonas-greitemann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 50369344, "answer_count": 3, "score": 2, "last_activity_date": 1526474219, "creation_date": 1526468572, "last_edit_date": 1526474219, "question_id": 50369180, "link": "https://stackoverflow.com/questions/50369180/stdmapemplace-fails-to-resolve-but-insert-of-rvalue-works-why", "title": "std::map::emplace fails to resolve, but insert of rvalue works -- why?", "body": "<p>Consider the following attempt to emplace an empty <code>vector</code> with a numeric key in a <code>map</code>:</p>\n\n<pre><code>#include &lt;map&gt;\n#include &lt;vector&gt;\n\nint main () {\n    std::map&lt;size_t, std::vector&lt;size_t&gt;&gt; m;\n    m.emplace(42, {});                          // FAILS\n    m.insert({42, {}});                         // WORKS\n}\n</code></pre>\n\n<p>The call to <code>emplace</code> fails to resolve:</p>\n\n<pre><code>error: no matching function for call to \u2018std::map&lt;long unsigned int, std::vector&lt;long unsigned int&gt; &gt;::emplace(int, &lt;brace-enclosed initializer list&gt;)\u2019\n     m.emplace(42, {});\n                     ^\nIn file included from /usr/include/c++/8/map:61,\n                 from map_emplace.cpp:1:\n/usr/include/c++/8/bits/stl_map.h:574:2: note: candidate: \u2018std::pair&lt;typename std::_Rb_tree&lt;_Key, std::pair&lt;const _Key, _Tp&gt;, std::_Select1st&lt;std::pair&lt;const _Key, _Tp&gt; &gt;, _Compare, typename __gnu_cxx::__alloc_traits&lt;_Alloc&gt;::rebind&lt;std::pair&lt;const _Key, _Tp&gt; &gt;::other&gt;::iterator, bool&gt; std::map&lt;_Key, _Tp, _Compare, _Alloc&gt;::emplace(_Args&amp;&amp; ...) [with _Args = {}; _Key = long unsigned int; _Tp = std::vector&lt;long unsigned int&gt;; _Compare = std::less&lt;long unsigned int&gt;; _Alloc = std::allocator&lt;std::pair&lt;const long unsigned int, std::vector&lt;long unsigned int&gt; &gt; &gt;; typename std::_Rb_tree&lt;_Key, std::pair&lt;const _Key, _Tp&gt;, std::_Select1st&lt;std::pair&lt;const _Key, _Tp&gt; &gt;, _Compare, typename __gnu_cxx::__alloc_traits&lt;_Alloc&gt;::rebind&lt;std::pair&lt;const _Key, _Tp&gt; &gt;::other&gt;::iterator = std::_Rb_tree_iterator&lt;std::pair&lt;const long unsigned int, std::vector&lt;long unsigned int&gt; &gt; &gt;]\u2019\n  emplace(_Args&amp;&amp;... __args)\n  ^~~~~~~\n/usr/include/c++/8/bits/stl_map.h:574:2: note:   candidate expects 0 arguments, 2 provided\n</code></pre>\n\n<p>Attempting to do the same thing with a vector of vectors works as expected (<strong>EDIT</strong>: not when using <code>emplace_back</code>, cf. Bo Persson's answer):</p>\n\n<pre><code>    std::vector&lt;std::vector&lt;size_t&gt;&gt; v;\n    v.emplace({});           // WORKS -- but does the wrong thing!\n    v.emplace_back({});      // FAILS\n    v.push_back({{}});       // WORKS\n</code></pre>\n\n<p>My rough understanding of the logic behind <code>emplace</code> is that the calls to <code>emplace</code> and <code>insert</code> should give the same result, the difference being that emplace requires neither move nor copy. For these types, there is not much harm in using the <code>insert</code> version, since the contents of the vector would be moved (and in this specific case, the vector is empty, anyway). In general though, why does this fail for <code>std::map::emplace</code>? Using GCC 8.1.</p>\n"}, {"tags": ["c++", "qt", "qtreeview", "qabstractitemmodel"], "comments": [{"owner": {"reputation": 1758, "user_id": 8724882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d88f8198fb4ae68267aced911e3533f9?s=128&d=identicon&r=PG&f=1", "display_name": "sandwood", "link": "https://stackoverflow.com/users/8724882/sandwood"}, "edited": false, "score": 0, "creation_date": 1526478805, "post_id": 50368201, "comment_id": 87761497, "body": "I don&#39;t think you are on the right path. By definition the fact that a node is expanded or not is managed by the view, the model has no knowledge on that.  So it should be better to look in the view API, for example this one and the others around bool QTreeView::isExpanded(const QModelIndex &amp;index) const"}], "answers": [{"tags": [], "owner": {"reputation": 1758, "user_id": 8724882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d88f8198fb4ae68267aced911e3533f9?s=128&d=identicon&r=PG&f=1", "display_name": "sandwood", "link": "https://stackoverflow.com/users/8724882/sandwood"}, "is_accepted": true, "score": 1, "last_activity_date": 1526481566, "creation_date": 1526481566, "answer_id": 50373812, "question_id": 50368201, "link": "https://stackoverflow.com/questions/50368201/qt-treeview-obtaining-number-of-total-rows-expanded-and-collapsed-folders-consi/50373812#50373812", "title": "Qt TreeView obtaining number of total rows, expanded and collapsed folders considered", "body": "<p>You can check for your view if every index is expanded or not. Then it's only a question of traversing the model. </p>\n\n<p>Credit of Kuba Order : \n<a href=\"https://stackoverflow.com/questions/39153835/how-to-loop-over-qabstractitemview-indexes\">How to loop over QAbstractItemView indexes?</a></p>\n\n<p>Based on his nice traversal function: </p>\n\n<pre><code>void iterate(const QModelIndex &amp; index, const QAbstractItemModel * model,\n             const std::function&lt;void(const QModelIndex&amp;, int)&gt; &amp; fun,\n             int depth = 0)\n{\n    if (index.isValid())\n        fun(index, depth);\n    if (!model-&gt;hasChildren(index)) return;\n    auto rows = model-&gt;rowCount(index);\n    auto cols = model-&gt;columnCount(index);\n    for (int i = 0; i &lt; rows; ++i)\n        for (int j = 0; j &lt; cols; ++j)\n            iterate(model-&gt;index(i, j, index), model, fun, depth+1);\n}\n</code></pre>\n\n<p>, you can easily write your need : </p>\n\n<pre><code>int countExpandedNode(QTreeView * view) {\n    int totalExpanded = 0;\n    iterate(view-&gt;rootIndex(), view-&gt;model(), [&amp;totalExpanded,view](const QModelIndex &amp; idx, int depth){\n        if (view-&gt;isExpanded(idx))\n            totalExpanded++;\n    });\n    return totalExpanded;\n}\n</code></pre>\n\n<p>calling code like that : </p>\n\n<pre><code>QTreeView view;\nview.setModel(&amp;model);\nview.setWindowTitle(QObject::tr(\"Simple Tree Model\"));\n\nview.expandAll();\nview.show();\n\n\nqDebug() &lt;&lt; \"total expanded\" &lt;&lt; countExpandedNode(&amp;view);\n</code></pre>\n\n<p>I've tested it quickly on the Qt TreeModel example, it seems to work.</p>\n"}], "owner": {"reputation": 2145, "user_id": 1478315, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/k8wlG.jpg?s=128&g=1", "display_name": "mozcelikors", "link": "https://stackoverflow.com/users/1478315/mozcelikors"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 712, "favorite_count": 0, "accepted_answer_id": 50373812, "answer_count": 1, "score": 1, "last_activity_date": 1615545907, "creation_date": 1526465814, "last_edit_date": 1615545907, "question_id": 50368201, "link": "https://stackoverflow.com/questions/50368201/qt-treeview-obtaining-number-of-total-rows-expanded-and-collapsed-folders-consi", "title": "Qt TreeView obtaining number of total rows, expanded and collapsed folders considered", "body": "<p>I am dealing with a Qt application in which I would like to retrieve the total number of navigatable rows in a Directory/Filesystem model-like tree. That means if a folder is expanded its count is added, if a folder is collapsed its count is not added. As a whole, I want to be able to retrieve the number of every row that is expanded and available. As far as I could see, there is not such an implementation easy to find online. Two solutions that did not work yet:</p>\n<pre><code>int MainWindow::countRowsOfIndex_treeview( const QModelIndex &amp; index )\n{\n    int count = 0;\n    const QAbstractItemModel* model = index.model();\n    int rowCount = model-&gt;rowCount(index);\n    count += rowCount;\n    for( int r = 0; r &lt; rowCount; ++r )\n        count += countRowsOfIndex_treeview( model-&gt;index(r,0,index) );\n    return count;\n}\n</code></pre>\n<p>This is not even close to what I want to achieve as it does not consider the unexpanded folders.</p>\n<p>So far, I have been dealing with the one-level row count using:</p>\n<pre><code>ui-&gt;treeView-&gt;model()-&gt;rowCount(ui-&gt;treeView-&gt;currentIndex().parent())\n</code></pre>\n<p>However, this does not count the unexpanded childs and so on. I hope my question is clear. Any help is appreciated. I'm willing to give any more information if requested. Thanks.</p>\n"}, {"tags": ["c++", "pointers", "reference"], "answers": [{"tags": [], "owner": {"reputation": 955, "user_id": 9500171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dDeAV.jpg?s=128&g=1", "display_name": "Ian A.B. King", "link": "https://stackoverflow.com/users/9500171/ian-a-b-king"}, "is_accepted": false, "score": 2, "last_activity_date": 1526465968, "creation_date": 1526465968, "answer_id": 50368249, "question_id": 50368155, "link": "https://stackoverflow.com/questions/50368155/function-changes-reference-without-purpose/50368249#50368249", "title": "Function changes reference without purpose", "body": "<p>On the last picture, the debugger is out of the scope of the function, therefore the arguments passed should have already been discarded (<code>node</code> doesn't exist anymore).</p>\n\n<p>The value of <code>Node** ptrlow</code> remains the same, as expected.</p>\n"}, {"tags": [], "owner": {"reputation": 17, "user_id": 8066600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b8dce16df3d9d7cc24da66b7d786e69?s=128&d=identicon&r=PG&f=1", "display_name": "Mateusz T\u0119gowski", "link": "https://stackoverflow.com/users/8066600/mateusz-t%c4%99gowski"}, "is_accepted": false, "score": 0, "last_activity_date": 1526466910, "creation_date": 1526466910, "answer_id": 50368599, "question_id": 50368155, "link": "https://stackoverflow.com/questions/50368155/function-changes-reference-without-purpose/50368599#50368599", "title": "Function changes reference without purpose", "body": "<p>I know it should remain the same, but look, it really changes :\n<a href=\"https://i.stack.imgur.com/TMoOB.png\" rel=\"nofollow noreferrer\">Compare this screen with the first one</a></p>\n"}, {"tags": [], "owner": {"reputation": 17, "user_id": 8066600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b8dce16df3d9d7cc24da66b7d786e69?s=128&d=identicon&r=PG&f=1", "display_name": "Mateusz T\u0119gowski", "link": "https://stackoverflow.com/users/8066600/mateusz-t%c4%99gowski"}, "is_accepted": false, "score": 0, "last_activity_date": 1526468184, "creation_date": 1526468184, "answer_id": 50369047, "question_id": 50368155, "link": "https://stackoverflow.com/questions/50368155/function-changes-reference-without-purpose/50369047#50369047", "title": "Function changes reference without purpose", "body": "<p>I tried putting some lines of code, DeleteNode function, had a lot of them.</p>\n\n<p><a href=\"https://i.stack.imgur.com/iKHPu.png\" rel=\"nofollow noreferrer\">DeleteNode function at the beggining</a> </p>\n\n<p><a href=\"https://i.stack.imgur.com/sVx8Y.png\" rel=\"nofollow noreferrer\">DeleteNode function one step further; node changed</a></p>\n"}], "owner": {"reputation": 17, "user_id": 8066600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b8dce16df3d9d7cc24da66b7d786e69?s=128&d=identicon&r=PG&f=1", "display_name": "Mateusz T\u0119gowski", "link": "https://stackoverflow.com/users/8066600/mateusz-t%c4%99gowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "closed_date": 1526481774, "answer_count": 3, "score": 0, "last_activity_date": 1526468184, "creation_date": 1526465696, "question_id": 50368155, "link": "https://stackoverflow.com/questions/50368155/function-changes-reference-without-purpose", "closed_reason": "Needs details or clarity", "title": "Function changes reference without purpose", "body": "<p>I have a code:</p>\n\n<pre><code>Node** ptrlow = ReturnLowest(root); ///pointer po pointer pointing lowest\n//DeleteNode(ptrlow);\nTest(ptrlow);\n</code></pre>\n\n<p>I think that what this code does is not important, the important thing is that, when I realised that function DeleteNode(Node** &amp;node) changes a value of ptrlow without any purpose, I created the function called Test:</p>\n\n<pre><code>void Test(Node** &amp;node)\n{\n    return;\n}\n</code></pre>\n\n<p>That is really the whole function, it does nothing more, yet it changes the value of ptrlow, which is passed to that function. </p>\n\n<p>Before entering the Test function:\n<a href=\"https://i.stack.imgur.com/mnw7E.png\" rel=\"nofollow noreferrer\">link to screen from visual studio</a>\nAfter entering:\n<a href=\"https://i.stack.imgur.com/TIHS3.png\" rel=\"nofollow noreferrer\">link to screen from visual studio</a>\nOne step more in debugger, a node changes:\n<a href=\"https://i.stack.imgur.com/JzfgD.png\" rel=\"nofollow noreferrer\">link to screen from visual studio</a></p>\n\n<p>Can someone explain to me how is that possible? I would be very grateful!</p>\n"}, {"tags": ["c++", "string", "inputstream", "cin"], "comments": [{"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 1, "creation_date": 1526464824, "post_id": 50367830, "comment_id": 87751789, "body": "code. add some code."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1526464931, "post_id": 50367830, "comment_id": 87751850, "body": "<a href=\"http://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\">std::getline</a>"}, {"owner": {"reputation": 5144, "user_id": 1856429, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/AiPnN.jpg?s=128&g=1", "display_name": "Eduard Rostomyan", "link": "https://stackoverflow.com/users/1856429/eduard-rostomyan"}, "reply_to_user": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1526465077, "post_id": 50367830, "comment_id": 87751941, "body": "Its nut a duplicate @Tas!!!!! I want to cin a std::string not char[] and I have mentioned that!!!!"}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 3, "creation_date": 1526465163, "post_id": 50367830, "comment_id": 87752003, "body": "Sorry I wasn&#39;t clear enough when I said <i>read all the answers</i>. If you scroll down just a little further beneath the accepted answer, you should find <a href=\"https://stackoverflow.com/a/5838803/4143855\">an answer there that helps you</a>"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1526465206, "post_id": 50367830, "comment_id": 87752040, "body": "@EduardRostomyan That&#39;s why he suggested to read all of the answers. Use <code>std::getline</code>. It&#39;s not the same as <code>std::cin::getline</code>."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1526465208, "post_id": 50367830, "comment_id": 87752042, "body": "About my edit: did I get your intent correctly?"}, {"owner": {"reputation": 5144, "user_id": 1856429, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/AiPnN.jpg?s=128&g=1", "display_name": "Eduard Rostomyan", "link": "https://stackoverflow.com/users/1856429/eduard-rostomyan"}, "reply_to_user": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1526465306, "post_id": 50367830, "comment_id": 87752113, "body": "ouch, my bad @Tas, ty"}], "answers": [{"tags": [], "owner": {"reputation": 1356, "user_id": 9657552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ksHjQ.png?s=128&g=1", "display_name": "Alexey Usachov", "link": "https://stackoverflow.com/users/9657552/alexey-usachov"}, "is_accepted": false, "score": 0, "last_activity_date": 1526464960, "creation_date": 1526464960, "answer_id": 50367898, "question_id": 50367830, "link": "https://stackoverflow.com/questions/50367830/cin-stdstring-with-spaces/50367898#50367898", "title": "cin std::string with spaces", "body": "<p>Use <code>std::getline</code>, like this:</p>\n\n<pre><code>std::string InputWithSpaces;\nstd::getline (std::cin,InputWithSpaces);\nstd::cout &lt;&lt; InputWithSpaces &lt;&lt; std::endl; //test 1 2 3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": true, "score": 6, "last_activity_date": 1526466700, "last_edit_date": 1526466700, "creation_date": 1526465082, "answer_id": 50367944, "question_id": 50367830, "link": "https://stackoverflow.com/questions/50367830/cin-stdstring-with-spaces/50367944#50367944", "title": "cin std::string with spaces", "body": "<p>Your premise is wrong: <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\"><code>std::getline</code></a> does work with <code>std::string</code>:</p>\n\n<pre><code>template&lt; class CharT, class Traits, class Allocator &gt;\nstd::basic_istream&lt;CharT,Traits&gt;&amp; getline( std::basic_istream&lt;CharT,Traits&gt;&amp; input,\n                                           std::basic_string&lt;CharT,Traits,Allocator&gt;&amp; str,\n                                           CharT delim );\n</code></pre>\n\n<p>This means you can read from <code>std::cin</code> to an <code>std::string</code> until a given delimiter:</p>\n\n<pre><code>std::string destination;\nstd::getline(std::cin, destination, '|');\n</code></pre>\n\n<p>(<code>'|'</code> taken as an exemple delimiter)</p>\n\n<hr>\n\n<p><strong>Note</strong>: you should check <code>getline</code>'s return before reading from <code>destination</code>. <code>getline</code> returns a reference to <code>std::cin</code> which can be converted to a <code>bool</code> whose value is <code>true</code> if the stream is in a correct state:</p>\n\n<pre><code>if (std::getline(std::cin, destination, '|') == false) {\n    // error handling\n}\n</code></pre>\n"}], "owner": {"reputation": 5144, "user_id": 1856429, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/AiPnN.jpg?s=128&g=1", "display_name": "Eduard Rostomyan", "link": "https://stackoverflow.com/users/1856429/eduard-rostomyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2107, "favorite_count": 0, "closed_date": 1526466026, "accepted_answer_id": 50367944, "answer_count": 2, "score": 1, "last_activity_date": 1526466700, "creation_date": 1526464763, "last_edit_date": 1526465187, "question_id": 50367830, "link": "https://stackoverflow.com/questions/50367830/cin-stdstring-with-spaces", "closed_reason": "Duplicate", "title": "cin std::string with spaces", "body": "<p>I want to read an <code>std::string</code> named <code>destination</code> from <code>std::cin</code> until a given delimiter. By default, <code>std::istream::operator&lt;&lt;</code> interrupts after a space when I do <code>destination &lt;&lt; std::cin</code>. If <code>destination</code> were a <code>char[]</code>, I could use <code>std::getline</code>.</p>\n\n<p>What do we use for <code>std::string?</code> </p>\n"}, {"tags": ["c++", "mfc", "dialog"], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 9370102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ddfc4593b2ab490cbf6af971dfad6d?s=128&d=identicon&r=PG&f=1", "display_name": "Lozah", "link": "https://stackoverflow.com/users/9370102/lozah"}, "is_accepted": true, "score": 0, "last_activity_date": 1526465828, "last_edit_date": 1592644375, "creation_date": 1526465828, "answer_id": 50368203, "question_id": 50367763, "link": "https://stackoverflow.com/questions/50367763/retrieve-radio-input-value-in-a-cdhtmldialog-based-application/50368203#50368203", "title": "Retrieve radio input value in a CDHtmlDialog based application", "body": "<p>Uh ... I tried with radio's name and it worked :</p>\n<pre><code>DDX_DHtml_Radio(pDX, _T(&quot;http-switch&quot;), httpSwitchValue);\n</code></pre>\n<p>the only microsoft documentation is unclear ...</p>\n<blockquote>\n<p>szId</p>\n<p>The value that you specified for the HTML control's ID parameter.</p>\n</blockquote>\n<p>I'd mark this as an answer as I saw many posts on the internet about it without any answer</p>\n"}], "owner": {"reputation": 61, "user_id": 9370102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ddfc4593b2ab490cbf6af971dfad6d?s=128&d=identicon&r=PG&f=1", "display_name": "Lozah", "link": "https://stackoverflow.com/users/9370102/lozah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 50368203, "answer_count": 1, "score": 1, "last_activity_date": 1526465828, "creation_date": 1526464612, "question_id": 50367763, "link": "https://stackoverflow.com/questions/50367763/retrieve-radio-input-value-in-a-cdhtmldialog-based-application", "title": "Retrieve radio input value in a CDHtmlDialog based application", "body": "<p>I'm working on a MFC application based on html dialogs.</p>\n\n<p>I've encountered lot of struggle for exchanging datas between the html and the c++ code, but I finally managed to make it working.\nI'm retrieving without any problems values from text inputs (<code>DDX_DHtml_ElementText()</code>), selects (<code>DDX_DHtml_SelectValue()</code>), checkboxes (<code>DDX_DHtml_CheckBox()</code>) but I can't find out how to get the value from a radio input ...</p>\n\n<p>I don't understand how to use the <code>DDX_DHtml_Radio()</code> method.</p>\n\n<pre><code>void DDX_DHtml_Radio( \n   CDataExchange* pDX, \n   LPCTSTR szId, \n   long&amp; value  \n);\n</code></pre>\n\n<p>I guess <code>value</code> will store 0, 1, 2 etc. according to the checked radio input,\nbut what do I have to store in the <code>szId</code> ? I imagine it needs the id of the html element that group all the radio buttons, but there is zero documentation or zero example about it ... I've tried with the input id but value is still null.</p>\n\n<p>in html I just have :</p>\n\n<pre><code>&lt;input id=\"radio-https\" type=\"radio\" name=\"http-switch\" value=\"https\"/&gt;\n&lt;input id=\"radio-http\" type=\"radio\" name=\"http-switch\" value=\"http\" checked=\"checked\"/&gt;\n</code></pre>\n"}, {"tags": ["c++", "casting", "function-pointers"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 2, "creation_date": 1526464627, "post_id": 50367631, "comment_id": 87751645, "body": "Please post complete error message. I suspect that <code>NewProfile</code> is a non-static member function or something else."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1526464635, "post_id": 50367631, "comment_id": 87751651, "body": "does <code>(void*)&amp;NewProfile</code> work better?"}, {"owner": {"reputation": 11, "user_id": 9787198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cf6e2038d77967f72d1b1b66bee0055?s=128&d=identicon&r=PG&f=1", "display_name": "Citdar", "link": "https://stackoverflow.com/users/9787198/citdar"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1526465671, "post_id": 50367631, "comment_id": 87752325, "body": "Hi @VTT. Unfortunately that&#39;s the complete error message, sorry. However you were right with your assumption... I declared my function as static and now it works! Great! EDIT: I&#39;m a new user so I can&#39;t upvote your comment, can you please write it on a answer? Thanks"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1526465829, "post_id": 50367631, "comment_id": 87752421, "body": "Just a wild guess: Is it the <code>m_pLLT1</code> which causes the error? What type does it have? (May be, you need a <code>(void*)</code> for it as well.)"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1526465914, "post_id": 50367631, "comment_id": 87752478, "body": "Which compiler are you using? Common compilers (g++, clang++ vc++) should output longer error message with error category. Please post complete build log then."}, {"owner": {"reputation": 11, "user_id": 9787198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cf6e2038d77967f72d1b1b66bee0055?s=128&d=identicon&r=PG&f=1", "display_name": "Citdar", "link": "https://stackoverflow.com/users/9787198/citdar"}, "edited": false, "score": 0, "creation_date": 1526465928, "post_id": 50367631, "comment_id": 87752487, "body": "The error underlines the function type. <code>m_pLLT1</code> is okay"}, {"owner": {"reputation": 11, "user_id": 9787198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cf6e2038d77967f72d1b1b66bee0055?s=128&d=identicon&r=PG&f=1", "display_name": "Citdar", "link": "https://stackoverflow.com/users/9787198/citdar"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1526466032, "post_id": 50367631, "comment_id": 87752564, "body": "@VTT is IntelliSense who is giving me the error, and there&#39;s not a longer log. I&#39;m sure about this."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1526466043, "post_id": 50367631, "comment_id": 87752575, "body": "1. Don&#39;t trust IntelliSense. (Trust compiler output only.)  2. I remember having searched desperately type mismatch errors in VS2013 until I realized that the reported positions are sometimes... hmm... a little bit unprecise."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1526466051, "post_id": 50367631, "comment_id": 87752580, "body": "There is never any necessity to cast anything to <code>void *</code> in C++, except as a halfway-house to another cast. It is already an implicit cast. Any code you may find to the contrary is evidence of lack of understanding."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1526466165, "post_id": 50367631, "comment_id": 87752653, "body": "You can find real log in the <code>Output</code> window. IntelliSense is certainly far from perfect but it should not complain about this spot if it properly compiles."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1526466270, "post_id": 50367631, "comment_id": 87752727, "body": "@VTT In our productive projects, IntelliSense complains about a few things which compile <i>perfectly</i> (without even any warning). ;-)"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1526466730, "post_id": 50367631, "comment_id": 87753028, "body": "@Scheff It may even crash on some code, however in general I find it rather reliable. From my experience most of errors originate from  incorrect project configuration, circular / missing / indirect includes."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1526467166, "post_id": 50367631, "comment_id": 87753303, "body": "When you cast a function pointer, you\u2019re almost certainly doing something wrong.  What\u2019s the prototype of <code>RegisterCallback</code>?"}, {"owner": {"reputation": 11, "user_id": 9787198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cf6e2038d77967f72d1b1b66bee0055?s=128&d=identicon&r=PG&f=1", "display_name": "Citdar", "link": "https://stackoverflow.com/users/9787198/citdar"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1526467562, "post_id": 50367631, "comment_id": 87753578, "body": "@molbdnilo do you mean the declaration? In that case, it&#39;s the first code."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1526467814, "post_id": 50367631, "comment_id": 87753741, "body": "Please, <b>compile</b> the resp. file and copy/paste the error log message of the <b>compiler</b> regarding this. You will find it in the <code>Output</code> tab of VS."}, {"owner": {"reputation": 4783, "user_id": 3233921, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c91a2bba49841086eb1b85d219f0c2c2?s=128&d=identicon&r=PG", "display_name": "mindriot", "link": "https://stackoverflow.com/users/3233921/mindriot"}, "edited": false, "score": 0, "creation_date": 1526467884, "post_id": 50367631, "comment_id": 87753793, "body": "Maybe it&#39;s just a copy-paste error in your post, but I see <code>_stdcall</code> and <code>__stdcall</code>. Do you have the correct amount of underscores in your actual code?"}, {"owner": {"reputation": 11, "user_id": 9787198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cf6e2038d77967f72d1b1b66bee0055?s=128&d=identicon&r=PG&f=1", "display_name": "Citdar", "link": "https://stackoverflow.com/users/9787198/citdar"}, "reply_to_user": {"reputation": 4783, "user_id": 3233921, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c91a2bba49841086eb1b85d219f0c2c2?s=128&d=identicon&r=PG", "display_name": "mindriot", "link": "https://stackoverflow.com/users/3233921/mindriot"}, "edited": false, "score": 0, "creation_date": 1526467967, "post_id": 50367631, "comment_id": 87753843, "body": "@mindriot yes, always two. Was a copypaste error."}, {"owner": {"reputation": 11, "user_id": 9787198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cf6e2038d77967f72d1b1b66bee0055?s=128&d=identicon&r=PG&f=1", "display_name": "Citdar", "link": "https://stackoverflow.com/users/9787198/citdar"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1526468009, "post_id": 50367631, "comment_id": 87753872, "body": "Thanks to everybody, this issue is solved as I said to @VTT"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1526468393, "post_id": 50367631, "comment_id": 87754115, "body": "@Citdar I missed that, sorry. That&#39;s a pretty strange interface - the second parameter would normally be a function pointer of the appropriate type. That is, one would expect it to be <code>TNewProfile_s</code>, not <code>void*</code>."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1526468402, "post_id": 50367631, "comment_id": 87754120, "body": "<i>I declared my function as static and now it works!</i> If it is a pure function this shouldn&#39;t have any effect (concerning the reported issue). It would make sense if it is a class function. But if it is a class function would it work without preceding class scope? I have somehow the feeling that you left out something essential..."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1526472489, "post_id": 50367631, "comment_id": 87756901, "body": "@EJP -- &quot;There is never any necessity to cast anything to void *&quot; -- a function pointer cannot be implicitly converted to a data pointer, <code>void*</code> or otherwise. That&#39;s partly because a function pointer does not have to be the same size as a data pointer, and allowing an implicit conversion could produce an invalid pointer."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1526554037, "post_id": 50367631, "comment_id": 87794475, "body": "@PeteBecker Exactly, so there is never any necessity to do it."}, {"owner": {"reputation": 11, "user_id": 9787198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cf6e2038d77967f72d1b1b66bee0055?s=128&d=identicon&r=PG&f=1", "display_name": "Citdar", "link": "https://stackoverflow.com/users/9787198/citdar"}, "edited": false, "score": 0, "creation_date": 1526572442, "post_id": 50367631, "comment_id": 87807276, "body": "The cause of using (void *) is because the API from library indicates this kind of use. I&#39;m agree with you, is a strange interface"}], "owner": {"reputation": 11, "user_id": 9787198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cf6e2038d77967f72d1b1b66bee0055?s=128&d=identicon&r=PG&f=1", "display_name": "Citdar", "link": "https://stackoverflow.com/users/9787198/citdar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 322, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1526468054, "creation_date": 1526464281, "last_edit_date": 1526468054, "question_id": 50367631, "link": "https://stackoverflow.com/questions/50367631/cast-function-pointer-to-void", "title": "Cast function pointer to (void*)", "body": "<p>I have a simple question which is breaking my mind.\nOn my solution, I'm working with a DLL that offers me the following function:</p>\n\n<pre><code>int RegisterCallback(TCallbackType CallbackType, void *pLLTProfileCallback, void *pUserData);\n</code></pre>\n\n<p>For more information, the parameter pLLTProfileCallback is a function type defined as:</p>\n\n<pre><code>typedef void (__stdcall *TNewProfile_s)(const unsigned char *pData,\nunsigned int nSize, void *pUserData);\n</code></pre>\n\n<p>I'm trying to insert my function 'NewProfile' in this parameter as follows:</p>\n\n<pre><code>RegisterCallback(STD_CALL, (void*)NewProfile, m_pLLT1);\n</code></pre>\n\n<p>But it says: 'Error: invalid type conversion'.</p>\n\n<p>The function definition for 'NewProfile' is:</p>\n\n<pre><code>void __stdcall NewProfile(const unsigned char* pucData, unsigned int uiSize, void* pUserData){...}\n</code></pre>\n\n<p>Where is my error exactly? What can I do in order to fix it?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 3, "creation_date": 1526464299, "post_id": 50367602, "comment_id": 87751401, "body": "<code>stuff = new QStuff(this);</code> would be invalid because <code>stuff</code> is not a pointer. Also see <a href=\"http://doc.qt.io/qt-5/objecttrees.html\" rel=\"nofollow noreferrer\">QT Object Trees &amp; Ownership</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "is_accepted": false, "score": 1, "last_activity_date": 1526464733, "creation_date": 1526464733, "answer_id": 50367818, "question_id": 50367602, "link": "https://stackoverflow.com/questions/50367602/should-destructor-be-called-on-member-objects/50367818#50367818", "title": "Should destructor be called on member objects", "body": "<p>No, you do not need to delete member objects. They will get destroyed automatically when the parent class object gets destroyed.</p>\n\n<p>See this <a href=\"https://isocpp.org/wiki/faq/dtors#calling-member-dtors\" rel=\"nofollow noreferrer\">FAQ</a>.</p>\n\n<p>In the case of Qt QObject pointer members, then the parent is the owner and is responsible for deleting the QObject. See <a href=\"http://doc.qt.io/archives/qt-4.8/objecttrees.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1038, "user_id": 9636903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DZZnv.png?s=128&g=1", "display_name": "Gabriella Giordano", "link": "https://stackoverflow.com/users/9636903/gabriella-giordano"}, "is_accepted": true, "score": 4, "last_activity_date": 1526466112, "creation_date": 1526466112, "answer_id": 50368304, "question_id": 50367602, "link": "https://stackoverflow.com/questions/50367602/should-destructor-be-called-on-member-objects/50368304#50368304", "title": "Should destructor be called on member objects", "body": "<p>For the first question yes. You can check the Qt docs <a href=\"http://doc.qt.io/qt-5/qobject.html#details\" rel=\"nofollow noreferrer\">here</a> \nwhere it is stated clearly: </p>\n\n<blockquote>\n  <p>QObjects organize themselves in object trees. When you create a\n  QObject with another object as parent, the object will automatically\n  add itself to the parent's children() list. The parent takes ownership\n  of the object; i.e., it will automatically delete its children in its\n  destructor. You can look for an object by name and optionally type\n  using findChild() or findChildren().</p>\n</blockquote>\n\n<p>For the second question, the answer deserves a little bit more of explanation. If you have QObject pointers members that are not children of your object, you have to handle their disposal manually in the destructor of your class.</p>\n\n<p>You can in theory use <code>delete</code> on any QObject* to invoke its destructor, but since Qt objects have a powerfull event system based on signals/slots, you must be aware of the interactions with event loops. If you brutally delete a QObject connected to another QObject while the latter one is still processing a signal coming from the first one, you may end up with some problems. </p>\n\n<p>This holds in both mono and multi-threaded applications. You should therefore avoid the use of <code>delete</code> in favor of <a href=\"http://doc.qt.io/qt-5/qobject.html#deleteLater\" rel=\"nofollow noreferrer\">QObject::deleteLater()</a> that will defer the deletion of the QObject until all the signal/slots related to it have been processed.  </p>\n\n<p>Lastly, in the context of the implementation of a destructor it doesn't really matter if you set the pointer to null, because it will be unavailable for further use anyway. It may be important if you delete the pointee in some other method, while your instance is still alive, and you set the pointer to null to flag it as uninitialized.</p>\n"}], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "closed_date": 1526487528, "accepted_answer_id": 50368304, "answer_count": 2, "score": -2, "last_activity_date": 1526466112, "creation_date": 1526464170, "question_id": 50367602, "link": "https://stackoverflow.com/questions/50367602/should-destructor-be-called-on-member-objects", "closed_reason": "Duplicate", "title": "Should destructor be called on member objects", "body": "<p>When looking at Qt examples (on Qt documentation like <a href=\"http://doc.qt.io/qt-5/qtwidgets-widgets-movie-movieplayer-cpp.html\" rel=\"nofollow noreferrer\">movieplayer example</a>, or <a href=\"https://stackoverflow.com/a/46219956/1212012\">here</a>), I never see the member destructors explicitly called.</p>\n\n<p>A class definition is like:</p>\n\n<pre><code>class foo : public QParent {\n    Q_OBJECT\n    QStuff stuff;\n    foo (QWidget *parent) : QParent(parent)\n    {\n         stuff = new QStuff(this);\n    }\n}; \n</code></pre>\n\n<p>My problem is that I never see something like <code>delete stuff;</code></p>\n\n<p>So my questions are:</p>\n\n<ul>\n<li><p>Are <code>QObject</code> derived class instances which <code>parent</code> is not <code>NULL</code> automatically deleted when their parent is?</p></li>\n<li><p>Is it dangerous to delete a <code>QObject</code> derived member without setting it to <code>NULL</code>?</p></li>\n</ul>\n\n<p>I guess the answers are Yes and No, but I'm not sure.</p>\n"}, {"tags": ["c++", "stdvector", "noexcept", "bad-alloc"], "comments": [{"owner": {"reputation": 40055, "user_id": 545127, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RJgJM.png?s=128&g=1", "display_name": "Raedwald", "link": "https://stackoverflow.com/users/545127/raedwald"}, "edited": false, "score": 1, "creation_date": 1526463043, "post_id": 50367125, "comment_id": 87750508, "body": "There is a <a href=\"https://stackoverflow.com/questions/19930011/can-the-default-constructor-of-stdlistint-throw\">related question about <code>std::list</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "edited": false, "score": 0, "creation_date": 1526463495, "post_id": 50367240, "comment_id": 87750834, "body": "That does not make sense to me, at least, in &#39;normal&#39; implementations, the default allocator for std::vector could run out of heap memory and throw, right? The only way the vector constructor can be noexcept is if the allocator is noexcept. What am I missing?"}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "edited": false, "score": 0, "creation_date": 1526463715, "post_id": 50367240, "comment_id": 87750961, "body": "@ErikAlap&#228;&#228; You missed nothing. Yes it depends on the <code>Allocator</code>; and if <code>std::allocator</code> is used then it won&#39;t throw for default construction; which is guaranteed."}, {"owner": {"reputation": 40055, "user_id": 545127, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RJgJM.png?s=128&g=1", "display_name": "Raedwald", "link": "https://stackoverflow.com/users/545127/raedwald"}, "edited": false, "score": 0, "creation_date": 1526463904, "post_id": 50367240, "comment_id": 87751060, "body": "Although <i>explicitly</i> required to be <code>noexcept</code> only from C++17, is it implicitly <code>noexcept</code> in earlier C++ versions?"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 6, "creation_date": 1526464283, "post_id": 50367240, "comment_id": 87751382, "body": "Before C++17, the default constructor of vector didn&#39;t have a throw specification, which means it was permitted to throw.   Same for the standard allocator.    Practically, if the default constructor didn&#39;t actually allocate, it wouldn&#39;t throw - and that has always been a common implementation choice, even if not specifically required."}], "tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": true, "score": 14, "last_activity_date": 1526477480, "last_edit_date": 1526477480, "creation_date": 1526463264, "answer_id": 50367240, "question_id": 50367125, "link": "https://stackoverflow.com/questions/50367125/can-the-stdvector-default-constructor-throw-an-exception/50367240#50367240", "title": "Can the std::vector default constructor throw an exception", "body": "<p>It depends on the default constructor of <code>Allocator</code>. The default constructor of <a href=\"https://en.cppreference.com/w/cpp/container/vector/vector\" rel=\"noreferrer\"><code>std::vector</code></a> is declared as</p>\n\n<blockquote>\n<pre><code>vector() noexcept(noexcept(Allocator())); (since C++17)\n</code></pre>\n</blockquote>\n\n<p>And if <a href=\"http://en.cppreference.com/w/cpp/memory/allocator\" rel=\"noreferrer\"><code>std::allocator</code></a> is used then it's <code>noexcept(true)</code>; i.e. won't throw exceptions.</p>\n\n<blockquote>\n<pre><code>allocator() noexcept; (since C++11)\n</code></pre>\n</blockquote>\n\n<p>Hence, before C++17, or if using a non-default allocator, throwing exceptions is possible.</p>\n"}], "owner": {"reputation": 40055, "user_id": 545127, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RJgJM.png?s=128&g=1", "display_name": "Raedwald", "link": "https://stackoverflow.com/users/545127/raedwald"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1117, "favorite_count": 0, "accepted_answer_id": 50367240, "answer_count": 1, "score": 7, "last_activity_date": 1526477480, "creation_date": 1526462995, "question_id": 50367125, "link": "https://stackoverflow.com/questions/50367125/can-the-stdvector-default-constructor-throw-an-exception", "title": "Can the std::vector default constructor throw an exception", "body": "<p>If I construct an empty <code>std::vector</code> using the default constructor (and the default allocator), can it throw an exception?</p>\n\n<p>In general, allocating space for the elements of a container can throw an exception (which would be a <code>std::bad_alloc</code>). But the default constructor of a <code>std::vector</code> does not <strong>need</strong> to allocate any such space; it can lazily allocate some space on the first insertion or assignment. But does the C++ standard <em>require</em> that it does not throw exceptions (implying lazy allocation, or catching <code>std::bad_alloc</code> and then falling back to lazy allocation)?</p>\n"}, {"tags": ["c++", "list", "sorting"], "comments": [{"owner": {"reputation": 23, "user_id": 9799087, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Melvin Brooks", "link": "https://stackoverflow.com/users/9799087/melvin-brooks"}, "edited": false, "score": 0, "creation_date": 1526462788, "post_id": 50366984, "comment_id": 87750304, "body": "I just noticed I forgot to provide the results, it&#39;s edited. 10 comes before 2, and letters are A J K Q, but need to be J Q K A."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1526462939, "post_id": 50366984, "comment_id": 87750429, "body": "it&#39;s normal to use an enum for the card faces also, with a conversion function to convert to strings when needed"}, {"owner": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 0, "creation_date": 1526462954, "post_id": 50366984, "comment_id": 87750443, "body": "I would suggest creating an array/list with the correct order, try to grab the index of the two elements and compare the indices"}, {"owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 0, "creation_date": 1526462959, "post_id": 50366984, "comment_id": 87750447, "body": "can the issue be that you are comparing character instead of strings"}, {"owner": {"reputation": 361, "user_id": 3174148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb7f4331f05adbf4c47d076055ffdea?s=128&d=identicon&r=PG&f=1", "display_name": "scrapper", "link": "https://stackoverflow.com/users/3174148/scrapper"}, "edited": false, "score": 0, "creation_date": 1526463085, "post_id": 50366984, "comment_id": 87750542, "body": "just use char instead of std::string and it should work."}, {"owner": {"reputation": 23, "user_id": 9799087, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Melvin Brooks", "link": "https://stackoverflow.com/users/9799087/melvin-brooks"}, "edited": false, "score": 0, "creation_date": 1526463094, "post_id": 50366984, "comment_id": 87750551, "body": "It&#39;s an assignment, I&#39;m not allowed to use side-containers, and <code>std::pair</code> members must remain as they are (that is <code>enum class</code> and <code>std::string</code>)."}, {"owner": {"reputation": 23, "user_id": 9799087, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Melvin Brooks", "link": "https://stackoverflow.com/users/9799087/melvin-brooks"}, "reply_to_user": {"reputation": 361, "user_id": 3174148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb7f4331f05adbf4c47d076055ffdea?s=128&d=identicon&r=PG&f=1", "display_name": "scrapper", "link": "https://stackoverflow.com/users/3174148/scrapper"}, "edited": false, "score": 0, "creation_date": 1526463538, "post_id": 50366984, "comment_id": 87750857, "body": "@scrapper that worked like a charm, thanks. Write it as an aswer and I&#39;ll  mark it best. Thanks!"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 361, "user_id": 3174148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb7f4331f05adbf4c47d076055ffdea?s=128&d=identicon&r=PG&f=1", "display_name": "scrapper", "link": "https://stackoverflow.com/users/3174148/scrapper"}, "edited": false, "score": 0, "creation_date": 1526463604, "post_id": 50366984, "comment_id": 87750884, "body": "@scrapper how are you converting the string <code>10</code> to a char?"}, {"owner": {"reputation": 23, "user_id": 9799087, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Melvin Brooks", "link": "https://stackoverflow.com/users/9799087/melvin-brooks"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1526463796, "post_id": 50366984, "comment_id": 87751004, "body": "@FantasticMrFox I used <code>c_str()</code>"}, {"owner": {"reputation": 23, "user_id": 9799087, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Melvin Brooks", "link": "https://stackoverflow.com/users/9799087/melvin-brooks"}, "edited": false, "score": 0, "creation_date": 1526464050, "post_id": 50366984, "comment_id": 87751174, "body": "what&#39;s odd is, that it works fine on c9, but fails to sort correctly in Visual Studio."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1526464320, "post_id": 50366984, "comment_id": 87751416, "body": "Because it is wrong. You are not comparing the value 10, best case you are comparing the value of 1, worst case you are comparing the value of a char*"}, {"owner": {"reputation": 23, "user_id": 9799087, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Melvin Brooks", "link": "https://stackoverflow.com/users/9799087/melvin-brooks"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1526465746, "post_id": 50366984, "comment_id": 87752373, "body": "@FantasticMrFox how should I do it then? Any suggestions?"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1526466477, "post_id": 50366984, "comment_id": 87752860, "body": "@MelvinBrooks The 2 answers below are both good."}, {"owner": {"reputation": 361, "user_id": 3174148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb7f4331f05adbf4c47d076055ffdea?s=128&d=identicon&r=PG&f=1", "display_name": "scrapper", "link": "https://stackoverflow.com/users/3174148/scrapper"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1526467389, "post_id": 50366984, "comment_id": 87753449, "body": "@FantasticMrFox sorry missed that. Yout could try to save the 2-10 values as decimal in char, but the solutions already presented are better."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9799087, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Melvin Brooks", "link": "https://stackoverflow.com/users/9799087/melvin-brooks"}, "edited": false, "score": 0, "creation_date": 1526463330, "post_id": 50367214, "comment_id": 87750733, "body": "That would be great, but defining operators and using classes is not allowed unfortunately."}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": false, "score": 0, "last_activity_date": 1526464421, "last_edit_date": 1526464421, "creation_date": 1526463204, "answer_id": 50367214, "question_id": 50366984, "link": "https://stackoverflow.com/questions/50366984/custom-sorting-strings-in-c/50367214#50367214", "title": "Custom sorting strings in c++", "body": "<p>It is not sorting the way you want because <code>10</code> is less than <code>2</code> because <code>1</code> is less than <code>2</code>. You might be better off using a class and a comparison operator:</p>\n\n<pre><code>struct Card {\n    enum class Suite { Spades, Clubs, Hearts, Diamonds};\n\n    operator&lt;(const Card&amp; other) {\n        if (suite == other.suite) { return number &lt; other.number; }\n        return suite &lt; other.suite;\n    }\n\n    string toString(); // Function to make your card string representation.\n\n    private:\n       int number; // 2 - 14 (11, 12, 13, 14: J, Q, K, A)\n       Suite suite;\n}\n</code></pre>\n\n<p>Then you could do:</p>\n\n<pre><code>std::list&lt;Card&gt; myList;\nmyList.sort();\n</code></pre>\n\n<p><strong>Note</strong>: Untested code, also needs appropriate constructors converters etc.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 9799087, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Melvin Brooks", "link": "https://stackoverflow.com/users/9799087/melvin-brooks"}, "edited": false, "score": 0, "creation_date": 1526470144, "post_id": 50367367, "comment_id": 87755218, "body": "This is what I eventually ended up doing. I did have to write a whole bunch of ifs, but it works though. Thanks!"}], "tags": [], "owner": {"reputation": 45496, "user_id": 436560, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/2GESV.jpg?s=128&g=1", "display_name": "Lajos Arpad", "link": "https://stackoverflow.com/users/436560/lajos-arpad"}, "is_accepted": true, "score": 0, "last_activity_date": 1526463597, "creation_date": 1526463597, "answer_id": 50367367, "question_id": 50366984, "link": "https://stackoverflow.com/questions/50366984/custom-sorting-strings-in-c/50367367#50367367", "title": "Custom sorting strings in c++", "body": "<p>The problem is that you are comparing <code>string</code>s, that is, you compare them in alphabetical order. Let's see which comparisons will yield bad results:</p>\n\n<blockquote>\n  <p>2, 3, 4, 5, 6, 7, 8, 9 vs. 10</p>\n  \n  <p>J vs A</p>\n  \n  <p>Q vs K</p>\n  \n  <p>K vs A</p>\n</blockquote>\n\n<p>So you will need to write your comparison to check whether any of the values is 10, A or J. If it is 10, check whether the other is a number. If it is A, check whether the other is J or K. If it is K, check whether the other is Q or A. If any of those cases are met, then return the logical value which corresponds to your needs. Otherwise work as you did before:</p>\n\n<pre><code>deck.sort( [] (const Pair &amp;x, const Pair &amp;y) -&gt; bool {\n        if(x.first == y.first) {\n            //Here you need to implement your custom cases as described above\n            return x.second &lt; y.second;\n        }\n        else return x.first &lt; y.first;\n    } );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1526464551, "post_id": 50367590, "comment_id": 87751587, "body": "I&#39;d express it as <code>return std::tie(x.first, face_value(x.second)) &lt; std::tie(y.first, face_value(y.second))</code>"}, {"owner": {"reputation": 6021, "user_id": 206404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497437666710e8b13ee168bd7b62fcba?s=128&d=identicon&r=PG", "display_name": "Stephen Newell", "link": "https://stackoverflow.com/users/206404/stephen-newell"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1526465157, "post_id": 50367590, "comment_id": 87751998, "body": "@Caleth - Honestly didn&#39;t know <code>tuple</code>s supported the boolean operators.  Thanks for the suggestion!"}], "tags": [], "owner": {"reputation": 6021, "user_id": 206404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497437666710e8b13ee168bd7b62fcba?s=128&d=identicon&r=PG", "display_name": "Stephen Newell", "link": "https://stackoverflow.com/users/206404/stephen-newell"}, "is_accepted": false, "score": 3, "last_activity_date": 1526465120, "last_edit_date": 1526465120, "creation_date": 1526464139, "answer_id": 50367590, "question_id": 50366984, "link": "https://stackoverflow.com/questions/50366984/custom-sorting-strings-in-c/50367590#50367590", "title": "Custom sorting strings in c++", "body": "<p>One thing you have going for you is that the first character of each <code>string</code> is unique.  This code is untested, but it should be close:</p>\n\n<pre><code>unsigned int face_value(std::string const &amp;face) {\n    if(std::isdigit(face[0])) {\n        // if the length is 1 we just need the digit\n        if(face.length() == 1) {\n            return face[0] - '0';\n        }\n        // if it's not 1, it has to be 10\n        return 10;\n    }\n    switch(face[0]) {\n    case 'J':\n        return 11;\n        break;\n\n    case 'Q':\n        return 12;\n        break;\n\n    case 'K':\n        return 13;\n        break;\n\n    case 'A':\n        return 14;\n        break;\n\n    default:\n        assert(false);\n        break;\n    }\n}\n\nbool face_compare(std::string const &amp;first, std::string const &amp;second) {\n    return face_value(first) &lt; face_value(second);\n}\n</code></pre>\n\n<p>With the helper functions, the lambda is trivial:</p>\n\n<pre><code>deck.sort( [] (const Pair &amp;x, const Pair &amp;y) -&gt; bool {\n    return std::tie(x.first, face_value(x.second)) &lt;\n           std::tie(y.first, face_value(y.second));\n});\n</code></pre>\n\n<p>As a side note, my guess is that you want to compare face values before <code>Colour</code>s, but I'm sticking with your original logic for now.</p>\n"}, {"tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 3, "last_activity_date": 1526468766, "last_edit_date": 1526468766, "creation_date": 1526465138, "answer_id": 50367959, "question_id": 50366984, "link": "https://stackoverflow.com/questions/50366984/custom-sorting-strings-in-c/50367959#50367959", "title": "Custom sorting strings in c++", "body": "<p>You can have a lookup of the face values of your cards, expressed as a <code>std::map&lt;std::string, int&gt;</code>. Rather than explicitly specifying the less than of two values, we can use the <code>std::tuple</code> less than, with <code>std::tie</code>.</p>\n\n<pre><code>// throws std::out_of_range if not passed a valid face\nint face_value (const std::string &amp; face)\n{\n    static const std::map&lt;std::string, int&gt; faces {\n        { \"2\", 2 },  { \"3\", 3 },  { \"4\", 4 },\n        { \"5\", 5 },  { \"6\", 6 },  { \"7\", 7 },\n        { \"8\", 8 },  { \"9\", 9 },  { \"10\", 10 },\n        { \"J\", 11 }, { \"Q\", 12 }, { \"K\", 13 },\n        { \"A\", 14 },\n    }\n\n    return faces.at( face );\n}\n\ndeck.sort( [] (const Pair &amp;x, const Pair &amp;y) -&gt; bool {\n    return std::tie(x.first, face_value(x.second)) &lt; std::tie(y.first, face_value(y.second));\n} );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 6114339, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-y1wXXlV69ZY/AAAAAAAAAAI/AAAAAAAAA7s/BmDcBas7lTk/photo.jpg?sz=128", "display_name": "fcooper8472", "link": "https://stackoverflow.com/users/6114339/fcooper8472"}, "is_accepted": false, "score": 0, "last_activity_date": 1526476957, "last_edit_date": 1526476957, "creation_date": 1526476534, "answer_id": 50371985, "question_id": 50366984, "link": "https://stackoverflow.com/questions/50366984/custom-sorting-strings-in-c/50371985#50371985", "title": "Custom sorting strings in c++", "body": "<p>How about enums for suit and value:</p>\n\n<pre><code>enum class Suit {\n    Spades, Clubs, Hearts, Diamonds\n};\n\nenum class Val {\n    v2, v3, v4, v5, v6, v7, v8, v9, v10, vJ, vQ, vK, vA\n};\n\ntypedef std::pair&lt;Suit, Val&gt; Pair;\n</code></pre>\n\n<p>Then, if you want it, a method to print a <code>Pair</code>:</p>\n\n<pre><code>std::string GetCardName(Pair p)\n{\n    std::string suit_name;\n    switch (p.first)\n    {\n        case Suit::Spades : suit_name = \"Spades\"; break;\n        /* ... */\n        case Suit::Diamonds : suit_name = \"Diamonds\"; break;\n    }\n\n    std::string val_name;\n    switch (p.second)\n    {\n        case Val::v2 : val_name = \"2\"; break;\n        case Val::v3 : val_name = \"3\"; break;\n        /* ... */\n        case Val::vA : val_name = \"Ace\"; break;\n    }\n\n    return val_name + \" of \" + suit_name;\n}\n</code></pre>\n\n<p>Then you can compare exactly as you originally wrote, since the Suit and Val enums are implicitly ordered:</p>\n\n<pre><code>std::list&lt;Pair&gt; Deck =\n{\n    std::make_pair(Suit::Spades, Val::vA),\n    std::make_pair(Suit::Clubs, Val::v7)\n};\n\nDeck.sort( [](const Pair&amp; p1, const Pair&amp; p2)\n{\n    if(p1.first == p2.first) return p1.second &lt; p2.second;\n    else return p1.first &lt; p2.first;\n} );\n\nfor (const auto&amp; pair : Deck)\n{\n    std::cout &lt;&lt; GetCardName(pair) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Ace of Spades\n7 of Clubs\n</code></pre>\n\n<p>Here is a <a href=\"https://godbolt.org/g/pyaeaw\" rel=\"nofollow noreferrer\">minimal working example</a> of the whole thing.</p>\n"}], "owner": {"reputation": 23, "user_id": 9799087, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Melvin Brooks", "link": "https://stackoverflow.com/users/9799087/melvin-brooks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 849, "favorite_count": 0, "accepted_answer_id": 50367367, "answer_count": 5, "score": 0, "last_activity_date": 1526476957, "creation_date": 1526462601, "last_edit_date": 1526462724, "question_id": 50366984, "link": "https://stackoverflow.com/questions/50366984/custom-sorting-strings-in-c", "title": "Custom sorting strings in c++", "body": "<p>I'm having a bit of an issue with custom sorting strings. What I basically have is an <code>std::list</code> of <code>std::pair</code>, whose elements are <code>enum class</code> and <code>std::string</code>. <em>Enum</em> is for colours (those do sort correctly) and <em>strings</em> contain numbers in [2, 10] interval, with additions of letters J, Q, K and A, respectively. As you may have already guessed, it's a deck of cards, that must look like this after sorting:\n2, 3, 4, 5, 6, 7, 8, 9, 10, J, Q, K, A.</p>\n\n<p>What should my lambda function look like in order to achieve this? Or is there another way?</p>\n\n<p>This is what I've compe up with so far:</p>\n\n<pre><code>enum class Colours\n{\nSpades, Clubs, Hearts, Diamonds\n};\n\ntypedef std::list&lt;std::pair&lt;Colours, std::string&gt;&gt; Deck;\ntypedef std::pair&lt;Boje, std::string&gt; Pair;\n</code></pre>\n\n<p>And here's the actual sorting:</p>\n\n<pre><code>deck.sort( [] (const Pair &amp;x, const Pair &amp;y) -&gt; bool {\n        if(x.first == y.first) return x.second &lt; y.second;\n        else return x.first &lt; y.first;\n    } );\n</code></pre>\n\n<p>And the current sorting result: 10 2 3 4 5 6 7 8 9 A J K Q </p>\n"}]