[{"tags": ["javascript", "c++", "textures", "game-engine", "babylonjs"], "comments": [{"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1482366910, "post_id": 41273825, "comment_id": 69749684, "body": "I mean, once the .BMP file is loaded, the software can display it any way it wants to. If it wants to display red as green, there&#39;s nothing stopping it from doing so."}, {"owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 0, "creation_date": 1482371890, "post_id": 41273825, "comment_id": 69750863, "body": "If the .bmp file contains 32-bit data, each pixel is defined by 4 bytes of component levels: red, green, blue and alpha.  Alpha may be interpreted as the pixel&#39;s transparency level.  Unfortunately, the image you linked has been converted to .png, and without the original data I can&#39;t draw any conclusions about its format."}, {"owner": {"reputation": 14671, "user_id": 2317490, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ypoen.png?s=128&g=1", "display_name": "dandavis", "link": "https://stackoverflow.com/users/2317490/dandavis"}, "edited": false, "score": 0, "creation_date": 1482381642, "post_id": 41273825, "comment_id": 69753200, "body": "you can loop though the pixels and change that black to transparent."}, {"owner": {"reputation": 161, "user_id": 4932363, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/975395335834526/picture?type=large", "display_name": "Kajcioch", "link": "https://stackoverflow.com/users/4932363/kajcioch"}, "reply_to_user": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 0, "creation_date": 1482393455, "post_id": 41273825, "comment_id": 69757998, "body": "@Christopher Oicles I can link original file to some file sharing site"}], "owner": {"reputation": 161, "user_id": 4932363, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/975395335834526/picture?type=large", "display_name": "Kajcioch", "link": "https://stackoverflow.com/users/4932363/kajcioch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1482364576, "creation_date": 1482364576, "question_id": 41273825, "link": "https://stackoverflow.com/questions/41273825/defining-transpency-in-bmp-files", "title": "Defining transpency in bmp files", "body": "<p>A game I'm currently researching, has some textures on interface. Those textures in-game are transparent. This game is honestly really old (1999) and those textures are saved as <code>.BMP</code>. Here is a sample texture file:</p>\n\n<p><a href=\"https://i.stack.imgur.com/bRMss.png\" rel=\"nofollow noreferrer\">Sample texture interface file</a></p>\n\n<p>This game is written in C++.</p>\n\n<p>Here's my question: how is that possible, that a game understands some parts of <code>.BMP</code>, which are definitely <strong>black</strong>, as a transparent surface? Can you give me an idea, how to define one as well? I'm currently working in canvas (Javascript, <a href=\"http://babylonjs.com/\" rel=\"nofollow noreferrer\">BabylonJS</a>), but I need an idea, not code.</p>\n"}, {"tags": ["c++", "arrays", "c++11"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1482363773, "post_id": 41273307, "comment_id": 69748904, "body": "Note, however, that most containers do not support this kind of syntax."}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1482388261, "post_id": 41273307, "comment_id": 69755488, "body": "@Brian &quot;Except where it has been declared for a class&quot;. Containers declare subscript usually. SO it isn&#39;t declared and can&#39;t b used or it works differently. That&#39;s obvious"}], "owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "closed_date": 1482361936, "answer_count": 0, "score": 0, "last_activity_date": 1482361678, "creation_date": 1482360964, "last_edit_date": 1482361678, "question_id": 41273307, "link": "https://stackoverflow.com/questions/41273307/c11-swapping-array-name-and-index", "closed_reason": "Duplicate", "title": "C++11: Swapping array name and index", "body": "<p>Older compilers allowed this kind of \"blasphemy\"</p>\n\n<pre><code>int a[5];\n4[a] = 3;\n</code></pre>\n\n<p>Simply because operator[] would allow const expression and those are equal: </p>\n\n<pre><code>*(4 + a) === *(a + 4)\n</code></pre>\n\n<p>Is that a defined behavior or an UB in C++11?</p>\n\n<p>Edit: answer:</p>\n\n<blockquote>\n  <p>Except where it has been declared for a class (13.5.5), the subscript operator [] is interpreted in such a way that E1[E2] is\n  identical to *((E1)+(E2)). Because of the conversion rules that apply\n  to +, if E1 is an array and E2 an integer, then E1[E2] refers to the\n  E2-th member of E1. Therefore, despite its asymmetric appearance,\n  subscripting is a commutative operation.</p>\n</blockquote>\n"}, {"tags": ["c++", "mysql", "visual-studio", "visual-studio-2015", "cmake-gui"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1482360949, "post_id": 41273281, "comment_id": 69748042, "body": "<b><i>The target &quot;_ConvertPdbFiles&quot; listed in a BeforeTargets attribute at &quot;C:\\Program Files (x86)\\MSBuild\\14.0\\Microsoft.Common.targets\\ImportAfter\\Xama&zwnj;&#8203;rin.Common.targets (34,37)&quot; does not exist in the project, and will be ignored.</i></b> I see this in some of my CMake builds. It does not seem to cause any issue."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1482361108, "post_id": 41273281, "comment_id": 69748099, "body": "<b><i>Build started 22/12/2016 00:28:42</i></b> It seems like it is building. <b><i>CMake Error in CMakeLists.txt: No CMAKE_C_COMPILER could be found.</i></b> errors usually prevent generation from working."}, {"owner": {"reputation": 434, "user_id": 7327911, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8c5145eaed87b7d8085486c8c89b69a3?s=128&d=identicon&r=PG&f=1", "display_name": "Theo.Fanis", "link": "https://stackoverflow.com/users/7327911/theo-fanis"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1482361375, "post_id": 41273281, "comment_id": 69748216, "body": "it is not building unfortunately..."}, {"owner": {"reputation": 434, "user_id": 7327911, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8c5145eaed87b7d8085486c8c89b69a3?s=128&d=identicon&r=PG&f=1", "display_name": "Theo.Fanis", "link": "https://stackoverflow.com/users/7327911/theo-fanis"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1482361452, "post_id": 41273281, "comment_id": 69748249, "body": "Done Building Project &quot;~\\target\\CMakeFiles\\3.7.1\\CompilerIdC\\CompilerIdC.vcxproj&quot; (default targets) -- FAILED.  Build FAILED."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1482361671, "post_id": 41273281, "comment_id": 69748321, "body": "Maybe there is an error in the build output after the warnings that you listed."}, {"owner": {"reputation": 434, "user_id": 7327911, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8c5145eaed87b7d8085486c8c89b69a3?s=128&d=identicon&r=PG&f=1", "display_name": "Theo.Fanis", "link": "https://stackoverflow.com/users/7327911/theo-fanis"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1482361880, "post_id": 41273281, "comment_id": 69748382, "body": "you are right, after build failure it says that build tools cannot be found   C:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\V140\\Microsoft.Cpp.Platform&zwnj;&#8203;.targets(57,5): error MSB8020: The build tools for v141 (Platform Toolset = &#39;v141&#39;) cannot be found. To build using the v141 build tools, please install v141 build tools.  Alternatively, you may upgrade to the current Visual Studio tools by selecting the Project menu or right-click the solution, and then selecting &quot;Retarget solution&quot;. [~\\target\\CMakeFiles\\3.7.1\\CompilerIdC\\CompilerIdC.vcxproj]"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1482362009, "post_id": 41273281, "comment_id": 69748418, "body": "I am not sure what the correct platform toolset is for Visual Studio 14 2015 however the V140 / V141 seems like it is part of the problem."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1482362763, "post_id": 41273281, "comment_id": 69748645, "body": "I think you picked the wrong generator for Visual Studio 14 2015. It looks like the platform toolset 141 is for the Visual Studio 15 2017 RC."}, {"owner": {"reputation": 434, "user_id": 7327911, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8c5145eaed87b7d8085486c8c89b69a3?s=128&d=identicon&r=PG&f=1", "display_name": "Theo.Fanis", "link": "https://stackoverflow.com/users/7327911/theo-fanis"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1482363278, "post_id": 41273281, "comment_id": 69748794, "body": "my visual studio says that its 15 2017. But if I use in cmake visual studio 14 2015 as a compiler, the configuration is done, and BUILD SUCCESS"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1482363402, "post_id": 41273281, "comment_id": 69748819, "body": "That is what I expected. This would be the reason for the compiler detection failure. Because of the wrong generator it was looking for the 2017 RC version of Visual Studio."}, {"owner": {"reputation": 434, "user_id": 7327911, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8c5145eaed87b7d8085486c8c89b69a3?s=128&d=identicon&r=PG&f=1", "display_name": "Theo.Fanis", "link": "https://stackoverflow.com/users/7327911/theo-fanis"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1482363481, "post_id": 41273281, "comment_id": 69748836, "body": "Thank you so much!!! I was so desperate..."}], "answers": [{"tags": [], "owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "is_accepted": true, "score": 0, "last_activity_date": 1482364098, "creation_date": 1482364098, "answer_id": 41273765, "question_id": 41273281, "link": "https://stackoverflow.com/questions/41273281/visual-studio-compilers-not-visible-by-cmake/41273765#41273765", "title": "Visual Studio compilers not visible by cmake", "body": "<p>From the comments. The problem was caused by using the wrong generator for <code>Visual Studio 2015</code>. </p>\n\n<p>The correct generator for 32 bit code in <code>Visual Studio 2015</code> is <code>Visual Studio 14 2015</code> and for 64 bit code it is <code>Visual Studio 14 2015 Win64</code>.</p>\n"}], "owner": {"reputation": 434, "user_id": 7327911, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8c5145eaed87b7d8085486c8c89b69a3?s=128&d=identicon&r=PG&f=1", "display_name": "Theo.Fanis", "link": "https://stackoverflow.com/users/7327911/theo-fanis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1350, "favorite_count": 0, "accepted_answer_id": 41273765, "answer_count": 1, "score": 0, "last_activity_date": 1487638320, "creation_date": 1482360804, "last_edit_date": 1487638320, "question_id": 41273281, "link": "https://stackoverflow.com/questions/41273281/visual-studio-compilers-not-visible-by-cmake", "title": "Visual Studio compilers not visible by cmake", "body": "<p>I'm trying to build a program in c++ using mysql.h</p>\n\n<p>So i read that compiling with cmake is necessary. But as it seems cmake cant find visual's studio compilers even though I opened it through Developers command prompt.<br>\nThis is the error that occurs:</p>\n\n<blockquote>\n  <p>The C compiler identification is unknown</p>\n  \n  <p>The CXX compiler identification is unknown</p>\n  \n  <p>CMake Error in CMakeLists.txt:   No CMAKE_C_COMPILER could be found.</p>\n  \n  <p>CMake Error in CMakeLists.txt:   No CMAKE_CXX_COMPILER could be found.</p>\n  \n  <p>Also, at cmake error list, it says :</p>\n  \n  <p>Build started 22/12/2016 00:28:42.</p>\n  \n  <p>The target \"_ConvertPdbFiles\" listed in a BeforeTargets attribute at\n  \"C:\\Program Files\n  (x86)\\MSBuild\\14.0\\Microsoft.Common.targets\\ImportAfter\\Xamarin.Common.targets\n  (34,37)\" does not exist in the project, and will be ignored.</p>\n  \n  <p>The target \"_CollectPdbFiles\" listed in an AfterTargets attribute at\n  \"C:\\Program Files\n  (x86)\\MSBuild\\14.0\\Microsoft.Common.targets\\ImportAfter\\Xamarin.Common.targets\n  (34,70)\" does not exist in the project, and will be ignored.</p>\n  \n  <p>C:\\Program Files\n  (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\V140\\Microsoft.Cpp.Platform\u200c\u200b.targets(57,5):\n  error MSB8020: The build tools for v141 (Platform Toolset = 'v141')\n  cannot be found. To build using the v141 build tools, please install\n  v141 build tools. Alternatively, you may upgrade to the current Visual\n  Studio tools by selecting the Project menu or right-click the\n  solution, and then selecting \"Retarget solution\".</p>\n</blockquote>\n"}, {"tags": ["c++", "algorithm", "c++11", "stl"], "answers": [{"tags": [], "owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "is_accepted": false, "score": 2, "last_activity_date": 1482363107, "creation_date": 1482363107, "answer_id": 41273641, "question_id": 41273280, "link": "https://stackoverflow.com/questions/41273280/merging-adjacent-entries-from-a-stdset/41273641#41273641", "title": "Merging adjacent entries from a std::set", "body": "<p>Something along these lines (not tested, not even compiled):</p>\n\n<pre><code>if (removedText.empty()) return;\nstd::set&lt;VCDUText, decltype(gPositionComp)&gt; tempResult(gPositionComp);\nauto current = removedText.cbegin();\nVCDUText accum = *current++;\nwhile (current != removedText.end()) {\n  if (accum.mX + accum.mText.size() == current-&gt;mX) {\n    accum.mText += current-&gt;mText;\n  } else {\n    tempResult.emplace(accum.mText, WHITE, BIG_CHAR, NONE, accum.mX, accum.mY);\n    accum = *current;\n  }\n  ++current;\n}\ntempResult.emplace(accum.mText, WHITE, BIG_CHAR, NONE, accum.mX, accum.mY);\n</code></pre>\n"}], "owner": {"reputation": 2125, "user_id": 1354089, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/61cbedb391e7a5b3efb279814a79f9a0?s=128&d=identicon&r=PG", "display_name": "johnco3", "link": "https://stackoverflow.com/users/1354089/johnco3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1482365107, "creation_date": 1482360803, "last_edit_date": 1482365107, "question_id": 41273280, "link": "https://stackoverflow.com/questions/41273280/merging-adjacent-entries-from-a-stdset", "title": "Merging adjacent entries from a std::set", "body": "<p>I have an STL set containing special string elements that are ordered according to a custom predicate.  Each string uses its horizontal position (not the text) to order itself.  I am trying to merge adjacent strings on a line together using a single string object by merging the strings that go end to end together.  So far I have managed to find these adjacent set elements </p>\n\n<p>I need to go through this <code>std::set&lt;type&gt;</code> copying non adjacent elements and then merge together the adjacent elements using the specified predicate (see lambda below).  Could someone help me with the details.</p>\n\n<p>This is the set ordering comparator which I use to construct a set of these special <strong><code>VCDUText</code></strong> elements (basically strings with an X,Y and some extra attribute stuff).  The comparator basically orders the text according to its offset from the screen with <code>MAXCOL</code> columns.</p>\n\n<pre><code>static const auto gPositionComp =\n    [](const VCDUText&amp; lhs, const VCDUText&amp; rhs) -&gt; bool {\n        auto lhsPos = lhs.mY * MAXCOL + lhs.mX;\n        auto rhsPos = rhs.mY * MAXCOL + rhs.mX;\n        return lhsPos &lt; rhsPos;\n    };\n</code></pre>\n\n<p>The <code>removedText</code> is initialized below (not shown). The place that I am having trouble is somehow trying to copy elements from the <code>removedText</code> to <code>tempResult</code>, while at the same time merging the adjacent entries.  Note all the elements may be adjacent in which case the result should be just 1 element containing the merged strings.</p>\n\n<pre><code>        std::set&lt;VCDUText, decltype(gPositionComp)&gt; removedText(gPositionComp);\n        // initialized here ...\n\n        //....\n        // transform removed entries to spaces\n        std::set&lt;VCDUText, decltype(gPositionComp)&gt; tempResult (gPositionComp);\n        std::for_each(removedText.cbegin(), removedText.cend(),\n            [&amp;tempResult](const VCDUText&amp; rNext) {\n                tempResult.emplace(rNext.mText, WHITE, BIG_CHAR, NONE, rNext.mX, rNext.mY);\n            });\n\n        auto adjIter = std::adjacent_find(tempResult.cbegin(), tempResult.cend(), \n            [](const VCDUText&amp; lhs, const VCDUText&amp; rhs){\n                if (lhs.mX + lhs.mText.size() == rhs.mX) {\n                    return true;\n                }\n                return false;\n            });\n\n        std::set&lt;VCDUText, decltype(gPositionComp)&gt; temp1 (gPositionComp);\n        while (adjIter != tempResult.cend()) {\n            // HELP NEEDED HERE HOW DO I MERGE THE ADJACENT ELEMENTS \n        }\n</code></pre>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 184, "user_id": 1690417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd3e7fbf482bf3cfef0f1f3de483f59?s=128&d=identicon&r=PG", "display_name": "D Untouchable", "link": "https://stackoverflow.com/users/1690417/d-untouchable"}, "edited": false, "score": 0, "creation_date": 1482360469, "post_id": 41273171, "comment_id": 69747867, "body": "check strcmp, but as you are doing c++ then you can go for strings"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1482360496, "post_id": 41273171, "comment_id": 69747881, "body": "<code>cin &gt;&gt; usernamecheck</code>  -- This right away will fail due to attempting to write to an uninitialized pointer."}, {"owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "edited": false, "score": 0, "creation_date": 1482360605, "post_id": 41273171, "comment_id": 69747915, "body": "Three things: Trying to read into an uninitialized pointer, using &#39;a&#39; is the index into the array when &#39;a&#39; is not defined, using &#39;==&#39; rather than &#39;=&#39; to pull passwordcheck."}], "answers": [{"comments": [{"owner": {"reputation": 386, "user_id": 6705628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/208fa0d86c50a5335ce665a38a80f595?s=128&d=identicon&r=PG&f=1", "display_name": "T&#252;rker Berke Y\u0131ld\u0131r\u0131m", "link": "https://stackoverflow.com/users/6705628/t%c3%bcrker-berke-y%c4%b1ld%c4%b1r%c4%b1m"}, "edited": false, "score": 0, "creation_date": 1482416270, "post_id": 41273217, "comment_id": 69772095, "body": "So can i change my data.h file&#39;s code like ; char *usernames = { ......} to string usernames = {.....} and everything change to string ? so it will work :) i will try thank you so much"}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": false, "score": 1, "last_activity_date": 1482360904, "last_edit_date": 1482360904, "creation_date": 1482360469, "answer_id": 41273217, "question_id": 41273171, "link": "https://stackoverflow.com/questions/41273171/compare-two-pointer-arrays-one-of-them-from-h-and-one-of-them-from-cin/41273217#41273217", "title": "Compare Two pointer Arrays One of them from .h and one of them from cin", "body": "<p>This:</p>\n\n<pre><code>char *usernamecheck;\n...\ncin &gt;&gt; usernamecheck ;\n</code></pre>\n\n<p>is going to be undefined behaviour. There is no memory associated with <code>usernamecheck</code>. You say:</p>\n\n<blockquote>\n  <p>I tried to use as string but i have failed.</p>\n</blockquote>\n\n<p>So dont use old archaic, methods when there are shiny new c++ ones available:</p>\n\n<pre><code>std::string usernamecheck;\n...\ncin &gt;&gt; usernamecheck;\nbool isUser = usernamecheck == username;\n</code></pre>\n\n<p>Done.</p>\n\n<p>use <a href=\"http://en.cppreference.com/w/cpp/string/basic_string\" rel=\"nofollow noreferrer\"><code>std::string</code></a>, its the bomb.</p>\n\n<p><a href=\"http://ideone.com/JIhOvp\" rel=\"nofollow noreferrer\">Live example.</a></p>\n"}], "owner": {"reputation": 386, "user_id": 6705628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/208fa0d86c50a5335ce665a38a80f595?s=128&d=identicon&r=PG&f=1", "display_name": "T&#252;rker Berke Y\u0131ld\u0131r\u0131m", "link": "https://stackoverflow.com/users/6705628/t%c3%bcrker-berke-y%c4%b1ld%c4%b1r%c4%b1m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1482362896, "creation_date": 1482360243, "last_edit_date": 1482362896, "question_id": 41273171, "link": "https://stackoverflow.com/questions/41273171/compare-two-pointer-arrays-one-of-them-from-h-and-one-of-them-from-cin", "title": "Compare Two pointer Arrays One of them from .h and one of them from cin", "body": "<p>I am newbie.\nI have got a school project that there is a header file and it has got 82 usernames. Like</p>\n\n<pre><code>char *usernames[] ={a1,a2,a3,.... a82};\nchar *passwords[] =[p1,p2,...p82);\n</code></pre>\n\n<p>And I have finished large amount of my project but still I couldn't write an usefull code for login stage.\nMy code has to do take username and then asking for password.\nFor this stage I think basicly that loop:</p>\n\n<pre><code>char *usernamecheck;\nchar *passwordcheck;\ncout&lt;&lt;\"Please login. \\n Username\\n \";\ncin &gt;&gt; usernamecheck ;\nfor(int flag=0;flag&lt;82;flag++)\n{\n  if(usernamecheck==usernames[a]){\n    passwordcheck==password[a];\n  }\n  else {\n  }\n}\ncout&lt;&lt;\"Please enter your password\\n\";\n....\n</code></pre>\n\n<p>Then I will compare password taken from user and from header file.\nI want to ask that point we didn't see that point on course. I have no idea how can I compare 2 char pointers. I tried to use as string but I have failed.</p>\n"}, {"tags": ["c++", "networking", "boost-asio"], "comments": [{"owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "edited": false, "score": 1, "creation_date": 1482361175, "post_id": 41273168, "comment_id": 69748127, "body": "It looks like query may not have a default constructor."}, {"owner": {"reputation": 36, "user_id": 7327875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8181910da7c5ab03b035febb14b4aed9?s=128&d=identicon&r=PG&f=1", "display_name": "Mynameisspam1", "link": "https://stackoverflow.com/users/7327875/mynameisspam1"}, "reply_to_user": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "edited": false, "score": 0, "creation_date": 1482361556, "post_id": 41273168, "comment_id": 69748283, "body": "Ah. It doesn&#39;t, I didn&#39;t realize that would cause this. Thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 7327875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8181910da7c5ab03b035febb14b4aed9?s=128&d=identicon&r=PG&f=1", "display_name": "Mynameisspam1", "link": "https://stackoverflow.com/users/7327875/mynameisspam1"}, "is_accepted": false, "score": 2, "last_activity_date": 1482395179, "last_edit_date": 1482395179, "creation_date": 1482361825, "answer_id": 41273471, "question_id": 41273168, "link": "https://stackoverflow.com/questions/41273168/asio-resolver-does-not-take-io-service-object-as-an-argument/41273471#41273471", "title": "Asio resolver does not take io_service object as an argument", "body": "<p>Mikel F solved this in his comment. </p>\n\n<p>Query did not have a default constructor and needed to be properly constructed. </p>\n\n<p>MSVC wasn't smart enough to tell me that specifically and I wasn't experienced enough to know.</p>\n"}], "owner": {"reputation": 36, "user_id": 7327875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8181910da7c5ab03b035febb14b4aed9?s=128&d=identicon&r=PG&f=1", "display_name": "Mynameisspam1", "link": "https://stackoverflow.com/users/7327875/mynameisspam1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1482395179, "creation_date": 1482360236, "last_edit_date": 1482364281, "question_id": 41273168, "link": "https://stackoverflow.com/questions/41273168/asio-resolver-does-not-take-io-service-object-as-an-argument", "title": "Asio resolver does not take io_service object as an argument", "body": "<p>I've run into a bit of a problem when using the <code>asio</code> standalone library. I'm sure that my issue is something silly that I have forgotten/overlooked, but I can't for life of me figure out what it is. Perhaps you can help me.</p>\n\n<p>According to asio documentation I should be able to create a resolver object by doing <code>asio::ip::tcp::resolver resolver(io);</code> where <code>io</code> is a previously defined <code>asio::io_service</code> object. I am doing this inside of a class and to do this I understand that you must use class initializer lists. However, this is where I run into a problem. I have copy and pasted my code below, and I believe I do this properly, but perhaps you can tell me otherwise.</p>\n\n<pre><code>#pragma once\n#include &lt;asio.hpp&gt;\n\nclass asiostuff\n{\nprivate:\n\n    asio::io_service io;\n\n    asio::ip::tcp::resolver resolver;\n\n    asio::ip::tcp::resolver::query query;\n\n    asio::ip::tcp::socket socket;\npublic:\n    asiostuff()\n       : resolver(io)\n    { //&lt;---- red squiggly line says no default constructor exists\n\n    }\n};\n</code></pre>\n\n<p>Now, I <em>think</em> I am doing it right, but MSVC outputs a C2512 error when I attempt to build this (no appropriate default constructor available). When I do   </p>\n\n<pre><code>    asio::io_service io;\n\n    asio::ip::tcp::resolver resolver(io);\n</code></pre>\n\n<p>outside of the class, it compiles just fine, which indicates to me that I am probably doing the class initializer list wrong. Is there any object I should initialize before initializing the <code>asio::ip::tcp::resolver</code> object?</p>\n\n<p>For reference, I am using MSVC 2015 compiling for x64 in Release mode.</p>\n\n<p><strong>EDIT:</strong> After some additional testing, I've found that when I comment out <code>asio::ip::tcp::resolver::query query;</code> and <code>asio::ip::tcp::socket socket;</code> the program compiles again. Why?</p>\n"}, {"tags": ["c++", "c++17", "multiple-return-values", "if-constexpr"], "comments": [{"owner": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "edited": false, "score": 3, "creation_date": 1482360074, "post_id": 41273101, "comment_id": 69747707, "body": "What&#39;s with all the <code>std::size_t</code> in your template parameters?"}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1482360323, "post_id": 41273101, "comment_id": 69747812, "body": "this looks like an over engineered  factory method."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1482363104, "post_id": 41273101, "comment_id": 69748748, "body": "Your error has nothing to do with <code>if constexpr</code> (not that you are using it correctly)."}, {"owner": {"reputation": 7669, "user_id": 562174, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/91a14d16f9a44823e21eee4713c6845d?s=128&d=identicon&r=PG", "display_name": "Short", "link": "https://stackoverflow.com/users/562174/short"}, "edited": false, "score": 0, "creation_date": 1482366587, "post_id": 41273101, "comment_id": 69749611, "body": "Sorry, it was there from earlier when I was trying to match types up."}], "answers": [{"comments": [{"owner": {"reputation": 7669, "user_id": 562174, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/91a14d16f9a44823e21eee4713c6845d?s=128&d=identicon&r=PG", "display_name": "Short", "link": "https://stackoverflow.com/users/562174/short"}, "edited": false, "score": 0, "creation_date": 1482366527, "post_id": 41273286, "comment_id": 69749592, "body": "Thanks for responding! That&#39;s almost the same thing, but I want to be able to store the type in a variable. Here&#39;s a slightly modified version of yours to show what I mean:  <a href=\"http://coliru.stacked-crooked.com/a/2b9fef340bd167a8\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/2b9fef340bd167a8</a>"}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "reply_to_user": {"reputation": 7669, "user_id": 562174, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/91a14d16f9a44823e21eee4713c6845d?s=128&d=identicon&r=PG", "display_name": "Short", "link": "https://stackoverflow.com/users/562174/short"}, "edited": false, "score": 0, "creation_date": 1482366926, "post_id": 41273286, "comment_id": 69749686, "body": "@Short you can store the type in a <code>constexpr shape_type</code> which works as a template argument"}, {"owner": {"reputation": 7669, "user_id": 562174, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/91a14d16f9a44823e21eee4713c6845d?s=128&d=identicon&r=PG", "display_name": "Short", "link": "https://stackoverflow.com/users/562174/short"}, "edited": false, "score": 0, "creation_date": 1482367482, "post_id": 41273286, "comment_id": 69749832, "body": "I&#39;m not sure what you mean, I tried &quot;auto constexpr t = make(shape_type::TRIANGLE); and get the same error. Was that what you meant by storing it in a constexpr shape_type?"}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1482367609, "post_id": 41273286, "comment_id": 69749860, "body": "I think you&#39;re asking to have the argument to <code>make</code> be stored in a variable instead of the enum literal. You can take the code above, and do <code>constexpr auto shape = shape_type::TRIANGLE; auto t = make&lt;shape&gt;();</code> but because <code>constexpr</code> functions also handle non-constexpr arguments you can&#39;t call it with the syntax you are asking for (unless something changed for 17 I don&#39;t know about)."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "reply_to_user": {"reputation": 7669, "user_id": 562174, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/91a14d16f9a44823e21eee4713c6845d?s=128&d=identicon&r=PG", "display_name": "Short", "link": "https://stackoverflow.com/users/562174/short"}, "edited": false, "score": 0, "creation_date": 1482367677, "post_id": 41273286, "comment_id": 69749881, "body": "@Short I don&#39;t know what you mean by &quot;<i>store the type in a variable</i>&quot; in your example, what is the &quot;<i>type</i>&quot; you are trying to store?"}], "tags": [], "owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "is_accepted": false, "score": 12, "last_activity_date": 1482363948, "last_edit_date": 1482363948, "creation_date": 1482360833, "answer_id": 41273286, "question_id": 41273101, "link": "https://stackoverflow.com/questions/41273101/can-constexpr-if-else-bodies-return-different-types-in-constexpr-auto-function/41273286#41273286", "title": "Can constexpr-if-else bodies return different types in constexpr auto function?", "body": "<p>Yes, what you are attempting is allowed. The two relevant excerpts I've found in <a href=\"http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/n4606.pdf\" rel=\"noreferrer\">N4606</a> are:</p>\n\n<p>6.4.1/2 [stmt.if]</p>\n\n<blockquote>\n  <p>If the if statement is of the form if constexpr [...] If the value of\n  the converted condition is false, the first substatement is a discarded statement, otherwise the second substatement, if present, is a discarded statement.</p>\n</blockquote>\n\n<p>Indicating an untaken branch in a <em>constexpr if</em> is a discarded statment. Further, auto functions only consider non-discarded return statements for deducing the return type</p>\n\n<p>7.1.7.4/2 [dcl.spec.auto] (emphasis mine)</p>\n\n<blockquote>\n  <p>[...] If the declared return type of the function contains a placeholder type, the return type of the function is <strong>deduced from non-discarded return statements</strong>, if any, in the body of the function (6.4.1).</p>\n</blockquote>\n\n<p>Simplified, the following code works on both <a href=\"http://melpon.org/wandbox/permlink/fqu824ZX79MG53Th\" rel=\"noreferrer\">gcc</a> and <a href=\"http://melpon.org/wandbox/permlink/QUPdvtRqnWMR60ti\" rel=\"noreferrer\">clang</a> head.</p>\n\n<pre><code>namespace {\n\nenum class shape_type { TRIANGLE, RECTANGLE, CIRCLE};\n\ntemplate&lt;shape_type&gt;\nstruct shape { };\n\nusing triangle = shape&lt;shape_type::TRIANGLE&gt;;\nusing rectangle = shape&lt;shape_type::RECTANGLE&gt;;\nusing circle = shape&lt;shape_type::CIRCLE&gt;;\n\ntemplate&lt;shape_type ST&gt;\nconstexpr auto make() {\n  if constexpr (ST == shape_type::TRIANGLE) {\n    return triangle{};\n  } else if constexpr (ST == shape_type::RECTANGLE) {\n    return rectangle{};\n  } else if constexpr (ST == shape_type::CIRCLE) {\n    return circle{};\n  } \n}\n\n}\n\nint main() {\n  auto t = make&lt;shape_type::TRIANGLE&gt;();\n  auto r = make&lt;shape_type::RECTANGLE&gt;();\n  auto c = make&lt;shape_type::CIRCLE&gt;();\n}\n</code></pre>\n"}], "owner": {"reputation": 7669, "user_id": 562174, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/91a14d16f9a44823e21eee4713c6845d?s=128&d=identicon&r=PG", "display_name": "Short", "link": "https://stackoverflow.com/users/562174/short"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2498, "favorite_count": 1, "answer_count": 1, "score": 8, "last_activity_date": 1482366628, "creation_date": 1482359887, "last_edit_date": 1482366628, "question_id": 41273101, "link": "https://stackoverflow.com/questions/41273101/can-constexpr-if-else-bodies-return-different-types-in-constexpr-auto-function", "title": "Can constexpr-if-else bodies return different types in constexpr auto function?", "body": "<p>I'm trying to write a function that maps an enumeration of values to a set of types based on the runtime value of the enumeration. I realize that you cannot return different types based on the runtime value of an enumeration because the compiler wouldn't know how much stack space to allocate. However I'm trying to write this as a constexpr function, using the new if-constexpr functionality to implement this.</p>\n\n<p>I'm getting an error from clang complaining that I'm using an illegally specified template parameter. Does anyone see how to implement this?</p>\n\n<p>edit: Here is an easier to grok version demonstrating my problem more concisely:\n<a href=\"http://coliru.stacked-crooked.com/a/2b9fef340bd167a8\" rel=\"noreferrer\">http://coliru.stacked-crooked.com/a/2b9fef340bd167a8</a></p>\n\n<p>old code:</p>\n\n<pre><code>#include &lt;cassert&gt;\n#include &lt;tuple&gt;\n#include &lt;type_traits&gt;\n\nnamespace\n{\n\nenum class shape_type : std::size_t\n{\n  TRIANGLE = 0u,\n  RECTANGLE,\n  POLYGON,\n  CUBE,\n  INVALID_SHAPE_TYPE\n};\n\ntemplate&lt;std::size_t T&gt;\nstruct shape {\n};\n\nusing triangle = shape&lt;static_cast&lt;std::size_t&gt;(shape_type::TRIANGLE)&gt;;\nusing rectangle = shape&lt;static_cast&lt;std::size_t&gt;(shape_type::RECTANGLE)&gt;;\nusing polygon = shape&lt;static_cast&lt;std::size_t&gt;(shape_type::POLYGON)&gt;;\nusing cube = shape&lt;static_cast&lt;std::size_t&gt;(shape_type::CUBE)&gt;;\n\ntemplate&lt;std::size_t A, std::size_t B&gt;\nstatic bool constexpr same() noexcept { return A == B; }\n\ntemplate&lt;std::size_t ST&gt;\nstatic auto constexpr make_impl(draw_mode const dm)\n{\n  if constexpr (same&lt;ST, shape_type::TRIANGLE&gt;()) {\n    return triangle{};\n  } else if (same&lt;ST, shape_type::RECTANGLE&gt;()) {\n    return rectangle{};\n  } else if (same&lt;ST, shape_type::POLYGON&gt;()) {\n    return polygon{};\n  } else if (same&lt;ST, shape_type::CUBE&gt;()) {\n    return cube{};\n  } else {\n    assert(0 == 5);\n  }\n}\n\nstatic auto constexpr make(shape_type const st, draw_mode const dm)\n{\n  switch (st) {\n      case shape_type::TRIANGLE:\n        return make_impl&lt;shape_type::TRIANGLE&gt;(dm);\n      case shape_type::RECTANGLE:\n        return make_impl&lt;shape_type::RECTANGLE&gt;(dm);\n      case shape_type::POLYGON:\n        return make_impl&lt;shape_type::POLYGON&gt;(dm);\n      case shape_type::CUBE:\n        return make_impl&lt;shape_type::CUBE&gt;(dm);\n      case shape_type::INVALID_SHAPE_TYPE:\n        assert(0 == 17);\n  }\n}\n\n} // ns anon\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n// demo\nint main()\n{\n}\n</code></pre>\n\n<p>Errors:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>/home/benjamin/github/BoomHS/main.cxx:42:6: warning: constexpr if is a\nC++1z extension [-Wc++1z-extensions]\n\nif constexpr (same&lt;ST, shape_type::TRIANGLE&gt;()) {\n        ^ /home/benjamin/github/BoomHS/main.cxx:59:16: error: no matching function for call to 'make_impl'\n        return make_impl&lt;shape_type::TRIANGLE&gt;(dm);\n               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ /home/benjamin/github/BoomHS/main.cxx:40:23: note: candidate template\nignored: invalid explicitly-specified argument for template parameter\n'ST' static auto constexpr make_impl(draw_mode const dm)\n                      ^ /home/benjamin/github/BoomHS/main.cxx:61:16: error: no matching function for call to 'make_impl'\n        return make_impl&lt;shape_type::RECTANGLE&gt;(dm);\n               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ /home/benjamin/github/BoomHS/main.cxx:40:23: note: candidate template\nignored: invalid explicitly-specified argument for template parameter\n'ST' static auto constexpr make_impl(draw_mode const dm)\n                      ^ /home/benjamin/github/BoomHS/main.cxx:63:16: error: no matching function for call to 'make_impl'\n        return make_impl&lt;shape_type::POLYGON&gt;(dm);\n               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ /home/benjamin/github/BoomHS/main.cxx:40:23: note: candidate template\nignored: invalid explicitly-specified argument for template parameter\n'ST' static auto constexpr make_impl(draw_mode const dm)\n                      ^ /home/benjamin/github/BoomHS/main.cxx:65:16: error: no matching function for call to 'make_impl'\n        return make_impl&lt;shape_type::CUBE&gt;(dm);\n               ^~~~~~~~~~~~~~~~~~~~~~~~~~~ /home/benjamin/github/BoomHS/main.cxx:40:23: note: candidate template\nignored: invalid explicitly-specified argument for template parameter\n'ST' static auto constexpr make_impl(draw_mode const dm)\n</code></pre>\n"}, {"tags": ["c++", "file", "random-access"], "comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1482360829, "post_id": 41273039, "comment_id": 69747994, "body": "Some hints at <a href=\"http://stackoverflow.com/questions/5166263/how-to-get-iostream-to-perform-better\" title=\"how to get iostream to perform better\">stackoverflow.com/questions/5166263/&hellip;</a>"}, {"owner": {"reputation": 530, "user_id": 2793551, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a73981082fd79398252211805c9146e6?s=128&d=identicon&r=PG&f=1", "display_name": "WaltK", "link": "https://stackoverflow.com/users/2793551/waltk"}, "edited": false, "score": 0, "creation_date": 1482361505, "post_id": 41273039, "comment_id": 69748271, "body": "Are these text files? Does Windows still store both a carriage return as well as a line feed at the end of lines?  If so, does seeking with ifstream seek on the logical text file, filtering out the carriage return characters?  If so, perhaps you could open the file in raw binary mode, and thus prevent the seek function from having to read all the characters to avoid including CR in the seek offset?  But then of course, your code may have to ignore the unfiltered carriage returns."}, {"owner": {"reputation": 128, "user_id": 1057395, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4b6bd9837b72d2c07a982ab436c110d7?s=128&d=identicon&r=PG", "display_name": "norca", "link": "https://stackoverflow.com/users/1057395/norca"}, "edited": false, "score": 0, "creation_date": 1482362018, "post_id": 41273039, "comment_id": 69748421, "body": "Is splitting in 88 smaller files with an unchanged data format an option for you?"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1482363092, "post_id": 41273039, "comment_id": 69748745, "body": "Any chance of writing the index information to a separate file entirely, or (if you can&#39;t do that) writing it to all to one spot at the end of your file?  If you could do that you could avoid (almost) all seeking; you&#39;d only have to read a small amount of information from one place."}], "answers": [{"comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1482363186, "post_id": 41273202, "comment_id": 69748771, "body": "I don&#39;t see how this would avoid having to seek the disk heads back and forth; the main difference would be now the OS is sending the seek commands instead of the application."}, {"owner": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1483464736, "post_id": 41273202, "comment_id": 70104661, "body": "@JeremyFriesner Neither case avoids the initial disk head seek. The main difference is that pages are living in kernel memory which you can access directly rather than a copy into user space which is done by iostreams."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1483475706, "post_id": 41273202, "comment_id": 70110164, "body": "it&#39;s not the (relatively insignificant) copy-from-kernel-into-user-space that the OP is trying to minimize, it&#39;s the seeking of the drive heads.  Using mmap() does not avoid those seeks, and it might in fact add more (depending on how the OS&#39;s implementation of a lookahead algorithm interacts with the patterns in which the OP&#39;s program accesses the mmap()&#39;d memory area)"}, {"owner": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1483476948, "post_id": 41273202, "comment_id": 70110770, "body": "@JeremyFriesner Either case is going to seek the drive heads. If you think an index is going to avoid that you are mistaken. OP asked for a random access solution and that is one of the main reasons you would ever use a memory mapped file. If he needed to look up the name and then look up something in that same area again, the performance of a mmap on avg. out does the performance of a second read as that read cache from the first iteration could&#39;ve been blown away by something else (i.e. resulting in another disk read to recover), whereas an mmap remains persistent within pages."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1483477937, "post_id": 41273202, "comment_id": 70111229, "body": "A separate index would allow all of the necessary data to be read from a single location on the drive (requiring only 1 seek to get there).  Without an index, the program has to either has to read the entire 21MB file sequentially from disk and then discard most of it, or seek ~88 times in order to read only the data he needs -- neither of those two options is going to be fast, regardless of whether you implement them via mmap() or not."}], "tags": [], "owner": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "is_accepted": false, "score": 5, "last_activity_date": 1482360411, "creation_date": 1482360411, "answer_id": 41273202, "question_id": 41273039, "link": "https://stackoverflow.com/questions/41273039/c-fast-random-access-skipping-in-a-large-file/41273202#41273202", "title": "C++ / Fast random access skipping in a large file", "body": "<p>You could use a memory mapped file interface (I recommend <a href=\"http://www.boost.org/doc/libs/1_49_0/libs/iostreams/doc/classes/mapped_file.html\" rel=\"nofollow noreferrer\">boost's implementation.</a>)</p>\n\n<p>This will open the file into the virtual page for your application for quicker lookup time, without going back to the disk.</p>\n"}, {"tags": [], "owner": {"reputation": 128, "user_id": 1057395, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4b6bd9837b72d2c07a982ab436c110d7?s=128&d=identicon&r=PG", "display_name": "norca", "link": "https://stackoverflow.com/users/1057395/norca"}, "is_accepted": true, "score": 2, "last_activity_date": 1482361971, "creation_date": 1482361971, "answer_id": 41273487, "question_id": 41273039, "link": "https://stackoverflow.com/questions/41273039/c-fast-random-access-skipping-in-a-large-file/41273487#41273487", "title": "C++ / Fast random access skipping in a large file", "body": "<p>You could scan the file and make your own header with the key and the index in a seperate file. Depending on your use case you can do it once at program start and everytime the file changes.\nBefore accessing the big data, a lookup in the smaller file gives you the needed index.</p>\n"}, {"tags": [], "owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "is_accepted": false, "score": 0, "last_activity_date": 1482362470, "last_edit_date": 1482362470, "creation_date": 1482362136, "answer_id": 41273508, "question_id": 41273039, "link": "https://stackoverflow.com/questions/41273039/c-fast-random-access-skipping-in-a-large-file/41273508#41273508", "title": "C++ / Fast random access skipping in a large file", "body": "<p>You may be able to do a buffer queuing process with multithreading. You could create a custom struct that would store various amounts of data. </p>\n\n<p>You said: </p>\n\n<blockquote>\n  <p>Each dataset contains a name and the dataset size in bytes, allowing to skip it and go to the next dataset.</p>\n</blockquote>\n\n<p>So as opening and closing the files over and over again is slow you could read the file all in one go and store it into a full buffer object and then parse it or store it into batches. This would also depend on if you are reading in text or binary mode on how easy it is to parse the file. I'll demonstrate the later with populating multiple batches while reading in a buffered size amount of data from file.   </p>\n\n<p><strong>Pseudo Code</strong></p>\n\n<pre><code>struct Batch {\n    std::string name; // Name of Dataset\n    unsigned size;    // Size of Dataset\n    unsigned indexOffset;  // Index to next read location\n    bool empty = true;     // Flag to tell if this batch is full or empty\n    std::vector&lt;DataType&gt; dataset; // Container of Data\n}; \n\nstd::vector&lt;Batch&gt; finishedBatches;\n\n// This doesn't matter on the size of the data set; this is just a buffer size on how much memory to digest in reading the file\nconst unsigned bufferSize = \"Set to Your Preference\" 1MB - 4MB etc.\n\nvoid loadDataFromFile( const std::string&amp; filename, unsigned bufferSize, std::vector&lt;Batch&gt;&amp; batches ) {\n\n    // Set ifstream's buffer size \n\n    // OpenFile For Reading and read in and upto buffer size\n\n    // Spawn different thread to populate the Batches and while that batch is loading \n    // in data read in that much buffer data again. You will need to have a couple local \n    // stack batches to work with. So if a batch is complete and you reached the next index \n    // location from the file you can fill another batch.\n\n    // When a single batch is complete push it into the vector to store that batch.\n    // Change its flag and clear its vector and you can then use that empty batch again.\n\n    // Continue this until you reached end of file.           \n\n}\n</code></pre>\n\n<p>This would be a 2 threaded system here. Main thread for opening and reading from file and seeking from file with a worker thread filling the batches and pushing batches into container and swapping to use next batch. </p>\n"}], "owner": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1221, "favorite_count": 1, "accepted_answer_id": 41273487, "answer_count": 3, "score": 5, "last_activity_date": 1482362861, "creation_date": 1482359604, "last_edit_date": 1482362861, "question_id": 41273039, "link": "https://stackoverflow.com/questions/41273039/c-fast-random-access-skipping-in-a-large-file", "title": "C++ / Fast random access skipping in a large file", "body": "<p>I have large files, containing a small number of large datasets. Each dataset contains a name and the dataset size in bytes, allowing to skip it and go to the next dataset.</p>\n\n<p>I want to build an index of dataset names very quickly. An example of file is about 21MB large, and contains 88 datasets. Reading the 88 names quickly by using a <code>std::ifstream</code> and <code>seekg()</code> to skip between datasets takes about 1300ms, which I would like to reduce.</p>\n\n<p>So in fact, I'm reading 88 chunks of about 30 bytes, at given positions in a 21MB file, and it takes 1300ms.</p>\n\n<p>Is there a way to improve this, or is it an OS and filesystem limitation? I'm running the test under <em>Windows 7 64bit</em>.</p>\n\n<p>I know that having a complete index at the beginning of the file would be better, but the file format does not have this, and we can't change it.</p>\n"}, {"tags": ["c++", "string", "file", "fstream"], "comments": [{"owner": {"reputation": 128, "user_id": 1057395, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4b6bd9837b72d2c07a982ab436c110d7?s=128&d=identicon&r=PG", "display_name": "norca", "link": "https://stackoverflow.com/users/1057395/norca"}, "edited": false, "score": 0, "creation_date": 1482363959, "post_id": 41272994, "comment_id": 69748950, "body": "with the code above you can also copy your data `key2 = key&#39; or adding the data to both values in the same loop"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5727410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f2e7bf28a141a6f448ca61c2eaf07a6?s=128&d=identicon&r=PG&f=1", "display_name": "user5727410", "link": "https://stackoverflow.com/users/5727410/user5727410"}, "edited": false, "score": 0, "creation_date": 1482359657, "post_id": 41273013, "comment_id": 69747558, "body": "Thanks so much! I know it&#39;s probebly silly question but you realy helped me alot!"}, {"owner": {"reputation": 2709, "user_id": 360913, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/URPxE.jpg?s=128&g=1", "display_name": "Marichyasana", "link": "https://stackoverflow.com/users/360913/marichyasana"}, "edited": false, "score": 0, "creation_date": 1482365142, "post_id": 41273013, "comment_id": 69749244, "body": "Also consider <code>void rewind ( FILE * stream );</code> from <a href=\"http://www.cplusplus.com/reference/cstdio/rewind/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cstdio/rewind</a>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "is_accepted": true, "score": 2, "last_activity_date": 1482359498, "creation_date": 1482359498, "answer_id": 41273013, "question_id": 41272994, "link": "https://stackoverflow.com/questions/41272994/how-can-i-take-data-from-fstream-and-then-take-it-again/41273013#41273013", "title": "How can I take data from fstream and then take it again?", "body": "<p><em>Rewind</em> the stream:</p>\n\n<pre><code>file.clear();\nfile.seekg(0);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5727410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f2e7bf28a141a6f448ca61c2eaf07a6?s=128&d=identicon&r=PG&f=1", "display_name": "user5727410", "link": "https://stackoverflow.com/users/5727410/user5727410"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 41273013, "answer_count": 1, "score": 0, "last_activity_date": 1482363811, "creation_date": 1482359411, "last_edit_date": 1482363811, "question_id": 41272994, "link": "https://stackoverflow.com/questions/41272994/how-can-i-take-data-from-fstream-and-then-take-it-again", "title": "How can I take data from fstream and then take it again?", "body": "<p>I'm a begginer at c++, so I wanted to ask, how can I take data from <code>fstream</code>\nafter I already took all the data from it?</p>\n\n<p>I have done something like this</p>\n\n<pre><code>fstream file;\nstring data, key, key2;\nwhile(file&gt;&gt;data)\n{\n    key += data;\n}\n</code></pre>\n\n<p>Now I want to do it again with the same file but without re-open it:</p>\n\n<pre><code>while(file&gt;&gt;data)\n{\n    key2 += data;\n}\n</code></pre>\n\n<p>How can I do that with <code>fstream</code>?</p>\n"}, {"tags": ["c++", "winapi", "networking", "iocp", "kernel32"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1482360347, "post_id": 41272945, "comment_id": 69747822, "body": "and for what you wait ? impossible give answer based only on this info. you need debug process, and look where/why was exception exactly"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 2, "creation_date": 1482360562, "post_id": 41272945, "comment_id": 69747902, "body": "and notable - &quot;test64.dll_unloaded&quot; - dll where hook is unloaded ?"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1482361376, "post_id": 41272945, "comment_id": 69748219, "body": "The most likely reason why GetQueuedCompletionStatus in particular is giving you trouble is that it is a blocking function, i.e., there&#39;s a much greater chance that it is running at the time you install or remove the hook.  The fact that the exception is identified as being in an unloaded DLL (as RbMm observed) makes me think the problem is that you&#39;re removing the hook and unloading the hook DLL, is that so?  (Once a hook is installed, there&#39;s no safe way to unload the DLL containing the hook function.  Just leave it loaded.)"}, {"owner": {"reputation": 602, "user_id": 903612, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8f9272524e9087c29bb36d495c599f40?s=128&d=identicon&r=PG", "display_name": "Kracken", "link": "https://stackoverflow.com/users/903612/kracken"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1482361654, "post_id": 41272945, "comment_id": 69748316, "body": "@HarryJohnston @RbMm no i&#39;m not unloading dll and i install hook when process is inactive(when start with <code>CREATE_SUSPENDED</code> flag). Also i don&#39;t unhook"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 2, "creation_date": 1482361900, "post_id": 41272945, "comment_id": 69748392, "body": "with provided info can not research bug. i be advice - create self simply exe. set hook, and than call <code>GetQueuedCompletionStatus</code> - trace this call in debugger step by step. faster of all this just show problem"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1482362512, "post_id": 41272945, "comment_id": 69748566, "body": "code which you show useless - it not say more than you somehow set hook. <code>cHookMgr.Hook</code>, <code>Information::Instance().pTrampolineGetQueuedCompletionStatus</code> - how this worked not visible. usefull info say asm dump of GetQueuedCompletionStatus code. and may be also problem because in <code>kernel32.dll</code> <code>GetQueuedCompletionStatus</code> - is single jump to <code>kernelbase.dll</code> - where real implementation. so without asm code of hooked function and trampoline - impossible say. but the best - trace in self process call to <code>GetQueuedCompletionStatus</code> under debugger"}], "owner": {"reputation": 602, "user_id": 903612, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8f9272524e9087c29bb36d495c599f40?s=128&d=identicon&r=PG", "display_name": "Kracken", "link": "https://stackoverflow.com/users/903612/kracken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 220, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1482359140, "creation_date": 1482359140, "question_id": 41272945, "link": "https://stackoverflow.com/questions/41272945/crashes-with-hooked-getqueuedcompletionstatus", "title": "Crashes with hooked GetQueuedCompletionStatus", "body": "<p>i'm hooking <code>GetQueuedCompletionStatus</code> function with code below:</p>\n\n<pre><code>// hook code\ntypedef BOOL (__stdcall * MyGetQueuedCompletionStatus)(\n  _In_  HANDLE       CompletionPort,\n  _Out_ LPDWORD      lpNumberOfBytes,\n  _Out_ PULONG_PTR   lpCompletionKey,\n  _Out_ LPOVERLAPPED *lpOverlapped,\n  _In_  DWORD        dwMilliseconds\n);\n\nstatic BOOL __stdcall OwnGetQueuedCompletionStatus(\n    __in  HANDLE CompletionPort,\n    __out LPDWORD lpNumberOfBytesTransferred,\n    __out PULONG_PTR lpCompletionKey,\n    __out LPOVERLAPPED *lpOverlapped,\n    __in  DWORD dwMilliseconds\n    );    \n\nint hook()\n{\n    LPVOID fnOrigGetQueuedCompletionStatus = ::GetProcAddress(LoadLibrary(\"kernel32.dll\"),  \"GetQueuedCompletionStatus\");\n    DWORD dwOsErr = cHookMgr.Hook(&amp;nHookId, (LPVOID*)&amp;(Information::Instance().pTrampolineGetQueuedCompletionStatus), fnOrigGetQueuedCompletionStatus, OwnGetQueuedCompletionStatus);\n}\n\nstatic BOOL __stdcall OwnGetQueuedCompletionStatus(\n    __in  HANDLE CompletionPort,\n    __out LPDWORD lpNumberOfBytesTransferred,\n    __out PULONG_PTR lpCompletionKey,\n    __out LPOVERLAPPED *lpOverlapped,\n    __in  DWORD dwMilliseconds\n    )\n{\n    return Information::Instance().pTrampolineGetQueuedCompletionStatus(CompletionPort, lpNumberOfBytesTransferred, lpCompletionKey, lpOverlapped, dwMilliseconds);\n}\n</code></pre>\n\n<p>As you can see, fake function does nothing but i always have crashes when hooking app use it:</p>\n\n<blockquote>\n  <p>Problem Event Name: BEX64<br>\n    Application Name: MainServer.exe<br>\n  Application Timestamp: 575f98b7<br>\n    Fault Module Name: test64.dll_unloaded<br>\n    Fault Module Version: 0.0.0.0<br>\n    Fault Module Timestamp: 585af544<br>\n    Exception Offset: 00000000000025a0<br>\n  Exception Code: c0000005   Exception Data: 0000000000000008</p>\n</blockquote>\n\n<p>Other hooked functions work well.\nHow can i fix that?</p>\n"}, {"tags": ["c++", "googletest", "googlemock"], "comments": [{"owner": {"reputation": 889, "user_id": 7174778, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ea532fbe618953b221b4da28d03d56dd?s=128&d=identicon&r=PG&f=1", "display_name": "YotKay", "link": "https://stackoverflow.com/users/7174778/yotkay"}, "edited": false, "score": 1, "creation_date": 1482523545, "post_id": 41272942, "comment_id": 69817523, "body": "Ok, I solved the problem. It turned out that I cannot compile libraries with Visual Studio and then use it with G++. I had to switch to a different approach and this video was very helpful: <a href=\"https://www.youtube.com/watch?v=y9sGAF1k63o&amp;list=PL0SUKxlBaq1COi52nuq2lPf6AbMRrn2LI&amp;index=7\" rel=\"nofollow noreferrer\">youtube.com/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 889, "user_id": 7174778, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ea532fbe618953b221b4da28d03d56dd?s=128&d=identicon&r=PG&f=1", "display_name": "YotKay", "link": "https://stackoverflow.com/users/7174778/yotkay"}, "is_accepted": false, "score": 1, "last_activity_date": 1482523734, "creation_date": 1482523734, "answer_id": 41307310, "question_id": 41272942, "link": "https://stackoverflow.com/questions/41272942/working-with-gtest-and-gmock-on-windows/41307310#41307310", "title": "Working with Gtest and Gmock on Windows", "body": "<p>Ok, I solved the problem. It turned out that I cannot compile libraries with Visual Studio and then use it with G++. I had to switch to a different approach and this video was very helpful: <a href=\"https://www.youtube.com/watch?v=y9sGAF1k63o&amp;list=PL0SUKxlBaq1COi52nuq2lPf6AbMRrn2LI&amp;index=7\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=y9sGAF1k63o&amp;list=PL0SUKxlBaq1COi52nuq2lPf6AbMRrn2LI&amp;index=7</a></p>\n\n<p>The video teaches how to use gtest with Eclipse but not using library but fused cpp and h files from gtest script. It works fine. The only problem I had is that I installed python 3.5 version and it is not backwards compatible in some cases with python 2.7 used in the 'fuse' script, but I managed to quickly correct these few cases and make it work.</p>\n"}, {"tags": [], "owner": {"reputation": 1622, "user_id": 7343388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d0dc7456b14b1a70bd862e8495d36a6?s=128&d=identicon&r=PG", "display_name": "Soeren", "link": "https://stackoverflow.com/users/7343388/soeren"}, "is_accepted": false, "score": 3, "last_activity_date": 1485881328, "creation_date": 1485881328, "answer_id": 41962988, "question_id": 41272942, "link": "https://stackoverflow.com/questions/41272942/working-with-gtest-and-gmock-on-windows/41962988#41962988", "title": "Working with Gtest and Gmock on Windows", "body": "<p>in addition to your correct answer:\nif you want to work with external libraries (like gmock or gtest), you have to compile the libraries AND your program with the same compiler. And that is why your program throws the error with the undefined reference. In visual studio there is the MSVC compiler. If you want to work with VS, then just compile your program also with VS.\nAnd that's not all, you have to use the same compiler and the same settings (for example compiling in debug mode)</p>\n\n<p>I'm just wanted to add this to your answer. Because of you wrote:</p>\n\n<blockquote>\n  <p>It turned out that I cannot compile libraries with Visual Studio </p>\n</blockquote>\n\n<p>and that's wrong, you can compile the libraries with VS, but you cant't link them against your program. Perhaps that was already clear, then excuse my answer.</p>\n"}], "owner": {"reputation": 889, "user_id": 7174778, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ea532fbe618953b221b4da28d03d56dd?s=128&d=identicon&r=PG&f=1", "display_name": "YotKay", "link": "https://stackoverflow.com/users/7174778/yotkay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1943, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1485881328, "creation_date": 1482359114, "last_edit_date": 1483736154, "question_id": 41272942, "link": "https://stackoverflow.com/questions/41272942/working-with-gtest-and-gmock-on-windows", "title": "Working with Gtest and Gmock on Windows", "body": "<p>I have a problem with starting using Gtest and Gmock on Windows10. I normally work on Linux but wanted to switch to Windows and encountered a problem.</p>\n\n<p>I managed to build the Gmock and Gtest according to the documentation (with Cmake and Visual Studio). I have the gmock.lib and gtest.lib files in apropriate directories. But when I want to link them to my test program I can see dozens of errors of type \"undefined reference\".</p>\n\n<p>The command I use is:</p>\n\n<pre><code>g++ \"-LC:\\\\Users\\\\jacek\\\\cpp\\\\googletest\\\\googlemock\\\\Debug\" \"-LC:\\\\Users\\\\jacek\\\\cpp\\\\googletest\\\\googlemock\\\\gtest\\\\Debug\" -o HelloWorld \"src\\\\counter.o\" \"src\\\\counter_test.o\" -lgmock -lgtest\n</code></pre>\n\n<p>The errors are for example:</p>\n\n<pre><code>C:\\Users\\jacek\\workspace\\HelloWorld\\Debug/../src/counter_test.cpp:14: undefined reference to testing::Message::Message()' C:\\Users\\jacek\\workspace\\HelloWorld\\Debug/../src/counter_test.cpp:14: undefined reference to testing::internal::AssertHelper::AssertHelper(testing::TestPartResult::Type, char const*, int, char const*)'\n</code></pre>\n\n<p>I tried searching on this and found that maybe I should build shared libraries. I rebuilt the gmock and gtest with appropriate option, now I have also dll files, but I receive still the same errors.</p>\n\n<p>What am I doing wrong here?</p>\n\n<p>Can it be an issue that the libraries on linux are named differently than on windows? (libgmock.a vs gmock.lib) Should I change something in the command to g++ due to that?</p>\n\n<p>The paths I pasted are good, the files are there (otherwise the error would be different).</p>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["c++", "random"], "comments": [{"owner": {"reputation": 541, "user_id": 659841, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e870e028a77ab05aac6ea6f6a026596f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/659841/eric"}, "edited": false, "score": 4, "creation_date": 1482359035, "post_id": 41272911, "comment_id": 69747273, "body": "Maybe put the assignment for L inside the loop so you get a new random number each pass?"}, {"owner": {"reputation": 522, "user_id": 966011, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2fa9f9d158feb205a570f25ac96aa54a?s=128&d=identicon&r=PG", "display_name": "Bamaco", "link": "https://stackoverflow.com/users/966011/bamaco"}, "edited": false, "score": 0, "creation_date": 1482359306, "post_id": 41272911, "comment_id": 69747391, "body": "You may initialize the stdio generator with srand() see <a href=\"http://www.cplusplus.com/reference/cstdlib/srand/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cstdlib/srand</a> You could use something like clock() to initialize the seed. see <a href=\"http://www.cplusplus.com/reference/ctime/clock/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/ctime/clock</a> Also, of course, using c++11 you have access to real c++ random number generator see <a href=\"http://www.cplusplus.com/reference/random/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/random</a>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1482361366, "post_id": 41272911, "comment_id": 69748210, "body": "Reopened. This isn&#39;t a duplicate of the question about <code>srand</code>. In fact, it&#39;s not about <code>rand()</code> at all; it&#39;s about the meaning of assignment operations."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1482361484, "post_id": 41272911, "comment_id": 69748263, "body": "<a href=\"http://xkcd.com/221/\" rel=\"nofollow noreferrer\">xkcd.com/221</a>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1482362738, "post_id": 41272911, "comment_id": 69748634, "body": "Downvoters: this is a legitimate question, and it reflects a very common beginner&#39;s confusion."}], "answers": [{"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1482361538, "creation_date": 1482361538, "answer_id": 41273419, "question_id": 41272911, "link": "https://stackoverflow.com/questions/41272911/alternative-to-cstdlibs-rand/41273419#41273419", "title": "Alternative to cstdlib&#39;s rand()", "body": "<p>This has nothing to do with <code>rand()</code>. The problem is that the code assigns a value to <code>L</code>, then enters the loop, writing the (same) value of <code>L</code> multiple times. Keep in mind, once you assign a value to a variable, it holds that value until you change it. So change your function from</p>\n\n<pre><code>void Gla()\n{\n  int L;\n  L = rand();\n  while(1)\n  {\n      cout&lt;&lt;L&lt;&lt;endl;\n  }\n}\n</code></pre>\n\n<p>to</p>\n\n<pre><code>void Gla()\n{\n  int L;\n  while(1)\n  {\n      L = rand();\n      cout&lt;&lt;L&lt;&lt;endl;\n  }\n}\n</code></pre>\n\n<p>That way, the value of <code>L</code> gets updated each time through the loop.</p>\n"}], "owner": {"reputation": 7, "user_id": 7306670, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A-jW4nArd9M/AAAAAAAAAAI/AAAAAAAADgs/RcRhnc2W3c4/photo.jpg?sz=128", "display_name": "Xrey274", "link": "https://stackoverflow.com/users/7306670/xrey274"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1482361538, "creation_date": 1482358977, "question_id": 41272911, "link": "https://stackoverflow.com/questions/41272911/alternative-to-cstdlibs-rand", "title": "Alternative to cstdlib&#39;s rand()", "body": "<p>Is there an alternative to rand()?Since rand()(at least for me)is freaking broken.So if you know an alternative to rand() in c++ please tell me.Since every time i run this simple code:</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n\nusing namespace std;\n\nvoid Gla()\n{\n  int L;\n  L = rand();\n  while(1)\n  {\n      cout&lt;&lt;L&lt;&lt;endl;\n  }\n}\n\n\nint main()\n{\n    Gla();\n    return 0;\n}\n</code></pre>\n\n<p>It continously outputs 41, i don't know why it just does.</p>\n"}, {"tags": ["c++", "linux", "qt", "vtk", "itk"], "answers": [{"tags": [], "owner": {"reputation": 2597, "user_id": 276168, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c3737e23c60ee88122120ea1eff8017?s=128&d=identicon&r=PG", "display_name": "D\u017eenan", "link": "https://stackoverflow.com/users/276168/d%c5%beenan"}, "is_accepted": true, "score": 2, "last_activity_date": 1482361962, "creation_date": 1482361962, "answer_id": 41273485, "question_id": 41272904, "link": "https://stackoverflow.com/questions/41272904/qt-vtk-project-on-linux-not-running/41273485#41273485", "title": "QT, VTK project on linux not running", "body": "<p>A big chunk of your code (<code>_textureCoordinates</code> and stuff above) is not connected to the rest. And what you have shown here is not a runnable example, but it looks like you are not properly setting up VTK (compare with <a href=\"http://www.vtk.org/Wiki/VTK/Examples/Cxx/Rendering/Cylinder\" rel=\"nofollow noreferrer\">VTK hello world</a>).</p>\n\n<p>Have you tried looking at some of the <a href=\"http://www.vtk.org/Wiki/VTK/Examples/Cxx\" rel=\"nofollow noreferrer\">examples</a> on VTK wiki? Also, why don't you start with a working <a href=\"http://www.vtk.org/Wiki/VTK/Examples/Cxx/Qt/SideBySideRenderWindowsQt\" rel=\"nofollow noreferrer\">VTK/QT example</a> and gradually extend it?</p>\n"}], "owner": {"reputation": 323, "user_id": 4587953, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a17fd2693752b4b116c1f3972a14bc3f?s=128&d=identicon&r=PG&f=1", "display_name": "Dev Loots", "link": "https://stackoverflow.com/users/4587953/dev-loots"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 41273485, "answer_count": 1, "score": 1, "last_activity_date": 1482361962, "creation_date": 1482358940, "question_id": 41272904, "link": "https://stackoverflow.com/questions/41272904/qt-vtk-project-on-linux-not-running", "title": "QT, VTK project on linux not running", "body": "<p>I am trying to launch a ITK/VTQ project with Qt. The project runs on Windows 10, but not on Ubuntu.</p>\n\n<p>I have the following error during launching the project:</p>\n\n<pre><code>X Error: BadColor (invalid Colormap parameter) 12\n  Major opcode: 1 (X_CreateWindow)\n  Resource id:  0x4a00001\nX Error: BadWindow (invalid Window parameter) 3\n  Major opcode: 3 (X_GetWindowAttributes)\n  Resource id:  0x480001a\nX Error: BadWindow (invalid Window parameter) 3\n  Major opcode: 2 (X_ChangeWindowAttributes)\n  Resource id:  0x480001a\nX Error: BadWindow (invalid Window parameter) 3\n  Major opcode: 2 (X_ChangeWindowAttributes)\n  Resource id:  0x480001a\nX Error: BadWindow (invalid Window parameter) 3\n  Major opcode: 2 (X_ChangeWindowAttributes)\n  Resource id:  0x480001a\nX Error: BadWindow (invalid Window parameter) 3\n  Major opcode: 2 (X_ChangeWindowAttributes)\n  Resource id:  0x480001a\nX Error: BadWindow (invalid Window parameter) 3\n  Major opcode: 7 (X_ReparentWindow)\n  Resource id:  0x480001a\nX Error: BadWindow (invalid Window parameter) 3\n  Major opcode: 2 (X_ChangeWindowAttributes)\n  Resource id:  0x480001a\nX Error: BadWindow (invalid Window parameter) 3\n  Major opcode: 10 (X_UnmapWindow)\n  Resource id:  0x480001a\nX Error: BadWindow (invalid Window parameter) 3\n  Major opcode: 12 (X_ConfigureWindow)\n  Resource id:  0x480001a\nX Error: BadWindow (invalid Window parameter) 3\n  Major opcode: 8 (X_MapWindow)\n  Resource id:  0x480001a\nX Error: BadWindow (invalid Window parameter) 3\n  Major opcode: 2 (X_ChangeWindowAttributes)\n  Resource id:  0x480001a\nX Error: BadWindow (invalid Window parameter) 3\n  Major opcode: 8 (X_MapWindow)\n  Resource id:  0x480001a\nX Error: BadWindow (invalid Window parameter) 3\n  Major opcode: 2 (X_ChangeWindowAttributes)\n  Resource id:  0x480001a\nX Error: BadWindow (invalid Window parameter) 3\n  Major opcode: 2 (X_ChangeWindowAttributes)\n  Resource id:  0x480001a\nX Error: BadWindow (invalid Window parameter) 3\n  Major opcode: 3 (X_GetWindowAttributes)\n  Resource id:  0x480001a\nErreur de segmentation (core dumped)\n</code></pre>\n\n<p>Here is my code :</p>\n\n<pre><code>void ImageViewerWidget::InitRender()\n{\n\n/*** INITIALIZATION ***/\n\n// init the actor\nm_texturedQuad = vtkSmartPointer&lt;vtkActor&gt;::New();\n_openGLproperty = static_cast&lt;vtkOpenGLProperty*&gt;(m_texturedQuad-&gt;GetProperty());\n\n// init the quad\n_quadPolyData = vtkSmartPointer&lt;vtkPolyData&gt;::New();\n\n\n// create the texture object\n_textureCoordinates = vtkSmartPointer&lt;vtkFloatArray&gt;::New();\n_textureCoordinates-&gt;SetNumberOfComponents(3);\n_textureCoordinates-&gt;SetName(\"TextureCoordinates\");\n\nfloat tuple[3] = {0.0, 0.0, 0.0};\n_textureCoordinates-&gt;InsertNextTuple(tuple);\ntuple[0] = 1.0; tuple[1] = 0.0; tuple[2] = 0.0;\n_textureCoordinates-&gt;InsertNextTuple(tuple);\ntuple[0] = 1.0; tuple[1] = 1.0; tuple[2] = 0.0;\n_textureCoordinates-&gt;InsertNextTuple(tuple);\ntuple[0] = 0.0; tuple[1] = 1.0; tuple[2] = 0.0;\n_textureCoordinates-&gt;InsertNextTuple(tuple);\n\n\n// create the itk/vtk converter\nm_itkToVtkConverter = itk::ImageToVTKImageFilter&lt;itk::Image&lt;float, 3&gt; &gt;::New();\n\n\n/*** Init the Renderer ***/\nm_imageRenderer = vtkSmartPointer&lt;vtkRenderer&gt;::New();\nm_imageRenderer-&gt;SetBackground(1,1,1); // Background color white\nm_imageRenderer-&gt;ResetCamera();\n\n\n/*** Init the Render Window ***/\nm_imageRenderWindow = vtkSmartPointer&lt;vtkRenderWindow&gt;::New();\nm_imageRenderWindow-&gt;AddRenderer(m_imageRenderer);\n\n\n/*** Init the Shader ***/\nSetActiveShader(\"BasicShader\");\n\n\n/*** Set Render Window to viewer ***/\n// FIXME: the software crashes here on GNU/Linux\nviewer-&gt;SetRenderWindow(m_imageRenderWindow);\n\n}\n</code></pre>\n\n<p>I found that the problem is here :</p>\n\n<pre><code>viewer-&gt;SetRenderWindow(m_imageRenderWindow);\n</code></pre>\n\n<p>How I can correct this error message ?</p>\n\n<p>Where is the problem ?</p>\n"}, {"tags": ["c++", "multithreading", "boost"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1482359097, "post_id": 41272895, "comment_id": 69747305, "body": "You need to learn to walk before you try to run. Don&#39;t try to write multi-threaded code until you at least understand the basics of C++, including the meaning of <b>initialization</b>."}, {"owner": {"reputation": 321, "user_id": 6805830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c220c56cf6ab9fa1768179dd02057c2?s=128&d=identicon&r=PG&f=1", "display_name": "Ariel Baron", "link": "https://stackoverflow.com/users/6805830/ariel-baron"}, "edited": false, "score": 0, "creation_date": 1482359162, "post_id": 41272895, "comment_id": 69747330, "body": "the console prints: error: no match for call to \u2018(boost::thread) (void (&amp;)())\u2019"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1482359281, "post_id": 41272895, "comment_id": 69747380, "body": "That error message is not about initialization. The object was initialized when it was created, at the top of the source file."}, {"owner": {"reputation": 321, "user_id": 6805830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c220c56cf6ab9fa1768179dd02057c2?s=128&d=identicon&r=PG&f=1", "display_name": "Ariel Baron", "link": "https://stackoverflow.com/users/6805830/ariel-baron"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1482359529, "post_id": 41272895, "comment_id": 69747500, "body": "@MikeF. I tried that and It gave me the same error"}, {"owner": {"reputation": 321, "user_id": 6805830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c220c56cf6ab9fa1768179dd02057c2?s=128&d=identicon&r=PG&f=1", "display_name": "Ariel Baron", "link": "https://stackoverflow.com/users/6805830/ariel-baron"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1482359592, "post_id": 41272895, "comment_id": 69747529, "body": "sorry, I just edited. I meant to say I called t(some_func) and I got the posted error."}], "answers": [{"comments": [{"owner": {"reputation": 321, "user_id": 6805830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c220c56cf6ab9fa1768179dd02057c2?s=128&d=identicon&r=PG&f=1", "display_name": "Ariel Baron", "link": "https://stackoverflow.com/users/6805830/ariel-baron"}, "edited": false, "score": 0, "creation_date": 1482418360, "post_id": 41273649, "comment_id": 69773493, "body": "I get the following errors:  error: invalid initialization of non-const reference of type \u2018boost::thread&amp;\u2019 from an rvalue of type \u2018boost::thread\u2019         t.swap(boost::thread(&amp;some_func)); initializing argument 1 of \u2018void boost::thread::swap(boost::thread&amp;)\u2019          void swap(thread&amp; x) BOOST_NOEXCEPT"}, {"owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "reply_to_user": {"reputation": 321, "user_id": 6805830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c220c56cf6ab9fa1768179dd02057c2?s=128&d=identicon&r=PG&f=1", "display_name": "Ariel Baron", "link": "https://stackoverflow.com/users/6805830/ariel-baron"}, "edited": false, "score": 0, "creation_date": 1482428095, "post_id": 41273649, "comment_id": 69779922, "body": "Hmmm... now I am a bit stumped. I have used the std::thread.swap in that fashion, which I had thought was based on the boost threads. In my case, I was not using a global, but instead a member of a class that was only spawned under certain conditions.."}, {"owner": {"reputation": 8115, "user_id": 4636534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GoTz67GRao8/AAAAAAAAAAI/AAAAAAAAADI/PyDv-i56924/photo.jpg?sz=128", "display_name": "Andrey Semashev", "link": "https://stackoverflow.com/users/4636534/andrey-semashev"}, "edited": false, "score": 0, "creation_date": 1482489314, "post_id": 41273649, "comment_id": 69801758, "body": "I have corrected the answer. You cannot invoke <code>swap</code> with an rvalue argument."}, {"owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "reply_to_user": {"reputation": 8115, "user_id": 4636534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GoTz67GRao8/AAAAAAAAAAI/AAAAAAAAADI/PyDv-i56924/photo.jpg?sz=128", "display_name": "Andrey Semashev", "link": "https://stackoverflow.com/users/4636534/andrey-semashev"}, "edited": false, "score": 0, "creation_date": 1482511771, "post_id": 41273649, "comment_id": 69812781, "body": "@AndreySemashev Is that a boost specific limitation?"}, {"owner": {"reputation": 8115, "user_id": 4636534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GoTz67GRao8/AAAAAAAAAAI/AAAAAAAAADI/PyDv-i56924/photo.jpg?sz=128", "display_name": "Andrey Semashev", "link": "https://stackoverflow.com/users/4636534/andrey-semashev"}, "edited": false, "score": 0, "creation_date": 1482577768, "post_id": 41273649, "comment_id": 69828692, "body": "No, that is pure C++. <code>swap</code> accepts an lvalue reference, which cannot be bound to an rvalue. Well, except some versions of MSVC, which is buggy."}, {"owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "reply_to_user": {"reputation": 8115, "user_id": 4636534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GoTz67GRao8/AAAAAAAAAAI/AAAAAAAAADI/PyDv-i56924/photo.jpg?sz=128", "display_name": "Andrey Semashev", "link": "https://stackoverflow.com/users/4636534/andrey-semashev"}, "edited": false, "score": 0, "creation_date": 1482599806, "post_id": 41273649, "comment_id": 69834077, "body": "@AndreySemashev Which explains why it works for me... I&#39;ll have to fix that."}], "tags": [], "owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "is_accepted": false, "score": 1, "last_activity_date": 1482494017, "last_edit_date": 1482494017, "creation_date": 1482363159, "answer_id": 41273649, "question_id": 41272895, "link": "https://stackoverflow.com/questions/41272895/is-it-possible-to-declare-a-boost-thread-globally/41273649#41273649", "title": "Is it possible to declare a boost thread globally?", "body": "<p>The default constructor for <code>t</code> initializes the object to have no active thread. In order to fix this, you will have to perform a swap.</p>\n\n<pre><code>boost::thread(&amp;some_func).swap(t);\n</code></pre>\n\n<p>or an assignment from rvalue (in C++11):</p>\n\n<pre><code>t = boost::thread(&amp;some_func);\n</code></pre>\n"}], "owner": {"reputation": 321, "user_id": 6805830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c220c56cf6ab9fa1768179dd02057c2?s=128&d=identicon&r=PG&f=1", "display_name": "Ariel Baron", "link": "https://stackoverflow.com/users/6805830/ariel-baron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1482494017, "creation_date": 1482358894, "last_edit_date": 1482420490, "question_id": 41272895, "link": "https://stackoverflow.com/questions/41272895/is-it-possible-to-declare-a-boost-thread-globally", "title": "Is it possible to declare a boost thread globally?", "body": "<p>Hello I would like to declare a boost thread globally and initialize it later.\nso: </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\nboost::thread t;\n\nvoid some_func()\n{\n    printf(\"hello world\\n\");\n}\n\nint main()\n{\n    t(some_func);\n\n    return 0;\n}\n</code></pre>\n\n<p>It is returning an error about the initialization. </p>\n\n<pre><code>error: no match for call to \u2018(boost::thread) (void (&amp;)())\n</code></pre>\n\n<p>So how would I initialize it?</p>\n\n<p>EDIT:: The reason I would like to do this is because I would like to spawn threads based on a condition. So in pseudo code:</p>\n\n<pre><code>    if (cond A satisfied)\n        spawn thread_A\n\n   if (cond B satisfied)\n          spawn thread_B\n\n\n         // Do some stuff\n\n         if (cond B satisfied)\n          thread_B.join()\n\n     if (cond A satisfied)\n           thread_A.join()\n</code></pre>\n\n<p>if the threads do not have global scope, then I cannot do this</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1482359038, "post_id": 41272878, "comment_id": 69747276, "body": "You&#39;re not doing anything wrong, but read the answers to the duplicate carefully."}, {"owner": {"reputation": 1942, "user_id": 969365, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/1EnZd.png?s=128&g=1", "display_name": "simon", "link": "https://stackoverflow.com/users/969365/simon"}, "edited": false, "score": 1, "creation_date": 1482359048, "post_id": 41272878, "comment_id": 69747282, "body": "Hint: change <code>Buffer&lt;int, 10&gt; b;</code> to <code>const Buffer&lt;int, 10&gt; b;</code>. See any difference in your output?"}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1482359739, "post_id": 41272878, "comment_id": 69747592, "body": "<code>T&amp; operator[](std::size_t pos)</code> isn&#39;t different from <code>const T&amp; operator[](std::size_t pos)</code> for this case, but you escape compile error, because second one actually got const argument  <code>this</code>, by declaring it  <code>const T&amp; operator[](std::size_t pos) const</code>. Latter one is valid to use when the object it used on is const as well, in other cases compiler will prefer  former."}, {"owner": {"reputation": 23, "user_id": 7327814, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-E2h196GvZjw/AAAAAAAAAAI/AAAAAAAAAP0/p_jPcvrN7mA/photo.jpg?sz=128", "display_name": "yancheelo", "link": "https://stackoverflow.com/users/7327814/yancheelo"}, "edited": false, "score": 0, "creation_date": 1482361009, "post_id": 41272878, "comment_id": 69748060, "body": "&lt;pre&gt;T&amp; operator[](std::size_t pos)&lt;/pre&gt; <b>it is</b> different from &lt;pre&gt;const T&amp; operator[](std::size_t pos) const&lt;/pre&gt;. The former tells me that I can change the referenced value, the latter tells me that I can&#39;t do it. Please note the <b>const</b> attribute for the getter method."}], "owner": {"reputation": 23, "user_id": 7327814, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-E2h196GvZjw/AAAAAAAAAAI/AAAAAAAAAP0/p_jPcvrN7mA/photo.jpg?sz=128", "display_name": "yancheelo", "link": "https://stackoverflow.com/users/7327814/yancheelo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "closed_date": 1482358993, "answer_count": 0, "score": 1, "last_activity_date": 1482358935, "creation_date": 1482358820, "last_edit_date": 1495541321, "question_id": 41272878, "link": "https://stackoverflow.com/questions/41272878/c-bracket-operator-get-set", "closed_reason": "Duplicate", "title": "C++ bracket operator get/set", "body": "<p>I am puzzled with the following piece of code where I am trying to understand the difference between getter/setter of the C++ bracket operator.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\ntemplate &lt;class T, std::size_t N&gt;\nclass Buffer\n{\npublic:\n    Buffer() : _pos(0) {}\n    ~Buffer() {}\n    //T&amp; operator[](std::size_t pos) { cout &lt;&lt; \"\\nSet\\n\"; return _data[pos]; }\n    const T&amp; operator[](std::size_t pos) const { cout &lt;&lt; \"\\nGet\\n\"; return _data[pos]; }    \nprivate:\n    T _data[N];\n    std::size_t _pos;\n};\n\nint main()\n{\n    Buffer&lt;int, 10&gt; b;\n    int i = b[0];\n    (void)i;\n    return 0;\n}\n</code></pre>\n\n<p>I am compiling it using GCC 4.9.3 (MinGW).\nWhen I run it, it prints \"Get\" as expected, since I am not changing the Buffer object in the assignment <pre>int i = b[0];</pre>\nBut if I un-comment the setter operator <pre>T&amp; operator[](std::size_t pos)</pre> then this time the program prints \"Set\". I cannot explain this behavior.</p>\n\n<p>I have read many examples, including <a href=\"https://stackoverflow.com/questions/19217813/operator-c-get-set\">this one</a>, where it is recommended to use a 'proxy' class, but then I do not understand why this approach is not used in the implementation of std::array like in the <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.6.3/libstdc++/api/a00752_source.html\" rel=\"nofollow noreferrer\">GCC implementation</a>. My Buffer class is intended to be similar to std::array.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c++", "windows", "visual-studio", "opencl"], "comments": [{"owner": {"reputation": 5977, "user_id": 1745695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b932c5253c45af61dc443fbc1b9c935c?s=128&d=identicon&r=PG", "display_name": "Dithermaster", "link": "https://stackoverflow.com/users/1745695/dithermaster"}, "edited": false, "score": 0, "creation_date": 1483305673, "post_id": 41272795, "comment_id": 70043475, "body": "What kind of device limits CL_DEVICE_MAX_WORK_ITEM_SIZES to just 256 x 256 x 256? Most I&#39;ve seen have these at least 8192 x 8192 x (something) or larger."}], "answers": [{"tags": [], "owner": {"reputation": 300, "user_id": 6221642, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-VfFCMY6NznA/AAAAAAAAAAI/AAAAAAAAACE/KpkmsLQYFZw/photo.jpg?sz=128", "display_name": "Tiger Hwang", "link": "https://stackoverflow.com/users/6221642/tiger-hwang"}, "is_accepted": false, "score": 0, "last_activity_date": 1482399032, "creation_date": 1482399032, "answer_id": 41279818, "question_id": 41272795, "link": "https://stackoverflow.com/questions/41272795/opencl-global-local-work-size-choice/41279818#41279818", "title": "OpenCL global/local work size choice", "body": "<p>The total local work size cannot exceed CL_DEVICE_MAX_WORK_GROUP_SIZE, and each of them cannot exceed CL_DEVICE_MAX_WORK_ITEM_SIZES.  In your case using local work size {4, 8, 8} is ok.<br>\nEach one in global work size must be multiple of local work size.  When your kernel process only one piece of data, you have to set global work size bigger than your array size, and add a check inside kernel like this</p>\n\n<pre><code>if (get_global_id(0) &lt; array_size_x)    {   ...   }\n</code></pre>\n\n<p>Of couse each item can process more data, you must check differently in different cases.</p>\n\n<p>Each device has different work size, they must be set independently.  Making different devices running same kernel at same time is not an easy task.</p>\n"}], "owner": {"reputation": 31, "user_id": 7326902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfce9fa004688864ef88dd914851e2d6?s=128&d=identicon&r=PG&f=1", "display_name": "user7326902", "link": "https://stackoverflow.com/users/7326902/user7326902"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 920, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1482399032, "creation_date": 1482358375, "question_id": 41272795, "link": "https://stackoverflow.com/questions/41272795/opencl-global-local-work-size-choice", "title": "OpenCL global/local work size choice", "body": "<p>I'm learning to use opencl. Now my task is very simple, copy one large array to another one. Let's say a[301][300][300] to b[301][300][300]. It's just a test to make me understand what's global work size and local work size. And I use SVM to pass float8 vector array to kernel.</p>\n\n<pre><code>__global float8* dts,\n__global float8* dts_from_file\n</code></pre>\n\n<p><strong>1.</strong> It seems I have to choose global work size > the array size, in my test case</p>\n\n<pre><code>size_t globalWorkSize[3] = { 128, 128, 256 };\n</code></pre>\n\n<p>(128*128*256*8)>301*300*300. Otherwise, I get truncated output. Am I right or just confused about the definition of the global work size? FYI,</p>\n\n<pre><code>    CL_DEVICE_ADDRESS_BITS=64\n    CL_DEVICE_MAX_WORK_GROUP_SIZE=256\n    CL_DEVICE_MAX_WORK_ITEM_DIMENSIONS=3\n    CL_DEVICE_MAX_WORK_ITEM_SIZES[0,1,2]=256, 256, 256\n</code></pre>\n\n<p><strong>2.</strong> Is the local work size limited by the CL_KERNEL_WORK_GROUP_SIZE=256 ?</p>\n\n<pre><code>size_t localWorkSize[3] = { 4,8,8 };\n</code></pre>\n\n<p>As far as I change 4 to larger value, there will be clEnqueueNDRangeKernel error CL_INVALID_WORK_GROUP_SIZE because 4*8*8=256?</p>\n\n<p><strong>3.</strong> What about the global/local work size for multiple devices (CPU+GPU), do I need to specify different work size for each device?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "initialization", "alternate", "2d-vector"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "edited": false, "score": 0, "creation_date": 1482357658, "post_id": 41272566, "comment_id": 69746681, "body": "Check out the <a href=\"http://stackoverflow.com/help\">help page</a> on dos and donts."}, {"owner": {"reputation": 2489, "user_id": 2652883, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7ee801449f10d68835921e687e60e1c1?s=128&d=identicon&r=PG&f=1", "display_name": "Muli Yulzary", "link": "https://stackoverflow.com/users/2652883/muli-yulzary"}, "edited": false, "score": 0, "creation_date": 1482357674, "post_id": 41272566, "comment_id": 69746691, "body": "Show us what have you tried, what are you having difficulties with?"}], "answers": [{"comments": [{"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 0, "creation_date": 1482358436, "post_id": 41272738, "comment_id": 69747039, "body": "Note that the order of the loops---row, column---is not best practice since C/C++ is row-major."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 1, "creation_date": 1482359833, "post_id": 41272738, "comment_id": 69747625, "body": "@Richard Can you elaborate? In a 2D vector in c++ the row/column order can be whatever i choose it to be?"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 0, "creation_date": 1483474610, "post_id": 41272738, "comment_id": 70109681, "body": "@Richard According to <a href=\"https://en.wikipedia.org/wiki/Row-_and_column-major_order\" rel=\"nofollow noreferrer\">this wikipedia entry</a> and <a href=\"http://stackoverflow.com/questions/33722520/why-is-iterating-2d-array-row-major-faster-than-column-major\">this  question</a>, this is the correct order to iterate for speed purposes."}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 0, "creation_date": 1483638949, "post_id": 41272738, "comment_id": 70188934, "body": "My apologies, I had a temporary bout of dyslexia. I meant to come back and correct myself, but got distracted."}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": false, "score": 3, "last_activity_date": 1482358094, "creation_date": 1482358094, "answer_id": 41272738, "question_id": 41272566, "link": "https://stackoverflow.com/questions/41272566/c-fill-a-2d-vector-with-alternate-values/41272738#41272738", "title": "C++ Fill a 2D vector with alternate values", "body": "<p>Easy right? If the row or column number is a multiple of 2 (1 based counting) then you want a <code>.</code> or <code>' '</code> inserted.</p>\n\n<p>Here is some psuedo code:</p>\n\n<pre><code>for each row\n    if (row+1 mod 2)\n        add a row of .\n    else\n        for each column\n            if (col+1 mod 2)\n               add .\n            add grid[row][col]\n</code></pre>\n\n<p>and you are done!</p>\n"}], "owner": {"reputation": 55, "user_id": 5679818, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/12028fc92b380fdbeb52ec29e4947554?s=128&d=identicon&r=PG&f=1", "display_name": "Reblochon Masqu&#233;", "link": "https://stackoverflow.com/users/5679818/reblochon-masqu%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 378, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1535229532, "creation_date": 1482357371, "last_edit_date": 1535229532, "question_id": 41272566, "link": "https://stackoverflow.com/questions/41272566/c-fill-a-2d-vector-with-alternate-values", "title": "C++ Fill a 2D vector with alternate values", "body": "<p>I have a 2D vector vector of characters <code>grid[j][i]</code> filled with various letters, I would like to create another 2D vector of characters twice the size of <code>grid[j][i]</code> filled alternately with points <code>'.'</code>(or spaces <code>' '</code>) and <code>grid[j][i]</code> values.</p>\n\n<p>For example :</p>\n\n<pre><code>      grid                    new 2D vector       \n\n    a b c d                   a . b . c . d        \n    e f g h                   . . . . . . .\n    i j k l                   e . f . g . h\n                              . . . . . . .\n                              i . j . k . l\n</code></pre>\n\n<p><strong>Does anyone have an idea of how to implement this in C++ using vectors ?</strong></p>\n\n<p>Thanks in advance for any help you could provide.</p>\n"}, {"tags": ["c++", "makefile", "gnu-make", "gnu"], "comments": [{"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1482356982, "post_id": 41272384, "comment_id": 69746349, "body": "It would depend on what your system is and what his system is."}, {"owner": {"reputation": 11, "user_id": 6605564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ac7d35b850d3ae9008790baaf9ed594?s=128&d=identicon&r=PG&f=1", "display_name": "jsid", "link": "https://stackoverflow.com/users/6605564/jsid"}, "reply_to_user": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1482357327, "post_id": 41272384, "comment_id": 69746515, "body": "@AnonMail Do you mean the OS by the system?. I use Linux and the other person as well. My question is for both, Linux to Linux and Linux to Windows case."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1482357826, "post_id": 41272384, "comment_id": 69746766, "body": "Is there anything in the makefile that uses programs that only exist in your user account, rather than system-wide programs like <code>gcc</code>?"}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1482358200, "post_id": 41272384, "comment_id": 69746934, "body": "@jisd For Linux to Linux, it depends on what version of make each system is using, what Linux commandsthe make file is using, and also how your make file deals with file locations."}], "answers": [{"tags": [], "owner": {"reputation": 827, "user_id": 961254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7868d9f231713ae3d68107a2f284bf73?s=128&d=identicon&r=PG", "display_name": "foolo", "link": "https://stackoverflow.com/users/961254/foolo"}, "is_accepted": false, "score": 2, "last_activity_date": 1482358825, "creation_date": 1482358825, "answer_id": 41272880, "question_id": 41272384, "link": "https://stackoverflow.com/questions/41272384/converting-gnu-makefile-of-one-user-into-another-user/41272880#41272880", "title": "Converting GNU makefile of one user into another user", "body": "<p>In general, no. A makefile usually contains system-specific things, such as toolchain filenames and paths.\nThere are tools that aim to solve this problem by \"making the makefiles\", in order to provide platform independance. Two such systems are CMake and GNU Autotools.</p>\n\n<p>In some cases it could be possible that a makefile works directly on another system, but don't count on it.</p>\n"}], "owner": {"reputation": 11, "user_id": 6605564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ac7d35b850d3ae9008790baaf9ed594?s=128&d=identicon&r=PG&f=1", "display_name": "jsid", "link": "https://stackoverflow.com/users/6605564/jsid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1482358825, "creation_date": 1482356630, "question_id": 41272384, "link": "https://stackoverflow.com/questions/41272384/converting-gnu-makefile-of-one-user-into-another-user", "title": "Converting GNU makefile of one user into another user", "body": "<p>I have a GNU makefile that compiles a set of source codes on my system and I want to give the source code to another person (different system) so, will the same GNU makefile function on his system? can it be modified to run on his system? </p>\n"}, {"tags": ["c++", "inheritance"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "edited": false, "score": 0, "creation_date": 1482356995, "post_id": 41272381, "comment_id": 69746358, "body": "What is the question?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6732861"}, "edited": false, "score": 0, "creation_date": 1482357045, "post_id": 41272381, "comment_id": 69746388, "body": "Added, &quot;Is there a way to do this without casting each time?&quot;"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1482357258, "post_id": 41272381, "comment_id": 69746486, "body": "&quot; I need the m_var in the child classes to be kept it as its own unique version.&quot; It already is. <code>m_var</code> in child classes has absolutely nothing to do with <code>m_var</code> in the base class. The base class has its own <code>m_var</code>, so does each child class. They are unique, and distinct. Unlike virtual functions, class members do not &quot;override&quot; members of the same name in the base class. Your question is unclear."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6732861"}, "edited": false, "score": 0, "creation_date": 1482357332, "post_id": 41272381, "comment_id": 69746517, "body": "@RawN Is that better?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6732861"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1482357434, "post_id": 41272381, "comment_id": 69746570, "body": "@SamVarshavchik Tried adding them as possible solution, removed to better fit the situation. RawN, updated, shouldn&#39;t be a duplicate"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6732861"}, "edited": false, "score": 0, "creation_date": 1482357638, "post_id": 41272381, "comment_id": 69746671, "body": "Also, the header question doesn&#39;t fit very well, suggestions for changing it would be appriciated"}], "answers": [{"tags": [], "owner": {"reputation": 3997, "user_id": 3193464, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2cea5a766d750121c7c89390262ee88e?s=128&d=identicon&r=PG&f=1", "display_name": "Anedar", "link": "https://stackoverflow.com/users/3193464/anedar"}, "is_accepted": false, "score": 0, "last_activity_date": 1482362494, "creation_date": 1482362494, "answer_id": 41273557, "question_id": 41272381, "link": "https://stackoverflow.com/questions/41272381/parent-class-referencing-child-variable/41273557#41273557", "title": "Parent class referencing child variable", "body": "<p>Using pointers, this is totally possible. \nUsing your example, you could do something like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\nusing namespace std;\n\n//Extras\nclass ShapeExtra\n{\n    public:\n    ShapeExtra() {}\n    void ShapeFunc() { std::cout &lt;&lt; \"Shape\"; }\n    virtual ~ShapeExtra() = default; //Important!\n};\n\nclass Shape\n{\n    public:\n    std::unique_ptr&lt;ShapeExtra&gt; m_var;\n\n    //require a pointer on construction\n    //make sure to document, that Shape class takes ownership and handles deletion\n    Shape(ShapeExtra* p):m_var(p){}\n\n    //The common functions\n    ShapeExtra&amp; GetVar(){ return *m_var; }\n    void ShapeFunc() {m_var-&gt;ShapeFunc();}\n};\n\n\nclass CircleExtra : public ShapeExtra\n{\n    public:\n    void CircleExtraFunc() {std::cout &lt;&lt; \"Circle\";}\n};\n\nclass Circle : public Shape\n{\n    CircleExtra* m_var;\n\n    public:\n    Circle() : Shape(new CircleExtra()) {\n        m_var = static_cast&lt;CircleExtra*&gt;(Shape::m_var.get()); \n    }\n\n    void CircleFunc()\n    {\n        m_var-&gt;CircleExtraFunc();\n    }\n};\n\n\nint main() {\n    Circle c;\n    //use the ShapeExtra Object\n    c.GetVar().ShapeFunc();\n    //call via forwarded function\n    c.ShapeFunc();\n    //call the circleExtra Function\n    c.CircleFunc();\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/BW6era\" rel=\"nofollow noreferrer\">Test it on ideone</a></p>\n\n<p>Note the use of pointers and a virtual destructor:</p>\n\n<ul>\n<li>By using a virtual destructor in the <code>ShapeExtra</code> base class, you make it possible to destruct an object of any derived class, using a <code>ShapeExtra*</code>. This is important, because</li>\n<li>by using a <code>std::unique_ptr&lt;ShapeExtra&gt;</code> instead of a plain C-pointer, we make sure that the object is properly deleted on destruction of <code>Shape</code>.</li>\n<li>It is probably a good idea to document this behaviour, i.e. that <code>Shape</code> takes the ownership of the <code>ShapeExtra*</code>. Which especially means, that we <strong>do not delete <code>CirleExtra*</code> in the <code>Circle</code> destructor</strong></li>\n<li>I decided here to require the <code>ShapeExtra*</code> on construction, but its also possible to just use <code>std::unique_ptr::reset()</code> later and check for <code>nullptr</code> on dereferencing <code>Shape::m_var</code></li>\n<li>Construction order is this: On calling the constructor of <code>Circle</code>, we first create a new <code>CircleExtra</code> which we pass to <code>Shape</code> before finally the constructor of <code>Circle</code> is executed.</li>\n<li>Destruction order is <code>Circle</code> first (was created last), then <code>Shape</code> which also destructs the <code>ShapeExtra</code> for us, including (via virtual function) the <code>CircleExtra</code></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 9740, "user_id": 1459996, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/df2798299346f952d526d49a27fbde4e?s=128&d=identicon&r=PG", "display_name": "Kirill Kobelev", "link": "https://stackoverflow.com/users/1459996/kirill-kobelev"}, "edited": false, "score": 0, "creation_date": 1482364911, "post_id": 41273751, "comment_id": 69749186, "body": "This approach does not allow scenarios where <code>Shape</code> is needed to be manipulated as the base class."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6732861"}, "edited": false, "score": 0, "creation_date": 1482365060, "post_id": 41273751, "comment_id": 69749227, "body": "I think this is probably the best solution to my problem. Thank you for your help!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6732861"}, "reply_to_user": {"reputation": 9740, "user_id": 1459996, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/df2798299346f952d526d49a27fbde4e?s=128&d=identicon&r=PG", "display_name": "Kirill Kobelev", "link": "https://stackoverflow.com/users/1459996/kirill-kobelev"}, "edited": false, "score": 0, "creation_date": 1482365165, "post_id": 41273751, "comment_id": 69749248, "body": "@KirillKobelev <code>Shape</code> is kinda an interface in my scenario, and won&#39;t ever be its own instance. I didn&#39;t completely specify that, sorry."}, {"owner": {"reputation": 368, "user_id": 7208919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba378afe94ba0fc2327138371b9f64e5?s=128&d=identicon&r=PG&f=1", "display_name": "Juan", "link": "https://stackoverflow.com/users/7208919/juan"}, "reply_to_user": {"reputation": 9740, "user_id": 1459996, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/df2798299346f952d526d49a27fbde4e?s=128&d=identicon&r=PG", "display_name": "Kirill Kobelev", "link": "https://stackoverflow.com/users/1459996/kirill-kobelev"}, "edited": false, "score": 0, "creation_date": 1482446117, "post_id": 41273751, "comment_id": 69788053, "body": "@KirillKobelev I add a suggestion to fulfill the need of virtual invocation through Shape class."}], "tags": [], "owner": {"reputation": 368, "user_id": 7208919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba378afe94ba0fc2327138371b9f64e5?s=128&d=identicon&r=PG&f=1", "display_name": "Juan", "link": "https://stackoverflow.com/users/7208919/juan"}, "is_accepted": true, "score": 0, "last_activity_date": 1482445787, "last_edit_date": 1482445787, "creation_date": 1482363997, "answer_id": 41273751, "question_id": 41272381, "link": "https://stackoverflow.com/questions/41272381/parent-class-referencing-child-variable/41273751#41273751", "title": "Parent class referencing child variable", "body": "<p>Simply with inheritance and without using pointers it is not possible, as C++ is a statically-and-strictly-typed language.</p>\n\n<p>You can inherit both the variable and the function, but you'll need to cast function return value.</p>\n\n<p>You can also override the function to make it return the concrete type, but then you have to cast the variable inside the function.</p>\n\n<p>You can also declare the same var with the concrete class in subclasses, but then you just hide the variable in the superclass and inherit nothing.</p>\n\n<p>I'd rather go for a solution using templates. Make the type of the variable a template type and extend the template using a concrete type in subclasses. It'll work perfectly.</p>\n\n<p>It's been a long time since I last programmed in C++ and I beg your pardon if there are errors in the following example. I'm sure you can easily make it work.</p>\n\n<pre><code>template &lt;class S&gt;\nclass Shape {\n   S m_var;\n   //......\npublic:\n   S var () {\n      return m_var;\n   }\n   //.......\n}\n\nclass Circle: Shape &lt;CircleExtra&gt; {\n   // var method returns CircleExtra\n   //......\n}\n</code></pre>\n\n<p>Edit:\nRegarding some comment, to allow virtual invocation of the method, it is possible to use correlated return types. Something like the following example.</p>\n\n<pre><code>class Shape {\npublic:\n   virtual ShapeExtra *var () = 0;\n}\n\ntemplate &lt;typename SE&gt;\nclass ConcreteShape: Shape {\npublic:\n   virtual SE *var() {\n      return &amp;m_var;\n   }\n// Constructor, etc.\n\nprivate:\n   SE m_var;\n}\n</code></pre>\n\n<p>Or some variation. Now concrete shapes can benefit from extending the template, as long as SE * is correlated with ShapeExtra * (the type parameter extends ShapeExtra). And you can vall the method transparently through Shape interface.</p>\n"}, {"tags": [], "owner": {"reputation": 9740, "user_id": 1459996, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/df2798299346f952d526d49a27fbde4e?s=128&d=identicon&r=PG", "display_name": "Kirill Kobelev", "link": "https://stackoverflow.com/users/1459996/kirill-kobelev"}, "is_accepted": false, "score": 0, "last_activity_date": 1482364408, "creation_date": 1482364408, "answer_id": 41273799, "question_id": 41272381, "link": "https://stackoverflow.com/questions/41272381/parent-class-referencing-child-variable/41273799#41273799", "title": "Parent class referencing child variable", "body": "<p>I would recommend the following approach:</p>\n\n<pre><code>class ShapeExtra\n{\npublic:\n\n    virtual ~ShapeExtra() { }\n    virtual void SomeCommonShapeFunc() { std::cout &lt;&lt; \"Shape\"; }\n};\n\nclass Shape\n{\npublic:\n\n    virtual ShapeExtra &amp;GetVar() = 0; // Accessor function.\n};\n</code></pre>\n\n<p>Note that the class <code>Shape</code> does not have any data members at all. After that for each derived class you need:</p>\n\n<pre><code>class CircleExtra : public ShapeExtra\n{\npublic:\n\n    void SomeCommonShapeFunc() { std::cout &lt;&lt; \"Circle\"; }\n};\n\nclass Circle : public Shape\n{\n    CircleExtra m_var;   // Data member with circle specific class.\n\npublic:\n\n    virtual ShapeExtra &amp;GetVar() { return m_var; }\n};\n</code></pre>\n\n<p>Implementation of virtual method in <code>Circle</code> will return reference to the base class <code>ShapeExtra</code>. This will allow using this extra in the base class.</p>\n\n<p>Note that pointers and templates are not used at all. This simplifies the overall design.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6732861"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 0, "accepted_answer_id": 41273751, "answer_count": 3, "score": 0, "last_activity_date": 1482445787, "creation_date": 1482356621, "last_edit_date": 1482358575, "question_id": 41272381, "link": "https://stackoverflow.com/questions/41272381/parent-class-referencing-child-variable", "title": "Parent class referencing child variable", "body": "<p>I have several similar classes inheriting from the same Base-Class/Interface (Base class 1), and they share a couple similar functions, but then also have their own distinct functions. They all also have their own member variables of different classes, and each of those inherits from the same Base-Class/Interface (Base class 2). Is it possible to define a variable in Base class 1, of type Base class 2, then in the actual implementation of classes using Base class 1, have the variable of type Base class 2 be its proper type. Kinda hard to explain, so simplified example below.</p>\n\n<pre><code>//Base-Class 1\nclass Shape\n{\n    public Shape() {}\n    ShapeExtra m_var;\n\n    //The common functions\n    public GetVar(){ return m_var; }\n}\n\nclass Circle : Shape\n{\n    public Circle() { m_var = new CircleExtra(); }\n\n    public void CircleFunc()\n    {\n        m_var.CircleExtraFunc();\n    }\n}\nclass Triangle : Shape\n{\n    public Triangle() { m_var = new TriangleExtra(); }\n\n    public void TriangleFunc()\n    {\n        m_var.TriangleExtraFunc();\n    }\n}\n.\n.\n.\n\n\n\n//Base_Class 2\nclass ShapeExtra\n{\n    public ShapeExtra() {}\n}\n\nclass CircleExtra : ExtraClass\n{\n    public CircleExtra() {}\n    void CircleExtraFunc() {//Do stuff}\n}\nclass TriangleExtra : ExtraClass\n{\n    public TriangleExtra() {}\n    void TriangleExtra() {//Do stuff}\n}\n.\n.\n.\n</code></pre>\n\n<p>So, I need the <code>m_var</code> in the child classes to be kept it as its own unique version. Because right now (w/o the extra <code>CircleExtra m_var;</code>), the <code>GetVar()</code> works, but in <code>CircleFunc</code>, <code>m_var</code> is still type of <code>ShapeExtra</code>, and thus <strong>doesn't know that <code>CircleExtraFunc</code> exists</strong>. I could cast <code>m_var</code> each time I wanted to do that, but that is repetitive and not worth it in my real-world case. Is there a way to utilize the functions in unique classes based off of <code>ShapeExtra</code>, while keeping the <code>GetVar()</code> function in <code>Shape</code>?</p>\n\n<p>Please ask questions if there is anything I left out.</p>\n"}, {"tags": ["c++", "macros"], "comments": [{"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1482357423, "post_id": 41272368, "comment_id": 69746565, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/19716729/c-visual-studio-disgusting-macro-hack-compilation-issue\">C++ Visual Studio &quot;Disgusting Macro Hack&quot; compilation issue</a>"}, {"owner": {"reputation": 75, "user_id": 7159803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26024808a182246f0832917631abbbb0?s=128&d=identicon&r=PG&f=1", "display_name": "freeze", "link": "https://stackoverflow.com/users/7159803/freeze"}, "reply_to_user": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1482358349, "post_id": 41272368, "comment_id": 69746996, "body": "This is not really a duplicate: it is another problem involving the &quot;disgusting macro hack&quot; and a different &quot;vector&quot;."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1482396237, "post_id": 41272368, "comment_id": 69759472, "body": "A macro replaces one token, not 3. <code>std :: vector</code> is 3 tokens, as you can see from the fact that you can insert whitespace between the tokens."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 7159803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26024808a182246f0832917631abbbb0?s=128&d=identicon&r=PG&f=1", "display_name": "freeze", "link": "https://stackoverflow.com/users/7159803/freeze"}, "edited": false, "score": 0, "creation_date": 1482360147, "post_id": 41272404, "comment_id": 69747739, "body": "Thank you @StoryTeller. But the idea of the original macro is to be able to range check vectors in code written using <code>vector</code>."}, {"owner": {"reputation": 75, "user_id": 7159803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26024808a182246f0832917631abbbb0?s=128&d=identicon&r=PG&f=1", "display_name": "freeze", "link": "https://stackoverflow.com/users/7159803/freeze"}, "edited": false, "score": 0, "creation_date": 1482360393, "post_id": 41272404, "comment_id": 69747849, "body": "This works @StoryTeller: <code>template&lt;typename T&gt; using vector = Vector&lt;T&gt;;</code> but this does not <code>template&lt;typename T&gt; using std::vector = Vector&lt;T&gt;;</code> i get Compiler Error C2061 with Visual C++ 2015"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 75, "user_id": 7159803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26024808a182246f0832917631abbbb0?s=128&d=identicon&r=PG&f=1", "display_name": "freeze", "link": "https://stackoverflow.com/users/7159803/freeze"}, "edited": false, "score": 0, "creation_date": 1482361026, "post_id": 41272404, "comment_id": 69748066, "body": "@freeze you cannot redefine <code>std::vector</code>, end of story. If you feel you must, you should re-examine your problem; maybe ask about it in detail on SO."}, {"owner": {"reputation": 75, "user_id": 7159803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26024808a182246f0832917631abbbb0?s=128&d=identicon&r=PG&f=1", "display_name": "freeze", "link": "https://stackoverflow.com/users/7159803/freeze"}, "edited": false, "score": 0, "creation_date": 1482362246, "post_id": 41272404, "comment_id": 69748483, "body": "thank you for your help. I don&#39;t really feel I must. This all started because of a compiler error caused by changing the order of header files. It turned out that the problem stemmed from the macro in the original std_lib_facilities.h file from the book. So then I decided to see if I could find a way to make it work as intended. I guess the answer is that this is an example of why macros can be problematic."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 4, "last_activity_date": 1482357305, "last_edit_date": 1482357305, "creation_date": 1482356720, "answer_id": 41272404, "question_id": 41272368, "link": "https://stackoverflow.com/questions/41272368/is-it-possible-to-use-a-scoped-type-as-a-macro-name-in-c/41272404#41272404", "title": "Is it possible to use a scoped type as a macro name in C++?", "body": "<p>Don't use the preprocessor. That's what alias templates are for:</p>\n\n<pre><code>template&lt;typename T&gt;\nusing vector_in_use = std::vector&lt;T&gt;;\n</code></pre>\n\n<p>You use <code>vector_in_use</code> throughout your code base, and it will compile your code with <code>std::vector</code>. Then, to switch you only need to replace one line:</p>\n\n<pre><code>using vector_in_use = Vector&lt;T&gt;;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 665, "user_id": 6642307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51b40256a599596d11696f6824895ed2?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/6642307/user"}, "is_accepted": false, "score": 0, "last_activity_date": 1482360051, "creation_date": 1482360051, "answer_id": 41273131, "question_id": 41272368, "link": "https://stackoverflow.com/questions/41272368/is-it-possible-to-use-a-scoped-type-as-a-macro-name-in-c/41273131#41273131", "title": "Is it possible to use a scoped type as a macro name in C++?", "body": "<p>Well, you can include your Vector into the std namespace, and then in every file it is used, you put define and undef:</p>\n\n<pre><code>namespace std\n{\n#include \"Vector.h\"\n}\n\n#define vector Vector\n//...\n#undef vector\n</code></pre>\n\n<p>It really is disgusting, lol... But that'd do what you want to do.</p>\n"}], "owner": {"reputation": 75, "user_id": 7159803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26024808a182246f0832917631abbbb0?s=128&d=identicon&r=PG&f=1", "display_name": "freeze", "link": "https://stackoverflow.com/users/7159803/freeze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1482360051, "creation_date": 1482356556, "last_edit_date": 1482356712, "question_id": 41272368, "link": "https://stackoverflow.com/questions/41272368/is-it-possible-to-use-a-scoped-type-as-a-macro-name-in-c", "title": "Is it possible to use a scoped type as a macro name in C++?", "body": "<p>I would like to define a macro to accomplish the following:</p>\n\n<pre><code>#define std::vector Vector \n</code></pre>\n\n<p>I can't do this because \"<code>:</code>\" seems to be not allowed in a macro name. The reason I want to do this is that I am trying to use Stroustrup's range-checked Vector (from std_lib_facilities.h in his book Programming Principles and Practice). He uses: </p>\n\n<pre><code>// disgusting macro hack to get a range checked vector:\n#define vector Vector \n</code></pre>\n\n<p><sub>(the comment is Stoustrup's)</sub></p>\n\n<p>The problem is that I would prefer not to have \"<code>using namespace std;</code>\" in the header file that declares <code>Vector</code>. Which means that I need to use <code>std::vector</code> in other header files, and then Stroustrup's \"macro hack\" does not work. I get errors related to \"<code>std::Vector</code>\", which does not exist. </p>\n\n<p>So my question is: is it possible to use a fully qualified type name as a macro name so as to replace it with something like \"<code>Vector</code>\"?</p>\n"}, {"tags": ["c++", "c", "makefile", "build", "dependencies"], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 5419528, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/03be5dd0869252203ae007b990ca1bc9?s=128&d=identicon&r=PG&f=1", "display_name": "Laeeq Khan", "link": "https://stackoverflow.com/users/5419528/laeeq-khan"}, "edited": false, "score": 0, "creation_date": 1482359270, "post_id": 41272426, "comment_id": 69747372, "body": "make -f Makefile_abc  dep -fMakefile_abc,   same result"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 147, "user_id": 5419528, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/03be5dd0869252203ae007b990ca1bc9?s=128&d=identicon&r=PG&f=1", "display_name": "Laeeq Khan", "link": "https://stackoverflow.com/users/5419528/laeeq-khan"}, "edited": false, "score": 0, "creation_date": 1482359277, "post_id": 41272426, "comment_id": 69747377, "body": "The why on earth didn&#39;t you mention that you&#39;d tried that?  And are you sure you got the spelling correct?  There was a <code>Makefile_abc</code> and a <code>Makefile_bac</code> in the question at one time.  What error did you get when you tried that?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 147, "user_id": 5419528, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/03be5dd0869252203ae007b990ca1bc9?s=128&d=identicon&r=PG&f=1", "display_name": "Laeeq Khan", "link": "https://stackoverflow.com/users/5419528/laeeq-khan"}, "edited": false, "score": 1, "creation_date": 1482359305, "post_id": 41272426, "comment_id": 69747390, "body": "The way you need to use it is when you invoke <code>makedepend</code> in the makefile: <code>makedepend -fMakefile_abc main.c</code>.  All your command line did is read the makefile twice."}, {"owner": {"reputation": 147, "user_id": 5419528, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/03be5dd0869252203ae007b990ca1bc9?s=128&d=identicon&r=PG&f=1", "display_name": "Laeeq Khan", "link": "https://stackoverflow.com/users/5419528/laeeq-khan"}, "edited": false, "score": 0, "creation_date": 1482360508, "post_id": 41272426, "comment_id": 69747884, "body": "So, what you are saying is, if I use a standard make file name (Makefile), I can use a target name (dep) in command line.   e.g.,   make dep.      But if I use a non-standard makefile name like Makefile_abc, then I cannot use target name in command line, and I have to use individual source file names in the command line, like main.c.  Is that right."}, {"owner": {"reputation": 1552, "user_id": 2362671, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0585760afe78ec9aafe1836b826ed495?s=128&d=identicon&r=PG", "display_name": "Come Raczy", "link": "https://stackoverflow.com/users/2362671/come-raczy"}, "reply_to_user": {"reputation": 147, "user_id": 5419528, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/03be5dd0869252203ae007b990ca1bc9?s=128&d=identicon&r=PG&f=1", "display_name": "Laeeq Khan", "link": "https://stackoverflow.com/users/5419528/laeeq-khan"}, "edited": false, "score": 1, "creation_date": 1482361159, "post_id": 41272426, "comment_id": 69748122, "body": "@LaeeqKhan there are two different uses of the &#39;-f Makefile_abc&#39; (1) on the make command line to tell make thich makefile to use to find the target dep ; and (2) in the recipe for the dep target to tell makedepend which makefile needs to get the dependencies appended to."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 1552, "user_id": 2362671, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0585760afe78ec9aafe1836b826ed495?s=128&d=identicon&r=PG", "display_name": "Come Raczy", "link": "https://stackoverflow.com/users/2362671/come-raczy"}, "edited": false, "score": 0, "creation_date": 1482366181, "post_id": 41272426, "comment_id": 69749508, "body": "@ComeRaczy: Thanks for the edit while I was offline.  That&#39;s what I intended."}, {"owner": {"reputation": 147, "user_id": 5419528, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/03be5dd0869252203ae007b990ca1bc9?s=128&d=identicon&r=PG&f=1", "display_name": "Laeeq Khan", "link": "https://stackoverflow.com/users/5419528/laeeq-khan"}, "reply_to_user": {"reputation": 1552, "user_id": 2362671, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0585760afe78ec9aafe1836b826ed495?s=128&d=identicon&r=PG", "display_name": "Come Raczy", "link": "https://stackoverflow.com/users/2362671/come-raczy"}, "edited": false, "score": 0, "creation_date": 1482424608, "post_id": 41272426, "comment_id": 69777861, "body": "@ComeRaczy,   Jonathan Leffler, Thanks for help. So the final command line would be,    make -f Makefile_abc  dep -f Makefile_abc   but this does not work, I get the error &quot;[mM]akefile is not present&quot;. Do you think, I may be doing something wrong.  Also, do you think we can use the option &quot;-f&quot; twice on the command line? How will make or shell know which file to use for reading target, and which one to use for appending dependencies. Just wondering ..."}, {"owner": {"reputation": 147, "user_id": 5419528, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/03be5dd0869252203ae007b990ca1bc9?s=128&d=identicon&r=PG&f=1", "display_name": "Laeeq Khan", "link": "https://stackoverflow.com/users/5419528/laeeq-khan"}, "edited": false, "score": 0, "creation_date": 1482426813, "post_id": 41272426, "comment_id": 69779212, "body": "@JonathanLeffler: Thanks. Just to clarify for others, there is one &quot;-f&quot; flag that will go inside the Makefile_abc along with makeappend command, and, there is another &quot;-f&quot; flag that will go on the command line indicating the makefile to read. In my case, both these &quot;-f&quot; flags specify the same file &quot;Makefile_abc&quot;. Thanks everybody."}, {"owner": {"reputation": 1552, "user_id": 2362671, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0585760afe78ec9aafe1836b826ed495?s=128&d=identicon&r=PG", "display_name": "Come Raczy", "link": "https://stackoverflow.com/users/2362671/come-raczy"}, "reply_to_user": {"reputation": 147, "user_id": 5419528, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/03be5dd0869252203ae007b990ca1bc9?s=128&d=identicon&r=PG&f=1", "display_name": "Laeeq Khan", "link": "https://stackoverflow.com/users/5419528/laeeq-khan"}, "edited": false, "score": 0, "creation_date": 1482427822, "post_id": 41272426, "comment_id": 69779786, "body": "@LaeeqKhan, now that you have figured it out, you should considering an alternative. makedepend has had its use but in some cases it can become a real pain (e.g. when you forget to run <code>make dep</code>). with any reasonably recent version of gcc (and other compilers) there is a much better solution: <code>-MMD -MP</code>. There are lots of SO posts describing that method, both <a href=\"http://stackoverflow.com/questions/11855386/using-g-with-mmd-in-makefile-to-automatically-generate-dependencies\">how</a> and <a href=\"http://stackoverflow.com/questions/12106141/is-g-mmd-better-than-include-scanning\">why</a>"}, {"owner": {"reputation": 147, "user_id": 5419528, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/03be5dd0869252203ae007b990ca1bc9?s=128&d=identicon&r=PG&f=1", "display_name": "Laeeq Khan", "link": "https://stackoverflow.com/users/5419528/laeeq-khan"}, "reply_to_user": {"reputation": 1552, "user_id": 2362671, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0585760afe78ec9aafe1836b826ed495?s=128&d=identicon&r=PG", "display_name": "Come Raczy", "link": "https://stackoverflow.com/users/2362671/come-raczy"}, "edited": false, "score": 0, "creation_date": 1482433437, "post_id": 41272426, "comment_id": 69782520, "body": "@ComeRaczy: Thanks, will look at those alternatives. Best Regards"}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 1, "last_activity_date": 1482425209, "last_edit_date": 1482425209, "creation_date": 1482356788, "answer_id": 41272426, "question_id": 41272316, "link": "https://stackoverflow.com/questions/41272316/how-to-use-makedepend-in-a-non-standard-makefile-name/41272426#41272426", "title": "How to use makedepend in a non-standard makefile name", "body": "<p>This is a basic 'read the manual' question.</p>\n\n<p>Looking at <a href=\"https://linux.die.net/man/1/makedepend\" rel=\"nofollow noreferrer\">makedepend(1)</a>, you need <code>-fMakefile_abc</code> in the recipe for the target <code>dep</code> (optionally with a space between <code>-f</code> and <code>Makefile_abc</code>):</p>\n\n<pre><code>dep:\n        makedepend -fMakefile_abc main.c\n</code></pre>\n\n<p>To update the dependencies, you'd run:</p>\n\n<pre><code>$ make -f Makefile_abc dep\n</code></pre>\n\n<p>This would cause <code>make</code> to run:</p>\n\n<pre><code>makedepend -fMakefile_abc main.c\n</code></pre>\n\n<p>(Note that the 'standard' \u2014 most common \u2014 name for the target is <code>depend</code> rather than <code>dep</code>, so you'd normally run <code>make -fMakefile_abc depend</code> or, with a plain <code>makefile</code> file, <code>make depend</code>.)</p>\n\n<p>If you're using GNU Make, you might also add another line to <code>Makefile_abc</code>:</p>\n\n<pre><code>.PHONY: dep     # Or depend, depending\u2026\n</code></pre>\n\n<p>This tells <code>make</code> that there won't be a file <code>dep</code> created by the rule.</p>\n\n<p>You can often get information about how to run a command by using <code>makedepend --help</code> or <code>makedepend -:</code> \u2014 the first may (or may not) give a useful help message outlining options, and the second is very unlikely to be a valid option which should generate a 'usage' message that summarizes the options.</p>\n"}], "owner": {"reputation": 147, "user_id": 5419528, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/03be5dd0869252203ae007b990ca1bc9?s=128&d=identicon&r=PG&f=1", "display_name": "Laeeq Khan", "link": "https://stackoverflow.com/users/5419528/laeeq-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 938, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1482425209, "creation_date": 1482356325, "last_edit_date": 1482356669, "question_id": 41272316, "link": "https://stackoverflow.com/questions/41272316/how-to-use-makedepend-in-a-non-standard-makefile-name", "title": "How to use makedepend in a non-standard makefile name", "body": "<p>I am trying to use <code>makedepend</code> in a makefile named <code>Makefile_abc</code>.\nNormally when I have to build a target <code>trg</code>, I say</p>\n\n<pre><code>make -f Makefile_abc trg\n</code></pre>\n\n<p>and this works beautifully.\nI have added following lines in this makefile.</p>\n\n<pre><code>dep:\n    makedepend  main.c\n</code></pre>\n\n<p>Now, when I do,</p>\n\n<pre><code>make -f Makefile_abc  dep\n</code></pre>\n\n<p>I get the error,</p>\n\n<pre><code>makedepend: error:  [mM]akefile is not present\nmake: *** [depend] Error 1\n</code></pre>\n\n<p>If I rename my makefile as Makefile, then following command works fine,</p>\n\n<pre><code>make depend\n</code></pre>\n\n<p>So, I am looking for a way to use makedepend on non-standard makefile names.</p>\n"}, {"tags": ["c++", "templates", "operator-overloading", "operators"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1482356386, "post_id": 41272311, "comment_id": 69746091, "body": "See <a href=\"http://stackoverflow.com/questions/4421706/operator-overloading\">operator overloading</a>."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1482356648, "post_id": 41272311, "comment_id": 69746218, "body": "Unrelated to your question, <code>Param Data[]</code> is either invalid or makes a pointer. In either case, you&#39;ll need to specify a size somewhere. Did you want a fixed size, or were you going to allocate your elements on the heap? In either case, you&#39;ll need a proper copy constructor, copy assignment operator, and destructor."}, {"owner": {"reputation": 33, "user_id": 6093593, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2a94a0d4c022c7db1991439011723a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Elh48", "link": "https://stackoverflow.com/users/6093593/elh48"}, "edited": false, "score": 0, "creation_date": 1482356779, "post_id": 41272311, "comment_id": 69746256, "body": "my array maybe have more than 1 million element ... what should i do for default size !!!"}], "answers": [{"tags": [], "owner": {"reputation": 1813, "user_id": 2449857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jxnCm.jpg?s=128&g=1", "display_name": "Jack Deeth", "link": "https://stackoverflow.com/users/2449857/jack-deeth"}, "is_accepted": false, "score": 2, "last_activity_date": 1482357366, "last_edit_date": 1495540798, "creation_date": 1482357366, "answer_id": 41272565, "question_id": 41272311, "link": "https://stackoverflow.com/questions/41272311/c-template-class-operator-for-brackets-and-equal-to-insert-and-get-element/41272565#41272565", "title": "C++ template class operator for brackets and equal to insert and get element", "body": "<ul>\n<li><code>Foo&amp; operator[]</code> is sufficient for reading and writing.</li>\n<li>Include the size of the array as a template parameter, or replace <code>Param[]</code> with <code>std::vector&lt;Param&gt;</code>.</li>\n<li><a href=\"https://stackoverflow.com/a/131833/2449857\">Use <code>size_t</code> instead of <code>int</code> for array index types.</a></li>\n<li>You don't need to wrap <code>Array[1]</code> in <code>to_string</code> for output.</li>\n<li><a href=\"https://stackoverflow.com/a/204483/2449857\">Don't use <code>void main</code>! The standard says <code>main</code> must be <code>int</code>.</a></li>\n<li><a href=\"https://stackoverflow.com/a/457963/2449857\"><code>void&amp;</code> is not valid C++ either.</a></li>\n</ul>\n\n<hr>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\ntemplate &lt;typename Param, size_t Size&gt; class arr {\nprivate:\n  Param Data[Size];\npublic:\n  Param &amp;operator[](size_t Element_id) {\n    return Data[Element_id];\n  }\n};\n\nint main() {\n  arr&lt;int, 3&gt; Array;\n  Array[1] = 555;\n  cout &lt;&lt; \"Is(\" &lt;&lt; Array[1] &lt;&lt; \")\" &lt;&lt; endl;\n}\n</code></pre>\n\n<hr>\n\n<p>However, all that <code>arr</code> does in my snippet is be a less useful <code>std::array</code>!</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1482357799, "last_edit_date": 1495540798, "creation_date": 1482357799, "answer_id": 41272673, "question_id": 41272311, "link": "https://stackoverflow.com/questions/41272311/c-template-class-operator-for-brackets-and-equal-to-insert-and-get-element/41272673#41272673", "title": "C++ template class operator for brackets and equal to insert and get element", "body": "<p>The syntax you are attempting for the <code>operator[]</code> functions is quite wrong. You need something like:</p>\n\n<pre><code>  // Version for non-const objects\n  Param&amp; operator[](std::size_t i)\n  {\n     return Data[i];\n  }\n\n  // Version for const objects\n  Param const&amp; operator[](std::size_t i) const\n  {\n     return Data[i];\n  }\n</code></pre>\n\n<p>If you want to support arrays whose sizes are known at compile time, you can use:</p>\n\n<pre><code>template &lt;typename Param, std::size_t N&gt;\nclass arr\n{\n   private:\n\n      Param Data[N];\n\n   public:\n\n      Param&amp; operator[](std::size_t i)\n      {\n         return Data[i];\n      }\n\n      Param const&amp; operator[](std::size_t i) const\n      {\n         return Data[i];\n      }\n};\n</code></pre>\n\n<p>If you want to support arrays whose sizes are known at run time, you can use the following. However, you need to be aware of <a href=\"https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">The Rule of Three</a> and make sure to implement the copy constructor and the copy assignment operator properly.</p>\n\n<pre><code>template &lt;typename Param&gt;\nclass arr\n{\n   private:\n\n      Param* Data;\n\n   public:\n\n      arr(size_t size) : Data(new Param[size]) {}\n      ~arr() { delete [] Data; }\n\n      Param&amp; operator[](std::size_t i)\n      {\n         return Data[i];\n      }\n\n      Param const&amp; operator[](std::size_t i) const\n      {\n         return Data[i];\n      }\n};\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6093593, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2a94a0d4c022c7db1991439011723a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Elh48", "link": "https://stackoverflow.com/users/6093593/elh48"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1507, "favorite_count": 1, "accepted_answer_id": 41272673, "answer_count": 2, "score": 1, "last_activity_date": 1482357799, "creation_date": 1482356295, "question_id": 41272311, "link": "https://stackoverflow.com/questions/41272311/c-template-class-operator-for-brackets-and-equal-to-insert-and-get-element", "title": "C++ template class operator for brackets and equal to insert and get element", "body": "<p>hello i want to create simple array class to get value and insert value like <code>(array[0] = 4)</code> and this is my program but i have problem to use <code>[] =</code> in same time for insert</p>\n\n<pre><code>template &lt;typename Param&gt;\nclass arr\n{\nprivate:\n\n    int Last_point = 0;\n    Param Data[];\n\npublic:\n\n    void&amp; operator[]=(int Element_id, Param v)\n    {\n        Data[Element_id] = v;\n    }\n\n    Param&amp; operator[] (int Element_id)\n    {\n        return Data[Element_id];\n    }\n};\n\n\n\nvoid main()\n{\n    arr &lt;int&gt; Array;\n\n\n    Array[1] = 555;\n\n    cout &lt;&lt; \"Is(\" &lt;&lt; to_string(Array[1]) &lt;&lt; \")\" &lt;&lt; endl;\n\n    system(\"pause\");\n}\n</code></pre>\n\n<p>is there any operator like ([]=)? or for this, i have to use which methods? also i want to get value if just used <code>[]</code></p>\n"}, {"tags": ["c++", "math", "3d"], "comments": [{"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1482405105, "post_id": 41272299, "comment_id": 69765134, "body": "you need also the object size ... if you got bounding sphere/box (in <code>[m]</code>)  for example .... if not you need to compute it by going through all the Mesh vertexes and remembering min,max coordinate values (for axis aligned mesh)  or fit the sphere with fitting ....  You need to better specify what data about your object you have... Also if you consider other physical properties (like air stream from the jet turbines ... you need to specify it too)"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1482405494, "post_id": 41272299, "comment_id": 69765389, "body": "btw If this is for the flights then I would use standards instead of mesh dimensions like <a href=\"http://www.skybrary.aero/index.php/Airborne_Collision_Avoidance_System_(ACAS)\" rel=\"nofollow noreferrer\">Airborne Collision Avoidance System (ACAS)</a> so set the sphere radius to 600ft or 850ft and just convert to radians or degrees for your current position (it will be ellipsoid or sphere with biggest radius ....) ... unless your planes are some jumbo jet monster bigger then specs ..."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1482406000, "post_id": 41272299, "comment_id": 69765704, "body": "If your task is for some commercial system you might consider consulting real pilots. While I was doing ATC simulation module for training system (for real pilots) I was trained by Airline pilots and instructors for about 3 months just to get the hence of the problems and procedures behind Air traffic. It helped a lot (without it as pure programmer you have no clue what you are missing or even doing)."}, {"owner": {"reputation": 63, "user_id": 7284325, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c3fb9d124866a0677ef497b34a51a03c?s=128&d=identicon&r=PG&f=1", "display_name": "andre", "link": "https://stackoverflow.com/users/7284325/andre"}, "reply_to_user": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1482406351, "post_id": 41272299, "comment_id": 69765923, "body": "@Spektre Thanks a lot. So I just have one GPS point, how would I compute the bounding sphere without the need of object size and the mesh vertices. Just a simple bounding sphere for collision detection ?"}, {"owner": {"reputation": 63, "user_id": 7284325, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c3fb9d124866a0677ef497b34a51a03c?s=128&d=identicon&r=PG&f=1", "display_name": "andre", "link": "https://stackoverflow.com/users/7284325/andre"}, "reply_to_user": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1482406961, "post_id": 41272299, "comment_id": 69766291, "body": "If I have altitude, speed, and heading, how would I define a bounding sphere ?"}, {"owner": {"reputation": 63, "user_id": 7284325, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c3fb9d124866a0677ef497b34a51a03c?s=128&d=identicon&r=PG&f=1", "display_name": "andre", "link": "https://stackoverflow.com/users/7284325/andre"}, "reply_to_user": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1482413341, "post_id": 41272299, "comment_id": 69770193, "body": "@Spektre Please I need your help :)"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1482413943, "post_id": 41272299, "comment_id": 69770586, "body": "first you must determine the sphere radius as I mentioned before so either it is your craft biggest dimension half size or some safety distance (like from the ACAS specification). If you want to use this bounding sphere in Cartesian coordinates then you need just he center point (which is your location) and this distance. If you want this sphere to be in  spherical ccordinates then you need to convert the radius to angles in longitudal and latitudal local axis.That can be done with use of <code>XYZtoWGS84</code> conversion routine or by computing the actual radius in each axis and compute from arc length"}, {"owner": {"reputation": 63, "user_id": 7284325, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c3fb9d124866a0677ef497b34a51a03c?s=128&d=identicon&r=PG&f=1", "display_name": "andre", "link": "https://stackoverflow.com/users/7284325/andre"}, "reply_to_user": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1482414179, "post_id": 41272299, "comment_id": 69770734, "body": "The sphere radius is 300ft. So I just need a center which is my location and a radius _"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1482416205, "post_id": 41272299, "comment_id": 69772055, "body": "in Cartesian yes.... in WGS84 spherical you need to decide if you want ellipsoid (which will be closest to the Cartesian sphere) or just sphere (which will be more like ellipsoid in Cartessian). As you are using this only in Cartesian then the radius and center is enough. Just do not forget to convert the 300ft to meters or what ever common units you are using...."}, {"owner": {"reputation": 63, "user_id": 7284325, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c3fb9d124866a0677ef497b34a51a03c?s=128&d=identicon&r=PG&f=1", "display_name": "andre", "link": "https://stackoverflow.com/users/7284325/andre"}, "reply_to_user": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1482419204, "post_id": 41272299, "comment_id": 69774042, "body": "@Spektre can you take a look at that problem. I have the data and the units now. <a href=\"http://stackoverflow.com/questions/41286107/collision-detection-between-two-objects\" title=\"collision detection between two objects\">stackoverflow.com/questions/41286107/&hellip;</a>"}, {"owner": {"reputation": 63, "user_id": 7284325, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c3fb9d124866a0677ef497b34a51a03c?s=128&d=identicon&r=PG&f=1", "display_name": "andre", "link": "https://stackoverflow.com/users/7284325/andre"}, "reply_to_user": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1482487771, "post_id": 41272299, "comment_id": 69800958, "body": "The sphere collision always detect a collision here is my data. xAv = 4070722.2674118499, yAv = 1187280.7521421891, zAv = 4748556.5635749763 xPoi = 4000524.7708611945, yPoi = 1293081.4373654183, zPoi = 4780356.3598615918 avSphere.radius = 1550000; //1550000m  poiSphere.radius = 1000000; // 100000m"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1482490037, "post_id": 41272299, "comment_id": 69802111, "body": "Why is that a problem? the points are 130km distant so that is much closer then your 1550+1000km sphere radiuses .... hence always collision present.  You are not thinking about what are you doing! You just put the numbers in &quot;some&quot; code and hoping it would do what you want. That is not how programing works ..."}], "owner": {"reputation": 63, "user_id": 7284325, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c3fb9d124866a0677ef497b34a51a03c?s=128&d=identicon&r=PG&f=1", "display_name": "andre", "link": "https://stackoverflow.com/users/7284325/andre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551716488, "creation_date": 1482356218, "last_edit_date": 1551716488, "question_id": 41272299, "link": "https://stackoverflow.com/questions/41272299/creating-a-bounding-sphere-using-a-gps-coordinate", "title": "Creating a bounding sphere using a GPS coordinate", "body": "<p>I would like to create an imaginary bounding sphere around an object. Giving the position of the object in GPS coordinates WGS84 format. And also giving the position in cartesian coordinates. </p>\n\n<p>I have tried to convert degrees lon,lat,alt to radians, and use a function by Spketre, to convert them to Cartesian coordinates. </p>\n\n<p>The problem is I'm doing sphere to sphere collision detection and what I have found that the positions that are converted from spherical to Cartesian are so near so that the sphere intersection method is returning true. </p>\n\n<pre><code>WGS84toXYZ(xAv, yAv, zAv, (m_sPosAV.GetLongitude()*math::pi) / 180, (m_sPosAV.GetLatitude()*math::pi) / 180, (m_sPosAV.GetAltitude()*math::pi) / 180); // lon direction Nort\nWGS84toXYZ(xPoi, yPoi, zPoi, (poi.Position().GetLongitude()*math::pi) / 180, (poi.Position().GetLatitude()*math::pi) / 180, (poi.Position().GetAltitude()*math::pi) / 180); // lon direction Nort\n\n    Sphere avSphere;\n    Sphere poiSphere;\n\n    avSphere.position.x = xAv;\n    avSphere.position.y = yAv;\n    avSphere.position.z = zAv;\n    avSphere.radius = 1550; \n    poiSphere.position.x = xPoi;\n    poiSphere.position.y = yPoi;\n    poiSphere.position.z = zPoi;\n    poiSphere.radius = 1200; \n\n    if (doesItCollide(avSphere, poiSphere))\n    {\n        qDebug() &lt;&lt; \"collision\";\n    }\n</code></pre>\n"}, {"tags": ["c++", "variables", "initialization"], "comments": [{"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1482355980, "post_id": 41272035, "comment_id": 69745882, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/declarations#Simple_declaration\" rel=\"nofollow noreferrer\"><i>init-declarator-list</i></a>"}], "answers": [{"comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1482355506, "post_id": 41272046, "comment_id": 69745672, "body": "The other option (which would only be legal if <code>buffer</code> and <code>blockIndex</code> had been declared already) would be <code>GLuint bindingPoint = (1, buffer, blockIndex);</code>  which would mean &quot;evaluate <code>1</code> and throw the result away, evaluate <code>buffer</code> and throw the result away, evaluate <code>blockIndex</code> and use it to initialize a new variable <code>bindingPoint</code> of type `GLuint."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1482355586, "post_id": 41272046, "comment_id": 69745713, "body": "To be clear: that is not an alternative reading of the original statement.  The statement unambigiously means what StoryTeller has written.  It is what a similar looking statement would mean."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 7, "last_activity_date": 1482355042, "creation_date": 1482355042, "answer_id": 41272046, "question_id": 41272035, "link": "https://stackoverflow.com/questions/41272035/weird-variable-initialization/41272046#41272046", "title": "&quot;weird&quot; variable initialization", "body": "<p>The line <code>GLuint bindingPoint = 1, buffer, blockIndex;</code> is equivalent to the following three:</p>\n\n<pre><code>GLuint bindingPoint = 1;\nGLuint buffer;\nGLuint blockIndex;\n</code></pre>\n\n<p>Both versions define the variables <code>bindingPoint, buffer, blockIndex</code>. With <code>bindingPoint</code> initialized to <code>1</code>.</p>\n"}], "owner": {"reputation": 45, "user_id": 5818710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c76b8e57eb48aa3a563165bf2f20d7dd?s=128&d=identicon&r=PG&f=1", "display_name": "Cleopatra", "link": "https://stackoverflow.com/users/5818710/cleopatra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 41272046, "answer_count": 1, "score": 0, "last_activity_date": 1482355904, "creation_date": 1482354981, "last_edit_date": 1482355904, "question_id": 41272035, "link": "https://stackoverflow.com/questions/41272035/weird-variable-initialization", "title": "&quot;weird&quot; variable initialization", "body": "<p>What is meant by:</p>\n\n<pre><code>GLuint bindingPoint = 1, buffer, blockIndex;\n</code></pre>\n\n<p>I found this in one tutorial which I need, and I have never seen such a variable initialization before.</p>\n\n<p>Does this line mean</p>\n\n<pre><code>GLuint bindingPoint = 1;\nGLuint bindingPoint = buffer;\nGLuint bindingPoint = blockIndex;\n</code></pre>\n\n<p>?</p>\n"}, {"tags": ["c++", "algorithm", "brute-force", "knapsack-problem", "imperative-programming"], "comments": [{"owner": {"reputation": 2131, "user_id": 3726169, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ad0f33269912ab7a2fb9f30df6f2d392?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Chesterfield", "link": "https://stackoverflow.com/users/3726169/jon-chesterfield"}, "edited": false, "score": 5, "creation_date": 1482354197, "post_id": 41271836, "comment_id": 69745000, "body": "I can&#39;t work out what you&#39;re asking"}, {"owner": {"reputation": 1, "user_id": 4363539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57babd2f2ee5aa4773e1da88e30fba59?s=128&d=identicon&r=PG&f=1", "display_name": "0x9093717", "link": "https://stackoverflow.com/users/4363539/0x9093717"}, "reply_to_user": {"reputation": 2131, "user_id": 3726169, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ad0f33269912ab7a2fb9f30df6f2d392?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Chesterfield", "link": "https://stackoverflow.com/users/3726169/jon-chesterfield"}, "edited": false, "score": 0, "creation_date": 1482354896, "post_id": 41271836, "comment_id": 69745380, "body": "i need to know, how to generate rcomb(n,k) elements 1 at a time in cycle which goes from zero to NumberOfrcomb(n,k)."}, {"owner": {"reputation": 1, "user_id": 4363539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57babd2f2ee5aa4773e1da88e30fba59?s=128&d=identicon&r=PG&f=1", "display_name": "0x9093717", "link": "https://stackoverflow.com/users/4363539/0x9093717"}, "reply_to_user": {"reputation": 2131, "user_id": 3726169, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ad0f33269912ab7a2fb9f30df6f2d392?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Chesterfield", "link": "https://stackoverflow.com/users/3726169/jon-chesterfield"}, "edited": false, "score": 0, "creation_date": 1482355529, "post_id": 41271836, "comment_id": 69745683, "body": "like if we have n = 4; (elements from 0 to 3) and k = 3;  how do I generate in single cycle without functions who call themselves, combinations like"}, {"owner": {"reputation": 1, "user_id": 4363539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57babd2f2ee5aa4773e1da88e30fba59?s=128&d=identicon&r=PG&f=1", "display_name": "0x9093717", "link": "https://stackoverflow.com/users/4363539/0x9093717"}, "reply_to_user": {"reputation": 2131, "user_id": 3726169, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ad0f33269912ab7a2fb9f30df6f2d392?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Chesterfield", "link": "https://stackoverflow.com/users/3726169/jon-chesterfield"}, "edited": false, "score": 0, "creation_date": 1482355714, "post_id": 41271836, "comment_id": 69745766, "body": "000 100 110 111, 120 121 122 123 130 131 132 133, and so on."}, {"owner": {"reputation": 1, "user_id": 4363539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57babd2f2ee5aa4773e1da88e30fba59?s=128&d=identicon&r=PG&f=1", "display_name": "0x9093717", "link": "https://stackoverflow.com/users/4363539/0x9093717"}, "reply_to_user": {"reputation": 2131, "user_id": 3726169, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ad0f33269912ab7a2fb9f30df6f2d392?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Chesterfield", "link": "https://stackoverflow.com/users/3726169/jon-chesterfield"}, "edited": false, "score": 0, "creation_date": 1482359500, "post_id": 41271836, "comment_id": 69747488, "body": "<a href=\"http://stackoverflow.com/questions/29669259/knapsack-brute-force-algorithm\" title=\"knapsack brute force algorithm\">stackoverflow.com/questions/29669259/&hellip;</a> this answer is quite close, but I dont see why he need permutations and as 2**n."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4363539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57babd2f2ee5aa4773e1da88e30fba59?s=128&d=identicon&r=PG&f=1", "display_name": "0x9093717", "link": "https://stackoverflow.com/users/4363539/0x9093717"}, "is_accepted": false, "score": -1, "last_activity_date": 1482507302, "creation_date": 1482507302, "answer_id": 41304110, "question_id": 41271836, "link": "https://stackoverflow.com/questions/41271836/c-part-of-brute-force-knapsack/41304110#41304110", "title": "C++ Part of brute-force knapsack", "body": "<p>The answer was provided by Minoru here <a href=\"https://gist.github.com/Minoru/745a7c19c7fa77702332cf4bd3f80f9e\" rel=\"nofollow noreferrer\">https://gist.github.com/Minoru/745a7c19c7fa77702332cf4bd3f80f9e</a> , \nit's enough to increment only the first element, then we count all of the carries, set where we did a carry and count reset value as the maximum of elements to reset and reset with it.</p>\n\n<p>here's my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\nstatic long FactNaive(int n)\n{\n    long r = 1;\n    for (int i = 2; i &lt;= n; ++i)\n        r *= i;\n    return r;\n}\nstatic long long CrNK (long n, long k)\n{\n    long long u, l;\n    u = FactNaive(n+k-1);\n    l = FactNaive(k)*FactNaive(n-1);\n    return u/l;\n}\n\nint main()\n{\n    int numberOFchoices=7,kountOfElementsInCombination=4;\n    int arrayOfSingleCombination[kountOfElementsInCombination] = {0,0,0,0};\n    int leftmostResetPos = kountOfElementsInCombination;\n    int resetValue=1;\n\n    for (long long iterationCounter = 0; iterationCounter&lt;CrNK(numberOFchoices,kountOfElementsInCombination); iterationCounter++)\n    {\n        leftmostResetPos = kountOfElementsInCombination;\n\n        if (iterationCounter!=0)\n        {\n            arrayOfSingleCombination[kountOfElementsInCombination-1]++;\n            for (int anotherIterationCounter=kountOfElementsInCombination-1; anotherIterationCounter&gt;0; anotherIterationCounter--)\n            {\n                if(arrayOfSingleCombination[anotherIterationCounter]==numberOFchoices)\n                {\n                    leftmostResetPos = anotherIterationCounter;\n                    arrayOfSingleCombination[anotherIterationCounter-1]++;\n                }\n            }\n        }\n\n        if (leftmostResetPos != kountOfElementsInCombination)\n        {\n            resetValue = 1;\n\n            for (int j = 0; j &lt; leftmostResetPos; j++)\n            {\n                if (arrayOfSingleCombination[j] &gt; resetValue)\n                {\n                    resetValue = arrayOfSingleCombination[j];\n                }\n            }\n\n            for (int j = leftmostResetPos; j != kountOfElementsInCombination; j++)\n            {\n                arrayOfSingleCombination[j] = resetValue;\n            }\n        }\n\n        for (int j = 0; j&lt;kountOfElementsInCombination; j++)\n        {\n            cout&lt;&lt;arrayOfSingleCombination[j]&lt;&lt;\" \";\n        }\n        cout&lt;&lt;\"\\n\";\n\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>thanks a lot, Minoru</p>\n"}], "owner": {"reputation": 1, "user_id": 4363539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57babd2f2ee5aa4773e1da88e30fba59?s=128&d=identicon&r=PG&f=1", "display_name": "0x9093717", "link": "https://stackoverflow.com/users/4363539/0x9093717"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1249, "favorite_count": 0, "answer_count": 1, "score": -10, "last_activity_date": 1603178975, "creation_date": 1482354092, "last_edit_date": 1603178975, "question_id": 41271836, "link": "https://stackoverflow.com/questions/41271836/c-part-of-brute-force-knapsack", "title": "C++ Part of brute-force knapsack", "body": "<p>reader,\nWell, I think I just got brainfucked a bit.\nI'm implementing knapsack, and I thought about I implemented brute-force algorithm like 1 or 2 times ever. So I decided to make another one.\nAnd here's what I chocked in.</p>\n<p>Let us decide W is maximum weight, and w(min) is minimal-weighted element we can put in knapsack like <code>k=W/w(min)</code> times. I'm explaining this because you, reader, are better know why I need to ask my question.</p>\n<p>Now. If we imagine that we have like 3 types of things we can put in knapsack, and our knapsack can store like 15 units of mass, let's count each unit weight as its number respectively. so we can put like 15 things of 1st type, or 7 things of 2nd type and 1 thing of 1st type. but, combinations like <code>22222221[7ed]</code> and <code>12222222[7ed]</code> will mean the same for us. and counting them is a waste of any type of resources we pay for decision. (it's a joke, 'cause bf is a waste if we have a cheaper algorithm, but I'm very interested)</p>\n<p>As I guess the type of selections we need to go through all possible combinations is called &quot;Combinations with repetitions&quot;. The number of <code>C'(n,k)</code> counts as <code>(n+k-1)!/(n-1)!k!</code>.\n(while I typing my message I just spotted a hole in my theory. we will probably need to add an empty, zero-weighted-zero-priced item to hold free space it's probably just increases n by 1)</p>\n<p>so, what's the matter.</p>\n<p><a href=\"https://rosettacode.org/wiki/Combinations_with_repetitions\" rel=\"nofollow noreferrer\">https://rosettacode.org/wiki/Combinations_with_repetitions</a></p>\n<p>as this problem is well-described up here^ I don't really want to use stack this way, I want to generate variations in single cycle, which is going <code>from i=0 to i&lt;C'(n,k)</code>.</p>\n<p>so, If I can make it, how it works?\nwe have</p>\n<pre><code>int prices[n]; //appear mystically\nint weights[n]; // same as previous and I guess we place (0,0) in both of them.\nint W, k; // W initialized by our lord and savior\nk = W/min(weights);\n\nint road[k], finalroad[k]; //all 0\nint curP = curW = maxP = maxW = 0;\nfor (int i = 0; i &lt; rCombNumber(n, k); i ++) {\n  /*guys please help me to know how to generate this mask which is consists of indices from 0 to n (meaning of each element) and k is size of mask.*/\n  curW = 0;\n  for (int j = 0; j &lt; k; j ++)\n    curW += weights[road[j]];\n  if (curW &lt; W) {\n    curP = 0;\n    for (int l = 0; l &lt; k; l ++)\n      curP += prices[road[l]];\n    if (curP &gt; maxP) {\n      maxP = curP;\n      maxW = curW;\n      finalroad = road;\n    }\n  }\n}\n</code></pre>\n<p>mask, road -- is an array of indices, each can be equal from 0 to n; and have to be generated as C'(n,k) (link about it above) from { 0, 1, 2, ... , n } by k elements in each selection (combination with repetitions where order is unimportant)</p>\n<p>that's it. prove me wrong or help me. Much thanks in advance <em>_</em></p>\n<p>and yes, of course algorithm will take the hell much time, but it looks like it should work. and I'm very interesting in it.</p>\n<p><strong>UPDATE:</strong></p>\n<p>what do I miss?</p>\n<p><a href=\"http://pastexen.com/code.php?file=EMcn3F9ceC.txt\" rel=\"nofollow noreferrer\">http://pastexen.com/code.php?file=EMcn3F9ceC.txt</a></p>\n"}, {"tags": ["c++", "gcc", "cmake", "itk"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 5, "creation_date": 1482394551, "post_id": 41271754, "comment_id": 69758538, "body": "Do not use <b>language-specific double quotes</b> (<code>\u201c</code>) in CMake scripts. <a href=\"http://stackoverflow.com/questions/41149743/cmake-set-property-could-not-find-cache-variable/41151401\">Similar problem</a> has been arised recently."}, {"owner": {"reputation": 7, "user_id": 6441922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4c07df2145689c130590e9a0e2649bf6?s=128&d=identicon&r=PG&f=1", "display_name": "MYtry", "link": "https://stackoverflow.com/users/6441922/mytry"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1482415952, "post_id": 41271754, "comment_id": 69771897, "body": "Thank you so much, I am not carefull"}], "answers": [{"tags": [], "owner": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "is_accepted": true, "score": 1, "last_activity_date": 1482424739, "creation_date": 1482424739, "answer_id": 41287868, "question_id": 41271754, "link": "https://stackoverflow.com/questions/41271754/make-openmp-g-6-2-0-no-such-file/41287868#41287868", "title": "make openmp g++-6.2.0 no such file", "body": "<p>You're using language/locale-specific double quotes. Most programming languages don't support these, including CMake. Use the \"normal\" double quotes: <code>\"</code></p>\n"}], "owner": {"reputation": 7, "user_id": 6441922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4c07df2145689c130590e9a0e2649bf6?s=128&d=identicon&r=PG&f=1", "display_name": "MYtry", "link": "https://stackoverflow.com/users/6441922/mytry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 0, "closed_date": 1482447875, "accepted_answer_id": 41287868, "answer_count": 1, "score": 0, "last_activity_date": 1482424739, "creation_date": 1482353776, "last_edit_date": 1482354339, "question_id": 41271754, "link": "https://stackoverflow.com/questions/41271754/make-openmp-g-6-2-0-no-such-file", "closed_reason": "Duplicate", "title": "make openmp g++-6.2.0 no such file", "body": "<p>cmakelist.txt</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.7)\n\nproject(multithreading)\n\n# Find ITK.\nfind_package(ITK REQUIRED)\ninclude(${ITK_USE_FILE})\n\nFIND_PACKAGE( OpenMP REQUIRED)\nif(OPENMP_FOUND)\nmessage(\"OPENMP FOUND\")\nset(CMAKE_C_FLAGS \u201c${CMAKE_C_FLAGS} ${OpenMP_C_FLAGS}\u201d)\nset(CMAKE_CXX_FLAGS \u201c${CMAKE_CXX_FLAGS} ${OpenMP_CXX_FLAGS}\u201c)\nset(CMAKE_EXE_LINKER_FLAGS \u201c${CMAKE_EXE_LINKER_FLAGS} ${OpenMP_EXE_LINKER_FLAGS}\u201d)\nendif()\n\nadd_executable(multithreading multithreading.cpp )\n\ntarget_link_libraries(multithreading ${ITK_LIBRARIES})\nTARGET_LINK_LIBRARIES(multithreading ${OpenMP_CXX_LIBRARIES})\n</code></pre>\n\n<p>And then I change default compiler which is AppleClang to gcc-6.2.0, and then cmake\n,all openmp flags find, and configure is fine.</p>\n\n<p>cmake -DCMAKE_C_COMPILER=/usr/local/gcc-6.2.0/bin/gcc-6.2.0 -DCMAKE_CXX_COMPILER=/usr/local/gcc-6.2.0/bin/g++-6.2.0 ./</p>\n\n<pre><code>-- The C compiler identification is GNU 6.2.0\n-- The CXX compiler identification is GNU 6.2.0\n-- Checking whether C compiler has -isysroot\n-- Checking whether C compiler has -isysroot - yes\n-- Checking whether C compiler supports OSX deployment target flag\n-- Checking whether C compiler supports OSX deployment target flag - yes\n-- Check for working C compiler: /usr/local/gcc-6.2.0/bin/gcc-6.2.0\n-- Check for working C compiler: /usr/local/gcc-6.2.0/bin/gcc-6.2.0 -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Checking whether CXX compiler has -isysroot\n-- Checking whether CXX compiler has -isysroot - yes\n-- Checking whether CXX compiler supports OSX deployment target flag\n-- Checking whether CXX compiler supports OSX deployment target flag - yes\n-- Check for working CXX compiler: /usr/local/gcc-6.2.0/bin/g++-6.2.0\n-- Check for working CXX compiler: /usr/local/gcc-6.2.0/bin/g++-6.2.0 -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Try OpenMP C flag = [-fopenmp]\n-- Performing Test OpenMP_FLAG_DETECTED\n-- Performing Test OpenMP_FLAG_DETECTED - Success\n-- Try OpenMP CXX flag = [-fopenmp]\n-- Performing Test OpenMP_FLAG_DETECTED\n-- Performing Test OpenMP_FLAG_DETECTED - Success\n-- Found OpenMP: -fopenmp  \nOPENMP FOUND\n-- Configuring done\n-- Generating done\n</code></pre>\n\n<p>then next when I do \u2018make\u2019 it shows me</p>\n\n<pre><code>canning dependencies of target multithreading\n[ 50%] Building CXX object CMakeFiles/multithreading.dir/multithreading.cpp.o\ng++-6.2.0: error: \u201c: No such file or directory\ng++-6.2.0: fatal error: no input files\ncompilation terminated.\n/bin/sh: -fopenmp\u201c: command not found\nmake[2]: *** [CMakeFiles/multithreading.dir/multithreading.cpp.o] Error 127\nmake[1]: *** [CMakeFiles/multithreading.dir/all] Error 2\nmake: *** [all] Error 2\n</code></pre>\n\n<p>If I do g++ -fopenmp myproject.cpp it will not link ITK Library</p>\n\n<pre><code>g++ -fopenmp multithreading.cpp \nmultithreading.cpp:4:44: fatal error: itkRescaleIntensityImageFilter.h: No such file or directory\n #include \"itkRescaleIntensityImageFilter.h\"\n                                            ^\ncompilation terminated.\n</code></pre>\n\n<p>So I am wondering how can I fix that issue, so use itk and openmp as library at the same time.</p>\n"}, {"tags": ["c++", "opencv", "video"], "answers": [{"comments": [{"owner": {"reputation": 302, "user_id": 6117313, "user_type": "registered", "accept_rate": 30, "profile_image": "https://graph.facebook.com/1162946607089312/picture?type=large", "display_name": "Reddy2810", "link": "https://stackoverflow.com/users/6117313/reddy2810"}, "edited": false, "score": 0, "creation_date": 1482356854, "post_id": 41272361, "comment_id": 69746291, "body": "Hey Micka, I have tried it doesnt work. I have used frame fcc has CV_FOURCC(&#39;D&#39;,&#39;I&#39;,&#39;V&#39;,&#39;3&#39;);  or Do you know any other specific codecs for for grayscale images"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "reply_to_user": {"reputation": 302, "user_id": 6117313, "user_type": "registered", "accept_rate": 30, "profile_image": "https://graph.facebook.com/1162946607089312/picture?type=large", "display_name": "Reddy2810", "link": "https://stackoverflow.com/users/6117313/reddy2810"}, "edited": false, "score": 0, "creation_date": 1482356955, "post_id": 41272361, "comment_id": 69746329, "body": "no idea, sorry. Is converting to &quot;color&quot; an option for you? cv::cvtColor (src, dst, CV_GRAY2BGR)."}, {"owner": {"reputation": 302, "user_id": 6117313, "user_type": "registered", "accept_rate": 30, "profile_image": "https://graph.facebook.com/1162946607089312/picture?type=large", "display_name": "Reddy2810", "link": "https://stackoverflow.com/users/6117313/reddy2810"}, "edited": false, "score": 0, "creation_date": 1482357529, "post_id": 41272361, "comment_id": 69746620, "body": "Hey it works .. but I does not work with my GigaE Pro camera"}, {"owner": {"reputation": 302, "user_id": 6117313, "user_type": "registered", "accept_rate": 30, "profile_image": "https://graph.facebook.com/1162946607089312/picture?type=large", "display_name": "Reddy2810", "link": "https://stackoverflow.com/users/6117313/reddy2810"}, "edited": false, "score": 0, "creation_date": 1482490509, "post_id": 41272361, "comment_id": 69802350, "body": "Hey, it works with OpenCV 2.4.11 But its doesnt work with OpenCV 3.0.0 and even the file is not written."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "reply_to_user": {"reputation": 302, "user_id": 6117313, "user_type": "registered", "accept_rate": 30, "profile_image": "https://graph.facebook.com/1162946607089312/picture?type=large", "display_name": "Reddy2810", "link": "https://stackoverflow.com/users/6117313/reddy2810"}, "edited": false, "score": 0, "creation_date": 1482490842, "post_id": 41272361, "comment_id": 69802512, "body": "no idead sorry... does your program have access to the opencv_ffmpeg* dll file of the right openCV version?"}, {"owner": {"reputation": 302, "user_id": 6117313, "user_type": "registered", "accept_rate": 30, "profile_image": "https://graph.facebook.com/1162946607089312/picture?type=large", "display_name": "Reddy2810", "link": "https://stackoverflow.com/users/6117313/reddy2810"}, "edited": false, "score": 0, "creation_date": 1482493558, "post_id": 41272361, "comment_id": 69803975, "body": "Yes. I have the dll in bin path of openCV and refer to the screenshot I have added above and I have also tried including #include &quot;opencv2/imgcodecs/imgcodecs.hpp&quot; #include &quot;opencv2/videoio/videoio.hpp&quot; but it doesnt help"}], "tags": [], "owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "is_accepted": true, "score": 3, "last_activity_date": 1482356535, "creation_date": 1482356535, "answer_id": 41272361, "question_id": 41271742, "link": "https://stackoverflow.com/questions/41271742/videowriter-function-for-greyscale-image-using-opencv-function/41272361#41272361", "title": "Videowriter function for greyscale image using OpenCV function", "body": "<p>VideoWriter has an optional parameter which tells whether the video is grayscale or color. Default ist color = true. Try</p>\n\n<pre><code>bool isColor = false;\nwriter = VideoWriter(filename,-1,fps,frameSize, isColor);\n</code></pre>\n"}], "owner": {"reputation": 302, "user_id": 6117313, "user_type": "registered", "accept_rate": 30, "profile_image": "https://graph.facebook.com/1162946607089312/picture?type=large", "display_name": "Reddy2810", "link": "https://stackoverflow.com/users/6117313/reddy2810"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1124, "favorite_count": 1, "accepted_answer_id": 41272361, "answer_count": 1, "score": 3, "last_activity_date": 1482493465, "creation_date": 1482353697, "last_edit_date": 1495542823, "question_id": 41271742, "link": "https://stackoverflow.com/questions/41271742/videowriter-function-for-greyscale-image-using-opencv-function", "title": "Videowriter function for greyscale image using OpenCV function", "body": "<p>I have a GigaE camera and which gives me a greyscale image and I want to record it as a video and process it later. </p>\n\n<p>So as initial step I tried recording video using my webcam it worked and if i convert it into greyscale before writing it into video. I am not getting any video. \nMy code is below</p>\n\n<pre><code>int main(int argc, char* argv[])\n{\n\nVideoCapture cap(0); \nVideoWriter writer;\n\nif (!cap.isOpened())  \n{\n    cout &lt;&lt; \"not opened\" &lt;&lt; endl;\n    return -1;\n}\n\nchar* windowName = \"Webcam Feed\";\nnamedWindow(windowName, CV_WINDOW_AUTOSIZE); \n\n\nstring filename = \"D:\\myVideo_greyscale.avi\";\nint fcc = CV_FOURCC('8', 'B', 'P', 'S');\nint fps = 30;\nSize frameSize(cap.get(CV_CAP_PROP_FRAME_WIDTH),cap.get(CV_CAP_PROP_FRAME_HEIGHT));\nwriter = VideoWriter(filename,-1,fps,frameSize);\n\nif(!writer.isOpened())\n{\n    cout&lt;&lt;\"Error not opened\"&lt;&lt;endl;\n    getchar();\n    return -1;\n}\n\n\nwhile (1) \n{\n\n    Mat frame;\n\n    bool bSuccess = cap.read(frame); \n\n    if (!bSuccess) \n    {\n        cout &lt;&lt; \"ERROR READING FRAME FROM CAMERA FEED\" &lt;&lt; endl;\n        break;\n    }\n    cvtColor(frame, frame, CV_BGR2GRAY);\n    writer.write(frame);\n    imshow(windowName, frame); \n}\n\nreturn 0;\n</code></pre>\n\n<p>}`</p>\n\n<p>I used <code>fcc</code> has <code>-1</code> tried all the possibilities none of them are able to record video. \nI also tried <a href=\"https://stackoverflow.com/questions/23066542/creating-a-grayscale-video-using-opencv\">creating a grayscale video using opencv</a> for <code>fcc</code> has <code>CV_FOURCC('8','B','P','S')</code> but it did not help me.</p>\n\n<p>I get this error in debug after using the breakpoint<a href=\"https://i.stack.imgur.com/1vRZR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1vRZR.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "qt", "qtablewidget"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1482424242, "post_id": 41271364, "comment_id": 69777594, "body": "Your expectations are wrong. The values returned are correct. That&#39;s all. When you query the widget, it is either not visible yet, or not hidden yet. You must redesign your code to query at appropriate times or stop depending on behavior that&#39;s nowhere documented to be the way you expect."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1482424369, "post_id": 41271364, "comment_id": 69777695, "body": "This is not a complete example. A complete example would be a single-file, minimal piece of code that anyone can copy-paste into <code>main.cpp</code>, compile, and run. Most critically, you don&#39;t show <b>when</b> you invoke the queries. You&#39;re just telling us that you expect something else, but there&#39;s no way to know what you expect and why without seeing code, without having to second guess things."}, {"owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1482424823, "post_id": 41271364, "comment_id": 69777983, "body": "Actually, I can&#39;t share the entire code and I don&#39;t have much time now to write a complete example that shows the entire &quot;situation&quot;. Thanks anyway."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1482428725, "post_id": 41271364, "comment_id": 69780238, "body": "Sharing entire code would be pretty bad because the entire thing is not necessary. &quot;Code dump&quot; questions are bad. You&#39;re expected show a minimal example that reproduces the issue: such that literally removing any code would make the problem go away. That&#39;s what <i>minimal</i> means."}], "answers": [{"comments": [{"owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "edited": false, "score": 0, "creation_date": 1482407883, "post_id": 41282358, "comment_id": 69766898, "body": "Thanks, @Dusteh. I make the call inside a function after populate the TableWidget. I updated the question with a complete example."}, {"owner": {"reputation": 1436, "user_id": 4341198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1afe57c0798cf3205c694ee52856fc01?s=128&d=identicon&r=PG&f=1", "display_name": "Dusteh", "link": "https://stackoverflow.com/users/4341198/dusteh"}, "reply_to_user": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "edited": false, "score": 0, "creation_date": 1482411379, "post_id": 41282358, "comment_id": 69768910, "body": "Is <code>MyClass</code> a <code>QWidget</code> as well (seems so)? Please additionally verify and print out the <code>qDebug() &lt;&lt; isVisible();</code> - right under the check for scrollbar visibility. Let us know what you get."}, {"owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "edited": false, "score": 0, "creation_date": 1482411422, "post_id": 41282358, "comment_id": 69768928, "body": "Yes, it is. I updated the question. Is the <code>QTableWidget</code> visualization updated every time we call <code>insertRow</code> or <code>setItem</code>? If not, maybe the <code>QTableWidget</code> visualization is not updated yet when I call the <code>verticalScrollBar()-&gt;isVisible()</code> function."}, {"owner": {"reputation": 1436, "user_id": 4341198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1afe57c0798cf3205c694ee52856fc01?s=128&d=identicon&r=PG&f=1", "display_name": "Dusteh", "link": "https://stackoverflow.com/users/4341198/dusteh"}, "reply_to_user": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "edited": false, "score": 1, "creation_date": 1482412035, "post_id": 41282358, "comment_id": 69769327, "body": "Yes, this might mean not everything is up to date. Try calling <code>QApplication::processEvents();</code> before checking the visibility."}, {"owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "edited": false, "score": 0, "creation_date": 1482412037, "post_id": 41282358, "comment_id": 69769330, "body": "I tried to insert a <code>QApplication::processEvents();</code> instruction before the <code>qDebug()</code> calls and it didn&#39;t work. But if I insert the <code>QApplication::processEvents();</code> instruction <b>twice</b> before the <code>qDebug</code> it gets the correct value in the <code>verticalScrollBar()-&gt;isVisible()</code>. I think it is related to the <code>QTableWidget</code> visualization update. Is it possible that it is a <b>Qt</b> bug?"}, {"owner": {"reputation": 1436, "user_id": 4341198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1afe57c0798cf3205c694ee52856fc01?s=128&d=identicon&r=PG&f=1", "display_name": "Dusteh", "link": "https://stackoverflow.com/users/4341198/dusteh"}, "reply_to_user": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "edited": false, "score": 0, "creation_date": 1482412321, "post_id": 41282358, "comment_id": 69769526, "body": "One more thing I can think of which you might check is to call <code>ui-&gt;myTableWidget-&gt;viewport()-&gt;update();</code> to actually force the update of <code>QScrollArea</code> which handles the bars."}, {"owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "edited": false, "score": 0, "creation_date": 1482412526, "post_id": 41282358, "comment_id": 69769650, "body": "I tried to call <code>ui-&gt;myTableWidget-&gt;viewport()-&gt;update();</code> but it didn&#39;t work."}, {"owner": {"reputation": 1436, "user_id": 4341198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1afe57c0798cf3205c694ee52856fc01?s=128&d=identicon&r=PG&f=1", "display_name": "Dusteh", "link": "https://stackoverflow.com/users/4341198/dusteh"}, "reply_to_user": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "edited": false, "score": 0, "creation_date": 1482490720, "post_id": 41282358, "comment_id": 69802462, "body": "I&#39;ve looked more closely into the issue. Check out the updated answer."}], "tags": [], "owner": {"reputation": 1436, "user_id": 4341198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1afe57c0798cf3205c694ee52856fc01?s=128&d=identicon&r=PG&f=1", "display_name": "Dusteh", "link": "https://stackoverflow.com/users/4341198/dusteh"}, "is_accepted": false, "score": 2, "last_activity_date": 1482490684, "last_edit_date": 1482490684, "creation_date": 1482406850, "answer_id": 41282358, "question_id": 41271364, "link": "https://stackoverflow.com/questions/41271364/how-to-know-when-the-verticalscrollbar-is-showing/41282358#41282358", "title": "How to know when the VerticalScrollBar is showing?", "body": "<p>In general the code you are using is supposed to work - checked on Qt 5.3.0.</p>\n\n<p>However, you must be sure that when you are making the call the <code>QTableWidget</code> itself is visible.</p>\n\n<p>For example if you make the call inside the <code>MainWindow</code> constructor you will certainly get a <code>false</code> answer. Only after the form is shown the call to isVisible() on particular scrollbar would return the correct value.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>With your code pasted I was able to reproduce the issue. I needed to go through the Qt code a bit to see whats going on. Basically it turns out that for <code>QTableView</code> which is parent class of <code>QTableWidget</code> scroll bar values are updated via <code>updateGeometries</code> (do not confuse it with the regular <code>updateGeometry</code> the one I'm mentioning is <code>protected</code>). Internally this method is called either directly or the event is processed through the event loop. In short, it depends on whether you add columns or rows.</p>\n\n<p>In your example, if you <code>insertColumn</code> instead of <code>insertRow</code> (and switch the arguments in <code>setItem</code>) after checking the visibility of <code>horizontalScrollBar</code> you will get the proper result right away.</p>\n\n<p>I could confirm this by subclassing the <code>QTableWidget</code> and overriding <code>event</code> method. It shows that when adding columns following events are executed: <code>MetaCall</code> (invoke call) and <code>LayoutRequest</code>. On the other hand, when adding rows first event passed is <code>Timer</code>.</p>\n\n<p>I'm not Qt implementer so I'm not sure what is the purpose the difference. However, this info helps solving your problem in a more elegant way.</p>\n\n<p>You can implement <code>MyTableWidget</code> which overrides the <code>event</code> method.</p>\n\n<pre><code>class MyTableWidget: public QTableWidget\n{\n    Q_OBJECT\npublic:\n    bool event(QEvent *e) override\n    {\n        const bool result = QTableWidget::event(e);\n        if (e-&gt;type() == QEvent::LayoutRequest)\n        {\n            // call what you need here\n            // or emit layoutUpdated(); and connect some slots which perform\n            // processing dependent on scrollbar visibility\n        }\n        return result;\n    }\n\nsignals:\n    void layoutUpdated();\n}\n</code></pre>\n\n<p>However, such event might get called in other situations not only when the view needs to be updated due to model data updates.</p>\n\n<p>Another solution would be to avoid overriding the <code>event</code> method but creating your own method to trigger the required updates. For example:</p>\n\n<pre><code>void MyTableWidget::updateLayout()\n{\n    QEvent ev{QEvent::LayoutRequest};\n    QTableWidget::updateGeometries();\n    QTableWidget::event(&amp;ev);\n}\n</code></pre>\n\n<p>This would call directly <code>updateGeometries</code> which recalculates scrollbar min/max values and perform a direct <code>event</code> method call for <code>LayoutRequest</code> (without processing through eventloop). Which if I'm correct indirectly updates scrollbar visibility.</p>\n\n<p>Calling this method before checking the visibility should also fix your problem.</p>\n\n<pre><code>ui-&gt;myTableWidget-&gt;updateLayout();\nqDebug() &lt;&lt; \"VerticalScrollBar : \" &lt;&lt; ui-&gt;myTableWidget-&gt;verticalScrollBar()-&gt;isVisible();\n// prints \"VerticalScrollBar :  true   false\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6990, "user_id": 2441026, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/460589db7e2073ceeffefff79bafa068?s=128&d=identicon&r=PG", "display_name": "user136036", "link": "https://stackoverflow.com/users/2441026/user136036"}, "is_accepted": false, "score": 0, "last_activity_date": 1580833172, "creation_date": 1580833172, "answer_id": 60061548, "question_id": 41271364, "link": "https://stackoverflow.com/questions/41271364/how-to-know-when-the-verticalscrollbar-is-showing/60061548#60061548", "title": "How to know when the VerticalScrollBar is showing?", "body": "<p>I wanted to get notified via a signal, when a QScrollBar gets visible. I'm writing this answer here, since this is the first google result I got and no result had a proper answer.</p>\n\n<p>First of all, there is no signal for changed visibility, so we will use <a href=\"https://doc.qt.io/qt-5/qabstractslider.html#valueChanged\" rel=\"nofollow noreferrer\"><code>valueChanged</code></a>. </p>\n\n<p>Now you can add a function that checks if the scrollbar <code>isVisible()</code> or not.<br>\nProblem: It won't work (and someone with more knowledge in Qt could probably explain why, I sadly cannot).</p>\n\n<p>The trick is, to use a QTimer (Python code):</p>\n\n<p><code>self.horizontalScrollBar().valueChanged.connect(lambda x: QTimer.singleShot(0,  some_func))</code></p>\n"}], "owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3006, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1580833172, "creation_date": 1482352044, "last_edit_date": 1482411765, "question_id": 41271364, "link": "https://stackoverflow.com/questions/41271364/how-to-know-when-the-verticalscrollbar-is-showing", "title": "How to know when the VerticalScrollBar is showing?", "body": "<p>I need to know when the <code>verticalScrollBar</code> of my <code>QTableWidget</code> is being shown.\nI am currently using the following instruction:</p>\n\n<p>Header:</p>\n\n<pre><code>#ifndef MYCLASS_H\n#define MYCLASS_H\n\n#include &lt;QDebug&gt;\n#include &lt;QWidget&gt;\n#include &lt;QScrollBar&gt;\n\nnamespace Ui {\nclass MyClass;\n}\n\nclass MyClass: public QWidget\n{\n    Q_OBJECT\n\npublic:\n    explicit MyClass(QWidget *parent = 0);\n    ~MyClass();\n\nprivate:\n    void populateTable(QVector&lt;QString&gt; content);\n\nprivate:\n    Ui::MyClass *ui;\n};\n\n#endif // MYCLASS_H\n</code></pre>\n\n<p>Populate table function:</p>\n\n<pre><code>void MyClass::populateTable(QVector&lt;QString&gt; content)\n{\n    while( ui-&gt;myTableWidget-&gt;rowCount() &gt; 0 )\n    {\n        ui-&gt;myTableWidget-&gt;removeRow(0);\n    }\n\n    QTableWidgetItem* item;\n    for (int row = 0; row &lt; content.length(); ++row)\n    {\n        ui-&gt;myTableWidget-&gt;insertRow(row);\n\n        item = new QTableWidgetItem( QString::number(row) );\n        item-&gt;setTextAlignment(Qt::AlignCenter);\n        ui-&gt;myTableWidget-&gt;setItem(row, 0, item);\n\n        item = new QTableWidgetItem( content.at(row) );\n        item-&gt;setTextAlignment(Qt::AlignCenter);\n        ui-&gt;myTableWidget-&gt;setItem(row, 1, item);\n    }\n\n    qDebug() &lt;&lt; \"This : \" &lt;&lt; this-&gt;isVisible();\n    qDebug() &lt;&lt; \"QTableWidget : \" &lt;&lt; ui-&gt;myTableWidget-&gt;isVisible();\n    qDebug() &lt;&lt; \"VerticalScrollBar : \" &lt;&lt; ui-&gt;myTableWidget-&gt;verticalScrollBar()-&gt;isVisible(); // &lt;-HERE\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>// Called from the constructor\nThis :  false\nQTableWidget :  false\nVerticalScrollBar :  false\n\n// Called by a button pressed\nThis :  true\nQTableWidget :  true\nVerticalScrollBar :  true\nThis :  true\nQTableWidget :  true\nVerticalScrollBar :  false\n</code></pre>\n\n<p>But it returns a wrong value. When the <strong>ScrollBar</strong> is visible it returns false and when it is not visible it returns true. <strong>Note</strong>: myTableWidget (<code>QTableWidget</code>) is always visible.</p>\n\n<p>Is there any other way that I can do this?</p>\n\n<p>I'm using Qt version 5.3.2</p>\n"}, {"tags": ["c++", "game-engine", "game-physics", "bulletphysics"], "comments": [{"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 1, "creation_date": 1483457530, "post_id": 41271279, "comment_id": 70100092, "body": "Could it be that you are deleting <code>fallMotionState</code> after creating the <code>fallingBoxBody</code> rigid body? That would lead to a dangling pointer in the rigid body that could alias the next allocation of the same size, possibly causing what you are seeing? Either that, or you have some other previous dangling pointer that is getting stomped on by <code>fallMotionState</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4063815"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1483550534, "post_id": 41271279, "comment_id": 70145172, "body": "@Frank well this happens in a constructor and it goes out of scope later, but I am not freeing anything manually here. (yes, possible cause for leakage)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4063815"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1483644357, "post_id": 41271279, "comment_id": 70192148, "body": "Switched everything to use smart-pointers, still no luck"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4063815"}, "edited": false, "score": 0, "creation_date": 1483646648, "post_id": 41456723, "comment_id": 70193430, "body": "your position input brought me new problems, but I have something to look at. Funny thing is: If I do set a hardcoded position in there I&#39;d assume that the body would simply stay there, right? Well, it does not... it just slowly falls down (along with the ground itself, which should not move as I gave it a mass of 0) Out of ideas"}, {"owner": {"reputation": 6029, "user_id": 3577745, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4646095ed212f8392ed0cd522b84e7e3?s=128&d=identicon&r=PG&f=1", "display_name": "javaLover", "link": "https://stackoverflow.com/users/3577745/javalover"}, "edited": false, "score": 0, "creation_date": 1483668603, "post_id": 41456723, "comment_id": 70201793, "body": "@Sorona My first bounty, thank!  I have add some ideas about the new problem at the end of answer.   :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4063815"}, "edited": false, "score": 0, "creation_date": 1483743504, "post_id": 41456723, "comment_id": 70237461, "body": "I am setting the mass on the body of course, not on any shape. If I set no gravity, of course it will not fall. It also only falls if there is the other body in there. If it&#39;s only the ground it stays (but completely offset)... maybe it has to do with the camera, gonna check."}, {"owner": {"reputation": 6029, "user_id": 3577745, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4646095ed212f8392ed0cd522b84e7e3?s=128&d=identicon&r=PG&f=1", "display_name": "javaLover", "link": "https://stackoverflow.com/users/3577745/javalover"}, "edited": false, "score": 0, "creation_date": 1483753843, "post_id": 41456723, "comment_id": 70240395, "body": "@Sorona I never succeed to control world gravity, so I always set world gravity = 0 and use direct impulse per object instead (manually). ......  &quot;only falls if there is the other body in there&quot; It indicates that the the falling force might be from collision impulse (from a certain pair of object).  I have met a bug that such unknown velocity come from the collision at the first time-step (so the bug is very hard to be found).  Try to change position of another object at 0 time-step to very far away / add some collision callback to check."}, {"owner": {"reputation": 6029, "user_id": 3577745, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4646095ed212f8392ed0cd522b84e7e3?s=128&d=identicon&r=PG&f=1", "display_name": "javaLover", "link": "https://stackoverflow.com/users/3577745/javalover"}, "edited": false, "score": 0, "creation_date": 1483842034, "post_id": 41456723, "comment_id": 70263425, "body": "@Sorona  Another guess : I hope you didn&#39;t set/modify mass of a (compound) body after add it to the world."}], "tags": [], "owner": {"reputation": 6029, "user_id": 3577745, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4646095ed212f8392ed0cd522b84e7e3?s=128&d=identicon&r=PG&f=1", "display_name": "javaLover", "link": "https://stackoverflow.com/users/3577745/javalover"}, "is_accepted": false, "score": 2, "last_activity_date": 1483668283, "last_edit_date": 1483668283, "creation_date": 1483507414, "answer_id": 41456723, "question_id": 41271279, "link": "https://stackoverflow.com/questions/41271279/multiple-instances-of-btdefaultmotionstate-all-ignored-but-one/41456723#41456723", "title": "Multiple instances of btDefaultMotionState, all ignored, but one", "body": "<p>Bullet is a good library but only few dedicate time to write good documentation.</p>\n\n<p>To set position of a <code>btRigidBody</code>, try this :-</p>\n\n<pre><code>btTransform transform = body -&gt; getCenterOfMassTransform();\ntransform.setOrigin(aNewPosition); //&lt;- set orientation / position that you like\nbody -&gt; setCenterOfMassTransform(transform);  \n</code></pre>\n\n<p>If your code is wrong <em>only</em> at the set transformation part (that is what I guess from skimming your code), it should be solved.</p>\n\n<p>Note that this snippet works only for dynamic body, not static body.</p>\n\n<p><strong>About CompoundBody:-</strong></p>\n\n<p>If it is a compound body, e.g. shape <code>B</code> contains shape <code>C</code>.<br>\nSetting transformation of <code>B</code> would work (set body of <code>B</code>), but not work for <code>C</code>.<br>\n (because <code>C</code> is just a shape, transformation support only body.)     </p>\n\n<p>If I want to change relative transformation of <code>C</code> to <code>B</code>, I would create a whole new compound shape and a new rigid body.  Don't forget to remove old body &amp; shape.</p>\n\n<p>That is a library limitation.</p>\n\n<p><strong>P.S.</strong></p>\n\n<p>I can't answer some of your doubt/questions, these information are what I gathered after stalking in Bullet forum for a while, and tested by myself.</p>\n\n<p>(I am also coding game + game library from scratch, using Bullet and other open sources.)</p>\n\n<h2><strong>Edit: (about the new problem)</strong></h2>\n\n<blockquote>\n  <p>it just slowly falls down (along with the ground itself, which should\n  not move as I gave it a mass of 0)</p>\n</blockquote>\n\n<p>I would try to solve it in this order.</p>\n\n<p><strong>Idea A</strong></p>\n\n<ul>\n<li>Set to the compound mass = 0 instead, because setting a child shape's mass has no meaning.  </li>\n</ul>\n\n<p><strong>Idea B</strong></p>\n\n<ul>\n<li>First check <code>-&gt; getCenterOfMassTransform()</code> every time-step , is it really falling?      </li>\n<li>If it is actually falling, to be sure, try <code>dynamicsWorld-&gt;setGravity(btVector3(0,0,0));</code>.       </li>\n<li>If still not work, try with very simple world (1 simple object, no compound) and see.     </li>\n</ul>\n\n<p><strong>Idea C</strong>     (now I start to be desperate)   </p>\n\n<ul>\n<li>Ensure your camera position is constant.     </li>\n<li>If the problem is still alive, I think you now can create a simple test-case and post it in Bullet forum without too much effort.      </li>\n<li>Lower amounts of lines of code = better feedback </li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "is_accepted": false, "score": 0, "last_activity_date": 1483546873, "creation_date": 1483546873, "answer_id": 41468588, "question_id": 41271279, "link": "https://stackoverflow.com/questions/41271279/multiple-instances-of-btdefaultmotionstate-all-ignored-but-one/41468588#41468588", "title": "Multiple instances of btDefaultMotionState, all ignored, but one", "body": "<p>What you are describing is not normal bullet behavior. Your understanding of the library is correct.</p>\n\n<p>What you are most likely dealing with is either a buffer overrun or a dangling pointer. The code you have posted does not have an obvious one of either, so it would be coming from somewhere else in your codebase. You might be able to track that down using a well-placed memory breakpoint.</p>\n\n<p>You \"might\" be dealing with a header/binary version inconsistency issue, but that's less likely as you would probably be seeing other major issues.</p>\n"}, {"tags": [], "owner": {"reputation": 382, "user_id": 6396166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38485aa8e631ac55b1f3d65926116063?s=128&d=identicon&r=PG&f=1", "display_name": "LastBlow", "link": "https://stackoverflow.com/users/6396166/lastblow"}, "is_accepted": false, "score": 0, "last_activity_date": 1485882448, "last_edit_date": 1485882448, "creation_date": 1485881891, "answer_id": 41963222, "question_id": 41271279, "link": "https://stackoverflow.com/questions/41271279/multiple-instances-of-btdefaultmotionstate-all-ignored-but-one/41963222#41963222", "title": "Multiple instances of btDefaultMotionState, all ignored, but one", "body": "<p>Just had the exact same type of behavior with the DebugDrawer suspended on top of the world. Solved it by passing to Bullet Physics the projectionview matrix alone, without the model matrix that he has and multiplies with already:</p>\n\n<pre><code>glUseProgram(shaderID);\n\nm_MVP = m_camera-&gt;getProjectionViewMatrix();\nglUniformMatrix4fv(shaderIDMVP, 1, GL_FALSE, &amp;m_MVP[0][0]);\nif (m_dynamicWorld) m_dynamicWorld-&gt;debugDrawWorld();\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4063815"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 1, "answer_count": 3, "score": 7, "last_activity_date": 1490352676, "creation_date": 1482351695, "last_edit_date": 1490352676, "question_id": 41271279, "link": "https://stackoverflow.com/questions/41271279/multiple-instances-of-btdefaultmotionstate-all-ignored-but-one", "title": "Multiple instances of btDefaultMotionState, all ignored, but one", "body": "<p>To summarize the problem(s):</p>\n\n<p>I have two bodies in my world so far, one being the ground, the other one being a falling box called \"fallingStar\".</p>\n\n<p>1) I do not understand why my bullet world is not aligned with my drawn world unless I set an offset of <code>btVector3(2,2,2)</code> to the (btDefault)MotionState.\nThere is no fancy magic going on anywhere in the code that would explain the offset. Or at least I could not find any reason, not in the shaders, not anywhere.</p>\n\n<p>2) I expected to be able to use multiple instances of <code>btDefaultMotionState</code>, to be precise, I wanted to use one instance for the falling entity and place it somewhere above the ground and then create another instance for the ground that should simply be aligned with my graphics-ground, ever unmoving.</p>\n\n<p>What I am experiencing in regards to 2) is that for whatever reason the <code>btDefaultMotionState</code> instance for the falling entity is <em>always</em> also influencing the one for the ground, without any reference.</p>\n\n<p>Now to the code:</p>\n\n<p>Creation of the fallingBox:</p>\n\n<pre><code>btCollisionShape *fallingBoxShape = new btBoxShape(btVector3(1,1,1));\nbtScalar fallingBoxMass = 1;\nbtVector3 fallingBoxInertia(0,0,0);\nfallingBoxShape-&gt;calculateLocalInertia(fallingBoxMass, fallingBoxInertia);\n\n// TODO this state somehow defines where exactly _ALL_ of the physicsWorld is...\nbtDefaultMotionState *fallMotionState = new btDefaultMotionState(btTransform(btQuaternion(0,0,0,1), btVector3(2,2,2)));\n//btDefaultMotionState *fallMotionState = new btDefaultMotionState();\nbtRigidBody::btRigidBodyConstructionInfo fallingBoxBodyCI(fallingBoxMass, fallMotionState, fallingBoxShape, fallingBoxInertia);\n/*btTransform initialTransform;\ninitialTransform.setOrigin(btVector3(0,5,0));*/\nthis-&gt;fallingBoxBody = new btRigidBody(fallingBoxBodyCI);\n/*fallMotionState-&gt;setWorldTransform(initialTransform);\nthis-&gt;fallingBoxBody-&gt;setWorldTransform(initialTransform);*/\nthis-&gt;physicsWorld-&gt;addBody(*fallingBoxBody);\n</code></pre>\n\n<p>Now the interesting parts to me are the necessary offset of <code>btVector3(2,2,2)</code> to align it with my drawn world and this:</p>\n\n<pre><code>btTransform initialTransform;\ninitialTransform.setOrigin(btVector3(0,5,0));\nthis-&gt;fallingStarBody = new btRigidBody(fallingStarBodyCI);\nfallMotionState-&gt;setWorldTransform(initialTransform);\n</code></pre>\n\n<p>If I reenable this part of the code <em>ALL</em> the bodies again show an offset, but <strong>NOT</strong> just 5 up, which I could somehow comprehend if for whatever reason the worldTransform would effect every entity, but about 2,2,2 off... which I cannot grasp at all.</p>\n\n<p>I guess that this line is useless:</p>\n\n<p><code>fallMotionState-&gt;setWorldTransform(initialTransform);</code> as it does not change anything whether it's there or not.</p>\n\n<p>Now to the code of the ground creation:</p>\n\n<pre><code>btCompoundShape *shape = new btCompoundShape();\n\n... just some logic, nothing to do with bullet\n\nbtTransform transform;\ntransform.setIdentity();\n\ntransform.setOrigin(btVector3(x + (this-&gt;x * Ground::width),\n                          y + (this-&gt;y * Ground::height),\n                          z + (this-&gt;z * Ground::depth)));\n\nbtBoxShape *boxShape = new btBoxShape(btVector3(1,0,1)); // flat surface, no box\n\nshape-&gt;addChildShape(transform, boxShape);\n</code></pre>\n\n<p>(this portion just creates a compoundshape for each surface tile :)</p>\n\n<pre><code>btRigidBody::btRigidBodyConstructionInfo info(0, nullptr, shape);\nreturn new btRigidBody(info); \n</code></pre>\n\n<p>Here I purposely set the motionstate to <code>nullptr</code>, but this doesn't change anything.</p>\n\n<p>Now I really am curious... I thought maybe the implementation of <code>btDefaultMotionState</code> is a singleton, but it doesn't look so, so... why the hell is setting the motionState of one body affecting the whole world? </p>\n\n<p><a href=\"https://i.stack.imgur.com/F96RS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/F96RS.png\" alt=\"offset without btVector3(2,2,2) for btDefaultMotionState\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/0YXCH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0YXCH.png\" alt=\"offset with btVector3(2,2,2) for btDefaultMotionState\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/Rimpo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Rimpo.png\" alt=\"The position of my box and it&#39;s body, also an offset\"></a></p>\n"}, {"tags": ["c++", "eclipse"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1482354029, "post_id": 41271211, "comment_id": 69744906, "body": "C++ is a very complicated language, syntax-wise. Only a full C++ compiler can fully parse and understand the syntax of a C++ program.  It is not surprising that UI-oriented development tools will sometimes fail to fully understand even a simple C++ construct, such as typedef. There&#39;s not much that can be done except to wait and hope that the next version of the tool will be a little bit smarter, and figure things out."}], "answers": [{"tags": [], "owner": {"reputation": 1070, "user_id": 6074306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd660b5800c023de3b30c914112f09c3?s=128&d=identicon&r=PG&f=1", "display_name": "n.caillou", "link": "https://stackoverflow.com/users/6074306/n-caillou"}, "is_accepted": false, "score": 0, "last_activity_date": 1497368708, "creation_date": 1497368708, "answer_id": 44526101, "question_id": 41271211, "link": "https://stackoverflow.com/questions/41271211/eclipse-confused-by-gcc-stringstream-typedef/44526101#44526101", "title": "Eclipse confused by GCC stringstream typedef", "body": "<p>I found a somewhat general hack that mostly fixes the problem:</p>\n\n<pre><code>#define stringstream basic_stringstream&lt;char&gt;\n</code></pre>\n\n<p>(through Project Properties > General > Paths and Symbols > Symbols)</p>\n"}], "owner": {"reputation": 1070, "user_id": 6074306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd660b5800c023de3b30c914112f09c3?s=128&d=identicon&r=PG&f=1", "display_name": "n.caillou", "link": "https://stackoverflow.com/users/6074306/n-caillou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 243, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1497368708, "creation_date": 1482351346, "last_edit_date": 1482356535, "question_id": 41271211, "link": "https://stackoverflow.com/questions/41271211/eclipse-confused-by-gcc-stringstream-typedef", "title": "Eclipse confused by GCC stringstream typedef", "body": "<p>My Eclipse indexer annoyingly fails to resolve the target of the stringstream typedef, and sees errors all over the place.</p>\n\n<p>By this I mean that, the indexer will properly annotate a <code>stringstream ss;</code> declaration, but it will complain over any further use of the object (e.g. <code>ss.str()</code>) with something like \"method could not be resolved\".</p>\n\n<p>The following reproduces the behavior: in the menu, File > New > C++ Project > Hello World project, Linux GCC; then replace the contents with</p>\n\n<pre><code>#include &lt;sstream&gt;\nint main() {\n    std::stringstream ss; // fine\n    ss.str(); // \"method str could not be resolved\"\n    std::basic_stringstream&lt;char&gt; ss2;\n    ss2.str(); // fine\n}\n</code></pre>\n\n<p>I have tried various things, rebuilding the index, \"cleaning the project\", restarting Eclipse with <code>eclipse -clean</code>... For my real project I have also tried to delete the project from Eclipse, remove the .project/.cproject files and import it again (as a makefile project).</p>\n\n<p>But to no avail so far, at least for my real project. Strangely enough for the Hello World projects a random combination of the above will sometimes solve the issue (and I may have, at some point, two Hello World projects in my list, one with the error one without it).</p>\n\n<p>Also if I open the <code>iosfwd</code> header (that contains the <code>stringstream</code> declaration/typedef) <code>basic_stringstream</code> token appears white/unannotated unlike other class names (e.g. <code>basic_iostream</code> would appear green as a class name should). This is true regardless whether the project I access the declaration from sees stringstream::str as an error or not.</p>\n\n<p>Versions:Eclipse-CDT 4.5.2/8.8.1, GCC 5.4.0</p>\n\n<p>Any ideas where the problem may come from?</p>\n"}, {"tags": ["c++", "visual-studio-2010", "openssl"], "comments": [{"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1482350452, "post_id": 41270920, "comment_id": 69742987, "body": "you have to build the library yourself either from MSVC or console"}, {"owner": {"reputation": 3440, "user_id": 1226843, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/txrOm.jpg?s=128&g=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/1226843/matthew"}, "reply_to_user": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1482350526, "post_id": 41270920, "comment_id": 69743026, "body": "Is that with the Pearl script that is included in the download of OpenSSL?"}, {"owner": {"reputation": 67949, "user_id": 297696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/782a7a5f79b342bb12dc0aaae3a0c34d?s=128&d=identicon&r=PG", "display_name": "wkl", "link": "https://stackoverflow.com/users/297696/wkl"}, "edited": false, "score": 1, "creation_date": 1482350527, "post_id": 41270920, "comment_id": 69743027, "body": "1. You downloaded the <i>source</i> code, so you will have to compile it yourself. 2. I believe <code>openssl&#47;openssl.conf.h</code> is generated as a result of the build process."}, {"owner": {"reputation": 3440, "user_id": 1226843, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/txrOm.jpg?s=128&g=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/1226843/matthew"}, "edited": false, "score": 0, "creation_date": 1482350558, "post_id": 41270920, "comment_id": 69743045, "body": "How do you go about compiling it on a windows machine? I just downloaded pearl for windows."}, {"owner": {"reputation": 67949, "user_id": 297696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/782a7a5f79b342bb12dc0aaae3a0c34d?s=128&d=identicon&r=PG", "display_name": "wkl", "link": "https://stackoverflow.com/users/297696/wkl"}, "edited": false, "score": 1, "creation_date": 1482350714, "post_id": 41270920, "comment_id": 69743120, "body": "Follow the instructions for Windows outlined in their <a href=\"https://github.com/openssl/openssl/blob/master/INSTALL\" rel=\"nofollow noreferrer\">INSTALL document</a>. It&#39;ll probably come down to something like <code>perl Configure VC-WIN64A</code> then <code>nmake</code> then <code>nmake test</code> then <code>nmake install</code>. Then once you&#39;re all set with that, you&#39;ll have to configure your Visual Studio to include the <code>include</code> folder of your new OpenSSL installation so it can find <code>openssl&#47;openssl.conf.h</code>."}, {"owner": {"reputation": 3440, "user_id": 1226843, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/txrOm.jpg?s=128&g=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/1226843/matthew"}, "edited": false, "score": 0, "creation_date": 1482352958, "post_id": 41270920, "comment_id": 69744346, "body": "I downloaded ActiveState Perl, installed it and when I type in perl to the command line, it doesn&#39;t recognize it as a command"}, {"owner": {"reputation": 3440, "user_id": 1226843, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/txrOm.jpg?s=128&g=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/1226843/matthew"}, "edited": false, "score": 0, "creation_date": 1482352998, "post_id": 41270920, "comment_id": 69744369, "body": "Then when I specify the direct path to perl and try it I get an error <code>stric.pm did not return a true value at Configure line 13</code>"}, {"owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "edited": false, "score": 0, "creation_date": 1482356282, "post_id": 41270920, "comment_id": 69746031, "body": "If you use <code>Mingw</code> with <code>MSYS</code> then you can build with:  <code>.&#47;configure shared threads --prefix=&#47;usr&#47;local mingw</code> to set it to a shared-library (.dll). Then <code>make install</code> to build and install it to <code>&#47;usr&#47;local</code> which will be relative to your mingw installation folder."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1482356443, "post_id": 41270920, "comment_id": 69746111, "body": "<b><i>it doesn&#39;t recognize it as a command</i></b> I think you missed the option to add perl to your path or you did not reboot after the install."}], "answers": [{"tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": false, "score": 4, "last_activity_date": 1482370783, "creation_date": 1482370783, "answer_id": 41274581, "question_id": 41270920, "link": "https://stackoverflow.com/questions/41270920/openssl-on-windows-and-visual-studio-2010/41274581#41274581", "title": "OpenSSL on Windows and Visual Studio 2010", "body": "<blockquote>\n  <p>Why are there no lib folders or dll files?</p>\n</blockquote>\n\n<p>OpenSSL is distributed in source form. You have to build it yourself.</p>\n\n<p>An alternative to building it yourself is to use Thomas Hruska's <a href=\"https://slproweb.com/products/Win32OpenSSL.html\" rel=\"nofollow noreferrer\">Win32 OpenSSL</a>.</p>\n\n<hr>\n\n<blockquote>\n  <p>Why is it trying to include a file that doesn't exist in the original package?</p>\n</blockquote>\n\n<p>OpenSSL's <code>Configure</code> script creates two header files that are tailored for your platform. The first is <code>&lt;openssl/opensslconf.h&gt;</code>, and the second is <code>&lt;openssl/bn.h&gt;</code>. If you have not run configure, then they will not be present.</p>\n"}], "owner": {"reputation": 3440, "user_id": 1226843, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/txrOm.jpg?s=128&g=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/1226843/matthew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4121, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1482370944, "creation_date": 1482350158, "last_edit_date": 1495540471, "question_id": 41270920, "link": "https://stackoverflow.com/questions/41270920/openssl-on-windows-and-visual-studio-2010", "title": "OpenSSL on Windows and Visual Studio 2010", "body": "<p>I want port an OpenSSL based project over to Windows that uses OpenSSL. I have Visual Studio 2010, and I downloaded OpenSSL from <a href=\"https://www.openssl.org/source/\" rel=\"nofollow noreferrer\">their download page</a>.</p>\n\n<p>I am trying to follow the directions from <a href=\"https://stackoverflow.com/questions/11383942/how-to-use-openssl-with-visual-studio\">How to use OpenSSL with Visual Studio</a>, but I am unable to find any library folders (lib) or dlls.</p>\n\n<p>I am also getting the error <em><code>Cannot open include file: 'openssl/openssl.conf.h': No such file or directory</code></em> the file that is attempting to use that is the 'e_os2.h' file.</p>\n\n<ol>\n<li>Why are there no lib folders or dll files?</li>\n<li>Why is it trying to include a file that doesn't exist in the original package?</li>\n</ol>\n"}, {"tags": ["c++", "visual-c++", "visual-studio-2015", "constexpr", "compiler-bug"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1482350648, "post_id": 41270888, "comment_id": 69743084, "body": "You don&#39;t need to use the IDE to <a href=\"https://connect.microsoft.com/visualstudio\" rel=\"nofollow noreferrer\">report a bug</a>."}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1482350759, "post_id": 41270888, "comment_id": 69743148, "body": "While you might have reason, it there any good reason to write such code? To me <code>static</code> and <code>constexpr</code> seems contrary."}, {"owner": {"reputation": 2179, "user_id": 2630666, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/VIN5F.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/2630666/matt"}, "edited": false, "score": 0, "creation_date": 1482351222, "post_id": 41270888, "comment_id": 69743388, "body": "Just curious...if you don&#39;t care enough to report it, why should I?"}, {"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1510259379, "post_id": 41270888, "comment_id": 81371291, "body": "This bug has been reported <a href=\"https://developercommunity.visualstudio.com/content/problem/86829/constexpr-initializing-struct-in-union-only-zero-i.html\" rel=\"nofollow noreferrer\">here</a>."}], "answers": [{"comments": [{"owner": {"reputation": 299, "user_id": 5281260, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/58edbc8bda5996492c8ee373b0e15c27?s=128&d=identicon&r=PG&f=1", "display_name": "FaulerHase", "link": "https://stackoverflow.com/users/5281260/faulerhase"}, "edited": false, "score": 0, "creation_date": 1482389493, "post_id": 41276710, "comment_id": 69756032, "body": "Thank you for your analysis. Please submit the bug."}], "tags": [], "owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "is_accepted": true, "score": 2, "last_activity_date": 1482386752, "creation_date": 1482386752, "answer_id": 41276710, "question_id": 41270888, "link": "https://stackoverflow.com/questions/41270888/msvc-visual-c-silent-incorrect-code-generation-when-constexpr-initializing-str/41276710#41276710", "title": "msvc visual c++ silent incorrect code generation when constexpr initializing struct within union", "body": "<p>I can reproduce this on VS 2015, with both the x86-32 and x86-64 compilers.</p>\n\n<p>I can also confirm that current versions of GCC, Clang, and ICC compile it correctly. Nor can I find anything in the language standard that prohibits what you're doing. The implementation is allowed some leeway in whether it initializes the object at compile-time (as you would expect) or at run-time, but MSVC isn't initializing it at all.</p>\n\n<p>As might be expected, the same problem is observed when the object's declaration is moved to namespace scope, <em>e.g.</em>:</p>\n\n<pre><code>#include &lt;cstdio&gt;\n\nstruct A {\n    union {\n        struct { int a0, a1; } aa;\n        int bb[2];\n    };\n\n    constexpr A(int a0, int a1) : aa{a0, a1} { }\n};\n\nnamespace {\n    constexpr A t3 { 2, 3 };\n};\n\nint main() {\n    std::printf(\"%d %d\\n\", t3.aa.a0, t3.aa.a1);\n}\n</code></pre>\n\n<p>&hellip;as well as if the object is declared as a static member of an otherwise empty struct.</p>\n\n<p>Although the visible effect is a zero-initialization, that does not actually appear to be what the compiler is doing. Rather, it fails to emit a value at all in the corresponding data segment, so when the code attempts to load a value from that address to push onto the stack when making the call to <code>printf</code>, it ends up pushing a zero.</p>\n\n<p>It seems that the <code>union</code> here is key to reproducing the bug. If <code>A</code> contains only the struct <code>aa</code>, then there is no problem. Simply removing <code>bb</code> to leave a one-member union also solves the problem.</p>\n\n<p>Note that you have everything you need here to <a href=\"https://connect.microsoft.com/VisualStudio/Feedback/LoadSubmitFeedbackForm?FormID=6564\" rel=\"nofollow noreferrer\">submit a bug report to Microsoft for the VS 2017 compiler</a> (use of the IDE is not required). The code included in the question is a self-contained example that demonstrates the problem perfectly well. If you really don't want to do it yourself, let me know and I'll submit the bug.</p>\n"}], "owner": {"reputation": 299, "user_id": 5281260, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/58edbc8bda5996492c8ee373b0e15c27?s=128&d=identicon&r=PG&f=1", "display_name": "FaulerHase", "link": "https://stackoverflow.com/users/5281260/faulerhase"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 41276710, "answer_count": 1, "score": 1, "last_activity_date": 1482388069, "creation_date": 1482349993, "last_edit_date": 1482388069, "question_id": 41270888, "link": "https://stackoverflow.com/questions/41270888/msvc-visual-c-silent-incorrect-code-generation-when-constexpr-initializing-str", "title": "msvc visual c++ silent incorrect code generation when constexpr initializing struct within union", "body": "<p>Consider the following snippet trimmed down to illustrate the problem:</p>\n\n<pre><code>#include &lt;cstdio&gt;\n\nstruct A {\n    union {\n        struct { int a0, a1; } aa;\n        int bb[2];\n    };\n#if 1 //bug\n    constexpr A(int a0, int a1) : aa{a0, a1} {}\n#else //OK\n    constexpr A(int a0, int a1) : bb{a0, a1} {}\n#endif\n};\nint main() {\n                     A t0{2, 3}; std::printf(\"%d %d\\n\", t0.aa.a0, t0.aa.a1); //2 3 (OK)\n    static           A t1{2, 3}; std::printf(\"%d %d\\n\", t1.aa.a0, t1.aa.a1); //2 3 (OK)\n           constexpr A t2{2, 3}; std::printf(\"%d %d\\n\", t2.aa.a0, t2.aa.a1); //2 3 (OK)\n    static constexpr A t3{2, 3}; std::printf(\"%d %d\\n\", t3.aa.a0, t3.aa.a1); //0 0 (??)\n}\n</code></pre>\n\n<p>msvc 2015 update 3 and 2017 rc1 <strong>silently generate incorrect code</strong> by zero-initializing t3 instead of properly initializing it with the given values. gcc and clang are fine.</p>\n\n<p>I looked into reporting a bug but it is too much hassle (I don't use the IDE). If you care, please confirm this is a bug, and let it be known to whom it may concern at microsoft.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 7, "creation_date": 1482349228, "post_id": 41270652, "comment_id": 69742352, "body": "How is the compiler supposed to guess that <code>{1.0, 2.0}</code> should be a <code>num</code>?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1482349281, "post_id": 41270652, "comment_id": 69742385, "body": "What type would you expect to be deduced automatically for <code>auto tmp</code>?? Your struct is completely unrelated (not introduced at all)."}, {"owner": {"reputation": 3710, "user_id": 1031311, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Wn8YV.png?s=128&g=1", "display_name": "solti", "link": "https://stackoverflow.com/users/1031311/solti"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1482349425, "post_id": 41270652, "comment_id": 69742447, "body": "@NathanOliver good point :)"}], "answers": [{"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1482349875, "post_id": 41270673, "comment_id": 69742675, "body": "Personally, if naming the types is already a must, I prefer to shorten the line by simply writing <code>std::pair&lt;int,num&gt; temp{1, {1.0, 2.0}};</code>"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 3, "creation_date": 1482350255, "post_id": 41270673, "comment_id": 69742863, "body": "Never specify template arguments when using <code>make_pair</code>, just use the <code>pair</code> constructor in that case"}, {"owner": {"reputation": 3710, "user_id": 1031311, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Wn8YV.png?s=128&g=1", "display_name": "solti", "link": "https://stackoverflow.com/users/1031311/solti"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1482350496, "post_id": 41270673, "comment_id": 69743010, "body": "@Praetorian may I ask why ?"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "reply_to_user": {"reputation": 3710, "user_id": 1031311, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Wn8YV.png?s=128&g=1", "display_name": "solti", "link": "https://stackoverflow.com/users/1031311/solti"}, "edited": false, "score": 3, "creation_date": 1482352492, "post_id": 41270673, "comment_id": 69744100, "body": "@solti For one, it&#39;s less typing. And then there are cases like this where things won&#39;t compile <code>int i = 1; auto tmp = std::make_pair&lt;int,num&gt;(i, {1.0, 2.0});</code> because of how <code>make_pair</code> is defined. Quoting STL - <a href=\"https://www.youtube.com/watch?v=AKtHxKJRwp4\" rel=\"nofollow noreferrer\">Don&#39;t help the compiler</a>"}, {"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1482354056, "post_id": 41270673, "comment_id": 69744924, "body": "@Praetorian Thank you very much for mentioning the video"}, {"owner": {"reputation": 3710, "user_id": 1031311, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Wn8YV.png?s=128&g=1", "display_name": "solti", "link": "https://stackoverflow.com/users/1031311/solti"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1482354974, "post_id": 41270673, "comment_id": 69745418, "body": "@Praetorian thank you for mentioning that because earlier I had encountered exact same problem of not compiling while using make_pair"}], "tags": [], "owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "is_accepted": true, "score": 7, "last_activity_date": 1482354027, "last_edit_date": 1482354027, "creation_date": 1482349204, "answer_id": 41270673, "question_id": 41270652, "link": "https://stackoverflow.com/questions/41270652/how-to-use-make-pair-to-create-pair-of-id-and-struct-object/41270673#41270673", "title": "How to use make_pair to create pair of id and struct (object)?", "body": "<p>No, This is how you should create your pair:</p>\n\n<pre><code>auto tmp = std::make_pair(1, num{1.0, 2.0});\n</code></pre>\n\n<p>Or alternatively (as @StoryTeller mentioned):</p>\n\n<pre><code>std::pair&lt;int,num&gt; tmp {1, {1.0, 2.0}};\n</code></pre>\n\n<p>Now, in both cases, the compiler has a clue that <code>{1.0, 2.0}</code> is meant to be an initializer for the <code>num</code>.</p>\n"}], "owner": {"reputation": 3710, "user_id": 1031311, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Wn8YV.png?s=128&g=1", "display_name": "solti", "link": "https://stackoverflow.com/users/1031311/solti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2649, "favorite_count": 0, "accepted_answer_id": 41270673, "answer_count": 1, "score": 4, "last_activity_date": 1482354027, "creation_date": 1482349105, "question_id": 41270652, "link": "https://stackoverflow.com/questions/41270652/how-to-use-make-pair-to-create-pair-of-id-and-struct-object", "title": "How to use make_pair to create pair of id and struct (object)?", "body": "<p>I was trying to create a pair of id and object like this: </p>\n\n<pre><code> #include &lt;iostream&gt;\n  #include &lt;utility&gt;\n  #include &lt;functional&gt;\n\n  struct num{\n\n      double x;\n      double y;\n\n  };\n\n\n  int main(){\n\n      auto tmp = std::make_pair(1, {1.0, 2.0});\n\n }\n</code></pre>\n\n<p>I get error as <code>error: no matching function for call to 'make_pair(int, &lt;brace-enclosed initializer list&gt;)'\n</code></p>\n\n<p>Is there a proper way to create pair of id and object?</p>\n"}, {"tags": ["c#", "c++", "arduino-uno"], "comments": [{"owner": {"reputation": 1378, "user_id": 2468608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c96587623a8fed8286872dff6eed08?s=128&d=identicon&r=PG", "display_name": "C1sc0", "link": "https://stackoverflow.com/users/2468608/c1sc0"}, "edited": false, "score": 1, "creation_date": 1482349191, "post_id": 41270602, "comment_id": 69742328, "body": "From c# you can communicate with the arduino over Serial(SerialPort) interface."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1482349510, "post_id": 41270602, "comment_id": 69742487, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7327249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72286b14d5864557b34a97abf371ff11?s=128&d=identicon&r=PG&f=1", "display_name": "Alonso Rodriguez", "link": "https://stackoverflow.com/users/7327249/alonso-rodriguez"}, "edited": false, "score": 0, "creation_date": 1482379621, "post_id": 41270748, "comment_id": 69752661, "body": "in the arduino I am using the int incomingByte along with a if invomingByte &gt; 0 then do the program, but I Can do it on the Visual Basic, on the PC, on putty I do the connection on serial COM8 and every time I press a key, the program starts, so it works, but i cant Automatize this thing, at this moment is only manual."}, {"owner": {"reputation": 1510, "user_id": 4794469, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/730d2a41b1bd6833448f23b1b389a9ad?s=128&d=identicon&r=PG", "display_name": "Roberto Correia", "link": "https://stackoverflow.com/users/4794469/roberto-correia"}, "reply_to_user": {"reputation": 13, "user_id": 7327249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72286b14d5864557b34a97abf371ff11?s=128&d=identicon&r=PG&f=1", "display_name": "Alonso Rodriguez", "link": "https://stackoverflow.com/users/7327249/alonso-rodriguez"}, "edited": false, "score": 0, "creation_date": 1482408164, "post_id": 41270748, "comment_id": 69767103, "body": "sorry, but I didn&#39;t understand your question clearly. but I believe this link can help you better: <a href=\"http://www.martyncurrey.com/arduino-and-visual-basic-part-3-controlling-an-arduino/\" rel=\"nofollow noreferrer\">martyncurrey.com/&hellip;</a> (it&#39;s in Visual Basic - i really don&#39;t understand if you wanna control arduino on c# - because of tags - or in VB - because your comment)! Check the full tutorial too to understand better how to comunicate with arduino and pc: <a href=\"http://www.martyncurrey.com/arduino-and-visual-basic-part-1-receiving-data-from-the-arduino/\" rel=\"nofollow noreferrer\">martyncurrey.com/&hellip;</a>"}, {"owner": {"reputation": 13, "user_id": 7327249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72286b14d5864557b34a97abf371ff11?s=128&d=identicon&r=PG&f=1", "display_name": "Alonso Rodriguez", "link": "https://stackoverflow.com/users/7327249/alonso-rodriguez"}, "edited": false, "score": 0, "creation_date": 1484679895, "post_id": 41270748, "comment_id": 70605712, "body": "Ok thanks for that tutorial, what I want to do is to send a byte to the arduino, for example, to test the connection I use Putty, on Serial COM 8, each enter I tap on Putty sends a byte to Arduino and run the program, but instead of using Putty, must be an app made on VB or CMD or something that only doubleclick into it and run, no interfaces, no buttons, just like a .bat."}], "tags": [], "owner": {"reputation": 1510, "user_id": 4794469, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/730d2a41b1bd6833448f23b1b389a9ad?s=128&d=identicon&r=PG", "display_name": "Roberto Correia", "link": "https://stackoverflow.com/users/4794469/roberto-correia"}, "is_accepted": true, "score": 2, "last_activity_date": 1482349432, "creation_date": 1482349432, "answer_id": 41270748, "question_id": 41270602, "link": "https://stackoverflow.com/questions/41270602/arduino-control-by-pc/41270748#41270748", "title": "Arduino Control by PC", "body": "<p>Just use a <code>Serial.read</code> on <code>loop</code> to read a <code>byte</code>, or another type, then, according with the value received, change the <code>outputValue</code>.</p>\n\n<p>See this link for more: <a href=\"https://www.arduino.cc/en/Serial/Read\" rel=\"nofollow noreferrer\">https://www.arduino.cc/en/Serial/Read</a></p>\n"}], "owner": {"reputation": 13, "user_id": 7327249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72286b14d5864557b34a97abf371ff11?s=128&d=identicon&r=PG&f=1", "display_name": "Alonso Rodriguez", "link": "https://stackoverflow.com/users/7327249/alonso-rodriguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 633, "favorite_count": 0, "accepted_answer_id": 41270748, "answer_count": 1, "score": -2, "last_activity_date": 1482349432, "creation_date": 1482348874, "last_edit_date": 1482349222, "question_id": 41270602, "link": "https://stackoverflow.com/questions/41270602/arduino-control-by-pc", "title": "Arduino Control by PC", "body": "<p>I am trying to make a automatization by controlling a 12V motor using an Arduino Uno.</p>\n\n<p>I have this code on the Arduino:</p>\n\n<pre><code>const int transistorPin = 9;  \n\n void setup() {\n\n   pinMode(transistorPin, OUTPUT);\n }\n\n void loop() {\n\n   int sensorValue = analogRead(A0);\n\n   int outputValue = map(sensorValue, 0, 1023, 0, 255);\n\n   analogWrite(transistorPin, outputValue);\n }\n</code></pre>\n\n<p>pretty simple, so with this I can control the Engine speed using a protoboard, a potentiometer, and a additional 12V input directly to the protoboard.</p>\n\n<p>so this physical thing works, but now the issue here is that I cannot create a method in order to control the arduino with the PC.</p>\n\n<p>The idea is that a C# system (already exist, I cant modify it) to run an application, .exe, .bat or anything, and this application must control or tell the Arduino to start working, I dont know, by controlling the Voltage, by changing the USB on and off with a delay, to send a Byte and if the arduino receive it it start with the program, I am open to suggestions and help.</p>\n\n<p>the idea is that this Motor pulls one label and only one, then stops, until this application on the PC runs again and activate the arduino to deliver another label and stops again.</p>\n"}, {"tags": ["c++", "multithreading", "c++11"], "comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1482347924, "post_id": 41270300, "comment_id": 69741586, "body": "If it did compile, your <code>m_read_thread</code> would be a dangling reference after a <code>foo</code> is constructed. Why do you have a <code>thread&amp;</code> member instead of a <code>thread</code>?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1482347925, "post_id": 41270300, "comment_id": 69741587, "body": "Don&#39;t make <code>m_read_thread</code> a reference."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1482350565, "post_id": 41270300, "comment_id": 69743049, "body": "This isn&#39;t the problem, but <code>volatile sig_atomic_t</code> is crufty old C for coordinating between the main program and a signal handler. Use <code>std::atomic&lt;bool&gt;</code> instead."}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 3, "last_activity_date": 1482347932, "creation_date": 1482347932, "answer_id": 41270355, "question_id": 41270300, "link": "https://stackoverflow.com/questions/41270300/run-member-function-in-separate-thread/41270355#41270355", "title": "Run Member Function in Separate thread", "body": "<p><code>foo::foo():m_read_thread(std::thread(&amp;foo::read_thread, this))</code> is not going to work as <code>std::thread(&amp;foo::read_thread, this)</code> is a temporary value and a temporary cannot be bound to a non const lvalue reference.</p>\n\n<p>That said there is no reason to make the thread member a reference.  You can simple have a <code>std::thread</code> member like <code>std::thread m_read_thread;</code> and then in the constructor you would initialize it like </p>\n\n<pre><code>foo::foo() : m_read_thread(std::thread(&amp;foo::read_thread, this))\n</code></pre>\n"}], "owner": {"reputation": 440, "user_id": 2748602, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/05f39f57bb773af68e0b44c44dab98d2?s=128&d=identicon&r=PG", "display_name": "schr&#246;dinbug", "link": "https://stackoverflow.com/users/2748602/schr%c3%b6dinbug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 726, "favorite_count": 0, "accepted_answer_id": 41270355, "answer_count": 1, "score": 0, "last_activity_date": 1482347932, "creation_date": 1482347713, "last_edit_date": 1495540418, "question_id": 41270300, "link": "https://stackoverflow.com/questions/41270300/run-member-function-in-separate-thread", "title": "Run Member Function in Separate thread", "body": "<p>I am trying to run a member function in its own thread and have followed <a href=\"https://stackoverflow.com/questions/10998780/stdthread-calling-method-of-class\">this post</a>, however in that example, the thread starts and finishes in the same function.  How do you maintain a reference to the thread to join in a separate member function (say the destructor)?  I have tried this:</p>\n\n<pre><code>class foo\n{\n    foo();\n    ~foo();\n    volatile sig_atomic_t m_run_thread = true;\n    std::thread &amp;m_read_thread;\n    void read_thread();\n\n}\n\nfoo::foo():m_read_thread(std::thread(&amp;foo::read_thread, this))\n{\n}\n\nfoo::~foo()\n{\n     m_run_thread = false;\n     m_read_thread.join();\n}\n\nvoid foo::read_thread()\n{\n    while(m_run_thread)\n    {\n    //do something cool\n    }\n}\n\nint main()\n{\n   foo bar;\n   //do other stuff\n}\n</code></pre>\n\n<p>The compiler gives me an error though: error: invalid initialization of non-const reference of type \u2018std::thread&amp;\u2019 from an rvalue of type \u2018std::thread\u2019.  This is caused because I'm trying to bind a temporary to a reference. What's this best way to fix this?</p>\n"}, {"tags": ["c++", "mfc"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 5, "creation_date": 1482351532, "post_id": 41270159, "comment_id": 69743555, "body": "If you only need to know, when the mouse leaves your window, you can use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms645615.aspx\" rel=\"nofollow noreferrer\">WM_MOUSELEAVE</a>. If you need to continuously monitor mouse movement outside your window, you&#39;ll have to go with <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms646262.aspx\" rel=\"nofollow noreferrer\">SetCapture</a> instead."}, {"owner": {"reputation": 657, "user_id": 4016002, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Banana Code", "link": "https://stackoverflow.com/users/4016002/banana-code"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1482357996, "post_id": 41270159, "comment_id": 69746840, "body": "Is it possible to get the point coordinates of mouse when the mouse is outside the window?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1482358358, "post_id": 41270159, "comment_id": 69747004, "body": "If you&#39;ve set up a mouse capture, you continue to receive <code>WM_MOUSEMOVE</code> messages, even when the mouse cursor is outside your window. If you need to query the cursor position at a certain time, you can call <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms648390.aspx\" rel=\"nofollow noreferrer\">GetCursorPos</a>. And if you happen to be in a message handler, I believe you can call <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms644938.aspx\" rel=\"nofollow noreferrer\">GetMessagePos</a> to retrieve the cursor position  at the time the message was generated. It largely depends on what you are trying to accomplish."}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1482438024, "post_id": 41286252, "comment_id": 69784666, "body": "Like all approaches based on sampling, it doesn&#39;t account for events that happen in between the sampling points. If the mouse leaves the window, but enters it before you query for the next sample, you have missed the equivalent of a <code>WM_MOUSELEAVE</code> message. This doesn&#39;t happen with <code>TrackMouseEvent</code>. I don&#39;t know if this is important to the OP, but without knowing, this answer is to be taken with a grain of salt."}], "tags": [], "owner": {"reputation": 2670, "user_id": 346104, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/31duc.jpg?s=128&g=1", "display_name": "franji1", "link": "https://stackoverflow.com/users/346104/franji1"}, "is_accepted": false, "score": 0, "last_activity_date": 1482419606, "creation_date": 1482419606, "answer_id": 41286252, "question_id": 41270159, "link": "https://stackoverflow.com/questions/41270159/how-to-detect-when-the-mouse-is-moving-outside-the-window/41286252#41286252", "title": "How to detect when the mouse is moving outside the window?", "body": "<p>All I did was set up a 100ms timer that calls <code>GetCursorPos()</code>.  You can tweak that timer value to make it higher resolution if needed, but for my specific UI need, 100ms was good enough - it dumped (x,y) coordinates to a status bar.</p>\n"}], "owner": {"reputation": 657, "user_id": 4016002, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Banana Code", "link": "https://stackoverflow.com/users/4016002/banana-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1626, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1482419606, "creation_date": 1482347193, "question_id": 41270159, "link": "https://stackoverflow.com/questions/41270159/how-to-detect-when-the-mouse-is-moving-outside-the-window", "title": "How to detect when the mouse is moving outside the window?", "body": "<p>I'd like to detect the mouse move event when it's moving outside the window by using MFC. I have used <code>OnNcMouseMove()</code> but it only detects the mouse move event when it's moving to the non-client area, not outside the window. So how can I do to detect while the mouse is moving outside the window?</p>\n"}, {"tags": ["c++", "qt", "enums", "translation"], "comments": [{"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1482352186, "post_id": 41270143, "comment_id": 69743906, "body": "I initially wanted to write a reply but I myself read about it from: <a href=\"http://kalebpederson.com/index.php/2010/07/qmetaenum-magic-serializing-c-enums\" rel=\"nofollow noreferrer\">kalebpederson.com/index.php/2010/07/&hellip;</a>"}, {"owner": {"reputation": 58, "user_id": 3204770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0edd9bc6cefa2a2ec7434b437f135eea?s=128&d=identicon&r=PG&f=1", "display_name": "mcsqrd", "link": "https://stackoverflow.com/users/3204770/mcsqrd"}, "reply_to_user": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1482354114, "post_id": 41270143, "comment_id": 69744960, "body": "This just seems to describe how to use QMetaEnum to get the key values as string.  I believe this is what I am already doing.  What I really need I guess is for those enum strings to be picked-up by lupdate so that they can be translated.  Maybe I will revise my question to make this clearer."}], "answers": [{"comments": [{"owner": {"reputation": 58, "user_id": 3204770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0edd9bc6cefa2a2ec7434b437f135eea?s=128&d=identicon&r=PG&f=1", "display_name": "mcsqrd", "link": "https://stackoverflow.com/users/3204770/mcsqrd"}, "edited": false, "score": 0, "creation_date": 1482506901, "post_id": 41272268, "comment_id": 69810397, "body": "If I have 700 options in the form of various enums, I should write this type of switch for all of them"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 58, "user_id": 3204770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0edd9bc6cefa2a2ec7434b437f135eea?s=128&d=identicon&r=PG&f=1", "display_name": "mcsqrd", "link": "https://stackoverflow.com/users/3204770/mcsqrd"}, "edited": false, "score": 0, "creation_date": 1482509326, "post_id": 41272268, "comment_id": 69811561, "body": "Yes, you should, because <b>all of them</b> are user facing strings. C++ identifiers are not really something that makes sense to users. There&#39;s no way to punctuate them properly, etc. You pretty much messed up in your design by depending on user-visible identifiers. You have to fix the mess you&#39;ve found yourself in. Perhaps all of this will make you realize <i>how much work you&#39;ve made yourself do</i>. You have 700 translatable strings. Are you sure your configuration system is not a bit overboard?"}, {"owner": {"reputation": 58, "user_id": 3204770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0edd9bc6cefa2a2ec7434b437f135eea?s=128&d=identicon&r=PG&f=1", "display_name": "mcsqrd", "link": "https://stackoverflow.com/users/3204770/mcsqrd"}, "edited": false, "score": 0, "creation_date": 1482509919, "post_id": 41272268, "comment_id": 69811857, "body": "I don&#39;t actually have 700 options, I picked a number.  How would one correct this design that I messed up?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 58, "user_id": 3204770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0edd9bc6cefa2a2ec7434b437f135eea?s=128&d=identicon&r=PG&f=1", "display_name": "mcsqrd", "link": "https://stackoverflow.com/users/3204770/mcsqrd"}, "edited": false, "score": 0, "creation_date": 1482514159, "post_id": 41272268, "comment_id": 69813838, "body": "By doing what I show in the answer instead of what you do in the question :)"}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1482356100, "creation_date": 1482356100, "answer_id": 41272268, "question_id": 41270143, "link": "https://stackoverflow.com/questions/41270143/translate-string-representation-of-enum-values-qt/41272268#41272268", "title": "Translate String Representation of Enum Values Qt", "body": "<p>An enum identifier shouldn't be user-visible to begin with. These are identifiers that should be meaningful to the developer, not to the user. Exposing them directly to the user adds a strong coupling between the internal design of the code and user-visible behavior. That is best avoided.</p>\n\n<p>You need to map between enum values and user-visible strings. The values in the map should be subject to translation, and the map should be re-populated upon retranslation. E.g.:</p>\n\n<pre><code>class Object : public QObject\n{\n    Q_OBJECT\n    Q_ENUMS(Configuration);\n    Q_PROPERTY(Configuration READ Configuration WRITE SetConfiguration);\n\n    enum Configuration {\n        Config_Blue, Config_Green, Config_Invisible, Config_Backwards\n    };\npublic:\n    static QString toString(Configuration c) {\n      switch (c) {\n      case Config_Blue: return tr(\"Blue\", \"Configuration\");\n      case Config_Green: return tr(\"Green\", \"Configuration\");\n      case Config_Invisible: return tr(\"Invisible\", \"Configuration\");\n      case Config_Backwards: return tr(\"Backwards\", \"Configuration\");\n      }\n    }\n};\n</code></pre>\n\n<p>You can now translate the configuration values.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 4303645, "user_type": "registered", "profile_image": "https://graph.facebook.com/1600458231/picture?type=large", "display_name": "Aleskandro", "link": "https://stackoverflow.com/users/4303645/aleskandro"}, "is_accepted": false, "score": 1, "last_activity_date": 1580939948, "creation_date": 1580939948, "answer_id": 60084731, "question_id": 41270143, "link": "https://stackoverflow.com/questions/41270143/translate-string-representation-of-enum-values-qt/60084731#60084731", "title": "Translate String Representation of Enum Values Qt", "body": "<p>I'm using a dedicated function within the class in which I define my enum. Is it helpful? (Qt5.13).</p>\n\n<p>I call it like MyClass::toTrString(myEnumVal);</p>\n\n<pre><code>class MyClass : public QObject\n{\n    Q_OBJECT\npublic:\n    explicit MyClass(QObject *parent = nullptr);\n    enum MyEnum {\n            myKey1,\n            myKey2,\n            ...\n    };\n    Q_ENUM(MyEnum)\n    static QString toTrString(MyEnum t) {\n        return tr(qPrintable(QVariant::fromValue(t).toString()));\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 58, "user_id": 3204770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0edd9bc6cefa2a2ec7434b437f135eea?s=128&d=identicon&r=PG&f=1", "display_name": "mcsqrd", "link": "https://stackoverflow.com/users/3204770/mcsqrd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2254, "favorite_count": 2, "accepted_answer_id": 41272268, "answer_count": 2, "score": 1, "last_activity_date": 1580939948, "creation_date": 1482347136, "last_edit_date": 1482354305, "question_id": 41270143, "link": "https://stackoverflow.com/questions/41270143/translate-string-representation-of-enum-values-qt", "title": "Translate String Representation of Enum Values Qt", "body": "<p>Is it possible to translate the string representation of an <code>enum</code> (i.e. via <code>QMetaEnum</code>) using Qt's translation system?</p>\n\n<p>What I think I need is for some way to get <code>lupdate</code> to pick up the enum strings for translation, either by emitting some QT_TR_NOOP() code if and only if the file is being processed by lupdate, or by modifying the behavior of <code>lupdate</code>/<code>moc</code> themselves.</p>\n\n<p>For example, my application presents \"settings\" options to users via a dialog box.  All of the settings are defined as <code>Q_PROPERTY</code> 's.  Options which use an <code>enum</code> are presented as a combo box and the text options for the combo box use the <code>QMetaEnum::key()</code> as the displayed text.  Below is some pseudo-code to get the point across.</p>\n\n<p>Widgets will have some <code>enum</code> property defined like:</p>\n\n<pre><code>class SomeWidget : public QWidget\n{\n    Q_OBJECT\n    Q_ENUMS( Configuration );\n\n    enum Configuration\n    {\n        Config_Blue = 0,\n        Config_Green,\n        Config_Invisible,\n        Config_Backwards\n    };\n\n    Q_PROPERTY( Configuration READ Configuration WRITE SetConfiguration );\n};\n</code></pre>\n\n<p>The combo widget creation is done by a separate settings manager and goes something like this:</p>\n\n<pre><code>QWidget* SettingsItem::CreateWidget()\n{\n    const QMetaObject* pMetaObj = this-&gt;m_pWidget-&gt;metaObject();\n    const QMetaProperty&amp; rcProp = pMetaObj-&gt;property( this-&gt;m_iProp );\n\n    QMetaEnum cEnum = rcProp.enumerator();\n    if( cEnum.isValid() )\n    {\n        QComboBox* pRetWidget = new QComboBox;\n        for( int i = 0; i &lt; cEnum.keyCount(); ++i )\n        {\n            int iVal = cEnum.value( i );\n            QString strKey = cEnum.key( i );  // Translate here?\n            pRetWidget-&gt;addItem( strKey, iVal );\n        }\n    } \n\n    ...\n    return pRetWidget;\n}\n</code></pre>\n\n<p>The combo box in the settings dialog shows \"Config_Blue\", \"Config_Green\", etc.  I would like it to just say \"Blue\", \"Green\", etc. in whatever the current language is.  </p>\n\n<p>For the rest of the code we use Qt's translation system and the <code>linguist</code> utility which works really nice.  I was hoping that I could enable this type of translation for the <code>enum</code> 's as well without having to add string literals and <code>tr()</code> 's into the code manually.  Basically all of the information that a translator would need is already there in the code, I just need <code>linguist</code> to be able to identify these enum values as translatable.  I can then invoke <code>tr()</code> when the combo box is populated.</p>\n\n<p>What I think I need is for some way to get <code>lupdate</code> to pick up the enum strings for translation, either by emitting some QT_TR_NOOP() code if and only if the file is being processed by lupdate, or by modifying the behavior of <code>lupdate</code>/<code>moc</code> themselves.</p>\n\n<p>I was thinking maybe a macro would work, might not be possible though.  Perhaps modifying some Qt code is necessary?</p>\n"}, {"tags": ["c++", "visual-studio", "opencv", "visual-c++", "path"], "comments": [{"owner": {"reputation": 1858, "user_id": 3033937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bdea99d565da4f5e344332fd6e99796?s=128&d=identicon&r=PG", "display_name": "Morris Franken", "link": "https://stackoverflow.com/users/3033937/morris-franken"}, "edited": false, "score": 1, "creation_date": 1482349252, "post_id": 41270069, "comment_id": 69742368, "body": "What are the settings for your Debug build? Because the screenshots show settings for the Release build, while you are compiling for Debug"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1482351769, "post_id": 41270069, "comment_id": 69743664, "body": "According to the screenshots, the IDE is in Debug | x64 mode, whereas you have configured Release | Win32 mode. You have to configure each of these build environments separately using the drop-down combo boxes at the top of the Project Properties window. It is, unfortunately, not intuitive."}, {"owner": {"reputation": 2174, "user_id": 5876041, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-CBOOazSg3-c/AAAAAAAAAAI/AAAAAAAAAao/6MQIFAQGtGY/photo.jpg?sz=128", "display_name": "Saransh Kejriwal", "link": "https://stackoverflow.com/users/5876041/saransh-kejriwal"}, "edited": false, "score": 0, "creation_date": 1482378791, "post_id": 41270069, "comment_id": 69752470, "body": "Have you added the Library dependencies where you manually point to the location of the opencv /bin/include folder ??"}], "owner": {"reputation": 23680, "user_id": 2414957, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/0MuAW.jpg?s=128&g=1", "display_name": "Mona Jalal", "link": "https://stackoverflow.com/users/2414957/mona-jalal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2999, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1482348866, "creation_date": 1482346797, "last_edit_date": 1482348866, "question_id": 41270069, "link": "https://stackoverflow.com/questions/41270069/opencv2-core-core-hpp-no-such-file-or-directory", "title": "opencv2/core/core.hpp&#39;: No such file or directory", "body": "<p>I followed this video tutorial for installing OpenCV for Visual C++ in Visual Studio 2015 (14) under Windows 10. <a href=\"https://www.youtube.com/watch?v=7SM5OD2pZKY\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=7SM5OD2pZKY</a>\nHowever I get this error:</p>\n\n<pre><code>Severity    Code    Description Project File    Line    Category    Source  Suppression State   Tool\nError   C1083   Cannot open include file: 'opencv2/core/core.hpp': No such file or directory    CannyStill1 c:\\users\\mona\\documents\\visual studio 2015\\projects\\cannystill1\\cannystill1\\cannystill1.cpp 3   fatal   Build   \n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/lkZhv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lkZhv.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/CU6q2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CU6q2.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/Halhh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Halhh.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/GjVuW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GjVuW.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/hiJb5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hiJb5.png\" alt=\"enter image description here\"></a>\nPlease suggest solution.</p>\n"}, {"tags": ["c++", "c++11", "templates"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1482346642, "post_id": 41269998, "comment_id": 69740899, "body": "Look into variadic templates."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6093593, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2a94a0d4c022c7db1991439011723a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Elh48", "link": "https://stackoverflow.com/users/6093593/elh48"}, "edited": false, "score": 0, "creation_date": 1482347242, "post_id": 41270149, "comment_id": 69741206, "body": "what is (typename... Params)??? (what is (...))? means every param ? system detect it as every param?"}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "reply_to_user": {"reputation": 33, "user_id": 6093593, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2a94a0d4c022c7db1991439011723a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Elh48", "link": "https://stackoverflow.com/users/6093593/elh48"}, "edited": false, "score": 0, "creation_date": 1482347332, "post_id": 41270149, "comment_id": 69741260, "body": "@Elh48 It&#39;s all about variadic templates. Here is a good starting point: <a href=\"http://eli.thegreenplace.net/2014/variadic-templates-in-c/\" rel=\"nofollow noreferrer\">eli.thegreenplace.net/2014/variadic-templates-in-c</a>"}], "tags": [], "owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "is_accepted": true, "score": 2, "last_activity_date": 1482347510, "last_edit_date": 1482347510, "creation_date": 1482347152, "answer_id": 41270149, "question_id": 41269998, "link": "https://stackoverflow.com/questions/41269998/create-template-function-to-call-other-functions-with-that-functions-parameters/41270149#41270149", "title": "Create template function to call other functions with that functions parameters", "body": "<p>I suggest using <em>variadic templates</em>:</p>\n\n<pre><code>template&lt;typename Func, typename... Params&gt;\nvoid function_caller(Func func, Params&amp;&amp;... params) {\n    func(std::forward&lt;Params&gt;(params)...);\n}\n</code></pre>\n\n<p>Short example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;utility&gt;\n\ntemplate&lt;typename Func, typename... Params&gt;\nvoid function_caller(Func func, Params&amp;&amp;... params) {\n    func(std::forward&lt;Params&gt;(params)...);\n}\n\nvoid foo(int x, int y) {\n    std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; std::endl;\n}\n\nvoid bar(int x, int y, int z) {\n    std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; std::endl;\n}\n\nint main() {\n    function_caller(foo, 5, 6);\n    function_caller(bar, 5, 6, 9);\n\n    return 0;\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>void foo(int, int)\nvoid bar(int, int, int)\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6093593, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2a94a0d4c022c7db1991439011723a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Elh48", "link": "https://stackoverflow.com/users/6093593/elh48"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 1, "accepted_answer_id": 41270149, "answer_count": 1, "score": 1, "last_activity_date": 1482351650, "creation_date": 1482346561, "last_edit_date": 1482351650, "question_id": 41269998, "link": "https://stackoverflow.com/questions/41269998/create-template-function-to-call-other-functions-with-that-functions-parameters", "title": "Create template function to call other functions with that functions parameters", "body": "<p>I want to create a function like <code>thread()</code> function (get N parameters). I think I have to use a template like this:</p>\n\n<pre><code>template &lt;typename Func, typename Param1, ...&gt;\nvoid function(params)\n{\n\n}\n</code></pre>\n\n<p>But for my function, I have to set a limited number of parameters. In the <code>thread()</code> function you can give this function N parameters. How is it possible to create a function and give the parameters same inside function params?</p>\n\n<pre><code>template &lt;typename Func, typename Param1, typename Param2, typename Param3 = typename()&gt;\n    void Remote_function_caller(Func Function_name, Param1 P1, Param2 P2, Param3 P3 = Param3())\n{\nFunction_name(P1, P2, P3);\n}\n\nvoid Tool1(int Data1, int Data2)\n{\n\n}\n\nvoid Tool2(int Data1, int Data2, int Data3)\n{\n\n}\n\nvoid main()\n{\n      // Call tool 1\n      Remote_function_caller(Tool1, 5, 6);\n\n      // Call tool 2\n      Remote_function_caller(Tool2, 5, 6, 9);\n}\n</code></pre>\n\n<p>To call <code>Tool1</code> I have to enter 2 parameters but system gives an error because caller needs 3 parameters (and load that function with 3 parameters)...</p>\n"}, {"tags": ["c++", "qt", "visual-studio-2015", "qt5", "qgis"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1482346357, "post_id": 41269858, "comment_id": 69740742, "body": "<b><i>#define CORE_EXPORT __declspec(dllexport)</i></b> Is not the correct thing to do. Your application is not a dll and you probably are not implementing the dll."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1482346462, "post_id": 41269858, "comment_id": 69740802, "body": "Possibly you wanted <code>#define CORE_EXPORT __declspec(dllimport)</code> instead."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1482346600, "post_id": 41269858, "comment_id": 69740876, "body": "Never <code>#include &lt;QtModule&#47;QClass&gt;</code>. Instead, <code>#include &lt;QClass&gt;</code>. If the compiler can&#39;t find the header file, your project is misconfigured - remove the build folder and try again."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1482417926, "post_id": 41269858, "comment_id": 69773210, "body": "Isn&#39;t there a header that defines <code>CORE_EXPORT</code>? You are defining it here for main() but not for qgsapplication."}], "owner": {"reputation": 11, "user_id": 4569769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5f9528ced8d94490d0945898dfa0f55?s=128&d=identicon&r=PG&f=1", "display_name": "Pepe Mejide", "link": "https://stackoverflow.com/users/4569769/pepe-mejide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1482399186, "creation_date": 1482346003, "last_edit_date": 1482399186, "question_id": 41269858, "link": "https://stackoverflow.com/questions/41269858/qgis-error-lnk2019-using-qapplication", "title": "QGIS: Error LNK2019 using QApplication", "body": "<p>I'm trying to create a project using the QGIS class \"QApplication\" but it seems to fail due to an error I can\u00b4t understand.</p>\n\n<p>I'm using <a href=\"https://github.com/chenguanzhou/QGIS-Windows-Build-Qt5-VS2015-x64\" rel=\"nofollow noreferrer\">this build version of QGIS made for QT5.7, VS2015, W10 x64</a> and my main.cpp just containts the following lines:</p>\n\n<pre><code>#define CORE_EXPORT __declspec(dllexport)    \n\n#include \"QGisTest.h\"\n#include &lt;QtWidgets/QApplication&gt;    \n\n#include &lt;qgsapplication.h&gt;\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    QGisTest w;\n    w.show();\n    return a.exec();\n}\n</code></pre>\n\n<p>And when I try to build it, these errors show up:</p>\n\n<pre><code>1&gt;------ Build started: Project: QGisTest, Configuration: Release x64 ------\n1&gt;  moc_qgsapplication.cpp\n1&gt;     Creating library C:\\Users\\GRODRIGUEZ\\Documents\\Visual Studio 2015\\Projects\\QGisTest\\x64\\Release\\QGisTest.lib and object C:\\Users\\GRODRIGUEZ\\Documents\\Visual Studio 2015\\Projects\\QGisTest\\x64\\Release\\QGisTest.exp\n1&gt;moc_qgsapplication.obj : error LNK2019: unresolved external symbol \"private: static class QMap&lt;class QString,class QString&gt; QgsApplication::mSystemEnvVars21800\" (?mSystemEnvVars21800@QgsApplication@@0V?$QMap@VQString@@V1@@@A) referenced in function \"public: static class QMap&lt;class QString,class QString&gt; __cdecl QgsApplication::systemEnvVars(void)\" (?systemEnvVars@QgsApplication@@SA?AV?$QMap@VQString@@V1@@@XZ)\n1&gt;main.obj : error LNK2001: unresolved external symbol \"private: static class QMap&lt;class QString,class QString&gt; QgsApplication::mSystemEnvVars21800\" (?mSystemEnvVars21800@QgsApplication@@0V?$QMap@VQString@@V1@@@A)\n1&gt;moc_qgsapplication.obj : error LNK2019: unresolved external symbol \"private: static bool QgsApplication::mRunningFromBuildDir21800\" (?mRunningFromBuildDir21800@QgsApplication@@0_NA) referenced in function \"public: static bool __cdecl QgsApplication::isRunningFromBuildDir(void)\" (?isRunningFromBuildDir@QgsApplication@@SA_NXZ)\n1&gt;main.obj : error LNK2001: unresolved external symbol \"private: static bool QgsApplication::mRunningFromBuildDir21800\" (?mRunningFromBuildDir21800@QgsApplication@@0_NA)\n1&gt;moc_qgsapplication.obj : error LNK2019: unresolved external symbol \"private: static class QString QgsApplication::mBuildSourcePath21800\" (?mBuildSourcePath21800@QgsApplication@@0VQString@@A) referenced in function \"public: static class QString __cdecl QgsApplication::buildSourcePath(void)\" (?buildSourcePath@QgsApplication@@SA?AVQString@@XZ)\n1&gt;main.obj : error LNK2001: unresolved external symbol \"private: static class QString QgsApplication::mBuildSourcePath21800\" (?mBuildSourcePath21800@QgsApplication@@0VQString@@A)\n1&gt;moc_qgsapplication.obj : error LNK2019: unresolved external symbol \"private: static class QString QgsApplication::mCfgIntDir21800\" (?mCfgIntDir21800@QgsApplication@@0VQString@@A) referenced in function \"public: static class QString __cdecl QgsApplication::cfgIntDir(void)\" (?cfgIntDir@QgsApplication@@SA?AVQString@@XZ)\n1&gt;main.obj : error LNK2001: unresolved external symbol \"private: static class QString QgsApplication::mCfgIntDir21800\" (?mCfgIntDir21800@QgsApplication@@0VQString@@A)\n1&gt;moc_qgsapplication.obj : error LNK2019: unresolved external symbol \"private: static class QString QgsApplication::mBuildOutputPath21800\" (?mBuildOutputPath21800@QgsApplication@@0VQString@@A) referenced in function \"public: static class QString __cdecl QgsApplication::buildOutputPath(void)\" (?buildOutputPath@QgsApplication@@SA?AVQString@@XZ)\n1&gt;main.obj : error LNK2001: unresolved external symbol \"private: static class QString QgsApplication::mBuildOutputPath21800\" (?mBuildOutputPath21800@QgsApplication@@0VQString@@A)\n1&gt;moc_qgsapplication.obj : error LNK2019: unresolved external symbol \"private: static class QStringList QgsApplication::mGdalSkipList21800\" (?mGdalSkipList21800@QgsApplication@@0VQStringList@@A) referenced in function \"public: static class QStringList __cdecl QgsApplication::skippedGdalDrivers(void)\" (?skippedGdalDrivers@QgsApplication@@SA?AVQStringList@@XZ)\n1&gt;main.obj : error LNK2001: unresolved external symbol \"private: static class QStringList QgsApplication::mGdalSkipList21800\" (?mGdalSkipList21800@QgsApplication@@0VQStringList@@A)\n1&gt;moc_qgsapplication.obj : error LNK2019: unresolved external symbol \"private: static int QgsApplication::mMaxThreads21800\" (?mMaxThreads21800@QgsApplication@@0HA) referenced in function \"public: static int __cdecl QgsApplication::maxThreads(void)\" (?maxThreads@QgsApplication@@SAHXZ)\n1&gt;main.obj : error LNK2001: unresolved external symbol \"private: static int QgsApplication::mMaxThreads21800\" (?mMaxThreads21800@QgsApplication@@0HA)\n1&gt;C:\\Users\\GRODRIGUEZ\\Documents\\Visual Studio 2015\\Projects\\QGisTest\\x64\\Release\\\\QGisTest.exe : fatal error LNK1120: 7 unresolved externals\n========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========\n</code></pre>\n\n<p>I also added to the project <a href=\"https://github.com/chenguanzhou/QGIS-Windows-Build-Qt5-VS2015-x64/issues/1#issuecomment-267042499\" rel=\"nofollow noreferrer\">this \"moc_qgsapplication.cpp</a>\" and wrote the line:</p>\n\n<pre><code>#define CORE_EXPORT __declspec(dllexport)\n</code></pre>\n\n<p>to avoid other compilation problems and linked to the project the QGIS and QT 5.7 libs.</p>\n\n<p>Any idea how to fix it?</p>\n\n<p><strong>EDIT:</strong> </p>\n\n<p>I have changed the two lines of main.cpp as suggested and now contains the following code:</p>\n\n<pre><code>#define CORE_EXPORT __declspec(dllimport)\n\n\n#include \"QGisTest.h\"\n#include &lt;QApplication&gt;\n\n\n#include &lt;qgsapplication.h&gt;\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    QGisTest w;\n    w.show();\n    return a.exec();\n}\n</code></pre>\n\n<p>but when I try to build it, these erros still show up:</p>\n\n<pre><code>1&gt;------ Build started: Project: QGisTest, Configuration: Release x64 ------\n1&gt;  moc_qgsapplication.cpp\n1&gt;  main.cpp\n1&gt;  Generating Code...\n1&gt;     Creating library C:\\Users\\GRODRIGUEZ\\Documents\\Visual Studio 2015\\Projects\\QGisTest\\x64\\Release\\QGisTest.lib and object C:\\Users\\GRODRIGUEZ\\Documents\\Visual Studio 2015\\Projects\\QGisTest\\x64\\Release\\QGisTest.exp\n1&gt;moc_qgsapplication.obj : error LNK2019: unresolved external symbol \"private: static class QMap&lt;class QString,class QString&gt; QgsApplication::mSystemEnvVars21800\" (?mSystemEnvVars21800@QgsApplication@@0V?$QMap@VQString@@V1@@@A) referenced in function \"public: static class QMap&lt;class QString,class QString&gt; __cdecl QgsApplication::systemEnvVars(void)\" (?systemEnvVars@QgsApplication@@SA?AV?$QMap@VQString@@V1@@@XZ)\n1&gt;moc_qgsapplication.obj : error LNK2019: unresolved external symbol \"private: static bool QgsApplication::mRunningFromBuildDir21800\" (?mRunningFromBuildDir21800@QgsApplication@@0_NA) referenced in function \"public: static bool __cdecl QgsApplication::isRunningFromBuildDir(void)\" (?isRunningFromBuildDir@QgsApplication@@SA_NXZ)\n1&gt;moc_qgsapplication.obj : error LNK2019: unresolved external symbol \"private: static class QString QgsApplication::mBuildSourcePath21800\" (?mBuildSourcePath21800@QgsApplication@@0VQString@@A) referenced in function \"public: static class QString __cdecl QgsApplication::buildSourcePath(void)\" (?buildSourcePath@QgsApplication@@SA?AVQString@@XZ)\n1&gt;moc_qgsapplication.obj : error LNK2019: unresolved external symbol \"private: static class QString QgsApplication::mCfgIntDir21800\" (?mCfgIntDir21800@QgsApplication@@0VQString@@A) referenced in function \"public: static class QString __cdecl QgsApplication::cfgIntDir(void)\" (?cfgIntDir@QgsApplication@@SA?AVQString@@XZ)\n1&gt;moc_qgsapplication.obj : error LNK2019: unresolved external symbol \"private: static class QString QgsApplication::mBuildOutputPath21800\" (?mBuildOutputPath21800@QgsApplication@@0VQString@@A) referenced in function \"public: static class QString __cdecl QgsApplication::buildOutputPath(void)\" (?buildOutputPath@QgsApplication@@SA?AVQString@@XZ)\n1&gt;moc_qgsapplication.obj : error LNK2019: unresolved external symbol \"private: static class QStringList QgsApplication::mGdalSkipList21800\" (?mGdalSkipList21800@QgsApplication@@0VQStringList@@A) referenced in function \"public: static class QStringList __cdecl QgsApplication::skippedGdalDrivers(void)\" (?skippedGdalDrivers@QgsApplication@@SA?AVQStringList@@XZ)\n1&gt;moc_qgsapplication.obj : error LNK2019: unresolved external symbol \"private: static int QgsApplication::mMaxThreads21800\" (?mMaxThreads21800@QgsApplication@@0HA) referenced in function \"public: static int __cdecl QgsApplication::maxThreads(void)\" (?maxThreads@QgsApplication@@SAHXZ)\n1&gt;C:\\Users\\GRODRIGUEZ\\Documents\\Visual Studio 2015\\Projects\\QGisTest\\x64\\Release\\\\QGisTest.exe : fatal error LNK1120: 7 unresolved externals\n========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========\n</code></pre>\n"}, {"tags": ["c++", "opengl", "textures"], "comments": [{"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 1, "creation_date": 1482348150, "post_id": 41269788, "comment_id": 69741728, "body": "<code>glEnable(GL_TEXTURE_GEN_*)</code>?  Specially-crafted shader?"}, {"owner": {"reputation": 47, "user_id": 4921351, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ui4EV4BN3hY/AAAAAAAAAAI/AAAAAAAADgE/uBaWf5pATn8/photo.jpg?sz=128", "display_name": "osek", "link": "https://stackoverflow.com/users/4921351/osek"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1482353257, "post_id": 41269788, "comment_id": 69744503, "body": "Thanks it worked with  <code>glEnable(GL_TEXTURE_GEN_T);</code> and <code>glEnable(GL_TEXTURE_GEN_S);</code> but textures are very streched [link]<a href=\"http://i.imgur.com/HwLNBFE.png\" rel=\"nofollow noreferrer\">i.imgur.com/HwLNBFE.png</a>"}, {"owner": {"reputation": 47, "user_id": 4921351, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ui4EV4BN3hY/AAAAAAAAAAI/AAAAAAAADgE/uBaWf5pATn8/photo.jpg?sz=128", "display_name": "osek", "link": "https://stackoverflow.com/users/4921351/osek"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1482353458, "post_id": 41269788, "comment_id": 69744618, "body": "I think i need to work on my texturing mode and way of applying textures. Now my settings are: <code>glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);</code> <code>glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);</code>"}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 2, "creation_date": 1482356928, "post_id": 41269788, "comment_id": 69746317, "body": "For the records: You should try to avoid such an ancient OpenGL version and stick to &gt; 3.3 Core Profile."}, {"owner": {"reputation": 9788, "user_id": 507043, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/kPUHE.png?s=128&g=1", "display_name": "Michael IV", "link": "https://stackoverflow.com/users/507043/michael-iv"}, "edited": false, "score": 0, "creation_date": 1482357417, "post_id": 41269788, "comment_id": 69746560, "body": "Man...Are you seriously using this stone age GL API in the year 2016?"}, {"owner": {"reputation": 47, "user_id": 4921351, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ui4EV4BN3hY/AAAAAAAAAAI/AAAAAAAADgE/uBaWf5pATn8/photo.jpg?sz=128", "display_name": "osek", "link": "https://stackoverflow.com/users/4921351/osek"}, "reply_to_user": {"reputation": 9788, "user_id": 507043, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/kPUHE.png?s=128&g=1", "display_name": "Michael IV", "link": "https://stackoverflow.com/users/507043/michael-iv"}, "edited": false, "score": 0, "creation_date": 1482362182, "post_id": 41269788, "comment_id": 69748465, "body": "@Michael Ivanov  My University REQUIRES  that from me, it&#39;s not my choice :/"}], "owner": {"reputation": 47, "user_id": 4921351, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ui4EV4BN3hY/AAAAAAAAAAI/AAAAAAAADgE/uBaWf5pATn8/photo.jpg?sz=128", "display_name": "osek", "link": "https://stackoverflow.com/users/4921351/osek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1482348484, "creation_date": 1482345719, "last_edit_date": 1482346638, "question_id": 41269788, "link": "https://stackoverflow.com/questions/41269788/how-i-can-add-auto-texture-coordinates-in-opengl", "title": "How i can add auto texture coordinates in OpenGL?", "body": "<p>i created bezier surface in OpenGL this way:</p>\n\n<pre><code>GLfloat punktyWSP[5][5][3] = { \n    { {0,0,4}, {1,0,4},{2,0,4},{3,0,4},{4,1,4}},   \n    { {0,0,3}, {1,1,3},{2,1,3},{3,1,3},{4,1,3} },\n    { {0,1,2}, {1,2,2},{2,6,2},{3,2,2},{4,1,2} },\n    { {0,0,1}, {1,1,1},{2,1,1},{3,1,1},{4,1,1} },\n    { {0,0,0}, {1,0,0},{2,0,0},{3,0,0},{4,1,0} }\n    }; \nglMap2f(GL_MAP2_VERTEX_3, 0, 1, 3, 5, 0, 1, 15, 5, &amp;punktyWSP[0][0][0]);\nglEnable(GL_MAP2_VERTEX_3);\nglMapGrid2f(u, 0, 1, v, 0, 1);\nglShadeModel(GL_FLAT); \nglEnable (GL_AUTO_NORMAL);\nglEvalMesh2(GL_FILL, 0, u, 0, v); \n</code></pre>\n\n<p>Now i want to texture it.\nIs there any way to add <strong>auto texture coordinates</strong> to my surface as it it with norms and <code>glenable(gl_auto_normal)</code>? \nIf there is no such a function, do you have any idea how to add coordinates to my surface? Maybe <code>glEnable(GL_MAP2_TEXTURE_COORD_2)</code> ?</p>\n"}, {"tags": ["c++", "templates", "template-specialization", "sfinae"], "answers": [{"comments": [{"owner": {"reputation": 2946, "user_id": 1254880, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88115806b7eaa034f2040704798fd481?s=128&d=identicon&r=PG", "display_name": "Tarc", "link": "https://stackoverflow.com/users/1254880/tarc"}, "edited": false, "score": 0, "creation_date": 1482346926, "post_id": 41269814, "comment_id": 69741035, "body": "Thank you for your quick answer! It really seems clearer with the overload. But why do you use <code>class U=T</code> and then use <code>U</code>? Does this have to do with the overload resolution?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 2946, "user_id": 1254880, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88115806b7eaa034f2040704798fd481?s=128&d=identicon&r=PG", "display_name": "Tarc", "link": "https://stackoverflow.com/users/1254880/tarc"}, "edited": false, "score": 0, "creation_date": 1482347293, "post_id": 41269814, "comment_id": 69741234, "body": "@Tarc SFINAE only applies in the immediate context. If you did <code>is_default_constructible&lt;T&gt;::value</code>, where <code>T</code> is not a template parameter, that would immediately evaluate and you would get a hard error."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 4, "last_activity_date": 1482345834, "creation_date": 1482345834, "answer_id": 41269814, "question_id": 41269722, "link": "https://stackoverflow.com/questions/41269722/variadic-template-specialization-stdenable-if-sfinae/41269814#41269814", "title": "Variadic template specialization, std::enable_if, SFINAE", "body": "<p>Handy rule of thumb: don't specialize, overload.</p>\n\n<pre><code>template &lt;class... Args&gt;\nstatic T&amp; GetInstance(Args&amp;&amp;... );\n\ntemplate &lt;class U=T, std::enable_if_t&lt;!std::is_default_constructible&lt;U&gt;::value, int&gt; = 0&gt;\nstatic T&amp; GetInstance();\n</code></pre>\n\n<p>If <code>T</code> is default constructible, you only have one viable overload. If it's not, the second is more specialized when <code>Args</code> is empty and is preferred. </p>\n\n<hr />\n\n<p>Note. This design seems suspect. </p>\n"}], "owner": {"reputation": 2946, "user_id": 1254880, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88115806b7eaa034f2040704798fd481?s=128&d=identicon&r=PG", "display_name": "Tarc", "link": "https://stackoverflow.com/users/1254880/tarc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 675, "favorite_count": 2, "accepted_answer_id": 41269814, "answer_count": 1, "score": 3, "last_activity_date": 1482349200, "creation_date": 1482345510, "last_edit_date": 1482349200, "question_id": 41269722, "link": "https://stackoverflow.com/questions/41269722/variadic-template-specialization-stdenable-if-sfinae", "title": "Variadic template specialization, std::enable_if, SFINAE", "body": "<p>A singleton class exposes this method for clients to obtain the instance:</p>\n\n<pre><code>template&lt; typename ... Args &gt;\nstatic T &amp; GetInstance( Args &amp;&amp; ... args )\n{\n    if ( ! m_instance )\n    {\n        m_instance = new T( std::forward&lt; Args &gt;( args ) ... );\n    }\n\n    return * m_instance;\n}\n</code></pre>\n\n<p>But for classes with no default constructors, it's annoying to allways pass the arguments. It would be better if, once the instance has already been created, to allow users just to call:</p>\n\n<pre><code>auto &amp; instance = GetInstance( );\n</code></pre>\n\n<p>At first I thought that for this to work all it was needed was to specialize the templated method, say with:</p>\n\n<pre><code>// Wrong Version\ntemplate&lt; &gt;\nstatic T &amp; GetInstance&lt; &gt;( )\n{\n    if ( ! instance )\n    {\n        throw std::runtime_error(\n            \"Tried to get instance of non initialized singleton with no\"\n            \" default constructor.\" );\n    }\n\n    return * instance;\n}\n</code></pre>\n\n<p>But for classes with a default constructor, this specialization would be used <em>instead</em> of the more general one. I would like that such specialization be used <em>only if</em> <code>T</code> has no default constructor.</p>\n\n<p>So I tried to change it a bit:</p>\n\n<pre><code>// Right Version\ntemplate&lt; &gt;\nstatic auto GetInstance&lt; &gt;( ) -&gt;\n    typename std::enable_if&lt;\n        ! std::is_default_constructible&lt; T &gt;::value , T &amp; &gt;::type \n{\n    if ( ! instance )\n    {\n        throw std::runtime_error(\n            \"Tried to get instance of non initialized singleton with no\"\n            \" default constructor.\" );\n    }\n\n    return * instance;\n}\n</code></pre>\n\n<p>So this worked, but I'm confused about the whole thing. To begin with, is the way I've done it the proper way to handle it? Shouldn't I being using <code>enable_if&lt;&gt;</code> as a parameter or a template parameter instead of a return type?</p>\n\n<p>How the compiler works here? When it was just plain simple template specialization (in the <em>Wrong Version</em>) I guess the compiler realized that the more specialized version was better for code calling <code>GetInstance()</code> with no parameters (<code>T</code> being a class with a default construtor).</p>\n\n<p>For the version with the <code>enable_if&lt;&gt;</code>, the compiler begins thinking that it would be better also to use the more specialized version, but then the code was ill formed. So it falls back to the general version? Is this also called SFINAE?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 4, "creation_date": 1482345353, "post_id": 41269654, "comment_id": 69740156, "body": "Why are you SHOUTING AT US?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1482345370, "post_id": 41269654, "comment_id": 69740166, "body": "It looks like nothing. The program doesn&#39;t do anything, so everything is optimized away."}, {"owner": {"reputation": 593, "user_id": 6534541, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/561c59a13a698b9777eb0b88d2e29158?s=128&d=identicon&r=PG&f=1", "display_name": "I&#39;m here for Winter Hats", "link": "https://stackoverflow.com/users/6534541/im-here-for-winter-hats"}, "edited": false, "score": 0, "creation_date": 1482345457, "post_id": 41269654, "comment_id": 69740220, "body": "Please check this link out <a href=\"http://www.cplusplus.com/doc/tutorial/pointers/\" rel=\"nofollow noreferrer\">cplusplus.com/doc/tutorial/pointers</a>"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1482345519, "post_id": 41269654, "comment_id": 69740245, "body": "Yes, a pointer to a struct is also a pointer to the first element in the struct."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1482345710, "post_id": 41269654, "comment_id": 69740375, "body": "The address of an object and the address of its first member variable is always the same per the standard.  Anything else may be different.  In this case though you pointer points to nothing."}, {"owner": {"reputation": 1233, "user_id": 4333131, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-jo6W76SziW4/AAAAAAAAAAI/AAAAAAAAABw/6j5r6ZJyBMg/photo.jpg?sz=128", "display_name": "Surajeet Bharati", "link": "https://stackoverflow.com/users/4333131/surajeet-bharati"}, "edited": false, "score": 1, "creation_date": 1482345725, "post_id": 41269654, "comment_id": 69740386, "body": "Why don&#39;t you just print them? <code>Clarifying things before down voting</code>"}, {"owner": {"reputation": 39, "user_id": 7127035, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1619964731630393/picture?type=large", "display_name": "Arey M Salih", "link": "https://stackoverflow.com/users/7127035/arey-m-salih"}, "reply_to_user": {"reputation": 1233, "user_id": 4333131, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-jo6W76SziW4/AAAAAAAAAAI/AAAAAAAAABw/6j5r6ZJyBMg/photo.jpg?sz=128", "display_name": "Surajeet Bharati", "link": "https://stackoverflow.com/users/4333131/surajeet-bharati"}, "edited": false, "score": 0, "creation_date": 1482345968, "post_id": 41269654, "comment_id": 69740511, "body": "@SurajeetBharati I added some lines"}, {"owner": {"reputation": 39, "user_id": 7127035, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1619964731630393/picture?type=large", "display_name": "Arey M Salih", "link": "https://stackoverflow.com/users/7127035/arey-m-salih"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1482345988, "post_id": 41269654, "comment_id": 69740528, "body": "@KenWhite sorry"}, {"owner": {"reputation": 39, "user_id": 7127035, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1619964731630393/picture?type=large", "display_name": "Arey M Salih", "link": "https://stackoverflow.com/users/7127035/arey-m-salih"}, "reply_to_user": {"reputation": 593, "user_id": 6534541, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/561c59a13a698b9777eb0b88d2e29158?s=128&d=identicon&r=PG&f=1", "display_name": "I&#39;m here for Winter Hats", "link": "https://stackoverflow.com/users/6534541/im-here-for-winter-hats"}, "edited": false, "score": 0, "creation_date": 1482346079, "post_id": 41269654, "comment_id": 69740584, "body": "alright i will check it out later @I&#39;mhereforWinterHats"}, {"owner": {"reputation": 39, "user_id": 7127035, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1619964731630393/picture?type=large", "display_name": "Arey M Salih", "link": "https://stackoverflow.com/users/7127035/arey-m-salih"}, "edited": false, "score": 0, "creation_date": 1482346200, "post_id": 41269654, "comment_id": 69740650, "body": "good god , the stackoverflow communtiy is so unforgiving i dont know what to do to please them...... i love this site but this is too much"}, {"owner": {"reputation": 39, "user_id": 7127035, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1619964731630393/picture?type=large", "display_name": "Arey M Salih", "link": "https://stackoverflow.com/users/7127035/arey-m-salih"}, "reply_to_user": {"reputation": 1233, "user_id": 4333131, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-jo6W76SziW4/AAAAAAAAAAI/AAAAAAAAABw/6j5r6ZJyBMg/photo.jpg?sz=128", "display_name": "Surajeet Bharati", "link": "https://stackoverflow.com/users/4333131/surajeet-bharati"}, "edited": false, "score": 1, "creation_date": 1482346391, "post_id": 41269654, "comment_id": 69740770, "body": "well, thanks for fixing it.... @SurajeetBharati"}], "answers": [{"comments": [{"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "edited": false, "score": 1, "creation_date": 1482346257, "post_id": 41269789, "comment_id": 69740688, "body": "@SurajeetBharati Thanks, didn&#39;t see the <code>C</code> tag.  Edited answer accordingly."}, {"owner": {"reputation": 1233, "user_id": 4333131, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-jo6W76SziW4/AAAAAAAAAAI/AAAAAAAAABw/6j5r6ZJyBMg/photo.jpg?sz=128", "display_name": "Surajeet Bharati", "link": "https://stackoverflow.com/users/4333131/surajeet-bharati"}, "edited": false, "score": 1, "creation_date": 1482346322, "post_id": 41269789, "comment_id": 69740726, "body": "It seems like OP is using c++ now."}, {"owner": {"reputation": 39, "user_id": 7127035, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1619964731630393/picture?type=large", "display_name": "Arey M Salih", "link": "https://stackoverflow.com/users/7127035/arey-m-salih"}, "edited": false, "score": 0, "creation_date": 1482346468, "post_id": 41269789, "comment_id": 69740806, "body": "i understand them both but for this question i was using a c++ compiler"}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "reply_to_user": {"reputation": 39, "user_id": 7127035, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1619964731630393/picture?type=large", "display_name": "Arey M Salih", "link": "https://stackoverflow.com/users/7127035/arey-m-salih"}, "edited": false, "score": 0, "creation_date": 1482347014, "post_id": 41269789, "comment_id": 69741071, "body": "@AreyMSalih Glad this helped you :)"}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": true, "score": 0, "last_activity_date": 1482346850, "last_edit_date": 1482346850, "creation_date": 1482345719, "answer_id": 41269789, "question_id": 41269654, "link": "https://stackoverflow.com/questions/41269654/initializing-pointer-struct-what-does-it-look-like-in-memory/41269789#41269789", "title": "Initializing pointer struct - what does it look like in memory?", "body": "<p>The pointer, named <code>p</code>, hasn't been initialized so it doesn't point to anything interesting.  </p>\n\n<p>You need to construc an array of objects on the heap with:</p>\n\n<pre><code>CAR* p = new CAR[4];\n</code></pre>\n\n<p><code>p</code> now points to an array of 4 instances of the <code>struct</code> CAR;</p>\n\n<p><code>delete</code> this with the array <code>delete</code> with:</p>\n\n<pre><code>delete [] p;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 7127035, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1619964731630393/picture?type=large", "display_name": "Arey M Salih", "link": "https://stackoverflow.com/users/7127035/arey-m-salih"}, "edited": false, "score": 0, "creation_date": 1482346868, "post_id": 41269837, "comment_id": 69741005, "body": "thank you for taking your time to answer, it helped a lot."}], "tags": [], "owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "is_accepted": false, "score": 1, "last_activity_date": 1482345938, "creation_date": 1482345938, "answer_id": 41269837, "question_id": 41269654, "link": "https://stackoverflow.com/questions/41269654/initializing-pointer-struct-what-does-it-look-like-in-memory/41269837#41269837", "title": "Initializing pointer struct - what does it look like in memory?", "body": "<p>The full answer depends on how your compiler is configured. The first 20 bytes of the memory location stored in the pointer will correspond to the <code>name</code> field of your structure. Depending on the alignment configuration, there will be 0 or more empty bytes representing padding that will place your second field, <code>price</code>, on an alignment boundary. </p>\n\n<p>Single, two, and four-byte alignment will result in no padding, as the 20 byte size of <code>name</code> is divisible by those values. Eight-byte alignment will result in 4 bytes of padding between your two fields.</p>\n"}], "owner": {"reputation": 39, "user_id": 7127035, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1619964731630393/picture?type=large", "display_name": "Arey M Salih", "link": "https://stackoverflow.com/users/7127035/arey-m-salih"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 41269789, "answer_count": 2, "score": -1, "last_activity_date": 1482346850, "creation_date": 1482345313, "last_edit_date": 1482346678, "question_id": 41269654, "link": "https://stackoverflow.com/questions/41269654/initializing-pointer-struct-what-does-it-look-like-in-memory", "title": "Initializing pointer struct - what does it look like in memory?", "body": "<p>Suppose I have this code </p>\n\n<pre><code>typedef struct CAR\n{\n    char name[20];\n    int price;\n};\n\nint main()\n{\n    int n;\n    cin&gt;&gt;n;         \n    CAR *p;\n    p = new CAR[n];\n    for (int i = 0; i &lt; n; i++)\n        cin &gt;&gt; p[i].price;\n    for (int i = 0; i &lt; n; i++)\n        cout&lt;&lt; p[i].price;\n    delete []p;\n}\n</code></pre>\n\n<p>Does the pointer point to name location in memory?</p>\n\n<p>My English is so bad I struggle to make my point, please ask me to clarify things before down voting.</p>\n"}, {"tags": ["c++", "c++11", "std-pair", "idioms", "stdtuple"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 13, "creation_date": 1482345365, "post_id": 41269629, "comment_id": 69740161, "body": "In these modern times, a struct with appropriately-named members is far superior to a <code>std::pair</code> with members named <code>first</code> and <code>second</code>, as well as to a <code>std::tuple</code> with members named <code>get&lt;0&gt;()</code> and <code>get&lt;1&gt;()</code>."}, {"owner": {"reputation": 1750, "user_id": 960475, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IID7g.png?s=128&g=1", "display_name": "ArmenB", "link": "https://stackoverflow.com/users/960475/armenb"}, "edited": false, "score": 0, "creation_date": 1482345897, "post_id": 41269629, "comment_id": 69740473, "body": "if the two values are related, ex employee id, employee name then struct would be better in my opinion."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482346155, "post_id": 41269629, "comment_id": 69740629, "body": "Can you give us an example of the use case in your API design?"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 4, "creation_date": 1482346464, "post_id": 41269629, "comment_id": 69740803, "body": "Make a proper struct with proper names; it&#39;s four lines of definition for you, but an order of magnitude of readability for your library clients. I&#39;m sick of lazy APIs where it&#39;s all <code>stuff.first.second</code>, <code>stuff.second.first</code>, they are long to type and it&#39;s never clear what is going on. Just look at any code that works with <code>std::map</code> iterators (doubly so if the key or the value is itself a pair) - there&#39;s really no excuse for that kind of lazy design."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1482346824, "post_id": 41269629, "comment_id": 69740985, "body": "Related: <a href=\"https://www.kdab.com/tuple-pair-cpp-apis/\" rel=\"nofollow noreferrer\">kdab.com/tuple-pair-cpp-apis</a>"}, {"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 0, "creation_date": 1482348843, "post_id": 41269629, "comment_id": 69742128, "body": "See also the C++ core guidelines <a href=\"https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#Rf-out-multi\" rel=\"nofollow noreferrer\">F.21</a> and <a href=\"https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#Re-no-throw-codes\" rel=\"nofollow noreferrer\">E.27</a>."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482359927, "post_id": 41269629, "comment_id": 69747659, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: How about, say, <code>std::pair&lt;wheel_id_t, wheel_id_t&gt; get_front_wheels(const car_t&amp; car)</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1482348536, "last_edit_date": 1482348536, "creation_date": 1482345417, "answer_id": 41269688, "question_id": 41269629, "link": "https://stackoverflow.com/questions/41269629/in-api-design-when-should-i-prefer-a-length-2-stdtuple-over-a-pair/41269688#41269688", "title": "In API design, when should I prefer a length-2 std::tuple over a pair?", "body": "<blockquote>\n  <p>But - perhaps in these modern times I should prefer returning <code>std::tuple&lt;foo, bar&gt;</code> instead?</p>\n  \n  <p>More generally, <strong>when should a tuple be prefered over a pair</strong>, and when is pair the more appropriate construct?</p>\n</blockquote>\n\n<p>Well, it might be useful in case you want to work with (meta-)algorithms that rather expect to take a <code>std::tuple</code> than a <code>std::pair</code>.</p>\n\n<p>Finally that is absolutely dependent on your actual use case and cannot be answered without knowing it.</p>\n\n<p>If you have a situation that is guaranteed to match a pair of types intrinsically (semantically related in the context) you might be better off with <code>std::pair</code> to reflect those semantics at the API.</p>\n\n<p>If you're not sure, rather use a <code>std::tuple</code> to keep on for future flexibility of your API design.</p>\n\n<p>Another way is simply to use your own structs that clearly have named semantics for the values like:</p>\n\n<pre><code> template&lt;typename T&gt;\n struct point2D {\n      T x;\n      T y;\n };\n\n template&lt;typename T&gt;\n struct point3D {\n      T x;\n      T y;\n      T z;\n };\n\n template&lt;typename Key, typename Value&gt;\n struct Item {\n     Key key:\n     Value value;\n };\n</code></pre>\n\n<p>rather than <code>std::tuple&lt;T,T&gt;</code>, <code>std::pair&lt;T,T&gt;</code> or <code>std::tuple&lt;T,T,T&gt;</code></p>\n"}, {"comments": [{"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 4, "creation_date": 1482347765, "post_id": 41269697, "comment_id": 69741491, "body": "No, that&#39;s not what pairs are meant for. That&#39;s just how they were inappropriately used by the standard library. If you have a key-value pair, the appropriate structure for that is a struct with a member named key and a member named value."}], "tags": [], "owner": {"reputation": 2659, "user_id": 2026276, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/8wAi8.jpg?s=128&g=1", "display_name": "Bauss", "link": "https://stackoverflow.com/users/2026276/bauss"}, "is_accepted": false, "score": 0, "last_activity_date": 1482345434, "creation_date": 1482345434, "answer_id": 41269697, "question_id": 41269629, "link": "https://stackoverflow.com/questions/41269629/in-api-design-when-should-i-prefer-a-length-2-stdtuple-over-a-pair/41269697#41269697", "title": "In API design, when should I prefer a length-2 std::tuple over a pair?", "body": "<p>Tuples are meant for wrapping around multiple values that may or may not have any relations to each other.</p>\n\n<p>Pairs are meant for wrapping around two pairs of values that has a relation between each other ex. a key-value pair would have two values, one being a key and the other being a value, where they both have a relation to each other ex. in a hashmap where the key points to either the pair or the value.</p>\n\n<p>It really comes down in how you want everything to work etc.</p>\n"}, {"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482346249, "post_id": 41269879, "comment_id": 69740685, "body": "Well, that doesn&#39;t apply for using <code>std::pair</code> like 2D coordinate points, which are also a popular use."}, {"owner": {"reputation": 1750, "user_id": 960475, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IID7g.png?s=128&g=1", "display_name": "ArmenB", "link": "https://stackoverflow.com/users/960475/armenb"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1482346644, "post_id": 41269879, "comment_id": 69740900, "body": "The frameworks or lib&#39;s I&#39;ve used so far never used either <code>std::pair</code> nor <code>std::tuple</code> for containing coordinate points. For example OpenFramework uses ofVec2f, Qt uses QPoint, UDK uses FVector2D, etc..."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1482349653, "post_id": 41269879, "comment_id": 69742557, "body": "@ArmenB: ... especially because pairs and tuples miss the usual operator overloading stuff, which makes them a lot more awkward to use as coordinate points."}, {"owner": {"reputation": 1750, "user_id": 960475, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IID7g.png?s=128&g=1", "display_name": "ArmenB", "link": "https://stackoverflow.com/users/960475/armenb"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1482352726, "post_id": 41269879, "comment_id": 69744221, "body": "@Matteo true, so maybe coordinate point isn&#39;t the best example for his case."}], "tags": [], "owner": {"reputation": 1750, "user_id": 960475, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IID7g.png?s=128&g=1", "display_name": "ArmenB", "link": "https://stackoverflow.com/users/960475/armenb"}, "is_accepted": false, "score": 0, "last_activity_date": 1482346082, "creation_date": 1482346082, "answer_id": 41269879, "question_id": 41269629, "link": "https://stackoverflow.com/questions/41269629/in-api-design-when-should-i-prefer-a-length-2-stdtuple-over-a-pair/41269879#41269879", "title": "In API design, when should I prefer a length-2 std::tuple over a pair?", "body": "<p>I've commonly seen proper API calls or libraries (math related) return a struct or class even if the container has two values. </p>\n\n<p>But if you must, I agree with @Bauss, if the value is a key, value pair then use <code>std::pair</code>, for example \"table id, string name\".</p>\n\n<p>But if the tuple is not key value but both are actual values for example a position is XY coordinate  (int x, int y) use <code>std::tuple</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 1, "creation_date": 1482348728, "post_id": 41270419, "comment_id": 69742058, "body": "Even when the STL was written, the decision of returning <code>std::pair</code> was a very poor decision; a named struct would&#39;ve been much better. <code>auto i = map.insert(key, value); if (i.first) { &#47;* or i.second? can never remember... *&#47; }</code>."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1482348843, "post_id": 41270419, "comment_id": 69742129, "body": "&quot;<i>Worse, using a pair assumes that the number of items will always be 2, and bakes that into the interface.</i>&quot; Because functions don&#39;t have baked in numbers of parameters. Oh wait... &quot;<i>there is no reason whatsoever to prefer a pair over a tuple</i>&quot; Unless you need a type which is trivially copyable and/or standard layout. <code>tuple</code> is neither."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1482349314, "post_id": 41270419, "comment_id": 69742397, "body": "@NicolBolas It&#39;s true that I had not considered this standard-layout use case. However it seems to me that in such a case, it would be more expressive and trivial to simply create a new struct that did this job in 3 lines of code (excluding braces). If we truly need standard layout 2-tuples, we can simply use std::tie around a trivial struct and achieve the same effect. I did offer the warning about the presence of opinion."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1482360272, "post_id": 41270419, "comment_id": 69747794, "body": "So, is the standard committee entertaining the possibility of deprecating <code>std::pair</code> at some point? e.g. for a &quot;version 2&quot; of the standard library?"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1482360436, "post_id": 41270419, "comment_id": 69747861, "body": "<i>*Worse, using a pair assumes that the number of items will always be 2, and bakes that into the interface. This is obviously an error.</i> I completely disagree. That&#39;s like saying that having a non-variadic signature with 2 (separate) parameters bakes in the number of parameters at 2. We don&#39;t write infinitely fluid code that can take whatever you throw at it."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1482361057, "post_id": 41270419, "comment_id": 69748079, "body": "@einpoklum: bad example, you can add parameters without breaking the API by adding an overload (which won&#39;t even break the ABI) or adding parameters with a default value (actually, it&#39;s routinely done); you can add stuff to a returned struct without impacting your client code (again, routinely done); however you will break it if you change the return type from a pair to a tuple or from a tuple to a bigger one."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1482361108, "post_id": 41270419, "comment_id": 69748097, "body": "@einpoklum it seems futile to argue what is essentially an opinion. You will have seen that I laid out my position that a pair is logically a 2-tuple that just happens to have hard-baked names for elements 0 and 1. A tuple has a variadic signature. So it follows (to me) that a pair is a crippled tuple."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1482361138, "post_id": 41270419, "comment_id": 69748111, "body": "@RichardHodges: That part of the argument is fine :-)"}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 0, "last_activity_date": 1482348122, "creation_date": 1482348122, "answer_id": 41270419, "question_id": 41269629, "link": "https://stackoverflow.com/questions/41269629/in-api-design-when-should-i-prefer-a-length-2-stdtuple-over-a-pair/41270419#41270419", "title": "In API design, when should I prefer a length-2 std::tuple over a pair?", "body": "<p>Warning: some of what follows is opinion:</p>\n\n<p>In computer science, there are only three interesting numbers:</p>\n\n<ul>\n<li>zero</li>\n<li>one</li>\n<li>N</li>\n</ul>\n\n<p>Because we're either dealing with the absence of something, one thing or some number of things. For example <code>average(a0 , a1)</code> is a special case of <code>average(a0, ...aI)</code> where I is every integer in the set (0 &lt;= I &lt; N).</p>\n\n<p>It follows that <code>std::pair</code> is logically specialisation of an N-tuple and is therefore un-needed.</p>\n\n<p>Worse, using a <code>pair</code> assumes that the number of items will always be 2, and bakes that into the interface. This is obviously an error, since we're trading the ability to make future nonbreaking changes for zero gain.</p>\n\n<p>When the STL was first written there were no variadic templates and there were only three use-cases for pairs :- </p>\n\n<ol>\n<li><p>as a range resulting from <code>equal_range</code> and the like</p></li>\n<li><p>as an iterator-with-state returned from <code>map::insert</code> and,</p></li>\n<li><p>as a key/value pair in a <code>map</code>.</p></li>\n</ol>\n\n<p>Then boost came along with its modern ideas like tuples. Being an unofficial library, boost was able to simulate variadic templates with pages and pages of auto-generated overloads. Something that would be unthinkable in a standardised API that ships with every compiler.</p>\n\n<p>Now we have variadic templates. Except where unfortunately baked into the interfaces of maps, there is no reason whatsoever to prefer a <code>pair</code> over a <code>tuple</code></p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 6, "last_activity_date": 1482350852, "creation_date": 1482350852, "answer_id": 41271078, "question_id": 41269629, "link": "https://stackoverflow.com/questions/41269629/in-api-design-when-should-i-prefer-a-length-2-stdtuple-over-a-pair/41271078#41271078", "title": "In API design, when should I prefer a length-2 std::tuple over a pair?", "body": "<p>You should declare a struct for that.</p>\n\n<p><code>get&lt;0&gt;(x)</code> and <code>get&lt;1&gt;(x)</code>, or even post-C++11's <code>get&lt;Foo&gt;(x)</code> and <code>get&lt;Bar&gt;(x)</code>, are less meaningful and/or idiomatic than <code>x.foo</code> or <code>x.bar</code>.</p>\n\n<p><code>tuple</code>s are best for non-uniformly typed things that are identified by order.</p>\n\n<p><code>pair</code>s are a <code>tuple</code> that was written prior to C++11.</p>\n\n<p>Both <code>pair</code> and <code>tuple</code> (and <code>array</code> while we are at it) are tuple-like, in that they support <code>std::tuple_size</code> and <code>get&lt;N&gt;</code>.</p>\n\n<p>It has been considered an error in the <code>std</code> library that so many types use <code>pair</code> instead of structures with properly named fields.  Ie, if <code>map</code> used <code>struct KV{ Key key; Value value; }</code>, it would have been better.</p>\n\n<p>Now, metaprogramming support for <code>KV</code> as a generic pair would be good as well.  So, <code>tuple_size</code> and <code>get&lt;0&gt;</code> etc.  But throwing away named fields is generally a bad idea.  Names have power.</p>\n\n<p>With C++17, simple <code>struct</code>s start working with structured binding, even if you don't make them \"tuple-like\".</p>\n\n<p>If you do have things whose identity is determined by their order of non-uniform type, <code>tuple</code> is the way to go.  <code>pair</code> is a nearly legacy type.  There are some advantages to <code>pair</code> over <code>tuple</code>, but <code>tuple</code> continues to be improved to remove them (like implicit initialization of <code>tuple</code>).</p>\n"}], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 1, "closed_date": 1482358233, "accepted_answer_id": 41271078, "answer_count": 5, "score": 0, "last_activity_date": 1482350852, "creation_date": 1482345221, "last_edit_date": 1482347501, "question_id": 41269629, "link": "https://stackoverflow.com/questions/41269629/in-api-design-when-should-i-prefer-a-length-2-stdtuple-over-a-pair", "closed_reason": "Opinion-based", "title": "In API design, when should I prefer a length-2 std::tuple over a pair?", "body": "<p>I'm writing a small library which has some API function returning two things (of different types). I'd rather not declare a struct just for that; so I'm thinking of returning an <code>std::pair&lt;foo, bat&gt;</code>. But - perhaps in these modern times I should prefer returning <code>std::tuple&lt;foo, bar&gt;</code> instead?</p>\n\n<p>More generally, when should a tuple be prefered over a pair, and when is pair the more appropriate construct?</p>\n"}, {"tags": ["c++", "qt", "c++11", "stl", "dcmtk"], "comments": [{"owner": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "edited": false, "score": 6, "creation_date": 1482344627, "post_id": 41269345, "comment_id": 69739734, "body": "<code>std::stod</code> behaviour depends on the currently installed C <a href=\"http://en.cppreference.com/w/cpp/locale/setlocale\" rel=\"nofollow noreferrer\">locale</a>. <code>QApplication</code> may set the current locale when constructed, changing the behaviour of <code>std::stod</code> in your code: compare the currently installed locale before and after construction of <code>QApplication</code>"}, {"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "reply_to_user": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "edited": false, "score": 1, "creation_date": 1482346158, "post_id": 41269345, "comment_id": 69740632, "body": "@wasthishelpful: nailed it. What <code>QApplication</code> does is a call to <code>setlocale(LC_ALL, &quot;&quot;)</code>, which sets the application&#39;s locale according to the environment. See <a href=\"https://code.woboq.org/qt5/qtbase/src/corelib/kernel/qcoreapplication.cpp.html#_ZN23QCoreApplicationPrivate10initLocaleEv\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "reply_to_user": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "edited": false, "score": 0, "creation_date": 1482665967, "post_id": 41269345, "comment_id": 69845170, "body": "@wasthis I would argue this should be fixed in Qt... It&#39;s unexpected to say the least..."}, {"owner": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1482673511, "post_id": 41269345, "comment_id": 69846865, "body": "@rubenvb looking in the documentation more carefuly, this point is discuted <a href=\"http://doc.qt.io/qt-5/qcoreapplication.html#locale-settings\" rel=\"nofollow noreferrer\">here</a>, so we can&#39;t really say it&#39;s unexpected..."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "reply_to_user": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "edited": false, "score": 0, "creation_date": 1482702103, "post_id": 41269345, "comment_id": 69853049, "body": "@wasthis fair enough. But still unexpected IMHO... QApplication has no business changing global locale settings on construction..."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 6364481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c744e1de1e751f44b097b0d02fa47404?s=128&d=identicon&r=PG&f=1", "display_name": "RunesCarved", "link": "https://stackoverflow.com/users/6364481/runescarved"}, "edited": false, "score": 0, "creation_date": 1482357255, "post_id": 41270317, "comment_id": 69746484, "body": "Great! Thank you! Would have never found an answer to that. I&#39;m gonna try to read that up."}], "tags": [], "owner": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "is_accepted": false, "score": 2, "last_activity_date": 1482690909, "last_edit_date": 1495540419, "creation_date": 1482347770, "answer_id": 41270317, "question_id": 41269345, "link": "https://stackoverflow.com/questions/41269345/strange-error-initializing-a-qapplication-before-using-stdstod/41270317#41270317", "title": "Strange error initializing a QApplication before using std::stod", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/string/basic_string/stof\" rel=\"nofollow noreferrer\"><code>std::stod</code></a> behaviour depends on the currently installed C locale.</p>\n\n<p>According to <a href=\"http://en.cppreference.com/w/cpp/locale/setlocale\" rel=\"nofollow noreferrer\">cppreference</a>:</p>\n\n<blockquote>\n  <p>During program startup, the equivalent of <code>std::setlocale(LC_ALL, \"C\");</code> is executed before any user code is run.</p>\n</blockquote>\n\n<p>As pointed by @peppe in the comments, during <code>QApplication</code>'s construction <code>setlocale(LC_ALL, \"\");</code> is called on Unix, thus altering <code>std::stod</code>.</p>\n\n<p>You can store the locale and set it back as follows:</p>\n\n<pre><code>std::string backup(\n    // pass a null pointer to query the current C locale without modifying it\n    std::setlocale(LC_ALL, nullptr)\n);\n\nQApplication app(&amp;argc, argv);\n\n// restore the locale\nstd::setlocale(LC_ALL, backup.c_str());\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT:</strong></p>\n\n<p>After rereading documentation for <a href=\"http://doc.qt.io/qt-5/qcoreapplication.html#locale-settings\" rel=\"nofollow noreferrer\">QCoreApplication</a>, there is a paragraph about locale settings in detailed description:</p>\n\n<blockquote>\n  <p>On Unix/Linux Qt is configured to use the system locale settings by default. This can cause a conflict when using POSIX functions, for instance, when converting between data types such as floats and strings, since the notation may differ between locales. To get around this problem, call the POSIX function <code>setlocale(LC_NUMERIC,\"C\")</code> right after initializing QApplication, QGuiApplication or QCoreApplication to reset the locale that is used for number formatting to \"C\"-locale.</p>\n</blockquote>\n\n<p>However <a href=\"https://stackoverflow.com/a/41281152/6612932\">@J.Riesmeier</a> provided an interessant answer as one of the DCMTK developers.</p>\n"}, {"tags": [], "owner": {"reputation": 1395, "user_id": 3154372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ffJOd.jpg?s=128&g=1", "display_name": "J. Riesmeier", "link": "https://stackoverflow.com/users/3154372/j-riesmeier"}, "is_accepted": false, "score": 3, "last_activity_date": 1482403076, "creation_date": 1482403076, "answer_id": 41281152, "question_id": 41269345, "link": "https://stackoverflow.com/questions/41269345/strange-error-initializing-a-qapplication-before-using-stdstod/41281152#41281152", "title": "Strange error initializing a QApplication before using std::stod", "body": "<p>Being one of the DCMTK developers, i.e. the DICOM toolkit you use, I wonder why you don't retrieve the floating point values directly from the DICOM data element \"Pixel Spacing\", I mean instead of retrieving the entire character string (including the backslash separator) first and then converting its components to individual floating point numbers. That way, there would be no problem at all with the current locale settings.</p>\n\n<p>By the way, because of the locale settings issue we've introduced our own locale-independent <a href=\"http://support.dcmtk.org/docs-snapshot/classOFStandard.html#a7d7df9cb243dbe2dd23141c3fd2b674a\" rel=\"nofollow noreferrer\">OFStandard::atof()</a> helper function :-)</p>\n"}], "owner": {"reputation": 41, "user_id": 6364481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c744e1de1e751f44b097b0d02fa47404?s=128&d=identicon&r=PG&f=1", "display_name": "RunesCarved", "link": "https://stackoverflow.com/users/6364481/runescarved"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1482690909, "creation_date": 1482344197, "last_edit_date": 1482665670, "question_id": 41269345, "link": "https://stackoverflow.com/questions/41269345/strange-error-initializing-a-qapplication-before-using-stdstod", "title": "Strange error initializing a QApplication before using std::stod", "body": "<p>I'm receiving an unexpected behavior in my current project.</p>\n\n<p>I use the DICOM library <code>dcmtk</code> to read information from some dicom files, and <code>Qt</code> to show the images.</p>\n\n<p>During the information extraction, I have to convert fields of the format \"&lt;64bit float>\\&lt;64 bit float>\" (Dicom Tag PixelSpacing). I split into 2 strings at \"\\\" and convert the strings into a double. So far, everything works fine.</p>\n\n<p>Well, almost: whenever I create a <code>QApplication</code> object <em>before</em> I convert the strings to doubles, it gives me <em>integers instead of doubles</em>. </p>\n\n<p>The code looks like this:</p>\n\n<pre><code>// Faulty situation\nDatabase db;\n\nQApplication app(&amp;argc, argv);\ndb.fill_from_source(source); // here i get ints instead of doubles\n\n// Rearrange code and recompile:\nDatabase db;\ndb.fill_from_source(source); // now it gets me doubles.\n\nQApplication app(&amp;argc, argv);\n\n// The fill function looks like this (simplified)\nvoid Database::fill_from_source(const Source&amp; source){\n\n    string s = source.get_pixel_spacing_string();\n    vector&lt;string&gt; s2 = split(s, \"\\\\\");\n\n    // get the double, that should not be integers!\n    double a = stod(s2[0]);\n    double b = stod(s2[1]);\n}\n</code></pre>\n\n<p>It confuses me even more, that it does work stepping through the code using QtCreator and GDB. However, when I run the executable, I get integers again.</p>\n\n<p>So I tracked the issue down to the <code>stod</code> operation: I get the right strings out of the DICOM file, but after <code>stod</code> the numbers after the dot are just truncated. Same behavior with <code>stdlib</code>'s <code>strtod</code></p>\n\n<p>Does the <code>QApplication</code> allocation does something with the <code>std::stod</code> function? Since everything happens while runtime, I do not understand how.</p>\n\n<p>Replacing <code>stod</code> with <code>QString::toDouble</code> resolves the issue...</p>\n\n<p>I'am using <code>gcc version 4.8.4 (Ubuntu 4.8.4-2ubuntu1~14.04.3), GNU ld (GNU Binutils for Ubuntu) 2.24</code>.</p>\n\n<p>Other code dependencies include <code>Eigen3</code>, <code>Boost.Python</code>. The code is built using a CMake project with QtCreator as IDE.</p>\n\n<p>Has anyone an idea where this problem comes from? Is this a Qt bug? </p>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1482347947, "post_id": 41269082, "comment_id": 69741596, "body": "Edit in a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  You&#39;ve given <i>zero</i> indication how you&#39;re uploading the FreeType glyphs to OpenGL or how your texture coordinates and matrix transforms are set up."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 6663693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4072a99a0e5134223736170f8a37ac37?s=128&d=identicon&r=PG&f=1", "display_name": "BinaryMatrix", "link": "https://stackoverflow.com/users/6663693/binarymatrix"}, "edited": false, "score": 0, "creation_date": 1482351107, "post_id": 41271034, "comment_id": 69743331, "body": "Doing this would flip the gyphs around but it would also flip my sprites around so it doesn&#39;t accomplish anything as i use the same render/shader pipeline to render sprites even if its a glyph, as you said its just a texture on a piece of geometry"}, {"owner": {"reputation": 27, "user_id": 6663693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4072a99a0e5134223736170f8a37ac37?s=128&d=identicon&r=PG&f=1", "display_name": "BinaryMatrix", "link": "https://stackoverflow.com/users/6663693/binarymatrix"}, "edited": false, "score": 0, "creation_date": 1482352214, "post_id": 41271034, "comment_id": 69743930, "body": "I could do this but it would be a very hacky, un-elegant way of achieving what i want. I an reluctant to do this method as in a video that i watched they also use the same technology as me (opengl, c+, freetype) and their gylphs were the correct way up. (video: <a href=\"https://www.youtube.com/watch?v=Rsdc6I80aFQ&amp;t=2168s\" rel=\"nofollow noreferrer\">youtube.com/watch?v=Rsdc6I80aFQ&amp;t=2168s</a>)"}], "tags": [], "owner": {"reputation": 144, "user_id": 6406284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/065f7bc50b0db43d626143fb9d98dbd1?s=128&d=identicon&r=PG&f=1", "display_name": "mamannon", "link": "https://stackoverflow.com/users/6406284/mamannon"}, "is_accepted": false, "score": 0, "last_activity_date": 1482350643, "creation_date": 1482350643, "answer_id": 41271034, "question_id": 41269082, "link": "https://stackoverflow.com/questions/41269082/freetype-text-upside-down/41271034#41271034", "title": "FreeType text upside down", "body": "<p>Those fonts are actually textures which are painted on a rectangle, which consists of two triangles. You need to rotate them by matrix multiplication. That's elementary OpenGL work you should start learning. </p>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 6663693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4072a99a0e5134223736170f8a37ac37?s=128&d=identicon&r=PG&f=1", "display_name": "BinaryMatrix", "link": "https://stackoverflow.com/users/6663693/binarymatrix"}, "edited": false, "score": 0, "creation_date": 1482354486, "post_id": 41271689, "comment_id": 69745155, "body": "i have changed to uvs so that 0,0 is the bottom left and the top right is 1,1 and i add them in the order that i add the vertices but know the glyphs are the correct way up but the sprites are upside down. As the two coordinate systems/conventions are different won&#39;t the glyphs and sprites always be flipped opposite."}, {"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "reply_to_user": {"reputation": 27, "user_id": 6663693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4072a99a0e5134223736170f8a37ac37?s=128&d=identicon&r=PG&f=1", "display_name": "BinaryMatrix", "link": "https://stackoverflow.com/users/6663693/binarymatrix"}, "edited": false, "score": 0, "creation_date": 1482362445, "post_id": 41271689, "comment_id": 69748545, "body": "Well, flipping the convention implies flipping the image data. Just trying to fix with via the vertex data is never going to work, unless you generate different data for glyphs and sprites."}, {"owner": {"reputation": 27, "user_id": 6663693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4072a99a0e5134223736170f8a37ac37?s=128&d=identicon&r=PG&f=1", "display_name": "BinaryMatrix", "link": "https://stackoverflow.com/users/6663693/binarymatrix"}, "edited": false, "score": 0, "creation_date": 1482436752, "post_id": 41271689, "comment_id": 69784120, "body": "I ended up having another go at trying to fix the problem once i read one of the answer that said they use different coordinate conventions and just generated different uvs for the glyphs and it works fine, i knew the problem and had a idea how to fix it but i wanted to see if there was a better, more elegant way that i could go about solving it. Thank you anyways!"}], "tags": [], "owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "is_accepted": false, "score": 0, "last_activity_date": 1482353476, "creation_date": 1482353476, "answer_id": 41271689, "question_id": 41269082, "link": "https://stackoverflow.com/questions/41269082/freetype-text-upside-down/41271689#41271689", "title": "FreeType text upside down", "body": "<blockquote>\n  <p>However the glyphs appear to be upside down and my sprites are the correct way up.</p>\n</blockquote>\n\n<p>THis is because you are using different conventions than freetype. Classical OpenGL uses (0,0) as the <em>bottom</em> left origin of the texture, while you are using this as top-left.</p>\n\n<p>So if you want to be able to use the same code to generate the vertex data for both freetype glyuphs and your sprites, you have to decide on one convention.</p>\n\n<p>Note that these conventions mean nothing, (0,0) is just the first texel that you feed into <code>glTexImage</code>, if that is to be top or bottom is completely up to you.</p>\n"}, {"tags": [], "owner": {"reputation": 27, "user_id": 6663693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4072a99a0e5134223736170f8a37ac37?s=128&d=identicon&r=PG&f=1", "display_name": "BinaryMatrix", "link": "https://stackoverflow.com/users/6663693/binarymatrix"}, "is_accepted": false, "score": 0, "last_activity_date": 1482436854, "creation_date": 1482436854, "answer_id": 41290825, "question_id": 41269082, "link": "https://stackoverflow.com/questions/41269082/freetype-text-upside-down/41290825#41290825", "title": "FreeType text upside down", "body": "<p>I ended up just generating different uvs for the glyphs so that they got applied to the quad the correct way up.</p>\n"}], "owner": {"reputation": 27, "user_id": 6663693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4072a99a0e5134223736170f8a37ac37?s=128&d=identicon&r=PG&f=1", "display_name": "BinaryMatrix", "link": "https://stackoverflow.com/users/6663693/binarymatrix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 869, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1482436854, "creation_date": 1482343267, "last_edit_date": 1482349492, "question_id": 41269082, "link": "https://stackoverflow.com/questions/41269082/freetype-text-upside-down", "title": "FreeType text upside down", "body": "<p>I am working on a OpenGL and C++ project (a little 2D game) and i am currently implementing font rendering. I am using FreeType to handle font file and glyphs and i have successfully (kinda) rendered the glyphs onto the screen. However the glyphs appear to be upside down and my sprites are the correct way up.</p>\n\n<p>Texture coords for a sprite (these go into a vbo then into a vao)</p>\n\n<pre><code>vec2 uv_topLeft(0.0, 0.0);\nvec2 uv_topRight(1.0, 0.0);\nvec2 uv_bottomRight(1.0, 1.0);\nvec2 uv_bottomLeft(0.0, 1.0);\n\nuvs.push_back(uv_topLeft);\nuvs.push_back(uv_bottomLeft);\nuvs.push_back(uv_bottomRight);\nuvs.push_back(uv_bottomRight);\nuvs.push_back(uv_topRight);\nuvs.push_back(uv_topLeft);\n</code></pre>\n\n<p>I just have a projection matrix whcih i use to transform the vertex positions to NDC coordinates. </p>\n\n<p>Projection matrix:(WINDOW_WIDTH=960, WINDOW_HEIGHT=640)<br>\n    glm::ortho(0.0, (double)WINDOW_WIDTH, 0.0, (double)WINDOW_HEIGHT);</p>\n\n<p><a href=\"https://i.stack.imgur.com/RQinG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RQinG.png\" alt=\"Picture of game with sprites and text\"></a></p>\n\n<p>I saw somewhere that openGL and Freetype use different coordinate systems is that true?</p>\n"}, {"tags": ["c++", "c++11", "memory", "c++-standard-library", "memset"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1482343102, "post_id": 41268994, "comment_id": 69738861, "body": "FWIW MSVS uses template magic to determine if it can use memset and memcpy inside containers.  Not sure if the algo&#39;s are implemented that way as well but it is not a leap to think they would have.  That said, code it both ways and measure.  That will give you the best answer."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1482343192, "post_id": 41268994, "comment_id": 69738911, "body": "@ChrisBeck: See edit."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1482343251, "post_id": 41268994, "comment_id": 69738942, "body": "@NathanOliver: Ok, but - memset is also a function which needs to be implemented somehow."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1482343312, "post_id": 41268994, "comment_id": 69738973, "body": "(a) <code>std::fill_n(ptr, n, 0)</code> should do the same thing as <code>memset(ptr, 0, n * sizeof(*ptr))</code> and (b) only for integral types."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1482343445, "post_id": 41268994, "comment_id": 69739050, "body": "@Barry: (a) Fixed the missing multiplication by the size, sorry. (b) I agree that it should, but - when/for which compilers/settings can I assume that it does?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1482343510, "post_id": 41268994, "comment_id": 69739096, "body": "@einpoklum That&#39;s not a compiler setting thing. That equivalence is simply only true under those conditions. If <code>ptr</code> were a <code>string*</code>, then <code>fill_n</code> is not allowed for instance."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1482343522, "post_id": 41268994, "comment_id": 69739103, "body": "Note that the two uses are semantically different, e.g., for pointers: a null pointer isn&#39;t necessarily represented using all zero bits!"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 3, "creation_date": 1482343982, "post_id": 41268994, "comment_id": 69739384, "body": "A nullpointer isn&#39;t necessarily all bits 0. I&#39;m not sure about the standard&#39;s requirements on floating point types, but I think it&#39;s the same story there. I.e., <code>std::fill_n</code>, which fills with logical nullvalues, is not the same as <code>memset</code> with 0, in general."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1482345618, "post_id": 41268994, "comment_id": 69740313, "body": "In my experience, most optimizers <i>are</i> smart enough to recognize that a for-loop or standard algorithm is equivalent to one of the compiler intrinsics/__builtins, and generate the same code. I wouldn&#39;t bother unless the code is caught by the profiler."}], "answers": [{"tags": [], "owner": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "is_accepted": false, "score": 6, "last_activity_date": 1482345487, "creation_date": 1482345487, "answer_id": 41269714, "question_id": 41268994, "link": "https://stackoverflow.com/questions/41268994/what-performance-can-i-expect-from-stdfill-nptr-n-0-relative-to-memset/41269714#41269714", "title": "What performance can I expect from std::fill_n(ptr, n, 0) relative to memset?", "body": "<p>The answer depends on your implementation of the standard library.</p>\n\n<p>MSVC for example has several implementations of <code>std::fill_n</code> based on the types of what you're trying to fill.</p>\n\n<p>Calling <code>std::fill_n</code> with a <code>char*</code> or <code>signed char*</code> or <code>unsigned char*</code> and it will directly call <code>memset</code> to fill the array.</p>\n\n<pre><code>inline char *_Fill_n(char *_Dest, size_t _Count, char _Val)\n{   // copy char _Val _Count times through [_Dest, ...)\n_CSTD memset(_Dest, _Val, _Count);\nreturn (_Dest + _Count);\n}\n</code></pre>\n\n<p>If you call with another type, it will fill in a loop:</p>\n\n<pre><code>template&lt;class _OutIt,\nclass _Diff,\nclass _Ty&gt; inline\n_OutIt _Fill_n(_OutIt _Dest, _Diff _Count, const _Ty&amp; _Val)\n{   // copy _Val _Count times through [_Dest, ...)\nfor (; 0 &lt; _Count; --_Count, (void)++_Dest)\n    *_Dest = _Val;\nreturn (_Dest);\n}\n</code></pre>\n\n<p>The best way to determine the overhead on your particular compiler and standard library implementation would be to profile the code with both calls.</p>\n"}, {"comments": [{"owner": {"reputation": 8864, "user_id": 15139, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/058ae4cb817981832d6970da3c56ac39?s=128&d=identicon&r=PG", "display_name": "rpattabi", "link": "https://stackoverflow.com/users/15139/rpattabi"}, "edited": false, "score": 0, "creation_date": 1598017122, "post_id": 41278085, "comment_id": 112329083, "body": "Nice quick technique using godbolt to compare the assembly code produced for different versions of the function. Thanks!"}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 2, "last_activity_date": 1482392663, "creation_date": 1482392663, "answer_id": 41278085, "question_id": 41268994, "link": "https://stackoverflow.com/questions/41268994/what-performance-can-i-expect-from-stdfill-nptr-n-0-relative-to-memset/41278085#41278085", "title": "What performance can I expect from std::fill_n(ptr, n, 0) relative to memset?", "body": "<p>For all all scenarios where <code>memset</code> is appropriate (i.e. all your objects are PODs) you will most likely find that the two statements are equivalent when any level of optimisation is enabled.</p>\n\n<p>For scenarios where <code>memset</code> is not appropriate, comparison is moot because the use of <code>memset</code> would result in an incorrect program.</p>\n\n<p>You can easily check for yourself using tools such as godbolt (and many others):</p>\n\n<p>for example, on gcc6.2 these two functions generate literally identical code with optimisation level -O3:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;cstring&gt;\n\n__attribute__((noinline))\n  void test1(int (&amp;x) [100])\n{\n  std::fill_n(&amp;x[0], 100, 0);\n}\n\n__attribute__((noinline))\n  void test2(int (&amp;x) [100])\n{\n  std::memset(&amp;x[0], 0, 100 * sizeof(int));\n}\n\nint main()\n{\n  int x[100];\n  test1(x);\n  test2(x);\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/g/JIwI5l\" rel=\"nofollow noreferrer\">https://godbolt.org/g/JIwI5l</a></p>\n"}], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1388, "favorite_count": 0, "answer_count": 2, "score": 8, "last_activity_date": 1482392663, "creation_date": 1482342936, "last_edit_date": 1495535435, "question_id": 41268994, "link": "https://stackoverflow.com/questions/41268994/what-performance-can-i-expect-from-stdfill-nptr-n-0-relative-to-memset", "title": "What performance can I expect from std::fill_n(ptr, n, 0) relative to memset?", "body": "<p>For an iterator <code>ptr</code> which is a pointer, <code>std::fill_n(ptr, n, 0)</code> should do the same thing as <code>memset(ptr, 0, n * sizeof(*ptr))</code> (but see @KeithThompson's comment on <a href=\"https://stackoverflow.com/a/9146410/1593077\">this answer</a>).</p>\n\n<p>For a C++ compiler in C++11/C++14/C++17 mode, under which conditions can I expect these to be compiled to the same code? And when/if they don't compile to the same code, is there a significant performance difference with -O0? -O3?</p>\n\n<p><strong>Note:</strong> Of course some/most of the answer might be compiler-specific. I'm only interested in one or two specific compilers, but please write about the compiler(s) for which you know the answer.</p>\n"}, {"tags": ["c++", "valgrind"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1482344764, "post_id": 41268913, "comment_id": 69739820, "body": "So, the question is, why is valgrind confused about the effect of code whose behavior is undefined? <code>A[i].connections</code> has not been constructed, so there is nothing sensible that you can do with it."}], "answers": [{"comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1482343334, "post_id": 41268977, "comment_id": 69738987, "body": "<code>A=(node*)malloc((size)*sizeof(node));</code> the op allocates space for 10 nodes, not 1, this is not equivalent code. (<code>for(i=0;i&lt;size;i++) {</code> Then they use all 10 as well ...)"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1482343619, "post_id": 41268977, "comment_id": 69739178, "body": ":-) - we are right as to why valgrind complains, I did not read the fact that he attempted to allocate an array of node objects."}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 0, "last_activity_date": 1482343740, "last_edit_date": 1482343740, "creation_date": 1482342872, "answer_id": 41268977, "question_id": 41268913, "link": "https://stackoverflow.com/questions/41268913/valgrind-complains-about-using-conditional-jumps-that-depend-on-uninitialized-by/41268977#41268977", "title": "Valgrind complains about using conditional jumps that depend on uninitialized bytes", "body": "<p>connections inside node is not set. This is because you use malloc to create yr Node instance. That just gives you raw uninitialized memory. You MUST use new to allocate objects in c++ programs not malloc. New allocates the memory then runs the constructor</p>\n\n<p>ie</p>\n\n<pre><code>node *A = new Node();\n</code></pre>\n\n<p>and delete to release it - not free</p>\n\n<p>In fact you need an array of Node objects. So do what ben says. Make a vector of them</p>\n\n<p>But anyway, never ever use malloc / free in a c++ program unless you are really sure you know what you are doing</p>\n"}, {"comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1482343223, "post_id": 41269045, "comment_id": 69738925, "body": "he doesnt want a vector of nodes - he wants a node object that has inside it a vector of ints"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1482343277, "post_id": 41269045, "comment_id": 69738957, "body": "@pm100, No, he wants 10 <code>nodes</code>. Therefore a <code>vector</code> of nodes is perfect here."}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": false, "score": 0, "last_activity_date": 1482343119, "creation_date": 1482343119, "answer_id": 41269045, "question_id": 41268913, "link": "https://stackoverflow.com/questions/41268913/valgrind-complains-about-using-conditional-jumps-that-depend-on-uninitialized-by/41269045#41269045", "title": "Valgrind complains about using conditional jumps that depend on uninitialized bytes", "body": "<p>It is likely that it is because <code>malloc</code> does not call the constructor of <code>node</code>. Since this is c++, <code>node</code> is not a struct as it was in c, it is a class. It has an implicit constructor, which needs to be called at instantiation. This means the vector is also not created properly.</p>\n\n<p>You should do 2 things:</p>\n\n<ol>\n<li>Avoid calling new, there is no need in this case, just use <code>node A[10]</code> or better yet <code>std::vector&lt;node&gt; A</code>.</li>\n<li>If you cant do that always use <code>new</code> in c++, so that the objects are created correctly.</li>\n</ol>\n\n<p>If you absolutely must use <code>malloc</code>, then you will need to call the <code>placement new</code> to construct your struct anyway (<code>new (&amp;A[0]) node()</code>), so really just dont use <code>malloc</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 1102, "user_id": 3684240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a05f5b5980c5eebbd2e200dc5157f094?s=128&d=identicon&r=PG&f=1", "display_name": "user3684240", "link": "https://stackoverflow.com/users/3684240/user3684240"}, "is_accepted": true, "score": 2, "last_activity_date": 1482343682, "last_edit_date": 1482343682, "creation_date": 1482343227, "answer_id": 41269073, "question_id": 41268913, "link": "https://stackoverflow.com/questions/41268913/valgrind-complains-about-using-conditional-jumps-that-depend-on-uninitialized-by/41269073#41269073", "title": "Valgrind complains about using conditional jumps that depend on uninitialized bytes", "body": "<p>No, it is not safe to use <code>malloc</code> here.</p>\n\n<p><code>malloc</code> is the C way of allocating memory. It doesn't take C++ constructors into account. </p>\n\n<p><code>calloc</code> is also C, but it zero-initializes your memory. That's why <code>std::vector</code> works (it is, however, also undefined behavior, because there may be a <code>vector</code> implementation which needs to be initialized to something else than zero).</p>\n\n<p>There are many ways to get around that problem:</p>\n\n<ul>\n<li><p>Use <code>new Node</code> instead.</p></li>\n<li><p>If you cannot do that, you can at least do a placement new on the memory that <code>malloc</code> returns (<code>new (ptr) Node()</code>).</p></li>\n<li><p>Use smart pointers and <code>make_shared</code> or <code>make_unique</code>. That way, you don't even need to take care of freeing your memory.</p></li>\n<li><p>The best way is probably to use <code>std::vector</code> (as suggested in another answer) or <code>std::array</code>.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "is_accepted": false, "score": 1, "last_activity_date": 1482345530, "creation_date": 1482345530, "answer_id": 41269728, "question_id": 41268913, "link": "https://stackoverflow.com/questions/41268913/valgrind-complains-about-using-conditional-jumps-that-depend-on-uninitialized-by/41269728#41269728", "title": "Valgrind complains about using conditional jumps that depend on uninitialized bytes", "body": "<p>Since you are using vector&lt;>, you should always avoid malloc and free as they don't initialize constructors and instead use new and delete and smart pointers.</p>\n\n<p>However, there is rarely a need to use new/delete since vector accomplishes the same thing with a similar memory and access footprint.</p>\n\n<p>This implementation wraps <code>node</code> in a vector and eliminates direct memory allocation as it is done automatically by vector&lt;> while maintaining the same, traditional usage style.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nstruct node {\n    int key;\n    vector&lt;int&gt; connections;\n};\n\nint main(void) {\n    // original with similar memory footprint and access characteristics using modern C++ vector&lt;&gt;\n    int size = 10;\n    vector&lt;node&gt; A(size);\n\n    int i;\n    for (i = 0; i&lt;size; i++) {\n        A[i].key = i;\n        if (i % 2 == 0) A[i].connections.push_back(i);\n    }\n\n    for (i = 0; i&lt;size; i++) {\n        if (A[i].connections.size() &gt; 0) {\n            cout &lt;&lt; A[i].key &lt;&lt; \"---\" &lt;&lt; A[i].connections.size() &lt;&lt; endl;\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1789, "user_id": 4038196, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/071217da03754ce35d099a0e889f95c2?s=128&d=identicon&r=PG&f=1", "display_name": "jsguy", "link": "https://stackoverflow.com/users/4038196/jsguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 41269073, "answer_count": 4, "score": 0, "last_activity_date": 1482345530, "creation_date": 1482342613, "question_id": 41268913, "link": "https://stackoverflow.com/questions/41268913/valgrind-complains-about-using-conditional-jumps-that-depend-on-uninitialized-by", "title": "Valgrind complains about using conditional jumps that depend on uninitialized bytes", "body": "<p>I had this problem appear in a module of a larger program I am working on and here is a small simulation:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nstruct node{\n    int key;\n    vector&lt;int&gt; connections;\n};\n\nint main(void){\n\n    int size = 10;\n    node *A;\n\n    A=(node*)malloc((size)*sizeof(node));\n\n    int i;\n    for(i=0;i&lt;size;i++){\n        A[i].key = i;\n        if(i%2 == 0) A[i].connections.push_back(i);\n    }\n\n    for(i=0;i&lt;size;i++) {\n        if(A[i].connections.size() &gt; 0) {\n            cout &lt;&lt; A[i].key &lt;&lt; \"---\" &lt;&lt; A[i].connections.size() &lt;&lt; endl;\n        }\n    }\n\n    free(A);\n\n    return 0;\n}\n</code></pre>\n\n<p>This is a small part of what I get when running <code>valgrind ./testCode</code></p>\n\n<pre><code>==30433== Conditional jump or move depends on uninitialised value(s)\n==30433==    at 0x400F63: std::vector&lt;int, std::allocator&lt;int&gt; &gt;::push_back(int const&amp;) (stl_vector.h:915)\n==30433==    by 0x400DF0: main (testCode.cpp:25)\n</code></pre>\n\n<p>from my understanding the problem is that there is an if statement inside the <code>push_back</code> function of the vector that uses some value that is uninitialized. I am not sure what exactly. After playing around, it turns out the problem is that I use <code>malloc</code>. If I use <code>calloc</code> I won't get any warnings at all. The same if I use <code>new</code>. However in all cases the program behaves exactly the same way. What is happening here? Is it safe to use <code>malloc</code> even though I get all these warnings?</p>\n"}, {"tags": ["c++", "class", "private-members"], "comments": [{"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1482342337, "post_id": 41268827, "comment_id": 69738439, "body": "The comma is not a statement separator in C++. Perhaps you were looking for a semicolon? Also consider a member initialization list. Also, the code you&#39;re using here in <code>main</code> is dangerous and broken. Why are you doing this?"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 3, "creation_date": 1482342353, "post_id": 41268827, "comment_id": 69738450, "body": "It is <a href=\"https://stackoverflow.com/questions/12378271/what-does-an-object-look-like-in-memory\">fairly dangerous</a> to try to assign to specific fields in objects using pointers and offsets, I wouldn&#39;t depend on that working in general cases."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1482342405, "post_id": 41268827, "comment_id": 69738478, "body": "@CodyGray It looks like the hack they are doing in <code>main</code> is an attempted workaround to assigning to a <code>private</code> member using (incorrectly) assumed memory layout of the object"}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1482342434, "post_id": 41268827, "comment_id": 69738496, "body": "There could be padding introduced between the class members. I think this is probably undefined behavior. What is your main objective? This seems like an xy problem at the moment."}, {"owner": {"reputation": 1250, "user_id": 5190087, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/lMreJ.jpg?s=128&g=1", "display_name": "Swapnil", "link": "https://stackoverflow.com/users/5190087/swapnil"}, "edited": false, "score": 0, "creation_date": 1482342565, "post_id": 41268827, "comment_id": 69738569, "body": "Most of the time this question is asked in interview and hence was making hand dirty."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1482342779, "post_id": 41268827, "comment_id": 69738682, "body": "@Swapnil You simply have <i>undefined behavior</i>, so asking about such stuff is pretty futile."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1482342796, "post_id": 41268827, "comment_id": 69738702, "body": "If someone ask you this kind of stuff in an interview, a reasonable reaction would be to say &quot;thank you&quot; and walk away. You don&#39;t want to work there."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1482342844, "post_id": 41268827, "comment_id": 69738725, "body": "In some circumstances (the class is POD and standard-layout) it is possible to use <code>offsetof()</code>.   However, the code as shown has undefined behaviour, since there is no guarantee about what is accessed by dereferencing <code>ptr+sizeof(std::string)</code>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1482344900, "post_id": 41268827, "comment_id": 69739892, "body": "Re: &quot;we can set the private variable of class like this&quot; -- no, you can&#39;t. There is nothing in the C++ language definition that says this will work. The fact that it happens to do what you expect is just bad luck."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1482346099, "post_id": 41268827, "comment_id": 69740593, "body": "@Pete Becker - the OP is unclear, but it looks like the code is not doing what he expects.  Which isn&#39;t that surprising, really, since there is no guarantee that it will."}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 2, "last_activity_date": 1482342647, "creation_date": 1482342647, "answer_id": 41268925, "question_id": 41268827, "link": "https://stackoverflow.com/questions/41268827/way-to-set-private-variable-of-class-having-more-than-one-member-variable/41268925#41268925", "title": "Way to set private variable of class having more than one member variable", "body": "<h3>Why it doesn't work</h3>\n\n<p>Really just never write code like this. There is a way to set private data and that is via public members on the class. Otherwise, it's private for a reason. This being C++, there are actually non-UB ways of doing this but I'm not going to link them here because don't. </p>\n\n<h3>Why it doesn't work, specifically</h3>\n\n<p>Hint: What does <code>ptr + sizeof(string)</code> actually mean, for <code>ptr</code> being an <code>int*</code>? What is <code>ptr</code> pointing to after this line?</p>\n"}, {"comments": [{"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1482342865, "post_id": 41268948, "comment_id": 69738737, "body": "No, besides ignoring any possible padding, that violates <a href=\"http://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule\">the strict aliasing rule</a> and is undefined behavior."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1482343106, "post_id": 41268948, "comment_id": 69738863, "body": "@AndrewHenle Isn&#39;t there an exception for <code>char*</code>?"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1482343178, "post_id": 41268948, "comment_id": 69738900, "body": "@Muscampester It&#39;s being cast back to an <code>int *</code>, then dereferenced."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1482343255, "post_id": 41268948, "comment_id": 69738943, "body": "@AndrewHenle Yes, but the data at that address is an <code>int</code> (or at least it should be if we ignore the padding issue). So I&#39;m curious to learn if the strict aliasing rule is being broken here."}, {"owner": {"reputation": 1250, "user_id": 5190087, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/lMreJ.jpg?s=128&g=1", "display_name": "Swapnil", "link": "https://stackoverflow.com/users/5190087/swapnil"}, "edited": false, "score": 0, "creation_date": 1482343291, "post_id": 41268948, "comment_id": 69738963, "body": "Yes as I said this is not going to be a real life solution. Thanks your solution works and clear why it is not working with int."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1482343632, "post_id": 41268948, "comment_id": 69739188, "body": "@Muscampester In general, there&#39;s no way to ensure that <code>ptr+sizeof(string)</code>, given <code>char *ptr</code>, points to an actual <code>int</code> value.  Doing that ignores any alignment restrictions on the member variable or padding in the class structure.  Even <code>offsetof</code> isn&#39;t guaranteed to produce the proper offset in some cases."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1482343824, "post_id": 41268948, "comment_id": 69739293, "body": "@AndrewHenle So, in summary it is only the padding that is at issue here?"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 2, "creation_date": 1482343864, "post_id": 41268948, "comment_id": 69739314, "body": "@Muscampester Given that alignment restrictions drive padding, I&#39;d say that&#39;s accurate."}], "tags": [], "owner": {"reputation": 12794, "user_id": 865643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mG7s3.jpg?s=128&g=1", "display_name": "noelicus", "link": "https://stackoverflow.com/users/865643/noelicus"}, "is_accepted": true, "score": 4, "last_activity_date": 1482342880, "last_edit_date": 1482342880, "creation_date": 1482342742, "answer_id": 41268948, "question_id": 41268827, "link": "https://stackoverflow.com/questions/41268827/way-to-set-private-variable-of-class-having-more-than-one-member-variable/41268948#41268948", "title": "Way to set private variable of class having more than one member variable", "body": "<p>I reckon this'll solve it:</p>\n\n<pre><code>char* ptr = (char*)&amp;t;\n*(int*)(ptr+sizeof(string)) = 10;\n</code></pre>\n\n<p>sizeof will return the size in bytes. Pointer increments will go for the size of the object its pointing at. char is a byte in size.</p>\n\n<p>If you want to read up on it: <a href=\"https://www.tutorialspoint.com/cprogramming/c_pointer_arithmetic.htm\" rel=\"nofollow noreferrer\">C pointer arithmetic article</a></p>\n\n<p>Just to reiterate what I think you've said: you're just hacking around as a point of learning, and you know there's no way you should ever do this in real life... !!</p>\n"}, {"tags": [], "owner": {"reputation": 2389, "user_id": 1991678, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a9f5d4caa1c8059acdb6582c8429bc3f?s=128&d=identicon&r=PG&f=1", "display_name": "default", "link": "https://stackoverflow.com/users/1991678/default"}, "is_accepted": false, "score": 1, "last_activity_date": 1482342789, "creation_date": 1482342789, "answer_id": 41268956, "question_id": 41268827, "link": "https://stackoverflow.com/questions/41268827/way-to-set-private-variable-of-class-having-more-than-one-member-variable/41268956#41268956", "title": "Way to set private variable of class having more than one member variable", "body": "<p>The pointer arithmetic should be done with byte pointers, not integer pointers.   </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nclass Test\n{\nprivate:\n    string s;\n    int data;\npublic:\n    Test() { s = \"New\", data = 0; }\n    int getData() { return data; }\n};\n\nint main()\n{\n   Test t;\n   char* ptr = (char*)&amp;t;\n   *(int*)(ptr+sizeof(string)) = 10;\n   cout &lt;&lt; t.getData();\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1250, "user_id": 5190087, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/lMreJ.jpg?s=128&g=1", "display_name": "Swapnil", "link": "https://stackoverflow.com/users/5190087/swapnil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 41268948, "answer_count": 3, "score": 2, "last_activity_date": 1482343111, "creation_date": 1482342261, "last_edit_date": 1482343111, "question_id": 41268827, "link": "https://stackoverflow.com/questions/41268827/way-to-set-private-variable-of-class-having-more-than-one-member-variable", "title": "Way to set private variable of class having more than one member variable", "body": "<p>As we can set the private variable of class like <a href=\"http://www.geeksforgeeks.org/can-access-private-data-members-class-without-using-member-friend-function/\" rel=\"nofollow noreferrer\">this</a></p>\n\n<p>I was trying to set the private member variable int for below case.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nclass Test\n{\nprivate:\n    string s;\n    int data;\npublic:\n    Test() : s(\"New\") , data(0) { }\n    int getData() { return data; }\n};\n\nint main()\n{\n    Test t;\n    int* ptr = (int*)&amp;t;\n    *(ptr+sizeof(string)) = 10;\n    cout &lt;&lt; t.getData();\n    return 0;\n}\n</code></pre>\n\n<p>But it is not able to print 10.</p>\n\n<p>I know there are other way to set this using setter function, but was checking to set using method shown <a href=\"http://www.geeksforgeeks.org/can-access-private-data-members-class-without-using-member-friend-function/\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p><strong>This is purely hack and not valid way though to learn.</strong></p>\n"}, {"tags": ["c++", "qt", "qwindow"], "comments": [{"owner": {"reputation": 1684, "user_id": 1884836, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c3397c763bbffd54fffc5d4a308db03e?s=128&d=identicon&r=PG", "display_name": "Ispas Claudiu", "link": "https://stackoverflow.com/users/1884836/ispas-claudiu"}, "edited": false, "score": 0, "creation_date": 1482406602, "post_id": 41268821, "comment_id": 69766076, "body": "You want to have a frameless window?"}, {"owner": {"reputation": 21, "user_id": 7326912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a91aa428c378b743a0e75d5148416f?s=128&d=identicon&r=PG&f=1", "display_name": "M. 4", "link": "https://stackoverflow.com/users/7326912/m-4"}, "edited": false, "score": 0, "creation_date": 1482410625, "post_id": 41268821, "comment_id": 69768477, "body": "Yes correct, but i found the solution :)"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 7326912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a91aa428c378b743a0e75d5148416f?s=128&d=identicon&r=PG&f=1", "display_name": "M. 4", "link": "https://stackoverflow.com/users/7326912/m-4"}, "is_accepted": false, "score": 1, "last_activity_date": 1482408152, "creation_date": 1482408152, "answer_id": 41282775, "question_id": 41268821, "link": "https://stackoverflow.com/questions/41268821/qwindow-hint-doesnt-work/41282775#41282775", "title": "QWindow Hint doesn&#39;t work", "body": "<p>Okay, I've found it. When you are using the </p>\n\n<p><code>ui-&gt;side-&gt;addSubWindow(container);</code></p>\n\n<p>command, you have to declare the WindowsFlag directly in addSubWindow. In my case this helps: \nChange:</p>\n\n<p><code>ui-&gt;side-&gt;addSubWindow(container)</code> </p>\n\n<p>to</p>\n\n<p><code>ui-&gt;side-&gt;addSubWindow(container,Qt::SubWindow | Qt::FramelessWindowHint);</code></p>\n"}], "owner": {"reputation": 21, "user_id": 7326912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a91aa428c378b743a0e75d5148416f?s=128&d=identicon&r=PG&f=1", "display_name": "M. 4", "link": "https://stackoverflow.com/users/7326912/m-4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1482408152, "creation_date": 1482342239, "last_edit_date": 1482406399, "question_id": 41268821, "link": "https://stackoverflow.com/questions/41268821/qwindow-hint-doesnt-work", "title": "QWindow Hint doesn&#39;t work", "body": "<p>I've tried to hide the bar of an QWindow object, but it doesn't  work.\nThe aim is, to show a scene from Ogre3D over an QWindows object in a MDI Area.</p>\n\n<p>This is the code in the MainWindow:</p>\n\n<pre><code>ui-&gt;setupUi(this);\nQWindow *pcwindow = new QWindow();\npcwindow-&gt;setHeight(ui-&gt;side-&gt;height());\npcwindow-&gt;setWidth(ui-&gt;side-&gt;width());\npcwindow-&gt;setFlags(Qt::Window | Qt::CustomizeWindowHint);\npcwindow-&gt;setFlags(Qt::Window | Qt::FramelessWindowHint);\napp = new TutorialApplication;\ntry\n{\n    app-&gt;Windowheight = pcwindow-&gt;height();\n    app-&gt;Windowwidth = pcwindow-&gt;width();\n    app-&gt;WindowsID = pcwindow-&gt;winId();\n    app-&gt;go();\n}catch(Ogre::Exception&amp; e) {\n           ...\n        }\n\nQWidget *container = QWidget::createWindowContainer(pcwindow);\ncontainer-&gt;setMinimumHeight(pcwindow-&gt;height());\ncontainer-&gt;setMinimumWidth(pcwindow-&gt;width());\ncontainer-&gt;setWindowFlags(Qt::SubWindow | Qt::CustomizeWindowHint);\nui-&gt;side-&gt;addSubWindow(container);\n\nQTimer *timer = new QTimer(this);\ntimer-&gt;setInterval(10);\ntimer-&gt;start();\nconnect(timer, SIGNAL (timeout()), app, SLOT (RenderOneFrame()));\n</code></pre>\n\n<p>And it looks like this <a href=\"https://i.stack.imgur.com/37cf2.png\" rel=\"nofollow noreferrer\">Screenshot</a></p>\n\n<p>Does somebody know what is wrong? Thank you for your support.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1482344419, "post_id": 41268750, "comment_id": 69739632, "body": "You have some UB when j== 6 in <code>if (PlateNumberArray[i] == PlateNumberArray[j])</code> Valid indices are 0 .. 5."}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 7326941, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-km3wUzioRXU/AAAAAAAAAAI/AAAAAAAABAk/2-H9ZSsBXEY/photo.jpg?sz=128", "display_name": "BlacKnight BK", "link": "https://stackoverflow.com/users/7326941/blacknight-bk"}, "edited": false, "score": 0, "creation_date": 1482343955, "post_id": 41268858, "comment_id": 69739369, "body": "I have tried that, still didn&#39;t work :("}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "reply_to_user": {"reputation": 105, "user_id": 7326941, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-km3wUzioRXU/AAAAAAAAAAI/AAAAAAAABAk/2-H9ZSsBXEY/photo.jpg?sz=128", "display_name": "BlacKnight BK", "link": "https://stackoverflow.com/users/7326941/blacknight-bk"}, "edited": false, "score": 0, "creation_date": 1482354691, "post_id": 41268858, "comment_id": 69745260, "body": "Reset it to <code>i+1</code>, not 0."}], "tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": false, "score": 1, "last_activity_date": 1482342393, "creation_date": 1482342393, "answer_id": 41268858, "question_id": 41268750, "link": "https://stackoverflow.com/questions/41268750/counting-different-elements-in-an-array/41268858#41268858", "title": "Counting different elements in an array", "body": "<p>You need to reset <code>j</code> each time you increment <code>i</code>.</p>\n"}], "owner": {"reputation": 105, "user_id": 7326941, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-km3wUzioRXU/AAAAAAAAAAI/AAAAAAAABAk/2-H9ZSsBXEY/photo.jpg?sz=128", "display_name": "BlacKnight BK", "link": "https://stackoverflow.com/users/7326941/blacknight-bk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1482342570, "answer_count": 1, "score": -3, "last_activity_date": 1482344998, "creation_date": 1482341994, "last_edit_date": 1482344998, "question_id": 41268750, "link": "https://stackoverflow.com/questions/41268750/counting-different-elements-in-an-array", "closed_reason": "Not suitable for this site", "title": "Counting different elements in an array", "body": "<p>I got this really easy project however i got stuck in a simple issue.</p>\n\n<p>User enters a number not that is larger than 99 and smaller than 1 000 000.</p>\n\n<p>I am supposed to get the number of digits in that number and how many times each one occurs</p>\n\n<p>E.g: 112233 = 6 digits and 3 different numbers</p>\n\n<p>I was able to do the first part however my second part of part is not working.</p>\n\n<p>Here is the part not working:</p>\n\n<pre><code>int getDiff(int CLP, int Num)\n{\n\n    int counter = 0, i = 0, j = 0;\n\n    for (int x = CLP, i = 0; x &gt;= 1; x /= 10, i++) {\n        PlateNumberArray[i] = x % 10;\n\n        cout &lt;&lt; endl\n             &lt;&lt; \"Test===&gt;\" &lt;&lt; PlateNumberArray[i] &lt;&lt; endl;\n\n    } // end of \"x = CLP\" for loop\n\n    while (i &lt; Num) {\n        j = 0;\n        while (j &lt;= Num) {\n            if (PlateNumberArray[i] == PlateNumberArray[j])\n                NumberCounter[i]++;\n            j++;\n        } //end of while(j &lt;= i)\n        i++;\n    } //end of while(i &lt; Num)\n\n    for (int i = 0; i &lt; Num; i++)\n        counter += NumberCounter[i];\n\n    return counter;\n}\n</code></pre>\n\n<p>if for example my input is 112233 the return value should be 3, however i am getting 12</p>\n\n<p>if input is 1122 the return value should be 2, however i am getting 8</p>\n\n<p>Here is the whole program i have written so far:</p>\n\n<pre><code>/*====================================================================================\nHeaders and namespace\n======================================================================================*/\n\n#include &lt;iostream&gt;\n\nusing namespace std;\n\n/*====================================================================================\nPrototypes list\n======================================================================================*/\n\nint getNum(int); //This function checks how many digits there are in a plate number\nint getDiff(int, int); //This function checks how many different numbers are there in the plate number\n\n/*====================================================================================\nGlobal variables list\n======================================================================================*/\n\nint PlateNumberArray[6];\nint NumberCounter[6];\n\n/*====================================================================================\nmain Function\n======================================================================================*/\nint main()\n{\n\n    //Declaring variables\n\n    int CLP;\n\n    //End of Vriables Declration\n\n    cout &lt;&lt; endl\n         &lt;&lt; \"=============================\" &lt;&lt; endl;\n\n    cout &lt;&lt; \"Enter your vehicle's plate number\" &lt;&lt; endl;\n\n    do {\n        cin &gt;&gt; CLP;\n\n        if (CLP &gt;= 1000000)\n            cout &lt;&lt; \"Plate number can be no longer than 6 digits, please re-enter\" &lt;&lt; endl;\n        else if (CLP &lt; 100 &amp;&amp; CLP &gt;= 0)\n            cout &lt;&lt; \"Plate number can not be less than 3 digits, please re-eneter\" &lt;&lt; endl;\n        else if (CLP &lt; 0)\n            cout &lt;&lt; \"Plate number can not be a negative, please re-eneter\" &lt;&lt; endl;\n\n    } while (CLP &gt;= 1000000 || CLP &lt; 100);\n\n    int Num = getNum(CLP);\n    cout &lt;&lt; getDiff(CLP, Num);\n\n    return 0;\n}\n/*====================================================================================\ngetNum Function\n======================================================================================*/\nint getNum(int CLP)\n{\n\n    //Declaring variables\n\n    int Num;\n\n    //End of Vriables Declration\n\n    if (CLP &gt; 99999)\n        Num = 6;\n    else if (CLP &gt; 9999)\n        Num = 5;\n    else if (CLP &gt; 999)\n        Num = 4;\n    else if (CLP &gt; 99)\n        Num = 3;\n\n    return Num;\n}\n/*====================================================================================\ngetDiff Function\n======================================================================================*/\nint getDiff(int CLP, int Num)\n{\n\n    int counter = 0, i = 0, j = 0;\n\n    for (int x = CLP, i = 0; x &gt;= 1; x /= 10, i++) {\n        PlateNumberArray[i] = x % 10;\n\n        cout &lt;&lt; endl\n             &lt;&lt; \"Test===&gt;\" &lt;&lt; PlateNumberArray[i] &lt;&lt; endl;\n\n    } // end of \"x = CLP\" for loop\n\n    while (i &lt; Num) {\n        j = 0;\n        while (j &lt;= Num) {\n            if (PlateNumberArray[i] == PlateNumberArray[j])\n                NumberCounter[i]++;\n            j++;\n        } //end of while(j &lt;= i)\n        i++;\n    } //end of while(i &lt; Num)\n\n    for (int i = 0; i &lt; Num; i++)\n        counter += NumberCounter[i];\n\n    return counter;\n}\n</code></pre>\n"}, {"tags": ["c++", "inheritance", "subclass", "superclass"], "comments": [{"owner": {"reputation": 6770, "user_id": 3658660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b40f4e2bead9eca6951da110a3c84e7?s=128&d=identicon&r=PG&f=1", "display_name": "hlscalon", "link": "https://stackoverflow.com/users/3658660/hlscalon"}, "edited": false, "score": 0, "creation_date": 1482342099, "post_id": 41268686, "comment_id": 69738323, "body": "You have a color attribute in base class <i>and</i> a color attribute in derived classes too ? A MVCE would be helpful."}, {"owner": {"reputation": 227, "user_id": 3149152, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100001080502383/picture?type=large", "display_name": "Logan", "link": "https://stackoverflow.com/users/3149152/logan"}, "reply_to_user": {"reputation": 6770, "user_id": 3658660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b40f4e2bead9eca6951da110a3c84e7?s=128&d=identicon&r=PG&f=1", "display_name": "hlscalon", "link": "https://stackoverflow.com/users/3658660/hlscalon"}, "edited": false, "score": 0, "creation_date": 1482342181, "post_id": 41268686, "comment_id": 69738359, "body": "no the color attribute is obviously getting inherited from the superclass"}, {"owner": {"reputation": 2090, "user_id": 884986, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1842d81fb2949ec808a79045de2e21a3?s=128&d=identicon&r=PG", "display_name": "iAdjunct", "link": "https://stackoverflow.com/users/884986/iadjunct"}, "edited": false, "score": 0, "creation_date": 1482342213, "post_id": 41268686, "comment_id": 69738377, "body": "Please post a pseudo-code example of what you think things may look like. You&#39;re using the word &quot;attribute,&quot; but there are a very large number of possible ways to implement an &quot;attribute&quot; (member-variable, virtual-member-function-with-default-implementation, etc). Also who is doing the initialization? (also: initialize <i>is</i> setting the value every time, just with a slightly different syntax)"}, {"owner": {"reputation": 6770, "user_id": 3658660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b40f4e2bead9eca6951da110a3c84e7?s=128&d=identicon&r=PG&f=1", "display_name": "hlscalon", "link": "https://stackoverflow.com/users/3658660/hlscalon"}, "edited": false, "score": 0, "creation_date": 1482342299, "post_id": 41268686, "comment_id": 69738417, "body": "@Logan so what&#39;s the problem ? The derived class obviously will have the same value as the base one."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1482342465, "post_id": 41268686, "comment_id": 69738512, "body": "Do you want something like <code>class RedShape : public Shape</code> where <code>RedShape</code>&#39;s <code>Shape</code> object always has its color set to red, or do you want something like <code>Shape s(RED); Circle c; &#47;&#47; c is automatically red</code>?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1482342632, "post_id": 41268686, "comment_id": 69738606, "body": "Please show some code and explain why you don&#39;t like it."}, {"owner": {"reputation": 227, "user_id": 3149152, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100001080502383/picture?type=large", "display_name": "Logan", "link": "https://stackoverflow.com/users/3149152/logan"}, "reply_to_user": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1482342863, "post_id": 41268686, "comment_id": 69738735, "body": "@MilesBudnek the 2nd option yes, an attribute in the super set to a specific value, and THAT specific value is set to the same attribute in the inherited classes."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1482343171, "post_id": 41268686, "comment_id": 69738895, "body": "I&#39;m confused by your sample code. 1) Your shapes don&#39;t inherit from <code>Shape</code>, what is the intended inheritance here? 2) Your (presumed) sub-class constructors initialize the (presumed) super-class member. That can&#39;t happen."}, {"owner": {"reputation": 227, "user_id": 3149152, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100001080502383/picture?type=large", "display_name": "Logan", "link": "https://stackoverflow.com/users/3149152/logan"}, "edited": false, "score": 0, "creation_date": 1482343526, "post_id": 41268686, "comment_id": 69739105, "body": "The sub-classes inherit the color attribute from the super class, correct me if I&#39;m wrong."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1482343652, "post_id": 41268686, "comment_id": 69739197, "body": "Those two sub-classes don&#39;t have a super-class. Nothing in your code connects <code>Square</code> to <code>Shape</code>, for example."}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 5495213, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7xZoq.jpg?s=128&g=1", "display_name": "R&#255;ck N&#246;thing", "link": "https://stackoverflow.com/users/5495213/r%c3%bfck-n%c3%b6thing"}, "edited": false, "score": 0, "creation_date": 1482342284, "post_id": 41268802, "comment_id": 69738409, "body": "You could also use an initializer list."}, {"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 1, "creation_date": 1482342303, "post_id": 41268802, "comment_id": 69738421, "body": "<code>:baseClass()</code> was never a requirement AFAIK."}, {"owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "reply_to_user": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 0, "creation_date": 1482343541, "post_id": 41268802, "comment_id": 69739120, "body": "@A.S.H You are absolutely correct. I blame my pneumonia. :)"}], "tags": [], "owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "is_accepted": false, "score": 1, "last_activity_date": 1482343500, "last_edit_date": 1482343500, "creation_date": 1482342169, "answer_id": 41268802, "question_id": 41268686, "link": "https://stackoverflow.com/questions/41268686/c-inheritance-base-attributes-over-various-derived-objects/41268802#41268802", "title": "C++ Inheritance : Base attributes over various derived objects", "body": "<p>Prior to C++11, the primary way to do this would be as follows:</p>\n\n<pre><code>class baseClass\n{ \n    int color;\n\n    baseClass() { color = RED; }\n};\n\nclass subClass : public baseClass\n{\n    subclass() { }\n};\n</code></pre>\n\n<p>With C++11 and later, you can assign the default value in the class declaration:</p>\n\n<pre><code>class baseClass\n{ \n    int color = RED;\n\n    baseClass() { }\n};\n</code></pre>\n\n<p>This would be inherited.</p>\n\n<p>EDIT: As mentioned below, the default <code>baseClass</code> constructor is automatically called in this case. </p>\n"}, {"tags": [], "owner": {"reputation": 5341, "user_id": 3467698, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9ae079231f5aec46808b1c7853833e72?s=128&d=identicon&r=PG", "display_name": "Fomalhaut", "link": "https://stackoverflow.com/users/3467698/fomalhaut"}, "is_accepted": false, "score": 0, "last_activity_date": 1482342707, "creation_date": 1482342707, "answer_id": 41268941, "question_id": 41268686, "link": "https://stackoverflow.com/questions/41268686/c-inheritance-base-attributes-over-various-derived-objects/41268941#41268941", "title": "C++ Inheritance : Base attributes over various derived objects", "body": "<p>There's a difference between a class and an instance of a class. A class is something like a structure, according to which further instances will be created. A class is something like a description, an instruction how to build objects. Inheritance is related to classes, not to objects. As for fields, the inherited class has all the same fields from the parent class plus some new fields you may add.</p>\n\n<p>A simple example for you:</p>\n\n<pre><code>class MyBase {\npublic:\n    int color;\n};\n\nclass MyChild : public MyBase {\npublic:\n    double length;\n}\n\nint main() {\n    MyBase myBaseObj;\n    myBaseObj.color = 1;\n\n    MyChild myChildObj;\n    myChildObj.color = 2;\n    myChildObj.length = 3.14;\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 227, "user_id": 3149152, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100001080502383/picture?type=large", "display_name": "Logan", "link": "https://stackoverflow.com/users/3149152/logan"}, "edited": false, "score": 0, "creation_date": 1482343372, "post_id": 41269022, "comment_id": 69739011, "body": "I see, so virtually you can have a constructor which accepts multiple options for color right? Building on this, what would happen if one has multiple instances of the super class (Shape) with different colors set before the sub-classes are initialized, would their color attribute be set to the same color as the last initialization of the super class?"}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "reply_to_user": {"reputation": 227, "user_id": 3149152, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100001080502383/picture?type=large", "display_name": "Logan", "link": "https://stackoverflow.com/users/3149152/logan"}, "edited": false, "score": 0, "creation_date": 1482343904, "post_id": 41269022, "comment_id": 69739345, "body": "You can have as many instances of the super class as you want. The only super-class instance that matters to a specific instance of a sub class is the one that is contained within that sub-class instance."}], "tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": false, "score": 0, "last_activity_date": 1482343565, "last_edit_date": 1482343565, "creation_date": 1482343032, "answer_id": 41269022, "question_id": 41268686, "link": "https://stackoverflow.com/questions/41268686/c-inheritance-base-attributes-over-various-derived-objects/41269022#41269022", "title": "C++ Inheritance : Base attributes over various derived objects", "body": "<blockquote>\n  <p>is there anyway (maybe from the super class? ) to declare this color (ex. red), and both shapes would have this color set the same?</p>\n</blockquote>\n\n<p>In your posted example, yes. A super-class constructor can set its variables to whatever it wants to, for example:</p>\n\n<pre><code>Shape::Shape(int c) : color(7) { }  // 7 == RED\n</code></pre>\n\n<p>If <code>Shape</code> had that constructor defined, then instances of every subclass would represent red shapes.</p>\n\n<p>This sample program prints 7, overriding the user's chosen color:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Shape {\npublic:\n\n    int color;\n\n    Shape(int c) : color(7) { }  //constructor\n\n};\n\nclass Square : public Shape {\npublic:\n\n    int length, width;\n\n    Square(int l, int w, int c)\n    :    Shape(c),\n         length(l),\n         width(w)\n    { }\n};\n\nclass Circle : public Shape {\npublic:\n\n    int radius;\n\n    Circle(int r, int c)\n    :    Shape(c),\n         radius(r)\n    { }\n};\n\nint main() {\n    Square q(4,8,0);\n    std::cout &lt;&lt; q.color &lt;&lt; \"\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 227, "user_id": 3149152, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100001080502383/picture?type=large", "display_name": "Logan", "link": "https://stackoverflow.com/users/3149152/logan"}, "edited": false, "score": 0, "creation_date": 1482344025, "post_id": 41269215, "comment_id": 69739406, "body": "I see. I was just exploring this concept out of curiosity and needed clarification. As for practical applications, yes I agree with you that it&#39;s poor practice and can prove destructive. Thanks"}], "tags": [], "owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "is_accepted": true, "score": 1, "last_activity_date": 1482343736, "creation_date": 1482343736, "answer_id": 41269215, "question_id": 41268686, "link": "https://stackoverflow.com/questions/41268686/c-inheritance-base-attributes-over-various-derived-objects/41269215#41269215", "title": "C++ Inheritance : Base attributes over various derived objects", "body": "<p>You could accomplish what you want with a static <code>default_color</code> that gets used when no color is explicitly specified, and gets set whenever a color is specified.</p>\n\n<pre><code>struct Shape {\n    static int default_color;\n    int color;\n    Shape(int c) : color(c)\n    {\n        default_color = c;\n    }\n    Shape() : color(default_color) {}\n};\n\nShape::default_color = BLACK;\n\nstruct Square : public Shape {\n    int length, width;\n    Square(int l, int w, int c)\n    : Shape(c),\n      length(l),\n      width(w),\n    { }\n\n    Square(int l, int w)\n    : length(l),\n      width(w)\n    { }\n}\n\nstruct Circle : public Shape {\n    int radius;\n    Circle(int r, int c)\n    : Shape(c),\n      radius(r)\n    { }\n\n    Circle(int r)\n    : radius(r)\n    { }\n}\n\nint main()\n{\n    Square sq(2, 3, RED);\n    Circle cir(10); // Automatically red, since that's\n                       the last color explicitly specified\n}\n</code></pre>\n\n<p>I would say this is a poor design though.  Global state like this makes it very easy to make mistakes.  You now have to think about the state of the entire program whenever you create a shape.  It would be better to simply create the <code>Circle</code> as <code>Circle cir(10, sq.color);</code>.  That makes it explicit what color your <code>Circle</code> is, and reduces cognitive load on the programmer.</p>\n"}], "owner": {"reputation": 227, "user_id": 3149152, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100001080502383/picture?type=large", "display_name": "Logan", "link": "https://stackoverflow.com/users/3149152/logan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3041, "favorite_count": 0, "accepted_answer_id": 41269215, "answer_count": 4, "score": 1, "last_activity_date": 1482343736, "creation_date": 1482341773, "last_edit_date": 1482342718, "question_id": 41268686, "link": "https://stackoverflow.com/questions/41268686/c-inheritance-base-attributes-over-various-derived-objects", "title": "C++ Inheritance : Base attributes over various derived objects", "body": "<p>I'm currently learning about C++ Inheritance, so if this question is a dumb one, I apologize in advance.</p>\n\n<p>Implementing this scenario: </p>\n\n<ol>\n<li><p>A super class has a color attribute, which can be any color (let's assume color is represented by an integer). </p></li>\n<li><p>Let's assume I have an initialization of this super class, with the color red.</p></li>\n<li><p>I am also going to initialize different objects of a sub-class which also share the color red.</p></li>\n</ol>\n\n<p>My question is, is there any way that I can initialize this attribute color to red (or any color for that matter) and it would be automatically inherited by objects of it's sub-class, instead of setting the attribute to red every-time I initialize one of these objects?</p>\n\n<p>Again apologies if I'm missing a basic concept here, but I can't seem to find anything online on this.</p>\n\n<p>Pseudo-Code per request:</p>\n\n<p>Super-class code:</p>\n\n<pre><code>class Shape {\n\n    int color;\n\n    Shape::Shape(int c) : color(c) { }  //constructor\n\n}\n</code></pre>\n\n<p>Sub-Class code:</p>\n\n<pre><code>class Square {\n\n    int length, width;\n\n    Square::Square(int l, int w, int c)\n    :    length(l),\n         width(w),\n         color(c)\n    { }\n}\n\nclass Circle {\n\n    int radius;\n\n    Square::Square(int r, int c)\n    :    radius(r),\n         color(c)\n    { }\n}\n</code></pre>\n\n<p>What I'm trying to say is that both square and circle need to have the same color, is there anyway (maybe from the super class? ) to declare this color (ex. red), and both shapes would have this color set the same?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482341497, "post_id": 41268546, "comment_id": 69738007, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}], "answers": [{"tags": [], "owner": {"reputation": 5341, "user_id": 3467698, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9ae079231f5aec46808b1c7853833e72?s=128&d=identicon&r=PG", "display_name": "Fomalhaut", "link": "https://stackoverflow.com/users/3467698/fomalhaut"}, "is_accepted": false, "score": 2, "last_activity_date": 1482341947, "last_edit_date": 1482341947, "creation_date": 1482341478, "answer_id": 41268603, "question_id": 41268546, "link": "https://stackoverflow.com/questions/41268546/how-to-know-if-4-sides-make-a-quadrangle/41268603#41268603", "title": "How to know if 4 sides make a quadrangle?", "body": "<blockquote>\n  <p>Is there any way to make sure that these kinds of values give out an error message?</p>\n</blockquote>\n\n<p>Definitely yes. In any quadrangle the longest side should be shorter than the sum of three other sides. Use this condition to check the sides.</p>\n\n<pre><code>bool goodQuadrangle(int sizes[4]) {\n    int longest = sizes[0];\n    int index = 0;\n    for (int i = 1; i &lt; 4; i++)\n        if (sizes[i] &gt; longest) {\n            index = i;\n            longest = sizes[i];\n        }\n\n    int sum3 = 0;\n    for (int i = 0; i &lt; 4; i++)\n        if (i != index)\n            sum3 += sizes[i];\n\n    return longest &lt; sum3;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7213198, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2ef8f63265f67aa860ae9fd81af1d219?s=128&d=identicon&r=PG&f=1", "display_name": "jcoe", "link": "https://stackoverflow.com/users/7213198/jcoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1482341947, "creation_date": 1482341238, "question_id": 41268546, "link": "https://stackoverflow.com/questions/41268546/how-to-know-if-4-sides-make-a-quadrangle", "title": "How to know if 4 sides make a quadrangle?", "body": "<p>So I'm trying to make a program in which you input 4 values (4 sides of a quadrangle) and it tells you if it's a square, rhombus etc. The problem is I can't seem to figure out how to make the program work with values that can make a quadrangle. For example If I input 5, 5, 5, 5, it outputs that it's either a square or a rhombus. If I input 100, 1, 1, 1, it outputs another quadrangle type, but realistically you can't get a quadrangle with values like 100, 1, 1 and 1. Same goes for 9, 1, 1, 1. Is there any way to make sure that these kinds of values give out an error message?</p>\n"}, {"tags": ["c++", "arrays", "c++11"], "comments": [{"owner": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 2, "creation_date": 1482341207, "post_id": 41268521, "comment_id": 69737834, "body": "Please review <a href=\"http://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a> and <a href=\"https://stackoverflow.com/posts/41268521/edit\">edit</a> your question accordingly."}, {"owner": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 2, "creation_date": 1482341287, "post_id": 41268521, "comment_id": 69737876, "body": "When <code>a=0</code> what does <code>a-1</code> equal? What happens when you try and access a negative index? Should you not <code>cin &gt;&gt; points[0]</code> before the loop and start <code>a</code> at 1? What happens when <code>points[0] == points[2]</code>, they&#39;re equal but your loop won&#39;t recognize that."}, {"owner": {"reputation": 3, "user_id": 7326890, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Uv39UxtOMIs/AAAAAAAAAAI/AAAAAAAAAEo/ALlW-nNfwiU/photo.jpg?sz=128", "display_name": "Haseeb Arshad", "link": "https://stackoverflow.com/users/7326890/haseeb-arshad"}, "reply_to_user": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1482341435, "post_id": 41268521, "comment_id": 69737969, "body": "Basically I want to compare two values as in if a is one value a -1 become the previous value. I&#39;m using a=0 just for the purposes of running this for loop."}, {"owner": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1482341498, "post_id": 41268521, "comment_id": 69738008, "body": "That&#39;s not what your question asks."}, {"owner": {"reputation": 6398, "user_id": 4284627, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2e017633cda5465e6683c74992cdec5e?s=128&d=identicon&r=PG", "display_name": "Donald Duck", "link": "https://stackoverflow.com/users/4284627/donald-duck"}, "edited": false, "score": 2, "creation_date": 1482341570, "post_id": 41268521, "comment_id": 69738051, "body": "It&#39;s very likely (if not certain) that your program will crash. First of all, as Jonny Henly said, <code>points[a-1]</code> for a=0 won&#39;t work. Second of all, if a gets over 100, <code>points[a]</code> will be out of range and that will also make your program crash. Besides, this code won&#39;t even compile because <code>main</code> is supposed to return an <code>int</code> but you don&#39;t have any <code>return</code> statement."}, {"owner": {"reputation": 3, "user_id": 7326890, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Uv39UxtOMIs/AAAAAAAAAAI/AAAAAAAAAEo/ALlW-nNfwiU/photo.jpg?sz=128", "display_name": "Haseeb Arshad", "link": "https://stackoverflow.com/users/7326890/haseeb-arshad"}, "edited": false, "score": 0, "creation_date": 1482341709, "post_id": 41268521, "comment_id": 69738114, "body": "How can I tell my loop to recognize these two numbers?"}, {"owner": {"reputation": 3, "user_id": 7326890, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Uv39UxtOMIs/AAAAAAAAAAI/AAAAAAAAAEo/ALlW-nNfwiU/photo.jpg?sz=128", "display_name": "Haseeb Arshad", "link": "https://stackoverflow.com/users/7326890/haseeb-arshad"}, "edited": false, "score": 0, "creation_date": 1482341774, "post_id": 41268521, "comment_id": 69738148, "body": "#include&lt;iostream&gt; using namespace std; int main(){ \tint a, h, points [100]; \tcin&gt;&gt;points [0]; \tfor(a=1 ; points [a] != points [a-1] ; a++){ \t\tcin&gt;&gt;points [a]; \t\t \t} }"}, {"owner": {"reputation": 3, "user_id": 7326890, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Uv39UxtOMIs/AAAAAAAAAAI/AAAAAAAAAEo/ALlW-nNfwiU/photo.jpg?sz=128", "display_name": "Haseeb Arshad", "link": "https://stackoverflow.com/users/7326890/haseeb-arshad"}, "edited": false, "score": 0, "creation_date": 1482341852, "post_id": 41268521, "comment_id": 69738186, "body": "I have now tried this. I just want to figure out my issues. I only want to calculate the loop if two consecutive numbers are equal. This is what I am trying to figure out."}, {"owner": {"reputation": 6398, "user_id": 4284627, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2e017633cda5465e6683c74992cdec5e?s=128&d=identicon&r=PG", "display_name": "Donald Duck", "link": "https://stackoverflow.com/users/4284627/donald-duck"}, "edited": false, "score": 0, "creation_date": 1482341895, "post_id": 41268521, "comment_id": 69738208, "body": "@HaseebArshad That&#39;s better but you still have two major mistakes: First of all, you need to be sure that a&lt;100 before using <code>points[a]</code>, second of all, you need a <code>return 0;</code> statement at the end of your <code>main</code> function."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 6398, "user_id": 4284627, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2e017633cda5465e6683c74992cdec5e?s=128&d=identicon&r=PG", "display_name": "Donald Duck", "link": "https://stackoverflow.com/users/4284627/donald-duck"}, "edited": false, "score": 0, "creation_date": 1482344555, "post_id": 41268521, "comment_id": 69739693, "body": "@DonaldDuck No, you don&#39;t need to, explicitly, <code>return 0;</code> at the end of <code>main</code>. <code>main</code> has implicit <code>return 0;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1482342255, "post_id": 41268763, "comment_id": 69738396, "body": "@JonnyHenly A comment from the OP: <code>I only want to calculate the loop if two consecutive numbers are equal.</code>. So i think we are good."}, {"owner": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1482342357, "post_id": 41268763, "comment_id": 69738453, "body": "Ahh missed that comment"}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": true, "score": 1, "last_activity_date": 1482342316, "last_edit_date": 1482342316, "creation_date": 1482342040, "answer_id": 41268763, "question_id": 41268521, "link": "https://stackoverflow.com/questions/41268521/c-using-for-loop-i-need-to-take-infinite-values-of-a-point-using-arrays-how/41268763#41268763", "title": "C++: Using for loop I need to take infinite values of a point using arrays. How can I take values of point [ ] until 2 points of are equal", "body": "<p>To test if two consecutive numbers are equal, you dont need 100 elements, you need 2:</p>\n\n<pre><code>int points[2], counter = 1;\n\n// Read in first point:\ncin &gt;&gt; points[0];\n\n// Read until we meet our condition:\ndo {\n    // Read a point into the next part of the array.\n    cin &gt;&gt; points[counter];\n    // toggle counter between 0 and 1\n    counter = (counter + 1) % 2;\n// Check if we are done:\n} while (points[0] != points[1]);\n</code></pre>\n\n<p><a href=\"http://ideone.com/21t7F8\" rel=\"nofollow noreferrer\">Here is a live example.</a></p>\n"}], "owner": {"reputation": 3, "user_id": 7326890, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Uv39UxtOMIs/AAAAAAAAAAI/AAAAAAAAAEo/ALlW-nNfwiU/photo.jpg?sz=128", "display_name": "Haseeb Arshad", "link": "https://stackoverflow.com/users/7326890/haseeb-arshad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 41268763, "answer_count": 1, "score": -6, "last_activity_date": 1482345186, "creation_date": 1482341140, "question_id": 41268521, "link": "https://stackoverflow.com/questions/41268521/c-using-for-loop-i-need-to-take-infinite-values-of-a-point-using-arrays-how", "title": "C++: Using for loop I need to take infinite values of a point using arrays. How can I take values of point [ ] until 2 points of are equal", "body": "<p>C++: Using for loop I need to take infinite values of a point using arrays. How can I take values of point [ ] until 2 points of are equal.</p>\n\n<p>This is my code:</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nint main(){\n    int a, h, points [100];\n    for(a=0 ; points [a]!= points [a-1] ; a++){\n        cin&gt;&gt;points [a];\n\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "string", "int", "pass-by-reference"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482340529, "post_id": 41268312, "comment_id": 69737493, "body": "You cannot do this. Use e.g.: <code>results += &quot;\\nxWidth is: &quot; + std::to_string(xWidth);</code>. Please consider to do a bit more research before posting here. `"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1482340600, "post_id": 41268312, "comment_id": 69737530, "body": "<a href=\"http://en.cppreference.com/w/cpp/string/basic_string/to_string\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/string/basic_string/to_string</a>, <a href=\"http://stackoverflow.com/questions/5590381/easiest-way-to-convert-int-to-string-in-c\" title=\"easiest way to convert int to string in c\">stackoverflow.com/questions/5590381/&hellip;</a>, <a href=\"http://stackoverflow.com/questions/29333397/how-to-convert-int-to-string\" title=\"how to convert int to string\">stackoverflow.com/questions/29333397/&hellip;</a>,"}, {"owner": {"reputation": 12040, "user_id": 510036, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b7c510641e6526d19abc93e866e75ac8?s=128&d=identicon&r=PG", "display_name": "Qix - MONICA WAS MISTREATED", "link": "https://stackoverflow.com/users/510036/qix-monica-was-mistreated"}, "edited": false, "score": 0, "creation_date": 1482341007, "post_id": 41268312, "comment_id": 69737730, "body": "One of the sides of the <code>+</code> operator must be of type <code>std::string</code> for that to work. You have <code>const char const *</code> and <code>int&amp;</code>. They are incompatible types. Did you take a look at the error message your compiler should be throwing?"}], "answers": [{"comments": [{"owner": {"reputation": 12040, "user_id": 510036, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b7c510641e6526d19abc93e866e75ac8?s=128&d=identicon&r=PG", "display_name": "Qix - MONICA WAS MISTREATED", "link": "https://stackoverflow.com/users/510036/qix-monica-was-mistreated"}, "edited": false, "score": 0, "creation_date": 1482341055, "post_id": 41268362, "comment_id": 69737753, "body": "Should also be noted that taking an <code>int&amp;</code> in this case is pointless since you&#39;re not changing it and it&#39;ll ultimately be the same size (maybe even smaller in certain cases) to pass it as value."}], "tags": [], "owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "is_accepted": true, "score": 3, "last_activity_date": 1482340526, "creation_date": 1482340526, "answer_id": 41268362, "question_id": 41268312, "link": "https://stackoverflow.com/questions/41268312/convert-int-to-string/41268362#41268362", "title": "Convert int&amp; to string", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/string/basic_string/to_string\" rel=\"nofollow noreferrer\"><code>std::to_string(xWidth)</code></a>.</p>\n\n<p>The <code>&amp;</code> is pretty much irrelevant. <code>to_string</code> takes the <code>int</code> by value, so how your function takes it doesn't matter: by value, lvalue ref, rvalue ref, <code>const</code> or non-<code>const</code>... all will work.</p>\n"}], "owner": {"reputation": 2566, "user_id": 5874702, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/IPSB7.png?s=128&g=1", "display_name": "Roka545", "link": "https://stackoverflow.com/users/5874702/roka545"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "closed_date": 1482340658, "accepted_answer_id": 41268362, "answer_count": 1, "score": -1, "last_activity_date": 1482340526, "creation_date": 1482340365, "question_id": 41268312, "link": "https://stackoverflow.com/questions/41268312/convert-int-to-string", "closed_reason": "Duplicate", "title": "Convert int&amp; to string", "body": "<p>This may seem trivial to normal C++ users, but I'm currently relearning C++ all over again. I have a function that takes in an <code>int&amp;</code> and I would like to add that value to a string for a print statement. So, I have something like this:</p>\n\n<pre><code>std::string getTest(void* dataGroup, int&amp; xWidth, int&amp; yHeight)\n{\n     std::string results = \"\";\n\n     results += \"\\nxWidth is: \" + xWidth;\n\n     return results;\n}\n</code></pre>\n\n<p>which fails to run when I call it. What is the proper way to convert the pass-by-reference int&amp; value into a form that can be added to a string?</p>\n"}, {"tags": ["c++", "range-v3"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1482340019, "post_id": 41268186, "comment_id": 69737208, "body": "Add <code>begin()</code> and <code>end()</code> that call these two functions, respectively?"}, {"owner": {"reputation": 23688, "user_id": 1256041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NJUNN.jpg?s=128&g=1", "display_name": "sdgfsdh", "link": "https://stackoverflow.com/users/1256041/sdgfsdh"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1482340062, "post_id": 41268186, "comment_id": 69737237, "body": "The object is part of a library. I cannot change the method names or add new methods."}, {"owner": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "edited": false, "score": 0, "creation_date": 1482340232, "post_id": 41268186, "comment_id": 69737338, "body": "Create the simple wrapper you are talking about that maps the begin and end calls to the ones you want."}, {"owner": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "edited": false, "score": 2, "creation_date": 1482340242, "post_id": 41268186, "comment_id": 69737345, "body": "Add overloads to <code>begin</code> and <code>end</code> functions for your object. They don&#39;t need to be methods"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1482340246, "post_id": 41268186, "comment_id": 69737347, "body": "<code>class_name::const_iterator begin(class_name&amp; obj) { return obj.err_begin(); }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 5285, "user_id": 195873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53912b2e0cc619ca6c81ab1406522c2a?s=128&d=identicon&r=PG", "display_name": "Eric Niebler", "link": "https://stackoverflow.com/users/195873/eric-niebler"}, "edited": false, "score": 0, "creation_date": 1482360331, "post_id": 41268273, "comment_id": 69747814, "body": "This type is not <a href=\"http://stackoverflow.com/a/14000046/195873\">Regular</a>. It will not play nicely with the rest of the range-v3 library. Brian&#39;s answer below is the correct answer. (I&#39;m the author of range-v3, FWIW.)"}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": 4, "last_activity_date": 1482340242, "creation_date": 1482340242, "answer_id": 41268273, "question_id": 41268186, "link": "https://stackoverflow.com/questions/41268186/how-do-i-create-a-range-from-a-begin-and-end-iterator/41268273#41268273", "title": "How do I create a range from a begin and end iterator?", "body": "<p>You clarified that the class in question is part of a library that you cannot change. Fine. Create a facade class:</p>\n\n<pre><code>class FacadeClass {\n\n      const RealClassWithErrBeginEnd &amp;r;\n\npublic:\n\n      FacadeClass(const RealClassWithErrBeginEnd &amp;r) : r(r) {}\n\n      auto begin() const { return r.err_begin(); }\n      auto end() const { return r.err_end(); }\n};\n</code></pre>\n\n<p>This should be good enough to fool most code that expects a container. In the worst case, you might need to provide additional typedefs in the facade, i.e. <code>value_type</code>, etc...</p>\n"}, {"comments": [{"owner": {"reputation": 5285, "user_id": 195873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53912b2e0cc619ca6c81ab1406522c2a?s=128&d=identicon&r=PG", "display_name": "Eric Niebler", "link": "https://stackoverflow.com/users/195873/eric-niebler"}, "edited": false, "score": 4, "creation_date": 1482341382, "post_id": 41268315, "comment_id": 69737940, "body": "The documentation for <code>iterator_range</code> lives <a href=\"https://ericniebler.github.io/range-v3/structranges_1_1v3_1_1iterator__range.html\" rel=\"nofollow noreferrer\">here</a>. Just call <code>ranges::make_iterator_range(x.err_begin(), x.err_end())</code>."}, {"owner": {"reputation": 542, "user_id": 1566112, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b80e14ee0d779dc3f926ed65679a8077?s=128&d=identicon&r=PG", "display_name": "kaba", "link": "https://stackoverflow.com/users/1566112/kaba"}, "edited": false, "score": 0, "creation_date": 1489446013, "post_id": 41268315, "comment_id": 72665254, "body": "I cannot find <code>iterator_range</code> and <code>make_iterator_range</code> from the code anymore. Have they been renamed?"}, {"owner": {"reputation": 18087, "user_id": 261217, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6a20a7f940e6ba33cde991a80d5b6a43?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/261217/mikhail"}, "reply_to_user": {"reputation": 5285, "user_id": 195873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53912b2e0cc619ca6c81ab1406522c2a?s=128&d=identicon&r=PG", "display_name": "Eric Niebler", "link": "https://stackoverflow.com/users/195873/eric-niebler"}, "edited": false, "score": 0, "creation_date": 1521390459, "post_id": 41268315, "comment_id": 85700084, "body": "@EricNiebler, why do we need <code>iterator_range</code>, while we can simply create a <code>range</code> of iterators?.."}, {"owner": {"reputation": 5285, "user_id": 195873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53912b2e0cc619ca6c81ab1406522c2a?s=128&d=identicon&r=PG", "display_name": "Eric Niebler", "link": "https://stackoverflow.com/users/195873/eric-niebler"}, "edited": false, "score": 0, "creation_date": 1521491149, "post_id": 41268315, "comment_id": 85744573, "body": "Ah, are you using the Microsoft fork of range-v3 for MSVC? In that (very out-of-date) fork, <code>iterator_range</code> was called <code>range</code>. It isn&#39;t any longer."}], "tags": [], "owner": {"reputation": 3796, "user_id": 4859885, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HcTm.jpg?s=128&g=1", "display_name": "Brian Rodriguez", "link": "https://stackoverflow.com/users/4859885/brian-rodriguez"}, "is_accepted": true, "score": 12, "last_activity_date": 1482347505, "last_edit_date": 1482347505, "creation_date": 1482340371, "answer_id": 41268315, "question_id": 41268186, "link": "https://stackoverflow.com/questions/41268186/how-do-i-create-a-range-from-a-begin-and-end-iterator/41268315#41268315", "title": "How do I create a range from a begin and end iterator?", "body": "<p>Sounds like you're looking for <a href=\"https://ericniebler.github.io/range-v3/structranges_1_1v3_1_1iterator__range.html\"><code>iterator_range</code></a>:</p>\n\n<pre><code>auto hasErrors = !empty(ranges::make_iterator_range(x.err_begin(), x.err_end()));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 1, "last_activity_date": 1482340708, "creation_date": 1482340708, "answer_id": 41268409, "question_id": 41268186, "link": "https://stackoverflow.com/questions/41268186/how-do-i-create-a-range-from-a-begin-and-end-iterator/41268409#41268409", "title": "How do I create a range from a begin and end iterator?", "body": "<p><code>boost::make_iterator_range</code> will do the right thing. Now add a little ADL and we find that one free function solves all our problems:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;boost/range.hpp&gt;\n\n\n// simulate the library class\nstruct X\n{\n    auto err_begin() const { return errors.begin(); }\n    auto err_end() const { return errors.end(); }\n\n    std::vector&lt;std::string&gt; errors;\n\n};\n\n// provide a generator to build an iterator range\nauto errors(const X&amp; x)\n{\n    return boost::make_iterator_range(x.err_begin(), x.err_end());\n}\n\n// do things with the iterator_range\nint main()\n{\n    X x;\n    for (const auto&amp; err : errors(x))\n    {\n        std::cout &lt;&lt; err &lt;&lt; std::endl;\n    }\n\n    std::cout &lt;&lt; empty(errors(x)) &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 23688, "user_id": 1256041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NJUNN.jpg?s=128&g=1", "display_name": "sdgfsdh", "link": "https://stackoverflow.com/users/1256041/sdgfsdh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2321, "favorite_count": 0, "accepted_answer_id": 41268315, "answer_count": 3, "score": 16, "last_activity_date": 1482347505, "creation_date": 1482339944, "last_edit_date": 1482340082, "question_id": 41268186, "link": "https://stackoverflow.com/questions/41268186/how-do-i-create-a-range-from-a-begin-and-end-iterator", "title": "How do I create a range from a begin and end iterator?", "body": "<p>I have an object with functions for getting the begin and end iterators: </p>\n\n<pre><code>const_iterator err_begin() const\nconst_iterator err_end() const \n</code></pre>\n\n<p>Because they are not named <code>begin</code> and <code>end</code>, I cannot pass my object directly to functions in range-v3. </p>\n\n<p>Is there a simple wrapper I can use to make this object work with the range-v3 library? </p>\n\n<p>For example: </p>\n\n<pre><code>auto hasErrors = !empty(something(x.err_begin(), x.err_end())); \n</code></pre>\n"}, {"tags": ["c++", "arrays", "function", "pointers", "recursion"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1482339950, "post_id": 41268083, "comment_id": 69737171, "body": "What part of the error message you did not understand? The expression <code>*num &#47; 2</code> is an integer. The function expects an <code>int *</code> as a parameter, and not an <code>int</code>."}, {"owner": {"reputation": 6770, "user_id": 3658660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b40f4e2bead9eca6951da110a3c84e7?s=128&d=identicon&r=PG&f=1", "display_name": "hlscalon", "link": "https://stackoverflow.com/users/3658660/hlscalon"}, "edited": false, "score": 0, "creation_date": 1482339966, "post_id": 41268083, "comment_id": 69737184, "body": "How do you expect your function to work if you are passing an int to a function that receives a pointer (in your case, that would probably be an array with 3 integers) ?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1482340083, "post_id": 41268083, "comment_id": 69737249, "body": "Don&#39;t combine loops and recursion."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482340118, "post_id": 41268083, "comment_id": 69737269, "body": "<code>binary(*num &#47; 2);</code> Think twice. What did you meant to do there actually?"}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1482340176, "post_id": 41268083, "comment_id": 69737299, "body": "<code>binary(*num &#47; 2);</code> binary takes a pointer to int and you pass to it integer value instead of a pointer"}], "answers": [{"tags": [], "owner": {"reputation": 5341, "user_id": 3467698, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9ae079231f5aec46808b1c7853833e72?s=128&d=identicon&r=PG", "display_name": "Fomalhaut", "link": "https://stackoverflow.com/users/3467698/fomalhaut"}, "is_accepted": false, "score": 0, "last_activity_date": 1482340308, "creation_date": 1482340308, "answer_id": 41268296, "question_id": 41268083, "link": "https://stackoverflow.com/questions/41268083/invalid-conversion-from-int-to-inttrying-to-do-recursion-with-pointers/41268296#41268296", "title": "Invalid conversion from &#39;int&#39; to &#39;int*&#39;(Trying to do recursion with pointers)", "body": "<p>I'm not sure I understand fully what you're doing in this code, but I can tell you what happened.</p>\n\n<ol>\n<li><code>*num / 2</code> works as <code>(*num) / 2</code>. <code>num</code> is a pointer (it has type <code>int*</code>)  that points to the beginning of your array (to the first element). <code>*num</code> extracts the value of the first element (it has the type <code>int</code>).</li>\n<li><code>(*num) / 2</code> divides the value of the first element. It returns an integer value.</li>\n<li><code>binary(*num / 2)</code> - in here you pass the integer value as an argument of the function <code>binary</code> that takes <code>int*</code> instead of <code>int</code>. That leaded to the error.</li>\n</ol>\n\n<p>If you want to divide all elements of the array, you should do it for each element separately. For example:</p>\n\n<pre><code>num[0] /= 2;\nnum[1] /= 2;\nnum[2] /= 2;\n\nbinary(num);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "is_accepted": true, "score": 0, "last_activity_date": 1482340337, "creation_date": 1482340337, "answer_id": 41268300, "question_id": 41268083, "link": "https://stackoverflow.com/questions/41268083/invalid-conversion-from-int-to-inttrying-to-do-recursion-with-pointers/41268300#41268300", "title": "Invalid conversion from &#39;int&#39; to &#39;int*&#39;(Trying to do recursion with pointers)", "body": "<p>the function <code>binary()</code> takes a pointer to int as an argument and in your function body you call it recursively passing <code>int</code> value (the value in the address that the pointer points to).</p>\n\n<p>correct your code:</p>\n\n<pre><code>num[i] /= 2;\nbinary(num);\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 4708313, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/822855571085410/picture?type=large", "display_name": "Dewang Gupta", "link": "https://stackoverflow.com/users/4708313/dewang-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 41268300, "answer_count": 2, "score": -1, "last_activity_date": 1482344437, "creation_date": 1482339627, "last_edit_date": 1482344437, "question_id": 41268083, "link": "https://stackoverflow.com/questions/41268083/invalid-conversion-from-int-to-inttrying-to-do-recursion-with-pointers", "title": "Invalid conversion from &#39;int&#39; to &#39;int*&#39;(Trying to do recursion with pointers)", "body": "<p>Here is the code.It's taking 3 int in the array input. Then it is passed to the function binary.It converts decimal numbers to binary.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace::std;\n\nvoid binary(int *);\n\nint main() {\n    int input[3];\n\n    cout &lt;&lt; \"Enter 3 numbers : \";\n\n    for(int i = 0; i &lt; 3; i++ ){\n        cin &gt;&gt; input[i];\n    }\n\n    binary(input);\n\n\n    return 0;\n}\n\nvoid binary(int *num){\n    int rem = 0;\n    for(int i = 0 ;i &lt; 3; i++){\n\n        if (num[i] &lt; 1){\n            cout &lt;&lt; rem;\n            return;\n        }\n\n        rem = num[i] % 2;\n        binary(*num / 2);\n\n        cout &lt;&lt; rem;\n    }\n}\n</code></pre>\n\n<p>The problem is on the 4th last line </p>\n\n<pre><code> binary(*num / 2);\n</code></pre>\n\n<p>Here it shows the error => invalid conversion from 'int' to 'int*' [-fpermissive] </p>\n\n<p>Help me out !</p>\n"}, {"tags": ["c++", "visual-studio", "profiling", "sse"], "comments": [{"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 5, "creation_date": 1482341959, "post_id": 41268081, "comment_id": 69738239, "body": "Profiling things with optimization disabled gives you meaningless results and is a complete waste of time."}, {"owner": {"reputation": 16438, "user_id": 312896, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/57c5b6cdd1a94aef510d5dce28992494?s=128&d=identicon&r=PG", "display_name": "Yola", "link": "https://stackoverflow.com/users/312896/yola"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1482342523, "post_id": 41268081, "comment_id": 69738540, "body": "@CodyGray thanks a lot, i updated question"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 1, "creation_date": 1482342612, "post_id": 41268081, "comment_id": 69738596, "body": "I&#39;m not sure I understand your revised question. How should you approach it? Enable optimization! I guess you have discovered that the optimizer is outsmarting you by removing your benchmark code entirely?"}, {"owner": {"reputation": 16438, "user_id": 312896, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/57c5b6cdd1a94aef510d5dce28992494?s=128&d=identicon&r=PG", "display_name": "Yola", "link": "https://stackoverflow.com/users/312896/yola"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1482342669, "post_id": 41268081, "comment_id": 69738624, "body": "@CodyGray yes, that is so, so i did it w/o optimization:) I mean how i can rewrtie this test"}], "answers": [{"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1482348288, "post_id": 41269569, "comment_id": 69741811, "body": "When people make microbenchmarks of a single loop-body by adding results in a loop, they usually end up benchmarking throughput, not latency.  Depending on how your real program uses the operation you&#39;re tuning, that might be the wrong thing to optimize for.  Modern out-of-order-execution CPUs make microbenchmarking <i>hard</i>.  Once you&#39;re CPU-bound without branch mispredicts, there are three simple dimensions to consider: frontend bottlenecks (mostly just fused-domain uop count), execution-unit bottlenecks (OOO throughput), and latency bottlenecks.  <a href=\"http://stackoverflow.com/a/40879258/224132\">stackoverflow.com/a/40879258/224132</a>"}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1482397691, "post_id": 41269569, "comment_id": 69760330, "body": "If you are explicitly enabling SSE or SSE2 with MSVC then you must be compiling in 32-bit mode. In my experience Microsoft has put much less effort into optimization for 32-bit mode. I have answer multiple questions on SO where MSVC did something stupid in 32-bit mode but made the optimal choice in 64-bit mode. Unfortunately, MSVC defaults to 32-bit mode even with a 64-bit mode so you have to explicitly enable 64-bit mode. If Microsoft default to 64-bit mode on 64-bit Windows there would be far fewer questions about SIMD with MSVC on SO."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1482397850, "post_id": 41269569, "comment_id": 69760438, "body": "Yes, I&#39;m talking about 32-bit code here. That is what was discussed in the original question. It is a non-issue with 64-bit, as SSE2 is always supported. The 32-bit optimizer is much older code, and often does things that seem &quot;stupid&quot; today, but made sense a long time ago. The 64-bit optimizer seems to have been largely rewritten, if not based on entirely new code. I disagree though that defaulting to 64-bit targets makes sense. There are still a <i>lot</i> of 32-bit processors out there. And it violates the principle of least surprise to base it on your development machine."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1482397968, "post_id": 41269569, "comment_id": 69760493, "body": "Just because I&#39;m developing on an AMD processor doesn&#39;t mean I want all of my builds tuned for AMD, etc. And for what it&#39;s worth, I haven&#39;t seen that much outright stupidity from the 32-bit compiler, compared to the 64-bit compiler, and I&#39;ve done lots of side-by-side comparisons. And the last update of MSVC 2015 did quite a bit of work further optimizing the 32-bit compiler, bringing it up to date with many of the optimization enhancements that were included in the 64-bit compiler shipped with VS 2010."}], "tags": [], "owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "is_accepted": true, "score": 4, "last_activity_date": 1482345315, "last_edit_date": 1482345315, "creation_date": 1482345002, "answer_id": 41269569, "question_id": 41268081, "link": "https://stackoverflow.com/questions/41268081/profiling-mm-setzero-ps-and-0-0f-0-0f-0-0f-0-0f/41269569#41269569", "title": "Profiling _mm_setzero_ps and {0.0f,0.0f,0.0f,0.0f}", "body": "<p>Profiling things with optimization disabled gives you meaningless results and is a complete waste of time. If you are disabling optimization because otherwise the optimizer notices that your benchmark actually does nothing useful and is removing it entirely, then welcome to the difficulties of microbenchmarking!</p>\n\n<p>It is often very difficult to concoct a test case that actually does enough real work that it will not be removed by a sufficiently smart optimizer, yet the cost of that work does not overwhelm and render meaningless your results. For example, a lot of people's first instinct is to print out the incremental results using something like <code>printf</code>, but that's a non-starter because <code>printf</code> is incredibly slow and will absolutely ruin your benchmark. Making the variable that collects the intermediate values as <code>volatile</code> will sometimes work because it effectively disables load/store optimizations for that particular variable. Although this relies on ill-defined semantics, that's not important for a benchmark. Another option is to perform some pointless yet relatively cheap operation on the intermediate results, like add them together. This relies on the optimizer not outsmarting you, and in order to verify that your benchmark results are meaningful, you'll have to examine the object code emitted by the compiler and ensure that the code is actually <em>doing the thing</em>. There is no magic bullet for crafting a microbenchmark, unfortunately.</p>\n\n<p>The <em>best</em> trick is usually to isolate the relevant portion of the code inside of a function, parameterize it on one or more unpredictable input values, arrange for the result to be returned, and then put this function in an external module such that the optimizer can't get its grubby paws on it.</p>\n\n<p>Since you'll need to look at the disassembly anyway to confirm that your microbenchmark case is suitable, this is often a good place to start. If you are sufficiently competent in reading assembly language, and you have sufficiently distilled the code in question, this may even be enough for you to make a judgment about the efficiency of the code. If you can't make heads or tails of the code, then it is probably sufficiently complicated that you can go ahead and benchmark it.</p>\n\n<p>This is a good example of when a cursory examination of the generated object code is sufficient to answer the question without even needing to craft a benchmark.</p>\n\n<p>Following my advice above, let's write a simple function to test out the intrinsic. In this case, we don't have any input to parameterize upon because the code literally just sets a register to 0. So let's just <em>return</em> the zeroed structure from the function:</p>\n\n<pre><code>DirectX::XMVECTOR ZeroTest_Intrinsic()\n{\n    return _mm_setzero_ps();\n}\n</code></pre>\n\n<p>And here is the other candidate that performs the initialization the seemingly-na\u00efve way:</p>\n\n<pre><code>DirectX::XMVECTOR ZeroTest_Naive()\n{\n    return { 0.0f, 0.0f, 0.0f, 0.0f };\n}\n</code></pre>\n\n<p>Here is the object code generated by the compiler for these two functions (it doesn't matter which version, whether you compile for x86-32 or x86-64, or whether you optimize for size or speed; the results are the same):</p>\n\n<pre><code>ZeroTest_Intrinsic\n    xorps  xmm0, xmm0\n    ret\n</code></pre>\n\n\n\n<pre><code>ZeroTest_Naive\n    xorps  xmm0, xmm0\n    ret\n</code></pre>\n\n<p>(If AVX or AVX2 instructions are supported, then these will both be <code>vxorps xmm0, xmm0, xmm0</code>.)</p>\n\n<p>That is pretty obvious, even to someone who cannot read assembly code. They are both identical! I'd say that pretty definitively answers the question of which one will be faster: they will be identical because the optimizer recognizes the seemingly-na\u00efve initializer and translates it into a single, optimized assembly-language instruction for clearing a register.</p>\n\n<p>Now, it is certainly <em>possible</em> that there are cases where this is embedded deep within various complicated code constructs, preventing the optimizer from recognizing it and performing its magic. In other words, the \"your test function is too simple!\" objection. And that is most likely why the library's implementer chose to explicitly use the intrinsic whenever it is available. Its use <em>guarantees</em> that the code-gen will emit the desired instruction, and therefore the code will be as optimized as possible.</p>\n\n<p>Another possible benefit of explicitly using the intrinsic is to ensure that you get the desired instruction, even if the code is being compiled without SSE/SSE2 support. This isn't a particularly compelling use-case, as I imagine it, because you wouldn't be compiling without SSE/SSE2 support if it was acceptable to be using these instructions. And if you were explicitly trying to disable the generation of SSE/SSE2 instructions so that you could run on legacy systems, the intrinsic would ruin your day because it would force an <code>xorps</code> instruction to be emitted, and the legacy system would throw an invalid operation exception immediately upon hitting this instruction.</p>\n\n<p>I did see one interesting case, though. <code>xorps</code> is the single-precision version of this instruction, and requires only SSE support. However, if I compile the functions shown above with only SSE support (no SSE2), I get the following:</p>\n\n<pre><code>ZeroTest_Intrinsic\n    xorps  xmm0, xmm0\n    ret\n</code></pre>\n\n\n\n<pre><code>ZeroTest_Naive\n    push   ebp\n    mov    ebp, esp\n    and    esp, -16\n    sub    esp, 16\n\n    mov    DWORD PTR [esp],    0\n    mov    DWORD PTR [esp+4],  0\n    mov    DWORD PTR [esp+8],  0\n    mov    DWORD PTR [esp+12], 0\n    movaps xmm0, XMMWORD PTR [esp]\n\n    mov    esp, ebp\n    pop    ebp\n    ret\n</code></pre>\n\n<p>Clearly, for some reason, the optimizer is <em>unable</em> to apply the optimization to the use of the initializer when SSE2 instruction support is not available, even though the <code>xorps</code> instruction that it would be using does not require SSE2 instruction support! This is arguably a bug in the optimizer, but explicit use of the intrinsic works around it.</p>\n"}], "owner": {"reputation": 16438, "user_id": 312896, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/57c5b6cdd1a94aef510d5dce28992494?s=128&d=identicon&r=PG", "display_name": "Yola", "link": "https://stackoverflow.com/users/312896/yola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 672, "favorite_count": 1, "accepted_answer_id": 41269569, "answer_count": 1, "score": 2, "last_activity_date": 1482502889, "creation_date": 1482339626, "last_edit_date": 1482502889, "question_id": 41268081, "link": "https://stackoverflow.com/questions/41268081/profiling-mm-setzero-ps-and-0-0f-0-0f-0-0f-0-0f", "title": "Profiling _mm_setzero_ps and {0.0f,0.0f,0.0f,0.0f}", "body": "<p>EDIT: As Cody Gray pointed out in his comment, profiling with disabled optimization is complete waste of time. How then should i approach this test?</p>\n\n<hr>\n\n<p>Microsoft in its <code>XMVectorZero</code> in case if defined <code>_XM_SSE_INTRINSICS_</code> uses <code>_mm_setzero_ps</code> and <code>{0.0f,0.0f,0.0f,0.0f}</code> if don't. I decided to check how big is the win. So i used the following program in Release x86 and <em>Configuration Properties>C/C++>Optimization>Optimization</em> set to <code>Disabled (/Od)</code>.</p>\n\n<pre><code>constexpr __int64 loops = 1e9;\ninline void fooSSE() {\n    for (__int64 i = 0; i &lt; loops; ++i) {\n        XMVECTOR zero1 = _mm_setzero_ps();\n        //XMVECTOR zero2 = _mm_setzero_ps();\n        //XMVECTOR zero3 = _mm_setzero_ps();\n        //XMVECTOR zero4 = _mm_setzero_ps();\n    }\n}\ninline void fooNoIntrinsic() {\n    for (__int64 i = 0; i &lt; loops; ++i) {\n        XMVECTOR zero1 = { 0.f,0.f,0.f,0.f };\n        //XMVECTOR zero2 = { 0.f,0.f,0.f,0.f };\n        //XMVECTOR zero3 = { 0.f,0.f,0.f,0.f };\n        //XMVECTOR zero4 = { 0.f,0.f,0.f,0.f };\n    }\n}\nint main() {\n    fooNoIntrinsic();\n    fooSSE();\n}\n</code></pre>\n\n<p>I ran the program twice first with only zero1 and second time with all lines uncommented. In the first case intrinsic loses, in the second intrinsic is clear winner. So, my questions are:</p>\n\n<ul>\n<li>Why intrinsic does not always win?</li>\n<li>Does the profiler i used is a proper tool for such measurements?</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/Ds4U4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ds4U4.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/tlXLs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tlXLs.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "c++", "python-c-api", "python-embedding"], "answers": [{"tags": [], "owner": {"reputation": 3295, "user_id": 17949, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/528f07d59c76e1e058877fe877fe4297?s=128&d=identicon&r=PG", "display_name": "teeks99", "link": "https://stackoverflow.com/users/17949/teeks99"}, "is_accepted": false, "score": 2, "last_activity_date": 1482339937, "creation_date": 1482339937, "answer_id": 41268183, "question_id": 41268061, "link": "https://stackoverflow.com/questions/41268061/c-c-python-exception-traceback-not-being-generated/41268183#41268183", "title": "C/C++ Python exception traceback not being generated", "body": "<p>Apparently <code>PyErr_NormalizeException</code> is needed immediately after my <code>PyErr_Fetch</code> call, which converts the value from a string to an instance of the exception object. </p>\n\n<pre><code>PyObject* type;\nPyObject* value;\nPyObject* traceback;\n\nPyErr_Fetch(&amp;type, &amp;value, &amp;traceback);\nPyErr_NormalizeException(&amp;type, &amp;value, &amp;traceback); // Added line\n\n...\n</code></pre>\n\n<p>Fixes the issue. I have no idea why the value coming from an exception generated in C++ vs. one from python changes the value, but this takes care of it. </p>\n"}], "owner": {"reputation": 3295, "user_id": 17949, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/528f07d59c76e1e058877fe877fe4297?s=128&d=identicon&r=PG", "display_name": "teeks99", "link": "https://stackoverflow.com/users/17949/teeks99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 888, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1482339937, "creation_date": 1482339573, "last_edit_date": 1482339661, "question_id": 41268061, "link": "https://stackoverflow.com/questions/41268061/c-c-python-exception-traceback-not-being-generated", "title": "C/C++ Python exception traceback not being generated", "body": "<p>I recently upgraded a C++ project I'm working on, which embedds python, from Python 3.4.3 to Python 3.5.2 (it is an executable that builds as 32 or 64 bits, and has the same behavior in both versions). </p>\n\n<p>I am creating my own exception:</p>\n\n<pre><code>static PyObject* MyException_type_obj = 0;\n\nvoid setup(PyObject* module){\n   MyException_type_obj = PyErr_NewException(\"my_module.MyException\", NULL, NULL);\n\n   PyObject* dict = PyModule_GetDict(module);\n   PyDict_SetItemString(dict, \"MyException\", MyException_type_obj);\n}\n</code></pre>\n\n<p>Then raising it in some C++ code that is called by python code:</p>\n\n<pre><code>static PyObject* RaiseIt(PyObject* self, PyObject* args)\n{\n   PyErr_Format(Forever_Exception_type_obj, \"Exit Requested\");\n   return 0;\n}\n</code></pre>\n\n<p>So far, so good. If I catch it in python, everything is fine:</p>\n\n<pre><code>try:\n    my_module.raise_it()\nexcept my_module.MyException:\n    import sys, traceback\n    exc_type, exc_value, exc_tb = sys.exc_info()\n    print(traceback.format_exception(exc_type, exc_value, exc_tb)\n</code></pre>\n\n<p>Prints the correct tracback to the command line.</p>\n\n<p>However, when I try to do a similar thing in C++/Python where I use <code>PyErr_Fetch</code>:</p>\n\n<pre><code>std::string get_traceback(){\n   PyObject* type;\n   PyObject* value;\n   PyObject* traceback;\n\n   PyErr_Fetch(&amp;type, &amp;value, &amp;traceback);\n\n   std::string fcn = \"\";\n   fcn += \"def get_pretty_traceback(exc_type, exc_value, exc_tb):\\n\";\n   fcn += \"    import sys, traceback\\n\";\n   fcn += \"    lines = []\\n\"; \n   fcn += \"    lines = traceback.format_exception(exc_type, exc_value, exc_tb)\\n\";\n   fcn += \"    output = '\\\\n'.join(lines)\\n\";\n   fcn += \"    return output\\n\";\n\n   PyRun_SimpleString(fcn.c_str());\n   PyObject* mod = PyImport_ImportModule(\"__main__\");\n   PyObject* method = PyObject_GetAttrString(mod, \"get_pretty_traceback\");\n   PyObject* outStr = PyObject_CallObject(method, Py_BuildValue(\"OOO\", type, value, traceback));\n   std::string pretty = PyBytes_AsString(PyUnicode_AsASCIIString(outStr));\n\n   Py_DECREF(method);\n   Py_DECREF(outStr);\n\n   return pretty;\n}\n</code></pre>\n\n<p>It breaks down and I get a null <code>outStr</code>.</p>\n\n<p>Getting some additional details</p>\n\n<pre><code>   fcn += \"    lines = []\\n\"; \n   fcn += \"    try:\\n\";\n   fcn += \"        lines = traceback.format_exception(exc_type, exc_value, exc_tb)\\n\";\n   fcn += \"    except Exception as e:\\n\";\n   fcn += \"        print('Exception while rendering a python exception for C')\\n\";\n   fcn += \"        print(e)\\n\";\n   fcn += \"    output = '\\\\n'.join(lines)\\n\";\n</code></pre>\n\n<p>Gives me the cryptic error message:</p>\n\n<pre><code>'str' object has no attribute '__cause__'\n</code></pre>\n\n<p>As an aside, this does not happen in python 2.7 either (with minor string-related changes). It is only occouring for me in python 3.5.</p>\n\n<p>This same C++ get_traceback() function works fine with exceptions initiated in python, just not the C++ ones. </p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 1104, "user_id": 7296908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/523fdee63293ed32d8b695c146a9c35c?s=128&d=identicon&r=PG&f=1", "display_name": "negacao", "link": "https://stackoverflow.com/users/7296908/negacao"}, "edited": false, "score": 0, "creation_date": 1482339585, "post_id": 41268042, "comment_id": 69736972, "body": "What command are you using to compile this?"}, {"owner": {"reputation": 3, "user_id": 7172410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472705a343ad4cf9bc625691195d0f40?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/7172410/anonymous"}, "reply_to_user": {"reputation": 1104, "user_id": 7296908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/523fdee63293ed32d8b695c146a9c35c?s=128&d=identicon&r=PG&f=1", "display_name": "negacao", "link": "https://stackoverflow.com/users/7296908/negacao"}, "edited": false, "score": 0, "creation_date": 1482339654, "post_id": 41268042, "comment_id": 69737007, "body": "But when i add a line of code cout&lt;&lt;&quot;text&quot;; to the int main() {}  it only prints text"}, {"owner": {"reputation": 388, "user_id": 2966528, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0459227f00c782db1d836a1c4637d3c2?s=128&d=identicon&r=PG&f=1", "display_name": "automaton", "link": "https://stackoverflow.com/users/2966528/automaton"}, "edited": false, "score": 0, "creation_date": 1482339683, "post_id": 41268042, "comment_id": 69737025, "body": "The problem is not in the code, but in the command you&#39;re trying to use to build the executable. How are you trying to compile? Please post whatever commands you are using."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 388, "user_id": 2966528, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0459227f00c782db1d836a1c4637d3c2?s=128&d=identicon&r=PG&f=1", "display_name": "automaton", "link": "https://stackoverflow.com/users/2966528/automaton"}, "edited": false, "score": 0, "creation_date": 1482339748, "post_id": 41268042, "comment_id": 69737054, "body": "@automaton No, that has nothing to do with it. As mentioned in the answer there are uninitalized variables used in the loop."}, {"owner": {"reputation": 3, "user_id": 7172410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472705a343ad4cf9bc625691195d0f40?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/7172410/anonymous"}, "edited": false, "score": 0, "creation_date": 1482339760, "post_id": 41268042, "comment_id": 69737061, "body": "I am using eclipse neon with minGW compiler...i dont see any code on the eclipse command line"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482339823, "post_id": 41268042, "comment_id": 69737096, "body": "@Anonymous It works fine is you fix the uninitialized variables: <a href=\"http://coliru.stacked-crooked.com/a/127964fb8ebc1a95\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/127964fb8ebc1a95</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482339976, "post_id": 41268042, "comment_id": 69737187, "body": "@Anonymous Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7172410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472705a343ad4cf9bc625691195d0f40?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/7172410/anonymous"}, "edited": false, "score": 0, "creation_date": 1482339710, "post_id": 41268069, "comment_id": 69737034, "body": "Im sorry but didnt under stand please elaborate"}, {"owner": {"reputation": 1104, "user_id": 7296908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/523fdee63293ed32d8b695c146a9c35c?s=128&d=identicon&r=PG&f=1", "display_name": "negacao", "link": "https://stackoverflow.com/users/7296908/negacao"}, "edited": false, "score": 0, "creation_date": 1482339739, "post_id": 41268069, "comment_id": 69737049, "body": "OP says &quot;but my minGW compiler says nothing to build.&quot; Does not sound like he&#39;s even reaching the point where this would matter."}, {"owner": {"reputation": 4168, "user_id": 6273251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fCGXep-7snc/AAAAAAAAAAI/AAAAAAAAADk/nk_YDFGfkc0/photo.jpg?sz=128", "display_name": "Random Davis", "link": "https://stackoverflow.com/users/6273251/random-davis"}, "reply_to_user": {"reputation": 3, "user_id": 7172410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472705a343ad4cf9bc625691195d0f40?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/7172410/anonymous"}, "edited": false, "score": 0, "creation_date": 1482339814, "post_id": 41268069, "comment_id": 69737087, "body": "@Anonymous If you don&#39;t understand what that means, please search this site and elsewhere for that information."}, {"owner": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "edited": false, "score": 0, "creation_date": 1482339820, "post_id": 41268069, "comment_id": 69737094, "body": "You can google what is Undefined behavior. In case of UB, any thing can happen. The behavior can&#39;t be predicted."}, {"owner": {"reputation": 3, "user_id": 7172410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472705a343ad4cf9bc625691195d0f40?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/7172410/anonymous"}, "edited": false, "score": 0, "creation_date": 1482339847, "post_id": 41268069, "comment_id": 69737107, "body": "@SauravSahu I didn&#39;t understand"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 3, "user_id": 7172410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472705a343ad4cf9bc625691195d0f40?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/7172410/anonymous"}, "edited": false, "score": 0, "creation_date": 1482339903, "post_id": 41268069, "comment_id": 69737137, "body": "@Anonymous What don&#39;t you understand? You did that correct in the 1st function and missed it in the 2nd."}, {"owner": {"reputation": 3, "user_id": 7172410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472705a343ad4cf9bc625691195d0f40?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/7172410/anonymous"}, "edited": false, "score": 0, "creation_date": 1482339964, "post_id": 41268069, "comment_id": 69737181, "body": "@SauravSahu Ohhhh k i get it tysm :)"}, {"owner": {"reputation": 3, "user_id": 7172410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472705a343ad4cf9bc625691195d0f40?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/7172410/anonymous"}, "edited": false, "score": 0, "creation_date": 1482340048, "post_id": 41268069, "comment_id": 69737227, "body": "I have used Matrix[i][j] in both 1st and 2nd function.... [im sorr y if that sounded stupid, im new to c++]"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 3, "user_id": 7172410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472705a343ad4cf9bc625691195d0f40?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/7172410/anonymous"}, "edited": false, "score": 0, "creation_date": 1482340319, "post_id": 41268069, "comment_id": 69737372, "body": "@Anonymous <i>&quot;But i dont get that error in eclipse...&quot;</i> Well, undefined behavior is eeerm undefined."}, {"owner": {"reputation": 3, "user_id": 7172410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472705a343ad4cf9bc625691195d0f40?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/7172410/anonymous"}, "edited": false, "score": 0, "creation_date": 1482340651, "post_id": 41268069, "comment_id": 69737556, "body": "What did you exactly change? I am sorry I am very new to c++ (5 hours new please have mercy)"}, {"owner": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "edited": false, "score": 0, "creation_date": 1482340802, "post_id": 41268069, "comment_id": 69737639, "body": "Solution : Just set <code>i</code> and <code>j</code> to <code>0</code>, before firing up the <code>for</code> loops"}, {"owner": {"reputation": 3, "user_id": 7172410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472705a343ad4cf9bc625691195d0f40?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/7172410/anonymous"}, "edited": false, "score": 0, "creation_date": 1482341118, "post_id": 41268069, "comment_id": 69737789, "body": "It worked but i do not know what changed in the <a href=\"http://coliru.stacked-crooked.com/a/127964fb8ebc1a95\" rel=\"nofollow noreferrer\">correctCode</a>"}, {"owner": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "edited": false, "score": 0, "creation_date": 1482341241, "post_id": 41268069, "comment_id": 69737847, "body": "You need to learn the programming language step by step, else everything would appear to you like a magic. ATB"}, {"owner": {"reputation": 3, "user_id": 7172410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472705a343ad4cf9bc625691195d0f40?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/7172410/anonymous"}, "edited": false, "score": 0, "creation_date": 1482341333, "post_id": 41268069, "comment_id": 69737911, "body": "Pffffff my 12 year old brain [im 16] I got it thanks to every one im just horrible, it defines my computer grades very well [ i got a c]"}], "tags": [], "owner": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1482339593, "creation_date": 1482339593, "answer_id": 41268069, "question_id": 41268042, "link": "https://stackoverflow.com/questions/41268042/i-dont-get-a-result-in-the-console-c/41268069#41268069", "title": "I dont get a result in the console [c++]", "body": "<pre><code>  for(int i; i &lt; rows; i++)\n        {\n            for(int j; j &lt; coloms; j++)\n     {\n            cout&lt;&lt; Matrix[i][j];\n        }\n    }\n</code></pre>\n\n<p>You are accessing <code>i</code> and <code>j</code> which are uninitialized local variables. So, it's an undefined behavior.</p>\n"}], "owner": {"reputation": 3, "user_id": 7172410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472705a343ad4cf9bc625691195d0f40?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/7172410/anonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 41268069, "answer_count": 1, "score": -5, "last_activity_date": 1482341497, "creation_date": 1482339518, "last_edit_date": 1482341497, "question_id": 41268042, "link": "https://stackoverflow.com/questions/41268042/i-dont-get-a-result-in-the-console-c", "title": "I dont get a result in the console [c++]", "body": "<p>I've created a 2D array with length and width.</p>\n\n<p>My minGW compiler says nothing to build.\nHere's the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nconst int rows = 5;\nconst int coloms = 5;\nint Matrix[rows][coloms];\n\nvoid ClearMatrix()\n{\n    for(int i=0; i &lt; rows; i++)\n    {\n        for(int j=0; j &lt; coloms; j++)\n        {\n            Matrix[i][j] = 0;\n        }\n    }\n}\n\nvoid ShowMatrix()\n{\n    for(int i; i &lt; rows; i++)\n    {\n         for(int j; j &lt; coloms; j++)\n         {\n            cout&lt;&lt; Matrix[i][j];\n         }\n    }\n}\n\nint main()\n{\n    ClearMatrix();\n    ShowMatrix();\n    return 0;\n}\n</code></pre>\n\n<p>What am I doing wrong here?</p>\n"}, {"tags": ["c++", "object", "heap", "delete-operator"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482339108, "post_id": 41267878, "comment_id": 69736692, "body": "Use a <code>std::unique_ptr&lt;SceneObject&gt;</code> instead of the raw pointer and do not try to manage <code>new</code> and <code>delete</code> yourself."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482339116, "post_id": 41267878, "comment_id": 69736695, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}, {"owner": {"reputation": 25, "user_id": 7326691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746b295cb02104a391e3a72cdd8e7845?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/7326691/j-doe"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482340854, "post_id": 41267878, "comment_id": 69737664, "body": "I tried to use <i>unique_ptr</i> but it causes to many errors with the skeleton code I was given, is there any other way to make the child and parent pointers unique to the given class whilst keeping the parameter declaration for the functions the same?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482340934, "post_id": 41267878, "comment_id": 69737700, "body": "Well, you don&#39;t want <code>delete child-&gt;parent;</code> but <code>child-&gt;parent = nullptr;</code>. Think twice: Should the former <code>parent</code> object really cease to exist if the <code>chilld</code> is moved to another parent?"}, {"owner": {"reputation": 25, "user_id": 7326691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746b295cb02104a391e3a72cdd8e7845?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/7326691/j-doe"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482341078, "post_id": 41267878, "comment_id": 69737764, "body": "and this will remove it from the stack, because when I run the code with the line <code>delete child-&gt;parent</code> I get a stack overflow"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482341132, "post_id": 41267878, "comment_id": 69737795, "body": "Yes, because it most probably causes an endless recursion in the destructor call of <code>~SceneObject()</code>."}, {"owner": {"reputation": 25, "user_id": 7326691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746b295cb02104a391e3a72cdd8e7845?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/7326691/j-doe"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482341176, "post_id": 41267878, "comment_id": 69737815, "body": "As part of the task it says that &quot;when a child is assigned a new parent, it&#39;s old parent should be deleted as well as the parents children&quot;. I think i need to do this because it results in a sack overflow when the Accelerator function is run"}, {"owner": {"reputation": 25, "user_id": 7326691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746b295cb02104a391e3a72cdd8e7845?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/7326691/j-doe"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482341257, "post_id": 41267878, "comment_id": 69737854, "body": "When I debugged the program the endless recursion occurs at <code>foreach_c (SceneObject *, child, object-&gt;GetChildren())         AddObject(*child);</code> line in the code"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482341274, "post_id": 41267878, "comment_id": 69737870, "body": "<i>&quot;when a child is assigned a new parent, it&#39;s old parent should be deleted as well as the parents children&quot;.</i> That doesn&#39;t make any sense. Are you sure you understood the instructions correctly?"}, {"owner": {"reputation": 25, "user_id": 7326691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746b295cb02104a391e3a72cdd8e7845?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/7326691/j-doe"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482341361, "post_id": 41267878, "comment_id": 69737930, "body": "Apologies I meant &quot;without&quot; in the response above"}, {"owner": {"reputation": 25, "user_id": 7326691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746b295cb02104a391e3a72cdd8e7845?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/7326691/j-doe"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482341478, "post_id": 41267878, "comment_id": 69737997, "body": "Yeah this is exactly what it says <i>Ensure that all child objects are deleted when you delete a SceneObject object</i>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482341634, "post_id": 41267878, "comment_id": 69738079, "body": "Means <i>all childs</i> of the current <code>SceneObject</code>, not of the former <code>parent</code>s object. Remove that <code>delete child-&gt;parent;</code> nonsense from your code. It doesn&#39;t do what your task says."}, {"owner": {"reputation": 25, "user_id": 7326691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746b295cb02104a391e3a72cdd8e7845?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/7326691/j-doe"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482341745, "post_id": 41267878, "comment_id": 69738133, "body": "The instructions say to delete the relationship (not the object, my bad), but if i just delete the relationship, the parent object still exists in the stack and causes overflow"}, {"owner": {"reputation": 25, "user_id": 7326691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746b295cb02104a391e3a72cdd8e7845?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/7326691/j-doe"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482342201, "post_id": 41267878, "comment_id": 69738367, "body": "I&#39;ve removed the delete line, and used what you said above the line <code>child-&gt;parent = nullptr;</code>, how would you reccommend I handle the stack overflow error? Keep in mind the SimpleAccelerator::AddObject() function wasn&#39;t written by me so I don&#39;t think I should change it"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482342209, "post_id": 41267878, "comment_id": 69738372, "body": "So how does your <code>SceneObject</code>&#39;s destructor definition look then? Are you using <code>delete child-&gt;parent;</code> there also? Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that can be taken to reproduce your error."}, {"owner": {"reputation": 25, "user_id": 7326691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746b295cb02104a391e3a72cdd8e7845?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/7326691/j-doe"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482342789, "post_id": 41267878, "comment_id": 69738694, "body": "The project contains a lot of classes, so here&#39;s a link to a google drive where you can download the .zip and run it <a href=\"https://drive.google.com/open?id=0B4qDAMtotLhZbnFNZGx2Yi1GRms\" rel=\"nofollow noreferrer\">drive.google.com/open?id=0B4qDAMtotLhZbnFNZGx2Yi1GRms</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482342880, "post_id": 41267878, "comment_id": 69738745, "body": "Prepare a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that reproduces the problem as mentioned please!"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482343020, "post_id": 41267878, "comment_id": 69738811, "body": "I can&#39;t even open your link, because I have no access rights. Do as I advised you please. NOW!"}, {"owner": {"reputation": 25, "user_id": 7326691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746b295cb02104a391e3a72cdd8e7845?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/7326691/j-doe"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482344587, "post_id": 41267878, "comment_id": 69739707, "body": "I&#39;ve added the classes and edited them to what is being used up until the point of crashing but as you can see there are a lot of classes, this is fairly big project which is why I tried sending you the zip, this isnt even all of the classes and headers in the file"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482344675, "post_id": 41267878, "comment_id": 69739764, "body": "What&#39;s so hard to understand when I said <b><i>minimal</i></b>?? You have to remove all the irrelevant code until the error still can be reproduced. It&#39;s required to put real efforts when asking here. That process might lead you to get the answer yourself, which is appreciated before a new question is added here."}, {"owner": {"reputation": 25, "user_id": 7326691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746b295cb02104a391e3a72cdd8e7845?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/7326691/j-doe"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482344755, "post_id": 41267878, "comment_id": 69739813, "body": "This is the minimal, you cannot run the code unless you use all these classes"}, {"owner": {"reputation": 25, "user_id": 7326691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746b295cb02104a391e3a72cdd8e7845?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/7326691/j-doe"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482344815, "post_id": 41267878, "comment_id": 69739844, "body": "The main needs to invoke these classes in order to create the objects which are causing the problem, look I dont expect you to find the cause of the problem, you can close this question"}, {"owner": {"reputation": 25, "user_id": 7326691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746b295cb02104a391e3a72cdd8e7845?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/7326691/j-doe"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482344998, "post_id": 41267878, "comment_id": 69739949, "body": "I debugged to come up with this minimal code, all the functions above are invoked and I removed the ones that arent"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 7326691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746b295cb02104a391e3a72cdd8e7845?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/7326691/j-doe"}, "edited": false, "score": 0, "creation_date": 1482339362, "post_id": 41267913, "comment_id": 69736842, "body": "I&#39;m not too sure if I should be changing the parameter of the functions, because they were given to me like this in the skeleton which we were told to fill out, but I&#39;ll try it this way and get back to you on updates of wether it works!"}, {"owner": {"reputation": 25, "user_id": 7326691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746b295cb02104a391e3a72cdd8e7845?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/7326691/j-doe"}, "edited": false, "score": 0, "creation_date": 1482340048, "post_id": 41267913, "comment_id": 69737228, "body": "yeah I was trying to switch all that I could to <i>unique_ptr</i> but unfortunately it causes a lot of errors with the skeleton code and I&#39;m afraid changing that will result in other problems down the line, any other way of doing this?"}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 0, "last_activity_date": 1482339051, "creation_date": 1482339051, "answer_id": 41267913, "question_id": 41267878, "link": "https://stackoverflow.com/questions/41267878/how-to-delete-an-object-which-is-a-member-of-another-object-c/41267913#41267913", "title": "How to delete an object which is a member of another object c++", "body": "<p>If the <code>parent</code> is supposed to <em>own</em> the children, I would change the member to be</p>\n\n<pre><code>std::vector&lt;std::unique_ptr&lt;SceneObject&gt;&gt; children;\n</code></pre>\n\n<p>Then when the <code>SceneObject</code> falls out of scope, it will make sure to implicitly <code>delete</code> each of the children without any further effort on your part.</p>\n\n<p>So you could change the <code>AddChild</code> method to be</p>\n\n<pre><code>bool SceneObject::AddChild(std::unique_ptr&lt;SceneObject&gt; child)\n</code></pre>\n\n<p>and to call it</p>\n\n<pre><code>scene-&gt;AddChild(std::make_unique&lt;PointLight&gt;(vec3(10.0f)));\n</code></pre>\n\n<p>Inside the <code>AddChild</code> method you can pass the pointer on such that <code>this</code> now owns that pointer</p>\n\n<pre><code>children.push_back(std::move(child));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17966, "user_id": 1032073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/649a4.png?s=128&g=1", "display_name": "celtschk", "link": "https://stackoverflow.com/users/1032073/celtschk"}, "is_accepted": true, "score": 0, "last_activity_date": 1482346685, "creation_date": 1482346685, "answer_id": 41270037, "question_id": 41267878, "link": "https://stackoverflow.com/questions/41267878/how-to-delete-an-object-which-is-a-member-of-another-object-c/41270037#41270037", "title": "How to delete an object which is a member of another object c++", "body": "<p>You need to tell the old parent that this object is no longer its child, and that parent must then update its list of children to no longer contain a pointer to this object.</p>\n\n<p>For example:</p>\n\n<pre><code>bool SceneObject::AddChild(SceneObject *child)\n{   \n    if (child == NULL) {\n        return false;\n    }\n    else if (child-&gt;GetParent() != this) {\n        child-&gt;parent-&gt;RemoveChild(child);\n        child-&gt;parent = this;\n        children.push_back(child);\n        child-&gt;UpdateTransformations();\n        return true;\n    }\n    else {\n        this-&gt;children.push_back(child);\n        child-&gt;parent = this;\n        child-&gt;UpdateTransformations();\n        return true;\n    }\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>bool SceneObject::RemoveChild(SomeObject* child)\n{\n  auto iter = std::find(children.begin(), children.end(), child);\n  if (iter == children.end())\n    return false;\n  else\n  {\n    children.erase(iter);\n    return true;\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7326691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746b295cb02104a391e3a72cdd8e7845?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/7326691/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "closed_date": 1482361531, "accepted_answer_id": 41270037, "answer_count": 2, "score": 0, "last_activity_date": 1482346685, "creation_date": 1482338914, "last_edit_date": 1482344449, "question_id": 41267878, "link": "https://stackoverflow.com/questions/41267878/how-to-delete-an-object-which-is-a-member-of-another-object-c", "closed_reason": "Not suitable for this site", "title": "How to delete an object which is a member of another object c++", "body": "<p>I have a function ( AddChild(child) ) which is meant to take an object as a parameter and adds this object as a child of the parent object which invokes the function.</p>\n\n<p>Code creating the scene and invoking the function</p>\n\n<pre><code>Scene *scene = new Scene();\n\n // Create a light.\nLight *light = new PointLight(vec3(10.0f));\n\nlight-&gt;SetPosition(vec3(-5.0f, 3.0f, 2.0f));\nscene-&gt;AddChild(light);\n</code></pre>\n\n<p>So as you can see here, the scene should be adding a light as its child</p>\n\n<p>In the AddChild(child) function, the Object is checked to see if it already has a parent, if it does, it needs to delete this parent (as later on in a different class there is a function that checks all objects in the heap and if the parent object isnt deleted it is still in the heap and causes errors) and update it's parent to be the object which invoked the function. You can see the code which will cause this heap error below:</p>\n\n<pre><code>void Raytracer::SimpleAccelerator::AddObject(const SceneObject *object)\n{\n    if (object-&gt;IsInstanceOf(SceneObjectType_PhysicalObject))\n        physicalObjects.push_back((PhysicalObject *)object);\n\n    if (object-&gt;IsInstanceOf(SceneObjectType_Light))\n        lights.push_back((Light *)object);\n\n    foreach_c (SceneObject *, child, object-&gt;GetChildren())\n        AddObject(*child);\n}\n</code></pre>\n\n<p>But the main problem I'm having is, when I check to see if the child has a parent, and the parent isnt the object invoking the function, then I want to delete the parent of this child and update accordingly. The only problem is when I try to delete the child's parent Visual Studio crashes and I debugged the code and its on the line indicated below that causes the error. </p>\n\n<pre><code>bool SceneObject::AddChild(SceneObject *child)\n{   \n    if (child == NULL) {\n        return false;\n    }\n    else if (child-&gt;GetParent() != this) {\n        delete child-&gt;parent;     &lt;------------This is the line which breaks the code\n        child-&gt;parent = this;\n        children.push_back(child);\n        child-&gt;UpdateTransformations();\n        return true;\n    }\n    else {\n        this-&gt;children.push_back(child);\n        child-&gt;parent = this;\n        child-&gt;UpdateTransformations();\n        return true;\n    }\n}\n</code></pre>\n\n<p>child and parent are both members of the class SceneObject which you can see below</p>\n\n<pre><code>Class SceneObject\n    {\n    private:\n\n        glm::mat4x4 globalTransformation;\n\n    public:\n\n        std::vector&lt;SceneObject *&gt; children;\n        SceneObject * parent;\n        SceneObject *GetParent() const;\n        const std::vector&lt;SceneObject *&gt; &amp;GetChildren() const;\n\n    };\n</code></pre>\n\n<p>What would be the best method of deleting this member so that it and it's member variables are not present in the Heap during the Accelerator function?</p>\n\n<p>MCVC</p>\n\n<p>SceneObject.h</p>\n\n<pre><code>#ifndef RAYTRACER_SCENES_SCENEOBJECT_H\n#define RAYTRACER_SCENES_SCENEOBJECT_H\n\n#include &lt;Raytracer/Scenes/SceneObjectType.h&gt;\n\n#include &lt;vector&gt;\n\nnamespace Raytracer\n{\n    namespace Scenes\n    {\n        class SceneObject\n        {\n        private:\n            glm::mat4x4 globalTransformation;\n\n            void UpdateTransformations();\n\n        public:\n\n            std::vector&lt;SceneObject *&gt; children;\n            SceneObject * parent;\n\n            SceneObject();\n\n            virtual ~SceneObject();\n\n\n            bool AddChild(SceneObject *child);\n\n            const std::vector&lt;SceneObject *&gt; &amp;GetChildren() const;\n\n            const glm::vec3 GetGlobalPosition() const;\n\n            const glm::mat4x4 &amp;GetGlobalToLocal() const;\n\n            const glm::mat4x4 &amp;GetGlobalTransformation() const;\n\n            SceneObject *GetParent() const;\n        };\n    }\n}\n\n#endif // RAYTRACER_SCENES_SCENEOBJECT_H\n</code></pre>\n\n<p>SceneObject.cpp</p>\n\n<pre><code>#define RAYTRACER_USE_FOREACH\n#include &lt;iostream&gt;\n#include &lt;Raytracer/Raytracer.h&gt;\n\nusing namespace glm;\nusing namespace Raytracer::Scenes;\n\nSceneObject::SceneObject()\n{\n    SetGlobalTransformation(mat4x4(1.0f));\n}\n\nSceneObject::~SceneObject()\n{\n}\n\nbool SceneObject::AddChild(SceneObject *child)\n{\n    if (child == NULL) {\n        return false;\n    }\n    else if (child-&gt;GetParent() != this) {\n        child-&gt;parent = nullptr;\n        child-&gt;parent = this;\n        this-&gt;children.push_back(child);\n        child-&gt;UpdateTransformations();\n        return true;\n    }\n    else {\n        this-&gt;children.push_back(child);\n        child-&gt;parent = this;\n        child-&gt;UpdateTransformations();\n        return true;\n    }\n}\n\nvoid delete_pointed_to(SceneObject* const ptr)\n{\n    delete ptr;\n}\n\nconst std::vector&lt;SceneObject *&gt; &amp;SceneObject::GetChildren() const\n{\n    // TODO: Geben Sie eine Liste der Kindobjekte dieses Objekts zur\u00fcck.\n    static std::vector&lt;SceneObject *&gt; empty = this-&gt;children;\n    return empty;\n}\n\nconst mat4x4 &amp;SceneObject::GetGlobalTransformation() const\n{\n    return globalTransformation;\n}\n\nSceneObject *SceneObject::GetParent() const\n{\n    // TODO: Geben Sie eine Zeiger auf das Elternobjekt zur\u00fcck oder NULL, falls dieses Objekt kein\n    // Elternobjekt hat.\n    if (this-&gt;parent == NULL) {\n        return NULL;\n    }\n    else {\n        return this-&gt;parent;\n    }\n}\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#include &lt;vector&gt;\n\n#include &lt;glm.hpp&gt;\n#include &lt;gtc/matrix_transform.hpp&gt; \n\n#include &lt;Raytracer/Raytracer.h&gt;\n\nusing namespace glm;\nusing namespace Raytracer;\nusing namespace Raytracer::Scenes;\nusing namespace Raytracer::Objects;\n\n/**\n * Creates a transformation matrix for a rotation around the x axis.\n *\n * @param a The rotation angle in degrees\n */\nmat4x4 RotationX(float a)\n{\n  return rotate(mat4x4(1.0f), a, vec3(1.0f, 0.0f, 0.0f));\n}\n\n/**\n * Creates a transformation matrix for a rotation around the y axis.\n *\n * @param a The rotation angle in degrees\n */\nmat4x4 RotationY(float a)\n{\n  return rotate(mat4x4(1.0f), a, vec3(0.0f, 1.0f, 0.0f));\n}\n\n/**\n * Creates a transformation matrix for a rotation around the z axis.\n *\n * @param a The rotation angle in degrees\n */\nmat4x4 RotationZ(float a)\n{\n  return rotate(mat4x4(1.0f), a, vec3(0.0f, 0.0f, 1.0f));\n}\n\n\nbool CreateSphereLevels(Sphere *parent, float childRadiusRatio, int levels,\n            Material** materials, int firstMaterial, int materialCount)\n{\n\n// TODO: Implementieren Sie die Funktion nach Ihrer in Aufgabe 1 definierten Vorschrift.\n// Der Methodenaufruf CreateSphereLevels(...) in dieser Form ist nur ein Vorschlag,\n// Sie k\u00f6nnen ihn beliebig anpassen und eine andere Logik verwenden\n\n  return true;\n}\n\n\n/**\n * Places a few spheres in the scene and adds some lights.\n *\n * @param scene The scene\n */\nScene *BuildScene(int depth, float aspect)\n{\n  const int materialCount = 6;\n\n  vec3 colors[materialCount] =\n  {\n    vec3(1.0f, 0.0f, 0.0f),\n    vec3(1.0f, 1.0f, 0.0f),\n    vec3(0.0f, 1.0f, 0.0f),\n    vec3(0.0f, 1.0f, 1.0f),\n    vec3(0.0f, 0.0f, 1.0f),\n    vec3(1.0f, 0.0f, 1.0f)\n  };\n\n  Material *materials[materialCount];\n\n  for (int i = 0; i &lt; materialCount; i++)\n  {\n    materials[i] = new Material();\n    if (materials[i] == NULL)\n      return NULL;\n\n    vec3 ambient = colors[i] * 0.01f;\n    materials[i]-&gt;SetAmbient(ambient);\n    materials[i]-&gt;SetDiffuse(colors[i]);\n    materials[i]-&gt;SetShininess(25.0f);\n  }\n\n  if (depth &lt;= 0)\n    return NULL;\n\n  // Create the scene.\n  Scene *scene = new Scene();\n  if (scene == NULL)\n    return NULL;\n\n  // TODO: Erstellen Sie hier die Kugelwolke der Tiefe depth und f\u00fcgen Sie sie in die Szene ein.\n  // Verwenden Sie die Materialien in materials zum Einf\u00e4rben der Kugeln.\n  // Impelementieren Sie hierf\u00fcr z.B. die Funktion CreateSphereLevels(...) (s.o.)\n\n\n\n\n  // Create a light.\n  Light *light = new PointLight(vec3(10.0f));\n  if (light == NULL)\n  {\n    delete scene;\n    return NULL;\n  }\n\n  light-&gt;SetPosition(vec3(-5.0f, 3.0f, 2.0f));\n  scene-&gt;AddChild(light);\n\n  // Create a camera.\n  Camera *camera = new Camera(vec3(-2.0f, 2.0f, 4.0f), vec3(0.0f, 0.0f, 0.0f), \n    vec3(0.0f, 1.0f, 0.0f), Camera::DefaultFov, aspect);\n  if (camera == NULL)\n  {\n    delete scene;\n    return NULL;\n  }\n  scene-&gt;AddChild(camera);\n  scene-&gt;SetActiveCamera(camera);\n\n  return scene;\n}\n\n/**\n * Renders the scene and saves the result to a BMP file.\n *\n * @param fileName The name of the file\n * @param width The image width\n * @param height The image height\n */\nvoid Render(const char *fileName, int width, int height)\n{\n  if (fileName == NULL || width &lt;= 0 || height &lt;= 0)\n    return;\n\n  SimpleRenderer renderer;\n\n  renderer.SetAccelerator(new SimpleAccelerator());\n  renderer.SetIntegrator(new PhongIntegrator());\n\n  puts(\"Generiere Szene...\");\n  Scene *scene = BuildScene(3, (float)width / height);\n  if (scene == NULL)\n    return;\n\n  puts(\"Rendere Bild...\");\n  Image *image = renderer.Render(*scene, width, height);\n  if (image != NULL)\n  {\n    puts(\"Speichere Ergebnis...\");\n    image-&gt;SaveBMP(fileName, 2.2f);\n    delete image;\n  }\n\n  delete scene;\n}\n\n/**\n * The main program\n */\nint main()\n{\n  Render(\"image.bmp\", 512, 512);\n  return 0;\n}\n</code></pre>\n\n<p>Simple Accelerator</p>\n\n<pre><code>#include &lt;limits&gt;\n\n#define RAYTRACER_USE_FOREACH\n#include &lt;Raytracer/Raytracer.h&gt;\n\nusing namespace Raytracer;\nusing namespace Raytracer::Scenes;\n\nbool SimpleAccelerator::HitTest(const Ray &amp;ray, RayHit *hit) const\n{\n    if (hit == NULL)\n    {\n        // Search for any intersection.\n        foreach_c (PhysicalObject *, object, physicalObjects)\n        {\n            Ray objectRay = ray.Transform((*object)-&gt;GetGlobalToLocal());\n            if ((*object)-&gt;HitTest(objectRay, NULL))\n                return true;\n        }\n\n        return false;\n    }\n    else\n    {\n        // Search for the closest intersection.\n        hit-&gt;Set(ray, 0, NULL);\n\n        foreach_c (PhysicalObject *, object, physicalObjects)\n        {\n            Ray objectRay = ray.Transform((*object)-&gt;GetGlobalToLocal());\n            RayHit objectHit;\n            if ((*object)-&gt;HitTest(objectRay, &amp;objectHit) &amp;&amp;\n                (hit-&gt;GetObject() == NULL || objectHit.GetDistance() &lt; hit-&gt;GetDistance()))\n            {\n                *hit = objectHit;\n            }\n        }\n\n        return (hit-&gt;GetObject() != NULL);\n    }\n}\n\nvoid Raytracer::SimpleAccelerator::SetScene(const Scenes::Scene *scene)\n{\n    this-&gt;scene = scene;\n    physicalObjects.clear();\n    lights.clear();\n\n    if (scene == NULL)\n        return;\n\n    AddObject(scene);\n}\n\nvoid Raytracer::SimpleAccelerator::AddObject(const SceneObject *object)\n{\n    if (object-&gt;IsInstanceOf(SceneObjectType_PhysicalObject))\n        physicalObjects.push_back((PhysicalObject *)object);\n\n    if (object-&gt;IsInstanceOf(SceneObjectType_Light))\n        lights.push_back((Light *)object);\n\n    foreach_c (SceneObject *, child, object-&gt;GetChildren())\n        AddObject(*child);\n}\n\nconst std::vector&lt;Light *&gt; &amp;SimpleAccelerator::GetLights() const\n{\n    return lights;\n}\n</code></pre>\n\n<p>Renderer.cpp</p>\n\n<pre><code>#include &lt;Raytracer/Raytracer.h&gt;\n\nusing namespace glm;\nusing namespace Raytracer;\nusing namespace Raytracer::Scenes;\n\nRenderer::Renderer()\n{\n    accelerator = NULL;\n    integrator = NULL;\n}\n\nRenderer::~Renderer()\n{\n    delete accelerator;\n    delete integrator;\n}\n\nvec3 Renderer::RenderPixel(const Camera &amp;camera, float x, float y) const\n{\n    Ray ray;\n    camera.SpawnRay(x, y, ray);\n    return integrator-&gt;GetColor(ray, *accelerator);\n}\n\nIIntegrator *Renderer::GetIntegrator() const\n{\n    return integrator;\n}\n\nvoid Renderer::SetIntegrator(IIntegrator *integrator)\n{\n    delete this-&gt;integrator;\n    this-&gt;integrator = integrator;\n}\n\nAccelerator *Raytracer::Renderer::GetAccelerator() const\n{\n    return accelerator;\n}\n\nvoid Raytracer::Renderer::SetAccelerator(Accelerator *accelerator)\n{\n    delete this-&gt;accelerator;\n    this-&gt;accelerator = accelerator;\n}\nImage *Renderer::Render(const Scenes::Scene &amp;scene, int width, int height)\n{\n    Camera *camera = scene.GetActiveCamera();\n\n    if (camera == NULL || accelerator == NULL || integrator == NULL || width &lt;= 0 || height &lt;= 0)\n        return NULL;\n\n    Image *image = new Image(width, height);\n    if (image == NULL)\n        return NULL;\n\n    accelerator-&gt;SetScene(&amp;scene);\n\n    RenderImage(*camera, image);\n\n    return image;\n}\n</code></pre>\n\n<p>PhongIntegrator.cpp</p>\n\n<pre><code>        Raytracer::PhongIntegrator::PhongIntegrator()\n        {\n            backgroundColor = vec3(0, 0, 0);\n        }\n</code></pre>\n\n<p>Renderer.h</p>\n\n<pre><code>#ifndef RAYTRACER_RENDERER_H\n#define RAYTRACER_RENDERER_H\n\n#include &lt;glm.hpp&gt;\n\n#include &lt;Raytracer/Image.h&gt;\n#include &lt;Raytracer/Scenes/Camera.h&gt;\n#include &lt;Raytracer/Scenes/Scene.h&gt;\n\nnamespace Raytracer\n{\n    /**\n     * Renders an image of a scene. The renderer object is not thread-safe.\n     */\n    class Renderer\n    {\n    private:\n        Accelerator *accelerator;\n        IIntegrator *integrator;\n\n    protected:\n        /**\n         * Renders a single pixel.\n         *\n         * @param camera The camera\n         * @param x The normalized x coordinate of the pixel in the 0-1 range\n         * @param y The normalized y coordinate of the pixel in the 0-1 range\n         *\n         * @return The color of the pixel\n         */\n        virtual glm::vec3 RenderPixel(const Scenes::Camera &amp;camera, float x, float y) const;\n\n        /**\n         * Renders an image.\n         *\n         * @param camera The camera to use for the rendering\n         * @param image The image to be filled with rendered pixels\n         */\n        virtual void RenderImage(const Scenes::Camera &amp;camera, Image *image) const = 0;\n\n    public:\n        /**\n         * Constructs a new Renderer object.\n         */\n        Renderer();\n\n        /**\n         * Destructs a Renderer object.\n         */\n        virtual ~Renderer();\n\n        /**\n         * Retrieves the IIntegrator interface used for rendering.\n         *\n         * @return The IIntegrator interface used for rendering. The Renderer object owns this\n         *   interface.\n         */\n        IIntegrator *GetIntegrator() const;\n\n        /**\n         * Sets the IIntegrator interface used for rendering.\n         *\n         * @param integrator The IIntegrator interface used for rendering. The Renderer object\n         *   takes ownership of this interface.\n         */\n        void SetIntegrator(IIntegrator *integrator);\n\n        /**\n         * Retrieves the Accelerator object used for rendering.\n         *\n         * @return The Accelerator object used for rendering. The Renderer object owns the\n         *   accelerator.\n         */\n        Accelerator *GetAccelerator() const;\n\n        /**\n         * Sets the Accelerator object used for rendering.\n         *\n         * @param accelerator The Accelerator object used for rendering. The Renderer object takes\n         *   ownership of the accelerator.\n         */\n        void SetAccelerator(Accelerator *accelerator);\n\n        /**\n         * Renders an image of a scene.\n         *\n         * @param scene The scene\n         * @param width The image width in pixels\n         * @param height The image height in pixels\n         * @return The rendered image or NULL if the rendering failed\n         * @remarks You cannot use the same Renderer object to render different scenes\n         *   simultaneously.\n         */\n        Image *Render(const Scenes::Scene &amp;scene, int width, int height); \n    };\n}\n\n#endif // RAYTRACER_RENDERER_H\n</code></pre>\n\n<p>SimpleAccelerator.h</p>\n\n<pre><code>#ifndef RAYTRACER_SIMPLEACCELERATOR_H\n#define RAYTRACER_SIMPLEACCELERATOR_H\n\n#include &lt;vector&gt;\n\n#include &lt;Raytracer/Accelerator.h&gt;\n// #include &lt;Raytracer/Ray.h&gt;\n\nnamespace Raytracer\n{\n    class Ray;\n    class RayHit;\n\n    namespace Scenes\n    {\n        class Light;\n        class PhysicalObject;\n        class Scene;\n        class SceneObject;\n    }\n\n    /**\n     * A simple accelerator that uses brute force testing of all objects to find intersections.\n     */\n    class SimpleAccelerator : public Accelerator\n    {\n    private:\n        /**\n         * A list of all physical objects in the scene\n         */\n        std::vector&lt;Scenes::PhysicalObject *&gt; physicalObjects;\n\n        std::vector&lt;Scenes::Light *&gt; lights;\n\n        void AddObject(const Scenes::SceneObject *object);\n\n    public:\n        virtual const std::vector&lt;Scenes::Light *&gt; &amp;GetLights() const;\n\n        virtual bool HitTest(const Ray &amp;ray, RayHit *hit) const;\n\n        virtual void SetScene(const Scenes::Scene *scene);\n    };\n}\n\n#endif // RAYTRACER_SIMPLEACCELERATOR_H\n</code></pre>\n\n<p>Phong Integrator.h</p>\n\n<pre><code>#ifndef RAYTRACER_PHONGINTEGRATOR_H\n#define RAYTRACER_PHONGINTEGRATOR_H\n\n#include &lt;glm.hpp&gt;\n\n#include &lt;Raytracer/IIntegrator.h&gt;\n\nnamespace Raytracer\n{\nnamespace Scenes\n{\n    class Scene;\n}\n\n/**\n * Calculates the visible color seen by a ray using the Phong illumination model.\n */\nclass PhongIntegrator : public IIntegrator\n{\nprivate:\n    /**\n     * The background color seen by rays that exit the scene\n     */\n    glm::vec3 backgroundColor;\n\npublic:\n    /**\n     * Constructs a new PhongIntegrator object.\n     */\n    PhongIntegrator();\n\n    glm::vec3 GetColor(Ray &amp;ray, const Accelerator &amp;accelerator);\n};\n}\n\n#endif // RAYTRACER_PHONGINTEGRATOR_H\n</code></pre>\n\n<p>Light.cpp</p>\n\n<pre><code>#include &lt;Raytracer/Raytracer.h&gt;\n\nusing namespace Raytracer::Scenes;\n\nbool Light::IsInstanceOf(SceneObjectType type) const\n{\n    return (type == SceneObjectType_Light);\n}\n</code></pre>\n\n<p>Light.h</p>\n\n<pre><code>#ifndef RAYTRACER_SCENES_LIGHT_H\n#define RAYTRACER_SCENES_LIGHT_H\n\n#include &lt;glm.hpp&gt;\n\n#include &lt;Raytracer/Intersection.h&gt;\n#include &lt;Raytracer/Scenes/SceneObject.h&gt;\n\nnamespace Raytracer\n{\n    struct Sample;\n\n    namespace Scenes\n    {\n        class Scene;\n\n        /**\n         * A light source\n         */\n        class Light : public SceneObject\n        {\n        public:\n            /**\n             * Computes the direct contribution of this light in the illumination of a surface\n             * point.\n             *\n             * @param accelerator An accelerator object that can be used to trace secondary rays\n             *   through the scene\n             * @param intersection An intersection of a view ray with an object\n             * @return A color value representing the direct contribution\n             */\n            virtual glm::vec3 ComputeDirectContribution(const Accelerator *accelerator,\n                const Intersection &amp;intersection) = 0;\n\n            virtual bool IsInstanceOf(SceneObjectType type) const;\n        };\n    }\n}\n\n#endif // RAYTRACER_SCENES_LIGHT_H\n</code></pre>\n\n<p>Scene.h</p>\n\n<pre><code>#ifndef RAYTRACER_SCENES_SCENE_H\n#define RAYTRACER_SCENES_SCENE_H\n\n#include &lt;Raytracer/Scenes/SceneObject.h&gt;\n\nnamespace Raytracer\n{\n    class Ray;\n\n    namespace Scenes\n    {\n        class Camera;\n\n        class Scene : public SceneObject\n        {\n        private:\n            /**\n             * The camera that is to be used for rendering the scene\n             */\n            Camera *activeCamera;\n\n        public:\n            /**\n             * Constructs a new Scene object.\n             */\n            Scene();\n\n            /**\n             * Retrieves the active camera, i.e. the camera object to be used for rendering the\n             * scene.\n             *\n             * @return The active camera or NULL if there is no active camera\n             */\n            Camera *GetActiveCamera() const;\n\n            virtual bool IsInstanceOf(SceneObjectType type) const;\n\n            /**\n             * Sets the active camera, i.e. the camera object to be used for rendering the scene.\n             *\n             * @param camera The new active camera or NULL to set no active camera\n             */\n            void SetActiveCamera(Camera *camera);\n        };\n    }\n}\n\n#endif // RAYTRACER_SCENES_SCENE_H\n</code></pre>\n\n<p>Scene.cpp</p>\n\n<pre><code>#define RAYTRACER_USE_FOREACH\n#include &lt;Raytracer/Raytracer.h&gt;\n\nusing namespace Raytracer;\nusing namespace Raytracer::Scenes;\n\nScene::Scene()\n{\n    activeCamera = NULL;\n}\n\nCamera *Scene::GetActiveCamera() const\n{\n    return activeCamera;\n}\n\nbool Scene::IsInstanceOf(SceneObjectType type) const\n{\n    return (type == SceneObjectType_Scene);\n}\n\nvoid Scene::SetActiveCamera(Camera *camera)\n{\n    this-&gt;activeCamera = camera;\n}\n</code></pre>\n"}, {"tags": ["c++", "metaprogramming", "template-meta-programming", "operator-precedence", "evaluation-strategy"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 2, "creation_date": 1482338861, "post_id": 41267824, "comment_id": 69736556, "body": "UB is something that happens at runtime, template functions such as this do their work at compile time. As for &quot;will it delete $HOME&quot; see <a href=\"https://www.youtube.com/watch?v=yG1OZ69H_-o\" rel=\"nofollow noreferrer\">Chandler&#39;s talk</a>"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1482338927, "post_id": 41267824, "comment_id": 69736586, "body": "This is compile-time evaluation, not run-time. You won&#39;t run into UB here."}, {"owner": {"reputation": 6841, "user_id": 1190965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3e74ed8e572542a718df5f15ead40581?s=128&d=identicon&r=PG", "display_name": "nodakai", "link": "https://stackoverflow.com/users/1190965/nodakai"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1482339212, "post_id": 41267824, "comment_id": 69736761, "body": "@Borgleader OK &quot;will the resulting binary possibly delete my $HOME&quot; ? Actually I&#39;m not even sure if it constitutes an UB to write <code>std::underlying_type_t&lt;void&gt;</code> straight (w/o <code>std::conditional</code>.) Does &quot;shall&quot; there mean its violation leads to an ill-formed program?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1482339428, "post_id": 41267824, "comment_id": 69736889, "body": "@nodakai: <a href=\"http://en.cppreference.com/w/cpp/types/underlying_type\" rel=\"nofollow noreferrer\">cppreference</a> states it pretty well: &quot;If T is a complete enumeration type, provides a member typedef type that names the underlying type of T. Otherwise, the behavior is undefined.&quot;. Edit: So don&#39;t try to use <code>std::underlying_type_t&lt;void&gt;</code>"}, {"owner": {"reputation": 6841, "user_id": 1190965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3e74ed8e572542a718df5f15ead40581?s=128&d=identicon&r=PG", "display_name": "nodakai", "link": "https://stackoverflow.com/users/1190965/nodakai"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1482339870, "post_id": 41267824, "comment_id": 69737116, "body": "@AndyG I would not have posted this question if I could 100 % trust a community-driven wiki. I could not easily find any statements in n4140 which supports the last statement in your quote."}], "answers": [{"comments": [{"owner": {"reputation": 6841, "user_id": 1190965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3e74ed8e572542a718df5f15ead40581?s=128&d=identicon&r=PG", "display_name": "nodakai", "link": "https://stackoverflow.com/users/1190965/nodakai"}, "edited": false, "score": 0, "creation_date": 1482340169, "post_id": 41268073, "comment_id": 69737296, "body": "OK, so C++ metafunctions employ eager evaluation (if we don&#39;t use your &quot;tag&quot; trick.) Your post is very educating but I think I need a bit more time to grasp it."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 6841, "user_id": 1190965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3e74ed8e572542a718df5f15ead40581?s=128&d=identicon&r=PG", "display_name": "nodakai", "link": "https://stackoverflow.com/users/1190965/nodakai"}, "edited": false, "score": 0, "creation_date": 1482342348, "post_id": 41268073, "comment_id": 69738444, "body": "@nodakai Think of it as - template arguments are to metafunctions what function arguments are to functions."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 5, "last_activity_date": 1482339602, "creation_date": 1482339602, "answer_id": 41268073, "question_id": 41267824, "link": "https://stackoverflow.com/questions/41267824/what-is-the-evaluation-strategy-eager-lazy-of-c-metafunctions-such-as/41268073#41268073", "title": "What is the evaluation strategy (eager, lazy, ...) of C++ metafunctions such as std::conditional?", "body": "<blockquote>\n  <p>Will I step onto an UB [...]</p>\n</blockquote>\n\n<p>Technically, yes. But practically, it just won't compile for non-enumeration types. When you write:</p>\n\n<pre><code>std::conditional_t&lt;std::is_enum&lt;T&gt;::value, std::underlying_type_t&lt;T&gt;, foo&gt;;    \n                                           ^^^^^^^^^^^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>That template parameter must be evaluated <em>before</em> the <code>conditional</code> template can be instantiated. This is equivalent to all function arguments having to be invoked before the body of the function begins. For non-enumerated types, <code>underlying_type&lt;T&gt;</code> is incomplete (sure it's specified as undefined in the standard but let's be reasonable), so there is no <code>underlying_type_t</code>. So the instantiation fails.</p>\n\n<p>What you need to do is <em>delay</em> the instantiation in that case:</p>\n\n<pre><code>template &lt;class T&gt; struct tag { using type = T; };\n\ntypename std::conditional_t&lt;\n    std::is_enum&lt;T&gt;::value,\n    std::underlying_type&lt;T&gt;,\n    tag&lt;foo&gt;&gt;::type;\n</code></pre>\n\n<p>Now, our <code>conditional</code> instead of selecting types is selecting a metafunction! <code>underlying_type&lt;T&gt;::type</code> will only be instantiated for <code>T</code> being an enum. We additionally have to wrap <code>foo</code> to turn it into a metafunction.</p>\n\n<p>This is a common pattern and was a special thing in Boost.MPL called <code>eval_if</code>, which would look like:</p>\n\n<pre><code>template &lt;bool B, class T, class F&gt;\nusing eval_if_t = typename std::conditional_t&lt;B, T, F&gt;::type;\n</code></pre>\n\n<p>Note that we're both using <code>conditional_t</code> <em>and</em> <code>::type</code>.</p>\n"}], "owner": {"reputation": 6841, "user_id": 1190965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3e74ed8e572542a718df5f15ead40581?s=128&d=identicon&r=PG", "display_name": "nodakai", "link": "https://stackoverflow.com/users/1190965/nodakai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 425, "favorite_count": 3, "accepted_answer_id": 41268073, "answer_count": 1, "score": 1, "last_activity_date": 1482339602, "creation_date": 1482338730, "question_id": 41267824, "link": "https://stackoverflow.com/questions/41267824/what-is-the-evaluation-strategy-eager-lazy-of-c-metafunctions-such-as", "title": "What is the evaluation strategy (eager, lazy, ...) of C++ metafunctions such as std::conditional?", "body": "<p>C++14 draft n4140 reads</p>\n\n<blockquote>\n  <p><code>T</code> shall be an enumeration type</p>\n</blockquote>\n\n<p>for <code>template &lt;class T&gt; struct underlying_type</code>.</p>\n\n<p>How bad is it to write</p>\n\n<pre><code>std::conditional_t&lt;std::is_enum&lt;T&gt;::value, std::underlying_type_t&lt;T&gt;, foo&gt;\n</code></pre>\n\n<p>when <code>T</code> can be an arbitrary type? Will I step onto an UB and will the compiler delete my $HOME (because language lawyers say \"anything can happen under an UB\") ?</p>\n"}, {"tags": ["c++", "qt", "qimage", "qbytearray"], "comments": [{"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 1, "creation_date": 1482338532, "post_id": 41267665, "comment_id": 69736361, "body": "Sounds like you are leaking memory. Probably <code>jpegData</code>..."}, {"owner": {"reputation": 2537, "user_id": 4149835, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh6.googleusercontent.com/-n_QVH3KiURQ/AAAAAAAAAAI/AAAAAAAAAFM/RomdbXIW1hU/photo.jpg?sz=128", "display_name": "Vladimir Bershov", "link": "https://stackoverflow.com/users/4149835/vladimir-bershov"}, "edited": false, "score": 0, "creation_date": 1482339108, "post_id": 41267665, "comment_id": 69736691, "body": "Create a new pixmap object every time seems strange, best to create the <code>pixmapTest</code>  once and then just call <code>loadFromData</code>. See also: <a href=\"http://stackoverflow.com/questions/15316008/qimage-out-of-memory-returning-null-image\" title=\"qimage out of memory returning null image\">stackoverflow.com/questions/15316008/&hellip;</a>"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1482339385, "post_id": 41267665, "comment_id": 69736858, "body": "i assume you need to do a delete(pixMapTest) at some point. Or put it in a smart pointer like shared_ptr"}], "answers": [{"tags": [], "owner": {"reputation": 26196, "user_id": 1841194, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e65b668131c96399c25c6fae3fff8da5?s=128&d=identicon&r=PG&f=1", "display_name": "frogatto", "link": "https://stackoverflow.com/users/1841194/frogatto"}, "is_accepted": false, "score": 1, "last_activity_date": 1482339800, "creation_date": 1482339800, "answer_id": 41268143, "question_id": 41267665, "link": "https://stackoverflow.com/questions/41267665/after-loading-a-image-around-500-times-this-error-shows-in-visual-studio-qimag/41268143#41268143", "title": "After loading a image around 500 times , this error shows in visual studio QImage: out of memory, returning null image", "body": "<p>First off allocating and de-allocating memory for a variable (<code>pixmapTest</code>) in a function that gets called many times doesn't make sense enough. You should allocate the memory first and once all is done de-allocate it. For example:</p>\n\n<pre><code>pixmapTest = new QPixmap();\n\nfor(size_t i = 0; i &lt; 1000; i++){\n    // Call that function\n}\n\ndelete pixmapTest;\n</code></pre>\n\n<p>Apart from this, it sounds like your app is leaking memory. Note that by deleting the <code>pixmapTest</code>, you're not deleteing the memory <code>jpegData</code> points to. Therefore, in each function call you should take care of the memory to which <code>jpegData</code> points.</p>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 4750754, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/244c9f315f3c2d28fee003ff61883292?s=128&d=identicon&r=PG&f=1", "display_name": "sk110", "link": "https://stackoverflow.com/users/4750754/sk110"}, "edited": false, "score": 0, "creation_date": 1482391977, "post_id": 41272419, "comment_id": 69757242, "body": "on doing this I am getting these errors  Pixmap is a null pixmap look at this [<a href=\"http://stackoverflow.com/questions/41276248/getting-pixmap-is-a-null-pixmap-on-calling-a-function-500-times]\" title=\"getting pixmap is a null pixmap on calling a function 500 times%5d\">stackoverflow.com/questions/41276248/&hellip;</a>"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 67, "user_id": 4750754, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/244c9f315f3c2d28fee003ff61883292?s=128&d=identicon&r=PG&f=1", "display_name": "sk110", "link": "https://stackoverflow.com/users/4750754/sk110"}, "edited": false, "score": 0, "creation_date": 1482422308, "post_id": 41272419, "comment_id": 69776204, "body": "Well, perhaps the data you receive is not in the right format. How could we know any of that? It&#39;s on you to check it and ensure the code makes sense. You have to understand the problem well enough to know what questions to ask, not merely to say &quot;hey, it doesn&#39;t work&quot;."}, {"owner": {"reputation": 67, "user_id": 4750754, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/244c9f315f3c2d28fee003ff61883292?s=128&d=identicon&r=PG&f=1", "display_name": "sk110", "link": "https://stackoverflow.com/users/4750754/sk110"}, "edited": false, "score": 0, "creation_date": 1482465155, "post_id": 41272419, "comment_id": 69792499, "body": "thanks for your valuable suggestion. I will keep in mind this statement before asking the next question."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1482356764, "creation_date": 1482356764, "answer_id": 41272419, "question_id": 41267665, "link": "https://stackoverflow.com/questions/41267665/after-loading-a-image-around-500-times-this-error-shows-in-visual-studio-qimag/41272419#41272419", "title": "After loading a image around 500 times , this error shows in visual studio QImage: out of memory, returning null image", "body": "<p>Most likely, you're not freeing the <code>reply</code> itself.</p>\n\n<p>There's also no need to store the pixmap, nor to manage it through a pointer. Keep it by value, and assign new value each time you receive a reply.</p>\n\n<p>E.g.:</p>\n\n<pre><code>class MyClass : public QWidget {\n  Q_OBJECT\n  Ui::MyClass ui;\n\n  explicit MyClass(QWidget *parent = nullptr) : QWidget(parent) {\n    ui.setupUi(this);\n  }\n\n  Q_SLOT void requestCompleted(QNetworkReply *reply) {\n    QPixmap pix;\n    pix.loadFromData(reply-&gt;readAll());\n    ui.qtLabel-&gt;setPixmap(pix);\n    reply-&gt;deleteLater();\n  }\n};\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 4750754, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/244c9f315f3c2d28fee003ff61883292?s=128&d=identicon&r=PG&f=1", "display_name": "sk110", "link": "https://stackoverflow.com/users/4750754/sk110"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1482356764, "creation_date": 1482338199, "last_edit_date": 1482339187, "question_id": 41267665, "link": "https://stackoverflow.com/questions/41267665/after-loading-a-image-around-500-times-this-error-shows-in-visual-studio-qimag", "title": "After loading a image around 500 times , this error shows in visual studio QImage: out of memory, returning null image", "body": "<p>I want to show a image on qt label. I am getting image data in the form of <code>QByteArray</code> and I am loading it into label.\nBelow is the code :</p>\n\n<p>defined in constructor</p>\n\n<pre><code>QPixmap *pixmapTest;\npixmapTest  = NULL;\n</code></pre>\n\n<p>the following code is in a function which is getting called multiple times : </p>\n\n<pre><code>    RequestCompleted(QNetworkReply *reply)\n{\nif(pixmapTest){\n    qDebug()&lt;&lt;\"delete showImage Pixmap Object\";\n    delete pixmapTest;\n    pixmapTest = NULL;\n}\npixmapTest = new QPixmap();\nQByteArray jpegData = reply-&gt;readAll();\npixmapTest-&gt;loadFromData(jpegData);\nui.qtLabel-&gt;setPixmap(*pixmapTest);\n}\n</code></pre>\n\n<p>After calling this function for around 500 times I am getting this error</p>\n\n<pre><code>QImage: out of memory, returning null image.\n</code></pre>\n\n<p>I am not getting what is the error in the above code. Can someone please tell me how to solve this?</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "is_accepted": true, "score": 1, "last_activity_date": 1482336638, "creation_date": 1482336638, "answer_id": 41267209, "question_id": 41267021, "link": "https://stackoverflow.com/questions/41267021/what-is-subset-of-superset-principle/41267209#41267209", "title": "What is &quot;subset of superset&quot; principle?", "body": "<p>The <a href=\"http://www.stroustrup.com/SELLrationale.pdf\" rel=\"nofollow noreferrer\">cited paper</a> explains it like this:</p>\n\n<blockquote>\n  <ol>\n  <li>superset:  Add libraries to provide application-specific facilities, <em>then</em></li>\n  <li>subset: Subtract features (outside the library implementation) to provide semantic guarantees</li>\n  </ol>\n  \n  <p>The result is a subset of a superset of a language called a\n  Semantically Enhanced Library Language.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "is_accepted": false, "score": 0, "last_activity_date": 1482336729, "creation_date": 1482336729, "answer_id": 41267238, "question_id": 41267021, "link": "https://stackoverflow.com/questions/41267021/what-is-subset-of-superset-principle/41267238#41267238", "title": "What is &quot;subset of superset&quot; principle?", "body": "<p>In the reference Stroustrup05, he says:</p>\n\n<ol>\n<li>superset:  Add libraries to provide application-specific\nfacilities, then</li>\n<li>subset: Subtract features (outside the library implementation) to provide semantic guarantees</li>\n</ol>\n\n<p>The result is a subset of a superset of a language</p>\n"}, {"tags": [], "owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "is_accepted": false, "score": 5, "last_activity_date": 1482337296, "creation_date": 1482337296, "answer_id": 41267394, "question_id": 41267021, "link": "https://stackoverflow.com/questions/41267021/what-is-subset-of-superset-principle/41267394#41267394", "title": "What is &quot;subset of superset&quot; principle?", "body": "<p>Take a look at the <a href=\"https://youtu.be/1OEu9C51K2A?t=17m45s\" rel=\"noreferrer\">Keynote from CppCon 2015</a>.<br>\nThe concept is explained more precisely there.<br>\n<a href=\"https://i.stack.imgur.com/787vS.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/787vS.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>The \"subset of a superset\" is an approach to gain better safety though libraries and static analyses; not through limiting current language features.</p>\n"}], "owner": {"reputation": 11861, "user_id": 1899020, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c6f377132e8aad22b97bfcc85adffdb?s=128&d=identicon&r=PG", "display_name": "user1899020", "link": "https://stackoverflow.com/users/1899020/user1899020"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 663, "favorite_count": 1, "closed_date": 1483394711, "accepted_answer_id": 41267209, "answer_count": 3, "score": 1, "last_activity_date": 1482338093, "creation_date": 1482336036, "last_edit_date": 1482338093, "question_id": 41267021, "link": "https://stackoverflow.com/questions/41267021/what-is-subset-of-superset-principle", "closed_reason": "Needs details or clarity", "title": "What is &quot;subset of superset&quot; principle?", "body": "<p>In <a href=\"http://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#S-introduction\" rel=\"nofollow noreferrer\">c++ core guidelines</a>, it said</p>\n\n<blockquote>\n  <p>These guidelines are designed according to the \u201csubset of superset\u201d\n  principle (Stroustrup05). They do not simply define a subset of C++ to\n  be used (for reliability, safety, performance, or whatever). Instead,\n  they strongly recommend the use of a few simple \u201cextensions\u201d (library\n  components) that make the use of the most error-prone features of C++\n  redundant, so that they can be banned (in our set of rules).</p>\n</blockquote>\n\n<p>What is \"subset of superset\" principle? </p>\n"}, {"tags": ["c++", "duck-typing"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1482336283, "post_id": 41267018, "comment_id": 69734942, "body": "why do you think that an array will be any more efficient that discrete variable access?"}, {"owner": {"reputation": 898, "user_id": 7154311, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/9aJ8P.png?s=128&g=1", "display_name": "Ch3shire", "link": "https://stackoverflow.com/users/7154311/ch3shire"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1482336583, "post_id": 41267018, "comment_id": 69735149, "body": "If you have a method to template various number of discrete variables, I want to know it :)"}, {"owner": {"reputation": 603, "user_id": 6016071, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bYAFA.jpg?s=128&g=1", "display_name": "JimmyNJ", "link": "https://stackoverflow.com/users/6016071/jimmynj"}, "edited": false, "score": 1, "creation_date": 1482337201, "post_id": 41267018, "comment_id": 69735554, "body": "Perhaps you&#39;re looking for a std::tuple&lt;...&gt; like template. You can retrieve tuple elements using the std::get&lt; INDEX &gt; and set them using std::tie and so forth?"}], "answers": [{"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 4, "last_activity_date": 1482338862, "last_edit_date": 1482338862, "creation_date": 1482337281, "answer_id": 41267389, "question_id": 41267018, "link": "https://stackoverflow.com/questions/41267018/c-access-class-member-by-member-like-method/41267389#41267389", "title": "C++: Access class member by member-like method", "body": "<p>Here's one way to get the same syntactic effect:</p>\n\n<pre><code>template&lt;int n=3&gt; struct Vec{\n     double Values[n];\n};\n\ntemplate&lt;int N&gt; struct xyzAdapter;\n\ntemplate&lt;&gt; struct xyzAdapter&lt;3&gt;\n{\n  xyzAdapter(Vec&lt;3&gt;&amp; vec) : x(vec.Values[0]), y(vec.Values[1]), z(vec.Values[2]) {}\n\n  double&amp; x;\n  double&amp; y;\n  double&amp; z;\n};\n\ntemplate&lt;int N&gt; auto make_adapter(Vec&lt;N&gt;&amp; vec) \n{\n  return xyzAdapter&lt;N&gt;(vec);\n}\n\nint main()\n{\n  Vec&lt;3&gt; point;\n  auto adapter = make_adapter(point);\n  adapter.x = 6;\n}\n</code></pre>\n\n<p>Going the other way is not quite so pleasant. There is no such thing as an array of references, so one workaround is to resort to an array of <code>std::reference_wrapper</code>:</p>\n\n<pre><code>#include &lt;tuple&gt;\n#include &lt;array&gt;\n#include &lt;functional&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;int N = 3&gt; struct Vector;\n\ntemplate&lt;&gt; struct Vector&lt;3&gt;\n{\n    double x, y, z;\n\n    auto as_tuple() {\n      return std::tie(x, y, z);\n    }\n};\n\ntemplate&lt;std::size_t...Is, class Tuple&gt;\nauto as_array(std::index_sequence&lt;Is...&gt;, Tuple&amp;&amp; t)\n{\n  return std::array&lt;std::reference_wrapper&lt;double&gt;, sizeof...(Is)&gt; {\n    std::get&lt;Is&gt;(t)...\n  };\n}\n\ntemplate&lt;int N&gt; auto as_array(Vector&lt;N&gt;&amp; v)\n{\n  return as_array(std::make_index_sequence&lt;N&gt;(), v.as_tuple());\n}\n\nint main2()\n{\n  Vector&lt;3&gt; point;\n  point.x = 6;\n\n  auto arr = as_array(point);\n\n  for (auto ref : arr) {\n    std::cout &lt;&lt; ref.get() &lt;&lt; std::endl;\n  }\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 898, "user_id": 7154311, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/9aJ8P.png?s=128&g=1", "display_name": "Ch3shire", "link": "https://stackoverflow.com/users/7154311/ch3shire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1482338862, "creation_date": 1482336022, "last_edit_date": 1482336645, "question_id": 41267018, "link": "https://stackoverflow.com/questions/41267018/c-access-class-member-by-member-like-method", "title": "C++: Access class member by member-like method", "body": "<p>I have template class which looks like this:</p>\n\n<pre><code>template&lt;int n=3&gt; struct Vec{\n     double Values[n];\n};\n</code></pre>\n\n<p>Of course I can access elements of this class directly or by method, for example:</p>\n\n<pre><code>double&amp; x(){\n    return Values[0];\n}\n</code></pre>\n\n<p>But if I would like to make more intuitive code: instead of</p>\n\n<pre><code>Vec&lt;3&gt; v;\nv.x() = 5.2;\n</code></pre>\n\n<p>I would like to let user do it by:\n<code>v.x = 5.2</code>. It's not only a whim. If I have existing library which uses simple vector structures of a form like <code>struct{double x,y,z;}</code>, I could by method of duck-typing create my template class to be efficient in this case. Of course I could (probably, I'm not sure) pass to this library predefined structure of referenes - like:\n<code>struct{double &amp;x=v.Values[0], &amp;y=v.Values[1], &amp;z=v.Values[2];}</code> but I am afraid that's not the simplest way to get a goal.</p>\n\n<p>Ah - of course I could add reference-type parameters in my structure, but this would cause in increase of a size of elements.</p>\n"}, {"tags": ["c++", "templates", "binary-tree", "c++14", "lazy-evaluation"], "answers": [{"tags": [], "owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "is_accepted": true, "score": 1, "last_activity_date": 1482336907, "last_edit_date": 1495535482, "creation_date": 1482336907, "answer_id": 41267294, "question_id": 41266975, "link": "https://stackoverflow.com/questions/41266975/c-lazy-evaluation-with-templates/41267294#41267294", "title": "C++ lazy evaluation with templates", "body": "<pre><code>if(is_recursable&lt;A&gt;::value == 1)\n  /* printf(\"1 %s\", typeid(B).name()); */\n  lhs.printrec();\nelse\n  printf(\"0\");\n</code></pre>\n\n<p>Until <code>constexpr if</code> exists you cannot do this.  Reason being is that the compiler must assume that both branches are possible even if one or the other is not reachable--yeah, seems like it should be able to tell, but it's not allowed to by the language.  You need to use tag dispatching or some other <em>compile time</em> construct.</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/4522375/switch-passed-type-from-template/4522439#4522439\">this answer</a></p>\n"}], "owner": {"reputation": 682, "user_id": 4811285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/d60KB.jpg?s=128&g=1", "display_name": "theoden8", "link": "https://stackoverflow.com/users/4811285/theoden8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 622, "favorite_count": 0, "closed_date": 1482337033, "accepted_answer_id": 41267294, "answer_count": 1, "score": 1, "last_activity_date": 1482336907, "creation_date": 1482335899, "last_edit_date": 1482336024, "question_id": 41266975, "link": "https://stackoverflow.com/questions/41266975/c-lazy-evaluation-with-templates", "closed_reason": "Duplicate", "title": "C++ lazy evaluation with templates", "body": "<p>I have written a c++ program to implement lazy binary operations.</p>\n\n<p>The program is supposed to work as follows: create a binary tree with operations, each time we use a tree in a binary operation with something else, we put both things as left and right children of the new operation. When I call <code>operator T</code>, it entails another <code>operator T</code> recursively of each child in case it is also an operator, or otherwise pass it to the function associated with the template parameter (<code>F</code>).</p>\n\n<h2>Code</h2>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cassert&gt;\n#include &lt;vector&gt;\n\nstatic const auto &amp;add = [](auto a, auto b) {return a + b;};\nstatic const auto &amp;sub = [](auto a, auto b) {return a - b;};\nstatic const auto &amp;mul = [](auto a, auto b) {return a * b;};\nstatic const auto &amp;frac = [](auto a, auto b) {return a / b;};\n\ntemplate &lt;class A, class B, class F&gt; class BinaryOP;\n\ntemplate &lt;class A, class B&gt; using Addition = BinaryOP &lt;A, B, decltype(add)&gt;;\ntemplate &lt;class A, class B&gt; using Subtraction = BinaryOP &lt;A, B, decltype(sub)&gt;;\ntemplate &lt;class A, class B&gt; using Multiplication = BinaryOP &lt;A, B, decltype(mul)&gt;;\ntemplate &lt;class A, class B&gt; using Division = BinaryOP &lt;A, B, decltype(frac)&gt;;\n\nstatic const auto make_binop = [](auto a, auto b, auto &amp;F) { return BinaryOP&lt;decltype(a), decltype(b), decltype(F)&gt;(a, b, F); };\nstatic const auto make_add = [](auto a, auto b) { return make_binop(a, b, add); };\nstatic const auto make_sub = [](auto a, auto b) { return make_binop(a, b, sub); };\nstatic const auto make_mul = [](auto a, auto b) { return make_binop(a, b, mul); };\nstatic const auto make_div = [](auto a, auto b) { return make_binop(a, b, frac); };\n\ntemplate &lt;class T&gt;\nstruct is_recursable {\nprivate:\n  typedef char yes;\n  typedef short no;\n  template &lt;typename C&gt; static yes test(decltype(C::RECURSE_ME)*);\n  template &lt;typename C&gt; static no test(...);\npublic:\n  enum { value = sizeof(test&lt;T&gt;(0)) == sizeof(yes)  };\n};\n\ntemplate &lt;class A, class B, class F&gt;\nclass BinaryOP {\nprotected:\n  typedef BinaryOP &lt;A, B, F&gt; THIS_T;\n  const A lhs;\n  const B rhs;\n  F func;\npublic:\n  static const bool RECURSE_ME;\n\n  constexpr BinaryOP(const A &amp;lhs, const B &amp;rhs, F &amp;func):\n    lhs(lhs), rhs(rhs), func(func)\n  {}\n\n  virtual ~BinaryOP()\n  {}\n\n  template &lt;class T&gt;\n  constexpr operator T() const {\n    auto a = is_recursable&lt;A&gt;::value ? T(lhs) : lhs;\n    auto b = is_recursable&lt;B&gt;::value ? T(rhs) : rhs;\n    return func(a, b);\n  }\n\n  template &lt;class R&gt;\n  constexpr Addition &lt;THIS_T, R&gt; operator+(const R &amp;b) {\n    return make_add(*this, b);\n  }\n\n  template &lt;class R&gt;\n  constexpr Subtraction &lt;THIS_T, R&gt; operator-(const R &amp;b) {\n    return make_sub(*this, b);\n  }\n\n  template &lt;class R&gt;\n  constexpr Multiplication &lt;THIS_T, R&gt; operator*(const R &amp;b) {\n    return make_mul(*this, b);\n  }\n\n  template &lt;class R&gt;\n  constexpr Division &lt;THIS_T, R&gt; operator/(const R &amp;b) {\n    return make_div(*this, b);\n  }\n\n  friend std::ostream &amp;operator&lt;&lt;(std::ostream &amp;os, const THIS_T &amp;tree) {\n    os &lt;&lt; \"{\" &lt;&lt; tree.lhs &lt;&lt; \":\" &lt;&lt; is_recursable&lt;A&gt;::value &lt;&lt; \", \" &lt;&lt; tree.rhs &lt;&lt; \":\" &lt;&lt; is_recursable&lt;B&gt;::value &lt;&lt; \"}\";\n    return os;\n  }\n\n  void printrec() const {\n    printf(\"1: {\");\n    if(is_recursable&lt;A&gt;::value == 1)\n      /* printf(\"1 %s\", typeid(B).name()); */\n      lhs.printrec();\n    else\n      printf(\"0\");\n    printf(\", \");\n    if(is_recursable&lt;B&gt;::value == 1)\n      /* printf(\"1 %s\", typeid(B).name()); */\n      rhs.printrec();\n    else\n      printf(\"0\");\n    printf(\"}\");\n  }\n};\n\nclass Matrix {\n  typedef std::vector &lt;float&gt; vec_t;\n  typedef std::vector &lt;std::vector &lt;float&gt; &gt; mat_t;\n  mat_t mat;\npublic:\n  Matrix(mat_t mat):\n    mat(mat)\n  {}\n  Matrix(size_t h, size_t w):\n    mat(mat_t(h, vec_t(w)))\n  {\n    for(size_t i = 0; i &lt; h; ++i)\n      for(size_t j = 0; j &lt; w; ++j)\n        mat[i][j] = (i == j);\n  }\n  size_t height() const { return mat.size(); }\n  size_t width() const { return (height() == 0) ? 0 : mat.front().size(); }\n  Matrix operator*(const Matrix &amp;other) {\n    Matrix res(height(), other.width());\n    assert(width() == other.height());\n    for(size_t i = 0; i &lt; height(); ++i) {\n      for(size_t j = 0; j &lt; other.width(); ++j) {\n        float sum = 0.;\n        for(size_t k = 0; k &lt; width(); ++k) {\n          sum += mat[i][k] * other.mat[k][j];\n        }\n        res.mat[i][j] = sum;\n      }\n    }\n    return res;\n  }\n  Matrix operator*(const float &amp;scalar) {\n    Matrix res(height(), width());\n    for(size_t i = 0; i &lt; height(); ++i) for(size_t j = 0; j &lt; width(); ++j) res.mat[i][j] = mat[i][j] * scalar;\n    return res;\n  }\n  friend std::ostream &amp;operator&lt;&lt;(std::ostream &amp;os, const Matrix &amp;m) {\n    for(size_t i = 0; i &lt; m.height(); ++i) {\n      for(size_t j = 0; j &lt; m.width(); ++j) {\n        os &lt;&lt; m.mat[i][j] &lt;&lt; \" \";\n      }\n      os &lt;&lt; std::endl;\n    }\n    return os;\n  }\n};\n\nint main() {\n  auto tree = make_add(2, 3) + make_sub(5, 6) * make_add(3, 0) / 3; // = 4\n  std::cout &lt;&lt; tree &lt;&lt; std::endl;\n  std::cout &lt;&lt; int(tree) &lt;&lt; std::endl;\n  Matrix m(10, 10), n(10, 10);\n  auto mattree = make_mul(m, n) + 6;\n  std::cout &lt;&lt; mattree &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"operator is recursable: \" &lt;&lt; is_recursable&lt;Addition&lt;float, Matrix&gt; &gt;::value &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"matrix is recursable: \" &lt;&lt; is_recursable&lt;Matrix&gt;::value &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"float is recursable: \" &lt;&lt; is_recursable&lt;float&gt;::value &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"mattree is recursable: \" &lt;&lt; is_recursable&lt;decltype(mattree)&gt;::value &lt;&lt; std::endl;\n  mattree.printrec();\n  /* std::cout &lt;&lt; (mattree.operator Matrix()) &lt;&lt; std::endl; */\n}\n</code></pre>\n\n<h2>Compiling</h2>\n\n<pre><code>c++ -flto -O2 -std=c++1y binary_operator.cpp\n</code></pre>\n\n<h3>clang</h3>\n\n<pre><code>binary_operator.cpp:93:10: error: member reference base type 'const int' is not a structure or union\n      rhs.printrec();\n      ~~~^~~~~~~~~\nbinary_operator.cpp:158:11: note: in instantiation of member function 'BinaryOP&lt;BinaryOP&lt;Matrix, Matrix, const &lt;lambda at binary_operator.cpp:7:26&gt; &amp;&gt;, int, const &lt;lambda at binary_operator.cpp:5:26&gt; &amp;&gt;::printrec' requested here\n  mattree.printrec();\n          ^\nbinary_operator.cpp:87:11: error: no member named 'printrec' in 'Matrix'\n      lhs.printrec();\n      ~~~ ^\nbinary_operator.cpp:87:11: note: in instantiation of member function 'BinaryOP&lt;Matrix, Matrix, const &lt;lambda at binary_operator.cpp:7:26&gt; &amp;&gt;::printrec' requested here\n      lhs.printrec();\n          ^\nbinary_operator.cpp:158:11: note: in instantiation of member function 'BinaryOP&lt;BinaryOP&lt;Matrix, Matrix, const &lt;lambda at binary_operator.cpp:7:26&gt; &amp;&gt;, int, const &lt;lambda at binary_operator.cpp:5:26&gt; &amp;&gt;::printrec' requested here\n  mattree.printrec();\n          ^\nbinary_operator.cpp:93:11: error: no member named 'printrec' in 'Matrix'\n      rhs.printrec();\n      ~~~ ^\n3 errors generated.\nmake: *** [binary_operator] Error 1\n</code></pre>\n\n<h3>gcc</h3>\n\n<pre><code>binary_operator.cpp: In instantiation of 'void BinaryOP&lt;A, B, F&gt;::printrec() const [with A = BinaryOP&lt;Matrix, Matrix, const&lt;lambda(auto:5, auto:6)&gt;&amp;&gt;; B = int; F = const&lt;lambda(auto:1, auto:2)&gt;&amp;]':\nbinary_operator.cpp:158:20:   required from here\nbinary_operator.cpp:93:11: error: request for member 'printrec' in '((const BinaryOP&lt;BinaryOP&lt;Matrix, Matrix, const&lt;lambda(auto:5, auto:6)&gt;&amp;&gt;, int, const&lt;lambda(auto:1, auto:2)&gt;&amp;&gt;*)this)-&gt;BinaryOP&lt;BinaryOP&lt;Matrix, Matrix, const&lt;lambda(auto:5, auto:6)&gt;&amp;&gt;, int, const&lt;lambda(auto:1, auto:2)&gt;&amp;&gt;::rhs', which is of non-class type 'const int'\n       rhs.printrec();\n       ~~~~^~~~~~~~\nbinary_operator.cpp: In instantiation of 'void BinaryOP&lt;A, B, F&gt;::printrec() const [with A = Matrix; B = Matrix; F = const&lt;lambda(auto:5, auto:6)&gt;&amp;]':\nbinary_operator.cpp:87:7:   required from 'void BinaryOP&lt;A, B, F&gt;::printrec() const [with A = BinaryOP&lt;Matrix, Matrix, const&lt;lambda(auto:5, auto:6)&gt;&amp;&gt;; B = int; F = const&lt;lambda(auto:1, auto:2)&gt;&amp;]'\nbinary_operator.cpp:158:20:   required from here\nbinary_operator.cpp:87:11: error: 'const class Matrix' has no member named 'printrec'\n       lhs.printrec();\n       ~~~~^~~~~~~~\nbinary_operator.cpp:93:11: error: 'const class Matrix' has no member named 'printrec'\n       rhs.printrec();\n       ~~~~^~~~~~~~\n\nshell returned 1\n</code></pre>\n\n<p>But if I change printrec by changing comments (see the code), I will get:</p>\n\n<pre><code>{{2:0, 3:0}:1, {{{5:0, 6:0}:1, {3:0, 0:0}:1}:1, 3:0}:1}\n4\n{{1 0 0 0 0 0 0 0 0 0\n0 1 0 0 0 0 0 0 0 0\n0 0 1 0 0 0 0 0 0 0\n0 0 0 1 0 0 0 0 0 0\n0 0 0 0 1 0 0 0 0 0\n0 0 0 0 0 1 0 0 0 0\n0 0 0 0 0 0 1 0 0 0\n0 0 0 0 0 0 0 1 0 0\n0 0 0 0 0 0 0 0 1 0\n0 0 0 0 0 0 0 0 0 1\n:0, 1 0 0 0 0 0 0 0 0 0\n0 1 0 0 0 0 0 0 0 0\n0 0 1 0 0 0 0 0 0 0\n0 0 0 1 0 0 0 0 0 0\n0 0 0 0 1 0 0 0 0 0\n0 0 0 0 0 1 0 0 0 0\n0 0 0 0 0 0 1 0 0 0\n0 0 0 0 0 0 0 1 0 0\n0 0 0 0 0 0 0 0 1 0\n0 0 0 0 0 0 0 0 0 1\n:0}:1, 6:0}\noperator is recursable: 1\nmatrix is recursable: 0\nfloat is recursable: 0\nmattree is recursable: 1\n1: {1 i, 0}\n</code></pre>\n\n<p>Clearly, when I try to evaluate (or print) the tree recursively, it fails to compile with an error as it can't find the same method (e.g. printrec) in a leaf (non-operator) class, but it seems (see <code>is_recursive</code>) that it is aware of which types are there in compile-time.</p>\n"}, {"tags": ["c++", "templates", "if-statement"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482335886, "post_id": 41266929, "comment_id": 69734632, "body": "Provide an abstract base class for <code>A</code>."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1482336139, "post_id": 41266929, "comment_id": 69734846, "body": "This isn&#39;t enough to know what you actually plan on doing with <code>var</code>. The code you have will work (losing the <code>()</code>); but is pointless unless you plan on using <code>var</code> exclusively where declared (within the block scope of either the <code>if</code> or the <code>else</code>). If your plan is to have <code>var</code> live beyond either/both of those scope, <i>then</i> this falls on its face and you need something different."}], "owner": {"reputation": 255, "user_id": 1813571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8fOSI.jpg?s=128&g=1", "display_name": "niandra82", "link": "https://stackoverflow.com/users/1813571/niandra82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "closed_date": 1482335865, "answer_count": 0, "score": 0, "last_activity_date": 1482335756, "creation_date": 1482335756, "question_id": 41266929, "link": "https://stackoverflow.com/questions/41266929/template-declaration-inside-if-statement", "closed_reason": "Duplicate", "title": "Template declaration inside if statement", "body": "<p>I'm trying to understand the C++ template. I'm not too much expert in programming so sorry if I'm saying or writing something stupid.\nI have the following Template </p>\n\n<pre><code>template &lt;class C&gt; class A\n{\n   public:\n   A(){};\n   // some functions here\n}\n</code></pre>\n\n<p>In my main function I want something as</p>\n\n<pre><code>int a;\n\n// a function that evaluates if a must be set to 1 or 0\n\nif(a==1)\n{\n  A  var&lt;Class1&gt;();\n}else{\n  A  var&lt;Class2&gt;();\n}\n</code></pre>\n\n<p>I know that this is not possible to do, but I'm asking how can I achieve something like this.</p>\n"}, {"tags": ["c++", "optional", "c++17", "default-constructor"], "answers": [{"comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 2, "creation_date": 1482335924, "post_id": 41266932, "comment_id": 69734654, "body": "Unless <code>o</code> were static/thread_local, in which case the internal representation of <code>engaged</code> would be zero-initialized."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1482336103, "post_id": 41266932, "comment_id": 69734815, "body": "@NicolBolas true, added"}], "tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": true, "score": 5, "last_activity_date": 1482336898, "last_edit_date": 1495540423, "creation_date": 1482335764, "answer_id": 41266932, "question_id": 41266791, "link": "https://stackoverflow.com/questions/41266791/trivial-default-constructor-for-stdoptional/41266932#41266932", "title": "Trivial default constructor for std::optional", "body": "<p>If you would make it trivially default constructible, then in the following declaration:</p>\n\n<pre><code>std::optional&lt;int&gt; o;\n</code></pre>\n\n<p>the <code>engaged</code> flag (or the equivalent internal representation) would be <strong>uninitialized</strong> (1).</p>\n\n<p>True, the user can use the correct initialization:</p>\n\n<pre><code>std::optional&lt;int&gt; o{};\n</code></pre>\n\n<p>But the point of encapsulation is to design your class in such a way that no matter what legal code someone writes with your class, an object of this class will <strong>always be in a valid state</strong> (2). I.e. you need to guarantee that no matter how your object is being manipulated it will never \"break\".</p>\n\n<hr>\n\n<p>(1) except if it is global/static, in which case the internal representation of engaged would be zero-initialized (thanks to <a href=\"https://stackoverflow.com/users/734069/nicol-bolas\">Nicol Bolas</a> for pointing it out)</p>\n\n<p>(2) please note that here by valid state I mean a state where all values of data members make sense (they satisfy the class invariants). For instance the internal size of a vector correctly reflects the number of objects held, the engaged flag correctly reflects if the optional holds or not the underlying object, etc.</p>\n"}], "owner": {"reputation": 4160, "user_id": 371239, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/decd51f67e3f34f4d6c526fed9b4a2dd?s=128&d=identicon&r=PG", "display_name": "Vahagn", "link": "https://stackoverflow.com/users/371239/vahagn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1144, "favorite_count": 0, "closed_date": 1482447902, "accepted_answer_id": 41266932, "answer_count": 1, "score": 1, "last_activity_date": 1482336898, "creation_date": 1482335340, "question_id": 41266791, "link": "https://stackoverflow.com/questions/41266791/trivial-default-constructor-for-stdoptional", "closed_reason": "Duplicate", "title": "Trivial default constructor for std::optional", "body": "<p>Couldn't <code>std::optional&lt;T&gt;</code> be <a href=\"http://en.cppreference.com/w/cpp/language/default_constructor#Trivial_default_constructor\" rel=\"nofollow noreferrer\">trivially default constructible</a>?</p>\n\n<p>Seems the only obstacle is the initialization of the <code>engaged</code> flag, but doesn't zero-initialization handle the situation?</p>\n"}, {"tags": ["c++", "arrays", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1482335376, "post_id": 41266710, "comment_id": 69734281, "body": "The last clause of your first paragraph is wrong. <code>a</code> is declared to be a pointer to an array of 5 <code>int</code>; <i>that&#39;s it</i>. it isn&#39;t pointing <i>to anything</i> (yet). That&#39;s what the <code>new []</code> is for."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1482335472, "post_id": 41266710, "comment_id": 69734344, "body": "A 2D array is a pointer to an array of pointers which each one points to another array (of ints in your case)."}, {"owner": {"reputation": 4300, "user_id": 4513509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MAkrs.png?s=128&g=1", "display_name": "NonCreature0714", "link": "https://stackoverflow.com/users/4513509/noncreature0714"}, "edited": false, "score": 0, "creation_date": 1482335482, "post_id": 41266710, "comment_id": 69734352, "body": "You forgot the semi-colon after <code>int r=5</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 3, "creation_date": 1482335525, "post_id": 41266710, "comment_id": 69734380, "body": "@Ripi2 No it is not.  A 2d array(<code>int[][]</code>) is an array of arrays which is very different from a <code>int**</code>"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1482336466, "post_id": 41266710, "comment_id": 69735074, "body": "<code>int b[2][5]</code>  Then <code>int** pB = b</code> is an error but <code>int (*pb)[5] = b</code> is not. That&#39;s why I said &quot;a pointer (b) to an array of pointers (pb)&quot;."}, {"owner": {"reputation": 338, "user_id": 5891398, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f365d7d1d5644b3e48c407ff56cef01?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Wang", "link": "https://stackoverflow.com/users/5891398/alex-wang"}, "reply_to_user": {"reputation": 4300, "user_id": 4513509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MAkrs.png?s=128&g=1", "display_name": "NonCreature0714", "link": "https://stackoverflow.com/users/4513509/noncreature0714"}, "edited": false, "score": 0, "creation_date": 1482430030, "post_id": 41266710, "comment_id": 69780896, "body": "@NonCreature0714 fixed it, thanks"}], "answers": [{"tags": [], "owner": {"reputation": 4300, "user_id": 4513509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MAkrs.png?s=128&g=1", "display_name": "NonCreature0714", "link": "https://stackoverflow.com/users/4513509/noncreature0714"}, "is_accepted": false, "score": 0, "last_activity_date": 1482337234, "creation_date": 1482337234, "answer_id": 41267378, "question_id": 41266710, "link": "https://stackoverflow.com/questions/41266710/understanding-2d-array-with-dynamic-memory-allocation/41267378#41267378", "title": "Understanding 2D array with dynamic memory allocation", "body": "<p>You're just making a pointer to a one-dimensional array, which requires two indexes to access elements. Nothing crazy, not quite undefined behavior, but not good either.</p>\n\n<pre><code>#include &lt;iostream&gt;\nconst int c = 5; //num of columns\n\nint main () {\n    int r = 5;\n\n    //Creates a pointer to an array of 5 integer pointers.\n    int (*a)[c];\n\n    a = new int[r][c]; // allocate array\n\n    std::cout &lt;&lt; *a &lt;&lt; std::endl;\n    std::cout &lt;&lt; a &lt;&lt; std::endl;\n    std::cout &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Displaying deferenced, unallocated array.\" &lt;&lt; std::endl;\n    for(int i=0; i&lt;c;++i){\n        std::cout &lt;&lt; *a[i] &lt;&lt; std::endl;\n    }\n\n    std::cout &lt;&lt; \"Diplaying pointers in the array.\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Note how it's not a 2d array.\" &lt;&lt; std::endl;\n    for(int i=0;i&lt;c;++i){\n        for(int j=0;j&lt;r;++j){\n            std::cout &lt;&lt; a[i] &lt;&lt; \" \";\n        }\n        std::cout &lt;&lt; std::endl;\n    }\n\n\n    std::cout &lt;&lt; \"Allocating array 1d, 1d style fails...\" &lt;&lt; std::endl;\n    /*\n    for(int i=0;i&lt;c;++i){\n        a[i] = 23; //Syntax error! Requires two indexes.\n    }\n    */\n\n    std::cout &lt;&lt; \"Allocating 1d array 2d style... success!?\" &lt;&lt; std::endl;\n    for(int i=0;i&lt;r;++i){\n        for(int j=0;j&lt;c;++j){\n            a[i][j] = 13;\n        }\n    }\n\n    std::cout &lt;&lt; \"Displaying allocated array.\" &lt;&lt; std::endl;\n    for(int i=0;i&lt;r;++i){\n        for(int j=0;j&lt;c;++j){\n            std::cout &lt;&lt; a[i][j] &lt;&lt; \" \";\n        }\n        std::cout &lt;&lt; std::endl;\n    }\n\n\n    delete [] a;\n} \n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>0x100202ba0\n0x100202ba0\n\nDisplaying deferenced, unallocated array.\n0\n0\n0\n0\n0\nDiplaying pointers in the array.\nNote how it's not a 2d array.\n0x100202ba0 0x100202ba0 0x100202ba0 0x100202ba0 0x100202ba0 \n0x100202bb4 0x100202bb4 0x100202bb4 0x100202bb4 0x100202bb4 \n0x100202bc8 0x100202bc8 0x100202bc8 0x100202bc8 0x100202bc8 \n0x100202bdc 0x100202bdc 0x100202bdc 0x100202bdc 0x100202bdc \n0x100202bf0 0x100202bf0 0x100202bf0 0x100202bf0 0x100202bf0 \nAllocating array 1d, 1d style fails...\nAllocating 1d array 2d style... success!?\nDisplaying allocated array.\n13 13 13 13 13 \n13 13 13 13 13 \n13 13 13 13 13 \n13 13 13 13 13 \n13 13 13 13 13 \nProgram ended with exit code: 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1482372626, "last_edit_date": 1482372626, "creation_date": 1482366706, "answer_id": 41274107, "question_id": 41266710, "link": "https://stackoverflow.com/questions/41266710/understanding-2d-array-with-dynamic-memory-allocation/41274107#41274107", "title": "Understanding 2D array with dynamic memory allocation", "body": "<p>If you have a type <code>T</code> and are going to allocate an array of size <code>N</code> then this expression</p>\n\n<pre><code>new T[N]\n</code></pre>\n\n<p>returns the address of the type <code>T *</code> of the first element of the allocated array.</p>\n\n<p>So you should write</p>\n\n<pre><code>T *a = new T[N]; \n</code></pre>\n\n<p>For example if <code>T</code> is equivalent to the type int</p>\n\n<pre><code>typedef int T;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>using T = int;\n</code></pre>\n\n<p>then the above allocation can be written</p>\n\n<pre><code>int *a = new int[N];\n</code></pre>\n\n<p>the size of element of the array is equal to <code>sizeof( int )</code> and usually is 4 bytes.</p>\n\n<p>Now let's assume that you are going to allocate an array of elements of type <code>int[M]</code> where <code>M</code> is a constant integer expression.</p>\n\n<p>You can write</p>\n\n<pre><code>typedef int T[M];\n</code></pre>\n\n<p>or</p>\n\n<pre><code>using T = int[M];\n</code></pre>\n\n<p>and</p>\n\n<pre><code>T *a = new T[N];\n</code></pre>\n\n<p>So you allocated an array of <code>N</code> elements where each element has size <code>sizeof( int[M]</code> and the pointer <code>a</code> points to the first element of the array.</p>\n\n<p>Because <code>T</code> is equivalent tp <code>int [M]</code> you can write</p>\n\n<pre><code>int ( *a )[M] = new int [N][M]; \n</code></pre>\n\n<p>that is this statement allocates an array of <code>N</code> elements of the type <code>int[M]</code> and the pointer <code>a</code> gets the address of the first element of the allocated array.</p>\n\n<p>Returning to your program example</p>\n\n<p>int r = 5\n   int (*a)[c];\n   a = new int[r][c];</p>\n\n<p>you can rewrite it the following way</p>\n\n<pre><code>typedef int T[c];\n</code></pre>\n\n<p>or</p>\n\n<pre><code>using T = int[c];\n</code></pre>\n\n<p>and</p>\n\n<pre><code>T *a = new T[r];\n</code></pre>\n\n<p>that is this statements allocates an array of <code>r</code> elements (objects) of type <code>int[c]</code> and <code>a</code> is pointer to the first element of the allocated array.</p>\n"}], "owner": {"reputation": 338, "user_id": 5891398, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f365d7d1d5644b3e48c407ff56cef01?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Wang", "link": "https://stackoverflow.com/users/5891398/alex-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 41274107, "answer_count": 2, "score": 4, "last_activity_date": 1482430011, "creation_date": 1482335108, "last_edit_date": 1482430011, "question_id": 41266710, "link": "https://stackoverflow.com/questions/41266710/understanding-2d-array-with-dynamic-memory-allocation", "title": "Understanding 2D array with dynamic memory allocation", "body": "<p>Can someone please help me understand the last line in this snippet of code? I don't understand how that dynamically allocates the 2D array. I understand that on line 6, it's creating a pointer named 'a' and pointing it to an array of integers of size 5 as defined by 'c'.</p>\n\n<p>What I don't understand is how that \"new int\" statement works with the r thrown into the equation. Thanks in advance.</p>\n\n<pre><code>#include &lt;iostream&gt;\nconst int c = 5; //num of columns\n\n int main () {\n   int r = 5;\n   int (*a)[c];\n   a = new int[r][c]; // allocate array\n}\n</code></pre>\n"}, {"tags": ["c++", "sockets", "tcp", "udp"], "answers": [{"comments": [{"owner": {"reputation": 934, "user_id": 4758940, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/AG6gu.jpg?s=128&g=1", "display_name": "CE_", "link": "https://stackoverflow.com/users/4758940/ce"}, "edited": false, "score": 0, "creation_date": 1482336820, "post_id": 41267206, "comment_id": 69735328, "body": "It&#39;s not when I create the server socket, but when I accept the client socket. I edited my post."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 934, "user_id": 4758940, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/AG6gu.jpg?s=128&g=1", "display_name": "CE_", "link": "https://stackoverflow.com/users/4758940/ce"}, "edited": false, "score": 0, "creation_date": 1482337269, "post_id": 41267206, "comment_id": 69735589, "body": "For UDP, you don&#39;t call <code>accept</code>.  You need to either use <code>sendto</code> to specify the IP/port of the remote end or you need to call <code>connect</code>, passing the the client&#39;s IP/port, so that <code>send</code> knows where to send to."}, {"owner": {"reputation": 1247, "user_id": 4284745, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-PPay30ot1_k/AAAAAAAAAAI/AAAAAAAAAFM/j7wqJ8SG30g/photo.jpg?sz=128", "display_name": "Dimitri Danilov", "link": "https://stackoverflow.com/users/4284745/dimitri-danilov"}, "edited": false, "score": 0, "creation_date": 1482338751, "post_id": 41267206, "comment_id": 69736491, "body": "@dbush In fact, he wants to use the sockaddr he got from the tcp, and to use them to send a message to his clients in UDP. For example I accept a client in TCP. I got his sockaddr_in. Then I give this sockaddr_in in the sendto() function."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 1247, "user_id": 4284745, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-PPay30ot1_k/AAAAAAAAAAI/AAAAAAAAAFM/j7wqJ8SG30g/photo.jpg?sz=128", "display_name": "Dimitri Danilov", "link": "https://stackoverflow.com/users/4284745/dimitri-danilov"}, "edited": false, "score": 0, "creation_date": 1482339287, "post_id": 41267206, "comment_id": 69736799, "body": "@DimitriDanilov For that to work, the UDP port number the client is listening on must be the same as the TCP port number it connects to the server with.  The client must then <code>bind</code> the TCP port before calling `connect."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 4, "last_activity_date": 1482336633, "creation_date": 1482336633, "answer_id": 41267206, "question_id": 41266680, "link": "https://stackoverflow.com/questions/41266680/can-i-use-the-same-sockaddr-in-in-tcp-and-udp/41267206#41267206", "title": "Can I use the same sockaddr_in in TCP and UDP?", "body": "<p>You can use the same copy of the <code>sockaddr_in</code> for TCP and UDP, but they have to be on different sockets.</p>\n\n<p>A given socket created with <code>AF_INET</code> also specifies either <code>SOCK_STREAM</code> making TCP or <code>SOCK_DGRAM</code> making it UDP.</p>\n\n<p>So if you have this:</p>\n\n<pre><code>struct sockaddr_in sin;\nsin.sin_family = AF_INET;\nsin.sin_addr.s_addr = INADDR_ANY;\nsin.sin_port = htons(12345);\n</code></pre>\n\n<p>You can pass this to <code>bind</code> with a TCP socket to bind to TCP/12345, and you can pass it to <code>bind</code> with a UDP socket to bind to UDP/12345.</p>\n"}, {"tags": [], "owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "is_accepted": false, "score": 1, "last_activity_date": 1482342564, "creation_date": 1482342564, "answer_id": 41268903, "question_id": 41266680, "link": "https://stackoverflow.com/questions/41266680/can-i-use-the-same-sockaddr-in-in-tcp-and-udp/41268903#41268903", "title": "Can I use the same sockaddr_in in TCP and UDP?", "body": "<p>you can use the same SOCAKADDR_IN structure for a TCP or UDP server or client but whenever you want to use it for a different one you should change the values of port and address because servers cannot be bound to the same port.</p>\n\n<p>so if we have two remote stations running a TCP server and a UDP Server then the client to connect them:</p>\n\n<pre><code>SOCKET servTcp; // a remote bound and listing tcp socket waiting for remote clients through the blocking function `accept`\nSOCKET servUdp; // a remote bound Udp server waiting for clients\n</code></pre>\n\n<p>// for the client:</p>\n\n<pre><code>SOCKET clientTcp = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\nSOCKET clientUdp = socket(AF_INET, SOCK_DGRAM,  IPPROTO_UDP);\n\nSOCKADDR_IN sa_serv;\nsa_serv.sin_addr.S_un.S_addr = inet_addr(\"127.168.0.1\");\nsa_serv.sin_family = AF_INET;\nsa_serv.sin_port   = htons(777);\n</code></pre>\n\n<p>now the socket clientTcp can connect to the remote tcp server using this address structure.</p>\n\n<p>to use the same SOCKADDR_IN structure sa_serv for the the udp server:</p>\n\n<p>as long as the tpc and the udp servers on the same remote machine we only change the port:</p>\n\n<pre><code>sa_serv.sin_port   = htons(1000); // the port is unique for servers to bind on.\n</code></pre>\n\n<p>now we the udp socket clientUdp can use use sa_serv to send and receive data from the remote udp serv.</p>\n\n<ul>\n<li>SOCKADDR_IN is the same for udp and tcp just change the value of port and sometimes address if server.</li>\n</ul>\n"}], "owner": {"reputation": 934, "user_id": 4758940, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/AG6gu.jpg?s=128&g=1", "display_name": "CE_", "link": "https://stackoverflow.com/users/4758940/ce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2032, "favorite_count": 0, "accepted_answer_id": 41267206, "answer_count": 2, "score": 4, "last_activity_date": 1482342564, "creation_date": 1482335040, "last_edit_date": 1482336897, "question_id": 41266680, "link": "https://stackoverflow.com/questions/41266680/can-i-use-the-same-sockaddr-in-in-tcp-and-udp", "title": "Can I use the same sockaddr_in in TCP and UDP?", "body": "<p>In my serveur, I bind the TCP and UDP on two different ports.\nI first connect my Client with TCP (via accept, etc)</p>\n\n<p>Then I want to use UDP to communicate between my server and my client.\nSo I tried to use the same <code>sockaddr_in</code> like that :</p>\n\n<pre><code>void AUDPMonitor::sendMessage(Message &amp;msg)\n{\n  for (ISocket *socket: *_fdListClients)\n  {\n    if (msg.getClientId() == socket-&gt;getSock())\n    {\n      UDPSocket *UdpSocket = reinterpret_cast&lt;UDPSocket *&gt;(socket);\n      UdpSocket-&gt;send(msg, socket-&gt;getUserAddr());\n      break;\n    }\n  }\n}\n</code></pre>\n\n<p>The <code>_fdListClients</code> is a vector of Socket I got from the TCP connexion.\nThere is no error messages but my client doesn't receive anything.</p>\n\n<p>So I want to know if it's possible to use the same sockaddr_in or if it's impossible.</p>\n\n<p>Edit : When I accept the client socket</p>\n\n<pre><code>  socklen_t     client_sin_len;\n  sockaddr_in   *client_sin = new sockaddr_in;\n\n  client_sin_len = sizeof(sockaddr_in   );\n  std::cout &lt;&lt; \"New User ! \" &lt;&lt; std::endl;\n  if ((cs = accept(fd, reinterpret_cast&lt;struct sockaddr *&gt;(client_sin), &amp;client_sin_len)) == -1)\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1482334862, "post_id": 41266575, "comment_id": 69733916, "body": "Have you ever seen code that have arguments in the <code>main</code> function declaration? Something like <code>int main(int argc, char *argv[])</code> or similar? Haven&#39;t you even wondered what that was all about? Also, it won&#39;t take much searching to find out how these are used with plenty of examples."}, {"owner": {"reputation": 1050, "user_id": 4720292, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ab9634db96cbb4bc54c10cbe276ae411?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre", "link": "https://stackoverflow.com/users/4720292/pierre"}, "edited": false, "score": 0, "creation_date": 1482334903, "post_id": 41266575, "comment_id": 69733946, "body": "you should read this : <a href=\"http://www.cplusplus.com/articles/DEN36Up4/\" rel=\"nofollow noreferrer\">cplusplus.com/articles/DEN36Up4</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7326446"}, "edited": false, "score": 0, "creation_date": 1482336247, "post_id": 41266575, "comment_id": 69734921, "body": "That helped me thanks"}], "owner": {"user_type": "does_not_exist", "display_name": "user7326446"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1482334751, "creation_date": 1482334751, "question_id": 41266575, "link": "https://stackoverflow.com/questions/41266575/perform-a-specific-action-according-to-the-run-parameters-in-c", "title": "Perform a specific action according to the run parameters in C++", "body": "<p>I have a program which reads a pmm image file and print the width , the height and the average color of the ppm image.This action is performed when the user gives as parameter something like that : <code>&gt; main photo1.ppm</code>.When the user gives nothing then the programm ask for the file name to read. Is there any way to copy the image to a new image when the user gives as parameter this : <code>&gt; main photo1.ppm -o newimage.ppm</code> ? Here is what I ve done so far :</p>\n\n<pre><code>int main() {\nchar fname[50];\ncout &lt;&lt; \"Please enter the file name: \";\n\n//Reads the file and print its data\n}\n</code></pre>\n"}, {"tags": ["c++", "string", "memory-leaks", "arduino", "class-hierarchy"], "comments": [{"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1482335040, "post_id": 41266450, "comment_id": 69734042, "body": "Asking the OS for how much freee memory is available is not a good way to detec memory leaks. The reason is that OS provides memory in chunks. It&#39;s possible that adding some member requires another chunk, which would explain your free RAM numbers."}, {"owner": {"reputation": 4300, "user_id": 4513509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MAkrs.png?s=128&g=1", "display_name": "NonCreature0714", "link": "https://stackoverflow.com/users/4513509/noncreature0714"}, "edited": false, "score": 0, "creation_date": 1482335156, "post_id": 41266450, "comment_id": 69734126, "body": "Where are your getters and setters for name?"}, {"owner": {"reputation": 57, "user_id": 2879565, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/db50eca88f9e3f81d92b9b3c4acd4a46?s=128&d=identicon&r=PG&f=1", "display_name": "groot", "link": "https://stackoverflow.com/users/2879565/groot"}, "edited": false, "score": 0, "creation_date": 1482335773, "post_id": 41266450, "comment_id": 69734553, "body": "Gette and setters of statusName have no effect on the problem (i&#39;ve tested that). I&#39;ve removed them to make code shorter berfore post it here to allow faster read."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 2879565, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/db50eca88f9e3f81d92b9b3c4acd4a46?s=128&d=identicon&r=PG&f=1", "display_name": "groot", "link": "https://stackoverflow.com/users/2879565/groot"}, "edited": false, "score": 0, "creation_date": 1482403879, "post_id": 41281008, "comment_id": 69764346, "body": "Tx for your contribute. As you hinted the code is very basic , i&#39;ve removed everything not essential to help the readers to understad faster the problem and avoid every secondary problem or bug focusing only on the method that give the problem."}, {"owner": {"reputation": 57, "user_id": 2879565, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/db50eca88f9e3f81d92b9b3c4acd4a46?s=128&d=identicon&r=PG&f=1", "display_name": "groot", "link": "https://stackoverflow.com/users/2879565/groot"}, "edited": false, "score": 0, "creation_date": 1482404208, "post_id": 41281008, "comment_id": 69764552, "body": "As you hinted the code is very basic , i&#39;ve removed everything not essential to help the readers to understad faster the problem and avoid every secondary problem or bug focusing only on the method that give the problem same thing for the constants in the code and the missing setter and getters. Said that i find very interesting your arguments and i&#39;ll give a try tx for that. You was right on the error in the function regarding that returned an useless pointer , unfortunatly i&#39;ve removed it but memory leak is still present."}, {"owner": {"reputation": 2636, "user_id": 3368201, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c46939557e63148d8c8cfa3b14d9e2f?s=128&d=identicon&r=PG&f=1", "display_name": "frarugi87", "link": "https://stackoverflow.com/users/3368201/frarugi87"}, "reply_to_user": {"reputation": 57, "user_id": 2879565, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/db50eca88f9e3f81d92b9b3c4acd4a46?s=128&d=identicon&r=PG&f=1", "display_name": "groot", "link": "https://stackoverflow.com/users/2879565/groot"}, "edited": false, "score": 0, "creation_date": 1482420731, "post_id": 41281008, "comment_id": 69775136, "body": "Glad I could at least give some hints.. I hope you will find the problem (and come back to share it, since now I&#39;m curious about the solution). By the way, you can try to allocate the string dinamically and delete it in the item destructor"}, {"owner": {"reputation": 57, "user_id": 2879565, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/db50eca88f9e3f81d92b9b3c4acd4a46?s=128&d=identicon&r=PG&f=1", "display_name": "groot", "link": "https://stackoverflow.com/users/2879565/groot"}, "edited": false, "score": 0, "creation_date": 1482480836, "post_id": 41281008, "comment_id": 69797560, "body": "The problem is the &quot;String&quot; class of Arduino i think.  It shouldnt be persistent so i cant delete it in the destructor."}, {"owner": {"reputation": 2636, "user_id": 3368201, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c46939557e63148d8c8cfa3b14d9e2f?s=128&d=identicon&r=PG&f=1", "display_name": "frarugi87", "link": "https://stackoverflow.com/users/3368201/frarugi87"}, "reply_to_user": {"reputation": 57, "user_id": 2879565, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/db50eca88f9e3f81d92b9b3c4acd4a46?s=128&d=identicon&r=PG&f=1", "display_name": "groot", "link": "https://stackoverflow.com/users/2879565/groot"}, "edited": false, "score": 0, "creation_date": 1482483629, "post_id": 41281008, "comment_id": 69798801, "body": "What do you mean by &quot;shouldn&#39;t be persistent so i can&#39;t delete it&quot;? You can create it on the heap in the constructor, then delete it in the destructor..."}, {"owner": {"reputation": 57, "user_id": 2879565, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/db50eca88f9e3f81d92b9b3c4acd4a46?s=128&d=identicon&r=PG&f=1", "display_name": "groot", "link": "https://stackoverflow.com/users/2879565/groot"}, "edited": false, "score": 0, "creation_date": 1483348580, "post_id": 41281008, "comment_id": 70053529, "body": "Unfortunalty it seems to not work with arduino class String, if i implement the destructor this way:   ActiveEmpty::~ActiveEmpty(){   delete this-&gt;statusName ; }  i get the following error: <b>type &#39;class String&#39; argument given to &#39;delete &#39;, expected pointer</b>"}], "tags": [], "owner": {"reputation": 2636, "user_id": 3368201, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c46939557e63148d8c8cfa3b14d9e2f?s=128&d=identicon&r=PG&f=1", "display_name": "frarugi87", "link": "https://stackoverflow.com/users/3368201/frarugi87"}, "is_accepted": false, "score": 0, "last_activity_date": 1482402653, "creation_date": 1482402653, "answer_id": 41281008, "question_id": 41266450, "link": "https://stackoverflow.com/questions/41266450/arduino-class-hierarchy-strings-and-memory-leak/41281008#41281008", "title": "Arduino class hierarchy, Strings and memory leak", "body": "<p>DISCLAIMER: I wanted to post this as a comment, not an answer, because in my opinion it does not solve the problem but just gives advices. Then I needed some code blocks, so I needed the answer features.</p>\n\n<p>Well, your code IMHO needs some improvements (or maybe that's just because you reduced it, but anyway I'll post them for you)</p>\n\n<ol>\n<li>Don't put the function implementation in the header file: use a cpp file to store the functions implementation and the header file to store the prototypes</li>\n<li>The purpose of the inheritance is to reuse the majority of the code you already have in common. So it's meaningless to have a lot of different variables; much better to declare them differently.</li>\n</ol>\n\n<p>For instance you can use it like this:</p>\n\n<pre><code>/* File State.h */\n\nclass MachineState{\n    public: \n        int getNumber();\n    protected:\n        String statusName;\n        int number;\n};\n\n/////////////////////ACTIVE FULL/////////////////////////////////\nclass ActiveFull : public MachineState\n{\n    public:\n        ActiveFull();\n};\n\n////////////////////////////// ACTIVE EMPTY ////////////////////\nclass ActiveEmpty : public MachineState\n{\n    public:\n        ActiveEmpty();\n};\n\n/* File State.cpp */\n\nint MachineState::getNumber(){\n    return this-&gt;number;\n}\n\nActiveEmpty::ActiveEmpty(){\n    this-&gt;number=1;\n};\n\nActiveEmpty::ActiveEmpty(){\n    this-&gt;number=2;\n};\n</code></pre>\n\n<p>or, if you don't have to change the value of number (and so you don't need a real variable)</p>\n\n<pre><code>/* File State.h */\n\nclass MachineState{\n    public: \n        virtual int getNumber() = 0;\n    protected:\n        String statusName;\n};\n\n/////////////////////ACTIVE FULL/////////////////////////////////\nclass ActiveFull : public MachineState\n{\n    public:\n        virtual int getNumber();\n};\n\n////////////////////////////// ACTIVE EMPTY ////////////////////\nclass ActiveEmpty : public MachineState\n{\n    public:\n        virtual int getNumber();\n};\n\n/* File State.cpp */\n\nint ActiveEmpty::getNumber(){\n    return 1;\n};\n\nint ActiveEmpty::getNumber(){\n    return 2;\n};\n</code></pre>\n\n<p>Then there is a small problem with the deallocation: if the <code>new</code> fails, you will get problems at the next <code>delete</code>. To solve this, you can do something like (and I've also shortened your code a bit)</p>\n\n<pre><code>void *StateFactory::changeStatus(int choice)\n{\n    if (this-&gt;currentState) // If it was correctly allocated\n        delete this-&gt;currentState;  // to prevent memory leak\n    switch (choice)\n    {\n    case 1:\n        this-&gt;currentState = new ActiveFull();\n        break;\n    case 2: // case 2 can be removed since it is identical to default\n        this-&gt;currentState = new ActiveEmpty();\n        break;\n    default:\n        this-&gt;currentState = new ActiveEmpty();\n        break;\n    }\n}\n</code></pre>\n\n<p>That said... Well, I'd modify the loop this way:</p>\n\n<pre><code>void printCurrentStateNumber()\n{\n    if (CurrentStateFactory.getCurrentState())\n        Serial.println(CurrentStateFactory.getCurrentState()-&gt;getNumber());\n    else\n        Serial.println(\"No more memory\");\n}\n\nvoid loop() {\n    Serial.print(F(\"Free RAM = \")); \n    Serial.println(freeMemory(), DEC);  // print how much RAM is available.\n    CurrentStateFactory.changeStatus(1);\n    printCurrentStateNumber();\n    CurrentStateFactory.changeStatus(2);\n    printCurrentStateNumber();\n}\n</code></pre>\n\n<p>This is to test if the state was successfully created.</p>\n\n<p>As for your explicit problem, I don't know how the library function works. Before starting to understand why there is this leak, I'd try to figure out if this is really a leak. So start the modified program (with the test before delete and the print of the no more memory string) and let it run until the library tells you that it run out of memory. If it stabilizes or it reaches 0 and does not print that, it's a library problem. On the other hand if the program halts printing the string it's a leak.</p>\n\n<p>One sidenote: it's not a good habit to let a small microcontroller perform allocations and deallocations too often, since it has a limited memory. Do the test, because if there is a real leak maybe it should be investigated more, but for your application I suggest you to think about permanently allocating two instances of the object and then just use them according to the value you passed it before - obviously if there are only a couple of derived classes), like this:</p>\n\n<pre><code>/* In the header file */\n#define NUM_OF_STATES 2\n\nclass StateFactory{\nprivate:\n    MachineState states[NUM_OF_STATES];\npublic: \n    StateFactory();\n    void changeStatus(int choice); // factory\n    MachineState *getCurrentState();\nprivate:\n    int currentIdx;\n};\n\n/* In the source file */\n\nStateFactory::StateFactory()\n{\n    states[0] = new ActiveFull();\n    states[1] = new ActiveEmpty();\n    this-&gt;currentIdx = 0;\n}\n\nMachineState *StateFactory::getCurrentState(){\n    return states[this-&gt;currentIdx];\n}\n\nvoid StateFactory::changeStatus(int choice)\n{\n    switch (choice)\n    {\n    case 1:\n        this-&gt;currentIdx = 0;\n        break;\n    case 2: // case 2 can be removed since it is identical to default\n        this-&gt;currentIdx = 1;\n        break;\n    default:\n        this-&gt;currentIdx = 1;\n        break;\n    }\n}\n</code></pre>\n\n<p>FINAL NOTE: Revising the answer I found that your <code>changeStatus</code> function returns a <code>void *</code> instead of a <code>void</code>. You should definitely fix that, and MAYBE things will get fixed (in fact you are returning a pointer instead of nothing). But I'm not sure about that.</p>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 2879565, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/db50eca88f9e3f81d92b9b3c4acd4a46?s=128&d=identicon&r=PG&f=1", "display_name": "groot", "link": "https://stackoverflow.com/users/2879565/groot"}, "edited": false, "score": 0, "creation_date": 1483377307, "post_id": 41430662, "comment_id": 70067349, "body": "it works tx. I was on it by few days. Happy new Year."}, {"owner": {"reputation": 138, "user_id": 5283629, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7V95s3l1Dk0/AAAAAAAAAAI/AAAAAAAAC4o/WU1zGZQc1N0/photo.jpg?sz=128", "display_name": "Francesco Lanza", "link": "https://stackoverflow.com/users/5283629/francesco-lanza"}, "reply_to_user": {"reputation": 57, "user_id": 2879565, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/db50eca88f9e3f81d92b9b3c4acd4a46?s=128&d=identicon&r=PG&f=1", "display_name": "groot", "link": "https://stackoverflow.com/users/2879565/groot"}, "edited": false, "score": 0, "creation_date": 1483377823, "post_id": 41430662, "comment_id": 70067542, "body": "Happy new year to you, too."}], "tags": [], "owner": {"reputation": 138, "user_id": 5283629, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7V95s3l1Dk0/AAAAAAAAAAI/AAAAAAAAC4o/WU1zGZQc1N0/photo.jpg?sz=128", "display_name": "Francesco Lanza", "link": "https://stackoverflow.com/users/5283629/francesco-lanza"}, "is_accepted": true, "score": 1, "last_activity_date": 1483376635, "creation_date": 1483376635, "answer_id": 41430662, "question_id": 41266450, "link": "https://stackoverflow.com/questions/41266450/arduino-class-hierarchy-strings-and-memory-leak/41430662#41430662", "title": "Arduino class hierarchy, Strings and memory leak", "body": "<p>it seems like a destructor's problem,</p>\n\n<p>I post a an implementation based on your code ..</p>\n\n<pre><code>#ifndef State_h\n#define State_h\n\n\n/* MachineState Class */\nclass MachineState{\n  public:\n  virtual void test() = 0;\n     MachineState(){\n        number = 0;\n        statusName = \"NULL\";\n     }\n     virtual ~MachineState(){\n      Serial.println(\"Destroy base\");\n     }\n     void setNumber(int n){\n      number =  n;\n     }\n     void setStatusName(String some){\n      statusName = some;\n     }\n     String getStatusName(){\n      return statusName;\n     }\n     int getNumber(){\n      return number;\n     }\n     virtual void print()const{\n      Serial.println(\"Class MS\");\n     }\n  protected:\n      String statusName;\n      int number;\n\n};\n\n\n/* ActiveFull Class */\nclass ActiveFull : public MachineState{\n  public:\n      ActiveFull(){\n        x = \"Class AF\";\n        setNumber(1);\n      }\n      void print()const{\n        Serial.println(\"Class AF\"); \n      }\n      void test(){}\n      ~ActiveFull(){\n       Serial.println(\"Destroy AF\");\n      }\n  private:\n    String x;\n};\n\n\n/* ActiveEmpty Class */\nclass ActiveEmpty : public MachineState\n{\n  public:\n      void print()const{\n        Serial.println(\"Class EE\"); \n      }\n      ActiveEmpty(){\n        x = \"Class EE\";\n        setNumber(2);\n      }\n      void test(){}\n      ~ActiveEmpty(){\n          Serial.println(\"Destroy EE\");\n      }\n  private:\n    String x;\n};\n\n/* StateFactory Class */\nclass StateFactory{\n    private:\n      MachineState *currentState;\n    public: \n      StateFactory();\n      ~StateFactory(){\n        Serial.println(\"Ho distrutto StateFactory\");\n      }\n      void changeStatus(int choice); // factory\n      MachineState *getCurrentState();\n  };\n\nStateFactory::StateFactory(){\n  this-&gt;currentState=new ActiveFull(); \n}\n\nMachineState *StateFactory::getCurrentState(){\n  return this-&gt;currentState; \n }\n\n\nvoid StateFactory::changeStatus(int choice){\n  if(this-&gt;currenState)\n     delete  this-&gt;currentState;\n  if (choice == 1){\n      currentState = new ActiveFull();\n    }\n  else if (choice == 2){\n      currentState = new ActiveEmpty();\n    }\n  else{\n      currentState = new ActiveEmpty();\n    }\n}\n\n#endif\n</code></pre>\n\n<p>This is my result with your main:</p>\n\n<pre><code>...\n\n2\nClass EE\nFree RAM = 7751\nDestroy EE\nDestroy base\n1\nClass AF\nDestroy AF\nDestroy base\n2\nClass EE\nFree RAM = 7751\nDestroy EE\nDestroy base\n1\nClass AF\nDestroy AF\nDestroy base\n\n...\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 2879565, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/db50eca88f9e3f81d92b9b3c4acd4a46?s=128&d=identicon&r=PG&f=1", "display_name": "groot", "link": "https://stackoverflow.com/users/2879565/groot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 591, "favorite_count": 0, "accepted_answer_id": 41430662, "answer_count": 2, "score": 0, "last_activity_date": 1483376635, "creation_date": 1482334369, "last_edit_date": 1482337030, "question_id": 41266450, "link": "https://stackoverflow.com/questions/41266450/arduino-class-hierarchy-strings-and-memory-leak", "title": "Arduino class hierarchy, Strings and memory leak", "body": "<p>Good afternoon , i'm starting a new Arduino Project 1.6.10 IDE ver. but i'm encountering some problems of memory leak when i use a class based structure.</p>\n\n<p>I post my code first and then i'll point the place when the memory leak seems to appear.</p>\n\n<p>mainSketchFile.</p>\n\n<pre><code>#include &lt;Ethernet.h&gt;\n#include &lt;MemoryFree.h&gt;\n#include \"Constants.h\"\n#include \"State.h\"\n\n\n\nStateFactory CurrentStateFactory;\n\nvoid setup() {\n\n  pinMode(BUZZER,OUTPUT);\n  Serial.begin(9600);\n  Serial.println(\"START\");\n  delay(1000);\n\n}\n\nvoid loop() {\n\n  Serial.print(F(\"Free RAM = \")); \n  Serial.println(freeMemory(), DEC);  // print how much RAM is available.\n  CurrentStateFactory.changeStatus(1);\n  Serial.println(CurrentStateFactory.getCurrentState()-&gt;getNumber());\n  CurrentStateFactory.changeStatus(2);\n  Serial.println(CurrentStateFactory.getCurrentState()-&gt;getNumber());\n}\n</code></pre>\n\n<p>The problem seems to be in State.h i marked the point in the comments</p>\n\n<pre><code>#ifndef State_h\n#define State_h\n\n/////////////////// STATE/////////////////////////\n\nclass MachineState{\n  public: \n    virtual int getNumber();\n  protected:\n\n};\n\n/////////////////////ACTIVE FULL/////////////////////////////////\nclass ActiveFull : public MachineState\n{\n  public:\n      ActiveFull();\n      virtual int getNumber();\n  private:\n      String statusName; //&lt;----- PROBLRM SEEMS TO BE HERE WHEN COMMENTED NO MEMORY LEAK APPEN\n      int number;\n};\n\nActiveFull::ActiveFull(){\n  this-&gt;number=1;\n};\n\n\nint ActiveFull::getNumber(){\n  return this-&gt;number;\n}\n\n////////////////////////////// ACTIVE EMPTY ////////////////////\nclass ActiveEmpty : public MachineState\n{\n  public:\n      ActiveEmpty();\n      virtual int getNumber();\n  protected:\n      String statusName;//&lt;----- PROBLRM SEEMS TO BE HERE WHEN COMMENTED NO MEMORY LEAK APPEN\n      int number;\n};\n\nActiveEmpty::ActiveEmpty(){\n   this-&gt;number=2;\n};\n\nint ActiveEmpty::getNumber(){\n  return this-&gt;number;\n}\n\n\n//////////////////FACTORY/////////////////////////////\n\n\nclass StateFactory{\n    private:\n      MachineState *currentState;\n    public: \n      StateFactory();\n      void *changeStatus(int choice); // factory\n      MachineState *getCurrentState();\n  };\n\nStateFactory::StateFactory(){\n  MachineState *var1=new ActiveFull();\n  this-&gt;currentState=var1; \n}\n\nMachineState *StateFactory::getCurrentState(){\n  return this-&gt;currentState; \n }\n\n\nvoid *StateFactory::changeStatus(int choice)\n{\n delete  this-&gt;currentState;  // to prevent memory leak\n  if (choice == 1){\n      MachineState *var1=new ActiveFull();\n      this-&gt;currentState=var1;\n    }\n  else if (choice == 2){\n      MachineState *var1=new ActiveEmpty;\n      this-&gt;currentState=var1;\n    }\n  else{\n      MachineState *var1=new ActiveEmpty;\n      this-&gt;currentState=var1;\n    }\n}\n\n#endif\n</code></pre>\n\n<p>i use the library  to track the memory usage and this is the output of the sketch:</p>\n\n<p>No memory Leak (String statusName commented)</p>\n\n<pre><code>Free RAM = 7897\n1\n2\nFree RAM = 7897\n1\n2\nFree RAM = 7897\n1\n2\nFree RAM = 7897\n1\n2\nFree RAM = 7897\n1\n2\nFree RAM = 7897\n1\n2\nFree RAM = 7897\n1\n2\nFree RAM = 7897\n1\n2\nFree RAM = 7897\n1\n2\n</code></pre>\n\n<p>Memory leak when property String statusName is uncommented</p>\n\n<pre><code>Free RAM = 6567\n1\n2\nFree RAM = 6559\n1\n2\nFree RAM = 6551\n1\n2\nFree RAM = 6543\n1\n2\nFree RAM = 6535\n1\n2\nFree RAM = 6527\n1\n2\n</code></pre>\n\n<p>Thanks in advise for your Time. Hope you can help me.</p>\n"}, {"tags": ["c++", "registry"], "answers": [{"comments": [{"owner": {"reputation": 874, "user_id": 3275384, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/84qKu.jpg?s=128&g=1", "display_name": "Ajit Medhekar", "link": "https://stackoverflow.com/users/3275384/ajit-medhekar"}, "edited": false, "score": 0, "creation_date": 1482387155, "post_id": 41274207, "comment_id": 69755048, "body": "Perfectly said. I was also thinking of that. But is there any other way to capture <code>RESOURCEMAP</code> ?"}, {"owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "reply_to_user": {"reputation": 874, "user_id": 3275384, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/84qKu.jpg?s=128&g=1", "display_name": "Ajit Medhekar", "link": "https://stackoverflow.com/users/3275384/ajit-medhekar"}, "edited": false, "score": 0, "creation_date": 1482392465, "post_id": 41274207, "comment_id": 69757528, "body": "I would need to know more about how you use the saved registry data in order to think about possible solutions.  You can still read the keys and values under <code>RESOURCEMAP</code> using registry API functions like <code>RegEnumKeyEx</code>, <code>RegEnumValue</code> and <code>RegQueryValueEx</code>, but you would need to figure out how to save the returned data to a file in a format appropriate for your application."}], "tags": [], "owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "is_accepted": false, "score": 0, "last_activity_date": 1482367520, "creation_date": 1482367520, "answer_id": 41274207, "question_id": 41266347, "link": "https://stackoverflow.com/questions/41266347/not-able-to-save-registry-key-resourcemap/41274207#41274207", "title": "Not able to save registry key RESOURCEMAP", "body": "<p>The <code>RESOURCEMAP</code> subkey is \"volatile\", its data are just kept in memory rather than kept backed up in a hive file. And according to its documentation, <code>RegSaveKey</code> is unable to save volatile keys.  My guess is that <code>RESOURCEMAP</code> was made volatile because it contains temporary device information, collected while the system is running and which can change each time the system is restarted.</p>\n"}], "owner": {"reputation": 874, "user_id": 3275384, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/84qKu.jpg?s=128&g=1", "display_name": "Ajit Medhekar", "link": "https://stackoverflow.com/users/3275384/ajit-medhekar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1482367520, "creation_date": 1482334115, "question_id": 41266347, "link": "https://stackoverflow.com/questions/41266347/not-able-to-save-registry-key-resourcemap", "title": "Not able to save registry key RESOURCEMAP", "body": "<p>I'm capturing registry HKLM\\Hardware using the function RegSaveKey() in Win32 application. I'm saving this hives in .CD file. I'm able to capture all other keys under HARDWARE key except RESOURCEMAP. I don't know why this subkey is not getting capture.  </p>\n\n<p>Here is my code :</p>\n\n<pre><code>  HKEY  hKeyToDump;\n  RegOpenKeyEx( HKEY_LOCAL_MACHINE, \"HARDWARE\", 0, KEY_ALL_ACCESS | KEY_WOW64_64KEY, &amp;hKeyToDump );  \n  RegFlushKey(hKeyToDump);\n  RegSaveKey(hKeyToDump, \"&lt;Path of .CD file&gt;\", NULL);  \n</code></pre>\n\n<p>Please help me in this.</p>\n"}, {"tags": ["c++", "c++11", "clang", "unions"], "comments": [{"owner": {"reputation": 709, "user_id": 6605494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c140e8dc532f574e899392ad4ffa4e7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas_toth", "link": "https://stackoverflow.com/users/6605494/jonas-toth"}, "edited": false, "score": 3, "creation_date": 1482334196, "post_id": 41266335, "comment_id": 69733455, "body": "unions dont handle constructors and destructors. so using a union with a non POD is unsafe (std::vector is unsafe). see std::variant and boost::variant"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1482334207, "post_id": 41266335, "comment_id": 69733460, "body": "Unrelated to your question, but why are you using <code>typedef struct...</code>? Structures are like classes, and the structure name is a type just like a class name."}, {"owner": {"reputation": 658, "user_id": 282356, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Rvo48.jpg?s=128&g=1", "display_name": "Ariel", "link": "https://stackoverflow.com/users/282356/ariel"}, "edited": false, "score": 1, "creation_date": 1482334299, "post_id": 41266335, "comment_id": 69733541, "body": "Because I came from a C world."}, {"owner": {"reputation": 709, "user_id": 6605494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c140e8dc532f574e899392ad4ffa4e7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas_toth", "link": "https://stackoverflow.com/users/6605494/jonas-toth"}, "edited": false, "score": 0, "creation_date": 1482334443, "post_id": 41266335, "comment_id": 69733639, "body": "<code>virtual ~Node();</code> is only necessary if your class will be used polymorphic. Otherwise you can remove the virtual (it adds overhead in the form of function pointers (vtable))"}], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1482334670, "post_id": 41266443, "comment_id": 69733788, "body": "You can very well make and use unions that contain non-trivial types. Redirecting to <code>boost::variant</code>/<code>std::variant</code> is wise, but the &quot;not possible&quot; is bogus. In any case, how the union is managed is unrelated to whether you can nest a class within itself through a <code>std::vector</code>."}, {"owner": {"reputation": 709, "user_id": 6605494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c140e8dc532f574e899392ad4ffa4e7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas_toth", "link": "https://stackoverflow.com/users/6605494/jonas-toth"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1482334838, "post_id": 41266443, "comment_id": 69733903, "body": "ok. iam curious what works with non trivials? i think it is still wise to use std::variant for classes, isnt it?"}, {"owner": {"reputation": 658, "user_id": 282356, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Rvo48.jpg?s=128&g=1", "display_name": "Ariel", "link": "https://stackoverflow.com/users/282356/ariel"}, "edited": false, "score": 0, "creation_date": 1482335005, "post_id": 41266443, "comment_id": 69734014, "body": "Quentin, could you explain, how to use union with class members like vector or map in a right way"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1482335021, "post_id": 41266443, "comment_id": 69734026, "body": "Everything works as usual, you just have to explicitly construct and destruct the active member. <code>std::variant</code> remains a better choice that manual management, yes."}, {"owner": {"reputation": 658, "user_id": 282356, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Rvo48.jpg?s=128&g=1", "display_name": "Ariel", "link": "https://stackoverflow.com/users/282356/ariel"}, "edited": false, "score": 0, "creation_date": 1482335211, "post_id": 41266443, "comment_id": 69734169, "body": "I know, but I have no c++17 and cannot use boost for some reason."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1482335786, "post_id": 41266443, "comment_id": 69734564, "body": "@jonas_toth: You can use placement new and delete manually to manage it, which is a big headache and why we point at <code>std::variant</code> (with C++17) instead, which will do it all for you. Consider it a type-safe union."}], "tags": [], "owner": {"reputation": 709, "user_id": 6605494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c140e8dc532f574e899392ad4ffa4e7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas_toth", "link": "https://stackoverflow.com/users/6605494/jonas-toth"}, "is_accepted": false, "score": -2, "last_activity_date": 1482349229, "last_edit_date": 1482349229, "creation_date": 1482334343, "answer_id": 41266443, "question_id": 41266335, "link": "https://stackoverflow.com/questions/41266335/c-union-that-contains-class-it-belongs-to/41266443#41266443", "title": "C++: union that contains class it belongs to", "body": "<p><strong>Edit</strong>\nMy original answer was incorrect/misleading, plz ignore it. for the reason see the comments below. conside std::variant or boost::variant anyway :)</p>\n\n<p>Non PlainOldData(POD) are unsafe in c-unions. </p>\n\n<p>Especially for this proplem std::variant came into the c++17 standard. You could use boost::variant for earlier versions of C++.</p>\n\n<p>The problem is, that union does not know anything about constructors and destructors. Therefore it is not possible to do more general things with elements of a union, that would be necessary (e.g. dynamic memory allocation)</p>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 5, "last_activity_date": 1482335053, "creation_date": 1482335053, "answer_id": 41266686, "question_id": 41266335, "link": "https://stackoverflow.com/questions/41266335/c-union-that-contains-class-it-belongs-to/41266686#41266686", "title": "C++: union that contains class it belongs to", "body": "<blockquote>\n  <p>I doubt that it will work as expected.</p>\n</blockquote>\n\n<p>You are correct. It won't. First, it won't actually compile if you ever try to construct a <code>Node</code>. You'll get something like:</p>\n\n<pre><code>prog.cc:26:10: error: call to implicitly-deleted default constructor of 'Node'\n    Node n;\n         ^\n</code></pre>\n\n<p>That's because in a <code>union</code>, any non-trivial operations are implicitly deleted. You will have to define <code>~Value()</code> to do the right thing. Which, assuming <code>type</code> is the index of which element in the union we actually are, to switch on that and call the appropriate destructor. And then do the same thing for copying and moving. </p>\n\n<p>That said, the nesting of incomplete types is also not ok. <code>vector</code> is allowed to have an incomplete type as long as it's complete before first use. But <code>unordered_map</code> does not have this allowance. You will have to wrap the value type in something else - like <code>unique_ptr&lt;Node&gt;</code> or <code>shared_ptr&lt;Node&gt;</code>. </p>\n\n<p>What you have in <code>Value</code> is a common pattern that has a million different names: discriminated union, sum type, or, perhaps most commonly, <code>variant</code>. Instead of reinventing the wheel, I suggest you instead use <a href=\"http://en.cppreference.com/w/cpp/utility/variant\" rel=\"nofollow noreferrer\"><code>std::variant</code></a> (if you're using a recent enough compiler to support such a thing) or <a href=\"http://www.boost.org/doc/libs/1_62_0/doc/html/variant.html\" rel=\"nofollow noreferrer\"><code>boost::variant</code></a> (otherwise). With that, you have:</p>\n\n<pre><code>using Value = variant&lt;int32_t, float, bool,\n    std::vector&lt;Node&gt;, std::unordered_map&lt;std::string, Node&gt;&gt;;\n</code></pre>\n\n<p>and this type is already destructible, copyable, movable, and visitable for you. </p>\n"}], "owner": {"reputation": 658, "user_id": 282356, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Rvo48.jpg?s=128&g=1", "display_name": "Ariel", "link": "https://stackoverflow.com/users/282356/ariel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1482349229, "creation_date": 1482334073, "last_edit_date": 1482335656, "question_id": 41266335, "link": "https://stackoverflow.com/questions/41266335/c-union-that-contains-class-it-belongs-to", "title": "C++: union that contains class it belongs to", "body": "<p>While this code is compiled without any error, I doubt that it will work as expected. Is such nesting allowed? I cannot use boost and c++17.</p>\n\n<pre><code>class Node;\n\ntypedef struct Value {      \n    ValueTag type;\n\n    union {         \n        std::int32_t                          integerValue;\n        std::float_t                          floatValue;\n        bool                                  boolValue;\n        std::vector&lt;Node&gt;                     arrayValue;\n        std::unordered_map&lt;std::string, Node&gt; dictionaryValue;\n    };          \n} Value;\n\nclass Node {                \nprivate:        \n    Value m_value;          \npublic:                 \n    virtual ~Node();    \n};\n</code></pre>\n"}, {"tags": ["c++", "qt", "vector", "split"], "comments": [{"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1482335208, "post_id": 41266284, "comment_id": 69734167, "body": "If anyone else does your job, what do you contribute? Are you going to pay for it?"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6952696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73338b062bbd628871fa2a60264b3a21?s=128&d=identicon&r=PG&f=1", "display_name": "Mirko S.", "link": "https://stackoverflow.com/users/6952696/mirko-s"}, "edited": false, "score": 0, "creation_date": 1482390995, "post_id": 41266998, "comment_id": 69756743, "body": "Thank you so much! I try it now!! :)"}], "tags": [], "owner": {"reputation": 1667, "user_id": 4490542, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8925b87f1bc4c6a3bc6956628c9d3b6f?s=128&d=identicon&r=PG&f=1", "display_name": "e.jahandar", "link": "https://stackoverflow.com/users/4490542/e-jahandar"}, "is_accepted": false, "score": 0, "last_activity_date": 1482335965, "creation_date": 1482335965, "answer_id": 41266998, "question_id": 41266284, "link": "https://stackoverflow.com/questions/41266284/how-split-a-qstring-and-and-save-a-part-of-string-in-a-floats-vector/41266998#41266998", "title": "How split a QString and and save a part of string in a float&#39;s vector", "body": "<p>At first you have to split them via .split method of QString, the result of split method is a QStringList object, then you can accessing splited literals with .at(N) method.\nAfter accessing first number group, you have to split them again and finaly accessing each part individually. .at(N) method returns a \nQString so you have to convert it to float via .toFloat() method</p>\n\n<pre><code>QString str = \"10;2:56;12:10;89:\";\nQStringList strSplited = str.split(':');\nQString numberGroup = strSplited.at(0);\nfloat ac = numberGroup.split(';').at(0).toFloat();\nfloat bc = numberGroup.split(';').at(1).toFloat();\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6952696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73338b062bbd628871fa2a60264b3a21?s=128&d=identicon&r=PG&f=1", "display_name": "Mirko S.", "link": "https://stackoverflow.com/users/6952696/mirko-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1516, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1482335965, "creation_date": 1482333958, "question_id": 41266284, "link": "https://stackoverflow.com/questions/41266284/how-split-a-qstring-and-and-save-a-part-of-string-in-a-floats-vector", "title": "How split a QString and and save a part of string in a float&#39;s vector", "body": "<p>I use C++ in QT!!!\nI have a string that contains some value that i have to save in a two float's vector.\nThe values that have to save in the first vector are separate with a ';' character and after a values that have to save in the second vector there is ':' character.\nSo I need to detect where are the delimiter character and save in the first float's vector the character between ':' and ';' and in the second vector the character between ':' and ';'</p>\n\n<p>Can you help me?</p>\n\n<p>Example of my QString:  10;2:56;12:10;89:</p>\n\n<p>Vector that I would want:  first:10,56,10\n                           second:2,12,89</p>\n"}, {"tags": ["c++", "constexpr", "c++17"], "comments": [{"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 0, "creation_date": 1482334397, "post_id": 41266275, "comment_id": 69733601, "body": "which compiler and version are you using exactly?"}, {"owner": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "reply_to_user": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 0, "creation_date": 1482335757, "post_id": 41266275, "comment_id": 69734538, "body": "@m.s. sorry forgot to say: gcc HEAD 7.0.0 201612"}], "answers": [{"comments": [{"owner": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "edited": false, "score": 0, "creation_date": 1482335950, "post_id": 41266855, "comment_id": 69734679, "body": "But the call to <code>value</code> without <code>if constexpr</code> is a constant expression! If it wasn&#39;t I wouldn&#39;t be able to use it in the <code>case</code> clause, isn&#39;t it?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "edited": false, "score": 1, "creation_date": 1482336021, "post_id": 41266855, "comment_id": 69734738, "body": "@PaperBirdMaster: Yes, but not every call to <code>value</code> <i>must</i> provide a constant expression. <code>constexpr</code> functions do not <i>have</i> to be given constant expression parameters, but they still have to work if they are not."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "edited": false, "score": 1, "creation_date": 1482336142, "post_id": 41266855, "comment_id": 69734850, "body": "@PaperBirdMaster You&#39;re right, yet that doesn&#39;t contradict this answer. Given <code>const char *foo = &quot;Hello&quot;;</code>, <code>value(foo)</code> would be valid too, just would not be a constant expression. And for such calls, <code>if constexpr</code> couldn&#39;t work."}, {"owner": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "edited": false, "score": 0, "creation_date": 1482337091, "post_id": 41266855, "comment_id": 69735497, "body": "Sorry for my silliness but I still don&#39;t get it. The instructions inside the <code>if</code> should be constant expression, if not, <code>value</code> will fail when used in <code>case</code> clause (<code>case value(std::string(&quot;AAAA&quot;).c_str())</code> will fail). So I still don&#39;t get why it fails in <code>if constexpr</code> when it seems to be compile-time evaluable."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "edited": false, "score": 0, "creation_date": 1482337182, "post_id": 41266855, "comment_id": 69735544, "body": "@PaperBirdMaster: There&#39;s no implicit &quot;if this isn&#39;t a constant expression&quot; part to the syntax. That&#39;s not what <code>if constexpr</code> is for. An expression either is a constant expression or it is not. This is a static property of an expression, based on the nature of the expression&#39;s component parts. <code>1 + 2</code> is a constant expression. <code>a + b</code> is only a constant expression if both <code>a</code> and <code>b</code> are declared <code>constexpr</code>. Parameters to <code>constexpr</code> functions are not declared <code>constexpr</code> and thus are not constant expressions."}, {"owner": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "edited": false, "score": 0, "creation_date": 1482337839, "post_id": 41266855, "comment_id": 69735926, "body": "@NicolBolas There&#39;s <i>explicit</i> &quot;If this isn&#39;t a constant expression&quot;, because if it isn&#39;t it will fail to compile in contexts where compile-time values are mandatory. So if <code>if (whatever)</code> compiles in a compile-time (constant expression) context I would expect that <code>if constexpr (whatever)</code> will compile in the same context. Do you know some article where I can read more about <code>if constexpr</code>?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "edited": false, "score": 0, "creation_date": 1482338098, "post_id": 41266855, "comment_id": 69736071, "body": "@PaperBirdMaster: This is not a template function. Whether it compiles or not is not <i>context dependent</i>. Either the function compiles or it does not; this <i>cannot</i> be dependent on the nature of the argument it is passed. You cannot write a <code>constexpr</code> function that does something different if the argument is not a constant expression. A <code>constexpr</code> function <i>must</i> be able to take arguments which are not constant expressions, and they must result in the same computation for the same input."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 6, "last_activity_date": 1482335545, "creation_date": 1482335545, "answer_id": 41266855, "question_id": 41266275, "link": "https://stackoverflow.com/questions/41266275/constexpr-recursive-function-using-if-constexpr-or-not/41266855#41266855", "title": "constexpr recursive function using if constexpr or not", "body": "<p>It's happening for the same reason you can't do this:</p>\n\n<pre><code>constexpr auto func(const int foo)\n{\n  return std::array&lt;int, foo&gt;{};\n}\n</code></pre>\n\n<p><code>foo</code> may <em>or may not</em> be a constant expression, depending on how you call <code>func</code>. But what you put into a template parameter <em>must</em> be a constant expression. Therefore, this code fails to compile.</p>\n\n<p>The same goes for your <code>value</code> function. What you put into <code>if constexpr</code> <em>must</em> be a constant expression, just like with template arguments. So you cannot put something there which may or may not be a constant expression, like parameters to <code>constexpr</code> functions.</p>\n"}], "owner": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 655, "favorite_count": 0, "accepted_answer_id": 41266855, "answer_count": 1, "score": 4, "last_activity_date": 1482335808, "creation_date": 1482333930, "last_edit_date": 1482335808, "question_id": 41266275, "link": "https://stackoverflow.com/questions/41266275/constexpr-recursive-function-using-if-constexpr-or-not", "title": "constexpr recursive function using if constexpr or not", "body": "<p>Using gcc (HEAD 7.0.0 201612) I was surprised to discover that this works:</p>\n\n<pre><code>constexpr long value(const char *definition)\n{\n    if (definition &amp;&amp; *definition)\n    {\n        return *definition + value(definition + 1);\n    }\n\n    return *definition;\n}\n\nint main()\n{\n    long l{};\n    std::cin &gt;&gt; l;\n\n    switch (l)\n    {\n        case value(\"AAAA\"): f1(); break;\n        case value(\"BBBB\"): f2(); break;\n        default: error();         break;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>The literal strings <code>\"AAAA\"</code> and <code>\"BBBB\"</code> were treated as compile-time values and the calls to <code>value</code> function yields the values <code>260</code> and <code>264</code> used directly in the <code>switch</code> context; I should admit that I was expecting the compiler complain about \"<em>strings are no constant expressions</em>\". So I moved to the next step and tried to add a <code>if constexpr</code> to the algorithm:</p>\n\n<pre><code>constexpr long value(const char *definition)\n{\n    if constexpr (definition &amp;&amp; *definition)\n    {\n        return *definition + value(definition + 1);\n    }\n\n    return *definition;\n}\n</code></pre>\n\n<p>But by adding the <code>if constexpr</code> the code no longer compiles:</p>\n\n<blockquote>\n<pre><code>In function 'constexpr long int value(const char*)':\n error: 'definition' is not a constant expression\n     if constexpr (definition &amp;&amp; *definition)\n                                            ^\n</code></pre>\n</blockquote>\n\n<p>So it seems that the <code>definition</code> pointer itself is not evaluable at compile time in the <code>if constexpr</code> context but using traditional <code>if</code> the whole function is evaluable at compile time.</p>\n\n<p>Why is this happening?</p>\n"}, {"tags": ["c++", "character", "ascii"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1482333918, "post_id": 41266222, "comment_id": 69733257, "body": "<i>How</i> do you &quot;give two spaces&quot;?"}, {"owner": {"reputation": 1, "user_id": 5222004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4966f82fe3495e25b458dc8403cd9b50?s=128&d=identicon&r=PG&f=1", "display_name": "Wasim Sahi", "link": "https://stackoverflow.com/users/5222004/wasim-sahi"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1482334215, "post_id": 41266222, "comment_id": 69733466, "body": "when i write var=&#39;  &#39;; i am giving two spaces between single quotes."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1482334319, "post_id": 41266222, "comment_id": 69733552, "body": "So a multi-character literal? Then it&#39;s implementation specific. What the result will be depends on the compiler you are using. See e.g. <a href=\"http://en.cppreference.com/w/cpp/language/character_literal\" rel=\"nofollow noreferrer\">this character literal reference</a> for more information."}], "answers": [{"tags": [], "owner": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1482335265, "last_edit_date": 1482335265, "creation_date": 1482334193, "answer_id": 41266378, "question_id": 41266222, "link": "https://stackoverflow.com/questions/41266222/how-compiler-identifies-the-ascii-code-of-multiple-characters/41266378#41266378", "title": "How compiler identifies the ASCII code of multiple characters", "body": "<p>This is what C++ standard N3690 mentions about multicharacter literals:</p>\n\n<blockquote>\n  <p>An ordinary character literal that contains more than one c-char is a <strong>multicharacter</strong> literal. A multicharacter literal, or an ordinary character literal containing a single c-char not representable in the execution character\n  set, is conditionally-supported, has type int, and has an <strong>implementation</strong>-defined value.</p>\n</blockquote>\n\n<p>So the answer is that the corresponding int value is <em>implementation-specific</em>.</p>\n\n<p>While for single-char literal:</p>\n\n<blockquote>\n  <p>An ordinary character literal that contains a single c-char representable in the execution character set has type char, with value equal to the numerical value of the encoding of the c-char in the execution character set.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5222004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4966f82fe3495e25b458dc8403cd9b50?s=128&d=identicon&r=PG&f=1", "display_name": "Wasim Sahi", "link": "https://stackoverflow.com/users/5222004/wasim-sahi"}, "edited": false, "score": 0, "creation_date": 1482334770, "post_id": 41266452, "comment_id": 69733858, "body": "can you explain this more."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1482337354, "post_id": 41266452, "comment_id": 69735641, "body": "A <code>char</code> can be signed or unsigned; either way, it is <b>not</b> required to hold values from 0 to 255. When it&#39;s unsigned, that&#39;s quite common, but, again, not required."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1482337561, "post_id": 41266452, "comment_id": 69735771, "body": "The value of a multi-character literal (as in <code>&#39;  &#39;</code>) is <b>implementation-defined</b>. That means that the implementation <b>must document</b> what it does. The value is not required to be some more-or-less literal interpretation of values in memory, and it may or may not have anything to do with endianness."}], "tags": [], "owner": {"reputation": 146, "user_id": 1954946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j1c2x.jpg?s=128&g=1", "display_name": "shisui", "link": "https://stackoverflow.com/users/1954946/shisui"}, "is_accepted": false, "score": 0, "last_activity_date": 1482339487, "last_edit_date": 1495541636, "creation_date": 1482334372, "answer_id": 41266452, "question_id": 41266222, "link": "https://stackoverflow.com/questions/41266222/how-compiler-identifies-the-ascii-code-of-multiple-characters/41266452#41266452", "title": "How compiler identifies the ASCII code of multiple characters", "body": "<p>a char in c++ is a <strong>byte</strong>(with possible int values from <strong>0</strong> to <strong>255</strong>).\nSo in your case when you cast the two white-spaces '  ' to an int, behind the scenes it's just a <strong>base-256 conversion</strong>. To be more precise:</p>\n\n<ul>\n<li>the white-space ' ' has an ASCII of 32.</li>\n<li>So, two white-spaces will be cast to an int of: 32 + 256*32 = 8224.</li>\n</ul>\n\n<p><strong>EDIT</strong></p>\n\n<ul>\n<li>this is how your two characters are represented in memory, where one char-block is a byte, which can have values ranging in 0-255: \n<strong>|char| char|</strong>.</li>\n<li>when you cast this two blocks to an int, you make a base-256 conversion, i.e. the ASCII of the right char block, which is 32 we multiply by 256^0. Then the ASCII of the next char block, i.e. 32 we multiply by 256^1.</li>\n<li><p>Step 2. is <strong>implementation dependent</strong> as @saurav-sahu mentions, e.g. if it's <a href=\"https://chortle.ccsu.edu/AssemblyTutorial/Chapter-15/ass15_3.html\" rel=\"nofollow noreferrer\">big endian or little endian</a>.</p></li>\n<li><p>I tried to give you an intuition of what goes behind the system, but as <a href=\"https://stackoverflow.com/users/1593860/pete-becker\">pete_becker</a> has correctly pointed to, it's <strong>highly implementation specific</strong>, e.g. the char type can be interpreted as a signed or unsigned value and so on.</p></li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 5222004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4966f82fe3495e25b458dc8403cd9b50?s=128&d=identicon&r=PG&f=1", "display_name": "Wasim Sahi", "link": "https://stackoverflow.com/users/5222004/wasim-sahi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 796, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1482339487, "creation_date": 1482333804, "last_edit_date": 1482335358, "question_id": 41266222, "link": "https://stackoverflow.com/questions/41266222/how-compiler-identifies-the-ascii-code-of-multiple-characters", "title": "How compiler identifies the ASCII code of multiple characters", "body": "<pre><code>int var;\nvar=' ';       // this is a single space\ncout &lt;&lt; var;   // prints 32\nvar = '  ';    // double space\ncout &lt;&lt; var;   // prints 8224. Why?\n</code></pre>\n\n<p>How the compiler calculates this (8224) for two spaces?</p>\n\n<p>This happens with every multi-character literal.</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 709, "user_id": 6605494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c140e8dc532f574e899392ad4ffa4e7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas_toth", "link": "https://stackoverflow.com/users/6605494/jonas-toth"}, "edited": false, "score": 0, "creation_date": 1482333935, "post_id": 41266210, "comment_id": 69733270, "body": "did you try <code>MatrixT&lt;double&gt;::ColumnT</code> the parameter T might be shadowed, since both templates use the same placeholder for the type. try different names for T as well"}], "answers": [{"tags": [], "owner": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "is_accepted": true, "score": 2, "last_activity_date": 1482335034, "creation_date": 1482335034, "answer_id": 41266676, "question_id": 41266210, "link": "https://stackoverflow.com/questions/41266210/how-to-typedef-an-inner-class/41266676#41266676", "title": "How to typedef an inner class", "body": "<p>Just remove the second <code>template&lt;class T&gt;</code></p>\n\n<pre><code>template&lt;class T&gt;\nstruct MatrixT\n{\n    struct ColumnT\n    {\n    };\n};\n</code></pre>\n\n<p><code>ColumnT</code> should then be using the same type as <code>MatrixT</code>, and your typedef...</p>\n\n<pre><code>typedef MatrixT&lt;double&gt; matrix;\n</code></pre>\n\n<p>...should work as you are expecting it to.</p>\n"}], "owner": {"reputation": 976, "user_id": 7326410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7da5572305882ad4135f63f3787318d?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Bullock", "link": "https://stackoverflow.com/users/7326410/michael-bullock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 41266676, "answer_count": 1, "score": 1, "last_activity_date": 1482335034, "creation_date": 1482333783, "last_edit_date": 1482334742, "question_id": 41266210, "link": "https://stackoverflow.com/questions/41266210/how-to-typedef-an-inner-class", "title": "How to typedef an inner class", "body": "<p>I have a matrix class and a column class inside it:</p>\n\n<pre><code>template&lt;class T&gt;\nstruct MatrixT\n{\n    template&lt;class T&gt;\n    struct ColumnT\n    {\n    };\n};\n</code></pre>\n\n<p>Note that a <code>ColumnT</code> will always hold the same type as a <code>MatrixT</code>.</p>\n\n<p>For convenience I define</p>\n\n<pre><code>typedef MatrixT&lt;double&gt; matrix;\n</code></pre>\n\n<p>Since in reality, I'll be using a <code>double</code> element most of the time. But I also want to define something similar for the <code>columnT</code> class. I tried</p>\n\n<pre><code>typedef MatrixT&lt;double&gt;::ColumnT&lt;double&gt; matrix::column;\n</code></pre>\n\n<p>but compilation fails with the error</p>\n\n<blockquote>\n  <p>Error - qualified name is not allowed</p>\n</blockquote>\n\n<p>Is there a way of achieving what I want?</p>\n\n<p>I'd like to be able to type <code>matrix::column c;</code> just as I can type <code>matrix m;</code></p>\n"}, {"tags": ["c++", "for-loop", "time", "sleep", "pause"], "comments": [{"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 1, "creation_date": 1482333332, "post_id": 41266026, "comment_id": 69732856, "body": "<a href=\"http://en.cppreference.com/w/cpp/thread/sleep_for\" rel=\"nofollow noreferrer\">sleep_for</a>?"}, {"owner": {"reputation": 593, "user_id": 6534541, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/561c59a13a698b9777eb0b88d2e29158?s=128&d=identicon&r=PG&f=1", "display_name": "I&#39;m here for Winter Hats", "link": "https://stackoverflow.com/users/6534541/im-here-for-winter-hats"}, "edited": false, "score": 4, "creation_date": 1482333347, "post_id": 41266026, "comment_id": 69732865, "body": "see this post <a href=\"http://stackoverflow.com/questions/4184468/sleep-for-milliseconds\" title=\"sleep for milliseconds\">stackoverflow.com/questions/4184468/sleep-for-milliseconds</a> or reference to c++ <a href=\"http://www.cplusplus.com/reference/thread/this_thread/sleep_for/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/thread/this_thread/sleep_for</a>"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 7002736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4126ef49c02a7a2c448a06fc547bd955?s=128&d=identicon&r=PG&f=1", "display_name": "DavidJ85", "link": "https://stackoverflow.com/users/7002736/davidj85"}, "edited": false, "score": 0, "creation_date": 1482334619, "post_id": 41266163, "comment_id": 69733750, "body": "How would I use POSIX since I believe it is more than just a library. Do you have a good source in which I could read or learn about it?"}], "tags": [], "owner": {"reputation": 61, "user_id": 4330591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fc8cb776b02a8b2e76e1173cbd64094?s=128&d=identicon&r=PG&f=1", "display_name": "nerox8664", "link": "https://stackoverflow.com/users/4330591/nerox8664"}, "is_accepted": false, "score": 0, "last_activity_date": 1482333622, "creation_date": 1482333622, "answer_id": 41266163, "question_id": 41266026, "link": "https://stackoverflow.com/questions/41266026/function-to-make-program-pause-or-sleep-c/41266163#41266163", "title": "Function to make program pause or sleep C++", "body": "<p>You can use <code>Sleep(ms)</code> function from WinAPI or POSIX <code>usleep(mcrsec)</code></p>\n"}], "owner": {"reputation": 45, "user_id": 7002736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4126ef49c02a7a2c448a06fc547bd955?s=128&d=identicon&r=PG&f=1", "display_name": "DavidJ85", "link": "https://stackoverflow.com/users/7002736/davidj85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 766, "favorite_count": 0, "closed_date": 1482334032, "answer_count": 1, "score": 0, "last_activity_date": 1482333622, "creation_date": 1482333199, "question_id": 41266026, "link": "https://stackoverflow.com/questions/41266026/function-to-make-program-pause-or-sleep-c", "closed_reason": "Duplicate", "title": "Function to make program pause or sleep C++", "body": "<p>I am trying to find a way to pause or sleep my simple c++ program such as the <code>time.sleep(x)</code> in Python. Is there an equivalent in C++? An example of where I would want to use this is in here:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main() {\n    for (int x = 0 ; x &lt; 100 ; x++) {\n        cout &lt;&lt; 100 - x &lt;&lt; \" bottles of beer on the wall, \"\n             &lt;&lt; 100 - x &lt;&lt; \" bottles of beer!\\nTake one down pass it around \"\n             &lt;&lt; 100 - (x + 1)  &lt;&lt; \" bottles of beer on the wall\\n\\n\";\n             //enter sleep here to pause before next output\n    }\n}\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "c++-concepts"], "answers": [{"tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": true, "score": 6, "last_activity_date": 1482334163, "creation_date": 1482334163, "answer_id": 41266367, "question_id": 41265987, "link": "https://stackoverflow.com/questions/41265987/concepts-checking-signatures-of-methods-with-arguments/41266367#41266367", "title": "Concepts: checking signatures of methods with arguments", "body": "<p>Concepts check expressions, and <code>a.bar(int)</code> is not one. By writing</p>\n\n<pre><code>{ a.foo(int) } -&gt; int\n</code></pre>\n\n<p>you ask the compiler to check that the aforementioned expression has type <code>int</code>. Which doesn't make sense.</p>\n\n<p>You did find a valid alternative; another one might be, since the type of <code>a.bar(x)</code> doesn't depend on <code>x</code>' value:</p>\n\n<pre><code>template&lt;typename T&gt;\nconcept bool myConcept() {\n    return requires(T a) {\n        { a.foo()   } -&gt; int;\n        { a.bar(0)  } -&gt; int;\n    };\n}\n\nstruct Object {\n    int foo()    {return 0;}\n    int bar(int) {return 0;}\n};\n\nstatic_assert(myConcept&lt;Object&gt;(), \"Object does not adhere to myConcept\");\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1482400597, "post_id": 41272560, "comment_id": 69762241, "body": "I like you&#39;re makeval&lt;T&gt;() and I&#39;d like to see it in the standard."}], "tags": [], "owner": {"reputation": 4565, "user_id": 1535516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18cd12e7701f83e50fb4d29d1918be0f?s=128&d=identicon&r=PG", "display_name": "xaizek", "link": "https://stackoverflow.com/users/1535516/xaizek"}, "is_accepted": false, "score": 3, "last_activity_date": 1482357330, "creation_date": 1482357330, "answer_id": 41272560, "question_id": 41265987, "link": "https://stackoverflow.com/questions/41265987/concepts-checking-signatures-of-methods-with-arguments/41272560#41272560", "title": "Concepts: checking signatures of methods with arguments", "body": "<p>As actual value of the type doesn't matter, I'd suggest using <code>int{}</code> as argument. This documents the purpose of the argument somewhat better, IMO:</p>\n\n<pre><code>{ a.bar(int{})  } -&gt; int;\n</code></pre>\n\n<p>Obviously this won't work with types for which there is no default constructor. In templates, one would use <a href=\"http://en.cppreference.com/w/cpp/utility/declval\" rel=\"nofollow noreferrer\"><code>std::declval</code></a> to work around similar issue, but here GCC errors:</p>\n\n<pre><code>error: static assertion failed: declval() must not be used!\n</code></pre>\n\n<p>But there is nothing to stop us from writing equivalent (but unimplemented) function to be used with concepts, like this:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate &lt;class T&gt;\ntypename std::add_rvalue_reference&lt;T&gt;::type makeval();\n\ntemplate&lt;typename T&gt;\nconcept bool myConcept() {\n    return requires(T a, int i) {\n        { a.foo() } -&gt; int;\n        { a.bar(makeval&lt;int&gt;()) } -&gt; int;\n    };\n}\n\nstruct Object {\n    int foo()    {return 0;}\n    int bar(int) {return 0;}\n};\n\nstatic_assert(myConcept&lt;Object&gt;(), \"Object does not adhere to myConcept\");\n</code></pre>\n"}], "owner": {"reputation": 3492, "user_id": 118958, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/NwFFJ.jpg?s=128&g=1", "display_name": "ynimous", "link": "https://stackoverflow.com/users/118958/ynimous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 1, "accepted_answer_id": 41266367, "answer_count": 2, "score": 5, "last_activity_date": 1482357330, "creation_date": 1482333071, "last_edit_date": 1482335234, "question_id": 41265987, "link": "https://stackoverflow.com/questions/41265987/concepts-checking-signatures-of-methods-with-arguments", "title": "Concepts: checking signatures of methods with arguments", "body": "<p>I've been playing around with concepts. Here's a minimal example where I'm trying to create a concept based on method signatures:</p>\n\n<pre><code>template&lt;typename T&gt;\nconcept bool myConcept() {\n    return requires(T a, int i) {\n        { a.foo()   } -&gt; int;\n        { a.bar(i)  } -&gt; int;\n    };\n}\n\nstruct Object {\n    int foo()    {return 0;}\n    int bar(int) {return 0;}\n};\n\nstatic_assert(myConcept&lt;Object&gt;(), \"Object does not adhere to myConcept\");\n</code></pre>\n\n<p>To my surprise writing <code>{ a.bar(int) } -&gt; int</code> did not work, so I resorted to adding an additional argument to the <code>requires</code> expression. This seems a bit strange and I was wondering if there is a way to do the same thing. Another thing that worked was using something like <code>{ a.bar((int)0) } -&gt; int</code>, but I find this worse.</p>\n"}, {"tags": ["c++", "sockets", "networking", "tcp"], "comments": [{"owner": {"reputation": 5916, "user_id": 3068258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7ecfa82e529a576cbc6ef661b9c9815?s=128&d=identicon&r=PG", "display_name": "Andy Schweig", "link": "https://stackoverflow.com/users/3068258/andy-schweig"}, "edited": false, "score": 0, "creation_date": 1482336647, "post_id": 41265884, "comment_id": 69735192, "body": "<code>accept()</code> is available and you have the right header file included (<code>&lt;sys&#47;socket.h&gt;</code>). What error are you getting? Have you tried compiling it from the command line? I tried compiling your code but I don&#39;t have your header file <code>tcp_server.h</code>."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1482336654, "post_id": 41265884, "comment_id": 69735195, "body": "Hmm, <a href=\"http://www.manpages.info/macosx/accept.2.html\" rel=\"nofollow noreferrer\"><code>accept</code></a> should be available under <i>OSX</i>. Don&#39;t you have a variable called <code>accept</code>? What is the full error message?"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1482337294, "post_id": 41265884, "comment_id": 69735605, "body": "What does <i>the compiler</i> say?"}, {"owner": {"reputation": 1, "user_id": 7326265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f71b4073a310dfd330ad154cb2962827?s=128&d=identicon&r=PG&f=1", "display_name": "wutschkef", "link": "https://stackoverflow.com/users/7326265/wutschkef"}, "edited": false, "score": 0, "creation_date": 1482337576, "post_id": 41265884, "comment_id": 69735782, "body": "I found the problem: The third argument of accept() expects an unsigned int pointer, while I was passing an int pointer. Im surprised that ints cannot by typecast to unsigned ints."}, {"owner": {"reputation": 1, "user_id": 7326265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f71b4073a310dfd330ad154cb2962827?s=128&d=identicon&r=PG&f=1", "display_name": "wutschkef", "link": "https://stackoverflow.com/users/7326265/wutschkef"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1482337708, "post_id": 41265884, "comment_id": 69735851, "body": "@ForceBru I added the compiler error message to my question above."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1482338139, "post_id": 41265884, "comment_id": 69736098, "body": "@wutschkef You need to declare clilen_ to be of type socklen_t, not int."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1482383779, "post_id": 41265884, "comment_id": 69753848, "body": "Your IDE didn&#39;t say anything of the sort. &#39;candidate function not viable: no known conversion from &#39;int *&#39; to &#39;socklen_t *&#39; (aka &#39;unsigned int *&#39;) for 3rd argument&#39; is not the same thing as &#39;it doesn&#39;t know what accept() is&#39;. You need to read error messages more carefully. They do contain information."}], "answers": [{"tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 1, "last_activity_date": 1482380872, "creation_date": 1482380872, "answer_id": 41275799, "question_id": 41265884, "link": "https://stackoverflow.com/questions/41265884/how-do-i-accept-socket-connections-in-a-simple-tcp-server-running-on-os-x/41275799#41275799", "title": "How do I accept socket connections in a simple TCP server running on OS X?", "body": "<p>The problem is that you're using a C++ compiler to compile C code.  The two languages are not the same, despite the common roots.</p>\n\n<p>The C++ error message tells you what is going on -- C++ is much more strict about types of arguments to a function (particularly pointer types) as it uses them for overloading.  In C on the other hand, function arguments are not so strict and a pointer is a pointer, giving you at most a warning if you use the wrong pointer type.</p>\n"}], "owner": {"reputation": 1, "user_id": 7326265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f71b4073a310dfd330ad154cb2962827?s=128&d=identicon&r=PG&f=1", "display_name": "wutschkef", "link": "https://stackoverflow.com/users/7326265/wutschkef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1482380872, "creation_date": 1482332772, "last_edit_date": 1482380403, "question_id": 41265884, "link": "https://stackoverflow.com/questions/41265884/how-do-i-accept-socket-connections-in-a-simple-tcp-server-running-on-os-x", "title": "How do I accept socket connections in a simple TCP server running on OS X?", "body": "<p>I am writing a simple server in the internet domain using TCP. I have working code that creates a socket, binds it to the server's IP address and listens for connections. \nI want to use the accept() system call to accept connections. I have included the headers listed in accept's man page (<a href=\"http://www.linuxhowtos.org/data/6/accept.txt\" rel=\"nofollow noreferrer\">http://www.linuxhowtos.org/data/6/accept.txt</a>). But my IDE says it doesn't know what accept() is. \nHere is my code: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt; \n#include &lt;netinet/in.h&gt;\n#include \"tcp_server.h\"\n\nvoid error(char* msg)\n{\n    perror(msg);\n    exit(1);\n} \n\ntcp_server::tcp_server(int portno)\n{\n    sockfd_ = socket(AF_INET, SOCK_STREAM, 0);\n    if (sockfd_ &lt; 0)\n    {\n        error(\"ERROR opening socket on server.\");\n    }\n\n    bzero((char *) &amp;serv_addr_, sizeof(serv_addr_));\n\n    serv_addr_.sin_family = AF_INET;\n    serv_addr_.sin_port = htons(portno);\n    serv_addr_.sin_addr.s_addr = INADDR_ANY;\n\n    if (bind(sockfd_, (struct sockaddr *) &amp;serv_addr_, sizeof(serv_addr_)) &lt; 0)\n    {\n        error(\"ERROR on binding socket to server address.\");\n    }\n\n    listen(sockfd_, 5);\n\n    clilen_ = sizeof(cli_addr_);\n    newsockfd_ = accept(sockfd_, (struct sockaddr *) &amp;cli_addr_, &amp;clilen_);\n}\n</code></pre>\n\n<p>I call accept() in the last line posted above. Isn't accept() available under OS X? How do I do this right? </p>\n\n<p>Here is \"tcp_server.h\": </p>\n\n<pre><code>#pragma once \n\nclass tcp_server\n{\npublic:\n    tcp_server(int portno);\n    ~tcp_server();\n    void set_cli_addr(); \n\nprivate:\n    int sockfd_, newsockfd_, portno_, clilen_, n_;\n    char buffer_[256];\n    struct sockaddr_in serv_addr_, cli_addr_;\n\n};\n</code></pre>\n\n<p>I get the following error when I compile tcp_server.cpp manually: </p>\n\n<pre><code>tcp_server.cpp:53:18: error: no matching function for call to 'accept'\nnewsockfd_ = accept(sockfd_, (struct sockaddr *) &amp;cli_addr_, &amp;clilen_);\n             ^~~~~~\n/usr/include/sys/socket.h:681:5: note: candidate function not viable: no known conversion from 'int *' to 'socklen_t *' (aka 'unsigned int *') for 3rd argument\nint     accept(int, struct sockaddr * __restrict, socklen_t * __restrict)\n</code></pre>\n"}, {"tags": ["c++", "qt"], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 7328351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/688cf31676b898c9351528dc5f02d0d1?s=128&d=identicon&r=PG&f=1", "display_name": "Jing Wang", "link": "https://stackoverflow.com/users/7328351/jing-wang"}, "is_accepted": true, "score": 4, "last_activity_date": 1482375143, "creation_date": 1482375143, "answer_id": 41275094, "question_id": 41265878, "link": "https://stackoverflow.com/questions/41265878/how-can-scrollable-image-widget-custom-on-qt/41275094#41275094", "title": "How can scrollable image widget custom on Qt", "body": "<p>You forget to set ImageWidget minimumsize. </p>\n\n<pre><code>void ImageWidget::loadImage(const QString &amp;fileName)\n    {\n    if(!fileName.isNull()){\n        m_Image.load(fileName);\n        setMinimumSize(m_Image.size());   //add this line\n        this-&gt;update();\n        qDebug()&lt;&lt;\"Load Image\"&lt;&lt;endl;\n    }\n}\n</code></pre>\n\n<p>ScrollArea shows scrollbars when its size is smaller than content's widget (ImageWidget in this case). You just load image and paint it on widget but not change widget's size. </p>\n\n<p>:) My first answer on stackoverflow.</p>\n"}], "owner": {"reputation": 396, "user_id": 2589792, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/gjLUf.jpg?s=128&g=1", "display_name": "mr_sudo", "link": "https://stackoverflow.com/users/2589792/mr-sudo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 727, "favorite_count": 0, "accepted_answer_id": 41275094, "answer_count": 1, "score": 0, "last_activity_date": 1482375143, "creation_date": 1482332759, "question_id": 41265878, "link": "https://stackoverflow.com/questions/41265878/how-can-scrollable-image-widget-custom-on-qt", "title": "How can scrollable image widget custom on Qt", "body": "<p>I have problem to scrollable for my custom image Widget.</p>\n\n<p>This is my custom image Widget.</p>\n\n<p>imagewidget.h:</p>\n\n<pre><code>#ifndef IMAGEWIDGET_H\n#define IMAGEWIDGET_H\n\n#include &lt;QWidget&gt;\n#include &lt;QImage&gt;\n#include &lt;QString&gt;\n#include &lt;QPaintEvent&gt;\n#include &lt;QAbstractScrollArea&gt;\n\nclass ImageWidget: public QWidget\n{\npublic:\n    explicit ImageWidget(QWidget *parent = 0);\n    QImage m_Image;\n    void loadImage(const QString &amp;fileName);\nprotected:\n    void paintEvent(QPaintEvent *event);\n};\n\n#endif // IMAGEWIDGET_H\n</code></pre>\n\n<p>imagewidget.cpp:</p>\n\n<pre><code>#include \"imagewidget.h\"\n#include &lt;QPainter&gt;\n#include &lt;QPoint&gt;\n#include &lt;QDebug&gt;\n#include &lt;QScrollBar&gt;\n\n\nImageWidget::ImageWidget(QWidget *parent): QWidget(parent)\n{\n}\n\nvoid ImageWidget::loadImage(const QString &amp;fileName)\n{\n    if(!fileName.isNull()){\n        m_Image.load(fileName);\n        this-&gt;update();\n        qDebug()&lt;&lt;\"Load Image\"&lt;&lt;endl;\n    }\n}\n\nvoid ImageWidget::paintEvent(QPaintEvent *event)\n{\n    QPainter p(this);\n    if(!m_Image.isNull()){\n        p.drawImage(QPoint(0,0),m_Image);\n\n    }\n    qDebug()&lt;&lt;\"Paint Event\"&lt;&lt;endl;\n}\n</code></pre>\n\n<p>And this is mainwindow.cpp</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n\n#include &lt;QScrollArea&gt;\n#include &lt;QString&gt;\n#include &lt;QFileDialog&gt;\n#include &lt;QWidget&gt;\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow),\n    scrollArea(new QScrollArea())\n{\n    ui-&gt;setupUi(this);\n    m_Image = new ImageWidget(this);\n    scrollArea-&gt;setWidgetResizable(true);\n    scrollArea-&gt;setWidget(m_Image);\n    setCentralWidget(scrollArea);\n}\n\nMainWindow::~MainWindow()\n{\n    delete ui;\n}\n\nvoid MainWindow::on_actionOpen_triggered()\n{\n   QString fileName = QFileDialog::getOpenFileName(this, tr(\"Open Image\"), \"/\", tr(\"Image Files (*.png *.jpg *.bmp *.tif *.tiff)\"));\n\n   m_Image-&gt;loadImage(fileName);\n   m_Image-&gt;adjustSize();\n   this-&gt;update();\n\n}\n</code></pre>\n\n<p>With a large image, the image cannot diplay with scroll bar. \nMy result is below. Thank you for reading.\n<a href=\"https://i.stack.imgur.com/kQT9Z.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kQT9Z.jpg\" alt=\"image viewer\"></a></p>\n"}, {"tags": ["python", "c++", "visual-studio"], "owner": {"reputation": 23, "user_id": 6672831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/811a76f62162d89115841c3f214bc57c?s=128&d=identicon&r=PG&f=1", "display_name": "Gapiro", "link": "https://stackoverflow.com/users/6672831/gapiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1482332619, "creation_date": 1482332619, "question_id": 41265835, "link": "https://stackoverflow.com/questions/41265835/why-do-i-need-to-strip-when-debugging-using-python-via-visual-studio", "title": "Why do I need to .strip when debugging using python via Visual Studio", "body": "<p>I have a driver for some hardware I'm testing (i'm a test engineer) - this is written in C++ and I have it set up in Visual Studio. The output is a dll but that's largely irrelevant.</p>\n\n<p>I write all my API tests in Python (just because I like python) using ctypes , and so I decide to knock up a quick test for a new function - in this case its a frequency generator. Because I'm currently more interested in the hardware and driver (white-box testing) I just want a single line as follows:</p>\n\n<pre><code>while action != 'exit':\n    action = raw_input(\"Enter a frequency  or 'exit':\")\n    //do stuff\n</code></pre>\n\n<p>However, whilst this worked fine in pycharm, and cmd prompt, when I call this python script through visualstudio as the debugger, it always fails. \nA colleague told me to chomp (or pythonwise, strip) the input, and this works, but I'm keen to know why.</p>\n\n<p>ie the working code :</p>\n\n<pre><code>while action != 'exit':\n    action = (raw_input(\"Enter 'Frequency' or 'exit':\")).strip()\n    // do stuff\n</code></pre>\n"}, {"tags": ["c++", "data-structures", "struct"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1482333180, "post_id": 41265830, "comment_id": 69732754, "body": "encapsulation might be more maintainable in the long run."}, {"owner": {"reputation": 321, "user_id": 4578652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df74ce1c62d948bfab0c7e912a1aba?s=128&d=identicon&r=PG&f=1", "display_name": "manu", "link": "https://stackoverflow.com/users/4578652/manu"}, "edited": false, "score": 0, "creation_date": 1482333443, "post_id": 41265830, "comment_id": 69732913, "body": "You can try to apply attribute__((__packed)) attribute on your structure and check the size."}, {"owner": {"reputation": 440, "user_id": 2748602, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/05f39f57bb773af68e0b44c44dab98d2?s=128&d=identicon&r=PG", "display_name": "schr&#246;dinbug", "link": "https://stackoverflow.com/users/2748602/schr%c3%b6dinbug"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1482334141, "post_id": 41265830, "comment_id": 69733415, "body": "@RichardHodges how do you mean? Do you mean instead of inheriting <code>mavlink_heartbeat_t</code> making it a private member of the new struct and then providing accessors to each of the members of <code>mavlink_heartbeat_t</code>?"}, {"owner": {"reputation": 440, "user_id": 2748602, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/05f39f57bb773af68e0b44c44dab98d2?s=128&d=identicon&r=PG", "display_name": "schr&#246;dinbug", "link": "https://stackoverflow.com/users/2748602/schr%c3%b6dinbug"}, "reply_to_user": {"reputation": 321, "user_id": 4578652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df74ce1c62d948bfab0c7e912a1aba?s=128&d=identicon&r=PG&f=1", "display_name": "manu", "link": "https://stackoverflow.com/users/4578652/manu"}, "edited": false, "score": 0, "creation_date": 1482334229, "post_id": 41265830, "comment_id": 69733479, "body": "@manu - if I do that, the size does shrink to 17 bytes but I&#39;m not really concerned about that since this point the data is received and won&#39;t be transmitted over a serial line again."}], "answers": [{"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 0, "last_activity_date": 1482335734, "creation_date": 1482335734, "answer_id": 41266922, "question_id": 41265830, "link": "https://stackoverflow.com/questions/41265830/inheriting-a-packed-c-struct/41266922#41266922", "title": "Inheriting a packed C struct", "body": "<p>Inheritance is a <em>is a kind of</em> relationship.</p>\n\n<p>Is the local representation of a heartbeat really <em>a kind of</em> wire message? I doubt it. </p>\n\n<p>But it might reasonably <em>contain</em> one.</p>\n\n<p>I would encapsulate it something like this:</p>\n\n<pre><code>#include &lt;cstdint&gt;\n#include &lt;cstddef&gt;\n\n\ntypedef struct __attribute__((packed))  __mavlink_heartbeat_t {\n uint32_t custom_mode; \n uint8_t type; \n uint8_t autopilot; \n uint8_t base_mode; \n uint8_t system_status;\n uint8_t mavlink_version; \n} mavlink_heartbeat_t;\n\n\nextern std::uint64_t now();\nvoid sync_fetch_data(mavlink_heartbeat_t&amp;);\nvoid foo(uint8_t);\n\nstruct local_heartbeat\n{\n\n  mavlink_heartbeat_t const&amp; get_io_buffer() const {\n    return io_buffer_;\n  }\n\n  mavlink_heartbeat_t&amp; prepare_receive() {\n    request_timestamp_ = now();\n    return io_buffer_;\n  }\n\n  void complete_receive() {\n    response_timestamp_ = now();\n  }\n\n\n  std::uint64_t get_response_timestamp() const {\n    return response_timestamp_;\n  }\n\nprivate:\n  // stuff in here might have suspect alignment\n  mavlink_heartbeat_t io_buffer_;\n\n  // but these will be aligned for optimal performance\n  std::uint64_t request_timestamp_;\n  std::uint64_t response_timestamp_;\n};\n\n\n\nint main()\n{\n\n  // create my local representation\n  local_heartbeat hb;\n\n  // prepare it to receive data\n  auto&amp; buffer = hb.prepare_receive();\n\n  // somehow populate the buffer\n  sync_fetch_data(buffer);  // could be async, etc\n\n  // notify the object that reception is complete\n  hb.complete_receive();\n\n  // now use the local representation\n  foo(hb.get_io_buffer().system_status);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 440, "user_id": 2748602, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/05f39f57bb773af68e0b44c44dab98d2?s=128&d=identicon&r=PG", "display_name": "schr&#246;dinbug", "link": "https://stackoverflow.com/users/2748602/schr%c3%b6dinbug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1482335734, "creation_date": 1482332609, "question_id": 41265830, "link": "https://stackoverflow.com/questions/41265830/inheriting-a-packed-c-struct", "title": "Inheriting a packed C struct", "body": "<p>I am using a third party library (mavlink) that defines a number of structs that are all tagged with <code>__attribute__((packed))</code> so they can be efficiently be transmitted across a serial connection (it is written in C and I am using it in a C++ application).  When I receive and reconstruct them I would like to add a time stamp field to them.  I think the simplest way is to create a new struct that inherits the existing struct.  i.e. in the mavlink library this struct is defined:</p>\n\n<pre><code>MAVPACKED(\ntypedef struct __mavlink_heartbeat_t {\n uint32_t custom_mode; \n uint8_t type; \n uint8_t autopilot; \n uint8_t base_mode; \n uint8_t system_status;\n uint8_t mavlink_version; \n}) mavlink_heartbeat_t;\n</code></pre>\n\n<p>where <code>MAVPACKED</code> is a macro that applies <code>__attribute__((packed))</code>. <code>sizeof(mavlink_heartbeat_t)</code> returns 9.  If I define</p>\n\n<pre><code>    struct new_heartbeat_t : mavlink_heartbeat_t\n    {\n        uint64_t timestamp;\n    };\n</code></pre>\n\n<p><code>sizeof(new_heartbeat_t)</code> returns 24, so it looks like 7 padding bytes are added (I would assume to end of mavlink_heartbeat_t so that timestamp start at byte 16.)</p>\n\n<p>Are there any gotchas or things to be aware of when doing this or is there a better way?</p>\n"}, {"tags": ["c++", "c-preprocessor"], "comments": [{"owner": {"reputation": 709, "user_id": 6605494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c140e8dc532f574e899392ad4ffa4e7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas_toth", "link": "https://stackoverflow.com/users/6605494/jonas-toth"}, "edited": false, "score": 0, "creation_date": 1482332521, "post_id": 41265750, "comment_id": 69732282, "body": "AFAIK no. but c++17 will introduce constexpr if, meaning an if statement that is purely evaluated at compile time. maybe thats an option"}, {"owner": {"reputation": 6761, "user_id": 802362, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e1ed0c2043db6eb30095426cd8f96692?s=128&d=identicon&r=PG", "display_name": "Baptiste Wicht", "link": "https://stackoverflow.com/users/802362/baptiste-wicht"}, "reply_to_user": {"reputation": 709, "user_id": 6605494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c140e8dc532f574e899392ad4ffa4e7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas_toth", "link": "https://stackoverflow.com/users/6605494/jonas-toth"}, "edited": false, "score": 0, "creation_date": 1482332595, "post_id": 41265750, "comment_id": 69732329, "body": "Unfortunately, that won&#39;t help in that case since I won&#39;t be able to do <code>if constexpr (MACRO)</code> if the macro is not defined :("}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1482332844, "post_id": 41265750, "comment_id": 69732510, "body": "Why not just put the dependent code in the if and else blocks?"}, {"owner": {"reputation": 709, "user_id": 6605494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c140e8dc532f574e899392ad4ffa4e7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas_toth", "link": "https://stackoverflow.com/users/6605494/jonas-toth"}, "edited": false, "score": 0, "creation_date": 1482332903, "post_id": 41265750, "comment_id": 69732549, "body": "is the macro a compilation flag? i think then there is no way around :/ what will you configure? maybe template magic could help as well?"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1482333107, "post_id": 41265750, "comment_id": 69732706, "body": "While ugly, the code you show (at least the second version) would do well in a private header that you never look into after the first time. The rest of your program can look quite shiny after that."}, {"owner": {"reputation": 6761, "user_id": 802362, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e1ed0c2043db6eb30095426cd8f96692?s=128&d=identicon&r=PG", "display_name": "Baptiste Wicht", "link": "https://stackoverflow.com/users/802362/baptiste-wicht"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1482333670, "post_id": 41265750, "comment_id": 69733059, "body": "There are several pieces of code dependent on the these variables and I do not wish to put the ifdef all over my code. Yes, the macros are compilation flags in my case. I agree @MadPhysicist that it&#39;s not too bad in the second version and can be hidden, but <code>x = is_defined(CONFIG_X)</code> would be much better :)"}], "answers": [{"tags": [], "owner": {"reputation": 1826, "user_id": 2301053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l0ISw.jpg?s=128&g=1", "display_name": "Charles Ofria", "link": "https://stackoverflow.com/users/2301053/charles-ofria"}, "is_accepted": false, "score": 3, "last_activity_date": 1524782694, "last_edit_date": 1524782694, "creation_date": 1482340468, "answer_id": 41268349, "question_id": 41265750, "link": "https://stackoverflow.com/questions/41265750/how-to-get-a-boolean-indicating-if-a-macro-is-defined-or-not/41268349#41268349", "title": "How to get a boolean indicating if a macro is defined or not?", "body": "<p>This IS possible, but only in the limited case where you are looking for empty defines (as is often the case with compilation flags) or where you know the range of ways a flag will be defined, such as with a 0 or 1.</p>\n\n<p>Here is working code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n// Define two genetic macros\n#define SECOND_ARG(A,B,...) B\n#define CONCAT2(A,B) A ## B\n\n// If a macro is detected, add an arg, so the second one will be 1.\n#define DETECT_EXIST_TRUE ~,1\n\n// DETECT_EXIST merely concats a converted macro to the end of DETECT_EXIST_TRUE.\n// If empty, DETECT_EXIST_TRUE converts fine.  If not 0 remains second argument.\n#define DETECT_EXIST(X) DETECT_EXIST_IMPL(CONCAT2(DETECT_EXIST_TRUE,X), 0, ~)\n#define DETECT_EXIST_IMPL(...) SECOND_ARG(__VA_ARGS__)\n\n// We will create MY_DEFINE, but not MY_DEFINE2\n#define MY_DEFINE\n\nint main()\n{\n  // We can now use DETECT_EXIST to detect defines.\n  std::cout &lt;&lt; \"MY_DEFINE = \" &lt;&lt; DETECT_EXIST(MY_DEFINE) &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"MY_DEFINE2 = \" &lt;&lt; DETECT_EXIST(MY_DEFINE2) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>This code will produce the output:</p>\n\n<pre><code>MY_DEFINE = 1\nMY_DEFINE2 = 0\n</code></pre>\n\n<p>Since the first one does exist and the second doesn't.</p>\n\n<p>If the macro is set to a value such as 1, you just need to have an alternate version of DETECT_EXIST_TRUE to handle it, with the macro value pasted on the end.  For example:</p>\n\n<pre><code>#define DETECT_EXIST_TRUE1 ~,1\n</code></pre>\n\n<p>Then if you have:</p>\n\n<pre><code>#define MY_DEFINE1 1\n</code></pre>\n\n<p>Code like this will also work correctly in main:</p>\n\n<pre><code>std::cout &lt;&lt; \"MY_DEFINE1 = \" &lt;&lt; DETECT_EXIST(MY_DEFINE1) &lt;&lt; std::endl;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6761, "user_id": 802362, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e1ed0c2043db6eb30095426cd8f96692?s=128&d=identicon&r=PG", "display_name": "Baptiste Wicht", "link": "https://stackoverflow.com/users/802362/baptiste-wicht"}, "edited": false, "score": 1, "creation_date": 1482908064, "post_id": 41308265, "comment_id": 69915329, "body": "I don&#39;t want to break if the config is not defined, this is something I need to support."}], "tags": [], "owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "is_accepted": false, "score": 0, "last_activity_date": 1482530198, "creation_date": 1482530198, "answer_id": 41308265, "question_id": 41265750, "link": "https://stackoverflow.com/questions/41265750/how-to-get-a-boolean-indicating-if-a-macro-is-defined-or-not/41308265#41308265", "title": "How to get a boolean indicating if a macro is defined or not?", "body": "<pre><code>  #ifndef CONFIG_X\n  #error \"Written for config x\"\n  #endif\n\n\n    // True for config x, hack this about for other configurations\n   static bool x = 1;\n</code></pre>\n\n<p>Now it breaks if config is not x. Generally that's better than trying to second-guess what an unnamed configuration which is not X will require.</p>\n"}], "owner": {"reputation": 6761, "user_id": 802362, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e1ed0c2043db6eb30095426cd8f96692?s=128&d=identicon&r=PG", "display_name": "Baptiste Wicht", "link": "https://stackoverflow.com/users/802362/baptiste-wicht"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1952, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1524782694, "creation_date": 1482332402, "last_edit_date": 1483456610, "question_id": 41265750, "link": "https://stackoverflow.com/questions/41265750/how-to-get-a-boolean-indicating-if-a-macro-is-defined-or-not", "title": "How to get a boolean indicating if a macro is defined or not?", "body": "<p>My code is configurable with define macros. To get the value in the code, I'm doing this: </p>\n\n<pre><code>#ifdef CONFIG_X\nstatic constexpr bool x = true;\n#else\nstatic constexpr bool x = false;\n#endif\n</code></pre>\n\n<p>But this is quickly becoming very ugly in the code with several configuration variables...</p>\n\n<p>Another solution I found is simply to cut the code in two: </p>\n\n<pre><code>#ifdef CONFIG_X\n#define CONFIG_X_BOOL true\n#else\n#define CONFIG_X_BOOL false\n#endif\n\nstatic constexpr bool x = CONFIG_X_BOOL;\n</code></pre>\n\n<p>This is a bit better, but not really nice either.</p>\n\n<p>Is there a nice way to have a boolean or a 1 or 0 if a macro is defined ?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 315, "user_id": 6309247, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-ivdVBvfPrZg/AAAAAAAAAAI/AAAAAAAAAsQ/rmYiwvBzbh4/photo.jpg?sz=128", "display_name": "SWIIWII", "link": "https://stackoverflow.com/users/6309247/swiiwii"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1482332305, "post_id": 41265684, "comment_id": 69732130, "body": "@Someprogrammerdude I did that, same errors"}, {"owner": {"reputation": 315, "user_id": 6309247, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-ivdVBvfPrZg/AAAAAAAAAAI/AAAAAAAAAsQ/rmYiwvBzbh4/photo.jpg?sz=128", "display_name": "SWIIWII", "link": "https://stackoverflow.com/users/6309247/swiiwii"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1482332357, "post_id": 41265684, "comment_id": 69732171, "body": "@Someprogrammerdude  gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.4)"}, {"owner": {"reputation": 709, "user_id": 6605494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c140e8dc532f574e899392ad4ffa4e7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas_toth", "link": "https://stackoverflow.com/users/6605494/jonas-toth"}, "edited": false, "score": 2, "creation_date": 1482332616, "post_id": 41265684, "comment_id": 69732345, "body": "shouldnt it be &#39;template&lt;class T&gt; using Iterator = typename T::iterator&#39;"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 709, "user_id": 6605494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c140e8dc532f574e899392ad4ffa4e7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas_toth", "link": "https://stackoverflow.com/users/6605494/jonas-toth"}, "edited": false, "score": 0, "creation_date": 1482332681, "post_id": 41265684, "comment_id": 69732390, "body": "Have you copied the code from the book correctly? Because like @jonas_toth says you should not have the template argument for the type-alias."}, {"owner": {"reputation": 709, "user_id": 6605494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c140e8dc532f574e899392ad4ffa4e7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas_toth", "link": "https://stackoverflow.com/users/6605494/jonas-toth"}, "edited": false, "score": 0, "creation_date": 1482332732, "post_id": 41265684, "comment_id": 69732425, "body": "i quicktested it, compiles with same compiler. that &lt;T&gt; was too much"}, {"owner": {"reputation": 315, "user_id": 6309247, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-ivdVBvfPrZg/AAAAAAAAAAI/AAAAAAAAAsQ/rmYiwvBzbh4/photo.jpg?sz=128", "display_name": "SWIIWII", "link": "https://stackoverflow.com/users/6309247/swiiwii"}, "reply_to_user": {"reputation": 709, "user_id": 6605494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c140e8dc532f574e899392ad4ffa4e7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas_toth", "link": "https://stackoverflow.com/users/6605494/jonas-toth"}, "edited": false, "score": 0, "creation_date": 1482332759, "post_id": 41265684, "comment_id": 69732440, "body": "@jonas_toth exactly! I don&#39;t know why but this works."}, {"owner": {"reputation": 315, "user_id": 6309247, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-ivdVBvfPrZg/AAAAAAAAAAI/AAAAAAAAAsQ/rmYiwvBzbh4/photo.jpg?sz=128", "display_name": "SWIIWII", "link": "https://stackoverflow.com/users/6309247/swiiwii"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1482332807, "post_id": 41265684, "comment_id": 69732481, "body": "@Someprogrammerdude what i did is ctrl-c &amp; ctrl-v, I am sure that it is the copy of the example in the book."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1482333492, "post_id": 41265684, "comment_id": 69732948, "body": "Stroustrup has written several books about C++, but you don&#39;t say which one. You can find the errata sheets for yours using the search engine of your choice. If this one isn&#39;t there, here&#39;s what Stroustrup says: &quot;The reader is supposed to be sufficiently experimeenced not to get confused by simple typos.&quot; (No, the code as printed is usually never tested. That costs money.)"}, {"owner": {"reputation": 315, "user_id": 6309247, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-ivdVBvfPrZg/AAAAAAAAAAI/AAAAAAAAAsQ/rmYiwvBzbh4/photo.jpg?sz=128", "display_name": "SWIIWII", "link": "https://stackoverflow.com/users/6309247/swiiwii"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1482333753, "post_id": 41265684, "comment_id": 69733129, "body": "@molbdnilo My bad, I should have done that, now I did it."}], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 6309247, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-ivdVBvfPrZg/AAAAAAAAAAI/AAAAAAAAAsQ/rmYiwvBzbh4/photo.jpg?sz=128", "display_name": "SWIIWII", "link": "https://stackoverflow.com/users/6309247/swiiwii"}, "edited": false, "score": 0, "creation_date": 1482332878, "post_id": 41265888, "comment_id": 69732528, "body": "But could you explain that? Why is it behaving like this?"}, {"owner": {"reputation": 709, "user_id": 6605494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c140e8dc532f574e899392ad4ffa4e7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas_toth", "link": "https://stackoverflow.com/users/6605494/jonas-toth"}, "reply_to_user": {"reputation": 315, "user_id": 6309247, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-ivdVBvfPrZg/AAAAAAAAAAI/AAAAAAAAAsQ/rmYiwvBzbh4/photo.jpg?sz=128", "display_name": "SWIIWII", "link": "https://stackoverflow.com/users/6309247/swiiwii"}, "edited": false, "score": 0, "creation_date": 1482333019, "post_id": 41265888, "comment_id": 69732656, "body": "this is rather syntactic. using Iterator&lt;T&gt; would be a template specialization (i guess), but that is now wanted. What is wanted is a template Iterator. but iam not confident with the c++ language requirements behind it. i will update it in the answer with my naive understanding"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1482333202, "post_id": 41265888, "comment_id": 69732767, "body": "It was a typo in the example code.  It happens.  Possibly the example was written when <code>using</code> template alias syntax was different, or didn&#39;t exist!"}, {"owner": {"reputation": 709, "user_id": 6605494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c140e8dc532f574e899392ad4ffa4e7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas_toth", "link": "https://stackoverflow.com/users/6605494/jonas-toth"}, "edited": false, "score": 0, "creation_date": 1482333367, "post_id": 41265888, "comment_id": 69732877, "body": "updated the post, maybe its a little be clearer now why it is problematic (and has a bad error message :D)"}], "tags": [], "owner": {"reputation": 709, "user_id": 6605494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c140e8dc532f574e899392ad4ffa4e7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas_toth", "link": "https://stackoverflow.com/users/6605494/jonas-toth"}, "is_accepted": true, "score": 6, "last_activity_date": 1482333273, "last_edit_date": 1482333273, "creation_date": 1482332787, "answer_id": 41265888, "question_id": 41265684, "link": "https://stackoverflow.com/questions/41265684/what-is-the-wrong-with-this-example-in-the-c-book-of-bjarne-stroustrup/41265888#41265888", "title": "what is the wrong with this example in the c++ book of Bjarne Stroustrup", "body": "<p>Change the beginning from</p>\n\n<pre><code>template&lt;typename T&gt;\nusing Iterator&lt;T&gt; = typename T::iterator;\n</code></pre>\n\n<p>to </p>\n\n<pre><code>template&lt;typename T&gt;\nusing Iterator = typename T::iterator;\n</code></pre>\n\n<p>Works on my ubuntu 16.04 with probably same compiler setup</p>\n\n<p>Why is it that way? I am not 100percent confident about that, someone else might verify it please.</p>\n\n<p>Writing </p>\n\n<pre><code>using Iterator&lt;T&gt;\n</code></pre>\n\n<p>is invalid, because it doesnt make sense here. We want Iterator to be a templated typedef that will ask its parameter-type for its generic iterator type. \n<code>Iterator&lt;T&gt;</code> would specialize the template.\nE.g. we know it better for a specific type:</p>\n\n<pre><code>template&lt;&gt;\nusing Iterator&lt;MyClass&gt; = MyClassIterator;\n</code></pre>\n\n<p>At least that works with normal template classes, i think its the same with using as well.</p>\n"}, {"tags": [], "owner": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "is_accepted": false, "score": 0, "last_activity_date": 1482333184, "creation_date": 1482333184, "answer_id": 41266022, "question_id": 41265684, "link": "https://stackoverflow.com/questions/41265684/what-is-the-wrong-with-this-example-in-the-c-book-of-bjarne-stroustrup/41266022#41266022", "title": "what is the wrong with this example in the c++ book of Bjarne Stroustrup", "body": "<p>Change this</p>\n\n<pre><code> template&lt;typename T&gt;\n using Iterator&lt;T&gt; = typename T::iterator;\n</code></pre>\n\n<p>to this</p>\n\n<pre><code>template&lt;typename T&gt;\nusing Iterator = typename T::iterator;\n</code></pre>\n"}], "owner": {"reputation": 315, "user_id": 6309247, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-ivdVBvfPrZg/AAAAAAAAAAI/AAAAAAAAAsQ/rmYiwvBzbh4/photo.jpg?sz=128", "display_name": "SWIIWII", "link": "https://stackoverflow.com/users/6309247/swiiwii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 0, "accepted_answer_id": 41265888, "answer_count": 2, "score": 1, "last_activity_date": 1482333634, "creation_date": 1482332166, "last_edit_date": 1482333634, "question_id": 41265684, "link": "https://stackoverflow.com/questions/41265684/what-is-the-wrong-with-this-example-in-the-c-book-of-bjarne-stroustrup", "title": "what is the wrong with this example in the c++ book of Bjarne Stroustrup", "body": "<p>I tried the example in bjarne stroustrup's c++ programming language 4th edition:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;list&gt;\n\nusing namespace std;\n\ntemplate&lt;typename T&gt;\nusing Iterator&lt;T&gt; = typename T::iterator;\n\ntemplate&lt;typename C, typename V&gt;\nvector&lt;Iterator&lt;C&gt;&gt; find_all(C&amp; c, V v)\n{\n    vector&lt;Iterator&lt;C&gt;&gt; res;\n    for (auto p = c.begin(); p!=c.end(); ++p)\n        if (*p==v)\n            res.push_back(p);\n    return res;\n}\n\nvoid test()\n{\n    string m {\"Mary had a little lamb\"};\n    for (auto p : find_all(m,'a'))\n        if (*p!='a')\n            cerr &lt;&lt; \"string bug!\\n\";\n    // p is a str ing::iterator\n    list&lt;double&gt; ld {1.1, 2.2, 3.3, 1.1};\n    for (auto p : find_all(ld,1.1))\n        if (*p!=1.1)\n            cerr &lt;&lt; \"list bug!\\n\";\n    vector&lt;string&gt; vs { \"red\", \"blue\", \"green\", \"green\", \"orange\", \"green\" };\n    for (auto p : find_all(vs,\"green\"))\n        if (*p!=\"green\")\n            cerr &lt;&lt; \"vector bug!\\n\";\n    for (auto p : find_all(vs,\"green\"))\n        *p = \"ver t\";\n}\n\nint main()\n{\n    test();\n    return 0;\n}\n</code></pre>\n\n<p>\u00a74.5.1</p>\n\n<p>I compile the code with:\ng++ test.cpp -o test -g -std=c++11 on ubuntu, but I got the errors below:</p>\n\n<pre><code>iterator_of_iterator_version_2.cpp:9:15: error: expected \u2018=\u2019 before \u2018&lt;\u2019 token\n using Iterator&lt;T&gt; = typename T::iterator;\n               ^\niterator_of_iterator_version_2.cpp:9:15: error: expected type-specifier before \u2018&lt;\u2019 token\niterator_of_iterator_version_2.cpp:12:8: error: \u2018Iterator\u2019 was not declared in this scope\n vector&lt;Iterator&lt;C&gt;&gt; find_all(C&amp; c, V v)\n        ^\niterator_of_iterator_version_2.cpp:12:17: error: template argument 1 is invalid\n vector&lt;Iterator&lt;C&gt;&gt; find_all(C&amp; c, V v)\n                 ^\niterator_of_iterator_version_2.cpp:12:17: error: template argument 2 is invalid\niterator_of_iterator_version_2.cpp:12:18: error: expected unqualified-id before \u2018&gt;\u2019 token\n vector&lt;Iterator&lt;C&gt;&gt; find_all(C&amp; c, V v)\n                  ^\niterator_of_iterator_version_2.cpp: In function \u2018void test()\u2019:\niterator_of_iterator_version_2.cpp:24:30: error: \u2018find_all\u2019 was not declared in this scope\n  for (auto p : find_all(m,'a'))\n                              ^\niterator_of_iterator_version_2.cpp:29:31: error: \u2018find_all\u2019 was not declared in this scope\n  for (auto p : find_all(ld,1.1))\n                               ^\niterator_of_iterator_version_2.cpp:33:35: error: \u2018find_all\u2019 was not declared in this scope\n  for (auto p : find_all(vs,\"green\"))\n                                   ^\niterator_of_iterator_version_2.cpp:36:35: error: \u2018find_all\u2019 was not declared in this scope\n  for (auto p : find_all(vs,\"green\"))\n                                   ^\n</code></pre>\n\n<p>So what is the problem?</p>\n\n<p>It seems that no syntax error can be found in this code because I just did a copy-paste of the example of the book.</p>\n"}, {"tags": ["c++", "c++11", "reference", "move-semantics"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 3, "creation_date": 1482332112, "post_id": 41265594, "comment_id": 69731997, "body": "Your test case shouldn&#39;t compile. an lvalue <code>str</code> can&#39;t bind to <code>&amp;&amp;</code>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482332213, "post_id": 41265594, "comment_id": 69732063, "body": "One question per question please."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1482333947, "post_id": 41265594, "comment_id": 69733278, "body": "<code>str</code> is <code>const</code>, so it cannot be modified. See <a href=\"http://stackoverflow.com/questions/18646874/force-a-compile-time-error-if-stdmove-will-result-in-an-unintended-copy?rq=1\" title=\"force a compile time error if stdmove will result in an unintended copy\">stackoverflow.com/questions/18646874/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1396, "user_id": 4625005, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/jm809.gif?s=128&g=1", "display_name": "Green Tree", "link": "https://stackoverflow.com/users/4625005/green-tree"}, "is_accepted": false, "score": 2, "last_activity_date": 1482355415, "last_edit_date": 1482355415, "creation_date": 1482352216, "answer_id": 41271411, "question_id": 41265594, "link": "https://stackoverflow.com/questions/41265594/stdmove-return-and-input-reference-argument/41271411#41271411", "title": "std::move return and input reference argument", "body": "<ol>\n<li>they are different. in A case, function accepts <em>only rvalues</em> of type const string, it doesn't accept lvalues, since you <em>can not</em> bind lvalue to rvalue reference. the function from B case accepts both rvalues and lvalues, since you <em>can</em> bind rvalue to const lvalue reference. inside their bodies they are equivalent, unless you are doing decltype (parameter).</li>\n<li>again, there is std::string( const std::string &amp; ) copy constructor, that can accept rvalue string object (std::move( s ) returns const std::string &amp;&amp; and copying occurs).</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 2, "last_activity_date": 1482352741, "creation_date": 1482352741, "answer_id": 41271515, "question_id": 41265594, "link": "https://stackoverflow.com/questions/41265594/stdmove-return-and-input-reference-argument/41271515#41271515", "title": "std::move return and input reference argument", "body": "<p><code>std::move</code> takes a (non-const) rvalue reference as an argument.  So you can't bind it directly to a <code>const</code> anything, whether rvalue or not.  So in both (A) and (B), when you call <code>std::move</code>, it makes an unnamed temporary copy and moves that.</p>\n\n<p>As a result, <code>str</code> is never moved from, and is never affected by any of this.</p>\n\n<p>To get rid of the <code>const</code> without making a copy, you need an explicit <code>const_cast</code>.  If you did that, you'd get the obvious undefined behavior.</p>\n"}, {"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1482356093, "post_id": 41271537, "comment_id": 69745940, "body": "I don&#39;t see anything about <code>A</code> that would cause it to not compile.  <code>const std::string&amp;&amp;</code> is valid. Weird and useless, but valid."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1482358574, "post_id": 41271537, "comment_id": 69747096, "body": "@MooingDuck An rvalue reference cannot bind to an lvalue. <a href=\"https://godbolt.org/g/8JMtKo\" rel=\"nofollow noreferrer\">Link to MCVE</a>"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1482358997, "post_id": 41271537, "comment_id": 69747256, "body": "Ah, I see the misunderstanding.  <code>A</code> compiles fine.  It&#39;s the <i>caller</i> that fails to compile. The caller would have to cast the parameter in order to a <code>const T&amp;&amp;</code> to call <code>A</code>."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": -1, "last_activity_date": 1482359039, "last_edit_date": 1482359039, "creation_date": 1482352851, "answer_id": 41271537, "question_id": 41265594, "link": "https://stackoverflow.com/questions/41265594/stdmove-return-and-input-reference-argument/41271537#41271537", "title": "std::move return and input reference argument", "body": "<p>With the given test code, the cases are different because <code>A</code> fails to compile and <code>B</code> does compile.</p>\n\n<p>In case <code>A</code> an rvalue reference cannot bind to an lvalue.</p>\n\n<p>In case <code>B</code> the function returns a copy of the string. Using <code>std::move</code> with a const reference still yields a const reference.</p>\n"}], "owner": {"reputation": 2069, "user_id": 104897, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/I78Xs.jpg?s=128&g=1", "display_name": "rnd_nr_gen", "link": "https://stackoverflow.com/users/104897/rnd-nr-gen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 453, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1482359039, "creation_date": 1482331904, "last_edit_date": 1482332155, "question_id": 41265594, "link": "https://stackoverflow.com/questions/41265594/stdmove-return-and-input-reference-argument", "title": "std::move return and input reference argument", "body": "<p>(A)</p>\n\n<pre><code>std::string doNothing(const std::string&amp;&amp; s)\n{\n  return std::move(s);\n}\n</code></pre>\n\n<p>(B)</p>\n\n<pre><code>std::string doNothing(const std::string&amp; s)\n{\n  return std::move(s);\n}\n</code></pre>\n\n<p>(Test)</p>\n\n<pre><code>const std::string str = \"aaaaaa\";\nconst auto str2 = doNothing(str);\n</code></pre>\n\n<p>two questions:</p>\n\n<ol>\n<li>are (A) and (B) differetnt?</li>\n<li>in (Test): will str be undefined? after it is moved to str2?</li>\n</ol>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "edited": false, "score": 0, "creation_date": 1482330917, "post_id": 41265211, "comment_id": 69731201, "body": "Conceptually, are you trying to rotate the individual object in space, or are you trying to spin your camera around a scene with multiple objects?"}, {"owner": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "edited": false, "score": 0, "creation_date": 1482331134, "post_id": 41265211, "comment_id": 69731354, "body": "Also, btw, note that gl matrix ops are post multiplied, meaning that your translates rotates scales &quot;happen&quot; in the reverse order thay you call those functions. So you&#39;re doing translate -x, rotate, translate +x, then scale, in that order. Is that your intent?"}, {"owner": {"reputation": 121, "user_id": 4820394, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/972493956103073/picture?type=large", "display_name": "Pedro Gon&#231;alves", "link": "https://stackoverflow.com/users/4820394/pedro-gon%c3%a7alves"}, "reply_to_user": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "edited": false, "score": 0, "creation_date": 1482331522, "post_id": 41265211, "comment_id": 69731615, "body": "@JasonC I&#39;m trying to move my individual object in space, the camera is static.  Regarding the second comment, I don&#39;t know. If he&#39;s facing the positive X axis, I want him to move that way if I press the up arrow. If I rotate him 90 degrees, I want him to move towards the Y axis. Does that make sense?"}, {"owner": {"reputation": 121, "user_id": 4820394, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/972493956103073/picture?type=large", "display_name": "Pedro Gon&#231;alves", "link": "https://stackoverflow.com/users/4820394/pedro-gon%c3%a7alves"}, "reply_to_user": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "edited": false, "score": 0, "creation_date": 1482331686, "post_id": 41265211, "comment_id": 69731715, "body": "@JasonC But yeah, I think I makes sense. I&#39;m translating -x so that the object is on the origin, then I&#39;m rotating it around itself, then translating it back to where it was. It&#39;s not correct?"}, {"owner": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "edited": false, "score": 1, "creation_date": 1482332879, "post_id": 41265211, "comment_id": 69732529, "body": "I see. So you want your object to always move in the direction it is facing when you press up. So what you&#39;re going to actually have to do here is apply everything incrementally, you can&#39;t just easily encapsulate it in a single rotate and translate because your object can follow an arbitrary, complex path. Unfortunately I&#39;m on my phone amd cant explain better. I&#39;m also on my way out the door. But if you dont get help by later today, I got you. Btw are you working in 2d, or 3d?"}, {"owner": {"reputation": 121, "user_id": 4820394, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/972493956103073/picture?type=large", "display_name": "Pedro Gon&#231;alves", "link": "https://stackoverflow.com/users/4820394/pedro-gon%c3%a7alves"}, "reply_to_user": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "edited": false, "score": 0, "creation_date": 1482332994, "post_id": 41265211, "comment_id": 69732633, "body": "@JasonC Thanks a lot man, I on my way too, I&#39;ll be waiting for you."}, {"owner": {"reputation": 121, "user_id": 4820394, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/972493956103073/picture?type=large", "display_name": "Pedro Gon&#231;alves", "link": "https://stackoverflow.com/users/4820394/pedro-gon%c3%a7alves"}, "reply_to_user": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "edited": false, "score": 1, "creation_date": 1482333439, "post_id": 41265211, "comment_id": 69732910, "body": "@JasonC hey man, what you lastly said helped me a bunch understanding what to do next, I got it by using simple trigonometry and It works perfectly. Thanks a lot, you really did help a lot!"}, {"owner": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 2, "creation_date": 1482338584, "post_id": 41265211, "comment_id": 69736388, "body": "@PedroGon&#231;alves If you solved the problem, you should post it as an answer so future people having the same problem as you can also solve it."}, {"owner": {"reputation": 121, "user_id": 4820394, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/972493956103073/picture?type=large", "display_name": "Pedro Gon&#231;alves", "link": "https://stackoverflow.com/users/4820394/pedro-gon%c3%a7alves"}, "reply_to_user": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 0, "creation_date": 1482414282, "post_id": 41265211, "comment_id": 69770803, "body": "@tambre You&#39;re right, it&#39;s done!"}, {"owner": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 0, "creation_date": 1482419680, "post_id": 41265211, "comment_id": 69774362, "body": "@PedroGon&#231;alves If the answer helped you, then you should mark it as the correct answer by clicking the &quot;ok&quot; arrow thingy below the votes for the answer."}], "answers": [{"tags": [], "owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "is_accepted": false, "score": 1, "last_activity_date": 1482346474, "creation_date": 1482346474, "answer_id": 41269981, "question_id": 41265211, "link": "https://stackoverflow.com/questions/41265211/rotating-object-around-itself/41269981#41269981", "title": "Rotating object around itself", "body": "<p>This is a case of problem with Moving Reference Frame, those are the keywords. Unless you simulate physics of process as well, for OpenGL rendering all we have to worry about are the coordinates.  Here we have the  stationary reference frame, sometimes called a world frame (especially if observer is moving relative to it as well), and a moving reference frame (MRF )connected to object. MRF can have arbitrary rotation and translation relative to world frame, there are traditional ways how it is defined. </p>\n\n<p>For example for Earth globe MRF defined as origin in center of Earth, positive X axis intersecting equator and 0 meridian, positive Z  - north pole and Y is complementary to them. For static point on surface of earth (local geographic coordinates) it usually Y directed to zenith and positive Z - toward North in plane of horizon and positive X - toward east. In case of moving vehicle's the positive Y- or pitch axis always points to its left, and the positive Z- or yaw axis always points up, X - the roll axis  is pointed straight forward. This one seem to match your case. </p>\n\n<p>Regardless of axis specification, the rotation of vehicle is equivalent of changing matrix corresponding to it.  Lets call it transformation matrix. In local coordinates vehicle speed v = {vx,0,0} is a vector collinear to positive X axis. But in world coordinates it is equal to</p>\n\n<p>v' = M*v</p>\n\n<p>where M  is a transformation matrix of MRF. As v is change of coordinates per unit of time, then any translations should follow this formula too.  There are two ways to solve this , if you're using legacy OpenGL, you have two options:</p>\n\n<p>First: you would start with identity matrix and recreate all transforms in proper order. </p>\n\n<ol>\n<li>Set identity matrix.</li>\n<li>Translate by value required (in local cords)  </li>\n<li>Apply rotations of vehicle</li>\n<li>Translate by values of last known position of vehicle.</li>\n<li>Either calculate  new position of vehicle, knowing transforms, or read that value , by getting matrix from OpenGL (by <code>glGetFloatv(GL_MODELVIEW_MATRIX, ptr)</code>) and extracting offset from it.</li>\n</ol>\n\n<p>Downside of this method is that you have to use functions of OpenGL,where each call of glTranslate or glRotate is creating another matrix that is getting multiplied with other (in opposite order). That's excess math operations and precision of them isn't brilliant either. It can get quite interesting in Chinese manner if you have several frames of reference, especially nested.</p>\n\n<p>Second method is to do all matrix math yourself, for example using some math library like GLM (glm.h) and store matrix for each frame of reference, modifying or regenerating them when needed. You can supply matrix directly to OpenGL even in legacy mode by glLoadMatrix. If you worry about performance, you should know that all modern implementations are done that math on CPU anyway, GPUs do not work with matrix stack anymore, for long time. It can be found quickly by inspecting open-source implementations.</p>\n\n<p>In case of modern, flexible pipeline you don't have glScale, glTranslate, glRotate available at all. Entire matrix stack is deprecated in OpenGL 3. You can do it only in second way, but in this case you would supply matrices to shader program through uniforms.</p>\n"}], "owner": {"reputation": 121, "user_id": 4820394, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/972493956103073/picture?type=large", "display_name": "Pedro Gon&#231;alves", "link": "https://stackoverflow.com/users/4820394/pedro-gon%c3%a7alves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 534, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1482414518, "creation_date": 1482330754, "last_edit_date": 1482414518, "question_id": 41265211, "link": "https://stackoverflow.com/questions/41265211/rotating-object-around-itself", "title": "Rotating object around itself", "body": "<p>I have an object that I want to to move around using the following mechanic: the left and right arrows change its rotation and the up arrow increments its position.\nMy problem is that I either can't rotate the object around itself, or I can't move it in the direction being looked at.</p>\n\n<p>The draw function is as follows:</p>\n\n<pre><code>glMatrixMode(GL_MODELVIEW);\nglPushMatrix();\nglScalef(SCALE, SCALE, SCALE);\nglTranslatef(x, 0, 0);\nglRotatef(rotationZ, 0, 0, 1);\nglTranslatef(-x, 0, 0);\n\n// Draw the object...\n\nglPopMatrix();\n</code></pre>\n\n<p>Key press detection code:</p>\n\n<pre><code> case GLUT_KEY_UP:\n        teclas.up = GL_TRUE;\n        glutPostRedisplay();\n        break;\ncase GLUT_KEY_LEFT:\n        teclas.left = GL_TRUE;\n        glutPostRedisplay();\n        break;\ncase GLUT_KEY_RIGHT:\n        teclas.right = GL_TRUE;\n        glutPostRedisplay();\n        break;\n</code></pre>\n\n<p>Timer function:</p>\n\n<pre><code>if (teclas.up) {\n    x++;\n}\n\nif (teclas.left) {\n    rotationZ++;\n}\nif (teclas.right) {\n    rotationZ--;\n}\n\nglutPostRedisplay();\n</code></pre>\n\n<p>I've seen multiple threads about this, and I've tried changing the signal of the <code>x</code> variable but nothing seems to work.</p>\n\n<p>Edit(solved):</p>\n\n<p>I just changed the part of the Timer function that is responsible for the forward movement to this:</p>\n\n<pre><code>if (estado.teclas.up) {\n\n    homer.x+= (float)cos(homer.rotationZ * M_PI / 180);\n    homer.y+= (float)sin(homer.rotationZ * M_PI / 180);\n}\n</code></pre>\n\n<p>And also, my Draw function:</p>\n\n<pre><code>glMatrixMode(GL_MODELVIEW);\nglPushMatrix();\nglScalef(SCALE, SCALE, SCALE);\nglTranslatef(x, 0, 0);\nglRotatef(rotationZ, 0, 0, 1);\n\n// Draw the object...\nglPopMatrix();\n</code></pre>\n\n<p>This way, the object always moves towards what it's facing</p>\n"}, {"tags": ["c++", "c", "encoding", "base64"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1482330033, "post_id": 41264901, "comment_id": 69730573, "body": "Be careful with <code>malloc(0)</code>. It&#39;s implementation defined if it will return a null pointer or a non-null pointer."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 3, "creation_date": 1482330063, "post_id": 41264901, "comment_id": 69730589, "body": "Can you elaborate the &quot;it doesn&#39;t work&quot;-part?"}, {"owner": {"reputation": 132, "user_id": 2968769, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/bshT1.jpg?s=128&g=1", "display_name": "Hawk", "link": "https://stackoverflow.com/users/2968769/hawk"}, "edited": false, "score": 0, "creation_date": 1482330098, "post_id": 41264901, "comment_id": 69730608, "body": "the output that is given doesn&#39;t match the expected output.."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1482330223, "post_id": 41264901, "comment_id": 69730701, "body": "I think, it is just an encoding problem... try to save the source file as utf-8 and see, if the problem vanishes"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1482330247, "post_id": 41264901, "comment_id": 69730721, "body": "Have you tried stepping through the code line by line in a debugger, while monitoring variables and their values? Also, please don&#39;t post images of text. Copy-paste the actual text as text."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1482330289, "post_id": 41264901, "comment_id": 69730750, "body": "<code>echo &quot;aOnsbG9=&quot; | recode base64..data | recode latin1..utf8</code> results in <code>h&#233;&#236;lo</code>"}, {"owner": {"reputation": 132, "user_id": 2968769, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/bshT1.jpg?s=128&g=1", "display_name": "Hawk", "link": "https://stackoverflow.com/users/2968769/hawk"}, "edited": false, "score": 0, "creation_date": 1482330313, "post_id": 41264901, "comment_id": 69730770, "body": "please explain how I can save the source file as utf-8 on vs2010 professional cause i&#39;m unsure how to do it?"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1482330496, "post_id": 41264901, "comment_id": 69730895, "body": "Hm, wait a minute, does the data come from the file <code>hello.txt</code>? Then you will have to save <i>that</i> as utf-8. I assumed, that the source is <code>*str1</code> before..."}, {"owner": {"reputation": 132, "user_id": 2968769, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/bshT1.jpg?s=128&g=1", "display_name": "Hawk", "link": "https://stackoverflow.com/users/2968769/hawk"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1482330502, "post_id": 41264901, "comment_id": 69730898, "body": "@Ctx, when i use an online base64 decoder, it results in <code>hlo</code>"}, {"owner": {"reputation": 5006, "user_id": 289099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kFqGO.jpg?s=128&g=1", "display_name": "pattivacek", "link": "https://stackoverflow.com/users/289099/pattivacek"}, "edited": false, "score": 0, "creation_date": 1482330526, "post_id": 41264901, "comment_id": 69730919, "body": "Re: VS source file encoding: <a href=\"http://stackoverflow.com/questions/840065/how-to-change-source-file-encoding-in-csharp-project-visual-studio-msbuild-ma\" title=\"how to change source file encoding in csharp project visual studio msbuild ma\">stackoverflow.com/questions/840065/&hellip;</a>"}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1482330532, "post_id": 41264901, "comment_id": 69730922, "body": "@Hawk I would recommend Notepad++ for this task. In VS2010 you should be able to call &quot;File-&gt;Save File as&quot; and there click on the little arrow on the &quot;Save&quot;-Button and select &quot;Save with Encoding&quot;"}, {"owner": {"reputation": 132, "user_id": 2968769, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/bshT1.jpg?s=128&g=1", "display_name": "Hawk", "link": "https://stackoverflow.com/users/2968769/hawk"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1482330640, "post_id": 41264901, "comment_id": 69730997, "body": "@SimonKraemer, i saved the <code>.txt</code> file using notepad++.."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1482330797, "post_id": 41264901, "comment_id": 69731106, "body": "With the correct encoding? You can change it in the &quot;Encoding&quot; menu"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1482330799, "post_id": 41264901, "comment_id": 69731108, "body": "@Hawk But did you make sure that it is saved as utf-8?"}, {"owner": {"reputation": 3590, "user_id": 2700399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f6zBy.jpg?s=128&g=1", "display_name": "Bart van Nierop", "link": "https://stackoverflow.com/users/2700399/bart-van-nierop"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1482330800, "post_id": 41264901, "comment_id": 69731109, "body": "@Ctx there seems to be an issue there, <i>h&#233;&#236;lo</i>, UTF-8 encoded, is <code>aMOpw6xsbw==</code> in base64."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 3590, "user_id": 2700399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f6zBy.jpg?s=128&g=1", "display_name": "Bart van Nierop", "link": "https://stackoverflow.com/users/2700399/bart-van-nierop"}, "edited": false, "score": 0, "creation_date": 1482330870, "post_id": 41264901, "comment_id": 69731168, "body": "@BartvanNierop Yes it is... I am not sure if I understand what you want to express?"}, {"owner": {"reputation": 132, "user_id": 2968769, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/bshT1.jpg?s=128&g=1", "display_name": "Hawk", "link": "https://stackoverflow.com/users/2968769/hawk"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1482330870, "post_id": 41264901, "comment_id": 69731169, "body": "@Ctx, saved it as <code>Unicode(utf-8 without signature) -Codepage 65001</code>, all files just saved as that..got a new output."}, {"owner": {"reputation": 132, "user_id": 2968769, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/bshT1.jpg?s=128&g=1", "display_name": "Hawk", "link": "https://stackoverflow.com/users/2968769/hawk"}, "edited": false, "score": 0, "creation_date": 1482330964, "post_id": 41264901, "comment_id": 69731231, "body": "the output still differs from expected output..and now when i decode online, i get <code>hllo</code> so only the special char missing"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1482331351, "post_id": 41264901, "comment_id": 69731498, "body": "@Hawk My suspicion is still, that the source file is not properly utf-8 encoded... the <code>&#233;</code> should be encoded as <code>c3 a9</code>, while it seems to be encoded as <code>c3 e9</code>. Please make sure, that <code>hello.txt</code> is properly encoded (for example with a hexeditor)"}, {"owner": {"reputation": 132, "user_id": 2968769, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/bshT1.jpg?s=128&g=1", "display_name": "Hawk", "link": "https://stackoverflow.com/users/2968769/hawk"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1482331450, "post_id": 41264901, "comment_id": 69731568, "body": "@Ctx, even when i try to hardcode the non-ascii string into the program, it still doesn&#39;t output the correct encoding. When i use a different encoder and the same file, it works.."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1482331518, "post_id": 41264901, "comment_id": 69731613, "body": "Can you upload the file hello.txt somewhere?"}, {"owner": {"reputation": 132, "user_id": 2968769, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/bshT1.jpg?s=128&g=1", "display_name": "Hawk", "link": "https://stackoverflow.com/users/2968769/hawk"}, "edited": false, "score": 0, "creation_date": 1482332147, "post_id": 41264901, "comment_id": 69732019, "body": "<a href=\"http://m.uploadedit.com/ba3s/1482332062143.txt\" rel=\"nofollow noreferrer\">m.uploadedit.com/ba3s/1482332062143.txt</a>  link to uploaded file"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1482332977, "post_id": 41264901, "comment_id": 69732609, "body": "<code>aMPpbGxv</code> is <i>NOT</i> UTF-8."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1482333332, "post_id": 41264901, "comment_id": 69732857, "body": "@Hawk The file seems to be valid utf-8... I honestly do not know where this breaks then, assumed, that the file you uploaded is guaranteed unmodified the file you use. One last guess: try <code>fopen(&quot;hello.txt&quot;, &quot;rbB&quot;);</code>and see if that changes something"}, {"owner": {"reputation": 132, "user_id": 2968769, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/bshT1.jpg?s=128&g=1", "display_name": "Hawk", "link": "https://stackoverflow.com/users/2968769/hawk"}, "edited": false, "score": 0, "creation_date": 1482333768, "post_id": 41264901, "comment_id": 69733137, "body": "i get Invalid FileOpen mode, some runtime error from vs.."}, {"owner": {"reputation": 132, "user_id": 2968769, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/bshT1.jpg?s=128&g=1", "display_name": "Hawk", "link": "https://stackoverflow.com/users/2968769/hawk"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1482333816, "post_id": 41264901, "comment_id": 69733177, "body": "@SamVarshavchik, that is the encoded format of the file i am encoding. It doesn&#39;t encode the special characters located within"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1482333990, "post_id": 41264901, "comment_id": 69733306, "body": "Well, whatever encoded format that is, it&#39;s not UTF-8. <code>h&#233;llo</code> in UTF-8 and base64-encoded is <code>aMOpbGxv</code>. There&#39;s no issue with the shown C++ code. You have an issue with properly encoding the file, which is outside the scope of this question. This has nothing to do with C++."}, {"owner": {"reputation": 132, "user_id": 2968769, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/bshT1.jpg?s=128&g=1", "display_name": "Hawk", "link": "https://stackoverflow.com/users/2968769/hawk"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1482334073, "post_id": 41264901, "comment_id": 69733364, "body": "@SamVarshavchik, when i use a different C library and the same file, it prints the expected output so I highly doubt the issue is in the file.."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1482334320, "post_id": 41264901, "comment_id": 69733553, "body": "Another guess: Maybe a typo in the <code>b64_table</code>? Can you show this table, too?"}], "answers": [{"comments": [{"owner": {"reputation": 132, "user_id": 2968769, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/bshT1.jpg?s=128&g=1", "display_name": "Hawk", "link": "https://stackoverflow.com/users/2968769/hawk"}, "edited": false, "score": 0, "creation_date": 1482338729, "post_id": 41266696, "comment_id": 69736481, "body": "damn..thanks a lot..finally..all this time i was stressing out..appreciate the time you took to look through it.."}], "tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": true, "score": 3, "last_activity_date": 1482335078, "creation_date": 1482335078, "answer_id": 41266696, "question_id": 41264901, "link": "https://stackoverflow.com/questions/41264901/base64-doesnt-work-when-encoding-special-characters/41266696#41266696", "title": "Base64 doesn&#39;t work when encoding special characters", "body": "<p>The problem lies in the function b64_encode:</p>\n\n<pre><code>buf[2]=( ( tmp[1]&amp;0x0f )&lt;&lt;2 )+( ( tmp[1]&amp;0xc0 )&gt;&gt;6 );\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>buf[2]=( ( tmp[1]&amp;0x0f )&lt;&lt;2 )+( ( tmp[2]&amp;0xc0 )&gt;&gt;6 );\n</code></pre>\n\n<p>Be sure to fix this at both ocurrences.</p>\n"}], "owner": {"reputation": 132, "user_id": 2968769, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/bshT1.jpg?s=128&g=1", "display_name": "Hawk", "link": "https://stackoverflow.com/users/2968769/hawk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 847, "favorite_count": 0, "accepted_answer_id": 41266696, "answer_count": 1, "score": 2, "last_activity_date": 1482335078, "creation_date": 1482329854, "last_edit_date": 1482330923, "question_id": 41264901, "link": "https://stackoverflow.com/questions/41264901/base64-doesnt-work-when-encoding-special-characters", "title": "Base64 doesn&#39;t work when encoding special characters", "body": "<p>I am working with a base64 library that I found on GitHub <a href=\"https://github.com/littlstar/b64.c\" rel=\"nofollow noreferrer\">Link to b64.c</a> and it works okay when I am encoding ascii strings but when I try to encode a binary file such as an image, it doesn't work. Below is the code snippet I am using to read in the file.</p>\n\n<p><strong>hello.txt</strong></p>\n\n<pre><code>h\u00e9llo\n</code></pre>\n\n<p>hello.txt has the only one special character. It works okay if the special character was just a regular character.</p>\n\n<p><strong>main.c</strong></p>\n\n<pre><code>int main()\n{\n    FILE *fp=NULL;\n    char *buf=NULL, *str1=\"h\u00e9llo\", *str2=\"hello\";\n    int i=0;\n    size_t fsize=0, bytes_read=0;\n\n    fp=fopen(\"hello.txt\", \"rb\");\n    fseek(fp, 0, SEEK_END);\n    fsize=ftell(fp);\n    rewind(fp);\n    buf=(char*)malloc(sizeof(char)*(fsize));\n    //buf[fsize]='\\0';\n    bytes_read=fread(buf, 1, fsize, fp);\n    if( bytes_read!=fsize ) exit(-1);\n    fclose(fp);\n    printf(\"encoded=%s\\n\", b64_encode((const unsigned char*)buf, fsize));\n\n    getchar();\n    return 0;\n}\n</code></pre>\n\n<p><strong>encode.c // has the function base64_encode</strong></p>\n\n<pre><code>char *b64_encode(const unsigned char* src, size_t len)\n{\n    int i=0, j=0;\n    char *enc=NULL;\n    size_t size=0;\n    unsigned char buf[4], tmp[3];\n\n    // alloc\n    enc=(char*)malloc(0);\n    if( enc==NULL )\n    {\n        perror(\"enc\");\n\n        return NULL;\n    }\n\n    while( len-- )\n    {\n        tmp[i++]=*(src++);\n        if( i==3 )\n        {\n            buf[0]=( tmp[0]&amp;0xfc )&gt;&gt;2;\n            buf[1]=( ( tmp[0]&amp;0x03 )&lt;&lt;4 )+( ( tmp[1]&amp;0xf0 )&gt;&gt;4 );\n            buf[2]=( ( tmp[1]&amp;0x0f )&lt;&lt;2 )+( ( tmp[1]&amp;0xc0 )&gt;&gt;6 );\n            buf[3]=tmp[2]&amp;0x3f;\n\n            /*\n             * alloc 4 bytes for 'enc' and then translate\n             * each encoded buffer part by index from\n             * the base64 table into 'enc' unsigned char array\n            */\n            enc=(char*)realloc(enc, size+4);\n            for( i=0; i&lt;4; ++i )\n            {\n                enc[size++]=b64_table[buf[i]];\n            }\n\n            // reset index\n            i=0;\n        }\n    }\n\n    if( i&gt;0 )\n    {\n        // fill 'tmp' with '\\0' at most 3 times\n        for( j=i; j&lt;3; ++j )\n        {\n            tmp[j]='\\0';\n        }\n\n        // perform same codes as above\n        buf[0]=( tmp[0]&amp;0xfc )&gt;&gt;2;\n        buf[1]=( ( tmp[0]&amp;0x03 )&lt;&lt;4 )+( ( tmp[1]&amp;0xf0 )&gt;&gt;4 );\n        buf[2]=( ( tmp[1]&amp;0x0f )&lt;&lt;2 )+( ( tmp[1]&amp;0xc0 )&gt;&gt;6 );\n        buf[3]=tmp[2]&amp;0x3f;\n\n        // same write to enc with new allocation\n        for( j=0; j&lt;i+1; ++j )\n        {\n            enc=(char*)realloc(enc, size+1);\n            enc[size++]=b64_table[buf[j]];\n        }\n\n        while( ( i++ )&lt;3 )\n        {\n            enc=(char*)realloc(enc, size+1);\n            enc[size++]='=';\n        }\n    }\n\n    enc=(char*)realloc(enc, size+1);\n    enc[size]='\\0';\n\n    return enc;\n}\n</code></pre>\n\n<p><strong>ouput by program</strong></p>\n\n<pre><code>aOnsbG9=\n</code></pre>\n\n<p><strong>after saving with utf-8</strong></p>\n\n<pre><code>aMPpbGxv  \n</code></pre>\n\n<p><strong>expected output</strong></p>\n\n<pre><code>aMOpbGxv\n</code></pre>\n\n<p><strong>PS. I read the file in as binary since it has special characters and because later on I would like to read in binary data such as images or videos.</strong></p>\n"}, {"tags": ["c++", "visual-studio", "cmake"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 3, "creation_date": 1482343035, "post_id": 41264827, "comment_id": 69738819, "body": "On Stack Overflow we tend to maintain question post and solution(s) <b>separated</b>. Instead of adding <code>SOLVED</code> clause, <a href=\"http://stackoverflow.com/help/self-answer\">you may post answer on your own question</a>. This feature is perfectly fit for your case: please, use it."}, {"owner": {"reputation": 442, "user_id": 6240151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/879a60dac8aa295273729f5d806f2a38?s=128&d=identicon&r=PG&f=1", "display_name": "GpG", "link": "https://stackoverflow.com/users/6240151/gpg"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1482492651, "post_id": 41264827, "comment_id": 69803487, "body": "good to know that. Its fixed!"}], "answers": [{"tags": [], "owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "is_accepted": true, "score": 2, "last_activity_date": 1482333682, "creation_date": 1482333682, "answer_id": 41266187, "question_id": 41264827, "link": "https://stackoverflow.com/questions/41264827/setting-optimization-settings-in-visual-studio-through-cmake/41266187#41266187", "title": "Setting optimization settings in visual studio through cmake", "body": "<p>I use this code:</p>\n\n<pre><code>string(REPLACE \"-O2\" \"-O0\" CMAKE_CXX_FLAGS_RELEASE \"${CMAKE_CXX_FLAGS_RELEASE}\")\nstring(REPLACE \"-O2\" \"-O0\" CMAKE_C_FLAGS_RELEASE \"${CMAKE_C_FLAGS_RELEASE}\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 442, "user_id": 6240151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/879a60dac8aa295273729f5d806f2a38?s=128&d=identicon&r=PG&f=1", "display_name": "GpG", "link": "https://stackoverflow.com/users/6240151/gpg"}, "is_accepted": false, "score": 1, "last_activity_date": 1482492558, "creation_date": 1482492558, "answer_id": 41300604, "question_id": 41264827, "link": "https://stackoverflow.com/questions/41264827/setting-optimization-settings-in-visual-studio-through-cmake/41300604#41300604", "title": "Setting optimization settings in visual studio through cmake", "body": "<p>Following the Antonio's answer the solution for me was:</p>\n\n<pre><code>First change the optimization setting:\nstring(REPLACE \"/O2\" \"/Od\" CMAKE_CXX_FLAGS_RELEASE \"${CMAKE_CXX_FLAGS_RELEASE}\")\n\nThan add a flag that creates program database file:\nstring(CONCAT CMAKE_CXX_FLAGS_RELEASE \"${CMAKE_CXX_FLAGS_RELEASE}\" \" /Zi\")\n</code></pre>\n\n<p>This also works but clears everything that was set to CMAKE_CXX_FLAGS_RELEASE before the call.</p>\n\n<pre><code>SET(CMAKE_CXX_FLAGS_RELEASE \"/Od /Zi\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15014, "user_id": 1709725, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/21b4e5678d9383c432b4868772a1b34c?s=128&d=identicon&r=PG", "display_name": "dk123", "link": "https://stackoverflow.com/users/1709725/dk123"}, "is_accepted": false, "score": 1, "last_activity_date": 1591243957, "creation_date": 1591243957, "answer_id": 62186774, "question_id": 41264827, "link": "https://stackoverflow.com/questions/41264827/setting-optimization-settings-in-visual-studio-through-cmake/62186774#62186774", "title": "Setting optimization settings in visual studio through cmake", "body": "<p>Updating <code>CMAKE_CXX_FLAGS_RELEASE</code> and friends did not work for me.\nWhat did was:</p>\n\n<pre><code>target_compile_options(${target_name} PRIVATE \"/Zi\")   \ntarget_compile_options(${target_name} PRIVATE \"/Ob0\")   \ntarget_compile_options(${target_name} PRIVATE \"/Od\")   \ntarget_compile_options(${target_name} PRIVATE \"/RTC1\")   \n\nmessage(STATUS \"updating options for target: ${target_name}\")\n</code></pre>\n\n<p>It seems like cmake 3.x and up has it s.t. if we add a compile option that conflicts with a previous option, the newer option will take precedence. </p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 8867271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wumdL.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/8867271/james"}, "is_accepted": false, "score": 0, "last_activity_date": 1607436199, "creation_date": 1607436199, "answer_id": 65200436, "question_id": 41264827, "link": "https://stackoverflow.com/questions/41264827/setting-optimization-settings-in-visual-studio-through-cmake/65200436#65200436", "title": "Setting optimization settings in visual studio through cmake", "body": "<p>For <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/o-options-optimize-code?view=msvc-160\" rel=\"nofollow noreferrer\">Windows MSVC</a>, I'm using this flag: -DCMAKE_CXX_FLAGS=&quot;/Od&quot;.\nLooks  like this:</p>\n<pre><code>cmake src\\ -DCMAKE_CXX_FLAGS=&quot;/Od&quot;\n</code></pre>\n"}], "owner": {"reputation": 442, "user_id": 6240151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/879a60dac8aa295273729f5d806f2a38?s=128&d=identicon&r=PG&f=1", "display_name": "GpG", "link": "https://stackoverflow.com/users/6240151/gpg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3528, "favorite_count": 1, "accepted_answer_id": 41266187, "answer_count": 4, "score": 3, "last_activity_date": 1607436199, "creation_date": 1482329624, "last_edit_date": 1492086984, "question_id": 41264827, "link": "https://stackoverflow.com/questions/41264827/setting-optimization-settings-in-visual-studio-through-cmake", "title": "Setting optimization settings in visual studio through cmake", "body": "<p>When I create a project for visual studio (2015) by using a cmake file, the optimization level is set to O2 by default in release mode.</p>\n\n<p>I am unable to find a way to change this to other values within a cmake file.\nAdditionaly, I would also need a program database (.pdb) to be build.</p>\n\n<p>I tried:</p>\n\n<pre><code>SET(CMAKE_CXX_FLAGS \"-O0\")\nSET(CMAKE_C_FLAGS \"-O0\")\n</code></pre>\n\n<p>and </p>\n\n<pre><code>SET(CMAKE_CXX_FLAGS_RELEASE \"-O0\")\nSET(CMAKE_C_FLAGS_RELEASE \"-O0\")\n</code></pre>\n\n<p>as proposed here:</p>\n\n<p><a href=\"https://unix.stackexchange.com/questions/187455/how-to-compile-without-optimizations-o0-using-cmake\">https://unix.stackexchange.com/questions/187455/how-to-compile-without-optimizations-o0-using-cmake</a></p>\n\n<p>without the success. Anybody knows the right way?</p>\n"}, {"tags": ["c++", "callback", "dialog", "global-variables", "outlook-addin"], "answers": [{"tags": [], "owner": {"reputation": 335, "user_id": 1266372, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/faf86ed58097b305f0cb3f32a16dd212?s=128&d=identicon&r=PG", "display_name": "Bautzi89", "link": "https://stackoverflow.com/users/1266372/bautzi89"}, "is_accepted": false, "score": 0, "last_activity_date": 1482411545, "creation_date": 1482411545, "answer_id": 41283739, "question_id": 41264713, "link": "https://stackoverflow.com/questions/41264713/c-get-and-set-values-from-dialogbox-in-callback-function/41283739#41283739", "title": "C++ get and set values from DialogBox in Callback function", "body": "<p>I finally got it working by wrapping the whole dialog handling in a class and create an instance of this class in my OnItemSend function. Then I can get and set public properties from inside my function and the static callback function as well.</p>\n"}], "owner": {"reputation": 335, "user_id": 1266372, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/faf86ed58097b305f0cb3f32a16dd212?s=128&d=identicon&r=PG", "display_name": "Bautzi89", "link": "https://stackoverflow.com/users/1266372/bautzi89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1482411545, "creation_date": 1482329313, "question_id": 41264713, "link": "https://stackoverflow.com/questions/41264713/c-get-and-set-values-from-dialogbox-in-callback-function", "title": "C++ get and set values from DialogBox in Callback function", "body": "<p>I have an ATL/COM Outlook-AddIn that is activated when the user tries to send a mail. If the send button is clicked a DialogBox appears. There I want to set the subject of the mail in a TextBox and rewrite this to the subject if the OK Button is clicked. This should be done in the callback function of the DialogBox. Here is what I got so far:</p>\n\n<pre><code>static BSTR myGlobalVar;\n\nvoid __stdcall OnItemSend(IDispatch* Item, VARIANT_BOOL* Cancel)\n{\n    CComPtr&lt;Outlook::_MailItem&gt; mail;\n    HRESULT hr = Item-&gt;QueryInterface(__uuidof(Outlook::_MailItem), (void**)&amp;mail); // get the mail item\n\n    if (hr == S_OK)\n    {           \n        IUnknown* mapiItem;\n        if (mail-&gt;get_MAPIOBJECT(&amp;mapiItem) == S_OK)\n        {\n            mail-&gt;get_Subject(&amp;myGlobalVar); // get the current subject\n\n            DialogBox(GetModuleHandle(L\"MyDllName.dll\"), (LPCWSTR)IDD_DIALOG1, 0, (DLGPROC)About); // open the DialogBox\n\n            // here I want to set the subject with the value from the TextBox\n            mail-&gt;put_Subject(&amp;myGlobalVar);\n        }\n   }\n}\n\n// this is the callback function of the DialogBox\nstatic LRESULT CALLBACK About( HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam )\n{\n    switch( message )\n    {\n        case WM_INITDIALOG:\n            {\n                // I want to set the value of IDC_MYTEXT to the subject, \n                // but I cannot access any global variables from here\n                SetDlgItemText(hDlg, IDC_MYTEXT, myGlobalVar);\n\n                return TRUE;\n            }\n\n        case WM_COMMAND:\n            if (LOWORD(wParam) == IDOK) \n            {\n                TCHAR szBuf[128];\n                GetDlgItemText(hDlg, IDC_MYTEXT, szBuf, 128 - 1);\n\n                // here I want to set an global accessable variable\n                myGlobalVar = (BSTR)szBuf;\n\n                EndDialog(hDlg, LOWORD(wParam));\n                return TRUE;\n            }               \n\n            break;\n    }\n    return FALSE;\n}\n</code></pre>\n\n<p>In the callback function I cannot access any global variables that would be available in OnItemSend as well, because I get a linker error LNK2001. What would be a good approach to achieve this? Thanks in advance!</p>\n"}, {"tags": ["c++", "file-io", "fstream", "readfile"], "comments": [{"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 1, "creation_date": 1482329369, "post_id": 41264652, "comment_id": 69730119, "body": "maybe you need to clear the <code>eof</code> bit"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1482329622, "post_id": 41264652, "comment_id": 69730289, "body": "This isn&#39;t the problem, but don&#39;t use <code>std::endl</code> unless you need the extra stuff that it does. <code>&#39;\\n&#39;</code> ends a line."}, {"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1482329652, "post_id": 41264652, "comment_id": 69730307, "body": "@ForceBru It does not write anything, the modification time of the file does not even change."}, {"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1482329685, "post_id": 41264652, "comment_id": 69730329, "body": "@PeteBecker That&#39;s the point, I wanted to flush explicitly."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1482329762, "post_id": 41264652, "comment_id": 69730386, "body": "The stream gets flushed by its destructor, which runs at the end of the block, immediately after the insertion. Explicit flushing is rarely needed, and it won&#39;t fix the problem that&#39;s presented here."}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1482329887, "post_id": 41264652, "comment_id": 69730467, "body": "isn&#39;t add <code>fs.clear()</code> after the <code>while</code> loop work?"}, {"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1482329919, "post_id": 41264652, "comment_id": 69730487, "body": "@PeteBecker I updated my code. I want a flush because in my actual code, I want to overwrite other times possibly."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482330092, "post_id": 41264652, "comment_id": 69730605, "body": "It&#39;s not &quot;nonsensical&quot; in the slightest and it is not clear to me why you think that it is. Streams are <i>flows of data</i>; truncating a file to nothing is a file-level operation."}, {"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 0, "creation_date": 1482330247, "post_id": 41264652, "comment_id": 69730722, "body": "@Arkadiy I read this, but the question is why technically?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482330840, "post_id": 41264652, "comment_id": 69731147, "body": "@Boiethios: Because streams are <i>flows of data</i>, and truncating a file to nothing is a file-level operation."}, {"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482331034, "post_id": 41264652, "comment_id": 69731287, "body": "@LightnessRacesinOrbit Hum, I think I understand. I saw the fstream like a handler on a file. Why don&#39;t you post an answer about it?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482331806, "post_id": 41264652, "comment_id": 69731798, "body": "@Boiethios: Because I don&#39;t accept the premise of the question :)"}, {"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482331938, "post_id": 41264652, "comment_id": 69731892, "body": "@LightnessRacesinOrbit The <i>nonsensical</i> thing? I protected my back by adding &quot;seems&quot;. That was a personal feeling."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 0, "creation_date": 1482343611, "post_id": 41264652, "comment_id": 69739169, "body": "Looking for &quot;technical&quot; reason brings us into opinion-based territory. My opinion is that using fstream that way violates &quot;do one thing&quot; rule. But that&#39;s just an opinion."}], "answers": [{"tags": [], "owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "is_accepted": false, "score": 1, "last_activity_date": 1482329987, "last_edit_date": 1482329987, "creation_date": 1482329533, "answer_id": 41264796, "question_id": 41264652, "link": "https://stackoverflow.com/questions/41264652/read-the-whole-file-then-overwrite-all-in-same-stdfstream/41264796#41264796", "title": "Read the whole file, then overwrite all in same std::fstream", "body": "<p>After reading the whole file, the <code>fs</code> is now in <code>eof</code> state. You need to clear the state so it can do following IO operations.</p>\n"}, {"comments": [{"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 0, "creation_date": 1482330025, "post_id": 41264921, "comment_id": 69730567, "body": "Yes, that writes the string, but the whole file is not overwritten."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 0, "creation_date": 1482330064, "post_id": 41264921, "comment_id": 69730591, "body": "@Boiethios: You did not write any code to perform that function. Don&#39;t blame fstream for that."}, {"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 0, "creation_date": 1482330488, "post_id": 41264921, "comment_id": 69730887, "body": "Why do we need to release the file, then to reopen it? There are operations we do not need normally!"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 0, "creation_date": 1482330662, "post_id": 41264921, "comment_id": 69731012, "body": "@Boiethios: until the filesystem libraries are standardized, the only platform independent way to truncate the file is during opening, so there is no workaround."}, {"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1482330746, "post_id": 41264921, "comment_id": 69731066, "body": "@AndyG Oh, thank you! So that&#39;s it. Could you explain this as answer?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482330862, "post_id": 41264921, "comment_id": 69731162, "body": "<i>&quot;There are operations we do not need normally!&quot;</i> When do you not need them? What is this &quot;normally&quot; of which you speak? Are you confusing streams with containers? Regardless of implementation/POSIX constraints, the two are different kinds of things and file truncation has next to no business existing in the <code>fstream</code> interface."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1482330887, "post_id": 41264921, "comment_id": 69731184, "body": "@Boisthios: there may be OSes which allow truncating an open file. I&#39;m pretty sure not all do. Also, the file stream interface is pretty much unchanged since a fairly long time: I could well imagine that popular systems back then did not have a way to truncate an open file."}, {"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 0, "creation_date": 1482331212, "post_id": 41264921, "comment_id": 69731412, "body": "@DietmarK&#252;hl I saw that for example <a href=\"http://stackoverflow.com/questions/980283/truncating-a-file-while-its-being-used-linux\" title=\"truncating a file while its being used linux\">stackoverflow.com/questions/980283/&hellip;</a>"}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 1, "creation_date": 1482331499, "post_id": 41264921, "comment_id": 69731599, "body": "@Boiethios: which actually does open (and thereby truncate) the file again! Yes, you can open another file stream to truncate the one you have already open. What will happen next is somewhat unclear, though, as the streams are buffered. You may get back some of the buffers, possible preceded by a lot of zero pages (depending on where your file pointer is at this time and how the <code>std::filebuf</code> is implemented)."}], "tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": false, "score": 4, "last_activity_date": 1482330090, "last_edit_date": 1482330090, "creation_date": 1482329906, "answer_id": 41264921, "question_id": 41264652, "link": "https://stackoverflow.com/questions/41264652/read-the-whole-file-then-overwrite-all-in-same-stdfstream/41264921#41264921", "title": "Read the whole file, then overwrite all in same std::fstream", "body": "<p>The loop iterates until the fail bit gets set. Just <code>clear()</code> the flags prior to the seek:</p>\n\n<pre><code>fs.clear();\n</code></pre>\n\n<p>If you only want to overwrite the starting bit that is sufficient. If also want to truncate the stream I'd explicitly <code>close()</code> and <code>open()</code> it, where the <code>open()</code> would not set <code>std::ios_base::in</code>.</p>\n"}], "owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 614, "favorite_count": 0, "closed_date": 1482448118, "answer_count": 2, "score": 0, "last_activity_date": 1482344695, "creation_date": 1482329111, "last_edit_date": 1482344695, "question_id": 41264652, "link": "https://stackoverflow.com/questions/41264652/read-the-whole-file-then-overwrite-all-in-same-stdfstream", "closed_reason": "Duplicate", "title": "Read the whole file, then overwrite all in same std::fstream", "body": "<p>Although I found a lot of stuff about <code>std::fstream</code> on SO, I still can't understand how it operates. Let's see this minimal example:</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n  std::fstream fs{ \"somefile.txt\", std::fstream::out | std::fstream::in };\n  std::string line;\n\n  while (std::getline(fs, line))\n  {\n    // reads the whole file\n  }\n\n  // the purpose is to overwrite the whole file\n  fs.seekp(0, std::ios_base::beg); // moves at the beginning\n  fs &lt;&lt; \"Hello world!\" &lt;&lt; std::endl; // writes in the file\n\n  // possibly other read/write\n}\n</code></pre>\n\n<p>This does not work, it seems that one cannot firstly read, and then write in the same stream according to everything I read about. <strong>I know the workaround that consists in closing the file, then opening it with the <code>std::ios_base::trunc</code> flag</strong>. However, that seems to be nonsensical: why is there such a limitation? Cannot we technically just overwrite the file after the reading?</p>\n"}, {"tags": ["c++", "c", "linux", "qt", "sockets"], "comments": [{"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1482337435, "post_id": 41264645, "comment_id": 69735685, "body": "Qt also has <a href=\"http://doc.qt.io/qt-5/qtcpsocket.html\" rel=\"nofollow noreferrer\">support for sockets</a>, it might be preferable to use that if you already have a Qt app. One advantage is that you can use signals to handle incoming data."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6147175, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ppOVt.png?s=128&g=1", "display_name": "Samuel", "link": "https://stackoverflow.com/users/6147175/samuel"}, "edited": false, "score": 0, "creation_date": 1482330358, "post_id": 41264838, "comment_id": 69730794, "body": "Okay i will test it."}, {"owner": {"reputation": 23, "user_id": 6147175, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ppOVt.png?s=128&g=1", "display_name": "Samuel", "link": "https://stackoverflow.com/users/6147175/samuel"}, "edited": false, "score": 0, "creation_date": 1482332245, "post_id": 41264838, "comment_id": 69732087, "body": "Working perfectly, thanks.  Just will now have to use the appropriate sockets library for windows."}], "tags": [], "owner": {"reputation": 2952, "user_id": 3200088, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/WlD9X.jpg?s=128&g=1", "display_name": "Gio", "link": "https://stackoverflow.com/users/3200088/gio"}, "is_accepted": true, "score": 0, "last_activity_date": 1482336389, "last_edit_date": 1482336389, "creation_date": 1482329664, "answer_id": 41264838, "question_id": 41264645, "link": "https://stackoverflow.com/questions/41264645/graphic-app-in-c-and-code-in-c-qt-programming/41264838#41264838", "title": "Graphic app in C++ and code in C **Qt Programming**", "body": "<p>Within you Qt/C++ application, you can include you C-file as follows:</p>\n\n<pre><code>extern \"C\" {\n#include \"myCHeaderFile.h\n} /* extern \"C\" */\n</code></pre>\n\n<p>You can than simply access the C-functions within your C++/Qt file.</p>\n"}], "owner": {"reputation": 23, "user_id": 6147175, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ppOVt.png?s=128&g=1", "display_name": "Samuel", "link": "https://stackoverflow.com/users/6147175/samuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 41264838, "answer_count": 1, "score": -1, "last_activity_date": 1482336389, "creation_date": 1482329087, "question_id": 41264645, "link": "https://stackoverflow.com/questions/41264645/graphic-app-in-c-and-code-in-c-qt-programming", "title": "Graphic app in C++ and code in C **Qt Programming**", "body": "<p>i have an application to realise with sockets in c, and i'm confortable with C++ and Qt, is it possible to do both C and C++ on Qt.</p>\n\n<p>there is a sample from the code is on C:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n\n#define PORT 9600\n\nint main(int argc, char *argv[]){\n    int sock_cnx; /* Socket pour ouverture de connexion */\n\n    struct sockaddr_in serveraddr;\n    struct sockaddr_in clientaddr;\n\n    int newfd;\n    char buf[1024];\n    int nbytes;\n    int addrlen;\n    int i, j;\n\n    /* Ensemble des descripteurs qu\u2019on souhaite surveiller en lecture */\n    fd_set surveil_fds;\n\n    /* Ensemble des descripteurs qu\u2019on va utiliser dans SELECT */\n    fd_set read_fds; \n\n    /* Memorise le plus grand descripteur : a utiliser dans SELECT*/\n    int fdmax; \n\n    addrlen = sizeof(clientaddr);\n\n    /* Ouverture de la socket du serveur */\n    if ((sock_cnx = socket(AF_INET,SOCK_DGRAM,0)) == -1){\n        perror(\"Erreur socket\");\n        exit(1);\n    }\n\n    bzero(&amp;serveraddr, sizeof(serveraddr));\n\n    serveraddr.sin_family = AF_INET;\n    serveraddr.sin_port = htons(PORT);\n    serveraddr.sin_addr.s_addr = htonl (INADDR_ANY);\n\n    bzero(&amp;(serveraddr.sin_zero), 8);\n\n    /* Bind */\n    if (bind(sock_cnx, (struct sockaddr *)&amp;serveraddr, sizeof(serveraddr)) == -1) {\n        perror(\"Erreur Bind\");\n        exit(1);\n    }\n    ........\n    return 0;\n}\n</code></pre>\n\n<p>i already created my interface for the app on Qt. </p>\n"}, {"tags": ["c++", "windows", "codeblocks"], "comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 2, "creation_date": 1482329069, "post_id": 41264572, "comment_id": 69729910, "body": "hint: won&#39;t work with 2 <code>system</code> calls."}, {"owner": {"reputation": 217, "user_id": 3393326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d4f040ff37c1b69dda9b34ca929089bf?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Kim.", "link": "https://stackoverflow.com/users/3393326/jim-kim"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1482329180, "post_id": 41264572, "comment_id": 69729988, "body": "if not ! What is the other way?"}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1482329405, "post_id": 41264572, "comment_id": 69730140, "body": "Related: <a href=\"http://www.cplusplus.com/articles/j3wTURfi/\" rel=\"nofollow noreferrer\">cplusplus.com/articles/j3wTURfi</a>"}], "answers": [{"tags": [], "owner": {"reputation": 32602, "user_id": 7050130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efd06b6898f66b91234471a40cffae45?s=128&d=identicon&r=PG", "display_name": "Mark Adelsberger", "link": "https://stackoverflow.com/users/7050130/mark-adelsberger"}, "is_accepted": true, "score": 1, "last_activity_date": 1482329484, "creation_date": 1482329484, "answer_id": 41264777, "question_id": 41264572, "link": "https://stackoverflow.com/questions/41264572/how-to-store-cmd-memory-in-c-using-system-function-c/41264777#41264777", "title": "How to Store cmd memory in c++ using system() Function [C++]", "body": "<p>Well, as you say, that won't work.  What's important to understand is <em>why</em>:  The <code>system</code> call spawns a child process to run the shell, and then you're setting an environment variable <em>in that child process</em>, which promptly terminates.</p>\n\n<p>So perhaps your question is over-specific in that it asks how to do this \"using <code>system()</code>\"; short answer is you can't.  (Long answer is you could set the environment variable in the registry, but that's only sensible if you intend this to be a permanent configuration change to the computer.  It's not the best idea if you just mean to set a variable for use in subsequent <code>system()</code> calls from the same program..)</p>\n\n<p>So instead you could use the <code>SetEnvironmentVariable()</code> function, which will set the environment variable in your current process (instead of in a child that's about to go away).</p>\n\n<p><strong>UPDATE</strong> - There is one other option, alluded to in the question's comment thread; but it assumes that you can set the variable and immediately run any/all commands that depend on it right after.  In the case where you can do that, you could pack all the commands into one <code>system</code> call, most simply with a batch script...</p>\n"}, {"tags": [], "owner": {"reputation": 603, "user_id": 6016071, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bYAFA.jpg?s=128&g=1", "display_name": "JimmyNJ", "link": "https://stackoverflow.com/users/6016071/jimmynj"}, "is_accepted": false, "score": 2, "last_activity_date": 1482334469, "last_edit_date": 1482334469, "creation_date": 1482329977, "answer_id": 41264949, "question_id": 41264572, "link": "https://stackoverflow.com/questions/41264572/how-to-store-cmd-memory-in-c-using-system-function-c/41264949#41264949", "title": "How to Store cmd memory in c++ using system() Function [C++]", "body": "<p>Each <code>system()</code> invocation creates a  separate environment then destroys it when it returns to your program. This is why they can not pass information between each other.</p>\n\n<p>To set an environment variable for the environment of your program use the <code>putenv()</code> call and later read it with the <code>getenv()</code> call. </p>\n\n<p>The <code>system()</code> call inherits a copy of the environment of the program which invokes it , so at least you can set variables using <code>putenv()</code> and have a program invoked by <code>system()</code> read them.</p>\n\n<p>If you expect to invoke an external program using <code>system()</code> and get information back from it via environment variables you can not do this easily. If this is your goal consider using <code>fork()</code>.</p>\n"}], "owner": {"reputation": 217, "user_id": 3393326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d4f040ff37c1b69dda9b34ca929089bf?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Kim.", "link": "https://stackoverflow.com/users/3393326/jim-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 41264777, "answer_count": 2, "score": 0, "last_activity_date": 1482334469, "creation_date": 1482328885, "last_edit_date": 1482334349, "question_id": 41264572, "link": "https://stackoverflow.com/questions/41264572/how-to-store-cmd-memory-in-c-using-system-function-c", "title": "How to Store cmd memory in c++ using system() Function [C++]", "body": "<p>Look at the code below! You will understand what I want:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;windows.h&gt;\n\n    using namespace std;\n\n    int main()\n    {  \n       system(\"set plock=24865\");\n       system(\"echo %plock%\"); // I know this will not work.But How to make it work?\n\n     return 0;\n    }\n</code></pre>\n"}, {"tags": ["c++", "function", "return-value", "2d-vector"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1482328802, "post_id": 41264520, "comment_id": 69729742, "body": "How does it <i>not work</i>?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482328839, "post_id": 41264520, "comment_id": 69729775, "body": "You need to use the <code>resize()</code> function before accessing any vector elements using the <code>[]</code> operator."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1482328975, "post_id": 41264520, "comment_id": 69729870, "body": "if <code>grid.size() == 0</code>, call to <a href=\"http://en.cppreference.com/w/cpp/container/vector/front\" rel=\"nofollow noreferrer\">grid.front ()</a> is UB."}, {"owner": {"reputation": 55, "user_id": 5679818, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/12028fc92b380fdbeb52ec29e4947554?s=128&d=identicon&r=PG&f=1", "display_name": "Reblochon Masqu&#233;", "link": "https://stackoverflow.com/users/5679818/reblochon-masqu%c3%a9"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1482329544, "post_id": 41264520, "comment_id": 69730244, "body": "@NathanOliver I get, when I compile, the error <code>control reaches end of non-void function [-Wreturn-type]</code>.   @\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I don&#39;t really understand why I should use <code>resize()</code> before using the <code>[ ]</code>operator ?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1482329669, "post_id": 41264520, "comment_id": 69730316, "body": "@ReblochonMasqu&#233; You get that error for the function you have shown?  To me it does not look like you could get that error with this function.  Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and include the actual compiler error(s) in the question."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1482330236, "post_id": 41264520, "comment_id": 69730713, "body": "typo in previous comment.  could should be couldn&#39;t."}, {"owner": {"reputation": 55, "user_id": 5679818, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/12028fc92b380fdbeb52ec29e4947554?s=128&d=identicon&r=PG&f=1", "display_name": "Reblochon Masqu&#233;", "link": "https://stackoverflow.com/users/5679818/reblochon-masqu%c3%a9"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1482330606, "post_id": 41264520, "comment_id": 69730979, "body": "@NathanOliver No I don&#39;t get this error for the function shown, sorry I should have been more precise, I&#39;m simplifying my code and I will post it as soon as I&#39;m done."}, {"owner": {"reputation": 55, "user_id": 5679818, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/12028fc92b380fdbeb52ec29e4947554?s=128&d=identicon&r=PG&f=1", "display_name": "Reblochon Masqu&#233;", "link": "https://stackoverflow.com/users/5679818/reblochon-masqu%c3%a9"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1482331882, "post_id": 41264520, "comment_id": 69731854, "body": "@NathanOliver I finally found out that by passing the grid by parameter I could simply modify it with a void function. So finally I won&#39;t bother you with showing my code and its errors as I found out another way to get the result I expected. Thanks for your help !"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 5679818, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/12028fc92b380fdbeb52ec29e4947554?s=128&d=identicon&r=PG&f=1", "display_name": "Reblochon Masqu&#233;", "link": "https://stackoverflow.com/users/5679818/reblochon-masqu%c3%a9"}, "edited": false, "score": 0, "creation_date": 1482330679, "post_id": 41264958, "comment_id": 69731022, "body": "Thank you this is very helpful !"}], "tags": [], "owner": {"reputation": 1518, "user_id": 2434628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f694c7757c0085ac1f0ed88d960ff657?s=128&d=identicon&r=PG", "display_name": "AresCaelum", "link": "https://stackoverflow.com/users/2434628/arescaelum"}, "is_accepted": true, "score": 0, "last_activity_date": 1482329996, "creation_date": 1482329996, "answer_id": 41264958, "question_id": 41264520, "link": "https://stackoverflow.com/questions/41264520/c-how-to-make-a-2d-vector-function/41264958#41264958", "title": "C++ How to make a 2D Vector function?", "body": "<p>To answer your questions:</p>\n\n<ol>\n<li>if you are trying to loop through a vector to set its values then yes it needs to be initialized. a vector starts with 0 elements if you call the default constructor.  To set the size you can call <code>grid.resize(new_size)</code>, now all the vectors inside of your grid also have a size of zero so you can loop through grid and resize all of those...</li>\n<li>Yes you can change the size of it and return a bigger vector, use <code>.resize</code> this won't affect your original grid since you are passing in a copy of it and not a reference to it.</li>\n<li>Yes, you can retrieve a value from a void function, if you create a reference to a variable as a parameter you can modify the value of that variable.  You can read about it here: <a href=\"http://www.learncpp.com/cpp-tutorial/73-passing-arguments-by-reference/\" rel=\"nofollow noreferrer\">http://www.learncpp.com/cpp-tutorial/73-passing-arguments-by-reference/</a></li>\n</ol>\n\n<p>If you aren't changing the original grid, it might be a good idea to pass it by const reference so you aren't making so many copies.</p>\n"}], "owner": {"reputation": 55, "user_id": 5679818, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/12028fc92b380fdbeb52ec29e4947554?s=128&d=identicon&r=PG&f=1", "display_name": "Reblochon Masqu&#233;", "link": "https://stackoverflow.com/users/5679818/reblochon-masqu%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1188, "favorite_count": 0, "accepted_answer_id": 41264958, "answer_count": 1, "score": 0, "last_activity_date": 1482329996, "creation_date": 1482328737, "question_id": 41264520, "link": "https://stackoverflow.com/questions/41264520/c-how-to-make-a-2d-vector-function", "title": "C++ How to make a 2D Vector function?", "body": "<p>I'm trying to create a function in C++ that returns a 2D vector.\nThe function also has a 2D vector as argument, the idea would be to return a modified version of this 2D vector, with the function. </p>\n\n<p>I won't put my whole code here as is would be totally off the question, but to sum up the function looks like this :</p>\n\n<pre><code>using std::vector;\n\nvector&lt;vector&lt;char&gt; &gt; function(vector&lt;vector&lt;char&gt; &gt; grid) {\n\n    int width = static_cast&lt;int&gt;(grid.front().size());\n    int height = static_cast&lt;int&gt;(grid.size());\n\n    for(int y=0; y &lt; height; ++y) \n    {\n        for(int x=0; x &lt; width; ++x) \n        {\n            grid[y][x]= 'H';\n        }\n    }\n    return grid;   \n}\n</code></pre>\n\n<p>And I would then do in the <strong>main</strong> :</p>\n\n<pre><code>vector&lt;vector&lt;char&gt; &gt; new_grid = function(grid);\n</code></pre>\n\n<p>But it doesn't work in the way I'm using it, so I have a few questions :</p>\n\n<ol>\n<li>Should the 2D vector function size be initialized ?</li>\n<li>Can I change the size of <code>grid</code>inside the function and return a bigger 2D vector ?</li>\n<li>And, it might be a dumb question but, is it actually possible to retrieve a value, an array, a string, in a function without using return, in a void function ? </li>\n</ol>\n\n<p>Thanks for your help !</p>\n\n<p>I can show my whole code if you want but it is quite big and might not be so clear.</p>\n"}, {"tags": ["c++", "rest"], "comments": [{"owner": {"reputation": 15228, "user_id": 1184641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ee5565d022bd50b3e21f34f102f957?s=128&d=identicon&r=PG", "display_name": "Appleman1234", "link": "https://stackoverflow.com/users/1184641/appleman1234"}, "edited": false, "score": 0, "creation_date": 1482522787, "post_id": 41264332, "comment_id": 69817267, "body": "What do you mean by byte[] ?  See <a href=\"http://stackoverflow.com/questions/16489407/how-to-create-a-byte-array-in-c\" title=\"how to create a byte array in c\">stackoverflow.com/questions/16489407/&hellip;</a> for more information ?"}], "answers": [{"comments": [{"owner": {"reputation": 18978, "user_id": 2736559, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/I2e1Z.jpg?s=128&g=1", "display_name": "Rika", "link": "https://stackoverflow.com/users/2736559/rika"}, "edited": false, "score": 0, "creation_date": 1615004160, "post_id": 41355530, "comment_id": 117564512, "body": "Thanks a lot, Do you also happen to know, how we can get byte arrays from a ``` Concurrency::streams::ostream``` by any chance? I&#39;m receiving a file on the server and I need to check a couple of first bytes to identify the file sent."}, {"owner": {"reputation": 2811, "user_id": 6635521, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ht17F.jpg?s=128&g=1", "display_name": "David Scarlett", "link": "https://stackoverflow.com/users/6635521/david-scarlett"}, "reply_to_user": {"reputation": 18978, "user_id": 2736559, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/I2e1Z.jpg?s=128&g=1", "display_name": "Rika", "link": "https://stackoverflow.com/users/2736559/rika"}, "edited": false, "score": 0, "creation_date": 1615085174, "post_id": 41355530, "comment_id": 117581695, "body": "@Rika I&#39;ve posted an answer to your seperate question about this."}], "tags": [], "owner": {"reputation": 2811, "user_id": 6635521, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ht17F.jpg?s=128&g=1", "display_name": "David Scarlett", "link": "https://stackoverflow.com/users/6635521/david-scarlett"}, "is_accepted": true, "score": 2, "last_activity_date": 1482900687, "creation_date": 1482900687, "answer_id": 41355530, "question_id": 41264332, "link": "https://stackoverflow.com/questions/41264332/convert-stream-response-to-byte-using-c-rest-sdk/41355530#41355530", "title": "Convert Stream response to byte[] using C++ REST SDK", "body": "<p>What about using the <a href=\"https://microsoft.github.io/cpprestsdk/classweb_1_1http_1_1http__response.html#a2dc26d0a1f79f0f31fdd6ec78a939cf0\" rel=\"nofollow noreferrer\"><code>http_response::extract_vector</code></a> method to return the response body as a byte array?</p>\n\n<pre><code>pplx::task&lt;std::vector&lt;unsigned char&gt;&gt; GetResponse()\n{\n    http_client client(url);\n    return client.request(methods::GET).then([](http_response response)\n    {\n        std::wostringstream ss;\n        ss &lt;&lt; L\"Server returned returned status code \" &lt;&lt; response.status_code() &lt;&lt; L'.' &lt;&lt; std::endl;\n        std::wcout &lt;&lt; ss.str();\n\n        return response.extract_vector();\n    });\n}\n</code></pre>\n\n<p>Or even simpler if you don't need the stdout logging:</p>\n\n<pre><code>pplx::task&lt;std::vector&lt;unsigned char&gt;&gt; GetResponse()\n{\n    http_client client(url);\n    return client.request(methods::GET).get().extract_vector();\n}\n</code></pre>\n\n<p>You can then call <code>data()</code> on the returned <code>vector</code> to get a pointer to the underlying unsigned char array (which is equivalent to a byte array).</p>\n"}], "owner": {"reputation": 556, "user_id": 4516201, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001589794101/picture?type=large", "display_name": "Harish", "link": "https://stackoverflow.com/users/4516201/harish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 732, "favorite_count": 0, "accepted_answer_id": 41355530, "answer_count": 1, "score": 2, "last_activity_date": 1482900687, "creation_date": 1482328137, "last_edit_date": 1482523864, "question_id": 41264332, "link": "https://stackoverflow.com/questions/41264332/convert-stream-response-to-byte-using-c-rest-sdk", "title": "Convert Stream response to byte[] using C++ REST SDK", "body": "<p>I am using C++ REST SDK to get a response from the API, and I need to convert <code>Concurrency::streams::basic_istream</code> to <code>byte[]</code>.</p>\n\n<pre><code>pplx::task&lt;void&gt; GetResponse()\n{\n    http_client client(url);\n    return client.request(methods::GET).then([](http_response response)\n    {\n        std::wostringstream ss;\n        ss &lt;&lt; L\"Server returned returned status code \" &lt;&lt; response.status_code() &lt;&lt; L'.' &lt;&lt; std::endl;\n        std::wcout &lt;&lt; ss.str();\n\n        auto bodyStream = response.body();\n    });\n}\n</code></pre>\n\n<p><code>bodyStream</code> is of type <code>Concurrency::streams::basic_istream</code>.</p>\n\n<p>The <code>content-type</code> of the response I getting is <code>application/octet-stream</code>.</p>\n\n<p>How can I convert it to <code>byte[]</code>?</p>\n"}, {"tags": ["c++", "function", "pointers"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1482331343, "post_id": 41264192, "comment_id": 69731492, "body": "You are missing the C++ tag (and probably the C++11 one)."}], "answers": [{"comments": [{"owner": {"reputation": 276, "user_id": 7325581, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5f04d843e595795aea0e5eadcd3a84a8?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Tsai", "link": "https://stackoverflow.com/users/7325581/michael-tsai"}, "edited": false, "score": 0, "creation_date": 1482329815, "post_id": 41264258, "comment_id": 69730420, "body": "but the code of &quot;ptr=func_name;&quot; can be actually work"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 276, "user_id": 7325581, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5f04d843e595795aea0e5eadcd3a84a8?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Tsai", "link": "https://stackoverflow.com/users/7325581/michael-tsai"}, "edited": false, "score": 0, "creation_date": 1482330911, "post_id": 41264258, "comment_id": 69731198, "body": "But that does not compute a function name."}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "reply_to_user": {"reputation": 276, "user_id": 7325581, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5f04d843e595795aea0e5eadcd3a84a8?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Tsai", "link": "https://stackoverflow.com/users/7325581/michael-tsai"}, "edited": false, "score": 1, "creation_date": 1482352888, "post_id": 41264258, "comment_id": 69744309, "body": "@MichaelTsai That is simply an implicit conversion. The compiler transforms it into <code>ptr = &amp;func_name;</code>"}, {"owner": {"reputation": 2921, "user_id": 9133378, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/goYCP.jpg?s=128&g=1", "display_name": "scottxiao", "link": "https://stackoverflow.com/users/9133378/scottxiao"}, "edited": false, "score": 0, "creation_date": 1519009030, "post_id": 41264258, "comment_id": 84721326, "body": "&quot; <code>std::cout &lt;&lt; fp &lt;&lt; std::endl</code> would output some address&quot;  <b>is not true,</b> not to speak of the <code>std::cout &lt;&lt; fun &lt;&lt; std::endl</code>.Defaultly the cout will just print <b>1 or 0</b>"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 2, "last_activity_date": 1519018671, "last_edit_date": 1519018671, "creation_date": 1482327953, "answer_id": 41264258, "question_id": 41264192, "link": "https://stackoverflow.com/questions/41264192/how-to-get-the-address-of-function/41264258#41264258", "title": "How to get the address of function?", "body": "<blockquote>\n  <p>The address of function is its name with bracket</p>\n</blockquote>\n\n<p>The address of a function is <em>not</em> its name. It is a memory address like e.g. <code>0x0000000000020d57</code> (on Linux, you could use <code>nm</code> to get addresses of global functions) in the <a href=\"https://en.wikipedia.org/wiki/Virtual_address_space\" rel=\"nofollow noreferrer\">virtual address space</a> of the process running your program.\n<strong>Function <em>names</em> are forgotten at runtime</strong> (excepted when related to <a href=\"https://en.wikipedia.org/wiki/Dynamic_linker\" rel=\"nofollow noreferrer\">dynamic linking</a>, and that notion is not in standard C++, but is implementation related). You can even <a href=\"https://en.wikipedia.org/wiki/Strip_%28Unix%29\" rel=\"nofollow noreferrer\">strip</a> the symbol table of an executable. Function names matter only at compile time and at link time. </p>\n\n<p>In general you cannot get the name of function from its address.</p>\n\n<p>Of course, in <a href=\"https://en.wikipedia.org/wiki/C%2B%2B11\" rel=\"nofollow noreferrer\">C++11</a>, when you have an expression with only a function name (e.g. the exponential <a href=\"http://en.cppreference.com/w/cpp/numeric/math/exp\" rel=\"nofollow noreferrer\">std::exp</a>) that expression has the function's <em>address</em> as its value. Or for example:</p>\n\n<pre><code>extern void fun(int); /// declare the function fun, defined elsewhere.\nauto fp = fun;\n</code></pre>\n\n<p>then <code>fp</code> is a pointer to a function taking one argument, an integer, and that returns nothing (void). Like <code>fun</code> this pointer <code>fp</code> holds the address of the function (<em>not</em> a name), and the initialization of the pointer <code>fun</code>  with the address of the function fun() is done at <em>build</em> time (e.g. by the compiler and the linker, nothing happens at runtime). Hence <code>std::cout &lt;&lt; fp &lt;&lt; std::endl</code> would output some boolean flag (not a name). And so would <code>std::cout &lt;&lt; fun &lt;&lt; std::endl</code>. And <code>std::cout &lt;&lt; (void*)fp &lt;&lt; std::endl</code> would output some address.</p>\n\n<p>Read Levine's <a href=\"http://iecc.com/linkers/\" rel=\"nofollow noreferrer\"><em>Linkers and loaders</em></a> book to understand more about symbols (such as function names).</p>\n\n<p>On Linux specifically, you might use <a href=\"http://man7.org/linux/man-pages/man3/dladdr.3.html\" rel=\"nofollow noreferrer\">dladdr(3)</a> to get the (<a href=\"https://en.wikipedia.org/wiki/Name_mangling\" rel=\"nofollow noreferrer\">mangled</a>) name of a function address (assuming it has some <em>global</em> name in some <a href=\"https://en.wikipedia.org/wiki/Executable_and_Linkable_Format\" rel=\"nofollow noreferrer\">ELF</a> file, and you did not <code>strip</code> the binary, and linked with appropriate options - e.g. <code>-rdynamic</code>).</p>\n\n<p>In C++11, some functions don't have any names (and some might not have any <em>global</em> name). Read about <a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow noreferrer\">lambda expressions</a> &amp; <a href=\"https://en.wikipedia.org/wiki/Closure_%28computer_programming%29\" rel=\"nofollow noreferrer\">closures</a>. See also <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function\" rel=\"nofollow noreferrer\">std::function</a>.</p>\n"}], "owner": {"reputation": 276, "user_id": 7325581, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5f04d843e595795aea0e5eadcd3a84a8?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Tsai", "link": "https://stackoverflow.com/users/7325581/michael-tsai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5437, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519018671, "creation_date": 1482327728, "last_edit_date": 1482345901, "question_id": 41264192, "link": "https://stackoverflow.com/questions/41264192/how-to-get-the-address-of-function", "title": "How to get the address of function?", "body": "<p>The address of function is its name with bracket. However, when I use cout to print out the address, it is wrong.</p>\n\n<p>Assuming the function is \"int function_address()\" and code is such as b</p>\n\n<pre><code>cout&lt;&lt;function_address&lt;&lt;endl;\n</code></pre>\n"}, {"tags": ["javascript", "c++", "c", "arrays", "emscripten"], "answers": [{"tags": [], "owner": {"reputation": 1364, "user_id": 519531, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/RJH9g.jpg?s=128&g=1", "display_name": "Alexander Wallin", "link": "https://stackoverflow.com/users/519531/alexander-wallin"}, "is_accepted": true, "score": 1, "last_activity_date": 1482333122, "last_edit_date": 1482333122, "creation_date": 1482332473, "answer_id": 41265774, "question_id": 41263856, "link": "https://stackoverflow.com/questions/41263856/why-does-emscripten-throw-errors-for-some-number-added-to-an-allocated-float32ar/41265774#41265774", "title": "Why does Emscripten throw errors for some number added to an allocated Float32Array?", "body": "<p>This was a nice 101 memory management lesson.</p>\n\n<p>I am allocating 32 bytes, but since a <code>Float32Array</code> contain 32-bit (4 byte) numbers, I only allocate 25% of the memory I need. This means that when I write numbers to the last 3 quarters of the array, I overwrite memory somewhere else in the application, which sometimes causes an error and sometimes not.</p>\n\n<p>So, changing</p>\n\n\n\n<pre class=\"lang-js prettyprint-override\"><code>let ptr = Module._malloc(bufferLength)\n</code></pre>\n\n<p>to</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>let ptr = Module._malloc(bufferLength * Float32Array.BYTES_PER_ELEMENT)\n</code></pre>\n\n<p>does the trick.</p>\n"}], "owner": {"reputation": 1364, "user_id": 519531, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/RJH9g.jpg?s=128&g=1", "display_name": "Alexander Wallin", "link": "https://stackoverflow.com/users/519531/alexander-wallin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 41265774, "answer_count": 1, "score": 0, "last_activity_date": 1482333122, "creation_date": 1482326717, "last_edit_date": 1482332873, "question_id": 41263856, "link": "https://stackoverflow.com/questions/41263856/why-does-emscripten-throw-errors-for-some-number-added-to-an-allocated-float32ar", "title": "Why does Emscripten throw errors for some number added to an allocated Float32Array?", "body": "<h2>Update:</h2>\n\n<p>\u2193 <a href=\"http://#answer-41265774\" rel=\"nofollow noreferrer\">This has been resolved</a> \u2193, but I couldn't accept my own answer immediately.</p>\n\n<hr>\n\n<p>I am learning how to pass <code>TypeArray</code>s between JavaScript and \"C++\" compiled using Emscripten. In this process I ran into an error I don't know what to make of.</p>\n\n<p>This is the basically what I'm doing:</p>\n\n\n\n<pre class=\"lang-js prettyprint-override\"><code>let bufferLength = 32\nlet ptr = Module._malloc(bufferLength)\nlet buf = new Float32Array(Module.HEAPF32.buffer, ptr, bufferLength)\n\nfor (let i = 0; i &lt; bufferLength; i++) {\n  // The multiplier (here 1.234) sometimes causes an error,\n  // and sometimes it doesn't\n  buf[i] = i * 1.234\n}\n\n// Here is where the error is thrown and Module._abort()\n// is invoked\nModule._free(ptr)\n</code></pre>\n\n<p>I have set up a repo where this is reproducable: <a href=\"https://github.com/alexanderwallin/emcc-f32-buffer-error\" rel=\"nofollow noreferrer\">https://github.com/alexanderwallin/emcc-f32-buffer-error</a>. The repo tests the multipliers <code>[1.1, 1.2, 1.3, 1.4]</code>, where <code>1.1</code> and <code>1.4</code> causes errors.</p>\n\n<p><code>Module</code> in this case is an empty C file compiled using <code>emcc -o empty.js empty.c</code>.</p>\n\n<p>This is the console output:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>- - - - - - - \n\nf32-ptr-tests.js:24 testing multiplier: 1.1\nf32-ptr-tests.js:34 ... did fill array\nf32-ptr-tests.js:41 oh nose!\nf32-ptr-tests.js:42 abort() at Error\n    at jsStackTrace (file:///path/to/emcc-f32-ptr-error/empty.js:1173:13)\n    at stackTrace (file:///path/to/emcc-f32-ptr-error/empty.js:1190:22)\n    at Object.abort (file:///path/to/emcc-f32-ptr-error/empty.js:9814:44)\n    at _abort (file:///path/to/emcc-f32-ptr-error/empty.js:1796:22)\n    at _free (file:///path/to/emcc-f32-ptr-error/empty.js:8998:3)\n    at Object.asm._free (file:///path/to/emcc-f32-ptr-error/empty.js:9602:19)\n    at file:///path/to/emcc-f32-ptr-error/f32-ptr-tests.js:36:12\n(anonymous) @ f32-ptr-tests.js:42\nf32-ptr-tests.js:45 \n\n\nf32-ptr-tests.js:23 - - - - - - - \n\nf32-ptr-tests.js:24 testing multiplier: 1.2\nf32-ptr-tests.js:34 ... did fill array\nf32-ptr-tests.js:38 all good\nf32-ptr-tests.js:45 \n\n\nf32-ptr-tests.js:23 - - - - - - - \n\nf32-ptr-tests.js:24 testing multiplier: 1.3\nf32-ptr-tests.js:34 ... did fill array\nf32-ptr-tests.js:38 all good\nf32-ptr-tests.js:45 \n\n\nf32-ptr-tests.js:23 - - - - - - - \n\nf32-ptr-tests.js:24 testing multiplier: 1.4\nf32-ptr-tests.js:34 ... did fill array\nf32-ptr-tests.js:41 oh nose!\nf32-ptr-tests.js:42 abort() at Error\n    at jsStackTrace (file:///path/to/emcc-f32-ptr-error/empty.js:1173:13)\n    at stackTrace (file:///path/to/emcc-f32-ptr-error/empty.js:1190:22)\n    at Object.abort (file:///path/to/emcc-f32-ptr-error/empty.js:9814:44)\n    at _abort (file:///path/to/emcc-f32-ptr-error/empty.js:1796:22)\n    at _free (file:///path/to/emcc-f32-ptr-error/empty.js:8998:3)\n    at Object.asm._free (file:///path/to/emcc-f32-ptr-error/empty.js:9602:19)\n    at file:///path/to/emcc-f32-ptr-error/f32-ptr-tests.js:36:12\n</code></pre>\n\n<p>What is happening here?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1482326596, "post_id": 41263747, "comment_id": 69728249, "body": "at least add code"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1482326613, "post_id": 41263747, "comment_id": 69728269, "body": "Why are you using <code>new[]</code> and pointers instead of <code>std::vector</code>?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1482326725, "post_id": 41263747, "comment_id": 69728343, "body": "You probably should consider using standard <a href=\"http://en.cppreference.com/w/cpp/container\" rel=\"nofollow noreferrer\">containers</a> &amp; <a href=\"https://en.wikipedia.org/wiki/Smart_pointer\" rel=\"nofollow noreferrer\">smart pointers</a>. Your <code>map</code> variable should be named otherwise, and could be a <code>std::vector&lt;std::unique_ptr&lt;Pos_xy&gt;&gt;</code>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1482326774, "post_id": 41263747, "comment_id": 69728366, "body": "Also note that you need a <i>tripple</i> pointer (<code>Pos_xy***</code>) to be able to handle polymorphism. When you assign an <code>emptyPos</code> object instance to a <code>Pos_xy</code> object instance you will have <i>object slicing</i> and lose the polymorphism. If using vectors, you need a vector of vectors of pointers."}], "owner": {"reputation": 15, "user_id": 5582952, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/95851103c649f3a47caaf9c2e5571e2e?s=128&d=identicon&r=PG&f=1", "display_name": "m3k3r1", "link": "https://stackoverflow.com/users/5582952/m3k3r1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "closed_date": 1482326649, "answer_count": 0, "score": 0, "last_activity_date": 1482326609, "creation_date": 1482326425, "last_edit_date": 1482326609, "question_id": 41263747, "link": "https://stackoverflow.com/questions/41263747/abstract-base-class-error-initializing", "closed_reason": "Duplicate", "title": "Abstract base class error initializing", "body": "<p>I'm doing this game assignment for college in c++ and I'm trying to initialize the map (Pos_xy **map - base abstract class) to emptyPos that is a derivate class, although I'm getting this compiler's error </p>\n\n<pre><code>error: invalid conversion from \u2018emptyPos**\u2019 to \u2018Pos_xy**\u2019\n</code></pre>\n\n<p>Is this impossible to do ? I know if I just a simple pointer I can do [Pos_xy *c = new emptyPos; ] Is it wrong when we have Pos_xy** instead;</p>\n\n<pre><code>void Game::initMap(){\n    map = new emptyPos*[mapCol];\n    for (size_t col = 0; col &lt; mapCol; col++)\n        map[col] = new emptyPos[mapRow];\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1482326274, "post_id": 41263583, "comment_id": 69728023, "body": "Try adjusting the <a href=\"http://en.cppreference.com/w/cpp/locale/isalpha\" rel=\"nofollow noreferrer\"><code>locale</code></a>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 3, "creation_date": 1482326357, "post_id": 41263583, "comment_id": 69728091, "body": "If you want to remove punctuation as the function name says, there&#39;s a <code>std::ispunct</code> function."}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 1, "creation_date": 1482326367, "post_id": 41263583, "comment_id": 69728099, "body": "Which is the encoding you are using for the <code>std::string</code>? C++ is not utf8 aware per se so working with a <code>std::string</code> that contains utf8 data won&#39;t work as expected since each element of the string doesn&#39;t correspond to a real character. <code>isalpha</code> can work with <code>std::wstring</code> or <code>std::u16string</code> if properly providing a locale."}, {"owner": {"reputation": 605, "user_id": 6270838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10201835414884191/picture?type=large", "display_name": "Jakub Gruber", "link": "https://stackoverflow.com/users/6270838/jakub-gruber"}, "edited": false, "score": 0, "creation_date": 1482326463, "post_id": 41263583, "comment_id": 69728163, "body": "It helps a lot, but it still does not remove quotation notes."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1482326845, "post_id": 41263583, "comment_id": 69728400, "body": "@JakubGruber Are all the characters you want removed punctuation characters?  If not, what other characters that would <i>not</i> be considered punctuation characters do you want removed?"}, {"owner": {"reputation": 605, "user_id": 6270838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10201835414884191/picture?type=large", "display_name": "Jakub Gruber", "link": "https://stackoverflow.com/users/6270838/jakub-gruber"}, "edited": false, "score": 0, "creation_date": 1482327187, "post_id": 41263583, "comment_id": 69728645, "body": "Basically, I want to remove everything but alphanumeric character."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1482327642, "post_id": 41263583, "comment_id": 69728964, "body": "@JakubGruber - I posted an answer, but you may still have issues with the locale.  So YMMV."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1482326532, "post_id": 41263761, "comment_id": 69728218, "body": "<code>isalpha</code> uses the current locale.  Be default that means just regular english characters."}], "tags": [], "owner": {"reputation": 84, "user_id": 6193223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kz6ZR.jpg?s=128&g=1", "display_name": "Cornelis de Mooij", "link": "https://stackoverflow.com/users/6193223/cornelis-de-mooij"}, "is_accepted": false, "score": -1, "last_activity_date": 1482326473, "creation_date": 1482326473, "answer_id": 41263761, "question_id": 41263583, "link": "https://stackoverflow.com/questions/41263583/remove-all-non-alpha-characters-from-string/41263761#41263761", "title": "Remove all non-alpha characters from string", "body": "<p>You might have to write a custom version of isalpha. From what you describe it seems like it only returns true for a-z and A-Z.</p>\n"}, {"tags": [], "owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "is_accepted": false, "score": 2, "last_activity_date": 1482327465, "last_edit_date": 1482327465, "creation_date": 1482327055, "answer_id": 41263977, "question_id": 41263583, "link": "https://stackoverflow.com/questions/41263583/remove-all-non-alpha-characters-from-string/41263977#41263977", "title": "Remove all non-alpha characters from string", "body": "<p>Here's an idea:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cwctype&gt;\n// if windows, add this: #include &lt;io.h&gt;\n// if windows, add this: #include &lt;fcntl.h&gt;\n\nint main()\n{\n  // if windows, add this: _setmode( _fileno( stdout ), _O_U16TEXT );\n  std::wstring s( L\"\u01611\u010d2\u00e93\u0159!?\" );\n  for ( auto c : s )\n    if ( std::iswalpha( c ) )\n      std::wcout &lt;&lt; c;\n  return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 605, "user_id": 6270838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10201835414884191/picture?type=large", "display_name": "Jakub Gruber", "link": "https://stackoverflow.com/users/6270838/jakub-gruber"}, "edited": false, "score": 0, "creation_date": 1482327783, "post_id": 41264147, "comment_id": 69729046, "body": "I tried that by small modification (changing <code>!::iswalnum(ch)</code> to <code>::ispunct(ch)</code>. It works fine for czech words, but I am having problem with <code>\u201c</code>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 605, "user_id": 6270838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10201835414884191/picture?type=large", "display_name": "Jakub Gruber", "link": "https://stackoverflow.com/users/6270838/jakub-gruber"}, "edited": false, "score": 1, "creation_date": 1482328256, "post_id": 41264147, "comment_id": 69729349, "body": "Looks like the left double quotation mark (not the ASCII double quote) is not considered a punctuation character, at least in the locale you&#39;re using.   You can replace or adjust the lambda to do your own check, but the answer is how you should write the erasure code, in general, instead of looping."}], "tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": true, "score": 3, "last_activity_date": 1482327598, "creation_date": 1482327598, "answer_id": 41264147, "question_id": 41263583, "link": "https://stackoverflow.com/questions/41263583/remove-all-non-alpha-characters-from-string/41264147#41264147", "title": "Remove all non-alpha characters from string", "body": "<p>You can use <code>std::remove_if</code> along with <code>erase</code>:</p>\n\n<pre><code>#include &lt;cctype&gt;\n#include &lt;algorithm&gt;\n#include &lt;string&gt;\n//...\nstd::wstring FileHandler::removePunctuation(std::wstring word) \n{\n    word.erase(std::remove_if(word.begin(), word.end(), \n                  [](char ch){ return !::iswalnum(ch); }), word.end());\n    return word;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 20650, "user_id": 1335865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3eBZC.png?s=128&g=1", "display_name": "Ralph Tandetzky", "link": "https://stackoverflow.com/users/1335865/ralph-tandetzky"}, "is_accepted": false, "score": 0, "last_activity_date": 1482328876, "last_edit_date": 1482328876, "creation_date": 1482328104, "answer_id": 41264322, "question_id": 41263583, "link": "https://stackoverflow.com/questions/41263583/remove-all-non-alpha-characters-from-string/41264322#41264322", "title": "Remove all non-alpha characters from string", "body": "<p>After calling <code>std::setlocale(LC_ALL, \"en_US.UTF-8\")</code> you can use <code>std::iswalpha()</code> to figure out, if something is a letter. </p>\n\n<p>So the following program</p>\n\n<pre><code>#include &lt;cwctype&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    std::setlocale(LC_ALL, \"en_US.UTF-8\");\n    std::wstring youreWelcome = L\"Nen\u00ed za\u010d.\";\n\n    for ( auto c : youreWelcome )\n        if ( std::iswalpha(c) )\n            std::wcout &lt;&lt; c;\n\n    std::wcout &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>will print </p>\n\n<pre><code>Nen\u00edza\u010d\n</code></pre>\n\n<p>to the console. </p>\n\n<p>Note that <code>std::setlocale()</code> might not be thread-safe by itself nor in conjunction with certain other functions that are executed concurrently such as <code>std::iswalpha()</code>. Therefore, it should only be used in single-threaded code like program start-up code. More concretely, you should not call <code>std::setlocale()</code> from within <code>FileHandler::removePunctuation()</code> but only <code>std::iswalpha()</code> if you need it. </p>\n"}], "owner": {"reputation": 605, "user_id": 6270838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10201835414884191/picture?type=large", "display_name": "Jakub Gruber", "link": "https://stackoverflow.com/users/6270838/jakub-gruber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3042, "favorite_count": 0, "accepted_answer_id": 41264147, "answer_count": 4, "score": 5, "last_activity_date": 1482328876, "creation_date": 1482325891, "question_id": 41263583, "link": "https://stackoverflow.com/questions/41263583/remove-all-non-alpha-characters-from-string", "title": "Remove all non-alpha characters from string", "body": "<p>Is there a way how to remove all non-alpha characters (i.e. <code>,.?!</code> etc) from <code>std::string</code> while not deleting czech symbols like <code>\u0161\u010d\u00e9\u0159</code>? I tried using: </p>\n\n<pre><code>std::string FileHandler::removePunctuation(std::string word) {\n    for (std::string::iterator i = word.begin(); i != word.end(); i++) {\n        if (!isalpha(word.at(i - word.begin()))) {\n            word.erase(i);\n            i--;\n        }\n    }\n    return word;    \n}\n</code></pre>\n\n<p>but it deletes czech characters.</p>\n\n<p>In the best case, I'd like to use <code>toLowerCase</code> for those symbols too.</p>\n"}]